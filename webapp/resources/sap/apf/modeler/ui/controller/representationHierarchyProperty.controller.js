sap.ui.define(["sap/apf/modeler/ui/controller/propertyType","sap/apf/core/constants","sap/apf/modeler/ui/utils/treeTableDisplayOptionsValueBuilder","sap/apf/modeler/ui/utils/textManipulator","sap/ui/thirdparty/jquery"],function(B,c,t,a,q){"use strict";var T=sap.apf.modeler.ui.utils.textManipulator;function _(e,C){var i;var s=C.oStepPropertyMetadataHandler.oStep.getService();var E=C.oStepPropertyMetadataHandler.oStep.getEntitySet();var h=C.oStepPropertyMetadataHandler.oStep.getHierarchyProperty();C.oConfigurationEditor.getHierarchyNodeIdAsPromise(s,E,h).done(function(n){i=C.oStepPropertyMetadataHandler.hasTextPropertyOfDimension(e,n);});return i;}return B.extend("sap.apf.modeler.ui.controller.representationHierarchyProperty",{onBeforeRendering:function(){var C=this;C.byId("idPropertyType").setEnabled(false);},setLabelDisplayOptionTypeAsPromise:function(o){var d=q.Deferred();var b,l,m,L,C=this,e=[];b=new sap.apf.modeler.ui.utils.TreeTableDisplayOptionsValueBuilder(C.oTextReader,o);l=sap.apf.core.constants.representationMetadata.labelDisplayOptions;L=C.oRepresentation.getHierarchyPropertyLabelDisplayOption();m=b.getLabelDisplayOptions();C.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(E){if((L===l.TEXT)&&!_(E,C)){m=b.getValidatedLabelDisplayOptions();e=T.addPrefixText([L],C.oTextReader);L=e[0];}C.byId("idLabelDisplayOptionType").setModel(m);C.byId("idLabelDisplayOptionType").setSelectedKey(L);d.resolve();});return d.promise();},changeLabelDisplayOption:function(l){var C=this;C.oRepresentation.setHierarchyPropertyLabelDisplayOption(l);},getAllPropertiesAsPromise:function(){var C=this,s,p,h=[];var S=C.oStepPropertyMetadataHandler.oStep;var d=q.Deferred();S.getConsumablePropertiesForRepresentation(C.oRepresentation.getId()).done(function(r){r.available.forEach(function(P){if(P===C.oStepPropertyMetadataHandler.getHierarchicalProperty()){h.push(P);}});s=C.getSelectedProperty();if(s!==undefined){p=h.indexOf(s)!==-1?h:h.concat(s);if(r.available.indexOf(s)!==-1){h=p;s=s;}else{h=h.concat(T.addPrefixText([s],C.oTextReader));s=T.addPrefixText([s],C.oTextReader)[0];}}d.resolve({aAllProperties:h,sSelectedKey:s});});return d.promise();},enableDisableLabelDisplayOptionTypeAsPromise:function(){var i,C=this;var d=q.Deferred();var b=C.byId("idLabelDisplayOptionType");C.oStepPropertyMetadataHandler.getEntityTypeMetadataAsPromise().done(function(e){var I=_(e,C);for(i=0;i<b.getItems().length;i++){b.getItems()[i].setEnabled(true);if(i>0&&!I){b.getItems()[i].setEnabled(false);}}d.resolve();});return d.promise();},getPropertyTextLabelKey:function(){var C=this;return C.oRepresentation.getHierarchyPropertyTextLabelKey();},setPropertyTextLabelKey:function(p,l){var C=this;C.oRepresentation.setHierarchyPropertyTextLabelKey(l);},setNextPropertyInParentObject:function(){return;},removePropertyFromParentObject:function(){return;},setFocusOnAddRemoveIcons:function(){return;}});});
