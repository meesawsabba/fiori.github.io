/*!
 * SAP APF Analysis Path Framework
 *
 * (c) Copyright 2012-2014 SAP AG. All rights reserved
 */
sap.ui.define(["sap/apf/modeler/ui/controller/sortPropertyType","sap/ui/thirdparty/jquery"],function(s,q){"use strict";var a=sap.apf.modeler.ui.controller.sortPropertyType.extend("sap.apf.modeler.ui.controller.stepSortPropertyType",{onBeforeRendering:function(){var c=this;c.byId("idGridSortLabel").setSpan("L4 M4 S4");c.byId("idGridSortProperty").setSpan("L2 M2 S2");c.byId("idGridSortDirectionLabel").setSpan("L2 M2 S2");c.byId("idGridSortDirection").setSpan("L2 M2 S2");c.byId("idGridIconLayout").setSpan("L2 M2 S2");},updateOfConfigurationObjectOfSubclass:function(S){var c=this;c.oParentObject.setTopNSortProperties(S);},getAllPropertiesAsPromise:function(){var c=this,A,S,p;var t=sap.apf.modeler.ui.utils.textManipulator;var d=q.Deferred();c.oParentObject.getConsumablePropertiesForTopN().done(function(r){A=r.consumable;S=c.getSelectedSortProperty();if(S!==undefined){p=A.indexOf(S)!==-1?A:A.concat(S);A=r.available.indexOf(S)!==-1?p:A.concat(t.addPrefixText([S],c.oTextReader));S=r.available.indexOf(S)!==-1?S:t.addPrefixText([S],c.oTextReader)[0];}d.resolve({aAllProperties:A,sSelectedKey:S});});return d.promise();},getOrderBy:function(){var c=this;return c.oParentObject.getTopN().orderby;},setNextPropertyInParentObject:function(){var c=this;c.updateOfConfigurationObject();c.byId("idSortDirection").setSelectedKey("true");},removePropertyFromParentObject:function(){var c=this;c.updateOfConfigurationObject();},addPropertyAsPromise:function(){var c=this;var d=q.Deferred();var C=sap.apf.modeler.ui.utils.CONSTANTS.events;c.oParentObject.getConsumablePropertiesForTopN().done(function(r){c.getView().fireEvent(C.ADDPROPERTY,{"oSourceView":c.getView(),"sProperty":r.consumable[0],"sContext":c.getView().getViewData().oPropertyTypeData.sContext});c.oConfigurationEditor.setIsUnsaved();d.resolve();});return d.promise();}});return a;},true);
