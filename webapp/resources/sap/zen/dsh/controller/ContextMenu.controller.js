/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/controller/ContextMenu.controller",["jquery.sap.global","sap/ui/core/mvc/Controller","sap/ui/core/routing/HashChanger","sap/m/MessageToast","sap/zen/dsh/NavigationCommandType",],function(q,C,H,M,N){"use strict";var h=new H();C.extend("sap.zen.dsh.controller.ContextMenu",{onInit:function(){var t=this;var v=t.getView();v.setBusy(true);v.loaded().then(function(){t.getPivotTable=function(){return v.getPivot();};v.setBusy(false);});},onAfterRendering:function(){this.getView().getModel("cm").getProperty("/sortTooltip")&&q(this.getView().getDomRef()).find("#theContextMenu--nli11").find(">div").attr("title",this.getView().getModel("cm").getProperty("/sortTooltip"));},toRows:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).toRows(t.getView().getModel("cm").getProperty("/Dimension")).getResultSet();}});},toColumns:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).toColumns(t.getView().getModel("cm").getProperty("/Dimension")).getResultSet();}});},exchange:function(e){var t=this;var d=e.getSource().data();t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).exchange(t.getView().getModel("cm").getProperty("/Dimension"),d.dimension).getResultSet();}});},openCharDlg:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){var d=t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName());return d.openDimDialog(t.getView().getModel("cm").getProperty("/Dimension")).then(function(b){return b?d.getResultSet():d;});}});},openKeyfigureDlg:function(){var t=this;var d=t.getView().getModel("cm").getProperty("/Dimension");var m=t.getView().getModel("cm").getProperty("/Member");t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){var D=t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName());return D.openCellDialog(d,m).then(function(b){return b?D.getResultSet():D;});}});},openRRI:function(e){var h=new H();h.setHash(e.getParameter("item").data().hash);},sortAsc:function(){var t=this;var o=t.getView().getModel("om");var d=t.getView().getModel("cm").getProperty("/Dimension");var m=t.getView().getModel("cm").getProperty("/Member");var D=o.getDataProvider(t.getPivotTable().getDataProviderName());t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){D.sort(d,sap.zen.dsh.SortDirection.ASCENDING,null,m);return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();}});},sortDesc:function(){var t=this;var d=t.getView().getModel("cm").getProperty("/Dimension");var m=t.getView().getModel("cm").getProperty("/Member");var D=t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName());t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){D.sort(d,sap.zen.dsh.SortDirection.DESCENDING,null,m);return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();}});},displayAttributes:function(){M.show("not yet implemented");},removeDrilldown:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).removeDrilldown(t.getView().getModel("cm").getProperty("/Dimension"));return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();}});},collapseAll:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){M.show("not yet implemented");}});},drilldown:function(e){var t=this;var c=this.getView().getModel("cm");var d=this.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName());var D=e.getSource().data();this.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){d.drilldown(c.getProperty("/Dimension"),D.dimension);return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();}});},createSelection:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).openCreateRestrictionDialog(t.getView().getModel("cm").getProperty("/Dimension"),t.getView().getModel("cm").getProperty("/Member")).then(function(b){return b&&t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();});}});},createFormular:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).openCreateFormulaDialog(t.getView().getModel("cm").getProperty("/Dimension"),t.getView().getModel("cm").getProperty("/Member")).then(function(b){return b&&t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();});}});},search:function(){var t=this;var c=t.getView().getModel("cm");var m=c.getProperty("/Member");t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){h.setHash("Action-search&/top=10&filter="+"{\"dataSource\":{\"type\":\"Category\",\"id\":\"All\",\"label\":\"All\",\"labelPlural\":\"All\"},\"searchTerm\":\""+m+"\",\"rootCondition\":{\"type\":\"Complex\",\"operator\":\"And\",\"conditions\":[]}}");return Promise.resolve(null);}});},keepFilterValue:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){var d=t.getView().getModel("cm").getProperty("/Dimension");var m=t.getView().getModel("cm").getProperty("/Member");t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).setFilter(d,m).getResultSet().then(function(r){t.getPivotTable().getEasyGrid().clearOffset();return r;});}});},removeFilterValue:function(){var t=this;this.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).removeFilter(t.getView().getModel("cm").getProperty("/Dimension")).getResultSet();}});},filterAndDrillDown:function(e){var t=this;var d=e.getSource().data();this.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).filterAndDrillDown(t.getView().getModel("cm").getProperty("/Dimension"),t.getView().getModel("cm").getProperty("/Member"),d.dimension).getResultSet();}});},toggle:function(e){var o=e.getSource();if(o.getExpanded()){o.collapse();}else{o.expand();}},displayElement:function(){M.show("Not yet implemented");},selectFilterValue:function(){var t=this;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).openSelector(t.getView().getModel("cm").getProperty("/Dimension")).then(function(b){return b&&t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();});}});},openSelectorFor:function(e){var t=this;var d=e.getSource().data().dimension;t.getPivotTable().fireNavigationCmd({navigationCmdType:N.ContextMenuCmd,cmd:function(){return t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).openSelector(d).then(function(b){return b&t.getView().getModel("om").getDataProvider(t.getPivotTable().getDataProviderName()).getResultSet();});}});return sap.zen.dsh.controller.ContextMenu;}});});
