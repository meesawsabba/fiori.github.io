/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/utils/jq"],function(jQuery,BaseHandler){"use strict";var AbsoluteLayoutHandler=function(){BaseHandler.apply(this,arguments);var dispatcher=BaseHandler.dispatcher;var that=this;function init(oAbsLayout,oControlProperties){var aChildren=oControlProperties.content;if(oControlProperties.newurl){if(oControlProperties.newurl.length&&oControlProperties.newurl.length>=8&&oControlProperties.newurl.substring(0,7)==="mailto:"){window.location=oControlProperties.newurl;}else{if(sap.zen.dsh.sapbi_Mobile&&(sap.zen.dsh.sapbi_Mobile.mobi.iPad||sap.zen.dsh.sapbi_Mobile.mobi.iPhone)){var mobiPrefix="mobi://openNewWindow?url=";var encodedUrl=encodeURIComponent(oControlProperties.newurl);var mobiOpenUrl=mobiPrefix+encodedUrl;window.location.href=mobiOpenUrl;}else{window.open(oControlProperties.newurl);}}}if(oControlProperties.afterRendering){eval(oControlProperties.afterRendering);}if(oControlProperties.loadingIndicatorDelay){sap.zen.dsh.getLoadingIndicator().setDelay(oControlProperties.loadingIndicatorDelay);}if(aChildren){that.updateChildren(aChildren,oAbsLayout,function(n,i){dispatcher.insertIntoAbsoluteLayoutContainer(oAbsLayout,n,i);},function(c){oAbsLayout.removeContent(c);});}}this.addD4LClasses=function(a){a.addStyleClass("designmodeborder");};this.rootNeedsToBeDropEnabled=function(d){var c,i,C,o,h=false;if(d){c=d.getComponentIds();for(i=0;i<c.length&&!h;i++){C=c[i];o=d.getControlForId(C);if(o&&o.zenControlType&&o.zenControlType==="xtable"){h=o.getPropertyBag().isDragDropEnabled();}}}return h;};this.createAndAdd=function(c,C,o,a){var i=C["id"];var A=this.createAbsoluteLayout(i);A.addStyleClass("zenborder");this.addD4LClasses(A);a(A,o);init(A,C);if(i==="ROOT_absolutelayout"){if(this.rootNeedsToBeDropEnabled(dispatcher)===true){A.fOrigOnAfterRendering=A.onAfterRendering;A.fOrigDestroy=A.destroy;A.destroy=function(){jQuery(document.getElementById(this.getId())).droppable("destroy");if(this.fOrigDestroy){this.fOrigDestroy();}};A.onAfterRendering=function(){if(this.fOrigOnAfterRendering){this.fOrigOnAfterRendering();}jQuery(document.getElementById(this.getId())).droppable({greedy:true,accept:function(){return true;},drop:function(e,u){if(!e.buttons){dispatcher.onUnhandledDrop(e,u);}}});};}}return A;};this.updateComponent=function(c,C){if(C){init(c,C);}return c;};this.applyForChildren=function(a,f){var p=a.getPositions();for(var i=0;i<p.length;i++){var c=p[i].getControl();if(c){var r=f(c);if(r)return r;}}return null;};this.getDecorator=function(){return"RootDecorator";};this.getType=function(){return"absolutelayout";};};var instance=new AbsoluteLayoutHandler();BaseHandler.dispatcher.addHandlers(instance.getType(),instance);return instance;});
