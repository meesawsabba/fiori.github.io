/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler"],function(q,_,B){"use strict";var A=function(){B.apply(this,arguments);var t=this;this.oPlacementMapping={BOTTOM:sap.m.PlacementType.Bottom,LEFT:sap.m.PlacementType.Left,RIGHT:sap.m.PlacementType.Right,TOP:sap.m.PlacementType.Top,HORIZONTAL:sap.m.PlacementType.Horizontal,VERTICAL:sap.m.PlacementType.Vertical,AUTO:sap.m.PlacementType.Auto};this.oActionSheet=null;this.oAction=null;this.create=function(c,C){var l=C["id"];var b=this.createButton(l);this.init(b,C);b.setVisible(false);return b;};this.update=function(c,C){if(C){this.init(c,C);}return c;};this.init=function(c,C){var l=function(){if(t.oActionSheet){t.oActionSheet.destroyButtons();t.oActionSheet.destroy();t.oActionSheet=null;}};if(C.open===true){l();t.oActionSheet=new sap.m.ActionSheet(c.getId()+"_rendered");if(C.placement){t.oActionSheet.setPlacement(t.oPlacementMapping[C.placement]);}else{t.oActionSheet.setPlacement(sap.m.PlacementType.Auto);}var b=C.onClickCommand;var d=C.items;if(d){for(var i=0;i<d.length;i++){var e=d[i].item;var f=new sap.m.Button(t.oActionSheet.getId()+"_button_"+i);if(e.text){f.setText(e.text);}else{f.setText(e.value);}if(e.icon){f.setIcon(e.icon);}var g=b.replace("__VALUE__",e.value);f.data("onClickCommand",{value:g});f.attachPress(function(){t.oActionSheet.data("onActionCommand",this.data("onClickCommand"));});if(e.value==="TILE"){var h=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(h.enablePersonalization!==undefined){var j=h.enablePersonalization;f.setEnabled(j);}}t.oActionSheet.addButton(f);}}setTimeout(function(){var k=B.dispatcher.getRootControlForComponentId(C.openBy);if(k){t.oActionSheet.openBy(k);t.oActionSheet.attachAfterClose(null,function(){var m=null;if(C.closeCommand){m=new Function(C.closeCommand);}var n=null;if(this.data("onActionCommand")){n=new Function(this.data("onActionCommand").value);}l();if(m){m();}if(n){n();}});}},1);}};this.getDefaultProxyClass=function(){return[sap.m.ActionSheet,null];};this.getType=function(){return"actionsheet";};};var a=new A();B.dispatcher.addHandlers(a.getType(),a);return a;});
