/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/widgets/LegacyInitialViewFeeding","sap/zen/dsh/utils/BaseHandler"],function(q,L,_,a){"use strict";var F={primaryValues:"valueAxis",regionColor:"color",pieSectorColor:"color",pieSectorSize:"size",axisLabels:"categoryAxis"};function b(h){this._cvomDataGetter=h||new a();}b.prototype.createBindings=function(h,r){var j=this._cvomDataGetter.getFeedingData(h,r);var o=_.chain(j.feeding).map(_.partial(v,j.data,r)).filter(_.isObject).value();if(i(o,true)){e(o);}return o;};function v(h,r,j){var k=F[j.feedId];return k&&{"feed":k,"source":f(j.binding,_.partial(m,h,r))};}function m(h,r,j){var k={"measureValuesGroup":c,"analysisAxis":d,"measureNamesDimension":_.constant({"measureNames":["valueAxis"]})};return k[j.type]&&k[j.type](h,r,j);}function c(h,r,j){var H=_.find(h.measureValuesGroup,{index:j.index});if(H){var k=H.data;return _.map(k,function(l){return l.key;});}else{L.error("Could nod find measureValuesGroup with index: "+j.index);return[];}}function d(h,r,j){var H=_.find(h.analysisAxis,{index:j.index});if(H){var k=H.data;return _.chain(k).map(function(l){return _.find(r.dimensions,{text:l.name});}).reject(_.isUndefined).map("key").value();}else{L.error("Could not find analysisAxis with index: "+j.index);return[];}}function f(h,j){return _.chain(h).map(j).filter(_.isObject).flatten(true).value();}function g(o){var C=_.find(o,{"feed":"categoryAxis"});return C;}function i(o,C){var h=g(o);if(C&&!h){return false;}return!h||!h.source||!h.source.length;}function e(o){var C=g(o);var h=_.partial(_.has,_,"measureNames");if(!C){C={"feed":"categoryAxis"};o.push(C);}_.forEach(o,function(j){j.source=_.reject(j.source,h);});C.source=[{"measureNames":["valueAxis"]}];}return b;});
