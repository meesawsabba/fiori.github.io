/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler"],function(q,_,B){"use strict";var I="info";var W="warn";var E="error";var L=[I,W,E];var g=window;function C(c,e,i){this.control=c;this.errorLookup=e;this.isDesignTime=i;}C.prototype.renderError=function(e){this.control.fireChartError({newValue:e.message?e.message:e});var b=this.errorLookup.get(e);l(e,b);if(b){d(this.control,b,this.isDesignTime);}return!!b;};C.prototype.checkError=function(){if(this._error){throw this._error;}};C.prototype.setError=function(e){var b=this.errorLookup.get(e);l(e,b);this._errorInfo=b;this._error=e;};C.prototype.clearError=function(){this._errorInfo=undefined;this._error=undefined;};function l(e,b){if(e.message==="control.waitForReady"){return;}if(g.console){g.console.log(b,e);if(e instanceof Error){g.console.log(e.stack);}}}function d(c,e,i){var b=false;var $=c.getControlDiv();r($);s($,e.level);a($,e.title);c.showLoadingStateText=e.title;c.showLoadingState=true;c.setEmptyBackground();c.showLoadingState=true;B.dispatcher.addMessageOverlay(c,c.showLoadingStateText,b,true);c.oldAfterRenderingForDispatching=c.oldAfterRenderingForDispatching||c.onAfterRendering;if(!i){p(e);}}function r($){_.forEach(L,function(b){$.removeClass("state-"+b);});}function s($,b){$.addClass("ghost");$.addClass("state-"+b);}function a($,m){var b=$.parent();b.find(".infoMessagePanel").remove();b.append(q("<div/>").addClass("infoMessagePanel").addClass("componentLoadingStateMessage").attr("title",m).text(m));b.find(".infoErrorIcon").remove();b.append(q("<div/>").addClass("infoErrorIcon").addClass("componentLoadingStateBox").addClass("zenLoadingStateOpacity75").addClass("componentLoadingStateBoxNoIcon"));}function p(e){var m=sap.zen.MessageViewHandler.error;if(e.level===I){m=sap.zen.MessageViewHandler.info;}else if(e.level===W){m=sap.zen.MessageViewHandler.warning;}if(e.description){sap.zen.MessageViewHandler.createMessage(m,e.title,e.description,true);}}return C;});
