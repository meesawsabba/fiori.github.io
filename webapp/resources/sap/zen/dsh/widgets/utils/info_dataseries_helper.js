/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler"],function(q,_){"use strict";var I=function(){this.getTemplateShapes=function(c,a){var d="Column";if(a.indexOf("horizontal")!==-1){d="Bar";}return{validValues:[{text:d,key:"bar"},{text:"Line",key:"line"}],defaultSingleValue:"line",dataByInitialView:{}};};this.setDefaultValues=function(m,d){var a=[];for(var i=0;i<m.length;i++){a[i]=[];if(i==0){a[i].push("bar");}else{a[i].push(d);}a[i].push(m[i].key);}return a;};this.getMeasureIndex=function(p,m){var i=-1;q.each(p,function(a,s){var b=s[1];if(m===b){i=a;}});return i;};};I.prototype.getPlotAreaMeasureShapes=function(f,p,c,a){var m=this.getTemplateShapes(c,a);if(p){m=q.extend(m,p);}var d={};if(!f){m.dataByInitialView={};m.dataByInitialView.errorMessage="There are no additional properties for the selected chart.";return m;}var b=f.getMeasuresArray();var e=[];if(m.data){for(var g=0;g<b.length;g++){var h=b[g].key;if(this.getMeasureIndex(m.data,h)!==-1){e.push(m.data[g]);}else{e.push([m.defaultSingleValue,b[g].key]);}}m.data=e;}else{e=this.setDefaultValues(b,m.defaultSingleValue);}m.defaultValues=this.setDefaultValues(b,m.defaultSingleValue);d.data={};for(var i=0;i<b.length;i++){d.data[b[i].text+"#KEY#"+b[i].key]=e[i];}m.dataByInitialView=d;return m;};I.prototype.getProperties=function(p,c,b){var s=[[],[]];var a=0;var d=sap.viz.api.metadata.Viz.get(c)?sap.viz.api.metadata.Viz.get(c).properties:{};if(!(d.plotArea&&d.plotArea.children.dataShape)){return s;}var e=sap.viz.api.metadata.Viz.get(c)?sap.viz.api.metadata.Viz.get(c).bindings:[];var m=q.grep(e,function(v){return v.type==="Measure";});var t=this;_.forEach(m,function(f){var n=f.id;var g=_.find(b,{"feed":n});_.forEach(g.source,function(h){var i=t.getMeasureIndex(p.data,h);if(i!==-1){var j=p.data[i];var k=j[0];s[a].push(k);}else{var l=(s[a].length===0)?"bar":"line";s[a].push(l);}});a=a+1;});return s;};return I;});
