/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/m/CheckBox","sap/ui/commons/CheckBox"],function(jQuery,_,BaseHandler,CheckBoxM,CheckBoxC){"use strict";var toInheritFrom=BaseHandler.dispatcher.isMainMode()?CheckBoxM:CheckBoxC;toInheritFrom.extend("sap.zen.ZenCheckbox",{metadata:{properties:{"key":"string"}},renderer:{}});var CheckboxGroupHandler=function(){BaseHandler.apply(this,arguments);var dispatcher=BaseHandler.dispatcher;var that=this;this.create=function(c,C){var i=C["id"];var v=new sap.ui.layout.VerticalLayout(i);init(v,C);return v;};this.update=function(l,c){if(c){init(l,c);}return l;};this.getSelectedCBSFromCBG=function(c){var C=c.getContent();var r=[];for(var i=0;i<C.length;i++){var I=C[i];if(I.getChecked()){r.push(I);}}return r;};function init(oVlayout,oControlProperties){var i,key;oVlayout.removeAllContent();if(!oVlayout.previousItems){oVlayout.previousItems=[];}var selectedItems=oControlProperties.selectedItems;if(selectedItems){var keys={};for(i=0;i<selectedItems.length;i++){key=dispatcher.getValue(selectedItems[i],"key");keys[key]=true;}}oVlayout.previousSelections=[];var items=oControlProperties.items;var fChange=function(oControlEvent){var keys="";var aCbs=that.getSelectedCBSFromCBG(oControlEvent.oSource.getParent());for(var j=0;j<aCbs.length;j++){keys+=aCbs[j].getKey();keys+="|SeP|";}var command=that.prepareCommand(oControlProperties.command,"__KEYS__",keys);eval(command);};for(i=0;i<items.length;i++){var item=items[i];key=item.item.key;var text=item.item.val_0;var oItem=that.createDefaultProxy(i);oItem.setEnabled(oControlProperties.enabled);oItem.setKey(key);if(text.length===0){text=key;}oItem.setText(text);oVlayout.addContent(oItem);oItem.attachChange(fChange);if(keys&&keys[key]){oItem.setChecked(keys[key]);}}}this.getDefaultProxyClass=function(){return["sap.zen.ZenCheckbox","sap.zen.ZenCheckbox"];};this.provideFunctionMapping=function(){return[["setSelected","setChecked"],["attachSelect","attachChange"],["getSelected","getChecked"]];};this.getType=function(){return"checkboxgroup";};this.getDecorator=function(){return"DataSourceFixedHeightDecorator";};};var instance=new CheckboxGroupHandler();BaseHandler.dispatcher.addHandlers(instance.getType(),instance);return instance;});
