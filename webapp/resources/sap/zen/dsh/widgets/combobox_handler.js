/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/m/ComboBox","sap/ui/core/Item"],function(jQuery,_,BaseHandler,ComboBox,Item){"use strict";var ComboBoxHandler=function(){BaseHandler.apply(this,arguments);var that=this;this.create=function(oChainedControl,oControlProperties){var oComboBox=new ComboBox(oControlProperties.id,{selectionChange:function(evtObject){var key=null;var oItem=evtObject.getParameter("selectedItem");if(oItem){key=oItem.getKey();key+="|SeP|";}if(key!==null){var command=that.prepareCommand(oControlProperties.command,"__KEYS__",key);eval(command);}},change:function(changeObj){var value=changeObj.mParameters.newValue;var command=that.prepareCommand(oControlProperties.enteredTextCommand,"__VALUE__",value);eval(command);}});if(oControlProperties&&oControlProperties.items){var i;var itemArray=oControlProperties.items;var selectionArray=oControlProperties.selectedItems;for(i=0;i<itemArray.length;i++){var item=new Item(oControlProperties.id+"_item_"+i,{text:itemArray[i].item.val_0===""?itemArray[i].item.key:itemArray[i].item.val_0,key:itemArray[i].item.key});oComboBox.addItem(item);}for(i=0;i<selectionArray.length;i++){if(oComboBox.getItemByKey(selectionArray[i].key._v)){oComboBox.setSelectedItem(oComboBox.getItemByKey(selectionArray[i].key._v));}}}return oComboBox;};this.update=function(c,C){if(C&&C.items){c.destroyItems();c.removeAllItems();c.removeAllAggregation();var i;var a=C.items;var s=C.selectedItems;for(i=0;i<a.length;i++){var b=new Item(C.id+"_item_"+i,{text:a[i].item.val_0,key:a[i].item.key});c.addItem(b);}for(i=0;i<s.length;i++){if(c.getItemByKey(s[i].key._v)){c.setSelectedItem(c.getItemByKey(s[i].key._v));}}}};this.getType=function(){return"combobox";};};var instance=new ComboBoxHandler();BaseHandler.dispatcher.addHandlers(instance.getType(),instance);return instance;});
