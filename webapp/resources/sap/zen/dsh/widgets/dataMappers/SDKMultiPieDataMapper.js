/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/dataMappers/SDKChartDataMapper"],function(q,_,B,S){"use strict";function a(){S.apply(this,arguments);var m=true;var d=1;this.getAnalysisAxisValue=function(){return this.analysisAxisValue;};this.setEmptyDimension=function(i,k,b){if(k=="COLUMNS"&&this._getColDimensionCounter()==0){var c={};c.name="";c.type="Dimension";c.values=[""];b.data.push(c);}else if(k=="ROWS"&&this._getRowDimensionCounter()==0){c={};c.name="";c.type="Dimension";c.values=[""];b.data.push(c);}};this.createAnalysisAxis=function(b,r,c,e,f){var g=[];if(this.getMeasureAxis()=="COLUMNS")f++;e++;var h=this.isMeasuresOnlyCheck(b);this.setDimensionsOnAxis(1,b,g,"COLUMNS",f,b.axis_columns,h);if((g.length!=0&&g[0].data[0]!=undefined&&g[0].data[0].values.length>1))d=g[0].data[0].values.length;this.setDimensionsOnAxis(2,b,g,"ROWS",e,b.axis_rows,h);if(this.getMeasureAxis()=="COLUMNS"&&b.dimensions[0].containsMeasures||(this.getMeasureAxis()=="ROWS"&&b.dimensions[f].containsMeasures)){m=false;if(g[0].data[0]!=undefined)d=g[0].data[0].values.length;else d=1;}return g;};this.createMeasureValues=function(b,c,e){var f=[];var g={};g.index=1;g.data=[];var h={};var n={};var i=this;q.each(c,function(j,k){var l=k.key;n[l]=k.text;var v=i.getValues(b.data,e,j,false,d,1,m,true);if(!h[l]){h[l]=v;}else{i.mergeValues(h[l],v,e);}});q.each(h,function(j,v){var k={};k.type="Measure";k.name=n[j];k.values=v;g.data.push(k);});f.push(g);return f;};this.getEmptyDimension=function(){var b={};b.name="";b.type="Dimension";b.values=[""];return b;};this.isMeasuresOnlyCheck=function(b){if(b.dimensions.length==1){if(b.dimensions[0].containsMeasures==true){return true;}}return false;};this.setDimensionsOnAxis=function(b,c,e,k,f,g,h,l){var n={};var o=[];n.index=b;n.data=[];var p=-1;var s=0;var t=-1;var u=this;q.each(g,function(i,y){if(t==-1||y[s]==t){q.each(y,function(j,z){if(z!=-1&&(!c.dimensions[j].containsMeasures||l)){if(t!=-1&&t)if(p==-1)p=j;if(o[j-p]==undefined)o[j-p]=[];var A=u.getDimensionLabel(c.dimensions[j].members[z]);o[j-p].push(A);}else if(c.dimensions[j].containsMeasures&&t==-1){s=j;t=z;}});}});for(var r=0;r<c.dimensions.length;r++){var v=c.dimensions[r];if((v.containsMeasures&&!l)||v.axis!=k){continue;}var w={};w.name=v.text;w.type="Dimension";w.values=o[r-p];n.data.push(w);}this.setEmptyDimension(b,k,n);if(n.data.length==0){var x=this.getEmptyDimension();n.data.push(x);}e.push(n);};}return a;});
