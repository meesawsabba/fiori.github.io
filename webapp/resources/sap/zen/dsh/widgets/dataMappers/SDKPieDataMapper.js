/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/dataMappers/SDKChartDataMapper"],function(q,_,B,S){"use strict";function a(){S.apply(this,arguments);this.measuresOnAxis=true;var m=true;this.setEmptyDimension=function(){};this.createAnalysisAxis=function(d,r,c,b,e){var f=[];this.iDimensionsOnRows=1;var g=this.getDataMapperHelper();if(this.getMeasureAxis()=="COLUMNS")e++;else b++;if(this.isMeasuresOnlyCheck(d)){if(this.getMeasureAxis()!="ROWS"){g.setMeasuresOnAxis(1,d,f);this.iDimensionsOnCols=d.axis_columns.length;}else{g.setMeasuresOnAxis(1,d,f);this.iDimensionsOnRows=this.iDimensionsOnCols=d.axis_rows.length;}}else if(b>=1&&e==0){this.setDimensionsOnAxis(1,d,f,"ROWS",b,d.axis_rows,false);this.iDimensionsOnRows=this.iDimensionsOnCols=this.getIDimensionOnCols(d,f,0);this.measuresOnAxis=false;this.isRowsOnly=true;}else if(b==0&&e>=1){this.setDimensionsOnAxis(1,d,f,"COLUMNS",e,d.axis_columns,false);this.iDimensionsOnRows=this.iDimensionsOnCols=this.getIDimensionOnCols(d,f,0);this.measuresOnAxis=false;}else{if(this.getMeasureAxis()!="ROWS"){this.setDimensionsOnAxis(1,d,f,"ROWS",b,d.axis_rows,true);}else{this.setDimensionsOnAxis(1,d,f,"COLUMNS",e,d.axis_columns,true);}this.isMultiArray=true;this.iDimensionsOnCols=this.getIDimensionOnCols(d,f,0);}if(this.getMeasureAxis()=="COLUMNS"&&d.dimensions[0].containsMeasures||(this.getMeasureAxis()=="ROWS"&&d.dimensions[e].containsMeasures)){m=false;this.isRowsOnly=false;}return f;};this.setDimensionsOnAxis=function(b,c,d,k,e,f,g){var h={};var l=[];h.index=b;h.data=[];var n=-1;var o=0;var p=-1;var s=this;q.each(f,function(i,w){if(p==-1||w[o]==p){q.each(w,function(j,x){if(x!=-1&&(!c.dimensions[j].containsMeasures||g)){if(p!=-1&&p)if(n==-1)n=j;if(l[j-n]==undefined)l[j-n]=[];var y=s.getDimensionLabel(c.dimensions[j].members[x]);l[j-n].push(y);}else if(c.dimensions[j].containsMeasures&&p==-1){o=j;p=x;}});}});for(var r=0;r<c.dimensions.length;r++){var t=c.dimensions[r];if((t.containsMeasures&&!g)||t.axis!=k){continue;}var u={};u.name=t.text;u.type="Dimension";u.values=l[r-n];h.data.push(u);}this.setEmptyDimension(b,k,h);if(h.data.length==0){var v=this.getEmptyDimension();h.data.push(v);}d.push(h);};this.getEmptyDimension=function(){var d={};d.name="";d.type="Dimension";d.values=[""];return d;};this.getIDimensionOnCols=function(d,b,t){var D=0;for(var i=0;i<d.dimensions.length;i++){var c=d.dimensions[i];if(c.containsMeasures==true){D=b[t].data[0].values.length;}}return D;};this.isMeasuresOnlyCheck=function(d){if(d.dimensions.length==1){if(d.dimensions[0].containsMeasures==true){return true;}}return false;};this.createMeasureValues=function(d,b,c){var e=[];var f={};f.index=1;f.data=[];var g=b[0];var h={};h.type="Measure";h.key=g.key;if(d.dimensions.length===1&&d.dimensions[0].containsMeasures){h.name="";}else{h.name=g.text;}h.values=this.getValues(d.data,c,0,this.measuresOnAxis,this.iDimensionsOnCols,this.iDimensionsOnRows,m,this.isMultiArray,this.isRowsOnly);f.data.push(h);e.push(f);return e;};}return a;});
