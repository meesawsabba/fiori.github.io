/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/dataMappers/SDKPieDataMapper","sap/zen/dsh/widgets/charts/ChartException"],function(q,_,B,S,C){"use strict";function a(){S.apply(this,arguments);this.setAnalysisAxisValue=function(v){var b=v.data().analysisAxis;for(var k in b){if(b[k].index==1){this.analysisAxisValue=b[k].data[0].values;}}};this.setEmptyDimension=function(i,k){if(k=="COLUMNS"&&this._getColDimensionCounter()==0){var d={};d.name="";d.type="Dimension";d.values=[""];}else if(k=="ROWS"&&this._getRowDimensionCounter()==0){d={};d.name="";d.type="Dimension";d.values=[""];}};this.createAnalysisAxis=function(d,r,c,b,e){var f=[];if(this.isMeasuresOnlyCheck(d)){if(this.getMeasureAxis()=="ROWS"){this.setDimensionsOnAxis(1,d,f,"ROWS",e,d.axis_rows,true);}else{this.setDimensionsOnAxis(1,d,f,"COLUMNS",b,d.axis_columns,true);}}else{if(this.getMeasureAxis()=="ROWS"){this.setDimensionsOnAxis(1,d,f,"COLUMNS",e,d.axis_columns);}else{this.setDimensionsOnAxis(1,d,f,"ROWS",b,d.axis_rows);}}this.iDimensionsOnCols=f[0].data[0].values.length;return f;};this.isMeasuresOnlyCheck=function(d){if(d.dimensions.length==1){if(d.dimensions[0].containsMeasures==true){return true;}}return false;};this.getAnalysisAxisValue=function(){return this.analysisAxisValue;};this.validateData=function(){var c=this._getColDimensionCounter();var r=this._getRowDimensionCounter();var m=this.getMeasureCounter();var b=this.getMeasureAxis();var s=this.getMessages().chart_mapping_error;var l=null;if(m>0&&r>=1&&c==0&&b=="ROWS"){l=this.getMessages().waterfall_datamapping_rmd;}else if(m>0&&r==0&&c>=1&&b=="COLUMNS"){l=this.getMessages().waterfall_datamapping_cmd;}else if(r>1&&b=="COLUMNS"){l=this.getMessages().waterfall_datamapping_rnd_cm;}else if(c>1&&b=="ROWS"){l=this.getMessages().waterfall_datamapping_rm_cnd;}else return;throw new C(s,l);};this.createMeasureValues=function(d,m,b){var c=[];var e={};e.index=1;e.data=[];var f=m[0];var g={};g.type="Measure";if(d.dimensions.length===1&&d.dimensions[0].containsMeasures){g.name="";}else{g.name=f.text;}g.values=this.getValues(d.data,b,0,true,this.iDimensionsOnCols,1,false,true);e.data.push(g);c.push(e);return c;};}return a;});
