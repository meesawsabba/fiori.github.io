/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/zen/dsh/widgets/component"],function(q,_,B,C){"use strict";var D=function(){C.apply(this,arguments);var t=this;this.init=function(){};this.beforeUpdate=function(){};this.afterUpdate=function(){};this.componentDeleted=function(){B.dispatcher.sdkDsDelete(this.oComponentProperties.id);};this.fetchData=function(){};this.metadata=function(){};var a={};this.filters=function(v){if(v===undefined){return a;}else{a=JSON.parse(v);this.fireUpdate(false);return this;}};this.bialGetData=function(m,s){if(m){s["(MEASURES_DIMENSION)"]=m;}var r=this.fetchData(s,{includeData:true,includeFormattedData:true,includeTuples:true});if(r&&r.data&&r.data.length===1){var b=r.tuples[0];var j={value:r.data[0],formattedValue:r.formattedData[0]};for(var i=0;i<b.length;i++){var d=r.dimensions[i];if(d.containsMeasures){j.unitOfMeasure=d.unitOfMeasure;j.scalingFactor=d.scalingFactor;}}return j;}return null;};this.updateDataInto=function(s,o,T){var d=this.fetchData(s,o);if(d){q.each(d,function(n,e){T[n]=e;});}else{for(var m in T){delete T[m];}}};this.getTargetParam=function(){return"TARGET_DATA_PROVIDER_REF";};this.fireUpdate=function(v){var i=this.oComponentProperties.id;var d=[];var b=B.dispatcher.sdkDsFindInstances(i);q.each(b,function(c,e){var f={"component":{"id":c,"content":{"control":{}}}};q.each(e,function(p,g){t.updateDataInto(g.selection,g.options,g.data);f.component.content.control[p]=g.data;});if(B.dispatcher.getRootControlForComponentId(c)){d.push(f);}else if(!B.dispatcher.isDispatching()){delete b[c];}});if(!B.dispatcher.isDispatching()){B.dispatcher.dispatchDelta(d);}if(v){this.firePropertiesChangedAndEvent(["metadata"],"ON_RESULTSETCHANGED");}};};D.subclass=C.makeSubClass(D);return D;});
