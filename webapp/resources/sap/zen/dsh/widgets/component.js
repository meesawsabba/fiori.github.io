/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/dsh/utils/request","sap/zen/dsh/utils/BaseHandler"],function(q,L,R){"use strict";var C=function(p){this.owner=p;this.init=function(){};this.componentDeleted=function(){};this.beforeUpdate=function(){};this.afterUpdate=function(){};var I=false;this.updateProperty=function(P,a){var g=this[P];if(g){var n=a[P];g.call(this,n);}};this.dispatchProperties=function(o,a){this.beforeUpdate();I=true;var P;if(o){for(P in o){this.oControlProperties[P]=o[P];this.updateProperty(P,o);}}this.oComponentProperties=a;for(P in a){this.updateProperty(P,a);}I=false;this.afterUpdate();};this.fireEvent=function(n){if(!I){if(typeof(sap.zen.dsh.DSH_deployment)=="undefined"){var e=[["EVENT_NAME",n,0],["BI_COMMAND_TYPE","",0],["COMPONENT_NAME",this.oComponentProperties.id,0],["COMMAND_INTERPRETER","BIAL",0]];R.zenSendCommandArrayWoEventWZenPVT(e);}else{var i=this.oComponentProperties.id;var b="Buddha";if(this.oControlProperties.pureId){b=this.oControlProperties.buddhaId;i=this.oControlProperties.pureId;}var s=i+".runScript\x28\x27"+n+"\x27\x29\x3b";sap.zen.dsh.putInQueue(function(){sap.zen.dsh[b].exec(s);});}}};this.getTargetParam=function(){return"TARGET_ITEM_REF";};function c(n){var a=new sap.zen.dsh.sapbi_Command("UPDATE_PROPERTIES");a.addParameter(new sap.zen.dsh.sapbi_Parameter(this.getTargetParam(),this.oComponentProperties.id));var b=new sap.zen.dsh.sapbi_Parameter("CHANGES","");var d=new sap.zen.dsh.sapbi_ParameterList();for(var i=0;i<n.length;i++){var e=n[i];var v=this[e]();if(Array.isArray(v)||(typeof v=="object")){v=JSON.stringify(v);}d.addParameter(new sap.zen.dsh.sapbi_Parameter(e,v));}b.setChildList(d);a.addParameter(b);return a;}this.firePropertiesChanged=function(n){if(!I){if(typeof(sap.zen.dsh.DSH_deployment)=="undefined"){var a=c.call(this,n);R.zenSendCommandArrayWoEventWZenPVT(a,false,true);}else{var t=[];for(var i=0;i<n.length;i++){var b=n[i];var v=this[b]();t.push(b);t.push(v);}var d=this.oComponentProperties.id;var e="Buddha";if(this.oControlProperties.pureId){e=this.oControlProperties.buddhaId;d=this.oControlProperties.pureId;}sap.zen.dsh.putInQueue(function(){sap.zen.dsh[e].exec(d+".doSDKPVT("+JSON.stringify(t)+");");});}}};this.firePropertiesChangedAndEvent=function(n,e,N){if(!I){if(typeof(sap.zen.dsh.DSH_deployment)=="undefined"){var a=c.call(this,n);if(N){a.addParameter(new sap.zen.dsh.sapbi_Parameter("PREVENT_UNDO","X"));}var s=new sap.zen.dsh.sapbi_CommandSequence();s.addCommand(a);var b=[["EVENT_NAME",e,0],["BI_COMMAND_TYPE","",0],["COMPONENT_NAME",this.oComponentProperties.id,0],["COMMAND_INTERPRETER","BIAL",0]];var d=sap.zen.dsh.sapbi_createParameterList(b);if(N){d.addParameter(new sap.zen.dsh.sapbi_Parameter("PREVENT_UNDO","X"));}s.addCommand(d);R.zenSendCommandArrayWoEventWZenPVT(s,false,true);}else{this.firePropertiesChanged(n);this.fireEvent(e);}}};this.$=function(){return this.owner.$();};this.ztlCallFunction=function(v){if(v===undefined){return this._ztlFunction;}else{this._ztlFunction=v;return this;}};this.ztlCallPayload=function(v){if(v===undefined){return this._ztlPayload;}else{this._ztlPayload=v;return this;}};this.ztlCallResult=function(v){if(v!==undefined&&this._ztlCallCallback){this._ztlCallCallback.call(this,JSON.parse(v));return this;}};this.callZTLFunction=function(n,f){var a=Array.prototype.slice.apply(arguments);a=a.slice(2);this.ztlCallPayload(JSON.stringify(a)).ztlCallFunction(n);this._ztlCallCallback=f;this.firePropertiesChangedAndEvent(["ztlCallPayload","ztlCallFunction"],"onZtlCall");};this.callZTLFunctionNoUndo=function(n,f){var a=Array.prototype.slice.apply(arguments);a=a.slice(2);this.ztlCallPayload(JSON.stringify(a)).ztlCallFunction(n);this._ztlCallCallback=f;this.firePropertiesChangedAndEvent(["ztlCallPayload","ztlCallFunction"],"onZtlCall",true);};};C.makeSubClass=function(c){function s(n,f){var p=n.split(".");var l=window;for(var i=0;i<p.length-1;i++){var P=p[i];var a=l[P]||{};l[P]=a;l=a;}var F=p[i];var b=function(){c.apply(this,arguments);f.apply(this,arguments);};l[F]=b;return b;}return s;};C.subclass=C.makeSubClass(C);return C;});
