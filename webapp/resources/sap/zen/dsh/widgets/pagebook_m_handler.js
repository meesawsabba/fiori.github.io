/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler"],function(jQuery,_,BaseHandler){"use strict";var dispatcher=BaseHandler.dispatcher;var PagebookHandler=function(){BaseHandler.apply(this,arguments);var that=this;this.create=function(oChainedControl,oControlProperties){var id=oControlProperties.id;var oPagebook=new sap.m.Carousel(id);init(oPagebook,oControlProperties);if(sap.zen.designmode){oPagebook.addStyleClass("zenborder");}if(oControlProperties.command){oPagebook.attachPageChanged(function(e){var newId=e.getParameters().newActivePageId;var aPages=this.getPages();var iIndex=0;for(var i=0;i<aPages.length;i++){if(aPages[i].sId===newId){iIndex=i;break;}}var command=that.prepareCommand(oControlProperties.command,"__KEY__",iIndex);eval(command);});}return oPagebook;};this.update=function(c,C){init(c,C);return c;};function init(p,c){if(c){p.setShowPageIndicator(!!c.showpageindicator);var C=c.content;if(C){that.updateChildren(C,p,function(P,i){p.insertPage(P,i);},function(P){p.removePage(P);});}p.setActivePage(p.getPages()[c.selectedpageindex]);}}this.applyForChildren=function(p,f){var c=p.getPages();for(var i=0;i<c.length;i++){var C=c[i];if(C){f(C);}}};this.getType=function(){return"pagebook";};this.getDecorator=function(){return"GroupDecorator";};};var PageHandler=function(){"use strict";BaseHandler.apply(this,arguments);var d=BaseHandler.dispatcher;var t=this;this.create=function(c,C){var b=C["id"];var o=this.createAbsoluteLayout(b);a(o,C);return o;};this.update=function(c,C){a(c,C);};function a(c,C){if(C){var A=c;var b=C.content;if(b){t.updateChildren(b,c,function(n,i,e){if(e){var f=d.createAbsoluteLayoutInfo(e);var w=d.calcWidthUseOrderOfPriority(f.left,f.right,e.width);var h=d.calcHeightUseOrderOfPriority(f.top,f.bottom,e.height);d.setWidthHeight(n,w,h);}d.insertIntoAbsoluteLayoutContainer(A,n,i);},function(o){A.removeContent(o);});c.zenPageUpdated=true;}}}this.applyForChildren=function(p,f){var c=p.getContent();for(var i=0;i<c.length;i++){var C=c[i];if(C){f(C);}}};};var PagebookHandlerInstance=new PagebookHandler();var PageHandlerInstance=new PageHandler();var PageDecorator=function(d,p){this.iRelativeLevel=1;sap.zen.designmode.Decorator.apply(this,arguments);sap.zen.designmode.GroupDecorator.apply(this,arguments);sap.zen.designmode.ContainerDecorator.apply(this,arguments);this._debugInfo="PageDecorator";this.showAdorner=function(){if(d.decoratorMultiSelectLength()>1){return this.jqDecorator;}var a=p.getParent();a.setActivePage(this.getPhxControl());};this.updateAdornerVisualisation=function(){this.showAdorner();};var s=this.visible;this.visible=function(S){var a=p.getParent();s.call(this,S&&(a.getActivePage()===this.getPhxControl().sId));};};dispatcher.addHandlers("page",PageHandlerInstance,PageDecorator);return PagebookHandlerInstance;});
