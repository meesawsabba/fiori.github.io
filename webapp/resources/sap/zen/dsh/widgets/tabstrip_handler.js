/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/zen/commons/thirdparty/lodash","sap/zen/dsh/utils/BaseHandler","sap/m/IconTabBar"],function(jQuery,_,BaseHandler,IconTabBar){"use strict";var TabStripHandler=function(){BaseHandler.apply(this,arguments);var that=this;this.update=function(c,C){if(C){init(c,C);}return c;};var wrapFunctions=function(c){if(BaseHandler.dispatcher.isMainMode()){c.getSelectedIndex=function(){var I=this.getItems();for(var i=0;i<I.length;i++){if(I[i].getId()===this.getSelectedKey()){return i;}}return 0;};c.setSelectedIndex=function(t){var i=this.getItems();this.setSelectedKey(i[t].getId());};}};this.createAndAdd=function(c,C,o,a,i){var b=C["id"];var d=this.createDefaultProxy(b);wrapFunctions(d);if(BaseHandler.dispatcher.isMainMode()){d.setExpandable(false);}d.orgOnAfterRendering=d.onAfterRendering;d.onAfterRendering=setTabStyles;a(d,i,o);init(d,C);BaseHandler.dispatcher.updateComponentProperties(d,o,a);return d;};function setTabStyles(){var t=this,d;if(this.orgOnAfterRendering){this.orgOnAfterRendering();}var j=t.$();if(t.tablocation==="TOP"){d=jQuery("div.sapUiTabBar:first",j);d.removeClass("sapUiTabBarHidden");d.removeClass("sapUiTabBarBottom");d.addClass("sapUiTabBar");d=jQuery("div.sapUiTabPanel:first",j);d.removeClass("sapUiTabPanelHidden");d.removeClass("sapUiTabPanelBottom");d.addClass("sapUiTabPanel");}else if(t.tablocation==="BOTTOM"){d=jQuery("div.sapUiTabBar:first",j);d.removeClass("sapUiTabBar");d.removeClass("sapUiTabBarHidden");d.addClass("sapUiTabBarBottom");d=jQuery("div.sapUiTabPanel:first",j);d.removeClass("sapUiTabPanel");d.removeClass("sapUiTabPanelHidden");d.addClass("sapUiTabPanelBottom");}else if(t.tablocation==="HIDDEN"){var D=j;D.css("border-style","none");d=D.find("div.sapUiTabBar:first");d.removeClass("sapUiTabBar");d.removeClass("sapUiTabBarBottom");d.addClass("sapUiTabBarHidden");d=jQuery("div.sapUiTabPanel:first",j);d.removeClass("sapUiTabPanel");d.removeClass("sapUiTabPanelBottom");d.addClass("sapUiTabPanelHidden");}}function init(oTabStrip,oControlProperties){if(oControlProperties){var aChildren=oControlProperties.content;if(aChildren){that.updateChildren(aChildren,oTabStrip,function(t,i){oTabStrip.insertTab(t,i);},function(t){oTabStrip.removeTab(t);});}if(oTabStrip.zenfs){oTabStrip.detachSelect(oTabStrip.zenfs);}var selectedtabindex=oControlProperties.selectedtabindex;if(selectedtabindex!=null&&oTabStrip.getSelectedIndex()!==selectedtabindex){oTabStrip.setSelectedIndex(selectedtabindex);}if(oControlProperties.command){var f=function(){var index=this.getSelectedIndex();if(index!==selectedtabindex){var command=that.prepareCommand(oControlProperties.command,"__KEY__",index);eval(command);}};oTabStrip.zenfs=f;oTabStrip.attachSelect(f);}}oTabStrip.tablocation=oControlProperties.tablocation;}this.applyForChildren=function(t,f){var a=t.getTabs();for(var i=0;i<a.length;i++){var T=a[i];f(T);}};this.getDefaultProxyClass=function(){return["sap.zen.ZenIconTabBar","sap.ui.commons.TabStrip"];};this.provideFunctionMapping=function(){return[["getItems","getTabs"],["insertItem","insertTab"],["removeItem","removeTab"]];};this.getDecorator=function(){return"TabStripDecorator";};this.getType=function(){return"tabstrip";};};var instance=new TabStripHandler();BaseHandler.dispatcher.addHandlers(instance.getType(),instance);sap.zen.TabHandler=function(){BaseHandler.apply(this,arguments);var t=this;this.createAndAdd=function(c,C,o,A,b){var d=this.createDefaultProxy();if(sap.zen.designmode){d.setEnabled=function(E){d.designmodeEnabled=E;if(E){this.$().removeClass("sapUiTabDsbl");}else{this.$().addClass("sapUiTabDsbl");}};d.getEnabled=function(){return true;};}if(BaseHandler.dispatcher.isMainMode()){d.setText(C.caption);}else{var T=new sap.ui.commons.Title();T.setText(C.caption);d.setTitle(T);}d.setEnabled(C.enabled);var e=this.createAbsoluteLayout();A(d,b);d.addContent(e);a(d,C);return d;};this.updateComponent=function(c,C){if(C){a(c,C);}return c;};function a(c,C){if(C){var o;var A=c.getContent()[0];var b=C.caption;if(BaseHandler.dispatcher.isMainMode()){if(b!=null){o=c.getText();if(o!==b){c.setText(b);}}}else{var T=c.getTitle();if(b!=null){o=T.getText();if(o!==b){T.setText(b);}}}var e=C.enabled;if(e!=null){var d=c.getEnabled();if(sap.zen.designmode||d!==e){c.setEnabled(e);}}var f=C.content;if(f){t.updateChildren(f,c,function(n,i,g){if(g){var h=BaseHandler.dispatcher.createAbsoluteLayoutInfo(g);var w=BaseHandler.dispatcher.calcWidthUseOrderOfPriority(h.left,h.right,g.width);var j=BaseHandler.dispatcher.calcHeightUseOrderOfPriority(h.top,h.bottom,g.height);BaseHandler.dispatcher.setWidthHeight(n,w,j);}BaseHandler.dispatcher.insertIntoAbsoluteLayoutContainer(A,n,i);},function(g){A.removeContent(g);});}}}this.applyForChildren=function(T,f){var b=T.getContent()[0];var c=b.getContent();for(var i=0;i<c.length;i++){var C=c[i];if(C){f(C);}}};this.getDefaultProxyClass=function(){return["sap.m.IconTabFilter","sap.ui.commons.Tab"];};this.getType=function(){return"tab";};};instance=new sap.zen.TabHandler();BaseHandler.dispatcher.addHandlers(instance.getType(),instance,"TabDecorator");if(BaseHandler.dispatcher.isMainMode()){IconTabBar.extend("sap.zen.ZenIconTabBar",{metadata:{properties:{width:"sap.ui.core.CSSSize",height:"sap.ui.core.CSSSize"}},renderer:{},getStretchContentHeight:function(){return true;},onAfterRendering:function(e){if(IconTabBar.prototype.onAfterRendering){IconTabBar.prototype.onAfterRendering.apply(this,[e]);}var h=this.getHeight();var j=this.$();if(h!=="auto"){j.height(h);}var w=this.getWidth();if(w!=="auto"){j.width(w);}j.css("position","relative");}});}});
