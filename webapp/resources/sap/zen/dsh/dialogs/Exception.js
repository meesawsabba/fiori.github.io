/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/dialogs/Exception",["sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/zen/dsh/utils/ResourceModel","sap/zen/dsh/utils/ResourceBundle","sap/zen/commons/thirdparty/lodash"],function(F,J,R,b,_){"use strict";var r,f;function h(a,c){r=a;f=c;}var d;var D;function g(c){return c.runAsOwner(function(){return Promise.resolve(F.load({name:"sap.zen.dsh.fragment.ExceptionDialog",controller:{onOk:function(){var o=d.getModel("om");var a=o.getDataProvider(D);d.close();Promise.resolve(null).then(function(){return a.addException(d.getModel("Exception").getData());}).then(function(){return r(true);}).catch(function(e){f(e);});},onCancel:function(){d.close();return r(false);}}}).then(function(o){d=o;o.setModel(new J(),"Exception");o.setModel(R,"i18n");var O=o.open;o.open=function(e,s){D=s;var C=o.getModel("Exception");var a=_.filter(e.getDataProvider(D).Dimensions,function(i){return i.IsStructure;});o.setModel(e,"om");C.setData({alertLevel:1,measure1:a[0]?_.map(a[0].Members)[0].Name:"",measure2:a[1]?_.map(a[1].Members)[1].Name:"",measure1d:a[0]?_.map(a[0].Members)[0].Name:"",measure2d:a[1]?_.map(a[1].Members)[1].Name:"",Structure1:a[0]?a[0].Description:null,Structure1Key:a[0]?a[0].Name:null,Structure2Key:a[1]?a[1].Name:null,Structure2:a[1]?a[1].Description:null,Value:0,Members1:_.map(a[0]?a[0].Members:[],function(m,k){return{Name:k,Description:m.Description};}),Members2:_.map(a[1]?a[1].Members:[],function(m,k){return{Name:k,Description:m.Description};}),operator:"GREATER_THAN",Description:b.getText("EXC_DESCR",[_.map(e.getProperty("/dataProvider/0/Exceptions")||[]).length+1])});O.call(o);return new Promise(h);};return o;}));});}return g;});
