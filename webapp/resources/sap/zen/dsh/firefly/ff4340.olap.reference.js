/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff4310.olap.impl"],function(f){"use strict";f.BindingUtils={getBindingSoureList:function(v,a){var c=v.getStructureByKey(f.VizDefConstants.K_CHART).getListByKey(f.VizDefConstants.K_BINDINGS);var b=f.XListOfString.create();for(var i=0;i<c.size();++i){var d=c.getStructureAt(i);if(f.XString.isEqual(d.getStringByKey(f.VizDefConstants.K_FEED),a)){var s=d.getListByKey(f.VizDefConstants.K_SOURCE);for(var j=0;j<s.size();++j){b.add(s.getStructureAt(j).getStringByKey(f.VizDefConstants.K_ID));}}}return b;}};f.ChartRendererFactoryImpl=function(){};f.ChartRendererFactoryImpl.prototype=new f.XObject();f.ChartRendererFactoryImpl.prototype._ff_c="ChartRendererFactoryImpl";f.ChartRendererFactoryImpl.create=function(){return new f.ChartRendererFactoryImpl();};f.ChartRendererFactoryImpl.prototype.newRenderer=function(p){if(p.isTypeOf(f.ProtocolBindingType.GOOGLE_CHART_PROTOCOL)){return f.RsGoogleChartRenderer.create();}if(p.isTypeOf(f.ProtocolBindingType.VIZ_FRAME_PROTOCOL)){return f.RsVizFrameRenderer.create();}if(p.isTypeOf(f.ProtocolBindingType.MICRO_CHART_PROTOCOL)){return f.RsMicroChartRenderer.create();}return f.RsHiChartRenderer.create();};f.RsHiChartRenderer=function(){};f.RsHiChartRenderer.prototype=new f.XObject();f.RsHiChartRenderer.prototype._ff_c="RsHiChartRenderer";f.RsHiChartRenderer.create=function(){return new f.RsHiChartRenderer();};f.RsHiChartRenderer.getDoubleValueExtended=function(s,n,d){var r=d;var a=s.getStringByKeyExt(n,"0");if(s.getElementTypeByKey(n).isNumber()){r=s.getByKey(n).asNumber().getDouble();}else if(f.notNull(a)&&f.XString.containsString(a,"E")){var b=f.XDouble.convertFromString(f.XString.substring(a,0,f.XString.indexOf(a,"E")));var e=f.XInteger.convertFromString(f.XString.substring(a,f.XString.indexOf(a,"E"),f.XString.size(a)));r=b*f.XMath.pow(10,e);}else if(f.notNull(a)){try{r=f.XDouble.convertFromString(a);}catch(t){r=d;}}return r;};f.RsHiChartRenderer.prototype.render=function(t,r){if(f.notNull(r)){var h=f.RsHiChartRenderHelper.create(t,r);return h.getChartData();}return null;};f.RsHiChartUtils={create:function(){return new f.RsHiChartUtils();},axisPloter:function(v,a,C,d){var i=true;var b=d;var c=false;var e="#FFFFFF";var g=v.getStructureByKey(f.VizDefConstants.K_AXIS_LINE);if(v.getElementTypeByKey(f.VizDefConstants.K_VISIBLE)===f.PrElementType.BOOLEAN){b=v.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,d);}var h=v.getStructureByKey(f.VizDefConstants.K_AXIS_TICK);if(f.notNull(g)){if(g.containsKey(f.VizDefConstants.K_SIZE)){var j=g.getIntegerByKeyExt(f.VizDefConstants.K_SIZE,0);a.putInteger(f.VizDefConstants.K_LINE_WIDTH,j);}i=g.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,true);}if(f.notNull(h)){c=h.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,false);}var k=v.getBooleanByKeyExt(f.VizDefConstants.K_SHOW_LABEL_GRIDS,true);if(!f.XString.isEqual(f.VizDefConstants.K_HEATMAP,C)&&v.hasStringByKey(f.VizDefConstants.K_COLOR)&&i){e=v.getStringByKeyExt(f.VizDefConstants.K_COLOR,"#FFFFFF");}a.putString(f.VizDefConstants.K_LINE_COLOR,e);var l=v.getStructureByKey(f.VizDefConstants.K_LABEL);if(f.notNull(l)){var m=l.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(m)){var n=m.getStringByKey(f.VizDefConstants.K_COLOR);var o=m.getStringByKey(f.VizDefConstants.K_FONT_FAMILY);var p=m.getStringByKey(f.VizDefConstants.K_FONT_SIZE);var x=a.putNewStructure(f.VizDefConstants.K_LABELS);if(k){x.putInteger(f.VizDefConstants.K_X,-5);var q=x.putNewStructure(f.VizDefConstants.K_STYLE);q.putString(f.VizDefConstants.K_FONT_SIZE,p);q.putString(f.VizDefConstants.K_FILL,n);if(f.XString.isEqual(C,f.VizDefConstants.V_CHART_TYPE_BOXPLOT)){q.putString(f.VizDefConstants.K_COLOR,n);}q.putString(f.VizDefConstants.K_FONT_FAMILY,o);}x.putBoolean(f.VizDefConstants.K_ENABLED,b);}}if(!c){a.putInteger(f.VizDefConstants.K_GRIDLINE_WIDTH,0);a.putString(f.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");a.putInteger(f.VizDefConstants.K_TICK_WIDTH,0);}return a;},responsiveBuilder:function(c,t){var r=t.putNewStructure(f.VizDefConstants.K_RESPONSIVE);var a=r.putNewList(f.VizDefConstants.K_RULES);var b=a.addNewStructure();var d=b.putNewStructure(f.VizDefConstants.K_CONDITION);d.putInteger(f.VizDefConstants.K_MAX_HEIGHT,176);var e=b.putNewStructure(f.VizDefConstants.K_CHART_OPTIONS);var g=e.putNewStructure(f.VizDefConstants.K_LEGEND);g.putBoolean(f.VizDefConstants.K_ENABLED,false);var h=e.putNewStructure(f.VizDefConstants.K_Y_AXIS);var i=h.putNewStructure(f.VizDefConstants.K_LABELS);i.putInteger(f.VizDefConstants.K_ROTATION,344);i.putInteger(f.VizDefConstants.K_X,10);var j=a.addNewStructure();var k=j.putNewStructure(f.VizDefConstants.K_CONDITION);k.putInteger(f.VizDefConstants.K_MAX_WIDTH,359);k.putInteger(f.VizDefConstants.K_MIN_HEIGHT,70);var l=j.putNewStructure(f.VizDefConstants.K_CHART_OPTIONS);var m=l.putNewStructure(f.VizDefConstants.K_CHART);m.putBoolean(f.VizDefConstants.K_ANIMATION,false);var n=l.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var o=n.putNewStructure(f.VizDefConstants.K_SERIES);var p=o.putNewStructure(f.VizDefConstants.K_DATA_LABELS);var q=p.putNewStructure(f.VizDefConstants.K_STYLE);if(f.XString.isEqual(c,f.VizDefConstants.K_PIE)){q.putString(f.VizDefConstants.K_FONT_SIZE,"9px");p.putInteger(f.VizDefConstants.K_CONNECTOR_WIDTH,0);p.putInteger(f.VizDefConstants.K_DISTANCE,-30);p.putBoolean(f.VizDefConstants.K_INSIDE,true);m.putInteger(f.VizDefConstants.K_MARGIN_TOP,40);}else{m.putInteger(f.VizDefConstants.K_MARGIN_TOP,50);q.putString(f.VizDefConstants.K_FONT_SIZE,"9px");}var s=l.putNewStructure(f.VizDefConstants.K_TITLE);var u=s.putNewStructure(f.VizDefConstants.K_STYLE);u.putString(f.VizDefConstants.K_FONT_SIZE,"13px");u.putBoolean(f.VizDefConstants.K_FLOATING,true);var v=l.putNewStructure(f.VizDefConstants.K_SUBTITLE);v.putString(f.VizDefConstants.K_TEXT,"");var w=l.putNewStructure(f.VizDefConstants.K_X_AXIS);var x=w.putNewStructure(f.VizDefConstants.K_LABELS);var y=x.putNewStructure(f.VizDefConstants.K_STYLE);y.putString(f.VizDefConstants.K_FONT_SIZE,"10px");var z=l.putNewStructure(f.VizDefConstants.K_Y_AXIS);var A=z.putNewStructure(f.VizDefConstants.K_LABELS);var B=A.putNewStructure(f.VizDefConstants.K_STYLE);B.putString(f.VizDefConstants.K_FONT_SIZE,"10px");var C=a.addNewStructure();var D=C.putNewStructure(f.VizDefConstants.K_CONDITION);D.putInteger(f.VizDefConstants.K_MAX_WIDTH,176);var E=C.putNewStructure(f.VizDefConstants.K_CHART_OPTIONS);var F=E.putNewStructure(f.VizDefConstants.K_CHART);F.putBoolean(f.VizDefConstants.K_ANIMATION,false);var G=E.putNewStructure(f.VizDefConstants.K_LEGEND);G.putBoolean(f.VizDefConstants.K_ENABLED,false);G.putInteger(f.VizDefConstants.K_Y,25);var H=E.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var I=H.putNewStructure(f.VizDefConstants.K_SERIES);I.putInteger(f.VizDefConstants.K_MIN_SIZE,100);var J=I.putNewStructure(f.VizDefConstants.K_DATA_LABELS);J.putInteger(f.VizDefConstants.K_CONNECTOR_WIDTH,0);J.putInteger(f.VizDefConstants.K_DISTANCE,-25);var K=J.putNewStructure(f.VizDefConstants.K_STYLE);K.putString(f.VizDefConstants.K_FONT_SIZE,"8px");F.putInteger(f.VizDefConstants.K_MARGIN_TOP,40);var L=E.putNewStructure(f.VizDefConstants.K_TITLE);var M=L.putNewStructure(f.VizDefConstants.K_STYLE);M.putString(f.VizDefConstants.K_FONT_SIZE,"10px");var N=E.putNewStructure(f.VizDefConstants.K_SUBTITLE);N.putString(f.VizDefConstants.K_TEXT,"");var O=E.putNewStructure(f.VizDefConstants.K_X_AXIS);var P=O.putNewStructure(f.VizDefConstants.K_LABELS);var Q=P.putNewStructure(f.VizDefConstants.K_STYLE);Q.putString(f.VizDefConstants.K_FONT_SIZE,"9px");var R=E.putNewStructure(f.VizDefConstants.K_Y_AXIS);var S=R.putNewStructure(f.VizDefConstants.K_LABELS);var T=S.putNewStructure(f.VizDefConstants.K_STYLE);T.putString(f.VizDefConstants.K_FONT_SIZE,"9px");}};f.RsGoogleChartConfig={s_charts:null,staticSetup:function(){if(f.isNull(f.RsGoogleChartConfig.s_charts)){f.RsGoogleChartConfig.s_charts=f.XSimpleMap.create();f.RsGoogleChartConfig.s_charts.put(f.SemanticBindingType.BAR,f.GoogleChartBar.create());f.RsGoogleChartConfig.s_charts.put(f.SemanticBindingType.COLUMN,f.GoogleChartColumn.create());f.RsGoogleChartConfig.s_charts.put(f.SemanticBindingType.LINE,f.GoogleChartLine.create());}},createOptions:function(v){var c=f.RsGoogleChartConfig.s_charts.getByKey(f.RsGoogleChartConfig.getChartType(v));if(f.notNull(c)){return c.createOptions(v);}return f.PrFactory.createStructure();},createMetadata:function(v,c){var a=f.RsGoogleChartConfig.s_charts.getByKey(f.RsGoogleChartConfig.getChartType(v));if(f.notNull(a)){return a.createMetadata(c);}return f.PrFactory.createStructure();},getChartType:function(v){var a=v.getStructureByKey(f.VizDefConstants.K_CHART);var t=a.getStringByKey(f.VizDefConstants.K_TYPE);if(f.XString.isEqual(t,f.VizDefConstants.V_CHART_TYPE_BAR)||f.XString.isEqual(t,f.VizDefConstants.V_STACKED_BAR)){return f.SemanticBindingType.BAR;}if(f.XString.isEqual(t,f.VizDefConstants.V_CHART_TYPE_COLUMN)||f.XString.isEqual(t,f.VizDefConstants.V_STACKED_COLUMN)){return f.SemanticBindingType.COLUMN;}if(f.XString.isEqual(t,f.VizDefConstants.V_TYPE_BARCOLUMN)){var p=a.getStructureByKey(f.VizDefConstants.K_PROPERTIES);var b=p.getStructureByKey(f.VizDefConstants.K_GENERAL);if(f.notNull(b)&&b.getBooleanByKeyExt(f.VizDefConstants.K_INVERTED,false)){return f.SemanticBindingType.BAR;}return f.SemanticBindingType.COLUMN;}if(f.XString.isEqual(t,f.VizDefConstants.K_LINE)){return f.SemanticBindingType.LINE;}return null;}};f.RsGoogleChartRenderer=function(){};f.RsGoogleChartRenderer.prototype=new f.XObject();f.RsGoogleChartRenderer.prototype._ff_c="RsGoogleChartRenderer";f.RsGoogleChartRenderer.create=function(){return new f.RsGoogleChartRenderer();};f.RsGoogleChartRenderer.prototype.render=function(t,r){var s=f.PrFactory.createStructure();var v=r.getQueryModel().getVizManager().getVizDef();if(f.notNull(v)&&v.containsKey(f.VizDefConstants.K_CHART)&&r.getAvailableDataCellCount()>0){var a=r.getCursorRowsAxis();var c=r.getCursorColumnsAxis();var d=s.putNewStructure(f.GoogleConstants.K_DATA);var b=d.putNewList(f.GoogleConstants.K_COLS);var e=d.putNewList(f.GoogleConstants.K_ROWS);this.addHeaderForDimensionColumns(a,b);this.addHeaderForMeasureColumns(c,b);this.addRows(a,e,r);s.put(f.GoogleConstants.K_OPTIONS,f.RsGoogleChartConfig.createOptions(v));s.put(f.GoogleConstants.K_METADATA,f.RsGoogleChartConfig.createMetadata(v,b));}return s;};f.RsGoogleChartRenderer.prototype.addHeaderForDimensionColumns=function(r,c){r.setTupleCursorBeforeStart();r.nextTuple();for(var i=0;i<r.getTupleElementsCount();i++){r.nextTupleElement();r.nextFieldValue();var d=r.getField().getDimension();this.addHeader(c,d.getText(),f.GoogleConstants.V_TYPE_STRING);}};f.RsGoogleChartRenderer.prototype.addHeaderForMeasureColumns=function(c,a){c.setTupleCursorBeforeStart();while(c.hasNextTuple()){c.nextTuple();var h=f.XStringBuffer.create();while(c.hasNextTupleElement()){c.nextTupleElement();if(h.length()>0){h.append("/");}h.append(this.getMemberName(c));}this.addHeader(a,h.toString(),f.GoogleConstants.V_TYPE_NUMBER);}};f.RsGoogleChartRenderer.prototype.addHeader=function(c,l,t){var a=c.addNewStructure();a.putString(f.GoogleConstants.K_TYPE,t);a.putString(f.GoogleConstants.K_LABEL,l);};f.RsGoogleChartRenderer.prototype.addRows=function(r,a,b){var t=r.getTuplesCount();r.setTupleCursorBeforeStart();for(var c=0;c<t;c++){r.nextTuple();if(!this.isResultRow(r)){var d=a.addNewStructure();var l=d.putNewList(f.GoogleConstants.K_C);while(r.hasNextTupleElement()){r.nextTupleElement();this.addRowCell(l,f.XStringValue.create(this.getMemberName(r)));}for(var e=0;e<b.getDataColumns();e++){var g=b.getDataCell(e,c);this.addRowCell(l,this.getCellValue(g));}}}};f.RsGoogleChartRenderer.prototype.isResultRow=function(r){if(r.hasNextTupleElement()){r.nextTupleElement();if(r.getDimensionMemberType()===f.MemberType.RESULT){return true;}r.setTupleElementCursorBeforeStart();}return false;};f.RsGoogleChartRenderer.prototype.getMemberName=function(a){var m=null;while(a.hasNextFieldValue()){var b=a.nextFieldValue();if(f.isNull(m)||f.PresentationType.isTextPresentation(b.getField().getPresentationType())){m=b.getValue().getStringRepresentation();}}return m;};f.RsGoogleChartRenderer.prototype.getCellValue=function(d){var v=d.getValueException();if(v===f.ValueException.NULL_VALUE||v===f.ValueException.UNDEFINED){return f.XStringValue.create(null);}if(v===f.ValueException.ZERO){return f.XIntegerValue.create(0);}return d.getXValue();};f.RsGoogleChartRenderer.prototype.addRowCell=function(l,v){var s=l.addNewStructure();var a=v.getValueType();if(a===f.XValueType.STRING){s.putString(f.GoogleConstants.K_V,v.getStringRepresentation());}else if(a===f.XValueType.INTEGER){s.putInteger(f.GoogleConstants.K_V,v.getInteger());}else if(a===f.XValueType.DOUBLE){s.putDouble(f.GoogleConstants.K_V,v.getDouble());}else if(a===f.XValueType.LONG){s.putLong(f.GoogleConstants.K_V,v.getLong());}else if(a===f.XValueType.BOOLEAN){s.putBoolean(f.GoogleConstants.K_V,v.getBoolean());}};f.GoogleChart=function(){};f.GoogleChart.prototype=new f.XObject();f.GoogleChart.prototype._ff_c="GoogleChart";f.GoogleChart.LEGEND_MAX_LINES=3;f.GoogleChart.WIDTH=600;f.GoogleChart.HEIGHT=500;f.GoogleChart.HEIGHT_CHART_AREA=380;f.GoogleChart.ANIMATION_DURATION=750;f.GoogleChart.prototype.createOptions=function(v){var s=f.PrFactory.createStructure();var a=v.getStructureByKey(f.VizDefConstants.K_CHART);var b=a.getStructureByKey(f.VizDefConstants.K_PROPERTIES);s.putString(f.GoogleConstants.K_TITLE,a.getStringByKeyExt(f.VizDefConstants.K_TITLE,""));s.putNewStructure(f.GoogleConstants.K_SERIES);var c=b.getStructureByKey(f.VizDefConstants.K_LEGEND);var d=c.getStructureByKey(f.VizDefConstants.K_LABEL);var e=d.getStructureByKey(f.VizDefConstants.K_STYLE);var g=b.getStructureByKey(f.VizDefConstants.K_LEGEND_GROUP);var h=g.getStructureByKey(f.VizDefConstants.K_LAYOUT);var i=h.getStringByKeyExt(f.VizDefConstants.K_POSITION,f.GoogleConstants.V_POSITION_NONE);var l=s.putNewStructure(f.GoogleConstants.K_LEGEND);this.setTextStyle(l,e);l.putString(f.GoogleConstants.K_POSITION,i);l.putString(f.GoogleConstants.K_ALIGNMENT,f.GoogleConstants.V_CENTER);l.putInteger(f.GoogleConstants.K_MAX_LINES,f.GoogleChart.LEGEND_MAX_LINES);s.putInteger(f.GoogleConstants.K_WIDTH,f.GoogleChart.WIDTH);s.putInteger(f.GoogleConstants.K_HEIGHT,f.GoogleChart.HEIGHT);var j=s.putNewStructure(f.GoogleConstants.K_CHART_AREA);j.putInteger(f.GoogleConstants.K_HEIGHT,f.GoogleChart.HEIGHT_CHART_AREA);var k=s.putNewStructure(f.GoogleConstants.K_ANIMATION);k.putBoolean(f.GoogleConstants.K_STARTUP,true);k.putInteger(f.GoogleConstants.K_DURATION,f.GoogleChart.ANIMATION_DURATION);k.putString(f.GoogleConstants.K_EASING,f.GoogleConstants.V_EASING_LINEAR);var m=b.getStructureByKey(f.VizDefConstants.K_PLOT_AREA);var n=m.getStructureByKey(f.VizDefConstants.K_STACK_COLUMN_LABEL);var o=n.getStructureByKey(f.VizDefConstants.K_STYLE);var p=s.putNewStructure(f.GoogleConstants.K_ROLE_ANNOTATIONS);p.putBoolean(f.GoogleConstants.K_HIGH_CONTRAST,true);this.setTextStyle(p,o);var q=p.putNewStructure(f.GoogleConstants.K_STEM);q.putInteger(f.GoogleConstants.K_LENGTH,2);var t=s.putNewStructure(f.GoogleConstants.K_TOOLTIP);this.setTextStyle(t,o);this.addChartSpecificOptions(s,v);return s;};f.GoogleChart.prototype.createMetadata=function(c){var s=f.PrFactory.createStructure();s.putString(f.GoogleConstants.K_CHART_TYPE,this.getChartName());var a=s.putNewList(f.GoogleConstants.K_COLS);for(var i=0;i<c.size();i++){a.addInteger(i);var b=c.getStructureAt(i).getStringByKey(f.GoogleConstants.K_TYPE);if(f.XString.isEqual(b,f.GoogleConstants.K_NUMBER)){var d=a.addNewStructure();d.putString(f.GoogleConstants.K_ROLE,f.GoogleConstants.V_ROLE_ANNOTATION);d.putString(f.GoogleConstants.K_TYPE,f.GoogleConstants.V_TYPE_STRING);d.putString(f.GoogleConstants.K_CALC,f.GoogleConstants.V_CALC_STRINGIFY);d.putInteger(f.GoogleConstants.K_SOURCE_COLUMN,i);}}return s;};f.GoogleChart.prototype.setTextStyle=function(s,v){var t=s.putNewStructure(f.GoogleConstants.K_TEXT_STYLE);t.putString(f.GoogleConstants.K_FONT_NAME,v.getStringByKeyExt(f.VizDefConstants.K_FONT_FAMILY,""));t.putString(f.GoogleConstants.K_COLOR,v.getStringByKeyExt(f.VizDefConstants.K_COLOR,"rgb(0,0,0)"));var a=v.getStringByKey(f.VizDefConstants.K_FONT_SIZE);if(f.notNull(a)){t.putString(f.GoogleConstants.K_FONT_SIZE,f.XString.replace(a,"px",""));}var b=v.getStringByKey(f.VizDefConstants.K_FONT_WEIGHT);if(f.XString.isEqual(b,f.VizDefConstants.V_FONT_WEIGHT_BOLD)){t.putBoolean(f.GoogleConstants.K_BOLD,true);}};f.GoogleChart.prototype.setAxisStyle=function(a,v,b,s){var c=v.getStructureByKey(f.VizDefConstants.K_CHART);var d=c.getStructureByKey(f.VizDefConstants.K_PROPERTIES);var e=d.getStructureByKey(b);var g=e.getStructureByKey(f.VizDefConstants.K_LABEL);var h=this.getOppositeAxis(b,d);this.setTextStyle(a,g.getStructureByKey(f.VizDefConstants.K_STYLE));if(!s){a.putString(f.GoogleConstants.K_TEXT_POSITION,f.GoogleConstants.V_POSITION_NONE);}var j=h.getStructureByKey(f.VizDefConstants.K_AXIS_LINE);if(f.notNull(j)&&j.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,true)){a.putInteger(f.GoogleConstants.K_BASELINE,0);}var k=this.getAxisReferenceLines(v,b);if(f.notNull(k)){var t=a.putNewList(f.GoogleConstants.K_TICKS);for(var i=0;i<k.size();i++){t.addString(k.getStructureAt(i).getStringByKey(f.VizDefConstants.K_VALUE));}}else if(!this.isTicksVisible(h)){a.putNewList(f.GoogleConstants.K_TICKS);}};f.GoogleChart.prototype.getOppositeAxis=function(a,v){if(f.XString.isEqual(a,f.VizDefConstants.K_CATEGORY_AXIS)){return v.getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);}return v.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS);};f.GoogleChart.prototype.getAxisReferenceLines=function(v,a){var b=v.getStructureByKey(f.VizDefConstants.K_ANALYTIC_OBJECTS);var c=b.getListByKey(f.VizDefConstants.K_REFERENCELINES);if(f.notNull(c)){for(var i=0;i<c.size();i++){var d=c.getStructureAt(i);if(f.XString.isEqual(d.getStringByKey(f.VizDefConstants.K_FEED),a)){var m=d.getListByKey(f.VizDefConstants.K_MARKERS);if(!f.PrUtils.isListEmpty(m)){return m;}}}}return null;};f.GoogleChart.prototype.isTicksVisible=function(v){var a=v.getStructureByKey(f.VizDefConstants.K_AXIS_TICK);return f.notNull(a)&&a.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,false);};f.RsHiChartRenderHelper=function(){};f.RsHiChartRenderHelper.prototype=new f.XObject();f.RsHiChartRenderHelper.prototype._ff_c="RsHiChartRenderHelper";f.RsHiChartRenderHelper.create=function(t,r){var h=null;var u=null;if(f.notNull(r)){var i=null;var v=r.getQueryModel().getVizManager().getVizDef();var g=r.getQueryModel().getVizManager().getGlobalDef();var c=f.XString.toLowerCase(t.getName());var s=null;var a=false;var b=false;var d="0%";var e=null;if(f.XString.isEqual(c,f.VizDefConstants.K_COMB_BCL)){c=f.VizDefConstants.V_CHART_TYPE_COLUMN;s=f.VizDefConstants.K_LINE;}else if(f.XString.isEqual(c,f.VizDefConstants.K_RADAR)){c=f.VizDefConstants.K_LINE;a=true;}var j=false;if(f.notNull(v)){var k=v.getStructureByKey(f.VizDefConstants.K_CHART);u=v.getStructureByKey(f.VizDefConstants.K_USER_PREFERENCES);if(f.notNull(k)){i=k.getStringByKey(f.VizDefConstants.K_TYPE);if(f.XString.isEqual(i,f.VizDefConstants.V_CHART_TYPE_BAR)||f.XString.isEqual(i,f.VizDefConstants.V_STACKED_BAR)){j=true;}}var l;var m=k.getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(m)){l=m.getStructureByKey(f.VizDefConstants.K_GENERAL);if(f.notNull(l)){if(l.containsKey(f.VizDefConstants.K_INVERTED)){j=l.getBooleanByKey(f.VizDefConstants.K_INVERTED);}if(l.containsKey(f.VizDefConstants.K_ORIENTATION)){j=f.XString.isEqual(l.getStringByKey(f.VizDefConstants.K_ORIENTATION),f.VizDefConstants.V_HORIZONTAL);}e=l.getStringByKey(f.VizDefConstants.K_FULL_STACKING);}}if(f.notNull(u)){l=u.getStructureByKey(f.VizDefConstants.K_GENERAL);if(f.notNull(l)){if(l.containsKey(f.VizDefConstants.K_INVERTED)){j=l.getBooleanByKey(f.VizDefConstants.K_INVERTED);}if(l.containsKey(f.VizDefConstants.K_ORIENTATION)){j=f.XString.isEqual(l.getStringByKey(f.VizDefConstants.K_ORIENTATION),f.VizDefConstants.V_HORIZONTAL);}if(l.containsKey(f.VizDefConstants.K_FULL_STACKING)){e=l.getStringByKey(f.VizDefConstants.K_FULL_STACKING);}}}if(f.XString.isEqual(i,f.VizDefConstants.K_MARIMEKKO)){c=f.VizDefConstants.K_VARIWIDE;e=f.VizDefConstants.V_NORMAL;j=false;}else if(f.XString.isEqual(i,f.VizDefConstants.K_BAR_COLUMN)){e=null;if(!j){c=f.VizDefConstants.V_CHART_TYPE_COLUMN;}else{c=f.VizDefConstants.V_CHART_TYPE_BAR;}}else if(f.XString.isEqual(i,f.VizDefConstants.V_TYPE_CHART_DONUT)){e=null;j=false;c=f.VizDefConstants.K_PIE;d="50%";}else if(f.XString.isEqual(i,f.VizDefConstants.K_SCATTER_PLOT)){e=null;j=false;c=f.VizDefConstants.K_SCATTER;}else if(f.XString.isEqual(i,f.VizDefConstants.K_RADAR)){e=null;j=false;c=f.VizDefConstants.K_LINE;a=true;}else if(f.XString.isEqual(i,f.VizDefConstants.K_METRIC)){e=null;j=false;c=f.VizDefConstants.K_SOLID_GAUGE;}else if(f.XString.isEqual(i,f.VizDefConstants.K_AREA)){j=false;e=f.VizDefConstants.V_NORMAL;c=f.VizDefConstants.K_AREA;}else if(f.XString.isEqual(i,f.VizDefConstants.K_STACKED_BAR)||f.XString.isEqual(i,f.VizDefConstants.K_STACKED_COLUMN)){if(f.isNull(e)){e=f.VizDefConstants.V_NORMAL;}if(f.XString.isEqual(i,f.VizDefConstants.K_STACKED_COLUMN)&&!j){c=f.VizDefConstants.V_CHART_TYPE_COLUMN;}else if(f.XString.isEqual(i,f.VizDefConstants.K_STACKED_BAR)&&j){c=f.VizDefConstants.V_CHART_TYPE_BAR;}else{c=f.VizDefConstants.V_CHART_TYPE_COLUMN;}}else if(f.XString.isEqual(i,f.VizDefConstants.K_COMB_STACKED_BCL)){c=f.VizDefConstants.V_CHART_TYPE_COLUMN;s=f.VizDefConstants.K_LINE;e=f.VizDefConstants.V_NORMAL;}else if(f.XString.isEqual(i,f.VizDefConstants.K_COMB_BCL)){c=f.VizDefConstants.V_CHART_TYPE_COLUMN;s=f.VizDefConstants.K_LINE;e=null;}else if(f.XString.isEqual(i,f.VizDefConstants.V_CHART_TYPE_BOXPLOT)){c=f.VizDefConstants.V_CHART_TYPE_BOXPLOT;e=null;j=false;}else if(f.XString.isEqual(i,f.VizDefConstants.K_TIME_SERIES)){b=true;c=f.VizDefConstants.K_LINE;e=null;j=false;}else if(f.XString.isEqual(i,f.VizDefConstants.K_CLUSTER_BUBBLE)){c=f.VizDefConstants.K_PACKED_BUBBLE;e=null;j=false;}else{c=f.XString.toLowerCase(v.getStructureByKey(f.VizDefConstants.K_CHART).getStringByKey(f.VizDefConstants.K_TYPE));e=null;j=false;}}var n=!f.XString.isEqual(null,s);var o=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_COLUMN);var p=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BELLCURVE);var q=f.XString.isEqual(c,f.VizDefConstants.K_LINE);var w=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BAR);var x=f.XString.isEqual(c,f.VizDefConstants.K_SPLINE);var y=f.XString.isEqual(c,f.VizDefConstants.K_AREA);var z=f.XString.isEqual(c,f.VizDefConstants.K_PIE);var A=f.XString.isEqual(c,f.VizDefConstants.K_WORDCLOUD);var B=f.XString.isEqual(c,f.VizDefConstants.K_VARIPIE);var C=f.XString.isEqual(c,f.VizDefConstants.K_VARIWIDE);var D=f.XString.isEqual(c,f.VizDefConstants.K_SCATTER);var E=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BUBBLE);var F=f.XString.isEqual(c,f.VizDefConstants.K_PACKED_BUBBLE);var G=f.XString.isEqual(c,f.VizDefConstants.K_HEATMAP);var H=f.XString.isEqual(c,f.VizDefConstants.K_TREEMAP);var I=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BOXPLOT);var J=f.XString.isEqual(c,f.VizDefConstants.K_SOLID_GAUGE);if(q||w||x||p||o||y||n){if(b){h=new f.RsHiChartTimeSeriesHelper();}else{h=new f.RsHiChartCategorialSeriesHelper();}}else if(A){h=new f.RsHiChartWordcloudHelper();}else if(z||B||A){h=new f.RsHiChartPieHelper();}else if(I){h=new f.RsHiChartBoxplotHelper();}else if(E||D){h=new f.RsHiChartCorrelationHelper();}else if(G){h=new f.RsHiChartHeatmapHelper();}else if(H){h=new f.RsHiChartTreemapHelper();}else if(J){h=new f.RsHiChartMetricHelper();}else if(C){h=new f.RsHiChartMarimekkoHelper();}else if(F){h=new f.RsHiChartClusterBubbleHelper();}else{h=new f.RsHiChartUnsupportedHelper();}h.setupBase(v,g,r,c,s,e,d,a,n,j);if(f.notNull(u)){f.RsHiChartVizUserPrefrence.userPrefrence(h.getChartData(),u,c);}}return h;};f.RsHiChartRenderHelper.prototype.m_vizDef=null;f.RsHiChartRenderHelper.prototype.m_globalDef=null;f.RsHiChartRenderHelper.prototype.m_chartType=null;f.RsHiChartRenderHelper.prototype.m_polar=false;f.RsHiChartRenderHelper.prototype.m_innerRadius=null;f.RsHiChartRenderHelper.prototype.m_theChartData=null;f.RsHiChartRenderHelper.prototype.m_inverted=false;f.RsHiChartRenderHelper.prototype.m_stackingType=null;f.RsHiChartRenderHelper.prototype.m_showLegend=false;f.RsHiChartRenderHelper.prototype.m_colors=null;f.RsHiChartRenderHelper.prototype.m_colorIndex=0;f.RsHiChartRenderHelper.prototype.getStackingType=function(){return this.m_stackingType;};f.RsHiChartRenderHelper.prototype.isInverted=function(){return this.m_inverted;};f.RsHiChartRenderHelper.prototype.getVizDef=function(){return this.m_vizDef;};f.RsHiChartRenderHelper.prototype.isPolar=function(){return this.m_polar;};f.RsHiChartRenderHelper.prototype.getGlobalDef=function(){return this.m_globalDef;};f.RsHiChartRenderHelper.prototype.getChartData=function(){return this.m_theChartData;};f.RsHiChartRenderHelper.prototype.getChartType=function(){return this.m_chartType;};f.RsHiChartRenderHelper.prototype.isUnsupported=function(){return false;};f.RsHiChartRenderHelper.prototype.isResponsive=function(){return true;};f.RsHiChartRenderHelper.prototype.getInnerRadius=function(){return this.m_innerRadius;};f.RsHiChartRenderHelper.prototype.m_secondChart=null;f.RsHiChartRenderHelper.prototype.getSecondChart=function(){return this.m_secondChart;};f.RsHiChartRenderHelper.prototype.setupBase=function(v,g,r,c,s,a,i,b,d,e){this.m_polar=b;this.m_chartType=c;this.m_secondChart=s;this.m_innerRadius=i;this.m_vizDef=v;this.m_globalDef=g;this.m_theChartData=f.PrFactory.createStructure();this.m_inverted=e;this.m_stackingType=a;this.m_colorIndex=-1;var h=this.m_theChartData.putNewStructure(f.VizDefConstants.K_CHART);if(this.m_inverted&&!f.XString.isEqual(this.m_chartType,f.VizDefConstants.V_CHART_TYPE_BAR)){h.putBoolean(f.VizDefConstants.K_INVERTED,true);}h.putBoolean(f.VizDefConstants.K_POLAR,b);h.putString(f.VizDefConstants.K_TYPE,c);h.putBoolean(f.VizDefConstants.K_ANIMATION,false);var j=this.m_theChartData.putNewStructure(f.VizDefConstants.K_LANG);j.putString(f.VizDefConstants.K_DECIMAL_POINT,",");j.putString(f.VizDefConstants.K_THOUSANDS_SEP,".");var k="rgba(0,0,0,0)";h.putString(f.VizDefConstants.K_BACKGROUND_COLOR,k);if(f.notNull(v)){k=v.getStringByKey(f.VizDefConstants.K_BBACKGROUND_COLOR);if(f.notNull(k)){if(f.XString.size(k)>0){h.putString(f.VizDefConstants.K_BACKGROUND_COLOR,k);}}}var l=h.putNewStructure(f.VizDefConstants.K_STYLE);l.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");var m=this.m_theChartData.putNewStructure(f.VizDefConstants.K_BOOST);var n=this.m_theChartData.putNewStructure(f.VizDefConstants.K_CREDITS);n.putBoolean(f.VizDefConstants.K_ENABLED,false);m.putBoolean(f.VizDefConstants.K_USER_GPU_TRANSLATIONS,true);if(this.isUnsupported()){j.putString(f.VizDefConstants.K_NO_DATA,"Chart not supported ");this.getChartData().putBoolean("fullscreenEnabled",false);return;}if(r.hasErrors()){j.putString(f.VizDefConstants.K_NO_DATA,"Olap query returned with errors ");this.getChartData().putBoolean(f.VizDefConstants.K_FULL_SCREEN_ENABLED,false);return;}f.RsHiChartVizUtils.vizProcessor(v,l,this.m_theChartData,c);if(this.isResponsive()){f.RsHiChartUtils.responsiveBuilder(c,this.m_theChartData);}var o=null;var p=null;if(f.notNull(v)){o=f.RsVizAxisExtractor.extractCustomFormatting(v,g);p=v.getStructureByKey("feedMembers");}if(f.isNull(p)){p=f.RsVizAxisExtractor.guessFeedMembers(r,c,d);}var q=f.RsVizAxisExtractor.getTuplesFromColumnAxis(r,p,o);var t=f.RsVizAxisExtractor.getTuplesFromRowAxis(r,p,o);this.initializeColorList();this.prepareRendering();this.readResultSetData(q,t,r);this.reiterateResultSet(q,t,r);this.addColorList();f.RsHiChartVizUtils.addColorGradient(g,v,this.m_theChartData);f.RsHiChartVizUtils.checkShowLegend(v,this.m_theChartData,c,this.isShowLegend());this.finishRendering();};f.RsHiChartRenderHelper.prototype.addColorList=function(){var c=this.m_theChartData.putNewList(f.VizDefConstants.K_COLORS);for(var a=0;a<this.m_colors.size();a++){c.addString(this.m_colors.get(a));}};f.RsHiChartRenderHelper.prototype.getCurrentColor=function(){return this.getColorAt(this.m_colorIndex);};f.RsHiChartRenderHelper.prototype.getColorAt=function(i){if(i>0&&this.m_colors.size()>i){return this.m_colors.get(i);}return null;};f.RsHiChartRenderHelper.prototype.initializeColorList=function(){this.m_colors=f.XListOfString.create();var c=f.XListOfString.create();if(f.notNull(this.m_vizDef)){var a=this.m_vizDef.getStructureByKey(f.VizDefConstants.K_COLOR_SCHEME);var b=f.XHashSetOfString.create();var d=this.m_globalDef.getStructureByKey(f.VizDefConstants.K_COLOR_SYNC);var e=f.XStringBuffer.create();var g=this.m_vizDef.getStructureByKey(f.VizDefConstants.K_CHART).getListByKey(f.VizDefConstants.K_BINDINGS);for(var i=0;i<g.size();++i){var h=g.getStructureAt(i);if(f.XString.isEqual(h.getStringByKey(f.VizDefConstants.K_FEED),f.VizDefConstants.K_COLOR)){var l=h.getListByKey(f.VizDefConstants.K_SOURCE);if(l.size()>0){for(var j=0;j<l.size();++j){if(l.getStructureAt(j).hasStringByKey(f.VizDefConstants.K_ID)){if(e.length()!==0){e.append("/");}var m=l.getStructureAt(j);if(m.containsKey(f.VizDefConstants.K_DIMENSION)){e.append(m.getStringByKey(f.VizDefConstants.K_DIMENSION));}else{e.append(m.getStringByKey(f.VizDefConstants.K_ID));}}}}}}if(!this.m_vizDef.getStructureByKey(f.VizDefConstants.K_CHART).getBooleanByKeyExt(f.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(f.XStringUtils.isNotNullAndNotEmpty(e.toString())&&f.XCollectionUtils.hasElements(d)){var n=d.getStructureByKey(e.toString());if(f.notNull(n)){var o=n.getListByKey(f.VizDefConstants.K_COLORS);for(var k=0;k<o.size();++k){c.add(o.getStringAt(k));}}}}if(f.XCollectionUtils.hasElements(a)){var p=a.getListByKey(f.VizDefConstants.K_PALETTE_COLORS);if(f.notNull(p)){for(var y=0;y<p.size();y++){c.add(p.getStringAt(y));}}}if(c.size()<5&&f.XCollectionUtils.hasElements(d)){var q=d.getKeysAsReadOnlyListOfStringSorted();for(var r=0;r<q.size();r++){var s=q.get(r);if(!f.XString.isEqual(s,e.toString())){var t=d.getStructureByKey(s);if(f.notNull(t)){var u=t.getListByKey(f.VizDefConstants.K_COLORS);for(var z=0;z<u.size();++z){c.add(u.getStringAt(z));}}}}}if(c.size()<5){c.add(f.VizDefConstants.V_COLOR_1);c.add(f.VizDefConstants.V_COLOR_2);c.add(f.VizDefConstants.V_COLOR_3);c.add(f.VizDefConstants.V_COLOR_4);c.add(f.VizDefConstants.V_COLOR_5);c.add(f.VizDefConstants.V_COLOR_6);c.add(f.VizDefConstants.V_COLOR_7);c.add(f.VizDefConstants.V_COLOR_8);c.add(f.VizDefConstants.V_COLOR_9);c.add(f.VizDefConstants.V_COLOR_10);c.add(f.VizDefConstants.V_COLOR_11);c.add(f.VizDefConstants.V_COLOR_12);c.add(f.VizDefConstants.V_COLOR_13);c.add(f.VizDefConstants.V_COLOR_14);c.add(f.VizDefConstants.V_COLOR_15);c.add(f.VizDefConstants.V_COLOR_16);c.add(f.VizDefConstants.V_COLOR_17);c.add(f.VizDefConstants.V_COLOR_18);}b.addAll(c);for(var v=0;v<c.size();v++){var w=c.get(v);if(b.contains(w)){b.removeElement(w);this.m_colors.add(w);}}}else{this.m_colors.add(f.VizDefConstants.V_COLOR_1);this.m_colors.add(f.VizDefConstants.V_COLOR_2);this.m_colors.add(f.VizDefConstants.V_COLOR_3);this.m_colors.add(f.VizDefConstants.V_COLOR_4);this.m_colors.add(f.VizDefConstants.V_COLOR_5);this.m_colors.add(f.VizDefConstants.V_COLOR_6);this.m_colors.add(f.VizDefConstants.V_COLOR_7);this.m_colors.add(f.VizDefConstants.V_COLOR_8);this.m_colors.add(f.VizDefConstants.V_COLOR_9);this.m_colors.add(f.VizDefConstants.V_COLOR_10);this.m_colors.add(f.VizDefConstants.V_COLOR_11);this.m_colors.add(f.VizDefConstants.V_COLOR_12);this.m_colors.add(f.VizDefConstants.V_COLOR_13);this.m_colors.add(f.VizDefConstants.V_COLOR_14);this.m_colors.add(f.VizDefConstants.V_COLOR_15);this.m_colors.add(f.VizDefConstants.V_COLOR_16);this.m_colors.add(f.VizDefConstants.V_COLOR_17);this.m_colors.add(f.VizDefConstants.V_COLOR_18);}};f.RsHiChartRenderHelper.prototype.addColorAndPattern=function(c,p,d,a,i){if(!i){this.m_colorIndex++;}var b=c;if(f.XStringUtils.isNullOrEmpty(b)&&this.m_colorIndex<this.m_colors.size()){b=this.m_colors.get(this.m_colorIndex);}if(!f.XString.isEqual(a,f.VizDefConstants.K_LINE)&&f.XStringUtils.isNotNullAndNotEmpty(p)){d.putStringNotNullAndNotEmpty(f.VizDefConstants.K_BORDER_COLOR,b);if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_NON_FILL)){if(i&&!f.XString.isEqual(a,f.VizDefConstants.K_AREA)){d.putString(f.VizDefConstants.K_COLOR,"#ffffff");}else{d.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,b);}}else{var s=0;var e="";if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING1)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING1;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING1;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING2)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING2;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING2;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING3)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING3;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING3;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING4)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING4;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING4;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING5)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING5;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING5;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING6)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING6;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING6;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING7)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING7;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING7;}else if(f.XString.isEqual(p,f.VizDefConstants.K_PATTERN_HATCHING8)){s=f.VizDefConstants.V_PATTERN_SIZE_HATCHING8;e=f.VizDefConstants.V_PATTERN_PATH_HATCHING8;}if(s>0&&f.XStringUtils.isNotNullAndNotEmpty(e)){var g=d.putNewStructure(f.VizDefConstants.K_COLOR).putNewStructure(f.VizDefConstants.K_PATTERN);g.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,b);g.putInteger(f.VizDefConstants.K_WIDTH,s);g.putInteger(f.VizDefConstants.K_HEIGHT,s);g.putString(f.VizDefConstants.K_PATH,e);}}}else{d.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,b);}};f.RsHiChartRenderHelper.prototype.reiterateResultSet=function(c,r,a){};f.RsHiChartRenderHelper.prototype.isShowLegend=function(){return this.m_showLegend;};f.RsHiChartRenderHelper.prototype.setShowLegend=function(s){this.m_showLegend=s;};f.RsMicroChartRenderer=function(){};f.RsMicroChartRenderer.prototype=new f.XObject();f.RsMicroChartRenderer.prototype._ff_c="RsMicroChartRenderer";f.RsMicroChartRenderer.create=function(){return new f.RsMicroChartRenderer();};f.RsMicroChartRenderer.prototype.m_valueAxis=null;f.RsMicroChartRenderer.prototype.m_seriesFilColor=null;f.RsMicroChartRenderer.prototype.render=function(t,r){var v=r.getQueryModel().getVizManager().getVizDef();var g=r.getQueryModel().getVizManager().getGlobalDef();var c=f.PrFactory.createStructure();if(f.notNull(v)){var a=v.getStructureByKey("chart");if(f.notNull(a)){if(f.XString.isEqual(a.getStringByKey("type"),"barcolumn")){this.renderColumnChart(r,c,v);}}c.put("vizDef",v);c.put("globalDef",g);}else{this.renderColumnChart(r,c,null);}return c;};f.RsMicroChartRenderer.prototype.renderColumnChart=function(r,c,v){c.putString("chart","Column");c.putBoolean("allowColumnLabels",true);var a=c.putNewList("columns");this.extractValueAxisFromVizDef(v);this.extractSeriesColorsFromVizDef(v);this.generateColumns(r,a);};f.RsMicroChartRenderer.prototype.generateColumns=function(r,c){var a=r.getCursorColumnsAxis();a.setTupleCursorBeforeStart();var b=0;while(a.hasNextTuple()){var d=null;var e=0;var g=null;var h=null;var i="";a.nextTuple();while(a.hasNextTupleElement()){a.nextTupleElement();while(a.hasNextFieldValue()){a.nextFieldValue();var p=a.getField().getPresentationType();var j=a.getFormattedValue();i=f.XStringUtils.concatenate5(p.getName(),":",j," - ",i);if(p.isTypeOf(f.PresentationType.SHORT_TEXT)||p.isTypeOf(f.PresentationType.LONG_TEXT)||p.isTypeOf(f.PresentationType.MEDIUM_TEXT)||p.isTypeOf(f.PresentationType.HIERARCHY_TEXT)){d=j;}else if(f.isNull(d)&&p.isTypeOf(f.PresentationType.DISPLAY_KEY)){d=j;}if(p.isTypeOf(f.PresentationType.HIERARCHY_KEY)){h=j;}}}var t=r.getDataCell(b,0);e=t.getDouble();g=t.getFormattedValue();b++;var m=this.getIndexOfMember(h);var k=this.getColorForMember(h);var l=f.PrStructure.create();if(m!==-1&&c.size()>m){c.insert(m,l);}else{c.add(l);}l.putDouble("value",e);l.putString("displayValue",g);l.putString("label",d);if(f.notNull(k)){l.putString("color",k);}l.putString("hierarchyKey",h);}};f.RsMicroChartRenderer.prototype.extractValueAxisFromVizDef=function(v){if(f.notNull(v)){var a=v.getStructureByKey("feedMembers");if(f.notNull(a)){this.m_valueAxis=a.getListByKey("valueAxis");}}};f.RsMicroChartRenderer.prototype.getIndexOfMember=function(h){if(f.notNull(this.m_valueAxis)){return this.m_valueAxis.getIndex(f.PrString.createWithValue(h));}return-1;};f.RsMicroChartRenderer.prototype.extractSeriesColorsFromVizDef=function(v){this.m_seriesFilColor=f.PrStructure.create();if(f.notNull(v)){var u=v.getStructureByKey("userPreferences");if(f.notNull(u)){var s=u.getStructureByKey("series");if(f.notNull(s)){var b=s.getStructureByKey("fillColor");if(f.notNull(b)){var c=b.getKeysAsIteratorOfString();while(c.hasNext()){var t=c.next();var d=b.getListByKey(t);for(var a=0;a<d.size();a++){var e=d.getListAt(a);if(e.size()>0){var g=e.getListAt(0);if(g.size()>0){var h=g.getStructureAt(0);if(f.notNull(h)){var i=h.getStructureByKey("entityId");if(f.notNull(i)){var m=i.getStringByKeyExt("id",null);if(f.notNull(m)){var j=f.XString.replace(t,"\"","");this.m_seriesFilColor.putString(m,j);}}}}}}}}}}}};f.RsMicroChartRenderer.prototype.getColorForMember=function(h){if(f.notNull(this.m_seriesFilColor)&&this.m_seriesFilColor.size()>0){return this.m_seriesFilColor.getStringByKey(h);}return null;};f.RsHiChartVizEvents={create:function(){return new f.RsHiChartVizEvents();},addEvents:function(t,c,v){if(f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BUBBLE)||f.XString.isEqual(c,f.VizDefConstants.K_SCATTER)){var o="function(){var newXMinArr=[];var newXMaxArr=[];var newYMinArr=[];var newYMaxArr=[];for(var tmpSeriesIndex in this.series){newXMinArr.push(Math.min.apply(Math,this.series[tmpSeriesIndex].xData));newXMaxArr.push(Math.max.apply(Math,this.series[tmpSeriesIndex].xData));newYMinArr.push(Math.min.apply(Math,this.series[tmpSeriesIndex].yData));newYMaxArr.push(Math.max.apply(Math,this.series[tmpSeriesIndex].yData))} let maxX=Math.max.apply(Math,newXMaxArr);let minX=Math.min.apply(Math,newXMinArr);let maxY=Math.max.apply(Math,newYMaxArr);let minY=Math.min.apply(Math,newYMinArr);var intervalX=this.xAxis[0].tickInterval;var intervalY=this.yAxis[0].tickInterval;this.xAxis[0].update({max:1.1*maxX,min:Math.min(0,(minX)-intervalX/2)},!1);this.yAxis[0].update({max:1.1*maxY,min:Math.min(0,(minY)-intervalY/2)},!1);this.redraw(!1)}";var a=t.getStructureByKey(f.VizDefConstants.K_CHART);if(f.notNull(a)){var e=a.putNewStructure("events");e.putString("load",o);}}return t;}};f.RsVizAxis=function(){};f.RsVizAxis.prototype=new f.XObject();f.RsVizAxis.prototype._ff_c="RsVizAxis";f.RsVizAxis.create=function(){var n=new f.RsVizAxis();n.m_numberFormatingInfosByFeed=f.XHashMapByString.create();n.m_elements=f.XList.create();n.m_availableFeedTypes=f.XHashSetOfString.create();return n;};f.RsVizAxis.prototype.m_elements=null;f.RsVizAxis.prototype.m_availableFeedTypes=null;f.RsVizAxis.prototype.m_numberFormatingInfosByFeed=null;f.RsVizAxis.prototype.m_numberFormattingInfo=null;f.RsVizAxis.prototype.releaseObject=function(){this.m_elements=f.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=f.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;f.XObject.prototype.releaseObject.call(this);};f.RsVizAxis.prototype.getFormattedValue=function(b,a,d){var c=this.m_numberFormatingInfosByFeed.getByKey(b);return f.RsVizAxisExtractor.getFormattedValue(d,a.getNumberFormattingInfo(),c);};f.RsVizAxis.prototype.getDecimalPlaces=function(b){var s=this.m_numberFormatingInfosByFeed.getByKey(b);if(f.notNull(s)){return s.getMaxDecimalPlaces();}return this.m_numberFormattingInfo.getMaxDecimalPlaces();};f.RsVizAxis.prototype.getNumericShift=function(b){var s=this.m_numberFormatingInfosByFeed.getByKey(b);if(f.notNull(s)){return s.getNumericShift();}return this.m_numberFormattingInfo.getNumericShift();};f.RsVizAxis.prototype.getScaledValue=function(b,a,d){var c=this.m_numberFormatingInfosByFeed.getByKey(b);return f.RsVizAxisExtractor.getScaledValue(d,a.getNumberFormattingInfo(),c);};f.RsVizAxis.prototype.addElement=function(e){this.m_elements.add(e);var a=e.getAvailableFeedTypes();this.m_availableFeedTypes.addAll(a);var n=e.getNumberFormattingInfo();if(f.isNull(this.m_numberFormattingInfo)||this.m_numberFormattingInfo.isUseFormattingFromDataCell()){this.m_numberFormattingInfo=n;}var b=a.getIterator();while(b.hasNext()){var c=b.next();var d=this.m_numberFormatingInfosByFeed.getByKey(c);if(f.isNull(d)||d.isUseFormattingFromDataCell()){this.m_numberFormatingInfosByFeed.put(c,n);}}};f.RsVizAxis.prototype.getExtendedPrettyNamesForFeed=function(u,i,a,e){var l=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a);}return this.getExtendedPrettyNamesForFeeds(u,i,l,e);};f.RsVizAxis.prototype.getExtendedPrettyNamesForFeeds=function(u,i,a,e){var b=f.XListOfString.create();b.addAll(a);var c;if(f.XCollectionUtils.hasElements(e)){c=e.getIterator();}else{c=this.m_availableFeedTypes.getIterator();}while(c.hasNext()){var d=c.next();if(!a.contains(d)&&this.getPrettyNamesForFeed(true,i,d).size()>1){b.add(d);}}return this.getPrettyNamesForFeeds(u,i,b);};f.RsVizAxis.prototype.getPrettyNamesForFeeds=function(u,a,b){var r=f.XListOfString.create();var k=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getPrettyText(b);var c=this.m_elements.get(i).getPrettyKeyText(b);if(f.XStringUtils.isNotNullAndNotEmpty(p)){if(!u||!k.contains(c)&&(a||!this.m_elements.get(i).isTotal())){r.add(p);k.add(c);}}}return r;};f.RsVizAxis.prototype.getFormattedNamesForFeeds=function(u,a,b){var r=f.XListOfString.create();var k=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getFormattedText(b);var c=this.m_elements.get(i).getPrettyKeyText(b);if(f.XStringUtils.isNotNullAndNotEmpty(p)){if(!u||!k.contains(c)&&(a||!this.m_elements.get(i).isTotal())){r.add(p);k.add(c);}}}return r;};f.RsVizAxis.prototype.getPrettyNamesForFeedsExclude=function(u,a,b,e){var r=f.XListOfString.create();var k=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getPrettyTextExclude(b,e);var c=this.m_elements.get(i).getPrettyKeyText(b);if(f.XStringUtils.isNotNullAndNotEmpty(p)){if(!u||!k.contains(c)&&(a||!this.m_elements.get(i).isTotal())){r.add(p);k.add(c);}}}return r;};f.RsVizAxis.prototype.getMatchingFeedSubList=function(a){var r=f.XListOfString.create();for(var j=0;j<a.size();j++){for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByString(a.get(j))){r.add(a.get(j));break;}}}return r;};f.RsVizAxis.prototype.hasTupleForFeed=function(a){for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByString(a)){return true;}}return false;};f.RsVizAxis.prototype.getTupleForFeed=function(a){for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByString(a)){return this.m_elements.get(i);}}return null;};f.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNameAndFeed=function(m,a){var r=f.XList.create();for(var h=0;h<this.m_elements.size();h++){var s=2;var c=this.m_elements.get(h);if(c.isSelectedByString(a)){for(var j=0;j<m.size();j++){var b=m.get(j);if(!c.getMemberKeys().contains(b)){s--;}}if(s>0){r.add(f.XIntegerValue.create(h));}}}return r;};f.RsVizAxis.prototype.getMatchingTupleIndicesForMemberNamesAndSuffix=function(m,s){for(var i=0;i<this.m_elements.size();i++){var a=true;var b=false;var c=this.m_elements.get(i);for(var j=0;j<m.size();j++){var d=m.get(j);var e=c.isSelectedByString(f.XStringUtils.concatenate2(d,s));b=e||b;if(!c.getMemberKeys().contains(d)&&!e){a=false;break;}}if(a&&b){return i;}}return-1;};f.RsVizAxis.prototype.getTupleIndexForMemberName=function(m){var l=f.XList.create();for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).getMemberKeys().contains(m)){l.add(f.XIntegerValue.create(i));}}return l;};f.RsVizAxis.prototype.getTupleIndexForMemberNames=function(m){var l=f.XList.create();for(var i=0;i<this.m_elements.size();i++){var c=true;for(var j=0;j<m.size();j++){var a=m.get(j);if(!this.m_elements.get(i).getMemberKeys().contains(a)){c=false;break;}}if(c){l.add(f.XIntegerValue.create(i));}}return l;};f.RsVizAxis.prototype.getIndicesGroupedByFeed=function(g){var m=f.XHashMapByString.create();for(var i=0;i<this.getTuplesCount();i++){var c=this.getTupleAt(i);var a=c.getPrettyText(g);if(!m.containsKey(a)){m.put(a,f.XList.create());}m.getByKey(a).add(f.XIntegerValue.create(i));}return m;};f.RsVizAxis.prototype.getIndicesGroupedByFeedAndOrdered=function(g,o){var m=f.XHashMapByString.create();var l=this.getIndicesByFeedOrder(o);for(var i=0;i<l.size();i++){var c=l.get(i);var a=this.getTupleAt(c.getInteger());var b=a.getPrettyText(g);if(!m.containsKey(b)){m.put(b,f.XList.create());}m.getByKey(b).add(c);}return m;};f.RsVizAxis.prototype.getIndicesByFeedOrder=function(a){var l=f.XList.create();for(var h=0;h<a.size();h++){var c=a.get(h);var b=l.size();for(var i=0;i<this.m_elements.size();i++){var d=this.m_elements.get(i);if(d.isSelectedByString(c)){var j=l.size();while(j>b&&d.compareTo(this.m_elements.get(l.get(j-1).getInteger()))<0){j--;}l.insert(j,f.XIntegerValue.create(i));}}}return l;};f.RsVizAxis.prototype.getPrettyNamesForFeed=function(u,i,a){var l=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a);}return this.getPrettyNamesForFeeds(u,i,l);};f.RsVizAxis.prototype.getFormattedNamesForFeed=function(u,i,a){var l=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a);}return this.getFormattedNamesForFeeds(u,i,l);};f.RsVizAxis.prototype.getPrettyNamesForFeedExclude=function(u,i,a,e){var l=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a);}return this.getPrettyNamesForFeedsExclude(u,i,l,e);};f.RsVizAxis.prototype.getLabelsForFeed=function(u,i,w,a){var l=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(a)){l.add(a);}return this.getLabelsForFeeds(u,i,w,l);};f.RsVizAxis.prototype.getLabelsForFeeds=function(u,a,w,b){var c=f.XHashSetOfString.create();var r=f.XList.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getLabel(w?this:null,b);if(f.notNull(p)){if(!u||!c.contains(p.getCompoundId())&&(a||!this.m_elements.get(i).isTotal())){r.add(p);c.add(p.getCompoundId());}}}return r;};f.RsVizAxis.prototype.getLabels=function(u,a,w){var c=f.XHashSetOfString.create();var r=f.XList.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getLabel(w?this:null,null);if(f.isNull(p)){p=this.m_elements.get(i).getDefaultLabel(w?this:null);}if(f.notNull(p)){if(!u||!c.contains(p.getCompoundId())&&(a||!this.m_elements.get(i).isTotal())){c.add(p.getCompoundId());r.add(p);}}}return r;};f.RsVizAxis.prototype.getPrettyNames=function(u,a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getPrettyText(null);if(f.XStringUtils.isNullOrEmpty(p)){p=this.m_elements.get(i).getPrettyDefaultText();}if(f.XStringUtils.isNotNullAndNotEmpty(p)){if(!u||!r.contains(p)&&(a||!this.m_elements.get(i).isTotal())){r.add(p);}}}return r;};f.RsVizAxis.prototype.getFormattedNames=function(u,a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var p=this.m_elements.get(i).getFormattedText(null);if(f.XStringUtils.isNullOrEmpty(p)){p=this.m_elements.get(i).getFormattedDefaultText();}if(f.XStringUtils.isNotNullAndNotEmpty(p)){if(!u||!r.contains(p)&&(a||!this.m_elements.get(i).isTotal())){r.add(p);}}}return r;};f.RsVizAxis.prototype.getExtendedPrettyNames=function(u,i){return this.getExtendedPrettyNamesForFeed(u,i,null,null);};f.RsVizAxis.prototype.toString=function(){return f.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString());};f.RsVizAxis.prototype.getTuplesCount=function(){return this.m_elements.size();};f.RsVizAxis.prototype.getTupleAt=function(i){return i>-1&&i<this.m_elements.size()?this.m_elements.get(i):null;};f.RsVizAxis.prototype.getFormattedDateList=function(){var r=f.XListOfString.create();var i=0;var d=false;for(i=0;i<this.m_elements.size();i++){var c=this.m_elements.get(i).getFormattedDate();if(f.notNull(c)){d=true;}r.add(c);}if(d){return r;}return null;};f.RsVizAxis.prototype.getDateList=function(){var i=0;var a=0;var d=false;for(;a<4;a++){var r=f.XList.create();for(i=0;i<this.m_elements.size();i++){var c=this.m_elements.get(i).getDate(a);if(f.notNull(c)){d=true;}r.add(c);}if(d){return r;}}return null;};f.RsVizAxis.prototype.getDimensionsForFeed=function(a){var l=f.XListOfString.create();l.add(a);return this.getDimensionsForFeeds(l);};f.RsVizAxis.prototype.getDimensionsForFeeds=function(a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var s=this.m_elements.get(i).getDimensionTextsForFeeds(a);for(var j=0;j<s.size();j++){if(!r.contains(s.get(j))){r.add(s.get(j));}}}return r;};f.RsVizAxis.prototype.getFeedDimensionTuple=function(s){for(var i=0;i<this.m_elements.size();i++){var d=this.m_elements.get(i).getDimensionNamesForFeeds(s);var r=f.XStringBuffer.create();for(var j=0;j<d.size();j++){r.append(d.get(j));r.append("/");}var a=r.toString();if(f.XStringUtils.isNotNullAndNotEmpty(a)){return f.XString.substring(a,0,f.XString.size(a)-1);}}return"";};f.RsVizAxisExtractor={getTuplesFromRowAxis:function(r,a,c){return f.RsVizAxisExtractor.getTuplesFromAxis(r,r.getCursorRowsAxis(),true,a,c);},getTuplesFromColumnAxis:function(r,a,c){return f.RsVizAxisExtractor.getTuplesFromAxis(r,r.getCursorColumnsAxis(),false,a,c);},getTuplesFromAxis:function(r,c,a,b,d){var e=f.RsVizAxis.create();var g=r.getQueryModel().getAccountDimension();if(f.isNull(g)){g=r.getQueryModel().getMeasureDimension();}c.setTupleCursorBeforeStart();var i=0;while(c.hasNextTuple()){c.nextTuple();var h=null;if(a){h=r.getDataCell(0,i);}else{h=r.getDataCell(i,0);}var j=h.getDecimalPlaces();var s=h.getScalingFactor();var k=h.getFormatString();var l=f.RsVizNumberFormattingInfo.createNumberFormat(s,j,j,k,s===0);var m=f.RsVizFeedTuple.createTuple();m.setNumberFormattingInfo(l);while(c.hasNextTupleElement()){var n=c.nextTupleElement().getDimensionMemberType();var o=f.RsVizAxisExtractor.getAxisMemberFeedTypes(c,b);m.addElement(f.RsVizAxisExtractor.createTupleElement(c,g,o,d,m,n));}e.addElement(m);i++;}return e;},createTupleElement:function(c,d,s,m,a,b){c.setFieldValueCursorBeforeStart();var t="";var k="";var e=null;var g=0;var p=-1;var h=f.DrillState.LEAF;var i=f.XListOfString.create();var v=f.XList.create();var j=f.XList.create();var l=f.XList.create();var n=0;var o=0;while(c.hasNextFieldValue()){c.nextFieldValue();var q=c.getField().getPresentationType();var r=c.getFormattedValue();i.add(r);l.add(q);var u=c.getValueType();if(c.getValue()!==null){v.add(c.getValue().clone());}j.add(u);if(q.isTypeOf(f.PresentationType.SHORT_TEXT)||q.isTypeOf(f.PresentationType.LONG_TEXT)||q.isTypeOf(f.PresentationType.MEDIUM_TEXT)){if(n<5&&f.XStringUtils.isNotNullAndNotEmpty(r)){t=r;n=5;}}else if(q.isTypeOf(f.PresentationType.HIERARCHY_TEXT)&&n<4&&f.XStringUtils.isNotNullAndNotEmpty(r)){t=r;n=4;}else if(q.isTypeOf(f.PresentationType.HIERARCHY_DISPLAY_KEY)&&n<3&&f.XStringUtils.isNotNullAndNotEmpty(r)){t=r;n=3;}else if(q.isTypeOf(f.PresentationType.DISPLAY_KEY)&&n<2&&f.XStringUtils.isNotNullAndNotEmpty(r)){t=r;n=2;}else if(n<=1&&f.PresentationType.isTextPresentation(q)&&f.XStringUtils.isNotNullAndNotEmpty(r)){t=r;n=1;}if(o<=4&&q.isTypeOf(f.PresentationType.HIERARCHY_KEY)&&!q.isTypeOf(f.PresentationType.HIERARCHY_DISPLAY_KEY)&&f.XStringUtils.isNotNullAndNotEmpty(r)){k=r;o=4;}else if(o<=3&&q.isTypeOf(f.PresentationType.HIERARCHY_KEY)&&f.XStringUtils.isNotNullAndNotEmpty(r)){k=r;o=3;}else if(o<=2&&q.isTypeOf(f.PresentationType.KEY)&&!q.isTypeOf(f.PresentationType.DISPLAY_KEY)&&f.XStringUtils.isNotNullAndNotEmpty(r)){k=r;o=2;}else if(o<=1&&f.PresentationType.isKeyPresentation(q)&&f.XStringUtils.isNotNullAndNotEmpty(r)){k=r;o=1;}}if(d.containsStructureMember(k)&&f.XStringUtils.isNotNullAndNotEmpty(d.getStructureMember(k).getText())){t=d.getStructureMember(k).getText();}if(!c.getRsDimensionAtCurrentPosition().isMeasureStructure()){e=c.getField().getDimension().getDimensionMember(c.getDimensionMemberName());g=c.getDisplayLevel();p=c.getParentNodeIndex();h=c.getDrillState();if(f.XStringUtils.isNullOrEmpty(t)){t=e.getText();k=e.getName();}}var w=null;var x="()";var y=-1;var z=null;var A=null;if(f.notNull(m)){var B;var C=m.getStructureByKey(f.VizDefConstants.K_NUMBER_FORMATTING);if(f.notNull(C)){w=C.getByKey(k);for(B=0;f.isNull(w)&&B<v.size();B++){w=C.getByKey(v.get(B).getStringRepresentation());}}C=m.getStructureByKey(f.VizDefConstants.K_SHOW_SIGN_AS);if(f.notNull(C)){x=C.getStringByKey(k);for(B=0;f.isNull(w)&&B<v.size();B++){x=C.getStringByKey(v.get(B).getStringRepresentation());}}C=m.getStructureByKey(f.VizDefConstants.K_DECIMAL_PLACES);if(f.notNull(C)){y=C.getIntegerByKey(k);for(B=0;f.isNull(w)&&B<v.size();B++){y=C.getIntegerByKey(v.get(B).getStringRepresentation());}}C=m.getStructureByKey(f.VizDefConstants.K_PATTERN_FORMATTING);if(f.notNull(C)){A=C.getStringByKey(k);for(B=0;f.isNull(A)&&B<v.size();B++){A=C.getStringByKey(v.get(B).getStringRepresentation());}}C=m.getStructureByKey(f.VizDefConstants.K_COLOR_FORMATTING);if(f.notNull(C)){z=C.getStringByKey(k);for(B=0;f.isNull(z)&&B<v.size();B++){z=C.getStringByKey(v.get(B).getStringRepresentation());}}}a.setColor(z);a.setPattern(A);if(f.notNull(w)){var D=0;var E=2;var F=0;if(w.isStructure()){var G=w.asStructure();var H=G.getStructureByKey(f.VizDefConstants.K_OPTIONS);var I=G.getStructureByKey(f.VizDefConstants.K_SCALE).getStringByKey(f.VizDefConstants.K_MULTIPLIER);if(f.XString.startsWith(I,"1E")){D=f.XInteger.convertFromString(f.XString.substring(I,2,f.XString.size(I)));}if(H.containsKey(f.VizDefConstants.K_MINIMUM_FRACTION_DIGITS)){F=H.getIntegerByKey(f.VizDefConstants.K_MINIMUM_FRACTION_DIGITS);}if(H.containsKey(f.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)){E=H.getIntegerByKey(f.VizDefConstants.K_MAXIMUM_FRACTION_DIGITS)-F;}}else if(w.isInteger()){D=w.asInteger().getInteger();}if(y>-1){E=y;F=y;}var J=f.RsVizNumberFormattingInfo.createNumberFormat(D,F,E,x,false);a.setNumberFormattingInfo(J);}if(f.XStringUtils.isNullOrEmpty(t)){t=k;}return f.RsVizTupleElement.createTupleElement(e,g,p,h,k,t,s,i,v,j,l,b);},getAxisMemberFeedTypes:function(c,a){var r=f.XLinkedHashMapByString.create();c.setFieldValueCursorBeforeStart();var k=a.getKeysAsReadOnlyListOfString();while(c.hasNextFieldValue()){c.nextFieldValue();var b=c.getFieldValue();var d=b.getField().getDimension().getName();var m=c.getDimensionMemberName();var e="";if(f.XStringUtils.isNotNullAndNotEmpty(m)){var s=c.getField().getDimension().getStructureMember(m);if(f.notNull(s)){e=s.getAliasName();}}for(var i=0;i<k.size();i++){var g=k.get(i);var h=a.getListByKey(g);for(var j=0;j<h.size();j++){var l=h.getStringAt(j);if(f.XString.isEqual(e,l)||f.XString.isEqual(m,l)||f.XString.isEqual(b.toString(),l)||f.XString.isEqual(b.getFormattedValue(),l)||f.XString.isEqual(d,l)){if(!r.containsKey(g)){r.put(g,f.XIntegerValue.create(j));}break;}}}}c.setFieldValueCursorBeforeStart();return r;},getFormattedValue:function(d,n,a){var c=n;if(f.isNull(c)||c.isUseFormattingFromDataCell()){if(d.getScalingFactor()===0&&f.notNull(a)&&!a.isUseFormattingFromDataCell()){c=a;}}if(f.notNull(c)&&!c.isUseFormattingFromDataCell()){if(!d.getValueException().isValidValue()&&d.getValueException()!==f.ValueException.MIXED_CURRENCIES_OR_UNITS){return"";}var p=c.isShowPlusSign()?"+":"";var b=c.getNumericShift();var e=c.getMinDecimalPlaces();var g=c.getMaxDecimalPlaces()-e;try{var h=d.getDouble()*f.XMath.pow(10,b);var j="#";j="#,#";if(g>0||e>0){j="#,#.";var i;for(i=0;i<e;i++){j=f.XStringUtils.concatenate2(j,"0");}for(i=0;i<g;i++){j=f.XStringUtils.concatenate2(j,"#");}}return f.XStringUtils.concatenate2(p,f.XNumberFormatter.formatDoubleToString(h,j));}catch(t){return d.getFormattedValue();}}else{var k=d.getFormattedValue();if(f.XStringUtils.isNullOrEmpty(k)&&d.getValueException()===f.ValueException.NORMAL){k=f.XDouble.convertToString(d.getDouble());}return k;}},getScaledValue:function(d,n,a){var c=n;if(f.isNull(c)||c.isUseFormattingFromDataCell()){if(d.getScalingFactor()===0&&f.notNull(a)&&!a.isUseFormattingFromDataCell()){c=a;}}var b;if(f.notNull(c)&&!c.isUseFormattingFromDataCell()){b=c.getNumericShift();}else{b=d.getScalingFactor();}if(!d.getValueException().isValidValue()&&d.getValueException()!==f.ValueException.MIXED_CURRENCIES_OR_UNITS){return 0;}try{return d.getDouble()*f.XMath.pow(10,b);}catch(t){return 0;}},guessFeedMembers:function(r,c,a){var b=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_COLUMN);var d=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BELLCURVE);var e=f.XString.isEqual(c,f.VizDefConstants.K_LINE);var g=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BAR);var h=f.XString.isEqual(c,f.VizDefConstants.K_SPLINE);var j=f.XString.isEqual(c,f.VizDefConstants.K_AREA);var k=f.XString.isEqual(c,f.VizDefConstants.K_PIE);var l=f.XString.isEqual(c,f.VizDefConstants.K_WORDCLOUD);var m=f.XString.isEqual(c,f.VizDefConstants.K_VARIPIE);var n=f.XString.isEqual(c,f.VizDefConstants.K_VARIWIDE);var o=f.XString.isEqual(c,f.VizDefConstants.K_SCATTER);var p=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BUBBLE);var q=f.XString.isEqual(c,f.VizDefConstants.K_PACKED_BUBBLE);var s=f.XString.isEqual(c,f.VizDefConstants.K_HEATMAP);var t=f.XString.isEqual(c,f.VizDefConstants.K_TREEMAP);var u=f.XString.isEqual(c,f.VizDefConstants.V_CHART_TYPE_BOXPLOT);var v=f.XString.isEqual(c,f.VizDefConstants.K_SOLID_GAUGE);var w=f.PrFactory.createStructure();var x=r.getCursorRowsAxis();var y=r.getCursorColumnsAxis();var z=w.putNewList(f.VizDefConstants.K_CATEGORY_AXIS);var A=w.putNewList(f.VizDefConstants.K_CATEGORY_AXIS2);var B=w.putNewList(f.VizDefConstants.K_VALUE_AXIS);var C=w.putNewList(f.VizDefConstants.K_VALUE_AXIS2);var D=w.putNewList(f.VizDefConstants.K_BUBBLE_WIDTH);var E=w.putNewList(f.VizDefConstants.K_WEIGHT);var F=w.putNewList(f.VizDefConstants.K_SIZE);var G=w.putNewList(f.VizDefConstants.K_TIME_AXIS);var H=w.putNewList(f.VizDefConstants.K_COLOR);var I=f.RsVizAxisExtractor.getDimensionStack(y);var J=f.RsVizAxisExtractor.getDimensionStack(x);var K=f.RsVizAxisExtractor.getMemberStack(y,I.size());if(J.size()>0){G.addString(J.get(J.size()-1));H.addString(J.get(J.size()-1));z.addString(J.get(J.size()-1));}if(I.size()>1){if(s){A.addString(I.get(I.size()-2));}else{H.addString(I.get(I.size()-2));}}if(e||g||h||d||b||j||a||v||u){var L=K.size();if(a&&K.size()>1){L--;C.addString(K.get(K.size()-1));}for(var i=0;i<L;i++){B.addString(K.get(i));}}else if(k||m||l||p||o||t||n||q){if(K.size()>0){E.addString(K.get(0));B.addString(K.get(0));F.addString(K.get(K.size()-1));}if(K.size()>1){C.addString(K.get(1));}if(K.size()>2){D.addString(K.get(2));}}else if(s){if(K.size()>0){H.addString(K.get(0));}}return w;},getDimensionStack:function(a){var r=f.XListOfString.create();a.setFieldValueCursorBeforeStart();a.setTupleElementCursorBeforeStart();a.setTupleCursorBeforeStart();if(a.hasNextTuple()){a.nextTuple();while(a.hasNextTupleElement()){a.nextTupleElement();if(a.hasNextFieldValue()){a.nextFieldValue();}r.add(a.getRsDimensionAtCurrentPosition().getName());if(a.getRsDimensionAtCurrentPosition().getDimensionType()===f.DimensionType.ACCOUNT){break;}}}a.setFieldValueCursorBeforeStart();a.setTupleElementCursorBeforeStart();a.setTupleCursorBeforeStart();return r;},getMemberStack:function(a,p){var r=f.XListOfString.create();a.setFieldValueCursorBeforeStart();a.setTupleElementCursorBeforeStart();a.setTupleCursorBeforeStart();while(a.hasNextTuple()){a.nextTuple();a.setTupleElementCursorBeforeStart();var t=0;while(a.hasNextTupleElement()&&t++<p){a.nextTupleElement();}if(a.hasNextFieldValue()){a.nextFieldValue();}r.add(a.getDimensionMemberName());}a.setFieldValueCursorBeforeStart();a.setTupleElementCursorBeforeStart();a.setTupleCursorBeforeStart();return r;},extractCustomFormatting:function(v,a){if(f.isNull(v)){return null;}var c=v.getStructureByKey(f.VizDefConstants.K_CUSTOM_FORMATTING);var p=v.getStructureByKey(f.VizDefConstants.K_PLACEHOLDER_2_ID);var m=f.isNull(a)?null:a.getListByKey(f.VizDefConstants.K_MEASURE_SYNC);if(f.isNull(c)){c=v.putNewStructure(f.VizDefConstants.K_CUSTOM_FORMATTING);}var b=c.getStructureByKey(f.VizDefConstants.K_PATTERN_FORMATTING);if(f.isNull(b)){b=c.putNewStructure(f.VizDefConstants.K_PATTERN_FORMATTING);}var d=c.getStructureByKey(f.VizDefConstants.K_COLOR_FORMATTING);if(f.isNull(d)){d=c.putNewStructure(f.VizDefConstants.K_COLOR_FORMATTING);}var u=f.XHashSetOfString.create();if(!v.getStructureByKey(f.VizDefConstants.K_CHART).getBooleanByKeyExt(f.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(f.notNull(m)){for(var h=0;h<m.size();h++){var e=m.getStructureAt(h);var j=e.getStructureByKey(f.VizDefConstants.K_ID);var k=j.getStringByKey(f.VizDefConstants.K_ID);if(!d.containsKey(k)){d.putStringNotNullAndNotEmpty(k,e.getStringByKey(f.VizDefConstants.K_COLOR));}if(!b.containsKey(k)){b.putStringNotNullAndNotEmpty(k,e.getStringByKey(f.VizDefConstants.K_PATTERN));}}}}else{var l=v.getStructureByKey(f.VizDefConstants.K_FEED_MEMBERS);var n=l.getKeysAsReadOnlyListOfString();for(var o=0;o<n.size();o++){var q=n.get(o);if(!f.XString.containsString(q,f.VizDefConstants.K_ERRORBAR_INFIX)){var r=l.getListByKey(q);for(var s=0;s<r.size();s++){d.remove(r.getStringAt(s));}}}b.clear();var t=v.getStructureByKey(f.VizDefConstants.K_USER_PREFERENCES);if(f.notNull(t)){var w=t.getStructureByKey(f.VizDefConstants.K_MEASURE);if(f.notNull(w)){var x=w.getListByKey(f.VizDefConstants.K_COLORS);if(f.notNull(x)){for(var g=0;g<x.size();g++){var y=x.getStructureAt(g);var z=y.getStructureByKey(f.VizDefConstants.K_ID);var A=z.getStringByKey(f.VizDefConstants.K_ID);d.putStringNotNullAndNotEmpty(A,y.getStringByKey(f.VizDefConstants.K_COLOR));b.putStringNotNullAndNotEmpty(A,y.getStringByKey(f.VizDefConstants.K_PATTERN));u.add(A);}}}}}if(f.notNull(p)){var B=p.getKeysAsReadOnlyListOfString();for(var i=0;i<B.size();i++){var C=B.get(i);var D=p.getStringByKey(C);if(d.containsKey(C)&&(!d.containsKey(D)||u.contains(C))){d.putString(D,d.getStringByKey(C));}if(b.containsKey(C)&&!b.containsKey(D)){b.putString(D,b.getStringByKey(C));}if(d.containsKey(D)&&(!d.containsKey(C)||u.contains(D))){d.putString(C,d.getStringByKey(D));}if(b.containsKey(D)&&!b.containsKey(C)){b.putString(C,b.getStringByKey(D));}}}return c;}};f.RsVizFeedTuple=function(){};f.RsVizFeedTuple.prototype=new f.XObject();f.RsVizFeedTuple.prototype._ff_c="RsVizFeedTuple";f.RsVizFeedTuple.createTuple=function(){var n=new f.RsVizFeedTuple();n.m_elements=f.XList.create();n.m_availableFeedTypes=f.XHashSetOfString.create();return n;};f.RsVizFeedTuple.prototype.m_elements=null;f.RsVizFeedTuple.prototype.m_availableFeedTypes=null;f.RsVizFeedTuple.prototype.m_numberFormattingInfo=null;f.RsVizFeedTuple.prototype.m_pattern=null;f.RsVizFeedTuple.prototype.m_color=null;f.RsVizFeedTuple.prototype.getPattern=function(){return this.m_pattern;};f.RsVizFeedTuple.prototype.getColor=function(){return this.m_color;};f.RsVizFeedTuple.prototype.releaseObject=function(){this.m_elements=f.XObjectExt.release(this.m_elements);this.m_availableFeedTypes=f.XObjectExt.release(this.m_availableFeedTypes);this.m_numberFormattingInfo=null;f.XObject.prototype.releaseObject.call(this);};f.RsVizFeedTuple.prototype.getMemberKeysForFeedsOtherThan=function(a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){if(!this.m_elements.get(i).isSelectedByString(a)){r.add(this.m_elements.get(i).getKey());}}return r;};f.RsVizFeedTuple.prototype.getMemberKeys=function(){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){r.add(this.m_elements.get(i).getKey());}return r;};f.RsVizFeedTuple.prototype.setNumberFormattingInfo=function(v){this.m_numberFormattingInfo=v;};f.RsVizFeedTuple.prototype.getNumberFormattingInfo=function(){return this.m_numberFormattingInfo;};f.RsVizFeedTuple.prototype.addElement=function(e){this.m_elements.add(e);this.m_availableFeedTypes.addAll(e.getFeedTypes());};f.RsVizFeedTuple.prototype.isTotal=function(){for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isTotal()){return true;}}return false;};f.RsVizFeedTuple.prototype.getPrettyDefaultText=function(){var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)||f.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){v.append("/");v.append(this.m_elements.get(i).getText());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.getDefaultLabel=function(a){var r=null;for(var i=0;i<this.m_elements.size();i++){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)||f.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){r=this.createVizLabel(i,a,r);}}return r;};f.RsVizFeedTuple.prototype.createVizLabel=function(i,a,p){var r=p;var c=this.m_elements.get(i);if(f.notNull(a)&&c.getParentIndex()>-1&&c.getParentIndex()<a.getTuplesCount()){r=a.getTupleAt(c.getParentIndex()).createVizLabel(i,a,r);}return f.RsVizLabel.create(c.getKey(),c.getText(),c.getFormattedText(),r,c.getDisplayLevel(),c.getDrillState());};f.RsVizFeedTuple.prototype.getFormattedDefaultText=function(){var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)||f.XCollectionUtils.hasElements(this.m_elements.get(i).getFeedTypes())){v.append("/");v.append(this.m_elements.get(i).getFormattedText());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.setPattern=function(p){this.m_pattern=p;};f.RsVizFeedTuple.prototype.setColor=function(c){this.m_color=c;};f.RsVizFeedTuple.prototype.getPrettyTextForFeed=function(a){var b=f.XListOfString.create();b.add(a);return this.getPrettyText(b);};f.RsVizFeedTuple.prototype.getPrettyText=function(a){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null;}var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByList(a)){v.append("/");v.append(this.m_elements.get(i).getText());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.getLabel=function(a,b){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null;}var r=null;for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByList(b)){r=this.createVizLabel(i,a,r);}}return r;};f.RsVizFeedTuple.prototype.getFormattedText=function(a){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null;}var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByList(a)){v.append("/");v.append(this.m_elements.get(i).getFormattedText());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.getPrettyTextExclude=function(a,b){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null;}var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByList(a)&&!this.m_elements.get(i).isSelectedByList(b)){v.append("/");v.append(this.m_elements.get(i).getText());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.getPrettyKeyText=function(a){if(!f.XCollectionUtils.hasElements(this.m_availableFeedTypes)){return null;}var v=f.XStringBuffer.create();for(var i=0;i<this.m_elements.size();i++){if(this.m_elements.get(i).isSelectedByList(a)){v.append("/");v.append(this.m_elements.get(i).getKey());}}var r=v.toString();if(f.XString.size(r)>1){return f.XString.substring(r,1,f.XString.size(r));}return null;};f.RsVizFeedTuple.prototype.toString=function(){return f.XStringUtils.concatenate3(this.m_elements.toString(),":::",this.m_availableFeedTypes.toString());};f.RsVizFeedTuple.prototype.getAvailableFeedTypes=function(){return this.m_availableFeedTypes;};f.RsVizFeedTuple.prototype.isSelectedByList=function(a){if(f.XCollectionUtils.hasElements(this.m_availableFeedTypes)&&!f.XCollectionUtils.hasElements(a)){return true;}for(var i=0;i<a.size();i++){if(this.m_availableFeedTypes.contains(a.get(i))){return true;}}return false;};f.RsVizFeedTuple.prototype.isSelectedByString=function(a){return f.XStringUtils.isNullOrEmpty(a)||this.m_availableFeedTypes.contains(a);};f.RsVizFeedTuple.prototype.getDate=function(a){for(var i=0;i<this.m_elements.size();i++){var d=this.m_elements.get(i).getDate(a);if(f.notNull(d)){return d;}}return null;};f.RsVizFeedTuple.prototype.getFormattedDate=function(){for(var i=0;i<this.m_elements.size();i++){var d=this.m_elements.get(i).getFormattedDate();if(f.notNull(d)){return d;}}return null;};f.RsVizFeedTuple.prototype.getDimensionTextsForFeeds=function(a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var c=this.m_elements.get(i);if(c.getDimensionMember()!==null&&c.getDimensionMember().getDimension()!==null&&c.isSelectedByList(a)&&!r.contains(c.getDimensionMember().getDimension().getName())){r.add(c.getDimensionMember().getDimension().getText());}}return r;};f.RsVizFeedTuple.prototype.getDimensionNamesForFeeds=function(a){var r=f.XListOfString.create();for(var i=0;i<this.m_elements.size();i++){var c=this.m_elements.get(i);if(c.getDimensionMember()!==null&&c.getDimensionMember().getDimension()!==null&&c.isSelectedByList(a)&&!r.contains(c.getDimensionMember().getDimension().getName())){r.add(c.getDimensionMember().getDimension().getName());}}return r;};f.RsVizFeedTuple.prototype.compareTo=function(o){if(f.isNull(o)){return 1;}var a=o;var s=f.XMath.min(this.m_elements.size(),a.m_elements.size());for(var i=0;i<s;i++){var c=this.m_elements.get(i).compareTo(a.m_elements.get(i));if(c!==0){return c;}}return 0;};f.RsVizFeedTuple.prototype.getFormattedValue=function(d){return f.RsVizAxisExtractor.getFormattedValue(d,this.getNumberFormattingInfo(),null);};f.RsVizFeedTuple.prototype.getDecimalPlaces=function(){return this.m_numberFormattingInfo.getMaxDecimalPlaces();};f.RsVizFeedTuple.prototype.getNumericShift=function(){return this.m_numberFormattingInfo.getNumericShift();};f.RsVizFeedTuple.prototype.getScaledValue=function(d){return f.RsVizAxisExtractor.getScaledValue(d,this.getNumberFormattingInfo(),null);};f.RsVizLabel=function(){};f.RsVizLabel.prototype=new f.XObject();f.RsVizLabel.prototype._ff_c="RsVizLabel";f.RsVizLabel.create=function(i,l,a,p,d,b){var n=new f.RsVizLabel();n.m_id=i;n.m_label=l;n.m_formattedLabel=a;n.m_parent=p;n.m_leafOrCollapsed=f.isNull(b)||b===f.DrillState.LEAF||b===f.DrillState.COLLAPSED||b===f.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED;n.m_displayLevel=d;if(f.notNull(p)){p.m_leafOrCollapsed=false;}return n;};f.RsVizLabel.prototype.m_id=null;f.RsVizLabel.prototype.m_label=null;f.RsVizLabel.prototype.m_formattedLabel=null;f.RsVizLabel.prototype.m_compoundId=null;f.RsVizLabel.prototype.m_compoundLabel=null;f.RsVizLabel.prototype.m_compoundFormattedLabel=null;f.RsVizLabel.prototype.m_leafOrCollapsed=false;f.RsVizLabel.prototype.m_displayLevel=0;f.RsVizLabel.prototype.m_parent=null;f.RsVizLabel.prototype.releaseObject=function(){this.m_id=null;this.m_label=null;this.m_formattedLabel=null;this.m_parent=null;this.m_compoundFormattedLabel=null;this.m_compoundId=null;this.m_compoundLabel=null;f.XObject.prototype.releaseObject.call(this);};f.RsVizLabel.prototype.getId=function(){return this.m_id;};f.RsVizLabel.prototype.getLabel=function(){return this.m_label;};f.RsVizLabel.prototype.getParent=function(){return this.m_parent;};f.RsVizLabel.prototype.getCompoundLabel=function(){if(f.isNull(this.m_compoundLabel)){if(f.notNull(this.m_parent)){this.m_compoundLabel=f.XStringUtils.concatenate3(this.m_parent.getCompoundLabel(),"/",this.m_label);}else{this.m_compoundLabel=this.m_label;}}return this.m_compoundLabel;};f.RsVizLabel.prototype.getCompoundFormattedLabel=function(){if(f.isNull(this.m_compoundFormattedLabel)){if(f.notNull(this.m_parent)){this.m_compoundFormattedLabel=f.XStringUtils.concatenate3(this.m_parent.getCompoundFormattedLabel(),"/",this.m_formattedLabel);}else{this.m_compoundFormattedLabel=this.m_formattedLabel;}}return this.m_compoundFormattedLabel;};f.RsVizLabel.prototype.getCompoundId=function(){if(f.isNull(this.m_compoundId)){if(f.notNull(this.m_parent)){this.m_compoundId=f.XStringUtils.concatenate3(this.m_parent.getCompoundId(),"/",this.m_id);}else{this.m_compoundId=this.m_id;}}return this.m_compoundId;};f.RsVizLabel.prototype.getFormattedLabel=function(){return this.m_formattedLabel;};f.RsVizLabel.prototype.isLeafOrCollapsed=function(){return this.m_leafOrCollapsed;};f.RsVizLabel.prototype.getDisplayLevel=function(){return this.m_displayLevel;};f.RsVizNumberFormattingInfo=function(){};f.RsVizNumberFormattingInfo.prototype=new f.XObject();f.RsVizNumberFormattingInfo.prototype._ff_c="RsVizNumberFormattingInfo";f.RsVizNumberFormattingInfo.createNumberFormat=function(n,m,a,s,u){var b=new f.RsVizNumberFormattingInfo();b.m_numericShift=n;b.m_minDecimalPlaces=m;b.m_maxDecimalPlaces=a;b.m_useFormattingFromDataCell=u;b.m_showSignAs=s;return b;};f.RsVizNumberFormattingInfo.prototype.m_numericShift=0;f.RsVizNumberFormattingInfo.prototype.m_minDecimalPlaces=0;f.RsVizNumberFormattingInfo.prototype.m_maxDecimalPlaces=0;f.RsVizNumberFormattingInfo.prototype.m_useFormattingFromDataCell=false;f.RsVizNumberFormattingInfo.prototype.m_showSignAs=null;f.RsVizNumberFormattingInfo.prototype.releaseObject=function(){this.m_showSignAs=null;f.XObject.prototype.releaseObject.call(this);};f.RsVizNumberFormattingInfo.prototype.getNumericShift=function(){return this.m_numericShift;};f.RsVizNumberFormattingInfo.prototype.getMinDecimalPlaces=function(){return this.m_minDecimalPlaces;};f.RsVizNumberFormattingInfo.prototype.getMaxDecimalPlaces=function(){return this.m_maxDecimalPlaces;};f.RsVizNumberFormattingInfo.prototype.isShowPlusSign=function(){return f.XStringUtils.isNotNullAndNotEmpty(this.m_showSignAs)&&f.XString.startsWith(this.m_showSignAs,"+");};f.RsVizNumberFormattingInfo.prototype.isUseFormattingFromDataCell=function(){return this.m_useFormattingFromDataCell;};f.RsVizNumberFormattingInfo.prototype.getShowSignAs=function(){return this.m_showSignAs;};f.RsVizTupleElement=function(){};f.RsVizTupleElement.prototype=new f.XObject();f.RsVizTupleElement.prototype._ff_c="RsVizTupleElement";f.RsVizTupleElement.createTupleElement=function(d,a,p,b,k,t,c,e,v,g,h,m){var n=new f.RsVizTupleElement();n.m_displayLevel=a;n.m_drillState=b;n.m_member=d;n.m_parentIndex=p;n.m_key=k;n.m_text=t;n.m_feedTypes=c;n.m_formattedValueList=e;n.m_valueList=v;n.m_valueTypeList=g;n.m_presentationTypeList=h;n.m_memberType=m;return n;};f.RsVizTupleElement.prototype.m_feedTypes=null;f.RsVizTupleElement.prototype.m_member=null;f.RsVizTupleElement.prototype.m_parentIndex=0;f.RsVizTupleElement.prototype.m_key=null;f.RsVizTupleElement.prototype.m_text=null;f.RsVizTupleElement.prototype.m_formattedValueList=null;f.RsVizTupleElement.prototype.m_valueList=null;f.RsVizTupleElement.prototype.m_valueTypeList=null;f.RsVizTupleElement.prototype.m_presentationTypeList=null;f.RsVizTupleElement.prototype.m_memberType=null;f.RsVizTupleElement.prototype.m_drillState=null;f.RsVizTupleElement.prototype.m_displayLevel=0;f.RsVizTupleElement.prototype.releaseObject=function(){this.m_member=null;this.m_key=null;this.m_text=null;this.m_feedTypes=f.XObjectExt.release(this.m_feedTypes);this.m_formattedValueList=f.XObjectExt.release(this.m_formattedValueList);this.m_valueList=f.XObjectExt.release(this.m_valueList);this.m_valueTypeList=f.XObjectExt.release(this.m_valueTypeList);this.m_presentationTypeList=f.XObjectExt.release(this.m_presentationTypeList);this.m_memberType=null;f.XObject.prototype.releaseObject.call(this);};f.RsVizTupleElement.prototype.getParentIndex=function(){return this.m_parentIndex;};f.RsVizTupleElement.prototype.getFormattedValueList=function(){return this.m_formattedValueList;};f.RsVizTupleElement.prototype.getValueTypeList=function(){return this.m_valueTypeList;};f.RsVizTupleElement.prototype.getPresentationTypeList=function(){return this.m_presentationTypeList;};f.RsVizTupleElement.prototype.getKey=function(){return this.m_key;};f.RsVizTupleElement.prototype.getFormattedText=function(){var p="";var s="";if(f.notNull(this.m_drillState)&&this.m_drillState!==f.DrillState.LEAF&&this.m_drillState!==f.DrillState.LEAF_UDH){if(this.m_displayLevel===0){p="<b>";s="</b>";}else if(this.m_displayLevel===1){p="<b><em>";s="</em></b>";}else if(this.m_displayLevel===2){p="<em>";s="</em>";}}return f.XStringUtils.concatenate3(p,this.m_text,s);};f.RsVizTupleElement.prototype.getText=function(){return this.m_text;};f.RsVizTupleElement.prototype.getDimensionMember=function(){return this.m_member;};f.RsVizTupleElement.prototype.toString=function(){return f.XStringUtils.concatenate5(this.m_feedTypes.toString(),"::<",this.m_key,">::",this.m_text);};f.RsVizTupleElement.prototype.isSelectedByList=function(a){var b=this.m_feedTypes.getKeysAsReadOnlyListOfString();if(f.XCollectionUtils.hasElements(this.m_feedTypes)&&!f.XCollectionUtils.hasElements(a)){return true;}for(var i=0;i<this.m_feedTypes.size();i++){if(a.contains(b.get(i))){return true;}}return false;};f.RsVizTupleElement.prototype.isSelectedByString=function(a){return f.XStringUtils.isNullOrEmpty(a)||this.m_feedTypes.containsKey(a);};f.RsVizTupleElement.prototype.getFeedTypes=function(){return this.m_feedTypes.getKeysAsReadOnlyListOfString();};f.RsVizTupleElement.prototype.isTotal=function(){return f.notNull(this.m_memberType)&&this.m_memberType.isTypeOf(f.MemberType.RESULT);};f.RsVizTupleElement.prototype.getDate=function(a){if(f.isNull(this.m_member)){return null;}for(var i=0;i<this.m_valueList.size();i++){var b=this.m_valueList.get(i);if(b.getValueType()===f.XValueType.DATE){return b;}if(a===0){return null;}var r=b.getStringRepresentation();if(a===2){r=f.XStringUtils.concatenate2(r,"01");}else if(a===3){r=f.XStringUtils.concatenate2(r,"0101");}try{if(f.XString.startsWith(r,"!")&&f.XString.size(r)===9){return f.XDate.createDateFromString(f.XString.substring(r,1,9),f.DateTimeFormat.SAP);}else if(f.XString.size(r)===8){return f.XDate.createDateFromString(r,f.DateTimeFormat.SAP);}else if(f.XString.startsWith(r,"!")&&f.XString.size(r)===11){return f.XDate.createDateFromString(f.XString.substring(r,1,11),f.DateTimeFormat.ISO);}else if(f.XString.size(r)===10){return f.XDate.createDateFromString(r,f.DateTimeFormat.ISO);}}catch(t){continue;}}return null;};f.RsVizTupleElement.prototype.getFormattedDate=function(){if(f.isNull(this.m_member)){return null;}for(var i=0;i<this.m_valueList.size();i++){var a=this.m_valueList.get(i);if(a.getValueType()===f.XValueType.DATE){return a.toString();}}return this.m_text;};f.RsVizTupleElement.prototype.compareTo=function(o){if(f.isNull(o)){return 1;}var a=o;var k=this.m_feedTypes.getKeysAsReadOnlyListOfString();var s=k.size();for(var i=0;i<s;i++){var b=k.get(i);var c=this.m_feedTypes.getByKey(b);var d=a.m_feedTypes.getByKey(b);if(f.isNull(d)){return 1;}var e=c.getInteger()-d.getInteger();if(e!==0){return e;}}return f.XString.isEqual(this.getKey(),a.getKey())?0:1;};f.RsVizTupleElement.prototype.getDrillState=function(){return this.m_drillState;};f.RsVizTupleElement.prototype.getDisplayLevel=function(){return this.m_displayLevel;};f.RsVizFrameRenderer=function(){};f.RsVizFrameRenderer.prototype=new f.XObject();f.RsVizFrameRenderer.prototype._ff_c="RsVizFrameRenderer";f.RsVizFrameRenderer.create=function(){return new f.RsVizFrameRenderer();};f.RsVizFrameRenderer.prototype.render=function(t,r){var s=f.PrFactory.createStructure();var v=r.getQueryModel().getVizManager().getVizDef();if(f.notNull(v)&&v.containsKey(f.VizDefConstants.K_CHART)&&r.getAvailableDataCellCount()>0){s.putString("test","testValue");}s.putString("test2","testValue2");return s;};f.RsHiChartVizUserPrefrence={create:function(){return new f.RsHiChartVizUserPrefrence();},userPrefrence:function(t,u,c){if(!f.XString.isEqual(c,f.VizDefConstants.K_SOLID_GAUGE)){var a=u.getStructureByKey(f.VizDefConstants.K_DATA_LABEL);if(f.notNull(a)){var b=a.getStructureByKey(f.VizDefConstants.K_STYLE);var d=b.getStringByKey(f.VizDefConstants.K_COLOR);var e=b.getStringByKey(f.VizDefConstants.K_FONT_WEIGHT);var g=b.getStringByKey(f.VizDefConstants.K_FONT_SIZE);var p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);if(f.notNull(p)){var h=p.getStructureByKey(c);if(f.notNull(h)){var i=h.getStructureByKey(f.VizDefConstants.K_DATA_LABELS);var y=t.getListByKey(f.VizDefConstants.K_Y_AXIS);if(f.notNull(y)){var j=y.getStructureAt(0);if(f.notNull(j)){if(j.containsKey(f.VizDefConstants.K_STACK_LABELS)){var s=j.putNewStructure(f.VizDefConstants.K_STACK_LABELS);s.putBoolean(f.VizDefConstants.K_ENABLED,true);var k=s.putNewStructure(f.VizDefConstants.K_STYLE);if(f.notNull(d)){k.putString(f.VizDefConstants.K_COLOR,d);k.putString(f.VizDefConstants.K_FILL,d);}k.putString(f.VizDefConstants.K_FONT_WEIGHT,e);k.putString(f.VizDefConstants.K_FONT_SIZE,g);}}}if(f.notNull(i)){var l=i.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(l)){if(f.notNull(d)){l.putString(f.VizDefConstants.K_COLOR,d);l.putString(f.VizDefConstants.K_FILL,d);}l.putString(f.VizDefConstants.K_FONT_WEIGHT,e);l.putString(f.VizDefConstants.K_FONT_SIZE,g);}}}}}var m=u.getStructureByKey(f.VizDefConstants.K_TITLE);if(f.notNull(m)){var n=m.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,true);var o=t.getStructureByKey(f.VizDefConstants.K_TITLE);if(f.notNull(o)){if(n===false){o.putString(f.VizDefConstants.K_TEXT,"");}var q=m.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(q)){o.put(f.VizDefConstants.K_STYLE,q);}}}var r=u.getStructureByKey(f.VizDefConstants.K_SUB_TITLE);if(f.notNull(r)){var v=r.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,true);var w=t.getStructureByKey(f.VizDefConstants.K_SUBTITLE);if(f.notNull(w)){if(v===false){w.putString(f.VizDefConstants.K_TEXT,"");}var x=r.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(x)){w.put(f.VizDefConstants.K_STYLE,x);}}}var z=t.getByKey(f.VizDefConstants.K_X_AXIS);var A=f.notNull(z)&&z.isList()?z.asList():null;var B=f.notNull(z)&&z.isStructure()?z.asStructure():f.XCollectionUtils.hasElements(A)?A.getStructureAt(0):null;var C=u.getStructureByKey(f.VizDefConstants.K_GENERAL);if(f.notNull(C)){var D=C.getStructureByKey(f.VizDefConstants.K_AXIS_LABEL);if(f.notNull(D)){if(f.notNull(B)){var E=B.getStructureByKey(f.VizDefConstants.K_LABELS);if(f.isNull(E)){E=B.putNewStructure(f.VizDefConstants.K_LABELS);}var F=D.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(F)){E.put(f.VizDefConstants.K_STYLE,F);}}}}var G=t.getStructureByKey(f.VizDefConstants.K_LEGEND);if(f.notNull(G)){var H=u.getStructureByKey(f.VizDefConstants.K_LEGEND);if(f.notNull(H)){var I=H.getStructureByKey(f.VizDefConstants.K_LABEL);if(f.notNull(I)){var J=I.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(J)){G.put(f.VizDefConstants.K_ITEM_STYLE,J);}}}}}return t;}};f.RsHiChartVizUtils={create:function(){return new f.RsHiChartVizUtils();},chartTitleBuilder:function(t,c,a){if(f.notNull(c)){var b=t.putNewStructure(f.VizDefConstants.K_TITLE);b.putString(f.VizDefConstants.K_TEXT,c);b.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_LEFT);}if(f.notNull(a)){var s=t.putNewStructure(f.VizDefConstants.K_SUBTITLE);s.putString(f.VizDefConstants.K_TEXT,a);s.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_LEFT);}},chartLegendBuilder:function(t){var l=t.putNewStructure(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_ENABLED,true);l.putInteger(f.VizDefConstants.K_SYMBOL_RADIUS,0);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_VERTICAL);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_RIGHT);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);var a=l.putNewStructure(f.VizDefConstants.K_ITEM_STYLE);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");a.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_NORMAL);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");},chartPlotBuilder:function(t,c,p){var i=true;if(f.notNull(p)&&p.hasElements()){var d=p.getStructureByKey(f.VizDefConstants.K_DATA_LABEL);i=d.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,false);}var a=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var b=a.putNewStructure(f.VizDefConstants.K_SERIES);b.putInteger(f.VizDefConstants.K_CROP_THRESHOLD,1000);var e=a.putNewStructure(c);e.putBoolean(f.VizDefConstants.K_GROUPING,true);var g=e.putNewStructure(f.VizDefConstants.K_DATA_LABELS);g.putBoolean(f.VizDefConstants.K_ENABLED,i);g.putString(f.VizDefConstants.K_FORMAT,"{point.yFormatted} ");var h=g.putNewStructure(f.VizDefConstants.K_STYLE);h.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_FONT_WEIGHT_BOLD);h.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");h.putString(f.VizDefConstants.K_FONT_SIZE,"12px");h.putString(f.VizDefConstants.K_COLOR,"rgb(88,89,91)");},checkShowLegend:function(v,t,c,i){var p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);var a=p.getStructureByKey(c);a.putBoolean(f.VizDefConstants.K_SHOW_IN_LEGEND,i);var l=t.getStructureByKey(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_ENABLED,i);if(f.isNull(v)){return;}var b=v.getStructureByKey(f.VizDefConstants.K_CHART);if(f.isNull(b)){return;}var d=false;var e=i;var g=b.getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(g)){var h=g.getStructureByKey(f.VizDefConstants.K_LEGEND_GROUP);if(f.notNull(h)){if(h.getElementTypeByKey(f.VizDefConstants.K_VISIBLE)===f.PrElementType.BOOLEAN){d=h.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,i);}else if(h.getElementTypeByKey(f.VizDefConstants.K_VISIBLE)===f.PrElementType.STRING){d=f.XBoolean.convertFromStringWithDefault(h.getStringByKey(f.VizDefConstants.K_VISIBLE),i);}else{d=i;}var j=h.getBooleanByKeyExt(f.VizDefConstants.K_RESPONSIVE,true);e=d&&!j||i&&j;l.putBoolean(f.VizDefConstants.K_ENABLED,e);}}a.putBoolean(f.VizDefConstants.K_SHOW_IN_LEGEND,i);},vizProcessor:function(v,c,t,a){var b=null;var d=null;var e;var l;var g;var h;var p=f.PrFactory.createStructure();if(f.notNull(v)){var i=v.getStructureByKey(f.VizDefConstants.K_CHART);var j=t.putNewStructure(f.VizDefConstants.K_LEGEND);if(f.notNull(i)){b=i.getStringByKey(f.VizDefConstants.K_TITLE);d=i.getStringByKey(f.VizDefConstants.K_SUB_TITLE);f.RsHiChartVizUtils.chartTitleBuilder(t,b,d);var k=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var m=k.putNewStructure(a);var n=k.putNewStructure(f.VizDefConstants.K_SERIES);n.putString(f.VizDefConstants.K_BORDER_COLOR,f.VizDefConstants.K_TRANSPARENT);var o=m.putNewStructure(f.VizDefConstants.K_DATA_LABELS);e=i.getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(e)){var q=e.getStructureByKey(f.VizDefConstants.K_GENERAL);if(f.notNull(q)){g=q.getStructureByKey(f.VizDefConstants.K_LAYOUT);if(f.notNull(g)){var s=g.getIntegerByKey(f.VizDefConstants.K_PADDING_BOTTOM);c.putInteger(f.VizDefConstants.K_SPACING_BOTTOM,s);}else{c.putInteger(f.VizDefConstants.K_SPACING_BOTTOM,0);}}l=e.getStructureByKey(f.VizDefConstants.K_LEGEND);if(f.notNull(l)){j=t.putNewStructure(f.VizDefConstants.K_LEGEND);var r=l.getStructureByKey(f.VizDefConstants.K_LABEL);if(f.notNull(r)){var u=r.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.notNull(u)){var w=u.getStringByKey(f.VizDefConstants.K_FONT_FAMILY);var x=u.getStringByKey(f.VizDefConstants.K_FONT_SIZE);var y=u.getStringByKey(f.VizDefConstants.K_FONT_WEIGHT);var z=j.putNewStructure(f.VizDefConstants.K_ITEM_STYLE);z.putString(f.VizDefConstants.K_FONT_FAMILY,w);z.putString(f.VizDefConstants.K_FONT_WEIGHT,y);z.putString(f.VizDefConstants.K_FONT_SIZE,x);}}}h=e.getStructureByKey(f.VizDefConstants.K_LEGEND_GROUP);if(f.notNull(h)){var A=h.getStructureByKey(f.VizDefConstants.K_LAYOUT);if(f.notNull(A)){var B=A.getStringByKey(f.VizDefConstants.K_POSITION);j.putString(f.VizDefConstants.K_VERTICAL_ALIGN,B);}}p=e.getStructureByKey(f.VizDefConstants.K_PLOT_AREA);if(f.notNull(p)){var C=p.getStructureByKey(f.VizDefConstants.K_DATA_LABEL);if(f.notNull(C)){o=f.RsHiChartVizUtils.datalabelPloter(C,o);}var D=n.putNewStructure(f.VizDefConstants.K_DATA_LABELS);D.putString(f.VizDefConstants.K_FORMAT,"{point.yFormatted}");}}}}else{l=t.putNewStructure(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_ENABLED,true);c.putInteger(f.VizDefConstants.K_SPACING_TOP,0);f.RsHiChartVizUtils.chartTitleBuilder(t,b,d);f.RsHiChartVizUtils.chartLegendBuilder(t);f.RsHiChartVizUtils.chartPlotBuilder(t,a,p);}},datalabelPloter:function(v,d){var i=v.getBooleanByKeyExt(f.VizDefConstants.K_VISIBLE,true);var a=v.getBooleanByKeyExt(f.VizDefConstants.K_IS_HIDDEN_WHEN_OVERLAP,true);var b=v.getStructureByKey(f.VizDefConstants.K_STYLE);var c=b.getStringByKey(f.VizDefConstants.K_FONT_SIZE);var e=b.getStringByKey(f.VizDefConstants.K_FONT_WEIGHT);var g=b.getStringByKey(f.VizDefConstants.K_FONT_FAMILY);var h=b.getStringByKey(f.VizDefConstants.K_COLOR);d.putBoolean(f.VizDefConstants.K_ENABLED,i);d.putBoolean(f.VizDefConstants.K_HIDE_WHEN_OVERLAP,a);var j=d.putNewStructure(f.VizDefConstants.K_STYLE);j.putString(f.VizDefConstants.K_FONT_FAMILY,g);j.putString(f.VizDefConstants.K_FONT_SIZE,c);j.putString(f.VizDefConstants.K_FONT_WEIGHT,e);if(!f.XString.isEqual(h,null)){j.putString("fill",h);j.putString(f.VizDefConstants.K_COLOR,h);}j.putString("textOutline","0px");return d;},addColorGradient:function(g,v,t){if(f.notNull(v)){var c=v.getStructureByKey(f.VizDefConstants.K_COLOR_SCHEME);var a=g.getStructureByKey(f.VizDefConstants.K_COLOR_SYNC);if(!v.getStructureByKey(f.VizDefConstants.K_CHART).getBooleanByKeyExt(f.VizDefConstants.K_IS_EXCLUDE_COLOR_SYNC,false)){if(f.XCollectionUtils.hasElements(c)){var p=c.getStructureByKey(f.VizDefConstants.K_PALETTE_DESC);if(f.notNull(p)){var b=t.putNewStructure(f.VizDefConstants.K_PALETTE);var k=b.putNewList(f.VizDefConstants.K_GRADIENT_KEYS);var d=p.getStructureByKey(f.VizDefConstants.K_GRADIENT);if(f.notNull(d)){var e=d.getKeysAsReadOnlyListOfString();var l=f.XList.create();for(var y=0;y<e.size();y++){l.add(f.XDoubleValue.create(f.XDouble.convertFromString(e.get(y))));}l.sortByComparator(new f.XComparatorDouble());for(var h=0;h<l.size();h++){k.addDouble(l.get(h).getDouble());}b.put(f.VizDefConstants.K_GRADIENT,d);}}}}var i;var j;var m=null;var n=v.getStructureByKey(f.VizDefConstants.K_CHART);if(f.notNull(n)){var o=n.getListByKey(f.VizDefConstants.K_BINDINGS);for(var I=0;I<o.size();I++){i=o.getStructureAt(I);if(f.XString.isEqual(i.getStringByKey(f.VizDefConstants.K_FEED),f.VizDefConstants.K_COLOR)){var s=i.getListByKey(f.VizDefConstants.K_SOURCE);if(s.size()>0){m=s.getStructureAt(0).getStringByKey(f.VizDefConstants.K_ID);}break;}}var q=g.getStructureByKey(f.VizDefConstants.K_STORY_WIDE_SETTINGS);if(f.notNull(q)){var r=q.getListByKey(f.VizDefConstants.K_CUSTOM_COLOR_PALETTES);if(f.notNull(r)){var u=r.getStructureAt(0).getStructureByKey(f.VizDefConstants.K_GRADIENT);var w=u.getKeysAsReadOnlyListOfString();var x=f.PrFactory.createList();for(var z=0;z<w.size();z++){var A=f.PrFactory.createList();A.addString(w.get(z));A.addString(u.getStringByKey(w.get(z)));x.add(A);}}}if(f.notNull(a)){j=a.getStructureByKey(m);if(f.notNull(j)){var B=j.getStructureByKey(f.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);t.put(f.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS,B);}}}}}};f.RsHiChartVizUtilsCorrelation={create:function(){return new f.RsHiChartVizUtilsCorrelation();},renderValueAxis:function(a,b,A){var c=a.putNewStructure(f.VizDefConstants.K_TITLE);a.putInteger(f.VizDefConstants.K_GRIDLINE_WIDTH,0);if(f.isNull(b)){return;}a.putBoolean(f.VizDefConstants.K_VISIBLE,b.getBooleanByKey(f.VizDefConstants.K_VISIBLE));var d=b.getStructureByKey(f.VizDefConstants.K_AXIS_LINE);a.putInteger(f.VizDefConstants.K_LINE_WIDTH,d.getBooleanByKey(f.VizDefConstants.K_VISIBLE)?3:0);a.putString(f.VizDefConstants.K_LINE_COLOR,"#bbbdbf");var e=b.getStructureByKey(f.VizDefConstants.K_AXIS_TICK);var t=0;if(f.notNull(e)&&e.getBooleanByKey(f.VizDefConstants.K_VISIBLE)){t=e.getIntegerByKey(f.VizDefConstants.K_SIZE);}a.putInteger(f.VizDefConstants.K_TICK_LENGTH,t);a.putString(f.VizDefConstants.K_TICK_COLOR,"rgb(166, 168, 171)");var g=b.getStructureByKey(f.VizDefConstants.K_LABEL);var h=a.putNewStructure(f.VizDefConstants.K_LABEL);h.putBoolean(f.VizDefConstants.K_ENABLED,g.getBooleanByKey(f.VizDefConstants.K_VISIBLE));var l=a.putNewStructure(f.VizDefConstants.K_STYLE);var i=g.getStructureByKey(f.VizDefConstants.K_STYLE);l.putString(f.VizDefConstants.K_COLOR,i.getStringByKey(f.VizDefConstants.K_COLOR));l.putString(f.VizDefConstants.K_FONT_FAMILY,g.getStringByKey(f.VizDefConstants.K_FONT_FAMILY));l.putString(f.VizDefConstants.K_FONT_SIZE,g.getStringByKey(f.VizDefConstants.K_FONT_SIZE));var j=b.getStructureByKey(f.VizDefConstants.K_TITLE);c.putBoolean(f.VizDefConstants.K_ENABLED,j.getBooleanByKey(f.VizDefConstants.K_VISIBLE));if(A){c.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_MIDDLE);}var k=c.putNewStructure(f.VizDefConstants.K_STYLE);var m=j.getStructureByKey(f.VizDefConstants.K_STYLE);k.putString(f.VizDefConstants.K_COLOR,"#000000");k.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.K_BOLD);l.putString(f.VizDefConstants.K_COLOR,m.getStringByKey(f.VizDefConstants.K_COLOR));l.putString(f.VizDefConstants.K_FONT_FAMILY,m.getStringByKey(f.VizDefConstants.K_FONT_FAMILY));l.putString(f.VizDefConstants.K_FONT_SIZE,m.getStringByKey(f.VizDefConstants.K_FONT_SIZE));},legendStyler:function(t){var l=t.putNewStructure(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_ENABLED,true);l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);l.putInteger(f.VizDefConstants.K_SYMBOL_RADIUS,0);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_HORIZONTAL);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var a=l.putNewStructure(f.VizDefConstants.K_ITEM_STYLE);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");a.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_NORMAL);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");}};f.RsHiChartVizUtilsHeatmap={create:function(){return new f.RsHiChartVizUtilsHeatmap();},rendrerHeatmap:function(t,c,v,g){var p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);if(f.isNull(p)){p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);}var a=p.getStructureByKey(c);a.putBoolean(f.VizDefConstants.K_COLOR_BY_POINT,false);var b=t.getStructureByKey(f.VizDefConstants.K_CHART);b.putString(f.VizDefConstants.K_TYPE,c);var i=true;b.putBoolean(f.VizDefConstants.K_INVERTED,i);var d=t.putNewStructure(f.VizDefConstants.K_COLOR_AXIS);var e=t.getStructureByKey(f.VizDefConstants.K_PALETTE);if(f.notNull(e)){var h=f.PrFactory.createList();var j=0;var k="#FFFFFF";var l=e.getListByKey(f.VizDefConstants.K_GRADIENT_KEYS);var m=e.getStructureByKey(f.VizDefConstants.K_GRADIENT);for(var n=0;n<l.size();n++){var o=f.PrFactory.createList();j=l.getDoubleAt(n)/100;k=m.getStringByKey(f.XDouble.convertToString(l.getDoubleAt(l.size()-1-n)));o.addDouble(j);o.addString(k);h.add(o);}d.put(f.VizDefConstants.K_STOPS,h);}var q=f.XString.isEqual(c,f.VizDefConstants.K_HEATMAP);if(f.notNull(g)){var r=f.PrFactory.createStructure();var s=0;var u=0;var w="#FFFFFF";var x=g.getListByKey(f.VizDefConstants.K_THRESHOLDS);if(f.notNull(x)&&q){var y=f.PrFactory.createList();var z=1;if(t.containsKey(f.VizDefConstants.K_MAX_ELEMENT)){z=f.XMath.max(f.XDouble.convertToInt(t.getDoubleByKey(f.VizDefConstants.K_MAX_ELEMENT)),f.XDouble.convertToInt(t.getDoubleByKey(f.VizDefConstants.K_MAX_ELEMENT))*-1);}for(var A=0;A<x.size();A++){r=x.getStructureAt(A);var B=f.PrFactory.createList();s=r.getDoubleByKey(f.VizDefConstants.K_LOW);w=r.getStringByKey(f.VizDefConstants.K_COLOR);u=s/z;B.addDouble(u);B.addString(w);y.add(B);}d.put(f.VizDefConstants.K_STOPS,y);}}var C=t.getStructureByKey(f.VizDefConstants.K_LEGEND);var D=f.PrFactory.createList();var E=f.PrFactory.createStructure();var F=f.PrFactory.createList();var G=f.PrFactory.createStructure();if(q){D=t.getListByKey(f.VizDefConstants.K_X_AXIS);if(f.isNull(D)){D=t.putNewList(f.VizDefConstants.K_X_AXIS);E=D.addNewStructure();}else{E=D.getStructureAt(0);}F=t.getListByKey(f.VizDefConstants.K_Y_AXIS);if(f.isNull(F)){F=t.putNewList(f.VizDefConstants.K_Y_AXIS);G=F.addNewStructure();}else{G=F.getStructureAt(0);}}var H=a.getStructureByKey(f.VizDefConstants.K_DATA_LABELS);var I=G.putNewStructure(f.VizDefConstants.K_TITLE);var J=E.putNewStructure(f.VizDefConstants.K_TITLE);I.putString(f.VizDefConstants.K_TEXT,"");J.putString(f.VizDefConstants.K_TEXT,"");var K="#a0f3ff";var L="#003c6b";var M=true;if(f.notNull(v)){var N=v.getStructureByKey(f.VizDefConstants.K_COLOR_SCHEME);if(f.notNull(N)){var O=N.getListByKey(f.VizDefConstants.K_PALETTE_COLORS);if(f.notNull(O)){if(O.size()>0){L=O.getStringAt(0);K=O.getStringAt(O.size()-1);}}}var P=v.getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(P)){var Q=P.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS2);if(f.notNull(Q)){E=f.RsHiChartUtils.axisPloter(Q,E,c,true);}var R=P.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS);if(f.notNull(R)){G=f.RsHiChartUtils.axisPloter(R,G,c,true);}var S=P.getStructureByKey(f.VizDefConstants.K_PLOT_AREA);if(f.notNull(S)){H.putBoolean(f.VizDefConstants.K_ENABLED,M);}}d.putString(f.VizDefConstants.K_MIN_COLOR,K);d.putString(f.VizDefConstants.K_MAX_COLOR,L);d.putBoolean(f.VizDefConstants.K_REVERSED,false);}else{var T=G.putNewStructure(f.VizDefConstants.K_LABELS);var U=T.putNewStructure(f.VizDefConstants.K_STYLE);U.putString(f.VizDefConstants.K_FONT_SIZE,"13px");U.putString(f.VizDefConstants.K_FILL,"rgb(166, 168, 171)");U.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_FONT_WEIGHT_NORMAL);E.putString(f.VizDefConstants.K_LINE_COLOR,"#FFFFFF");var V=E.putNewStructure(f.VizDefConstants.K_LABELS);var W=V.putNewStructure(f.VizDefConstants.K_STYLE);W.putString(f.VizDefConstants.K_FONT_SIZE,"13px");W.putString(f.VizDefConstants.K_FILL,"rgb(166, 168, 171)");W.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_FONT_WEIGHT_NORMAL);d.putString(f.VizDefConstants.K_MIN_COLOR,K);d.putString(f.VizDefConstants.K_MAX_COLOR,L);d.putInteger(f.VizDefConstants.K_MIN,1);}var X=f.XString.isEqual(c,f.VizDefConstants.K_TREEMAP);if(X){a.putString(f.VizDefConstants.K_TYPE,c);var Y=a.putNewList(f.VizDefConstants.K_LEVELS);var Z=Y.addNewStructure();Z.putInteger(f.VizDefConstants.K_LEVEL,1);Z.putInteger(f.VizDefConstants.K_BORDER_WIDTH,6);var $=Z.putNewStructure(f.VizDefConstants.K_DATA_LABELS);$.putBoolean(f.VizDefConstants.K_ENABLED,true);$.putString(f.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/>");$.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_LEFT);$.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var _=$.putNewStructure(f.VizDefConstants.K_STYLE);_.putString(f.VizDefConstants.K_FONT_SIZE,"14px");var a1=Y.addNewStructure();a1.putInteger(f.VizDefConstants.K_LEVEL,2);var b1=a1.putNewStructure(f.VizDefConstants.K_DATA_LABELS);b1.putBoolean(f.VizDefConstants.K_ENABLED,true);b1.putString(f.VizDefConstants.K_FORMAT,"<div>{point.name}</div><br/><div>{point.valueFormatted}</div >");C.putInteger(f.VizDefConstants.K_Y,25);}H.putBoolean(f.VizDefConstants.K_ENABLED,M);H.putBoolean(f.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);var c1=H.putNewStructure(f.VizDefConstants.K_STYLE);c1.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");c1.putString(f.VizDefConstants.K_FONT_SIZE,"10px");c1.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_FONT_WEIGHT_NORMAL);c1.putString(f.VizDefConstants.K_FILL,"black");c1.putString(f.VizDefConstants.K_COLOR,"black");c1.putString(f.VizDefConstants.K_TEXT_OUTLINE,"0px");H.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);C.putBoolean(f.VizDefConstants.K_ENABLED,true);C.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_VERTICAL);C.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_RIGHT);C.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_MIDDLE);C.putInteger("x",15);var d1=C.putNewStructure(f.VizDefConstants.K_STYLE);d1.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");return t;}};f.RsHiChartVizUtilsSimple={create:function(){return new f.RsHiChartVizUtilsSimple();},legendStyler:function(t){var l=t.getStructureByKey(f.VizDefConstants.K_LEGEND);if(f.notNull(l)){l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);l.putInteger(f.VizDefConstants.K_SYMBOL_RADIUS,0);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_HORIZONTAL);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);l.putInteger(f.VizDefConstants.K_Y,20);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var a=l.putNewStructure(f.VizDefConstants.K_ITEM_STYLE);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");a.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_NORMAL);a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");}},plotOptionChart:function(y,c,s,p,a,b){var d=y.putNewStructure(f.VizDefConstants.K_TITLE);d.putString(f.VizDefConstants.K_TEXT,"");y.putInteger(f.VizDefConstants.K_GRID_LINE_WIDTH,0);var e;e=p.getStructureByKey(c);if(a===1||f.isNull(e)){e=p.putNewStructure(c);}if(f.XStringUtils.isNotNullAndNotEmpty(s)&&!f.XString.isEqual(s,"null")){e.putString(f.VizDefConstants.K_STACKING,s);}e.putInteger(f.VizDefConstants.K_Y_AXIS,a);e.putBoolean(f.VizDefConstants.K_COLOR_BY_POINT,false);e.putDouble(f.VizDefConstants.K_POINT_PADDING,0);if(f.XString.isEqual(f.VizDefConstants.V_CHART_TYPE_BOXPLOT,c)){e.putString(f.VizDefConstants.K_FILL_COLOR,b);y.putInteger(f.VizDefConstants.K_TICK_AMOUNT,4);}var g=e.getStructureByKey(f.VizDefConstants.K_DATA_LABELS);if(f.isNull(g)){g=e.putNewStructure(f.VizDefConstants.K_DATA_LABELS);}f.RsHiChartVizUtilsSimple.dataLabelBuilder(g);},addReferenceLine:function(v,a,b,c,r,d){var h=false;var e=v.getStructureByKey(f.VizDefConstants.K_ANALYTIC_OBJECTS);if(f.notNull(e)){var g=e.getListByKey(f.VizDefConstants.K_REFERENCELINES);if(f.notNull(g)){if(g.hasElements()){h=true;for(var i=0;i<g.size();i++){var j=g.getStructureAt(i);var k=j.getListByKey(f.VizDefConstants.K_MARKERS);var l=j.getStringByKey(f.VizDefConstants.K_FEED);for(var q=0;q<k.size();q++){var m=k.getStructureAt(q);var p=0;if(m.containsKey(f.VizDefConstants.K_DYNAMIC_VALUE)){var n=m.getStructureByKey(f.VizDefConstants.K_DYNAMIC_VALUE);var o=n.getStringByKey(f.VizDefConstants.K_AGGREGATION_TYPE);var s=n.getStructureByKey(f.VizDefConstants.K_MEASURE).getStructureByKey(f.VizDefConstants.K_ID).getStringByKey(f.VizDefConstants.K_ID);var t=c.getTupleIndexForMemberName(s);if(!f.XCollectionUtils.hasElements(t)){var u=r.getTupleIndexForMemberName(s);if(f.XCollectionUtils.hasElements(u)){p=f.RsHiChartVizUtilsSimple.getAggregateValue(u,c,o,false,d);}}else{p=f.RsHiChartVizUtilsSimple.getAggregateValue(t,r,o,true,d);}}else{p=f.RsHiChartRenderer.getDoubleValueExtended(m,f.VizDefConstants.K_VALUE,0);}var w=f.VizDefConstants.V_BLACK;if(m.hasStringByKey(f.VizDefConstants.K_COLOR)){w=m.getStringByKey(f.VizDefConstants.K_COLOR);}var x=m.getStringByKey("belowColor");var y=m.getStringByKey("aboveColor");var z=m.getStructureByKey(f.VizDefConstants.K_LABEL);var A=z.getStringByKey(f.VizDefConstants.K_TEXT);var B=z.getStructureByKey(f.VizDefConstants.K_STYLE);if(f.XString.isEqual(f.VizDefConstants.K_VALUE_AXIS,l)){f.RsHiChartVizUtilsSimple.ploLineBuilder(a,p,x,y,w,A,B);}if(f.XString.isEqual(f.VizDefConstants.K_VALUE_AXIS2,l)){f.RsHiChartVizUtilsSimple.ploLineBuilder(b,p,x,y,w,A,B);}}}}}}return h;},ploLineBuilder:function(y,V,b,a,c,t,s){var d="#000000";var p=y.containsKey(f.VizDefConstants.K_PLOT_LINES)?y.getListByKey(f.VizDefConstants.K_PLOT_LINES):y.putNewList(f.VizDefConstants.K_PLOT_LINES);var e=p.addNewStructure();if(f.notNull(c)){d=c;}e.putString(f.VizDefConstants.K_COLOR,d);var g=e.putNewStructure(f.VizDefConstants.K_LABEL);if(f.notNull(t)){g.putString(f.VizDefConstants.K_TEXT,t);}else{g.putString(f.VizDefConstants.K_TEXT,f.XDouble.convertToString(V));}var h=g.putNewStructure(f.VizDefConstants.K_STYLE);h.putString(f.VizDefConstants.K_COLOR,s.getStringByKey(f.VizDefConstants.K_COLOR));e.putString(f.VizDefConstants.K_DASH_STYLE,f.VizDefConstants.K_SHORT_DOT);g.putInteger(f.VizDefConstants.K_ROTATION,0);e.putDouble(f.VizDefConstants.K_VALUE,V);e.putInteger(f.VizDefConstants.K_WIDTH,2);var i=y.containsKey(f.VizDefConstants.K_PLOT_BANDS)?y.getListByKey(f.VizDefConstants.K_PLOT_BANDS):y.putNewList(f.VizDefConstants.K_PLOT_BANDS);if(f.notNull(b)){var j=i.addNewStructure();j.putString(f.VizDefConstants.K_COLOR,f.RsHiChartVizUtilsSimple.setColorAlpha(b,0.2));j.putDouble(f.VizDefConstants.K_FROM,0);j.putDouble(f.VizDefConstants.K_TO,V);}if(f.notNull(a)){var k=i.addNewStructure();k.putString(f.VizDefConstants.K_COLOR,f.RsHiChartVizUtilsSimple.setColorAlpha(a,0.2));k.putDouble(f.VizDefConstants.K_FROM,V);k.putDouble(f.VizDefConstants.K_TO,V*100);}},setColorAlpha:function(c,a){var n=null;var b=f.XDouble.convertToString(a);if(f.notNull(c)){if(f.XString.startsWith(c,"rgb")){var e=f.XString.indexOf(c,")");if(e>0){n=f.XString.replace(c,"rgb","rgba");var d=f.XStringUtils.concatenate3(",",b,")");n=f.XString.replace(n,")",d);}}else if(f.XString.isEqual(c,"transparent")){n=f.XStringUtils.concatenate3("rgba(255,255,255,",b,")");}else{n=c;}}return n;},dataLabelBuilder:function(d){var a=d.putNewStructure(f.VizDefConstants.K_STYLE);d.putBoolean(f.VizDefConstants.K_ENABLED,true);d.putBoolean(f.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);d.putString(f.VizDefConstants.K_FORMAT,"{point.yFormatted} ");a.putString(f.VizDefConstants.K_FILL,"black");a.putString(f.VizDefConstants.K_COLOR,"black");a.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");a.putString(f.VizDefConstants.K_FONT_SIZE,"12px");a.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_NORMAL);a.putString(f.VizDefConstants.K_TEXT_OUTLINE,"0px");},dataLabelAlignment:function(y,c,d,s){var a=y.putNewStructure(f.VizDefConstants.K_STACK_LABELS);a.putBoolean(f.VizDefConstants.K_ENABLED,s);a.putString(f.VizDefConstants.K_FORMAT,f.XStringUtils.concatenate3("{total:,.",f.XInteger.convertToString(d),"f}"));if(f.XString.isEqual(f.VizDefConstants.V_CHART_TYPE_BAR,c)){var b=a.putNewStructure(f.VizDefConstants.K_STYLE);b.putString(f.VizDefConstants.K_COLOR,"rgb(88,89,91)");b.putString(f.VizDefConstants.K_FONT_SIZE,"12px");b.putString(f.VizDefConstants.K_FONT_STYLE,f.VizDefConstants.V_NORMAL);b.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.K_BOLD);}else if(f.XString.isEqual(f.VizDefConstants.V_CHART_TYPE_COLUMN,c)){a.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);a.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);a.putInteger(f.VizDefConstants.K_Y,-20);a.putInteger(f.VizDefConstants.K_X,5);}else{a.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);a.putInteger(f.VizDefConstants.K_Y,-20);}},getAggregateValue:function(a,b,c,r,d){var e=0;var g=0;for(var i=0;i<b.getTuplesCount();i++){if(!b.getTupleAt(i).isTotal()){for(var j=0;j<a.size();j++){var h=a.get(j).getInteger();var k;if(r){k=d.getDataCell(h,i);}else{k=d.getDataCell(i,h);}if(k.getValueException()!==f.ValueException.NORMAL){continue;}var l=k.getDouble();if(e===0){g=l;}else if(f.XString.isEqual(c,"max")){if(g<l){g=l;}}else if(f.XString.isEqual(c,"min")){if(g>l){g=l;}}else{g=g+l;}e++;}}}if(f.XString.isEqual(c,"average")||f.XString.isEqual(c,"avg")){return g/e;}return g;}};f.GridRendererFactoryImpl=function(){};f.GridRendererFactoryImpl.prototype=new f.XObject();f.GridRendererFactoryImpl.prototype._ff_c="GridRendererFactoryImpl";f.GridRendererFactoryImpl.create=function(){return new f.GridRendererFactoryImpl();};f.GridRendererFactoryImpl.prototype.newRenderer=function(p){return f.RsSacTableRenderer.create();};f.GridResolverFactoryImpl=function(){};f.GridResolverFactoryImpl.prototype=new f.XObject();f.GridResolverFactoryImpl.prototype._ff_c="GridResolverFactoryImpl";f.GridResolverFactoryImpl.create=function(){return new f.GridResolverFactoryImpl();};f.GridResolverFactoryImpl.prototype.newResolver=function(p){return f.RsSacTableContextResolver._create();};f.RsSacTableContextResolver=function(){};f.RsSacTableContextResolver.prototype=new f.XObject();f.RsSacTableContextResolver.prototype._ff_c="RsSacTableContextResolver";f.RsSacTableContextResolver._create=function(){var i=new f.RsSacTableContextResolver();i.setupTupleLists();return i;};f.RsSacTableContextResolver.prototype.m_modelJson=null;f.RsSacTableContextResolver.prototype.m_rowList=null;f.RsSacTableContextResolver.prototype.m_columnTuples=null;f.RsSacTableContextResolver.prototype.m_rowTuples=null;f.RsSacTableContextResolver.prototype.m_columnDimensions=null;f.RsSacTableContextResolver.prototype.m_rowDimensions=null;f.RsSacTableContextResolver.prototype.setupTupleLists=function(){this.m_columnTuples=f.XList.create();this.m_rowTuples=f.XList.create();};f.RsSacTableContextResolver.prototype.updateModel=function(c,m,r){this.m_modelJson=m;this.m_rowList=r;if(f.notNull(c)){var a=c.getResultSetContainer();var o=a.getOffsetColumns();if(o===0){this.m_columnTuples.clear();this.m_columnDimensions=c.getColumnsAxis().getRsDimensions();}this.fillAxis(o,c.getColumnsAxis(),this.m_columnTuples);var b=a.getOffsetRows();if(b===0){this.m_rowTuples.clear();this.m_rowDimensions=c.getRowsAxis().getRsDimensions();}this.fillAxis(b,c.getRowsAxis(),this.m_rowTuples);}};f.RsSacTableContextResolver.prototype.fillAxis=function(o,a,t){var i=0;var b=t.size();var c=a.getTuplesCount();if(o>b){for(var h=b;h<o;h++){t.add(null);}}else if(o<b){for(;i<c&&i+o<b;i++){t.set(i+o,a.getTupleAt(i));}}for(;i<c;i++){t.add(a.getTupleAt(i));}};f.RsSacTableContextResolver.prototype.getCell=function(c,r){if(c>-1&&r>-1&&r<this.m_rowList.size()){var a=this.m_rowList.get(r);if(f.notNull(a)){if(a.getIntegerByKey(f.SacTableConstants.R_N_ROW)!==r){throw f.XException.createIllegalStateException("Invalid model: Inconsistent row index");}var b=a.getListByKey(f.SacTableConstants.R_L_CELLS);if(c<b.size()){var d=b.getStructureAt(c);if(d.getIntegerByKey(f.SacTableConstants.C_N_ROW)!==r){throw f.XException.createIllegalStateException("Invalid model: Inconsistent row index");}if(d.getIntegerByKey(f.SacTableConstants.C_N_COLUMN)!==c){throw f.XException.createIllegalStateException("Invalid model: Inconsistent column index");}return d;}}}return null;};f.RsSacTableContextResolver.prototype.getDataRegionCornerCol=function(){return this.m_modelJson.getIntegerByKey(f.SacTableConstants.TD_N_DATA_REGION_CORNER_COL);};f.RsSacTableContextResolver.prototype.getDataRegionHeaderEndRow=function(){return this.m_modelJson.getIntegerByKey(f.SacTableConstants.TD_N_DATA_REGION_HEADER_END_ROW);};f.RsSacTableContextResolver.prototype.getDataRegionCornerRow=function(){return this.m_modelJson.getIntegerByKey(f.SacTableConstants.TD_N_DATA_REGION_CORNER_ROW);};f.RsSacTableContextResolver.prototype.isEmptyHeaderCell=function(c,r){var a=this.getCell(c,r);return r<=this.getDataRegionHeaderEndRow()&&this.hasRowDimensions()&&c<=this.getDataRegionCornerCol()&&f.notNull(a)&&a.getIntegerByKey(f.SacTableConstants.C_N_TYPE)===f.SacTableConstants.CT_HEADER;};f.RsSacTableContextResolver.prototype.isOnHeaderColumn=function(c){return this.hasRowDimensions()&&c<=this.getDataRegionCornerCol();};f.RsSacTableContextResolver.prototype.isOnDataColumn=function(c){return c>this.getDataRegionCornerCol();};f.RsSacTableContextResolver.prototype.isOnHeaderRow=function(r){return r<=this.getDataRegionHeaderEndRow();};f.RsSacTableContextResolver.prototype.isOnDataRow=function(r){return r>this.getDataRegionCornerRow();};f.RsSacTableContextResolver.prototype.getColumnTuple=function(c){var a=c-this.getDataRegionCornerCol()-1;if(a>-1&&a<this.m_columnTuples.size()){return this.m_columnTuples.get(a);}return null;};f.RsSacTableContextResolver.prototype.getColumnTuples=function(c,a){var r=f.XList.create();var b=c-this.getDataRegionCornerCol()-1;var d=a-this.getDataRegionCornerCol()-1;if(b>-1&&d<this.m_columnTuples.size()){for(var i=b;i<=d;i++){r.add(this.m_columnTuples.get(i));}}return r;};f.RsSacTableContextResolver.prototype.getRowTuple=function(r){var c=r-this.getDataRegionCornerRow()-1;if(c>-1&&c<this.m_rowTuples.size()){return this.m_rowTuples.get(c);}return null;};f.RsSacTableContextResolver.prototype.getRowTuples=function(r,a){var b=f.XList.create();var c=r-this.getDataRegionCornerRow()-1;var d=a-this.getDataRegionCornerRow()-1;if(c>-1&&d<this.m_rowTuples.size()){for(var i=c;i<=d;i++){b.add(this.m_rowTuples.get(i));}}return b;};f.RsSacTableContextResolver.prototype.getColumnTupleElement=function(c,r){var a=c-this.getDataRegionCornerCol()-1;if(a>-1&&a<this.m_columnTuples.size()&&this.isOnHeaderRow(r)){var b=this.getCell(this.getDataRegionCornerCol(),r);if(f.notNull(b)){var d=b.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);var e=this.m_columnTuples.get(a);if(f.notNull(e)){return e.getTupleElementAt(d);}}}return null;};f.RsSacTableContextResolver.prototype.getColumnTupleElements=function(c,a,r){var b=f.XList.create();var d=c-this.getDataRegionCornerCol()-1;var e=a-this.getDataRegionCornerCol()-1;if(d>-1&&e<this.m_columnTuples.size()&&this.isOnHeaderRow(r)){var g=this.getCell(this.getDataRegionCornerCol(),r);if(f.notNull(g)){var h=g.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);for(var i=d;i<=e;i++){var j=this.m_columnTuples.get(i);if(f.notNull(j)){var t=j.getTupleElementAt(h);if(!b.contains(t)){b.add(t);}}}}}return b;};f.RsSacTableContextResolver.prototype.getRowTupleElement=function(c,r){var a=r-this.getDataRegionCornerRow()-1;if(a>-1&&a<this.m_rowTuples.size()&&this.isOnHeaderColumn(c)){var b=this.getCell(c,this.getDataRegionCornerRow());if(f.notNull(b)){var d=b.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);var e=this.m_rowTuples.get(a);if(f.notNull(e)){return e.getTupleElementAt(d);}}}return null;};f.RsSacTableContextResolver.prototype.getRowTupleElements=function(c,r,a){var b=f.XList.create();var d=r-this.getDataRegionCornerRow()-1;var e=a-this.getDataRegionCornerRow()-1;if(d>-1&&e<this.m_rowTuples.size()&&this.isOnHeaderColumn(c)){var g=this.getCell(c,this.getDataRegionCornerRow());if(f.notNull(g)){var h=g.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);for(var i=d;i<=e;i++){var j=this.m_rowTuples.get(i);if(f.notNull(j)){var t=j.getTupleElementAt(h);if(!b.contains(t)){b.add(j.getTupleElementAt(h));}}}}}return b;};f.RsSacTableContextResolver.prototype.getColumnTupleFieldName=function(r){if(this.isOnHeaderRow(r)){var c=this.getCell(this.getDataRegionCornerCol(),r);if(f.notNull(c)){return c.getStringByKey(f.SacTableConstants.C_SN_FIELD);}}return null;};f.RsSacTableContextResolver.prototype.getColumnTupleFieldNames=function(r,a,e){var c=this.getDataRegionCornerCol();var b=this.getCell(c,r);var d=this.getCell(c,a);if(!e||f.notNull(b)&&f.notNull(d)&&b.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX)===d.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX)){var g=f.XListOfString.create();for(var i=r;i<=a;i++){var h=this.getCell(c,i);if(f.notNull(h)){g.add(h.getStringByKey(f.SacTableConstants.C_SN_FIELD));}}return g;}return null;};f.RsSacTableContextResolver.prototype.getRowTupleFieldName=function(c){if(this.isOnHeaderColumn(c)){var a=this.getCell(c,this.getDataRegionCornerRow());if(f.notNull(a)){return a.getStringByKey(f.SacTableConstants.C_SN_FIELD);}}return null;};f.RsSacTableContextResolver.prototype.getRowTupleFieldNames=function(c,a,e){var b=this.getDataRegionCornerRow();var d=this.getCell(c,b);var g=this.getCell(a,b);if(!e||f.notNull(d)&&f.notNull(g)&&d.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX)===g.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX)){var r=f.XListOfString.create();for(var i=c;i<=a;i++){var h=this.getCell(i,b);if(f.notNull(h)){r.add(h.getStringByKey(f.SacTableConstants.C_SN_FIELD));}}return r;}return null;};f.RsSacTableContextResolver.prototype.getColumnDimensionStrict=function(c,r){if(c===this.getDataRegionCornerCol()){return this.getColumnDimension(r);}return null;};f.RsSacTableContextResolver.prototype.getColumnDimension=function(r){if(this.isOnHeaderRow(r)){var c=this.getCell(this.getDataRegionCornerCol(),r);if(f.notNull(c)){var d=c.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);return this.m_columnDimensions.get(d);}}return null;};f.RsSacTableContextResolver.prototype.getColumnDimensions=function(r,a){var b=f.XList.create();if(this.isOnHeaderRow(a)){var c=this.getDataRegionCornerCol();for(var i=r;i<=a;i++){var d=this.getCell(c,i);if(f.notNull(d)){var e=d.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);var g=this.m_columnDimensions.get(e);if(!b.contains(g)){b.add(g);}}}}return b;};f.RsSacTableContextResolver.prototype.getRowDimensionStrict=function(c,r){if(r===this.getDataRegionCornerRow()){return this.getRowDimension(c);}return null;};f.RsSacTableContextResolver.prototype.getRowDimension=function(c){if(this.isOnHeaderColumn(c)){var a=this.getCell(c,this.getDataRegionCornerRow());if(f.notNull(a)){var d=a.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);return this.m_rowDimensions.get(d);}}return null;};f.RsSacTableContextResolver.prototype.getRowDimensions=function(c,a){var r=f.XList.create();if(this.isOnHeaderColumn(a)){var b=this.getDataRegionCornerRow();for(var i=c;i<=a;i++){var d=this.getCell(i,b);if(f.notNull(d)){var e=d.getIntegerByKey(f.SacTableConstants.RCS_N_INDEX);var g=this.m_rowDimensions.get(e);if(!r.contains(g)){r.add(g);}}}}return r;};f.RsSacTableContextResolver.prototype.hasRowDimensions=function(){return this.m_rowDimensions.hasElements();};f.RsSacTableContextResolver.prototype.releaseObject=function(){this.m_modelJson=null;this.m_rowList=null;this.m_columnTuples=null;this.m_rowTuples=null;this.m_rowList=null;this.m_columnDimensions=null;this.m_rowDimensions=null;f.XObject.prototype.releaseObject.call(this);};f.RsSacTableRenderer=function(){};f.RsSacTableRenderer.prototype=new f.XObject();f.RsSacTableRenderer.prototype._ff_c="RsSacTableRenderer";f.RsSacTableRenderer.create=function(){return new f.RsSacTableRenderer();};f.RsSacTableRenderer.prototype.m_rowList=null;f.RsSacTableRenderer.prototype.m_headerRowList=null;f.RsSacTableRenderer.prototype.m_preColumnsAmount=0;f.RsSacTableRenderer.prototype.m_lastRowToFetch=0;f.RsSacTableRenderer.prototype.m_headerRowAmount=0;f.RsSacTableRenderer.prototype.m_columnTuplesCount=0;f.RsSacTableRenderer.prototype.m_columnsTotalCount=0;f.RsSacTableRenderer.prototype.m_rowsTotalCount=0;f.RsSacTableRenderer.prototype.m_tableJson=null;f.RsSacTableRenderer.prototype.m_emptyRowDimensions=false;f.RsSacTableRenderer.prototype.m_columnHeaderAggregation=null;f.RsSacTableRenderer.prototype.m_rowHeaderAggregation=null;f.RsSacTableRenderer.prototype.m_rowKeys=null;f.RsSacTableRenderer.prototype.m_columnKeys=null;f.RsSacTableRenderer.prototype.m_caps=null;f.RsSacTableRenderer.prototype.m_columnValueAggregations=null;f.RsSacTableRenderer.prototype.m_rowValueAggregations=null;f.RsSacTableRenderer.prototype.m_columnWidths=null;f.RsSacTableRenderer.prototype.m_totalRowIndexes=null;f.RsSacTableRenderer.prototype.m_totalColumnIndexes=null;f.RsSacTableRenderer.prototype.m_gridConfig=null;f.RsSacTableRenderer.prototype.m_sortDirections=null;f.RsSacTableRenderer.prototype.m_queryModel=null;f.RsSacTableRenderer.prototype.m_hasDataForRows=false;f.RsSacTableRenderer.prototype.m_hasDataForColumns=false;f.RsSacTableRenderer.prototype.m_hasData=false;f.RsSacTableRenderer.prototype.setGridConfigration=function(g){this.m_gridConfig=f.XObjectExt.release(this.m_gridConfig);this.m_gridConfig=g;};f.RsSacTableRenderer.prototype.getBooleanConfigProperty=function(p){return f.notNull(this.m_gridConfig)?this.m_gridConfig.getBooleanByKeyExt(p,false):false;};f.RsSacTableRenderer.prototype.getStringConfigProperty=function(p){return f.notNull(this.m_gridConfig)?this.m_gridConfig.getStringByKeyExt(p,null):null;};f.RsSacTableRenderer.prototype.getStringConfigPropertyExt=function(p,d){return f.notNull(this.m_gridConfig)?this.m_gridConfig.getStringByKeyExt(p,d):d;};f.RsSacTableRenderer.prototype.getIntegerConfigProperty=function(p,d){return f.notNull(this.m_gridConfig)?this.m_gridConfig.getIntegerByKeyExt(p,d):d;};f.RsSacTableRenderer.prototype.getIndexOfFirstUndefinedRowAfter=function(r){var a=r;var b=this.m_rowList.size();while(a<b&&this.m_rowList.get(a)!==null){a++;}return a;};f.RsSacTableRenderer.prototype.getIndexOfLastUndefinedRowBefore=function(r){var a=r;var b=this.m_rowList.size();while(a<b&&a>-1&&this.m_rowList.get(a)!==null){a--;}return a;};f.RsSacTableRenderer.prototype.render=function(r){this.preRender(r);this.preRenderAxis(r.getCursorRowsAxis(),this.m_rowHeaderAggregation,this.m_rowValueAggregations,0);this.renderOffsetInternal(r,0,false);return this.getFlatTableJsonCopy();};f.RsSacTableRenderer.prototype.reRenderAllLoadedData=function(){if(f.notNull(this.m_tableJson)){this.m_tableJson.remove(f.SacTableConstants.TD_N_TOTAL_ROWS_DIFF);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_PARTIAL,true);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SCROLL_TO_TOP,false);var p=this.m_tableJson.putNewList(f.SacTableConstants.TD_L_ROWS);f.XStream.of(this.m_headerRowList).forEach(function(h){p.add(h);}.bind(this));f.XStream.of(this.m_rowList).filter(function(e){return f.notNull(e);}.bind(this)).forEach(function(g){p.add(g);}.bind(this));}return this.getFlatTableJsonCopy();};f.RsSacTableRenderer.prototype.fillWithRowsUpToFirstGap=function(p){for(var i=0;i<this.m_rowList.size();i++){var r=this.m_rowList.get(i);if(f.isNull(r)){break;}p.add(r);}};f.RsSacTableRenderer.prototype.preRender=function(r){this.releaseStaleData();var c=r.getCursorColumnsAxis().getRsDimensions().size();var a=r.getCursorRowsAxis().getRsDimensions().size();var b=r.getCursorRowsAxis().getTuplesCount();this.m_columnTuplesCount=r.getCursorColumnsAxis().getTuplesCount();this.m_hasDataForRows=b>0&&(this.m_columnTuplesCount>0||a>0);this.m_hasDataForColumns=this.m_columnTuplesCount>0&&(b>0||c>0);this.m_hasData=this.m_columnTuplesCount>0&&c>0||b>0&&a>0;this.m_tableJson=f.PrFactory.createStructure();this.m_tableJson.putNewStructure(f.SacTableConstants.TD_M_FEATURE_TOGGLES);var s=this.m_tableJson.putNewStructure(f.SacTableConstants.TD_M_STYLE);var d=s.putNewStructure(f.SacTableConstants.ST_M_FONT);d.putInteger(f.SacTableConstants.FS_N_SIZE,42);this.m_rowsTotalCount=-1;this.m_columnsTotalCount=-1;this.m_columnWidths=f.XList.create();this.m_totalColumnIndexes=f.XSimpleMap.create();this.m_totalRowIndexes=f.XSimpleMap.create();this.m_sortDirections=f.XHashMapByString.create();this.m_rowList=f.XList.create();this.m_headerRowList=f.XList.create();this.m_columnValueAggregations=f.XList.create();this.m_rowValueAggregations=f.XList.create();this.m_queryModel=r.getQueryModel();this.m_caps=this.m_queryModel.getModelCapabilities();this.m_lastRowToFetch=f.XMath.max(1,b);this.renderDetails();this.m_rowHeaderAggregation=f.SacTableAggregation.getDimHeader(r.getCursorRowsAxis(),this.m_queryModel);this.m_columnHeaderAggregation=f.SacTableAggregation.getDimHeader(r.getCursorColumnsAxis(),this.m_queryModel);this.m_columnKeys=this.m_columnHeaderAggregation.getKeysAsReadOnlyListOfString();this.m_rowKeys=this.m_rowHeaderAggregation.getKeysAsReadOnlyListOfString();this.preRenderAxis(r.getCursorColumnsAxis(),this.m_columnHeaderAggregation,this.m_columnValueAggregations,0);this.renderHeaderRows();return this.m_hasData;};f.RsSacTableRenderer.prototype.reFormatHeaders=function(){if(f.notNull(this.m_tableJson)){f.XCollectionUtils.releaseEntriesFromCollection(this.m_headerRowList);this.m_tableJson.remove(f.SacTableConstants.TD_N_TOTAL_ROWS_DIFF);this.m_headerRowList.clear();this.renderHeaderRows();this.reformatRowHeaders();this.reRenderTitleAndGenericSettingsInternal();this.reRenderTotalFormattingInternal();var p=this.m_tableJson.putNewList(f.SacTableConstants.TD_L_ROWS);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_PARTIAL,true);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SCROLL_TO_TOP,false);f.XStream.of(this.m_headerRowList).forEach(function(h){p.add(h);}.bind(this));f.XStream.of(this.m_rowList).filter(function(e){return f.notNull(e);}.bind(this)).forEach(function(g){p.add(g);}.bind(this));}return this.getFlatTableJsonCopy();};f.RsSacTableRenderer.prototype.renderOffset=function(r,o,p){this.preRenderAxis(r.getCursorRowsAxis(),this.m_rowHeaderAggregation,this.m_rowValueAggregations,o);this.renderOffsetInternal(r,o,p);return this.getFlatTableJsonCopy();};f.RsSacTableRenderer.prototype.renderOffsetInternal=function(r,o,p){this.m_lastRowToFetch=f.XMath.max(1,o+r.getCursorRowsAxis().getTuplesCount());if(this.m_rowsTotalCount===-1||this.m_rowsTotalCount>o){this.renderRows(r,o,p);this.reRenderTitleAndGenericSettingsInternal();this.reRenderTotalFormattingInternal();}else{f.XLogger.println("Strange superfluous rendering beyond table size");}};f.RsSacTableRenderer.prototype.renderDetails=function(){if(f.notNull(this.m_tableJson)){var t=this.m_tableJson.putNewStructure(f.SacTableConstants.TD_M_TITLE);var a=t.putNewStructure(f.SacTableConstants.TD_M_TITLE_STYLE);t.putNewStructure(f.SacTableConstants.TD_M_SUBTITLE_STYLE);var b=a.putNewStructure(f.SacTableConstants.ST_M_FONT);b.putInteger(f.SacTableConstants.FS_N_SIZE,17);var c=this.getStringConfigPropertyExt(f.SacTableConstants.S_TITLE,this.m_queryModel.getText());t.putStringNotNullAndNotEmpty(f.SacTableConstants.TD_S_TITLE_TEXT,c);if(f.XStringUtils.isNotNullAndNotEmpty(c)){t.putNewList(f.SacTableConstants.TD_L_TITLE_CHUNKS).addString(c);}var d=t.putNewStructure(f.SacTableConstants.TD_M_TOKEN_DATA);var e=d.putNewStructure(f.SacTableConstants.TE_O_STYLES);e.putString("line-height","");e.putString("text-align","left");e.putString("font-size","13px");e.putString("align-items","center");e.putString("margin-top","3px");d.putNewStructure(f.SacTableConstants.TE_O_ATTRIBUTES);d.putNewList(f.SacTableConstants.TE_L_CLASSES).addString("sapReportEngineTokenContainer");d.putString(f.SacTableConstants.TE_S_TAG,"div");var g=d.putNewList(f.SacTableConstants.TE_L_CHILDREN);var h=f.XListOfString.create();h.add("sapUiIcon");h.add("sapUiIconMirrorInRTL");h.add("sapUiIconColorDefault");var j=f.XListOfString.create();j.add("sapReportEngineTokenSeparator");var k=f.XListOfString.create();k.add("sapReportEngineFilterTokenText");k.add("sapReportEngineTokenLinkText");var l;var i;var s=this.m_queryModel.getSortingManager().getSortingOperations();for(i=0;i<s.size();i++){var m=s.get(i);var n=m.getDirection();if(n===f.XSortDirection.ASCENDING){l=" \uE1FD ";}else if(n===f.XSortDirection.DESCENDING){l=" \uE1FC ";}else{continue;}if(m.getSortingType().isTypeOf(f.SortType.MEMBER_KEY)){if(this.m_queryModel.getRowsAxis().contains(m.getDimension())||this.m_queryModel.getColumnsAxis().contains(m.getDimension())){f.XStream.of(m.getDimension().getMainAttribute().getFields()).filter(function(w){return w.getPresentationType().isTypeOf(f.PresentationType.ABSTRACT_KEY);}.bind(this)).forEach(function(w){this.m_sortDirections.put(w.getName(),n);}.bind(this));this.addTableDetail("div",g,j,null);this.addTableIcon(g,k,h,l,m.getDimension().getText(),f.XStringUtils.concatenate3("Sort on ",m.getDimension().getText(),".Key"));}}else if(m.getSortingType().isTypeOf(f.SortType.MEMBER_TEXT)){if(this.m_queryModel.getRowsAxis().contains(m.getDimension())||this.m_queryModel.getColumnsAxis().contains(m.getDimension())){f.XStream.of(m.getDimension().getMainAttribute().getFields()).filter(function(w){return w.getPresentationType().isTypeOf(f.PresentationType.ABSTRACT_TEXT);}.bind(this)).forEach(function(w){this.m_sortDirections.put(w.getName(),n);}.bind(this));this.addTableDetail("div",g,j,null);this.addTableIcon(g,k,h,l,m.getDimension().getText(),f.XStringUtils.concatenate3("Sort on ",m.getDimension().getText(),".Text"));}}else if(m.getSortingType().isTypeOf(f.SortType.FIELD)){var o=m.getField();if(this.m_queryModel.getRowsAxis().contains(o.getDimension())||this.m_queryModel.getColumnsAxis().contains(o.getDimension())){this.m_sortDirections.put(o.getName(),n);this.addTableDetail("div",g,j,null);this.addTableIcon(g,k,h,l,o.getDimension().getText(),f.XStringUtils.concatenate2("Sort on ",o.getText()));}}else if(m.getSortingType().isTypeOf(f.SortType.DATA_CELL_VALUE)){var p=f.SacTableAggregation.getSimplifiedUniqueName(m.getElementPath());this.m_sortDirections.put(p,n);this.addTableDetail("div",g,j,null);this.addTableIcon(g,k,h,l,"Cell",f.XStringUtils.concatenate2("Sort on ",p));}else if(m.getSortingType().isTypeOf(f.SortType.MEASURE)){var q=m.getMeasure();this.m_sortDirections.put(q.getName(),n);this.addTableDetail("div",g,j,null);this.addTableIcon(g,k,h,l,q.getText(),f.XStringUtils.concatenate2("Sort on Key figure ",q.getText()));}}l=" \uE076 ";if(this.m_queryModel.getFilter().getDynamicFilter().isCartesianProduct()){var r=this.m_queryModel.getFilter().getDynamicFilter().getCartesianProduct();for(i=0;i<r.size();i++){this.addTableDetail("div",g,j,null);var u=r.getCartesianChild(i);var v=f.XCollectionUtils.join(f.XStream.of(u).collect(f.XStreamCollector.toListOfString(function(w){var x=w;var y=x.getLow();var z=x.getHigh();if(f.notNull(z)){return f.XStringUtils.concatenate5(x.getComparisonOperator().getName()," ",y.getString(),":",z.getString());}if(f.notNull(y)){return f.XStringUtils.concatenate3(x.getComparisonOperator().getName()," ",y.getString());}return"";}.bind(this))),", ");this.addTableIcon(g,k,h,l,u.getDimension().getText(),v);}}}};f.RsSacTableRenderer.prototype.reRenderTotalFormatting=function(){this.reRenderTotalFormattingInternal();return this.reRenderAllLoadedData();};f.RsSacTableRenderer.prototype.reRenderTotalFormattingInternal=function(){if(f.notNull(this.m_tableJson)&&f.notNull(this.m_totalRowIndexes)){var a=this.m_totalRowIndexes.getKeysAsIterator();var s;var b;var l;var c;var d;var r;var e;while(a.hasNext()){l=a.next();switch(l.getInteger()){case 0:b=f.SacTableConstants.S_TOTAL_LEVEL_0_COLOR;break;case 1:b=f.SacTableConstants.S_TOTAL_LEVEL_1_COLOR;break;case 2:b=f.SacTableConstants.S_TOTAL_LEVEL_2_COLOR;break;case 3:b=f.SacTableConstants.S_TOTAL_LEVEL_3_COLOR;break;case 4:b=f.SacTableConstants.S_TOTAL_LEVEL_4_COLOR;break;case 5:b=f.SacTableConstants.S_TOTAL_LEVEL_5_COLOR;break;case 6:b=f.SacTableConstants.S_TOTAL_LEVEL_6_COLOR;break;default:b=null;}e=this.getStringConfigProperty(b);if(f.notNull(b)){c=this.m_totalRowIndexes.getByKey(l).getIterator();while(c.hasNext()){var g=c.next().getInteger();r=this.m_rowList.get(g);if(f.notNull(r)){d=r.getListByKey(f.SacTableConstants.R_L_CELLS);var h=d.size();for(var j=this.m_preColumnsAmount;j<h;j++){s=d.getStructureAt(j).getStructureByKey(f.SacTableConstants.C_M_STYLE);s.putString(f.SacTableConstants.ST_S_FILL_COLOR,e);s.putNewStructure(f.SacTableConstants.ST_M_FONT).putBoolean(f.SacTableConstants.FS_B_BOLD,true);}}}}}a=this.m_totalColumnIndexes.getKeysAsIterator();while(a.hasNext()){l=a.next();switch(l.getInteger()){case 0:b=f.SacTableConstants.S_TOTAL_LEVEL_0_COLOR;break;case 1:b=f.SacTableConstants.S_TOTAL_LEVEL_1_COLOR;break;case 2:b=f.SacTableConstants.S_TOTAL_LEVEL_2_COLOR;break;case 3:b=f.SacTableConstants.S_TOTAL_LEVEL_3_COLOR;break;case 4:b=f.SacTableConstants.S_TOTAL_LEVEL_4_COLOR;break;case 5:b=f.SacTableConstants.S_TOTAL_LEVEL_5_COLOR;break;case 6:b=f.SacTableConstants.S_TOTAL_LEVEL_6_COLOR;break;default:b=null;}e=this.getStringConfigProperty(b);if(f.notNull(b)){var k=this.m_rowList.size();var m=this.m_totalColumnIndexes.getByKey(l);for(var n=0;n<k;n++){r=this.m_rowList.get(n);if(f.notNull(r)){d=r.getListByKey(f.SacTableConstants.R_L_CELLS);for(var i=0;i<m.size();i++){var o=m.get(i).getInteger();s=d.getStructureAt(o).getStructureByKey(f.SacTableConstants.C_M_STYLE);s.putString(f.SacTableConstants.ST_S_FILL_COLOR,e);s.putNewStructure(f.SacTableConstants.ST_M_FONT).putBoolean(f.SacTableConstants.FS_B_BOLD,true);}}}}}}};f.RsSacTableRenderer.prototype.reRenderTitleAndGenericSettings=function(a){if(f.notNull(this.m_tableJson)){this.m_tableJson.remove(f.SacTableConstants.TD_N_TOTAL_ROWS_DIFF);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_PARTIAL,true);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SCROLL_TO_TOP,false);var p=this.m_tableJson.putNewList(f.SacTableConstants.TD_L_ROWS);if(a){f.XStream.of(this.m_headerRowList).forEach(function(h){p.add(h);}.bind(this));f.XStream.of(this.m_rowList).filter(function(e){return f.notNull(e);}.bind(this)).forEach(function(g){p.add(g);}.bind(this));}this.reRenderTitleAndGenericSettingsInternal();}return this.getFlatTableJsonCopy();};f.RsSacTableRenderer.prototype.getFlatTableJsonCopy=function(){var n=f.PrFactory.createStructure();if(f.notNull(this.m_tableJson)){var k=this.m_tableJson.getKeysAsIteratorOfString();while(k.hasNext()){var a=k.next();n.put(a,this.m_tableJson.getByKey(a));}}return n;};f.RsSacTableRenderer.prototype.reRenderTitleAndGenericSettingsInternal=function(){var t=this.m_tableJson.getStructureByKey(f.SacTableConstants.TD_M_TITLE);if(f.notNull(t)){var c=t.getStructureByKey(f.SacTableConstants.TD_M_TITLE_STYLE);var d=this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_TABLE_TITLE);var s=this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_SUBTITLE);var e=this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_TABLE_DETAILS);t.putBoolean(f.SacTableConstants.TD_B_TITLE_VISIBLE,d);t.putBoolean(f.SacTableConstants.TD_B_SUBTITLE_VISIBLE,s);t.putBoolean(f.SacTableConstants.TD_B_DETAILS_VISIBLE,e);t.putBoolean(f.SacTableConstants.TD_B_EDITABLE,false);var g=40;if(d&&(e||s)){g=52;}else if(!d&&!e&&!s){g=0;}c.putInteger(f.SacTableConstants.TS_N_HEIGHT,g);}var i;this.m_tableJson.putInteger(f.SacTableConstants.TD_N_WIDGET_HEIGHT,this.getIntegerConfigProperty(f.SacTableConstants.I_HEIGHT,451));this.m_tableJson.putInteger(f.SacTableConstants.TD_N_WIDGET_WIDTH,this.getIntegerConfigProperty(f.SacTableConstants.I_WIDTH,1257));var h=this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_GRID);var j=false;if(this.getBooleanConfigProperty(f.SacTableConstants.B_FREEZE_COLUMNS)){this.m_tableJson.putInteger(f.SacTableConstants.TD_N_FREEZE_END_COL,this.m_preColumnsAmount-1);j=true;}else{this.m_tableJson.putInteger(f.SacTableConstants.TD_N_FREEZE_END_COL,-1);}var k=this.getBooleanConfigProperty(f.SacTableConstants.B_FREEZE_ROWS);if(k){this.m_tableJson.putInteger(f.SacTableConstants.TD_N_FREEZE_END_ROW,this.m_headerRowAmount-1);j=true;}else{this.m_tableJson.putInteger(f.SacTableConstants.TD_N_FREEZE_END_ROW,-1);}this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SHOW_FREEZE_LINES,j&&this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_FREEZE_LINES));this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_HAS_FIXED_ROWS_COLS,j);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SHOW_GRID,h);this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SHOW_COORDINATE_HEADER,this.getBooleanConfigProperty(f.SacTableConstants.B_COORDINATE_HEADER));this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SUBTITLE_VISIBLE,this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_SUBTITLE));this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_TITLE_VISIBLE,this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_TABLE_TITLE));this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_DETAILS_VISIBLE,this.getBooleanConfigProperty(f.SacTableConstants.B_SHOW_TABLE_DETAILS));var l=this.m_tableJson.putNewList(f.SacTableConstants.TD_L_COLUMN_SETTINGS);var o=f.XStream.of(this.m_columnWidths).reduce(f.XIntegerValue.create(1),function(a,b){return f.XIntegerValue.create(a.getInteger()+b.getInteger());}.bind(this)).getInteger();var m=f.XMath.max((this.m_tableJson.getIntegerByKey(f.SacTableConstants.TD_N_WIDGET_WIDTH)-20)/o,8);if(m>14){m=14;this.m_tableJson.putInteger(f.SacTableConstants.TD_N_WIDGET_WIDTH,m*o+20);}var n=20;var p;var q;for(i=0;i<this.m_preColumnsAmount;i++){q=80;if(i<this.m_columnWidths.size()){q=f.XMath.max(this.m_columnWidths.get(i).getInteger()*m,q);}n=n+q;p=l.addNewStructure();p.putInteger(f.SacTableConstants.CS_N_COLUMN,i);p.putInteger(f.SacTableConstants.CS_N_MIN_WIDTH,75);p.putInteger(f.SacTableConstants.CS_N_WIDTH,q);p.putString(f.SacTableConstants.CS_S_ID,f.XInteger.convertToHexString(i));p.putBoolean(f.SacTableConstants.CS_B_FIXED,false);p.putBoolean(f.SacTableConstants.CS_B_HAS_WRAP_CELL,false);p.putBoolean(f.SacTableConstants.CS_B_EMPTY_COLUMN,false);p.putBoolean(f.SacTableConstants.CS_B_FIXED,this.getBooleanConfigProperty(f.SacTableConstants.B_FREEZE_COLUMNS));}if(this.m_hasDataForColumns){for(;i<this.m_preColumnsAmount+this.m_columnTuplesCount;i++){q=50;if(i<this.m_columnWidths.size()){q=f.XMath.max(this.m_columnWidths.get(i).getInteger()*m,q);}n=n+q;p=l.addNewStructure();p.putInteger(f.SacTableConstants.CS_N_COLUMN,i);p.putInteger(f.SacTableConstants.CS_N_MIN_WIDTH,35);p.putInteger(f.SacTableConstants.CS_N_WIDTH,q);p.putString(f.SacTableConstants.CS_S_ID,f.XInteger.convertToHexString(i));p.putBoolean(f.SacTableConstants.CS_B_FIXED,false);p.putBoolean(f.SacTableConstants.CS_B_HAS_WRAP_CELL,false);p.putBoolean(f.SacTableConstants.CS_B_EMPTY_COLUMN,false);}}var r=20+this.m_rowsTotalCount*f.SacTableConstants.DF_R_N_HEIGHT;if(h){r=r+this.m_rowsTotalCount;}for(i=0;i<this.m_headerRowAmount;i++){var u=this.m_headerRowList.get(i);u.putBoolean(f.SacTableConstants.R_B_FIXED,k);r=r+u.getIntegerByKey(f.SacTableConstants.R_N_HEIGHT);if(h){r=r+1;}}this.m_tableJson.putInteger(f.SacTableConstants.TD_N_TOTAL_WIDTH,n);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_TOTAL_HEIGHT,r);};f.RsSacTableRenderer.prototype.addTableIcon=function(t,s,c,i,a,b){var d=t.addNewStructure();d.putNewStructure(f.SacTableConstants.TE_O_STYLES);d.putNewStructure(f.SacTableConstants.TE_O_ATTRIBUTES);d.putNewList(f.SacTableConstants.TE_L_CLASSES).addAllStrings(s);d.putString(f.SacTableConstants.TE_S_TAG,"a");var e=d.putNewList(f.SacTableConstants.TE_L_CHILDREN);d=e.addNewStructure();var g=d.putNewStructure(f.SacTableConstants.TE_O_STYLES);g.putString("font-family","SAP-icons");g.putString("margin-right","5px");d.putNewStructure(f.SacTableConstants.TE_O_ATTRIBUTES);d.putNewList(f.SacTableConstants.TE_L_CLASSES).addAllStrings(c);d.putString(f.SacTableConstants.TE_S_TAG,"span");var h=d.putNewStructure(f.SacTableConstants.TE_O_ATTRIBUTES);h.putString("data-sap-ui-icon-content",i);h.putString("aria-hidden","true");h.putStringNotNullAndNotEmpty("title",b);var j=d.putNewList(f.SacTableConstants.TE_L_CHILDREN);j.addString("");e.addString(a);};f.RsSacTableRenderer.prototype.addTableDetail=function(t,a,c,i){var d=a.addNewStructure();d.putNewStructure(f.SacTableConstants.TE_O_STYLES);d.putNewStructure(f.SacTableConstants.TE_O_ATTRIBUTES);d.putNewList(f.SacTableConstants.TE_L_CLASSES).addAllStrings(c);d.putString(f.SacTableConstants.TE_S_TAG,t);var b=d.putNewList(f.SacTableConstants.TE_L_CHILDREN);if(f.XStringUtils.isNotNullAndNotEmpty(i)){b.addString(i);}};f.RsSacTableRenderer.prototype.renderHeaderRows=function(){if(f.notNull(this.m_tableJson)){var r=this.getBooleanConfigProperty(f.SacTableConstants.B_REPETITIVE_MEMBER_NAMES);var d;var v;var s=this.getBooleanConfigProperty(f.SacTableConstants.B_DIMENSION_TITLES);this.m_preColumnsAmount=this.m_rowKeys.size();this.m_emptyRowDimensions=this.m_preColumnsAmount===0;if(this.m_emptyRowDimensions&&s){this.m_preColumnsAmount=1;}var p=this.m_columnKeys.size();this.m_headerRowAmount=p+(this.m_emptyRowDimensions||!s?0:1);var i;var j;var c;var a;var b=this.getBooleanConfigProperty(f.SacTableConstants.B_FREEZE_ROWS);for(i=0;i<p;i++){a=f.PrFactory.createStructure();this.m_headerRowList.add(a);a.putInteger(f.SacTableConstants.R_N_ROW,i);a.putInteger(f.SacTableConstants.R_N_HEIGHT,f.SacTableConstants.DF_R_N_HEIGHT);a.putBoolean(f.SacTableConstants.R_B_FIXED,b);c=a.putNewList(f.SacTableConstants.R_L_CELLS);for(j=0;j<this.m_preColumnsAmount-1;j++){this.addNewEmptyHeaderCell(c,i,j,i===p-1?"rgb(63,81,97)":null);}}if(this.m_preColumnsAmount>0){if(s){for(i=0;i<p;i++){c=this.m_headerRowList.get(i).getListByKey(f.SacTableConstants.R_L_CELLS);this.addHeaderCell(c,i,this.m_preColumnsAmount-1,this.m_columnHeaderAggregation.getByKey(this.m_columnKeys.get(i)),f.SacTableConstants.CT_COL_DIM_HEADER,f.SacTableConstants.CT_ATTRIBUTE_COL_DIM_HEADER,f.SacTableConstants.C_N_HIERARCHY_PADDING_TOP,f.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP,r,i===p-1?"rgb(63,81,97)":null);}}else{for(i=0;i<p;i++){c=this.m_headerRowList.get(i).getListByKey(f.SacTableConstants.R_L_CELLS);this.addNewEmptyHeaderCell(c,i,this.m_preColumnsAmount-1,i===p-1?"rgb(63,81,97)":null);}}}var e=null;j=this.m_preColumnsAmount;for(var h=0;h<this.m_columnValueAggregations.size();h++){e=this.m_columnValueAggregations.get(h);for(i=0;i<p;i++){v=e.getByKey(this.m_columnKeys.get(i));a=this.m_headerRowList.get(i);var n=f.SacTableConstants.DF_R_N_HEIGHT/3*(3+v.getDisplayLevel());if(a.getIntegerByKeyExt(f.SacTableConstants.R_N_HEIGHT,0)<n){a.putInteger(f.SacTableConstants.R_N_HEIGHT,n);}d=v.getDimensionMemberType();if(d===f.MemberType.RESULT||f.OlapComponentType.TOTALS===d){this.addToIntMap(this.m_totalColumnIndexes,i,j);}c=this.m_headerRowList.get(i).getListByKey(f.SacTableConstants.R_L_CELLS);this.addHeaderCell(c,i,j,v,f.SacTableConstants.CT_COL_DIM_MEMBER,f.SacTableConstants.CT_ATTRIBUTE_COL_DIM_MEMBER,f.SacTableConstants.C_N_HIERARCHY_PADDING_TOP,f.SacTableConstants.DF_C_N_HIERARCHY_PADDING_TOP,r,i===p-1?"rgb(63,81,97)":null);}j++;}if(!this.m_emptyRowDimensions){if(s){a=f.PrFactory.createStructure();this.m_headerRowList.add(a);a.putInteger(f.SacTableConstants.R_N_ROW,p);a.putInteger(f.SacTableConstants.R_N_HEIGHT,f.SacTableConstants.DF_R_N_HEIGHT);a.putBoolean(f.SacTableConstants.R_B_FIXED,b);c=a.putNewList(f.SacTableConstants.R_L_CELLS);for(i=0;i<this.m_preColumnsAmount;i++){this.addHeaderCell(c,p,i,this.m_rowHeaderAggregation.getByKey(this.m_rowKeys.get(i)),f.SacTableConstants.CT_ROW_DIM_HEADER,f.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_HEADER,f.SacTableConstants.C_N_HIERARCHY_PADDING_LEFT,f.SacTableConstants.DF_C_N_HIERARCHY_PADDING_LEFT,r,null);}if(this.m_hasDataForColumns){for(i=0;i<this.m_columnTuplesCount;i++){this.addNewEmptyHeaderCell(c,p,this.m_preColumnsAmount+i,null);}}}}this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_START_COL,0);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_START_ROW,0);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_CORNER_COL,this.m_preColumnsAmount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_CORNER_ROW,this.m_headerRowAmount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_HEADER_END_ROW,p-1);}};f.RsSacTableRenderer.prototype.preRenderAxis=function(c,h,v,o){c.setTupleCursorBeforeStart();if(o===0){f.XCollectionUtils.releaseEntriesFromCollection(v);v.clear();}var a=v.size();var l=null;if(c.hasNextTuple()){if(o===a){if(a>0){l=v.get(a-1);}}else{for(var i=a;i<=o;i++){v.add(null);}var s=false;if(o<a){l=v.get(o-1);if(f.notNull(l)){s=true;}}c.nextTuple();l=f.SacTableAggregation.getMemberHeader(c,h,l);if(s){v.set(o,l);}var b=o+1;while(c.hasNextTuple()&&b<a){c.nextTuple();l=f.SacTableAggregation.getMemberHeader(c,h,l);v.set(b,l);b++;}}while(c.hasNextTuple()){c.nextTuple();l=f.SacTableAggregation.getMemberHeader(c,h,l);v.add(l);}}};f.RsSacTableRenderer.prototype.reformatRowHeaders=function(){var s=this.getBooleanConfigProperty(f.SacTableConstants.B_DIMENSION_TITLES);var r=this.getBooleanConfigProperty(f.SacTableConstants.B_REPETITIVE_MEMBER_NAMES);var v;var i;var a;var c;var b;var t=0;if(!this.m_emptyRowDimensions){for(var h=0;h<this.m_rowValueAggregations.size();h++){var d=this.m_rowValueAggregations.get(h);a=this.m_rowList.get(h);if(f.notNull(a)){var e=h+this.m_headerRowAmount;t=e-a.getIntegerByKey(f.SacTableConstants.R_N_ROW);a.putInteger(f.SacTableConstants.R_N_ROW,e);c=a.getListByKey(f.SacTableConstants.R_L_CELLS);this.adjustCellListIndices(c,e);for(i=0;i<this.m_preColumnsAmount;i++){var g=this.m_rowKeys.get(i);v=d.getByKey(g);b=c.getStructureAt(i);this.formatCell(b,v,r,"rgba(204,204,240,1)");}}}}else{a=this.m_rowList.get(0);if(f.notNull(a)){a.putInteger(f.SacTableConstants.R_N_ROW,this.m_headerRowAmount);c=a.getListByKey(f.SacTableConstants.R_L_CELLS);if(s){if(c.size()===0||c.getStructureAt(0).getIntegerByKey(f.SacTableConstants.C_N_TYPE)!==f.SacTableConstants.CT_HEADER){this.insertNewEmptyHeaderCell(a.getListByKey(f.SacTableConstants.R_L_CELLS),this.m_headerRowAmount,0,"rgba(204,204,240,1)");}}else{if(c.size()>0&&c.getStructureAt(0).getIntegerByKey(f.SacTableConstants.C_N_TYPE)===f.SacTableConstants.CT_HEADER){c.removeAt(0);}}this.adjustCellListIndices(c,this.m_headerRowAmount);}}if(t<0){this.m_tableJson.putInteger(f.SacTableConstants.TD_N_TOTAL_ROWS_DIFF,t);}this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_END_COL,this.m_preColumnsAmount+this.m_columnsTotalCount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_END_ROW,this.m_headerRowAmount+this.m_rowsTotalCount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_LAST_ROW_INDEX,this.m_headerRowAmount+this.m_rowsTotalCount-1);};f.RsSacTableRenderer.prototype.adjustCellListIndices=function(c,a){for(var i=0;i<c.size();i++){var b=c.getStructureAt(i);b.putInteger(f.SacTableConstants.C_N_COLUMN,i);b.putInteger(f.SacTableConstants.C_N_ROW,a);}};f.RsSacTableRenderer.prototype.renderRows=function(r,o,p){if(f.notNull(this.m_tableJson)){var l=f.XList.create();var a=o;if(this.m_hasDataForRows){if(!this.m_emptyRowDimensions&&this.m_rowValueAggregations.get(o)===null){a=o+1;}var s=this.getBooleanConfigProperty(f.SacTableConstants.B_DIMENSION_TITLES);var b=this.getBooleanConfigProperty(f.SacTableConstants.B_REPETITIVE_MEMBER_NAMES);var v;var j=this.m_headerRowAmount+a;var i;var c;var d;var h;var e=this.m_rowList.size();for(i=e;i<a;i++){this.m_rowList.add(null);}for(h=a;h<this.m_lastRowToFetch;h++){var g=this.m_emptyRowDimensions?null:this.m_rowValueAggregations.get(h);c=f.PrFactory.createStructure();if(h>=e){this.m_rowList.add(c);}else{this.m_rowList.set(h,c);}l.add(c);c.putInteger(f.SacTableConstants.R_N_ROW,j);c.putInteger(f.SacTableConstants.R_N_HEIGHT,f.SacTableConstants.DF_R_N_HEIGHT);d=c.putNewList(f.SacTableConstants.R_L_CELLS);if(!this.m_emptyRowDimensions){for(i=0;i<this.m_preColumnsAmount;i++){var k=this.m_rowKeys.get(i);v=g.getByKey(k);var m=v.getDimensionMemberType();if(m===f.MemberType.RESULT||f.OlapComponentType.TOTALS===m){this.addToIntMap(this.m_totalRowIndexes,i,h);}this.addHeaderCell(d,j,i,v,f.SacTableConstants.CT_ROW_DIM_MEMBER,f.SacTableConstants.CT_ATTRIBUTE_ROW_DIM_MEMBER,f.SacTableConstants.C_N_HIERARCHY_PADDING_LEFT,f.SacTableConstants.DF_C_N_HIERARCHY_PADDING_LEFT,b,"rgba(204,204,240,1)");}}else if(s){this.addNewEmptyHeaderCell(c.getListByKey(f.SacTableConstants.R_L_CELLS),j,0,"rgba(204,204,240,1)");}j++;}var n;var q=r.getDataColumns();for(n=a;n<this.m_lastRowToFetch;n++){d=this.m_rowList.get(n).getListByKey(f.SacTableConstants.R_L_CELLS);for(j=0;j<q;j++){this.addDataCell(d,r.getDataCell(j,n-a),j+this.m_preColumnsAmount,this.m_headerRowAmount+n);}}}this.m_columnsTotalCount=r.getCursorColumnsAxis().getTuplesCountTotal();if(this.m_columnsTotalCount<0){this.m_columnsTotalCount=this.m_columnTuplesCount+10;}this.m_rowsTotalCount=r.getCursorRowsAxis().getTuplesCountTotal();if(this.m_rowsTotalCount<0){this.m_rowsTotalCount=this.m_lastRowToFetch+10;}this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_END_COL,this.m_preColumnsAmount+this.m_columnsTotalCount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_DATA_REGION_END_ROW,this.m_headerRowAmount+this.m_rowsTotalCount-1);this.m_tableJson.putInteger(f.SacTableConstants.TD_N_LAST_ROW_INDEX,this.m_headerRowAmount+this.m_rowsTotalCount-1);this.m_tableJson.remove(f.SacTableConstants.TD_N_TOTAL_ROWS_DIFF);if(p){this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_PARTIAL,p);}else{var t=this.m_tableJson.putNewStructure(f.SacTableConstants.TD_B_PARTIAL);if(this.m_hasDataForRows){t.putInteger(f.SacTableConstants.TDP_N_TOTAL_ROWS,this.m_headerRowAmount+this.m_rowsTotalCount);}else{t.putInteger(f.SacTableConstants.TDP_N_TOTAL_ROWS,this.m_headerRowAmount);}t.putInteger(f.SacTableConstants.TDP_N_ROW_HEIGHT,f.SacTableConstants.DF_R_N_HEIGHT);}this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_SCROLL_TO_TOP,!p);var u=this.m_tableJson.putNewList(f.SacTableConstants.TD_L_ROWS);if(p){f.XStream.of(l).forEach(function(w){u.add(w);}.bind(this));}else{f.XStream.of(this.m_headerRowList).forEach(function(w){u.add(w);}.bind(this));this.fillWithRowsUpToFirstGap(u);}return this.m_rowsTotalCount>this.m_lastRowToFetch+a||this.m_rowsTotalCount<0;}return false;};f.RsSacTableRenderer.prototype.addToIntMap=function(a,i,j){var b=f.XIntegerValue.create(i);if(!a.containsKey(b)){a.put(b,f.XList.create());}a.getByKey(b).add(f.XIntegerValue.create(j));};f.RsSacTableRenderer.prototype.addDataCell=function(c,d,a,r){var b=c.addNewStructure();b.putInteger(f.SacTableConstants.C_N_ROW,r);b.putInteger(f.SacTableConstants.C_N_COLUMN,a);if(d.isDataEntryEnabled()){b.putInteger(f.SacTableConstants.C_N_TYPE,f.SacTableConstants.CT_INPUT);}else{b.putInteger(f.SacTableConstants.C_N_TYPE,f.SacTableConstants.CT_VALUE);}var e=d.getFormattedValue();var g=d.getCurrencyUnit();if(g.hasPrefix()){e=f.XStringUtils.concatenate3(g.getPrefix()," ",e);}if(g.hasSuffix()){e=f.XStringUtils.concatenate3(e," ",g.getSuffix());}this.ensureWidth(a,e,2);var v=d.getValueException();if(v===f.ValueException.UNDEFINED){e="\u2012";}else if(v!==f.ValueException.NORMAL&&v!==f.ValueException.ZERO){b.putInteger(f.SacTableConstants.C_N_TYPE,f.SacTableConstants.CT_UNBOOKED);e=f.XStringUtils.concatenate3(v.getName(),": ",e);}b.putString(f.SacTableConstants.C_S_FORMATTED,e);if(v!==f.ValueException.UNDEFINED&&v!==f.ValueException.NULL_VALUE){if(d.getValueType().isNumber()){b.putDouble(f.SacTableConstants.C_SN_PLAIN,d.getDouble());}else{b.putString(f.SacTableConstants.C_SN_PLAIN,d.getStringRepresentation());}}var s=b.putNewStructure(f.SacTableConstants.C_M_STYLE);b.putBoolean(f.SacTableConstants.C_B_STYLE_UPDATED_BY_USER,true);var h="rgba(204,204,204,1)";this.addBottomLines(s,h);};f.RsSacTableRenderer.prototype.addHeaderCell=function(c,r,a,h,m,s,b,d,e,g){var i=h.getField();var j=c.addNewStructure();j.putString(f.SacTableConstants.C_SN_FIELD,i.getName());j.putInteger(f.SacTableConstants.C_N_ROW,r);j.putInteger(f.SacTableConstants.C_N_COLUMN,a);j.putBoolean(f.SacTableConstants.C_B_ALLOW_DRAG_DROP,true);var k=h.isMainAttribute();j.putInteger(f.SacTableConstants.C_N_TYPE,k?m:s);var l=h.getText();var n=2;if(this.addSortIcon(j,h,h.getDimension(),i,k,m)){n=5;}j.putString(f.SacTableConstants.C_SN_PLAIN,h.getPlain());j.putInteger(f.SacTableConstants.RCS_N_INDEX,h.getDimensionIndex());var o=this.formatCell(j,h,e,g);var p=h.getDrillState();var q=h.getDimensionMemberType();if(f.MemberType.RESULT===q||f.OlapComponentType.TOTALS===q){o.putNewStructure(f.SacTableConstants.ST_M_FONT).putBoolean(f.SacTableConstants.FS_B_BOLD,true);j.putBoolean(f.SacTableConstants.C_B_IS_INA_TOTALS_CONTEXT,true);}var t=h.getDimension();var u=t.isHierarchyActive()||t.isUniversalDisplayHierarchyDimension();var v=t.getLowerLevelNodeAlignment()===f.Alignment.CHILDREN_ABOVE_PARENT;this.m_tableJson.putBoolean(f.SacTableConstants.TD_B_REVERSED_HIERARCHY,v);var w=f.notNull(p)&&u;if(w){var x=h.getDisplayLevel();n=(x===0?10:2*x)+n;j.putBoolean(f.SacTableConstants.C_B_IS_IN_HIERARCHY,true);j.putInteger(f.SacTableConstants.C_N_LEVEL,x);j.putInteger(b,d*(1+x));j.putBoolean(f.SacTableConstants.C_B_SHOW_DRILL_ICON,f.notNull(p)&&p!==f.DrillState.LEAF&&f.MemberType.RESULT!==q&&f.OlapComponentType.TOTALS!==q);j.putBoolean(f.SacTableConstants.C_B_EXPANDED,p===f.DrillState.EXPANDED||p===f.DrillState.DRILLED);}this.ensureWidth(a,l,n);};f.RsSacTableRenderer.prototype.formatCell=function(c,h,r,b){c.putString(f.SacTableConstants.C_S_FORMATTED,!r&&h.isRepeatedMemberName()?"":h.getText());var s=c.putNewStructure(f.SacTableConstants.C_M_STYLE);s.putStringNotNullAndNotEmpty(f.SacTableConstants.ST_S_FILL_COLOR,this.getStringConfigProperty(f.SacTableConstants.S_HEADER_COLOR));if(f.notNull(b)){this.addBottomLines(s,b);}c.putBoolean(f.SacTableConstants.C_B_STYLE_UPDATED_BY_USER,true);c.putBoolean(f.SacTableConstants.C_B_REPEATED_MEMBER_NAME,h.isRepeatedMemberName());return s;};f.RsSacTableRenderer.prototype.addSortIcon=function(c,h,d,a,i,m){var s=null;if(m===f.SacTableConstants.CT_COL_DIM_HEADER||m===f.SacTableConstants.CT_ROW_DIM_HEADER){if(i&&this.m_caps.supportsDimensionSorting(d,a.getPresentationType().isTypeOf(f.PresentationType.ABSTRACT_KEY)?f.SortType.MEMBER_KEY:f.SortType.MEMBER_TEXT)||this.m_caps.supportsFieldSorting(a)){s=this.m_sortDirections.getByKey(a.getName());if(f.isNull(s)){s=f.XSortDirection.DEFAULT_VALUE;}}}else{if(this.m_caps.supportsDataCellSorting()||this.m_caps.supportsMeasureSorting()&&d.isMeasureStructure()){s=this.m_sortDirections.getByKey(h.getPathKey());if(f.isNull(s)||s===f.XSortDirection.DEFAULT_VALUE){s=this.m_sortDirections.getByKey(h.getDimensionMemberName());}if(f.isNull(s)){s=f.XSortDirection.DEFAULT_VALUE;}}}if(f.notNull(s)){var b=null;if(s===f.XSortDirection.DEFAULT_VALUE){b="\uE095";}else if(s===f.XSortDirection.ASCENDING){b="\uE1FD";}else if(s===f.XSortDirection.DESCENDING){b="\uE1FC";}var e=c.putNewStructure(f.SacTableConstants.C_M_CELL_ICON);e.putString(f.SacTableConstants.CI_S_CLASS_NAME,f.SacTableConstants.CI_SV_CLASS_NAME_SAP_UI_ICON);var g=e.putNewStructure(f.SacTableConstants.CI_M_ATTRIBUTES);g.putString(f.SacTableConstants.CIA_S_DATA_SAP_UI_ICON_CONTENT,b);var j=e.putNewStructure(f.SacTableConstants.CI_M_STYLE);j.putString(f.SacTableConstants.CIS_S_FONT_FAMILY,f.SacTableConstants.CIS_SV_SAP_ICONS);j.putInteger(f.SacTableConstants.CIS_N_MARGIN_LEFT,f.SacTableConstants.CIS_NV_MARGIN_RIGHT);e.putBoolean(f.SacTableConstants.CI_B_ICON_AFTER,true);}return f.notNull(s);};f.RsSacTableRenderer.prototype.addBottomLines=function(s,c){var l=s.putNewList(f.SacTableConstants.ST_L_LINES);var a=l.addNewStructure();a.putString(f.SacTableConstants.SL_S_COLOR,c);a.putInteger(f.SacTableConstants.SL_N_SIZE,1);a.putInteger(f.SacTableConstants.SL_N_STYLE,1);a.putInteger(f.SacTableConstants.SL_N_POSITION,f.SacTableConstants.LP_BOTTOM);var p=a.putNewStructure(f.SacTableConstants.SL_M_PADDING);p.putInteger(f.SacTableConstants.SLP_N_RIGHT,f.SacTableConstants.LP_RIGHT);p.putInteger(f.SacTableConstants.SLP_N_LEFT,f.SacTableConstants.LP_RIGHT);};f.RsSacTableRenderer.prototype.ensureWidth=function(c,a,b){while(this.m_columnWidths.size()<c){this.m_columnWidths.add(f.XIntegerValue.create(0));}var n=f.XString.size(a)+b;if(c===this.m_columnWidths.size()){this.m_columnWidths.add(f.XIntegerValue.create(n));}else if(this.m_columnWidths.get(c).getInteger()<n){this.m_columnWidths.set(c,f.XIntegerValue.create(n));}};f.RsSacTableRenderer.prototype.addNewEmptyHeaderCell=function(c,r,a,b){var d=c.addNewStructure();d.putInteger(f.SacTableConstants.C_N_ROW,r);d.putInteger(f.SacTableConstants.C_N_COLUMN,a);d.putInteger(f.SacTableConstants.C_N_TYPE,f.SacTableConstants.CT_HEADER);d.putBoolean(f.SacTableConstants.C_B_STYLE_UPDATED_BY_USER,true);var s=d.putNewStructure(f.SacTableConstants.C_M_STYLE);s.putStringNotNullAndNotEmpty(f.SacTableConstants.ST_S_FILL_COLOR,this.getStringConfigProperty(f.SacTableConstants.S_HEADER_COLOR));if(f.notNull(b)){this.addBottomLines(s,b);}};f.RsSacTableRenderer.prototype.insertNewEmptyHeaderCell=function(c,r,a,b){var d=f.PrFactory.createStructure();d.putInteger(f.SacTableConstants.C_N_ROW,r);d.putInteger(f.SacTableConstants.C_N_COLUMN,a);d.putInteger(f.SacTableConstants.C_N_TYPE,f.SacTableConstants.CT_HEADER);d.putBoolean(f.SacTableConstants.C_B_STYLE_UPDATED_BY_USER,true);var s=d.putNewStructure(f.SacTableConstants.C_M_STYLE);s.putStringNotNullAndNotEmpty(f.SacTableConstants.ST_S_FILL_COLOR,this.getStringConfigProperty(f.SacTableConstants.S_HEADER_COLOR));if(f.notNull(b)){this.addBottomLines(s,b);}c.insert(0,d);};f.RsSacTableRenderer.prototype.getColumnsTotalCount=function(){return this.m_hasData?f.XMath.max(0,this.m_preColumnsAmount)+f.XMath.max(0,this.m_columnsTotalCount):0;};f.RsSacTableRenderer.prototype.getDataColumnsTotalCount=function(){return this.m_hasData?f.XMath.max(0,this.m_columnsTotalCount):0;};f.RsSacTableRenderer.prototype.getRowsTotalCount=function(){return this.m_hasData?f.XMath.max(0,this.m_headerRowAmount)+f.XMath.max(0,this.m_rowsTotalCount):0;};f.RsSacTableRenderer.prototype.getDataRowsTotalCount=function(){return this.m_hasData?f.XMath.max(0,this.m_rowsTotalCount):0;};f.RsSacTableRenderer.prototype.getColumnsLoadedCount=function(){return this.m_hasData?f.XMath.max(0,this.m_preColumnsAmount)+f.XMath.max(0,this.m_columnTuplesCount):0;};f.RsSacTableRenderer.prototype.getRowsLoadedCount=function(){return this.m_hasData?f.XMath.max(0,this.m_headerRowAmount)+(f.XCollectionUtils.hasElements(this.m_rowList)?f.XStream.of(this.m_rowList).filter(function(v){return f.notNull(v);}.bind(this)).countItems():0):0;};f.RsSacTableRenderer.prototype.getFullRowList=function(){var r=f.XList.create();r.addAll(this.m_headerRowList);r.addAll(this.m_rowList);return r;};f.RsSacTableRenderer.prototype.releaseObject=function(){this.m_gridConfig=f.XObjectExt.release(this.m_gridConfig);this.releaseStaleData();f.XObject.prototype.releaseObject.call(this);};f.RsSacTableRenderer.prototype.releaseStaleData=function(){this.m_preColumnsAmount=0;this.m_lastRowToFetch=0;this.m_headerRowAmount=0;this.m_columnTuplesCount=0;this.m_columnsTotalCount=0;this.m_rowsTotalCount=0;this.m_caps=null;this.m_emptyRowDimensions=false;this.m_rowList=f.XObjectExt.release(this.m_rowList);this.m_headerRowList=f.XObjectExt.release(this.m_headerRowList);this.m_columnWidths=f.XObjectExt.release(this.m_columnWidths);this.m_totalRowIndexes=f.XObjectExt.release(this.m_totalRowIndexes);this.m_totalColumnIndexes=f.XObjectExt.release(this.m_totalColumnIndexes);this.m_sortDirections=f.XObjectExt.release(this.m_sortDirections);this.m_tableJson=f.XObjectExt.release(this.m_tableJson);this.m_columnHeaderAggregation=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_columnHeaderAggregation);this.m_rowHeaderAggregation=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_rowHeaderAggregation);this.m_rowValueAggregations=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_rowValueAggregations);this.m_columnValueAggregations=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_columnValueAggregations);this.m_queryModel=null;this.m_columnKeys=f.XObjectExt.release(this.m_columnKeys);this.m_rowKeys=f.XObjectExt.release(this.m_rowKeys);};f.RsSacTableRenderer.prototype.getTableJson=function(){return this.m_tableJson;};f.SacTableAggregation=function(){};f.SacTableAggregation.prototype=new f.XObject();f.SacTableAggregation.prototype._ff_c="SacTableAggregation";f.SacTableAggregation.create=function(t,p,d,a,b,c,e,i,g,h,j,k,r){var l=new f.SacTableAggregation();l.m_text=t;l.m_plain=p;l.m_dimension=d;l.m_drillState=b;l.m_displayLevel=c;l.m_field=e;l.m_index=i;l.m_isMainAttribute=g;l.m_dimensionIndex=h;l.m_dimensionMemberType=a;l.m_dimensionMemberName=j;l.m_pathKey=k;l.m_repeatedMemberName=r;return l;};f.SacTableAggregation.getMemberHeader=function(c,d,p){var r=true;var a=f.XLinkedHashMapByString.create();var b="";while(c.hasNextTupleElement()){var t=c.nextTupleElement();var e=t.getDimensionMemberName();b=f.XStringUtils.concatenate5(b,"::[",t.getRsDimensionAtCurrentPosition().getName(),"]==>",e);while(c.hasNextFieldValue()){var g=c.nextFieldValue();var h=g.getField();var i=h.getName();if(!d.containsKey(i)){continue;}var j=d.getByKey(i);var k=t.getDisplayLevel();var l=f.XValueUtil.getString(g.getValue());if(f.isNull(p)||!p.containsKey(i)){r=false;}else if(!f.XString.isEqual(p.getByKey(i).getPlain(),l)||p.getByKey(i).getDisplayLevel()!==k){r=false;}var m=g.getFormattedValue();a.put(i,f.SacTableAggregation.create(m,l,j.getDimension(),t.getDimensionMemberType(),t.getDrillState(),k,j.getField(),j.getIndex(),j.isMainAttribute(),j.getDimensionIndex(),e,b,r));}}return a;};f.SacTableAggregation.getDimHeader=function(c,q){var i;var j;var d=c.getRsDimensions();var s=d.size();var r=f.XLinkedHashMapByString.create();var a=0;var t;for(i=0;i<s;i++){var b=d.get(i);var e=q.getDimensionByName(b.getName());var m=e.getMainAttribute();var g;t=e.getText();var h;var l;if(e.isUniversalDisplayHierarchyDimension()){g=b.getResultSetFields();h=g.size();for(j=0;j<h;j++){l=e.getFieldByName(g.get(j).getName());if(j>0){t="";}r.put(l.getName(),f.SacTableAggregation.create(t,l.getName(),e,null,null,-1,l,a,true,i,null,null,false));a++;}}else if(e.getFieldLayoutType()===f.FieldLayoutType.FIELD_BASED){g=e.getResultSetFields();var n=m.getResultSetFields();var o=m.getText();h=g.size();for(j=0;j<h;j++){l=e.getFieldByName(g.get(j).getName());if(l.getObtainability()===f.ObtainabilityType.USER_INTERFACE){continue;}var p=n.contains(l);if(p){t=o;o="";}else{t=l.getText();}r.put(l.getName(),f.SacTableAggregation.create(t,l.getName(),e,null,null,-1,l,a,p,i,null,null,false));a++;}}else{var u=e.getResultSetAttributes();var v=u.size();for(j=0;j<v;j++){var w=u.get(j);var x=w===m;var y=w.getResultSetFields();var z=y.size();t=w.getText();for(var k=0;k<z;k++){var A=e.getFieldByName(y.get(k).getName());if(A.getObtainability()!==f.ObtainabilityType.USER_INTERFACE){if(e.isHierarchyActive()&&A===e.getFlatKeyField()){A=e.getKeyField();}if(!e.isHierarchyActive()&&A===e.getHierarchyKeyField()){A=e.getKeyField();}r.put(A.getName(),f.SacTableAggregation.create(t,A.getName(),e,null,null,-1,A,a,x,i,null,null,false));t="";a++;}}}}}return r;};f.SacTableAggregation.getSimplifiedUniqueName=function(e){var s="";for(var i=0;i<e.size();i++){var p=e.get(i);s=f.XStringUtils.concatenate5(s,"::[",p.getDimension().getName(),"]==>",p.getName());}return s;};f.SacTableAggregation.prototype.m_drillState=null;f.SacTableAggregation.prototype.m_displayLevel=0;f.SacTableAggregation.prototype.m_text=null;f.SacTableAggregation.prototype.m_plain=null;f.SacTableAggregation.prototype.m_dimension=null;f.SacTableAggregation.prototype.m_field=null;f.SacTableAggregation.prototype.m_index=0;f.SacTableAggregation.prototype.m_dimensionIndex=0;f.SacTableAggregation.prototype.m_isMainAttribute=false;f.SacTableAggregation.prototype.m_dimensionMemberType=null;f.SacTableAggregation.prototype.m_dimensionMemberName=null;f.SacTableAggregation.prototype.m_pathKey=null;f.SacTableAggregation.prototype.isRepeatedMemberName=function(){return this.m_repeatedMemberName;};f.SacTableAggregation.prototype.m_repeatedMemberName=false;f.SacTableAggregation.prototype.getText=function(){return this.m_text;};f.SacTableAggregation.prototype.getPlain=function(){return this.m_plain;};f.SacTableAggregation.prototype.getDimension=function(){return this.m_dimension;};f.SacTableAggregation.prototype.getIndex=function(){return this.m_index;};f.SacTableAggregation.prototype.isMainAttribute=function(){return this.m_isMainAttribute;};f.SacTableAggregation.prototype.getDimensionIndex=function(){return this.m_dimensionIndex;};f.SacTableAggregation.prototype.getField=function(){return this.m_field;};f.SacTableAggregation.prototype.getDrillState=function(){return this.m_drillState;};f.SacTableAggregation.prototype.getDisplayLevel=function(){return this.m_displayLevel;};f.SacTableAggregation.prototype.getDimensionMemberType=function(){return this.m_dimensionMemberType;};f.SacTableAggregation.prototype.getDimensionMemberName=function(){return this.m_dimensionMemberName;};f.SacTableAggregation.prototype.getPathKey=function(){return this.m_pathKey;};f.SacTableAggregation.prototype.releaseObject=function(){this.m_drillState=null;this.m_displayLevel=0;this.m_text=null;this.m_plain=null;this.m_dimension=null;this.m_field=null;this.m_index=0;this.m_dimensionIndex=0;this.m_isMainAttribute=false;this.m_dimensionMemberType=null;this.m_dimensionMemberName=null;this.m_pathKey=null;f.XObject.prototype.releaseObject.call(this);};f.FioriGrid=function(){};f.FioriGrid.prototype=new f.XObject();f.FioriGrid.prototype._ff_c="FioriGrid";f.FioriGrid.MAGIC_CELL_DIV="/";f.FioriGrid.create=function(r){var g=new f.FioriGrid();g.setupGrid(r);return g;};f.FioriGrid.prototype.m_cells=null;f.FioriGrid.prototype.m_rowDefs=null;f.FioriGrid.prototype.m_colDefs=null;f.FioriGrid.prototype.m_fixedWidth=0;f.FioriGrid.prototype.m_fixedHeight=0;f.FioriGrid.prototype.m_resultSet=null;f.FioriGrid.prototype.m_semStyles=null;f.FioriGrid.prototype.m_withDetails=false;f.FioriGrid.prototype.m_fixedHeightOff=0;f.FioriGrid.prototype.m_fixedWidthOff=0;f.FioriGrid.prototype.m_offsetRows=0;f.FioriGrid.prototype.m_offsetColumns=0;f.FioriGrid.prototype.m_suppressRepetition=true;f.FioriGrid.prototype.m_suppress_unit=null;f.FioriGrid.prototype.setupGrid=function(r){this.m_resultSet=r;this.m_withDetails=true;this.m_semStyles=new f.XHashMapOfStringByString();};f.FioriGrid.prototype.releaseObject=function(){if(f.notNull(this.m_cells)){var s=this.m_cells.size0();for(var x=0;x<s;x++){var a=this.m_cells.size1();for(var y=0;y<a;y++){var c=this.m_cells.getByIndices(x,y);if(f.notNull(c)){f.XObjectExt.release(c);this.m_cells.setByIndices(x,y,null);}}}f.XObjectExt.release(this.m_cells);this.m_cells=null;}this.m_colDefs=null;this.m_rowDefs=null;this.m_resultSet=null;f.XObject.prototype.releaseObject.call(this);};f.FioriGrid.prototype.prepareCellStructure=function(){if(f.isNull(this.m_cells)&&f.notNull(this.m_resultSet)){this.prepareStructure();}};f.FioriGrid.prototype.prepareStructure=function(){var c=this.m_resultSet.getColumnsAxis();var a=f.XMath.max(c.getDataCount(),c.getTuplesCount());var r=this.m_resultSet.getRowsAxis();this.m_fixedHeight=f.XMath.max(this.getEffectiveFieldSizeCol(c),this.getEffectiveFieldSizeRow(r)===0?0:1);var b=r.getDataCount();var d=r.getTuplesCount();var e=f.XMath.max(b,d);this.m_fixedWidth=f.XMath.max(this.getEffectiveFieldSizeRow(r),1);var t=this.m_fixedWidth+a;var g=this.m_fixedHeight+e;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_cells=f.XArray2Dim.create(t,g);this.m_rowDefs=f.XList.create();this.m_colDefs=f.XList.create();for(var x=0;x<t;x++){this.m_colDefs.add(f.FioriLineDef.create());}for(var y=0;y<g;y++){this.m_rowDefs.add(f.FioriLineDef.create());}this.setTitleCells(r,f.XMath.max(this.m_fixedHeight-1,0),c.getRsDimensions().isEmpty());this.setTitleCells(c,f.XMath.max(this.m_fixedWidth-1,0),r.getRsDimensions().isEmpty());var h=this.m_fixedHeight-this.m_fixedHeightOff;this.setHeaderCells(r,h);var i=this.m_fixedWidth-this.m_fixedWidthOff;this.setHeaderCells(c,i);this.setDataCells();};f.FioriGrid.prototype.getMaxDisplayLevel=function(c,r){var t=c.getTuplesCount();var a=0;for(var b=0;b<t;b++){var d=c.getTupleAt(b);a=f.XMath.max(a,d.getTupleElementByDimension(r).getDisplayLevel());}return a;};f.FioriGrid.prototype.getEffectiveFieldSizeCol=function(a){var e=0;var r=a.getRsDimensions();var d=r.size();for(var i=0;i<d;i++){e=e+r.get(i).getResultSetFields().size();e=e+this.getMaxDisplayLevel(a,r.get(i));}return e;};f.FioriGrid.prototype.getEffectiveFieldSizeRow=function(a){var e=0;var r=a.getRsDimensions();var d=r.size();for(var i=0;i<d;i++){e=e+r.get(i).getResultSetFields().size();}return e;};f.FioriGrid.prototype.setTitleCells=function(a,o,c){var t=a.getType();var r=a.getRsDimensions();var p=0;var b=f.XStringBuffer.create();var d=f.XStringBuffer.create();var e=r.size();for(var i=0;i<e;i++){var g=r.get(i);var v=g.getResultSetFields();var h=v.size();for(var j=0;j<h;j++){var k=v.get(j).getName();if(f.XStringUtils.isNullOrEmpty(g.getName())){b.append("[").append(k).append("]");}else{if(j===0){d.append(g.getText());}if(g.isMeasureStructure()){if(j===0){b.append("Measures");}}else if(g.isStructure()){if(j===0){b.append("Structure");}}else{if(j===0){b.append(g.getName()).append(".[");}else{b.append("[");}b.append(k).append("]");}}if(t===f.AxisType.ROWS){if(!(g.isStructure()&&e===i+1)){var l=f.FioriGridCell.create(b.toString(),f.FioriCellType.TITLE);l.setDisplayValue(d.toString());var m=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(f.notNull(m)){l.setDimension(m);}else{l.setDimension(g.getName());}l.setRow(o);l.setColumn(p);this.setCell(p,o,l);}}else{if(!(g.isStructure()&&e===i+1)){var n=this.m_cells.getByIndices(o,p);if(f.notNull(n)){var s=b.toString();b.clear();d.clear();b.append(n.toString());b.append(f.FioriGrid.MAGIC_CELL_DIV);b.append(s);d.append(n.getDisplayValue());if(j===0&&!g.isStructure()){d.append(f.FioriGrid.MAGIC_CELL_DIV);d.append(g.getText());}}var q=f.FioriGridCell.create(b.toString(),f.FioriCellType.TITLE);q.setRow(p);q.setColumn(o);q.setDisplayValue(d.toString());if(f.notNull(n)){q.setDimension(n.getDimension());var u=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(f.notNull(u)){q.setDimensionOther(u);}else{q.setDimensionOther(g.getName());}}else{var w=this.m_resultSet.getQueryModel().getDimensionByName(g.getName()).getExternalName();if(f.notNull(w)){q.setDimension(w);}else{q.setDimension(g.getName());}}this.setCell(o,p,q);}else if(c){this.m_fixedWidthOff=1;}}b.clear();d.clear();p++;}}};f.FioriGrid.prototype.setDataCells=function(){var r=this.m_resultSet.getInputReadinessStates();var d=this.m_resultSet.getDataColumns();var a=this.m_resultSet.getDataRows();var s=f.XStringBuffer.create();for(var y=0;y<a;y++){for(var x=0;x<d;x++){var b=this.m_resultSet.getDataCell(x,y);var c;if(this.m_withDetails){c=f.FioriGridCell.create(this.getCellValueWithDetails(b,r),f.FioriCellType.DATA);}else{c=f.FioriGridCell.create(this.getCellValue(this.formatDataCellValue(b),b),f.FioriCellType.DATA);}s.clear();this.appendPrefixValueSuffix(b.getCurrencyUnit(),b,s);c.setDisplayValue(s.toString());c.setAlertLevel(b.getMaxAlertLevel().getName());c.setInput(b.isDataEntryEnabled());var e=b.getDataCell();if(f.notNull(e)){s.clear();var g=e.getReferenceStructureElement1();if(f.notNull(g)){s.append("mem-");s.append(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());if(g.getFieldValue(g.getDimension().getDisplayKeyField())!==null){c.setMember(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());}else{c.setMember(g.getName());}}g=e.getReferenceStructureElement2();if(f.notNull(g)){s.append("-mem-");s.append(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());if(g.getFieldValue(g.getDimension().getDisplayKeyField())!==null){c.setMember2(g.getFieldValue(g.getDimension().getDisplayKeyField()).getString());}else{c.setMember(g.getName());}}var h=b.getDocumentId();if(f.XStringUtils.isNotNullAndNotEmpty(h)){c.setDataValueId(f.XStringUtils.concatenate3("docId","-",h));}}c.setRow(y+this.m_fixedHeight-this.m_fixedHeightOff+this.m_offsetRows);c.setColumn(x+this.m_fixedWidth-this.m_fixedWidthOff+this.m_offsetColumns);this.setCell(x+this.m_fixedWidth-this.m_fixedWidthOff,y+this.m_fixedHeight-this.m_fixedHeightOff,c);}}};f.FioriGrid.prototype.formatDataCellValue=function(d){return d.getFormattedValue();};f.FioriGrid.prototype.getCellValueWithDetails=function(d,r){var s=f.XStringBuffer.create();var q=d.getDataCell();if(f.notNull(q)){s.append("(DataCell->").append(q.getName()).append(")");}var a=d.getDecimalPlaces();if(a!==0){s.append("(Decimal Places=").appendInt(a).append(")");}if(d.isDataEntryEnabled()){s.append("I:");}if(d.isValueLocked()){s.append("L:");}var c=d.getCurrencyUnit();this.appendPrefixValueSuffix(c,d,s);this.appendValueException(d,s);this.appendAlertLevel(d,s);this.appendValueChanged(d,s);s.append("|").append(d.getValueType().getName());s.append("|").append(d.getFormatString());this.appendCurrencyUnit(c,s);this.appendInputReadiness(d,r,s);return s.toString();};f.FioriGrid.prototype.appendPrefixValueSuffix=function(c,d,s){if(f.notNull(c)&&f.XString.compare(this.m_suppress_unit,c.getFormatted())===0){s.append(this.formatDataCellValue(d));}else{if(f.notNull(c)&&c.hasPrefix()){s.append(c.getPrefix()).append(" ");}s.append(this.formatDataCellValue(d));if(f.notNull(c)&&c.hasSuffix()){s.append(" ").append(c.getSuffix());}}};f.FioriGrid.prototype.appendValueException=function(d,s){var v=d.getValueException();if(v!==f.ValueException.NORMAL){s.append("|");if(f.isNull(v)){s.append("<null>");}else{s.append(v.getName());}}};f.FioriGrid.prototype.appendInputReadiness=function(d,r,s){var q=d.getQueryModel().getQueryManager();if(q.supportsInputReadinessStates()&&d.getQueryModel().isDataEntryEnabled()){var a=d.getInputReadinessState();if(f.notNull(a)){var b=r.get(a.getIndex());var c=b.getInputReadinessTypes();var t=f.XListOfString.create();for(var i=0;i<c.size();i++){t.add(c.get(i).getShortcut());}s.append("|S:").append(f.XCollectionUtils.join(t,","));}}};f.FioriGrid.prototype.appendAlertLevel=function(d,s){var m=d.getMaxAlertLevel();if(m!==f.AlertLevel.NORMAL){s.append("|[");s.append(f.isNull(m)?"<null>":m.getName());s.append("]");}};f.FioriGrid.prototype.appendValueChanged=function(d,s){if(d.isValueChanged()){s.append("|N:");var n=d.getXValue();if(f.isNull(n)){s.append("<null>");}else{s.append(n.getValueType().getName());if(n.getValueType()===f.XValueType.STRING){s.append(" ").append(n.getString());}}}if(d.isNewValueForced()){s.append("|F:");}};f.FioriGrid.prototype.appendCurrencyUnit=function(c,s){if(f.notNull(c)&&!c.isEmpty()){s.append("|");if(c.isMixed()){s.append("M:");}else if(c.hasUnit()){s.append("U:");}else if(c.hasCurrency()){s.append("C:");}if(c.hasFormatted()){s.append(c.getFormatted());}else{s.append("<null>");}}};f.FioriGrid.prototype.getCellValue=function(a,d){var v=d.getValueException();if(v===f.ValueException.NULL_VALUE||v===f.ValueException.UNDEFINED){return"";}var e=null;if(v!==f.ValueException.NORMAL&&v!==f.ValueException.ZERO){e=v.getName();}var b=null;var m=d.getMaxAlertLevel();if(m!==f.AlertLevel.NORMAL){b=m.getName();}if(f.notNull(e)||f.notNull(b)){var c=f.XStringBuffer.create();c.append(a);if(f.notNull(b)){c.append(" [").append(b).append("]");}if(f.notNull(e)){c.append(" [").append(e).append("]");}return c.toString();}return a;};f.FioriGrid.prototype.setHeaderCells=function(a,t){var r=a.getRsDimensions();var b=a.getType();var c=a.getTuplesCount();var d=f.XStringBuffer.create();var e=f.XStringBuffer.create();var i=a.getType()===f.AxisType.COLUMNS;for(var g=0;g<c;g++){var h=a.getTupleAt(g);var p=0;var j=h.size();for(var k=0;k<j;k++){var l=r.get(k);var m=h.get(k);var n=i?m.getDisplayLevel():0;var o=l.getResultSetFields();var v=o.size();var q=m.getDimensionMember();d.clear();var s=i&&v>0?this.getMaxDisplayLevel(a,l):0;if(i&&v>0&&s>0){for(var u=0;u<=s;++u){var w=f.FioriGridCell.create("",f.FioriCellType.HEADER);w.setDisplayValue("");var x=this.m_resultSet.getQueryModel().getDimensionByName(l.getName()).getExternalName();if(f.notNull(x)){w.setDimension(x);}else{w.setDimension(l.getName());}if(q.getName()!==null&&l.isStructure()&&q.getDimension().getStructureMember(q.getName()).getFieldValue(q.getDimension().getDisplayKeyField())!==null){w.setMember(q.getDimension().getStructureMember(q.getName()).getFieldValue(q.getDimension().getDisplayKeyField()).getString());}else{w.setMember(q.getName());}w.setRow(p+u);w.setColumn(g+t);this.setCell(g+t,p+u,w);}}for(var y=0;y<v;y++){var z=q.getAllFieldValues().getByKey(o.get(y).getName());d.append(this.formatFieldValue(z));e.append(this.formatFieldValue(z));if(y===0){this.prependToFirstField(m,d);this.appendAlertLevelToValue(m,d);}var A=f.FioriGridCell.create(d.toString(),f.FioriCellType.HEADER);if(!this.m_suppressRepetition||m.getFirstTuple()===h){A.setDisplayValue(e.toString());}var B=this.m_resultSet.getQueryModel().getDimensionByName(l.getName()).getExternalName();if(f.notNull(B)){A.setDimension(B);}else{A.setDimension(l.getName());}if(l.isStructure()&&q.getDimension().getStructureMember(q.getName()).getFieldValue(q.getDimension().getDisplayKeyField())!==null){A.setMember(q.getDimension().getStructureMember(q.getName()).getFieldValue(q.getDimension().getDisplayKeyField()).getString());var M=A.getMember();if(f.notNull(M)){A.setSemantic(this.m_semStyles.getByKey(M));}}else{A.setMember(q.getName());}if(a===this.m_resultSet.getRowsAxis()){A.setRowTupleIndex(g);}else{A.setColumnTupleIndex(g);}if(y===0&&m.getFirstTuple()===h){A.setDisplayLevel(i?0:m.getDisplayLevel());var C=m.getDrillState();var D="";if(C===f.DrillState.EXPANDED||C===f.DrillState.DRILLED){A.setDrillState("Expanded");if(l.getLowerLevelNodeAlignment()===f.Alignment.CHILDREN_ABOVE_PARENT){if(b===f.AxisType.ROWS){D="sap-icon://slim-arrow-up";}else{D="sap-icon://slim-arrow-left";}}else{if(b===f.AxisType.ROWS){D="sap-icon://slim-arrow-down";}else{D="sap-icon://slim-arrow-down";}}}else if(C===f.DrillState.COLLAPSED||C===f.DrillState.LEAF_UDH_EXPAND_ALLOWED){A.setDrillState("Collapsed");if(l.getLowerLevelNodeAlignment()===f.Alignment.CHILDREN_ABOVE_PARENT){if(b===f.AxisType.ROWS){D="sap-icon://slim-arrow-right";}else{D="sap-icon://slim-arrow-up";}}else{if(b===f.AxisType.ROWS){D="sap-icon://slim-arrow-right";}else{D="sap-icon://slim-arrow-right";}}}else{A.setDrillState("None");D="";}A.setIcon(D);}var E=A.getMember();if(f.notNull(E)&&this.m_semStyles.getByKey(E)!==null){A.setSemantic(this.m_semStyles.getByKey(E));}d.clear();e.clear();this.addCell(b,p+n,g,t,A);p++;}}}};f.FioriGrid.prototype.formatFieldValue=function(a){if(f.isNull(a)){return"";}else{if(a.getValueType()===f.XValueType.DOUBLE){var v=a.getDouble();return f.XNumberFormatter.formatDoubleToString(v,"#.0000");}else{return a.getFormattedValue();}}};f.FioriGrid.prototype.appendAlertLevelToValue=function(e,a){if(f.XStringUtils.isNotNullAndNotEmpty(e.getExceptionName())){a.append(" [").appendInt(e.getAlertLevel()).append("]");}};f.FioriGrid.prototype.prependToFirstField=function(e,a){var d=e.getDisplayLevel();var b=e.getDrillState();if(d>0||b!==f.DrillState.LEAF){var o=a.toString();a.clear();for(var i=0;i<d;i++){a.append("  ");}if(b===f.DrillState.COLLAPSED||b===f.DrillState.LEAF_DRILLDOWN_ALLOWED||b===f.DrillState.LEAF_UDH_EXPAND_ALLOWED||b===f.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){a.append("+ ");}else if(b===f.DrillState.EXPANDED||b===f.DrillState.DRILLED||b===f.DrillState.LEAF_UDH){a.append("- ");}a.append(o);}};f.FioriGrid.prototype.addCell=function(a,p,t,b,c){if(a===f.AxisType.ROWS){c.setRow(t+b+this.m_offsetRows);c.setColumn(p);this.setCell(p,t+b,c);}else{c.setRow(p);c.setColumn(t+b+this.m_offsetColumns);this.setCell(t+b,p,c);}};f.FioriGrid.prototype.setCell=function(x,y,c){if(this.m_rowDefs.get(y).hasTotals()||this.m_colDefs.get(x).hasTotals()){c.setIsTotal(true);}this.m_cells.setByIndices(x,y,c);};f.FioriGrid.prototype.getColumnCount=function(){return this.m_cells.size0();};f.FioriGrid.prototype.getRowCount=function(){return this.m_cells.size1();};f.FioriGrid.prototype.getFixedColumnsCount=function(){return this.m_fixedWidth;};f.FioriGrid.prototype.getFixedRowsCount=function(){return this.m_fixedHeight;};f.FioriGrid.prototype.getColumnMaxCharacters=function(c,r,m){var a=0;var t=this.m_cells.size1();var b=0;for(var d=r;d<t&&(m===-1||b<m);d++){var e=this.m_cells.getByIndices(c,d);if(f.notNull(e)){a=f.XMath.max(e.getCharacterCount(),a);}b++;}return a;};f.FioriGrid.prototype.getSimpleCell=function(c,r){return this.m_cells.getByIndices(c,r);};f.FioriGrid.prototype.setSuppressUnit=function(u){this.m_suppress_unit=u;};f.FioriGrid.prototype.addSemanticStyle=function(m,s){this.m_semStyles.put(m,s);};f.FioriGrid.prototype.exportToFireflyGrid=function(s){this.m_suppressRepetition=s;this.prepareCellStructure();var c=this.getColumnCount();var r=this.getRowCount();var a=this.getFixedRowsCount();var b=this.getFixedColumnsCount();var l=f.PrFactory.createStructure();l.putString("Type","Grid");l.putString("ApplicationName",this.m_resultSet.getApplication().getApplicationName());l.putInteger("RowCount",r);l.putInteger("ColCount",c);l.putInteger("FixedRows",a);l.putInteger("FixedColumns",b);var d=l.putNewList("Cells");for(var y=0;y<r;y++){for(var x=0;x<c;x++){var g=this.getSimpleCell(x,y);if(f.notNull(g)){var e=d.addNewStructure();e.putString("Type","Text");e.putString("DisplayValue",g.getDisplayValue());e.putString("Value",g.getText(-1));e.putInteger("Row",g.getRow());e.putInteger("Column",g.getColumn());e.putString("DrillState",g.getDrillState());e.putString("DataValueId",g.getDataValueId());e.putInteger("DisplayLevel",g.getDisplayLevel());e.putInteger("RowTupleIndex",g.getRowTupleIndex());e.putInteger("ColumnTupleIndex",g.getColumnTupleIndex());e.putInteger("TupleIndex",g.getRowTupleIndex()>0?g.getRowTupleIndex():g.getColumnTupleIndex());e.putString("Icon",g.getIcon());e.putString("AlertLevel",g.getAlertLevel());e.putBoolean("Input",g.getInput());if(g.isTotals()){e.putBoolean("Totals",true);}var h=g.getCellType();if(h===f.FioriCellType.HEADER){e.putString("Semantic","Header");e.putString("Dimension",g.getDimension());e.putString("Member",g.getMember());e.putString("SemanticClass",g.getSemantic());}else if(h===f.FioriCellType.TITLE){e.putString("Semantic","Title");e.putString("Dimension",g.getDimension());if(g.getDimensionOther()!==null){e.putString("DimensionOther",g.getDimensionOther());}}else if(h===f.FioriCellType.DATA){e.putInteger("DataRow",y-a);e.putInteger("DataColumn",x-b);e.putString("Member",g.getMember());e.putString("Member2",g.getMember2());e.putString("Semantic",g.isTotals()?"Result":"Standard");}else{e.putString("Semantic","Empty");e.putString("GridPart","Empty");}}}}return l;};f.FioriGridCell=function(){};f.FioriGridCell.prototype=new f.XObject();f.FioriGridCell.prototype._ff_c="FioriGridCell";f.FioriGridCell.create=function(c,a){var o=new f.FioriGridCell();o.setupExt(c,a);return o;};f.FioriGridCell.prototype.m_content=null;f.FioriGridCell.prototype.m_isLeftAligned=false;f.FioriGridCell.prototype.m_isTotal=false;f.FioriGridCell.prototype.m_drillState=null;f.FioriGridCell.prototype.m_displayLevel=0;f.FioriGridCell.prototype.m_displayValue=null;f.FioriGridCell.prototype.m_cellType=null;f.FioriGridCell.prototype.m_dataValueId=null;f.FioriGridCell.prototype.m_oDimName=null;f.FioriGridCell.prototype.m_isRep=false;f.FioriGridCell.prototype.m_dimName=null;f.FioriGridCell.prototype.m_memName=null;f.FioriGridCell.prototype.m_memName2=null;f.FioriGridCell.prototype.m_rowIndex=0;f.FioriGridCell.prototype.m_colIndex=0;f.FioriGridCell.prototype.m_icon=null;f.FioriGridCell.prototype.m_alertLevel=null;f.FioriGridCell.prototype.m_input=false;f.FioriGridCell.prototype.m_semantic=null;f.FioriGridCell.prototype.m_row=0;f.FioriGridCell.prototype.m_col=0;f.FioriGridCell.prototype.setupExt=function(c,a){this.m_content=c;this.m_isLeftAligned=a!==f.FioriCellType.DATA;this.m_cellType=a;};f.FioriGridCell.prototype.releaseObject=function(){this.m_content=null;this.m_cellType=null;f.XObject.prototype.releaseObject.call(this);};f.FioriGridCell.prototype.getCharacterCount=function(){if(f.isNull(this.m_content)){return 0;}return f.XString.size(this.m_content);};f.FioriGridCell.prototype.isLeftAligned=function(){return this.m_isLeftAligned;};f.FioriGridCell.prototype.getText=function(m){if(f.isNull(this.m_content)){return"";}if(f.XString.size(this.m_content)>m){return f.XString.substring(this.m_content,0,m);}return this.m_content;};f.FioriGridCell.prototype.getCellType=function(){return this.m_cellType;};f.FioriGridCell.prototype.isTotals=function(){return this.m_isTotal;};f.FioriGridCell.prototype.setIsTotal=function(i){this.m_isTotal=i;};f.FioriGridCell.prototype.setDisplayLevel=function(d){this.m_displayLevel=d;};f.FioriGridCell.prototype.setDrillState=function(d){this.m_drillState=d;};f.FioriGridCell.prototype.toString=function(){if(f.isNull(this.m_content)){return"";}return this.m_content;};f.FioriGridCell.prototype.getDisplayLevel=function(){return this.m_displayLevel;};f.FioriGridCell.prototype.getDrillState=function(){return this.m_drillState;};f.FioriGridCell.prototype.setDisplayValue=function(d){this.m_displayValue=d;};f.FioriGridCell.prototype.getDisplayValue=function(){return this.m_displayValue;};f.FioriGridCell.prototype.setDataValueId=function(d){this.m_dataValueId=d;};f.FioriGridCell.prototype.getDataValueId=function(){return this.m_dataValueId;};f.FioriGridCell.prototype.getDimension=function(){return this.m_dimName;};f.FioriGridCell.prototype.setDimension=function(v){this.m_dimName=v;};f.FioriGridCell.prototype.getMember=function(){return this.m_memName;};f.FioriGridCell.prototype.setMember=function(v){this.m_memName=v;};f.FioriGridCell.prototype.getMember2=function(){return this.m_memName2;};f.FioriGridCell.prototype.setMember2=function(v){this.m_memName2=v;};f.FioriGridCell.prototype.getRowTupleIndex=function(){return this.m_rowIndex;};f.FioriGridCell.prototype.setRowTupleIndex=function(i){this.m_rowIndex=i;};f.FioriGridCell.prototype.getColumnTupleIndex=function(){return this.m_colIndex;};f.FioriGridCell.prototype.setColumnTupleIndex=function(i){this.m_colIndex=i;};f.FioriGridCell.prototype.getIcon=function(){return this.m_icon;};f.FioriGridCell.prototype.setIcon=function(i){this.m_icon=i;};f.FioriGridCell.prototype.getAlertLevel=function(){return this.m_alertLevel;};f.FioriGridCell.prototype.setAlertLevel=function(a){this.m_alertLevel=a;};f.FioriGridCell.prototype.getInput=function(){return this.m_input;};f.FioriGridCell.prototype.setInput=function(i){this.m_input=i;};f.FioriGridCell.prototype.getColumn=function(){return this.m_col;};f.FioriGridCell.prototype.setColumn=function(c){this.m_col=c;};f.FioriGridCell.prototype.getRow=function(){return this.m_row;};f.FioriGridCell.prototype.setRow=function(r){this.m_row=r;};f.FioriGridCell.prototype.getDimensionOther=function(){return this.m_oDimName;};f.FioriGridCell.prototype.setDimensionOther=function(v){this.m_oDimName=v;};f.FioriGridCell.prototype.getIsRepetition=function(){return this.m_isRep;};f.FioriGridCell.prototype.setIsRepetition=function(v){this.m_isRep=v;};f.FioriGridCell.prototype.setSemantic=function(s){this.m_semantic=s;};f.FioriGridCell.prototype.getSemantic=function(){return this.m_semantic;};f.FioriGridFactoryImpl=function(){};f.FioriGridFactoryImpl.prototype=new f.XObject();f.FioriGridFactoryImpl.prototype._ff_c="FioriGridFactoryImpl";f.FioriGridFactoryImpl.create=function(){return new f.FioriGridFactoryImpl();};f.FioriGridFactoryImpl.prototype.createFioriGrid=function(r){return f.FioriGrid.create(r);};f.FioriLineDef=function(){};f.FioriLineDef.prototype=new f.XObject();f.FioriLineDef.prototype._ff_c="FioriLineDef";f.FioriLineDef.create=function(){return new f.FioriLineDef();};f.FioriLineDef.prototype.m_hasTotals=false;f.FioriLineDef.prototype.hasTotals=function(){return this.m_hasTotals;};f.FioriLineDef.prototype.setHasTotals=function(h){this.m_hasTotals=h;};f.FioriLineDef.prototype.toString=function(){return f.XStringBuffer.create().append("Totals:").appendBoolean(this.m_hasTotals).toString();};f.ReferenceGridFactoryImpl=function(){};f.ReferenceGridFactoryImpl.prototype=new f.XObject();f.ReferenceGridFactoryImpl.prototype._ff_c="ReferenceGridFactoryImpl";f.ReferenceGridFactoryImpl.create=function(){return new f.ReferenceGridFactoryImpl();};f.ReferenceGridFactoryImpl.prototype.createReferenceGridSimple=function(r){return f.ReferenceGrid.create(r);};f.ReferenceGridFactoryImpl.prototype.createReferenceGridWithDetails=function(r){return f.ReferenceGrid.createWithDetails(r);};f.ReferenceGridFactoryImpl.prototype.createReferenceGrid=function(r,w){if(w){return this.createReferenceGridWithDetails(r);}return this.createReferenceGridSimple(r);};f.ReferenceGridFactoryImpl.prototype.createReferenceGridWithName=function(n,r){if(f.notNull(n)&&f.XString.endsWith(n,"_gen")){return f.ReferenceGrid2.createWithName2(n,r);}return f.ReferenceGrid.createWithName(n,r);};f.ReferenceGridFactoryImpl.prototype.createReferenceGridWithNameAndDetails=function(n,r){return f.ReferenceGrid.createWithNameAndDetails(n,r);};f.ReferenceGridFactoryImpl.prototype.createForVizGrid=function(r){return f.ReferenceGrid.createForVizGrid(r);};f.KpiRendererFactoryImpl=function(){};f.KpiRendererFactoryImpl.prototype=new f.XObject();f.KpiRendererFactoryImpl.prototype._ff_c="KpiRendererFactoryImpl";f.KpiRendererFactoryImpl.create=function(){return new f.KpiRendererFactoryImpl();};f.KpiRendererFactoryImpl.prototype.newRenderer=function(p){return f.RsKpiRenderer.create();};f.RsKpiRenderer=function(){};f.RsKpiRenderer.prototype=new f.XObject();f.RsKpiRenderer.prototype._ff_c="RsKpiRenderer";f.RsKpiRenderer.create=function(){return new f.RsKpiRenderer();};f.RsKpiRenderer.processMetricData=function(c,r,v){var t=f.PrFactory.createStructure();var a=t.putNewStructure(f.VizDefConstants.K_CHART);a.putString(f.VizDefConstants.K_TYPE,f.SapKpiConstants.K_METRIC);var s=t.putNewStructure(f.SapKpiConstants.K_SAP_CARD);s.putString(f.VizDefConstants.K_TYPE,f.SapKpiConstants.K_ANALYTICAL);var h=s.putNewStructure(f.SapKpiConstants.K_HEADER);h.putString(f.VizDefConstants.K_TYPE,f.SapKpiConstants.K_NUMERIC);h.putString(f.VizDefConstants.K_TITLE,v.getStructureByKey(f.VizDefConstants.K_CHART).getStringByKey(f.VizDefConstants.K_TITLE));h.putString(f.VizDefConstants.K_SUB_TITLE,v.getStructureByKey(f.VizDefConstants.K_CHART).getStringByKey(f.VizDefConstants.K_SUB_TITLE));var b=f.XListOfString.create();b.add(f.VizDefConstants.K_VALUE_AXIS);b.add(f.VizDefConstants.K_VALUE_AXIS2);b.add(f.VizDefConstants.K_THRESHOLD_REFERENCE);b.add(f.VizDefConstants.K_VARIANCE);var d=c.getIndicesByFeedOrder(b);var n=c.hasTupleForFeed(f.VizDefConstants.K_VALUE_AXIS);var e=h.putNewList(f.SapKpiConstants.K_SIDEINDICATORS);var m=null;var g="";var j="";for(var i=0;i<d.size();i++){var k=d.get(i).getInteger();var l=c.getTupleAt(k);var o=l.getPrettyText(b);var p=r.getDataCell(k,0);if(n&&l.isSelectedByString(f.VizDefConstants.K_VALUE_AXIS)){h.putString(f.SapKpiConstants.K_UNIT_OF_MEASUREMENT,p.getCurrencyUnit().getFormatted());h.putString(f.VizDefConstants.K_SUB_TITLE,o);m=h.putNewStructure(f.SapKpiConstants.K_MAININDICATOR);f.RsKpiRenderer.addIndicatorContent(l,p,m);n=false;}else if(l.isSelectedByString(f.VizDefConstants.K_VALUE_AXIS2)){var q=e.addNewStructure();q.putString(f.VizDefConstants.K_TITLE,o);f.RsKpiRenderer.addIndicatorContent(l,p,q);}if(l.isSelectedByString(f.VizDefConstants.K_THRESHOLD_REFERENCE)){var u=f.XInteger.convertToString((p.getExceptionSettingPriorityByName(f.ExceptionSetting.ALERT_LEVEL.getName()).getInteger()-1)/3);if(f.RsKpiRenderer.getStateMap().containsKey(u)){g=f.RsKpiRenderer.getStateMap().getStringByKey(u);}}if(l.isSelectedByString(f.VizDefConstants.K_VARIANCE)){var w=p.getDouble();if(w!==0){j=w>0?f.SapKpiConstants.V_UP:f.SapKpiConstants.V_DOWN;}}}if(f.notNull(m)){if(!f.XString.isEqual(g,"")){m.putString(f.SapKpiConstants.K_STATE,g);}if(!f.XString.isEqual(j,"")){m.putString(f.SapKpiConstants.K_TREND,j);}}return t;};f.RsKpiRenderer.unitMap=null;f.RsKpiRenderer.stateMap=null;f.RsKpiRenderer.getStateMap=function(){if(f.isNull(f.RsKpiRenderer.stateMap)){f.RsKpiRenderer.stateMap=f.PrFactory.createStructure();f.RsKpiRenderer.stateMap.putString("0",f.SapKpiConstants.V_GOOD);f.RsKpiRenderer.stateMap.putString("1",f.SapKpiConstants.V_CRITICAL);f.RsKpiRenderer.stateMap.putString("2",f.SapKpiConstants.V_ERROR);}return f.RsKpiRenderer.stateMap;};f.RsKpiRenderer.getUnitMap=function(){if(f.isNull(f.RsKpiRenderer.unitMap)){f.RsKpiRenderer.unitMap=f.PrFactory.createStructure();f.RsKpiRenderer.unitMap.putString("-3","K");f.RsKpiRenderer.unitMap.putString("-6","M");f.RsKpiRenderer.unitMap.putString("-9","B");}return f.RsKpiRenderer.unitMap;};f.RsKpiRenderer.addIndicatorContent=function(t,d,i){var u=f.RsKpiRenderer.getUnitMap();var a="";var s=f.XInteger.convertToString(t.getNumericShift());if(u.containsKey(s)){a=u.getStringByKey(s);}var n=f.XStringBuffer.create();n.append(!d.getCurrencyUnit().isEmpty()?d.getCurrencyUnit().getSuffix():"");n.append(t.getFormattedValue(d));i.putString(f.SapKpiConstants.K_UNIT,a);i.putString(f.SapKpiConstants.K_NUMBER,n.toString());};f.RsKpiRenderer.prototype.render=function(r){var v=r.getQueryModel().getVizManager().getVizDef();var g=r.getQueryModel().getVizManager().getGlobalDef();if(f.notNull(v)&&v.containsKey(f.VizDefConstants.K_CHART)&&r.getAvailableDataCellCount()>0){var c=v.getStructureByKey(f.VizDefConstants.K_CHART);if(f.XString.isEqual(c.getStringByKey(f.VizDefConstants.K_TYPE),f.SapKpiConstants.K_METRIC)){var a=f.RsVizAxisExtractor.extractCustomFormatting(v,g);var b=v.getStructureByKey("feedMembers");var d=f.RsVizAxisExtractor.getTuplesFromColumnAxis(r,b,a);return f.RsKpiRenderer.processMetricData(d,r,v);}}return f.PrFactory.createStructure();};f.SapKpiConstants={K_METRIC:"metric",K_SAP_CARD:"sap.card",K_ANALYTICAL:"Analytical",K_HEADER:"header",K_NUMERIC:"Numeric",K_SIDEINDICATORS:"sideIndicators",K_UNIT_OF_MEASUREMENT:"unitOfMeasurement",K_MAININDICATOR:"mainIndicator",K_UNIT:"unit",K_NUMBER:"number",K_THRESHOLDREFERENCE:"thresholdReference",K_VARIANCE:"variance",K_STATE:"state",K_TREND:"trend",K_FEEDMEMBERS:"feedMembers",K_GLOBALOBJECTS:"GlobalObjects",K_CALCULATIONS:"Calculations",V_GOOD:"Good",V_CRITICAL:"Critical",V_ERROR:"Error",V_CALCULATION:"calculation",V_UP:"Up",V_DOWN:"Down"};f.GoogleChartBar=function(){};f.GoogleChartBar.prototype=new f.GoogleChart();f.GoogleChartBar.prototype._ff_c="GoogleChartBar";f.GoogleChartBar.create=function(){return new f.GoogleChartBar();};f.GoogleChartBar.prototype.getChartName=function(){return"BarChart";};f.GoogleChartBar.prototype.addChartSpecificOptions=function(s,v){var a=v.getStructureByKey(f.VizDefConstants.K_CHART);var b=a.getStringByKey(f.VizDefConstants.K_TYPE);s.putBoolean(f.GoogleConstants.K_STACKED,f.XString.isEqual(b,f.VizDefConstants.V_STACKED_BAR));var c=s.putNewStructure(f.GoogleConstants.K_BAR);c.putString(f.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_VERTICAL_AXIS),v,f.VizDefConstants.K_CATEGORY_AXIS,true);this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_HORIZONTAL_AXIS),v,f.VizDefConstants.K_VALUE_AXIS,false);};f.GoogleChartColumn=function(){};f.GoogleChartColumn.prototype=new f.GoogleChart();f.GoogleChartColumn.prototype._ff_c="GoogleChartColumn";f.GoogleChartColumn.create=function(){return new f.GoogleChartColumn();};f.GoogleChartColumn.prototype.getChartName=function(){return"ColumnChart";};f.GoogleChartColumn.prototype.addChartSpecificOptions=function(s,v){var a=v.getStructureByKey(f.VizDefConstants.K_CHART);var b=a.getStringByKey(f.VizDefConstants.K_TYPE);s.putBoolean(f.GoogleConstants.K_STACKED,f.XString.isEqual(b,f.VizDefConstants.V_STACKED_BAR));var c=s.putNewStructure(f.GoogleConstants.K_BAR);c.putString(f.GoogleConstants.K_GROUP_WIDTH,"50%");this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_VERTICAL_AXIS),v,f.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_HORIZONTAL_AXIS),v,f.VizDefConstants.K_CATEGORY_AXIS,true);};f.GoogleChartLine=function(){};f.GoogleChartLine.prototype=new f.GoogleChart();f.GoogleChartLine.prototype._ff_c="GoogleChartLine";f.GoogleChartLine.POINT_SIZE=3;f.GoogleChartLine.create=function(){return new f.GoogleChartLine();};f.GoogleChartLine.prototype.getChartName=function(){return"LineChart";};f.GoogleChartLine.prototype.addChartSpecificOptions=function(s,v){s.putInteger(f.GoogleConstants.K_POINT_SIZE,f.GoogleChartLine.POINT_SIZE);this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_VERTICAL_AXIS),v,f.VizDefConstants.K_VALUE_AXIS,false);this.setAxisStyle(s.putNewStructure(f.GoogleConstants.K_HORIZONTAL_AXIS),v,f.VizDefConstants.K_CATEGORY_AXIS,true);};f.RsHiChartCovariationHelper=function(){};f.RsHiChartCovariationHelper.prototype=new f.RsHiChartRenderHelper();f.RsHiChartCovariationHelper.prototype._ff_c="RsHiChartCovariationHelper";f.RsHiChartCovariationHelper.prototype.m_xMeasures=null;f.RsHiChartCovariationHelper.prototype.m_yMeasures=null;f.RsHiChartCovariationHelper.prototype.m_zMeasures=null;f.RsHiChartCovariationHelper.prototype.m_xColors=null;f.RsHiChartCovariationHelper.prototype.m_yColors=null;f.RsHiChartCovariationHelper.prototype.m_zColors=null;f.RsHiChartCovariationHelper.prototype.m_xPatterns=null;f.RsHiChartCovariationHelper.prototype.m_yPatterns=null;f.RsHiChartCovariationHelper.prototype.m_zPatterns=null;f.RsHiChartCovariationHelper.prototype.m_xList=null;f.RsHiChartCovariationHelper.prototype.m_yList=null;f.RsHiChartCovariationHelper.prototype.m_zList=null;f.RsHiChartCovariationHelper.prototype.m_xListFormatted=null;f.RsHiChartCovariationHelper.prototype.m_yListFormatted=null;f.RsHiChartCovariationHelper.prototype.m_zListFormatted=null;f.RsHiChartCovariationHelper.prototype.m_categoriesList=null;f.RsHiChartCovariationHelper.prototype.m_categoryLabels=null;f.RsHiChartCovariationHelper.prototype.m_tooltipValueMeasures=null;f.RsHiChartCovariationHelper.prototype.m_tooltipList=null;f.RsHiChartCovariationHelper.prototype.m_tooltipListFormatted=null;f.RsHiChartCovariationHelper.prototype.m_colorList=null;f.RsHiChartCovariationHelper.prototype.getColorList=function(){return this.m_colorList;};f.RsHiChartCovariationHelper.prototype.getCategoriesList=function(){return this.m_categoriesList;};f.RsHiChartCovariationHelper.prototype.getCategoryLabels=function(){return this.m_categoryLabels;};f.RsHiChartCovariationHelper.prototype.getXMeasures=function(){return this.m_xMeasures;};f.RsHiChartCovariationHelper.prototype.getYMeasures=function(){return this.m_yMeasures;};f.RsHiChartCovariationHelper.prototype.getZMeasures=function(){return this.m_zMeasures;};f.RsHiChartCovariationHelper.prototype.getXColors=function(){return this.m_xColors;};f.RsHiChartCovariationHelper.prototype.getYColors=function(){return this.m_yColors;};f.RsHiChartCovariationHelper.prototype.getZColors=function(){return this.m_zColors;};f.RsHiChartCovariationHelper.prototype.getXPatterns=function(){return this.m_xPatterns;};f.RsHiChartCovariationHelper.prototype.getYPatterns=function(){return this.m_yPatterns;};f.RsHiChartCovariationHelper.prototype.getZPatterns=function(){return this.m_zPatterns;};f.RsHiChartCovariationHelper.prototype.getXList=function(){return this.m_xList;};f.RsHiChartCovariationHelper.prototype.getXListRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_xList)){return this.m_xList.getListAt(0);}return null;};f.RsHiChartCovariationHelper.prototype.getYListRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_yList)){return this.m_yList.getListAt(0);}return this.getXListRemapped();};f.RsHiChartCovariationHelper.prototype.getZListRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_zList)){return this.m_zList.getListAt(0);}return this.getYListRemapped();};f.RsHiChartCovariationHelper.prototype.getXListFormattedRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_xListFormatted)){return this.m_xListFormatted.getListAt(0);}return null;};f.RsHiChartCovariationHelper.prototype.getYListFormattedRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_yListFormatted)){return this.m_yListFormatted.getListAt(0);}return this.getXListFormattedRemapped();};f.RsHiChartCovariationHelper.prototype.getZListFormattedRemapped=function(){if(f.XCollectionUtils.hasElements(this.m_zListFormatted)){return this.m_zListFormatted.getListAt(0);}return this.getYListFormattedRemapped();};f.RsHiChartCovariationHelper.prototype.getYList=function(){return this.m_yList;};f.RsHiChartCovariationHelper.prototype.getZList=function(){return this.m_zList;};f.RsHiChartCovariationHelper.prototype.getXListFormatted=function(){return this.m_xListFormatted;};f.RsHiChartCovariationHelper.prototype.getYListFormatted=function(){return this.m_yListFormatted;};f.RsHiChartCovariationHelper.prototype.getZListFormatted=function(){return this.m_zListFormatted;};f.RsHiChartCovariationHelper.prototype.readResultSetData=function(c,r,a){var t=this.getChartData();var h=true;if(a.getAvailableDataCellCount()>0){this.m_xMeasures=f.XListOfString.create();this.m_yMeasures=f.XListOfString.create();this.m_zMeasures=f.XListOfString.create();this.m_xPatterns=f.XListOfString.create();this.m_yPatterns=f.XListOfString.create();this.m_zPatterns=f.XListOfString.create();this.m_xColors=f.XListOfString.create();this.m_yColors=f.XListOfString.create();this.m_zColors=f.XListOfString.create();var b=f.XListOfString.create();if(f.XStringUtils.isNotNullAndNotEmpty(this.getXFeed())){b.add(this.getXFeed());}if(f.XStringUtils.isNotNullAndNotEmpty(this.getYFeed())){b.add(this.getYFeed());}if(f.XStringUtils.isNotNullAndNotEmpty(this.getZFeed())){b.add(this.getZFeed());}this.m_tooltipValueMeasures=f.XListOfString.create();b.add(f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);this.m_colorList=c.getPrettyNamesForFeed(true,!h,f.VizDefConstants.K_COLOR);this.m_categoriesList=r.getPrettyNames(true,!h);this.m_categoryLabels=r.getLabels(true,!h,true);if(!f.XCollectionUtils.hasElements(this.m_categoriesList)){this.m_categoriesList=f.XListOfString.create();this.m_categoriesList.add("");}this.m_xList=f.PrFactory.createList();this.m_yList=f.PrFactory.createList();this.m_zList=f.PrFactory.createList();this.m_tooltipList=f.PrFactory.createList();this.m_xListFormatted=f.PrFactory.createList();this.m_yListFormatted=f.PrFactory.createList();this.m_zListFormatted=f.PrFactory.createList();this.m_tooltipListFormatted=f.PrFactory.createList();var d;var e;var g;var k=f.XListOfString.create();k.add(f.VizDefConstants.K_CATEGORY_AXIS);k.add(f.VizDefConstants.K_COLOR);var l=c.getIndicesByFeedOrder(b);for(var m=0;m<l.size();m++){var i=l.get(m).getInteger();var n=c.getTupleAt(i);if(n.isSelectedByString(this.getXFeed())){var x=n.getPrettyTextForFeed(this.getXFeed());if(!this.m_xMeasures.contains(x)){this.m_xMeasures.add(x);this.m_xPatterns.add(n.getPattern());this.m_xColors.add(n.getColor());}d=this.m_xList.addNewList();e=this.m_xListFormatted.addNewList();g=this.getXFeed();}else if(this.getYFeed()!==null&&n.isSelectedByString(this.getYFeed())){var y=n.getPrettyTextForFeed(this.getYFeed());if(!this.m_yMeasures.contains(y)){this.m_yMeasures.add(y);this.m_yPatterns.add(n.getPattern());this.m_yColors.add(n.getColor());}d=this.m_yList.addNewList();e=this.m_yListFormatted.addNewList();g=this.getYFeed();}else if(this.getZFeed()!==null&&n.isSelectedByString(this.getZFeed())){var z=n.getPrettyTextForFeed(this.getZFeed());if(!this.m_zMeasures.contains(z)){this.m_zMeasures.add(z);this.m_zPatterns.add(n.getPattern());this.m_zColors.add(n.getColor());}d=this.m_zList.addNewList();e=this.m_zListFormatted.addNewList();g=this.getZFeed();}else if(n.isSelectedByString(f.VizDefConstants.K_TOOLTIP_VALUE_AXIS)){var o=n.getPrettyTextForFeed(f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);if(!this.m_tooltipValueMeasures.contains(o)){this.m_tooltipValueMeasures.add(o);}d=this.m_tooltipList.addNewList();e=this.m_tooltipListFormatted.addNewList();g="";}else{continue;}if(r.getTuplesCount()>0){for(var j=0;j<r.getTuplesCount();j++){if(h&&r.getTupleAt(j).isTotal()){continue;}this.addValueToList(a,i,j,d,e,g,c,n);}}else{this.addValueToList(a,i,0,d,e,g,c,n);}}var p=f.XStringBuffer.create();p.append("<b>{series.name}</b><br/>");this.decorateToolTip(p);for(var q=0;q<this.m_tooltipListFormatted.size();q++){p.append("<b>{point.tHeader");p.append(f.XInteger.convertToString(q));p.append("}</b>  {point.tFormatted");p.append(f.XInteger.convertToString(q));p.append("}<br/>");}p.append("{point.errorRange}");var s=t.putNewStructure(f.VizDefConstants.K_TOOLTIP);s.putString(f.VizDefConstants.K_POINT_FORMAT,p.toString());s.putString(f.VizDefConstants.K_HEADER_FORMAT,"");}this.setShowLegend(this.getXList().size()>1);};f.RsHiChartCovariationHelper.prototype.decorateToolTip=function(s){};f.RsHiChartCovariationHelper.prototype.addValueToList=function(r,i,j,c,a,b,d,e){var g=r.getDataCell(i,j);var v=g.getValueType();if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){if(g.getXValue()===null){c.addDouble(0);}else{c.addDouble(g.getDouble());}var h=d.getFormattedValue(b,e,g);a.addString(h);}};f.RsHiChartCovariationHelper.prototype.addToolTipsToSeries=function(n,x,r){if(f.XCollectionUtils.hasElements(this.m_tooltipValueMeasures)){var t=this.m_tooltipValueMeasures.size();for(var j=0;j<t;j++){n.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_HEADER,f.XInteger.convertToString(j)),this.m_tooltipValueMeasures.get(j));n.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_FORMATTED,f.XInteger.convertToString(j)),this.m_tooltipListFormatted.getListAt(x*t+j).getStringAt(r));}}};f.RsHiChartHeatmapHelper=function(){};f.RsHiChartHeatmapHelper.prototype=new f.RsHiChartRenderHelper();f.RsHiChartHeatmapHelper.prototype._ff_c="RsHiChartHeatmapHelper";f.RsHiChartHeatmapHelper.prototype.isShowLegend=function(){return false;};f.RsHiChartHeatmapHelper.prototype.prepareRendering=function(){};f.RsHiChartHeatmapHelper.prototype.readResultSetData=function(c,r,a){var t=this.getChartData();var l=f.XList.create();var b=t.putNewStructure(f.VizDefConstants.K_LANG);if(a.getAvailableDataCellCount()>0){var d=true;var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var e=x.addNewStructure();var g=y.addNewStructure();var k=g.putNewList(f.VizDefConstants.K_CATEGORIES);var m=e.putNewList(f.VizDefConstants.K_CATEGORIES);var s=t.putNewList(f.VizDefConstants.K_SERIES);var n=s.addNewStructure();var o=n.putNewStructure(f.VizDefConstants.K_DATA_LABELS);o.putString(f.VizDefConstants.K_POINT_FORMAT,"{point.valueFormatted}");var p=n.putNewList(f.VizDefConstants.K_DATA);var q=f.XStringBuffer.create();var u=f.XListOfString.create();u.add(f.VizDefConstants.K_COLOR);var v=f.XListOfString.create();q.append("<b>{point.xCategory} / {point.yCategory}</b><br/><b>{point.series.name}</b>:  {point.valueFormatted}<br/>");var w=c.getPrettyNamesForFeed(true,!d,f.VizDefConstants.K_CATEGORY_AXIS2).getIterator();while(w.hasNext()){m.addString(w.next());}var z=f.XCollectionUtils.hasElements(m)&&m.size()>1;var A=r.getPrettyNamesForFeed(true,!d,f.VizDefConstants.K_CATEGORY_AXIS).getIterator();var B=c.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var h=0;h<B.size();h++){q.append("<b>{point.tHeader");q.append(f.XInteger.convertToString(h));q.append("}</b>:  {point.tFormatted");q.append(f.XInteger.convertToString(h));q.append("}<br/>");}while(A.hasNext()){k.addString(A.next());}if(m.isEmpty()){m.addString("");}if(k.isEmpty()){k.addString("");}var C=0;var D=c.getIndicesByFeedOrder(u);for(var E=0;E<D.size();E++){var i=D.get(E).getInteger();var F=c.getTupleAt(i);if(!F.isSelectedByString(f.VizDefConstants.K_COLOR)){continue;}if(d&&c.getTupleAt(i).isTotal()){continue;}v.add(F.getPrettyTextForFeed(f.VizDefConstants.K_COLOR));var G=F.getMemberKeys();var H=null;var I=null;if(f.XCollectionUtils.hasElements(G)){H=c.getMatchingTupleIndicesForMemberNameAndFeed(G,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);}var J=0;for(var j=0;j<r.getTuplesCount();j++){if(!r.getTupleAt(j).isSelectedByString(f.VizDefConstants.K_CATEGORY_AXIS)){continue;}if(f.XCollectionUtils.hasElements(H)){I=f.XListOfString.create();for(var K=0;K<H.size();K++){var L=H.get(K).getInteger();I.add(c.getFormattedValue(f.VizDefConstants.K_COLOR,c.getTupleAt(L),a.getDataCell(L,j)));}}var M=a.getDataCell(i,j);var N=f.PrFactory.createStructure();var O=M.getXValue();if(!d||!r.getTupleAt(j).isTotal()){if(f.notNull(O)){N.putInteger(f.VizDefConstants.K_X,z?C:J);N.putInteger(f.VizDefConstants.K_Y,z?J:C);N.putDouble(f.VizDefConstants.K_VALUE,M.getDouble());N.putString(f.VizDefConstants.K_VALUE_FORMATTED,M.getFormattedValue());N.putString(f.VizDefConstants.K_X_CATEGORY,f.XCollectionUtils.hasElements(m)&&C<m.size()?m.getStringAt(C):"");N.putString(f.VizDefConstants.K_Y_CATEGORY,f.XCollectionUtils.hasElements(k)&&J<k.size()?k.getStringAt(J):"");if(f.XCollectionUtils.hasElements(B)){for(var P=0;P<B.size();P++){N.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_HEADER,f.XInteger.convertToString(P)),B.get(P));}}if(f.XCollectionUtils.hasElements(I)){for(var Q=0;Q<I.size();Q++){N.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_FORMATTED,f.XInteger.convertToString(Q)),I.get(Q));}}p.add(N);l.add(f.XDoubleValue.create(M.getDouble()));}}J++;}C++;}if(!z){g.put(f.VizDefConstants.K_CATEGORIES,m);e.put(f.VizDefConstants.K_CATEGORIES,k);}if(f.XCollectionUtils.hasElements(v)){n.putString(f.VizDefConstants.K_NAME,v.get(0));}var R=f.XDoubleValue.create(1);if(l.size()>1){l.sortByComparator(new f.XComparatorDouble());R=l.get(l.size()-1);}n.putInteger(f.VizDefConstants.K_BORDER_WIDTH,2);n.putString(f.VizDefConstants.K_BORDER_COLOR,"white");t.putDouble(f.VizDefConstants.K_MIN_ELEMENT,l.get(0).getDouble());t.putDouble(f.VizDefConstants.K_MAX_ELEMENT,R.getDouble());var S=t.putNewStructure(f.VizDefConstants.K_TOOLTIP);S.putString(f.VizDefConstants.K_POINT_FORMAT,q.toString());S.putString(f.VizDefConstants.K_HEADER_FORMAT,"");f.RsHiChartVizUtilsHeatmap.rendrerHeatmap(t,this.getChartType(),this.getVizDef(),this.getGlobalDef());}else{t.putBoolean(f.VizDefConstants.K_FULL_SCREEN_ENABLED,false);b.putString(f.VizDefConstants.K_NO_DATA,"FireFly Resultset is empty.");}};f.RsHiChartHeatmapHelper.prototype.finishRendering=function(){f.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef());};f.RsHiChartSeriesHelper=function(){};f.RsHiChartSeriesHelper.prototype=new f.RsHiChartRenderHelper();f.RsHiChartSeriesHelper.prototype._ff_c="RsHiChartSeriesHelper";f.RsHiChartSeriesHelper.prototype.getChartWidth=function(){return this.m_chartWidth;};f.RsHiChartSeriesHelper.prototype.setChartWidth=function(c){this.m_chartWidth=c;};f.RsHiChartSeriesHelper.prototype.m_hasVariance=false;f.RsHiChartSeriesHelper.prototype.m_widthScale=0;f.RsHiChartSeriesHelper.prototype.m_chartWidth=0;f.RsHiChartSeriesHelper.prototype.isTimeseries=function(){return false;};f.RsHiChartSeriesHelper.prototype.isCombinationChart=function(){return f.XStringUtils.isNotNullAndNotEmpty(this.getSecondChart());};f.RsHiChartSeriesHelper.prototype.reiterateResultSet=function(c,r,a){var t=this.getChartData();var h=c.hasTupleForFeed(f.VizDefConstants.K_VALUE_AXIS2);var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var b=y.addNewStructure();var x;var d;var p=f.PrFactory.createStructure();p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);var e=f.VizDefConstants.K_TRANSPARENT;if(t.getListByKey(f.VizDefConstants.K_COLORS)!==null){if(t.getListByKey(f.VizDefConstants.K_COLORS).size()>0){e=t.getListByKey(f.VizDefConstants.K_COLORS).getStringAt(0);}}if(f.isNull(p)){p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);}var s=t.getListByKey(f.VizDefConstants.K_SERIES);var g=null;var i=0;if(this.isTimeseries()){x=t.putNewList(f.VizDefConstants.K_X_AXIS);d=x.addNewStructure();d.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_DATE_TIME);}else{x=t.getListByKey(f.VizDefConstants.K_X_AXIS);if(f.isNull(x)){x=t.putNewList(f.VizDefConstants.K_X_AXIS);}d=x.getStructureAt(0);if(f.isNull(d)){d=x.addNewStructure();}}var j=null;if(h){j=y.addNewStructure();f.RsHiChartVizUtilsSimple.plotOptionChart(j,this.getSecondChart(),null,p,1,e);j.putBoolean(f.VizDefConstants.K_OPPOSITE,true);if(this.isHasVariance()){if(this.isInverted()){j.putString(f.VizDefConstants.K_WIDTH,"50%");}else{j.putString(f.VizDefConstants.K_WIDTH,"50%");b.putString(f.VizDefConstants.V_POSITION_TOP,"50%");}}f.RsHiChartVizUtilsSimple.dataLabelAlignment(j,this.getSecondChart(),c.getDecimalPlaces(f.VizDefConstants.K_VALUE_AXIS2),false);}var k;var l;var m=false;var v=null;if(this.getVizDef()!==null){v=this.getVizDef().getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(v)){var n=v.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS);if(f.notNull(n)&&!this.isPolar()){d=f.RsHiChartUtils.axisPloter(n,d,this.getChartType(),true);}var o=v.getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);if(f.notNull(o)&&!this.isPolar()){b=f.RsHiChartUtils.axisPloter(o,b,this.getChartType(),false);}f.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),b,j,c,r,a);}}if(this.isHasVariance()){var q=y.addNewStructure();if(this.isInverted()){b.putString(f.VizDefConstants.K_WIDTH,"50%");q.putString(f.VizDefConstants.K_WIDTH,"50%");q.putString(f.VizDefConstants.V_LEFT,"50%");}else{b.putString(f.VizDefConstants.K_HEIGHT,"50%");q.putString(f.VizDefConstants.K_HEIGHT,"50%");b.putString(f.VizDefConstants.V_POSITION_TOP,"50%");}if(f.notNull(v)){var u=v.getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);if(f.notNull(u)){f.RsHiChartUtils.axisPloter(u,q,this.getChartType(),false);}}f.RsHiChartVizUtilsSimple.plotOptionChart(q,this.getChartType(),null,p,this.isCombinationChart()?2:1,e);}f.RsHiChartVizUtilsSimple.legendStyler(t);if(m){for(var z=0;z<s.size();z++){f.RsHiChartVizUtilsSimple.plotOptionChart(b,this.getChartType(),this.getStackingType(),p,0,e);k=s.getStructureAt(z);g=k.getStringByKey(f.VizDefConstants.K_TYPE);if(f.XString.isEqual(g,f.VizDefConstants.K_ERRORBAR)){i=z;l=s.getStructureAt(i-1);var w=k.putNewStructure(f.VizDefConstants.K_DATA_LABELS);w.putBoolean(f.VizDefConstants.K_ENABLED,true);var A=w.putNewStructure(f.VizDefConstants.K_STYLE);A.putString(f.VizDefConstants.K_FILL,"black");A.putString(f.VizDefConstants.K_COLOR,"black");var B=l.putNewStructure(f.VizDefConstants.K_DATA_LABELS);B.putBoolean(f.VizDefConstants.K_ENABLED,false);}}}else{f.RsHiChartVizUtilsSimple.plotOptionChart(b,this.getChartType(),this.getStackingType(),p,0,e);}var C=f.XStringUtils.isNullOrEmpty(this.getSecondChart())&&f.XString.isEqual(f.VizDefConstants.V_NORMAL,this.getStackingType())&&(f.XString.isEqual(this.getChartType(),f.VizDefConstants.V_CHART_TYPE_BAR)||f.XString.isEqual(this.getChartType(),f.VizDefConstants.V_CHART_TYPE_COLUMN));f.RsHiChartVizUtilsSimple.dataLabelAlignment(b,this.getChartType(),c.getDecimalPlaces(f.VizDefConstants.K_VALUE_AXIS),C);var D=f.XString.isEqual(f.VizDefConstants.K_LINE,this.getChartType());var E=f.XString.isEqual(f.VizDefConstants.K_AREA,this.getChartType());if(!this.isPolar()&&!this.isTimeseries()&&!D&&!E){if(this.getChartWidth()>3&&this.getChartWidth()*this.getWidthScale()>20){var F=d.putNewStructure(f.VizDefConstants.K_SCROLL_BAR);F.putBoolean(f.VizDefConstants.K_SHOW_FULL,false);F.putBoolean(f.VizDefConstants.K_ENABLED,true);d.putInteger(f.VizDefConstants.K_MIN,0);d.putInteger(f.VizDefConstants.K_MAX,f.XMath.max(1,f.XMath.div(f.XMath.min(13,this.getChartWidth()),f.XMath.max(1,this.getWidthScale()))));}}var G=f.XString.isEqual(f.VizDefConstants.V_CHART_TYPE_BAR,this.getChartType());if(G){var H=b.containsKey(f.VizDefConstants.K_PLOT_LINES)?b.getListByKey(f.VizDefConstants.K_PLOT_LINES):b.putNewList(f.VizDefConstants.K_PLOT_LINES);var I=H.addNewStructure();I.putString(f.VizDefConstants.K_COLOR,f.VizDefConstants.V_BLACK);I.putInteger(f.VizDefConstants.K_WIDTH,2);I.putInteger(f.VizDefConstants.K_VALUE,0);I.putString(f.VizDefConstants.K_ID,f.VizDefConstants.V_BASE_PLOTLINE_ID);I.putInteger(f.VizDefConstants.K_Z_INDEX,6);}};f.RsHiChartSeriesHelper.prototype.getWidthScale=function(){return this.m_widthScale;};f.RsHiChartSeriesHelper.prototype.setWidthScale=function(w){this.m_widthScale=w;};f.RsHiChartSeriesHelper.prototype.isHasVariance=function(){return this.m_hasVariance;};f.RsHiChartSeriesHelper.prototype.setHasVariance=function(h){this.m_hasVariance=h;};f.RsHiChartUnsupportedHelper=function(){};f.RsHiChartUnsupportedHelper.prototype=new f.RsHiChartRenderHelper();f.RsHiChartUnsupportedHelper.prototype._ff_c="RsHiChartUnsupportedHelper";f.RsHiChartUnsupportedHelper.prototype.prepareRendering=function(){};f.RsHiChartUnsupportedHelper.prototype.isUnsupported=function(){return true;};f.RsHiChartUnsupportedHelper.prototype.readResultSetData=function(c,r,a){};f.RsHiChartUnsupportedHelper.prototype.finishRendering=function(){};f.ReferenceGrid=function(){};f.ReferenceGrid.prototype=new f.XObject();f.ReferenceGrid.prototype._ff_c="ReferenceGrid";f.ReferenceGrid.MAGIC_CELL_DIV="/";f.ReferenceGrid.create=function(r){var g=new f.ReferenceGrid();g.setupSimpleGrid(r,false,false);return g;};f.ReferenceGrid.createWithDetails=function(r){var g=new f.ReferenceGrid();g.setupSimpleGrid(r,true,false);return g;};f.ReferenceGrid.createWithName=function(g,r){var a=new f.ReferenceGrid();a.setupSimpleGrid(r,false,false);return a;};f.ReferenceGrid.createWithNameAndDetails=function(g,r){var a=new f.ReferenceGrid();a.setupSimpleGrid(r,true,false);return a;};f.ReferenceGrid.createForVizGrid=function(r){var g=new f.ReferenceGrid();g.setupSimpleGrid(r,false,true);return g;};f.ReferenceGrid.prototype.m_resultSet=null;f.ReferenceGrid.prototype.m_withDetails=false;f.ReferenceGrid.prototype.m_defineAllCells=false;f.ReferenceGrid.prototype.m_renderForFireflyGrid=false;f.ReferenceGrid.prototype.m_fixedHeightOff=0;f.ReferenceGrid.prototype.m_fixedWidthOff=0;f.ReferenceGrid.prototype.m_offsetRows=0;f.ReferenceGrid.prototype.m_offsetColumns=0;f.ReferenceGrid.prototype.m_grid=null;f.ReferenceGrid.prototype.setupSimpleGrid=function(r,w,d){this.setup();this.m_withDetails=w;this.m_defineAllCells=d;this.m_resultSet=r;this.m_grid=f.XReferenceGrid.create();};f.ReferenceGrid.prototype.releaseObject=function(){this.m_resultSet=null;f.XObject.prototype.releaseObject.call(this);};f.ReferenceGrid.prototype.prepareCellStructure=function(u,a){if(this.m_grid.hasCells()===false&&f.notNull(this.m_resultSet)){this.prepareStructure(u,a);}};f.ReferenceGrid.prototype.prepareStructure=function(u,a){var c=this.m_resultSet.getColumnsAxis();var b=f.XMath.max(c.getDataCount(),c.getTuplesCount());var r=this.m_resultSet.getRowsAxis();if(a){this.m_grid.setFixedHeight(f.XMath.max(this.getEffectiveFieldSize(c),this.m_renderForFireflyGrid&&this.getEffectiveFieldSize(r)===0?0:1));}else{this.m_grid.setFixedHeight(0);}var d=r.getDataCount();var e=r.getTuplesCount();var g=f.XMath.max(d,e);if(u){this.m_grid.setFixedWidth(f.XMath.max(this.getEffectiveFieldSize(r),1));}else{this.m_grid.setFixedWidth(0);}var t=this.m_grid.getFixedWidth()+b;var h=this.m_grid.getFixedHeight()+g;this.m_offsetColumns=this.m_resultSet.getQueryManager().getOffsetColumns();this.m_offsetRows=this.m_resultSet.getQueryManager().getOffsetRows();this.m_grid.setFullSize(t,h);for(var x=0;x<t;x++){this.m_grid.addColumnsDef(f.XReferenceGridLine.create());}for(var y=0;y<h;y++){this.m_grid.addRowsDef(f.XReferenceGridLine.create());}if(u&&a){this.setTitleCells(r,f.XMath.max(this.getFixedHeight()-1,0),c.getRsDimensions().isEmpty());this.setTitleCells(c,f.XMath.max(this.getFixedWidth()-1,0),r.getRsDimensions().isEmpty());}if(u){var i=this.m_grid.getFixedHeight()-this.m_fixedHeightOff;this.setHeaderCells(r,i);}if(a){var j=this.m_grid.getFixedWidth()-this.m_fixedWidthOff;this.setHeaderCells(c,j);}this.setDataCells();};f.ReferenceGrid.prototype.getEffectiveFieldSize=function(a){var e=0;var r=a.getRsDimensions();var d=r.size();for(var i=0;i<d;i++){e=e+r.get(i).getResultSetFields().size();}return e;};f.ReferenceGrid.prototype.setTitleCells=function(a,r,c){var t=a.getType();var b=a.getRsDimensions();var d=0;var e=f.XStringBuffer.create();var g=f.XStringBuffer.create();var h=b.size();for(var i=0;i<h;i++){var j=b.get(i);var v=j.getResultSetFields();var k=v.size();for(var l=0;l<k;l++){var m=v.get(l).getName();if(f.XStringUtils.isNullOrEmpty(j.getName())){e.append("[").append(m).append("]");}else{if(l===0){g.append(j.getText());}if(j.isMeasureStructure()){if(l===0){e.append("Measures");}}else if(j.isStructure()){if(l===0){e.append("Structure");}}else{if(l===0){e.append(j.getName()).append(".[");}else{e.append("[");}e.append(m).append("]");}}if(t===f.AxisType.ROWS){if(!(this.m_renderForFireflyGrid&&j.isStructure()&&h===i+1)){var n=f.XReferenceGridCell.create(e.toString(),f.RgCellType.TITLE);n.setDisplayValue(g.toString());n.setDimension(j.getName());n.setPart("Rows");n.setRow(r);n.setColumn(d);this.m_grid.setCell(d,r,n,false);}else if(c&&!this.m_renderForFireflyGrid){this.m_fixedHeightOff=1;}}else{if(!(this.m_renderForFireflyGrid&&j.isStructure()&&h===i+1)){var o=this.m_grid.getSimpleCell(r,d);if(f.notNull(o)){var s=e.toString();e.clear();g.clear();e.append(o.toString());e.append(f.ReferenceGrid.MAGIC_CELL_DIV);e.append(s);if(this.m_renderForFireflyGrid){g.append(o.getDisplayValue());}if(l===0&&!j.isStructure()){g.append(f.ReferenceGrid.MAGIC_CELL_DIV);g.append(j.getText());}}var p=f.XReferenceGridCell.create(e.toString(),f.RgCellType.TITLE);if(this.m_renderForFireflyGrid){p.setRow(r);p.setColumn(d);p.setDisplayValue(g.toString());if(f.notNull(o)){p.setPart("Mixed");}else{p.setPart("Columns");}if(f.notNull(o)){p.setDimension(o.getDimension());}else{p.setDimension(j.getName());}}else{p.setDimension(j.getName());}this.m_grid.setCell(r,d,p,true);}else if(c){this.m_fixedWidthOff=1;}}e.clear();g.clear();d++;}}};f.ReferenceGrid.prototype.setDataCells=function(){var r=this.m_resultSet.getInputReadinessStates();var d=this.m_resultSet.getDataColumns();var a=this.m_resultSet.getDataRows();var s=f.XStringBuffer.create();for(var y=0;y<a;y++){for(var x=0;x<d;x++){var b=this.m_resultSet.getDataCell(x,y);var c;if(this.m_withDetails){c=f.XReferenceGridCell.create(this.getCellValueWithDetails(b,r),f.RgCellType.DATA);}else{c=f.XReferenceGridCell.create(this.getCellValue(this.formatDataCellValue(b),b),f.RgCellType.DATA);}if(this.m_renderForFireflyGrid){s.clear();this.appendPrefixValueSuffix(b.getCurrencyUnit(),b,s);c.setDisplayValue(s.toString());c.setPart("Data");c.setAlertLeve(b.getMaxAlertLevel().getName());c.setIsInputEnabled(b.isDataEntryEnabled());var e=b.getDataCell();if(f.notNull(e)){var g=b.getQueryModel().getDataSource().getName();s.clear();var h=e.getReferenceStructureElement1();if(f.notNull(h)){s.append("mem-");s.append(h.getFieldValue(h.getDimension().getDisplayKeyField()).getString());if(h.getFieldValue(h.getDimension().getDisplayKeyField())!==null){c.setMember(h.getFieldValue(h.getDimension().getDisplayKeyField()).getString());}else{c.setMember(h.getName());}}h=e.getReferenceStructureElement2();if(f.notNull(h)){s.append("-mem-");s.append(h.getFieldValue(h.getDimension().getDisplayKeyField()).getString());if(h.getFieldValue(h.getDimension().getDisplayKeyField())!==null){c.setMember2(h.getFieldValue(h.getDimension().getDisplayKeyField()).getString());}else{c.setMember(h.getName());}}var i=s.toString();var j=b.getValueException().isValidValue()&&b.getValueException()!==f.ValueException.NULL_VALUE?f.XNumberFormatter.formatDoubleToString(b.getDouble(),"0.####"):"";s.clear();c.setDataValueId(f.XStringUtils.concatenate5(g,"-",i,"-",j));}c.setRow(y+this.m_grid.getFixedHeight()-this.m_fixedHeightOff+this.m_offsetRows);c.setColumn(x+this.m_grid.getFixedWidth()-this.m_fixedWidthOff+this.m_offsetColumns);}this.m_grid.setCell(x+this.m_grid.getFixedWidth()-this.m_fixedWidthOff,y+this.m_grid.getFixedHeight()-this.m_fixedHeightOff,c,false);}}};f.ReferenceGrid.prototype.formatDataCellValue=function(d){return d.getFormattedValue();};f.ReferenceGrid.prototype.getCellValueWithDetails=function(d,r){var s=f.XStringBuffer.create();var q=d.getDataCell();if(f.notNull(q)){s.append("(DataCell->").append(q.getName()).append(")");}var a=d.getDecimalPlaces();if(a!==0){s.append("(Decimal Places=").appendInt(a).append(")");}if(d.isDataEntryEnabled()){s.append("I:");}if(d.isValueLocked()){s.append("L:");}var c=d.getCurrencyUnit();this.appendPrefixValueSuffix(c,d,s);this.appendValueException(d,s);this.appendAlertLevel(d,s);this.appendValueChanged(d,s);s.append("|").append(d.getValueType().getName());s.append("|").append(d.getFormatString());this.appendCurrencyUnit(c,s);this.appendInputReadiness(d,r,s);return s.toString();};f.ReferenceGrid.prototype.appendPrefixValueSuffix=function(c,d,s){if(f.notNull(c)&&c.hasPrefix()){s.append(c.getPrefix()).append(" ");}s.append(this.formatDataCellValue(d));if(f.notNull(c)&&c.hasSuffix()){s.append(" ").append(c.getSuffix());}};f.ReferenceGrid.prototype.appendValueException=function(d,s){var v=d.getValueException();if(v!==f.ValueException.NORMAL){s.append("|");if(f.isNull(v)){s.append("<null>");}else{s.append(v.getName());}}};f.ReferenceGrid.prototype.appendInputReadiness=function(d,r,s){var q=d.getQueryModel().getQueryManager();if(q.supportsInputReadinessStates()&&d.getQueryModel().isDataEntryEnabled()){var a=d.getInputReadinessState();if(f.notNull(a)){var b=r.get(a.getIndex());var c=b.getInputReadinessTypes();var t=f.XListOfString.create();for(var i=0;i<c.size();i++){t.add(c.get(i).getShortcut());}s.append("|S:").append(f.XCollectionUtils.join(t,","));}}};f.ReferenceGrid.prototype.appendAlertLevel=function(d,s){var m=d.getMaxAlertLevel();if(m!==f.AlertLevel.NORMAL){s.append("|[");s.append(f.isNull(m)?"<null>":m.getName());s.append("]");}};f.ReferenceGrid.prototype.appendValueChanged=function(d,s){if(d.isValueChanged()){s.append("|N:");var n=d.getXValue();if(f.isNull(n)){s.append("<null>");}else{s.append(n.getValueType().getName());if(n.getValueType()===f.XValueType.STRING){s.append(" ").append(n.getString());}}}if(d.isNewValueForced()){s.append("|F:");}};f.ReferenceGrid.prototype.appendCurrencyUnit=function(c,s){if(f.notNull(c)&&!c.isEmpty()){s.append("|");if(c.isMixed()){s.append("M:");}else if(c.hasUnit()){s.append("U:");}else if(c.hasCurrency()){s.append("C:");}if(c.hasFormatted()){s.append(c.getFormatted());}else{s.append("<null>");}}};f.ReferenceGrid.prototype.getCellValue=function(a,d){var v=d.getValueException();if(v===f.ValueException.NULL_VALUE||v===f.ValueException.UNDEFINED){return"";}var e=null;if(v!==f.ValueException.NORMAL&&v!==f.ValueException.ZERO){e=v.getName();}var b=null;var m=d.getMaxAlertLevel();if(m!==f.AlertLevel.NORMAL){b=m.getName();}if(f.notNull(e)||f.notNull(b)){var c=f.XStringBuffer.create();c.append(a);if(f.notNull(b)){c.append(" [").append(b).append("]");}if(f.notNull(e)){c.append(" [").append(e).append("]");}return c.toString();}return a;};f.ReferenceGrid.prototype.setHeaderCells=function(a,t){var r=a.getRsDimensions();var b=a.getType();var c=a.getTuplesCount();var d=f.XStringBuffer.create();var e=f.XStringBuffer.create();var g=f.XReferenceGridCell.create(null,f.RgCellType.HEADER);var h=f.XReferenceGridCell.create(null,f.RgCellType.HEADER);for(var i=0;i<c;i++){var j=a.getTupleAt(i);var p=0;var k=false;var l=j.size();for(var n=0;n<l;n++){var o=r.get(n);var q=j.get(n);var s=o.getResultSetFields();var v=s.size();if(q.getFirstTuple()===j||this.m_renderForFireflyGrid===true){var u=q.getDimensionMember();d.clear();var w=u.getMemberType();if(w.isResult()){this.enableTotals(b,i+t);if(v>0){var y=0;if(!k){if(w===f.MemberType.CONDITION_RESULT){d.append("[Totals Included]");e.append("[Totals Included]");}else if(w===f.MemberType.CONDITION_OTHERS_RESULT){d.append("[Totals Remaining]");e.append("[Totals Remaining]");}else{d.append("[Totals]");e.append("[Totals]");}this.appendAlertLevelToValue(q,d);var z=f.XReferenceGridCell.create(d.toString(),f.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(q.getFirstTuple()===j){z.setDisplayValue(e.toString());}z.setDimension(o.getName());if(o.isStructure()&&u.getDimension().getStructureMember(u.getName()).getFieldValue(u.getDimension().getDisplayKeyField())!==null){z.setMember(u.getDimension().getStructureMember(u.getName()).getFieldValue(u.getDimension().getDisplayKeyField()).getString());}else{z.setMember(u.getName());}if(a===this.m_resultSet.getRowsAxis()){z.setPart("Rows");z.setRowTupleIndex(i);}else{z.setPart("Columns");z.setColumnTupleIndex(i);}}this.addCell(b,p,i,t,z);d.clear();e.clear();y=1;}if(this.m_defineAllCells){p=p+y;for(var x=y;x<v;x++){this.addCell(b,p,i,t,h);p++;}}else{p=p+v;}}k=true;}else{for(var A=0;A<v;A++){var B=u.getAllFieldValues().getByKey(s.get(A).getName());d.append(this.formatFieldValue(B));e.append(this.formatFieldValue(B));if(A===0){this.prependToFirstField(q,d);this.appendAlertLevelToValue(q,d);}var C=f.XReferenceGridCell.create(d.toString(),f.RgCellType.HEADER);if(this.m_renderForFireflyGrid){if(b===f.AxisType.ROWS){C.setPart("Rows");}else{C.setPart("Columns");}if(q.getFirstTuple()===j){C.setDisplayValue(e.toString());}C.setDimension(o.getName());if(o.isStructure()&&u.getDimension().getStructureMember(u.getName()).getFieldValue(u.getDimension().getDisplayKeyField())!==null){C.setMember(u.getDimension().getStructureMember(u.getName()).getFieldValue(u.getDimension().getDisplayKeyField()).getString());}else{C.setMember(u.getName());}if(a===this.m_resultSet.getRowsAxis()){C.setRowTupleIndex(i);}else{C.setColumnTupleIndex(i);}}if(A===0&&q.getFirstTuple()===j){C.setDisplayLevel(q.getDisplayLevel());var D=q.getDrillState();var E="";if(D===f.DrillState.EXPANDED||D===f.DrillState.DRILLED){C.setDrillState("Expanded");if(o.getLowerLevelNodeAlignment()===f.Alignment.CHILDREN_ABOVE_PARENT){if(b===f.AxisType.ROWS){E="sap-icon://slim-arrow-up";}else{E="sap-icon://slim-arrow-left";}}else{if(b===f.AxisType.ROWS){E="sap-icon://slim-arrow-down";}else{E="sap-icon://slim-arrow-down";}}}else if(D===f.DrillState.COLLAPSED||D===f.DrillState.LEAF_UDH_EXPAND_ALLOWED){C.setDrillState("Collapsed");if(o.getLowerLevelNodeAlignment()===f.Alignment.CHILDREN_ABOVE_PARENT){if(b===f.AxisType.ROWS){E="sap-icon://slim-arrow-right";}else{E="sap-icon://slim-arrow-up";}}else{if(b===f.AxisType.ROWS){E="sap-icon://slim-arrow-right";}else{E="sap-icon://slim-arrow-right";}}}else{C.setDrillState("None");E="";}C.setIcon(E);}d.clear();e.clear();this.addCell(b,p,i,t,C);p++;}}}else{if(this.m_defineAllCells){for(var m=0;m<v;m++){this.addCell(b,p,i,t,g);p++;}}else{p=p+v;}}}}};f.ReferenceGrid.prototype.formatFieldValue=function(a){if(f.isNull(a)){return"[null]";}else{if(a.getValueType()===f.XValueType.DOUBLE){var v=a.getDouble();return f.XNumberFormatter.formatDoubleToString(v,"#.0000");}else{return a.getFormattedValue();}}};f.ReferenceGrid.prototype.appendAlertLevelToValue=function(e,a){if(f.XStringUtils.isNotNullAndNotEmpty(e.getExceptionName())){a.append(" [").appendInt(e.getAlertLevel()).append("]");}};f.ReferenceGrid.prototype.prependToFirstField=function(e,a){var d=e.getDisplayLevel();var b=e.getDrillState();if(d>0||b!==f.DrillState.LEAF){var o=a.toString();a.clear();for(var i=0;i<d;i++){a.append("  ");}if(b===f.DrillState.COLLAPSED||b===f.DrillState.LEAF_DRILLDOWN_ALLOWED||b===f.DrillState.LEAF_UDH_EXPAND_ALLOWED||b===f.DrillState.COLLAPSED_EXPAND_AND_DRILLDOWN_ALLOWED){a.append("+ ");}else if(b===f.DrillState.EXPANDED||b===f.DrillState.DRILLED||b===f.DrillState.LEAF_UDH){a.append("- ");}a.append(o);}};f.ReferenceGrid.prototype.addCell=function(a,p,t,b,c){if(a===f.AxisType.ROWS){c.setRow(t+b+this.m_offsetRows);c.setColumn(p+this.m_offsetColumns);this.m_grid.setCell(p,t+b,c,false);}else{c.setRow(p);c.setColumn(t+b);this.m_grid.setCell(t+b,p,c,false);}};f.ReferenceGrid.prototype.enableTotals=function(a,p){var r;if(a===f.AxisType.ROWS){r=this.m_grid.getRowsDef(p);}else{r=this.m_grid.getColumnDef(p);}if(f.notNull(r)){r.setHasTotals(true);}};f.ReferenceGrid.prototype.exportForProtocol=function(p){if(p.isTypeOf(f.ProtocolBindingType.FIREFLY_GRID)){return this.exportToFireflyGrid();}return this.exportToVizGrid();};f.ReferenceGrid.prototype.exportToVizGrid=function(){this.prepareCellStructure(true,true);var c=this.m_grid.getColumnCount();var r=this.m_grid.getRowCount();var l=f.PrFactory.createStructure();l.putString("Type","Grid");l.putInteger("RowCount",r);l.putInteger("ColCount",c);var a=l.putNewList("Cells");for(var y=0;y<r;y++){for(var x=0;x<c;x++){var b=a.addNewStructure();var g=this.m_grid.getSimpleCell(x,y);if(f.notNull(g)){b.putString("Type","Text");b.putString("Value",g.getText(50));if(!g.isLeftAligned()){b.putString("HAlign","End");}if(g.isTotals()){b.putBoolean("Totals",true);}var d=g.getCellType();if(d===f.RgCellType.HEADER){b.putString("Semantic","Header");}else if(d===f.RgCellType.TITLE){b.putString("Semantic","Title");}}else{b.putString("Type","Empty");}}}return l;};f.ReferenceGrid.prototype.exportToFireflyGrid=function(){this.m_renderForFireflyGrid=true;this.prepareCellStructure(true,true);var c=this.m_grid.getColumnCount();var r=this.m_grid.getRowCount();var a=this.m_grid.getFixedRowsCount();var b=this.m_grid.getFixedColumnsCount();var l=f.PrFactory.createStructure();l.putString("Type","Grid");l.putString("ApplicationName",this.m_resultSet.getApplication().getApplicationName());l.putInteger("RowCount",r);l.putInteger("ColCount",c);l.putInteger("FixedRows",a);l.putInteger("FixedColumns",b);var d=l.putNewList("Cells");for(var y=0;y<r;y++){for(var x=0;x<c;x++){var g=this.m_grid.getSimpleCell(x,y);if(f.notNull(g)){var e=d.addNewStructure();e.putString("GridPart",g.getPart());e.putString("Type","Text");e.putString("DisplayValue",g.getDisplayValue());e.putString("Value",g.getText(-1));e.putInteger("Row",g.getRow());e.putInteger("Column",g.getColumn());e.putString("DrillState",g.getDrillState());e.putString("DataValueId",g.getDataValueId());e.putInteger("DisplayLevel",g.getDisplayLevel());e.putInteger("RowTupleIndex",g.getRowTupleIndex());e.putInteger("ColumnTupleIndex",g.getColumnTupleIndex());e.putString("Icon",g.getIcon());e.putString("AlertLevel",g.getAlertLevel());e.putBoolean("Input",g.isInputEnabled());if(g.isTotals()){e.putBoolean("Totals",true);}var h=g.getCellType();if(h===f.RgCellType.HEADER){e.putString("Semantic","Header");e.putString("Dimension",g.getDimension());e.putString("Member",g.getMember());}else if(h===f.RgCellType.TITLE){e.putString("Semantic","Title");e.putString("Dimension",g.getDimension());}else if(h===f.RgCellType.DATA){e.putInteger("DataRow",y-a);e.putInteger("DataColumn",x-b);e.putString("Member",g.getMember());e.putString("Member2",g.getMember2());e.putString("Semantic",g.isTotals()?"Result":"Standard");}else{e.putString("Semantic","Empty");e.putString("GridPart","Empty");}}}}this.m_renderForFireflyGrid=false;return l;};f.ReferenceGrid.prototype.getRowCount=function(){return this.m_grid.getRowCount();};f.ReferenceGrid.prototype.getColumnCount=function(){return this.m_grid.getColumnCount();};f.ReferenceGrid.prototype.getFixedRowsCount=function(){return this.m_grid.getFixedRowsCount();};f.ReferenceGrid.prototype.getFixedColumnsCount=function(){return this.m_grid.getFixedColumnsCount();};f.ReferenceGrid.prototype.getColumnMaxCharacters=function(c,r,m){return this.m_grid.getColumnMaxCharacters(c,r,m);};f.ReferenceGrid.prototype.addRowsDef=function(l){this.m_grid.addRowsDef(l);};f.ReferenceGrid.prototype.getRowsDef=function(i){return this.m_grid.getRowsDef(i);};f.ReferenceGrid.prototype.addColumnsDef=function(l){this.m_grid.addColumnsDef(l);};f.ReferenceGrid.prototype.getColumnDef=function(i){return this.m_grid.getColumnDef(i);};f.ReferenceGrid.prototype.getSimpleCell=function(c,r){return this.m_grid.getSimpleCell(c,r);};f.ReferenceGrid.prototype.setCell=function(x,y,c,o){this.m_grid.setCell(x,y,c,o);};f.ReferenceGrid.prototype.exportToAscii=function(m){return this.exportToAsciiExt(m,true,true,0,-1,0,-1);};f.ReferenceGrid.prototype.exportBodyColumns=function(m,u,c,a){return this.exportToAsciiExt(m,false,u,0,-1,c,a);};f.ReferenceGrid.prototype.exportBodyRows=function(m,u,r,a){return this.exportToAsciiExt(m,u,false,r,a,0,-1);};f.ReferenceGrid.prototype.exportToAsciiExt=function(m,u,a,r,b,c,d){this.prepareCellStructure(u,a);return this.m_grid.exportToAsciiExt(m,u,a,r,b,c,d);};f.ReferenceGrid.prototype.exportToFingerprint=function(){this.m_grid.setFingerprintMode();this.prepareCellStructure(true,true);return this.m_grid.getFingerprint();};f.ReferenceGrid.prototype.getFixedHeight=function(){return this.m_grid.getFixedHeight();};f.ReferenceGrid.prototype.setFixedHeight=function(a){this.m_grid.setFixedHeight(a);};f.ReferenceGrid.prototype.getFixedWidth=function(){return this.m_grid.getFixedWidth();};f.ReferenceGrid.prototype.setFixedWidth=function(a){this.m_grid.setFixedWidth(a);};f.ReferenceGrid.prototype.setFullSize=function(t,a){this.m_grid.setFullSize(t,a);};f.ReferenceGrid.prototype.hasCells=function(){return this.m_grid.hasCells();};f.ReferenceGrid.prototype.getFingerprint=f.noSupport;f.ReferenceGrid.prototype.setFingerprintMode=f.noSupport;f.RsHiChartBoxplotHelper=function(){};f.RsHiChartBoxplotHelper.prototype=new f.RsHiChartSeriesHelper();f.RsHiChartBoxplotHelper.prototype._ff_c="RsHiChartBoxplotHelper";f.RsHiChartBoxplotHelper.prototype.prepareRendering=function(){};f.RsHiChartBoxplotHelper.prototype.readResultSetData=function(c,r,a){var t=this.getChartData();var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var b=x.addNewStructure();var d=t.putNewStructure(f.VizDefConstants.K_LANG);var e=f.XInteger.convertToString(c.getDecimalPlaces(f.VizDefConstants.K_VALUE_AXIS));if(a.getAvailableDataCellCount()>0){var s=t.putNewList(f.VizDefConstants.K_SERIES);var g=f.XStringBuffer.create();g.append("<b>{series.name}</b><br/><b>Distribution</b> <br/>");g.append("Maximum: {point.high:,.");g.append(e);g.append("f} <br/>Upper Quartile: {point.q3:,.");g.append(e);g.append("f} <br/>Median: {point.median:,.");g.append(e);g.append("f} <br/>Lower Quartile: {point.q1:,.");g.append(e);g.append("f} <br/>Minimum: {point.low:,.");g.append(e);g.append("f}");var l=b.putNewList(f.VizDefConstants.K_CATEGORIES);var m=r.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_CATEGORY_AXIS);var n=f.XListOfString.create();n.add(f.VizDefConstants.K_VALUE_AXIS);n.add(f.VizDefConstants.K_VALUE_AXIS2);n.add(f.VizDefConstants.K_VARIANCE);for(var h=0;h<m.size();h++){l.addString(m.get(h));}var o=c.getPrettyNamesForFeeds(true,false,n).size();var p=c.getIndicesByFeedOrder(n);var q=f.VizDefConstants.V_FEED_COLOR;n.add(f.VizDefConstants.K_COLOR);var u=c.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_COLOR);var v=u.size()<2;if(c.hasTupleForFeed(f.VizDefConstants.V_FEED_DATA_CONTEXT)&&c.getPrettyNamesForFeed(true,false,f.VizDefConstants.V_FEED_DATA_CONTEXT).size()>1){q=f.VizDefConstants.V_FEED_DATA_CONTEXT;o=c.getPrettyNamesForFeeds(true,false,n).size();}var w=f.XList.create();var y=-1;for(var z=0;z<p.size();z++){var A=p.get(z);if(w.contains(A)){continue;}y=y+1;var i=A.getInteger();var B=c.getTupleAt(i);var C=B.getMemberKeysForFeedsOtherThan(q);var D=c.getTupleIndexForMemberNames(C);w.addAll(D);this.setShowLegend(o>1);var E=B.getPrettyText(n);var F=s.addNewStructure();var G=F.putNewList(f.VizDefConstants.K_DATA);var H=F.putNewStructure(f.VizDefConstants.K_TOOLTIP);H.putString(f.VizDefConstants.K_POINT_FORMAT,g.toString());H.putString(f.VizDefConstants.K_HEADER_FORMAT,"");F.putBoolean(f.VizDefConstants.K_SHOW_IN_LEGEND,true);F.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.V_CHART_TYPE_BOXPLOT);F.putString(f.VizDefConstants.K_NAME,E);var I=s.addNewStructure();I.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_SCATTER);I.putString(f.VizDefConstants.K_NAME,E);I.putString("linkedTo",":previous");var J=I.putNewStructure(f.VizDefConstants.K_MARKER);J.putString(f.VizDefConstants.K_FILL_COLOR,f.VizDefConstants.K_TRANSPARENT);J.putInteger(f.VizDefConstants.K_LINE_WIDTH,1);var K=I.putNewList(f.VizDefConstants.K_DATA);var L=I.putNewStructure(f.VizDefConstants.K_TOOLTIP);L.putString(f.VizDefConstants.K_POINT_FORMAT,f.XStringUtils.concatenate3("<b>{series.name}</b><br/><b>Outliers</b><br/><br/> {point.categoryName}: {point.y:,.",e,"f}"));L.putString(f.VizDefConstants.K_HEADER_FORMAT,"");if(v){this.addColorAndPattern(B.getColor(),B.getPattern(),F,f.VizDefConstants.V_CHART_TYPE_BOXPLOT,false);this.addColorAndPattern(B.getColor(),B.getPattern(),I,f.VizDefConstants.K_SCATTER,true);J.putString(f.VizDefConstants.K_LINE_COLOR,this.getCurrentColor());}else{J.putString(f.VizDefConstants.K_LINE_COLOR,this.getColorAt(0));}for(var j=0;j<r.getTuplesCount();j++){if(!r.getTupleAt(j).isSelectedByString(f.VizDefConstants.K_CATEGORY_AXIS)){continue;}if(r.getTupleAt(j).isTotal()){continue;}var M=f.XList.create();for(var N=0;N<D.size();N++){var k=D.get(N).getInteger();var O=c.getTupleAt(i);if(!O.isSelectedByString(f.VizDefConstants.K_VALUE_AXIS)){continue;}var P=a.getDataCell(k,j);var Q=0;var R=P.getValueType();if(R===f.XValueType.DOUBLE||R===f.XValueType.DECIMAL_FLOAT){if(P.getXValue()!==null){Q=c.getScaledValue(f.VizDefConstants.K_VALUE_AXIS,O,P);M.add(f.XDoubleValue.create(Q));}}}if(M.size()===0){continue;}M.sortByComparator(f.XComparatorDouble.create());var S=G.addNewStructure();var T=0;var U=0;var V=0;var W=0;var X=0;var Y=0;var Z=0;var $=M.size()-1;var _=$/4;var a1=$/2;var b1=$*3/4;T=M.get(f.XDouble.convertToInt(_)).getDouble();W=M.get(f.XDouble.convertToInt(a1)).getDouble();U=M.get(f.XDouble.convertToInt(b1)).getDouble();V=(U-T)*1.5;Z=M.get(0).getDouble();Y=M.get(M.size()-1).getDouble();for(var ld=0;ld<M.size();ld++){X=M.get(ld).getDouble();if(U+V<X||T-V>X){var d1=K.addNewStructure();d1.putDouble(f.VizDefConstants.K_X,j-0.25+(0.5+y)/o/2);d1.putDouble(f.VizDefConstants.K_Y,X);d1.putString(f.VizDefConstants.K_CATEGORY_NAME,m.get(j));if(v){this.addColorAndPattern(B.getColor(),B.getPattern(),d1,f.VizDefConstants.K_SCATTER,true);}}else{if(X<Y){Y=X;}if(X>Z){Z=X;}}}S.putDouble("low",Y);S.putDouble("q1",T);S.putDouble("median",W);S.putDouble("q3",U);S.putDouble("high",Z);if(v){this.addColorAndPattern(B.getColor(),B.getPattern(),S,f.VizDefConstants.K_SCATTER,true);}}}}else{t.putBoolean(f.VizDefConstants.K_FULL_SCREEN_ENABLED,false);d.putString(f.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.");}};f.RsHiChartBoxplotHelper.prototype.finishRendering=function(){};f.RsHiChartCategorialSeriesHelper=function(){};f.RsHiChartCategorialSeriesHelper.prototype=new f.RsHiChartSeriesHelper();f.RsHiChartCategorialSeriesHelper.prototype._ff_c="RsHiChartCategorialSeriesHelper";f.RsHiChartCategorialSeriesHelper.prototype.prepareRendering=function(){};f.RsHiChartCategorialSeriesHelper.prototype.readResultSetData=function(c,r,a){var t=this.getChartData();var d;var b;var e;var g;var h=null;var l=false;var m=true;var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var n=x.addNewStructure();var o=t.putNewStructure(f.VizDefConstants.K_LANG);var s=t.putNewList(f.VizDefConstants.K_SERIES);var p=t.getStructureByKey(f.VizDefConstants.K_EXPLICIT_COLOR_ASSIGNMENTS);if(f.notNull(p)){t.getListByKey(f.VizDefConstants.K_COLORS).clear();}var q=f.XStringBuffer.create();q.append("<b>{series.name}</b> / ");q.append("{point.category}<br/><b>{point.name}</b>  {point.yFormatted}<br/>");if(a.getAvailableDataCellCount()>0){var u=true;var v=r.getFormattedNamesForFeed(true,!m,f.VizDefConstants.K_CATEGORY_AXIS);if(v.size()===0){v=r.getFormattedNames(true,!m);u=false;}var w=f.XListOfString.create();w.add(f.VizDefConstants.K_VALUE_AXIS);w.add(f.VizDefConstants.K_VALUE_AXIS2);w.add(f.VizDefConstants.K_VARIANCE);var y=f.XListOfString.create();y.add(f.VizDefConstants.K_CATEGORY_AXIS);var z=c.getPrettyNamesForFeed(true,!m,f.VizDefConstants.K_COLOR);var A=c.getPrettyNamesForFeeds(true,!m,w);var B=z.size()<2;var C=v.size();var D;if(C>0){D=f.XStringUtils.concatenate3(f.XCollectionUtils.join(A,", ")," Per ",f.XCollectionUtils.join(r.getDimensionsForFeed(f.VizDefConstants.K_CATEGORY_AXIS),", "));var E=n.putNewList(f.VizDefConstants.K_CATEGORIES);for(var k=0;k<v.size();k++){E.addString(v.get(k));}}else{n.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_CATEGORY);D=f.XCollectionUtils.join(A,", ");}var F=t.getStructureByKey(f.VizDefConstants.K_TITLE);if(f.isNull(F)){F=t.putNewStructure(f.VizDefConstants.K_TITLE);F.putString(f.VizDefConstants.K_TEXT,D);}else{var G=F.getStringByKey(f.VizDefConstants.K_TEXT);if(f.isNull(G)){F.putString(f.VizDefConstants.K_TEXT,D);}}var H=f.XListOfString.create();if(z.size()>1){H.add(f.VizDefConstants.K_COLOR);}if(A.size()>1){H.addAll(w);}var I=c.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var J=0;J<I.size();J++){q.append("<b>{point.tHeader");q.append(f.XInteger.convertToString(J));q.append("}</b>  {point.tFormatted");q.append(f.XInteger.convertToString(J));q.append("}<br/>");}q.append("{point.errorRange}");var K=c.getIndicesByFeedOrder(w);this.setShowLegend(K.size()>1);for(var L=0;L<K.size();L++){var i=K.get(L).getInteger();var M=c.getTupleAt(i);if(!M.isSelectedByList(w)){continue;}b=s.addNewStructure();var N=M.isSelectedByString(f.VizDefConstants.K_VARIANCE);var O=!N&&M.isSelectedByString(f.VizDefConstants.K_VALUE_AXIS2);var P=O?1:N?this.isCombinationChart()?2:1:0;h=N?"\u0394":M.getPrettyText(H);b.putString(f.VizDefConstants.K_NAME,h);var Q=N?"":M.getPrettyText(w);var R=O?this.getSecondChart():this.getChartType();b.putString(f.VizDefConstants.K_TYPE,R);b.putInteger(f.VizDefConstants.K_Y_AXIS,P);var S=N?f.VizDefConstants.K_VARIANCE:O?f.VizDefConstants.K_VALUE_AXIS2:f.VizDefConstants.K_VALUE_AXIS;b.putString(f.VizDefConstants.K_AXIS,S);l=l||N;d=b.putNewList(f.VizDefConstants.K_DATA);var T=M.getMemberKeys();g=null;var U=i;var V=i;var W=false;var X=null;var Y=null;if(f.XCollectionUtils.hasElements(T)){X=c.getMatchingTupleIndicesForMemberNameAndFeed(T,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);var Z=c.getMatchingTupleIndicesForMemberNamesAndSuffix(T,f.VizDefConstants.K_ERRORBAR_MIN);if(Z!==-1){U=Z;W=true;}Z=c.getMatchingTupleIndicesForMemberNamesAndSuffix(T,f.VizDefConstants.K_ERRORBAR_MAX);if(Z!==-1){V=Z;W=true;}if(W){e=s.addNewStructure();g=e.putNewList(f.VizDefConstants.K_DATA);e.putInteger(f.VizDefConstants.K_Y_AXIS,P);e.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_ERRORBAR);e.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,c.getTupleAt(f.XMath.max(U,V)).getColor());}}var $;var _=0;var a1=0;var b1="";var c1="";if(B){this.addColorAndPattern(M.getColor(),M.getPattern(),b,R,false);}if(C>0){for(var j=0;j<r.getTuplesCount();j++){if(u&&!r.getTupleAt(j).isSelectedByString(f.VizDefConstants.K_CATEGORY_AXIS)){continue;}if(!m||!r.getTupleAt(j).isTotal()){if(W){_=c.getScaledValue(S,c.getTupleAt(U),a.getDataCell(U,j));b1=c.getFormattedValue(S,c.getTupleAt(U),a.getDataCell(U,j));a1=c.getScaledValue(S,c.getTupleAt(V),a.getDataCell(V,j));c1=c.getFormattedValue(S,c.getTupleAt(V),a.getDataCell(V,j));}if(f.XCollectionUtils.hasElements(X)){Y=f.XListOfString.create();for(var d1=0;d1<X.size();d1++){var e1=X.get(d1).getInteger();Y.add(c.getFormattedValue("",c.getTupleAt(e1),a.getDataCell(e1,j)));}}$=a.getDataCell(i,j);this.addValue(S,d,$,c,M,Q,g,_,a1,r.getTupleAt(j).getPrettyText(y),I,Y,b1,c1,B,R);}}}else if(a.getDataRows()>0){for(var jj=0;jj<a.getDataRows();jj++){if(W){_=c.getScaledValue(S,c.getTupleAt(U),a.getDataCell(U,jj));b1=c.getFormattedValue(S,c.getTupleAt(U),a.getDataCell(U,jj));a1=c.getScaledValue(S,c.getTupleAt(V),a.getDataCell(V,jj));c1=c.getFormattedValue(S,c.getTupleAt(V),a.getDataCell(V,jj));}if(f.XCollectionUtils.hasElements(X)){Y=f.XListOfString.create();for(var g1=0;g1<X.size();g1++){var h1=X.get(g1).getInteger();Y.add(c.getFormattedValue("",c.getTupleAt(h1),a.getDataCell(h1,jj)));}}$=a.getDataCell(i,jj);this.addValue(S,d,$,c,M,Q,g,_,a1,null,I,Y,b1,c1,B,R);}}}if(C<2){if(z.size()<2){this.setChartWidth(v.size());}else{this.setChartWidth(z.size());}}else{this.setChartWidth(C);}this.setWidthScale(1);if(f.XStringUtils.isNullOrEmpty(this.getStackingType())||!f.XString.isEqual(this.getChartType(),f.VizDefConstants.V_CHART_TYPE_BAR)&&!f.XString.isEqual(this.getChartType(),f.VizDefConstants.V_CHART_TYPE_COLUMN)){var i1=this.isCombinationChart()?2:1;if(C>1){this.setWidthScale(K.size()/i1);}else if(z.size()>1){this.setWidthScale(f.XMath.max(1,A.size()/i1));}}if(s.size()===0){o.putString(f.VizDefConstants.K_NO_DATA,"At least one measure is required to build a chart.");}}var j1=t.putNewStructure(f.VizDefConstants.K_TOOLTIP);j1.putString(f.VizDefConstants.K_POINT_FORMAT,q.toString());j1.putString(f.VizDefConstants.K_HEADER_FORMAT,"");this.setHasVariance(l);};f.RsHiChartCategorialSeriesHelper.prototype.finishRendering=function(){};f.RsHiChartCategorialSeriesHelper.prototype.addValue=function(c,d,a,b,t,m,e,g,h,k,l,n,o,p,q,s){var r=0;var v=a.getValueType();var u=d.addNewStructure();if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){if(a.getXValue()!==null){r=b.getScaledValue(c,t,a);u.putDouble(f.VizDefConstants.K_Y,r);u.putString(f.VizDefConstants.K_Y_FORMATTED,b.getFormattedValue(c,t,a));}else{u.putString(f.VizDefConstants.K_Y,null);u.putString(f.VizDefConstants.K_Y_FORMATTED,null);}if(q){this.addColorAndPattern(t.getColor(),t.getPattern(),u,s,true);}u.putString(f.VizDefConstants.K_NAME,m);if(f.notNull(k)){u.putString(f.VizDefConstants.K_CATEGORY,k);}}if(f.notNull(e)){var w=e.addNewList();w.addDouble(g);w.addDouble(h);if(g<h){u.putString(f.VizDefConstants.K_ERROR_RANGE,f.XStringUtils.concatenate3(f.XDouble.convertToString(g)," .. ",p));}else{u.putString(f.VizDefConstants.K_ERROR_RANGE,f.XStringUtils.concatenate3(f.XDouble.convertToString(h)," .. ",o));}}if(f.XCollectionUtils.hasElements(l)){for(var j=0;j<l.size();j++){u.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_HEADER,f.XInteger.convertToString(j)),l.get(j));}}if(f.XCollectionUtils.hasElements(n)){for(var i=0;i<n.size();i++){u.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_FORMATTED,f.XInteger.convertToString(i)),n.get(i));}}};f.RsHiChartClusterBubbleHelper=function(){};f.RsHiChartClusterBubbleHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartClusterBubbleHelper.prototype._ff_c="RsHiChartClusterBubbleHelper";f.RsHiChartClusterBubbleHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_VALUE_AXIS;};f.RsHiChartClusterBubbleHelper.prototype.getYFeed=function(){return f.VizDefConstants.K_VALUE_AXIS2;};f.RsHiChartClusterBubbleHelper.prototype.getZFeed=function(){return f.VizDefConstants.K_BUBBLE_WIDTH;};f.RsHiChartClusterBubbleHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.name}</b>: {point.valueFormatted} <br/>");};f.RsHiChartClusterBubbleHelper.prototype.prepareRendering=function(){};f.RsHiChartClusterBubbleHelper.prototype.reiterateResultSet=function(c,r,a){var t=this.getChartData();var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var b=y.addNewStructure();var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var d=x.addNewStructure();var v=null;if(this.getVizDef()!==null){v=this.getVizDef().getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(v)){var e=v.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS);if(f.notNull(e)){f.RsHiChartUtils.axisPloter(e,d,this.getChartType(),true);}var g=v.getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);if(f.notNull(g)){b=f.RsHiChartUtils.axisPloter(g,b,this.getChartType(),false);}}}f.RsHiChartVizUtilsSimple.legendStyler(t);var p=f.PrFactory.createStructure();p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);var h=f.VizDefConstants.K_TRANSPARENT;if(t.getListByKey(f.VizDefConstants.K_COLORS)!==null){if(t.getListByKey(f.VizDefConstants.K_COLORS).size()>0){h=t.getListByKey(f.VizDefConstants.K_COLORS).getStringAt(0);}}if(f.isNull(p)){p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);}if(!f.XString.isEqual(this.getStackingType(),null)){f.RsHiChartVizUtilsSimple.dataLabelAlignment(b,this.getChartType(),c.getDecimalPlaces(this.getXFeed()),false);}f.RsHiChartVizUtilsSimple.plotOptionChart(b,this.getChartType(),this.getStackingType(),p,0,h);f.RsHiChartVizUtilsSimple.dataLabelAlignment(b,this.getChartType(),c.getDecimalPlaces(this.getXFeed()),false);};f.RsHiChartClusterBubbleHelper.prototype.finishRendering=function(){var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var i=f.PrFactory.createList();i.addAll(this.getXList());i.addAll(this.getYList());i.addAll(this.getZList());var a=f.PrFactory.createList();a.addAll(this.getXListFormatted());a.addAll(this.getYListFormatted());a.addAll(this.getZListFormatted());var m=f.XListOfString.create();m.addAll(this.getXMeasures());m.addAll(this.getYMeasures());m.addAll(this.getZMeasures());for(var g=0;g<i.size();g++){var p=s.addNewStructure();var n=p.putNewList(f.VizDefConstants.K_DATA);p.putString(f.VizDefConstants.K_NAME,this.getColorList().get(g));var b=i.getListAt(g);var c=a.getListAt(g);for(var e=0;e<b.size();e++){var d=n.addNewStructure();d.putDouble(f.VizDefConstants.K_VALUE,b.getDoubleAt(e));d.putString(f.VizDefConstants.K_VALUE_FORMATTED,c.getStringAt(e));if(f.XCollectionUtils.hasElements(m)){d.putString(f.VizDefConstants.K_NAME,m.get(0));}else{d.putString(f.VizDefConstants.K_NAME,"");}this.addToolTipsToSeries(d,g,e);}}};f.RsHiChartCorrelationHelper=function(){};f.RsHiChartCorrelationHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartCorrelationHelper.prototype._ff_c="RsHiChartCorrelationHelper";f.RsHiChartCorrelationHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_VALUE_AXIS;};f.RsHiChartCorrelationHelper.prototype.getYFeed=function(){return f.VizDefConstants.K_VALUE_AXIS2;};f.RsHiChartCorrelationHelper.prototype.getZFeed=function(){return f.VizDefConstants.K_BUBBLE_WIDTH;};f.RsHiChartCorrelationHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.name}</b> <br/>");s.append("<b>{point.SeriesX}</b>: {point.xFormatted} <br/>");s.append("<b>{point.SeriesY}</b>: {point.yFormatted} <br/>");if(f.XCollectionUtils.hasElements(this.getZMeasures())){s.append("<b>{point.SeriesZ}</b>: {point.zFormatted} <br/>");}};f.RsHiChartCorrelationHelper.prototype.reiterateResultSet=function(c,r,a){var t=this.getChartData();var v=this.getVizDef();var b="#FFAA49";var d="Dash";var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var e=x.addNewStructure();var g=y.addNewStructure();if(f.notNull(v)){f.RsHiChartVizUtilsSimple.addReferenceLine(v,e,g,c,r,a);if(v.containsKey(f.VizDefConstants.K_BUBBLE_STYLING)){var B=v.getStructureByKey(f.VizDefConstants.K_BUBBLE_STYLING);if(f.notNull(B)){d=B.getStringByKey(f.VizDefConstants.K_PATTERN);b=B.getStringByKey(f.VizDefConstants.K_COLOR);}}}var h=t.getStructureByKey(f.VizDefConstants.K_CHART);h.putString(f.VizDefConstants.K_TYPE,this.getChartType());var i=h.putNewStructure(f.VizDefConstants.K_STYLE);i.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");i.putString(f.VizDefConstants.K_FONT_SIZE,"13px");h.putInteger(f.VizDefConstants.K_MARGIN_TOP,100);var j=null;if(f.notNull(v)){j=v.getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES).getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);}f.RsHiChartVizUtilsCorrelation.renderValueAxis(e,j,false);if(f.notNull(v)){j=v.getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES).getStructureByKey(f.VizDefConstants.K_VALUE_AXIS2);}f.RsHiChartVizUtilsCorrelation.renderValueAxis(g,j,true);var l=t.getStructureByKey(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_VERTICAL);l.putInteger(f.VizDefConstants.K_MAX_HEIGHT,50);l.putInteger(f.VizDefConstants.K_Y,20);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var k=l.putNewStructure(f.VizDefConstants.K_ITEM_STYLE);k.putString(f.VizDefConstants.K_FONT_SIZE,"12px");k.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_NORMAL);var p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var m=p.putNewStructure(this.getChartType());var n=m.putNewStructure(f.VizDefConstants.K_MARKER);n.putString(f.VizDefConstants.K_SYMBOL,f.VizDefConstants.V_CIRCLE);var s=t.putNewStructure(f.VizDefConstants.K_SHAPE_OPTIONS);if(this.getXList().size()>1){f.RsHiChartVizUtilsCorrelation.legendStyler(t);}else{m.putString(f.VizDefConstants.K_DASH_STYLE,d);m.putString(f.VizDefConstants.K_COLOR,b);m.putString(f.VizDefConstants.K_STROKE,b);m.putString(f.VizDefConstants.K_FILL,b);s.putString(f.VizDefConstants.K_FILL,b);}var o=m.putNewStructure(f.VizDefConstants.K_DATA_LABELS);o.putBoolean(f.VizDefConstants.K_ENABLED,false);this.addPadding(this.getXList(),e);this.addPadding(this.getYList(),g);};f.RsHiChartCorrelationHelper.prototype.addPadding=function(v,a){var b=false;var m=0;var c=0;var i;var s;var d;var e;for(i=0;i<v.size();i++){e=v.getListAt(i);for(s=0;s<e.size();s++){d=e.getDoubleAt(s);if(!b||d>c){c=d;}if(!b||d<m){m=d;}b=true;}}var p=(c-m)/10;if(c+p<0){a.putDouble(f.VizDefConstants.K_MAX,0);}else{a.putDouble(f.VizDefConstants.K_MAX_PADDING,0.05);}if(m-p>0){a.putDouble(f.VizDefConstants.K_MIN,0);}else{a.putDouble(f.VizDefConstants.K_MIN_PADDING,0.05);}};f.RsHiChartCorrelationHelper.prototype.prepareRendering=function(){};f.RsHiChartCorrelationHelper.prototype.finishRendering=function(){var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var x=this.getXList();var y=this.getYList();var z=this.getZList();var b=this.getXListFormatted();var c=this.getYListFormatted();var d=this.getZListFormatted();var e=f.XCollectionUtils.hasElements(this.getXMeasures())?this.getXMeasures().get(0):"";var g=f.XCollectionUtils.hasElements(this.getYMeasures())?this.getYMeasures().get(0):"";var h=f.XCollectionUtils.hasElements(this.getZMeasures())?this.getZMeasures().get(0):"";if(f.XStringUtils.isNotNullAndNotEmpty(e)||f.XStringUtils.isNotNullAndNotEmpty(g)){var i=this.getChartData().getListByKey(f.VizDefConstants.K_X_AXIS).getStructureAt(0).getStructureByKey(f.VizDefConstants.K_TITLE);i.putString(f.VizDefConstants.K_TEXT,e);var j=this.getChartData().getListByKey(f.VizDefConstants.K_Y_AXIS).getStructureAt(0).getStructureByKey(f.VizDefConstants.K_TITLE);j.putString(f.VizDefConstants.K_TEXT,g);}var v=0;var k=0;var l=0;var m="0";var n="0";var o="0";var p=f.PrFactory.createList();var q=f.PrFactory.createList();for(var r=0;r<x.size();r++){var u=s.addNewStructure();var w=u.putNewList(f.VizDefConstants.K_DATA);u.putString(f.VizDefConstants.K_TYPE,this.getChartType());if(f.XCollectionUtils.hasElements(this.getColorList())){u.putString(f.VizDefConstants.K_NAME,this.getColorList().get(r));}else{u.putString(f.VizDefConstants.K_NAME,"");}u.putBoolean(f.VizDefConstants.K_SIZE_BY_ABSOLUTE_VALUE,true);var A=x.getListAt(r);var B=b.getListAt(r);var C=y.getListAt(r);var D=c.getListAt(r);if(z.size()>0){p=z.getListAt(r);}if(d.size()>0){q=d.getListAt(r);}for(var a=0;a<this.getCategoriesList().size();a++){var E=f.PrFactory.createStructure();l=A.getDoubleAt(a);k=C.getDoubleAt(a);o=B.getStringAt(a);n=D.getStringAt(a);var F=this.getCategoriesList().get(a);E.putString(f.VizDefConstants.K_NAME,F);E.putDouble(f.VizDefConstants.K_X,l);E.putDouble(f.VizDefConstants.K_Y,k);E.putString(f.VizDefConstants.K_X_FORMATTED,o);E.putString(f.VizDefConstants.K_Y_FORMATTED,n);if(f.notNull(p)){if(p.size()>a){v=p.getDoubleAt(a);E.putDouble(f.VizDefConstants.K_Z,v);}}if(f.notNull(q)){if(q.size()>a){m=q.getStringAt(a);E.putString(f.VizDefConstants.K_Z_FORMATTED,m);}}E.putString(f.VizDefConstants.K_SERIES_X,e);E.putString(f.VizDefConstants.K_SERIES_Y,g);E.putString(f.VizDefConstants.K_SERIES_Z,h);if(!(v===0&&l===0&&k===0)){w.add(E);}this.addToolTipsToSeries(E,r,a);}}};f.RsHiChartMarimekkoHelper=function(){};f.RsHiChartMarimekkoHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartMarimekkoHelper.prototype._ff_c="RsHiChartMarimekkoHelper";f.RsHiChartMarimekkoHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_VALUE_AXIS;};f.RsHiChartMarimekkoHelper.prototype.getYFeed=function(){return f.VizDefConstants.K_VALUE_AXIS2;};f.RsHiChartMarimekkoHelper.prototype.getZFeed=function(){return f.VizDefConstants.K_BUBBLE_WIDTH;};f.RsHiChartMarimekkoHelper.prototype.reiterateResultSet=function(c,r,a){var t=this.getChartData();var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var b=y.addNewStructure();var x=t.putNewList(f.VizDefConstants.K_X_AXIS);var d=x.addNewStructure();d.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_CATEGORY);var v=null;if(this.getVizDef()!==null){v=this.getVizDef().getStructureByKey(f.VizDefConstants.K_CHART).getStructureByKey(f.VizDefConstants.K_PROPERTIES);if(f.notNull(v)){var e=v.getStructureByKey(f.VizDefConstants.K_CATEGORY_AXIS);if(f.notNull(e)){d=f.RsHiChartUtils.axisPloter(e,d,this.getChartType(),true);}var g=v.getStructureByKey(f.VizDefConstants.K_VALUE_AXIS);if(f.notNull(g)){b=f.RsHiChartUtils.axisPloter(g,b,this.getChartType(),false);}f.RsHiChartVizUtilsSimple.addReferenceLine(this.getVizDef(),b,b,c,r,a);}}f.RsHiChartVizUtilsSimple.legendStyler(t);var p=f.PrFactory.createStructure();p=t.getStructureByKey(f.VizDefConstants.K_PLOT_OPTIONS);var h=f.VizDefConstants.K_TRANSPARENT;if(t.getListByKey(f.VizDefConstants.K_COLORS)!==null){if(t.getListByKey(f.VizDefConstants.K_COLORS).size()>0){h=t.getListByKey(f.VizDefConstants.K_COLORS).getStringAt(0);}}if(f.isNull(p)){p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);}if(!f.XString.isEqual(this.getStackingType(),null)){f.RsHiChartVizUtilsSimple.dataLabelAlignment(b,this.getChartType(),c.getDecimalPlaces(this.getXFeed()),false);}f.RsHiChartVizUtilsSimple.plotOptionChart(b,this.getChartType(),this.getStackingType(),p,0,h);f.RsHiChartVizUtilsSimple.dataLabelAlignment(b,this.getChartType(),c.getDecimalPlaces(this.getXFeed()),false);};f.RsHiChartMarimekkoHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.xName}</b> <br/>");s.append("<b>{point.yName}</b>: {point.yFormatted} <br/>");if(f.XCollectionUtils.hasElements(this.getYMeasures())){s.append("<b>{point.zName}</b>: {point.zFormatted} <br/>");}};f.RsHiChartMarimekkoHelper.prototype.prepareRendering=function(){};f.RsHiChartMarimekkoHelper.prototype.finishRendering=function(){var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var x=this.getChartData().putNewStructure(f.VizDefConstants.K_X_AXIS);x.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_CATEGORY);var a=x.putNewList(f.VizDefConstants.K_CATEGORIES);for(var i=0;i<this.getCategoriesList().size();i++){a.addString(this.getCategoriesList().get(i));}s.clear();if(f.XCollectionUtils.hasElements(this.getColorList())){if(this.getYMeasures().size()===0){this.createOneDimensionalColorSeries(s);}else{this.createTwoDimensionalColorSeries(s);}}else{if(this.getYMeasures().size()===0){this.createOneDimensionalSeries(s);}else{this.createTwoDimensionalSeries(s);}}};f.RsHiChartMarimekkoHelper.prototype.createOneDimensionalSeries=function(s){for(var w=0;w<this.getXMeasures().size();w++){var p=s.addNewStructure();var d=p.putNewStructure(f.VizDefConstants.K_DATA_LABELS);d.putBoolean(f.VizDefConstants.K_ENABLED,true);p.putString(f.VizDefConstants.K_NAME,this.getXMeasures().get(w));this.addColorAndPattern(this.getXColors().get(w),this.getXPatterns().get(w),p,f.VizDefConstants.K_VARIWIDE,false);var n=p.putNewList(f.VizDefConstants.K_DATA);for(var u=0;u<this.getCategoriesList().size();u++){var m=n.addNewStructure();m.putInteger(f.VizDefConstants.K_X,u);m.putDouble(f.VizDefConstants.K_Y,this.getXList().getListAt(w).getDoubleAt(u));m.putDouble(f.VizDefConstants.K_Z,this.getXList().getListAt(w).getDoubleAt(u));m.putString(f.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(w).getStringAt(u));m.putString(f.VizDefConstants.K_Z_FORMATTED,this.getXListFormatted().getListAt(w).getStringAt(u));m.putString(f.VizDefConstants.K_X_NAME,this.getCategoriesList().get(u));m.putString(f.VizDefConstants.K_Y_NAME,this.getXMeasures().get(w));m.putString(f.VizDefConstants.K_Z_NAME,this.getXMeasures().get(w));this.addColorAndPattern(this.getXColors().get(w),this.getXPatterns().get(w),m,f.VizDefConstants.K_VARIWIDE,true);this.addToolTipsToSeries(m,0,u);}}};f.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalSeries=function(s){for(var w=0;w<this.getXMeasures().size();w++){for(var v=0;v<this.getYMeasures().size();v++){var p=s.addNewStructure();var d=p.putNewStructure(f.VizDefConstants.K_DATA_LABELS);d.putBoolean(f.VizDefConstants.K_ENABLED,true);p.putString(f.VizDefConstants.K_NAME,f.XStringUtils.concatenate3(this.getXMeasures().get(w),"/",this.getYMeasures().get(v)));this.addColorAndPattern(this.getXColors().get(w),this.getXPatterns().get(w),p,f.VizDefConstants.K_VARIWIDE,false);var n=p.putNewList(f.VizDefConstants.K_DATA);for(var u=0;u<this.getCategoriesList().size();u++){var m=n.addNewStructure();this.addColorAndPattern(this.getXColors().get(w),this.getXPatterns().get(w),m,f.VizDefConstants.K_VARIWIDE,true);m.putInteger(f.VizDefConstants.K_X,u);m.putDouble(f.VizDefConstants.K_Y,this.getXList().getListAt(w).getDoubleAt(u));m.putDouble(f.VizDefConstants.K_Z,this.getYList().getListAt(v).getDoubleAt(u));m.putString(f.VizDefConstants.K_X_NAME,this.getCategoriesList().get(u));m.putString(f.VizDefConstants.K_Y_FORMATTED,this.getXListFormatted().getListAt(w).getStringAt(u));m.putString(f.VizDefConstants.K_Z_FORMATTED,this.getYListFormatted().getListAt(v).getStringAt(u));m.putString(f.VizDefConstants.K_Y_NAME,this.getXMeasures().get(w));m.putString(f.VizDefConstants.K_Z_NAME,this.getYMeasures().get(v));this.addToolTipsToSeries(m,0,u);}}}};f.RsHiChartMarimekkoHelper.prototype.createTwoDimensionalColorSeries=function(s){var y=this.getYList().size();var a=this.getYMeasures().size();for(var c=0;c<this.getColorList().size();c++){var b=this.getColorList().get(c);for(var w=0;w<this.getXMeasures().size();w++){var p=s.addNewStructure();var d=p.putNewStructure(f.VizDefConstants.K_DATA_LABELS);d.putBoolean(f.VizDefConstants.K_ENABLED,true);p.putString(f.VizDefConstants.K_NAME,f.XStringUtils.concatenate3(b,"/",this.getXMeasures().get(w)));var n=p.putNewList(f.VizDefConstants.K_DATA);for(var u=0;u<this.getCategoriesList().size();u++){var x=this.getXList().getListAt(this.getXMeasures().size()*c+w).getDoubleAt(u);var e=this.getXListFormatted().getListAt(this.getXMeasures().size()*c+w).getStringAt(u);var g="";var h=this.getXMeasures().get(w);var i="";var j=0;var v;for(v=0;v<y;v++){j=this.getYList().getListAt(v).getDoubleAt(u);g=this.getYListFormatted().getListAt(v).getStringAt(u);i=this.getYMeasures().get(0);if(j!==0){break;}}var m=n.addNewStructure();m.putInteger(f.VizDefConstants.K_X,u);m.putDouble(f.VizDefConstants.K_Y,x);m.putDouble(f.VizDefConstants.K_Z,j);m.putString(f.VizDefConstants.K_Y_FORMATTED,e);m.putString(f.VizDefConstants.K_Z_FORMATTED,g);m.putString(f.VizDefConstants.K_X_NAME,this.getCategoriesList().get(u));m.putString(f.VizDefConstants.K_Y_NAME,h);m.putString(f.VizDefConstants.K_Z_NAME,i);this.addToolTipsToSeries(m,f.XMath.div(v,a),u);}}}};f.RsHiChartMarimekkoHelper.prototype.createOneDimensionalColorSeries=function(s){var x=this.getXMeasures().size();for(var c=0;c<this.getColorList().size();c++){var a=this.getColorList().get(c);for(var w=0;w<this.getXMeasures().size();w++){var p=s.addNewStructure();var d=p.putNewStructure(f.VizDefConstants.K_DATA_LABELS);d.putBoolean(f.VizDefConstants.K_ENABLED,true);p.putString(f.VizDefConstants.K_NAME,f.XStringUtils.concatenate3(a,"/",this.getXMeasures().get(w)));var n=p.putNewList(f.VizDefConstants.K_DATA);for(var u=0;u<this.getCategoriesList().size();u++){var b=this.getXList().getListAt(this.getXMeasures().size()*c+w).getDoubleAt(u);var y=0;var v;for(v=0;v<this.getXList().size();v++){y=this.getXList().getListAt(v).getDoubleAt(u);if(y!==0){break;}}var e=this.getXListFormatted().getListAt(this.getXMeasures().size()*c+w).getStringAt(u);var g=this.getXMeasures().get(w);var m=n.addNewStructure();m.putInteger(f.VizDefConstants.K_X,u);m.putDouble(f.VizDefConstants.K_Y,b);m.putDouble(f.VizDefConstants.K_Z,y);m.putString(f.VizDefConstants.K_Y_FORMATTED,e);m.putString(f.VizDefConstants.K_X_NAME,this.getCategoriesList().get(u));m.putString(f.VizDefConstants.K_Y_NAME,g);this.addToolTipsToSeries(m,f.XMath.div(v,x),u);}}}};f.RsHiChartMetricHelper=function(){};f.RsHiChartMetricHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartMetricHelper.prototype._ff_c="RsHiChartMetricHelper";f.RsHiChartMetricHelper.prototype.isResponsive=function(){return false;};f.RsHiChartMetricHelper.prototype.prepareRendering=function(){};f.RsHiChartMetricHelper.prototype.finishRendering=function(){var x=this.getXList();if(!f.XCollectionUtils.hasElements(x)){return;}var z=this.getZList();var a=this.getXListFormatted();var y=this.getYListFormatted();var b=this.getZListFormatted();if(!f.XCollectionUtils.hasElements(a)){return;}var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var p=s.addNewStructure();var n=p.putNewList(f.VizDefConstants.K_DATA);var v="120px";var c="30px";var d="40px";var e=f.VizDefConstants.V_BLACK;var g=f.VizDefConstants.V_BLACK;var h=n.addNewStructure();h.putString(f.VizDefConstants.K_VALUE_FORMATTED,a.getListAt(0).getStringAt(0));h.putDouble(f.VizDefConstants.K_Y,x.getListAt(0).getDoubleAt(0));h.putString(f.VizDefConstants.K_NAME,this.getXMeasures().get(0));var i=0;var k=h.putNewList(f.VizDefConstants.K_TARGET_VALUES);var l=f.XStringBuffer.create();if(y.size()+b.size()>0){l.append("<br/><div style=\"font-size:");l.append(d);l.append("\">");}var m=0;var o=0;for(i=0;i<y.size();i++){o=f.XMath.max(o,f.XString.size(y.getListAt(i).getStringAt(0)));if(i<this.getYMeasures().size()){m=f.XMath.max(m,f.XString.size(this.getYMeasures().get(i)));}}if(b.size()>0){o=f.XMath.max(o,f.XString.size(b.getListAt(0).getStringAt(0)));}for(i=0;i<y.size();i++){var q=k.addNewStructure();q.putString(f.VizDefConstants.K_TARGET_FORMATTED,y.getListAt(i).getStringAt(0));var r="";if(i<this.getYMeasures().size()){r=this.getYMeasures().get(i);}q.putString(f.VizDefConstants.K_NAME,r);l.append("<br/><div><span style=\"text-align:left;font-size:");l.append(d);l.append(";width:");var u=3+o-f.XString.size(r);l.append(f.XInteger.convertToString(u));l.append("em;\">{point.targetValues.");l.append(f.XInteger.convertToString(i));l.append(".targetFormatted}");for(var j=0;j<u;j++){l.append("\u00A0");}l.append(" </span><span style=\"text-align:right;font-size:");l.append(d);l.append(";\">{point.targetValues.");l.append(f.XInteger.convertToString(i));l.append(".name}</span></div>");}if(b.size()>0){h.putString(f.VizDefConstants.K_VARIANCE,b.getListAt(0).getStringAt(0));l.append("<br/><div><span style=\"font-size:");l.append(d);l.append(";width:");var w=3+m+o-f.XString.size(b.getListAt(0).getStringAt(0));l.append(f.XInteger.convertToString(w));l.append("em;\">");l.append(z.getListAt(0).getDoubleAt(0)<0?"\u21E9":z.getListAt(0).getDoubleAt(0)===0?"\u21E8":"\u21E7");l.append("\u00A0{point.variance}");l.append("</span><span style=\"text-align:right;font-size:");l.append(d);l.append(";\"></span></div>");}if(y.size()+b.size()>0){l.append("</div>");}var A=t.getStructureByKey(f.VizDefConstants.K_CHART);var B=t.putNewStructure(f.VizDefConstants.K_LANG);B.putString(f.VizDefConstants.K_THOUSANDS_SEP,",");A.putInteger(f.VizDefConstants.K_MARGIN_TOP,110);var C=t.putNewStructure(f.VizDefConstants.K_TOOLTIP);C.putBoolean(f.VizDefConstants.K_ENABLED,false);var D=t.putNewStructure(f.VizDefConstants.K_PANE);var E=D.putNewList(f.VizDefConstants.K_BACKGROUND).addNewStructure();E.putString(f.VizDefConstants.K_BACKGROUND_COLOR,"rgba(0,0,0,0)");E.putString(f.VizDefConstants.K_INNER_RADIUS,"0%");E.putString(f.VizDefConstants.K_OUTER_RADIUS,"0%");E.putString(f.VizDefConstants.K_SHAPE,f.VizDefConstants.V_ARC);D.putInteger(f.VizDefConstants.K_END_ANGLE,0);D.putInteger(f.VizDefConstants.K_START_ANGLE,0);D.putInteger(f.VizDefConstants.K_SIZE,0);var F=D.putNewList(f.VizDefConstants.V_CENTER);F.addString("0%");F.addString("0%");var G=t.putNewList(f.VizDefConstants.K_Y_AXIS);var H=G.addNewStructure();H.putInteger(f.VizDefConstants.K_LINE_WIDTH,0);H.putInteger(f.VizDefConstants.K_GRIDLINE_WIDTH,0);H.putBoolean(f.VizDefConstants.K_VISIBLE,false);var I=t.putNewStructure(f.VizDefConstants.K_LEGEND);I.putBoolean(f.VizDefConstants.K_ENABLED,false);var J=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var K=J.putNewStructure(f.VizDefConstants.K_SERIES);var L=K.putNewStructure(f.VizDefConstants.K_DATA_LABELS);L.putBoolean(f.VizDefConstants.K_ENABLED,true);L.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_RIGHT);L.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_MIDDLE);L.putInteger(f.VizDefConstants.K_Y,0);L.putInteger(f.VizDefConstants.K_BORDER_WIDTH,0);var M=";\">{point.valueFormatted}</span>";var N=";\">{point.name}</span></div>";t.putBoolean(f.VizDefConstants.K_FULL_SCREEN_ENABLED,false);var O=null;var P=null;var Q=null;O=f.XStringUtils.concatenate5("<div><span style=\"font-size:",c,";color:",e,N);P=f.XStringUtils.concatenate5("<span style=\"font-size:",v,";color:",g,M);var R=l.toString();Q=f.XStringUtils.concatenate4(P,"<br/>",O,R);L.putString(f.VizDefConstants.K_FORMAT,Q);var S=L.putNewStructure(f.VizDefConstants.K_STYLE);S.putString(f.VizDefConstants.K_TEXT_OUTLINE,"0px");var T=J.putNewStructure(f.VizDefConstants.K_SOLID_GAUGE);T.putBoolean(f.VizDefConstants.K_ANIMATION,false);};f.RsHiChartMetricHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_VALUE_AXIS;};f.RsHiChartMetricHelper.prototype.getYFeed=function(){return f.VizDefConstants.K_VALUE_AXIS2;};f.RsHiChartMetricHelper.prototype.getZFeed=function(){return f.VizDefConstants.K_VARIANCE;};f.RsHiChartPieHelper=function(){};f.RsHiChartPieHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartPieHelper.prototype._ff_c="RsHiChartPieHelper";f.RsHiChartPieHelper.prototype.isShowLegend=function(){return true;};f.RsHiChartPieHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_SIZE;};f.RsHiChartPieHelper.prototype.getYFeed=function(){return null;};f.RsHiChartPieHelper.prototype.getZFeed=function(){return null;};f.RsHiChartPieHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.name}</b>: {point.yFormatted} <br/>");};f.RsHiChartPieHelper.prototype.prepareRendering=function(){var t=this.getChartData();var c=t.getStructureByKey(f.VizDefConstants.K_CHART);var a=c.putNewStructure(f.VizDefConstants.K_STYLE);a.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");a.putString(f.VizDefConstants.K_FONT_SIZE,"13px");var l=t.getStructureByKey(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);l.putInteger(f.VizDefConstants.K_SYMBOL_RADIUS,0);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_HORIZONTAL);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var b=y.addNewStructure();var d=b.putNewStructure(f.VizDefConstants.K_TITLE);d.putString(f.VizDefConstants.K_TEXT,"");var e=p.putNewStructure(this.getChartType());e.putBoolean(f.VizDefConstants.K_SHOW_IN_LEGEND,true);e.putString(f.VizDefConstants.K_INNER_SIZE,this.getInnerRadius());var g=e.putNewStructure(f.VizDefConstants.K_DATA_LABELS);g.putBoolean(f.VizDefConstants.K_ENABLED,true);g.putString(f.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");g.putBoolean(f.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);g.putInteger(f.VizDefConstants.K_DISTANCE,15);var h=g.putNewStructure(f.VizDefConstants.K_STYLE);h.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.V_FONT_WEIGHT_BOLD);h.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");h.putString(f.VizDefConstants.K_FONT_SIZE,"12px");h.putString(f.VizDefConstants.K_COLOR,"rgb(88,89,91)");};f.RsHiChartPieHelper.prototype.finishRendering=function(){var t=this.getChartData();var a=t.putNewList(f.VizDefConstants.K_SERIES);var b=a.addNewStructure();var n=b.putNewList(f.VizDefConstants.K_DATA);if(this.getXList().size()===0){return;}b.putString(f.VizDefConstants.K_NAME,this.getXMeasures().get(0));var x=this.getXListRemapped();var y=this.getYListRemapped();var c=this.getXListFormattedRemapped();var d=this.getYListFormattedRemapped();var e=this.getCategoriesList();for(var p=0;p<x.size();p++){var g=n.addNewStructure();var h=x.getDoubleAt(p);var i=f.XDouble.convertToString(h);var z=0.0;var j="0.0";if(p<c.size()){i=c.getStringAt(p);}if(p<y.size()){z=y.getDoubleAt(p);j=f.XDouble.convertToString(z);}if(p<d.size()){j=d.getStringAt(p);}g.putString(f.VizDefConstants.K_Y_FORMATTED,i);g.putString(f.VizDefConstants.K_Z_FORMATTED,j);g.putDouble(f.VizDefConstants.K_Y,h);g.putDouble(f.VizDefConstants.K_Z,z);this.addToolTipsToSeries(g,0,p);if(e.size()>p){var s=e.get(p);g.putString(f.VizDefConstants.K_NAME,s);}}};f.RsHiChartTimeSeriesHelper=function(){};f.RsHiChartTimeSeriesHelper.prototype=new f.RsHiChartSeriesHelper();f.RsHiChartTimeSeriesHelper.prototype._ff_c="RsHiChartTimeSeriesHelper";f.RsHiChartTimeSeriesHelper.addValue=function(d,a,b,c,t,m,e,g,h,k,l,n,o,p,q){var r=0;var v=b.getValueType();var s=d.addNewStructure();if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){s.putDouble(f.VizDefConstants.K_X,a.getMilliseconds());if(b.getXValue()!==null){r=b.getDouble();s.putDouble(f.VizDefConstants.K_Y,r);s.putString(f.VizDefConstants.K_Y_FORM,c.getFormattedValue(f.VizDefConstants.K_VALUE_AXIS,t,b));s.putDouble(f.VizDefConstants.K_PERCENT,r*100);}else{s.putString(f.VizDefConstants.K_Y,null);s.putString(f.VizDefConstants.K_Y_FORM,null);}if(q){s.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,t.getColor());}s.putString(f.VizDefConstants.K_NAME,m);if(f.notNull(k)){s.putString(f.VizDefConstants.K_CATEGORY_FORM,k);}}if(f.notNull(e)){var u=e.addNewList();u.addDouble(g);u.addDouble(h);if(g<h){s.putString(f.VizDefConstants.K_ERROR_RANGE,f.XStringUtils.concatenate3(f.XDouble.convertToString(g)," .. ",p));}else{s.putString(f.VizDefConstants.K_ERROR_RANGE,f.XStringUtils.concatenate3(f.XDouble.convertToString(h)," .. ",o));}}if(f.XCollectionUtils.hasElements(l)){for(var j=0;j<l.size();j++){s.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_HEADER,f.XInteger.convertToString(j)),l.get(j));}}if(f.XCollectionUtils.hasElements(n)){for(var i=0;i<n.size();i++){s.putString(f.XStringUtils.concatenate2(f.VizDefConstants.K_T_FORMATTED,f.XInteger.convertToString(i)),n.get(i));}}};f.RsHiChartTimeSeriesHelper.prototype.isTimeseries=function(){return true;};f.RsHiChartTimeSeriesHelper.prototype.prepareRendering=function(){};f.RsHiChartTimeSeriesHelper.prototype.readResultSetData=function(c,r,a){var t=this.getChartData();var d=null;var b=null;var e=t.putNewStructure(f.VizDefConstants.K_LANG);var s=t.putNewList(f.VizDefConstants.K_SERIES);var g=f.XStringBuffer.create();g.append("<b>{series.name}</b><br/>");var h;g.append("<b>{point.name}</b>:  {point.yForm}<br/>");var k=false;var l=f.XListOfString.create();l.add(f.VizDefConstants.K_VALUE_AXIS);l.add(f.VizDefConstants.K_VALUE_AXIS2);l.add(f.VizDefConstants.K_VARIANCE);var p=c.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_COLOR);if(a.getAvailableDataCellCount()>0){var m=c.getPrettyNamesForFeed(true,false,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);for(var n=0;n<m.size();n++){g.append("<b>{point.tHeader");g.append(f.XInteger.convertToString(n));g.append("}</b>:  {point.tFormatted");g.append(f.XInteger.convertToString(n));g.append("}<br/>");}g.append("{point.errorRange}<br/>");g.append("{point.categoryForm}<br/>");var o=r.getDateList();var q=r.getFormattedDateList();if(f.XCollectionUtils.hasElements(o)){var u=c.getIndicesByFeedOrder(l);var v=f.XListOfString.create();v.add(f.VizDefConstants.K_COLOR);v.addAll(l);this.setShowLegend(u.size()>1);for(var w=0;w<u.size();w++){var i=u.get(w).getInteger();var x=c.getTupleAt(i);if(!x.isSelectedByString(f.VizDefConstants.K_VALUE_AXIS)){continue;}var y=p.size()<2;b=s.addNewStructure();b.putString(f.VizDefConstants.K_NAME,x.getPrettyDefaultText());d=b.putNewList(f.VizDefConstants.K_DATA);if(y){b.putStringNotNullAndNotEmpty(f.VizDefConstants.K_COLOR,x.getColor());}var z=x.getMemberKeys();h=null;var A=i;var B=i;var C=false;var D=null;var E=null;if(f.XCollectionUtils.hasElements(z)){D=c.getMatchingTupleIndicesForMemberNameAndFeed(z,f.VizDefConstants.K_TOOLTIP_VALUE_AXIS);var F=c.getMatchingTupleIndicesForMemberNamesAndSuffix(z,f.VizDefConstants.K_ERRORBAR_MIN);if(F!==-1){A=F;C=true;}F=c.getMatchingTupleIndicesForMemberNamesAndSuffix(z,f.VizDefConstants.K_ERRORBAR_MAX);if(F!==-1){B=F;C=true;}if(C){var G=s.addNewStructure();h=G.putNewList(f.VizDefConstants.K_DATA);G.putString(f.VizDefConstants.K_TYPE,f.VizDefConstants.K_ERRORBAR);}}for(var j=0;j<r.getTuplesCount();j++){if(!r.getTupleAt(j).isSelectedByString(f.VizDefConstants.K_TIME_AXIS)){continue;}var H=o.get(j);var I=0;var J=0;var K="";var L="";if(f.notNull(H)){if(C){I=a.getDataCell(A,j).getDouble();K=c.getFormattedValue(f.VizDefConstants.K_VALUE_AXIS,c.getTupleAt(A),a.getDataCell(A,j));J=a.getDataCell(B,j).getDouble();L=c.getFormattedValue(f.VizDefConstants.K_VALUE_AXIS,c.getTupleAt(B),a.getDataCell(B,j));}if(f.XCollectionUtils.hasElements(D)){E=f.XListOfString.create();for(var M=0;M<D.size();M++){var N=D.get(M).getInteger();E.add(c.getFormattedValue("",c.getTupleAt(N),a.getDataCell(N,j)));}}var O=a.getDataCell(i,j);if(!r.getTupleAt(j).isTotal()){f.RsHiChartTimeSeriesHelper.addValue(d,H,O,c,x,x.getPrettyDefaultText(),h,I,J,q.get(j),m,E,K,L,y);k=true;}}}}var P=t.putNewStructure(f.VizDefConstants.K_TOOLTIP);P.putString(f.VizDefConstants.K_POINT_FORMAT,g.toString());P.putString(f.VizDefConstants.K_HEADER_FORMAT,"");}}if(!k){e.putString(f.VizDefConstants.K_NO_DATA,"Firefly Resultset is Empty.");t.putBoolean(f.VizDefConstants.K_FULL_SCREEN_ENABLED,false);}};f.RsHiChartTimeSeriesHelper.prototype.finishRendering=function(){this.getChartData().putBoolean(f.VizDefConstants.K_IS_TIME_SERIES,true);};f.RsHiChartTreemapHelper=function(){};f.RsHiChartTreemapHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartTreemapHelper.prototype._ff_c="RsHiChartTreemapHelper";f.RsHiChartTreemapHelper.prototype.prepareRendering=function(){};f.RsHiChartTreemapHelper.prototype.finishRendering=function(){var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var p=s.addNewStructure();p.putString(f.VizDefConstants.K_LAYOUT_ALGORITHM,f.VizDefConstants.V_TREEMAP_LAYOUT_STRIP);var n=p.putNewList(f.VizDefConstants.K_DATA);if(this.getXList().size()===0){return;}if(this.getYMeasures().size()>0){p.putString(f.VizDefConstants.K_NAME,this.getYMeasures().get(0));}else if(this.getXMeasures().size()>0){p.putString(f.VizDefConstants.K_NAME,this.getXMeasures().get(0));}else{p.putString(f.VizDefConstants.K_NAME,"");}var x=this.getXListRemapped();var y=this.getYListRemapped();var a=this.getXListFormattedRemapped();var b=this.getYListFormattedRemapped();var c=this.getXMeasures();var d=this.getYMeasures();var e=this.getCategoryLabels();var g=f.XCollectionUtils.hasElements(d);if(!g){y=x;b=a;d=c;}var h=p.putNewStructure(f.VizDefConstants.K_DATA_LABELS);h.putString(f.VizDefConstants.K_POINT_FORMAT,"<b>{point.name}</b><br/> {point.valueFormatted}");var i=0;var j=0;var l="0";var m="0";var o=f.XHashSetOfString.create();for(var k=0;k<e.size();k++){var q=e.get(k);i=x.getDoubleAt(k);j=y.getDoubleAt(k);l=a.getStringAt(k);m=b.getStringAt(k);var r=this.getNewLabeledStructure(n,q,o);if(q.isLeafOrCollapsed()){r.putDouble(f.VizDefConstants.K_VALUE,i);r.putDouble(f.VizDefConstants.K_COLOR_VALUE,j);}r.putString(f.VizDefConstants.K_VALUE_FORMATTED,l);r.putString(f.VizDefConstants.K_COLOR_VALUE_FORMATTED,m);r.putString(f.VizDefConstants.K_COLOR_NAME,d.get(0));r.putString(f.VizDefConstants.K_VALUE_NAME,c.get(0));r.putString(f.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(r,0,k);}f.RsHiChartVizUtilsHeatmap.rendrerHeatmap(this.getChartData(),this.getChartType(),this.getVizDef(),this.getGlobalDef());};f.RsHiChartTreemapHelper.prototype.getNewLabeledStructure=function(n,e,k){if(k.contains(e.getCompoundId())){return null;}if(e.getParent()!==null){this.getNewLabeledStructure(n,e.getParent(),k);}k.add(e.getCompoundId());var a=n.addNewStructure();a.putString(f.VizDefConstants.K_ID,e.getCompoundId());if(e.getParent()!==null){a.putString(f.VizDefConstants.K_PARENT,e.getParent().getCompoundId());}a.putString(f.VizDefConstants.K_NAME,e.getLabel());if(!e.isLeafOrCollapsed()){a.putInteger(f.VizDefConstants.K_BORDER_WIDTH,f.XMath.div(6,e.getDisplayLevel()+1));a.putString(f.VizDefConstants.K_BORDER_COLOR,"grey");}return a;};f.RsHiChartTreemapHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_WEIGHT;};f.RsHiChartTreemapHelper.prototype.getYFeed=function(){return f.VizDefConstants.K_COLOR;};f.RsHiChartTreemapHelper.prototype.getZFeed=function(){return null;};f.RsHiChartTreemapHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.name}</b><br/><b>{point.valueName}</b>: {point.valueFormatted} <br/>");if(f.XCollectionUtils.hasElements(this.getYMeasures())){s.append("<b>{point.colorName}</b>: {point.colorValueFormatted} <br/>");}};f.RsHiChartWordcloudHelper=function(){};f.RsHiChartWordcloudHelper.prototype=new f.RsHiChartCovariationHelper();f.RsHiChartWordcloudHelper.prototype._ff_c="RsHiChartWordcloudHelper";f.RsHiChartWordcloudHelper.prototype.getXFeed=function(){return f.VizDefConstants.K_SIZE;};f.RsHiChartWordcloudHelper.prototype.getYFeed=function(){return null;};f.RsHiChartWordcloudHelper.prototype.getZFeed=function(){return null;};f.RsHiChartWordcloudHelper.prototype.decorateToolTip=function(s){s.append("<b>{point.name}</b>: {point.weightFormatted}  <br/>");};f.RsHiChartWordcloudHelper.prototype.prepareRendering=function(){var t=this.getChartData();var c=t.getStructureByKey(f.VizDefConstants.K_CHART);var a=c.putNewStructure(f.VizDefConstants.K_STYLE);a.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");a.putString(f.VizDefConstants.K_FONT_SIZE,"13px");var l=t.getStructureByKey(f.VizDefConstants.K_LEGEND);l.putBoolean(f.VizDefConstants.K_SQUARE_SYMBOL,true);l.putInteger(f.VizDefConstants.K_SYMBOL_RADIUS,0);l.putString(f.VizDefConstants.K_LAYOUT,f.VizDefConstants.V_HORIZONTAL);l.putString(f.VizDefConstants.K_ALIGN,f.VizDefConstants.V_CENTER);l.putString(f.VizDefConstants.K_VERTICAL_ALIGN,f.VizDefConstants.V_POSITION_TOP);var p=t.putNewStructure(f.VizDefConstants.K_PLOT_OPTIONS);var y=t.putNewList(f.VizDefConstants.K_Y_AXIS);var b=y.addNewStructure();var d=b.putNewStructure(f.VizDefConstants.K_TITLE);d.putString(f.VizDefConstants.K_TEXT,"");var e=p.putNewStructure(this.getChartType());var g=e.putNewStructure(f.VizDefConstants.K_STYLE);g.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");var h=e.putNewStructure(f.VizDefConstants.K_ROTATION);h.putInteger(f.VizDefConstants.K_FROM,-45);h.putInteger(f.VizDefConstants.K_TO,25);e.putString(f.VizDefConstants.K_PLACEMENT_STRATEGY,"center");e.putBoolean(f.VizDefConstants.K_SHOW_IN_LEGEND,true);var i=e.putNewStructure(f.VizDefConstants.K_DATA_LABELS);i.putBoolean(f.VizDefConstants.K_ENABLED,true);i.putString(f.VizDefConstants.K_FORMAT,"{point.percentage:.2f} %");i.putBoolean(f.VizDefConstants.K_HIDE_WHEN_OVERLAP,true);i.putInteger(f.VizDefConstants.K_DISTANCE,15);var j=i.putNewStructure(f.VizDefConstants.K_STYLE);j.putString(f.VizDefConstants.K_FONT_WEIGHT,f.VizDefConstants.K_BOLD);j.putString(f.VizDefConstants.K_FONT_FAMILY,"LatoWeb, 'Open Sans', 'Helvetica Neue', Helvetica, Arial, 'sans serif'");j.putString(f.VizDefConstants.K_FONT_SIZE,"12px");j.putString(f.VizDefConstants.K_COLOR,"rgb(88,89,91)");};f.RsHiChartWordcloudHelper.prototype.finishRendering=function(){var t=this.getChartData();var s=t.putNewList(f.VizDefConstants.K_SERIES);var x=this.getXList();var a=this.getXListFormatted();var l=x.size();for(var o=0;o<l;o++){var b=s.addNewStructure();b.putString(f.VizDefConstants.K_NAME,this.getXMeasures().get(o));var n=b.putNewList(f.VizDefConstants.K_DATA);var c=x.getListAt(o);var d=a.getListAt(o);for(var p=0;p<c.size();p++){var e=n.addNewStructure();var y=c.getDoubleAt(p);var g=f.XDouble.convertToString(y);if(p<d.size()){g=d.getStringAt(p);}e.putDouble(f.VizDefConstants.K_WEIGHT,y);e.putString(f.VizDefConstants.K_WEIGHT_FORMATTED,g);var h=this.getCategoriesList().get(p);e.putString(f.VizDefConstants.K_NAME,h);e.putString(f.VizDefConstants.K_TYPE,this.getChartType());this.addToolTipsToSeries(e,o,p);}}};f.ReferenceGrid2=function(){};f.ReferenceGrid2.prototype=new f.ReferenceGrid();f.ReferenceGrid2.prototype._ff_c="ReferenceGrid2";f.ReferenceGrid2.createWithName2=function(g,r){var a=new f.ReferenceGrid2();a.setupSimpleGrid(r,false,false);return a;};f.ReferenceGrid2.prototype.prepareCellStructure=function(u,a){if(f.notNull(this.m_resultSet)){this.prepareStructure(u,a);}};f.ReferenceGrid2.prototype.formatDataCellValue=function(d){var v;if(d.getXValue()!==null&&d.getXValue().getValueType()===f.XValueType.DOUBLE){var s=d.getXValue().getStringRepresentation();v=f.XNumberFormatter.formatDoubleToString(f.XDouble.convertFromString(s),"#,#.###");}else{v=d.getFormattedValue();}return v;};f.OlapDataPrg=function(){};f.OlapDataPrg.prototype=new f.DfApplicationProgram();f.OlapDataPrg.prototype._ff_c="OlapDataPrg";f.OlapDataPrg.SYSTEM_NAME="system";f.OlapDataPrg.QUERY="query";f.OlapDataPrg.OUTPUT="output";f.OlapDataPrg.main=function(){f.KernelNativeModule.getInstance();var k=f.KernelBoot.createByName("olapdata");k.setArgument("system","KIW");k.setArgument("query","query:[0BICS_C03_BICSTEST_Q0000]");k.setDefaultSyncType(f.SyncType.BLOCKING);k.runFull();};f.OlapDataPrg.prototype.newProgram=function(){var n=new f.OlapDataPrg();n.setup();return n;};f.OlapDataPrg.prototype.doSetupProgramMetadata=function(m){f.DfApplicationProgram.prototype.doSetupProgramMetadata.call(this,m);m.addMandatoryOption(f.OlapDataPrg.SYSTEM_NAME,"The system name","",f.XValueType.STRING);m.addMandatoryOption(f.OlapDataPrg.QUERY,"The query name","",f.XValueType.STRING);m.addOption(f.OlapDataPrg.OUTPUT,"Output DOM id. If not given, the output is written on the console","",f.XValueType.STRING);};f.OlapDataPrg.prototype.runProcess=function(){this.writeToOutput("Initializing Query Manager...");var a=this.getApplication();var b=this.getArguments();var s=b.getStringByKey(f.OlapDataPrg.SYSTEM_NAME);var q=b.getStringByKey(f.OlapDataPrg.QUERY);var c=f.QueryServiceConfig.createWithDataSourceName(a,s,q);c.processQueryManagerCreation(null,this,null);return false;};f.OlapDataPrg.prototype.onQueryManagerCreated=function(e,q,c){if(e.hasErrors()){this.writeToOutput(e.getSummary());}else{this.writeToOutput("Loading Resultset...");q.processQueryExecution(null,this,null);}};f.OlapDataPrg.prototype.onQueryExecuted=function(e,r,c){if(e.hasErrors()){this.writeToOutput(e.getSummary());}else{var a=r.getClassicResultSet();var g=f.ReferenceGrid.create(a);var b=g.exportToAscii(30);this.writeToOutput(f.XStringUtils.concatenate3("<pre>",b,"</pre>"));}};f.OlapDataPrg.prototype.writeToOutput=function(t){var a=this.getArguments();var o=a.getStringByKey(f.OlapDataPrg.OUTPUT);if(f.XStringUtils.isNotNullAndNotEmpty(o)){f.DocumentEnv.setStringAtId(o,t);}else{this.println(t);}};f.OlapReferenceModule=function(){};f.OlapReferenceModule.prototype=new f.DfModule();f.OlapReferenceModule.prototype._ff_c="OlapReferenceModule";f.OlapReferenceModule.s_module=null;f.OlapReferenceModule.getInstance=function(){if(f.isNull(f.OlapReferenceModule.s_module)){f.DfModule.checkInitialized(f.OlapApiModule.getInstance());f.OlapReferenceModule.s_module=f.DfModule.startExt(new f.OlapReferenceModule());f.ReferenceGridFactory.setInstance(f.ReferenceGridFactoryImpl.create());f.FioriGridFactory.setInstance(f.FioriGridFactoryImpl.create());f.RsGoogleChartConfig.staticSetup();f.ChartRendererFactory.setInstance(f.ChartRendererFactoryImpl.create());f.KpiRendererFactory.setInstance(f.KpiRendererFactoryImpl.create());f.GridRendererFactory.setInstance(f.GridRendererFactoryImpl.create());f.GridResolverFactory.setInstance(f.GridResolverFactoryImpl.create());f.DfModule.stopExt(f.OlapReferenceModule.s_module);}return f.OlapReferenceModule.s_module;};f.OlapReferenceModule.prototype.getName=function(){return"ff4340.olap.reference";};f.OlapReferenceModule.getInstance();return sap.firefly;});
