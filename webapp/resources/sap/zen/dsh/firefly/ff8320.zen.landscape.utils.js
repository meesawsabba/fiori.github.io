/*
* SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
*/
sap.ui.define(["jquery.sap.global","sap/zen/dsh/firefly/ff8310.zen.buddha","jquery.sap.resources"],function(q){"use strict";(function(f,a){sap.zen.DesignStudio=function(){};sap.zen.DesignStudio.prototype=new f.XObject();sap.zen.DesignStudio.prototype._ff_c="DesignStudio";sap.zen.DesignStudio.prototype.moWindow=null;sap.zen.DesignStudio.prototype.mLanguage=null;sap.zen.DesignStudio.prototype.mSDKLoaderPath=null;sap.zen.DesignStudio.prototype.mApplicationName=null;sap.zen.DesignStudio.prototype.mBIAppPath=null;sap.zen.DesignStudio.prototype.mRepositoryUrl=null;sap.zen.DesignStudio.prototype.mtUrlParameters=null;sap.zen.DesignStudio.prototype.mDesignMode=false;sap.zen.DesignStudio.prototype.mDshControlId=null;sap.zen.DesignStudio.prototype.mPageId=null;sap.zen.DesignStudio.prototype.moLandscapeUtils=null;sap.zen.DesignStudio.prototype.mHost=null;sap.zen.DesignStudio.prototype.mPort=0;sap.zen.DesignStudio.prototype.mProtocol=null;sap.zen.DesignStudio.prototype.mHanaMode=false;sap.zen.DesignStudio.prototype.mClient=null;sap.zen.DesignStudio.prototype.moTemplateLoader=null;sap.zen.DesignStudio.prototype.mLocaleString=null;sap.zen.DesignStudio.prototype.moSDKLoader=null;sap.zen.DesignStudio.prototype.moBookmarkService=null;sap.zen.DesignStudio.prototype.moBookmarkRequestHandler=null;sap.zen.DesignStudio.prototype.mUser=null;sap.zen.DesignStudio.prototype.mPassword=null;sap.zen.DesignStudio.prototype.mUserAgent=null;sap.zen.DesignStudio.prototype.mOptimizeDSRequests=false;sap.zen.DesignStudio.prototype.mStaticMimesRootPath=null;sap.zen.DesignStudio.prototype.moLogging=null;sap.zen.DesignStudio.prototype.mSystemAlias=null;sap.zen.DesignStudio.prototype.moLocalization=null;sap.zen.DesignStudio.prototype.mNewBW=false;sap.zen.DesignStudio.prototype.mRightToLeft=false;sap.zen.DesignStudio.prototype.setLogging=function(l){this.moLogging=l;};sap.zen.DesignStudio.prototype.setLocalization=function(l){this.moLocalization=l;};sap.zen.DesignStudio.prototype.setSdkLoader=function(s){this.moSDKLoader=s;};sap.zen.DesignStudio.prototype.setXWindow=function(w){this.moWindow=w;};sap.zen.DesignStudio.prototype.setLanguage=function(l){this.mLanguage=l;};sap.zen.DesignStudio.prototype.setSdkLoaderPath=function(S){this.mSDKLoaderPath=S;};sap.zen.DesignStudio.prototype.setApplicationName=function(b){this.mApplicationName=b;};sap.zen.DesignStudio.prototype.setApplicationPath=function(b){this.mBIAppPath=b;};sap.zen.DesignStudio.prototype.setRepositoryUrl=function(u){this.mRepositoryUrl=u;};sap.zen.DesignStudio.prototype.setUrlParameter=function(t){this.mtUrlParameters=t;};sap.zen.DesignStudio.prototype.setDesignMode=function(d){this.mDesignMode=d;};sap.zen.DesignStudio.prototype.setDshControlId=function(d){this.mDshControlId=d;};sap.zen.DesignStudio.prototype.setPageId=function(p){this.mPageId=p;};sap.zen.DesignStudio.prototype.setLandscapeUtils=function(l){this.moLandscapeUtils=l;};sap.zen.DesignStudio.prototype.setHost=function(h){this.mHost=h;};sap.zen.DesignStudio.prototype.setPort=function(p){this.mPort=p;};sap.zen.DesignStudio.prototype.setProtocol=function(p){this.mProtocol=p;};sap.zen.DesignStudio.prototype.setHanaMode=function(h){this.mHanaMode=h;};sap.zen.DesignStudio.prototype.setClient=function(c){this.mClient=c;};sap.zen.DesignStudio.prototype.setTemplateLoader=function(t){this.moTemplateLoader=t;};sap.zen.DesignStudio.prototype.setBookmarkRequestHandler=function(b){this.moBookmarkRequestHandler=b;};sap.zen.DesignStudio.prototype.setUser=function(n){this.mUser=n;};sap.zen.DesignStudio.prototype.setPassword=function(p){this.mPassword=p;};sap.zen.DesignStudio.prototype.setUserAgent=function(u){this.mUserAgent=u;};sap.zen.DesignStudio.prototype.setOptimizeDSRequests=function(o){this.mOptimizeDSRequests=o;};sap.zen.DesignStudio.prototype.setStaticMimesRootPath=function(p){this.mStaticMimesRootPath=p;};sap.zen.DesignStudio.prototype.setSystemAlias=function(b){this.mSystemAlias=b;};sap.zen.DesignStudio.prototype.setNewBW=function(n){this.mNewBW=n;};sap.zen.DesignStudio.prototype.setRightToLeft=function(r){this.mRightToLeft=r;};sap.zen.DesignStudio.prototype.createPage=function(){if(f.isNull(this.moSDKLoader)){this.moSDKLoader=new sap.zen.SDKLoader();}if(f.isNull(this.moLogging)){this.moLogging=sap.buddha.XLogging.create();}if(f.isNull(this.moLocalization)){this.moLocalization=sap.buddha.XLocalization.create();}this.moSDKLoader.setRelativePath(this.mSDKLoaderPath);this.moSDKLoader.setRuntimePath(this.mStaticMimesRootPath);if(f.isNull(this.moLandscapeUtils)){this.moLandscapeUtils=new sap.zen.LandscapeUtils();}if(f.isNull(this.mLanguage)||f.XString.size(this.mLanguage)===0){this.mLanguage="EN";}this.moLandscapeUtils.doInit(this.mLanguage);if(f.isNull(this.moWindow)){this.moWindow=sap.buddha.XWindow.create();}if(f.isNull(this.mHost)||f.XString.size(this.mHost)===0){this.mHost="localhost";}if(!f.XString.endsWith(this.mBIAppPath,"/")){this.mBIAppPath=f.XStringUtils.concatenate2(this.mBIAppPath,"/");}this.moWindow.setLocale(this.mLocaleString);var l=this.moLandscapeUtils.getSelf();if(f.isNull(l)){if(this.mNewBW||f.XStringUtils.isNotNullAndNotEmpty(this.mClient)){l=this.moLandscapeUtils.addSelfBW(this.mHost,this.mPort,this.mProtocol,this.mClient,this.mSystemAlias,this.mNewBW);}else{l=this.moLandscapeUtils.addSelf(this.mHost,this.mPort,this.mProtocol);}if(f.notNull(this.mUser)&&f.XString.size(this.mUser)>0){l.setUser(this.mUser);}if(f.notNull(this.mPassword)&&f.XString.size(this.mPassword)>0){l.setPassword(this.mPassword);}if(f.isNull(this.moTemplateLoader)&&f.isNull(this.moBookmarkRequestHandler)){this.moTemplateLoader=new sap.zen.TemplateLoader();this.moBookmarkRequestHandler=new sap.zen.BookmarkRequestHandler();var b=l.getSystemType();if(b.isTypeOf(f.SystemType.ABAP)){this.adaptFFForWebDispatcher(l);this.moTemplateLoader.initBaseBW(this.moLandscapeUtils.getApplication(),l,this.mApplicationName,this.mRepositoryUrl);this.moBookmarkRequestHandler.initBaseBW(this.moLandscapeUtils.getApplication(),l);}else{var s=this.mBIAppPath;if(f.XString.startsWith(s,"http://")){s=f.XString.substring(s,7,-1);var i=f.XString.indexOf(s,"/");s=f.XString.substring(s,i,-1);}else if(f.XString.startsWith(s,"https://")){s=f.XString.substring(s,8,-1);var c=f.XString.indexOf(s,"/");s=f.XString.substring(s,c,-1);}s=f.XStringUtils.concatenate2(s,"content.biapp");this.moTemplateLoader.initBase(this.moLandscapeUtils.getApplication(),l,s);this.moBookmarkRequestHandler.initBase(this.moLandscapeUtils.getApplication(),l,s);}}}if(f.isNull(this.moBookmarkService)){this.moBookmarkService=new sap.zen.BookmarkService();this.moBookmarkService.setup();}if(f.isNull(this.mDshControlId)){this.mDshControlId="";}var d=new sap.zen.ZenTemplateService();var e=d.createPage(this.moLandscapeUtils.getApplication(),this.moWindow,this.mApplicationName,this.mBIAppPath,this.mHanaMode,this.mtUrlParameters,this.mDesignMode,this.mDshControlId,this.moSDKLoader,this.mPageId,this.moTemplateLoader,this.mUserAgent,this.moBookmarkService,this.moBookmarkRequestHandler,this.mOptimizeDSRequests,this.moLogging,this.moLocalization,this.mRightToLeft);e.setLocalPort(this.mPort);return e;};sap.zen.DesignStudio.prototype.setLocaleString=function(l){this.mLocaleString=l;};sap.zen.DesignStudio.prototype.setBookmarkService=function(b){this.moBookmarkService=b;};sap.zen.DesignStudio.prototype.adaptFFForWebDispatcher=function(l){if(!l.getSystemType().isTypeOf(f.SystemType.BW)){var b=f.XUri.create();b.setProtocolType(l.getProtocolType());var c=f.HttpClientFactory.newInstanceByConnection(this.moLandscapeUtils.getApplication().getSession(),b);var d=c.getRequest();d.setFromConnectionInfo(l);d.setPath(f.SystemType.BW.getServerInfoPath());d.setMethod(f.HttpRequestMethod.HTTP_GET);d.setAcceptContentType(f.ContentType.APPLICATION_JSON);var e=c.processHttpRequest(f.SyncType.BLOCKING,null,null);if(!e.hasErrors()&&e.getData()!==null&&e.getData().getStatusCode()<400){var g=e.getData().getJsonContent();if(f.notNull(g)&&g.isStructure()){var h=g.asStructure();var i=h.getStructureByKey("ServerInfo");if(f.notNull(i)){var j=i.getStringByKey("Client");if(f.notNull(j)){this.mClient=j;l.setClient(j);}}}}}};sap.zen.LandscapeUtils=function(){};sap.zen.LandscapeUtils.prototype=new f.XObject();sap.zen.LandscapeUtils.prototype._ff_c="LandscapeUtils";sap.zen.LandscapeUtils.registerComponentFactory=function(c,p){sap.zen.ZenTemplateService.soFactory.registerFactory(c,p);};sap.zen.LandscapeUtils.prototype.moApplication=null;sap.zen.LandscapeUtils.prototype.moLandscape=null;sap.zen.LandscapeUtils.prototype.mLanguage=null;sap.zen.LandscapeUtils.prototype.mInitialized=false;sap.zen.LandscapeUtils.prototype.doInit=function(l){if(this.mInitialized){return;}this.mInitialized=true;f.IpProviderModule.getInstance();sap.zen.BuddhaModule.getInstance();this.moApplication=f.ApplicationFactory.createDefaultApplicationWithVersion(f.XVersion.DEFAULT_VALUE);this.moLandscape=f.StandaloneSystemLandscape.create(this.getApplication());this.mLanguage=l;this.getApplication().setSystemLandscape(this.moLandscape);};sap.zen.LandscapeUtils.prototype.addSelf=function(h,p,b){var l=this.moLandscape.createSystem();l.setLanguage(this.mLanguage);l.setSystemType(f.SystemType.HANA);l.setName("self");l.setText("self");l.setHost(h);l.setPort(p);l.setAuthenticationType(f.AuthenticationType.BASIC);l.setProtocolType(f.XString.isEqual("https",b)?f.ProtocolType.HTTPS:f.ProtocolType.HTTP);this.moLandscape.setSystemByDescription(l);return l;};sap.zen.LandscapeUtils.prototype.addSelfBW=function(h,p,b,c,s,n){var l=this.moLandscape.createSystem();l.setLanguage(this.mLanguage);l.setSystemType(n?f.SystemType.BW:f.SystemType.ABAP);l.setName("self");l.setText("self");l.setHost(h);l.setPort(p);if(f.XStringUtils.isNotNullAndNotEmpty(c)){l.setClient(c);}l.setTimeout(60000);l.setAuthenticationType(f.AuthenticationType.BASIC);l.setProtocolType(f.XString.isEqual("https",b)?f.ProtocolType.HTTPS:f.ProtocolType.HTTP);l.setAlias(s);this.moLandscape.setSystemByDescription(l);return l;};sap.zen.LandscapeUtils.prototype.getApplication=function(){return this.moApplication;};sap.zen.LandscapeUtils.prototype.getSelf=function(){return this.moLandscape.getSystemDescription("self");};sap.zen.LandscapeUtils.prototype.getSystem=function(n){return this.moLandscape.getSystemDescription(n);};})(sap.firefly,sap.zen);});
