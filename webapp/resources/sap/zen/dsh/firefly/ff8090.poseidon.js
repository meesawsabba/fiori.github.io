/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff3100.system.ui","sap/zen/dsh/firefly/ff8050.application.ui"],function(f){"use strict";f.StoryCache=function(){};f.StoryCache.prototype=new f.XObject();f.StoryCache.prototype._ff_c="StoryCache";f.StoryCache.create=function(r,w,s){var a=new f.StoryCache();a.m_currentStory=null;a.m_repositoryManager=r;a.m_workingTaskManager=w;a.m_provider=s;a.m_storyCacheHandle=null;return a;};f.StoryCache.prototype.m_currentStory=null;f.StoryCache.prototype.m_repositoryManager=null;f.StoryCache.prototype.m_workingTaskManager=null;f.StoryCache.prototype.m_storyId=null;f.StoryCache.prototype.m_provider=null;f.StoryCache.prototype.m_storyMD=null;f.StoryCache.prototype.m_storyCacheHandle=null;f.StoryCache.prototype.loadCached=function(s){this.m_storyId=s;this.m_currentStory=null;if(f.XLanguage.getLanguage()===f.XLanguage.OBJECTIVE_C&&!this.m_provider.getIsProgressCancelled()){this.m_storyMD=f.StoryCacheUtil.loadStoryInfoFromDisk(this.m_repositoryManager,s,"storyMD");if(f.notNull(this.m_storyMD)){this.m_provider.setIsCacheLoading(true);var w=this.m_workingTaskManager;this.m_storyCacheHandle=w.createHandle(this);this.m_storyCacheHandle.processSynchronization(f.SyncType.NON_BLOCKING);}}};f.StoryCache.prototype.getRepositoryManager=function(){return this.m_repositoryManager;};f.StoryCache.prototype.setRepositoryManager=function(r){this.m_repositoryManager=r;};f.StoryCache.prototype.releaseObject=function(){f.XObjectExt.release(this.m_currentStory);f.XObjectExt.release(this.m_storyMD);};f.StoryCache.prototype.processInputOnWorkerThread=function(h){var m=h;var c=m.getTask();var s=c.m_storyId;if(f.notNull(this.m_storyMD)&&!this.m_provider.getIsProgressCancelled()){var M=this.m_storyMD.asStructure();var l=M.getIntegerByKey("layoutType");if(l===this.m_provider.getMainLayout().getCode()){var a=M.getStringByKey("text");var p=f.OcCacheableQuasarStory.create(s,a);var b=M.getListByKey("pages");var d=f.XList.create();for(var i=0;i<b.size();i++){var e=b.getStructureAt(i).asStructure();var g=e.getKeysAsReadOnlyListOfString().get(0);var j=f.StoryCacheUtil.loadStoryInfoFromDisk(this.m_repositoryManager,s,g).asStructure();var k=f.OcQuasarStoryPage.create(g,g,j);d.add(k);}p.setPages(d);p.setMediaUrl(M.getStringByKey("mediaUrl"));p.setModifiedBy(M.getStringByKey("modifiedBy"));p.setModifiedTime(M.getStringByKey("mdTime"));p.setCreatedBy(M.getStringByKey("creatorName"));p.setCreateTime(M.getStringByKey("crTime"));p.setUpdateCounter(M.getIntegerByKeyExt("updateCounter",0));p.setDescription(M.getStringByKey("desc"));this.m_currentStory=p;}else{f.XObjectExt.release(this.m_storyMD);f.XObjectExt.release(this.m_storyCacheHandle);}}};f.StoryCache.prototype.isFinishedOnWorkerThread=function(h){return true;};f.StoryCache.prototype.processOutputOnMainThread=function(h){var o=h.getTask();var s=this.m_currentStory;if(f.notNull(s)&&f.XString.isEqual(s.getName(),this.m_storyId)&&!this.m_provider.getIsProgressCancelled()){o.m_provider.publishStoryDefinition(s,true);this.m_storyMD=null;this.m_storyId=null;}else{f.XObjectExt.release(this.m_currentStory);}};f.StoryCache.prototype.cancelProgress=function(){if(f.notNull(this.m_storyCacheHandle)){this.m_storyCacheHandle.requestCancelling();}};f.StoryCacheUtil={loadStoryInfoFromDisk:function(r,s,i){var c=f.StoryCacheUtil.getStoryCache(r,s);return c.getByKey(i);},loadStoryListFromDisk:function(r,d){var c=f.StoryCacheUtil.getStoryCache(r,f.XStringUtils.concatenate2(d,"/"));return c.getByKey("StoryList");},saveStoryListToDisk:function(r,d,s){var c=f.StoryCacheUtil.getStoryCache(r,f.XStringUtils.concatenate2(d,"/"));c.put("StoryList",s,null);},loadSessionFromDisk:function(r,u){var c=f.StoryCacheUtil.getStoryCache(r,u);return c.getByKey(u);},saveSessionToDisk:function(r,u,s){var c=f.StoryCacheUtil.getStoryCache(r,u);c.put(u,s,null);},saveStoryPageToStore:function(r,s,p,a){var c=f.StoryCacheUtil.getStoryCache(r,s);c.put(p,a,null);},saveStoryToStore:function(r,s,l){if(f.notNull(r)&&f.XLanguage.getLanguage()===f.XLanguage.OBJECTIVE_C){var a=f.PrFactory.createStructure();a.putString("text",s.getText());a.putString("desc",s.getDescription());a.putString("id",s.getName());a.putInteger("layoutType",l.getCode());a.putString("creator",s.getCreatedBy());a.putString("crTime",s.getCreateTime());a.putString("mediaUrl",s.getMediaUrl());a.putString("mdTime",s.getModifiedTime());a.putString("modifiedBy",s.getModifiedBy());a.putInteger("updateCounter",s.getUpdateCounter());var p=a.putNewList("pages");var b=s.getPages();var c=s.getName();for(var d=0;d<b.size();d++){var e=b.get(d);var g=p.addNewStructure();g.putString(e.getName(),e.getName());f.StoryCacheUtil.saveStoryPageToStore(r,c,e.getName(),e.getPageContent());}var h=f.StoryCacheUtil.getStoryCache(r,c);h.put("storyMD",a,null);}},getStoryCache:function(r,s){var p=r.getApplication().getProcess();var c=p.getCacheManager();var a=c.getSubCache(f.Atlas.ATLAS_KEY);var b=a.getSubCache("story");var d=b.getSubCache(s);return d;},main:function(){f.IoNativeModule.getInstance();}};f.StoryProvider=function(){};f.StoryProvider.prototype=new f.XObject();f.StoryProvider.prototype._ff_c="StoryProvider";f.StoryProvider.create=function(s,a,w,r){var b=new f.StoryProvider();b.setWorkingTaskManager(w);b.m_mainLayout=f.OcLayoutType.FLOW;b.m_storyHttp=f.StoryRest.create(r,w,s,b);b.m_storyCache=f.StoryCache.create(r,w,b);b.m_storyLoadListener=a;return b;};f.StoryProvider.prototype.m_workingTaskManager=null;f.StoryProvider.prototype.m_storyHttp=null;f.StoryProvider.prototype.m_storyCache=null;f.StoryProvider.prototype.m_currentStory=null;f.StoryProvider.prototype.m_cacheProceeded=false;f.StoryProvider.prototype.m_triggerPublish=false;f.StoryProvider.prototype.m_cacheLoad=false;f.StoryProvider.prototype.m_isProgressCancelled=false;f.StoryProvider.prototype.m_mainLayout=null;f.StoryProvider.prototype.m_storyLoadListener=null;f.StoryProvider.prototype.getWorkingTaskManager=function(){return this.m_workingTaskManager;};f.StoryProvider.prototype.setWorkingTaskManager=function(w){this.m_workingTaskManager=w;};f.StoryProvider.prototype.getStoryDefinition=function(s){this.m_isProgressCancelled=false;this.m_storyCache.loadCached(s);this.m_storyHttp.fetchSelectedStory(s);};f.StoryProvider.prototype.publishStoryDefinition=function(p,i){this.m_cacheLoad=i;this.m_triggerPublish=false;if(f.notNull(p)){if(i){this.m_currentStory=p;this.m_triggerPublish=true;}else{if(f.notNull(this.m_currentStory)){var m=f.StoryUtils.isStoryModified(p,this.m_currentStory);if(m){this.m_currentStory=p;this.m_triggerPublish=true;}}else{this.m_currentStory=p;this.m_triggerPublish=true;}}}if(f.XLanguage.getLanguage()===f.XLanguage.JAVASCRIPT){if(!this.m_isProgressCancelled){this.m_storyLoadListener.publishStory(this.m_currentStory,this.m_cacheLoad);}else{f.XObjectExt.release(this.m_currentStory);}}else{var s=this.m_workingTaskManager.createHandle(this);s.processSynchronization(f.SyncType.NON_BLOCKING);}};f.StoryProvider.prototype.getIsCacheProceed=function(){return this.m_cacheProceeded;};f.StoryProvider.prototype.getStorySession=function(){return this.m_storyHttp;};f.StoryProvider.prototype.setStorySession=function(s){this.m_storyHttp=s;};f.StoryProvider.prototype.setIsCacheLoading=function(i){this.m_cacheProceeded=i;};f.StoryProvider.prototype.processInputOnWorkerThread=function(h){};f.StoryProvider.prototype.isFinishedOnWorkerThread=function(h){return true;};f.StoryProvider.prototype.processOutputOnMainThread=function(h){if(this.m_triggerPublish&&!this.m_isProgressCancelled){this.m_storyLoadListener.publishStory(this.m_currentStory,this.m_cacheLoad);}};f.StoryProvider.prototype.cancelProgress=function(){this.m_storyHttp.cancelProgress();this.m_isProgressCancelled=true;this.m_currentStory=f.XObjectExt.release(this.m_currentStory);if(f.notNull(this.m_storyCache)){this.m_storyCache.cancelProgress();}};f.StoryProvider.prototype.getIsProgressCancelled=function(){return this.m_isProgressCancelled;};f.StoryProvider.prototype.setMainLayout=function(l){this.m_mainLayout=l;};f.StoryProvider.prototype.getMainLayout=function(){return this.m_mainLayout;};f.StoryProvider.prototype.releaseObject=function(){this.m_currentStory=f.XObjectExt.release(this.m_currentStory);this.m_storyCache=f.XObjectExt.release(this.m_storyCache);this.m_storyHttp=f.XObjectExt.release(this.m_storyHttp);};f.StoryUtils={normalizeString:function(n){var a=n;if(f.notNull(a)){a=f.XString.replace(a,"  ","_");a=f.XString.replace(a,",","_");a=f.XString.replace(a," ","_");a=f.XString.replace(a,"-","_");a=f.XString.replace(a,".","");a=f.XString.replace(a,"\\","_");a=f.XString.replace(a,"/","_");a=f.XString.replace(a,"(","_");a=f.XString.replace(a,")","_");a=f.XString.replace(a,"+","_");a=f.XString.replace(a,":","_");a=f.XString.replace(a,"<","_");a=f.XString.replace(a,">","_");a=f.XString.toLowerCase(a);}return a;},isStoryModified:function(c,o){var i=f.XString.isEqual(c.getModifiedTime(),o.getModifiedTime());if(i){var p=c.getPages();var a=o.getPages();if(p.size()===a.size()){for(var b=0;b<p.size();b++){var d=p.get(b);var e=d.getPageContent().toString();var g=a.get(b);var h=g.getPageContent().toString();if(f.XString.size(e)===f.XString.size(h)){return false;}}}}return true;},processTime:function(t){var p=f.XString.replace(t,"T"," ");return f.XStringUtils.stripRight(p,8);},extractDomain:function(u){var c=f.XString.replace(u,".","");c=f.XString.replace(c,"-","");return f.XString.replace(c,"/","");}};f.StoryRest=function(){};f.StoryRest.prototype=new f.XObject();f.StoryRest.prototype._ff_c="StoryRest";f.StoryRest.create=function(r,w,s,a){var b=new f.StoryRest();b.m_currentStory=null;b.m_workingTaskManager=w;b.m_storyRestHandle=null;b.m_repoManager=r;b.m_storyService=s;b.m_sp=a;return b;};f.StoryRest.prototype.m_currentStory=null;f.StoryRest.prototype.m_storyJson=null;f.StoryRest.prototype.m_workingTaskManager=null;f.StoryRest.prototype.m_repoManager=null;f.StoryRest.prototype.m_storyRestHandle=null;f.StoryRest.prototype.m_sp=null;f.StoryRest.prototype.m_storyId=null;f.StoryRest.prototype.m_storyService=null;f.StoryRest.prototype.m_isStoryPublished=false;f.StoryRest.prototype.getStory=function(){return this.m_currentStory;};f.StoryRest.prototype.releaseObject=function(){f.XObjectExt.release(this.m_currentStory);f.XObjectExt.release(this.m_storyJson);this.m_storyId=null;};f.StoryRest.prototype.fetchSelectedStory=function(s){this.m_currentStory=null;this.m_isStoryPublished=false;this.m_storyId=s;if(!this.m_sp.getIsCacheProceed()){this.m_storyService.processStoryLoad(this.m_storyService.getSession().getDefaultSyncType(),this,null,s);}else{var a=this.m_workingTaskManager.createHandle(this);a.processSynchronization(f.SyncType.NON_BLOCKING);}};f.StoryRest.prototype.processInputOnWorkerThread=function(h){if(!this.m_sp.getIsProgressCancelled()){if(f.isNull(this.m_storyJson)&&f.isNull(this.m_currentStory)){this.m_storyService.processStoryLoad(f.SyncType.NON_BLOCKING,this,null,this.m_storyId);}else if(f.notNull(this.m_storyJson)){this.m_currentStory=this.createQuasarStory();this.m_storyJson=null;}if(f.notNull(this.m_currentStory)){f.StoryCacheUtil.saveStoryToStore(this.m_repoManager,this.m_currentStory,this.m_sp.getMainLayout());}}};f.StoryRest.prototype.createQuasarStory=function(){var c=this.m_storyService.getServiceConfig().getConnectionContainer();var a=f.OcOrcaContext.create(this.m_storyJson.asStructure(),null,f.OcConnection.createByConnection(c));var s=f.OcOrcaStory.create(a);var q=f.OcQuasarStory.create(s);q.setQuasarMainLayoutType(this.m_sp.getMainLayout());return q.getCacheableQuasarStory();};f.StoryRest.prototype.isFinishedOnWorkerThread=function(h){return true;};f.StoryRest.prototype.processOutputOnMainThread=function(h){var o=h.getTask();if(f.notNull(this.m_currentStory)&&!this.m_isStoryPublished&&f.XString.isEqual(this.m_storyId,this.m_currentStory.getName())){o.m_sp.publishStoryDefinition(this.m_currentStory,false);this.m_isStoryPublished=true;}};f.StoryRest.prototype.onStoryLoaded=function(e,s,c){if(f.notNull(s)&&!this.m_sp.getIsProgressCancelled()){var q=f.OcQuasarStory.create(s);q.setQuasarMainLayoutType(this.m_sp.getMainLayout());var a=q.getCacheableQuasarStory();this.m_sp.publishStoryDefinition(a,false);this.m_isStoryPublished=true;this.m_currentStory=a;this.m_storyRestHandle=this.m_workingTaskManager.createHandle(this);this.m_storyRestHandle.processSynchronization(f.SyncType.NON_BLOCKING);}};f.StoryRest.prototype.cancelProgress=function(){if(f.notNull(this.m_storyRestHandle)){this.m_storyRestHandle.requestCancelling();}};f.Atlas=function(){};f.Atlas.prototype=new f.XObjectExt();f.Atlas.prototype._ff_c="Atlas";f.Atlas.ATLAS_KEY="atlas";f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG="debug";f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR="error";f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING="warning";f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO="info";f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT="print";f.Atlas.SETTINGS_ORCA_URL_KEY="orcaStoryConnector_orcaUrl";f.Atlas.SETTINGS_MAIN_LAYOUT_KEY="orcaStoryConnector_mainLayout";f.Atlas.SETTINGS_LOG_LEVEL_KEY="orcaStoryConnector_logLevel";f.Atlas.SELECTED_PAGE_KEY="selectedPage";f.Atlas.create=function(n,a,w){var b=new f.Atlas();b.setupExt(n,a,w);return b;};f.Atlas.prototype.m_orcaService=null;f.Atlas.prototype.m_application=null;f.Atlas.prototype.m_uiManager=null;f.Atlas.prototype.m_tridentClient=null;f.Atlas.prototype.m_navigationContainer=null;f.Atlas.prototype.m_startPage=null;f.Atlas.prototype.m_nativeParentId=null;f.Atlas.prototype.m_nativeParentObject=null;f.Atlas.prototype.m_orcaUrl=null;f.Atlas.prototype.m_currentCatalogOptions=null;f.Atlas.prototype.m_PosClientList=null;f.Atlas.prototype.m_curPosClient=null;f.Atlas.prototype.m_curNavigationPage=null;f.Atlas.prototype.m_hostDict=null;f.Atlas.prototype.m_hostNameDict=null;f.Atlas.prototype.m_hostIdList=null;f.Atlas.prototype.m_logLevel=null;f.Atlas.prototype.m_layout=null;f.Atlas.prototype.m_currentStoryListItems=null;f.Atlas.prototype.setupExt=function(n,a,w){this.m_nativeParentId=n;this.m_nativeParentObject=a;var s=f.DefaultSession.createWithVersion(f.XVersion.MAX);s.getEnvironment().setVariable(f.XEnvironmentConstants.FIREFLY_CREDENTIALS_PROVIDER,f.CredentialsFactory.UI_CREDENTIALS_PROVIDER);s.getLogWriterBase().setLogFilterSeverity(f.Severity.ERROR);s.getProxySettings().setWebdispatcherTemplate(w);this.m_application=f.ApplicationFactory.createApplication(s);this.m_application.setDefaultSyncType(f.SyncType.NON_BLOCKING);this.m_uiManager=this.m_application.getUiManager();this.m_tridentClient=f.TridentClient.create(this.m_application.newSubApplication(null),null);this.m_tridentClient.setNativeAnchorId(this.m_nativeParentId);this.m_tridentClient.setNativeAnchorObject(this.m_nativeParentObject);this.m_tridentClient.runProgram();this.setupApp();this.renderUi();};f.Atlas.prototype.setupApp=function(){this.prepareHostList();this.m_currentCatalogOptions=new f.OcStoryCatalogLoadOptions();this.setOrcaUrl(this.m_application.getUserManager().getUserSettings().getStringByKeyExt(f.Atlas.SETTINGS_ORCA_URL_KEY,""));var m=f.OcLayoutType.CANVAS;if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.IPHONE)){m=f.OcLayoutType.FLOW;}this.setMainLayout(f.OcLayoutType.getByName(this.m_application.getUserManager().getUserSettings().getStringByKeyExt(f.Atlas.SETTINGS_MAIN_LAYOUT_KEY,m.getName())));this.setLogLevel(this.m_application.getUserManager().getUserSettings().getStringByKeyExt(f.Atlas.SETTINGS_LOG_LEVEL_KEY,f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR));};f.Atlas.prototype.releaseObject=function(){this.clearPoseidonClients();if(f.notNull(this.m_hostIdList)){this.m_hostIdList.clear();f.XObjectExt.release(this.m_hostIdList);this.m_hostIdList=null;}if(f.notNull(this.m_hostDict)){this.m_hostDict.clear();f.XObjectExt.release(this.m_hostDict);this.m_hostDict=null;}if(f.notNull(this.m_hostNameDict)){this.m_hostNameDict.clear();f.XObjectExt.release(this.m_hostNameDict);this.m_hostNameDict=null;}this.m_nativeParentObject=null;this.m_navigationContainer=f.XObjectExt.release(this.m_navigationContainer);this.m_startPage=f.XObjectExt.release(this.m_startPage);this.m_curNavigationPage=f.XObjectExt.release(this.m_curNavigationPage);this.m_currentStoryListItems=f.XObjectExt.release(this.m_currentStoryListItems);this.m_orcaService=f.XObjectExt.release(this.m_orcaService);this.m_tridentClient=f.XObjectExt.release(this.m_tridentClient);this.m_currentCatalogOptions=f.XObjectExt.release(this.m_currentCatalogOptions);this.m_uiManager=null;this.m_application=f.XObjectExt.release(this.m_application);f.XObjectExt.prototype.releaseObject.call(this);};f.Atlas.prototype.reset=function(){this.logout();f.XObjectExt.release(this.m_orcaService);this.clearPoseidonClients();this.m_navigationContainer=f.XObjectExt.release(this.m_navigationContainer);this.m_startPage=f.XObjectExt.release(this.m_startPage);this.m_curNavigationPage=f.XObjectExt.release(this.m_curNavigationPage);this.m_currentStoryListItems=f.XObjectExt.release(this.m_currentStoryListItems);this.backToLoginScreen();};f.Atlas.prototype.refreshVisiblePageData=function(){if(f.notNull(this.m_curPosClient)){this.m_curPosClient.refreshBindings();}};f.Atlas.prototype.loadStoryList=function(){var c=f.OcOrcaServiceConfig.create(this.m_application,f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME);c.processOrcaServiceCreation(f.SyncType.NON_BLOCKING,this,null);};f.Atlas.prototype.setOrcaUrl=function(o){this.m_orcaUrl=o;var s=f.XUri.createFromUrl(o);var a=this.m_application.getSystemLandscape();a.setSystemByUri(f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,s,null);};f.Atlas.prototype.setMainLayout=function(l){this.m_layout=l;};f.Atlas.prototype.setLogLevel=function(l){this.m_logLevel=l;var t=this.m_application.getSession();var n=f.Severity.ERROR;if(f.XString.isEqual(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG,l)){n=f.Severity.DEBUG;}else if(f.XString.isEqual(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR,l)){n=f.Severity.ERROR;}else if(f.XString.isEqual(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING,l)){n=f.Severity.WARNING;}else if(f.XString.isEqual(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO,l)){n=f.Severity.INFO;}else if(f.XString.isEqual(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT,l)){n=f.Severity.PRINT;}t.getLogWriterBase().setLogFilterSeverity(n);};f.Atlas.prototype.backToLoginScreen=function(){this.renderUi();};f.Atlas.prototype.logout=function(){this.m_application.getConnectionPool().clearConnections();};f.Atlas.prototype.clearPoseidonClients=function(){if(f.notNull(this.m_PosClientList)){for(var j=0;j<this.m_PosClientList.size();j++){var t=this.m_PosClientList.get(j);f.XObjectExt.release(t);}this.m_PosClientList.clear();}this.m_PosClientList=f.XObjectExt.release(this.m_PosClientList);this.m_curPosClient=null;};f.Atlas.prototype.prepareHostList=function(){this.m_hostIdList=f.XListOfString.create();this.m_hostDict=f.PrFactory.createStructure();this.m_hostNameDict=f.PrFactory.createStructure();this.m_hostIdList.add("apollo");this.m_hostDict.putString("apollo",f.XStringUtils.concatenate5("http:","//::","basic@apollo.oe","mapi.only.sa","p:8000?system_type=orca"));this.m_hostNameDict.putString("apollo","Apollo");this.m_hostIdList.add("monsunproxy");this.m_hostDict.putString("monsunproxy",f.XStringUtils.concatenate5("http:","//::basic@mo-9eeb3","641b.mo.s","ap.corp?sys","tem_type=orca"));this.m_hostNameDict.putString("monsunproxy","Monsun - proxy");this.m_hostIdList.add("monsun");this.m_hostDict.putString("monsun",f.XStringUtils.concatenate5("http:","//::","basic@bw.ac","ioem.c.eu-de-1.cloud.s","ap:8001?system_type=orca"));this.m_hostNameDict.putString("monsun","Monsun");this.m_hostIdList.add("canary");this.m_hostDict.putString("canary",f.XStringUtils.concatenate5("http:","//::","saml@master-liveconn-successf","actor.cnry.projecto","rca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("canary","Canary - SF");this.m_hostIdList.add("orcareporting");this.m_hostDict.putString("orcareporting",f.XStringUtils.concatenate5("http:","//::","saml@or","careporting.us2.sapbusinesso","bjects.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("orcareporting","Orca reporting");this.m_hostIdList.add("demoeu");this.m_hostDict.putString("demoeu",f.XStringUtils.concatenate5("http:","//::","saml@demo-stan","dard.eu1.sa","pbusinessobjects.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("demoeu","Demo EU");this.m_hostIdList.add("vand00592075a");this.m_hostDict.putString("vand00592075a",f.XStringUtils.concatenate5("http:","//::","basic@vand00592075a.amer.global.co","rp.s","ap?system_type=orca"));this.m_hostNameDict.putString("vand00592075a","Performance system (vand)");this.m_hostIdList.add("redbull");this.m_hostDict.putString("redbull",f.XStringUtils.concatenate5("http://::","basic@ld3780.w","df.sa","p.cor","p:8020?system_type=orca"));this.m_hostNameDict.putString("redbull","Red Bull test system");this.m_hostIdList.add("vandevvmwin");this.m_hostDict.putString("vandevvmwin",f.XStringUtils.concatenate5("http:","//::","saml@vandevvmwin038.dhc","p.pgdev.sa","p.corp:9074?system_type=orca_cloud"));this.m_hostNameDict.putString("vandevvmwin","A77F0 - Vandev performance");this.m_hostIdList.add("vanpgc34b9");this.m_hostDict.putString("vanpgc34b9",f.XStringUtils.concatenate5("http:","//::","basic@vanpgc34b9.d","hcp.pgdev.sa","p.corp?system_type=orca"));this.m_hostNameDict.putString("vanpgc34b9","Hana PnR system");this.m_hostIdList.add("vandevhanamdc01t13");this.m_hostDict.putString("vandevhanamdc01t13",f.XStringUtils.concatenate5("http:","//::","basic@vandevhanamdc01t13.van.sa","p.co","rp:8000?system_type=orca"));this.m_hostNameDict.putString("vandevhanamdc01t13","HANA MDC Benny");this.m_hostIdList.add("relmastercanarysf");this.m_hostDict.putString("relmastercanarysf",f.XStringUtils.concatenate5("http:","//::","saml@rel-success","factors-1.eu2cnry.projec","torca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("relmastercanarysf","SF rel master canary");this.m_hostIdList.add("s4mastercanary");this.m_hostDict.putString("s4mastercanary",f.XStringUtils.concatenate5("http:","//::","sa","ml@master-s4.eu2cnry.proje","ctorca.cloud?system_type=orca_cloud"));this.m_hostNameDict.putString("s4mastercanary","S4 master canary");};f.Atlas.prototype.renderUi=function(){var a=this.m_tridentClient.createUiElement(f.UiType.ICON_TAB_BAR);a.useMaxSpace();a.setName("appTabBar");var t=a.addNewItem();t.setName("home");t.setText("Home");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){t.setIcon("home");}else{t.setIcon("fa-home");}this.createHomeTab(t);var b=a.addNewItem();b.setName("settings");b.setText("Settings");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){b.setIcon("settings");}else{b.setIcon("fa-cog");}this.createSettingsTab(b);this.m_tridentClient.setRootUiElement(a);};f.Atlas.prototype.createHomeTab=function(t){var h=t.setNewContent(f.UiType.FLEX_LAYOUT);h.useMaxSpace();h.setDirection(f.UiFlexDirection.COLUMN);h.setAlignItems(f.UiFlexAlignItems.CENTER);h.addNewItemOfType(f.UiType.SPACER).setWidth(f.UiCssLength.create("100%"));h.addNewItemOfType(f.UiType.SPACER).setHeight(f.UiCssLength.create("10px"));h.addNewItemOfType(f.UiType.LABEL).setText("Select server");var a=h.addNewItemOfType(f.UiType.DROPDOWN);a.setName("hostDropdown");a.setWidth(f.UiCssLength.createExt(350,f.UiCssSizeUnit.PIXEL));a.setHeight(f.UiCssLength.createExt(200,f.UiCssSizeUnit.PIXEL));a.registerOnSelect(this);a.addNewItem().setText("Custom").setName("custom");var d=false;for(var b=0;b<this.m_hostIdList.size();b++){var c=this.m_hostIdList.get(b);var e=this.m_hostNameDict.getStringByKey(c);var g=this.m_hostDict.getStringByKey(c);a.addNewItem().setText(e).setName(c);if(f.XString.containsString(this.m_orcaUrl,g)&&d===false){a.setSelectedName(c);d=true;}}if(d===false){a.setSelectedName("custom");}h.addNewItemOfType(f.UiType.LABEL).setText("Orca URL");var u=h.addNewItemOfType(f.UiType.INPUT);u.setName("urlInput");u.setPlaceholder("URL");u.setText(this.m_orcaUrl);u.setWidth(f.UiCssLength.createExt(350,f.UiCssSizeUnit.PIXEL));u.registerOnLiveChange(this);u.registerOnEnter(this);var l=h.addNewItemOfType(f.UiType.BUTTON);l.setName("loginBtn");l.setText("Login");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){l.setIcon("visits");}else{l.setIcon("fa-sign-in-alt");}l.registerOnPress(this);};f.Atlas.prototype.createSettingsTab=function(t){var s=t.setNewContent(f.UiType.FLEX_LAYOUT);s.useMaxSpace();s.setDirection(f.UiFlexDirection.COLUMN);s.setAlignItems(f.UiFlexAlignItems.CENTER);s.addNewItemOfType(f.UiType.SPACER).setWidth(f.UiCssLength.create("100%"));s.addNewItemOfType(f.UiType.SPACER).setHeight(f.UiCssLength.create("10px"));var c=s.addNewItemOfType(f.UiType.BUTTON);c.setName("clearCacheBtn");c.setText("Clear Cache");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){c.setIcon("delete");}else{c.setIcon("fa-trash-alt");}c.setButtonType(f.UiButtonType.DESTRUCTIVE);c.registerOnPress(this);var a=s.addNewItemOfType(f.UiType.SPACER);a.setName("spacerCaccheBtn");a.setHeight(f.UiCssLength.createExt(20,f.UiCssSizeUnit.PIXEL));s.addNewItemOfType(f.UiType.LABEL).setText("Select layout");var l=s.addNewItemOfType(f.UiType.DROPDOWN);l.setName("layoutDropdown");l.setWidth(f.UiCssLength.createExt(350,f.UiCssSizeUnit.PIXEL));l.setHeight(f.UiCssLength.createExt(125,f.UiCssSizeUnit.PIXEL));l.registerOnSelect(this);l.addNewItem().setText("Canvas").setName(f.OcLayoutType.CANVAS.getName());l.addNewItem().setText("Flow").setName(f.OcLayoutType.FLOW.getName());l.addNewItem().setText("Flow simple (only charts and data grids)").setName(f.OcLayoutType.FLOW_SIMPLE.getName());l.setSelectedName(this.m_layout.getName());var b=s.addNewItemOfType(f.UiType.SPACER);b.setName("spacerLayoutDrp");b.setHeight(f.UiCssLength.createExt(20,f.UiCssSizeUnit.PIXEL));s.addNewItemOfType(f.UiType.LABEL).setText("Log level");var d=s.addNewItemOfType(f.UiType.DROPDOWN);d.setName("logLevelDropdown");d.setWidth(f.UiCssLength.createExt(350,f.UiCssSizeUnit.PIXEL));d.setHeight(f.UiCssLength.createExt(125,f.UiCssSizeUnit.PIXEL));d.registerOnSelect(this);d.addNewItem().setText("Debug").setName(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_DEBUG);d.addNewItem().setText("Error").setName(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_ERROR);d.addNewItem().setText("Warning").setName(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_WARNING);d.addNewItem().setText("Info").setName(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_INFO);d.addNewItem().setText("Print").setName(f.Atlas.ORCA_STORY_CONNECTOR_LOG_LEVEL_PRINT);d.setSelectedName(this.m_logLevel);};f.Atlas.prototype.loadStoryCatalog=function(s){if(f.isNull(this.m_startPage)){this.m_navigationContainer=this.m_tridentClient.createUiElement(f.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();this.m_navigationContainer.registerOnBack(this);this.m_startPage=this.m_navigationContainer.pushNewPage();this.m_startPage.setName("orcaStoryListContainer");this.m_startPage.setText("All stories");var a=this.m_tridentClient.createUiElement(f.UiType.SEARCH_FIELD);a.setName("storyListSearchField");a.setPlaceholder("Search story...");a.registerOnSearch(this);a.registerOnLiveChange(this);a.setDebounceTime(1000);this.m_startPage.setSubHeader(a);var r=this.m_startPage.addNewPageButton();r.setName("startPageRefreshList");r.setText("Refresh");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){r.setIcon("refresh");}else{r.setIcon("fa-sync-alt");}r.registerOnPress(this);var b=this.m_startPage.addNewPageButton();b.setName("startPageGetFavorites");b.setText("Favorites");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){b.setIcon("favorite");}else{b.setIcon("fa-star");}b.registerOnPress(this);this.m_tridentClient.setRootUiElement(this.m_navigationContainer);}else{var p=this.m_startPage.getPageButtons().getIterator();while(p.hasNext()){var c=p.next();c.setEnabled(true);}}if(f.isNull(this.m_currentStoryListItems)){this.m_currentStoryListItems=f.XList.create();}else{this.m_currentStoryListItems.clear();}var l=this.m_startPage.setNewContent(f.UiType.LIST);l.setName("orcaStoryList");l.setSelectionMode(f.UiSelectionMode.NONE);l.useMaxSpace();var i=s.getCatalogItems().getIterator();while(i.hasNext()){var t=i.next();var d=t.getDescription();var m=t.getModifiedByDisplayName();if(f.XStringUtils.isNullOrEmpty(m)){m=t.getModifiedBy();}var e=f.XStringUtils.concatenate2(f.XStringUtils.concatenate2("Modified: ",t.getModifiedTime()),f.XStringUtils.concatenate2(" by ",m));var g=f.XStringUtils.concatenate3(e,"\n",d);var h=l.addNewItem();h.setText(t.getName());h.setListItemType(f.UiListType.NAVIGATION);h.registerOnPress(this);h.setDescription(g);h.setCustomObject(t);if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){h.setIcon("business-objects-experience");}else{h.setIcon("fa-chart-pie");}this.m_currentStoryListItems.add(h);}};f.Atlas.prototype.loadStory=function(s){var a=this.m_navigationContainer.getCustomObject();a.getPageButtonByName("storyDetailsRefreshStory").setEnabled(true);a.clearContent();this.clearPoseidonClients();this.m_PosClientList=f.XList.create();var q=f.OcQuasarStory.create(s);q.setQuasarMainLayoutType(this.m_layout);var p=q.getQuasarPages();var m=q.getMessages();if(m.hasErrors()){var e=m.getFirstError();this.m_tridentClient.showTridentErrorToast(e.getText());this.log("--==An error occured:==--");this.log(e.getText());if(e.getErrorCause()!==null){this.log("--==Error cause:==--");this.log(e.getErrorCause().getText());}this.log("--==Summary (other errors and messages):==--");this.log(m.getSummary());}else if(m.getMessages().hasElements()){var b=m.getFirstWithSeverity(f.Severity.WARNING);if(f.notNull(b)){this.m_tridentClient.showTridentWarningToast(b.getText());}this.log("--==Warnings and info messages:==--");this.log(m.getSummary());}var c=p.size();if(c>0){var d=this.generateStoryIdForCache(q);var g=this.m_application.getProcess().getCacheManager();var h=g.getSubCache(f.Atlas.SELECTED_PAGE_KEY);var i=h.getStringByKey(d);var t=a.setNewContent(f.UiType.ICON_TAB_BAR).useMaxSpace();t.setName(q.getName());t.setCustomObject(q);t.registerOnSelect(this);var j=false;for(var k=0;k<c;k++){var n=p.get(k);var l=t.addNew(f.UiType.ICON_TAB_BAR_ITEM);l.setName(n.getId());l.setText(n.getName());if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){l.setIcon("document");}else{l.setIcon("fa-file-alt");}l.setNewContent(f.UiType.ACTIVITY_INDICATOR).setText("Loading page...").useMaxSpace();var o=n.getPageContent();if(f.isNull(o)){var r=a.setNewContent(f.UiType.TEXT).setText("This page has no widgets!");r.setBackgroundColor(f.UiColor.create("#cc0033"));r.setFontColor(f.UiColor.create("#ffffff"));r.setFontSize(f.UiCssLength.createExt(15,f.UiCssSizeUnit.PIXEL));}else{var u=f.PoseidonClient.createWithDocument(this.m_application.newSubApplication(null),o);this.m_PosClientList.add(u);l.setCustomObject(u);if(f.notNull(i)){if(f.XString.isEqual(i,n.getId())){u.runOnElement(l);t.setSelectedItem(l);this.m_PosClientList.add(u);this.m_curPosClient=u;j=true;}}}}if(j===false&&c>0){var v=t.get(0).getCustomObject();v.runOnElement(t.get(0));this.m_curPosClient=v;}}else{var w=a.setNewContent(f.UiType.TEXT).setText("This story has no content!");w.setBackgroundColor(f.UiColor.create("#cc0033"));w.setFontColor(f.UiColor.create("#ffffff"));w.setFontSize(f.UiCssLength.createExt(15,f.UiCssSizeUnit.PIXEL));}};f.Atlas.prototype.generateStoryIdForCache=function(s){var a=f.XStringUtils.concatenate3(s.getName(),"_",s.getId());return f.XString.replace(a," ","_");};f.Atlas.prototype.filterStoryListOnStartPage=function(s,c){var b=this.m_startPage.getContent();b.clearItems();if(c===false){for(var a=0;a<this.m_currentStoryListItems.size()-1;a++){var t=this.m_currentStoryListItems.get(a);if(f.XString.containsString(f.XString.toLowerCase(t.getText()),f.XString.toLowerCase(s))){b.addItem(t);}}}else{for(var i=0;i<this.m_currentStoryListItems.size()-1;i++){b.addItem(this.m_currentStoryListItems.get(i));}}};f.Atlas.prototype.onOrcaServiceCreated=function(e,o,c){if(e.isValid()){this.m_orcaService=o;o.processSystemLandscapeLoad(f.SyncType.NON_BLOCKING,this,null,null);}else{this.log("#1 failure logon");this.log(e.getSummary());}};f.Atlas.prototype.onSystemsLoaded=function(e,s,c){if(e.isValid()){var a=this.m_application.getSystemLandscape();for(var i=0;i<s.size();i++){var b=s.get(i);a.setSystemByDescription(b);}this.m_orcaService.processStoryCatalogLoad(f.SyncType.NON_BLOCKING,this,null,null);}else{this.log("#2 failure system loaded");this.log(e.getSummary());}};f.Atlas.prototype.onStoryCatalogLoaded=function(e,s,c){if(e.isValid()){this.loadStoryCatalog(e.getData());}else{this.log("#3 failure story catalog loaded");this.log(e.getSummary());}};f.Atlas.prototype.onStoryLoaded=function(e,s,c){if(e.isValid()){this.loadStory(s);}else{this.log("#4 failure story loaded");this.log(e.getSummary());}};f.Atlas.prototype.onLiveChange=function(e){if(e.getControl().getUiType()===f.UiType.INPUT){if(f.XString.isEqual(e.getControl().getName(),"urlInput")){this.setOrcaUrl(e.getControl().getText());e.getControl().getUiManager().select("hostDropdown").setSelectedName("custom");this.m_application.getUserManager().getUserSettings().putString(f.Atlas.SETTINGS_ORCA_URL_KEY,this.m_orcaUrl);}}else if(e.getControl().getUiType()===f.UiType.SEARCH_FIELD){if(f.XString.isEqual(e.getControl().getName(),"storyListSearchField")){this.filterStoryListOnStartPage(e.getControl().getText(),false);}}};f.Atlas.prototype.onPress=function(e){if(f.XString.isEqual(e.getControl().getName(),"loginBtn")||f.XString.containsString(e.getControl().getName(),"Input")){this.m_tridentClient.showActivity("Loading stories...");this.loadStoryList();}else if(f.XString.isEqual(e.getControl().getName(),"clearCacheBtn")){if(f.notNull(this.m_application)&&this.m_application.getRepositoryManager()!==null){this.m_application.getProcess().getCacheManager().getSubCache(f.Atlas.ATLAS_KEY).clear();}}else if(f.XString.isEqual(e.getControl().getName(),"errorBackBtn")){this.backToLoginScreen();}else if(e.getControl().getUiType()===f.UiType.LIST_ITEM){var s=e.getControl().getCustomObject();this.m_curNavigationPage=this.m_navigationContainer.pushNewPage();this.m_curNavigationPage.setName(s.getId());this.m_curNavigationPage.setText(s.getName());this.m_curNavigationPage.setNewContent(f.UiType.ACTIVITY_INDICATOR).setText("Loading story...").useMaxSpace();this.m_navigationContainer.setCustomObject(this.m_curNavigationPage);var r=this.m_curNavigationPage.addNewPageButton();r.setName("storyDetailsRefreshStory");r.setText("Refresh");if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){r.setIcon("refresh");}else{r.setIcon("fa-sync-alt");}r.registerOnPress(this);this.m_orcaService.processStoryLoad(f.SyncType.NON_BLOCKING,this,null,s.getId());}else if(e.getControl().getUiType()===f.UiType.PAGE_BUTTON){if(f.XString.isEqual(e.getControl().getName(),"startPageRefreshList")||f.XString.containsString(e.getControl().getName(),"startPageGetFavorites")){this.m_startPage.setNewContent(f.UiType.ACTIVITY_INDICATOR).setText("Loading stories...").useMaxSpace();var a=this.m_startPage.getSubHeader();a.setText("");var i=this.m_startPage.getPageButtons().getIterator();while(i.hasNext()){var b=i.next();b.setEnabled(false);}if(f.XString.isEqual(e.getControl().getName(),"startPageRefreshList")){this.m_orcaService.processStoryCatalogLoad(f.SyncType.NON_BLOCKING,this,null,this.m_currentCatalogOptions);}else if(f.XString.isEqual(e.getControl().getName(),"startPageGetFavorites")){if(f.XString.isEqual(e.getControl().getIcon(),"fa-star")||f.XString.isEqual(e.getControl().getIcon(),"favorite")){if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){e.getControl().setIcon("globe");}else{e.getControl().setIcon("fa-globe-asia");}e.getControl().setText("All Stories");this.m_startPage.setText("Favorites");this.m_currentCatalogOptions.setCatalogType(f.OcStoryCatalogType.FAVORITE);}else{if(this.m_uiManager.getPlatform().isTypeOf(f.XPlatform.UI5)){e.getControl().setIcon("favorite");}else{e.getControl().setIcon("fa-star");}e.getControl().setText("Favorites");this.m_startPage.setText("All stories");this.m_currentCatalogOptions.setCatalogType(f.OcStoryCatalogType.SEARCH_LIST);}this.m_orcaService.processStoryCatalogLoad(f.SyncType.NON_BLOCKING,this,null,this.m_currentCatalogOptions);}}else if(f.XString.isEqual(e.getControl().getName(),"startPageLogout")){this.reset();}else if(f.XString.isEqual(e.getControl().getName(),"storyDetailsRefreshStory")){this.clearPoseidonClients();this.m_curNavigationPage.getPageButtonByName("storyDetailsRefreshStory").setEnabled(false);this.m_curNavigationPage.setNewContent(f.UiType.ACTIVITY_INDICATOR).setText("Loading story...").useMaxSpace();var c=this.m_curNavigationPage.getName();this.m_orcaService.processStoryLoad(f.SyncType.NON_BLOCKING,this,null,c);}}};f.Atlas.prototype.onEnter=function(e){this.onPress(e);};f.Atlas.prototype.onSelect=function(e){if(e.getControl().getUiType()===f.UiType.ICON_TAB_BAR){var p=e.getSelectedItem().getCustomObject();if(p.isContentRendered()===false){p.runOnElement(e.getSelectedItem());}this.m_curPosClient=p;var t=e.getControl().getCustomObject();var s=this.generateStoryIdForCache(t);var a=e.getSelectedItem().getName();var c=this.m_application.getProcess().getCacheManager();var b=c.getSubCache(f.Atlas.SELECTED_PAGE_KEY);b.putString(s,a);}else if(e.getControl().getUiType()===f.UiType.DROPDOWN){if(f.XString.isEqual(e.getControl().getName(),"hostDropdown")){if(f.XString.isEqual(e.getControl().getSelectedName(),"custom")===false){this.setOrcaUrl(this.m_hostDict.getStringByKey(e.getControl().getSelectedName()));this.m_application.getUserManager().getUserSettings().putString(f.Atlas.SETTINGS_ORCA_URL_KEY,this.m_orcaUrl);}e.getControl().getUiManager().select("urlInput").setText(this.m_orcaUrl);}else if(f.XString.isEqual(e.getControl().getName(),"layoutDropdown")){this.setMainLayout(f.OcLayoutType.getByName(e.getControl().getSelectedName()));this.m_application.getUserManager().getUserSettings().putString(f.Atlas.SETTINGS_MAIN_LAYOUT_KEY,this.m_layout.getName());}else if(f.XString.isEqual(e.getControl().getName(),"logLevelDropdown")){if(e.getControl().getSelectedName()!==null){this.setLogLevel(e.getControl().getSelectedName());}this.m_application.getUserManager().getUserSettings().putString(f.Atlas.SETTINGS_LOG_LEVEL_KEY,this.m_logLevel);}}};f.Atlas.prototype.onBack=function(e){if(f.notNull(this.m_curNavigationPage)){f.XObjectExt.release(this.m_curNavigationPage);this.m_curNavigationPage=null;}this.clearPoseidonClients();};f.Atlas.prototype.onSearch=function(e){var d=e.getParameters().getBooleanByKeyExt(f.UiControlEvent.PARAM_CLEAR_BUTTON_PRESSED,false);var s=e.getParameters().getStringByKeyExt(f.UiControlEvent.PARAM_SEARCH_TEXT,"");this.filterStoryListOnStartPage(s,d);};f.PsAppInfo=function(){};f.PsAppInfo.prototype=new f.DfNameTextObject();f.PsAppInfo.prototype._ff_c="PsAppInfo";f.PsAppInfo.create=function(n){var a=new f.PsAppInfo();a._setupInternal(n);return a;};f.PsAppInfo.prototype.m_imageName=null;f.PsAppInfo.prototype.m_appFile=null;f.PsAppInfo.prototype.m_imageFile=null;f.PsAppInfo.prototype.getImageName=function(){return this.m_imageName;};f.PsAppInfo.prototype.setImageName=function(i){this.m_imageName=i;};f.PsAppInfo.prototype.getAppFile=function(){return this.m_appFile;};f.PsAppInfo.prototype.setAppFile=function(a){this.m_appFile=a;};f.PsAppInfo.prototype.getImageFile=function(){return this.m_imageFile;};f.PsAppInfo.prototype.setImageFile=function(a){this.m_imageFile=a;};f.PsAppInfo.prototype.releaseObject=function(){this.m_appFile=null;this.m_imageFile=null;f.DfNameTextObject.prototype.releaseObject.call(this);};f.Asteria=function(){};f.Asteria.prototype=new f.DfUiProgram();f.Asteria.prototype._ff_c="Asteria";f.Asteria.DEFAULT_PROGRAM_NAME="Asteria";f.Asteria.createRunner=function(){var r=f.KernelBoot.createByName(f.Asteria.DEFAULT_PROGRAM_NAME);return r;};f.Asteria.createStudioProgram=function(a){var c=f.Asteria.create(a,null);return c;};f.Asteria.createPoseidonApp=function(n,a){f.ApplicationUiModule.getInstance();var c=f.Asteria.create(null,null);c.setNativeAnchorId(n);c.setNativeAnchorObject(a);return c;};f.Asteria.create=function(a,s){var c=new f.Asteria();c.setup();c.setInitialSystemType(s);c.setApplication(a);c.initializeProgram();return c;};f.Asteria.prototype.m_uiTestsDir=null;f.Asteria.prototype.m_navigationContainer=null;f.Asteria.prototype.newProgram=function(){var p=new f.Asteria();p.setup();return p;};f.Asteria.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);};f.Asteria.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);};f.Asteria.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);};f.Asteria.prototype.releaseObject=function(){this.m_navigationContainer=f.XObjectExt.release(this.m_navigationContainer);this.m_uiTestsDir=f.XObjectExt.release(this.m_uiTestsDir);f.DfUiProgram.prototype.releaseObject.call(this);};f.Asteria.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.setTitle("Asteria - Quasar UI Testsuite");var a=g.newControl(f.UiType.ACTIVITY_INDICATOR).setText("Loading...");g.setRoot(a);if(f.isNull(this.m_uiTestsDir)||this.m_uiTestsDir.isDirectory()===false){this.setTestAppFilesDirByPath("/production/queries/simplex/quasarUiTestApps/");}this.m_uiTestsDir.processFetchChildren(f.SyncType.NON_BLOCKING,this,null);};f.Asteria.prototype.setTestAppFilesDirByPath=function(d){if(f.notNull(d)){var g=f.XFile.createFromEnvVar(this.getSession(),f.XEnvironmentConstants.FIREFLY_SDK,d);this.setDir(g);}};f.Asteria.prototype.setDir=function(d){this.m_uiTestsDir=d;};f.Asteria.prototype.onChildrenFetched=function(e,a,c){var b=a.getChildren();if(e.isValid()){this.m_navigationContainer=this.m_genesis.newControl(f.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();var s=this.m_navigationContainer.pushNewPage();s.setText("Quasar Ui Tests");var v=s.setNewContent(f.UiType.FLOW_LAYOUT);for(var i=0;i<b.size();i++){var d=b.get(i);var g=d;var n=g.getName();var h=f.XString.lastIndexOf(n,".");if(h!==-1&&f.XString.isEqual(".index.json",n)===false){var j=f.XString.substring(n,0,h);var p=f.XString.substring(n,h+1,-1);if(f.XString.isEqual("qsa",p)){var k=v.addNewItemOfType(f.UiType.BUTTON);k.setText(j);k.setCustomObject(g);k.registerOnPress(this);v.addNewItemOfType(f.UiType.SPACER);}}}this.m_genesis.setRoot(this.m_navigationContainer);}else{f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"Failed to fetch test applications!");}};f.Asteria.prototype.onPress=function(e){var a=e.getControl().getCustomObject();if(f.notNull(a)){var n=this.m_navigationContainer.pushNewPage();n.setText(e.getControl().getText());var p=f.PoseidonClient.createWithFile(this.getApplication().newSubApplication(null),a,null);var s=f.UiGenesis.create(n,f.UiItemPosition.CONTENT,f.UiOperation.SET,0,0);p.buildUi(s);}};f.AtlasSimpleProgram=function(){};f.AtlasSimpleProgram.prototype=new f.DfUiProgram();f.AtlasSimpleProgram.prototype._ff_c="AtlasSimpleProgram";f.AtlasSimpleProgram.DEFAULT_PROGRAM_NAME="StoryRenderer";f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME="ExtSysUsername";f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD="ExtSysPassword";f.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME="SystemName";f.AtlasSimpleProgram.PARAM_2_STORY_ID="StoryId";f.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER="PageNumber";f.AtlasSimpleProgram.prototype.m_orcaService=null;f.AtlasSimpleProgram.prototype.m_systemName=null;f.AtlasSimpleProgram.prototype.m_storyId=null;f.AtlasSimpleProgram.prototype.m_pageNumber=0;f.AtlasSimpleProgram.prototype.m_activityIndicator=null;f.AtlasSimpleProgram.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME,"Username for external data source system.","",f.XValueType.STRING);m.addOption(f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD,"Password for external data source system.","",f.XValueType.STRING);m.addParameter(f.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME,"The system name as used in the system landscape.");m.addParameter(f.AtlasSimpleProgram.PARAM_2_STORY_ID,"The story id.");m.addParameter(f.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER,"The page number, starting with 0.");};f.AtlasSimpleProgram.prototype.newProgram=function(){var c=new f.AtlasSimpleProgram();c.setup();return c;};f.AtlasSimpleProgram.prototype.releaseObject=function(){this.m_orcaService=f.XObjectExt.release(this.m_orcaService);f.DfUiProgram.prototype.releaseObject.call(this);};f.AtlasSimpleProgram.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);var o=f.DfUiProgram.prototype.getSystemLandscapeUrl.call(this);if(f.isNull(o)){this.setSystemLandscapeUrl("${ff_sdk}/production/systems/SystemLandscapeAllWithPwds.json");}};f.AtlasSimpleProgram.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.m_activityIndicator=g.newControl(f.UiType.ACTIVITY_INDICATOR);this.m_activityIndicator.setText("Connecting to remote system...");g.setRoot(this.m_activityIndicator);this.runApp();};f.AtlasSimpleProgram.prototype.runApp=function(){this.resolveArgs();var s=this.getApplication().getSystemLandscape();var a=this.m_systemName;if(f.XStringUtils.containsString(this.m_systemName,"http://",true)||f.XStringUtils.containsString(this.m_systemName,"https://",true)){var b=f.XUri.createFromUrl(this.m_systemName);a=f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME;s.setSystemByUri(a,b,null);}else{s.setMasterSystemName(this.m_systemName);}var c=f.OcOrcaServiceConfig.create(this.getApplication(),a);c.processOrcaServiceCreation(f.SyncType.NON_BLOCKING,this,null);};f.AtlasSimpleProgram.prototype.resolveArgs=function(){var i=this.getArgumentStructure();var b=f.XStringBuffer.create().append("AtlasSimple");if(f.notNull(i)){this.m_systemName=i.getStringByKey(f.AtlasSimpleProgram.PARAM_1_SYSTEM_NAME);this.m_storyId=i.getStringByKey(f.AtlasSimpleProgram.PARAM_2_STORY_ID);this.m_pageNumber=f.XInteger.convertFromString(i.getStringByKeyExt(f.AtlasSimpleProgram.PARAM_3_PAGE_NUMBER,"0"));}this.setTitle(b.toString());};f.AtlasSimpleProgram.prototype.showProgressMessage=function(t,i){if(f.notNull(this.m_activityIndicator)){if(i===false){this.m_activityIndicator.setText(t);}else{var a=this.m_genesis.newControl(f.UiType.FLEX_LAYOUT);a.setName("errorWrapperLayout");a.useMaxSpace();a.setDirection(f.UiFlexDirection.COLUMN);a.setAlignItems(f.UiFlexAlignItems.CENTER);a.setJustifyContent(f.UiFlexJustifyContent.CENTER);var e=a.newItemOfType(f.UiType.ICON);e.setIcon("alert");e.setColor(f.UiColor.RED);e.setSize(f.UiSize.createByCss("30px","30px"));a.addItem(e);var b=a.newItemOfType(f.UiType.LABEL);b.setText(t);b.setFontColor(f.UiColor.RED);a.addItem(b);this.m_genesis.setRoot(a);this.m_activityIndicator=f.XObjectExt.release(this.m_activityIndicator);}}};f.AtlasSimpleProgram.prototype.onOrcaServiceCreated=function(e,o,c){if(e.isValid()){this.log("#1 success logon");this.showProgressMessage("Loading systems...",false);this.m_orcaService=o;o.processSystemLandscapeLoad(null,this,null,null);}else{this.log("#1 failure logon");this.showProgressMessage("Connection failed!",true);this.log(e.getSummary());f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),e.getSummary());}};f.AtlasSimpleProgram.prototype.onSystemsLoaded=function(e,s,c){if(e.isValid()){var a=this.getArgumentStructure();var b=a.getStringByKey(f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME);var d=a.getStringByKey(f.AtlasSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD);this.log("#2 success system loaded");this.showProgressMessage("Loading story...",false);var g=this.getApplication().getSystemLandscape();for(var i=0;i<s.size();i++){var h=s.get(i);if(f.XStringUtils.isNotNullAndNotEmpty(b)&&f.XStringUtils.isNotNullAndNotEmpty(d)){h.setUser(b);h.setPassword(d);}g.setSystemByDescription(h);}this.m_orcaService.processStoryLoad(null,this,null,this.m_storyId);}else{this.log("#2 failure system loaded");this.showProgressMessage("Failed to retrieve systems!",true);this.log(e.getSummary());}};f.AtlasSimpleProgram.prototype.onStoryLoaded=function(e,s,c){if(e.isValid()){this.log("#4 success story loaded");this.showProgressMessage("Rendering story...",false);var q=f.OcQuasarStory.create(s);q.setQuasarMainLayoutType(f.OcLayoutType.CANVAS);var p=q.getQuasarPageDocuments();if(p.size()>this.m_pageNumber){var a=p.get(this.m_pageNumber);var b=f.PoseidonClient.createWithDocument(this.getApplication().newSubApplication(null),a);b.runWithGenesis(this.m_genesis);}else{this.log("The specified page doesn't exist!");this.showProgressMessage("Story rendering failed!",true);}}else{this.log("#4 failure story loaded");this.showProgressMessage("Failed to load the specified story!",true);this.log(e.getSummary());}};f.Kreios=function(){};f.Kreios.prototype=new f.DfUiProgram();f.Kreios.prototype._ff_c="Kreios";f.Kreios.DEFAULT_PROGRAM_NAME="preview";f.Kreios.PARAM_QSA_LIST_URI="qsaListUri";f.Kreios.PARAM_QSA_URI_QUERY_STRING="qsaUriQueryString";f.Kreios.createRunner=function(){var r=f.KernelBoot.createByName(f.Kreios.DEFAULT_PROGRAM_NAME);return r;};f.Kreios.createStudioProgram=function(a){var c=f.Kreios.create(a,null);return c;};f.Kreios.createPoseidonApp=function(n,a){f.PoseidonModule.getInstance();var c=f.Kreios.create(null,null);c.setNativeAnchorId(n);c.setNativeAnchorObject(a);return c;};f.Kreios.create=function(a,s){var c=new f.Kreios();c.setup();c.setInitialSystemType(s);c.setApplication(a);c.initializeProgram();return c;};f.Kreios.prototype.m_qsaDocListFile=null;f.Kreios.prototype.m_qsaFile=null;f.Kreios.prototype.m_navigationContainer=null;f.Kreios.prototype.m_VD=null;f.Kreios.prototype.m_flowController=null;f.Kreios.prototype.m_queryManager=null;f.Kreios.prototype.m_poseidonClient=null;f.Kreios.prototype.m_title=null;f.Kreios.prototype.newProgram=function(){var p=new f.Kreios();p.setup();return p;};f.Kreios.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.Kreios.PARAM_QSA_LIST_URI,"Specify the uri to a document list api","Absolute URI string",f.XValueType.STRING);m.addOption(f.Kreios.PARAM_QSA_URI_QUERY_STRING,"Specify the uri query string which will be added to the qsa document url","URI Query string",f.XValueType.STRING);m.addOption(f.DfProgram.PARAM_FILE,"Specify the quasar file to be loaded","Relative URI",f.XValueType.STRING);};f.Kreios.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);var a=this.getArgumentStructure();var q=a.getStringByKey(f.DfProgram.PARAM_FILE);if(f.notNull(q)){this.setQsaFileFromPath(q);}else if(this.getApplication().getSession().getEnvironment().getStringByKey("qsa_file")!==null){q=f.XStringUtils.concatenate2("quasar/",this.getApplication().getSession().getEnvironment().getStringByKey("qsa_file"));this.setQsaFileFromPath(q);}else{throw f.XException.createIllegalArgumentException("Quasar document not specified");}};f.Kreios.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);};f.Kreios.prototype.releaseObject=function(){this.m_navigationContainer=f.XObjectExt.release(this.m_navigationContainer);this.m_qsaDocListFile=f.XObjectExt.release(this.m_qsaDocListFile);f.DfUiProgram.prototype.releaseObject.call(this);};f.Kreios.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.m_genesis=g;if(f.notNull(this.m_qsaFile)){this.m_poseidonClient=f.PoseidonClient.createWithFile(this.getApplication(),this.m_qsaFile,null);this.m_poseidonClient.getSession().getSessionSingletons().put("variable_exit",this);this.m_poseidonClient.getSession().getEnvironment().setVariable("prompt_variables","true");this.m_poseidonClient.buildUi(this.m_genesis);}else{f.OqdController.create(this.getApplication(),this.getUiManager(),this).open();}};f.Kreios.prototype.setQsaFileFromPath=function(t){if(f.isNull(t)){var m="\nPath missing";this.getStdout().print(m);throw f.XException.createIllegalArgumentException(m);}var s=f.XFile.createFromEnvVar(this.getSession(),f.XEnvironmentConstants.NETWORK_DIR,f.XStringUtils.concatenate2("files/",t));if(f.isNull(s)){var M=f.XStringUtils.concatenate2("\nFailed to assemble file",t);this.getStdout().print(M);throw f.XException.createIllegalStateException(M);}this.setQsaFile(s);};f.Kreios.prototype.setQsaFile=function(q){this.m_qsaFile=q;};f.Kreios.prototype.onFileLoaded=function(e,a,b,c){if(e.isValid()){var j=b.getJsonContent();this.m_title=j.getStringByKey("Title");if(f.isNull(this.m_title)){this.m_title=this.m_qsaFile.getName();}this.setTitle(this.m_title);}else{f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"Failed to fetch document list!");}};f.Kreios.prototype.onSelect=function(e){var a=e.getSelectedItem().getCustomObject();if(f.notNull(a)){this.m_poseidonClient=f.PoseidonClient.createWithFile(this.getApplication(),a,this);this.setTitle(f.XStringUtils.concatenate2("Kreios@",a.getName()));}else{this.getGenesis().showErrorToast("Error while opening the file. Location is missing.");}};f.Kreios.prototype.onQuerySelectCancel=function(){f.UiMessageUtils.showWarningWithMessage(this.getGenesis(),"Please set the qsaFile or qsaListUri argument with a location to a quasar document or to quasar document list.");};f.Kreios.prototype.onQuerySelect=function(s,q,a){this.setQsaFileFromPath("/production/queries/kreios/DefaultViewer.qsa");this.getSession().getEnvironment().setVariable("query",q);this.getSession().getEnvironment().setVariable("system",s);this.m_poseidonClient=f.PoseidonClient.createWithFile(this.getApplication(),this.m_qsaFile,null);this.m_poseidonClient.getSession().getSessionSingletons().put("variable_exit",this);this.m_poseidonClient.getSession().getEnvironment().setVariable("prompt_variables","true");this.m_poseidonClient.buildUi(this.m_genesis);this.setTitle(f.XStringUtils.concatenate2("Kreios@",this.m_qsaFile.getName()));};f.Kreios.prototype.replaceVariables=function(q,a){if(this.m_poseidonClient.getSession().getEnvironment().getVariable("prompt_variables")!==null&&f.XString.compare(this.m_poseidonClient.getSession().getEnvironment().getVariable("prompt_variables"),"true")===0){this.m_queryManager=q;this.m_VD=f.VdUqmEntryPoint.createEntryPoint(this.m_title,this.m_queryManager.getOlapEnv().getVariableProcessor(),this);this.m_VD.open();this.m_flowController=a;}else{a.releaseControl();this.m_queryManager.processQueryExecution(null,null,null);}};f.Kreios.prototype.onBeforeSubmit=function(v,a){this.log("onBeforeSubmit");this.m_poseidonClient.getSession().getEnvironment().setVariable("prompt_variables","false");};f.Kreios.prototype.onAfterSubmit=function(s,e,v,a){};f.Kreios.prototype.onOk=function(){this.m_flowController.releaseControl();var q=this.m_queryManager.getOlapEnv().getAllAreaQueryManager().getIterator();while(q.hasNext()){q.next().processQueryExecution(null,null,null);}this.m_VD=null;};f.Kreios.prototype.onCancel=function(){this.m_flowController.releaseControl();this.m_VD.close();this.m_VD=null;this.m_poseidonClient.getSession().getEnvironment().setVariable("prompt_variables","false");this.m_queryManager.processQueryExecution(null,null,null);};f.NotosSimpleProgram=function(){};f.NotosSimpleProgram.prototype=new f.DfUiProgram();f.NotosSimpleProgram.prototype._ff_c="NotosSimpleProgram";f.NotosSimpleProgram.DEFAULT_PROGRAM_NAME="NotosSimple";f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME="ExtSysUsername";f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD="ExtSysPassword";f.NotosSimpleProgram.PARAM_1_SYSTEM_NAME="SystemName";f.NotosSimpleProgram.PARAM_2_STORY_ID="StoryId";f.NotosSimpleProgram.prototype.m_orcaService=null;f.NotosSimpleProgram.prototype.m_systemName=null;f.NotosSimpleProgram.prototype.m_storyId=null;f.NotosSimpleProgram.prototype.m_activityIndicator=null;f.NotosSimpleProgram.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME,"Username for external data source system.","",f.XValueType.STRING);m.addOption(f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD,"Password for external data source system.","",f.XValueType.STRING);m.addParameter(f.NotosSimpleProgram.PARAM_1_SYSTEM_NAME,"The system name as used in the system landscape.");m.addParameter(f.NotosSimpleProgram.PARAM_2_STORY_ID,"The story id.");};f.NotosSimpleProgram.prototype.newProgram=function(){var c=new f.NotosSimpleProgram();c.setup();return c;};f.NotosSimpleProgram.prototype.releaseObject=function(){this.m_orcaService=f.XObjectExt.release(this.m_orcaService);f.DfUiProgram.prototype.releaseObject.call(this);};f.NotosSimpleProgram.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);var o=f.DfUiProgram.prototype.getSystemLandscapeUrl.call(this);if(f.isNull(o)){this.setSystemLandscapeUrl("${ff_sdk}/production/systems/SystemLandscapeAllWithPwds.json");}};f.NotosSimpleProgram.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.m_activityIndicator=g.newControl(f.UiType.ACTIVITY_INDICATOR);this.m_activityIndicator.setText("Connecting to remote system...");g.setRoot(this.m_activityIndicator);this.runApp();};f.NotosSimpleProgram.prototype.runApp=function(){this.resolveArgs();var s=this.getApplication().getSystemLandscape();var a=this.m_systemName;if(f.XStringUtils.containsString(this.m_systemName,"http://",true)||f.XStringUtils.containsString(this.m_systemName,"https://",true)){var b=f.XUri.createFromUrl(this.m_systemName);a=f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME;s.setSystemByUri(a,b,null);}else{s.setMasterSystemName(this.m_systemName);}var c=f.OcOrcaServiceConfig.create(this.getApplication(),a);var d=c.processOrcaServiceCreation(f.SyncType.BLOCKING,this,null);this.log(d.getSummary());};f.NotosSimpleProgram.prototype.resolveArgs=function(){var i=this.getArgumentStructure();var b=f.XStringBuffer.create().append("AtlasSimple");if(f.notNull(i)){this.m_systemName=i.getStringByKey(f.NotosSimpleProgram.PARAM_1_SYSTEM_NAME);this.m_storyId=i.getStringByKey(f.NotosSimpleProgram.PARAM_2_STORY_ID);}this.setTitle(b.toString());};f.NotosSimpleProgram.prototype.showProgressMessage=function(t,i){if(f.notNull(this.m_activityIndicator)){if(i===false){this.m_activityIndicator.setText(t);}else{var a=this.m_genesis.newControl(f.UiType.FLEX_LAYOUT);a.setName("errorWrapperLayout");a.useMaxSpace();a.setDirection(f.UiFlexDirection.COLUMN);a.setAlignItems(f.UiFlexAlignItems.CENTER);a.setJustifyContent(f.UiFlexJustifyContent.CENTER);var e=a.newItemOfType(f.UiType.ICON);e.setIcon("alert");e.setColor(f.UiColor.RED);e.setSize(f.UiSize.createByCss("30px","30px"));a.addItem(e);var b=a.newItemOfType(f.UiType.LABEL);b.setText(t);b.setFontColor(f.UiColor.RED);a.addItem(b);this.m_genesis.setRoot(a);this.m_activityIndicator=f.XObjectExt.release(this.m_activityIndicator);}}};f.NotosSimpleProgram.prototype.onOrcaServiceCreated=function(e,o,c){if(e.isValid()){this.log("#1 success logon");this.showProgressMessage("Loading systems...",false);this.m_orcaService=o;o.processSystemLandscapeLoad(null,this,null,null);}else{this.log("#1 failure logon");this.showProgressMessage("Connection failed!",true);this.log(e.getSummary());f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),e.getSummary());}};f.NotosSimpleProgram.prototype.onSystemsLoaded=function(e,s,c){if(e.isValid()){var a=this.getArgumentStructure();var b=a.getStringByKey(f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_USERNAME);var d=a.getStringByKey(f.NotosSimpleProgram.PARAM_OPTION_EXTERNAL_SYSTEM_PASSWORD);this.log("#2 success system loaded");this.showProgressMessage("Loading story...",false);var g=this.getApplication().getSystemLandscape();for(var i=0;i<s.size();i++){var h=s.get(i);if(f.XStringUtils.isNotNullAndNotEmpty(b)&&f.XStringUtils.isNotNullAndNotEmpty(d)){h.setUser(b);h.setPassword(d);}g.setSystemByDescription(h);}this.m_orcaService.processStoryLoad(null,this,null,this.m_storyId);}else{this.log("#2 failure system loaded");this.showProgressMessage("Failed to retrieve systems!",true);this.log(e.getSummary());}};f.NotosSimpleProgram.prototype.onStoryLoaded=function(e,s,c){if(e.isValid()){this.log("#4 success story loaded");this.showProgressMessage("Rendering story...",false);var q=f.OcQuasarStory.create(s);q.setQuasarMainLayoutType(f.OcLayoutType.CANVAS);var a=q.getQuasarAnalyticalCardDocument();if(f.notNull(a)){var p=f.PoseidonClient.createWithDocument(this.getApplication().newSubApplication(null),a);p.runWithGenesis(this.m_genesis);}else{this.log("Failed to extract KPI from story");this.showProgressMessage("Story rendering failed!",true);}}else{this.log("#4 failure story loaded");this.showProgressMessage("Failed to load the specified story!",true);this.log(e.getSummary());}};f.PoseidonClient=function(){};f.PoseidonClient.prototype=new f.DfUiProgram();f.PoseidonClient.prototype._ff_c="PoseidonClient";f.PoseidonClient.DEFAULT_PROGRAM_NAME="Poseidon";f.PoseidonClient.createRunner=function(){var r=f.KernelBoot.createByName(f.PoseidonClient.DEFAULT_PROGRAM_NAME);return r;};f.PoseidonClient.createWithNativeJson=function(a,n){var c=f.PoseidonClient.create(a,null);c.setNativeJson(n);c.setFile(null);c.setDocument(null);return c;};f.PoseidonClient.createWithFile=function(a,b,c){var d=f.PoseidonClient.create(a,null);d.setNativeJson(null);d.setFile(b);d.setDocument(null);d.setFileLoadedListener(c);return d;};f.PoseidonClient.createWithDocument=function(a,d){var c=f.PoseidonClient.create(a,null);c.setNativeJson(null);c.setFile(null);c.setDocument(d);return c;};f.PoseidonClient.createPoseidonApp=function(n,a){f.PoseidonModule.getInstance();var c=f.PoseidonClient.create(null,null);c.setNativeAnchorId(n);c.setNativeAnchorObject(a);return c;};f.PoseidonClient.create=function(a,s){var c=new f.PoseidonClient();c.setup();c.setApplication(a);c.setInitialSystemType(s);c.initializeProgram();return c;};f.PoseidonClient.prototype.m_nativeJson=null;f.PoseidonClient.prototype.m_file=null;f.PoseidonClient.prototype.m_fileLoadedListener=null;f.PoseidonClient.prototype.m_document=null;f.PoseidonClient.prototype.m_core=null;f.PoseidonClient.prototype.m_isContentRendered=false;f.PoseidonClient.prototype.newProgram=function(){var p=new f.PoseidonClient();p.setup();return p;};f.PoseidonClient.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.DfProgram.PARAM_FILE,"Specify the poseidon file with a quasar template","Relative URI",f.XValueType.STRING);};f.PoseidonClient.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);var a=this.getArgumentStructure();var b=a.getStringByKey(f.DfProgram.PARAM_FILE);if(f.notNull(b)){this.setPoseidonFileByPath(b,null);}};f.PoseidonClient.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);this.m_isContentRendered=false;};f.PoseidonClient.prototype.releaseObject=function(){this.m_core=f.XObjectExt.release(this.m_core);this.m_nativeJson=null;this.m_document=null;this.m_file=null;this.m_fileLoadedListener=null;f.DfUiProgram.prototype.releaseObject.call(this);};f.PoseidonClient.prototype.getLogSeverity=function(){return f.DfUiProgram.prototype.getLogSeverity.call(this);};f.PoseidonClient.prototype.getMenuBarDisplayName=function(){return"PoseidonClient";};f.PoseidonClient.prototype.isOpenContainerMaximized=function(){return false;};f.PoseidonClient.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.setTitle("Poseidon Quasar Renderer");this.m_core=f.QuasarEngine.create(this.getApplication());if(f.notNull(this.m_nativeJson)){this.m_core.setDocumentByNativeJson(this.m_nativeJson);this.m_core.buildUi(g);this.m_isContentRendered=true;}else if(f.notNull(this.m_document)){this.m_core.setDocument(this.m_document);this.m_core.buildUi(g);this.m_isContentRendered=true;}else if(f.notNull(this.m_file)){this.m_core.setDocumentByFile(this.m_file,this);this.setTitle(f.XStringUtils.concatenate2(this.m_file.getName(),"@Poseidon"));this.m_core.buildUi(g);this.m_isContentRendered=true;}else{f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"No file specified!");}};f.PoseidonClient.prototype.runOnElement=function(u){this.m_genesis=f.UiGenesis.create(u,f.UiItemPosition.CONTENT,f.UiOperation.SET,0,0);this.buildUi(this.m_genesis);};f.PoseidonClient.prototype.runWithGenesis=function(g){this.buildUi(g);};f.PoseidonClient.prototype.refreshBindings=function(){if(f.notNull(this.m_core)){this.m_core.initBindings();}};f.PoseidonClient.prototype.reset=function(){if(f.notNull(this.m_core)){this.m_core.reset();}this.m_genesis.clearUi();this.buildUi(this.m_genesis);};f.PoseidonClient.prototype.isContentRendered=function(){return this.m_isContentRendered;};f.PoseidonClient.prototype.setPoseidonFileByPath=function(a,b){if(f.notNull(a)){var s=this.getSession();var c=f.XFile.createExt(s,a,f.PathFormat.AUTO_DETECT,f.VarResolveMode.DOLLAR);if(f.isNull(c)||c.isExisting()===false){this.log2("File does not exist: ",a);return;}this.setFile(c);this.setFileLoadedListener(b);}};f.PoseidonClient.prototype.setNativeJson=function(n){this.m_nativeJson=n;};f.PoseidonClient.prototype.setFile=function(a){this.m_file=a;};f.PoseidonClient.prototype.setDocument=function(d){this.m_document=d;};f.PoseidonClient.prototype.setFileLoadedListener=function(a){this.m_fileLoadedListener=a;};f.PoseidonClient.prototype.onFileLoaded=function(e,a,b,c){this.log("File loaded!");if(f.notNull(this.m_fileLoadedListener)){this.m_fileLoadedListener.onFileLoaded(e,a,b,c);}};f.TridentClient=function(){};f.TridentClient.prototype=new f.DfUiProgram();f.TridentClient.prototype._ff_c="TridentClient";f.TridentClient.createStudioProgram=function(a){var c=f.TridentClient.create(a,null);return c;};f.TridentClient.createPoseidonApp=function(n,a){f.PoseidonModule.getInstance();var b=f.ApplicationFactory.createDefaultApplicationWithVersion(f.XVersion.MAX);b.getSession().setDefaultSyncType(f.SyncType.NON_BLOCKING);var c=f.TridentClient.create(b,null);c.setNativeAnchorId(n);c.setNativeAnchorObject(a);return c;};f.TridentClient.create=function(a,s){var c=new f.TridentClient();c.setup();c.setInitialSystemType(s);c.setApplication(a);c.initializeProgram();return c;};f.TridentClient.prototype.m_quasarDocument=null;f.TridentClient.prototype.newProgram=function(){var p=new f.TridentClient();p.setup();return p;};f.TridentClient.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);};f.TridentClient.prototype.releaseObject=function(){this.m_quasarDocument=null;f.DfUiProgram.prototype.releaseObject.call(this);};f.TridentClient.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.setTitle("Embedding client");this.showActivity("");};f.TridentClient.prototype.setContentByDocument=function(d){if(f.notNull(d)){this.m_quasarDocument=d;this.m_genesis.clearUi();var p=f.PoseidonClient.createWithDocument(this.getApplication(),this.m_quasarDocument);p.runWithGenesis(this.m_genesis);}else{this.showMessage("The page has no content.");}};f.TridentClient.prototype.showMessage=function(m){this.m_quasarDocument=null;var e=this.m_genesis.newControl(f.UiType.LABEL).setText(m);this.m_genesis.setRoot(e);};f.TridentClient.prototype.showActivity=function(m){this.m_quasarDocument=null;var l=this.m_genesis.newControl(f.UiType.ACTIVITY_INDICATOR).setText(m).useMaxSpace();this.m_genesis.setRoot(l);};f.TridentClient.prototype.createUiElement=function(e){var n=this.m_genesis.newControl(e);return n;};f.TridentClient.prototype.setRootUiElement=function(r){this.m_quasarDocument=null;this.m_genesis.setRoot(r);};f.TridentClient.prototype.showTridentErrorToast=function(m){this.getGenesis().showErrorToast(m);};f.TridentClient.prototype.showTridentSuccessToast=function(m){this.getGenesis().showSuccessToast(m);};f.TridentClient.prototype.showTridentWarningToast=function(m){this.getGenesis().showWarningToast(m);};f.TridentClient.prototype.showTridentInfoToast=function(m){this.getGenesis().showInfoToast(m);};f.AppGallery=function(){};f.AppGallery.prototype=new f.DfUiProgram();f.AppGallery.prototype._ff_c="AppGallery";f.AppGallery.DEFAULT_PROGRAM_NAME="AppGallery";f.AppGallery.PARAM_PATH="resourcesPath";f.AppGallery.createRunner=function(){var r=f.KernelBoot.createByName(f.AppGallery.DEFAULT_PROGRAM_NAME);return r;};f.AppGallery.createStudioProgram=function(a){var c=f.AppGallery.create(a,null);return c;};f.AppGallery.createPoseidonApp=function(n,a){f.PoseidonModule.getInstance();var c=f.AppGallery.create(null,null);c.setNativeAnchorId(n);c.setNativeAnchorObject(a);return c;};f.AppGallery.create=function(a,s){var c=new f.AppGallery();c.setup();c.setInitialSystemType(s);c.setApplication(a);c.initializeProgram();return c;};f.AppGallery.prototype.m_appGalleryDir=null;f.AppGallery.prototype.m_navigationContainer=null;f.AppGallery.prototype.m_startPage=null;f.AppGallery.prototype.m_apps=null;f.AppGallery.prototype.newProgram=function(){var p=new f.AppGallery();p.setup();return p;};f.AppGallery.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.AppGallery.PARAM_PATH,"Specify the path to the directory with the applications","Relative URI",f.XValueType.STRING);};f.AppGallery.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);var a=this.getArgumentStructure();var r=a.getStringByKey(f.AppGallery.PARAM_PATH);if(f.notNull(r)){this.setAppGalleryDirByPath(r);}};f.AppGallery.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);};f.AppGallery.prototype.releaseObject=function(){this.m_navigationContainer=f.XObjectExt.release(this.m_navigationContainer);this.m_startPage=f.XObjectExt.release(this.m_startPage);this.m_appGalleryDir=f.XObjectExt.release(this.m_appGalleryDir);var a=this.m_apps.getKeysAsIteratorOfString();while(a.hasNext()){var b=a.next();var t=this.m_apps.getByKey(b);f.XObjectExt.release(t);}this.m_apps.clear();this.m_apps=f.XObjectExt.release(this.m_apps);f.DfUiProgram.prototype.releaseObject.call(this);};f.AppGallery.prototype.setDir=function(d){this.m_appGalleryDir=d;};f.AppGallery.prototype.getAppInfo=function(s){var i=this.m_apps.getByKey(s);if(f.isNull(i)){i=f.PsAppInfo.create(s);this.m_apps.add(i);}return i;};f.AppGallery.prototype.setAppGalleryDirByPath=function(d){if(f.notNull(d)){var g=f.XFile.createFromEnvVar(this.getSession(),f.XEnvironmentConstants.FIREFLY_SDK,d);this.setDir(g);}};f.AppGallery.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.setTitle("App Gallery");var a=g.newControl(f.UiType.ACTIVITY_INDICATOR).setText("Loading...");g.setRoot(a);if(f.isNull(this.m_appGalleryDir)||this.m_appGalleryDir.isDirectory()===false){this.setAppGalleryDirByPath("/production/queries/poseidon/");}this.m_appGalleryDir.processFetchChildren(f.SyncType.NON_BLOCKING,this,null);};f.AppGallery.prototype.onChildrenFetched=function(e,a,c){if(e.isValid()){var b=a.getChildren();this.m_apps=f.XSetOfNameObject.create();for(var i=0;i<b.size();i++){var d=b.get(i);var g=d;var n=g.getName();var h=f.XString.lastIndexOf(n,".");if(h!==-1&&f.XString.isEqual(".index.json",n)===false){var s=f.XString.substring(n,0,h);var p=f.XString.substring(n,h+1,-1);var j;if(f.XString.isEqual("manifest",p)){j=this.getAppInfo(s);j.setText(s);}else if(f.XString.isEqual("json",p)){j=this.getAppInfo(s);j.setAppFile(g);}else if(f.XString.isEqual("png",p)){j=this.getAppInfo(s);j.setImageName(f.XStringUtils.concatenate2(s,".png"));j.setImageFile(g);}}}this.m_navigationContainer=this.m_genesis.newControl(f.UiType.NAVIGATION_CONTAINER);this.m_navigationContainer.useMaxSpace();this.m_startPage=this.m_navigationContainer.pushNewPage();this.m_startPage.setText("Start Page");var l=this.m_startPage.setNewContent(f.UiType.TILE_CONTAINER);l.setPadding(f.UiCssBoxEdges.create("10px"));var k=this.m_apps.getKeysAsIteratorOfString();while(k.hasNext()){var m=k.next();var o=this.m_apps.getByKey(m);var q=l.addNew(f.UiType.TILE_ITEM);q.setText(o.getName());q.setCustomObject(o);q.registerOnPress(this);q.setSrc(o.getImageFile().getTargetUri().getUrl());}this.m_genesis.setRoot(this.m_navigationContainer);}else{f.UiMessageUtils.showErrorWithMessage(this.getGenesis(),"Failed to fetch application list!");}};f.AppGallery.prototype.onPress=function(e){var a=e.getControl().getCustomObject();this.log(a.getName());var n=this.m_navigationContainer.pushNewPage();n.setText(a.getName());var t=a.getAppFile();if(f.isNull(t)){var b=n.setNewContent(f.UiType.TEXT).setText("App file not found!");b.setBackgroundColor(f.UiColor.create("#cc0033"));b.setFontColor(f.UiColor.create("#ffffff"));b.setFontSize(f.UiCssLength.createExt(15,f.UiCssSizeUnit.PIXEL));}else{var p=f.PoseidonClient.createWithFile(this.getApplication().newSubApplication(null),t,null);var s=f.UiGenesis.create(n,f.UiItemPosition.CONTENT,f.UiOperation.SET,0,0);p.buildUi(s);}};f.PoseidonModule=function(){};f.PoseidonModule.prototype=new f.DfModule();f.PoseidonModule.prototype._ff_c="PoseidonModule";f.PoseidonModule.s_module=null;f.PoseidonModule.getInstance=function(){if(f.isNull(f.PoseidonModule.s_module)){f.DfModule.checkInitialized(f.SystemUiModule.getInstance());f.DfModule.checkInitialized(f.ApplicationUiModule.getInstance());f.PoseidonModule.s_module=f.DfModule.startExt(new f.PoseidonModule());f.ProgramRegistration.setProgramFactory(f.PoseidonClient.DEFAULT_PROGRAM_NAME,new f.PoseidonClient());f.ProgramRegistration.setProgramFactory(f.AppGallery.DEFAULT_PROGRAM_NAME,new f.AppGallery());f.ProgramRegistration.setProgramFactory(f.AtlasSimpleProgram.DEFAULT_PROGRAM_NAME,new f.AtlasSimpleProgram());f.ProgramRegistration.setProgramFactory(f.NotosSimpleProgram.DEFAULT_PROGRAM_NAME,new f.NotosSimpleProgram());f.ProgramRegistration.setProgramFactory(f.Kreios.DEFAULT_PROGRAM_NAME,new f.Kreios());f.ProgramRegistration.setProgramFactory(f.Asteria.DEFAULT_PROGRAM_NAME,new f.Asteria());f.DfModule.stopExt(f.PoseidonModule.s_module);}return f.PoseidonModule.s_module;};f.PoseidonModule.prototype.getName=function(){return"ff8090.poseidon";};f.PoseidonModule.getInstance();return sap.firefly;});
