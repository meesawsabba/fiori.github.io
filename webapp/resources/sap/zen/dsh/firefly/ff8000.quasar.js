/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff2230.ui.remote","sap/zen/dsh/firefly/ff4200.olap.api"],function(f){"use strict";f.SxActionsProvider=function(){};f.SxActionsProvider.prototype=new f.XObject();f.SxActionsProvider.prototype._ff_c="SxActionsProvider";f.SxActionsProvider.create=function(q){var a=new f.SxActionsProvider();a.m_qManager=q;return a;};f.SxActionsProvider.prototype.m_qManager=null;f.SxActionsProvider.prototype.processQueryDefinition=function(s){this.getActionWithParameters(this.m_qManager.getConvenienceCommands(),s);return this.m_qManager;};f.SxActionsProvider.prototype.getActionWithParameters=function(c,s){var a=f.XStringTokenizer.splitString(s,"$");var b=f.XList.create();for(var d=1;d<a.size();d++){var e=a.get(d);var g=f.XStringTokenizer.splitString(e,"'");var h=f.XListOfString.create();for(var i=1;i<g.size();i=i+2){h.add(g.get(i));}if(h.size()>0){this.processAction(c,h);b.add(h);}}return b;};f.SxActionsProvider.prototype.processAction=function(c,a){var b=a.get(0);var d=a.get(2);if(f.XString.isEqual(b,"axisColumn")){c.moveMeasureDimensionToAxis(f.AxisType.COLUMNS);var e=c.moveDimensionToAxis(d,f.AxisType.COLUMNS);if(f.notNull(e)){this.setDimHierarchy(c,d,a);this.setSingleMemberSel(c,e,a);}else{this.setDimHierarchy(c,d,a);if(a.size()>3&&!f.XString.isEqual(a.get(3),"")){var m=a.get(3);c.addSingleMeasureFilter(m);}}}else if(f.XString.isEqual(b,"axisRows")){c.moveDimensionToAxis(d,f.AxisType.ROWS);this.setDimHierarchy(c,d,a);}else if(f.XString.isEqual(b,"filter")){this.setFilter(c,a);}};f.SxActionsProvider.prototype.setFilter=function(c,a){if(a.size()>3){var b=a.get(2);for(var m=3;m<a.size();m++){var d=a.get(m);if(!f.XString.isEqual(b,"")&&f.XString.isEqual(b,"IN")){c.addSingleMemberFilterByDimension(c.getDimension(a.get(1)),d,f.ComparisonOperator.EQUAL);}}}};f.SxActionsProvider.prototype.setDimHierarchy=function(c,d,a){if(a.size()>4&&!f.XString.isEqual(a.get(4),"")){c.setDimensionHierarchy(d,a.get(4),true,0);}};f.SxActionsProvider.prototype.setSingleMemberSel=function(c,d,a){if(a.size()>3&&!f.XString.isEqual(a.get(3),"")){var m=a.get(3);c.addSingleMemberFilterByDimension(d,m,f.ComparisonOperator.EQUAL);}};f.SxBinding=function(){};f.SxBinding.prototype=new f.XObject();f.SxBinding.prototype._ff_c="SxBinding";f.SxBinding.create=function(r,i){var b=new f.SxBinding();b.m_quasar=r;b.m_isNeo=i;if(b.m_isNeo){b.m_isNeo=true;}return b;};f.SxBinding.prototype.m_quasar=null;f.SxBinding.prototype.m_control=null;f.SxBinding.prototype.m_dataprovider=null;f.SxBinding.prototype.m_sender=null;f.SxBinding.prototype.m_receiver=null;f.SxBinding.prototype.m_type=null;f.SxBinding.prototype.m_binding=null;f.SxBinding.prototype.m_isNeo=false;f.SxBinding.prototype.m_cacheIdentifier=null;f.SxBinding.prototype.releaseObject=function(){this.m_control=null;this.m_dataprovider=null;this.m_quasar=null;this.m_binding=f.XObjectExt.release(this.m_binding);this.m_binding=null;f.XObject.prototype.releaseObject.call(this);};f.SxBinding.prototype.setCacheIdentifier=function(i){this.m_cacheIdentifier=i;};f.SxBinding.prototype.processInit=function(){var b=this.m_quasar.getApplication().getBindingManager();this.m_binding=b.bindTogether(this.m_sender,f.SigSelDomain.UI,this.m_control,this.m_receiver,f.SigSelDomain.UI,this.m_control,this.m_type,this.m_cacheIdentifier,false,this.m_isNeo);};f.SxBinding.prototype.getControl=function(){return this.m_control;};f.SxBinding.prototype.setControl=function(c){this.m_control=c;};f.SxBinding.prototype.getDataprovider=function(){return this.m_dataprovider;};f.SxBinding.prototype.setDataprovider=function(d){this.m_dataprovider=d;};f.SxBinding.prototype.getSource=function(){return this.m_sender;};f.SxBinding.prototype.setSource=function(s){this.m_sender=s;};f.SxBinding.prototype.getTarget=function(){return this.m_receiver;};f.SxBinding.prototype.setTarget=function(t){this.m_receiver=t;};f.SxBinding.prototype.getType=function(){return this.m_type;};f.SxBinding.prototype.setType=function(t){this.m_type=t;};f.SxBinding.prototype.getSession=function(){var a=this.m_quasar.getApplication();var s=a.getSession();return s;};f.SxSelection=function(){};f.SxSelection.prototype=new f.XObject();f.SxSelection.prototype._ff_c="SxSelection";f.SxSelection.create=function(c,p){var n=new f.SxSelection();n.m_component=c;n.m_property=p;return n;};f.SxSelection.prototype.m_component=null;f.SxSelection.prototype.m_property=null;f.SxSelection.prototype.getComponent=function(){return this.m_component;};f.SxSelection.prototype.getProperty=function(){return this.m_property;};f.QsDataproviderFactory=function(){};f.QsDataproviderFactory.prototype=new f.XObject();f.QsDataproviderFactory.prototype._ff_c="QsDataproviderFactory";f.QsDataproviderFactory.s_factories=null;f.QsDataproviderFactory.staticSetup=function(){f.QsDataproviderFactory.s_factories=f.XHashMapByString.create();};f.QsDataproviderFactory.registerFactory=function(d,a){if(f.notNull(d)){f.QsDataproviderFactory.s_factories.put(d.getName(),a);}};f.QsDataproviderFactory.createDataprovider=function(d,e,a){var b=null;if(f.notNull(d)){var c=null;c=f.QsDataproviderFactory.s_factories.getByKey(d.getName());if(f.notNull(c)){b=c.newDataprovider(e,a);}}return b;};f.ContentParserRegistration={s_parser:null,staticSetup:function(){f.ContentParserRegistration.s_parser=f.XHashMapByString.create();},setCustomContentParser:function(n,c){f.ContentParserRegistration.s_parser.put(n,c);},getCustomContentParser:function(n){return f.ContentParserRegistration.s_parser.getByKey(n);},getAllEntries:function(){return f.ContentParserRegistration.s_parser;}};f.DfContentParser=function(){};f.DfContentParser.prototype=new f.XObject();f.DfContentParser.prototype._ff_c="DfContentParser";f.DfContentParser.prototype.getIdName=function(){return"id";};f.DfContentParser.prototype.parseContent=function(e){var r=new f.InputControlContent();var c=f.PrFactory.createStructure();this.parseContentToStructure(e,this.getIdName(),c);r.setContent(c);return r;};f.DfContentParser.prototype.parseContentToStructure=function(e,m,c){var s=e.asList();if(f.notNull(s)){for(var i=0;i<s.size();i++){var a=f.PrFactory.createStructure();var b=s.get(i).asStructure();if(f.notNull(b)){a.copyFrom(b,null);this.remapSubItem(a);var k=a.getStringByKey(m);if(f.notNull(k)){c.put(k,a);}}}}};f.DfContentParser.prototype.remapSubItem=function(s){};f.QsOlapDpFactory=function(){};f.QsOlapDpFactory.prototype=new f.QsDataproviderFactory();f.QsOlapDpFactory.prototype._ff_c="QsOlapDpFactory";f.QsOlapDpFactory.staticSetupFactory=function(){var n=new f.QsOlapDpFactory();f.QsDataproviderFactory.registerFactory(f.QsDpType.OLAP,n);};f.QsOlapDpFactory.prototype.newDataprovider=function(e,d){var o=f.QsOlapDp.create(e,d);return o;};f.QsRestDpFactory=function(){};f.QsRestDpFactory.prototype=new f.QsDataproviderFactory();f.QsRestDpFactory.prototype._ff_c="QsRestDpFactory";f.QsRestDpFactory.staticSetupFactory=function(){var n=new f.QsRestDpFactory();f.QsDataproviderFactory.registerFactory(f.QsDpType.REST,n);};f.QsRestDpFactory.prototype.newDataprovider=function(e,d){var o=f.QsRestDp.create(e,d);return o;};f.AbstractGlobalContent=function(){};f.AbstractGlobalContent.prototype=new f.GlobalValueHolder();f.AbstractGlobalContent.prototype._ff_c="AbstractGlobalContent";f.AbstractGlobalContent.prototype.m_dps=null;f.AbstractGlobalContent.prototype.m_bnd=null;f.AbstractGlobalContent.prototype.fireChange=function(c){var d=c.getListByKey("dpNames");if(f.notNull(d)&&f.notNull(this.m_dps)&&f.notNull(this.m_bnd)){for(var j=0;j<d.size();j++){d.getStringAt(j);this.m_dps.getByKey(d.getStringAt(j)).reinit();}}for(var k=0;k<this.m_bnd.size();k++){this.m_bnd.get(k).processInit();}};f.AbstractGlobalContent.prototype.setupDpsAndBindings=function(d,b){this.m_dps=f.XHashMapByString.create();for(var i=0;i<d.size();i++){var q=d.get(i);this.m_dps.put(q.getName(),q);}this.m_bnd=b;};f.FieldSelectionParser=function(){};f.FieldSelectionParser.prototype=new f.DfContentParser();f.FieldSelectionParser.prototype._ff_c="FieldSelectionParser";f.FieldSelectionParser.prototype.remapSubItem=function(s){if(f.notNull(s)){var a=s.putNewStructure("entities");if(s.containsKey("entityIds")){this.parseContentToStructure(s.getListByKey("entityIds"),"id",a);this.parseContentToStructure(s.getListByKey("entityIds"),"dimension",a);}}};f.PageFilterParser=function(){};f.PageFilterParser.prototype=new f.DfContentParser();f.PageFilterParser.prototype._ff_c="PageFilterParser";f.PageFilterParser.prototype.getIdName=function(){return"source";};f.StoryFilterParser=function(){};f.StoryFilterParser.prototype=new f.DfContentParser();f.StoryFilterParser.prototype._ff_c="StoryFilterParser";f.StoryFilterParser.prototype.getIdName=function(){return"filterId";};f.CustomAbstractWidget=function(){};f.CustomAbstractWidget.prototype=new f.XObject();f.CustomAbstractWidget.prototype._ff_c="CustomAbstractWidget";f.CustomAbstractWidget.prototype.createCustomControl=function(g,c,a){return this.mapFilterToWidget(g,c,c.getStringByKeyExt("id",c.getStringByKeyExt("source",c.getStringByKeyExt("name","unknown"))),a.getByKey(this.getGlobalId()));};f.CustomAbstractWidget.prototype.getGlobalId=function(){return"";};f.CustomAbstractWidget.prototype.getPixelStringValue=function(s,k){var e=s.getByKey(k);if(f.isNull(e)){return"";}if(e.isInteger()){return f.XStringUtils.concatenate2(f.XInteger.convertToString(e.asInteger().getInteger()),"px");}if(e.isString()){return e.asString().getString();}return"";};f.CustomAbstractWidget.prototype.getNumberStringValue=function(s,k){var e=s.getByKey(k);if(f.isNull(e)){return"1";}if(e.isInteger()){return f.XInteger.convertToString(e.asInteger().getInteger());}if(e.isString()){return e.asString().getString();}return"1";};f.CustomAbstractWidget.prototype.mapFilterToWidget=function(g,c,w,a){var b=a.getContent().getByKey(c.getStringByKey(f.UiProperty.ID.getName()));if(b.containsKey("selectionInfos")){b=b.getStructureByKey("selectionInfos");}var d=b.getStructureByKey("filterTokenInfo");var p=b.getListByKey("possibleValues");var m=false;if(f.notNull(d)&&d.hasStringByKey("selectionType")&&f.XString.startsWith(d.getStringByKey("selectionType"),"multiple")){m=true;}var r=g.newControl(f.UiType.VERTICAL_LAYOUT);r.setPropertyStringValue("X",this.getPixelStringValue(c,"X"));r.setPropertyStringValue("Y",this.getPixelStringValue(c,"Y"));r.setPropertyStringValue("Height",this.getPixelStringValue(c,"Height"));r.setPropertyStringValue("Width",this.getPixelStringValue(c,"Width"));var l=r.addNew(f.UiType.LABEL);l.setName(f.XStringUtils.concatenate3("Label","_",w));l.setText(b.getStringByKeyExt("title",b.getStringByKeyExt("customizedTitle","")));var e;var h=null;if(f.isNull(p)||p.size()===0){return null;}var k=null;if(p.size()===1&&p.get(0).isStructure()&&p.getStructureAt(0).getByKey("key").isStructure()){k=p.getStructureAt(0).getStructureByKey("key");}if(f.notNull(k)){var o=p.getStructureAt(0).getStructureByKey("originalValue");var i=null;if(d.containsKey("originalRanges")){i=d.getListByKey("originalRanges").getStructureAt(0);}else{i=o;}if(m){h=r.addNew(f.UiType.RANGE_SLIDER);h.setPropertyStringValue("SliderUpperValue",o.getStringByKey("end"));}else{h=r.addNew(f.UiType.SLIDER);}h.setPropertyStringValue("SliderMinimum",i.getStringByKey("start"));h.setPropertyStringValue("SliderMaximum",i.getStringByKey("end"));h.setPropertyStringValue("SliderStep",this.getNumberStringValue(i,"icSliderIncrement"));h.setPropertyStringValue("SliderValue",o.getStringByKey("start"));e=f.XHashMapByString.create();e.put("container",b);e.put("controller",a);h.setCustomObject(e);h.registerOnChange(this);}else{if(m){h=r.addNew(f.UiType.VERTICAL_LAYOUT);for(var j=0;j<p.size();j++){var n=p.getStructureAt(j);var q=h.addNew(f.UiType.CHECKBOX);e=f.XHashMapByString.create();e.put("container",b);e.put("controller",a);e.put("selection",n);q.setCustomObject(e);if(f.notNull(n)){var s=n.getListByKey("key");if(f.notNull(s)&&s.isList()){q.setName(s.getStringAt(0));}var t=n.getStructureByKey("originalValue");if(f.notNull(t)&&t.isStructure()){q.setText(t.getStringByKey("displayName"));}q.setPropertyStringValue("Checked",f.XBoolean.convertToString(n.getBooleanByKeyExt("isSelected",false)));}q.registerOnChange(this);}}else{h=r.addNew(f.UiType.DROPDOWN);for(var u=0;u<p.size();u++){var v=p.getStructureAt(u);var x=h.addNew(f.UiType.DROPDOWN_ITEM);x.setName(v.getListByKey("key").getStringAt(0));x.setText(v.getStructureByKey("originalValue").getStringByKey("displayName"));e=f.XHashMapByString.create();e.put("container",b);e.put("controller",a);e.put("selection",v);x.setCustomObject(e);if(v.getBooleanByKey("isSelected")){var y=v.getListByKey("key");if(f.notNull(y)&&y.isList()){h.setPropertyStringValue("SelectedName",y.getStringAt(0));}}}h.registerOnSelect(this);}}if(f.notNull(h)){h.setName(w);}return r;};f.CustomAbstractWidget.prototype.onChange=function(e){var c=e.getControl().getCustomObject();var a=c.getByKey("controller");var b=c.getByKey("container");var s=c.getByKey("selection");if(f.notNull(s)){var p=b.getListByKey("possibleValues");s.putBoolean("isSelected",e.getControl().isChecked());var o=b.getListByKey("originalValues");o.clear();o.clear();var d=b.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");d.clear();for(var i=0;i<p.size();i++){var g=p.getStructureAt(i);if(g.getBooleanByKey("isSelected")){o.add(g.getStructureByKey("originalValue"));d.add(g.getListByKey("key"));}}}else{var h=b.getListByKey("originalValues").getStructureAt(0);var j=b.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");j.clear();var l=e.getControl().getSliderValue();var u=e.getControl().getSliderValue();if(f.XString.isEqual("multiple",b.getStructureByKey("filterTokenInfo").getStringByKey("selectionType"))){l=f.XMath.min(l,e.getControl().getSliderUpperValue());u=f.XMath.max(u,e.getControl().getSliderUpperValue());}j.addNewList().addString(f.XInteger.convertToString(l));j.addNewList().addString(f.XInteger.convertToString(u));h.putString("end",f.XInteger.convertToString(u));h.putString("start",f.XInteger.convertToString(l));}a.fireChange(b);};f.CustomAbstractWidget.prototype.onSelect=function(e){var c=e.getControl().getSelectedItem().getCustomObject();var a=c.getByKey("controller");var b=c.getByKey("container");var p=b.getListByKey("possibleValues");for(var i=0;i<p.size();i++){p.getStructureAt(i).putBoolean("isSelected",false);}var s=c.getByKey("selection");s.putBoolean("isSelected",true);var o=b.getListByKey("originalValues");o.clear();var d=b.getListByKey("filters").getStructureAt(0).getListByKey("answers").getStructureAt(0).getListByKey("arguments");d.clear();d.add(s.getListByKey("key"));o.add(s.getStructureByKey("originalValue"));a.fireChange(b);};f.QsRestDp=function(){};f.QsRestDp.prototype=new f.SxRestDp();f.QsRestDp.prototype._ff_c="QsRestDp";f.QsRestDp.create=function(r,d){var p=new f.QsRestDp();p.setupDp(r,d);return p;};f.QsRestDp.prototype.m_quasar=null;f.QsRestDp.prototype.setupDp=function(r,d){this.m_quasar=r;var n=d.getStringByKey(f.UiConstants.QSA_NAME);var e=d.getStringByKey(f.UiConstants.QSA_ENDPOINT);this.setupExt(n,e,this.m_quasar.getApplication());};f.QsRestDp.prototype.releaseObject=function(){this.m_quasar=null;f.SxRestDp.prototype.releaseObject.call(this);};f.QsRestDp.prototype.processInit=function(){this.updateData();};f.QsRestDp.prototype.getName=function(){return this.getDataProviderName();};f.QsRestDp.prototype.setName=function(n){this.setDataProviderName(n);};f.QsRestDp.prototype.setGlobalObjects=function(g){};f.InputControlContent=function(){};f.InputControlContent.prototype=new f.AbstractGlobalContent();f.InputControlContent.prototype._ff_c="InputControlContent";f.CustomCalcVarWidget=function(){};f.CustomCalcVarWidget.prototype=new f.CustomAbstractWidget();f.CustomCalcVarWidget.prototype._ff_c="CustomCalcVarWidget";f.CustomCalcVarWidget.prototype.getGlobalId=function(){return f.UiConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES;};f.CustomFieldSelectionWidget=function(){};f.CustomFieldSelectionWidget.prototype=new f.CustomAbstractWidget();f.CustomFieldSelectionWidget.prototype._ff_c="CustomFieldSelectionWidget";f.CustomFieldSelectionWidget.prototype.getGlobalId=function(){return f.UiConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS;};f.CustomPageFilterWidget=function(){};f.CustomPageFilterWidget.prototype=new f.CustomAbstractWidget();f.CustomPageFilterWidget.prototype._ff_c="CustomPageFilterWidget";f.CustomPageFilterWidget.prototype.getGlobalId=function(){return f.UiConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS;};f.QuasarEngine=function(){};f.QuasarEngine.prototype=new f.DfApplicationContext();f.QuasarEngine.prototype._ff_c="QuasarEngine";f.QuasarEngine.createEmbedded=function(a,n,b,c){var d=f.QuasarEngine.create(a);d.setDocumentByNativeJson(c);d.setNativeParent(n,b);var u=a.getUiManager();if(f.notNull(u)){u.invokeOnEventingThread(d);}return d;};f.QuasarEngine.create=function(a){var n=new f.QuasarEngine();n.setupEngine(a);return n;};f.QuasarEngine.prototype.m_messages=null;f.QuasarEngine.prototype.m_genesis=null;f.QuasarEngine.prototype.m_masterSystemName=null;f.QuasarEngine.prototype.m_document=null;f.QuasarEngine.prototype.m_file=null;f.QuasarEngine.prototype.m_fileLoadedListener=null;f.QuasarEngine.prototype.m_dataProviders=null;f.QuasarEngine.prototype.m_bindings=null;f.QuasarEngine.prototype.m_globalStyleClass=null;f.QuasarEngine.prototype.m_quasarMode=null;f.QuasarEngine.prototype.m_uiManager=null;f.QuasarEngine.prototype.m_nativeAnchorId=null;f.QuasarEngine.prototype.m_nativeAnchorObject=null;f.QuasarEngine.prototype.m_anchorGuid=null;f.QuasarEngine.prototype.m_globalLookupObjects=null;f.QuasarEngine.prototype.m_recursiveExtend=false;f.QuasarEngine.prototype.setupEngine=function(a){this.setupApplicationContext(a);this.m_messages=f.MessageManager.createMessageManagerExt(this.getSession());this.m_recursiveExtend=true;this.m_quasarMode=f.QsMode.PRODUCTION;};f.QuasarEngine.prototype.getLogSeverity=function(){return f.DfApplicationContext.prototype.getLogSeverity.call(this);};f.QuasarEngine.prototype.doExecute=function(){this.m_uiManager=this.getApplication().getUiManager();this.initializeUi(this.m_uiManager);};f.QuasarEngine.prototype.initializeUi=function(u){if(f.notNull(this.m_nativeAnchorId)||f.notNull(this.m_nativeAnchorObject)){this.m_anchorGuid=f.XGuid.getGuid();this.m_uiManager.setNativeAnchor(this.m_anchorGuid,this.m_nativeAnchorId,this.m_nativeAnchorObject);}var r;if(f.notNull(this.m_anchorGuid)){r=this.m_uiManager.getAnchorByName(this.m_anchorGuid);}else{r=this.m_uiManager.getAnchor();}var g=f.UiGenesis.create(r,f.UiItemPosition.CONTENT,f.UiOperation.SET,0,0);this.renderUi(g);};f.QuasarEngine.prototype.renderUi=function(g){this.buildUi(g);};f.QuasarEngine.prototype.buildUi=function(g){this.m_genesis=g;this.m_dataProviders=f.XList.create();this.m_bindings=f.XList.create();try{if(f.notNull(this.m_document)){this.renderDocument();}else if(f.notNull(this.m_file)){var a=g.newControl(f.UiType.ACTIVITY_INDICATOR);a.useMaxSpace();a.setText("Loading file...");g.setRoot(a);this.loadDocumentFromFile(this.m_file);}else{this.showErrorMessage("No document given");}}catch(e){this.showErrorMessage(f.XErrorHelper.convertExceptionToString(e));this.log(f.XException.getStackTrace(e,0));}};f.QuasarEngine.prototype.renderDocument=function(){var d=this.getDocument();if(this.m_messages.hasErrors()){this.showErrorMessage(this.m_messages.getSummary());}else{if(this.validateDocument(d)===false){this.showErrorMessage("Cannot render! Not a valid quasar document!");}else{if(d.containsKey(f.UiConstants.QSA_MODE)){this.m_quasarMode=f.QsMode.lookupWithDefault(d.getStringByKey(f.UiConstants.QSA_MODE),f.QsMode.PRODUCTION);}if(d.containsKey(f.UiConstants.QSA_MASTER_SYSTEM)){var t=d.getElementTypeByKey(f.UiConstants.QSA_MASTER_SYSTEM);if(t===f.PrElementType.STRING){this.m_masterSystemName=d.getStringByKey(f.UiConstants.QSA_MASTER_SYSTEM);}else if(t===f.PrElementType.STRUCTURE){var m=d.getStructureByKey(f.UiConstants.QSA_MASTER_SYSTEM);this.m_masterSystemName=m.getStringByKey(f.UiConstants.QSA_NAME);var s=m.getIntegerByKeyExt(f.UiConstants.QSA_MAX_SHARED_CONNECTIONS,-1);if(s!==-1&&f.XStringUtils.isNotNullAndNotEmpty(this.m_masterSystemName)){var c=this.getApplication().getConnectionPool();if(c.getSystemLandscape().getSystemDescription(this.m_masterSystemName)!==null){c.setMaximumSharedConnections(this.m_masterSystemName,s);}}}}if(d.containsKey(f.UiConstants.QSA_STYLE)){this.m_globalStyleClass=f.UiStyleClass.lookup(d.getStringByKey(f.UiConstants.QSA_STYLE));}this.m_globalLookupObjects=f.XHashMapByString.create();var g=d.getStructureByKey(f.UiConstants.QSA_GLOBAL_OBJECTS);if(f.notNull(g)){this.parseGlobalObjects(g);}var n=this.parseDocument(d,null);this.m_genesis.setRoot(n);this.initDataProviders();this.initBindings();this.bindGlobalObjects();}}};f.QuasarEngine.prototype.bindGlobalObjects=function(){var k=this.m_globalLookupObjects.getKeysAsReadOnlyListOfString();for(var i=0;i<k.size();i++){this.m_globalLookupObjects.getByKey(k.get(i)).setupDpsAndBindings(this.m_dataProviders,this.m_bindings);}};f.QuasarEngine.prototype.parseGlobalObjects=function(g){var k=g.getKeysAsReadOnlyListOfString();for(var i=0;i<k.size();i++){var a=k.get(i);var c=f.ContentParserRegistration.getCustomContentParser(a);if(f.notNull(c)){var b=c.parseContent(g.getByKey(a));this.m_globalLookupObjects.put(a,b);}}};f.QuasarEngine.prototype.showErrorMessage=function(t){if(f.notNull(this.m_genesis)){f.UiMessageUtils.showErrorWithMessage(this.m_genesis,t);}else{this.log("ERROR!");this.log(t);}};f.QuasarEngine.prototype.printQuasarParsingError=function(e){if(this.m_quasarMode===f.QsMode.DEVELOPMENT){this.showErrorMessage(e);throw f.XException.createRuntimeException(e);}else{this.logError(e);}};f.QuasarEngine.prototype.parseDocument=function(d,i){var a=d.getStructureByKey(f.UiConstants.QSA_CONTENT);if(f.isNull(a)){a=d;}var u=this.parseControl(a,i);var b=d.getListByKey(f.UiConstants.QSA_FLOATING_CONTROLS);if(f.notNull(b)){for(var h=0;h<b.size();h++){var c=b.getStructureAt(h);this.parseControl(c,null);}}var e=d.getListByKey(f.UiConstants.QSA_DATA_PROVIDERS);if(f.notNull(e)){for(var p=0;p<e.size();p++){var g=e.getStructureAt(p);this.parseDataprovider(g);}}var j=d.getStructureByKey(f.UiConstants.QSA_DATA_PROVIDER);if(f.notNull(j)){this.parseDataprovider(j);}var k=d.getListByKey(f.UiConstants.QSA_BINDINGS);if(f.notNull(k)){this.parseBindings(k);}return u;};f.QuasarEngine.prototype.parseBindings=function(b){for(var i=0;i<b.size();i++){var d=b.get(i);var a=this.parseBinding(d,false);this.m_bindings.add(a);}};f.QuasarEngine.prototype.parseControl=function(d,b){if(this.isPlatformSupported(d)===false){var c=d.getStringByKey(f.UiProperty.NAME.getName());if(f.XStringUtils.isNullOrEmpty(c)){this.log2("Current platform for the document element is not supported. Supported platforms: ",d.getStringByKey(f.UiConstants.QSA_SUPPORTED_PLATFORMS));}else{this.log4("Current platform for the document element with name ",c," is not supported. Supported platforms: ",d.getStringByKey(f.UiConstants.QSA_SUPPORTED_PLATFORMS));}return null;}var u=f.UiType.lookupUiType(d.getStringByKey(f.UiConstants.QSA_CTYPE));if(f.isNull(u)){u=b;}var e=d.getStringByKey(f.UiConstants.QSA_CUSTOM_CONTROL);var s=f.UiStyleClass.lookup(d.getStringByKey(f.UiConstants.QSA_STYLE));if(f.isNull(s)&&f.notNull(this.m_globalStyleClass)){s=this.m_globalStyleClass;}var t=d.getStringByKey(f.UiConstants.QSA_ID);var n=d.getStringByKey(f.UiConstants.QSA_NAME);var g=null;if(f.notNull(u)){g=this.m_genesis.newControlExt(u,s,t,n,null,null,null,-1,-1);if(f.isNull(g)){this.printQuasarParsingError(f.XStringUtils.concatenate2("Failed to create control with type: ",u.getName()));return null;}g.setCustomObject(d);var k=d.getKeysAsReadOnlyListOfString();var h=null;var j=null;var l=this;var o=f.SxEventScriptingDp.createListener(this.m_genesis.getUiManager(),this.getApplication().getOlapEnvironment());l=o;for(var i=0;i<k.size();i++){var p=k.get(i);if(f.XString.isEqual(f.UiConstants.QSA_ID,p)===false){if(f.XString.isEqual(f.UiConstants.QSA_DATA_PROVIDER,p)){var q=d.getStructureByKey(p);h=this.parseDataprovider(q);}else if(f.XString.isEqual(f.UiConstants.QSA_BINDING,p)){var r=d.getByKey(p);j=this.parseBinding(r,false);this.m_bindings.add(j);}else if(f.XString.isEqual(f.UiConstants.QSA_BINDINGS,p)){var v=d.getListByKey(p);for(var a=0;a<v.size();a++){var w=v.get(a);var x=this.parseBinding(w,false);x.setControl(g);this.m_bindings.add(x);}}else if(f.UiAllOperations.lookupListener(p)!==null){var y=f.UiAllOperations.lookupListener(p);y.executeRegisterListener(g,l);}else if(f.UiAllOperations.lookupSetterProperty(p)!==null){var z=f.UiUtils.getElementAsString(d,p);g.setPropertyStringValue(p,z);}else if(f.UiAggregation.lookup(p)!==null){var A=f.UiAggregation.lookup(p);if(g.hasAggregation(A)){var B=A.getAddOp();var C=d.getListByKey(p);if(f.notNull(C)&&C.size()>0){var D=B.getAggregationItemType();var E=A.isTypeOf(f.UiAggregation.ITEMS);if(E&&f.isNull(D)){D=g.getDefaultItemType();}for(var m=0;m<C.size();m++){var F=C.getStructureAt(m);var G=this.parseControl(F,D);if(f.notNull(G)){B.executeAddIntoAggregation(g,G);}}if(E){var H=d.getStringByKey(f.UiConstants.QSA_SELECTED_NAME);if(f.notNull(H)&&C.size()>0){g.setSelectedName(H);}}}}else{this.printQuasarParsingError(f.XStringUtils.concatenate4("The control type ",g.getUiType().getName()," does not have an aggregation with name ",p));}}}}var I=d.getStructureByKey(f.UiProperty.CONTENT.getName());if(f.notNull(I)){var J=this.parseDocument(I,null);g.setContent(J);}var K=d.getStructureByKey(f.UiProperty.FOOTER.getName());if(f.notNull(K)){var L=this.parseDocument(K,null);g.setFooter(L);}var M=d.getStructureByKey(f.UiProperty.SUB_HEADER.getName());if(f.notNull(M)){var N=this.parseDocument(M,null);g.setSubHeader(N);}var O=d.getStructureByKey(f.UiProperty.HEADER.getName());if(f.notNull(O)){var P=this.parseDocument(O,null);g.setHeader(P);}if(f.notNull(j)){j.setControl(g);j.setDataprovider(h);}}else if(f.notNull(e)){var Q=f.CustomControlRegistration.getCustomControl(e);if(f.notNull(Q)){g=Q.createCustomControl(this.m_genesis,d,this.m_globalLookupObjects);}else{g=this.m_genesis.newControlExt(f.UiType.LABEL,s,t,n,null,null,null,-1,-1);g.setText(f.XStringUtils.concatenate2("Could not find custom control with name: ",e));}}else{var R=d.getStringByKey(f.UiConstants.QSA_CTYPE);if(f.XStringUtils.isNullOrEmpty(R)){this.printQuasarParsingError("A CType was not specified, cannot create control!");}else{this.printQuasarParsingError(f.XStringUtils.concatenate3("Cannot find a UiType with the name ",R,". The specified control does not exist!"));}}return g;};f.QuasarEngine.prototype.isPlatformSupported=function(d){var a=d.getStringByKey(f.UiConstants.QSA_SUPPORTED_PLATFORMS);var s=f.XStringTokenizer.splitString(a,",");var u=this.m_genesis.getUiManager();if(f.notNull(s)&&f.notNull(u)){var b=u.getPlatform();var p=s.getIterator();while(p.hasNext()){var t=p.next();var c=f.XPlatform.lookup(t);if(f.notNull(c)&&b.isTypeOf(c)===true){return true;}}return false;}return true;};f.QuasarEngine.prototype.parseDataprovider=function(d){var a=d.getStringByKey(f.UiConstants.QSA_TYPE);var b=f.QsDpType.lookupWithDefault(a,f.QsDpType.OLAP);var c=f.QsDataproviderFactory.createDataprovider(b,this,d);c.setGlobalObjects(this.m_globalLookupObjects);this.m_dataProviders.add(c);return c;};f.QuasarEngine.prototype.parseBinding=function(d,i){var b=f.SxBinding.create(this,i);var c=null;if(d.isStructure()){var a=d;c=a.getStringByKey(f.UiConstants.QSA_CACHE_ID);if(f.XStringUtils.isNullOrEmpty(c)){var e=a.getStringByKey(f.UiConstants.QSA_SOURCE);var g=a.getStringByKey(f.UiConstants.QSA_TYPE);c=f.XStringUtils.concatenate2(e,g);}b.setCacheIdentifier(c);var s=a.getStringByKey(f.UiConstants.QSA_SOURCE);b.setSource(s);var t=a.getStringByKey(f.UiConstants.QSA_TARGET);if(f.notNull(t)){b.setTarget(t);}var h=a.getStringByKey(f.UiConstants.QSA_TYPE);if(f.notNull(h)){var j=f.SemanticBindingType.lookup(h);b.setType(j);}}else if(d.isString()){var k=d;var l=k.getString();b.setSource(l);c=l;}if(f.notNull(c)){c=this.replaceAllNonAlphaNum(c);b.setCacheIdentifier(c);}return b;};f.QuasarEngine.prototype.replaceAllNonAlphaNum=function(s){var a=f.XString.size(s);var b=f.XStringBuffer.create();for(var i=0;i<a;i++){var c=f.XString.getCharAt(s,i);if((c>=65&&c<=90||c>=97&&c<=122||c>=48&&c<=57||c===95)===false){c=95;}b.appendChar(c);}return b.toString();};f.QuasarEngine.prototype.initDataProviders=function(){for(var i=0;i<this.m_dataProviders.size();i++){var d=this.m_dataProviders.get(i);d.processInit();}};f.QuasarEngine.prototype.initBindings=function(){for(var j=0;j<this.m_bindings.size();j++){var b=this.m_bindings.get(j);b.processInit();}};f.QuasarEngine.prototype.sendEventWithName=function(e,a){if(f.isNull(a)){throw f.XException.createRuntimeException("Missing event! Please specify an event!");}var c=e.getControl();var d=c.getCustomObject();var s=d.getStringByKey(a.getName());var i=f.ScriptEngine.create();i.setVmCallback(this);i.setCustomObject("event",e);i.setCustomObject("uicontext",c);i.setInitialRegister(c);i.compile(s);i.execute();};f.QuasarEngine.prototype.onSelect=function(e){this.sendEventWithName(e,f.UiEvent.ON_SELECT);};f.QuasarEngine.prototype.onSelectionChange=function(e){this.sendEventWithName(e,f.UiEvent.ON_SELECTION_CHANGE);};f.QuasarEngine.prototype.onChange=function(e){this.sendEventWithName(e,f.UiEvent.ON_CHANGE);};f.QuasarEngine.prototype.onLiveChange=function(e){this.sendEventWithName(e,f.UiEvent.ON_LIVE_CHANGE);};f.QuasarEngine.prototype.onDelete=function(e){this.sendEventWithName(e,f.UiEvent.ON_DELETE);};f.QuasarEngine.prototype.onDetailPress=function(e){this.sendEventWithName(e,f.UiEvent.ON_DETAIL_PRESS);};f.QuasarEngine.prototype.onMove=function(e){this.sendEventWithName(e,f.UiEvent.ON_MOVE);};f.QuasarEngine.prototype.onMoveStart=function(e){this.sendEventWithName(e,f.UiEvent.ON_MOVE_START);};f.QuasarEngine.prototype.onMoveEnd=function(e){this.sendEventWithName(e,f.UiEvent.ON_MOVE_END);};f.QuasarEngine.prototype.onResize=function(e){this.sendEventWithName(e,f.UiEvent.ON_RESIZE);};f.QuasarEngine.prototype.onSuggestionSelect=function(e){this.sendEventWithName(e,f.UiEvent.ON_SUGGESTION_SELECT);};f.QuasarEngine.prototype.onScroll=function(e){this.sendEventWithName(e,f.UiEvent.ON_SCROLL);};f.QuasarEngine.prototype.onScrollLoad=function(e){this.sendEventWithName(e,f.UiEvent.ON_SCROLL_LOAD);};f.QuasarEngine.prototype.onHover=function(e){this.sendEventWithName(e,f.UiEvent.ON_HOVER);};f.QuasarEngine.prototype.onHoverEnd=function(e){this.sendEventWithName(e,f.UiEvent.ON_HOVER_END);};f.QuasarEngine.prototype.onPaste=function(e){this.sendEventWithName(e,f.UiEvent.ON_PASTE);};f.QuasarEngine.prototype.onEnter=function(e){this.sendEventWithName(e,f.UiEvent.ON_ENTER);};f.QuasarEngine.prototype.onPress=function(e){this.sendEventWithName(e,f.UiEvent.ON_PRESS);};f.QuasarEngine.prototype.onEditingBegin=function(e){this.sendEventWithName(e,f.UiEvent.ON_EDITING_BEGIN);};f.QuasarEngine.prototype.onEditingEnd=function(e){this.sendEventWithName(e,f.UiEvent.ON_EDITING_END);};f.QuasarEngine.prototype.onBack=function(e){this.sendEventWithName(e,f.UiEvent.ON_BACK);};f.QuasarEngine.prototype.onRefresh=function(e){this.sendEventWithName(e,f.UiEvent.ON_REFRESH);};f.QuasarEngine.prototype.onLoadFinished=function(e){this.sendEventWithName(e,f.UiEvent.ON_LOAD_FINISHED);};f.QuasarEngine.prototype.onOpen=function(e){this.sendEventWithName(e,f.UiEvent.ON_OPEN);};f.QuasarEngine.prototype.onClose=function(e){this.sendEventWithName(e,f.UiEvent.ON_CLOSE);};f.QuasarEngine.prototype.onBeforeOpen=function(e){this.sendEventWithName(e,f.UiEvent.ON_BEFORE_OPEN);};f.QuasarEngine.prototype.onBeforeClose=function(e){this.sendEventWithName(e,f.UiEvent.ON_BEFORE_CLOSE);};f.QuasarEngine.prototype.onAfterOpen=function(e){this.sendEventWithName(e,f.UiEvent.ON_AFTER_OPEN);};f.QuasarEngine.prototype.onAfterClose=function(e){this.sendEventWithName(e,f.UiEvent.ON_AFTER_CLOSE);};f.QuasarEngine.prototype.onClick=function(e){this.sendEventWithName(e,f.UiEvent.ON_CLICK);};f.QuasarEngine.prototype.onContextMenu=function(e){this.sendEventWithName(e,f.UiEvent.ON_CONTEXT_MENU);};f.QuasarEngine.prototype.onDoubleClick=function(e){this.sendEventWithName(e,f.UiEvent.ON_DOUBLE_CLICK);};f.QuasarEngine.prototype.onCollapse=function(e){this.sendEventWithName(e,f.UiEvent.ON_COLLAPSE);};f.QuasarEngine.prototype.onExpand=function(e){this.sendEventWithName(e,f.UiEvent.ON_EXPAND);};f.QuasarEngine.prototype.onSelectionFinish=function(e){this.sendEventWithName(e,f.UiEvent.ON_SELECTION_FINISH);};f.QuasarEngine.prototype.onSearch=function(e){this.sendEventWithName(e,f.UiEvent.ON_SEARCH);};f.QuasarEngine.prototype.onButtonPress=function(e){this.sendEventWithName(e,f.UiEvent.ON_BUTTON_PRESS);};f.QuasarEngine.prototype.onError=function(e){this.sendEventWithName(e,f.UiEvent.ON_ERROR);};f.QuasarEngine.prototype.onReadLineFinished=function(e){this.sendEventWithName(e,f.UiEvent.ON_READ_LINE_FINISHED);};f.QuasarEngine.prototype.onExecute=function(e){this.sendEventWithName(e,f.UiEvent.ON_EXECUTE);};f.QuasarEngine.prototype.onTerminate=function(e){this.sendEventWithName(e,f.UiEvent.ON_TERMINATE);};f.QuasarEngine.prototype.onFileDrop=function(e){this.sendEventWithName(e,f.UiEvent.ON_FILE_DROP);};f.QuasarEngine.prototype.onDrop=function(e){this.sendEventWithName(e,f.UiEvent.ON_DROP);};f.QuasarEngine.prototype.onItemClose=function(e){this.sendEventWithName(e,f.UiEvent.ON_ITEM_CLOSE);};f.QuasarEngine.prototype.onItemSelect=function(e){this.sendEventWithName(e,f.UiEvent.ON_ITEM_SELECT);};f.QuasarEngine.prototype.onTableDragAndDrop=function(e){this.sendEventWithName(e,f.UiEvent.ON_TABLE_DRAG_AND_DROP);};f.QuasarEngine.prototype.beforeScriptExecution=function(i){};f.QuasarEngine.prototype.afterScriptExecution=function(i){};f.QuasarEngine.prototype.nativeCall=function(i,n,r,s,p){var a=this.fillParameters(s,p);if(f.XString.isEqual(f.UiConstants.QSA_DOLLAR,n)){var b=a.getStringAtExt(0,null);var c=this.m_genesis.getUiManager().select(b);return c;}else if(f.XString.isEqual(f.UiConstants.QSA_DOLLAR_D,n)){var d=a.getStringAtExt(0,null);var o=this.getApplication().getOlapEnvironment();var e=o.select(d);return e;}else{var g=r;if(f.isNull(g)){g=i.getCustomObject("uicontext");}if(f.isNull(g)){g=i.getCustomObject("dpcontext");}var h=g.getComponentType();if(f.notNull(h)){if(h.isTypeOf(f.XComponentType._UI)){var u=g;var j=f.UiAllOperations.lookupOp(n);if(f.notNull(j)){return j.executeOperation(null,u,a,0);}}else if(h.isTypeOf(f.OlapComponentType.CONVENIENCE_CMDS)){var k=g;var l=f.QFactory.createReflectionCommand(n,null,null,null);if(f.notNull(l)){var m=l.executeOnContext(k,a);return m;}}}return null;}};f.QuasarEngine.prototype.fillParameters=function(s,p){var a=f.PrFactory.createList();var o=s.size()-p;var b;var e;var v;for(var i=0;i<p;i++){b=s.get(o+i);if(f.notNull(b)){e=b;v=e.getComponentType();if(v===f.XValueType.STRING){a.addString(e.toString());}else if(v===f.XValueType.BOOLEAN){a.addBoolean(e.getBoolean());}else if(v===f.XValueType.INTEGER){a.addInteger(e.getInteger());}else if(v.isTypeOf(f.XComponentType._UI)){a.addString(e.toString());}}else{a.add(null);}}return a;};f.QuasarEngine.prototype.getMasterSystemName=function(){return this.m_masterSystemName;};f.QuasarEngine.prototype.setDocumentByNativeJson=function(n){var p=f.JsonParserFactory.newInstance();var a=p.convertFromNative(n);f.XObjectExt.release(p);var d=f.PrUtils.deepCopyElement(a);if(f.notNull(d)&&d.isStructure()){this.setDocument(d);}};f.QuasarEngine.prototype.setDocumentByFile=function(a,b){this.m_file=a;this.m_fileLoadedListener=b;};f.QuasarEngine.prototype.loadDocumentFromFile=function(a){if(f.notNull(a)&&f.notNull(this.m_genesis)){if(a.isExisting()){a.processLoad(f.SyncType.NON_BLOCKING,this,null,f.CompressionType.NONE);}else{this.m_messages.addError(0,f.XStringUtils.concatenate2("File does not exist: ",a.getNativePath()));}}return null;};f.QuasarEngine.prototype.validateDocument=function(d){if(f.isNull(d)){return false;}if(d.isStructure()===false){return false;}if(d.containsKey(f.UiConstants.QSA_CONTENT)===false){return false;}return true;};f.QuasarEngine.prototype.onFileLoaded=function(e,a,b,c){if(f.notNull(this.m_fileLoadedListener)){this.m_fileLoadedListener.onFileLoaded(e,a,b,c);}if(e.isValid()){if(f.notNull(b)){var s=b.getString();var E=this.getSession().getEnvironment();var v=this.getSession().getEnvironment().getVariableNames();for(var i=0;i<v.size();++i){var n=v.get(i);var V=E.getVariable(n);var r=f.XStringUtils.concatenate3("${",n,"}");s=f.XString.replace(s,r,V);}var p=f.JsonParserFactory.newInstance();var d=p.parse(s);var j=d;if(j.isProxy()){j=j.clone();}if(p.hasErrors()){this.m_messages.copyAllMessages(p);f.XObjectExt.release(p);}else{f.XObjectExt.release(p);if(f.notNull(j)&&j.isStructure()){if(this.m_recursiveExtend){var g=this.m_file.getParent();if(f.notNull(g)){j=this.recursiveExtend(g,j);}}this.setDocument(j);this.renderDocument();}}}else{this.showErrorMessage("Something went wrong! File content is empty!");}}else{this.showErrorMessage("Error while fetching the specified file!");}};f.QuasarEngine.prototype.setDocument=function(d){this.m_document=d;};f.QuasarEngine.prototype.getDocument=function(){return this.m_document;};f.QuasarEngine.prototype.recursiveExtend=function(d,e){if(f.notNull(e)){if(e.isStructure()){var s=e;var a=s.getKeysAsIteratorOfString();while(a.hasNext()){var k=a.next();var c=s.getByKey(k);var n=this.recursiveExtend(d,c);if(n!==c){s.put(k,n);}}var r=s.getStringByKey(f.UiConstants.QSA_RESOURCE_REF);if(f.notNull(r)){var b=d.newChild(r);var g=this.loadDocumentFromFile(b);if(f.notNull(g)&&g.isStructure()){var h=g;a=s.getKeysAsIteratorOfString();while(a.hasNext()){var j=a.next();var l=s.getByKey(j);h.put(j,l);}return g;}}}else if(e.isList()){var m=e;for(var i=0;i<m.size();i++){var o=m.get(i);var p=this.recursiveExtend(d,o);if(p!==o){m.set(i,p);}}}}return e;};f.QuasarEngine.prototype.setNativeParent=function(n,a){this.m_nativeAnchorId=n;this.m_nativeAnchorObject=a;};f.QuasarEngine.prototype.clearBindings=function(){if(f.notNull(this.m_bindings)){for(var j=0;j<this.m_bindings.size();j++){var b=this.m_bindings.get(j);f.XObjectExt.release(b);}this.m_bindings.clear();}if(f.notNull(this.m_dataProviders)){for(var i=0;i<this.m_dataProviders.size();i++){var d=this.m_dataProviders.get(i);f.XObjectExt.release(d);}this.m_dataProviders.clear();}};f.QuasarEngine.prototype.reset=function(){this.clearBindings();if(f.notNull(this.m_genesis)){this.m_genesis.setRoot(null);}};f.QuasarEngine.prototype.releaseObject=function(){if(f.notNull(this.m_genesis)){this.m_genesis.setRoot(null);}this.clearBindings();this.m_genesis=null;this.m_document=null;this.m_messages=f.XObjectExt.release(this.m_messages);this.m_uiManager=f.XObjectExt.release(this.m_uiManager);this.m_dataProviders=f.XObjectExt.release(this.m_dataProviders);this.m_bindings=f.XObjectExt.release(this.m_bindings);this.m_file=null;this.m_fileLoadedListener=null;f.DfApplicationContext.prototype.releaseObject.call(this);};f.SxDataProvider=function(){};f.SxDataProvider.prototype=new f.XComponent();f.SxDataProvider.prototype._ff_c="SxDataProvider";f.SxDataProvider.create=function(r){var p=new f.SxDataProvider();p.setupDp(r);return p;};f.SxDataProvider.prototype.m_quasar=null;f.SxDataProvider.prototype.m_dataSource=null;f.SxDataProvider.prototype.m_dataProviderName=null;f.SxDataProvider.prototype.m_system=null;f.SxDataProvider.prototype.m_serviceConfig=null;f.SxDataProvider.prototype.m_vizDef=null;f.SxDataProvider.prototype.m_globalDef=null;f.SxDataProvider.prototype.m_queryDef=null;f.SxDataProvider.prototype.setupDp=function(r){this.setup();this.m_quasar=r;};f.SxDataProvider.prototype.releaseObject=function(){this.m_serviceConfig=f.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;f.XComponent.prototype.releaseObject.call(this);};f.SxDataProvider.prototype.processInit=function(){this.m_serviceConfig=f.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(f.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system);}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName());}this.m_serviceConfig.setDataSourceByName(this.m_dataSource);var u=f.PrFactory.createStructure();if(f.notNull(this.m_vizDef)){u.put(f.UiConstants.QSA_VIZ_DEF,this.m_vizDef);}if(f.notNull(this.m_globalDef)){u.put(f.UiConstants.QSA_GLOBAL_DEF,this.m_globalDef);}if(f.notNull(this.m_queryDef)){u.putString(f.UiConstants.QSA_FF_QUERY,this.m_queryDef);}this.m_serviceConfig.setDefinitionByStructure(f.QModelFormat.UQM,u);};f.SxDataProvider.prototype.getComponentType=function(){return null;};f.SxDataProvider.prototype.getName=function(){return this.m_dataProviderName;};f.SxDataProvider.prototype.setName=function(n){this.m_dataProviderName=n;};f.SxDataProvider.prototype.setSystem=function(s){this.m_system=s;};f.SxDataProvider.prototype.setDataSource=function(d){this.m_dataSource=d;};f.SxDataProvider.prototype.setVizDef=function(v){this.m_vizDef=v;};f.SxDataProvider.prototype.setGlobalDef=function(g){this.m_globalDef=g;};f.SxDataProvider.prototype.setQueryDefinition=function(q){this.m_queryDef=q;};f.QsOlapDp=function(){};f.QsOlapDp.prototype=new f.XComponent();f.QsOlapDp.prototype._ff_c="QsOlapDp";f.QsOlapDp.create=function(r,d){var p=new f.QsOlapDp();p.setupDp(r,d);return p;};f.QsOlapDp.prototype.m_quasar=null;f.QsOlapDp.prototype.m_dataSource=null;f.QsOlapDp.prototype.m_dataProviderName=null;f.QsOlapDp.prototype.m_system=null;f.QsOlapDp.prototype.m_serviceConfig=null;f.QsOlapDp.prototype.m_vizDef=null;f.QsOlapDp.prototype.m_globalDef=null;f.QsOlapDp.prototype.m_globalObjects=null;f.QsOlapDp.prototype.m_queryDef=null;f.QsOlapDp.prototype.m_modelFormat=null;f.QsOlapDp.prototype.m_queryDocument=null;f.QsOlapDp.prototype.m_variables=null;f.QsOlapDp.prototype.m_queryMode=null;f.QsOlapDp.prototype.setupDp=function(r,d){this.setup();this.m_quasar=r;var a=d.getStringByKey(f.UiConstants.QSA_DATA_SOURCE);if(f.XStringUtils.isNotNullAndNotEmpty(a)){this.setDataSource(a);}var n=d.getStringByKey(f.UiConstants.QSA_NAME);this.setName(n);var s=d.getStringByKey(f.UiConstants.QSA_SYSTEM);if(f.notNull(s)){this.setSystem(s);}var m=d.getStringByKey("ModelFormat");var b=null;if(f.XStringUtils.isNotNullAndNotEmpty(m)){b=f.ContentType.lookup(m);}var v=d.getStructureByKey(f.UiConstants.QSA_VIZ_DEF);if(f.isNull(b)){if(f.notNull(v)){b=f.QModelFormat.UQM;}}if(b===f.QModelFormat.UQM){this.setVizDef(v);var c=d.getListByKey(f.UiConstants.VARIABLES);this.setVariables(c);var g=d.getStructureByKey(f.UiConstants.QSA_GLOBAL_DEF);var e=d.getStructureByKey(f.UiConstants.QSA_GLOBAL_DEFS);if(f.isNull(g)&&f.notNull(e)){g=e;}this.setGlobalDef(g);var h=d.getStringByKey(f.UiConstants.QSA_FF_QUERY);if(f.notNull(h)){this.setQueryDefinition(h,f.QModelFormat.UQM);}this.m_queryMode=f.QueryManagerMode.DEFAULT;}else if(f.notNull(b)){var i=d.getStructureByKey("QueryDocument");this.setQueryDocument(i,b);if(b.isTypeOf(f.QModelFormat.INA_DATA)){this.m_queryMode=f.QueryManagerMode.RAW_QUERY;}}this.m_modelFormat=b;};f.QsOlapDp.prototype.setVariables=function(v){this.m_variables=v;};f.QsOlapDp.prototype.getVariables=function(){return this.m_variables;};f.QsOlapDp.prototype.releaseObject=function(){this.m_serviceConfig=f.XObjectExt.release(this.m_serviceConfig);this.m_quasar=null;f.XComponent.prototype.releaseObject.call(this);};f.QsOlapDp.prototype.reinit=function(){var q=this.m_serviceConfig.getQueryManager();var a=q.getQueryModel();if(f.notNull(a)){a.stopEventing();q.resetPreparation();var v=a.getVizManager();var b=v.getVizDefinitions();b.clear();b.stopEventing();a.resumeEventing();if(b.isEventingStopped()){b.resumeEventing();}if(v.isEventingStopped()){v.resumeEventing();}b._notifyNodeChanged();}};f.QsOlapDp.prototype.processInit=function(){this.m_serviceConfig=f.QueryServiceConfig.create(this.m_quasar.getApplication());this.m_serviceConfig.setName(this.m_dataProviderName);this.m_serviceConfig.setUseAsDataProvider(true);if(f.notNull(this.m_system)){this.m_serviceConfig.setSystemName(this.m_system);}else{this.m_serviceConfig.setSystemName(this.m_quasar.getMasterSystemName());}if(f.notNull(this.m_dataSource)){this.m_serviceConfig.setDataSourceByName(this.m_dataSource);}if(this.m_modelFormat===f.QModelFormat.UQM){var u=f.PrFactory.createStructure();if(f.notNull(this.m_vizDef)){u.put(f.UiConstants.QSA_VIZ_DEF,this.m_vizDef);}if(f.notNull(this.m_globalDef)){u.put(f.UiConstants.QSA_GLOBAL_DEF,this.m_globalDef);}if(f.notNull(this.m_globalObjects)){var g=this.m_globalObjects.getKeysAsReadOnlyListOfString();var a=u.putNewStructure(f.UiConstants.QSA_GLOBAL_OBJECTS);for(var i=0;i<g.size();i++){var k=g.get(i);a.put(k,this.m_globalObjects.getByKey(k).getContent());}}u.putStringNotNullAndNotEmpty("dpName",this.getName());if(f.notNull(this.m_queryDef)){u.putString(f.UiConstants.QSA_FF_QUERY,this.m_queryDef);}if(f.notNull(this.m_variables)){u.put(f.UiConstants.VARIABLES,this.m_variables);}this.m_serviceConfig.setDefinitionByStructure(f.QModelFormat.UQM,u);}else if(f.notNull(this.m_modelFormat)){this.m_serviceConfig.setDefinitionByStructure(this.m_modelFormat,this.m_queryDocument);}this.m_serviceConfig.setMode(this.m_queryMode);};f.QsOlapDp.prototype.getComponentType=function(){return null;};f.QsOlapDp.prototype.getName=function(){return this.m_dataProviderName;};f.QsOlapDp.prototype.setName=function(n){this.m_dataProviderName=n;};f.QsOlapDp.prototype.setSystem=function(s){this.m_system=s;};f.QsOlapDp.prototype.setDataSource=function(d){this.m_dataSource=d;};f.QsOlapDp.prototype.setGlobalObjects=function(g){this.m_globalObjects=g;};f.QsOlapDp.prototype.setVizDef=function(v){this.m_vizDef=v;};f.QsOlapDp.prototype.setGlobalDef=function(g){this.m_globalDef=g;};f.QsOlapDp.prototype.setQueryDefinition=function(q,m){this.m_queryDef=q;this.m_modelFormat=m;};f.QsOlapDp.prototype.setQueryDocument=function(q,m){this.m_queryDocument=q;this.m_modelFormat=m;};f.SxEventScriptingDp=function(){};f.SxEventScriptingDp.prototype=new f.SxEventScripting();f.SxEventScriptingDp.prototype._ff_c="SxEventScriptingDp";f.SxEventScriptingDp.createListener=function(u,o){var n=new f.SxEventScriptingDp();n.setupEventScriptingDp(u,o);return n;};f.SxEventScriptingDp.prototype.m_olapEnvironment=null;f.SxEventScriptingDp.prototype.setupEventScriptingDp=function(u,o){f.SxEventScripting.prototype.setupEventScripting.call(this,u,null);this.m_olapEnvironment=o;};f.SxEventScriptingDp.prototype.executeByKeyword=function(n,p,e){if(f.XString.isEqual(f.UiConstants.QSA_DOLLAR_D,n)){var s=p.getStringAtExt(0,null);var c=this.m_olapEnvironment.select(s);e.setBoolean(true);return c;}return f.SxEventScripting.prototype.executeByKeyword.call(this,n,p,e);};f.SxEventScriptingDp.prototype.lookupComponent=function(i,c){var t=f.SxEventScripting.prototype.lookupComponent.call(this,i,c);if(f.isNull(t)){t=i.getCustomObject("dpcontext");}return t;};f.SxEventScriptingDp.prototype.executeOperation=function(c,a,n,p){var r=null;if(c.isTypeOf(f.OlapComponentType.CONVENIENCE_CMDS)){var d=a;var b=f.QFactory.createReflectionCommand(n,null,null,null);if(f.notNull(b)){r=b.executeOnContext(d,p);}}else{r=f.SxEventScripting.prototype.executeOperation.call(this,c,a,n,p);}return r;};f.QuasarProgram=function(){};f.QuasarProgram.prototype=new f.DfUiProgram();f.QuasarProgram.prototype._ff_c="QuasarProgram";f.QuasarProgram.DEFAULT_PROGRAM_NAME="Quasar";f.QuasarProgram.createRunner=function(){var r=f.KernelBoot.createByName(f.QuasarProgram.DEFAULT_PROGRAM_NAME);return r;};f.QuasarProgram.createQuasar=function(a,s,n,q,b){var t=a;if(f.notNull(t)){t=t.newSubApplication(null);}var c=new f.QuasarProgram();c.setInitialSystemType(s);c.setApplication(t);c.evalArguments();c.initializeProgram();c.m_quasarTemplateNative=n;c.m_quasarTemplate=q;c.m_quasarTemplateFile=b;return c;};f.QuasarProgram.prototype.m_quasarTemplateNative=null;f.QuasarProgram.prototype.m_quasarTemplate=null;f.QuasarProgram.prototype.m_quasarTemplateFile=null;f.QuasarProgram.prototype.m_core=null;f.QuasarProgram.prototype.m_subApplication=null;f.QuasarProgram.prototype.newProgram=function(){var p=new f.QuasarProgram();p.setup();return p;};f.QuasarProgram.prototype.doSetupProgramMetadata=function(m){f.DfUiProgram.prototype.doSetupProgramMetadata.call(this,m);m.addParameter(f.DfProgram.PARAM_FILE,"The file");};f.QuasarProgram.prototype.evalArguments=function(){f.DfUiProgram.prototype.evalArguments.call(this);};f.QuasarProgram.prototype.initializeProgram=function(){f.DfUiProgram.prototype.initializeProgram.call(this);};f.QuasarProgram.prototype.releaseObject=function(){this.m_quasarTemplateNative=null;this.m_quasarTemplateFile=null;this.m_quasarTemplate=null;this.m_subApplication=f.XObjectExt.release(this.m_subApplication);this.m_core=f.XObjectExt.release(this.m_core);f.DfUiProgram.prototype.releaseObject.call(this);};f.QuasarProgram.prototype.getLogSeverity=function(){return f.DfUiProgram.prototype.getLogSeverity.call(this);};f.QuasarProgram.prototype.getMenuBarDisplayName=function(){return"Quasar";};f.QuasarProgram.prototype.buildUi=function(g){f.DfUiProgram.prototype.buildUi.call(this,g);this.resolveArgs();this.m_core=f.QuasarEngine.create(this.getApplication());if(f.notNull(this.m_quasarTemplateNative)){this.m_core.setDocumentByNativeJson(this.m_quasarTemplateNative);}else if(f.notNull(this.m_quasarTemplate)){this.m_core.setDocument(this.m_quasarTemplate);}else{if(f.notNull(this.m_quasarTemplateFile)){this.m_core.setDocumentByFile(this.m_quasarTemplateFile,null);}else{this.log("Core is not initialized due to missing document");}}this.m_core.buildUi(g);};f.QuasarProgram.prototype.resolveArgs=function(){var i=this.getArgumentStructure();var b=f.XStringBuffer.create().append("Quasar");if(f.notNull(i)){var n=i.getStringByKey(f.DfProgram.PARAM_FILE);if(f.notNull(n)){var s=this.getSession();this.m_quasarTemplateFile=f.XFile.createExt(s,n,f.PathFormat.AUTO_DETECT,f.VarResolveMode.DOLLAR);if(this.m_quasarTemplateFile.isExisting()===false){this.log2("File does not exist: ",this.m_quasarTemplateFile.getTargetUriPath());}b.append("@").append(this.m_quasarTemplateFile.getName());}}this.setTitle(b.toString());};f.QuasarProgram.prototype.reset=function(){if(f.notNull(this.m_core)){this.m_core.reset();}this.buildUi(this.m_genesis);};f.QuasarProgram.prototype.setFile=function(a){this.m_quasarTemplateFile=a;};f.QsDpType=function(){};f.QsDpType.prototype=new f.UiAbstractConstant();f.QsDpType.prototype._ff_c="QsDpType";f.QsDpType.OLAP=null;f.QsDpType.REST=null;f.QsDpType.s_lookup=null;f.QsDpType.staticSetup=function(){f.QsDpType.s_lookup=f.XHashMapByString.create();f.QsDpType.OLAP=f.QsDpType.create("Olap");f.QsDpType.REST=f.QsDpType.create("Rest");};f.QsDpType.create=function(n){return f.UiAbstractConstant.createUiConstant(new f.QsDpType(),n,f.QsDpType.s_lookup);};f.QsDpType.lookup=function(n){return f.QsDpType.s_lookup.getByKey(n);};f.QsDpType.lookupWithDefault=function(n,d){var t=f.QsDpType.s_lookup.getByKey(n);if(f.notNull(t)){return t;}return d;};f.QsMode=function(){};f.QsMode.prototype=new f.UiAbstractConstant();f.QsMode.prototype._ff_c="QsMode";f.QsMode.DEVELOPMENT=null;f.QsMode.PRODUCTION=null;f.QsMode.s_lookup=null;f.QsMode.staticSetup=function(){f.QsMode.s_lookup=f.XHashMapByString.create();f.QsMode.DEVELOPMENT=f.QsMode.create("Development");f.QsMode.PRODUCTION=f.QsMode.create("Production");};f.QsMode.create=function(n){return f.UiAbstractConstant.createUiConstant(new f.QsMode(),n,f.QsMode.s_lookup);};f.QsMode.lookup=function(n){return f.QsMode.s_lookup.getByKey(n);};f.QsMode.lookupWithDefault=function(n,d){var t=f.QsMode.s_lookup.getByKey(n);if(f.notNull(t)){return t;}return d;};f.QuasarModule=function(){};f.QuasarModule.prototype=new f.DfModule();f.QuasarModule.prototype._ff_c="QuasarModule";f.QuasarModule.s_module=null;f.QuasarModule.getInstance=function(){if(f.isNull(f.QuasarModule.s_module)){f.DfModule.checkInitialized(f.UiRemoteModule.getInstance());f.QuasarModule.s_module=f.DfModule.startExt(new f.QuasarModule());f.QsMode.staticSetup();f.QsDpType.staticSetup();f.QsDataproviderFactory.staticSetup();f.QsOlapDpFactory.staticSetupFactory();f.QsRestDpFactory.staticSetupFactory();f.ProgramRegistration.setProgramFactory(f.QuasarProgram.DEFAULT_PROGRAM_NAME,new f.QuasarProgram());f.ContentParserRegistration.staticSetup();f.ContentParserRegistration.setCustomContentParser(f.UiConstants.QSA_GLOBAL_OBJECTS_FIELD_SELECTIONS,new f.FieldSelectionParser());f.ContentParserRegistration.setCustomContentParser(f.UiConstants.QSA_GLOBAL_OBJECTS_STORY_FILTERS,new f.StoryFilterParser());f.ContentParserRegistration.setCustomContentParser(f.UiConstants.QSA_GLOBAL_OBJECTS_PAGE_FILTERS,new f.PageFilterParser());f.ContentParserRegistration.setCustomContentParser(f.UiConstants.QSA_GLOBAL_OBJECTS_CALCULATION_VARIABLES,new f.DfContentParser());f.ContentParserRegistration.setCustomContentParser(f.UiConstants.QSA_GLOBAL_OBJECTS_CALCULATIONS,new f.DfContentParser());f.CustomControlRegistration.setCustomControl("FieldSelectionInputControl",new f.CustomFieldSelectionWidget());f.CustomControlRegistration.setCustomControl("PageFilter",new f.CustomPageFilterWidget());f.CustomControlRegistration.setCustomControl("CalculationInputControl",new f.CustomCalcVarWidget());f.DfModule.stopExt(f.QuasarModule.s_module);}return f.QuasarModule.s_module;};f.QuasarModule.prototype.getName=function(){return"ff8000.quasar";};f.QuasarModule.getInstance();return sap.firefly;});
