/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff4394.olap.serialization"],function(f){"use strict";f.XCommandUtil={updateExtendedDimensionPackages:function(e,a){if(!f.XCollectionUtils.hasElements(e)||!f.XCollectionUtils.hasElements(a)){return;}var b=e.size();for(var i=0;i<b;i++){var c=e.get(i);var d=f.XCommandUtil.getExtDimInfoByName(c.getName(),a);if(f.notNull(d)){var n=d.getStructureByKey("dataSource").getStringByKey("packageName");var g=e.get(i).getDataSource();g.setPackageName(n);}}},getExtDimInfoByName:function(e,a){var s=a.size();for(var i=0;i<s;i++){var b=a.getStructureAt(i);if(f.XString.isEqual(e,b.getStringByKey("name"))){return b;}}return null;},handleInactiveCapabilities:function(s,e,c){f.XCommandUtil.activateExperimentalFeatures(s,e);if(f.notNull(c)){var i=c.getKeysAsIteratorOfString();while(i.hasNext()){var a=i.next();var b=c.getByKey(a).getBoolean();var d=f.FeatureToggleOlap.lookup(a);if(b){f.XCommandUtil.activate(s,d);}else{var g=s.getSession().getFeatureToggles();if(f.notNull(g)){var h=g;h.removeElement(d);}}}}},activateExperimentalFeatures:function(s,e){if(f.XStringUtils.isNotNullAndNotEmpty(e)){if(f.XString.containsString(e,",")){var l=f.XStringTokenizer.splitString(e,",");var a=l.size();for(var i=0;i<a;i++){f.XCommandUtil.activate(s,f.FeatureToggleOlap.lookup(l.get(i)));}}else{f.XCommandUtil.activate(s,f.FeatureToggleOlap.lookup(e));}}},activate:function(s,c){if(f.isNull(c)){return;}var m=c.getMaxXVersion();if(m>=0&&m<=s.getApplication().getXVersion()){return;}s.getSession().activateFeatureToggle(c);}};f.QCsnConverter={s_lookupValueType:null,s_lookupValueTypeCsn:null,staticSetup:function(){f.QCsnConverter.setupDimensionType();},mapConstant:function(m,a,b,c){m.put(c,b);a.put(b.getName(),c);},setupDimensionType:function(){f.QCsnConverter.s_lookupValueType=f.XHashMapByString.create();f.QCsnConverter.s_lookupValueTypeCsn=f.XHashMapOfStringByString.create();f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.LOWER_CASE_STRING,f.CsnConstants.TYPE_STRING);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.UPPER_CASE_STRING,f.CsnConstants.TYPE_STRING);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.STRING,f.CsnConstants.TYPE_LARGE_STRING);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.STRING,f.CsnConstants.TYPE_STRING);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.CHAR,f.CsnConstants.TYPE_STRING);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.INTEGER,f.CsnConstants.TYPE_DECIMAL);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.INTEGER,f.CsnConstants.TYPE_INTEGER);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.LONG,f.CsnConstants.TYPE_INTEGER64);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.BOOLEAN,f.CsnConstants.TYPE_BOOLEAN);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DECIMAL_FLOAT,f.CsnConstants.TYPE_DECIMAL_FLOAT);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DOUBLE,f.CsnConstants.TYPE_DOUBLE);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DATE,f.CsnConstants.TYPE_LOCAL_DATE);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DATE,f.CsnConstants.TYPE_DATE);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.TIME,f.CsnConstants.TYPE_LOCAL_TIME);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.TIME,f.CsnConstants.TYPE_TIME);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DATE_TIME,f.CsnConstants.TYPE_LOCAL_DATE_TIME);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.DATE_TIME,f.CsnConstants.TYPE_DATE_TIME);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.TIMESPAN,f.CsnConstants.TYPE_UTC_TIMESTAMP);f.QCsnConverter.mapConstant(f.QCsnConverter.s_lookupValueType,f.QCsnConverter.s_lookupValueTypeCsn,f.XValueType.TIMESPAN,f.CsnConstants.TYPE_TIMESTAMP);},lookupValueType:function(c,d){var v=f.QCsnConverter.s_lookupValueType.getByKey(c);return f.notNull(v)?v:d;},lookupValueTypeCsn:function(a,d){var v=f.QCsnConverter.s_lookupValueTypeCsn.getByKey(a.getName());return f.notNull(v)?v:d;},lookupAxis:function(a){var b=f.XString.toUpperCase(a);if(f.XString.isEqual(b,f.CsnConstants.AXIS_ROWS)){return f.AxisType.ROWS;}if(f.XString.isEqual(b,f.CsnConstants.AXIS_COLUMNS)){return f.AxisType.COLUMNS;}return f.AxisType.FREE;},lookupAxisCsn:function(a){if(a===f.AxisType.ROWS){return f.CsnConstants.AXIS_ROWS;}if(a===f.AxisType.COLUMNS){return f.CsnConstants.AXIS_COLUMNS;}return f.CsnConstants.AXIS_FREE;}};f.QInADataSourceBlending={exportDataSourceBlending:function(a,b,i){var c=f.PrFactory.createStructure();var d=c.putNewStructure("Metadata");var e=d.putNewStructure("DataSource");e.putString("Type",f.QueryManagerMode.BLENDING.getName());var o=f.XStringBuffer.create();for(var g=0;g<b.getSources().size();g++){o.append(b.getSources().get(g).getQueryAliasName());}var h=o.toString();if(o.length()>=256){h=f.XSha1.createSHA1(h);}e.putString("ObjectName",h);var j=f.QInADataSourceBlending.exportBlendingSources(a,b,i);e.put("Sources",j);var k=f.QInADataSourceBlending.exportBlendingMappings(b.getMappings());e.put("Mappings",k);return e;},exportBlendingSources:function(a,b,i){var c=b.getBlendingHost();var d=c.getSource();var e=a;if(a.isTypeOf(f.QModelFormat.INA_DATA)){e=f.QModelFormat.INA_DATA_BLENDING_SOURCE;}var g=f.PrFactory.createList();var s=b.getSources().getIterator();while(s.hasNext()){var h=s.next();var q=h.getQueryModel();if(f.isNull(q)){return null;}var j=g.addNewStructure();j.putString("Type","Query");j.putString("AliasName",h.getQueryAliasName());j.putString("ObjectName",h.getQueryAliasName());var k=j.putNewStructure("DefiningContext");var l=q.serializeToElement(e).asStructure();f.QInADataSourceBlending.exportOptimizerHints(l,q.getOptimizerHintsByExecutionEngine(f.ExecutionEngine.MDS));var m=q.getQueryManager();var p=m.getResultSetPersistenceIdentifier();if(h!==d&&h.isRemoteSource()&&!e.isTypeOf(f.QModelFormat.INA_REPOSITORY)){f.QInADataSourceBlending.updateRemoteDataSource(l,m,i,c.getSystemDescription());}else if(!h.isRemoteSource()&&f.XStringUtils.isNotNullAndNotEmpty(p)&&i){l.getStructureByKey("DataSource").putString("InstanceId",p);}var n=f.QInADataSourceBlending.exportResultSetFeatures(q,true);l.put("ResultSetFeatureRequest",n);k.put("Definition",l);}f.XObjectExt.release(s);return g;},updateRemoteDataSource:function(i,q,a,l){var d=i.putNewStructure("DataSource");d.putString("Type","SerializedData");d.putString("InstanceId",q.getResultSetPersistenceIdentifier());var r=q.getActiveResultSetContainer();var s=q.getSystemDescription();var h=f.XStringUtils.isNotNullAndNotEmpty(r.getSerializedView())&&(!a||f.XStringUtils.isNotNullAndNotEmpty(r.getSerializedCube()));if(!h&&l.isSystemMappingValid(s)){var m=s.getSystemMapping(l.getSystemName());d.putString("ObjectName",m.getDeserializeTable());d.putString("SchemaName",m.getDeserializeSchema());}else{var b=d.putNewStructure("SerializedData");b.putString("View",r.getSerializedView());if(a){b.putStringNotNullAndNotEmpty("Cube",r.getSerializedCube());}}f.QInADataSourceBlending.updateBWRemoteSource(i,q.getSystemType(),q.getQueryModel());},exportOptimizerHints:function(a,o){if(f.XCollectionUtils.hasElements(o)){var s=o.getKeysAsReadOnlyListOfString();s.sortByDirection(f.XSortDirection.ASCENDING);var b=a.putNewStructure("Hints");var c=b.putNewList(f.ExecutionEngine.MDS.getName());var d=s.size();for(var i=0;i<d;i++){var h=s.get(i);var e=c.addNewStructure();e.putString("Key",h);e.putString("Value",o.getByKey(h));}}},updateBWRemoteSource:function(a,s,q){if(s.isTypeOf(f.SystemType.BW)||s.isTypeOf(f.SystemType.VIRTUAL_INA)){a.remove("FixedFilter");a.remove("DynamicFilter");a.remove("Filter");a.remove("Conditions");a.remove("Query");a.remove("QueryDataCells");a.remove("Sort");a.remove("ExtendedSortTypes");a.remove("Variables");a.remove("UniversalDisplayHierarchies");var e=f.QInADataSourceBlending.getExtendedStructureMemberNames(q);var b=a.getListByKey("Dimensions");var d=f.PrUtils.getListSize(b,0);for(var i=0;i<d;i++){var c=b.getStructureAt(i).getListByKey("Members");var m=f.PrUtils.getListSize(c,0);for(var k=0;k<m;k++){var g=c.getStructureAt(k);if(e.contains(g.getStringByKey("Name"))){g.remove("Selection");}g.remove("Formula");}}}},getExtendedStructureMemberNames:function(q){var s=q.getMeasureDimension().getExtendedStructureMembers();return f.XCollectionUtils.createListOfNames(s);},exportResultSetFeatures:function(s,i){var o=f.PrFactory.createStructure();o.putBoolean("UseDefaultAttributeKey",false);var q=s.getQueryManager();if(q.getMaxResultRecords()!==-1){o.putLong("MaxResultRecords",q.getMaxResultRecords());}f.QInAOptions.exportPaging(o,q);f.QInAOptions.exportSuppressKeyfigureCalculation(o,q);o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None");if(i){o.putBoolean("IsCubeBlendingSubquery",true);}if(!q.isResultSetTransportEnabled()){o.putBoolean("ReturnEmptyJsonResultSet",true);}return o;},exportDimensionMapping:function(d){var i=f.PrFactory.createStructure();i.putString("DimensionName",d.getMemberName());i.putString("LinkType",d.getLinkType().getName());if(d.isPreservingMembers()){i.putBoolean("PreserveMembers",true);}if(!d.isReturningOriginKeys()){i.putBoolean("ReturnOriginKeys",false);}var a=d.getMappingDefinitions().getIterator();var b=f.QInADataSourceBlending.exportMappingDefinitions(a);f.XObjectExt.release(a);i.put("Mapping",b);if((d.getLinkType()===f.BlendingLinkType.ALL_DATA||d.getLinkType()===f.BlendingLinkType.NONE)&&d.getConstantMappings().hasElements()){f.QInADataSourceBlending.exportConstantMapping(b,d.getConstantMappings().getIterator());}var c=f.PrFactory.createList();var e=d.getAttributeMappings().getIterator();while(e.hasNext()){var g=e.next();var h=f.QInADataSourceBlending.exportAttributeMapping(g);c.add(h);}f.XObjectExt.release(e);if(!c.isEmpty()){i.put("AttributeMappings",c);}return i;},exportAttributeMapping:function(a){var i=f.PrFactory.createStructure();i.putString("AttributeName",a.getAttributeName());i.putBoolean("IsLinkKey",a.isLinkKey());var m=a.getAttributeMappingDefinitions().getIterator();var b=f.QInADataSourceBlending.exportMappingDefinitions(m);f.XObjectExt.release(m);i.put("Mapping",b);f.QInADataSourceBlending.exportConstantMapping(b,a.getConstantMappings().getIterator());return i;},exportConstantMapping:function(i,d){while(d.hasNext()){var c=d.next();var a=f.PrFactory.createStructure();a.putString("AliasName",c.getQueryAliasName());var b=a.putNewStructure("MappingDefinition");var e=b.putNewStructure("Constant");e.putString("Value",c.getMemberName());e.putString("ValueType",f.QInAConverter.lookupValueTypeInA(c.getValueType()));i.add(a);}},exportMappingDefinitions:function(d){var i=f.PrFactory.createList();while(d.hasNext()){var a=d.next();var b=i.addNewStructure();b.putString("AliasName",a.getQueryAliasName());var c=b.putNewStructure("MappingDefinition");var e=c.putNewStructure("Member");e.putString("Name",a.getMemberName());}return i;},exportBlendingMappings:function(m){var i=f.PrFactory.createList();var a=m.getIterator();while(a.hasNext()){var b=a.next();var c=f.QInADataSourceBlending.exportDimensionMapping(b);i.add(c);}return i;}};f.QInADataSourceExtDims={importQd:function(a,d,b){if(a.capabilities.supportsExtendedDimensions()){var e=d.getExtendedDimensionsBase();e.clear();var c=b.getListByKey("ExtendedDimensions");if(f.notNull(c)){var g=c.size();for(var i=0;i<g;i++){var h=c.getStructureAt(i);var n=h.getStringByKey("Name");var j=h.getStringByKey("JoinFieldName");var k=h.getStringByKey("JoinFieldNameInExtendedDimension");var l=d.addNewExtendedDimension(n,j,k);l.setText(h.getStringByKey("Description"));var m=h.getStringByKey("JoinType");var o=f.JoinType.lookup(m);l.setJoinType(o);f.QInADataSourceExtDims.importJoinParameter(h,l);f.QInADataSourceExtDims.importExtendedDataSource(h,l);var r=h.getStringByKey("FieldRenamingMode");if(f.notNull(r)){l.setRenamingMode(r);}var p=h.getStringByKey("JoinCardinality");if(f.XStringUtils.isNotNullAndNotEmpty(p)){var q=f.JoinCardinality.lookup(p);l.setJoinCardinality(q);}var s=h.getStringByKey("Visibility");if(f.XStringUtils.isNotNullAndNotEmpty(s)){var t=f.DimensionVisibility.lookup(s);if(f.notNull(t)){l.setVisibility(t);}}}}}},importExtendedDataSource:function(i,e){var a=i.getStructureByKey("DataSource");if(f.notNull(a)){var b=f.QFactory.createDataSource();f.QInADataSourceProperties.importQd(b,a);var t;var c=a.getStringByKey("Type");if(f.isNull(c)){t=f.MetaObjectType.DBVIEW;}else{t=f.MetaObjectType.lookup(f.XString.toLowerCase(c));}b.setType(t);e.setDataSource(b);}},importJoinParameter:function(i,e){var a=i.getListByKey("JoinParameters");if(f.notNull(a)){var b=e.getJoinParameters();b.clear();var c=a.size();for(var j=0;j<c;j++){b.add(a.getStringAt(j));}}},checkIsValid:function(e,a){var j=a.getJoinType();if(f.isNull(j)){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' is missing a JoinType"));return false;}var d=a.getDimensionType();if(d.isTypeOf(f.DimensionType.GIS_DIMENSION)&&j.isTypeOf(f.JoinType._TIME)){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false;}else if((d.isTypeOf(f.DimensionType.TIME)||d.isTypeOf(f.DimensionType.DATE))&&j.isTypeOf(f.JoinType._SPATIAL)){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false;}var b=a.getDataSource();if(f.isNull(b)){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' is missing its DataSource"));return false;}var c=a.getJoinParameters();if(j===f.JoinType.WITHIN_DISTANCE&&c.isEmpty()){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false;}return true;},exportQd:function(e,d,i){var a=d.getExtendedDimensions();if(f.XCollectionUtils.hasElements(a)){var b=i.putNewList("ExtendedDimensions");for(var c=0;c<a.size();c++){var g=a.get(c);if(!f.QInADataSourceExtDims.checkIsValid(e,g)){return;}var h=b.addNewStructure();h.putString("Name",g.getName());h.putString("Description",g.getText());h.putInteger("DimensionType",f.QInAConverter.lookupDimensionTypeInA(g.getDimensionType()));h.putString("JoinFieldName",g.getJoinField());h.putString("JoinFieldNameInExtendedDimension",g.getJoinFieldNameExternal());h.putString("JoinType",g.getJoinType().getName());var j=g.getJoinCardinality();if(f.notNull(j)){h.putString("JoinCardinality",j.getName());}var q=d.getQueryManager();var m=null;if(f.notNull(q)){m=q.getModelCapabilities();}if(f.isNull(m)){m=e.capabilities;}if(m.supportsDimensionVisibility()&&m.supportsExtendedDimensionVisibility()){var k=g.getVisibility();if(f.notNull(k)){h.putString("Visibility",k.getName());}}var l=g.getJoinParameters();if(l.hasElements()){var n=h.putNewList("JoinParameters");n.addAllStrings(l);}var o=g.getDataSource();var p=h.putNewStructure("DataSource");f.QInADataSourceProperties.exportQd(e,o,p,false);var t=o.getType();if(f.isNull(t)){p.putString("Type",f.MetaObjectType.DBVIEW.getCamelCaseName());}else{p.putString("Type",t.getCamelCaseName());}if(m.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){h.putStringNotNull("FieldRenamingMode",g.getRenamingMode());}}}}};f.QInADataSourceProperties={importQd:function(d,s){var n=s.getStringByKey("ObjectName");d.setName(n);var e=s.getStringByKey("Environment");d.setEnvironmentName(e);var p=s.getStringByKey("PackageName");d.setPackageName(p);var a=s.getStringByKey("SchemaName");d.setSchemaName(a);var b=s.getStringByKey("SourceQuery");d.setSourceQuery(b);var c=s.getStringByKey("AliasName");d.setAlias(c);var g=s.getStringByKey("DataArea");d.setDataArea(g);var r=s.getStringByKey("RunAsUser");d.setRunAsUser(r);var t=s.getStringByKey("Description");d.setText(t);var h=s.getStructureByKey("CustomProperties");if(f.notNull(h)){var j=h.getKeysAsReadOnlyListOfString();var k=j.size();for(var i=0;i<k;i++){var l=j.get(i);d.addCustomProperty(l,h.getStringByKey(l));}}},exportQd:function(e,d,i,w){f.QInAExportUtil.setNonEmptyString(i,"ObjectName",d.getObjectName());f.QInAExportUtil.setNonEmptyString(i,"Environment",d.getEnvironmentName());f.QInAExportUtil.setNonEmptyString(i,"PackageName",d.getPackageName());f.QInAExportUtil.setNonEmptyString(i,"SchemaName",d.getSchemaName());f.QInAExportUtil.setNonEmptyString(i,"AliasName",d.getAlias());if(e.getSession().hasFeature(f.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)){f.QInAExportUtil.setNonEmptyString(i,"SourceQuery",d.getSourceQuery());}else{var c=d.getCustomProperties();var a=c.getKeysAsIteratorOfString();if(a.hasNext()){var b=i.putNewStructure("CustomProperties");while(a.hasNext()){var k=a.next();f.QInAExportUtil.setNonEmptyString(b,k,c.getByKey(k));}}}var g=d.getDataArea();if(!f.XString.isEqual(g,"DEFAULT")){f.QInAExportUtil.setNonEmptyString(i,"DataArea",g);}if(w){f.QInAExportUtil.setNonEmptyString(i,"RunAsUser",d.getRunAsUser());}if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||e.mode.containsMetadata()){f.QInAExportUtil.setNonEmptyString(i,"Description",d.getText());}if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)||e.mode===f.QModelFormat.INA_VALUE_HELP){f.QInAExportUtil.setNonEmptyString(i,"InstanceId",d.getInstanceId());var r=d.getRriName();if(f.XStringUtils.isNotNullAndNotEmpty(r)){f.QInAExportUtil.setNonEmptyString(i,r,d.getRriValue());}}}};f.QInASpatialClustering={exportSpatialClusteringRequest:function(e,c){var r=f.PrFactory.createStructure();var i=r.putNewStructure("Analytics");var a=c.getClusterField();var q=a.getQueryModel();var b=e.exportDataSource(q.getDataSource(),false);i.put("DataSource",b);var d=e.exportDimension(a.getDimension(),null);d.putString("Axis",f.QInAConverter.lookupAxisTypeInA(f.AxisType.ROWS));var g=f.QInASpatialClustering.exportSpatialClusterSettings(c);d.put("ClusterDefinition",g);var h=e.exportStructureDimension(q.getMeasureDimension());h.putString("Axis",f.QInAConverter.lookupAxisTypeInA(f.AxisType.COLUMNS));if(q.getConvenienceCommands().isTypeOfBw()){var j=f.PrFactory.createStructure();j.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(f.ResultVisibility.VISIBLE));var k=j.putNewStructure("MemberOperand");k.putString("AttributeName","Measures");k.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL));k.putString("Value","1ROWCOUNT");var l=h.getListByKey("Members");l.clear();l.add(j);}var m=f.PrFactory.createList();m.add(d);m.add(h);var n=q.getAxis(f.AxisType.FREE);var s=n.size();for(var o=0;o<s;o++){var p=n.get(o);var t=p.getDimensionType();if(t.isTypeOf(f.DimensionType.CALCULATED_DIMENSION)){m.add(e.exportDimension(p,null));}}var u=i.putNewStructure("Definition");u.put("Dimensions",m);e.exportFilter(q.getFilter(),u);if(q.getModelCapabilities().supportsConditions()&&q.getConditionManager().getEffectiveConditions().size()>0){e.exportConditionManager(q.getConditionManager(),u);}e.exportVariables(q.getVariableContainer(),u);u.put("ResultSetFeatureRequest",f.QInASpatialClustering.exportResultSetFeatures(q));return r;},exportSpatialClusterSettings:function(c){var i=f.PrFactory.createStructure();i.putBoolean("Active",c.isActive());i.putString("ClusterAlgorithm",c.getClusterAlgorithm().getName());i.putString("GeometryAttribute",c.getClusterField().getName());var t=c.getThresholdNumberOfPoints();if(t!==-1){i.putInteger("ThresholdNumberOfPoints",t);}var a=i.putNewStructure("ClusterParameters");var p=c.getParameters();var k=p.getKeysAsIteratorOfString();while(k.hasNext()){var b=k.next();var v=p.getByKey(b);if(v.getValueType()===f.XValueType.INTEGER){a.putInteger(b,v.getInteger());}else if(v.getValueType()===f.XValueType.DOUBLE){a.putDouble(b,v.getDouble());}else{a.putString(b,v.toString());}}return i;},exportResultSetFeatures:function(s){var o=f.PrFactory.createStructure();o.putBoolean("UseDefaultAttributeKey",false);var q=s.getQueryManager();if(q.getMaxResultRecords()!==-1){o.putLong("MaxResultRecords",q.getMaxResultRecords());}f.QInAOptions.exportPaging(o,q);o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None");return o;}};f.QInAValueHelp={exportPlanningVariableHelpRequest:function(e,p,d,v){var r=p.getCommandForExport();var i=r.getStructureByKey("Planning");var a=i.getStructureByKey("Command").getStructureByKey("DataSource");var b=i.putNewStructure("Definition");f.QInAValueHelp.exportValueHelpFilters(e,b,d,p.getSelector());var c=e.exportDimension(d,null);var g=b.putNewList("Dimensions");g.add(c);if(v.getHierarchyName()!==null){f.QInAValueHelp.exportVariableHierarchyInformation(c,b,v);}var h=b.putNewList("Variables");var n=h.addNewStructure();n.putString("Name",v.getName());var t=a.getStringByKey("Type");if(f.XString.isEqual(t,f.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())||f.XString.isEqual(t,f.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())||f.XString.isEqual(t,f.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())||f.XString.isEqual(t,f.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName())){if(f.XString.isEqual(t,f.MetaObjectType.PLANNING_SEQUENCE.getCamelCaseName())){a.putString("Type",f.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName());}else if(f.XString.isEqual(t,f.MetaObjectType.PLANNING_FUNCTION.getCamelCaseName())){a.putString("Type",f.MetaObjectType.PLANNING_FUNCTION_VALUEHELP.getCamelCaseName());}var j=i.putNewStructure("ProcessingDirectives");j.putString("ProcessingStep","VariableDefinition");r.putNewList("Options").addString("StatefulServer");}else{b.putString("ValuehelpForVariable",v.getName());if(d.getReadMode(f.QContextType.SELECTOR)===f.QMemberReadMode.MASTER){b.putString("ReadMode","Master");}if(b.containsKey("FixedFilter")){b.remove("FixedFilter");}}return r;},exportVariableHelpRequest:function(e,q,d,v){var r=f.QInAValueHelp.exportMemberHelpRequest(e,q,d);var i=r.getStructureByKey("Analytics");var a=i.getStructureByKey("DataSource");var b=i.getStructureByKey("Definition");var c=b.getListByKey("Dimensions").getStructureAt(0);if(v.getHierarchyName()!==null){f.QInAValueHelp.exportVariableHierarchyInformation(c,b,v);}var g=b.putNewList("Variables");var n=g.addNewStructure();n.putString("Name",v.getName());var t=a.getStringByKey("Type");if(f.XString.isEqual(t,f.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName())||f.XString.isEqual(t,f.MetaObjectType.PLANNING_SEQUENCE_VALUEHELP.getCamelCaseName())){var h=i.putNewStructure("ProcessingDirectives");h.putString("ProcessingStep","VariableDefinition");}else{b.putString("ValuehelpForVariable",v.getName());e.exportVariables(q.getVariableContainer(),b);if(d.getReadMode(f.QContextType.SELECTOR)===f.QMemberReadMode.MASTER){b.putString("ReadMode","Master");}if(b.containsKey("FixedFilter")){b.remove("FixedFilter");}}return r;},throwErrorForDependentVariable:function(v,d){var m=f.XStringBuffer.create();m.append("The dependent variable '");m.append(d.getName());m.append("' of the variable '");m.append(v.getName());m.append("' has no value set.");throw f.XException.createIllegalStateException(m.toString());},exportVariableHierarchyInformation:function(d,i,v){var a=d.putNewStructure("Hierarchy");if(v.getVariableType()===f.VariableType.HIERARCHY_NODE_VARIABLE){a.putStringNotNullAndNotEmpty("Name",v.getHierarchyName());a.putStringNotNullAndNotEmpty("DueDate",v.getHierarchyKeyDate());a.putStringNotNullAndNotEmpty("Version",v.getHierarchyVersion());a.putInteger("InitialDrillLevel",v.getDimension().getSelectorRootLevel());if(f.XStringUtils.isNotNullAndNotEmpty(v.getHierarchyName())){f.QInAValueHelp.addVariableHierarchyToFilters(v,f.PrUtils.getStructureProperty(i.getStructureByKey("Filter"),"Selection"));f.QInAValueHelp.addVariableHierarchyToFilters(v,f.PrUtils.getStructureProperty(i.getStructureByKey("VisibilityFilter"),"Selection"));}}else{var b=v.getDependentVariables();var c=b.getIterator();while(c.hasNext()){var s=c.next();if(s.getVariableType()===f.VariableType.HIERARCHY_NAME_VARIABLE){var h=s;var e=h.getValueByString();if(f.XStringUtils.isNullOrEmpty(e)){f.QInAValueHelp.throwErrorForDependentVariable(v,h);}a.putString("Name",e);}else if(s.getVariableType()===f.VariableType.DIMENSION_MEMBER_VARIABLE){var g=s;var j=g.getValueByString();if(f.XStringUtils.isNullOrEmpty(j)){f.QInAValueHelp.throwErrorForDependentVariable(v,g);}if(g.getDimension().getDimensionType()===f.DimensionType.DATE){a.putStringNotNullAndNotEmpty("DateTo",j);}else{a.putStringNotNullAndNotEmpty("Version",j);}}}f.XObjectExt.release(c);a.putInteger("InitialDrillLevel",v.getDimension().getSelectorRootLevel());}},addVariableHierarchyToFilters:function(v,s){var d=v.getDimension();var o=f.PrUtils.getStructureProperty(s,"Operator");var a=f.PrUtils.getListProperty(o,"SubSelections");for(var i=0;i<f.PrUtils.getListSize(a,0);i++){var b=a.getStructureAt(i);if(b.containsKey("SetOperand")){var c=f.PrUtils.getStructureProperty(b,"SetOperand");var e=d.getFieldByName(c.getStringByKey("FieldName"));if(f.notNull(e)&&(e===d.getHierarchyKeyField()||e===d.getHierarchyDisplayKeyField()||e===d.getHierarchyTextField())){c.putNewStructure("Hierarchy").putString("Name",v.getHierarchyName());}}else if(b.containsKey("Operator")){f.QInAValueHelp.addVariableHierarchyToFilters(v,b);}}},exportMemberHelpRequest:function(e,q,d){if(f.isNull(q)||f.isNull(d)){return null;}var r=f.PrFactory.createStructure();var s=q.getSession();if(s.hasFeature(f.FeatureToggleOlap.CLIENT_INFO_METADATA)){f.QInAClientInfo.exportClientInfo(r,q,q.getModelCapabilities().supportsClientInfo());}var i=r.putNewStructure("Analytics");f.QInADataSource.exportDataSource(e,q.getDataSource(),false,i);var a=f.PrFactory.createList();a.add(e.exportDimension(d,null));var b=i.putNewStructure("Definition");b.put("Dimensions",a);e.exportVariables(q.getVariableContainer(),b);var c=q.getFilter();f.QInAValueHelp.exportValueHelpFilters(e,b,d,c);return r;},exportValueHelpFilters:function(e,i,d,a){e.exportFixedFilter(a,i);var m=a.getModelCapabilities();if(d.getSelectorFilterUsage()===f.QueryFilterUsage.SELECTOR_FILTER&&f.notNull(m)&&m.supportsVisibilityFilter()){e.exportVisibilityFilter(a,i);}f.QInAValueHelp.setOptionsVh(e,i,d);if(e.capabilities.supportsExtendedSort()){f.QInAValueHelp.exportExtendedSortVh(i,d);}var b=d.getSelectorFilterUsage()!==f.QueryFilterUsage.SELECTOR_FILTER||!a.isValueHelpFilterInitialized();var s=f.QInAValueHelpFilter.getValueHelpFilter(d,a);var c=null;var h=null;if(d.isSelectorHierarchyActive()){var g=d.getSelectorHierarchyNode();var j=d.getSelectorHierarchyNodeName();var k=d.getSelectorHierarchyNodeSid();if(d.isSelectorUseQueryDrillOperations()){e.exportDrillManager(d.getDrillManager(),i);}else if(f.notNull(g)){var l=d.getHierarchyNavigationField();var n=i.putNewList("HierarchyNavigations");var o=d.getNavigationNodes().getIterator();while(o.hasNext()){var p=o.next().getDimensionMember();var q=p.getFieldValue(l);if(f.isNull(q)){q=p.getKeyFieldValue();}f.QInAValueHelp._addHierarchyNavigation(n,d.getName(),q.getField().getName(),q.getString());}f.XObjectExt.release(o);c=g.getName();}else if(f.XStringUtils.isNotNullAndNotEmpty(k)){f.QInAValueHelp._addHierarchyNavigation(i.putNewList("HierarchyNavigations"),d.getName(),d.getHierarchyNavigationField().getName(),k);}else if(f.XStringUtils.isNotNullAndNotEmpty(j)){f.QInAValueHelp._addHierarchyNavigation(i.putNewList("HierarchyNavigations"),d.getName(),d.getSelectorKeyField().getName(),j);c=j;}if(b&&f.notNull(s)&&f.notNull(c)){h=s.addSingleMemberFilterByDimension(d,c,f.ComparisonOperator.EQUAL);}}if(f.notNull(s)){var r=d.getQueryModel()!==null?e.exportValueHelpFilter(d,i):e.exportFilterExpression(s);i.putIfNotNull("Filter",r);if(b&&f.notNull(h)){var t=s.getComplexRoot();if(f.notNull(t)){t.removeElement(h);}else{var u=s.getCartesianProduct();if(f.notNull(u)){u.removeElement(h);}}}}},_addHierarchyNavigation:function(h,d,a,m){var b=h.addNewStructure();b.putString("DrillState",f.QInAConverter.lookupDrillStateInA(f.DrillState.EXPANDED));var c=b.putNewStructure("DrillMember");c.putString("DimensionName",d);c.putString("FieldName",a);c.putString("Member",m);},exportExtendedSortVh:function(i,d){var a=i.putNewList("Sort");var b=a.addNewStructure();b.putString("Dimension",d.getName());b.putString("Direction",f.QInAConverter.lookupSortDirectionInA2(d.getSelectorOrder()));var s=d.getSelectorSortType();if(f.notNull(s)){b.putString("SortType",f.QInAConverter.lookupSortTypeInA(s));}else{b.putString("SortType","MemberKey");}},setOptionsVh:function(e,i,d){var r=i.putNewStructure("ResultSetFeatureRequest");r.putBoolean("UseDefaultAttributeKey",false);if(d.isSelectorGettingInterval()&&e.capabilities.supportsResultSetInterval()){r.putBoolean("Interval",true);}r.putString("ResultFormat","Version2");r.putString("ResultEncoding","None");var q=d.getQueryModel();if(f.notNull(q)){var a=d.getQueryManager();var c=q.getModelCapabilities();if(c.supportsAutoVariableSubmit()){r.putBoolean("IgnoreAutoSubmit",!a.getInitSettings().isExecuteAutoVariableSubmit());}if(c.supportsCellDocumentId()){r.putBoolean("ReturnDocumentIds",a.isRequestCellDocumentID());}if(c.supportsKeepOriginalTexts()){r.putBoolean("ResultKeepOriginalTexts",q.isKeepingOriginalTexts());}if(q.isValueHelpIgnoreQueryDynamicFilter()){r.putBoolean("ValueHelpIgnoreQueryDynFilter",true);}}if(d.getSelectorMaxResultRecords()!==-1){r.putLong("MaxResultRecords",d.getSelectorMaxResultRecords());}var s=r.putNewStructure("SubSetDescription");s.putInteger("RowFrom",d.getSelectorPagingStart());s.putInteger("RowTo",d.getSelectorPagingEnd());},exportResultSetRequest:function(e,l,q,w,a){var b=e.exportQueryModel(q,w,a);var c=l.getDimension();var d=l.isIncludeMeasures();var g=false;var h=b.getListByKey("Dimensions");for(var i=h.size()-1;i>=0;i--){var j=h.getStructureAt(i);var k=f.XString.isEqual(j.getStringByKey("Axis"),"Free");var m=q.getDimensionByName(j.getStringByKey("Name"));if(f.notNull(m)){if(m===c){g=true;if(k){j.putString("Axis","Rows");}}else if(!k&&(!m.isStructure()||!d)){if(f.QInAValueHelp.dimensionRequiredOnFreeAxis(m)){j.putString("Axis","Free");}else{h.removeAt(i);}}}}if(!g){var n=e.exportDimension(c,h.addNewStructure());n.putString("Axis","Rows");}return b;},dimensionRequiredOnFreeAxis:function(d){var q=d.getQueryModel();if(d.getSupportedAxesTypes().contains(f.AxisType.FREE)){var a=d.getDimensionType();if(a===f.DimensionType.MEASURE_STRUCTURE||a===f.DimensionType.SECONDARY_STRUCTURE){return f.QInAValueHelp.getDimensionsUsedInFilter(q).contains(d.getName())||f.XCollectionUtils.hasElements(q.getExceptionManager());}else if(a===f.DimensionType.ACCOUNT){return f.QInAValueHelp.getDimensionsUsedInFilter(q).contains(d.getName());}else{return a===f.DimensionType.CALCULATED_DIMENSION;}}return false;},getDimensionsUsedInFilter:function(q){var u=f.XHashSetOfString.create();f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(q.getFilter().getDynamicFilter(),u);return u;}};f.QInAExpand={createExpandSubmit:function(p,n){if(n){return f.PrFactory.createString("#");}var i=p.getInitSettings();if(i.isRequestingDefaultSettings()){return null;}var e=f.PrFactory.createList();return f.QInAExpand._exportExpandSelection(e,i,p);},createExpandMetadata:function(p){var e=f.PrFactory.createList();var i=p.getInitSettings();if(!p.getCapabilitiesBase().supportsDetailedResponseExpansion()||i.isRequestingDefaultSettings()){e.addString("Cube");return e;}return f.QInAExpand._exportExpandSelection(e,i,p);},_exportExpandSelection:function(e,i,p){var q=p.getQueryServiceConfig();if(q.getMinimizedMetadata()&&!f.XCollectionUtils.hasElements(q.getRequiredDimensions())){return f.PrFactory.createString("#");}f.QInAExpand._exportExpandDimensionSelection(e,q);f.QInAExpand._exportExpandFlagSelection(e,i);return e;},_exportExpandDimensionSelection:function(e,q){var r=q.getRequiredDimensions();var a=q.getDimensionsOnAxes();if(f.XCollectionUtils.hasElements(r)){f.QInAExpand._addExpandFromList("Dimensions?Name=",r,e);}else if(f.XCollectionUtils.hasElements(a)){f.QInAExpand._addExpandFromList("Axis?Name=",a,e);}else{e.addString("Dimensions");}},_addExpandFromList:function(p,l,e){var s=f.XListOfString.createFromReadOnlyList(l);s.sortByDirection(f.XSortDirection.ASCENDING);var i=s.getIterator();while(i.hasNext()){e.addString(f.XStringUtils.concatenate2(p,i.next()));}},_exportExpandFlagSelection:function(e,i){if(i.isRequestingVariables()){e.addString("Variables");}if(i.isRequestingSorting()){e.addString("Sort");}if(i.isRequestingDynamicFilter()){e.addString("DynamicFilter");}if(i.isRequestingDataCells()){e.addString("QueryDataCells");}if(i.isRequestingUniversalDisplayHierarchies()){e.addString("UniversalDisplayHierarchies");}if(i.isRequestingConditions()){e.addString("Conditions");}if(i.isRequestingExceptions()){e.addString("Exceptions");}}};f.QInANewLines={exportNewLines:function(i,p){var r=p.getActiveResultSetContainer();if(f.isNull(r)){return;}if(!r.hasNewLineCollection()){return;}var n=r.getNewLineCollection();var v=n.getValidNewLines();if(f.isNull(v)){return;}if(p.getSystemType().isTypeOf(f.SystemType.BW)){f.QInANewLines.exportNewLinesBw(i,v);}else{f.QInANewLines.exportNewLinesHana(i,v);}},exportNewLinesBw:function(a,v){var n=a.putNewList("NewLines");for(var i=0;i<v.size();i++){var b=n.addNewStructure();var c=b.putNewList("DimensionContext");var d=v.get(i);var e=d.getDimensionMembers();for(var j=0;j<e.size();j++){var g=e.get(j);var h=g.getKeyFieldValue();var l=c.addNewStructure();l.putString("FieldName",h.getField().getName());l.putString("Value",h.getValue().getStringRepresentation());}var m=b.putNewList("CellValues");for(var k=0;k<d.getNewLineEntries().size();k++){var o=m.addNewStructure();var p=d.getNewLineEntries().get(k);o.putString("QueryCellsId",p.getQueryDataCell().getName());var q=p.getNewXValue();if(q.getValueType()===f.XValueType.DOUBLE){o.putDouble("Value",q.getDouble());}else if(q.getValueType()===f.XValueType.STRING){o.putString("Value",q.getString());}}}},exportNewLinesHana:function(i,v){var n=i.putNewStructure("DataEntries");var d=n.putNewList("DimensionContext");var a=v.get(0).getDimensionMembers();var b=a.size();for(var c=0;c<b;c++){var e=a.get(c);d.addString(e.getDimension().getName());}var g=n.putNewList("Values");var h=v.size();for(var j=0;j<h;j++){var p=g.addNewStructure();var k=v.get(j);p.putString("Action","NewLine");p.putInteger("LineId",k.getLineId());var l=p.putNewList("Keys");f.QInANewLines.addDimensionMemberKeys(l,k.getDimensionMembers());var m=p.putNewList("CellValues");f.QInANewLines.addCellValues(k,m);}},addDimensionMemberKeys:function(k,d){var a=d.size();for(var i=0;i<a;i++){var b=d.get(i);k.addString(b.getKeyFieldValue().getString());}},addCellValues:function(n,c){var a=n.getNewLineEntries();var b=a.size();for(var i=0;i<b;i++){var d=a.get(i);if(!d.isValueChanged()){continue;}var p=f.PrFactory.createStructure();p.putString("QueryDataCell",d.getQueryDataCell().getName());var e=d.getNewXValue();var g=e.getValueType();if(g===f.XValueType.DOUBLE){p.putDouble("NewValue",e.getDouble());}else if(g===f.XValueType.STRING){p.putString("NewValueExternal",e.getString());}else{f.noSupport();}c.add(p);}}};f.QInANewValues={exportNewValues:function(i,p,a){var r=a.getActiveResultSetContainer();if(f.isNull(r)){return;}if(!r.hasDataEntryCollection()){return;}var n=f.PrFactory.createList();var d=r.getDataEntryCollection();f.QInANewValues.exportRsDataEntries(n,d,a);f.QInANewValues.exportRsDataEntriesViaMember(n,d,a);if(n.isEmpty()){return;}i.put("NewValues",n);f.QInANewValues.exportPublicVersionEdit(p,a);},exportPublicVersionEdit:function(p,a){if(a.getPlanningMode()!==f.PlanningMode.FORCE_PLANNING){return;}var b=a.getPlanningModel();if(f.isNull(b)||!b.supportsPublicVersionEdit()||!b.isPublicVersionEditInProgress()){return;}var v=p.putNewList("RefreshVersionStates");var c=b.getVersions();var d=c.size();for(var j=0;j<d;j++){var e=c.get(j);var s=e.getSourceVersionName();if(e.isShowingAsPublicVersion()&&f.XStringUtils.isNotNullAndNotEmpty(s)){v.addString(s);e.setShowingAsPublicVersion(false);e.setSourceVersionName(null);}}b.setPublicVersionEditInProgress(false);},exportRsDataEntries:function(n,d,p){var c=d.getChangedDataEntries();if(c.isEmpty()){return;}var a=p.getCapabilitiesBase().supportsNewValuesImplicitUnlock();var b=p.getCapabilitiesBase().supportsNewValuesExtendedFormat();var e=p.getSystemType().isTypeOf(f.SystemType.BW);var g=p.getSystemType().isTypeOf(f.SystemType.HANA);var h=c.size();for(var i=0;i<h;i++){var j=c.get(i);if(!j.isNewValueForced()&&!j.isValueChanged()&&!j.isValueLockChanged()){if(g&&j.getPlanningCommand()===null){continue;}else if(e&&b){continue;}}if(!b&&a&&!j.isNewValueForced()&&!j.isValueChanged()&&!j.isValueLocked()){continue;}if(e&&!b){f.QInANewValues.exportValuesAbapNotExtended(j,n);}else if(g||e&&b){f.QInANewValues.exportValues(j,n,p);}}},exportRsDataEntriesViaMember:function(n,d,p){var e=d.getDataEntriesViaMember();if(e.isEmpty()){return;}for(var i=0;i<e.size();i++){var a=e.get(i);var b=a.getPlanningCommands();var x=a.getXValue();var m=a.getMemberContext();var k=m.getKeysAsReadOnlyListOfString();k.sortByDirection(f.XSortDirection.ASCENDING);if(!f.XCollectionUtils.hasElements(b)){f.QInANewValues.exportRsValueInfoViaMember(n,x,k,m,a,null,p);}else{for(var c=0;c<b.size();c++){f.QInANewValues.exportRsValueInfoViaMember(n,x,k,m,a,b.get(c),p);}}}},exportRsValueInfoViaMember:function(n,x,k,m,e,c,p){var a=f.PrFactory.createStructure();if(x.getValueType()===f.XValueType.STRING){a.putString("NewValue",x.getString());}else if(x.getValueType()===f.XValueType.DOUBLE){a.putDouble("NewValue",x.getDouble());}else{return;}var b=a.putNewList("Context");for(var j=0;j<k.size();j++){var d=k.get(j);var g=m.getByKey(d);var h=p.getConvenienceCommands().getRuntimeMemberNameByAlias(p.getQueryModel(),g);if(f.notNull(h)){g=h;}var i=b.addNewStructure();i.putString("Dimension",d);i.putString("Member",g);}f.QInANewValues.exportValueInfo(a,e,c,p);n.add(a);},exportValuesAbapNotExtended:function(d,n){var a=n.addNewList();a.addInteger(d.getRow()+1);a.addInteger(d.getColumn()+1);a.addDouble(d.getDouble());if(d.isValueLocked()){a.addInteger(1);}else{a.addInteger(0);}},exportValues:function(d,n,p){var c=d.getPlanningCommands();var a=null;if(f.XCollectionUtils.hasElements(c)){for(var i=0;i<c.size();i++){a=f.QInANewValues.exportValuesOfAction(d,n,c.get(i),p);}}if(f.isNull(a)||!a.isTypeOf(f.PlanningActionType.DATA_ENTRY)&&(d.isValueChanged()||d.isNewValueForced())){f.QInANewValues.exportValuesOfAction(d,n,null,p);}},exportValuesOfAction:function(d,n,p,a){var b=n.addNewStructure();var c=b.putNewList("Coordinates");c.addInteger(d.getRow());c.addInteger(d.getColumn());var i=a.getSystemType().isTypeOf(f.SystemType.BW);var e=a.getSystemType().isTypeOf(f.SystemType.HANA);var g=f.QInANewValues.exportValueInfo(b,d,p,a);if((f.isNull(g)||g.isTypeOf(f.PlanningActionType.DATA_ENTRY))&&(d.isValueChanged()||d.isNewValueForced())){var h=d.getXValue();var j=h.getValueType();if(j===f.XValueType.DOUBLE){b.putDouble("NewValue",h.getDouble());}else if(j===f.XValueType.STRING){if(e){b.putString("NewValueAsString",h.getString());}else if(i){b.putString("NewValueExternal",h.getString());}}else if(j===f.XValueType.DATE&&i){b.putString("NewValueExternal",h.toSAPFormat());}else{f.noSupport();}if(d.isNewValueForced()&&e&&!a.getCapabilitiesBase().supportsSortNewValues()){b.putBoolean("KeepValue",true);}var k=d.getDataEntryGroup();if(f.isNull(g)&&f.XStringUtils.isNotNullAndNotEmpty(k)){b.putString("Group",k);}}return g;},exportValueInfo:function(n,d,c,p){if(d.isValueLockChanged()){n.putBoolean("LockedCell",d.isValueLocked());}if(p.getCapabilitiesBase().supportsSortNewValues()){n.putInteger("Priority",d.getPriority());}f.QInAExportUtil.setNameIfNotNull(n,"ProcessingType",d.getProcessingType());if(f.notNull(c)&&c.getCommandType()===f.PlanningCommandType.PLANNING_ACTION){var a=c;n.putString("ActionId",a.getActionForQueryIdentifier().getActionId());var b=a.getActionGroup();if(f.XStringUtils.isNotNullAndNotEmpty(b)){n.putString("Group",b);}var e=f.PrFactory.createStructureDeepCopy(a.getActionParameters());if(f.notNull(e)){n.put("ActionParameters",e);}if(a.hasTargetCell()){var t=n.putNewList("TargetCoordinates");t.addInteger(a.getTargetRow());t.addInteger(a.getTargetColumn());}if(a.getActionForQueryIdentifier().getActionType().isTypeOf(f.PlanningActionType.QUERY_SINGLE)){var g=a.getTargetVersionId();if(f.XStringUtils.isNotNullAndNotEmpty(g)){n.putString("TargetVersionId",g);}}return a.getActionForQueryIdentifier().getActionType();}return null;}};f.QInAOptions={exportOptions:function(p){var i=f.PrFactory.createStructure();i.putBoolean("UseDefaultAttributeKey",false);var r=p.getActiveResultSetContainer();if(r.getMaxResultRecords()!==-1){i.putLong("MaxResultRecords",r.getMaxResultRecords());}var d=r.getDataRefreshEnabled();if(d===f.ActionChoice.ON||d===f.ActionChoice.ONCE){i.putBoolean("Refresh",true);}var h=false;if(f.XStringUtils.isNotNullAndNotEmpty(r.getResultSetPersistenceTable())){i.putString("ResultSetPersistanceTable",r.getResultSetPersistenceTable());if(f.XStringUtils.isNotNullAndNotEmpty(r.getResultSetPersistenceSchema())){i.putString("ResultSetPersistanceSchema",r.getResultSetPersistenceSchema());h=true;}}if(!r.isResultSetTransportEnabled()){i.putBoolean("ReturnEmptyJsonResultSet",true);}f.QInAOptions.exportPaging(i,p);f.QInAOptions.exportSuppressKeyfigureCalculation(i,p);if(p.getExecuteRequestOnOldResultSet()){i.putBoolean("ExecuteRequestOnOldResultSet",true);}if(p.isIncludePerformanceNotDefault()){i.putBoolean("IncludePerformanceData",p.isRequestingPerformanceData());}var c=p.getCapabilitiesBase();if(c.supportsAutoVariableSubmit()){i.putBoolean("IgnoreAutoSubmit",!p.getInitSettings().isExecuteAutoVariableSubmit());}if(c.supportsCellDocumentId()){i.putBoolean("ReturnDocumentIds",p.isRequestCellDocumentID());}var q=p.getQueryModel();if(c.supportsPagingTupleCountBeforeSlicing()){i.putBoolean("TupleCountTotal",q.isReturnTupleCountTotal());}if(c.supportsEncodedResultset()){i.putString("ResultFormat","Version2");i.putString("ResultEncoding","None");if(r.getResultSetPersistenceIdentifier()!==null){var a=!r.isRemotePreQuery();if(a){i.putBoolean("IsCubeBlendingSubquery",true);}if(h){i.putString("ResultSetPersistanceIdentifier",r.getResultSetPersistenceIdentifier());i.putString("ResultFormat","SerializedData");}else if(f.QInAOptions.isCubeCacheQuery(q)){i.putString("ResultSetPersistanceIdentifier",r.getResultSetPersistenceIdentifier());}else{i.putString("ResultFormat","SerializedData");}if(p.getSystemType().isTypeOf(f.SystemType.BW)){if(a&&p.getResultSetPersistenceType()===f.BlendingPersistenceType.VIEW){i.putString("ResultSetPersistanceType","View");}else if(a&&p.getResultSetPersistenceType()===f.BlendingPersistenceType.CUBE){i.putString("ResultSetPersistanceType","Cube");}}}}if(f.notNull(q)&&c.supportsKeepOriginalTexts()){i.putBoolean("ResultKeepOriginalTexts",q.isKeepingOriginalTexts());}if(r.getSuppressCalculatedMembersWithoutBookedData()!==-1){i.putInteger("SuppressCalculatedMembersWithoutBookedData",r.getSuppressCalculatedMembersWithoutBookedData());}return i;},isCubeCacheQuery:function(q){var h=q.getOptimizerHintsByExecutionEngine(f.ExecutionEngine.MDS);return f.notNull(h)&&h.containsKey(f.OptimizerHint.CUBE_CACHE_WITH_ID.getName());},fillOptions:function(r,c,s,i){var o=f.PrFactory.createList();if(c.supportsServerState()){o.addString("StatefulServer");}var a=i.getServerCustomizations();o.addAllStrings(a.getValuesAsReadOnlyListOfString());if(s.hasFeature(f.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){r.put("Options",o);}},setRequestTimeZone:function(r,p){if(f.notNull(r)&&p.getModelCapabilities().supportsRequestTimezone()){r.putStringNotNullAndNotEmpty("Timezone",p.getQueryServiceConfig().getRequestTimeZone());}},setLanguage:function(r,p){var l=p.getConnection().getSystemDescription().getLanguage();if(f.XStringUtils.isNotNullAndNotEmpty(l)){r.putString("Language",l);}},importReturnedDataSelections:function(a,p){if(f.notNull(a)){if(p.supportsReturnedDataSelection()){var b=a.getStructureByKey("ReturnedDataSelection");if(f.notNull(b)&&b.hasElements()){var c=b.getKeysAsReadOnlyListOfString();var s=c.size();p.clearDataSelections();for(var i=0;i<s;i++){var d=f.ReturnedDataSelection.lookup(c.get(i));if(f.notNull(d)){if(d===f.ReturnedDataSelection.TUPLE_ELEMENT_IDS){p.enableReturnedDataSelection(d);continue;}if(b.getBooleanByKey(d.getName())){p.enableReturnedDataSelection(d);}else{p.disableReturnedDataSelection(d);}}}}}}},exportReturnedDataSelections:function(i,p){if(p.supportsReturnedDataSelection()){var a=i.putNewStructure("ReturnedDataSelection");var b=p.getAllEnabledReturnedDataSelections().getIterator();while(b.hasNext()){a.putBoolean(b.next(),true);}f.XObjectExt.release(b);var c=p.getAllDisabledReturnedDataSelections().getIterator();while(c.hasNext()){a.putBoolean(c.next(),false);}f.XObjectExt.release(c);}},importOptimizerHints:function(i,p){if(p.getModelCapabilities().supportsCeScenarioParams()){p.getQueryModel().clearAllOptimizerHints();var a=i.getStructureByKey("Hints");if(f.notNull(a)){f.QInAOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.CALC_ENGINE,p);f.QInAOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.MDS,p);f.QInAOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.SQL,p);}}},importOptimizerHintsByEngine:function(a,e,p){var q=p.getQueryModel();var l=a.getListByKey(e.getName());if(f.notNull(l)){var n=l.size();for(var i=0;i<n;i++){var h=l.getStructureAt(i);var k=h.getStringByKey("Key");var v=h.getStringByKey("Value");q.addOptimizerHint(e,k,v);}}},exportOptimizerHints:function(i,q){if(q.getModelCapabilities().supportsCeScenarioParams()){var a=f.PrFactory.createStructure();f.QInAOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.CALC_ENGINE);f.QInAOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.MDS);f.QInAOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.SQL);if(a.hasElements()){i.put("Hints",a);}}},exportOptimizerHintsByEngine:function(a,q,e){var o=q.getOptimizerHintsByExecutionEngine(e);if(f.notNull(o)&&o.hasElements()){var s=o.getKeysAsReadOnlyListOfString();s.sortByDirection(f.XSortDirection.ASCENDING);var b=a.putNewList(e.getName());var c=s.size();for(var i=0;i<c;i++){var h=s.get(i);var d=b.addNewStructure();d.putString("Key",h);d.putString("Value",o.getByKey(h));}}},importSuppressKeyfigureCalculation:function(i,p){if(f.notNull(i)&&f.notNull(p)&&i.containsKey("SuppressKeyfigureCalculation")){f.QInAOptions.getPagingSetter(p).setSuppressKeyfigureCalculation(i.getBooleanByKeyExt("SuppressKeyfigureCalculation",false));}},exportSuppressKeyfigureCalculation:function(i,p){if(f.notNull(i)&&f.notNull(p)&&p.isKeyfigureCalculationSuppressed()){i.putBoolean("SuppressKeyfigureCalculation",true);}},getPagingSetter:function(p){var a=p;if(p.isShallow()){a=p.getActiveResultSetContainer();}return a;},importPaging:function(i,p){if(f.notNull(i)){var a=i.getStructureByKey("SubSetDescription");if(f.isNull(a)||!p.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!p.isApplyingRepoState()){return;}var o=a.getIntegerByKey("RowFrom");var b=f.QInAOptions.getPagingSetter(p);if(o>-1){b.setOffsetRows(o);b.setMaxRows(a.getIntegerByKey("RowTo")-o);}else{b.setMaxRows(a.getIntegerByKey("RowTo"));}var c=a.getIntegerByKey("ColumnFrom");if(c>-1){b.setOffsetColumns(c);b.setMaxColumns(a.getIntegerByKey("ColumnTo")-c);}else{b.setMaxColumns(a.getIntegerByKey("ColumnTo"));}}},exportPaging:function(i,p){var r=p.getActiveResultSetContainer();var s=i.putNewStructure("SubSetDescription");var m=r.getMaxRows();var o=r.getOffsetRows();s.putInteger("RowFrom",o);if(m===-1){s.putInteger("RowTo",-1);}else{s.putInteger("RowTo",o+m);}var a=r.getMaxColumns();var b=r.getOffsetColumns();s.putInteger("ColumnFrom",b);if(a===-1){s.putInteger("ColumnTo",-1);}else{s.putInteger("ColumnTo",b+a);}}};f.QInAVariableVariants={exportVariableVariant:function(i,v){if(f.notNull(v)){var a=i.putNewStructure("VariableVariant");a.putStringNotNullAndNotEmpty("Name",v.getName());a.putString("Description",v.getText());a.putString("Scope",v.getScope().getName());}}};f.QInAVersion={exportPlanningVersions:function(p,a){f.QInAVersion.exportPlanningVersionRestriction(p,a);f.QInAVersion.exportPlanningVersionSettings(p,a);f.QInAVersion.exportPlanningVersionAliases(p,a);},exportPlanningVersionSettings:function(p,a){var b=f.QInAVersion.getAllPlanningActionSequenceSettingsEffective(a);if(f.isNull(b)){return;}var v=null;var c=f.QInAVersion.getPlanningVersionRestrictionEffective(a);var d=b.size();for(var i=0;i<d;i++){var s=b.get(i);var h=s.getActionSequenceId()!==null;if(!h){if(c!==f.PlanningVersionRestrictionType.ONLY_PRIVATE_VERSIONS){continue;}if(!s.getIsRestrictionEnabled()){continue;}}if(f.isNull(v)){v=p.putNewList("Versions");}var e=v.addNewStructure();e.putBoolean("UseExternalView",s.getUseExternalView());var g=s.getVersionId();if(g===-1){e.putString("Version",s.getVersionUniqueName());}else{e.putInteger("Version",g);}if(h){e.putString("SequenceId",s.getActionSequenceId());}if(s.isSharedVersion()){e.putString("Owner",s.getVersionOwner());}}},getPlanningActionSequenceSettingsModeEffective:function(p){if(!p.isDataEntryEnabled()){return null;}var c=p.getSystemType();if(!c.isTypeOf(f.SystemType.HANA)){return null;}var s=p.getPlanningVersionSettingsMode();if(s===f.PlanningVersionSettingsMode.SERVER_DEFAULT){return null;}return s;},getAllPlanningActionSequenceSettingsEffective:function(p){var s=f.QInAVersion.getPlanningActionSequenceSettingsModeEffective(p);if(f.isNull(s)){return null;}var a=null;if(s===f.PlanningVersionSettingsMode.PLANNING_SERVICE){var b=f.PlanningModelUtil.getPlanningServiceFromQueryDataSource(p.getApplication(),p.getSystemName(),p.getDataSource());if(f.notNull(b)){var c=b.getPlanningContext();var d=c.getAllVersions();if(f.XCollectionUtils.hasElements(d)){var v=f.XList.create();var e=d.size();for(var i=0;i<e;i++){var g=d.get(i);v.add(g);}a=v;}}}else if(s===f.PlanningVersionSettingsMode.QUERY_SERVICE){a=p.getAllPlanningVersionSettings();}if(!f.XCollectionUtils.hasElements(a)){return null;}var h=f.XHashMapByString.create();var l=a.size();for(var j=0;j<l;j++){var m=a.get(j);h.put(m.getVersionUniqueName(),m.createVersionSettings());}if(!f.XCollectionUtils.hasElements(h)){return null;}var n=f.XListOfString.createFromReadOnlyList(h.getKeysAsReadOnlyListOfString());n.sortByDirection(f.XSortDirection.ASCENDING);var r=f.XList.create();var o=n.size();for(var k=0;k<o;k++){r.add(h.getByKey(n.get(k)));}return r;},exportPlanningVersionAliases:function(p,a){var v=a.getVersionAliases();if(!f.XCollectionUtils.hasElements(v)){return;}var b=p.putNewList("AliasMapping");var k=v.getKeysAsReadOnlyListOfString();k.sortByDirection(f.XSortDirection.ASCENDING);var l=k.size();for(var i=0;i<l;i++){var c=k.get(i);var d=v.getByKey(c);var m=f.PrFactory.createStructure();m.putString("Alias",c);m.putString("Version",d);b.add(m);}},exportPlanningVersionRestriction:function(p,a){var v=f.QInAVersion.getPlanningVersionRestrictionEffective(a);if(v===f.PlanningVersionRestrictionType.SERVER_DEFAULT){return;}var i=v===f.PlanningVersionRestrictionType.ONLY_PRIVATE_VERSIONS;p.putBoolean("RestrictToPrivateVersions",i);},getPlanningVersionRestrictionEffective:function(p){if(!p.isDataEntryEnabled()){return f.PlanningVersionRestrictionType.SERVER_DEFAULT;}var c=p.getSystemType();if(!c.isTypeOf(f.SystemType.HANA)){return f.PlanningVersionRestrictionType.SERVER_DEFAULT;}var s=p.getPlanningVersionSettingsMode();if(s===f.PlanningVersionSettingsMode.SERVER_DEFAULT){return f.PlanningVersionRestrictionType.SERVER_DEFAULT;}var a=p.getPlanningRestriction();if(f.isNull(a)){return f.PlanningVersionRestrictionType.SERVER_DEFAULT;}return a;}};f.PlanningStateHandler={s_planningStateUpdater:null,setInstance:function(p){f.PlanningStateHandler.s_planningStateUpdater=p;},update:function(a,s,r,m){f.PlanningStateHandler.s_planningStateUpdater.update(a,s,r,m);},updateFromResponse:function(a,s,r,b,m){f.PlanningStateHandler.s_planningStateUpdater.updateFromResponse(a,s,r,b,m);},getDataAreaStateByName:function(a,s,d){return f.PlanningStateHandler.s_planningStateUpdater.getDataAreaStateByName(a,s,d);}};f.PlanningStateHandlerDummyImpl=function(){};f.PlanningStateHandlerDummyImpl.prototype=new f.XObject();f.PlanningStateHandlerDummyImpl.prototype._ff_c="PlanningStateHandlerDummyImpl";f.PlanningStateHandlerDummyImpl.prototype.update=function(a,s,r,m){return;};f.PlanningStateHandlerDummyImpl.prototype.updateFromResponse=function(a,s,r,b,m){return;};f.PlanningStateHandlerDummyImpl.prototype.getDataAreaStateByName=function(a,s,d){return null;};f.FunctionalValueHelpFactoryImpl=function(){};f.FunctionalValueHelpFactoryImpl.prototype=new f.XObject();f.FunctionalValueHelpFactoryImpl.prototype._ff_c="FunctionalValueHelpFactoryImpl";f.FunctionalValueHelpFactoryImpl.createFactory=function(){return new f.FunctionalValueHelpFactoryImpl();};f.FunctionalValueHelpFactoryImpl.prototype.createForSelectFunctions=function(d){return f.FunctionalValueHelpSelectFunctions.create(d);};f.FunctionalValueHelpFactoryImpl.prototype.createForFunctionParameters=function(s){return f.FunctionalValueHelpParameters.create(s);};f.FunctionalValueHelpFactoryImpl.prototype.createForParameterValues=function(p){return f.FunctionalValueHelpParameterValues.create(p);};f.FunctionalValueHelpFactoryImpl.prototype.createForResolveValues=function(s,p){return f.FunctionalValueHelpResolveValues.create(s,p);};f.InADimensionLazyLoader=function(){};f.InADimensionLazyLoader.prototype=new f.XObject();f.InADimensionLazyLoader.prototype._ff_c="InADimensionLazyLoader";f.InADimensionLazyLoader.createLazyLoader=function(q,u){var o=new f.InADimensionLazyLoader();o.setupExt(q,u);return o;};f.InADimensionLazyLoader.prototype.m_importer=null;f.InADimensionLazyLoader.prototype.m_queryModel=null;f.InADimensionLazyLoader.prototype.m_useDesignTimeMetadata=false;f.InADimensionLazyLoader.prototype.setupExt=function(q,u){this.m_queryModel=q;this.m_useDesignTimeMetadata=u;this.m_importer=f.QInAImportFactory.createWithQueryManagerCapabilities(q.getApplication(),f.QModelFormat.INA_METADATA,q.getQueryManager());};f.InADimensionLazyLoader.prototype.releaseObject=function(){this.m_queryModel=null;this.m_importer=f.XObjectExt.release(this.m_importer);f.XObject.prototype.releaseObject.call(this);};f.InADimensionLazyLoader.prototype.lazyLoadDimension=function(d){var a=null;var i=this.getInaDimension(d);if(f.notNull(i)){a=this.m_importer.importDimension(i,this.m_queryModel);}return a;};f.InADimensionLazyLoader.prototype.getInaDimension=function(d){var r=null;var q;if(this.m_useDesignTimeMetadata){q=this.m_queryModel.getServerBaseSerializationForBaseState();}else{q=this.m_queryModel.getServerBaseSerialization();}if(f.notNull(q)){var a=q.getListByKey("Dimensions");var l=a.size();for(var i=0;i<l;i++){var b=a.getStructureAt(i);var n=b.getStringByKey("Name");if(f.XString.isEqual(n,d)){r=b;break;}}}return r;};f.InADimensionLazyLoader.prototype.hasFieldWithName=function(d,a){var i=this.getInaDimension(d);return f.notNull(i)&&this.hasFieldWithProperty(i,"Name",a);};f.InADimensionLazyLoader.prototype.hasFieldWithNameOrAlias=function(d,a){var h=false;var i=this.getInaDimension(d);if(f.notNull(i)){if(this.hasFieldWithProperty(i,"Name",a)){h=true;}else{h=this.hasFieldWithProperty(i,"AliasName",a);}}return h;};f.InADimensionLazyLoader.prototype.hasFieldWithProperty=function(i,p,a){var b=i.getListByKey("Attributes");if(f.isNull(b)){b=i.getListByKey("AttributesMd");}return f.PrUtils.getStructureWithKeyValuePair(b,p,a)!==null;};f.InADimensionLazyLoader.prototype.copyDimensionLazyLoader=function(q){return f.InADimensionLazyLoader.createLazyLoader(q,this.m_useDesignTimeMetadata);};f.InADimensionLazyLoader.prototype.isUseDesignTimeMetadata=function(){return this.m_useDesignTimeMetadata;};f.InADimensionLazyLoader.prototype.setUseDesignTimeMetadata=function(u){this.m_useDesignTimeMetadata=u;};f.InAQMgrMergeSettings=function(){};f.InAQMgrMergeSettings.prototype=new f.XObject();f.InAQMgrMergeSettings.prototype._ff_c="InAQMgrMergeSettings";f.InAQMgrMergeSettings.create=function(i){var n=new f.InAQMgrMergeSettings();n.m_isInitialBWMerge=i;return n;};f.InAQMgrMergeSettings.prototype.m_isInitialBWMerge=false;f.InAQMgrMergeSettings.prototype.isInitialBWMerge=function(){return this.m_isInitialBWMerge;};f.InARsEncodedValues=function(){};f.InARsEncodedValues.prototype=new f.XObject();f.InARsEncodedValues.prototype._ff_c="InARsEncodedValues";f.InARsEncodedValues.createByStructure=function(i){var a=i.getStringByKey("Encoding");var e=f.QInAConverter.lookupEncoding(a);var b=i.getListByKey("Values");return f.InARsEncodedValues.create(e,b);};f.InARsEncodedValues.create=function(e,v){var o=new f.InARsEncodedValues();o.setupExt(e,v);return o;};f.InARsEncodedValues.prototype.m_values=null;f.InARsEncodedValues.prototype.m_index=0;f.InARsEncodedValues.prototype.m_size=0;f.InARsEncodedValues.prototype.cloneExt=function(a){return f.InARsEncodedValues.create(f.ResultSetEncoding.NONE,this.m_values.getPermaCopy());};f.InARsEncodedValues.prototype.setupExt=function(e,v){this.m_values=v;this.m_index=-1;if(e!==f.ResultSetEncoding.NONE){throw f.XException.createIllegalStateException("Wrong or no encoding given");}this.m_size=v.size();};f.InARsEncodedValues.prototype.releaseObject=function(){this.m_values=null;f.XObject.prototype.releaseObject.call(this);};f.InARsEncodedValues.prototype.getIndexForIntegerValue=function(v){if(v>-1){var s=this.m_values.size();for(var i=0;i<s;i++){if(this.m_values.getIntegerAt(i)===v){return i;}}f.XLogger.println(f.XStringUtils.concatenate3("WARNING: Invalid hierarchy: parent index ",f.XInteger.convertToString(v)," refers to non-existing value."));}return v;};f.InARsEncodedValues.prototype.getNextIntegerValue=function(){this.m_index++;return this.m_values.getIntegerAt(this.m_index);};f.InARsEncodedValues.prototype.getNextStringValue=function(){this.m_index++;return this.m_values.getStringAt(this.m_index);};f.InARsEncodedValues.prototype.getNextDoubleValue=function(){this.m_index++;return this.m_values.getDoubleAt(this.m_index);};f.InARsEncodedValues.prototype.hasNextValue=function(){return this.m_index+1<this.m_size;};f.InARsEncodedValues.prototype.resetCursor=function(){this.m_index=-1;};f.InARsEncodedValues.prototype.skip=function(){this.m_index++;};f.InARsEncodedValues.prototype.size=function(){return this.m_size;};f.MeasureValueHelpRsDataCellProvider=function(){};f.MeasureValueHelpRsDataCellProvider.prototype=new f.XObject();f.MeasureValueHelpRsDataCellProvider.prototype._ff_c="MeasureValueHelpRsDataCellProvider";f.MeasureValueHelpRsDataCellProvider.create=function(){return new f.MeasureValueHelpRsDataCellProvider();};f.MeasureValueHelpRsDataCellProvider.prototype.notifyCursorChange=function(c,x,y){};f.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellCount=function(){return 0;};f.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return 0;};f.MeasureValueHelpRsDataCellProvider.prototype.getAvailableDataCellRows=function(){return 0;};f.RuntimeRemoteBlendingQueryUpdateResult=function(){};f.RuntimeRemoteBlendingQueryUpdateResult.prototype=new f.XObject();f.RuntimeRemoteBlendingQueryUpdateResult.prototype._ff_c="RuntimeRemoteBlendingQueryUpdateResult";f.RuntimeRemoteBlendingQueryUpdateResult.create=function(i){var r=new f.RuntimeRemoteBlendingQueryUpdateResult();r.m_success=i;return r;};f.RuntimeRemoteBlendingQueryUpdateResult.prototype.m_success=false;f.RuntimeRemoteBlendingQueryUpdateResult.prototype.isSuccess=function(){return this.m_success;};f.QInADataSource=function(){};f.QInADataSource.prototype=new f.QInAComponent();f.QInADataSource.prototype._ff_c="QInADataSource";f.QInADataSource.importQd=function(a,b,n,c){var d=b;if(f.notNull(n)){if(f.notNull(d)&&!d.containsKey(n)){d=d.getStructureByKey("Analytics");if(f.notNull(d)&&!d.containsKey(n)){d=d.getStructureByKey("Definition");}}if(f.notNull(d)&&d.containsKey(n)){var t=d.getElementTypeByKey(n);if(t===f.PrElementType.STRING){return f.QFactory.createDataSourceWithType(f.MetaObjectType.INFOPROVIDER,d.getStringByKey(n));}else if(t===f.PrElementType.STRUCTURE){d=d.getStructureByKey(n);}}else if(f.notNull(d)&&!d.containsKey(n)){d=null;}}if(f.isNull(d)){return null;}var e=f.QFactory.createDataSource();var s=d.getStringByKey("System");if(f.notNull(s)){e.setSystemName(s);}var g=d.getStringByKey("Type");var m=null;if(f.notNull(g)){g=f.XString.toLowerCase(g);m=f.MetaObjectType.lookup(g);}if(f.isNull(m)){m=f.MetaObjectType.DBVIEW;}e.setType(m);f.QInADataSourceProperties.importQd(e,d);if(m===f.MetaObjectType.MULTI_SOURCE||m===f.MetaObjectType.BLENDING){var h=f.PrUtils.getListProperty(d,"Sources");if(f.notNull(h)){var j=e.getMultiSourcesBase();var k=h.size();for(var i=0;i<k;i++){var l=f.PrUtils.getStructureElement(h,i);var o=f.QInADataSource.importQd(a,l,null,c);j.add(o);}}var p=f.PrUtils.getListProperty(d,"Mappings");e.setMappings(p);}f.QInADataSourceExtDims.importQd(a,e,d);var v=b.getStringByKey("ValidationHash");if(f.isNull(v)){v=d.getStringByKey("ValidationHash");}e.setValidationHash(v);var q=b.getStructureByKey("GenericServiceDescription");if(f.notNull(q)){e.setGenericServiceDescription(q);}return e;};f.QInADataSource.exportDataSource=function(e,d,w,a){var b=f.PrFactory.createStructure();var t=d.getType();if(f.notNull(t)){if(e.mode===f.QModelFormat.INA_VALUE_HELP&&t===f.MetaObjectType.QUERY){b.putString("Type",f.MetaObjectType.QUERY_VALUEHELP.getCamelCaseName());}else if(e.mode===f.QModelFormat.INA_VALUE_HELP&&t===f.MetaObjectType.MODEL){b.putString("Type",f.MetaObjectType.MODEL_VALUEHELP.getCamelCaseName());}else{b.putString("Type",t.getCamelCaseName());}var s=d.getSystemName();if(f.notNull(s)&&e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){b.putString("System",s);}var c;if(t===f.MetaObjectType.MULTI_SOURCE){c=b.putNewList("Sources");var m=d.getMultiSources();var g=m.size();for(var i=0;i<g;i++){var h=m.get(i);var j=f.QInADataSource.exportDataSource(e,h,w,null);c.add(j);}b.put("Mappings",d.getMappings());}else if(t===f.MetaObjectType.BLENDING){var k=d.getBlendingDefinition();if(f.notNull(k)){c=f.QInADataSourceBlending.exportBlendingSources(e.getMode(),k,true);b.put("Sources",c);var l=f.QInADataSourceBlending.exportBlendingMappings(k.getMappings());b.put("Mappings",l);}}}f.QInADataSourceProperties.exportQd(e,d,b,w);f.QInADataSourceExtDims.exportQd(e,d,b);var n=d.getGenericServiceDescription();if(f.notNull(n)){b.put("GenericServiceDescription",n);}if(f.notNull(a)){a.put("DataSource",b);}return b;};f.QInADataSource.prototype.getComponentType=function(){return f.OlapComponentType.DATA_SOURCE;};f.QInADataSource.prototype.importComponent=function(i,a,m,p,c){return f.QInADataSource.importQd(i,a,"DataSource",c);};f.QInADataSource.prototype.exportComponent=function(e,m,i,a){var w=f.XMath.binaryAnd(a,f.QImExFlag.RUN_AS_USER)>0;return f.QInADataSource.exportDataSource(e,m,w,null);};f.QInAExportFactoryImpl=function(){};f.QInAExportFactoryImpl.prototype=new f.QInAExportFactory();f.QInAExportFactoryImpl.prototype._ff_c="QInAExportFactoryImpl";f.QInAExportFactoryImpl.staticSetupImpl=function(){f.QInAExportFactory.put(f.QModelFormat.INA_CLONE,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_CLONE_RENDERING,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY_NO_VARS,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_REPOSITORY_DELTA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_METADATA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_METADATA_CORE,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_METADATA_BLENDING,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_METADATA_RENDERING,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_DATA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_PERSISTED_QUERY_DATA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_DATA_BLENDING_SOURCE,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.INA_VALUE_HELP,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.LAYER,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.CSN_METADATA,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.RENDER_INFO,new f.QInAExportFactoryImpl());f.QInAExportFactory.put(f.QModelFormat.SFX,new f.QInAExportFactoryImpl());};f.QInAExportFactoryImpl.prototype.createExporter=function(a,m,c,b){if(m===f.QModelFormat.RENDER_INFO){var i=new f.QRsInfoExport();i.setupImportExport(a,m,c,b);return i;}var o=new f.QInAExportImpl();o.setupImportExport(a,m,c,b);return o;};f.QInAImportFactoryImpl=function(){};f.QInAImportFactoryImpl.prototype=new f.QInAImportFactory();f.QInAImportFactoryImpl.prototype._ff_c="QInAImportFactoryImpl";f.QInAImportFactoryImpl.staticSetupImpl=function(){f.QInAImportFactory.put(f.QModelFormat.INA_CLONE,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_CLONE_RENDERING,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA_RENDERING,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY_NO_VARS,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_REPOSITORY_DELTA,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_METADATA,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_METADATA_CORE,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_METADATA_BLENDING,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_METADATA_RENDERING,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_DATA,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.INA_DATA_REINIT,new f.QInAImportFactoryImpl());f.QInAImportFactory.put(f.QModelFormat.LAYER,new f.QInAImportFactoryImpl());};f.QInAImportFactoryImpl.prototype.createImporter=function(a,m,c){var o=new f.QInAImportImpl();o.setupImportExport(a,m,c,null);return o;};f.QInAImportFactoryImpl.prototype.createImporterWithQueryManagerCapabilities=function(a,m,q){return this.createImporter(a,m,q.getModelCapabilities());};f.QInAFilterCartesianList=function(){};f.QInAFilterCartesianList.prototype=new f.QInAComponent();f.QInAFilterCartesianList.prototype._ff_c="QInAFilterCartesianList";f.QInAFilterCartesianList.setStringIfFilterBagNotNull=function(a,e,i,n){if(f.notNull(a)&&a.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,n,i,a,f.XValueType.STRING);}};f.QInAFilterCartesianList.prototype.getComponentType=function(){return f.FilterComponentType.CARTESIAN_LIST;};f.QInAFilterCartesianList.prototype.importComponent=function(a,b,m,p,c){var d=b;var e=m;var g=p;var h=c.getFieldAccessorSingle();var j=d.getStringByKey("FieldName");var k=e;if(f.notNull(j)){var l=h.getFieldByName(j);if(f.isNull(l)){var q=g.getQueryModel();if(f.notNull(q)){var n=q.getDimensionByNameFromExistingMetadata(j);if(f.notNull(n)){var o=d.getStructureByKey("Hierarchy");if(f.isNull(o)){l=n.getFlatKeyField();}else{l=n.getHierarchyKeyField();}}}}if(f.notNull(l)){var r=d.getStructureByKey("Hierarchy");var s=null;var t=null;var u=null;if(f.notNull(r)){s=r.getStringByKey("Name");if(a.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&a.isAbap(l)){var v=r.getStringByKey("DueDate");if(f.notNull(v)){t=f.XDate.createDateFromSAPFormat(v);}u=r.getStringByKey("Version");}}if(f.isNull(k)){k=f.QFilterCartesianList._createMd(c,g,l.getMetadata(),s);k.setHierarchyInfo(s,t,u);}else{k.clear();}var w=d.getBooleanByKeyExt("ConvertToFlatSelection",false);k.setConvertToFlatFilter(w);var x=d.getListByKey("SupplementsFieldNames");if(f.notNull(x)){var z=x.size();for(var y=0;y<z;y++){var A=x.getStringAt(y);var B=h.getFieldByName(A);k.addSupplementField(B);}}var C=d.getListByKey("Elements");if(f.notNull(C)){var D=C.size();for(var i=0;i<D;i++){var E=C.getStructureAt(i);var F=a.importFilterOperation(E,k,c);k.add(F);}}}}return k;};f.QInAFilterCartesianList.prototype.exportComponent=function(e,m,i,a){var c=m;if(c.hasElements()){var b=c.getOp(0);var d=b.getComparisonOperator();if(f.notNull(d)){if(d.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){return this.exportSpatialList(e,c,i);}else if(d===f.ComparisonOperator.SEARCH){return this.exportSearchList(e,c,i);}}return this.exportStandardList(e,c,i);}return null;};f.QInAFilterCartesianList.prototype.exportStandardList=function(e,m,i){var c=m;if(c.isEmpty()){return null;}var a=c.getFieldMetadata();if(f.isNull(a)){e.addWarning(f.ErrorCodes.INVALID_FIELD,"A field has to be provided to the cartesian list.");return null;}var b=f.PrFactory.createStructure();b.putString("FieldName",a.getName());var h=c.getHierarchyName();if(f.notNull(h)){var d=c.getFilterExpression()!==null?c.getFilterExpression():c.getParent().getFilterExpression();f.QInAHierarchy.exportHierarchyForFilter(e,e.isAbap(m),b,null,d,c.getQueryManager(),a.getName(),h,c.getHierarchyDueDate(),c.getHierarchyVersion());}if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA)&&e.capabilities.supportsSupplements()){var s=c.getSupplementFieldNames();if(f.XCollectionUtils.hasElements(s)){var g=b.putNewList("SupplementsFieldNames");g.addAllStrings(s);}}var k=c.isConvertToFlatFilter();var l=b.putNewList("Elements");var n=c.size();for(var j=0;j<n;j++){var o=c.getOp(j);e.exportFilterOperation(o,l.addNewStructure());k=k||o.isConvertToFlatFilter();}if(e.capabilities.supportsConvertToFlatFilter()&&k){b.putBoolean("ConvertToFlatSelection",true);}if(f.notNull(i)){i.put("SetOperand",b);}return b;};f.QInAFilterCartesianList.prototype.exportSpatialList=function(e,c,i){if(!e.capabilities.supportsSpatialFilter()){e.addWarning(f.ErrorCodes.INVALID_OPERATOR,"System does not support spatial filtering.");return null;}var a=c.getFieldMetadata();var b=f.isNull(i)?f.PrFactory.createStructure():i;var d=b.putNewStructure("Operator");d.putString("Code","Or");var g=d.putNewList("SubSelections");var s=c.size();for(var j=0;j<s;j++){var q=c.getOp(j);var h=q.getComparisonOperator();if(f.isNull(h)){e.addError(f.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not set");return null;}if(!h.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){e.addError(f.ErrorCodes.INVALID_OPERATOR,"Comparison operator not spatial");return null;}var k=g.addNewStructure();var l=k.putNewStructure("GeometryOperand");l.putString("FieldName",a.getName());l.putString("Comparison",f.QInAConverter.lookupComparisonInA(h));if(q.getSetSign()===f.SetSign.EXCLUDING){l.putBoolean("IsExcluding",true);}var m=q.getLow();f.QInAFilterCartesianList.setStringIfFilterBagNotNull(m,e,l,"Value1");if(m.getValueType().isSpatial()){var n=m.getGeometry().getSrid();if(e.capabilities.supportsSpatialFilterSrid()&&f.notNull(n)){l.putInteger("SRID",n.getInteger());}}var o=q.getHigh();f.QInAFilterCartesianList.setStringIfFilterBagNotNull(o,e,l,"Value2");var p=q.getThird();if(f.XStringUtils.isNotNullAndNotEmpty(p.getString())){f.QInAFilterCartesianList.setStringIfFilterBagNotNull(p,e,l,"Value3");}}return b;};f.QInAFilterCartesianList.prototype.exportSearchList=function(e,c,i){var a=c.getFieldMetadata();var b=a.getValueType();var d=f.isNull(i)?f.PrFactory.createStructure():i;var g=d.putNewStructure("Operator");g.putString("Code","Or");var h=g.putNewList("SubSelections");var s=c.size();for(var j=0;j<s;j++){var q=c.getOp(j);if(q.getComparisonOperator()!==f.ComparisonOperator.SEARCH){e.addError(f.ErrorCodes.INVALID_OPERATOR,"Comparison operator is not search");return null;}var k=h.addNewStructure();var l=k.putNewStructure("SearchOperand");if(e.isAbap(c)){l.putString("FieldName",a.getName());}l.putString("AttributeName",a.getName());f.QInAValueUtils.exportFilterValue(e,"Value",l,q.getLow(),b);l.putDouble("Exactness",q.getExactness());}return d;};f.QInAFilterCartesianProduct=function(){};f.QInAFilterCartesianProduct.prototype=new f.QInAComponent();f.QInAFilterCartesianProduct.prototype._ff_c="QInAFilterCartesianProduct";f.QInAFilterCartesianProduct.iterateCartesianDimensionsNew=function(e,c,p){var s=c.size();for(var i=0;i<s;i++){var m=c.getCartesianChild(i);var a=f.PrFactory.createStructure();if(m.hasElements()){e.exportCartesianList(m,a);p.add(a);}}};f.QInAFilterCartesianProduct.prototype.getComponentType=function(){return f.FilterComponentType.CARTESIAN_PRODUCT;};f.QInAFilterCartesianProduct.prototype.importComponent=function(a,b,m,p,c){var d=b;var e=p;var g=null;var h=d.getListByKey("Elements");if(f.isNull(h)){h=d.getListByKey("SubSelections");}if(f.notNull(h)){g=f.QFilterCartesianProduct._create(c,e);var s=h.size();for(var i=0;i<s;i++){var j=h.getStructureAt(i);if(f.notNull(j)){var k=a.importCartesianList(j,null,e,c);g.add(k);}}}return g;};f.QInAFilterCartesianProduct.prototype.exportComponent=function(e,m,a,b){var c=m;if(f.notNull(c)){var d=0;var s=null;var g=c.size();for(var i=0;i<g;i++){var h=c.getCartesianChild(i);if(h.hasElements()){d++;s=h;if(d>1){break;}}}if(d>0){var j;if(f.isNull(a)){j=f.PrFactory.createStructure();}else{j=a;}if(d===1&&e.mode.isTypeOf(f.QModelFormat.INA_DATA)){return e.exportCartesianList(s,a);}var k=j.putNewStructure("Operator");k.putString("Code","And");var l=k.putNewList("SubSelections");f.QInAFilterCartesianProduct.iterateCartesianDimensionsNew(e,c,l);return k;}}return null;};f.InADocConverterSfxRepo=function(){};f.InADocConverterSfxRepo.prototype=new f.DocConverterFactory();f.InADocConverterSfxRepo.prototype._ff_c="InADocConverterSfxRepo";f.InADocConverterSfxRepo.staticSetupInAConverter=function(){f.DocConverterFactory.registerFactory(f.QModelFormat.SFX,f.QModelFormat.INA_REPOSITORY,new f.InADocConverterSfxRepo());};f.InADocConverterSfxRepo.getAccountMemberName=function(a,b,m){if(f.notNull(a)&&f.notNull(b)){var p=f.XStringUtils.concatenate5("[",a,"].[",b,"].&[");return f.XStringUtils.concatenate3(p,m,"]");}return m;};f.InADocConverterSfxRepo.processAccountMembers=function(c,a,b,d){if(f.notNull(a)&&c.getStructureByKey(f.SfxConstants.FORMULAS)!==null){var e=c.getStructureByKey(f.SfxConstants.CAPABILITY);var h=f.notNull(e)&&e.getBooleanByKeyExt(f.SfxConstants.HAS_USER_DEFINED_MEASURES,false);var F=c.getStructureByKey(f.SfxConstants.FORMULAS);var g=F.getStringByKey(f.SfxConstants.CALCULATION_MEMBERS_PREFIX);if(f.isNull(g)){g=f.SfxConstants.CALCULATION_MEMBERS_PREFIX_DEFAULT;}var s=F.getListByKey(f.SfxConstants.FORMULA_DATA);var t=a.putNewList("MembersRepo");var i=a.putNewList("PlaceholderIds");var l=a.getStringByKey("Name");if(f.notNull(s)){for(var j=0;j<s.size();j++){var n=s.get(j).asStructure();var o=n.getStringByKey(f.SfxConstants.MEMBER);var p=f.InADocConverterSfxRepo.getAccountMemberName(l,b,o);var q=f.XString.startsWith(o,g);if(q){i.addString(d.getSession().hasFeature(f.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&h?o:p);continue;}var r=t.addNewStructure();r.putBoolean("ModelDefinedMember",true);r.putString("Name",p);r.putString("Description",n.getStringByKey(f.SfxConstants.MEMBER_DESCRIPTION));r.putString("HierarchyDisplayKey",o);var u=n.getStringByKey(f.SfxConstants.ACCOUNTTYPE);r.putString("AccountType",u);r.putString("Aggregation",n.getStringByKey(f.SfxConstants.AGGREGATIONTYPE));if(n.containsKey(f.SfxConstants.SCALE)&&!n.hasNullByKey(f.SfxConstants.SCALE)){r.putInteger("NumericScale",n.getIntegerByKey(f.SfxConstants.SCALE));}if(n.containsKey(f.SfxConstants.NUMERIC_SHIFT)&&!n.hasNullByKey(f.SfxConstants.NUMERIC_SHIFT)){r.putInteger("NumericShift",n.getIntegerByKey(f.SfxConstants.NUMERIC_SHIFT));}r.putString("ExceptionAggregation",n.getStringByKey(f.SfxConstants.EXCEPTIONAGGREGATIONTYPE));var v=n.getListByKey(f.SfxConstants.AGGRDIMNAME);if(f.notNull(v)){var w=r.putNewList("ExceptionAggregationDimensions");for(var k=0;k<v.size();k++){w.addString(v.get(k).asString().getString());}}var x=n.getStringByKey(f.SfxConstants.JSONFORMULA);if(f.XStringUtils.isNotNullAndNotEmpty(x)){var y=f.JsonParserFactory.newInstance();var z=y.parse(x).asStructure();if(z.containsKey("Operator")){r.putString("CType",f.MemberType.RESTRICTED_MEASURE.getName());r.putString("MemberType","SelectionMeasure");if(f.notNull(u)&&(f.XString.isEqual(u,f.AccountType.INC.getName())||f.XString.isEqual(u,f.AccountType.LEQ.getName()))){r.putBoolean("PresentationSignReversal",true);}var A=r.putNewStructure("InAFilterExpression");A.put("Selection",z);}else{r.putString("CType",f.MemberType.FORMULA.getName());r.putString("MemberType","FormulaMeasure");r.put("Formula",z);if(n.getBooleanByKeyExt(f.SfxConstants.CALC_BEFORE_AGGR,false)){r.putString("ExecutionStep","CalculationBeforeAggregation");}}}else{r.putString("MemberType","Measure");r.putString("CType",f.MemberType.BASIC_MEASURE.getName());}var B=n.getStringByKey(f.SfxConstants.FORMULA_TYPE);if(f.XStringUtils.isNotNullAndNotEmpty(B)){r.putString("FormulaType",B);}var C=n.getListByKey(f.SfxConstants.IGNORE_EXTERNAL_DIMENSIONS);if(f.notNull(C)){var D=r.putNewList("IgnoreExternalDimensions");for(var m=0;m<C.size();m++){D.addString(C.get(m).asString().getString());}}var E=n.getStringByKey(f.SfxConstants.UNITTYPE);r.putString("UnitType",E);if(f.XString.isEqual(E,f.UnitType.UNIT.getName())){r.putString("UnitFixed",n.getStringByKey(f.SfxConstants.UNITOFMEASURE));}f.InADocConverterSfxRepo.setVisibility(r,f.XString.isEqual(r.getStringByKeyExt(f.SfxConstants.VISIBLE,f.SfxConstants.NO),f.SfxConstants.NO));f.InADocConverterSfxRepo.setMinimumDrillState(n,r,d);}}}};f.InADocConverterSfxRepo.setMinimumDrillState=function(F,t,a){if(a.getSession().hasFeature(f.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE)){var m=F.getElementTypeByKey(f.SfxConstants.MINIMUM_DRILL_STATE);if(f.notNull(m)){var b=t.putNewList("MinimumDrillState");if(m===f.PrElementType.LIST){b.addAll(F.getListByKey(f.SfxConstants.MINIMUM_DRILL_STATE));}else if(m===f.PrElementType.STRING){b.addString(F.getStringByKey(f.SfxConstants.MINIMUM_DRILL_STATE));}}}};f.InADocConverterSfxRepo.processRestrictedMeasureFormula=function(e){if(e.isStructure()){var s=e.asStructure();var k=s.getKeysAsIteratorOfString();while(k.hasNext()){var a=k.next();if(f.XString.isEqual(a,"FieldName")&&f.XString.isEqual(s.getStringByKey(a),".ID")){s.putString("FieldName","[Measures].[Measures]");}else{f.InADocConverterSfxRepo.processRestrictedMeasureFormula(s.getByKey(a));}}}else if(e.isList()){var l=e.asList();for(var i=0;i<l.size();i++){f.InADocConverterSfxRepo.processRestrictedMeasureFormula(l.get(i));}}};f.InADocConverterSfxRepo.processMeasures=function(c,t,a,b){var h=f.notNull(a);var d=f.XString.isEqual(c.getStringByKey(f.SfxConstants.TYPE),f.SfxConstants.ANALYTIC);var e=f.XString.isEqual(c.getStringByKey(f.SfxConstants.MODE),f.SfxConstants.INTEGRATED);var g=c.getStructureByKey(f.SfxConstants.CAPABILITY);var j=f.notNull(g)&&g.getBooleanByKeyExt(f.SfxConstants.HAS_USER_DEFINED_MEASURES,false);var l=f.notNull(g)&&g.getBooleanByKeyExt(f.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false);var n=f.notNull(g)&&g.getBooleanByKeyExt(f.SfxConstants.HAS_DATASET_SOURCE,false);var o=b.getSession().hasFeature(f.FeatureToggleOlap.SFX_MINIMUM_DRILL_STATE);if(h&&!j||!o&&!l&&(!d||!e)||o&&n){return;}var p=t.getStructureByKey("ModellerDimensions");var q=p.getListByKey("Dimensions");var r=q.addNewStructure();r.putBoolean("MeasureStructure",true);r.putString("CType",f.DimensionType.MEASURE_STRUCTURE.getName());r.putBoolean("IsDelta",true);var s=r.putNewList("MembersRepo");var u=null;var v=t.getStructureByKey("ModellerVariables");var w=f.isNull(v)?null:f.XStream.of(v.getListByKey("Variables")).collect(f.XStreamCollector.toSetOfString(function(X){return X.asStructure().getStringByKey("Name");}.bind(this)));if(f.XCollectionUtils.hasElements(w)){var x=t.getStructureByKey("ModellerCurrencyTranslation");if(f.XCollectionUtils.hasElements(x)){u=x.putNewList("CurrencyTranslations");}}var M=c.getListByKey(f.SfxConstants.MEASURES);if(f.notNull(M)){for(var i=0;i<M.size();i++){var y=M.getStructureAt(i);var z=y.getStringByKey(f.SfxConstants.MEASURE);var A=s.addNewStructure();A.putBoolean("ModelDefinedMember",true);A.putString("Name",z);if(y.containsKey(f.SfxConstants.NUMERIC_SCALE)&&!y.hasNullByKey(f.SfxConstants.NUMERIC_SCALE)){A.putInteger("NumericScale",y.getIntegerByKey(f.SfxConstants.NUMERIC_SCALE));}if(y.containsKey(f.SfxConstants.NUMERIC_SHIFT)&&!y.hasNullByKey(f.SfxConstants.NUMERIC_SHIFT)){A.putInteger("NumericShift",y.getIntegerByKey(f.SfxConstants.NUMERIC_SHIFT));}if(y.containsKey(f.SfxConstants.NUMERIC_PRECISION)&&!y.hasNullByKey(f.SfxConstants.NUMERIC_PRECISION)){A.putInteger("NumericPrecision",y.getIntegerByKey(f.SfxConstants.NUMERIC_PRECISION));}if(y.containsKey(f.SfxConstants.SOLVE_ORDER)&&!y.hasNullByKey(f.SfxConstants.SOLVE_ORDER)){A.putInteger("SolveOrder",y.getIntegerByKeyExt(f.SfxConstants.SOLVE_ORDER,0));}var B=y.getIntegerByKeyExt(f.SfxConstants.SCALE,-1);if(B>-1){A.putInteger("DataTypeScale",B);}var C=y.getIntegerByKeyExt(f.SfxConstants.LENGTH,-1);if(C>-1){A.putInteger("DataTypePrecision",C);}A.putString("UnitType",y.getStringByKey(f.SfxConstants.UNITTYPE));A.putStringNotNullAndNotEmpty("UnitFixed",y.getStringByKey(f.SfxConstants.MEASURE_UNITS));if(y.hasStringByKey(f.SfxConstants.DATA_TYPE_NAME)){switch(y.getStringByKey(f.SfxConstants.DATA_TYPE_NAME)){case f.SfxConstants.DATA_TYPE_DECIMAL:A.putString("DataTypeInternal","DecimalFloat");break;case f.SfxConstants.DATA_TYPE_INTEGER:A.putString("DataTypeInternal","Int");break;}}A.putStringNotNullAndNotEmpty("UnitDimension",y.getStringByKey(f.SfxConstants.UNIT_DIMENSION));A.putStringNotNullAndNotEmpty("UnitDimensionProperty",y.getStringByKey(f.SfxConstants.UNIT_DIMENSION_PROPERTY));A.putBoolean("OverrideDescription",true);A.putString("RateType",y.getStringByKey(f.SfxConstants.RATE_TYPE));if(y.containsKey(f.SfxConstants.EXTENDED)){A.putBoolean("Extended",y.getBooleanByKey(f.SfxConstants.EXTENDED));}var D=y.getStringByKey(f.SfxConstants.AGGREGATIONTYPE);var E=y.getStringByKey(f.SfxConstants.DESCRIPTION);A.putStringNotNullAndNotEmpty("ExceptionAggregation",y.getStringByKey(f.SfxConstants.EXCEPTIONAGGREGATIONTYPE));var F=y.getListByKey(f.SfxConstants.AGGREGATION_DIMENSION_NAME);if(f.notNull(F)){var G=A.putNewList("ExceptionAggregationDimensions");for(var k=0;k<F.size();k++){G.addString(F.get(k).asString().getString());}}var H=y.getStringByKey(f.SfxConstants.FORMULA);var I=y.getStringByKey(f.SfxConstants.JSONFORMULA);if(f.XStringUtils.isNotNullAndNotEmpty(H)&&f.XStringUtils.isNotNullAndNotEmpty(I)){var J=f.JsonParserFactory.newInstance();var K=J.parse(I).asStructure();if(f.XStringUtils.isNullOrEmpty(E)){E=z;}if(K.containsKey("Operator")||K.containsKey("Selection")){A.putString("CType",f.MemberType.RESTRICTED_MEASURE.getName());A.putString("MemberType","SelectionMeasure");f.InADocConverterSfxRepo.processRestrictedMeasureFormula(K);if(K.containsKey("Selection")){A.put("InAFilterExpression",K);}else{var L=A.putNewStructure("InAFilterExpression");L.put("Selection",K);}}else{A.putString("MemberType","FormulaMeasure");A.putString("CType",f.MemberType.FORMULA.getName());A.put("Formula",K);}}else{A.putString("CType",f.MemberType.BASIC_MEASURE.getName());A.putString("MemberType","Measure");var N=A.putNewStructure("MemberOperand");N.putString("AttributeName","Measures");N.putString("Comparison","=");N.putString("Value",z);}A.putString("Aggregation",D);A.putString("Description",E);var O=y.getStringByKeyExt(f.SfxConstants.REF_DIMENSIONS,"");if(f.XStringUtils.isNotNullAndNotEmpty(O)){var P=f.XStringTokenizer.splitString(O,",");var Q=A.putNewList("IgnoreExternalDimensions");for(var m=0;m<P.size();m++){Q.addString(P.get(m));}}f.InADocConverterSfxRepo.setVisibility(A,y.getBooleanByKeyExt(f.SfxConstants.VISIBLE,true));f.InADocConverterSfxRepo.setMinimumDrillState(y,A,b);var R=y.getStructureByKey(f.SfxConstants.CURRENCY_TRANSLATION);if(f.notNull(u)&&f.notNull(R)&&R.hasStringByKey(f.SfxConstants.CURRENCY_VARIABLE)&&w.contains(R.getStringByKey(f.SfxConstants.CURRENCY_VARIABLE))){var S=R.getStringByKey(f.SfxConstants.CURRENCY_VARIABLE);var T=f.XStringUtils.concatenate5("CurrencyTranslation","_","CustomVariable","_",z);A.putString("CurrencyTranslationName",T);var U=R.getStringByKey(f.SfxConstants.CURRENCY_TRANSLATION_CONFIG);if(f.notNull(U)){var V=f.JsonParserFactory.createFromString(U);if(f.notNull(V)&&V.isStructure()){var W=u.addNewStructure();W.putAll(V.asStructure());W.putString("CType","CurrencyTranslationItem");W.putString("Name",T);W.putString("Description",T);W.putNewStructure("TargetCurrency").putString("Variable",S);}}}}}};f.InADocConverterSfxRepo.setVisibility=function(t,i){if(i){t.putString("Visibility","Visible");}else{t.putString("Visibility","Hidden");}};f.InADocConverterSfxRepo.isNormalizeIntervals=function(t,a,m){var b=null;if(f.isNull(a)){var c=t.getStructureByKey("ModellerDimensions");var d=c.getListByKey("Dimensions");for(var i=0;i<d.size();i++){var e=d.getStructureAt(i);if(e.getBooleanByKeyExt("MeasureStructure",false)){b=e.getListByKey("MembersRepo");}}}else{b=a.getListByKey("MembersRepo");}if(f.notNull(b)){for(var j=0;j<b.size();j++){var g=b.getStructureAt(j);if(f.XString.isEqual(g.getStringByKey("Name"),m)){return g.getIntegerByKeyExt("NumericShift",0)===2;}}}return false;};f.InADocConverterSfxRepo.processThresholds=function(c,t,a,b){var F=c.getStructureByKey(f.SfxConstants.VISUALIZATIONS);if(f.isNull(F)){return;}var d=null;if(f.notNull(a)){d=a.getStringByKey("Name");}var D=c.getStructureByKey(f.SfxConstants.DATA_SOURCE);var e=D.getStringByKey(f.SfxConstants.OBJECT_NAME);var g=null;var h=F.getKeysAsIteratorOfString();while(h.hasNext()){var i=h.next();var j=F.getStructureByKey(i);var T=j.getStructureByKey(f.SfxConstants.THRESHOLDS);if(f.isNull(T)||T.isEmpty()){continue;}if(f.isNull(g)){var k=t.putNewStructure("FormulaExceptionManager");k.putString("CType","FormulaExceptions");g=k.putNewList("FormulaExceptionsModeler");}var m=f.InADocConverterSfxRepo.getAccountMemberName(d,b,i);var n=g.addNewStructure();n.putString("CType","FormulaException");var o=f.XStringUtils.concatenate5(f.QFormulaExceptionConstants.MODEL_THRESHOLD_PREFIX.getName(),"_[",e,"]_",i);n.putString("Name",o);n.putString("Type",f.FormulaExceptionType.BASE_MEASURE_ONLY.getName());n.putNewList("EvaluateOn");var p=n.putNewList("StructureContext");p.addNewStructure();var q=p.addNewStructure();p.addNewStructure();q.putString("MemberName",m);if(f.notNull(d)){q.putString("DimensionName",d);}else{q.putBoolean("MeasureStructure",true);}var I=T.getListByKey(f.SfxConstants.INTERVALS);if(f.isNull(I)){continue;}var r=n.putNewList("Threshold");var s=f.InADocConverterSfxRepo.isNormalizeIntervals(t,a,m);for(var l=0;l<I.size();l++){var u=I.getStructureAt(l);var v=u.getStringByKey(f.SfxConstants.NAME);var w=u.getStringByKey(f.SfxConstants.LOW);var x=f.XDouble.convertFromStringWithDefault(w,0);var y=u.getBooleanByKey(f.SfxConstants.LOW_INCLUSIVE);var z=u.getStringByKey(f.SfxConstants.HIGH);var A=f.XDouble.convertFromStringWithDefault(z,0);var B=u.getBooleanByKey(f.SfxConstants.HIGH_INCLUSIVE);var C=u.getStringByKey(f.SfxConstants.COLOR);if(s){x=x/100;A=A/100;}var E=r.addNewStructure();E.putString("Name",f.XStringUtils.concatenate3(o,":",f.XInteger.convertToString(l)));E.putString("Text",v);E.putInteger("AlertLevel",f.AlertLevel.GOOD_1.getLevel());E.putString("Color",C);if(!f.XStringUtils.isNullOrEmpty(w)&&f.XStringUtils.isNullOrEmpty(z)){E.putDouble("Low",x);if(y){E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.GREATER_EQUAL));}else{E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.GREATER_THAN));}}else if(f.XStringUtils.isNullOrEmpty(w)&&!f.XStringUtils.isNullOrEmpty(z)){E.putDouble("Low",A);if(B){E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.LESS_EQUAL));}else{E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.LESS_THAN));}}else if(!f.XStringUtils.isNullOrEmpty(w)&&!f.XStringUtils.isNullOrEmpty(z)){if(y&&B){E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.BETWEEN));E.putDouble("Low",x);E.putDouble("High",A);}else if(!y&&!B){E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.BETWEEN_EXCLUDING));E.putDouble("Low",x);E.putDouble("High",A);}else{E.remove("Name");E.putString("Name",f.XStringUtils.concatenate4(o,":",f.XInteger.convertToString(l),"A"));E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL));if(y){E.putDouble("Low",x);}else{E.putDouble("Low",A);}E=r.addNewStructure();E.putString("Name",f.XStringUtils.concatenate4(o,":",f.XInteger.convertToString(l),"B"));E.putString("Text",v);E.putInteger("AlertLevel",f.AlertLevel.GOOD_1.getLevel());E.putString("Color",C);E.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.BETWEEN_EXCLUDING));E.putDouble("Low",x);E.putDouble("High",A);}}}}};f.InADocConverterSfxRepo.processCurrencyTranslationSettings=function(c,t,a,h){if(f.notNull(a)&&a.getBooleanByKeyExt(f.SfxConstants.CT_ENABLED,false)){var b=t.putNewStructure("ModellerCurrencyTranslation");b.putBoolean("PlanningParametersForCurrencyTranslation",a.getBooleanByKeyExt(f.SfxConstants.QUERY_BASED_CURRENCY_TRANSLATION,false));b.putInteger("MaxNumberOfCurrencyTranslations",c.getIntegerByKeyExt(f.SfxConstants.NUM_OF_CONVERSIONS,-1));b.putBoolean("RateTypeFromAccount",h&&f.XString.isEqual(f.SfxConstants.LEADING_STRUCTURE_ACCOUNT,c.getStringByKeyExt(f.SfxConstants.LEADING_STRUCTURE,f.SfxConstants.LEADING_STRUCTURE_MEASURES)));b.putStringNotNullAndNotEmpty("CurrencyTranslationTimeDimension",c.getStringByKey(f.SfxConstants.CURRENCY_CONVERSION_TIME_DIMENSION));b.putStringNotNullAndNotEmpty("DefaultCurrency",c.getStringByKey(f.SfxConstants.DEFAULT_CURRENCY));b.putStringNotNullAndNotEmpty("CurrencyRateTableId",c.getStringByKey(f.SfxConstants.CURRENCY_RATE_TABLE_ID));var d=c.getListByKey(f.SfxConstants.CATEGORIES);var i;var s;var e;var n;if(f.XCollectionUtils.hasElements(d)){var g=b.putNewList("Categories");s=d.size();for(i=0;i<s;i++){e=g.addNewStructure();n=d.getStructureAt(i).getStringByKey(f.SfxConstants.CATEGORY);e.putString("Name",n);}}var j=c.getStructureByKey(f.SfxConstants.CURRENCY_DETAILS);if(f.XCollectionUtils.hasElements(j)){b.putStringNotNullAndNotEmpty("CurrencyDimension",j.getStringByKey(f.SfxConstants.CURRENCY_DIMENSION));}var r=c.getStructureByKey(f.SfxConstants.RATE_DATA);if(f.XCollectionUtils.hasElements(r)){var k=r.getListByKey(f.SfxConstants.CURRENCIES);var l=b.putNewList("Currencies");if(f.XCollectionUtils.hasElements(k)){s=k.size();for(i=0;i<s;i++){e=l.addNewStructure();n=k.getStringAt(i);e.putString("Name",n);e.putString("Text",n);}}var m=r.getListByKey(f.SfxConstants.RATE_VERSIONS);var o=b.putNewList("RateVersions");if(f.XCollectionUtils.hasElements(m)){s=m.size();for(i=0;i<s;i++){e=o.addNewStructure();n=m.getStringAt(i);e.putString("Name",n);e.putString("Text",n);}}var p=r.getListByKey(f.SfxConstants.RATE_TYPES);var q=b.putNewList("RateTypes");if(f.XCollectionUtils.hasElements(p)){s=p.size();for(i=0;i<s;i++){e=q.addNewStructure();n=p.getStringAt(i);e.putString("Name",n);}}}}};f.InADocConverterSfxRepo.processMetadataProperties=function(c,t){var m=t.putNewStructure("ModellerMetadataProperties");f.InADocConverterSfxRepo.processEpmObjectProperties(c,m);f.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty(c,m);f.InADocConverterSfxRepo.processIsPlanningProperty(c,m);f.InADocConverterSfxRepo.processLeadingStructure(c,m);};f.InADocConverterSfxRepo.processEpmObjectProperties=function(c,m){m.putString("Mode",c.getStringByKey(f.SfxConstants.MODE));m.putString("EpmQuerySourceName",c.getStringByKey(f.SfxConstants.EPM_QUERY_SOURCE_NAME));m.putString("SchemaName",c.getStringByKey(f.SfxConstants.SCHEMA_NAME));m.putString("PackageName",c.getStringByKey(f.SfxConstants.PACKAGE_NAME));m.putString("Name",c.getStringByKey(f.SfxConstants.NAME));m.putString("ShortDescription",c.getStringByKey(f.SfxConstants.SHORT_DESCRIPTION));};f.InADocConverterSfxRepo.processHasUserDefinedMeasuresProperty=function(c,m){var a=c.getStructureByKey(f.SfxConstants.CAPABILITY);var h=f.notNull(a)&&a.getBooleanByKeyExt(f.SfxConstants.HAS_USER_DEFINED_MEASURES,false);m.putBoolean("HasUserDefinedMeasures",h);};f.InADocConverterSfxRepo.processIsPlanningProperty=function(c,m){var d=c.getStructureByKey(f.SfxConstants.DATA_SOURCE);var i=f.notNull(d)&&f.XString.isEqual(d.getStringByKey(f.SfxConstants.DATA_SOURCE_TYPE),f.SfxConstants.DATA_SOURCE_TYPE_PLANNING);m.putBoolean("IsPlanning",i);};f.InADocConverterSfxRepo.processLeadingStructure=function(c,m){var s=c.getStringByKeyExt(f.SfxConstants.LEADING_STRUCTURE,f.SfxConstants.LEADING_STRUCTURE_MEASURES);if(f.XString.isEqual(s,f.SfxConstants.LEADING_STRUCTURE_ACCOUNT)){m.putString("LeadingStructure","AccountStructure");}else if(f.XString.isEqual(s,f.SfxConstants.LEADING_STRUCTURE_MEASURES)){m.putString("LeadingStructure","MeasureStructure");}else if(f.XString.isEqual(s,f.SfxConstants.LEADING_STRUCTURE_NON_MEASURES)){m.putString("LeadingStructure","SecondaryStructure");}};f.InADocConverterSfxRepo.processExtendedDimensions=function(c,t){var e=c.getListByKey(f.SfxConstants.EXTENDED_DIMENSIONS);if(f.notNull(e)&&!e.isEmpty()){var a=t.getStructureByKey("ModellerDimensions");var b=a.putNewList("ExtendedDimensions");for(var i=0;i<e.size();i++){var E=e.getStructureAt(i);var s=E.getStructureByKey(f.SfxConstants.EXTENSION_DEFINITION);if(f.notNull(s)){var l=s.getStringByKey(f.SfxConstants.LOCATION_TYPE);if(f.notNull(l)){var d=s.getStructureByKey(f.SfxConstants.DIMENSION);if(f.notNull(d)){var n=d.getStringByKey(f.SfxConstants.NAME);if(f.isNull(n)){n=d.getStructureByKey(f.SfxConstants.DATA_SOURCE_1).getStringByKey(f.SfxConstants.OBJECT_NAME_1);}if(f.notNull(n)){var g=b.addNewStructure();g.putString("Name",n);g.putString("LocationType",l);}}}}}}};f.InADocConverterSfxRepo.processCustomVariableSettings=function(c,t){var i;var s;var v=c.getListByKey(f.SfxConstants.VARIABLES);if(f.notNull(v)){var o=f.PrFactory.createList();var r=c.getStructureByKey(f.SfxConstants.RATE_DATA);if(f.XCollectionUtils.hasElements(r)){var a=r.getListByKey(f.SfxConstants.CURRENCIES);if(f.XCollectionUtils.hasElements(a)){s=a.size();for(i=0;i<s;i++){var b=o.addNewStructure();var n=a.getStringAt(i);b.putString("Name",n);b.putString("Text",n);}}}var d=t.putNewStructure("ModellerVariables").putNewList("Variables");s=v.size();for(i=0;i<s;i++){var e=v.getStructureAt(i);var T=e.getStringByKey(f.SfxConstants.VARIABLE_TYPE);if(f.XString.isEqual(T,f.SfxConstants.VARIABLE_TYPE_LOCAL)){var g=d.addNewStructure();g.putStringNotNullAndNotEmpty("Name",e.getStringByKey(f.SfxConstants.VARIABLE));g.putStringNotNullAndNotEmpty("Text",e.getStringByKey(f.SfxConstants.DESCRIPTION));g.putBoolean("CustomVariable",true);var m=f.XString.isEqual(e.getStringByKey(f.SfxConstants.VARIABLE_MANDATORY),"true")||e.getBooleanByKeyExt(f.SfxConstants.VARIABLE_MANDATORY,false);g.putString("InputType",m?"Mandatory":"Optional");g.putString("CType","OptionListVariable");g.putString("ProcessingType",e.getStringByKey(f.SfxConstants.VARIABLE_PROCESSING_TYPE));var h=e.getStringByKey(f.SfxConstants.DEFAULT_VALUE);if(f.XStringUtils.isNotNullAndNotEmpty(h)){g.putNewList("OptionValues").addString(h);}g.put("Options",f.PrFactory.createListDeepCopy(o));}}if(!f.XCollectionUtils.hasElements(d)){t.remove("ModellerVariables");}}};f.InADocConverterSfxRepo.prototype.newDocConverter=function(s,t){return new f.InADocConverterSfxRepo();};f.InADocConverterSfxRepo.prototype.processJsonContent=function(a,c){var t=f.PrFactory.createStructure();var j=c.getJsonContent();if(f.isNull(j)){return t;}var s=j.asStructure();var d=s.getStructureByKey(f.SfxConstants.DATA);if(f.isNull(d)){return t;}var C=d.getStructureByKey(f.SfxConstants.CDATA);if(f.isNull(C)){return t;}var D=C.getStructureByKey(f.SfxConstants.DATA_SOURCE);t.put("DataSource",D);var b=t.putNewStructure("ModellerDefinition");var e=C.getBooleanByKeyExt(f.SfxConstants.IS_BLENDED_CUBE,false);if(e){return t;}var g=C.getListByKey(f.SfxConstants.DIMENSIONS);var h=f.XString.isEqual(C.getStringByKey(f.SfxConstants.MODE),f.SfxConstants.INTEGRATED);var k=b.putNewStructure("ModellerDimensions");var l=k.putNewList("Dimensions");var m=null;var n=null;for(var i=0;i<g.size();i++){var o=g.getStructureAt(i);var p=h?o.getStringByKey(f.SfxConstants.COLUMN_NAME):o.getStringByKey(f.SfxConstants.DIMENSION_ID);var q=o.getStringByKey(f.SfxConstants.TYPE);var r=o.getStructureByKey(f.SfxConstants.FISCAL_CONFIG);var u=o.getStructureByKey(f.SfxConstants.TIME_CONFIG);var v=o.getBooleanByKey(f.SfxConstants.IS_USER_MANAGED);var w=a.getSession().hasFeature(f.FeatureToggleOlap.SFX_DIMENSION_CUSTOMIZED_DESC)?o.getStringByKey(f.SfxConstants.CUSTOMIZED_DESCRIPTION):null;var x=a.getSession().hasFeature(f.FeatureToggleOlap.SFX_HIDDEN_DIMENSIONS)&&o.getBooleanByKey(f.SfxConstants.IS_HIDDEN);var y=null;if(f.XStringUtils.isNotNullAndNotEmpty(p)&&(f.XString.isEqual(q,"Account")||f.notNull(r)||x||f.XStringUtils.isNotNullAndNotEmpty(w))){y=l.addNewStructure();y.putString("Name",p);y.putBoolean("IsDelta",true);y.putBoolean("IsUserManaged",v);if(f.XString.isEqual(q,"Account")){y.putString("CType",f.DimensionType.ACCOUNT.getName());y.putString("AccountTypeAttributeName",o.getStringByKey(f.SfxConstants.ACCOUNTTYPEATTRIBUTENAME));n=o.getStringByKey(f.SfxConstants.DEFAULT_HIERARCHY);m=y;}else{y.putString("CType",f.OlapComponentType.ABSTRACT_DIMENSION.getName());}if(f.notNull(r)){y.putBoolean("FiscalEnabled",r.getBooleanByKeyExt(f.SfxConstants.ENABLED,false));var z=r.getByKey(f.SfxConstants.MONTH_SHIFT);if(f.notNull(z)&&z.isNumeric()){y.putInteger("FiscalShift",f.XLong.convertToInt(r.getLongByKey(f.SfxConstants.MONTH_SHIFT)));}else{y.putInteger("FiscalShift",f.XInteger.convertFromStringWithDefault(r.getStringByKey(f.SfxConstants.MONTH_SHIFT),0));}y.putString("FiscalDisplayPeriod",r.getStringByKey(f.SfxConstants.DISPLAY_PERIOD));}if(x){y.putBoolean("IsHidden",true);}if(f.XStringUtils.isNotNullAndNotEmpty(w)){y.putString("Description",w);}}if(f.notNull(u)&&u.hasElements()){if(f.isNull(y)){y=l.addNewStructure();}var A="";var B=u.getIntegerByKey(f.SfxConstants.ADDITIONAL_PERIODS);var E=u.getStringByKey(f.SfxConstants.PERIOD_PREFIX);var F=u.getBooleanByKey(f.SfxConstants.USE_PREFIX);var G=u.getBooleanByKey(f.SfxConstants.ENABLE_PATTERN);if(F&&f.XStringUtils.isNotNullAndNotEmpty(E)){A=E;}else if(!F&&B===0){A="";}else if(!F&&B>0){A="P";}y.putInteger("additionalPeriods",B);y.putBoolean("useMonthLabel",!F);y.putString("periodPrefix",A);y.putBoolean("TimeConfigEnablePattern",G);}}var H=C.getStructureByKey(f.SfxConstants.CAPABILITY);f.InADocConverterSfxRepo.processCurrencyTranslationSettings(C,b,H,f.notNull(m));f.InADocConverterSfxRepo.processCustomVariableSettings(C,b);var S=s.getBooleanByKeyExt(f.SfxConstants.SKIP_MEMBER_AND_THRESHOLD_PROCESSING,false);if(!S){f.InADocConverterSfxRepo.processAccountMembers(C,m,n,a);f.InADocConverterSfxRepo.processMeasures(C,b,m,a);f.InADocConverterSfxRepo.processThresholds(C,b,m,n);}f.InADocConverterSfxRepo.processMetadataProperties(C,b);f.InADocConverterSfxRepo.processExtendedDimensions(C,b);return t;};f.InADocConverterSfxRepo.prototype.convert=function(a,c,t){var m=f.MessageManager.createMessageManagerExt(a.getSession());var b=f.XContent.createContent();b.setJsonObject(this.processJsonContent(a,c));b.setContentType(f.QModelFormat.INA_REPOSITORY);var e=f.ExtResult.create(b,m);return e;};f.InADocConverterUqmRepo=function(){};f.InADocConverterUqmRepo.prototype=new f.DocConverterFactory();f.InADocConverterUqmRepo.prototype._ff_c="InADocConverterUqmRepo";f.InADocConverterUqmRepo.staticSetupInAConverter=function(){f.DocConverterFactory.registerFactory(f.QModelFormat.UQM,f.QModelFormat.INA_REPOSITORY,new f.InADocConverterUqmRepo());};f.InADocConverterUqmRepo.prototype.newDocConverter=function(s,t){return new f.InADocConverterUqmRepo();};f.InADocConverterUqmRepo.prototype.convert=function(a,c,t){var j=c.getJsonContent();var d=j.asStructure();var m=f.MessageManager.createMessageManagerExt(a.getSession());var b=d.getStringByKey("DataSourceName");var e=f.PrFactory.createStructure();if(f.notNull(b)){var g=f.QFactory.createDataSourceWithFqn(b);var h=f.QInAExportFactory.createForData(a,null);var D=h.exportDataSource(g,false);e.put("DataSource",D);}var i=f.XContent.createContent();i.setJsonObject(e);i.setContentType(f.QModelFormat.INA_REPOSITORY);var k=f.ExtResult.create(i,m);return k;};f.InAFusion=function(){};f.InAFusion.prototype=new f.QDocFusionFactory();f.InAFusion.prototype._ff_c="InAFusion";f.InAFusion.staticSetup=function(){f.QDocFusionFactory.registerFactory(new f.InAFusion());};f.InAFusion.prototype.m_application=null;f.InAFusion.prototype.newDocFusion=function(a){var n=new f.InAFusion();n.setupApplicationContext(a);return n;};f.InAFusion.prototype.setupApplicationContext=function(a){this.m_application=a;};f.InAFusion.prototype.processFusion=function(s,l,c,a){var b=f.InAFusionResult.create(this.m_application,a);return f.InAFusionMainAction.createAndRun(s,l,c,b);};f.InAQMgrStartupBlending=function(){};f.InAQMgrStartupBlending.prototype=new f.XObject();f.InAQMgrStartupBlending.prototype._ff_c="InAQMgrStartupBlending";f.InAQMgrStartupBlending.create=function(s){var n=new f.InAQMgrStartupBlending();n.m_syncAction=s;n.m_executedQueryManagers=f.XList.create();n.m_metadataSerializationFunctions=f.XList.create();return n;};f.InAQMgrStartupBlending.prototype.m_syncAction=null;f.InAQMgrStartupBlending.prototype.m_implicitBatchStarted=false;f.InAQMgrStartupBlending.prototype.m_hasPreQueries=false;f.InAQMgrStartupBlending.prototype.m_executedQueryManagers=null;f.InAQMgrStartupBlending.prototype.m_metadataSerializationFunctions=null;f.InAQMgrStartupBlending.prototype.m_blendingMgrFunctionSupplier=null;f.InAQMgrStartupBlending.prototype.m_blendingMgrSyncType=null;f.InAQMgrStartupBlending.prototype.m_mainSequence=null;f.InAQMgrStartupBlending.prototype.releaseObject=function(){this.m_syncAction=null;this.m_executedQueryManagers=f.XObjectExt.release(this.m_executedQueryManagers);this.m_metadataSerializationFunctions=f.XObjectExt.release(this.m_metadataSerializationFunctions);this.m_blendingMgrFunctionSupplier=null;this.m_blendingMgrSyncType=null;this.m_mainSequence=f.XObjectExt.release(this.m_mainSequence);};f.InAQMgrStartupBlending.prototype.prepare=function(s){var q=this.m_syncAction.getQueryManager();var a=q.getServiceConfig();var b=a.getBlendingDefinition();var c=b.getSources();if(c.isEmpty()){this.m_syncAction.addError(f.ErrorCodes.INVALID_STATE,"No blending sources set");return;}var d=b.getBlendingHost();if(f.isNull(d)){this.m_syncAction.addError(f.ErrorCodes.INVALID_STATE,"Could not find a suitable blending host");return;}a.setSystemName(d.getSystemName());this.m_implicitBatchStarted=false;this.m_hasPreQueries=false;if(b.isRemoteBlending()){if(!this.executeRemoteQueries(s,c,d)){return;}}else{if(this.m_syncAction.getSession().hasFeature(f.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){for(var i=0;i<c.size();i++){var l=c.get(i).getQueryModel();var e=f.QFilterUtil.collectFilterAcrossModels(l);f.XCollectionUtils.forEach(e,function(h){var j=h.processLovQueriesExecution(l,s,null,null);if(f.notNull(j)){if(f.isNull(this.m_mainSequence)){this.m_mainSequence=f.SyncActionSequence.create(s,this,f.QueryManagerMode.BLENDING,this.m_syncAction);}this.m_mainSequence.addAction(j);}}.bind(this));}}if(f.isNull(this.m_mainSequence)){f.XCollectionUtils.forEach(c,function(h){h.getQueryModel().generateTransientObjects();}.bind(this));}}var p=this.getBlendingPreQueries(c);if(p.hasElements()){var g=q.getPreQueryExecutor();if(!g.serializeRemotePreQueries(f.SyncType.BLOCKING,d.getSystemName(),p,null)){this.m_syncAction.addAllMessages(g);return;}this.startImplicitBatchMode();this.executePreQueries(p,d);this.m_hasPreQueries=true;}};f.InAQMgrStartupBlending.prototype.process=function(r,s){this.m_blendingMgrFunctionSupplier=r;this.m_blendingMgrSyncType=s;if(this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation();}f.XObjectExt.release(this);}};f.InAQMgrStartupBlending.prototype.executeBlendingQueryManagerCreation=function(){var b=this.m_blendingMgrFunctionSupplier.createBlendingFunction();if(this.m_hasPreQueries){if(f.notNull(this.m_mainSequence)){this.m_mainSequence.setMainAction(f.RpcBlendFunctionProcessExecutionAction.createAction(b,this.m_syncAction.getQueryManager()));this.stopImplicitBatchMode(this.m_implicitBatchStarted,this.m_blendingMgrSyncType);this.m_mainSequence.processSyncAction(f.SyncType.NON_BLOCKING,this,f.QueryManagerMode.BLENDING);}else{b.processFunctionExecution(f.SyncType.NON_BLOCKING,this.m_syncAction,f.QueryManagerMode.BLENDING);this.stopImplicitBatchMode(this.m_implicitBatchStarted,this.m_blendingMgrSyncType);}}else{b.processFunctionExecution(this.m_blendingMgrSyncType,this.m_syncAction,f.QueryManagerMode.BLENDING);}var s=this.m_syncAction.getQueryManager().getServiceConfig();var a=s.getBlendingDefinition().getSources();for(var i=0;i<a.size();i++){a.get(i).getQueryModel().destroyTransientObjects();}};f.InAQMgrStartupBlending.prototype.allQueriesExecuted=function(){for(var i=0;i<this.m_executedQueryManagers.size();i++){if(this.m_executedQueryManagers.get(i).getResultSetSyncState().isNotInSync()){return false;}}for(var k=0;k<this.m_metadataSerializationFunctions.size();k++){if(this.m_metadataSerializationFunctions.get(k).getSyncState().isNotInSync()){return false;}}return true;};f.InAQMgrStartupBlending.prototype.executeRemoteQueries=function(s,b,a){for(var i=0;i<b.size();i++){var c=b.get(i);var q=c.getQueryModel();var d=q.getQueryManager();c.setIsRemoteSource(!f.XString.isEqual(a.getSystemName(),this.getSystemName(c)));if(!q.getModelCapabilities().supportsRemoteBlending()||!a.supportsRemoteBlending()){f.noSupport();}if(c.isRemoteSource()){q.getUniversalDisplayHierarchiesBase().updateIncludedDimensions();q.generateTransientObjects();c.updatePersistenceIdentifier(a);q.destroyTransientObjects();var o=d.getOlapEnv();var e=!a.getSystemDescription().isSystemMappingValid(d.getSystemDescription())?o.getCachedRemoteBlendingData(d.getResultSetPersistenceIdentifier()):null;if(f.isNull(e)||f.XStringUtils.isNullOrEmpty(e.getView())){if(c.isDelayCubeRequest()&&d.getSystemType().isTypeOf(f.SystemType.HANA)){d.setResultSetPersistenceTargetType(f.BlendingPersistenceType.VIEW);var g=this.createHanaMetadataSerializationFunction(d);this.m_metadataSerializationFunctions.add(g);g.processFunctionExecution(s,this,c);}else{this.m_executedQueryManagers.add(d);d.processQueryExecutionAsBlendingSource(s,c.isDelayCubeRequest()?f.BlendingPersistenceType.VIEW:f.BlendingPersistenceType.ALL_DATA,this,c);}}else{d.getActiveResultSetContainer().setSerializedData(e.getView(),e.getCube());}}else{q.generateTransientObjects();if(q.getModelCapabilities().supportsCubeCache()){c.updatePersistenceIdentifier(null);q.addOptimizerHint(f.ExecutionEngine.MDS,f.OptimizerHint.CUBE_CACHE_WITH_ID.getName(),"true");this.m_executedQueryManagers.add(d);d.processQueryExecutionAsBlendingSource(s,f.BlendingPersistenceType.ALL_DATA,this,c);}}}return this.m_syncAction.isValid();};f.InAQMgrStartupBlending.prototype.onRemoteQueryExecuted=function(m,b){var q=b.getQueryModel();q.addQueryModelIdToMessages(m.getMessages());this.m_syncAction.addAllMessages(m);if(f.notNull(this.m_blendingMgrFunctionSupplier)&&this.allQueriesExecuted()){if(this.m_syncAction.isValid()){this.executeBlendingQueryManagerCreation();}else{this.m_syncAction.callListeners(true);}f.XObjectExt.release(this);}};f.InAQMgrStartupBlending.prototype.onQueryExecuted=function(e,r,c){this.onRemoteQueryExecuted(e,c);};f.InAQMgrStartupBlending.prototype.createHanaMetadataSerializationFunction=function(q){var i=f.PrFactory.createStructure();var a=q.setInnerStructure(i,"Metadata",null);a.getStructureByKey("DataSource").remove("ValidationHash");var s=q.getResultSetPersistenceSchema();var t=q.getResultSetPersistenceTable();var b=a.putNewStructure("ResultSetFeatureRequest");b.putString("ResultFormat","SerializedData");if(f.XStringUtils.isNotNullAndNotEmpty(s)&&f.XStringUtils.isNotNullAndNotEmpty(t)){b.putString("ResultSetPersistanceSchema",s);b.putString("ResultSetPersistanceTable",t);b.putString("ResultSetPersistanceIdentifier",q.getResultSetPersistenceIdentifier());}var r=q.createFunction();r.getRpcRequest().setRequestStructure(i);return r;};f.InAQMgrStartupBlending.prototype.onFunctionExecuted=function(e,r,c){var b=c;var q=b.getQueryModel().getQueryManager();var v=null;var a=null;var s=r.getRootElement().getStructureByKey("SerializedData");if(e.isValid()&&f.notNull(s)){v=s.getStringByKey("View");a=s.getStringByKey("Cube");q.getOlapEnv().cacheRemoteBlendingData(q,v,a);}q.getActiveResultSetContainer().setSerializedData(v,a);this.onRemoteQueryExecuted(e,b);};f.InAQMgrStartupBlending.prototype.getBlendingPreQueries=function(b){var p=f.XList.create();for(var i=0;i<b.size();i++){var s=b.get(i);var a=s.getQueryModel();if(!s.isRemoteSource()||s.isDelayCubeRequest()){p.addAll(a.getPreQueries());}if(a.isBlendingModel()){p.addAll(this.getBlendingPreQueries(a.getBlendingSources()));}}return p;};f.InAQMgrStartupBlending.prototype.startImplicitBatchMode=function(){var c=this.m_syncAction.getApplication().getConnectionPool();var s=this.m_syncAction.getQueryManager().getSystemName();if(c.isBatchModeEnabled(s)){this.m_implicitBatchStarted=false;}else{c.enableBatchMode(s);this.m_implicitBatchStarted=true;}};f.InAQMgrStartupBlending.prototype.stopImplicitBatchMode=function(i,s){if(i&&this.m_syncAction.getQueryManagerBase().getPreQueryName()===null){var c=this.m_syncAction.getApplication().getConnectionPool();var a=this.m_syncAction.getQueryManager().getSystemName();c.disableBatchMode(s,a);}};f.InAQMgrStartupBlending.prototype.executePreQueries=function(p,b){for(var i=0;i<p.size();i++){var a=p.get(i);var c=a.getObject().getQueryManager();c.getPreQueryExecutor().processExecutionAsPreQueryInBatch(b.getSystemName(),a.getName(),null);}};f.InAQMgrStartupBlending.prototype.getSystemName=function(s){var q=s.getQueryModel().getQueryManager();return q.getSystemName();};f.XCmdCreateQueryManager=function(){};f.XCmdCreateQueryManager.prototype=new f.XCommand();f.XCmdCreateQueryManager.prototype._ff_c="XCmdCreateQueryManager";f.XCmdCreateQueryManager.CLAZZ=null;f.XCmdCreateQueryManager.staticSetup=function(){f.XCmdCreateQueryManager.CLAZZ=f.XClass.create(f.XCmdCreateQueryManager);};f.XCmdCreateQueryManager.prototype.getCommandResultClass=function(){return f.XCmdCreateQueryManagerResult.CLAZZ;};f.XCmdCreateQueryManagerResult=function(){};f.XCmdCreateQueryManagerResult.prototype=new f.XCommandResult();f.XCmdCreateQueryManagerResult.prototype._ff_c="XCmdCreateQueryManagerResult";f.XCmdCreateQueryManagerResult.CLAZZ=null;f.XCmdCreateQueryManagerResult.staticSetup=function(){f.XCmdCreateQueryManagerResult.CLAZZ=f.XClass.create(f.XCmdCreateQueryManagerResult);};f.XCmdCreateQueryManagerResult.prototype.process=function(){var a=this.getParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION);var s=this.getParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM);var d=this.getParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE);var i=this.getParameter(f.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY);var b=f.QueryServiceConfig.create(a);b.setSystemName(s);b.setDataSource(this.createDataSource(d,i,b));var c=this.getParameter(f.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY);if(f.notNull(c)){b.setModellerContent(c);}if(f.notNull(i)){b.setDefinitionByStructure(f.QModelFormat.INA_REPOSITORY,i);var e=i.getStringByKeyExt("ExperimentalFeatures",null);var g=this.getParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);f.XCommandUtil.handleInactiveCapabilities(b,e,g);}b.processQueryManagerCreation(this.getSyncType(),this,null);};f.XCmdCreateQueryManagerResult.prototype.createDataSource=function(d,i,q){var a=f.QFactory.createDataSource();a.setFullQualifiedName(d);if(f.notNull(i)){var b=i.getStructureByKey("DataSource");if(f.notNull(b)){var c=f.QInAImportFactory.createForMetadata(q.getApplication(),null);c.importDataSourceExternalDimensions(b,a);var e=this.getParameter(f.CmdCreateQueryManager.PARAM_I_EXT_DIMS_INFO);f.XCommandUtil.updateExtendedDimensionPackages(a.getExtendedDimensionsBase(),e);}}return a;};f.XCmdCreateQueryManagerResult.prototype.onQueryManagerCreated=function(e,q,c){this.getMessageManager().addAllMessages(e);if(e.isValid()){this.addResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,q);}this.onProcessFinished();};f.XCmdDeserializeBlending=function(){};f.XCmdDeserializeBlending.prototype=new f.XCommand();f.XCmdDeserializeBlending.prototype._ff_c="XCmdDeserializeBlending";f.XCmdDeserializeBlending.CLAZZ=null;f.XCmdDeserializeBlending.staticSetup=function(){f.XCmdDeserializeBlending.CLAZZ=f.XClass.create(f.XCmdDeserializeBlending);};f.XCmdDeserializeBlending.prototype.getCommandResultClass=function(){return f.XCmdDeserializeBlendingResult.CLAZZ;};f.XCmdDeserializeBlendingResultBase=function(){};f.XCmdDeserializeBlendingResultBase.prototype=new f.XCommandResult();f.XCmdDeserializeBlendingResultBase.prototype._ff_c="XCmdDeserializeBlendingResultBase";f.XCmdDeserializeBlendingResultBase.prototype.m_queryManagers=null;f.XCmdDeserializeBlendingResultBase.prototype.m_aliases=null;f.XCmdDeserializeBlendingResultBase.prototype.m_sourceCount=0;f.XCmdDeserializeBlendingResultBase.prototype.m_importedSourcesCount=0;f.XCmdDeserializeBlendingResultBase.prototype.m_rootElement=null;f.XCmdDeserializeBlendingResultBase.prototype.releaseObject=function(){f.XCommandResult.prototype.releaseObject.call(this);this.m_queryManagers=f.XObjectExt.release(this.m_queryManagers);this.m_aliases=f.XObjectExt.release(this.m_aliases);this.m_rootElement=f.XObjectExt.release(this.m_rootElement);};f.XCmdDeserializeBlendingResultBase.prototype.process=function(){var s=this.getParameterStringStrict(f.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var a=this.getParameterStrict(f.CmdDeserializeBlending.PARAM_I_APPLICATION);var j=f.JsonParserFactory.newInstance();this.m_rootElement=j.parse(s);f.XObjectExt.release(j);var b=this.m_rootElement.getStructureByKey("DataSource");var c=b.getListByKey("Sources");this.m_aliases=f.XListOfString.create();this.m_queryManagers=f.XList.create();this.m_sourceCount=c.size();this.m_importedSourcesCount=0;for(var i=0;i<this.m_sourceCount;i++){var d=c.getStructureAt(i);var e=d.getStringByKey("AliasName");this.m_aliases.add(e);this.importSourceQueryModel(a,d,e,f.XIntegerValue.create(i));}};f.XCmdDeserializeBlendingResultBase.prototype.onCommandProcessed=function(e,c,a){this.getMessageManager().addAllMessages(e);f.MessageUtil.checkNoError(e);this.onQueryManagerImported(c,a.getInteger());this.m_importedSourcesCount++;if(this.m_importedSourcesCount===this.m_sourceCount){this.onAllQueryManagersImported();}};f.XCmdDeserializeBlendingResultBase.prototype.getDataSourceName=function(i){var d=f.QFactory.createDataSource();d.setType(f.MetaObjectType.lookup(i.getStringByKey("Type")));d.setSchemaName(i.getStringByKey("SchemaName"));d.setPackageName(i.getStringByKey("PackageName"));d.setObjectName(i.getStringByKey("ObjectName"));d.setDataArea(i.getStringByKey("DataArea"));return d.getFullQualifiedName();};f.XCmdDeserializeBlendingResultBase.prototype.getSystemName=function(q){var s=this.getParameter(f.CmdDeserializeBlending.PARAM_I_SYSTEMS);if(f.notNull(s)&&s.containsKey(q)){return s.getByKey(q);}var a=this.getParameterString(f.CmdDeserializeBlending.PARAM_I_SYSTEM);if(f.notNull(a)){return a;}throw f.XException.createIllegalStateException(f.XStringUtils.concatenate3("No system found for query ",q,". Either parameter PARAM_I_SYSTEMS or PARAM_I_SYSTEM must be set."));};f.XCmdDeserializeBlendingSources=function(){};f.XCmdDeserializeBlendingSources.prototype=new f.XCommand();f.XCmdDeserializeBlendingSources.prototype._ff_c="XCmdDeserializeBlendingSources";f.XCmdDeserializeBlendingSources.CLAZZ=null;f.XCmdDeserializeBlendingSources.staticSetup=function(){f.XCmdDeserializeBlendingSources.CLAZZ=f.XClass.create(f.XCmdDeserializeBlendingSources);};f.XCmdDeserializeBlendingSources.prototype.getCommandResultClass=function(){return f.XCmdDeserializeBlendingSourcesResult.CLAZZ;};f.XCmdDeserializeCalculatedDimension=function(){};f.XCmdDeserializeCalculatedDimension.prototype=new f.XCommand();f.XCmdDeserializeCalculatedDimension.prototype._ff_c="XCmdDeserializeCalculatedDimension";f.XCmdDeserializeCalculatedDimension.CLAZZ=null;f.XCmdDeserializeCalculatedDimension.staticSetup=function(){f.XCmdDeserializeCalculatedDimension.CLAZZ=f.XClass.create(f.XCmdDeserializeCalculatedDimension);};f.XCmdDeserializeCalculatedDimension.prototype.getCommandResultClass=function(){return f.XCmdDeserializeCalculatedDimensionResult.CLAZZ;};f.XCmdDeserializeCalculatedDimensionResult=function(){};f.XCmdDeserializeCalculatedDimensionResult.prototype=new f.XCommandResult();f.XCmdDeserializeCalculatedDimensionResult.prototype._ff_c="XCmdDeserializeCalculatedDimensionResult";f.XCmdDeserializeCalculatedDimensionResult.CLAZZ=null;f.XCmdDeserializeCalculatedDimensionResult.staticSetup=function(){f.XCmdDeserializeCalculatedDimensionResult.CLAZZ=f.XClass.create(f.XCmdDeserializeCalculatedDimensionResult);};f.XCmdDeserializeCalculatedDimensionResult.getDataSourceName=function(i){var d=f.XStringBuffer.create();d.append(i.getStringByKey("Type"));d.append(":[");d.append(i.getStringByKey("SchemaName"));d.append("][");d.append(i.getStringByKey("PackageName"));d.append("][");d.append(i.getStringByKey("ObjectName"));d.append("]");return d.toString();};f.XCmdDeserializeCalculatedDimensionResult.prototype.m_inaQueryModels=null;f.XCmdDeserializeCalculatedDimensionResult.prototype.m_systemName=null;f.XCmdDeserializeCalculatedDimensionResult.prototype.m_application=null;f.XCmdDeserializeCalculatedDimensionResult.prototype.releaseObject=function(){this.m_inaQueryModels=null;this.m_systemName=null;this.m_application=null;f.XCommandResult.prototype.releaseObject.call(this);};f.XCmdDeserializeCalculatedDimensionResult.prototype.process=function(){var s=this.getParameterStringStrict(f.CmdDeserializeCalculatedDimension.PARAM_I_QUERY_MODELS_STRING_INA_REPOSITORY);var j=f.JsonParserFactory.newInstance();var r=j.parse(s);f.XObjectExt.release(j);this.m_inaQueryModels=r.getListByKey("Queries");this.m_application=this.getParameterStrict(f.CmdDeserializeCalculatedDimension.PARAM_I_APPLICATION);this.m_systemName=this.getParameterStringStrict(f.CmdDeserializeCalculatedDimension.PARAM_I_SYSTEM);var i=this.m_inaQueryModels.getStructureAt(this.m_inaQueryModels.size()-1);this.importQueryModel(i,null);this.onProcessFinished();};f.XCmdDeserializeCalculatedDimensionResult.prototype.importQueryModel=function(i,c){var s=f.QueryServiceConfig.createWithDataSourceName(this.m_application,this.m_systemName,f.XCmdDeserializeCalculatedDimensionResult.getDataSourceName(i.getStructureByKey("DataSource")));s.setDefinitionByStructure(f.QModelFormat.INA_REPOSITORY,i);s.processQueryManagerCreation(this.getSyncType(),this,c);};f.XCmdDeserializeCalculatedDimensionResult.prototype.onQueryManagerCreated=function(e,q,c){this.getMessageManager().addAllMessages(e);if(e.isValid()){if(f.notNull(c)){var a=c;a.getObject().getQueryModel().addPreQueryWithName(q.getQueryModel(),a.getName());}var p=q.getInitSettings().getDefinitionAsStructure().getListByKey("PreQueryNames");if(f.notNull(p)){var s=p.size();var b=this.m_inaQueryModels.size()-1;for(var i=0;i<s;i++){var d=p.getStringAt(i);for(var g=0;g<b;g++){var h=this.m_inaQueryModels.getStructureAt(g);if(f.XString.isEqual(d,h.getStringByKey("Name"))){this.importQueryModel(h,f.XNameWeakGenericPair.create(d,q));}}}}}if(f.isNull(c)){this.addResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,q);}};f.XCmdDeserializeExtendedDimension=function(){};f.XCmdDeserializeExtendedDimension.prototype=new f.XCommand();f.XCmdDeserializeExtendedDimension.prototype._ff_c="XCmdDeserializeExtendedDimension";f.XCmdDeserializeExtendedDimension.CLAZZ=null;f.XCmdDeserializeExtendedDimension.staticSetup=function(){f.XCmdDeserializeExtendedDimension.CLAZZ=f.XClass.create(f.XCmdDeserializeExtendedDimension);};f.XCmdDeserializeExtendedDimension.prototype.getCommandResultClass=function(){return f.XCmdDeserializeExtendedDimensionResult.CLAZZ;};f.XCmdDeserializeExtendedDimensionResult=function(){};f.XCmdDeserializeExtendedDimensionResult.prototype=new f.XCommandResult();f.XCmdDeserializeExtendedDimensionResult.prototype._ff_c="XCmdDeserializeExtendedDimensionResult";f.XCmdDeserializeExtendedDimensionResult.CLAZZ=null;f.XCmdDeserializeExtendedDimensionResult.staticSetup=function(){f.XCmdDeserializeExtendedDimensionResult.CLAZZ=f.XClass.create(f.XCmdDeserializeExtendedDimensionResult);};f.XCmdDeserializeExtendedDimensionResult.prototype.process=function(){var s=this.getParameterStringStrict(f.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var j=f.JsonParserFactory.newInstance();var r=j.parse(s);f.XObjectExt.release(j);var i=r.getStructureByKey("DataSource");var q=this.getParameterStrict(f.CmdDeserializeExtendedDimension.PARAM_I_QUERY_MODEL);var d=q.getDataSource().cloneOlapComponent(null,null);var a=f.QInAImportFactory.createForRepository(q.getApplication(),null);a.importDataSourceExternalDimensions(i,d);var e=this.getParameter(f.CmdDeserializeExtendedDimension.PARAM_I_EXT_DIMS_INFO);f.XCommandUtil.updateExtendedDimensionPackages(d.getExtendedDimensionsBase(),e);var b=f.QueryServiceConfig.createWithDataSource(q.getApplication(),d.getSystemName(),d);var c=r.getStringByKeyExt("ExperimentalFeatures",null);var g=this.getParameter(f.CmdDeserializeExtendedDimension.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);f.XCommandUtil.handleInactiveCapabilities(b,c,g);b.processQueryManagerCreation(this.getSyncType(),this,null);};f.XCmdDeserializeExtendedDimensionResult.prototype.onQueryManagerCreated=function(e,q,c){this.getMessageManager().addAllMessages(e);if(e.isValid()){var s=this.getParameterStringStrict(f.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var d=q.getQueryModel().deserializeExt(f.QModelFormat.INA_REPOSITORY,s);this.getMessageManager().addAllMessages(d);this.addResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER,q);}this.onProcessFinished();};f.QCsnComponentMetadata=function(){};f.QCsnComponentMetadata.prototype=new f.QInAComponentWithStructure();f.QCsnComponentMetadata.prototype._ff_c="QCsnComponentMetadata";f.QCsnComponentMetadata.prototype.getModelFormat=function(){return f.QModelFormat.CSN_METADATA;};f.QCsnComponentMetadata.prototype.getDimExternalName=function(d){var e=d.getExternalName();return f.XStringUtils.isNotNullAndNotEmpty(e)?e:d.getName();};f.QCsnComponentMetadata.prototype.getFieldName=function(a){var n=a.getName();var d=a.getDimension().getName();if(f.XString.startsWith(n,d)){n=f.XString.substring(n,f.XString.size(d)+1,f.XString.size(n));}return n;};f.QRsInfoExport=function(){};f.QRsInfoExport.prototype=new f.XObjectExt();f.QRsInfoExport.prototype._ff_c="QRsInfoExport";f.QRsInfoExport.prototype.setupImportExport=function(a,m,c,b){};f.QRsInfoExport.prototype.exportComponent=function(c,m,i,a){var r=f.PrFactory.createStructure();var b=m.getComponentType();if(b===f.OlapComponentType.QUERY_MODEL){var q=m;var d=r.putNewStructure(f.RenderConstants.DIMENSIONS);var e=r.putNewStructure(f.RenderConstants.AXES);var g=q.getRowsAxis();this.exportAxis(g,d,e);var h=q.getColumnsAxis();this.exportAxis(h,d,e);}return r;};f.QRsInfoExport.prototype.exportAxis=function(a,r,b){var c=b.putNewStructure(a.getName());var d=c.putNewList(f.RenderConstants.LAYOUT);for(var i=0;i<a.size();i++){var e=d.addNewStructure();var g=a.get(i);e.putString(f.RenderConstants.DIMENSION_NAME,g.getName());var h=r.putNewStructure(g.getName());var j=g.getLoadedStructureMembers();h.putString(f.RenderConstants.NAME,g.getName());h.putString(f.RenderConstants.TEXT,g.getText());if(f.notNull(j)){var l=h.putNewStructure(f.RenderConstants.MEMBERS);for(var k=0;k<j.size();k++){var m=j.get(k);if(f.notNull(m)){var n=l.putNewStructure(m.getName());n.putString(f.RenderConstants.NAME,m.getName());n.putString(f.RenderConstants.ALIAS_NAME,m.getAliasName());n.putString(f.RenderConstants.TEXT,m.getAliasName());}}}}};f.QRsInfoExport.prototype.exportMemberHelpRequest=function(q,d){return null;};f.QRsInfoExport.prototype.exportPlanningVariableHelpRequest=function(p,d,v){return null;};f.QRsInfoExport.prototype.exportVariableHelpRequest=function(q,d,v){return null;};f.QRsInfoExport.prototype.exportDataSource=function(d,w){return null;};f.QRsInfoExport.prototype.exportQueryModel=function(q,w,a){return null;};f.QRsInfoExport.prototype.exportLovRequest=function(q,w,a,l){return null;};f.QRsInfoExport.prototype.exportCustomHierarchyDefinition=function(c){return null;};f.QRsInfoExport.prototype.exportVariables=function(v,p){return null;};f.QRsInfoExport.prototype.exportVariableList=function(v){return null;};f.QRsInfoExport.prototype.exportStructureDimension=function(s){return null;};f.QRsInfoExport.prototype.exportBlendingMappings=function(m){return null;};f.QRsInfoExport.prototype.exportHierarchy=function(d,i){};f.QInAComponentMetadata=function(){};f.QInAComponentMetadata.prototype=new f.QInAComponentWithStructure();f.QInAComponentMetadata.prototype._ff_c="QInAComponentMetadata";f.QInAComponentMetadata.prototype.getModelFormat=function(){return f.QModelFormat.INA_METADATA_CORE;};f.QInAComponentMetadata.prototype.extendCustom=function(e,m,i){var o=this.getComponentType();var c=f.QInAConverter.lookupComponentTypeInA(o);if(f.notNull(c)){i.putString("CType",c);}return i;};f.QInAAttribute=function(){};f.QInAAttribute.prototype=new f.QInAComponentWithStructure();f.QInAAttribute.prototype._ff_c="QInAAttribute";f.QInAAttribute.prototype.getComponentType=function(){return f.OlapComponentType.ATTRIBUTE;};f.QInAAttribute.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=p;var n=b.getStringByKey("Name");var e=d.getAttributeByName(n);if(f.notNull(e)){var g=b.getListByKey("ResultSetFields");if(f.notNull(g)){var r=e.getResultSetFields();r.clear();var l=g.size();for(var i=0;i<l;i++){var h=e.getFieldByName(g.getStringAt(i));if(f.notNull(h)){r.add(h);}}}}return e;};f.QInAAttribute.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("Name",c.getName());var d=a.putNewList("ResultSetFields");var r=c.getResultSetFields();var l=r.size();for(var i=0;i<l;i++){d.addString(r.get(i).getName());}return a;};f.QInAAxesSettings=function(){};f.QInAAxesSettings.prototype=new f.QInAComponentWithList();f.QInAAxesSettings.prototype._ff_c="QInAAxesSettings";f.QInAAxesSettings.isDefinedZeroSuppression=function(a){return f.notNull(a)&&f.XCollectionUtils.hasElements(a)&&a.getZeroSuppressionType()!==f.ZeroSuppressionType.NONE;};f.QInAAxesSettings.prototype.getComponentType=function(){return f.OlapComponentType.AXES_SETTINGS;};f.QInAAxesSettings.prototype.getTagName=function(){return"Axes";};f.QInAAxesSettings.prototype.importComponentWithList=function(a,b,m,p,c){var q=c.getQueryModel();if(f.notNull(b)){if(a.capabilities.supportsZeroSuppression()||a.capabilities.supportsNullZeroSuppression()){var d=f.AxisType.getAll();var e=d.size();for(var k=0;k<e;k++){var g=q.getAxisBase(d.get(k));if(f.notNull(g)){g.setSupportsZeroSuppression(true);}}}var l=b.size();for(var i=0;i<l;i++){a.importAxis(b.getStructureAt(i),null,c);}}else if(a.capabilities.supportsNullZeroSuppression()){this.initializeAxisForNullSuppression(q.getAxisBase(f.AxisType.ROWS));this.initializeAxisForNullSuppression(q.getAxisBase(f.AxisType.COLUMNS));}return null;};f.QInAAxesSettings.prototype.initializeAxisForNullSuppression=function(a){a.setSupportsZeroSuppression(true);a.addAvailableZeroSuppressionType(f.ZeroSuppressionType.ALL_CELLS_ARE_ZERO);a.addAvailableZeroSuppressionType(f.ZeroSuppressionType.ALL_CELLS_ARE_NULL);};f.QInAAxesSettings.prototype.exportComponentWithList=function(e,m,a){var q=m;var i=f.PrFactory.createList();var c=q.getColumnsAxis();if(e.isAbap(q)||f.QInAAxesSettings.isDefinedZeroSuppression(c)){var b=e.exportAxis(c,null);i.add(b);}var r=q.getRowsAxis();if(e.isAbap(q)||f.QInAAxesSettings.isDefinedZeroSuppression(r)){var d=e.exportAxis(r,null);i.add(d);}return i;};f.QInAAxis=function(){};f.QInAAxis.prototype=new f.QInAComponentWithStructure();f.QInAAxis.prototype._ff_c="QInAAxis";f.QInAAxis.prototype.getComponentType=function(){return f.OlapComponentType.AXIS;};f.QInAAxis.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=i.capabilities.supportsZeroSuppression();var b=i.capabilities.supportsNullZeroSuppression();var d;var e=a.getStringByKey("Axis");if(f.isNull(e)){d=f.QInAConverter.lookupAxisTypeInt(a.getIntegerByKey("Type"));}else{d=f.QInAConverter.lookupAxisType(e);}var q=c.getQueryModel();var g=q.getAxisBase(d);if(f.notNull(g)){if(s||b){var v=a.getIntegerByKey("ZeroSuppressionType");var z=f.QInAConverter.lookupSuppressionType(v);g.setZeroSuppressionType(z);g.setDefaultZeroSuppression(z);g.addAvailableZeroSuppressionType(f.ZeroSuppressionType.ALL_CELLS_ARE_ZERO);}if(s){g.addAvailableZeroSuppressionType(f.ZeroSuppressionType.TOTAL_IS_ZERO);}else if(b){g.addAvailableZeroSuppressionType(f.ZeroSuppressionType.ALL_CELLS_ARE_NULL);}i.importTotals(a,g.getResultStructureControllerBase(),c);}return g;};f.QInAAxis.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var c=b.getType();i.putString("Axis",f.QInAConverter.lookupAxisTypeInA(c));i.putInteger("Type",f.QInAConverter.lookupAxisTypeInAInt(c));var t=b.getZeroSuppressionType();i.putInteger("ZeroSuppressionType",f.QInAConverter.lookupSuppressionTypeInA(t));e.exportTotals(b.getResultStructureController(),i);return i;};f.QInAConditionManager=function(){};f.QInAConditionManager.prototype=new f.QInAComponentWithList();f.QInAConditionManager.prototype._ff_c="QInAConditionManager";f.QInAConditionManager.prototype.getComponentType=function(){return f.OlapComponentType.CONDITIONS_MANAGER;};f.QInAConditionManager.prototype.getTagName=function(){return"Conditions";};f.QInAConditionManager.prototype.importComponentWithList=function(a,b,m,p,c){var d=m;if(f.notNull(d)){var q=c.getQueryModel();var e=q.getQueryManagerBase();var g=f.notNull(e)&&e.isAutoVariableSubmitActive()&&(e.getVariableProcessorState()===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT||e.getVariableProcessorState()===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT_AFTER_REINIT);if(!g){d.clear();}if(f.notNull(b)){var l=b.size();for(var i=0;i<l;i++){var h=b.getStructureAt(i);if(g){var j=h.getStringByKey("Name");var k=d.getByKey(j);a.importCondition(q,h,k);}else{var n=a.importCondition(q,h,null);d.add(n);}}}}return d;};f.QInAConditionManager.prototype.exportComponentWithList=function(e,m,a){var c=m;if(f.notNull(c)){var b;if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){b=c.getEffectiveConditions();}else{b=c;}var l=b.size();if(l>0){var d=f.PrFactory.createList();for(var i=0;i<l;i++){var g=e.exportCondition(b.get(i));if(f.notNull(g)&&!g.isEmpty()){d.add(g);}}if(d.isEmpty()){return null;}return d;}}return null;};f.QInAConditionsCondition=function(){};f.QInAConditionsCondition.prototype=new f.QInAComponentWithStructure();f.QInAConditionsCondition.prototype._ff_c="QInAConditionsCondition";f.QInAConditionsCondition.exportBreakGroupDimensionList=function(c){if(f.isNull(c)){return null;}var a=f.PrFactory.createList();var b=c.getBreakGroupDimensions();var l=b.size();for(var i=0;i<l;i++){a.addString(b.get(i).getName());}return a;};f.QInAConditionsCondition.exportEvaluateOnDimensionsList=function(c){if(f.isNull(c)){return null;}var a=f.PrFactory.createList();var e=c.getEvaluationDimensions();var l=e.size();for(var i=0;i<l;i++){a.addString(e.get(i).getName());}return a;};f.QInAConditionsCondition.prototype.getComponentType=function(){return f.OlapComponentType.CONDITION;};f.QInAConditionsCondition.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.isNull(a)){return m;}var n;var b=a.getStringByKey("Name");if(f.isNull(m)){if(i.getMode()===f.QModelFormat.INA_REPOSITORY){var d=a.getBooleanByKeyExt("IsBackendCondition",true);n=f.QCondition.create(c,p,b,d);}else{n=f.QCondition.create(c,p,b,true);}}else{n=m;n.clearThresholds();n.clearEvaluationDimensions();}n.setActive(a.getBooleanByKey("Active"));n.setUsedState(a.getStringByKey("IsUsed"));n.setDescription(a.getStringByKey("Description"));var o=a.getStringByKey("OnDisabled");n.setApplyConditionAfterVisibilityFilter(a.getBooleanByKeyExt("AfterVisibilityFilter",false));if(f.notNull(o)){if(f.XString.isEqual(o,"Error")){n.setOnDisabledToWarning(false);}}var e=a.getStringByKey("EvaluateOnDimensions");var g=f.ConditionDimensionEvaluationType.lookupName(e);if(f.notNull(g)){n.setDimensionEvaluationType(g);}var q=c.getQueryModel();var h=a.getListByKey("EvaluateOnDimensionsList");var j;var k;if(!f.PrUtils.isListEmpty(h)&&f.notNull(q)){j=h.size();for(k=0;k<j;k++){var l=h.getStringAt(k);if(f.notNull(l)){var r=q.getDimensionByNameFromExistingMetadata(l);if(f.notNull(r)){n.addEvaluationDimension(r);}}}}var s=a.getListByKey("Threshold");if(!f.PrUtils.isListEmpty(s)){var t=s.size();for(var u=0;u<t;u++){var v=s.getStructureAt(u);if(f.notNull(v)){n.addThreshold(i.importConditionThreshold(q,v,null,n));}}}n.setBreakGroup(a.getBooleanByKeyExt("BreakGroup",false));var w=a.getListByKey("BreakGroupList");if(!f.PrUtils.isListEmpty(w)&&f.notNull(q)){j=w.size();for(k=0;k<j;k++){var x=w.getStringAt(k);if(f.notNull(x)){var y=q.getDimensionByNameFromExistingMetadata(x);if(f.notNull(y)){n.addBreakGroupDimension(y);}}}}return n;};f.QInAConditionsCondition.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;var q=c.getQueryModel();var d=q.getSystemType().isTypeOf(f.SystemType.HANA);if(e.getMode()===f.QModelFormat.INA_REPOSITORY){a.putBoolean("IsBackendCondition",c.isBackendCondition());}a.putBoolean("Active",c.isActive());if(c.isApplyingConditionAfterVisibilityFilter()){a.putBoolean("AfterVisibilityFilter",true);}if(d){a.putStringNotNullAndNotEmpty("Description",c.getDescription());}else{a.putString("Description",c.getDescription());}a.putString("Name",c.getName());var g=c.getDimensionEvaluationType();a.putString("EvaluateOnDimensions",g.getName());if(g===f.ConditionDimensionEvaluationType.GIVEN_LIST){var h=f.QInAConditionsCondition.exportEvaluateOnDimensionsList(c);a.put("EvaluateOnDimensionsList",h);}var t=c.getThresholds();var j=t.size();if(j>0){var k=f.PrFactory.createList();for(var i=0;i<j;i++){var l=e.exportConditionThreshold(t.get(i));if(f.notNull(l)){k.add(l);}}if(!k.isEmpty()){a.put("Threshold",k);}else{return null;}}if(d){if(f.XCollectionUtils.hasElements(q.getPreQueries())&&!c.getOnDisabledToWarning()){a.putString("OnDisabled","Error");}var n=c.isBreakGroup();if(n){a.putBoolean("BreakGroup",true);var o=f.QInAConditionsCondition.exportBreakGroupDimensionList(c);a.put("BreakGroupList",o);}if(c.isBreakHierarchy()){a.putBoolean("BreakHierarchy",true);}}return a;};f.QInAConditionsThreshold=function(){};f.QInAConditionsThreshold.prototype=new f.QInAComponentWithStructure();f.QInAConditionsThreshold.prototype._ff_c="QInAConditionsThreshold";f.QInAConditionsThreshold.importSingleMeasureCoordinate=function(q,t,m){if(f.isNull(t)||f.isNull(m)){return;}var i=m.getStringByKey("DimensionName");var a=m.getStringByKey("MemberName");if(f.XStringUtils.isNullOrEmpty(i)||f.XStringUtils.isNullOrEmpty(a)){return;}var b=q;if(f.isNull(b)){b=t.getContext().getQueryModel();}if(f.notNull(b)){var d=b.getDimensionByNameFromExistingMetadata(i);if(f.notNull(d)){var c=d.getDimensionMember(a);if(f.notNull(c)){t.addMeasureCoordinate(c);}}}};f.QInAConditionsThreshold.importThresholdValue=function(a,i){if(f.isNull(a)||f.isNull(i)){return;}if(i.isBoolean()){a.setBoolean(i.getBoolean());}else if(i.isString()){a.setString(i.getString());}else if(i.isDouble()){a.setDouble(i.getDouble());}else if(i.isInteger()){a.setInteger(i.getInteger());}else if(i.isLong()){a.setLong(i.getLong());}};f.QInAConditionsThreshold.setValue=function(e,p,i,v,a){if(a===f.XValueType.VARIABLE){var b=v.getVariableValue();if(f.notNull(b)){i.putString(p,b.getName());if(f.XString.isEqual(p,"Low")){i.putString("LowIs","Variable");}else if(f.XString.isEqual(p,"High")){i.putString("HighIs","Variable");}}}else{f.QInAValueUtils.exportPlaceholderValue(e,p,i,v,a,v.getQueryModel());}};f.QInAConditionsThreshold.prototype.getComponentType=function(){return f.OlapComponentType.CONDITIONS_THRESHOLD;};f.QInAConditionsThreshold.prototype.importComponentWithStructure=function(a,b,m,p,c){if(f.isNull(b)){return m;}var n;if(f.isNull(m)){n=f.QConditionThreshold.create(c,p);}else{n=m;}var d=b.getStringByKey("Comparison");var e=f.ConditionComparisonOperator.lookupName(d);if(f.notNull(e)){n.setComparisonOperator(e);}var g=b.getByKey("Low");f.QInAConditionsThreshold.importThresholdValue(n.getLow(),g);var h=b.getByKey("LowIs");f.QInAConditionsThreshold.importThresholdValue(n.getLowIs(),h);var j=b.getByKey("High");f.QInAConditionsThreshold.importThresholdValue(n.getHigh(),j);var k=b.getByKey("HighIs");f.QInAConditionsThreshold.importThresholdValue(n.getHighIs(),k);var l=b.getListByKey("MeasureCoordinate");if(f.notNull(l)){var q=c.getQueryModel();var o=l.size();for(var i=0;i<o;i++){f.QInAConditionsThreshold.importSingleMeasureCoordinate(q,n,l.getStructureAt(i));}}n.setLeavesOnly(b.getBooleanByKeyExt("LeavesOnly",false));var r=b.getByKey("Level");if(f.notNull(r)){n.setLevel(f.XIntegerValue.create(r.getInteger()));}return n;};f.QInAConditionsThreshold.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;var d=c.getMeasureCoordinates();var g=f.PrFactory.createList();var l=d.size();var q=c.getQueryModel();for(var i=0;i<l;i++){var h=d.get(i);var s=f.PrFactory.createStructure();var j=h.getDimension().getName();var k=q.getDimensionByName(j);var n=h.getName();var o=f.QInAExportUtil.getMeasureMemberNameByAlias(q,n,e);if(f.XStringUtils.isNotNullAndNotEmpty(o)&&(k.getDimensionType()===f.DimensionType.MEASURE_STRUCTURE||k.getDimensionType()===f.DimensionType.ACCOUNT)){n=o;}if(k.getDimensionType()!==f.DimensionType.MEASURE_STRUCTURE||k.getStructureMember(n)!==null){s.putString("DimensionName",j);s.putString("MemberName",n);g.add(s);}}if(l===0||g.isEmpty()){return null;}a.put("MeasureCoordinate",g);var p=q.getSystemType().isTypeOf(f.SystemType.HANA);var r=c.getLow();var t=c.getHigh();if(p){if(r.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"Low",a,r,f.XValueType.INTEGER);}if(t.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"High",a,t,f.XValueType.INTEGER);}var u=c.getLevel();if(f.notNull(u)){a.putInteger("Level",u.getInteger());}}else{if(r.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"Low",a,r,r.getValueType());}if(t.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"High",a,t,t.getValueType());}var v=c.getLowIs();if(v.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"LowIs",a,v,v.getValueType());}var w=c.getHighIs();if(w.getValue()!==null){f.QInAConditionsThreshold.setValue(e,"HighIs",a,w,w.getValueType());}}var x=c.getComparisonOperator();a.putString("Comparison",x.getName());return a;};f.QInACurrencyTranslationItem=function(){};f.QInACurrencyTranslationItem.prototype=new f.QInAComponentWithStructure();f.QInACurrencyTranslationItem.prototype._ff_c="QInACurrencyTranslationItem";f.QInACurrencyTranslationItem.createConditonalFormula=function(v,c,r){if(f.isNull(v)&&f.isNull(c)){return null;}if(f.isNull(v)){return f.QInACurrencyTranslationItem.createRateTypeCategory(c,r);}if(f.isNull(c)){return f.QInACurrencyTranslationItem.createRateTypeVersion(v,r);}var a=f.QFactory.createFormulaFunction(null);a.setFunctionName(f.FormulaOperator.IF.getName());var b=f.QFactory.createFormulaFunction(null);var d=f.QFactory.createFormulaAttributeWithName(null,v);b.setFunctionName(f.FormulaOperator.EQ.getName());b.add(d);var e=f.QFactory.createFormulaConstant(null);e.setString("");b.add(e);a.add(b);a.add(f.QInACurrencyTranslationItem.createRateTypeCategory(c,r));a.add(f.QInACurrencyTranslationItem.createRateTypeVersion(v,r));return a;};f.QInACurrencyTranslationItem.createRateTypeVersion=function(v,r){var a=f.QFactory.createFormulaFunction(null);a.setFunctionName(f.FormulaOperator.ADDITION.getName());var p=f.QFactory.createFormulaConstant(null);p.setString("Version$");var s=f.QFactory.createFormulaConstant(null);s.setString("$");var b=f.QFactory.createFormulaAttributeWithName(null,v);a.add(p);a.add(r);a.add(s);a.add(b);return a;};f.QInACurrencyTranslationItem.createRateTypeCategory=function(c,r){var a=f.QFactory.createFormulaFunction(null);a.setFunctionName(f.FormulaOperator.ADDITION.getName());var b=f.QFactory.createFormulaAttributeWithName(null,c);var s=f.QFactory.createFormulaConstant(null);s.setString("$");a.add(b);a.add(s);a.add(r);return a;};f.QInACurrencyTranslationItem.resolveRateName=function(m){var r=null;var a=m.getRateName();if(f.notNull(a)&&(a.isFieldBased()||a.isFixed()||a.isFormulaBased())){r=a;}else{var c=f.QInACurrencyTranslationItem.getCurrencyTranslationManager(m);var b=c.getRateTypeFieldName();var d=c.getRateVersionFieldName();var e=c.getCategoryFieldName();var g=m.getFixedRateType();var h=m.getFixedCategory();var i=m.getFixedRateVersion();if(f.CtRateType.isDefined(g)){if(f.CtCategory.isDefined(h)){r=f.QCurrencyLookupValue.createFixedByValue(null,f.XStringValue.create(f.XStringUtils.concatenate3(f.QInAConverter.lookupCategoryInA(h),"$",f.QInAConverter.lookupRateTypeInA(g))));}else if(f.XStringUtils.isNotNullAndNotEmpty(i)){r=f.QCurrencyLookupValue.createFixedByValue(null,f.XStringValue.create(f.XStringUtils.concatenate4("Version$",f.QInAConverter.lookupRateTypeInA(g),"$",i)));}else{var j=f.QFactory.createFormulaConstant(null);j.setString(f.QInAConverter.lookupRateTypeInA(g));var k=f.QInACurrencyTranslationItem.createConditonalFormula(d,e,j);if(f.notNull(k)){r=f.QCurrencyLookupValue.createByFormulaItem(null,k);}}}else if(c.deriveRateTypeFromAccount()&&f.notNull(b)){var l=f.QFactory.createFormulaAttributeWithName(null,b);if(f.CtCategory.isDefined(h)){var n=f.QFactory.createFormulaFunction(null);n.setFunctionName(f.FormulaOperator.ADDITION.getName());var o=f.QFactory.createFormulaConstant(null);o.setString(f.QInAConverter.lookupCategoryInA(h));var p=f.QFactory.createFormulaConstant(null);p.setString("$");n.add(o);n.add(p);n.add(l);r=f.QCurrencyLookupValue.createByFormulaItem(null,n);}else if(f.XStringUtils.isNotNullAndNotEmpty(i)){var v=f.QFactory.createFormulaFunction(null);v.setFunctionName(f.FormulaOperator.ADDITION.getName());var q=f.QFactory.createFormulaConstant(null);q.setString("Version$");var s=f.QFactory.createFormulaConstant(null);s.setString("$");var t=f.QFactory.createFormulaConstant(null);t.setString(i);v.add(q);v.add(l);v.add(s);v.add(t);r=f.QCurrencyLookupValue.createByFormulaItem(null,v);}else{var u=f.QInACurrencyTranslationItem.createConditonalFormula(d,e,l);if(f.notNull(u)){r=f.QCurrencyLookupValue.createByFormulaItem(null,u);}}}else{var w=f.XStringBuffer.create();w.append("The currency translation object '");w.append(m.getName());w.append("' is not fully specified. The rate type cannot be derived from the model properties.");throw f.XException.createIllegalStateException(w.toString());}}return r;};f.QInACurrencyTranslationItem.resolveReferenceDate=function(m){var r=null;var c=f.QInACurrencyTranslationItem.getCurrencyTranslationManager(m).getDefaultReferenceDateFieldName();var a=m.getReferenceDate();if(m.getDateOffset()===0){if(f.notNull(a)&&(a.isFixed()||a.isFieldBased()||a.isFormulaBased())){r=a;}else if(f.notNull(c)){r=f.QCurrencyLookupValue.createByFieldName(null,c);}}else{var b;if(f.notNull(a)&&a.isFieldBased()){b=a.getFieldName();}else{b=c;}if(f.notNull(b)){var d=f.QFactory.createFormulaFunction(null);var e=f.QFactory.createFormulaAttributeWithName(null,b);d.add(e);var g=f.QFactory.createFormulaConstant(null);var h=m.getDateOffsetGranularity();var i=m.getDateOffset();if(h===f.DateOffsetGranularity.DAY){d.setFunctionName("CALCADDDAYS");g.setInteger(i);}else if(h===f.DateOffsetGranularity.WEEK){d.setFunctionName("CALCADDDAYS");g.setInteger(i*7);}else if(h===f.DateOffsetGranularity.MONTH){d.setFunctionName("CALCADDMONTHS");g.setInteger(i);}else if(h===f.DateOffsetGranularity.QUARTER){d.setFunctionName("CALCADDMONTHS");g.setInteger(i*3);}else if(h===f.DateOffsetGranularity.YEAR){d.setFunctionName("CALCADDYEARS");g.setInteger(i);}d.add(g);r=f.QCurrencyLookupValue.createByFormulaItem(null,d);}}return r;};f.QInACurrencyTranslationItem.resolveTargetCurrency=function(m){var r;if(m.isDefaultCurrency()){var c=f.QInACurrencyTranslationItem.getCurrencyTranslationManager(m);r=f.QCurrencyLookupValue.createFixedByValue(null,f.XStringValue.create(c.getDefaultCurrency()));}else{r=m.getTargetCurrency();}return r;};f.QInACurrencyTranslationItem.getCurrencyTranslationManager=function(m){var r=null;var q=m.getQueryModel();if(f.notNull(q)){r=q.getCurrencyTranslationManager();}else{var p=m.getParentComponent();if(f.notNull(p)&&p.getComponentType()===f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER){r=p;}}return r;};f.QInACurrencyTranslationItem.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_ITEM;};f.QInACurrencyTranslationItem.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.notNull(b)&&f.XCollectionUtils.hasElements(a)){b.setMetadataDefined(true);b.setErrorHandling(f.QInAConverter.lookupCtErrorHandlingMode(a.getStringByKey("ErrorHandling")));b.setSourceCurrency(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a,"SourceCurrency"));b.setTargetCurrency(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a,"TargetCurrency"));b.setReferenceDate(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.DATE,a,"ReferenceDate"));b.setRateName(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a,"RateName"));}return b;};f.QInACurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(i,s,v,e,k){if(e.containsKey(k)){var a=e.getStructureByKey(k);if(a.containsKey("Fixed")){var b=a.getStringByKey("Fixed");if(v===f.XValueType.STRING){return f.QCurrencyLookupValue.createFixedByValue(s,f.XStringValue.create(b));}if(v===f.XValueType.DATE){return f.QCurrencyLookupValue.createFixedByValue(s,f.XDate.createDateSafe(b));}return null;}else if(a.containsKey("DimensionAttribute")){return f.QCurrencyLookupValue.createByFieldName(s,a.getStringByKey("DimensionAttribute"));}else if(a.containsKey("Formula")){var c=f.QInAFormulaMeasure.importFormulaMeasure(i,s.getQueryModel().getMeasureDimension(),a.getStructureByKey("Formula"),null,null);return f.QCurrencyLookupValue.createByFormulaItem(s,c);}else if(a.containsKey("Variable")){return f.QCurrencyLookupValue.createByVariableName(s,a.getStringByKey("Variable"));}}return null;};f.QInACurrencyTranslationItem.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(f.notNull(b)){var q=b.getQueryModel();i.putString("Name",b.getName());i.putString("Description",b.getText());i.putStringNotNullAndNotEmpty("ErrorHandling",f.QInAConverter.lookupCtErrorHandlingModeInA(b.getErrorHandling()));this.exportSpecificCurrencyTranslationProperty(e,i,"SourceCurrency",b.getSourceCurrency(),q);this.exportSpecificCurrencyTranslationProperty(e,i,"TargetCurrency",f.QInACurrencyTranslationItem.resolveTargetCurrency(b),q);this.exportSpecificCurrencyTranslationProperty(e,i,"ReferenceDate",f.QInACurrencyTranslationItem.resolveReferenceDate(b),q);this.exportSpecificCurrencyTranslationProperty(e,i,"RateName",f.QInACurrencyTranslationItem.resolveRateName(b),q);}return i;};f.QInACurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(e,i,p,l,q){if(f.notNull(l)){if(l.isFixed()){i.putNewStructure(p).putString("Fixed",l.getFixedValue().getStringRepresentation());}else if(l.isFieldBased()){i.putNewStructure(p).putString("DimensionAttribute",l.getFieldName());}else if(l.isFormulaBased()){var a=i.putNewStructure(p).putNewStructure("Formula");f.QInAFormulaMeasure.exportFormulaItem(e,l.getFormulaItem(),a,q);}else if(l.isVariableBased()){var v=l.getVariableName();if(f.isNull(q)){i.putNewStructure(p).putString("Variable",v);}else{var b=q.getVariable(v);if(f.notNull(b)){if(b.isCustomVariable()){var c=b.getExternalRepresentation();if(f.notNull(c)){b=c;}var s=b.getValueByString();if(f.XStringUtils.isNotNullAndNotEmpty(s)){i.putNewStructure(p).putString("Fixed",s);}else{e.addError(f.ErrorCodes.NO_VALUE_EXTRACTED_FROM_FRONTEND_CURRENCY_TRANSLATION_VARIABLE,"Cannot Extract Variable Value from Currency Translation Variable");}}else{i.putNewStructure(p).putString("Variable",v);}}else{e.addError(f.ErrorCodes.CURRENCY_VARIABLE_NOT_AVAILABLE_FOR_CURRENT_QUERY_MODEL,"Currency variable not available for current query model");}}}}};f.QInACurrencyTranslationListManager=function(){};f.QInACurrencyTranslationListManager.prototype=new f.QInAComponentWithList();f.QInACurrencyTranslationListManager.prototype._ff_c="QInACurrencyTranslationListManager";f.QInACurrencyTranslationListManager.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_LIST;};f.QInACurrencyTranslationListManager.prototype.getTagName=function(){return"CurrencyTranslations";};f.QInACurrencyTranslationListManager.prototype.importComponentWithList=function(a,b,m,p,c){var d=c.getQueryModel().getCurrencyTranslationManager();if(f.notNull(d)&&f.XCollectionUtils.hasElements(b)){var s=b.size();for(var i=0;i<s;i++){var e=b.getStructureAt(i);var n=e.getStringByKey("Name");var g=e.getStringByKey("Description");var h=d.addNewMeasureCurrencyTranslationBase(n,g);a.importCurrencyTranslationElement(e,h,c);}d.postImportInitialization();}return d;};f.QInACurrencyTranslationListManager.prototype.exportComponentWithList=function(e,m,a){var b=null;var c=m;var s=c.getMeasureCurrencyTranslationsForInaData();if(f.XCollectionUtils.hasElements(s)){b=f.PrFactory.createList();var d=s.size();for(var i=0;i<d;i++){var g=s.get(i);e.exportCurrencyTranslationElement(g,b.addNewStructure());}}return b;};f.QInACurrencyTranslationManager=function(){};f.QInACurrencyTranslationManager.prototype=new f.QInAComponentWithStructure();f.QInACurrencyTranslationManager.prototype._ff_c="QInACurrencyTranslationManager";f.QInACurrencyTranslationManager.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER;};f.QInACurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslation";};f.QInACurrencyTranslationManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;return b;};f.QInACurrencyTranslationManager.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;if(f.isNull(c)||!c.getModelCapabilities().supportsQueryCurrencyTranslation()){return i;}var b=c.getCurrencyTranslationDetails();if(f.notNull(b)){if(f.XStringUtils.isNotNullAndNotEmpty(b.getCurrencyTranslationName())){if(b.getCurrencyTranslationOperation()===null){throw f.XException.createIllegalArgumentException("CurrencyTranslation Operation required.");}i.putString("Operation",b.getCurrencyTranslationOperation().getName());i.putString("Name",b.getCurrencyTranslationName());if(b.getCurrencyTranslationOperation()===f.CurrencyTranslationOperation.BOTH||b.getCurrencyTranslationOperation()===f.CurrencyTranslationOperation.TARGET){if(b.getCurrencyTranslationTarget()===null){throw f.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.");}i.putString("Target",b.getCurrencyTranslationTarget());}}else if(c.getCurrencyTranslationDetailsReset()){i.putString("Operation","");i.putString("Name","");i.putString("Target","");c.setCurrencyTranslationDetailsReset(false);}}return i;};f.QInACustomHierarchyDefinition=function(){};f.QInACustomHierarchyDefinition.prototype=new f.QInAComponentWithStructure();f.QInACustomHierarchyDefinition.prototype._ff_c="QInACustomHierarchyDefinition";f.QInACustomHierarchyDefinition.prototype.getComponentType=function(){return f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION;};f.QInACustomHierarchyDefinition.prototype.getTagName=function(){return null;};f.QInACustomHierarchyDefinition.prototype.importComponentWithStructure=function(i,a,m,p,c){if(!i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){return null;}var b=f.PrUtils.getListProperty(a,"Dimensions");var d=f.PrUtils.getStructureElement(b,0);if(f.notNull(d)){var s=d.getStringByKey("System");var e=d.getStringByKey("DataSource");var g=d.getStringByKey("Name");var h=d.getStructureByKey("Hierarchy");if(f.notNull(h)&&f.XStringUtils.isNotNullAndNotEmpty(s)&&f.XStringUtils.isNotNullAndNotEmpty(g)){var j=true;var k=i.getApplication();if(f.notNull(k)){var l=k.getSystemLandscape().getSystemDescription(s);j=f.isNull(l)?true:l.getSystemType().isTypeOf(f.SystemType.ABAP);}var n=f.QCustomHierarchyDefinition.createByData(s,e,g,h.getStringByKey("Description"),j);n.setName(h.getStringByKey("Name"));this.addHierarchyNodesFromStructure(n,h.getStructureByKey("Nodes"));return n;}}return null;};f.QInACustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(h,n){var a=f.PrUtils.getListProperty(n,"NodeId");var b=f.PrUtils.getListProperty(n,"ParentId");var c=f.PrUtils.getListProperty(n,"NodeName");var d=f.PrUtils.getListProperty(n,"NodeType");var s=f.PrUtils.getListSize(a,0);if(f.PrUtils.isListEmpty(a)||f.PrUtils.isListEmpty(b)||f.PrUtils.isListEmpty(c)||f.PrUtils.isListEmpty(d)||b.size()!==s||c.size()!==s||d.size()!==s){return;}var e=f.XSimpleMap.create();for(var i=0;i<s;i++){var g=a.getIntegerAt(i);var j=c.getStringAt(i);var k=d.getStringAt(i);var l=b.getIntegerAt(i);var p=l===-1?h:e.getByKey(f.XIntegerValue.create(l));if(f.notNull(p)){if(f.XString.isEqual(k,"1HIER_NODE_SIMPLE")){e.put(f.XIntegerValue.create(g),p.addTextNode(j));}else{p.addMemberNode(j);}}}f.XObjectExt.release(e);};f.QInACustomHierarchyDefinition.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;var b=f.PrFactory.createStructure();b.putString("Name",c.getDimensionName());if(e.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){b.putString("System",c.getSystemName());b.putString("DataSource",c.getDataSourceName());}else{b.putString("Axis","Free");}var d=f.PrFactory.createStructure();this.exportCustomHierarchy(c,d);b.put("Hierarchy",d);var g=f.PrFactory.createStructure();var h=g.putNewList("Dimensions");h.add(b);return g;};f.QInACustomHierarchyDefinition.prototype.exportCustomHierarchy=function(c,i){var e="";var n=c.getName();var a=c.getDescription();i.putString("Name",f.XStringUtils.isNotNullAndNotEmpty(n)?n:e);i.putString("Version",e);i.putString("DueDate",e);i.putString("Description",f.notNull(a)?a:e);i.putBoolean("IsTransient",true);i.putBoolean("NoRestNodes",true);i.put("Nodes",this.getHierarchyNodesAsStructure(c));};f.QInACustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(c){var s=f.PrFactory.createStructure();s.putNewList("NodeId");s.putNewList("NodeName");s.putNewList("Description");s.putNewList("NodeType");s.putNewList("ParentId");var n=c.getChildNodes();var a=n.size();for(var i=0;i<a;i++){this.addHierarchyElementToStructure(n.get(i),s,-1,c.getDimensionName());}return s;};f.QInACustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,s,p,d){var n=s.getListByKey("NodeId");var a=n.size();n.addInteger(a);s.getListByKey("NodeName").addString(e.getName());s.getListByKey("ParentId").addInteger(p);if(e.isMemberElement()){s.getListByKey("Description").addString("");s.getListByKey("NodeType").addString(e.isNode()?d:"");}else{s.getListByKey("Description").addString(e.getName());s.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE");}if(e.isNode()){var c=e.getChildNodes();var b=c.size();for(var i=0;i<b;i++){this.addHierarchyElementToStructure(c.get(i),s,a,d);}}};f.QInADataCell=function(){};f.QInADataCell.prototype=new f.QInAComponentWithStructure();f.QInADataCell.prototype._ff_c="QInADataCell";f.QInADataCell.prototype.getComponentType=function(){return f.OlapComponentType.DATA_CELL;};f.QInADataCell.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var b=q.getQueryDataCellsBase();var d=b.newQueryDataCell(a.getStringByKey("Name"));d.setSignReversal(a.getBooleanByKeyExt("SignReversal",false));d.setEmphasized(a.getBooleanByKeyExt("Emphasized",false));d.setCumulation(a.getBooleanByKeyExt("Cumulation",false));d.setInputEnabled(a.getBooleanByKeyExt("InputEnabled",false));d.setDisaggregationMode(f.DisaggregationMode.lookupWithDefault(a.getStringByKeyExt("DisaggregationMode",null),f.DisaggregationMode.NONE));d.setDisaggregationRefCellName(a.getStringByKeyExt("DisaggregationReferenceCellName",null));d.setScalingFactor(a.getIntegerByKeyExt("ScalingFactor",1));d.setDecimalPlaces(a.getIntegerByKeyExt("Decimals",0));var e=a.getIntegerByKeyExt("CellValueType",0);var g=f.QInAConverter.lookupValueTypeByInt(e);d.setBaseCellValueType(g);if(g===f.XValueType.DIMENSION_MEMBER){var h=a.getStringByKey("CellDimensionReference");d.setDimensionReference(q.getDimensions().getByKey(h));}var j=a.getListByKey("DimensionMemberReferences");if(f.notNull(j)){for(var k=0;k<j.size();k++){d.addDimensionMemberReference(j.getStringAt(k));}}if(i.mode===f.QModelFormat.INA_METADATA&&d.getReferenceStructureElement1()===null&&d.getReferenceStructureElement2()===null){b.removeElement(d);return null;}return d;};f.QInADataCell.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;i.putString("Name",d.getName());var b=d.getDisaggregationMode();f.QInAExportUtil.setNameIfNotNull(i,"DisaggregationMode",f.isNull(b)?f.DisaggregationMode.NONE:b);var r=d.getDisaggregationRefCell();i.putString("DisaggregationReferenceCellName",f.isNull(r)?"0":r.getName());i.putInteger("ScalingFactor",d.getScalingFactor());i.putInteger("Decimals",d.getDecimalPlaces());i.putBoolean("SignReversal",d.hasSignReversal());i.putBoolean("Emphasized",d.isEmphasized());i.putBoolean("Cumulation",d.isCumulated());var c=d.getBaseValueType();var g=f.QInAConverter.lookupIntByValueType(c);i.putInteger("CellValueType",g);var h=i.putNewList("DimensionMemberReferences");var j=d.getReferenceStructureElement1();if(f.notNull(j)){h.addString(j.getName());j=d.getReferenceStructureElement2();if(f.notNull(j)){h.addString(j.getName());}}this.exportRestrictedMeasureSignReversal(e,i,d);return i;};f.QInADataCell.prototype.exportRestrictedMeasureSignReversal=function(e,i,d){if(e.getMode()!==f.QModelFormat.INA_DATA||!d.getQueryModel().getSystemType().isTypeOf(f.SystemType.BW)||d.getReferenceStructureElement1()===null||d.getReferenceStructureElement1().getOlapComponentType()!==f.MemberType.RESTRICTED_MEASURE){return;}var r=d.getReferenceStructureElement1();if(!r.isAutoSignFlip()){return;}var q=r.getQueryModel();var m=f.QInAMemberRestrictedMeasure.getMemberForSignFlip(q,r);if(f.notNull(m)){var a=q.getMeasureDimension();var b=a.getStructureMember(m);if(f.notNull(b)){var c=b.getQueryDataCells();if(!c.isEmpty()){var g=c.get(0);if(f.notNull(g)){i.putBoolean("SignReversal",g.hasSignReversal());}}}}};f.QInADataCellsAll=function(){};f.QInADataCellsAll.prototype=new f.QInAComponentWithList();f.QInADataCellsAll.prototype._ff_c="QInADataCellsAll";f.QInADataCellsAll.prototype.getComponentType=function(){return f.OlapComponentType.DATA_CELLS;};f.QInADataCellsAll.prototype.getTagName=function(){return"QueryDataCells";};f.QInADataCellsAll.prototype.importComponentWithList=function(a,b,m,p,c){var d=c.getModelCapabilities();var q=c.getQueryModel();if(d.supportsDataCells()&&a.mode!==f.QModelFormat.INA_DATA_REINIT&&q.getQueryManager().getInitSettings().isRequestingDataCells()){var e=q.getQueryDataCellsBase();e.clear();if(f.notNull(b)){for(var i=0;i<b.size();i++){a.importDataCell(b.getStructureAt(i),q);}}}return null;};f.QInADataCellsAll.prototype.exportComponentWithList=function(e,m,a){var q=m;var b=null;var c=q.getModelCapabilities();if(c.supportsDataCells()&&q.getQueryManager().getInitSettings().isRequestingDataCells()){var d=q.getQueryDataCells();b=f.PrFactory.createList();var s=d.size();for(var i=0;i<s;i++){var g=e.exportDataCell(d.get(i),null);b.add(g);}}return b;};f.QInADimension=function(){};f.QInADimension.prototype=new f.QInAComponentWithStructure();f.QInADimension.prototype._ff_c="QInADimension";f.QInADimension.exportQdReadMode=function(e,d,i){var r;var a=e.getMode()===f.QModelFormat.INA_VALUE_HELP;var b=e.isAbap(d);if(a){r=f.QContextType.SELECTOR;}else{r=f.QContextType.RESULT_SET;}var c=f.QInADimension.getReadMode(d,r);if(f.isNull(c)){e.addError(f.ErrorCodes.INVALID_DIMENSION,f.XStringUtils.concatenate3("No read mode given for dimension '",d.getName(),"'!"));return;}var g;if(b){if(a){g="ReadMode";}else{g="ResultSetReadMode";}}else{g="ReadMode";}var h=f.QInAConverter.lookupReadModeInA(c);i.putStringNotNull(g,h);if(b&&a){i.putStringNotNull("VariableReadMode",f.QInAConverter.lookupReadModeInA(f.QInADimension.getReadMode(d,f.QContextType.VARIABLE)));}};f.QInADimension.getReadMode=function(d,c){var r=d.getReadMode(c);return r===f.QMemberReadMode.DEFAULT_VALUE?d.getReadModeDefault(c):r;};f.QInADimension.exportQdReadModeLegacy=function(e,d,i){var r;var a;var b=e.isAbap(d);if(e.getMode()===f.QModelFormat.INA_VALUE_HELP){r=f.QContextType.SELECTOR;a="SelectorReadMode";if(b){i.putStringNotNull("VariableReadMode",f.QInAConverter.lookupReadModeInA(f.QInADimension.getReadMode(d,f.QContextType.VARIABLE)));}}else{r=f.QContextType.RESULT_SET;a="ResultSetReadMode";}var c=f.QInADimension.getReadMode(d,r);if(f.isNull(c)){e.addError(f.ErrorCodes.INVALID_DIMENSION,f.XStringUtils.concatenate3("No read mode given for dimension '",d.getName(),"'!"));return;}var g=f.QInAConverter.lookupReadModeInA(c);if(!e.getSession().hasFeature(f.FeatureToggleOlap.NO_NON_EMPTY)){i.putBoolean("NonEmpty",c===f.QMemberReadMode.BOOKED);}i.putStringNotNull("ReadMode",g);if(b){i.putStringNotNull(a,g);}};f.QInADimension.importDimReadModes=function(i,q,d,a){if(f.notNull(q)){if(i.isAbap(q)){f.QInADimension.importReadModeSettings(a,d,f.QContextType.RESULT_SET,"ResultSetReadMode");f.QInADimension.importReadModeSettings(a,d,f.QContextType.VARIABLE,"VariableReadMode");}else{f.QInADimension.importReadModeSettings(a,d,f.QContextType.RESULT_SET,"ResultSetMemberReadMode");}}f.QInADimension.importReadModeSettings(a,d,f.QContextType.SELECTOR,"SelectorReadMode");};f.QInADimension.importReadModeSettings=function(i,d,c,a){var b=i.getStringByKey(a);if(f.notNull(b)){var r=f.QInAConverter.lookupReadMode(b);if(f.notNull(r)&&r!==f.QMemberReadMode.UNDEFINED){d.setReadMode(c,r);}}var g=d.getReadMode(c);if(f.isNull(g)){var e=d.getReadModeDefault(c);if(f.notNull(e)&&e!==f.QMemberReadMode.UNDEFINED){d.setReadMode(c,e);}else if(f.QContextType.VARIABLE===c){var s=d.getSupportedReadModes(c);d.setReadMode(c,s.getValuesAsReadOnlyList().get(0));}}};f.QInADimension.importRsAttributeNodes=function(i,d){var a=i.getListByKey("ResultSetAttributeNodes");if(f.isNull(a)){a=i.getListByKey("DefaultResultSetAttributeNodes");}if(f.notNull(a)){var r=d.getResultSetAttributes();r.clear();var b=a.size();for(var c=0;c<b;c++){var e=a.getStringAt(c);var g=d.getAttributeByName(e);if(f.notNull(g)){r.add(g);}}}};f.QInADimension.importRsFields=function(i,d){var a=i.getListByKey("ResultSetFields");if(f.isNull(a)){a=i.getListByKey("DefaultResultSetAttributes");}if(f.notNull(a)){var r=d.getResultSetFields();r.clear();var b=a.size();for(var c=0;c<b;c++){var e=a.getStringAt(c);var g=d.getFieldByName(e);if(f.notNull(g)){r.add(g);}}}};f.QInADimension.resetFieldsToDefault=function(d){var a=d.getFieldLayoutType();var b=d.getDefaultFieldLayoutType();if(a!==b){d.setFieldLayoutType(b);}if(b===f.FieldLayoutType.FIELD_BASED){var c=d.getDefaultResultSetFields();var e=d.getResultSetFields();e.clear();e.addAll(c);}else{var g=d.getDefaultResultSetAttributes();var h=d.getResultSetAttributes();h.clear();for(var j=0;j<g.size();j++){var i=g.get(j);var k=i.getDefaultResultSetFields();var l=i.getResultSetFields();l.clear();l.addAll(k);h.add(i);}}};f.QInADimension.exportFieldLayout=function(e,i,d){var a;var c=e.modelContext;if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA)){i.putString("FieldLayoutType",d.getFieldLayoutType().toString());f.QInADimension.exportRsFields(i,d);}if(d.getFieldLayoutTypeExt(c)===f.FieldLayoutType.FIELD_BASED){a=d.getFieldsExt(c);}else{a=d.getAttributesExt(c).getEffectiveFields(c);}var b=i.putNewList("Attributes");f.QInADimension.exportListOfFields(a,b,e,false);var h=f.QInADimension.getHiddenFields(e,d,a);f.QInADimension.exportListOfFields(h,b,e,true);};f.QInADimension.exportRsFields=function(a,d){var r=a.putNewList("ResultSetFields");var b=d.getResultSetFields();for(var i=0;i<b.size();i++){r.addString(b.get(i).getName());}};f.QInADimension.exportListOfFields=function(a,b,e,h){var c=f.QImExFlag.DEFAULT_ALL;var d=f.XMath.binaryOr(c,f.QImExFlag.HIDE);var g=a.size();for(var i=0;i<g;i++){if(h){b.add(e.exportComponent(f.OlapComponentType.FIELD,a.get(i),null,d));}else{b.add(e.exportComponent(f.OlapComponentType.FIELD,a.get(i),null,c));}}};f.QInADimension.getHiddenFields=function(e,d,a){var b;if(e.modelContext===f.QContextType.SELECTOR){var c=f.XList.create();c.add(d.getKeyFieldExt(f.QContextType.SELECTOR));var h=d.getHierarchyTextField();if(f.notNull(h)&&d.isSelectorHierarchyActive()){c.add(h);}b=c;}else{b=d.getFieldsListByActiveUsageType();}var g=f.XList.create();g.addAll(b);var j=a.size();for(var i=0;i<j;i++){g.removeElement(a.get(i));}var k=d.getKeyFieldExt(e.modelContext);var t=d.getTextField();if(t===k){t=null;}for(var l=0;l<g.size();){var m=g.get(l);if(m!==k){if(m!==t){if(!m.isAlwaysRequested()){if(m.hasSorting()){if(m.getResultSetSorting().getDirection()===f.XSortDirection.DEFAULT_VALUE){g.removeAt(l);continue;}}else{g.removeAt(l);continue;}}}}l++;}if(e.getSession().hasFeature(f.FeatureToggleOlap.DONT_ALWAYS_REQUEST_TEXTFIELD)){g.removeElement(t);}else{f.QInADimension.moveFieldToStart(g,t);}f.QInADimension.moveFieldToStart(g,k);return g;};f.QInADimension.moveFieldToStart=function(h,a){var b=h.size();for(var i=0;i<b;i++){var c=h.get(i);if(c===a){if(i!==0){h.removeAt(i);h.insert(0,c);}break;}}};f.QInADimension.prototype.getComponentType=function(){return f.OlapComponentType.ABSTRACT_DIMENSION;};f.QInADimension.prototype.importComponentWithStructure=function(a,b,m,p,c){var q=c.getQueryModel();var d=m;if(f.isNull(d)){var e=b.getStringByKey("Name");if(f.notNull(q)){d=q.getDimensionManagerBase().getDimensionByNameInternal(e);}if(f.isNull(d)){return null;}}if(a.mode!==f.QModelFormat.INA_DATA_REINIT){d.setSelectorGettingInterval(false);f.QInADimension.importDimReadModes(a,q,d,b);a.importMembers(b,d,c);this.importFieldsLayout(a,b,d,c);this.importQdFieldTransformations(a,b,d);a.importHierarchy(d,b);if(f.notNull(q)&&!q.getModelCapabilities().supportsExtendedSort()){var g=q.getModelCapabilities();if(g.supportsDimensionSorting(d,f.SortType.MEMBER_KEY)){var h=b.getIntegerByKeyExt("SortOrder",f.QInAConverter.lookupSortDirectionInA(f.XSortDirection.DEFAULT_VALUE));var s=f.QInAConverter.lookupSortDirection(h);d.getResultSetSorting().setDirection(s);}}if(a.capabilities.supportsCummulative()&&d.supportsCumulative()){d.setIsCumulative(b.getBooleanByKeyExt("IsCummulative",false));}var j=b.getIntegerByKeyExt("Skip",0);d.setSkipEntries(j);var t=b.getIntegerByKeyExt("Top",0);d.setTopEntries(t);var k=b.getStringByKey("ReadMode");if(f.notNull(k)){var r=f.QInAConverter.lookupReadMode(k);d.setReadModeGraceful(f.QContextType.RESULT_SET,r);}a.importTotals(b,d.getResultStructureControllerBase(),c);this.importAlternativeFieldValues(b,d);}else{var v=d.getVariableContainer();if(f.notNull(v)){var l=v.getVariables();var n=l.size();for(var i=0;i<n;i++){var o=l.get(i);if(o.getVariableType()===f.VariableType.HIERARCHY_NAME_VARIABLE&&f.XString.isEqual(o.getHierarchyNameDimension().getName(),d.getName())){a.importHierarchy(d,b);break;}}}}return d;};f.QInADimension.prototype.importAlternativeFieldValues=function(a,d){var b=a.getListByKey("AlternativeFieldValues");if(f.notNull(b)){var s=b.size();for(var i=0;i<s;i++){var c=b.get(i);if(c.isStructure()){var e=c;var g=e.getStringByKey("ValueType");var v=f.QInAConverter.lookupValueType(g);var h=e.getStringByKey("Value");var j=null;if(v===f.XValueType.INTEGER){j=f.XIntegerValue.create(f.XInteger.convertFromStringWithRadix(h,10));}else if(v===f.XValueType.LONG){j=f.XLongValue.create(f.XLong.convertFromString(h));}else if(v===f.XValueType.DOUBLE){j=f.XDoubleValue.create(f.XDouble.convertFromString(h));}else if(v===f.XValueType.STRING){j=f.XStringValue.create(h);}else if(v===f.XValueType.DATE){j=f.XDate.createDateFromIsoFormat(h);}else if(v===f.XValueType.DATE_TIME){j=f.XDateTime.createDateTimeFromIsoFormat(h);}if(f.notNull(j)){var k=e.getBooleanByKey("HierarchyKey");var m=e.getStringByKey("MemberKey");var l=e.getStringByKey("FieldName");var n=e.getStringByKey("Language");d.setAlternativeFieldValue(k,m,l,j,n);}}}}};f.QInADimension.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;i.putString("Name",d.getName());var s=e.getSession();var b=s.hasFeature(f.FeatureToggleOlap.NO_MEASURE_READMODE)&&d.isStructure();if(!b){if(s.hasFeature(f.FeatureToggleOlap.NO_DUPLICATED_READMODE)){f.QInADimension.exportQdReadMode(e,d,i);}else{f.QInADimension.exportQdReadModeLegacy(e,d,i);}}var t;if(e.mode===f.QModelFormat.INA_VALUE_HELP){t=f.AxisType.ROWS;}else{t=d.getAxisType();}i.putString("Axis",f.QInAConverter.lookupAxisTypeInA(t));var c=d.isDesignTimeMode();if(c){i.putBoolean("DesignTimeMode",c);}var g=d.getSkipEntries();if(g>0){i.putInteger("Skip",g);}var h=d.getTopEntries();if(h>0){i.putInteger("Top",h);}if(d.supportsCumulative()){i.putBoolean("IsCummulative",d.isCumulative());}if(!f.QInAUniversalDisplayHierarchies.isHierarchyConverted(e,d)){e.exportHierarchy(d,i);}if(e.mode!==f.QModelFormat.INA_VALUE_HELP){if(d.supportsTotals()){e.exportTotals(d,i);}if(d.getStructureLayout()!==null){e.exportMembers(d,i);}}f.QInADimension.exportFieldLayout(e,i,d);return i;};f.QInADimension.prototype.importQdFieldTransformations=function(a,b,d){var c=b.getListByKey("Fields");if(f.notNull(c)){var e=c.size();for(var i=0;i<e;i++){var g=c.get(i);if(g.isStructure()){var h=g.getStringByKey("Name");var t=g.getStringByKey("TextTransformation");if(f.XStringUtils.isNotNullAndNotEmpty(h)&&f.XStringUtils.isNotNullAndNotEmpty(t)){var j=d.getFieldByName(h);var k=f.TextTransformationType.lookupName(t);if(f.notNull(j)&&f.notNull(k)){if(k.isTypeOf(f.TextTransformationType.SPATIAL_TRANSFORMATION)&&!a.capabilities.supportsSpatialTransformation()){continue;}j.setTextTransformation(k);}}}}}};f.QInADimension.prototype.importFieldsLayout=function(i,a,d,c){var b;var e=a.getStringByKey("FieldLayoutType");if(f.notNull(e)){b=f.QInAConverter.lookupFieldLayoutType(e);var g=a.getListByKey("FieldSettings");if(f.notNull(g)){var h=g.size();for(var p=0;p<h;p++){i.importComponent(f.OlapComponentType.FIELD,g.getStructureAt(p),null,d,c);}}var j=a.getListByKey("AttributeSettings");if(f.notNull(j)){var k=j.size();for(var l=0;l<k;l++){var m=j.getStructureAt(l);i.importAttribute(m,d,c);}}f.QInADimension.importRsFields(a,d);f.QInADimension.importRsAttributeNodes(a,d);d.setFieldLayoutType(b);}else{var n=a.getListByKey("ResultSetFields");if(f.isNull(n)){n=a.getListByKey("DefaultResultSetAttributes");}if(f.notNull(n)){b=f.FieldLayoutType.ATTRIBUTE_BASED;if(d.supportsFieldLayoutType(b)){d.setFieldLayoutType(b);}b=d.getFieldLayoutType();if(b===f.FieldLayoutType.FIELD_BASED){var r=d.getResultSetFields();r.clear();var o=d.getMainAttribute();if(f.notNull(o)){o.getResultSetFields().clear();}var q;var R;var s=n.size();var t=f.XHashSetOfString.create();for(R=0;R<s;R++){q=n.getStringAt(R);if(!t.contains(q)){t.add(q);var u=d.getFieldByName(q);if(f.isNull(u)){i.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate2("Field not found: ",q));return;}r.add(u);}}n=a.getListByKey("Attributes");if(f.notNull(n)){s=n.size();for(R=0;R<s;R++){var v=n.getStructureAt(R);q=v.getStringByKey("Name");if(!t.contains(q)){t.add(q);var w=d.getFieldByNameOrAlias(q);if(f.isNull(w)){i.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate2("Field not found: ",q));return;}r.add(w);}}}}}else if(d.isStructure()){f.QInADimension.resetFieldsToDefault(d);}}};f.QInADimensionsAll=function(){};f.QInADimensionsAll.prototype=new f.QInAComponentWithList();f.QInADimensionsAll.prototype._ff_c="QInADimensionsAll";f.QInADimensionsAll.exportTechnicalDimension=function(e,q,i,a){if(!e.capabilities.supportsUniversalModel()){return;}var b=q.getQueryCellManager();if(b.isEmpty()){return;}var d=q.getDimensionByName("$$Cells$$");f.QInADimensionsAll.exportDimension(e,d,i,a);};f.QInADimensionsAll.exportAxisDimensionsWithHeuristic=function(e,a,p,u,b){var q=a.getQueryModel();var r=e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA);var o=q.isOptimizedExportModeActive();var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(o&&c.isIgnoredOnOptimizedExport()){continue;}if(r&&!u.contains(c.getName())){continue;}f.QInADimensionsAll.exportDimension(e,c,p,b);}};f.QInADimensionsAll.exportAxisDimensions=function(e,a,p,b){var d=a.getDimensionCount();if(!f.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired(e,a)){for(var i=0;i<d;i++){var c=a.get(i);f.QInADimensionsAll.exportDimension(e,c,p,b);}}else{var g=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a).getName();var u=f.QInAUniversalDisplayHierarchies.getDimensionNames(e,a);for(var k=0;k<d;k++){var h=a.get(k);var j=h.getName();if(f.XString.isEqual(j,g)){f.QInADimensionsAll.exportUdhDimensionsForConvertedLbh(e,a,p,u,b,h);}else if(!u.contains(j)){f.QInADimensionsAll.exportDimension(e,h,p,b);}}}};f.QInADimensionsAll.exportUdhDimensionsForConvertedLbh=function(e,a,p,u,b,d){var s=u.size();for(var i=0;i<s;i++){var c=a.getQueryModel().getDimensionByName(u.get(i));c.stopEventing();var t=c.getAxisBase();var g=c.isHierarchyActive();var h=c.getResultVisibilityByElement(f.ResultStructureElement.TOTAL);c.setAxis(a);if(g){c.setHierarchyActive(false);}c.setResultVisibilityByElement(f.ResultStructureElement.TOTAL,i===0?d.getResultVisibilityByElement(f.ResultStructureElement.TOTAL):f.ResultVisibility.VISIBLE);f.QInADimensionsAll.exportDimension(e,c,p,b);c.setAxis(t);if(g){c.setHierarchyActive(true);}c.setResultVisibilityByElement(f.ResultStructureElement.TOTAL,h);c.resumeEventing();}};f.QInADimensionsAll.exportDimension=function(e,d,i,a){if(!a.contains(d.getName())){a.add(d.getName());i.add(e.exportDimension(d,null));}};f.QInADimensionsAll.prototype.getComponentType=function(){return f.OlapComponentType.DIMENSIONS;};f.QInADimensionsAll.prototype.getTagName=function(){return"Dimensions";};f.QInADimensionsAll.prototype.importComponentWithList=function(i,a,m,p,c){if(f.notNull(a)){var q=m;var d=q.getDimensionManagerBase();if(i.mode!==f.QModelFormat.INA_DATA_REINIT){var b=q.getFreeAxis();b.addAll(d);}var s=a.size();var e=d.getDimensionReferences();for(var k=0;k<s;k++){var g=a.getStructureAt(k);var h=g.getStringByKey("Name");var j=g.getStringByKey("Axis");var l=null;if(g.containsKey("FieldMappings")){var n=i.importCalculatedDimension(g,q);d.addDimension(n);d.finalizeDimensionMetadataSetup(n);}else if(g.containsKey("CType")&&f.XComponentType.lookupComponentType(g.getStringByKey("CType"))===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var o=i.importFormulaCalculatedDimension(g,q,null);d.addDimension(o);d.finalizeDimensionMetadataSetup(o);}else{if(e.containsKey(h)){var r=f.AxisType.lookup(j);if(i.getMode()===f.QModelFormat.INA_REPOSITORY||r===f.AxisType.COLUMNS||r===f.AxisType.ROWS){l=d.getDimensionByNameFromExistingMetadata(h);}}i.importDimension(g,q);}if(i.mode!==f.QModelFormat.INA_DATA_REINIT){if(f.isNull(l)){l=d.getDimensionByNameInternal(h);if(f.isNull(l)){continue;}}if(f.isNull(j)){j=g.getStringByKeyExt("AxisDefault","Free");}q.getAxis(f.QInAConverter.lookupAxisType(j)).add(l);}}}return m;};f.QInADimensionsAll.prototype.exportDimensionIfOnFreeAxis=function(d){var q=d.getQueryModel();var u=f.XHashSetOfString.create();var a=q.getFilter();if(a.isDynamicFilterInitialized()){f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(a.getDynamicFilter(),u);var l=a.getLinkedFilters().getValuesAsReadOnlyList();for(var i=0;i<l.size();i++){var b=l.get(i);f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(b,u);}}var c=u.contains(d.getName());if(d.isMeasureStructure()){var e=q.getExceptionManager();var h=f.XCollectionUtils.hasElements(e);return c||h;}return c;};f.QInADimensionsAll.prototype.exportComponentWithList=function(e,m,a){var i=f.PrFactory.createList();if(e.mode!==f.QModelFormat.INA_VALUE_HELP){var q=m;var c=q.getModelCapabilities();var b=f.XHashSetOfString.create();f.QInADimensionsAll.exportAxisDimensions(e,q.getAxis(f.AxisType.ROWS),i,b);f.QInADimensionsAll.exportAxisDimensions(e,q.getAxis(f.AxisType.COLUMNS),i,b);if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var u=f.XHashSetOfString.create();if(e.mode===f.QModelFormat.INA_REPOSITORY_DATA||e.mode===f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){f.DimensionUsageAnalyzer2.setupHeuristic(q,u);}f.QInADimensionsAll.exportAxisDimensionsWithHeuristic(e,q.getAxis(f.AxisType.FREE),i,u,b);}else if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var d=c.supportsCubeBlendingOutOfContext()&&q.isBlendingModel();var g=q.getDataSource().getType()===f.MetaObjectType.PLANNING&&e.getSession().hasFeature(f.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var h=q.getAxis(f.AxisType.FREE);var s=h.size();var j=e.isAbap(q);for(var k=0;k<s;k++){var l=h.get(k);var n=l.getDimensionType();if(n===f.DimensionType.MEASURE_STRUCTURE||n===f.DimensionType.SECONDARY_STRUCTURE){var o=this.exportDimensionIfOnFreeAxis(l);if(o){f.QInADimensionsAll.exportDimension(e,l,i,b);}}else if(n===f.DimensionType.ACCOUNT){var p=this.exportDimensionIfOnFreeAxis(l);if(p){f.QInADimensionsAll.exportDimension(e,l,i,b);}}else if(n.isTypeOf(f.DimensionType.CALCULATED_DIMENSION)||d||(j||g)&&(l.isHierarchyActive()||l.hasPlaceHolderForHierarchyInfo())){f.QInADimensionsAll.exportDimension(e,l,i,b);}}f.QInADimensionsAll.exportTechnicalDimension(e,q,i,b);}}return i;};f.QInADrillManager=function(){};f.QInADrillManager.prototype=new f.QInAComponentWithList();f.QInADrillManager.prototype._ff_c="QInADrillManager";f.QInADrillManager.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_MANAGER;};f.QInADrillManager.prototype.getTagName=function(){return"HierarchyNavigations";};f.QInADrillManager.prototype.getZoomDrillPath=function(i,d,a,c){var b=f.XList.create();var e=a.getListByKey("DrillContextMembers");if(f.notNull(e)){var s=e.size();for(var g=0;g<s;g++){var h=e.getStructureAt(g);var j=i.importDrillPathElement(h,d,c);b.add(j);}}var k=a.getStringByKey("DrillState");var l=a.getStructureByKey("DrillMember");if(f.isNull(l)||f.isNull(k)){return null;}var m=i.importDrillPathElement(l,d,c);b.add(m);return b;};f.QInADrillManager.prototype.importComponentWithList=function(i,a,m,p,c){var d=m;var s;d.removeAllContextDrillOperations();d.removeZoomDrillOperationsByDimension(null);if(f.notNull(a)){var b=-1;s=a.size();for(var e=0;e<s;e++){var g=a.getStructureAt(e);var z=g.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(z===-1){i.importDrillOperation(g,d,c);}else if(z>-1){var h=this.getZoomDrillPath(i,d,g,c);if(f.XCollectionUtils.hasElements(h)){if(z!==b){d.pushEmptyZoomDrillForDimension(h.get(h.size()-1).getDimension());b=z;}var j=g.getIntegerByKeyExt("DrillOffset",0)>0;d.addZoomDrillPath(h,j);}}}}return m;};f.QInADrillManager.prototype.exportComponentWithList=function(e,m,a){var d=m;var c=d.getModelCapabilities();var b=null;var g;if(e.getMode().isTypeOf(f.QModelFormat.INA_DATA)||e.getMode().isTypeOf(f.QModelFormat.INA_VALUE_HELP)){g=d.getDrillOperationsForInAData();}else{g=d.getDrillOperationsForInARepo();}var h=g.size();if(h>0){var q=d.getQueryModel();var j=null;var k=null;b=f.PrFactory.createList();var l=null;if(c.supportsHierarchyNavigationDeltaMode()){l=g.get(h-1);var t=l.getTargetDimension();if(f.notNull(t)&&t.isHierarchyNavigationDeltaMode()){k=t;j=e.exportDrillOperation(l);}}var n=e.isAbap(q);if(!n&&e.getMode().isTypeOf(f.QModelFormat.INA_DATA)||e.getMode().isTypeOf(f.QModelFormat.INA_VALUE_HELP)){g=g.createListCopy();if(f.notNull(k)){g.removeElement(l);h=g.size();}if(h>0){g.sortByComparator(f.XComparatorDrill.create());}}var i;for(i=0;i<h;i++){var o=g.get(i);if(o.getType()===f.DrillOperationType.CONTEXT){var p=o.getTargetDimension();if(f.isNull(k)||k!==p){if(!n&&p.getInitialDrillLevel()<0&&o.getDrillState()===f.DrillState.EXPANDED){continue;}b.add(e.exportDrillOperation(o));}}}if(f.notNull(j)){b.add(j);}if(b.isEmpty()){b=null;}}return b;};f.QInADrillPathElement=function(){};f.QInADrillPathElement.prototype=new f.QInAComponentWithStructure();f.QInADrillPathElement.prototype._ff_c="QInADrillPathElement";f.QInADrillPathElement.prototype.getComponentType=function(){return f.MemberType.DRILL_PATH_ELEMENT;};f.QInADrillPathElement.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var q=d.getContext().getQueryModel();var b=a.getStringByKey("FieldName");var e=a.getStringByKey("DimensionName");var g;if(f.XStringUtils.isNotNullAndNotEmpty(e)){g=q.getDimensionByNameFromExistingMetadata(e);}else{var h=q.getFieldByNameOrAlias(b);if(f.isNull(h)){g=q.getDimensionByNameFromExistingMetadata(b);if(f.notNull(g)){h=g.getKeyField();b=h.getName();}}else{g=h.getDimension();}}var j=f.QDrillPathElement._create(c);j.setDimension(g);var k=a.getStringByKey("Member");j.setName(k);j.setFieldName(b);return j;};f.QInADrillPathElement.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var n=b.getNameForInAExport();if(f.isNull(n)){i.putNull("Member");}else{var q=b.getQueryModel();if(f.isNull(q)&&b.getDimension()!==null){q=b.getDimension().getQueryModel();}var c=f.QInAExportUtil.getMeasureMemberNameByAlias(q,n,e);i.putString("Member",c);}i.putString("FieldName",b.getFieldName());if(e.mode===f.QModelFormat.INA_REPOSITORY){var d=b.getDimension();f.QInAExportUtil.setNameIfNotNull(i,"DimensionName",d);}return i;};f.QInADrillPathOperation=function(){};f.QInADrillPathOperation.prototype=new f.QInAComponentWithStructure();f.QInADrillPathOperation.prototype._ff_c="QInADrillPathOperation";f.QInADrillPathOperation.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_OPERATION;};f.QInADrillPathOperation.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var b=a.getStringByKey("DrillState");var e=a.getStructureByKey("DrillMember");if(f.isNull(e)||f.isNull(b)){return null;}var g=f.XList.create();var h=a.getListByKey("DrillContextMembers");if(f.notNull(h)){var s=h.size();for(var j=0;j<s;j++){var k=h.getStructureAt(j);var l=i.importDrillPathElement(k,d,c);g.add(l);}}var n=i.importDrillPathElement(e,d,c);g.add(n);var o=d.setDrillState(g,f.QInAConverter.lookupDrillStateOp(b));var q=a.getIntegerByKeyExt("DrillLevel",1);o.setRelativeLevelCount(q);return o;};f.QInADrillPathOperation.prototype.exportComponentWithStructure=function(e,m,i,a){var o=m;if(o.getType()===f.DrillOperationType.CONTEXT){var b=f.QInAConverter.lookupDrillStateInA(o.getDrillState());i.putString("DrillState",b);var r=o.getRelativeLevelCount();if(r!==1){i.putInteger("DrillLevel",r);}if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)||e.mode.isTypeOf(f.QModelFormat.INA_VALUE_HELP)){if(o.supportsDrillCounter()){i.putInteger("HierarchyNavigationCounter",o.getDrillCounter());}}else{if(o.getZoomStackPosition()!==-1){i.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition());}if(o.getRelativeLevelOffset()!==0){i.putInteger("DrillOffset",o.getRelativeLevelOffset());}}var d=o.getDrillPath();var c=d.size();if(c>0){var g=d.get(c-1);var h=e.exportDrillPathElement(g,false);i.put("DrillMember",h);if(c>1){var j=f.PrFactory.createList();i.put("DrillContextMembers",j);for(var k=0;k<c-1;k++){g=d.get(k);h=e.exportDrillPathElement(g,true);j.add(h);}}}}return i;};f.QInAExceptions=function(){};f.QInAExceptions.prototype=new f.QInAComponentWithList();f.QInAExceptions.prototype._ff_c="QInAExceptions";f.QInAExceptions.importEvaluates=function(i,m,n,a){var b=i.getListByKey("EvaluateOn");if(f.isNull(b)){return;}var s=b.size();var q=m.getQueryModel();for(var e=0;e<s;e++){var c=b.getStructureAt(e);var d=c.getStringByKey("Name");var g=q.getFieldByName(d);if(f.isNull(g)){var h=q.getDimensionByNameFromExistingMetadata(d);if(f.notNull(h)){g=h.getKeyField();}}if(f.isNull(g)){g=m.getKeyFieldValue().getField();}if(f.isNull(g)){a.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Could not find field '",d,"'!"));return;}if(!c.containsKey("Low")){a.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate2("No low value for field: ",d));return;}var v=g.getValueType();var l=f.QInAValueUtils.importValueByType(a,c,"Low",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected low valuetype for field: ",v.getName()));return;}var j=n._addNewEvaluateWithFieldInternal(g,l);if(c.containsKey("High")){var k=f.QInAValueUtils.importValueByType(a,c,"High",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected high valuetype for field: ",v.getName()));return;}j.setHighValue(k);}j.setEvaluate(f.QExceptionEvalType.lookupExceptionEvalType(c.getStringByKey("Evaluate")));var o=c.getStringByKey("Comparison");var p=f.QInAConverter.lookupComparison(o);if(f.isNull(p)){a.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",o,"'"));return;}j.setOperator(p);}};f.QInAExceptions.importThresholds=function(i,n){var a=i.getListByKey("Threshold");if(f.notNull(a)){var s=a.size();for(var t=0;t<s;t++){var b=a.getStructureAt(t);var c=b.getIntegerByKeyExt("AlertLevel",-9999);var d;var e=!b.hasStringByKey("Low");if(e){d=n._addNewThresholdInternal(b.getDoubleByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}else{d=n._addNewThresholdWithStringInternal(b.getStringByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}var g=b.getStringByKey("Name");if(f.notNull(g)){d.setName(g);}var o=f.QInAConverter.lookupComparison(b.getStringByKey("Comparison"));d.setOperator(o);if(o.getNumberOfParameters()===2){if(e){var h=b.getDoubleByKey("High");d.setHighValue(h);}else{var j=b.getStringByKey("High");d.setHigh(j);}}f.QInAExceptions.importSettings(b.getListByKey("Settings"),d);}}};f.QInAExceptions.importSettings=function(i,n){if(f.isNull(i)){return;}var s=i.size();for(var S=0;S<s;S++){var a=i.getStructureAt(S);var b=a.getStringByKey("Name");var p=a.getIntegerByKey("Priority");var v=a.getStringByKey("Value");if(f.notNull(v)&&!f.XString.isEqual(v,"")){var c=n.addNewSetting(b,p);c.setValue(v);}}};f.QInAExceptions.exportStructureContextItem=function(s,m,e){if(f.notNull(m)){var a=s.addNewStructure();var d=m.getDimension();a.putString("DimensionName",d.getName());a.putString("MemberName",m.getName());if(e.isEvaluateAllMembers(d)){a.putBoolean("EvaluateAllMembers",true);}var b=e.getDisplayOnOtherMember(m);f.QInAExportUtil.setNameIfNotNull(a,"DisplayOnOtherMember",b);}};f.QInAExceptions.exportEvaluates=function(e,a,i,b){if(e.isEmpty()){return;}var c=i.putNewList("EvaluateOn");var s=e.size();for(var E=0;E<s;E++){var d=c.addNewStructure();var g=e.get(E);d.putString("Name",g.getField().getName());d.putString("Evaluate",g.getEvaluate().toString());var h=g.getOperator();var j;if(h===f.ComparisonOperator.NOT_BETWEEN&&b){j="NOTBETWEEN";}else{j=f.QInAConverter.lookupComparisonInA(h);}d.putString("Comparison",j);f.QInAValueUtils.exportPlaceholderValue(a,"Low",d,g.getLowValue(),g.getValueType(),g.getQueryModel());if(!d.containsKey("Low")){d.putString("Low","");}if(h.getNumberOfParameters()>1){f.QInAValueUtils.exportPlaceholderValue(a,"High",d,g.getHighValue(),g.getValueType(),g.getQueryModel());}}};f.QInAExceptions.exportThresholds=function(t,e,i,a){var b=i.putNewList("Threshold");var s=t.size();for(var T=0;T<s;T++){var c=t.get(T);var d=b.addNewStructure();var n=c.getName();if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)&&!f.XString.isEqual(n,"Settings")){d.putStringNotNull("Name",n);}var g=c.getOperator();var h;if(g===f.ComparisonOperator.NOT_BETWEEN&&a){h="NOTBETWEEN";}else{h=f.QInAConverter.lookupComparisonInA(g);}d.putString("Comparison",h);var j=c.getValueType()===f.XValueType.DOUBLE;if(c.getLowXValue()!==null){if(j){d.putDouble("Low",c.getLowValue());}else{d.putString("Low",c.getLow());}}if(c.getHighXValue()!==null&&g.getNumberOfParameters()>1){if(j){d.putDouble("High",c.getHighValue());}else{d.putString("High",c.getHigh());}}if(!c.isEmpty()){f.QInAExceptions.exportSettings(c,e,d);}else{d.putInteger("AlertLevel",c.getAlertLevel().getLevel());}}};f.QInAExceptions.exportSettings=function(t,e,i){var a=i.putNewList("Settings");var s=t.size();for(var S=0;S<s;S++){var b=t.get(S);var c=a.addNewStructure();c.putString("Name",b.getName());c.putInteger("Priority",b.getPriority());var v=b.getValue();if(f.isNull(v)||f.XString.isEqual(v,"")){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value");}else{c.putString("Value",v);}}};f.QInAExceptions.prototype.getComponentType=function(){return f.OlapComponentType.EXCEPTION_MANAGER;};f.QInAExceptions.prototype.getTagName=function(){return"Exceptions";};f.QInAExceptions.prototype.isVersion1=function(q,m){var c=m.getOlapComponentType();return!q.capabilities.supportsExceptionsV2()&&c.isTypeOf(f.MemberType.ABSTRACT_MEMBER);};f.QInAExceptions.prototype.isVersion2=function(q,m){var c=m.getOlapComponentType();return q.capabilities.supportsExceptionsV2()&&c.isTypeOf(f.OlapComponentType.QUERY_MODEL);};f.QInAExceptions.prototype.importComponentWithList=function(i,a,m,p,c){var b=m;var e=b.getQueryModel().getExceptionManager();e.queueEventing();if(this.isVersion1(i,m)){e.removeAllExceptionsOfMeasure(m);this.importFormatV1(i,a,m,e);}else if(this.isVersion2(i,m)){e.clear();this.importFormatV2(i,a,m,e);}e.resumeEventing();return e;};f.QInAExceptions.prototype.importFormatV1=function(i,a,m,e){if(f.notNull(a)){var s=a.size();for(var b=0;b<s;b++){var c=a.getStructureAt(b);var n=this.importException(i,m,e,c);n.setMeasure(m);n.setIsChangeable(c.getBooleanByKeyExt("Changegable",true));}}};f.QInAExceptions.prototype.importException=function(i,m,e,a){var b=a.getStringByKey("Name");var c=a.getStringByKey("Text");var d=f.QExceptionEvalType.lookupExceptionEvalType(a.getStringByKey("EvaluateDefault"));var h=f.QExceptionHeaderSettings.lookupExceptionHeaderSetting(a.getStringByKey("ApplySettingsToHeader"));var g=a.getBooleanByKeyExt("Active",true);var j=a.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);var n=e._addNewExceptionInternal(b,c,d,h,g,!j);n.queueEventing();f.QInAExceptions.importEvaluates(a,m,n,i);f.QInAExceptions.importThresholds(a,n);n.resumeEventing();return n;};f.QInAExceptions.prototype.importFormatV2=function(i,a,q,e){if(f.isNull(a)){return;}var s=a.size();for(var E=0;E<s;E++){var b=a.getStructureAt(E);var c=b.getListByKey("StructureContext");if(!f.PrUtils.isListEmpty(c)){var d=this.importContextItem(c.getStructureAt(0),q,e,null,i,b);if(f.notNull(d)){if(c.size()>1){this.importContextItem(c.getStructureAt(1),q,e,d,i,b);}d.setIsChangeable(b.getBooleanByKeyExt("Changegable",true));}}}};f.QInAExceptions.prototype.importContextItem=function(s,q,e,a,i,b){var c=a;var d=q.getDimensionByNameFromExistingMetadata(s.getStringByKey("DimensionName"));if(f.notNull(d)){var m=this.getMemberFromContextItem(s,d);if(f.notNull(m)){if(f.isNull(c)){c=this.importException(i,m,e,b);}if(d.isMeasureStructure()){c.setMeasure(m);}else{c.setStructure(m);}c.displayOnOtherMember(m,d.getStructureMember(s.getStringByKey("DisplayOnOtherMember")));c.setEvaluateAllMembers(d,s.getBooleanByKeyExt("EvaluateAllMembers",false));}}return c;};f.QInAExceptions.prototype.getMemberFromContextItem=function(s,d){var m=d.getStructureMember(s.getStringByKey("MemberName"));if(f.isNull(m)){var e=s.getBooleanByKeyExt("EvaluateAllMembers",false);var a=d.getAllStructureMembers();if(e&&!a.isEmpty()){return a.get(0);}}return m;};f.QInAExceptions.prototype.exportComponentWithList=function(e,m,a){if(this.isVersion1(e,m)){return this.exportFormatV1(e,m);}else if(this.isVersion2(e,m)){return this.exportFormatV2(e,m);}return null;};f.QInAExceptions.prototype.exportFormatV1=function(e,s){var i=null;var a=s.getExceptions();if(f.notNull(a)){var b=a.size();if(b>0){i=f.PrFactory.createList();var c=e.isAbap(s);for(var E=0;E<b;E++){var d=a.get(E);var g=this.exportException(e,d,c);if(f.isNull(g)){break;}i.add(g);}}}return i;};f.QInAExceptions.prototype.exportException=function(e,a,i){var b=f.PrFactory.createStructure();if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){b.putBoolean("Active",a.isActive());b.putBoolean("EvaluateBeforePostAggregation",!a.isEvaluatedAfterCalculations());b.putBoolean("Changegable",a.isChangeable());}else if(i){b.putBoolean("Active",a.isActive());}else if(!a.isActive()){e.addWarning(f.ErrorCodes.IMPORT_EXCEPTION_INACTIVE,f.XStringUtils.concatenate3("Exception '",a.getName(),"' is inactive."));return null;}var t=a.getThresholds();if(t.isEmpty()&&!e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){e.addWarning(f.ErrorCodes.IMPORT_EXCEPTION_NO_THRESHOLDS,f.XStringUtils.concatenate3("Exception '",a.getName(),"' has no threshold."));return null;}f.QInAExceptions.exportThresholds(t,e,b,i);f.QInAExceptions.exportEvaluates(a.getEvaluates(),e,b,i);b.putString("Name",a.getName());if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||i){b.putString("Text",a.getText());}var h=a.getHeaderSetting();if(h!==f.QExceptionHeaderSettings.NONE){b.putString("ApplySettingsToHeader",h.getName());}b.putString("EvaluateDefault",a.getEvaluateDefault().toString());return b;};f.QInAExceptions.prototype.exportFormatV2=function(e,q){var a=q.getExceptionManager();var s=a.size();if(s===0){return null;}var b=f.PrFactory.createList();var c=e.isAbap(q);for(var i=0;i<s;i++){var d=a.get(i);var g=this.getExportedExceptionStructureByName(b,d.getName());if(f.isNull(g)){g=this.exportException(e,d,c);if(f.isNull(g)){continue;}g.putNewList("StructureContext");b.add(g);}var h=g.getListByKey("StructureContext");f.QInAExceptions.exportStructureContextItem(h,d.getMeasure(),d);f.QInAExceptions.exportStructureContextItem(h,d.getStructure(),d);}return b;};f.QInAExceptions.prototype.getExportedExceptionStructureByName=function(e,a){var s=e.size();for(var i=0;i<s;i++){var b=e.getStructureAt(i);if(f.XString.isEqual(b.getStringByKey("Name"),a)){return b;}}return null;};f.QInAField=function(){};f.QInAField.prototype=new f.QInAComponentWithStructure();f.QInAField.prototype._ff_c="QInAField";f.QInAField.prototype.getComponentType=function(){return f.OlapComponentType.FIELD;};f.QInAField.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=c.getFieldAccessorSingle().getFieldByName(a.getStringByKey("Name"));if(f.isNull(b)){return null;}var d=a.getStringByKey("TextTransformation");if(f.notNull(d)){b.setTextTransformation(f.QInAConverter.lookupTextTransformation(d));}b.setDisplayFormat(a.getStringByKey("DisplayFormat"));if(b.getDimension().getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var e=a.getStructureByKey("Formula");if(f.notNull(e)){var n=f.QInAFormulaMeasure.importFormulaMeasure(i,b.getDimension(),a.getStructureByKey("Formula"),null,c);b.setFormulaItem(n);}}return b;};f.QInAField.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var o=b.getObtainability();var h=f.XMath.binaryAnd(a,f.QImExFlag.HIDE)>0||f.notNull(o)&&o!==f.ObtainabilityType.ALWAYS;i.putString("Name",b.getName());if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA_BLENDING_SOURCE)){i.putStringNotNull("DisplayFormat",b.getDisplayFormat());}var t=b.getTextTransformation();if(f.notNull(t)){i.putString("TextTransformation",f.QInAConverter.lookupTextTransformationInA(t));}if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)||e.mode===f.QModelFormat.INA_VALUE_HELP){if(!e.capabilities.supportsExtendedSort()&&!e.isVirtualInA(b.getQueryModel())){var d;if(e.modelContext===f.QContextType.SELECTOR){if(b.isEqualTo(b.getDimension().getSelectorKeyField())){d=b.getDimension().getSelectorOrder();i.putInteger("SortOrder",f.QInAConverter.lookupSortDirectionInA(d));}else{i.putInteger("SortOrder",0);}}else{if(b.hasSorting()){d=b.getResultSetSorting().getDirection();i.putInteger("SortOrder",f.QInAConverter.lookupSortDirectionInA(d));}else if(b.getDimension().hasSorting()){var c=b.getDimension();d=c.getResultSetSorting().getDirection();i.putInteger("SortOrder",f.QInAConverter.lookupSortDirectionInA(d));}else{i.putInteger("SortOrder",0);}}}if(h){i.putString("Obtainability","UserInterface");}else{i.putString("Obtainability","Always");}}else if(b.getDimension().getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var g=b;if(g.getFormulaItem()!==null){f.QInAFormulaMeasure.exportFormulaItem(e,g.getFormulaItem(),i.putNewStructure("Formula"),b.getQueryModel());}}if(e.isVirtualInA(b.getQueryModel())){i.putBoolean("IsKey",b.isKeyField());}return i;};f.QInAFilter=function(){};f.QInAFilter.prototype=new f.QInAComponentWithStructure();f.QInAFilter.prototype._ff_c="QInAFilter";f.QInAFilter.mergeAndExportFilterStateList=function(e,a){var m=null;var s=a.size();if(s>0){if(s>1){var b=f.XList.create();for(var i=0;i<s;i++){var c=e.exportFilterExpression(a.get(i));if(f.notNull(c)){b.add(c);}}var d=b.size();if(d>0){if(d>1){m=f.PrFactory.createStructure();var g=m.putNewStructure("Selection");var h=g.putNewStructure("Operator");h.putString("Code","And");var k=h.putNewList("SubSelections");for(var j=0;j<d;j++){var l=b.get(j).getStructureByKey("Selection");if(f.notNull(l)){k.add(l);}}}else{m=b.get(0);}}}else{m=e.exportFilterExpression(a.get(0));}}return m;};f.QInAFilter.prototype.exportFilter=function(e,a,b,l,t,z,c){if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA)&&!e.mode.isTypeOf(f.QModelFormat.INA_VALUE_HELP)){return e.exportFilterExpression(b);}if(f.notNull(l)&&l.size()===1&&f.notNull(c)&&!f.XCollectionUtils.hasElements(z)&&!e.mode.isTypeOf(f.QModelFormat.INA_PERSISTED_QUERY_DATA)){var d=l.getIterator().next();if(f.notNull(d)&&!d.isReleased()&&!d.getModelCapabilities().supportsMultiComplexFilter()){var g=a.getEffectiveFilter();var h=e.exportFilterExpression(g);if(f.notNull(h)){return h;}}}var i=f.XList.create();var s=f.XList.create();if(this.isValidFilterExpression(b)&&!this.shouldBeIgnored(e,b)){if(a.isIgnoreInternalNonMeasureFilter()){s.add(this.extractMeasureFilter(b,b.getContext(),i));}else{s.add(this.decorateWithZoomFilter(b,z,i));}}if(f.notNull(l)){var j=a.getExternalizedFilterName();var k=l.getByKey(j);if(this.isValidFilterExpression(k)&&!this.shouldBeIgnored(e,k)){var m=this.getRuntimeExternalFilter(k,a,i);if(a.isIgnoreInternalNonMeasureFilter()){s.add(this.extractMeasureFilter(m,b.getContext(),i));}else{s.add(this.decorateWithZoomFilter(m,z,i));}}var n=l.getKeysAsIteratorOfString();while(n.hasNext()){var o=n.next();if(!f.XString.isEqual(o,j)){var p=l.getByKey(o);if(this.isValidFilterExpression(p)&&!this.shouldBeIgnored(e,p)){var r=this.getRuntimeExternalFilter(p,a,i);s.add(this.decorateWithZoomFilter(r,z,i));}}}}if(f.notNull(t)&&this.isValidFilterExpression(t)){s.add(this.decorateWithZoomFilter(t,z,i));}var q;if(f.XCollectionUtils.hasElements(z)){q=f.QFilterExpression.createTransient(b.getContext());q.setComplexRoot(z);s.add(q);i.add(q);}if(f.XCollectionUtils.hasElements(c)){var u=f.QFilterExpression.createTransient(b.getContext());u.setComplexRoot(c);s.add(u);i.add(u);}var v=f.QInAFilter.mergeAndExportFilterStateList(e,s);f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(i);return v;};f.QInAFilter.prototype.shouldBeIgnored=function(e,a){return e.mode.isTypeOf(f.QModelFormat.INA_PERSISTED_QUERY_DATA)&&a.getTagging().containsKey("PersistedQueryIgnoreFilter");};f.QInAFilter.prototype.getRuntimeExternalFilter=function(i,a,t){var b=a.getBackProjectionFilterIds();var r;if(f.notNull(b)&&b.contains(i.getUniqueId())){r=f.QFilterExpression.createTransient(a.getContext());r.copyFrom(i,null);t.add(r);}else{r=i;}return r;};f.QInAFilter.prototype.extractMeasureFilter=function(a,c,t){var r;var b=a.getFilterRootElement();if(f.isNull(b)){r=a;}else{r=f.QFilterExpression.createTransient(c);r.setComplexRoot(this.copyAndSkipNonMeasureFilter(b,c.getQueryModel()));t.add(r);}return r;};f.QInAFilter.prototype.copyAndSkipNonMeasureFilter=function(a,q){var c;var m=a.getComponentType();if(m.isTypeOf(f.FilterComponentType.CARTESIAN_LIST)||m.isTypeOf(f.FilterComponentType.OPERATION)){var d=q.getDimensionByName(a.getDimensionName());if(f.notNull(d)&&d.getDimensionType().isTypeOf(f.DimensionType.MEASURE_STRUCTURE)){return a;}}else if(m.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)&&!m.isTypeOf(f.FilterComponentType.CARTESIAN_LIST)){var s=this.createFilterAlgebraList(m,q);c=a.getChildrenIterator();while(c.hasNext()){var b=this.copyAndSkipNonMeasureFilter(c.next(),q);if(f.notNull(b)){s.add(b);}}return s;}return null;};f.QInAFilter.prototype.decorateWithZoomFilter=function(a,d,t){var r;var b=a.getFilterRootElement();if(!f.XCollectionUtils.hasElements(d)||f.isNull(b)){r=a;}else{var i=this.checkConflicting(b,d,false);if(i){r=f.QFilterExpression.createTransient(d.getContext());r.setComplexRoot(this.copyAndSkipConflicting(b,d));t.add(r);}else{r=a;}}return r;};f.QInAFilter.prototype.copyAndSkipConflicting=function(a,d){var c;var m=a.getComponentType();if(m.isTypeOf(f.OlapComponentType.FILTER_ELEMENT)&&!this.checkConflicting(a,d,false)){return a;}else if(m.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)&&!m.isTypeOf(f.FilterComponentType.CARTESIAN_LIST)){var s=this.createFilterAlgebraList(m,d.getContext());c=a.getChildrenIterator();while(c.hasNext()){var b=this.copyAndSkipConflicting(c.next(),d);if(f.notNull(b)){s.add(b);}}return s;}return null;};f.QInAFilter.prototype.createFilterAlgebraList=function(c,a){if(c.isTypeOf(f.FilterComponentType.CARTESIAN_PRODUCT)){return f.QFilterCartesianProduct._create(a,null);}if(c.isTypeOf(f.FilterComponentType.AND)){return f.QFilterAnd._create(a,null);}if(c.isTypeOf(f.FilterComponentType.OR)){return f.QFilterOr._create(a,null);}if(c.isTypeOf(f.FilterComponentType.NOT)){return f.QFilterNot._create(a,null);}return f.QFilterCartesianProduct._create(a,null);};f.QInAFilter.prototype.checkConflicting=function(a,d,h){var c=a.getComponentType();var i;var b;if(c.isTypeOf(f.FilterComponentType.CARTESIAN_LIST)){var e=a;if(!e.isConvertToFlatFilter()&&d.getCartesianListByDimensionName(e.getDimensionName())!==null){var g=f.XStringUtils.isNotNullAndNotEmpty(e.getHierarchyName());b=a.getChildrenIterator();while(b.hasNext()){i=this.checkConflicting(b.next(),d,g);if(i){return true;}}}}else if(c.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)){b=a.getChildrenIterator();while(b.hasNext()){i=this.checkConflicting(b.next(),d,false);if(i){return true;}}}else if(c.isTypeOf(f.FilterComponentType.OPERATION)){var o=a;var j=o.getDimensionName();return!o.isConvertToFlatFilter()&&(h||f.XStringUtils.isNotNullAndNotEmpty(o.getHierarchyName()))&&(f.isNull(j)||d.getCartesianListByDimensionName(j)!==null);}return false;};f.QInAFilter.prototype.isValidFilterExpression=function(a){if(f.isNull(a)){return false;}var b=a.getFilterRootElement();if(f.isNull(b)){return false;}var c=b.getOlapComponentType();return c!==f.FilterComponentType.FILTER_ACROSS_MODELS&&c!==f.FilterComponentType.FILTER_MEASURE_BASED;};f.QInAFilterAlgebra=function(){};f.QInAFilterAlgebra.prototype=new f.QInAComponentWithStructure();f.QInAFilterAlgebra.prototype._ff_c="QInAFilterAlgebra";f.QInAFilterAlgebra.prototype.getComponentType=function(){return f.FilterComponentType.BOOLEAN_ALGEBRA;};f.QInAFilterAlgebra.prototype.getTagName=function(){return"Operator";};f.QInAFilterAlgebra.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=p;var e=b.getListByKey("SubSelections");if(f.notNull(e)){var g=b.getStringByKey("Code");var s;if(f.XString.isEqual(g,"And")){s=f.QFilterAnd._create(c,d);}else if(f.XString.isEqual(g,"Not")){s=f.QFilterNot._create(c,d);}else{s=f.QFilterOr._create(c,d);}var h=e.size();for(var i=0;i<h;i++){var j=e.getStructureAt(i);var k=a.importFilterElement(j,null,d,c);if(f.notNull(k)){s.add(k);}}if(s.hasElements()){return s;}}return null;};f.QInAFilterAlgebra.prototype.exportComponentWithStructure=function(e,m,a,b){var l=m;var s=l.size();if(s===0){return null;}var c=f.PrFactory.createList();for(var i=0;i<s;i++){var d=l.get(i);var g;if(d.getOlapComponentType()===f.FilterComponentType.TUPLE){g=e.exportFilterTuple(d);}else{g=e.exportFilterElement(d);}if(f.notNull(g)&&g.hasElements()){c.add(g);}}if(c.isEmpty()){return null;}a.put("SubSelections",c);var t=l.getComponentType();if(t.isTypeOf(f.FilterComponentType.AND)){a.putString("Code","And");}else if(t.isTypeOf(f.FilterComponentType.OR)){a.putString("Code","Or");}else if(t===f.FilterComponentType.NOT){a.putString("Code","Not");}return a;};f.QInAFilterAll=function(){};f.QInAFilterAll.prototype=new f.QInAComponentWithStructure();f.QInAFilterAll.prototype._ff_c="QInAFilterAll";f.QInAFilterAll.prototype.getComponentType=function(){return f.OlapComponentType.SELECTOR;};f.QInAFilterAll.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;i.importFixedFilter(a,b,c);i.importDynamicFilter(a,b,c);i.importVisibilityFilter(a,b,c);return b;};f.QInAFilterAll.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(b.getQueryModel().isExportingFixedFilter()){e.exportFixedFilter(b,i);}e.exportDynamicFilter(b,i);e.exportVisibilityFilter(b,i);return i;};f.QInAFilterCellValueOperand=function(){};f.QInAFilterCellValueOperand.prototype=new f.QInAComponentWithStructure();f.QInAFilterCellValueOperand.prototype._ff_c="QInAFilterCellValueOperand";f.QInAFilterCellValueOperand.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_CELL_VALUE_OPERAND;};f.QInAFilterCellValueOperand.prototype.importComponentWithStructure=function(i,a,m,p,c){var l=a.getStringByKey("Low");if(f.XString.isEqual(l,"")){l=null;}var h=a.getStringByKey("High");if(f.XString.isEqual(h,"")){h=null;}var o=f.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));var b=f.QFilterCellValueOperand._create(c,null,l,h,o);b.setIsExcluding(a.getBooleanByKey("IsExcluding"));return b;};f.QInAFilterCellValueOperand.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;i.putBoolean("IsExcluding",c.isExcluding());var b=c.getComparisonOperator();i.putString("Comparison",f.QInAConverter.lookupComparisonInA(b));var l=c.getLow();i.putString("Low",l);if(f.XStringUtils.isNotNullAndNotEmpty(l)&&c.isLowVariable()){i.putString("LowIs","Variable");}if(b.getNumberOfParameters()===2){var h=c.getHigh();i.putString("High",h);if(f.XStringUtils.isNotNullAndNotEmpty(h)&&c.isHighVariable()){i.putString("HighIs","Variable");}}return i;};f.QInAFilterConvertedTimeCartesianList=function(){};f.QInAFilterConvertedTimeCartesianList.prototype=new f.QInAFilterCartesianList();f.QInAFilterConvertedTimeCartesianList.prototype._ff_c="QInAFilterConvertedTimeCartesianList";f.QInAFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST;};f.QInAFilterElement=function(){};f.QInAFilterElement.prototype=new f.QInAComponentWithStructure();f.QInAFilterElement.prototype._ff_c="QInAFilterElement";f.QInAFilterElement.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_ELEMENT;};f.QInAFilterElement.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=m;if(a.containsKey("Operator")){d=i.importFilterAlgebra(b,a,c);}else{var e=a.getStructureByKey("SetOperand");if(f.isNull(e)){if(a.containsKey("GeometryOperand")){d=i.importFilterGeo(b,a,c);}}else{d=i.importCartesianList(e,d,b,c);}}return d;};f.QInAFilterElement.prototype.m_exportingAtLevel1=false;f.QInAFilterElement.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var t=b.getComponentType();if(t.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)){if(t===f.FilterComponentType.CARTESIAN_LIST){e.exportCartesianList(b,i);}else if(t===f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){e.exportConvertedTimeCartesianList(b,i);}else if(t===f.FilterComponentType.CARTESIAN_PRODUCT){e.exportFilterCartesianProduct(b,i);}else{if(this.shouldContinueExport(b,e)){e.exportFilterAlgebra(b,i);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false;}}}}else if(t.isTypeOf(f.FilterComponentType.OPERATION)){var c=b;var d=c.getComparisonOperator();if(f.notNull(d)){if(d.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){e.exportFilterGeo(c,i);}else{if(e.capabilities.supportsSetOperand()){var g=f.PrFactory.createStructure();var h=c.getFieldMetadata();if(f.notNull(h)){g.putString("FieldName",h.getName());var j=c.getHierarchyName();if(f.notNull(j)){var k=c.getFilterExpression()!==null?c.getFilterExpression():c.getParent().getFilterExpression();f.QInAHierarchy.exportHierarchyForFilter(e,e.isAbap(b),g,null,k,c.getQueryManager(),h.getName(),j,c.getHierarchyDueDate(),c.getHierarchyVersion());}if(c.isConvertToFlatFilter()){g.putBoolean("ConvertToFlatSelection",true);}var l=g.putNewList("Elements");var n=l.addNewStructure();e.exportFilterOperation(c,n);if(f.notNull(i)){i.put("SetOperand",g);}}}}}}else if(t.isTypeOf(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){var o=f.PrFactory.createStructure();var p=o.putNewList("Elements");p.add(e.exportCellValueOperand(b));i.put("CellValueOperand",o);}return i;};f.QInAFilterElement.prototype.shouldContinueExport=function(a,e){var i=f.notNull(e.variableProcessingDirective)&&e.variableProcessingDirective===f.ProcessingStep.VARIABLE_DEFINITION;if(!i){return true;}var q=a.getQueryModel();var m=a.getModelCapabilities();if(m.supportsComplexTupleFilter()&&f.notNull(q)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true;}return false;}return true;};f.QInAFilterExpression=function(){};f.QInAFilterExpression.prototype=new f.QInAComponentWithStructure();f.QInAFilterExpression.prototype._ff_c="QInAFilterExpression";f.QInAFilterExpression.exportGlobalCellValueOperands=function(e,a){var b=null;if(a.getModelCapabilities().supportsCellValueOperand()){var c=f.PrFactory.createList();if(a.isSuppressingNulls()){var n=f.QFilterCellValueOperand.createForNullSuppression(a.getContext(),null);c.add(e.exportCellValueOperand(n));}var d=a.getCellValueOperands();var s=d.size();for(var i=0;i<s;i++){c.add(e.exportCellValueOperand(d.get(i)));}if(!c.isEmpty()){var g=f.PrFactory.createStructure();g.put("Elements",c);b=f.PrFactory.createStructure();b.put("CellValueOperand",g);}}return b;};f.QInAFilterExpression.combineSetOperandWithCellValueOperand=function(i,a){if(f.QInAFilterExpression.isCellOperandEmpty(a)&&!f.QInAFilterExpression.isSetOperandEmpty(i)){return i;}if(!f.QInAFilterExpression.isCellOperandEmpty(a)&&f.QInAFilterExpression.isSetOperandEmpty(i)){var n=f.PrFactory.createStructure();n.put("Selection",a);return n;}if(f.QInAFilterExpression.isCellOperandEmpty(a)&&f.QInAFilterExpression.isSetOperandEmpty(i)){return null;}var b=f.PrFactory.createStructure();var c=b.putNewStructure("Selection");var d=c.putNewStructure("Operator");d.putString("Code","And");var e=d.putNewList("SubSelections");var g=i.getStructureByKey("Selection");if(f.isNull(g)){var h=f.PrFactory.createStructure();h.put("SetOperand",i);e.add(h);}else{e.add(g);}e.add(a);return b;};f.QInAFilterExpression.isCellOperandEmpty=function(i){if(f.notNull(i)){var a=i.getStructureByKey("Selection");var b;if(f.isNull(a)){b=i.getStructureByKey("CellValueOperand");}else{b=a.getStructureByKey("CellValueOperand");}if(f.notNull(b)){return b.getListByKey("Elements").isEmpty();}}return true;};f.QInAFilterExpression.isSetOperandEmpty=function(i){if(f.isNull(i)){return true;}var a=i.getStructureByKey("Selection");if(f.isNull(a)){a=i.getStructureByKey("SetOperand");var b;if(f.isNull(a)){b=i.getListByKey("Elements");}else{b=a.getListByKey("Elements");}return f.PrUtils.isListEmpty(b);}return a.getKeysAsReadOnlyListOfString().isEmpty();};f.QInAFilterExpression.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_EXPRESSION;};f.QInAFilterExpression.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){b=f.QFactory.createFilterExpression(c,p);}var v=0;var d=null;if(f.notNull(a)){d=a.getStructureByKey("Selection");if(f.isNull(d)){d=a.getStructureByKey("SelectionRepo");v=1;}}b.setCartesianProduct(null);b.setComplexRoot(null);if(f.notNull(d)){var e=i.importFilterElement(d,null,b,c);if(f.notNull(e)){if(v>=1){b.setComplexRoot(e);}else{var g=f.QFilterUtil.convertComplexFilterToCartesian(e);if(f.notNull(g)){b.setCartesianProduct(g);}else{b.setComplexRoot(e);}}}}if(b.getModelCapabilities().supportsCellValueOperand()){b.setIsSuppressingNulls(false);b.clearCellValueFilter();if(f.notNull(a)){if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){b.setIsSuppressingNulls(a.getBooleanByKeyExt("IsSuppressingNulls",false));}if(f.notNull(d)){var h=d.getStructureByKey("CellValueOperand");if(f.isNull(h)){var j=d.getStructureByKey("Operator");if(f.notNull(j)){var k=j.getListByKey("SubSelections");if(k.size()===2){var l=k.getStructureAt(1);h=l.getStructureByKey("CellValueOperand");}}}if(f.notNull(h)){var n=h.getListByKey("Elements");if(f.notNull(n)){var o=f.QFilterCellValueOperand.createForNullSuppression(c,null);var s=n.size();if(s>0){var q=n.getStructureAt(0);var r=i.importFilterCellValueOperand(q,c);var t=0;if(r.isEqualTo(o)){b.setIsSuppressingNulls(true);t=1;}b.clearCellValueFilter();for(var u=t;u<s;u++){var w=n.getStructureAt(u);var x=i.importFilterCellValueOperand(w,c);b.addCellValueFilter(x);}}}}}}}return b;};f.QInAFilterExpression.prototype.exportComponentWithStructure=function(e,m,i,a){return i;};f.QInAFilterExpression.prototype.exportComponent=function(e,m,i,a){var b=m;if(f.isNull(b)){return null;}var c=null;if(b.getModelCapabilities().supportsCellValueOperand()){c=f.QInAFilterExpression.exportGlobalCellValueOperands(e,b);}var d=b.getFilterRootElement();var g=null;if(f.notNull(d)){if(d.getOlapComponentType()===f.FilterComponentType.TUPLE){g=e.exportFilterTuple(d);}else if(d.getOlapComponentType()===f.FilterComponentType.VIRTUAL_DATASOURCE){g=e.exportFilterVirtualDatasource(d);}else{g=e.exportFilterElement(d);}if(f.notNull(g)&&!g.hasElements()){g=null;}}var h=null;if(f.notNull(g)){h=f.PrFactory.createStructure();h.put("Selection",g);}if(f.notNull(c)){h=f.QInAFilterExpression.combineSetOperandWithCellValueOperand(h,c);}if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){if(f.isNull(h)){h=f.PrFactory.createStructure();}if(b.getModelCapabilities().supportsCellValueOperand()){h.putBoolean("IsSuppressingNulls",b.isSuppressingNulls());}}return h;};f.QInAFilterFixed=function(){};f.QInAFilterFixed.prototype=new f.QInAComponentWithStructure();f.QInAFilterFixed.prototype._ff_c="QInAFilterFixed";f.QInAFilterFixed.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_FIXED;};f.QInAFilterFixed.prototype.getTagName=function(){return"FixedFilter";};f.QInAFilterFixed.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.isNull(a)){return null;}var b=p;var d=i.importFilterExpression(null,a,b,c);if(f.notNull(b)&&f.notNull(d)){b.setFixedFilter(d);}return d;};f.QInAFilterFixed.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(!b.isFixedFilterInitialized()){return null;}var c=b.getFixedFilter();return e.exportFilterExpression(c);};f.QInAFilterGeo=function(){};f.QInAFilterGeo.prototype=new f.QInAComponentWithStructure();f.QInAFilterGeo.prototype._ff_c="QInAFilterGeo";f.QInAFilterGeo.tryCreateGeometry=function(s){var v=f.XGeometryValue.createGeometryValueWithWkt(s);if(f.isNull(v)){v=f.XStringValue.create(s);}return v;};f.QInAFilterGeo.prototype.getComponentType=function(){return f.FilterComponentType.SPATIAL_FILTER;};f.QInAFilterGeo.prototype.getTagName=function(){return"GeometryOperand";};f.QInAFilterGeo.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=c.getFieldAccessorSingle();var e=a.getStringByKey("Comparison");var g=a.getStringByKey("FieldName");var h=a.getStringByKey("Value1");if(f.XStringUtils.isNotNullAndNotEmpty(e)&&f.XStringUtils.isNotNullAndNotEmpty(g)&&f.XStringUtils.isNotNullAndNotEmpty(h)){var j=f.QInAConverter.lookupComparison(e);if(f.isNull(j)){return null;}if(!j.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){return null;}var k=d.getFieldByName(g);if(f.isNull(k)){return null;}var l=f.QFactory.createFilterOperationWithOperator(b,k,j);var n=f.QInAFilterGeo.tryCreateGeometry(h);l.getLow().setValue(n);var o=a.getStringByKey("Value2");if(f.XStringUtils.isNotNullAndNotEmpty(o)){var s=f.QInAFilterGeo.tryCreateGeometry(o);l.getHigh().setValue(s);}var q=a.getStringByKey("Value3");if(f.XStringUtils.isNotNullAndNotEmpty(q)){var t=f.QInAFilterGeo.tryCreateGeometry(q);l.getThird().setValue(t);}return l;}return null;};f.QInAFilterGeo.prototype.exportComponentWithStructure=function(e,m,i,a){var o=m;var c=o.getComparisonOperator();if(!c.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){throw f.XException.createIllegalStateException("Not a spatial operator");}i.putString("Comparison",f.QInAConverter.lookupComparisonInA(c));var b=o.getFieldMetadata();i.putString("FieldName",b.getName());var g=o.getLow();var d=o.getDataSource();if(f.isNull(d)){if(f.notNull(g)&&g.getValue()!==null){if(e.mode===f.QModelFormat.INA_PERSISTED_QUERY_DATA&&g.getTagging().containsKey("PersistedQueryPlaceholder")){i.putString("Value1",g.getTagging().getByKey("PersistedQueryPlaceholder"));}else{f.QInAValueUtils.exportFilterValue(e,"Value1",i,g,g.getValueType());}var s=g.getGeometry().getSrid();if(e.capabilities.supportsSpatialFilterSrid()&&f.notNull(s)){i.putInteger("SRID",s.getInteger());}}}else{if(f.notNull(g)&&g.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value1",i,g,f.XValueType.STRING);}var h=e.exportDataSource(d,false);i.put("DataSource",h);}var j=o.getHigh();if(f.notNull(j)&&j.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value2",i,j,f.XValueType.STRING);}var k=o.getThird();if(f.notNull(k)&&k.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value3",i,k,f.XValueType.STRING);}return i;};f.QInAFilterManager=function(){};f.QInAFilterManager.prototype=new f.QInAComponentWithStructure();f.QInAFilterManager.prototype._ff_c="QInAFilterManager";f.QInAFilterManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){b=c.getOlapEnv().getFilterManager();}var d=a.getStructureByKey("OlapFilterManager");var e=d.getStructureByKey("OlapFilters");var g=e.getKeysAsIteratorOfString();while(g.hasNext()){var h=g.next();var j=b.getFilterByName(h);i.importFilterExpression(j,e.getStructureByKey(h),b,b.getContext());}return b;};f.QInAFilterManager.prototype.exportComponentWithStructure=function(e,m,i,a){var b=i.putNewStructure("OlapFilterManager");var c=b.putNewStructure("OlapFilters");var d=m;var g=d.getFilters();var h=g.getKeysAsIteratorOfString();while(h.hasNext()){var j=h.next();var k=g.getByKey(j);c.put(j,e.exportFilterExpression(k));}return i;};f.QInAFilterManager.prototype.getComponentType=function(){return f.OlapComponentType.OLAP_FILTER_MANAGER;};f.QInAFilterOperation=function(){};f.QInAFilterOperation.prototype=new f.QInAComponentWithStructure();f.QInAFilterOperation.prototype._ff_c="QInAFilterOperation";f.QInAFilterOperation.importValue=function(i,v,a,b,c,d,p,e,g){var h=d.getStringByKey(e);var j=f.QInAConverter.lookupValueType(h);if(j===f.XValueType.VARIABLE){b.setFilterValueType(f.XValueType.VARIABLE);var k=d.getStringByKey(p);var l=v.getVariables().getByKey(k);if(f.notNull(l)){b.setVariableValue(l);}}else{if(j===f.XValueType.CURRENT_MEMBER){b.setFilterValueType(j);}if(f.notNull(g)){var m=d.getListByKey(g);if(f.notNull(m)){var n=b.getMemberNavigations();var o=m.size();for(var q=0;q<o;q++){n.add(f.QInAFilterOperation.importMemberNavigation(m.getStructureAt(q)));}}}f.QInAValueUtils.importValue(i,b,d,p,c,a);}};f.QInAFilterOperation.importMemberNavigation=function(i){var m=f.QFactory.createMemberNavigation(f.CurrentMemberFunction.lookup(i.getStringByKey("Function")));if(i.containsKey("Parameters")){var a=i.getListByKey("Parameters");var b=a.size();for(var c=0;c<b;c++){var d=a.getStructureAt(c);if(d.containsKey("Navigations")){var e=d.getListByKey("Navigations");var g=e.size();for(var h=0;h<g;h++){m.addNavigation(f.QInAFilterOperation.importMemberNavigation(e.getStructureAt(h)));}}else{if(d.containsKey("Level")){var j=d.getByKey("Level");if(j.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithLevelNumber(j.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithLevelLiteral(j.getString()));}}else if(d.containsKey("Member")){m.addParameter(f.QFactory.createNavigationParameterWithMemberName(d.getStringByKey("Member")));}else if(d.containsKey("NoValuesAboveLevel")){m.addParameter(f.QFactory.createNavigationParameterWithNoValuesAboveLevel(d.getStringByKey("NoValuesAboveLevel")));}else if(d.containsKey("Shift")){var k=d.getStructureByKey("Shift");m.addParameter(f.QFactory.createNavigationParameterWithShift(k.getStringByKey("Level"),k.getIntegerByKey("Constant")));}else if(d.containsKey("Range")){var l=d.getStructureByKey("Range");m.addParameter(f.QFactory.createNavigationParameterWithRange(l.getStringByKey("Level"),l.getIntegerByKey("OffsetLow"),l.getIntegerByKey("OffsetHigh")));}else{var n=d.getByKey("Constant");if(n.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithIntegerConstant(n.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithStringConstant(n.getString()));}}}}}return m;};f.QInAFilterOperation.exportMemberNavigation=function(m,a){a.putString("Function",m.getMemberFunction().getName());var p=m.getParameters();if(f.notNull(p)){var s=p.size();var b=a.putNewList("Parameters");for(var i=0;i<s;i++){var c=p.get(i);var d=b.addNewStructure();var e=c.getMemberNavigationType();var k=f.QInAConverter.lookupMemberNavigationTypeInA(e);if(e===f.MemberNavigationType.FUNCTION_PARAM_SHIFT||e===f.MemberNavigationType.FUNCTION_PARAM_RANGE){d=d.putNewStructure(k);f.QInAFilterOperation.setKeyValueForMemberNavigation(d,"Level",c.getLevelValue());f.QInAFilterOperation.setKeyValueForMemberNavigation(d,"Constant",c.getConstantValue());f.QInAFilterOperation.setKeyValueForMemberNavigation(d,"OffsetLow",c.getOffSetLow());f.QInAFilterOperation.setKeyValueForMemberNavigation(d,"OffsetHigh",c.getOffsetHigh());}else{if(!f.QInAFilterOperation.setKeyValueForMemberNavigation(d,k,c.getLevelValue())){if(!f.QInAFilterOperation.setKeyValueForMemberNavigation(d,k,c.getConstantValue())){f.QInAFilterOperation.setKeyValueForMemberNavigation(d,k,c.getFunctionName());}}}}}var n=m.getNavigations();if(f.notNull(n)){var g;if(a.containsKey("Parameters")){g=a.getListByKey("Parameters");}else{g=a.putNewList("Parameters");}var h=g.addNewStructure();var j=h.putNewList("Navigations");var l=n.size();for(var o=0;o<l;o++){f.QInAFilterOperation.exportMemberNavigation(n.get(o),j.addNewStructure());}}};f.QInAFilterOperation.setKeyValueForMemberNavigation=function(i,k,v){if(f.isNull(v)){return false;}if(v.getValueType().isNumber()){i.putDouble(k,v.getDouble());}else{i.putString(k,v.toString());}return true;};f.QInAFilterOperation.exportValue=function(e,v,a,i,p,b,c){var d=v.getFilterValueType();if(d===f.XValueType.VARIABLE){var g=v.getVariableValue();if(f.notNull(g)){i.putString(b,"Variable");i.putString(p,g.getName());}}else{if(v.isManualInput()){i.putString(b,"ManualInput");}if(d===f.XValueType.CURRENT_MEMBER){i.putString(b,"CurrentMember");}if(e.mode===f.QModelFormat.INA_PERSISTED_QUERY_DATA&&v.getTagging().containsKey("PersistedQueryPlaceholder")){i.putString(p,v.getTagging().getByKey("PersistedQueryPlaceholder"));}else{f.QInAValueUtils.exportPlaceholderValue(e,p,i,v,a,v.getQueryModel());}if(f.notNull(c)){var m=v.getMemberNavigations();var h=m.size();if(h>0){var j=i.putNewList(c);for(var k=0;k<h;k++){f.QInAFilterOperation.exportMemberNavigation(m.get(k),j.addNewStructure());}}}}};f.QInAFilterOperation.prototype.getComponentType=function(){return f.FilterComponentType.OPERATION;};f.QInAFilterOperation.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=a.getStringByKeyExt("Comparison","=");var d=f.QInAConverter.lookupComparison(b);if(f.isNull(d)){i.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate2("Unsupported comparison operator: ",b));return null;}var e=p;var g=e.getFilterExpression();var h=e.getField();var j=f.QFactory.createFilterOperationWithOperator(g,h,d);var k=h.getValueType();var l=d.isTypeOf(f.ComparisonOperator.LIKE)||d.isTypeOf(f.ComparisonOperator.MATCH)||d.isTypeOf(f.ComparisonOperator.NOT_MATCH);if(l){k=f.XValueType.STRING;}if(a.getBooleanByKeyExt("IsExcluding",false)){j.setSetSign(f.SetSign.EXCLUDING);}else{j.setSetSign(f.SetSign.INCLUDING);}j.resetDepth();var n=a.getIntegerByKeyExt("Depth",-1);if(n!==-1){j.setDepth(n);}j.resetLevelOffset();var o=a.getIntegerByKeyExt("LevelOffset",-1);if(o!==-1){j.setLevelOffset(o);}var q=a.getStructureByKey("Hierarchy");if(f.notNull(q)){var r=q.getStringByKey("Name");var s=null;var t=null;var u=j.getQueryModel();if(i.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&f.notNull(u)&&u.getSystemType().isTypeOf(f.SystemType.ABAP)){var v=q.getStringByKey("DueDate");if(f.notNull(v)){s=f.XDate.createDateFromSAPFormat(v);}t=q.getStringByKey("Version");}j.setHierarchyInfo(r,s,t);}if(i.capabilities.supportsConvertToFlatFilter()){j.setConvertToFlatFilter(a.getBooleanByKeyExt("ConvertToFlatSelection",false));}var w=e.getSupplementFieldNames();var x=c.getVariableContainer();var y=d.getNumberOfParameters();if(y>=1){var z=j.getLow();f.QInAFilterOperation.importValue(i,x,h,z,k,a,"Low","LowIs","LowNavigations");f.QInAValueUtils.importSupplements(i,z,a,"LowSupplements",w);}if(y>=2){var A=j.getHigh();f.QInAFilterOperation.importValue(i,x,h,A,k,a,"High","HighIs",null);f.QInAValueUtils.importSupplements(i,A,a,"HighSupplements",w);}if(y>=3){var B=j.getThird();f.QInAFilterOperation.importValue(i,x,h,B,k,a,"Value3","Value3Is",null);f.QInAValueUtils.importSupplements(i,B,a,null,w);}return j;};f.QInAFilterOperation.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var c=b.getFieldMetadata();if(f.isNull(c)){return i;}var d=b.getComparisonOperator();if(f.isNull(d)){d=f.ComparisonOperator.EQUAL;}var g=c.getValueType();if(d.isTypeOf(f.ComparisonOperator.LIKE)||d.isTypeOf(f.ComparisonOperator.MATCH)||d.isTypeOf(f.ComparisonOperator.NOT_MATCH)){g=f.XValueType.STRING;}var h=b.getContext();var j;if(d===f.ComparisonOperator.NOT_BETWEEN&&e.isAbap(h)){j="NOTBETWEEN";}else{j=f.QInAConverter.lookupComparisonInA(d);}i.putString("Comparison",j);if(b.hasLevelOffset()){i.putInteger("LevelOffset",b.getLevelOffset());}if(b.hasDepth()){i.putInteger("Depth",b.getDepth());}if(b.getSetSign()===f.SetSign.EXCLUDING){i.putBoolean("IsExcluding",true);}var k=b.getHierarchyName();if(f.notNull(k)){var l=b.getFilterExpression()!==null?b.getFilterExpression():b.getParent().getFilterExpression();f.QInAHierarchy.exportHierarchyForFilter(e,e.isAbap(h),i,null,l,b.getQueryManager(),c.getName(),k,b.getHierarchyDueDate(),b.getHierarchyVersion());}if(e.capabilities.supportsConvertToFlatFilter()&&b.isConvertToFlatFilter()){i.putBoolean("ConvertToFlatSelection",true);}var n=d.getNumberOfParameters();if(n>=1){f.QInAFilterOperation.exportValue(e,b.getLow(),g,i,"Low","LowIs","LowNavigations");if(n>=2){f.QInAFilterOperation.exportValue(e,b.getHigh(),g,i,"High","HighIs",null);}if(n>=3){f.QInAFilterOperation.exportValue(e,b.getThird(),g,i,"Value3","Value3Is",null);}}return i;};f.QInAFilterTuple=function(){};f.QInAFilterTuple.prototype=new f.QInAComponentWithStructure();f.QInAFilterTuple.prototype._ff_c="QInAFilterTuple";f.QInAFilterTuple.prototype.getComponentType=function(){return f.FilterComponentType.TUPLE;};f.QInAFilterTuple.prototype.exportComponentWithStructure=function(e,m,i,a){var t=m;var b=f.PrFactory.createStructure();b.putString("Code","And");var c=b.putNewList("SubSelections");var d=c.addNewStructure();var g=d.putNewStructure("TuplesOperand");var h=g.putNewList("FieldNames");var k=t.getFieldNames();h.addAllStrings(k);var n=g.putNewList("Tuples");var o=t.getTuples();for(var l=0;l<o.size();l++){var s=o.get(l);var p=n.addNewList();for(var j=0;j<k.size();j++){p.addString(s.get(j));}}i.put("Operator",b);return i;};f.QInAFilterTuple.prototype.importComponentWithStructure=f.noSupport;f.QInAFilterVirtualDatasource=function(){};f.QInAFilterVirtualDatasource.prototype=new f.QInAComponentWithStructure();f.QInAFilterVirtualDatasource.prototype._ff_c="QInAFilterVirtualDatasource";f.QInAFilterVirtualDatasource.prototype.getComponentType=function(){return f.FilterComponentType.VIRTUAL_DATASOURCE;};f.QInAFilterVirtualDatasource.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;var b=f.PrFactory.createStructure();b.putString("Code","And");var c=b.putNewList("SubSelections");var s=this.createMemberOperand("SchemaName",v.getSchemaName());var p=this.createMemberOperand("PackageName",v.getPackageName());var o=this.createMemberOperand("ObjectName",v.getObjectName());c.add(s);c.add(p);c.add(o);i.put("Operator",b);return i;};f.QInAFilterVirtualDatasource.prototype.createMemberOperand=function(l,v){var s=f.PrFactory.createStructure();s.putString("AttributeName",l);var c=f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL);s.putString("Comparison",c);s.putString("Value",v);var a=f.PrFactory.createStructure();a.put("MemberOperand",s);return a;};f.QInAFilterVirtualDatasource.prototype.importComponentWithStructure=f.noSupport;f.QInAFormulaMeasure=function(){};f.QInAFormulaMeasure.prototype=new f.QInAComponentWithStructure();f.QInAFormulaMeasure.prototype._ff_c="QInAFormulaMeasure";f.QInAFormulaMeasure.importNameAndText=function(i,m,d){var n=f.QInAMember.getNameForImport(i,d);var a=f.QInAMember.getText(i,d);if(f.XStringUtils.isNullOrEmpty(n)&&f.XStringUtils.isNullOrEmpty(a)){n=i.getStringByKey("Name");a=i.getStringByKey("Description");}m.setName(n);m.setText(a);};f.QInAFormulaMeasure.exportFormulaConstantValue=function(e,c,a){var v=a.getValue()===null;var b=a.getVariable();if(v&&f.isNull(b)){c.putNull("Value");}var d=a.getValueType();if(d===f.XValueType.INTEGER){c.putString("ValueType","Number");if(!v){c.putInteger("Value",a.getInteger());}}else if(d===f.XValueType.DOUBLE||d===f.XValueType.DECIMAL_FLOAT){c.putString("ValueType","Number");if(!v){c.putDouble("Value",a.getDouble());}}else if(d===f.XValueType.LONG){c.putString("ValueType","Number");if(!v){c.putLong("Value",a.getLong());}}else if(d===f.XValueType.STRING){c.putString("ValueType","String");if(e.mode===f.QModelFormat.INA_PERSISTED_QUERY_DATA&&a.getTagging().containsKey("PersistedQueryPlaceholder")){c.putString("Value",a.getTagging().getByKey("PersistedQueryPlaceholder"));}else if(!v){c.putString("Value",a.getString());}}else if(d===f.XValueType.BOOLEAN){c.putString("ValueType","Bool");if(!v){c.putBoolean("Value",a.getBoolean());}}else if(d===f.XValueType.DATE){c.putString("ValueType","Date");if(e.mode===f.QModelFormat.INA_PERSISTED_QUERY_DATA&&a.getTagging().containsKey("PersistedQueryPlaceholder")){c.putString("Value",a.getTagging().getByKey("PersistedQueryPlaceholder"));}else if(!v){c.putString("Value",a.getDate().toString());}}else if(d===f.XValueType.DATE_TIME){c.putString("ValueType",e.mode===f.QModelFormat.INA_DATA?"Date":"DateTime");if(!v){c.putString("Value",a.getDateTime().toString());}}else if(d.isSpatial()){c.putString("ValueType","String");if(!v){c.putString("Value",a.getGeometry().toWKT());}}else if(d===f.XValueType.TIMESPAN){c.putString("ValueType","String");if(!v){var t=a.getTimeSpan();c.putString("Value",t.toString());}}else if(d===f.XValueType.VARIABLE){f.QInAExportUtil.setNameIfNotNull(c,"Value",b);c.putString("ValueIs","Variable");}};f.QInAFormulaMeasure.importFormulaMeasure=function(i,d,a,b,c){if(f.isNull(a)){return null;}var e=a.getStructureByKey("Function");var g=b;if(f.notNull(e)){var h=e.getStringByKey("Name");var j=e.getListByKey("Parameters");var n=f.QFactory.createFormulaFunction(c);if(f.notNull(j)){n.setFunctionName(h);var p=j.size();for(var k=0;k<p;k++){f.QInAFormulaMeasure.importFormulaMeasure(i,d,j.getStructureAt(k),n,c);}}n.setSolveOrder(a.getIntegerByKeyExt("SolveOrder",0));if(f.isNull(g)){g=n;}else{g.add(n);n.setParent(g);}}else{var l=a.getStructureByKey("Constant");if(f.notNull(l)){var m=f.QFactory.createFormulaConstant(c);if(f.XString.isEqual("Variable",l.getStringByKey("ValueIs"))){var v=l.getStringByKey("Value");if(f.XStringUtils.isNotNullAndNotEmpty(v)){var o=d.getQueryModel().getVariableManager();m.setVariable(o.getVariables().getByKey(v));}if(f.isNull(g)){g=m;}else{g.add(m);m.setParent(g);}}else{var q=l.getStringByKey("ValueType");var r=!l.containsKey("Value")||l.getElementTypeByKey("Value")===f.PrElementType.THE_NULL;if(f.XString.isEqual(q,"Number")){if(r){m.setNullByType(f.XValueType.DOUBLE);}else{m.setDouble(l.getDoubleByKey("Value"));}}else if(f.XString.isEqual(q,"String")){if(r){m.setNullByType(f.XValueType.STRING);}else{m.setString(l.getStringByKey("Value"));}}else if(f.XString.isEqual(q,"Bool")){if(r){m.setNullByType(f.XValueType.BOOLEAN);}else{m.setBoolean(l.getBooleanByKey("Value"));}}else if(f.XString.isEqual(q,"DateTime")){if(r){m.setNullByType(f.XValueType.DATE_TIME);}else{m.setDateTime(f.XDateTime.createDateTimeFromStringWithFlag(l.getStringByKey("Value"),false));}}else if(f.XString.isEqual(q,"Date")){if(r){m.setNullByType(f.XValueType.DATE);}else{m.setDate(f.XDate.createDateFromStringWithFlag(l.getStringByKey("Value"),false));}}else{i.addError(f.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null;}var s=l.getStringByKey("Unit");if(f.XStringUtils.isNotNullAndNotEmpty(s)){m.setUnit(s);}var t=l.getStringByKey("Currency");if(f.XStringUtils.isNotNullAndNotEmpty(t)){m.setCurrency(t);}if(f.isNull(g)){g=m;}else{g.add(m);m.setParent(g);}}}else{var u=a.getStructureByKey("Member");if(f.notNull(u)){var w=f.QFactory.createFormulaMember(c);var x=u.getStringByKey("Name");w.setMemberName(x);w.setDimensionName(u.getStringByKey("Dimension"));var y=u.getStringByKey("NameIs");if(f.XString.isEqual(y,"Booked")){w.setBooked();}else if(f.XString.isEqual(y,"Previous")){w.setPrevious();}if(f.isNull(g)){g=w;}else{g.add(w);w.setParent(g);}}else{var z=a.getStructureByKey("AttributeValue");if(f.notNull(z)){var A=z.getStringByKey("Name");var B=f.QFactory.createFormulaAttributeWithName(c,A);if(f.isNull(g)){g=B;}else{g.add(B);B.setParent(g);}}}}}return g;};f.QInAFormulaMeasure.exportFormulaItem=function(e,a,i,c){f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,a,i,c,false,false,null);};f.QInAFormulaMeasure.signFlipMember=function(a){var c=a.getContext();var o=f.QFactory.createFormulaOperation(c);o.setOperator(f.MathOperator.MULT);o.setLeftSide(f.QFactory.createFormulaConstantWithIntValue(c,-1));o.setRightSide(a);return o;};f.QInAFormulaMeasure.exportMemberWithSignFlip=function(e,a,c,b){var q=c.getQueryModel();if(f.notNull(q)&&e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var m=f.PrFactory.createStructure();if(q.getSystemType().isTypeOf(f.SystemType.BW)){var d=q.getMeasureDimension();var g=d.getStructureMember(a.getMemberName());if(f.notNull(g)){var h=null;var i;if(g.getComponentType()===f.MemberType.BASIC_MEASURE){i=g.getQueryDataCells();if(f.XCollectionUtils.hasElements(i)){h=i.get(0);}}else if(g.getComponentType()===f.MemberType.RESTRICTED_MEASURE){var j=f.QInAMemberRestrictedMeasure.getMemberForSignFlip(c,g);if(f.notNull(j)){var r=d.getStructureMember(j);if(f.notNull(r)){i=r.getQueryDataCells();if(f.XCollectionUtils.hasElements(i)){h=i.get(0);}}}}if(f.notNull(h)&&h.hasSignReversal()){f.QInAFormulaMeasure.exportFormulaItem(e,f.QInAFormulaMeasure.signFlipMember(a),m,c);return m;}}}else{var k=q.getAccountDimension();if(f.notNull(k)){var l=k.getStructureMemberByAliasOrMember(a.getMemberName());if(f.notNull(l)&&l.getComponentType()!==f.MemberType.RESTRICTED_MEASURE&&b){return null;}if(f.notNull(l)&&l.getComponentType()===f.MemberType.RESTRICTED_MEASURE){if(l.isModelDefinedMember()&&b){return null;}l=k.getStructureMemberByAliasOrMember(f.QInAMemberRestrictedMeasure.getMemberForSignFlip(c,l));}if(f.notNull(l)){var n=l.getAccountType();if(n===f.AccountType.INC||n===f.AccountType.LEQ){f.QInAFormulaMeasure.exportFormulaItem(e,f.QInAFormulaMeasure.signFlipMember(a),m,c);return m;}}}}}return null;};f.QInAFormulaMeasure.exportFormulaMeasure=function(e,a,i){f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,a.getFormula(),i,a.getQueryModel(),a.isAutoSignFlip(),a.isAutoSignFlipRestrictedMeasureOnly(),a.getName());};f.QInAFormulaMeasure.exportFormulaItemSignFlip=function(e,a,b,c,d,g,s){if(f.notNull(a)){var h=a.getComponentType();if(h===f.OlapComponentType.FORMULA_CONSTANT){var j=a;var k=b.putNewStructure("Constant");var l=j.getUnit();if(f.XStringUtils.isNotNullAndNotEmpty(l)){k.putString("Unit",l);}var m=j.getCurrency();if(f.XStringUtils.isNotNullAndNotEmpty(m)){k.putString("Currency",m);}f.QInAFormulaMeasure.exportFormulaConstantValue(e,k,j);}else if(h===f.OlapComponentType.FORMULA_OPERATION){var n=a;var o=b.putNewStructure("Function");o.putString("Name",n.getOperator().getDisplayString());var p=o.putNewList("Parameters");f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,n.getLeftSide(),p.addNewStructure(),c,d,g,s);f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,n.getRightSide(),p.addNewStructure(),c,d,g,s);}else if(h===f.OlapComponentType.FORMULA_FUNCTION){var q=a;var r=b.putNewStructure("Function");r.putString("Name",q.getFunctionName());var t=r.putNewList("Parameters");var u=q.size();for(var i=0;i<u;i++){f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,q.get(i),t.addNewStructure(),c,d,g,s);}var v=q.getSolveOrder();if(v!==0){b.putInteger("SolveOrder",v);}}else if(h===f.OlapComponentType.FORMULA_ITEM_MEMBER){var w=a;var x=c.getQueryModel();var y=w.getVariable();var z;if(f.isNull(y)){z=f.PrFactory.createStructure();var A;if(e.mode===f.QModelFormat.INA_PERSISTED_QUERY_DATA&&w.getTagging().containsKey("PersistedQueryPlaceholder")){A=w.getTagging().getByKey("PersistedQueryPlaceholder");}else{A=f.QInAExportUtil.getMeasureMemberNameByAlias(x,w.getMemberName(),e);}z.putStringNotNull("Name",A);z.putStringNotNull("Dimension",w.getDimensionName());if(w.isBooked()){z.putString("NameIs","Booked");z.putStringNotNull("Name",s);}else if(w.isPrevious()){z.putString("NameIs","Previous");z.putStringNotNull("Name",s);}if(d){var B=f.QInAFormulaMeasure.exportMemberWithSignFlip(e,w,c,g);if(f.notNull(B)){b.put("Function",B.getByKey("Function"));}else{b.put("Member",z);}}else{b.put("Member",z);}}else{z=b.putNewStructure("Member");z.putString("Name",y.getName());z.putString("NameIs","Variable");}}else if(h===f.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){var C=a;var D=b.putNewStructure("AttributeValue");D.putString("Name",C.getFieldName());}}};f.QInAFormulaMeasure.prototype.getComponentType=function(){return f.MemberType.FORMULA;};f.QInAGenericComponent=function(){};f.QInAGenericComponent.prototype=new f.QInAComponentWithStructure();f.QInAGenericComponent.prototype._ff_c="QInAGenericComponent";f.QInAGenericComponent.prototype.getComponentType=function(){return f.OlapComponentType.OLAP;};f.QInAGenericComponent.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QInAGenericComponent.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("Type",m.getComponentType().getName());return i;};f.QInAHierarchy=function(){};f.QInAHierarchy.prototype=new f.QInAComponentWithStructure();f.QInAHierarchy.prototype._ff_c="QInAHierarchy";f.QInAHierarchy.isMetadataWithAutoSubmitCapability=function(i,q){return i.getOriginalMode()===f.QModelFormat.INA_METADATA||i.getMode()===f.QModelFormat.INA_METADATA&&f.notNull(q)&&q.getModelCapabilities().supportsAutoVariableSubmit()&&q.getVariableProcessorState()===f.VariableProcessorState.CHANGEABLE_STARTUP;};f.QInAHierarchy.importHierarchyName=function(i,a,d,b){var h;if(a.hasStringByKey("Name")){h=a.getStringByKey("Name");}else{h=a.getStringByKey("HierarchyName");}d.setUseHierarchyNameVariable(b);var c=b&&f.QInAHierarchy.isMetadataWithAutoSubmitCapability(i,d.getQueryManager());if(c){d.setHierarchyNameVariableName(h);}return h;};f.QInAHierarchy.importHierarchyDueDate=function(i,d,h,s){var a=i.getStringByKey("DueDateIs");var b=f.notNull(a)&&f.XString.isEqual("Variable",a);var c=i.getStringByKey("DueDate");d.setUseHierarchyDueDateVariable(b);if(b){d.setHierarchyDueDateVariableName(f.XStringUtils.isNullOrEmpty(c)?null:c);}else if(f.notNull(h)){h.setHierarchyDueDate(f.XDate.createDateFromStringWithFlag(c,s));}};f.QInAHierarchy.importHierarchyVersion=function(i,d,h){var v=i.getStringByKey("VersionIs");var a=f.notNull(v)&&f.XString.isEqual("Variable",v);var b=i.getStringByKey("Version");d.setUseHierarchyVersionVariable(a);if(a){d.setHierarchyVersionVariableName(f.XStringUtils.isNullOrEmpty(b)?null:b);}else if(f.notNull(h)){h.setHierarchyVersion(b);}};f.QInAHierarchy.importHierarchyDrillInfo=function(i,a,d,c){var b=a.getIntegerByKeyExt("InitialDrillOffset",0);var e=a.getIntegerByKeyExt("InitialDrillLevel",0);var m=d.getModelCapabilities();if(m.supportsVisibilityFilter()||!i.mode.isTypeOf(f.QModelFormat.INA_DATA)){d.setInitialDrillLevel(e);d.setSelectorInitialDrillLevel(e);}else{if(e===-1){d.setInitialDrillLevel(e);d.setSelectorInitialDrillLevel(e);}else if(b===-1){d.setInitialDrillLevel(0);d.setSelectorInitialDrillLevel(0);}else{d.setInitialDrillLevel(e+b);d.setSelectorInitialDrillLevel(e+b);}}d.setInitialDrillOffset(b);d.setExplicitDrillOnFilteredNodes(a.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var g=f.Alignment.DEFAULT_VALUE;if(c.getModelCapabilities().supportsExpandBottomUp()){var n=a.getStringByKeyExt("LowerLevelNodeAlignment","Default");g=f.QInAConverter.lookupLowerLevelNodeAlignment(n);if(a.containsKey("ExpandBottomUp")){var h=a.getBooleanByKeyExt("ExpandBottomUp",false);if(h){g=f.Alignment.CHILDREN_ABOVE_PARENT;}}}d.setLowerLevelNodeAlignment(g);var j=a.getBooleanByKeyExt("NodeCondensation",false);d.setHasNodeCondensation(j);var k=a.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var v=f.QInAConverter.lookupResultSetVisibility(k);d.setMemberOfPostedNodeVisibility(v);};f.QInAHierarchy.appendItemsToCatalogResult=function(c,h,d){var l=f.PrUtils.getListSize(h,0);for(var i=0;i<l;i++){var a=f.PrUtils.getStructureElement(h,i);var b=f.HierarchyCatalogItem.createCatalogItem();b.setDimensionName(d);var e;if(a.hasStringByKey("Name")){e=a.getStringByKey("Name");}else{e=a.getStringByKey("HierarchyName");}if(f.XStringUtils.isNullOrEmpty(e)||c.containsHierarchy(e)){continue;}b.setHierarchyName(e);var g=f.PrUtils.getStringProperty(a,"Description");if(f.notNull(g)){b.setHierarchyLongText(g.getString());}var v=f.PrUtils.getStringProperty(a,"Version");if(f.notNull(v)){b.setVersionName(v.getString());}var s=f.PrUtils.getStringProperty(a,"Structure");if(f.notNull(s)){b.setHierarchyType(f.HierarchyType.lookup(s.getString()));}var j=f.PrUtils.getBooleanValueProperty(a,"IsModeled",false);b.setIsModeled(j);var k=f.PrUtils.getStringProperty(a,"DateTo");if(f.notNull(k)){var m=k.getString();if(f.XStringUtils.isNotNullAndNotEmpty(m)){b.setDateTo(f.XDate.createDateFromIsoFormat(m));}}var n=f.PrUtils.getListProperty(a,"Levels");if(f.notNull(n)){b.setSupportsHierarchyLevels(true);var o=f.XList.create();var p=f.PrUtils.getListSize(n,0);for(var q=0;q<p;q++){var r=f.PrUtils.getStructureElement(n,q);if(f.isNull(r)){continue;}var t=f.HierarchyCatalogLevel.createCatalogLevel();var u=f.PrUtils.getIntegerValueProperty(r,"Level",-1);if(u>-1){t.setLevel(u);}var w=f.PrUtils.getStringProperty(r,"LevelName");if(f.notNull(w)){t.setLevelName(w.getString());}var x=f.PrUtils.getStringProperty(r,"LevelCaption");if(f.notNull(x)){t.setLevelDescription(x.getString());}var y=f.PrUtils.getStringProperty(r,"LevelUniqueName");if(f.notNull(y)){t.setLevelUniqueName(y.getString());}var z=f.PrUtils.getStringProperty(r,"DimensionName");if(f.notNull(z)){t.setLevelDimensionName(z.getString());}var A=f.PrUtils.getIntegerProperty(r,"LevelType");if(f.notNull(A)){t.setLevelType(f.QInAConverter.lookupHierarchyLevelType(A.getInteger()));}o.add(t);}b.setHierarchyLevels(o);}var B=a.getStringByKey("RestNode");if(f.notNull(B)){b.setRestNode(B);}var C=a.getStringByKey("VirtualRootNode");if(f.notNull(C)){b.setVirtualRootNode(C);}c.addItem(b);}return c;};f.QInAHierarchy.isNamePlaceHolderForAutoSubmit=function(d,e){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&e===f.QModelFormat.INA_DATA&&d.useHierarchyNameVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyNameVariableName());}return i;};f.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit=function(d,e){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&e===f.QModelFormat.INA_DATA&&d.useHierarchyDueDateVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyDueDateVariableName());}return i;};f.QInAHierarchy.isVersionPlaceHolderForAutoSubmit=function(d,e){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&e===f.QModelFormat.INA_DATA&&d.useHierarchyVersionVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyVersionVariableName());}return i;};f.QInAHierarchy.exportHierarchyForFilter=function(e,i,a,d,b,q,c,h,g,v){var j=h;var k=d;if(f.notNull(j)){var l=a.putNewStructure("Hierarchy");if(f.isNull(k)&&f.notNull(q)&&q.isAutoVariableSubmitActive()){k=f.QInAHierarchy.getHierarchyDimension(q,c);var m=f.QInAHierarchy.isNamePlaceHolderForAutoSubmit(k,e.getMode());if(m&&f.notNull(k)){j=k.getHierarchyNameVariableName();l.putString("NameIs","Variable");}}l.putString("Name",j);if(e.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&i){if(f.isNull(b)||!f.XString.isEqual(b.getName(),f.QFilter.FIXED_FILTER_CONTAINER)||f.notNull(q)&&q.isAutoVariableSubmitActive()){var n=f.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(k,e.mode);if(n&&f.notNull(k)){l.putString("DueDate",k.getHierarchyDueDateVariableName());l.putString("DueDateIs","Variable");}else{f.QInAExportUtil.setDate(e,l,"DueDate",g);}var o=f.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(k,e.mode);if(o&&f.notNull(k)){l.putString("Version",k.getHierarchyVersionVariableName());l.putString("VersionIs","Variable");}else{l.putStringNotNull("Version",v);}}}}};f.QInAHierarchy.getHierarchyDimension=function(q,a){var h=null;if(f.notNull(q)){var d=q.getDimensionMemberVariables();for(var i=0;i<d.size();i++){var v=d.get(i);var b=v.getVariableType()===f.VariableType.HIERARCHY_NAME_VARIABLE;h=b?v.getHierarchyNameDimension():v.getDimension();if(f.notNull(h)&&h.getFieldByName(a)!==null&&(v.isUsedInDynamicFilter()||v.isUsedInFixedFilter())){break;}}}return h;};f.QInAHierarchy.prototype.getComponentType=function(){return f.OlapComponentType.HIERARCHY;};f.QInAHierarchy.prototype.getTagName=function(){return"Hierarchy";};f.QInAHierarchy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;if(d.supportsHierarchy()){var b=d.isDisplayHierarchyFixInFilter();var h=d.getHierarchyManagerBase();h.setDisplayHierarchyFixInFilter(false);if(f.isNull(a)){d.setHierarchy(null);}else{var n=a.getStringByKey("NameIs");var e=f.notNull(n)&&f.XString.isEqual("Variable",n);var q=d.getQueryManager();var g=e&&f.QInAHierarchy.isMetadataWithAutoSubmitCapability(i,q);var j=f.QInAHierarchy.importHierarchyName(i,a,d,e);var k=null;if(f.XStringUtils.isNotNullAndNotEmpty(j)){if(!g&&d.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(a,d);this.importLeveledHierarchyToMetadata(i,a,c,d);}if(a.getBooleanByKey("IsTransient")){k=f.QHierarchy.createCustomHierarchy(d.getContext(),d,j,a.getStringByKey("Description"));}else if(!g){if(f.notNull(q)&&q.isAutoVariableSubmitActive()&&d.getHierarchy()!==null&&f.XString.isEqual(d.getHierarchy().getName(),j)){k=d.getHierarchy();}else{k=f.QHierarchy.create(d.getContext(),d,j);}}f.QInAHierarchy.importHierarchyDueDate(a,d,k,i.capabilities.supportsSapDate());f.QInAHierarchy.importHierarchyVersion(a,d,k);if(!g){var l=a.getStringByKey("DateTo");k.setDateTo(f.XDate.createDateFromStringWithFlag(l,i.capabilities.supportsSapDate()));var o=a.getStringByKey("0DATEFROM");k.setDateFrom(f.XDate.createDateFromStringWithFlag(o,i.capabilities.supportsSapDate()));var r=a.getStructureByKey("Metadata");if(f.notNull(r)){l=r.getStringByKey("DateTo");if(f.XStringUtils.isNotNullAndNotEmpty(l)){k.setDateTo(f.XDate.createDateFromStringWithFlag(l,i.capabilities.supportsSapDate()));}o=r.getStringByKey("0DATEFROM");if(f.XStringUtils.isNotNullAndNotEmpty(o)){k.setDateFrom(f.XDate.createDateFromStringWithFlag(o,i.capabilities.supportsSapDate()));}}d.setHierarchy(k);var s=a.getBooleanByKeyExt("HierarchyActive",true);d.setHierarchyActive(s);d.setSelectorHierarchyActive(s);}}var t=a.getListByKey("StickyDimensionMembers");d.clearStickyMembers();if(f.XCollectionUtils.hasElements(t)){for(var u=0;u<t.size();u++){d.addStickyMember(t.getStringAt(u));}}f.QInAHierarchy.importHierarchyDrillInfo(i,a,d,c);h.setDisplayHierarchyFixInFilter(b);return k;}h.setDisplayHierarchyFixInFilter(b);}return null;};f.QInAHierarchy.prototype.importHierarchyAsCatalogItem=function(i,d){var h=f.PrFactory.createList();h.add(i);var a=d.getHierarchies();if(f.isNull(a)){a=f.QFactory.createHierarchyCatalogResult();f.QInAHierarchy.appendItemsToCatalogResult(a,h,d.getName());d.getHierarchyManagerBase().setHierarchies(a);}else{f.QInAHierarchy.appendItemsToCatalogResult(a,h,d.getName());}};f.QInAHierarchy.prototype.importLeveledHierarchyToMetadata=function(i,a,c,d){var q=d.getQueryModelBase().getQueryManagerBase();if(f.notNull(q)&&!f.PrUtils.isListEmpty(a.getListByKey("Levels"))){var m=q.getMetadataModelBase();var b=m.getLeveledHierarchiesBase();var l=f.QInAMdHierarchy.importLeveledHierarchy(i,c,d,a);if(!b.contains(l)){b.add(l);}}};f.QInAHierarchy.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var o=e.getSession().hasFeature(f.FeatureToggleOlap.OPTIMIZE_HIERARCHY_EXPORT)&&e.mode.isTypeOf(f.QModelFormat.INA_DATA);if(d.supportsHierarchy()){var b=d.isHierarchyActive();var c=!b&&e.mode.isTypeOf(f.QModelFormat.INA_DATA);var g=e.isAbap(d.getQueryModel());var h=this.getHierarchyName(d,g,e.mode);var j=f.QInAHierarchy.isNamePlaceHolderForAutoSubmit(d,e.mode);var k=f.QInAHierarchy.isDueDatePlaceHolderForAutoSubmit(d,e.mode);var l=f.QInAHierarchy.isVersionPlaceHolderForAutoSubmit(d,e.mode);if(j){h=d.getHierarchyNameVariableName();}if(f.XStringUtils.isNotNullAndNotEmpty(h)&&(!c||j||k||l)){if(!o){f.QInAExportUtil.setNonEmptyString(i,"HierarchyName",h);i.putBoolean("HierarchyActive",b);}f.QInAExportUtil.setNonEmptyString(i,"Name",h);if(j){i.putString("NameIs","Variable");}if(d.useHierarchyDueDateVariable()||k){i.putString("DueDateIs","Variable");i.putString("DueDate",d.getHierarchyDueDateVariableName());}else{f.QInAExportUtil.setDate(e,i,"DueDate",d.getHierarchyDueDate());}if(l){i.putString("VersionIs","Variable");i.putString("Version",d.getHierarchyVersionVariableName());}else{f.QInAExportUtil.setNonEmptyString(i,"Version",d.getHierarchyVersion());}var q=d.getQueryManager();if(f.notNull(q)&&q.isAutoVariableSubmitActive()&&d.useDefaultDrillLevelOnChange()){i.putBoolean("UseDefaultDrillLevelOnChange",true);}var n=0;if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA)||!d.hasZoomDrill()){if(d.getModelCapabilities().supportsVisibilityFilter()||!e.mode.isTypeOf(f.QModelFormat.INA_DATA)){n=d.getInitialDrillLevel();}else{var p=d.getInitialDrillOffset();var r=d.getInitialDrillLevel();if(p===-1&&r>-1){n=0;}else if(r>=p){n=d.getInitialDrillLevel()-f.XMath.max(0,p);}else{n=r;}}}if(g||n!==0||!o){i.putInteger("InitialDrillLevel",n);}if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA)){if(d.getInitialDrillOffset()!==0||i.containsKey("InitialDrillOffset")){i.putInteger("InitialDrillOffset",d.getInitialDrillOffset());}if(d.isExplicitDrillOnFilteredNodes()||i.containsKey("ExplicitDrillOnFilteredNodes")){i.putBoolean("ExplicitDrillOnFilteredNodes",d.isExplicitDrillOnFilteredNodes());}if(d.hasStickyMembers()){i.putNewList("StickyDimensionMembers").addAllStrings(d.getStickyMembers());}}var s=d.getLowerLevelNodeAlignment();if(d.getModelCapabilities().supportsExpandBottomUp()){if(o){if(s===f.Alignment.CHILDREN_ABOVE_PARENT){i.putBoolean("ExpandBottomUp",true);}}else{i.putBoolean("ExpandBottomUp",s===f.Alignment.CHILDREN_ABOVE_PARENT);}}if(g){var t;var u=d.getModelCapabilities();if(f.notNull(u)&&u.supportsExpandBottomUp()){t=f.QInAConverter.lookupLowerLevelNodeAlignmentInA(s);}else{t=f.QInAConverter.lookupLowerLevelNodeAlignmentInA2(s);}i.putString("LowerLevelNodeAlignment",t);var v=d.hasNodeCondensation();i.putBoolean("NodeCondensation",v);var w=d.getMemberOfPostedNodeVisibility();var x=f.QInAConverter.lookupResultSetVisibilityInA(w);i.putString("MemberOfPostedNodeVisibility",x);}if(d.isHierarchyNavigationDeltaMode()){i.putBoolean("HierarchyNavigationDeltaMode",true);}if(!o){this.exportHierarchyLevels(i,d,h);}var y=d.getHierarchy();if(!j&&f.notNull(y)&&y.isCustomHierarchy()){i.putBoolean("IsTransient",true);i.putStringNotNull("Description",y.getHierarchyDescription());}return i;}}return null;};f.QInAHierarchy.prototype.getHierarchyName=function(d,i,e){if(i&&d.getAxisType()===f.AxisType.FREE&&(d.isHierarchyActive()||f.QInAHierarchy.isNamePlaceHolderForAutoSubmit(d,e))){var a=d.getQueryModel().getFilter().getEffectiveFilter();var h=this.getHierarchyFromFilter(a.getFilterRootElement(),d.getName());if(f.notNull(h)){return h;}}return d.getHierarchyName();};f.QInAHierarchy.prototype.getHierarchyFromFilter=function(a,d){if(f.notNull(a)){var c=a.getComponentType();if(c.isTypeOf(f.FilterComponentType.OPERATION)){var b=a;if(f.XString.isEqual(b.getDimensionName(),d)&&f.XStringUtils.isNotNullAndNotEmpty(b.getHierarchyName())){return b.getHierarchyName();}}else if(c.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)){var e=a;for(var i=0;i<e.size();i++){var h=this.getHierarchyFromFilter(e.get(i),d);if(f.notNull(h)){return h;}}}}return null;};f.QInAHierarchy.prototype.exportHierarchyLevels=function(i,d,h){if(d.getModelCapabilities().supportsDimensionHierarchyLevels()){var a=d.getHierarchies();if(f.notNull(a)){var b=a.getObjectsIterator();while(b.hasNext()){var c=b.next();if(f.XString.isEqual(c.getHierarchyName(),h)){f.QInAMdHierarchy.exportLevels(i,c);return;}}}}};f.QInAMember=function(){};f.QInAMember.prototype=new f.QInAComponentWithStructure();f.QInAMember.prototype._ff_c="QInAMember";f.QInAMember.getNameForImport=function(i,d){var m=i.getStringByKey("Name");if(f.isNull(m)&&f.notNull(d)){m=f.QInAMember.getValueByFieldName(i,d.getFlatKeyField(),d.getHierarchyKeyField());}return m;};f.QInAMember.getText=function(i,d){var m=i.getStringByKey("Description");if(f.isNull(m)&&f.notNull(d)){m=f.QInAMember.getValueByFieldName(i,d.getFlatTextField(),d.getHierarchyTextField());}return m;};f.QInAMember.getValueByFieldName=function(i,a,h){var v=null;if(f.notNull(a)){v=i.getStringByKey(a.getName());}if(f.isNull(v)&&f.notNull(h)){v=i.getStringByKey(h.getName());}return v;};f.QInAMember.exportText=function(e,i,m){var t=m.getText();var a=e.isAbap(m);if(a||f.notNull(t)){i.putString("Description",t);}};f.QInAMember.importMeasure=function(i,a,c,q,d){var n;n=f.QInAMember.determineMemberType(i,a,d);if(a.containsKey("MemberType")&&f.isNull(n)){return null;}var m;if(n===f.MemberType.RESTRICTED_MEASURE){m=i.importRestrictedMeasure(a,d,c);}else if(n===f.MemberType.FORMULA){m=i.importFormulaMeasure(a,d,q);}else if(n===f.MemberType.MEASURE){m=i.importBasicMeasure(a,d,c);}else if(n===f.MemberType.VARIANCE){m=i.importVarianceMeasure(a,d,c);}else if(n===f.MemberType.EXCEPTION_AGGREGATION){m=i.importExceptionAggregationMeasure(a,d,c);}else if(n===f.MemberType.CURRENCY_MEASURE){m=i.importCurrencyMeasure(a,d,c);}else{m=null;}return m;};f.QInAMember.determineMemberType=function(i,a,d){var n;var b=f.QInAMember.getNameForImport(a,d);if(a.containsKey("MemberType")){var c=a.getStringByKeyExt("MemberType","Measure");n=f.QInAConverter.lookupMeasureStructureMemberType(c);if(f.isNull(n)){i.addError(f.ErrorCodes.INVALID_STATE,f.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",c,"'"));return null;}}else if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()&&f.notNull(b)){if(d.getDimensionType()===f.DimensionType.ACCOUNT){n=f.MemberType.MEASURE;}else{n=d.getStructureMember(b).getMemberType();if(n===f.MemberType.BASIC_MEASURE){n=f.MemberType.MEASURE;}}}else{if(a.containsKey("Formula")){n=f.MemberType.FORMULA;}else{var e=a.getStructureByKey("Selection");if(f.isNull(e)){n=f.MemberType.MEASURE;}else{n=e.containsKey("Operator")?f.MemberType.RESTRICTED_MEASURE:f.MemberType.MEASURE;}}}return n;};f.QInAMember.exportCustomMember=function(e,m,i){var c=m.getComponentType();if(c===f.MemberType.FORMULA||c===f.MemberType.VARIANCE){e.exportFormulaMeasure(m,i);}else if(c===f.MemberType.RESTRICTED_MEASURE){e.exportRestrictedMeasure(m,i);}else if(c===f.MemberType.EXCEPTION_AGGREGATION){e.exportExceptionAggregationMeasure(m,i);}else if(c===f.MemberType.CURRENCY_MEASURE){e.exportCurrencyMeasure(m,i);}};f.QInAMember.importGenericMemberProperties=function(i,m,a){if(!i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||m.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!m.isCreatedFromMetadata()){if(a.containsKey("NumericShift")){m.setNumericShift(a.getIntegerByKey("NumericShift"));}if(a.containsKey("NumericScale")){m.setNumericScale(a.getIntegerByKey("NumericScale"));}if(a.containsKey("NumericPrecision")){m.setNumericPrecision(a.getIntegerByKey("NumericPrecision"));}}if(m.getModelCapabilities().supportsMemberVisibility()){var b=a.getStringByKeyExt("Visibility","Visible");m.setResultVisibility(f.QInAConverter.lookupResultSetVisibility(b));}var c=a.getStringByKey("PostAggregation");var p=f.QInAConverter.lookupAggregationType(c);m.setPostAggregationType(p);if(a.containsKey("PostAggregationIgnoreHierarchy")){m.setPostAggregationIgnoreHierarchy(true);}m.clearPostAggregationDimensions();var d=a.getListByKey("PostAggregationDimensions");if(f.notNull(d)){var e=d.size();for(var g=0;g<e;g++){m.addPostAggregationDimensionName(d.getStringAt(g));}}f.QInAMember.importWindowFunction(m,a);f.QInAMember.importCurrencyTranslation(m,a);};f.QInAMember.importGenericRuntimeMemberProperties=function(i,m,a){if(!i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||m.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!m.isCreatedFromMetadata()){var b=a.getBooleanByKeyExt("ModelDefinedMember",false);var p=b&&m.getQueryManager().getInitSettings().getProviderType()===f.ProviderType.LIST_REPORTING;if(!p){f.QInAMember.importAggregationType(m,a,true);}}f.QInAMember.importGenericMemberProperties(i,m,a);if(a.containsKey("DataType")){m.setDataType(f.QInAConverter.lookupValueType(a.getStringByKey("DataType")));}f.QInAMember.importIgnoredExternalDimensions(i,m,a);f.QInAMember.importSolveOrder(m,a);f.QInAMember.importCurrencyTranslation(m,a);};f.QInAMember.importCurrencyTranslation=function(m,i){if(i.containsKey("CurrencyTranslationName")){m.setCurrencyTranslationName(i.getStringByKey("CurrencyTranslationName"));}};f.QInAMember.importSolveOrder=function(m,i){var s=i.getIntegerByKeyExt("SolveOrder",0);if(s!==0){m.setSolveOrder(s);}};f.QInAMember.importIgnoredExternalDimensions=function(i,m,a){if(i.capabilities.supportsIgnoreExternalDimensions()){if(a.hasStringByKey("IgnoreExternalDimensions")){var b=a.getStringByKey("IgnoreExternalDimensions");if(f.XString.isEqual(b,"All")){m.setIgnoreAllExternalDimensions(true);}}else if(a.containsKey("IgnoreExternalDimensions")){var c=a.getListByKey("IgnoreExternalDimensions");var e=c.size();for(var d=0;d<e;d++){m.addExternalDimensionToIgnore(c.getStringAt(d));}}}};f.QInAMember.exportAggregationType=function(m,i){var b=m.getAggregationType();if(f.notNull(b)){i.putString("Aggregation",f.QInAConverter.lookupAggregationTypeInA(b));}};f.QInAMember.importAggregationType=function(m,i,o){var a=m.getAggregationType();if(o){m.setAggregationType(null);}var b=i.getStringByKey("Aggregation");if(f.XStringUtils.isNotNullAndNotEmpty(b)){m.setAggregationType(f.QInAConverter.lookupAggregationType(b));}else if(i.getBooleanByKeyExt("ModelDefinedMember",false)&&m.getDimension()!==null&&m.getDimension().getDimensionType()!==f.DimensionType.ACCOUNT){if(f.isNull(a)){m.setAggregationType(f.AggregationType.SUM);}else{m.setAggregationType(a);}}};f.QInAMember.exportGenericRuntimeMemberProperties=function(e,m,i){var q=m.getQueryModel();var a=!e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);var b=!m.isCreatedFromMetadata();if(a||q.isBasicMeasureAggregationExportedInRepo()||b){f.QInAMember.exportAggregationType(m,i);}if(a||q.isBasicMeasureSettingsExportedInRepo()||b){if(!e.capabilities.supportsDataCells()){f.QInAExportUtil.setIntegerIfNotNull(i,"NumericShift",m.getNumericShift());}if(!e.capabilities.supportsDataCells()||m.getModelCapabilities().supportsExtendedKeyFigureProperties()){var n=m.getNumericScale();if(f.notNull(n)&&n.getInteger()>=0){i.putInteger("NumericScale",n.getInteger());}var c=m.getNumericPrecision();if(f.notNull(c)&&c.getInteger()>=0){i.putInteger("NumericPrecision",c.getInteger());}}}if(e.capabilities.supportsCurrencyTranslation()){i.putStringNotNullAndNotEmpty("CurrencyTranslationName",m.getMappedCurrencyTranslationNameForInAData());}if(e.capabilities.supportsMemberVisibility()){var r=m.getResultVisibility();if(f.isNull(r)){r=f.ResultVisibility.VISIBLE;}i.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(r));}var p=m.getPresentationSignReversal();if(i.getByKey("PresentationSignReversal")===null&&f.notNull(p)){i.putBoolean("PresentationSignReversal",p.getBoolean());}if(a||q.isBasicMeasureSettingsExportedInRepo()||b){i.putStringNotNullAndNotEmpty("UnitType",f.QInAConverter.lookupUnitTypeInA(m.getUnitType()));i.putStringNotNull("UnitFixed",m.getUnitFixed());}if(!e.getMode().isTypeOf(f.QModelFormat.INA_DATA_BLENDING_SOURCE)){i.putStringNotNull("UnitName",m.getUnitName());i.putStringNotNull("UnitTextName",m.getUnitTextName());i.putStringNotNull("DataType",f.QInAConverter.lookupValueTypeInA(m.getDataType()));}f.QInAMember.exportPostAggregation(m,i);f.QInAMember.exportIgnoreExternalDimensions(e,m,i);f.QInAMember.exportExceptionAggregation(m,i);f.QInAMember.exportWindowFunction(m,i);var s=m.getSolveOrder();if(s!==0){i.putInteger("SolveOrder",s);}};f.QInAMember.exportIgnoreExternalDimensions=function(e,m,i){if(e.capabilities.supportsIgnoreExternalDimensions()){if(m.isIgnoringAllExternalDimensions()){i.putString("IgnoreExternalDimensions","All");}else{var a=f.XListOfString.create();if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)&&m.getMemberType()===f.MemberType.RESTRICTED_MEASURE){var r=m;a.addAll(r.getTransientIgnoredExternalDimensions());}a.addAll(m.getIgnoredExternalDimensions());if(a.hasElements()){var b=i.putNewList("IgnoreExternalDimensions");b.addAllStrings(a);}}}};f.QInAMember.exportPostAggregation=function(m,i){var p=m.getPostAggregationType();if(f.notNull(p)){i.putString("PostAggregation",f.QInAConverter.lookupAggregationTypeInA(p));}if(m.isPostAggregationIgnoringHierarchy()){i.putBoolean("PostAggregationIgnoreHierarchy",true);}var a=m.getPostAggregationDimensions();if(a.hasElements()){var b=i.putNewList("PostAggregationDimensions");var c=a.getIterator();while(c.hasNext()){b.add(f.PrFactory.createString(c.next()));}}};f.QInAMember.exportExceptionAggregation=function(m,i){var e=m.getExceptionAggregationType();if(f.notNull(e)){i.putString("ExceptionAggregation",e.getName());}var a=m.getExceptionAggregationDimensions();if(f.notNull(a)&&a.hasElements()){var b=i.putNewList("ExceptionAggregationDimensions");b.addAllStrings(a);}};f.QInAMember.exportWindowFunction=function(m,i){var w=m.getWindowFunction();if(f.notNull(w)){var a=i.putNewStructure("WindowFunction");a.putString("Name",f.QInAConverter.lookupWindowFunctionTypeInA(w.getType()));var d=w.getNotInPartitionDimensions();var b=a.putNewList("DimensionsNotInPartition");b.addAllStrings(d);var c=a.putNewList("SortDimensions");var s=w.getSortDimensions().getIterator();while(s.hasNext()){var e=s.next();var g=c.addNewStructure();g.putString("Name",e.getName());var h=e.getDirection();if(h===f.XSortDirection.ASCENDING||h===f.XSortDirection.DESCENDING){g.putString("Direction",f.QInAConverter.lookupSortDirectionInA2(h));}var n=e.getNulls();if(f.notNull(n)&&n!==f.NullsType.NONE){g.putString("Nulls",f.QInAConverter.lookupNullsTypeInA(n));}}var j=w.getFrame();if(f.notNull(j)){var k=a.putNewStructure("Frame");k.putString("Start",f.QInAConverter.lookupFrameStartTypeInA(j.getStart()));k.putInteger("StartPreceding",j.getStartPreceding());k.putString("End",f.QInAConverter.lookupFrameEndTypeInA(j.getEnd()));k.putInteger("EndFollowing",j.getEndFollowing());}}};f.QInAMember.importWindowFunction=function(m,i){var a=i.getStructureByKey("WindowFunction");if(f.notNull(a)){var w=f.QWindowFunction._createWindowFunction(f.QInAConverter.lookupWindowFunctionType(a.getStringByKey("Name")));var b=a.getListByKey("DimensionsNotInPartition");if(f.notNull(b)){for(var c=0;c<b.size();c++){w.addNotInPartitionDimension(b.getStringAt(c));}}var d=a.getListByKey("SortDimensions");if(f.notNull(d)){for(var e=0;e<d.size();e++){var g=d.getStructureAt(e);var n=g.getStringByKey("Name");var h=f.QInAConverter.lookupSortDirection2(g.getStringByKey("Direction"));var j=f.QInAConverter.lookupNullsType(g.getStringByKey("Nulls"));w.addSortDimension(n,h,j);}}var k=a.getStructureByKey("Frame");if(f.notNull(k)){w.setFrame(f.QInAConverter.lookupFrameStartType(k.getStringByKey("Start")),k.getIntegerByKey("StartPreceding"),f.QInAConverter.lookupFrameEndType(k.getStringByKey("End")),k.getIntegerByKey("EndFollowing"));}m.setWindowFunction(w);}};f.QInAMember.prototype.getComponentType=function(){return f.MemberType.ABSTRACT_MEMBER;};f.QInAMember.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var d=p;if(f.isNull(d)){d=q.getMeasureDimension();}var b=f.QInAMember.importMeasure(i,a,c,q,d);if(f.notNull(b)){f.QInAMember.importGenericRuntimeMemberProperties(i,b,a);if(a.containsKey("PresentationSignReversal")){b.setPresentationSignReversal(a.getBooleanByKey("PresentationSignReversal"));}var e=a.getIntegerByKeyExt("[Measures].[Aggregation]",-1);var g=f.QInAConverter.lookupAggregationType2(e);if(f.notNull(g)){b.setAggregationType(g);}if((!i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||q.isBasicMeasureSettingsExportedInRepo()||!b.isCreatedFromMetadata())&&!f.XCollectionUtils.hasElements(a.getStructureByKey("[Measures].[MemberDetails]"))){this.setPrecisionAndScale(i,a,q,b);b.setUnitType(f.QInAConverter.lookupUnitType(a.getStringByKey("UnitType")));b.setUnitFixed(a.getStringByKey("UnitFixed"));b.setUnitName(a.getStringByKey("UnitName"));b.setUnitTextName(a.getStringByKey("UnitTextName"));}i.importExceptions(a,b);if(f.notNull(p)){var h=d.getModelCapabilities();if(f.notNull(h)&&h.supportsExceptionAggregationDimsFormulas()||i.capabilities.supportsExceptionAggregationDimsFormulas()){b.clearExceptionAggregationDimensions();}b.setExceptionAggregationType(null);this.importExceptionAggregationProperties(a,b);}this.importUniversalModelProperties(i,a,b);this.importInternalDataType(a,b);}return b;};f.QInAMember.prototype.importExceptionAggregationProperties=function(i,m){var a=i.getListByKey("ExceptionAggregationDimensions");if(f.notNull(a)){var e=a.size();for(var b=0;b<e;b++){m.addExceptionAggregationDimensionName(a.getStringAt(b));}}m.setExceptionAggregationType(f.AggregationType.lookupOrCreate(i.getStringByKey("ExceptionAggregation")));};f.QInAMember.prototype.importInternalDataType=function(m,a){if(a.getDataTypeInternal()===null&&m.containsKey("[Measures].[SQLType]")){var d=m.getStringByKey("[Measures].[SQLType]");if(f.XStringUtils.isNotNullAndNotEmpty(d)){if(f.XString.startsWith(d,f.XStringUtils.concatenate2("DECIMAL","("))){a.setDataTypeInternal(f.XValueType.DECIMAL_FLOAT);var p=f.XString.size("DECIMAL")+1;var b=f.XString.indexOf(d,",");var s=f.XString.size(d)-1;if(b>p&&b<s){var c=f.XString.substring(d,p,b);var e=f.XString.substring(d,b+1,s);a.setDataTypePrecision(f.XInteger.convertFromString(c));a.setDataTypeScale(f.XInteger.convertFromString(e));}}else if(f.XString.isEqual(d,"INTEGER")){a.setDataTypeInternal(f.XValueType.INTEGER);}}}};f.QInAMember.prototype.importUniversalModelProperties=function(i,a,m){var c=m.getModelCapabilities();if(f.notNull(c)&&c.supportsCustomMeasuresInMetadata()){var b=a.getStructureByKey("[Measures].[MemberDetails]");if(f.notNull(b)){var n=f.PrUtils.getIntegerProperty(b,"NumericShift");if(f.notNull(n)){m.setNumericShift(n.getInteger());}var d=f.PrUtils.getIntegerProperty(b,"NumericScale");if(f.notNull(d)){m.setNumericScale(d.getInteger());}var e=f.PrUtils.getIntegerProperty(b,"NumericPrecision");if(f.notNull(e)){m.setNumericPrecision(e.getInteger());}this.importExceptionAggregationProperties(b,m);if(b.hasElements()){m.setUnitType(f.QInAConverter.lookupUnitType(b.getStringByKey("UnitType")));m.setUnitFixed(b.getStringByKey("UnitFixed"));}else{m.setUnitType(f.QInAConverter.lookupByEncodedValue(a.getIntegerByKey("[Measures].[UnitType]")));m.setUnitFixed(a.getStringByKey("[Measures].[UnitFixed]"));}f.QInAMember.importIgnoredExternalDimensions(i,m,b);f.QInAMember.importSolveOrder(m,b);f.QInAMember.importCurrencyTranslation(m,b);if(m.getModelCapabilities().supportsMemberVisibility()){var g=b.getStringByKeyExt("Visibility","Visible");m.setResultVisibility(f.QInAConverter.lookupResultSetVisibility(g));}}}};f.QInAMember.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m.getComponentType();if(c.isTypeOf(f.MemberType.MEASURE)){var b=m;e.exportExceptions(b,i);if(c===f.MemberType.BASIC_MEASURE){var d=true;if(!b.getQueryModel().isExportingEachMeasure()&&e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var s=m;if(e.capabilities.supportsExceptionsV2()||!f.XCollectionUtils.hasElements(s.getExceptions())){d=false;}}if(d){e.exportBasicMeasure(m,i);}}else{f.QInAMember.exportCustomMember(e,m,i);}if(i.hasElements()){f.QInAMember.exportGenericRuntimeMemberProperties(e,b,i);}if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var g=f.QInAConverter.lookupMeasureStructureMemberTypeIna(b.getMemberType());i.putString("MemberType",g);}}return i;};f.QInAMember.prototype.setPrecisionAndScale=function(i,a,q,m){var n=-1;var b=-1;if(i.isAbap(q)){n=a.getIntegerByKeyExt("Digits",-1);b=a.getIntegerByKeyExt("FractDigits",-1);}else{n=a.getIntegerByKeyExt("[Measures].[Digits]",-1);b=a.getIntegerByKeyExt("[Measures].[FractDigits]",-1);}if(n!==-1){m.setNumericPrecision(n);}if(b!==-1){m.setNumericScale(b);}};f.QInAMemberBasicMeasure=function(){};f.QInAMemberBasicMeasure.prototype=new f.QInAComponentWithStructure();f.QInAMemberBasicMeasure.prototype._ff_c="QInAMemberBasicMeasure";f.QInAMemberBasicMeasure.getNameFromOperand=function(i){var m=i.getStructureByKey("MemberOperand");if(f.notNull(m)){var a=f.XString.isEqual(m.getStringByKey("AttributeName"),"Measures");var b=f.QInAConverter.lookupComparison(m.getStringByKey("Comparison"))===f.ComparisonOperator.EQUAL;if(a&&b){return m.getStringByKey("Value");}}return null;};f.QInAMemberBasicMeasure.importExceptionAggregation=function(i,q,m){if(q.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){m.clearExceptionAggregationDimensions();m.setExceptionAggregationType(null);var a=i.getListByKey("ExceptionAggregationDimensions");if(f.notNull(a)){var e=a.size();for(var b=0;b<e;b++){m.addExceptionAggregationDimensionName(a.getStringAt(b));}}var c=i.getStringByKey("ExceptionAggregation");m.setExceptionAggregationType(f.AggregationType.lookupOrCreate(c));}else{var d=i.getStringByKey("AggregationDimension");if(f.XStringUtils.isNotNullAndNotEmpty(d)){m.setAggregationDimensionName(d);}}};f.QInAMemberBasicMeasure.exportBasicMeasure=function(e,i,b,q){var a=b.getAggregationType();f.QInAExportUtil.setNameIfNotNull(i,"Aggregation",a);if(!b.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){var c=b.getAggregationDimensionName();if(f.notNull(c)){i.putString("AggregationDimension",c);}}if(!e.capabilities.supportsExtendedSort()&&!e.isVirtualInA(q)){var m=q.getSortingManager().getMeasureSorting(b,false);if(f.isNull(m)){i.putInteger("SortOrder",0);}else{i.putInteger("SortOrder",f.QInAConverter.lookupSortDirectionInA(m.getDirection()));}}};f.QInAMemberBasicMeasure.prototype.getComponentType=function(){return f.MemberType.BASIC_MEASURE;};f.QInAMemberBasicMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var n=f.QInAMember.getNameForImport(a,d);var b=f.QInAMember.getText(a,d);if(f.XStringUtils.isNullOrEmpty(n)){n=f.QInAMemberBasicMeasure.getNameFromOperand(a);}var s=d.getStructureMember(n);var e=s;if(f.isNull(e)&&f.notNull(n)){if(!a.containsKey("Selection")){e=d.addNewBasicMeasure(n,b);}}if(f.notNull(e)){f.QInAMemberBasicMeasure.importExceptionAggregation(a,d.getQueryModel(),e);i.importExceptions(a,e);}return e;};f.QInAMemberBasicMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(b.getDimension().getDimensionType()===f.DimensionType.ACCOUNT){i.putString("Name",b.getName());return i;}var q=b.getQueryModel();if(!q.getModelCapabilities().supportsNamedCustomMember()){var c=b.getExceptionAggregationType();if(!b.isAvailableInMetadata()&&c===f.AggregationType.COUNT){this.exportMeasureReference(e,i,"Name",b.getKeyFieldValue(),q);if(e.capabilities.supportsUniversalModel()){this.exportMeasureReference(e,this.getMemberOperandElement(e,i,b,q),"Value",f.XValueAccess.createWithValue(f.XStringValue.create("$$Count$$")),q);}f.QInAMember.exportText(e,i,b);}else{this.exportMeasureReference(e,this.getMemberOperandElement(e,i,b,q),"Value",b.getKeyFieldValue(),q);}}else{this.exportMeasureReference(e,i,"MemberName",b.getKeyFieldValue(),q);}f.QInAMemberBasicMeasure.exportBasicMeasure(e,i,b,q);if(e.getMode().isTypeOf(f.QModelFormat.INA_DATA)){if(q.getModelCapabilities().supportsCorrectDimensionDescriptionExt()){var d=m;var t=d.getDimension().getTextField();if(f.notNull(t)){var o=d.getDimension().getAlternativeFieldValue(false,d.getName(),t.getName(),null);if(d.isModelDefinedMember()&&f.notNull(o)){i.putStringNotNullAndNotEmpty("Description",b.getText());}}}if(b.getTagging().containsKey(f.QTransientConstants.TAG_OVERRIDE_DESCRIPTION)){i.putStringNotNullAndNotEmpty("Description",b.getTagging().getByKey(f.QTransientConstants.TAG_OVERRIDE_DESCRIPTION));}}return i;};f.QInAMemberBasicMeasure.prototype.exportMeasureReference=function(e,n,r,k,q){f.QInAValueUtils.exportPlaceholderValue(e,r,n,k,k.getValueType(),q);};f.QInAMemberBasicMeasure.prototype.getMemberOperandElement=function(e,i,b,q){var m=f.PrFactory.createStructure();m.putString("AttributeName","Measures");i.put("MemberOperand",m);m.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL));if(e.isVirtualInA(q)){m.putStringNotNullAndNotEmpty("Description",b.getText());}return m;};f.QInAMemberRestrictedMeasure=function(){};f.QInAMemberRestrictedMeasure.prototype=new f.QInAComponentWithStructure();f.QInAMemberRestrictedMeasure.prototype._ff_c="QInAMemberRestrictedMeasure";f.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip=function(a,c){var i=c.getChildren();while(i.hasNext()){var b=i.next();if(b.getOlapComponentType()===f.FilterComponentType.OPERATION){var d=b;var e=d.getDimensionName();if(f.XString.isEqual(a,e)){return d.getLow().getValue().toString();}}var m=f.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip(a,b);if(f.notNull(m)){return m;}}return null;};f.QInAMemberRestrictedMeasure.getMemberForSignFlip=function(c,r){if(r.getAccountType()!==null){return r.getName();}var d=r.getDimensionContext(c.getQueryManager());var a=r.getFilter();var m=d.getName();if(f.notNull(m)){if(a.isAll()){m=f.QInAMemberRestrictedMeasure.getFirstMemberForSignFlip(m,a.getFilterRootElement());}var b=d.getStructureMemberByAliasOrMember(m);if(f.notNull(b)&&b.getComponentType()===f.MemberType.RESTRICTED_MEASURE&&b!==r){return f.QInAMemberRestrictedMeasure.getMemberForSignFlip(c,b);}}return m;};f.QInAMemberRestrictedMeasure.prototype.getComponentType=function(){return f.MemberType.RESTRICTED_MEASURE;};f.QInAMemberRestrictedMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var b;if(f.isNull(m)){var d=p;var n=f.QInAMember.getNameForImport(a,d);var e=f.QInAMember.getText(a,d);if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()&&d.getStructureMember(n)!==null){b=d.getStructureMember(n);}else{b=d.addNewRestrictedMeasure(n,e);}}else{b=m;}var g=a.getStringByKey("AggregationDimension");if(f.XStringUtils.isNotNullAndNotEmpty(g)){b.setAggregationDimensionName(g);}var r=a;if(b.getModelCapabilities().supportsCustomMeasuresInMetadata()&&i.getMode()===f.QModelFormat.INA_DATA){r=a.getStructureByKey("[Measures].[MemberDetails]");}i.importFilterExpression(b.getFilter(),r,b,c);i.importExceptions(r,b);return b;};f.QInAMemberRestrictedMeasure.prototype.exportPresentationSignReversal=function(e,r,i){if(!r.isAutoSignFlip()||!e.getMode().isTypeOf(f.QModelFormat.INA_DATA)){return;}var d=r.getDimension();var q=d.getQueryModel();var a=r.getFilter();if(d.getDimensionType()!==f.DimensionType.ACCOUNT||f.isNull(a)){return;}var m=f.QInAMemberRestrictedMeasure.getMemberForSignFlip(r.getQueryModel(),r);if(f.notNull(m)){var b=q.getAccountDimension();if(f.notNull(b)){var c=b.getStructureMemberByAliasOrMember(m);if(f.notNull(c)){var g=c.getAccountType();if(g===f.AccountType.INC||g===f.AccountType.LEQ){i.putBoolean("PresentationSignReversal",true);}}}}};f.QInAMemberRestrictedMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var r=m;i.putString("Name",r.getName());f.QInAMember.exportText(e,i,r);f.QInAMember.exportAggregationType(r,i);if(!r.supportsExceptionAggregationDimsFormulas()){var b=r.getAggregationDimensionName();if(f.notNull(b)){i.putString("AggregationDimension",b);}}var c=null;var d=r.getFilterRootWithTransientTimeSelection();if(f.isNull(d)){if(r.getAggregationDimensionName()!==null){c=f.PrFactory.createStructure();var s=f.XStringBuffer.create();s.append(r.getName()).append(":").append(r.getAggregationDimensionName());c.putString("MeasureOperand",s.toString());}}else{c=e.exportFilterElement(d);}if(f.notNull(c)){i.put("Selection",c);}this.exportPresentationSignReversal(e,r,i);return i;};f.QInAMembersAll=function(){};f.QInAMembersAll.prototype=new f.QInAComponentWithStructure();f.QInAMembersAll.prototype._ff_c="QInAMembersAll";f.QInAMembersAll.prototype.getComponentType=function(){return f.OlapComponentType.MEMBERS;};f.QInAMembersAll.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;if(d.supportsCustomMembers()){d.removeCustomMembers();}var b=a.getListByKey("MembersRepo");if(f.isNull(b)){b=a.getListByKey("Members");if(f.isNull(b)){return null;}}var s=d.getStructureLayout();if(f.notNull(s)){s.clear();var e=b.size();for(var M=0;M<e;M++){var g=b.getStructureAt(M);var h=i.importStructureMember(d,g,c);if(f.notNull(h)){var j=d.getStructureMember(h.getName());if(f.isNull(j)){d.addMeasure(h);}else{if(j!==h){throw f.XException.createIllegalStateException("Internal error: New member with same name not allowed");}s.removeElement(j);s.add(j);}}}}return d;};f.QInAMembersAll.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var b=d.getStructureLayout();if(f.notNull(b)){var c=d.isMeasureStructure();if(!c&&b.isEmpty()){return null;}var g;if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){g=i.putNewList("Members");}else{g=i.putNewList("MembersRepo");}var h=f.XHashSetOfString.create();var s=b.size();for(var j=0;j<s;j++){var k=b.get(j);if(f.notNull(k)){var l=null;var t=k.getMemberType();if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var n=k.getTagging();if(d.getDimensionType()===f.DimensionType.ACCOUNT&&k.isModelDefinedMember()&&!n.containsKey(f.QTransientConstants.TAG_SERIALIZE_MEMBER)){continue;}var r=k.exportRuntimeObject(d,e);if(f.isNull(r)){continue;}if(!h.contains(r.getName())){l=e.exportStructureMember(r);h.add(r.getName());}}else{if(t===f.MemberType.RESTRICTED_MEASURE||t===f.MemberType.FORMULA||t===f.MemberType.VARIANCE||t===f.MemberType.EXCEPTION_AGGREGATION){l=e.exportStructureMember(k);l.putString("MemberType",f.QInAConverter.lookupMeasureStructureMemberTypeIna(t));}else{l=e.exportStructureMember(k);}}if(f.notNull(l)&&l.hasElements()){g.add(l);}}}}return i;};f.QInAQuery=function(){};f.QInAQuery.prototype=new f.QInAComponentWithStructure();f.QInAQuery.prototype._ff_c="QInAQuery";f.QInAQuery.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MODEL;};f.QInAQuery.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;var b=a;var d=b.getListByKey("Queries");if(f.notNull(d)){b=d.getStructureAt(d.size()-1);}var e=b.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(e)){b=e.getStructureAt(e.size()-1);}if(f.notNull(b)&&b.containsKey("Analytics")){b=b.getStructureByKey("Analytics");if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}}if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}if(f.notNull(b)){var g=i.getOriginalMode()===f.QModelFormat.INA_CLONE_RENDERING&&i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);var h=i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);if(h&&b.containsKey("ModellerDefinition")){b=b.getStructureByKey("ModellerDefinition");i.importModellerDimensions(b,q,q);i.importModellerCurrencyTranslation(b,q.getCurrencyTranslationManagerBase(),q);i.importModellerMetadataProperties(b,q,q);i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);return q;}i.importDimensions(b,q,q);if(!g){i.importFilter(b,q.getFilterBase(),q);i.importExceptions(b,q);i.importQueryCells(b,q.getQueryCellManager(),q);i.importUniversalDisplayHierarchies(b,q.getUniversalDisplayHierarchiesBase(),q);}i.importCurrencyTranslationManager(b,q.getCurrencyTranslationManager(),q);i.importSortingManager(b,q.getSortingManagerBase(),q);i.importDrillManager(b,q.getDrillManager(),q);if(i.mode!==f.QModelFormat.INA_REPOSITORY_NO_VARS&&i.mode!==f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){i.importVariableManager(b,q.getVariableManagerBase(),q);}i.importQuerySettings(b,q);i.importDataCells(b,q);i.importConditionManager(b,q.getConditionManagerBase(),q);if(h){i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);this.importPaging(i,b,q);f.QInAOptions.importSuppressKeyfigureCalculation(b,q.getQueryManager());var r=q.getResultStructureController();i.importComponent(null,b,r,q,q);var j=q.getQueryManager();if(f.notNull(j)){j.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));j.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));j.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"));}var k=b.getListByKey("PreQueries");if(f.notNull(k)){var l=null;var n=b.getStructureByKey("DataSource");if(f.notNull(n)){l=n.getStringByKey("System");}this.importPreQueries(i,q,k,l);}if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA)&&q.isBlendingModel()){this.importBlendingSources(i,a,q);}}}return q;};f.QInAQuery.prototype.importBlendingSources=function(a,b,q){var s=q.getBlendingSources();if(!f.XCollectionUtils.hasElements(s)){return;}var c=f.PrUtils.getStructureProperty(b,"DataSource");var d=f.PrUtils.getListProperty(c,"Sources");if(f.PrUtils.isListEmpty(d)){return;}for(var i=0;i<s.size();i++){var e=f.PrUtils.getStructureElement(d,i);var g=f.PrUtils.getStructureProperty(e,"DefiningContext");if(f.notNull(g)){var h=s.get(i).getQueryModel();h.deserializeFromElementExt(a.mode,g);}}};f.QInAQuery.prototype.importPaging=function(i,a,q){var b=a.getStructureByKey("SubSetDescription");var c=q.getQueryManager();var d=i.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(f.isNull(b)||!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||c.applyingStateOnQueryManager()&&!d){return;}f.QInAOptions.importPaging(a,c);};f.QInAQuery.prototype.getInactiveCapabilities=function(q){var c=f.XHashMapByString.create();var a=f.FeatureToggleOlap.getAllFeatureToggles();var b=a.getKeysAsIteratorOfString();while(b.hasNext()){c.put(b.next(),f.XBooleanValue.create(false));}var e=q.getSession().getFeatureToggles();if(f.notNull(e)){var d=e.getKeysAsIteratorOfString();while(d.hasNext()){c.put(d.next(),f.XBooleanValue.create(true));}}return c;};f.QInAQuery.prototype.importPreQueries=function(a,q,b,m){var c=a.getMode();if(a.getOriginalMode()!==f.QModelFormat.INA_CLONE_RENDERING){a.mode=a.getOriginalMode();}var d=f.XStringBuffer.create();var e=this.getInactiveCapabilities(q);var p=b.size();for(var i=0;i<p;i++){var g=b.getStructureAt(i);var h=g.getStructureByKey("Runtime");if(f.isNull(h)){h=g;}var j=h.getStructureByKey("DataSource");d.clear();d.append(j.getStringByKey("Type")).append(":[");d.append(j.getStringByKey("SchemaName"));d.append("][");d.append(j.getStringByKey("PackageName"));d.append("][");d.append(j.getStringByKey("ObjectName")).append("]");var k=f.XCommandFactory.create(q.getApplication());var x=k.createCommand(f.CmdCreateQueryManager.CMD_NAME);x.addParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION,q.getApplication());x.addParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,e);var l=j.getStringByKey("System");if(a.mode===f.QModelFormat.INA_REPOSITORY&&f.XString.isEqual(l,m)){l=q.getDataSource().getSystemName();}x.addParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM,l);x.addParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,d.toString());var n=x.processCommand(f.SyncType.BLOCKING,null,null);a.addAllMessages(n);f.XObjectExt.release(x);if(n.isValid()){var o=n.getData().getResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();a.importPreQuery(g,o);var r=g.getStringByKey("ObjectName");var s=q.getPreQueryByName(r);if(f.isNull(s)){q.addPreQueryWithName(o,r);}}}a.mode=c;};f.QInAQuery.prototype.exportComponentWithStructure=function(e,m,a,b){var q=m;var c=e.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING;e.exportUniversalDisplayHierarchies(q.getUniversalDisplayHierarchies(),a);var d=q.getDrillManager();e.exportDrillManager(d,a);if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)&&!d.isValidatingContextFreeNavigations()){a.putBoolean("ValidateContextFreeNavigations",false);}var w=f.XMath.binaryAnd(b,f.QImExFlag.DATASOURCE)>0;if(w){f.QInADataSource.exportDataSource(e,q.getDataSource(),q.getModelCapabilities().supportsRunAsUser(),a);}e.exportDimensions(q,a);e.exportSortingManager(q.getSortingManager(),a);e.exportCurrencyTranslationManager(q.getCurrencyTranslationManager(),a);if(!q.hasProcessingStep()||e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){e.exportDataCells(q,a);}e.exportQuerySettings(q,a);if(!c){e.exportFilter(q.getFilter(),a);e.exportExceptions(q,a);e.exportQueryCells(q.getQueryCellManager(),a);}e.exportConditionManager(q.getConditionManager(),a);var g=f.XMath.binaryAnd(b,f.QImExFlag.VARIABLES)>0;if(g&&e.mode!==f.QModelFormat.INA_REPOSITORY_NO_VARS&&e.mode!==f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(q.isExportingVariables()||q.hasProcessingStep()){e.exportVariables(q.getVariableContainer(),a);}}var h=q.getQueryManager();if(q.isBatchModeForMicroCube()){a.putString("Name",h.getNameForMicroCubeUse());}if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){e.exportFormulaExceptionManager(q.getFormulaExceptionManager(),a);this.exportPaging(a,q);f.QInAOptions.exportSuppressKeyfigureCalculation(a,h);var p=q.getPreQueries();if(f.notNull(p)){var j=p.size();if(j>0){var k=a.getListByKey("PreQueries");if(f.isNull(k)){k=a.putNewList("PreQueries");}var l=e.getMode();if(e.getOriginalMode()!==f.QModelFormat.INA_CLONE_RENDERING){e.mode=e.getOriginalMode();}for(var i=0;i<j;i++){var n=p.get(i);var o=e.exportPreQuery(n.getObject());var r=n.getName();o.putString("ObjectName",r);k.add(o);}e.mode=l;a.put("PreQueries",k);}}var s=q.getResultStructureController();e.exportComponent(null,s,a,b);var t=f.InactiveCapabilityUtil.exportFeatureToggles(h.getSession().getFeatureToggles());a.putString("ExperimentalFeatures",t);a.putString("ResultSetPersistanceTable",h.getResultSetPersistenceTable());a.putString("ResultSetPersistanceSchema",h.getResultSetPersistenceSchema());a.putString("ResultSetPersistanceIdentifier",h.getResultSetPersistenceIdentifier());}return a;};f.QInAQuery.prototype.exportPaging=function(i,q){var a=q.getQueryManager();if(!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||a.recordingStateOfQueryManager()){return;}if(a.getOffsetColumns()>0||a.getOffsetRows()>0||a.getMaxColumns()>-1||a.getMaxRows()>-1){f.QInAOptions.exportPaging(i,a);}};f.QInAQueryCellsAll=function(){};f.QInAQueryCellsAll.prototype=new f.QInAComponentWithList();f.QInAQueryCellsAll.prototype._ff_c="QInAQueryCellsAll";f.QInAQueryCellsAll.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_CELLS;};f.QInAQueryCellsAll.prototype.getTagName=function(){return"Cells";};f.QInAQueryCellsAll.prototype.importComponentWithList=function(i,a,m,p,c){return null;};f.QInAQueryCellsAll.prototype.exportComponentWithList=function(e,m,a){if(!e.capabilities.supportsUniversalModel()){return null;}var q=m;if(q.isEmpty()){return null;}var i=f.PrFactory.createList();var b=q.getIterator();while(b.hasNext()){var c=b.next();var d=i.addNewStructure();d.putString("Name",c.getName());var g=d.putNewList("Position");var p=c.getPositions();var h=p.getIterator();while(h.hasNext()){var j=h.next();var k=g.addNewStructure();k.putString("DimensionName",j.getDimensionName());k.putString("MemberName",j.getMemberName());}}return i;};f.QInAQuerySettings=function(){};f.QInAQuerySettings.prototype=new f.QInAComponentWithStructure();f.QInAQuerySettings.prototype._ff_c="QInAQuerySettings";f.QInAQuerySettings.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_SETTINGS;};f.QInAQuerySettings.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=f.PrUtils.getStringProperty(a,"Name");var q=c.getQueryModel();if(f.notNull(d)){q.setDefinitionName(d.getString());}var b=a.getStructureByKey("Query");i.importAxesSettings(b,q);if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var e=f.PrUtils.getListProperty(b,"AxesLayout");var l=f.PrUtils.getListSize(e,0);for(var g=0;g<l;g++){var h=f.PrUtils.getStructureElement(e,g);var j=f.AxisType.lookup(f.PrUtils.getStringValueProperty(h,"Axis",null));var k=q.getAxis(j);if(f.isNull(k)){continue;}var o=f.PrUtils.getListProperty(h,"OrderedDimensionNames");if(f.isNull(o)){continue;}var n=f.XListOfString.create();for(var r=0;r<f.PrUtils.getListSize(o,0);r++){var s=f.PrUtils.getStringElement(o,r);if(f.isNull(s)){continue;}n.add(s.getString());}k.reOrderDimensions(n);}}return q;};f.QInAQuerySettings.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;var d=q.getDefinitionName();if(f.XStringUtils.isNotNullAndNotEmpty(d)){i.putString("Name",d);}if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)&&!e.isAbap(q)&&!this.requiresMDSZeroSuppression(e,q)){return i;}var b=i.getStructureByKey("Query");if(f.isNull(b)){b=i.putNewStructure("Query");}e.exportAxesSettings(q,b);if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var c=b.putNewList("AxesLayout");var g=f.AxisType.getAll();for(var h=0;h<g.size();h++){var j=g.get(h);var k=q.getAxis(j);if(f.isNull(k)){continue;}var l=k.getOrderedDimensionNames();if(f.isNull(l)){continue;}var n=c.addNewStructure();n.putString("Axis",k.getName());var o=n.putNewList("OrderedDimensionNames");o.addAllStrings(l);}}return i;};f.QInAQuerySettings.prototype.requiresMDSZeroSuppression=function(e,q){if(!e.capabilities.supportsNullZeroSuppression()){return false;}var a=q.getAxesManager();if(f.isNull(a)){return false;}var r=a.getRowsAxis();var c=a.getColumnsAxis();return f.QInAAxesSettings.isDefinedZeroSuppression(r)||f.QInAAxesSettings.isDefinedZeroSuppression(c);};f.QInASort=function(){};f.QInASort.prototype=new f.QInAComponentWithList();f.QInASort.prototype._ff_c="QInASort";f.QInASort.prototype.getComponentType=function(){return f.OlapComponentType.SORT_MANAGER;};f.QInASort.prototype.getTagName=function(){return"Sort";};f.QInASort.prototype.importComponentWithList=function(i,a,m,p,c){var s=m;if(i.mode!==f.QModelFormat.INA_DATA_REINIT&&i.capabilities.supportsExtendedSort()){s.getSortingOperations().clear();if(f.notNull(a)){var q=s.getQueryModel();for(var b=0;b<a.size();b++){var d=a.getStructureAt(b);var e=d.getStringByKey("SortType");var g=f.QInAConverter.lookupSortType(e);var h;if(g===f.SortType.FIELD){h=this.importFieldSorting(s,q,d);}else if(g===f.SortType.MEASURE){h=this.importMeasureSorting(s,q,d);}else if(g===f.SortType.DATA_CELL_VALUE||g===f.SortType.COMPLEX){h=this.importPathSorting(c,s,q,d,g);}else{h=this.importDimensionSorting(s,q,d,g);}if(f.notNull(h)){this.importGenericSorting(q,d,h);}}}}return s;};f.QInASort.prototype.importGenericSorting=function(q,i,s){var a=i.getStringByKey("Direction");if(f.notNull(a)){var b=f.QInAConverter.lookupSortDirection2(a);if(f.notNull(b)){s.setDirection(b);}}if(s.supportsPreserveGrouping()&&s.supportsBreakGrouping()){s.setPreserveGrouping(i.getBooleanByKeyExt("PreserveGrouping",false));}if(q.getModelCapabilities().supportsLocaleSorting()){var c=i.getStructureByKey("Collator");if(f.notNull(c)){s.setIsCaseSensitive(c.getBooleanByKeyExt("CaseSensitive",false));s.setLocale(c.getStringByKeyExt("Locale",null));}}};f.QInASort.prototype.importPathSorting=function(c,s,q,i,a){var b=i.getListByKey("SortTuple");if(b.isEmpty()){return null;}var p=f.XList.create();for(var d=0;d<b.size();d++){var e=b.getStructureAt(d);var g=e.getStringByKey("FieldName");var h=e.getStringByKey("Value");if(f.notNull(g)&&f.notNull(h)){var j=q.getFieldByName(g);if(f.isNull(j)){return null;}var k=e.getStringByKey("Hierarchy");p.add(f.QSelectValue._createDimensionElement2(c,j,k,h));}else{return null;}}if(a===f.SortType.DATA_CELL_VALUE){return s.getDataCellSorting(p,true);}return s.getComplexSorting(p,true);};f.QInASort.prototype.importDimensionSorting=function(s,q,i,a){var d=q.getDimensionByNameFromExistingMetadata(i.getStringByKey("Dimension"));if(f.isNull(d)||d.isUniversalDisplayHierarchyDimension()||!d.supportsSorting(null)){return null;}var b=s.getDimensionSorting(d,true);if(a===f.SortType.FILTER){b.setSortByFilter();}else if(a===f.SortType.MEMBER_KEY){b.setSortByKey();this.importCustomSortDetails(b,i);}else if(a===f.SortType.MEMBER_TEXT){b.setSortByText();}else if(a===f.SortType.HIERARCHY){b.setSortByHierarchy();}return b;};f.QInASort.prototype.importCustomSortDetails=function(d,i){var c=i.getListByKey("CustomSort");if(!f.PrUtils.isListEmpty(c)){var a=f.PrUtils.asListOfString(c);d.setCustomSort(a);var b=f.CustomSortPosition.lookup(i.getStringByKey("CustomSortPosition"));d.setCustomSortPosition(b);}};f.QInASort.prototype.importMeasureSorting=function(s,q,i){var m=i.getStringByKey("MeasureName");var a=null;if(f.notNull(m)){var b=q.getMeasureDimension();var c=b.getStructureMember(m);if(f.notNull(c)){a=s.getMeasureSorting(c,true);}var d=i.getStringByKey("StructureName");var e=q.getNonMeasureDimension();if(f.notNull(d)&&f.notNull(e)&&f.notNull(a)){a.setStructure(e.getStructureMember(d));}}return a;};f.QInASort.prototype.importFieldSorting=function(s,q,i){var a=i.getStringByKey("FieldName");var b=null;if(f.notNull(a)){var c=q.getFieldByName(a);if(f.notNull(c)){b=s.getFieldSorting(c,true);}}return b;};f.QInASort.prototype.exportComponentWithList=function(e,m,a){if(!e.capabilities.supportsExtendedSort()){return null;}var b=f.PrFactory.createList();var s=m;var c=s.getSortingOperations().createListCopy();this.addRequiredSortOperationsForUdhDimensions(e,s,c);var d=c.size();for(var i=0;i<d;i++){var g=c.get(i);var h=null;var j=null;if(g.supportsDimension()){h=g.getDimension();}if(f.notNull(h)){var k=h.getAxisType();if(f.notNull(k)&&k!==f.AxisType.ROWS&&k!==f.AxisType.COLUMNS&&k!==f.AxisType.FREE){continue;}if(k===f.AxisType.FREE){j=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim(e,h);if(f.isNull(j)||s.getDimensionSorting(j,false)===null){continue;}}if(h.isUniversalDisplayHierarchyDimension()){continue;}}var l=f.PrFactory.createStructure();var n=g.getSortingType();l.putString("SortType",f.QInAConverter.lookupSortTypeInA(n));var o=this.getSortDirection(g,s,j);if(o!==f.XSortDirection.DEFAULT_VALUE){l.putString("Direction",f.QInAConverter.lookupSortDirectionInA2(o));}else if(n===f.SortType.MEASURE){continue;}this.exportGenericSorting(g,l);if(n===f.SortType.FIELD){this.exportFieldSorting(g,l,e);}else if(n===f.SortType.MEASURE){this.exportMeasureSorting(g,l);}else if(n===f.SortType.DATA_CELL_VALUE||n===f.SortType.COMPLEX){this.exportPathSorting(g,l,e);}else if(n===f.SortType.HIERARCHY){if(!g.getDimension().isHierarchyAssignedAndActive()){l=null;}}else if(n===f.SortType.MEMBER_KEY){var p=g;var q=this.dropIncorrectBasicMeasuresIfAny(p);this.exportCustomSortDetails(q,p.getCustomSortPosition(),l,p.getQueryModel(),e);}if(f.notNull(l)){f.QInAExportUtil.setNameIfNotNull(l,"Dimension",h);b.add(l);}}var r=e.mode;if(r.isTypeOf(f.QModelFormat.INA_DATA)||r===f.QModelFormat.INA_VALUE_HELP){b=f.QInAExportUtil.extendList(s,b);}if(e.getSession().hasFeature(f.FeatureToggleOlap.NO_EMPTY_SORT)&&b.isEmpty()){return null;}return b;};f.QInASort.prototype.addRequiredSortOperationsForUdhDimensions=function(e,s,a){var b=f.XListOfString.create();var r=f.XListOfString.create();for(var i=0;i<a.size();i++){var c=a.get(i);var d=c.supportsDimension()?c.getDimension():null;if(f.notNull(d)){b.add(d.getName());if(f.QInAUniversalDisplayHierarchies.isHierarchyConverted(e,d)){r.addAll(f.QInAUniversalDisplayHierarchies.getDimensionNames(e,d.getAxis()));}}}for(var k=0;k<r.size();k++){var g=r.get(k);if(!b.contains(g)){a.add(s.newDimensionSorting(s.getQueryModel().getDimensionByName(g)));}}};f.QInASort.prototype.dropIncorrectBasicMeasuresIfAny=function(d){var a=d.getDimension();var o=d.getCustomSort();var c=null;if(f.notNull(o)){c=o.createListOfStringCopy();if(a.isMeasureStructure()){for(var i=0;i<c.size();){var e=c.get(i);var s=a.getAllStructureMembers().getByKey(e);if(f.isNull(s)){c.removeAt(i);continue;}if(s.getMemberType()===f.MemberType.BASIC_MEASURE){var b=s;if(b.isNotFromMetadata()){c.removeAt(i);continue;}}i++;}}}return c;};f.QInASort.prototype.getSortDirection=function(s,a,c){if(f.notNull(c)&&c!==s.getDimension()){var b=a.getDimensionSorting(c,false);if(f.notNull(b)){return b.getDirection();}}return s.getDirection();};f.QInASort.prototype.exportGenericSorting=function(s,i){if(s.supportsPreserveGrouping()&&s.supportsBreakGrouping()){i.putBoolean("PreserveGrouping",s.isPreserveGroupingEnabled());}if(s.getModelCapabilities().supportsLocaleSorting()){var a=f.PrFactory.createStructure();a.putBoolean("CaseSensitive",s.isCaseSensitive());var b=s.getLocale();if(f.XStringUtils.isNotNullAndNotEmpty(b)){a.putString("Locale",b);}if(a.hasElements()){i.put("Collator",a);}}};f.QInASort.prototype.exportPathSorting=function(s,i,e){var a=i.putNewList("SortTuple");var b=s.getElementPath();var p=b.size();for(var c=0;c<p;c++){var d=b.get(c);var g=a.addNewStructure();g.putString("FieldName",d.getSelectField().getName());var h=f.QInAExportUtil.getMeasureMemberNameByAlias(s.getQueryModel(),d.getSelectValue(),e);g.putString("Value",h);var j=d.getSelectHierarchyName();if(f.XStringUtils.isNotNullAndNotEmpty(j)){g.putString("Hierarchy",j);}}};f.QInASort.prototype.exportMeasureSorting=function(s,i){var m=s;var a=m.getMeasure().getName();i.putString("MeasureName",a);var b=m.getStructure();f.QInAExportUtil.setNameIfNotNull(i,"StructureName",b);};f.QInASort.prototype.exportFieldSorting=function(s,i,e){var a=s;i.putString("FieldName",a.getField().getName());var c=a.getCustomSort();this.exportCustomSortDetails(c,a.getCustomSortPosition(),i,s.getQueryModel(),e);if(i.getListByKey("CustomSort")!==null){i.remove("Collator");}};f.QInASort.prototype.exportCustomSortDetails=function(c,a,i,q,e){if(f.XCollectionUtils.hasElements(c)){var b=i.putNewList("CustomSort");var d=c.size();for(var g=0;g<d;g++){var s=c.get(g);if(f.notNull(q)&&f.notNull(e)){s=f.QInAExportUtil.getMeasureMemberNameByAlias(q,s,e);}b.addString(s);}}f.QInAExportUtil.setNameIfNotNull(i,"CustomSortPosition",a);};f.QInATotals=function(){};f.QInATotals.prototype=new f.QInAComponentWithStructure();f.QInATotals.prototype._ff_c="QInATotals";f.QInATotals.prototype.getComponentType=function(){return f.OlapComponentType.TOTALS;};f.QInATotals.prototype.importComponentWithStructure=function(a,b,m,p,c){if(a.mode!==f.QModelFormat.INA_DATA_REINIT){var d=m;if(d.supportsResultVisibility()){var e=this.getResultStructure(b);var g=this.importResultAlignment(d,e);d.restoreTotalsVisibility(f.RestoreAction.DEFAULT_VALUE,false);var h=e.getListByKey("ResultStructure");if(f.notNull(h)){var j;if(d.supportsAdvancedResultStructure()&&g===f.ResultAlignment.STRUCTURE){j=d.getAdvancedResultStructure();j.clear();if(f.isNull(g)){d.setResultAlignmentBase(f.ResultAlignment.STRUCTURE,true);}}else{j=null;}var s=h.size();for(var i=0;i<s;i++){var r=h.getStructureAt(i);this.importResultStructureItem(r,d,j);}}}}return null;};f.QInATotals.prototype.importResultAlignment=function(c,i){if(c.supportsResultAlignment()){c.restoreTotalsAlignment(f.RestoreAction.DEFAULT_VALUE,false);var a=i.getStringByKey("ResultAlignment");if(f.XStringUtils.isNullOrEmpty(a)){return null;}var b=f.QInAConverter.lookupAlignment(a);c.setResultAlignmentBase(b,false);return b;}return null;};f.QInATotals.prototype.getResultStructure=function(i){var a=i.getStructureByKey("ResultStructureBag");if(f.isNull(a)){a=i.getStructureByKey("DefaultResultStructure");if(f.isNull(a)){return i;}}return a;};f.QInATotals.prototype.importResultStructureItem=function(r,c,a){var b=r.getStringByKey("Result");var e;if(f.XString.isEqual(b,"Members")){e=f.ResultStructureElement.MEMBERS;}else if(f.XString.isEqual(b,"Total")){e=f.ResultStructureElement.TOTAL;}else if(f.XString.isEqual(b,"TotalIncludedMembers")){e=f.ResultStructureElement.TOTAL_INCLUDED_MEMBERS;}else if(f.XString.isEqual(b,"TotalRemainingMembers")){e=f.ResultStructureElement.TOTAL_REMAINING_MEMBERS;}else{return;}var i=r.getStringByKey("Visibility");var v=f.QInAConverter.lookupResultSetVisibility(i);if(f.isNull(a)){c.setResultVisibilityByElement(e,v);}else{a.addWithVisibility(e,v);}};f.QInATotals.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;if(c.supportsTotals()){var b;if(e.mode.containsMetadata()||e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){b=i.putNewStructure("ResultStructureBag");}else{b=i;}this.exportAlignment(e,c,b);if(c.supportsResultVisibility()){if(!c.isTotalsVisibilityOnDefault()||c.getModelLevel()===f.QModelLevel.DIMENSIONS){var r=c.getTotalsStructure();if(f.XCollectionUtils.hasElements(r)){this.exportResultStructureItems(b,r,c);}}}}return i;};f.QInATotals.prototype.exportAlignment=function(e,c,i){if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)&&!e.isAbap(c.getQueryModel())){return;}if(c.supportsResultAlignment()){if(!c.isTotalsAlignmentOnDefault()){var r=c.getResultAlignment();if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){if(r===f.ResultAlignment.STRUCTURE){r=null;}}if(f.notNull(r)){i.putString("ResultAlignment",f.QInAConverter.lookupAlignmentInA(r));}}}};f.QInATotals.prototype.exportResultStructureItems=function(a,r,c){var s=a.putNewList("ResultStructure");var b=r.size();for(var i=0;i<b;i++){var d=r.get(i);var v=d.getResultVisibility();if(!this.isResultVisible(c,v)){continue;}var e=d.getResultStructureElement();if(e===f.ResultStructureElement.MEMBERS){this.exportResultStructureElement(s,v,"Members");}else if(e===f.ResultStructureElement.TOTAL){this.exportResultStructureElement(s,v,"Total");}else if(e===f.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){if(this.supportsConditionalResult(c,e)){this.exportResultStructureElement(s,v,"TotalIncludedMembers");}}else if(e===f.ResultStructureElement.TOTAL_REMAINING_MEMBERS){if(this.supportsConditionalResult(c,e)){this.exportResultStructureElement(s,v,"TotalRemainingMembers");}}}};f.QInATotals.prototype.isResultVisible=function(c,v){return v===f.ResultVisibility.VISIBLE||v===f.ResultVisibility.ALWAYS||v===f.ResultVisibility.CONDITIONAL&&c.getModelCapabilities().supportsConditionalResultVisibility();};f.QInATotals.prototype.supportsConditionalResult=function(c,e){var m=c.getModelCapabilities();return m.supportsConditionalResults()&&m.getSupportedConditionalResults().contains(e);};f.QInATotals.prototype.exportResultStructureElement=function(i,v,e){var r=i.addNewStructure();r.putString("Result",e);r.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(v));};f.QInATranslationsManager=function(){};f.QInATranslationsManager.prototype=new f.QInAComponentWithStructure();f.QInATranslationsManager.prototype._ff_c="QInATranslationsManager";f.QInATranslationsManager.prototype.getComponentType=function(){return f.OlapComponentType.MEASURE_TRANSLATIONS;};f.QInATranslationsManager.prototype.getTagName=function(){return"Translations";};f.QInATranslationsManager.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=m;if(f.notNull(b)&&b.containsKey("CurrencyTranslations")){var e=b.getListByKey("CurrencyTranslations");if(f.notNull(e)){if(f.notNull(d)&&f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var n=g.getStringByKey("Name");var h=g.getStringByKey("Description");var j=d.addNewMeasureCurrencyTranslationBase(n,h);a.importCurrencyTranslationElement(g,j,c);}}}}return d;};f.QInATranslationsManager.prototype.exportComponentWithStructure=function(e,m,i,a){return i;};f.QInAUniversalDisplayHierarchies=function(){};f.QInAUniversalDisplayHierarchies.prototype=new f.QInAComponentWithStructure();f.QInAUniversalDisplayHierarchies.prototype._ff_c="QInAUniversalDisplayHierarchies";f.QInAUniversalDisplayHierarchies.isHierarchyConversionRequired=function(e,a){return f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(e,a.getQueryManager())&&f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a)!==null;};f.QInAUniversalDisplayHierarchies.isHierarchyConverted=function(e,d){return f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(e,d.getQueryManager())&&d===f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(d.getAxis());};f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive=function(e,q){return e.mode===f.QModelFormat.INA_DATA&&q.isHierarchyToUDHConversionEnabledForCurrentRs()&&f.XCollectionUtils.hasElements(q.getQueryModel().getUniversalDisplayHierarchies().getHierarchies());};f.QInAUniversalDisplayHierarchies.getDimensionNames=function(e,a){if(f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(e,a.getQueryManager())){var d=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a);if(f.notNull(d)){var l=d.getLeveledHierarchy(d.getHierarchyName());var s=l.getAllLevel().size();var b=f.XListOfString.create();for(var i=0;i<s;i++){b.add(l.getLevel(i).getLevelDimensionName());}return b;}}return a.getDimensionNames();};f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchyWhichContainsGivenDim=function(e,d){if(f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(e,d.getQueryManager())){var a=d.getName();var r=d.getQueryModel().getRowsAxis();if(f.QInAUniversalDisplayHierarchies.getDimensionNames(e,r).contains(a)){return f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(r);}var c=d.getQueryModel().getColumnsAxis();if(f.QInAUniversalDisplayHierarchies.getDimensionNames(e,c).contains(a)){return f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(c);}}return null;};f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy=function(a){if(f.isNull(a)||a.getType()!==f.AxisType.ROWS&&a.getType()!==f.AxisType.COLUMNS){return null;}var d=a.getDimensionCount();for(var i=0;i<d;i++){var b=a.get(i);if(b.isHierarchyActive()&&b.getLeveledHierarchy(b.getHierarchyName())!==null){return b;}}return null;};f.QInAUniversalDisplayHierarchies.prototype.getComponentType=function(){return f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES;};f.QInAUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(a,b,m,p,c){var u=m;if(f.notNull(b)){var h=b.getByKey("UniversalDisplayHierarchies");if(f.notNull(h)&&h.isList()){var d=h;var s=d.size();for(var i=0;i<s;i++){f.QInAMdUniversalDisplayHierarchies.importHierarchy(u,d.getStructureAt(i));}}}f.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(u);return u;};f.QInAUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(e,m,i,a){var u=m;if(f.notNull(u)){u.updateIncludedDimensions();var b=u.getChildrenIterator();if(b.hasNext()){var c=i.putNewList("UniversalDisplayHierarchies");while(b.hasNext()){this.exportHierarchy(e,c,b.next());}}}return i;};f.QInAUniversalDisplayHierarchies.prototype.exportHierarchy=function(e,u,h){var d=true;var a=h.getHierarchyDedicatedAxis();var b=f.QInAUniversalDisplayHierarchies.isHierarchyConversionActive(e,a.getQueryManager())?f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a):null;if(f.notNull(b)){var c=u.addNewStructure();c.putString("Name",h.getName());var s=h.getQueryModel().getModelCapabilities().supportsUniversalDisplayHierarchiesZeroBased();c.putInteger("InitialDrillLevel",s?b.getInitialDrillLevel():b.getInitialDrillLevel()+1);c.putString("LowerLevelNodeAlignment",b.getLowerLevelNodeAlignment().getName());c.putBoolean("Active",true);c.putNewList("DimensionNames").addAllStrings(f.QInAUniversalDisplayHierarchies.getDimensionNames(e,a));c.putString("LevelHierarchyName",b.getHierarchyName());return;}else if(h.isActive()&&!h.isDimensionListValid()){d=false;e.addError(f.ErrorCodes.INVALID_STATE,f.XStringUtils.concatenate3("Dimensions for UDH '",h.getName(),"' must be placed next to each other on the axis"));}var g=u.addNewStructure();g.putString("Name",h.getName());g.putInteger("InitialDrillLevel",h.getInitialDrillLevel());g.putString("LowerLevelNodeAlignment",h.getAlignment().getName());g.putBoolean("Active",h.isActive()&&d);g.putNewList("DimensionNames").addAllStrings(h.getDimensionNames());if(h.hasCustomDimensions()){g.putBoolean("CustomDimensions",true);}};f.QInAVarDimMember=function(){};f.QInAVarDimMember.prototype=new f.QInAComponentWithStructure();f.QInAVarDimMember.prototype._ff_c="QInAVarDimMember";f.QInAVarDimMember.prototype.getComponentType=function(){return f.VariableType.DIMENSION_MEMBER_VARIABLE;};f.QInAVarDimMember.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=a.getStructureByKey("Values");if(f.notNull(d)){var s=f.QFactory.createFilterExpression(b,b);var n=i.importFilterExpression(s,d,b,c);b.setFilter(n);}else if(b.getVariableType()===f.VariableType.HIERARCHY_NODE_VARIABLE&&b.hasMemberFilter()&&b.getDimension().getKeyField()!==b.getMemberFilter().getField()){b.setDimension(b.getDimension());}return b;};f.QInAVarDimMember.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var n=d.getName();i.putString("Name",n);var t=null;var b=d.getExternalMemberFilter();if(f.XCollectionUtils.hasElements(b)){t=b;}else if(d.hasMemberFilter()){var c=d.getMemberFilter();if(f.XCollectionUtils.hasElements(c)){t=c;}}if(f.notNull(t)){var g=i.putNewStructure("Values");var h=g.putNewStructure("Selection");e.exportCartesianList(t,h);}else if(!d.isMandatory()){i.putNewStructure("Values");}return i;};f.QInAVarDimMember.prototype.extendCustom=function(e,m,a){var d=m;if(f.isNull(a)||d.supportsValueHelp()){return a;}var v=a.getStructureByKey("Values");if(f.isNull(v)){return a;}var s=v.getStructureByKey("Selection");if(f.isNull(s)){return a;}var b=s.getStructureByKey("SetOperand");if(f.isNull(b)){return a;}var c=b.getListByKey("Elements");if(f.PrUtils.isListEmpty(c)){return a;}var n=c.size();for(var i=0;i<n;i++){var g=c.get(i);if(g.hasStringByKey("Low")){g.putString("LowIs","ManualInput");}if(g.hasStringByKey("High")){g.putString("HighIs","ManualInput");}if(g.hasStringByKey("Value3")){g.putString("Value3Is","ManualInput");}}return a;};f.QInAVarOptionList=function(){};f.QInAVarOptionList.prototype=new f.QInAComponentWithStructure();f.QInAVarOptionList.prototype._ff_c="QInAVarOptionList";f.QInAVarOptionList.prototype.getComponentType=function(){return f.VariableType.OPTION_LIST_VARIABLE;};f.QInAVarOptionList.prototype.importComponentWithStructure=function(i,a,m,p,c){var o=m;var b=a.getListByKey("OptionValues");if(f.notNull(b)){var d;if(o.supportsMultipleValues()){o.clear();var l=b.size();for(var e=0;e<l;e++){d=b.getStringAt(e);o.addString(d);}}else if(b.size()===1){d=b.getStringAt(0);o.setString(d);}}return o;};f.QInAVarOptionList.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString("Name",v.getName());var b=i.putNewList("OptionValues");if(v.supportsMultipleValues()){var d=v.getValues();var l=d.size();for(var c=0;c<l;c++){var o=d.get(c);b.addString(o.getString());}}else{var g=v.getCurrentOption();if(f.notNull(g)){b.addString(g.getName());}}return i;};f.QInAVarSimpleType=function(){};f.QInAVarSimpleType.prototype=new f.QInAComponentWithStructure();f.QInAVarSimpleType.prototype._ff_c="QInAVarSimpleType";f.QInAVarSimpleType.prototype.getComponentType=function(){return f.VariableType.SIMPLE_TYPE_VARIABLE;};f.QInAVarSimpleType.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=m;if(s.supportsMultipleValues()){s.clear();}var v=s.getValueType();if(v.isNumber()){this.importNumericValues(i,a,s,v);}else if(v.isString()){this.importStringValues(a,s);}else if(v===f.XValueType.DATE){this.importDateValues(i,a,s);}else if(v===f.XValueType.TIME){this.importTimeValues(i,a,s);}else if(v===f.XValueType.DATE_TIME){this.importDateTimeValues(i,a,s);}else if(v===f.XValueType.BOOLEAN){this.importBooleanValues(a,s);}return null;};f.QInAVarSimpleType.prototype.getFirstValueAsString=function(v){var e=v.get(0);if(f.notNull(e)&&e.isString()){return e.getString();}return null;};f.QInAVarSimpleType.prototype.importDateTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDateTime(f.XDateTime.createDateTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDateTime(f.XDateTime.createDateTimeFromStringWithFlag(g,i.capabilities.supportsSapDate()));}}}};f.QInAVarSimpleType.prototype.importTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var t=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(t)){s.addTime(f.XTime.createTimeFromStringWithFlag(t,i.capabilities.supportsSapDate()));}}}else if(c===1){var e=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.setTime(f.XTime.createTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}};f.QInAVarSimpleType.prototype.importDateValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDate(f.XDate.createDateFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDate(f.XDate.createDateFromStringWithFlag(g,i.capabilities.supportsSapDate()));}}}};f.QInAVarSimpleType.prototype.importStringValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addString(a.getStringAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isString()){s.setString(e.getString());}}}};f.QInAVarSimpleType.prototype.importBooleanValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addBoolean(a.getBooleanAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isBoolean()){s.setBoolean(e.asBoolean().getBoolean());}}}};f.QInAVarSimpleType.prototype.importNumericString=function(s,v,a){if(v===f.XValueType.INTEGER){s.addInteger(f.XInteger.convertFromString(a));}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){s.addDouble(f.XDouble.convertFromString(a));}else if(v===f.XValueType.LONG){s.addLong(f.XLong.convertFromString(a));}};f.QInAVarSimpleType.prototype.addIntegerValue=function(e,s,i){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(i)){s.addString(f.XInteger.convertToString(i));}else{s.addInteger(i);}};f.QInAVarSimpleType.prototype.addLongValue=function(e,s,l){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(l)){s.addString(f.XLong.convertToString(l));}else{s.addLong(l);}};f.QInAVarSimpleType.prototype.addDoubleValue=function(e,s,d){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(d)){s.addString(f.XDouble.convertToString(d));}else{s.addDouble(d);}};f.QInAVarSimpleType.prototype.importNumericValues=function(i,a,s,v){var b=a.getListByKey("SimpleNumericValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.get(d);if(i.capabilities.supportsNumberAsString()&&f.notNull(e)&&e.getType()===f.PrElementType.STRING){this.importNumericString(s,v,b.getStringAt(d));continue;}if(v===f.XValueType.INTEGER){var g=b.getIntegerAt(d);s.addInteger(g);}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){var h=b.getDoubleAt(d);s.addDouble(h);}else if(v===f.XValueType.LONG){var l=b.getLongAt(d);s.addLong(l);}}}else if(c===1){var n=b.get(0);if(f.notNull(n)&&n.isNumeric()){if(v===f.XValueType.INTEGER){s.setInteger(b.getIntegerAt(0));}else if(v===f.XValueType.DOUBLE){s.setDouble(b.getDoubleAt(0));}else if(v===f.XValueType.DECIMAL_FLOAT){s.setDecFloat(f.XDecFloatByDouble.create(b.getDoubleAt(0)));}else if(v===f.XValueType.LONG){s.setLong(b.getLongAt(0));}}}}};f.QInAVarSimpleType.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString("Name",v.getName());var b=v.getValueType();var s;if(b===f.XValueType.STRING||b===f.XValueType.DATE||b===f.XValueType.TIME||b===f.XValueType.DATE_TIME||b===f.XValueType.BOOLEAN||b.isSpatial()){s=i.putNewList("SimpleStringValues");}else if(b===f.XValueType.DOUBLE||b===f.XValueType.DECIMAL_FLOAT||b===f.XValueType.LONG||b===f.XValueType.INTEGER){s=i.putNewList("SimpleNumericValues");}else{e.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate3("SimpleTypeVariable '",v.getName(),"' not exported"));return null;}if(v.supportsMultipleValues()){this.exportMultipleValues(e,v,b,s);}else{this.exportSingleValue(e,v,b,s);}return i;};f.QInAVarSimpleType.prototype.exportSingleValue=function(e,v,a,s){var r=!v.hasValue()&&(e.getMode()===f.QModelFormat.INA_REPOSITORY||v.getQueryModel().getSystemType().isTypeOf(f.SystemType.VIRTUAL_INA));if(a===f.XValueType.INTEGER){if(r){s.addNull();}else{this.addIntegerValue(e,s,v.getInteger());}}else if(a===f.XValueType.LONG){if(r){s.addNull();}else{this.addLongValue(e,s,v.getLong());}}else if(a===f.XValueType.BOOLEAN){if(r){s.addNull();}else{s.addBoolean(v.getBoolean());}}else if(a===f.XValueType.DOUBLE||a===f.XValueType.DECIMAL_FLOAT){if(r){s.addNull();}else{this.addDoubleValue(e,s,v.getDouble());}}else{if(!v.hasValue()){if(e.getMode()!==f.QModelFormat.INA_REPOSITORY){s.addString("");}}else if(a===f.XValueType.STRING||a.isSpatial()){s.addString(v.getString());}else if(a===f.XValueType.DATE){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getDate()));}else if(a===f.XValueType.TIME){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getTime()));}else if(a===f.XValueType.DATE_TIME){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getDateTime()));}}};f.QInAVarSimpleType.prototype.exportMultipleValues=function(e,v,a,s){var m=v.getValues();var b=m.size();for(var i=0;i<b;i++){if(a===f.XValueType.INTEGER){var c=m.get(i);this.addIntegerValue(e,s,c.getInteger());}else if(a===f.XValueType.LONG){var l=m.get(i);this.addLongValue(e,s,l.getLong());}else if(a===f.XValueType.DOUBLE){var d=m.get(i);this.addDoubleValue(e,s,d.getDouble());}else if(a===f.XValueType.DECIMAL_FLOAT){var g=m.get(i);this.addDoubleValue(e,s,g.getDouble());}else if(a===f.XValueType.STRING){var h=m.get(i);s.addString(h.getString());}else if(a===f.XValueType.DATE||a===f.XValueType.TIME||a===f.XValueType.DATE_TIME){var j=m.get(i);s.addString(f.QInAExportUtil.dateTimeToString(e,j));}else if(a===f.XValueType.BOOLEAN){var k=m.get(i);s.addString(f.XBoolean.convertToString(k.getBoolean()));}else if(a.isSpatial()){var n=m.get(i);s.addString(n.toWKT());}}};f.QInAVariableContainer=function(){};f.QInAVariableContainer.prototype=new f.QInAComponentWithList();f.QInAVariableContainer.prototype._ff_c="QInAVariableContainer";f.QInAVariableContainer.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_CONTAINER;};f.QInAVariableContainer.prototype.getTagName=function(){return"Variables";};f.QInAVariableContainer.prototype.importComponentWithList=function(i,a,m,p,c){var v=m;i.importVariableList(a,v);return m;};f.QInAVariableContainer.prototype.exportComponentWithList=function(e,m,a){var v=m;var q=v.getQueryModel();if(f.notNull(q)&&!q.isExportingVariables()&&!q.hasProcessingStep()){return null;}var b=v.getVariables();if(f.XCollectionUtils.hasElements(b)){return e.exportVariableList(v);}return null;};f.QInAVariablesList=function(){};f.QInAVariablesList.prototype=new f.QInAComponentWithList();f.QInAVariablesList.prototype._ff_c="QInAVariablesList";f.QInAVariablesList.applyLegacyCurrencyTranslation=function(v,q,a,m,b){var c=f.XStringUtils.concatenate3(m,".","Currency");var d=q.getVariable(c);var e=f.QInACurrencyTranslationItem.resolveTargetCurrency(b);var g=f.isNull(e)?null:e.getFixedValue();if(f.notNull(d)&&f.notNull(g)&&f.XValueUtil.getString(g)!==null){v.put(c,g);var h=0;if(b.getDateOffsetGranularity()!==null){h=b.getDateOffsetGranularity().getMonthFactor();}c=f.XStringUtils.concatenate3(m,".","MonthDelta");d=q.getVariable(c);var i=b.getDateOffset()*h;if(f.notNull(d)){v.put(c,f.XIntegerValue.create(i));}if(b.isReferenceDateFixed()){c=f.XStringUtils.concatenate3(m,".","Date");d=q.getVariable(c);if(f.notNull(d)){v.put(c,b.getFixedReferenceDate());}}else{c=f.XStringUtils.concatenate3(m,".","Date");d=q.getVariable(c);if(f.notNull(d)){if(i===0){v.put(c,f.XStringValue.create("0000-00-00"));}else{v.put(c,f.XStringValue.create("1111-11-11"));}}}var r=b.getFixedRateType();var j=b.getFixedCategory();c=f.XStringUtils.concatenate3(m,".","RateType");d=q.getVariable(c);if(f.notNull(d)){v.put(c,f.XStringValue.create(f.QInAVariablesList.resolveRateTypeVariableValue(r)));}c=f.XStringUtils.concatenate3(m,".","RateVersion");d=q.getVariable(c);if(f.notNull(d)){var k=b.getFixedRateVersion();v.put(c,f.XStringValue.create(f.isNull(k)?"":k));}c=f.XStringUtils.concatenate3(m,".","Category");d=q.getVariable(c);if(f.notNull(d)){v.put(c,f.XStringValue.create(f.QInAVariablesList.resolveCategoryVariableValue(j)));}}};f.QInAVariablesList.resolveRateTypeVariableValue=function(r){var a;if(f.CtRateType.isDefined(r)){a=f.QInAConverter.lookupRateTypeInA(r);}else{a="@@DYNAMIC@@";}return a;};f.QInAVariablesList.resolveCategoryVariableValue=function(c){var r;if(f.CtCategory.isDefined(c)){r=f.QInAConverter.lookupCategoryInA(c);}else{r="";}return r;};f.QInAVariablesList.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_LIST;};f.QInAVariablesList.prototype.importComponentWithList=function(i,a,m,p,c){var v=m;if(f.notNull(a)){var l=a.size();for(var b=0;b<l;b++){var d=a.getStructureAt(b);var e=d.getStringByKey("Name");var g=v.getVariableBaseByName(e);if(f.notNull(g)){var h=g.getVariableType();if(h.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){i.importSimpleTypeVariable(d,g,c);}else if(h.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){var j=g;i.importDimensionMemberVariable(d,j,null,j);}else if(h.isTypeOf(f.VariableType.OPTION_LIST_VARIABLE)){i.importOptionListVariable(d,g,c);}else{i.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate5("The variable '",e,"' of variable type '",h.getName(),"' was not imported correctly"));}}else{i.addWarning(f.ErrorCodes.ET_ELEMENT_NOT_FOUND,f.XStringUtils.concatenate3("The variable '",e,"' was not found"));}}}return m;};f.QInAVariablesList.prototype.exportComponentWithList=function(e,m,a){var v=m;var b=v.getVariables();if(f.isNull(b)||b.isEmpty()){return null;}var c=f.PrFactory.createList();var l=b.size();var d=e.mode;var g=null;if(d.isTypeOf(f.QModelFormat.INA_DATA)){g=this.remapCurrencyVariables(v);}for(var i=0;i<l;i++){var h=b.get(i);var j=null;if(!h.isCustomVariable()){if(d===f.QModelFormat.INA_METADATA){e.exportVariable(h,null);}else if(d.isTypeOf(f.QModelFormat.INA_DATA)||d===f.QModelFormat.INA_VALUE_HELP){var k=h.getExternalRepresentation();if(f.notNull(k)&&h.getOlapComponentType()===k.getOlapComponentType()&&f.XString.isEqual(k.getName(),h.getName())){h=k;}if(h.isInputEnabled()){j=f.PrFactory.createStructure();j.putString("Name",h.getName());if(f.notNull(g)&&g.containsKey(h.getName())){var n=g.getByKey(h.getName());var o;if(n.getValueType().isNumber()){o=j.putNewList("SimpleNumericValues");o.addInteger(f.XValueUtil.getInteger(n,false,true));}else{o=j.putNewList("SimpleStringValues");o.addString(f.XValueUtil.getString(n));}}else{e.exportVariable(h,j);}}}else{j=f.PrFactory.createStructure();j.putString("Name",h.getName());e.exportVariable(h,j);}if(f.notNull(j)){c.add(j);}}}return c;};f.QInAVariablesList.prototype.remapCurrencyVariables=function(v){var i;var r=f.XHashMapByString.create();var q=v.getQueryModel();if(f.notNull(q)){var c=q.getCurrencyTranslationManager();if(f.notNull(c)){if(c.isLegacyMeasureCurrencyTranslationAccountModel()){var d=c.getDefaultMeasureCurrencyTranslation();var a=false;if(f.notNull(d)){f.QInAVariablesList.applyLegacyCurrencyTranslation(r,q,v,"SignedData",d);var b=c.getQuery2MeasureCurrencyTranslationBridge();a=b.isApplyToDefaultCurrencyTranslation();}if(q.getMeasureDimension()!==null){var s=q.getMeasureDimension().getLoadedStructureMembers();var e=f.isNull(s)?0:s.size();for(i=0;i<e;i++){var g=s.get(i);if(g.getOlapComponentType()===f.MemberType.CURRENCY_MEASURE){var h=g;var j=h.getBaseMeasureName();if(f.isNull(j)&&c.isLegacyMeasureCurrencyTranslationAccountModel()){j=c.getCurrencyTranslationCrossCalculation(h.getAliasName());}if(h.getLocalCurrencyTranslation()!==null&&f.notNull(j)){if(f.notNull(d)&&c.isLegacyMeasureCurrencyTranslationAccountModel()&&a&&h.isDefaultCurrency()){f.QInAVariablesList.applyLegacyCurrencyTranslation(r,q,v,j,d);}else{f.QInAVariablesList.applyLegacyCurrencyTranslation(r,q,v,j,h.getLocalCurrencyTranslation());}}}}}}}}return r;};f.QInAHierarchyValueHelp=function(){};f.QInAHierarchyValueHelp.prototype=new f.QInAComponentWithStructure();f.QInAHierarchyValueHelp.prototype._ff_c="QInAHierarchyValueHelp";f.QInAHierarchyValueHelp.prototype.getComponentType=function(){return f.OlapComponentType.HIERARCHY;};f.QInAHierarchyValueHelp.prototype.getTagName=function(){return"Hierarchy";};f.QInAHierarchyValueHelp.prototype.getModelFormat=function(){return f.QModelFormat.INA_VALUE_HELP;};f.QInAHierarchyValueHelp.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var h=d.getHierarchyName();if(d.isSelectorHierarchyActive()&&f.XStringUtils.isNotNullAndNotEmpty(h)){var b=f.PrFactory.createStructure();var c=d.getHierarchyVersion();if(f.XStringUtils.isNotNullAndNotEmpty(c)){b.putString("Version",c);}f.QInAExportUtil.setDate(e,b,"DueDate",d.getHierarchyDueDate());b.putString("Name",h);b.putInteger("InitialDrillLevel",d.isSelectorUseQueryDrillOperations()&&d.hasZoomDrill()?0:d.getSelectorRootLevel());var v=d.getMemberOfPostedNodeVisibility();var g=f.QInAConverter.lookupResultSetVisibilityInA(v);b.putString("MemberOfPostedNodeVisibility",g);var j=d.getHierarchy();if(f.notNull(j)&&j.isCustomHierarchy()){b.putBoolean("IsTransient",true);b.putStringNotNull("Description",j.getHierarchyDescription());}return b;}return null;};f.QInAHierarchyValueHelp.prototype.importComponentWithStructure=f.noSupport;f.MeasureValueHelpRsDimension=function(){};f.MeasureValueHelpRsDimension.prototype=new f.XObject();f.MeasureValueHelpRsDimension.prototype._ff_c="MeasureValueHelpRsDimension";f.MeasureValueHelpRsDimension.create=function(d){var a=new f.MeasureValueHelpRsDimension();a.m_dimension=d;return a;};f.MeasureValueHelpRsDimension.prototype.m_dimension=null;f.MeasureValueHelpRsDimension.prototype.releaseObject=function(){f.XObject.prototype.releaseObject.call(this);this.m_dimension=null;};f.MeasureValueHelpRsDimension.prototype.cloneExt=function(a){return f.MeasureValueHelpRsDimension.create(this.m_dimension);};f.MeasureValueHelpRsDimension.prototype.getDimensionType=function(){return this.m_dimension.getDimensionType();};f.MeasureValueHelpRsDimension.prototype.isHierarchyActive=function(){return this.m_dimension.isHierarchyActive();};f.MeasureValueHelpRsDimension.prototype.setName=function(n){};f.MeasureValueHelpRsDimension.prototype.getName=function(){return this.m_dimension.getName();};f.MeasureValueHelpRsDimension.prototype.getText=function(){return this.m_dimension.getText();};f.MeasureValueHelpRsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_dimension.getLowerLevelNodeAlignment();};f.MeasureValueHelpRsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_dimension.hasDefaultLowerLevelNodeAlignment();};f.MeasureValueHelpRsDimension.prototype.getHierarchyName=function(){return this.m_dimension.getHierarchyName();};f.MeasureValueHelpRsDimension.prototype.getFields=function(){return this.m_dimension.getFields();};f.XCmdDeserializeBlendingResult=function(){};f.XCmdDeserializeBlendingResult.prototype=new f.XCmdDeserializeBlendingResultBase();f.XCmdDeserializeBlendingResult.prototype._ff_c="XCmdDeserializeBlendingResult";f.XCmdDeserializeBlendingResult.CLAZZ=null;f.XCmdDeserializeBlendingResult.staticSetup=function(){f.XCmdDeserializeBlendingResult.CLAZZ=f.XClass.create(f.XCmdDeserializeBlendingResult);};f.XCmdDeserializeBlendingResult.createBlendingDefinition=function(q,a,b){var c=f.QFactory.createBlendingDefinition();var s=q.size();for(var i=0;i<s;i++){c.addNewSource(q.get(i).getQueryModel(),a.get(i));}for(var d=0;d<b.size();d++){var e=b.getStructureAt(d);var l=e.getStringByKey("LinkType");var g=e.getStringByKey("DimensionName");var h=c.addNewDimensionMapping(f.BlendingLinkType.lookup(l),g);var j=e.getListByKey("Mapping");if(e.getBooleanByKeyExt("PreserveMembers",false)){h.setIsPreservingMembers(true);}if(!e.getBooleanByKeyExt("ReturnOriginKeys",true)){h.setIsReturningOriginKeys(false);}for(var k=0;k<j.size();k++){var m=j.getStructureAt(k);var n=m.getStringByKey("AliasName");var o=f.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(m);if(f.isNull(o)){var v=f.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(m);h.addNewConstantMapping(v,n);}else{h.addNewDimensionMappingDefinitionByName(o,n);}}var p=e.getListByKey("AttributeMappings");if(f.notNull(p)){for(var r=0;r<p.size();r++){var t=p.getStructureAt(r);var u=t.getStringByKey("AttributeName");var w=t.getBooleanByKey("IsLinkKey");var x=h.addNewAttributeMappingByName(u,w);var y=t.getListByKey("Mapping");for(var z=0;z<y.size();z++){var A=y.getStructureAt(z);var B=f.XCmdDeserializeBlendingResult.getNameFromMappingDefinition(A);var C=A.getStringByKey("AliasName");if(f.isNull(B)){var D=f.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition(A);h.addNewConstantMapping(D,C);}else{x.addAttributeMappingDefinition(f.BlendingMappingDefinition.createAttributeMapping(B,C));}}}}}return c;};f.XCmdDeserializeBlendingResult.getNameFromMappingDefinition=function(i){var a=i.getStructureByKey("MappingDefinition");if(a.containsKey("Member")){var b=a.getStructureByKey("Member");return b.getStringByKey("Name");}return null;};f.XCmdDeserializeBlendingResult.getNameFromConstantMappingDefinition=function(i){var a=i.getStructureByKey("MappingDefinition");if(a.containsKey("Constant")){var b=a.getStructureByKey("Constant");return b.getStringByKey("Value");}return null;};f.XCmdDeserializeBlendingResult.prototype.importSourceQueryModel=function(a,s,q,c){this.m_queryManagers.add(null);var i=s.getStructureByKey("DefiningContext");var b=i.getStructureByKey("Definition");var d=b.getStructureByKey("DataSource");var e=f.XCommandFactory.create(a);var g;if(d.containsKey("Mappings")){g=e.createCommand(f.CmdDeserializeBlending.CMD_NAME);g.addParameter(f.CmdDeserializeBlending.PARAM_I_APPLICATION,this.getParameterStrict(f.CmdDeserializeBlending.PARAM_I_APPLICATION));g.addParameter(f.CmdDeserializeBlending.PARAM_I_SYSTEMS,this.getParameter(f.CmdDeserializeBlending.PARAM_I_SYSTEMS));g.addParameterString(f.CmdDeserializeBlending.PARAM_I_SYSTEM,this.getParameterString(f.CmdDeserializeBlending.PARAM_I_SYSTEM));g.addParameterString(f.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,b.toString());g.addParameter(f.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(f.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));g.addParameter(f.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(f.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO));}else{g=e.createCommand(f.CmdCreateQueryManager.CMD_NAME);g.addParameter(f.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,b);g.addParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(f.CmdDeserializeBlending.PARAM_I_APPLICATION));g.addParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(q));g.addParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,this.getDataSourceName(d));g.addParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));g.addParameter(f.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO,this.getParameter(f.CmdDeserializeBlending.PARAM_I_EXT_DIMS_INFO));}g.processCommand(this.getSyncType(),this,c);};f.XCmdDeserializeBlendingResult.prototype.onQueryManagerImported=function(c,i){this.m_queryManagers.set(i,c.getResultParameter(f.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER));};f.XCmdDeserializeBlendingResult.prototype.onAllQueryManagersImported=function(){var i=this.m_rootElement.getStructureByKey("DataSource").getListByKey("Mappings");var b=f.XCmdDeserializeBlendingResult.createBlendingDefinition(this.m_queryManagers,this.m_aliases,i);var a=this.getParameterStrict(f.CmdDeserializeBlending.PARAM_I_APPLICATION);var s=f.QueryServiceConfig.createWithBlendingDefinition(a,b);var e=this.m_rootElement.getStringByKeyExt("ExperimentalFeatures",null);var c=this.getParameter(f.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES);f.XCommandUtil.handleInactiveCapabilities(s,e,c);s.processQueryManagerCreation(this.getSyncType(),this,null);};f.XCmdDeserializeBlendingResult.prototype.onQueryManagerCreated=function(e,q,c){this.getMessageManager().addAllMessages(e);if(e.isValid()){var s=this.getParameterStringStrict(f.CmdDeserializeBlending.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY);var d=q.getQueryModel().deserializeExt(f.QModelFormat.INA_REPOSITORY,s);this.getMessageManager().addAllMessages(d);this.addResultParameter(f.CmdDeserializeBlending.PARAM_E_QUERY_MANAGER,q);}this.onProcessFinished();};f.XCmdDeserializeBlendingSourcesResult=function(){};f.XCmdDeserializeBlendingSourcesResult.prototype=new f.XCmdDeserializeBlendingResultBase();f.XCmdDeserializeBlendingSourcesResult.prototype._ff_c="XCmdDeserializeBlendingSourcesResult";f.XCmdDeserializeBlendingSourcesResult.CLAZZ=null;f.XCmdDeserializeBlendingSourcesResult.staticSetup=function(){f.XCmdDeserializeBlendingSourcesResult.CLAZZ=f.XClass.create(f.XCmdDeserializeBlendingSourcesResult);};f.XCmdDeserializeBlendingSourcesResult.prototype.m_results=null;f.XCmdDeserializeBlendingSourcesResult.prototype.m_currentIndex=0;f.XCmdDeserializeBlendingSourcesResult.prototype.releaseObject=function(){f.XCmdDeserializeBlendingResultBase.prototype.releaseObject.call(this);this.m_results=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_results);};f.XCmdDeserializeBlendingSourcesResult.prototype.process=function(){this.m_results=f.XList.create();f.XCmdDeserializeBlendingResultBase.prototype.process.call(this);};f.XCmdDeserializeBlendingSourcesResult.prototype.importSourceQueryModel=function(a,s,q,c){var i=s.getStructureByKey("DefiningContext");var b=i.getStructureByKey("Definition");var d=b.getStructureByKey("DataSource");var e=f.XCommandFactory.create(a);var g;if(d.containsKey("Sources")){g=e.createCommand(f.CmdDeserializeBlendingSources.CMD_NAME);g.addParameter(f.CmdDeserializeBlendingSources.PARAM_I_APPLICATION,this.getParameterStrict(f.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));g.addParameter(f.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_SYSTEMS));g.addParameterString(f.CmdDeserializeBlendingSources.PARAM_I_SYSTEM,this.getParameterString(f.CmdDeserializeBlendingSources.PARAM_I_SYSTEM));g.addParameterString(f.CmdDeserializeBlendingSources.PARAM_I_QUERY_MODEL_STRING_INA_REPOSITORY,b.toString());g.addParameter(f.CmdDeserializeBlending.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));g.addParameter(f.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));g.addParameter(f.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY));}else{var h=this.getDataSourceName(d);g=e.createCommand(f.CmdCreateQueryManager.CMD_NAME);g.addParameter(f.CmdCreateQueryManager.PARAM_I_QUERY_MODEL_STRUCTURE_INA_REPOSITORY,b);g.addParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION,this.getParameterStrict(f.CmdDeserializeBlendingSources.PARAM_I_APPLICATION));g.addParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM,this.getSystemName(q));g.addParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,h);g.addParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES));g.addParameter(f.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO,this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_EXT_DIMS_INFO));var j=this.getParameter(f.CmdDeserializeBlendingSources.PARAM_I_MODELLER_CONTENT_LIST_INA_REPOSITORY);if(f.notNull(j)){var k=j.getIterator();while(k.hasNext()){var l=k.next();if(l.containsKey("DataSource")){var m=this.getDataSourceName(l.getStructureByKey("DataSource"));if(f.XString.isEqual(m,h)){g.addParameter(f.CmdCreateQueryManager.PARAM_I_MODELLER_CONTENT_INA_REPOSITORY,f.XContent.createJsonObjectContent(f.QModelFormat.INA_REPOSITORY,l));break;}}}}}this.m_results.add(null);g.processCommand(this.getSyncType(),this,f.XIntegerValue.create(this.m_currentIndex));this.m_currentIndex++;};f.XCmdDeserializeBlendingSourcesResult.prototype.onQueryManagerImported=function(c,i){var q=c.getResultParameter(f.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGER);if(f.notNull(q)){this.m_results.set(i,f.XCollectionUtils.singletonList(q));}else{var a=c.getResultParameter(f.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS);this.m_results.set(i,a);}};f.XCmdDeserializeBlendingSourcesResult.prototype.onAllQueryManagersImported=function(){for(var i=0;i<this.m_results.size();i++){this.m_queryManagers.addAll(this.m_results.get(i));}this.addResultParameter(f.CmdDeserializeBlendingSources.PARAM_E_QUERY_MANAGERS,this.m_queryManagers.createListCopy());this.onProcessFinished();};f.QCsnMdDimMembers=function(){};f.QCsnMdDimMembers.prototype=new f.QCsnComponentMetadata();f.QCsnMdDimMembers.prototype._ff_c="QCsnMdDimMembers";f.QCsnMdDimMembers.prototype.getComponentType=function(){return f.OlapComponentType.MEMBERS;};f.QCsnMdDimMembers.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdDimMembers.prototype.exportComponentWithStructure=function(e,m,a,b){var d=m;var c=d.getFlatDisplayKeyField();var g=d.getAllStructureMembers();var s=g.size();for(var i=0;i<s;i++){var h=g.get(i);var j=h.getFieldValue(c).getValue();var k=this.createStructureMemberElement(h,d.getDefaultAxisType());a.put(j.getStringRepresentation(),k);}return a;};f.QCsnMdDimMembers.prototype.createStructureMemberElement=function(m,a){var s=f.PrFactory.createStructure();s.putBoolean(f.CsnConstants.A_MEASURE,true);s.putString(f.CsnConstants.A_COMMON_LABEL,m.getText());s.putNewStructure(f.CsnConstants.A_QUERY_AXIS).putString(f.CsnConstants.ENUM,f.QCsnConverter.lookupAxisCsn(a));var b=m.getAggregationType();if(f.notNull(b)){var c=s.putNewStructure(f.CsnConstants.A_DEFAULT_AGGREGATION);c.putString(f.CsnConstants.ENUM,b.getName());}var n=m.getNumericPrecision();if(f.notNull(n)){s.putInteger(f.CsnConstants.PRECISION,n.getInteger());}var d=m.getNumericScale();if(f.notNull(d)){s.putInteger(f.CsnConstants.SCALE,d.getInteger());}var r=m.getResultVisibility();if(r===f.ResultVisibility.HIDDEN){s.putBoolean(f.CsnConstants.A_UI_HIDDEN,true);}var q=m.getQueryDataCells();if(q.size()===1){var e=q.get(0);s.putInteger(f.CsnConstants.A_DECIMALS,e.getDecimalPlaces());this.addCurrencyDimReference(s,m,e);this.addUnitDimReference(s,m,e);}return s;};f.QCsnMdDimMembers.prototype.addCurrencyDimReference=function(s,m,d){var v=d.getBaseValueType();if(v===f.XValueType.AMOUNT){var q=m.getDimension().getQueryModel();var c=q.getDimensionByType(f.DimensionType.CURRENCY);if(f.notNull(c)){s.putNewStructure(f.CsnConstants.A_ISO_CURRENCY).putString(f.CsnConstants.REFERENCE,this.getDimExternalName(c));}}};f.QCsnMdDimMembers.prototype.addUnitDimReference=function(s,m,d){var v=d.getBaseValueType();if(v===f.XValueType.QUANTITY){var q=m.getDimension().getQueryModel();var u=q.getDimensionByType(f.DimensionType.UNIT);if(f.notNull(u)){s.putNewStructure(f.CsnConstants.A_MEASURES_UNIT).putString(f.CsnConstants.REFERENCE,this.getDimExternalName(u));}}};f.QCsnMdDimension=function(){};f.QCsnMdDimension.prototype=new f.QCsnComponentMetadata();f.QCsnMdDimension.prototype._ff_c="QCsnMdDimension";f.QCsnMdDimension.getDisplay=function(d){var a=f.XListOfString.create();var r=d.getMainAttribute().getDefaultResultSetFields();var i=0;while(i<r.size()&&a.size()<2){f.XCollectionUtils.addIfNotPresent(a,r.get(i).isKeyField()?f.CsnConstants.DISPLAY_KEY:f.CsnConstants.DISPLAY_TEXT);i++;}return a.hasElements()?f.XCollectionUtils.join(a,"_"):f.CsnConstants.DISPLAY_KEY;};f.QCsnMdDimension.getTotals=function(d){return d.isTotalsVisibilityOnDefault()?f.CsnConstants.TOTALS_SHOW:f.CsnConstants.TOTALS_HIDE;};f.QCsnMdDimension.prototype.getComponentType=function(){return f.OlapComponentType.ABSTRACT_DIMENSION;};f.QCsnMdDimension.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdDimension.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var k=d.getFlatKeyField();var c=i.putNewStructure(this.getDimExternalName(d));c.putBoolean(f.CsnConstants.A_DIMENSION,true);c.putString(f.CsnConstants.TYPE,f.CsnConstants.TYPE_ASSOCIATION);c.putString(f.CsnConstants.TARGET,d.getName());this.addLength(c,k);c.putNewStructure(f.CsnConstants.A_QUERY_AXIS).putString(f.CsnConstants.ENUM,f.QCsnConverter.lookupAxisCsn(d.getDefaultAxisType()));c.putNewStructure(f.CsnConstants.A_QUERY_DISPLAY).putString(f.CsnConstants.ENUM,f.QCsnMdDimension.getDisplay(d));c.putNewStructure(f.CsnConstants.A_QUERY_TOTALS).putString(f.CsnConstants.ENUM,f.QCsnMdDimension.getTotals(d));c.putNewList(f.CsnConstants.KEYS).addNewStructure().putNewList(f.CsnConstants.REF).addAllStrings(this.getAllKeys(d));var b=f.PrFactory.createStructure();b.putString(f.CsnConstants.A_COMMON_LABEL,d.getText());b.putString(f.CsnConstants.KIND,f.CsnConstants.KIND_ENTITY);b.putNewStructure(f.CsnConstants.A_DATA_CATEGORY).putString(f.CsnConstants.ENUM,f.CsnConstants.DATA_CATEGORY_DIMENSION);b.putString(f.CsnConstants.A_REPRESENTATIVE_KEY,this.getFieldName(k));this.addFields(b.putNewStructure(f.CsnConstants.ELEMENTS),d);return b;};f.QCsnMdDimension.prototype.addFields=function(c,d){var k=d.getFlatKeyField();var t=d.getFlatTextField();var a=d.getFields();var s=a.size();for(var i=0;i<s;i++){var b=a.get(i);var e=c.putNewStructure(this.getFieldName(b));this.addLength(e,b);e.putString(f.CsnConstants.TYPE,f.QCsnConverter.lookupValueTypeCsn(b.getValueType(),f.CsnConstants.TYPE_STRING));if(b.isKeyField()){e.putBoolean(f.CsnConstants.KEY,true);var g=b===k&&f.notNull(t)?this.getFieldName(t):null;if(f.XStringUtils.isNotNullAndNotEmpty(g)){e.putNewStructure(f.CsnConstants.A_TEXT_ATTRIBUTE).putString(f.CsnConstants.REFERENCE,g);}}else{e.putNewStructure(f.CsnConstants.A_TEXT_FOR).putString(f.CsnConstants.REFERENCE,this.getFieldName(k));}if(!b.isFilterable()){e.putBoolean(f.CsnConstants.A_FILTERABLE,false);}}};f.QCsnMdDimension.prototype.addLength=function(s,a){if(a.getValueType().isString()&&a.getLength()>0){s.putInteger(f.CsnConstants.LENGTH,a.getLength());}};f.QCsnMdDimension.prototype.getAllKeys=function(d){var k=f.XListOfString.create();var a=d.getFlatKeyField();var b=d.getFields();var s=b.size();for(var i=0;i<s;i++){var c=b.get(i);var t=c.getPresentationType();var e=c===a;var g=t===f.PresentationType.KEY&&!c.isHierarchyKeyField();if(e||g){k.add(this.getFieldName(c));}}return k;};f.QCsnMdDimensions=function(){};f.QCsnMdDimensions.prototype=new f.QCsnComponentMetadata();f.QCsnMdDimensions.prototype._ff_c="QCsnMdDimensions";f.QCsnMdDimensions.prototype.getComponentType=function(){return f.OlapComponentType.DIMENSIONS;};f.QCsnMdDimensions.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdDimensions.prototype.exportComponentWithStructure=function(e,m,a,b){var q=m;var c=a.getStructureByKey(q.getDataSource().getObjectName());var d=c.getStructureByKey(f.CsnConstants.ELEMENTS);var g=q.getDimensions();var s=g.size();for(var i=0;i<s;i++){var h=g.get(i);if(h.isMeasureStructure()){e.exportMembers(h,d);}else{var j=e.exportDimension(h,d);a.put(h.getName(),j);}}return a;};f.QCsnMdQuery=function(){};f.QCsnMdQuery.prototype=new f.QCsnComponentMetadata();f.QCsnMdQuery.prototype._ff_c="QCsnMdQuery";f.QCsnMdQuery.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MODEL;};f.QCsnMdQuery.prototype.newModelComponent=function(a,o,p,c){return f.QueryModel.create(o,null,f.QCapabilities.create());};f.QCsnMdQuery.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdQuery.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;var c=i.putNewStructure(f.CsnConstants.DEFINITIONS);var b=c.putNewStructure(q.getDataSource().getObjectName());b.putString(f.CsnConstants.KIND,f.CsnConstants.KIND_ENTITY);b.putString(f.CsnConstants.A_COMMON_LABEL,q.getText());b.putNewStructure(f.CsnConstants.ELEMENTS);e.exportDimensions(q,c);e.exportVariables(q.getVariableContainer(),i);return i;};f.QCsnMdVariable=function(){};f.QCsnMdVariable.prototype=new f.QCsnComponentMetadata();f.QCsnMdVariable.prototype._ff_c="QCsnMdVariable";f.QCsnMdVariable.prototype.getComponentType=function(){return f.VariableType.ANY_VARIABLE;};f.QCsnMdVariable.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdVariable.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString(f.CsnConstants.NAME,this.getVariableName(v));return i;};f.QCsnMdVariable.prototype.getVariableName=function(v){var e=v.getNameExternal();return f.XStringUtils.isNotNullAndNotEmpty(e)?e:v.getName();};f.QCsnMdVariables=function(){};f.QCsnMdVariables.prototype=new f.QCsnComponentMetadata();f.QCsnMdVariables.prototype._ff_c="QCsnMdVariables";f.QCsnMdVariables.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_CONTAINER;};f.QCsnMdVariables.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QCsnMdVariables.prototype.exportComponentWithStructure=function(e,m,a,b){var v=m;var c=v.getVariables();if(c.hasElements()){var d=a.putNewList(f.CsnConstants.PARAMETERS);var s=c.size();for(var i=0;i<s;i++){e.exportVariable(c.get(i),d.addNewStructure());}}return a;};f.QInAMdBasicMeasure=function(){};f.QInAMdBasicMeasure.prototype=new f.QInAComponentMetadata();f.QInAMdBasicMeasure.prototype._ff_c="QInAMdBasicMeasure";f.QInAMdBasicMeasure.prototype.getComponentType=function(){return f.MemberType.BASIC_MEASURE;};f.QInAMdBasicMeasure.prototype.newModelComponent=function(a,o,p,c){return f.QBasicMeasure._createBasicMeasure(c,p);};f.QInAMdBasicMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;b.setName(a.getStringByKey("Name"));return m;};f.QInAMdBasicMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());return i;};f.QInAMdDataSource=function(){};f.QInAMdDataSource.prototype=new f.QInAComponentMetadata();f.QInAMdDataSource.prototype._ff_c="QInAMdDataSource";f.QInAMdDataSource.importMd=function(i,a,q,c){var b=a;if(f.notNull(b)&&!b.containsKey("DataSource")){b=b.getStructureByKey("Analytics");if(f.notNull(b)&&!b.containsKey("DataSource")){b=b.getStructureByKey("Definition");}if(f.isNull(b)&&a.containsKey("Definition")){b=a.getStructureByKey("Definition");}if(f.isNull(b)&&a.containsKey("ListReporting")){b=a.getStructureByKey("ListReporting");}}var d=null;if(f.notNull(b)&&b.containsKey("DataSource")){d=f.QInADataSource.importQd(i,b,"DataSource",c);if(f.notNull(d)){if(f.XStringUtils.isNullOrEmpty(d.getText())){var t=b.getStringByKey("Description");if(f.XStringUtils.isNotNullAndNotEmpty(t)){d.setText(t);}}d.setCreatedBy(b.getStringByKey("CreatedBy"));d.setLastUpdateBy(b.getStringByKey("LastDataUpdateBy"));var e=b.getStringByKey("CreatedOn");var g=f.XDateTime.createDateTimeSafe(e);d.setCreatedOn(g);var l=b.getStringByKey("LastDataUpdateOn");if(f.isNull(l)){l=b.getStringByKey("LastDataUpdate");}var h=f.XDateTime.createDateTimeSafe(l);d.setLastUpdateOn(h);var j=b.getStringByKey("DueDate");var k=f.XDateTime.createDateTimeSafe(j);d.setDueDate(k);}}var m=f.QInADataSource.importQd(i,a,"BaseDataSource",c);if(f.notNull(m)){if(f.notNull(d)){d.setParentCubeInfo(m);}q.setBaseDataSource(m);var n=f.QInfoProvider.createInfoProvider(q,m.getObjectName(),m.getObjectName(),null);q.setInfoProvider(n);}if(f.notNull(d)){q.setCubeInfo(d);}};f.QInAMdDataSource.exportMd=function(e,i,q){var a=f.QInADataSource.exportDataSource(e,q.getDataSource(),false,i);if(q.getDataSource().getValidationHash()!==null){a.putString("ValidationHash",q.getDataSource().getValidationHash());}return a;};f.QInAMdDataSource.prototype.getComponentType=function(){return null;};f.QInAMdDataSource.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;f.QInAMdDataSource.importMd(i,a,q,c);return m;};f.QInAMdDataSource.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;return f.QInAMdDataSource.exportMd(e,i,q);};f.QInAMdDimMembers=function(){};f.QInAMdDimMembers.prototype=new f.QInAComponentMetadata();f.QInAMdDimMembers.prototype._ff_c="QInAMdDimMembers";f.QInAMdDimMembers.importMd=function(i,d,a){if(d.supportsBasicStructureMembers()){var b=a.getListByKey("BasicMembers");if(f.isNull(b)){b=a.getListByKey("Members");}f.QInAMdDimMembers.importMemberDetails(i,d,b);if(i.hasErrors()){return;}var c=a.getListByKey("Extended_Members_From_MD");f.QInAMdDimMembers.importMemberDetails(i,d,c);if(i.hasErrors()){return;}}var o=f.PrUtils.getListProperty(a,"OrderedStructureMemberNames");if(f.notNull(o)){var e=f.XListOfString.create();var l=f.PrUtils.getListSize(o,0);for(var g=0;g<l;g++){var h=f.PrUtils.getStringElement(o,g);f.XObjectExt.assertNotNullExt(h,"illegal state");e.add(h.getString());}d.reOrderStructureMembers(e);}};f.QInAMdDimMembers.importMemberDetails=function(i,d,a){if(f.notNull(a)){var b=d.getFields();var k=d.getKeyField();var c=k.getName();var t=d.getTextField();var e=f.isNull(t)?null:t.getName();var s=a.size();for(var m=0;m<s;m++){var g=a.getStructureAt(m);var h=g.getStringByKey(c);var j=g.getStringByKey(e);var l=null;if(i.getOriginalMode().isTypeOf(f.QModelFormat.INA_CLONE)&&d.getDimensionType()===f.DimensionType.ACCOUNT){continue;}else if(d.getQueryModel().getModelCapabilities().supportsCustomMeasuresInMetadata()){l=f.QInAMdDimMembers.decideMeasureTypeAndAdd(d,g,h,j);}else{l=d.addNewBasicMeasure(h,j);}if(g.getBooleanByKeyExt("BasicMeasureNotFromMetadata",false)){l.setNotFromMetadata();}l.setIsSelectionCandidate(g.getBooleanByKeyExt("IsSelectionCandidate",true));var n=g.getListByKey("DefaultSelectedDimensions");if(f.notNull(n)){var o=n.size();for(var p=0;p<o;p++){l.addDefaultSelectionDimensionByName(n.getStringAt(p));}}var r=f.QInAConverter.lookupResultCalculation(g.getStringByKeyExt("ResultCalculation",null));l.setResultCalculation(r);f.QInAMember.importAggregationType(l,g,false);if(g.getByKey("isModelDefinedMember")!==null){l.setModelDefinedMember(g.getBooleanByKey("isModelDefinedMember"));}var q=f.PrUtils.getIntegerProperty(g,"NumericPrecision");if(f.notNull(q)){l.setNumericPrecision(q.getInteger());}var u=f.PrUtils.getIntegerProperty(g,"NumericScale");if(f.notNull(u)){l.setNumericScale(u.getInteger());}var v=f.PrUtils.getIntegerProperty(g,"NumericShift");if(f.notNull(v)){l.setNumericShift(v.getInteger());}if(g.containsKey("CurrencyTranslationName")){l.setCurrencyTranslationName(g.getStringByKey("CurrencyTranslationName"));}var w=f.QInAConverter.lookupSingleValueCalculation(g.getStringByKeyExt("SingleValueCalculation",null));l.setSingleValueCalculation(w);var x=b.size();for(var y=0;y<x;y++){var z=b.get(y);if(z.isCubeBlendingPropertiesField()){continue;}var A=z.getName();if(!g.containsKey(A)){continue;}var B=z.getValueType();var C;if(g.hasStringByKey(A)){C=f.XValueUtil.getValueFromString(g.getStringByKey(A),B);}else{var D=g.getByKey(A);C=f.isNull(D)?null:f.XValueUtil.convertValue(D.copyAsPrimitiveXValue(),B);}l.createAndAddFieldWithValue(z,C);}}}};f.QInAMdDimMembers.decideMeasureTypeAndAdd=function(d,i,m,a){var s;var b=i.getIntegerByKeyExt("[Measures].[MemberType]",-1);if(b===0){s=d.addNewFormulaMeasure(m,a);}else if(b===1){s=d.addNewRestrictedMeasure(m,a);}else{s=d.addNewBasicMeasure(m,a);}s.setCreatedFromMetadata(true);return s;};f.QInAMdDimMembers.exportMd=function(e,a,d){var b=d.getBasicStructureMembers();if(f.notNull(b)){var c=a.putNewList("BasicMembers");if(!(e.getOriginalMode().isTypeOf(f.QModelFormat.INA_CLONE)&&d.getDimensionType()===f.DimensionType.ACCOUNT)){f.QInAMdDimMembers.exportMemberDetails(e,d,b,c);}}var g=d.getExtendedStructureMembers();if(f.XCollectionUtils.hasElements(g)){var n=g.size();var h=f.XListOfNameObject.create();for(var i=0;i<n;i++){var j=g.get(i);if(j.isCreatedFromMetadata()){h.add(j);}}if(f.XCollectionUtils.hasElements(h)){var k=a.putNewList("Extended_Members_From_MD");f.QInAMdDimMembers.exportMemberDetails(e,d,h,k);}}var o=d.getOrderedStructureMemberNames();if(f.notNull(o)){var l=a.putNewList("OrderedStructureMemberNames");l.addAllStrings(o);}};f.QInAMdDimMembers.exportMemberDetails=function(e,d,b,i){if(f.notNull(b)){var a=d.getFields();var c=a.size();var t=d.getTextField();var g=f.notNull(t)?t.getName():null;var m=b.size();for(var h=0;h<m;h++){var j=i.addNewStructure();var s=b.get(h);var k=d.getModelCapabilities().supportsCustomMeasuresInMetadata();if(k){var l=f.QInAConverter.lookupMeasureStructureMemberTypeInaForUniversalModels(s.getMemberType());j.putInteger("[Measures].[MemberType]",l);}if(s.getMemberType()===f.MemberType.BASIC_MEASURE){if(s.isNotFromMetadata()){j.putBoolean("BasicMeasureNotFromMetadata",true);}}if(s.isModelDefinedMember()){j.putBoolean("isModelDefinedMember",true);}for(var n=0;n<c;n++){var o=a.get(n);if(o.isCubeBlendingPropertiesField()){continue;}var p=s.getFieldValue(o);if(f.isNull(p)){continue;}if(!s.isSelectionCandidate()){j.putBoolean("IsSelectionCandidate",false);}var q=s.getDefaultSelectedDimensionNames();if(f.notNull(q)){var r=j.putNewList("DefaultSelectedDimensions");r.addAllStrings(q);}f.QInAExportUtil.setNameIfNotNull(j,"SingleValueCalculation",s.getSingleValueCalculation());f.QInAExportUtil.setNameIfNotNull(j,"ResultCalculation",s.getResultCalculation());f.QInAExportUtil.setNameIfNotNull(j,"Aggregation",s.getAggregationType());var u=s.getNumericPrecision();if(f.notNull(u)){j.putInteger("NumericPrecision",u.getInteger());}var v=s.getNumericScale();if(f.notNull(v)){j.putInteger("NumericScale",v.getInteger());}var w=s.getNumericShift();if(f.notNull(w)){j.putInteger("NumericShift",w.getInteger());}if(s.getMappedCurrencyTranslationNameForInAData()!==null){j.putString("CurrencyTranslationName",s.getMappedCurrencyTranslationNameForInAData());}var x=o.getName();var y=p.getValueType();if(y===f.XValueType.STRING){if(f.notNull(g)&&f.XString.isEqual(x,g)&&s.hasOverrideTextDefined()){j.putString(x,s.getText());}else{j.putString(x,p.getString());}}else if(y===f.XValueType.BOOLEAN){j.putBoolean(x,p.getBoolean());}else if(y===f.XValueType.INTEGER){j.putInteger(x,p.getInteger());}else if(y===f.XValueType.LONG){j.putLong(x,p.getLong());}else if(y===f.XValueType.DOUBLE||y===f.XValueType.DECIMAL_FLOAT){j.putDouble(x,p.getDouble());}else{e.addError(f.ErrorCodes.INVALID_TOKEN,"Unsupported element type");}}}}};f.QInAMdDimMembers.prototype.getComponentType=function(){return null;};f.QInAMdDimMembers.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdDimMembers.importMd(i,m,a);return m;};f.QInAMdDimMembers.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdDimMembers.exportMd(e,i,m);return i;};f.QInAMdDimProperties=function(){};f.QInAMdDimProperties.prototype=new f.QInAComponentMetadata();f.QInAMdDimProperties.prototype._ff_c="QInAMdDimProperties";f.QInAMdDimProperties.importMdNameValuePairs=function(i,d){var a=f.PrUtils.getStructureProperty(i,"HierarchyProperties");if(f.notNull(a)){f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyMaintenance",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyCreation",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyCreationByReference",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyUpdate",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyCopy",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyDeletion",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchySaving",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyActivation",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyExternalDimension",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyIntervals",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyReverseSign",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyStructureTimeDep",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyTimeDep",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyVersionDep",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalMaintenance",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalCreation",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalCreationByReference",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalUpdate",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalCopy",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalDeletion",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalSaving",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalActivation",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalExternalDimension",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalIntervals",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalReverseSign",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalStructureTimeDep",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalTimeDep",a);f.QInAMdDimProperties.importHierarchyProperties(d,"HierarchyLocalVersionDep",a);}var b=f.PrUtils.getStructureProperty(i,"MasterDataProperties");if(f.notNull(b)){var m=f.PrUtils.getBooleanProperty(b,"MasterDataMaintenance");if(f.notNull(m)){d.addNameValuePair(f.XNameValuePair.create("MasterDataMaintenance",f.XBoolean.convertToString(m.getBoolean())));}}};f.QInAMdDimProperties.importHierarchyProperties=function(d,p,i){var b=f.PrUtils.getBooleanProperty(i,p);if(f.notNull(b)){d.addNameValuePair(f.XNameValuePair.create(p,f.XBoolean.convertToString(b.getBoolean())));}};f.QInAMdDimProperties.prototype.getComponentType=function(){return null;};f.QInAMdDimProperties.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdDimProperties.importMdNameValuePairs(a,m);return m;};f.QInAMdDimProperties.prototype.exportComponentWithStructure=function(e,m,i,a){return i;};f.QInAMdDimension=function(){};f.QInAMdDimension.prototype=new f.QInAComponentMetadata();f.QInAMdDimension.prototype._ff_c="QInAMdDimension";f.QInAMdDimension.importDimensionGroups=function(i,d){var a=i.getBooleanByKeyExt("IsDimensionGroup",false);d.setIsGroupingDimension(a);var b=f.PrUtils.getListProperty(i,"DimensionGroups");var l=f.PrUtils.getListSize(b,0);for(var j=0;j<l;j++){var c=f.PrUtils.getStringElement(b,j);if(f.notNull(c)){d.addGroupingDimension(c.getString());}}};f.QInAMdDimension.importDimensionGroupNames=function(i){var d=f.PrUtils.getListProperty(i,"DimensionGroups");var l=f.PrUtils.getListSize(d,0);if(l===0){return null;}var a=f.XStringBuffer.create();for(var j=0;j<l;j++){var b=f.PrUtils.getStringElement(d,j);if(f.notNull(b)){a.append(b.getString());}}return a.toString();};f.QInAMdDimension.exportDimensionGroup=function(i,d){if(d.isGroupingDimension()){i.putBoolean("IsDimensionGroup",true);}var g=d.getGroupingDimensionNames();if(g.hasElements()){var a=i.putNewList("DimensionGroups");var l=g.size();for(var j=0;j<l;j++){a.addString(g.get(j));}}};f.QInAMdDimension.importDimensionFlags=function(i,d,a,b){a.setId(b.getIntegerByKeyExt("ID",0));a.setExternalName(b.getStringByKey("NameExternal"));a.setSupportsLowerCase(f.PrUtils.getBooleanValueProperty(b,"LowercaseSupported",false));a.setIsOwnerDimension(b.getBooleanByKeyExt("IsOwnerDimension",false));a.setIsPrivate(b.getBooleanByKeyExt("Private",false));a.setSupportsCumulative(b.getBooleanByKeyExt("SupportsCummulative",false));var s=f.PrUtils.getBooleanValueProperty(b,"MultipleValues",true);var c=a.getFilterCapabilitiesBase();c.setSupportsMultipleValues(s);a.setCanBeAggregated(b.getBooleanByKeyExt("CanBeAggregated",true));a.setIsHierarchyMandatory(b.getBooleanByKeyExt("IsHierarchyMandatory",false));if(!a.getDimensionType().isTypeOf(f.DimensionType.ABSTRACT_STRUCTURE)){if(i.getSession().hasFeature(f.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)){a.setHasCheckTable(!i.isAbap(d)||b.getBooleanByKeyExt("HasCheckTable",false));}else{a.setHasCheckTable(b.getBooleanByKeyExt("HasCheckTable",true));}}};f.QInAMdDimension.exportDimensionFlags=function(e,i,d){i.putString("Description",d.getText());i.putString("NameExternal",d.getExternalName());if(d.getId()!==0){i.putInteger("ID",d.getId());}i.putBoolean("LowercaseSupported",d.supportsLowerCase());i.putBoolean("IsOwnerDimension",d.isOwnerDimension());i.putBoolean("Private",d.isPrivate());i.putBoolean("SupportsCummulative",d.supportsCumulative());var s=d.getFilterCapabilities();i.putBoolean("MultipleValues",s.supportsMultipleValues());i.putBoolean("CanBeAggregated",d.canBeAggregated());i.putBoolean("IsHierarchyMandatory",d.isHierarchyMandatory());if(e.isAbap(d)&&!d.getDimensionType().isTypeOf(f.DimensionType.ABSTRACT_STRUCTURE)){var h=d.getHasCheckTable();if(e.getSession().hasFeature(f.FeatureToggleOlap.HAS_CHECK_TABLE_DEFAULT_FALSE)&&h){i.putBoolean("HasCheckTable",true);}else if(!h){i.putBoolean("HasCheckTable",false);}}};f.QInAMdDimension.importAxesConstraints=function(d,i){var a=i.getListByKey("AxisConstraints");if(f.PrUtils.isListEmpty(a)){d.addSupportedAxis(f.AxisType.FREE);d.addSupportedAxis(f.AxisType.ROWS);d.addSupportedAxis(f.AxisType.COLUMNS);}else{var s=a.size();for(var b=0;b<s;b++){d.addSupportedAxis(f.QInAConverter.lookupAxisType(a.getStringAt(b)));}}};f.QInAMdDimension.exportAxesConstraints=function(i,d){var s=d.getSupportedAxesTypes().getIterator();var a=i.putNewList("AxisConstraints");while(s.hasNext()){a.addString(s.next().getName());}f.XObjectExt.release(s);};f.QInAMdDimension.importKeyAttributesNames=function(d,c,i){var a=i.getListByKey("KeyAttributes");if(f.notNull(a)&&f.notNull(c)&&c.supportsDimensionKeyAttributes()){var k=f.XListOfString.create();var b=a.size();for(var e=0;e<b;e++){var g=a.getStringAt(e);if(f.XStringUtils.isNotNullAndNotEmpty(g)){k.add(g);}}d.setKeyAttributesNames(k);}};f.QInAMdDimension.importDimensionReadModes=function(q,d,i){var r=d.getReadModeManagerBase();if(f.notNull(q)){f.QInAMdDimension.importMdReadModeSettings(i,r,f.QContextType.RESULT_SET,"SupportedResultSetReadModes","SupportedResultSetMemberReadModes","ResultSetDefaultReadMode","DefaultResultSetReadMode","ResultSetMemberDefaultReadMode");}f.QInAMdDimension.importMdReadModeSettings(i,r,f.QContextType.VARIABLE,"SupportedVariableReadModes",null,"DefaultVariableReadMode",null,null);f.QInAMdDimension.importMdReadModeSettings(i,r,f.QContextType.SELECTOR,"SupportedSelectorReadModes",null,"SelectorDefaultReadMode","DefaultSelectorReadMode",null);};f.QInAMdDimension.addSupportedReadModes=function(s,r,c){var a=s.size();for(var i=0;i<a;i++){var b=f.QInAConverter.lookupReadMode(s.getStringAt(i));if(f.notNull(b)){r.addSupportedReadMode(c,b);}}};f.QInAMdDimension.setDefaultReadmode=function(i,r,c,d,a,b){var e=i.getStringByKey(d);if(f.isNull(e)&&f.notNull(a)){e=i.getStringByKey(a);}if(f.isNull(e)&&f.notNull(b)){e=i.getStringByKey(b);}if(f.notNull(e)){var g=f.QInAConverter.lookupReadMode(e);if(f.notNull(g)){r.setReadModeDefault(c,g,true);}}};f.QInAMdDimension.importMdReadModeSettings=function(i,r,c,s,a,d,b,e){var g=i.getListByKey(s);if(f.isNull(g)&&f.notNull(a)){g=i.getListByKey(a);}if(f.PrUtils.isListEmpty(g)){r.addSupportedReadMode(c,f.QMemberReadMode.BOOKED);r.addSupportedReadMode(c,f.QMemberReadMode.MASTER);r.setReadModeDefault(c,f.QMemberReadMode.BOOKED,false);}else{f.QInAMdDimension.addSupportedReadModes(g,r,c);f.QInAMdDimension.setDefaultReadmode(i,r,c,d,b,e);}};f.QInAMdDimension.exportDimensionReadModes=function(e,i,d){if(e.isAbap(d)){f.QInAMdDimension.exportMdSupportedReadModes(d,f.QContextType.RESULT_SET,i,"SupportedResultSetReadModes","ResultSetDefaultReadMode");f.QInAMdDimension.exportMdSupportedReadModes(d,f.QContextType.VARIABLE,i,"SupportedVariableReadModes","DefaultVariableReadMode");}else{f.QInAMdDimension.exportMdSupportedReadModes(d,f.QContextType.RESULT_SET,i,"SupportedResultSetMemberReadModes","ResultSetDefaultReadMode");}f.QInAMdDimension.exportMdSupportedReadModes(d,f.QContextType.SELECTOR,i,"SupportedSelectorReadModes","SelectorDefaultReadMode");};f.QInAMdDimension.exportMdSupportedReadModes=function(d,c,i,a,b){if(!d.hasReadModeDefault(c)){return;}var s=f.XCollectionUtils.createListOfNames(d.getSupportedReadModes(c));s.sortByDirection(f.XSortDirection.ASCENDING);var e=i.putNewList(a);e.addAllStrings(s);var r=d.getReadModeDefault(c);if(f.notNull(r)){i.putString(b,f.QInAConverter.lookupReadModeInA(r));}};f.QInAMdDimension.exportMdSupportedSortTypes=function(e,a,d){var s=d.getMetadata().getSupportedSortTypes();if(f.notNull(s)&&e.capabilities.supportsExtendedSort()){var b=a.putNewList("ExtendedSortTypes");var k=s.getKeysAsReadOnlyListOfString();var c=k.size();for(var i=0;i<c;i++){var g=s.getByKey(k.get(i));b.addString(f.QInAConverter.lookupSortTypeInA(g));}}};f.QInAMdDimension.prototype.getComponentType=function(){return f.OlapComponentType.ABSTRACT_DIMENSION;};f.QInAMdDimension.prototype.newModelComponent=function(a,o,p,c){var m=p;if(f.isNull(m)){m=c.getQueryModel();}return f.QDimension._create(c,m);};f.QInAMdDimension.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=m;var e=d.getModelCapabilities();var g=b.getStringByKey("Name");var h=b.getIntegerByKeyExt("DimensionType",3);var j=f.QInAConverter.lookupDimensionType(h);if(j===f.DimensionType.CALCULATED_DIMENSION){d=f.QCalculatedDimension._createCalculatedDimension(c,p,g);}else if(j===f.DimensionType.FORMULA_CALCULATED_DIMENSION){d=f.QFormulaCalculatedDimension._createFormulaCalculatedDimension(c,g);f.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(a,b,d,p,c);}d.setName(g);d.setText(b.getStringByKey("Description"));var q=d.getQueryModel();var k=f.notNull(q);var l=f.QInAMdDimension.importDimensionGroupNames(b);var n;if(f.notNull(a.m_cacheKey)){n=f.QCacheKey.createCopyExt(a.m_cacheKey,g,null,l);}else{n=f.QCacheKey.createByContextForDimension(c,g,l);}var o=h<-1;var r=a.getApplication().getOlapEnvironment();var s=r.getDimensionMetadataByKey(n);if(f.isNull(s)||j===f.DimensionType.DIMENSION_INCOMPLETE){if(o){s=d.getMetadataBase();}else{s=f.QDimensionMetadata.create(n);}s.setDimensionType(j);f.QInAMdDimension.importKeyAttributesNames(s,e,b);var t=b.getIntegerByKeyExt("Visibility",-1);if(t!==-1){s.setVisibility(f.DimensionVisibility._getByInaCode(t));}var u=b.getStringByKey("DefaultMember");if(f.notNull(u)){s.setDefaultMemberValue(u);}f.QInAMdDimension.importDimensionGroups(b,s);s.setAttributeViewName(b.getStringByKeyExt("ViewAttributes",null));if(a.capabilities.supportsCustomDimensionMemberExecutionStep()&&(s.isStructure()||s.getDimensionType()===f.DimensionType.ACCOUNT)){s.setSupportsCalculatedBeforeAggregation(true);}s.setEnforceDynamicValue(b.getBooleanByKeyExt("EnforceDynamicValue",false));var v=f.QInAConverter.lookupValueType(b.getStringByKey("DataType"));if(v!==f.XValueType.UNSUPPORTED){s.setValueType(v);}f.QInAMdDimension.importDimensionFlags(a,d,s,b);if(k){f.QInAMdDimension.importAxesConstraints(s,b);var w=b.getStringByKey("AxisDefault");if(f.XStringUtils.isNullOrEmpty(w)){w=b.getStringByKey("Axis");}var x;if(f.isNull(w)){x=f.AxisType.FREE;}else{x=f.QInAConverter.lookupAxisType(w);}if(j!==f.DimensionType.DIMENSION_INCOMPLETE&&!s.supportsAxis(x)){var y=s.getSupportedAxesTypes();var z=y.getIterator();if(z.hasNext()){x=z.next();}f.XObjectExt.release(z);}s.setDefaultAxisType(x);}if(!o){r.setDimensionMetadata(s);}var A=b.getListByKey("ExtendedSortTypes");if(a.capabilities.supportsExtendedSort()&&f.notNull(A)){var B=f.XSetOfNameObject.create();var C=A.size();for(var i=0;i<C;i++){var D=f.QInAConverter.lookupSortType(A.getStringAt(i));if(f.notNull(D)){B.add(D);}}s.setSupportedSortTypes(B);}}if(!o){d.setMetadata(s);}d.setDimensionType(j);if(!a.capabilities.supportsExtendedSort()&&k&&!a.isVirtualInA(q)){if(!d.isMeasureStructure()){var E=q.getSortingManagerBase();E.addSupportedSortType(f.SortType.FIELD);E.addSupportedSortType(f.SortType.MEMBER_KEY);E.addSupportedSortType(f.SortType.MEMBER_TEXT);}}f.QInAMdFieldsList.importMd(a,b,d);f.QInAMdFieldsAttributes.importMd(d,b);f.QInAMdFieldsRoles.importMd(a,b,d);f.QInAMdFilterCapability.updateFilterCapabilities(d);f.QInAMdFieldsResultSet.importMd(a,b,d);f.QInAMdDimMembers.importMd(a,d,b);f.QInAMdDimension.importDimensionReadModes(q,d,b);f.QInAMdHierarchy.importMdHierarchy(a,b,d);f.QInAMdDimProperties.importMdNameValuePairs(b,d);return d;};f.QInAMdDimension.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var b=d.getName();i.putString("Name",b);var c=d.getVisibility();if(f.notNull(c)){i.putInteger("Visibility",c._getInaCode());}var g=d.getDefaultMemberValue();if(f.XStringUtils.isNotNullAndNotEmpty(g)){i.putString("DefaultMember",g);}var h=f.QInAConverter.lookupDimensionTypeInA(d.getDimensionType());i.putInteger("DimensionType",h);i.putStringNotNull("ViewAttributes",d.getAttributeViewName());var j=d.getDefaultAxisType();var k=f.QInAConverter.lookupAxisTypeInA(j);i.putString("AxisDefault",k);f.QInAMdDimension.exportDimensionFlags(e,i,d);f.QInAMdDimMembers.exportMd(e,i,d);if(d.getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){f.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(e,i,d);}else{if(!d.getDimensionType().isTypeOf(f.DimensionType.CALCULATED_DIMENSION)){f.QInAMdFieldsRoles.exportMd(i,d);}f.QInAMdFieldsList.exportMd(e,i,d);f.QInAMdFieldsResultSet.exportMd(i,d);f.QInAMdFieldsAttributes.exportMd(i,d);}f.QInAMdDimension.exportDimensionGroup(i,d);f.QInAMdHierarchy.exportMdHierarchy(e,i,d);f.QInAMdDimension.exportAxesConstraints(i,d);f.QInAMdDimension.exportDimensionReadModes(e,i,d);f.QInAMdDimension.exportMdSupportedSortTypes(e,i,d);i.putBoolean("EnforceDynamicValue",d.isEnforcedDynamicValue());i.putStringNotNull("DataType",f.QInAConverter.lookupValueTypeInA(d.getValueType()));return i;};f.QInAMdDrillManager=function(){};f.QInAMdDrillManager.prototype=new f.QInAComponentMetadata();f.QInAMdDrillManager.prototype._ff_c="QInAMdDrillManager";f.QInAMdDrillManager.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_MANAGER;};f.QInAMdDrillManager.prototype.newModelComponent=function(a,o,p,c){return f.QFactory.createDrillManager(c);};f.QInAMdDrillManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=i.capabilities.supportsHierarchyNavCounter();if(f.notNull(a)){s=a.getBooleanByKeyExt("SupportsHierNavCounter",s);}var d=m;d.setSupportsDrillCounter(s);return d;};f.QInAMdDrillManager.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;i.putBoolean("SupportsHierNavCounter",d.supportsDrillCounter());return i;};f.QInAMdExceptionAggregationManager=function(){};f.QInAMdExceptionAggregationManager.prototype=new f.QInAComponentMetadata();f.QInAMdExceptionAggregationManager.prototype._ff_c="QInAMdExceptionAggregationManager";f.QInAMdExceptionAggregationManager.prototype.getComponentType=function(){return f.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER;};f.QInAMdExceptionAggregationManager.prototype.importComponentWithStructure=function(a,b,m,p,c){var e=m;if(f.notNull(b)&&f.notNull(e)){e._clear();var d=b.getStructureByKey("ExceptionAggregations");if(f.notNull(d)){var g=d.getListByKey("DimensionSets");if(!f.PrUtils.isListEmpty(g)){var h=g.size();for(var i=0;i<h;i++){this._importDimensionSet(e,g.get(i).asStructure());}}var k=d.getListByKey("AggregationGroups");if(!f.PrUtils.isListEmpty(k)){var l=k.size();for(var j=0;j<l;j++){this._importExceptionAggregationGroup(e,k.get(j).asStructure());}}}else{e._setupDefaultConfigurations();}}return e;};f.QInAMdExceptionAggregationManager.prototype._importDimensionSet=function(e,i){e._addDimensionSet(i.getStringByKey("Name"),f.PrUtils.asListOfString(i.getListByKey("Dimensions")));};f.QInAMdExceptionAggregationManager.prototype._importExceptionAggregationGroup=function(e,a){var g=a.getStringByKey("Name");var s=a.getStringByKeyExt("SupportedDimensions","");var m=a.getIntegerByKeyExt("MaxNumberOfDimensions",-1);var b=a.getListByKey("AggregationMap");var c=b.size();for(var i=0;i<c;i++){var d=b.getStructureAt(i);var h=d.getIntegerByKeyExt("MembersCode",e._getDefaultMembersCode());e._addExceptionAggregationGroup(f.QExceptionAggregationGroup._create(e,g,h,m,s,f.PrUtils.asListOfString(d.getListByKey("AggregationTypes"))));}};f.QInAMdExceptionAggregationManager.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;if(f.notNull(c)){var d=a.putNewStructure("ExceptionAggregations");var g=d.putNewList("DimensionSets");var h=c._getDimensionSets();var k=h.getKeysAsReadOnlyListOfString();var s=k.size();for(var i=0;i<s;i++){var l=k.get(i);g.add(this._exportDimensionSet(l,h.getByKey(l)));}var n=d.putNewList("AggregationGroups");var o=c._getExceptionAggregationGroups().getKeysAsReadOnlyListOfString();var p=o.size();var q=c._getExceptionAggregationGroups();for(var j=0;j<p;j++){n.add(this._exportExceptionAggregationGroup(q.get(j)));}}return a;};f.QInAMdExceptionAggregationManager.prototype._exportDimensionSet=function(s,d){var a=d.size();var b=f.PrFactory.createStructure();b.putString("Name",s);var c=b.putNewList("Dimensions");for(var i=0;i<a;i++){c.add(f.PrFactory.createString(d.get(i)));}return b;};f.QInAMdExceptionAggregationManager.prototype._exportExceptionAggregationGroup=function(e){var a=f.PrFactory.createStructure();a.putString("Name",e.getName());a.putString("SupportedDimensions",e._getSupportedDimensionSetName());a.putInteger("MaxNumberOfDimensions",e._getNumberOfAllowedDimensions());var b=f.PrFactory.createStructure();b.putInteger("MembersCode",e._getMembersCode());var c=b.putNewList("AggregationTypes");var s=e._getSupportedAggregationTypeNames();var d=s.size();for(var i=0;i<d;i++){c.add(f.PrFactory.createString(s.get(i)));}var g=a.putNewList("AggregationMap");g.add(b);return a;};f.QInAMdField=function(){};f.QInAMdField.prototype=new f.QInAComponentMetadata();f.QInAMdField.prototype._ff_c="QInAMdField";f.QInAMdField.prototype.getComponentType=function(){return f.OlapComponentType.FIELD;};f.QInAMdField.prototype.newModelComponent=function(a,o,p,c){return f.QField._createField(c,p,null);};f.QInAMdField.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=p;var e=a.getStringByKey("Name");var g=d.getDimensionType().isTypeOf(f.DimensionType.CALCULATED_DIMENSION);if(g){var h;if(d.getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){h=f.QFieldFormulaCalc._createFormulaCalcField(c,d,null,e);var j=a.getStructureByKey("Formula");if(f.notNull(j)){var n=f.QInAFormulaMeasure.importFormulaMeasure(i,d,a.getStructureByKey("Formula"),null,c);h.setFormulaItem(n);}}else{h=f.QFieldCalcDim._createFieldCalcDim(c,d,f.PresentationType.UNDEFINED,e);}this.updatePresentationType(i,a,h.getMetadataBase());this.updateValueType(a,h.getMetadataBase());d.getFieldContainerBase().addField(h);return h;}b.setName(e);b.setText(a.getStringByKey("Description"));b.setObtainability(f.ObtainabilityType.lookup(a.getStringByKey("Obtainability")));b.setDisplayFormat(a.getStringByKey("DisplayFormat"));var k=a.getStringByKey("TextTransformation");if(f.notNull(k)){b.setTextTransformation(f.QInAConverter.lookupTextTransformation(k));}var l=a.getStringByKey("DimensionName");var o;if(f.notNull(i.m_cacheKey)){o=f.QCacheKey.createCopyExt(i.m_cacheKey,e,l,null);}else{o=f.QFactory.createCacheKeyForField(c,e,l);}var q=i.getApplication().getOlapEnvironment();var r=q.getFieldMetadataByKey(o);var s=c.getQueryModel();if(f.isNull(r)){r=f.QFieldMetadata.create(o);r.setAliasName(a.getStringByKey("AliasName"));r.setMappedColumnName(a.getStringByKeyExt("MappedColumn",null));r.setSqlType(a.getStringByKeyExt("SQLType",null));r.setSemanticType(a.getStringByKeyExt("SemanticType",null));var t=this.updateValueType(a,r);if(t===f.XValueType.UNSUPPORTED){var u=b.getDimension().getName();if(s.getUniversalDisplayHierarchies().getByName(u)!==null){r.setValueType(f.XValueType.STRING);}}if(!this.updatePresentationType(i,a,r)){return null;}r.setUpperBound(a.getStringByKey("UpperBound"));r.setLowerBound(a.getStringByKey("LowerBound"));r.setIsFilterable(a.getBooleanByKeyExt("IsFilterable",true));r.setIsLowerCaseEnabled(a.getBooleanByKeyExt("LowerCaseEnabled",false));r.setIsVirtualDescription(a.getBooleanByKeyExt("IsVirtualDescription",false));r.setInitialValue(a.getStringByKeyExt("InitialValue",null));r.setLength(a.getIntegerByKeyExt("Length",0));r.setDecimals(a.getIntegerByKeyExt("Decimals",0));r.setFixedLength(a.getIntegerByKeyExt("FixedLength",-1));var v=a.getIntegerByKeyExt("FractDigits",0);if(v!==0){r.setPrecision(v);}r.setIsDisplayAttributeField(a.getBooleanByKeyExt("IsDisplayAttribute",false));r.setAttributeType(a.getStringByKeyExt("AttributeType",null));r.setNavigationalAttributeDescription(a.getStringByKeyExt("NavigationalAttributeDescription",null));this.importDependencies(a,r);var w=a.getStringByKey("UsageType");if(f.notNull(w)){r.setUsageType(f.FieldUsageType.lookup(w));}var x=a.getStringByKeyExt("InfoobjType",null);if(f.notNull(x)){var y=f.QInAConverter.lookupInfoObjectType(x);r.setInfoObjectType(y);}var z=a.getStringByKeyExt("VisibilityType",null);if(f.notNull(z)){var A=f.QInAConverter.lookupVisibilityType(z);r.setVisibilityType(A);}var B=d.getMetadataBase();r.setDimensionMetadata(B);var C=B.getFilterCapabilitiesBase();var D=f.QInAMdFilterCapability.importMd(i,a,b,C,c);if(f.notNull(D)){C.addFilterCapability(D);}r.setMimeType(a.getStringByKey("MIMEType"));q.setFieldMetadata(r);}if(f.notNull(s)&&s.getSystemType().isTypeOf(f.SystemType.ABAP)){if(!this.updatePresentationType(i,a,r)){return null;}}b.setMetadata(r);return b;};f.QInAMdField.prototype.updateValueType=function(i,m){var a=i.getStringByKey("DataType");var v=f.QInAConverter.lookupValueType(a);m.setValueType(v);return v;};f.QInAMdField.prototype.updatePresentationType=function(i,a,b){var c=a.getStringByKey("PresentationType");var p=f.QInAConverter.lookupPresentationType(c);if(p===f.PresentationType.WHY_FOUND&&f.QInAConverter.lookupValueType(a.getStringByKey("DataType"))!==f.XValueType.PROPERTIES){i.addError(f.ErrorCodes.INVALID_STATE,"Why found has not properties type");return false;}else{b.setPresentationType(p);return true;}};f.QInAMdField.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("AliasName",b.getAliasName());i.putString("Description",b.getText());i.putString("DataType",f.QInAConverter.lookupValueTypeInA(b.getValueType()));i.putString("PresentationType",f.QInAConverter.lookupPresentationTypeInA(b.getPresentationType()));var o=b.getObtainability();i.putString("Obtainability",f.isNull(o)?null:o.getName());i.putBoolean("IsFilterable",b.isFilterable());i.putBoolean("IsVirtualDescription",b.isVirtualDescription());i.putBoolean("LowerCaseEnabled",b.isLowerCaseEnabled());i.putString("InitialValue",b.getInitialValue());i.putInteger("Length",b.getLength());i.putInteger("Decimals",b.getDecimals());i.putBoolean("IsDisplayAttribute",b.isDisplayAttributeField());i.putString("MappedColumn",b.getMappedColumnName());i.putString("AttributeType",b.getAttributeType());i.putString("NavigationalAttributeDescription",b.getNavigationalAttributeDescription());i.putStringNotNull("SQLType",b.getSqlType());i.putStringNotNull("SemanticType",b.getSemanticType());i.putString("UsageType",b.getUsageType().getName());i.putStringNotNull("LowerBound",b.getLowerBound());i.putStringNotNull("UpperBound",b.getUpperBound());if(b.getPrecision()!==0){i.putInteger("FractDigits",b.getPrecision());}var c=b.getInfoObjectType();if(f.notNull(c)){i.putString("InfoobjType",f.QInAConverter.lookupInfoObjectTypeInA(c));}var v=b.getVisibilityType();if(f.notNull(v)){i.putString("VisibilityType",f.QInAConverter.lookupVisibilityTypeInA(v));}var t=b.getTextTransformation();if(f.notNull(t)){i.putString("TextTransformation",f.QInAConverter.lookupTextTransformationInA(t));}if(!e.mode.isTypeOf(f.QModelFormat.INA_DATA_BLENDING_SOURCE)){i.putStringNotNull("DisplayFormat",b.getDisplayFormat());}i.putStringNotNull("MIMEType",b.getMimeType());if(b.getDimension().getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var d=b;if(d.getFormulaItem()!==null){f.QInAFormulaMeasure.exportFormulaItem(e,d.getFormulaItem(),i.putNewStructure("Formula"),d.getQueryModel());}}var g=i.putNewList("DependentAttributes");g.addAllStrings(b.getDependencyFields());var s=b.getDimension().getFilterCapabilities();var h=s.getFilterCapabilitiesByField(b);f.QInAMdFilterCapability.exportMd(e,h,i,b.getQueryModel());return i;};f.QInAMdField.prototype.importDependencies=function(a,m){if(f.notNull(a)){var b=a.getListByKey("DependentAttributes");if(f.notNull(b)){var d=b.size();for(var i=0;i<d;i++){var c=b.getStringAt(i);if(f.notNull(c)){m.addDependencyField(c);}}}}};f.QInAMdFieldsAttributes=function(){};f.QInAMdFieldsAttributes.prototype=new f.QInAComponentMetadata();f.QInAMdFieldsAttributes.prototype._ff_c="QInAMdFieldsAttributes";f.QInAMdFieldsAttributes.importMd=function(d,i){var u=d.getUniversalDisplayHierarchy();var a=f.isNull(u)?i.getStructureByKey("AttributeHierarchy"):i;if(f.notNull(a)){var r=f.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(a,d,u);if(f.notNull(r)){d.getMetadataBase().addSupportedFieldLayoutType(f.FieldLayoutType.ATTRIBUTE_BASED);d.getAttributeContainerBase().setMainAttribute(r);}}};f.QInAMdFieldsAttributes.importMdAttributeHierarchyNode=function(i,d,u){if(f.isNull(i)){return null;}var a=f.QAttribute.createAttribute(d.getContext(),d);a.setName(i.getStringByKey("Name"));a.setText(i.getStringByKey("Description"));var b=d.getFields();var c=b.getByKey(i.getStringByKey("DefaultKeyAttribute"));if(f.notNull(u)){c=u.getKeyField(d,i.getListByKey("Attributes"),"IsKey","Name");}if(f.notNull(c)){a.setFlatKeyField(c);}var e=b.getByKey(i.getStringByKey("DefaultDisplayKeyAttribute"));if(f.notNull(u)){e=u.getDisplayKeyField(d);}if(f.notNull(e)){a.setFlatDisplayKeyField(e);}var g=b.getByKey(i.getStringByKey("DefaultTextAttribute"));if(f.notNull(u)){g=u.getTextField(d);}if(f.notNull(g)){a.setFlatTextField(g);}var h=b.getByKey(i.getStringByKey("HierarchyKeyAttribute"));if(f.notNull(h)){a.setHierachyKeyField(h);f.QInAMdFieldsAttributes.setFieldUsage(c,h);}var j=b.getByKey(i.getStringByKey("HierarchyDisplayKeyAttribute"));if(f.notNull(j)){a.setHierarchyDisplayKeyField(j);f.QInAMdFieldsAttributes.setFieldUsage(e,j);}var l=b.getByKey(i.getStringByKey("HierarchyTextAttribute"));if(f.notNull(l)){a.setHierarchyTextField(l);f.QInAMdFieldsAttributes.setFieldUsage(g,l);}var m=b.getByKey(i.getStringByKey("HierarchyNavigationAttribute"));if(f.notNull(m)){a.setHierachyNavigationField(m);f.QInAMdFieldsAttributes.setFieldUsage(null,m);}f.QInAMdFieldsAttributes.importAttributeFields(a,b,i);d.getAttributeContainerBase().addAttributeInternal(a);var n=i.getListByKey("Children");if(f.notNull(n)){var o=n.size();for(var k=0;k<o;k++){var p=f.QInAMdFieldsAttributes.importMdAttributeHierarchyNode(n.getStructureAt(k),d,u);a.addChildAttribute(p);}}return a;};f.QInAMdFieldsAttributes.setFieldUsage=function(a,h){if(h!==a){if(f.notNull(a)){a.getMetadataBase().setUsageType(f.FieldUsageType.FLAT);}if(f.notNull(h)){h.getMetadataBase().setUsageType(f.FieldUsageType.HIERARCHY);}}else{if(f.notNull(a)){a.getMetadataBase().setUsageType(f.FieldUsageType.ALL);}}};f.QInAMdFieldsAttributes.importAttributeFields=function(a,b,i){var c=i.getListByKey("AttributeNames");var d=i.getListByKey("DefaultResultSetAttributes");if(f.notNull(c)&&f.notNull(d)){var s=c.size();var e;var g;for(e=0;e<s;e++){g=b.getByKey(c.getStringAt(e));if(f.notNull(g)){a.addFieldInternal(g);}}s=d.size();var h=f.XHashSetOfString.create();for(e=0;e<s;e++){var j=d.getStringAt(e);if(!h.contains(j)){h.add(j);g=a.getFieldByName(j);if(f.notNull(g)){a.addDefaultResultSetField(g);}}}}};f.QInAMdFieldsAttributes.exportMd=function(i,d){var a=d.getAttributeContainer();var m=a.getMainAttribute();if(f.notNull(m)){var b=i.putNewStructure("AttributeHierarchy");f.QInAMdFieldsAttributes.exportMdAttribute(m,b);}i.putString("FieldLayoutType",f.QInAConverter.lookupFieldLayoutTypeInA(d.getFieldLayoutType()));};f.QInAMdFieldsAttributes.exportMdAttribute=function(a,b){b.putString("Name",a.getName());b.putString("Description",a.getText());var m=a.getKeyField();f.QInAExportUtil.setNameIfNotNull(b,"DefaultKeyAttribute",m);var c=a.getTextField();f.QInAExportUtil.setNameIfNotNull(b,"DefaultTextAttribute",c);b.put("AttributeNames",f.QInAMdFieldsAttributes.exportFieldNames(a.getFields()));b.put("DefaultResultSetAttributes",f.QInAMdFieldsAttributes.exportFieldNames(a.getResultSetFields()));var d=a.getChildAttributes();var e=b.putNewList("Children");if(f.notNull(d)){var g=d.size();for(var i=0;i<g;i++){f.QInAMdFieldsAttributes.exportMdAttribute(d.get(i),e.addNewStructure());}}};f.QInAMdFieldsAttributes.exportFieldNames=function(a){var i=f.PrFactory.createList();var s=a.size();for(var m=0;m<s;m++){i.addString(a.get(m).getName());}return i;};f.QInAMdFieldsAttributes.prototype.getComponentType=function(){return null;};f.QInAMdFieldsAttributes.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;f.QInAMdFieldsAttributes.importMd(d,a);return m;};f.QInAMdFieldsAttributes.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdFieldsAttributes.exportMd(i,m);return i;};f.QInAMdFieldsList=function(){};f.QInAMdFieldsList.prototype=new f.QInAComponentMetadata();f.QInAMdFieldsList.prototype._ff_c="QInAMdFieldsList";f.QInAMdFieldsList.importMd=function(i,a,d){var b=a.getListByKey("AttributesMd");if(f.isNull(b)){b=a.getListByKey("Attributes");}if(f.notNull(b)){var l=b.size();var c=d.getFieldContainerBase();for(var e=0;e<l;e++){var g=b.getStructureAt(e);var h=i.importComponent(f.OlapComponentType.FIELD,g,null,d,d);if(f.notNull(h)){c.addFieldInternal(h);}}}};f.QInAMdFieldsList.exportMd=function(e,a,d){var b=f.PrFactory.createList();var c=d.getFields();var l=c.size();for(var i=0;i<l;i++){b.add(e.exportComponent(f.OlapComponentType.FIELD,c.get(i),null,f.QImExFlag.DEFAULT_ALL));}a.put("AttributesMd",b);};f.QInAMdFieldsList.prototype.getComponentType=function(){return null;};f.QInAMdFieldsList.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;f.QInAMdFieldsList.importMd(i,a,d);return m;};f.QInAMdFieldsList.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdFieldsList.exportMd(e,i,m);return i;};f.QInAMdFieldsResultSet=function(){};f.QInAMdFieldsResultSet.prototype=new f.QInAComponentMetadata();f.QInAMdFieldsResultSet.prototype._ff_c="QInAMdFieldsResultSet";f.QInAMdFieldsResultSet.importMd=function(a,b,d){var c=b.getListByKey("DefaultResultSetAttributesMd");if(f.isNull(c)){c=b.getListByKey("DefaultResultSetAttributes");}var e=b.getListByKey("DefaultResultSetAttributeNodesMd");if(f.isNull(e)){e=b.getListByKey("DefaultResultSetAttributeNodes");}var g=b.getStringByKey("FieldLayoutType");var h=null;if(f.notNull(g)){h=f.QInAConverter.lookupFieldLayoutType(g);}if(f.isNull(h)){if(f.notNull(e)&&d.supportsFieldLayoutType(f.FieldLayoutType.ATTRIBUTE_BASED)){h=f.FieldLayoutType.ATTRIBUTE_BASED;}else{h=f.FieldLayoutType.FIELD_BASED;}}d.setFieldLayoutType(h);d.getMetadataBase().setDefaultFieldLayoutType(h);var r=d.getResultSetFields();var j=d.getSelectorFields();var l=d.getFieldContainerBase();if(f.notNull(c)){var n=f.XHashSetOfString.create();var o=c.size();for(var i=0;i<o;i++){var p=c.getStringAt(i);if(n.contains(p)){continue;}n.add(p);var q=d.getFieldByName(p);if(f.isNull(q)){a.addError(f.ErrorCodes.INVALID_PARAMETER,p);return;}l.addDefaultResultSetField(q);r.addInternal(q);j.addInternal(q);}}if(f.notNull(e)){if(d.supportsFieldLayoutType(f.FieldLayoutType.ATTRIBUTE_BASED)){var t=d.getAttributeContainerBase();var u=t.getMainAttribute();if(f.notNull(u)){var v=t.getResultSetAttributes();var w=t.getSelectorAttributes();if(h===f.FieldLayoutType.ATTRIBUTE_BASED){r.clear();j.clear();}var x=e.size();for(var k=0;k<x;k++){var y=t.getAttributeByName(e.getStringAt(k));if(f.notNull(y)){t.addDefaultResultSetAttribute(y);v.add(y);w.add(y);if(h===f.FieldLayoutType.ATTRIBUTE_BASED){var z=y.getResultSetFields();var A=z.size();for(var m=0;m<A;m++){var B=z.get(m);r.add(B);j.add(B);}}}}}}}var C=b.getBooleanByKeyExt("ResultSetFixedAttributes",false);l.setHasFixedResultSetFields(C);r.setIsFixed(C);j.setIsFixed(C);if(!b.containsKey("FieldLayoutType")){if(b.containsKey("DefaultResultSetAttributes")){l.clearDefaultResultSetFields();}else if(!b.containsKey("ResultSetFields")){if(d.supportsFieldLayoutType(f.FieldLayoutType.FIELD_BASED)){d.setFieldLayoutType(f.FieldLayoutType.FIELD_BASED);d.getMetadataBase().setDefaultFieldLayoutType(f.FieldLayoutType.FIELD_BASED);l.clearDefaultResultSetFields();var D=d.getResultSetFields();var E=D.size();for(var s=0;s<E;s++){l.addDefaultResultSetField(D.get(s));}}}}};f.QInAMdFieldsResultSet.exportMd=function(a,d){var b=a.putNewList("DefaultResultSetAttributesMd");var r=d.getDefaultResultSetFields();var c=r.size();for(var i=0;i<c;i++){b.addString(r.get(i).getName());}if(d.supportsFieldLayoutType(f.FieldLayoutType.ATTRIBUTE_BASED)){var e=d.getAttributeContainer();var g=e.getDefaultResultSetAttributes();var h=a.putNewList("DefaultResultSetAttributeNodesMd");var k=g.size();for(var j=0;j<k;j++){h.addString(g.get(j).getName());}}a.putBoolean("ResultSetFixedAttributes",d.hasFixedResultSetFields());};f.QInAMdFieldsResultSet.prototype.getComponentType=function(){return null;};f.QInAMdFieldsResultSet.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;f.QInAMdFieldsResultSet.importMd(i,a,d);return m;};f.QInAMdFieldsResultSet.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdFieldsResultSet.exportMd(i,m);return i;};f.QInAMdFieldsRoles=function(){};f.QInAMdFieldsRoles.prototype=new f.QInAComponentMetadata();f.QInAMdFieldsRoles.prototype._ff_c="QInAMdFieldsRoles";f.QInAMdFieldsRoles.getFieldBySuffix=function(s,d){var a=d.getFields();var b=a.size();for(var i=0;i<b;i++){var c=a.get(i);var e=f.XString.endsWith(c.getName(),s);if(e){return c;}}return null;};f.QInAMdFieldsRoles.importMd=function(i,a,d){var b=a.getStructureByKey("FieldDefaults");var c=f.isNull(b)?a:b;var e=d.getFieldByName(c.getStringByKey("KeyAttribute"));var g=d.getFieldByName(c.getStringByKey("TextAttribute"));var h=d.getFieldByName(c.getStringByKey("DisplayKeyAttribute"));var j=d.getFieldByName(c.getStringByKey("HierarchyKeyAttribute"));var k=d.getFieldByName(c.getStringByKey("HierarchyTextAttribute"));var l=d.getFieldByName(c.getStringByKey("HierarchyDisplayKeyAttribute"));var m=d.getFieldByName(c.getStringByKey("HierarchyPathAttribute"));var n=d.getFieldByName(c.getStringByKey("HierarchyNavigationAttribute"));if(f.isNull(n)){var o=c.getStructureByKey("AttributeHierarchy");if(f.notNull(o)){n=d.getFieldByName(o.getStringByKey("HierarchyNavigationAttribute"));}}var p=d.getFieldContainerBase();if(i.capabilities.supportsSpatialChoropleth()){p.setGeoShapeField(d.getFieldByName(c.getStringByKey("GeoShapeAttribute")));p.setGeoPointField(d.getFieldByName(c.getStringByKey("GeoPointAttribute")));p.setGeoLevelField(d.getFieldByName(c.getStringByKey("GeoLevelAttribute")));p.setGeoAreaNameField(d.getFieldByName(c.getStringByKey("TextAttribute")));}var q=null;if(f.isNull(b)){if(f.isNull(m)){if(!i.capabilities.supportsHierarchyPathPresentationType()){m=f.QInAMdFieldsRoles.getFieldBySuffix(".path",d);}else{m=d.getFirstFieldByType(f.PresentationType.HIERARCHY_PATH);}}if(i.capabilities.supportsCubeBlendingProperties()){q=f.QInAMdFieldsRoles.getFieldBySuffix(".cubeBlendingProperties",d);}var r=d.getAttributeContainer();var s=r.getMainAttribute();if(f.notNull(s)){e=s.getKeyField();h=s.getDisplayKeyField();g=s.getTextField();if(i.capabilities.supportsHierarchyAttHierFields()){j=s.getHierarchyKeyField();k=s.getHierarchyTextField();l=s.getHierarchyDisplayKeyField();}}if(d.getDimensionType().isTypeOf(f.DimensionType.ABSTRACT_STRUCTURE)){if(f.isNull(e)){e=d.getFirstFieldByType(f.PresentationType.KEY);}if(f.isNull(h)){h=d.getFirstFieldByType(f.PresentationType.DISPLAY_KEY);}if(f.isNull(g)){g=d.getFirstFieldByType(f.PresentationType.TEXT);}if(f.isNull(j)){var t=d.getFirstFieldByType(f.PresentationType.HIERARCHY_KEY);if(f.isNull(t)){j=e;}else{j=t;}}if(f.isNull(k)){k=d.getFirstFieldByType(f.PresentationType.HIERARCHY_TEXT);}if(f.isNull(l)){l=d.getFirstFieldByType(f.PresentationType.HIERARCHY_DISPLAY_KEY);}if(f.isNull(k)){k=g;}if(f.isNull(l)){l=h;}}var u=d.getUniversalDisplayHierarchy();if(f.notNull(u)){e=u.getKeyField(d,a.getListByKey("Attributes"),"IsKey","Name");h=u.getDisplayKeyField(d);g=u.getTextField(d);}}if(f.notNull(e)){e.getMetadataBase().setIsFlatKeyField(true);}if(f.notNull(g)){g.getMetadataBase().setIsFlatTextField(true);}if(f.notNull(m)){m.getMetadataBase().setIsHierarchyPathField(true);}if(f.notNull(j)){j.getMetadataBase().setIsHierarchyKeyField(true);}if(f.notNull(q)){q.getMetadataBase().setIsCubeBlendingPropertiesField(true);}if(f.notNull(n)){n.getMetadataBase().setIsHierarchyNavigationField(true);}p.setFlatKeyField(e);p.setFlatTextField(g);p.setFlatDisplayKeyField(h);p.setHierachyKeyField(j);p.setHierarchyTextField(k);p.setHierarchyDisplayKeyField(l);p.setHierarchyPathField(m);p.setHierachyNavigationField(n);p.setCubeBlendingPropertiesField(q);};f.QInAMdFieldsRoles.exportMd=function(i,d){var a=i.putNewStructure("FieldDefaults");f.QInAExportUtil.setNameIfNotNull(a,"KeyAttribute",d.getFlatKeyField());f.QInAExportUtil.setNameIfNotNull(a,"TextAttribute",d.getFlatTextField());f.QInAExportUtil.setNameIfNotNull(a,"DisplayKeyAttribute",d.getFlatDisplayKeyField());f.QInAExportUtil.setNameIfNotNull(a,"HierarchyKeyAttribute",d.getHierarchyKeyField());f.QInAExportUtil.setNameIfNotNull(a,"HierarchyTextAttribute",d.getHierarchyTextField());f.QInAExportUtil.setNameIfNotNull(a,"HierarchyDisplayKeyAttribute",d.getHierarchyDisplayKeyField());f.QInAExportUtil.setNameIfNotNull(a,"HierarchyPathAttribute",d.getHierarchyPathField());f.QInAExportUtil.setNameIfNotNull(a,"HierarchyNavigationAttribute",d.getHierarchyNavigationField());f.QInAExportUtil.setNameIfNotNull(a,"GeoShapeAttribute",d.getGeoShapeField());f.QInAExportUtil.setNameIfNotNull(a,"GeoPointAttribute",d.getGeoPointField());f.QInAExportUtil.setNameIfNotNull(a,"GeoLevelAttribute",d.getGeoLevelField());f.QInAExportUtil.setNameIfNotNull(a,"TextAttribute",d.getGeoAreaNameField());};f.QInAMdFieldsRoles.prototype.getComponentType=function(){return null;};f.QInAMdFieldsRoles.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdFieldsRoles.importMd(i,a,m);return m;};f.QInAMdFieldsRoles.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdFieldsRoles.exportMd(i,m);return i;};f.QInAMdFilterCapability=function(){};f.QInAMdFilterCapability.prototype=new f.QInAComponentMetadata();f.QInAMdFilterCapability.prototype._ff_c="QInAMdFilterCapability";f.QInAMdFilterCapability.importMd=function(i,a,b,p,c){var d=a.getStructureByKey("FilterCapability");var e;if(f.isNull(d)){e=a.getStringByKeyExt("ComparisonGroup",null);}else{e=d.getStringByKeyExt("ComparisonGroup",null);}var g=null;if(f.notNull(e)){var h=f.QFilterCapabilityGroup._createFilterCapabilityGroup(c,p,b);h.setGroup(f.QInAConverter.lookupComparisonGroup(e));g=h;}else if(f.notNull(d)&&d.hasElements()){var j=d.getStructureByKey("Comparison");if(f.isNull(j)){var m=f.XStringBuffer.create();m.append("Metadata warning: No filter capability found for field ");if(f.notNull(b)){m.append(b.getName());}i.addWarning(f.ErrorCodes.IMPORT_FILTER_CAPABILITY_NOT_FOUND,m.toString());}else{var k=f.QFilterCapability._createFilterCapability(c,p,b);g=k;f.QInAMdFilterCapability.importOperators(i,j,k,"Including",f.SetSign.INCLUDING);f.QInAMdFilterCapability.importOperators(i,j,k,"Excluding",f.SetSign.EXCLUDING);}}return g;};f.QInAMdFilterCapability.importOperators=function(a,b,c,d,s){var e=b.getListByKey(d);if(!f.PrUtils.isListEmpty(e)){c.addSupportedSetSign(s);var g=c.getModifiableSupportedComparisonOperators(s);var h=e.size();for(var i=0;i<h;i++){var j=e.getStringAt(i);if(f.notNull(j)){var k=f.QInAConverter.lookupComparison(j);if(f.isNull(k)){a.addWarning(f.ErrorCodes.IMPORT_FILTER_CAPABILITY_UNSUPPORTED_OPERATORS,f.XStringUtils.concatenate3("Metadata warning: Unsupported Comparison Operator '",j,"'!"));}else{g.add(k);}}}}};f.QInAMdFilterCapability.updateFilterCapabilities=function(d){var h=d.getHierarchyKeyField();if(f.notNull(h)&&!h.isFlatKeyField()){var a=d.getFilterCapabilities().getFilterCapabilitiesByField(h);if(f.notNull(a)&&a.isFilterCapabilityGroup()){var b=a;b.setGroup(f.QInAConverter.switchComparisonGroupToIncludeOnly(b.getGroup()));}}};f.QInAMdFilterCapability.exportMd=function(e,a,i,q){var b=f.PrFactory.createStructure();if(f.notNull(a)){if(a.getComponentType().isTypeOf(f.OlapComponentType.FILTER_CAPABILITY_GROUP)){var c=a;var d=f.QInAConverter.lookupComparisonGroupInA(c.getGroup());b.putString("ComparisonGroup",d);}else{var g=e.isAbap(q);var h=b.putNewStructure("Comparison");f.QInAMdFilterCapability.exportOperators(g,h,a,"Including",f.SetSign.INCLUDING);f.QInAMdFilterCapability.exportOperators(g,h,a,"Excluding",f.SetSign.EXCLUDING);}}if(f.notNull(i)){i.put("FilterCapability",b);}return b;};f.QInAMdFilterCapability.exportOperators=function(a,b,c,d,s){if(c.supportsSetSign(s)){var e=b.putNewList(d);var g=c.getSupportedComparisonOperators(s);var h=g.size();for(var i=0;i<h;i++){var j=g.get(i);var k;if(j===f.ComparisonOperator.NOT_BETWEEN&&a){k="NOTBETWEEN";}else{k=f.QInAConverter.lookupComparisonInA(j);}e.addString(k);}}};f.QInAMdFilterCapability.prototype.getComponentType=function(){return null;};f.QInAMdFilterCapability.prototype.importComponentWithStructure=function(i,a,m,p,c){return f.QInAMdFilterCapability.importMd(i,a,p,null,c);};f.QInAMdFilterCapability.prototype.exportComponentWithStructure=function(e,m,i,a){return f.QInAMdFilterCapability.exportMd(e,m,i,m.getQueryModel());};f.QInAMdGenericComponent=function(){};f.QInAMdGenericComponent.prototype=new f.QInAComponentMetadata();f.QInAMdGenericComponent.prototype._ff_c="QInAMdGenericComponent";f.QInAMdGenericComponent.prototype.getComponentType=function(){return f.OlapComponentType.OLAP;};f.QInAMdGenericComponent.prototype.importComponentWithStructure=function(i,a,m,p,c){return m;};f.QInAMdGenericComponent.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("Type",m.getComponentType().getName());return i;};f.QInAMdGenericComponent.prototype.extendCustom=function(e,m,i){var o=m.getOlapComponentType();var c=f.QInAConverter.lookupComponentTypeInA(o);if(f.notNull(c)){i.putString("CType",c);}return i;};f.QInAMdHierarchy=function(){};f.QInAMdHierarchy.prototype=new f.QInAComponentMetadata();f.QInAMdHierarchy.prototype._ff_c="QInAMdHierarchy";f.QInAMdHierarchy.importMdHierarchy=function(i,a,d){var h=d.getHierarchyManagerBase();var s=f.PrUtils.getBooleanValueProperty(a,"HierarchiesPossible",false);h.setSupportsHierarchy(s);var b=f.PrUtils.getStringValueProperty(a,"DefaultHierarchy","");var c=f.PrUtils.getBooleanValueProperty(a,"DisplayHierarchyFixInFilter",false);h.setDefaultHierarchyName(b);h.setNumberOfHierarchies(f.PrUtils.getIntegerValueProperty(a,"NumberOfHierarchies",0));f.QInAMdHierarchy.importMdHierarchyForAutoSubmit(i,a,d);if(i.getSession().hasFeature(f.FeatureToggleOlap.ACTIVATE_DEFAULT_HIERARCHY)){if(s&&f.XStringUtils.isNotNullAndNotEmpty(b)){h.setHierarchyName(b);h.setHierarchyActive(true);}}h.setDisplayHierarchyFixInFilter(c);var e=f.PrUtils.getListProperty(a,"LevelHierarchies");var g=d.getModelCapabilities();if(f.notNull(g)){if(g.supportsDimensionHierarchyLevels()){f.QInAMdHierarchy.importLevelHierarchyDetails(i,d,e);}if(g.supportsSpatialChoropleth()){var j=f.PrUtils.getListProperty(a,"GeoShapeHierarchies");if(!f.PrUtils.isListEmpty(j)){var k=h.getGeoShapeHierarchiesBase();f.QInAMdHierarchy.importEachLeveledHierarchy(i,d,j,k);}}if(!g.supportsHierarchyMetadata()){return;}}var l=f.PrUtils.getListProperty(a,"Hierarchies");var m=f.QFactory.createHierarchyCatalogResult();f.QInAMdHierarchy.appendItemsToCatalogResult(m,l,d.getName());h.setHierarchies(m);if(f.notNull(l)){f.QInAMdHierarchy.importLevelHierarchyDetails(i,d,l);}};f.QInAMdHierarchy.importMdHierarchyForAutoSubmit=function(i,a,d){var b=a.getStructureByKey("Hierarchy");var q=d.getQueryManager();if(f.notNull(b)&&d.supportsHierarchy()&&f.notNull(q)&&q.getModelCapabilities().supportsAutoVariableSubmit()&&q.getVariableProcessorState()===f.VariableProcessorState.CHANGEABLE_STARTUP){var c=d.isDisplayHierarchyFixInFilter();d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);var n=b.getStringByKey("NameIs");var e=f.notNull(n)&&f.XString.isEqual("Variable",n);var g=e&&f.QInAMdHierarchy.isMetadataWithAutoSubmitCapability(i,q);var h=f.QInAMdHierarchy.importHierarchyName(i,b,d,e);var j=null;if(f.XStringUtils.isNotNullAndNotEmpty(h)){if(b.getBooleanByKey("IsTransient")){j=f.QHierarchy.createCustomHierarchy(d.getContext(),d,h,b.getStringByKey("Description"));}else if(!g){j=f.QHierarchy.create(d.getContext(),d,h);}f.QInAMdHierarchy.importHierarchyDueDate(b,d,j,i.capabilities.supportsSapDate());f.QInAMdHierarchy.importHierarchyVersion(b,d,j);if(!g){d.setHierarchy(j);var k=b.getBooleanByKeyExt("HierarchyActive",true);d.setHierarchyActive(k);d.setSelectorHierarchyActive(k);}f.QInAMdHierarchy.importHierarchyDrillInfo(i,b,d);d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(c);}}};f.QInAMdHierarchy.isMetadataWithAutoSubmitCapability=function(i,q){return i.getOriginalMode()===f.QModelFormat.INA_METADATA||i.getMode()===f.QModelFormat.INA_METADATA&&f.notNull(q)&&q.getModelCapabilities().supportsAutoVariableSubmit()&&q.getVariableProcessorState()===f.VariableProcessorState.CHANGEABLE_STARTUP;};f.QInAMdHierarchy.importHierarchyName=function(i,a,d,b){var h;if(a.hasStringByKey("Name")){h=a.getStringByKey("Name");}else{h=a.getStringByKey("HierarchyName");}d.setUseHierarchyNameVariable(b);var c=b&&f.QInAMdHierarchy.isMetadataWithAutoSubmitCapability(i,d.getQueryManager());if(c){d.setHierarchyNameVariableName(h);}return h;};f.QInAMdHierarchy.importHierarchyDueDate=function(i,d,h,s){var a=i.getStringByKey("DueDateIs");var b=f.notNull(a)&&f.XString.isEqual("Variable",a);var c=i.getStringByKey("DueDate");d.setUseHierarchyDueDateVariable(b);if(b){d.setHierarchyDueDateVariableName(f.XStringUtils.isNullOrEmpty(c)?null:c);}else if(f.notNull(h)){h.setHierarchyDueDate(f.XDate.createDateFromStringWithFlag(c,s));}};f.QInAMdHierarchy.importHierarchyVersion=function(i,d,h){var v=i.getStringByKey("VersionIs");var a=f.notNull(v)&&f.XString.isEqual("Variable",v);var b=i.getStringByKey("Version");d.setUseHierarchyVersionVariable(a);if(a){d.setHierarchyVersionVariableName(f.XStringUtils.isNullOrEmpty(b)?null:b);}else if(f.notNull(h)){h.setHierarchyVersion(b);}};f.QInAMdHierarchy.importHierarchyDrillInfo=function(i,a,d){var b=a.getIntegerByKeyExt("InitialDrillOffset",0);var c=a.getIntegerByKeyExt("InitialDrillLevel",0);var m=d.getModelCapabilities();if(m.supportsVisibilityFilter()||!i.mode.isTypeOf(f.QModelFormat.INA_DATA)){d.setInitialDrillLevel(c);d.setSelectorInitialDrillLevel(c);}else{if(c===-1){d.setInitialDrillLevel(c);d.setSelectorInitialDrillLevel(c);}else if(b===-1){d.setInitialDrillLevel(0);d.setSelectorInitialDrillLevel(0);}else{d.setInitialDrillLevel(c+b);d.setSelectorInitialDrillLevel(c+b);}}d.setInitialDrillOffset(b);d.setExplicitDrillOnFilteredNodes(a.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var e=f.Alignment.DEFAULT_VALUE;if(m.supportsExpandBottomUp()){var n=a.getStringByKeyExt("LowerLevelNodeAlignment","Default");e=f.QInAConverter.lookupLowerLevelNodeAlignment(n);if(a.containsKey("ExpandBottomUp")){var g=a.getBooleanByKeyExt("ExpandBottomUp",false);if(g){e=f.Alignment.CHILDREN_ABOVE_PARENT;}}}d.setLowerLevelNodeAlignment(e);var h=a.getBooleanByKeyExt("NodeCondensation",false);d.setHasNodeCondensation(h);var j=a.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var v=f.QInAConverter.lookupResultSetVisibility(j);d.setMemberOfPostedNodeVisibility(v);};f.QInAMdHierarchy.appendItemsToCatalogResult=function(c,h,d){var l=f.PrUtils.getListSize(h,0);for(var i=0;i<l;i++){var a=f.PrUtils.getStructureElement(h,i);var b=f.HierarchyCatalogItem.createCatalogItem();b.setDimensionName(d);var e;if(a.hasStringByKey("Name")){e=a.getStringByKey("Name");}else{e=a.getStringByKey("HierarchyName");}if(f.XStringUtils.isNullOrEmpty(e)||c.containsHierarchy(e)){continue;}b.setHierarchyName(e);var g=f.PrUtils.getStringProperty(a,"Description");if(f.notNull(g)){b.setHierarchyLongText(g.getString());}var v=f.PrUtils.getStringProperty(a,"Version");if(f.notNull(v)){b.setVersionName(v.getString());}var s=f.PrUtils.getStringProperty(a,"Structure");if(f.notNull(s)){b.setHierarchyType(f.HierarchyType.lookup(s.getString()));}var j=f.PrUtils.getBooleanValueProperty(a,"IsModeled",false);b.setIsModeled(j);var k=f.PrUtils.getStringProperty(a,"DateTo");if(f.notNull(k)){var m=k.getString();if(f.XStringUtils.isNotNullAndNotEmpty(m)){b.setDateTo(f.XDate.createDateFromIsoFormat(m));}}var n=f.PrUtils.getListProperty(a,"Levels");if(f.notNull(n)){b.setSupportsHierarchyLevels(true);var o=f.XList.create();var p=f.PrUtils.getListSize(n,0);for(var q=0;q<p;q++){var r=f.PrUtils.getStructureElement(n,q);if(f.isNull(r)){continue;}var t=f.HierarchyCatalogLevel.createCatalogLevel();var u=f.PrUtils.getIntegerValueProperty(r,"Level",-1);if(u>-1){t.setLevel(u);}var w=f.PrUtils.getStringProperty(r,"LevelName");if(f.notNull(w)){t.setLevelName(w.getString());}var x=f.PrUtils.getStringProperty(r,"LevelCaption");if(f.notNull(x)){t.setLevelDescription(x.getString());}var y=f.PrUtils.getStringProperty(r,"LevelUniqueName");if(f.notNull(y)){t.setLevelUniqueName(y.getString());}var z=f.PrUtils.getStringProperty(r,"DimensionName");if(f.notNull(z)){t.setLevelDimensionName(z.getString());}var A=f.PrUtils.getIntegerProperty(r,"LevelType");if(f.notNull(A)){t.setLevelType(f.QInAConverter.lookupHierarchyLevelType(A.getInteger()));}o.add(t);}b.setHierarchyLevels(o);}var B=a.getStringByKey("RestNode");if(f.notNull(B)){b.setRestNode(B);}var C=a.getStringByKey("VirtualRootNode");if(f.notNull(C)){b.setVirtualRootNode(C);}c.addItem(b);}return c;};f.QInAMdHierarchy.importLevelHierarchyDetails=function(i,d,h){if(!f.PrUtils.isListEmpty(h)){var m=d.getQueryModelBase().getQueryManagerBase().getMetadataModelBase();var a=m.getLeveledHierarchiesBase();f.QInAMdHierarchy.importEachLeveledHierarchy(i,d,h,a);}};f.QInAMdHierarchy.importEachLeveledHierarchy=function(i,d,h,m){var s=h.size();for(var a=0;a<s;a++){var b=f.QInAMdHierarchy.importLeveledHierarchy(i,d.getContext(),d,h.getStructureAt(a));if(!m.contains(b)){m.add(b);}}};f.QInAMdHierarchy.importLeveledHierarchy=function(i,c,d,a){var h=f.QLeveledHierarchy.create(c,d,a.getStringByKey(a.containsKey("Name")?"Name":"HierarchyName"));h.setHierarchyUniqueName(a.getStringByKey("UniqueName"));if(a.getStringByKey("DimensionName")===null){h.setDimensionName(d.getName());}else{h.setDimensionName(a.getStringByKey("DimensionName"));}h.setHierarchyType(f.HierarchyType.lookup(a.getStringByKey("Structure")));h.setIsModeled(a.getBooleanByKeyExt("IsModeled",false));var b=a.getStringByKey("DueDate");if(f.XStringUtils.isNotNullAndNotEmpty(b)){h.setDateTo(f.XDate.createDateFromStringWithFlag(b,i.capabilities.supportsSapDate()));}h.setHierarchyDescription(a.getStringByKey("Description"));var e=a.getListByKey("Levels");if(!f.PrUtils.isListEmpty(e)){f.QInAMdHierarchy.importLevels(h,e);}return h;};f.QInAMdHierarchy.importLevels=function(h,i){var s=i.size();for(var l=0;l<s;l++){var a=i.getStructureAt(l);var b=f.QHierarchyLevel.create(h,a.getStringByKey("LevelUniqueName"),a.getIntegerByKey("Level"));b.setLevelName(a.getStringByKey("LevelName"));b.setLevelText(a.getStringByKey("LevelCaption"));b.setLevelDimensionName(a.getStringByKey("DimensionName"));b.setLevelType(f.QInAConverter.lookupHierarchyLevelType(a.getIntegerByKey("LevelType")));b.setNavigationAttribute(a.getStringByKey("NavAttr"));h.getAllLevelBase().add(b);}};f.QInAMdHierarchy.exportLevelsLevelHierarchy=function(i,h){var a=i.putNewList("Levels");var b=h.getAllLevel();var s=b.size();for(var l=0;l<s;l++){var c=b.get(l);var d=a.addNewStructure();d.putInteger("Level",c.getLevelNumber());d.putStringNotNull("LevelUniqueName",c.getLevelUniqueName());d.putString("LevelName",c.getLevelName());d.putString("LevelCaption",c.getLevelText());d.putStringNotNull("DimensionName",c.getLevelDimensionName());d.putInteger("LevelType",f.QInAConverter.lookupHierarchyLevelTypeIna(c.getLevelType()));}};f.QInAMdHierarchy.exportMdHierarchy=function(e,a,d){a.putBoolean("HierarchiesPossible",d.supportsHierarchy());a.putInteger("NumberOfHierarchies",d.getNumberOfHierarchies());a.putString("DefaultHierarchy",d.getDefaultHierarchyName());if(e.capabilities.supportsDisplayHierarchyFixInFilter()){a.putBoolean("DisplayHierarchyFixInFilter",d.isDisplayHierarchyFixInFilter());}var l=d.getLeveledHierarchies();var m=d.getModelCapabilities();if(f.XCollectionUtils.hasElements(l)&&m.supportsDimensionHierarchyLevels()){var b=a.putNewList("LevelHierarchies");var n=l.size();for(var i=0;i<n;i++){f.QInAMdHierarchy.exportLevelHierarchyDetails(e,b,l.get(i));}}if(m.supportsHierarchyMetadata()){var c=a.putNewList("Hierarchies");var h=d.getHierarchies();if(f.notNull(h)){var g=h.getObjectsIterator();while(g.hasNext()){f.QInAMdHierarchy.exportHierarchyDetails(e,c,g);}f.XObjectExt.release(g);}}};f.QInAMdHierarchy.exportLevelHierarchyDetails=function(e,i,h){var a=i.addNewStructure();a.putString("Name",h.getHierarchyName());a.putString("Description",h.getHierarchyDescription());a.putString("DimensionName",h.getDimensionName());a.putString("Structure",h.getHierarchyType().getName());a.putBoolean("IsModeled",h.isModeled());f.QInAExportUtil.setDate(e,a,"DueDate",h.getDateTo());f.QInAMdHierarchy.exportLevelsLevelHierarchy(a,h);};f.QInAMdHierarchy.exportHierarchyDetails=function(e,i,h){var a=h.next();var b=i.addNewStructure();b.putString("Name",a.getHierarchyName());b.putString("Description",a.getHierarchyDescription());if(a.hasVersionName()){b.putString("Version",a.getVersionName());}var c=a.getHierarchyType();if(c!==f.HierarchyType.UNKNOWN){b.putString("Structure",c.getName());}b.putString("RestNode",a.getRestNode());b.putString("VirtualRootNode",a.getVirtualRootNode());f.QInAExportUtil.setDate(e,b,"DueDate",a.getDateTo());f.QInAMdHierarchy.exportLevels(b,a);};f.QInAMdHierarchy.exportLevels=function(i,h){if(h.supportsHierarchyLevels()){var a=i.putNewList("Levels");var b=h.getHierarchyLevels();var s=b.size();for(var l=0;l<s;l++){var c=b.get(l);var d=a.addNewStructure();d.putString("LevelUniqueName",c.getLevelUniqueName());d.putInteger("Level",c.getLevel());d.putString("LevelName",c.getLevelName());d.putString("LevelCaption",c.getLevelDescription());d.putStringNotNull("DimensionName",c.getLevelDimensionName());d.putInteger("LevelType",f.QInAConverter.lookupHierarchyLevelTypeIna(c.getLevelType()));}}};f.QInAMdHierarchy.prototype.getComponentType=function(){return null;};f.QInAMdHierarchy.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdHierarchy.importMdHierarchy(i,a,m);return m;};f.QInAMdHierarchy.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdHierarchy.exportMdHierarchy(e,i,m);return i;};f.QInAMdQuery=function(){};f.QInAMdQuery.prototype=new f.QInAComponentMetadata();f.QInAMdQuery.prototype._ff_c="QInAMdQuery";f.QInAMdQuery.importVariants=function(i,q){if(f.isNull(i)){return;}var a=q.getQueryManagerBase();if(f.isNull(a)){return;}var b=i.getListByKey("VariableVariants");if(f.isNull(b)){return;}var s=b.size();for(var c=0;c<s;c++){var d=b.getStructureAt(c);var v=f.QVariableVariant.createVariantWithScopeInternal(q.getDataSource(),d.getStringByKey("Name"),d.getStringByKey("Description"),f.Scope.lookupByName(d.getStringByKey("Scope")));a.addVariableVariant(v);}};f.QInAMdQuery.importVariant=function(i,q){if(f.isNull(i)){return null;}var a=i.getStructureByKey("VariableVariant");if(f.isNull(a)){return null;}return a.getStringByKey("Name");};f.QInAMdQuery.exportVariants=function(i,q){var v=q.getQueryManager().getVariableVariants();if(f.XCollectionUtils.hasElements(v)){var a=i.putNewList("VariableVariants");var s=v.size();for(var b=0;b<s;b++){var c=v.get(b);var d=a.addNewStructure();d.putString("Name",c.getName());d.putString("Description",c.getText());d.putString("Scope",c.getScope().getName());}}};f.QInAMdQuery.importPlanning=function(i,q){if(f.PrUtils.getBooleanValueProperty(i,"SupportsDataEntryReadOnly",false)){q.setSupportsDataEntryReadOnly(true);}if(f.PrUtils.getBooleanValueProperty(i,"DataEntryEnabled",false)){q.setDataEntryEnabled(true);}};f.QInAMdQuery.exportPlanning=function(i,q){if(q.supportsDataEntryReadOnly()){i.putBoolean("SupportsDataEntryReadOnly",true);}if(q.isDataEntryEnabled()){i.putBoolean("DataEntryEnabled",true);}};f.QInAMdQuery.importSupportsFlags=function(i,a,q){q.setExportEachMeasure(a.getBooleanByKeyExt("ExportingEachMeasure",true));q.setExportFixedFilter(a.getBooleanByKeyExt("ExportingFixedFilter",true));q.setExportVariables(a.getBooleanByKeyExt("ExportingVariables",true));};f.QInAMdQuery.exportSupportsFlags=function(i,q){if(!q.isExportingEachMeasure()){i.putBoolean("ExportingEachMeasure",false);}if(!q.isExportingFixedFilter()){i.putBoolean("ExportingFixedFilter",false);}if(!q.isExportingVariables()){i.putBoolean("ExportingVariables",false);}};f.QInAMdQuery.importTotals=function(i,q){var c=q.getModelCapabilitiesBase();var a=i.getStructureByKey("QueryMd");if(f.isNull(a)){a=i.getStructureByKey("Query");}if(f.notNull(a)){if(c.supportsQueryCurrencyTranslation()){var b=a.getStringByKey("CurrencyTranslationEnabled");var d=q.getCurrencyTranslationManagerBase();d.setCurrencyTranslationEnabledProperty(b);if(f.XString.isEqual(b,f.CurrencyTranslationConstants.NO_CURRENCY)){d.setCurrencyTranslationDetails(null);}}var e=a.getStructureByKey("ResultStructureFeature");var r=q.getMdResultStructureControllerBase();if(f.notNull(e)&&e.getBooleanByKeyExt("Enabled",false)){f.QInAOptions.importReturnedDataSelections(e,q.getQueryManager());r.setSupportsTotals(true);var g=e.getStructureByKey("ResultAlignment");var h=g.getStringByKey("ConfigLevel");var s=f.QInAConverter.lookupConfigLevel(h);c.setSupportedResultAlignmentLevel(s);var j=g.getListByKey("ResultAlignmentList");c.clearSupportedResultAlignment();var k=j.size();for(var l=0;l<k;l++){var m=f.QInAConverter.lookupAlignment(j.getStringAt(l));c.addSupportedResultAlignment(m);}if(c.getResultStructureReorderingCapability()===f.ReorderingCapability.FULL){c.addSupportedResultAlignment(f.ResultAlignment.STRUCTURE);}c.setSupportedVisibilityLocation(f.QModelLevel.DIMENSIONS);c.setSupportsConditionalResultVisibility(e.getBooleanByKeyExt("ConditionalVisibility",false));var n=e.getStringByKeyExt("Reordering","None");c.setResultStructureReorderingCapability(f.QInAConverter.lookupReordering(n));var o=e.getBooleanByKeyExt("ConditionalTotals",false);c.setSupportsConditionalResult(o);if(o){var p=e.getListByKey("ConditionalTotalsList");var t=p.size();for(var u=0;u<t;u++){var v=p.getStringAt(u);if(f.XString.isEqual(v,"TotalIncludedMembers")){c.addSupportedConditionalElement(f.ResultStructureElement.TOTAL_INCLUDED_MEMBERS);}else if(f.XString.isEqual(v,"TotalRemainingMembers")){c.addSupportedConditionalElement(f.ResultStructureElement.TOTAL_REMAINING_MEMBERS);}}}}else{r.setSupportsTotals(false);c.setSupportedResultAlignmentLevel(f.QModelLevel.NONE);c.setSupportedVisibilityLocation(f.QModelLevel.NONE);c.setSupportsConditionalResultVisibility(false);c.setResultStructureReorderingCapability(f.ReorderingCapability.NONE);c.setSupportsConditionalResult(false);}}};f.QInAMdQuery.exportReturnedDataSelections=function(i,q){if(!q.supportsReturnedDataSelection()){return;}var a=i.putNewStructure("ReturnedDataSelection");var b=q.getAllEnabledReturnedDataSelections().getIterator();while(b.hasNext()){a.putBoolean(b.next(),true);}f.XObjectExt.release(b);var c=q.getAllDisabledReturnedDataSelections().getIterator();while(c.hasNext()){a.putBoolean(c.next(),false);}f.XObjectExt.release(c);};f.QInAMdQuery.exportTotals=function(e,i,q){var c=q.getModelCapabilities();var a=i.putNewStructure("QueryMd");if(e.mode.containsMetadata()||e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)||e.mode===f.QModelFormat.INA_METADATA_CORE||e.mode===f.QModelFormat.INA_METADATA_RENDERING){if(c.supportsQueryCurrencyTranslation()){a.putString("CurrencyTranslationEnabled",q.getCurrencyTranslationManager().getCurrencyTranslationEnabledType());}if(q.supportsResultVisibility()){var b=a.putNewStructure("ResultStructureFeature");b.putBoolean("Enabled",q.supportsResultVisibility());b.putBoolean("ConditionalVisibility",c.supportsConditionalResultVisibility());b.putString("Reordering",f.QInAConverter.lookupReorderingInA(c.getResultStructureReorderingCapability()));var d=b.putNewStructure("ResultAlignment");var s=c.getSupportedResultAlignmentLevel();d.putString("ConfigLevel",f.QInAConverter.lookupConfigLevelInA(s));var g=c.getSupportedResultAlignments();if(g.hasElements()){var h=d.putNewList("ResultAlignmentList");var j=g.size();for(var r=0;r<j;r++){h.addString(f.QInAConverter.lookupAlignmentInA(g.get(r)));}}var k=c.supportsConditionalResults();b.putBoolean("ConditionalTotals",k);if(k){var l=b.putNewList("ConditionalTotalsList");var m=c.getSupportedConditionalResults();var n=m.size();for(var S=0;S<n;S++){var o=m.get(S);if(o===f.ResultStructureElement.TOTAL_INCLUDED_MEMBERS){l.addString("TotalIncludedMembers");}else if(o===f.ResultStructureElement.TOTAL_REMAINING_MEMBERS){l.addString("TotalRemainingMembers");}}}f.QInAMdQuery.exportReturnedDataSelections(b,q.getQueryManager());}}};f.QInAMdQuery.importDimensions=function(a,b,q){var c=b.getListByKey("Dimensions");if(f.notNull(c)){var s=q.supportsDimensionLazyLoad()&&q.getServerBaseSerialization()!==null;var d=q.getDimensionManagerBase();if(s){var u=b.hasStringByKey("MetadataType")&&f.XString.isEqual(b.getStringByKey("MetadataType"),"DesignTime");d.setDimensionLazyLoader(f.InADimensionLazyLoader.createLazyLoader(q,u));}var l=c.size();for(var i=0;i<l;i++){var e=c.getStructureAt(i);var g=e.getBooleanByKeyExt("IsReference",false);if(s&&(g||a.getOriginalMode()!==f.QModelFormat.INA_CLONE)){var h=f.AxisType.lookup(e.getStringByKey("AxisDefault"));if(h!==f.AxisType.COLUMNS&&h!==f.AxisType.ROWS&&q.getDimensionByNameFromExistingMetadata(e.getStringByKey("Name"))===null){var j=f.QInAMdQuery.getDimensionType(q,e);d.addDimensionReference(e.getStringByKey("Name"),j,f.QInAMdQuery.isTechnicalDimension(e));continue;}}f.QInAMdQuery.importDimension(a,e,q);}}};f.QInAMdQuery.getDimensionType=function(q,i){var a=i.getIntegerByKeyExt("DimensionType",3);var d=f.QInAConverter.lookupDimensionType(a);return d;};f.QInAMdQuery.isTechnicalDimension=function(i){var a=i.getListByKey("AxisConstraints");return f.XCollectionUtils.hasElements(a)&&a.size()===1&&f.QInAConverter.lookupAxisType(a.getStringAt(0))===f.AxisType.TECHNICAL;};f.QInAMdQuery.importDimension=function(i,a,q){var d=i.importDimension(a,q);var b=q.getDimensionManagerBase();var c=b.getDimensionByNameInternal(a.getStringByKey("Name"));if(f.isNull(c)){q.addDimension(d);}else if(q.getQueryManagerBase().getPreviousVariableProcessorState()===f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){var s=f.InAQMgrMergeSettings.create(false);c.mergeDeepRecursive(s,d);f.XObjectExt.release(d);d=c;}else{c.setText(d.getText());d=c;}var e=q.getAxis(d.getDefaultAxisType());e.add(d);b.finalizeDimensionMetadataSetup(d);};f.QInAMdQuery.exportDimensions=function(e,q,a){var b=f.PrFactory.createList();if(e.getOriginalMode()===f.QModelFormat.INA_METADATA){q.getDimensions();}var d=f.XListOfString.createFromReadOnlyList(q.getDimensionNames());d.sortByDirection(f.XSortDirection.ASCENDING);var l=d.size();var o=q.isOptimizedExportModeActive();var c=e.getMode();var u=f.QInAMdQuery.collectUsedDimensionsForRendering(q,c);var g=q.getDimensionManagerBase();for(var i=0;i<l;i++){var h=d.get(i);var j=g.getDimensionByNameInternal(h);var k;if(f.isNull(j)){if(e.getOriginalMode().isTypeOf(f.QModelFormat.INA_CLONE)){k=f.PrFactory.createStructure();k.putString("Name",h);k.putBoolean("IsReference",true);}else{continue;}}else{if(o&&j.isIgnoredOnOptimizedExport()){continue;}var m=j.getAxisType();if(c===f.QModelFormat.INA_METADATA_RENDERING&&m!==f.AxisType.ROWS&&m!==f.AxisType.COLUMNS&&!u.contains(j.getName())){continue;}k=e.exportDimension(j,null);}b.add(k);}a.put("Dimensions",b);};f.QInAMdQuery.collectUsedDimensionsForRendering=function(q,a){var u=f.XHashSetOfString.create();if(a===f.QModelFormat.INA_METADATA_RENDERING){f.DimensionUsageAnalyzer2.addDimensionsUsedBySorting(q,u);f.DimensionUsageAnalyzer2.addDimensionsUsedByVariables(q,u);f.DimensionUsageAnalyzer2.addDimensionsUsedBySpatialClustering(q,u);}return u;};f.QInAMdQuery.importProperties=function(i,q){var d=i.getStringByKey("Description");if(f.XStringUtils.isNotNullAndNotEmpty(d)){q.setText(i.getStringByKey("Description"));}var m=q.getMetadataPropertiesBase();m.putString("Type",i.getStringByKey("Type"));if(i.hasStringByKey("LastDataUpdateOn")){m.putString("LastDataUpdateOn",i.getStringByKey("LastDataUpdateOn"));}else{m.putString("LastDataUpdate",i.getStringByKey("LastDataUpdate"));}m.putString("LastDataUpdateBy",i.getStringByKey("LastDataUpdateBy"));m.putString("CreatedBy",i.getStringByKey("CreatedBy"));m.putString("CreatedOn",i.getStringByKey("CreatedOn"));m.putString("RepositoryType",i.getStringByKey("RepositoryType"));m.putString("DueDate",i.getStringByKey("DueDate"));};f.QInAMdQuery.exportProperties=function(i,q){i.putString("Description",q.getText());var m=q.getMetadataProperties();i.putString("Type",m.getStringByKey("Type"));var l=m.getStringByKey("LastDataUpdateOn");if(f.isNull(l)){i.putString("LastDataUpdate",m.getStringByKey("LastDataUpdate"));}else{i.putString("LastDataUpdateOn",l);}i.putString("LastDataUpdateBy",m.getStringByKey("LastDataUpdateBy"));i.putString("RepositoryType",m.getStringByKey("RepositoryType"));i.putString("CreatedBy",m.getStringByKey("CreatedBy"));i.putString("CreatedOn",m.getStringByKey("CreatedOn"));i.putString("DueDate",m.getStringByKey("DueDate"));var a=q.getInfoProvider();f.QInAExportUtil.setNameIfNotNull(i,"BaseDataSource",a);};f.QInAMdQuery.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MODEL;};f.QInAMdQuery.prototype.newModelComponent=function(a,o,p,c){return f.QueryModel.create(o,null,f.QCapabilities.create());};f.QInAMdQuery.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;f.QInAMdDataSource.importMd(i,a,q,q);var b=i.getMode();if(b===f.QModelFormat.INA_METADATA||b===f.QModelFormat.INA_METADATA_CORE||b===f.QModelFormat.INA_METADATA_RENDERING){q.setServerBaseSerialization(b,f.QModelOrigin.IMPORTER,a);}if(f.notNull(a)){f.QInAMdQuery.importSupportsFlags(i,a,q);f.QInAMdQuery.importProperties(a,q);f.QInAMdQuery.importTotals(a,q);i.m_cacheKey=f.QFactory.createCacheKeyByContext(c);f.QInAMdQuery.importDimensions(i,a,q);q.getDimensionManagerBase().finalizeStructures();i.m_cacheKey=f.XObjectExt.release(i.m_cacheKey);}i.importSortingManager(a,q.getSortingManagerBase(),null);i.importVariableManager(a,q.getVariableManagerBase(),q);i.importDrillManager(a,q.getDrillManagerBase(),q);i.importExceptionAggregationManager(a,q._getExceptionAggregationManagerBase(),q);i.importUniversalDisplayHierarchies(a,q.getUniversalDisplayHierarchiesBase(),q);f.QInAMdQuery.importPlanning(a,q);f.QInAMdQuery.importVariants(a,q);return q;};f.QInAMdQuery.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;var b=e.mode===f.QModelFormat.INA_METADATA_RENDERING;f.QInAMdQuery.exportSupportsFlags(i,q);if(a===f.QImExFlag.DEFAULT_ALL){f.QInAMdDataSource.exportMd(e,i,q);e.exportVariableContainer(q.getVariableManager(),i);f.QInAMdQuery.exportVariants(i,q);}else if(a===f.QImExFlag.VARIABLES){e.exportVariableContainer(q.getVariableManager(),i);f.QInAMdQuery.exportVariants(i,q);}else if(a===f.QImExFlag.DATASOURCE){f.QInAMdDataSource.exportMd(e,i,q);}f.QInAMdQuery.exportProperties(i,q);if(!b){f.QInAMdQuery.exportTotals(e,i,q);}f.QInAMdQuery.exportDimensions(e,q,i);e.exportSortingManager(q.getSortingManager(),i);e.exportDrillManager(q.getDrillManager(),i);if(!b){e.exportExceptionAggregationManager(q._getExceptionAggregationManagerBase(),i);e.exportUniversalDisplayHierarchies(q.getUniversalDisplayHierarchies(),i);f.QInAMdQuery.exportPlanning(i,q);}return i;};f.QInAMdSort=function(){};f.QInAMdSort.prototype=new f.QInAComponentMetadata();f.QInAMdSort.prototype._ff_c="QInAMdSort";f.QInAMdSort.prototype.getComponentType=function(){return f.OlapComponentType.SORT_MANAGER;};f.QInAMdSort.prototype.importComponentWithStructure=function(a,b,m,p,c){var s=m;if(a.capabilities.supportsExtendedSort()&&f.notNull(b)){var d=b.getListByKey("ExtendedSortTypes");if(f.notNull(d)){s.clearSupportedSortType();var e=d.size();for(var i=0;i<e;i++){var g=d.getStringAt(i);var h=f.QInAConverter.lookupSortType(g);if(f.isNull(h)){a.addWarning(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate2("Sort type unknown: ",g));}else{s.addSupportedSortType(h);}}}var k=b.getListByKey("SortTypesBreakGrouping");if(f.notNull(k)){var l=k.size();for(var j=0;j<l;j++){var n=f.QInAConverter.lookupSortType(k.getStringAt(j));s.addSupportedBreakGrouping(n);}}}return s;};f.QInAMdSort.prototype.exportComponentWithStructure=function(e,m,a,b){if(e.capabilities.supportsExtendedSort()){var s=m;var c=s.getQueryModel().getModelCapabilities();var d=a.putNewList("ExtendedSortTypes");var g=f.SortType.getAllSortTypes();var h=g.size();for(var i=0;i<h;i++){var k=g.get(i);if(c.supportsSortType(k)){d.addString(f.QInAConverter.lookupSortTypeInA(k));}}var l=a.putNewList("SortTypesBreakGrouping");for(var j=0;j<h;j++){var n=g.get(j);if(c.supportsBreakGrouping(n)){l.addString(f.QInAConverter.lookupSortTypeInA(n));}}}return a;};f.QInAMdUniversalDisplayHierarchies=function(){};f.QInAMdUniversalDisplayHierarchies.prototype=new f.QInAComponentMetadata();f.QInAMdUniversalDisplayHierarchies.prototype._ff_c="QInAMdUniversalDisplayHierarchies";f.QInAMdUniversalDisplayHierarchies.importUdhDimension=function(i,q,n){if(!q.getDimensionNames().contains(n)){var a=f.PrFactory.createStructure();a.putString("Name",n);a.putString("AxisDefault","Virtual");var b=a.putNewList("AxisConstraints");b.addString("Virtual");f.QInAMdQuery.importDimension(i,a,q);}};f.QInAMdUniversalDisplayHierarchies.importHierarchy=function(u,h){var a=h.getListByKey("DimensionNames");var d=f.PrUtils.asListOfString(a);var n=h.getStringByKey("Name");var i=h.getIntegerByKey("InitialDrillLevel");var b=f.QInAConverter.lookupLowerLevelNodeAlignment(h.getStringByKey("LowerLevelNodeAlignment"));var c=h.getBooleanByKeyExt("Active",false);var e=h.getBooleanByKeyExt("CustomDimensions",false);u.addHierarchy(n,d,i,b,c,null,e);};f.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies=function(u){var q=u.getQueryModel();var h=u.getHierarchies();var a=f.XList.create();var s=h.size();for(var i=0;i<s;i++){var b=h.get(i);if(b.getHierarchyDedicatedAxis()!==null){a.add(b.getHierarchyDedicatedAxis().getType());continue;}var c=f.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList(b.getDimensionNames(),q);if(f.notNull(c)&&!a.contains(c.getType())){b.setAxis(c);a.add(c.getType());}}for(var k=0;k<s;k++){var d=h.get(k);if(d.getHierarchyDedicatedAxis()===null){d.setAxis(a.contains(f.AxisType.ROWS)?q.getColumnsAxis():q.getRowsAxis());}}};f.QInAMdUniversalDisplayHierarchies.getAxisForDimensionList=function(d,q){if(f.notNull(d)){for(var i=0;i<d.size();i++){var a=q.getDimensionByNameFromExistingMetadata(d.get(i));if(f.notNull(a)){var b=a.getAxisType();if(b===f.AxisType.ROWS||b===f.AxisType.COLUMNS){return a.getAxis();}}}}return null;};f.QInAMdUniversalDisplayHierarchies.prototype.getComponentType=function(){return f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES;};f.QInAMdUniversalDisplayHierarchies.prototype.newModelComponent=function(a,o,p,c){return f.QFactory.createUniversalDisplayHierarchies(c);};f.QInAMdUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(a,b,m,p,c){var u=m;if(f.notNull(b)&&a.capabilities.supportsUniversalDisplayHierarchies()){var d=b.getStructureByKey("UniversalDisplayHierarchies");if(f.notNull(d)){var h=d.getListByKey("DefinedHierarchies");var s=h.size();var q=u.getQueryModel();for(var i=0;i<s;i++){var e=h.getStructureAt(i);f.QInAMdUniversalDisplayHierarchies.importHierarchy(u,e);f.QInAMdUniversalDisplayHierarchies.importUdhDimension(a,q,e.getStringByKey("Name"));}}}f.QInAMdUniversalDisplayHierarchies.assignAxesToHierarchies(u);return u;};f.QInAMdUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(e,m,i,a){return i;};f.QInAMdVarDimMember=function(){};f.QInAMdVarDimMember.prototype=new f.QInAComponentMetadata();f.QInAMdVarDimMember.prototype._ff_c="QInAMdVarDimMember";f.QInAMdVarDimMember.prototype.getComponentType=function(){return f.VariableType.DIMENSION_MEMBER_VARIABLE;};f.QInAMdVarDimMember.prototype.importComponentWithStructure=function(a,b,m,p,c){var v=p;var d=f.VariableType.DIMENSION_MEMBER_VARIABLE;if(b.containsKey("isHierarchical")){if(b.getBooleanByKeyExt("isHierarchical",false)){d=f.VariableType.HIERARCHY_NODE_VARIABLE;}}else{var e=f.PrUtils.getStringValueProperty(b,"SemanticType",null);if(f.notNull(e)){if(f.XString.isEqual(e,"HierarchyNodeVariable")){d=f.VariableType.HIERARCHY_NODE_VARIABLE;}else if(f.XString.isEqual(e,"HierarchyNameVariable")){d=f.VariableType.HIERARCHY_NAME_VARIABLE;}}}var g;var n=b.getStringByKey("Name");var h=v.getVariables();if(h.containsKey(n)){g=h.getByKey(n);}else{if(d===f.VariableType.HIERARCHY_NODE_VARIABLE){g=f.QHierarchyNodeVariable.createHierarchyNodeVariable(c,v,n,null);}else if(d===f.VariableType.HIERARCHY_NAME_VARIABLE){g=f.QHierarchyNameVariable.createDimensionHierarchyVariable(c,v,n,null);}else{g=f.QDimensionMemberVariable.createDimensionMemberVariable(c,v,n,null);}}if(b.containsKey("IsInputEnabledAndExit")){g.setIsInputEnabledAndExit(b.getBooleanByKey("IsInputEnabledAndExit"));}f.QInAMdVarMisc.importMd(b,g);var s=b.getBooleanByKeyExt("SupportsValueHelp",true);g.setSupportsValueHelp(s);var j=null;var k=f.PrUtils.getStructureProperty(b,"DimensionReference");if(f.notNull(k)){var l=k.getStringByKey("Name");if(f.notNull(l)){var o=v.getDimensionAccessor();if(f.notNull(o)){j=o.getDimensionByNameFromExistingMetadata(l);}}}if(f.isNull(j)){var q=v.getQueryModel()!==null&&v.getQueryModel().isPartialResponse();if(!q){var r=f.XStringUtils.concatenate3("Error in importing Variables: No dimension specified for variable ",n," !");if(g.isInputEnabled()){a.addError(f.ErrorCodes.INVALID_STATE,r);return null;}a.addInfo(f.ErrorCodes.IMPORT_VARIABE_NO_DIMENSION,r);}}else{g.setDimension(j);}f.QInAMdVarSelectionCap.importMd(a,b,g,c);var t=b.getListByKey("RuntimeReferences");if(f.notNull(t)&&t.size()>0){var u=t.size();for(var i=0;i<u;i++){g.addRuntimeReferences(t.getStringAt(i));}}f.QInAMdVarHierInfo.importMd(a,b,g,c);g.setIsUsedInFixedFilter(b.getBooleanByKeyExt("UsedInFixedFilter",false));g.setIsUsedInDynamicFilter(b.getBooleanByKeyExt("UsedInDynamicFilter",false));var w=g.getQueryModel();var x=null;if(f.notNull(w)){x=w.getQueryManager();}var y=b.getStructureByKey("Values");if(f.notNull(y)&&f.notNull(x)&&x.getVariableProcessorState()!==f.VariableProcessorState.PROCESSING_REINIT){var z=f.QFactory.createFilterExpression(c,g);var A=a.mode;a.mode=f.QModelFormat.INA_DATA;var B=a.importFilterExpression(z,y,g,c);a.mode=A;var C=B.getCartesianProduct();if(f.notNull(C)){var D=C.getCartesianList(g.getDimension());g.setDefaultMemberFilter(D.cloneOlapComponent(g,null));}}return g;};f.QInAMdVarDimMember.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("VariableType","DimensionMemberVariable");var v=c.getVariableType();if(v===f.VariableType.HIERARCHY_NAME_VARIABLE){a.putString("SemanticType","HierarchyNameVariable");}else if(v===f.VariableType.HIERARCHY_NODE_VARIABLE){a.putString("SemanticType","HierarchyNodeVariable");}else{a.putString("SemanticType","DimensionMemberVariable");}if(c.isInputEnabledAndExitProvidedInMd()){a.putBoolean("IsInputEnabledAndExit",c.isEnforcedDynamicValue());}f.QInAMdVarMisc.exportMd(e,c,a);a.putBoolean("SupportsValueHelp",c.supportsValueHelp());if(c.getDimension()!==null){var d=a.putNewStructure("DimensionReference");d.putString("Name",c.getDimension().getName());}f.QInAMdVarSelectionCap.exportMd(e,a,c);f.QInAMdVarHierInfo.exportMd(a,c);a.putBoolean("UsedInFixedFilter",c.isUsedInFixedFilter());a.putBoolean("UsedInDynamicFilter",c.isUsedInDynamicFilter());var g=c.getDefaultMemberFilter();if(f.notNull(g)&&g.hasElements()){var t=e.mode;e.mode=f.QModelFormat.INA_DATA;var h=a.putNewStructure("Values");var j=h.putNewStructure("Selection");e.exportCartesianList(g,j);e.mode=t;}var r=c.getRuntimeReferences();if(f.notNull(r)){var n=r.size();if(n>0){var p=a.putNewList("RuntimeReferences");for(var i=0;i<n;i++){p.addString(r.get(i));}}}return a;};f.QInAMdVarHierInfo=function(){};f.QInAMdVarHierInfo.prototype=new f.QInAComponentMetadata();f.QInAMdVarHierInfo.prototype._ff_c="QInAMdVarHierInfo";f.QInAMdVarHierInfo.importMd=function(i,a,v,c){v.setHierarchyName(null);v.setHierarchyVersion(null);v.setHierarchyKeyDate(null);v.setHierarchyBaseDimension(null);var b=f.PrUtils.getStructureProperty(a,"Hierarchy");if(f.notNull(b)){v.setHierarchyBaseDimension(b.getStringByKey("BaseDimension"));v.setHierarchyName(b.getStringByKey("Name"));v.setHierarchyVersion(b.getStringByKey("Version"));var d=b.getStringByKey("DueDate");if(f.isNull(d)){d=b.getStringByKey("DateTo");}v.setHierarchyKeyDate(d);}var e=v.getName();var g=v.getVariableType();var h=v.getVariableContext();var j=h.getDimensionAccessor();var q=h.getQueryManager();if(f.notNull(q)&&q.getModelCapabilities().supportsAutoVariableSubmit()){var r=v.getRuntimeReferences();for(var k=0;k<r.size();k++){var l=j.getDimensionByName(r.get(k));if(f.XString.isEqual(e,l.getHierarchyNameVariableName())||f.XString.isEqual(e,l.getHierarchyDueDateVariableName())||f.XString.isEqual(e,l.getHierarchyVersionVariableName())){v.setIsHierarchyInfoVariable(true);}}}if(g===f.VariableType.HIERARCHY_NAME_VARIABLE){var m=v;var n=a.getStringByKey("HierarchyBaseDimension");if(f.isNull(n)){n=a.getStringByKey("HierachyBaseDimension");}if(f.notNull(n)){var o=j.getDimensionByNameFromExistingMetadata(n);m.setHierarchyNameDimension(o);}}else if(g===f.VariableType.HIERARCHY_NODE_VARIABLE){var p=h.getVariableMode();if(p===f.VariableMode.DIRECT_VALUE_TRANSFER){var s=v.getHierarchyName();var t=v.getDimension();if(f.notNull(s)&&f.notNull(t)){var u=f.QHierarchy.create(c,t,s);var w=v.getHierarchyVersion();u.setHierarchyVersion(w);var x=v.getHierarchyKeyDate();if(!f.XString.isEqual(x,"")){var y=f.XDate.createDateFromStringWithFlag(x,i.capabilities.supportsSapDate());if(f.notNull(y)){u.setHierarchyDueDate(y);}t.setHierarchy(u);}}}}};f.QInAMdVarHierInfo.exportMd=function(i,v){var a=i.putNewStructure("Hierarchy");a.putStringNotNull("BaseDimension",v.getHierarchyBaseDimension());a.putStringNotNull("Name",v.getHierarchyName());a.putStringNotNull("Version",v.getHierarchyVersion());a.putStringNotNull("DueDate",v.getHierarchyKeyDate());var b=v.getVariableType();if(b===f.VariableType.HIERARCHY_NAME_VARIABLE){var h=v.getHierarchyNameDimension();f.QInAExportUtil.setNameIfNotNull(i,"HierarchyBaseDimension",h);}};f.QInAMdVarHierInfo.prototype.getComponentType=function(){return null;};f.QInAMdVarHierInfo.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdVarHierInfo.importMd(i,a,m,c);return m;};f.QInAMdVarHierInfo.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdVarHierInfo.exportMd(i,m);return i;};f.QInAMdVarMisc=function(){};f.QInAMdVarMisc.prototype=new f.QInAComponentMetadata();f.QInAMdVarMisc.prototype._ff_c="QInAMdVarMisc";f.QInAMdVarMisc.importMd=function(a,v){if(f.notNull(v)){v.setText(a.getStringByKey("Description"));var b=a.getBooleanByKeyExt("InputEnabled",false);v.setInputEnabled(b);v.setNameExternal(a.getStringByKey("NameExternal"));v.setCustomVariable(a.getBooleanByKey("CustomVariable"));v.setProcessingType(f.QInAConverter.lookupProcessingType(a.getStringByKey("ProcessingType")));var c=a.getStringByKeyExt("InputType","Optional");if(f.XString.isEqual(c,"Optional")){v.setMandatory(false);v.setInitialValueAllowed(true);}else if(f.XString.isEqual(c,"Mandatory")){v.setMandatory(true);v.setInitialValueAllowed(true);}else if(f.XString.isEqual(c,"MandatoryNotInitial")){v.setMandatory(true);v.setInitialValueAllowed(false);}v.setIsDynamicVariable(a.getBooleanByKeyExt("IsDynamicValue",false));var s=a.getIntegerByKeyExt("ScreenOrder",0);v.setVariableOrder(s);var d=a.getListByKey("DependentOfVariable");if(!f.PrUtils.isListEmpty(d)){var e=d.size();for(var i=0;i<e;i++){v.addDependentVariableName(d.getStringAt(i));}}}};f.QInAMdVarMisc.exportMd=function(e,v,i){i.putString("Name",v.getName());i.putString("Description",v.getText());i.putBoolean("InputEnabled",v.isInputEnabled());i.putString("NameExternal",v.getNameExternal());i.putBoolean("CustomVariable",v.isCustomVariable());i.putStringNotNull("ProcessingType",f.QInAConverter.lookupProcessingTypeIna(v.getProcessingType()));if(v.isDynamicVariable()){i.putBoolean("IsDynamicValue",v.isDynamicVariable());}if(v.isMandatory()){if(v.isInitialValueAllowed()){i.putString("InputType","Mandatory");}else{i.putString("InputType","MandatoryNotInitial");}}else{if(v.isInitialValueAllowed()){i.putString("InputType","Optional");}else{e.addError(f.ErrorCodes.INVALID_STATE,"illegal combination: optional variables must support initial values");}}i.putInteger("ScreenOrder",v.getVariableOrder());var d=v.getDependentVariablesNames();if(f.XCollectionUtils.hasElements(d)){var a=i.putNewList("DependentOfVariable");a.addAllStrings(d);}};f.QInAMdVarMisc.prototype.getComponentType=function(){return null;};f.QInAMdVarMisc.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdVarMisc.exportMd(e,m,i);return i;};f.QInAMdVarMisc.prototype.importComponentWithStructure=f.noSupport;f.QInAMdVarOptionList=function(){};f.QInAMdVarOptionList.prototype=new f.QInAComponentMetadata();f.QInAMdVarOptionList.prototype._ff_c="QInAMdVarOptionList";f.QInAMdVarOptionList.prototype.getComponentType=function(){return f.VariableType.OPTION_LIST_VARIABLE;};f.QInAMdVarOptionList.prototype.importComponentWithStructure=function(a,b,m,p,c){var v=c.getVariableContainer();var n=b.getStringByKey("Name");var d=v.getVariables();var o;if(d.containsKey(n)){var e=d.getByKey(n);o=e;}else{var g=f.PrUtils.getStringValueProperty(b,"SemanticType",null);var h=b.getBooleanByKeyExt("MultipleValues",false);if(f.XString.isEqual("HierarchyVariable",g)){o=f.QSimpleTypeVariable.createHierarchyVariable(c,v,n,null,h);}else{o=f.QSimpleTypeVariable.createOptionListVariable(c,v,n,null,h);}}f.QInAMdVarMisc.importMd(b,o);o.clearOptions();var j=b.getListByKey("Options");if(!f.PrUtils.isListEmpty(j)){var l=j.size();for(var i=0;i<l;i++){var k=j.getStructureAt(i);var q=k.getStringByKey("Name");var r=k.getStringByKey("Description");o.createAndAddOption(q,r);}}return o;};f.QInAMdVarOptionList.prototype.exportComponentWithStructure=function(e,m,a,b){var v=m;a.putString("VariableType","OptionListVariable");var c=v.getVariableType();if(c===f.VariableType.HIERARCHY_VARIABLE){a.putString("SemanticType","HierarchyVariable");}else{a.putString("SemanticType","OptionListVariable");}f.QInAMdVarMisc.exportMd(e,v,a);a.putBoolean("MultipleValues",v.supportsMultipleValues());var o=v.getOptions();var d=a.putNewList("Options");var l=o.size();for(var i=0;i<l;i++){var g=o.get(i);var h=d.addNewStructure();h.putString("Name",g.getName());h.putString("Description",g.getText());}return a;};f.QInAMdVarSelectionCap=function(){};f.QInAMdVarSelectionCap.prototype=new f.QInAComponentMetadata();f.QInAMdVarSelectionCap.prototype._ff_c="QInAMdVarSelectionCap";f.QInAMdVarSelectionCap.importMd=function(i,a,m,c){var v=null;var d=m.getDimension();if(f.notNull(d)){var b=a.getStructureByKey("Values");if(f.notNull(b)){var e=b.getStructureByKey("Selection");if(f.notNull(e)){var g=e.getStructureByKey("SetOperand");if(f.notNull(g)){v=d.getFieldByName(g.getStringByKey("FieldName"));}}}}var h=f.QInAMdFilterCapability.importMd(i,a,v,m,c);if(i.isAbap(m)&&i.getSession().hasFeature(f.FeatureToggleOlap.SINGLE_VALUE_VARIABLES_ONLY_INCLUDE)){if(h.getGroup()===f.QSetSignComparisonOperatorGroup.SINGLE_VALUE){h.setGroup(f.QSetSignComparisonOperatorGroup.SINGLE_VALUE_INCLUDE_ONLY);}}m.setFilterCapability(h);var j=f.QFilterCapabilityList.createFilterCapabilitiesForVariable(c,m);m.setFilterCapabilities(j);var s=f.PrUtils.getBooleanValueProperty(a,"MultipleValues",false);j.setSupportsMultipleValues(s);f.QInAMdVarSelectionCap.mergeCapabilities(d,h,j);};f.QInAMdVarSelectionCap.mergeCapabilities=function(d,a,v){if(f.notNull(d)&&f.notNull(a)){var b=d.getFilterCapabilities();var c=b.getSelectableFieldNames();var e=c.size();for(var i=0;i<e;i++){var g=c.get(i);var h=b.getFilterCapabilitiesByFieldName(g);if(h.supportsSetSign(f.SetSign.INCLUDING)){var n=v.createAndAddFilterCapabilitiesForFieldName(g);f.QInAMdVarSelectionCap.mergeOperators(f.SetSign.INCLUDING,n,h,a);if(h.supportsSetSign(f.SetSign.EXCLUDING)){f.QInAMdVarSelectionCap.mergeOperators(f.SetSign.EXCLUDING,n,h,a);}}}}};f.QInAMdVarSelectionCap.mergeOperators=function(s,n,d,a){if(f.notNull(a)){if(a.supportsSetSign(s)){n.addSupportedSetSign(s);var b=n.getModifiableSupportedComparisonOperators(s);var i=d.getSupportedComparisonOperators(s);var c=a.getSupportedComparisonOperators(s);var e=c.size();for(var j=0;j<e;j++){var g=c.get(j);if(i.contains(g)){b.add(g);}}}}};f.QInAMdVarSelectionCap.exportMd=function(e,i,m){var s=m.getFilterCapability();f.QInAMdFilterCapability.exportMd(e,s,i,m.getQueryModel());var a=m.getFilterCapabilities();if(f.notNull(a)){i.putBoolean("MultipleValues",a.supportsMultipleValues());}};f.QInAMdVarSelectionCap.prototype.getComponentType=function(){return null;};f.QInAMdVarSelectionCap.prototype.importComponentWithStructure=function(i,a,m,p,c){f.QInAMdVarSelectionCap.importMd(i,a,m,c);return m;};f.QInAMdVarSelectionCap.prototype.exportComponent=function(e,m,i,a){return this.exportComponentWithStructure(e,m,f.isNull(i)?f.PrFactory.createStructure():i,a);};f.QInAMdVarSelectionCap.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInAMdVarSelectionCap.exportMd(e,i,m);return i;};f.QInAMdVarSimpleType=function(){};f.QInAMdVarSimpleType.prototype=new f.QInAComponentMetadata();f.QInAMdVarSimpleType.prototype._ff_c="QInAMdVarSimpleType";f.QInAMdVarSimpleType.importMd=function(i,v,c){var s=null;var n=f.PrUtils.getStringValueProperty(i,"Name",null);if(f.notNull(n)){var a=v.getVariables();if(a.containsKey(n)){s=a.getByKey(n);}else{var b=f.PrUtils.getStringValueProperty(i,"SemanticType",null);var h=i.getBooleanByKeyExt("MultipleValues",false);if(f.XString.isEqual("FormulaVariable",b)){s=f.QSimpleTypeVariable.createFormulaVariable(c,v,n,null,h);}else if(f.XString.isEqual("TextVariable",b)){s=f.QSimpleTypeVariable.createTextVariable(c,v,n,null,h);}else{var d=f.PrUtils.getStringValueProperty(i,"ValueType",null);var e=f.QInAConverter.lookupValueType(d);s=f.QSimpleTypeVariable.createSimpleTypeVariable(c,v,e,n,null,h);}}f.QInAMdVarMisc.importMd(i,s);var g=i.getIntegerByKeyExt("Scale",-1);if(g!==-1){s.setValueScale(g);}var j=i.getIntegerByKeyExt("Length",-1);if(j!==-1){s.setValueLength(j);}}return s;};f.QInAMdVarSimpleType.exportMd=function(e,v,i){i.putString("VariableType","SimpleTypeVariable");var a=v.getVariableType();if(a===f.VariableType.FORMULA_VARIABLE){i.putString("SemanticType","FormulaVariable");}else if(a===f.VariableType.TEXT_VARIABLE){i.putString("SemanticType","TextVariable");}else{i.putString("SemanticType","ValueVariable");var b=v.getValueType();i.putString("ValueType",f.QInAConverter.lookupValueTypeInA(b));}f.QInAMdVarMisc.exportMd(e,v,i);i.putInteger("Scale",v.getValueScale());i.putInteger("Length",v.getValueLength());i.putBoolean("MultipleValues",v.supportsMultipleValues());return i;};f.QInAMdVarSimpleType.prototype.getComponentType=function(){return null;};f.QInAMdVarSimpleType.prototype.exportComponentWithStructure=function(e,m,i,a){return f.QInAMdVarSimpleType.exportMd(e,m,i);};f.QInAMdVarSimpleType.prototype.importComponentWithStructure=f.noSupport;f.QInAMdVariable=function(){};f.QInAMdVariable.prototype=new f.QInAComponentMetadata();f.QInAMdVariable.prototype._ff_c="QInAMdVariable";f.QInAMdVariable.prototype.getComponentType=function(){return f.VariableType.ANY_VARIABLE;};f.QInAMdVariable.prototype.importComponentWithStructure=function(i,a,m,p,c){var v=p;var b;var d=f.PrUtils.getStringValueProperty(a,"VariableType",null);if(f.XString.isEqual("DimensionMemberVariable",d)){b=i.importDimensionMemberVariable(a,null,v,v);}else if(f.XString.isEqual("OptionListVariable",d)){b=i.importOptionListVariable(a,null,v);}else if(f.XString.isEqual("SimpleTypeVariable",d)){b=f.QInAMdVarSimpleType.importMd(a,v,c);}else{i.addError(0,f.XStringUtils.concatenate2("Variable type not supported: ",d));return null;}return b;};f.QInAMdVariable.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;var b=v.getVariableType();if(b.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){return e.exportDimensionMemberVariable(v,i);}else if(b.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){f.QInAMdVarSimpleType.exportMd(e,v,i);}else if(b.isTypeOf(f.VariableType.OPTION_LIST_VARIABLE)){e.exportOptionListVariable(v,i);}else{e.addError(0,f.XStringUtils.concatenate2("Variable type not supported: ",b.getName()));}return i;};f.QInAMdVariableContainer=function(){};f.QInAMdVariableContainer.prototype=new f.QInAComponentMetadata();f.QInAMdVariableContainer.prototype._ff_c="QInAMdVariableContainer";f.QInAMdVariableContainer.resolveVariableDependencies=function(v){var a=v.getVariables();var b=a.size();for(var i=0;i<b;i++){var c=a.get(i);var d=c.getDependentVariablesNames();var e=d.size();for(var j=0;j<e;j++){var o=a.getByKey(d.get(j));c.addDependentVariable(o);}}};f.QInAMdVariableContainer.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_CONTAINER;};f.QInAMdVariableContainer.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var v=m;var b=a.getListByKey("VariablesMd");if(f.isNull(b)){b=a.getListByKey("Variables");}this.importVariableList(i,b,v);}return m;};f.QInAMdVariableContainer.prototype.importVariableList=function(a,b,m){var v=m;var c=b;if(f.notNull(c)){var d=v.getVariables();var e=c.size();for(var i=0;i<e;i++){var g=f.PrUtils.getStructureElement(c,i);if(f.notNull(g)){var h=a.importVariable(g,v);if(f.notNull(h)&&!d.contains(h)){v.addVariable(h);}}}f.QInAMdVariableContainer.resolveVariableDependencies(v);}};f.QInAMdVariableContainer.prototype.exportComponentWithStructure=function(e,m,a,b){var v=m;var c=a.putNewList("VariablesMd");var d=v.getVariables();var g=d.size();for(var i=0;i<g;i++){c.add(e.exportVariable(d.get(i),null));}return a;};f.QInACalculatedDimension=function(){};f.QInACalculatedDimension.prototype=new f.QInADimension();f.QInACalculatedDimension.prototype._ff_c="QInACalculatedDimension";f.QInACalculatedDimension.prototype.getComponentType=function(){return f.DimensionType.CALCULATED_DIMENSION;};f.QInACalculatedDimension.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var d=m;var b=a.getStringByKey("Name");if(f.isNull(d)&&f.notNull(q)){d=q.getDimensionManagerBase().getDimensionByNameInternal(b);}if(f.isNull(d)){d=f.QCalculatedDimension._createCalculatedDimension(c,p,b);}d.setDimensionType(f.DimensionType.CALCULATED_DIMENSION);d.setName(b);d.setTopEntries(a.getIntegerByKeyExt("Top",0));d.setSkipEntries(a.getIntegerByKeyExt("Skip",0));var e=a.getStructureByKey("DataSource");d.setPreQueryName(e.getStringByKey("ObjectName"));d.setJoinType(f.JoinType.lookup(a.getStringByKey("JoinType")));var g=a.getListByKey("JoinFields");var s=g.size();var h;for(h=0;h<s;h++){var j=g.getStructureAt(h);d.addJoinFieldByString(j.getStringByKey("JoinFieldName"),j.getStringByKey("JoinFieldNameInReferencedData"));}var k=a.getListByKey("FieldMappings");s=k.size();for(h=0;h<s;h++){var l=k.getStructureAt(h);d.addFieldMappingByString(l.getStringByKey("FieldName"),l.getStringByKey("FieldNameInReferencedData"));if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){if(l.getStringByKey("CalculatedDimensionFieldValueType")!==null){var n=d.getFieldByName(l.getStringByKey("FieldName"));n.setValueType(f.QInAConverter.lookupValueType(l.getStringByKey("CalculatedDimensionFieldValueType")));}}}this.importFieldsLayout(i,a,d,c);i.importTotals(a,d.getResultStructureControllerBase(),c);return d;};f.QInACalculatedDimension.prototype.exportComponentWithStructure=function(e,m,a,b){var d=m;a.putString("Name",d.getName());var t=d.getAxisType();a.putString("Axis",f.QInAConverter.lookupAxisTypeInA(t));var c=d.getTopEntries();if(c>0){a.putInteger("Top",c);}var s=d.getSkipEntries();if(s>0){a.putInteger("Skip",s);}var g=a.putNewStructure("DataSource");g.putString("ObjectName",d.getPreQueryName());g.putString("Type","Query");a.putString("JoinType",d.getJoinType().getName());var h=a.putNewList("JoinFields");var j=d.getJoinFields();var k=j.size();var i;for(i=0;i<k;i++){var l=j.get(i);var n=h.addNewStructure();n.putString("JoinFieldName",l.getLocaleFieldName());n.putString("JoinFieldNameInReferencedData",l.getReferencedFieldName());}var o=a.putNewList("FieldMappings");var p=d.getFieldMappings();var q=f.XList.create();k=p.size();for(i=0;i<k;i++){var r=p.get(i);if(f.XString.isEqual(d.getKeyField().getName(),r.getLocaleFieldName())){q.insert(0,r);}else{q.add(r);}}for(i=0;i<k;i++){var u=q.get(i);var v=o.addNewStructure();v.putString("FieldName",u.getLocaleFieldName());v.putString("FieldNameInReferencedData",u.getReferencedFieldName());if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var w=u.getLocaleFieldName();if(d.getFieldByName(w).getValueType()!==f.XValueType.STRING){var x=f.QInAConverter.lookupValueTypeInA(d.getFieldByName(w).getValueType());v.putString("CalculatedDimensionFieldValueType",x);}}}f.QInADimension.exportFieldLayout(e,a,d);e.exportTotals(d,a);return a;};f.QInAFilterDynamic=function(){};f.QInAFilterDynamic.prototype=new f.QInAFilter();f.QInAFilterDynamic.prototype._ff_c="QInAFilterDynamic";f.QInAFilterDynamic.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_DYNAMIC;};f.QInAFilterDynamic.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=a.getStructureByKey("DynamicFilter");if(f.isNull(b)){b=a.getStructureByKey("Filter");}var d=p;var e=null;if(f.notNull(d)){if(d.isDynamicFilterInitialized()){e=d.getDynamicFilter();e.setComplexRoot(null);if(e.getModelCapabilities().supportsCellValueOperand()){e.setIsSuppressingNulls(false);}}d.resetEffectiveFilter();}if(f.notNull(b)&&!b.isEmpty()){e=i.importFilterExpression(e,b,d,c);}if(f.notNull(d)){d.setDynamicFilter(e);}return e;};f.QInAFilterDynamic.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var c=b;var d=c;var g=null;if(d.isDynamicFilterInitialized()){g=d.getDynamicFilter();}var q=c.getQueryModel();var h=e.isAbap(c);var j;if(h){j="Filter";}else{j="DynamicFilter";}var u=f.notNull(e.variableProcessingDirective)&&q.getModelCapabilities().supportsVariableMasking();if(u){var k=e.exportFilterExpression(g);if(f.notNull(k)){i.put(j,k);}}else{var t=null;if(d.isTmpFilterInitialized()){t=d.getTmpFilter();}var l=this.exportFilter(e,d,g,d.getLinkedFilters(),t,d.getTransientZoomDisplayFilter(),d.getZoomDataFilter());if(f.notNull(l)){i.put(j,l);}}return i;};f.QInAFilterVisibility=function(){};f.QInAFilterVisibility.prototype=new f.QInAFilter();f.QInAFilterVisibility.prototype._ff_c="QInAFilterVisibility";f.QInAFilterVisibility.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_VISIBILITY;};f.QInAFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter";};f.QInAFilterVisibility.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;if(f.notNull(b)&&b.isVisibilityFilterInitialized()){var d=b.getVisibilityFilter();d.setComplexRoot(null);if(d.getModelCapabilities().supportsCellValueOperand()){d.setIsSuppressingNulls(false);}}if(f.isNull(a)){return null;}var s=i.importFilterExpression(null,a,b,c);if(f.notNull(b)&&f.notNull(s)){b.setVisibilityFilter(s);}return s;};f.QInAFilterVisibility.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(b.getModelCapabilities().supportsVisibilityFilter()){if(e.mode.isTypeOf(f.QModelFormat.INA_VALUE_HELP)){return b.isValueHelpVisibilityFilterInitialized()?this.exportFilter(e,b,b.getValuehelpVisibilityFilter(),null,null,null,null):null;}var t=null;if(b.isTmpVisibilityFilterInitialized()){t=b.getTmpVisibilityFilter();}var v=null;if(b.isVisibilityFilterInitialized()){v=b.getVisibilityFilter();}return this.exportFilter(e,b,v,b.getLinkedVisibilityFilters(),t,b.getTransientZoomVisibilityFilter(),null);}return null;};f.QInAFilterVisibility.prototype.isValidFilterExpression=function(a){return f.notNull(a);};f.QInAMemberFormulaMeasure=function(){};f.QInAMemberFormulaMeasure.prototype=new f.QInAFormulaMeasure();f.QInAMemberFormulaMeasure.prototype._ff_c="QInAMemberFormulaMeasure";f.QInAMemberFormulaMeasure.importIteration=function(a,m,c,b){var d=f.QFactory.createIteration(c);m.setIteration(d);d.setStartValueMemberName(b.getStringByKey("StartValueMember"));var e=b.getListByKey("IterationDimensions");if(f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var h=f.QFactory.createIterationDimension(c);h.setDimensionName(g.getStringByKey("Name"));h.setPartitionLevelName(g.getStringByKey("PartitionLevel"));d.addIterationDimension(h);}}};f.QInAMemberFormulaMeasure.signFlipCrossCalcMembers=function(q,a){if(f.notNull(a)){var c=a.getChildren();var i=0;while(c.hasNext()){var b=c.next();if(b.getOlapComponentType()===f.OlapComponentType.FORMULA_ITEM_MEMBER){var d=b;if(q.getMeasureDimension().getStructureMemberByAliasOrMember(d.getMemberName())!==null){var e=a;if(!f.XString.isEqual(e.getFunctionName(),f.FormulaOperator.GRAND_TOTAL.getName())){e.set(i,f.QInAFormulaMeasure.signFlipMember(d));}}}else{f.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(q,b);if(b.getOlapComponentType()===f.OlapComponentType.FORMULA_FUNCTION){var g=b;if(f.XString.isEqual(g.getFunctionName(),f.FormulaOperator.GRAND_TOTAL.getName())&&a.getOlapComponentType()===f.OlapComponentType.FORMULA_FUNCTION){var h=a;h.set(i,f.QInAFormulaMeasure.signFlipMember(b));}}}i++;}}};f.QInAMemberFormulaMeasure.isAccountModelCrossCalculation=function(a){var q=a.getQueryModel();if(f.notNull(q)&&q.getAccountDimension()!==null&&q.getAccountDimension().getAccountTypeAttributeName()!==null){return a.getDimension()!==q.getAccountDimension();}return false;};f.QInAMemberFormulaMeasure.exportCrossCalcSignFlip=function(e,a,i){var c=a.getContext();var q=a.getQueryModel();var b=a.getFormula();var s=b.cloneOlapComponent(c,null);if(s.getOlapComponentType()===f.OlapComponentType.FORMULA_ITEM_MEMBER){var d=s;var g=q.getMeasureDimension().getStructureMemberByAliasOrMember(d.getMemberName());if(f.notNull(g)){if((g.getExceptionAggregationType()===null||g.getMemberType()===f.MemberType.EXCEPTION_AGGREGATION)&&a.getExceptionAggregationType()===null){s=f.QInAFormulaMeasure.signFlipMember(s);}}}else{f.QInAMemberFormulaMeasure.signFlipCrossCalcMembers(q,s);if(s.getOlapComponentType()===f.OlapComponentType.FORMULA_FUNCTION){var h=s;if(f.XString.isEqual(h.getFunctionName(),f.FormulaOperator.GRAND_TOTAL.getName())){s=f.QInAFormulaMeasure.signFlipMember(s);}}}var j=b.cloneOlapComponent(c,null);var k=f.QFactory.createFormulaFunctionWithName(c,f.FormulaOperator.IF.getName());var o=f.QFactory.createFormulaFunctionWithName(c,f.FormulaOperator.OR.getName());k.add(o);var l=q.getAccountDimension().getAccountTypeAttributeName();var m=f.QFactory.createFormulaOperation(c);m.setOperator(f.ComparisonOperator.EQUAL);m.setLeftSide(f.QFactory.createFormulaAttributeWithName(c,l));m.setRightSide(f.QFactory.createFormulaConstantWithStringValue(c,f.AccountType.INC.getName()));o.add(m);var n=f.QFactory.createFormulaOperation(c);n.setOperator(f.ComparisonOperator.EQUAL);n.setLeftSide(f.QFactory.createFormulaAttributeWithName(c,l));n.setRightSide(f.QFactory.createFormulaConstantWithStringValue(c,f.AccountType.LEQ.getName()));o.add(n);var t=f.QFactory.createFormulaOperation(c);t.setOperator(f.MathOperator.MULT);t.setLeftSide(s);t.setRightSide(f.QFactory.createFormulaConstantWithIntValue(c,-1));k.add(t);k.add(j);f.QInAFormulaMeasure.exportFormulaItemSignFlip(e,k,i,c,true,false,a.getName());};f.QInAMemberFormulaMeasure.exportIteration=function(e,a,b){var c=b.putNewStructure("Iteration");var d=a.getIteration();c.putString("StartValueMember",d.getStartValueMemberName());var g=d.getIterationDimensions();var h=c.putNewList("IterationDimensions");var s=g.size();for(var i=0;i<s;i++){var j=g.get(i);var k=h.addNewStructure();k.putStringNotNullAndNotEmpty("Name",j.getDimensionName());k.putStringNotNullAndNotEmpty("PartitionLevel",j.getPartitionLevelName());}};f.QInAMemberFormulaMeasure.exportInverseFormulas=function(e,a,b){var c=b.putNewList("InverseFormulas");var d=a.getInverseFormulaList();var n=d.size();for(var i=0;i<n;i++){var g=f.PrFactory.createStructure();c.add(g);var h=d.get(i);var j=f.PrFactory.createStructure();f.QInAFormulaMeasure.exportFormulaItem(e,h.getInternalFormulaItem(),j,a.getContext());g.put("Formula",j);var t=h.getTargetMemberName();var k=f.PrFactory.createStructure();g.put("Target",k);var l=f.PrFactory.createStructure();k.put("Member",l);l.putString("Name",t);var m=h.getCondition();if(f.notNull(m)){var o=f.PrFactory.createStructure();g.put("Condition",o);f.QInAFormulaMeasure.exportFormulaItem(e,m,o,a.getContext());}}};f.QInAMemberFormulaMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var q=c.getQueryModel();if(f.isNull(d)){d=q.getMeasureDimension();}var b;var n=f.QInAMember.getNameForImport(a,d);var e;if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()&&d.getStructureMember(n)!==null){b=d.getStructureMember(n);e=a.getStructureByKey("[Measures].[MemberDetails]").getStructureByKey("Formula");}else{b=f.QFormulaMeasure._createFormulaMeasure(c,d);f.QInAFormulaMeasure.importNameAndText(a,b,d);e=a.getStructureByKey("Formula");}i.importExceptions(a,b);var g=f.QInAFormulaMeasure.importFormulaMeasure(i,d,e,null,c);b.setFormula(g);if(b.supportsCalculatedBeforeAggregation()){b.setIsCalculatedBeforeAggregation(f.XString.isEqual("CalculationBeforeAggregation",a.getStringByKey("ExecutionStep")));}if(f.notNull(e)){var h=e.getListByKey("InverseFormulas");if(f.XCollectionUtils.hasElements(h)){this.importInverseFormula(i,c,b,h);}}var j=e.getStructureByKey("Iteration");if(f.XCollectionUtils.hasElements(j)){f.QInAMemberFormulaMeasure.importIteration(i,b,c,j);}return b;};f.QInAMemberFormulaMeasure.prototype.importInverseFormula=function(a,c,m,b){var d=m.getDimension();var n=b.size();var e=m.getInverseFormulaList();for(var i=0;i<n;i++){var g=b.get(i);var h=g.getStructureByKey("Target");var j=g.getStructureByKey("Condition");var k=g.getStructureByKey("Formula");var l=h.getStructureByKey("Member");var t=l.getStringByKey("Name");var o=f.QInAFormulaMeasure.importFormulaMeasure(a,d,k,null,c);var p=null;if(f.notNull(j)){p=f.QInAFormulaMeasure.importFormulaMeasure(a,d,j,null,c);}var q=f.QFormulaInverseFormula.createInverseFormula(c,m,p,t,o);e.add(q);}};f.QInAMemberFormulaMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());f.QInAMember.exportText(e,i,b);var c=f.PrFactory.createStructure();if(b.isAutoSignFlip()&&f.QInAMemberFormulaMeasure.isAccountModelCrossCalculation(b)){f.QInAMemberFormulaMeasure.exportCrossCalcSignFlip(e,b,c);}else{f.QInAFormulaMeasure.exportFormulaMeasure(e,b,c);}if(f.XCollectionUtils.hasElements(b.getInverseFormulaList())){f.QInAMemberFormulaMeasure.exportInverseFormulas(e,b,c);}if(b.getIteration()!==null){f.QInAMemberFormulaMeasure.exportIteration(e,b,c);}if(c.hasElements()){i.put("Formula",c);}if(b.supportsCalculatedBeforeAggregation()&&b.isCalculatedBeforeAggregation()){i.putString("ExecutionStep","CalculationBeforeAggregation");}return i;};f.QInAVarHierNode=function(){};f.QInAVarHierNode.prototype=new f.QInAVarDimMember();f.QInAVarHierNode.prototype._ff_c="QInAVarHierNode";f.QInAVarHierNode.prototype.getComponentType=function(){return f.VariableType.HIERARCHY_NODE_VARIABLE;};f.QInAVarHierNode.prototype.importComponentWithStructure=function(i,a,m,p,c){var n=m;var b=a.getStructureByKey("Values");var s=f.QFactory.createFilterExpression(c,n);i.importFilterExpression(s,b,n,c);n.setFilter(s);return n;};f.QInAValueHelpFilter=function(){};f.QInAValueHelpFilter.prototype=new f.QInAFilter();f.QInAValueHelpFilter.prototype._ff_c="QInAValueHelpFilter";f.QInAValueHelpFilter.getValueHelpFilter=function(d,a){var s=d.getSelectorFilterUsage();var b=null;if(s===f.QueryFilterUsage.QUERY_FILTER&&a.isDynamicFilterInitialized()){b=a.getDynamicFilter();}else if(s===f.QueryFilterUsage.QUERY_FILTER_EFFECTIVE){b=a.getEffectiveFilter();}else if(s===f.QueryFilterUsage.QUERY_FILTER_EXCLUDING_DIMENSION&&a.isDynamicFilterInitialized()){b=a.getDynamicFilter();f.QInAValueHelpFilter.removeFilterOnDimensionVh(b,d);}else if(s===f.QueryFilterUsage.SELECTOR_FILTER&&a.isValueHelpFilterInitialized()){b=a.getValuehelpFilter();}return b;};f.QInAValueHelpFilter.removeFilterOnDimensionVh=function(q,d){var c=q.getCartesianProduct();if(f.notNull(c)){var a=0;while(a<c.size()){var b=c.getCartesianChild(a);if(b.getDimension().isEqualTo(d)){c.removeAt(a);}else{a++;}}}};f.QInAValueHelpFilter.prototype.getComponentType=function(){return f.OlapComponentType.SELECTOR;};f.QInAValueHelpFilter.prototype.getModelFormat=function(){return f.QModelFormat.INA_VALUE_HELP;};f.QInAValueHelpFilter.prototype.importComponentWithStructure=function(i,a,m,p,c){return null;};f.QInAValueHelpFilter.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;var b=d.getQueryModel().getFilter();var v=f.QInAValueHelpFilter.getValueHelpFilter(d,b);if(f.notNull(v)){var s=d.getSelectorFilterUsage();if(s===f.QueryFilterUsage.QUERY_FILTER_EFFECTIVE&&b.isIgnoreInternalNonMeasureFilter()){return this.exportFilter(e,b,b.getDynamicFilter(),b.getLinkedFilters(),b.getTmpFilter(),b.getTransientZoomDisplayFilter(),b.getZoomDataFilter());}else if(d.isSelectorUseQueryDrillOperations()){return this.exportFilter(e,b,v,null,null,b.getTransientZoomDisplayFilter(),b.getZoomDataFilter());}else{return e.exportFilterExpression(v);}}return null;};f.InAFusionResult=function(){};f.InAFusionResult.prototype=new f.DfSessionContext();f.InAFusionResult.prototype._ff_c="InAFusionResult";f.InAFusionResult.create=function(a,c){var n=new f.InAFusionResult();n.setupSessionContext(a.getSession());n.m_config=c;n.m_application=a;n.m_layers=f.XList.create();return n;};f.InAFusionResult.prototype.m_config=null;f.InAFusionResult.prototype.m_application=null;f.InAFusionResult.prototype.m_connectionContainer=null;f.InAFusionResult.prototype.m_serverMetadata=null;f.InAFusionResult.prototype.m_capabilities=null;f.InAFusionResult.prototype.m_exporter=null;f.InAFusionResult.prototype.m_metadataContent=null;f.InAFusionResult.prototype.m_modelContent=null;f.InAFusionResult.prototype.m_repoContent=null;f.InAFusionResult.prototype.m_layers=null;f.InAFusionResult.prototype.m_cubeDataSource=null;f.InAFusionResult.prototype.getConfig=function(){return this.m_config;};f.InAFusionResult.prototype.getApplication=function(){return this.m_application;};f.InAFusionResult.prototype.getConnectionContainer=function(){return this.m_connectionContainer;};f.InAFusionResult.prototype.getServerMetadata=function(){return this.m_serverMetadata;};f.InAFusionResult.prototype.setServerMetadata=function(s){this.m_serverMetadata=s;};f.InAFusionResult.prototype.setConnectionContainer=function(c){this.m_connectionContainer=c;};f.InAFusionResult.prototype.getCapabilities=function(){return this.m_capabilities;};f.InAFusionResult.prototype.setCapabilities=function(c){this.m_capabilities=c;};f.InAFusionResult.prototype.getMainCapabilities=function(){return this.m_capabilities.getActiveCapabilities();};f.InAFusionResult.prototype.getExporter=function(){return this.m_exporter;};f.InAFusionResult.prototype.setExporter=function(e){this.m_exporter=e;};f.InAFusionResult.prototype.getMetadataContent=function(){return this.m_metadataContent;};f.InAFusionResult.prototype.setMetadataContent=function(m){this.m_metadataContent=m;};f.InAFusionResult.prototype.getModelContent=function(){return this.m_modelContent;};f.InAFusionResult.prototype.setModelResponse=function(m){this.m_modelContent=m;};f.InAFusionResult.prototype.getRepositoryContent=function(){return this.m_repoContent;};f.InAFusionResult.prototype.setRepositoryContent=function(r){this.m_repoContent=r;};f.InAFusionResult.prototype.addLayer=function(l){this.m_layers.add(l);};f.InAFusionResult.prototype.getLayer=function(t){for(var i=0;i<this.m_layers.size();i++){var l=this.m_layers.get(i);if(l.getComponentType()===t){return l;}}return null;};f.InAFusionResult.prototype.getDataSource=function(){return this.m_cubeDataSource;};f.InAFusionResult.prototype.setDataSource=function(d){this.m_cubeDataSource=d;};f.InARsDataCellProvider=function(){};f.InARsDataCellProvider.prototype=new f.DfApplicationContext();f.InARsDataCellProvider.prototype._ff_c="InARsDataCellProvider";f.InARsDataCellProvider.create=function(a,q){var p=new f.InARsDataCellProvider();p.setupProvider(a,q);return p;};f.InARsDataCellProvider.prototype.m_supportsDataCellMixedValues=false;f.InARsDataCellProvider.prototype.m_supportsSAPDateFormat=false;f.InARsDataCellProvider.prototype.m_supportsInputReadinessStates=false;f.InARsDataCellProvider.prototype.m_ocpStructure=null;f.InARsDataCellProvider.prototype.m_exceptionSettings=null;f.InARsDataCellProvider.prototype.m_rowsCount=0;f.InARsDataCellProvider.prototype.m_columnsCount=0;f.InARsDataCellProvider.prototype.m_csValueException=null;f.InARsDataCellProvider.prototype.m_csMaxAlertLevelName=null;f.InARsDataCellProvider.prototype.m_csMaxAlertLevel=null;f.InARsDataCellProvider.prototype.m_csExceptionSetting=null;f.InARsDataCellProvider.prototype.m_csExceptionPriority=null;f.InARsDataCellProvider.prototype.m_lastX=0;f.InARsDataCellProvider.prototype.m_lastY=0;f.InARsDataCellProvider.prototype.m_valueType=null;f.InARsDataCellProvider.prototype.m_csStringValue=null;f.InARsDataCellProvider.prototype.m_csFormattedValue=null;f.InARsDataCellProvider.prototype.m_csFormatString=null;f.InARsDataCellProvider.prototype.m_csPlanningCommandIds=null;f.InARsDataCellProvider.prototype.m_csQueryDataCellReference=null;f.InARsDataCellProvider.prototype.m_csFormattedCurrencyUnit=null;f.InARsDataCellProvider.prototype.m_csCurrencyUnit=null;f.InARsDataCellProvider.prototype.m_csDoubleValue=0.0;f.InARsDataCellProvider.prototype.m_csCurrencyUnitType=0;f.InARsDataCellProvider.prototype.m_csCurrencyUnitPosition=0;f.InARsDataCellProvider.prototype.m_csComplexUnitIndex=0;f.InARsDataCellProvider.prototype.m_csDocumentId=null;f.InARsDataCellProvider.prototype.m_csInputReadinessIndex=0;f.InARsDataCellProvider.prototype.m_csInputEnabled=false;f.InARsDataCellProvider.prototype.m_csLockedValue=false;f.InARsDataCellProvider.prototype.m_csIsInsideBounds=false;f.InARsDataCellProvider.prototype.m_exceptions=null;f.InARsDataCellProvider.prototype.m_inputEnabled=null;f.InARsDataCellProvider.prototype.m_inputReadinessIndex=null;f.InARsDataCellProvider.prototype.m_lockedValue=null;f.InARsDataCellProvider.prototype.m_unitDescriptions=null;f.InARsDataCellProvider.prototype.m_unitTypes=null;f.InARsDataCellProvider.prototype.m_unitPositions=null;f.InARsDataCellProvider.prototype.m_units=null;f.InARsDataCellProvider.prototype.m_values=null;f.InARsDataCellProvider.prototype.m_roundedValues=null;f.InARsDataCellProvider.prototype.m_valuesFormatted=null;f.InARsDataCellProvider.prototype.m_formatStrings=null;f.InARsDataCellProvider.prototype.m_cellValueTypes=null;f.InARsDataCellProvider.prototype.m_cellDataTypes=null;f.InARsDataCellProvider.prototype.m_queryDataCellReferences=null;f.InARsDataCellProvider.prototype.m_exceptionNameWithSettings=null;f.InARsDataCellProvider.prototype.m_exceptionName=null;f.InARsDataCellProvider.prototype.m_exceptionAlertLevel=null;f.InARsDataCellProvider.prototype.m_exceptionSettingIndex=null;f.InARsDataCellProvider.prototype.m_planningCommandIds=null;f.InARsDataCellProvider.prototype.m_complexUnitIndices=null;f.InARsDataCellProvider.prototype.m_documentIds=null;f.InARsDataCellProvider.prototype.m_supportsUnifiedDataCells=false;f.InARsDataCellProvider.prototype.m_csDecimalPlaces=0;f.InARsDataCellProvider.prototype.m_csScalingFactor=0;f.InARsDataCellProvider.prototype.m_decimalPlaces=null;f.InARsDataCellProvider.prototype.m_scalingFactors=null;f.InARsDataCellProvider.prototype.m_explainQueryNames=null;f.InARsDataCellProvider.prototype.m_explainQueryName=null;f.InARsDataCellProvider.prototype.copyInARsDataCellProvider=function(o){this.m_supportsDataCellMixedValues=o.m_supportsDataCellMixedValues;this.m_supportsSAPDateFormat=o.m_supportsSAPDateFormat;this.m_supportsInputReadinessStates=o.m_supportsInputReadinessStates;this.m_supportsUnifiedDataCells=o.m_supportsUnifiedDataCells;var e=f.isNull(o.m_exceptionSettings)?null:o.m_exceptionSettings.getPermaCopy();var a=f.isNull(o.m_ocpStructure)?null:o.m_ocpStructure.getPermaCopy();this.setOcpStructure(a,o.m_columnsCount,o.m_rowsCount,e);};f.InARsDataCellProvider.prototype.setupProvider=function(a,q){this.setupApplicationContext(a);this.m_supportsSAPDateFormat=q.getCapabilitiesBase().supportsSapDate();this.m_supportsUnifiedDataCells=q.getCapabilitiesBase().supportsUnifiedDataCells();this.m_supportsDataCellMixedValues=q.getCapabilitiesBase().supportsDataCellMixedValues();this.m_supportsInputReadinessStates=q.supportsInputReadinessStates();};f.InARsDataCellProvider.prototype.releaseObject=function(){this.m_ocpStructure=null;this.m_exceptionSettings=null;this.m_csValueException=null;this.m_csMaxAlertLevelName=null;this.m_csExceptionSetting=f.XObjectExt.release(this.m_csExceptionSetting);this.m_csExceptionPriority=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_csExceptionPriority);this.m_csMaxAlertLevel=null;this.m_csFormattedValue=null;this.m_csFormatString=null;this.m_csPlanningCommandIds=null;this.m_csQueryDataCellReference=null;this.m_csFormattedCurrencyUnit=null;this.m_csCurrencyUnit=null;this.m_exceptions=f.XObjectExt.release(this.m_exceptions);this.m_inputEnabled=f.XObjectExt.release(this.m_inputEnabled);this.m_inputReadinessIndex=f.XObjectExt.release(this.m_inputReadinessIndex);this.m_lockedValue=f.XObjectExt.release(this.m_lockedValue);this.m_unitDescriptions=f.XObjectExt.release(this.m_unitDescriptions);this.m_unitTypes=f.XObjectExt.release(this.m_unitTypes);this.m_unitPositions=f.XObjectExt.release(this.m_unitPositions);this.m_units=f.XObjectExt.release(this.m_units);this.m_values=f.XObjectExt.release(this.m_values);this.m_valuesFormatted=f.XObjectExt.release(this.m_valuesFormatted);this.m_formatStrings=f.XObjectExt.release(this.m_formatStrings);this.m_cellValueTypes=f.XObjectExt.release(this.m_cellValueTypes);this.m_cellDataTypes=f.XObjectExt.release(this.m_cellDataTypes);this.m_queryDataCellReferences=f.XObjectExt.release(this.m_queryDataCellReferences);this.m_exceptionNameWithSettings=null;this.m_exceptionName=f.XObjectExt.release(this.m_exceptionName);this.m_exceptionAlertLevel=f.XObjectExt.release(this.m_exceptionAlertLevel);this.m_exceptionSettingIndex=f.XObjectExt.release(this.m_exceptionSettingIndex);this.m_planningCommandIds=f.XObjectExt.release(this.m_planningCommandIds);this.m_decimalPlaces=f.XObjectExt.release(this.m_decimalPlaces);this.m_scalingFactors=f.XObjectExt.release(this.m_scalingFactors);this.m_complexUnitIndices=f.XObjectExt.release(this.m_complexUnitIndices);this.m_documentIds=f.XObjectExt.release(this.m_documentIds);this.m_explainQueryNames=f.XObjectExt.release(this.m_explainQueryNames);f.DfApplicationContext.prototype.releaseObject.call(this);};f.InARsDataCellProvider.prototype.setOcpStructure=function(o,c,r,e){this.m_ocpStructure=o;this.m_rowsCount=r;this.m_columnsCount=c;if(f.notNull(this.m_ocpStructure)){this.m_exceptions=this.getColumn("Exceptions");if(f.isNull(e)){this.m_exceptionName=this.getColumn("ExceptionName");this.m_exceptionAlertLevel=this.getColumn("ExceptionAlertLevel");}else{this.m_exceptionSettings=e;this.m_exceptionSettingIndex=this.getColumn("ExceptionSettingIndex");}if(this.m_supportsInputReadinessStates){this.m_inputReadinessIndex=this.getColumn("InputReadinessIndex");}else{this.m_inputEnabled=this.getColumn("InputEnabled");}this.m_lockedValue=this.getColumn("LockedValue");this.m_unitDescriptions=this.getColumn("UnitDescriptions");this.m_unitTypes=this.getColumn("UnitTypes");this.m_unitPositions=this.getColumn("UnitPositions");this.m_units=this.getColumn("Units");this.m_complexUnitIndices=this.getColumn("UnitIndex");this.m_documentIds=this.getColumn("DocumentIds");this.m_values=this.getColumn("Values");this.m_valuesFormatted=this.getColumn("ValuesFormatted");if(this.m_supportsDataCellMixedValues){this.m_roundedValues=this.getColumn("ValuesRounded");}else{this.m_roundedValues=null;}this.m_planningCommandIds=this.getColumn("Actions");this.m_formatStrings=this.getColumn("CellFormat");this.m_cellValueTypes=this.getColumn("CellValueTypes");this.m_cellDataTypes=this.getColumn("CellDataType");this.m_queryDataCellReferences=this.getColumn("QueryDataCellReferences");this.m_explainQueryNames=this.getColumn("ExplainQueryName");if(this.m_supportsUnifiedDataCells){this.m_decimalPlaces=this.getColumn("NumericRounding");this.m_scalingFactors=this.getColumn("NumericShift");}}this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.m_csMaxAlertLevel=f.AlertLevel.NORMAL;};f.InARsDataCellProvider.prototype.getColumn=function(n){var i=this.m_ocpStructure.getStructureByKey(n);if(f.isNull(i)){return null;}return f.InARsEncodedValues.createByStructure(i);};f.InARsDataCellProvider.prototype.resetIfNotNull=function(c){if(f.notNull(c)){c.resetCursor();}};f.InARsDataCellProvider.prototype.resetCursor=function(){this.m_lastX=-1;this.m_lastY=-1;this.m_csIsInsideBounds=true;this.resetIfNotNull(this.m_exceptions);this.resetIfNotNull(this.m_exceptionName);this.resetIfNotNull(this.m_exceptionAlertLevel);this.resetIfNotNull(this.m_exceptionSettingIndex);this.resetIfNotNull(this.m_inputEnabled);this.resetIfNotNull(this.m_inputReadinessIndex);this.resetIfNotNull(this.m_lockedValue);this.resetIfNotNull(this.m_unitDescriptions);this.resetIfNotNull(this.m_unitTypes);this.resetIfNotNull(this.m_unitPositions);this.resetIfNotNull(this.m_units);this.resetIfNotNull(this.m_values);this.resetIfNotNull(this.m_roundedValues);this.resetIfNotNull(this.m_valuesFormatted);this.resetIfNotNull(this.m_planningCommandIds);this.resetIfNotNull(this.m_formatStrings);this.resetIfNotNull(this.m_cellValueTypes);this.resetIfNotNull(this.m_queryDataCellReferences);this.resetIfNotNull(this.m_cellDataTypes);this.resetIfNotNull(this.m_decimalPlaces);this.resetIfNotNull(this.m_scalingFactors);this.resetIfNotNull(this.m_explainQueryNames);this.resetIfNotNull(this.m_complexUnitIndices);this.resetIfNotNull(this.m_documentIds);};f.InARsDataCellProvider.prototype.notifyCursorChange=function(c,x,y){c.setColumn(x);c.setRow(y);c.reset();if(y<this.m_lastY||y===this.m_lastY&&x<this.m_lastX){this.resetCursor();}while(this.m_csIsInsideBounds&&(y>this.m_lastY||x>this.m_lastX)){this.readNextIndex();this.m_lastX++;if(this.m_lastX>=this.m_columnsCount||this.m_lastY===-1){this.m_lastX=0;this.m_lastY++;}}if(!this.m_csIsInsideBounds){c.setValueException(f.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){c.setFormattedValue("");}else{c.setFormattedValue(f.ValueException.NULL_VALUE.getName());}c.setInitialValue(null);}else if(y===this.m_lastY&&x===this.m_lastX){this.updateValidCell(c);}else{c.setValueException(f.ValueException.NULL_VALUE);if(this.m_supportsUnifiedDataCells){c.setFormattedValue("");}else{c.setFormattedValue(f.ValueException.NULL_VALUE.getName());}c.setInitialValue(null);}};f.InARsDataCellProvider.prototype.updateValidCell=function(c){c.setValueType(this.m_valueType);var i=this.m_supportsUnifiedDataCells&&this.m_csValueException!==f.ValueException.NORMAL&&this.m_csValueException!==f.ValueException.ZERO&&this.m_csValueException!==f.ValueException.MIXED_CURRENCIES_OR_UNITS;if(this.m_csValueException===f.ValueException.NULL_VALUE||this.m_csValueException===f.ValueException.UNDEFINED||i){c.setInitialValue(null);}else{c.setInitialValue(this.getXValue());}if(i){c.setFormattedValue("");}else{c.setFormattedValue(this.m_csFormattedValue);}c.setFormatString(this.m_csFormatString);c.setValueException(this.m_csValueException);if(f.isNull(this.m_csMaxAlertLevelName)){c.setMaxAlertLevelName(this.m_exceptionNameWithSettings);}else{c.setMaxAlertLevelName(this.m_csMaxAlertLevelName);}c.setMaxAlertLevel(this.m_csMaxAlertLevel);c.setDataEntryEnabled(this.m_csInputEnabled);c.setInputReadinessIndex(this.m_csInputReadinessIndex);c.setExceptionSettings(this.m_csExceptionSetting);c.setExceptionPriorities(this.m_csExceptionPriority);c.setOriginalValueLock(this.m_csLockedValue);c.setQueryDataCellReference(this.m_csQueryDataCellReference);if(f.notNull(this.m_complexUnitIndices)){c.setUnitIndex(this.m_csComplexUnitIndex);}if(f.notNull(this.m_documentIds)){c.setDocumentId(this.m_csDocumentId);}this.updateCurrencyUnit(c.getCurrencyUnitBase());var p=c.getPlanningCommandIdsBase();p.clear();if(f.XStringUtils.isNotNullAndNotEmpty(this.m_csPlanningCommandIds)){var a=f.XStringTokenizer.splitString(this.m_csPlanningCommandIds," ");if(f.notNull(a)){p.addAll(a);}}if(this.m_supportsUnifiedDataCells&&!this.m_valueType.isNumber()){c.setDecimalPlaces(0);c.setScalingFactor(0);}else{c.setDecimalPlaces(this.m_csDecimalPlaces);c.setScalingFactor(this.m_csScalingFactor);}if(f.notNull(this.m_explainQueryNames)){c.setExplainQueryName(this.m_explainQueryName);}};f.InARsDataCellProvider.prototype.updateCurrencyUnit=function(c){if(this.m_csCurrencyUnitType===1){c.setIsEmpty(false);c.setHasCurrency(true);c.setHasUnit(false);c.setIsMixed(false);}else if(this.m_csCurrencyUnitType===2){c.setIsEmpty(false);c.setHasCurrency(false);c.setHasUnit(true);c.setIsMixed(false);}else if(this.m_csCurrencyUnitType===3){c.setIsEmpty(false);c.setHasCurrency(true);c.setHasUnit(true);c.setIsMixed(false);}else if(this.m_csCurrencyUnitType===-1){c.setIsEmpty(false);c.setIsMixed(true);c.setHasCurrency(true);c.setHasUnit(true);}else{c.setIsEmpty(true);c.setHasCurrency(false);c.setHasUnit(false);c.setIsMixed(false);}if(!c.isEmpty()){if(f.notNull(this.m_csFormattedCurrencyUnit)){c.setFormatted(this.m_csFormattedCurrencyUnit);}if(f.notNull(this.m_csCurrencyUnit)){if(this.m_csCurrencyUnitPosition===2){c.setPrefix(this.m_csCurrencyUnit);}else{c.setSuffix(this.m_csCurrencyUnit);}}}};f.InARsDataCellProvider.prototype.getXValue=function(){if(this.m_valueType.isNumber()){return f.XDoubleValue.create(this.m_csDoubleValue);}else if(this.m_valueType===f.XValueType.TIMESPAN){return f.XTimeSpan.create(f.XDouble.convertToLong(this.m_csDoubleValue));}else if(this.m_valueType===f.XValueType.DATE){return f.XDate.createDateFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat);}else if(this.m_valueType===f.XValueType.TIME){return f.XTime.createTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat);}else if(this.m_valueType===f.XValueType.DATE_TIME){return f.XDateTime.createDateTimeFromStringWithFlag(this.m_csStringValue,this.m_supportsSAPDateFormat);}else if(this.m_valueType===f.XValueType.STRING){if(f.XStringUtils.isNotNullAndNotEmpty(this.m_csStringValue)){return f.XStringValue.create(this.m_csStringValue);}return null;}throw f.XException.createIllegalArgumentException(f.XStringUtils.concatenate2("Unsupported type:",this.m_valueType.getName()));};f.InARsDataCellProvider.prototype.setExceptionSettings=function(e){var i=false;if(e===-1){this.m_csExceptionSetting=null;this.m_csExceptionPriority=null;this.m_exceptionNameWithSettings=null;}else{var a=this.m_exceptionSettings.getListAt(e);this.m_csExceptionSetting=f.XHashMapOfStringByString.create();this.m_csExceptionPriority=f.XHashMapByString.create();var b=a.size();for(var c=0;c<b;c++){var d=a.getStructureAt(c);var g=d.getStringByKey("SettingName");var h=d.getStringByKey("Value");this.m_csExceptionSetting.put(g,h);this.m_csExceptionPriority.put(g,f.XIntegerValue.create(d.getIntegerByKey("Priority")));if(f.ExceptionSetting.getByName(g)===f.ExceptionSetting.ALERT_LEVEL){i=true;var j=f.XInteger.convertFromStringWithRadix(h,10);this.m_csMaxAlertLevel=f.QInAConverter.lookupAlertLevel(j);this.m_exceptionNameWithSettings=d.getStringByKey("ExceptionName");}}}if(!i){this.m_csMaxAlertLevel=f.AlertLevel.NORMAL;}};f.InARsDataCellProvider.prototype.readNextIndex=function(){if(f.notNull(this.m_values)&&this.m_values.hasNextValue()){if(f.isNull(this.m_exceptions)){this.m_csValueException=f.ValueException.NORMAL;}else{this.m_csValueException=f.QInAConverter.lookupException(this.m_exceptions.getNextIntegerValue());}if(f.notNull(this.m_exceptionSettingIndex)){this.setExceptionSettings(this.m_exceptionSettingIndex.getNextIntegerValue());}else if(f.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevel=f.QInAConverter.lookupAlertLevel(this.m_exceptionAlertLevel.getNextIntegerValue());}if(f.notNull(this.m_exceptionSettingIndex)){this.m_csMaxAlertLevelName=this.m_exceptionNameWithSettings;}else if(f.notNull(this.m_exceptionAlertLevel)){this.m_csMaxAlertLevelName=this.m_exceptionName.getNextStringValue();}if(f.notNull(this.m_valuesFormatted)){this.m_csFormattedValue=this.m_valuesFormatted.getNextStringValue();}if(f.notNull(this.m_planningCommandIds)){this.m_csPlanningCommandIds=this.m_planningCommandIds.getNextStringValue();}if(f.notNull(this.m_formatStrings)){this.m_csFormatString=this.m_formatStrings.getNextStringValue();}if(f.notNull(this.m_queryDataCellReferences)){this.m_csQueryDataCellReference=this.m_queryDataCellReferences.getNextStringValue();}if(f.notNull(this.m_units)){this.m_csFormattedCurrencyUnit=this.m_units.getNextStringValue();this.m_csCurrencyUnitType=1;}if(f.notNull(this.m_unitTypes)){this.m_csCurrencyUnitType=this.m_unitTypes.getNextIntegerValue();}if(f.notNull(this.m_unitPositions)){this.m_csCurrencyUnitPosition=this.m_unitPositions.getNextIntegerValue();}if(f.notNull(this.m_unitDescriptions)){this.m_csCurrencyUnit=this.m_unitDescriptions.getNextStringValue();}if(f.notNull(this.m_complexUnitIndices)){this.m_csComplexUnitIndex=this.m_complexUnitIndices.getNextIntegerValue();}if(f.notNull(this.m_documentIds)){this.m_csDocumentId=this.m_documentIds.getNextStringValue();}this.readNextValues();if(f.isNull(this.m_inputEnabled)){this.m_csInputEnabled=false;}else{this.m_csInputEnabled=this.m_inputEnabled.getNextIntegerValue()!==0;}if(f.notNull(this.m_inputReadinessIndex)){this.m_csInputReadinessIndex=this.m_inputReadinessIndex.getNextIntegerValue();}if(f.isNull(this.m_lockedValue)){this.m_csLockedValue=false;}else{this.m_csLockedValue=this.m_lockedValue.getNextIntegerValue()!==0;}if(f.notNull(this.m_decimalPlaces)){this.m_csDecimalPlaces=this.m_decimalPlaces.getNextIntegerValue();}if(f.notNull(this.m_scalingFactors)){this.m_csScalingFactor=this.m_scalingFactors.getNextIntegerValue();}if(f.notNull(this.m_explainQueryNames)){this.m_explainQueryName=this.m_explainQueryNames.getNextStringValue();}}else{this.m_csIsInsideBounds=false;}};f.InARsDataCellProvider.prototype.readNextValues=function(){if(this.m_supportsDataCellMixedValues){this.m_valueType=f.XValueType.DOUBLE;if(f.notNull(this.m_cellValueTypes)){this.m_valueType=f.QInAConverter.lookupValueTypeByInt(this.m_cellValueTypes.getNextIntegerValue());}if(this.m_csValueException===f.ValueException.NORMAL||this.m_csValueException===f.ValueException.MIXED_CURRENCIES_OR_UNITS){if(this.m_valueType.isNumber()){this.m_csDoubleValue=this.m_values.getNextDoubleValue();}else{this.m_csDoubleValue=0;this.m_values.skip();}if(f.notNull(this.m_roundedValues)){this.m_csStringValue=this.m_roundedValues.getNextStringValue();}}else{this.m_csDoubleValue=0;this.m_csStringValue=null;this.m_values.skip();if(f.notNull(this.m_roundedValues)){this.m_roundedValues.skip();}}}else{if(f.notNull(this.m_cellDataTypes)){var c=this.m_cellDataTypes.getNextStringValue();var a=f.QInAConverter.lookupValueType(c);this.m_valueType=a;if(a.isNumber()){this.m_csDoubleValue=this.m_values.getNextDoubleValue();this.m_csStringValue=null;}else{this.m_csStringValue=this.m_values.getNextStringValue();this.m_csDoubleValue=0;}}else if(f.notNull(this.m_cellValueTypes)){var i=this.m_cellValueTypes.getNextIntegerValue();this.m_valueType=f.QInAConverter.lookupValueTypeByInt(i);this.m_csDoubleValue=this.m_values.getNextDoubleValue();}else{throw f.XException.createIllegalStateException("Bad protocol: Values cannot be retrieved");}}};f.InARsDataCellProvider.prototype.getAvailableDataCellCount=function(){return this.m_columnsCount*this.m_rowsCount;};f.InARsDataCellProvider.prototype.getAvailableDataCellColumns=function(){return this.m_columnsCount;};f.InARsDataCellProvider.prototype.getAvailableDataCellRows=function(){return this.m_rowsCount;};f.InARsAxisProvider=function(){};f.InARsAxisProvider.prototype=new f.DfRsAxisProvider();f.InARsAxisProvider.prototype._ff_c="InARsAxisProvider";f.InARsAxisProvider.create=function(a,b,r,s,c){if(f.AxisType.ROWS!==b&&f.AxisType.COLUMNS!==b){throw f.XException.createIllegalStateException("illegal axis type");}var p=new f.InARsAxisProvider();p.setupProvider(a,r,s,c);return p;};f.InARsAxisProvider.prototype.m_dataCount=0;f.InARsAxisProvider.prototype.m_tuplesCount=0;f.InARsAxisProvider.prototype.m_tuplesCountTotal=0;f.InARsAxisProvider.prototype.m_tupleElementsCount=0;f.InARsAxisProvider.prototype.m_rsDimensionsList=null;f.InARsAxisProvider.prototype.m_supportsObtainability=false;f.InARsAxisProvider.prototype.m_supportsSapDateFormat=false;f.InARsAxisProvider.prototype.m_currentIndex=0;f.InARsAxisProvider.prototype.m_alertLevel=null;f.InARsAxisProvider.prototype.m_exceptionNames=null;f.InARsAxisProvider.prototype.m_requestContext=null;f.InARsAxisProvider.prototype.m_lbhToUdhConversionEnabled=false;f.InARsAxisProvider.prototype.m_memberOverrideTexts=null;f.InARsAxisProvider.prototype.copyInARsAxisProvider=function(o){this.m_dataCount=o.m_dataCount;this.m_tuplesCount=o.m_tuplesCount;this.m_tuplesCountTotal=o.m_tuplesCountTotal;this.m_tupleElementsCount=o.m_tupleElementsCount;if(f.notNull(o.m_rsDimensionsList)){var s=o.m_rsDimensionsList.size();this.m_rsDimensionsList=f.XArray.create(s);for(var i=0;i<s;i++){var a=o.m_rsDimensionsList.get(i);this.m_rsDimensionsList.set(i,a.clone());}}this.m_supportsObtainability=o.m_supportsObtainability;this.m_supportsSapDateFormat=o.m_supportsSapDateFormat;this.m_currentIndex=-1;if(f.notNull(o.m_alertLevel)){this.m_alertLevel=o.m_alertLevel.getPermaCopy();}if(f.notNull(o.m_exceptionNames)){this.m_exceptionNames=o.m_exceptionNames.getPermaCopy();}this.m_requestContext=o.m_requestContext;this.m_lbhToUdhConversionEnabled=o.m_lbhToUdhConversionEnabled;};f.InARsAxisProvider.prototype.setupProvider=function(a,r,s,b){this.setupApplicationContext(a);this.m_supportsObtainability=b;this.m_supportsSapDateFormat=s;this.m_requestContext=r;this.m_currentIndex=-1;this.m_memberOverrideTexts=f.XHashMapByString.create();};f.InARsAxisProvider.prototype.releaseObject=function(){if(f.notNull(this.m_rsDimensionsList)){var r=this.m_rsDimensionsList.size();for(var i=0;i<r;i++){f.XObjectExt.release(this.m_rsDimensionsList.get(i));this.m_rsDimensionsList.set(i,null);}f.XObjectExt.release(this.m_rsDimensionsList);this.m_rsDimensionsList=null;}this.m_alertLevel=f.XObjectExt.release(this.m_alertLevel);this.m_exceptionNames=f.XObjectExt.release(this.m_exceptionNames);this.m_requestContext=null;this.m_memberOverrideTexts=f.XObjectExt.release(this.m_memberOverrideTexts);f.DfRsAxisProvider.prototype.releaseObject.call(this);};f.InARsAxisProvider.prototype.getElementAsListByName=function(o,n){var i=o.getByKey(n);if(f.isNull(i)){return null;}if(i.isStructure()){var a=i;var b=a.getListByKey("Values");var v=a.getIntegerByKey("Size");if(v!==b.size()){throw f.XException.createIllegalStateException(f.XStringUtils.concatenate3("Indicated size of ",n," names and actual size differ!"));}if(v!==this.m_tuplesCount){throw f.XException.createIllegalStateException(f.XStringUtils.concatenate3("Indicated size of ",n," names and tuple count differ!"));}return b;}return i.isList()?i:null;};f.InARsAxisProvider.prototype.importRsDimensions=function(o,q,r){this.m_tuplesCount=o.getIntegerByKey("TupleCount");this.m_tuplesCountTotal=o.getIntegerByKeyExt("TupleCountTotal",-1);var i=o.getListByKey("Dimensions");var d=i.size();this.m_rsDimensionsList=f.XArray.create(d);var a=o.getListByKey("Tuples");if(d!==a.size()){throw f.XException.createIllegalStateException("Indicated dimension count and tuple element count is not the same");}var b=null;for(var c=0;c<d;c++){var e=i.getStructureAt(c);var n=this.getDimensionName(e,q,r);var g=e.getStructureByKey("Hierarchy");var h=null;if(f.notNull(q)){h=q.getDimensionByNameFromExistingMetadata(n);if(f.notNull(g)&&f.notNull(h)&&h.getModelCapabilities()!==null&&h.getModelCapabilities().supportsDimensionHierarchyLevels()&&!f.PrUtils.isListEmpty(g.getListByKey("Levels"))){if(f.isNull(b)){b=f.QInAImportFactory.createWithQueryManagerCapabilities(this.getApplication(),f.QModelFormat.INA_DATA,q.getQueryManager());}if(f.notNull(b)){q.stopEventing();b.importHierarchy(h,e);q.resumeEventing();}}}var j=f.InARsDimension.create(e,h,this.m_requestContext,r,this.m_lbhToUdhConversionEnabled);if(f.isNull(h)){j.setName(n);j.setText(e.getStringByKey("Description"));}var k=e.getStructureByKey("MemberTypes");if(f.notNull(k)){j.setMemberTypes(f.InARsEncodedValues.createByStructure(k));}j.setupFromRsTuple(a.getStructureAt(c));this.m_rsDimensionsList.set(c,j);}this.m_alertLevel=this.getElementAsListByName(o,"ExceptionAlertLevel");this.m_exceptionNames=this.getElementAsListByName(o,"ExceptionName");this.m_tupleElementsCount=d;};f.InARsAxisProvider.prototype.getDimensionName=function(i,q,r){var n=i.getStringByKey("Name");if(this.m_lbhToUdhConversionEnabled&&q.getUniversalDisplayHierarchies().getByName(n)!==null){var a=q.getAxis(r.getType());n=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a).getName();i.putString("Name",n);}return n;};f.InARsAxisProvider.prototype.setOcpStructure=function(q,o,d,r,l){this.m_dataCount=d;if(f.notNull(q)&&l){var a=q.getAxis(r.getType());this.m_lbhToUdhConversionEnabled=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(a)!==null;}if(f.notNull(o)){this.importRsDimensions(o,q,r);}};f.InARsAxisProvider.prototype.getRsDimensionSize=function(){return f.isNull(this.m_rsDimensionsList)?0:this.m_rsDimensionsList.size();};f.InARsAxisProvider.prototype.notifySetAxisMetadata=function(){var c=this.getCursorAxis();var d=this.getRsDimensionSize();c.startAddMetadata(d);for(var i=0;i<d;i++){var r=this.m_rsDimensionsList.get(i);c.addNextTupleElementMetadata(i,r);var a=r.getFields();var b=a.size();for(var e=0;e<b;e++){var g=a.get(e);var h=!this.m_supportsObtainability||g.isVisible();c.addNextFieldMetadata(g.getName(),g.getText(),h,g.getPresentationType(),g.getValueType());}}c.endAddMetadata();};f.InARsAxisProvider.prototype.resetIfNotNull=function(c){if(f.notNull(c)){c.resetCursor();}};f.InARsAxisProvider.prototype.resetAxisCursor=function(n){if(n!==0){throw f.XException.createIllegalStateException("The axis cursor can only be resetted to 0.");}var s=this.getRsDimensionSize();for(var d=0;d<s;d++){var r=this.m_rsDimensionsList.get(d);this.resetIfNotNull(r.getMemberIndexes());this.resetIfNotNull(r.getParentIndexes());this.resetIfNotNull(r.getDrillGroupIndexes());this.resetIfNotNull(r.getDisplayValues());this.resetIfNotNull(r.getAbsoluteLevelValues());this.resetIfNotNull(r.getDrillStates());this.resetIfNotNull(r.getNodeIds());this.resetIfNotNull(r.getChildCountValues());}};f.InARsAxisProvider.prototype.notifyAxisCursorChange=function(n){if(this.m_currentIndex>=n){this.resetAxisCursor(n);}this.m_currentIndex=n;var l=this.getCursorAxis();l.setTupleElementCursorBeforeStart();var i=!f.PrUtils.isListEmpty(this.m_alertLevel);var a=!f.PrUtils.isListEmpty(this.m_exceptionNames);var s=this.getRsDimensionSize();for(var d=0;d<s;d++){l.nextTupleElement();var r=this.m_rsDimensionsList.get(d);var m=r.getMemberIndexes();var b=m.getNextIntegerValue();l.setDimensionMemberType(r.getMemberType(b));var p=r.getParentIndexes();if(f.notNull(p)){l.setParentNodeIndex(m.getIndexForIntegerValue(p.getNextIntegerValue()));}var c=r.getDrillGroupIndexes();if(f.notNull(c)){l.setDrillGroupIndex(c.getNextIntegerValue());}var e=r.getDisplayValues();if(f.notNull(e)){l.setDisplayLevel(e.getNextIntegerValue());}var g=r.getDrillStates();if(f.notNull(g)){l.setDrillState(f.QInAConverter.lookupDrillState(g.getNextIntegerValue(),this.m_lbhToUdhConversionEnabled));}var h=r.getAbsoluteLevelValues();if(f.notNull(h)&&h.hasNextValue()){l.setAbsoluteLevel(h.getNextIntegerValue());}else{l.setAbsoluteLevel(-1);}var j=r.getNodeIds();if(f.notNull(j)){l.setNodeId(j.getNextStringValue());}var k=r.getChildCountValues();if(f.notNull(k)){var o=k.getNextIntegerValue();l.setChildCount(o);}else{l.setChildCount(-1);}if(i&&a){l.setAlertLevel(this.m_alertLevel.getIntegerAtExt(b,0));l.setExceptionName(this.m_exceptionNames.getStringAtExt(b,null));}this.iterateFields(l,r,b);}};f.InARsAxisProvider.prototype.iterateFields=function(l,r,m){var k=r.getKeyFieldIndex();var h=r.getHierarchyNavigationKeyIndex();var a=r.getFields();var b=a.size();var o=this.getMemberOverrideText(l,r,m);var t=r.getTextFieldIndex();for(var c=0;c<b;c++){l.nextFieldValue();var d=a.get(c);var i=d.getValueExceptionAt(m);if(i!==-1){l.setValueException(f.QInAConverter.lookupException(i));}var e=this.setValueAndReturnFormattedValue(l,d.getValues(),m,d.getValueType());if(f.notNull(o)&&t===c){e=o;l.setString(o);}if(c===k){l.setDimensionMemberName(e);l.setDimensionMemberNameValueException(l.getValueException());}if(c===h){l.setValueOfHierarchyNavigationKey(e);}l.setFormattedValue(e);}};f.InARsAxisProvider.prototype.getMemberOverrideText=function(l,r,m){var o=null;if(this.getApplication().getSession().hasFeature(f.FeatureToggleOlap.MEMBER_OVERRIDE_TEXTS)){var d=r.getDimensionType();if(d===f.DimensionType.ACCOUNT||d===f.DimensionType.MEASURE_STRUCTURE||d===f.DimensionType.SECONDARY_STRUCTURE){var k=r.getKeyFieldIndex();var a=r.getFields();var b=r.getName();var c=this.m_memberOverrideTexts.getByKey(b);if(f.isNull(c)){c=f.XHashMapOfStringByString.create();this.m_memberOverrideTexts.put(b,c);}var e=f.XInteger.convertToString(m);o=c.getByKey(e);if(!c.containsKey(e)){var g=a.get(k);var h=g.getValues().getStringAt(m);var i=this.getCursorAxis().getCursorResultSet();o=i.getDimensionMemberOverrideText(b,h);if(f.isNull(o)){var j=l.getDimensionAtCurrentPositionFromQueryModel();if(f.notNull(j)){if(f.notNull(h)){var n=j.getStructureMember(h);if(f.notNull(n)&&n.hasOverrideTextDefined()){o=n.getText();}}}}c.put(e,o);}}}return o;};f.InARsAxisProvider.prototype.setValueAndReturnFormattedValue=function(l,i,m,r){if(f.isNull(i)){return"InA Error: No data available";}var a=r;if(a===f.XValueType.UNSUPPORTED){var b=l.getField();if(f.isNull(b)||b.getMetadata()===null){a=f.XValueType.STRING;}else{a=b.getValueType();}}var c;var d=l.getDimensionMemberType();var e=d===f.MemberType.RESULT||d===f.MemberType.CONDITION_RESULT||d===f.MemberType.CONDITION_OTHERS_RESULT;var v=l.getValueException();var g=v===f.ValueException.NULL_VALUE;if(a===f.XValueType.STRING||e){c=i.getStringAt(m);if(e&&f.notNull(v)){if(d===f.MemberType.RESULT){c="Total";}else if(d===f.MemberType.CONDITION_RESULT){c="Total Including";}else{c="Total Remaining";}l.setValueException(f.ValueException.NORMAL);}if(l.getValueException()===f.ValueException.NULL_VALUE){c="";}l.setString(c);}else if(a===f.XValueType.BOOLEAN){var h=i.getBooleanAt(m);l.setBoolean(h);c=f.XBoolean.convertToString(h);}else if(a===f.XValueType.INTEGER){var j=i.getIntegerAt(m);l.setInteger(j);c=f.XInteger.convertToString(j);}else if(a===f.XValueType.LONG){var k=i.getLongAt(m);l.setLong(k);c=f.XLong.convertToString(k);}else if(a===f.XValueType.DOUBLE||a===f.XValueType.DECIMAL_FLOAT){var n=i.getDoubleAt(m);l.setDouble(n);c=f.XDouble.convertToString(n);}else if(a===f.XValueType.DATE){c=i.getStringAt(m);if(g){l.setNullByType(a);}else{var o=f.XDate.createDateFromStringWithFlag(c,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&f.notNull(o)){c=o.toIsoFormat();}l.setDate(o);}}else if(a===f.XValueType.TIME){c=i.getStringAt(m);if(g){l.setNullByType(a);}else{var t=f.XTime.createTimeFromStringWithFlag(c,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&f.notNull(t)){c=t.toIsoFormat();}l.setTime(t);}}else if(a===f.XValueType.DATE_TIME){c=i.getStringAt(m);if(g){l.setNullByType(a);}else{var p=f.XDateTime.createDateTimeFromStringWithFlag(c,this.m_supportsSapDateFormat);if(this.m_supportsSapDateFormat&&f.notNull(p)){c=p.toIsoFormat();}l.setDateTime(p);}}else if(a.isSpatial()){c=i.getStringAt(m);var q=f.XGeometryValue.createGeometryValueWithWkt(c);if(f.isNull(q)){l.setString(c);}else{var s=q.getValueType();if(s===f.XValueType.MULTI_POLYGON){l.setMultiPolygon(q);}else if(s===f.XValueType.LINE_STRING){l.setLineString(q);}else if(s===f.XValueType.MULTI_LINE_STRING){l.setMultiLineString(q);}else if(s===f.XValueType.POINT){l.setPoint(q);}else if(s===f.XValueType.POLYGON){l.setPolygon(q);}else if(s===f.XValueType.MULTI_POINT){l.setMultiPoint(q);}}}else{var u=f.XMessage.createErrorWithCode(f.OriginLayer.UTILITY,f.ErrorCodes.INVALID_DATATYPE,"Unsupported datatype",null,false,a);l.setErrorValue(u);c=u.getText();}return c;};f.InARsAxisProvider.prototype.getTuplesCount=function(){return this.m_tuplesCount;};f.InARsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tuplesCountTotal;};f.InARsAxisProvider.prototype.getTupleElementsCount=function(){return this.m_tupleElementsCount;};f.InARsAxisProvider.prototype.getDataCount=function(){return this.m_dataCount;};f.InARsAxisProvider.prototype.setTuplesCount=function(t,a){if(t<=this.m_tuplesCount){this.m_tuplesCount=t;this.m_tuplesCountTotal=a;}};f.InARsAxisProvider.prototype.resetMemberOverrideTexts=function(){f.XObjectExt.release(this.m_memberOverrideTexts);this.m_memberOverrideTexts=f.XHashMapByString.create();};f.InARsDimension=function(){};f.InARsDimension.prototype=new f.DfNameTextObject();f.InARsDimension.prototype._ff_c="InARsDimension";f.InARsDimension.create=function(i,d,r,a,l){var o=new f.InARsDimension();var n=i.getStringByKey("Name");var b=i.getStructureByKey("Hierarchy");var h;var c;if(f.isNull(b)){h=null;c=f.Alignment.DEFAULT_VALUE;}else{h=b.getStringByKey("Name");if(b.hasStringByKey("LowerLevelNodeAlignment")){var e=b.getStringByKeyExt("LowerLevelNodeAlignment","Default");c=f.QInAConverter.lookupLowerLevelNodeAlignment(e);}else{var g=b.getBooleanByKeyExt("ExpandBottomUp",false);c=g?f.Alignment.CHILDREN_ABOVE_PARENT:f.Alignment.CHILDREN_BELOW_PARENT;}}var j=i.getListByKey("Attributes");var k=f.QInAConverter.lookupDimensionType(i.getIntegerByKeyExt("DimensionType",0));o.setupExt(n,j,d,r,a,h,k,c,l);return o;};f.InARsDimension.prototype.m_fields=null;f.InARsDimension.prototype.m_displayValues=null;f.InARsDimension.prototype.m_drillStates=null;f.InARsDimension.prototype.m_memberIndexes=null;f.InARsDimension.prototype.m_parentIndexes=null;f.InARsDimension.prototype.m_drillGroupIndexes=null;f.InARsDimension.prototype.m_nodeIds=null;f.InARsDimension.prototype.m_childCountValues=null;f.InARsDimension.prototype.m_memberTypesEncoded=null;f.InARsDimension.prototype.m_memberTypes=null;f.InARsDimension.prototype.m_keyFieldIndex=0;f.InARsDimension.prototype.m_hierarchyNavigationFieldIndex=0;f.InARsDimension.prototype.m_textFieldIndex=0;f.InARsDimension.prototype.m_absoluteLevels=null;f.InARsDimension.prototype.m_lbhToUdhConversionEnabled=false;f.InARsDimension.prototype.m_isHierarchyActive=false;f.InARsDimension.prototype.m_hierarchyName=null;f.InARsDimension.prototype.m_dimensionType=null;f.InARsDimension.prototype.m_childAlignment=null;f.InARsDimension.prototype.cloneExt=function(a){var c=new f.InARsDimension();c.copyInARsDimension(this);return c;};f.InARsDimension.prototype.copyInARsDimension=function(o){this.setupWithNameText(o.getName(),o.getText());this.m_fields=f.XCollectionUtils.createListOfClones(o.m_fields);if(f.notNull(o.m_displayValues)){this.m_displayValues=o.m_displayValues.clone();}if(f.notNull(o.m_drillStates)){this.m_drillStates=o.m_drillStates.clone();}this.m_memberIndexes=o.m_memberIndexes.clone();if(f.notNull(o.m_parentIndexes)){this.m_parentIndexes=o.m_parentIndexes.clone();}if(f.notNull(o.m_drillGroupIndexes)){this.m_drillGroupIndexes=o.m_drillGroupIndexes.clone();}if(f.notNull(o.m_nodeIds)){this.m_nodeIds=o.m_nodeIds.clone();}if(f.notNull(o.m_childCountValues)){this.m_childCountValues=o.m_childCountValues.clone();}this.m_memberTypesEncoded=o.m_memberTypesEncoded.clone();this.m_memberTypes=o.m_memberTypes.createArrayCopy();this.m_keyFieldIndex=o.m_keyFieldIndex;this.m_hierarchyNavigationFieldIndex=o.m_hierarchyNavigationFieldIndex;this.m_textFieldIndex=o.m_textFieldIndex;if(f.notNull(this.m_absoluteLevels)){this.m_absoluteLevels=o.m_absoluteLevels.clone();}this.m_isHierarchyActive=o.m_isHierarchyActive;this.m_hierarchyName=o.m_hierarchyName;this.m_dimensionType=o.m_dimensionType;this.m_childAlignment=o.m_childAlignment;this.m_lbhToUdhConversionEnabled=o.m_lbhToUdhConversionEnabled;};f.InARsDimension.prototype.releaseObject=function(){this.m_fields=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fields);this.m_displayValues=f.XObjectExt.release(this.m_displayValues);this.m_drillStates=f.XObjectExt.release(this.m_drillStates);this.m_memberIndexes=f.XObjectExt.release(this.m_memberIndexes);this.m_parentIndexes=f.XObjectExt.release(this.m_parentIndexes);this.m_drillGroupIndexes=f.XObjectExt.release(this.m_drillGroupIndexes);this.m_nodeIds=f.XObjectExt.release(this.m_nodeIds);this.m_memberTypesEncoded=f.XObjectExt.release(this.m_memberTypesEncoded);this.m_memberTypes=f.XObjectExt.release(this.m_memberTypes);this.m_childCountValues=f.XObjectExt.release(this.m_childCountValues);this.m_absoluteLevels=f.XObjectExt.release(this.m_absoluteLevels);this.m_dimensionType=null;this.m_hierarchyName=null;this.m_childAlignment=null;f.DfNameTextObject.prototype.releaseObject.call(this);};f.InARsDimension.prototype.setupExt=function(n,i,d,r,a,h,b,c,l){this._setupInternal(n);this.m_keyFieldIndex=-1;this.m_hierarchyNavigationFieldIndex=-1;this.m_textFieldIndex=-1;this.m_hierarchyName=h;this.m_dimensionType=b;this.m_childAlignment=c;this.m_lbhToUdhConversionEnabled=l;var e=r===f.QContextType.SELECTOR;var g=f.XCollectionUtils.getByName(a.getRsDimensions(),n);this.m_isHierarchyActive=this._isHierarchyActiveForContext(g,h,e);if(f.notNull(i)){var j=null;var k=null;var m=null;var t=null;if(f.notNull(d)){j=d.getFlatKeyField();t=d.getTextField();this.m_dimensionType=d.getDimensionType();if(this.m_isHierarchyActive||e){k=d.getHierarchyKeyField();m=d.getHierarchyNavigationField();}}this.extractFieldIndices(i,a,d,j,k,m,t);}};f.InARsDimension.prototype.extractFieldIndices=function(i,r,d,a,h,b,t){var c=f.isNull(d)?0:-1;var e=-1;this.m_fields=f.XList.create();var g=i.size();for(var j=0;j<g;j++){var k=i.getStructureAt(j);var l=this.getFieldName(k,d,r);var p=f.QInAConverter.lookupPresentationType(k.getStringByKey("PresentationType"));if(p===f.PresentationType.KEY||f.notNull(a)&&f.XString.isEqual(l,a.getName())){c=j;}if(p===f.PresentationType.HIERARCHY_KEY||f.notNull(h)&&f.XString.isEqual(l,h.getName())){e=j;}if(f.notNull(b)&&f.XString.isEqual(l,b.getName())){this.m_hierarchyNavigationFieldIndex=j;}if(f.notNull(t)&&f.XString.isEqual(l,t.getName())){this.m_textFieldIndex=j;}if(f.isNull(t)&&p===f.PresentationType.HIERARCHY_TEXT){this.m_textFieldIndex=j;}if(f.isNull(t)&&this.m_textFieldIndex===-1&&p===f.PresentationType.TEXT){this.m_textFieldIndex=j;}if(f.notNull(d)&&d.isMeasureStructure()&&f.XString.startsWith(l,"1ROWCOUNT")){var m=f.XStringTokenizer.splitString(l,".").get(1);if(f.XString.endsWith(d.getKeyField().getName(),m)){c=j;}}this.m_fields.add(f.InARsField.create(l,k));}this.m_keyFieldIndex=e===-1?c:e;};f.InARsDimension.prototype._isHierarchyActiveForContext=function(r,h,i){if(f.isNull(r)){return f.XStringUtils.isNotNullAndNotEmpty(h);}return i?r.isSelectorHierarchyActive():r.isHierarchyActive();};f.InARsDimension.prototype.getFieldName=function(i,d,r){var n=i.getStringByKey("Name");if(f.notNull(d)&&this.m_lbhToUdhConversionEnabled){var q=d.getQueryModel();var a=f.XString.containsString(n,".")?f.XString.substring(n,0,f.XString.indexOf(n,".")):n;var u=q.getUniversalDisplayHierarchies().getByName(a);if(f.notNull(u)){var b=q.getAxis(r.getType());var o=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(b);if(f.notNull(o)){var c=o.getName();n=f.XString.replace(n,u.getName(),c);i.putString("Name",n);}}}return n;};f.InARsDimension.prototype.getHierarchyName=function(){return this.m_hierarchyName;};f.InARsDimension.prototype.getDimensionType=function(){return this.m_dimensionType;};f.InARsDimension.prototype.getFields=function(){return this.m_fields;};f.InARsDimension.prototype.getMemberIndexes=function(){return this.m_memberIndexes;};f.InARsDimension.prototype.getParentIndexes=function(){return this.m_parentIndexes;};f.InARsDimension.prototype.getDrillGroupIndexes=function(){return this.m_drillGroupIndexes;};f.InARsDimension.prototype.getDisplayValues=function(){return this.m_displayValues;};f.InARsDimension.prototype.getAbsoluteLevelValues=function(){return this.m_absoluteLevels;};f.InARsDimension.prototype.getDrillStates=function(){return this.m_drillStates;};f.InARsDimension.prototype.getNodeIds=function(){return this.m_nodeIds;};f.InARsDimension.prototype.setMemberTypes=function(e){this.m_memberTypesEncoded=e;this.m_memberTypes=f.XArray.create(this.m_memberTypesEncoded.size());for(var i=0;this.m_memberTypesEncoded.hasNextValue();i++){var m=this.m_memberTypesEncoded.getNextIntegerValue();this.m_memberTypes.set(i,f.QInAConverter.lookupMemberType(m));}};f.InARsDimension.prototype.getMemberType=function(m){if(f.isNull(this.m_memberTypes)||m>=this.m_memberTypes.size()){return f.MemberType.MEMBER;}return this.m_memberTypes.get(m);};f.InARsDimension.prototype.getKeyFieldIndex=function(){return this.m_keyFieldIndex;};f.InARsDimension.prototype.getHierarchyNavigationKeyIndex=function(){return this.m_hierarchyNavigationFieldIndex;};f.InARsDimension.prototype.getTextFieldIndex=function(){return this.m_textFieldIndex;};f.InARsDimension.prototype.getChildCountValues=function(){return this.m_childCountValues;};f.InARsDimension.prototype.setupFromRsTuple=function(r){var a=r.getStructureByKey("DisplayLevel");if(f.notNull(a)){this.m_displayValues=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("Level");if(f.notNull(a)){this.m_absoluteLevels=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("DrillState");if(f.notNull(a)){this.m_drillStates=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("MemberIndexes");if(f.notNull(a)){this.m_memberIndexes=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("ParentIndexes");if(f.notNull(a)){this.m_parentIndexes=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("DrillGroupIndexes");if(f.notNull(a)){this.m_drillGroupIndexes=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("TupleElementIds");if(f.notNull(a)){this.m_nodeIds=f.InARsEncodedValues.createByStructure(a);}a=r.getStructureByKey("ChildCount");if(f.notNull(a)){this.m_childCountValues=f.InARsEncodedValues.createByStructure(a);}};f.InARsDimension.prototype.getLowerLevelNodeAlignment=function(){return this.m_childAlignment;};f.InARsDimension.prototype.hasDefaultLowerLevelNodeAlignment=function(){return this.m_childAlignment===f.Alignment.DEFAULT_VALUE;};f.InARsDimension.prototype.isHierarchyActive=function(){return this.m_isHierarchyActive;};f.InARsDimension.prototype.setName=function(n){this.m_name=n;};f.InARsField=function(){};f.InARsField.prototype=new f.DfNameTextObject();f.InARsField.prototype._ff_c="InARsField";f.InARsField.create=function(n,i){var o=new f.InARsField();var a=i.getStringByKey("Description");var v=f.QInAConverter.lookupValueType(i.getStringByKey("ValueType"));var p;var b=i.getStringByKey("PresentationType");if(f.isNull(b)){p=f.PresentationType.UNDEFINED;}else{p=f.QInAConverter.lookupPresentationType(b);}var c=i.getStringByKeyExt("Obtainability","Always");var d=f.XString.isEqual("Always",c);var e=i.getListByKey("ValuesException");var g=i.getListByKey("Values");o.setupExt(n,a,g,d,e,v,p);return o;};f.InARsField.prototype.m_values=null;f.InARsField.prototype.m_valueExceptions=null;f.InARsField.prototype.m_isVisible=false;f.InARsField.prototype.m_valueType=null;f.InARsField.prototype.m_presentationType=null;f.InARsField.prototype.cloneExt=function(a){var c=new f.InARsField();var v=f.isNull(this.m_values)?null:this.m_values.getPermaCopy();var b=f.isNull(this.m_valueExceptions)?null:this.m_valueExceptions.getPermaCopy();c.setupExt(this.getName(),this.getText(),v,this.m_isVisible,b,this.m_valueType,this.m_presentationType);return c;};f.InARsField.prototype.setupExt=function(n,t,v,i,a,b,p){this.setupWithNameText(n,t);this.m_values=v;this.m_isVisible=i;this.m_valueExceptions=a;this.m_valueType=b;this.m_presentationType=p;};f.InARsField.prototype.releaseObject=function(){this.m_valueType=null;this.m_presentationType=null;this.m_values=f.XObjectExt.release(this.m_values);this.m_valueExceptions=f.XObjectExt.release(this.m_valueExceptions);f.DfNameTextObject.prototype.releaseObject.call(this);};f.InARsField.prototype.getValues=function(){return this.m_values;};f.InARsField.prototype.getValueExceptionAt=function(i){return f.isNull(this.m_valueExceptions)?-1:this.m_valueExceptions.getIntegerAt(i);};f.InARsField.prototype.isVisible=function(){return this.m_isVisible;};f.InARsField.prototype.getValueType=function(){return this.m_valueType;};f.InARsField.prototype.getPresentationType=function(){return this.m_presentationType;};f.MeasureValueHelpRsAxisProvider=function(){};f.MeasureValueHelpRsAxisProvider.prototype=new f.DfRsAxisProvider();f.MeasureValueHelpRsAxisProvider.prototype._ff_c="MeasureValueHelpRsAxisProvider";f.MeasureValueHelpRsAxisProvider.create=function(c){var o=new f.MeasureValueHelpRsAxisProvider();o.m_isCorrectDrillState=c.getQueryManager().getSession().hasFeature(f.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);return o;};f.MeasureValueHelpRsAxisProvider.prototype.m_nodes=null;f.MeasureValueHelpRsAxisProvider.prototype.m_rsDimension=null;f.MeasureValueHelpRsAxisProvider.prototype.m_tupleCountTotal=0;f.MeasureValueHelpRsAxisProvider.prototype.m_isCorrectDrillState=false;f.MeasureValueHelpRsAxisProvider.prototype.releaseObject=function(){f.DfRsAxisProvider.prototype.releaseObject.call(this);this.m_nodes=f.XObjectExt.release(this.m_nodes);this.m_rsDimension=f.XObjectExt.release(this.m_rsDimension);};f.MeasureValueHelpRsAxisProvider.prototype.setValueHelpNodes=function(n,m){if(f.notNull(n)&&f.notNull(m)){this.m_nodes=n;this.m_rsDimension=f.MeasureValueHelpRsDimension.create(m);var a=m.getAllStructureMembers();this.m_tupleCountTotal=f.notNull(a)?a.size():n.size();this.m_isCorrectDrillState=m.getQueryManager().getSession().hasFeature(f.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);}};f.MeasureValueHelpRsAxisProvider.prototype.copyValueHelpRsAxisProvider=function(o){this.m_isCorrectDrillState=o.m_isCorrectDrillState;if(f.notNull(o.m_nodes)){this.m_nodes=f.XList.create();for(var i=0;i<o.m_nodes.size();i++){var n=o.m_nodes.get(i);this.m_nodes.add(f.QValueHelpNode2.createValueHelpNode(n.getName(),n.getDimensionMember(),n.getDrillState(),n.getDisplayLevel(),n.getChildCount(),n.getAbsoluteLevel(),o.m_isCorrectDrillState));}}if(f.notNull(o.m_rsDimension)){this.m_rsDimension=o.m_rsDimension.clone();}};f.MeasureValueHelpRsAxisProvider.prototype.notifySetAxisMetadata=function(){var c=this.getCursorAxis();if(f.notNull(this.m_nodes)&&f.notNull(this.m_rsDimension)){c.startAddMetadata(1);c.addNextTupleElementMetadata(0,this.m_rsDimension);var a=this.m_rsDimension.getFields();for(var i=0;i<a.size();i++){var b=a.get(i);c.addNextFieldMetadata(b.getName(),b.getText(),true,b.getPresentationType(),b.getValueType());}}else{c.startAddMetadata(0);}c.endAddMetadata();};f.MeasureValueHelpRsAxisProvider.prototype.notifyAxisCursorChange=function(n){if(!f.XCollectionUtils.hasElements(this.m_nodes)||n>=this.m_nodes.size()){return;}var a=this.m_nodes.get(n);var d=a.getDimensionMember();var c=this.getCursorAxis();c.setTupleElementCursorBeforeStart();c.nextTupleElement();c.setDimensionMemberType(d.getMemberType());c.setNodeId(a.getName());c.setAbsoluteLevel(-1);c.setChildCount(-1);var b=a.getDimension();var e=b.getFields();for(var i=0;i<e.size();i++){c.nextFieldValue();var g=e.get(i);var h=d.getFieldValue(g);var v=f.notNull(h)?h.getString():"";c.setString(v);c.setFormattedValue(v);if(g===b.getKeyField()){c.setDimensionMemberName(v);}}};f.MeasureValueHelpRsAxisProvider.prototype.getTuplesCount=function(){return f.notNull(this.m_nodes)?this.m_nodes.size():0;};f.MeasureValueHelpRsAxisProvider.prototype.getTuplesCountTotal=function(){return this.m_tupleCountTotal;};f.MeasureValueHelpRsAxisProvider.prototype.getTupleElementsCount=function(){return f.notNull(this.m_rsDimension)?1:0;};f.MeasureValueHelpRsAxisProvider.prototype.getDataCount=function(){return this.getTuplesCount();};f.MeasureValueHelpRsAxisProvider.prototype.setTuplesCount=f.noSupport;f.QInAImportAction=function(){};f.QInAImportAction.prototype=new f.SyncAction();f.QInAImportAction.prototype._ff_c="QInAImportAction";f.QInAImportAction.create=function(c,a,i,m,p,b){var n=new f.QInAImportAction();n.setupAction(null,null,null,c);return n;};f.QInAImportAction.prototype.m_componentType=null;f.QInAImportAction.prototype.m_inaElement=null;f.QInAImportAction.prototype.m_modelComponent=null;f.QInAImportAction.prototype.m_parentComponent=null;f.QInAImportAction.prototype.m_modelContext=null;f.QInAImportAction.prototype.releaseObject=function(){this.m_componentType=null;this.m_inaElement=null;this.m_modelComponent=null;this.m_parentComponent=null;this.m_modelContext=null;f.SyncAction.prototype.releaseObject.call(this);};f.QInAImportAction.prototype.processSynchronization=function(s){var i=this.getActionContext();var c=i.importComponent(this.m_componentType,this.m_inaElement,this.m_modelComponent,this.m_parentComponent,this.m_modelContext);this.setData(c);this.endSync();return false;};f.QInAImportAction.prototype.callListener=function(e,l,d,c){l.onImportDone(e,d,c);};f.DfFunctionalValueHelpSyncAction=function(){};f.DfFunctionalValueHelpSyncAction.prototype=new f.SyncAction();f.DfFunctionalValueHelpSyncAction.prototype._ff_c="DfFunctionalValueHelpSyncAction";f.DfFunctionalValueHelpSyncAction.prototype.setupFunctionalValueHelp=function(d){this.setupAction(null,null,null,d);};f.DfFunctionalValueHelpSyncAction.prototype.processSynchronization=function(s){var q=this.getActionContext().getQueryManager();var c=q.getServiceConfig().getConnectionContainer();var r=f.XUri.createFromUrl(this.getPath(c).toString());r.addQueryElements(this.getUriParameters());var a=c.newRpcFunctionByServiceAndPath(f.ServerService.DIMENSION_EXTENSION,r);a.setStaticURL(true);var b=a.getRpcRequest();b.setMethod(f.HttpRequestMethod.HTTP_GET);b.setAcceptContentType(f.ContentType.APPLICATION_JSON);a.processFunctionExecution(s,this,null);return true;};f.DfFunctionalValueHelpSyncAction.prototype.onFunctionExecuted=function(e,r,c){this.clearMessages();if(e.getServerStatusCode()===f.HttpStatusCode.SC_NOT_FOUND){this.setData(f.XList.create());this.endSync();return;}this.addAllMessages(e);if(this.isValid()){this.setData(this.createDataFromResponse(r.getRootElementGeneric()));}this.endSync();};f.DfFunctionalValueHelpSyncAction.prototype.getUriParameters=function(){return null;};f.DfFunctionalValueHelpSyncAction.prototype.getPath=function(c){var n=this.getActionContext().getExternalName();if(f.XStringUtils.isNullOrEmpty(n)){n=this.getActionContext().getName();}var p=f.XStringBuffer.create();p.append("/dimension").append("/").append(n);p.append("/rsel");return p;};f.InAFusionLayer=function(){};f.InAFusionLayer.prototype=new f.SyncAction();f.InAFusionLayer.prototype._ff_c="InAFusionLayer";f.InAFusionLayer.URL_ACTION=null;f.InAFusionLayer.METADATA_ACTION=null;f.InAFusionLayer.MODEL_ACTION=null;f.InAFusionLayer.REPO_ACTION=null;f.InAFusionLayer.DATASOURCE_ACTION=null;f.InAFusionLayer.staticSetup=function(){f.InAFusionLayer.URL_ACTION=f.XComponentType.createType("QDocUrlAction",f.OlapComponentType.OLAP);f.InAFusionLayer.METADATA_ACTION=f.XComponentType.createType("QDocMetadataAction",f.OlapComponentType.OLAP);f.InAFusionLayer.MODEL_ACTION=f.XComponentType.createType("QDocModelAction",f.OlapComponentType.OLAP);f.InAFusionLayer.REPO_ACTION=f.XComponentType.createType("QDocRepoAction",f.OlapComponentType.OLAP);f.InAFusionLayer.DATASOURCE_ACTION=f.XComponentType.createType("QDocDataSourceAction",f.OlapComponentType.OLAP);};f.InAFusionLayer.prototype.m_queryServiceConfig=null;f.InAFusionLayer.prototype.m_dataSource=null;f.InAFusionLayer.prototype.m_connectionContainer=null;f.InAFusionLayer.prototype.m_serverMetadata=null;f.InAFusionLayer.prototype.m_content=null;f.InAFusionLayer.prototype.m_nextActionType=null;f.InAFusionLayer.prototype.m_nextDataSource=null;f.InAFusionLayer.prototype.m_nextDocument=null;f.InAFusionLayer.prototype.endSync=function(){this.setData(this);f.SyncAction.prototype.endSync.call(this);};f.InAFusionLayer.prototype.getConfig=function(){return this.m_queryServiceConfig;};f.InAFusionLayer.prototype.setConfig=function(c){this.m_queryServiceConfig=c;};f.InAFusionLayer.prototype.getConnectionContainer=function(){return this.m_connectionContainer;};f.InAFusionLayer.prototype.getServerMetadata=function(){return this.m_serverMetadata;};f.InAFusionLayer.prototype.setServerMetadata=function(s){this.m_serverMetadata=s;};f.InAFusionLayer.prototype.setConnection=function(c){this.m_connectionContainer=c;};f.InAFusionLayer.prototype.getConnection=function(){return this.m_connectionContainer;};f.InAFusionLayer.prototype.getContent=function(){return this.m_content;};f.InAFusionLayer.prototype.setContent=function(m){this.m_content=m;};f.InAFusionLayer.prototype.setContentExt=function(m,s){var d=f.DocConverterFactory.createDocConverter(s,f.QModelFormat.INA_REPOSITORY);if(f.notNull(d)){var e=d.convert(this.getApplication(),m,f.QModelFormat.INA_REPOSITORY);this.addAllMessages(e);if(this.isValid()){var a=e.getData();this.m_content=a;}}else{this.addErrorExt(f.OriginLayer.APPLICATION,0,f.XStringUtils.concatenate2("Cannot find document to ina_repo converter for ",s.getName()),null);}};f.InAFusionLayer.prototype.callListener=function(e,l,d,c){l.onDocFusionLayerDone(e,d,c);};f.InAFusionLayer.prototype.getApplication=function(){return this.getActionContext().getApplication();};f.InAFusionLayer.prototype.getSystemName=function(){return this.getSystemDescription().getSystemName();};f.InAFusionLayer.prototype.getSystemType=function(){return this.getSystemDescription().getSystemType();};f.InAFusionLayer.prototype.getSystemDescription=function(){return this.getConfig().getSystemDescription();};f.InAFusionLayer.prototype.hasPrivateConnection=function(){return this.getConfig().hasPrivateConnection();};f.InAFusionLayer.prototype.getConnectionName=function(){return this.getConfig().getConnectionName();};f.InAFusionLayer.prototype.getDataSource=function(){return this.m_dataSource;};f.InAFusionLayer.prototype.setDataSource=function(d){this.m_dataSource=d;};f.InAFusionLayer.prototype.getOlapEnv=function(){return this.getApplication().getOlapEnvironment();};f.InAFusionLayer.prototype.getNextDataSource=function(){return this.m_nextDataSource;};f.InAFusionLayer.prototype.setNextDataSource=function(d){this.m_nextDataSource=d;};f.InAFusionLayer.prototype.getNextActionType=function(){return this.m_nextActionType;};f.InAFusionLayer.prototype.setNextActionType=function(n){this.m_nextActionType=n;};f.InAFusionLayer.prototype.getNextDocument=function(){return this.m_nextDocument;};f.InAFusionLayer.prototype.setNextDocument=function(n){this.m_nextDocument=n;};f.InAFusionMainAction=function(){};f.InAFusionMainAction.prototype=new f.SyncAction();f.InAFusionMainAction.prototype._ff_c="InAFusionMainAction";f.InAFusionMainAction.createAndRun=function(s,l,c,a){var o=new f.InAFusionMainAction();o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionMainAction.prototype.m_nextDataSource=null;f.InAFusionMainAction.prototype.m_nextActionType=null;f.InAFusionMainAction.prototype.m_nextDocument=null;f.InAFusionMainAction.prototype.m_connections=null;f.InAFusionMainAction.prototype.processSynchronization=function(s){var a=this.getActionContext();this.setData(a);var c=this.getConfig();this.m_connections=f.XHashMapByString.create();var b=c.getConnectionContainer();if(f.notNull(b)){this.m_connections.put(b.getSystemName(),b);}var d=c.getDefinitionContent();if(f.notNull(d)){var e=d.getContentType();if(e.isTypeOf(f.QModelFormat.INA_REPOSITORY)||e.isTypeOf(f.QModelFormat.INA_CLONE)){this.m_nextActionType=f.InAFusionLayer.REPO_ACTION;this.m_nextDocument=d;}else if(e.isTypeOf(f.QModelFormat.INA_METADATA)){this.m_nextActionType=f.InAFusionLayer.METADATA_ACTION;this.m_nextDocument=d;}}var g=c.getDataSource();if(f.isNull(this.m_nextActionType)&&f.notNull(g)){if(f.XStringUtils.isNotNullAndNotEmpty(g.getName())){this.m_nextDataSource=g;this.m_nextActionType=f.InAFusionLayer.DATASOURCE_ACTION;}}if(this.getActiveSyncType()===f.SyncType.BLOCKING){while(f.notNull(this.m_nextActionType)){this.processLayer();}this.endSync();}else{this.processLayer();}return true;};f.InAFusionMainAction.prototype.processLayer=function(){if(f.isNull(this.m_nextActionType)){this.endSync();}else{var c=this.getConfig();var l=this;var s=this.getActiveSyncType();var a=null;if(s===f.SyncType.BLOCKING){l=null;}if(this.m_nextActionType===f.InAFusionLayer.URL_ACTION){a=f.InAFusionUrlAction.createAndRun(s,l,null,this,c,this.m_nextDataSource);}else if(this.m_nextActionType===f.InAFusionLayer.MODEL_ACTION){a=f.InAFusionModelAction.createAndRun(s,l,null,this,c,this.m_nextDataSource);}else if(this.m_nextActionType===f.InAFusionLayer.METADATA_ACTION){a=f.InAFusionMetadataAction.createAndRun(s,l,null,this,c,this.m_nextDataSource,this.m_nextDocument);}else if(this.m_nextActionType===f.InAFusionLayer.REPO_ACTION){a=f.InAFusionRepoAction.createAndRun(s,l,null,this,c,this.m_nextDataSource,this.m_nextDocument);}else if(this.m_nextActionType===f.InAFusionLayer.DATASOURCE_ACTION){a=f.InAFusionDataSourceAction.createAndRun(s,l,null,this,c,this.m_nextDataSource,this.m_nextDocument);}if(f.notNull(a)){if(s===f.SyncType.BLOCKING){var b=a.getData();this.onDocFusionLayerDone(a,b,null);}}else{this.m_nextActionType=null;this.addError(0,"Cannot find action type for fusion");if(s===f.SyncType.NON_BLOCKING){this.endSync();}}}};f.InAFusionMainAction.prototype.onDocFusionLayerDone=function(e,a,c){this.addAllMessages(e);this.getActionContext().addLayer(a);this.m_nextDataSource=null;this.m_nextActionType=null;this.m_nextDocument=null;if(this.isValid()){var b=a.getComponentType();var d=this.getActionContext();var g=a.getContent();this.m_nextActionType=a.getNextActionType();this.m_nextDataSource=a.getNextDataSource();this.m_nextDocument=a.getNextDocument();if(b===f.InAFusionLayer.METADATA_ACTION){var m=a;d.setConnectionContainer(m.getConnectionContainer());d.setServerMetadata(m.getServerMetadata());d.setMetadataContent(g);d.setDataSource(this.m_nextDataSource);}else if(b===f.InAFusionLayer.REPO_ACTION){d.setRepositoryContent(g);}}if(this.getActiveSyncType()===f.SyncType.NON_BLOCKING){if(f.notNull(this.m_nextActionType)){this.processLayer();}else{this.endSync();}}};f.InAFusionMainAction.prototype.callListener=function(e,l,d,c){l.onDocFusionDone(this,d,c);};f.InAFusionMainAction.prototype.getApplication=function(){return this.getActionContext().getApplication();};f.InAFusionMainAction.prototype.getConfig=function(){return this.getActionContext().getConfig();};f.InAFusionMainAction.prototype.getConnectionExt=function(s,i,n){var c=this.m_connections.getByKey(s);if(f.isNull(c)){var a=this.getApplication();var b=a.getConnectionPool();c=b.getConnectionExt(s,i,n);this.m_connections.put(s,c);}return c;};f.InACustomHierarchyProvider=function(){};f.InACustomHierarchyProvider.prototype=new f.SyncAction();f.InACustomHierarchyProvider.prototype._ff_c="InACustomHierarchyProvider";f.InACustomHierarchyProvider.create=function(q,c,e){var p=new f.InACustomHierarchyProvider();p.setupAction(null,null,null,q);p.m_queryProvider=f.XWeakReferenceUtil.getWeakRef(q);p.m_customHierarchyDefinition=f.XWeakReferenceUtil.getWeakRef(c);p.m_enforceRequest=e;return p;};f.InACustomHierarchyProvider.prototype.m_queryProvider=null;f.InACustomHierarchyProvider.prototype.m_customHierarchyDefinition=null;f.InACustomHierarchyProvider.prototype.m_enforceRequest=false;f.InACustomHierarchyProvider.prototype.releaseObject=function(){f.SyncAction.prototype.releaseObject.call(this);this.m_queryProvider=f.XObjectExt.release(this.m_queryProvider);this.m_customHierarchyDefinition=f.XObjectExt.release(this.m_customHierarchyDefinition);};f.InACustomHierarchyProvider.prototype.getApplication=function(){return this.getActionContext().getApplication();};f.InACustomHierarchyProvider.prototype.getCustomHierarchyDefinition=function(){return f.XWeakReferenceUtil.getHardRef(this.m_customHierarchyDefinition);};f.InACustomHierarchyProvider.prototype.getQueryProvider=function(){return f.XWeakReferenceUtil.getHardRef(this.m_queryProvider);};f.InACustomHierarchyProvider.prototype.getCustomHierarchyRepo=function(){return this.getQueryProvider().getOlapEnv().getCustomHierarchyRepository();};f.InACustomHierarchyProvider.prototype.getCustomHierarchySessionData=function(){var c=null;var a=this.getQueryProvider().getConnection();if(f.notNull(a)){c=a.getCustomObject(f.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA);if(f.isNull(c)){c=f.CustomHierarchySessionData.create();a.addCustomObject(f.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA,c);}}return c;};f.InACustomHierarchyProvider.prototype.processExecution=function(s,l,c){var d=this.getCustomHierarchyDefinition();if(f.isNull(d)||f.XStringUtils.isNullOrEmpty(d.getDimensionName())||!f.XCollectionUtils.hasElements(d.getChildNodes())){this.addError(f.ErrorCodes.INVALID_STATE,"Invalid custom hierarchy definition!");return this;}return this.processSyncAction(s,l,c);};f.InACustomHierarchyProvider.prototype.processSynchronization=function(s){var q=this.getQueryProvider();var c=this.getCustomHierarchyDefinition();var a=this.getCustomHierarchySessionData();var b=!this.m_enforceRequest&&f.notNull(a)?a.getHierarchyInAResponse(c):null;if(f.notNull(b)){this.applyCustomHierarchy(this.createCustomHierarchy(c,b));return false;}else if(f.notNull(a)&&a.registerOnActiveHierarchySubmit(c,this)){return true;}else{if(f.notNull(a)){a.flagHierarchySubmitActive(c);}var o=q.createFunction();this.setSyncChild(o);var r=o.getRpcRequest();r.setRequestStructure(this.fillCustomHierarchyRequestStructure(c));o.processFunctionExecution(s,this,null);return true;}};f.InACustomHierarchyProvider.prototype.fillCustomHierarchyRequestStructure=function(c){this.addProfileStep("fillCustomHierarchyRequestStructure");var d=f.PrFactory.createStructure();var i=this.getQueryProvider().setInnerStructure(d,"Analytics",f.ProcessingStep.HIERARCHY_SUBMIT);var e=f.QInAExportFactory.createForData(this.getApplication(),this.getQueryProvider().getModelCapabilities());var a=e.exportCustomHierarchyDefinition(c);i.put("Definition",a);this.addAllMessages(e);var b=d.getStructureByKey("Analytics");var g=b.putNewStructure("ProcessingDirectives");g.putString("ProcessingStep","TransientHierarchySubmit");this.endProfileStep();return d;};f.InACustomHierarchyProvider.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);var a=this.getCustomHierarchyDefinition();var i=null;if(e.isValid()&&f.notNull(r)&&f.notNull(a)){var b=f.PrUtils.getListProperty(r.getRootElement(),"Grids");var d=f.PrUtils.getStructureElement(b,0);var g=f.PrUtils.getListProperty(d,"Axes");var h=f.PrUtils.getStructureElement(g,0);var j=f.PrUtils.getListProperty(h,"Dimensions");var k=f.PrUtils.getStructureElement(j,0);var l=a.getDimensionName();var m=this.getQueryProvider().getQueryModel().getDimensionByName(l);if(f.isNull(m)||f.isNull(k)||!f.XString.isEqual(l,k.getStringByKey("Name"))){this.addError(f.ErrorCodes.OTHER_ERROR,"Invalid custom hierarchy submit response");this.finalizeCustomHierarchyProcessing(a,null);return;}i=k.getStructureByKey("Hierarchy");if(f.isNull(i)||i.getStringByKey("Name")===null){this.addError(f.ErrorCodes.OTHER_ERROR,f.XStringUtils.concatenate2("Invalid custom hierarchy submit response for dimension ",l));this.finalizeCustomHierarchyProcessing(a,null);return;}a.setName(i.getStringByKey("Name"));this.getCustomHierarchyRepo().addCustomHierarchy(a);this.applyCustomHierarchy(this.createCustomHierarchy(a,i));}this.finalizeCustomHierarchyProcessing(a,i);};f.InACustomHierarchyProvider.prototype.finalizeCustomHierarchyProcessing=function(c,i){var a=this.getCustomHierarchySessionData();if(f.notNull(a)){a.finishHierarchySubmit(c,i);}this.endSync();};f.InACustomHierarchyProvider.prototype.onCustomHierarchySubmitted=function(c,i){if(f.notNull(c)&&c.isEqualTo(this.getCustomHierarchyDefinition())&&this.getSyncState()===f.SyncState.PROCESSING){if(f.notNull(i)){this.applyCustomHierarchy(this.createCustomHierarchy(c,i));}this.endSync();}};f.InACustomHierarchyProvider.prototype.createCustomHierarchy=function(c,i){var d=this.getQueryProvider().getQueryModel().getDimensionByName(c.getDimensionName());var a=f.PrUtils.getStringProperty(i,"Name");var b=f.PrUtils.getStringProperty(i,"Version");var e=f.PrUtils.getStringProperty(i,"DueDate");var g=f.QHierarchy.createCustomHierarchy(d.getContext(),d,a.getString(),c.getDescription());if(f.notNull(b)){g.setHierarchyVersion(b.getString());}if(f.notNull(e)){var h=d.getQueryModel().getSystemType().isTypeOf(f.SystemType.ABAP);var j=h?f.XDate.createDateFromSAPFormat(e.getString()):f.XDate.createDateFromIsoFormat(e.getString());g.setHierarchyDueDate(j);}return g;};f.InACustomHierarchyProvider.prototype.applyCustomHierarchy=function(c){var d=c.getDimension();d.getHierarchyManager().addCustomHierarchy(c);var a=d.getCustomHierarchyDefinition();if(f.notNull(a)&&f.XString.isEqual(a.getName(),c.getName())){d.setHierarchy(c);var q=d.getQueryManager();if(f.notNull(q)){var v=q.getVariableProcessorState();if(q.isAutoVariableSubmitActive()&&v!==f.VariableProcessorState.PROCESSING_AUTO_SUBMIT&&v!==f.VariableProcessorState.PROCESSING_AUTO_SUBMIT_AFTER_REINIT){var h=d.getHierarchyNameVariableName();if(f.XStringUtils.isNotNullAndNotEmpty(h)){q.getVariable(h).setWinControlInAutoSubmit(false);}}}}this.setData(c);};f.InAUpdatedMDProcessor=function(){};f.InAUpdatedMDProcessor.prototype=new f.DfQContext();f.InAUpdatedMDProcessor.prototype._ff_c="InAUpdatedMDProcessor";f.InAUpdatedMDProcessor.create=function(c,r,i){var p=new f.InAUpdatedMDProcessor();p.setupProcessor(c,r,i);return p;};f.InAUpdatedMDProcessor.merge=function(i,a,q,r){q.queueEventing();var s=f.InAQMgrMergeSettings.create(true);f.InAUpdatedMDProcessor.updateCubeInfo(a,q);f.InAUpdatedMDProcessor.updateDimensions(i,a,q,r,s);f.InAUpdatedMDProcessor.updateVariables(i,a,q,s);f.InAUpdatedMDProcessor.updateFilters(i,a,q,s);f.InAUpdatedMDProcessor.updateConditions(i,a,q,s);f.InAUpdatedMDProcessor.updateSorting(i,a,q,s);f.InAUpdatedMDProcessor.updateUniversalDisplayHierarchies(i,a,q,s);q.resumeEventing();};f.InAUpdatedMDProcessor.updateCubeInfo=function(i,q){var c=q.getCubeInfo();if(f.notNull(c)&&f.notNull(i)){var a=i.getStringByKey("CreatedOn");var b=f.XDateTime.createDateTimeSafe(a);c.setCreatedOn(b);c.setCreatedBy(i.getStringByKey("CreatedBy"));var l=i.getStringByKey("LastDataUpdate");var d=f.XDateTime.createDateTimeSafe(l);c.setLastUpdateOn(d);var e=i.getStringByKey("DueDate");var g=f.XDateTime.createDateTimeSafe(e);c.setDueDate(g);}};f.InAUpdatedMDProcessor.updateFilters=function(i,a,q,s){var b=q.getFilterBase();var c=a.getStructureByKey("FixedFilter");f.InAUpdatedMDProcessor.updateFilter(i,f.OlapComponentType.FILTER_FIXED,c,b,s);var d=a.getStructureByKey("DynamicFilter");f.InAUpdatedMDProcessor.updateFilter(i,f.OlapComponentType.FILTER_DYNAMIC,d,b,s);};f.InAUpdatedMDProcessor.updateFilter=function(i,a,b,c,s){if(f.notNull(c)){var d=null;if(a===f.OlapComponentType.FILTER_DYNAMIC&&c.isDynamicFilterInitialized()){d=c.getDynamicFilter();}else if(a===f.OlapComponentType.FILTER_FIXED&&c.isFixedFilterInitialized()){d=c.getFixedFilter();}var n=f.isNull(b)?null:i.importComponent(f.OlapComponentType.FILTER_EXPRESSION,b,null,null,c.getQueryModel());if(f.notNull(d)){var e=f.isNull(n)?null:n.getCartesianProduct();var o=d.getCartesianProduct();if(f.notNull(o)){var g=f.InAUpdatedMDProcessor.getDimensionNamesForPlaceholderFilters(o);var h=g.getIterator();while(h.hasNext()){var j=h.next();var k=f.isNull(e)?null:e.getCartesianListByDimensionName(j);if(f.notNull(k)){o.getCartesianListByDimensionName(j).copyFrom(k,null);}else{o.removeByDimensionName(j);}}}}}};f.InAUpdatedMDProcessor.getDimensionNamesForPlaceholderFilters=function(c){return f.XStream.of(c).filter(function(l){var a=l;return f.notNull(a)&&a.size()===1&&a.getCartesianElement(0).getLow()!==null&&a.getCartesianElement(0).getLow().getValueType()!==null&&a.getCartesianElement(0).getLow().getValueType().isVariable();}.bind(this)).collect(f.XStreamCollector.toSetOfString(function(e){return e.getDimensionName();}.bind(this)));};f.InAUpdatedMDProcessor.updateDimensions=function(a,b,q,r,s){var c=b.getListByKey("Dimensions");if(f.notNull(c)){var l=c.size();for(var i=0;i<l;i++){var d=c.getStructureAt(i);var e=d.getStringByKey("Name");var g=q.getDimensionByName(e);var h=r.getDimensionByName(e);f.InAUpdatedMDProcessor.updateDimension(a,d,g,h,s);}}};f.InAUpdatedMDProcessor.updateDimension=function(i,a,d,r,s){if(f.notNull(d)&&f.notNull(a)){d.setText(a.getStringByKey("Description"));f.InAUpdatedMDProcessor.updateHierarchy(i,a,d);f.InAUpdatedMDProcessor.updateMembers(i,a,d,s);f.InAUpdatedMDProcessor.updateRsDimension(d,r);}};f.InAUpdatedMDProcessor.updateHierarchy=function(i,a,d){var b=a.getStructureByKey("Hierarchy");if(f.notNull(b)){i.importHierarchy(d,a);}};f.InAUpdatedMDProcessor.updateMembers=function(i,a,d,s){var b=a.getListByKey("Members");if(!f.PrUtils.isListEmpty(b)&&d.isMeasureStructure()){var k=d.getKeyField().getName();var t=d.getTextField();var c=f.isNull(t)?null:t.getName();if(f.XStringUtils.isNotNullAndNotEmpty(c)){var e=b.size();for(var m=0;m<e;m++){var g=b.getStructureAt(m);var h=g.getStringByKey(k);var j=g.getStringByKey(c);var l=d.getDimensionMember(h);if(f.notNull(l)&&!f.XString.isEqual(l.getText(),j)){l.setText(j);l.getFieldValue(t).setString(j);}}}}};f.InAUpdatedMDProcessor.updateRsDimension=function(d,r){if(f.notNull(r)&&f.notNull(d)){r.setText(d.getText());r.setHierarchyName(d.getHierarchyName());r.setHierarchyActive(d.isHierarchyActive());r.setSelectorHierarchyActive(d.isSelectorHierarchyActive());r.setLowerLevelNodeAlignment(d.getLowerLevelNodeAlignment());}};f.InAUpdatedMDProcessor.updateVariables=function(a,b,q,s){var v=q.getVariableContainer();var c=b.getListByKey("Variables");if(f.notNull(v)&&f.notNull(c)){var d=c.size();for(var i=0;i<d;i++){var e=f.PrUtils.getStructureElement(c,i);if(f.notNull(e)){var g=e.getStringByKey("Name");var h=v.getVariable(g);f.InAUpdatedMDProcessor.updateVariable(a,v,e,h,s);}}}};f.InAUpdatedMDProcessor.updateVariable=function(i,v,a,b,s){if(f.notNull(b)&&f.notNull(a)){b.setText(a.getStringByKey("Description"));var c=a.getBooleanByKeyExt("InputEnabled",false);b.setInputEnabled(c);if(b.getVariableType().isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)&&a.containsKey("IsInputEnabledAndExit")){b.setIsInputEnabledAndExit(a.getBooleanByKey("IsInputEnabledAndExit"));}f.InAUpdatedMDProcessor.updateVariableValues(i,v,a,b,s);}};f.InAUpdatedMDProcessor.updateVariableValues=function(i,v,a,b,s){var t=i.mode;i.mode=f.QModelFormat.INA_DATA;var c=b.getVariableType();if(c.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){var d=a.getStructureByKey("Values");if(f.notNull(d)){var e=b;i.importDimensionMemberVariable(a,e,v,e);}}else if(c.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){i.importSimpleTypeVariable(a,b,v);}i.mode=t;};f.InAUpdatedMDProcessor.updateConditions=function(i,a,q,s){var c=q.getConditionManagerBase();var b=a.getListByKey("Conditions");if(f.notNull(c)&&f.notNull(b)){i.importConditionManager(a,c,q);}};f.InAUpdatedMDProcessor.updateSorting=function(a,b,q,s){var c=q.getSortingManagerBase();var d=b.getListByKey("Sort");if(f.notNull(c)&&f.notNull(d)){var n=f.QSortingManager.create(q);a.importComponent(f.OlapComponentType.SORT_MANAGER,b,n,q,q);var e=n.getSortingOperations();var g=e.size();for(var i=0;i<g;i++){var h=e.get(i);var j=h.getComponentType();var o=null;if(j===f.OlapComponentType.FIELD_SORTING){var k=h.getField();o=c.getFieldSorting(k,true);}else if(j===f.OlapComponentType.MEASURE_SORTING){var m=h.getMeasure();o=c.getMeasureSorting(m,true);var l=h.getStructure();if(f.notNull(l)&&f.notNull(o)&&o.getStructure()!==l){o.setStructure(l);}}else if(j===f.OlapComponentType.DATA_CELL_SORTING){var p=h.getElementPath();o=c.getDataCellSorting(p,true);}else if(j===f.OlapComponentType.COMPLEX_SORTING){var r=h.getElementPath();o=c.getComplexSorting(r,true);}else if(j===f.OlapComponentType.DIMENSION_SORTING){var t=h.getDimension();o=c.getDimensionSorting(t,true);var u=h.getSortingType();if(u===f.SortType.FILTER){o.setSortByFilter();}else if(u===f.SortType.MEMBER_KEY){o.setSortByKey();var v=h.getCustomSort();var w=h.getCustomSortPosition();if(f.notNull(v)&&!v.isEmpty()){if(v!==o.getCustomSort()){o.setCustomSort(v);}if(w!==o.getCustomSortPosition()){o.setCustomSortPosition(h.getCustomSortPosition());}}}else if(u===f.SortType.MEMBER_TEXT){o.setSortByText();}else if(u===f.SortType.HIERARCHY){o.setSortByHierarchy();}}if(f.notNull(o)){var x=h.getDirection();if(x!==o.getDirection()){o.setDirection(x);}if(h.isPreserveGroupingEnabled()!==o.isPreserveGroupingEnabled()){o.setPreserveGrouping(h.isPreserveGroupingEnabled());}}}f.XObjectExt.release(n);}};f.InAUpdatedMDProcessor.updateUniversalDisplayHierarchies=function(a,b,q,s){var c=b.getStructureByKey("UniversalDisplayHierarchies");if(f.notNull(c)){var d=c.getListByKey("DefinedHierarchies");if(!f.PrUtils.isListEmpty(d)){var u=q.getUniversalDisplayHierarchiesBase();var e=d.size();for(var i=0;i<e;i++){var g=d.getStructureAt(i);var h=g.getStringByKey("Name");var j=f.isNull(u)?null:u.getByName(h);if(f.notNull(j)){var k=g.getBooleanByKeyExt("Active",j.isActive());j.setActive(k);}}}}};f.InAUpdatedMDProcessor.prototype.m_inaUpdatedMetadata=null;f.InAUpdatedMDProcessor.prototype.m_rsQueryModelDef=null;f.InAUpdatedMDProcessor.prototype.setupProcessor=function(c,r,i){this.setupContext(c);this.m_inaUpdatedMetadata=i;this.m_rsQueryModelDef=r;};f.InAUpdatedMDProcessor.prototype.releaseObject=function(){this.m_inaUpdatedMetadata=f.XObjectExt.release(this.m_inaUpdatedMetadata);this.m_rsQueryModelDef=null;};f.InAUpdatedMDProcessor.prototype.importMetadataAndUpdateState=function(){var p=this.getContext();var q=p.getQueryModel();if(f.notNull(q)){q.setIsMetadataUpdatedByAutoSubmit(false);var v=p.getVariableProcessorState();if(f.notNull(this.m_inaUpdatedMetadata)&&this.m_rsQueryModelDef.isAutoVariableSubmitActive()){this.updateModelMetadata(q);this.updateState(q);}else if(v===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT||v===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT_AFTER_REINIT){var a=p.getPreviousVariableProcessorState();p.setVariableProcessorState(a);}}};f.InAUpdatedMDProcessor.prototype.updateState=function(q){var p=this.getContext();if(f.notNull(p)){f.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(p,p.getVariableProcessorState()===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT,false);p.setVariableProcessorState(f.VariableProcessorState.SUBMITTED);p.prepareAfterVariables();}q.setIsMetadataUpdatedByAutoSubmit(true);};f.InAUpdatedMDProcessor.prototype.updateModelMetadata=function(q){var a=q.getApplication();var m=q.getModelCapabilities();var i=f.QInAImportFactory.createForMetadata(a,m);f.InAUpdatedMDProcessor.merge(i,this.m_inaUpdatedMetadata,q,this.m_rsQueryModelDef);};f.InAValueHelpProvider=function(){};f.InAValueHelpProvider.prototype=new f.DfQContext();f.InAValueHelpProvider.prototype._ff_c="InAValueHelpProvider";f.InAValueHelpProvider.prototype.m_valuehelpCallbacks=null;f.InAValueHelpProvider.prototype.m_valuehelpResults=null;f.InAValueHelpProvider.prototype.m_valuehelpResultNodes=null;f.InAValueHelpProvider.prototype.m_valuehelpIdentifiers=null;f.InAValueHelpProvider.prototype.m_valuehelpProcessedKeys=null;f.InAValueHelpProvider.prototype.m_valuehelpIdentifier=0;f.InAValueHelpProvider.prototype.m_exportValueHelp=null;f.InAValueHelpProvider.prototype.m_isBwHierarchyNameVariable=false;f.InAValueHelpProvider.prototype.setupExt=function(c){this.setContext(c);this.m_valuehelpIdentifier=0;};f.InAValueHelpProvider.prototype.releaseObject=function(){this.m_valuehelpCallbacks=f.XObjectExt.release(this.m_valuehelpCallbacks);this.m_valuehelpResults=f.XObjectExt.release(this.m_valuehelpResults);this.m_valuehelpResultNodes=f.XObjectExt.release(this.m_valuehelpResultNodes);this.m_valuehelpIdentifiers=f.XObjectExt.release(this.m_valuehelpIdentifiers);this.m_valuehelpProcessedKeys=f.XObjectExt.release(this.m_valuehelpProcessedKeys);this.m_exportValueHelp=f.XObjectExt.release(this.m_exportValueHelp);};f.InAValueHelpProvider.prototype.lazyLoadValueHelpObjects=function(){if(f.isNull(this.m_exportValueHelp)){this.m_exportValueHelp=f.QInAExportFactory.createForValueHelp(this.getApplication(),this.getModelCapabilities());this.m_valuehelpCallbacks=f.XHashMapByString.create();this.m_valuehelpResults=f.XHashMapByString.create();this.m_valuehelpResultNodes=f.XHashMapByString.create();this.m_valuehelpIdentifiers=f.XHashMapByString.create();this.m_valuehelpProcessedKeys=f.XHashSetOfString.create();}var i=this.m_valuehelpProcessedKeys.getIterator();while(i.hasNext()){var k=i.next();this.m_valuehelpResults.remove(k);this.m_valuehelpResultNodes.remove(k);this.m_valuehelpCallbacks.remove(k);this.m_valuehelpIdentifiers.remove(k);}this.m_valuehelpProcessedKeys.clear();};f.InAValueHelpProvider.prototype.getExport=function(){return this.m_exportValueHelp;};f.InAValueHelpProvider.prototype.getValueHelpResultSetNode=function(k){return this.m_valuehelpResultNodes.getByKey(k);};f.InAValueHelpProvider.prototype.getValueHelpResult=function(k){return this.m_valuehelpResults.getByKey(k);};f.InAValueHelpProvider.prototype.getNextValueHelpIdentifier=function(){this.m_valuehelpIdentifier++;return f.XInteger.convertToString(this.m_valuehelpIdentifier);};f.InAValueHelpProvider.prototype.getValueHelpIdentifier=function(){return f.XIntegerValue.create(this.m_valuehelpIdentifier);};f.InAValueHelpProvider.prototype.getValueHelpIdentifierString=function(){return f.XInteger.convertToString(this.m_valuehelpIdentifier);};f.InAValueHelpProvider.prototype.putValueHelpCallback=function(k,v){this.m_valuehelpCallbacks.put(k,v);};f.InAValueHelpProvider.prototype.putValueHelpIdentifier=function(k,v){this.m_valuehelpIdentifiers.put(k,v);};f.InAValueHelpProvider.prototype.putValueHelpResult=function(k,v){this.m_valuehelpResults.put(k,v);};f.InAValueHelpProvider.prototype.putValueHelpResultNode=function(k,v){this.m_valuehelpResultNodes.put(k,v);};f.InAValueHelpProvider.prototype.transform=function(e){if(e.hasErrors()){return f.ExtResult.create(null,e);}var d=e.getData();if(f.isNull(d)||d.hasErrors()){return f.ExtResult.create(null,e);}var a=d.getCursorResultSet();if(a.hasErrors()||a.getState()===f.ResultSetState.ERROR){return f.ExtResult.create(null,e);}var p=f.ProfileNode.create("ValueHelp",0);p.addProfileStep("Transforming ResultSet to List");var b=this.m_isBwHierarchyNameVariable?this.getOlapEnv().getCustomHierarchyRepository().getCustomHierarchyDefinitions().getValuesAsReadOnlyList():null;var g=f.XListOfString.create();if(f.notNull(b)){for(var c=0;c<b.size();c++){var i=b.get(c).getName();f.XCollectionUtils.addIfNotPresent(g,i);}}var q=d.getQueryManager();var j=q.getConnection();var k=f.notNull(j)?j.getCustomObject(f.CustomHierarchySessionData.CUSTOM_HIERARCHY_SESSION_DATA):null;if(f.notNull(k)){var l=k.getHierarchyDefinitionNames();for(var h=0;h<l.size();h++){var m=l.get(h);f.XCollectionUtils.addIfNotPresent(g,m);}}var n=f.XList.create();var o=f.XList.create();var r=a.getCursorRowsAxis();var s=q.getSession().hasFeature(f.FeatureToggleOlap.CORRECT_DRILLSTATE_IN_CLASSIC_RESULTSET);while(r.hasNextTuple()){r.nextTuple();while(r.hasNextTupleElement()){var t=r.nextTupleElement();var u=t.getDimensionMemberName();var v=t.getDimensionAtCurrentPositionFromQueryModel();var w=v.getDimensionMemberWithFormat(u,null);w.setName(u);w.setDimensionMemberNameValueException(t.getDimensionMemberNameValueException());while(r.hasNextFieldValue()){var x=r.nextFieldValue();var y=x.getField();var z=x.getValue();var A=null;if(f.notNull(z)){A=w.createAndAddFieldWithValue(y,z);}else if(y.getValueType().isDateBased()){A=w.createAndAddField(y);}if(f.notNull(A)){A.setValueException(x.getValueException());A.setFormattedValue(x.getFormattedValue());}if(f.notNull(z)){var B=z.toString();if(y.isEqualTo(v.getSelectorTextField())){w.setText(B);}else if(y.isEqualTo(v.getSelectorKeyField())){w.setName(B);}}}var C=w.getName();if(this.m_isBwHierarchyNameVariable){if(!g.contains(C)){n.add(f.XIntegerValue.create(t.getParentNodeIndex()));o.add(f.QValueHelpNode2.createValueHelpNode(C,w,t.getDrillState(),t.getDisplayLevel(),t.getChildCount(),t.getAbsoluteLevel(),s));}}else{n.add(f.XIntegerValue.create(t.getParentNodeIndex()));o.add(f.QValueHelpNode2.createValueHelpNode(C,w,t.getDrillState(),t.getDisplayLevel(),t.getChildCount(),t.getAbsoluteLevel(),s));}}}p.addProfileStep("Assign parent nodes");var D=o.size();for(var E=0;E<D;E++){var F=n.get(E).getInteger();if(F>=0){var G=o.get(F);G.addChildNode(o.get(E));}}f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(n);p.endProfileStep();e.getRootProfileNode().addProfileNode(p);return f.ExtResult.create(o,e);};f.InAValueHelpProvider.prototype.onQueryExecuted=function(e,r,c){var k=c.toString();var a=this.m_valuehelpCallbacks.getByKey(k);var b=this.m_valuehelpIdentifiers.getByKey(k);if(this.m_valuehelpResultNodes.containsKey(k)){var d=this.m_valuehelpResultNodes.getByKey(k);if(f.isNull(d)){d=this.transform(e);this.m_valuehelpResultNodes.put(k,d);}if(f.notNull(a)){a.onValuehelpExecuted(d,r,b);}}else{this.m_valuehelpResults.put(k,e);if(f.notNull(a)){a.onValuehelpExecuted(e,r,b);}}this.m_valuehelpProcessedKeys.add(k);};f.InAValueHelpProvider.prototype.hasValueHelpResultNodeForKey=function(v){return this.m_valuehelpResultNodes.containsKey(v);};f.InAValueHelpProvider.prototype.checkVariableType=function(v){this.m_isBwHierarchyNameVariable=this.getQueryManager()!==null&&this.getQueryManager().getSystemType().isTypeOf(f.SystemType.ABAP)&&v.getVariableType()===f.VariableType.HIERARCHY_NAME_VARIABLE;};f.InAValueHelpProvider.prototype.requiresMeasureValueHelp=function(d){return f.notNull(d)&&d.isStructure()&&!d.isHierarchyActive();};f.InAValueHelpProvider.prototype.createResultSetProvider=function(p,s,r){f.XBooleanUtils.checkTrue(this.getQueryManagerBase().getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");var v=r.getRowsAxisDef().getRsDimensions().get(0);if(this.requiresMeasureValueHelp(v)){var m=f.MeasureValueHelpRsProvider.create(this.getDimensionAccessor().getDimensionByName(v.getName()));var a=this.getValueHelpIdentifierString();if(this.hasValueHelpResultNodeForKey(a)){this.putValueHelpResultNode(a,m.getMeasureHelpNodes());}return m;}return f.InARsEnProvider.create(this.getQueryManager(),p,s,f.QContextType.SELECTOR);};f.RuntimeRemoteBlendingQueryUpdaterAction=function(){};f.RuntimeRemoteBlendingQueryUpdaterAction.prototype=new f.SyncAction();f.RuntimeRemoteBlendingQueryUpdaterAction.prototype._ff_c="RuntimeRemoteBlendingQueryUpdaterAction";f.RuntimeRemoteBlendingQueryUpdaterAction.create=function(s,q){var a=new f.RuntimeRemoteBlendingQueryUpdaterAction();a.setupAction(null,null,null,q);a.m_systemToDependentQueriesMap=s;a.m_queryNameToRpcFunctionMap=f.XHashMapByString.create();return a;};f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_queryNameToRpcFunctionMap=null;f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.m_systemToDependentQueriesMap=null;f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.remainingQueries=0;f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.releaseObject=function(){this.m_systemToDependentQueriesMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_systemToDependentQueriesMap);this.m_queryNameToRpcFunctionMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_queryNameToRpcFunctionMap);this.remainingQueries=0;f.SyncAction.prototype.releaseObject.call(this);};f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.processSynchronization=function(s){var q=this.getActionContext();if(q.getInitSettings().getMode()!==f.QueryManagerMode.RAW_QUERY){this.addErrorWithMessage("processMetadataSerializedQuery is only supported for query managers in raw query mode.");}var i=this.m_systemToDependentQueriesMap.getKeysAsIteratorOfString();while(i.hasNext()){var a=i.next();var b=false;var d=null;var c=this.m_systemToDependentQueriesMap.getByKey(a).getIterator();while(c.hasNext()){var e=f.XContent.createStringContent(f.QModelFormat.INA_DATA,c.next()).getJsonContent();var g=f.PrUtils.getStructureProperty(e,"Analytics");g=f.PrUtils.getStructureProperty(g,"Definition");d=f.PrUtils.getStringValueProperty(g,"Name",null);g=f.PrUtils.getStructureProperty(g,"ResultSetFeatureRequest");if(f.PrUtils.getBooleanValueProperty(g,"IsCubeBlendingSubquery",false)&&f.XString.isEqual(f.PrUtils.getStringValueProperty(g,"ResultFormat",null),"SerializedData")){b=true;}if(b&&f.notNull(d)){var h=this.getActionContext().createFunction();h.getRpcRequest().setRequestStructure(e);this.m_queryNameToRpcFunctionMap.put(d,h);}else{this.addErrorWithMessage("The query is not a blending subquery.");}}}var j=!this.hasErrors()&&this.m_queryNameToRpcFunctionMap.size()>0;if(j){this.remainingQueries=this.m_queryNameToRpcFunctionMap.size();var k=this.m_queryNameToRpcFunctionMap.getKeysAsIteratorOfString();while(k.hasNext()){var l=k.next();this.m_queryNameToRpcFunctionMap.getByKey(l).processFunctionExecution(s,this,f.XStringValue.create(l));}}return j;};f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.callListener=function(e,l,d,c){l.onRuntimeRemoteBlendingQueryUpdated(e,d,c);};f.RuntimeRemoteBlendingQueryUpdaterAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);this.remainingQueries--;if(e.isValid()&&f.notNull(r)){var s=r.getRootElement().getStructureByKey("SerializedData");if(f.notNull(s)){var v=s.getStringByKey("View");var a=s.getStringByKey("Cube");var m=this.getActionContext().getQueryServiceConfig().getDefinitionAsStructure();if(f.notNull(m)){var b=f.PrUtils.getStructureProperty(m,"Analytics");b=f.PrUtils.getStructureProperty(b,"DataSource");var d=f.PrUtils.getPropertyAsList(b,"Sources");if(f.notNull(d)){f.XCollectionUtils.findFirst(d,function(g){var h=f.PrUtils.asStructure(g);if(f.XString.isEqual(f.PrUtils.getStringValueProperty(h,"AliasName",null),c.getString())){h=f.PrUtils.getStructureProperty(h,"DefiningContext");h=f.PrUtils.getStructureProperty(h,"Definition");h=f.PrUtils.getStructureProperty(h,"DataSource");h=f.PrUtils.getStructureProperty(h,"SerializedData");if(f.notNull(v)&&f.PrUtils.getStringProperty(h,"View")!==null){h.putString("View",v);}if(f.notNull(a)&&f.PrUtils.getStringProperty(h,"Cube")!==null){h.putString("Cube",a);}return true;}return false;}.bind(this));}}this.getActionContext().getQueryServiceConfig().setDefinitionByStructure(f.QModelFormat.INA_DATA,m);}}if(this.remainingQueries===0){this.setData(f.RuntimeRemoteBlendingQueryUpdateResult.create(!this.hasErrors()));this.endSync();}};f.QInAExportImpl=function(){};f.QInAExportImpl.prototype=new f.QInAExport();f.QInAExportImpl.prototype._ff_c="QInAExportImpl";f.QInAExportImpl.prototype.exportMemberHelpRequest=function(q,d){return f.QInAValueHelp.exportMemberHelpRequest(this,q,d);};f.QInAExportImpl.prototype.exportPlanningVariableHelpRequest=function(p,d,v){return f.QInAValueHelp.exportPlanningVariableHelpRequest(this,p,d,v);};f.QInAExportImpl.prototype.exportVariableHelpRequest=function(q,d,v){return f.QInAValueHelp.exportVariableHelpRequest(this,q,d,v);};f.QInAExportImpl.prototype.exportComponent=function(c,m,a,b){var o=c;if(f.isNull(o)&&f.notNull(m)){o=m.getOlapComponentType();}var r=null;if(f.isNull(o)){this.addError(0,"No component type given for export");}else{var d;if(this.mode.isComplexModelFormat()){var e=this.mode;var g=a;if(f.isNull(g)){g=f.PrFactory.createStructure();}for(var i=0;i<e.getSizeOfComplexModelFormat();i++){this.mode=e.getSubModelFormat(i);var h=f.QModelFormat.getInAKeyForModelFormat(this.mode);d=this.lookupInAComponent(o,null);if(f.notNull(d)){var j=d.exportComponent(this,m,a,b);if(f.notNull(j)){g.put(h,j);}this.addDataRequest(e,o,m,g);}}r=g;this.mode=e;}else{d=this.lookupInAComponent(o,null);if(f.notNull(d)){r=d.exportComponent(this,m,a,b);}}}return r;};f.QInAExportImpl.prototype.addDataRequest=function(o,a,m,i){if(a===f.OlapComponentType.QUERY_MODEL&&o===f.QModelFormat.INA_CLONE_RENDERING&&this.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING){var q=m;var d=q.getQueryManager().serializeToContentExt(f.QModelFormat.INA_PERSISTED_QUERY_DATA,q.getModelCapabilities());if(f.notNull(d)){var b=d.getJsonContent();i.put(f.InAConstantsBios.QY_DATA_REQUEST,b);}}};f.QInAExportImpl.prototype.exportQueryModel=function(q,w,a){var b=f.QImExFlag.DEFAULT_ALL;if(!a){b=f.XMath.binaryXOr(b,f.QImExFlag.DATASOURCE);}if(!w){b=f.XMath.binaryXOr(b,f.QImExFlag.VARIABLES);}return this.exportComponent(null,q,null,b);};f.QInAExportImpl.prototype.exportLovRequest=function(q,w,a,l){return f.QInAValueHelp.exportResultSetRequest(this,l,q,w,a);};f.QInAExportImpl.prototype.exportQuerySettings=function(q,i){this.exportComponent(f.OlapComponentType.QUERY_SETTINGS,q,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportTotals=function(r,i){this.exportComponent(f.OlapComponentType.TOTALS,r,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportAxesSettings=function(q,i){this.exportComponent(f.OlapComponentType.AXES_SETTINGS,q,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportAxis=function(a,i){return this.exportComponent(f.OlapComponentType.AXIS,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDataCell=function(q,i){return this.exportComponent(f.OlapComponentType.DATA_CELL,q,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDataCells=function(q,i){this.exportComponent(f.OlapComponentType.DATA_CELLS,q,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDrillPathElement=function(e,i){var a=f.QImExFlag.DEFAULT_ALL;if(i){a=f.XMath.binaryXOr(a,f.QImExFlag.DRILL_CONTEXT);}return this.exportComponent(f.MemberType.DRILL_PATH_ELEMENT,e,null,a);};f.QInAExportImpl.prototype.exportDrillOperation=function(o){return this.exportComponent(f.OlapComponentType.DRILL_OPERATION,o,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDrillManager=function(d,i){this.exportComponent(f.OlapComponentType.DRILL_MANAGER,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportExceptionAggregationManager=function(e,i){this.exportComponent(f.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,e,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportStructureDimension=function(s){return this.exportComponent(null,s,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVariables=function(v,p){return this.exportComponent(null,v,p,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVariableContainer=function(v,p){this.exportComponent(f.OlapComponentType.VARIABLE_CONTAINER,v,p,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVariableList=function(v){return this.exportComponent(f.OlapComponentType.VARIABLE_LIST,v,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDataSource=function(d,w){var a=f.QImExFlag.DEFAULT_ALL;if(w){a=f.XMath.binaryXOr(a,f.QImExFlag.RUN_AS_USER);}return this.exportComponent(null,d,null,a);};f.QInAExportImpl.prototype.exportCurrencyTranslationManager=function(c,i){if(f.notNull(c)){if(c.shouldExportInAStructure(this.getMode())){this.exportComponent(f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,c,i,f.QImExFlag.DEFAULT_ALL);}if(c.shouldExportInAList(this.getMode())){this.exportComponent(f.OlapComponentType.CURRENCY_TRANSLATION_LIST,c,i,f.QImExFlag.DEFAULT_ALL);}}};f.QInAExportImpl.prototype.exportCurrencyTranslationElement=function(c,i){this.exportComponent(f.OlapComponentType.CURRENCY_TRANSLATION_ITEM,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportSortingManager=function(s,i){this.exportComponent(f.OlapComponentType.SORT_MANAGER,s,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportCondition=function(c){return this.exportComponent(f.OlapComponentType.CONDITION,c,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportMembers=function(d,a){this.exportComponent(f.OlapComponentType.MEMBERS,d,a,f.QImExFlag.DEFAULT_ALL);if(this.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var o=d.getOrderedStructureMemberNames();if(f.notNull(o)){var b=null;if(d.getDimensionType()===f.DimensionType.ACCOUNT){for(var i=0;i<o.size();i++){var m=o.get(i);var l=d.getLoadedStructureMember(m);if(f.notNull(l)&&!l.isModelDefinedMember()){if(f.isNull(b)){b=a.putNewList("OrderedStructureMemberNames");}b.addString(m);}}}else{b=a.putNewList("OrderedStructureMemberNames");b.addAllStrings(o);}}if(this.mode===f.QModelFormat.INA_REPOSITORY_DELTA){var c=d.getStructureLayout().getKeysAsReadOnlyListOfString();if(f.XCollectionUtils.hasElements(o)&&f.XCollectionUtils.hasElements(c)&&!f.XListUtils.isListOfStringEquals(o,c)){var e=a.putNewList("OrderedStructureLayoutMemberNames");e.addAllStrings(c);}}}};f.QInAExportImpl.prototype.exportConditionThreshold=function(c){return this.exportComponent(f.OlapComponentType.CONDITIONS_THRESHOLD,c,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDimensionMemberVariable=function(d,i){return this.exportComponent(f.VariableType.DIMENSION_MEMBER_VARIABLE,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportOptionListVariable=function(v,i){this.exportComponent(f.VariableType.OPTION_LIST_VARIABLE,v,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportRestrictedMeasure=function(r,i){this.exportComponent(f.MemberType.RESTRICTED_MEASURE,r,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVarianceMeasure=function(v,i){this.exportComponent(f.MemberType.VARIANCE,v,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportExceptionAggregationMeasure=function(e,i){this.exportComponent(f.MemberType.EXCEPTION_AGGREGATION,e,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportCurrencyMeasure=function(c,i){this.exportComponent(f.MemberType.CURRENCY_MEASURE,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportBasicMeasure=function(b,i){this.exportComponent(f.MemberType.BASIC_MEASURE,b,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFormulaMeasure=function(a,i){this.exportComponent(f.MemberType.FORMULA,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterTuple=function(a){return this.exportComponent(f.FilterComponentType.TUPLE,a,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterVirtualDatasource=function(a){return this.exportComponent(f.FilterComponentType.VIRTUAL_DATASOURCE,a,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterElement=function(a){return this.exportComponent(f.OlapComponentType.FILTER_ELEMENT,a,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterAlgebra=function(l,i){this.exportComponent(f.FilterComponentType.BOOLEAN_ALGEBRA,l,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportStructureMember=function(m){var r;if(this.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var a=this.exportComponent(null,m,null,f.QImExFlag.DEFAULT_ALL);r=a;}else{r=this.exportComponent(f.MemberType.ABSTRACT_MEMBER,m,null,f.QImExFlag.DEFAULT_ALL);}return r;};f.QInAExportImpl.prototype.exportCartesianList=function(c,i){return this.exportComponent(f.FilterComponentType.CARTESIAN_LIST,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportConvertedTimeCartesianList=function(c,i){return this.exportComponent(f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterExpression=function(a){return this.exportComponent(f.OlapComponentType.FILTER_EXPRESSION,a,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFixedFilter=function(a,i){this.exportComponent(f.OlapComponentType.FILTER_FIXED,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDynamicFilter=function(a,i){this.exportComponent(f.OlapComponentType.FILTER_DYNAMIC,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVisibilityFilter=function(a,i){this.exportComponent(f.OlapComponentType.FILTER_VISIBILITY,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilter=function(a,i){this.exportComponent(f.OlapComponentType.SELECTOR,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportValueHelpFilter=function(d,i){return this.exportComponent(f.OlapComponentType.SELECTOR,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterOperation=function(a,i){this.exportComponent(f.FilterComponentType.OPERATION,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportCellValueOperand=function(c){return this.exportComponent(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND,c,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterGeo=function(o,i){this.exportComponent(f.FilterComponentType.SPATIAL_FILTER,o,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFilterCartesianProduct=function(c,i){this.exportComponent(f.FilterComponentType.CARTESIAN_PRODUCT,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportConditionManager=function(c,i){this.exportComponent(f.OlapComponentType.CONDITIONS_MANAGER,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDimension=function(d,i){var a=d.getDimensionType();if(a===f.DimensionType.FORMULA_CALCULATED_DIMENSION||a===f.DimensionType.MEASURE_BASED_FILTER_CALCULATED_DIMENSION){return this.exportComponent(f.DimensionType.FORMULA_CALCULATED_DIMENSION,d,i,f.QImExFlag.DEFAULT_ALL);}else if(a===f.DimensionType.CALCULATED_DIMENSION||a===f.DimensionType.FILTER_ACROSS_MODELS_CALCULATED_DIMENSION){return this.exportCalculatedDimension(d,i);}return this.exportComponent(f.OlapComponentType.ABSTRACT_DIMENSION,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportCalculatedDimension=function(d,i){return this.exportComponent(f.DimensionType.CALCULATED_DIMENSION,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportVariable=function(v,i){return this.exportComponent(v.getVariableType(),v,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportHierarchy=function(d,i){this.exportComponent(f.OlapComponentType.HIERARCHY,d,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportDimensions=function(q,i){this.exportComponent(f.OlapComponentType.DIMENSIONS,q,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportExceptions=function(s,i){this.exportComponent(f.OlapComponentType.EXCEPTION_MANAGER,s,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFormulaExceptionManager=function(a,i){this.exportComponent(f.OlapComponentType.FORMULA_EXCEPTION_MANAGER,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportFormulaException=function(a,i){this.exportComponent(f.OlapComponentType.FORMULA_EXCEPTION,a,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportPreQuery=function(q){return this.exportComponent(f.OlapComponentType.QUERY_MODEL,q,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportUniversalDisplayHierarchies=function(u,i){this.exportComponent(f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,u,i,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportCustomHierarchyDefinition=function(c){return this.exportComponent(f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,c,null,f.QImExFlag.DEFAULT_ALL);};f.QInAExportImpl.prototype.exportBlendingMappings=function(m){return f.QInADataSourceBlending.exportBlendingMappings(m);};f.QInAExportImpl.prototype.exportQueryCells=function(c,i){this.exportComponent(f.OlapComponentType.QUERY_CELLS,c,i,f.QImExFlag.DEFAULT_ALL);};f.QInAImportImpl=function(){};f.QInAImportImpl.prototype=new f.QInAImport();f.QInAImportImpl.prototype._ff_c="QInAImportImpl";f.QInAImportImpl.prototype.importComponent=function(c,i,m,p,a){if(f.notNull(m)){if(this.mode===f.QModelFormat.INA_METADATA||this.mode===f.QModelFormat.INA_CLONE||this.mode===f.QModelFormat.INA_CLONE_RENDERING||this.mode===f.QModelFormat.INA_METADATA_CORE||this.mode===f.QModelFormat.INA_METADATA_RENDERING||m.isEventingStopped()){m.stopEventing();}else{m.queueEventing();}}var v=true;var d=f.notNull(m)&&m.getOlapComponentType()===f.OlapComponentType.QUERY_MODEL&&this.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);if(d&&f.notNull(m)){var b=m.getDrillManager();if(f.notNull(i)&&i.asStructure().containsKey("ValidateContextFreeNavigations")){v=i.asStructure().getBooleanByKey("ValidateContextFreeNavigations");}else{v=b.isValidatingContextFreeNavigations();}b.setValidateContextFreeNavigations(false);}var e=this.innerImportComponent(c,i,m,p,a);if(f.notNull(m)){m.resumeEventing();if(d){m.getDrillManager().setValidateContextFreeNavigations(v);}}if(c===f.OlapComponentType.QUERY_MODEL&&f.notNull(m)&&f.notNull(i)){var q=m;if(this.mode===f.QModelFormat.INA_METADATA||this.mode===f.QModelFormat.INA_METADATA_CORE||this.mode===f.QModelFormat.INA_METADATA_RENDERING){q.setServerBaseSerialization(this.mode,f.QModelOrigin.IMPORTER,i.asStructure());}}return e;};f.QInAImportImpl.prototype.innerImportComponent=function(c,a,m,p,b){var o=c;if(f.isNull(o)&&f.notNull(m)){o=m.getOlapComponentType();}if(f.isNull(o)&&f.notNull(a)&&a.isStructure()){var d=a;var e=d.getStringByKey("CType");if(f.notNull(e)){o=f.QInAConverter.lookupComponentType(e);}}if(f.isNull(o)){this.addError(0,"Cannot find olap component type for import");return m;}var g;var h=m;if(this.mode===f.QModelFormat.INA_METADATA){this.mode=f.QModelFormat.INA_METADATA_CORE;g=this.lookupInAComponent(o,a);if(f.isNull(g)){return m;}h=g.importComponent(this,a,h,p,b);this.mode=f.QModelFormat.INA_DATA;g=this.lookupInAComponent(o,a);if(f.isNull(g)){return m;}h=g.importComponent(this,a,h,p,b);this.mode=f.QModelFormat.INA_METADATA;}else if(this.mode.isComplexModelFormat()){var j=this.mode;var k=a;for(var i=0;i<j.getSizeOfComplexModelFormat();i++){this.mode=j.getSubModelFormat(i);var l=f.QModelFormat.getInAKeyForModelFormat(this.mode);var n=k.getByKey(l);g=this.lookupInAComponent(o,n);if(f.isNull(g)){return m;}h=g.importComponent(this,n,h,p,b);}this.mode=j;}else{g=this.lookupInAComponent(o,a);if(f.isNull(g)){return m;}h=g.importComponent(this,a,h,p,b);}return h;};f.QInAImportImpl.prototype.importQueryModel=function(i,q){this.importComponent(f.OlapComponentType.QUERY_MODEL,i,q,null,q);};f.QInAImportImpl.prototype.importQuerySettings=function(i,q){this.importComponent(f.OlapComponentType.QUERY_SETTINGS,i,null,null,q);};f.QInAImportImpl.prototype.importDataSource=function(s){return this.importComponent(f.OlapComponentType.DATA_SOURCE,s,null,null,null);};f.QInAImportImpl.prototype.importTotals=function(i,r,c){this.importComponent(f.OlapComponentType.TOTALS,i,r,null,c);};f.QInAImportImpl.prototype.importAttribute=function(i,d,c){this.importComponent(f.OlapComponentType.ATTRIBUTE,i,null,d,c);};f.QInAImportImpl.prototype.importAxesSettings=function(i,q){this.importComponent(f.OlapComponentType.AXES_SETTINGS,i,q,null,q);};f.QInAImportImpl.prototype.importAxis=function(i,a,c){this.importComponent(f.OlapComponentType.AXIS,i,a,null,c);};f.QInAImportImpl.prototype.importExceptionAggregationManager=function(i,e,c){this.importComponent(f.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER,i,e,null,c);};f.QInAImportImpl.prototype.importSortingManager=function(i,q,c){this.importComponent(f.OlapComponentType.SORT_MANAGER,i,q,null,c);};f.QInAImportImpl.prototype.importCurrencyTranslationManager=function(i,q,c){this.importComponent(f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER,i,q,null,c);this.importComponent(f.OlapComponentType.CURRENCY_TRANSLATION_LIST,i,q,null,c);this.importComponent(f.OlapComponentType.MEASURE_TRANSLATIONS,i,q,null,c);};f.QInAImportImpl.prototype.importCurrencyTranslationElement=function(i,c,a){this.importComponent(f.OlapComponentType.CURRENCY_TRANSLATION_ITEM,i,c,null,a);};f.QInAImportImpl.prototype.importQueryCells=function(i,q,c){this.importComponent(f.OlapComponentType.QUERY_CELLS,i,q,null,c);};f.QInAImportImpl.prototype.importHierarchy=function(d,i){this.importComponent(f.OlapComponentType.HIERARCHY,i,d,null,d.getContext());};f.QInAImportImpl.prototype.importExceptions=function(i,m){this.importComponent(f.OlapComponentType.EXCEPTION_MANAGER,i,m,null,null);};f.QInAImportImpl.prototype.importFormulaExceptionManager=function(i,a,c){this.importComponent(f.OlapComponentType.FORMULA_EXCEPTION_MANAGER,i,a,null,c);};f.QInAImportImpl.prototype.importFormulaException=function(i,a,b,c){return this.importComponent(f.OlapComponentType.FORMULA_EXCEPTION,i,a,b,c);};f.QInAImportImpl.prototype.importUniversalDisplayHierarchies=function(i,u,c){this.importComponent(f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES,i,u,null,c);};f.QInAImportImpl.prototype.importFixedFilter=function(i,a,c){this.importComponent(f.OlapComponentType.FILTER_FIXED,i,null,a,c);};f.QInAImportImpl.prototype.importDynamicFilter=function(i,a,c){this.importComponent(f.OlapComponentType.FILTER_DYNAMIC,i,null,a,c);};f.QInAImportImpl.prototype.importVisibilityFilter=function(i,a,c){this.importComponent(f.OlapComponentType.FILTER_VISIBILITY,i,null,a,c);};f.QInAImportImpl.prototype.importFilterElement=function(i,a,b,c){return this.importComponent(f.OlapComponentType.FILTER_ELEMENT,i,a,b,c);};f.QInAImportImpl.prototype.importFilterAlgebra=function(a,i,c){return this.importComponent(f.FilterComponentType.BOOLEAN_ALGEBRA,i,null,a,c);};f.QInAImportImpl.prototype.importCartesianList=function(i,c,a,b){return this.importComponent(f.FilterComponentType.CARTESIAN_LIST,i,c,a,b);};f.QInAImportImpl.prototype.importConvertedTimeCartesianList=function(i,c,a,b){return this.importComponent(f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST,i,c,a,b);};f.QInAImportImpl.prototype.importFilterExpression=function(q,i,p,c){return this.importComponent(f.OlapComponentType.FILTER_EXPRESSION,i,q,p,c);};f.QInAImportImpl.prototype.importFilter=function(i,a,c){this.importComponent(f.OlapComponentType.SELECTOR,i,a,null,c);};f.QInAImportImpl.prototype.importFilterOperation=function(i,c,a){return this.importComponent(f.FilterComponentType.OPERATION,i,null,c,a);};f.QInAImportImpl.prototype.importFilterCellValueOperand=function(i,c){return this.importComponent(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND,i,null,null,c);};f.QInAImportImpl.prototype.importFilterGeo=function(a,i,c){return this.importComponent(f.FilterComponentType.SPATIAL_FILTER,i,null,a,c);};f.QInAImportImpl.prototype.importDrillManager=function(i,d,c){this.importComponent(f.OlapComponentType.DRILL_MANAGER,i,d,null,c);};f.QInAImportImpl.prototype.importDrillPathElement=function(i,d,c){return this.importComponent(f.MemberType.DRILL_PATH_ELEMENT,i,null,d,c);};f.QInAImportImpl.prototype.importDrillOperation=function(i,d,c){this.importComponent(f.OlapComponentType.DRILL_OPERATION,i,null,d,c);};f.QInAImportImpl.prototype.importVariableManager=function(i,v,c){this.importComponent(f.OlapComponentType.VARIABLE_MANAGER,i,v,null,c);};f.QInAImportImpl.prototype.importVariables=function(v,a){this.importComponent(f.OlapComponentType.VARIABLE_CONTAINER,v,a,null,null);};f.QInAImportImpl.prototype.importVariableList=function(v,a){this.importComponent(f.OlapComponentType.VARIABLE_LIST,v,a,null,null);};f.QInAImportImpl.prototype.importSimpleTypeVariable=function(i,s,c){this.importComponent(f.VariableType.SIMPLE_TYPE_VARIABLE,i,s,null,c);};f.QInAImportImpl.prototype.importDimensionMemberVariable=function(i,m,v,c){return this.importComponent(f.VariableType.DIMENSION_MEMBER_VARIABLE,i,m,v,c);};f.QInAImportImpl.prototype.importOptionListVariable=function(i,o,c){return this.importComponent(f.VariableType.OPTION_LIST_VARIABLE,i,o,null,c);};f.QInAImportImpl.prototype.importConditionManager=function(i,c,a){this.importComponent(f.OlapComponentType.CONDITIONS_MANAGER,i,c,null,a);};f.QInAImportImpl.prototype.importCondition=function(q,i,c){return this.importComponent(f.OlapComponentType.CONDITION,i,c,q.getConditionManager(),q);};f.QInAImportImpl.prototype.importConditionThreshold=function(q,i,c,p){return this.importComponent(f.OlapComponentType.CONDITIONS_THRESHOLD,i,c,p,q);};f.QInAImportImpl.prototype.importDataCell=function(i,q){this.importComponent(f.OlapComponentType.DATA_CELL,i,null,null,q);};f.QInAImportImpl.prototype.importDataCells=function(i,q){this.importComponent(f.OlapComponentType.DATA_CELLS,i,null,null,q);};f.QInAImportImpl.prototype.importMembers=function(i,d,c){this.importComponent(f.OlapComponentType.MEMBERS,i,d,null,c);var o=null;if(this.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var a=f.PrUtils.getListProperty(i,"OrderedStructureMemberNames");if(f.notNull(a)){o=this.getOrderedList(a);d.reOrderStructureMembers(o);}}if(this.mode===f.QModelFormat.INA_REPOSITORY_DELTA){var b=f.PrUtils.getListProperty(i,"OrderedStructureLayoutMemberNames");if(f.notNull(b)){o=this.getOrderedList(b);}f.XListUtils.reorderList(d.getStructureLayout(),o);}};f.QInAImportImpl.prototype.getOrderedList=function(o){var a;a=f.XListOfString.create();var l=f.PrUtils.getListSize(o,0);for(var b=0;b<l;b++){var c=f.PrUtils.getStringElement(o,b);f.XObjectExt.assertNotNullExt(c,"illegal state");a.add(c.getString());}return a;};f.QInAImportImpl.prototype.importRestrictedMeasure=function(i,d,c){return this.importComponent(f.MemberType.RESTRICTED_MEASURE,i,null,d,c);};f.QInAImportImpl.prototype.importVarianceMeasure=function(i,d,c){return this.importComponent(f.MemberType.VARIANCE,i,null,d,c);};f.QInAImportImpl.prototype.importExceptionAggregationMeasure=function(i,d,c){return this.importComponent(f.MemberType.EXCEPTION_AGGREGATION,i,null,d,c);};f.QInAImportImpl.prototype.importCurrencyMeasure=function(i,d,c){return this.importComponent(f.MemberType.CURRENCY_MEASURE,i,null,d,c);};f.QInAImportImpl.prototype.importBasicMeasure=function(i,q,c){return this.importComponent(f.MemberType.BASIC_MEASURE,i,null,q,c);};f.QInAImportImpl.prototype.importFormulaMeasure=function(i,d,q){return this.importComponent(f.MemberType.FORMULA,i,null,d,q);};f.QInAImportImpl.prototype.importStructureMember=function(d,i,c){return this.importComponent(f.MemberType.ABSTRACT_MEMBER,i,null,d,c);};f.QInAImportImpl.prototype.importDimensions=function(i,q,c){this.importComponent(f.OlapComponentType.DIMENSIONS,i,q,null,c);};f.QInAImportImpl.prototype.importDimension=function(i,c){return this.importComponent(f.OlapComponentType.ABSTRACT_DIMENSION,i,null,null,c);};f.QInAImportImpl.prototype.importCalculatedDimension=function(i,c){return this.importComponent(f.DimensionType.CALCULATED_DIMENSION,i,null,null,c);};f.QInAImportImpl.prototype.importFormulaCalculatedDimension=function(i,c,m){return this.importComponent(f.DimensionType.FORMULA_CALCULATED_DIMENSION,i,m,null,c);};f.QInAImportImpl.prototype.importModellerDimensions=function(i,q,c){this.importComponent(f.OlapComponentType.MODELLER_DIMENSIONS,i,q,null,c);};f.QInAImportImpl.prototype.importModellerCurrencyTranslation=function(i,q,c){this.importComponent(f.OlapComponentType.MODELLER_CURRENCY_TRANSLATION,i,q,null,c);};f.QInAImportImpl.prototype.importModellerMetadataProperties=function(i,q,c){this.importComponent(f.OlapComponentType.MODELLER_METADATA_PROPERTIES,i,q,null,c);};f.QInAImportImpl.prototype.importModellerDefinedVariables=function(i,v,c){this.importComponent(f.OlapComponentType.MODELLER_VARIABLES,i,v,null,c);};f.QInAImportImpl.prototype.importVariable=function(i,v){return this.importComponent(f.VariableType.ANY_VARIABLE,i,null,v,v);};f.QInAImportImpl.prototype.importBasicQueryModelCapabilities=function(q){this.importComponent(f.OlapComponentType.QUERY_MODEL,null,q,null,q);};f.QInAImportImpl.prototype.importPreQuery=function(i,p){this.importQueryModel(i,p);};f.QInAImportImpl.prototype.importDataSourceExternalDimensions=function(i,d){f.QInADataSourceExtDims.importQd(this,d,i);};f.QInAImportImpl.prototype.importCustomHierarchyDefinition=function(c){return this.importComponent(f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION,c,null,null,null);};f.QInAImportImpl.prototype.processImport=function(s,l,c,a,i,m,p,b){var d=f.QInAImportAction.create(this,a,i,m,p,b);d.processSyncAction(s,l,c);return d;};f.FunctionalValueHelpParameterValues=function(){};f.FunctionalValueHelpParameterValues.prototype=new f.DfFunctionalValueHelpSyncAction();f.FunctionalValueHelpParameterValues.prototype._ff_c="FunctionalValueHelpParameterValues";f.FunctionalValueHelpParameterValues.create=function(p){var v=new f.FunctionalValueHelpParameterValues();v.setupFunctionalValueHelp(p.getFunction().getDimension());v.m_parameter=p;return v;};f.FunctionalValueHelpParameterValues.prototype.m_parameter=null;f.FunctionalValueHelpParameterValues.prototype.releaseObject=function(){f.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_parameter=null;};f.FunctionalValueHelpParameterValues.prototype.getPath=function(c){var p=f.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,c);p.append("/").append(this.m_parameter.getFunction().getName());p.append("/parameter");p.append("/").append(this.m_parameter.getName());return p;};f.FunctionalValueHelpParameterValues.prototype.createDataFromResponse=function(e){var l=f.PrUtils.asList(e);if(f.PrUtils.isListEmpty(l)){this.addErrorWithMessage("No parameter values available");return null;}var r=f.XList.create();for(var i=0;i<l.size();i++){var v=f.PrUtils.getStructureElement(l,i);var n=f.PrUtils.getStringValueProperty(v,"name",null);var d=f.PrUtils.getStringValueProperty(v,"description",null);if(f.XStringUtils.isNotNullAndNotEmpty(n)){r.add(f.QFValueHelpParameterValue.createParameterValue(n,d,this.m_parameter));}}return r;};f.FunctionalValueHelpParameterValues.prototype.callListener=function(e,l,d,c){l.onParameterValuesLoaded(e,d,c);};f.FunctionalValueHelpParameters=function(){};f.FunctionalValueHelpParameters.prototype=new f.DfFunctionalValueHelpSyncAction();f.FunctionalValueHelpParameters.prototype._ff_c="FunctionalValueHelpParameters";f.FunctionalValueHelpParameters.create=function(s){var v=new f.FunctionalValueHelpParameters();v.setupFunctionalValueHelp(s.getDimension());v.m_selectFunction=s;return v;};f.FunctionalValueHelpParameters.prototype.m_selectFunction=null;f.FunctionalValueHelpParameters.prototype.releaseObject=function(){f.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_selectFunction=null;};f.FunctionalValueHelpParameters.prototype.getPath=function(c){var p=f.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,c);p.append("/").append(this.m_selectFunction.getName());p.append("/parameter");return p;};f.FunctionalValueHelpParameters.prototype.createDataFromResponse=function(e){var r=f.XList.create();var l=f.PrUtils.asList(e);if(!f.PrUtils.isListEmpty(l)){for(var i=0;i<l.size();i++){var p=f.PrUtils.getStructureElement(l,i);var n=f.PrUtils.getStringValueProperty(p,"parameterName",null);var d=f.PrUtils.getStringValueProperty(p,"description",null);if(f.XStringUtils.isNotNullAndNotEmpty(n)){r.add(f.QFValueHelpParameter.createParameter(n,d,this.m_selectFunction));}}}return r;};f.FunctionalValueHelpParameters.prototype.callListener=function(e,l,d,c){l.onParametersLoaded(e,d,c);};f.FunctionalValueHelpResolveValues=function(){};f.FunctionalValueHelpResolveValues.prototype=new f.DfFunctionalValueHelpSyncAction();f.FunctionalValueHelpResolveValues.prototype._ff_c="FunctionalValueHelpResolveValues";f.FunctionalValueHelpResolveValues.create=function(s,p){var r=new f.FunctionalValueHelpResolveValues();r.setupFunctionalValueHelp(s.getDimension());r.m_selectFunction=s;r.m_parameterValues=p;return r;};f.FunctionalValueHelpResolveValues.prototype.m_selectFunction=null;f.FunctionalValueHelpResolveValues.prototype.m_parameterValues=null;f.FunctionalValueHelpResolveValues.prototype.releaseObject=function(){f.DfFunctionalValueHelpSyncAction.prototype.releaseObject.call(this);this.m_selectFunction=null;this.m_parameterValues=null;};f.FunctionalValueHelpResolveValues.prototype.getPath=function(c){var p=f.DfFunctionalValueHelpSyncAction.prototype.getPath.call(this,c);p.append("/").append(this.m_selectFunction.getName());p.append("/value");return p;};f.FunctionalValueHelpResolveValues.prototype.getUriParameters=function(){var u=f.XList.create();for(var i=0;i<this.m_parameterValues.size();i++){var p=this.m_parameterValues.get(i);u.add(f.XNameValuePair.create(p.getParameter().getName(),p.getName()));}return u;};f.FunctionalValueHelpResolveValues.prototype.createDataFromResponse=function(e){f.InAHelper.importMessages(e,this);var r=f.PrUtils.getListProperty(f.PrUtils.asStructure(e),"range");var a=f.XList.create();if(!f.PrUtils.isListEmpty(r)){for(var i=0;i<r.size();i++){var b=r.getStructureAt(i);a.add(f.QFValueHelpResolvedValue.create(b.getStringByKey("low"),b.getStringByKey("high")));}}return a;};f.FunctionalValueHelpResolveValues.prototype.callListener=function(e,l,d,c){l.onFunctionalValueResolved(e,d,c);};f.FunctionalValueHelpSelectFunctions=function(){};f.FunctionalValueHelpSelectFunctions.prototype=new f.DfFunctionalValueHelpSyncAction();f.FunctionalValueHelpSelectFunctions.prototype._ff_c="FunctionalValueHelpSelectFunctions";f.FunctionalValueHelpSelectFunctions.create=function(d){var v=new f.FunctionalValueHelpSelectFunctions();v.setupFunctionalValueHelp(d);return v;};f.FunctionalValueHelpSelectFunctions.prototype.createDataFromResponse=function(e){var d=this.getActionContext();var r=f.XList.create();var l=f.PrUtils.asList(e);var a=f.PrUtils.getListSize(l,0);for(var i=0;i<a;i++){var s=f.PrUtils.getStructureElement(l,i);var n=f.PrUtils.getStringValueProperty(s,"functionName",null);var b=f.PrUtils.getStringValueProperty(s,"description",null);if(f.XStringUtils.isNotNullAndNotEmpty(n)){r.add(f.QFValueHelpSelectFunction.createSelect(n,b,d));}}return r;};f.FunctionalValueHelpSelectFunctions.prototype.callListener=function(e,l,d,c){l.onFunctionsLoaded(e,d,c);};f.InAFusionDataSourceAction=function(){};f.InAFusionDataSourceAction.prototype=new f.InAFusionLayer();f.InAFusionDataSourceAction.prototype._ff_c="InAFusionDataSourceAction";f.InAFusionDataSourceAction.createAndRun=function(s,l,c,a,q,d,b){var o=new f.InAFusionDataSourceAction();o.setConfig(q);o.setDataSource(d);if(f.notNull(b)){o.setContent(b);}o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionDataSourceAction.prototype.getComponentType=function(){return f.InAFusionLayer.DATASOURCE_ACTION;};f.InAFusionDataSourceAction.prototype.processSynchronization=function(s){var d=this.getDataSource();var a=d.getType();if(a===f.MetaObjectType.URL){this.setNextActionType(f.InAFusionLayer.URL_ACTION);}else if(a===f.MetaObjectType.SFX){this.setNextActionType(f.InAFusionLayer.MODEL_ACTION);}else{if(f.isNull(a)){var c=this.getConfig();var m=c.getMode();if(m===f.QueryManagerMode.BLENDING){var t=f.QDataSource.create();t.copyFrom(d,null);t.setType(f.MetaObjectType.BLENDING);var b=t.getBlendingDefinition();if(f.isNull(b)){b=c.getBlendingDefinition();t.setBlendingDefinition(b);}if(f.notNull(b)&&f.XStringUtils.isNullOrEmpty(t.getObjectName())){var o=f.XStringBuffer.create();for(var i=0;i<b.getSources().size();i++){o.append(b.getSources().get(i).getQueryAliasName());}var e=o.toString();if(o.length()>=256){e=f.XSha1.createSHA1(e);}t.setObjectName(e);}d=t;}}this.setNextActionType(f.InAFusionLayer.METADATA_ACTION);}this.setNextDataSource(d);return false;};f.InAFusionLayerRpc=function(){};f.InAFusionLayerRpc.prototype=new f.InAFusionLayer();f.InAFusionLayerRpc.prototype._ff_c="InAFusionLayerRpc";f.InAFusionLayerRpc.prototype.processSynchronization=function(s){var a=this.getSystemDescription();if(f.notNull(a)){this.processServerMetadataFetch(a);}else{this.processMainContentFetch();}return true;};f.InAFusionLayerRpc.prototype.processServerMetadataFetch=function(s){var c=this.getActionContext().getConnectionExt(s.getSystemName(),this.hasPrivateConnection(),this.getConnectionName());this.setConnection(c);if(this.getSession().hasFeature(f.FeatureToggleOlap.SERVER_METADATA_VIA_SYSTEM_CONNECT)){c.getSystemConnect().getServerMetadataExt(this.getActiveSyncType(),this,null);}else{c.getServerMetadataExt(this.getActiveSyncType(),this,null,false);}};f.InAFusionLayerRpc.prototype.onServerMetadataLoaded=function(e,s,c){this.addAllMessages(e);if(this.isValid()){this.setServerMetadata(s);this.processMainContentFetch();}else{this.endSync();}};f.InAFusionLayerRpc.prototype.processMainContentFetch=function(){this.prepare();var r=this.createSpecificFunction();var a=r.getRpcRequest();var b=this.constructPayload();a.setRequestStructure(b);r.processFunctionExecution(this.getActiveSyncType(),this,null);};f.InAFusionLayerRpc.prototype.prepare=function(){};f.InAFusionLayerRpc.prototype.createFunction=function(p){var c=this.getConnection();if(f.isNull(c)){var a=this.getApplication().getConnectionPool();c=a.getOpenConnection(this.getSystemName());}var r=c.newRpcFunction(p);var b=r.getRpcRequest();b.setMethod(f.HttpRequestMethod.HTTP_POST);return r;};f.InAFusionRepoAction=function(){};f.InAFusionRepoAction.prototype=new f.InAFusionLayer();f.InAFusionRepoAction.prototype._ff_c="InAFusionRepoAction";f.InAFusionRepoAction.createAndRun=function(s,l,c,a,q,d,b){var o=new f.InAFusionRepoAction();o.setConfig(q);o.setDataSource(d);if(f.notNull(b)){o.setContent(b);}o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionRepoAction.prototype.getComponentType=function(){return f.InAFusionLayer.REPO_ACTION;};f.InAFusionRepoAction.prototype.processSynchronization=function(s){var c=this.getContent();if(f.notNull(c)){var a=c.getContentType();if(a.isTypeOf(f.QModelFormat.INA_CLONE)){var b=c.getJsonContent();var m=f.XContent.createJsonObjectContent(f.QModelFormat.INA_METADATA_CORE,b.getStructureByKey("Metadata"));var r=f.XContent.createJsonObjectContent(f.QModelFormat.INA_REPOSITORY,b.getStructureByKey("Runtime"));this.setContent(r);this.setNextDocument(m);this.setNextActionType(f.InAFusionLayer.METADATA_ACTION);}else if(a.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var i=c.getJsonContent().asStructure();var d=i.getStringByKey("CType");var e=f.QInAImportFactory.createForRepository(this.getApplication(),null);if(f.XString.isEqual("QueryManager",d)){var g=i.getStructureByKey("QueryServiceConfig");var n=e.importComponent(f.OlapComponentType.QUERY_SERVICE_CONFIG,g,null,null,null);n.getSystemName();}else{var h=e.importDataSource(i);this.addAllMessages(e);this.setNextDataSource(h);this.setNextActionType(f.InAFusionLayer.METADATA_ACTION);}}}return false;};f.InAFusionUrlAction=function(){};f.InAFusionUrlAction.prototype=new f.InAFusionLayer();f.InAFusionUrlAction.prototype._ff_c="InAFusionUrlAction";f.InAFusionUrlAction.createAndRun=function(s,l,c,a,q,d){var o=new f.InAFusionUrlAction();o.setConfig(q);o.setDataSource(d);o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionUrlAction.prototype.getComponentType=function(){return f.InAFusionLayer.URL_ACTION;};f.InAFusionUrlAction.prototype.processSynchronization=function(s){var o=this.getDataSource().getObjectName();var a=this.getSession();var u=f.XUri.createFromFileSystemPath(a,o,f.PathFormat.AUTO_DETECT,f.VarResolveMode.PERCENT);var c=f.HttpClientFactory.newInstanceByConnection(a,u);c.getRequest().setFromUri(u);c.processHttpRequest(this.getActiveSyncType(),this,f.XIntegerValue.create(0));return true;};f.InAFusionUrlAction.prototype.onHttpResponse=function(e,r,c){this.addAllMessages(e);if(this.isValid()){var a=r.getContentType();if(a===f.QModelFormat.SFX||a===f.QModelFormat.UQM){this.setContentExt(r,a);}else{this.setContent(r);}var b=this.getContent();if(b.getContentType()===f.QModelFormat.INA_REPOSITORY){this.setNextActionType(f.InAFusionLayer.REPO_ACTION);this.setNextDocument(b);}}this.endSync();};f.InAPlanningValueHelpProvider=function(){};f.InAPlanningValueHelpProvider.prototype=new f.InAValueHelpProvider();f.InAPlanningValueHelpProvider.prototype._ff_c="InAPlanningValueHelpProvider";f.InAPlanningValueHelpProvider.create=function(p){var i=new f.InAPlanningValueHelpProvider();i.setupExt(p);return i;};f.InAPlanningValueHelpProvider.prototype.m_queryManager=null;f.InAPlanningValueHelpProvider.prototype._valHelpError=function(e,l,c){var a=f.ExtResult.createWithErrorMessage(e);if(f.notNull(l)){l.onValuehelpExecuted(a,null,c);}return a;};f.InAPlanningValueHelpProvider.prototype._valHelpResultSetError=function(e,l,c){var a=f.ExtResult.createWithErrorMessage(e);if(f.notNull(l)){l.onValuehelpExecuted(a,null,c);}return a;};f.InAPlanningValueHelpProvider.prototype.processValueHelp=function(d,s,l,c){return this._valHelpError("Valuehelp is not supported in this context",l,c);};f.InAPlanningValueHelpProvider.prototype.processValueHelpResultSet=function(d,s,l,c){return this._valHelpResultSetError("Valuehelp is not supported in this context",l,c);};f.InAPlanningValueHelpProvider.prototype.processVarHelp=function(d,v,s,l,c){this.lazyLoadValueHelpObjects();this.applyContext(d);var r=this.getExport().exportPlanningVariableHelpRequest(this.getPlanningCommand(),d,v);this.checkVariableType(v);var k=this.getNextValueHelpIdentifier();this.putValueHelpCallback(k,l);this.putValueHelpIdentifier(k,c);this.putValueHelpResult(k,null);this.putValueHelpResultNode(k,null);var a=null;var b=null;var i=true;var e=f.RsDefQueryModel.create(null,a,b,d,i);var g=f.ResultSetContainer.createWithRequest(this.getQueryManager(),this,r,e);g.setOffsetRows(d.getSelectorPagingStart());g.setMaxRows(d.getSelectorPagingEnd()-d.getSelectorPagingStart());if(f.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(d)){var h=f.ValueHelpProcessingSequence.createSequence(this.getQueryManager(),d,g,this.getExport(),true,false);h.processSyncAction(s,this,this.getValueHelpIdentifier());}else{g.processExecution(s,this,this.getValueHelpIdentifier());}return!this.isReleased()?this.getValueHelpResultSetNode(k):null;};f.InAPlanningValueHelpProvider.prototype.getPlanningCommand=function(){return this.getContext();};f.InAPlanningValueHelpProvider.prototype.getQueryManager=function(){if(f.isNull(this.m_queryManager)){var p=this.getPlanningCommand();var q=f.QueryServiceConfig.create(this.getApplication());q.setSystemName(p.getSystemName());var a=f.PrFactory.createStructure();var c=a.putNewStructure("Command");var d=c.putNewStructure("DataSource");var b=p.getDataArea().getDataArea();if(f.isNull(b)){b="DEFAULT";}d.putString("DataArea",b);var m=p.getPlanningOperationMetadata();var i=m.getPlanningOperationIdentifier();d.putString("ObjectName",i.getPlanningOperationName());d.putString("Type",i.getPlanningOperationType().getCamelCaseName());d.putString("InstanceId",m.getInstanceId());c.put("Dimensions",m.getDimensions());c.put("Variables",m.getVariables());q.setDefinitionByStructure(f.QModelFormat.INA_METADATA,a);q.setMode(f.QueryManagerMode.RAW_QUERY);var r=q.processQueryManagerCreation(f.SyncType.BLOCKING,null,null);f.MessageUtil.checkNoError(r);var e=r.getData().getQueryModel();e.deserializeFromElementExt(f.QModelFormat.INA_METADATA,c);r.getData().setValueHelpProvider(this);this.m_queryManager=r.getData();}return this.m_queryManager;};f.InAPlanningValueHelpProvider.prototype.applyContext=function(d){if(d.getQueryModel()!==null){var p=this.getPlanningCommand().getDimensionAccessor().getDimensionByName(d.getName());var s=d.getSelectorHierarchyNode();if(f.notNull(s)){p.setSelectorHierarchyNode(s);}var o=d.getQueryModel().getFilter().getValuehelpFilter();var t=this.getPlanningCommand().getSelector().getValuehelpFilter();t.copyFrom(o,null);}};f.InAQueryValueHelpProvider=function(){};f.InAQueryValueHelpProvider.prototype=new f.InAValueHelpProvider();f.InAQueryValueHelpProvider.prototype._ff_c="InAQueryValueHelpProvider";f.InAQueryValueHelpProvider.create=function(q){var i=new f.InAQueryValueHelpProvider();i.setupExt(q);return i;};f.InAQueryValueHelpProvider.prototype.processValueHelp=function(d,s,l,c){var a=null;if(d.getDimensionType().isTypeOf(f.DimensionType.FORMULA_CALCULATED_DIMENSION)){a=d;}if(f.notNull(a)){a.generateTransientObjects(this,this.getQueryManager());}this.lazyLoadValueHelpObjects();var k=this.internalProcessValueHelp(d,s,l,c,this.getValueHelpRequest(d),true,this.getQueryManagerBase().variablesRequireImplicitSubmit());if(f.notNull(a)){a.destroyTransientObjects(this);}return!this.isReleased()?this.getValueHelpResultSetNode(k):null;};f.InAQueryValueHelpProvider.prototype.processValueHelpResultSet=function(d,s,l,c){this.lazyLoadValueHelpObjects();var k=this.internalProcessValueHelp(d,s,l,c,this.getValueHelpRequest(d),false,this.getQueryManagerBase().variablesRequireImplicitSubmit());return!this.isReleased()?this.getValueHelpResult(k):null;};f.InAQueryValueHelpProvider.prototype.processVarHelp=function(d,v,s,l,c){this.lazyLoadValueHelpObjects();var r=this.getExport().exportVariableHelpRequest(this.getQueryModel(),d,v);this.checkVariableType(v);var k=this.internalProcessValueHelp(d,s,l,c,r,true,false);return!this.isReleased()?this.getValueHelpResultSetNode(k):null;};f.InAQueryValueHelpProvider.prototype.internalProcessValueHelp=function(d,s,l,c,r,t,v){if(f.notNull(r)){this.setMiscRequest(r,this.getQueryManager());}var k=this.getNextValueHelpIdentifier();this.putValueHelpCallback(k,l);this.putValueHelpIdentifier(k,c);this.putValueHelpResult(k,null);if(t){this.putValueHelpResultNode(k,null);}var a=null;var b=null;var i=this.getQueryManager().getInitSettings();var e=i.isExecuteAutoVariableSubmit();var g=this.requiresMeasureValueHelp(d)&&f.isNull(r);if(g){i.setIsExecuteAutoVariableSubmit(false);}var q=this.getQueryModel();if(f.notNull(q)){a=q.getRowsAxis();b=q.getColumnsAxis();}var h=f.RsDefQueryModel.create(this.getQueryManager(),a,b,d,e);var j=f.ResultSetContainer.createWithRequest(this.getQueryManager(),this,r,h);j.setOffsetRows(d.getSelectorPagingStart());j.setMaxRows(d.getSelectorPagingEnd()-d.getSelectorPagingStart());var m=f.ValueHelpProcessingSequence.customHierarchySubmitRequiredForValueHelp(d);if(v||m){var n=f.ValueHelpProcessingSequence.createSequence(this.getQueryManager(),d,j,this.getExport(),m,v);n.processSyncAction(s,this,this.getValueHelpIdentifier());}else{j.processExecution(s,this,this.getValueHelpIdentifier());}if(g){i.setIsExecuteAutoVariableSubmit(e);}return k;};f.InAQueryValueHelpProvider.prototype.setMiscRequest=function(r,p){f.QInAOptions.setRequestTimeZone(r,p);var i=r.getStructureByKey("Analytics");if(f.isNull(i)){i=r.getStructureByKey("Planning");}f.QInAOptions.setLanguage(i,p);f.QInAOptions.fillOptions(r,p.getCapabilitiesBase(),p.getSession(),p.getQueryServiceConfig());p.getInaCapabilities().exportActiveCapabilities(i);var a=i.getStructureByKey("Definition");f.QInAOptions.exportOptimizerHints(a,p.getQueryModel());f.QInAOptions.exportReturnedDataSelections(a.getStructureByKey("ResultSetFeatureRequest"),p);};f.InAQueryValueHelpProvider.prototype.getValueHelpRequest=function(d){return!this.requiresMeasureValueHelp(d)?this.getExport().exportMemberHelpRequest(this.getQueryModel(),d):null;};f.InAFusionMetadataAction=function(){};f.InAFusionMetadataAction.prototype=new f.InAFusionLayerRpc();f.InAFusionMetadataAction.prototype._ff_c="InAFusionMetadataAction";f.InAFusionMetadataAction.createAndRun=function(s,l,c,a,q,d,b){var o=new f.InAFusionMetadataAction();o.setConfig(q);if(f.notNull(d)){var e=d.clone();e.setInstanceId(q.getInstanceId());o.setDataSource(e);}if(f.notNull(b)){o.setContent(b);}o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionMetadataAction.prototype.m_inaCapabilities=null;f.InAFusionMetadataAction.prototype.m_queryManagerCapabilities=null;f.InAFusionMetadataAction.prototype.m_exporter=null;f.InAFusionMetadataAction.prototype.m_importer=null;f.InAFusionMetadataAction.prototype.m_cacheKey=null;f.InAFusionMetadataAction.prototype.m_masterCacheAction=null;f.InAFusionMetadataAction.prototype.m_isCacheCall=false;f.InAFusionMetadataAction.prototype.getComponentType=function(){return f.InAFusionLayer.METADATA_ACTION;};f.InAFusionMetadataAction.prototype.processMainContentFetch=function(){this.prepareInACapabilities();var c=this.prepareQueryManagerCapabilities();var e=f.QInAExportFactory.createForData(this.getApplication(),c);var i=f.QInAImportFactory.createForData(this.getApplication(),c);this.setExporter(e);this.setImporter(i);var a=this.getContent();if(f.notNull(a)){this.generateNextDataSource(a);this.endSync();}else{this.m_masterCacheAction=this.getMasterCacheAction();if(f.notNull(this.m_masterCacheAction)&&this.m_masterCacheAction.getSyncState()!==f.SyncState.IN_SYNC_WITH_ERROR){var s=this.m_masterCacheAction.getSyncState();if(s===f.SyncState.PROCESSING){this.m_masterCacheAction.attachCubeMetadataListener(this,null);}else if(s===f.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;this.m_masterCacheAction.startProcessing(this);}else{this.onCacheFilled(this.m_masterCacheAction,this.m_masterCacheAction.getData(),null);}}else{this.m_isCacheCall=true;}if(this.m_isCacheCall){f.InAFusionLayerRpc.prototype.processMainContentFetch.call(this);}}};f.InAFusionMetadataAction.prototype.prepare=function(){this.prepareQueryManagerCapabilities();var d=this.getDataSource();if(f.notNull(d)&&d.getType()===f.MetaObjectType.CATALOG_VIEW_2&&this.m_queryManagerCapabilities.supportsCatalogServiceV2()===false){d.setType(f.MetaObjectType.CATALOG_VIEW);}};f.InAFusionMetadataAction.prototype.prepareInACapabilities=function(){var s;if(this.getSession().hasFeature(f.FeatureToggleOlap.SERVER_METADATA_VIA_SYSTEM_CONNECT)){s=this.getConnection().getSystemConnect().getServerMetadata();}else{s=this.getConnection().getServerMetadata();}var p=this.getConfig().getProviderType();var a=this.getSession();this.m_inaCapabilities=f.InACapabilitiesProvider.create(a,s,p,null);var b=this.m_inaCapabilities.getServerBetaCapabilities();var c=this.m_inaCapabilities.getServerMainCapabilities();var e=a.getFeatureToggles();if(f.notNull(e)){var d=this.m_inaCapabilities.getActiveCapabilities();var g=e.getKeysAsIteratorOfString();while(g.hasNext()){var h=g.next();if(b.containsKey(h)&&f.InACapabilitiesProvider.isDevCapabilityValid(h,a)){d.addCapability(h);}if(c.containsKey(h)){d.addCapability(h);}}}return this.m_inaCapabilities;};f.InAFusionMetadataAction.prototype.prepareQueryManagerCapabilities=function(){if(f.isNull(this.m_queryManagerCapabilities)){this.m_queryManagerCapabilities=this.getInACapabilities().getQueryCapabilities();}return this.m_queryManagerCapabilities;};f.InAFusionMetadataAction.prototype.createSpecificFunction=function(){var s=this.getSystemDescription();f.XObjectExt.assertNotNullExt(s,"System description is null");var a=this.getInAMainCapabilities().getByKey(f.InACapabilities.C032_FAST_PATH);var p;if(f.notNull(a)&&a.getValue()!==null){p=a.getValue();}else{p=s.getSystemType().getInAPath();}return this.createFunction(p);};f.InAFusionMetadataAction.prototype.constructPayload=function(){var p=f.PrFactory.createStructure();var c=this.getConfig();var i=p.putNewStructure("Metadata");var a=c.getProviderType();if(a===f.ProviderType.ANALYTICS||a===f.ProviderType.CATALOG){i.putString("Context","Analytics");}else if(a===f.ProviderType.PLANNING||a===f.ProviderType.PLANNING_VALUE_HELP){i.putString("Context","Planning");}else if(a===f.ProviderType.LIST_REPORTING){i.putString("Context","ListReporting");}i.putString("Language",c.getSystemDescription().getLanguage());var d=this.getDataSource();var b=this.m_exporter.exportDataSource(d,false);f.QInAExportUtil.setNonEmptyString(b,"ValidationHash",d.getValidationHash());i.put("DataSource",b);this.m_inaCapabilities.exportActiveCapabilities(i);f.QInAOptions.fillOptions(p,this.m_queryManagerCapabilities,this.getSession(),this.getConfig());var e=d.getDataArea();if(f.XStringUtils.isNotNullAndNotEmpty(e)){var g=this.getDataAreas(e);p.putIfNotNull("DataAreas",g);}var h=f.PrFactory.createList();h.addString("Cube");i.putIfNotNull("Expand",h);return p;};f.InAFusionMetadataAction.prototype.getDataAreas=function(d){var l=null;var s=this.getSystemType();if(s.isTypeOf(f.SystemType.BW)===true){var a=f.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),d);if(f.notNull(a)){if(a.isSubmitted()===false){l=f.PrFactory.createList();l.add(a.serializeToJson());}}}return l;};f.InAFusionMetadataAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);var a=null;if(this.isValid()){var m=r.getRootElement();a=f.XContent.createJsonObjectContent(f.QModelFormat.INA_METADATA,m);this.setContent(a);this.storeMetadataInCache(m);}if(f.notNull(this.m_masterCacheAction)){if(this.m_masterCacheAction.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){this.m_masterCacheAction.endProcessing(e,a);}}this.generateNextDataSource(a);this.endSync();};f.InAFusionMetadataAction.prototype.generateNextDataSource=function(m){var d=this.getDataSource();if(f.isNull(d)&&f.notNull(m)){var i=m.getJsonContent();var a=i.getStructureByKey("Cube");if(f.isNull(a)){a=i;}var b=this.m_importer.importDataSource(a);this.addAllMessages(this.m_importer);if(f.notNull(b)){b.setInstanceId(this.getConfig().getInstanceId());b.setSystemName(this.getSystemName());d=b;}}this.setNextDataSource(d);};f.InAFusionMetadataAction.prototype.onCacheFilled=function(e,a,c){this.addAllMessages(e);this.setContent(a);this.setNextDataSource(this.getDataSource());this.endSync();};f.InAFusionMetadataAction.prototype.getInACapabilities=function(){return this.m_inaCapabilities;};f.InAFusionMetadataAction.prototype.getInAMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities();};f.InAFusionMetadataAction.prototype.getExporter=function(){return this.m_exporter;};f.InAFusionMetadataAction.prototype.setExporter=function(e){this.m_exporter=e;};f.InAFusionMetadataAction.prototype.getImporter=function(){return this.m_importer;};f.InAFusionMetadataAction.prototype.setImporter=function(i){this.m_importer=i;};f.InAFusionMetadataAction.prototype.getMasterCacheAction=function(){var m=null;if(this.getConfig().isCachingActive()){var c=this.getCacheKey();if(f.notNull(c)){var o=this.getOlapEnv();if(f.notNull(o)){var a=o.getCubeContainer(c);if(a.getDataSource()===null){a.setDataSource(this.getDataSource());}m=a.getMetadataAction(c);}}}return m;};f.InAFusionMetadataAction.prototype.getCacheKey=function(){if(f.isNull(this.m_cacheKey)){var c=this.getConfig();var d=this.getDataSource();if(f.notNull(d)){var a=d.getCacheKeyName2();var p=c.getProviderType();var s=this.getSystemDescription();var b=s.getSystemName();var k=null;var e=null;this.m_cacheKey=f.QFactory.createCacheKey(null,b,a,p,k,e,null,null);}}return this.m_cacheKey;};f.InAFusionMetadataAction.prototype.storeMetadataInCache=function(r){if(f.notNull(r)){if(this.m_isCacheCall===true){if(f.notNull(this.m_cacheKey)){var o=this.getOlapEnv();var c=o.getCubeContainer(this.m_cacheKey);var a=r.getStructureByKey("Cube");if(o.isCachingEnabled()){c.setQueryMetadata(this.m_cacheKey,a);}}}}};f.InAFusionModelAction=function(){};f.InAFusionModelAction.prototype=new f.InAFusionLayerRpc();f.InAFusionModelAction.prototype._ff_c="InAFusionModelAction";f.InAFusionModelAction.createAndRun=function(s,l,c,a,q,d){var o=new f.InAFusionModelAction();o.setConfig(q);o.setDataSource(d);o.setupActionAndRun(s,l,c,a);return o;};f.InAFusionModelAction.prototype.getComponentType=function(){return f.InAFusionLayer.MODEL_ACTION;};f.InAFusionModelAction.prototype.createSpecificFunction=function(){return this.createFunction("/sap/fpa/services/rest/epm/contentlib");};f.InAFusionModelAction.prototype.constructPayload=function(){var p=f.PrFactory.createStructure();var d=this.getDataSource();var o=d.getObjectName();p.putString(f.ContentlibConstants.ACTION,f.ContentlibConstants.V_ACTION_GET_RES);var c=p.putNewStructure(f.ContentlibConstants.DATA);c.putNewList(f.ContentlibConstants.RESOURCE_IDS).addString(o);c.putString(f.ContentlibConstants.RESOURCE_TYPE,f.ContentlibConstants.V_RESOURCE_TYPE_CUBE);var a=c.putNewStructure(f.ContentlibConstants.METADATA);a.putBoolean(f.ContentlibConstants.NAME,true);a.putBoolean(f.ContentlibConstants.DESCRIPTION,true);a.putBoolean(f.ContentlibConstants.ACCESS,true);a.putBoolean(f.ContentlibConstants.USER_AUTH_ONLY,true);a.putBoolean(f.ContentlibConstants.RESOURCE_TYPE,true);a.putBoolean(f.ContentlibConstants.PACKAGE_ID,true);a.putBoolean(f.ContentlibConstants.CREATED_BY,true);a.putBoolean(f.ContentlibConstants.MODIFIED_BY,true);a.putBoolean(f.ContentlibConstants.UPDATE_COUNTER,true);a.putBoolean(f.ContentlibConstants.CREATED_TIME,true);a.putBoolean(f.ContentlibConstants.MODIFIED_TIME,true);a.putBoolean(f.ContentlibConstants.EXCEPTION_NOT_THROWN_FOR_NO_ACCESS,true);a.putBoolean(f.ContentlibConstants.TRANSLATION_ENABLED,true);var b=a.putNewStructure(f.ContentlibConstants.ANCHESTOR_PATH);b.putBoolean(f.ContentlibConstants.NAME,true);b.putBoolean(f.ContentlibConstants.ACCESS,true);var e=a.putNewStructure(f.ContentlibConstants.EPM_OBJECT_DATA);e.putBoolean(f.ContentlibConstants.INCLUDE_DEPENDENCIES,true);e.putBoolean(f.ContentlibConstants.INCLUDE_SUB_ITEMS,true);var g=e.putNewStructure(f.ContentlibConstants.OPTIONS);g.putBoolean(f.ContentlibConstants.DETAIL,true);g.putBoolean(f.ContentlibConstants.VISUALIZATION,true);g.putBoolean(f.ContentlibConstants.RATE,true);g.putBoolean(f.ContentlibConstants.LIST_FORMULA,true);g.putBoolean(f.ContentlibConstants.LIST_VERSION,true);g.putBoolean(f.ContentlibConstants.ADD_METADATA,true);g.putBoolean(f.ContentlibConstants.INCL_SUB_OBJECT_TYPES,true);g.putBoolean(f.ContentlibConstants.PLANNING_FEATURES,true);g.putBoolean(f.ContentlibConstants.TRANSLATED_CUSTOMIZED_DESCRIPTION,true);g.putBoolean(f.ContentlibConstants.NEED_DIMENSION_VALIDATION_RULES,true);return p;};f.InAFusionModelAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(this.isValid()){var a=r.getRootElementGeneric().asList();var m=a.getStructureAt(0);var b=f.XContent.createJsonObjectContent(f.QModelFormat.SFX,m);this.setContentExt(b,f.QModelFormat.SFX);this.setNextDocument(this.getContent());this.setNextActionType(f.InAFusionLayer.REPO_ACTION);}this.endSync();};f.InAQMgrApplyStateAction=function(){};f.InAQMgrApplyStateAction.prototype=new f.QOlapSyncAction();f.InAQMgrApplyStateAction.prototype._ff_c="InAQMgrApplyStateAction";f.InAQMgrApplyStateAction.createAndRun=function(s,c,l,a,b,d){var e=new f.InAQMgrApplyStateAction();e.stateId=b;e.m_stateManager=d;e.setupActionAndRun(s,l,a,c);return e;};f.InAQMgrApplyStateAction.prototype.stateId=null;f.InAQMgrApplyStateAction.prototype.m_stateManager=null;f.InAQMgrApplyStateAction.prototype.processSynchronization=function(s){var r=this.m_stateManager.applyState(this.stateId);if(r.hasErrors()){this.addAllMessages(r);}this.setData(r.getData());return false;};f.InAQMgrApplyStateAction.prototype.callListener=function(e,l,d,c){l.modelStateApplied(e,d,c);};f.InAQMgrStartupCacheSync=function(){};f.InAQMgrStartupCacheSync.prototype=new f.QOlapSyncAction();f.InAQMgrStartupCacheSync.prototype._ff_c="InAQMgrStartupCacheSync";f.InAQMgrStartupCacheSync.createAndRun=function(s,l,c,a){var n=new f.InAQMgrStartupCacheSync();n.setupActionAndRun(s,l,c,a);return n;};f.InAQMgrStartupCacheSync.prototype.m_isCacheCall=false;f.InAQMgrStartupCacheSync.prototype.m_cacheKey=null;f.InAQMgrStartupCacheSync.prototype.m_cubeStructure=null;f.InAQMgrStartupCacheSync.prototype.processSynchronization=function(s){var m=this.getMasterCacheAction();if(f.notNull(m)){if(m.getSyncState()===f.SyncState.PROCESSING){m.attachCubeMetadataListener(this,null);return true;}else if(m.getSyncState()===f.SyncState.OUT_OF_SYNC){this.m_isCacheCall=true;m.startProcessing(this);}}return false;};f.InAQMgrStartupCacheSync.prototype.onCacheFilled=function(e,a,c){this.endSync();};f.InAQMgrStartupCacheSync.prototype.onActionSequenceFinalized=function(m,d){var a=this.getMasterCacheAction();if(f.notNull(a)){if(a.getPrimarySequenceHandle()===this&&this.m_isCacheCall===true){var c=f.XContent.createJsonObjectContent(f.ContentType.APPLICATION_JSON,this.m_cubeStructure);a.endProcessing(m,c);}}};f.InAQMgrStartupCacheSync.prototype.getMasterCacheAction=function(){var m=null;var i=this.getQueryManager().getQueryServiceConfig().isCachingActive();if(i===true){var c=this.getCacheKey();if(f.notNull(c)){var o=this.getActionContext().getOlapEnv();if(f.notNull(o)){var a=o.getCubeContainer(c);m=a.getMetadataAction(c);}}}return m;};f.InAQMgrStartupCacheSync.prototype.getCacheKey=function(){if(f.isNull(this.m_cacheKey)){this.m_cacheKey=f.QFactory.createCacheKeyByContext(this.getActionContext());}return this.m_cacheKey;};f.InAQMgrStartupCacheSync.prototype.isMasterCacheCall=function(){return this.m_isCacheCall;};f.InAQMgrStartupCacheSync.prototype.storeMetadataInCache=function(r){if(f.notNull(r)){if(this.m_isCacheCall===true){if(f.notNull(this.m_cacheKey)){var o=this.getOlapEnv();var c=o.getCubeContainer(this.m_cacheKey);this.m_cubeStructure=r.getStructureByKey("Cube");if(o.isCachingEnabled()){c.setQueryMetadata(this.m_cacheKey,this.m_cubeStructure);}}}}};f.InAQMgrStartupCacheSync.prototype.getMetadataInCache=function(){var r=null;if(f.notNull(this.m_cacheKey)){var o=this.getOlapEnv();if(o.isCachingEnabled()){var c=o.getCubeContainer(this.m_cacheKey);var a=c.getQueryMetadata(this.m_cacheKey);if(f.notNull(a)){r=f.PrFactory.createStructure();r.put("Cube",a);}}}return r;};f.InAQMgrSyncAction=function(){};f.InAQMgrSyncAction.prototype=new f.QOlapSyncAction();f.InAQMgrSyncAction.prototype._ff_c="InAQMgrSyncAction";f.InAQMgrSyncAction.prototype.m_rpcFunction=null;f.InAQMgrSyncAction.prototype.releaseObject=function(){this.m_rpcFunction=f.XObjectExt.release(this.m_rpcFunction);f.QOlapSyncAction.prototype.releaseObject.call(this);};f.InAQMgrSyncAction.prototype.createFunction=function(){return this.getActionContext().createFunction();};f.InAQMgrSyncAction.prototype.cancelSynchronization=function(){f.QOlapSyncAction.prototype.cancelSynchronization.call(this);this.m_rpcFunction.cancelSynchronization();};f.InAQMgrSyncAction.prototype.fillRequestStructure=function(){var p=this.getActionContext();var i=p.getInstanceId();if(f.isNull(i)){return null;}var r=f.PrFactory.createStructure();var a=this.getApplication();var s=this.getSession();if(s.hasFeature(f.FeatureToggleOlap.CLIENT_INFO_METADATA)){var b=p.getOlapSystemContainer();var c=b.getServiceCapabilities(f.ServerService.ANALYTIC);var q=this.getQueryModel();if(f.isNull(q)){f.QInAClientInfo.exportClientInfo(r,a,c.supportsClientInfo());}else{f.QInAClientInfo.exportClientInfo(r,q,c.supportsClientInfo());}}return r;};f.InAQMgrSyncAction.prototype.initPlanningSupport=function(i,b){var p=this.getActionContext();var c=p.getCapabilitiesBase();var a=c.getSystemType().isTypeOf(f.SystemType.BW);var s=p.supportsDataEntryReadOnly();var d=p.isDataEntryEnabled();var e;if(a){d=f.PrUtils.getBooleanProperty(i,"DefaultInputMode")!==null;if(d){if(b){e=!f.PrUtils.getBooleanValueProperty(i,"DefaultInputMode",false);}else{e=!f.PrUtils.getBooleanValueProperty(i,"InputEnabled",false);}}else{e=true;}s=d;}else{if(!d){d=f.PrUtils.getBooleanValueProperty(i,"InputEnabled",false);}e=!d;}p.getQueryModelBase().setSupportsDataEntryReadOnly(s);p.setDataEntryReadOnly(e);p.setDataEntryEnabled(d);if(a&&d){p.initializeDataAreaState();}};f.InARsEnProvider=function(){};f.InARsEnProvider.prototype=new f.DfResultSetProvider();f.InARsEnProvider.prototype._ff_c="InARsEnProvider";f.InARsEnProvider.create=function(q,i,a,c){var p=new f.InARsEnProvider();p.setupHanalyticsResultSetProvider(q,i,a,c);return p;};f.InARsEnProvider.prototype.m_columnAxisProvider=null;f.InARsEnProvider.prototype.m_dataCellProvider=null;f.InARsEnProvider.prototype.m_rowsAxisProvider=null;f.InARsEnProvider.prototype.m_initProcedure=null;f.InARsEnProvider.prototype.m_initStructure=null;f.InARsEnProvider.prototype.m_queryProvider=null;f.InARsEnProvider.prototype.m_isTransientQueryProvider=false;f.InARsEnProvider.prototype.m_complexUnitsSetting=null;f.InARsEnProvider.prototype.m_contextType=null;f.InARsEnProvider.prototype.m_updatedMetadataProcessor=null;f.InARsEnProvider.prototype.cloneExt=function(a){var p=f.InARsEnProvider.create(this.m_queryProvider,this.m_initProcedure,this.m_initStructure,this.m_contextType);p.copyFromResultSetProvider(this);return p;};f.InARsEnProvider.prototype.copyFromResultSetProvider=function(t){var o=t;this.m_columnAxisProvider.copyInARsAxisProvider(o.m_columnAxisProvider);this.m_rowsAxisProvider.copyInARsAxisProvider(o.m_rowsAxisProvider);this.m_dataCellProvider.copyInARsDataCellProvider(o.m_dataCellProvider);this.m_initProcedure=o.m_initProcedure;if(f.notNull(o.m_initStructure)){this.m_initStructure=o.m_initStructure.getPermaCopy();}this.m_queryProvider=o.m_queryProvider;this.m_isTransientQueryProvider=o.m_isTransientQueryProvider;if(f.notNull(o.m_complexUnitsSetting)){this.m_complexUnitsSetting=f.XCollectionUtils.createListOfClones(this.m_complexUnitsSetting);}};f.InARsEnProvider.prototype.setupHanalyticsResultSetProvider=function(q,i,a,c){var b=q.getApplication();this.setupAction(null,null,null,q);this.m_queryProvider=q;this.m_isTransientQueryProvider=q.getPreQueryName()!==null&&q.getTagging().containsKey(f.QStateConstants.TAG_HAS_TRANSIENT_DEPS);this.m_initProcedure=i;this.m_initStructure=a;this.m_contextType=c;this.m_dataCellProvider=f.InARsDataCellProvider.create(b,q);var s=q.getCapabilitiesBase().supportsSapDate();var d=q.getCapabilitiesBase().supportsObtainability();this.m_columnAxisProvider=f.InARsAxisProvider.create(b,f.AxisType.COLUMNS,c,s,d);this.m_rowsAxisProvider=f.InARsAxisProvider.create(b,f.AxisType.ROWS,c,s,d);};f.InARsEnProvider.prototype.releaseObject=function(){this.m_columnAxisProvider=f.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=f.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=f.XObjectExt.release(this.m_dataCellProvider);this.m_complexUnitsSetting=f.XObjectExt.release(this.m_complexUnitsSetting);this.m_contextType=null;this.m_updatedMetadataProcessor=f.XObjectExt.release(this.m_updatedMetadataProcessor);f.DfResultSetProvider.prototype.releaseObject.call(this);};f.InARsEnProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider;};f.InARsEnProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider;};f.InARsEnProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider;};f.InARsEnProvider.prototype.processSynchronization=function(s){var r=null;if(this.m_initProcedure===f.ProviderInitProcedure.REQUEST_BY_MODEL){var a=this.m_queryProvider.getActiveResultSetContainerBase();var b=this.getResultSet().getResultSetContainer();if(a!==b){this.m_queryProvider.setActiveResultSetContainer(b);r=this.m_queryProvider.fillDataRequestStructure(true);this.m_queryProvider.setActiveResultSetContainer(a);}else{r=this.m_queryProvider.fillDataRequestStructure(true);}}else if(this.m_initProcedure===f.ProviderInitProcedure.REQUEST_BY_STRUCTURE){r=this.m_initStructure;}var o=this.m_queryProvider.createFunction();this.setSyncChild(o);var c=o.getRpcRequest();var d=f.RsRequestDecoratorFactory.getResultsetRequestDecorator(this.m_queryProvider.getApplication(),this.m_queryProvider.getSystemDescription(),r);if(f.isNull(d)){c.setRequestStructure(r);}else{c.setRequestStructure(d.getDecoratedRequest());}o.getProcessingHint().put(f.ConnectionParameters.CACHE_HINTS_ENABLED,f.PrFactory.createBoolean(this.m_queryProvider.getQueryManager().isCacheHintEnabled()));o.processFunctionExecution(s,this,d);return true;};f.InARsEnProvider.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()&&f.notNull(r)){var a=r.getRootElement();var u=true;var p=null;var b=null;if(f.notNull(c)){u=false;var d=c;a=d.buildResponse(a);p=d.getPlanningRequest();b=d.getPlanningResponse();}var o=this.setResultStructure(a,u);if(!o&&!this.m_isTransientQueryProvider){this.addError(f.ErrorCodes.MODEL_INFRASTRUCTURE_TERMINATED,"Model infrastructure terminated");}if(f.notNull(p)&&f.notNull(b)){f.PlanningStateHandler.updateFromResponse(this.getApplication(),this.getSystemName(),p,b,this);}}this.trackRequestExecuted(e);this.endSync();};f.InARsEnProvider.prototype.trackRequestExecuted=function(r){var u=f.UsageTrackerProvider.getUsageTracker();if(u.isEnabled()){var a=r.getData();if(f.isNull(a)){return;}try{var e=new f.UTEvent();e.setFeature("InaRequest");e.setSession(this.getSession());var b=a.getFunction().getRpcRequest();e.setEventId(b.getRequestType().getName());var c=b.getConnectionInfo();var s=c.getSystemName();var p=f.XHashMapOfStringByString.create();p.put("SystemName",s);p.put("SystemHost",c.getHost());var d=c.getSystemType();p.put("SystemType",d.getName());e.setParameters(p);if(r.hasErrors()){var g=f.XHashMapOfStringByString.create();var m=r.getErrors().getIterator();while(m.hasNext()){var h=m.next();g.put(f.XInteger.convertToString(h.getCode()),h.getText());}}u.track(e);}catch(i){return;}}};f.InARsEnProvider.prototype.getSystemName=function(){return this.m_queryProvider.getSystemName();};f.InARsEnProvider.prototype.setResultStructure=function(r,u){if(f.notNull(r)){var a=this.getResultSet();if(f.isNull(a)){return false;}var b=a.getApplication();if(f.isNull(b)){return false;}this.addProfileStep("setResultStructure");if(u){f.PlanningStateHandler.update(b,this.getSystemName(),r,this);}if(f.InAHelper.importMessages(r,this)){a.setState(f.ResultSetState.ERROR);}if(this.isValid()){var p=this.getQueryManager();var c=a.getRsQueryModelDef();this.processAutoSubmitMetadata(p,c,r);var i=r.getListByKey("Grids");if(f.isNull(i)&&p.isShallow()){var d=r.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(d)){if(p.supportsServerState()){p.setupQueryModel();var e=f.QInAImportFactory.createForMetadata(b,p.getModelCapabilities());var q=p.getQueryModelBase();var g=q.getDataSource().getInstanceId();if(f.isNull(g)){g=p.getInstanceId();if(f.isNull(g)){g=p.getApplication().createNextInstanceId();}var h=q.getDataSourceBase();h.setInstanceId(g);h.setSystemName(p.getSystemName());}e.importQueryModel(d.getStructureAt(0).getStructureByKey("Cube"),q);}var l=d.getStructureAt(d.size()-1);i=l.getListByKey("Grids");}}this.processGrids(i,a);}this.importSerializedData(r,a);this.endProfileStep();}return true;};f.InARsEnProvider.prototype.processGrids=function(i,r){if(!f.PrUtils.isListEmpty(i)){var a=i.getStructureAt(0);var b=a.getIntegerByKeyExt("ResultSetState",0);var c=f.QInAConverter.lookupResultSetState(b);r.setState(c);if(c===f.ResultSetState.DATA_AVAILABLE){this.processGridData(r,a);}}};f.InARsEnProvider.prototype.processGridData=function(r,a){var q=r.getQueryModel();if(f.notNull(q)){var d=a.getStructureByKey("DataSource");if(f.notNull(d)){var l;var b=null;var c=q.getCubeInfo();if(f.notNull(c)){if(q.getModelCapabilities().supportsDataRefreshAndDataTopicality()){var e=d.getStringByKey("DataRollupMin");var g=d.getStringByKey("DataRollupMax");var h=f.XDateTime.createDateTimeSafe(e);var j=f.XDateTime.createDateTimeSafe(g);c.setDataRollUpMin(h);c.setDataRollUpMax(j);l=d.getStringByKey("DataLastRefresh");}else{l=d.getStringByKey("LastDataUpdate");}if(f.notNull(l)){b=f.XDateTime.createDateTimeSafe(l);c.setLastUpdateOn(b);}}}if(this.getSession().hasFeature(f.FeatureToggleOlap.ASSERT_CONDITIONS_SIZE)){this.processRsConditions(a.getListByKey("Conditions"),q.getConditionManager());}}var k=a.getStructureByKey("DataEntryMask");this.setDataEntryMask(k);var m=a.getBooleanByKeyExt("InputEnabled",false);r.setDataEntryEnabled(m);var n=a.getListByKey("InputReadinessStates");this.setInputReadinessStates(n);this.processComplexUnitsSetting(a.getListByKey("Units"));this.connectDataCells(a);var o=null;var p=null;var s=a.getListByKey("Axes");var t=s.size();for(var i=0;i<t;i++){var u=s.getStructureAt(i);var v=u.getStringByKey("Type");if(f.notNull(v)){var w=f.QInAConverter.lookupAxisType(v);if(w===f.AxisType.ROWS){o=u;}else if(w===f.AxisType.COLUMNS){p=u;}else{this.addWarning(f.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis type");}}else{var x=f.XString.toLowerCase(u.getStringByKey("Name"));if(f.XString.isEqual("columns",x)){p=u;}else if(f.XString.isEqual("rows",x)){o=u;}else{if(i===0){o=u;}else if(i===1){p=u;}else{this.addWarning(f.ErrorCodes.ET_WRONG_TYPE,"Unrecognized axis index");}}}}this.importUniversalDisplayHierarchyDimensions(q,o,p);var y=r.getRsQueryModelDef();var z=r.getResultSetContainer().isHierarchyToUDHConversionEnabled();this.m_rowsAxisProvider.setOcpStructure(q,o,this.m_dataCellProvider.getAvailableDataCellRows(),y.getRowsAxisDef(),z);this.m_columnAxisProvider.setOcpStructure(q,p,this.m_dataCellProvider.getAvailableDataCellColumns(),y.getColumnsAxisDef(),z);};f.InARsEnProvider.prototype.processRsConditions=function(a,c){if(f.notNull(c)&&!f.PrUtils.isListEmpty(a)){var b=a.size();var e=c.getEffectiveConditions();f.XBooleanUtils.checkTrue(b===e.size(),"Number of conditions returned in result-set is not equal to query's conditions!");for(var i=0;i<b;i++){var d=a.getStructureAt(i);var g=e.getByKey(d.getStringByKey("Name"));g.setUsedState(d.getStringByKey("IsUsed"));}}};f.InARsEnProvider.prototype.processAutoSubmitMetadata=function(q,r,a){var v=q.getVariableProcessorState();if(q.isAutoVariableSubmitActive()&&(v===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT||v===f.VariableProcessorState.PROCESSING_AUTO_SUBMIT_AFTER_REINIT)){var i=a.getStructureByKey("Update");this.m_updatedMetadataProcessor=f.InAUpdatedMDProcessor.create(q,r,i);this.m_updatedMetadataProcessor.importMetadataAndUpdateState();f.XObjectExt.release(this.m_updatedMetadataProcessor);}};f.InARsEnProvider.prototype.importSerializedData=function(r,a){if(a.getState()!==f.ResultSetState.EMPTY_JSON){var v=null;var c=null;var s=r.getStructureByKey("SerializedData");var q=a.getQueryManager();if(this.isValid()&&f.notNull(s)){v=s.getStringByKeyExt("View",q.getActiveResultSetContainer().getSerializedView());c=s.getStringByKey("Cube");this.getOlapEnv().cacheRemoteBlendingData(q,v,c);}q.getActiveResultSetContainer().setSerializedData(v,c);}};f.InARsEnProvider.prototype.importUniversalDisplayHierarchyDimensions=function(q,r,c){if(f.notNull(q)&&q.getModelCapabilities().supportsUniversalDisplayHierarchies()){var u=q.getUniversalDisplayHierarchies();var h=u.getHierarchies().getIterator();var a=this.getResultSet().getRsQueryModelDef();while(h.hasNext()){var b=h.next();if(b.isActive()){var d=b.getHierarchyDedicatedAxis();var e=b.getName();if(f.notNull(d)&&f.AxisType.ROWS===d.getType()){this.importUdhDimension(r,e,q,a.getRowsAxisDef());}else if(f.notNull(d)&&f.AxisType.COLUMNS===d.getType()){this.importUdhDimension(c,e,q,a.getColumnsAxisDef());}}}}};f.InARsEnProvider.prototype.importUdhDimension=function(a,u,q,r){if(f.notNull(a)){var b=a.getListByKey("Dimensions");if(f.notNull(b)){var s=b.size();for(var i=0;i<s;i++){var c=b.getStructureAt(i);var d=c.getStringByKey("Name");if(f.XString.isEqual(d,u)){var e=f.QInAImportFactory.createForMetadata(this.getApplication(),null);q.stopEventing();var g=q.getDimensionByName(u);var h=e.importDimension(c,q);g.setText(h.getText());g.getFieldContainer().reinit(h.getFieldContainer());g.getAttributeContainer().reinit(h.getAttributeContainer());this.updateDimensionDefinitions(b,q,r);q.resumeEventing();return;}}}}};f.InARsEnProvider.prototype.updateDimensionDefinitions=function(a,q,r){r.clearDimensions();var s=a.size();for(var i=0;i<s;i++){var b=a.getStructureAt(i);var d=q.getDimensionByName(b.getStringByKey("Name"));r.addDimension(d);}};f.InARsEnProvider.prototype.connectDataCells=function(a){var c=a.getStructureByKey("Cells");if(f.notNull(c)){var l=a.getListByKey("CellArraySizes");var s=f.PrUtils.getListSize(l,0);var d=0;var b=0;if(s>0){d=l.getIntegerAt(0);}if(s>1){b=l.getIntegerAt(1);}var e=a.getListByKey("ExceptionSettings");this.m_dataCellProvider.setOcpStructure(c,b,d,e);}};f.InARsEnProvider.prototype.setDataEntryMask=function(d){if(f.isNull(d)){return;}var i=d.getListByKey("QueryCellNames");if(f.isNull(i)){return;}var c=f.PrUtils.asListOfString(i);this.getResultSet().setDataEntryMask(c);};f.InARsEnProvider.prototype.setInputReadinessStates=function(s){if(f.isNull(s)){return;}var a=f.XList.create();for(var i=0;i<s.size();i++){a.add(f.RsInputReadinessState.create(i,s.getListAt(i)));}if(a.isEmpty()){return;}this.getResultSet().setInputReadinessStates(a);};f.InARsEnProvider.prototype.processComplexUnitsSetting=function(u){if(f.notNull(u)){var a=u.size();if(f.isNull(this.m_complexUnitsSetting)){this.m_complexUnitsSetting=f.XList.create();}for(var i=0;i<a;i++){var b=u.getStructureAt(i);if(f.notNull(b)){this.m_complexUnitsSetting.add(this.buildComplexUnit(b.getListByKey("Type"),b.getListByKey("Value"),b.getListByKey("Description"),b.getListByKey("Exp")));}}}};f.InARsEnProvider.prototype.buildComplexUnit=function(t,v,d,e){if(f.PrUtils.isListEmpty(t)||f.PrUtils.isListEmpty(v)||f.PrUtils.isListEmpty(d)||f.PrUtils.isListEmpty(e)){throw f.XException.createIllegalArgumentException("Invalid component of Complex Unit");}var a=f.XListOfString.create();var b=f.XListOfString.create();var c=f.XListOfString.create();var g=f.XList.create();var s=v.size();for(var j=0;j<s;j++){a.add(t.getStringAt(j));b.add(v.getStringAt(j));c.add(d.getStringAt(j));g.add(f.XIntegerValue.create(e.getIntegerAt(j)));}return f.RsComplexUnit.create(a,b,c,g);};f.InARsEnProvider.prototype.getComplexUnitsSetting=function(){return this.m_complexUnitsSetting;};f.MeasureValueHelpRsProvider=function(){};f.MeasureValueHelpRsProvider.prototype=new f.DfResultSetProvider();f.MeasureValueHelpRsProvider.prototype._ff_c="MeasureValueHelpRsProvider";f.MeasureValueHelpRsProvider.create=function(m){var p=new f.MeasureValueHelpRsProvider();p.setupProvider(m);return p;};f.MeasureValueHelpRsProvider.prototype.m_measureDimension=null;f.MeasureValueHelpRsProvider.prototype.m_columnAxisProvider=null;f.MeasureValueHelpRsProvider.prototype.m_rowsAxisProvider=null;f.MeasureValueHelpRsProvider.prototype.m_dataCellProvider=null;f.MeasureValueHelpRsProvider.prototype.m_measureHelpResult=null;f.MeasureValueHelpRsProvider.prototype.setupProvider=function(m){this.setupAction(null,null,null,m);this.m_measureDimension=m;this.m_columnAxisProvider=f.MeasureValueHelpRsAxisProvider.create(m);this.m_rowsAxisProvider=f.MeasureValueHelpRsAxisProvider.create(m);this.m_dataCellProvider=f.MeasureValueHelpRsDataCellProvider.create();};f.MeasureValueHelpRsProvider.prototype.releaseObject=function(){f.DfResultSetProvider.prototype.releaseObject.call(this);this.m_measureDimension=null;this.m_columnAxisProvider=f.XObjectExt.release(this.m_columnAxisProvider);this.m_rowsAxisProvider=f.XObjectExt.release(this.m_rowsAxisProvider);this.m_dataCellProvider=f.XObjectExt.release(this.m_dataCellProvider);};f.MeasureValueHelpRsProvider.prototype.cloneExt=function(a){var p=f.MeasureValueHelpRsProvider.create(this.m_measureDimension);p.copyFromResultSetProvider(this);return p;};f.MeasureValueHelpRsProvider.prototype.copyFromResultSetProvider=function(t){var o=t;this.m_measureDimension=o.m_measureDimension;this.m_columnAxisProvider.copyValueHelpRsAxisProvider(o.m_columnAxisProvider);this.m_rowsAxisProvider.copyValueHelpRsAxisProvider(o.m_rowsAxisProvider);};f.MeasureValueHelpRsProvider.prototype.processSynchronization=function(s){this.m_measureHelpResult=this.getMeasureHelpNodes();this.addAllMessages(this.m_measureHelpResult);this.m_rowsAxisProvider.setValueHelpNodes(this.m_measureHelpResult.getData(),this.m_measureDimension);this.endSync();return true;};f.MeasureValueHelpRsProvider.prototype.getMeasureHelpNodes=function(){if(f.isNull(this.m_measureHelpResult)){this.m_measureHelpResult=this.m_measureDimension.getSelector().processMeasureHelp();}return this.m_measureHelpResult;};f.MeasureValueHelpRsProvider.prototype.getColumnAxisProvider=function(){return this.m_columnAxisProvider;};f.MeasureValueHelpRsProvider.prototype.getRowsAxisProvider=function(){return this.m_rowsAxisProvider;};f.MeasureValueHelpRsProvider.prototype.getDataCellProvider=function(){return this.m_dataCellProvider;};f.MeasureValueHelpRsProvider.prototype.getComplexUnitsSetting=function(){return null;};f.InAQMgrCancelThreadsAction=function(){};f.InAQMgrCancelThreadsAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrCancelThreadsAction.prototype._ff_c="InAQMgrCancelThreadsAction";f.InAQMgrCancelThreadsAction.createAndRun=function(s,l,c,p){var n=new f.InAQMgrCancelThreadsAction();n.setupActionAndRun(s,l,c,p);return n;};f.InAQMgrCancelThreadsAction.prototype.processSynchronization=function(s){this.m_rpcFunction=this.getActionContext().createFunction();var r=this.m_rpcFunction.getRpcRequest();var a=this.fillRequestStructure();if(f.isNull(a)){return false;}r.setRequestStructure(a);this.m_rpcFunction.processFunctionExecution(s,this,null);return true;};f.InAQMgrCancelThreadsAction.prototype.fillRequestStructure=function(){var r=f.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(f.isNull(r)){return null;}var i=r.putNewStructure("Analytics");var a=i.putNewList("Actions");var b=a.addNewStructure();b.putString("Type","Close");var c=b.putNewList("DataSources");c.addString(this.getActionContext().getInstanceId());return r;};f.InAQMgrCancelThreadsAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync();};f.InAQMgrCancelThreadsAction.prototype.callListener=function(e,l,d,c){l.onProviderCancelThreads(e,d,c);};f.InAQMgrClearCacheAction=function(){};f.InAQMgrClearCacheAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrClearCacheAction.prototype._ff_c="InAQMgrClearCacheAction";f.InAQMgrClearCacheAction.createAndRun=function(s,l,c,p,t){var n=new f.InAQMgrClearCacheAction();n.m_timestamp=t;n.setupActionAndRun(s,l,c,p);return n;};f.InAQMgrClearCacheAction.prototype.m_timestamp=null;f.InAQMgrClearCacheAction.prototype.processSynchronization=function(s){this.m_rpcFunction=this.getActionContext().createFunction();var r=this.m_rpcFunction.getRpcRequest();var a=this.fillRequestStructure();if(f.notNull(a)){r.setRequestStructure(a);this.m_rpcFunction.processFunctionExecution(s,this,null);return true;}return false;};f.InAQMgrClearCacheAction.prototype.fillRequestStructure=function(){var r=f.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(f.isNull(r)){return null;}var i=r.putNewStructure("Analytics");var a=i.putNewList("Actions");var b=a.addNewStructure();b.putString("Type","ClearCache");var c=b.putNewList("DataSources");var p=this.getActionContext();c.addString(p.getInstanceId());var s=p.getSystemType();if(s===f.SystemType.UNV||s===f.SystemType.UQAS){var d=b.putNewList("DataSourceDescriptions");var e=p.getDataSource().getCustomProperties();var g=e.getKeysAsIteratorOfString();var h=d.addNewStructure();while(g.hasNext()){var k=g.next();h.putString(k,e.getByKey(k));}}if(f.isNull(this.m_timestamp)){var j=f.XDateTime.createCurrentLocalDateTime();var m=j.getTimeInMilliseconds();this.m_timestamp=f.XLong.convertToString(m);}b.putString("Id",this.m_timestamp);return r;};f.InAQMgrClearCacheAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync();};f.InAQMgrClearCacheAction.prototype.callListener=function(e,l,d,c){l.onProviderClearCache(e,d,c);};f.InAQMgrShutdownAction=function(){};f.InAQMgrShutdownAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrShutdownAction.prototype._ff_c="InAQMgrShutdownAction";f.InAQMgrShutdownAction.createAndRun=function(s,l,c,p){var n=new f.InAQMgrShutdownAction();n.setupActionAndRun(s,l,c,p);return n;};f.InAQMgrShutdownAction.prototype.processSynchronization=function(s){var p=this.getActionContext();if(p.supportsShutdown()){this.m_rpcFunction=this.getActionContext().createFunction();var r=this.m_rpcFunction.getRpcRequest();var a=this.fillRequestStructure();if(f.notNull(a)){r.setRequestStructure(a);r.setRequestType(f.RpcRequestType.CLOSE_DP);this.m_rpcFunction.processFunctionExecution(s,this,null);return true;}}return false;};f.InAQMgrShutdownAction.prototype.fillRequestStructure=function(){var r=f.InAQMgrSyncAction.prototype.fillRequestStructure.call(this);if(f.isNull(r)){return null;}var i=r.putNewStructure("Analytics");var a=i.putNewList("Actions");var b=a.addNewStructure();b.putString("Type","Close");var c=b.putNewList("DataSources");c.addString(this.getActionContext().getInstanceId());return r;};f.InAQMgrShutdownAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);this.setData(this.getActionContext());this.endSync();};f.InAQMgrShutdownAction.prototype.callListener=function(e,l,d,c){l.onProviderShutdown(e,d,c);};f.InAQMgrStartupAction=function(){};f.InAQMgrStartupAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrStartupAction.prototype._ff_c="InAQMgrStartupAction";f.InAQMgrStartupAction.createServiceInitAndRun=function(s,l,c,p,g){var n=f.InAQMgrStartupAction.createInitAndRun(s,l,true,c,p,g);return n;};f.InAQMgrStartupAction.createMetadataInitAndRun=function(s,l,c,p,g){var n=f.InAQMgrStartupAction.createInitAndRun(s,l,false,c,p,g);return n;};f.InAQMgrStartupAction.createInitAndRun=function(s,l,i,c,p,g){var a=p.getQueryServiceConfig();var r;var m;if(a.isFusionActive()){m=new f.InAQMgrStartupAction();m.m_isServiceInit=i;m.setData(g);m.setupActionAndRun(s,l,c,p);r=m;}else{var b=f.SyncActionSequence.create(s,l,c,p);var d=f.InAQMgrStartupCacheSync.createAndRun(f.SyncType.DELAYED,null,null,p);b.addAction(d);b.setFinalizeListener(d);m=new f.InAQMgrStartupAction();m.m_isServiceInit=i;m.m_cacheSync=d;m.setData(g);m.setupActionAndRun(f.SyncType.DELAYED,null,null,p);b.setDataAction(m);b.setListenerAction(m);b.addAction(m);b.process();r=b;}return r;};f.InAQMgrStartupAction.prototype.m_isServiceInit=false;f.InAQMgrStartupAction.prototype.m_cacheSync=null;f.InAQMgrStartupAction.prototype.m_cacheKey=null;f.InAQMgrStartupAction.prototype.m_cubeStructure=null;f.InAQMgrStartupAction.prototype.processSynchronization=function(s){var p=this.getActionContext();var c=p.getQueryServiceConfig();if(this.m_isServiceInit){if(p.getLifeCycleState()!==f.LifeCycleState.INITIAL){this.addError(f.ErrorCodes.INVALID_STATE,"Query Manager is not initial");return false;}p.setLifeCycleState(f.LifeCycleState.STARTING_UP);}var m=p.getMode();var q=this.getQueryModelBase();var d=p.getDataSource();if(f.isNull(q)){if(m===f.QueryManagerMode.RAW_QUERY){p.setLifeCycleState(f.LifeCycleState.ACTIVE);this.endSync();return true;}p.setupDesignTimeMode();q=this.getQueryModelBase();d=p.getDataSource();}else{q.setDataSource(d);}if(m.isTypeOf(f.QueryManagerMode.DEFAULT)&&f.isNull(d)){this.addError(f.ErrorCodes.INVALID_STATE,"No datasource given");return false;}var a=q.getDataSourceBase();var i=a.getInstanceId();if(f.isNull(i)){i=p.getInstanceId();if(f.isNull(i)){i=p.getApplication().createNextInstanceId();}a.setInstanceId(i);}var b=a.getSystemName();if(f.isNull(b)){a.setSystemName(p.getSystemName());}if(m===f.QueryManagerMode.RAW_QUERY&&this.m_isServiceInit){return false;}var e=p.getInitSettings().getDefinitionContent();var g=null;var h=null;var j=false;if(c.isFusionActive()){h=c.getMetadataContent();if(f.notNull(h)){j=true;}g=c.getRepositoryContent();}if(j===false){if(f.notNull(e)&&e.getContentType().containsMetadata()){h=e;j=true;}else if(f.notNull(d)){var k=d.getExtendedDimensions();if(f.notNull(k)){if(d.getExtendedDimensions().hasElements()&&m===f.QueryManagerMode.BLENDING){this.addWarningExt(f.OriginLayer.SERVER,f.ErrorCodes.INVALID_DIMENSION,"Joining ExtendedDimensions on a BlendingQuery is not supported by the backend!");}}this.m_cacheKey=f.QFactory.createCacheKeyByContext(q);var l=c.getDefinitionType();var n;if(f.notNull(l)&&l.containsMetadata()){n=this.getApplication().getOlapEnvironment().getQueryMetadata(this.m_cacheKey);h=f.XContent.createJsonObjectContent(f.QModelFormat.INA_METADATA,n);j=true;}else{if(c.isFusionActive()===false){if(q.isPartialResponse()===false){n=this.m_cacheSync.getMetadataInCache();if(f.notNull(n)){h=f.XContent.createJsonObjectContent(f.QModelFormat.INA_METADATA,n);}}}}}}if(f.notNull(h)){this.runApplySteps(q,h,g,m,j);return true;}else if(m===f.QueryManagerMode.BLENDING){this.addProfileStep("Prepare Metadata Request");var o=f.InAQMgrStartupBlending.create(this);o.prepare(s);this.endProfileStep();o.process(this,s);return this.isValid();}else{if(p.supportsAndAllowsEmptyExtendedVarDefinition()){var r=p.emptyVariableDefinition(s,null,null);this.addAllMessages(r);}else{this.addProfileStep("Prepare Metadata Request");this.createRpcFunction(p,m);this.endProfileStep();this.m_rpcFunction.processFunctionExecution(s,this,m);return true;}}return false;};f.InAQMgrStartupAction.prototype.createBlendingFunction=function(){this.createRpcFunction(this.getActionContext(),f.QueryManagerMode.BLENDING);return this.m_rpcFunction;};f.InAQMgrStartupAction.prototype.createRpcFunction=function(p,m){this.m_rpcFunction=p.createFunction();var r=this.m_rpcFunction.getRpcRequest();var a=f.PrFactory.createStructure();this.fillMetadataRequestStructure(a,m);r.setRequestStructure(a);};f.InAQMgrStartupAction.prototype.fillMetadataRequestStructure=function(r,m){var p=this.getActionContext();var i=p.setInnerStructure(r,"Metadata",null);var a=p.getProviderTypeProx();if(a===f.ProviderType.ANALYTICS||a===f.ProviderType.CATALOG){i.putString("Context","Analytics");}else if(a===f.ProviderType.PLANNING||a===f.ProviderType.PLANNING_VALUE_HELP){i.putString("Context","Planning");}else if(a===f.ProviderType.LIST_REPORTING){i.putString("Context","ListReporting");}if(m===f.QueryManagerMode.BLENDING){var s=this.getServiceConfig();var b=s.getBlendingDefinition();var c=f.QInADataSourceBlending.exportDataSourceBlending(f.QModelFormat.INA_DATA,b,false);f.QInAExportUtil.setNonEmptyString(c,"InstanceId",s.getInstanceId());i.put("DataSource",c);}if(this.getSession().hasFeature(f.FeatureToggleOlap.CLIENT_INFO_METADATA)){var d=p.getOlapSystemContainer();var e=d.getServiceCapabilities(f.ServerService.ANALYTIC);f.QInAClientInfo.exportClientInfo(r,p.getApplication(),e.supportsClientInfo());}};f.InAQMgrStartupAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);var m=c;var p=this.getActionContext();var q=this.getQueryModelBase();if(this.isValidResponse(e,r)){var a=r.getRootElement();var b=f.XContent.createJsonObjectContent(f.QModelFormat.INA_METADATA,a);this.runApplySteps(q,b,null,m,false);}else{p.setLifeCycleState(f.LifeCycleState.TERMINATED);this.endProfileStep();this.endSync();}};f.InAQMgrStartupAction.prototype.isValidResponse=function(e,r){if(!e.isValid()){return false;}if(f.isNull(r)){return false;}if(r.getRootElement()===null){this.addError(f.ErrorCodes.PARSER_ERROR,"No json inside");return false;}return true;};f.InAQMgrStartupAction.prototype.runApplySteps=function(q,m,a,b,i){q.stopEventing();if(this.isValid()){this.addProfileStep("step1ApplyMetadataStructure");this.step1ApplyMetadataStructure(q,m,b,i);this.endProfileStep();}if(this.isValid()){this.addProfileStep("step2ApplyPlanning");this.step2ApplyPlanning(m,b);this.endProfileStep();}if(this.isValid()){this.addProfileStep("step3ApplyQueryModel");this.step3ApplyQueryModel(a,i);this.endProfileStep();}if(this.isValid()){this.addProfileStep("step4ApplyDataRequest");this.step4ApplyDataRequest();this.endProfileStep();}if(this.isValid()){this.addProfileStep("step5ApplyBlending");this.step5ApplyBlending(b,i);this.endProfileStep();}this.step6Finalize();if(this.isValid()){this.addProfileStep("step6Variables");this.step6Variables(i);this.endProfileStep();}q.resumeEventing();this.endSync();};f.InAQMgrStartupAction.prototype.step1ApplyMetadataStructure=function(q,m,a,i){if(f.notNull(m)){var r=m.getJsonContent();var b=m.getContentType();var p=this.getActionContext();var c=p.getQueryServiceConfig();if(c.isFusionActive()===false){if(q.isPartialResponse()===false){this.m_cacheSync.storeMetadataInCache(r);}}var d=this.getApplication();if(!f.InAHelper.importMessages(r,this)){this.m_cubeStructure=r;if(b!==f.QModelFormat.INA_CLONE){if(f.notNull(r)){this.m_cubeStructure=r.getStructureByKey("Cube");if(f.isNull(this.m_cubeStructure)&&r.containsKey("Command")){this.m_cubeStructure=r.getStructureByKey("Command");}if(f.isNull(this.m_cubeStructure)){if(i){this.m_cubeStructure=r;}var e=r.getStructureByKey("DataSourceValidation");if(f.notNull(e)){if(e.getBooleanByKey("Valid")){this.addInfo(f.InfoCodes.QUERY_MODEL_VERSION_VALID,"Model version valid");}else{this.addErrorExt(f.OriginLayer.DRIVER,f.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null);}return;}}}}if(f.isNull(this.m_cubeStructure)){this.addErrorExt(f.OriginLayer.DRIVER,f.ErrorCodes.QM_CUBE_ENTRY_NOT_FOUND,"Invalid Metadata from server - Cube tag in structure not found",null);}else{var g=p.getModelCapabilities();var h;if(a===f.QueryManagerMode.BLENDING){h=f.QInAImportFactory.createForMetadata(d,g);}else{var j=this.getServiceConfig();if(b===f.QModelFormat.INA_CLONE){h=f.QInAImportFactory.createForCloning(d,g);}else if(j.isLoadingDefaultQuery()){h=f.QInAImportFactory.createForMetadata(d,g);}else{h=f.QInAImportFactory.createForMetadataCore(d,g);}}if(f.notNull(a)){var k=this.removeAlreadyLoadedDimensions(q);if(k){h.importQueryModel(this.m_cubeStructure,q);}else{var l=f.QInAImportFactory.createForMetadata(d,g);var v=f.QueryModel.create(this.getOlapEnv(),p,q.getModelCapabilitiesBase());v.setDataSource(q.getDataSource());l.importQueryModel(this.m_cubeStructure,v);var n=v.getDimensions();for(var o=0;o<n.size();o++){var s=n.get(o);var t=q.getDimensionByNameFromExistingMetadata(s.getName());if(f.notNull(t)&&t.getDimensionType()===f.DimensionType.DIMENSION_INCOMPLETE){t.copyDimension(s);}}q.setServerBaseSerialization(null,f.QModelOrigin.INITIAL_SERVER_CALL,this.m_cubeStructure);f.XObjectExt.release(v);}}if(p.getDataSource()!==null){p.getDataSource().setValidationHash(q.getDataSource().getValidationHash());}var u=r.getStructureByKey("PerformanceData");if(f.notNull(u)){var w=u.getStringByKey("UserName");var x=q.getCubeInfo();if(f.notNull(x)){x.setUserName(w);}}this.addAllMessages(h);}}}};f.InAQMgrStartupAction.prototype.removeAlreadyLoadedDimensions=function(q){if(q.isPartialResponse()){return false;}for(var i=0;i<q.getLoadedDimensions().size();){q.removeDimension(q.getLoadedDimensions().get(i));}return true;};f.InAQMgrStartupAction.prototype.step2ApplyPlanning=function(m,a){if(f.notNull(m)&&f.notNull(this.m_cubeStructure)){var p=this.getActionContext();var b=this.getApplication();f.PlanningStateHandler.update(b,p.getSystemName(),m.getJsonContent(),this);if(a!==f.QueryManagerMode.BLENDING){this.initPlanningSupport(this.m_cubeStructure,true);}}};f.InAQMgrStartupAction.prototype.step3ApplyQueryModel=function(q,i){var a=this.getQueryModelBase();var p=this.getActionContext();var b=p.getQueryServiceConfig();var m=b.getModellerContent();if(f.notNull(m)){a.deserializeFromElementExt(m.getContentType(),m.getJsonContent());}if(f.notNull(q)){a.deserializeFromElementExt(q.getContentType(),q.getJsonContent());}else if(i===false){var d=p.getDeserializationStructure();var c=p.getDeserializationImporter();if(f.notNull(d)&&f.notNull(c)){a.resumeEventing();c.importQueryModel(d,a);a.stopEventing();}}};f.InAQMgrStartupAction.prototype.step4ApplyDataRequest=function(){var p=this.getActionContext();var d=p.getQueryServiceConfig().getDataRequest();if(f.notNull(d)){var q=this.getQueryModelBase();q.deserializeFromElementExt(f.QModelFormat.INA_DATA,d);}};f.InAQMgrStartupAction.prototype.step5ApplyBlending=function(m,i){if(i===false){if(m===f.QueryManagerMode.BLENDING){var s=this.getServiceConfig();var b=s.getBlendingDefinition();if(f.notNull(b)){var q=this.getQueryModelBase();var d=q.getDataSourceBase();d.setBlendingDefinition(b);}}}};f.InAQMgrStartupAction.prototype.step6Variables=function(i){if(i===false){var p=this.getActionContext();if(p.isDirectVariableTransferEnabled()===false){p.setVariableProcessorState(f.VariableProcessorState.CHANGEABLE_STARTUP);}p.resumeEventing();p.prepareAfterVariables();p.stopEventing();}};f.InAQMgrStartupAction.prototype.step6Finalize=function(){var p=this.getActionContext();if(this.isValid()){p.setLifeCycleState(f.LifeCycleState.ACTIVE);}else{p.setLifeCycleState(f.LifeCycleState.TERMINATED);}};f.InAQMgrStartupAction.prototype.callListener=function(e,l,d,c){if(this.m_isServiceInit){var s=l;s.onServiceInitialized(e,d,c);}else{var m=l;m.onQueryModelInitialized(e,d,c);}};f.InAQMgrStartupAction.prototype.getServiceConfig=function(){return this.getQueryManager().getServiceConfig();};f.InAQMgrVarAction=function(){};f.InAQMgrVarAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrVarAction.prototype._ff_c="InAQMgrVarAction";f.InAQMgrVarAction.createAndRunDefinition=function(p,s,l,c){var a;var b=p.getVariableProcessorState();if(b===f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){a=f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION;}else{a=f.VariableProcessorState.PROCESSING_DEFINITION;}var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,a,f.ProcessingStep.VARIABLE_DEFINITION,true,true,true);return n;};f.InAQMgrVarAction.createAndRunVariantActivation=function(p,v,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,v,l,c,f.VariableProcessorState.PROCESSING_VARIANT_ACTIVATION,f.ProcessingStep.VARIABLE_DEFINITION,true,true,true);return n;};f.InAQMgrVarAction.createAndRunVariantDeletion=function(p,v,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,v,l,c,f.VariableProcessorState.PROCESSING_VARIANT_DELETION,f.ProcessingStep.VARIANT_DELETE,false,true,true);return n;};f.InAQMgrVarAction.createAndRunVariantUpdate=function(p,v,u,s,l,c){var n=new f.InAQMgrVarAction();n.m_updateVariantProperties=u;n.setupVarActionAndRun(s,p,v,l,c,f.VariableProcessorState.PROCESSING_VARIANT_SAVE,f.ProcessingStep.VARIANT_SAVE,false,true,true);return n;};f.InAQMgrVarAction.createAndRunSubmit=function(p,s,l,c){var a;if(p.getVariableProcessorState()===f.VariableProcessorState.CHANGEABLE_REINIT){a=f.VariableProcessorState.PROCESSING_SUBMIT_AFTER_REINIT;}else{a=f.VariableProcessorState.PROCESSING_SUBMIT;}var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,a,f.ProcessingStep.VARIABLE_SUBMIT,true,true,p.isVariableSubmitNeeded());return n;};f.InAQMgrVarAction.createAndRunCancel=function(p,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_CANCEL,f.ProcessingStep.VARIABLE_CANCEL,false,false,!p.isSubmitted());return n;};f.InAQMgrVarAction.createAndRunCheck=function(p,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_CHECK,null,false,false,true);return n;};f.InAQMgrVarAction.createAndRunGetRuntimeInfo=function(p,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_DEFINITION,f.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return n;};f.InAQMgrVarAction.createAndRunReInitAfterSubmit=function(p,s,l,c){if(p.getInitSettings().isExternalizedDynamicFilter()){var o=p.getOlapEnv().getFilterManager();o.projectExternalizedFilter(p);}var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_REINIT,f.ProcessingStep.VARIABLE_DEFINITION,true,false,p.isSubmitted());return n;};f.InAQMgrVarAction.createAndRunSetGetValues=function(p,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_UPDATE_VALUES,f.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return n;};f.InAQMgrVarAction.createAndRunEmptyVariableDefinition=function(p,s,l,c){var n=new f.InAQMgrVarAction();n.setupVarActionAndRun(s,p,null,l,c,f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION,f.ProcessingStep.VARIABLE_DEFINITION,true,false,true);return n;};f.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter=function(p,i,a){p.setStateBeforeVarScreen(null);p.setMetadataStateBeforeVarScreen(null);if(a){p.getNewResultsetContainer();}if(p.getInitSettings().isExternalizedDynamicFilter()){var o=p.getOlapEnv().getFilterManager();o.externalizeDynamicFilterAfterSubmit(p,i);}};f.InAQMgrVarAction.prototype.m_applyVariableStates=false;f.InAQMgrVarAction.prototype.m_applyVariableAndModelStates=false;f.InAQMgrVarAction.prototype.m_processingStep=null;f.InAQMgrVarAction.prototype.m_state=null;f.InAQMgrVarAction.prototype.m_variableVariant=null;f.InAQMgrVarAction.prototype.m_needsProcessing=false;f.InAQMgrVarAction.prototype.m_isProcessingEmptyDef=false;f.InAQMgrVarAction.prototype.m_updateVariantProperties=false;f.InAQMgrVarAction.prototype.setupVarActionAndRun=function(s,c,v,l,a,b,p,d,e,n){this.m_applyVariableStates=d;this.m_applyVariableAndModelStates=e;this.m_processingStep=p;this.m_state=b;this.m_needsProcessing=n;this.m_variableVariant=v;if(this.m_state===f.VariableProcessorState.PROCESSING_REINIT){var q=c.getQueryModel();c.setStateBeforeVarScreen(q.serializeToElement(f.QModelFormat.INA_REPOSITORY));c.setMetadataStateBeforeVarScreen(q.serializeToElement(f.QModelFormat.INA_METADATA));}else if(this.m_state===f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){this.m_isProcessingEmptyDef=true;}f.InAQMgrSyncAction.prototype.setupActionAndRun.call(this,s,l,a,c);};f.InAQMgrVarAction.prototype.releaseObject=function(){this.m_rpcFunction=null;this.m_processingStep=null;this.m_state=null;f.InAQMgrSyncAction.prototype.releaseObject.call(this);};f.InAQMgrVarAction.prototype.processSynchronization=function(s){this.setData(this);if(this.m_needsProcessing){this.m_rpcFunction=this.createFunction();var r=f.PrFactory.createStructure();var w=this.m_state!==f.VariableProcessorState.PROCESSING_REINIT&&this.m_state!==f.VariableProcessorState.PROCESSING_VARIANT_DELETION;var a=this.getActionContext();a.fillAnalyticRequestStructure(r,f.QInAConverter.lookupContextNameForProvider(this.getQueryManager().getProviderType()),w,this.m_processingStep,this.m_variableVariant);a.setVariableProcessorState(this.m_state);this.m_rpcFunction.getRpcRequest().setRequestStructure(r);this.m_rpcFunction.processFunctionExecution(s,this,null);return true;}return false;};f.InAQMgrVarAction.prototype.onFunctionExecuted=function(e,r,c){this.addProfileStep("applyDataModelStructure");this.addAllMessages(e);var a=this.getActionContext();if(f.notNull(a)){var q=a.getQueryModelBase();if(e.isValid()&&f.notNull(r)){var b=r.getRootElement();if(f.isNull(b)){this.addError(f.ErrorCodes.PARSER_ERROR,"Root element is missing");}else{if(!f.InAHelper.importMessages(b,this)){f.PlanningStateHandler.update(this.getApplication(),a.getSystemName(),b,this);if(this.m_applyVariableStates){var i=b.getStructureByKey("Cube");if(f.isNull(i)){this.addError(f.ErrorCodes.PARSER_ERROR,"Invalid Metadata from server - Cannot find 'Cube' element.");}else{this.processCubeElement(q,b,i,a);}}if(this.m_state===f.VariableProcessorState.PROCESSING_VARIANT_DELETION){a.removeVariableVariant(this.m_variableVariant);}else if(this.m_state===f.VariableProcessorState.PROCESSING_VARIANT_SAVE&&this.m_updateVariantProperties){var d=b.getStructureByKey("Cube");f.QInAMdQuery.importVariants(d,q);var n=f.QInAMdQuery.importVariant(d,q);if(f.isNull(n)){this.addError(f.ErrorCodes.PARSER_ERROR,"Could not parse variant.");}else{var v=a.getVariableVariantByName(n);this.m_variableVariant.setName(n);this.m_variableVariant.setText(v.getText());this.m_variableVariant.setScope(v.getScope());this.m_variableVariant.applyState();}}}}}if(this.isValid()){var g=this.m_state.getNextState();if(f.notNull(g)){if(this.m_state===f.VariableProcessorState.PROCESSING_CANCEL){this.addAllMessages(q.deserializeFromElementExt(f.QModelFormat.INA_METADATA,a.getMetadataStateBeforeVarScreen()));this.addAllMessages(q.deserializeFromElementExt(f.QModelFormat.INA_REPOSITORY,a.getStateBeforeVarScreen()));a.setStateBeforeVarScreen(null);a.setMetadataStateBeforeVarScreen(null);if(a.getInitSettings().isExternalizedDynamicFilter()){a.getConvenienceCommands().clearNonMeasureFilters();}}else if(this.m_state.isTypeOf(f.VariableProcessorState.PROCESSING_SUBMIT)){f.InAQMgrVarAction.clearSavedStateAndExternalizeDynamicFilter(a,this.m_state===f.VariableProcessorState.PROCESSING_SUBMIT,true);}a.setVariableProcessorState(g);}else{a.returnToPreviousProcessorState();}a.prepareAfterVariables();}else{if(this.m_state.isTypeOf(f.VariableProcessorState.PROCESSING_SUBMIT)){a.setVariableProcessorState(f.VariableProcessorState.SUBMIT_FAILED);}else{a.returnToPreviousProcessorState();}}}this.endProfileStep();this.endSync();};f.InAQMgrVarAction.prototype.processCubeElement=function(q,r,c,a){if(f.notNull(q)&&a.getModelCapabilities().supportsAutoVariableSubmit()){q.setIsMetadataUpdatedByAutoSubmit(false);}if(this.m_applyVariableAndModelStates){this.applyServerModel(q,r,c);}else if(this.m_isProcessingEmptyDef){var i=a.getVariablesImporter();f.QInAMdQuery.importDimensions(i,c,q);i.importDimensions(c,q,q);f.QInAMdQuery.importVariants(c,q);i.importVariables(c,a.getVariableContainerBase());f.QInAMdDataSource.importMd(i,c,q,q);this.addAllMessages(i);this.m_isProcessingEmptyDef=false;this.getActionContext().setLifeCycleState(f.LifeCycleState.ACTIVE);}else{var b=a.getVariablesImporter();b.importVariables(c,a.getVariableContainerBase());this.addAllMessages(b);}};f.InAQMgrVarAction.prototype.applyServerModel=function(q,i,a){var b=a;var p=this.getActionContext();var m=false;if(p.getPreviousVariableProcessorState()!==f.VariableProcessorState.PROCESSING_EMPTY_VARIABLE_DEFINITION){m=true;}var e=this.getOlapEnv();var c=this.getApplication();f.PlanningStateHandler.update(c,p.getSystemName(),i,this);var d=f.QInAImportFactory.createForMetadata(c,q.getModelCapabilities());var v=f.QueryModel.create(e,p,q.getModelCapabilitiesBase());v.setDataSource(q.getDataSource());if(this.m_processingStep===f.ProcessingStep.VARIABLE_DEFINITION){d.importVariableManager(i.getStructureByKey("Cube"),q.getVariableManagerBase(),q);}else if(!m){d.importQueryModel(b,q);var g=p.getDeserializationStructure();var h=p.getDeserializationImporter();if(f.notNull(g)&&f.notNull(h)){h.importQueryModel(g,q);}}else{d.importQueryModel(b,v);b=f.PrFactory.createStructureDeepCopy(b);q.setServerBaseSerialization(null,f.QModelOrigin.VARIABLE_SUBMIT,b);}this.addAllMessages(d);if(m){q.metadataUpdateEventing();var j=p.getVariableProcessorState();var s=f.InAQMgrMergeSettings.create(j===f.VariableProcessorState.PROCESSING_SUBMIT);this.revertUdhStateOnVariableModel(v,q,s);q.mergeDeepRecursive(s,v);}f.XObjectExt.release(v);this.initPlanningSupport(b,false);if(m){q.resumeEventing();}};f.InAQMgrVarAction.prototype.revertUdhStateOnVariableModel=function(v,q,s){if(q.getQueryManager().isHierarchyToUDHConversionEnabledForCurrentRs()){var u=q.getUniversalDisplayHierarchies();var h=u.getHierarchies();var a=v.getUniversalDisplayHierarchies();var b=a.getHierarchies();if(f.XCollectionUtils.hasElements(h)&&f.XCollectionUtils.hasElements(b)){for(var i=0;i<b.size();i++){var c=b.get(i);if(c.isActive()){var d=c.getHierarchyDedicatedAxis().getType();var e=f.QInAUniversalDisplayHierarchies.getDimensionWithLeveledHierarchy(q.getAxis(d));if(f.notNull(e)){this.revertUdhState(v,e,a,u,s);}}}}}};f.InAQMgrVarAction.prototype.revertUdhState=function(v,c,a,u,s){var b=v.getDimensionByName(c.getName());if(f.notNull(b)){b.getHierarchyManager().copyFrom(c.getHierarchyManager(),null);var d=b.getFilter();if(f.notNull(d)){d.clear();}a.mergeDeepRecursive(s,u);}};f.InAQMgrVarAction.prototype.isSuccessfullyProcessed=function(){return this.isValid();};f.InAQMgrVarAction.prototype.callListener=function(e,l,d,c){l.onVariableProcessorExecuted(e,d,c);};f.InAQMgrVariantModifyAction=function(){};f.InAQMgrVariantModifyAction.prototype=new f.InAQMgrSyncAction();f.InAQMgrVariantModifyAction.prototype._ff_c="InAQMgrVariantModifyAction";f.InAQMgrVariantModifyAction.ACTIVATION_STEP="ACTIVATE";f.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP="SAVE_REPLACE";f.InAQMgrVariantModifyAction.SAVE_NEW_STEP="SAVE_NEW";f.InAQMgrVariantModifyAction.SAVE_OLD_STEP="SAVE_OLD";f.InAQMgrVariantModifyAction.DELETE_STEP="DELETE";f.InAQMgrVariantModifyAction.DELETE_ERROR_STEP="DELETE_ERROR";f.InAQMgrVariantModifyAction.createAndRunModification=function(c,v,s,l,a){var o=new f.InAQMgrVariantModifyAction();o.m_variant=v;o.setupActionAndRun(s,l,a,c);return o;};f.InAQMgrVariantModifyAction.prototype.m_variant=null;f.InAQMgrVariantModifyAction.prototype.m_replacementVariant=null;f.InAQMgrVariantModifyAction.prototype.m_previousVariableValues=null;f.InAQMgrVariantModifyAction.prototype.releaseObject=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=f.XObjectExt.release(this.m_previousVariableValues);f.InAQMgrSyncAction.prototype.releaseObject.call(this);};f.InAQMgrVariantModifyAction.prototype.processSynchronization=function(s){if(!this.m_variant.isDirty()){return false;}var q=this.getActionContext();if(this.m_variant.getName()===null){var d=this.m_variant.getDirtyScope();var a=d!==f.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(a,this.m_variant.getDirtyText(),d,f.InAQMgrVariantModifyAction.SAVE_NEW_STEP);return true;}this.m_previousVariableValues=q.getVariableContainer().serializeToElement(f.QModelFormat.INA_DATA);q.activateVariableVariant(this.m_variant,s,this,f.XStringValue.create(f.InAQMgrVariantModifyAction.ACTIVATION_STEP));return true;};f.InAQMgrVariantModifyAction.prototype.onFunctionExecuted=function(e,r,c){};f.InAQMgrVariantModifyAction.prototype.isSuccessfullyProcessed=function(){return this.isValid();};f.InAQMgrVariantModifyAction.prototype.onVariableProcessorExecuted=function(e,r,c){var s=c.toString();var q=this.getActionContext();this.addAllMessages(e);if(this.hasErrors()){this.doErrorHandling(s);}else{this.clearMessages();switch(s){case f.InAQMgrVariantModifyAction.ACTIVATION_STEP:var d=this.m_variant.getDirtyText();if(this.m_variant.isNameOrScopeDirty()){var a=this.m_variant.getDirtyScope();var b=a!==f.Scope.USER?this.m_variant.getDirtyName():null;this.createAndRunReplacementSave(b,d,a,f.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP);}else{var n=this.m_variant.getName();var g=this.m_variant.getScope();this.createAndRunReplacementSave(n,d,g,f.InAQMgrVariantModifyAction.SAVE_OLD_STEP);}break;case f.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:q.deleteVariableVariant(this.m_variant,this.getActiveSyncType(),this,f.XStringValue.create(f.InAQMgrVariantModifyAction.DELETE_STEP));break;case f.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case f.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.applyVariantState();this.endSync();break;case f.InAQMgrVariantModifyAction.DELETE_STEP:this.applyVariantState();this.restorePreviousValuesAndEnd();break;case f.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break;}}};f.InAQMgrVariantModifyAction.prototype.doErrorHandling=function(s){var q=this.getActionContext();switch(s){case f.InAQMgrVariantModifyAction.ACTIVATION_STEP:this.endSync();break;case f.InAQMgrVariantModifyAction.SAVE_REPLACE_STEP:this.restorePreviousValuesAndEnd();break;case f.InAQMgrVariantModifyAction.SAVE_OLD_STEP:this.restorePreviousValuesAndEnd();break;case f.InAQMgrVariantModifyAction.SAVE_NEW_STEP:this.endSync();break;case f.InAQMgrVariantModifyAction.DELETE_STEP:q.deleteVariableVariant(this.m_replacementVariant,this.getActiveSyncType(),this,f.XStringValue.create(f.InAQMgrVariantModifyAction.DELETE_ERROR_STEP));this.restorePreviousValuesAndEnd();break;case f.InAQMgrVariantModifyAction.DELETE_ERROR_STEP:this.restorePreviousValuesAndEnd();break;}};f.InAQMgrVariantModifyAction.prototype.createAndRunReplacementSave=function(n,t,s,a){this.m_replacementVariant=f.QVariableVariant.createVariantWithScopeInternal(this.m_variant.getDataSource(),n,t,s);f.InAQMgrVarAction.createAndRunVariantUpdate(this.getActionContext(),this.m_replacementVariant,true,this.getActiveSyncType(),this,f.XStringValue.create(a));};f.InAQMgrVariantModifyAction.prototype.applyVariantState=function(){this.m_variant.setName(this.m_replacementVariant.getName());this.m_variant.setText(this.m_replacementVariant.getText());this.m_variant.setScope(this.m_replacementVariant.getScope());this.m_variant.applyState();};f.InAQMgrVariantModifyAction.prototype.restorePreviousValuesAndEnd=function(){var q=this.getActionContext();q.getVariableContainer().deserializeFromElementExt(f.QModelFormat.INA_DATA,this.m_previousVariableValues);this.endSync();};f.InAQMgrVariantModifyAction.prototype.endSync=function(){this.m_replacementVariant=null;this.m_variant=null;this.m_previousVariableValues=f.XObjectExt.release(this.m_previousVariableValues);f.InAQMgrSyncAction.prototype.endSync.call(this);};f.InAQMgrVariantModifyAction.prototype.callListener=function(e,l,d,c){l.onVariableProcessorExecuted(e,d,c);};f.InAQRriTargetsSyncAction=function(){};f.InAQRriTargetsSyncAction.prototype=new f.InAQMgrSyncAction();f.InAQRriTargetsSyncAction.prototype._ff_c="InAQRriTargetsSyncAction";f.InAQRriTargetsSyncAction.createAndRun=function(s,p,i){var r=new f.InAQRriTargetsSyncAction();r.m_parent=p;r.m_identifier=i;r.setupActionAndRun(s,p,null,null);return r;};f.InAQRriTargetsSyncAction.extractRriTargets=function(t){var r=f.XList.create();var l=f.PrUtils.getListSize(t,0);for(var i=0;i<l;i++){var a=f.PrUtils.getStructureElement(t,i);if(f.isNull(a)){continue;}var b=f.QRriTarget.create();var p=f.PrUtils.getKeysAsReadOnlyListOfString(a,null);if(f.notNull(p)){var c=b.getParameters();for(var j=0;j<p.size();j++){var d=p.get(j);var e=f.PrUtils.getStringProperty(a,d);if(f.notNull(e)){c.put(d,e.getString());}}}var g=f.PrUtils.getStructureProperty(a,"Properties");var h=f.PrUtils.getKeysAsReadOnlyListOfString(g,null);if(f.notNull(h)){var m=b.getCustomProperties();for(var k=0;k<h.size();k++){var n=h.get(k);var o=f.PrUtils.getStringProperty(g,n);if(f.notNull(o)){m.put(n,o.getString());}}}r.add(b);}return r;};f.InAQRriTargetsSyncAction.prototype.m_parent=null;f.InAQRriTargetsSyncAction.prototype.m_identifier=null;f.InAQRriTargetsSyncAction.prototype.releaseObject=function(){this.m_parent=null;this.m_identifier=null;f.InAQMgrSyncAction.prototype.releaseObject.call(this);};f.InAQRriTargetsSyncAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);var a=null;if(e.isValid()){a=f.InAQRriTargetsSyncAction.extractRriTargets(f.PrUtils.getListProperty(r.getRootElement(),"RRITargets"));}var b=f.ExtResult.create(a,e);var m=this.m_identifier.getManager();m.setResult(b,this.m_identifier);this.endSync();};f.InAQRriTargetsSyncAction.prototype.callListener=function(e,l,d,c){};f.InAQRriTargetsSyncAction.prototype.processSynchronization=function(s){var r=this.exportRequestJson();var c=this.m_parent.getConnection();var a;if(c.getSession().hasFeature(f.FeatureToggleOlap.SERVER_METADATA_VIA_SYSTEM_CONNECT)){a=c.getSystemConnect().getServerMetadata();}else{a=c.getServerMetadata();}var b=a.getMetadataForService(f.ServerService.ANALYTIC);var d=b.getByKey(f.InACapabilities.C032_FAST_PATH);var p;if(f.notNull(d)){p=d.getValue();}else{p=this.m_parent.getSystemType().getInAPath();}var o=c.newRpcFunction(p);var e=o.getRpcRequest();e.setRequestStructure(r);o.processFunctionExecution(s,this,null);return true;};f.InAQRriTargetsSyncAction.prototype.exportRequestJson=function(){var r=f.PrFactory.createStructure();var i=this.m_parent.setInnerStructure(r,"Analytics",null);var e=f.QInAExportFactory.createForData(this.m_parent.getApplication(),this.m_parent.getModelCapabilities());var q=this.m_parent.getQueryModel();var a=e.exportQueryModel(q,true,false);i.put("Definition",a);i.put("DataSource",e.exportDataSource(q.getDataSource(),false));i.getStructureByKey("DataSource").putString("Type","Query/RRI");var o=a.putNewStructure("ResultSetFeatureRequest");o.putBoolean("UseDefaultAttributeKey",false);if(this.m_parent.getCapabilitiesBase().supportsEncodedResultset()){o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None");}var b=q.getQueryManager().getRriTargetManager();var c=i.putNewStructure("RRIContext");c.putInteger("Column",b.getResultSetColumn());c.putInteger("Row",b.getResultSetRow());return r;};f.InAQueryManagerProvider=function(){};f.InAQueryManagerProvider.prototype=new f.QueryManager();f.InAQueryManagerProvider.prototype._ff_c="InAQueryManagerProvider";f.InAQueryManagerProvider.CLAZZ=null;f.InAQueryManagerProvider.staticSetupProvider=function(){f.InAQueryManagerProvider.CLAZZ=f.XClass.create(f.InAQueryManagerProvider);};f.InAQueryManagerProvider.prototype.m_exportData=null;f.InAQueryManagerProvider.prototype.m_importMetaData=null;f.InAQueryManagerProvider.prototype.m_importer=null;f.InAQueryManagerProvider.prototype.m_isVariableSubmitNeeded=false;f.InAQueryManagerProvider.prototype.m_directVariableTransfer=false;f.InAQueryManagerProvider.prototype.m_deserializationStructure=null;f.InAQueryManagerProvider.prototype.m_inaCapabilities=null;f.InAQueryManagerProvider.prototype.m_inaCapabilitiesValueHelp=null;f.InAQueryManagerProvider.prototype.m_rriTargetManager=null;f.InAQueryManagerProvider.prototype.m_savedStateBeforeVarScreen=null;f.InAQueryManagerProvider.prototype.m_savedMetadataStateBeforeVarScreen=null;f.InAQueryManagerProvider.prototype.m_lastDataRequest=null;f.InAQueryManagerProvider.prototype.m_capabilities=null;f.InAQueryManagerProvider.prototype.m_updateRuntimeCapabilities=false;f.InAQueryManagerProvider.prototype.m_noVariableSubmitResponse=false;f.InAQueryManagerProvider.prototype.m_processingImageRequest=null;f.InAQueryManagerProvider.prototype.m_listOfRequestedResources=null;f.InAQueryManagerProvider.prototype.m_stateManager=null;f.InAQueryManagerProvider.prototype.m_indicateVariableSubmitAndRSRequestBatch=false;f.InAQueryManagerProvider.prototype.m_listenerForQueryModelReady=null;f.InAQueryManagerProvider.prototype.m_applyRepoState=false;f.InAQueryManagerProvider.prototype.m_inaRequestStructure=null;f.InAQueryManagerProvider.prototype.m_recordingQueryManagerState=false;f.InAQueryManagerProvider.prototype.m_applyingQueryManagerState=false;f.InAQueryManagerProvider.prototype.m_valueHelpProvider=null;f.InAQueryManagerProvider.prototype.setupQueryModel=function(){var q=f.QueryManager.prototype.setupQueryModel.call(this);var a=this.getApplication();var m=q.getModelCapabilities();this.m_importMetaData=f.QInAImportFactory.createForMetadata(a,m);this.m_exportData=f.QInAExportFactory.createForData(a,m);return q;};f.InAQueryManagerProvider.prototype.isServiceConfigMatching=function(s,c,m){var o;var a;if(c.getSession().hasFeature(f.FeatureToggleOlap.SERVER_METADATA_VIA_SYSTEM_CONNECT)){a=c.getSystemConnect().getServerMetadata();}else{a=c.getServerMetadata();}if(f.isNull(a)){m.addErrorExt(f.OriginLayer.DRIVER,f.ErrorCodes.SERVER_METADATA_NOT_FOUND,"Server metadata not available",null);o=false;}else{var i=s;var b=f.InACapabilitiesProvider.create(c.getSession(),a,i.getProviderType(),null);o=b.getServerMainCapabilities()!==null;}return o;};f.InAQueryManagerProvider.prototype.newObject=function(){return new f.InAQueryManagerProvider();};f.InAQueryManagerProvider.prototype.updateQueryManager=function(m,n){var t=this.getQueryModelBase();var a=m.getQueryModel();var b=f.XHashSetOfString.create();b.addAll(n);f.DimensionUsageAnalyzer2.addDimensionsUsedByLeveledHierarchies(a,b);var u=b.getValuesAsReadOnlyListOfString();this.getDimensionsRequestedFromClient().addAll(n);this.getDimensionsToClone().addAll(u);var d=t.getDimensionManagerBase();for(var i=0;i<u.size();i++){var c=u.get(i);if(t.getDimensionByName(c)===null){var o=a.getDimensionByName(c);if(f.notNull(o)){var e=o.cloneOlapComponent(t,d);t.addDimension(e);var g=t.getAxis(e.getDefaultAxisType());g.add(e);d.finalizeDimensionMetadataSetup(e);}}}this.getQueryServiceConfig().setRequiredDimensions(f.XListOfString.createFromReadOnlyList(this.getDimensionsToClone().getValuesAsReadOnlyListOfString()));};f.InAQueryManagerProvider.prototype.cloneQueryManagerUsingExtDataSource=function(c,d){if(c!==f.QueryCloneMode.MICRO_CUBE){throw f.XException.createIllegalStateException("Cloning query manager using external datasource is supported for MicroCube use only.");}f.XObjectExt.assertNotNullExt(d,"External datasource can't be null.");this.assertLifeCycleActive();var q=new f.InAQueryManagerProvider();q.setupClone(this,c,d);return q;};f.InAQueryManagerProvider.prototype.setupDesignTimeMode=function(){this.m_importMetaData=f.QInAImportFactory.createForMetadata(this.getApplication(),this.getModelCapabilities());this.setupQueryModel();var q=this.getQueryModel();f.QInAMdDataSource.importMd(this.m_importMetaData,this.m_inaRequestStructure,q,q);var d=q.getDataSource();if(this.getMode()===f.QueryManagerMode.BLENDING){var b=this.getQueryServiceConfig().getBlendingDefinition();d.setBlendingDefinition(b);}var c=d.clone();this.setDataSource(c);this.getSettingsBase().setDataRequest(null);if(f.notNull(this.m_inaRequestStructure)&&this.m_inaRequestStructure.containsKey("ListReporting")){this.getSettingsBase().setProviderType(f.ProviderType.LIST_REPORTING);}this.activateExperimentalFeatures();};f.InAQueryManagerProvider.prototype.setupValues=function(){f.QueryManager.prototype.setupValues.call(this);this.prepareExperimentalCapabilities();var i=this.getInitSettings();var r=this.getMode()===f.QueryManagerMode.RAW_QUERY&&i.getDataRequest()!==null;this.m_updateRuntimeCapabilities=true;if(!r){this.m_isVariableSubmitNeeded=true;}var d=this.getDataSource();if(f.notNull(d)&&d.getType()===f.MetaObjectType.CATALOG_VIEW_2&&!this.getCapabilitiesBase().supportsCatalogServiceV2()){d.setType(f.MetaObjectType.CATALOG_VIEW);}this.setDirectVariableTransferEnabled(true);var a=i.getDefinitionType();if(f.notNull(a)&&a!==f.QModelFormat.UQM){this.m_importer=f.QInAImportFactory.create(this.getApplication(),a,null);this.m_deserializationStructure=i.getDefinitionAsStructure();if(f.notNull(this.m_deserializationStructure)){this.m_inaCapabilities.importDeserializationDocumentCapabilities(this.m_deserializationStructure);if(this.isDataSourceInitial()&&this.getMode().isTypeOf(f.QueryManagerMode.DEFAULT)){this.setDataSource(this.m_importer.importDataSource(this.m_deserializationStructure));}}}if(!r){this.setupQueryModel();}this.m_listOfRequestedResources=f.XListOfString.create();this.resetMaxResultRecords();this.m_stateManager=f.QueryModelStateManager.create(this);};f.InAQueryManagerProvider.prototype.prepareExperimentalCapabilities=function(){var s;if(this.getSession().hasFeature(f.FeatureToggleOlap.SERVER_METADATA_VIA_SYSTEM_CONNECT)){s=this.getConnection().getSystemConnect().getServerMetadata();}else{s=this.getConnection().getServerMetadata();}var p=this.getInitSettings().getProviderType();var a=this.getSession();this.m_inaCapabilities=f.InACapabilitiesProvider.create(a,s,p,null);var b=p.getAssociatedValueHelp();this.m_inaCapabilitiesValueHelp=f.InACapabilitiesProvider.create(a,s,b,null);var c=a.getFeatureToggles();if(this.isShallow()){c=this.extractFeatureTogglesFromRequest();}this.m_inaCapabilities.activateDevCapabilities(c.getKeysAsReadOnlyListOfString());};f.InAQueryManagerProvider.prototype.extractFeatureTogglesFromRequest=function(){var c=f.XSetOfNameObject.create();var a=this.getQueryServiceConfig().getDataRequest();var b=f.InARuntimeUtils.getRequestContext(a);if(f.isNull(b)){var d=a.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(d)){b=d.getStructureAt(d.size()-1).getStructureByKey("Analytics");}}if(f.isNull(b)){return c;}var e=b.getListByKey("Capabilities");if(f.isNull(e)){return c;}var g=this.getMainCapabilities();var n=e.size();for(var i=0;i<n;i++){var h=e.get(i);if(!g.containsKey(h.getString())){var j=f.FeatureToggleOlap.lookup(h.getString());if(f.notNull(j)){c.add(j);}}}return c;};f.InAQueryManagerProvider.prototype.releaseObject=function(){this.m_importMetaData=f.XObjectExt.release(this.m_importMetaData);this.m_importer=f.XObjectExt.release(this.m_importer);this.m_exportData=f.XObjectExt.release(this.m_exportData);this.m_capabilities=f.XObjectExt.release(this.m_capabilities);this.m_lastDataRequest=f.XObjectExt.release(this.m_lastDataRequest);this.m_inaCapabilitiesValueHelp=f.XObjectExt.release(this.m_inaCapabilitiesValueHelp);this.m_rriTargetManager=f.XObjectExt.release(this.m_rriTargetManager);this.m_deserializationStructure=null;this.m_savedStateBeforeVarScreen=null;this.m_savedMetadataStateBeforeVarScreen=null;var e=this.getOlapEnv();if(f.XCollectionUtils.hasElements(this.m_listOfRequestedResources)){for(var i=0;i<this.m_listOfRequestedResources.size();i++){e.releaseResource(this.m_listOfRequestedResources.get(i));}}this.m_listOfRequestedResources=f.XObjectExt.release(this.m_listOfRequestedResources);if(f.notNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=f.XObject.castFromNative(this.m_valueHelpProvider);}f.QueryManager.prototype.releaseObject.call(this);this.m_inaCapabilities=null;this.m_stateManager=f.XObjectExt.release(this.m_stateManager);this.m_listenerForQueryModelReady=null;this.m_inaRequestStructure=f.XObjectExt.release(this.m_inaRequestStructure);};f.InAQueryManagerProvider.prototype.createFunction=function(){var s=this.getSystemDescription();f.XObjectExt.assertNotNullExt(s,"System description is null");var a=this.getMainCapabilities().getByKey(f.InACapabilities.C032_FAST_PATH);var p;if(f.notNull(a)&&a.getValue()!==null){p=a.getValue();}else{p=s.getSystemType().getInAPath();}var c=this.getConnection();if(f.isNull(c)){var b=this.getApplication().getConnectionPool();c=b.getOpenConnection(s.getSystemName());}var o=null;if(f.XStringUtils.isNotNullAndNotEmpty(this.getResourcePath())){o=c.newRpcFunctionForBLOB(this.getResourcePath());o.getRpcRequest().setMethod(f.HttpRequestMethod.HTTP_GET);return o;}if(c.isBatchModeEnabled()&&this.getActiveResultSetContainer().isRemotePreQuery()&&this.getPreQueryName()===null&&!f.XCollectionUtils.hasElements(this.getQueryModel().getPreQueries())){o=c.newRpcFunctionForRemotePreQuery(p);}else if(this.m_indicateVariableSubmitAndRSRequestBatch){o=c.newRpcFunction(c.getBatchModePath());}else{o=c.newRpcFunction(p);}var r=o.getRpcRequest();r.setMethod(f.HttpRequestMethod.HTTP_POST);o.getProcessingHint().putBoolean(f.ConnectionParameters.CACHE_HINTS_ENABLED,this.getQueryManager().isCacheHintEnabled());return o;};f.InAQueryManagerProvider.prototype.processProviderShutdown=function(s,l,c){return f.InAQMgrShutdownAction.createAndRun(s,l,c,this);};f.InAQueryManagerProvider.prototype.processProviderCancelThreads=function(s,l,c){if(this.getCapabilitiesBase().supportsCancelRunningQueries()){return f.InAQMgrCancelThreadsAction.createAndRun(s,l,c,this);}return null;};f.InAQueryManagerProvider.prototype.processProviderClearCache=function(s,l,c,t){if(this.getCapabilitiesBase().supportsProviderClearCache()){return f.InAQMgrClearCacheAction.createAndRun(s,l,c,this,t);}return null;};f.InAQueryManagerProvider.prototype.processInitialization=function(s,l,c){this.setupValues();var r=f.InAQMgrStartupAction.createServiceInitAndRun(s,l,c,this,this);this.setupRuntimeQuery();return r;};f.InAQueryManagerProvider.prototype.setupRuntimeQuery=function(){if(this.isForRendering()){var d=this.getInitSettings().getDefinitionAsStructure();this.applyStateOnQueryManager(d);}};f.InAQueryManagerProvider.prototype.isForRendering=function(){var i=this.getInitSettings();return i.getMode()===f.QueryManagerMode.RAW_QUERY&&i.getDefinitionType()===f.QModelFormat.INA_CLONE_RENDERING;};f.InAQueryManagerProvider.prototype.processModelInitialization=function(s,l,c){if(this.getMode()===f.QueryManagerMode.RAW_QUERY){this.setMode(f.QueryManagerMode.DEFAULT);}this.getNewResultsetContainer();return f.InAQMgrStartupAction.createMetadataInitAndRun(s,l,c,this,this);};f.InAQueryManagerProvider.prototype.processModelInitializationAndApplyRepoState=function(s,l,c,r){if(this.getSession().hasFeature(f.FeatureToggleOlap.FUSION_SERVICE)){throw f.XException.createRuntimeException("This call is incompatible with fusion. Create a new query service config instead");}this.m_listenerForQueryModelReady=l;this.m_applyRepoState=true;if(this.isShallow()){this.m_importer.mode=f.QModelFormat.INA_REPOSITORY;var j=f.JsonParserFactory.newInstance();this.m_deserializationStructure=j.parse(r);if(j.hasErrors()){throw f.XException.createRuntimeException("Error parsing the Repository state of the QueryModel");}f.XObjectExt.release(j);var i=this.extractInADataSource();if(f.notNull(i)){if(f.XString.isEqual(f.QueryManagerMode.BLENDING.getName(),i.getStringByKey("Type"))){this.considerBlendingFlow(i);}}var m=this.processModelInitialization(s,this,c);return m;}var d=this.getQueryModel().deserializeExt(f.QModelFormat.INA_REPOSITORY,r);var e=f.ExtResult.create(this,d);if(f.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(e,this,c);}return f.SyncActionExtRes.createSyncAction(this,e);};f.InAQueryManagerProvider.prototype.extractInADataSource=function(){var d=this.getDataRequest();if(f.isNull(d)){d=this.getQueryServiceConfig().getDataRequest();}var b=d.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.isNull(b)){this.m_inaRequestStructure=d;}else{this.m_inaRequestStructure=b.getStructureAt(b.size()-1);}var i=f.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);if(f.isNull(i)){i=this.m_inaRequestStructure.getStructureByKey("Definition");}return i.getStructureByKey("DataSource");};f.InAQueryManagerProvider.prototype.considerBlendingFlow=function(a){this.setMode(f.QueryManagerMode.BLENDING);var b=f.QFactory.createBlendingDefinition();this.getQueryServiceConfig().setBlendingDefinition(b);var s=a.getListByKey("Sources");if(f.notNull(s)){var n=s.size();for(var i=0;i<n;i++){var c=s.getStructureAt(i);var d=c.getStringByKey("AliasName");var e=f.XStringValue.create(d);var g=c.getStructureByKey("DefiningContext");var q=f.QueryServiceConfig.createWithDataRequest(this.getApplication(),this.getSystemName(),g);var p=q.processQueryManagerCreation(f.SyncType.BLOCKING,null,null);var h=p.getData();var r=null;if(f.notNull(this.m_deserializationStructure)){var k=this.m_deserializationStructure.getStructureByKey("DataSource");if(f.isNull(k)){k=this.m_deserializationStructure.getStructureByKey("Definition").getStructureByKey("DataSource");}var l=k.getListByKey("Sources").getStructureAt(i);var m=l.getStructureByKey("DefiningContext");r=f.PrUtils.serialize(m,true,false,0);}h.processModelInitializationAndApplyRepoState(f.SyncType.BLOCKING,null,e,r);var o=h.getQueryModel();b.addNewSource(o,d);}}var t=a.getListByKey("Mappings");if(f.notNull(t)){var u=t.size();for(var v=0;v<u;v++){var w=t.getStructureAt(v);var x=f.BlendingLinkType.lookup(w.getStringByKey("LinkType"));var y=w.getStringByKey("DimensionName");var z=b.addNewDimensionMapping(x,y);var A=w.getListByKey("Mapping");for(var j=0;j<A.size();j++){var B=A.getStructureAt(j);var C=B.getStringByKey("AliasName");var D=B.getStructureByKey("MappingDefinition").getStructureByKey("Member").getStringByKey("Name");var E=b.getSources().get(j);z.addNewDimensionMappingDefinition(E.getQueryModel().getDimensionByName(D),C);}}}};f.InAQueryManagerProvider.prototype.onQueryModelInitialized=function(e,q,c){if(!e.hasErrors()){if(this.m_applyRepoState){this.applyRSFeatureRequest();}if(f.notNull(this.m_listenerForQueryModelReady)){this.m_listenerForQueryModelReady.onQueryModelInitialized(e,this,c);}}};f.InAQueryManagerProvider.prototype.applyRSFeatureRequest=function(){var c=f.InARuntimeUtils.getRequestContext(this.m_inaRequestStructure);var d=null;if(f.isNull(c)){d=this.m_inaRequestStructure.getStructureByKey("Definition");}else{d=c.getStructureByKey("Definition");}this.importRSFeatureRequest(d);};f.InAQueryManagerProvider.prototype.activateExperimentalFeatures=function(){if(f.notNull(this.m_deserializationStructure)){var e=this.m_deserializationStructure.getStringByKey("ExperimentalFeatures");if(f.XStringUtils.isNotNullAndNotEmpty(e)){var a=f.XStringTokenizer.splitString(e,",");this.m_inaCapabilities.activateDevCapabilities(a);}}};f.InAQueryManagerProvider.prototype.loadQueryModel=function(s,l,c){if(this.isShallow()){return this.processModelInitialization(s,l,c);}if(f.notNull(l)){l.onQueryModelInitialized(this.getQueryServiceConfig(),this,c);}return this.getQueryServiceConfig();};f.InAQueryManagerProvider.prototype.getDataAreas=function(){var s=this.getSystemType();if(!s.isTypeOf(f.SystemType.BW)){return null;}var q=this.getQueryModel();if(f.isNull(q)){return null;}var d=f.PlanningStateHandler.getDataAreaStateByName(this.getApplication(),this.getSystemName(),q.getDataArea());if(f.isNull(d)){return null;}if(d.isSubmitted()){return null;}var l=f.PrFactory.createList();l.add(d.serializeToJson());return l;};f.InAQueryManagerProvider.prototype.exportDataEntryDescription=function(p){var r=this.getActiveResultSetContainer();if(f.isNull(r)){return;}if(!r.hasDataEntryCollection()){return;}var d=r.getDataEntryCollection();if(!d.hasChangedDataEntries()){return;}var a=d.getDataCellEntryDescription();if(f.XStringUtils.isNullOrEmpty(a)){return;}p.putString("ActionDescription",a);};f.InAQueryManagerProvider.prototype.createCustomHierarchyProvider=function(c,e){return f.InACustomHierarchyProvider.create(this,c,e);};f.InAQueryManagerProvider.prototype.createResultSetProvider=function(p,s,r){f.XBooleanUtils.checkTrue(this.getCapabilitiesBase().supportsEncodedResultset(),"Only encoded resultset is supported");return f.InARsEnProvider.create(this,p,s,f.QContextType.RESULT_SET);};f.InAQueryManagerProvider.prototype.setInnerStructure=function(r,n,p){var d=this.getDataAreas();if(f.notNull(d)){r.put("DataAreas",d);}f.QInAOptions.fillOptions(r,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings());var i=r.putNewStructure(n);var a;var q=this.getQueryModel();var e=this.m_recordingQueryManagerState?null:this.m_inaCapabilities.exportActiveCapabilitiesAsList();if(f.XString.isEqual("Metadata",n)){f.QInAMdDataSource.exportMd(this.m_exportData,i,q);i.put("Expand",f.QInAExpand.createExpandMetadata(this));}else{if(f.notNull(q)&&q.hasExplainQueryContext()){var b=i.putNewStructure("ExplainQueryContext");var c=q.getExplainQueryContext();b.putInteger("Row",c.getRowIndex());b.putInteger("Column",c.getColumnIndex());}f.QInAOptions.setRequestTimeZone(r,this);if(this.isPersistedPreQuery()){var l=this.getConnection().getSystemDescription();f.QInADataSourceBlending.updateRemoteDataSource(i,this,true,l);f.XCollectionUtils.removeIf(e,function(h){return f.XString.isEqual(h.asString().getString(),f.InACapabilities.C121_RETURN_ERROR_FOR_INVALID_QUERYMODEL);}.bind(this));}else if(!this.m_recordingQueryManagerState){var g=this.m_exportData.exportDataSource(q.getDataSource(),this.getCapabilitiesBase().supportsRunAsUser());if(this.getProviderType()===f.ProviderType.PLANNING_VALUE_HELP){a=i.putNewStructure("Command");}else{a=i;}a.put("DataSource",g);}if(p===f.ProcessingStep.VARIABLE_SUBMIT){i.putIfNotNull("Expand",f.QInAExpand.createExpandSubmit(this,this.m_noVariableSubmitResponse));}}if(f.notNull(e)){i.put("Capabilities",e);}f.QInAOptions.setLanguage(i,this);return i;};f.InAQueryManagerProvider.prototype.isPersistedPreQuery=function(){return this.getPreQueryName()!==null&&this.getResultSetPersistenceIdentifier()!==null;};f.InAQueryManagerProvider.prototype.processRriTargetSync=function(s,i){return f.InAQRriTargetsSyncAction.createAndRun(s,this,i);};f.InAQueryManagerProvider.prototype.getDeserializationStructure=function(){return this.m_deserializationStructure;};f.InAQueryManagerProvider.prototype.setDeserializationStructureAsNull=function(){this.m_deserializationStructure=null;};f.InAQueryManagerProvider.prototype.getDeserializationImporter=function(){return this.m_importer;};f.InAQueryManagerProvider.prototype.getValueHelpProvider=function(){if(f.isNull(this.m_valueHelpProvider)){this.m_valueHelpProvider=f.InAQueryValueHelpProvider.create(this);}return this.m_valueHelpProvider;};f.InAQueryManagerProvider.prototype.setValueHelpProvider=function(v){this.m_valueHelpProvider=v;};f.InAQueryManagerProvider.prototype.getInaCapabilities=function(){return this.m_inaCapabilities;};f.InAQueryManagerProvider.prototype.getProviderTypeProx=function(){return this.getInitSettings().getProviderType();};f.InAQueryManagerProvider.prototype.getResultSetProviderFactory=function(){return this;};f.InAQueryManagerProvider.prototype.importVariables=f.noSupport;f.InAQueryManagerProvider.prototype.exportVariables=function(v,p){this.m_exportData.exportVariables(v,p);};f.InAQueryManagerProvider.prototype.assertNotDirectValueTransfer=function(){if(this.isDirectVariableTransferEnabled()){throw f.XException.createIllegalStateException("stateful variable handling cannot be mixed with direct variable transfer");}};f.InAQueryManagerProvider.prototype.processRetrieveVariableRuntimeInformation=function(s,l,c){this.assertNotDirectValueTransfer();return f.InAQMgrVarAction.createAndRunGetRuntimeInfo(this,s,l,c);};f.InAQueryManagerProvider.prototype.processSetGetVariableValues=function(s,l,c){this.assertNotDirectValueTransfer();return f.InAQMgrVarAction.createAndRunSetGetValues(this,s,l,c);};f.InAQueryManagerProvider.prototype.processEmptyVariableDefinition=function(s,l,c){this.assertNotDirectValueTransfer();return f.InAQMgrVarAction.createAndRunEmptyVariableDefinition(this,s,l,c);};f.InAQueryManagerProvider.prototype.processVariableSubmit=function(s,l,c){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return f.OlapVarImmediateCallback.createAndRun(s,l,c);}return f.InAQMgrVarAction.createAndRunSubmit(this,s,l,c);};f.InAQueryManagerProvider.prototype.processReInitVariableAfterSubmit=function(s,l,c){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return f.OlapVarImmediateCallback.createAndRun(s,l,c);}return f.InAQMgrVarAction.createAndRunReInitAfterSubmit(this,s,l,c);};f.InAQueryManagerProvider.prototype.processVariableCancel=function(s,l,c){if(this.isDirectVariableTransferEnabled()||!this.hasVariables()&&!this.supportsAndAllowsEmptyExtendedVarDefinition()){return f.OlapVarImmediateCallback.createAndRun(s,l,c);}return f.InAQMgrVarAction.createAndRunCancel(this,s,l,c);};f.InAQueryManagerProvider.prototype.processCheckVariables=function(s,l,c){f.XBooleanUtils.checkTrue(this.supportsCheckVariables(),"Check variables is not supported");return f.InAQMgrVarAction.createAndRunCheck(this,s,l,c);};f.InAQueryManagerProvider.prototype.transferVariables=function(s,l,c){return this.processSetGetVariableValues(s,l,c);};f.InAQueryManagerProvider.prototype.emptyVariableDefinition=function(s,l,c){return this.processEmptyVariableDefinition(s,l,c);};f.InAQueryManagerProvider.prototype.transferVariablesByVariable=function(v,s,l,c){if(this.getVariables().contains(v)){return this.processSetGetVariableValues(s,l,c);}return null;};f.InAQueryManagerProvider.prototype.getVariablesExporter=function(){return this.m_exportData;};f.InAQueryManagerProvider.prototype.getVariablesImporter=function(){return this.m_importMetaData;};f.InAQueryManagerProvider.prototype.isVariableValuesRuntimeNeeded=function(){return this.getSystemType().isTypeOf(f.SystemType.BW);};f.InAQueryManagerProvider.prototype.isVariableSubmitNeeded=function(){return this.m_isVariableSubmitNeeded;};f.InAQueryManagerProvider.prototype.setIsVariableSubmitNeeded=function(s){this.m_isVariableSubmitNeeded=s;};f.InAQueryManagerProvider.prototype.isDirectVariableTransfer=function(){return this.m_directVariableTransfer;};f.InAQueryManagerProvider.prototype.setDirectVariableTransfer=function(d){this.m_directVariableTransfer=d;};f.InAQueryManagerProvider.prototype.serializeToContentExt=function(m,c){var a;if(m.isTypeOf(f.QModelFormat.INA_REPOSITORY)){a=f.QueryManager.prototype.serializeToContentExt.call(this,m,c);}else{var q=this.getQueryModelBase();q.generateTransientObjects();var d=q.getDrillManager();if(f.notNull(d)){d.checkRootNodeFetching();}var b=f.PrFactory.createStructure();var p=this.getResultSetPersistenceIdentifier()!==null?null:f.QueryModelUtils.getPreQueries(q);if(f.XCollectionUtils.hasElements(p)){var e=b.putNewList(f.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(p,e,m);if(m===f.QModelFormat.INA_PERSISTED_QUERY_DATA){e.add(this.fillPersistedQueryDataRequestStructure(true));}else{e.add(this.fillDataRequestStructure(true));}q.destroyTransientObjects();}else{if(q.getDataSource().getType()===f.MetaObjectType.BLENDING){var g=q.getBlendingSources();var n=g.size();var h=null;for(var i=0;i<n;i++){var j=g.get(i);var k=j.getQueryModel().getPreQueries();if(f.XCollectionUtils.hasElements(k)){h=b.putNewList(f.ConnectionConstants.INA_BATCH);this.dealWithPreQuery(k,h,m);}}var l=f.notNull(h);if(l){b.getListByKey(f.ConnectionConstants.INA_BATCH).add(m===f.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true));q.destroyTransientObjects();}else{b=null;}}else{b=null;}if(f.isNull(b)){b=m===f.QModelFormat.INA_PERSISTED_QUERY_DATA?this.fillPersistedQueryDataRequestStructure(true):this.fillDataRequestStructure(true);q.destroyTransientObjects();}}a=f.XContent.createJsonObjectContent(m,b);}return a;};f.InAQueryManagerProvider.prototype.dealWithPreQuery=function(p,a,m){var n=p.size();for(var i=0;i<n;i++){var b=p.get(i);var c=b.getName();var d=b.getObject();d.generateTransientObjects();var e=d.getPreQueries();if(f.XCollectionUtils.hasElements(e)){this.dealWithPreQuery(e,a,m);}var s;if(m===f.QModelFormat.INA_PERSISTED_QUERY_DATA){s=d.getQueryManager().fillPersistedQueryDataRequestStructure(true);}else{s=d.getQueryManager().fillDataRequestStructure(true);}var r=f.InARuntimeUtils.getRequestContext(s);var g=d.getSystemName();if(!f.XString.isEqual(g,this.getSystemName())){var h=r.getStructureByKey("DataSource");h.putString("System",g);}var j=r.getStructureByKey("Definition");j.putString("Name",c);var k=j.getStructureByKey("ResultSetFeatureRequest");k.putBoolean("ReturnEmptyJsonResultSet",true);a.add(s);d.destroyTransientObjects();}};f.InAQueryManagerProvider.prototype.fillDataRequestStructure=function(w){var m=this.getMode();var i=this.getInitSettings();if(m.isTypeOf(f.QueryManagerMode.DEFAULT)||m===f.QueryManagerMode.BLENDING){this.m_lastDataRequest=f.PrFactory.createStructure();var p=i.getProviderType();var c=f.QInAConverter.lookupContextNameForProvider(p);var a=this.getProcessingDirective(p);this.fillAnalyticRequestStructure(this.m_lastDataRequest,c,w,a,null);}else if(m===f.QueryManagerMode.RAW_QUERY){this.m_lastDataRequest=i.getDataRequest();if(this.isUpdatingDataRequestCapabilities()&&this.getApplication().getConnection(this.getSystemName()).supportsAnalyticCapability(f.InACapabilities.V266_RESULTSETV2_METADATA_EXTENSION1)){if(this.m_lastDataRequest.isProxy()){this.m_lastDataRequest=f.PrUtils.deepCopyElement(this.m_lastDataRequest);}f.InARuntimeUtils.setLanguageAndAddRuntimeCapability(this.m_lastDataRequest,this.getSystemDescription().getLanguage());var r=f.InARuntimeUtils.getRequestContext(this.m_lastDataRequest);if(f.notNull(r)){var d=r.getStructureByKey("Definition");var b=d.getStructureByKey("ResultSetFeatureRequest");f.QInAOptions.importPaging(b,this);f.QInAOptions.importSuppressKeyfigureCalculation(b,this);}}else if(!this.isUpdatingDataRequestCapabilities()){var e=this.m_lastDataRequest.getStructureByKey("Analytics");var g=e.getStructureByKey("Definition");var h=g.getStructureByKey("ResultSetFeatureRequest");if(f.isNull(h)){h=g.putNewStructure("ResultSetFeatureRequest");h.putString("ResultEncoding","None");h.putString("ResultFormat","Version2");}f.QInAOptions.exportReturnedDataSelections(h,this);this.updateString(h,"ResultEncoding","None");this.updateString(h,"ResultFormat","Version2");f.QInAOptions.setLanguage(e,this);f.QInAOptions.fillOptions(this.m_lastDataRequest,this.getCapabilitiesBase(),this.getSession(),this.getInitSettings());}this.enableRuntimeVariables();return this.m_lastDataRequest;}else{throw f.XException.createIllegalStateException("Unknown mode");}f.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest;};f.InAQueryManagerProvider.prototype.fillPersistedQueryDataRequestStructure=function(w){this.m_lastDataRequest=f.PrFactory.createStructure();var p=this.getInitSettings().getProviderType();var c=f.QInAConverter.lookupContextNameForProvider(p);var a=this.getProcessingDirective(p);this.fillPersistedQueryAnalyticRequestStructure(this.m_lastDataRequest,c,w,a);f.QInAOptions.setRequestTimeZone(this.m_lastDataRequest,this);return this.m_lastDataRequest;};f.InAQueryManagerProvider.prototype.getProcessingDirective=function(p){if(p!==f.ProviderType.PLANNING&&this.getVariableProcessorState()===f.VariableProcessorState.VALUE_HELP){return f.ProcessingStep.VARIABLE_DEFINITION;}return null;};f.InAQueryManagerProvider.prototype.updateString=function(s,n,v){if(!f.XString.isEqual(s.getStringByKey(n),v)){s.putString(n,v);}};f.InAQueryManagerProvider.prototype.enableRuntimeVariables=function(){if(this.supportsServerState()&&this.getMode()===f.QueryManagerMode.RAW_QUERY){if(this.getVariableProcessorState()===f.VariableProcessorState.SUBMITTED){var i=this.m_lastDataRequest.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(i)){this.m_lastDataRequest=i.getStructureAt(1);}}else{this.buildBatchWithVarSubmitReq();}}};f.InAQueryManagerProvider.prototype.buildBatchWithVarSubmitReq=function(){var i=this.m_lastDataRequest.getStructureByKey("Analytics");if(f.isNull(i)){return;}var a=i.getStructureByKey("Definition");if(f.isNull(a)){return;}var r=f.PrUtils.createDeepCopy(this.m_lastDataRequest);var p=r.getStructureByKey("Analytics").putNewStructure("ProcessingDirectives");p.putString("ProcessingStep","VariableSubmit");var b=f.PrFactory.createStructure();var c=b.putNewList(f.ConnectionConstants.INA_BATCH);c.add(r);c.add(this.m_lastDataRequest);this.m_lastDataRequest=b;this.m_indicateVariableSubmitAndRSRequestBatch=true;};f.InAQueryManagerProvider.prototype.recordingStateOfQueryManager=function(){return this.m_recordingQueryManagerState;};f.InAQueryManagerProvider.prototype.applyingStateOnQueryManager=function(){return this.m_applyingQueryManagerState;};f.InAQueryManagerProvider.prototype.recordStateOfQueryManager=function(r){this.m_recordingQueryManagerState=true;this.fillAnalyticRequestStructure(r,"Analytics",true,null,null);this.fillQueryConfigSettings(r);r.putString("Name",this.getName());this.m_recordingQueryManagerState=false;};f.InAQueryManagerProvider.prototype.fillQueryConfigSettings=function(r){var q=this.getQueryServiceConfig();var a=q.serialize();r.put("QueryServiceConfig",a);};f.InAQueryManagerProvider.prototype.applyStateOnQueryManager=function(d){this.m_applyingQueryManagerState=true;var q=f.QModelFormat.INA_REPOSITORY_DATA;if(this.isForRendering()){f.QueryManager.prototype.setupQueryModel.call(this);q=f.QModelFormat.INA_CLONE_RENDERING;}var r=this.getQueryModel().deserializeFromElementExt(q,d);this.importQuerySettings(d);this.m_applyingQueryManagerState=false;return r;};f.InAQueryManagerProvider.prototype.fillAnalyticRequestStructure=function(r,a,w,p,v){this.addProfileStep("fillAnalyticRequestStructure");var b=this.getResultsetContainer(false);var c=b.getRequest();if(b.getSyncState()===f.SyncState.OUT_OF_SYNC||f.isNull(c)){var e=f.QInAExportFactory.createForData(this.getApplication(),this.getModelCapabilities());this.exportToInADefinition(r,a,w,p,e,v);}else{r.copyFrom(c,null);}};f.InAQueryManagerProvider.prototype.fillPersistedQueryAnalyticRequestStructure=function(r,a,w,p){this.addProfileStep("fillPersistedQueryAnalyticRequestStructure");var e=f.QInAExportFactory.createForPersistedQueryData(this.getApplication(),this.getModelCapabilities());this.exportToInADefinition(r,a,w,p,e,null);};f.InAQueryManagerProvider.prototype.exportToInADefinition=function(r,a,w,p,e,v){var q=this.getQueryModelBase();var b=this.checkRequestStructureName(a,this.hasNewValues());var i=this.setInnerStructure(r,b,p);e.variableProcessingDirective=p;q.setHasProcessingStep(f.notNull(p));var c=null;if(this.m_recordingQueryManagerState){c=this.getQueryModel().serializeToElement(f.QModelFormat.INA_REPOSITORY_DATA);}else{c=this.exportQueryModelForInARequest(w,this.getMainCapabilities(),q,e);}if(f.isNull(c)){return;}c.putStringNotNull("Name",this.getPreQueryName());i.put("Definition",c);if(this.supportsDataEntryReadOnly()){var d=!this.isDataEntryReadOnly();c.putBoolean("InputEnabled",d);}var g=f.PrFactory.createStructure();f.QInAExportUtil.setNameIfNotNull(g,"PlanningMode",this.getPlanningModeEffective());f.QInAVersion.exportPlanningVersions(g,this);this.exportDataEntryDescription(g);f.QInANewValues.exportNewValues(c,g,this);f.QInANewLines.exportNewLines(c,this);if(g.hasElements()){c.put("PlanningExtensions",g);}this.addAllMessages(e);this.endProfileStep();if(this.isPersistedPreQuery()){c.put("ResultSetFeatureRequest",f.QInADataSourceBlending.exportResultSetFeatures(q,false));}else{var h=f.QInAOptions.exportOptions(this);f.QInAOptions.exportReturnedDataSelections(h,this);c.put("ResultSetFeatureRequest",h);}if(f.notNull(p)){var j=r.getStructureByKey(b);var k=j.putNewStructure("ProcessingDirectives");k.putString("ProcessingStep",p.getName());if(f.notNull(v)){if(p===f.ProcessingStep.VARIABLE_DEFINITION||p===f.ProcessingStep.VARIANT_DELETE||p===f.ProcessingStep.VARIANT_SAVE){f.QInAVariableVariants.exportVariableVariant(c,v);}}}f.QInAOptions.exportOptimizerHints(c,q);f.QInAClientInfo.exportClientInfo(r,this.getQueryModel(),this.getModelCapabilities().supportsClientInfo());};f.InAQueryManagerProvider.prototype.exportQueryModelForInARequest=function(w,a,q,e){var s=q.getSpatialClusterSettings();if(f.notNull(s)&&s.isActive()){var i=f.QInASpatialClustering.exportSpatialClusteringRequest(this.m_exportData,s);var b=i.getStructureByKey("Analytics");return b.getStructureByKey("Definition");}var h=a.containsKey(f.InACapabilities.C001_DATASOURCE_AT_SERVICE);var l=this.getActiveResultSetContainerBase().getLovConfig();if(f.notNull(l)){return e.exportLovRequest(q,w,!h,l);}return e.exportQueryModel(q,w,!h);};f.InAQueryManagerProvider.prototype.getPlanningModeEffective=function(){if(!this.isDataEntryEnabled()){return null;}var c=this.getSystemType();if(!c.isTypeOf(f.SystemType.HANA)){return null;}var p=this.getPlanningMode();if(p===f.PlanningMode.SERVER_DEFAULT){return null;}if(f.isNull(p)){return f.PlanningMode.DISABLE_PLANNING;}return p;};f.InAQueryManagerProvider.prototype.checkRequestStructureName=function(r,n){if(!f.XString.isEqual("Analytics",r)){return r;}var s=this.getSystemType();if(f.isNull(s)||!s.isTypeOf(f.SystemType.BW)){return r;}if(n){return"Planning";}return r;};f.InAQueryManagerProvider.prototype.getMainCapabilities=function(){return this.m_inaCapabilities.getActiveCapabilities();};f.InAQueryManagerProvider.prototype.getRriTargetManager=function(){if(f.isNull(this.m_rriTargetManager)&&this.getModelCapabilities().supportsReportReportInterface()){this.m_rriTargetManager=f.QRriTargetManager.create(this);}return this.m_rriTargetManager;};f.InAQueryManagerProvider.prototype.getStateBeforeVarScreen=function(){return this.m_savedStateBeforeVarScreen;};f.InAQueryManagerProvider.prototype.setStateBeforeVarScreen=function(s){this.m_savedStateBeforeVarScreen=s;};f.InAQueryManagerProvider.prototype.getMetadataStateBeforeVarScreen=function(){return this.m_savedMetadataStateBeforeVarScreen;};f.InAQueryManagerProvider.prototype.setMetadataStateBeforeVarScreen=function(s){this.m_savedMetadataStateBeforeVarScreen=s;};f.InAQueryManagerProvider.prototype.applyValueHelpCapabilities=function(){if(f.notNull(this.m_inaCapabilitiesValueHelp)){this.m_inaCapabilities=this.m_inaCapabilitiesValueHelp;this.m_inaCapabilitiesValueHelp=null;var i=f.QInAImportFactory.createForMetadataCore(this.getApplication(),this.getModelCapabilities());var q=this.getQueryModelBase();i.importBasicQueryModelCapabilities(q);}};f.InAQueryManagerProvider.prototype.getDataRequest=function(){if(f.isNull(this.m_lastDataRequest)&&this.getMode()!==f.QueryManagerMode.RAW_QUERY){this.fillDataRequestStructure(true);}return this.m_lastDataRequest;};f.InAQueryManagerProvider.prototype.setActiveResultSetContainer=function(a){if(this.getActiveResultSetContainer()!==a){this.m_lastDataRequest=null;if(f.notNull(a)){f.XObjectExt.release(a.getRequest());}}f.QueryManager.prototype.setActiveResultSetContainer.call(this,a);};f.InAQueryManagerProvider.prototype.getDataRequestAsString=function(){var d=this.getDataRequest();return f.isNull(d)?null:d.toString();};f.InAQueryManagerProvider.prototype.getCapabilitiesBase=function(){if(f.isNull(this.m_capabilities)){this.m_capabilities=this.m_inaCapabilities.getQueryCapabilities();}return this.m_capabilities;};f.InAQueryManagerProvider.prototype.getVariableVariantsInternal=function(){var s=this.getOlapEnv().getSystemContainer(this.getSystemName());return s.getVariantsByDatasource(this.getDataSource().getFullQualifiedName());};f.InAQueryManagerProvider.prototype.getVariableVariants=function(){return this.getVariableVariantsInternal();};f.InAQueryManagerProvider.prototype.processActivateVariableVariant=function(v,s,l,c){return f.InAQMgrVarAction.createAndRunVariantActivation(this,v,s,l,c);};f.InAQueryManagerProvider.prototype.processDeleteVariableVariant=function(v,s,l,c){return f.InAQMgrVarAction.createAndRunVariantDeletion(this,v,s,l,c);};f.InAQueryManagerProvider.prototype.processUpdateVariableVariantValues=function(v,s,l,c){return f.InAQMgrVarAction.createAndRunVariantUpdate(this,v,false,s,l,c);};f.InAQueryManagerProvider.prototype.processSaveVariableVariant=function(v,s,l,c){return f.InAQMgrVariantModifyAction.createAndRunModification(this,v,s,l,c);};f.InAQueryManagerProvider.prototype.addVariableVariant=function(v){var a=this.getVariableVariantsInternal();var b=v.getName();if(a.containsKey(b)){a.removeElement(a.getByKey(b));}a.add(v);};f.InAQueryManagerProvider.prototype.removeVariableVariant=function(v){this.getVariableVariantsInternal().removeElement(v);};f.InAQueryManagerProvider.prototype.getVariableVariantByName=function(v){return this.getVariableVariantsInternal().getByKey(v);};f.InAQueryManagerProvider.prototype.activateVariableVariant=function(v,s,l,c){return this.processActivateVariableVariant(v,s,l,c);};f.InAQueryManagerProvider.prototype.deleteVariableVariant=function(v,s,l,c){if(f.isNull(v)||this.getVariableVariantByName(v.getName())===null){return f.OlapVarImmediateCallback.createAndRun(s,l,c);}if(!this.supportsMaintainsVariableVariants()){return f.OlapVarImmediateCallback.createAndRunError(f.ErrorCodes.INVALID_STATE,"Deleting variants is not supported",s,l,c);}return this.processDeleteVariableVariant(v,s,l,c);};f.InAQueryManagerProvider.prototype.updateVariableVariantValues=function(v,s,l,c){if(!this.supportsMaintainsVariableVariants()){return f.OlapVarImmediateCallback.createAndRunError(f.ErrorCodes.INVALID_STATE,"Updating variants is not supported",s,l,c);}if(v.getName()===null||v.getScope()===null){return f.OlapVarImmediateCallback.createAndRunError(f.ErrorCodes.INVALID_STATE,"Variant not valid for updating",s,l,c);}return this.processUpdateVariableVariantValues(v,s,l,c);};f.InAQueryManagerProvider.prototype.saveVariableVariant=function(v,s,l,c){if(!this.supportsMaintainsVariableVariants()){return f.OlapVarImmediateCallback.createAndRunError(f.ErrorCodes.INVALID_STATE,"Modifying variants is not supported",s,l,c);}return this.processSaveVariableVariant(v,s,l,c);};f.InAQueryManagerProvider.prototype.getMessageManager=function(){return this;};f.InAQueryManagerProvider.prototype.getNewResultsetContainer=function(){return this.getResultsetContainer(true);};f.InAQueryManagerProvider.prototype.isUpdatingDataRequestCapabilities=function(){return this.m_updateRuntimeCapabilities;};f.InAQueryManagerProvider.prototype.setUpdatingDataRequestCapabilities=function(u){this.m_updateRuntimeCapabilities=u;};f.InAQueryManagerProvider.prototype.isIncludePerformanceNotDefault=function(){return this.m_includePerformanceData!==f.TriStateBool._DEFAULT;};f.InAQueryManagerProvider.prototype.setNoVariableSubmitResponse=function(n){this.m_noVariableSubmitResponse=n;};f.InAQueryManagerProvider.prototype.updateDynamicVariables=function(s,l,c){this.getConvenienceCommands().updateDynamicVariables(s,l,c);};f.InAQueryManagerProvider.prototype.processUpdateDynamicVariables=function(s,l,c){this.getConvenienceCommands().updateDynamicVariables(s,l,c);};f.InAQueryManagerProvider.prototype.processResetExitOrDynamicVariable=function(s,l,c,o){this.getConvenienceCommands().processResetExitOrDynamicVariable(s,l,c,o);};f.InAQueryManagerProvider.prototype.resetExitOrUpdateDynamicVariable=function(s,l,c,o){this.processResetExitOrDynamicVariable(s,l,c,o);};f.InAQueryManagerProvider.prototype.processBLOB=function(s,l,c,i){if(f.XStringUtils.isNullOrEmpty(i)){var r=f.BLOBContainer.createBLOBContainer(this.getQueryManager(),null);r.addError(f.ErrorCodes.INVALID_FIELD,"No Image path specified");if(f.notNull(l)){l.onBLOBAvailable(r,r,c);}return r;}var a=this.getConnection();if(!a.supportsWebServiceForBLOBObjects()){this.getActiveResultSetContainer().addError(f.ErrorCodes.INVALID_SYSTEM,"No Support for retrieving BLOBs.");var b=f.BLOBContainer.createBLOBContainer(this,null);if(f.notNull(l)){l.onBLOBAvailable(b,b,c);}return b;}this.m_processingImageRequest=i;if(this.getOlapEnv().hasBLOBForResourceId(i)){var d=f.BLOBContainer.createBLOBContainer(this,null);if(f.notNull(l)){l.onBLOBAvailable(d,d,c);}this.m_processingImageRequest=null;return d;}this.m_listOfRequestedResources.add(i);var e=f.BLOBContainer.createBLOBContainer(this,this.createFunction());var g=e.processExecution(s,l,c);this.m_processingImageRequest=null;return g;};f.InAQueryManagerProvider.prototype.processUpdateRuntimeBlendQueryFromDependentQueries=function(s,a,l,c){var m=f.RuntimeRemoteBlendingQueryUpdaterAction.create(s,this);return m.processSyncAction(a,l,c);};f.InAQueryManagerProvider.prototype.getResourcePath=function(){return this.m_processingImageRequest;};f.InAQueryManagerProvider.prototype.getResourceDetailsFromResourceIdentifier=function(r){if(!this.m_listOfRequestedResources.contains(r)){this.m_listOfRequestedResources.add(r);return this.getOlapEnv().useBLOBDetailsForResourceId(r);}return this.getOlapEnv().getBLOBDetailsForResourceId(r);};f.InAQueryManagerProvider.prototype.recordState=function(){return this.m_stateManager.recordState();};f.InAQueryManagerProvider.prototype.applyState=function(s,l,c,a){return f.InAQMgrApplyStateAction.createAndRun(s,this,l,c,a,this.m_stateManager);};f.InAQueryManagerProvider.prototype.importQuerySettings=function(i){this.importRSFeatureRequest(i);f.QInAOptions.importOptimizerHints(i,this);};f.InAQueryManagerProvider.prototype.importRSFeatureRequest=function(d){var r=d.getStructureByKey("ResultSetFeatureRequest");f.QInAOptions.importPaging(r,this);f.QInAOptions.importSuppressKeyfigureCalculation(r,this);f.QInAOptions.importReturnedDataSelections(r,this);};f.InAQueryManagerProvider.prototype.isApplyingRepoState=function(){return this.m_applyRepoState;};f.InAQueryManagerProvider.prototype.getQueryManagerProvider=function(){return this;};f.InAQueryManagerProvider.prototype.removeVariable=function(n){this.assertLifeCycleActive();var v=this.getQueryModelBase().getVariableManagerBase();v.removeVariable(n);};f.InAQueryManagerProvider.prototype.clearVariables=function(){this.assertLifeCycleActive();var v=this.getQueryModelBase().getVariableManagerBase();v.clearVariables();};f.InAQueryManagerProvider.prototype.addVariable=function(v){this.assertLifeCycleActive();var a=this.getQueryModelBase().getVariableManagerBase();a.addVariable(v);};f.InAQueryManagerProvider.prototype.getVariableBaseAt=function(i){this.assertLifeCycleActive();var v=this.getQueryModelBase().getVariableManagerBase();return v.getVariableBaseAt(i);};f.InAQueryManagerProvider.prototype.getVariableBaseByName=function(n){this.assertLifeCycleActive();var v=this.getQueryModelBase().getVariableManagerBase();return v.getVariableBaseByName(n);};f.InAQueryManagerProvider.prototype.setVariableProcessorBase=f.noSupport;f.InAQueryManagerProvider.prototype.getVariableProcessorProvider=function(){return this;};f.ProviderModule=function(){};f.ProviderModule.prototype=new f.DfModule();f.ProviderModule.prototype._ff_c="ProviderModule";f.ProviderModule.s_module=null;f.ProviderModule.getInstance=function(){if(f.isNull(f.ProviderModule.s_module)){f.DfModule.checkInitialized(f.OlapSerializationModule.getInstance());f.ProviderModule.s_module=f.DfModule.startExt(new f.ProviderModule());var r=f.RegistrationService.getInstance();f.QInA.staticSetup();f.QInAImportFactoryImpl.staticSetupImpl();f.QInAExportFactoryImpl.staticSetupImpl();f.FunctionalValueHelpFactory.setInstance(f.FunctionalValueHelpFactoryImpl.createFactory());f.PlanningStateHandler.setInstance(new f.PlanningStateHandlerDummyImpl());f.InAQueryManagerProvider.staticSetupProvider();f.QCsnConverter.staticSetup();f.InADocConverterSfxRepo.staticSetupInAConverter();f.InADocConverterUqmRepo.staticSetupInAConverter();f.InAFusion.staticSetup();f.InAFusionLayer.staticSetup();r.addService(f.OlapApiModule.XS_QUERY_CONSUMER,f.InAQueryManagerProvider.CLAZZ);f.XCmdCreateQueryManager.staticSetup();f.XCmdCreateQueryManagerResult.staticSetup();r.addCommand(f.CmdCreateQueryManager.CMD_NAME,f.XCmdCreateQueryManager.CLAZZ);f.XCmdDeserializeBlending.staticSetup();f.XCmdDeserializeBlendingResult.staticSetup();r.addCommand(f.CmdDeserializeBlending.CMD_NAME,f.XCmdDeserializeBlending.CLAZZ);f.XCmdDeserializeBlendingSources.staticSetup();f.XCmdDeserializeBlendingSourcesResult.staticSetup();r.addCommand(f.CmdDeserializeBlendingSources.CMD_NAME,f.XCmdDeserializeBlendingSources.CLAZZ);f.XCmdDeserializeCalculatedDimension.staticSetup();f.XCmdDeserializeCalculatedDimensionResult.staticSetup();r.addCommand(f.CmdDeserializeCalculatedDimension.CMD_NAME,f.XCmdDeserializeCalculatedDimension.CLAZZ);f.XCmdDeserializeExtendedDimension.staticSetup();f.XCmdDeserializeExtendedDimensionResult.staticSetup();r.addCommand(f.CmdDeserializeExtendedDimension.CMD_NAME,f.XCmdDeserializeExtendedDimension.CLAZZ);f.ProviderModule.addAllComponents();f.QInA.removeEmptyContainers();f.DfModule.stopExt(f.ProviderModule.s_module);}return f.ProviderModule.s_module;};f.ProviderModule.addAllComponents=function(){f.QInA.addInAComponent(new f.QCsnMdQuery());f.QInA.addInAComponent(new f.QCsnMdDimensions());f.QInA.addInAComponent(new f.QCsnMdDimension());f.QInA.addInAComponent(new f.QCsnMdDimMembers());f.QInA.addInAComponent(new f.QCsnMdVariables());f.QInA.addInAComponent(new f.QCsnMdVariable());f.QInA.addInAComponent(new f.QInAMdVariableContainer());f.QInA.addInAComponent(new f.QInAMdVarDimMember());f.QInA.addInAComponent(new f.QInAMdVarOptionList());f.QInA.addInAComponent(new f.QInAMdVariable());f.QInA.addInAComponent(new f.QInAMdBasicMeasure());f.QInA.addInAComponent(new f.QInAMdField());f.QInA.addInAComponent(new f.QInAMdDimension());f.QInA.addInAComponent(new f.QInAMdSort());f.QInA.addInAComponent(new f.QInAMdDrillManager());f.QInA.addInAComponent(new f.QInAMdExceptionAggregationManager());f.QInA.addInAComponent(new f.QInAMdUniversalDisplayHierarchies());f.QInA.addInAComponent(new f.QInAMdQuery());f.QInA.addInAComponent(new f.QInAMdGenericComponent());f.QInA.addInAComponent(new f.QInARepoField());f.QInA.addInAComponent(new f.QInARepoTotals());f.QInA.addInAComponent(new f.QInARepoTotalsLegacy());f.QInA.addInAComponent(new f.QInARepoSortOperation());f.QInA.addInAComponent(new f.QInARepoDimension());f.QInA.addInAComponent(new f.QInARepoSort());f.QInA.addInAComponent(new f.QInARepoSortLegacy());f.QInA.addInAComponent(new f.QInARepoFilterCellValueOperand());f.QInA.addInAComponent(new f.QInARepoFilterCellValueOperandLegacy());f.QInA.addInAComponent(new f.QInARepoVarHierNode());f.QInA.addInAComponent(new f.QInARepoVarDimMember());f.QInA.addInAComponent(new f.QInARepoVarDimMemberLegacy());f.QInA.addInAComponent(new f.QInARepoMembersAll());f.QInA.addInAComponent(new f.QInARepoMembersAllLegacy());f.QInA.addInAComponent(new f.QInARepoMemberRestricted());f.QInA.addInAComponent(new f.QInARepoMemberRestrictedLegacy());f.QInA.addInAComponent(new f.QInARepoMemberFormulaMeasure());f.QInA.addInAComponent(new f.QInARepoMemberBasicMeasure());f.QInA.addInAComponent(new f.QInARepoMemberCurrency());f.QInA.addInAComponent(new f.QInARepoMemberExceptionAggregationMeasure());f.QInA.addInAComponent(new f.QInARepoMemberVarianceMeasure());f.QInA.addInAComponent(new f.QInARepoMemberExceptionAggregationMeasure());f.QInA.addInAComponent(new f.QInARepoMemberAbstract());f.QInA.addInAComponent(new f.QInARepoFilterOperation());f.QInA.addInAComponent(new f.QInARepoFilterOperationLegacy());f.QInA.addInAComponent(new f.QInARepoFilterCartesianList());f.QInA.addInAComponent(new f.QInARepoFilterCartesianListLegacy());f.QInA.addInAComponent(new f.QInARepoFilterConvertedTimeCartesianList());f.QInA.addInAComponent(new f.QInARepoFilterCartesianProduct());f.QInA.addInAComponent(new f.QInARepoFilterMeasureBased());f.QInA.addInAComponent(new f.QInARepoFilterExpression());f.QInA.addInAComponent(new f.QInARepoFilterExpressionLegacy());f.QInA.addInAComponent(new f.QInARepoFilterAlgebra());f.QInA.addInAComponent(new f.QInARepoFilterAlgebraLegacy());f.QInA.addInAComponent(new f.QInARepoFilterTuple());f.QInA.addInAComponent(new f.QInARepoFilterAcrossModels());f.QInA.addInAComponent(new f.QInARepoFilterFixed());f.QInA.addInAComponent(new f.QInARepoFilterFixedLegacy());f.QInA.addInAComponent(new f.QInARepoFilterVirtualDatasource());f.QInA.addInAComponent(new f.QInARepoFilterAll());f.QInA.addInAComponent(new f.QInARepoFilterAllLegacy());f.QInA.addInAComponent(new f.QInARepoFilterDynamic());f.QInA.addInAComponent(new f.QInARepoFilterVisibility());f.QInA.addInAComponent(new f.QInARepoFilterGeo());f.QInA.addInAComponent(new f.QInARepoFilterGeoLegacy());f.QInA.addInAComponent(new f.QInARepoFilterElement());f.QInA.addInAComponent(new f.QInARepoFilterManager());f.QInA.addInAComponent(new f.QInARepoFilterManagerLegacy());f.QInA.addInAComponent(new f.QInARepoHierarchy());f.QInA.addInAComponent(new f.QInARepoHierarchyManager());f.QInA.addInAComponent(new f.QInARepoHierarchyLegacy());f.QInA.addInAComponent(new f.QInARepoAxis());f.QInA.addInAComponent(new f.QInARepoAxisLegacy());f.QInA.addInAComponent(new f.QInARepoAxesSettings());f.QInA.addInAComponent(new f.QInARepoAxesSettingsLegacy());f.QInA.addInAComponent(new f.QInARepoCurrencyTranslationItem());f.QInA.addInAComponent(new f.QInARepoFormulaCalculatedDimension());f.QInA.addInAComponent(new f.QInARepoFormulaExceptionManager());f.QInA.addInAComponent(new f.QInARepoFormulaException());f.QInA.addInAComponent(new f.QInARepoExceptions());f.QInA.addInAComponent(new f.QInARepoExceptionsLegacy());f.QInA.addInAComponent(new f.QInARepoConditionsThreshold());f.QInA.addInAComponent(new f.QInARepoConditionManager());f.QInA.addInAComponent(new f.QInARepoConditionManagerLegacy());f.QInA.addInAComponent(new f.QInARepoConditionsCondition());f.QInA.addInAComponent(new f.QInARepoConditionsConditionLegacy());f.QInA.addInAComponent(new f.QInARepoUniversalDisplayHierarchies());f.QInA.addInAComponent(new f.QInARepoQueryCells());f.QInA.addInAComponent(new f.QInARepoModellerDimensions());f.QInA.addInAComponent(new f.QInARepoModellerCurrencyTranslation());f.QInA.addInAComponent(new f.QInARepoModellerVariableManager());f.QInA.addInAComponent(new f.QInARepoModellerMetadataProperties());f.QInA.addInAComponent(new f.QInARepoVarOptionList());f.QInA.addInAComponent(new f.QInARepoVarOptionListLegacy());f.QInA.addInAComponent(new f.QInARepoVariableManager());f.QInA.addInAComponent(new f.QInARepoVariableContainerLegacy());f.QInA.addInAComponent(new f.QInARepoVariablesListLegacy());f.QInA.addInAComponent(new f.QInARepoVarSimpleType());f.QInA.addInAComponent(new f.QInARepoVarSimpleTypeLegacy());f.QInA.addInAComponent(new f.QInARepoDrillManager());f.QInA.addInAComponent(new f.QInARepoDrillManagerLegacy());f.QInA.addInAComponent(new f.QInARepoDrillPathElement());f.QInA.addInAComponent(new f.QInARepoDrillPathElementLegacy());f.QInA.addInAComponent(new f.QInARepoDrillPathOperation());f.QInA.addInAComponent(new f.QInARepoDimensions());f.QInA.addInAComponent(new f.QInARepoDimensionsLegacy());f.QInA.addInAComponent(new f.QInARepoDimensionsAllLegacy());f.QInA.addInAComponent(new f.QInARepoDataCell());f.QInA.addInAComponent(new f.QInARepoCalculatedDimension());f.QInA.addInAComponent(new f.QInARepoDataCellsAll());f.QInA.addInAComponent(new f.QInARepoDataCellsAllLegacy());f.QInA.addInAComponent(new f.QInARepoQuerySettings());f.QInA.addInAComponent(new f.QInARepoQuerySettingsLegacy());f.QInA.addInAComponent(new f.QInaRepoCustomHierarchyDefinition());f.QInA.addInAComponent(new f.QInARepoCustomHierarchyDefinitionLegacy());f.QInA.addInAComponent(new f.QInARepoAttribute());f.QInA.addInAComponent(new f.QInARepoAttributeLegacy());f.QInA.addInAComponent(new f.QInARepoDataSource());f.QInA.addInAComponent(new f.QInARepoCurrencyTranslationManager());f.QInA.addInAComponent(new f.QInARepoCurrencyTranslationManagerLegacy());f.QInA.addInAComponent(new f.QInARepoCurrencyTranslationList());f.QInA.addInAComponent(new f.QInARepoTranslationsManager());f.QInA.addInAComponent(new f.QInARepoQuery());f.QInA.addInAComponent(new f.QInARepoQueryLegacy());f.QInA.addInAComponent(new f.QInARepoServiceConfig());f.QInA.addInAComponent(new f.QInARepoQueryManager());f.QInA.addInAComponent(new f.QInARepoBlendableQueryManager());f.QInA.addInAComponent(new f.QInAQuery());f.QInA.addInAComponent(new f.QInADimension());f.QInA.addInAComponent(new f.QInACalculatedDimension());f.QInA.addInAComponent(new f.QInASort());f.QInA.addInAComponent(new f.QInACurrencyTranslationManager());f.QInA.addInAComponent(new f.QInACurrencyTranslationListManager());f.QInA.addInAComponent(new f.QInACurrencyTranslationItem());f.QInA.addInAComponent(new f.QInATranslationsManager());f.QInA.addInAComponent(new f.QInAConditionManager());f.QInA.addInAComponent(new f.QInAConditionsCondition());f.QInA.addInAComponent(new f.QInAConditionsThreshold());f.QInA.addInAComponent(new f.QInADataSource());f.QInA.addInAComponent(new f.QInAQuerySettings());f.QInA.addInAComponent(new f.QInATotals());f.QInA.addInAComponent(new f.QInAAttribute());f.QInA.addInAComponent(new f.QInAAxesSettings());f.QInA.addInAComponent(new f.QInAAxis());f.QInA.addInAComponent(new f.QInADataCell());f.QInA.addInAComponent(new f.QInADataCellsAll());f.QInA.addInAComponent(new f.QInADrillManager());f.QInA.addInAComponent(new f.QInAUniversalDisplayHierarchies());f.QInA.addInAComponent(new f.QInADrillPathElement());f.QInA.addInAComponent(new f.QInADrillPathOperation());f.QInA.addInAComponent(new f.QInAField());f.QInA.addInAComponent(new f.QInAQueryCellsAll());f.QInA.addInAComponent(new f.QInAVariableContainer());f.QInA.addInAComponent(new f.QInAVariablesList());f.QInA.addInAComponent(new f.QInAVarSimpleType());f.QInA.addInAComponent(new f.QInAVarDimMember());f.QInA.addInAComponent(new f.QInAVarOptionList());f.QInA.addInAComponent(new f.QInAVarHierNode());f.QInA.addInAComponent(new f.QInAMember());f.QInA.addInAComponent(new f.QInAMembersAll());f.QInA.addInAComponent(new f.QInAMemberRestrictedMeasure());f.QInA.addInAComponent(new f.QInAMemberBasicMeasure());f.QInA.addInAComponent(new f.QInAMemberFormulaMeasure());f.QInA.addInAComponent(new f.QInAFilterExpression());f.QInA.addInAComponent(new f.QInAFilterCellValueOperand());f.QInA.addInAComponent(new f.QInAFilterTuple());f.QInA.addInAComponent(new f.QInAFilterElement());f.QInA.addInAComponent(new f.QInAFilterAlgebra());f.QInA.addInAComponent(new f.QInAFilterCartesianList());f.QInA.addInAComponent(new f.QInAFilterConvertedTimeCartesianList());f.QInA.addInAComponent(new f.QInAFilterFixed());f.QInA.addInAComponent(new f.QInAFilterDynamic());f.QInA.addInAComponent(new f.QInAFilterVisibility());f.QInA.addInAComponent(new f.QInAValueHelpFilter());f.QInA.addInAComponent(new f.QInAFilterAll());f.QInA.addInAComponent(new f.QInAFilterOperation());f.QInA.addInAComponent(new f.QInAFilterGeo());f.QInA.addInAComponent(new f.QInAFilterCartesianProduct());f.QInA.addInAComponent(new f.QInAFilterVirtualDatasource());f.QInA.addInAComponent(new f.QInAFilterManager());f.QInA.addInAComponent(new f.QInAHierarchyValueHelp());f.QInA.addInAComponent(new f.QInAHierarchy());f.QInA.addInAComponent(new f.QInACustomHierarchyDefinition());f.QInA.addInAComponent(new f.QInADimensionsAll());f.QInA.addInAComponent(new f.QInAExceptions());f.QInA.addInAComponent(new f.QInAGenericComponent());};f.ProviderModule.prototype.getName=function(){return"ff4400.olap.providers";};f.ProviderModule.getInstance();return sap.firefly;});
