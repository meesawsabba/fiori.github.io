/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff4310.olap.impl"],function(f){"use strict";f.QInAComponent=function(){};f.QInAComponent.prototype=new f.XObject();f.QInAComponent.prototype._ff_c="QInAComponent";f.QInAComponent.prototype.getModelFormat=function(){return null;};f.QInAComponent.prototype.isMatching=function(i){return true;};f.QInAComponent.prototype.getName=function(){return this.getComponentType().getName();};f.QInAComponent.prototype.getTagName=function(){return null;};f.QInAComponent.prototype.toString=function(){return this.getName();};f.QInAExportUtil={extendStructure:function(e,m,s){if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var t=m.getTagging();if(f.XCollectionUtils.hasElements(t)){var k=t.getKeysAsReadOnlyListOfString();var c=s.putNewList("ComponentTags");for(var i=0;i<k.size();i++){var a=k.get(i);var b=t.getByKey(a);var n=f.PrFactory.createStructure();c.add(n);n.putString("KEY",a);if(f.isNull(b)){n.putNull("VALUE");}else{n.putString("VALUE",b);}}}}return s;},extendList:function(m,s){return s;},setDate:function(e,s,p,d){if(f.notNull(d)){s.putString(p,f.QInAExportUtil.dateTimeToString(e,d));}},isNumberSafe:function(v){return f.XMath.abs(v)<9007199254740992;},setNonEmptyString:function(s,p,v){if(f.XStringUtils.isNotNullAndNotEmpty(v)){s.putString(p,v);}},setNameIfNotNull:function(s,n,a){if(f.notNull(a)){s.putString(n,a.getName());}},setIntegerIfNotNull:function(s,n,v){if(f.notNull(v)){s.putInteger(n,v.getInteger());}},dateTimeToString:function(e,v){return e.capabilities.supportsSapDate()?v.toSAPFormat():v.toIsoFormat();},getAccountDimensionMemberNameByAlias:function(q,a,e){if((e.getMode().isTypeOf(f.QModelFormat.INA_DATA)||e.mode.isTypeOf(f.QModelFormat.INA_VALUE_HELP))&&f.notNull(q)){var n=q.getConvenienceCommands().getAccountDimensionMemberNameByAlias(q,a);if(f.notNull(n)){return n;}}return a;},getMeasureMemberNameByAlias:function(q,a,e){var m=a;if((e.getMode().isTypeOf(f.QModelFormat.INA_DATA)||e.mode.isTypeOf(f.QModelFormat.INA_VALUE_HELP))&&f.notNull(q)){var n=q.getConvenienceCommands().getMeasureMemberNameByAlias(q,a);if(f.notNull(n)){m=n;}if(e.getSession().hasFeature(f.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&q.getDimensionByType(f.DimensionType.ACCOUNT)!==null&&f.notNull(m)){var b=q.getAccountDimension();var c;var h;var d;if(f.XString.startsWith(m,f.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX)){c=f.XStringUtils.concatenate3("[",b.getName(),"].[");h=b.getHierarchyName()!==null?b.getHierarchyName():b.getDefaultHierarchyName();d=f.XStringUtils.concatenate3(c,h,"].&[");m=f.XStringUtils.concatenate3(d,m,"]");}}}return m;}};f.QInAImportUtil={importComponentTagging:function(a,b,m){if(f.notNull(b)){if(a.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)&&b.isStructure()&&f.notNull(m)){var c=b;var d=c.getListByKey("ComponentTags");if(!f.PrUtils.isListEmpty(d)){var e=m.getTagging();for(var i=0;i<d.size();i++){var g=d.getStructureAt(i);if(f.notNull(g)){var h=g.getStringByKey("KEY");if(f.XStringUtils.isNotNullAndNotEmpty(h)){e.put(h,g.getStringByKey("VALUE"));}}}}}}}};f.QInAValueUtils={importValueByType:function(i,a,p,v){return f.QInAValueUtils._importValueInternal(i,null,a,p,v,null,true);},importSupplementsAndValue:function(a,v,b,p,c,d){f.QInAValueUtils.importValue(a,v,b,p,c,d);var s=b.getListByKey("Supplements");if(f.notNull(s)&&s.hasElements()){var n=s.size();for(var i=0;i<n;i++){var e=s.getStructureAt(i);var k=e.getByKey("Key");var g=e.getByKey("Value");var h=f.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(k.getString());var j=f.QInAValueUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());v.addSupplementValue(h,j);}}},containsEscapedQuote:function(j){return f.XStringUtils.isNotNullAndNotEmpty(j)&&(f.XString.getCharAt(j,0)===92||f.XString.getCharAt(j,0)===34)&&(f.XString.getCharAt(j,f.XString.size(j)-1)===92||f.XString.getCharAt(j,f.XString.size(j)-1)===34);},correctRemovingUnwantedBackslashAndQuotes:function(j){var c=j;while(f.QInAValueUtils.containsEscapedQuote(c)){c=f.XStringUtils.stripChars(c,1);}return c;},importValue:function(i,v,a,p,b,c){f.QInAValueUtils._importValueInternal(i,v,a,p,b,c,false);},getDouble:function(i,p){var d;var a=i.getByKey(p);if(a.isString()){var s=a.getString();d=f.XDouble.convertFromString(s);}else if(a.isDouble()){d=a.getDouble();}else if(a.isInteger()){d=a.getInteger();}else{d=0.0;}return d;},_importValueInternal:function(i,v,a,p,b,c,r){var u=i.capabilities.supportsSapDate();var d=f.PrUtils.getBooleanValueProperty(a,"FieldLiteralValue",false);var e=p;if(f.isNull(e)){e="Value";}var g=b;if(f.isNull(g)){var h=a.getStringByKey(f.XStringUtils.concatenate2(e,"Type"));g=f.QInAConverter.lookupValueType(h);u=false;}if((g===f.XValueType.DOUBLE||g===f.XValueType.DECIMAL_FLOAT)&&a.hasStringByKey(e)){g=f.XValueType.STRING;}var j;var s;if(g===f.XValueType.STRING){s=a.getStringByKey(e);if(r){return f.XStringValue.create(s);}if(f.isNull(c)||!d){v.setString(s);}else{var k=c.getDimension();var l=k.getDimensionMember(s);if(k.isStructure()&&f.notNull(l)){v.setDimensionMember(l);}else{j=c.createFieldLiteralValue();j.setString(s);v.setFieldValue(j);}}}else if(g===f.XValueType.DOUBLE||g===f.XValueType.DECIMAL_FLOAT){var m=f.QInAValueUtils.getDouble(a,e);if(r){return f.XDoubleValue.create(m);}if(f.isNull(c)||!d){v.setDouble(m);}else{j=c.createFieldLiteralValue();j.setDouble(m);v.setFieldValue(j);}}else if(g===f.XValueType.INTEGER){var n=a.getIntegerByKey(e);if(r){return f.XIntegerValue.create(n);}if(f.isNull(c)||!d){v.setInteger(n);}else{j=c.createFieldLiteralValue();j.setInteger(n);v.setFieldValue(j);}}else if(g===f.XValueType.BOOLEAN){var o=a.getBooleanByKey(e);if(r){return f.XBooleanValue.create(o);}v.setBoolean(o);}else if(g===f.XValueType.LONG){var q=f.PrUtils.getLongValueProperty(a,e,0);if(r){return f.XLongValue.create(q);}if(f.isNull(c)||!d){v.setLong(q);}else{j=c.createFieldLiteralValue();j.setLong(q);v.setFieldValue(j);}}else if(g===f.XValueType.DATE){s=a.getStringByKey(e);var t=f.XDate.createDateFromStringWithFlag(s,u);if(r){return t;}if(f.isNull(c)||!d){v.setDate(t);}else{j=c.createFieldLiteralValue();j.setDate(t);v.setFieldValue(j);}}else if(g===f.XValueType.TIME){s=a.getStringByKey(e);var w=f.XTime.createTimeFromStringWithFlag(s,u);if(r){return w;}v.setTime(w);}else if(g===f.XValueType.DATE_TIME){s=a.getStringByKey(e);var x=f.XDateTime.createDateTimeFromStringWithFlag(s,u);if(r){return x;}if(f.isNull(c)||!d){v.setDateTime(x);}else{j=c.createFieldLiteralValue();j.setDate(x);v.setFieldValue(j);}}else if(g.isSpatial()){s=a.getStringByKey(e);var y=f.XGeometryValue.createGeometryValueWithWkt(s);if(r){return y;}v.setValue(y);if(i.capabilities.supportsSpatialFilterSrid()&&a.containsKey("SRID")){v.getGeometry().setSrid(f.XIntegerValue.create(a.getIntegerByKey("SRID")));}}else if(g===f.XValueType.UNSUPPORTED){return null;}else if(g===f.XValueType.VARIABLE||g===f.XValueType.CURRENT_MEMBER){if(!r){v.setFilterValueType(g);}return null;}else{i.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Unsupported value type '",g.getName(),"'"));return null;}return null;},exportValue:function(e,p,i,v,a,_){f.QInAValueUtils.exportFieldValue(e,p,i,null,v,a);},exportPlaceholderValue:function(e,p,i,v,a,q){var n=v;if(a===f.XValueType.STRING||v.getValueType()===f.XValueType.STRING){var u=f.QInAExportUtil.getMeasureMemberNameByAlias(q,v.getString(),e);if(!f.XString.isEqual(u,v.getString())){var b=f.XValueAccess.createWithType(f.XValueType.STRING);b.setString(u);n=b;}}f.QInAValueUtils.exportFieldValue(e,p,i,null,n,a);},exportFieldValue:function(e,p,i,a,v,b){var c=p;if(f.isNull(c)){c="Value";}var d=b;if(f.isNull(d)){d=v.getValueType();var g=f.QInAConverter.lookupValueTypeInA(d);i.putString(f.XStringUtils.concatenate2(c,"Type"),g);e.capabilities.setSupportsSapDate(false);}var h=v.getValueType();if(h===f.XValueType.DATE||h===f.XValueType.TIME||h===f.XValueType.DATE_TIME){d=h;}if(d===f.XValueType.STRING){i.putString(c,v.getString());}else if(d===f.XValueType.INTEGER){i.putInteger(c,v.getInteger());}else if(d===f.XValueType.LONG){i.putLong(c,v.getLong());}else if(d===f.XValueType.DOUBLE||d===f.XValueType.DECIMAL_FLOAT){if(v.getValueType()===f.XValueType.STRING){i.putString(c,v.getString());}else{i.putDouble(c,v.getDouble());}}else if(d===f.XValueType.BOOLEAN){i.putBoolean(c,v.getBoolean());}else if(d===f.XValueType.DATE){f.QInAExportUtil.setDate(e,i,c,v.getDate());}else if(d===f.XValueType.TIME){f.QInAExportUtil.setDate(e,i,c,v.getTime());}else if(d===f.XValueType.DATE_TIME){f.QInAExportUtil.setDate(e,i,c,v.getDateTime());}if(f.notNull(d)&&d.isSpatial()){var j=v.getGeometry();i.putString(c,j.toWKT());var s=j.getSrid();if(e.capabilities.supportsSpatialFilterSrid()&&f.notNull(s)){i.putInteger("SRID",s.getInteger());}}if(f.notNull(a)){i.putBoolean("FieldLiteralValue",true);}},exportSupplementsAndValue:function(e,p,i,a,v,b){f.QInAValueUtils.exportFieldValue(e,p,i,a,v,b);var s=v.getSupplementValues();if(f.XCollectionUtils.hasElements(s)){var c=i.putNewList("Supplements");var n=s.size();for(var j=0;j<n;j++){var d=c.addNewStructure();var g=s.get(j);d.putString("Key",g.getKey().toString());d.putString("Value",g.getValue().toString());}}},exportFilterValue:function(e,p,i,v,a){if(a===f.XValueType.VARIABLE){var b=v.getVariableValue();if(f.notNull(b)){i.putString(p,b.getName());if(f.XString.isEqual(p,"Low")){i.putString("LowIs","Variable");}else if(f.XString.isEqual(p,"High")){i.putString("HighIs","Variable");}}}else{f.QInAValueUtils.exportPlaceholderValue(e,p,i,v,a,v.getQueryModel());}},importSupplements:function(a,v,s,p,b){if(a.capabilities.supportsSupplements()&&f.notNull(p)&&f.XCollectionUtils.hasElements(b)){var c=s.getListByKey(p);if(f.notNull(c)){var d=c.size();var e=b.size();if(d===e){for(var i=0;i<d;i++){v.addSupplementValue(b.get(i),c.getStringAt(i));}}else{a.addWarning(f.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.");}}}}};f.QInARepoDataSourceBlending={exportDataSourceBlending:function(a,b,i){var c=f.PrFactory.createStructure();var d=c.putNewStructure("Metadata");var e=d.putNewStructure("DataSource");e.putString("Type",f.QueryManagerMode.BLENDING.getName());var o=f.XStringBuffer.create();for(var g=0;g<b.getSources().size();g++){o.append(b.getSources().get(g).getQueryAliasName());}var h=o.toString();if(o.length()>=256){h=f.XSha1.createSHA1(h);}e.putString("ObjectName",h);var j=f.QInARepoDataSourceBlending.exportBlendingSources(a,b,i);e.put("Sources",j);var k=f.QInARepoDataSourceBlending.exportBlendingMappings(b.getMappings());e.put("Mappings",k);return e;},exportBlendingSources:function(a,b,i){var c=a;var d=f.PrFactory.createList();var s=b.getSources().getIterator();while(s.hasNext()){var e=s.next();var q=e.getQueryModel();if(f.isNull(q)){return null;}var g=d.addNewStructure();g.putString("Type","Query");g.putString("AliasName",e.getQueryAliasName());g.putString("ObjectName",e.getQueryAliasName());var h=g.putNewStructure("DefiningContext");var j=q.serializeToElement(c).asStructure();f.QInARepoDataSourceBlending.exportOptimizerHints(j,q.getOptimizerHintsByExecutionEngine(f.ExecutionEngine.MDS));var k=q.getQueryManager();var p=k.getResultSetPersistenceIdentifier();if(!e.isRemoteSource()&&f.XStringUtils.isNotNullAndNotEmpty(p)&&i){j.getStructureByKey("DataSource").putString("InstanceId",p);}var l=f.QInARepoDataSourceBlending.exportResultSetFeatures(q,true);j.put("ResultSetFeatureRequest",l);h.put("Definition",j);}f.XObjectExt.release(s);return d;},updateRemoteDataSource:function(i,q,a,l){var d=i.putNewStructure("DataSource");d.putString("Type","SerializedData");d.putString("InstanceId",q.getResultSetPersistenceIdentifier());var r=q.getActiveResultSetContainer();var s=q.getSystemDescription();var h=f.XStringUtils.isNotNullAndNotEmpty(r.getSerializedView())&&(!a||f.XStringUtils.isNotNullAndNotEmpty(r.getSerializedCube()));if(!h&&l.isSystemMappingValid(s)){var m=s.getSystemMapping(l.getSystemName());d.putString("ObjectName",m.getDeserializeTable());d.putString("SchemaName",m.getDeserializeSchema());}else{var b=d.putNewStructure("SerializedData");b.putString("View",r.getSerializedView());if(a){b.putStringNotNullAndNotEmpty("Cube",r.getSerializedCube());}}f.QInARepoDataSourceBlending.updateBWRemoteSource(i,q.getSystemType(),q.getQueryModel());},exportOptimizerHints:function(a,o){if(f.XCollectionUtils.hasElements(o)){var s=o.getKeysAsReadOnlyListOfString();s.sortByDirection(f.XSortDirection.ASCENDING);var b=a.putNewStructure("Hints");var c=b.putNewList(f.ExecutionEngine.MDS.getName());var d=s.size();for(var i=0;i<d;i++){var h=s.get(i);var e=c.addNewStructure();e.putString("Key",h);e.putString("Value",o.getByKey(h));}}},updateBWRemoteSource:function(a,s,q){if(s.isTypeOf(f.SystemType.BW)||s.isTypeOf(f.SystemType.VIRTUAL_INA)){a.remove("FixedFilter");a.remove("DynamicFilter");a.remove("Filter");a.remove("Conditions");a.remove("Query");a.remove("QueryDataCells");a.remove("Sort");a.remove("ExtendedSortTypes");a.remove("Variables");a.remove("UniversalDisplayHierarchies");var e=f.QInARepoDataSourceBlending.getExtendedStructureMemberNames(q);var b=a.getListByKey("Dimensions");var d=f.PrUtils.getListSize(b,0);for(var i=0;i<d;i++){var c=b.getStructureAt(i).getListByKey("Members");var m=f.PrUtils.getListSize(c,0);for(var k=0;k<m;k++){var g=c.getStructureAt(k);if(e.contains(g.getStringByKey("Name"))){g.remove("Selection");}}}}},getExtendedStructureMemberNames:function(q){var s=q.getMeasureDimension().getExtendedStructureMembers();return f.XCollectionUtils.createListOfNames(s);},exportResultSetFeatures:function(s,i){var o=f.PrFactory.createStructure();o.putBoolean("UseDefaultAttributeKey",false);var q=s.getQueryManager();if(q.getMaxResultRecords()!==-1){o.putLong("MaxResultRecords",q.getMaxResultRecords());}f.QInARepoOptions.exportPaging(o,q);f.QInARepoOptions.exportSuppressKeyfigureCalculation(o,q);o.putString("ResultFormat","Version2");o.putString("ResultEncoding","None");if(i){o.putBoolean("IsCubeBlendingSubquery",true);}if(!q.isResultSetTransportEnabled()){o.putBoolean("ReturnEmptyJsonResultSet",true);}return o;},exportDimensionMapping:function(d){var i=f.PrFactory.createStructure();i.putString("DimensionName",d.getMemberName());i.putString("LinkType",d.getLinkType().getName());if(d.isPreservingMembers()){i.putBoolean("PreserveMembers",true);}if(!d.isReturningOriginKeys()){i.putBoolean("ReturnOriginKeys",false);}var a=d.getMappingDefinitions().getIterator();var b=f.QInARepoDataSourceBlending.exportMappingDefinitions(a);f.XObjectExt.release(a);i.put("Mapping",b);if((d.getLinkType()===f.BlendingLinkType.ALL_DATA||d.getLinkType()===f.BlendingLinkType.NONE)&&d.getConstantMappings().hasElements()){f.QInARepoDataSourceBlending.exportConstantMapping(b,d.getConstantMappings().getIterator());}var c=f.PrFactory.createList();var e=d.getAttributeMappings().getIterator();while(e.hasNext()){var g=e.next();var h=f.QInARepoDataSourceBlending.exportAttributeMapping(g);c.add(h);}f.XObjectExt.release(e);if(!c.isEmpty()){i.put("AttributeMappings",c);}return i;},exportAttributeMapping:function(a){var i=f.PrFactory.createStructure();i.putString("AttributeName",a.getAttributeName());i.putBoolean("IsLinkKey",a.isLinkKey());var m=a.getAttributeMappingDefinitions().getIterator();var b=f.QInARepoDataSourceBlending.exportMappingDefinitions(m);f.XObjectExt.release(m);i.put("Mapping",b);f.QInARepoDataSourceBlending.exportConstantMapping(b,a.getConstantMappings().getIterator());return i;},exportConstantMapping:function(i,d){while(d.hasNext()){var c=d.next();var a=f.PrFactory.createStructure();a.putString("AliasName",c.getQueryAliasName());var b=a.putNewStructure("MappingDefinition");var e=b.putNewStructure("Constant");e.putString("Value",c.getMemberName());e.putString("ValueType",f.QInAConverter.lookupValueTypeInA(c.getValueType()));i.add(a);}},exportMappingDefinitions:function(d){var i=f.PrFactory.createList();while(d.hasNext()){var a=d.next();var b=i.addNewStructure();b.putString("AliasName",a.getQueryAliasName());var c=b.putNewStructure("MappingDefinition");var e=c.putNewStructure("Member");e.putString("Name",a.getMemberName());}return i;},exportBlendingMappings:function(m){var i=f.PrFactory.createList();var a=m.getIterator();while(a.hasNext()){var b=a.next();var c=f.QInARepoDataSourceBlending.exportDimensionMapping(b);i.add(c);}return i;}};f.QInARepoDataSourceExtDims={importQd:function(a,d,b){if(a.capabilities.supportsExtendedDimensions()){var e=d.getExtendedDimensionsBase();e.clear();var c=b.getListByKey("ExtendedDimensions");if(f.notNull(c)){var g=c.size();for(var i=0;i<g;i++){var h=c.getStructureAt(i);var n=h.getStringByKey("Name");var j=h.getStringByKey("JoinFieldName");var k=h.getStringByKey("JoinFieldNameInExtendedDimension");var l=d.addNewExtendedDimension(n,j,k);l.setText(h.getStringByKey("Description"));var m=h.getStringByKey("JoinType");var o=f.JoinType.lookup(m);l.setJoinType(o);f.QInARepoDataSourceExtDims.importJoinParameter(h,l);f.QInARepoDataSourceExtDims.importExtendedDataSource(h,l);var r=h.getStringByKey("FieldRenamingMode");if(f.notNull(r)){l.setRenamingMode(r);}var p=h.getStringByKey("JoinCardinality");if(f.XStringUtils.isNotNullAndNotEmpty(p)){var q=f.JoinCardinality.lookup(p);l.setJoinCardinality(q);}var s=h.getStringByKey("Visibility");if(f.XStringUtils.isNotNullAndNotEmpty(s)){var t=f.DimensionVisibility.lookup(s);if(f.notNull(t)){l.setVisibility(t);}}}}}},importExtendedDataSource:function(i,e){var a=i.getStructureByKey("DataSource");if(f.notNull(a)){var b=f.QFactory.createDataSource();f.QInARepoDataSourceProperties.importQd(b,a);var t;var c=a.getStringByKey("Type");if(f.isNull(c)){t=f.MetaObjectType.DBVIEW;}else{t=f.MetaObjectType.lookup(f.XString.toLowerCase(c));}b.setType(t);e.setDataSource(b);}},importJoinParameter:function(i,e){var a=i.getListByKey("JoinParameters");if(f.notNull(a)){var b=e.getJoinParameters();b.clear();var c=a.size();for(var j=0;j<c;j++){b.add(a.getStringAt(j));}}},checkIsValid:function(e,a){var j=a.getJoinType();if(f.isNull(j)){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' is missing a JoinType"));return false;}var d=a.getDimensionType();if(d.isTypeOf(f.DimensionType.GIS_DIMENSION)&&j.isTypeOf(f.JoinType._TIME)){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Spatial extended dimensions must not have join type INNER");return false;}else if((d.isTypeOf(f.DimensionType.TIME)||d.isTypeOf(f.DimensionType.DATE))&&j.isTypeOf(f.JoinType._SPATIAL)){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Time extended dimensions must not have spatial join type");return false;}var b=a.getDataSource();if(f.isNull(b)){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' is missing its DataSource"));return false;}var c=a.getJoinParameters();if(j===f.JoinType.WITHIN_DISTANCE&&c.isEmpty()){e.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate3("Extended dimension '",a.getName(),"' of joinType 'WITHIN_DISTANCE' is expected to have the 2 parameters 'distance' and 'unit of measure' (in that order)"));return false;}return true;},exportQd:function(e,d,i){var a=d.getExtendedDimensions();if(f.XCollectionUtils.hasElements(a)){var b=i.putNewList("ExtendedDimensions");for(var c=0;c<a.size();c++){var g=a.get(c);if(!f.QInARepoDataSourceExtDims.checkIsValid(e,g)){return;}var h=b.addNewStructure();h.putString("Name",g.getName());h.putString("Description",g.getText());h.putInteger("DimensionType",f.QInAConverter.lookupDimensionTypeInA(g.getDimensionType()));h.putString("JoinFieldName",g.getJoinField());h.putString("JoinFieldNameInExtendedDimension",g.getJoinFieldNameExternal());h.putString("JoinType",g.getJoinType().getName());var j=g.getJoinCardinality();if(f.notNull(j)){h.putString("JoinCardinality",j.getName());}var q=d.getQueryManager();var m=null;if(f.notNull(q)){m=q.getModelCapabilities();}if(f.isNull(m)){m=e.capabilities;}if(m.supportsDimensionVisibility()&&m.supportsExtendedDimensionVisibility()){var k=g.getVisibility();if(f.notNull(k)){h.putString("Visibility",k.getName());}}var l=g.getJoinParameters();if(l.hasElements()){var n=h.putNewList("JoinParameters");n.addAllStrings(l);}var o=g.getDataSource();var p=h.putNewStructure("DataSource");f.QInARepoDataSourceProperties.exportQd(e,o,p,false);var t=o.getType();if(f.isNull(t)){p.putString("Type",f.MetaObjectType.DBVIEW.getCamelCaseName());}else{p.putString("Type",t.getCamelCaseName());}if(m.supportsExtendedDimensionsChangeDefaultRenamingAndDescription()){h.putStringNotNull("FieldRenamingMode",g.getRenamingMode());}}}}};f.QInARepoDataSourceProperties={importQd:function(d,s){var n=s.getStringByKey("ObjectName");d.setName(n);var e=s.getStringByKey("Environment");d.setEnvironmentName(e);var p=s.getStringByKey("PackageName");d.setPackageName(p);var a=s.getStringByKey("SchemaName");d.setSchemaName(a);var b=s.getStringByKey("SourceQuery");d.setSourceQuery(b);var c=s.getStringByKey("AliasName");d.setAlias(c);var g=s.getStringByKey("DataArea");d.setDataArea(g);var r=s.getStringByKey("RunAsUser");d.setRunAsUser(r);var t=s.getStringByKey("Description");d.setText(t);var h=s.getStructureByKey("CustomProperties");if(f.notNull(h)){var j=h.getKeysAsReadOnlyListOfString();var k=j.size();for(var i=0;i<k;i++){var l=j.get(i);d.addCustomProperty(l,h.getStringByKey(l));}}},exportQd:function(e,d,i,w){f.QInAExportUtil.setNonEmptyString(i,"ObjectName",d.getObjectName());f.QInAExportUtil.setNonEmptyString(i,"Environment",d.getEnvironmentName());f.QInAExportUtil.setNonEmptyString(i,"PackageName",d.getPackageName());f.QInAExportUtil.setNonEmptyString(i,"SchemaName",d.getSchemaName());f.QInAExportUtil.setNonEmptyString(i,"AliasName",d.getAlias());if(e.getSession().hasFeature(f.FeatureToggleOlap.UNIVERSE_SOURCE_QUERY)){f.QInAExportUtil.setNonEmptyString(i,"SourceQuery",d.getSourceQuery());}var c=d.getCustomProperties();var a=c.getKeysAsIteratorOfString();if(a.hasNext()){var b=i.putNewStructure("CustomProperties");while(a.hasNext()){var k=a.next();f.QInAExportUtil.setNonEmptyString(b,k,c.getByKey(k));}}var g=d.getDataArea();if(!f.XString.isEqual(g,"DEFAULT")){f.QInAExportUtil.setNonEmptyString(i,"DataArea",g);}if(w){f.QInAExportUtil.setNonEmptyString(i,"RunAsUser",d.getRunAsUser());}f.QInAExportUtil.setNonEmptyString(i,"Description",d.getText());}};f.QInARepoOptions={exportOptions:function(p){var i=f.PrFactory.createStructure();i.putBoolean("UseDefaultAttributeKey",false);var r=p.getActiveResultSetContainer();if(r.getMaxResultRecords()!==-1){i.putLong("MaxResultRecords",r.getMaxResultRecords());}var d=r.getDataRefreshEnabled();if(d===f.ActionChoice.ON||d===f.ActionChoice.ONCE){i.putBoolean("Refresh",true);}var h=false;if(f.XStringUtils.isNotNullAndNotEmpty(r.getResultSetPersistenceTable())){i.putString("ResultSetPersistanceTable",r.getResultSetPersistenceTable());if(f.XStringUtils.isNotNullAndNotEmpty(r.getResultSetPersistenceSchema())){i.putString("ResultSetPersistanceSchema",r.getResultSetPersistenceSchema());h=true;}}if(!r.isResultSetTransportEnabled()){i.putBoolean("ReturnEmptyJsonResultSet",true);}f.QInARepoOptions.exportPaging(i,p);f.QInARepoOptions.exportSuppressKeyfigureCalculation(i,p);if(p.getExecuteRequestOnOldResultSet()){i.putBoolean("ExecuteRequestOnOldResultSet",true);}if(p.isIncludePerformanceNotDefault()){i.putBoolean("IncludePerformanceData",p.isRequestingPerformanceData());}var c=p.getCapabilitiesBase();if(c.supportsAutoVariableSubmit()){i.putBoolean("IgnoreAutoSubmit",!p.getInitSettings().isExecuteAutoVariableSubmit());}if(c.supportsCellDocumentId()){i.putBoolean("ReturnDocumentIds",p.isRequestCellDocumentID());}var q=p.getQueryModel();if(c.supportsEncodedResultset()){i.putString("ResultFormat","Version2");i.putString("ResultEncoding","None");if(r.getResultSetPersistenceIdentifier()!==null){var a=!r.isRemotePreQuery();if(a){i.putBoolean("IsCubeBlendingSubquery",true);}if(f.QInARepoOptions.isCubeCacheQuery(q)){i.putString("ResultSetPersistanceIdentifier",r.getResultSetPersistenceIdentifier());}else{i.putString("ResultFormat","SerializedData");if(h){i.putString("ResultSetPersistanceIdentifier",r.getResultSetPersistenceIdentifier());}if(p.getSystemType().isTypeOf(f.SystemType.BW)){if(a&&p.getResultSetPersistenceType()===f.BlendingPersistenceType.VIEW){i.putString("ResultSetPersistanceType","View");}else if(a&&p.getResultSetPersistenceType()===f.BlendingPersistenceType.CUBE){i.putString("ResultSetPersistanceType","Cube");}}}}}if(f.notNull(q)&&c.supportsKeepOriginalTexts()){i.putBoolean("ResultKeepOriginalTexts",q.isKeepingOriginalTexts());}if(r.getSuppressCalculatedMembersWithoutBookedData()!==-1){i.putInteger("SuppressCalculatedMembersWithoutBookedData",r.getSuppressCalculatedMembersWithoutBookedData());}return i;},isCubeCacheQuery:function(q){var h=q.getOptimizerHintsByExecutionEngine(f.ExecutionEngine.MDS);return f.notNull(h)&&h.containsKey(f.OptimizerHint.CUBE_CACHE_WITH_ID.getName());},fillOptions:function(r,c,s,i){var o=f.PrFactory.createList();if(c.supportsServerState()){o.addString("StatefulServer");}var a=i.getServerCustomizations();o.addAllStrings(a.getValuesAsReadOnlyListOfString());if(s.hasFeature(f.FeatureToggleOlap.NO_EMPTY_OPTIONS)===false||o.hasElements()){r.put("Options",o);}},setRequestTimeZone:function(r,p){if(f.notNull(r)&&p.getModelCapabilities().supportsRequestTimezone()){r.putStringNotNullAndNotEmpty("Timezone",p.getQueryServiceConfig().getRequestTimeZone());}},setLanguage:function(r,p){var l=p.getConnection().getSystemDescription().getLanguage();if(f.XStringUtils.isNotNullAndNotEmpty(l)){r.putString("Language",l);}},importReturnedDataSelections:function(a,p){if(f.notNull(a)){if(p.supportsReturnedDataSelection()){var b=a.getStructureByKey("ReturnedDataSelection");if(f.notNull(b)&&b.hasElements()){var c=b.getKeysAsReadOnlyListOfString();var s=c.size();p.clearDataSelections();for(var i=0;i<s;i++){var d=f.ReturnedDataSelection.lookup(c.get(i));if(f.isNull(d)){continue;}if(d===f.ReturnedDataSelection.TUPLE_ELEMENT_IDS){p.enableReturnedDataSelection(d);continue;}if(b.getBooleanByKey(d.getName())){p.enableReturnedDataSelection(d);}else{p.disableReturnedDataSelection(d);}}}}}},exportReturnedDataSelections:function(i,p){if(p.supportsReturnedDataSelection()){var a=i.putNewStructure("ReturnedDataSelection");var b=p.getAllEnabledReturnedDataSelections().getIterator();while(b.hasNext()){a.putBoolean(b.next(),true);}f.XObjectExt.release(b);var c=p.getAllDisabledReturnedDataSelections().getIterator();while(c.hasNext()){a.putBoolean(c.next(),false);}f.XObjectExt.release(c);}},importOptimizerHints:function(i,p){if(p.getModelCapabilities().supportsCeScenarioParams()){p.getQueryModel().clearAllOptimizerHints();var a=i.getStructureByKey("Hints");if(f.notNull(a)){f.QInARepoOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.CALC_ENGINE,p);f.QInARepoOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.MDS,p);f.QInARepoOptions.importOptimizerHintsByEngine(a,f.ExecutionEngine.SQL,p);}}},importOptimizerHintsByEngine:function(a,e,p){var q=p.getQueryModel();var l=a.getListByKey(e.getName());if(f.notNull(l)){var n=l.size();for(var i=0;i<n;i++){var h=l.getStructureAt(i);var k=h.getStringByKey("Key");var v=h.getStringByKey("Value");q.addOptimizerHint(e,k,v);}}},exportOptimizerHints:function(i,q){if(q.getModelCapabilities().supportsCeScenarioParams()){var a=f.PrFactory.createStructure();f.QInARepoOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.CALC_ENGINE);f.QInARepoOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.MDS);f.QInARepoOptions.exportOptimizerHintsByEngine(a,q,f.ExecutionEngine.SQL);if(a.hasElements()){i.put("Hints",a);}}},exportOptimizerHintsByEngine:function(a,q,e){var o=q.getOptimizerHintsByExecutionEngine(e);if(f.notNull(o)&&o.hasElements()){var s=o.getKeysAsReadOnlyListOfString();s.sortByDirection(f.XSortDirection.ASCENDING);var b=a.putNewList(e.getName());var c=s.size();for(var i=0;i<c;i++){var h=s.get(i);var d=b.addNewStructure();d.putString("Key",h);d.putString("Value",o.getByKey(h));}}},importSuppressKeyfigureCalculation:function(i,p){if(f.notNull(i)&&f.notNull(p)){p.setSuppressKeyfigureCalculation(i.getBooleanByKeyExt("SuppressKeyfigureCalculation",false));}},exportSuppressKeyfigureCalculation:function(i,p){if(f.notNull(i)&&f.notNull(p)&&p.isKeyfigureCalculationSuppressed()){i.putBoolean("SuppressKeyfigureCalculation",true);}},importPaging:function(i,p){if(f.notNull(i)){var q=p.getQueryModel();var a=i.getStructureByKey("SubSetDescription");if(f.isNull(a)||!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)&&!p.isApplyingRepoState()){return;}var o=a.getIntegerByKey("RowFrom");if(o>-1){p.setOffsetRows(o);p.setMaxRows(a.getIntegerByKey("RowTo")-o);}else{p.setMaxRows(a.getIntegerByKey("RowTo"));}var b=a.getIntegerByKey("ColumnFrom");if(b>-1){p.setOffsetColumns(b);p.setMaxColumns(a.getIntegerByKey("ColumnTo")-b);}else{p.setMaxColumns(a.getIntegerByKey("ColumnTo"));}}},exportPaging:function(i,p){var r=p.getActiveResultSetContainer();var s=i.putNewStructure("SubSetDescription");var m=r.getMaxRows();var o=r.getOffsetRows();s.putInteger("RowFrom",o);if(m===-1){s.putInteger("RowTo",-1);}else{s.putInteger("RowTo",o+m);}var a=r.getMaxColumns();var b=r.getOffsetColumns();s.putInteger("ColumnFrom",b);if(a===-1){s.putInteger("ColumnTo",-1);}else{s.putInteger("ColumnTo",b+a);}},exportLOVAbstractionLayerSettings:function(i,p){if(p.hasLovManager()){var l=p.getLovManager();var a=i.putNewStructure("LovAbstractionRepo");a.putBoolean("Enabled",l.isLovAbstractionEnabled());a.putBoolean("Measures",l.isIncludeMeasures());a.putBoolean("AutoVhReadModeConfig",l.isAutomaticValueHelpReadModeConfigurationEnabled());a.putBoolean("AutoVhDrillLevelConfig",l.isAutomaticValueHelpDrillLevelConfigurationEnabled());a.putBoolean("IgnoreMultipleDrillsInVh",l.isIgnoreMultipleDrillsInValueHelp());a.putBoolean("RestoreSettingsAfterImplicitSubmit",l.isRestoreSettingsAfterImplicitSubmit());}},importLOVAbstractionLayerSettings:function(i,p){var l=i.getStructureByKey("LovAbstractionRepo");if(f.notNull(l)){var a=p.getLovManager();a.setLovAbstractionEnabled(l.getBooleanByKeyExt("Enabled",false),true);a.setIncludeMeasures(l.getBooleanByKeyExt("Measures",false));a.setAutomaticValueHelpReadModeConfigurationEnabled(l.getBooleanByKeyExt("AutoVhReadModeConfig",true));a.setAutomaticValueHelpDrillLevelConfigurationEnabled(l.getBooleanByKeyExt("AutoVhReadModeConfig",true));a.setIgnoreMultipleDrillsInValueHelp(l.getBooleanByKeyExt("IgnoreMultipleDrillsInVh",false));a.setRestoreSettingsAfterImplicitSubmit(l.getBooleanByKeyExt("RestoreSettingsAfterImplicitSubmit",false));}else if(p.hasLovManager()){p.getLovManager().setLovAbstractionEnabled(false,true);}}};f.QInARepoUtils={importLayeredFilters:function(a,l,b){var s=b.size();for(var i=0;i<s;i++){var c=b.getStructureAt(i);var d=c.getStringByKey("Name");var e=f.QFilterExpression.create(l,l);a.importFilterExpression(e,c,l,l);l.linkFilter(d,e);}},importCacheKey:function(i){var s=i.getStringByKey("System");var p=i.getStringByKey("Providers");var c=i.getStringByKey("Cube");var a=i.getStringByKey("FieldName");var d=i.getStringByKey("DimensionName");var v=i.getStringByKey("ValidationHash");var b=i.getStringByKey("DimensionGroupNames");return f.QFactory.createCacheKey(null,s,c,f.ProviderType.getAll().getByKey(p),a,d,v,b);},importValueByType:function(i,a,p,v){return f.QInARepoUtils._importValueInternal(i,null,a,p,v,null,true);},importSupplementsAndValue:function(a,v,b,p,c,d){f.QInARepoUtils.importValue(a,v,b,p,c,d);var s=b.getListByKey("Supplements");if(f.notNull(s)&&s.hasElements()){var n=s.size();for(var i=0;i<n;i++){var e=s.getStructureAt(i);var k=e.getByKey("Key");var g=e.getByKey("Value");var h=f.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(k.getString());var j=f.QInARepoUtils.correctRemovingUnwantedBackslashAndQuotes(g.getString());v.addSupplementValue(h,j);}}},correctRemovingUnwantedBackslashAndQuotes:function(j){var c=j;while(f.QInARepoUtils.containsEscapedQuote(c)){c=f.XStringUtils.stripChars(c,1);}return c;},containsEscapedQuote:function(j){return f.XStringUtils.isNotNullAndNotEmpty(j)&&(f.XString.getCharAt(j,0)===92||f.XString.getCharAt(j,0)===34)&&(f.XString.getCharAt(j,f.XString.size(j)-1)===92||f.XString.getCharAt(j,f.XString.size(j)-1)===34);},importValue:function(i,v,a,p,b,c){f.QInARepoUtils._importValueInternal(i,v,a,p,b,c,false);},getDouble:function(i,p){var d;var a=i.getByKey(p);if(a.isString()){var s=a.getString();d=f.XDouble.convertFromString(s);}else if(a.isDouble()){d=a.getDouble();}else if(a.isInteger()){d=a.getInteger();}else{d=0.0;}return d;},_importValueInternal:function(i,v,a,p,b,c,r){var u=i.capabilities.supportsSapDate();var d=f.PrUtils.getBooleanValueProperty(a,"FieldLiteralValue",false);var e=p;if(f.isNull(e)){e="Value";}var g=b;if(f.isNull(g)){var h=a.getStringByKey(f.XStringUtils.concatenate2(e,"Type"));g=f.QInAConverter.lookupValueType(h);u=false;}var j;var s;if(g===f.XValueType.STRING){s=a.getStringByKey(e);if(r){return f.XStringValue.create(s);}if(f.isNull(c)||!d){v.setString(s);}else{var k=c.getDimension();var l=k.getDimensionMember(s);if(k.isStructure()&&f.notNull(l)){v.setDimensionMember(l);}else{j=c.createFieldLiteralValue();j.setString(s);v.setFieldValue(j);}}}else if(g===f.XValueType.DOUBLE||g===f.XValueType.DECIMAL_FLOAT){var m=f.QInARepoUtils.getDouble(a,e);if(r){return f.XDoubleValue.create(m);}if(f.isNull(c)||!d){v.setDouble(m);}else{j=c.createFieldLiteralValue();j.setDouble(m);v.setFieldValue(j);}}else if(g===f.XValueType.INTEGER){var n=a.getIntegerByKey(e);if(r){return f.XIntegerValue.create(n);}if(f.isNull(c)||!d){v.setInteger(n);}else{j=c.createFieldLiteralValue();j.setInteger(n);v.setFieldValue(j);}}else if(g===f.XValueType.BOOLEAN){var o=a.getBooleanByKey(e);if(r){return f.XBooleanValue.create(o);}v.setBoolean(o);}else if(g===f.XValueType.LONG){var q=f.PrUtils.getLongValueProperty(a,e,0);if(r){return f.XLongValue.create(q);}if(f.isNull(c)||!d){v.setLong(q);}else{j=c.createFieldLiteralValue();j.setLong(q);v.setFieldValue(j);}}else if(g===f.XValueType.DATE){s=a.getStringByKey(e);var t=f.QInARepoUtils.createDate(s);if(r){return t;}if(f.isNull(c)||!d){v.setDate(t);}else{j=c.createFieldLiteralValue();j.setDate(t);v.setFieldValue(j);}}else if(g===f.XValueType.TIME){s=a.getStringByKey(e);var w=f.XTime.createTimeFromStringWithFlag(s,u);if(r){return w;}v.setTime(w);}else if(g===f.XValueType.DATE_TIME){s=a.getStringByKey(e);var x=f.XDateTime.createDateTimeFromStringWithFlag(s,u);if(r){return x;}if(f.isNull(c)||!d){v.setDateTime(x);}else{j=c.createFieldLiteralValue();j.setDate(x);v.setFieldValue(j);}}else if(g.isSpatial()){s=a.getStringByKey(e);var y=f.XGeometryValue.createGeometryValueWithWkt(s);if(r){return y;}v.setValue(y);if(i.capabilities.supportsSpatialFilterSrid()&&a.containsKey("SRID")){v.getGeometry().setSrid(f.XIntegerValue.create(a.getIntegerByKey("SRID")));}}else if(g===f.XValueType.UNSUPPORTED){return null;}else if(g===f.XValueType.VARIABLE||g===f.XValueType.CURRENT_MEMBER){if(!r){v.setFilterValueType(g);}return null;}else{i.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Unsupported value type '",g.getName(),"'"));return null;}return null;},importSupplements:function(a,v,s,p,b){if(a.capabilities.supportsSupplements()&&f.notNull(p)&&f.XCollectionUtils.hasElements(b)){var c=s.getListByKey(p);if(f.notNull(c)){var d=c.size();var e=b.size();if(d===e){for(var i=0;i<d;i++){v.addSupplementValue(b.get(i).getName(),c.getStringAt(i));}}else{a.addWarning(f.ErrorCodes.INVALID_STATE,"InA protocol error: Supplement sizes of values and field names do not match.");}}}},createDate:function(d){return f.XDate.createDateSafe(d);},importLinkPart:function(c,s){var a=s.getStringByKey("System");var d=s.getStringByKey("DataSource");var b=s.getStringByKey("FieldName");var e=s.getStringByKey("DimensionName");var h=s.getStringByKey("HierarchyName");var g=s.getStringByKey("HierarchyId");var v=s.getStringByKey("ValidationHash");var q=s.getStringByKey("QueryManagerKey");var i=s.getBooleanByKeyExt("IsIncludeHierarchyNodeChildren",false);var j=f.QFactory.createCacheKeyWithDataSource(c,a,d,null,b,e,v,null);var k=f.QFactory.createDimensionLinkPart(c,j,h,q);k.setHierId(g);k.setIncludeHierarchyNodeChildren(i);return k;},exportLayeredFilters:function(e,l){var i=f.PrFactory.createList();var a=l.getLinkedFilters();var b=a.getKeysAsIteratorOfString();while(b.hasNext()){var c=b.next();var n=l.getLinkedFilter(c);if(f.QInARepoUtils.isValidFilterExpressionForRepository(n)){var d=e.exportFilterExpression(n);d.putString("Name",c);i.add(d);}}return i;},isValidFilterExpressionForRepository:function(a){return f.notNull(a)&&!a.isReleased()&&a.getFilterRootElement()!==null&&!a.getFilterRootElement().isReleased();},exportCacheKey:function(c){var i=f.PrFactory.createStructure();i.putString("System",c.getSystemName());i.putString("Providers",c.getProviderType().getName());i.putString("Cube",c.getDataSourceHashKey());i.putString("FieldName",c.getKey1());i.putString("DimensionName",c.getKey2());i.putString("ValidationHash",c.getValidationHash());i.putString("DimensionGroupNames",c.getDimensionGroupNames());return i;},extendStructureWithTagging:function(e,m,s){var t=m.getTagging();if(f.XCollectionUtils.hasElements(t)){var k=t.getKeysAsReadOnlyListOfString();var c=s.putNewList("ComponentTags");for(var i=0;i<k.size();i++){var a=k.get(i);var b=t.getByKey(a);var n=f.PrFactory.createStructure();c.add(n);n.putString("KEY",a);if(f.isNull(b)){n.putNull("VALUE");}else{n.putString("VALUE",b);}}}return s;},setDateIfNotNull:function(e,s,p,d){if(f.notNull(d)){s.putString(p,d.toIsoFormat());}},setNameIfNotNull:function(s,n,a){if(f.notNull(a)){s.putString(n,a.getName());}},setIntegerIfNotNull:function(s,n,v){if(f.notNull(v)){s.putInteger(n,v.getInteger());}},addKeyRefStructure:function(e,m,i,q){var k=i.putNewStructure("KeyRef");if(!e.getOriginalMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)||f.isNull(q)||q.getClientQueryObjectStorageName()===null||!f.XString.isEqual(m.getStorageName(),q.getClientQueryObjectStorageName())){k.putString("StorageName",m.getStorageName());}k.putString("GroupName",m.getStorageGroupName());k.putString("ObjectName",m.getStorageObjectName());var o=m.getComponentType();var c=f.QInAConverter.lookupComponentTypeInA(o);if(f.notNull(c)){i.putString("CType",c);}},exportValue:function(e,p,i,v,a){f.QInARepoUtils.exportFieldValue(e,p,i,null,v,a);},exportFieldValue:function(e,p,i,a,v,b){var c=p;if(f.isNull(c)){c="Value";}var d=b;if(f.isNull(d)){d=v.getValueType();var g=f.QInAConverter.lookupValueTypeInA(d);i.putString(f.XStringUtils.concatenate2(c,"Type"),g);}if(d===f.XValueType.STRING){var s=v.getString();i.putString(c,s);}else if(d===f.XValueType.INTEGER){i.putInteger(c,v.getInteger());}else if(d===f.XValueType.LONG){i.putLong(c,v.getLong());}else if(d===f.XValueType.DOUBLE||d===f.XValueType.DECIMAL_FLOAT){i.putDouble(c,v.getDouble());}else if(d===f.XValueType.BOOLEAN){i.putBoolean(c,v.getBoolean());}else if(d===f.XValueType.DATE){f.QInARepoUtils.setDateIfNotNull(e,i,c,v.getDate());}else if(d===f.XValueType.TIME){f.QInARepoUtils.setDateIfNotNull(e,i,c,v.getTime());}else if(d===f.XValueType.DATE_TIME){f.QInARepoUtils.setDateIfNotNull(e,i,c,v.getDateTime());}if(f.notNull(d)&&d.isSpatial()){var h=v.getGeometry();i.putString(c,h.toWKT());var j=h.getSrid();if(e.capabilities.supportsSpatialFilterSrid()&&f.notNull(j)){i.putInteger("SRID",j.getInteger());}}if(f.notNull(a)){i.putBoolean("FieldLiteralValue",true);}},exportSupplementsAndValue:function(e,p,i,a,v,b){f.QInARepoUtils.exportFieldValue(e,p,i,a,v,b);var s=v.getSupplementValues();if(f.XCollectionUtils.hasElements(s)){var c=i.putNewList("Supplements");var n=s.size();for(var j=0;j<n;j++){var d=c.addNewStructure();var g=s.get(j);d.putString("Key",g.getKey().toString());d.putString("Value",g.getValue().toString());}}},exportFilterValue:function(e,p,i,v,a){if(a===f.XValueType.VARIABLE){var b=v.getVariableValue();if(f.notNull(b)){i.putString(p,b.getName());if(f.XString.isEqual(p,"Low")){i.putString("LowIs","Variable");}else if(f.XString.isEqual(p,"High")){i.putString("HighIs","Variable");}}}else{f.QInARepoUtils.exportValue(e,p,i,v,a);}},setDate:function(e,s,p,d){if(f.notNull(d)){s.putString(p,d.toIsoFormat());}},exportLinkPart:function(e,s,l){s.putString("System",l.getSystemName());s.putString("DataSource",l.getCubeName());s.putString("DimensionName",l.getDimensionName());s.putString("FieldName",l.getFieldName());s.putStringNotNullAndNotEmpty("QueryManagerKey",l.getQueryManagerKey());if(l.getHierarchyName()!==null){s.putString("HierarchyName",l.getHierarchyName());}if(l.getHierId()!==null){s.putString("HierarchyId",l.getHierId());}if(l.getFieldKey().getValidationHash()!==null){s.putString("ValidationHash",l.getFieldKey().getValidationHash());}if(e.getSession().hasFeature(f.FeatureToggleOlap.LOV_BASED_FILTER_ACROSS_MODELS)){s.putBoolean("IsIncludeHierarchyNodeChildren",l.isIncludeHierarchyNodeChildren());}}};f.QInAComponentWithList=function(){};f.QInAComponentWithList.prototype=new f.QInAComponent();f.QInAComponentWithList.prototype._ff_c="QInAComponentWithList";f.QInAComponentWithList.prototype.importComponent=function(i,a,m,p,c){var t=this.getTagName();var b=null;if(f.isNull(t)){b=a;}else{if(f.notNull(a)){var d=a;b=d.getListByKey(t);}}return this.importComponentWithList(i,b,m,p,c);};f.QInAComponentWithList.prototype.exportComponent=function(e,m,i,a){var b=null;if(f.notNull(m)){b=this.exportComponentWithList(e,m,a);var t=this.getTagName();if(f.notNull(t)&&f.notNull(b)){var c=i;if(f.isNull(c)){c=f.PrFactory.createStructure();}c.put(t,b);return c;}}return b;};f.QInAComponentWithStructure=function(){};f.QInAComponentWithStructure.prototype=new f.QInAComponent();f.QInAComponentWithStructure.prototype._ff_c="QInAComponentWithStructure";f.QInAComponentWithStructure.prototype.importComponent=function(i,a,m,p,c){var b=a;var t=this.getTagName();if(f.notNull(t)&&f.notNull(b)){b=b.getStructureByKey(t);}var d=m;if(f.isNull(m)){var o=null;var e=null;if(f.notNull(c)){o=c.getOlapEnv();e=c.getApplication();}if(f.isNull(e)){e=i.getApplication();}if(f.notNull(b)){var g=b.getStructureByKey("KeyRef");if(f.notNull(g)&&f.notNull(c)){return this.getSharedObjectFromKeyRef(p,c,g);}}d=this.newModelComponent(e,o,p,c);if(f.notNull(d)&&!i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){d.stopEventing();}}var r=this.importComponentWithStructure(i,b,d,p,c);f.QInAImportUtil.importComponentTagging(i,b,r);this.importChangedProperties(d,b);if(f.isNull(m)&&f.notNull(d)&&!i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){d.resumeEventing();}return r;};f.QInAComponentWithStructure.prototype.importChangedProperties=function(m,a){if(f.notNull(a)&&f.notNull(m)){var l=a.getListByKey("ChangedProperties");if(f.notNull(l)&&l.size()>0){var c=f.XHashSetOfString.create();for(var i=0;i<l.size();i++){c.add(l.getStringAt(i));}m.setChangedProperties(c);}}};f.QInAComponentWithStructure.prototype.getSharedObjectFromKeyRef=function(p,c,i){var k;var s=i.getStringByKey("StorageName");if(f.notNull(p)&&p.getQueryManager()!==null&&p.getQueryManager().getClientQueryObjectStorageName()!==null){k=f.QFactory.createKeyRef(p.getQueryManager().getClientQueryObjectStorageName(),i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"));}else{k=f.QFactory.createKeyRef(s,i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"));}var a=null;if(f.XString.isEqual(s,f.KeyRefConstants.MAIN_STORAGE)&&p.getKeyRefStorage()!==null){a=p.getKeyRefStorage().get(s,i.getStringByKey("GroupName"),i.getStringByKey("ObjectName"));}else{a=c.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectByKeyRef(k);}return a;};f.QInAComponentWithStructure.prototype.newModelComponent=function(a,o,p,c){return null;};f.QInAComponentWithStructure.prototype.exportComponent=function(e,m,i,a){var b=null;if(f.notNull(m)){var t=this.getTagName();if(f.isNull(t)){b=i;}if(f.isNull(b)){b=f.PrFactory.createStructure();}var c=this.exportKeyReference(e,m,b);if(!c){b=this.exportComponentWithStructure(e,m,b,a);if(f.notNull(b)){b=f.QInAExportUtil.extendStructure(e,m,b);b=this.extendCustom(e,m,b);}if(f.notNull(t)){if(f.notNull(b)){var d=i;if(f.isNull(d)){d=f.PrFactory.createStructure();}d.put(t,b);b=d;}}}}return b;};f.QInAComponentWithStructure.prototype.extendCustom=function(e,m,i){return i;};f.QInAComponentWithStructure.prototype.exportKeyReference=function(e,m,i){return false;};f.QInARepoFilterCartesianListLegacy=function(){};f.QInARepoFilterCartesianListLegacy.prototype=new f.QInAComponent();f.QInARepoFilterCartesianListLegacy.prototype._ff_c="QInARepoFilterCartesianListLegacy";f.QInARepoFilterCartesianListLegacy.prototype.getComponentType=function(){return f.FilterComponentType.CARTESIAN_LIST;};f.QInARepoFilterCartesianListLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterCartesianListLegacy.prototype.importComponent=function(a,b,m,p,c){var d=b;var e=m;var g=p;var h=c.getFieldAccessorSingle();var j=d.getStringByKey("FieldName");var k=e;if(f.notNull(j)){var l=h.getFieldByName(j);if(f.isNull(l)){var q=g.getQueryModel();if(f.notNull(q)){var n=q.getDimensionByNameFromExistingMetadata(j);if(f.notNull(n)){var o=d.getStructureByKey("Hierarchy");if(f.isNull(o)){l=n.getFlatKeyField();}else{l=n.getHierarchyKeyField();}}}}if(f.notNull(l)){var r=d.getStructureByKey("Hierarchy");var s=null;var t=null;var u=null;if(f.notNull(r)){s=r.getStringByKey("Name");if(a.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&a.isAbap(l)){var v=r.getStringByKey("DueDate");if(f.notNull(v)){t=f.XDate.createDateFromSAPFormat(v);}u=r.getStringByKey("Version");}}if(f.isNull(k)){k=f.QFilterCartesianList._createMd(c,g,l.getMetadata(),s);k.setHierarchyInfo(s,t,u);}else{k.clear();}var w=d.getBooleanByKeyExt("ConvertToFlatSelection",false);k.setConvertToFlatFilter(w);var x=d.getListByKey("SupplementsFieldNames");if(f.notNull(x)){var z=x.size();for(var y=0;y<z;y++){var A=x.getStringAt(y);var B=h.getFieldByName(A);k.addSupplementField(B);}}var C=d.getListByKey("Elements");if(f.notNull(C)){var D=C.size();for(var i=0;i<D;i++){var E=C.getStructureAt(i);var F=a.importFilterOperation(E,k,c);k.add(F);}}}}return k;};f.QInARepoFilterCartesianListLegacy.prototype.exportComponent=f.noSupport;f.InARepoStructureMemberLazyLoader=function(){};f.InARepoStructureMemberLazyLoader.prototype=new f.XObjectExt();f.InARepoStructureMemberLazyLoader.prototype._ff_c="InARepoStructureMemberLazyLoader";f.InARepoStructureMemberLazyLoader.create=function(d,m,a){if(f.isNull(m)){throw f.XException.createIllegalArgumentException("InARepoStrucutreMemberLazyLoader - QModelFormat mode is null");}if(!m.isTypeOf(f.QModelFormat.INA_REPOSITORY)){throw f.XException.createIllegalArgumentException(f.XStringUtils.concatenate2("InARepoStrucutreMemberLazyLoader - Does not support QModelFormat:",m.getName()));}var l=new f.InARepoStructureMemberLazyLoader();l.m_dimension=d;l.m_importer=f.QInAImportFactory.createWithQueryManagerCapabilities(d.getApplication(),m,d.getQueryManager());l.m_modelFormat=m;l.m_inaStructure=a.cloneExt(null);l.m_repoMetadataMap=f.XHashMapByString.create();l.m_memberNameList=f.XListOfString.create();var b=l.m_inaStructure.getListByKey("MembersRepo");if(f.notNull(b)){for(var i=0;i<b.size();i++){var c=b.get(i).asStructure();l.m_repoMetadataMap.put(c.getStringByKey("Name"),c);l.m_memberNameList.add(c.getStringByKey("Name"));}}return l;};f.InARepoStructureMemberLazyLoader.prototype.m_dimension=null;f.InARepoStructureMemberLazyLoader.prototype.m_importer=null;f.InARepoStructureMemberLazyLoader.prototype.m_modelFormat=null;f.InARepoStructureMemberLazyLoader.prototype.m_repoMetadataMap=null;f.InARepoStructureMemberLazyLoader.prototype.m_memberNameList=null;f.InARepoStructureMemberLazyLoader.prototype.m_inaStructure=null;f.InARepoStructureMemberLazyLoader.prototype.loadStructureMember=function(m){if(this.m_repoMetadataMap.getByKey(m)!==null){var a=this.m_memberNameList.getIndex(m);if(a>=0){var i=f.PrFactory.createStructure();var b=this.m_inaStructure.getKeysAsIteratorOfString();while(b.hasNext()){var k=b.next();i.put(k,this.m_inaStructure.getByKey(k));}var c=i.putNewList("MembersRepo");c.add(this.m_repoMetadataMap.getByKey(m));this.m_repoMetadataMap.remove(m);var d=this.m_inaStructure.getListByKey("MembersRepo");d.removeAt(a);this.m_memberNameList.removeAt(a);this.loadStructureMemberStructure(i);}}};f.InARepoStructureMemberLazyLoader.prototype.loadAllStructureMembers=function(){var i=this.m_inaStructure.getListByKey("MembersRepo");if(f.notNull(i)&&i.size()>0){var a=f.PrFactory.createStructure();var b=this.m_inaStructure.getKeysAsIteratorOfString();while(b.hasNext()){var k=b.next();a.put(k,this.m_inaStructure.getByKey(k));}var m=a.putNewList("MembersRepo");m.addAll(i);this.m_repoMetadataMap.clear();this.m_memberNameList.clear();i.clear();this.loadStructureMemberStructure(a);}};f.InARepoStructureMemberLazyLoader.prototype.loadStructureMemberStructure=function(i){this.m_dimension.getQueryManager().stopEventing();var o=this.m_dimension.getQueryModel().isBasicMeasureAggregationExportedInRepo();if(!o){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(true);}var a=this.m_dimension.getQueryModel().isBasicMeasureSettingsExportedInRepo();if(!a){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(true);}this.m_importer.importComponent(f.OlapComponentType.MEMBERS,i,this.m_dimension,null,this.m_dimension.getContext());if(!o){this.m_dimension.getQueryModel().setBasicMeasureAggregationExportForRepo(false);}if(!a){this.m_dimension.getQueryModel().setBasicMeasureSettingsExportedInRepo(false);}this.m_dimension.getQueryManager().resumeEventing();};f.InARepoStructureMemberLazyLoader.prototype.copyStructureMemberLazyLoader=function(d){return f.InARepoStructureMemberLazyLoader.create(d,this.m_modelFormat,this.m_inaStructure);};f.QInARepoVariableManager=function(){};f.QInARepoVariableManager.prototype=new f.QInAComponentWithList();f.QInARepoVariableManager.prototype._ff_c="QInARepoVariableManager";f.QInARepoVariableManager.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_MANAGER;};f.QInARepoVariableManager.prototype.getTagName=function(){return"Variables";};f.QInARepoVariableManager.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVariableManager.prototype.importComponentWithList=function(i,a,m,p,c){var v=m;if(f.notNull(a)){var l=a.size();for(var b=0;b<l;b++){var d=a.getStructureAt(b);var e=d.getStringByKey("Name");var g=v.getVariableBaseByName(e);if(f.notNull(g)){var h=g.getVariableType();if(h.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){i.importSimpleTypeVariable(d,g,c);}else if(h.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){var j=g;i.importDimensionMemberVariable(d,j,null,j);}else if(h.isTypeOf(f.VariableType.OPTION_LIST_VARIABLE)){i.importOptionListVariable(d,g,c);}else{i.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate5("The variable '",e,"' of variable type '",h.getName(),"' was not imported correctly"));}}else{i.addWarning(f.ErrorCodes.ET_ELEMENT_NOT_FOUND,f.XStringUtils.concatenate3("The variable '",e,"' was not found"));}}}return v;};f.QInARepoVariableManager.prototype.exportComponentWithList=function(e,m,a){var o;var v=m;var q=v.getQueryModel();if(f.notNull(q)&&!q.isExportingVariables()&&!q.hasProcessingStep()){o=null;}else{o=null;var b=v.getVariables();if(f.XCollectionUtils.hasElements(b)){var c=f.PrFactory.createList();var l=b.size();for(var i=0;i<l;i++){var d=b.get(i);var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getModCounter()>0;if(s){var g=e.exportVariable(d,null);c.add(g);}}o=c;}}return o;};f.QInARepository=function(){};f.QInARepository.prototype=new f.QInAComponentWithStructure();f.QInARepository.prototype._ff_c="QInARepository";f.QInARepository.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepository.prototype.isMatching=function(i){var a=f.QInAComponentWithStructure.prototype.isMatching.call(this,i);if(a&&f.notNull(i)){var b=i;var t=this.getTagName();if(f.isNull(t)){if(b.getStringByKey("CType")===null){a=false;}}else{a=b.containsKey(t);}}return a;};f.QInARepository.prototype.extendCustom=function(e,m,i){var o=this.getComponentType();var c=f.QInAConverter.lookupComponentTypeInA(o);if(f.isNull(c)){throw f.XException.createRuntimeException("ctype not found");}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||i.hasElements()){i.putString("CType",c);var a=m.getChangedProperties();if(f.XCollectionUtils.hasElements(a)&&m.getSession().hasFeature(f.FeatureToggleOlap.INA_REPOSITORY_DELTA)){var b=f.PrFactory.createList();var l=a.getValuesAsReadOnlyListOfString();b.addAllStrings(l);i.put("ChangedProperties",b);}}return i;};f.QInARepository.prototype.exportKeyReference=function(e,m,i){var d=false;var a=m;var c=a.getContext();var q=null;var o=null;if(f.notNull(c)){q=c.getQueryManager();o=c.getOlapEnv();}if(f.isNull(q)||q.isKeyRefSerializationEnabled()){if(f.notNull(o)&&o.getClientQueryObjectManager().getClientQueryObjectByKeyRef(m)!==null){f.QInARepoUtils.addKeyRefStructure(e,m,i,q);d=true;}else if(f.isNull(o)&&m.getStorageName()!==null&&!f.XString.isEqual(m.getStorageName(),f.KeyRefConstants.MAIN_STORAGE)){f.QInARepoUtils.addKeyRefStructure(e,m,i,q);d=true;}}return d;};f.QInARepository.prototype.exportComponentWithStructure=function(e,m,i,a){return i;};f.QInARepository.prototype.removeModelElementsNotInInA=function(a,b,c,l){if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA){var n=this.getNamesOfElementsInList(b);for(var i=0;i<l.size();i++){var m=l.get(i);if(!n.contains(m.getName())){c.removeElement(m);}}}};f.QInARepository.prototype.getNamesOfElementsInList=function(i){var s=i.size();var n=f.XListOfString.create();for(var a=0;a<s;a++){var b=i.getStructureAt(a);n.add(b.getStringByKey("Name"));}return n;};f.QInARepoAttributeLegacy=function(){};f.QInARepoAttributeLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoAttributeLegacy.prototype._ff_c="QInARepoAttributeLegacy";f.QInARepoAttributeLegacy.prototype.getComponentType=function(){return f.OlapComponentType.ATTRIBUTE;};f.QInARepoAttributeLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoAttributeLegacy.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=p;var n=b.getStringByKey("Name");var e=d.getAttributeByName(n);if(f.notNull(e)){var g=b.getListByKey("ResultSetFields");if(f.notNull(g)){var r=e.getResultSetFields();r.clear();var l=g.size();for(var i=0;i<l;i++){var h=e.getFieldByName(g.getStringAt(i));if(f.notNull(h)){r.add(h);}}}}return e;};f.QInARepoAttributeLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoAxesSettingsLegacy=function(){};f.QInARepoAxesSettingsLegacy.prototype=new f.QInAComponentWithList();f.QInARepoAxesSettingsLegacy.prototype._ff_c="QInARepoAxesSettingsLegacy";f.QInARepoAxesSettingsLegacy.prototype.getComponentType=function(){return f.OlapComponentType.AXES_SETTINGS;};f.QInARepoAxesSettingsLegacy.prototype.getTagName=function(){return"Axes";};f.QInARepoAxesSettingsLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoAxesSettingsLegacy.prototype.importComponentWithList=function(a,b,m,p,c){if(f.notNull(b)){var q=c.getQueryModel();if(a.capabilities.supportsZeroSuppression()||a.capabilities.supportsNullZeroSuppression()){var d=f.AxisType.getAll();var e=d.size();for(var k=0;k<e;k++){var g=q.getAxisBase(d.get(k));if(f.notNull(g)){g.setSupportsZeroSuppression(true);}}}var l=b.size();for(var i=0;i<l;i++){a.importAxis(b.getStructureAt(i),null,c);}}return null;};f.QInARepoAxesSettingsLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoAxisLegacy=function(){};f.QInARepoAxisLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoAxisLegacy.prototype._ff_c="QInARepoAxisLegacy";f.QInARepoAxisLegacy.prototype.getComponentType=function(){return f.OlapComponentType.AXIS;};f.QInARepoAxisLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoAxisLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=i.capabilities.supportsZeroSuppression();var b;var d=a.getStringByKey("Axis");if(f.isNull(d)){b=f.QInAConverter.lookupAxisTypeInt(a.getIntegerByKey("Type"));}else{b=f.QInAConverter.lookupAxisType(d);}var q=c.getQueryModel();var e=q.getAxisBase(b);if(f.notNull(e)){if(s){var v=a.getIntegerByKey("ZeroSuppressionType");var z=f.QInAConverter.lookupSuppressionType(v);e.setZeroSuppressionType(z);e.setDefaultZeroSuppression(z);}i.importTotals(a,e.getResultStructureControllerBase(),c);}return e;};f.QInARepoAxisLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoConditionManagerLegacy=function(){};f.QInARepoConditionManagerLegacy.prototype=new f.QInAComponentWithList();f.QInARepoConditionManagerLegacy.prototype._ff_c="QInARepoConditionManagerLegacy";f.QInARepoConditionManagerLegacy.prototype.getComponentType=function(){return f.OlapComponentType.CONDITIONS_MANAGER;};f.QInARepoConditionManagerLegacy.prototype.getTagName=function(){return"Conditions";};f.QInARepoConditionManagerLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoConditionManagerLegacy.prototype.importComponentWithList=function(a,b,m,p,c){var d=m;if(f.notNull(d)){d.clear();if(f.notNull(b)){var q=c.getQueryModel();var l=b.size();for(var i=0;i<l;i++){var e=b.getStructureAt(i);var g=a.importCondition(q,e,null);d.add(g);}}}return d;};f.QInARepoConditionManagerLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoConditionsConditionLegacy=function(){};f.QInARepoConditionsConditionLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoConditionsConditionLegacy.prototype._ff_c="QInARepoConditionsConditionLegacy";f.QInARepoConditionsConditionLegacy.prototype.getComponentType=function(){return f.OlapComponentType.CONDITION;};f.QInARepoConditionsConditionLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoConditionsConditionLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.isNull(a)){return m;}var n;var b=a.getStringByKey("Name");if(f.isNull(m)){if(i.getMode()===f.QModelFormat.INA_REPOSITORY){var d=a.getBooleanByKeyExt("IsBackendCondition",true);n=f.QCondition.create(c,p,b,d);}else{n=f.QCondition.create(c,p,b,true);}}else{n=m;n.setConditionName(b);}n.setActive(a.getBooleanByKey("Active"));n.setUsedState(a.getStringByKey("IsUsed"));n.setDescription(a.getStringByKey("Description"));var o=a.getStringByKey("OnDisabled");n.setApplyConditionAfterVisibilityFilter(a.getBooleanByKeyExt("AfterVisibilityFilter",false));if(f.notNull(o)){if(f.XString.isEqual(o,"Error")){n.setOnDisabledToWarning(false);}}var e=a.getStringByKey("EvaluateOnDimensions");var g=f.ConditionDimensionEvaluationType.lookupName(e);if(f.notNull(g)){n.setDimensionEvaluationType(g);}var q=c.getQueryModel();var h=a.getListByKey("EvaluateOnDimensionsList");var j;var k;if(!f.PrUtils.isListEmpty(h)&&f.notNull(q)){j=h.size();for(k=0;k<j;k++){var l=h.getStringAt(k);if(f.notNull(l)){var r=q.getDimensionByNameFromExistingMetadata(l);if(f.notNull(r)){n.addEvaluationDimension(r);}}}}var s=a.getListByKey("Threshold");if(!f.PrUtils.isListEmpty(s)){var t=s.size();for(var u=0;u<t;u++){var v=s.getStructureAt(u);if(f.notNull(v)){n.addThreshold(i.importConditionThreshold(q,v,null,n));}}}n.setBreakGroup(a.getBooleanByKeyExt("BreakGroup",false));var w=a.getListByKey("BreakGroupList");if(!f.PrUtils.isListEmpty(w)&&f.notNull(q)){j=w.size();for(k=0;k<j;k++){var x=w.getStringAt(k);if(f.notNull(x)){var y=q.getDimensionByNameFromExistingMetadata(x);if(f.notNull(y)){n.addBreakGroupDimension(y);}}}}return n;};f.QInARepoConditionsConditionLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoCurrencyTranslationManagerLegacy=function(){};f.QInARepoCurrencyTranslationManagerLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoCurrencyTranslationManagerLegacy.prototype._ff_c="QInARepoCurrencyTranslationManagerLegacy";f.QInARepoCurrencyTranslationManagerLegacy.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER;};f.QInARepoCurrencyTranslationManagerLegacy.prototype.getTagName=function(){return"CurrencyTranslation";};f.QInARepoCurrencyTranslationManagerLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoCurrencyTranslationManagerLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.notNull(b)&&f.notNull(a)){var d=b.getCurrencyTranslationDetails();if(f.notNull(d)){d.setCurrencyTranslationName(a.getStringByKey("Name"));d.setCurrencyTranslationOperation(f.CurrencyTranslationOperation.lookup(a.getStringByKey("Operation")));d.setCurrencyTranslationTarget(a.getStringByKey("Target"));}}return b;};f.QInARepoCurrencyTranslationManagerLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoCustomHierarchyDefinitionLegacy=function(){};f.QInARepoCustomHierarchyDefinitionLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoCustomHierarchyDefinitionLegacy.prototype._ff_c="QInARepoCustomHierarchyDefinitionLegacy";f.QInARepoCustomHierarchyDefinitionLegacy.prototype.getComponentType=function(){return f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION;};f.QInARepoCustomHierarchyDefinitionLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoCustomHierarchyDefinitionLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){if(!i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){return null;}var b=f.PrUtils.getListProperty(a,"Dimensions");var d=f.PrUtils.getStructureElement(b,0);if(f.notNull(d)){var s=d.getStringByKey("System");var e=d.getStringByKey("DataSource");var g=d.getStringByKey("Name");var h=d.getStructureByKey("Hierarchy");if(f.notNull(h)&&f.XStringUtils.isNotNullAndNotEmpty(s)&&f.XStringUtils.isNotNullAndNotEmpty(g)){var j=true;var k=i.getApplication();if(f.notNull(k)){var l=k.getSystemLandscape().getSystemDescription(s);j=f.isNull(l)?true:l.getSystemType().isTypeOf(f.SystemType.ABAP);}var n=f.QCustomHierarchyDefinition.createByData(s,e,g,h.getStringByKey("Description"),j);n.setName(h.getStringByKey("Name"));this.addHierarchyNodesFromStructure(n,h.getStructureByKey("Nodes"));return n;}}return null;};f.QInARepoCustomHierarchyDefinitionLegacy.prototype.addHierarchyNodesFromStructure=function(h,n){var a=f.PrUtils.getListProperty(n,"NodeId");var b=f.PrUtils.getListProperty(n,"ParentId");var c=f.PrUtils.getListProperty(n,"NodeName");var d=f.PrUtils.getListProperty(n,"NodeType");var s=f.PrUtils.getListSize(a,0);if(f.PrUtils.isListEmpty(a)||f.PrUtils.isListEmpty(b)||f.PrUtils.isListEmpty(c)||f.PrUtils.isListEmpty(d)||b.size()!==s||c.size()!==s||d.size()!==s){return;}var e=f.XSimpleMap.create();for(var i=0;i<s;i++){var g=a.getIntegerAt(i);var j=c.getStringAt(i);var k=d.getStringAt(i);var l=b.getIntegerAt(i);var p=l===-1?h:e.getByKey(f.XIntegerValue.create(l));if(f.notNull(p)){if(f.XString.isEqual(k,"1HIER_NODE_SIMPLE")){e.put(f.XIntegerValue.create(g),p.addTextNode(j));}else{p.addMemberNode(j);}}}f.XObjectExt.release(e);};f.QInARepoCustomHierarchyDefinitionLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoDataCellsAllLegacy=function(){};f.QInARepoDataCellsAllLegacy.prototype=new f.QInAComponentWithList();f.QInARepoDataCellsAllLegacy.prototype._ff_c="QInARepoDataCellsAllLegacy";f.QInARepoDataCellsAllLegacy.prototype.getComponentType=function(){return f.OlapComponentType.DATA_CELLS;};f.QInARepoDataCellsAllLegacy.prototype.getTagName=function(){return"QueryDataCells";};f.QInARepoDataCellsAllLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoDataCellsAllLegacy.prototype.importComponentWithList=function(a,b,m,p,c){var d=c.getModelCapabilities();var q=c.getQueryModel();if(d.supportsDataCells()&&a.mode!==f.QModelFormat.INA_DATA_REINIT&&q.getQueryManager().getInitSettings().isRequestingDataCells()){var e=q.getQueryDataCellsBase();e.clear();if(f.notNull(b)){for(var i=0;i<b.size();i++){a.importDataCell(b.getStructureAt(i),q);}}}return null;};f.QInARepoDataCellsAllLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoDimensionsAllLegacy=function(){};f.QInARepoDimensionsAllLegacy.prototype=new f.QInAComponentWithList();f.QInARepoDimensionsAllLegacy.prototype._ff_c="QInARepoDimensionsAllLegacy";f.QInARepoDimensionsAllLegacy.exportTechnicalDimension=function(e,q,i,a){if(!e.capabilities.supportsUniversalModel()){return;}var b=q.getQueryCellManager();if(b.isEmpty()){return;}var d=q.getDimensionByName("$$Cells$$");f.QInARepoDimensionsAllLegacy.exportDimension(e,d,i,a);};f.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic=function(e,a,p,u,b){var q=a.getQueryModel();var r=e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA);var o=q.isOptimizedExportModeActive();var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(o&&c.isIgnoredOnOptimizedExport()){continue;}if(r&&!u.contains(c.getName())){continue;}f.QInARepoDimensionsAllLegacy.exportDimension(e,c,p,b);}};f.QInARepoDimensionsAllLegacy.exportAxisDimensions=function(e,a,p,b){var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);f.QInARepoDimensionsAllLegacy.exportDimension(e,c,p,b);}};f.QInARepoDimensionsAllLegacy.exportDimension=function(e,d,i,a){if(!a.contains(d.getName())){a.add(d.getName());i.add(e.exportDimension(d,null));}};f.QInARepoDimensionsAllLegacy.prototype.getComponentType=function(){return f.OlapComponentType.DIMENSIONS;};f.QInARepoDimensionsAllLegacy.prototype.getTagName=function(){return"Dimensions";};f.QInARepoDimensionsAllLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoDimensionsAllLegacy.prototype.importComponentWithList=function(i,a,m,p,c){if(f.notNull(a)){var q=m;var d=q.getDimensionManagerBase();if(i.mode!==f.QModelFormat.INA_DATA_REINIT){var b=q.getFreeAxis();b.addAll(d);}var s=a.size();var e=d.getDimensionReferences();for(var k=0;k<s;k++){var g=a.getStructureAt(k);var h=g.getStringByKey("Name");var j=g.getStringByKey("Axis");var l=null;if(g.containsKey("FieldMappings")){var n=i.importCalculatedDimension(g,q);d.addDimension(n);d.finalizeDimensionMetadataSetup(n);}else if(g.containsKey("CType")&&f.XComponentType.lookupComponentType(g.getStringByKey("CType"))===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var o=i.importFormulaCalculatedDimension(g,q,null);d.addDimension(o);d.finalizeDimensionMetadataSetup(o);}else{if(e.containsKey(h)){var r=f.AxisType.lookup(j);if(i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)||r===f.AxisType.COLUMNS||r===f.AxisType.ROWS){l=d.getDimensionByNameFromExistingMetadata(h);}}i.importDimension(g,q);}if(i.mode!==f.QModelFormat.INA_DATA_REINIT){if(f.isNull(l)){l=d.getDimensionByNameInternal(h);if(f.isNull(l)){continue;}}if(f.isNull(j)){j=g.getStringByKeyExt("AxisDefault","Free");}q.getAxis(f.QInAConverter.lookupAxisType(j)).add(l);}}}return m;};f.QInARepoDimensionsAllLegacy.prototype.exportDimensionIfOnFreeAxis=function(d){var q=d.getQueryModel();var u=f.XHashSetOfString.create();var a=q.getFilter();if(a.isDynamicFilterInitialized()){f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(a.getDynamicFilter(),u);f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(a.getLinkedFilter(f.CalculatedDimensionPrequeryBuilder.FAM_MEASURE_FILTER),u);f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(a.getLinkedFilter(f.CalculatedDimensionPrequeryBuilder.FAM_SECONDARY_MEASURE_FILTER),u);}var i=u.contains(d.getName());if(d.isMeasureStructure()){var e=q.getExceptionManager();var h=f.XCollectionUtils.hasElements(e);return i||h;}return i;};f.QInARepoDimensionsAllLegacy.prototype.exportComponentWithList=function(e,m,a){var i=f.PrFactory.createList();if(e.mode!==f.QModelFormat.INA_VALUE_HELP){var q=m;var c=q.getModelCapabilities();var b=f.XHashSetOfString.create();f.QInARepoDimensionsAllLegacy.exportAxisDimensions(e,q.getAxis(f.AxisType.ROWS),i,b);f.QInARepoDimensionsAllLegacy.exportAxisDimensions(e,q.getAxis(f.AxisType.COLUMNS),i,b);if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var u=f.XHashSetOfString.create();if(e.mode===f.QModelFormat.INA_REPOSITORY_DATA||e.mode===f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){f.DimensionUsageAnalyzer2.setupHeuristic(q,u);}f.QInARepoDimensionsAllLegacy.exportAxisDimensionsWithHeuristic(e,q.getAxis(f.AxisType.FREE),i,u,b);}else if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var d=c.supportsCubeBlendingOutOfContext()&&q.isBlendingModel();var g=q.getDataSource().getType()===f.MetaObjectType.PLANNING&&e.getSession().hasFeature(f.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var h=q.getAxis(f.AxisType.FREE);var s=h.size();var j=e.isAbap(q);for(var k=0;k<s;k++){var l=h.get(k);var n=l.getDimensionType();if(n===f.DimensionType.MEASURE_STRUCTURE||n===f.DimensionType.SECONDARY_STRUCTURE){var o=this.exportDimensionIfOnFreeAxis(l);if(o){f.QInARepoDimensionsAllLegacy.exportDimension(e,l,i,b);}}else if(n===f.DimensionType.ACCOUNT){var p=this.exportDimensionIfOnFreeAxis(l);if(p){f.QInARepoDimensionsAllLegacy.exportDimension(e,l,i,b);}}else if(n.isTypeOf(f.DimensionType.CALCULATED_DIMENSION)||d||(j||g)&&l.isHierarchyActive()){f.QInARepoDimensionsAllLegacy.exportDimension(e,l,i,b);}}f.QInARepoDimensionsAllLegacy.exportTechnicalDimension(e,q,i,b);}}return i;};f.QInARepoDimensionsLegacy=function(){};f.QInARepoDimensionsLegacy.prototype=new f.QInAComponentWithList();f.QInARepoDimensionsLegacy.prototype._ff_c="QInARepoDimensionsLegacy";f.QInARepoDimensionsLegacy.exportTechnicalDimension=function(e,q,i,a){if(!e.capabilities.supportsUniversalModel()){return;}var b=q.getQueryCellManager();if(b.isEmpty()){return;}var d=q.getDimensionByName("$$Cells$$");f.QInARepoDimensionsLegacy.exportDimension(e,d,i,a);};f.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic=function(e,a,p,u,b){var q=a.getQueryModel();var r=e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA);var o=q.isOptimizedExportModeActive();var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(o&&c.isIgnoredOnOptimizedExport()){continue;}if(r&&!u.contains(c.getName())){continue;}f.QInARepoDimensionsLegacy.exportDimension(e,c,p,b);}};f.QInARepoDimensionsLegacy.exportAxisDimensions=function(e,a,p,b){var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(f.QInARepoDimensionsLegacy._isForRendering(e.getMode(),c)){continue;}f.QInARepoDimensionsLegacy.exportDimension(e,c,p,b);}};f.QInARepoDimensionsLegacy._isForRendering=function(e,d){var a=d.getAxisType();return e===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&a!==f.AxisType.ROWS&&a!==f.AxisType.COLUMNS;};f.QInARepoDimensionsLegacy.exportDimension=function(e,d,i,a){if(!a.contains(d.getName())){a.add(d.getName());i.add(e.exportDimension(d,null));}};f.QInARepoDimensionsLegacy.prototype.getComponentType=function(){return f.OlapComponentType.DIMENSIONS;};f.QInARepoDimensionsLegacy.prototype.getTagName=function(){return"Dimensions";};f.QInARepoDimensionsLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoDimensionsLegacy.prototype.importComponentWithList=function(i,a,m,p,c){if(f.isNull(a)){return m;}var q=m;var d=q.getDimensionManagerBase();if(i.mode!==f.QModelFormat.INA_DATA_REINIT){var b=q.getFreeAxis();b.addAll(d);}var s=a.size();var e=d.getDimensionReferences();for(var k=0;k<s;k++){var g=a.getStructureAt(k);var h=g.getStringByKey("Name");var j=g.getStringByKey("Axis");var l=null;if(g.containsKey("FieldMappings")){var n=i.importCalculatedDimension(g,q);d.addDimension(n);d.finalizeDimensionMetadataSetup(n);}else if(g.containsKey("CType")&&f.XComponentType.lookupComponentType(g.getStringByKey("CType"))===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var o=i.importFormulaCalculatedDimension(g,q,null);d.addDimension(o);d.finalizeDimensionMetadataSetup(o);}else{if(e.containsKey(h)){var r=f.AxisType.lookup(j);if(i.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)||r===f.AxisType.COLUMNS||r===f.AxisType.ROWS){l=d.getDimensionByNameFromExistingMetadata(h);}}i.importDimension(g,q);}if(i.mode!==f.QModelFormat.INA_DATA_REINIT){if(f.isNull(l)){l=d.getDimensionByNameInternal(h);if(f.isNull(l)){continue;}}if(f.isNull(j)){j=g.getStringByKeyExt("AxisDefault","Free");}q.getAxis(f.QInAConverter.lookupAxisType(j)).add(l);}}return q;};f.QInARepoDimensionsLegacy.prototype.exportDimensionIfOnFreeAxis=function(d){var q=d.getQueryModel();var u=f.XHashSetOfString.create();if(q.getFilter().isDynamicFilterInitialized()){f.DimensionUsageAnalyzer2.addDimensionsUsedInContainer(q.getFilter().getDynamicFilter(),u);}var i=u.contains(d.getName());if(d.isMeasureStructure()){var e=q.getExceptionManager();var h=f.XCollectionUtils.hasElements(e);return i||h;}return i;};f.QInARepoDimensionsLegacy.prototype.exportComponentWithList=function(e,m,a){var i=f.PrFactory.createList();if(e.mode!==f.QModelFormat.INA_VALUE_HELP){var q=m;var c=q.getModelCapabilities();var b=f.XHashSetOfString.create();f.QInARepoDimensionsLegacy.exportAxisDimensions(e,q.getAxis(f.AxisType.ROWS),i,b);f.QInARepoDimensionsLegacy.exportAxisDimensions(e,q.getAxis(f.AxisType.COLUMNS),i,b);if(e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var u=f.XHashSetOfString.create();if(e.mode===f.QModelFormat.INA_REPOSITORY_DATA||e.mode===f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){f.DimensionUsageAnalyzer2.setupHeuristic(q,u);}f.QInARepoDimensionsLegacy.exportAxisDimensionsWithHeuristic(e,q.getAxis(f.AxisType.FREE),i,u,b);}else if(e.mode.isTypeOf(f.QModelFormat.INA_DATA)){var d=c.supportsCubeBlendingOutOfContext()&&q.isBlendingModel();var g=q.getDataSource().getType()===f.MetaObjectType.PLANNING&&e.getSession().hasFeature(f.FeatureToggleOlap.EXPORT_FREE_AXIS_FOR_PLANNING);var h=q.getAxis(f.AxisType.FREE);var s=h.size();var j=e.isAbap(q);for(var k=0;k<s;k++){var l=h.get(k);var n=l.getDimensionType();if(n===f.DimensionType.MEASURE_STRUCTURE||n===f.DimensionType.SECONDARY_STRUCTURE){var o=this.exportDimensionIfOnFreeAxis(l);if(o){f.QInARepoDimensionsLegacy.exportDimension(e,l,i,b);}}else if(n===f.DimensionType.ACCOUNT){var p=this.exportDimensionIfOnFreeAxis(l);if(p){f.QInARepoDimensionsLegacy.exportDimension(e,l,i,b);}}else if(n.isTypeOf(f.DimensionType.CALCULATED_DIMENSION)||d||(j||g)&&l.isHierarchyActive()){f.QInARepoDimensionsLegacy.exportDimension(e,l,i,b);}}f.QInARepoDimensionsLegacy.exportTechnicalDimension(e,q,i,b);}}return i;};f.QInARepoDrillManagerLegacy=function(){};f.QInARepoDrillManagerLegacy.prototype=new f.QInAComponentWithList();f.QInARepoDrillManagerLegacy.prototype._ff_c="QInARepoDrillManagerLegacy";f.QInARepoDrillManagerLegacy.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_MANAGER;};f.QInARepoDrillManagerLegacy.prototype.getTagName=function(){return"HierarchyNavigations";};f.QInARepoDrillManagerLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoDrillManagerLegacy.prototype.importComponentWithList=function(i,a,m,p,c){var d=m;var s;d.removeAllContextDrillOperations();d.removeZoomDrillOperationsByDimension(null);if(f.notNull(a)){var b=-1;s=a.size();for(var e=0;e<s;e++){var g=a.getStructureAt(e);var z=g.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(z===-1){i.importDrillOperation(g,d,c);}else if(z>-1){var h=this.getZoomDrillPath(i,d,g,c);if(f.XCollectionUtils.hasElements(h)){if(z!==b){d.pushEmptyZoomDrillForDimension(h.get(h.size()-1).getDimension());b=z;}var j=g.getIntegerByKeyExt("DrillOffset",0)>0;d.addZoomDrillPath(h,j);}}}}return m;};f.QInARepoDrillManagerLegacy.prototype.getZoomDrillPath=function(i,d,a,c){var b=f.XList.create();var e=a.getListByKey("DrillContextMembers");if(f.notNull(e)){var s=e.size();for(var g=0;g<s;g++){var h=e.getStructureAt(g);var j=i.importDrillPathElement(h,d,c);b.add(j);}}var k=a.getStringByKey("DrillState");var l=a.getStructureByKey("DrillMember");if(f.isNull(l)||f.isNull(k)){return null;}var m=i.importDrillPathElement(l,d,c);b.add(m);return b;};f.QInARepoDrillManagerLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoDrillPathElementLegacy=function(){};f.QInARepoDrillPathElementLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoDrillPathElementLegacy.prototype._ff_c="QInARepoDrillPathElementLegacy";f.QInARepoDrillPathElementLegacy.prototype.getComponentType=function(){return f.MemberType.DRILL_PATH_ELEMENT;};f.QInARepoDrillPathElementLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoDrillPathElementLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var q=d.getContext().getQueryModel();var b=a.getStringByKey("FieldName");var e=a.getStringByKey("DimensionName");var g;if(f.XStringUtils.isNotNullAndNotEmpty(e)){g=q.getDimensionByNameFromExistingMetadata(e);}else{var h=q.getFieldByNameOrAlias(b);if(f.isNull(h)){g=q.getDimensionByNameFromExistingMetadata(b);if(f.notNull(g)){h=g.getKeyField();b=h.getName();}}else{g=h.getDimension();}}var j=f.QDrillPathElement._create(c);j.setDimension(g);var k=a.getStringByKey("Member");j.setName(k);j.setFieldName(b);return j;};f.QInARepoDrillPathElementLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoExceptionsLegacy=function(){};f.QInARepoExceptionsLegacy.prototype=new f.QInAComponentWithList();f.QInARepoExceptionsLegacy.prototype._ff_c="QInARepoExceptionsLegacy";f.QInARepoExceptionsLegacy.importEvaluates=function(i,m,n,a){var b=i.getListByKey("EvaluateOn");if(f.isNull(b)){return;}var s=b.size();var q=m.getQueryModel();for(var e=0;e<s;e++){var c=b.getStructureAt(e);var d=c.getStringByKey("Name");var g=q.getFieldByName(d);if(f.isNull(g)){var h=q.getDimensionByNameFromExistingMetadata(d);if(f.notNull(h)){g=h.getKeyField();}}if(f.isNull(g)){g=m.getKeyFieldValue().getField();}if(f.isNull(g)){a.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Could not find field '",d,"'!"));return;}if(!c.containsKey("Low")){a.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate2("No low value for field: ",d));return;}var v=g.getValueType();var l=f.QInAValueUtils.importValueByType(a,c,"Low",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected low valuetype for field: ",v.getName()));return;}var j=n._addNewEvaluateWithFieldInternal(g,l);if(c.containsKey("High")){var k=f.QInAValueUtils.importValueByType(a,c,"High",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected high valuetype for field: ",v.getName()));return;}j.setHighValue(k);}j.setEvaluate(f.QExceptionEvalType.lookupExceptionEvalType(c.getStringByKey("Evaluate")));var o=c.getStringByKey("Comparison");var p=f.QInAConverter.lookupComparison(o);if(f.isNull(p)){a.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",o,"'"));return;}j.setOperator(p);}};f.QInARepoExceptionsLegacy.importThresholds=function(i,n){var a=i.getListByKey("Threshold");if(f.notNull(a)){var s=a.size();for(var t=0;t<s;t++){var b=a.getStructureAt(t);var c=b.getIntegerByKeyExt("AlertLevel",-9999);var d;var e=!b.hasStringByKey("Low");if(e){d=n._addNewThresholdInternal(b.getDoubleByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}else{d=n._addNewThresholdWithStringInternal(b.getStringByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}var g=b.getStringByKey("Name");if(f.notNull(g)){d.setName(g);}var o=f.QInAConverter.lookupComparison(b.getStringByKey("Comparison"));d.setOperator(o);if(o.getNumberOfParameters()===2){if(e){var h=b.getDoubleByKey("High");d.setHighValue(h);}else{var j=b.getStringByKey("High");d.setHigh(j);}}f.QInARepoExceptionsLegacy.importSettings(b.getListByKey("Settings"),d);}}};f.QInARepoExceptionsLegacy.importSettings=function(i,n){if(f.isNull(i)){return;}var s=i.size();for(var S=0;S<s;S++){var a=i.getStructureAt(S);var b=a.getStringByKey("Name");var p=a.getIntegerByKey("Priority");var v=a.getStringByKey("Value");if(f.notNull(v)&&!f.XString.isEqual(v,"")){var c=n.addNewSetting(b,p);c.setValue(v);}}};f.QInARepoExceptionsLegacy.prototype.getComponentType=function(){return f.OlapComponentType.EXCEPTION_MANAGER;};f.QInARepoExceptionsLegacy.prototype.getTagName=function(){return"Exceptions";};f.QInARepoExceptionsLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoExceptionsLegacy.prototype.isVersion1=function(q,m){var c=m.getOlapComponentType();return!q.capabilities.supportsExceptionsV2()&&c.isTypeOf(f.MemberType.ABSTRACT_MEMBER);};f.QInARepoExceptionsLegacy.prototype.isVersion2=function(q,m){var c=m.getOlapComponentType();return q.capabilities.supportsExceptionsV2()&&c.isTypeOf(f.OlapComponentType.QUERY_MODEL);};f.QInARepoExceptionsLegacy.prototype.importComponentWithList=function(i,a,m,p,c){var e=m.getQueryModel().getExceptionManager();e.queueEventing();if(this.isVersion1(i,m)){e.removeAllExceptionsOfMeasure(m);this.importFormatV1(i,a,m,e);}else if(this.isVersion2(i,m)){e.clear();this.importFormatV2(i,a,m,e);}e.resumeEventing();return e;};f.QInARepoExceptionsLegacy.prototype.importFormatV1=function(i,a,m,e){if(f.notNull(a)){var s=a.size();for(var b=0;b<s;b++){var c=a.getStructureAt(b);var n=this.importException(i,m,e,c);n.setMeasure(m);n.setIsChangeable(c.getBooleanByKeyExt("Changegable",true));}}};f.QInARepoExceptionsLegacy.prototype.importException=function(i,m,e,a){var b=a.getStringByKey("Name");var c=a.getStringByKey("Text");var d=f.QExceptionEvalType.lookupExceptionEvalType(a.getStringByKey("EvaluateDefault"));var h=f.QExceptionHeaderSettings.lookupExceptionHeaderSetting(a.getStringByKey("ApplySettingsToHeader"));var g=a.getBooleanByKeyExt("Active",true);var j=a.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);var n=e._addNewExceptionInternal(b,c,d,h,g,!j);n.queueEventing();f.QInARepoExceptionsLegacy.importEvaluates(a,m,n,i);f.QInARepoExceptionsLegacy.importThresholds(a,n);n.resumeEventing();return n;};f.QInARepoExceptionsLegacy.prototype.importFormatV2=function(i,a,q,e){if(f.isNull(a)){return;}var s=a.size();for(var E=0;E<s;E++){var b=a.getStructureAt(E);var c=b.getListByKey("StructureContext");if(!f.PrUtils.isListEmpty(c)){var d=this.importContextItem(c.getStructureAt(0),q,e,null,i,b);if(f.notNull(d)){if(c.size()>1){this.importContextItem(c.getStructureAt(1),q,e,d,i,b);}d.setIsChangeable(b.getBooleanByKeyExt("Changegable",true));}}}};f.QInARepoExceptionsLegacy.prototype.importContextItem=function(s,q,e,a,i,b){var c=a;var d=q.getDimensionByNameFromExistingMetadata(s.getStringByKey("DimensionName"));if(f.notNull(d)){var m=this.getMemberFromContextItem(s,d);if(f.notNull(m)){if(f.isNull(c)){c=this.importException(i,m,e,b);}if(d.isMeasureStructure()){c.setMeasure(m);}else{c.setStructure(m);}c.displayOnOtherMember(m,d.getStructureMember(s.getStringByKey("DisplayOnOtherMember")));c.setEvaluateAllMembers(d,s.getBooleanByKeyExt("EvaluateAllMembers",false));}}return c;};f.QInARepoExceptionsLegacy.prototype.getMemberFromContextItem=function(s,d){var m=d.getStructureMember(s.getStringByKey("MemberName"));if(f.isNull(m)){var e=s.getBooleanByKeyExt("EvaluateAllMembers",false);var a=d.getAllStructureMembers();if(e&&!a.isEmpty()){return a.get(0);}}return m;};f.QInARepoExceptionsLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoFilterAlgebraLegacy=function(){};f.QInARepoFilterAlgebraLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterAlgebraLegacy.prototype._ff_c="QInARepoFilterAlgebraLegacy";f.QInARepoFilterAlgebraLegacy.prototype.getComponentType=function(){return f.FilterComponentType.BOOLEAN_ALGEBRA;};f.QInARepoFilterAlgebraLegacy.prototype.getTagName=function(){return"Operator";};f.QInARepoFilterAlgebraLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterAlgebraLegacy.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=p;var e=b.getListByKey("SubSelections");if(f.notNull(e)){var g=b.getStringByKey("Code");var s;if(f.XString.isEqual(g,"And")){s=f.QFilterAnd._create(c,d);}else if(f.XString.isEqual(g,"Not")){s=f.QFilterNot._create(c,d);}else{s=f.QFilterOr._create(c,d);}var h=e.size();for(var i=0;i<h;i++){var j=e.getStructureAt(i);var k=a.importFilterElement(j,null,d,c);if(f.notNull(k)){s.add(k);}}if(s.hasElements()){return s;}}return null;};f.QInARepoFilterAlgebraLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterAllLegacy=function(){};f.QInARepoFilterAllLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterAllLegacy.prototype._ff_c="QInARepoFilterAllLegacy";f.QInARepoFilterAllLegacy.prototype.getComponentType=function(){return f.OlapComponentType.SELECTOR;};f.QInARepoFilterAllLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterAllLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;i.importFixedFilter(a,b,c);i.importDynamicFilter(a,b,c);i.importVisibilityFilter(a,b,c);return b;};f.QInARepoFilterAllLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterCellValueOperandLegacy=function(){};f.QInARepoFilterCellValueOperandLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterCellValueOperandLegacy.prototype._ff_c="QInARepoFilterCellValueOperandLegacy";f.QInARepoFilterCellValueOperandLegacy.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_CELL_VALUE_OPERAND;};f.QInARepoFilterCellValueOperandLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterCellValueOperandLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var l=a.getStringByKey("Low");if(f.XString.isEqual(l,"")){l=null;}var h=a.getStringByKey("High");if(f.XString.isEqual(h,"")){h=null;}var o=f.QInAConverter.lookupComparison(a.getStringByKey("Comparison"));var b=f.QFilterCellValueOperand._create(c,null,l,h,o);b.setIsExcluding(a.getBooleanByKey("IsExcluding"));return b;};f.QInARepoFilterCellValueOperandLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterElementLegacy=function(){};f.QInARepoFilterElementLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterElementLegacy.prototype._ff_c="QInARepoFilterElementLegacy";f.QInARepoFilterElementLegacy.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_ELEMENT;};f.QInARepoFilterElementLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterElementLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=m;if(a.containsKey("Operator")){d=i.importFilterAlgebra(b,a,c);}else{var e=a.getStructureByKey("SetOperand");if(f.isNull(e)){if(a.containsKey("GeometryOperand")){d=i.importFilterGeo(b,a,c);}}else{d=i.importCartesianList(e,d,b,c);}}return d;};f.QInARepoFilterElementLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterExpressionLegacy=function(){};f.QInARepoFilterExpressionLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterExpressionLegacy.prototype._ff_c="QInARepoFilterExpressionLegacy";f.QInARepoFilterExpressionLegacy.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_EXPRESSION;};f.QInARepoFilterExpressionLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterExpressionLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){b=f.QFactory.createFilterExpression(c,p);}var v=0;var d=null;if(f.notNull(a)){d=a.getStructureByKey("Selection");if(f.isNull(d)){d=a.getStructureByKey("SelectionRepo");v=1;}}b.setCartesianProduct(null);b.setComplexRoot(null);if(f.notNull(d)){var e=i.importFilterElement(d,null,b,c);if(f.notNull(e)){if(v>=1){b.setComplexRoot(e);}else{var g=f.QFilterUtil.convertComplexFilterToCartesian(e);if(f.notNull(g)){b.setCartesianProduct(g);}else{b.setComplexRoot(e);}}}}if(b.getModelCapabilities().supportsCellValueOperand()){b.setIsSuppressingNulls(false);b.clearCellValueFilter();if(f.notNull(a)){if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){b.setIsSuppressingNulls(a.getBooleanByKeyExt("IsSuppressingNulls",false));}if(f.notNull(d)){var h=d.getStructureByKey("CellValueOperand");if(f.isNull(h)){var j=d.getStructureByKey("Operator");if(f.notNull(j)){var k=j.getListByKey("SubSelections");if(k.size()===2){var l=k.getStructureAt(1);h=l.getStructureByKey("CellValueOperand");}}}if(f.notNull(h)){var n=h.getListByKey("Elements");if(f.notNull(n)){var o=f.QFilterCellValueOperand.createForNullSuppression(c,null);var s=n.size();if(s>0){var q=n.getStructureAt(0);var r=i.importFilterCellValueOperand(q,c);var t=0;if(r.isEqualTo(o)){b.setIsSuppressingNulls(true);t=1;}b.clearCellValueFilter();for(var u=t;u<s;u++){var w=n.getStructureAt(u);var x=i.importFilterCellValueOperand(w,c);b.addCellValueFilter(x);}}}}}}}return b;};f.QInARepoFilterExpressionLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterExpressionLegacy.prototype.exportComponent=f.noSupport;f.QInARepoFilterFixedLegacy=function(){};f.QInARepoFilterFixedLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterFixedLegacy.prototype._ff_c="QInARepoFilterFixedLegacy";f.QInARepoFilterFixedLegacy.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_FIXED;};f.QInARepoFilterFixedLegacy.prototype.getTagName=function(){return"FixedFilter";};f.QInARepoFilterFixedLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterFixedLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.isNull(a)){return null;}var b=p;var d=i.importFilterExpression(null,a,b,c);if(f.notNull(b)&&f.notNull(d)){b.setFixedFilter(d);}return d;};f.QInARepoFilterFixedLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterGeoLegacy=function(){};f.QInARepoFilterGeoLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterGeoLegacy.prototype._ff_c="QInARepoFilterGeoLegacy";f.QInARepoFilterGeoLegacy.tryCreateGeometry=function(s){var v=f.XGeometryValue.createGeometryValueWithWkt(s);if(f.isNull(v)){v=f.XStringValue.create(s);}return v;};f.QInARepoFilterGeoLegacy.prototype.getComponentType=function(){return f.FilterComponentType.SPATIAL_FILTER;};f.QInARepoFilterGeoLegacy.prototype.getTagName=function(){return"GeometryOperand";};f.QInARepoFilterGeoLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterGeoLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=c.getFieldAccessorSingle();var e=a.getStringByKey("Comparison");var g=a.getStringByKey("FieldName");var h=a.getStringByKey("Value1");if(f.XStringUtils.isNotNullAndNotEmpty(e)&&f.XStringUtils.isNotNullAndNotEmpty(g)&&f.XStringUtils.isNotNullAndNotEmpty(h)){var j=f.QInAConverter.lookupComparison(e);if(f.isNull(j)){return null;}if(!j.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){return null;}var k=d.getFieldByName(g);if(f.isNull(k)){return null;}var l=f.QFactory.createFilterOperationWithOperator(b,k,j);var n=f.QInARepoFilterGeoLegacy.tryCreateGeometry(h);l.getLow().setValue(n);var o=a.getStringByKey("Value2");if(f.XStringUtils.isNotNullAndNotEmpty(o)){var s=f.QInARepoFilterGeoLegacy.tryCreateGeometry(o);l.getHigh().setValue(s);}var q=a.getStringByKey("Value3");if(f.XStringUtils.isNotNullAndNotEmpty(q)){var t=f.QInARepoFilterGeoLegacy.tryCreateGeometry(q);l.getThird().setValue(t);}return l;}return null;};f.QInARepoFilterGeoLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterManagerLegacy=function(){};f.QInARepoFilterManagerLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterManagerLegacy.prototype._ff_c="QInARepoFilterManagerLegacy";f.QInARepoFilterManagerLegacy.prototype.getComponentType=function(){return f.OlapComponentType.OLAP_FILTER_MANAGER;};f.QInARepoFilterManagerLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterManagerLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){b=c.getOlapEnv().getFilterManager();}var d=a.getStructureByKey("OlapFilterManager");var e=d.getStructureByKey("OlapFilters");var g=e.getKeysAsIteratorOfString();while(g.hasNext()){var h=g.next();var j=b.getFilterByName(h);i.importFilterExpression(j,e.getStructureByKey(h),b,b.getContext());}return b;};f.QInARepoFilterManagerLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoFilterOperationLegacy=function(){};f.QInARepoFilterOperationLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoFilterOperationLegacy.prototype._ff_c="QInARepoFilterOperationLegacy";f.QInARepoFilterOperationLegacy.importValue=function(i,v,a,b,c,d,p,e,g){var h=d.getStringByKey(e);if(f.XString.isEqual("Variable",h)){b.setFilterValueType(f.XValueType.VARIABLE);var j=d.getStringByKey(p);var k=v.getVariables().getByKey(j);if(f.notNull(k)){b.setVariableValue(k);}}else{var l=f.QInAConverter.lookupValueType(d.getStringByKeyExt("LowIs",null));if(l===f.XValueType.CURRENT_MEMBER||l===f.XValueType.VARIABLE){b.setFilterValueType(l);}if(f.notNull(g)){var m=d.getListByKey(g);if(f.notNull(m)){var n=b.getMemberNavigations();var o=m.size();for(var q=0;q<o;q++){n.add(f.QInARepoFilterOperationLegacy.importMemberNavigation(m.getStructureAt(q)));}}}f.QInAValueUtils.importValue(i,b,d,p,c,a);}};f.QInARepoFilterOperationLegacy.importMemberNavigation=function(i){var m=f.QFactory.createMemberNavigation(f.CurrentMemberFunction.lookup(i.getStringByKey("Function")));if(i.containsKey("Parameters")){var a=i.getListByKey("Parameters");var b=a.size();for(var c=0;c<b;c++){var d=a.getStructureAt(c);if(d.containsKey("Navigations")){var e=d.getListByKey("Navigations");var g=e.size();for(var h=0;h<g;h++){m.addNavigation(f.QInARepoFilterOperationLegacy.importMemberNavigation(e.getStructureAt(h)));}}else{if(d.containsKey("Level")){var j=d.getByKey("Level");if(j.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithLevelNumber(j.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithLevelLiteral(j.getString()));}}else if(d.containsKey("Member")){m.addParameter(f.QFactory.createNavigationParameterWithMemberName(d.getStringByKey("Member")));}else if(d.containsKey("NoValuesAboveLevel")){m.addParameter(f.QFactory.createNavigationParameterWithNoValuesAboveLevel(d.getStringByKey("NoValuesAboveLevel")));}else if(d.containsKey("Shift")){var k=d.getStructureByKey("Shift");m.addParameter(f.QFactory.createNavigationParameterWithShift(k.getStringByKey("Level"),k.getIntegerByKey("Constant")));}else if(d.containsKey("Range")){var l=d.getStructureByKey("Range");m.addParameter(f.QFactory.createNavigationParameterWithRange(l.getStringByKey("Level"),l.getIntegerByKey("OffsetLow"),l.getIntegerByKey("OffsetHigh")));}else{var n=d.getByKey("Constant");if(n.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithIntegerConstant(n.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithStringConstant(n.getString()));}}}}}return m;};f.QInARepoFilterOperationLegacy.prototype.getComponentType=function(){return f.FilterComponentType.OPERATION;};f.QInARepoFilterOperationLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoFilterOperationLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=a.getStringByKeyExt("Comparison","=");var d=f.QInAConverter.lookupComparison(b);if(f.isNull(d)){i.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate2("Unsupported comparison operator: ",b));return null;}var e=p;var g=e.getFilterExpression();var h=e.getField();var j=f.QFactory.createFilterOperationWithOperator(g,h,d);var k=h.getValueType();var l=d.isTypeOf(f.ComparisonOperator.LIKE)||d.isTypeOf(f.ComparisonOperator.MATCH)||d.isTypeOf(f.ComparisonOperator.NOT_MATCH);if(l){k=f.XValueType.STRING;}if(a.getBooleanByKeyExt("IsExcluding",false)){j.setSetSign(f.SetSign.EXCLUDING);}else{j.setSetSign(f.SetSign.INCLUDING);}j.resetDepth();var n=a.getIntegerByKeyExt("Depth",-1);if(n!==-1){j.setDepth(n);}j.resetLevelOffset();var o=a.getIntegerByKeyExt("LevelOffset",-1);if(o!==-1){j.setLevelOffset(o);}var q=a.getStructureByKey("Hierarchy");if(f.notNull(q)){var r=q.getStringByKey("Name");var s=null;var t=null;var u=j.getQueryModel();if(i.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&f.notNull(u)&&u.getSystemType().isTypeOf(f.SystemType.ABAP)){var v=q.getStringByKey("DueDate");if(f.notNull(v)){s=f.XDate.createDateFromSAPFormat(v);}t=q.getStringByKey("Version");}j.setHierarchyInfo(r,s,t);}if(i.capabilities.supportsConvertToFlatFilter()){j.setConvertToFlatFilter(a.getBooleanByKeyExt("ConvertToFlatSelection",false));}var w=e.getSupplementFieldNames();var x=c.getVariableContainer();var y=d.getNumberOfParameters();if(y>=1){var z=j.getLow();f.QInARepoFilterOperationLegacy.importValue(i,x,h,z,k,a,"Low","LowIs","LowNavigations");f.QInAValueUtils.importSupplements(i,z,a,"LowSupplements",w);}if(y>=2){var A=j.getHigh();f.QInARepoFilterOperationLegacy.importValue(i,x,h,A,k,a,"High","HighIs",null);f.QInAValueUtils.importSupplements(i,A,a,"HighSupplements",w);}if(y>=3){var B=j.getThird();f.QInARepoFilterOperationLegacy.importValue(i,x,h,B,k,a,"Value3","Value3Is",null);f.QInAValueUtils.importSupplements(i,B,a,null,w);}return j;};f.QInARepoFilterOperationLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoHierarchyLegacy=function(){};f.QInARepoHierarchyLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoHierarchyLegacy.prototype._ff_c="QInARepoHierarchyLegacy";f.QInARepoHierarchyLegacy.appendItemsToCatalogResult=function(c,h,d){var l=f.PrUtils.getListSize(h,0);for(var i=0;i<l;i++){var a=f.PrUtils.getStructureElement(h,i);var b=f.HierarchyCatalogItem.createCatalogItem();b.setDimensionName(d);var e;if(a.hasStringByKey("Name")){e=a.getStringByKey("Name");}else{e=a.getStringByKey("HierarchyName");}if(f.XStringUtils.isNullOrEmpty(e)||c.containsHierarchy(e)){continue;}b.setHierarchyName(e);var g=f.PrUtils.getStringProperty(a,"Description");if(f.notNull(g)){b.setHierarchyLongText(g.getString());}var v=f.PrUtils.getStringProperty(a,"Version");if(f.notNull(v)){b.setVersionName(v.getString());}var s=f.PrUtils.getStringProperty(a,"Structure");if(f.notNull(s)){b.setHierarchyType(f.HierarchyType.lookup(s.getString()));}var j=f.PrUtils.getBooleanValueProperty(a,"IsModeled",false);b.setIsModeled(j);var k=f.PrUtils.getStringProperty(a,"DateTo");if(f.notNull(k)){var m=k.getString();if(f.XStringUtils.isNotNullAndNotEmpty(m)){b.setDateTo(f.XDate.createDateFromIsoFormat(m));}}var n=f.PrUtils.getListProperty(a,"Levels");if(f.notNull(n)){b.setSupportsHierarchyLevels(true);var o=f.XList.create();var p=f.PrUtils.getListSize(n,0);for(var q=0;q<p;q++){var r=f.PrUtils.getStructureElement(n,q);if(f.isNull(r)){continue;}var t=f.HierarchyCatalogLevel.createCatalogLevel();var u=f.PrUtils.getIntegerValueProperty(r,"Level",-1);if(u>-1){t.setLevel(u);}var w=f.PrUtils.getStringProperty(r,"LevelName");if(f.notNull(w)){t.setLevelName(w.getString());}var x=f.PrUtils.getStringProperty(r,"LevelCaption");if(f.notNull(x)){t.setLevelDescription(x.getString());}var y=f.PrUtils.getStringProperty(r,"LevelUniqueName");if(f.notNull(y)){t.setLevelUniqueName(y.getString());}var z=f.PrUtils.getStringProperty(r,"DimensionName");if(f.notNull(z)){t.setLevelDimensionName(z.getString());}var A=f.PrUtils.getIntegerProperty(r,"LevelType");if(f.notNull(A)){t.setLevelType(f.QInAConverter.lookupHierarchyLevelType(A.getInteger()));}o.add(t);}b.setHierarchyLevels(o);}var B=a.getStringByKey("RestNode");if(f.notNull(B)){b.setRestNode(B);}var C=a.getStringByKey("VirtualRootNode");if(f.notNull(C)){b.setVirtualRootNode(C);}c.addItem(b);}return c;};f.QInARepoHierarchyLegacy.importLeveledHierarchy=function(i,c,d,a){var h=f.QLeveledHierarchy.create(c,d,a.getStringByKey(a.containsKey("Name")?"Name":"HierarchyName"));h.setHierarchyUniqueName(a.getStringByKey("UniqueName"));if(a.getStringByKey("DimensionName")===null){h.setDimensionName(d.getName());}else{h.setDimensionName(a.getStringByKey("DimensionName"));}h.setHierarchyType(f.HierarchyType.lookup(a.getStringByKey("Structure")));h.setIsModeled(a.getBooleanByKeyExt("IsModeled",false));var b=a.getStringByKey("DueDate");if(f.XStringUtils.isNotNullAndNotEmpty(b)){h.setDateTo(f.QInARepoUtils.createDate(b));}h.setHierarchyDescription(a.getStringByKey("Description"));var e=a.getListByKey("Levels");if(!f.PrUtils.isListEmpty(e)){f.QInARepoHierarchyLegacy.importLevels(h,e);}return h;};f.QInARepoHierarchyLegacy.importLevels=function(h,i){var s=i.size();for(var l=0;l<s;l++){var a=i.getStructureAt(l);var b=f.QHierarchyLevel.create(h,a.getStringByKey("LevelUniqueName"),a.getIntegerByKey("Level"));b.setLevelName(a.getStringByKey("LevelName"));b.setLevelText(a.getStringByKey("LevelCaption"));b.setLevelDimensionName(a.getStringByKey("DimensionName"));b.setLevelType(f.QInAConverter.lookupHierarchyLevelType(a.getIntegerByKey("LevelType")));b.setNavigationAttribute(a.getStringByKey("NavAttr"));h.getAllLevelBase().add(b);}};f.QInARepoHierarchyLegacy.prototype.getComponentType=function(){return f.OlapComponentType.HIERARCHY;};f.QInARepoHierarchyLegacy.prototype.getTagName=function(){return"Hierarchy";};f.QInARepoHierarchyLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoHierarchyLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;if(d.supportsHierarchy()){var b=d.isDisplayHierarchyFixInFilter();d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(f.isNull(a)){d.setHierarchy(null);}else{var h;if(a.hasStringByKey("Name")){h=a.getStringByKey("Name");}else{h=a.getStringByKey("HierarchyName");}var e=null;if(f.XStringUtils.isNotNullAndNotEmpty(h)){if(d.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(a,d);this.importLeveledHierarchyToMetadata(i,a,c,d);}if(a.getBooleanByKey("IsTransient")){e=f.QHierarchy.createCustomHierarchy(d.getContext(),d,h,a.getStringByKey("Description"));}else{e=f.QHierarchy.create(d.getContext(),d,h);}e.setHierarchyVersion(a.getStringByKey("Version"));var g=a.getStringByKey("DueDate");var j=a.getStringByKey("DueDateIs");var k=f.notNull(j)&&f.XString.isEqual("Variable",j);d.setUseHierarchyDueDateVariable(k);if(k){if(f.XStringUtils.isNullOrEmpty(g)){d.setHierarchyDueDateVariableName(null);}else{d.setHierarchyDueDateVariableName(g);}}else{e.setHierarchyDueDate(f.QInARepoUtils.createDate(g));}var l=a.getStringByKey("DateTo");e.setDateTo(f.QInARepoUtils.createDate(l));var n=a.getStringByKey("0DATEFROM");e.setDateFrom(f.QInARepoUtils.createDate(n));var o=a.getStructureByKey("Metadata");if(f.notNull(o)){l=o.getStringByKey("DateTo");if(f.XStringUtils.isNotNullAndNotEmpty(l)){e.setDateTo(f.QInARepoUtils.createDate(l));}n=o.getStringByKey("0DATEFROM");if(f.XStringUtils.isNotNullAndNotEmpty(n)){e.setDateFrom(f.QInARepoUtils.createDate(n));}}d.setHierarchy(e);var q=a.getBooleanByKeyExt("HierarchyActive",true);d.setHierarchyActive(q);d.setSelectorHierarchyActive(q);}var s=a.getListByKey("StickyDimensionMembers");d.clearStickyMembers();if(f.XCollectionUtils.hasElements(s)){for(var r=0;r<s.size();r++){d.addStickyMember(s.getStringAt(r));}}var t=a.getIntegerByKeyExt("InitialDrillOffset",0);var u=a.getIntegerByKeyExt("InitialDrillLevel",0);var v=d.getModelCapabilities();if(v.supportsVisibilityFilter()||!i.mode.isTypeOf(f.QModelFormat.INA_DATA)){d.setInitialDrillLevel(u);d.setSelectorInitialDrillLevel(u);}else{if(u===-1){d.setInitialDrillLevel(u);d.setSelectorInitialDrillLevel(u);}else if(t===-1){d.setInitialDrillLevel(0);d.setSelectorInitialDrillLevel(0);}else{d.setInitialDrillLevel(u+t);d.setSelectorInitialDrillLevel(u+t);}}d.setInitialDrillOffset(t);d.setExplicitDrillOnFilteredNodes(a.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var w=f.Alignment.DEFAULT_VALUE;if(c.getModelCapabilities().supportsExpandBottomUp()){var x=a.getStringByKeyExt("LowerLevelNodeAlignment","Default");w=f.QInAConverter.lookupLowerLevelNodeAlignment(x);if(a.containsKey("ExpandBottomUp")){var y=a.getBooleanByKeyExt("ExpandBottomUp",false);if(y){w=f.Alignment.CHILDREN_ABOVE_PARENT;}}}d.setLowerLevelNodeAlignment(w);var z=a.getBooleanByKeyExt("NodeCondensation",false);d.setHasNodeCondensation(z);var A=a.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var B=f.QInAConverter.lookupResultSetVisibility(A);d.setMemberOfPostedNodeVisibility(B);d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(b);return e;}d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(b);}return null;};f.QInARepoHierarchyLegacy.prototype.importHierarchyAsCatalogItem=function(i,d){var h=f.PrFactory.createList();h.add(i);var a=d.getHierarchies();if(f.isNull(a)){a=f.QFactory.createHierarchyCatalogResult();f.QInARepoHierarchyLegacy.appendItemsToCatalogResult(a,h,d.getName());d.getHierarchyManagerBase().setHierarchies(a);}else{f.QInARepoHierarchyLegacy.appendItemsToCatalogResult(a,h,d.getName());}};f.QInARepoHierarchyLegacy.prototype.importLeveledHierarchyToMetadata=function(i,a,c,d){var q=d.getQueryModelBase().getQueryManagerBase();if(f.notNull(q)&&!f.PrUtils.isListEmpty(a.getListByKey("Levels"))){var m=q.getMetadataModelBase();var b=m.getLeveledHierarchiesBase();var l=f.QInARepoHierarchyLegacy.importLeveledHierarchy(i,c,d,a);if(!b.contains(l)){b.add(l);}}};f.QInARepoHierarchyLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoMemberRestrictedLegacy=function(){};f.QInARepoMemberRestrictedLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoMemberRestrictedLegacy.prototype._ff_c="QInARepoMemberRestrictedLegacy";f.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip=function(a,c){var i=c.getChildren();while(i.hasNext()){var b=i.next();if(b.getOlapComponentType()===f.FilterComponentType.OPERATION){var d=b;var e=d.getDimensionName();if(f.XString.isEqual(a,e)){return d.getLow().getValue().toString();}}var m=f.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(a,b);if(f.notNull(m)){return m;}}return null;};f.QInARepoMemberRestrictedLegacy.getMemberForSignFlip=function(c,r){if(r.getAccountType()!==null){return r.getName();}var d=r.getDimensionContext(c.getQueryManager());var a=r.getFilter();var m=d.getName();if(f.notNull(m)){if(a.isAll()){m=f.QInARepoMemberRestrictedLegacy.getFirstMemberForSignFlip(m,a.getFilterRootElement());}var b=d.getStructureMemberByAliasOrMember(m);if(f.notNull(b)&&b.getComponentType()===f.MemberType.RESTRICTED_MEASURE&&b!==r){return f.QInARepoMemberRestrictedLegacy.getMemberForSignFlip(c,b);}}return m;};f.QInARepoMemberRestrictedLegacy.prototype.getComponentType=function(){return f.MemberType.RESTRICTED_MEASURE;};f.QInARepoMemberRestrictedLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoMemberRestrictedLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b;if(f.isNull(m)){var d=p;var n=this.getNameForImport(a,d);var e=this.getText(a,d);if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()&&d.getLoadedStructureMember(n)!==null){b=d.getLoadedStructureMember(n);}else{b=d.addNewRestrictedMeasure(n,e);}}else{b=m;}var g=a.getStringByKey("AggregationDimension");if(f.XStringUtils.isNotNullAndNotEmpty(g)){b.setAggregationDimensionName(g);}var r=a;if(b.getModelCapabilities().supportsCustomMeasuresInMetadata()&&i.getMode()===f.QModelFormat.INA_DATA){r=a.getStructureByKey("[Measures].[MemberDetails]");}if(b.getMemberType()===f.MemberType.RESTRICTED_MEASURE){i.importFilterExpression(b.getFilter(),r,b,c);}i.importExceptions(r,b);return b;};f.QInARepoMemberRestrictedLegacy.prototype.getNameForImport=function(i,d){var m=i.getStringByKey("Name");if(f.isNull(m)&&f.notNull(d)){var k=d.getKeyField();var a=k.getName();return i.getStringByKey(a);}return m;};f.QInARepoMemberRestrictedLegacy.prototype.getText=function(i,d){var m=i.getStringByKey("Description");if(f.isNull(m)&&f.notNull(d)){var t=d.getTextField();if(f.notNull(t)){var k=t.getName();return i.getStringByKey(k);}}return m;};f.QInARepoMemberRestrictedLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoMembersAllLegacy=function(){};f.QInARepoMembersAllLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoMembersAllLegacy.prototype._ff_c="QInARepoMembersAllLegacy";f.QInARepoMembersAllLegacy.prototype.getComponentType=function(){return f.OlapComponentType.MEMBERS;};f.QInARepoMembersAllLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoMembersAllLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;if(d.supportsCustomMembers()){d.removeCustomMembers();}var b=a.getListByKey("MembersRepo");if(f.isNull(b)){b=a.getListByKey("Members");if(f.isNull(b)){return null;}}var s=d.getStructureLayout();if(f.notNull(s)){s.clear();var e=b.size();for(var M=0;M<e;M++){var g=b.getStructureAt(M);var h=i.importStructureMember(d,g,c);if(f.notNull(h)){var j=d.getLoadedStructureMember(h.getName());if(f.isNull(j)){d.addMeasure(h);}else{if(j!==h){throw f.XException.createIllegalStateException("Internal error: New member with same name not allowed");}s.removeElement(j);s.add(j);}}}}return d;};f.QInARepoMembersAllLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoQueryLegacy=function(){};f.QInARepoQueryLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoQueryLegacy.prototype._ff_c="QInARepoQueryLegacy";f.QInARepoQueryLegacy.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MODEL;};f.QInARepoQueryLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoQueryLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;var b=a;var d=b.getListByKey("Queries");if(f.notNull(d)){b=d.getStructureAt(d.size()-1);}var e=b.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(e)){b=e.getStructureAt(e.size()-1);}if(f.notNull(b)&&b.containsKey("Analytics")){b=b.getStructureByKey("Analytics");if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}}if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}if(f.notNull(b)){var g=i.getOriginalMode()===f.QModelFormat.INA_CLONE_RENDERING&&i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);var h=i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY);if(h&&b.containsKey("ModellerDefinition")){b=b.getStructureByKey("ModellerDefinition");i.importModellerDimensions(b,q,q);i.importModellerDefinedVariables(b,q.getVariableManagerBase(),q);i.importModellerCurrencyTranslation(b,q.getCurrencyTranslationManagerBase(),q);i.importModellerMetadataProperties(b,q,q);i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);return q;}i.importDimensions(b,q,q);if(!g){i.importFilter(b,q.getFilterBase(),q);i.importExceptions(b,q);i.importQueryCells(b,q.getQueryCellManager(),q);i.importUniversalDisplayHierarchies(b,q.getUniversalDisplayHierarchiesBase(),q);}i.importCurrencyTranslationManager(b,q.getCurrencyTranslationManager(),q);i.importSortingManager(b,q.getSortingManagerBase(),q);i.importDrillManager(b,q.getDrillManager(),q);i.importVariableManager(b,q.getVariableManagerBase(),q);i.importQuerySettings(b,q);i.importDataCells(b,q);i.importConditionManager(b,q.getConditionManagerBase(),q);if(h){i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);this.importPaging(i,b,q);f.QInARepoOptions.importSuppressKeyfigureCalculation(b,q.getQueryManager());var r=q.getResultStructureController();i.importComponent(null,b,r,q,q);var j=q.getQueryManager();if(f.notNull(j)){j.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));j.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));j.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"));}var k=b.getListByKey("PreQueries");if(f.notNull(k)){var l=null;var n=b.getStructureByKey("DataSource");if(f.notNull(n)){l=n.getStringByKey("System");}this.importPreQueries(i,q,k,l);}if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA)&&q.isBlendingModel()){this.importBlendingSources(i,a,q);}}}return q;};f.QInARepoQueryLegacy.prototype.importBlendingSources=function(a,b,q){var s=q.getBlendingSources();if(!f.XCollectionUtils.hasElements(s)){return;}var c=f.PrUtils.getStructureProperty(b,"DataSource");var d=f.PrUtils.getListProperty(c,"Sources");if(f.PrUtils.isListEmpty(d)){return;}for(var i=0;i<s.size();i++){var e=f.PrUtils.getStructureElement(d,i);var g=f.PrUtils.getStructureProperty(e,"DefiningContext");if(f.notNull(g)){var h=s.get(i).getQueryModel();h.deserializeFromElementExt(a.mode,g);}}};f.QInARepoQueryLegacy.prototype.importPaging=function(i,a,q){var b=a.getStructureByKey("SubSetDescription");var c=q.getQueryManager();var d=i.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(f.isNull(b)||!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||c.applyingStateOnQueryManager()&&!d){return;}f.QInARepoOptions.importPaging(a,c);};f.QInARepoQueryLegacy.prototype.getInactiveCapabilities=function(q){var c=f.XHashMapByString.create();var a=f.FeatureToggleOlap.getAllFeatureToggles();var b=a.getKeysAsIteratorOfString();while(b.hasNext()){c.put(b.next(),f.XBooleanValue.create(false));}var e=q.getSession().getFeatureToggles();if(f.notNull(e)){var d=e.getKeysAsIteratorOfString();while(d.hasNext()){c.put(d.next(),f.XBooleanValue.create(true));}}return c;};f.QInARepoQueryLegacy.prototype.importPreQueries=function(a,q,b,m){var c=a.getMode();if(a.getOriginalMode()!==f.QModelFormat.INA_CLONE_RENDERING){a.mode=a.getOriginalMode();}var d=f.XStringBuffer.create();var e=this.getInactiveCapabilities(q);var p=b.size();for(var i=0;i<p;i++){var g=b.getStructureAt(i);var h=g.getStructureByKey("Runtime");if(f.isNull(h)){h=g;}var j=h.getStructureByKey("DataSource");d.clear();d.append(j.getStringByKey("Type")).append(":[");d.append(j.getStringByKey("SchemaName"));d.append("][");d.append(j.getStringByKey("PackageName"));d.append("][");d.append(j.getStringByKey("ObjectName")).append("]");var k=f.XCommandFactory.create(q.getApplication());var x=k.createCommand(f.CmdCreateQueryManager.CMD_NAME);x.addParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION,q.getApplication());x.addParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,e);var l=j.getStringByKey("System");if(a.mode===f.QModelFormat.INA_REPOSITORY&&f.XString.isEqual(l,m)){l=q.getDataSource().getSystemName();}x.addParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM,l);x.addParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,d.toString());var n=x.processCommand(f.SyncType.BLOCKING,null,null);a.addAllMessages(n);f.XObjectExt.release(x);if(n.isValid()){var o=n.getData().getResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();a.importPreQuery(g,o);var r=g.getStringByKey("ObjectName");var s=q.getPreQueryByName(r);if(f.isNull(s)){q.addPreQueryWithName(o,r);}}}a.mode=c;};f.QInARepoQueryLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoQuerySettingsLegacy=function(){};f.QInARepoQuerySettingsLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoQuerySettingsLegacy.prototype._ff_c="QInARepoQuerySettingsLegacy";f.QInARepoQuerySettingsLegacy.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_SETTINGS;};f.QInARepoQuerySettingsLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoQuerySettingsLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=f.PrUtils.getStringProperty(a,"Name");var q=c.getQueryModel();if(f.notNull(d)){q.setDefinitionName(d.getString());}var b=a.getStructureByKey("Query");i.importAxesSettings(b,q);if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY)){var e=a.getStructureByKey("CurrencyTranslation");if(f.notNull(e)){var g=q.getCurrencyTranslationManager().getCurrencyTranslationDetails();g.setCurrencyTranslationName(e.getStringByKey("Name"));g.setCurrencyTranslationOperation(f.CurrencyTranslationOperation.lookup(e.getStringByKey("Operation")));g.setCurrencyTranslationTarget(e.getStringByKey("Target"));}var h=f.PrUtils.getListProperty(b,"AxesLayout");var l=f.PrUtils.getListSize(h,0);for(var j=0;j<l;j++){var k=f.PrUtils.getStructureElement(h,j);var n=f.AxisType.lookup(f.PrUtils.getStringValueProperty(k,"Axis",null));var o=q.getAxis(n);if(f.isNull(o)){continue;}var r=f.PrUtils.getListProperty(k,"OrderedDimensionNames");if(f.isNull(r)){continue;}var s=f.XListOfString.create();for(var t=0;t<f.PrUtils.getListSize(r,0);t++){var u=f.PrUtils.getStringElement(r,t);if(f.isNull(u)){continue;}s.add(u.getString());}o.reOrderDimensions(s);}}return q;};f.QInARepoQuerySettingsLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoSortLegacy=function(){};f.QInARepoSortLegacy.prototype=new f.QInAComponentWithList();f.QInARepoSortLegacy.prototype._ff_c="QInARepoSortLegacy";f.QInARepoSortLegacy.prototype.getComponentType=function(){return f.OlapComponentType.SORT_MANAGER;};f.QInARepoSortLegacy.prototype.getTagName=function(){return"Sort";};f.QInARepoSortLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoSortLegacy.prototype.importComponentWithList=function(i,a,m,p,c){var s=m;if(i.mode!==f.QModelFormat.INA_DATA_REINIT&&i.capabilities.supportsExtendedSort()){s.getSortingOperations().clear();if(f.notNull(a)){var q=s.getQueryModel();for(var b=0;b<a.size();b++){var d=a.getStructureAt(b);var e=d.getStringByKey("SortType");var g=f.QInAConverter.lookupSortType(e);var h;if(g===f.SortType.FIELD){h=this.importFieldSorting(s,q,d);}else if(g===f.SortType.MEASURE){h=this.importMeasureSorting(s,q,d);}else if(g===f.SortType.DATA_CELL_VALUE||g===f.SortType.COMPLEX){h=this.importPathSorting(c,s,q,d,g);}else{h=this.importDimensionSorting(s,q,d,g);}if(f.notNull(h)){this.importGenericSorting(q,d,h);}}}}return s;};f.QInARepoSortLegacy.prototype.importGenericSorting=function(q,i,s){var a=i.getStringByKey("Direction");if(f.notNull(a)){var b=f.QInAConverter.lookupSortDirection2(a);if(f.notNull(b)){s.setDirection(b);}}if(s.supportsPreserveGrouping()&&s.supportsBreakGrouping()){s.setPreserveGrouping(i.getBooleanByKeyExt("PreserveGrouping",false));}if(q.getModelCapabilities().supportsLocaleSorting()){var c=i.getStructureByKey("Collator");if(f.notNull(c)){s.setIsCaseSensitive(c.getBooleanByKeyExt("CaseSensitive",false));s.setLocale(c.getStringByKeyExt("Locale",null));}}};f.QInARepoSortLegacy.prototype.importPathSorting=function(c,s,q,i,a){var b=i.getListByKey("SortTuple");if(b.isEmpty()){return null;}var p=f.XList.create();for(var d=0;d<b.size();d++){var e=b.getStructureAt(d);var g=e.getStringByKey("FieldName");var h=e.getStringByKey("Value");if(f.notNull(g)&&f.notNull(h)){var j=q.getFieldByName(g);if(f.isNull(j)){return null;}var k=e.getStringByKey("Hierarchy");p.add(f.QSelectValue._createDimensionElement2(c,j,k,h));}else{return null;}}if(a===f.SortType.DATA_CELL_VALUE){return s.getDataCellSorting(p,true);}return s.getComplexSorting(p,true);};f.QInARepoSortLegacy.prototype.importDimensionSorting=function(s,q,i,a){var d=q.getDimensionByNameFromExistingMetadata(i.getStringByKey("Dimension"));if(f.isNull(d)||d.isUniversalDisplayHierarchyDimension()){return null;}var b=s.getDimensionSorting(d,true);if(a===f.SortType.FILTER){b.setSortByFilter();}else if(a===f.SortType.MEMBER_KEY){b.setSortByKey();this.importCustomSortDetails(b,i);}else if(a===f.SortType.MEMBER_TEXT){b.setSortByText();}else if(a===f.SortType.HIERARCHY){b.setSortByHierarchy();}return b;};f.QInARepoSortLegacy.prototype.importCustomSortDetails=function(d,i){var c=i.getListByKey("CustomSort");if(!f.PrUtils.isListEmpty(c)){var a=f.PrUtils.asListOfString(c);d.setCustomSort(a);var b=f.CustomSortPosition.lookup(i.getStringByKey("CustomSortPosition"));d.setCustomSortPosition(b);}};f.QInARepoSortLegacy.prototype.importMeasureSorting=function(s,q,i){var m=i.getStringByKey("MeasureName");var a=null;if(f.notNull(m)){var b=q.getMeasureDimension();var c=b.getStructureMember(m);if(f.notNull(c)){a=s.getMeasureSorting(c,true);}var d=i.getStringByKey("StructureName");var e=q.getNonMeasureDimension();if(f.notNull(d)&&f.notNull(e)&&f.notNull(a)){a.setStructure(e.getStructureMember(d));}}return a;};f.QInARepoSortLegacy.prototype.importFieldSorting=function(s,q,i){var a=i.getStringByKey("FieldName");var b=null;if(f.notNull(a)){var c=q.getFieldByName(a);if(f.notNull(c)){b=s.getFieldSorting(c,true);}}return b;};f.QInARepoSortLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoVarDimMemberLegacy=function(){};f.QInARepoVarDimMemberLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoVarDimMemberLegacy.prototype._ff_c="QInARepoVarDimMemberLegacy";f.QInARepoVarDimMemberLegacy.prototype.getComponentType=function(){return f.VariableType.DIMENSION_MEMBER_VARIABLE;};f.QInARepoVarDimMemberLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVarDimMemberLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=a.getStructureByKey("Values");if(f.notNull(d)){var s=f.QFactory.createFilterExpression(b,b);var n=i.importFilterExpression(s,d,b,c);b.setFilter(n);}else if(b.getVariableType()===f.VariableType.HIERARCHY_NODE_VARIABLE&&b.hasMemberFilter()&&b.getDimension().getKeyField()!==b.getMemberFilter().getField()){b.setDimension(b.getDimension());}return b;};f.QInARepoVarDimMemberLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoVarOptionListLegacy=function(){};f.QInARepoVarOptionListLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoVarOptionListLegacy.prototype._ff_c="QInARepoVarOptionListLegacy";f.QInARepoVarOptionListLegacy.prototype.getComponentType=function(){return f.VariableType.OPTION_LIST_VARIABLE;};f.QInARepoVarOptionListLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVarOptionListLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var o=m;var b=a.getListByKey("OptionValues");if(f.notNull(b)){var d;if(o.supportsMultipleValues()){o.clear();var l=b.size();for(var e=0;e<l;e++){d=b.getStringAt(e);o.addString(d);}}else if(b.size()===1){d=b.getStringAt(0);o.setString(d);}}return o;};f.QInARepoVarOptionListLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoVarSimpleTypeLegacy=function(){};f.QInARepoVarSimpleTypeLegacy.prototype=new f.QInAComponentWithStructure();f.QInARepoVarSimpleTypeLegacy.prototype._ff_c="QInARepoVarSimpleTypeLegacy";f.QInARepoVarSimpleTypeLegacy.prototype.getComponentType=function(){return f.VariableType.SIMPLE_TYPE_VARIABLE;};f.QInARepoVarSimpleTypeLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVarSimpleTypeLegacy.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=m;if(s.supportsMultipleValues()){s.clear();}var v=s.getValueType();if(v.isNumber()){this.importNumericValues(i,a,s,v);}else if(v.isString()){this.importStringValues(a,s);}else if(v===f.XValueType.DATE){this.importDateValues(i,a,s);}else if(v===f.XValueType.TIME){this.importTimeValues(i,a,s);}else if(v===f.XValueType.DATE_TIME){this.importDateTimeValues(i,a,s);}else if(v===f.XValueType.BOOLEAN){this.importBooleanValues(a,s);}return null;};f.QInARepoVarSimpleTypeLegacy.prototype.getFirstValueAsString=function(v){var e=v.get(0);if(f.notNull(e)&&e.isString()){return e.getString();}return null;};f.QInARepoVarSimpleTypeLegacy.prototype.importDateTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDateTime(f.XDateTime.createDateTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDateTime(f.XDateTime.createDateTimeFromStringWithFlag(g,i.capabilities.supportsSapDate()));}}}};f.QInARepoVarSimpleTypeLegacy.prototype.importTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var t=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(t)){s.addTime(f.XTime.createTimeFromStringWithFlag(t,i.capabilities.supportsSapDate()));}}}else if(c===1){var e=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.setTime(f.XTime.createTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}};f.QInARepoVarSimpleTypeLegacy.prototype.importDateValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDate(f.QInARepoUtils.createDate(e));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDate(f.QInARepoUtils.createDate(g));}}}};f.QInARepoVarSimpleTypeLegacy.prototype.importStringValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addString(a.getStringAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isString()){s.setString(e.getString());}}}};f.QInARepoVarSimpleTypeLegacy.prototype.importBooleanValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addBoolean(a.getBooleanAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isBoolean()){s.setBoolean(e.asBoolean().getBoolean());}}}};f.QInARepoVarSimpleTypeLegacy.prototype.importNumericString=function(s,v,a){if(v===f.XValueType.INTEGER){s.addInteger(f.XInteger.convertFromString(a));}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){s.addDouble(f.XDouble.convertFromString(a));}else if(v===f.XValueType.LONG){s.addLong(f.XLong.convertFromString(a));}};f.QInARepoVarSimpleTypeLegacy.prototype.importNumericValues=function(i,a,s,v){var b=a.getListByKey("SimpleNumericValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.get(d);if(i.capabilities.supportsNumberAsString()&&f.notNull(e)&&e.getType()===f.PrElementType.STRING){this.importNumericString(s,v,b.getStringAt(d));continue;}if(v===f.XValueType.INTEGER){var g=b.getIntegerAt(d);s.addInteger(g);}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){var h=b.getDoubleAt(d);s.addDouble(h);}else if(v===f.XValueType.LONG){var l=b.getLongAt(d);s.addLong(l);}}}else if(c===1){var n=b.get(0);if(f.notNull(n)&&n.isNumeric()){if(v===f.XValueType.INTEGER){s.setInteger(b.getIntegerAt(0));}else if(v===f.XValueType.DOUBLE){s.setDouble(b.getDoubleAt(0));}else if(v===f.XValueType.DECIMAL_FLOAT){s.setDecFloat(f.XDecFloatByDouble.create(b.getDoubleAt(0)));}else if(v===f.XValueType.LONG){s.setLong(b.getLongAt(0));}}}}};f.QInARepoVarSimpleTypeLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoVariableContainerLegacy=function(){};f.QInARepoVariableContainerLegacy.prototype=new f.QInAComponentWithList();f.QInARepoVariableContainerLegacy.prototype._ff_c="QInARepoVariableContainerLegacy";f.QInARepoVariableContainerLegacy.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_CONTAINER;};f.QInARepoVariableContainerLegacy.prototype.getTagName=function(){return"Variables";};f.QInARepoVariableContainerLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVariableContainerLegacy.prototype.importComponentWithList=function(i,a,m,p,c){var v=m;i.importVariableList(a,v);return m;};f.QInARepoVariableContainerLegacy.prototype.exportComponentWithList=f.noSupport;f.QInARepoVariablesListLegacy=function(){};f.QInARepoVariablesListLegacy.prototype=new f.QInAComponentWithList();f.QInARepoVariablesListLegacy.prototype._ff_c="QInARepoVariablesListLegacy";f.QInARepoVariablesListLegacy.prototype.getComponentType=function(){return f.OlapComponentType.VARIABLE_LIST;};f.QInARepoVariablesListLegacy.prototype.getModelFormat=function(){return f.QModelFormat.INA_REPOSITORY;};f.QInARepoVariablesListLegacy.prototype.importComponentWithList=function(i,a,m,p,c){var v=m;if(f.notNull(a)){var l=a.size();for(var b=0;b<l;b++){var d=a.getStructureAt(b);var e=d.getStringByKey("Name");var g=v.getVariableBaseByName(e);if(f.notNull(g)){var h=g.getVariableType();if(h.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){i.importSimpleTypeVariable(d,g,c);}else if(h.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){var j=g;i.importDimensionMemberVariable(d,j,null,j);}else if(h.isTypeOf(f.VariableType.OPTION_LIST_VARIABLE)){i.importOptionListVariable(d,g,c);}else{i.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate5("The variable '",e,"' of variable type '",h.getName(),"' was not imported correctly"));}}else{i.addWarning(f.ErrorCodes.ET_ELEMENT_NOT_FOUND,f.XStringUtils.concatenate3("The variable '",e,"' was not found"));}}}return m;};f.QInARepoVariablesListLegacy.prototype.exportComponentWithList=f.noSupport;f.QInAComponentContainer=function(){};f.QInAComponentContainer.prototype=new f.DfNameObject();f.QInAComponentContainer.prototype._ff_c="QInAComponentContainer";f.QInAComponentContainer.create=function(t){var n=new f.QInAComponentContainer();n._setupInternal(t.getName());n.m_type=t;n.m_components=f.XList.create();return n;};f.QInAComponentContainer.prototype.m_components=null;f.QInAComponentContainer.prototype.m_type=null;f.QInAComponentContainer.prototype.isEmpty=function(){return this.m_components.isEmpty();};f.QInAComponentContainer.prototype.hasElements=function(){return this.m_components.hasElements();};f.QInAComponentContainer.prototype.size=function(){return this.m_components.size();};f.QInAComponentContainer.prototype.get=function(a){var s=this.m_components.size();var r=null;if(s>1){for(var i=0;i<s;i++){var c=this.m_components.get(i);if(c.isMatching(a)){r=c;break;}}}if(f.isNull(r)&&s>0){r=this.m_components.get(0);}return r;};f.QInAComponentContainer.prototype.add=function(c){f.XBooleanUtils.checkFalse(this.m_components.contains(c),"Container already exists");this.m_components.add(c);};f.QInAComponentContainer.prototype.getComponentType=function(){return this.m_type;};f.QInARepoAttribute=function(){};f.QInARepoAttribute.prototype=new f.QInARepository();f.QInARepoAttribute.prototype._ff_c="QInARepoAttribute";f.QInARepoAttribute.prototype.getComponentType=function(){return f.OlapComponentType.ATTRIBUTE;};f.QInARepoAttribute.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=p;var n=b.getStringByKey("Name");var e=d.getAttributeByName(n);if(f.notNull(e)){var g=b.getListByKey("ResultSetFields");if(f.notNull(g)){var r=e.getResultSetFields();r.clear();var l=g.size();for(var i=0;i<l;i++){var h=e.getFieldByName(g.getStringAt(i));if(f.notNull(h)){r.add(h);}}}}return e;};f.QInARepoAttribute.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("Name",c.getName());var d=a.putNewList("ResultSetFields");var r=c.getResultSetFields();var l=r.size();for(var i=0;i<l;i++){d.addString(r.get(i).getName());}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoAxesSettings=function(){};f.QInARepoAxesSettings.prototype=new f.QInARepository();f.QInARepoAxesSettings.prototype._ff_c="QInARepoAxesSettings";f.QInARepoAxesSettings.prototype.getComponentType=function(){return f.OlapComponentType.AXES_SETTINGS;};f.QInARepoAxesSettings.prototype.getTagName=function(){return"AxesRepo";};f.QInARepoAxesSettings.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoAxesSettings.prototype.importComponentWithList=function(a,b,m,p,c){if(f.notNull(b)){var q=c.getQueryModel();if(a.capabilities.supportsZeroSuppression()||a.capabilities.supportsNullZeroSuppression()){var d=f.AxisType.getAll();var e=d.size();for(var k=0;k<e;k++){var g=q.getAxisBase(d.get(k));if(f.notNull(g)){g.setSupportsZeroSuppression(true);}}}var l=b.size();for(var i=0;i<l;i++){a.importAxis(b.getStructureAt(i),null,c);}}return null;};f.QInARepoAxesSettings.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);i.put("Elements",b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoAxesSettings.prototype.exportComponentWithList=function(e,m,a){var q=m;var i=f.PrFactory.createList();var b=e.exportAxis(q.getColumnsAxis(),null);i.add(b);var c=e.exportAxis(q.getRowsAxis(),null);i.add(c);return i;};f.QInARepoAxis=function(){};f.QInARepoAxis.prototype=new f.QInARepository();f.QInARepoAxis.prototype._ff_c="QInARepoAxis";f.QInARepoAxis.prototype.getComponentType=function(){return f.OlapComponentType.AXIS;};f.QInARepoAxis.prototype.importComponentWithStructure=function(a,b,m,p,c){var q=c.getQueryModel();var d;var e=b.getStringByKey("Axis");if(f.notNull(e)){d=f.QInAConverter.lookupAxisType(e);}else{var g=b.getIntegerByKey("Type");d=f.QInAConverter.lookupAxisTypeInt(g);}var h=q.getAxisBase(d);if(f.notNull(h)){if(h.supportsZeroSuppression()){var v=b.getIntegerByKeyExt("ZeroSuppressionType",0);var s=f.QInAConverter.lookupSuppressionType(v);h.setZeroSuppressionType(s);}var j=b.getListByKey("Layout");if(f.notNull(j)){h.clear();var k=q.getDimensionManagerBase();for(var i=0;i<j.size();i++){var l=j.getStringAt(i);var n=k.getDimensionByNameInternal(l);h.add(n);}}a.importTotals(b,h.getResultStructureControllerBase(),c);}return h;};f.QInARepoAxis.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("Axis",f.QInAConverter.lookupAxisTypeInA(c.getType()));a.putInteger("Type",f.QInAConverter.lookupAxisTypeInAInt(c.getType()));var t=c.getZeroSuppressionType();a.putInteger("ZeroSuppressionType",f.QInAConverter.lookupSuppressionTypeInA(t));var d=a.putNewList("Layout");for(var i=0;i<c.size();i++){var g=c.getDimensionAt(i);d.addString(g.getName());}e.exportTotals(c.getResultStructureController(),a);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoBlendableQueryManager=function(){};f.QInARepoBlendableQueryManager.prototype=new f.QInARepository();f.QInARepoBlendableQueryManager.prototype._ff_c="QInARepoBlendableQueryManager";f.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure=function(i,b,s){var a=i.getStructureByKey(s);b.setLinkType(s,f.BlendingLinkType.lookup(a.getStringByKey("LinkType")));b.setUnlinkedDimensionJoinType(s,f.UnlinkedDimensionJoinType.lookup(a.getStringByKey("UnlinkedDimensionJoinType")));var c=a.getListByKey("ActiveDimensionLinks");if(f.notNull(c)){var d=c.getIterator();while(d.hasNext()){var e=d.next().asString().getString();if(b.getPrimaryQueryManager().getQueryModel().getDimensionByName(e)!==null){b.addActivePrimaryLinkDimensionName(s,e);}}}};f.QInARepoBlendableQueryManager.importDrillOperations=function(b,i){var a=i.getListByKey("DrillOperations");if(f.notNull(a)){var c=a.getIterator();while(c.hasNext()){var d=c.next().asStructure();var n=b.addNewBlendedDrillOperation(d.getStringByKey("DatasetId"),d.getStringByKey("DimensionName"));n.setDrillState(f.QInAConverter.lookupDrillStateOp(d.getStringByKey("DrillState")));var e=d.getListByKey("DrillPathElements");if(f.notNull(e)){var g=e.getIterator();while(g.hasNext()){var h=g.next().asStructure();n.addBlendedDrillPathElementInfo(h.getStringByKey("DatasetId"),h.getStringByKey("DimensionName"),h.getStringByKey("Member"));}}}}};f.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis=function(b,i,a){var c=i.getListByKey(a.getName());if(f.notNull(c)){var d=c.getIterator();while(d.hasNext()){var e=d.next().asStructure();var g=b.addBlendedDimensionInfoToAxis(a,e.getStringByKey("DatasetId"),e.getStringByKey("DimensionName"));if(e.containsKey("InitialDrillLevel")){g.setInitialDrillLevel(e.getIntegerByKey("InitialDrillLevel"));}}}};f.QInARepoBlendableQueryManager.importSorts=function(i,b){var a=i.getListByKey("BlendableDimensionSorts");var c=i.getStructureByKey("BlendableMeasureMemberSort");if(f.notNull(a)){f.QInARepoBlendableQueryManager.importDimensionSorts(b,a);}else if(f.notNull(c)){f.QInARepoBlendableQueryManager.importMeasureMemberSort(b,c);}};f.QInARepoBlendableQueryManager.importDimensionSorts=function(b,i){var a=i.getIterator();while(a.hasNext()){var c=a.next().asStructure();var d=c.getStringByKey("FieldName");var e=c.getStringByKey("DatasetId");var s=f.QInAConverter.lookupSortDirection(c.getIntegerByKey("SortDirection"));var p=c.getBooleanByKey("PreserveGrouping");b.addBlendableDimensionSort(d,e,s,p);}};f.QInARepoBlendableQueryManager.importMeasureMemberSort=function(b,i){var m=i.getStringByKey("MeasureMemberName");var d=i.getStringByKey("DatasetId");var s=f.QInAConverter.lookupSortDirection(i.getIntegerByKey("SortDirection"));b.setPrimaryBlendableMeasureMemberSort(m,d,s);};f.QInARepoBlendableQueryManager.importRanks=function(i,b){var a=i.getStructureByKey("PrimaryBlendableRank");if(f.notNull(a)){f.QInARepoBlendableQueryManager.importRank(a,b);}};f.QInARepoBlendableQueryManager.importRank=function(i,b){var r=i.getIntegerByKey("RankThreshold");var m=i.getStringByKey("MeasureMemberName");var a=i.getStringByKey("MeasureMemberDatasetId");var d=f.XListOfString.create();var c=f.XListOfString.create();var e=i.getListByKey("RankDimensionNames");var g=i.getListByKey("RankDimensionDatasetIds");var h=e.getIterator();var j=g.getIterator();while(h.hasNext()&&j.hasNext()){var k=h.next();var l=j.next();d.add(k.asString().getString());c.add(l.asString().getString());}var n=i.getStringByKey("Comparison");var o=f.ConditionComparisonOperator.lookupName(n);b.setPrimaryBlendableRank(r,m,a,d,c,o);};f.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructure=function(i,b,p,s){var a=f.PrStructure.create();a.putString("FirstModelName",p);a.putString("SecondModelName",s);a.putString("LinkType",b.getLinkType(s).getName());a.putString("UnlinkedDimensionJoinType",b.getUnlinkedDimensionJoinType(s).getName());var c=a.putNewList("ActiveDimensionLinks");var d=b.getActivePrimaryLinkDimensionNames(s).getIterator();while(d.hasNext()){var e=d.next();c.addString(e);}i.put(s,a);};f.QInARepoBlendableQueryManager.exportDrillOperations=function(i,b){var a=b.getBlendedDrillOperations().getIterator();var c=i.putNewList("DrillOperations");while(a.hasNext()){var d=a.next();var e=c.addNewStructure();e.putString("DimensionName",d.getDimensionName());e.putString("DatasetId",d.getDatasetId());var g=f.QInAConverter.lookupDrillStateInA(d.getDrillState());e.putString("DrillState",g);var h=e.putNewList("DrillPathElements");var j=d.getBlendedDrillPathElementInfos().getIterator();while(j.hasNext()){var k=j.next();var l=h.addNewStructure();l.putString("DatasetId",k.getDatasetId());l.putString("DimensionName",k.getDimensionName());l.putString("Member",k.getDrillMember());}}};f.QInARepoBlendableQueryManager.exportBlendedDimensionAxis=function(b,i,a){var c=i.putNewList(a.getName());var d=b.getBlendedDimensionsByAxis(a).getIterator();while(d.hasNext()){var e=d.next();var g=c.addNewStructure();g.putString("DatasetId",e.getDatasetId());g.putString("DimensionName",e.getDimensionName());g.putInteger("InitialDrillLevel",e.getInitialDrillLevel());}};f.QInARepoBlendableQueryManager.exportSorts=function(i,b){var a=b.getBlendableDimensionSorts();var p=b.getPrimaryBlendableMeasureMemberSort();if(a.size()>0){f.QInARepoBlendableQueryManager.exportDimensionSorts(i,a);}else if(f.notNull(p)){f.QInARepoBlendableQueryManager.exportMeasureMemberSort(i,p);}};f.QInARepoBlendableQueryManager.exportDimensionSorts=function(i,b){var a=i.putNewList("BlendableDimensionSorts");var c=b.getIterator();while(c.hasNext()){var d=c.next();var e=f.PrStructure.create();e.putString("FieldName",d.getFieldName());e.putString("DatasetId",d.getDatasetId());e.putInteger("SortDirection",f.QInAConverter.lookupSortDirectionInA(d.getSortDirection()));e.putBoolean("PreserveGrouping",d.getPreserveGrouping());a.add(e);}};f.QInARepoBlendableQueryManager.exportMeasureMemberSort=function(i,b){var a=i.putNewStructure("BlendableMeasureMemberSort");a.putString("MeasureMemberName",b.getMeasureMemberName());a.putString("DatasetId",b.getDatasetId());a.putInteger("SortDirection",f.QInAConverter.lookupSortDirectionInA(b.getSortDirection()));};f.QInARepoBlendableQueryManager.exportRanks=function(i,b){var p=b.getPrimaryBlendableRank();if(f.notNull(p)){f.QInARepoBlendableQueryManager.exportRank(i.putNewStructure("PrimaryBlendableRank"),p);}};f.QInARepoBlendableQueryManager.exportRank=function(i,b){i.putInteger("RankThreshold",b.getThreshold());i.putString("MeasureMemberName",b.getMeasureMemberName());i.putString("MeasureMemberDatasetId",b.getMeasureMemberDatasetId());var a=i.putNewList("RankDimensionNames");var c=i.putNewList("RankDimensionDatasetIds");var d=b.getDimensionNames();var e=b.getDimensionDatasetIds();var g=d.getIterator();var h=e.getIterator();while(g.hasNext()&&h.hasNext()){a.addString(g.next());c.addString(h.next());}i.putString("Comparison",b.getConditionComparisonOperator().getName());};f.QInARepoBlendableQueryManager.prototype.getComponentType=function(){return f.OlapComponentType.BLENDABLE_QUERY_MANAGER;};f.QInARepoBlendableQueryManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=a.getStructureByKey("PrimaryQueryManager");var e=d.getStringByKey("DatasetId");var g=b.getPrimaryQueryManager();if(f.isNull(g)||!f.XString.isEqual(g.getQueryModel().getDatasetId(),e)){g=null;var h=b.getOlapEnv().getSharedQueryManager(e);if(f.notNull(h)){g=h.cloneQueryManagerExt(f.QueryCloneMode.CURRENT_STATE);b.setPrimaryQueryManager(g);}}if(f.notNull(g)){g.getQueryModel().deserializeFromElementExt(i.getOriginalMode(),d.getStructureByKey("Query"));}var j=c.getOlapEnv().getModelLinkManager();var k=a.getListByKey("QueryManagers");var l=a.getStructureByKey("QueryModelLinkSettings");b.clearQueryModelLinkSettings();if(f.notNull(k)){var n=k.getIterator();while(n.hasNext()){var o=n.next().asStructure();var s=o.getStringByKey("DatasetId");var q=b.getQueryManagerByDatasetId(s);if(f.isNull(q)){var r=b.getOlapEnv().getSharedQueryManager(s);q=r.cloneQueryManagerExt(f.QueryCloneMode.CURRENT_STATE);b.addSecondaryQueryManager(q);}if(f.notNull(q)){if(j.getDimensionLinksByDatasetIds(b.getStorageName(),e,s,true).size()>0){q.getQueryModel().deserializeFromElementExt(i.getOriginalMode(),o.getStructureByKey("Query"));f.QInARepoBlendableQueryManager.importQueryModelLinkSettingStructure(l,b,s);}}else{throw f.XException.createRuntimeException(f.XStringUtils.concatenate3("Query manager ","DatasetId"," not found in blendable query manager or olap environment shared query managers."));}}}b.clearPrimaryBlendedMeasures();var t=a.getListByKey("PrimaryBlendedMeasures");if(f.notNull(t)){var u=t.getIterator();while(u.hasNext()){var v=u.next();var w=f.QInAConverter.lookupMeasureStructureMemberType(v.getStringByKey("MemberType"));var x=i.importComponent(w,v,null,b.getQueryModel().getPrimaryCalculationDimension(),b.getQueryModel());b.addPrimaryBlendedMeasure(x);}}f.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(b,a.getStructureByKey("DimensionOrder"),f.AxisType.ROWS);f.QInARepoBlendableQueryManager.importBlendedDimensionInfoAxis(b,a.getStructureByKey("DimensionOrder"),f.AxisType.COLUMNS);f.QInARepoBlendableQueryManager.importDrillOperations(b,a);f.QInARepoBlendableQueryManager.importSorts(a,b);f.QInARepoBlendableQueryManager.importRanks(a,b);b.setUseEmptyAllMemberMeasureFilter(a.getBooleanByKey("UseAllMemberFilter"));return null;};f.QInARepoBlendableQueryManager.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var p=b.getPrimaryQueryManager();var c=p.getQueryModel().getDatasetId();i.putString("Name",b.getName());var d=i.putNewStructure("PrimaryQueryManager");d.putString("Name",p.getName());d.putString("DatasetId",c);d.put("Query",p.getQueryModel().serializeToElement(e.getOriginalMode()));i.putString("StorageName",b.getStorageName());var g=i.putNewList("QueryManagers");var h=i.putNewStructure("QueryModelLinkSettings");var s=b.getSecondaryQueryManagers().getIterator();while(s.hasNext()){var j=s.next();var k=j.getQueryModel().getDatasetId();var l=g.addNewStructure();l.putString("DatasetId",k);l.putString("Name",j.getName());l.put("Query",j.getQueryModel().serializeToElement(e.getOriginalMode()));f.QInARepoBlendableQueryManager.exportQueryModelLinkSettingStructure(h,b,c,k);}var n=i.putNewList("PrimaryBlendedMeasures");var o=b.getPrimaryBlendedMeasures().getIterator();while(o.hasNext()){var q=o.next();e.exportComponent(q.getMemberType(),q,n.addNewStructure(),a);}var r=i.putNewStructure("DimensionOrder");f.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(b,r,f.AxisType.ROWS);f.QInARepoBlendableQueryManager.exportBlendedDimensionAxis(b,r,f.AxisType.COLUMNS);f.QInARepoBlendableQueryManager.exportDrillOperations(i,b);f.QInARepoBlendableQueryManager.exportSorts(i,b);f.QInARepoBlendableQueryManager.exportRanks(i,b);i.putBoolean("UseAllMemberFilter",b.isUseEmptyAllMemberMeasureFilter());return i;};f.QInARepoConditionManager=function(){};f.QInARepoConditionManager.prototype=new f.QInARepository();f.QInARepoConditionManager.prototype._ff_c="QInARepoConditionManager";f.QInARepoConditionManager.prototype.getComponentType=function(){return f.OlapComponentType.CONDITIONS_MANAGER;};f.QInARepoConditionManager.prototype.getTagName=function(){return"ConditionsRepo";};f.QInARepoConditionManager.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoConditionManager.prototype.importComponentWithList=function(a,b,m,p,c){var d=m;if(f.notNull(d)){if(!f.PrUtils.isListEmpty(b)){var q=c.getQueryModel();var l=b.size();for(var i=0;i<l;i++){var e=b.getStructureAt(i);var g=a.importCondition(q,e,null);if(!d.containsKey(g.getName())){d.add(g);}}this.removeModelElementsNotInInA(a,b,d,d.getValuesAsReadOnlyList());}else if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA){d.clear();}}return d;};f.QInARepoConditionManager.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);if(f.notNull(b)){i.put("Elements",b);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoConditionManager.prototype.exportComponentWithList=function(e,m,a){var b=null;var c=m;if(f.notNull(c)){var l=c.size();if(l>0){b=f.PrFactory.createList();for(var i=0;i<l;i++){var d=c.get(i);if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.isUserCondition()||d.getModCounter()>0){var g=e.exportCondition(d);if(f.notNull(g)&&!g.isEmpty()){b.add(g);}}}if(b.isEmpty()){b=null;}}}return b;};f.QInARepoConditionsCondition=function(){};f.QInARepoConditionsCondition.prototype=new f.QInARepository();f.QInARepoConditionsCondition.prototype._ff_c="QInARepoConditionsCondition";f.QInARepoConditionsCondition.exportBreakGroupDimensionList=function(c){if(f.isNull(c)){return null;}var a=f.PrFactory.createList();var b=c.getBreakGroupDimensions();var l=b.size();for(var i=0;i<l;i++){a.addString(b.get(i).getName());}return a;};f.QInARepoConditionsCondition.exportEvaluateOnDimensionsList=function(e,c){if(f.isNull(c)){return null;}var a=f.PrFactory.createList();var b=c.getEvaluationDimensions();var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.getModCounter()>0;if(s){var l=b.size();for(var i=0;i<l;i++){a.addString(b.get(i).getName());}}return a;};f.QInARepoConditionsCondition.prototype.getComponentType=function(){return f.OlapComponentType.CONDITION;};f.QInARepoConditionsCondition.prototype.importComponentWithStructure=function(i,a,m,p,c){var n=null;if(f.notNull(a)){var b=a.getStringByKey("Name");if(f.isNull(m)){var d=a.getBooleanByKeyExt("IsBackendCondition",true);var e=p;if(e.getByKey(b)!==null){n=e.getConditionByName(b);}else{n=f.QCondition.create(c,e,b,d);}}else{n=m;n.setConditionName(b);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Active")){n.setActive(a.getBooleanByKey("Active"));}n.setUsedState(a.getStringByKey("IsUsed"));if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Description")){n.setDescription(a.getStringByKey("Description"));}var o=a.getStringByKey("OnDisabled");if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("AfterVisibilityFilter")){n.setApplyConditionAfterVisibilityFilter(a.getBooleanByKeyExt("AfterVisibilityFilter",false));}if(f.notNull(o)){if(f.XString.isEqual(o,"Error")){n.setOnDisabledToWarning(false);}}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("EvaluateOnDimensions")){var g=a.getStringByKey("EvaluateOnDimensions");var h=f.ConditionDimensionEvaluationType.lookupName(g);if(f.notNull(h)){n.setDimensionEvaluationType(h);}}var q=c.getQueryModel();var j=a.getListByKey("EvaluateOnDimensionsList");var k;var l;if(!f.PrUtils.isListEmpty(j)&&f.notNull(q)){k=j.size();n.clearEvaluationDimensions();for(l=0;l<k;l++){var r=j.getStringAt(l);if(f.notNull(r)){var s=q.getDimensionByNameFromExistingMetadata(r);if(f.notNull(s)){n.addEvaluationDimension(s);}}}}var t=a.getListByKey("Threshold");if(!f.PrUtils.isListEmpty(t)){var u=t.size();n.clearThresholds();for(var v=0;v<u;v++){var w=t.getStructureAt(v);if(f.notNull(w)){n.addThreshold(i.importConditionThreshold(q,w,null,n));}}}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("BreakGroup")){n.setBreakGroup(a.getBooleanByKeyExt("BreakGroup",false));}var x=a.getListByKey("BreakGroupList");if(!f.PrUtils.isListEmpty(x)&&f.notNull(q)){k=x.size();for(l=0;l<k;l++){var y=x.getStringAt(l);if(f.notNull(y)){var z=q.getDimensionByNameFromExistingMetadata(y);if(f.notNull(z)){n.addBreakGroupDimension(z);}}}}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("BreakHierarchy")){n.setBreakHierarchy(a.getBooleanByKeyExt("BreakHierarchy",false));}}return n;};f.QInARepoConditionsCondition.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;if(e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&c.isBackendCondition()&&c.hasPropertyChanged(f.QConditionProperties.QY_CONDITIONS_ACTIVE)){a.putString("Name",c.getName());a.putBoolean("Active",c.isActive());a.putBoolean("IsBackendCondition",c.isBackendCondition());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.isUserCondition()){var q=c.getQueryModel();var d=q.getSystemType().isTypeOf(f.SystemType.HANA);a.putBoolean("IsBackendCondition",c.isBackendCondition());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QConditionProperties.QY_CONDITIONS_ACTIVE)){a.putBoolean("Active",c.isActive());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QConditionProperties.QY_CONDITIONS_AFTER_VISIBILITY_FILTER)){if(c.isApplyingConditionAfterVisibilityFilter()){a.putBoolean("AfterVisibilityFilter",true);}}if(d){a.putStringNotNullAndNotEmpty("Description",c.getDescription());}else{a.putString("Description",c.getDescription());}a.putString("Name",c.getName());var g=c.getDimensionEvaluationType();if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QConditionProperties.QY_CONDITIONS_EVALUATE_ON_DIMENSIONS)){a.putString("EvaluateOnDimensions",g.getName());}if(g===f.ConditionDimensionEvaluationType.GIVEN_LIST){var h=f.QInARepoConditionsCondition.exportEvaluateOnDimensionsList(e,c);a.put("EvaluateOnDimensionsList",h);}var t=c.getThresholds();var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(s){var j=t.size();if(j>0){var k=f.PrFactory.createList();for(var i=0;i<j;i++){var l=e.exportConditionThreshold(t.get(i));if(f.notNull(l)){k.add(l);}}if(!k.isEmpty()){a.put("Threshold",k);}else{return null;}}}if(d){if(f.XCollectionUtils.hasElements(q.getPreQueries())&&!c.getOnDisabledToWarning()){a.putString("OnDisabled","Error");}var n=c.isBreakGroup();if(n){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QConditionProperties.QY_BREAK_GROUP)){a.putBoolean("BreakGroup",true);}var o=f.QInARepoConditionsCondition.exportBreakGroupDimensionList(c);a.put("BreakGroupList",o);}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QConditionProperties.QY_CONDITIONS_BREAK_HIERARCHY)){if(c.isBreakHierarchy()){a.putBoolean("BreakHierarchy",true);}}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoConditionsThreshold=function(){};f.QInARepoConditionsThreshold.prototype=new f.QInARepository();f.QInARepoConditionsThreshold.prototype._ff_c="QInARepoConditionsThreshold";f.QInARepoConditionsThreshold.importSingleMeasureCoordinate=function(q,t,m){if(f.isNull(t)||f.isNull(m)){return;}var i=m.getStringByKey("DimensionName");var a=m.getStringByKey("MemberName");if(f.XStringUtils.isNullOrEmpty(i)||f.XStringUtils.isNullOrEmpty(a)){return;}var b=q;if(f.isNull(b)){b=t.getContext().getQueryModel();}if(f.notNull(b)){var d=b.getDimensionByNameFromExistingMetadata(i);if(f.notNull(d)){var c=d.getDimensionMember(a);if(f.notNull(c)){t.addMeasureCoordinate(c);}}}};f.QInARepoConditionsThreshold.importThresholdValue=function(a,i){if(f.isNull(a)||f.isNull(i)){return;}if(i.isBoolean()){a.setBoolean(i.getBoolean());}else if(i.isString()){a.setString(i.getString());}else if(i.isDouble()){a.setDouble(i.getDouble());}else if(i.isInteger()){a.setInteger(i.getInteger());}else if(i.isLong()){a.setLong(i.getLong());}};f.QInARepoConditionsThreshold.setValue=function(e,p,i,v,a){if(a===f.XValueType.VARIABLE){var b=v.getVariableValue();if(f.notNull(b)){i.putString(p,b.getName());if(f.XString.isEqual(p,"Low")){i.putString("LowIs","Variable");}else if(f.XString.isEqual(p,"High")){i.putString("HighIs","Variable");}}}else{f.QInAValueUtils.exportPlaceholderValue(e,p,i,v,a,v.getQueryModel());}};f.QInARepoConditionsThreshold.prototype.getComponentType=function(){return f.OlapComponentType.CONDITIONS_THRESHOLD;};f.QInARepoConditionsThreshold.prototype.importComponentWithStructure=function(a,b,m,p,c){var n=null;if(f.notNull(b)){if(f.isNull(m)){n=f.QConditionThreshold.create(c,p);}else{n=m;}var d=b.getStringByKey("Comparison");var e=f.ConditionComparisonOperator.lookupName(d);if(f.notNull(e)){n.setComparisonOperator(e);}var g=b.getByKey("Low");f.QInARepoConditionsThreshold.importThresholdValue(n.getLow(),g);var h=b.getByKey("LowIs");f.QInARepoConditionsThreshold.importThresholdValue(n.getLowIs(),h);var j=b.getByKey("High");f.QInARepoConditionsThreshold.importThresholdValue(n.getHigh(),j);var k=b.getByKey("HighIs");f.QInARepoConditionsThreshold.importThresholdValue(n.getHighIs(),k);var l=b.getListByKey("MeasureCoordinate");if(f.notNull(l)){var q=c.getQueryModel();var o=l.size();for(var i=0;i<o;i++){f.QInARepoConditionsThreshold.importSingleMeasureCoordinate(q,n,l.getStructureAt(i));}}n.setLeavesOnly(b.getBooleanByKeyExt("LeavesOnly",false));var r=b.getByKey("Level");if(f.notNull(r)){n.setLevel(f.XIntegerValue.create(r.getInteger()));}}return n;};f.QInARepoConditionsThreshold.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;var d=c.getMeasureCoordinates();var g=f.PrFactory.createList();var l=d.size();if(l===0){return null;}for(var i=0;i<l;i++){var h=d.get(i);var s=f.PrFactory.createStructure();s.putString("DimensionName",h.getDimension().getName());s.putString("MemberName",h.getName());g.add(s);}if(!g.isEmpty()){a.put("MeasureCoordinate",g);}var q=c.getQueryModel();var j=q.getSystemType().isTypeOf(f.SystemType.HANA);var k=c.getLow();var n=c.getHigh();if(j){if(k.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"Low",a,k,f.XValueType.INTEGER);}if(n.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"High",a,n,f.XValueType.INTEGER);}var o=c.getLevel();if(f.notNull(o)){a.putInteger("Level",o.getInteger());}}else{if(k.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"Low",a,k,k.getValueType());}if(n.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"High",a,n,n.getValueType());}var p=c.getLowIs();if(p.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"LowIs",a,p,p.getValueType());}var r=c.getHighIs();if(r.getValue()!==null){f.QInARepoConditionsThreshold.setValue(e,"HighIs",a,r,r.getValueType());}}var t=c.getComparisonOperator();a.putString("Comparison",t.getName());return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoCurrencyTranslationItem=function(){};f.QInARepoCurrencyTranslationItem.prototype=new f.QInARepository();f.QInARepoCurrencyTranslationItem.prototype._ff_c="QInARepoCurrencyTranslationItem";f.QInARepoCurrencyTranslationItem.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_ITEM;};f.QInARepoCurrencyTranslationItem.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.notNull(b)&&f.XCollectionUtils.hasElements(a)){b.setMetadataDefined(a.getBooleanByKeyExt("MetadataDefined",false));b.setSourceCurrency(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a.getStructureByKey("SourceCurrency")));b.setTargetCurrency(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a.getStructureByKey("TargetCurrency")));b.setErrorHandling(f.QInAConverter.lookupCtErrorHandlingMode(a.getStringByKey("ErrorHandling")));if(a.getBooleanByKeyExt("DefaultCurrency",false)){b.setDefaultCurrency();}b.setReferenceDate(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.DATE,a.getStructureByKey("ReferenceDate")));if(a.containsKey("ReferenceDate")){var d=a.getStructureByKey("ReferenceDate");if(d.containsKey("DateOffset")||d.containsKey("DateOffsetGranularity")){var e=b.getDateOffset();if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.containsKey("DateOffset")){e=d.getIntegerByKey("DateOffset");}var g=b.getDateOffsetGranularity();if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.containsKey("DateOffsetGranularity")){g=f.DateOffsetGranularity.lookup(d.getStringByKey("DateOffsetGranularity"));}if(f.notNull(g)){if(b.getReferenceDateFieldName()!==null){b.setReferenceDateByFieldNameOffsetAndGranularity(b.getReferenceDateFieldName(),e,g);}else{b.setDynamicReferenceDateWithOffsetAndGranularity(e,g);}}}}b.setRateName(this.importSpecificCurrencyTranslationElement(i,b,f.XValueType.STRING,a.getStructureByKey("RateName")));if(a.containsKey("RateName")){var h=a.getStructureByKey("RateName");if(h.hasStringByKey("RateType")){b.setFixedRateType(f.QInAConverter.lookupRateType(h.getStringByKey("RateType")));}if(h.hasStringByKey("RateVersion")){b.setFixedRateVersion(h.getStringByKey("RateVersion"));}if(h.hasStringByKey("Category")){b.setFixedCategory(f.QInAConverter.lookupCategory(h.getStringByKey("Category")));}}}return m;};f.QInARepoCurrencyTranslationItem.prototype.importSpecificCurrencyTranslationElement=function(i,s,v,a){var b=null;if(f.notNull(a)){if(a.containsKey("Fixed")){var c=a.getStringByKey("Fixed");if(v===f.XValueType.STRING){b=f.QCurrencyLookupValue.createFixedByValue(s,f.XStringValue.create(c));}else if(v===f.XValueType.DATE){b=f.QCurrencyLookupValue.createFixedByValue(s,f.XDate.createDateSafe(c));}}else if(a.containsKey("DimensionAttribute")){b=f.QCurrencyLookupValue.createByFieldName(s,a.getStringByKey("DimensionAttribute"));}else if(a.containsKey("Formula")){var d=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(i,s.getQueryModel().getMeasureDimension(),a.getStructureByKey("Formula"),null,null);b=f.QCurrencyLookupValue.createByFormulaItem(s,d);}else if(a.containsKey("Variable")){b=f.QCurrencyLookupValue.createByVariableName(s,a.getStringByKey("Variable"));}}return b;};f.QInARepoCurrencyTranslationItem.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(f.notNull(b)){i.putStringNotNullAndNotEmpty("ErrorHandling",f.QInAConverter.lookupCtErrorHandlingModeInA(b.getErrorHandling()));i.putString("Name",b.getName());i.putString("Description",b.getText());i.putBoolean("MetadataDefined",b.isMetadataDefined());if(b.isDefaultCurrency()){i.putBoolean("DefaultCurrency",true);}var q=b.getQueryModel();this.exportSpecificCurrencyTranslationProperty(e,i,"SourceCurrency",b.getSourceCurrency(),q);this.exportSpecificCurrencyTranslationProperty(e,i,"TargetCurrency",b.getTargetCurrency(),q);this.exportSpecificCurrencyTranslationProperty(e,i,"ReferenceDate",b.getReferenceDate(),q);this.exportReferenceDateOffsets(i,b,e);this.exportSpecificCurrencyTranslationProperty(e,i,"RateName",b.getRateName(),q);this.exportPlanningRateNameSettings(i,b,e);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoCurrencyTranslationItem.prototype.exportPlanningRateNameSettings=function(i,s,e){if((f.CtCategory.isDefined(s.getFixedCategory())||f.XStringUtils.isNotNullAndNotEmpty(s.getFixedRateVersion())||f.CtRateType.isDefined(s.getFixedRateType()))){var a;if(i.containsKey("RateName")){a=i.getStructureByKey("RateName");}else{a=i.putNewStructure("RateName");}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QCurrencyTranslationProperties.QY_RATE_TYPE)){a.putStringNotNullAndNotEmpty("RateType",f.QInAConverter.lookupRateTypeInA(s.getFixedRateType()));}a.putStringNotNullAndNotEmpty("RateVersion",s.getFixedRateVersion());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QCurrencyTranslationProperties.QY_CATEGORY)){a.putStringNotNullAndNotEmpty("Category",f.QInAConverter.lookupCategoryInA(s.getFixedCategory()));}}};f.QInARepoCurrencyTranslationItem.prototype.exportReferenceDateOffsets=function(i,s,e){if(s.getDateOffsetGranularity()!==null){var a;if(i.containsKey("ReferenceDate")){a=i.getStructureByKey("ReferenceDate");}else{a=i.putNewStructure("ReferenceDate");}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QCurrencyTranslationProperties.QY_DATE_OFFSET_GRANULARITY)){a.putString("DateOffsetGranularity",s.getDateOffsetGranularity().getName());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QCurrencyTranslationProperties.QY_DATE_OFFSET)){a.putInteger("DateOffset",s.getDateOffset());}}};f.QInARepoCurrencyTranslationItem.prototype.exportSpecificCurrencyTranslationProperty=function(e,i,a,l,q){if(f.notNull(l)){if(l.isFixed()){i.putNewStructure(a).putString("Fixed",l.getFixedValue().getStringRepresentation());}else if(l.isFieldBased()){i.putNewStructure(a).putString("DimensionAttribute",l.getFieldName());}else if(l.isFormulaBased()){var b=i.putNewStructure(a).putNewStructure("Formula");f.QInARepoMemberAbstract.exportFormulaItem(e,l.getFormulaItem(),b,q);}else if(l.isVariableBased()){i.putNewStructure(a).putString("Variable",l.getVariableName());}}};f.QInARepoCurrencyTranslationList=function(){};f.QInARepoCurrencyTranslationList.prototype=new f.QInARepository();f.QInARepoCurrencyTranslationList.prototype._ff_c="QInARepoCurrencyTranslationList";f.QInARepoCurrencyTranslationList.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_LIST;};f.QInARepoCurrencyTranslationList.prototype.getTagName=function(){return"CurrencyTranslationsRepo";};f.QInARepoCurrencyTranslationList.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoCurrencyTranslationList.prototype.importComponentWithList=function(a,b,m,p,c){var d=c.getQueryModel().getCurrencyTranslationManager();if(f.notNull(d)&&f.XCollectionUtils.hasElements(b)){var s=b.size();for(var i=0;i<s;i++){var e=b.getStructureAt(i);var n=e.getStringByKey("Name");var g=e.getStringByKey("Description");var h=d.getMeasureCurrencyTranslation(n);if(f.isNull(h)){h=d.addNewMeasureCurrencyTranslationBase(n,g);}a.importCurrencyTranslationElement(e,h,c);}}return d;};f.QInARepoCurrencyTranslationList.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);i.put("Elements",b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoCurrencyTranslationList.prototype.exportComponentWithList=function(e,m,a){var b=null;var c=m;var s=c.getMeasureCurrencyTranslationsForInaData();if(f.XCollectionUtils.hasElements(s)){b=f.PrFactory.createList();var d=s.size();for(var i=0;i<d;i++){var g=s.get(i);e.exportCurrencyTranslationElement(g,b.addNewStructure());}}return b;};f.QInARepoCurrencyTranslationManager=function(){};f.QInARepoCurrencyTranslationManager.prototype=new f.QInARepository();f.QInARepoCurrencyTranslationManager.prototype._ff_c="QInARepoCurrencyTranslationManager";f.QInARepoCurrencyTranslationManager.prototype.getComponentType=function(){return f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER;};f.QInARepoCurrencyTranslationManager.prototype.getTagName=function(){return"CurrencyTranslationRepo";};f.QInARepoCurrencyTranslationManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.notNull(a)&&f.notNull(b)){this.importQueryCurrencyTranslation(i,a,b);this.importSpecificCurrencyTranslations(i,a,b,c);this.importDefaultCurrencyTranslation(i,a,b,c);}return m;};f.QInARepoCurrencyTranslationManager.prototype.importDefaultCurrencyTranslation=function(i,a,c,b){var d=a.getStructureByKey("Query");if(f.notNull(d)&&f.notNull(c)){var e=c.getQuery2MeasureCurrencyTranslationBridge();if(f.notNull(e)){e.setCurrencyTranslationName(a.getStringByKey("CurrencyTranslationName"));e.setApplyDefinedCurrencyTranslation(a.getBooleanByKeyExt("Active",false));e.setApplyToDefaultCurrencyTranslation(a.getBooleanByKeyExt("CurrencyTranslationApplyToDefault",false));i.importCurrencyTranslationElement(d,e.getMeasureCurrencyTranslation(),b);}}};f.QInARepoCurrencyTranslationManager.prototype.importQueryCurrencyTranslation=function(i,a,c){var b=c.getCurrencyTranslationDetails();if(f.notNull(b)&&a.hasStringByKey("Name")&&a.hasStringByKey("Operation")){var d=a.getStringByKey("Name");var e=a.getStringByKey("Operation");var g=a.getStringByKey("Target");if(!f.XStringUtils.isNullOrEmpty(b.getCurrencyTranslationName())&&b.getCurrencyTranslationOperation()!==null&&!f.XStringUtils.isNullOrEmpty(b.getCurrencyTranslationOperation().getName())&&(f.XStringUtils.isNullOrEmpty(d)||f.XStringUtils.isNullOrEmpty(e)||f.XStringUtils.isNullOrEmpty(g))){c.resetCurrencyTranslationDetails();}else{b.setCurrencyTranslationName(d);b.setCurrencyTranslationOperation(f.CurrencyTranslationOperation.lookup(e));b.setCurrencyTranslationTarget(g);}}};f.QInARepoCurrencyTranslationManager.prototype.importSpecificCurrencyTranslations=function(a,b,c,d){var e=b.getListByKey("CurrencyTranslations");if(f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var n=g.getStringByKey("Name");var h=g.getStringByKey("Description");var j=c.getMeasureCurrencyTranslation(n);if(f.isNull(j)){j=c.addNewMeasureCurrencyTranslationBase(n,h);}a.importCurrencyTranslationElement(g,j,d);}}};f.QInARepoCurrencyTranslationManager.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;this.exportCurrencyTranslationDetails(i,c);this.exportSpecificCurrencyTranslations(e,i,c);this.exportDefaultCurrencyTranslations(e,i,c);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoCurrencyTranslationManager.prototype.exportDefaultCurrencyTranslations=function(e,i,c){var b=c.getQuery2MeasureCurrencyTranslationBridge();if(f.notNull(b)){var a=i.putNewStructure("Query");var s=b.getMeasureCurrencyTranslation();e.exportCurrencyTranslationElement(s,a);i.putStringNotNullAndNotEmpty("CurrencyTranslationName",b.getCurrencyTranslationName());i.putBoolean("Active",b.isApplyDefinedCurrencyTranslation());if(b.isApplyToDefaultCurrencyTranslation()){i.putBoolean("CurrencyTranslationApplyToDefault",b.isApplyToDefaultCurrencyTranslation());}}};f.QInARepoCurrencyTranslationManager.prototype.exportCurrencyTranslationDetails=function(i,c){if(f.isNull(c)||!c.getModelCapabilities().supportsQueryCurrencyTranslation()){return;}var a=c.getCurrencyTranslationDetails();if(f.notNull(a)){if(f.XStringUtils.isNotNullAndNotEmpty(a.getCurrencyTranslationName())){if(a.getCurrencyTranslationOperation()===null){throw f.XException.createIllegalArgumentException("CurrencyTranslation Operation required.");}i.putString("Operation",a.getCurrencyTranslationOperation().getName());i.putString("Name",a.getCurrencyTranslationName());if(a.getCurrencyTranslationOperation()===f.CurrencyTranslationOperation.BOTH||a.getCurrencyTranslationOperation()===f.CurrencyTranslationOperation.TARGET){if(a.getCurrencyTranslationTarget()===null){throw f.XException.createIllegalArgumentException("CurrencyTranslation Target Currency required.");}}i.putString("Target",a.getCurrencyTranslationTarget());}else{i.putString("Operation","");i.putString("Name","");i.putString("Target","");}}};f.QInARepoCurrencyTranslationManager.prototype.exportSpecificCurrencyTranslations=function(e,a,c){if(f.isNull(c)||!c.getModelCapabilities().supportsCurrencyTranslation()){return;}var s=c.getMeasureCurrencyTranslations();if(f.XCollectionUtils.hasElements(s)){var b=a.putNewList("CurrencyTranslations");var d=s.size();for(var i=0;i<d;i++){var g=s.get(i);e.exportCurrencyTranslationElement(g,b.addNewStructure());}}};f.QInARepoDataCell=function(){};f.QInARepoDataCell.prototype=new f.QInARepository();f.QInARepoDataCell.prototype._ff_c="QInARepoDataCell";f.QInARepoDataCell.prototype.getComponentType=function(){return f.OlapComponentType.DATA_CELL;};f.QInARepoDataCell.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var b=q.getQueryDataCellsBase();var d=this.getDataCellFromExistingList(q,a);var e=false;if(f.isNull(d)){d=b.newQueryDataCell(this.getDataCellName(a,q));e=true;}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("SignReversal")){d.setSignReversal(a.getBooleanByKeyExt("SignReversal",false));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Emphasized")){d.setEmphasized(a.getBooleanByKeyExt("Emphasized",false));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Cumulation")){d.setCumulation(a.getBooleanByKeyExt("Cumulation",false));}d.setInputEnabled(a.getBooleanByKeyExt("InputEnabled",false));d.setDisaggregationMode(f.DisaggregationMode.lookupWithDefault(a.getStringByKeyExt("DisaggregationMode",null),f.DisaggregationMode.NONE));d.setDisaggregationRefCellName(a.getStringByKeyExt("DisaggregationReferenceCellName",null));if((e||q.isBasicMeasureSettingsExportedInRepo())&&(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("ScalingFactor"))){d.setScalingFactor(a.getIntegerByKeyExt("ScalingFactor",1));}if((e||q.isBasicMeasureSettingsExportedInRepo())&&(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Decimals"))){d.setDecimalPlaces(a.getIntegerByKeyExt("Decimals",0));}var g=a.getIntegerByKeyExt("CellValueType",0);var h=f.QInAConverter.lookupValueTypeByInt(g);d.setBaseCellValueType(h);if(h===f.XValueType.DIMENSION_MEMBER){var j=a.getStringByKey("CellDimensionReference");d.setDimensionReference(q.getDimensions().getByKey(j));}var l=a.getListByKey("DimensionMemberReferences");if(f.notNull(l)){for(var k=0;k<l.size();k++){var n=l.getStringAt(k);if(!d.hasMeasureReference(n)){d.addDimensionMemberReference(n);}}}if(d.getName()===null&&d.getReferenceStructureElement1()===null&&d.getReferenceStructureElement2()===null){b.removeElement(d);}return d;};f.QInARepoDataCell.prototype.getDataCellFromExistingList=function(q,i){var a=i.getStringByKey("Name");var b=i.getListByKey("DimensionMemberReferences");var c=q.getQueryDataCellsBase();if(f.XCollectionUtils.hasElements(b)){var m=b.getStringAt(0);var d=b.size()>1?b.getStringAt(1):null;var e=f.XStringUtils.isNotNullAndNotEmpty(d);return f.XCollectionUtils.findFirst(c,function(h){return h.hasMeasureReference(m)&&(e&&h.hasMeasureReference(d)||!e&&h.getReferenceStructureElement2()===null);}.bind(this));}else if(f.XStringUtils.isNotNullAndNotEmpty(a)){var g=c.getByKey(a);if(f.notNull(g)&&g.getReferenceStructureElement1()===null&&g.getReferenceStructureElement2()===null){return g;}}return null;};f.QInARepoDataCell.prototype.getDataCellName=function(a,q){var n=a.getStringByKey("Name");var b=q.getQueryDataCells();if(b.containsKey(n)){var i=b.size();while(b.containsKey(f.XInteger.convertToString(i))){i++;}n=f.XInteger.convertToString(i);}return n;};f.QInARepoDataCell.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;i.putString("Name",d.getName());var b=d.getDisaggregationMode();f.QInAExportUtil.setNameIfNotNull(i,"DisaggregationMode",f.isNull(b)?f.DisaggregationMode.NONE:b);var r=d.getDisaggregationRefCell();i.putString("DisaggregationReferenceCellName",f.isNull(r)?"0":r.getName());if(f.XStringUtils.isNullOrEmpty(d.getName())||e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDataCellProperties.QY_SCALING_FACTOR)){i.putInteger("ScalingFactor",d.getScalingFactor());}if(f.XStringUtils.isNullOrEmpty(d.getName())||e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDataCellProperties.QY_DECIMAL_PLACES)){i.putInteger("Decimals",d.getDecimalPlaces());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDataCellProperties.QY_SIGN_REVERSAL)){i.putBoolean("SignReversal",d.hasSignReversal());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDataCellProperties.QY_EMPHASIZED)){i.putBoolean("Emphasized",d.isEmphasized());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDataCellProperties.QY_CUMULATION)){i.putBoolean("Cumulation",d.isCumulated());}var c=d.getBaseValueType();var g=f.QInAConverter.lookupIntByValueType(c);i.putInteger("CellValueType",g);var h=i.putNewList("DimensionMemberReferences");var j=d.getReferenceStructureElement1();if(f.notNull(j)){h.addString(j.getName());j=d.getReferenceStructureElement2();if(f.notNull(j)){h.addString(j.getName());}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoDataCellsAll=function(){};f.QInARepoDataCellsAll.prototype=new f.QInARepository();f.QInARepoDataCellsAll.prototype._ff_c="QInARepoDataCellsAll";f.QInARepoDataCellsAll.prototype.getComponentType=function(){return f.OlapComponentType.DATA_CELLS;};f.QInARepoDataCellsAll.prototype.getTagName=function(){return"QueryDataCellsRepo";};f.QInARepoDataCellsAll.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoDataCellsAll.prototype.importComponentWithList=function(a,b,m,p,c){var d=c.getModelCapabilities();var q=c.getQueryModel();if(d.supportsDataCells()&&q.getQueryManager().getInitSettings().isRequestingDataCells()){if(f.notNull(b)){for(var i=0;i<b.size();i++){a.importDataCell(b.getStructureAt(i),q);}}}return null;};f.QInARepoDataCellsAll.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);if(f.notNull(b)){i.put("Elements",b);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoDataCellsAll.prototype.exportComponentWithList=function(e,m,a){var q=m;var b=null;var c=q.getModelCapabilities();if(c.supportsDataCells()&&q.getQueryManager().getInitSettings().isRequestingDataCells()){var d=q.getQueryDataCells();b=f.PrFactory.createList();var s=d.size();for(var i=0;i<s;i++){var g=d.get(i);var h=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||g.isUserAddedDataCell()||g.getModCounter()>0;if(h){var j=e.exportDataCell(g,null);b.add(j);}}}return b;};f.QInARepoDataSource=function(){};f.QInARepoDataSource.prototype=new f.QInARepository();f.QInARepoDataSource.prototype._ff_c="QInARepoDataSource";f.QInARepoDataSource.importQd=function(i,a,n,c){var d=null;var b=a;if(f.notNull(n)){if(f.notNull(b)&&!b.containsKey(n)){b=b.getStructureByKey("Analytics");if(f.notNull(b)&&!b.containsKey(n)){b=b.getStructureByKey("Definition");}}if(f.notNull(b)&&b.containsKey(n)){var t=b.getElementTypeByKey(n);if(t===f.PrElementType.STRING){d=f.QFactory.createDataSourceWithType(f.MetaObjectType.INFOPROVIDER,b.getStringByKey(n));}else if(t===f.PrElementType.STRUCTURE){b=b.getStructureByKey(n);}}else if(f.notNull(b)&&!b.containsKey(n)){b=null;}}if(f.isNull(d)&&f.notNull(b)){d=f.QFactory.createDataSource();f.QInARepoDataSource.importDs2(i,b,c,d);var v=a.getStringByKey("ValidationHash");if(f.isNull(v)){v=b.getStringByKey("ValidationHash");}d.setValidationHash(v);var g=a.getStructureByKey("GenericServiceDescription");if(f.notNull(g)){d.setGenericServiceDescription(g);}}return d;};f.QInARepoDataSource.importDs2=function(a,b,c,d){var s=b.getStringByKey("System");if(f.notNull(s)){d.setSystemName(s);}var t=b.getStringByKey("Type");var m=null;if(f.notNull(t)){t=f.XString.toLowerCase(t);m=f.MetaObjectType.lookup(t);}if(f.isNull(m)){m=f.MetaObjectType.DBVIEW;}d.setType(m);f.QInARepoDataSourceProperties.importQd(d,b);if(m===f.MetaObjectType.MULTI_SOURCE||m===f.MetaObjectType.BLENDING){var e=f.PrUtils.getListProperty(b,"Sources");if(f.notNull(e)){var g=d.getMultiSourcesBase();var h=e.size();for(var i=0;i<h;i++){var j=f.PrUtils.getStructureElement(e,i);var k=f.QFactory.createDataSource();f.QInARepoDataSource.importDs2(a,j,c,k);g.add(k);}}var l=f.PrUtils.getListProperty(b,"Mappings");d.setMappings(l);}f.QInARepoDataSourceExtDims.importQd(a,d,b);var v=b.getStringByKey("ValidationHash");d.setValidationHash(v);var n=b.getStructureByKey("GenericServiceDescription");if(f.notNull(n)){d.setGenericServiceDescription(n);}return d;};f.QInARepoDataSource.exportDataSource=function(e,d,w,a){var b=f.PrFactory.createStructure();var t=d.getType();if(f.notNull(t)){b.putString("Type",t.getCamelCaseName());var s=d.getSystemName();if(f.notNull(s)){b.putString("System",s);}var c;if(t===f.MetaObjectType.MULTI_SOURCE){c=b.putNewList("Sources");var m=d.getMultiSources();var g=m.size();for(var i=0;i<g;i++){var h=m.get(i);var j=f.QInARepoDataSource.exportDataSource(e,h,w,null);c.add(j);}b.put("Mappings",d.getMappings());}else if(t===f.MetaObjectType.BLENDING){var k=d.getBlendingDefinition();if(f.notNull(k)){c=f.QInARepoDataSourceBlending.exportBlendingSources(e.getMode(),k,true);b.put("Sources",c);var l=f.QInARepoDataSourceBlending.exportBlendingMappings(k.getMappings());b.put("Mappings",l);}}var n=d.getGenericServiceDescription();if(f.notNull(n)){b.put("GenericServiceDescription",n);}}f.QInARepoDataSourceProperties.exportQd(e,d,b,w);f.QInARepoDataSourceExtDims.exportQd(e,d,b);if(f.notNull(a)){a.put("DataSource",b);}return b;};f.QInARepoDataSource.prototype.getComponentType=function(){return f.OlapComponentType.DATA_SOURCE;};f.QInARepoDataSource.prototype.getTagName=function(){return"DataSource";};f.QInARepoDataSource.prototype.newModelComponent=function(a,o,p,c){return f.QFactory.createDataSource();};f.QInARepoDataSource.prototype.importComponentWithStructure=function(i,a,m,p,c){return f.QInARepoDataSource.importDs2(i,a,c,m);};f.QInARepoDataSource.prototype.exportComponentWithStructure=function(e,m,i,a){var w=f.XMath.binaryAnd(a,f.QImExFlag.RUN_AS_USER)>0;return f.QInARepoDataSource.exportDataSource(e,m,w,null);};f.QInARepoDimension=function(){};f.QInARepoDimension.prototype=new f.QInARepository();f.QInARepoDimension.prototype._ff_c="QInARepoDimension";f.QInARepoDimension.importRsAttributeNodes=function(i,d){var a=i.getListByKey("ResultSetAttributeNodes");var b=i.getListByKey("ResultSetAttributeFields");if(f.notNull(a)){var r=d.getResultSetAttributes();r.clear();var c=a.size();for(var e=0;e<c;e++){var g=a.getStringAt(e);var h=d.getAttributeByName(g);if(f.notNull(h)){r.add(h);f.QInARepoDimension.importRsFieldsForAttribute(h,b,e);}}}};f.QInARepoDimension.importRsFieldsForAttribute=function(a,b,c){if(f.isNull(b)||b.size()<=c){return;}var d=b.getListAt(c);var e=a.getResultSetFields();e.clear();var r=d.size();for(var i=0;i<r;i++){var g=d.getStringAt(i);var h=a.getFieldByName(g);if(f.isNull(h)){h=a.getDimension().getFieldByName(g);}e.add(h);}};f.QInARepoDimension.importRsFields=function(i,d){var a=i.getListByKey("ResultSetFields");if(f.notNull(a)){var r=d.getResultSetFields();r.clear();var b=a.size();for(var c=0;c<b;c++){var e=a.getStringAt(c);var g=d.getFieldByName(e);if(f.notNull(g)){r.add(g);}}}};f.QInARepoDimension.exportListOfFields=function(a,b,e){var c=a.size();for(var i=0;i<c;i++){var d=a.get(i);if(d.getTextTransformation()===null&&d.getDimension().getDimensionType()!==f.DimensionType.FORMULA_CALCULATED_DIMENSION){continue;}b.add(e.exportComponent(f.OlapComponentType.FIELD,d,null,f.QImExFlag.DEFAULT_ALL));}};f.QInARepoDimension.prototype.getComponentType=function(){return f.OlapComponentType.ABSTRACT_DIMENSION;};f.QInARepoDimension.prototype.importComponentWithStructure=function(a,b,c,p,d){var q=d.getQueryModel();var e=c;var g=b.getStringByKey("Name");if(f.isNull(e)){if(f.notNull(q)){if(f.isNull(g)&&b.getBooleanByKeyExt("MeasureStructure",false)){var h=q.getMeasureDimension();if(f.notNull(h)){g=h.getName();}}e=q.getDimensionManagerBase().getDimensionByNameInternal(g);var s=b.getBooleanByKeyExt("SkipMetadataValidationOnRepoImport",false);if(f.isNull(e)&&s){e=this.addNewDimensionWithDummyMetadata(a,d,q,g);}if(f.isNull(e)){a.addWarning(f.ErrorCodes.INVALID_DIMENSION,f.XStringUtils.concatenate3("Dimension '",g,"' not found in QueryModel! Can't deserialize dimension."));}}}if(f.notNull(e)){var n=b.getBooleanByKeyExt("IsDelta",false);var o=false;if(f.notNull(q)&&q.getMeasureDimension()!==null){o=f.XString.isEqual(g,q.getMeasureDimension().getName());}if(n||!o){e.clearPlaceholderIds();}var r=b.getListByKey("PlaceholderIds");if(e.getPlaceholderIds().size()===0&&f.notNull(r)){for(var i=0;i<r.size();i++){var t=r.getStringAt(i);t=this.migratePlaceholderId(a,q,t);e.addPlaceholderId(t);}}if(!n){e.clearAlternativeFieldValues();}if(n&&a.getSession().hasFeature(f.FeatureToggleOlap.LAZY_LOADING_SFX_ACCOUNT_MEMBERS)&&e.getDimensionType()===f.DimensionType.ACCOUNT){e.setStructureMemberLazyLoader(f.InARepoStructureMemberLazyLoader.create(e,a.getMode(),b));}else{a.importMembers(b,e,d);}if(!n){this.importFieldsLayout(a,b,e,d);a.importHierarchy(e,b);var u=q.getModelCapabilities();if(!u.supportsExtendedSort()){if(u.supportsDimensionSorting(e,f.SortType.MEMBER_KEY)){var v=b.getIntegerByKeyExt("SortOrder",f.QInAConverter.lookupSortDirectionInA(f.XSortDirection.DEFAULT_VALUE));var w=f.QInAConverter.lookupSortDirection(v);e.getResultSetSorting().setDirection(w);}}if(a.capabilities.supportsCummulative()&&e.supportsCumulative()){if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.containsKey("IsCummulative")){e.setIsCumulative(b.getBooleanByKeyExt("IsCummulative",false));}}if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.containsKey("Skip")){var x=b.getIntegerByKeyExt("Skip",0);e.setSkipEntries(x);}if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.containsKey("Top")){var y=b.getIntegerByKeyExt("Top",0);e.setTopEntries(y);}var z=b.getStringByKey("ReadMode");if(f.notNull(z)){var A=f.QInAConverter.lookupReadMode(z);e.setReadModeGraceful(f.QContextType.RESULT_SET,A);}var B=b.getStringByKey("SelectorReadMode");if(f.notNull(B)){var C=f.QInAConverter.lookupReadMode(B);e.setReadModeGraceful(f.QContextType.SELECTOR,C);}a.importTotals(b,e.getResultStructureControllerBase(),d);this.importAlternativeFieldValues(b,e);var D=b.getStructureByKey("PlacholderIdMapping");if(f.notNull(D)){var E=D.getKeysAsReadOnlyListOfString();for(var j=0;j<E.size();j++){var F=E.get(j);var G=D.getStringByKey(F);F=this.migratePlaceholderId(a,q,F);e.assignPlaceholderIdByAlias(F,G);}}var H;var I;if(e.getModelCapabilities().supportsMemberVisibility()&&b.containsKey("VisibilityOverride")){var J=b.getStructureByKey("VisibilityOverride");I=J.getKeysAsReadOnlyListOfString();for(var k=0;k<I.size();k++){H=I.get(k);var K=f.QInAConverter.lookupResultSetVisibility(J.getStringByKey(H));e.getOverdefinedMemberManager().setVisibilityOverride(H,K);}}if(b.containsKey("NumericScaleOverride")){var L=b.getStructureByKey("NumericScaleOverride");I=L.getKeysAsReadOnlyListOfString();for(var l=0;l<I.size();l++){H=I.get(l);e.getOverdefinedMemberManager().setNumericScaleOverride(H,L.getIntegerByKey(H));}}if(e.getModelCapabilities().supportsMemberVisibility()&&b.containsKey("NumericShiftOverride")){var M=b.getStructureByKey("NumericShiftOverride");I=M.getKeysAsReadOnlyListOfString();for(var m=0;m<I.size();m++){H=I.get(m);e.getOverdefinedMemberManager().setNumericShiftOverride(H,M.getIntegerByKey(H));}}var N=b.getStringByKey("OverrideText");if(f.XStringUtils.isNotNullAndNotEmpty(N)){e.setOverrideText(N);}}var O=b.getStringByKey("AccountTypeAttributeName");var P=e.getMetadataBase();if(f.notNull(O)){P.setAccountTypeAttributeName(O);}var Q=b.getBooleanByKeyExt("FiscalEnabled",false);if(Q){P.setFiscalEnabled(Q);P.setFiscalDisplayPeriod(b.getStringByKey("FiscalDisplayPeriod"));P.setFiscalShift(b.getIntegerByKeyExt("FiscalShift",0));}if(b.containsKey("additionalPeriods")){P.setAdditionalPeriods(b.getIntegerByKey("additionalPeriods"));}if(b.containsKey("periodPrefix")){P.setPeriodPrefix(b.getStringByKey("periodPrefix"));}if(b.containsKey("useMonthLabel")){P.setUseMonthLabel(b.getBooleanByKey("useMonthLabel"));}if(b.containsKey("TimeConfigEnablePattern")){P.setTimeConfigEnablePattern(b.getBooleanByKey("TimeConfigEnablePattern"));}if(b.containsKey("IsUserManaged")){P.setIsUserManaged(b.getBooleanByKey("IsUserManaged"));}var R=b.getBooleanByKeyExt("HasDayTimeYYYYMMDDFormat",false);if(R){P.setHasDayTimeYYYYMMDDFormat(R);}var S=b.getStringByKey("Description");if(f.XStringUtils.isNotNullAndNotEmpty(S)){e.setText(S);}}return e;};f.QInARepoDimension.prototype.migratePlaceholderId=function(i,q,p){var n=p;var a=f.XStringUtils.concatenate2("].&[",f.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(i.getSession().hasFeature(f.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&f.notNull(q)&&q.getDimensionByType(f.DimensionType.ACCOUNT)!==null&&f.XString.startsWith(p,"[")&&f.XString.indexOf(p,a)!==-1){var b=f.XString.indexOf(p,f.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var e=f.XString.indexOfFrom(p,"]",b);n=f.XString.substring(p,b,e);}return n;};f.QInARepoDimension.prototype.addNewDimensionWithDummyMetadata=function(i,c,q,d){var a=f.QCacheKey.createByContextForDimension(c,d,null);var b=f.QDimensionMetadata.create(a);b.addSupportedFieldLayoutType(f.FieldLayoutType.ATTRIBUTE_BASED);b.addSupportedAxis(f.AxisType.FREE);b.addSupportedAxis(f.AxisType.ROWS);b.addSupportedAxis(f.AxisType.COLUMNS);b.setDimensionType(f.DimensionType.DIMENSION);var o=i.getApplication().getOlapEnvironment();o.setDimensionMetadata(b);var e=f.QDimension._create(c,q.getDimensionManagerBase());e.setName(d);e.setText(d);e.setMetadata(b);e.setSkipMetadataValidationOnRepoImport(true);q.addDimension(e);return e;};f.QInARepoDimension.prototype.importAlternativeFieldValues=function(a,d){var b=a.getListByKey("AlternativeFieldValues");if(f.notNull(b)){var s=b.size();for(var i=0;i<s;i++){var c=b.get(i);if(c.isStructure()){var e=c;var g=e.getStringByKey("ValueType");var v=f.QInAConverter.lookupValueType(g);var h=e.getStringByKey("Value");var j=null;if(v===f.XValueType.INTEGER){j=f.XIntegerValue.create(f.XInteger.convertFromStringWithRadix(h,10));}else if(v===f.XValueType.LONG){j=f.XLongValue.create(f.XLong.convertFromString(h));}else if(v===f.XValueType.DOUBLE){j=f.XDoubleValue.create(f.XDouble.convertFromString(h));}else if(v===f.XValueType.STRING){j=f.XStringValue.create(h);}else if(v===f.XValueType.DATE){j=f.XDate.createDateFromIsoFormat(h);}else if(v===f.XValueType.DATE_TIME){j=f.XDateTime.createDateTimeFromIsoFormat(h);}if(f.notNull(j)){var k=e.getBooleanByKey("HierarchyKey");var m=e.getStringByKey("MemberKey");var l=e.getStringByKey("FieldName");var n=e.getStringByKey("Language");d.setAlternativeFieldValue(k,m,l,j,n);}}}}};f.QInARepoDimension.prototype.importFieldsLayout=function(i,a,d,c){var b=a.getListByKey("FieldSettings");if(f.notNull(b)){var e=b.size();for(var p=0;p<e;p++){i.importComponent(f.OlapComponentType.FIELD,b.getStructureAt(p),null,d,c);}}var g=a.getListByKey("AttributeSettings");if(f.notNull(g)){var h=g.size();for(var j=0;j<h;j++){i.importAttribute(g.getStructureAt(j),d,c);}}var k=d.getFieldByName(a.getStringByKey("ClientDefaultTextAttribute"));d.setClientDefaultTextField(k);f.QInARepoDimension.importRsFields(a,d);f.QInARepoDimension.importRsAttributeNodes(a,d);if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("FieldLayoutType")){var l=f.QInAConverter.lookupFieldLayoutType(a.getStringByKey("FieldLayoutType"));d.setFieldLayoutType(l);}};f.QInARepoDimension.prototype.exportComponentWithStructure=function(e,m,a,b){var d=m;a.putString("Name",d.getName());if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getReadModeManagerBase().hasPropertyChanged(f.QDimensionProperties.QY_READ_MODE)){f.QInARepoUtils.setNameIfNotNull(a,"ReadMode",d.getReadMode(f.QContextType.RESULT_SET));}if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getReadModeManagerBase().hasPropertyChanged(f.QDimensionProperties.QY_SELECTOR_READ_MODE)){f.QInARepoUtils.setNameIfNotNull(a,"SelectorReadMode",d.getReadMode(f.QContextType.SELECTOR));}a.putString("Axis",f.QInAConverter.lookupAxisTypeInA(d.getAxisType()));if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDimensionProperties.QY_SKIP)){var s=d.getSkipEntries();if(s>0||e.getMode()===f.QModelFormat.INA_REPOSITORY_DELTA&&d.hasPropertyChanged(f.QDimensionProperties.QY_SKIP)){a.putInteger("Skip",s);}}if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDimensionProperties.QY_TOP)){var t=d.getTopEntries();if(t>0||e.getMode()===f.QModelFormat.INA_REPOSITORY_DELTA&&d.hasPropertyChanged(f.QDimensionProperties.QY_TOP)){a.putInteger("Top",t);}}if(d.supportsCumulative()&&(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDimensionProperties.IS_CUMULATIVE))){a.putBoolean("IsCummulative",d.isCumulative());}e.exportHierarchy(d,a);if(d.supportsTotals()){if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getResultStructureController().getModCounter()>0){e.exportTotals(d,a);}}if(d.getStructureLayout()!==null){e.exportMembers(d,a);}this.exportFieldLayout(e,a,d);this.exportAlternativeFieldValues(a,d);if(d.getSkipMetadataValidationOnRepoImport()){a.putBoolean("SkipMetadataValidationOnRepoImport",true);}if(d.getPlaceholderIds()!==null&&d.getPlaceholderIds().size()>0){var p=a.putNewList("PlaceholderIds");p.addAllStrings(d.getPlaceholderIds());}var c=d.getPlaceholderIdMemberMap().getKeysAsReadOnlyListOfString();if(f.notNull(c)&&c.size()>0){var g=a.putNewStructure("PlacholderIdMapping");for(var i=0;i<c.size();i++){var h=c.get(i);var n=d.getPlaceholderIdMemberMap().getByKey(h);g.putString(h,n.getAliasName());}}var o=d.getOverdefinedMemberManager().getVisibilityOverrideMap();var q=o.getKeysAsReadOnlyListOfString();if(q.size()>0){var r=a.putNewStructure("VisibilityOverride");for(var j=0;j<q.size();j++){var u=o.getByKey(q.get(j));if(f.isNull(u)){u=f.ResultVisibility.VISIBLE;}r.putString(q.get(j),f.QInAConverter.lookupResultSetVisibilityInA(u));}}var v=d.getOverdefinedMemberManager().getNumericScaleOverrideMap();q=v.getKeysAsReadOnlyListOfString();if(q.size()>0){var w=a.putNewStructure("NumericScaleOverride");for(var k=0;k<q.size();k++){var x=v.getByKey(q.get(k));w.putInteger(q.get(k),x.getInteger());}}var y=d.getOverdefinedMemberManager().getNumericShiftOverrideMap();q=y.getKeysAsReadOnlyListOfString();if(q.size()>0){var z=a.putNewStructure("NumericShiftOverride");for(var l=0;l<q.size();l++){var A=y.getByKey(q.get(l));z.putInteger(q.get(l),A.getInteger());}}if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA){a.putStringNotNull("AccountTypeAttributeName",d.getMetadata().getAccountTypeAttributeName());var B=d.getMetadata().getFiscalShift();if(B!==0){a.putInteger("FiscalShift",B);}var C=d.getMetadata().hasDayTimeYYYYMMDDFormat();if(C){a.putBoolean("HasDayTimeYYYYMMDDFormat",C);}}var D=d.getOverrideText();if(f.XStringUtils.isNotNullAndNotEmpty(D)){a.putString("OverrideText",D);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoDimension.prototype.exportFieldLayout=function(e,a,d){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QDimensionProperties.QY_FIELD_LAYOUT_TYPE)){var b=d.getFieldLayoutType();a.putString("FieldLayoutType",f.QInAConverter.lookupFieldLayoutTypeInA(b));}var c=a.putNewList("FieldSettings");f.QInARepoDimension.exportListOfFields(d.getFields(),c,e);if(!d.isUseServerDefaultTextField()){a.putString("ClientDefaultTextAttribute",d.getClientDefaultTextField().getName());}var r=d.getResultSetFields();if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||r.getModCounter()>0){var g=a.putNewList("ResultSetFields");var h=r.size();for(var j=0;j<h;j++){g.addString(r.get(j).getName());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||this.exportResultSetAttributeDetails(d)){var k=a.putNewList("ResultSetAttributeNodes");var l=a.putNewList("ResultSetAttributeFields");var m=d.getResultSetAttributes();var n=m.size();for(var o=0;o<n;o++){var p=m.get(o);k.addString(p.getName());var q=l.addNewList();var s=p.getResultSetFields();var t=s.size();for(var i=0;i<t;i++){q.addString(s.get(i).getName());}}}};f.QInARepoDimension.prototype.exportResultSetAttributeDetails=function(d){var e=false;var r=d.getResultSetAttributes();if(r.getModCounter()>0){e=true;}else{var a=r.size();for(var i=0;i<a;i++){var b=r.get(i);var c=b.getResultSetFields();if(c.getModCounter()>0){e=true;break;}}}return e;};f.QInARepoDimension.prototype.exportAlternativeFieldValues=function(i,d){this.exportAlternativeFieldValuesForKeyType(i,d,d.getAlternativeFieldValueMemberKeys(false),false);this.exportAlternativeFieldValuesForKeyType(i,d,d.getAlternativeFieldValueMemberKeys(true),true);};f.QInARepoDimension.prototype.exportAlternativeFieldValuesForKeyType=function(a,d,b,h){if(f.notNull(b)){var c=f.PrFactory.createList();var s=b.size();for(var i=0;i<s;i++){var m=b.get(i);var e=d.getAlternativeFieldValueFields(h,m);if(f.notNull(e)){var g=e.size();for(var j=0;j<g;j++){var l=e.get(j);var n=d.getAlternativeFieldValueLanguages(h,m,l);if(f.notNull(n)){var o=n.size();for(var k=0;k<o;k++){var p=n.get(k);var q=d.getAlternativeFieldValue(h,m,l,p);if(f.notNull(q)){var r=c.addNewStructure();r.putBoolean("HierarchyKey",h);r.putString("MemberKey",m);r.putString("FieldName",l);r.putString("Language",p);r.putString("ValueType",f.QInAConverter.lookupValueTypeInA(q.getValueType()));r.putString("Value",q.getStringRepresentation());}}}}}}if(c.size()>0){a.put("AlternativeFieldValues",c);}}};f.QInARepoDimensions=function(){};f.QInARepoDimensions.prototype=new f.QInARepository();f.QInARepoDimensions.prototype._ff_c="QInARepoDimensions";f.QInARepoDimensions.exportAxisDimensionsWithHeuristic=function(e,a,p,u,b){var q=a.getQueryModel();var r=e.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA);var o=q.isOptimizedExportModeActive();var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(o&&c.isIgnoredOnOptimizedExport()){continue;}if(r&&!u.contains(c.getName())){continue;}f.QInARepoDimensions.exportDimension(e,c,p,b);}};f.QInARepoDimensions.exportAxisDimensions=function(e,a,p,b){var d=a.getDimensionCount();for(var i=0;i<d;i++){var c=a.get(i);if(f.QInARepoDimensions._isForRendering(e.getMode(),c)){continue;}f.QInARepoDimensions.exportDimension(e,c,p,b);}};f.QInARepoDimensions._isForRendering=function(e,d){var a=d.getAxisType();return e===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING&&a!==f.AxisType.ROWS&&a!==f.AxisType.COLUMNS;};f.QInARepoDimensions.exportDimension=function(e,d,i,a){if(!a.contains(d.getName())){a.add(d.getName());var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getDimensionType().isTypeOf(f.DimensionType.CALCULATED_DIMENSION)||d.getModCounter()>0;if(s){i.add(e.exportDimension(d,null));}}};f.QInARepoDimensions.prototype.getComponentType=function(){return f.OlapComponentType.DIMENSIONS;};f.QInARepoDimensions.prototype.getTagName=function(){return"DimensionsRepo";};f.QInARepoDimensions.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoDimensions.prototype.containsFormulaCalculatedDimensionInInaList=function(i,d){var s=i.size();for(var k=0;k<s;k++){var a=i.getStructureAt(k);var b=a.getStringByKey("Name");if(f.XString.isEqual(d,b)){return a.containsKey("CType")&&f.XComponentType.lookupComponentType(a.getStringByKey("CType"))===f.DimensionType.FORMULA_CALCULATED_DIMENSION;}}return false;};f.QInARepoDimensions.prototype.importComponentWithList=function(a,b,m,p,c){var q=m;if(f.notNull(b)){var o=a.getOriginalMode();if(o.isTypeOf(f.QModelFormat.INA_REPOSITORY)&&!o.isTypeOf(f.QModelFormat.INA_REPOSITORY_DELTA)){var l=q.getLoadedDimensions();var d=l.size();for(var i=d-1;i>=0;i--){var e=l.get(i);var g=e.getName();if(e.getDimensionType().isTypeOf(f.DimensionType.FORMULA_CALCULATED_DIMENSION)&&f.notNull(g)){if(!this.containsFormulaCalculatedDimensionInInaList(b,g)){q.removeCalculatedDimensionByName(g);}}}}var h=q.getDimensionManagerBase();var j=q.getFreeAxis();j.addAll(h);var s=b.size();var n=h.getDimensionReferences();for(var k=0;k<s;k++){var r=b.getStructureAt(k);var t=r.getStringByKey("Name");var u=r.getStringByKey("Axis");var v=null;if(r.containsKey("FieldMappings")){var w=a.importCalculatedDimension(r,q);h.addDimension(w);h.finalizeDimensionMetadataSetup(w);}else if(r.containsKey("CType")&&f.XComponentType.lookupComponentType(r.getStringByKey("CType"))===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var x=q.getDimensionByName(t);var y=a.importFormulaCalculatedDimension(r,q,x);h.finalizeDimensionMetadataSetup(y);}else{if(n.containsKey(t)){v=h.getDimensionByNameFromExistingMetadata(t);}a.importDimension(r,q);}if(f.isNull(v)){v=h.getDimensionByNameInternal(t);if(f.isNull(v)){continue;}}if(f.isNull(u)){u=r.getStringByKeyExt("AxisDefault","Free");}q.getAxis(f.QInAConverter.lookupAxisType(u)).add(v);}}return q;};f.QInARepoDimensions.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);i.put("Elements",b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoDimensions.prototype.exportComponentWithList=function(e,m,a){var i=f.PrFactory.createList();var q=m;var b=f.XHashSetOfString.create();f.QInARepoDimensions.exportAxisDimensions(e,q.getAxis(f.AxisType.ROWS),i,b);f.QInARepoDimensions.exportAxisDimensions(e,q.getAxis(f.AxisType.COLUMNS),i,b);var u=f.XHashSetOfString.create();if(e.mode===f.QModelFormat.INA_REPOSITORY_DATA||e.mode===f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){f.DimensionUsageAnalyzer2.setupHeuristic(q,u);}f.QInARepoDimensions.exportAxisDimensionsWithHeuristic(e,q.getAxis(f.AxisType.FREE),i,u,b);return i;};f.QInARepoDrillManager=function(){};f.QInARepoDrillManager.prototype=new f.QInARepository();f.QInARepoDrillManager.prototype._ff_c="QInARepoDrillManager";f.QInARepoDrillManager.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_MANAGER;};f.QInARepoDrillManager.prototype.getTagName=function(){return"HierarchyNavigationsRepo";};f.QInARepoDrillManager.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoDrillManager.prototype.importComponentWithList=function(i,a,m,p,c){var d=m;var s;d.removeAllContextDrillOperations();d.removeZoomDrillOperationsByDimension(null);if(f.notNull(a)){var b=-1;s=a.size();for(var e=0;e<s;e++){var g=a.getStructureAt(e);var z=g.getIntegerByKeyExt("ZoomDrillStackPosition",-1);if(z===-1){i.importDrillOperation(g,d,c);}else if(z>-1){var h=this.getZoomDrillPath(i,d,g,c);if(f.XCollectionUtils.hasElements(h)){if(z!==b){d.pushEmptyZoomDrillForDimension(h.get(h.size()-1).getDimension());b=z;}var j=g.getIntegerByKeyExt("DrillOffset",0)>0;d.addZoomDrillPath(h,j);}}}}return m;};f.QInARepoDrillManager.prototype.getZoomDrillPath=function(i,d,a,c){var b=f.XList.create();var e=a.getListByKey("DrillContextMembers");if(f.notNull(e)){var s=e.size();for(var g=0;g<s;g++){var h=e.getStructureAt(g);var j=i.importDrillPathElement(h,d,c);b.add(j);}}var k=a.getStringByKey("DrillState");var l=a.getStructureByKey("DrillMember");if(f.isNull(l)||f.isNull(k)){return null;}var m=i.importDrillPathElement(l,d,c);b.add(m);return b;};f.QInARepoDrillManager.prototype.exportComponentWithStructure=function(e,m,i,a){var b=this.exportComponentWithList(e,m,a);if(f.notNull(b)){i.put("Elements",b);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoDrillManager.prototype.exportComponentWithList=function(e,m,a){var d=m;var c=d.getModelCapabilities();var b=null;var g=d.getDrillOperationsForInARepo();var h=g.size();if(h>0){var q=d.getQueryModel();var j=null;var k=null;b=f.PrFactory.createList();var l=null;if(c.supportsHierarchyNavigationDeltaMode()){l=g.get(h-1);var t=l.getTargetDimension();if(f.notNull(t)&&t.isHierarchyNavigationDeltaMode()){k=t;j=e.exportDrillOperation(l);}}var n=e.isAbap(q);var i;for(i=0;i<h;i++){var o=g.get(i);if(o.getType()===f.DrillOperationType.CONTEXT){var p=o.getTargetDimension();if(f.isNull(k)||k!==p){if(!n&&p.getInitialDrillLevel()<0&&o.getDrillState()===f.DrillState.EXPANDED){continue;}b.add(e.exportDrillOperation(o));}}}if(f.notNull(j)){b.add(j);}if(b.isEmpty()){b=null;}}return b;};f.QInARepoDrillPathElement=function(){};f.QInARepoDrillPathElement.prototype=new f.QInARepository();f.QInARepoDrillPathElement.prototype._ff_c="QInARepoDrillPathElement";f.QInARepoDrillPathElement.prototype.getComponentType=function(){return f.MemberType.DRILL_PATH_ELEMENT;};f.QInARepoDrillPathElement.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var q=d.getContext().getQueryModel();var b=a.getStringByKey("FieldName");var e=a.getStringByKey("DimensionName");var g;if(f.XStringUtils.isNotNullAndNotEmpty(e)){g=q.getDimensionByNameFromExistingMetadata(e);}else{var h=q.getFieldByNameOrAlias(b);if(f.isNull(h)){g=q.getDimensionByNameFromExistingMetadata(b);if(f.notNull(g)){h=g.getKeyField();b=h.getName();}}else{g=h.getDimension();}}var j=f.QDrillPathElement._create(c);j.setDimension(g);var k=a.getStringByKey("Member");j.setName(k);j.setFieldName(b);return j;};f.QInARepoDrillPathElement.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var n=b.getName();if(f.isNull(n)){i.putNull("Member");}else{var c=f.QInAExportUtil.getMeasureMemberNameByAlias(b.getQueryModel(),n,e);i.putString("Member",c);}i.putString("FieldName",b.getFieldName());var d=b.getDimension();f.QInAExportUtil.setNameIfNotNull(i,"DimensionName",d);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoDrillPathOperation=function(){};f.QInARepoDrillPathOperation.prototype=new f.QInARepository();f.QInARepoDrillPathOperation.prototype._ff_c="QInARepoDrillPathOperation";f.QInARepoDrillPathOperation.prototype.getComponentType=function(){return f.OlapComponentType.DRILL_OPERATION;};f.QInARepoDrillPathOperation.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=null;var b=p;var e=a.getStringByKey("DrillState");var g=a.getStructureByKey("DrillMember");if(f.notNull(g)&&f.notNull(e)){var h=f.XList.create();var j=a.getListByKey("DrillContextMembers");if(f.notNull(j)){var s=j.size();for(var k=0;k<s;k++){var l=j.getStructureAt(k);var n=i.importDrillPathElement(l,b,c);h.add(n);}}var o=i.importDrillPathElement(g,b,c);h.add(o);d=b.setDrillState(h,f.QInAConverter.lookupDrillStateOp(e));var q=a.getIntegerByKeyExt("DrillLevel",1);d.setRelativeLevelCount(q);}return d;};f.QInARepoDrillPathOperation.prototype.exportComponentWithStructure=function(e,m,i,a){var o=m;if(o.getType()===f.DrillOperationType.CONTEXT){var b=f.QInAConverter.lookupDrillStateInA(o.getDrillState());i.putString("DrillState",b);var r=o.getRelativeLevelCount();if(r!==1){i.putInteger("DrillLevel",r);}if(o.getZoomStackPosition()!==-1){i.putInteger("ZoomDrillStackPosition",o.getZoomStackPosition());}if(o.getRelativeLevelOffset()!==0){i.putInteger("DrillOffset",o.getRelativeLevelOffset());}var d=o.getDrillPath();var c=d.size();if(c>0){var g=d.get(c-1);var h=e.exportDrillPathElement(g,false);i.put("DrillMember",h);if(c>1){var j=f.PrFactory.createList();i.put("DrillContextMembers",j);for(var k=0;k<c-1;k++){g=d.get(k);h=e.exportDrillPathElement(g,true);j.add(h);}}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoExceptions=function(){};f.QInARepoExceptions.prototype=new f.QInARepository();f.QInARepoExceptions.prototype._ff_c="QInARepoExceptions";f.QInARepoExceptions.prototype.getComponentType=function(){return f.OlapComponentType.EXCEPTION_MANAGER;};f.QInARepoExceptions.prototype.getTagName=function(){return"ExceptionsRepo";};f.QInARepoExceptions.prototype.isVersion1=function(q,m){var c=m.getOlapComponentType();var s=m.getModelCapabilities().supportsExceptionsV2();return!s&&c.isTypeOf(f.MemberType.ABSTRACT_MEMBER);};f.QInARepoExceptions.prototype.isVersion2=function(q,m){var c=m.getOlapComponentType();var s=m.getModelCapabilities().supportsExceptionsV2();return s&&c.isTypeOf(f.OlapComponentType.QUERY_MODEL);};f.QInARepoExceptions.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.notNull(a)){var b=a.getListByKey("Elements");this.importComponentWithList(i,b,m,p,c);}return m;};f.QInARepoExceptions.prototype.importComponentWithList=function(i,a,c,p,b){var m=c;var e=m.getQueryModel().getExceptionManager();e.queueEventing();if(this.isVersion1(i,m)){this.importFormatV1(i,a,m,e);}else if(this.isVersion2(i,m)){this.importFormatV2(i,a,m,e);}e.resumeEventing();return e;};f.QInARepoExceptions.prototype.importFormatV1=function(i,a,m,e){if(!f.PrUtils.isListEmpty(a)){var s=a.size();for(var b=0;b<s;b++){var c=a.getStructureAt(b);var n=this.importExceptionWithoutEvaluates(i,e,c);this.importEvaluates(c,m,n,i);n.setMeasure(m);n.setIsChangeable(c.getBooleanByKeyExt("Changegable",true));}this.removeModelElementsNotInInA(i,a,e,e.getAllExceptionsOfMeasure(m));}else if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA){e.removeAllExceptionsOfMeasure(m);}};f.QInARepoExceptions.prototype.importExceptionWithoutEvaluates=function(i,e,a){var b=a.getStringByKey("Name");var c=a.getStringByKey("Text");var n=e.getByKey(b);if(f.isNull(n)){n=e.addNewException(b,c);}n.stopEventing();n.setIsChangeable(true);n.resumeEventing();if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("EvaluateDefault")){var d=f.QExceptionEvalType.lookupExceptionEvalType(a.getStringByKey("EvaluateDefault"));n.setEvaluateDefault(d);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("ApplySettingsToHeader")){var h=f.QExceptionHeaderSettings.lookupExceptionHeaderSetting(a.getStringByKey("ApplySettingsToHeader"));n.setHeaderSettingBase(h);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("Active")){var g=a.getBooleanByKeyExt("Active",true);n.setActive(g);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("EvaluateBeforePostAggregation")){var j=a.getBooleanByKeyExt("EvaluateBeforePostAggregation",true);n.setEvaluationAfterCalculations(!j);}n.queueEventing();this.importThresholds(a,n);n.resumeEventing();return n;};f.QInARepoExceptions.prototype.importFormatV2=function(i,a,q,e){if(!f.PrUtils.isListEmpty(a)){var s=a.size();for(var E=0;E<s;E++){var b=a.getStructureAt(E);var c=b.getListByKey("StructureContext");if(!f.PrUtils.isListEmpty(c)){var d=this.importContextItem(c.getStructureAt(0),q,e,null,i,b);if(f.notNull(d)){if(c.size()>1){this.importContextItem(c.getStructureAt(1),q,e,d,i,b);}d.setIsChangeable(b.getBooleanByKeyExt("Changegable",true));}}}this.removeModelElementsNotInInA(i,a,e,e.getValuesAsReadOnlyList());}else if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA){e.clear();}};f.QInARepoExceptions.prototype.importContextItem=function(s,q,e,a,i,b){var c=a;var d=q.getDimensionByNameFromExistingMetadata(s.getStringByKey("DimensionName"));if(f.notNull(d)){if(f.isNull(c)){c=this.importExceptionWithoutEvaluates(i,e,b);}var g=c.isEvaluateAllMembers(d);if(s.containsKey("EvaluateAllMembers")){g=s.getBooleanByKeyExt("EvaluateAllMembers",false);}var m=this.getMemberFromContextItem(s,d,g);if(f.notNull(m)){if(f.isNull(a)){this.importEvaluates(b,m,c,i);}if(d.isMeasureStructure()){c.setMeasure(m);}else{c.setStructure(m);}c.displayOnOtherMember(m,d.getStructureMember(s.getStringByKey("DisplayOnOtherMember")));c.setEvaluateAllMembers(d,g);}}return c;};f.QInARepoExceptions.prototype.getMemberFromContextItem=function(s,d,e){var m=d.getStructureMember(s.getStringByKey("MemberName"));if(f.isNull(m)){var a=d.getAllStructureMembers();if(e&&!a.isEmpty()){m=a.get(0);}}return m;};f.QInARepoExceptions.prototype.importEvaluates=function(i,m,n,a){n.queueEventing();var b=i.getListByKey("EvaluateOn");if(!f.PrUtils.isListEmpty(b)){n.removeAllEvaluates();var s=b.size();var q=m.getQueryModel();for(var e=0;e<s;e++){var c=b.getStructureAt(e);var d=c.getStringByKey("Name");var g=q.getFieldByName(d);if(f.isNull(g)){var h=q.getDimensionByNameFromExistingMetadata(d);if(f.notNull(h)){g=h.getKeyField();}}if(f.isNull(g)){g=m.getKeyFieldValue().getField();}if(f.isNull(g)){a.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Could not find field '",d,"'!"));return;}if(!c.containsKey("Low")){a.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate2("No low value for field: ",d));return;}var v=g.getValueType();var l=f.QInAValueUtils.importValueByType(a,c,"Low",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected low valuetype for field: ",v.getName()));return;}var j=n._addNewEvaluateWithFieldInternal(g,l);if(c.containsKey("High")){var k=f.QInAValueUtils.importValueByType(a,c,"High",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected high valuetype for field: ",v.getName()));return;}j.setHighValue(k);}j.setEvaluate(f.QExceptionEvalType.lookupExceptionEvalType(c.getStringByKey("Evaluate")));var o=c.getStringByKey("Comparison");var p=f.QInAConverter.lookupComparison(o);if(f.isNull(p)){a.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",o,"'"));return;}j.setOperator(p);}}n.resumeEventing();};f.QInARepoExceptions.prototype.importThresholds=function(i,n){var a=i.getListByKey("Threshold");if(!f.PrUtils.isListEmpty(a)){n.removeAllThresholds();var s=a.size();for(var t=0;t<s;t++){var b=a.getStructureAt(t);var c=b.getIntegerByKeyExt("AlertLevel",-9999);var d;var e=!b.hasStringByKey("Low");if(e){d=n._addNewThresholdInternal(b.getDoubleByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}else{d=n._addNewThresholdWithStringInternal(b.getStringByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}var g=b.getStringByKey("Name");if(f.notNull(g)){d.setName(g);}var o=f.QInAConverter.lookupComparison(b.getStringByKey("Comparison"));d.setOperator(o);if(o.getNumberOfParameters()===2){if(e){var h=b.getDoubleByKey("High");d.setHighValue(h);}else{var j=b.getStringByKey("High");d.setHigh(j);}}this.importSettings(b.getListByKey("Settings"),d);}}};f.QInARepoExceptions.prototype.importSettings=function(i,n){if(f.notNull(i)){var s=i.size();for(var S=0;S<s;S++){var a=i.getStructureAt(S);var b=a.getStringByKey("Name");var p=a.getIntegerByKey("Priority");var v=a.getStringByKey("Value");if(f.notNull(v)&&!f.XString.isEqual(v,"")){var c=n.addNewSetting(b,p);c.setValue(v);}}}};f.QInARepoExceptions.prototype.exportComponentWithStructure=function(e,m,i,a){var l=this.exportComponentWithList(e,m,a);if(f.notNull(l)){i.put("Elements",l);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoExceptions.prototype.exportComponentWithList=function(e,m,a){var i=null;if(this.isVersion1(e,m)){i=this.exportFormatV1(e,m);}else if(this.isVersion2(e,m)){i=this.exportFormatV2(e,m);}return i;};f.QInARepoExceptions.prototype.exportFormatV1=function(e,s){var i=null;var a=s.getExceptions();if(f.notNull(a)){var b=a.size();if(b>0){i=f.PrFactory.createList();var c=e.isAbap(s);for(var E=0;E<b;E++){var d=a.get(E);var g=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.isChangeable()||d.getModCounter()>0;if(g){var h=this.exportException(e,d,c);if(f.isNull(h)){break;}i.add(h);}}}}return i;};f.QInARepoExceptions.prototype.exportException=function(e,a,i){var b=f.PrFactory.createStructure();if(e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&!a.isChangeable()&&a.hasPropertyChanged(f.QExceptionProperties.QY_ACTIVE)){b.putString("Name",a.getName());b.putBoolean("Active",a.isActive());b.putBoolean("Changegable",a.isChangeable());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.isChangeable()){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(f.QExceptionProperties.QY_ACTIVE)){b.putBoolean("Active",a.isActive());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasPropertyChanged(f.QExceptionProperties.QY_EVALUATE_BEFORE_POST_AGGREGATION)){b.putBoolean("EvaluateBeforePostAggregation",!a.isEvaluatedAfterCalculations());}b.putBoolean("Changegable",a.isChangeable());var t=a.getThresholds();this.exportThresholds(t,e,b,i);this.exportEvaluates(a.getEvaluates(),e,b,i);b.putString("Name",a.getName());b.putString("Text",a.getText());var h=a.getHeaderSetting();if(h!==f.QExceptionHeaderSettings.NONE){b.putString("ApplySettingsToHeader",h.getName());}b.putString("EvaluateDefault",a.getEvaluateDefault().toString());}return b;};f.QInARepoExceptions.prototype.exportFormatV2=function(e,q){var a=null;var b=q.getExceptionManager();var s=b.size();if(s>0){a=f.PrFactory.createList();var c=e.isAbap(q);for(var i=0;i<s;i++){var d=b.get(i);var g=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.isChangeable()||d.getModCounter()>0;if(g){var h=this.getExportedExceptionStructureByName(a,d.getName());if(f.isNull(h)){h=this.exportException(e,d,c);if(f.notNull(h)){h.putNewList("StructureContext");a.add(h);}}if(f.notNull(h)){var j=h.getListByKey("StructureContext");this.exportStructureContextItem(e,j,d.getMeasure(),d);this.exportStructureContextItem(e,j,d.getStructure(),d);}}}}return a;};f.QInARepoExceptions.prototype.getExportedExceptionStructureByName=function(e,a){var b=null;var s=e.size();for(var i=0;i<s;i++){var c=e.getStructureAt(i);if(f.XString.isEqual(c.getStringByKey("Name"),a)){b=c;break;}}return b;};f.QInARepoExceptions.prototype.exportStructureContextItem=function(e,s,m,a){if(f.notNull(m)){var b=s.addNewStructure();var d=m.getDimension();b.putString("DimensionName",d.getName());b.putString("MemberName",m.getName());var c=a.isEvaluateAllMembers(d);var g=e.mode===f.QModelFormat.INA_REPOSITORY_DELTA;var h=d.getDimensionType()===f.DimensionType.MEASURE_STRUCTURE;var i=h&&a.hasPropertyChanged(f.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_MEASURE_DIMENSION)||!h&&a.hasPropertyChanged(f.QExceptionProperties.QY_EVALUATE_ALL_MEMBERS_SECONDARY_STRUCTURE);if(!g&&c||g&&i){b.putBoolean("EvaluateAllMembers",c);}var j=a.getDisplayOnOtherMember(m);f.QInAExportUtil.setNameIfNotNull(b,"DisplayOnOtherMember",j);}};f.QInARepoExceptions.prototype.exportEvaluates=function(e,a,i,b){var s=a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||e.getModCounter()>0;if(s){if(e.hasElements()){var c=i.putNewList("EvaluateOn");var d=e.size();for(var E=0;E<d;E++){var g=c.addNewStructure();var h=e.get(E);g.putString("Name",h.getField().getName());g.putString("Evaluate",h.getEvaluate().toString());var j=h.getOperator();var k;if(j===f.ComparisonOperator.NOT_BETWEEN&&b){k="NOTBETWEEN";}else{k=f.QInAConverter.lookupComparisonInA(j);}g.putString("Comparison",k);f.QInAValueUtils.exportPlaceholderValue(a,"Low",g,h.getLowValue(),h.getValueType(),h.getQueryModel());if(!g.containsKey("Low")){g.putString("Low","");}if(j.getNumberOfParameters()>1){f.QInAValueUtils.exportPlaceholderValue(a,"High",g,h.getHighValue(),h.getValueType(),h.getQueryModel());}}}}};f.QInARepoExceptions.prototype.exportThresholds=function(t,e,i,a){var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||t.getModCounter()>0;if(s){var b=i.putNewList("Threshold");var c=t.size();for(var T=0;T<c;T++){var d=t.get(T);var g=b.addNewStructure();var n=d.getName();if(!f.XString.isEqual(n,"Settings")){g.putStringNotNull("Name",n);}var h=d.getOperator();var j;if(h===f.ComparisonOperator.NOT_BETWEEN&&a){j="NOTBETWEEN";}else{j=f.QInAConverter.lookupComparisonInA(h);}g.putString("Comparison",j);var k=d.getValueType()===f.XValueType.DOUBLE;if(d.getLowXValue()!==null){if(k){g.putDouble("Low",d.getLowValue());}else{g.putString("Low",d.getLow());}}if(d.getHighXValue()!==null&&h.getNumberOfParameters()>1){if(k){g.putDouble("High",d.getHighValue());}else{g.putString("High",d.getHigh());}}if(!d.isEmpty()){this.exportSettings(d,e,g);}else{g.putInteger("AlertLevel",d.getAlertLevel().getLevel());}}}};f.QInARepoExceptions.prototype.exportSettings=function(t,e,i){var a=i.putNewList("Settings");var s=t.size();for(var S=0;S<s;S++){var b=t.get(S);var c=a.addNewStructure();c.putString("Name",b.getName());c.putInteger("Priority",b.getPriority());var v=b.getValue();if(f.isNull(v)||f.XString.isEqual(v,"")){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value");}else{c.putString("Value",v);}}};f.QInARepoField=function(){};f.QInARepoField.prototype=new f.QInARepository();f.QInARepoField.prototype._ff_c="QInARepoField";f.QInARepoField.prototype.getComponentType=function(){return f.OlapComponentType.FIELD;};f.QInARepoField.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){var n=a.getStringByKey("Name");var d=p;if(d.getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){b=d.addNewFormulaCalcField(f.PresentationType.lookup(a.getStringByKey("PresentationType")),n);}else{b=d.getFieldByName(n);}}if(f.notNull(b)){var e=a.getStringByKey("TextTransformation");if(f.notNull(e)){var t=f.QInAConverter.lookupTextTransformation(e);b.setTextTransformation(t);}b.setDisplayFormat(a.getStringByKey("DisplayFormat"));if(b.getDimension().getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){var g=a.getStructureByKey("Formula");if(f.notNull(g)){var h=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(i,b.getDimension(),a.getStructureByKey("Formula"),null,c);b.setFormulaItem(h);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("AutoSignFlip")){var j=a.getBooleanByKeyExt("AutoSignFlip",false);b.setAutoSignFlip(j);}}}return b;};f.QInARepoField.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putStringNotNull("DisplayFormat",b.getDisplayFormat());var t=b.getTextTransformation();if(f.notNull(t)){var c=f.QInAConverter.lookupTextTransformationInA(t);i.putString("TextTransformation",c);}if(b.getDimension().getDimensionType()===f.DimensionType.FORMULA_CALCULATED_DIMENSION){i.putString("PresentationType",b.getPresentationType().getName());var d=b;if(d.getFormulaItem()!==null){f.QInARepoMemberAbstract.exportFormulaItem(e,d.getFormulaItem(),i.putNewStructure("Formula"),b);}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.hasPropertyChanged(f.QFieldProperties.QY_AUTO_SIGN_FLIP)){if(d.isAutoSignFlip()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&d.hasPropertyChanged(f.QFieldProperties.QY_AUTO_SIGN_FLIP)){i.putBoolean("AutoSignFlip",d.isAutoSignFlip());}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilter=function(){};f.QInARepoFilter.prototype=new f.QInARepository();f.QInARepoFilter.prototype._ff_c="QInARepoFilter";f.QInARepoFilter.prototype.exportFilter=function(e,a,b,l,t){return e.exportFilterExpression(b);};f.QInARepoFilter.prototype.isValidFilterExpression=function(a){if(f.isNull(a)){return false;}var b=a.getFilterRootElement();if(f.isNull(b)){return false;}var c=b.getOlapComponentType();return c!==f.FilterComponentType.FILTER_ACROSS_MODELS&&c!==f.FilterComponentType.FILTER_MEASURE_BASED;};f.QInARepoFilterAcrossModels=function(){};f.QInARepoFilterAcrossModels.prototype=new f.QInARepository();f.QInARepoFilterAcrossModels.prototype._ff_c="QInARepoFilterAcrossModels";f.QInARepoFilterAcrossModels.prototype.getComponentType=function(){return f.FilterComponentType.FILTER_ACROSS_MODELS;};f.QInARepoFilterAcrossModels.prototype.importComponentWithStructure=function(i,a,m,p,c){var n=a.getStringByKey("Name");var b=m;if(f.isNull(b)){b=f.QFactory.createFilterAcrossModels(c,n);}var d=a.getListByKey("Links");var s=d.size();for(var e=0;e<s;e++){var g=d.getStructureAt(e);var h=f.QInARepoUtils.importLinkPart(c,g.getStructureByKey("FirstDimension"));var j=f.QInARepoUtils.importLinkPart(c,g.getStructureByKey("SecondDimension"));b.addNewLinkFromParts(h,j);}var k=a.getListByKey("MeasureNames");var l=k.size();for(var o=0;o<l;o++){b.addMeasureName(k.getStringAt(o));}var q=a.getListByKey("SecondaryMeasureNames");if(f.notNull(q)){for(var r=0;r<q.size();r++){b.addSecondaryMeasureName(q.getStringAt(r));}}f.QInARepoUtils.importLayeredFilters(i,b,a.getListByKey("LayeredFilters"));if(a.containsKey("PreferPrequeryBasedStrategy")){b.setPreferPrequeryBasedStrategy(true);}return b;};f.QInARepoFilterAcrossModels.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());var c=i.putNewList("Links");var d=b.getLinks().getIterator();while(d.hasNext()){var g=c.addNewStructure();var l=d.next();f.QInARepoUtils.exportLinkPart(e,g.putNewStructure("FirstDimension"),l.getFirstPart());f.QInARepoUtils.exportLinkPart(e,g.putNewStructure("SecondDimension"),l.getSecondPart());}var h=i.putNewList("MeasureNames");h.addAllStrings(b.getMeasureNames());var j=i.putNewList("SecondaryMeasureNames");j.addAllStrings(b.getSecondaryMeasureNames());i.put("LayeredFilters",f.QInARepoUtils.exportLayeredFilters(e,b));if(b.getPreferPrequeryBasedStrategy()){i.putBoolean("PreferPrequeryBasedStrategy",true);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterAlgebra=function(){};f.QInARepoFilterAlgebra.prototype=new f.QInARepository();f.QInARepoFilterAlgebra.prototype._ff_c="QInARepoFilterAlgebra";f.QInARepoFilterAlgebra.prototype.getComponentType=function(){return f.FilterComponentType.BOOLEAN_ALGEBRA;};f.QInARepoFilterAlgebra.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=null;if(f.notNull(p)){var e=p;d=e.getFilterExpression();}var g=b.getStringByKey("Code");var h;if(f.XString.isEqual(g,"And")){h=f.QFilterAnd._create(c,d);}else if(f.XString.isEqual(g,"Not")){h=f.QFilterNot._create(c,d);}else{h=f.QFilterOr._create(c,d);}var u=b.getStringByKey("Id");h.setUniqueId(u);var j=b.getListByKey("SubSelections");if(f.notNull(j)){var s=j.size();for(var i=0;i<s;i++){var k=j.getStructureAt(i);var l=a.importComponent(null,k,null,h,c);if(f.notNull(l)){h.add(l);}}}return h;};f.QInARepoFilterAlgebra.prototype.exportComponentWithStructure=function(e,m,a,b){var t=m.getComponentType();var q=m;if(t.isTypeOf(f.FilterComponentType.AND)){a.putString("Code","And");a.putString("Id",q.getUniqueId());}else if(t.isTypeOf(f.FilterComponentType.OR)){a.putString("Code","Or");a.putString("Id",q.getUniqueId());}else if(t.isTypeOf(f.FilterComponentType.NOT)){a.putString("Code","Not");a.putString("Id",q.getUniqueId());}var c=a.putNewList("SubSelections");var s=q.size();for(var i=0;i<s;i++){var d=e.exportComponent(null,q.get(i),null,b);if(f.notNull(d)){c.add(d);}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoFilterAll=function(){};f.QInARepoFilterAll.prototype=new f.QInARepository();f.QInARepoFilterAll.prototype._ff_c="QInARepoFilterAll";f.QInARepoFilterAll.prototype.getComponentType=function(){return f.OlapComponentType.SELECTOR;};f.QInARepoFilterAll.prototype.getTagName=function(){return"FilterRepo";};f.QInARepoFilterAll.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=a.getStructureByKey("DynamicFilter");if(f.notNull(d)){var s=b.getDynamicFilter();i.importFilterExpression(s,d,b,c);}else if(b.isDynamicFilterInitialized()){b.setDynamicFilter(null);}var e=a.getStructureByKey("VisibilityFilter");if(f.notNull(e)){var g=b.getVisibilityFilter();i.importFilterExpression(g,e,b,c);}else if(b.isVisibilityFilterInitialized()){b.setVisibilityFilter(null);}var h=a.getStructureByKey("FixedFilter");if(f.notNull(h)){var j=b.getFixedFilter();i.importFilterExpression(j,h,b,c);}else if(b.isFixedFilterInitialized()){b.setFixedFilter(null);}var k=a.getStructureByKey("ValueHelpFilter");if(f.notNull(k)){var v=b.getValuehelpFilter();i.importFilterExpression(v,k,b,c);}var l=a.getStructureByKey("ValueHelpVisibilityFilter");if(f.notNull(l)){var n=b.getValuehelpVisibilityFilter();i.importFilterExpression(n,l,b,c);}return b;};f.QInARepoFilterAll.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(b.isDynamicFilterInitialized()){var s=b.getDynamicFilter();var c=e.exportFilterExpression(s);i.put("DynamicFilter",c);}if(b.isVisibilityFilterInitialized()){var d=b.getVisibilityFilter();var g=e.exportFilterExpression(d);i.put("VisibilityFilter",g);}if(b.isFixedFilterInitialized()){var h=b.getFixedFilter();var j=e.exportFilterExpression(h);i.put("FixedFilter",j);}if(b.isValueHelpFilterInitialized()){var v=b.getValuehelpFilter();var k=e.exportFilterExpression(v);i.put("ValueHelpFilter",k);}if(b.isValueHelpVisibilityFilterInitialized()){var l=b.getValuehelpVisibilityFilter();var n=e.exportFilterExpression(l);i.put("ValueHelpVisibilityFilter",n);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterCartesianList=function(){};f.QInARepoFilterCartesianList.prototype=new f.QInARepository();f.QInARepoFilterCartesianList.prototype._ff_c="QInARepoFilterCartesianList";f.QInARepoFilterCartesianList.prototype.getComponentType=function(){return f.FilterComponentType.CARTESIAN_LIST;};f.QInARepoFilterCartesianList.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=null;if(f.notNull(p)){var e=p;d=e.getFilterExpression();}var g=m;if(f.isNull(g)){g=f.notNull(d)?f.QFactory.createFilterCartesianList(d):f.QFactory.createFilterCartesianList(c);}var h=b.getStringByKey("FieldName");if(f.notNull(h)&&f.notNull(c)){var j=c.getFieldAccessorSingle();if(f.isNull(j)||b.containsKey("QY_CACHE_CONTEXT")){var k=b.getStructureByKey("QY_CACHE_CONTEXT");if(f.isNull(k)){return null;}var l=f.QInARepoUtils.importCacheKey(k);var n=c.getOlapEnv().getFieldMetadata(l);if(f.isNull(n)){return null;}g.setFieldMetadata(n);}else{var o=j.getFieldByName(h);if(f.isNull(o)){return null;}if(o.getDimension().isEnforcedDynamicValue()&&c.getQueryManager()!==null&&c.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null;}g.setField(o);var s=b.getListByKey("SupplementsFieldNames");if(f.notNull(s)){var q=s.size();for(var y=0;y<q;y++){var r=s.getStringAt(y);var t=j.getFieldByName(r);g.addSupplementField(t);}}}}f.QInARepoHierarchy.importHierarchyForFilter(a.isAbap(c),a.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),b,g,f.FilterComponentType.CARTESIAN_LIST);var u=b.getStringByKey("Id");g.setUniqueId(u);if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.containsKey("ConvertToFlatSelection")){var v=b.getBooleanByKeyExt("ConvertToFlatSelection",false);g.setConvertToFlatFilter(v);}var w=b.getListByKey("Elements");g.clear();if(f.notNull(w)){var x=w.size();for(var i=0;i<x;i++){var z=w.getStructureAt(i);var A=a.importComponent(null,z,null,g,c);var B=A;g.add(B);}}return g;};f.QInARepoFilterCartesianList.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;var b=c.getFieldMetadata();var d=false;if(f.notNull(b)){var g=b.getDimensionMetadata();if(f.isNull(g)){var h=c.getField();var k=h.getDimension();if(f.notNull(k)){d=k.isEnforcedDynamicValue();}}else{d=g.isEnforcedDynamicValue();}i.putString("FieldName",b.getName());var l=c.getFilterExpression();if(f.notNull(l)){var p=l.getParent();if(f.notNull(p)&&p.getOlapComponentType()===f.OlapComponentType.OLAP_FILTER_MANAGER){var n=b.getCacheKey();i.put("QY_CACHE_CONTEXT",f.QInARepoUtils.exportCacheKey(n));}}}if(d&&c.getQueryManager()!==null&&c.getQueryManager().isSuppressExitVariableValuesInRepoMode()){return null;}i.putString("Id",c.getUniqueId());var o=c.getHierarchyName();if(f.notNull(o)){var q=c.getFilterExpression()!==null?c.getFilterExpression():c.getParent().getFilterExpression();f.QInARepoHierarchy.exportHierarchyForFilter(e,e.isAbap(c),i,null,q,c.getQueryManager(),o,c.getHierarchyDueDate(),c.getHierarchyVersion());}if(e.capabilities.supportsSupplements()){var s=c.getSupplementFieldNames();if(f.XCollectionUtils.hasElements(s)){var r=i.putNewList("SupplementsFieldNames");r.addAllStrings(s);}}var t=c.isConvertToFlatFilter();var u=i.putNewList("Elements");var v=c.size();for(var j=0;j<v;j++){var w=c.getOp(j);var x=e.exportComponent(null,w,null,a);u.add(x);t=t||w.isConvertToFlatFilter();}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_CL)){i.putBoolean("ConvertToFlatSelection",t);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterCartesianProduct=function(){};f.QInARepoFilterCartesianProduct.prototype=new f.QInARepository();f.QInARepoFilterCartesianProduct.prototype._ff_c="QInARepoFilterCartesianProduct";f.QInARepoFilterCartesianProduct.prototype.getComponentType=function(){return f.FilterComponentType.CARTESIAN_PRODUCT;};f.QInARepoFilterCartesianProduct.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=null;if(f.notNull(p)){var e=p;d=e.getFilterExpression();}var g=m;if(f.isNull(g)){g=f.notNull(d)?f.QFactory.createFilterCartesianProduct(d):f.QFactory.createFilterCartesianProduct(c);}g.clear();var u=b.getStringByKey("Id");g.setUniqueId(u);var h=b.getListByKey("Elements");if(f.notNull(h)){for(var i=0;i<h.size();i++){var j=h.getStructureAt(i);var k=a.importComponent(null,j,null,g,c);var l=k;g.add(l);}}return g;};f.QInARepoFilterCartesianProduct.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("Id",c.getUniqueId());var d=a.putNewList("Elements");for(var i=0;i<c.size();i++){var g=c.getCartesianChild(i);var h=e.exportComponent(null,g,null,b);if(f.notNull(h)){d.add(h);}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoFilterCellValueOperand=function(){};f.QInARepoFilterCellValueOperand.prototype=new f.QInARepository();f.QInARepoFilterCellValueOperand.prototype._ff_c="QInARepoFilterCellValueOperand";f.QInARepoFilterCellValueOperand.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_CELL_VALUE_OPERAND;};f.QInARepoFilterCellValueOperand.prototype.importComponentWithStructure=function(i,a,m,p,c){var o=m;if(f.isNull(o)){o=f.QFilterCellValueOperand._create(c,null,null,null,null);}var b=a.getStringByKey("Comparison");var d=f.QInAConverter.lookupComparison(b);o.setComparisonOperator(d);var e=a.getBooleanByKey("IsExcluding");o.setIsExcluding(e);var g=a.getListByKey("Values");f.QInARepoFilterOperation.importValues(i,g,o,null,c);return o;};f.QInARepoFilterCellValueOperand.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;i.putBoolean("IsExcluding",c.isExcluding());var b=c.getComparisonOperator();i.putString("Comparison",f.QInAConverter.lookupComparisonInA(b));var d=f.QInARepoFilterOperation.exportValues(e,c);i.put("Values",d);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterElement=function(){};f.QInARepoFilterElement.prototype=new f.QInARepository();f.QInARepoFilterElement.prototype._ff_c="QInARepoFilterElement";f.QInARepoFilterElement.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_ELEMENT;};f.QInARepoFilterElement.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=m;if(a.containsKey("Operator")){d=i.importFilterAlgebra(b,a,c);}else{var e=a.getStructureByKey("SetOperand");if(f.isNull(e)){if(a.containsKey("GeometryOperand")){d=i.importFilterGeo(b,a,c);}}else{d=i.importCartesianList(e,d,b,c);}}return d;};f.QInARepoFilterElement.prototype.m_exportingAtLevel1=false;f.QInARepoFilterElement.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var t=b.getComponentType();if(t.isTypeOf(f.FilterComponentType.BOOLEAN_ALGEBRA)){if(t===f.FilterComponentType.CARTESIAN_LIST){e.exportCartesianList(b,i);}else if(t===f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST){e.exportConvertedTimeCartesianList(b,i);}else if(t===f.FilterComponentType.CARTESIAN_PRODUCT){e.exportFilterCartesianProduct(b,i);}else{if(this.shouldContinueExport(b,e)){e.exportFilterAlgebra(b,i);if(this.m_exportingAtLevel1){this.m_exportingAtLevel1=false;}}}}else if(t.isTypeOf(f.FilterComponentType.OPERATION)){var c=b;var d=c.getComparisonOperator();if(f.notNull(d)){if(d.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){e.exportFilterGeo(c,i);}else{if(e.capabilities.supportsSetOperand()){var g=f.PrFactory.createStructure();var h=c.getFieldMetadata();if(f.notNull(h)){g.putString("FieldName",h.getName());var j=c.getHierarchyName();if(f.notNull(j)){var k=c.getFilterExpression()!==null?c.getFilterExpression():c.getParent().getFilterExpression();f.QInARepoHierarchy.exportHierarchyForFilter(e,e.isAbap(b),g,null,k,c.getQueryManager(),j,c.getHierarchyDueDate(),c.getHierarchyVersion());}if(c.isConvertToFlatFilter()){g.putBoolean("ConvertToFlatSelection",true);}var l=g.putNewList("Elements");var n=l.addNewStructure();e.exportFilterOperation(c,n);if(f.notNull(i)){i.put("SetOperand",g);}}}}}}else if(t.isTypeOf(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND)){var o=f.PrFactory.createStructure();var p=o.putNewList("Elements");p.add(e.exportCellValueOperand(b));i.put("CellValueOperand",o);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterElement.prototype.shouldContinueExport=function(a,e){var i=f.notNull(e.variableProcessingDirective)&&e.variableProcessingDirective===f.ProcessingStep.VARIABLE_DEFINITION;if(!i){return true;}var q=a.getQueryModel();var m=a.getModelCapabilities();if(m.supportsComplexTupleFilter()&&f.notNull(q)){if(!this.m_exportingAtLevel1){this.m_exportingAtLevel1=true;return true;}return false;}return true;};f.QInARepoFilterExpression=function(){};f.QInARepoFilterExpression.prototype=new f.QInARepository();f.QInARepoFilterExpression.prototype._ff_c="QInARepoFilterExpression";f.QInARepoFilterExpression.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_EXPRESSION;};f.QInARepoFilterExpression.prototype.importComponentWithStructure=function(a,b,m,p,c){var e=m;if(f.XString.isEqual(e.getName(),"selectionSpaceContainer")===false||e.getFilterRootElement()===null){e.setComplexRoot(null);var s=e.getModelCapabilities().supportsCellValueOperand();if(s){e.setIsSuppressingNulls(false);e.clearCellValueFilter();}if(f.notNull(b)){var u=b.getStringByKey("Id");e.setUniqueId(u);if(s){var d=b.getBooleanByKeyExt("IsSuppressingNulls",false);e.setIsSuppressingNulls(d);}var g=b.getStructureByKey("FilterRoot");if(f.notNull(g)){var h=a.importComponent(null,g,null,e,c);var j=h;e.setComplexRoot(j);}if(s){var k=b.getListByKey("CellValueOperand");if(f.notNull(k)){for(var i=0;i<k.size();i++){var l=k.getStructureAt(i);var n=a.importComponent(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND,l,null,e,c);e.addCellValueFilter(n);}}}}}return m;};f.QInARepoFilterExpression.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;a.putString("Id",c.getUniqueId());a.putBoolean("IsSuppressingNulls",c.isSuppressingNulls());var r=c.getFilterRootElement();if(f.notNull(r)){var d=e.exportComponent(null,r,null,f.QImExFlag.DEFAULT_ALL);a.put("FilterRoot",d);}if(c.getModelCapabilities().supportsCellValueOperand()){var g=a.putNewList("CellValueOperand");var h=c.getCellValueOperands();for(var i=0;i<h.size();i++){var j=h.get(i);var k=e.exportCellValueOperand(j);g.add(k);}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoFilterFixed=function(){};f.QInARepoFilterFixed.prototype=new f.QInARepository();f.QInARepoFilterFixed.prototype._ff_c="QInARepoFilterFixed";f.QInARepoFilterFixed.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_FIXED;};f.QInARepoFilterFixed.prototype.getTagName=function(){return"FixedFilterRepo";};f.QInARepoFilterFixed.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=null;if(f.notNull(a)){var d=p;b=i.importFilterExpression(null,a,d,c);if(f.notNull(d)&&f.notNull(b)){d.setFixedFilter(b);}}return b;};f.QInARepoFilterFixed.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(!b.isFixedFilterInitialized()){return null;}var c=b.getFixedFilter();var d=e.exportFilterExpression(c);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,d,a);};f.QInARepoFilterGeo=function(){};f.QInARepoFilterGeo.prototype=new f.QInARepository();f.QInARepoFilterGeo.prototype._ff_c="QInARepoFilterGeo";f.QInARepoFilterGeo.tryCreateGeometry=function(s){var v=f.XGeometryValue.createGeometryValueWithWkt(s);if(f.isNull(v)){v=f.XStringValue.create(s);}return v;};f.QInARepoFilterGeo.prototype.getComponentType=function(){return f.FilterComponentType.SPATIAL_FILTER;};f.QInARepoFilterGeo.prototype.getTagName=function(){return"GeometryOperandRepo";};f.QInARepoFilterGeo.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var d=c.getFieldAccessorSingle();var e=a.getStringByKey("Comparison");var g=a.getStringByKey("FieldName");var h=a.getStringByKey("Value1");var j=null;if(f.XStringUtils.isNotNullAndNotEmpty(e)&&f.XStringUtils.isNotNullAndNotEmpty(g)&&f.XStringUtils.isNotNullAndNotEmpty(h)){var k=f.QInAConverter.lookupComparison(e);if(f.notNull(k)){if(k.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){var l=d.getFieldByName(g);if(f.notNull(l)){j=f.QFactory.createFilterOperationWithOperator(b,l,k);var n=f.QInARepoFilterGeo.tryCreateGeometry(h);j.getLow().setValue(n);var o=a.getStringByKey("Value2");if(f.XStringUtils.isNotNullAndNotEmpty(o)){var s=f.QInARepoFilterGeo.tryCreateGeometry(o);j.getHigh().setValue(s);}var q=a.getStringByKey("Value3");if(f.XStringUtils.isNotNullAndNotEmpty(q)){var t=f.QInARepoFilterGeo.tryCreateGeometry(q);j.getThird().setValue(t);}}}}}return j;};f.QInARepoFilterGeo.prototype.exportComponentWithStructure=function(e,m,i,a){var o=m;var c=o.getComparisonOperator();if(!c.isTypeOf(f.SpatialComparisonOperator._SPATIAL)){throw f.XException.createIllegalStateException("Not a spatial operator");}i.putString("Comparison",f.QInAConverter.lookupComparisonInA(c));var b=o.getFieldMetadata();i.putString("FieldName",b.getName());var g=o.getLow();var d=o.getDataSource();if(f.isNull(d)){if(f.notNull(g)&&g.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value1",i,g,g.getValueType());var s=g.getGeometry().getSrid();if(e.capabilities.supportsSpatialFilterSrid()&&f.notNull(s)){i.putInteger("SRID",s.getInteger());}}}else{if(f.notNull(g)&&g.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value1",i,g,f.XValueType.STRING);}var h=e.exportDataSource(d,false);i.put("DataSource",h);}var j=o.getHigh();if(f.notNull(j)&&j.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value2",i,j,f.XValueType.STRING);}var k=o.getThird();if(f.notNull(k)&&k.getValue()!==null){f.QInAValueUtils.exportFilterValue(e,"Value3",i,k,f.XValueType.STRING);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterManager=function(){};f.QInARepoFilterManager.prototype=new f.QInARepository();f.QInARepoFilterManager.prototype._ff_c="QInARepoFilterManager";f.QInARepoFilterManager.prototype.getComponentType=function(){return f.OlapComponentType.OLAP_FILTER_MANAGER;};f.QInARepoFilterManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;if(f.isNull(b)){b=c.getOlapEnv().getFilterManager();}var d=a.getStructureByKey("OlapFilterManager");var e=d.getStructureByKey("OlapFilters");var g=e.getKeysAsIteratorOfString();while(g.hasNext()){var h=g.next();var j=b.getFilterByName(h);i.importFilterExpression(j,e.getStructureByKey(h),b,b.getContext());}return b;};f.QInARepoFilterManager.prototype.exportComponentWithStructure=function(e,m,i,a){var b=i.putNewStructure("OlapFilterManager");var c=b.putNewStructure("OlapFilters");var d=m;var g=d.getFilters();var h=g.getKeysAsIteratorOfString();while(h.hasNext()){var j=h.next();var k=g.getByKey(j);if(f.QInARepoUtils.isValidFilterExpressionForRepository(k)){c.put(j,e.exportFilterExpression(k));}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterMeasureBased=function(){};f.QInARepoFilterMeasureBased.prototype=new f.QInARepository();f.QInARepoFilterMeasureBased.prototype._ff_c="QInARepoFilterMeasureBased";f.QInARepoFilterMeasureBased.prototype.getComponentType=function(){return f.FilterComponentType.FILTER_MEASURE_BASED;};f.QInARepoFilterMeasureBased.prototype.importComponentWithStructure=function(a,b,m,p,c){var n=b.getStringByKey("Name");var d=m;if(f.isNull(d)){d=f.QFactory.createFilterMeasureBased(c,n);}var e=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(a,null,b.getStructureByKey("Formula"),null,c);d.setFormula(e);var g=b.getListByKey("AggregationFieldNames");var s=g.size();for(var i=0;i<s;i++){d.addDimensionContext(g.getStringAt(i));}f.QInARepoUtils.importLayeredFilters(a,d,b.getListByKey("LayeredFilters"));return d;};f.QInARepoFilterMeasureBased.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;f.QInARepoMemberAbstract.exportFormulaItem(e,b.getFormula(),i.putNewStructure("Formula"),b);i.putString("Name",b.getName());var d=i.putNewList("AggregationFieldNames");d.addAllStrings(b.getDimensionContext());i.put("LayeredFilters",f.QInARepoUtils.exportLayeredFilters(e,b));return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterOperation=function(){};f.QInARepoFilterOperation.prototype=new f.QInARepository();f.QInARepoFilterOperation.prototype._ff_c="QInARepoFilterOperation";f.QInARepoFilterOperation.importValues=function(a,b,c,d,e){var s=b.size();for(var i=0;i<s&&i<3;i++){var g=b.getStructureAt(i);var v=c.getValueAt(i);var h=g.getStringByKey("Type");var j=f.QInAConverter.lookupValueType(h);if(j===f.XValueType.VARIABLE){v.setFilterValueType(j);var k=g.getStringByKey("Value");if(f.notNull(k)){var l=e.getVariableContainer().getVariables();var m=l.getByKey(k);v.setVariableValue(m);}}else{if(j===f.XValueType.CURRENT_MEMBER){v.setFilterValueType(j);}var n=f.PrUtils.getListProperty(g,"LowNavigations");if(f.isNull(n)){n=f.PrUtils.getListProperty(g,"Value");}if(f.notNull(n)){var o=v.getMemberNavigations();o.clear();var p=n.size();for(var q=0;q<p;q++){var r=f.QInARepoFilterOperation.importMemberNavigation(n.getStructureAt(q));o.add(r);}}if(j!==f.XValueType.CURRENT_MEMBER){f.QInARepoUtils.importSupplementsAndValue(a,v,g,null,null,d);}}}};f.QInARepoFilterOperation.importMemberNavigation=function(i){var m=f.QFactory.createMemberNavigation(f.CurrentMemberFunction.lookup(i.getStringByKey("Function")));if(i.containsKey("Parameters")){var a=i.getListByKey("Parameters");var b=a.size();for(var c=0;c<b;c++){var d=a.getStructureAt(c);if(d.containsKey("Navigations")){var e=d.getListByKey("Navigations");var g=e.size();for(var h=0;h<g;h++){m.addNavigation(f.QInARepoFilterOperation.importMemberNavigation(e.getStructureAt(h)));}}else{if(d.containsKey("Level")){var j=d.getByKey("Level");if(j.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithLevelNumber(j.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithLevelLiteral(j.getString()));}}else if(d.containsKey("Member")){m.addParameter(f.QFactory.createNavigationParameterWithMemberName(d.getStringByKey("Member")));}else if(d.containsKey("NoValuesAboveLevel")){m.addParameter(f.QFactory.createNavigationParameterWithNoValuesAboveLevel(d.getStringByKey("NoValuesAboveLevel")));}else if(d.containsKey("Shift")){var k=d.getStructureByKey("Shift");m.addParameter(f.QFactory.createNavigationParameterWithShift(k.getStringByKey("Level"),k.getIntegerByKey("Constant")));}else if(d.containsKey("Range")){var l=d.getStructureByKey("Range");m.addParameter(f.QFactory.createNavigationParameterWithRange(l.getStringByKey("Level"),l.getIntegerByKey("OffsetLow"),l.getIntegerByKey("OffsetHigh")));}else{var n=d.getByKey("Constant");if(n.isNumeric()){m.addParameter(f.QFactory.createNavigationParameterWithIntegerConstant(n.getInteger()));}else{m.addParameter(f.QFactory.createNavigationParameterWithStringConstant(n.getString()));}}}}}return m;};f.QInARepoFilterOperation.exportValues=function(e,a){var b=f.PrFactory.createList();var s=a.size();for(var i=0;i<s;i++){var v=a.getValueAt(i);var c=b.addNewStructure();var d=v.getFilterValueType();if(d===f.XValueType.VARIABLE){c.putString("Type","Variable");f.QInARepoUtils.setNameIfNotNull(c,"Value",v.getVariableValue());}else{var g;if(d===f.XValueType.CURRENT_MEMBER){c.putString("Type","CurrentMember");}var l=null;var h=v.getFieldValue();if(f.notNull(h)){l=h.getField();}f.QInARepoUtils.exportSupplementsAndValue(e,null,c,l,v,null);var m=v.getMemberNavigations();var j=m.size();if(j>0){g=c.putNewList("LowNavigations");for(var k=0;k<j;k++){f.QInARepoFilterOperation.exportMemberNavigation(m.get(k),g.addNewStructure());}}}}return b;};f.QInARepoFilterOperation.exportMemberNavigation=function(m,a){a.putString("Function",m.getMemberFunction().getName());var p=m.getParameters();if(f.notNull(p)){var s=p.size();var b=a.putNewList("Parameters");for(var i=0;i<s;i++){var c=p.get(i);var d=b.addNewStructure();var e=c.getMemberNavigationType();var k=f.QInAConverter.lookupMemberNavigationTypeInA(e);if(e===f.MemberNavigationType.FUNCTION_PARAM_SHIFT||e===f.MemberNavigationType.FUNCTION_PARAM_RANGE){d=d.putNewStructure(k);f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,"Level",c.getLevelValue());f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,"Constant",c.getConstantValue());f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,"OffsetLow",c.getOffSetLow());f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,"OffsetHigh",c.getOffsetHigh());}else{if(!f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,k,c.getLevelValue())){if(!f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,k,c.getConstantValue())){f.QInARepoFilterOperation.setKeyValueForMemberNavigation(d,k,c.getFunctionName());}}}}}var n=m.getNavigations();if(f.notNull(n)){var g;if(a.containsKey("Parameters")){g=a.getListByKey("Parameters");}else{g=a.putNewList("Parameters");}var h=g.addNewStructure();var j=h.putNewList("Navigations");var l=n.size();for(var o=0;o<l;o++){f.QInARepoFilterOperation.exportMemberNavigation(n.get(o),j.addNewStructure());}}};f.QInARepoFilterOperation.setKeyValueForMemberNavigation=function(i,k,v){if(f.isNull(v)){return false;}if(v.getValueType().isNumber()){i.putDouble(k,v.getDouble());}else{i.putString(k,v.toString());}return true;};f.QInARepoFilterOperation.prototype.getComponentType=function(){return f.FilterComponentType.OPERATION;};f.QInARepoFilterOperation.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=null;if(f.notNull(p)){var d=p;b=d.getFilterExpression();}var e=m;if(f.isNull(e)){e=f.notNull(b)?f.QFactory.createFilterOperation(b,null):f.QFactory.createFilterOperation(c,null);}var g=a.getStringByKey("FieldName");var h=null;if(f.notNull(g)&&f.notNull(c)){var j=c.getFieldAccessorSingle();if(f.isNull(j)||a.containsKey("QY_CACHE_CONTEXT")){var k=a.getStructureByKey("QY_CACHE_CONTEXT");if(f.isNull(k)){return null;}var l=f.QInARepoUtils.importCacheKey(k);var n=c.getOlapEnv().getFieldMetadata(l);if(f.isNull(n)){return null;}e.setFieldMetadata(n);}else{h=j.getFieldByName(g);if(f.isNull(h)){return null;}e.setField(h);}}var o=a.getStringByKeyExt("Comparison","=");if(f.notNull(o)){var q=f.QInAConverter.lookupComparison(o);if(f.isNull(q)){i.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate2("Unsupported comparison operator: ",o));}e.setComparisonOperator(q);}else{e.setComparisonOperator(null);}var r=a.getBooleanByKeyExt("IsExcluding",false);if(r){e.setSetSign(f.SetSign.EXCLUDING);}else{e.setSetSign(f.SetSign.INCLUDING);}var s=a.getBooleanByKeyExt("HasLevelOffset",false);if(!s){e.resetLevelOffset();}else{var t=a.getIntegerByKeyExt("LevelOffset",0);e.setLevelOffset(t);}var u=a.getBooleanByKeyExt("HasDepth",false);if(!u){e.resetDepth();}else{var v=a.getIntegerByKeyExt("Depth",0);e.setDepth(v);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("ConvertToFlatSelection")){e.setConvertToFlatFilter(a.getBooleanByKeyExt("ConvertToFlatSelection",false));}var w=a.getStringByKey("Id");e.setUniqueId(w);var x=a.getDoubleByKeyExt("Exactness",0.0);e.setExactness(x);f.QInARepoHierarchy.importHierarchyForFilter(i.isAbap(c),i.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER),a,e,f.FilterComponentType.OPERATION);var y=a.getListByKey("Values");f.QInARepoFilterOperation.importValues(i,y,e,h,c);return e;};f.QInARepoFilterOperation.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Id",b.getUniqueId());var c=b.getFieldMetadata();f.QInARepoUtils.setNameIfNotNull(i,"FieldName",c);var d=b.getFilterExpression();if(f.notNull(c)){if(f.notNull(d)){var p=d.getParent();if(f.notNull(p)&&d.getParent().getOlapComponentType()===f.OlapComponentType.OLAP_FILTER_MANAGER){var g=c.getCacheKey();i.put("QY_CACHE_CONTEXT",f.QInARepoUtils.exportCacheKey(g));}}}var h=b.getComparisonOperator();i.putString("Comparison",f.QInAConverter.lookupComparisonInA(h));i.putBoolean("IsExcluding",b.getSetSign()===f.SetSign.EXCLUDING);i.putBoolean("HasLevelOffset",b.hasLevelOffset());if(b.hasLevelOffset()){i.putInteger("LevelOffset",b.getLevelOffset());}i.putBoolean("HasDepth",b.hasDepth());if(b.hasDepth()){i.putInteger("Depth",b.getDepth());}i.putDouble("Exactness",b.getExactness());var j=b.getHierarchyName();if(f.notNull(j)){var k=b.getFilterExpression()!==null?b.getFilterExpression():b.getParent().getFilterExpression();var l=b.getContext();f.QInARepoHierarchy.exportHierarchyForFilter(e,e.isAbap(l),i,null,k,b.getQueryManager(),j,b.getHierarchyDueDate(),b.getHierarchyVersion());}var n=f.QInARepoFilterOperation.exportValues(e,b);i.put("Values",n);if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_FO)){if(b.isConvertToFlatFilter()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&b.hasPropertyChanged(f.QFilterProperties.QY_CONVERT_TO_FLAT_SELECTION_FO)){i.putBoolean("ConvertToFlatSelection",b.isConvertToFlatFilter());}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterTuple=function(){};f.QInARepoFilterTuple.prototype=new f.QInARepository();f.QInARepoFilterTuple.prototype._ff_c="QInARepoFilterTuple";f.QInARepoFilterTuple.prototype.getComponentType=function(){return f.FilterComponentType.TUPLE;};f.QInARepoFilterTuple.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=null;if(f.notNull(p)){var d=p;b=d.getFilterExpression();}var e=f.QFilterTuple._create(c,b);e.setUniqueId(a.getStringByKey("Id"));var g=a.getListByKey("SubSelections");if(f.notNull(g)){var t=g.getStructureAt(0);t=t.getStructureByKey("TuplesOperand");var h=t.getListByKey("FieldNames");var j=f.PrUtils.asListOfString(h);e.setFieldNames(j);var l=t.getListByKey("Tuples");for(var k=0;k<l.size();k++){var n=l.getListAt(k);var o=f.PrUtils.asListOfString(n);e.addTupleCriteria(o);}}return e;};f.QInARepoFilterTuple.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Code","Tuple");i.putString("Id",b.getUniqueId());var c=i.putNewList("SubSelections");var t=c.addNewStructure();var d=t.putNewStructure("TuplesOperand");var g=d.putNewList("FieldNames");var h=b.getFieldNames();g.addAllStrings(h);var k=d.putNewList("Tuples");var n=b.getTuples();for(var l=0;l<n.size();l++){var s=n.get(l);var o=k.addNewList();for(var j=0;j<h.size();j++){o.addString(s.get(j));}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterVirtualDatasource=function(){};f.QInARepoFilterVirtualDatasource.prototype=new f.QInARepository();f.QInARepoFilterVirtualDatasource.prototype._ff_c="QInARepoFilterVirtualDatasource";f.QInARepoFilterVirtualDatasource.prototype.getComponentType=function(){return f.FilterComponentType.VIRTUAL_DATASOURCE;};f.QInARepoFilterVirtualDatasource.prototype.importComponentWithStructure=f.noSupport;f.QInARepoFilterVirtualDatasource.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;var b=f.PrFactory.createStructure();b.putString("Code","And");var c=b.putNewList("SubSelections");var s=this.createMemberOperand("SchemaName",v.getSchemaName());var p=this.createMemberOperand("PackageName",v.getPackageName());var o=this.createMemberOperand("ObjectName",v.getObjectName());c.add(s);c.add(p);c.add(o);i.put("Operator",b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterVirtualDatasource.prototype.createMemberOperand=function(l,v){var s=f.PrFactory.createStructure();s.putString("AttributeName",l);var c=f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL);s.putString("Comparison",c);s.putString("Value",v);var a=f.PrFactory.createStructure();a.put("MemberOperand",s);return a;};f.QInARepoFormulaCalculatedDimension=function(){};f.QInARepoFormulaCalculatedDimension.prototype=new f.QInARepository();f.QInARepoFormulaCalculatedDimension.prototype._ff_c="QInARepoFormulaCalculatedDimension";f.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension=function(i,a,m,p,c){var d=m;var b=a.getStringByKey("Name");if(f.isNull(d)){d=f.QFactory.createFormulaCalculatedDimension(c,b);d.setParent(p);c.getQueryModel().addDimension(d);}else{var e=a.getStructureByKey("Properties");d.reset(f.notNull(e));}d.setDimensionType(f.DimensionType.FORMULA_CALCULATED_DIMENSION);d.setName(b);d.setTopEntries(a.getIntegerByKeyExt("Top",0));d.setSkipEntries(a.getIntegerByKeyExt("Skip",0));i.importTotals(a,d.getResultStructureControllerBase(),c);var g=a.getListByKey("DependentCalcDims");if(f.notNull(g)){for(var j=0;j<g.size();j++){var h=g.get(j);var l=f.QFactory.createFormulaCalculatedDimension(c,b);l.setParent(p);f.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(i,h,l,null,c);d.addDependentCalculatedDimension(l);}}var n=a.getListByKey("DependentCustomMembers");if(f.notNull(n)){var q=d.getQueryModelBase();var o=q.getPrimaryCalculationDimension();for(var k=0;k<n.size();k++){var r=n.get(k);var s=r.getStringByKey("Name");var t=r.getStringByKey("AliasName");var u;if(o.getStructureMemberByAlias(t)!==null){u=o.getStructureMemberByAlias(t);}else if(o.getStructureMember(s)!==null){u=o.getStructureMember(s);}else{u=i.importStructureMember(o,r,c);if(o.getDimensionType()===f.DimensionType.ACCOUNT){u.setAliasName(r.getStringByKey("AliasName"));}}d.addDependentCustomMember(u);}}d.setApplyParentExternalFilters(a.getBooleanByKey("IsApplyParentExtFilters"));if(a.getStringByKey("Currency")!==null){d.setCurrency(a.getStringByKey("Currency"));}f.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties(i,a,c,d);var v=d.getAdditionalFilterContext();var w=null;var x=a.getStructureByKey("AdditionalFilterSelection");if(f.notNull(x)){w=i.importComponent(null,x,null,v,c);}v.setComplexRoot(w);return d;};f.QInARepoFormulaCalculatedDimension.importCalculatedDimensionProperties=function(a,b,c,d){var e=b.getStructureByKey("Properties");if(f.notNull(e)){var g=e.getStructureByKey("KeyRef");var s;if(d.getQueryManager().getClientQueryObjectStorageName()!==null){s=d.getQueryManager().getClientQueryObjectStorageName();}else{s=g.getStringByKey("StorageName");}var k=f.QFactory.createKeyRef(s,g.getStringByKey("GroupName"),g.getStringByKey("ObjectName"));d.setPropertiesKeyRef(k);return;}if(a.getMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){var h=d.getQueryManager().getClientQueryObjectStorageName();if(f.notNull(h)){var j=c.getOlapEnv().getClientQueryObjectManager();var p=j.getFormulaCalcDimProperties(d.getName(),h);if(f.notNull(p)){d.setPropertiesKeyRef(p);return;}}}var o=b.getListByKey("CalculatedAttributes");if(f.notNull(o)){for(var l=0;l<o.size();l++){var q=o.get(l);a.importComponent(f.OlapComponentType.FIELD,q,null,d,c);}}var r=b.getListByKey("AggregationFieldNames");if(f.notNull(r)){for(var i=0;i<r.size();i++){d.addAggregationFieldName(r.get(i).asString().getString());}}var t=d.getFilterContext();var u=null;var v=b.getStructureByKey("Selection");if(f.notNull(v)){u=a.importComponent(null,v,null,t,c);}t.setComplexRoot(u);var w=b.getListByKey("AggregationDimensions");if(f.notNull(w)){for(var n=0;n<w.size();n++){var x=w.get(n).asStructure();d.addAdditionalAggregationDimension(x.getStringByKey("DimensionName"),x.getStringByKey("HierarchyName"),x.getBooleanByKey("HierarchyActivation"));}}var y=b.getListByKey("ExternalFilterIdsToApply");if(f.notNull(y)){for(var m=0;m<y.size();m++){d.getProperties().addFilterIdsToApply(y.get(m).asString().getString());}}d.getProperties().setIsApplyAdditionalFilterContext(b.getBooleanByKey("ApplyAdditionalFilterContext"));};f.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts=function(e,i,d){f.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties(e,i,d);var a=d.getDependentCustomMembers();if(!a.isEmpty()){var b=i.putNewList("DependentCustomMembers");var c=a.getIterator();while(c.hasNext()){var g=c.next();var h=b.addNewStructure();f.QInARepoMemberAbstract.exportCustomMember(e,g,h);h.putString("AliasName",g.getAliasName());}}var j=d.getDependentCalculatedDimensions();if(!j.isEmpty()){var k=i.putNewList("DependentCalcDims");var l=j.getIterator();while(l.hasNext()){var m=l.next();e.exportDimension(m,k.addNewStructure());}}i.putBoolean("IsApplyParentExtFilters",d.isApplyParentExternalFilters());if(d.getCurrency()!==null){i.putString("Currency",d.getCurrency());}var n=d.getAdditionalFilterContext().getFilterRootElement();if(f.notNull(n)){var o=e.exportComponent(null,n,null,f.QImExFlag.DEFAULT_ALL);i.put("AdditionalFilterSelection",o);}};f.QInARepoFormulaCalculatedDimension.exportFormulaCalcProperties=function(e,i,d){var p=d.getProperties();var a=d.getQueryManager()!==null&&d.getQueryManager().isKeyRefSerializationEnabled();if(a&&d.getOlapEnv()!==null&&d.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectByKeyRef(p)!==null){var b=i.putNewStructure("Properties");f.QInARepoUtils.addKeyRefStructure(e,d.getProperties(),b,d.getQueryManager());return;}var c=d.getFilterContext().getFilterRootElement();if(f.notNull(c)){var g=e.exportComponent(null,c,null,f.QImExFlag.DEFAULT_ALL);i.put("Selection",g);}var h=i.putNewList("CalculatedAttributes");var j=d.getFieldIterator();while(j.hasNext()){var k=j.next();var l=e.exportComponent(f.OlapComponentType.FIELD,k,null,f.QImExFlag.DEFAULT_ALL);if(l.asStructure().getStringByKey("PresentationType")===null){e.exportComponent(f.OlapComponentType.FIELD,k,null,f.QImExFlag.DEFAULT_ALL);}h.add(l);}var m=d.getAggregationFieldNames();if(f.notNull(m)){var n=i.putNewList("AggregationFieldNames");n.addAllStrings(m);}var o=d.getAdditionalAggregationDimensions();if(f.notNull(o)){var q=o.getIterator();var r=i.putNewList("AggregationDimensions");while(q.hasNext()){var s=q.next();var t=r.addNewStructure();t.putString("DimensionName",s.getDimensionName());t.putString("HierarchyName",s.getHierarchyName());t.putBoolean("HierarchyActivation",s.activateHierarchy());}}var u=d.getProperties().getFilterIdsToApply();if(f.notNull(u)){var v=i.putNewList("ExternalFilterIdsToApply");v.addAllStrings(u);}i.putBoolean("ApplyAdditionalFilterContext",d.getProperties().isApplyAdditionalFilterContext());};f.QInARepoFormulaCalculatedDimension.prototype.getComponentType=function(){return f.DimensionType.FORMULA_CALCULATED_DIMENSION;};f.QInARepoFormulaCalculatedDimension.prototype.importComponentWithStructure=function(i,a,m,p,c){return f.QInARepoFormulaCalculatedDimension.importFormulaCalculatedDimension(i,a,m,p,c);};f.QInARepoFormulaCalculatedDimension.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;i.putString("Name",d.getName());if(d.getParent()!==null&&d.getAxis()!==null){var t=d.getAxisType();i.putString("Axis",f.QInAConverter.lookupAxisTypeInA(t));}var b=d.getTopEntries();if(b>0){i.putInteger("Top",b);}var s=d.getSkipEntries();if(s>0){i.putInteger("Skip",s);}e.exportTotals(d,i);f.QInARepoFormulaCalculatedDimension.exportFormulaDimensionParts(e,i,d);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFormulaException=function(){};f.QInARepoFormulaException.prototype=new f.QInARepository();f.QInARepoFormulaException.prototype._ff_c="QInARepoFormulaException";f.QInARepoFormulaException.importEvaluates=function(i,q,n,a){var b=i.getListByKey("EvaluateOn");if(f.isNull(b)){return;}var s=b.size();for(var e=0;e<s;e++){var c=b.getStructureAt(e);var d=c.getStringByKey("Name");var g=q.getFieldByName(d);if(f.isNull(g)){var h=q.getDimensionByNameFromExistingMetadata(d);if(f.notNull(h)){g=h.getKeyField();}}if(f.isNull(g)){a.addError(f.ErrorCodes.INVALID_TOKEN,f.XStringUtils.concatenate3("Could not find field '",d,"'!"));return;}if(!c.containsKey("Low")){a.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate2("No low value for field: ",d));return;}var v=g.getValueType();var l=f.QInARepoUtils.importValueByType(a,c,"Low",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected low valuetype for field: ",v.getName()));return;}var j=n._addNewEvaluateWithFieldInternal(g,l);if(c.containsKey("High")){var k=f.QInARepoUtils.importValueByType(a,c,"High",v);if(a.hasErrors()){a.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate2("Unexpected high valuetype for field: ",v.getName()));return;}j.setHighValue(k);}j.setEvaluate(f.QExceptionEvalType.lookupExceptionEvalType(c.getStringByKey("Evaluate")));var o=c.getStringByKey("Comparison");var m=f.QInAConverter.lookupComparison(o);if(f.isNull(m)){a.addError(f.ErrorCodes.INVALID_OPERATOR,f.XStringUtils.concatenate3("Unexpected comparison operator for evaluate: Operator: '",o,"'"));return;}j.setOperator(m);}};f.QInARepoFormulaException.importThresholds=function(i,n){var a=i.getListByKey("Threshold");if(f.notNull(a)){var s=a.size();for(var t=0;t<s;t++){var b=a.getStructureAt(t);var c=b.getIntegerByKeyExt("AlertLevel",-9999);var d;var e=!b.hasStringByKey("Low");if(e){d=n._addNewThresholdInternal(b.getDoubleByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}else{d=n._addNewThresholdWithStringInternal(b.getStringByKey("Low"),f.QInAConverter.lookupAlertLevel(c));}var g=b.getStringByKey("Name");if(f.notNull(g)){d.setName(g);}var h=b.getStringByKey("Text");if(f.notNull(h)){d.setText(h);}var j=b.getStringByKey("Color");if(f.notNull(j)){d.setColor(j);}var o=f.QInAConverter.lookupComparison(b.getStringByKey("Comparison"));d.setOperator(o);if(o.getNumberOfParameters()===2){if(e){var k=b.getDoubleByKey("High");d.setHighValue(k);}else{var l=b.getStringByKey("High");d.setHigh(l);}}f.QInARepoFormulaException.importSettings(b.getListByKey("Settings"),d);}}};f.QInARepoFormulaException.importSettings=function(i,n){if(f.isNull(i)){return;}var s=i.size();for(var S=0;S<s;S++){var a=i.getStructureAt(S);var b=a.getStringByKey("Name");var p=a.getIntegerByKey("Priority");var v=a.getStringByKey("Value");if(f.notNull(v)&&!f.XString.isEqual(v,"")){var c=n.addNewSetting(b,p);c.setValue(v);}}};f.QInARepoFormulaException.exportEvaluates=function(e,a,i,b){if(e.isEmpty()){return;}var c=i.putNewList("EvaluateOn");var s=e.size();for(var E=0;E<s;E++){var d=c.addNewStructure();var g=e.get(E);d.putString("Name",g.getField().getName());d.putString("Evaluate",g.getEvaluate().toString());var h=g.getOperator();var j;if(h===f.ComparisonOperator.NOT_BETWEEN&&b){j="NOTBETWEEN";}else{j=f.QInAConverter.lookupComparisonInA(h);}d.putString("Comparison",j);f.QInARepoUtils.exportValue(a,"Low",d,g.getLowValue(),g.getValueType());if(h.getNumberOfParameters()>1){f.QInARepoUtils.exportValue(a,"High",d,g.getHighValue(),g.getValueType());}}};f.QInARepoFormulaException.exportThresholds=function(t,e,i,a){var b=i.putNewList("Threshold");var s=t.size();for(var T=0;T<s;T++){var c=t.get(T);var d=b.addNewStructure();var n=c.getName();if(!f.XString.isEqual(n,"Settings")){d.putStringNotNull("Name",n);}var g=c.getOperator();var h;if(g===f.ComparisonOperator.NOT_BETWEEN&&a){h="NOTBETWEEN";}else{h=f.QInAConverter.lookupComparisonInA(g);}d.putString("Comparison",h);var j=c.getValueType()===f.XValueType.DOUBLE;if(c.getLowXValue()!==null){if(j){d.putDouble("Low",c.getLowValue());}else{d.putString("Low",c.getLow());}}if(c.getHighXValue()!==null&&g.getNumberOfParameters()>1){if(j){d.putDouble("High",c.getHighValue());}else{d.putString("High",c.getHigh());}}if(!c.isEmpty()){f.QInARepoFormulaException.exportSettings(c,e,d);}else{d.putInteger("AlertLevel",c.getAlertLevel().getLevel());}}};f.QInARepoFormulaException.exportSettings=function(t,e,i){var a=i.putNewList("Settings");var s=t.size();for(var S=0;S<s;S++){var b=t.get(S);var c=a.addNewStructure();c.putString("Name",b.getName());c.putInteger("Priority",b.getPriority());var v=b.getValue();if(f.isNull(v)||f.XString.isEqual(v,"")){e.addError(f.ErrorCodes.INVALID_PARAMETER,"Exception Threshold Setting is missing it's value");}else{c.putString("Value",v);}}};f.QInARepoFormulaException.prototype.getComponentType=function(){return f.OlapComponentType.FORMULA_EXCEPTION;};f.QInARepoFormulaException.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var b=m;if(f.isNull(b)){var n=a.getStringByKey("Name");var t=a.getStringByKey("Text");b=f.QFactory.createFormulaException(c,n,t);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("NullAsZero")){b.setHandleNullAsZero(a.getBooleanByKey("NullAsZero"));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("AutoSignFlip")){b.setAutoSignFlip(a.getBooleanByKey("AutoSignFlip"));}b.setFormulaExceptionType(f.FormulaExceptionType.lookup(a.getStringByKey("Type")));var s=a.getListByKey("StructureContext");var d=s.getStructureAt(0);var e=this.getDimensionName(q,d);var g=d.getStringByKey("MemberName");if(f.notNull(e)&&f.notNull(g)){var h=q.getDimensionByNameFromExistingMetadata(e);var j=h.getStructureMemberByAliasOrMember(g);b.setMeasure(j);}var k=s.getStructureAt(1);var l=this.getDimensionName(q,k);var o=k.getStringByKey("MemberName");if(f.notNull(l)&&f.notNull(o)){var r=q.getDimensionByNameFromExistingMetadata(l);var u=r.getStructureMemberByAliasOrMember(o);if(f.isNull(u)){return null;}b.setBaseMeasure(u);}else if(f.notNull(o)){b.setBaseMeasureName(o);}f.QInARepoFormulaException.importEvaluates(a,q,b,i);var v=s.getStructureAt(2);var w=this.getDimensionName(q,v);var x=v.getStringByKey("MemberName");if(f.notNull(w)&&f.notNull(x)){var y=q.getDimensionByNameFromExistingMetadata(w);var z=y.getStructureMemberByAliasOrMember(x);if(f.isNull(z)){return null;}b.setReferenceMeasure(z);}else if(f.notNull(x)){b.setReferenceMeasureName(x);}f.QInARepoFormulaException.importThresholds(a,b);return b;};f.QInARepoFormulaException.prototype.getDimensionName=function(q,m){var a=m.getStringByKey("DimensionName");if(f.isNull(a)&&m.getBooleanByKeyExt("MeasureStructure",false)){a=q.getMeasureDimension().getName();}return a;};f.QInARepoFormulaException.prototype.importComponent=function(i,a,m,p,c){var b=a;var t=this.getTagName();if(f.notNull(t)&&f.notNull(b)){b=b.getStructureByKey(t);}if(f.notNull(c)&&c.getQueryModel()!==null&&f.notNull(b)){var d=b.getStructureByKey("KeyRef");if(f.notNull(d)){var k=f.QFactory.createKeyRef(d.getStringByKey("StorageName"),d.getStringByKey("GroupName"),d.getStringByKey("ObjectName"));var e=c.getQueryModel().getFormulaExceptionManager().getModelFormulaExceptionByKeyRef(k);if(f.notNull(e)){return e;}}}return f.QInARepository.prototype.importComponent.call(this,i,a,m,p,c);};f.QInARepoFormulaException.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("Type",b.getFormulaExceptionType().getName());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QExceptionProperties.QY_NULL_AS_ZERO)){i.putBoolean("NullAsZero",b.isHandleNullAsZero());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QExceptionProperties.QY_AUTO_SIGN_FLIP)){if(b.isAutoSignFlip()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&b.hasPropertyChanged(f.QExceptionProperties.QY_AUTO_SIGN_FLIP)){i.putBoolean("AutoSignFlip",b.isAutoSignFlip());}}var s=i.putNewList("StructureContext");var c=s.addNewStructure();var d=b.getMeasure();if(f.notNull(d)){var g=d.getDimension();c.putString("DimensionName",g.getName());c.putStringNotNull("MemberName",d.getAliasOrMemberName());}var h=s.addNewStructure();var j=b.getBaseMeasure();if(f.notNull(j)){var k=j.getDimension();h.putString("DimensionName",k.getName());h.putStringNotNull("MemberName",j.getAliasOrMemberName());}else{h.putStringNotNull("MemberName",b.getBaseMeasureName());}var r=s.addNewStructure();var l=b.getReferenceMeasure();if(f.notNull(l)){var n=l.getDimension();r.putString("DimensionName",n.getName());r.putStringNotNull("MemberName",l.getAliasOrMemberName());}else{r.putStringNotNull("MemberName",b.getReferenceMeasureName());}var q=b.getQueryModel();var o=e.isAbap(q);f.QInARepoFormulaException.exportThresholds(b.getThresholds(),e,i,o);f.QInARepoFormulaException.exportEvaluates(b.getEvaluates(),e,i,o);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFormulaException.prototype.exportKeyReference=function(e,m,i){var a=m;if(a.getQueryManager()!==null){if(!a.getQueryManager().isKeyRefSerializationEnabled()){return false;}}var q=a.getQueryModel();if(f.notNull(q)){var b=q.getFormulaExceptionManager();if(b.getModelFormulaException(a.getName())===a){f.QInARepoUtils.addKeyRefStructure(e,a,i,a.getQueryManager());return true;}}return f.QInARepository.prototype.exportKeyReference.call(this,e,m,i);};f.QInARepoFormulaExceptionManager=function(){};f.QInARepoFormulaExceptionManager.prototype=new f.QInARepository();f.QInARepoFormulaExceptionManager.prototype._ff_c="QInARepoFormulaExceptionManager";f.QInARepoFormulaExceptionManager.prototype.getComponentType=function(){return f.OlapComponentType.FORMULA_EXCEPTION_MANAGER;};f.QInARepoFormulaExceptionManager.prototype.getTagName=function(){return"FormulaExceptionManager";};f.QInARepoFormulaExceptionManager.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=m;if(f.notNull(d)){d.clear();if(f.notNull(b)){if(a.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.containsKey("FormulaResultVisible")){d.setFormulaResultVisible(b.getBooleanByKeyExt("FormulaResultVisible",false));}var e;var g=b.getListByKey("FormulaExceptionsModeler");if(f.notNull(g)){for(var i=0;i<g.size();i++){var l=g.getStructureAt(i);var n=l.getStringByKey("Name");var t=l.getStringByKey("Text");e=d.addNewModelFormulaException(n,t);var h=a.importFormulaException(l,e,d,c);if(f.isNull(h)){d.removeModelFormulaException(n,true);}}}g=b.getListByKey("FormulaExceptions");if(f.notNull(g)){for(var j=0;j<g.size();j++){e=a.importFormulaException(g.getStructureAt(j),null,d,c);d.add(e);}}}}return d;};f.QInARepoFormulaExceptionManager.prototype.exportComponentWithStructure=function(e,m,a,b){var c=m;if(f.notNull(c)){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QExceptionProperties.QY_FORMULA_RESULT_VISIBLE)){a.putBoolean("FormulaResultVisible",c.isFormulaResultVisible());}var d=f.PrFactory.createList();for(var i=0;i<c.size();i++){if(c.get(i)!==null){var g=f.PrFactory.createStructure();e.exportFormulaException(c.get(i),g);d.add(g);}}a.put("FormulaExceptions",d);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoHierarchy=function(){};f.QInARepoHierarchy.prototype=new f.QInARepository();f.QInARepoHierarchy.prototype._ff_c="QInARepoHierarchy";f.QInARepoHierarchy.importHierarchyForFilter=function(i,h,a,b,c){var d=a.getStringByKey("HierarchyName");var e=null;var g=null;if(h&&i){g=a.getStringByKey("HierarchyVersion");var j=a.getStringByKey("HierarchyDueDate");if(f.notNull(j)){if(c===f.FilterComponentType.CARTESIAN_LIST){e=f.XDate.createDateSafe(j);}else if(c===f.FilterComponentType.OPERATION){e=f.XDate.createDateFromSAPFormat(j);}}}if(c===f.FilterComponentType.CARTESIAN_LIST){b.setHierarchyInfo(d,e,g);}else if(c===f.FilterComponentType.OPERATION){b.setHierarchyInfo(d,e,g);}};f.QInARepoHierarchy.appendItemsToCatalogResult=function(c,h,d){var l=f.PrUtils.getListSize(h,0);for(var i=0;i<l;i++){var a=f.PrUtils.getStructureElement(h,i);var b=f.HierarchyCatalogItem.createCatalogItem();b.setDimensionName(d);var e;if(a.hasStringByKey("Name")){e=a.getStringByKey("Name");}else{e=a.getStringByKey("HierarchyName");}if(f.XStringUtils.isNullOrEmpty(e)||c.containsHierarchy(e)){continue;}b.setHierarchyName(e);var g=f.PrUtils.getStringProperty(a,"Description");if(f.notNull(g)){b.setHierarchyLongText(g.getString());}var v=f.PrUtils.getStringProperty(a,"Version");if(f.notNull(v)){b.setVersionName(v.getString());}var s=f.PrUtils.getStringProperty(a,"Structure");if(f.notNull(s)){b.setHierarchyType(f.HierarchyType.lookup(s.getString()));}var j=f.PrUtils.getBooleanValueProperty(a,"IsModeled",false);b.setIsModeled(j);var k=f.PrUtils.getStringProperty(a,"DateTo");if(f.notNull(k)){var m=k.getString();if(f.XStringUtils.isNotNullAndNotEmpty(m)){b.setDateTo(f.XDate.createDateFromIsoFormat(m));}}var n=f.PrUtils.getListProperty(a,"Levels");if(f.notNull(n)){b.setSupportsHierarchyLevels(true);var o=f.XList.create();var p=f.PrUtils.getListSize(n,0);for(var q=0;q<p;q++){var r=f.PrUtils.getStructureElement(n,q);if(f.isNull(r)){continue;}var t=f.HierarchyCatalogLevel.createCatalogLevel();var u=f.PrUtils.getIntegerValueProperty(r,"Level",-1);if(u>-1){t.setLevel(u);}var w=f.PrUtils.getStringProperty(r,"LevelName");if(f.notNull(w)){t.setLevelName(w.getString());}var x=f.PrUtils.getStringProperty(r,"LevelCaption");if(f.notNull(x)){t.setLevelDescription(x.getString());}var y=f.PrUtils.getStringProperty(r,"LevelUniqueName");if(f.notNull(y)){t.setLevelUniqueName(y.getString());}var z=f.PrUtils.getStringProperty(r,"DimensionName");if(f.notNull(z)){t.setLevelDimensionName(z.getString());}var A=f.PrUtils.getIntegerProperty(r,"LevelType");if(f.notNull(A)){t.setLevelType(f.QInAConverter.lookupHierarchyLevelType(A.getInteger()));}o.add(t);}b.setHierarchyLevels(o);}var B=a.getStringByKey("RestNode");if(f.notNull(B)){b.setRestNode(B);}var C=a.getStringByKey("VirtualRootNode");if(f.notNull(C)){b.setVirtualRootNode(C);}c.addItem(b);}return c;};f.QInARepoHierarchy.importLeveledHierarchy=function(i,c,d,a){var h=f.QLeveledHierarchy.create(c,d,a.getStringByKey(a.containsKey("Name")?"Name":"HierarchyName"));h.setHierarchyUniqueName(a.getStringByKey("UniqueName"));if(a.getStringByKey("DimensionName")===null){h.setDimensionName(d.getName());}else{h.setDimensionName(a.getStringByKey("DimensionName"));}h.setHierarchyType(f.HierarchyType.lookup(a.getStringByKey("Structure")));h.setIsModeled(a.getBooleanByKeyExt("IsModeled",false));var b=a.getStringByKey("DueDate");if(f.XStringUtils.isNotNullAndNotEmpty(b)){h.setDateTo(f.QInARepoUtils.createDate(b));}h.setHierarchyDescription(a.getStringByKey("Description"));var e=a.getListByKey("Levels");if(!f.PrUtils.isListEmpty(e)){f.QInARepoHierarchy.importLevels(h,e);}return h;};f.QInARepoHierarchy.importLevels=function(h,i){var s=i.size();for(var l=0;l<s;l++){var a=i.getStructureAt(l);var b=f.QHierarchyLevel.create(h,a.getStringByKey("LevelUniqueName"),a.getIntegerByKey("Level"));b.setLevelName(a.getStringByKey("LevelName"));b.setLevelText(a.getStringByKey("LevelCaption"));b.setLevelDimensionName(a.getStringByKey("DimensionName"));b.setLevelType(f.QInAConverter.lookupHierarchyLevelType(a.getIntegerByKey("LevelType")));b.setNavigationAttribute(a.getStringByKey("NavAttr"));h.getAllLevelBase().add(b);}};f.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit=function(d){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&d.useHierarchyNameVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyNameVariableName());}return i;};f.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit=function(d){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&d.useHierarchyDueDateVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyDueDateVariableName());}return i;};f.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit=function(d){var i=false;if(f.notNull(d)){var q=d.getQueryManager();i=f.notNull(q)&&q.isAutoVariableSubmitActive()&&d.useHierarchyVersionVariable()&&f.XStringUtils.isNotNullAndNotEmpty(d.getHierarchyVersionVariableName());}return i;};f.QInARepoHierarchy.exportLevels=function(i,h){if(h.supportsHierarchyLevels()){var a=i.putNewList("Levels");var b=h.getHierarchyLevels();var s=b.size();for(var l=0;l<s;l++){var c=b.get(l);var d=a.addNewStructure();d.putString("LevelUniqueName",c.getLevelUniqueName());d.putInteger("Level",c.getLevel());d.putString("LevelName",c.getLevelName());d.putString("LevelCaption",c.getLevelDescription());d.putStringNotNull("DimensionName",c.getLevelDimensionName());d.putInteger("LevelType",f.QInAConverter.lookupHierarchyLevelTypeIna(c.getLevelType()));}}};f.QInARepoHierarchy.exportHierarchyForFilter=function(e,i,a,d,b,q,h,c,v){if(f.notNull(h)){a.putString("HierarchyName",h);if(e.getSession().hasFeature(f.FeatureToggleOlap.HIERARCHY_INFO_IN_FILTER)&&i){if(f.isNull(b)||!f.XString.isEqual(b.getName(),f.QFilter.FIXED_FILTER_CONTAINER)||f.notNull(q)&&q.isAutoVariableSubmitActive()){f.QInARepoUtils.setDateIfNotNull(e,a,"HierarchyDueDate",c);a.putStringNotNull("HierarchyVersion",v);}}}};f.QInARepoHierarchy.prototype.getComponentType=function(){return f.OlapComponentType.HIERARCHY;};f.QInARepoHierarchy.prototype.getTagName=function(){return"HierarchyRepo";};f.QInARepoHierarchy.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=m;if(d.supportsHierarchy()){var b=d.isDisplayHierarchyFixInFilter();d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(false);if(f.isNull(a)){d.setHierarchy(null);}else{var n=a.getStringByKey("NameIs");var e=f.notNull(n)&&f.XString.isEqual("Variable",n);var h=this.importHierarchyName(a,d,e);var g=null;if(f.XStringUtils.isNotNullAndNotEmpty(h)){if(d.getModelCapabilities().supportsDimensionHierarchyLevels()){this.importHierarchyAsCatalogItem(a,d);this.importLeveledHierarchyToMetadata(i,a,c,d);}if(a.getBooleanByKey("IsTransient")){g=f.QHierarchy.createCustomHierarchy(d.getContext(),d,h,a.getStringByKey("Description"));}else{g=f.QHierarchy.create(d.getContext(),d,h);}this.importHierarchyDueDate(a,d,g);this.importHierarchyVersion(a,d,g);var j=a.getStringByKey("DateTo");g.setDateTo(f.QInARepoUtils.createDate(j));var k=a.getStringByKey("0DATEFROM");g.setDateFrom(f.QInARepoUtils.createDate(k));var l=a.getStructureByKey("Metadata");if(f.notNull(l)){j=l.getStringByKey("DateTo");if(f.XStringUtils.isNotNullAndNotEmpty(j)){g.setDateTo(f.QInARepoUtils.createDate(j));}k=l.getStringByKey("0DATEFROM");if(f.XStringUtils.isNotNullAndNotEmpty(k)){g.setDateFrom(f.QInARepoUtils.createDate(k));}}d.setHierarchy(g);var o=e?false:a.getBooleanByKeyExt("HierarchyActive",true);d.setHierarchyActive(o);d.setSelectorHierarchyActive(o);var q=d.getQueryManager();var r=f.notNull(q)&&q.isAutoVariableSubmitActive();if(r&&a.containsKey("UseDefaultDrillLevelOnChange")){d.setUseDefaultDrillLevelOnChange(a.getBooleanByKey("UseDefaultDrillLevelOnChange"));}}var s=a.getListByKey("StickyDimensionMembers");d.clearStickyMembers();if(f.XCollectionUtils.hasElements(s)){for(var t=0;t<s.size();t++){d.addStickyMember(s.getStringAt(t));}}var u=a.getIntegerByKeyExt("InitialDrillOffset",0);var v=a.getIntegerByKeyExt("InitialDrillLevel",0);var w=a.getIntegerByKeyExt("SelectorInitialDrillLevel",v);d.setInitialDrillLevel(v);d.setSelectorInitialDrillLevel(w);d.setInitialDrillOffset(u);d.setExplicitDrillOnFilteredNodes(a.getBooleanByKeyExt("ExplicitDrillOnFilteredNodes",false));var x=f.Alignment.DEFAULT_VALUE;if(c.getModelCapabilities().supportsExpandBottomUp()){var y=a.getStringByKeyExt("LowerLevelNodeAlignment","Default");x=f.QInAConverter.lookupLowerLevelNodeAlignment(y);if(a.containsKey("ExpandBottomUp")){var z=a.getBooleanByKeyExt("ExpandBottomUp",false);if(z){x=f.Alignment.CHILDREN_ABOVE_PARENT;}}}d.setLowerLevelNodeAlignment(x);if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("NodeCondensation")){var A=a.getBooleanByKeyExt("NodeCondensation",false);d.setHasNodeCondensation(A);}var B=a.getStringByKeyExt("MemberOfPostedNodeVisibility","Visible");var C=f.QInAConverter.lookupResultSetVisibility(B);d.setMemberOfPostedNodeVisibility(C);d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(b);return g;}d.getHierarchyManagerBase().setDisplayHierarchyFixInFilter(b);}return null;};f.QInARepoHierarchy.prototype.importHierarchyName=function(i,d,a){var h;if(i.hasStringByKey("Name")){h=i.getStringByKey("Name");}else{h=i.getStringByKey("HierarchyName");}var q=d.getQueryManager();if(f.notNull(q)&&q.isAutoVariableSubmitActive()){d.setUseHierarchyNameVariable(a&&q.getVariableProcessorState()===f.VariableProcessorState.CHANGEABLE_STARTUP);if(a){d.setHierarchyNameVariableName(f.XStringUtils.isNullOrEmpty(h)?null:h);}}return h;};f.QInARepoHierarchy.prototype.importHierarchyDueDate=function(i,d,h){var a=i.getStringByKey("DueDateIs");var b=f.notNull(a)&&f.XString.isEqual("Variable",a);var c=i.getStringByKey("DueDate");d.setUseHierarchyDueDateVariable(b);if(b){d.setHierarchyDueDateVariableName(f.XStringUtils.isNullOrEmpty(c)?null:c);}else{h.setHierarchyDueDate(f.QInARepoUtils.createDate(c));}};f.QInARepoHierarchy.prototype.importHierarchyVersion=function(i,d,h){var v=i.getStringByKey("VersionIs");var a=f.notNull(v)&&f.XString.isEqual("Variable",v);var b=i.getStringByKey("Version");d.setUseHierarchyVersionVariable(a);if(a){d.setHierarchyVersionVariableName(f.XStringUtils.isNullOrEmpty(b)?null:b);}else{h.setHierarchyVersion(b);}};f.QInARepoHierarchy.prototype.importHierarchyAsCatalogItem=function(i,d){var h=f.PrFactory.createList();h.add(i);var a=d.getHierarchies();if(f.isNull(a)){a=f.QFactory.createHierarchyCatalogResult();f.QInARepoHierarchy.appendItemsToCatalogResult(a,h,d.getName());d.getHierarchyManagerBase().setHierarchies(a);}else{f.QInARepoHierarchy.appendItemsToCatalogResult(a,h,d.getName());}};f.QInARepoHierarchy.prototype.importLeveledHierarchyToMetadata=function(i,a,c,d){var q=d.getQueryModelBase().getQueryManagerBase();if(f.notNull(q)&&!f.PrUtils.isListEmpty(a.getListByKey("Levels"))){var m=q.getMetadataModelBase();var b=m.getLeveledHierarchiesBase();var l=f.QInARepoHierarchy.importLeveledHierarchy(i,c,d,a);if(!b.contains(l)){b.add(l);}}};f.QInARepoHierarchy.prototype.exportComponentWithStructure=function(e,m,i,a){var d=m;if(d.supportsHierarchy()){var b=d.isHierarchyActive();var c=e.isAbap(d.getQueryModel());var h=d.getHierarchyName();var q=d.getQueryManager();var g=f.notNull(q)&&q.isAutoVariableSubmitActive();var j=f.QInARepoHierarchy.isNamePlaceHolderForAutoSubmit(d);var k=f.QInARepoHierarchy.isDueDatePlaceHolderForAutoSubmit(d);var l=f.QInARepoHierarchy.isVersionPlaceHolderForAutoSubmit(d);if(j){h=d.getHierarchyNameVariableName();}if(f.XStringUtils.isNotNullAndNotEmpty(h)){f.QInAExportUtil.setNonEmptyString(i,"HierarchyName",h);i.putBoolean("HierarchyActive",b);f.QInAExportUtil.setNonEmptyString(i,"Name",h);if(j){i.putString("NameIs","Variable");}if(d.useHierarchyDueDateVariable()||k){i.putString("DueDateIs","Variable");f.QInAExportUtil.setNonEmptyString(i,"DueDate",d.getHierarchyDueDateVariableName());}else{f.QInARepoUtils.setDate(e,i,"DueDate",d.getHierarchyDueDate());}if(l){i.putString("VersionIs","Variable");f.QInAExportUtil.setNonEmptyString(i,"Version",d.getHierarchyVersionVariableName());}else{f.QInAExportUtil.setNonEmptyString(i,"Version",d.getHierarchyVersion());}if(g&&d.useDefaultDrillLevelOnChange()){i.putBoolean("UseDefaultDrillLevelOnChange",true);}var n=0;n=d.getInitialDrillLevel();i.putInteger("SelectorInitialDrillLevel",d.getSelectorRootLevel());i.putInteger("InitialDrillLevel",n);if(d.getInitialDrillOffset()!==0||i.containsKey("InitialDrillOffset")){i.putInteger("InitialDrillOffset",d.getInitialDrillOffset());}if(d.isExplicitDrillOnFilteredNodes()||i.containsKey("ExplicitDrillOnFilteredNodes")){i.putBoolean("ExplicitDrillOnFilteredNodes",d.isExplicitDrillOnFilteredNodes());}if(d.hasStickyMembers()){i.putNewList("StickyDimensionMembers").addAllStrings(d.getStickyMembers());}var o=d.getLowerLevelNodeAlignment();if(d.getModelCapabilities().supportsExpandBottomUp()){i.putBoolean("ExpandBottomUp",o===f.Alignment.CHILDREN_ABOVE_PARENT);}if(c){var p;var r=d.getModelCapabilities();if(f.notNull(r)&&r.supportsExpandBottomUp()){p=f.QInAConverter.lookupLowerLevelNodeAlignmentInA(o);}else{p=f.QInAConverter.lookupLowerLevelNodeAlignmentInA2(o);}i.putString("LowerLevelNodeAlignment",p);if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||d.getHierarchyManager().hasPropertyChanged(f.QHierarchyProperties.QY_NODE_CONDENSATION)){var s=d.hasNodeCondensation();i.putBoolean("NodeCondensation",s);}var v=d.getMemberOfPostedNodeVisibility();var t=f.QInAConverter.lookupResultSetVisibilityInA(v);i.putString("MemberOfPostedNodeVisibility",t);}if(d.isHierarchyNavigationDeltaMode()){i.putBoolean("HierarchyNavigationDeltaMode",true);}this.exportHierarchyLevels(i,d,h);var u=d.getHierarchy();if(f.notNull(u)&&u.isCustomHierarchy()){i.putBoolean("IsTransient",true);i.putStringNotNull("Description",u.getHierarchyDescription());}return i;}}return null;};f.QInARepoHierarchy.prototype.exportHierarchyLevels=function(i,d,h){if(d.getModelCapabilities().supportsDimensionHierarchyLevels()){var a=d.getHierarchies();if(f.notNull(a)){var b=a.getObjectsIterator();while(b.hasNext()){var c=b.next();if(f.XString.isEqual(c.getHierarchyName(),h)){f.QInARepoHierarchy.exportLevels(i,c);return;}}}}};f.QInARepoMemberAbstract=function(){};f.QInARepoMemberAbstract.prototype=new f.QInARepository();f.QInARepoMemberAbstract.prototype._ff_c="QInARepoMemberAbstract";f.QInARepoMemberAbstract.importInternalDataType=function(m,a){if(m.containsKey("DataTypeScale")){a.setDataTypeScale(m.getIntegerByKey("DataTypeScale"));}if(m.containsKey("DataTypePrecision")){a.setDataTypePrecision(m.getIntegerByKey("DataTypePrecision"));}if(m.containsKey("DataTypeInternal")){a.setDataTypeInternal(f.QInAConverter.lookupValueType(m.getStringByKey("DataTypeInternal")));}if(a.getDataTypeInternal()===null&&m.containsKey("[Measures].[SQLType]")){var d=m.getStringByKey("[Measures].[SQLType]");if(f.XStringUtils.isNotNullAndNotEmpty(d)){if(f.XString.startsWith(d,f.XStringUtils.concatenate2("DECIMAL","("))){a.setDataTypeInternal(f.XValueType.DECIMAL_FLOAT);var p=f.XString.size("DECIMAL")+1;var b=f.XString.indexOf(d,",");var s=f.XString.size(d)-1;if(b>p&&b<s){var c=f.XString.substring(d,p,b);var e=f.XString.substring(d,b+1,s);a.setDataTypePrecision(f.XInteger.convertFromString(c));a.setDataTypeScale(f.XInteger.convertFromString(e));}}else if(f.XString.isEqual(d,"INTEGER")){a.setDataTypeInternal(f.XValueType.INTEGER);}}}};f.QInARepoMemberAbstract.importExceptionAggregationProperties=function(i,a,q,m){if(q.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){m.clearExceptionAggregationDimensions();var o=m.getExceptionAggregationType();m.setExceptionAggregationType(null);var b=a.getListByKey("ExceptionAggregationDimensions");if(f.notNull(b)){var e=b.size();for(var c=0;c<e;c++){m.addExceptionAggregationDimensionName(b.getStringAt(c));}}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasStringByKey("ExceptionAggregation")){var d=a.getStringByKey("ExceptionAggregation");m.setExceptionAggregationType(f.AggregationType.lookupOrCreate(d));}else{m.setExceptionAggregationType(o);}}else if(m.getMemberType()===f.MemberType.BASIC_MEASURE||m.getMemberType()===f.MemberType.RESTRICTED_MEASURE){var g=a.getStringByKey("AggregationDimension");if(f.XStringUtils.isNotNullAndNotEmpty(g)){m.setAggregationDimensionName(g);}}};f.QInARepoMemberAbstract.importMeasure=function(i,a,c,q,d){var n;n=f.QInARepoMemberAbstract.determineMemberType(i,a,d);if(a.containsKey("MemberType")&&f.isNull(n)){return null;}var m;if(i.getSession().hasFeature(f.FeatureToggleOlap.MULTIPLE_ACCOUNT_HIERARCHIES)&&f.notNull(d)&&d.getDimensionType()===f.DimensionType.ACCOUNT){var o=a.getStringByKey("Name");var p=f.XStringUtils.concatenate2("].&[",f.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);if(f.notNull(o)&&f.XString.startsWith(o,"[")&&f.XString.indexOf(o,p)!==-1){var b=f.XString.indexOf(o,f.QModelConstants.CALCULATION_PLACEHOLDER_ID_PREFIX);var e=f.XString.indexOfFrom(o,"]",b);var s=f.XString.substring(o,b,e);if(d.getPlaceholderIds().contains(s)){a.putString("Name",s);}}}if(n===f.MemberType.RESTRICTED_MEASURE){m=i.importRestrictedMeasure(a,d,c);}else if(n===f.MemberType.FORMULA){m=i.importFormulaMeasure(a,d,q);}else if(n===f.MemberType.MEASURE){m=i.importBasicMeasure(a,d,c);}else if(n===f.MemberType.VARIANCE){m=i.importVarianceMeasure(a,d,c);}else if(n===f.MemberType.EXCEPTION_AGGREGATION){m=i.importExceptionAggregationMeasure(a,d,c);}else if(n===f.MemberType.CURRENCY_MEASURE){m=i.importCurrencyMeasure(a,d,c);}else{m=null;}return m;};f.QInARepoMemberAbstract.determineMemberType=function(i,a,d){var n;var b=a.getStringByKey(d.getKeyField().getName());if(a.containsKey("MemberType")){var c=a.getStringByKeyExt("MemberType","Measure");n=f.QInAConverter.lookupMeasureStructureMemberType(c);if(f.isNull(n)){i.addError(f.ErrorCodes.INVALID_STATE,f.XStringUtils.concatenate3("MeasureStructure->MemberType unsupported: '",c,"'"));return null;}}else if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()&&f.notNull(b)){if(d.getDimensionType()===f.DimensionType.ACCOUNT){n=f.MemberType.MEASURE;}else{n=d.getStructureMember(b).getMemberType();if(n===f.MemberType.BASIC_MEASURE){n=f.MemberType.MEASURE;}}}else{if(a.containsKey("Formula")){n=f.MemberType.FORMULA;}else{var e=a.getStructureByKey("Selection");if(f.isNull(e)){n=f.MemberType.MEASURE;}else{n=e.containsKey("Operator")?f.MemberType.RESTRICTED_MEASURE:f.MemberType.MEASURE;}}}return n;};f.QInARepoMemberAbstract.importGenericRuntimeMemberProperties=function(i,m,a){if(m.getQueryModel().isBasicMeasureAggregationExportedInRepo()||!m.isCreatedFromMetadata()){var b=a.getBooleanByKeyExt("ModelDefinedMember",false);var p=b&&m.getQueryManager().getInitSettings().getProviderType()===f.ProviderType.LIST_REPORTING;if(!p){f.QInARepoMemberAbstract.importAggregationType(i,m,a);}}f.QInARepoMemberAbstract.importGenericMemberProperties(i,m,a);if(a.containsKey("DataType")){m.setDataType(f.QInAConverter.lookupValueType(a.getStringByKey("DataType")));}if(a.getByKey("isModelDefinedMember")!==null){m.setModelDefinedMember(a.getBooleanByKey("isModelDefinedMember"));}f.QInARepoMemberAbstract.importIgnoredExternalDimensions(i,m,a);if((m.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!m.isCreatedFromMetadata()||i.mode===f.QModelFormat.INA_REPOSITORY_DELTA)&&a.containsKey("SolveOrder")){m.setSolveOrder(a.getIntegerByKeyExt("SolveOrder",0));}f.QInARepoMemberAbstract.importAccountMemberProperties(a,m);};f.QInARepoMemberAbstract.importAccountMemberProperties=function(i,m){if(i.getStringByKey("AliasName")!==null){m.setAliasName(i.getStringByKey("AliasName"));}if(i.containsKey("AutoSignFlip")){m.setAutoSignFlip(i.getBooleanByKey("AutoSignFlip"));}if(i.getStringByKey("AccountType")!==null){m.setAccountType(f.AccountType.lookup(i.getStringByKey("AccountType")));}};f.QInARepoMemberAbstract.importGenericMemberProperties=function(i,m,a){if(m.getQueryModel().isBasicMeasureSettingsExportedInRepo()||!m.isCreatedFromMetadata()||i.mode===f.QModelFormat.INA_REPOSITORY_DELTA){if(a.containsKey("NumericShift")){m.setNumericShift(a.getIntegerByKey("NumericShift"));}if(a.containsKey("NumericScale")){m.setNumericScale(a.getIntegerByKey("NumericScale"));}if(a.containsKey("NumericPrecision")){m.setNumericPrecision(a.getIntegerByKey("NumericPrecision"));}}if(m.getModelCapabilities().supportsMemberVisibility()&&(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasStringByKey("Visibility"))){var b=a.getStringByKeyExt("Visibility","Visible");m.setResultVisibility(f.QInAConverter.lookupResultSetVisibility(b));}if(a.hasStringByKey("PostAggregation")||i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA){var c=a.getStringByKey("PostAggregation");var p=f.QInAConverter.lookupAggregationType(c);m.setPostAggregationType(p);}if(a.containsKey("PostAggregationIgnoreHierarchy")){m.setPostAggregationIgnoreHierarchy(a.getBooleanByKey("PostAggregationIgnoreHierarchy"));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("PostAggregationDimensions")){m.clearPostAggregationDimensions();var d=a.getListByKey("PostAggregationDimensions");if(f.notNull(d)){var e=d.size();for(var g=0;g<e;g++){m.addPostAggregationDimensionName(d.getStringAt(g));}}}f.QInARepoMemberAbstract.importWindowFunction(m,a);if(a.containsKey("CurrencyTranslationName")){m.setCurrencyTranslationName(a.getStringByKey("CurrencyTranslationName"));}};f.QInARepoMemberAbstract.importWindowFunction=function(m,i){var a=i.getStructureByKey("WindowFunction");if(f.notNull(a)){var w=f.QWindowFunction._createWindowFunction(f.QInAConverter.lookupWindowFunctionType(a.getStringByKey("Name")));var b=a.getListByKey("DimensionsNotInPartition");if(f.notNull(b)){for(var c=0;c<b.size();c++){w.addNotInPartitionDimension(b.getStringAt(c));}}var d=a.getListByKey("SortDimensions");if(f.notNull(d)){for(var e=0;e<d.size();e++){var g=d.getStructureAt(e);var n=g.getStringByKey("Name");var h=f.QInAConverter.lookupSortDirection2(g.getStringByKey("Direction"));var j=f.QInAConverter.lookupNullsType(g.getStringByKey("Nulls"));w.addSortDimension(n,h,j);}}var k=a.getStructureByKey("Frame");if(f.notNull(k)){w.setFrame(f.QInAConverter.lookupFrameStartType(k.getStringByKey("Start")),k.getIntegerByKey("StartPreceding"),f.QInAConverter.lookupFrameEndType(k.getStringByKey("End")),k.getIntegerByKey("EndFollowing"));}m.setWindowFunction(w);}};f.QInARepoMemberAbstract.importCurrencyPlanningProperties=function(m,i){if(i.hasStringByKey("RateType")){m.setRateType(f.QInAConverter.lookupRateType(i.getStringByKey("RateType")));}if(i.hasStringByKey("UnitDimension")){m.setUnitDimensionName(i.getStringByKey("UnitDimension"));}if(i.hasStringByKey("UnitDimensionProperty")){m.setUnitDimensionProperty(i.getStringByKey("UnitDimensionProperty"));}};f.QInARepoMemberAbstract.importIgnoredExternalDimensions=function(i,m,a){if(i.capabilities.supportsIgnoreExternalDimensions()){if(a.hasStringByKey("IgnoreExternalDimensions")){var b=a.getStringByKey("IgnoreExternalDimensions");if(f.XString.isEqual(b,"All")){m.setIgnoreAllExternalDimensions(true);}}else if(a.containsKey("IgnoreExternalDimensions")){var c=a.getListByKey("IgnoreExternalDimensions");var e=c.size();for(var d=0;d<e;d++){m.addExternalDimensionToIgnore(c.getStringAt(d));}}}var o=a.getStringByKey("OverrideText");if(f.XStringUtils.isNotNullAndNotEmpty(o)){m.setOverrideText(o);}};f.QInARepoMemberAbstract.importAggregationType=function(i,m,a){var b=a.getStringByKey("Aggregation");var o=m.getAggregationType();m.setAggregationType(null);var d=i.mode===f.QModelFormat.INA_REPOSITORY_DELTA||a.getBooleanByKeyExt("ModelDefinedMember",false)&&m.getDimension()!==null&&m.getDimension().getDimensionType()!==f.DimensionType.ACCOUNT;if(f.XStringUtils.isNotNullAndNotEmpty(b)){var c=f.QInAConverter.lookupAggregationType(b);if(d){if(f.notNull(c)&&f.AggregationType.lookupStatisticalAggregation(c.getName())!==null&&!m.getModelCapabilities().supportsStatisticalAggregations()){c=null;}if(f.isNull(c)){c=f.AggregationType.SUM;}}m.setAggregationType(c);}else if(d){m.setAggregationType(o);}};f.QInARepoMemberAbstract.importGenericMemberAbstractProperties=function(i,m,a){if(a.containsKey("ModelDefinedMember")){m.setModelDefinedMember(a.getBooleanByKey("ModelDefinedMember"));}if(a.containsKey("MinimumDrillState")){var b=a.getListByKey("MinimumDrillState").getIterator();while(b.hasNext()){m.addMinimumDrillState(b.next().asString().getString());}}};f.QInARepoMemberAbstract.exportCustomMember=function(e,m,i){var c=m.getComponentType();if(c===f.MemberType.FORMULA||c===f.MemberType.VARIANCE){e.exportFormulaMeasure(m,i);}else if(c===f.MemberType.RESTRICTED_MEASURE){e.exportRestrictedMeasure(m,i);}else if(c===f.MemberType.EXCEPTION_AGGREGATION){e.exportExceptionAggregationMeasure(m,i);}else if(c===f.MemberType.CURRENCY_MEASURE){e.exportCurrencyMeasure(m,i);}};f.QInARepoMemberAbstract.exportFormulaItem=function(e,a,i,c){var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||f.notNull(a)&&a.getModCounter()>0;if(s){f.QInARepoMemberAbstract.exportFormulaItemSignFlip(e,a,i,c,false,false);}};f.QInARepoMemberAbstract.exportFormulaItemSignFlip=function(e,a,b,c,d,g){if(f.notNull(a)){var h=a.getComponentType();if(h===f.OlapComponentType.FORMULA_CONSTANT){var j=a;var k=b.putNewStructure("Constant");var l=j.getUnit();if(f.XStringUtils.isNotNullAndNotEmpty(l)){k.putString("Unit",l);}var m=j.getCurrency();if(f.XStringUtils.isNotNullAndNotEmpty(m)){k.putString("Currency",m);}f.QInARepoMemberAbstract.exportFormulaConstantValue(e,k,j);}else if(h===f.OlapComponentType.FORMULA_OPERATION){var n=a;var o=b.putNewStructure("Function");o.putString("Name",n.getOperator().getDisplayString());var p=o.putNewList("Parameters");f.QInARepoMemberAbstract.exportFormulaItemSignFlip(e,n.getLeftSide(),p.addNewStructure(),c,d,g);f.QInARepoMemberAbstract.exportFormulaItemSignFlip(e,n.getRightSide(),p.addNewStructure(),c,d,g);}else if(h===f.OlapComponentType.FORMULA_FUNCTION){var q=a;var r=b.putNewStructure("Function");r.putString("Name",q.getFunctionName());var s=r.putNewList("Parameters");var t=q.size();for(var i=0;i<t;i++){f.QInARepoMemberAbstract.exportFormulaItemSignFlip(e,q.get(i),s.addNewStructure(),c,d,g);}var u=q.getSolveOrder();if(u!==0){b.putInteger("SolveOrder",u);}}else if(h===f.OlapComponentType.FORMULA_ITEM_MEMBER){var v=a;var w=c.getQueryModel();var x=v.getVariable();var y;if(f.isNull(x)){y=f.PrFactory.createStructure();var z;z=f.QInAExportUtil.getMeasureMemberNameByAlias(w,v.getMemberName(),e);y.putStringNotNull("Name",z);y.putStringNotNull("Dimension",v.getDimensionName());if(v.isBooked()){y.putString("NameIs","Booked");}else if(v.isPrevious()){y.putString("NameIs","Previous");}if(d){var A=f.QInARepoMemberAbstract.exportMemberWithSignFlip(e,v);if(f.notNull(A)){b.put("Function",A.getByKey("Function"));}else{b.put("Member",y);}}else{b.put("Member",y);}}else{y=b.putNewStructure("Member");y.putString("Name",x.getName());y.putString("NameIs","Variable");}f.QInARepoMemberAbstract.exportDimensionContext(v,y);}else if(h===f.OlapComponentType.FORMULA_ITEM_ATTRIBUTE){var B=a;var C=b.putNewStructure("AttributeValue");C.putString("Name",B.getFieldName());f.QInARepoMemberAbstract.exportDimensionContext(B,C);}}};f.QInARepoMemberAbstract.exportDimensionContext=function(a,i){var d;d=a.getDimensionContext();if(f.notNull(d)){var b=i.putNewStructure("DimensionContext");b.putString("DatasetId",d.getQueryModel().getDatasetId());b.putString("DimensionName",d.getName());}};f.QInARepoMemberAbstract.exportMemberWithSignFlip=function(e,a){return null;};f.QInARepoMemberAbstract.exportFormulaConstantValue=function(e,c,a){var v=a.getValue()===null;var b=a.getVariable();if(v&&f.isNull(b)){c.putNull("Value");}var d=a.getValueType();if(d===f.XValueType.INTEGER){c.putString("ValueType","Number");if(!v){c.putInteger("Value",a.getInteger());}}else if(d===f.XValueType.DOUBLE||d===f.XValueType.DECIMAL_FLOAT){c.putString("ValueType","Number");if(!v){c.putDouble("Value",a.getDouble());}}else if(d===f.XValueType.LONG){c.putString("ValueType","Number");if(!v){c.putLong("Value",a.getLong());}}else if(d===f.XValueType.STRING){c.putString("ValueType","String");c.putString("Value",a.getString());}else if(d===f.XValueType.BOOLEAN){c.putString("ValueType","Bool");if(!v){c.putBoolean("Value",a.getBoolean());}}else if(d===f.XValueType.DATE){c.putString("ValueType","Date");if(!v){c.putString("Value",a.getDate().toString());}}else if(d===f.XValueType.DATE_TIME){c.putString("ValueType","DateTime");if(!v){c.putString("Value",a.getDateTime().toString());}}else if(d.isSpatial()){c.putString("ValueType","String");if(!v){c.putString("Value",a.getGeometry().toWKT());}}else if(d===f.XValueType.TIMESPAN){c.putString("ValueType","String");if(!v){var t=a.getTimeSpan();c.putString("Value",t.toString());}}else if(d===f.XValueType.VARIABLE){f.QInAExportUtil.setNameIfNotNull(c,"Value",b);c.putString("ValueIs","Variable");}};f.QInARepoMemberAbstract.signFlipMember=function(a){var c=a.getContext();var o=f.QFactory.createFormulaOperation(c);o.setOperator(f.MathOperator.MULT);o.setLeftSide(f.QFactory.createFormulaConstantWithIntValue(c,-1));o.setRightSide(a);return o;};f.QInARepoMemberAbstract.getMemberForSignFlip=function(r){var d=r.getDimension();var a=r.getFilter();var m=d.getName();if(f.notNull(m)){if(a.isAll()){m=f.QInARepoMemberAbstract.getFirstMemberForSignFlip(m,a.getFilterRootElement());}var b=d.getStructureMemberByAliasOrMember(m);if(f.notNull(b)&&b.getComponentType()===f.MemberType.RESTRICTED_MEASURE&&b!==r){return f.QInARepoMemberAbstract.getMemberForSignFlip(b);}}return m;};f.QInARepoMemberAbstract.getFirstMemberForSignFlip=function(a,c){var i=c.getChildren();while(i.hasNext()){var b=i.next();if(b.getOlapComponentType()===f.FilterComponentType.OPERATION){var d=b;if(f.XString.isEqual(a,d.getDimensionName())){return d.getLow().getValue().toString();}}var m=f.QInARepoMemberAbstract.getFirstMemberForSignFlip(a,b);if(f.notNull(m)){return m;}}return null;};f.QInARepoMemberAbstract.exportPostAggregation=function(e,m,i){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_POST_AGGERGATION_TYPE)){var p=m.getPostAggregationType();if(f.notNull(p)){i.putString("PostAggregation",f.QInAConverter.lookupAggregationTypeInA(p));}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_POST_AGGREGATION_IGNORE_HIERARCHY)){if(m.isPostAggregationIgnoringHierarchy()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("PostAggregationIgnoreHierarchy",m.isPostAggregationIgnoringHierarchy());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_POST_AGGREGATION_DIMENSIONS)){var a=null;if(m.hasPropertyChanged(f.QStructureMemberProperties.QY_POST_AGGREGATION_DIMENSIONS)){a=i.putNewList("PostAggregationDimensions");}var b=m.getPostAggregationDimensions();if(b.hasElements()){if(f.isNull(a)){a=i.putNewList("PostAggregationDimensions");}var c=b.getIterator();while(c.hasNext()){a.add(f.PrFactory.createString(c.next()));}}}};f.QInARepoMemberAbstract.exportWindowFunction=function(m,i){var w=m.getWindowFunction();if(f.notNull(w)){var a=i.putNewStructure("WindowFunction");a.putString("Name",f.QInAConverter.lookupWindowFunctionTypeInA(w.getType()));var d=w.getNotInPartitionDimensions();var b=a.putNewList("DimensionsNotInPartition");b.addAllStrings(d);var c=a.putNewList("SortDimensions");var s=w.getSortDimensions().getIterator();while(s.hasNext()){var e=s.next();var g=c.addNewStructure();g.putString("Name",e.getName());var h=e.getDirection();if(h===f.XSortDirection.ASCENDING||h===f.XSortDirection.DESCENDING){g.putString("Direction",f.QInAConverter.lookupSortDirectionInA2(h));}var n=e.getNulls();if(f.notNull(n)&&n!==f.NullsType.NONE){g.putString("Nulls",f.QInAConverter.lookupNullsTypeInA(n));}}var j=w.getFrame();if(f.notNull(j)){var k=a.putNewStructure("Frame");k.putString("Start",f.QInAConverter.lookupFrameStartTypeInA(j.getStart()));k.putInteger("StartPreceding",j.getStartPreceding());k.putString("End",f.QInAConverter.lookupFrameEndTypeInA(j.getEnd()));k.putInteger("EndFollowing",j.getEndFollowing());}}};f.QInARepoMemberAbstract.exportCurrencyMetadataFusion=function(e,m,i){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_RATE_TYPE)){i.putStringNotNullAndNotEmpty("RateType",f.QInAConverter.lookupRateTypeInA(m.getRateType()));}i.putStringNotNullAndNotEmpty("UnitDimension",m.getUnitDimensionName());i.putStringNotNullAndNotEmpty("UnitDimensionProperty",m.getUnitDimensionProperty());};f.QInARepoMemberAbstract.exportInternalDataType=function(e,m,i){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE_INTERNAL)){i.putStringNotNullAndNotEmpty("DataTypeInternal",f.QInAConverter.lookupValueTypeInA(m.getDataTypeInternal()));}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE_SCALE)){var d=m.getDataTypeScale();if(f.notNull(d)){i.putInteger("DataTypeScale",d.getInteger());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE_PRECISION)){var a=m.getDataTypePrecision();if(f.notNull(a)){i.putInteger("DataTypePrecision",a.getInteger());}}};f.QInARepoMemberAbstract.prototype.getComponentType=function(){return f.MemberType.ABSTRACT_MEMBER;};f.QInARepoMemberAbstract.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var d=p;if(f.isNull(d)){d=q.getMeasureDimension();}var b=f.QInARepoMemberAbstract.importMeasure(i,a,c,q,d);if(f.notNull(b)){f.QInARepoMemberAbstract.importGenericRuntimeMemberProperties(i,b,a);if(a.containsKey("PresentationSignReversal")){b.setPresentationSignReversal(a.getBooleanByKey("PresentationSignReversal"));}var e=a.getIntegerByKeyExt("[Measures].[Aggregation]",-1);var g=f.QInAConverter.lookupAggregationType2(e);if(f.notNull(g)){b.setAggregationType(g);}if((q.isBasicMeasureSettingsExportedInRepo()||!b.isCreatedFromMetadata()||i.mode===f.QModelFormat.INA_REPOSITORY_DELTA)&&!f.XCollectionUtils.hasElements(a.getStructureByKey("[Measures].[MemberDetails]"))){this.setPrecisionAndScale(i,a,q,b);if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasStringByKey("UnitType")){b.setUnitType(f.QInAConverter.lookupUnitType(a.getStringByKey("UnitType")));}b.setUnitFixed(a.getStringByKey("UnitFixed"));b.setUnitName(a.getStringByKey("UnitName"));b.setUnitTextName(a.getStringByKey("UnitTextName"));}i.importExceptions(a,b);f.QInARepoMemberAbstract.importExceptionAggregationProperties(i,a,d.getQueryModel(),b);f.QInARepoMemberAbstract.importCurrencyPlanningProperties(b,a);f.QInARepoMemberAbstract.importInternalDataType(a,b);if(d.getDimensionType()===f.DimensionType.ACCOUNT&&a.containsKey("HierarchyDisplayKey")){var h=d.getHierarchyDisplayKeyField();if(f.notNull(h)){b.createAndAddFieldValueWithString(h,a.getStringByKey("HierarchyDisplayKey"));}}}return b;};f.QInARepoMemberAbstract.prototype.setPrecisionAndScale=function(i,a,q,m){var n=-1;var b=-1;if(i.isAbap(q)){n=a.getIntegerByKeyExt("Digits",-1);b=a.getIntegerByKeyExt("FractDigits",-1);}else{n=a.getIntegerByKeyExt("[Measures].[Digits]",-1);b=a.getIntegerByKeyExt("[Measures].[FractDigits]",-1);}if(n!==-1){m.setNumericPrecision(n);}if(b!==-1){m.setNumericScale(b);}};f.QInARepoMemberAbstract.prototype.exportGenericMemberProperties=function(e,m,i){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QDimensionMemberProperties.QY_VISIBILITY)){var r=m.getResultVisibility();if(f.isNull(r)){r=f.ResultVisibility.VISIBLE;}i.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(r));}i.putStringNotNullAndNotEmpty("CurrencyTranslationName",m.getCurrencyTranslationName());f.QInARepoMemberAbstract.exportCurrencyMetadataFusion(e,m,i);f.QInARepoMemberAbstract.exportInternalDataType(e,m,i);var a=m.getMemberType();if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_SOLVE_ORDER)){if((a===f.MemberType.BASIC_MEASURE||m.isSolveOrderOverDefined())&&(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_SOLVE_ORDER))){i.putInteger("SolveOrder",m.getSolveOrder());}}if(m.isModelDefinedMember()){i.putBoolean("isModelDefinedMember",true);}i.putString("MemberType",f.QInAConverter.lookupMeasureStructureMemberTypeIna(a));if(a!==f.MemberType.EXCEPTION_AGGREGATION){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_NUMERIC_SHIFT)){f.QInARepoUtils.setIntegerIfNotNull(i,"NumericShift",m.getNumericShift());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_NUMERIC_SCALE)){f.QInARepoUtils.setIntegerIfNotNull(i,"NumericScale",m.getNumericScale());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_NUMERIC_PRECISION)){f.QInARepoUtils.setIntegerIfNotNull(i,"NumericPrecision",m.getNumericPrecision());}f.QInARepoMemberAbstract.exportPostAggregation(e,m,i);}if(a!==f.MemberType.EXCEPTION_AGGREGATION&&a!==f.MemberType.CURRENCY_MEASURE){e.exportExceptions(m,i);}if(a!==f.MemberType.VARIANCE&&a!==f.MemberType.CURRENCY_MEASURE){var b=m.getExceptionAggregationType();if(f.notNull(b)){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||m.hasPropertyChanged(f.QStructureMemberProperties.QY_EXCEPTION_AGGERGATION_TYPE)){i.putString("ExceptionAggregation",b.getName());}var c=i.putNewList("ExceptionAggregationDimensions");c.addAllStrings(m.getExceptionAggregationDimensions());}}if(a!==f.MemberType.BASIC_MEASURE&&a!==f.MemberType.EXCEPTION_AGGREGATION){f.QInARepoMemberAbstract.exportWindowFunction(m,i);}if(a===f.MemberType.RESTRICTED_MEASURE||a===f.MemberType.FORMULA||a===f.MemberType.EXCEPTION_AGGREGATION||a===f.MemberType.VARIANCE){this.exportProperties(m,i);}var o=m.getOverrideText();if(f.XStringUtils.isNotNullAndNotEmpty(o)){i.putString("OverrideText",o);}};f.QInARepoMemberAbstract.prototype.exportProperties=function(s,i){if(s.getAliasName()!==null){i.putString("AliasName",s.getAliasName());}if(s.isAutoSignFlip()){i.putBoolean("AutoSignFlip",s.isAutoSignFlip());}if(s.getAccountType()!==null){i.putString("AccountType",s.getAccountType().getName());}};f.QInARepoMembersAll=function(){};f.QInARepoMembersAll.prototype=new f.QInARepository();f.QInARepoMembersAll.prototype._ff_c="QInARepoMembersAll";f.QInARepoMembersAll.prototype.getComponentType=function(){return f.OlapComponentType.MEMBERS;};f.QInARepoMembersAll.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=b.getBooleanByKeyExt("IsDelta",false);var e=m;if(e.supportsCustomMembers()&&!d){e.removeCustomMembers();}var g=b.getListByKey("MembersRepo");if(f.isNull(g)){return null;}var s=e.getStructureLayout();if(f.notNull(s)){if(!d&&a.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA){e.removeCustomMembers();for(var i=s.size()-1;i>=0;i--){if(e.getDimensionType()===f.DimensionType.ACCOUNT){var h=s.get(i);if(h.isModelDefinedMember()){continue;}}s.removeAt(i);}}var j=f.XListOfString.create();if(d){var k=e.getLoadedStructureMembers().getIterator();while(k.hasNext()){var l=k.next();if(f.notNull(l)&&l.getMemberType()===f.MemberType.BASIC_MEASURE){j.add(l.getName());}}}var n=g.size();for(var M=0;M<n;M++){var o=g.getStructureAt(M);var q=a.importStructureMember(e,o,c);if(f.notNull(q)){var r=q.getName();var t=e.getStructureMember(r);if(f.isNull(t)){if(d){e.addModellerMember(q);var u=e.getModellerMemberKeyRef(q.getName());e.addMeasure(u);j.removeElement(q.getName());}else{e.addMeasure(q);}}else if(d){e.addModellerMember(q);if(e.getStructureLayout().getByKey(q.getName())===null){e.getStructureLayout().addKeyRef(q);}j.removeElement(q.getName());}else{if(t!==q&&!t.isModelDefinedMember()){throw f.XException.createIllegalStateException(f.XStringUtils.concatenate3("Internal error: New member with same name not allowed: '",r,"'!"));}s.removeElement(t);s.add(t);}}}if(d&&j.size()>0){var v=j.getIterator();while(v.hasNext()){var w=v.next();var x=e.getStructureMember(w);if(f.notNull(x)){x.setModelDefinedMember(true);e.addModellerMember(x);}}}}return e;};f.QInARepoMembersAll.prototype.exportComponentWithStructure=function(e,m,a,b){var d=m;var c=d.getStructureLayout();if(f.notNull(c)){if(!d.supportsBasicStructureMembers()&&c.isEmpty()){return null;}var g=a.putNewList("MembersRepo");var l=c.size();for(var i=0;i<l;i++){var s=c.get(i);if(f.isNull(s)){continue;}var h=d.getQueryManager()!==null&&d.getQueryManager().isKeyRefSerializationEnabled();if(h&&s.getOlapEnv()!==null&&s.getOlapEnv().getClientQueryObjectManager().getClientQueryObjectByKeyRef(s)!==null){var j=e.exportStructureMember(s);g.add(j);continue;}else if(h&&s.isModelDefinedMember()){if(e.getOriginalMode().isTypeOf(f.QModelFormat.INA_REPOSITORY)){if(d.getDimensionType()===f.DimensionType.ACCOUNT){continue;}var k=g.addNewStructure();f.QInARepoUtils.addKeyRefStructure(e,s,k,d.getQueryManager());continue;}else if(e.getOriginalMode().isTypeOf(f.QModelFormat.INA_CLONE)&&d.getDimensionType()===f.DimensionType.ACCOUNT){continue;}}var n=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||!s.isCreatedFromMetadata()||s.getModCounter()>0;if(n){var o=e.exportStructureMember(s);g.add(o);}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoModellerCurrencyTranslation=function(){};f.QInARepoModellerCurrencyTranslation.prototype=new f.QInARepository();f.QInARepoModellerCurrencyTranslation.prototype._ff_c="QInARepoModellerCurrencyTranslation";f.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation=function(m,c){if(m>0){var q=c.getQueryModel();var p=f.XListOfString.create();var a=q.getMeasureDimension();var t=0;var b=a.getStructureLayout().getIterator();while(b.hasNext()){var d=b.next();var e=d.getName();if(f.XString.isEqual(e,"SignedDataLocal")){p.add("SignedDataLocal");}else if(f.XString.startsWith(e,"SignedDataOther")&&f.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember(e,q)&&t<m-1){p.add(e);t++;}else if(f.XString.isEqual(e,"SignedData")&&f.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember("SignedData",q)){p.add("SignedData");}}a.setPlaceholderIds(p);}};f.QInARepoModellerCurrencyTranslation.checkCrossCalculationMember=function(s,q){var v=q.getVariable(f.XStringUtils.concatenate3(s,".","Currency"));return f.notNull(v);};f.QInARepoModellerCurrencyTranslation.prototype.getComponentType=function(){return f.OlapComponentType.MODELLER_CURRENCY_TRANSLATION;};f.QInARepoModellerCurrencyTranslation.prototype.getTagName=function(){return"ModellerCurrencyTranslation";};f.QInARepoModellerCurrencyTranslation.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=m;if(f.notNull(d)&&f.notNull(b)){var e=b.getBooleanByKeyExt("PlanningParametersForCurrencyTranslation",false);var g=b.getBooleanByKeyExt("RateTypeFromAccount",false);var h=b.getIntegerByKeyExt("MaxNumberOfCurrencyTranslations",-1);d.setMaxNumberOfTranslations(h);d.setSupportsExtendedRateNameParameters(e);d.initializeLegacyCurrencyTranslation(!e);d.setDeriveRateTypeFromAccount(g);var j=b.getStringByKey("CurrencyTranslationTimeDimension");d.setCurrencyTranslationTimeDimensionName(j);d.setCurrencyRateTableId(b.getStringByKey("CurrencyRateTableId"));var k=b.getStringByKey("CurrencyDimension");if(f.XStringUtils.isNotNullAndNotEmpty(k)){d.setCurrencyDimensionName(k);}var l=b.getStringByKey("DefaultCurrency");if(f.XStringUtils.isNotNullAndNotEmpty(l)){d.setDefaultCurrency(l);}var i;var s;var n;var r=b.getListByKey("RateVersions");if(f.XCollectionUtils.hasElements(r)){d.clearAvailableRateVersions();s=r.size();for(i=0;i<s;i++){n=r.getStructureAt(i);d.addAvailableRateVersion(n.getStringByKey("Name"),n.getStringByKey("Text"));}}var o=b.getListByKey("Currencies");if(f.XCollectionUtils.hasElements(o)){d.clearAvailableCurrencies();s=o.size();for(i=0;i<s;i++){n=o.getStructureAt(i);d.addAvailableCurrency(n.getStringByKey("Name"),n.getStringByKey("Text"));}}var q=b.getListByKey("Categories");if(f.XCollectionUtils.hasElements(q)){d.clearAvailableCategories();s=q.size();for(i=0;i<s;i++){n=q.getStructureAt(i);d.addAvailableCategory(f.QInAConverter.lookupCategory(n.getStringByKey("Name")));}}var t=b.getListByKey("RateTypes");if(f.XCollectionUtils.hasElements(t)){d.clearAvailableRateTypes();s=t.size();for(i=0;i<s;i++){n=t.getStructureAt(i);d.addAvailableRateType(f.QInAConverter.lookupRateType(n.getStringByKey("Name")));}}f.QInARepoModellerCurrencyTranslation.checkInitializeLegacyAccountCurrencyTranslation(h,d);d.postImportInitialization();this.importModellerDefinedCurrencyTranslations(a,b,d,c);}return d;};f.QInARepoModellerCurrencyTranslation.prototype.importModellerDefinedCurrencyTranslations=function(a,b,c,d){var e=b.getListByKey("CurrencyTranslations");if(f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var n=g.getStringByKey("Name");var h=g.getStringByKey("Description");var j=c.getMeasureCurrencyTranslation(n);if(f.isNull(j)){j=c.addNewMeasureCurrencyTranslationBase(n,h);}a.importCurrencyTranslationElement(g,j,d);}}};f.QInARepoModellerCurrencyTranslation.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoModellerDimensions=function(){};f.QInARepoModellerDimensions.prototype=new f.QInARepository();f.QInARepoModellerDimensions.prototype._ff_c="QInARepoModellerDimensions";f.QInARepoModellerDimensions.prototype.getComponentType=function(){return f.OlapComponentType.MODELLER_DIMENSIONS;};f.QInARepoModellerDimensions.prototype.getTagName=function(){return"ModellerDimensions";};f.QInARepoModellerDimensions.prototype.importComponentWithStructure=function(a,b,m,p,c){var q=m;if(f.notNull(b)){var d=b.getListByKey("Dimensions");var s=d.size();var e=q.getDimensionManagerBase();var g=e.getDimensionReferences();for(var k=0;k<s;k++){var h=d.getStructureAt(k);var l=h.getStringByKey("Name");if(g.containsKey(l)){var n=e.getDimensionByNameFromExistingMetadata(l);if(q.getSession().hasFeature(f.FeatureToggleOlap.SFX_HIDDEN_DIMENSIONS)&&h.getBooleanByKey("IsHidden")){var o=n.getFields().getIterator();while(o.hasNext()){e.removeField(o.next());e.removeDimension(n);}}}a.importDimension(h,q);}var r=q.getExtendedDimensions();var E=b.getListByKey("ExtendedDimensions");if(f.notNull(r)&&f.notNull(E)&&!E.isEmpty()){for(var i=0;i<r.size();i++){var t=r.get(i);var u=t.getName();for(var j=0;j<E.size();j++){var v=E.getStructureAt(j);if(f.XString.isEqual(u,v.getStringByKey("Name"))){t.setLocationType(f.LocationType.lookup(v.getStringByKey("LocationType")));}}}}}return q;};f.QInARepoModellerDimensions.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoModellerMetadataProperties=function(){};f.QInARepoModellerMetadataProperties.prototype=new f.QInARepository();f.QInARepoModellerMetadataProperties.prototype._ff_c="QInARepoModellerMetadataProperties";f.QInARepoModellerMetadataProperties.prototype.getComponentType=function(){return f.OlapComponentType.MODELLER_METADATA_PROPERTIES;};f.QInARepoModellerMetadataProperties.prototype.getTagName=function(){return"ModellerMetadataProperties";};f.QInARepoModellerMetadataProperties.prototype.importComponentWithStructure=function(i,a,m,p,c){if(f.isNull(a)){return m;}var q=m;var b=q.getMetadataPropertiesBase();if(f.notNull(b)){b.putBoolean("HasUserDefinedMeasures",a.getBooleanByKeyExt("HasUserDefinedMeasures",false));b.putBoolean("IsPlanning",a.getBooleanByKeyExt("IsPlanning",false));b.putStringNotNull("LeadingStructure",a.getStringByKey("LeadingStructure"));}var d=a.getStringByKey("Mode");var e=a.getStringByKey("EpmQuerySourceName");var s=a.getStringByKey("SchemaName");var g=a.getStringByKey("PackageName");var n=a.getStringByKey("Name");var h=a.getStringByKey("ShortDescription");var j=f.QDatasetEpmObject.create(d,e,s,g,n,h);q.setDatasetEpmObject(j);return q;};f.QInARepoModellerMetadataProperties.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoModellerVariableManager=function(){};f.QInARepoModellerVariableManager.prototype=new f.QInARepository();f.QInARepoModellerVariableManager.prototype._ff_c="QInARepoModellerVariableManager";f.QInARepoModellerVariableManager.prototype.getComponentType=function(){return f.OlapComponentType.MODELLER_VARIABLES;};f.QInARepoModellerVariableManager.prototype.getTagName=function(){return"ModellerVariables";};f.QInARepoModellerVariableManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var v=m;if(f.notNull(a)){var b=a.getListByKey("Variables");if(f.notNull(b)){var l=b.size();for(var d=0;d<l;d++){var e=b.getStructureAt(d);var g=e.getStringByKey("Name");var h=v.getVariableBaseByName(g);if(f.isNull(h)&&e.getBooleanByKeyExt("CustomVariable",false)){h=this.createCustomVariable(c,e);var j=e.getStringByKey("InputType");var k=f.XString.isEqual(j,"Mandatory")||f.XString.isEqual(j,"MandatoryNotInitial");h.setMandatory(k);var n=f.XString.isEqual(j,"Mandatory")||f.XString.isEqual(j,"Optional");h.setInitialValueAllowed(n);}if(f.notNull(h)){h.setProcessingType(f.QInAConverter.lookupProcessingType(e.getStringByKey("ProcessingType")));var o=h.getVariableType();if(o.isTypeOf(f.VariableType.SIMPLE_TYPE_VARIABLE)){i.importSimpleTypeVariable(e,h,c);}else if(o.isTypeOf(f.VariableType.DIMENSION_MEMBER_VARIABLE)){var q=h;i.importDimensionMemberVariable(e,q,null,q);}else if(o.isTypeOf(f.VariableType.OPTION_LIST_VARIABLE)){i.importOptionListVariable(e,h,c);}else{i.addError(f.ErrorCodes.INVALID_PARAMETER,f.XStringUtils.concatenate5("The variable '",g,"' of variable type '",o.getName(),"' was not imported correctly"));}}else{i.addWarning(f.ErrorCodes.ET_ELEMENT_NOT_FOUND,f.XStringUtils.concatenate3("The variable '",g,"' was not found"));}}}}return v;};f.QInARepoModellerVariableManager.prototype.createCustomVariable=function(c,a){var v=f.QFactory.createCustomVariableConfig(c.getQueryManager());var b=a.getListByKey("Options");var o=f.XList.create();if(!f.PrUtils.isListEmpty(b)){var l=b.size();for(var i=0;i<l;i++){var d=b.getStructureAt(i);var e=d.getStringByKey("Name");var g=d.getStringByKey("Text");o.add(f.XPairOfString.create(e,g));}}return v.createOptionsListVariable(a.getStringByKey("Name"),a.getStringByKey("Text"),o);};f.QInARepoModellerVariableManager.prototype.exportComponentWithStructure=f.noSupport;f.QInARepoQuery=function(){};f.QInARepoQuery.prototype=new f.QInARepository();f.QInARepoQuery.prototype._ff_c="QInARepoQuery";f.QInARepoQuery.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MODEL;};f.QInARepoQuery.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;var b=a;var d=b.getListByKey("Queries");if(f.notNull(d)){b=d.getStructureAt(d.size()-1);}var e=b.getListByKey(f.ConnectionConstants.INA_BATCH);if(f.notNull(e)){b=e.getStructureAt(e.size()-1);}if(f.notNull(b)&&b.containsKey("Analytics")){b=b.getStructureByKey("Analytics");if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}}if(f.notNull(b)&&b.containsKey("Definition")){b=b.getStructureByKey("Definition");}if(f.notNull(b)){var g=i.getOriginalMode()===f.QModelFormat.INA_CLONE_RENDERING;if(b.containsKey("ModellerDefinition")){b=b.getStructureByKey("ModellerDefinition");i.importModellerDimensions(b,q,q);i.importModellerDefinedVariables(b,q.getVariableManagerBase(),q);i.importModellerCurrencyTranslation(b,q.getCurrencyTranslationManagerBase(),q);i.importModellerMetadataProperties(b,q,q);i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);return q;}i.importDimensions(b,q,q);if(!g){i.importFilter(b,q.getFilterBase(),q);i.importExceptions(b,q);i.importQueryCells(b,q.getQueryCellManager(),q);i.importUniversalDisplayHierarchies(b,q.getUniversalDisplayHierarchiesBase(),q);}i.importCurrencyTranslationManager(b,q.getCurrencyTranslationManager(),q);i.importSortingManager(b,q.getSortingManagerBase(),q);i.importDrillManager(b,q.getDrillManager(),q);if(i.mode!==f.QModelFormat.INA_REPOSITORY_NO_VARS&&i.mode!==f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){i.importVariableManager(b,q.getVariableManagerBase(),q);}i.importQuerySettings(b,q);i.importDataCells(b,q);i.importConditionManager(b,q.getConditionManagerBase(),q);i.importFormulaExceptionManager(b,q.getFormulaExceptionManagerBase(),q);this.importPaging(i,b,q);var r=q.getResultStructureController();i.importComponent(null,b,r,q,q);var h=q.getQueryManager();if(f.notNull(h)){f.QInARepoOptions.importSuppressKeyfigureCalculation(b,h);f.QInARepoOptions.importLOVAbstractionLayerSettings(b,h);h.setResultSetPersistanceTargetTable(a.getStringByKey("ResultSetPersistanceTable"));h.setResultSetPersistanceTargetSchema(a.getStringByKey("ResultSetPersistanceSchema"));h.setResultSetPersistenceIdentifier(a.getStringByKey("ResultSetPersistanceIdentifier"));}var j=b.getListByKey("PreQueries");if(f.notNull(j)){var k=null;var l=b.getStructureByKey("DataSource");if(f.notNull(l)){k=l.getStringByKey("System");}this.importPreQueries(i,q,j,k);}if(i.mode.isTypeOf(f.QModelFormat.INA_REPOSITORY_DATA)&&q.isBlendingModel()){this.importBlendingSources(i,a,q);}}return q;};f.QInARepoQuery.prototype.importBlendingSources=function(a,b,q){var s=q.getBlendingSources();if(!f.XCollectionUtils.hasElements(s)){return;}var c=f.PrUtils.getStructureProperty(b,"DataSource");var d=f.PrUtils.getListProperty(c,"Sources");if(f.PrUtils.isListEmpty(d)){return;}for(var i=0;i<s.size();i++){var e=f.PrUtils.getStructureElement(d,i);var g=f.PrUtils.getStructureProperty(e,"DefiningContext");if(f.notNull(g)){var h=s.get(i).getQueryModel();h.deserializeFromElementExt(a.mode,g);}}};f.QInARepoQuery.prototype.importPaging=function(i,a,q){var b=a.getStructureByKey("SubSetDescription");var c=q.getQueryManager();var d=i.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING;if(f.isNull(b)||!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||c.applyingStateOnQueryManager()&&!d){return;}f.QInARepoOptions.importPaging(a,c);};f.QInARepoQuery.prototype.getInactiveCapabilities=function(q){var c=f.XHashMapByString.create();var a=f.FeatureToggleOlap.getAllFeatureToggles();var b=a.getKeysAsIteratorOfString();while(b.hasNext()){c.put(b.next(),f.XBooleanValue.create(false));}var e=q.getSession().getFeatureToggles();if(f.notNull(e)){var d=e.getKeysAsIteratorOfString();while(d.hasNext()){c.put(d.next(),f.XBooleanValue.create(true));}}return c;};f.QInARepoQuery.prototype.importPreQueries=function(a,q,b,m){var c=a.getMode();if(a.getOriginalMode()!==f.QModelFormat.INA_CLONE_RENDERING){a.mode=a.getOriginalMode();}var d=f.XStringBuffer.create();var e=this.getInactiveCapabilities(q);var p=b.size();for(var i=0;i<p;i++){var g=b.getStructureAt(i);var h=g.getStructureByKey("Runtime");if(f.isNull(h)){h=g;}var j=h.getStructureByKey("DataSource");d.clear();d.append(j.getStringByKey("Type")).append(":[");d.append(j.getStringByKey("SchemaName"));d.append("][");d.append(j.getStringByKey("PackageName"));d.append("][");d.append(j.getStringByKey("ObjectName")).append("]");var k=f.XCommandFactory.create(q.getApplication());var x=k.createCommand(f.CmdCreateQueryManager.CMD_NAME);x.addParameter(f.CmdCreateQueryManager.PARAM_I_APPLICATION,q.getApplication());x.addParameter(f.CmdCreateQueryManager.PARAM_I_ENFORCE_INACTIVE_CAPABILITIES,e);var l=j.getStringByKey("System");if(a.mode===f.QModelFormat.INA_REPOSITORY&&f.XString.isEqual(l,m)){l=q.getDataSource().getSystemName();}x.addParameterString(f.CmdCreateQueryManager.PARAM_I_SYSTEM,l);x.addParameterString(f.CmdCreateQueryManager.PARAM_I_DATA_SOURCE,d.toString());var n=x.processCommand(f.SyncType.BLOCKING,null,null);a.addAllMessages(n);f.XObjectExt.release(x);if(n.isValid()){var o=n.getData().getResultParameter(f.CmdCreateQueryManager.PARAM_E_QUERY_MANAGER).getQueryModel();a.importPreQuery(g,o);f.QInARepoDataSource.importDs2(a,j,null,o.getDataSourceBase());var r=g.getStringByKey("ObjectName");var s=q.getPreQueryByName(r);if(f.isNull(s)){q.addPreQueryWithName(o,r);}}}a.mode=c;};f.QInARepoQuery.prototype.exportComponentWithStructure=function(e,m,a,b){var q=m;var c=e.mode===f.QModelFormat.INA_REPOSITORY_DATA_RENDERING;e.exportUniversalDisplayHierarchies(q.getUniversalDisplayHierarchies(),a);var d=q.getDrillManager();e.exportDrillManager(d,a);if(!d.isValidatingContextFreeNavigations()){a.putBoolean("ValidateContextFreeNavigations",false);}var w=f.XMath.binaryAnd(b,f.QImExFlag.DATASOURCE)>0;if(w){f.QInARepoDataSource.exportDataSource(e,q.getDataSource(),q.getModelCapabilities().supportsRunAsUser(),a);}e.exportDimensions(q,a);e.exportSortingManager(q.getSortingManager(),a);e.exportCurrencyTranslationManager(q.getCurrencyTranslationManager(),a);e.exportDataCells(q,a);e.exportQuerySettings(q,a);if(!c){e.exportFilter(q.getFilter(),a);e.exportExceptions(q,a);e.exportQueryCells(q.getQueryCellManager(),a);}e.exportConditionManager(q.getConditionManager(),a);var g=f.XMath.binaryAnd(b,f.QImExFlag.VARIABLES)>0;if(g&&e.mode!==f.QModelFormat.INA_REPOSITORY_NO_VARS&&e.mode!==f.QModelFormat.INA_REPOSITORY_DATA_NO_VARS){if(q.isExportingVariables()||q.hasProcessingStep()){e.exportVariables(q.getVariableContainer(),a);}}var h=q.getQueryManager();if(q.isBatchModeForMicroCube()){a.putString("Name",h.getNameForMicroCubeUse());}e.exportFormulaExceptionManager(q.getFormulaExceptionManager(),a);this.exportPaging(a,q);f.QInARepoOptions.exportSuppressKeyfigureCalculation(a,h);f.QInARepoOptions.exportLOVAbstractionLayerSettings(a,h);var p=q.getPreQueries();if(f.notNull(p)){var j=p.size();if(j>0){var k=a.getListByKey("PreQueries");if(f.isNull(k)){k=a.putNewList("PreQueries");}var l=e.getMode();if(e.getOriginalMode()!==f.QModelFormat.INA_CLONE_RENDERING){e.mode=e.getOriginalMode();}for(var i=0;i<j;i++){var n=p.get(i);var o=e.exportPreQuery(n.getObject());var r=n.getName();o.putString("ObjectName",r);k.add(o);}e.mode=l;a.put("PreQueries",k);}}var s=q.getResultStructureController();e.exportComponent(null,s,a,b);var t=f.InactiveCapabilityUtil.exportFeatureToggles(h.getSession().getFeatureToggles());a.putString("ExperimentalFeatures",t);a.putString("ResultSetPersistanceTable",h.getResultSetPersistenceTable());a.putString("ResultSetPersistanceSchema",h.getResultSetPersistenceSchema());a.putString("ResultSetPersistanceIdentifier",h.getResultSetPersistenceIdentifier());return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoQuery.prototype.exportPaging=function(i,q){var a=q.getQueryManager();if(!q.getSession().hasFeature(f.FeatureToggleOlap.PERSIST_PAGING_IN_REPO)||a.recordingStateOfQueryManager()){return;}if(a.getOffsetColumns()>0||a.getOffsetRows()>0||a.getMaxColumns()>-1||a.getMaxRows()>-1){f.QInARepoOptions.exportPaging(i,a);}};f.QInARepoQueryCells=function(){};f.QInARepoQueryCells.prototype=new f.QInARepository();f.QInARepoQueryCells.prototype._ff_c="QInARepoQueryCells";f.QInARepoQueryCells.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_CELLS;};f.QInARepoQueryCells.prototype.getTagName=function(){return"Cells";};f.QInARepoQueryCells.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;if(f.notNull(q)){q.clear();if(f.notNull(a)){var b=a.getListByKey("Elements");if(f.notNull(b)){var d=q.getDimensionAccessor();var s=b.size();for(var e=0;e<s;e++){var g=b.getStructureAt(e);var h=q.addNewQueryCell(g.getStringByKey("Name"));h.setCellCalculationMember(this.getMember(d,g));var j=g.getListByKey("Position");var k=j.size();for(var l=0;l<k;l++){var n=j.getStructureAt(l);h.addPosition(this.getMember(d,n));}}}}}return q;};f.QInARepoQueryCells.prototype.getMember=function(d,i){var a=d.getDimensionByName(i.getStringByKey("DimensionName"));return a.getStructureMember(i.getStringByKey("MemberName"));};f.QInARepoQueryCells.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;if(f.notNull(q)&&q.size()>0){var b=i.putNewList("Elements");var c=q.getIterator();while(c.hasNext()){var d=c.next();var g=b.addNewStructure();g.putString("Name",d.getName());var h=d.getCellCalculationMember();g.putString("DimensionName",h.getDimension().getName());g.putString("MemberName",h.getName());var j=g.putNewList("Position");var p=d.getPositions();var k=p.getIterator();while(k.hasNext()){var l=k.next();var n=j.addNewStructure();n.putString("DimensionName",l.getDimensionName());n.putString("MemberName",l.getMemberName());}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoQueryManager=function(){};f.QInARepoQueryManager.prototype=new f.QInARepository();f.QInARepoQueryManager.prototype._ff_c="QInARepoQueryManager";f.QInARepoQueryManager.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_MANAGER;};f.QInARepoQueryManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=m;return q;};f.QInARepoQueryManager.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;var b=q.getQueryModel();if(f.notNull(b)){var c=e.exportQueryModel(b,true,true);i.put("QueryModel",c);}var d=q.getQueryServiceConfig();var g=e.exportComponent(f.OlapComponentType.QUERY_SERVICE_CONFIG,d,null,a);i.put("QueryServiceConfig",g);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,q,i,a);};f.QInARepoQuerySettings=function(){};f.QInARepoQuerySettings.prototype=new f.QInARepository();f.QInARepoQuerySettings.prototype._ff_c="QInARepoQuerySettings";f.QInARepoQuerySettings.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_SETTINGS;};f.QInARepoQuerySettings.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var d=f.PrUtils.getStringProperty(a,"Name");if(f.notNull(d)){q.setDefinitionName(d.getString());}var b=a.getStructureByKey("Query");i.importAxesSettings(b,q);var e=f.PrUtils.getListProperty(b,"AxesLayout");var l=f.PrUtils.getListSize(e,0);for(var g=0;g<l;g++){var h=f.PrUtils.getStructureElement(e,g);var j=f.AxisType.lookup(f.PrUtils.getStringValueProperty(h,"Axis",null));var k=q.getAxis(j);if(f.isNull(k)){continue;}var o=f.PrUtils.getListProperty(h,"OrderedDimensionNames");if(f.isNull(o)){continue;}var n=f.XListOfString.create();for(var r=0;r<f.PrUtils.getListSize(o,0);r++){var s=f.PrUtils.getStringElement(o,r);if(f.isNull(s)){continue;}n.add(s.getString());}k.reOrderDimensions(n);}return q;};f.QInARepoQuerySettings.prototype.exportComponentWithStructure=function(e,m,i,a){var q=m;var d=q.getDefinitionName();if(f.XStringUtils.isNotNullAndNotEmpty(d)){i.putString("Name",d);}var b=i.getStructureByKey("Query");if(f.isNull(b)){b=i.putNewStructure("Query");}e.exportAxesSettings(q,b);var c=b.putNewList("AxesLayout");var g=f.AxisType.getAll();for(var h=0;h<g.size();h++){var j=g.get(h);var k=q.getAxis(j);if(f.isNull(k)){continue;}var l=k.getOrderedDimensionNames();if(f.isNull(l)){continue;}var n=c.addNewStructure();n.putString("Axis",k.getName());var o=n.putNewList("OrderedDimensionNames");o.addAllStrings(l);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoServiceConfig=function(){};f.QInARepoServiceConfig.prototype=new f.QInARepository();f.QInARepoServiceConfig.prototype._ff_c="QInARepoServiceConfig";f.QInARepoServiceConfig.prototype.getComponentType=function(){return f.OlapComponentType.QUERY_SERVICE_CONFIG;};f.QInARepoServiceConfig.prototype.newModelComponent=function(a,o,p,c){var s=f.QueryServiceConfig.create(a);return s;};f.QInARepoServiceConfig.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var s=a.getStringByKey("System");if(f.XStringUtils.isNotNullAndNotEmpty(s)){b.setSystemName(s);}var d=a.getStructureByKey("DataSource");if(f.notNull(d)){var e=i.importDataSource(d);b.setDataSource(e);}return b;};f.QInARepoServiceConfig.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;i.putStringNotNullAndNotEmpty("System",c.getSystemName());var b=e.exportDataSource(c.getDataSource(),false);i.putNotNullAndNotEmpty("DataSource",b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,c,i,a);};f.QInARepoSort=function(){};f.QInARepoSort.prototype=new f.QInARepository();f.QInARepoSort.prototype._ff_c="QInARepoSort";f.QInARepoSort.prototype.getComponentType=function(){return f.OlapComponentType.SORT_MANAGER;};f.QInARepoSort.prototype.getTagName=function(){return"SortRepo";};f.QInARepoSort.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=m;var b=a.getListByKey("Elements");var d=s.getSortingOperations();d.clear();if(f.notNull(b)){for(var e=0;e<b.size();e++){var g=b.getStructureAt(e);var h=i.importComponent(f.OlapComponentType.GENERIC_SORTING,g,null,s,c);if(f.notNull(h)){d.add(h);}}}return s;};f.QInARepoSort.prototype.exportComponentWithStructure=function(e,m,a,b){var s=m;var c=a.putNewList("Elements");var d=s.getSortingOperations();for(var i=0;i<d.size();i++){var g=d.get(i);var h=g.supportsDimension()&&g.getDimension()!==null&&g.getDimension().isUniversalDisplayHierarchyDimension();if(!h){c.add(e.exportComponent(null,g,null,b));}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoSortOperation=function(){};f.QInARepoSortOperation.prototype=new f.QInARepository();f.QInARepoSortOperation.prototype._ff_c="QInARepoSortOperation";f.QInARepoSortOperation.prototype.getComponentType=function(){return f.OlapComponentType.GENERIC_SORTING;};f.QInARepoSortOperation.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;var s=null;if(b.getOlapComponentType()===f.OlapComponentType.COMPONENT_LIST){b=b.getParent();}if(b.getOlapComponentType()===f.OlapComponentType.SORT_MANAGER){s=b;}var d=null;if(f.notNull(s)){var q=c.getQueryModel();var e=q.getModelCapabilities();var g=a.getStringByKey("SortType");var h=f.QInAConverter.lookupSortType(g);if(h===f.SortType.FIELD){d=this.importFieldSorting(a,s,q);}else if(h===f.SortType.MEASURE){d=this.importMeasureSorting(a,s,q);}else if(h===f.SortType.DATA_CELL_VALUE||h===f.SortType.COMPLEX&&(e.supportsComplexSorting()||e.supportsDataCellSorting())){d=this.importPathSorting(i,a,c,s,q,h);}else{d=this.importDimensionSorting(a,s,q,h);}if(f.notNull(d)){this.importGenericSorting(i,a,d,q);}}return d;};f.QInARepoSortOperation.prototype.importGenericSorting=function(i,a,s,q){var b=a.getStringByKey("Direction");if(f.notNull(b)){var c=f.QInAConverter.lookupSortDirection2(b);if(f.notNull(c)){s.setDirection(c);}}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("PreserveGrouping")){if(s.supportsPreserveGrouping()&&s.supportsBreakGrouping()){s.setPreserveGrouping(a.getBooleanByKeyExt("PreserveGrouping",false));}}if(s.supportsDimension()){var d=a.getStringByKey("Dimension");if(f.isNull(d)){s.setDimension(null);}else{s.setDimension(q.getDimensionByNameFromExistingMetadata(d));}}if(s.getModelCapabilities().supportsLocaleSorting()){var e=a.getStructureByKey("Collator");if(f.notNull(e)){if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||e.containsKey("CaseSensitive")){s.setIsCaseSensitive(e.getBooleanByKeyExt("CaseSensitive",false));}s.setLocale(e.getStringByKeyExt("Locale",null));}}};f.QInARepoSortOperation.prototype.importDimensionSorting=function(i,s,q,a){var d=i.getStringByKey("Dimension");var m=q.getModelCapabilities();if(f.XStringUtils.isNotNullAndNotEmpty(d)){var b=q.getDimensionByNameFromExistingMetadata(d);if(m.supportsDimensionSorting(b,a)){var c=s.newDimensionSorting(b);if(f.isNull(c)){return null;}if(a===f.SortType.FILTER){c.setSortByFilter();}else if(a===f.SortType.MEMBER_KEY){c.setSortByKey();c.setCustomSort(this.getCustomSortOrder(i));c.setCustomSortPosition(this.getCustomSortPosition(i));}else if(a===f.SortType.MEMBER_TEXT){c.setSortByText();}else if(a===f.SortType.HIERARCHY){c.setSortByHierarchy();}return c;}}return null;};f.QInARepoSortOperation.prototype.importPathSorting=function(i,a,c,s,q,b){var d=a.getListByKey("SortTuple");if(d.isEmpty()){return null;}var p=f.XList.create();for(var e=0;e<d.size();e++){var g=d.getStructureAt(e);var h=g.getStringByKey("FieldName");var j=g.getStringByKey("Value");if(f.isNull(h)||f.isNull(j)){return null;}var k=q.getFieldByName(h);if(f.isNull(k)){return null;}var l=g.getStringByKey("Hierarchy");var m=f.QSelectValue._createDimensionElement2(c,k,l,j);f.QInAImportUtil.importComponentTagging(i,g,m);p.add(m);}var n=null;if(b===f.SortType.DATA_CELL_VALUE){n=s.newDataCellSorting(p);}else{n=s.newComplexSorting(p);}var u=a.getBooleanByKeyExt("SortOperationUsedInRanking",false);if(u){n.setUsedInRanking(true);}return n;};f.QInARepoSortOperation.prototype.importMeasureSorting=function(i,s,q){var m=null;var a=q.getModelCapabilities();var b=i.getStringByKey("MeasureName");if(f.notNull(b)){var c=q.getMeasureDimension();var d=c.getStructureMember(b);if(f.notNull(d)&&a.supportsMeasureSorting()){m=s.newMeasureSorting(d);}var e=i.getStringByKey("StructureName");var g=q.getNonMeasureDimension();if(f.notNull(e)&&f.notNull(g)&&f.notNull(m)){m.setStructure(g.getStructureMember(e));}}return m;};f.QInARepoSortOperation.prototype.importFieldSorting=function(i,s,q){var a=null;var b=i.getStringByKey("FieldName");if(f.notNull(b)){var c=q.getFieldByName(b);var m=q.getModelCapabilities();if(f.notNull(c)&&m.supportsFieldSorting(c)){a=s.newFieldSorting(c);a.setCustomSort(this.getCustomSortOrder(i));a.setCustomSortPosition(this.getCustomSortPosition(i));}}return a;};f.QInARepoSortOperation.prototype.getCustomSortPosition=function(i){var c=i.getStringByKey("CustomSortPosition");if(f.notNull(c)){return f.CustomSortPosition.lookup(c);}return null;};f.QInARepoSortOperation.prototype.getCustomSortOrder=function(i){var c=i.getListByKey("CustomSort");if(f.notNull(c)&&c.hasElements()){return f.PrUtils.asListOfString(c);}return null;};f.QInARepoSortOperation.prototype.exportComponentWithStructure=function(e,m,i,a){var s=m;var b=s.getSortingType();this.exportGenericSorting(e,i,s,b);if(b===f.SortType.FIELD){this.exportFieldSorting(i,s);}else if(b===f.SortType.MEASURE){this.exportMeasureSorting(i,s);}else if(b===f.SortType.DATA_CELL_VALUE||b===f.SortType.COMPLEX){this.exportPathSorting(e,i,s);}else if(b===f.SortType.MEMBER_KEY){var c=s;this.exportCustomSortDetails(c.getCustomSort(),c.getCustomSortPosition(),i);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoSortOperation.prototype.exportFieldSorting=function(i,s){var a=s;i.putString("FieldName",a.getField().getName());this.exportCustomSortDetails(a.getCustomSort(),a.getCustomSortPosition(),i);};f.QInARepoSortOperation.prototype.exportCustomSortDetails=function(c,a,i){if(f.XCollectionUtils.hasElements(c)){var b=i.putNewList("CustomSort");var d=c.size();for(var e=0;e<d;e++){b.addString(c.get(e));}}f.QInARepoUtils.setNameIfNotNull(i,"CustomSortPosition",a);};f.QInARepoSortOperation.prototype.exportGenericSorting=function(e,i,s,a){var b=f.QInAConverter.lookupSortTypeInA(a);i.putString("SortType",b);var d=s.getDirection();if(d!==f.XSortDirection.DEFAULT_VALUE){i.putString("Direction",f.QInAConverter.lookupSortDirectionInA2(d));}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QSortProperties.QY_PRESERVE_GROUPING)){if(s.supportsPreserveGrouping()&&s.supportsBreakGrouping()){i.putBoolean("PreserveGrouping",s.isPreserveGroupingEnabled());}}if(s.getModelCapabilities().supportsLocaleSorting()){var c=f.PrFactory.createStructure();if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||s.hasPropertyChanged(f.QSortProperties.QY_CASE_SENSITIVE)){c.putBoolean("CaseSensitive",s.isCaseSensitive());}c.putString("Locale",s.getLocale());i.put("Collator",c);}if(s.supportsDimension()){f.QInARepoUtils.setNameIfNotNull(i,"Dimension",s.getDimension());}};f.QInARepoSortOperation.prototype.exportPathSorting=function(e,a,s){var p=s;var b=a.putNewList("SortTuple");var c=p.getElementPath();var d=c.size();for(var i=0;i<d;i++){var g=c.get(i);var h=b.addNewStructure();h.putString("FieldName",g.getSelectField().getName());h.putString("Value",g.getSelectValue());var j=g.getSelectHierarchyName();if(f.XStringUtils.isNotNullAndNotEmpty(j)){h.putString("Hierarchy",j);}f.QInARepoUtils.extendStructureWithTagging(e,g,h);}if(s.usedInRanking()){a.putBoolean("SortOperationUsedInRanking",true);}};f.QInARepoSortOperation.prototype.exportMeasureSorting=function(i,s){var m=s;var a=m.getMeasure().getName();i.putString("MeasureName",a);f.QInARepoUtils.setNameIfNotNull(i,"StructureName",m.getStructure());};f.QInARepoTotals=function(){};f.QInARepoTotals.prototype=new f.QInARepository();f.QInARepoTotals.prototype._ff_c="QInARepoTotals";f.QInARepoTotals.prototype.getComponentType=function(){return f.OlapComponentType.TOTALS;};f.QInARepoTotals.prototype.getTagName=function(){return"ResultStructureRepo";};f.QInARepoTotals.prototype.importComponentWithStructure=function(a,b,m,p,c){var r=m;if(r.supportsTotals()){if(f.notNull(b)){var d=null;if(r.supportsResultAlignment()){var e=b.getStringByKey("ResultAlignment");if(f.XString.isEqual("Default",e)){r.restoreTotalsAlignment(f.RestoreAction.DEFAULT_VALUE,false);}else{d=f.QInAConverter.lookupAlignment(e);r.setResultAlignmentBase(d,false);}}if(d===f.ResultAlignment.STRUCTURE){var g=b.getListByKey("ResultStructure");if(f.notNull(g)){var h=r.getAdvancedResultStructure();h.clear();for(var i=0;i<g.size();i++){var j=g.getStructureAt(i);var l=j.getStringByKey("Result");var n=f.QInAConverter.lookupResultStructureElement(l);var o=f.QInAConverter.lookupResultSetVisibility(j.getStringByKey("Visibility"));h.addWithVisibility(n,o);}}}else{if(r.supportsResultVisibility()){var q=b.getStringByKey("Visibility");if(f.XString.isEqual("Default",q)){r.restoreTotalsVisibility(f.RestoreAction.DEFAULT_VALUE,false);}else{var s=b.getListByKey("VisibilitySettings");if(f.isNull(s)){var v=f.QInAConverter.lookupResultSetVisibility(q);r.setResultVisibility(v);}else{r.clearResultVisibilitySettings();for(var k=0;k<s.size();k++){var t=s.getStructureAt(k);var u=f.QInAConverter.lookupAlignment(t.getStringByKey("ResultAlignment"));var w=f.QInAConverter.lookupResultStructureElement(t.getStringByKey("Result"));var x=f.QInAConverter.lookupResultSetVisibility(t.getStringByKey("Visibility"));r.setResultVisibilityByElementAndAlignment(u,w,x);}}}}}}}return r;};f.QInARepoTotals.prototype.exportComponentWithStructure=function(e,m,a,b){var r=m;if(!r.supportsTotals()){return null;}var c=null;if(r.supportsResultAlignment()){if(r.isTotalsAlignmentOnDefault()){a.putString("ResultAlignment","Default");}else{c=r.getResultAlignment();a.putString("ResultAlignment",f.QInAConverter.lookupAlignmentInA(c));}}if(c===f.ResultAlignment.STRUCTURE){var s=a.putNewList("ResultStructure");var d=r.getTotalsStructure();if(f.notNull(d)){for(var i=0;i<d.size();i++){var g=d.get(i);var h=s.addNewStructure();var j=g.getResultStructureElement();h.putString("Result",f.QInAConverter.lookupResultStructureElementInA(j));var v=g.getResultVisibility();h.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(v));}}}else if(r.supportsResultVisibility()){if(r.isTotalsVisibilityOnDefault()){a.putString("Visibility","Default");}else{var k=f.QInAConverter.lookupResultSetVisibilityInA(r.getResultVisibility());a.putString("Visibility",k);var l=r.getResultVisibilitySettings();if(f.notNull(l)){var n=a.putNewList("VisibilitySettings");while(l.hasNext()){var t=l.next();var o=n.addNewStructure();o.putString("ResultAlignment",f.QInAConverter.lookupAlignmentInA(t.getAlignment()));o.putString("Result",f.QInAConverter.lookupResultStructureElementInA(t.getElement()));o.putString("Visibility",f.QInAConverter.lookupResultSetVisibilityInA(t.getVisibility()));}f.XObjectExt.release(l);}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoTranslationsManager=function(){};f.QInARepoTranslationsManager.prototype=new f.QInARepository();f.QInARepoTranslationsManager.prototype._ff_c="QInARepoTranslationsManager";f.QInARepoTranslationsManager.prototype.getComponentType=function(){return f.OlapComponentType.MEASURE_TRANSLATIONS;};f.QInARepoTranslationsManager.prototype.getTagName=function(){return"Translations";};f.QInARepoTranslationsManager.prototype.importComponentWithStructure=function(a,b,m,p,c){var d=m;if(f.notNull(b)&&b.containsKey("CurrencyTranslations")){var e=b.getListByKey("CurrencyTranslations");if(f.notNull(e)){if(f.notNull(d)&&f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var n=g.getStringByKey("Name");var h=g.getStringByKey("Description");var j=d.getMeasureCurrencyTranslation(n);if(f.isNull(j)){j=d.addNewMeasureCurrencyTranslationBase(n,h);}a.importCurrencyTranslationElement(g,j,c);}}}}return d;};f.QInARepoTranslationsManager.prototype.exportComponentWithStructure=function(e,m,i,a){return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoUniversalDisplayHierarchies=function(){};f.QInARepoUniversalDisplayHierarchies.prototype=new f.QInARepository();f.QInARepoUniversalDisplayHierarchies.prototype._ff_c="QInARepoUniversalDisplayHierarchies";f.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies=function(u){var q=u.getQueryModel();var h=u.getHierarchies();var a=f.XList.create();var s=h.size();for(var i=0;i<s;i++){var b=h.get(i);if(b.getHierarchyDedicatedAxis()!==null){a.add(b.getHierarchyDedicatedAxis().getType());continue;}var c=f.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList(b.getDimensionNames(),q);if(f.notNull(c)&&!a.contains(c.getType())){b.setAxis(c);a.add(c.getType());}}for(var k=0;k<s;k++){var d=h.get(k);if(d.getHierarchyDedicatedAxis()===null){d.setAxis(a.contains(f.AxisType.ROWS)?q.getColumnsAxis():q.getRowsAxis());}}};f.QInARepoUniversalDisplayHierarchies.getAxisForDimensionList=function(d,q){if(f.notNull(d)){for(var i=0;i<d.size();i++){var a=q.getDimensionByNameFromExistingMetadata(d.get(i));if(f.notNull(a)){var b=a.getAxisType();if(b===f.AxisType.ROWS||b===f.AxisType.COLUMNS){return a.getAxis();}}}}return null;};f.QInARepoUniversalDisplayHierarchies.importHierarchy=function(i,u,h){var d=null;var a=0;var b=f.Alignment.DEFAULT_VALUE;var c=false;var n=h.getStringByKey("Name");var e=u.getByName(n);if(f.notNull(e)){c=e.isActive();b=e.getAlignment();a=e.getInitialDrillLevel();d=e.getDimensionNames();}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.containsKey("Active")){c=h.getBooleanByKeyExt("Active",false);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.containsKey("LowerLevelNodeAlignment")){b=f.QInAConverter.lookupLowerLevelNodeAlignment(h.getStringByKey("LowerLevelNodeAlignment"));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.containsKey("InitialDrillLevel")){a=h.getIntegerByKey("InitialDrillLevel");}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.containsKey("DimensionNames")){var g=h.getListByKey("DimensionNames");d=f.PrUtils.asListOfString(g);}var j=h.getBooleanByKeyExt("CustomDimensions",false);f.XObjectExt.assertNotNull(d);u.addHierarchy(n,d,a,b,c,null,j);};f.QInARepoUniversalDisplayHierarchies.prototype.getComponentType=function(){return f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES;};f.QInARepoUniversalDisplayHierarchies.prototype.importComponentWithStructure=function(a,b,m,p,c){var u=m;if(f.notNull(b)){var h=b.getByKey("UniversalDisplayHierarchies");if(f.notNull(h)&&h.isList()){var d=h;var s=d.size();for(var i=0;i<s;i++){f.QInARepoUniversalDisplayHierarchies.importHierarchy(a,u,d.getStructureAt(i));}}}f.QInARepoUniversalDisplayHierarchies.assignAxesToHierarchies(u);return u;};f.QInARepoUniversalDisplayHierarchies.prototype.exportComponentWithStructure=function(e,m,i,a){var u=m;if(f.notNull(u)){u.updateIncludedDimensions();var b=u.getChildrenIterator();if(b.hasNext()){var c=i.putNewList("UniversalDisplayHierarchies");while(b.hasNext()){var h=b.next();var s=e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.getModCounter()>0;if(s){this.exportHierarchy(e,c,h);}}}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoUniversalDisplayHierarchies.prototype.exportHierarchy=function(e,u,h){var d=true;if(h.isActive()&&!h.isDimensionListValid()){d=false;e.addError(f.ErrorCodes.INVALID_STATE,f.XStringUtils.concatenate3("Dimensions for UDH '",h.getName(),"' must be placed next to each other on the axis"));}var a=u.addNewStructure();a.putString("Name",h.getName());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.hasPropertyChanged(f.QUniversalDisplayHierarchyProperties.QY_INITIAL_DRILL_LEVEL)){a.putInteger("InitialDrillLevel",h.getInitialDrillLevel());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.hasPropertyChanged(f.QUniversalDisplayHierarchyProperties.QY_LOWER_LEVEL_NODE_ALIGNMENT)){a.putString("LowerLevelNodeAlignment",h.getAlignment().getName());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.hasPropertyChanged(f.QUniversalDisplayHierarchyProperties.QY_ACTIVE)){a.putBoolean("Active",h.isActive()&&d);}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||h.hasPropertyChanged(f.QUniversalDisplayHierarchyProperties.QY_DIMENSION_NAMES)){a.putNewList("DimensionNames").addAllStrings(h.getDimensionNames());}if(h.hasCustomDimensions()){a.putBoolean("CustomDimensions",true);}};f.QInARepoVarDimMember=function(){};f.QInARepoVarDimMember.prototype=new f.QInARepository();f.QInARepoVarDimMember.prototype._ff_c="QInARepoVarDimMember";f.QInARepoVarDimMember.prototype.getComponentType=function(){return f.VariableType.DIMENSION_MEMBER_VARIABLE;};f.QInARepoVarDimMember.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var s=b.isEnforcedDynamicValue()&&b.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(!s){var d=a.getStructureByKey("Selection");if(f.isNull(d)){b.setMemberFilter(null);}else{var e=i.importComponent(null,d,null,b,c);b.setMemberFilter(e);}}return b;};f.QInARepoVarDimMember.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());var s=b.isEnforcedDynamicValue()&&b.getQueryManager().isSuppressExitVariableValuesInRepoMode();if(b.hasMemberFilter()&&!s){var c=b.getMemberFilter();var d=e.exportComponent(null,c,null,a);if(f.notNull(d)){i.put("Selection",d);}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoVarOptionList=function(){};f.QInARepoVarOptionList.prototype=new f.QInARepository();f.QInARepoVarOptionList.prototype._ff_c="QInARepoVarOptionList";f.QInARepoVarOptionList.prototype.getComponentType=function(){return f.VariableType.OPTION_LIST_VARIABLE;};f.QInARepoVarOptionList.prototype.importComponentWithStructure=function(i,a,m,p,c){var o=m;var b=a.getListByKey("OptionValues");if(f.notNull(b)){var d;if(o.supportsMultipleValues()){o.clear();var l=b.size();for(var e=0;e<l;e++){d=b.getStringAt(e);o.addString(d);}}else if(b.size()===1){d=b.getStringAt(0);o.setString(d);}}return o;};f.QInARepoVarOptionList.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString("Name",v.getName());var b=i.putNewList("OptionValues");if(v.supportsMultipleValues()){var d=v.getValues();var l=d.size();for(var c=0;c<l;c++){var o=d.get(c);b.addString(o.getString());}}else{var g=v.getCurrentOption();if(f.notNull(g)){b.addString(g.getName());}}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoVarSimpleType=function(){};f.QInARepoVarSimpleType.prototype=new f.QInARepository();f.QInARepoVarSimpleType.prototype._ff_c="QInARepoVarSimpleType";f.QInARepoVarSimpleType.prototype.getComponentType=function(){return f.VariableType.SIMPLE_TYPE_VARIABLE;};f.QInARepoVarSimpleType.prototype.importComponentWithStructure=function(i,a,m,p,c){var s=m;if(s.supportsMultipleValues()){s.clear();}var v=s.getValueType();if(v.isNumber()){this.importNumericValues(i,a,s,v);}else if(v.isString()){this.importStringValues(a,s);}else if(v===f.XValueType.DATE){this.importDateValues(i,a,s);}else if(v===f.XValueType.TIME){this.importTimeValues(i,a,s);}else if(v===f.XValueType.DATE_TIME){this.importDateTimeValues(i,a,s);}else if(v===f.XValueType.BOOLEAN){this.importBooleanValues(a,s);}return s;};f.QInARepoVarSimpleType.prototype.getFirstValueAsString=function(v){var e=v.get(0);if(f.notNull(e)&&e.isString()){return e.getString();}return null;};f.QInARepoVarSimpleType.prototype.importDateTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDateTime(f.XDateTime.createDateTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDateTime(f.XDateTime.createDateTimeFromStringWithFlag(g,i.capabilities.supportsSapDate()));}}}};f.QInARepoVarSimpleType.prototype.importTimeValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var t=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(t)){s.addTime(f.XTime.createTimeFromStringWithFlag(t,i.capabilities.supportsSapDate()));}}}else if(c===1){var e=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.setTime(f.XTime.createTimeFromStringWithFlag(e,i.capabilities.supportsSapDate()));}}}};f.QInARepoVarSimpleType.prototype.importDateValues=function(i,a,s){var b=a.getListByKey("SimpleStringValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.getStringAt(d);if(f.XStringUtils.isNotNullAndNotEmpty(e)){s.addDate(f.QInARepoUtils.createDate(e));}}}else if(c===1){var g=this.getFirstValueAsString(b);if(f.XStringUtils.isNotNullAndNotEmpty(g)){s.setDate(f.QInARepoUtils.createDate(g));}}}};f.QInARepoVarSimpleType.prototype.importStringValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addString(a.getStringAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isString()){s.setString(e.getString());}}}};f.QInARepoVarSimpleType.prototype.importBooleanValues=function(i,s){var a=i.getListByKey("SimpleStringValues");if(f.notNull(a)){var b=a.size();if(s.supportsMultipleValues()){for(var c=0;c<b;c++){s.addBoolean(a.getBooleanAt(c));}}else if(b===1){var e=a.get(0);if(f.notNull(e)&&e.isBoolean()){s.setBoolean(e.asBoolean().getBoolean());}}}};f.QInARepoVarSimpleType.prototype.importNumericString=function(s,v,a){if(v===f.XValueType.INTEGER){s.addInteger(f.XInteger.convertFromString(a));}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){s.addDouble(f.XDouble.convertFromString(a));}else if(v===f.XValueType.LONG){s.addLong(f.XLong.convertFromString(a));}};f.QInARepoVarSimpleType.prototype.addIntegerValue=function(e,s,i){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(i)){s.addString(f.XInteger.convertToString(i));}else{s.addInteger(i);}};f.QInARepoVarSimpleType.prototype.addLongValue=function(e,s,l){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(l)){s.addString(f.XLong.convertToString(l));}else{s.addLong(l);}};f.QInARepoVarSimpleType.prototype.addDoubleValue=function(e,s,d){if(e.capabilities.supportsNumberAsString()&&!f.QInAExportUtil.isNumberSafe(d)){s.addString(f.XDouble.convertToString(d));}else{s.addDouble(d);}};f.QInARepoVarSimpleType.prototype.importNumericValues=function(i,a,s,v){var b=a.getListByKey("SimpleNumericValues");if(f.notNull(b)){var c=b.size();if(s.supportsMultipleValues()){for(var d=0;d<c;d++){var e=b.get(d);if(i.capabilities.supportsNumberAsString()&&f.notNull(e)&&e.getType()===f.PrElementType.STRING){this.importNumericString(s,v,b.getStringAt(d));continue;}if(v===f.XValueType.INTEGER){var g=b.getIntegerAt(d);s.addInteger(g);}else if(v===f.XValueType.DOUBLE||v===f.XValueType.DECIMAL_FLOAT){var h=b.getDoubleAt(d);s.addDouble(h);}else if(v===f.XValueType.LONG){var l=b.getLongAt(d);s.addLong(l);}}}else if(c===1){var n=b.get(0);if(f.notNull(n)&&n.isNumeric()){if(v===f.XValueType.INTEGER){s.setInteger(b.getIntegerAt(0));}else if(v===f.XValueType.DOUBLE){s.setDouble(b.getDoubleAt(0));}else if(v===f.XValueType.DECIMAL_FLOAT){s.setDecFloat(f.XDecFloatByDouble.create(b.getDoubleAt(0)));}else if(v===f.XValueType.LONG){s.setLong(b.getLongAt(0));}}}}};f.QInARepoVarSimpleType.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString("Name",v.getName());var b=v.getValueType();var s;if(b===f.XValueType.STRING||b===f.XValueType.DATE||b===f.XValueType.TIME||b===f.XValueType.DATE_TIME||b===f.XValueType.BOOLEAN||b.isSpatial()){s=i.putNewList("SimpleStringValues");}else if(b===f.XValueType.DOUBLE||b===f.XValueType.DECIMAL_FLOAT||b===f.XValueType.LONG||b===f.XValueType.INTEGER){s=i.putNewList("SimpleNumericValues");}else{e.addError(f.ErrorCodes.INVALID_DATATYPE,f.XStringUtils.concatenate3("SimpleTypeVariable '",v.getName(),"' not exported"));return null;}if(v.supportsMultipleValues()){this.exportMultipleValues(e,v,b,s);}else{this.exportSingleValue(e,v,b,s);}return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoVarSimpleType.prototype.exportSingleValue=function(e,v,a,s){var r=!v.hasValue()&&(e.getMode()===f.QModelFormat.INA_REPOSITORY||v.getQueryModel().getSystemType().isTypeOf(f.SystemType.VIRTUAL_INA));if(a===f.XValueType.INTEGER){if(r){s.addNull();}else{this.addIntegerValue(e,s,v.getInteger());}}else if(a===f.XValueType.LONG){if(r){s.addNull();}else{this.addLongValue(e,s,v.getLong());}}else if(a===f.XValueType.BOOLEAN){if(r){s.addNull();}else{s.addBoolean(v.getBoolean());}}else if(a===f.XValueType.DOUBLE||a===f.XValueType.DECIMAL_FLOAT){if(r){s.addNull();}else{this.addDoubleValue(e,s,v.getDouble());}}else{if(v.hasValue()){if(a===f.XValueType.STRING||a.isSpatial()){s.addString(v.getString());}else if(a===f.XValueType.DATE){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getDate()));}else if(a===f.XValueType.TIME){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getTime()));}else if(a===f.XValueType.DATE_TIME){s.addString(f.QInAExportUtil.dateTimeToString(e,v.getDateTime()));}}}};f.QInARepoVarSimpleType.prototype.exportMultipleValues=function(e,v,a,s){var m=v.getValues();var b=m.size();for(var i=0;i<b;i++){if(a===f.XValueType.INTEGER){var c=m.get(i);this.addIntegerValue(e,s,c.getInteger());}else if(a===f.XValueType.LONG){var l=m.get(i);this.addLongValue(e,s,l.getLong());}else if(a===f.XValueType.DOUBLE){var d=m.get(i);this.addDoubleValue(e,s,d.getDouble());}else if(a===f.XValueType.DECIMAL_FLOAT){var g=m.get(i);this.addDoubleValue(e,s,g.getDouble());}else if(a===f.XValueType.STRING){var h=m.get(i);s.addString(h.getString());}else if(a===f.XValueType.DATE||a===f.XValueType.TIME||a===f.XValueType.DATE_TIME){var j=m.get(i);s.addString(f.QInAExportUtil.dateTimeToString(e,j));}else if(a===f.XValueType.BOOLEAN){var k=m.get(i);s.addString(f.XBoolean.convertToString(k.getBoolean()));}else if(a.isSpatial()){var n=m.get(i);s.addString(n.toWKT());}}};f.QInaRepoCustomHierarchyDefinition=function(){};f.QInaRepoCustomHierarchyDefinition.prototype=new f.QInARepository();f.QInaRepoCustomHierarchyDefinition.prototype._ff_c="QInaRepoCustomHierarchyDefinition";f.QInaRepoCustomHierarchyDefinition.prototype.getComponentType=function(){return f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION;};f.QInaRepoCustomHierarchyDefinition.prototype.importComponentWithStructure=function(i,a,m,p,c){var h=null;var b=f.PrUtils.getListProperty(a,"Dimensions");var d=f.PrUtils.getStructureElement(b,0);if(f.notNull(d)){var s=d.getStringByKey("System");var e=d.getStringByKey("DataSource");var g=d.getStringByKey("Name");var j=d.getStructureByKey("Hierarchy");if(f.notNull(j)&&f.XStringUtils.isNotNullAndNotEmpty(s)&&f.XStringUtils.isNotNullAndNotEmpty(g)){var k=true;var l=i.getApplication();if(f.notNull(l)){var n=l.getSystemLandscape().getSystemDescription(s);k=f.isNull(n)?true:n.getSystemType().isTypeOf(f.SystemType.ABAP);}h=f.QCustomHierarchyDefinition.createByData(s,e,g,j.getStringByKey("Description"),k);h.setName(j.getStringByKey("Name"));this.addHierarchyNodesFromStructure(h,j.getStructureByKey("Nodes"));}}return h;};f.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyNodesFromStructure=function(h,n){var a=f.PrUtils.getListProperty(n,"NodeId");var b=f.PrUtils.getListProperty(n,"ParentId");var c=f.PrUtils.getListProperty(n,"NodeName");var d=f.PrUtils.getListProperty(n,"NodeType");var s=f.PrUtils.getListSize(a,0);if(f.PrUtils.isListEmpty(a)||f.PrUtils.isListEmpty(b)||f.PrUtils.isListEmpty(c)||f.PrUtils.isListEmpty(d)||b.size()!==s||c.size()!==s||d.size()!==s){return;}var e=f.XSimpleMap.create();for(var i=0;i<s;i++){var g=a.getIntegerAt(i);var j=c.getStringAt(i);var k=d.getStringAt(i);var l=b.getIntegerAt(i);var p=l===-1?h:e.getByKey(f.XIntegerValue.create(l));if(f.notNull(p)){if(f.XString.isEqual(k,"1HIER_NODE_SIMPLE")){e.put(f.XIntegerValue.create(g),p.addTextNode(j));}else{p.addMemberNode(j);}}}f.XObjectExt.release(e);};f.QInaRepoCustomHierarchyDefinition.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;var b=f.PrFactory.createStructure();b.putString("Name",c.getDimensionName());b.putString("System",c.getSystemName());b.putString("DataSource",c.getDataSourceName());var d=f.PrFactory.createStructure();this.exportCustomHierarchy(c,d);b.put("Hierarchy",d);var g=f.PrFactory.createStructure();var h=g.putNewList("Dimensions");h.add(b);return f.QInARepository.prototype.exportComponentWithStructure.call(this,e,m,g,a);};f.QInaRepoCustomHierarchyDefinition.prototype.exportCustomHierarchy=function(c,i){var e="";var n=c.getName();var a=c.getDescription();i.putString("Name",f.XStringUtils.isNotNullAndNotEmpty(n)?n:e);i.putString("Version",e);i.putString("DueDate",e);i.putString("Description",f.notNull(a)?a:e);i.putBoolean("IsTransient",true);i.putBoolean("NoRestNodes",true);i.put("Nodes",this.getHierarchyNodesAsStructure(c));};f.QInaRepoCustomHierarchyDefinition.prototype.getHierarchyNodesAsStructure=function(c){var s=f.PrFactory.createStructure();s.putNewList("NodeId");s.putNewList("NodeName");s.putNewList("Description");s.putNewList("NodeType");s.putNewList("ParentId");var n=c.getChildNodes();var a=n.size();for(var i=0;i<a;i++){this.addHierarchyElementToStructure(n.get(i),s,-1,c.getDimensionName());}return s;};f.QInaRepoCustomHierarchyDefinition.prototype.addHierarchyElementToStructure=function(e,s,p,d){var n=s.getListByKey("NodeId");var a=n.size();n.addInteger(a);s.getListByKey("NodeName").addString(e.getName());s.getListByKey("ParentId").addInteger(p);if(e.isMemberElement()){s.getListByKey("Description").addString("");s.getListByKey("NodeType").addString(e.isNode()?d:"");}else{s.getListByKey("Description").addString(e.getName());s.getListByKey("NodeType").addString("1HIER_NODE_SIMPLE");}if(e.isNode()){var c=e.getChildNodes();var b=c.size();for(var i=0;i<b;i++){this.addHierarchyElementToStructure(c.get(i),s,a,d);}}};f.QInARepoTotalsLegacy=function(){};f.QInARepoTotalsLegacy.prototype=new f.QInARepository();f.QInARepoTotalsLegacy.prototype._ff_c="QInARepoTotalsLegacy";f.QInARepoTotalsLegacy.prototype.getComponentType=function(){return f.OlapComponentType.TOTALS;};f.QInARepoTotalsLegacy.prototype.getTagName=function(){return"ResultStructureBag";};f.QInARepoTotalsLegacy.prototype.importComponentWithStructure=function(a,b,m,p,c){if(a.mode!==f.QModelFormat.INA_DATA_REINIT){var d=m;if(d.supportsResultVisibility()){var e=this.getResultStructure(b);var g=this.importResultAlignment(d,e);d.restoreTotalsVisibility(f.RestoreAction.DEFAULT_VALUE,false);var h=e.getListByKey("ResultStructure");if(f.notNull(h)){var j;if(d.supportsAdvancedResultStructure()&&g===f.ResultAlignment.STRUCTURE){j=d.getAdvancedResultStructure();j.clear();if(f.isNull(g)){d.setResultAlignmentBase(f.ResultAlignment.STRUCTURE,true);}}else{j=null;}var s=h.size();for(var i=0;i<s;i++){var r=h.getStructureAt(i);this.importResultStructureItem(r,d,j);}}}}return null;};f.QInARepoTotalsLegacy.prototype.importResultAlignment=function(c,i){if(c.supportsResultAlignment()){c.restoreTotalsAlignment(f.RestoreAction.DEFAULT_VALUE,false);var a=i.getStringByKey("ResultAlignment");if(f.XStringUtils.isNullOrEmpty(a)){return null;}var b=f.QInAConverter.lookupAlignment(a);c.setResultAlignmentBase(b,false);return b;}return null;};f.QInARepoTotalsLegacy.prototype.getResultStructure=function(i){var a=i.getStructureByKey("ResultStructureBag");if(f.isNull(a)){a=i.getStructureByKey("DefaultResultStructure");if(f.isNull(a)){return i;}}return a;};f.QInARepoTotalsLegacy.prototype.importResultStructureItem=function(r,c,a){var b=r.getStringByKey("Result");var e;if(f.XString.isEqual(b,"Members")){e=f.ResultStructureElement.MEMBERS;}else if(f.XString.isEqual(b,"Total")){e=f.ResultStructureElement.TOTAL;}else if(f.XString.isEqual(b,"TotalIncludedMembers")){e=f.ResultStructureElement.TOTAL_INCLUDED_MEMBERS;}else if(f.XString.isEqual(b,"TotalRemainingMembers")){e=f.ResultStructureElement.TOTAL_REMAINING_MEMBERS;}else{return;}var i=r.getStringByKey("Visibility");var v=f.QInAConverter.lookupResultSetVisibility(i);if(f.isNull(a)){c.setResultVisibilityByElement(e,v);}else{a.addWithVisibility(e,v);}};f.QInARepoTotalsLegacy.prototype.exportComponentWithStructure=f.noSupport;f.QInA=function(){};f.QInA.prototype=new f.MessageManager();f.QInA.prototype._ff_c="QInA";f.QInA.s_lookupByFormat=null;f.QInA.staticSetup=function(){f.QInA.s_lookupByFormat=f.XHashMapByString.create();f.QInA.addAllFormats();f.QInA.addAllTypes();};f.QInA.addInAComponent=function(i){var c=i.getComponentType().getName();var m=i.getModelFormat();if(f.isNull(m)){m=f.QModelFormat.INA_DATA;}var u=m.getUsages();var s=u.size();for(var k=0;k<s;k++){var o=u.get(k);var a=o.getName();var l=f.QInA.s_lookupByFormat.getByKey(a);var b=l.getByKey(c);f.XObjectExt.assertNotNullExt(b,f.XStringUtils.concatenate2("Container not defined: ",c));b.add(i);}};f.QInA.addAllTypes=function(){f.QInA.addType(f.OlapComponentType.CONDITIONS_MANAGER);f.QInA.addType(f.OlapComponentType.CONDITION);f.QInA.addType(f.OlapComponentType.CONDITIONS_THRESHOLD);f.QInA.addType(f.OlapComponentType.CONDITIONS);f.QInA.addType(f.OlapComponentType.QUERY_MODEL);f.QInA.addType(f.OlapComponentType.DATA_CELL);f.QInA.addType(f.OlapComponentType.AXIS);f.QInA.addType(f.OlapComponentType.SORT_MANAGER);f.QInA.addType(f.OlapComponentType.LAYER_MODEL);f.QInA.addType(f.OlapComponentType.DATA_SOURCE);f.QInA.addType(f.OlapComponentType.SELECTOR);f.QInA.addType(f.OlapComponentType.ATTRIBUTE_CONTAINER);f.QInA.addType(f.OlapComponentType.ATTRIBUTE);f.QInA.addType(f.OlapComponentType.DRILL_MANAGER);f.QInA.addType(f.OlapComponentType.DRILL_OPERATION);f.QInA.addType(f.OlapComponentType.CURRENCY_TRANSLATION_MANAGER);f.QInA.addType(f.OlapComponentType.CURRENCY_TRANSLATION_LIST);f.QInA.addType(f.OlapComponentType.CURRENCY_TRANSLATION_ITEM);f.QInA.addType(f.OlapComponentType.MEASURE_TRANSLATIONS);f.QInA.addType(f.OlapComponentType.FIELD_CONTAINER);f.QInA.addType(f.OlapComponentType.FIELD_LIST);f.QInA.addType(f.OlapComponentType.FIELD);f.QInA.addType(f.OlapComponentType.RESULT_STRUCTURE);f.QInA.addType(f.OlapComponentType.DATA_CELLS);f.QInA.addType(f.OlapComponentType.TOTALS);f.QInA.addType(f.OlapComponentType.EXCEPTION_MANAGER);f.QInA.addType(f.OlapComponentType.FORMULA_EXCEPTION_MANAGER);f.QInA.addType(f.OlapComponentType.FORMULA_EXCEPTION);f.QInA.addType(f.OlapComponentType.QUERY_SETTINGS);f.QInA.addType(f.OlapComponentType.HIERARCHY);f.QInA.addType(f.OlapComponentType.HIERARCHY_MANAGER);f.QInA.addType(f.OlapComponentType.CUSTOM_HIERARCHY_REPOSITORY);f.QInA.addType(f.OlapComponentType.CUSTOM_HIERARCHY_DEFINITION);f.QInA.addType(f.OlapComponentType.AXES_SETTINGS);f.QInA.addType(f.OlapComponentType.PROPERTY);f.QInA.addType(f.OlapComponentType.PLANNING_COMMAND);f.QInA.addType(f.OlapComponentType.UNIVERSAL_DISPLAY_HIERARCHIES);f.QInA.addType(f.OlapComponentType.QUERY_CELLS);f.QInA.addType(f.MemberType.DRILL_PATH_ELEMENT);f.QInA.addType(f.MemberType.MEMBER);f.QInA.addType(f.MemberType.SINGLE_MEMBER_EXIT);f.QInA.addType(f.MemberType.MEMBER_EXITS);f.QInA.addType(f.MemberType.LITERAL_MEMBER);f.QInA.addType(f.MemberType.BASIC_MEASURE);f.QInA.addType(f.MemberType.FORMULA);f.QInA.addType(f.MemberType.SERVER_BASED_FORMULA);f.QInA.addType(f.MemberType.RESTRICTED_MEASURE);f.QInA.addType(f.MemberType.VARIANCE);f.QInA.addType(f.MemberType.EXCEPTION_AGGREGATION);f.QInA.addType(f.MemberType.CURRENCY_MEASURE);f.QInA.addType(f.MemberType.HIERARCHY_NODE);f.QInA.addType(f.MemberType.RESULT);f.QInA.addType(f.MemberType.CONDITION_RESULT);f.QInA.addType(f.MemberType.CONDITION_OTHERS_RESULT);f.QInA.addType(f.MemberType.MEASURE);f.QInA.addType(f.MemberType.ABSTRACT_MEMBER);f.QInA.addType(f.OlapComponentType.EXCEPTION_AGGREGATION_MANAGER);f.QInA.addType(f.OlapComponentType.FORMULA_CONSTANT);f.QInA.addType(f.OlapComponentType.FORMULA_ITEM_MEMBER);f.QInA.addType(f.OlapComponentType.FORMULA_OPERATION);f.QInA.addType(f.OlapComponentType.FORMULA_FUNCTION);f.QInA.addType(f.OlapComponentType.MEMBERS);f.QInA.addType(f.OlapComponentType.DIMENSION_SORTING);f.QInA.addType(f.OlapComponentType.FIELD_SORTING);f.QInA.addType(f.OlapComponentType.DATA_CELL_SORTING);f.QInA.addType(f.OlapComponentType.COMPLEX_SORTING);f.QInA.addType(f.OlapComponentType.MEASURE_SORTING);f.QInA.addType(f.OlapComponentType.GENERIC_SORTING);f.QInA.addType(f.OlapComponentType.LAYER);f.QInA.addType(f.OlapComponentType.LAYER_SYNC_DEFINITION);f.QInA.addType(f.OlapComponentType.LAYER_REFERENCE_DEFINITION);f.QInA.addType(f.OlapComponentType.ABSTRACT_LAYER_MODEL);f.QInA.addType(f.OlapComponentType.VARIABLE_MANAGER);f.QInA.addType(f.OlapComponentType.VARIABLE_CONTAINER);f.QInA.addType(f.OlapComponentType.VARIABLE_LIST);f.QInA.addType(f.VariableType.TEXT_VARIABLE);f.QInA.addType(f.VariableType.FORMULA_VARIABLE);f.QInA.addType(f.VariableType.HIERARCHY_NODE_VARIABLE);f.QInA.addType(f.VariableType.HIERARCHY_NAME_VARIABLE);f.QInA.addType(f.VariableType.HIERARCHY_VARIABLE);f.QInA.addType(f.VariableType.OPTION_LIST_VARIABLE);f.QInA.addType(f.VariableType.DIMENSION_MEMBER_VARIABLE);f.QInA.addType(f.VariableType.SIMPLE_TYPE_VARIABLE);f.QInA.addType(f.VariableType.ANY_VARIABLE);f.QInA.addType(f.OlapComponentType.VARIABLE_CONTEXT);f.QInA.addType(f.OlapComponentType.OLAP_FILTER_MANAGER);f.QInA.addType(f.OlapComponentType.FILTER_CAPABILITY_GROUP);f.QInA.addType(f.OlapComponentType.FILTER_CAPABILITY);f.QInA.addType(f.OlapComponentType.FILTER_EXPRESSION);f.QInA.addType(f.OlapComponentType.FILTER_LITERAL);f.QInA.addType(f.OlapComponentType.FILTER_FIXED);f.QInA.addType(f.OlapComponentType.FILTER_DYNAMIC);f.QInA.addType(f.OlapComponentType.FILTER_VISIBILITY);f.QInA.addType(f.OlapComponentType.FILTER_CELL_VALUE_OPERAND);f.QInA.addType(f.FilterComponentType.CARTESIAN_LIST);f.QInA.addType(f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST);f.QInA.addType(f.FilterComponentType.CARTESIAN_PRODUCT);f.QInA.addType(f.FilterComponentType.AND);f.QInA.addType(f.FilterComponentType.OR);f.QInA.addType(f.FilterComponentType.NOT);f.QInA.addType(f.FilterComponentType.SPATIAL_FILTER);f.QInA.addType(f.FilterComponentType.BOOLEAN_ALGEBRA);f.QInA.addType(f.FilterComponentType.OPERATION);f.QInA.addType(f.FilterComponentType.FILTER_MEASURE_BASED);f.QInA.addType(f.FilterComponentType.FILTER_ACROSS_MODELS);f.QInA.addType(f.OlapComponentType.FILTER_ELEMENT);f.QInA.addType(f.OlapComponentType.DIMENSION_CONTEXT);f.QInA.addType(f.OlapComponentType.DIMENSIONS);f.QInA.addType(f.DimensionType.PRESENTATION);f.QInA.addType(f.DimensionType.CONTAINER);f.QInA.addType(f.DimensionType.ATTRIBUTE_DIM);f.QInA.addType(f.DimensionType.CURRENCY);f.QInA.addType(f.DimensionType.UNIT);f.QInA.addType(f.DimensionType.TIME);f.QInA.addType(f.DimensionType.DATE);f.QInA.addType(f.DimensionType.HIERARCHY_VERSION);f.QInA.addType(f.DimensionType.HIERARCHY_NAME);f.QInA.addType(f.DimensionType.SEARCH_DIMENSION);f.QInA.addType(f.DimensionType.VERSION);f.QInA.addType(f.DimensionType.ACCOUNT);f.QInA.addType(f.DimensionType.GIS_DIMENSION);f.QInA.addType(f.DimensionType.SEARCH_RESULT);f.QInA.addType(f.DimensionType.SUGGEST_TERM);f.QInA.addType(f.DimensionType.SUGGEST_SCOPE);f.QInA.addType(f.DimensionType.SUGGEST_ATTRIBUTE);f.QInA.addType(f.DimensionType.MEASURE_STRUCTURE);f.QInA.addType(f.DimensionType.SECONDARY_STRUCTURE);f.QInA.addType(f.DimensionType.ABSTRACT_STRUCTURE);f.QInA.addType(f.DimensionType.DIMENSION);f.QInA.addType(f.DimensionType.CALCULATED_DIMENSION);f.QInA.addType(f.DimensionType.FORMULA_CALCULATED_DIMENSION);f.QInA.addType(f.OlapComponentType.ABSTRACT_DIMENSION);f.QInA.addType(f.FilterComponentType.TUPLE);f.QInA.addType(f.FilterComponentType.VIRTUAL_DATASOURCE);f.QInA.addType(f.OlapComponentType.MODELLER_CURRENCY_TRANSLATION);f.QInA.addType(f.OlapComponentType.MODELLER_DIMENSIONS);f.QInA.addType(f.OlapComponentType.MODELLER_METADATA_PROPERTIES);f.QInA.addType(f.OlapComponentType.MODELLER_VARIABLES);f.QInA.addType(f.OlapComponentType.QUERY_MANAGER);f.QInA.addType(f.OlapComponentType.QUERY_SERVICE_CONFIG);f.QInA.addType(f.OlapComponentType.COMPONENT_LIST);f.QInA.addType(f.OlapComponentType.QUERY_CONTEXT);f.QInA.addType(f.OlapComponentType.OLAP);f.QInA.addType(f.OlapComponentType.BLENDABLE_QUERY_MANAGER);};f.QInA.addType=function(c){var a=f.QModelFormat.getAllModelFormats();var s=a.size();for(var i=0;i<s;i++){var n=a.get(i).getName();var l=f.QInA.s_lookupByFormat.getByKey(n);l.add(f.QInAComponentContainer.create(c));}};f.QInA.addAllFormats=function(){var a=f.QModelFormat.getAllModelFormats();var s=a.size();for(var i=0;i<s;i++){var l=f.XListOfNameObject.create();var n=a.get(i).getName();f.QInA.s_lookupByFormat.put(n,l);}};f.QInA.removeEmptyContainers=function(){var a=f.QModelFormat.getAllModelFormats();var b=a.size();for(var i=0;i<b;i++){var l=f.QInA.s_lookupByFormat.getByKey(a.get(i).getName());for(var k=0;k<l.size();){var c=l.get(k);if(c.isEmpty()){l.removeAt(k);}else{k++;}}}};f.QInA.prototype.m_application=null;f.QInA.prototype.mode=null;f.QInA.prototype.m_originalMode=null;f.QInA.prototype.capabilities=null;f.QInA.prototype.variableProcessingDirective=null;f.QInA.prototype.modelContext=null;f.QInA.prototype.setupImportExport=function(a,m,c,b){var s=null;if(f.notNull(a)){s=a.getSession();}this.setupSessionContext(s);this.setApplication(a);this.mode=m;this.m_originalMode=m;this.modelContext=b;if(f.isNull(c)){this.capabilities=f.QCapabilities.create();this.capabilities.setSupportsSetOperand(true);this.capabilities.setSupportsConvertToFlatFilter(true);this.capabilities.setSupportsCummulative(true);this.capabilities.setSupportsExtendedSort(true);this.capabilities.setSupportsSpatialFilter(true);this.capabilities.setSupportsSpatialFilterSrid(true);this.capabilities.setSupportsSpatialTransformation(true);this.capabilities.setSupportsMemberVisibility(true);this.capabilities.setSupportsCustomDimensionMemberExecutionStep(true);this.capabilities.setSupportsExtendedDimensions(true);this.capabilities.setSupportsIgnoreExternalDimensions(true);this.capabilities.setSupportsSupplements(true);}else{this.capabilities=c;}};f.QInA.prototype.lookupInAComponent=function(o,a){var c=null;var b=f.QInA.s_lookupByFormat.getByKey(this.mode.getName());var d=b.getByKey(o.getName());if(f.isNull(d)){var s=b.size();for(var i=0;i<s;i++){d=b.get(i);if(o.isTypeOf(d.getComponentType())){c=d.get(a);break;}}}else{c=d.get(a);}if(f.isNull(c)){this.addError(0,f.XStringUtils.concatenate2("Cannot find serialization/deserialization component for type: ",o.getName()));}return c;};f.QInA.prototype.getApplication=function(){return f.XWeakReferenceUtil.getHardRef(this.m_application);};f.QInA.prototype.setApplication=function(a){this.m_application=f.XWeakReferenceUtil.getWeakRef(a);};f.QInA.prototype.getMode=function(){return this.mode;};f.QInA.prototype.getOriginalMode=function(){return this.m_originalMode;};f.QInA.prototype.isAbap=function(c){var m=c.getModelCapabilities();if(f.notNull(m)){var s=m.getSystemType();if(f.notNull(s)){return s.isTypeOf(f.SystemType.ABAP);}}return false;};f.QInA.prototype.isVirtualInA=function(c){return f.notNull(c)&&c.getModelCapabilities().getSystemType().isTypeOf(f.SystemType.VIRTUAL_INA)&&!this.getMode().isTypeOf(f.QModelFormat.INA_DATA_BLENDING_SOURCE);};f.QInARepoCalculatedDimension=function(){};f.QInARepoCalculatedDimension.prototype=new f.QInARepoDimension();f.QInARepoCalculatedDimension.prototype._ff_c="QInARepoCalculatedDimension";f.QInARepoCalculatedDimension.prototype.getComponentType=function(){return f.DimensionType.CALCULATED_DIMENSION;};f.QInARepoCalculatedDimension.prototype.importComponentWithStructure=function(i,a,m,p,c){var q=c.getQueryModel();var d=m;var b=a.getStringByKey("Name");if(f.isNull(d)&&f.notNull(q)){d=q.getDimensionManagerBase().getDimensionByNameInternal(b);}if(f.isNull(d)){d=f.QCalculatedDimension._createCalculatedDimension(c,p,b);}d.setDimensionType(f.DimensionType.CALCULATED_DIMENSION);d.setName(b);d.setTopEntries(a.getIntegerByKeyExt("Top",0));d.setSkipEntries(a.getIntegerByKeyExt("Skip",0));var e=a.getStructureByKey("DataSource");d.setPreQueryName(e.getStringByKey("ObjectName"));d.setJoinType(f.JoinType.lookup(a.getStringByKey("JoinType")));var g=a.getListByKey("JoinFields");var s=g.size();var h;for(h=0;h<s;h++){var j=g.getStructureAt(h);d.addJoinFieldByString(j.getStringByKey("JoinFieldName"),j.getStringByKey("JoinFieldNameInReferencedData"));}var k=a.getListByKey("FieldMappings");s=k.size();for(h=0;h<s;h++){var l=k.getStructureAt(h);d.addFieldMappingByString(l.getStringByKey("FieldName"),l.getStringByKey("FieldNameInReferencedData"));if(l.getStringByKey("CalculatedDimensionFieldValueType")!==null){var n=d.getFieldByName(l.getStringByKey("FieldName"));n.setValueType(f.QInAConverter.lookupValueType(l.getStringByKey("CalculatedDimensionFieldValueType")));}}this.importFieldsLayout(i,a,d,c);i.importTotals(a,d.getResultStructureControllerBase(),c);return d;};f.QInARepoCalculatedDimension.prototype.exportComponentWithStructure=function(e,m,a,b){var d=m;a.putString("Name",d.getName());var t=d.getAxisType();a.putString("Axis",f.QInAConverter.lookupAxisTypeInA(t));var c=d.getTopEntries();if(c>0){a.putInteger("Top",c);}var s=d.getSkipEntries();if(s>0){a.putInteger("Skip",s);}var g=a.putNewStructure("DataSource");g.putString("ObjectName",d.getPreQueryName());g.putString("Type","Query");a.putString("JoinType",d.getJoinType().getName());var h=a.putNewList("JoinFields");var j=d.getJoinFields();var k=j.size();var i;for(i=0;i<k;i++){var l=j.get(i);var n=h.addNewStructure();n.putString("JoinFieldName",l.getLocaleFieldName());n.putString("JoinFieldNameInReferencedData",l.getReferencedFieldName());}var o=a.putNewList("FieldMappings");var p=d.getFieldMappings();k=p.size();for(i=0;i<k;i++){var q=p.get(i);var r=o.addNewStructure();r.putString("FieldName",q.getLocaleFieldName());r.putString("FieldNameInReferencedData",q.getReferencedFieldName());var u=q.getLocaleFieldName();if(d.getFieldByName(u).getValueType()!==f.XValueType.STRING){var v=f.QInAConverter.lookupValueTypeInA(d.getFieldByName(u).getValueType());r.putString("CalculatedDimensionFieldValueType",v);}}this.exportFieldLayout(e,a,d);e.exportTotals(d,a);return f.QInARepoDimension.prototype.exportComponentWithStructure.call(this,e,m,a,b);};f.QInARepoFilterConvertedTimeCartesianList=function(){};f.QInARepoFilterConvertedTimeCartesianList.prototype=new f.QInARepoFilterCartesianList();f.QInARepoFilterConvertedTimeCartesianList.prototype._ff_c="QInARepoFilterConvertedTimeCartesianList";f.QInARepoFilterConvertedTimeCartesianList.prototype.getComponentType=function(){return f.FilterComponentType.CONVERTED_TIME_CARTESIAN_LIST;};f.QInARepoFilterConvertedTimeCartesianList.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=null;if(f.notNull(p)){var d=p;b=d.getFilterExpression();}var e=m;if(f.isNull(e)){e=f.notNull(b)?f.QFactory.createFilterConvertedTimeCartesianList(b):f.QFactory.createFilterConvertedTimeCartesianList(c);}e.setIsSingleValueSourceCartesianList(a.getBooleanByKey("isSingleValueSource"));var h=a.getStringByKey("LevelType");if(f.notNull(h)){e.setHierarchyLevelType(f.HierarchyLevelType.lookup(h));}return f.QInARepoFilterCartesianList.prototype.importComponentWithStructure.call(this,i,a,e,p,c);};f.QInARepoFilterConvertedTimeCartesianList.prototype.exportComponentWithStructure=function(e,m,i,a){f.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,e,m,i,a);var c=m;i.putBoolean("isSingleValueSource",c.isSingleValueSourceCartesianList());if(c.getHierarchyLevelType()!==null){i.putString("LevelType",c.getHierarchyLevelType().getName());}return f.QInARepoFilterCartesianList.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterDynamic=function(){};f.QInARepoFilterDynamic.prototype=new f.QInARepoFilter();f.QInARepoFilterDynamic.prototype._ff_c="QInARepoFilterDynamic";f.QInARepoFilterDynamic.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_DYNAMIC;};f.QInARepoFilterDynamic.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=a.getStructureByKey("DynamicFilter");if(f.isNull(b)){b=a.getStructureByKey("Filter");}var d=p;var e=null;if(f.notNull(d)){d.setIgnoreInternalNonMeasureFilters(a.getBooleanByKeyExt("IgnoreInternalNonMeasureFilters",false));if(a.containsKey("FlattenHierarchyNodeFiltersFromVariables")){d.setFlattenHierarchyNodeFiltersFromVariables(a.getBooleanByKey("FlattenHierarchyNodeFiltersFromVariables"));}if(d.isDynamicFilterInitialized()){e=d.getDynamicFilter();e.setComplexRoot(null);if(e.getModelCapabilities().supportsCellValueOperand()){e.setIsSuppressingNulls(false);}}d.resetEffectiveFilter();}if(f.notNull(b)&&!b.isEmpty()){e=i.importFilterExpression(e,b,d,c);}if(f.notNull(d)){d.setDynamicFilter(e);}if(f.notNull(e)){e.setPreserveDuringSubmit(true);}return e;};f.QInARepoFilterDynamic.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var c=b;var d=c;i.putBoolean("IgnoreInternalNonMeasureFilters",d.isIgnoreInternalNonMeasureFilter());i.putBoolean("FlattenHierarchyNodeFiltersFromVariables",d.isFlattenHierarchyNodeFiltersFromVariables());var g=null;if(d.isDynamicFilterInitialized()){g=d.getDynamicFilter();}var q=c.getQueryModel();var h=e.isAbap(c);var j;if(h){j="Filter";}else{j="DynamicFilter";}var u=f.notNull(e.variableProcessingDirective)&&q.getModelCapabilities().supportsVariableMasking();if(u){var k=e.exportFilterExpression(g);if(f.notNull(k)){i.put(j,k);}}else{var t=null;if(d.isTmpFilterInitialized()){t=d.getTmpFilter();}var l=this.exportFilter(e,d,g,d.getLinkedFilters(),t);if(f.notNull(l)){i.put(j,l);}}return f.QInARepoFilter.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoFilterVisibility=function(){};f.QInARepoFilterVisibility.prototype=new f.QInARepoFilter();f.QInARepoFilterVisibility.prototype._ff_c="QInARepoFilterVisibility";f.QInARepoFilterVisibility.prototype.getComponentType=function(){return f.OlapComponentType.FILTER_VISIBILITY;};f.QInARepoFilterVisibility.prototype.getTagName=function(){return"VisibilityFilter";};f.QInARepoFilterVisibility.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=p;if(f.notNull(b)&&b.isVisibilityFilterInitialized()){var d=b.getVisibilityFilter();d.setComplexRoot(null);if(d.getModelCapabilities().supportsCellValueOperand()){d.setIsSuppressingNulls(false);}}var s=null;if(f.notNull(a)){s=i.importFilterExpression(null,a,b,c);if(f.notNull(b)&&f.notNull(s)){b.setVisibilityFilter(s);}}return s;};f.QInARepoFilterVisibility.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;if(b.getModelCapabilities().supportsVisibilityFilter()){var t=null;if(b.isTmpVisibilityFilterInitialized()){t=b.getTmpVisibilityFilter();}var v=null;if(b.isVisibilityFilterInitialized()){v=b.getVisibilityFilter();}return this.exportFilter(e,b,v,b.getLinkedVisibilityFilters(),t);}return null;};f.QInARepoFilterVisibility.prototype.isValidFilterExpression=function(a){return f.notNull(a);};f.QInARepoHierarchyManager=function(){};f.QInARepoHierarchyManager.prototype=new f.QInARepoHierarchy();f.QInARepoHierarchyManager.prototype._ff_c="QInARepoHierarchyManager";f.QInARepoHierarchyManager.prototype.getComponentType=function(){return f.OlapComponentType.HIERARCHY_MANAGER;};f.QInARepoHierarchyManager.prototype.importComponentWithStructure=function(i,a,m,p,c){var h=m;return f.QInARepoHierarchy.prototype.importComponentWithStructure.call(this,i,a,h.getDimension(),p,c);};f.QInARepoHierarchyManager.prototype.exportComponentWithStructure=function(e,m,i,a){var h=m;return f.QInARepoHierarchy.prototype.exportComponentWithStructure.call(this,e,h.getDimension(),i,a);};f.QInARepoMemberBasicMeasure=function(){};f.QInARepoMemberBasicMeasure.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberBasicMeasure.prototype._ff_c="QInARepoMemberBasicMeasure";f.QInARepoMemberBasicMeasure.getNameFromOperand=function(i){var m=i.getStructureByKey("MemberOperand");if(f.notNull(m)){var a=f.XString.isEqual(m.getStringByKey("AttributeName"),"Measures");var b=f.QInAConverter.lookupComparison(m.getStringByKey("Comparison"))===f.ComparisonOperator.EQUAL;if(a&&b){return m.getStringByKey("Value");}}return null;};f.QInARepoMemberBasicMeasure.getNameForImport=function(i,d){var m=i.getStringByKey("Name");if(f.isNull(m)&&f.notNull(d)){var k=d.getKeyField();var a=k.getName();return i.getStringByKey(a);}return m;};f.QInARepoMemberBasicMeasure.getText=function(i,d){var m=i.getStringByKey("Description");if(f.isNull(m)&&f.notNull(d)){var t=d.getTextField();if(f.notNull(t)){var k=t.getName();return i.getStringByKey(k);}}return m;};f.QInARepoMemberBasicMeasure.prototype.getComponentType=function(){return f.MemberType.BASIC_MEASURE;};f.QInARepoMemberBasicMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;if(f.isNull(d)){d=c.getDimensionAccessor().getDimensionByNameFromExistingMetadata(a.getStringByKey("Dimension"));}var n=f.QInARepoMemberBasicMeasure.getNameForImport(a,d);var b=f.QInARepoMemberBasicMeasure.getText(a,d);if(f.XStringUtils.isNullOrEmpty(n)){n=f.QInARepoMemberBasicMeasure.getNameFromOperand(a);}var e=m;if(f.isNull(e)){e=d.getStructureMember(n);if(f.isNull(e)){if(a.getBooleanByKeyExt("Extended",true)){e=f.QBasicMeasure._createBasicMeasure(c,d);if(d.getQueryModel()!==null&&i.isAbap(d.getQueryModel())){e.setNotFromMetadata();}}}}else{e.setDimension(d);}if(f.notNull(e)){e.setName(n);var o=a.getBooleanByKeyExt("OverrideDescription",false);if(o){if(f.XStringUtils.isNullOrEmpty(b)){if(f.XStringUtils.isNullOrEmpty(e.getOriginalText())){b=n;}else{b=e.getText();}}if(!f.XString.isEqual(b,e.getOriginalText())){var t=d.getTextField();if(f.notNull(t)){d.setAlternativeFieldValue(false,n,t.getName(),f.XStringValue.create(b),null);}}}if(f.notNull(b)&&(e.getOriginalText()===null||o)){e.setText(b);}e.initializeFieldValues();f.QInARepoMemberAbstract.importGenericMemberAbstractProperties(i,e,a);}return e;};f.QInARepoMemberBasicMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;var d=b.getDimension();if(d.getDimensionType()===f.DimensionType.ACCOUNT){i.putString("Name",b.getName());return i;}var t=b.getOriginalText();if(f.notNull(t)){i.putString("Description",t);}i.putString("Dimension",d.getName());var c=f.PrFactory.createStructure();c.putString("AttributeName","Measures");i.put("MemberOperand",c);var q=b.getQueryModel();if(q.isBasicMeasureAggregationExportedInRepo()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&b.hasPropertyChanged(f.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var g=b.getAggregationType();f.QInARepoUtils.setNameIfNotNull(i,"Aggregation",g);}if(!b.getModelCapabilities().supportsExceptionAggregationDimsFormulas()){var h=b.getAggregationDimensionName();if(f.notNull(h)){i.putString("AggregationDimension",h);}}if(!e.capabilities.supportsExtendedSort()&&!e.isVirtualInA(q)){var j=q.getSortingManager().getMeasureSorting(b,false);if(f.isNull(j)){i.putInteger("SortOrder",0);}else{i.putInteger("SortOrder",f.QInAConverter.lookupSortDirectionInA(j.getDirection()));}}var v=b.getKeyFieldValue();c.putString("Comparison",f.QInAConverter.lookupComparisonInA(f.ComparisonOperator.EQUAL));f.QInARepoUtils.exportValue(e,"Value",c,v,v.getValueType());f.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,e,b,i);if(q.isBasicMeasureSettingsExportedInRepo()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA){if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",f.QInAConverter.lookupUnitTypeInA(b.getUnitType()));}i.putStringNotNull("UnitFixed",b.getUnitFixed());i.putStringNotNull("UnitName",b.getUnitName());i.putStringNotNull("UnitTextName",b.getUnitTextName());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",f.QInAConverter.lookupValueTypeInA(b.getDataType()));}}return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberCurrency=function(){};f.QInARepoMemberCurrency.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberCurrency.prototype._ff_c="QInARepoMemberCurrency";f.QInARepoMemberCurrency.prototype.getComponentType=function(){return f.MemberType.CURRENCY_MEASURE;};f.QInARepoMemberCurrency.prototype.newModelComponent=function(a,o,p,c){var n=f.QCurrencyMeasure._createCurrencyMeasure(c,null);n.setParent(p);return n;};f.QInARepoMemberCurrency.prototype.importComponentWithStructure=function(i,a,m,p,c){var b=m;var d=p;var n=a.getStringByKey("Name");var e=a.getStringByKey("Description");if(f.isNull(b)){b=d.addNewCurrencyMeasure(n,e);}else{b.setDimension(d);b.setName(n);b.setText(e);}f.QInARepoMemberAbstract.importGenericMemberAbstractProperties(i,b,a);b.setBaseMeasureName(a.getStringByKey("BaseMeasureName"));if(a.containsKey("CurrencyTranslationName")){b.setCurrencyTranslationName(a.getStringByKey("CurrencyTranslationName"));}var g=b.getLocalCurrencyTranslation();var l=a.getStructureByKey("CurrencyTranslation");if(f.isNull(l)){b.setLocalCurrency();}else{i.importCurrencyTranslationElement(l,g,c);}b.setAutoSignFlip(a.getBooleanByKey("AutoSignFlip"));return b;};f.QInARepoMemberCurrency.prototype.exportComponentWithStructure=function(e,m,i,a){var c=m;i.putString("Name",c.getName());i.putString("Description",c.getOriginalText());i.putStringNotNullAndNotEmpty("BaseMeasureName",c.getBaseMeasureName());i.putStringNotNullAndNotEmpty("CurrencyTranslationName",c.getCurrencyTranslationName());if(!c.isLocalCurrency()){var s=c.getLocalCurrencyTranslation();var b=i.putNewStructure("CurrencyTranslation");e.exportCurrencyTranslationElement(s,b);}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)){if(c.isAutoSignFlip()||c.hasPropertyChanged(f.QStructureMemberProperties.QY_AUTO_SIGN_FLIP)&&e.mode===f.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("AutoSignFlip",c.isAutoSignFlip());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",f.QInAConverter.lookupUnitTypeInA(c.getUnitType()));}i.putStringNotNull("UnitFixed",c.getUnitFixed());i.putStringNotNull("UnitName",c.getUnitName());i.putStringNotNull("UnitTextName",c.getUnitTextName());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||c.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",f.QInAConverter.lookupValueTypeInA(c.getDataType()));}f.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,e,c,i);return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberExceptionAggregationMeasure=function(){};f.QInARepoMemberExceptionAggregationMeasure.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberExceptionAggregationMeasure.prototype._ff_c="QInARepoMemberExceptionAggregationMeasure";f.QInARepoMemberExceptionAggregationMeasure.prototype.getComponentType=function(){return f.MemberType.EXCEPTION_AGGREGATION;};f.QInARepoMemberExceptionAggregationMeasure.prototype.newModelComponent=function(a,o,p,c){var n=f.QExceptionAggregationMeasure._createExceptionAggregationMeasure(c,null);n.setParent(p);return n;};f.QInARepoMemberExceptionAggregationMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var e=m;var d=p;var n=a.getStringByKey("Name");var b=a.getStringByKey("Description");if(f.isNull(e)){e=d.addNewExceptionAggregationMeasure(n,b);}else{e.setDimension(d);e.setName(n);e.setText(b);}e.setMeasure(a.getStringByKey("MeasureName"));if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasStringByKey("ConditionType")){e.setConditionType(f.ExceptionAggregationConditionType.lookup(a.getStringByKey("ConditionType")));}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("ExceptionAggregationOnSelectionEnabled")){e.setIsExceptionAggregationOnSelectionEnabled(a.getBooleanByKey("ExceptionAggregationOnSelectionEnabled"));}var g=e.getFilter();var h=null;var j=a.getStructureByKey("Selection");if(f.notNull(j)){h=i.importComponent(null,j,null,g,c);}g.setComplexRoot(h);return e;};f.QInARepoMemberExceptionAggregationMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("Description",b.getOriginalText());i.putString("MeasureName",b.getMeasure());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QMeasureProperties.QY_CONDITION_TYPE)){i.putString("ConditionType",b.getConditionType().getName());}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QMeasureProperties.QY_EXCEPTION_AGGREGATION_ON_SELECTION)){i.putBoolean("ExceptionAggregationOnSelectionEnabled",b.getIsExceptionAggregationOnSelectionEnabled());}var c=b.getFilter().getFilterRootElement();if(f.notNull(c)){var d=e.exportComponent(null,c,null,a);i.put("Selection",d);}f.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,e,b,i);return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberFormulaMeasure=function(){};f.QInARepoMemberFormulaMeasure.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberFormulaMeasure.prototype._ff_c="QInARepoMemberFormulaMeasure";f.QInARepoMemberFormulaMeasure.importIteration=function(a,m,c,b){var d=f.QFactory.createIteration(c);m.setIteration(d);d.setStartValueMemberName(b.getStringByKey("StartValueMember"));var e=b.getListByKey("IterationDimensions");if(f.XCollectionUtils.hasElements(e)){var s=e.size();for(var i=0;i<s;i++){var g=e.getStructureAt(i);var h=f.QFactory.createIterationDimension(c);h.setDimensionName(g.getStringByKey("Name"));h.setPartitionLevelName(g.getStringByKey("PartitionLevel"));d.addIterationDimension(h);}}};f.QInARepoMemberFormulaMeasure.importInverseFormulas=function(a,m,c,b){var d=m.getDimension();var n=b.size();var e=m.getInverseFormulaList();e.clear();for(var i=0;i<n;i++){var g=b.get(i);var h=g.getStructureByKey("Formula");var j=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(a,d,h,null,c);var k=g.getStructureByKey("Target").getStructureByKey("Member");var t=k.getStringByKey("Name");var l=null;var o=g.getStructureByKey("Condition");if(f.notNull(o)){l=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(a,d,o,null,c);}var p=f.QFormulaInverseFormula.createInverseFormula(c,m,l,t,j);e.add(p);}};f.QInARepoMemberFormulaMeasure.importNameAndText=function(i,m,d){var n=f.QInARepoMemberFormulaMeasure.getNameForImport(i,d);var a=f.QInARepoMemberFormulaMeasure.getText(i,d);if(f.XStringUtils.isNullOrEmpty(n)&&f.XStringUtils.isNullOrEmpty(a)){n=i.getStringByKey("Name");a=i.getStringByKey("Description");}m.setName(n);m.setText(a);};f.QInARepoMemberFormulaMeasure.getNameForImport=function(i,d){var m=i.getStringByKey("Name");if(f.isNull(m)&&f.notNull(d)){var k=d.getKeyField();var a=k.getName();return i.getStringByKey(a);}return m;};f.QInARepoMemberFormulaMeasure.getText=function(i,d){var m=i.getStringByKey("Description");if(f.isNull(m)&&f.notNull(d)){var t=d.getTextField();if(f.notNull(t)){var k=t.getName();m=i.getStringByKey(k);}}return m;};f.QInARepoMemberFormulaMeasure.importFormulaMeasure=function(i,d,a,b,c){var e=null;if(f.notNull(a)){var g=a.getStructureByKey("Function");e=b;if(f.notNull(g)){var h=g.getStringByKey("Name");var j=g.getListByKey("Parameters");var n=f.QFactory.createFormulaFunction(c);if(f.notNull(j)){n.setFunctionName(h);var p=j.size();for(var k=0;k<p;k++){f.QInARepoMemberFormulaMeasure.importFormulaMeasure(i,d,j.getStructureAt(k),n,c);}}n.setSolveOrder(a.getIntegerByKeyExt("SolveOrder",0));if(f.isNull(e)){e=n;}else{e.add(n);}}else{var l=a.getStructureByKey("Constant");if(f.notNull(l)){var m=f.QFactory.createFormulaConstant(c);if(f.XString.isEqual("Variable",l.getStringByKey("ValueIs"))){var v=l.getStringByKey("Value");if(f.XStringUtils.isNotNullAndNotEmpty(v)){var o=d.getQueryModel().getVariableManager();m.setVariable(o.getVariables().getByKey(v));}if(f.isNull(e)){e=m;}else{e.add(m);}}else{var q=l.getStringByKey("ValueType");var r=!l.containsKey("Value")||l.getElementTypeByKey("Value")===f.PrElementType.THE_NULL;if(f.XString.isEqual(q,"Number")){if(r){m.setNullByType(f.XValueType.DOUBLE);}else{m.setDouble(l.getDoubleByKey("Value"));}}else if(f.XString.isEqual(q,"String")){if(r){m.setNullByType(f.XValueType.STRING);}else{m.setString(l.getStringByKey("Value"));}}else if(f.XString.isEqual(q,"Bool")){if(r){m.setNullByType(f.XValueType.BOOLEAN);}else{m.setBoolean(l.getBooleanByKey("Value"));}}else if(f.XString.isEqual(q,"DateTime")){if(r){m.setNullByType(f.XValueType.DATE_TIME);}else{m.setDateTime(f.XDateTime.createDateTimeFromStringWithFlag(l.getStringByKey("Value"),false));}}else if(f.XString.isEqual(q,"Date")){if(r){m.setNullByType(f.XValueType.DATE);}else{m.setDate(f.QInARepoUtils.createDate(l.getStringByKey("Value")));}}else{i.addError(f.ErrorCodes.INVALID_TOKEN,"Constant value type is not supported");return null;}var s=l.getStringByKey("Unit");if(f.XStringUtils.isNotNullAndNotEmpty(s)){m.setUnit(s);}var t=l.getStringByKey("Currency");if(f.XStringUtils.isNotNullAndNotEmpty(t)){m.setCurrency(t);}if(f.isNull(e)){e=m;}else{e.add(m);}}}else{var u=a.getStructureByKey("Member");if(f.notNull(u)){var w=f.QFactory.createFormulaMember(c);var x=u.getStringByKey("Name");w.setMemberName(x);w.setDimensionName(u.getStringByKey("Dimension"));var y=u.getStringByKey("NameIs");if(f.XString.isEqual(y,"Booked")){w.setBooked();}else if(f.XString.isEqual(y,"Previous")){w.setPrevious();}if(f.isNull(e)){e=w;}else{e.add(w);}f.QInARepoMemberFormulaMeasure.importDimensionContext(c,w,u);}else{var z=a.getStructureByKey("AttributeValue");if(f.notNull(z)){var A=z.getStringByKey("Name");var B=f.QFactory.createFormulaAttributeWithName(c,A);if(f.isNull(e)){e=B;}else{e.add(B);}f.QInARepoMemberFormulaMeasure.importDimensionContext(c,e,z);}}}}}return e;};f.QInARepoMemberFormulaMeasure.importDimensionContext=function(c,a,i){var b=i.getStructureByKey("DimensionContext");if(f.notNull(b)){var d=b.getStringByKey("DatasetId");var s=c.getOlapEnv().getSharedQueryManager(d);if(f.notNull(s)){var e=s.getQueryModel().getDimensionByName(b.getStringByKey("DimensionName"));a.setDimensionContext(e);}}};f.QInARepoMemberFormulaMeasure.exportIteration=function(e,a,b){var c=a.getIteration();if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||c.getModCounter()>0){var d=b.putNewStructure("Iteration");d.putString("StartValueMember",c.getStartValueMemberName());var g=c.getIterationDimensions();var h=d.putNewList("IterationDimensions");var s=g.size();for(var i=0;i<s;i++){var j=g.get(i);var k=h.addNewStructure();k.putStringNotNullAndNotEmpty("Name",j.getDimensionName());k.putStringNotNullAndNotEmpty("PartitionLevel",j.getPartitionLevelName());}}};f.QInARepoMemberFormulaMeasure.exportInverseFormulas=function(e,a,b){var c=a.getInverseFormulaList();if(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||c.getModCounter()>0){var d=b.putNewList("InverseFormulas");var n=c.size();for(var i=0;i<n;i++){var g=f.PrFactory.createStructure();d.add(g);var h=c.get(i);var j=f.PrFactory.createStructure();f.QInARepoMemberAbstract.exportFormulaItem(e,h.getInternalFormulaItem(),j,a);g.put("Formula",j);var t=h.getTargetMemberName();var k=f.PrFactory.createStructure();g.put("Target",k);var l=f.PrFactory.createStructure();k.put("Member",l);l.putString("Name",t);var m=h.getCondition();if(f.notNull(m)){var o=f.PrFactory.createStructure();g.put("Condition",o);f.QInARepoMemberAbstract.exportFormulaItem(e,m,o,a);}}}};f.QInARepoMemberFormulaMeasure.prototype.getComponentType=function(){return f.MemberType.FORMULA;};f.QInARepoMemberFormulaMeasure.prototype.newModelComponent=function(a,o,p,c){var b=null;if(f.isNull(p)||c.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){b=f.QFormulaMeasure._createFormulaMeasure(c,null);b.setParent(p);}return b;};f.QInARepoMemberFormulaMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var d=p;var q=c.getQueryModel();if(f.isNull(d)){d=q.getMeasureDimension();}var b=m;var n=f.QInARepoMemberFormulaMeasure.getNameForImport(a,d);if(f.isNull(b)&&d.getModelCapabilities().supportsCustomMeasuresInMetadata()){b=d.getStructureMember(n);}if(f.isNull(b)){b=f.QFormulaMeasure._createFormulaMeasure(c,d);}else{b.setDimension(d);}f.QInARepoMemberFormulaMeasure.importNameAndText(a,b,d);var e=a.getStructureByKey("Formula");f.QInARepoMemberAbstract.importGenericMemberAbstractProperties(i,b,a);if(b.getMemberType()===f.MemberType.FORMULA){var g=f.QInARepoMemberFormulaMeasure.importFormulaMeasure(i,d,e,null,c);if(f.notNull(g)){b.setFormula(g);}var h=a.getStringByKey("FormulaType");if(f.XStringUtils.isNotNullAndNotEmpty(h)){b.setFormulaType(f.QFormulaType.lookup(h));}if(b.supportsCalculatedBeforeAggregation()&&(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.hasStringByKey("ExecutionStep"))){b.setIsCalculatedBeforeAggregation(f.XString.isEqual("CalculationBeforeAggregation",a.getStringByKey("ExecutionStep")));}var j=a.getListByKey("InverseFormulas");if(f.XCollectionUtils.hasElements(j)){f.QInARepoMemberFormulaMeasure.importInverseFormulas(i,b,c,j);}var k=a.getStructureByKey("Iteration");if(f.XCollectionUtils.hasElements(k)){f.QInARepoMemberFormulaMeasure.importIteration(i,b,c,k);}if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("AutoSignFlipForRMOnly")){b.setAutoSignFlipRestrictedMeasureOnly(a.getBooleanByKeyExt("AutoSignFlipForRMOnly",false));}}return b;};f.QInARepoMemberFormulaMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var b=m;i.putString("Name",b.getName());i.putString("Description",b.getOriginalText());var c=f.PrFactory.createStructure();f.QInARepoMemberAbstract.exportFormulaItem(e,b.getFormula(),c,b);if(c.hasElements()){i.put("Formula",c);}if(b.getFormulaType()!==null){i.putString("FormulaType",b.getFormulaType().getName());}if(b.supportsCalculatedBeforeAggregation()&&(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QMeasureProperties.QY_CALCULATE_BEFORE_AGGREGATION))){if(b.isCalculatedBeforeAggregation()){i.putString("ExecutionStep","CalculationBeforeAggregation");}else if(e.mode===f.QModelFormat.INA_REPOSITORY_DELTA){i.putString("ExecutionStep","CalculationAfterAggregation");}}if(f.XCollectionUtils.hasElements(b.getInverseFormulaList())){f.QInARepoMemberFormulaMeasure.exportInverseFormulas(e,b,i);}if(b.getIteration()!==null){f.QInARepoMemberFormulaMeasure.exportIteration(e,b,i);}f.QInARepoMemberAbstract.prototype.exportGenericMemberProperties.call(this,e,b,i);if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QStructureMemberProperties.QY_UNIT_TYPE)){i.putStringNotNull("UnitType",f.QInAConverter.lookupUnitTypeInA(b.getUnitType()));}i.putStringNotNull("UnitFixed",b.getUnitFixed());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QStructureMemberProperties.QY_AGGERGATION_TYPE)){var d=b.getAggregationType();f.QInARepoUtils.setNameIfNotNull(i,"Aggregation",d);}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var p=b.getPresentationSignReversal();if(f.notNull(p)){i.putBoolean("PresentationSignReversal",p.getBoolean());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||b.hasPropertyChanged(f.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){if(b.isAutoSignFlipRestrictedMeasureOnly()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&b.hasPropertyChanged(f.QMeasureProperties.QY_AUTO_SIGN_FLIP_FOR_RM_ONLY)){i.putBoolean("AutoSignFlipForRMOnly",b.isAutoSignFlipRestrictedMeasureOnly());}}return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberRestricted=function(){};f.QInARepoMemberRestricted.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberRestricted.prototype._ff_c="QInARepoMemberRestricted";f.QInARepoMemberRestricted.prototype.getComponentType=function(){return f.MemberType.RESTRICTED_MEASURE;};f.QInARepoMemberRestricted.prototype.newModelComponent=function(a,o,p,c){var n=null;if(f.isNull(p)||c.getModelCapabilities().supportsCustomMeasuresInMetadata()===false){n=f.QRestrictedMeasure._createRestrictedMeasure(c,null);n.setParent(p);}return n;};f.QInARepoMemberRestricted.prototype.importComponentWithStructure=function(i,a,m,p,c){var r=m;var d=p;var n=a.getStringByKey("Name");var b=a.getStringByKey("Description");if(d.getModelCapabilities().supportsCustomMeasuresInMetadata()){r=d.getStructureMember(n);if(f.notNull(r)&&r.getMemberType()!==f.MemberType.RESTRICTED_MEASURE){d.removeMeasureWithNoValidation(n);r=null;}}if(f.isNull(r)){r=d.addNewRestrictedMeasure(n,b);}else{r.setDimension(d);r.setName(n);r.setText(b);}f.QInARepoMemberAbstract.importGenericMemberAbstractProperties(i,r,a);if(r.getMemberType()===f.MemberType.RESTRICTED_MEASURE){var e=r.getFilter();var g=a.getStructureByKey("InAFilterExpression");if(f.notNull(g)){var h=i.mode;i.mode=f.QModelFormat.INA_DATA;i.importFilterExpression(e,g,r,c);i.mode=h;}else{var j=null;var k=a.getStructureByKey("Selection");if(f.notNull(k)){j=i.importComponent(null,k,null,e,c);e.setComplexRoot(j);}}var l=a.getStructureByKey("TimeOperation");if(f.notNull(l)){var o=l.getStringByKey("Name");var t=f.QTimeOperationFunction.lookup(l.getStringByKey("TimeOperationFunction"));var q=f.QTimeOperationGranularity.lookup(l.getStringByKey("TimeOperationGranularity"));var s=l.getIntegerByKey("TimeOperationPeriod");r.setTimeOperation(o,t,q,s);r.getTimeOperation().setForceMemberNavigationGeneration(l.getBooleanByKey("TimeOperationForceMemberNavGeneration"));r.getTimeOperation().setUseToDateFlatRangeSelection(l.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));var u=l.getStringByKey("TimePeriodOperationLevel");if(f.notNull(u)){r.getTimeOperation().setTimePeriodOperationLevel(f.QTimePeriodOperationLevel.lookup(u));}}var v=a.getBooleanByKey("FlattenDependentRestrictedMeasures");r.setFlattenSelection(v);if(i.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||a.containsKey("DisableIgnoreExtDimOnFixedFilters")){r.setDisableIgnoreExternalDimensionOnFixedFilters(a.getBooleanByKeyExt("DisableIgnoreExtDimOnFixedFilters",false));}}return r;};f.QInARepoMemberRestricted.prototype.exportComponentWithStructure=function(e,m,i,a){var r=m;i.putString("Name",r.getName());i.putString("Description",r.getOriginalText());this.exportGenericMemberProperties(e,r,i);var b=r.getFilter().getFilterRootElement();if(f.notNull(b)&&(e.getMode()!==f.QModelFormat.INA_REPOSITORY_DELTA||r.getFilter().getModCounter()>0)){var c=e.exportComponent(null,b,null,a);i.put("Selection",c);}var t=r.getTimeOperation();if(f.notNull(t)){var d=f.PrFactory.createStructure();d.putString("Name",t.getDimensionName());d.putString("TimeOperationFunction",t.getFunction().getName());if(t.getGranularity()!==null){d.putString("TimeOperationGranularity",t.getGranularity().getName());}d.putInteger("TimeOperationPeriod",t.getPeriod());d.putBoolean("TimeOperationForceMemberNavGeneration",t.getForceMemberNavigationGeneration());d.putBoolean("TimeOperationUseToDateFlatRangeSelection",t.getUseToDateFlatRangeSelection());if(t.getFunction()===f.QTimeOperationFunction.PREVIOUS&&t.getGranularity()===f.QTimeOperationGranularity.PERIOD){d.putString("TimePeriodOperationLevel",t.getTimePeriodOperationLevel().getName());}i.put("TimeOperation",d);}var g=r.getAggregationType();f.QInARepoUtils.setNameIfNotNull(i,"Aggregation",g);if(r.isIgnoringAllExternalDimensions()){i.putString("IgnoreExternalDimensions","All");}else{var h=f.XListOfString.create();h.addAll(r.getIgnoredExternalDimensions());if(h.hasElements()){var j=i.putNewList("IgnoreExternalDimensions");j.addAllStrings(h);}}i.putStringNotNull("UnitType",f.QInAConverter.lookupUnitTypeInA(r.getUnitType()));i.putStringNotNull("UnitFixed",r.getUnitFixed());i.putStringNotNull("UnitName",r.getUnitName());i.putStringNotNull("UnitTextName",r.getUnitTextName());if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(f.QStructureMemberProperties.QY_DATA_TYPE)){i.putStringNotNull("DataType",f.QInAConverter.lookupValueTypeInA(r.getDataType()));}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(f.QStructureMemberProperties.QY_PRESENTATION_SIGN_REVERSAL)){var p=r.getPresentationSignReversal();if(f.notNull(p)){i.putBoolean("PresentationSignReversal",p.getBoolean());}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(f.QMeasureProperties.QY_FLATTEN_DEPENDENT_RESTRICTED_MEASURES)){var k=r.isFlattenSelection();if(k||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA){i.putBoolean("FlattenDependentRestrictedMeasures",k);}}if(e.mode!==f.QModelFormat.INA_REPOSITORY_DELTA||r.hasPropertyChanged(f.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){if(r.isDisableIgnoreExternalDimensionOnFixedFilters()||e.mode===f.QModelFormat.INA_REPOSITORY_DELTA&&r.hasPropertyChanged(f.QMeasureProperties.QY_DISABLE_IGNORE_EXTDIM_ON_FIXEDFILTERS)){i.putBoolean("DisableIgnoreExtDimOnFixedFilters",r.isDisableIgnoreExternalDimensionOnFixedFilters());}}return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberVarianceMeasure=function(){};f.QInARepoMemberVarianceMeasure.prototype=new f.QInARepoMemberAbstract();f.QInARepoMemberVarianceMeasure.prototype._ff_c="QInARepoMemberVarianceMeasure";f.QInARepoMemberVarianceMeasure.prototype.getComponentType=function(){return f.MemberType.VARIANCE;};f.QInARepoMemberVarianceMeasure.prototype.newModelComponent=function(a,o,p,c){var n=f.QVarianceMeasure._createVarianceMeasure(c,p);n.setParent(p);return n;};f.QInARepoMemberVarianceMeasure.prototype.importVarianceMember=function(i,m){m.setNullHandlingType(f.VarianceNullHandlingType.lookup(i.getStringByKey("NullHandling")));m.setCalculationType(f.VarianceCalculationType.lookup(i.getStringByKey("CalculationType")));m.setBaseMeasure(i.getStringByKey("BaseMeasureName"));m.setReferenceMeasure(i.getStringByKey("ReferenceMeasureName"));if(i.containsKey("BaseIgnoreExternalDimensions")){var b=i.getListByKey("BaseIgnoreExternalDimensions");for(var a=0;a<b.size();a++){m.addBaseExternalDimensionToIgnore(b.getStringAt(a));}}if(i.containsKey("ReferenceIgnoreExternalDimensions")){var r=i.getListByKey("ReferenceIgnoreExternalDimensions");for(var c=0;c<r.size();c++){m.addReferenceExternalDimensionToIgnore(r.getStringAt(c));}}var d=i.getStructureByKey("BaseTimeOperation");if(f.notNull(d)){var e=d.getStringByKey("Name");var g=f.QTimeOperationFunction.lookup(d.getStringByKey("TimeOperationFunction"));var h=f.QTimeOperationGranularity.lookup(d.getStringByKey("TimeOperationGranularity"));var j=d.getIntegerByKey("TimeOperationPeriod");m.setBaseTimeOperation(e,g,h,j);m.getBaseTimeOperation().setForceMemberNavigationGeneration(d.getBooleanByKey("TimeOperationForceMemberNavGeneration"));m.getBaseTimeOperation().setUseToDateFlatRangeSelection(d.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));var k=d.getStringByKey("TimePeriodOperationLevel");if(f.notNull(k)){m.getBaseTimeOperation().setTimePeriodOperationLevel(f.QTimePeriodOperationLevel.lookup(k));}}var l=i.getStructureByKey("ReferenceTimeOperation");if(f.notNull(l)){var n=l.getStringByKey("Name");var o=f.QTimeOperationFunction.lookup(l.getStringByKey("TimeOperationFunction"));var p=f.QTimeOperationGranularity.lookup(l.getStringByKey("TimeOperationGranularity"));var q=l.getIntegerByKey("TimeOperationPeriod");m.setReferenceTimeOperation(n,o,p,q);m.getReferenceTimeOperation().setForceMemberNavigationGeneration(l.getBooleanByKey("TimeOperationForceMemberNavGeneration"));m.getReferenceTimeOperation().setUseToDateFlatRangeSelection(l.getBooleanByKey("TimeOperationUseToDateFlatRangeSelection"));var s=l.getStringByKey("TimePeriodOperationLevel");if(f.notNull(s)){m.getReferenceTimeOperation().setTimePeriodOperationLevel(f.QTimePeriodOperationLevel.lookup(s));}}};f.QInARepoMemberVarianceMeasure.prototype.importComponentWithStructure=function(i,a,m,p,c){var v=m;var d=p;var n=a.getStringByKey("Name");var b=a.getStringByKey("Description");if(f.isNull(v)){v=d.addNewVarianceMeasure(n,b);}else{v.setDimension(d);v.setName(n);v.setText(b);}var e=a.getBooleanByKey("FlattenBaseFilter");v.setFlattenBaseFilter(e);var g=a.getBooleanByKey("FlattenReferenceFilter");v.setFlattenReferenceFilter(g);this.importVarianceMember(a,v);this.importFilter(i,a,c,v.getBaseFilter(),"SelectionBase");this.importFilter(i,a,c,v.getReferenceFilter(),"SelectionReference");var r=v.getReferenceFilter();var h=null;var j=a.getStructureByKey("SelectionReference");if(f.notNull(j)){var k=j.getStructureByKey("Selection");h=i.importComponent(null,k,null,r,c);}r.setComplexRoot(h);return v;};f.QInARepoMemberVarianceMeasure.prototype.importFilter=function(i,a,c,b,k){var d=null;var e=a.getStructureByKey(k);if(f.notNull(e)){var g=e.getStructureByKey("Selection");d=i.importComponent(null,g,null,b,c);}b.setComplexRoot(d);};f.QInARepoMemberVarianceMeasure.prototype.exportComponentWithStructure=function(e,m,i,a){var v=m;i.putString("Name",v.getName());i.putString("Description",v.getOriginalText());this.exportVarianceMember(i,v);this.exportGenericMemberProperties(e,v,i);this.exportFilter(e,i,a,v.getBaseFilter(),"SelectionBase");this.exportFilter(e,i,a,v.getReferenceFilter(),"SelectionReference");var b=v.isFlattenBaseFilter();if(b){i.putBoolean("FlattenBaseFilter",b);}var c=v.isFlattenReferenceFilter();if(c){i.putBoolean("FlattenReferenceFilter",c);}return f.QInARepoMemberAbstract.prototype.exportComponentWithStructure.call(this,e,m,i,a);};f.QInARepoMemberVarianceMeasure.prototype.exportVarianceMember=function(i,v){i.putString("BaseMeasureName",v.getBaseMeasure());i.putString("ReferenceMeasureName",v.getReferenceMeasure());f.QInARepoUtils.setNameIfNotNull(i,"CalculationType",v.getCalculationType());f.QInARepoUtils.setNameIfNotNull(i,"NullHandling",v.getNullHandlingType());var b=v.getBaseIgnoredExternalDimensions();if(b.hasElements()){var a=i.putNewList("BaseIgnoreExternalDimensions");a.addAllStrings(b);}var r=v.getReferenceIgnoredExternalDimensions();if(r.hasElements()){var c=i.putNewList("ReferenceIgnoreExternalDimensions");c.addAllStrings(r);}this.exportTimeOperation(i,v.getBaseTimeOperation(),"BaseTimeOperation");this.exportTimeOperation(i,v.getReferenceTimeOperation(),"ReferenceTimeOperation");};f.QInARepoMemberVarianceMeasure.prototype.exportFilter=function(e,i,a,b,k){var c=b.getFilterRootElement();if(f.notNull(c)){var d=e.exportComponent(null,c,null,a);var g=f.PrFactory.createStructure();g.put("Selection",d);i.put(k,g);}};f.QInARepoMemberVarianceMeasure.prototype.exportTimeOperation=function(i,t,k){if(f.notNull(t)){var a=f.PrFactory.createStructure();a.putString("Name",t.getDimensionName());a.putString("TimeOperationFunction",t.getFunction().getName());if(t.getGranularity()!==null){a.putString("TimeOperationGranularity",t.getGranularity().getName());}a.putInteger("TimeOperationPeriod",t.getPeriod());a.putBoolean("TimeOperationForceMemberNavGeneration",t.getForceMemberNavigationGeneration());a.putBoolean("TimeOperationUseToDateFlatRangeSelection",t.getUseToDateFlatRangeSelection());if(t.getFunction()===f.QTimeOperationFunction.PREVIOUS&&t.getGranularity()===f.QTimeOperationGranularity.PERIOD){a.putString("TimePeriodOperationLevel",t.getTimePeriodOperationLevel().getName());}i.put(k,a);}};f.QInARepoVarHierNode=function(){};f.QInARepoVarHierNode.prototype=new f.QInARepoVarDimMember();f.QInARepoVarHierNode.prototype._ff_c="QInARepoVarHierNode";f.QInARepoVarHierNode.prototype.getComponentType=function(){return f.VariableType.HIERARCHY_NODE_VARIABLE;};f.QInAExport=function(){};f.QInAExport.prototype=new f.QInA();f.QInAExport.prototype._ff_c="QInAExport";f.QInAImport=function(){};f.QInAImport.prototype=new f.QInA();f.QInAImport.prototype._ff_c="QInAImport";f.QInAImport.prototype.m_cacheKey=null;f.OlapSerializationModule=function(){};f.OlapSerializationModule.prototype=new f.DfModule();f.OlapSerializationModule.prototype._ff_c="OlapSerializationModule";f.OlapSerializationModule.s_module=null;f.OlapSerializationModule.getInstance=function(){if(f.isNull(f.OlapSerializationModule.s_module)){f.DfModule.checkInitialized(f.OlapImplModule.getInstance());f.OlapSerializationModule.s_module=f.DfModule.startExt(new f.OlapSerializationModule());f.DfModule.stopExt(f.OlapSerializationModule.s_module);}return f.OlapSerializationModule.s_module;};f.OlapSerializationModule.prototype.getName=function(){return"ff4394.olap.serialization";};f.OlapSerializationModule.getInstance();return sap.firefly;});
