/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff0200.io"],function(f){"use strict";if(typeof $!=="undefined"&&$.db&&$.db.ina&&$.trace){var g=g||{};g.XMLHttpRequest=function(){this.headers={};};g.XMLHttpRequest.clients={"default":new $.net.http.Client()};g.XMLHttpRequest.prototype.open=function(m,u,a){$.trace.debug("Creating request with method="+m+", url="+u+", async="+a);this.url=u;if(m==="GET"){this.request=new $.net.http.Request($.net.http.GET,u);}else if(m==="POST"){this.request=new $.net.http.Request($.net.http.POST,u);}else if(m==="PUT"){this.request=new $.net.http.Request($.net.http.PUT,u);}if(this.request===undefined){throw new Error("Illegal State: Couldn't create XS-request for method "+m);}};g.XMLHttpRequest.prototype.send=function(d){var s="";var h=this.request.headers;var D=$.trace.debug;var c="default";for(var m in this.headers){if(this.headers.hasOwnProperty(m)){h.set(m,this.headers[m]);s+=m+"="+this.headers[m]+"\u000d\u000a";if(m===f.HttpConstants.HD_AUTHORIZATION){c=this.headers[m];if(!g.XMLHttpRequest.clients.hasOwnProperty(c)){g.XMLHttpRequest.clients[c]=new $.net.http.Client();}}}}D("Request to send, client key:\n"+c);var C=g.XMLHttpRequest.clients[c];D("Request to send, headers:\n"+s);D("Request to send, body:\n"+d);if(d!==null){this.request.setBody(d);}var e=this.sendInternal(C,c);if(e){delete g.XMLHttpRequest.clients[c];C=new $.net.http.Client();g.XMLHttpRequest.clients[c]=C;e=this.sendInternal(C,c);if(e){throw e;}}this.readyState=4;if(!this.response.body){this.responseText="";}else{this.responseText=this.response.body.asString();}this.headers={};D("Received response, header:\n"+this.getAllResponseHeaders());D("Received response, body:\n"+this.responseText);};g.XMLHttpRequest.prototype.setRequestHeader=function(h,v){this.headers[h]=v;$.trace.debug("Added field to the header "+h+"="+v+", size="+this.headers.length);};g.XMLHttpRequest.prototype.getAllResponseHeaders=function(){var s="";var h=this.response.headers;var l=h.length;for(var i=0;i<l;++i){var a=h[i];s+=a.name+": "+a.value+"\u000d\u000a";}return s;};g.XMLHttpRequest.prototype.sendInternal=function(c,C){try{c.request(this.request,this.url);this.response=c.getResponse();this.status=this.response.status;this.statusText="";return null;}catch(e){$.trace.debug("Request failed. Remove client "+C+" Exception:"+e);return e;}};}f.NodeJsXMLHttpRequest=function(){this.readyState=f.NodeJsXMLHttpRequest.UNSENT;this.m_headers={};this.m_options={};this.m_sendFlag=false;this.m_method=null;this.m_url=null;this.m_async=null;this.status=null;this.statusText=null;this.response=null;this.responseText="";this.onreadystatechange=null;this.m_cookies=null;};f.NodeJsXMLHttpRequest.prototype=new f.XObject();f.NodeJsXMLHttpRequest.UNSENT=0;f.NodeJsXMLHttpRequest.OPENED=1;f.NodeJsXMLHttpRequest.HEADERS_RECEIVED=2;f.NodeJsXMLHttpRequest.DONE=4;f.NodeJsXMLHttpRequest.prototype.getResponseHeader=function(h){if(typeof h==="string"&&this.readyState>f.NodeJsXMLHttpRequest.OPENED&&this.response&&this.response.headers){return this.response.headers[h.toLowerCase()];}return null;};f.NodeJsXMLHttpRequest.prototype.getAllResponseHeaders=function(){if(this.readyState<f.NodeJsXMLHttpRequest.HEADERS_RECEIVED){return"";}var r="";var a=this.response.headers;for(var h in a){if(a.hasOwnProperty(h)){var b=h.toLowerCase();r+=b+": "+a[b]+"\r\n";}}return r.substr(0,r.length-2);};f.NodeJsXMLHttpRequest.prototype.isHttpsProtocol=function(u){var a=require("url").parse(u.toString());var b=a.protocol.toLowerCase();return b==="https:";};f.NodeJsXMLHttpRequest.prototype.setCookies=function(c){this.m_cookies=c;};f.NodeJsXMLHttpRequest.prototype.setRequestHeader=function(h,v){var a=h.toLowerCase();if(a!=="cookie"){if(this.readyState!==f.NodeJsXMLHttpRequest.OPENED){throw new Error("Request is not in OPEN state");}if(this.m_sendFlag){throw new Error("Request has been already sent");}this.m_headers[a]=this.m_headers[a]?this.m_headers[a]+", "+v:v;}else{this.m_headers[a]=this.m_headers[a]?this.m_headers[a]+", "+v:v;}};f.NodeJsXMLHttpRequest.prototype.open=function(m,u,a){var b=m.toUpperCase();if(b!=="POST"&&b!=="GET"&&b!=="PUT"){throw new Error("Request method is not supported");}this.m_async=a;this.m_headers={};this.m_method=b;this.m_url=u;this.m_sendFlag=false;this.readyState=f.NodeJsXMLHttpRequest.OPENED;this.status=0;this.statusText="";};f.NodeJsXMLHttpRequest.prototype.send=function(b){if(this.readyState!==f.NodeJsXMLHttpRequest.OPENED){throw new Error("Request is not in OPEN state");}if(this.m_sendFlag){throw new Error("Request has been already sent");}if(this.m_method==="GET"){b=null;}else if(b){this.setRequestHeader("Content-Length",Buffer.isBuffer(b)?b.length:Buffer.byteLength(b));}else if(this.m_method==="POST"){this.setRequestHeader("Content-Length",0);}var a=require("url").parse(this.m_url);var c=a.port||(this.isHttpsProtocol(this.m_url)?443:80);var h;var d;switch(a.protocol){case"https:":case"http:":h=a.host;d=a.hostname;break;default:throw new Error("Protocol not supported");}this.setRequestHeader("Host",h);this.setRequestHeader("User-Agent",process.release.name+"/"+process.version+"("+process.platform+")");if(this.m_cookies!==null){var e=this.m_cookies.getCookies();if(e.size()!==0){var j="";for(var i=0;i<e.size();i++){j+=e.get(i).getName()+"="+e.get(i).getValue()+"; ";}this.setRequestHeader("Cookie",j.substring(0,j.length-2));}}this.m_options={"host":h,"port":c,"path":a.path,"hostname":d,"protocol":a.protocol,"method":this.m_method,"headers":this.m_headers};var u=false;if(u){var k="127.0.0.1";var l=8888;this.m_options.host=k;this.m_options.port=l;this.m_options.path=this.m_url;delete this.m_options.hostname;}var m=function(A){var C=JSON.parse(A);this.response=C.data;this.status=C.data.statusCode;this.statusText=C.data.statusMessage;this.responseText=C.data.text;this.readyState=f.NodeJsXMLHttpRequest.DONE;if(this.m_async){this.handleEvent("readystatechange");}}.bind(this);var n=function(C){this.response=C;this.status=0;this.statusText="";this.responseText="";this.readyState=f.NodeJsXMLHttpRequest.DONE;}.bind(this);var o=function(C){this.response=null;this.status=C.code;this.statusText=C.message;this.responseText=C.message;this.readyState=f.NodeJsXMLHttpRequest.DONE;}.bind(this);var q="UTF-8";if(this.m_async){this.m_sendFlag=true;var r="";var s=require("http"+(this.isHttpsProtocol(this.m_url)?"s":"")).request;var t=function(C){C.setEncoding(q);C.on("data",function(D){r+=D;});C.on("end",function(){m(JSON.stringify({"error":null,"data":{"statusCode":C.statusCode,"statusMessage":C.statusMessage,"headers":C.headers,"text":r}}));});C.on("error",function(D){n(D);});}.bind(this);var v=s(this.m_options,t);v.on("error",function(C){o(C);});if(b!==null){v.write(b);}v.end();}else{var w=require("fs");var x=".nodeHttpSync_"+process.pid;w.writeFileSync(x,"",q);var y="var request = require(\"http"+(this.isHttpsProtocol(this.m_url)?"s":"")+"\").request;"+"var responseText = \"\";"+"var processResponse = function(response) {"+"response.setEncoding(\""+q+"\");"+"response.on(\"data\", function(data) {"+"responseText += data;"+"});"+"response.on(\"end\", function() {"+"fs.writeFileSync(\""+x+"\", "+"JSON.stringify({\"error\": null, \"data\": {\"statusCode\": "+"response.statusCode"+", \"statusMessage\": "+"response.statusMessage"+", \"headers\": "+"response.headers"+", \"text\": "+"responseText"+"}})"+", \""+q+"\");"+"});"+"response.on(\"error\", function(error) {"+"fs.writeFileSync(\""+x+"\", "+"JSON.stringify({\"error\": "+"error"+"})"+", \""+q+"\");"+"});"+"};"+"var requestPerformer = request("+JSON.stringify(this.m_options)+", processResponse);"+"requestPerformer.on(\"error\", function(error) {"+"fs.writeFileSync(\""+x+"\", "+"JSON.stringify({\"error\": "+"error"+"})"+", \""+q+"\");"+"});"+(b?"requestPerformer.write("+JSON.stringify(b)+");":"")+"requestPerformer.end();";var z=require("child_process").spawnSync;z(process.argv[0],["-e",y]);var A=w.readFileSync(x,q);w.unlinkSync(x);var B=JSON.parse(A).error;if(B){n(B);}else{m(A);}}};f.NodeJsXMLHttpRequest.prototype.abort=function(){};f.NodeJsXMLHttpRequest.prototype.handleEvent=function(e){if(typeof this["on"+e]==="function"){this["on"+e]();}};f.NativeXFileSystem=function(){f.DfXFileSystem.call(this);this._ff_c="NativeXFileSystem";};f.NativeXFileSystem.prototype=new f.DfXFileSystem();f.NativeXFileSystem.create=function(s){var a=new f.NativeXFileSystem();a.setupSessionContext(s);return a;};f.NativeXFileSystem.staticSetup=function(){if(f.XSystemUtils.isNode()){var x=f.XFile;x.setNativeSlash(require("path").sep);x.IS_SUPPORTED=true;}};f.NativeXFileSystem.prototype.getRoots=function(){var a=new f.XListOfString();var i=/^win/.test(process.platform);if(i){a.add("C:\\");}else{a.add("/");}return a;};f.NativeXFileSystem.prototype.getChildren=function(a){var n=require("path").normalize(a);var x=f.XFile;if(f.XStringUtils.isNullOrEmpty(n)){return this.getRoots();}var b=new f.XListOfString();try{var c=require("fs").readdirSync(n);for(var i in c){if(c.hasOwnProperty(i)){var d=n+x.NATIVE_SLASH+c[i];b.add(d);}}}catch(e){}return b;};f.NativeXFileSystem.prototype.isDirectory=function(i){try{var s=require("fs").statSync(require("path").normalize(i));return s.isDirectory();}catch(e){return false;}};f.NativeXFileSystem.prototype.isFile=function(i){try{var s=require("fs").statSync(require("path").normalize(i));return s.isFile();}catch(e){return false;}};f.NativeXFileSystem.prototype.isExisting=function(i){var n=require("path").normalize(i);return this.isDirectory(n)||this.isFile(n);};f.NativeXFileSystem.prototype.loadInternal=function(i,m){try{var b=require("fs").readFileSync(require("path").normalize(i));var a=new f.XByteArray(b);}catch(e){m.addError(0,e);}return a;};f.NativeXFileSystem.prototype.load=function(n){var m=f.MessageManagerSimple.createMessageManager();var b=this.loadInternal(n,m);return f.ExtResult.create(b,m);};f.NativeXFileSystem.prototype.loadExt=function(n){var m=f.MessageManagerSimple.createMessageManager();var b=this.loadInternal(n,m);var c=f.XFileContent.createFileContent();c.setMessageCollection(m);c.setContentTypeAutodetect(f.ContentType.BINARY,n,false);c.setByteArray(b);return c;};f.NativeXFileSystem.prototype.loadGzipped=function(i){var m=f.MessageManagerSimple.createMessageManager();var n=require("path").normalize(i);var b=[];try{b=require("fs").readFileSync(n);b=require("zlib").gunzipSync(b);}catch(e){m.addError(0,e);}var c=f.XFileContent.createFileContent();c.setMessageCollection(m);c.setContentTypeAutodetect(f.ContentType.BINARY,n,true);c.setByteArray(new f.XByteArray(b));return c;};f.NativeXFileSystem.prototype.save=function(i,d){var m=f.MessageManagerSimple.createMessageManager();var b=d.getNative();try{var n=require("path").normalize(i);require("fs").writeFileSync(n,b);}catch(e){m.addError(0,e);}return m;};f.NativeXFileSystem.prototype.mkdirs=function(i){try{var a=require("path").normalize(i);a.split(require("path").sep).reduce(function(c,b){c+=b+require("path").sep;if(!require("fs").existsSync(c)){require("fs").mkdirSync(c);}return c;},"");}catch(e){}};f.NativeXFileSystem.prototype.mkdir=function(i){try{var n=require("path").normalize(i);require("fs").mkdirSync(n);}catch(e){}};f.NativeXFileSystem.prototype.getLastModifiedTimestamp=function(i){try{var n=require("path").normalize(i);return require("fs").statSync(n).mtime;}catch(e){return 0;}};f.NativeXFileSystem.prototype.renameTo=function(i,a){try{var s=require("path").normalize(i);var d=require("path").normalize(a);require("fs").renameSync(s,d);}catch(e){}};f.NativeXFileSystem.prototype.deleteFile=function(i){try{var n=require("path").normalize(i);if(this.isDirectory(n)){require("fs").rmdirSync(n);}else{require("fs").unlinkSync(n);}}catch(e){}};f.NativeXFileSystemFactory=function(){f.XFileSystemFactory.call(this);this._ff_c="NativeXFileSystemFactory";};f.NativeXFileSystemFactory.prototype=new f.XFileSystemFactory();f.NativeXFileSystemFactory.staticSetup=function(){if(f.XSystemUtils.isNode()){f.XFileSystemFactory.registerFactory(f.XFileSystemType.OS,new f.NativeXFileSystemFactory());}};f.NativeXFileSystemFactory.prototype.newFileSystem=function(s){return new f.NativeXFileSystem.create(s);};f.NativeDispatcher=function(){f.DfDispatcher.call(this);this._ff_c="NativeDispatcher";};f.NativeDispatcher.prototype=new f.DfDispatcher();f.NativeDispatcher.staticSetup=function(){f.Dispatcher.replaceInstance(new f.NativeDispatcher());};f.NativeDispatcher.prototype.registerInterval=function(m,l,c){var t=new f.JsTimerHandle(m,l,c,true);t.jsHandle=setInterval(function(){t.execute();},m);return t;};f.NativeDispatcher.prototype.unregisterInterval=function(h){clearInterval(h.jsHandle);};f.NativeDispatcher.prototype.registerTimer=function(m,l,c){var t=new f.JsTimerHandle(m,l,c,false);t.jsHandle=setTimeout(function(){t.execute();},m);return t;};f.NativeDispatcher.prototype.unregisterTimer=function(h){clearTimeout(h.jsHandle);};f.NativeDispatcher.prototype.getProcessingTimeReceiverCount=function(){return-1;};f.NativeDispatcher.prototype.registerProcessingTimeReceiver=function(a){return;};f.NativeDispatcher.prototype.unregisterProcessingTimeReceiver=function(a){return;};f.NativeDispatcher.prototype.shutdown=function(){return;};f.NativeDispatcher.prototype.process=function(){return;};f.NativeDispatcher.prototype.getSyncState=function(){return f.SyncState.IN_SYNC;};f.JsTimerHandle=function(m,l,c,i){f.TimerItem.call(this);f.TimerItem.prototype.setupExt.call(this,m,l,c,i);this._ff_c="JsTimerHandle";};f.JsTimerHandle.prototype=new f.TimerItem();f.NativeGoogleHttpRequest=function(){this.m_options={"headers":{},"followRedirects":false};this.m_url=null;this.m_response=null;this.onreadystatechange=null;this.readyState=f.NativeGoogleHttpRequest.UNSENT;this.status=0;this.statusText=null;this.responseText=null;this._ff_c="NativeGoogleHttpRequest";};f.NativeGoogleHttpRequest.prototype=new f.XObject();f.NativeGoogleHttpRequest.UNSENT=0;f.NativeGoogleHttpRequest.OPENED=1;f.NativeGoogleHttpRequest.DONE=4;f.NativeGoogleHttpRequest.prototype.releaseObject=function(){this.m_url=null;this.m_response=f.XObjectExt.release(this.m_response);this.onreadystatechange=null;this.statusText=null;this.responseText=null;f.XObject.prototype.releaseObject.call(this);};f.NativeGoogleHttpRequest.prototype.setCookies=function(c){var a=c.getCookies();if(a.size()>0){var b="";for(var i=0;i<a.size();i++){var d=a.get(i);b+=d.getName()+"="+d.getValue()+"; ";}this.m_options.headers["Cookie"]=b.substring(0,b.length-2);}};f.NativeGoogleHttpRequest.prototype.open=function(r,u,i){this.m_options["method"]=r.toLowerCase();this.m_url=u;this.readyState=f.NativeGoogleHttpRequest.OPENED;this.status=0;this.statusText=null;this.responseText=null;};f.NativeGoogleHttpRequest.prototype.setRequestHeader=function(k,v){this.m_options.headers[k]=v;};f.NativeGoogleHttpRequest.prototype.send=function(c){if(c){this.m_options["payload"]=c;}this.m_response=f.GoogleUrlFetchApp.fetch(this.m_url,this.m_options);this.readyState=f.NativeGoogleHttpRequest.DONE;this.status=this.m_response.getResponseCode();this.responseText=this.m_response.getContentText();this.onreadystatechange();};f.NativeGoogleHttpRequest.prototype.getResponseHeader=function(h){var a=this.getAllResponseHeaders();return a?a[h]:null;};f.NativeGoogleHttpRequest.prototype.getAllResponseHeaders=function(){if(this.m_response){return this.m_response.getAllHeaders();}return null;};f.NativeHttpClient=function(s){f.DfHttpClient.call(this);this.m_xmlHttpRequest=null;this.m_isOnAjaxEventExecuted=false;f.DfHttpClient.prototype.setupHttpClient.call(this,s);this._ff_c="NativeHttpClient";};f.NativeHttpClient.prototype=new f.DfHttpClient();f.NativeHttpClient.parseResponseHeaders=function(a,b){if(a!==null){if(f.XSystemUtils.isGoogleAppsScript()){for(var h in a){if(h!==f.HttpConstants.HD_SET_COOKIE){b.put(h,a[h]);}}}else{var c=a.split("\u000d\u000a");var d=c.length;var H=f.HttpConstants;for(var i=0;i<d;i++){var e=c[i];var j=e.indexOf("\u003a\u0020");if(j>0){var k=e.substring(0,j).replace(/(^\u000d\u000a?)|(^\u000a?)/,"");var v=e.substring(j+2);b.put(H.lookupCamelCase(k),v);}}}}};f.NativeHttpClient.prototype.abort=function(){this.m_xmlHttpRequest.abort();};f.NativeHttpClient.prototype.releaseObject=function(){this.m_xmlHttpRequest=null;this.m_response=f.XObjectExt.release(this.m_response);this.m_isOnAjaxEventExecuted=null;f.DfHttpClient.prototype.releaseObject.call(this);};f.NativeHttpClient.prototype.onAjaxEvent=function(){var x=this.m_xmlHttpRequest;if(x!==null&&x.readyState===4){this.addProfileStep("Receive http response");this.m_response=f.HttpResponse.createResponse(this.getRequest());this.m_isOnAjaxEventExecuted=true;if(f.XSystemUtils.isNode()||f.XSystemUtils.isGoogleAppsScript()){var c=f.HttpCookies.create();var a=x.getResponseHeader(f.HttpConstants.HD_SET_COOKIE);for(var h in a){if(a.hasOwnProperty(h)){c.addByHttpServerResponseValue(a[h]);}}this.m_response.setCookies(c);this.m_response.setCookiesMasterStore(this.getRequest().getCookiesMasterStore());this.m_response.applyCookiesToMasterStorage();}this.m_response.setStatusCode(x.status);this.m_response.setStatusCodeDetails(x.statusText);var b=x.getAllResponseHeaders();var d=this.m_response.getHeaderFieldsBase();f.NativeHttpClient.parseResponseHeaders(b,d);if(x.status>=200&&x.status<=299){var i=d.getByKey(f.HttpConstants.HD_CONTENT_TYPE);if(i!==null){i=i.toLowerCase();var j=i.indexOf(";");if(j!==-1){i=i.substring(0,j);}}var k=f.ContentType.lookup(i);if(k===null){this.m_response.setContentTypeValue(i);}else{this.m_response.setContentType(k);if(k.isText()){var l=x.responseText;this.m_response.setString(l);if(k===f.ContentType.APPLICATION_JSON){if(l!==null&&l.length>0){try{this.addProfileStep("Parse json");var m=JSON.parse(l);var o=new f.NativeJsonProxyElement(m);this.m_response.setJsonObject(o);}catch(e){this.addError(f.JsonParserErrorCode.JSON_PARSER_ILLEGAL_STATE,e.message);}}}}}}if(x.status===0){this.addError(f.ErrorCodes.HOST_UNREACHABLE,"Destination host is unreachable!");}this.setData(this.m_response);this.endSync();this.m_xmlHttpRequest=null;}};f.NativeHttpClient.prototype.processSynchronization=function(s){var h=f.HttpConstants;var H=f.HttpRequestMethod;var r=this.prepareRequest();var u=r.getUriStringWithoutAuthentication();this.m_xmlHttpRequest=null;if(f.XSystemUtils.isXS()){this.m_xmlHttpRequest=new g.XMLHttpRequest();}else if(f.XSystemUtils.isNode()){this.m_xmlHttpRequest=new f.NodeJsXMLHttpRequest();var c;if(typeof window!=="undefined"&&window&&window.options&&window.options.isMobile&&f.userSession){c=f.HttpCookies.create();c.addByHttpClientRequestValue(f.userSession.cookies);}else{c=this.getRequest().getCookies();}this.m_xmlHttpRequest.setCookies(c);}else if(f.XSystemUtils.isGoogleAppsScript()){this.m_xmlHttpRequest=new f.NativeGoogleHttpRequest();this.m_xmlHttpRequest.setCookies(this.getRequest().getCookies());}else if(f.XSystemUtils.isBrowser()&&r.isLogoff()&&typeof navigator.sendBeacon!=="undefined"){navigator.sendBeacon(u);return true;}else{this.m_xmlHttpRequest=new XMLHttpRequest();}if(this.m_xmlHttpRequest!==null){var x=this.m_xmlHttpRequest;var i=s===f.SyncType.NON_BLOCKING;var R=r.getMethod();x.open(R.getName(),u,i);if(R===H.HTTP_POST||R===H.HTTP_PUT){var a=r.getContentType().getName()+";charset=UTF-8";x.setRequestHeader(h.HD_CONTENT_TYPE,a);}x.setRequestHeader(h.HD_ACCEPT,r.getAcceptContentType().getName());var b=r.getAuthenticationType();if(b===f.AuthenticationType.BASIC){var v=r.getUser()+":"+r.getPassword();var d=h.VA_AUTHORIZATION_BASIC+" "+f.Base64.encode(v);x.setRequestHeader(h.HD_AUTHORIZATION,d);}else if(b===f.AuthenticationType.BEARER){var e=r.getAccessToken();if(e===null){e=r.getAuthenticationToken().getAccessToken();}if(e!==null){x.setRequestHeader(h.HD_AUTHORIZATION,h.VA_AUTHORIZATION_BEARER+" "+e);}}else if(b===f.AuthenticationType.SCP_OPEN_CONNECTORS){var j=r.getUser();var o=r.getOrganization();var k=r.getElement();var l=f.XStringBuffer.create();l.append(h.HD_USER).append(" ").append(j);l.append(", ");l.append(h.HD_ORGANIZATION).append(" ").append(o);l.append(", ");l.append(h.HD_ELEMENT).append(" ").append(k);x.setRequestHeader(h.HD_AUTHORIZATION,l.toString());}var m=r.getLanguage();if(m&&m.length>0){x.setRequestHeader(h.HD_ACCEPT_LANGUAGE,m);}var n=r.getHeaderFields();var q=n.getKeysAsIteratorOfString();while(q.hasNext()){var t=q.next();x.setRequestHeader(t,n.getByKey(t));}x.onreadystatechange=this.onAjaxEvent.bind(this);if(this._sendInternal(r)===false){return false;}if(!i){if(!this.m_isOnAjaxEventExecuted){this.onAjaxEvent();this.m_xmlHttpRequest=null;}}return true;}this.addError(f.HttpErrorCode.HTTP_MISSING_NATIVE_DRIVER,"XMLHttpRequest not supported");return false;};f.NativeHttpClient.prototype._sendInternal=function(r){var h=f.HttpRequestMethod;try{this.m_isOnAjaxEventExecuted=false;this.addProfileStep("### SERVER ###");if(r.isCorsSecured()){this.m_xmlHttpRequest.withCredentials=true;}if(r.getMethod()===h.HTTP_POST||r.getMethod()===h.HTTP_PUT){this.m_xmlHttpRequest.send(r.getString());}else{this.m_xmlHttpRequest.send(null);}return true;}catch(e){this.addError(f.HttpErrorCode.HTTP_IO_EXCEPTION,e.message);return false;}};f.NativeHttpClientFactory=function(){f.HttpClientFactory.call(this);this._ff_c="NativeHttpClientFactory";};f.NativeHttpClientFactory.prototype=new f.HttpClientFactory();f.NativeHttpClientFactory.staticSetup=function(){var a=new f.NativeHttpClientFactory();f.HttpClientFactory.setHttpClientFactoryForProtocol(f.ProtocolType.HTTPS,a);f.HttpClientFactory.setHttpClientFactoryForProtocol(f.ProtocolType.HTTP,a);};f.NativeHttpClientFactory.prototype.newHttpClientInstance=function(s){return new f.NativeHttpClient(s);};f.RpcFunctionInaDB=function(){f.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionInaDB";};f.RpcFunctionInaDB.prototype=new f.DfRpcFunction();f.RpcFunctionInaDB.prototype.setupRpcFunction=function(s,c,n){this.m_name=n;this.setupFunction(s,c,null);};f.RpcFunctionInaDB.prototype.releaseObject=function(){this.m_name=null;f.DfRpcFunction.prototype.releaseObject.call(this);};f.RpcFunctionInaDB.prototype.getName=function(){return this.m_name;};f.RpcFunctionInaDB.prototype.processSynchronization=function(){var a=this.getName();var r;var b;var c;var d;var e=null;var j;var h;var D=$.trace.debug;if(f.XStringUtils.isNullOrEmpty(a)){this.addError(1001," path null");return false;}r=this.getRequest();if(r===null){this.addError(1002,"request null");return false;}b=this.getResponse();if(b===null){this.addError(1003,"response null");return false;}c=r.getRequestStructure();if(c===null){d="{}";}else{d=f.PrUtils.serialize(c,false,false,0);}if(a==="\/sap\/bc\/ina\/service\/v2\/GetServerInfo"){D("Ina-Request:");D(d);e=$.db.ina.getServiceInfo(d);D("Ina-Response:");D(e);}else{if(a==="\/sap\/bc\/ina\/service\/v2\/GetResponse"){D("Ina-Request:");D(d);e=$.db.ina.getResponse(d);D("Ina-Response:");D(e);}else{if(a!=="\/sap\/hana\/xs\/formLogin\/logout.xscfunc"){this.addError(1004,"illegal path");return false;}e=null;}}if(f.XStringUtils.isNotNullAndNotEmpty(e)){j=f.JsonParserFactory.newInstance();h=j.parse(e);if(j.hasErrors()){this.addAllMessages(j);return false;}else if(h!==null){if(h.getType()!==f.PrElementType.STRUCTURE){this.addError(1005,"wrong json response type");return false;}else{b.setRootElement(h);}}}this.setData(b);return false;};f.RpcFunctionInaSql=function(){f.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionInaSql";};f.RpcFunctionInaSql.prototype=new f.DfRpcFunction();f.RpcFunctionInaSql.prototype.setupRpcFunction=function(s,c,n){this.m_name=n;this.setupFunction(s,c,null);};f.RpcFunctionInaSql.prototype.releaseObject=function(){this.m_name=null;f.DfRpcFunction.prototype.releaseObject.call(this);};f.RpcFunctionInaSql.prototype.getName=function(){return this.m_name;};f.RpcFunctionInaSql.prototype.processSynchronization=function(){var a=this.getName();var r;var b;var c;var d;var j;var e;var h;var i;if(f.XStringUtils.isNullOrEmpty(a)){this.addError(1001," path null");return false;}r=this.getRequest();if(r===null){this.addError(1002,"request null");return false;}b=this.getResponse();if(b===null){this.addError(1003,"response null");return false;}h=r.getConnectionInfo().getNativeConnection();if(typeof h.prepareCall!=="function"){this.addError(1004,"Native connection has to be a $.db connection");return false;}if(a==="\/sap\/bc\/ina\/service\/v2\/GetServerInfo"){i=h.prepareCall("CALL SYS.EXECUTE_MDS('GetServerInfo', '', '', '', '', '', ?)");i.execute();d=i.getNClob(1);}else if(a==="\/sap\/bc\/ina\/service\/v2\/GetResponse"){var k=r.getRequestType();if(k===f.RpcRequestType.NONE){this.addError(1005,"No request structure was set");return false;}else if(k===f.RpcRequestType.UNKNOWN){this.addError(1006,"Unknown request type: "+c);return false;}else if(k===f.RpcRequestType.BATCH){k=f.RpcRequestType.ANALYTICS;}c=f.PrUtils.serialize(r.getRequestStructure(),false,false,0);i=h.prepareCall("CALL EXECUTE_MDS('"+k.getName()+"', '', '', '', '', ?, ?)");i.setNClob(1,c);i.execute();d=i.getNClob(2);}else if(a==="\/sap\/hana\/xs\/formLogin\/logout.xscfunc"){d=null;}else{this.addError(1007,"illegal path");return false;}if(f.XStringUtils.isNotNullAndNotEmpty(d)){j=f.JsonParserFactory.newInstance();e=j.parse(d);if(j.hasErrors()){this.addAllMessages(j);return false;}else if(e!==null){if(e.getType()!==f.PrElementType.STRUCTURE){this.addError(1008,"wrong json response type");return false;}else{b.setRootElement(e);}}}this.setData(b);return false;};f.RpcFunctionInaServerFactory=function(){f.RpcFunctionFactory.call(this);this._ff_c="RpcFunctionInaServerFactory";};f.RpcFunctionInaServerFactory.prototype=new f.RpcFunctionFactory();f.RpcFunctionInaServerFactory.staticSetup=function(){if(typeof $!=="undefined"&&$.db!==undefined&&$.db.ina!==undefined){var n=new f.RpcFunctionInaServerFactory();f.RpcFunctionFactory.registerFactory(f.ProtocolType.INA_DB,null,n);f.RpcFunctionFactory.registerFactory(f.ProtocolType.INA_SQL,null,n);}};f.RpcFunctionInaServerFactory.prototype.newRpcFunction=function(c,a,n,s,b){var r=null;if(b===f.ProtocolType.INA_DB){r=new f.RpcFunctionInaDB();}else if(b===f.ProtocolType.INA_SQL){r=new f.RpcFunctionInaSql();}var d=c.getSession();r.setupRpcFunction(d,a,n);return r;};f.NativeNetworkEnv=function(){f.NetworkEnv.call(this);this._ff_c="NativeNetworkEnv";};f.NativeNetworkEnv.prototype=new f.NetworkEnv();f.NativeNetworkEnv.staticSetup=function(){f.NetworkEnv.setNative(new f.NativeNetworkEnv());};f.NativeNetworkEnv.prototype.getNativeLocation=function(){var u=f.XUri.create();if(f.XSystemUtils.isBrowser()){var l=window.location;var a=l.protocol;var i=a.indexOf(":");if(i!==-1){a=a.substring(0,i);}u.setScheme(a);u.setHost(l.hostname);var b=0;if(l.port!==null&&l.port!==""){b=parseInt(l.port);if(isNaN(b)){b=0;}}u.setPort(b);u.setPath(l.pathname);var h=l.hash;if(h!==null&&h!==""){if(h.indexOf("#")===0){h=h.substring(1);}h=decodeURIComponent(h);u.setFragment(h);}var s=l.search;if(s!==null&&s!==""){s=decodeURIComponent(s);u.setQuery(s);}}return u;};f.NativeNetworkEnv.prototype.getNativeFragment=function(){return this.getNativeLocation().getFragment();};f.NativeNetworkEnv.prototype.setNativeFragment=function(a){if(f.XSystemUtils.isBrowser()){if(a===null){var u=window.location.toString();if(u.indexOf("#")>0){u=u.substring(0,u.indexOf("#"));}window.history.pushState({},document.title,u);}else{window.location.hash=a;}}};f.NativeNetworkEnv.prototype.setNativeDomain=function(d){if(f.XSystemUtils.isBrowser()){document.domain=d;}};f.NativeDocumentEnv=function(){f.DocumentEnv.call(this);this._ff_c="NativeDocumentEnv";};f.NativeDocumentEnv.prototype=new f.DocumentEnv();f.NativeDocumentEnv.staticSetup=function(){f.DocumentEnv.setNative(new f.NativeDocumentEnv());};f.NativeDocumentEnv.prototype.setNativeStringAtId=function(i,v){if(f.XSystemUtils.isBrowser()){var d=document.getElementById(i);if(d!==null&&d!==undefined){d.innerHTML=v;}}};f.NativeUserSettingsFactory=function(){f.UserSettingsFactory.call(this);this._ff_c="NativeUserSettingsFactory";};f.NativeUserSettingsFactory.prototype=new f.UserSettingsFactory();f.NativeUserSettingsFactory.staticSetup=function(){f.UserSettingsFactory.registerFactory(new f.NativeUserSettingsFactory());};f.NativeUserSettingsFactory.prototype.newUserSettings=function(s){return f.NativeUserSettings.create(s);};f.NativeUserSettings=function(s){this.m_session=s;f.UserSettings.call(this);this._ff_c="NativeUserSettings";};f.NativeUserSettings.prototype=new f.UserSettings();f.NativeUserSettings.create=function(s){return new f.NativeUserSettings(s);};f.NativeUserSettings.releaseObject=function(){this.m_session=null;f.UserSettings.prototype.releaseObject.call(this);};f.NativeUserSettings.prototype.getStringByKey=function(n){return localStorage.getItem(n);};f.NativeUserSettings.prototype.getStringByKeyExt=function(n,d){if(localStorage.getItem(n)===null||localStorage.getItem(n)===undefined){return d;}return this.getStringByKey(n);};f.NativeUserSettings.prototype.putString=function(n,v){localStorage.setItem(n,v);};f.NativeUserSettings.prototype.getBooleanByKey=function(n){return localStorage.getItem(n)==="true";};f.NativeUserSettings.prototype.getBooleanByKeyExt=function(n,d){if(localStorage.getItem(n)===null||localStorage.getItem(n)===undefined){return d;}return this.getBooleanByKey(n);};f.NativeUserSettings.prototype.putBoolean=function(n,v){localStorage.setItem(n,v);};f.NativeUserSettings.prototype.getLongByKey=function(n){return parseInt(localStorage.getItem(n));};f.NativeUserSettings.prototype.getLongByKeyExt=function(n,d){if(localStorage.getItem(n)===null||localStorage.getItem(n)===undefined){return d;}return this.getLongByKey(n);};f.NativeUserSettings.prototype.putLong=function(n,v){localStorage.setItem(n,v);};f.NativeUserSettings.prototype.getIntegerByKey=function(n){return parseInt(localStorage.getItem(n),10);};f.NativeUserSettings.prototype.getIntegerByKeyExt=function(n,d){if(localStorage.getItem(n)===null||localStorage.getItem(n)===undefined){return d;}return this.getIntegerByKey(n);};f.NativeUserSettings.prototype.putInteger=function(n,v){localStorage.setItem(n,v);};f.NativeUserSettings.prototype.getDoubleByKey=function(n){return parseFloat(localStorage.getItem(n));};f.NativeUserSettings.prototype.getDoubleByKeyExt=function(n,d){if(localStorage.getItem(n)===null||localStorage.getItem(n)===undefined){return d;}return this.getDoubleByKey(n);};f.NativeUserSettings.prototype.putDouble=function(n,v){localStorage.setItem(n,v);};f.NativeUserSettings.prototype.removeKey=function(k){localStorage.removeItem(k);};f.NativeUserSettings.prototype.containsKey=function(k){return localStorage.getItem(name)!==null;};f.NativeXCacheProviderIdbOpenAction=function(){};f.NativeXCacheProviderIdbOpenAction.prototype=new f.SyncAction();f.NativeXCacheProviderIdbOpenAction.prototype._ff_c="NativeXCacheProviderIdbOpenAction";f.NativeXCacheProviderIdbOpenAction.m_openReq=null;f.NativeXCacheProviderIdbOpenAction.createAndRun=function(s,l,c,a){var o=new f.NativeXCacheProviderIdbOpenAction();o.setupActionAndRun(s,l,c,a);return o;};f.NativeXCacheProviderIdbOpenAction.prototype.processSynchronization=function(s){var m=this;var c=this.getActionContext();this.setData(c);var i=c.getIDB();var o=i.open("ff_cache25",25);o.onerror=function(e){};o.onupgradeneeded=function(e){var d=e.target.result;if(d!==null){if(d.objectStoreNames.contains("main")===false){var a=d.createObjectStore("main",{keyPath:["namespace","name"]});a.createIndex("namespace","namespace",{unique:false});a.createIndex("name","name",{unique:false});a.createIndex("value","value",{unique:false});}}};o.onsuccess=function(e){var a=e.target.result;c.setActiveDb(a);m.endSync();};return true;};f.NativeXCacheProviderIdbOpenAction.prototype.callListener=function(e,l,d,c){l.onCacheProviderOpen(e,d,c);};f.NativeXCacheProviderIdbWriteAction=function(){};f.NativeXCacheProviderIdbWriteAction.prototype=new f.SyncAction();f.NativeXCacheProviderIdbWriteAction.prototype._ff_c="NativeXCacheProviderIdbWriteAction";f.NativeXCacheProviderIdbWriteAction.prototype.m_namespace=null;f.NativeXCacheProviderIdbWriteAction.prototype.m_name=null;f.NativeXCacheProviderIdbWriteAction.prototype.m_content=null;f.NativeXCacheProviderIdbWriteAction.prototype.m_maxCount=0;f.NativeXCacheProviderIdbWriteAction.createAndRun=function(s,l,c,a,n,b,d,m){var o=new f.NativeXCacheProviderIdbWriteAction();o.m_namespace=n;o.m_name=b;o.m_content=d;o.setData(d);o.m_maxCount=m;o.setupActionAndRun(s,l,c,a);return o;};f.NativeXCacheProviderIdbWriteAction.prototype.processSynchronization=function(s){var m=this;var a=this.m_content.getString();var c=this.getActionContext();var b=c.getActiveDb();var t=b.transaction(["main"],"readwrite");var d=t.objectStore("main");var r=d.add({namespace:this.m_namespace,name:this.m_name,value:a});r.onsuccess=function(e){console.log("The data has been written successfully");c.incWriteHit(m.m_namespace);m.endSync();};r.onerror=function(e){console.log("The data has been written failed");m.endSync();};return true;};f.NativeXCacheProviderIdbWriteAction.prototype.callListener=function(e,l,d,c){l.onCacheWrite(e,d,c);};f.NativeXCacheProviderIdbReadAction=function(){};f.NativeXCacheProviderIdbReadAction.prototype=new f.SyncAction();f.NativeXCacheProviderIdbReadAction.prototype._ff_c="NativeXCacheProviderIdbReadAction";f.NativeXCacheProviderIdbReadAction.prototype.m_namespace=null;f.NativeXCacheProviderIdbReadAction.prototype.m_name=null;f.NativeXCacheProviderIdbReadAction.prototype.m_validityTime=0;f.NativeXCacheProviderIdbReadAction.createAndRun=function(s,l,c,a,n,b,v){var o=new f.NativeXCacheProviderIdbReadAction();o.m_namespace=n;o.m_name=b;o.m_validityTime=v;o.setupActionAndRun(s,l,c,a);return o;};f.NativeXCacheProviderIdbReadAction.prototype.processSynchronization=function(s){var m=this;var c=this.getActionContext();var a=c.getActiveDb();var t=a.transaction(["main"],"readwrite");var b=t.objectStore("main");var r=b.get([this.m_namespace,this.m_name]);r.onsuccess=function(e){var d=e.target.result;if(d!==undefined){var v=d.value;console.log("The data has been read successfully");c.incHit(m.m_namespace);var h=f.XContent.createStringContent(f.ContentType.TEXT,v);m.setData(h);}else{c.incMissedHit(m.m_namespace);m.addError("The data read has been failed");}m.endSync();};r.onerror=function(e){c.incMissedHit(m.m_namespace);m.addError("The data read has been failed");m.endSync();};return true;};f.NativeXCacheProviderIdbReadAction.prototype.callListener=function(e,l,d,c){l.onCacheRead(e,d,c);};f.NativeXCacheProviderIdb=function(){f.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderIdb";};f.NativeXCacheProviderIdb.prototype=new f.DfXCacheProvider();f.NativeXCacheProviderIdb.m_indexedDB=null;f.NativeXCacheProviderIdb.m_activeDb=null;f.NativeXCacheProviderIdb.create=function(s){var a=new f.NativeXCacheProviderIdb();a.setupSessionContext(s);return a;};f.NativeXCacheProviderIdb.prototype.setupSessionContext=function(s){f.DfXCacheProvider.prototype.setupSessionContext.call(this,s);var w=(typeof window!=="undefined")?window:{};this.m_indexedDB=w.indexedDB||w.mozIndexedDB||w.webkitIndexedDB||w.msIndexedDB;};f.NativeXCacheProviderIdb.prototype.processOpen=function(s,l,c){return f.NativeXCacheProviderIdbOpenAction.createAndRun(s,l,c,this);};f.NativeXCacheProviderIdb.prototype.getPrefix=function(){return"";};f.NativeXCacheProviderIdb.prototype.writeStringToCache=function(n,a,s,m){var r=this.m_activeDb.transaction(["main"],"readwrite").objectStore("main").add({namespace:n,name:a,value:s});r.onsuccess=function(e){console.log("The data has been written successfully");};r.onerror=function(e){console.log("The data has been written failed");};};f.NativeXCacheProviderIdb.prototype.getStringByKey=function(n){return null;};f.NativeXCacheProviderIdb.prototype.clearCacheInternal=function(n){};f.NativeXCacheProviderIdb.prototype.getIDB=function(){return this.m_indexedDB;};f.NativeXCacheProviderIdb.prototype.setActiveDb=function(a){this.m_activeDb=a;};f.NativeXCacheProviderIdb.prototype.getActiveDb=function(){return this.m_activeDb;};f.NativeXCacheProviderIdb.prototype.processWrite=function(s,l,c,n,a,b,m){return f.NativeXCacheProviderIdbWriteAction.createAndRun(s,l,c,this,n,a,b,m);};f.NativeXCacheProviderIdb.prototype.processRead=function(s,l,c,n,a,v){return f.NativeXCacheProviderIdbReadAction.createAndRun(s,l,c,this,n,a,v);};f.NativeXCacheProviderLs=function(){f.DfXCacheProvider.call(this);this._ff_c="NativeXCacheProviderLs";};f.NativeXCacheProviderLs.prototype=new f.DfXCacheProvider();f.NativeXCacheProviderLs.create=function(s){var a=new f.NativeXCacheProviderLs();a.setupSessionContext(s);return a;};f.NativeXCacheProviderLs.prototype.getPrefix=function(){return"sap.ff";};f.NativeXCacheProviderLs.prototype.putString=function(n,s){try{window.localStorage.setItem(n,s);}catch(e){this.logError2("Error occured during cache writing: ",e.message);}};f.NativeXCacheProviderLs.prototype.getStringByKey=function(n){return window.localStorage.getItem(n);};f.NativeXCacheProviderLs.prototype.clearCacheInternal=function(n){window.localStorage.clear();};f.NativeXCacheProviderFactory=function(){f.XCacheProviderFactory.call(this);this._ff_c="NativeXCacheProviderFactory";};f.NativeXCacheProviderFactory.prototype=new f.XCacheProviderFactory();f.NativeXCacheProviderFactory.staticSetup=function(){var w=(typeof window!=="undefined")?window:{};if(typeof(w.localStorage)!=="undefined"){var a=new f.NativeXCacheProviderFactory();f.XCacheProviderFactory.registerFactory(f.XCacheProviderFactory.DRIVER_LOCAL_STORAGE,a);}var i=w.indexedDB||w.mozIndexedDB||w.webkitIndexedDB||w.msIndexedDB;if(i!=="undefined"&&i!==null){f.XCacheProviderFactory.registerFactory(f.XCacheProviderFactory.DRIVER_INDEX_DB,a);}};f.NativeXCacheProviderFactory.prototype.newDeviceCacheAccess=function(s,d){var a=null;if(d==f.XCacheProviderFactory.DRIVER_LOCAL_STORAGE){a=new f.NativeXCacheProviderLs.create(s);}else if(d==f.XCacheProviderFactory.DRIVER_INDEX_DB){a=new f.NativeXCacheProviderIdb.create(s);}return a;};var p=typeof window!=="undefined"&&window.Promise?window.Promise:null;f.RpcFunctionWasabi=function(){f.DfRpcFunction.call(this);this.m_name=null;this._ff_c="RpcFunctionWasabi";};f.RpcFunctionWasabi.prototype=new f.DfRpcFunction();f.RpcFunctionWasabi.prototype.setupRpcFunction=function(s,c,n){this.m_name=n;this.setupFunction(s,c,null);};f.RpcFunctionWasabi.prototype.releaseObject=function(){this.m_name=null;f.DfRpcFunction.prototype.releaseObject.call(this);};f.RpcFunctionWasabi.prototype.getName=function(){return this.m_name;};f.RpcFunctionWasabi.prototype.processSynchronization=function(){var a=this.getName();var r;var b;var c;var d;var j;var h;var t=this;function i(e){if(f.XStringUtils.isNotNullAndNotEmpty(e)){j=f.JsonParserFactory.newInstance();h=j.parse(e);if(j.hasErrors()){t.addAllMessages(j);return false;}else if(h!==null){if(h.getType()!==f.PrElementType.STRUCTURE){t.addError(1005,"wrong json response type");return false;}else{b.setRootElement(h);}}}return null;}if(f.XStringUtils.isNullOrEmpty(a)){t.addError(1001," path null");return false;}r=t.getRequest();if(r===null){t.addError(1002,"request null");return false;}b=t.getResponse();if(b===null){t.addError(1003,"response null");return false;}c=r.getRequestStructure();if(c===null){d="{}";}else{d=f.PrUtils.serialize(c,false,false,0);}if(a==="/gsaInfo"){p.resolve(null).then(function(){if(sap.zen&&sap.zen.commons&&sap.zen.commons.getServerInfo){return sap.zen.commons.getServerInfo();}throw new Error("Wasabi is not available");}).then(function(s){i(s);t.setData(b);t.endSync();}).catch(function(e){t.addError(1005,"exception: "+e.stack);t.endSync();});return true;}else if(a==="/gsaIna"){p.resolve(null).then(function(){if(sap.zen&&sap.zen.commons&&sap.zen.commons.getResponse){return sap.zen.commons.getResponse(d);}throw new Error("Wasabi is not available");}).then(function(s){i(s);t.setData(b);t.endSync();}).catch(function(e){f.XLogger.println(e.message);t.addError(1005,"exception: "+e.stack);t.endSync();});}else{if(sap.zen&&sap.zen.commons&&sap.zen.commons.logoff){sap.zen.commons.logoff();}return false;}return true;};f.RpcFunctionWasabiFactory=function(){f.RpcFunctionFactory.call(this);this._ff_c="RpcFunctionWasabiFactory";};f.RpcFunctionWasabiFactory.prototype=new f.RpcFunctionFactory();f.RpcFunctionWasabiFactory.staticSetup=function(){if(typeof window!=="undefined"&&window&&window.Promise){var n=new f.RpcFunctionWasabiFactory();f.RpcFunctionFactory.registerFactory(f.ProtocolType.WASABI,null,n);}};f.RpcFunctionWasabiFactory.prototype.newRpcFunction=function(c,a,n,s,b){var r=null;if(b===f.ProtocolType.WASABI){r=new f.RpcFunctionWasabi();}var d=c.getSession();r.setupRpcFunction(d,a,n);return r;};f.NativeSqlOpenAction=function(){};f.NativeSqlOpenAction.prototype=new f.SyncAction();f.NativeSqlOpenAction.prototype._ff_c="NativeSqlOpenAction";f.NativeSqlOpenAction.m_openReq=null;f.NativeSqlOpenAction.createAndRun=function(d,s,l,c,a){var o=new f.NativeSqlOpenAction();o.m_driver=d;o.setupActionAndRun(s,l,c,a);return o;};f.NativeSqlOpenAction.initSqlJs=function(c,s,a){if(typeof window.initSqlJs==="function"){return window.initSqlJs(c).then(s).catch(a);}var i=function(b,t){var d=document.createElement("script");d.src=b;d.crossOrigin="anonymous";if(typeof t==="function"){d.onload=t;}document.getElementsByTagName("head")[0].appendChild(d);};i(c.locateFile("sql-wasm.min.js"),function(){if(typeof window.initSqlJs!=="function"){a("Failed to load sql.js");}else{window.initSqlJs(c).then(s).catch(a);}});};f.NativeSqlOpenAction.prototype.processSynchronization=function(){this.setData(this.m_driver);var c={locateFile:function(a){return"https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.5.0/"+a;}};var t=this.m_driver;if(t.m_SQL){t.m_db=new t.m_SQL.Database();return false;}else{var m=this;f.NativeSqlOpenAction.initSqlJs(c,function(S){t.m_SQL=S;t.m_db=new t.m_SQL.Database();m.endSync();},function(a){t.addError(0,a!==undefined?a.toString():"Unknown error during sql.js init");});return true;}};f.NativeSqlOpenAction.prototype.callListener=function(e,l,d,c){l.onOpened(e,d,c);};f.NativeSqlRsMetaData=function(){f.MessageManager.call(this);this._ff_c="NativeSqlRsMetaData";};f.NativeSqlRsMetaData.prototype=new f.DfSqlRsMetaData();f.NativeSqlRsMetaData.create=function(r){var o=new f.NativeSqlRsMetaData();o.m_columns=[];for(var i=0;i<r.length;i++){for(var j=0;j<r[i].columns.length;j++){var a=i===0;if(!a){var c=r[i].columns[j];for(var l=0;l<o.m_columns.length;l++){if(o.m_columns[l]===c){a=true;break;}}}if(a){var t=null;for(var k=0;k<r[i].values.length;k++){var v=r[i].values[k][j];if(v!==null){var b=typeof v;if(t===null){t=b;}else if(t!==b){t="string";}}}o.m_columns.push({name:r[i].columns[j],type:t});}}}return o;};f.NativeSqlRsMetaData.prototype.get=function(i){return this.m_columns[i].name;};f.NativeSqlRsMetaData.prototype.hasElements=function(){return this.m_columns.length!==0;};f.NativeSqlRsMetaData.prototype.isEmpty=function(){return this.m_columns.length===0;};f.NativeSqlRsMetaData.prototype.size=function(){return this.m_columns.length;};f.NativeSqlRsMetaData.prototype.getType=function(i){switch(this.m_columns[i].type){case"string":return f.SqlResultSetType.STRING;case"number":return f.SqlResultSetType.DOUBLE;case"boolean":return f.SqlResultSetType.BOOLEAN;default:return f.SqlResultSetType.THE_NULL;}};f.NativeSqlResultSet=function(){this._ff_c="NativeSqlResultSet";};f.NativeSqlResultSet.prototype=new f.DfSqlResultSet();f.NativeSqlResultSet.create=function(r){var o=new f.NativeSqlResultSet();o.m_result=r;o.m_i=-1;o.m_j=-1;return o;};f.NativeSqlResultSet.prototype.next=function(){if(this.m_i===-1&&++this.m_j>=this.m_result.length){return false;}if(++this.m_i>=this.m_result[this.m_j].values.length){this.m_i=-1;return this.next();}return true;};f.NativeSqlResultSet.prototype.getByKey=function(k,t){var i=this.m_result[this.m_j].columns.indexOf(k);return i===-1?null:this.getAt(k,t);};f.NativeSqlResultSet.prototype.getAt=function(i,t){var r=this.m_result[this.m_j].values[this.m_i][i];return!t||typeof r===t?r:null;};f.NativeSqlResultSet.prototype.getStringByKeyExt=function(k,d){var r=this.getByKey(k);return r===null?d:r.toString();};f.NativeSqlResultSet.prototype.getStringByKey=function(k){var r=this.getByKey(k);return r===null?null:r.toString();};f.NativeSqlResultSet.prototype.getIntegerByKeyExt=function(k,d){var r=this.getByKey(k,'number');return r!==null&&Math.trunc(r)===r?r:d;};f.NativeSqlResultSet.prototype.getIntegerByKey=function(k){return this.getIntegerByKeyExt(k,0);};f.NativeSqlResultSet.prototype.getLongByKeyExt=f.NativeSqlResultSet.prototype.getIntegerByKeyExt;f.NativeSqlResultSet.prototype.getLongByKey=f.NativeSqlResultSet.prototype.getIntegerByKey;f.NativeSqlResultSet.prototype.getDoubleByKeyExt=function(k,d){var r=this.getByKey(k,'number');return r===null?d:r;};f.NativeSqlResultSet.prototype.getDoubleByKey=function(k){return this.getDoubleByKeyExt(k,0);};f.NativeSqlResultSet.prototype.getBooleanByKeyExt=function(k,d){var r=this.getByKey(k,'boolean');return r===null?d:r;};f.NativeSqlResultSet.prototype.getBooleanByKey=function(k){return this.getBooleanByKeyExt(k,false);};f.NativeSqlResultSet.prototype.getStringAtExt=function(k,d){var r=this.getAt(k);return r===null?d:r.toString();};f.NativeSqlResultSet.prototype.getStringAt=function(k){return this.getStringAtExt(k,null);};f.NativeSqlResultSet.prototype.getIntegerAtExt=function(k,d){var r=this.getAt(k,'number');return r!==null&&Math.trunc(r)===r?r:d;};f.NativeSqlResultSet.prototype.getIntegerAt=function(k){return this.getIntegerAtExt(k,0);};f.NativeSqlResultSet.prototype.getLongAtExt=f.NativeSqlResultSet.prototype.getIntegerAtExt;f.NativeSqlResultSet.prototype.getLongAt=f.NativeSqlResultSet.prototype.getIntegerAt;f.NativeSqlResultSet.prototype.getDoubleAtExt=function(k,d){var r=this.getAt(k,'number');return r===null?d:r;};f.NativeSqlResultSet.prototype.getDoubleAt=function(k){return this.getDoubleAtExt(k,0);};f.NativeSqlResultSet.prototype.getBooleanAtExt=function(k,d){var r=this.getAt(k,'boolean');return r===null?d:r;};f.NativeSqlResultSet.prototype.getBooleanAt=function(k){return this.getBooleanAtExt(k,false);};f.NativeSqlResultSet.prototype.hasNullByKey=function(k){var i=this.m_result[this.m_j].columns.indexOf(k);return this.m_result[this.m_j].values[this.m_i][i]===null;};f.NativeSqlResultSet.prototype.getMetaData=function(){return f.NativeSqlRsMetaData.create(this.m_result);};f.NativeSqlDriver=function(){f.MessageManager.call(this);this._ff_c="NativeSqlDriver";};f.NativeSqlDriver.prototype=new f.MessageManager();f.NativeSqlDriver.create=function(d){var a=new f.NativeSqlDriver();a.setupDriver(d);return a;};f.NativeSqlDriver.prototype.setupDriver=function(){f.MessageManager.prototype.setupSessionContext.call(this);};f.NativeSqlDriver.prototype.open=function(u){this.m_connectionUri=u;if(this.m_SQL){this.m_db=new this.m_SQL.Database();}else{this.addError(0,"Synchronious open is not supported by sql.js");}};f.NativeSqlDriver.prototype.processOpen=function(s,l,c,u){this.m_connectionUri=u;return f.NativeSqlOpenAction.createAndRun(this,s,l,c,this.getSession());};f.NativeSqlDriver.prototype.openExt=f.NativeSqlDriver.prototype.openExt;f.NativeSqlDriver.prototype.processOpenExt=f.NativeSqlDriver.prototype.processOpen;f.NativeSqlDriver.prototype.close=function(){};f.NativeSqlDriver.prototype.executeUpdate=function(s){try{this.m_db.run(s);}catch(e){this.addError(0,e.message);}};f.NativeSqlDriver.prototype.executeQuery=function(s){try{var r=this.m_db.exec(s);return f.NativeSqlResultSet.create(r);}catch(e){this.addError(0,e.message);}return null;};f.NativeSqlDriver.prototype.getConnection=function(){return this.m_connectionUri;};f.NativeSqlDriver.prototype.processExecuteUpdate=function(s,l,c,a){return f.SqlSynchroniousUpdateAction.createAndRun(f.XIntegerValue.create(this.executeUpdate(a)),s,l,c,this.getSession());};f.NativeSqlDriver.prototype.processExecuteQuery=function(s,l,c,a){return f.SqlSynchroniousQueryAction.createAndRun(this.executeQuery(a),s,l,c,this.getSession());};f.NativeSqlDriver.prototype.processGetSchemas=function(s,l,c){this.addError(0,"Not supported");return f.SqlSynchroniousQueryAction.createAndRun(null,s,l,c,this.getSession());};f.NativeSqlDriver.prototype.processGetTables=function(s,l,c){this.addError(0,"Not supported");return f.SqlSynchroniousQueryAction.createAndRun(null,s,l,c,this.getSession());};f.NativeSqlDriver.prototype.processGetColumns=function(s,l,c){this.addError(0,"Not supported");return f.SqlSynchroniousQueryAction.createAndRun(null,s,l,c,this.getSession());};f.NativeSqlDriver.prototype.processGetImportedKeys=function(s,l,c){this.addError(0,"Not supported");return f.SqlSynchroniousQueryAction.createAndRun(null,s,l,c,this.getSession());};f.NativeSqlDriverFactory=function(){f.HttpClientFactory.call(this);this._ff_c="NativeSqlDriverFactory";};f.NativeSqlDriverFactory.prototype=new f.SqlDriverFactory();f.NativeSqlDriverFactory.staticSetup=function(){var a=new f.NativeSqlDriverFactory();f.SqlDriverFactory.registerFactory(a);};f.NativeSqlDriverFactory.prototype.newSqlDriver=function(d){return f.NativeSqlDriver.create(d);};f.IoNativeModule=function(){f.DfModule.call(this);this._ff_c="IoNativeModule";};f.IoNativeModule.prototype=new f.DfModule();f.IoNativeModule.s_module=null;f.IoNativeModule.getInstance=function(){var n=f.IoNativeModule;if(n.s_module===null){if(f.IoModule.getInstance()===null){throw new Error("Initialization Exception");}n.s_module=f.DfModule.startExt(new f.IoNativeModule());f.NativeNetworkEnv.staticSetup();f.NativeDispatcher.staticSetup();f.NativeHttpClientFactory.staticSetup();f.RpcFunctionInaServerFactory.staticSetup();f.RpcFunctionWasabiFactory.staticSetup();f.NativeUserSettingsFactory.staticSetup();f.NativeXCacheProviderFactory.staticSetup();f.NativeSqlDriverFactory.staticSetup();f.NativeDocumentEnv.staticSetup();if(f.XSystemUtils.isNode()){f.userSession={};f.NativeXFileSystem.staticSetup();f.NativeXFileSystemFactory.staticSetup();}f.DfModule.stopExt(n.s_module);}return n.s_module;};f.IoNativeModule.prototype.getName=function(){return"ff0210.io.native";};f.IoNativeModule.getInstance();return sap.firefly;});
