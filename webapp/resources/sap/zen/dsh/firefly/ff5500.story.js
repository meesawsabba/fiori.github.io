/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/zen/dsh/firefly/ff2100.runtime","sap/zen/dsh/firefly/ff4000.protocol.ina"],function(f){"use strict";f.OcOrcaUtils={processTime:function(t){var p=f.XString.replace(t,"T"," ");return f.XStringUtils.stripRight(p,8);}};f.OcStoryCatalog=function(){};f.OcStoryCatalog.prototype=new f.XObject();f.OcStoryCatalog.prototype._ff_c="OcStoryCatalog";f.OcStoryCatalog.prototype.m_nameToStory=null;f.OcStoryCatalog.prototype.hasElements=function(){return this.getCatalogItems().hasElements();};f.OcStoryCatalog.prototype.getCatalogItems=function(){return this.getStoryByNameMap().getValuesAsReadOnlyList();};f.OcStoryCatalog.prototype.getCatalogItemdByStoryId=function(s){var a=this.getCatalogItems();var b=a.size();for(var i=0;i<b;i++){var c=a.get(i);if(f.XString.isEqual(c.getId(),s)){return c;}}return null;};f.OcStoryCatalog.prototype.getCatalogItemByStoryName=function(s){return this.getStoryByNameMap().getByKey(s);};f.OcStoryCatalog.prototype.addStory=function(s){this.getStoryByNameMap().put(s.getName(),s);};f.OcStoryCatalog.prototype.getStoryByNameMap=function(){if(f.isNull(this.m_nameToStory)){this.m_nameToStory=f.XLinkedHashMapByString.create();}return this.m_nameToStory;};f.OcStoryCatalog.prototype.releaseObject=function(){this.m_nameToStory=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_nameToStory);f.XObject.prototype.releaseObject.call(this);};f.OcStoryCatalogLoadOptions=function(){};f.OcStoryCatalogLoadOptions.prototype=new f.XObject();f.OcStoryCatalogLoadOptions.prototype._ff_c="OcStoryCatalogLoadOptions";f.OcStoryCatalogLoadOptions.prototype.m_catalogType=null;f.OcStoryCatalogLoadOptions.prototype.m_recentlyAccessedStories=0;f.OcStoryCatalogLoadOptions.prototype.getCatalogType=function(){if(f.isNull(this.m_catalogType)){return f.OcStoryCatalogType.SEARCH_LIST;}return this.m_catalogType;};f.OcStoryCatalogLoadOptions.prototype.setCatalogType=function(c){this.m_catalogType=c;};f.OcStoryCatalogLoadOptions.prototype.getNumberOfRecentlyAccessedStories=function(){return this.m_recentlyAccessedStories;};f.OcStoryCatalogLoadOptions.prototype.setNumberOfRecentlyAccessedStories=function(r){this.m_recentlyAccessedStories=r;};f.OcStoryCatalogLoadOptions.prototype.releaseObject=function(){this.m_catalogType=null;this.m_recentlyAccessedStories=0;f.XObject.prototype.releaseObject.call(this);};f.OcStoryCatalogLoadOptions.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Catalog Type: ").append(this.getCatalogType().getName()).appendNewLine().append("Number of recently accessed stories: ").appendInt(this.getNumberOfRecentlyAccessedStories());return s.toString();};f.OcStoryCatalogParser=function(){};f.OcStoryCatalogParser.prototype=new f.XObject();f.OcStoryCatalogParser.prototype._ff_c="OcStoryCatalogParser";f.OcStoryCatalogParser.prototype.getStoryCatalog=function(o){if(f.isNull(o)){return new f.OcStoryCatalog();}var s;if(o.getType()===f.PrElementType.STRUCTURE){s=o.asStructure().getListByKey(f.OcOrcaConstants.STORY_SUB_NODES);}else{s=o.asList();}var c=this.parseStoryList(s);return c;};f.OcStoryCatalogParser.prototype.parseStoryList=function(o){var c=new f.OcStoryCatalog();var s=o.size();for(var i=0;i<s;i++){var a=o.get(i);if(a.isStructure()){var b=this.parseStoryElement(a.asStructure());if(f.notNull(b)){c.addStory(b);}}}return c;};f.OcStoryCatalogParser.prototype.parseStoryElement=function(o){var r=o.getStringByKey(f.OcOrcaConstants.STORY_RESOURCE_TYPE);if(f.XString.isEqual(r,f.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY)){return this.parseStory(o);}else if(f.XString.isEqual(r,f.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK)){return this.parseLink(o);}return null;};f.OcStoryCatalogParser.prototype.parseLink=function(o){var s=o.getByKey(f.OcOrcaConstants.STORY_SOURCE_RESOURCE);if(f.notNull(s)&&s.isStructure()){return this.parseStory(s.asStructure());}return null;};f.OcStoryCatalogParser.prototype.parseStory=function(o){var s=o.getStringByKey(f.OcOrcaConstants.STORY_RESOURCE_ID);var a=o.getStringByKey(f.OcOrcaConstants.STORY_NAME);var b=f.OcStoryCatalogItem.create(s,a);b.setDescription(o.getStringByKey(f.OcOrcaConstants.STORY_DESCRIPTION));b.setCreateTime(f.OcOrcaUtils.processTime(o.getStringByKey(f.OcOrcaConstants.STORY_CREATED_TIME)));b.setModifiedTime(f.OcOrcaUtils.processTime(o.getStringByKey(f.OcOrcaConstants.STORY_MODIFIED_TIME)));b.setCreatedBy(o.getStringByKey(f.OcOrcaConstants.STORY_CREATED_BY));b.setModifiedBy(o.getStringByKey(f.OcOrcaConstants.STORY_MODIFIED_BY));b.setUpdateCounter(f.OcStoryUtils.getIntegerFromStructureByName(o,f.OcOrcaConstants.STORY_UPDATE_COUNTER));this.addDisplayNames(b,o);return b;};f.OcStoryCatalogParser.prototype.addDisplayNames=function(s,o){var c=o.getStringByKey(f.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME);var m="";if(f.isNull(c)){var a=o.getStructureByKey(f.OcOrcaConstants.STORY_DATA);if(f.notNull(a)){var b=a.getStructureByKey(f.OcOrcaConstants.STORY_METADATA);if(f.notNull(b)){c=b.getStringByKey(f.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME);m=b.getStringByKey(f.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME);}}}else{m=o.getStringByKey(f.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME);}s.setCreatedByDisplayName(c);s.setModifiedByDisplayName(m);};f.OrcaSystemConverter=function(){};f.OrcaSystemConverter.prototype=new f.XObject();f.OrcaSystemConverter.prototype._ff_c="OrcaSystemConverter";f.OrcaSystemConverter.CLIENT_CONTEXT="Client";f.OrcaSystemConverter.s_orcaSystemConverter=null;f.OrcaSystemConverter.create=function(){if(f.isNull(f.OrcaSystemConverter.s_orcaSystemConverter)){f.OrcaSystemConverter.s_orcaSystemConverter=new f.OrcaSystemConverter();}return f.OrcaSystemConverter.s_orcaSystemConverter;};f.OrcaSystemConverter.setConverter=function(o){f.OrcaSystemConverter.s_orcaSystemConverter=o;};f.OrcaSystemConverter.getValue=function(i,n,a){var v=i.getStringByKey(n);if(f.isNull(v)){v=i.getStringByKey(a);}return v;};f.OrcaSystemConverter.prototype.convert=function(c,a,b){var m=c.getSystemDescription();var s=c.getSession();var l=f.XList.create();var d=a.getStructureByKey("Systems");if(f.notNull(d)){var n=d.getKeysAsReadOnlyListOfString();for(var i=0;i<n.size();i++){var e=n.get(i);if(f.XString.isEqual(b,f.OrcaSystemConverter.CLIENT_CONTEXT)||!f.XString.isEqual(f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,e)&&!f.XString.isEqual(m.getSystemName(),e)){var g=d.getStructureByKey(n.get(i));var h=this.convertToProperties(g,m,b);if(f.notNull(h)){var j=f.SystemDescription.createExt(s,null,e,h);l.add(j);}}}}return l;};f.OrcaSystemConverter.prototype.convertToProperties=function(a,m,c){var o=f.PrFactory.createStructure();var s=f.OrcaSystemConverter.getValue(a,"SYSTEM_TYPE","systemType");var b=f.SystemType.lookup(s);if(f.isNull(b)){return null;}if(b.isTypeOf(f.SystemType.BW)){var d=f.OrcaSystemConverter.getValue(a,"CLIENT","client");o.putString(f.ConnectionParameters.CLIENT,d);}var e=f.OrcaSystemConverter.getValue(a,"FPA_AUTHENTICATION_METHOD","authenticationMethod");if(f.isNull(e)||f.XString.isEqual(e,"NOAUTH")||f.XString.isEqual(e,"NONE")){o.putString(f.ConnectionParameters.AUTHENTICATION_TYPE,f.AuthenticationType.NONE.getName());}else if(f.XString.isEqual(e,"SAML")){o.putString(f.ConnectionParameters.AUTHENTICATION_TYPE,f.AuthenticationType.SAML_WITH_PASSWORD.getName());}else if(f.XString.isEqual(e,"BASIC")){o.putString(f.ConnectionParameters.AUTHENTICATION_TYPE,f.AuthenticationType.BASIC.getName());}var g=f.OrcaSystemConverter.getValue(a,"FPA_CONNECTION_TYPE","connectionType");o.putString("connectionType",g);var h=a.getBooleanByKeyExt(f.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,false);if(h){o.putString(f.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE,"YES");}var p=f.OrcaSystemConverter.getValue(a,"PROTOCOL","protocol");o.putString(f.ConnectionParameters.PROTOCOL,p);var j=f.OrcaSystemConverter.getValue(a,"HOST","host");o.putString(f.ConnectionParameters.HOST,j);var k=f.OrcaSystemConverter.getValue(a,"PORT","port");o.putString(f.ConnectionParameters.PORT,k);o.putString(f.ConnectionParameters.SYSTEM_TYPE,s);var w=f.OrcaSystemConverter.getValue(a,"WEBDISPATCHER_URI","webdispatcherUri");if(f.XStringUtils.isNotNullAndNotEmpty(w)){var l=f.OrcaSystemConverter.getValue(a,"PREFIX","prefix");o.putString(f.ConnectionParameters.PREFIX,l);var n=f.XStringBuffer.create().append(m.getScheme()).append("://").append(m.getHost()).append(":").appendInt(m.getPort()).append(w).toString();o.putString(f.ConnectionParameters.WEBDISPATCHER_URI,n);}var q=f.XProperties.create();var r=o.getKeysAsReadOnlyListOfString();for(var i=0;i<r.size();i++){var t=r.get(i);var v=o.getStringByKey(t);q.put(t,v);}return q;};f.OcOrcaContext=function(){};f.OcOrcaContext.prototype=new f.XObject();f.OcOrcaContext.prototype._ff_c="OcOrcaContext";f.OcOrcaContext.create=function(s,a,c){var b=new f.OcOrcaContext();b.setupContext(s,a,c);return b;};f.OcOrcaContext.prototype.m_tolerant=false;f.OcOrcaContext.prototype.m_storyEntityHelper=null;f.OcOrcaContext.prototype.m_storyEntityFactory=null;f.OcOrcaContext.prototype.m_messageManager=null;f.OcOrcaContext.prototype.m_connection=null;f.OcOrcaContext.prototype.setupContext=function(s,a,c){f.XObject.prototype.setup.call(this);if(f.isNull(s)||!s.hasElements()){throw f.XException.createIllegalArgumentException("The story cannot be null or empty");}this.m_connection=c;this.m_messageManager=this.createMessageManager(a);this.m_tolerant=true;this.m_storyEntityHelper=f.OcOrcaStoryEntityHelper.create(s,this);};f.OcOrcaContext.prototype.getMessageManager=function(){return this.m_messageManager;};f.OcOrcaContext.prototype.getConnection=function(){return this.m_connection;};f.OcOrcaContext.prototype.isTolerant=function(){return this.m_tolerant;};f.OcOrcaContext.prototype.setIsTolerant=function(v){this.m_tolerant=v;};f.OcOrcaContext.prototype.getStoryEntityFactory=function(){if(f.isNull(this.m_storyEntityFactory)){this.m_storyEntityFactory=f.OcOrcaStoryEntityFactory.create(this);}return this.m_storyEntityFactory;};f.OcOrcaContext.prototype.getStoryEntityHelper=function(){return this.m_storyEntityHelper;};f.OcOrcaContext.prototype.createMessageManager=function(s){if(f.isNull(s)){return f.MessageManagerSimple.createMessageManager();}return f.MessageManager.createMessageManagerExt(s);};f.OcOrcaContext.prototype.releaseObject=function(){this.m_connection=null;this.m_messageManager=f.XObjectExt.release(this.m_messageManager);this.m_storyEntityHelper=f.XObjectExt.release(this.m_storyEntityHelper);this.m_storyEntityFactory=f.XObjectExt.release(this.m_storyEntityFactory);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaStoryEntityFactory=function(){};f.OcOrcaStoryEntityFactory.prototype=new f.XObject();f.OcOrcaStoryEntityFactory.prototype._ff_c="OcOrcaStoryEntityFactory";f.OcOrcaStoryEntityFactory.create=function(c){var a=new f.OcOrcaStoryEntityFactory();a.setupFactory(c);return a;};f.OcOrcaStoryEntityFactory.prototype.m_context=null;f.OcOrcaStoryEntityFactory.prototype.m_pageWidgetHelper=null;f.OcOrcaStoryEntityFactory.prototype.setupFactory=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaStoryEntityFactory.prototype.createPagesOfStory=function(s){return this.createPageByPageIdMap(s);};f.OcOrcaStoryEntityFactory.prototype.createWidgetsOfPage=function(p){return this.createWidgetByWidgetIdMap(p);};f.OcOrcaStoryEntityFactory.prototype.createDatasets=function(){return f.OcOrcaDatasets.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createThresholds=function(){return f.OcOrcaThresholds.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createCalculations=function(){return f.OcOrcaCalculations.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createFieldSelections=function(){return f.OcOrcaFieldSelections.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createCalculationVariables=function(){return f.OcOrcaCalculationVariables.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createMeasurySyncs=function(){return f.OcOrcaMeasureSyncs.create(this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createImages=function(s){return f.OcOrcaImages.create(s,this.getContext());};f.OcOrcaStoryEntityFactory.prototype.createPageByPageIdMap=function(s){var p=f.XLinkedHashMapByString.create();var a=this.getPageWidgetHelper().getPageIds();if(!f.XCollectionUtils.hasElements(a)){return p;}for(var i=0;i<a.size();i++){var b=a.get(i);var c=this.getPageWidgetHelper().getPageJsonByPageId(b);if(f.notNull(c)){var d=c.getStringByKey(f.OcOrcaConstants.PAGE_TITLE);var e=f.OcOrcaPage.create(b,d,c,s);if(f.notNull(e)){p.put(b,e);}}}return p;};f.OcOrcaStoryEntityFactory.prototype.createWidgetByWidgetIdMap=function(p){var w=f.XLinkedHashMapByString.create();var a=this.getPageWidgetHelper().getWidgetIdsByPageId(p.getId());if(!f.XCollectionUtils.hasElements(a)){return w;}for(var i=0;i<a.size();i++){var b=a.get(i);var c=this.createWidget(b,p);if(f.notNull(c)){w.put(b,c);}}return w;};f.OcOrcaStoryEntityFactory.prototype.getFirstWidgetByType=function(p,t){var w=this.getPageWidgetHelper().getWidgetIdsByPageId(p.getId());if(!f.XCollectionUtils.hasElements(w)){return null;}for(var i=0;i<w.size();i++){var a=w.get(i);var b=this.getPageWidgetHelper().getWidgetJsonByWidgetId(a);if(f.isNull(b)){return null;}var c=b.getStringByKey(f.OcOrcaConstants.WIDGET_CLASS);var d=f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(b,f.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE);if(t===f.OcWidgetType.KPI&&f.XString.containsString(c,f.OcOrcaConstants.WIDGET_TYPE_CHART)&&(f.XString.isEqual(d,"metric")||f.XString.isEqual(d,"bullet"))){return f.OcOrcaKpiWidget.create(a,b,p);}else if(t===f.OcWidgetType.ANALYTICAL_CARD&&f.XString.containsString(c,f.OcOrcaConstants.WIDGET_TYPE_CHART)&&(f.XString.isEqual(d,"metric")||f.XString.isEqual(d,"bullet"))){return f.OcOrcaAnalyticalCardWidget.create(a,b,p);}else if(t===f.OcWidgetType.CHART&&f.XString.containsString(c,f.OcOrcaConstants.WIDGET_TYPE_CHART)&&!f.XString.isEqual(d,"metric")&&!f.XString.isEqual(d,"bullet")){return f.OcOrcaChartWidget.create(a,b,p);}else if(t===f.OcWidgetType.GRID&&f.XString.containsString(c,f.OcOrcaConstants.WIDGET_TYPE_TABLE)){return f.OcOrcaGridWidget.create(a,b,p);}}return null;};f.OcOrcaStoryEntityFactory.prototype.createWidget=function(w,p){var a=this.getPageWidgetHelper().getWidgetJsonByWidgetId(w);if(f.isNull(a)){return null;}var b=a.getStringByKey(f.OcOrcaConstants.WIDGET_CLASS);if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_CHART)){return f.OcOrcaChartWidget.create(w,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_TABLE)){return f.OcOrcaGridWidget.create(w,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_TEXT)||f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_HEADER)){return f.OcOrcaWidget.create(w,f.OcWidgetType.TEXT,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_IMAGE)){return f.OcOrcaWidget.create(w,f.OcWidgetType.IMAGE,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM)||f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE)){return f.OcOrcaWidget.create(w,f.OcWidgetType.PICTOGRAM,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER)){return f.OcOrcaWidget.create(w,f.OcWidgetType.PAGE_FILTER,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL)){return f.OcOrcaWidget.create(w,f.OcWidgetType.CALCULATION_INPUT_CONTROL,a,p);}else if(f.XString.containsString(b,f.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL)){return f.OcOrcaWidget.create(w,f.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL,a,p);}return null;};f.OcOrcaStoryEntityFactory.prototype.getPageWidgetHelper=function(){if(f.isNull(this.m_pageWidgetHelper)){this.m_pageWidgetHelper=f.OcOrcaPageWidgetHelper.create(this.getContext());}return this.m_pageWidgetHelper;};f.OcOrcaStoryEntityFactory.prototype.getContext=function(){return this.m_context;};f.OcOrcaStoryEntityFactory.prototype.releaseObject=function(){this.m_context=null;this.m_pageWidgetHelper=f.XObjectExt.release(this.m_pageWidgetHelper);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaCalculationVariables=function(){};f.OcOrcaCalculationVariables.prototype=new f.XObject();f.OcOrcaCalculationVariables.prototype._ff_c="OcOrcaCalculationVariables";f.OcOrcaCalculationVariables.create=function(c){var a=new f.OcOrcaCalculationVariables();a.setupCalculationVariables(c);return a;};f.OcOrcaCalculationVariables.prototype.m_context=null;f.OcOrcaCalculationVariables.prototype.m_calculationVariables=null;f.OcOrcaCalculationVariables.prototype.setupCalculationVariables=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaCalculationVariables.prototype.getCalculationVariableById=function(c){return this.getCalculationVariables().getByKey(c);};f.OcOrcaCalculationVariables.prototype.getCalculationVariables=function(){if(f.notNull(this.m_calculationVariables)){return this.m_calculationVariables;}this.m_calculationVariables=f.XHashMapByString.create();var s=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE);for(var i=0;i<s.size();i++){var a=s.get(i);this.addOrcaCalcVarsToCalcVars(a,this.m_calculationVariables);}return this.m_calculationVariables;};f.OcOrcaCalculationVariables.prototype.addOrcaCalcVarsToCalcVars=function(s,a){var c=s.getListByKey(f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES);if(f.PrUtils.isListEmpty(c)){return;}for(var i=0;i<c.size();i++){var b=c.getStructureAt(i);var d=this.createCalcvarFromOrcaCalcVarEntity(b);if(f.notNull(d)){a.put(d.getId(),d);}}};f.OcOrcaCalculationVariables.prototype.createCalcvarFromOrcaCalcVarEntity=function(c){var a=c.getStructureByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.isNull(a)){return null;}var b=a.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);var d=c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME);var e=a.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE);var g=c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE);var h=f.OcCalculationVariable.create(b,d,e,g);if(f.XString.isEqual(e,f.OcOrcaConstants.STORY_CALCULATION_VARIABLE)){h.setSelectionInfos(c.getStructureByKey(f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO));}return h;};f.OcOrcaCalculationVariables.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper();};f.OcOrcaCalculationVariables.prototype.getContext=function(){return this.m_context;};f.OcOrcaCalculationVariables.prototype.toString=function(){var c=this.getCalculationVariables().getValuesAsReadOnlyList();var s=f.XStringBuffer.create();s.append("calc vars:");for(var i=0;i<c.size();i++){var a=c.get(i);s.appendNewLine().appendInt(i+1).append(". FieldSelection: ").append(a.getId()).append(" of type ").append(a.getCalculationVariableType());}return s.toString();};f.OcOrcaCalculationVariables.prototype.releaseObject=function(){this.m_context=null;this.m_calculationVariables=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculationVariables);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaCalculations=function(){};f.OcOrcaCalculations.prototype=new f.XObject();f.OcOrcaCalculations.prototype._ff_c="OcOrcaCalculations";f.OcOrcaCalculations.create=function(c){var a=new f.OcOrcaCalculations();a.setupCalculations(c);return a;};f.OcOrcaCalculations.prototype.m_context=null;f.OcOrcaCalculations.prototype.m_calculations=null;f.OcOrcaCalculations.prototype.setupCalculations=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaCalculations.prototype.getCalculationByCalculationId=function(c){return this.getCalculations().getByKey(c);};f.OcOrcaCalculations.prototype.getCalculations=function(){if(f.notNull(this.m_calculations)){return this.m_calculations;}this.m_calculations=f.XHashMapByString.create();var c=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_CALCULATION);for(var i=0;i<c.size();i++){var a=c.get(i);this.addOrcaCalculationToCalculations(a,this.m_calculations);}return this.m_calculations;};f.OcOrcaCalculations.prototype.addOrcaCalculationToCalculations=function(c,a){var b=c.getListByKey(f.OcOrcaConstants.STORY_CALCULATION_ENTITIES);if(f.PrUtils.isListEmpty(b)){return;}for(var i=0;i<b.size();i++){var d=b.getStructureAt(i);var e=this.createCalculationFromOrcaCalculationEntity(d);if(f.notNull(e)){a.put(e.getId(),e);}}};f.OcOrcaCalculations.prototype.createCalculationFromOrcaCalculationEntity=function(c){var a=c.getStructureByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.isNull(a)){return null;}var b=a.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);var d=c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_NAME);var e=a.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_TYPE);var g=c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE);var h=a.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_SUBTYPE);if(f.notNull(h)&&!f.XString.startsWith(h,e)){e=f.XStringUtils.concatenate3(e,".",h);}if(f.notNull(g)){e=f.XStringUtils.concatenate3(e,".",g);}var i=f.OcCalculation.create(b,d,e);i.setFormatting(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_FORMAT));if(f.XString.isEqual(e,f.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE)){i.setMeasureId(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));i.setReferenceMeasureId(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));i.setSelections(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_SELECTIONS));}else if(f.XString.startsWith(e,f.OcOrcaConstants.STORY_ENTITY_CALCULATION)||f.XString.startsWith(e,f.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION)){i.setMeasureId(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID));i.setReferenceMeasureId(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID));if(c.containsKey("formulaAST")){var n=f.PrFactory.createStructure();n.putNotNullAndNotEmpty("ast",f.PrUtils.deepCopyElement(c.getStructureByKey("formulaAST")));i.setFormula(n);}else{i.setFormula(c.getByKey(f.OcOrcaConstants.STORY_CALCULATION_FORMULA));}i.setAggregation(c.getStringByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_AGGREGATION,""));i.setAggregationDimensions(c.getListByKey(f.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS));i.setExceptionAggregation(c.getStringByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION,""));i.setExceptionAggregationDimensions(c.getListByKey(f.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS));i.setValuesNotIn(c.getBooleanByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN,false));i.setStartDate(c.getStructureByKey(f.OcOrcaConstants.STORY_CALCULATION_START_DATE));i.setEndDate(c.getStructureByKey(f.OcOrcaConstants.STORY_CALCULATION_END_DATE));i.setStartDateCurrentIfNull(c.getBooleanByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL,false));i.setEndDateCurrentIfNull(c.getBooleanByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL,false));i.setTimezoneOffsetForCurrentDate(c.getIntegerByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,0));i.setResultGranularity(c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY));i.setValueType(c.getStringByKey(f.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE));i.setGroupThresholds(c.getListByKey(f.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS));i.setSelectedDimensionId(c.getStructureByKey(f.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID));i.setToText(c.getBooleanByKeyExt(f.OcOrcaConstants.STORY_CALCULATION_TO_TEXT,false));}return i;};f.OcOrcaCalculations.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper();};f.OcOrcaCalculations.prototype.getContext=function(){return this.m_context;};f.OcOrcaCalculations.prototype.toString=function(){var c=this.getCalculations().getValuesAsReadOnlyList();var s=f.XStringBuffer.create();s.append("Calculations:");for(var i=0;i<c.size();i++){var a=c.get(i);s.appendNewLine().appendInt(i+1).append(". Calculation: ").append(a.getId()).append(" of type ").append(a.getCalculationType());}return s.toString();};f.OcOrcaCalculations.prototype.releaseObject=function(){this.m_context=null;this.m_calculations=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_calculations);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaFieldSelections=function(){};f.OcOrcaFieldSelections.prototype=new f.XObject();f.OcOrcaFieldSelections.prototype._ff_c="OcOrcaFieldSelections";f.OcOrcaFieldSelections.create=function(c){var s=new f.OcOrcaFieldSelections();s.setupFieldSelections(c);return s;};f.OcOrcaFieldSelections.prototype.m_context=null;f.OcOrcaFieldSelections.prototype.m_fieldSelections=null;f.OcOrcaFieldSelections.prototype.setupFieldSelections=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaFieldSelections.prototype.getFieldSelectionByFieldSelectionId=function(a){return this.getFieldSelections().getByKey(a);};f.OcOrcaFieldSelections.prototype.getFieldSelections=function(){if(f.notNull(this.m_fieldSelections)){return this.m_fieldSelections;}this.m_fieldSelections=f.XHashMapByString.create();var s=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION);for(var i=0;i<s.size();i++){var a=s.get(i);this.addOrcaFieldSelectionsToFieldSelections(a,this.m_fieldSelections);}return this.m_fieldSelections;};f.OcOrcaFieldSelections.prototype.addOrcaFieldSelectionsToFieldSelections=function(s,a){var b=s.getListByKey(f.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES);if(f.PrUtils.isListEmpty(b)){return;}for(var i=0;i<b.size();i++){var c=b.getStructureAt(i);var d=this.createFieldSelectionFromOrcaFieldSelectionEntity(c);if(f.notNull(d)){a.put(d.getId(),d);}}};f.OcOrcaFieldSelections.prototype.createFieldSelectionFromOrcaFieldSelectionEntity=function(s){var a=s.getStructureByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.isNull(a)){return null;}var b=a.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);var c=s.getStringByKey(f.OcOrcaConstants.STORY_FIELD_SELECTION_NAME);var d=a.getStringByKey(f.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE);var e=f.OcFieldSelection.create(b,c,d);if(f.XString.isEqual(d,f.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION)||f.XString.isEqual(d,f.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE)){e.setSelectionInfos(s.getStructureByKey(f.OcOrcaConstants.STORY_FIELD_SELECTION_INFO));e.setEntityIds(s.getByKey(f.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS));}return e;};f.OcOrcaFieldSelections.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper();};f.OcOrcaFieldSelections.prototype.getContext=function(){return this.m_context;};f.OcOrcaFieldSelections.prototype.toString=function(){var s=this.getFieldSelections().getValuesAsReadOnlyList();var a=f.XStringBuffer.create();a.append("selections:");for(var i=0;i<s.size();i++){var b=s.get(i);a.appendNewLine().appendInt(i+1).append(". FieldSelection: ").append(b.getId()).append(" of type ").append(b.getFieldSelectionType());}return a.toString();};f.OcOrcaFieldSelections.prototype.releaseObject=function(){this.m_context=null;this.m_fieldSelections=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_fieldSelections);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaMeasureSyncs=function(){};f.OcOrcaMeasureSyncs.prototype=new f.XObject();f.OcOrcaMeasureSyncs.prototype._ff_c="OcOrcaMeasureSyncs";f.OcOrcaMeasureSyncs.create=function(c){var m=new f.OcOrcaMeasureSyncs();m.setupMeasureSyncs(c);return m;};f.OcOrcaMeasureSyncs.prototype.m_context=null;f.OcOrcaMeasureSyncs.prototype.m_measureSyncs=null;f.OcOrcaMeasureSyncs.prototype.setupMeasureSyncs=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaMeasureSyncs.prototype.getMeasureSyncByMeasureName=function(m){return this.getMeasureSyncs().getByKey(m);};f.OcOrcaMeasureSyncs.prototype.getMeasureSyncs=function(){if(f.notNull(this.m_measureSyncs)){return this.m_measureSyncs;}this.m_measureSyncs=f.XHashMapByString.create();var o=this.getStoryEntityHelper().getStoryEntityAsJson();var a=o.getListByKey(f.OcOrcaConstants.STORY_MEASURE_SYNC);if(f.PrUtils.isListEmpty(a)){return this.m_measureSyncs;}for(var i=0;i<a.size();i++){var b=a.getStructureAt(i);var m=f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(b,f.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME);if(f.XStringUtils.isNotNullAndNotEmpty(m)){var c=f.OcMeasureSync.create(m);c.setColor(b.getStringByKey(f.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR));c.setPattern(b.getStringByKey(f.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN));this.m_measureSyncs.put(m,c);}}return this.m_measureSyncs;};f.OcOrcaMeasureSyncs.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper();};f.OcOrcaMeasureSyncs.prototype.getContext=function(){return this.m_context;};f.OcOrcaMeasureSyncs.prototype.toString=function(){var m=this.getMeasureSyncs().getValuesAsReadOnlyList();var s=f.XStringBuffer.create();s.append("Measure Syncs:");for(var i=0;i<m.size();i++){var a=m.get(i);s.appendNewLine().appendInt(i+1).append(". Measure sync for \"").append(a.getName());s.append("\", color ").append(a.getColor()).append(", pattern ").append(a.getPattern());}return s.toString();};f.OcOrcaMeasureSyncs.prototype.releaseObject=function(){this.m_context=null;this.m_measureSyncs=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_measureSyncs);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaPageLayout=function(){};f.OcOrcaPageLayout.prototype=new f.XObject();f.OcOrcaPageLayout.prototype._ff_c="OcOrcaPageLayout";f.OcOrcaPageLayout.create=function(p){var a=new f.OcOrcaPageLayout();a.setupOrcaPageLayout(p);return a;};f.OcOrcaPageLayout.prototype.m_layoutType=null;f.OcOrcaPageLayout.prototype.m_widgetLayoutJsonByWidgetIdMap=null;f.OcOrcaPageLayout.prototype.m_widgetSectionLayoutJsonByWidgetIdMap=null;f.OcOrcaPageLayout.prototype.m_widgetLaneLayoutJsonByWidgetIdMap=null;f.OcOrcaPageLayout.prototype.m_pageLayoutJson=null;f.OcOrcaPageLayout.prototype.setupOrcaPageLayout=function(p){f.XObject.prototype.setup.call(this);this.m_pageLayoutJson=p;};f.OcOrcaPageLayout.prototype.getPageLayoutJson=function(){return this.m_pageLayoutJson;};f.OcOrcaPageLayout.prototype.getLayoutType=function(){if(f.isNull(this.m_layoutType)){this.m_layoutType=f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE);}return this.m_layoutType;};f.OcOrcaPageLayout.prototype.processIsResponsive=function(){return f.XString.isEqual(this.getLayoutType(),f.OcOrcaConstants.PAGE_IS_RESPONSIVE);};f.OcOrcaPageLayout.prototype.hasCanvasLayout=function(){return f.XString.isEqual(this.getLayoutType(),f.OcOrcaConstants.PAGE_LAYOUT_CANVAS);};f.OcOrcaPageLayout.prototype.processBackgroundColor=function(){return f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getPageLayoutJson(),f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR);};f.OcOrcaPageLayout.prototype.getSectionLayoutJsonByWidgetId=function(w){return this.getWigdetSectionLayoutJsonByWidgetIdMap().getByKey(w);};f.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetId=function(w){return this.getLaneLayoutJsonByWidgetIdMap().getByKey(w);};f.OcOrcaPageLayout.prototype.getWidgetLayoutJsonByWidgetId=function(w){return this.getWigdetIdToWidgetLayoutJsonMap().getByKey(w);};f.OcOrcaPageLayout.prototype.getWigdetSectionLayoutJsonByWidgetIdMap=function(){if(f.notNull(this.m_widgetSectionLayoutJsonByWidgetIdMap)){return this.m_widgetSectionLayoutJsonByWidgetIdMap;}this.m_widgetSectionLayoutJsonByWidgetIdMap=f.XHashMapByString.create();var s=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS);if(!f.XCollectionUtils.hasElements(s)){return this.m_widgetSectionLayoutJsonByWidgetIdMap;}for(var i=0;i<s.size();i++){var a=s.get(i);var b=a.getStructureByKey(f.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(f.notNull(b)){var w=f.OcJsonPathEvaluator.getJsonPathElementsAsStrings(a,f.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID);for(var j=0;j<w.size();j++){this.m_widgetSectionLayoutJsonByWidgetIdMap.put(w.get(j),b);}}}return this.m_widgetSectionLayoutJsonByWidgetIdMap;};f.OcOrcaPageLayout.prototype.getLaneLayoutJsonByWidgetIdMap=function(){if(f.notNull(this.m_widgetLaneLayoutJsonByWidgetIdMap)){return this.m_widgetLaneLayoutJsonByWidgetIdMap;}this.m_widgetLaneLayoutJsonByWidgetIdMap=f.XHashMapByString.create();var w=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS);if(!f.XCollectionUtils.hasElements(w)){return this.m_widgetSectionLayoutJsonByWidgetIdMap;}for(var i=0;i<w.size();i++){var a=w.get(i);var b=a.getStringByKey(f.OcOrcaConstants.WIDGET_ID);if(f.XStringUtils.isNullOrEmpty(b)){continue;}var l=f.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(a,f.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);this.m_widgetLaneLayoutJsonByWidgetIdMap.put(b,l);}return this.m_widgetLaneLayoutJsonByWidgetIdMap;};f.OcOrcaPageLayout.prototype.getWigdetIdToWidgetLayoutJsonMap=function(){if(f.notNull(this.m_widgetLayoutJsonByWidgetIdMap)){return this.m_widgetLayoutJsonByWidgetIdMap;}this.m_widgetLayoutJsonByWidgetIdMap=f.XHashMapByString.create();var w=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageLayoutJson(),f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS);if(!f.XCollectionUtils.hasElements(w)){return this.m_widgetLayoutJsonByWidgetIdMap;}for(var i=0;i<w.size();i++){var a=w.get(i);var b=a.getStringByKey(f.OcOrcaConstants.WIDGET_ID);if(f.XStringUtils.isNotNullAndNotEmpty(b)){var c=a.getStructureByKey(f.OcOrcaConstants.WIDGET_SECTION_DEFINITION);if(f.notNull(c)){this.m_widgetLayoutJsonByWidgetIdMap.put(b,c);}}}return this.m_widgetLayoutJsonByWidgetIdMap;};f.OcOrcaPageLayout.prototype.releaseObject=function(){this.m_layoutType=null;this.m_pageLayoutJson=null;this.m_widgetLayoutJsonByWidgetIdMap=f.XObjectExt.release(this.m_widgetLayoutJsonByWidgetIdMap);this.m_widgetSectionLayoutJsonByWidgetIdMap=f.XObjectExt.release(this.m_widgetSectionLayoutJsonByWidgetIdMap);this.m_widgetLaneLayoutJsonByWidgetIdMap=f.XObjectExt.release(this.m_widgetLaneLayoutJsonByWidgetIdMap);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaThresholds=function(){};f.OcOrcaThresholds.prototype=new f.XObject();f.OcOrcaThresholds.prototype._ff_c="OcOrcaThresholds";f.OcOrcaThresholds.create=function(c){var t=new f.OcOrcaThresholds();t.setupThresholds(c);return t;};f.OcOrcaThresholds.prototype.m_context=null;f.OcOrcaThresholds.prototype.m_thresholds=null;f.OcOrcaThresholds.prototype.setupThresholds=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcOrcaThresholds.prototype.getThresholdByDatasource=function(d){return this.getThresholds().getByKey(d);};f.OcOrcaThresholds.prototype.getThresholds=function(){if(f.notNull(this.m_thresholds)){return this.m_thresholds;}this.m_thresholds=f.XHashMapByString.create();var s=this.getStoryEntityHelper().getStoryEntityAsJson();var t=f.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(s,f.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS);if(f.isNull(t)){return this.m_thresholds;}var d=t.getKeysAsReadOnlyListOfString();for(var i=0;i<d.size();i++){var a=d.get(i);this.addOrcaThresholdsToThresholdMap(a,t,this.m_thresholds);}return this.m_thresholds;};f.OcOrcaThresholds.prototype.addOrcaThresholdsToThresholdMap=function(d,t,a){var b=t.getStructureByKey(d);var c=b.getKeysAsReadOnlyListOfString();for(var i=0;i<c.size();i++){var e=c.get(i);var g=b.getStructureByKey(e);this.addOrcaDimensionToThresholdMap(d,g,a);}};f.OcOrcaThresholds.prototype.addOrcaDimensionToThresholdMap=function(d,a,t){var m=a.getKeysAsReadOnlyListOfString();for(var i=0;i<m.size();i++){var b=m.get(i);var c=a.getStructureByKey(b);var e=f.OcThreshold.create(d,c);t.put(d,e);}};f.OcOrcaThresholds.prototype.getStoryEntityHelper=function(){return this.getContext().getStoryEntityHelper();};f.OcOrcaThresholds.prototype.getContext=function(){return this.m_context;};f.OcOrcaThresholds.prototype.toString=function(){var t=this.getThresholds().getValuesAsReadOnlyList();var s=f.XStringBuffer.create();s.append("Thresholds:");for(var i=0;i<t.size();i++){var a=t.get(i);s.appendNewLine().appendInt(i+1).append(". Threshold: ").append(a.getName());}return s.toString();};f.OcOrcaThresholds.prototype.releaseObject=function(){this.m_context=null;this.m_thresholds=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_thresholds);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaPageWidgetHelper=function(){};f.OcOrcaPageWidgetHelper.prototype=new f.XObject();f.OcOrcaPageWidgetHelper.prototype._ff_c="OcOrcaPageWidgetHelper";f.OcOrcaPageWidgetHelper.create=function(c){var h=new f.OcOrcaPageWidgetHelper();h.setupStoryHelper(c);return h;};f.OcOrcaPageWidgetHelper.prototype.m_pageIds=null;f.OcOrcaPageWidgetHelper.prototype.m_widgetIds=null;f.OcOrcaPageWidgetHelper.prototype.m_pageJsonByPageIdMap=null;f.OcOrcaPageWidgetHelper.prototype.m_widgetJsonByWidgetIdMap=null;f.OcOrcaPageWidgetHelper.prototype.m_widgetsIdsByPageIdMap=null;f.OcOrcaPageWidgetHelper.prototype.setupStoryHelper=function(c){f.XObject.prototype.setup.call(this);this.m_pageJsonByPageIdMap=f.XLinkedHashMapByString.create();this.m_widgetJsonByWidgetIdMap=f.XHashMapByString.create();this.m_widgetsIdsByPageIdMap=f.XHashMapByString.create();var p=c.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(f.OcOrcaConstants.STORY_PAGES);for(var i=0;i<p.size();i++){var a=p.getStructureAt(i);if(a.getBooleanByKeyExt(f.OcOrcaConstants.PAGE_IS_HIDDEN,false)){continue;}var b=a.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.XStringUtils.isNullOrEmpty(b)){continue;}this.m_pageJsonByPageIdMap.put(b,a);var w=this.getSortedWidgetJsonsFromPageJson(a);var d=w.getKeysAsReadOnlyListOfString();this.m_widgetsIdsByPageIdMap.put(b,d);for(var j=0;j<d.size();j++){var e=d.get(j);this.m_widgetJsonByWidgetIdMap.put(e,w.getByKey(e));}}};f.OcOrcaPageWidgetHelper.prototype.getPageIds=function(){if(f.isNull(this.m_pageIds)){this.m_pageIds=this.getPageJsonByPageIdMap().getKeysAsReadOnlyListOfString();}return this.m_pageIds;};f.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageId=function(p){return this.getPageJsonByPageIdMap().getByKey(p);};f.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageId=function(p){return this.getWidgetIdsByPageIdMap().getByKey(p);};f.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetId=function(w){return this.getWidgetJsonByWidgetIdMap().getByKey(w);};f.OcOrcaPageWidgetHelper.prototype.getPageJsonByPageIdMap=function(){return this.m_pageJsonByPageIdMap;};f.OcOrcaPageWidgetHelper.prototype.getWidgetJsonByWidgetIdMap=function(){return this.m_widgetJsonByWidgetIdMap;};f.OcOrcaPageWidgetHelper.prototype.getWidgetIdsByPageIdMap=function(){return this.m_widgetsIdsByPageIdMap;};f.OcOrcaPageWidgetHelper.prototype.getSortedWidgetJsonsFromPageJson=function(p){var w=this.getWidgetJsonsFromPageJson(p);var s=this.getSortedWidgetIds(p);var a=f.XLinkedHashMapByString.create();for(var j=0;j<s.size();j++){var b=s.get(j);var c=w.getByKey(b);if(f.notNull(c)){w.remove(b);a.put(b,c);}}var i=w.getKeysAsIteratorOfString();while(i.hasNext()){var r=i.next();var d=w.getByKey(r);a.put(r,d);}return a;};f.OcOrcaPageWidgetHelper.prototype.getWidgetJsonsFromPageJson=function(p){var w=f.XLinkedHashMapByString.create();var a=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(p,f.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET);for(var i=0;i<a.size();i++){var b=a.get(i);var c=b.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.XStringUtils.isNotNullAndNotEmpty(c)){w.put(c,b);}}return w;};f.OcOrcaPageWidgetHelper.prototype.getSortedWidgetIds=function(p){if(this.isPageResponsive(p)){return f.OcJsonPathEvaluator.getJsonPathElementsAsStrings(p,f.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID);}return f.OcJsonPathEvaluator.getJsonPathElementsAsStrings(p,f.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID);};f.OcOrcaPageWidgetHelper.prototype.isPageResponsive=function(p){var l=f.OcJsonPathEvaluator.getJsonPathElementsAsStrings(p,f.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE);return f.XCollectionUtils.hasElements(l)&&f.XString.isEqual(l.get(0),f.OcOrcaConstants.PAGE_IS_RESPONSIVE);};f.OcOrcaPageWidgetHelper.prototype.releaseObject=function(){this.m_pageIds=f.XObjectExt.release(this.m_pageIds);this.m_widgetIds=f.XObjectExt.release(this.m_widgetIds);this.m_pageJsonByPageIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageJsonByPageIdMap);this.m_widgetJsonByWidgetIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetJsonByWidgetIdMap);this.m_widgetsIdsByPageIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsIdsByPageIdMap);f.XObject.prototype.releaseObject.call(this);};f.OcOrcaStoryEntityHelper=function(){};f.OcOrcaStoryEntityHelper.prototype=new f.XObject();f.OcOrcaStoryEntityHelper.prototype._ff_c="OcOrcaStoryEntityHelper";f.OcOrcaStoryEntityHelper.create=function(s,c){var h=new f.OcOrcaStoryEntityHelper();h.setupStoryEntityHelper(s,c);return h;};f.OcOrcaStoryEntityHelper.prototype.m_storyAsJson=null;f.OcOrcaStoryEntityHelper.prototype.m_storyEntityAsJson=null;f.OcOrcaStoryEntityHelper.prototype.m_entitiesAsJsonByEntityTypeMap=null;f.OcOrcaStoryEntityHelper.prototype.m_gridDefinitionByGridIdMap=null;f.OcOrcaStoryEntityHelper.prototype.m_context=null;f.OcOrcaStoryEntityHelper.prototype.setupStoryEntityHelper=function(s,c){f.XObject.prototype.setup.call(this);this.m_context=c;this.m_storyAsJson=s;};f.OcOrcaStoryEntityHelper.prototype.getStoryAsJson=function(){return this.m_storyAsJson;};f.OcOrcaStoryEntityHelper.prototype.getStoryEntityAsJson=function(){if(f.notNull(this.m_storyEntityAsJson)){return this.m_storyEntityAsJson;}var e=this.getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY);if(f.notNull(e)&&e.size()===1){this.m_storyEntityAsJson=e.get(0).getStructureByKey(f.OcOrcaConstants.STORY_ENTITY_DATA);}if(f.isNull(this.m_storyEntityAsJson)){var m=f.OcMessage.newInvalidStoryError();this.getContext().getMessageManager().addMessage(m);throw f.XException.createIllegalArgumentException(m.getText());}return this.m_storyEntityAsJson;};f.OcOrcaStoryEntityHelper.prototype.getContext=function(){return this.m_context;};f.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityType=function(e){var a=this.getEntitiesAsJsonByEntityTypeMap().getByKey(e);if(f.isNull(a)){a=f.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(e,a);}return a;};f.OcOrcaStoryEntityHelper.prototype.getEntitiesAsJsonByEntityTypeMap=function(){if(f.notNull(this.m_entitiesAsJsonByEntityTypeMap)){return this.m_entitiesAsJsonByEntityTypeMap;}this.m_entitiesAsJsonByEntityTypeMap=f.XHashMapByString.create();var a=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getStoryAsJson(),f.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES);for(var i=0;i<a.size();i++){var e=a.get(i);var b=e.getStringByKey(f.OcOrcaConstants.STORY_ENTITY_TYPE);if(f.XStringUtils.isNullOrEmpty(b)){continue;}var c=this.m_entitiesAsJsonByEntityTypeMap.getByKey(b);if(f.isNull(c)){c=f.XList.create();this.m_entitiesAsJsonByEntityTypeMap.put(b,c);}c.add(e);}return this.m_entitiesAsJsonByEntityTypeMap;};f.OcOrcaStoryEntityHelper.prototype.getGridDefinitions=function(){return this.getGridDefinitionByGridIdMap().getValuesAsReadOnlyList();};f.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridId=function(g){return this.getGridDefinitionByGridIdMap().getByKey(g);};f.OcOrcaStoryEntityHelper.prototype.getGridDefinitionByGridIdMap=function(){if(f.notNull(this.m_gridDefinitionByGridIdMap)){return this.m_gridDefinitionByGridIdMap;}this.m_gridDefinitionByGridIdMap=f.XHashMapByString.create();var g=this.getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_GRID);for(var i=0;i<g.size();i++){var a=g.get(i);var b=a.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.notNull(b)){var c=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(a,f.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION);if(f.XCollectionUtils.hasElements(c)){this.m_gridDefinitionByGridIdMap.put(b,f.OcOrcaGridDefinition.create(b,c.get(0)));}}}return this.m_gridDefinitionByGridIdMap;};f.OcOrcaStoryEntityHelper.prototype.releaseObject=function(){this.m_context=null;this.m_storyAsJson=f.XObjectExt.release(this.m_storyAsJson);this.m_storyEntityAsJson=f.XObjectExt.release(this.m_storyEntityAsJson);this.m_entitiesAsJsonByEntityTypeMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_entitiesAsJsonByEntityTypeMap);this.m_gridDefinitionByGridIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_gridDefinitionByGridIdMap);f.XObject.prototype.releaseObject.call(this);};f.OcQuasarDataProviderConverter=function(){};f.OcQuasarDataProviderConverter.prototype=new f.XObject();f.OcQuasarDataProviderConverter.prototype._ff_c="OcQuasarDataProviderConverter";f.OcQuasarDataProviderConverter.convert=function(w,o,p){var d=f.PrFactory.createStructure();var a=f.XStringUtils.concatenate3(w.getStory().getNormalizedName(),"_",w.getNormalizedDataReferenceId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME,a);f.OcQuasarDataProviderConverter.addDatasetsToDocument(w,d);var b=w.getWidgetType();if(b===f.OcWidgetType.CHART||b===f.OcWidgetType.KPI||b===f.OcWidgetType.ANALYTICAL_CARD){var c=w;d.put(f.OcQuasarConstants.QUASAR_GLOBAL_DEF,f.OcQuasarDataProviderConverter.getGlobalDefinition(c));var v=c.getVizDef();if(f.notNull(p)){v.putString(f.OcQuasarConstants.STORY_PAGE_ID,p);}d.put(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF,v);f.OcQuasarDataProviderConverter.addThresholdDefinition(c);}else if(b===f.OcWidgetType.GRID){var e=w.getFireflyQuery();d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY,e);}return d;};f.OcQuasarDataProviderConverter.addDatasetsToDocument=function(w,d){var a=f.OcQuasarDataProviderConverter.getDataset(w);if(f.isNull(a)){return;}d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME,a.getCubeName());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE,a.getDatasource());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID,a.getModelId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM,f.OcQuasarDataProviderConverter.getSystemName(a));if(a.getVariables()!==null&&!a.getVariables().isEmpty()){var m=d.putNewList(f.OcQuasarConstants.QUASAR_VARIABLES);m.addAll(a.getVariables());}};f.OcQuasarDataProviderConverter.getDataset=function(w){var d=w.getDatasets();if(f.XCollectionUtils.hasElements(d)){return d.get(0);}return null;};f.OcQuasarDataProviderConverter.getSystemName=function(d){var s=d.getSystemName();if(f.XStringUtils.isNullOrEmpty(s)){return f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME;}return s;};f.OcQuasarDataProviderConverter.getGlobalDefinition=function(w){var g=f.PrFactory.createStructure();var d=f.OcQuasarDataProviderConverter.getDataset(w);if(f.isNull(d)){return null;}var a=d.getDatasource();var c=w.getStory().getColorSyncs();if(f.notNull(c)){var b=c.getStructureByKey(a);g.putNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC,b);}return g;};f.OcQuasarDataProviderConverter.addThresholdDefinition=function(w){var v=w.getVizDef();var d=f.OcQuasarDataProviderConverter.getDataset(w);if(f.isNull(d)){return;}var a=d.getDatasource();v.putNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD,f.OcQuasarDataProviderConverter.getThresholdByDatasource(w,a));};f.OcQuasarDataProviderConverter.getThresholdByDatasource=function(w,d){var t=w.getStory().getThresholds().getThresholdByDatasource(d);if(f.isNull(t)){return null;}var u=f.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(w.getVizDef(),f.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS);if(f.notNull(u)&&u.containsKey(d)){return t.getException();}return null;};f.OcQuasarDataProviderConverter.prototype.releaseObject=function(){f.XObject.prototype.releaseObject.call(this);};f.OcQuasarOptions=function(){};f.OcQuasarOptions.prototype=new f.XObject();f.OcQuasarOptions.prototype._ff_c="OcQuasarOptions";f.OcQuasarOptions.create=function(c){var o=new f.OcQuasarOptions();o.setupOptions(c);return o;};f.OcQuasarOptions.prototype.m_mainLayoutType=null;f.OcQuasarOptions.prototype.m_chartType=null;f.OcQuasarOptions.prototype.m_useSingleWidgetLayout=false;f.OcQuasarOptions.prototype.m_context=null;f.OcQuasarOptions.prototype.setupOptions=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;this.m_mainLayoutType=f.OcLayoutType.CANVAS;this.m_chartType=f.OcChartType.HIGHCHARTS;};f.OcQuasarOptions.prototype.getMainLayoutType=function(){return this.m_mainLayoutType;};f.OcQuasarOptions.prototype.setMainLayoutType=function(m){this.m_mainLayoutType=m;};f.OcQuasarOptions.prototype.getChartType=function(){return this.m_chartType;};f.OcQuasarOptions.prototype.setChartType=function(c){this.m_chartType=c;};f.OcQuasarOptions.prototype.useSingleWidgetLayout=function(){return this.m_useSingleWidgetLayout;};f.OcQuasarOptions.prototype.setUseSingleWidgetLayout=function(u){this.m_useSingleWidgetLayout=u;};f.OcQuasarOptions.prototype.getContext=function(){return this.m_context;};f.OcQuasarOptions.prototype.releaseObject=function(){this.m_context=null;this.m_mainLayoutType=null;this.m_chartType=null;f.XObject.prototype.releaseObject.call(this);};f.OcQuasarPageContentConverter={convert:function(p,o,d){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,f.OcQuasarPageContentConverter.getQuasarLayoutType(p,o));d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,p.getBackgroundColor());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");d.putNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT_ITEMS,f.OcQuasarPageContentConverter.getQuasarContentItems(p,o));f.OcQuasarPageContentConverter.addBackgroundPictureToQuasarContent(p,d,o);},getQuasarLayoutType:function(p,o){var q;if(p.isResponsive()){q=f.OcLayoutType.FLOW.getName();}else{if(o.getMainLayoutType()===f.OcLayoutType.CANVAS){q=f.OcLayoutType.CANVAS.getName();}else{q=f.OcLayoutType.FLOW.getName();}}return q;},getQuasarContentItems:function(p,o){var q=f.PrFactory.createList();var w=p.getWidgetManager().getWidgets();for(var i=0;i<w.size();i++){var a=w.get(i);var b=f.OcQuasarWidgetConverter.convert(a,o);if(f.notNull(b)){q.add(b);}}return q;},addBackgroundPictureToQuasarContent:function(p,d,o){if(o.getMainLayoutType()===f.OcLayoutType.CANVAS){return;}var b=p.getWidgetManager().getBackgroundImageWidget();if(f.isNull(b)){return;}var a=b.getImage();if(a.hasImageData()){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,a.getImageData());}else{d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC,b.getImageUrl());}},convertPageToAnalyticalCard:function(p,d,o){var k=p.getContext().getStoryEntityFactory().getFirstWidgetByType(p,f.OcWidgetType.ANALYTICAL_CARD);if(f.notNull(k)){d.add(f.OcQuasarDataProviderConverter.convert(k,o,p.getId()));}var c=p.getContext().getStoryEntityFactory().getFirstWidgetByType(p,f.OcWidgetType.CHART);if(f.notNull(c)){d.add(f.OcQuasarDataProviderConverter.convert(c,o,p.getId()));}if(f.isNull(k)&&f.isNull(c)){return null;}return f.OcQuasarWidgetConverter.convertCard(k,c,o);},convertPageToCompositeAnalyticalCard:function(i,s,p,d,o){var k=p.getContext().getStoryEntityFactory().getFirstWidgetByType(p,f.OcWidgetType.KPI);if(f.notNull(k)){d.add(f.OcQuasarDataProviderConverter.convert(k,o,p.getId()));}var c=p.getContext().getStoryEntityFactory().getFirstWidgetByType(p,f.OcWidgetType.CHART);if(f.notNull(c)){d.add(f.OcQuasarDataProviderConverter.convert(c,o,p.getId()));}var g=p.getContext().getStoryEntityFactory().getFirstWidgetByType(p,f.OcWidgetType.GRID);if(f.notNull(g)){d.add(f.OcQuasarDataProviderConverter.convert(g,o,p.getId()));}return f.OcQuasarWidgetConverter.convertCompositeCard(i,s,k,c,g,o);}};f.OcQuasarPageConverter=function(){};f.OcQuasarPageConverter.prototype=new f.XObject();f.OcQuasarPageConverter.prototype._ff_c="OcQuasarPageConverter";f.OcQuasarPageConverter.convertPage=function(p,o,q,d){f.OcQuasarPageContentConverter.convert(p,o,q);f.OcQuasarPageConverter.convertDataProvidersOfPage(p,o,d);};f.OcQuasarPageConverter.convertWidget=function(w,o){var d=f.PrFactory.createStructure();var a=f.OcQuasarWidgetConverter.convert(w,o);d.putNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_CONTENT,a);d.putNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS,f.OcQuasarPageConverter.convertDataProviderOfWidget(w,o));return d;};f.OcQuasarPageConverter.convertDataProviderOfWidget=function(w,o){if(!w.getWidgetType().hasDataProvider()){return null;}var d=f.OcQuasarDataProviderConverter.convert(w,o,null);if(f.isNull(d)){return null;}var a=f.PrFactory.createList();a.add(d);return a;};f.OcQuasarPageConverter.convertDataProvidersOfPage=function(p,o,d){var w=p.getWidgetManager().getWigdetsWithDataProvider();if(!f.XCollectionUtils.hasElements(w)){return;}for(var i=0;i<w.size();i++){var a=w.get(i);var b=f.OcQuasarDataProviderConverter.convert(a,o,p.getId());if(f.notNull(b)){d.add(b);}}};f.OcQuasarPageConverter.prototype.releaseObject=function(){f.XObject.prototype.releaseObject.call(this);};f.OcQuasarStoryConverter={convertStory:function(s,o){var d=f.XList.create();var p=s.getPageManager().getPages();for(var i=0;i<p.size();i++){var a=f.PrFactory.createStructure();var b=p.get(i);f.OcQuasarPageConverter.convertPage(b,o,a.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT),a.putNewList(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS));d.add(a);}return d;},convertPage:function(p,o){var d=f.PrFactory.createStructure();f.OcQuasarPageConverter.convertPage(p,o,d.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT),d.putNewList(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS));return d;},convertWidget:function(w,o){return f.OcQuasarPageConverter.convertWidget(w,o);}};f.OcQuasarWidgetConverter=function(){};f.OcQuasarWidgetConverter.prototype=new f.XObject();f.OcQuasarWidgetConverter.prototype._ff_c="OcQuasarWidgetConverter";f.OcQuasarWidgetConverter.convert=function(w,o){var d=f.PrFactory.createStructure();d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_NAME,w.getId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ENTITY_ID,w.getNormalizedDataReferenceId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_TYPE,w.getQuasarName(o));f.OcQuasarWidgetConverter.addBindingToDocument(w,d);var a=f.OcQuasarWidgetConverter.addWidgetContentToDocument(w,d,o);if(!a){return null;}a=f.OcQuasarWidgetLayoutConverter.addLayoutToDocument(w,d,o);if(!a){return null;}return d;};f.OcQuasarWidgetConverter.convertCard=function(k,c,o){var d=f.PrFactory.createStructure();var a=false;d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_TYPE,f.OcWidgetType.ANALYTICAL_CARD.getQuasarName());if(f.notNull(k)){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_NAME,k.getId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ENTITY_ID,k.getNormalizedDataReferenceId());a=f.OcQuasarWidgetLayoutConverter.addLayoutToDocument(k,d,o);}else if(f.notNull(c)){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_NAME,c.getId());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ENTITY_ID,c.getNormalizedDataReferenceId());a=f.OcQuasarWidgetLayoutConverter.addLayoutToDocument(c,d,o);}if(!a){return null;}f.OcQuasarWidgetConverter.addMultiBindingBindingToDocument(k,c,d);return d;};f.OcQuasarWidgetConverter.convertCompositeCard=function(i,s,k,c,g,o){var d=s.getDescription();if(f.XStringUtils.isNullOrEmpty(d)){d=s.getName();}f.OcQuasarWidgetConverter.addTextContent(i,d);f.OcQuasarWidgetConverter.addTextContent(i,s.getPublicUrl());var a=null;if(f.notNull(k)){a=f.OcQuasarWidgetConverter.convert(k,o);i.add(a);}if(f.notNull(c)){i.add(f.OcQuasarWidgetConverter.convert(c,o));}if(f.notNull(g)){i.add(f.OcQuasarWidgetConverter.convert(g,o));}return a;};f.OcQuasarWidgetConverter.addTextContent=function(d,t){var a=d.addNewStructure();a.putString(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,f.OcQuasarConstants.QUASAR_ITEM_TEXT);a.putString(f.OcQuasarConstants.QUASAR_ITEM_TEXT,t);};f.OcQuasarWidgetConverter.addBindingToDocument=function(w,d){var a=w.getWidgetType();if(a!==f.OcWidgetType.ANALYTICAL_CARD&&a!==f.OcWidgetType.KPI&&a!==f.OcWidgetType.CHART&&a!==f.OcWidgetType.GRID){return;}var b=f.XStringUtils.concatenate2("dp:",f.XStringUtils.concatenate3(w.getStory().getNormalizedName(),"_",w.getNormalizedDataReferenceId()));if(a===f.OcWidgetType.KPI||a===f.OcWidgetType.CHART){var c=f.PrFactory.createStructure();if(a===f.OcWidgetType.KPI){c.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,f.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);}else{c.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,f.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE);}c.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,b);d.put(f.OcQuasarConstants.QUASAR_ITEM_BINDING,c);}else if(a===f.OcWidgetType.ANALYTICAL_CARD){var e=f.PrFactory.createStructure();e.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,f.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);e.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,b);d.putNewList(f.OcQuasarConstants.QUASAR_ITEM_BINDINGS).add(e);}else if(a===f.OcWidgetType.GRID){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING,b);}};f.OcQuasarWidgetConverter.addMultiBindingBindingToDocument=function(k,c,d){var b=d.putNewList(f.OcQuasarConstants.QUASAR_ITEM_BINDINGS);var a;var e;if(f.notNull(k)){a=b.addNewStructure();e=f.XStringUtils.concatenate2("dp:",f.XStringUtils.concatenate3(k.getStory().getNormalizedName(),"_",k.getNormalizedDataReferenceId()));a.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,f.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE);a.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,e);}if(f.notNull(c)){a=b.addNewStructure();e=f.XStringUtils.concatenate2("dp:",f.XStringUtils.concatenate3(c.getStory().getNormalizedName(),"_",c.getNormalizedDataReferenceId()));a.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE,f.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE);a.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE,e);}};f.OcQuasarWidgetConverter.addWidgetContentToDocument=function(w,d,o){var a=true;var b=w.getWidgetType();if(b===f.OcWidgetType.TEXT){a=f.OcQuasarWidgetConverter.addTextContentToDocument(w,d);}else if(b===f.OcWidgetType.UNKNOWN){a=f.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument(d);}else if(b===f.OcWidgetType.PICTOGRAM){a=f.OcQuasarWidgetConverter.addPictogramContentToDocument(w,d);}else if(b===f.OcWidgetType.IMAGE){a=f.OcQuasarWidgetConverter.addImageContentToDocument(w,d,o);}else if(b===f.OcWidgetType.PAGE_FILTER){a=f.OcQuasarWidgetConverter.addPageFilterContentToDocument(w,d);}else if(b===f.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL){a=f.OcQuasarWidgetConverter.addFieldSelectionContentToDocument(w,d);}else if(b===f.OcWidgetType.CALCULATION_INPUT_CONTROL){a=f.OcQuasarWidgetConverter.addCalculationVariableContentToDocument(w,d);}return a;};f.OcQuasarWidgetConverter.addUnsupportedWidgetToDocument=function(d){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_TEXT,f.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET);return true;};f.OcQuasarWidgetConverter.addPictogramContentToDocument=function(w,d){var s=w.getPictogram();d.putString(f.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG,s);return true;};f.OcQuasarWidgetConverter.addPageFilterContentToDocument=function(w,d){var p=w.getPageFilter();if(f.isNull(p)){return false;}d.putString("CustomControl",d.getStringByKey("CType"));d.remove("CType");d.putString("Id",p.getStringByKey("source"));return true;};f.OcQuasarWidgetConverter.addFieldSelectionContentToDocument=function(w,d){var a=w.getFieldSelection();if(f.isNull(a)){return false;}d.putString("CustomControl",d.getStringByKey("CType"));d.remove("CType");d.putString("Id",a.getStringByKey("id"));return true;};f.OcQuasarWidgetConverter.addCalculationVariableContentToDocument=function(w,d){var c=w.getCalcVar();if(f.isNull(c)){return false;}d.putString("CustomControl",d.getStringByKey("CType"));d.remove("CType");d.putString("Id",c.getStringByKey("id"));return true;};f.OcQuasarWidgetConverter.addTextContentToDocument=function(w,d){var a=w.getWidgetText();d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_TEXT,a);return true;};f.OcQuasarWidgetConverter.addImageContentToDocument=function(w,d,o){if(w.getLayout().isBackgroundWidget()&&o.getMainLayoutType()!==f.OcLayoutType.CANVAS){return false;}var i=w.getImage();if(f.isNull(i)){return false;}if(i.hasImageData()){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,i.getImageData());}else{d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC,w.getImageUrl());}return true;};f.OcQuasarWidgetConverter.prototype.releaseObject=function(){f.XObject.prototype.releaseObject.call(this);};f.OcQuasarWidgetLayoutConverter=function(){};f.OcQuasarWidgetLayoutConverter.prototype=new f.XObject();f.OcQuasarWidgetLayoutConverter.prototype._ff_c="OcQuasarWidgetLayoutConverter";f.OcQuasarWidgetLayoutConverter.addLayoutToDocument=function(w,d,o){if(o.useSingleWidgetLayout()){return f.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout(d);}var l=f.OcQuasarWidgetLayoutConverter.processLayoutType(w,o);if(f.isNull(l)){return false;}if(l===f.OcLayoutType.FLOW_SIMPLE){return f.OcQuasarWidgetLayoutConverter.addSimpleLayout(w,d);}else if(l===f.OcLayoutType.FLOW){return f.OcQuasarWidgetLayoutConverter.addFlexLayout(w,d);}return f.OcQuasarWidgetLayoutConverter.addCanvasLayout(w,d);};f.OcQuasarWidgetLayoutConverter.addSingleWidgetLayout=function(d){d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");return true;};f.OcQuasarWidgetLayoutConverter.addCanvasLayout=function(w,d){var a=w.getLayout();if(a.getHeight()>0){d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,f.XStringUtils.concatenate2(f.XInteger.convertToString(a.getHeight()),f.OcQuasarConstants.QUASAR_LAYOUT_PX));}d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,f.XStringUtils.concatenate2(f.XInteger.convertToString(a.getWidth()),f.OcQuasarConstants.QUASAR_LAYOUT_PX));d.putInteger(f.OcQuasarConstants.QUASAR_LAYOUT_X,a.getX());d.putInteger(f.OcQuasarConstants.QUASAR_LAYOUT_Y,a.getY());f.OcStoryUtils.addIntegerGtZeroToStructure(f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS,a.getCornerRadius(),d);f.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(w,d);return true;};f.OcQuasarWidgetLayoutConverter.addFlexLayout=function(w,d){var a=w.getWidgetType();if(a===f.OcWidgetType.CHART||a===f.OcWidgetType.GRID||a===f.OcWidgetType.IMAGE||a===f.OcWidgetType.PICTOGRAM){d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%");}f.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(w,d);return true;};f.OcQuasarWidgetLayoutConverter.addSimpleLayout=function(w,d){d.putString(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"50%");f.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout(w,d);return true;};f.OcQuasarWidgetLayoutConverter.addBackgroundAndBorderLayout=function(w,d){var a=w.getLayout();if(!a.isBackgroundWidget()){d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR,a.getBackgroundColor());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR,a.getBorderColor());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT,a.getBorderFormat());d.putStringNotNullAndNotEmpty(f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE,a.getBorderStyle());f.OcStoryUtils.addIntegerGtZeroToStructure(f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE,a.getBorderSize(),d);}};f.OcQuasarWidgetLayoutConverter.processLayoutType=function(w,o){var l=null;var m=o.getMainLayoutType();if(m===f.OcLayoutType.FLOW||w.getPage().isResponsive()){l=f.OcLayoutType.FLOW;}else if(m===f.OcLayoutType.FLOW_SIMPLE){l=f.OcLayoutType.FLOW_SIMPLE;}else{l=f.OcLayoutType.CANVAS;}if(f.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget(w,l)){return l;}return null;};f.OcQuasarWidgetLayoutConverter.isLayoutTypeSupportedByWidget=function(w,l){var a=w.getWidgetType();if(l===f.OcLayoutType.FLOW){return a===f.OcWidgetType.CHART||a===f.OcWidgetType.GRID||a===f.OcWidgetType.IMAGE||a===f.OcWidgetType.PICTOGRAM||a===f.OcWidgetType.TEXT||a===f.OcWidgetType.PAGE_FILTER||a===f.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL||a===f.OcWidgetType.CALCULATION_INPUT_CONTROL;}else if(l===f.OcLayoutType.FLOW_SIMPLE){return a===f.OcWidgetType.CHART||a===f.OcWidgetType.GRID||a===f.OcWidgetType.IMAGE;}return true;};f.OcQuasarWidgetLayoutConverter.prototype.releaseObject=function(){f.XObject.prototype.releaseObject.call(this);};f.OcDatasets=function(){};f.OcDatasets.prototype=new f.XObject();f.OcDatasets.prototype._ff_c="OcDatasets";f.OcDatasets.prototype.m_context=null;f.OcDatasets.prototype.m_datasets=null;f.OcDatasets.prototype.setupDatasets=function(c){f.XObject.prototype.setup.call(this);this.m_context=c;};f.OcDatasets.prototype.getDatasetByDatasource=function(d){return this.getDatasets().getByKey(d);};f.OcDatasets.prototype.getCubeNames=function(){var c=f.XListOfString.create();var d=this.getDatasetsAsReadOnlyList();for(var i=0;i<d.size();i++){var a=d.get(i).getCubeName();if(f.XStringUtils.isNotNullAndNotEmpty(a)){c.add(a);}}c.sortByDirection(f.XSortDirection.ASCENDING);return c;};f.OcDatasets.prototype.updateDatasetsWithCubesMetdata=function(c){if(!f.XCollectionUtils.hasElements(c)){return;}var d=this.getDatasetsAsReadOnlyList();for(var i=0;i<d.size();i++){var a=d.get(i);var b=a.getCubeName();if(f.XStringUtils.isNullOrEmpty(b)){continue;}var e=f.XString.replace(b,"CUBE:","");var g=c.getByKey(e);if(f.isNull(g)){this.getContext().getMessageManager().addMessage(f.OcMessage.newDataSourceNotFound(f.Severity.WARNING,b));continue;}if(f.XStringUtils.isNotNullAndNotEmpty(g.getDataSourceName())){a.setDatasource(g.getDataSourceName());}if(g.getFormulas()!==null){a.setFormulaAliases(g.getFormulas());}if(g.getMemberDefinitions()!==null){a.setMemberDefinitions(g.getMemberDefinitions());}this.updateSystemName(a,g);}};f.OcDatasets.prototype.updateSystemName=function(d,c){var s=c.getSystemName();if(f.XStringUtils.isNotNullAndNotEmpty(s)){d.setSystemName(s);}else{var a=this.getContext().getConnection();if(f.notNull(a)){d.setSystemName(a.getSystemName());}}};f.OcDatasets.prototype.getDatasets=function(){if(f.isNull(this.m_datasets)){this.m_datasets=this.processDatasets();if(f.isNull(this.m_datasets)){this.m_datasets=f.XHashMapByString.create();}}return this.m_datasets;};f.OcDatasets.prototype.getDatasetsAsReadOnlyList=function(){return this.getDatasets().getValuesAsReadOnlyList();};f.OcDatasets.prototype.getContext=function(){return this.m_context;};f.OcDatasets.prototype.toString=function(){var d=this.getDatasetsAsReadOnlyList();var s=f.XStringBuffer.create();s.append("Datasets:");for(var i=0;i<d.size();i++){var a=d.get(i);s.appendNewLine().appendInt(i+1).append(". Dataset for datasource \"").append(a.getDatasource()).append("\", cube \"").append(a.getCubeName());s.append("\" and model \"").append(a.getModelId()).append("\"");}return s.toString();};f.OcDatasets.prototype.releaseObject=function(){this.m_context=null;this.m_datasets=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_datasets);f.XObject.prototype.releaseObject.call(this);};f.OcImages=function(){};f.OcImages.prototype=new f.XObject();f.OcImages.prototype._ff_c="OcImages";f.OcImages.IMAGE_URL="/sap/fpa/services/rest/fpa/story/get-static-content/";f.OcImages.prototype.m_storyId=null;f.OcImages.prototype.m_imageUrl=null;f.OcImages.prototype.m_images=null;f.OcImages.prototype.m_context=null;f.OcImages.prototype.setupImages=function(s,c){f.XObject.prototype.setup.call(this);this.m_storyId=s;this.m_context=c;};f.OcImages.prototype.getImageByImageId=function(i){return this.getImages().getByKey(i);};f.OcImages.prototype.getImages=function(){if(f.isNull(this.m_images)){this.m_images=this.processImages();}return this.m_images;};f.OcImages.prototype.getImageUrl=function(){if(f.notNull(this.m_imageUrl)){return this.m_imageUrl;}this.m_imageUrl="";var c=this.getContext().getConnection();if(f.notNull(c)){var u=c.getSystemUri();var t=c.getTenantId();this.m_imageUrl=f.XStringUtils.concatenate5(u,f.OcImages.IMAGE_URL,this.getStoryId(),"/%s?tenant=",t);}return this.m_imageUrl;};f.OcImages.prototype.getStoryId=function(){return this.m_storyId;};f.OcImages.prototype.getContext=function(){return this.m_context;};f.OcImages.prototype.releaseObject=function(){this.m_storyId=null;this.m_context=null;this.m_images=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_images);f.XObject.prototype.releaseObject.call(this);};f.OcPageManager=function(){};f.OcPageManager.prototype=new f.XObject();f.OcPageManager.prototype._ff_c="OcPageManager";f.OcPageManager.create=function(s,c){var p=new f.OcPageManager();p.setupPageManager(s,c);return p;};f.OcPageManager.prototype.m_pages=null;f.OcPageManager.prototype.m_pageByPageIdMap=null;f.OcPageManager.prototype.m_pageByPageNameMap=null;f.OcPageManager.prototype.m_widgetByWidgetIdMap=null;f.OcPageManager.prototype.setupPageManager=function(s,c){f.XObject.prototype.setup.call(this);this.m_pageByPageIdMap=c.getStoryEntityFactory().createPagesOfStory(s);};f.OcPageManager.prototype.hasPages=function(){return this.getPageByPageIdMap().hasElements();};f.OcPageManager.prototype.getPages=function(){if(f.isNull(this.m_pages)){this.m_pages=this.getPageByPageIdMap().getValuesAsReadOnlyList();}return this.m_pages;};f.OcPageManager.prototype.getPageByPageId=function(p){return this.getPageByPageIdMap().getByKey(p);};f.OcPageManager.prototype.getPageByPageName=function(p){return this.getPageByPageNameMap().getByKey(p);};f.OcPageManager.prototype.containsPage=function(p){return this.getPageByPageIdMap().containsKey(p);};f.OcPageManager.prototype.getPageByWidgetId=function(w){var a=this.getWidgetByWidgetIdMap().getByKey(w);if(f.notNull(a)){return a.getPage();}return null;};f.OcPageManager.prototype.getWidgetByWidgetId=function(w){return this.getWidgetByWidgetIdMap().getByKey(w);};f.OcPageManager.prototype.getAllWidgetIds=function(){return this.getWidgetByWidgetIdMap().getKeysAsReadOnlyListOfString();};f.OcPageManager.prototype.getAllWidgets=function(){return this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList();};f.OcPageManager.prototype.getAllWidgetIdsByWidgetType=function(w){var a=f.XListOfString.create();var i=this.getWidgetByWidgetIdMap().getIterator();while(i.hasNext()){var b=i.next();if(b.getWidgetType()===w){a.add(b.getId());}}return a;};f.OcPageManager.prototype.getPageByPageIdMap=function(){return this.m_pageByPageIdMap;};f.OcPageManager.prototype.getPageByPageNameMap=function(){if(f.notNull(this.m_pageByPageNameMap)){return this.m_pageByPageNameMap;}this.m_pageByPageNameMap=f.XHashMapByString.create();var p=this.getPages();for(var i=0;i<p.size();i++){var a=p.get(i);if(f.XStringUtils.isNotNullAndNotEmpty(a.getName())){this.m_pageByPageNameMap.put(a.getName(),a);}}return this.m_pageByPageNameMap;};f.OcPageManager.prototype.getWidgetByWidgetIdMap=function(){if(f.notNull(this.m_widgetByWidgetIdMap)){return this.m_widgetByWidgetIdMap;}this.m_widgetByWidgetIdMap=f.XHashMapByString.create();var p=this.getPageByPageIdMap().getValuesAsReadOnlyList();for(var i=0;i<p.size();i++){var a=p.get(i);var w=a.getWidgetManager().getWidgets();for(var j=0;j<w.size();j++){var b=w.get(j);this.m_widgetByWidgetIdMap.put(b.getId(),b);}}return this.m_widgetByWidgetIdMap;};f.OcPageManager.prototype.toString=function(){if(f.isNull(this.m_pageByPageIdMap)){return"Pages not yet initialized";}var p=this.getPages();var s=f.XStringBuffer.create();s.append("Pages: (").appendInt(p.size()).append(")");for(var i=0;i<p.size();i++){var a=p.get(i);s.appendNewLine().appendInt(i+1).append(". Page: ").append(a.getId()).append(" \"").append(a.getName()).append("\" (").appendInt(a.getWidgetManager().getWidgetIds().size()).append(" widgets)");}return s.toString();};f.OcPageManager.prototype.releaseObject=function(){this.m_pages=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pages);this.m_pageByPageIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageIdMap);this.m_pageByPageNameMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_pageByPageNameMap);this.m_widgetByWidgetIdMap=f.XObjectExt.release(this.m_widgetByWidgetIdMap);f.XObject.prototype.releaseObject.call(this);};f.OcWidgetLayout=function(){};f.OcWidgetLayout.prototype=new f.XObject();f.OcWidgetLayout.prototype._ff_c="OcWidgetLayout";f.OcWidgetLayout.prototype.m_x=0;f.OcWidgetLayout.prototype.m_y=0;f.OcWidgetLayout.prototype.m_width=0;f.OcWidgetLayout.prototype.m_height=0;f.OcWidgetLayout.prototype.m_backgroundWidget=false;f.OcWidgetLayout.prototype.m_backgroundColor=null;f.OcWidgetLayout.prototype.m_borderColor=null;f.OcWidgetLayout.prototype.m_borderFormat=null;f.OcWidgetLayout.prototype.m_borderStyle=null;f.OcWidgetLayout.prototype.m_borderSize=0;f.OcWidgetLayout.prototype.m_cornerRadius=0;f.OcWidgetLayout.prototype.getX=function(){return this.m_x;};f.OcWidgetLayout.prototype.setX=function(p){this.m_x=p;};f.OcWidgetLayout.prototype.getY=function(){return this.m_y;};f.OcWidgetLayout.prototype.setY=function(p){this.m_y=p;};f.OcWidgetLayout.prototype.getWidth=function(){return this.m_width;};f.OcWidgetLayout.prototype.setWidth=function(w){this.m_width=w;};f.OcWidgetLayout.prototype.getHeight=function(){return this.m_height;};f.OcWidgetLayout.prototype.setHeight=function(h){this.m_height=h;};f.OcWidgetLayout.prototype.isBackgroundWidget=function(){return this.m_backgroundWidget;};f.OcWidgetLayout.prototype.setIsBackgroundWidget=function(i){this.m_backgroundWidget=i;};f.OcWidgetLayout.prototype.getBackgroundColor=function(){return this.m_backgroundColor;};f.OcWidgetLayout.prototype.setBackgroundColor=function(b){this.m_backgroundColor=b;};f.OcWidgetLayout.prototype.getBorderColor=function(){return this.m_borderColor;};f.OcWidgetLayout.prototype.setBorderColor=function(b){this.m_borderColor=b;};f.OcWidgetLayout.prototype.getBorderFormat=function(){return this.m_borderFormat;};f.OcWidgetLayout.prototype.setBorderFormat=function(b){this.m_borderFormat=b;};f.OcWidgetLayout.prototype.getBorderStyle=function(){return this.m_borderStyle;};f.OcWidgetLayout.prototype.setBorderStyle=function(b){this.m_borderStyle=b;};f.OcWidgetLayout.prototype.getBorderSize=function(){return this.m_borderSize;};f.OcWidgetLayout.prototype.setBorderSize=function(b){this.m_borderSize=b;};f.OcWidgetLayout.prototype.getCornerRadius=function(){return this.m_cornerRadius;};f.OcWidgetLayout.prototype.setCornerRadius=function(c){this.m_cornerRadius=c;};f.OcWidgetLayout.prototype.releaseObject=function(){this.m_backgroundColor=null;this.m_borderColor=null;this.m_borderFormat=null;this.m_borderStyle=null;f.XObject.prototype.releaseObject.call(this);};f.OcWidgetManager=function(){};f.OcWidgetManager.prototype=new f.XObject();f.OcWidgetManager.prototype._ff_c="OcWidgetManager";f.OcWidgetManager.create=function(p,c){var w=new f.OcWidgetManager();w.setupWidgetManager(p,c);return w;};f.OcWidgetManager.prototype.m_widgetByWidgetIdMap=null;f.OcWidgetManager.prototype.m_widgetIds=null;f.OcWidgetManager.prototype.m_widgets=null;f.OcWidgetManager.prototype.m_widgetsWithDataProvider=null;f.OcWidgetManager.prototype.m_hasBackgroundImageWidget=null;f.OcWidgetManager.prototype.m_backgroundImageWidget=null;f.OcWidgetManager.prototype.setupWidgetManager=function(p,c){f.XObject.prototype.setup.call(this);this.m_widgetByWidgetIdMap=c.getStoryEntityFactory().createWidgetsOfPage(p);};f.OcWidgetManager.prototype.getWidgetById=function(w){return this.getWidgetByWidgetIdMap().getByKey(w);};f.OcWidgetManager.prototype.getWidgets=function(){if(f.isNull(this.m_widgets)){this.m_widgets=this.getWidgetByWidgetIdMap().getValuesAsReadOnlyList();}return this.m_widgets;};f.OcWidgetManager.prototype.hasWidgets=function(){return f.XCollectionUtils.hasElements(this.getWidgetByWidgetIdMap());};f.OcWidgetManager.prototype.getWidgetIds=function(){if(f.isNull(this.m_widgetIds)){this.m_widgetIds=this.getWidgetByWidgetIdMap().getKeysAsReadOnlyListOfString();}return this.m_widgetIds;};f.OcWidgetManager.prototype.containsWidget=function(w){return this.getWidgetByWidgetIdMap().containsKey(w);};f.OcWidgetManager.prototype.getBackgroundImageWidget=function(){if(f.isNull(this.m_hasBackgroundImageWidget)){this.m_backgroundImageWidget=this.processBackgroundImageWidget();this.m_hasBackgroundImageWidget=f.TriStateBool.lookup(f.notNull(this.m_backgroundImageWidget));}return this.m_backgroundImageWidget;};f.OcWidgetManager.prototype.getWigdetsWithDataProvider=function(){if(f.isNull(this.m_widgetsWithDataProvider)){return this.m_widgetsWithDataProvider=this.processWidgetsWithDataProvider();}return this.m_widgetsWithDataProvider;};f.OcWidgetManager.prototype.processWidgetsWithDataProvider=function(){var w=f.XList.create();var a=this.getWidgets();for(var i=0;i<a.size();i++){var b=a.get(i);if(b.getWidgetType().hasDataProvider()){w.add(b);}}return w;};f.OcWidgetManager.prototype.processBackgroundImageWidget=function(){var w=this.getWidgets();for(var i=0;i<w.size();i++){var a=w.get(i);if(a.getWidgetType()===f.OcWidgetType.IMAGE&&a.getLayout().isBackgroundWidget()){return a;}}return null;};f.OcWidgetManager.prototype.getWidgetByWidgetIdMap=function(){return this.m_widgetByWidgetIdMap;};f.OcWidgetManager.prototype.toString=function(){if(f.isNull(this.m_widgetByWidgetIdMap)){return"Widgets not yet initialized";}var w=this.getWidgets();var s=f.XStringBuffer.create();s.append("Widgets: (").appendInt(w.size()).append(")");for(var i=0;i<w.size();i++){var a=w.get(i);s.appendNewLine().appendInt(i+1).append(". Widget: ").append(a.getId()).append(" of type ").append(a.getWidgetType().getName());}return s.toString();};f.OcWidgetManager.prototype.releaseObject=function(){this.m_backgroundImageWidget=null;this.m_hasBackgroundImageWidget=f.XObjectExt.release(this.m_hasBackgroundImageWidget);this.m_widgetIds=f.XObjectExt.release(this.m_widgetIds);this.m_widgets=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgets);this.m_widgetByWidgetIdMap=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetByWidgetIdMap);this.m_widgetsWithDataProvider=f.XCollectionUtils.releaseEntriesAndCollectionIfNotNull(this.m_widgetsWithDataProvider);f.XObject.prototype.releaseObject.call(this);};f.OcJsonPath=function(){};f.OcJsonPath.prototype=new f.XObject();f.OcJsonPath.prototype._ff_c="OcJsonPath";f.OcJsonPath.create=function(p){var j=new f.OcJsonPath();j.setup();j.m_pathElements=f.XListOfString.create();var a=f.XStringTokenizer.splitString(p,".");if(f.XCollectionUtils.hasElements(a)){for(var i=0;i<a.size();i++){j.m_pathElements.add(a.get(i));}}return j;};f.OcJsonPath.prototype.m_pathElements=null;f.OcJsonPath.prototype.hasPathElements=function(){return this.m_pathElements.hasElements();};f.OcJsonPath.prototype.size=function(){return this.m_pathElements.size();};f.OcJsonPath.prototype.getPathElementAt=function(i){return this.m_pathElements.get(i);};f.OcJsonPath.prototype.releaseObject=function(){this.m_pathElements=f.XObjectExt.release(this.m_pathElements);f.XObject.prototype.releaseObject.call(this);};f.OcJsonPath.prototype.toString=function(){var s=f.XStringBuffer.create();for(var i=0;i<this.m_pathElements.size();i++){if(i>0){s.append(".");}s.append(this.m_pathElements.get(i));}return s.toString();};f.OcJsonPathEvaluator={getJsonPathElements:function(p,j){return f.OcJsonPathEvaluator.getJsonPathElementsInternal(p,j,false);},getJsonPathElementsAsStrings:function(p,j){var r=f.OcJsonPathEvaluator.getJsonPathElements(p,j);return f.OcJsonPathEvaluator.convertResultsToListOfString(r);},getJsonPathElementsAsStructures:function(p,j){var r=f.OcJsonPathEvaluator.getJsonPathElements(p,j);return f.OcJsonPathEvaluator.convertResultsToListOfStructures(r);},getSingleJsonPathElement:function(p,j){var r=f.OcJsonPathEvaluator.getJsonPathElementsInternal(p,j,true);if(!f.XCollectionUtils.hasElements(r)){return null;}if(r.size()!==1){throw f.XException.createIllegalArgumentException(f.XStringUtils.concatenate3("PrElement \"",j.getPathElementAt(0),"\" is not of cardinality 1"));}return r.get(0);},getSingleJsonPathElementAsString:function(p,j){var r=f.OcJsonPathEvaluator.getSingleJsonPathElement(p,j);if(f.notNull(r)&&r.isString()){return r.asString().getString();}return null;},getSingleJsonPathElementAsStructure:function(p,j){var r=f.OcJsonPathEvaluator.getSingleJsonPathElement(p,j);if(f.notNull(r)&&r.isStructure()){return r.asStructure();}return null;},getSingleJsonPathElementAsList:function(p,j){var r=f.OcJsonPathEvaluator.getSingleJsonPathElement(p,j);if(f.notNull(r)&&r.isList()){return r.asList();}return null;},getJsonPathElementsInternal:function(p,j,i){var r=f.XList.create();if(f.isNull(j)||!j.hasPathElements()){return r;}f.OcJsonPathEvaluator.getElementsAndAddToResults(p,j,0,r,i);return r;},getElementsAndAddToResults:function(p,j,a,r,i){if(f.isNull(p)||!j.hasPathElements()){return;}if(p.isStructure()){f.OcJsonPathEvaluator.processStructure(p.asStructure(),j,a,r,i);}else if(p.isList()){if(i){throw f.XException.createIllegalArgumentException(f.XStringUtils.concatenate3("PrElement \"",j.getPathElementAt(a-1),"\" is not of cardinality 1"));}f.OcJsonPathEvaluator.processList(p.asList(),j,a,r,i);}else{return;}},processStructure:function(p,j,a,r,i){var b=j.getPathElementAt(a);var n=p.getByKey(b);if(f.notNull(n)){if(a===j.size()-1){r.add(n);}else{f.OcJsonPathEvaluator.getElementsAndAddToResults(n,j,a+1,r,i);}}},processList:function(p,j,a,r,b){for(var i=0;i<p.size();i++){var c=p.get(i);f.OcJsonPathEvaluator.getElementsAndAddToResults(c,j,a,r,b);}},convertResultsToListOfString:function(r){var a=f.XListOfString.create();if(!f.XCollectionUtils.hasElements(r)){return a;}for(var i=0;i<r.size();i++){var b=r.get(i);if(b.isString()){var c=f.PrUtils.convertElementToStringValue(b,null);if(f.XStringUtils.isNotNullAndNotEmpty(c)){a.add(c);}}else if(b.isList()){var d=b.asList();for(var j=0;j<d.size();j++){var e=d.getStringAt(j);if(f.XStringUtils.isNotNullAndNotEmpty(e)){a.add(e);}}}}return a;},convertResultsToListOfStructures:function(r){var a=f.XList.create();if(!f.XCollectionUtils.hasElements(r)){return a;}for(var i=0;i<r.size();i++){var b=r.get(i);if(f.isNull(b)){continue;}if(b.isStructure()){a.add(b.asStructure());}else if(b.isList()){var c=b.asList();for(var j=0;j<c.size();j++){var d=c.getStructureAt(j);if(f.notNull(d)){a.add(d);}}}}return a;}};f.OcMessage={UNEXPECTED_ERROR:"An error is preventing the story to be displayed",INVALID_STORY_NAME:"The story does not have a valid id and name",INVALID_STORY:"The story is not valid",MODEL_NOT_FOUND:"No model metadata found for data source \"{0}\".",PAGE_WITH_MULTIPLE_LAYOUTS:"The page \"{0}\" has {1} layouts. Pages with multiple layout definitions are not supported.",WIDGET_WITHOUT_CONTENT:"The widget \"{0}\" of type \"{1}\" on page \"{2}\" does not have content.",WIDGET_WITHOUT_DATA_SOURCE:"The widget \"{0}\" of type \"{1}\" on page \"{2}\" does not have a valid data source.",GRID_WITHOUT_DEFINITION:"The grid \"{0}\" on page \"{1}\" does not have a valid definition.",GRID_WITHOUT_FIREFLY_QUERY:"The grid \"{0}\" on page \"{1}\" does not have a valid query definition.",CHART_WITHOUT_VIZ_DEF:"The chart \"{0}\" on page \"{1}\" does not have valid VizDef.",KPI_WITHOUT_VIZ_DEF:"The kpi \"{0}\" on page \"{1}\" does not have valid VizDef.",newUnexpectedError:function(t){return f.OcMessage.createErrorMessageWithCause(f.OcMessage.UNEXPECTED_ERROR,f.XErrorHelper.convertExceptionToString(t));},newInvalidStoryNameError:function(){return f.OcMessage.createMessage(f.Severity.ERROR,f.ErrorCodes.ET_INVALID_VALUE,f.OcMessage.INVALID_STORY_NAME);},newInvalidStoryError:function(){return f.OcMessage.createMessage(f.Severity.ERROR,f.ErrorCodes.ET_INVALID_VALUE,f.OcMessage.INVALID_STORY);},newDataSourceNotFound:function(s,d){var t=f.OcMessage.createTextWithSingleArgument(f.OcMessage.MODEL_NOT_FOUND,d);return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newPageWithMultipleLayouts:function(s,p,n){var t=f.OcMessage.createTextWithTwoArguments(f.OcMessage.PAGE_WITH_MULTIPLE_LAYOUTS,p.getName(),f.XInteger.convertToString(n));return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newWidgetWithoutContent:function(s,w){var t=f.OcMessage.createTextWithThreeArguments(f.OcMessage.WIDGET_WITHOUT_CONTENT,w.getId(),w.getWidgetType().getName(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newWidgetWithoutDatasource:function(s,w){var t=f.OcMessage.createTextWithThreeArguments(f.OcMessage.WIDGET_WITHOUT_DATA_SOURCE,w.getId(),w.getWidgetType().getName(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newGridWithoutDefinition:function(s,w){var t=f.OcMessage.createTextWithTwoArguments(f.OcMessage.GRID_WITHOUT_DEFINITION,w.getId(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newGridWithoutQuery:function(s,w){var t=f.OcMessage.createTextWithTwoArguments(f.OcMessage.GRID_WITHOUT_FIREFLY_QUERY,w.getId(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newChartWithoutVizDef:function(s,w){var t=f.OcMessage.createTextWithTwoArguments(f.OcMessage.CHART_WITHOUT_VIZ_DEF,w.getId(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},newKpiWithoutVizDef:function(s,w){var t=f.OcMessage.createTextWithTwoArguments(f.OcMessage.KPI_WITHOUT_VIZ_DEF,w.getId(),w.getPage().getName());return f.OcMessage.createMessage(s,f.ErrorCodes.ET_INVALID_VALUE,t);},createMessage:function(s,c,t){return f.XMessage.createMessage(f.OriginLayer.APPLICATION,s,c,t,null,false,null);},createErrorMessageWithCause:function(t,e){var a=f.XMessage.createError(f.OriginLayer.APPLICATION,e,null,false,null);return f.XMessage.createError(f.OriginLayer.APPLICATION,t,a,false,null);},createTextWithSingleArgument:function(m,a){return f.XString.replace(m,"{0}",a);},createTextWithTwoArguments:function(m,a,b){return f.XString.replace(f.OcMessage.createTextWithSingleArgument(m,a),"{1}",b);},createTextWithThreeArguments:function(m,a,b,c){return f.XString.replace(f.OcMessage.createTextWithTwoArguments(m,a,b),"{2}",c);}};f.OcStoryUtils={normalizeString:function(n){var a=n;if(f.XStringUtils.isNotNullAndNotEmpty(a)){a=f.XString.replace(a," ","_");a=f.XString.replace(a,",","_");a=f.XString.replace(a," ","_");a=f.XString.replace(a,"-","_");a=f.XString.replace(a,".","");a=f.XString.replace(a,"\\","_");a=f.XString.replace(a,"/","_");a=f.XString.replace(a,"(","_");a=f.XString.replace(a,")","_");a=f.XString.replace(a,"+","_");a=f.XString.replace(a,":","_");a=f.XString.replace(a,"<","_");a=f.XString.replace(a,">","_");a=f.XString.toLowerCase(a);}return a;},addIntegerGtZeroToStructure:function(n,v,s){if(v>0){s.putInteger(n,v);}},getIntegerFromStructureByName:function(s,n){if(f.isNull(s)){return 0;}var e=s.getByKey(n);if(f.isNull(e)){return 0;}var a=f.PrUtils.convertElementToInteger(e);if(f.isNull(a)){return 0;}return a.getInteger();},getValueOrEmptyString:function(v){return f.isNull(v)?"":v;}};f.OcOrcaDatasets=function(){};f.OcOrcaDatasets.prototype=new f.OcDatasets();f.OcOrcaDatasets.prototype._ff_c="OcOrcaDatasets";f.OcOrcaDatasets.create=function(c){var d=new f.OcOrcaDatasets();d.setupOrcaDatasets(c);return d;};f.OcOrcaDatasets.prototype.m_orcaContext=null;f.OcOrcaDatasets.prototype.setupOrcaDatasets=function(c){f.OcDatasets.prototype.setupDatasets.call(this,c);this.m_orcaContext=c;};f.OcOrcaDatasets.prototype.processDatasets=function(){var d=f.XHashMapByString.create();this.addDatasetsOfDatasetEntities(d);this.addDatasetsOfGridWidgets(d);return d;};f.OcOrcaDatasets.prototype.addDatasetsOfDatasetEntities=function(d){var a=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_DATASET);var i=a.getIterator();while(i.hasNext()){var b=i.next();var c=b.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.isNull(c)){continue;}var m=f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(b,f.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID);var e=this.getDatasetFromDatasourceAndModel(c,m);if(f.notNull(e)){e.setVariables(f.OcJsonPathEvaluator.getSingleJsonPathElementAsList(b,f.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE));d.put(c,e);}}};f.OcOrcaDatasets.prototype.addDatasetsOfGridWidgets=function(d){var g=this.getStoryEntityHelper().getGridDefinitions();for(var i=0;i<g.size();i++){var a=g.get(i).getDatasource();if(d.containsKey(a)){continue;}var b=this.getDatasetFromDatasourceAndModel(a,null);if(f.notNull(b)){d.put(a,b);}}};f.OcOrcaDatasets.prototype.getDatasetFromDatasourceAndModel=function(d,b){if(f.isNull(d)){return null;}var m=b;if(f.isNull(m)){var t=f.XStringTokenizer.splitString(d,"[");var v=t.get(t.size()-1);var s=f.XStringTokenizer.splitString(v,"]");m=s.get(0);}var c=null;var a=f.XStringTokenizer.splitString(d,":");var e=a.get(0);if(f.XString.isEqual(e,f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)){var g=a.get(1);var i=f.XStringTokenizer.splitString(g,"[");var p=i.get(i.size()-1);p=f.XString.substring(p,0,f.XString.size(p)-1);var r=f.XString.substring(p,0,1);if(f.XString.isEqual(r,"/")){p=f.XString.substring(p,1,f.XString.size(p));var h=f.XStringTokenizer.splitString(p,"/");var j=h.get(0);var k=h.get(1);k=f.XString.replace(k,"_qs_changed","");k=f.XString.replace(k,"_qs","");p=f.XStringUtils.concatenate3(j,":",k);}c=f.XStringUtils.concatenate3(f.OcOrcaConstants.CUBE,":",p);}else if(f.XString.isEqual(e,f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)){var l=a.get(1);var n=f.XStringTokenizer.splitString(l,"[");var o=n.get(2);o=f.XString.substring(o,0,f.XString.size(o)-1);var q=n.get(n.size()-1);q=f.XString.substring(q,0,f.XString.size(q)-1);c=f.XStringUtils.concatenate5(f.OcOrcaConstants.CUBE,":",o,":",q);}var u=f.OcDataset.create(d,m);if(f.notNull(c)){u.setCubeName(c);}return u;};f.OcOrcaDatasets.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper();};f.OcOrcaDatasets.prototype.getOrcaContext=function(){return this.m_orcaContext;};f.OcOrcaDatasets.prototype.releaseObject=function(){this.m_orcaContext=null;f.OcDatasets.prototype.releaseObject.call(this);};f.OcOrcaImages=function(){};f.OcOrcaImages.prototype=new f.OcImages();f.OcOrcaImages.prototype._ff_c="OcOrcaImages";f.OcOrcaImages.create=function(s,o){var i=new f.OcOrcaImages();i.setupImages(s,o);i.m_orcaContext=o;return i;};f.OcOrcaImages.prototype.m_orcaContext=null;f.OcOrcaImages.prototype.processImages=function(){var a=f.XHashMapByString.create();var b=this.getStoryEntityHelper().getEntitiesAsJsonByEntityType(f.OcOrcaConstants.STORY_ENTITY_IMAGE);for(var i=0;i<b.size();i++){var c=b.get(i);var d=c.getStringByKey(f.OcOrcaConstants.ID_ELEMENT);if(f.XStringUtils.isNotNullAndNotEmpty(d)){var e=f.OcImage.create(d);e.setImageData(f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(c,f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA));e.setThumbnail(f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(c,f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL));a.put(d,e);}}return a;};f.OcOrcaImages.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper();};f.OcOrcaImages.prototype.getOrcaContext=function(){return this.m_orcaContext;};f.OcOrcaImages.prototype.releaseObject=function(){this.m_orcaContext=null;f.OcImages.prototype.releaseObject.call(this);};f.OcOrcaGridDefinition=function(){};f.OcOrcaGridDefinition.prototype=new f.DfIdObject();f.OcOrcaGridDefinition.prototype._ff_c="OcOrcaGridDefinition";f.OcOrcaGridDefinition.create=function(g,a){var b=new f.OcOrcaGridDefinition();b.setupGrid(g,a);return b;};f.OcOrcaGridDefinition.prototype.m_gridJson=null;f.OcOrcaGridDefinition.prototype.m_datasource=null;f.OcOrcaGridDefinition.prototype.setupGrid=function(g,a){this.setupExt(g);this.m_gridJson=a;};f.OcOrcaGridDefinition.prototype.getDatasource=function(){if(f.isNull(this.m_datasource)){this.m_datasource=f.OcStoryUtils.getValueOrEmptyString(f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getGridJson(),f.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE));}return this.m_datasource;};f.OcOrcaGridDefinition.prototype.getFireflyQuery=function(){return this.getGridJson().getStringByKey(f.OcOrcaConstants.WIDGET_FIREFLY_QUERY);};f.OcOrcaGridDefinition.prototype.getGridJson=function(){return this.m_gridJson;};f.OcOrcaGridDefinition.prototype.releaseObject=function(){this.m_gridJson=null;this.m_datasource=null;f.DfIdObject.prototype.releaseObject.call(this);};f.OcDataset=function(){};f.OcDataset.prototype=new f.XObject();f.OcDataset.prototype._ff_c="OcDataset";f.OcDataset.create=function(d,m){var a=new f.OcDataset();a.setupDataset(d,m);return a;};f.OcDataset.prototype.m_datasource=null;f.OcDataset.prototype.m_modelId=null;f.OcDataset.prototype.m_cubeName=null;f.OcDataset.prototype.m_systemName=null;f.OcDataset.prototype.m_formulaAliases=null;f.OcDataset.prototype.m_memberDefinitions=null;f.OcDataset.prototype.m_variables=null;f.OcDataset.prototype.setupDataset=function(d,m){f.XObject.prototype.setup.call(this);this.m_datasource=d;this.m_modelId=m;};f.OcDataset.prototype.getModelId=function(){return this.m_modelId;};f.OcDataset.prototype.getVariables=function(){return this.m_variables;};f.OcDataset.prototype.setVariables=function(v){this.m_variables=v;};f.OcDataset.prototype.getDatasource=function(){return this.m_datasource;};f.OcDataset.prototype.setDatasource=function(d){this.m_datasource=d;};f.OcDataset.prototype.getCubeName=function(){return this.m_cubeName;};f.OcDataset.prototype.setCubeName=function(c){this.m_cubeName=c;};f.OcDataset.prototype.getSystemName=function(){return this.m_systemName;};f.OcDataset.prototype.setSystemName=function(s){this.m_systemName=s;};f.OcDataset.prototype.getFormulaAliases=function(){return this.m_formulaAliases;};f.OcDataset.prototype.setFormulaAliases=function(a){this.m_formulaAliases=a;};f.OcDataset.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions;};f.OcDataset.prototype.setMemberDefinitions=function(m){this.m_memberDefinitions=m;};f.OcDataset.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Dataset:").appendNewLine().append(" Datasource = ").append(this.getDatasource());s.appendNewLine().append(" Model Id = ").append(this.getModelId());s.appendNewLine().append(" Cube = ").append(this.getCubeName());return s.toString();};f.OcDataset.prototype.releaseObject=function(){this.m_datasource=null;this.m_modelId=null;this.m_cubeName=null;this.m_systemName=null;this.m_formulaAliases=null;this.m_memberDefinitions=null;this.m_variables=null;f.XObject.prototype.releaseObject.call(this);};f.OcImage=function(){};f.OcImage.prototype=new f.DfIdObject();f.OcImage.prototype._ff_c="OcImage";f.OcImage.create=function(i){var a=new f.OcImage();a.setupImage(i);return a;};f.OcImage.prototype.m_imageData=null;f.OcImage.prototype.m_thumbnail=null;f.OcImage.prototype.setupImage=function(i){this.setupExt(i);};f.OcImage.prototype.hasImageData=function(){return this.getImageData()!==null;};f.OcImage.prototype.getImageData=function(){return this.m_imageData;};f.OcImage.prototype.setImageData=function(i){this.m_imageData=i;};f.OcImage.prototype.getThumbnail=function(){return this.m_thumbnail;};f.OcImage.prototype.setThumbnail=function(t){this.m_thumbnail=t;};f.OcImage.prototype.releaseObject=function(){this.m_imageData=null;this.m_thumbnail=null;f.DfIdObject.prototype.releaseObject.call(this);};f.OcWidget=function(){};f.OcWidget.prototype=new f.DfIdObject();f.OcWidget.prototype._ff_c="OcWidget";f.OcWidget.prototype.m_widgetType=null;f.OcWidget.prototype.m_dataReferenceId=null;f.OcWidget.prototype.m_normalizedDataReferenceId=null;f.OcWidget.prototype.m_layout=null;f.OcWidget.prototype.m_page=null;f.OcWidget.prototype.setupWidget=function(w,a,p){f.DfIdObject.prototype.setupExt.call(this,w);this.m_widgetType=a;this.m_page=p;};f.OcWidget.prototype.getWidgetType=function(){return this.m_widgetType;};f.OcWidget.prototype.getDataReferenceId=function(){if(f.isNull(this.m_dataReferenceId)){this.m_dataReferenceId=f.OcStoryUtils.getValueOrEmptyString(this.processDataReferenceId());}return this.m_dataReferenceId;};f.OcWidget.prototype.getNormalizedDataReferenceId=function(){if(f.isNull(this.m_normalizedDataReferenceId)){this.m_normalizedDataReferenceId=f.OcStoryUtils.normalizeString(this.getDataReferenceId());}return this.m_normalizedDataReferenceId;};f.OcWidget.prototype.getQuasarName=function(q){return this.m_widgetType.getQuasarName();};f.OcWidget.prototype.getLayout=function(){if(f.isNull(this.m_layout)){this.m_layout=this.processLayout();if(f.isNull(this.m_layout)){this.m_layout=new f.OcWidgetLayout();}}return this.m_layout;};f.OcWidget.prototype.getStory=function(){return this.getPage().getStory();};f.OcWidget.prototype.getPage=function(){return this.m_page;};f.OcWidget.prototype.getContext=function(){return this.getPage().getContext();};f.OcWidget.prototype.toString=function(){var w=this.getWidgetType();var s=f.XStringBuffer.create();s.append("Widget: ").append(this.getId()).appendNewLine().append(" Type = ").append(w.getName());s.appendNewLine().append(" Page = ").append(this.getPage().getName());var d=this.getDataReferenceId();if(f.XStringUtils.isNotNullAndNotEmpty(d)){s.appendNewLine().append(" Data Reference id = ").append(d);}return s.toString();};f.OcWidget.prototype.releaseObject=function(){this.m_dataReferenceId=null;this.m_normalizedDataReferenceId=null;this.m_page=null;f.XObjectExt.release(this.m_layout);f.DfIdObject.prototype.releaseObject.call(this);};f.OcConnection=function(){};f.OcConnection.prototype=new f.XObject();f.OcConnection.prototype._ff_c="OcConnection";f.OcConnection.createByConnection=function(c){var a=new f.OcConnection();a.setupConnection(c);return a;};f.OcConnection.prototype.m_systemName=null;f.OcConnection.prototype.m_tenantId=null;f.OcConnection.prototype.m_systemUri=null;f.OcConnection.prototype.m_publicUrl=null;f.OcConnection.prototype.setupConnection=function(c){this.setup();if(f.notNull(c)){var s=c.getSystemDescription();if(f.notNull(s)){this.m_systemName=s.getSystemName();this.m_systemUri=s.getUrlStringExt(true,false,false,false,true,true,true,true);}this.m_tenantId=c.getPersonalization().getTenantId();this.m_publicUrl=c.getSystemConnect().getServerMetadata().getOrcaPublicUrl();}};f.OcConnection.prototype.getSystemName=function(){return this.m_systemName;};f.OcConnection.prototype.getSystemUri=function(){return this.m_systemUri;};f.OcConnection.prototype.getTenantId=function(){return this.m_tenantId;};f.OcConnection.prototype.getOrcaPublicUrl=function(){return this.m_publicUrl;};f.OcOrcaBaseWidget=function(){};f.OcOrcaBaseWidget.prototype=new f.OcWidget();f.OcOrcaBaseWidget.prototype._ff_c="OcOrcaBaseWidget";f.OcOrcaBaseWidget.prototype.m_widgetJson=null;f.OcOrcaBaseWidget.prototype.m_orcaPage=null;f.OcOrcaBaseWidget.prototype.setupOrcaBaseWidget=function(w,a,b,o){f.OcWidget.prototype.setupWidget.call(this,w,a,o);this.m_orcaPage=o;this.m_widgetJson=b;};f.OcOrcaBaseWidget.prototype.processDataReferenceId=function(){return f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID);};f.OcOrcaBaseWidget.prototype.getWidgetJson=function(){return this.m_widgetJson;};f.OcOrcaBaseWidget.prototype.getOrcaStory=function(){return this.getOrcaPage().getOrcaStory();};f.OcOrcaBaseWidget.prototype.getOrcaPage=function(){return this.m_orcaPage;};f.OcOrcaBaseWidget.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext();};f.OcOrcaBaseWidget.prototype.processLayout=function(){if(this.getPageLayout().hasCanvasLayout()){return this.processCanvasLayout();}else if(this.getPage().isResponsive()){return this.processResponsivePageLayout();}return null;};f.OcOrcaBaseWidget.prototype.processCanvasLayout=function(){var w=new f.OcWidgetLayout();var p=this.getPageLayout();var s=p.getSectionLayoutJsonByWidgetId(this.getId());if(f.notNull(s)){w.setX(f.OcStoryUtils.getIntegerFromStructureByName(s,f.OcOrcaConstants.WIDGET_POS_X));w.setY(f.OcStoryUtils.getIntegerFromStructureByName(s,f.OcOrcaConstants.WIDGET_POS_Y));var a=f.OcStoryUtils.getIntegerFromStructureByName(s,f.OcOrcaConstants.WIDGET_HEIGHT);var b=f.OcStoryUtils.getIntegerFromStructureByName(s,f.OcOrcaConstants.WIDGET_WIDTH);w.setHeight(a);w.setIsBackgroundWidget(this.processIsBackgroundWidget(a,b));}var c=p.getWidgetLayoutJsonByWidgetId(this.getId());if(f.notNull(c)){this.addBorderDefinition(w,c);w.setBackgroundColor(c.getStringByKey(f.OcOrcaConstants.WIDGET_BACKGROUND_COLOR));var x=w.getX()+f.OcStoryUtils.getIntegerFromStructureByName(c,f.OcOrcaConstants.WIDGET_POS_X);w.setX(x);var y=w.getY()+f.OcStoryUtils.getIntegerFromStructureByName(c,f.OcOrcaConstants.WIDGET_POS_Y);w.setY(y);w.setWidth(f.OcStoryUtils.getIntegerFromStructureByName(c,f.OcOrcaConstants.WIDGET_WIDTH));w.setHeight(f.OcStoryUtils.getIntegerFromStructureByName(c,f.OcOrcaConstants.WIDGET_HEIGHT));}return w;};f.OcOrcaBaseWidget.prototype.processResponsivePageLayout=function(){var w=new f.OcWidgetLayout();var l=this.getPageLayout().getLaneLayoutJsonByWidgetId(this.getId());if(f.notNull(l)){this.addBorderDefinition(w,l);}w.setIsBackgroundWidget(false);return w;};f.OcOrcaBaseWidget.prototype.addBorderDefinition=function(w,l){var b=l.getStructureByKey(f.OcOrcaConstants.WIDGET_BORDER);if(f.isNull(b)){return;}w.setBorderColor(b.getStringByKey(f.OcOrcaConstants.WIDGET_BORDER_COLOR));w.setBorderFormat(b.getStringByKey(f.OcOrcaConstants.WIDGET_BORDER_FORMAT));w.setBorderSize(f.OcStoryUtils.getIntegerFromStructureByName(b,f.OcOrcaConstants.WIDGET_BORDER_THICKNESS));w.setBorderStyle(b.getStringByKey(f.OcOrcaConstants.WIDGET_BORDER_STYLE));w.setCornerRadius(f.OcStoryUtils.getIntegerFromStructureByName(b,f.OcOrcaConstants.WIDGET_BORDER_RADIUS));};f.OcOrcaBaseWidget.prototype.processIsBackgroundWidget=function(w,a){var p=this.getPageLayout().getPageLayoutJson();var b=f.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(p,f.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION);var c=f.OcStoryUtils.getIntegerFromStructureByName(b,f.OcOrcaConstants.WIDGET_HEIGHT);var d=f.OcStoryUtils.getIntegerFromStructureByName(b,f.OcOrcaConstants.WIDGET_WIDTH);var i=w>0&&w===c&&a>0&&a===d;return i;};f.OcOrcaBaseWidget.prototype.getPageLayout=function(){return this.getOrcaPage().getPageLayout();};f.OcOrcaBaseWidget.prototype.releaseObject=function(){this.m_orcaPage=null;this.m_widgetJson=null;f.OcWidget.prototype.releaseObject.call(this);};f.OcOrcaGridWidget=function(){};f.OcOrcaGridWidget.prototype=new f.OcOrcaBaseWidget();f.OcOrcaGridWidget.prototype._ff_c="OcOrcaGridWidget";f.OcOrcaGridWidget.create=function(w,a,o){var b=new f.OcOrcaGridWidget();b.setupOrcaBaseWidget(w,f.OcWidgetType.GRID,a,o);return b;};f.OcOrcaGridWidget.prototype.m_fireflyQuery=null;f.OcOrcaGridWidget.prototype.m_datasets=null;f.OcOrcaGridWidget.prototype.m_hasGridDefinition=null;f.OcOrcaGridWidget.prototype.m_gridDefinition=null;f.OcOrcaGridWidget.prototype.getFireflyQuery=function(){if(f.isNull(this.m_fireflyQuery)){var g=this.getGridDefinition();if(f.isNull(g)){this.m_fireflyQuery="";}else{this.m_fireflyQuery=f.OcStoryUtils.getValueOrEmptyString(g.getFireflyQuery());if(f.XStringUtils.isNullOrEmpty(this.m_fireflyQuery)){this.getContext().getMessageManager().addMessage(f.OcMessage.newGridWithoutQuery(f.Severity.WARNING,this));}}}return this.m_fireflyQuery;};f.OcOrcaGridWidget.prototype.getDatasets=function(){if(f.notNull(this.m_datasets)){return this.m_datasets;}this.m_datasets=f.XList.create();var g=this.getGridDefinition();if(f.isNull(g)){return this.m_datasets;}var a=g.getDatasource();if(f.XStringUtils.isNotNullAndNotEmpty(a)){var b=this.getStory().getDatasets().getDatasetByDatasource(a);if(f.notNull(b)){this.m_datasets.add(b);}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(f.OcMessage.newWidgetWithoutDatasource(f.Severity.WARNING,this));}return this.m_datasets;};f.OcOrcaGridWidget.prototype.getGridDefinition=function(){if(f.isNull(this.m_hasGridDefinition)){this.m_gridDefinition=this.getOrcaContext().getStoryEntityHelper().getGridDefinitionByGridId(this.getDataReferenceId());this.m_hasGridDefinition=f.TriStateBool.lookup(f.notNull(this.m_gridDefinition));if(!this.m_hasGridDefinition.getBoolean()){this.getContext().getMessageManager().addMessage(f.OcMessage.newGridWithoutDefinition(f.Severity.WARNING,this));}}return this.m_gridDefinition;};f.OcOrcaGridWidget.prototype.toString=function(){var s=f.XStringBuffer.create();s.append(f.OcOrcaBaseWidget.prototype.toString.call(this));var a=this.getFireflyQuery();if(f.XStringUtils.isNotNullAndNotEmpty(a)){s.appendNewLine().append("FF query available");}else{s.appendNewLine().append(" No FF query of grid available");}var d=this.getDatasets();if(f.XCollectionUtils.hasElements(d)){s.appendNewLine().append(d.toString());}return s.toString();};f.OcOrcaGridWidget.prototype.releaseObject=function(){this.m_fireflyQuery=null;this.m_datasets=f.XObjectExt.release(this.m_datasets);this.m_hasGridDefinition=f.XObjectExt.release(this.m_hasGridDefinition);this.m_gridDefinition=f.XObjectExt.release(this.m_gridDefinition);f.OcOrcaBaseWidget.prototype.releaseObject.call(this);};f.OcOrcaWidget=function(){};f.OcOrcaWidget.prototype=new f.OcOrcaBaseWidget();f.OcOrcaWidget.prototype._ff_c="OcOrcaWidget";f.OcOrcaWidget.create=function(w,a,b,o){var c=new f.OcOrcaWidget();c.setupOrcaBaseWidget(w,a,b,o);return c;};f.OcOrcaWidget.prototype.m_widgetText=null;f.OcOrcaWidget.prototype.m_pictogram=null;f.OcOrcaWidget.prototype.m_hasImage=null;f.OcOrcaWidget.prototype.m_image=null;f.OcOrcaWidget.prototype.getWidgetText=function(){if(f.isNull(this.m_widgetText)){this.m_widgetText=f.OcStoryUtils.getValueOrEmptyString(f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),f.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT));if(f.XStringUtils.isNullOrEmpty(this.m_widgetText)){this.getContext().getMessageManager().addMessage(f.OcMessage.newWidgetWithoutContent(f.Severity.INFO,this));}}return this.m_widgetText;};f.OcOrcaWidget.prototype.getPictogram=function(){if(f.isNull(this.m_pictogram)){this.m_pictogram=f.OcStoryUtils.getValueOrEmptyString(f.OcJsonPathEvaluator.getSingleJsonPathElementAsString(this.getWidgetJson(),f.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG));}return this.m_pictogram;};f.OcOrcaWidget.prototype.getFieldSelection=function(){var a=this.getOrcaPage().getStory().getFieldSelections().getFieldSelections().getValuesAsReadOnlyList();for(var b=0;b<a.size();b++){var c=a.get(b);var s=c.getSelectionInfos().asStructure().getStringByKey("source");if(f.XString.isEqual(this.getId(),s)){c.getSelectionInfos().asStructure().putString("id",c.getId());return c.getSelectionInfos().asStructure();}}return null;};f.OcOrcaWidget.prototype.getCalcVar=function(){var c=this.getOrcaPage().getStory().getCalculationVariables().getCalculationVariables().getValuesAsReadOnlyList();for(var a=0;a<c.size();a++){var b=c.get(a);var s=b.getSelectionInfos().asStructure().getStringByKey("source");if(f.XString.isEqual(this.getId(),s)){b.getSelectionInfos().asStructure().putString("id",b.getId());return b.getSelectionInfos().asStructure();}}return null;};f.OcOrcaWidget.prototype.getPageFilter=function(){var p=this.getOrcaPage().getPageFilters();for(var a=0;a<p.size();a++){var b=p.getStructureAt(a);var s=b.getStringByKey("source");if(f.XString.isEqual(this.getId(),s)){return b;}}return null;};f.OcOrcaWidget.prototype.getPageGroup=function(){var r=f.PrFactory.createList();var p=this.getOrcaPage().getPageGroups();for(var a=0;a<p.size();a++){var b=p.getStructureAt(a);var m=b.getListByKey("members");for(var i=0;i<m.size();i++){if(f.XString.isEqual(m.getStringAt(i),this.getId())){var n=r.addNewStructure();n.putNotNullAndNotEmpty("driverGroupInfo",b.getStructureByKey("driverGroupInfo"));}}}return r;};f.OcOrcaWidget.prototype.getImage=function(){if(f.isNull(this.m_hasImage)){this.m_image=this.getStory().getImages().getImageByImageId(this.getDataReferenceId());this.m_hasImage=f.TriStateBool.lookup(f.notNull(this.m_image));if(f.isNull(this.m_image)){this.getContext().getMessageManager().addMessage(f.OcMessage.newWidgetWithoutContent(f.Severity.WARNING,this));}}return this.m_image;};f.OcOrcaWidget.prototype.getImageUrl=function(){return f.XString.replace(this.getStory().getImages().getImageUrl(),"%s",this.getDataReferenceId());};f.OcOrcaWidget.prototype.toString=function(){var s=f.XStringBuffer.create();s.append(f.OcOrcaBaseWidget.prototype.toString.call(this));var w=this.getWidgetType();if(w===f.OcWidgetType.TEXT){var a=this.getWidgetText();if(f.XStringUtils.isNullOrEmpty(a)){s.appendNewLine().append(" Text = The text of the widget is empty").append(a);}else{s.appendNewLine().append(" Text = ").append(a);}}else if(w===f.OcWidgetType.IMAGE){var i=this.getImage();if(f.isNull(i)||!i.hasImageData()){s.appendNewLine().append(" Image = No image available");}else{s.appendNewLine().append(" Image = ").append(i.getId());if(f.XStringUtils.isNotNullAndNotEmpty(i.getThumbnail())){s.appendNewLine().append("Image thumbnail available");}}}return s.toString();};f.OcOrcaWidget.prototype.releaseObject=function(){this.m_widgetText=null;this.m_pictogram=null;this.m_hasImage=f.XObjectExt.release(this.m_hasImage);this.m_image=f.XObjectExt.release(this.m_image);f.OcOrcaBaseWidget.prototype.releaseObject.call(this);};f.OcOrcaWidgetWithDpAndVizDef=function(){};f.OcOrcaWidgetWithDpAndVizDef.prototype=new f.OcOrcaBaseWidget();f.OcOrcaWidgetWithDpAndVizDef.prototype._ff_c="OcOrcaWidgetWithDpAndVizDef";f.OcOrcaWidgetWithDpAndVizDef.prototype.m_vizDef=null;f.OcOrcaWidgetWithDpAndVizDef.prototype.m_datasets=null;f.OcOrcaWidgetWithDpAndVizDef.prototype.getVizDef=function(){if(f.isNull(this.m_vizDef)){this.m_vizDef=this.getModifiedVizDef();if(f.isNull(this.m_vizDef)){this.m_vizDef=f.PrFactory.createStructure();}if(!this.m_vizDef.hasElements()){this.getContext().getMessageManager().addMessage(this.getMissingVitDefWarning());}}return this.m_vizDef;};f.OcOrcaWidgetWithDpAndVizDef.prototype.getDatasets=function(){if(f.notNull(this.m_datasets)){return this.m_datasets;}this.m_datasets=f.XList.create();var d=f.OcJsonPathEvaluator.getJsonPathElementsAsStrings(this.getWidgetJson(),f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS);for(var i=0;i<d.size();i++){var a=this.getOrcaStory().getDatasets().getDatasetByDatasource(d.get(i));if(f.notNull(a)){this.m_datasets.add(a);}}if(!this.m_datasets.hasElements()){this.getContext().getMessageManager().addMessage(f.OcMessage.newWidgetWithoutDatasource(f.Severity.WARNING,this));}return this.m_datasets;};f.OcOrcaWidgetWithDpAndVizDef.prototype.getModifiedVizDef=function(){var v=f.PrFactory.createStructureDeepCopy(f.OcJsonPathEvaluator.getSingleJsonPathElementAsStructure(this.getWidgetJson(),f.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF));if(f.isNull(v)){return null;}v.putString(f.OcQuasarConstants.QUASAR_WIDGET_ID,this.getWidgetJson().getStringByKey(f.OcOrcaConstants.ID_ELEMENT));v.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR,this.getLayout().getBackgroundColor());var c=v.getStructureByKey(f.OcOrcaConstants.VIZ_DEF_CHART);this.addDatasetInformationToVizDef(c);var b=c.getListByKey(f.OcOrcaConstants.VIZ_DEF_BINDING);for(var a=0;a<b.size();a++){var d=b.getStructureAt(a);var e=d.getListByKey(f.OcOrcaConstants.VIZ_DEF_SOURCE);for(var s=0;s<e.size();s++){var g=e.getStructureAt(s);var h=g.getStringByKey(f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(f.isNull(h)){continue;}if(f.XString.isEqual(h,f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER)||f.XString.isEqual(h,f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION)||f.XString.isEqual(h,f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE)){this.addMeasureSyncToVizDef(g);}var p=g.getStructureByKey(f.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY);var i=p.getStringByKey(f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE);if(f.XString.isEqual(h,f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)||f.XString.isEqual(i,f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY)){var j=p.getStringByKey(f.OcOrcaConstants.VIZ_DEF_DIMENSION);if(f.isNull(j)){j=g.getStringByKey(f.OcOrcaConstants.VIZ_DEF_DIMENSION);}var k=v.getListByKey(f.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO);if(f.notNull(k)){for(var l=0;l<k.size();l++){var m=k.getStructureAt(l);var n=m.getStructureByKey(f.OcOrcaConstants.VIZ_DEF_ENTITY_ID);var o=n.getStringByKey(f.OcOrcaConstants.VIZ_DEF_DIMENSION);if(f.XString.isEqual(o,j)){g.putInteger(f.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL,f.OcStoryUtils.getIntegerFromStructureByName(m,f.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL));g.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE,m.getStringByKey(f.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE));}}}}}}return v;};f.OcOrcaWidgetWithDpAndVizDef.prototype.addDatasetInformationToVizDef=function(c){var d=this.getDatasets();if(!f.XCollectionUtils.hasElements(d)){return;}var a=d.get(0);var b=a.getFormulaAliases();if(f.notNull(b)){c.put(f.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES,b);}var m=a.getMemberDefinitions();if(f.notNull(m)){c.put(f.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS,m);}};f.OcOrcaWidgetWithDpAndVizDef.prototype.addMeasureSyncToVizDef=function(v){var s=v.getStringByKey(f.OcOrcaConstants.VIZ_DEF_SOURCE_ID);if(f.XStringUtils.isNullOrEmpty(s)){return;}var m=this.getStory().getMeasureSyncs().getMeasureSyncByMeasureName(s);if(f.notNull(m)){v.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR,m.getColor());v.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN,m.getPattern());}};f.OcOrcaWidgetWithDpAndVizDef.prototype.toString=function(){var s=f.XStringBuffer.create();s.append(f.OcOrcaBaseWidget.prototype.toString.call(this));var v=this.getVizDef();if(f.notNull(v)&&v.hasElements()){s.appendNewLine().append(" VizDef available");}else{s.appendNewLine().append(" No VizDef of chart available");}var d=this.getDatasets();if(f.XCollectionUtils.hasElements(d)){s.appendNewLine().append(d.toString());}return s.toString();};f.OcOrcaWidgetWithDpAndVizDef.prototype.releaseObject=function(){this.m_vizDef=null;this.m_datasets=f.XObjectExt.release(this.m_datasets);f.OcOrcaBaseWidget.prototype.releaseObject.call(this);};f.OcMeasureSync=function(){};f.OcMeasureSync.prototype=new f.DfNameObject();f.OcMeasureSync.prototype._ff_c="OcMeasureSync";f.OcMeasureSync.create=function(m){var c=new f.OcMeasureSync();c._setupInternal(m);return c;};f.OcMeasureSync.prototype.m_color=null;f.OcMeasureSync.prototype.m_pattern=null;f.OcMeasureSync.prototype.getColor=function(){return this.m_color;};f.OcMeasureSync.prototype.setColor=function(c){this.m_color=c;};f.OcMeasureSync.prototype.getPattern=function(){return this.m_pattern;};f.OcMeasureSync.prototype.setPattern=function(p){this.m_pattern=p;};f.OcMeasureSync.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Measure Sync: ").append(this.getName());s.appendNewLine().append("Color = ").append(this.getColor()).append(", Pattern = ").append(this.getPattern());return s.toString();};f.OcMeasureSync.prototype.releaseObject=function(){this.m_color=null;this.m_pattern=null;f.DfNameObject.prototype.releaseObject.call(this);};f.OcThreshold=function(){};f.OcThreshold.prototype=new f.DfNameObject();f.OcThreshold.prototype._ff_c="OcThreshold";f.OcThreshold.create=function(d,e){var t=new f.OcThreshold();t.setupThreshold(d,e);return t;};f.OcThreshold.prototype.m_exception=null;f.OcThreshold.prototype.setupThreshold=function(d,e){this._setupInternal(d);this.m_exception=e;};f.OcThreshold.prototype.getException=function(){return this.m_exception;};f.OcThreshold.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Thresholds: ").append(this.getName());s.appendNewLine().append(f.PrUtils.serialize(this.getException(),true,true,4));return s.toString();};f.OcThreshold.prototype.releaseObject=function(){this.m_exception=null;f.DfNameObject.prototype.releaseObject.call(this);};f.OcOrcaConstants=function(){};f.OcOrcaConstants.prototype=new f.XConstant();f.OcOrcaConstants.prototype._ff_c="OcOrcaConstants";f.OcOrcaConstants.ID_ELEMENT="id";f.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE="FPA_IS_LIVE_INTEGRATION";f.OcOrcaConstants.STORY_NAME="name";f.OcOrcaConstants.STORY_RESOURCE_ID="resourceId";f.OcOrcaConstants.STORY_DESCRIPTION="description";f.OcOrcaConstants.STORY_METADATA="metadata";f.OcOrcaConstants.STORY_DATA="data";f.OcOrcaConstants.STORY_OWNER_DISPLAY_NAME="ownerDisplayName";f.OcOrcaConstants.STORY_CREATED_TIME="createdTime";f.OcOrcaConstants.STORY_CREATED_BY="createdBy";f.OcOrcaConstants.STORY_CREATED_BY_DISPLAY_NAME="createdByDisplayName";f.OcOrcaConstants.STORY_MODIFIED_TIME="modifiedTime";f.OcOrcaConstants.STORY_MODIFIED_BY="modifiedBy";f.OcOrcaConstants.STORY_MODIFIED_BY_DISPLAY_NAME="modifiedByDisplayName";f.OcOrcaConstants.STORY_CHANGED_BY_DISPLAY_NAME="changedByDisplayName";f.OcOrcaConstants.STORY_UPDATE_COUNTER="updateCounter";f.OcOrcaConstants.STORY_RESOURCE_TYPE="resourceType";f.OcOrcaConstants.STORY_RESOURCE_TYPE_LINK="LINK";f.OcOrcaConstants.STORY_RESOURCE_TYPE_STORY="STORY";f.OcOrcaConstants.STORY_SOURCE_RESOURCE="sourceResource";f.OcOrcaConstants.STORY_SUB_NODES="subNodes";f.OcOrcaConstants.DRIVER_GROUP_INFO="driverGroupInfo";f.OcOrcaConstants.FILTER_ID="filterId";f.OcOrcaConstants.MEMBERS="members";f.OcOrcaConstants.STORY_ENTITIES="entities";f.OcOrcaConstants.STORY_ENTITY="story";f.OcOrcaConstants.STORY_ENTITY_TYPE="type";f.OcOrcaConstants.STORY_ENTITY_DATA="data";f.OcOrcaConstants.STORY_ENTITY_DATASET="dataset";f.OcOrcaConstants.STORY_ENTITY_CALCULATION="calculation";f.OcOrcaConstants.STORY_ENTITY_FIELD_SELECTION="fieldSelection";f.OcOrcaConstants.STORY_ENTITY_CALCULATION_VARIABLE="calculationVariable";f.OcOrcaConstants.STORY_ENTITY_IMAGE="sap.lumira.story.entity.image";f.OcOrcaConstants.STORY_ENTITY_GRID="analyticgrid.dynamictable";f.OcOrcaConstants.STORY_MEASURE_SYNC="measureSync";f.OcOrcaConstants.STORY_MEASURE_SYNC_PATTERN="pattern";f.OcOrcaConstants.STORY_MEASURE_SYNC_COLOR="color";f.OcOrcaConstants.STORY_CALCULATION_ENTITIES="entities";f.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITIES="entities";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_ENTITIES="entities";f.OcOrcaConstants.STORY_FIELD_SELECTION_NAME="name";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_NAME="name";f.OcOrcaConstants.STORY_FIELD_SELECTION_TYPE="type";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_TYPE="type";f.OcOrcaConstants.STORY_ENTITY_CALCULATED_DIMENSION="calculatedDimension";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_VALUE_TYPE="valueType";f.OcOrcaConstants.STORY_CALCULATION_NAME="name";f.OcOrcaConstants.STORY_CALCULATION_TYPE="type";f.OcOrcaConstants.STORY_CALCULATION_CALCULATION_TYPE="calculationType";f.OcOrcaConstants.STORY_CALCULATION_SUBTYPE="subType";f.OcOrcaConstants.STORY_CALCULATION_FORMULA="formula";f.OcOrcaConstants.STORY_CALCULATION_SELECTIONS="selections";f.OcOrcaConstants.STORY_CALCULATION_MEASURE_ID="measureId";f.OcOrcaConstants.STORY_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";f.OcOrcaConstants.STORY_CALCULATION_FORMAT="format";f.OcOrcaConstants.STORY_CACLUALTION_RESTRICTED_MEASURE="restrictedMeasure";f.OcOrcaConstants.STORY_CALCULATION_AGGREGATION="aggregation";f.OcOrcaConstants.STORY_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";f.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";f.OcOrcaConstants.STORY_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";f.OcOrcaConstants.STORY_CALCULATION_VALUES_NOT_IN="valuesNotIn";f.OcOrcaConstants.STORY_CALCULATION_START_DATE="startDate";f.OcOrcaConstants.STORY_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";f.OcOrcaConstants.STORY_CALCULATION_END_DATE="endDate";f.OcOrcaConstants.STORY_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";f.OcOrcaConstants.STORY_CALCULATION_RESULT_GRANULARITY="resultGranularity";f.OcOrcaConstants.STORY_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";f.OcOrcaConstants.STORY_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";f.OcOrcaConstants.STORY_CALCULATION_VALUE_TYPE="valueType";f.OcOrcaConstants.STORY_CALCULATION_TO_TEXT="isToText";f.OcOrcaConstants.STORY_CALCULATION_GROUP_THRESHOLDS="groupThresholds";f.OcOrcaConstants.STORY_FIELD_SELECTION_DIMENSION="dimension.selection";f.OcOrcaConstants.STORY_FIELD_SELECTION_MEASURE="measure.selection";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE="calculation.variable";f.OcOrcaConstants.STORY_FIELD_SELECTION_INFO="selectionInfo";f.OcOrcaConstants.STORY_CALCULATION_VARIABLE_SELECTION_INFO="selectionInfo";f.OcOrcaConstants.STORY_FIELD_SELECTION_ENTITY_IDS="entityIds";f.OcOrcaConstants.STORY_FILTERS="storyFilters";f.OcOrcaConstants.STORY_THRESHOLD_INTERVALS="intervals";f.OcOrcaConstants.STORY_COLOR_SYNC="colorSync";f.OcOrcaConstants.STORY_PAGES="pages";f.OcOrcaConstants.PAGE_IS_HIDDEN="hidden";f.OcOrcaConstants.PAGE_IS_RESPONSIVE="RESPONSIVE";f.OcOrcaConstants.PAGE_TITLE="title";f.OcOrcaConstants.PAGE_LAYOUT_CANVAS="CANVAS";f.OcOrcaConstants.WIDGET_CLASS="class";f.OcOrcaConstants.WIDGET_ID="widgetId";f.OcOrcaConstants.WIDGET_POS_X="x";f.OcOrcaConstants.WIDGET_POS_Y="y";f.OcOrcaConstants.WIDGET_WIDTH="width";f.OcOrcaConstants.WIDGET_HEIGHT="height";f.OcOrcaConstants.WIDGET_TYPE_CHART="InfochartVizWidget";f.OcOrcaConstants.WIDGET_TYPE_HEADER="HeaderWidget";f.OcOrcaConstants.WIDGET_TYPE_FIELD_SELECTION_INPUT_CONTROL="FieldSelectionInputControlWidget";f.OcOrcaConstants.WIDGET_TYPE_CALC_INPUT_CONTROL="CalcInputControlWidget";f.OcOrcaConstants.WIDGET_TYPE_PLANNING_SEQUENCE_TRIGGER="PlanningSequenceTriggerWidget";f.OcOrcaConstants.WIDGET_TYPE_IMAGE="ImageWidget";f.OcOrcaConstants.WIDGET_TYPE_TEXT="TextWidget";f.OcOrcaConstants.WIDGET_TYPE_TABLE="DynamicTableWidget";f.OcOrcaConstants.WIDGET_TYPE_PAGE_FILTER="PageFilterWidget";f.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM="PictogramWidget";f.OcOrcaConstants.WIDGET_TYPE_PICTOGRAM_SHAPE="PictogramShapeWidget";f.OcOrcaConstants.WIDGET_BACKGROUND_COLOR="backgroundColor";f.OcOrcaConstants.WIDGET_BORDER_RADIUS="radius";f.OcOrcaConstants.WIDGET_BORDER_STYLE="style";f.OcOrcaConstants.WIDGET_BORDER_THICKNESS="thickness";f.OcOrcaConstants.WIDGET_BORDER_FORMAT="format";f.OcOrcaConstants.WIDGET_BORDER_COLOR="color";f.OcOrcaConstants.WIDGET_BORDER="border";f.OcOrcaConstants.WIDGET_SECTION_DEFINITION="definition";f.OcOrcaConstants.WIDGET_FIREFLY_QUERY="ffQuery";f.OcOrcaConstants.VIZ_DEF_ENTITY_ID="entityId";f.OcOrcaConstants.VIZ_DEF_DIMENSION="dimension";f.OcOrcaConstants.VIZ_DEF_BINDING="bindings";f.OcOrcaConstants.VIZ_DEF_SOURCE="source";f.OcOrcaConstants.VIZ_DEF_SOURCE_ID="id";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE="type";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_HIERARCHY="hierarchy.pch";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_MEMBER="member";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_DIMENSION_SELECTION="dimension.selection";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION_VARIABLE="calculation.variable";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_RESTRICTED_MEASURE="restrictedMeasure";f.OcOrcaConstants.VIZ_DEF_SOURCE_TYPE_CALCULATION="calculation";f.OcOrcaConstants.VIZ_DEF_SOURCE_PARENT_KEY="parentKey";f.OcOrcaConstants.VIZ_DEF_HIERARCHY_LEVEL_INFO="hierarchyLevelInfo";f.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_LEVEL="hierarchyLevel";f.OcOrcaConstants.VIZ_DEF_HIERARCHY_DRILL_MODE="mode";f.OcOrcaConstants.VIZ_DEF_CHART="chart";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA="formula";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE="type";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS="selections";f.OcOrcaConstants.VIZ_DEF_THRESHOLD="threshold";f.OcOrcaConstants.VIZ_DEF_COLOR_BINDING="colorBinding";f.OcOrcaConstants.VIZ_DEF_ACCOUNT_ENTITY_ID="accountEntityId";f.OcOrcaConstants.VIZ_DEF_ACCOUNT_ID="accountId";f.OcOrcaConstants.VIZ_DEF_THRESHOLD_NAME="name";f.OcOrcaConstants.VIZ_DEF_LOW="low";f.OcOrcaConstants.VIZ_DEF_LOW_INCLUSIVE="lowInclusive";f.OcOrcaConstants.VIZ_DEF_HIGH="high";f.OcOrcaConstants.VIZ_DEF_HIGH_INCLUSIVE="highInclusive";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION="aggregation";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS="aggregationDimensions";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION="exceptionAggregation";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS="exceptionAggregationDimensions";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN="valuesNotIn";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE="startDate";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL="startDateCurrentIfNULL";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE="endDate";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL="endDateCurrentIfNULL";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY="resultGranularity";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE="timezoneOffsetForCurrentDate";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID="selectedDimensionId";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE="valueType";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT="isToText";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS="groupThresholds";f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS="selectionInfos";f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS="entityIds";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID="measureId";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID="referenceMeasureId";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_CALCULATTION_TYPE="calculationType";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO="formatingInfo";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME="name";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID="id";f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID="id";f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME="name";f.OcOrcaConstants.MODIFIED_VIZ_DEF_PATTERN="pattern";f.OcOrcaConstants.MODIFIED_VIZ_DEF_COLOR="color";f.OcOrcaConstants.MODIFIED_VIZ_DEF_PAGE_FILTER="pageFilter";f.OcOrcaConstants.MODIFIED_VIZ_DEF_STORY_FILTERS="storyFilters";f.OcOrcaConstants.MODIFIED_VIZ_DEF_BACKGROUND_COLOR="BackgroundColor";f.OcOrcaConstants.MODIFIED_VIZ_DEF_SOURCE_DEF="def";f.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_MODE="drillMode";f.OcOrcaConstants.MODIFIED_VIZ_DEF_HIERARCHY_DRILL_LEVEL="drillLevel";f.OcOrcaConstants.MODIFIED_VIZ_DEF_FORMULA_ALIASES="formulaAliases";f.OcOrcaConstants.MODIFIED_VIZ_DEF_MEMBER_DEFINITIONS="memberDefinitions";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID="id";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_NAME="name";f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS="selectionInfos";f.OcOrcaConstants.CUBE="CUBE";f.OcOrcaConstants.CUBE_DATA_SOURCE="DataSource";f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE="Type";f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY="query";f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING="planning";f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW="view";f.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM="System";f.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME="ObjectName";f.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME="PackageName";f.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA="SchemaName";f.OcOrcaConstants.CUBE_FORMULAS="formulas";f.OcOrcaConstants.CUBE_FORMULAS_DATA="Data";f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE="measure";f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA="formula";f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON="jsonFormula";f.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA="formula";f.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON="formulaJson";f.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=null;f.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=null;f.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=null;f.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=null;f.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=null;f.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=null;f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=null;f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=null;f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=null;f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=null;f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=null;f.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=null;f.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=null;f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=null;f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=null;f.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=null;f.OcOrcaConstants.PATH_FROM_FILTERS_TO_POSSIBLE_VALUES=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=null;f.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=null;f.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=null;f.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=null;f.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=null;f.OcOrcaConstants.staticSetup=function(){f.OcOrcaConstants.PATH_FROM_STORY_TO_THRESHOLDS=f.OcJsonPath.create("thresholds.story");f.OcOrcaConstants.PATH_FROM_STORY_TO_STORY_ENTITIES=f.OcJsonPath.create("cdata.content.entities");f.OcOrcaConstants.PATH_FROM_STORY_ENTITIY_TO_WIDGETS=f.OcJsonPath.create("pages.content.widgets");f.OcOrcaConstants.PATH_FROM_GRID_ENTITIY_TO_DATA_DEFINITION=f.OcJsonPath.create("data.content.segments.dataRegion");f.OcOrcaConstants.PATH_FROM_GRID_DATA_DEFINITION_TO_DATASOURCE=f.OcJsonPath.create("dataSource.queryId");f.OcOrcaConstants.PATH_FROM_PAGE_TO_LAYOUT_TYPE=f.OcJsonPath.create("content.layouts.definition.page.definition.type");f.OcOrcaConstants.PATH_FROM_PAGE_TO_SECTION_WIDGET_ID=f.OcJsonPath.create("content.layouts.definition.page.sections.widgets.widgetId");f.OcOrcaConstants.PATH_FROM_PAGE_TO_LANES_WIDGET_ID=f.OcJsonPath.create("content.layouts.definition.page.rows.lanes.widgets.widgetId");f.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS=f.OcJsonPath.create("content.filters");f.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS=f.OcJsonPath.create("content.groups");f.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT=f.OcJsonPath.create("content.layouts.definition.page");f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_BACKGROUND_COLOR=f.OcJsonPath.create("definition.backgroundColor");f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LAYOUT_TYPE=f.OcJsonPath.create("definition.type");f.OcOrcaConstants.PATH_FROM_DATASET_TO_MODEL_ID=f.OcJsonPath.create("data.modelId");f.OcOrcaConstants.PATH_FROM_MEASURE_SYNC_TO_MEASURE_NAME=f.OcJsonPath.create("id.id");f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_DATA=f.OcJsonPath.create("data.src");f.OcOrcaConstants.PATH_FROM_IMAGE_TO_IMAGE_THUMBNAIL=f.OcJsonPath.create("data.thumbnail");f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_WIDGETS=f.OcJsonPath.create("sections.widgets");f.OcOrcaConstants.PATH_FROM_PAGE_TO_WIDGET=f.OcJsonPath.create("content.widgets");f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_SECTIONS=f.OcJsonPath.create("sections");f.OcOrcaConstants.PATH_FROM_PAGE_LAYOUT_TO_LANE_WIDGETS=f.OcJsonPath.create("rows.lanes.widgets");f.OcOrcaConstants.PATH_FROM_SECTION_TO_WIDGET_ID=f.OcJsonPath.create("widgets.widgetId");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_TEXT=f.OcJsonPath.create("definition.text");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_SVG=f.OcJsonPath.create("definition.svg");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATA_REFERENCE_ID=f.OcJsonPath.create("definition.entityId");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_VIZ_DEF=f.OcJsonPath.create("definition.vizContent.vizDefinition");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_DATASETS=f.OcJsonPath.create("definition.datasets");f.OcOrcaConstants.PATH_FROM_WIDGET_TO_LAYOUT_DEFINITION=f.OcJsonPath.create("definition");f.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS=f.OcJsonPath.create("dependentObjects.data.measures");f.OcOrcaConstants.PATH_FROM_DATASET_TO_VARIABLE=f.OcJsonPath.create("promptValues.variables");f.OcOrcaConstants.PATH_FROM_DEFINITION_TO_CHART_TYPE=f.OcJsonPath.create("definition.vizContent.vizDefinition.chart.type");};f.OcStoryCatalogType=function(){};f.OcStoryCatalogType.prototype=new f.XConstant();f.OcStoryCatalogType.prototype._ff_c="OcStoryCatalogType";f.OcStoryCatalogType.FAVORITE=null;f.OcStoryCatalogType.PRIVATE=null;f.OcStoryCatalogType.SEARCH_LIST=null;f.OcStoryCatalogType.staticSetup=function(){f.OcStoryCatalogType.FAVORITE=f.XConstant.setupName(new f.OcStoryCatalogType(),"Favorite");f.OcStoryCatalogType.PRIVATE=f.XConstant.setupName(new f.OcStoryCatalogType(),"Private");f.OcStoryCatalogType.SEARCH_LIST=f.XConstant.setupName(new f.OcStoryCatalogType(),"Search List");};f.OcStoryCatalogItem=function(){};f.OcStoryCatalogItem.prototype=new f.DfIdNameObject();f.OcStoryCatalogItem.prototype._ff_c="OcStoryCatalogItem";f.OcStoryCatalogItem.create=function(s,a){var c=new f.OcStoryCatalogItem();c.setupExt(s,a);return c;};f.OcStoryCatalogItem.prototype.m_description=null;f.OcStoryCatalogItem.prototype.m_createTime=null;f.OcStoryCatalogItem.prototype.m_createdBy=null;f.OcStoryCatalogItem.prototype.m_createdByDisplayName=null;f.OcStoryCatalogItem.prototype.m_modifiedTime=null;f.OcStoryCatalogItem.prototype.m_modifiedBy=null;f.OcStoryCatalogItem.prototype.m_modifiedByDisplayName=null;f.OcStoryCatalogItem.prototype.m_updateCounter=0;f.OcStoryCatalogItem.prototype.getDescription=function(){return this.m_description;};f.OcStoryCatalogItem.prototype.setDescription=function(d){this.m_description=d;};f.OcStoryCatalogItem.prototype.getCreateTime=function(){return this.m_createTime;};f.OcStoryCatalogItem.prototype.setCreateTime=function(c){this.m_createTime=c;};f.OcStoryCatalogItem.prototype.getCreatedBy=function(){return this.m_createdBy;};f.OcStoryCatalogItem.prototype.setCreatedBy=function(c){this.m_createdBy=c;};f.OcStoryCatalogItem.prototype.getCreatedByDisplayName=function(){return this.m_createdByDisplayName;};f.OcStoryCatalogItem.prototype.setCreatedByDisplayName=function(c){this.m_createdByDisplayName=c;};f.OcStoryCatalogItem.prototype.getModifiedTime=function(){return this.m_modifiedTime;};f.OcStoryCatalogItem.prototype.setModifiedTime=function(m){this.m_modifiedTime=m;};f.OcStoryCatalogItem.prototype.getModifiedBy=function(){return this.m_modifiedBy;};f.OcStoryCatalogItem.prototype.setModifiedBy=function(m){this.m_modifiedBy=m;};f.OcStoryCatalogItem.prototype.getModifiedByDisplayName=function(){return this.m_modifiedByDisplayName;};f.OcStoryCatalogItem.prototype.setModifiedByDisplayName=function(m){this.m_modifiedByDisplayName=m;};f.OcStoryCatalogItem.prototype.getUpdateCounter=function(){return this.m_updateCounter;};f.OcStoryCatalogItem.prototype.setUpdateCounter=function(u){this.m_updateCounter=u;};f.OcStoryCatalogItem.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_createdByDisplayName=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_modifiedByDisplayName=null;this.m_updateCounter=0;f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcStoryCatalogItem.prototype.toString=function(){var s=f.XStringBuffer.create();s.append(this.getId()).append(": ").append(this.getName());return s.toString();};f.OcOrcaCubeMetadata=function(){};f.OcOrcaCubeMetadata.prototype=new f.DfNameTextObject();f.OcOrcaCubeMetadata.prototype._ff_c="OcOrcaCubeMetadata";f.OcOrcaCubeMetadata.create=function(c){var a=new f.OcOrcaCubeMetadata();a.setupExt(c);return a;};f.OcOrcaCubeMetadata.prototype.m_datasourceName=null;f.OcOrcaCubeMetadata.prototype.m_systemName=null;f.OcOrcaCubeMetadata.prototype.m_formulas=null;f.OcOrcaCubeMetadata.prototype.m_memberDefinitions=null;f.OcOrcaCubeMetadata.prototype.setupExt=function(c){this._setupInternal(c.getStringByKey(f.OcOrcaConstants.ID_ELEMENT));var d=c.getStructureByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE);var a=d.getStringByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE);a=f.XString.toLowerCase(a);if(f.XString.isEqual(a,f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_VIEW)||f.XString.isEqual(a,f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_PLANNING)||f.XString.isEqual(a,f.OcOrcaConstants.CUBE_DATA_SOURCE_TYPE_QUERY)){var o=d.getStringByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE_OBJECT_NAME);var p=d.getStringByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE_PACKAGE_NAME);var s=d.getStringByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE_SCHEMA);var b=f.XStringUtils.concatenate4(p,"][",o,"]");b=f.XStringUtils.concatenate5(a,":[",s,"][",b);this.m_datasourceName=b;}this.m_systemName=d.getStringByKey(f.OcOrcaConstants.CUBE_DATA_SOURCE_SYSTEM);var e=c.getStructureByKey(f.OcOrcaConstants.CUBE_FORMULAS);if(f.notNull(e)){this.m_formulas=e.getByKey(f.OcOrcaConstants.CUBE_FORMULAS_DATA);}this.m_memberDefinitions=this.processMemberDefinitions(c);};f.OcOrcaCubeMetadata.prototype.getDataSourceName=function(){return this.m_datasourceName;};f.OcOrcaCubeMetadata.prototype.getFormulas=function(){return this.m_formulas;};f.OcOrcaCubeMetadata.prototype.getSystemName=function(){return this.m_systemName;};f.OcOrcaCubeMetadata.prototype.getMemberDefinitions=function(){return this.m_memberDefinitions;};f.OcOrcaCubeMetadata.prototype.processMemberDefinitions=function(c){var m=f.OcJsonPathEvaluator.getSingleJsonPathElementAsList(c,f.OcOrcaConstants.PATH_FROM_CUBE_TO_DEPENDENT_OBJECTS);if(f.PrUtils.isListEmpty(m)){return null;}var a=f.PrFactory.createStructure();for(var i=0;i<m.size();i++){var b=m.getStructureAt(i);var d=b.getStringByKey(f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_MEASURE);if(f.XStringUtils.isNullOrEmpty(d)){continue;}var e=b.getStringByKey(f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA);if(f.XStringUtils.isNotNullAndNotEmpty(e)){var g=b.getStringByKey(f.OcOrcaConstants.CUBE_DEPENDENT_OBJECT_FORMULA_JSON);var h=a.putNewStructure(d);h.putString(f.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA,e);h.putString(f.OcOrcaConstants.CUBE_MEMBER_DEFINITION_FORMULA_JSON,g);}}return a;};f.OcOrcaCubeMetadata.prototype.releaseObject=function(){this.m_datasourceName=null;this.m_systemName=null;this.m_memberDefinitions=f.XObjectExt.release(this.m_memberDefinitions);f.DfNameTextObject.prototype.releaseObject.call(this);};f.OcOrcaAnalyticalCardWidget=function(){};f.OcOrcaAnalyticalCardWidget.prototype=new f.OcOrcaWidgetWithDpAndVizDef();f.OcOrcaAnalyticalCardWidget.prototype._ff_c="OcOrcaAnalyticalCardWidget";f.OcOrcaAnalyticalCardWidget.create=function(w,a,o){var b=new f.OcOrcaAnalyticalCardWidget();b.setupOrcaBaseWidget(w,f.OcWidgetType.ANALYTICAL_CARD,a,o);return b;};f.OcOrcaAnalyticalCardWidget.prototype.getMissingVitDefWarning=function(){return f.OcMessage.newKpiWithoutVizDef(f.Severity.WARNING,this);};f.OcOrcaAnalyticalCardWidget.prototype.toString=function(){return f.XStringUtils.concatenate2("KPI:",f.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this));};f.OcOrcaAnalyticalCardWidget.prototype.processCanvasLayout=function(){var r=f.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);r.setHeight(200);return r;};f.OcOrcaChartWidget=function(){};f.OcOrcaChartWidget.prototype=new f.OcOrcaWidgetWithDpAndVizDef();f.OcOrcaChartWidget.prototype._ff_c="OcOrcaChartWidget";f.OcOrcaChartWidget.create=function(w,a,o){var b=new f.OcOrcaChartWidget();b.setupOrcaBaseWidget(w,f.OcWidgetType.CHART,a,o);return b;};f.OcOrcaChartWidget.prototype.getQuasarName=function(q){if(f.notNull(q)&&q.getChartType()!==null){return q.getChartType().getQuasarName();}return f.OcOrcaWidgetWithDpAndVizDef.prototype.getQuasarName.call(this,q);};f.OcOrcaChartWidget.prototype.getMissingVitDefWarning=function(){return f.OcMessage.newChartWithoutVizDef(f.Severity.WARNING,this);};f.OcOrcaChartWidget.prototype.toString=function(){return f.XStringUtils.concatenate2("CHART:",f.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this));};f.OcOrcaKpiWidget=function(){};f.OcOrcaKpiWidget.prototype=new f.OcOrcaWidgetWithDpAndVizDef();f.OcOrcaKpiWidget.prototype._ff_c="OcOrcaKpiWidget";f.OcOrcaKpiWidget.create=function(w,a,o){var b=new f.OcOrcaKpiWidget();b.setupOrcaBaseWidget(w,f.OcWidgetType.KPI,a,o);return b;};f.OcOrcaKpiWidget.prototype.getMissingVitDefWarning=function(){return f.OcMessage.newKpiWithoutVizDef(f.Severity.WARNING,this);};f.OcOrcaKpiWidget.prototype.toString=function(){return f.XStringUtils.concatenate2("KPI:",f.OcOrcaWidgetWithDpAndVizDef.prototype.toString.call(this));};f.OcOrcaKpiWidget.prototype.processCanvasLayout=function(){var r=f.OcOrcaWidgetWithDpAndVizDef.prototype.processCanvasLayout.call(this);r.setHeight(200);return r;};f.OcQuasarConstants=function(){};f.OcQuasarConstants.prototype=new f.XConstant();f.OcQuasarConstants.prototype._ff_c="OcQuasarConstants";f.OcQuasarConstants.QUASAR_VARIABLES="Variables";f.OcQuasarConstants.QUASAR_CONTENT="Content";f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR="BackgroundColor";f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_IMAGE_SRC="BackgroundImageSrc";f.OcQuasarConstants.QUASAR_CONTENT_ITEMS="Items";f.OcQuasarConstants.QUASAR_CONTENT_TYPE="CType";f.OcQuasarConstants.QUASAR_ITEM_NAME="Name";f.OcQuasarConstants.QUASAR_WIDGET_ID="widgetId";f.OcQuasarConstants.QUASAR_ENTITY_ID="EntityId";f.OcQuasarConstants.QUASAR_ITEM_TYPE="CType";f.OcQuasarConstants.QUASAR_ITEM_TEXT="Text";f.OcQuasarConstants.QUASAR_ITEM_TEXT_UNSUPPORTED_WIDGET="Unsupported Widget";f.OcQuasarConstants.QUASAR_ITEM_PICTOGRAM_SVG="svg";f.OcQuasarConstants.QUASAR_ITEM_PAGE_FILTER="PageFilter";f.OcQuasarConstants.QUASAR_ITEM_IMAGE_SRC="Src";f.OcQuasarConstants.QUASAR_ITEM_BINDING="Binding";f.OcQuasarConstants.QUASAR_ITEM_BINDINGS="Bindings";f.OcQuasarConstants.QUASAR_ITEM_BINDING_TYPE="Type";f.OcQuasarConstants.QUASAR_ITEM_BINDING_SOURCE="Source";f.OcQuasarConstants.QUASAR_LAYOUT_PERCENT="%";f.OcQuasarConstants.QUASAR_LAYOUT_PX="px";f.OcQuasarConstants.QUASAR_LAYOUT_X="X";f.OcQuasarConstants.QUASAR_LAYOUT_Y="Y";f.OcQuasarConstants.QUASAR_LAYOUT_WIDTH="Width";f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT="Height";f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_SIZE="BorderSize";f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_STYLE="BorderStyle";f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_FORMAT="BorderFormat";f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_COLOR="BorderColor";f.OcQuasarConstants.QUASAR_LAYOUT_BORDER_CORNER_RADIUS="CornerRadius";f.OcQuasarConstants.QUASAR_LAYOUT_BACKGROUND_COLOR="BackgroundColor";f.OcQuasarConstants.QUASAR_GLOBAL_DEF="GlobalDef";f.OcQuasarConstants.QUASAR_GLOBAL_DEF_COLOR_SYNC="colorSync";f.OcQuasarConstants.QUASAR_GLOBAL_DEF_THRESHOLDS="thresholds";f.OcQuasarConstants.QUASAR_VIZ_DEF_THRESHOLD="threshold";f.OcQuasarConstants.QUASAR_DATA_PROVIDERS="DataProviders";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_VIZ_DEF="VizDef";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_FF_QUERY="ffQuery";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_SYSTEM="System";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_CUBE_NAME="CubeName";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_MODEL_ID="ModelId";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_DATA_SOURCE="DataSource";f.OcQuasarConstants.QUASAR_DATA_PROVIDER_NAME="Name";f.OcQuasarConstants.QUASAR_CHART_BINDING_TYPE="C";f.OcQuasarConstants.QUASAR_KPI_BINDING_TYPE="Kpi";f.OcQuasarConstants.QUASAR_CHART_BODY_BINDING_TYPE="Chart";f.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=null;f.OcQuasarConstants.STORY_PAGE_ID="pageId";f.OcQuasarConstants.MEMBERS="members";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS="GlobalObjects";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS="PageFilters";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS="StoryFilters";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS="Calculations";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES="CalculationVariables";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS="FieldSelections";f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_THRESHOLDS="Thresholds";f.OcQuasarConstants.staticSetup=function(){f.OcQuasarConstants.VIZ_DEF_PATH_TO_THRESHOLDS=f.OcJsonPath.create("userPreferences.threshold");};f.OcCacheableQuasarStory=function(){};f.OcCacheableQuasarStory.prototype=new f.DfNameTextObject();f.OcCacheableQuasarStory.prototype._ff_c="OcCacheableQuasarStory";f.OcCacheableQuasarStory.create=function(s,a){var b=new f.OcCacheableQuasarStory();b.setupWithNameText(s,a);return b;};f.OcCacheableQuasarStory.prototype.m_description=null;f.OcCacheableQuasarStory.prototype.m_createTime=null;f.OcCacheableQuasarStory.prototype.m_createdBy=null;f.OcCacheableQuasarStory.prototype.m_modifiedTime=null;f.OcCacheableQuasarStory.prototype.m_modifiedBy=null;f.OcCacheableQuasarStory.prototype.m_updateCounter=0;f.OcCacheableQuasarStory.prototype.m_mainLayoutType=null;f.OcCacheableQuasarStory.prototype.m_chartType=null;f.OcCacheableQuasarStory.prototype.m_mediaUrl=null;f.OcCacheableQuasarStory.prototype.m_pages=null;f.OcCacheableQuasarStory.prototype.setDescription=function(d){this.m_description=d;};f.OcCacheableQuasarStory.prototype.getDescription=function(){return this.m_description;};f.OcCacheableQuasarStory.prototype.setCreateTime=function(c){this.m_createTime=c;};f.OcCacheableQuasarStory.prototype.getCreateTime=function(){return this.m_createTime;};f.OcCacheableQuasarStory.prototype.setCreatedBy=function(c){this.m_createdBy=c;};f.OcCacheableQuasarStory.prototype.getCreatedBy=function(){return this.m_createdBy;};f.OcCacheableQuasarStory.prototype.setModifiedTime=function(m){this.m_modifiedTime=m;};f.OcCacheableQuasarStory.prototype.getModifiedTime=function(){return this.m_modifiedTime;};f.OcCacheableQuasarStory.prototype.setModifiedBy=function(m){this.m_modifiedBy=m;};f.OcCacheableQuasarStory.prototype.getModifiedBy=function(){return this.m_modifiedBy;};f.OcCacheableQuasarStory.prototype.setUpdateCounter=function(u){this.m_updateCounter=u;};f.OcCacheableQuasarStory.prototype.getUpdateCounter=function(){return this.m_updateCounter;};f.OcCacheableQuasarStory.prototype.setMediaUrl=function(m){this.m_mediaUrl=m;};f.OcCacheableQuasarStory.prototype.getMediaUrl=function(){return this.m_mediaUrl;};f.OcCacheableQuasarStory.prototype.setMainLayoutType=function(l){this.m_mainLayoutType=l;};f.OcCacheableQuasarStory.prototype.getMainLayoutType=function(){return this.m_mainLayoutType;};f.OcCacheableQuasarStory.prototype.getChartType=function(){return this.m_chartType;};f.OcCacheableQuasarStory.prototype.setChartType=function(c){this.m_chartType=c;};f.OcCacheableQuasarStory.prototype.getPages=function(){return this.m_pages;};f.OcCacheableQuasarStory.prototype.setPages=function(p){this.m_pages=p;};f.OcCacheableQuasarStory.prototype.releaseObject=function(){this.m_description=null;this.m_createTime=null;this.m_createdBy=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_mainLayoutType=null;this.m_chartType=null;this.m_mediaUrl=null;this.m_pages=null;f.DfNameTextObject.prototype.releaseObject.call(this);};f.OcQuasarStory=function(){};f.OcQuasarStory.prototype=new f.DfIdNameObject();f.OcQuasarStory.prototype._ff_c="OcQuasarStory";f.OcQuasarStory.create=function(s){var q=new f.OcQuasarStory();q.setupStory(s);return q;};f.OcQuasarStory.getSortedKeys=function(r){var k=f.XListOfString.create();k.addAll(r);k.sortByDirection(f.XSortDirection.ASCENDING);return k;};f.OcQuasarStory.prototype.m_story=null;f.OcQuasarStory.prototype.m_mainLayoutType=null;f.OcQuasarStory.prototype.m_chartType=null;f.OcQuasarStory.prototype.setupStory=function(s){this.setupExt(s.getId(),s.getName());this.m_story=s;this.m_mainLayoutType=f.OcLayoutType.CANVAS;this.m_chartType=f.OcChartType.HIGHCHARTS;};f.OcQuasarStory.prototype.getDescription=function(){return this.m_story.getDescription();};f.OcQuasarStory.prototype.getCreateTime=function(){return this.m_story.getCreateTime();};f.OcQuasarStory.prototype.getCreatedBy=function(){return this.m_story.getCreatedBy();};f.OcQuasarStory.prototype.getModifiedBy=function(){return this.m_story.getModifiedBy();};f.OcQuasarStory.prototype.getModifiedTime=function(){return this.m_story.getModifiedTime();};f.OcQuasarStory.prototype.getPublicUrl=function(){return this.m_story.getPublicUrl();};f.OcQuasarStory.prototype.getQuasarAnalyticalCardDocument=function(){return this.processQuasarAnalyticalCard();};f.OcQuasarStory.prototype.getQuasarCompositeAnalyticalCardDocument=function(){return this.processQuasarCompositeAnalyticalCard();};f.OcQuasarStory.prototype.getQuasarTabStoryDocument=function(){try{return this.processQuasarStory();}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return null;}};f.OcQuasarStory.prototype.getQuasarPages=function(){try{return this.processQuasarPages();}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return f.XList.create();}};f.OcQuasarStory.prototype.getQuasarPageDocuments=function(){try{return f.OcQuasarStoryConverter.convertStory(this.m_story,this.createQuasarOptions());}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return f.XList.create();}};f.OcQuasarStory.prototype.getCacheableQuasarStory=function(){try{return this.processCacheableQuasarStory();}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return null;}};f.OcQuasarStory.prototype.getQuasarWidgetDocument=function(w){try{return this.processQuasarWidgetDocument(w);}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return f.PrFactory.createStructure();}};f.OcQuasarStory.prototype.getWidgetIds=function(){try{return this.m_story.getPageManager().getAllWidgetIds();}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return f.XListOfString.create();}};f.OcQuasarStory.prototype.getWidgetIdsByWidgetType=function(w){try{return this.m_story.getPageManager().getAllWidgetIdsByWidgetType(w);}catch(t){this.getContext().getMessageManager().addMessage(f.OcMessage.newUnexpectedError(t));return f.XListOfString.create();}};f.OcQuasarStory.prototype.getMessages=function(){return this.getContext().getMessageManager();};f.OcQuasarStory.prototype.processCacheableQuasarStory=function(){var s=this.m_story;var c=f.OcCacheableQuasarStory.create(s.getId(),s.getNormalizedName());c.setCreatedBy(s.getCreatedBy());c.setDescription(s.getDescription());c.setCreateTime(s.getCreateTime());c.setModifiedTime(s.getModifiedTime());c.setModifiedBy(s.getModifiedBy());c.setUpdateCounter(s.getUpdateCounter());c.setMainLayoutType(this.m_mainLayoutType);c.setChartType(this.m_chartType);c.setMediaUrl(s.getImages().getImageUrl());c.setPages(this.processQuasarPages());return c;};f.OcQuasarStory.prototype.processQuasarPages=function(){var i;var p=f.PrFactory.createList();var q=f.XList.create();var a=this.createQuasarOptions();var b=this.m_story.getPageManager().getPages();for(i=0;i<b.size();i++){this.mapPageFilters(p,b.get(i));}for(i=0;i<b.size();i++){var c=b.get(i);var d=c.getId();var e=c.getName();var g=f.OcQuasarStoryConverter.convertPage(c,a);this.applyGlobalObjects(g,p);var h=f.OcQuasarStoryPage.create(d,e,g);q.add(h);}return q;};f.OcQuasarStory.prototype.processQuasarAnalyticalCard=function(){var p=f.PrFactory.createList();var s=f.PrFactory.createStructure();var c=s.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT);c.putString(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");var a=c.putNewList(f.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var d=s.putNewList(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var q=this.createQuasarOptions();var b=this.m_story.getPageManager().getPages();var i=0;for(;i<b.size();i++){var e=b.get(i);var g=f.OcQuasarPageContentConverter.convertPageToAnalyticalCard(e,d,q);if(f.XCollectionUtils.hasElements(g)){g.putString(f.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());g.putString(f.OcQuasarConstants.QUASAR_ITEM_TEXT,e.getName());a.add(g);this.mapPageFilters(p,e);break;}}this.applyGlobalObjects(s,p);return s;};f.OcQuasarStory.prototype.processQuasarCompositeAnalyticalCard=function(){var p=f.PrFactory.createList();var s=f.PrFactory.createStructure();var c=s.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT);c.putString(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,"FlexLayout");var a=c.putNewList(f.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var d=s.putNewList(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var q=this.createQuasarOptions();var b=this.m_story.getPageManager().getPages();var i=0;for(;i<b.size();i++){var e=b.get(i);var g=f.OcQuasarPageContentConverter.convertPageToCompositeAnalyticalCard(a,this,e,d,q);if(f.XCollectionUtils.hasElements(g)){g.putString(f.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());g.putString(f.OcQuasarConstants.QUASAR_ITEM_TEXT,e.getName());this.mapPageFilters(p,e);break;}}this.applyGlobalObjects(s,p);return s;};f.OcQuasarStory.prototype.processQuasarStory=function(){var p=f.PrFactory.createList();var s=f.PrFactory.createStructure();var c=s.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT);c.putString(f.OcQuasarConstants.QUASAR_CONTENT_BACKGROUND_COLOR,"transparent");c.putString(f.OcQuasarConstants.QUASAR_LAYOUT_HEIGHT,"100%");c.putString(f.OcQuasarConstants.QUASAR_LAYOUT_WIDTH,"100%");c.putString(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStrip");var a=c.putNewList(f.OcQuasarConstants.QUASAR_CONTENT_ITEMS);var d=s.putNewList(f.OcQuasarConstants.QUASAR_DATA_PROVIDERS);var q=this.createQuasarOptions();var b=this.m_story.getPageManager().getPages();for(var i=0;i<b.size();i++){var e=b.get(i);var g=a.addNewStructure();g.putString(f.OcQuasarConstants.QUASAR_CONTENT_TYPE,"TabStripItem");g.putString(f.OcQuasarConstants.QUASAR_ITEM_NAME,e.getId());g.putString(f.OcQuasarConstants.QUASAR_ITEM_TEXT,e.getName());f.OcQuasarPageConverter.convertPage(e,q,g.putNewStructure(f.OcQuasarConstants.QUASAR_CONTENT),d);this.mapPageFilters(p,e);}this.applyGlobalObjects(s,p);return s;};f.OcQuasarStory.prototype.mapPageFilters=function(p,a){var m=f.JsonParserFactory.createFromSafeString(a.getPageFilters().toString()).asList();var b=a.getPageGroups();for(var j=0;j<m.size();j++){var c=m.getStructureAt(j);var d=f.PrFactory.createStructure();var e=c.getKeysAsReadOnlyListOfString();for(var g=0;g<e.size();g++){var h=e.get(g);d.put(h,c.getByKey(h));}d.putString(f.OcQuasarConstants.STORY_PAGE_ID,a.getId());for(var k=0;k<b.size();k++){var i=b.getStructureAt(k);var n=i.getListByKey(f.OcOrcaConstants.DRIVER_GROUP_INFO);if(f.notNull(n)){for(var l=0;l<n.size();l++){var o=n.getStructureAt(l).getStringByKey(f.OcOrcaConstants.FILTER_ID);if(f.notNull(o)&&f.XString.isEqual(o,d.getStringByKey(f.OcOrcaConstants.FILTER_ID))){var s=i.getListByKey(f.OcOrcaConstants.MEMBERS);if(f.notNull(s)){var q=d.putNewList(f.OcQuasarConstants.MEMBERS);q.addAll(s);}}}}}p.add(d);}};f.OcQuasarStory.prototype.applyGlobalObjects=function(s,p){var i;var g=s.putNewStructure(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS);var m=g.putNewList(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_PAGE_FILTERS);m.addAll(p);var a=g.putNewList(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_STORY_FILTERS);var b=this.m_story.getStoryFilters();for(i=0;i<b.size();i++){a.add(b.getStructureAt(i));}var c=g.putNewList(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATIONS);var k;var d=this.m_story.getCalculations().getCalculations();k=f.OcQuasarStory.getSortedKeys(d.getKeysAsReadOnlyListOfString());for(i=0;i<k.size();i++){var e=c.addNewStructure();var h=d.getByKey(k.get(i));e.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_ID,h.getId());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,h.getName());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMATING_INFO,h.getFormatting());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TYPE,h.getCalculationType());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_MEASURE_ID,h.getMeasureId());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_REFERENCE_MEASURE_ID,h.getReferenceMeasureId());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTIONS,h.getSelections());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_FORMULA,h.getFormula());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE,h.getStartDate());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE,h.getEndDate());e.putBoolean(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_START_DATE_IF_NULL,h.isStartDateCurrentIfNull());e.putBoolean(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_END_DATE_IF_NULL,h.isEndDateCurrentIfNull());e.putBoolean(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUES_NOT_IN,h.isValuesNotIn());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION,h.getAggregation());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_AGGREGATION_DIMENSIONS,h.getAggregationDimensions());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION,h.getExceptionAggregation());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_EXCEPTION_AGGREGATION_DIMENSIONS,h.getExceptionAggregationDimensions());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_GROUP_THRESHOLDS,h.getGroupThresholds());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_RESULT_GRANULARITY,h.getResultGranularity());e.putInteger(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TIME_ZONE_OFFSET_FOR_CURRENT_DATE,h.getTimezoneOffsetForCurrentDate());e.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_SELECTED_DIMENSION_ID,h.getSelectedDimensionId());e.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VALUE_TYPE,h.getValueType());e.putBoolean(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_TO_TEXT,h.isToText());}var j=g.putNewList(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_CALCULATION_VARIABLES);var l=this.m_story.getCalculationVariables().getCalculationVariables();k=f.OcQuasarStory.getSortedKeys(l.getKeysAsReadOnlyListOfString());for(i=0;i<k.size();i++){var n=l.getByKey(k.get(i));var o=j.addNewStructure();o.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_ID,n.getId());o.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_NAME,n.getName());o.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_CALCULATION_VARIABLE_SELECTION_INFOS,n.getSelectionInfos());}var q=g.putNewList(f.OcQuasarConstants.QUASAR_GLOBAL_OBJECTS_FIELD_SELECTIONS);var r=this.m_story.getFieldSelections().getFieldSelections();k=f.OcQuasarStory.getSortedKeys(r.getKeysAsReadOnlyListOfString());for(i=0;i<k.size();i++){var t=r.getByKey(k.get(i));var u=q.addNewStructure();u.putString(f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ID,t.getId());u.putStringNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_NAME,t.getName());u.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_INFOS,t.getSelectionInfos());u.putNotNullAndNotEmpty(f.OcOrcaConstants.MODIFIED_VIZ_DEF_FIELD_SELECTION_ENTITY_IDS,t.getEntityIds());}};f.OcQuasarStory.prototype.processQuasarWidgetDocument=function(w){var a=this.m_story.getPageManager().getWidgetByWidgetId(w);if(f.isNull(a)){return null;}var o=this.createQuasarOptions();o.setUseSingleWidgetLayout(true);return f.OcQuasarStoryConverter.convertWidget(a,o);};f.OcQuasarStory.prototype.createQuasarOptions=function(){var o=f.OcQuasarOptions.create(this.getContext());if(f.notNull(this.m_mainLayoutType)){o.setMainLayoutType(this.m_mainLayoutType);}if(f.notNull(this.m_chartType)){o.setChartType(this.m_chartType);}return o;};f.OcQuasarStory.prototype.getContext=function(){return this.m_story.getContext();};f.OcQuasarStory.prototype.getQuasarMainLayoutType=function(){return this.m_mainLayoutType;};f.OcQuasarStory.prototype.setQuasarMainLayoutType=function(l){this.m_mainLayoutType=l;};f.OcQuasarStory.prototype.getQuasarChartType=function(){return this.m_chartType;};f.OcQuasarStory.prototype.setQuasarChartType=function(c){this.m_chartType=c;};f.OcQuasarStory.prototype.releaseObject=function(){this.m_story=f.XObjectExt.release(this.m_story);f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcQuasarStoryPage=function(){};f.OcQuasarStoryPage.prototype=new f.DfIdNameObject();f.OcQuasarStoryPage.prototype._ff_c="OcQuasarStoryPage";f.OcQuasarStoryPage.create=function(p,a,b){var c=new f.OcQuasarStoryPage();c.setupPageInfo(p,a,b);return c;};f.OcQuasarStoryPage.prototype.m_pageContent=null;f.OcQuasarStoryPage.prototype.setupPageInfo=function(p,a,b){f.DfIdNameObject.prototype.setupExt.call(this,p,a);this.m_pageContent=b;};f.OcQuasarStoryPage.prototype.getPageContent=function(){return this.m_pageContent;};f.OcQuasarStoryPage.prototype.releaseObject=function(){this.m_pageContent=f.XObjectExt.release(this.m_pageContent);f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcChartType=function(){};f.OcChartType.prototype=new f.XConstant();f.OcChartType.prototype._ff_c="OcChartType";f.OcChartType.HIGHCHARTS=null;f.OcChartType.MICRO_CHART=null;f.OcChartType.s_lookup=null;f.OcChartType.staticSetup=function(){f.OcChartType.s_lookup=f.XHashMapByString.create();f.OcChartType.HIGHCHARTS=f.OcChartType.createChartType("Highcharts","Chart");f.OcChartType.MICRO_CHART=f.OcChartType.createChartType("MicroChart","MicroChart");};f.OcChartType.createChartType=function(n,q){var c=new f.OcChartType();c._setupInternal(n);c.m_quasarName=q;f.OcChartType.s_lookup.put(n,c);f.OcChartType.s_lookup.put(f.XString.toLowerCase(n),c);f.OcChartType.s_lookup.put(f.XString.toUpperCase(n),c);return c;};f.OcChartType.lookup=function(v){return f.OcChartType.s_lookup.getByKey(v);};f.OcChartType.prototype.m_quasarName=null;f.OcChartType.prototype.getQuasarName=function(){return this.m_quasarName;};f.OcLayoutType=function(){};f.OcLayoutType.prototype=new f.XConstant();f.OcLayoutType.prototype._ff_c="OcLayoutType";f.OcLayoutType.CANVAS=null;f.OcLayoutType.FLOW=null;f.OcLayoutType.FLOW_SIMPLE=null;f.OcLayoutType.s_typesByName=null;f.OcLayoutType.s_typesByCode=null;f.OcLayoutType.staticSetup=function(){f.OcLayoutType.s_typesByName=f.XHashMapByString.create();f.OcLayoutType.s_typesByCode=f.XHashMapByString.create();f.OcLayoutType.CANVAS=f.OcLayoutType.create("CanvasLayout",1);f.OcLayoutType.FLOW=f.OcLayoutType.create("FlowLayout",2);f.OcLayoutType.FLOW_SIMPLE=f.OcLayoutType.create("FlowSimpleLayout",3);};f.OcLayoutType.create=function(n,c){var l=new f.OcLayoutType();l._setupInternal(n);f.OcLayoutType.s_typesByName.put(n,l);l.m_code=c;f.OcLayoutType.s_typesByCode.put(f.XInteger.convertToString(c),l);return l;};f.OcLayoutType.getByCode=function(c){return f.OcLayoutType.s_typesByCode.getByKey(f.XInteger.convertToString(c));};f.OcLayoutType.getByName=function(n){return f.OcLayoutType.s_typesByName.getByKey(n);};f.OcLayoutType.prototype.m_code=0;f.OcLayoutType.prototype.getCode=function(){return this.m_code;};f.OcCalculation=function(){};f.OcCalculation.prototype=new f.DfIdNameObject();f.OcCalculation.prototype._ff_c="OcCalculation";f.OcCalculation.create=function(c,a,b){var d=new f.OcCalculation();d.setupCalculation(c,a,b);return d;};f.OcCalculation.prototype.m_calculationType=null;f.OcCalculation.prototype.m_formatting=null;f.OcCalculation.prototype.m_measureId=null;f.OcCalculation.prototype.m_referenceMeasureId=null;f.OcCalculation.prototype.m_selections=null;f.OcCalculation.prototype.m_formula=null;f.OcCalculation.prototype.m_aggregation=null;f.OcCalculation.prototype.m_aggregationDimensions=null;f.OcCalculation.prototype.m_exceptionAggregation=null;f.OcCalculation.prototype.m_exceptionAggregationDimensions=null;f.OcCalculation.prototype.m_valuesNotIn=false;f.OcCalculation.prototype.m_resultGranularity=null;f.OcCalculation.prototype.m_startDate=null;f.OcCalculation.prototype.m_endDate=null;f.OcCalculation.prototype.m_startDateCurrentIfNull=false;f.OcCalculation.prototype.m_endDateCurrentIfNull=false;f.OcCalculation.prototype.m_timezoneOffsetForCurrentDate=0;f.OcCalculation.prototype.m_selectedDimensionId=null;f.OcCalculation.prototype.m_valueType=null;f.OcCalculation.prototype.m_groupThresholds=null;f.OcCalculation.prototype.m_toText=false;f.OcCalculation.prototype.getSelectedDimensionId=function(){return this.m_selectedDimensionId;};f.OcCalculation.prototype.setSelectedDimensionId=function(s){this.m_selectedDimensionId=s;};f.OcCalculation.prototype.getValueType=function(){return this.m_valueType;};f.OcCalculation.prototype.setValueType=function(v){this.m_valueType=v;};f.OcCalculation.prototype.getGroupThresholds=function(){return this.m_groupThresholds;};f.OcCalculation.prototype.setGroupThresholds=function(g){this.m_groupThresholds=g;};f.OcCalculation.prototype.isToText=function(){return this.m_toText;};f.OcCalculation.prototype.setToText=function(t){this.m_toText=t;};f.OcCalculation.prototype.getAggregation=function(){return this.m_aggregation;};f.OcCalculation.prototype.setAggregation=function(a){this.m_aggregation=a;};f.OcCalculation.prototype.getAggregationDimensions=function(){return this.m_aggregationDimensions;};f.OcCalculation.prototype.setAggregationDimensions=function(a){this.m_aggregationDimensions=a;};f.OcCalculation.prototype.getExceptionAggregation=function(){return this.m_exceptionAggregation;};f.OcCalculation.prototype.setExceptionAggregation=function(e){this.m_exceptionAggregation=e;};f.OcCalculation.prototype.getExceptionAggregationDimensions=function(){return this.m_exceptionAggregationDimensions;};f.OcCalculation.prototype.setExceptionAggregationDimensions=function(e){this.m_exceptionAggregationDimensions=e;};f.OcCalculation.prototype.isValuesNotIn=function(){return this.m_valuesNotIn;};f.OcCalculation.prototype.setValuesNotIn=function(v){this.m_valuesNotIn=v;};f.OcCalculation.prototype.getResultGranularity=function(){return this.m_resultGranularity;};f.OcCalculation.prototype.setResultGranularity=function(r){this.m_resultGranularity=r;};f.OcCalculation.prototype.getStartDate=function(){return this.m_startDate;};f.OcCalculation.prototype.setStartDate=function(s){this.m_startDate=s;};f.OcCalculation.prototype.getEndDate=function(){return this.m_endDate;};f.OcCalculation.prototype.setEndDate=function(e){this.m_endDate=e;};f.OcCalculation.prototype.isStartDateCurrentIfNull=function(){return this.m_startDateCurrentIfNull;};f.OcCalculation.prototype.setStartDateCurrentIfNull=function(s){this.m_startDateCurrentIfNull=s;};f.OcCalculation.prototype.isEndDateCurrentIfNull=function(){return this.m_endDateCurrentIfNull;};f.OcCalculation.prototype.setEndDateCurrentIfNull=function(e){this.m_endDateCurrentIfNull=e;};f.OcCalculation.prototype.getTimezoneOffsetForCurrentDate=function(){return this.m_timezoneOffsetForCurrentDate;};f.OcCalculation.prototype.setTimezoneOffsetForCurrentDate=function(t){this.m_timezoneOffsetForCurrentDate=t;};f.OcCalculation.prototype.setupCalculation=function(c,a,b){f.DfIdNameObject.prototype.setupExt.call(this,c,a);this.m_calculationType=b;};f.OcCalculation.prototype.getCalculationType=function(){return this.m_calculationType;};f.OcCalculation.prototype.getFormatting=function(){return this.m_formatting;};f.OcCalculation.prototype.setFormatting=function(a){this.m_formatting=a;};f.OcCalculation.prototype.getMeasureId=function(){return this.m_measureId;};f.OcCalculation.prototype.getReferenceMeasureId=function(){return this.m_referenceMeasureId;};f.OcCalculation.prototype.setMeasureId=function(m){this.m_measureId=m;};f.OcCalculation.prototype.setReferenceMeasureId=function(r){this.m_referenceMeasureId=r;};f.OcCalculation.prototype.getSelections=function(){return this.m_selections;};f.OcCalculation.prototype.setSelections=function(s){this.m_selections=s;};f.OcCalculation.prototype.getFormula=function(){return this.m_formula;};f.OcCalculation.prototype.setFormula=function(a){this.m_formula=a;};f.OcCalculation.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Calculation: ").append(this.getId());s.appendNewLine().append(" Name = ").append(this.getName());s.appendNewLine().append(" Type = ").append(this.getCalculationType());return s.toString();};f.OcCalculation.prototype.releaseObject=function(){this.m_calculationType=null;this.m_formatting=null;this.m_measureId=null;this.m_selections=null;this.m_formula=null;f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcCalculationVariable=function(){};f.OcCalculationVariable.prototype=new f.DfIdNameObject();f.OcCalculationVariable.prototype._ff_c="OcCalculationVariable";f.OcCalculationVariable.create=function(c,a,b,d){var e=new f.OcCalculationVariable();e.setupCalculationVariable(c,a,b,d);return e;};f.OcCalculationVariable.prototype.m_calculationVariableType=null;f.OcCalculationVariable.prototype.m_calculationVariableValueType=null;f.OcCalculationVariable.prototype.m_selectionInfos=null;f.OcCalculationVariable.prototype.setupCalculationVariable=function(c,a,b,d){f.DfIdNameObject.prototype.setupExt.call(this,c,a);this.m_calculationVariableType=b;this.m_calculationVariableValueType=d;};f.OcCalculationVariable.prototype.getCalculationVariableType=function(){return this.m_calculationVariableType;};f.OcCalculationVariable.prototype.getCalculationVariableValueType=function(){return this.m_calculationVariableValueType;};f.OcCalculationVariable.prototype.getSelectionInfos=function(){return this.m_selectionInfos;};f.OcCalculationVariable.prototype.setSelectionInfos=function(s){this.m_selectionInfos=s;};f.OcCalculationVariable.prototype.releaseObject=function(){this.m_selectionInfos=null;f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcFieldSelection=function(){};f.OcFieldSelection.prototype=new f.DfIdNameObject();f.OcFieldSelection.prototype._ff_c="OcFieldSelection";f.OcFieldSelection.create=function(a,b,c){var d=new f.OcFieldSelection();d.setupFieldSelection(a,b,c);return d;};f.OcFieldSelection.prototype.m_fieldSelectionType=null;f.OcFieldSelection.prototype.m_selectionInfos=null;f.OcFieldSelection.prototype.m_entityIds=null;f.OcFieldSelection.prototype.setupFieldSelection=function(a,b,c){f.DfIdNameObject.prototype.setupExt.call(this,a,b);this.m_fieldSelectionType=c;};f.OcFieldSelection.prototype.getFieldSelectionType=function(){return this.m_fieldSelectionType;};f.OcFieldSelection.prototype.getSelectionInfos=function(){return this.m_selectionInfos;};f.OcFieldSelection.prototype.getEntityIds=function(){return this.m_entityIds;};f.OcFieldSelection.prototype.setSelectionInfos=function(s){this.m_selectionInfos=s;};f.OcFieldSelection.prototype.setEntityIds=function(e){this.m_entityIds=e;};f.OcFieldSelection.prototype.releaseObject=function(){this.m_entityIds=null;this.m_selectionInfos=null;f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcPage=function(){};f.OcPage.prototype=new f.DfIdNameObject();f.OcPage.prototype._ff_c="OcPage";f.OcPage.prototype.m_normalizedName=null;f.OcPage.prototype.m_backgroundColor=null;f.OcPage.prototype.m_isResponsive=null;f.OcPage.prototype.m_pageFilters=null;f.OcPage.prototype.m_pageGroups=null;f.OcPage.prototype.m_widgetManager=null;f.OcPage.prototype.m_story=null;f.OcPage.prototype.setupPage=function(p,a,s){f.DfIdNameObject.prototype.setupExt.call(this,p,a);this.m_story=s;};f.OcPage.prototype.getNormalizedName=function(){if(f.isNull(this.m_normalizedName)){this.m_normalizedName=f.OcStoryUtils.normalizeString(this.getName());}return this.m_normalizedName;};f.OcPage.prototype.getBackgroundColor=function(){if(f.isNull(this.m_backgroundColor)){this.m_backgroundColor=f.OcStoryUtils.getValueOrEmptyString(this.processBackgroundColor());}return this.m_backgroundColor;};f.OcPage.prototype.isResponsive=function(){if(f.isNull(this.m_isResponsive)){this.m_isResponsive=f.TriStateBool.lookup(this.processIsResponsive());}return this.m_isResponsive.getBoolean();};f.OcPage.prototype.getPageFilters=function(){if(f.isNull(this.m_pageFilters)){this.m_pageFilters=this.processPageFilters();if(f.isNull(this.m_pageFilters)){this.m_pageFilters=f.PrFactory.createList();}}return this.m_pageFilters;};f.OcPage.prototype.getPageGroups=function(){if(f.isNull(this.m_pageGroups)){this.m_pageGroups=this.processPageGroups();if(f.isNull(this.m_pageGroups)){this.m_pageGroups=f.PrFactory.createList();}}return this.m_pageGroups;};f.OcPage.prototype.getWidgetManager=function(){if(f.isNull(this.m_widgetManager)){this.m_widgetManager=f.OcWidgetManager.create(this,this.getContext());}return this.m_widgetManager;};f.OcPage.prototype.getStory=function(){return this.m_story;};f.OcPage.prototype.getContext=function(){return this.getStory().getContext();};f.OcPage.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_backgroundColor=null;this.m_story=null;this.m_isResponsive=f.XObjectExt.release(this.m_isResponsive);this.m_widgetManager=f.XObjectExt.release(this.m_widgetManager);f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcWidgetType=function(){};f.OcWidgetType.prototype=new f.XConstant();f.OcWidgetType.prototype._ff_c="OcWidgetType";f.OcWidgetType.CHART=null;f.OcWidgetType.ANALYTICAL_CARD=null;f.OcWidgetType.KPI=null;f.OcWidgetType.GRID=null;f.OcWidgetType.TEXT=null;f.OcWidgetType.PICTOGRAM=null;f.OcWidgetType.IMAGE=null;f.OcWidgetType.PAGE_FILTER=null;f.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=null;f.OcWidgetType.CALCULATION_INPUT_CONTROL=null;f.OcWidgetType.UNKNOWN=null;f.OcWidgetType.staticSetup=function(){f.OcWidgetType.CHART=f.OcWidgetType.createWidgetType("Chart","Chart",true);f.OcWidgetType.ANALYTICAL_CARD=f.OcWidgetType.createWidgetType("AnalyticalCard","AnalyticalCard",true);f.OcWidgetType.KPI=f.OcWidgetType.createWidgetType("Card","Card",true);f.OcWidgetType.GRID=f.OcWidgetType.createWidgetType("Grid","VizGrid",true);f.OcWidgetType.TEXT=f.OcWidgetType.createWidgetType("Text","Html",false);f.OcWidgetType.PICTOGRAM=f.OcWidgetType.createWidgetType("Pictogram","Pictogram",false);f.OcWidgetType.PAGE_FILTER=f.OcWidgetType.createWidgetType("PageFilter","PageFilter",false);f.OcWidgetType.FIELD_SELECTION_INPUT_CONTROL=f.OcWidgetType.createWidgetType("FieldSelectionInputControl","FieldSelectionInputControl",false);f.OcWidgetType.CALCULATION_INPUT_CONTROL=f.OcWidgetType.createWidgetType("CalculationInputControl","CalculationInputControl",false);f.OcWidgetType.IMAGE=f.OcWidgetType.createWidgetType("Image","Image",false);f.OcWidgetType.UNKNOWN=f.OcWidgetType.createWidgetType("Unknown","Text",false);};f.OcWidgetType.createWidgetType=function(n,q,h){var w=new f.OcWidgetType();w._setupInternal(n);w.m_quasarName=q;w.m_hasDataProvider=h;return w;};f.OcWidgetType.prototype.m_quasarName=null;f.OcWidgetType.prototype.m_hasDataProvider=false;f.OcWidgetType.prototype.hasDataProvider=function(){return this.m_hasDataProvider;};f.OcWidgetType.prototype.getQuasarName=function(){return this.m_quasarName;};f.OcStory=function(){};f.OcStory.prototype=new f.DfIdNameObject();f.OcStory.prototype._ff_c="OcStory";f.OcStory.prototype.m_context=null;f.OcStory.prototype.m_normalizedName=null;f.OcStory.prototype.m_description=null;f.OcStory.prototype.m_createdBy=null;f.OcStory.prototype.m_createdTime=null;f.OcStory.prototype.m_modifiedTime=null;f.OcStory.prototype.m_modifiedBy=null;f.OcStory.prototype.m_colorSync=null;f.OcStory.prototype.m_storyFilters=null;f.OcStory.prototype.m_measureSyncs=null;f.OcStory.prototype.m_datasets=null;f.OcStory.prototype.m_calculations=null;f.OcStory.prototype.m_fieldSelections=null;f.OcStory.prototype.m_calculationVariables=null;f.OcStory.prototype.m_thresholds=null;f.OcStory.prototype.m_images=null;f.OcStory.prototype.m_pageManager=null;f.OcStory.prototype.m_updateCounter=null;f.OcStory.prototype.getStoryFilters=function(){if(f.isNull(this.m_storyFilters)){this.m_storyFilters=this.processStoryFilters();if(f.isNull(this.m_storyFilters)){this.m_storyFilters=f.PrFactory.createList();}}return this.m_storyFilters;};f.OcStory.prototype.setupStory=function(s,a,c){this.setupExt(s,a);this.m_context=c;if(f.XStringUtils.isNullOrEmpty(s)||f.XStringUtils.isNullOrEmpty(a)){var m=f.OcMessage.newInvalidStoryNameError();this.getContext().getMessageManager().addMessage(m);throw f.XException.createIllegalArgumentException(m.getText());}};f.OcStory.prototype.getContext=function(){return this.m_context;};f.OcStory.prototype.getNormalizedName=function(){if(f.isNull(this.m_normalizedName)){this.m_normalizedName=f.OcStoryUtils.normalizeString(this.getName());}return this.m_normalizedName;};f.OcStory.prototype.getDescription=function(){if(f.isNull(this.m_description)){this.m_description=f.OcStoryUtils.getValueOrEmptyString(this.processDescription());}return this.m_description;};f.OcStory.prototype.getCreatedBy=function(){if(f.isNull(this.m_createdBy)){this.m_createdBy=f.OcStoryUtils.getValueOrEmptyString(this.processCreatedBy());}return this.m_createdBy;};f.OcStory.prototype.getCreateTime=function(){if(f.isNull(this.m_createdTime)){this.m_createdTime=f.OcStoryUtils.getValueOrEmptyString(this.processCreateTime());}return this.m_createdTime;};f.OcStory.prototype.getModifiedBy=function(){if(f.isNull(this.m_modifiedBy)){this.m_modifiedBy=f.OcStoryUtils.getValueOrEmptyString(this.processModifiedBy());}return this.m_modifiedBy;};f.OcStory.prototype.getModifiedTime=function(){if(f.isNull(this.m_modifiedTime)){this.m_modifiedTime=f.OcStoryUtils.getValueOrEmptyString(this.processModifiedTime());}return this.m_modifiedTime;};f.OcStory.prototype.getPublicUrl=function(){var o=this.getContext().getConnection().getOrcaPublicUrl();if(f.isNull(o)){o=this.getContext().getConnection().getSystemUri();}return f.XStringUtils.concatenate3(o,"/sap/fpa/ui/app.html#;view_id=story;storyId=",this.getId());};f.OcStory.prototype.getUpdateCounter=function(){if(f.isNull(this.m_updateCounter)){this.m_updateCounter=f.XIntegerValue.create(this.processUpdateCounter());}return this.m_updateCounter.getInteger();};f.OcStory.prototype.getColorSyncs=function(){if(f.isNull(this.m_colorSync)){this.m_colorSync=this.processColorSyncs();if(f.isNull(this.m_colorSync)){this.m_colorSync=f.PrFactory.createStructure();}}return this.m_colorSync;};f.OcStory.prototype.getMeasureSyncs=function(){if(f.isNull(this.m_measureSyncs)){this.m_measureSyncs=this.getStoryEntityFactory().createMeasurySyncs();}return this.m_measureSyncs;};f.OcStory.prototype.getThresholds=function(){if(f.isNull(this.m_thresholds)){this.m_thresholds=this.getStoryEntityFactory().createThresholds();}return this.m_thresholds;};f.OcStory.prototype.getCalculations=function(){if(f.isNull(this.m_calculations)){this.m_calculations=this.getStoryEntityFactory().createCalculations();}return this.m_calculations;};f.OcStory.prototype.getFieldSelections=function(){if(f.isNull(this.m_fieldSelections)){this.m_fieldSelections=this.getStoryEntityFactory().createFieldSelections();}return this.m_fieldSelections;};f.OcStory.prototype.getCalculationVariables=function(){if(f.isNull(this.m_calculationVariables)){this.m_calculationVariables=this.getStoryEntityFactory().createCalculationVariables();}return this.m_calculationVariables;};f.OcStory.prototype.getDatasets=function(){if(f.isNull(this.m_datasets)){this.m_datasets=this.getStoryEntityFactory().createDatasets();}return this.m_datasets;};f.OcStory.prototype.getImages=function(){if(f.isNull(this.m_images)){this.m_images=this.getStoryEntityFactory().createImages(this.getId());}return this.m_images;};f.OcStory.prototype.getPageManager=function(){if(f.isNull(this.m_pageManager)){this.m_pageManager=f.OcPageManager.create(this,this.getContext());}return this.m_pageManager;};f.OcStory.prototype.getStoryEntityFactory=function(){return this.getContext().getStoryEntityFactory();};f.OcStory.prototype.toString=function(){var s=f.XStringBuffer.create();s.append("Story: ").append(this.getId()).append(" \"").append(this.getName()).append("\"");s.appendNewLine().append(this.getPageManager().toString());return s.toString();};f.OcStory.prototype.releaseObject=function(){this.m_normalizedName=null;this.m_description=null;this.m_createdBy=null;this.m_createdTime=null;this.m_modifiedTime=null;this.m_modifiedBy=null;this.m_colorSync=null;this.m_datasets=f.XObjectExt.release(this.m_datasets);this.m_measureSyncs=f.XObjectExt.release(this.m_measureSyncs);this.m_calculations=f.XObjectExt.release(this.m_calculations);this.m_fieldSelections=f.XObjectExt.release(this.m_fieldSelections);this.m_thresholds=f.XObjectExt.release(this.m_thresholds);this.m_images=f.XObjectExt.release(this.m_images);this.m_pageManager=f.XObjectExt.release(this.m_pageManager);f.DfIdNameObject.prototype.releaseObject.call(this);};f.OcStoryCatalogLoadAction=function(){};f.OcStoryCatalogLoadAction.prototype=new f.SyncAction();f.OcStoryCatalogLoadAction.prototype._ff_c="OcStoryCatalogLoadAction";f.OcStoryCatalogLoadAction.create=function(o,c){var a=new f.OcStoryCatalogLoadAction();a.setupLoadAction(o,c);return a;};f.OcStoryCatalogLoadAction.prototype.m_options=null;f.OcStoryCatalogLoadAction.prototype.setupLoadAction=function(o,c){if(f.isNull(o)){this.setOptions(new f.OcStoryCatalogLoadOptions());}else{this.setOptions(o);}this.setupAction(null,null,null,c);};f.OcStoryCatalogLoadAction.prototype.processSynchronization=function(s){var c=this.getActionContext().getConnection();var o=c.newRpcFunction(this.getPath());var r=o.getRpcRequest();r.setRequestStructure(this.getQuery());r.setMethod(f.HttpRequestMethod.HTTP_POST);o.processFunctionExecution(s,this,null);return true;};f.OcStoryCatalogLoadAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()){this.setData(new f.OcStoryCatalogParser().getStoryCatalog(r.getRootElementGeneric()));}this.endSync();};f.OcStoryCatalogLoadAction.prototype.callListener=function(e,l,d,c){l.onStoryCatalogLoaded(e,d,c);};f.OcStoryCatalogLoadAction.prototype.getPath=function(){return"/sap/fpa/services/rest/epm/contentlib";};f.OcStoryCatalogLoadAction.prototype.getQuery=function(){var c=this.getOptions().getCatalogType();if(c===f.OcStoryCatalogType.FAVORITE){return this.getQueryForFavoriteStories();}else if(c===f.OcStoryCatalogType.PRIVATE){return this.getQueryForPrivateStories();}else{return this.getQueryForAllStories();}};f.OcStoryCatalogLoadAction.prototype.getQueryForAllStories=function(){var q=f.PrFactory.createStructure();q.putString("action","getSearchList");var d=q.putNewStructure("data");d.putString("type","STORY");d.putString("value","*");d.putNewList("ownerType");d.putInteger("recentlyAccessed",this.getOptions().getNumberOfRecentlyAccessedStories());return q;};f.OcStoryCatalogLoadAction.prototype.getQueryForFavoriteStories=function(){var q=f.PrFactory.createStructure();q.putString("action","getAncestorAndSubNodes");var d=q.putNewStructure("data");d.putString("resourceId",f.XStringUtils.concatenate2("FAVORITES_",this.getOrcaUserName()));d.putBoolean("detail",false);d.putNewList("filter");d.putBoolean("bIncTemporary",true);d.putBoolean("allowAuthOverride",false);return q;};f.OcStoryCatalogLoadAction.prototype.getQueryForPrivateStories=function(){var q=f.PrFactory.createStructure();q.putString("action","getRepoView");var d=q.putNewStructure("data");d.putString("resourceId",f.XStringUtils.concatenate2("PRIVATE_",this.getOrcaUserName()));d.putBoolean("detail",false);d.putNewList("filter");d.putBoolean("bIncTemporary",true);d.putBoolean("allowAuthOverride",false);d.putBoolean("fetchAncestorNodes",true);d.putBoolean("showContentSharedWithUser",true);return q;};f.OcStoryCatalogLoadAction.prototype.getOrcaUserName=function(){return f.XString.toUpperCase(this.getActionContext().getConnection().getPersonalization().getInternalUser());};f.OcStoryCatalogLoadAction.prototype.getOptions=function(){return this.m_options;};f.OcStoryCatalogLoadAction.prototype.setOptions=function(o){this.m_options=o;};f.OcStoryCatalogLoadAction.prototype.releaseObject=function(){f.XObjectExt.release(this.m_options);f.SyncAction.prototype.releaseObject.call(this);};f.OcStoryLoadAction=function(){};f.OcStoryLoadAction.prototype=new f.SyncAction();f.OcStoryLoadAction.prototype._ff_c="OcStoryLoadAction";f.OcStoryLoadAction.createAndRun=function(s,l,c,a,b){var d=new f.OcStoryLoadAction();d.m_storyId=b;d.setupActionAndRun(s,l,c,a);return d;};f.OcStoryLoadAction.prototype.m_storyId=null;f.OcStoryLoadAction.prototype.m_story=null;f.OcStoryLoadAction.prototype.processSynchronization=function(s){var u=f.XUri.createFromUrl("/sap/fpa/services/rest/epm/contentlib");var c=this.getActionContext().getConnection();var o=c.newRpcFunctionByUri(u);var r=o.getRpcRequest();r.setRequestStructure(this.getQuery());o.processFunctionExecution(s,this,null);return true;};f.OcStoryLoadAction.prototype.getQuery=function(){var q=f.PrFactory.createStructure();q.putString("action","getContent");var d=q.putNewStructure("data");d.putString("resourceId",this.m_storyId);d.putBoolean("bIncDependency",false);return q;};f.OcStoryLoadAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()){var s=r.getRootElement();if(f.isNull(s)){this.addError(0,"No story returned");this.endSync();}else{var a=f.OcConnection.createByConnection(this.getActionContext().getServiceConfig().getConnectionContainer());this.m_story=f.OcOrcaStory.create(f.OcOrcaContext.create(s,this.getSession(),a));this.getActionContext().processCubeMetadataLoad(this.getActiveSyncType(),this,null,this.m_story.getDatasets().getCubeNames());}}else{this.endSync();}};f.OcStoryLoadAction.prototype.callListener=function(e,l,d,c){l.onStoryLoaded(e,d,c);};f.OcStoryLoadAction.prototype.onCubeMetadataLoaded=function(e,c,a){var d=this.m_story.getDatasets();d.updateDatasetsWithCubesMetdata(c);var b=d.getDatasetsAsReadOnlyList();var s=null;var i=false;for(var g=0;g<b.size();g++){var o=b.get(g);if(f.isNull(s)){s=o.getSystemName();i=this.requestToken(s);}else if(!f.XString.isEqual(s,o.getSystemName())){s=o.getSystemName();i=this.requestToken(s);}}if(!i){this.setData(this.m_story);this.endSync();}};f.OcStoryLoadAction.prototype.requestToken=function(s){var c=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(s);var a=c.getSystemDescription();var p=a.getProperties();var i=p.getStringByKey(f.OcOrcaConstants.STORY_IS_LIVE_INTEGRATION_TYPE);if(f.notNull(i)){var b=a.getAuthenticationToken();if(f.isNull(b)){this.getActionContext().processBearerTokenLoad(this.getActiveSyncType(),this,null,s);return true;}}return false;};f.OcStoryLoadAction.prototype.releaseObject=function(){this.m_storyId=null;this.m_story=f.XObjectExt.release(this.m_story);f.SyncAction.prototype.releaseObject.call(this);};f.OcStoryLoadAction.prototype.onBearerTokenLoaded=function(e,t,c){this.setData(this.m_story);this.endSync();};f.OcCubeMetadataLoadAction=function(){};f.OcCubeMetadataLoadAction.prototype=new f.SyncAction();f.OcCubeMetadataLoadAction.prototype._ff_c="OcCubeMetadataLoadAction";f.OcCubeMetadataLoadAction.createAndRun=function(s,l,c,a,b){var d=new f.OcCubeMetadataLoadAction();d.m_cubeNames=b;d.setupActionAndRun(s,l,c,a);return d;};f.OcCubeMetadataLoadAction.prototype.m_cubeNames=null;f.OcCubeMetadataLoadAction.prototype.processSynchronization=function(s){var u=f.XUri.createFromUrl("/sap/fpa/services/rest/epm/objectmgr");var c=this.getActionContext().getConnection();var o=c.newRpcFunctionByUri(u);var r=o.getRpcRequest();r.setRequestStructure(this.getQuery());o.processFunctionExecution(s,this,null);return true;};f.OcCubeMetadataLoadAction.prototype.getQuery=function(){var q=f.PrFactory.createStructure();q.putString("action","readObjects");var d=q.putNewStructure("data");var p=d.putNewList("p1");var c=this.m_cubeNames;for(var a=0;a<c.size();a++){var b=p.addNewStructure();b.putString("objectId",c.get(a));b.putBoolean("incDependency",false);b.putBoolean("incSubItems",false);var e=b.putNewStructure("extOpt");e.putBoolean("detail",true);e.putBoolean("visualization",true);e.putBoolean("rate",true);e.putBoolean("listFormula",true);e.putBoolean("listVersion",true);e.putBoolean("addMetadata",true);e.putBoolean("inclSubObjectTypes",true);}return q;};f.OcCubeMetadataLoadAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()){this.createCubesMetadata(r);}this.endSync();};f.OcCubeMetadataLoadAction.prototype.createCubesMetadata=function(r){var c=f.XSetOfNameObject.create();var a=r.getRootElementGeneric().asList();for(var i=0;i<a.size();i++){var b=a.getStructureAt(i);var d=b.getStructureByKey("data");if(f.notNull(d)){var e=f.OcOrcaCubeMetadata.create(d);c.add(e);}}this.setData(c);};f.OcCubeMetadataLoadAction.prototype.callListener=function(e,l,d,c){l.onCubeMetadataLoaded(e,d,c);};f.OcCubeMetadataLoadAction.prototype.releaseObject=function(){this.m_cubeNames=null;f.SyncAction.prototype.releaseObject.call(this);};f.OcBearerTokenLoadAction=function(){};f.OcBearerTokenLoadAction.prototype=new f.SyncAction();f.OcBearerTokenLoadAction.prototype._ff_c="OcBearerTokenLoadAction";f.OcBearerTokenLoadAction.createAndRun=function(s,l,c,a,b){var o=new f.OcBearerTokenLoadAction();o.m_systemName=b;o.setupActionAndRun(s,l,c,a);return o;};f.OcBearerTokenLoadAction.prototype.m_systemName=null;f.OcBearerTokenLoadAction.prototype.processSynchronization=function(s){var u=f.XUri.createFromUrl("/sap/fpa/services/rest/fpa/liveIntegrationConnectionManager?action=getToken");var c=this.getActionContext().getConnection();var o=c.newRpcFunctionByUri(u);var r=o.getRpcRequest();r.setRequestStructure(this.getQuery());o.processFunctionExecution(s,this,null);return true;};f.OcBearerTokenLoadAction.prototype.getQuery=function(){var q=f.PrFactory.createStructure();q.putStringNotNullAndNotEmpty("connectionName",this.m_systemName);return q;};f.OcBearerTokenLoadAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()){var a=r.getRootElement();if(f.isNull(a)){this.addError(0,f.XStringUtils.concatenate2("System not found ",this.m_systemName));}else{var b=a.getStringByKey("access_token");var t=a.getStringByKey("token_type");if(f.notNull(b)&&f.XString.isEqual(t,"Bearer")){var d=this.getActionContext().getServiceConfig().getConnectionContainer().getConnectionPool().getConnection(this.m_systemName);var s=d.getSystemDescription();s.setAuthenticationType(f.AuthenticationType.BEARER);s.setAuthenticationToken(f.XAuthenticationToken.create(b));this.setData(f.XStringValue.create(b));}}}this.endSync();};f.OcBearerTokenLoadAction.prototype.callListener=function(e,l,d,c){l.onBearerTokenLoaded(e,d,c);};f.OcSystemsLoadAction=function(){};f.OcSystemsLoadAction.prototype=new f.SyncAction();f.OcSystemsLoadAction.prototype._ff_c="OcSystemsLoadAction";f.OcSystemsLoadAction.createAndRun=function(s,l,c,a,b){var o=new f.OcSystemsLoadAction();o.m_loadingContext=b;o.setupActionAndRun(s,l,c,a);return o;};f.OcSystemsLoadAction.getPath=function(){return"/sap/fpa/services/connection/Systems.xsjs";};f.OcSystemsLoadAction.prototype.m_loadingContext=null;f.OcSystemsLoadAction.prototype.processSynchronization=function(s){var u=f.XUri.createFromUrl(f.OcSystemsLoadAction.getPath());u.addQueryElement("currentSystem",this.getCurrentSystemQueryPath());u.addQueryElement("timestamp",f.XLong.convertToString(f.XDateTime.createCurrentLocalDateTime().getMilliseconds()));u.addQueryElement("$expand","mapping");var c=this.getActionContext().getConnection();var o=c.newRpcFunctionByUri(u);var r=o.getRpcRequest();r.setMethod(f.HttpRequestMethod.HTTP_GET);o.processFunctionExecution(s,this,null);return true;};f.OcSystemsLoadAction.prototype.onFunctionExecuted=function(e,r,c){this.addAllMessages(e);if(e.isValid()){var a=r.getRootElement();if(f.isNull(a)){this.addError(0,"No catalog returned");}else{var s=f.OrcaSystemConverter.create().convert(this.getActionContext().getConnection(),a,this.m_loadingContext);this.setData(s);}}this.endSync();};f.OcSystemsLoadAction.prototype.getCurrentSystemQueryPath=function(){var s=this.getActionContext().getConnection().getSystemDescription();var b=f.XStringBuffer.create();b.append("{");b.append("\"NAME\":\"").append(s.getSystemName()).append("\",");b.append("\"SYSTEM_TYPE\":\"").append(s.getSystemType().getName()).append("\",");b.append("\"PROTOCOL\":\"").append(s.getProtocolType().getName()).append("\",");b.append("\"FPA_AUTHENTICATION_METHOD\":\"").append(f.XString.toUpperCase(s.getAuthenticationType().getName())).append("\",");b.append("\"HOST\":\"").append(s.getHost()).append("\",");b.append("\"PORT\":\"").appendInt(s.getPort()).append("\",");b.append("\"TIMEOUT\":\"").appendInt(0).append("\",");b.append("\"LANGUAGE\":\"").append(s.getLanguage()).append("\"}");return b.toString();};f.OcSystemsLoadAction.prototype.callListener=function(e,l,d,c){l.onSystemsLoaded(e,d,c);};f.OcSystemsLoadAction.prototype.onBearerTokenLoaded=function(e,t,c){};f.OcOrcaStory=function(){};f.OcOrcaStory.prototype=new f.OcStory();f.OcOrcaStory.prototype._ff_c="OcOrcaStory";f.OcOrcaStory.create=function(c){var s=new f.OcOrcaStory();s.setupOrcaStory(c);return s;};f.OcOrcaStory.prototype.m_orcaContext=null;f.OcOrcaStory.prototype.setupOrcaStory=function(c){this.m_orcaContext=c;var o=c.getStoryEntityHelper().getStoryAsJson();var s=o.getStringByKey(f.OcOrcaConstants.STORY_RESOURCE_ID);var a=o.getStringByKey(f.OcOrcaConstants.STORY_NAME);this.setupStory(s,a,c);};f.OcOrcaStory.prototype.processStoryFilters=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getListByKey(f.OcOrcaConstants.STORY_FILTERS);};f.OcOrcaStory.prototype.processDescription=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(f.OcOrcaConstants.STORY_DESCRIPTION);};f.OcOrcaStory.prototype.processCreatedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(f.OcOrcaConstants.STORY_CREATED_BY);};f.OcOrcaStory.prototype.processCreateTime=function(){return f.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(f.OcOrcaConstants.STORY_CREATED_TIME));};f.OcOrcaStory.prototype.processModifiedBy=function(){return this.getStoryEntityHelper().getStoryAsJson().getStringByKey(f.OcOrcaConstants.STORY_MODIFIED_BY);};f.OcOrcaStory.prototype.processModifiedTime=function(){return f.OcOrcaUtils.processTime(this.getStoryEntityHelper().getStoryAsJson().getStringByKey(f.OcOrcaConstants.STORY_MODIFIED_TIME));};f.OcOrcaStory.prototype.processUpdateCounter=function(){return f.OcStoryUtils.getIntegerFromStructureByName(this.getStoryEntityHelper().getStoryAsJson(),f.OcOrcaConstants.STORY_UPDATE_COUNTER);};f.OcOrcaStory.prototype.processColorSyncs=function(){return this.getStoryEntityHelper().getStoryEntityAsJson().getStructureByKey(f.OcOrcaConstants.STORY_COLOR_SYNC);};f.OcOrcaStory.prototype.getStoryEntityHelper=function(){return this.getOrcaContext().getStoryEntityHelper();};f.OcOrcaStory.prototype.getOrcaContext=function(){return this.m_orcaContext;};f.OcOrcaStory.prototype.releaseObject=function(){this.m_orcaContext=null;f.OcStory.prototype.releaseObject.call(this);};f.OcOrcaPage=function(){};f.OcOrcaPage.prototype=new f.OcPage();f.OcOrcaPage.prototype._ff_c="OcOrcaPage";f.OcOrcaPage.create=function(p,a,b,o){var c=new f.OcOrcaPage();c.setupOrcaPage(p,a,b,o);return c;};f.OcOrcaPage.prototype.m_pageJson=null;f.OcOrcaPage.prototype.m_orcaStory=null;f.OcOrcaPage.prototype.m_pageLayout=null;f.OcOrcaPage.prototype.setupOrcaPage=function(p,a,b,o){this.setupPage(p,a,o);this.m_pageJson=b;this.m_orcaStory=o;};f.OcOrcaPage.prototype.processPageFilters=function(){return f.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),f.OcOrcaConstants.PATH_FROM_PAGE_TO_FILTERS);};f.OcOrcaPage.prototype.processPageGroups=function(){return f.OcJsonPathEvaluator.getSingleJsonPathElementAsList(this.getPageJson(),f.OcOrcaConstants.PATH_FROM_PAGE_TO_GROUPS);};f.OcOrcaPage.prototype.processBackgroundColor=function(){return this.getPageLayout().processBackgroundColor();};f.OcOrcaPage.prototype.processIsResponsive=function(){return this.getPageLayout().processIsResponsive();};f.OcOrcaPage.prototype.getPageLayout=function(){if(f.isNull(this.m_pageLayout)){this.m_pageLayout=f.OcOrcaPageLayout.create(this.processPageLayoutJson());}return this.m_pageLayout;};f.OcOrcaPage.prototype.processPageLayoutJson=function(){var l=f.OcJsonPathEvaluator.getJsonPathElementsAsStructures(this.getPageJson(),f.OcOrcaConstants.PATH_FROM_PAGE_TO_PAGE_LAYOUT);if(f.XCollectionUtils.hasElements(l)){if(l.size()>1){this.handlePageLayoutError(l);}return l.get(0);}return f.PrFactory.createStructure();};f.OcOrcaPage.prototype.handlePageLayoutError=function(l){if(this.getContext().isTolerant()){var w=f.OcMessage.newPageWithMultipleLayouts(f.Severity.WARNING,this,l.size());this.getContext().getMessageManager().addMessage(w);}else{var e=f.OcMessage.newPageWithMultipleLayouts(f.Severity.ERROR,this,l.size());this.getContext().getMessageManager().addMessage(e);throw f.XException.createIllegalArgumentException(e.getText());}};f.OcOrcaPage.prototype.getOrcaStory=function(){return this.m_orcaStory;};f.OcOrcaPage.prototype.getOrcaContext=function(){return this.getOrcaStory().getOrcaContext();};f.OcOrcaPage.prototype.getPageJson=function(){return this.m_pageJson;};f.OcOrcaPage.prototype.releaseObject=function(){this.m_pageJson=null;this.m_orcaStory=null;this.m_pageLayout=f.XObjectExt.release(this.m_pageLayout);f.OcPage.prototype.releaseObject.call(this);};f.OcQStoryConvProgram=function(){};f.OcQStoryConvProgram.prototype=new f.DfApplicationProgram();f.OcQStoryConvProgram.prototype._ff_c="OcQStoryConvProgram";f.OcQStoryConvProgram.SYSTEM_NAME="system";f.OcQStoryConvProgram.STORY_ID="story";f.OcQStoryConvProgram.SAVE_PATH="path";f.OcQStoryConvProgram.SPLIT_PAGES="split";f.OcQStoryConvProgram.ANALYTIC_CARD="card";f.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD="compositCard";f.OcQStoryConvProgram.SPLIT_UQM="uqm";f.OcQStoryConvProgram.prototype.doSetupProgramMetadata=function(m){f.DfApplicationProgram.prototype.doSetupProgramMetadata.call(this,m);m.addOption(f.OcQStoryConvProgram.SYSTEM_NAME,"The system name","",f.XValueType.STRING);m.addOption(f.OcQStoryConvProgram.STORY_ID,"The story id name","",f.XValueType.STRING);m.addOption(f.OcQStoryConvProgram.SAVE_PATH,"The path where to save the story","",f.XValueType.STRING);m.addOption(f.OcQStoryConvProgram.SPLIT_PAGES,"Whether to split the story into pages ","",f.XValueType.BOOLEAN);m.addOption(f.OcQStoryConvProgram.SPLIT_UQM,"Whether to split the uqm from the pages ","",f.XValueType.BOOLEAN);m.addOption(f.OcQStoryConvProgram.ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story ","",f.XValueType.BOOLEAN);m.addOption(f.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,"Whether to extract an analytic card instead of a full story (separated widgets) ","",f.XValueType.BOOLEAN);};f.OcQStoryConvProgram.prototype.runProcess=function(){var s=this.getSession();var a=s.getStdlog();var b=this.getArgumentStructure().getStringByKey(f.OcQStoryConvProgram.SYSTEM_NAME);var c=this.getArgumentStructure().getStringByKey(f.OcQStoryConvProgram.STORY_ID);var d=this.getArgumentStructure().getStringByKey(f.OcQStoryConvProgram.SAVE_PATH);var e=this.getArgumentStructure().getBooleanByKeyExt(f.OcQStoryConvProgram.SPLIT_PAGES,false);var g=this.getArgumentStructure().getBooleanByKeyExt(f.OcQStoryConvProgram.SPLIT_UQM,false);var h=this.getArgumentStructure().getBooleanByKeyExt(f.OcQStoryConvProgram.ANALYTIC_CARD,false);var i=this.getArgumentStructure().getBooleanByKeyExt(f.OcQStoryConvProgram.COMPOSIT_ANALYTIC_CARD,false);if(f.isNull(b)||f.isNull(c)||f.isNull(d)){a.println("Argument(s) missing. You have to indicate a system name, a story id and a path where to store the story:");a.println("Argument structure:");a.println(f.XStringUtils.concatenate5(f.XStringUtils.concatenate5("\tstoryconverter -",f.OcQStoryConvProgram.SYSTEM_NAME,"=<SYSTEM_NAME> -",f.OcQStoryConvProgram.STORY_ID,"=<STORY_ID> -"),f.OcQStoryConvProgram.SAVE_PATH,"=<PATH_TO_SAVE> [ -",f.OcQStoryConvProgram.SPLIT_PAGES," ]"));a.println("Example call:");a.println(f.XStringUtils.concatenate3(f.XStringUtils.concatenate5("\tstoryconverter -",f.OcQStoryConvProgram.SYSTEM_NAME,"=moses -",f.OcQStoryConvProgram.STORY_ID,"=7FA33C5B24775509E10000000AB4010F -"),f.OcQStoryConvProgram.SAVE_PATH,"=test/path"));a.println(f.XStringUtils.concatenate3("If you specify the option \"-",f.OcQStoryConvProgram.SPLIT_PAGES,"\" external datasources are written into separate files"));return false;}var j=f.OcOrcaServiceConfig.create(this.getApplication(),b);var k=j.processOrcaServiceCreation(f.SyncType.BLOCKING,null,null);if(k.hasErrors()){a.println(f.XStringUtils.concatenate2("Cannot connect to system ",b));return false;}var l=k.getData();if(f.isNull(l)){a.println(f.XStringUtils.concatenate2("Cannot create Orca service for system ",b));return false;}var m=l.processStoryLoad(f.SyncType.BLOCKING,null,null,c);if(m.hasErrors()){a.println(f.XStringUtils.concatenate2("Cannot load story ",c));return false;}var n=m.getData();var q=f.OcQuasarStory.create(n);q.setQuasarMainLayoutType(f.OcLayoutType.CANVAS);var o;if(h){o=q.getQuasarAnalyticalCardDocument();}else if(i){o=q.getQuasarCompositeAnalyticalCardDocument();}else{o=q.getQuasarTabStoryDocument();}var p=f.OcStoryUtils.normalizeString(q.getName());var r=f.PrUtils.serialize(o,true,false,0);r=f.XString.replace(r,f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,b);var t=f.XFile.createFromEnvVar(this.getSession(),f.XEnvironmentConstants.FIREFLY_SDK,f.XStringUtils.concatenate2(d,"/"));var u=f.XFile.createFromEnvVar(this.getSession(),f.XEnvironmentConstants.FIREFLY_SDK,f.XStringUtils.concatenate4(d,"/",p,"/"));t.mkdirs();if(!t.isExisting()){a.println(f.XStringUtils.concatenate2("Cannot create directory ",d));f.XObjectExt.release(o);return false;}var v=t.newChild(f.XStringUtils.concatenate2(p,".qsa"));var w=f.XFile.createByNativePath(this.getSession(),v.getNativePath());w.saveByteArray(f.XByteArray.convertFromString(r));if(e&&!h){u.mkdirs();if(!u.isExisting()){a.println(f.XStringUtils.concatenate2("Cannot create directory ",d));f.XObjectExt.release(o);return false;}var x=q.getQuasarPageDocuments();var y=null;if(g){y=f.XFile.createByNativePath(this.getSession(),f.XStringUtils.concatenate2(u.getNativePath(),"uqm"));}for(var z=0;z<x.size();z++){var A=x.get(z);var B=f.PrUtils.serialize(A,true,false,0);B=f.XString.replace(B,f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME,b);var C=f.XInteger.convertToString(z);var D=f.XStringUtils.concatenate3("page",C,".qsa");if(g){var E=f.JsonParserFactory.newInstance();var F=E.parse(B);F=this.recursiveAdapt(y,F,F);B=f.PrUtils.serialize(F,true,true,4);D=f.XStringUtils.concatenate2("Xt_",D);}u.mkdirs();if(!u.isExisting()){a.println(f.XStringUtils.concatenate2("Cannot create directory ",d));f.XObjectExt.release(x);return false;}var G=u.newChild(D);var H=f.XFile.createByNativePath(this.getSession(),G.getNativePath());H.saveByteArray(f.XByteArray.convertFromString(B));}f.XObjectExt.release(x);}return true;};f.OcQStoryConvProgram.prototype.newProgram=function(){var n=new f.OcQStoryConvProgram();n.setup();return n;};f.OcQStoryConvProgram.prototype.recursiveAdapt=function(d,e,a){if(e.isStructure()){var s=e;var b=s.getKeysAsIteratorOfString();while(b.hasNext()){var k=b.next();var c=s.getByKey(k);if(f.XString.isEqual("DataProviders",k)&&c.isList()){this.reduceDataproviders(d,c,a);}else{if(f.notNull(c)){var n=this.recursiveAdapt(d,c,a);if(n!==c){s.put(k,n);}}}}}else if(e.isList()){var l=e;for(var i=0;i<l.size();i++){var g=l.get(i);var h=this.recursiveAdapt(d,g,a);if(h!==g){l.set(i,h);}}}return e;};f.OcQStoryConvProgram.prototype.reduceDataproviders=function(d,l,a){d.mkdirs();for(var i=0;i<l.size();i++){var b=l.getStructureAt(i);if(f.notNull(b)){var c=b.getStringByKey("Name");b.putString("Name",c);var e=f.XStringUtils.concatenate2(c,".uqm");var g=d.newChild(e);var o=f.PrUtils.serialize(b,true,true,4);g.saveByteArray(f.XByteArray.convertFromString(o));b.clear();var r=f.XStringUtils.concatenate2("uqm/",e);b.putString("ResourceRef",r);b.putString("Name",c);this.recursiveRename(a,c);}}};f.OcQStoryConvProgram.prototype.recursiveRename=function(e,a){if(f.notNull(e)){if(e.isStructure()){var s=e;var b=s.getKeysAsIteratorOfString();while(b.hasNext()){var k=b.next();var c=s.getByKey(k);if(f.XString.isEqual("Binding",k)&&c.isStructure()){var d=c;var g=d.getStringByKey("Source");var t=f.XString.substring(g,1,-1);if(f.XString.isEqual(a,t)){d.putString("Source",f.XStringUtils.concatenate2("%",a));d.putString("CacheId",a);}}else{var n=this.recursiveRename(c,a);if(n!==c){s.put(k,n);}}}}else if(e.isList()){var l=e;for(var i=0;i<l.size();i++){var h=l.get(i);var j=this.recursiveRename(h,a);if(j!==h){l.set(i,j);}}}}return e;};f.OcOrcaService=function(){};f.OcOrcaService.prototype=new f.DfService();f.OcOrcaService.prototype._ff_c="OcOrcaService";f.OcOrcaService.CLAZZ=null;f.OcOrcaService.staticSetup=function(){f.OcOrcaService.CLAZZ=f.XClass.create(f.OcOrcaService);};f.OcOrcaService.prototype.requiresInitialization=function(){return false;};f.OcOrcaService.prototype.processStoryLoad=function(s,l,c,a){return f.OcStoryLoadAction.createAndRun(s,l,c,this,a);};f.OcOrcaService.prototype.processSystemLandscapeLoad=function(s,l,c,a){return f.OcSystemsLoadAction.createAndRun(s,l,c,this,a);};f.OcOrcaService.prototype.processBearerTokenLoad=function(s,l,c,a){return f.OcBearerTokenLoadAction.createAndRun(s,l,c,this,a);};f.OcOrcaService.prototype.processStoryCatalogLoad=function(s,l,c,o){return f.OcStoryCatalogLoadAction.create(o,this).processSyncAction(s,l,c);};f.OcOrcaService.prototype.processCubeMetadataLoad=function(s,l,c,a){return f.OcCubeMetadataLoadAction.createAndRun(s,l,c,this,a);};f.OcOrcaServiceConfig=function(){};f.OcOrcaServiceConfig.prototype=new f.DfServiceConfig();f.OcOrcaServiceConfig.prototype._ff_c="OcOrcaServiceConfig";f.OcOrcaServiceConfig.ORCA_MASTER_SYSTEM_NAME="orcaMaster";f.OcOrcaServiceConfig.CLAZZ=null;f.OcOrcaServiceConfig.staticSetup=function(){f.OcOrcaServiceConfig.CLAZZ=f.XClass.create(f.OcOrcaServiceConfig);};f.OcOrcaServiceConfig.create=function(a,s){var o=new f.OcOrcaServiceConfig();o.setupConfig(a);o.setServiceTypeInfo(f.StoryModule.SERVICE_TYPE_ORCA_SERVICE);o.setSystemName(s);return o;};f.OcOrcaServiceConfig.prototype.processOrcaServiceCreation=function(s,l,c){return this.processSyncAction(s,l,c);};f.OcOrcaServiceConfig.prototype.setDataFromService=function(s){this.setData(s);};f.OcOrcaServiceConfig.prototype.callListener=function(e,l,d,c){l.onOrcaServiceCreated(e,d,c);};f.StoryModule=function(){};f.StoryModule.prototype=new f.DfModule();f.StoryModule.prototype._ff_c="StoryModule";f.StoryModule.XS_ORCA_SERVICE="ORCA_SERVICE";f.StoryModule.SERVICE_TYPE_ORCA_SERVICE=null;f.StoryModule.s_module=null;f.StoryModule.getInstance=function(){if(f.isNull(f.StoryModule.s_module)){f.DfModule.checkInitialized(f.RuntimeModule.getInstance());f.DfModule.checkInitialized(f.ProtocolModule.getInstance());f.StoryModule.s_module=f.DfModule.startExt(new f.StoryModule());var r=f.RegistrationService.getInstance();f.StoryModule.SERVICE_TYPE_ORCA_SERVICE=f.ServiceType.createType(f.StoryModule.XS_ORCA_SERVICE);f.OcOrcaServiceConfig.staticSetup();r.addServiceConfig(f.StoryModule.XS_ORCA_SERVICE,f.OcOrcaServiceConfig.CLAZZ);f.OcOrcaService.staticSetup();r.addService(f.StoryModule.XS_ORCA_SERVICE,f.OcOrcaService.CLAZZ);f.OcOrcaConstants.staticSetup();f.OcQuasarConstants.staticSetup();f.OcChartType.staticSetup();f.OcStoryCatalogType.staticSetup();f.OcWidgetType.staticSetup();f.OcLayoutType.staticSetup();f.ProgramRegistration.setProgramFactory("storyconverter",new f.OcQStoryConvProgram());f.DfModule.stopExt(f.StoryModule.s_module);}return f.StoryModule.s_module;};f.StoryModule.prototype.getName=function(){return"ff5500.story";};f.StoryModule.getInstance();return sap.firefly;});
