/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/olap/OlapListGridBinding",["jquery.sap.global","sap/ui/model/ChangeReason","sap/ui/model/Context","sap/ui/model/ListBinding","sap/zen/dsh/olap/calculateId","sap/zen/commons/thirdparty/lodash"],function(q,C,b,L,c,_){"use strict";function d(o){return o instanceof b||typeof o==="undefined";}var O=L.extend("sap.zen.dsh.OlapListGridBinding",{constructor:function(m,p,e,s,f,P){var t=this;var g=e;var l=[];var h=[];L.apply(t,[m,p,g,s,f,P]);function i(){var j=m.resolve(p,g);var a=m.getProperty(j)||[];if(j&&!q.sap.endsWith(j,"/")){j+="/";}var o=m.getLimit();return _.filter(_.range(a.length),function(n){return a[n].x<=o.colLimit&&a[n].y<=o.rowLimit;}).map(function(n){return m.getContext(j+n);});}t.setContext=function(o){if(!d(o)){throw new Error("Context expected ");}if(g!==o){g=o;if(t.isRelative()){t.update();t._fireChange({reason:C.Context});}}};t.getLength=function(){return i().length;};t.sort=function(){throw new Error("OlapListBinding does not support client side sort");};t.applySort=function(){throw new Error("OlapListBinding does not support client side sort");};t.filter=function(){throw new Error("OlapListBinding does not support client side filter");};t.applyFilter=function(){throw new Error("OlapListBinding does not support client side filter");};t.getDistinctValues=function(){throw new Error("Not supported");};t.getId=_.constant(c());t.getContexts=function(){return i();};t.getCurrentContexts=function(){return h||[];};t.update=function(){l=m.getProperty(p,g);h=i();};t.checkUpdate=function(){var a=m.getProperty(t.sPath,t.oContext);var j=i();var k=!(a===l&&h===j);if(k){_.forEach(j,function(o){o.setUpdated(true);});t.update();}if(k){t._fireChange({reason:C.Change});}};L.apply(t,arguments);}});return O;});
