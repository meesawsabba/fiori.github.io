/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/rsrt/controller/AxisAction.controller",["sap/zen/dsh/library","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/zen/dsh/utils/ErrorHandler","sap/zen/commons/thirdparty/lodash"],function(e,C,J,E,_){"use strict";C.extend("sap.zen.dsh.rsrt.controller.AxisAction",{beforeOpen:function(o){var d=o.getSource().getItem().data();o.getSource().setModel(new J(_.assign(d,{ToRows:d.Axis!=e.Axis.Rows,ToColumns:d.Axis!=e.Axis.Columns,ToFree:d.Axis!=e.Axis.Free&&!d.IsStructure,Down:d.Axis!=e.Axis.Free&&d.Position!=d.LastPosition,Up:d.Axis!=e.Axis.Free&&d.Position!=0})));},up:function(o){var t=this;var d=o.getSource().getParent().getItem().data();t.getOwnerComponent().getRootControl().setBusy(true);Promise.resolve(null).then(function(){t.getView().getModel("om").getDataProvider(0).moveUp(d.Name);return t.getView().getModel("om").getDataProvider(0).getResultSet();}).then(t.getOwnerComponent().Utilities.saveAppState).catch(E.handleWithPopUp).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},down:function(o){var t=this;var d=o.getSource().getParent().getItem().data();t.getOwnerComponent().getRootControl().setBusy(true);return Promise.resolve(null).then(function(){t.getView().getModel("om").getDataProvider(0).moveDown(d.Name);return t.getView().getModel("om").getDataProvider(0).getResultSet();}).then(t.getOwnerComponent().Utilities.saveAppState).catch(E.handleWithPopUp).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},move2Columns:function(o){var t=this;t.getOwnerComponent().getRootControl().setBusy(true);var n=o.getSource().data().Name;Promise.resolve(null).then(function(){t.getView().getModel("om").getDataProvider(0).toColumns(n);return t.getView().getModel("om").getDataProvider(0).getResultSet();}).catch(E.handleWithPopUp).then(t.getOwnerComponent().Utilities.saveAppState).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},move2Rows:function(o){var t=this;var n=o.getSource().data().Name;t.getOwnerComponent().getRootControl().setBusy(true);Promise.resolve(null).then(function(){t.getView().getModel("om").getDataProvider(0).toRows(n);return t.getView().getModel("om").getDataProvider(0).getResultSet();}).then(t.getOwnerComponent().Utilities.saveAppState).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);}).catch(E.handleWithPopUp);},move2Free:function(o){var t=this;var n=o.getSource().data().Name;t.getOwnerComponent().getRootControl().setBusy(true);Promise.resolve(null).then(function(){t.getView().getModel("om").getDataProvider(0).removeDrilldown(n);return t.getView().getModel("om").getDataProvider(0).getResultSet();}).then(t.getOwnerComponent().Utilities.saveAppState).catch(E.handleWithPopUp).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},chaProp:function(o){var t=this;var d=o.getSource().getParent().getItem().data();var D=t.getView().getModel("om").getDataProvider(0);Promise.resolve(null).then(function(){return D.openDimDialog(d.Name);}).then(function(b){return b?D.getResultSet():D;}).then(t.getOwnerComponent().Utilities.saveAppState).catch(E.handleWithPopUp).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},selector:function(o){var t=this;var d=o.getSource().getParent().getItem().data();t.getView().getModel("om").getDataProvider(0).openSelector(d.Name).then(t.getOwnerComponent().Utilities.saveAppState).catch(E.handleWithPopUp).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},});return new sap.zen.dsh.rsrt.controller.AxisAction();});
