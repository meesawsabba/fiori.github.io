/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/rsrt/controller/Map.controller",["sap/zen/commons/utils/jQuery","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel"],function(q,C,J){"use strict";C.extend("sap.zen.dsh.rsrt.controller.Map",{onInit:function(){var t=this;var v=t.getView();v.setModel(new J(),"map");v.setBusy(true);Promise.resolve(q.ajax({method:"get",url:"/sap/opu/odata/sap/VBI_APPL_DEF2_SRV/VBIApplicationSet('BW4_DATA_PREV')?$format=json"})).then(function(o){return JSON.parse(o.d.MapConfigJSON);}).catch(function(){return{MapProvider:{type:"",name:"BASE",description:"BASE",tileX:"256",tileY:"256",minLOD:"0",maxLOD:"20",copyright:"BASE",copyrightLink:"",copyrightImage:"",retries:"0",projection:"Mercator",Source:[{id:"1",url:["http","//toolserver.org/tiles/hikebike/{LOD}/{X}/{Y}.png"].join(":")}]},MapLayerStack:{name:"BASE",MapLayer:{name:"BASE",refMapProvider:"BASE",opacity:"1.0E0",colBkgnd:"RGB(255,255,255)",dependency:"all"}}};}).then(function(m){t.getView().byId("vbi").setMapConfiguration({MapProvider:[m.MapProvider],MapLayerStacks:[m.MapLayerStack]});t.getView().byId("vbi").setRefMapLayerStack("BASE");v.setBusy(false);});},onAfterRendering:function(){var t=this;q(t.getView().byId("vbi").getDomRef()).height(q(t.getView().getDomRef()).parent().parent().viewportHeight());q(t.getView().getDomRef()).sizeChanged(function(){q(t.getView().byId("vbi").getDomRef()).height(q(t.getView().getDomRef()).parent().parent().viewportHeight());});}});return sap.zen.dsh.rsrt.controller.Map;});
