/*!
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/rsrt/controller/ChartSettingsView.controller",["sap/base/Log","sap/ui/core/mvc/Controller","sap/m/ColorPalettePopover","sap/zen/commons/thirdparty/lodash"],function(L,C,a,_){"use strict";C.extend("sap.zen.dsh.rsrt.controller.ChartSettingsView",{onInit:function(){var t=this;t.getView().setBusy(true);t.getView().loaded().then(function(){t.getView().setBusy(false);});},openColorPicker:function(e){var s=e.getSource();(new a({colorSelect:function(E){var n=parseInt(_.find(s.getCustomData(),function(o){return o.getKey()==="position";}).getValue(),10);s.getModel("cs").setProperty(["/colors",n,"color"].join("/"),E.getParameter("value"));s.getModel("cs").setProperty(["/colors",n,"changed"].join("/"),true);}})).openBy(e.getSource());},dimChange:function(){var t=this;t.getOwnerComponent().getRootControl().setBusy(true);var d=t.getOwnerComponent().getModel("om").getDataProvider("0");var c=d.Chart;var l={rows:_.filter([c.hasCatDimension?c.catDimension:null,c.hasCat2Dimension?c.cat2Dimension:null,c.hasColDimension?c.colDimension:null,c.hasDataFrameDimension?c.dataFrameDimension:null,],_.identity),columns:_.filter([c.hasValDimension?d.Chart.valDimension:null,c.hasVal2Dimension?d.Chart.val2Dimension:null,c.hasTitDimension?d.Chart.titDimension:null,c.hasTimeDimension?d.Chart.timeDimension:null],_.identity)};if(l.rows.length||l.columns.length){d.setAxesLayout(l);}d.getResultSet().catch(function(e){L.error(e);}).then(function(){t.getOwnerComponent().getRootControl().setBusy(false);});},updateChart:function(){var t=this;t.getOwnerComponent().getRootControl().byId("ChartView").getController().updateChart();}});return sap.zen.dsh.rsrt.controller.ChartSettingsView;});
