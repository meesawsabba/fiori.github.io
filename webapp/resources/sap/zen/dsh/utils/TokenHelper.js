/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/utils/TokenHelper",["sap/m/Token","sap/ui/core/CustomData","sap/zen/dsh/ComparisonOperator","sap/zen/commons/thirdparty/lodash"],function(T,C,a,_){"use strict";function c(s,E){if(s){if(s==="<"){return E?a.LESS_EQUAL:a.LESS;}else{return E?a.GREATER_EQUAL:a.GREATER;}}else{return a.EQUAL;}}function b(d){return new Date(d);}function e(g){if(typeof(g)!=="object"){throw new Error("Invalid date");}var d=g.getDate();var m=g.getMonth()+1;var y=g.getFullYear();return""+y+"-"+(m<=9?"0"+m:m)+"-"+(d<=9?"0"+d:d);}function f(){var t=this;t.dateToYMD=e;t.datsToDate=b;t.rangeToToken=function(r){return new T({key:r.Low,text:r.Text,customData:_.map(r,function(E,n){return new C({key:n,value:E});})});};this.tokenToRange=function(o){var d=o.data();if(d.ComparisonOperator){return{ComparisonOperator:d.ComparisonOperator,High:d.High,IsExcluding:d.IsExcluding,Low:o.getKey(),Text:o.getText()};}else{return{ComparisonOperator:a.EQUAL,Low:o.getKey(),IsExcluding:false,Text:o.getText()};}};this.stringToTokens=function(s){return _.map(s.split(","),this.stringToToken);};this.stringToToken=function(s){var r=null;var m=s.match(/(!)?(.+) - (.+)/);if(m){r={Low:m[2],High:m[3],IsExcluding:!!m[1],Text:s,ComparisonOperator:a.BETWEEN};}else{m=s.match(/(!)?(<|>)?(=)?(.+)/);if(m){r={Low:m[4],Text:s,IsExcluding:!!m[1],ComparisonOperator:c(m[2],m[3])};}}return t.rangeToToken(r);};}return new f();});
