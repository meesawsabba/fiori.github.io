/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/base/Log","sap/zen/dsh/utils/dispatcher","sap/zen/dsh/firefly/library"],function(jQuery,Log,Dispatcher){Log.info("Load bi_mobile_util");sap.zen.dsh.sapbi_showUI5Measures=false;sap.zen.dsh.sapbi_statisticsStepCounter=0;sap.zen.dsh.sapbi_zen_recordrequests=false;sap.zen.dsh.sapbi_dummy={};sap.zen.dsh.sapbi_zen_slvLoaded=true;sap.zen.dsh.sapbi_getslv=function(){return sap.zen.dsh.sapbi_dummy;};sap.zen.dsh.sapbi_loadUi5=function(i,a){function o(){if(sap.zen.dsh.sapbi_isMobile===true){jQuery.sap.initMobile({"preventScroll":true,"viewport":false});}sap.ui.getCore().getLibraryResourceBundle("sap.ui.core");function _(){if(!sap.ui.getCore().isThemeApplied()){setTimeout(_,100);}else{if(sap.ui.loader&&!require.config){sap.ui.loader.config({noConflict:true});}Dispatcher.resumeDispatching();}}_();}if(!sap.ui||!sap.ui.core){Dispatcher.pauseDispatching();window["sap-ui-config"]={onInit:o};var s=document.createElement("script");s.type="text/javascript";s.src=i;s.charset="utf-8";s.async=false;for(var b in a){if(Object.prototype.hasOwnProperty.call(a,b)){s.setAttribute(b,a[b]);}}s.setAttribute("data-sap-ui-xx-bindingSyntax","complex");document.getElementsByTagName("head")[0].appendChild(s);}};function sapbi_snippet(json,tag){if(Dispatcher.isPaused(function(){sapbi_snippet(json,tag);})){return;}var callback=function(){sap.zen.dsh.sapbi_registerHandlers(arguments);sap.zen.dsh.sapbi_phx(tag,eval("("+json+")"));};Log.error("Unexpected require call");require(sap.zen.dsh.sapbi_page.m_required,callback);}sap.zen.dsh.sapbi_snippet_ROOT=function(j){sapbi_snippet(j,"sapbi_snippet_ROOT");};sap.zen.dsh.sapbi_snippet_ROOT_DIALOG=function(j){sapbi_snippet(j,"sapbi_snippet_ROOT_DIALOG");};sap.zen.dsh.sapbi_registerHandlers=function(m){for(var i=0;i<m.length;i++){var a=m[i];if(a&&a.getType){if(a.getDecorator){Dispatcher.addHandlers(a.getType(),a,a.getDecorator());}else{Dispatcher.addHandlers(a.getType(),a);}}}};function sapbi_phx_process_json(d,j){var a=function(r){r.placeAt(d,"only");};Dispatcher.dispatch(j,a);sap.zen.dsh.getLoadingIndicator().hide();}sap.zen.dsh.iNumberOfJavascriptErrorsLogged=0;sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged=10;function AsyncHandleJavascriptError(m){if(sap.zen.dsh.sapbi_page.m_hasSendLock){window.setTimeout(function(){AsyncHandleJavascriptError(m);},100);return;}sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,m,"Please contact your application designer");sap.zen.MessageViewHandler.logMessage(sap.zen.MessageViewHandler.error,"A JavaScript error occurred",m);}sap.zen.dsh.sapbi_phx=function(d,j){if(sap.zen.dsh.sapbi_page.m_profileMode){jQuery.sap.measure.setActive(true);}var s="SHOWDEBUGJSON";var u=window.location.search.indexOf(s);if(u!==-1||sap.zen.dsh.sapbi_page.m_isDebugMode){Dispatcher.logJson(j,(u!==-1),d);}jQuery.sap.measure.start("zen dispatch","dispatch");if(jQuery.browser.msie){window.onerror=function(a,u,l,p){if(sap.zen.dsh.iNumberOfJavascriptErrorsLogged<sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged){var c="";try{c=arguments.callee.caller;}catch(e){c="Unknown function name (strict mode)";}var f=c.toString();if(!u){u="N/A";}if(!l){l="N/A";}f=(f+"").replace(/\r/g," ");f=(f+"").replace(/\n/g," ");var m="Error message: "+a+" Line Number: "+l+" Pos: "+p+" Function: "+f+" URL: "+u;if(window.eclipse_sendZenUrl){window.eclipse_sendZenUrl("zen://message?severity=E&message="+m);}Log.error("A JavaScript error occurred. "+m);if(sap&&sap.zen&&sap.zen.MessageViewHandler){AsyncHandleJavascriptError(m);}sap.zen.dsh.getLoadingIndicator().hide();sap.zen.dsh.iNumberOfJavascriptErrorsLogged++;}return false;};sapbi_phx_process_json(d,j);}else{try{sapbi_phx_process_json(d,j);}catch(e){if(sap.zen.dsh.iNumberOfJavascriptErrorsLogged<sap.zen.dsh.iMaxNumberOfJavascriptErrorsLogged){var m="A JavaScript error occurred. ";if(typeof e==="string"){m+=e;}else{m+=e.message+" ";if(e.stack){m+=e.stack+" ";}if(e.sourceURL){m+=e.sourceURL+" ";}if(e.line){m+=e.line+" ";}if(e.lineNumber){m+=e.lineNumber+" ";}}m=(m+"").replace(/\r/g," ");m=(m+"").replace(/\n/g," ");Log.error(m);if(sap.zen.designmode){window.eclipse_logJavaScriptMessage(m,"error");}if(sap&&sap.zen&&sap.zen.MessageViewHandler){sap.zen.dsh.sapbi_page.m_hasSendLock=false;sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,m,"Please contact your application designer");sap.zen.MessageViewHandler.logMessage(sap.zen.MessageViewHandler.error,"A JavaScript error occurred",m);}sap.zen.dsh.getLoadingIndicator().hide();sap.zen.dsh.iNumberOfJavascriptErrorsLogged++;}}}jQuery.sap.measure.end("zen dispatch");};if(typeof sap.zen.dsh.sapbi_ParameterList!=="undefined"){sap.zen.dsh.sapbi_ParameterList.prototype.getIndices=function(n){var u=n.toUpperCase();var p=[];var c=0;var i;for(i in this.m_list[u]){if(!isNaN(i)){var a=parseInt(i,10);p[c++]=a;}}return p;};}});
