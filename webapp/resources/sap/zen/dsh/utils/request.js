/*
 * SAPUI5
  (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define("sap/zen/dsh/utils/request",["jquery.sap.global","sap/base/Log"],function(q,L){"use strict";var r={};r.zenSendCommandArrayWoEventWZenPVT=function(p,o,u){var f;if(u){f=function(n){if(n){r.ricSendCommand(n);}};}else{f=function(n){if(n){r.zenSendCommand(n);}};}r.que.instance.push({"parameterArray":p,"bOnlyEmptyDeltaWillReturn":o,"funclet":f});r.que.instance.wanderQue(1);};r.getCommandSequence=function(p){var c;var a=sap.zen.dsh.sapbi_createParameterList(p);var i=a.exists(sap.zen.dsh.sapbi_COMMAND);if(!i){c=new sap.zen.dsh.sapbi_CommandSequence();c.addCommand(a);}else{c=a;}return c;};r.zenSendCommand=function(p){if(sap.zen.dsh.sapbi_page.m_hasSendLock){L.debug("zenSendCommand m_hasSendLock",p.parameterArray.join(),"bi_command_utils.js");r.que.instance.insertAtStart(p);}else{var c=r.getCommandSequence(p.parameterArray);if(r.containsCommand(c,"navigate_by_scrolling")||r.containsCommand(c,"after_rendering")||p.bOnlyEmptyDeltaWillReturn){sap.zen.dsh.getLoadingIndicator().disableForNextCall();}L.debug("zenSendCommand",p.parameterArray.join(),"bi_command_utils.js");sap.zen.dsh.sapbi_page.sendCommandWoPVTWoServerStateChange(c);}};r.ricSendCommand=function(c){if(sap.zen.dsh.sapbi_page.m_hasSendLock){L.debug("zenSendCommand m_hasSendLock",c,"bi_command_utils.js");r.que.instance.insertAtStart(c);}else{L.debug("zenSendCommand",c,"bi_command_utils.js");sap.zen.dsh.sapbi_page.sendCommandWoPVTWoServerStateChange(c.parameterArray);}};r.zenSendUpdateCommand=function(p){sap.zen.dsh.sapbi_page.m_useSnippets=true;r.zenSendCommandArrayWoEventWZenPVT(p,false);};r.que=function(){var i=[];var a=false;this.push=function(b){if(this.paused){return;}if(i&&i.push){i.push(b);}};this.getFirstElement=function(){if(i.length>0){var b=i[0];i.shift();return b;}else{return null;}};this.size=function(){return i.length;};this.reset=function(){i=[];a=false;};this.insertAtStart=function(b){if(this.paused){return;}i.unshift(b);};var t=this;this.wanderQue=function(m){if(this.size()>0){if(!a){if(this.isSendAllowed()){var f=r.que.instance.getFirstElement();f.funclet(f);}if(this.size()!==0){setTimeout(function(){L.debug("wanderQue","in setTimeout","bi_command_utils.js");a=false;t.wanderQue(m);},m);a=true;}}}};this.isSendAllowed=function(){return true;};this.stopScheduling=function(){this.paused=true;};this.continueScheduling=function(){this.paused=false;};};r.que.instance=new r.que();r.isPagingCommand=function(c,C){var a=c.getParameter(sap.zen.dsh.sapbi_COMMAND_TYPE);if(a!=null){var b=a.getValue();if(b!=null){return b.toLowerCase()===C;}}return false;};r.containsCommand=function(p,c){if(p.getParameterCount){var a=p.getParameterCount(sap.zen.dsh.sapbi_COMMAND);if(a>0){var b=p.getIndices(sap.zen.dsh.sapbi_COMMAND);for(var i=0;i<a;i++){var d=b[i];var e=p.getParameterByIndex(sap.zen.dsh.sapbi_COMMAND,d);if(e){var f=e.getChildList();if(f!=null){if(r.isPagingCommand(f,c)){return true;}}}}}else{if(r.isPagingCommand(p,c)){return true;}}}return false;};return r;});
