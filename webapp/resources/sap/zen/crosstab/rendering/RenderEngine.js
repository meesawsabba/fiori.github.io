/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global","sap/zen/crosstab/rendering/ScrollbarRenderer","sap/zen/crosstab/rendering/DomElementProvider","sap/zen/crosstab/utils/Measuring","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/rendering/CrossRequestManager","sap/zen/crosstab/utils/Utils"],function(q,S,D,M,C,R,a,U){"use strict";q.sap.declare("sap.zen.crosstab.rendering.RenderEngine");sap.zen.crosstab.rendering.RenderEngine=function(c){var o=c.getColumnHeaderArea();var d=c.getDimensionHeaderArea();var r=c.getRowHeaderArea();var b=c.getDataArea();var e=null;var s=null;var f=null;var t=null;var g=null;var l="";var I=false;var n=[];var h=new D();var m=new M(c,h);var k=new a(c,this);var p=null;var H=null;var u=false;var v=false;var w={bHasHScrollbar:false,bHasVScrollbar:false,bHasHHeaderScrollbar:false};var A=[];var x=true;var y=false;var z=-1;var B=-1;var E=0;var F=false;this.isIE8Mode=function(){return u;};this.renderResizeOutline=function(){if((c.getWidth()==="auto"&&c.hResize())||(c.getHeight()==="auto"&&c.vResize())){var i=c.getId();var j=i+"_resizeDiv";var t1=i+"_resizeFrame";var u1=0;var v1=0;t=h.getElement(i);if(t&&t[0]){t.css("overflow","hidden");var w1=m.getTableDivBordersAndPadding();u1=w1.borders.iTopBorderWidth;v1=w1.borders.iLeftBorderWidth;f=q.sap.byId(j);f.css("visibility","visible");f.css("top",-u1+"px");f.css("left",-v1+"px");g=q.sap.byId(t1);g.css("width",c.getIntWidth()+"px");g.css("height",c.getIntHeight()+"px");g.css("top",-u1+"px");g.css("left",-v1+"px");g.css("visibility","visible");var x1=t.find("#"+q.sap.encodeCSS(c.getId()+"_hScrollTab"));if(x1&&x1.length>0){x1.appendTo(g);x1.css("position","absolute");var y1=c.getPropertyBag().getToolbarHeight();x1.css("bottom",y1+"px");x1.css("left","0px");}var z1=t.find("#"+q.sap.encodeCSS(c.getId()+"_vScrollTab"));if(z1&&z1.length>0){z1.appendTo(g);z1.css("position","absolute");z1.css("top","0px");z1.css(c.getPropertyBag().isRtl()?"left":"right","0px");}if(c.getPropertyBag().hasToolbar()){var A1=t.find("#"+q.sap.encodeCSS(c.getId()+"_toolbar"));if(A1&&A1.length>0){A1.appendTo(g);A1.css("position","absolute");A1.css("left","0px");A1.css("bottom","0px");}}}}};this.removeResizeOutline=function(){if(f){f.css("visibility","hidden");f=null;}if(t){t.css("overflow","hidden");t=null;}if(g){g.css("visibility","hidden");g=null;}};this.addAfterFinishRenderingHandler=function(i){if(q.inArray(i,A)===-1){A.push(i);}};this.removeAfterFinishRenderingHandler=function(i){var j=q.inArray(i,A);if(j!==-1){A.splice(j,1);}};this.removeAllAfterFinishRenderingHandlers=function(){A=[];};this.renderCell=function(i,j,t1){var u1=i.getCell(j,t1);if(u1){e.renderControl(u1);}return u1;};this.renderArea=function(i,j,t1,u1,v1,w1){if(!j){j=0;}if(!t1){t1=0;}if(!u1){u1=0;}if(!v1){v1=0;}var x1=j+t1;var y1=u1+v1;var z1=0;var A1=0;x1=Math.min(x1,i.getRowCnt());y1=Math.min(y1,i.getColCnt());for(z1=j;z1<x1;z1++){if(w1){e.write("<tr");e.writeAttributeEscaped("class",w1);e.write(">");}else{e.write("<tr>");}for(A1=u1;A1<y1;A1++){this.renderCell(i,z1,A1);}e.write("</tr>");}};this.setDeferredVScrollPosDetermination=function(i){v=i;};function G(){u=false;if(q.browser.msie){if(q.browser.version.substring(0,2)==="8."){u=true;}if(q.browser.fVersion&&q.browser.fVersion===8){u=true;}}}this.beginRendering=function(){c.block();G();F=c.getUtils().isMsIE();e=sap.ui.getCore().createRenderManager();n1();t=h.getElement(c.getId());t.css("visibility",(c.getPropertyBag().isDebugMode()===true)?"visible":"hidden");if(k.hasSavedInfo()){var i=k.getSavedHScrollInfo();if(i){o.setRenderStartCol(i.iPos);if(i.bScrolledToEnd){o.setRenderColCnt(o.getColCnt()-o.getRenderStartCol());}k.restoreColWidths();}var j=k.getSavedVScrollInfo();if(j){r.setRenderStartRow(j.iPos);if(j.bScrolledToEnd){r.setRenderRowCnt(r.getRowCnt()-r.getRenderStartRow());}}}};this.finishRendering=function(j){var i=0;var t1=null;var u1;var v1;this.showLoadingVisualization();if(e){e.destroy();}e=null;m.reset();t=h.getElement(c.getId());t.css("visibility","visible");k.savedInfoHandled();c.restoreFocusOnCell();this.setDivSizeValidity();var w1=c.getSelectionHandler();if(w1){w1.ensureCellsSelected();}if(!c.hasLoadingPages()&&c.hasData()){v1=c.getHeaderInfo();if(v1){v1.setupPivotCell();}u1=c.getDragDropHandler();if(u1&&c.getPropertyBag().isDragDropEnabled()){u1.initDragDrop(j);}if(j&&c.getColResizer()&&c.getPropertyBag().isEnableColResize()){c.getColResizer().initialize();}}for(i=0;i<A.length;i++){t1=A[i];if(t1){t1();}}c.unblock();};this.renderDimensionHeaderArea=function(){var i=0;var j=d.getRowCnt();var t1=0;var u1=d.getColCnt();this.renderArea(d,i,j,t1,u1,"sapzencrosstab-HeaderRow");d.setRenderSize(i,j,t1,u1);e.flush(h.getElement(d.getId())[0]);};this.renderDataArea=function(){var i=b.getId();var j=h.getElement(b.getId());var t1=j;var u1="";if(!c.getPropertyBag().isDebugMode()){j.hide();}j.html("<tbody></tbody>");t1=q(document.getElementById(i).firstChild);t1.html("");u1=t1[0].innerHTML||"";e.write(u1);var v1=0;var w1=0;var x1=0;var y1=0;if(r.hasContent()){v1=r.getRenderStartRow();w1=r.getRenderRowCnt();}else{v1=0;w1=b.getRowCnt();}if(o.hasContent()){x1=o.getRenderStartCol();y1=o.getRenderColCnt();}else{x1=0;y1=b.getColCnt();}var z1=J(v1,w1,x1,y1);var A1=K(v1,w1,x1,y1);z1=null;A1=null;if(z1){N(z1);P(z1,v1,w1,x1,y1,this);}else if(A1){O(A1);Q(A1,v1,w1,x1,y1,this);}else{this.renderArea(b,v1,w1,x1,y1);}e.flush(t1[0]);j.show();b.setRenderSize(v1,w1,x1,y1);};function J(i,j,t1,u1){if(t1!==b.getRenderStartCol()||u1!==b.getRenderColCnt()||j!==b.getRenderRowCnt()){return 0;}var v1=b.getRenderStartRow()+b.getRenderRowCnt();var w1=i+j;var x1=w1-v1;if(Math.abs(x1)<j){return x1;}return 0;}function K(i,j,t1,u1){if(i!==b.getRenderStartRow()||j!==b.getRenderRowCnt()||u1!==b.getRenderColCnt()){return 0;}var v1=b.getRenderStartCol()+b.getRenderColCnt();var w1=t1+u1;var x1=w1-v1;if(Math.abs(x1)<u1){return x1;}return 0;}function L(j){var i=null;var t1;if(F===true){if(c.getPropertyBag().isDragDropEnabled()===true){t1=j.find("td");q.each(t1,function(u1,v1){var w1=q(v1);if(w1.data("ui-draggable")){w1.draggable("destroy");}if(w1.data("ui-droppable")){w1.droppable("destroy");}w1.off();});}i=j.clone(true).off();}else{i=j.clone();}return i;}function N(j){var t1=q(document.getElementById(b.getId()));var u1=L(t1);var v1=q(u1[0].firstChild);var w1=v1.find("> tr");if(j>0){for(var i=0;i<j;i++){q(w1[i]).remove();}}else{var x1=w1.length;for(i=x1+j;i<x1;i++){q(w1[i]).remove();}}t1.replaceWith(u1);h.addElement(b.getId(),q(document.getElementById(b.getId())));}function O(t1){var u1=q(document.getElementById(b.getId()));var v1=L(u1);var w1=q(v1[0].firstChild);var x1=w1.find("> tr");var y1=x1.length;if(t1>0){for(var i=0;i<y1;i++){var z1=q(x1[i]).find("> td");for(var j=0;j<t1;j++){q(z1[j]).remove();}}}else{for(i=0;i<y1;i++){z1=q(x1[i]).find("> td");var A1=z1.length-Math.abs(t1)-1;for(j=z1.length-1;j>A1;j--){q(z1[j]).remove();}}}u1.replaceWith(v1);h.addElement(b.getId(),q(document.getElementById(b.getId())));}function P(i,j,t1,u1,v1,w1){var x1=q(document.getElementById(b.getId()).firstChild);var y1=x1.html();var z1=Math.abs(i);var A1;if(i>0){e.write(y1);A1=t1+j-i;w1.renderArea(b,A1,z1,u1,v1);}else{A1=j;w1.renderArea(b,A1,z1,u1,v1);e.write(y1);}e.flush(x1[0]);}function Q(j,t1,u1,v1,w1){var x1=q(document.getElementById(b.getId()).firstChild);var y1;var z1=x1.find("> tr");if(j>0){y1=v1+w1-j;for(var i=0;i<z1.length;i++){var A1=q(z1[i]);var B1=A1.html();e.write("<tr>");e.write(B1);for(var C1=y1;C1<v1+w1;C1++){e.renderControl(b.getCell(t1+i,C1));}e.write("</tr>");}}else{y1=v1;for(i=0;i<z1.length;i++){A1=q(z1[i]);B1=A1.html();e.write("<tr>");for(C1=y1;C1<y1-j;C1++){e.renderControl(b.getCell(t1+i,C1));}e.write(B1);e.write("</tr>");}}}this.renderColHeaderArea=function(i,j){var t1=o.getId();var u1=h.getElement(o.getId());var v1=u1;var w1=o.getRowCnt();var x1=o.getColCnt();var y1="";var z1=0;var A1=0;var B1=m.getAreaWidth(d);var C1=0;var D1=c.getContentWidth();var E1=0;var F1=0;var G1,H1;var I1,J1;var K1;var L1=0;var M1=z1;var N1;var O1=c.getId()+"_ColHeaderRow_";var P1=null;if(!j){D1-=B1;}if(!c.getPropertyBag().isDebugMode()){u1.hide();}u1.html("<tbody></tbody>");v1=q(document.getElementById(t1).firstChild);v1.html("");var Q1=false;if(c.getPropertyBag().isPixelScrolling()){P1=X;z1=0;E1=x1;}else{P1=W;z1=i;E1=x1-z1;Q1=this.isHScrolledToEnd();}while(P1(A1,E1,F1,D1,Q1)){y1=v1[0].innerHTML;if(!y1){T(v1);}M1=z1+A1;L1=0;H1=o.getFinalColWidth(M1);if(!H1){L1++;}while(P1(A1,E1,F1,D1,Q1)&&H1){A1++;F1+=H1;H1=o.getFinalColWidth(z1+A1);L1++;}N1=M1+L1;for(G1=0;G1<w1;G1++){I1=O1+G1;K1=u1.find("#"+q.sap.encodeCSS(I1))[0];J1=K1.innerHTML;e.write("<tr id=\""+I1+"\" class=\"sapzencrosstab-HeaderRow\">");e.write(J1);for(var R1=M1;R1<N1;R1++){var S1=null;if(R1===z1){S1=o.getCellWithColSpan(G1,R1);}else{S1=o.getCell(G1,R1);}if(S1){e.renderControl(S1);}}e.write("</tr>");}e.flush(v1[0]);if(!o.getFinalColWidth(M1)){var T1=u1.outerWidth()-C1;F1+=T1;A1++;}C1=u1.outerWidth();}o.setRenderSize(0,o.getRowCnt(),z1,A1);u1.show();};this.appendColumnsAfterResize=function(){var i=h.getElement(o.getId());var j=0;var t1=0;var u1=0;if(o.getRenderStartCol()>0&&o.getRenderStartCol()+o.getRenderColCnt()===o.getColCnt()){var v1=c.getContentWidth()-m.getAreaWidth(d);var w1=i.outerWidth();j=w1;var x1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(w1<=v1&&o.getRenderStartCol()>0){this.appendLeftCols(o,1);this.appendLeftCols(b,1);x1=true;u1=o.getFinalColWidth(o.getRenderStartCol());if(u1){w1+=u1;}else{t1=i.outerWidth()-j;w1+=t1;}j=i.outerWidth();}i.show();if(x1){this.adjustRowHeights(d,o);this.adjustRowHeights(r,b);this.adjustColWidths(o,b);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!p){p=k.getScrollManager();}p.commandHScrolledToEnd();}}i=h.getElement(o.getId());};function T(i){var j=o.getRowCnt();var t1=0;for(t1=0;t1<j;t1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.writeAttribute("id",c.getId()+"_ColHeaderRow_"+t1);e.write(">");e.write("</tr>");}e.flush(i[0]);}function V(i){var j=i+1;var t1=0;var u1=t1+r.getColCnt();var v1=0;var w1=0;for(v1=i;v1<j;v1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");for(w1=t1;w1<u1;w1++){var x1=r.getCellWithRowSpan(v1,w1);if(x1){e.renderControl(x1);}}e.write("</tr>");}}this.isVScrolledToEnd=function(){var i=false;if(p){i=p.isVScrolledToEnd();}return i;};this.isHScrolledToEnd=function(){var i=false;if(p){i=p.isHScrolledToEnd();}return i;};function W(i,j,t1,u1,v1){return((t1<u1)||v1)&&i<j;}function X(i,j){return i<j;}this.renderRowHeaderArea=function(i){var j=r.getId();var t1=h.getElement(r.getId());var u1=t1;var v1=r.getRowCnt();var w1="";var x1=0;var y1=m.getAreaHeight(d);var z1=y1;var A1=c.getContentHeight();var B1=0;var C1=1;var D1=null;if(!c.getPropertyBag().isDebugMode()){t1.hide();}t1.html("<tbody></tbody>");u1=q(document.getElementById(j).firstChild);u1.html("");var E1=false;if(c.getPropertyBag().isPixelScrolling()){D1=X;i=0;B1=v1;}else{D1=W;B1=v1-i;E1=this.isVScrolledToEnd();}while(D1(x1,B1,z1,A1,E1)){w1=u1[0].innerHTML||"";e.write(w1);C1=1;if(x1>0){if(c.getPropertyBag().isPixelScrolling()){C1=B1-x1;}else{if(x1<B1-2){C1=3;}else if(x1<B1-1){C1=2;}}this.renderArea(r,i+x1,C1,0,r.getColCnt(),"sapzencrosstab-HeaderRow");}else{V(i);}e.flush(u1[0]);x1+=C1;z1=y1+t1.outerHeight();}t1.show();r.setRenderSize(i,x1,0,r.getColCnt());if(u){Z(r);}};function Y(r,i,j){var t1=1;var u1=r.getCell(i,j,true);if(!u1){while(!u1&&i>0){i--;t1++;u1=r.getCell(i,j,true);}}return t1;}function Z(r){var i=r.getRenderStartRow()+r.getRenderRowCnt()-1;var j=r.getRenderStartCol();var t1=j+r.getRenderColCnt()-1;var u1=0;var v1=null;var w1=1;for(u1=j;u1<=t1;u1++){v1=r.getCellWithRowSpan(i,u1);if(v1){w1=Y(r,i,u1);v1.setHtmlIE8RowSpan(w1);}}}this.appendRowsAfterResize=function(){var i=h.getElement(r.getId());var j=0;var t1=0;var u1=0;if(r.getRenderStartRow()>0){var v1=c.getContentHeight()-m.getAreaHeight(d);var w1=i.outerHeight();j=w1;var x1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(w1<=v1&&r.getRenderStartRow()>0&&r.getRenderStartRow()+r.getRenderRowCnt()===r.getRowCnt()){this.appendTopRows(r,1);this.appendTopRows(b,1);x1=true;u1=r.getFinalRowHeight(r.getRenderStartRow());if(u1){w1+=u1;}else{t1=i.outerHeight()-j;w1+=t1;}j=i.outerHeight();}i.show();if(x1){this.adjustRowHeights(r,b);this.adjustColWidths(d,r);this.adjustColWidths(o,b);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!p){p=k.getScrollManager();}p.commandVScrolledToEnd();}}i=h.getElement(r.getId());};this.setUserColWidths=function(i){if(!i.hasContent()||!i.hasUserColWidths()){return;}i.calculateColGranularity();var j=i.measureColGranularityCells();i.applyColWidthsToGranularityCells(j);var t1=h.getElement(i.getId());var u1=L(t1);b1(i,t1,u1,true);t1.replaceWith(u1);t1=q(document.getElementById(i.getId()));c1(i,t1,true);h.addElement(i.getId(),q(document.getElementById(i.getId())));i.setColGranularityCalculatedAndMeasured(true);};this.adjustColWidths=function(j,t1){if(!t1.hasContent()||!j.hasContent()){if(!j.hasUserColWidths()&&!t1.hasUserColWidths()){return;}}var u1=h.getElement(j.getId());var v1=h.getElement(t1.getId());j.calculateColGranularity();t1.calculateColGranularity();var w1=j.measureColGranularityCells();var x1=t1.measureColGranularityCells();j.setColGranularityCalculatedAndMeasured(false);t1.setColGranularityCalculatedAndMeasured(false);var i=0;var y1;for(i=j.getRenderStartCol();i<w1.length;i++){y1=Math.max(w1[i]||0,x1[i]||0);w1[i]=y1;x1[i]=y1;}j.applyColWidthsToGranularityCells(w1,j.hasUserColWidths());t1.applyColWidthsToGranularityCells(x1,t1.hasUserColWidths());var z1=L(u1);var A1=L(v1);b1(j,u1,z1);b1(t1,v1,A1);u1.replaceWith(z1);v1.replaceWith(A1);u1=q(document.getElementById(j.getId()));v1=q(document.getElementById(t1.getId()));c1(j,u1);c1(t1,v1);if(t1.isRowHeaderArea()&&c.getNewLinesCnt()>0&&c.getCallValueHelpCommand()){_();}h.addElement(j.getId(),q(document.getElementById(j.getId())));h.addElement(t1.getId(),q(document.getElementById(t1.getId())));};function $(i,j){var t1=null;var u1=null;var v1=null;var w1=0;var x1=null;var y1=r.getColGranularity();var z1=0;var A1=y1[w1].iWidth;var B1=0;var C1=0;var D1=0;var E1=0;var F1=0;var G1=null;var H1=0;for(w1=0;w1<j;w1++){x1=r.getCell(i,w1);if(x1&&x1.isEntryEnabled()){u1=q(document.getElementById(x1.getId()));t1=q(document.getElementById(x1.getId()+"_cellLayoutDiv"));U.getWidthFromStyle(t1);if(y1&&y1.length>0){A1=y1[w1].iWidth;B1=parseInt(u1.css("padding-left"))||0;C1=parseInt(u1.css("padding-right"))||0;D1=parseInt(u1.css("border-left-width"))||0;E1=parseInt(u1.css("border-right-width"))||0;z1=A1-B1-C1-D1-E1;t1.css("width",z1+"px");F1=q(t1.find("td")[1]).outerWidth();G1=q(t1.find("td")[0]);B1=parseInt(G1.css("padding-left"))||0;C1=parseInt(G1.css("padding-right"))||0;v1=G1.find("#"+q.sap.encodeCSS(x1.getId()+"_contentDiv"));H1=z1-B1-C1-F1;v1.css("width",H1+"px");}}}}function _(){var j=r.getRenderColCnt();var t1=r.getRenderRowCnt();var u1=r.getRenderStartRow();var v1=r.getRowCnt();var w1=c.getNewLinesCnt();var x1=0;var i=0;if(c.isNewLinesTop()){if(u1<w1){for(x1=u1;x1<w1;x1++){$(x1,j);}}}else if(c.isNewLinesBottom()){var y1=(u1+t1)-(v1-w1);if(y1>0){var z1=u1+t1-1;for(i=0;i<y1;i++){$(z1,j);z1--;}}}}this.adjustRowHeights=function(j,t1){if(!t1.hasContent()||!j.hasContent()){return;}var u1=h.getElement(j.getId());var v1=h.getElement(t1.getId());j.calculateRowGranularity();t1.calculateRowGranularity();var w1=j.measureRowGranularityCells();var x1=t1.measureRowGranularityCells();var i=0;var y1;for(i=j.getRenderStartRow();i<w1.length;i++){y1=Math.max(w1[i]||0,x1[i]||0);w1[i]=y1;x1[i]=y1;}var z1=t1.isColHeaderArea()?t1.getLevelCells():null;var A1=j.applyRowHeightsToGranularityCells(w1,z1);A1=A1||t1.applyRowHeightsToGranularityCells(x1,z1);if(A1===true&&w&&w.bHasHScrollbar===true&&!c.getPropertyBag().isPixelScrolling()){if(p){c.setScrollInvalidate(A1);}}var B1=L(u1);var C1=L(v1);d1(j,u1,B1);d1(t1,v1,C1);u1.replaceWith(B1);v1.replaceWith(C1);u1=q(document.getElementById(j.getId()));v1=q(document.getElementById(t1.getId()));e1(j,u1);e1(t1,v1);if(F){a1(j);a1(t1);}h.addElement(j.getId(),q(document.getElementById(j.getId())));h.addElement(t1.getId(),q(document.getElementById(t1.getId())));};function a1(i){var j=i.getCellsWithLineBreakTexts();var t1=0;var u1=0;var v1=0;var w1=0;var x1=0;var y1=0;var z1=null;var A1=null;if(j){v1=i.getRenderStartRow();w1=v1+i.getRenderRowCnt()-1;x1=i.getRenderStartCol();y1=x1+i.getRenderColCnt()-1;for(t1=v1;t1<=w1;t1++){for(u1=x1;u1<=y1;u1++){z1=i.getCell(t1,u1);if(z1){z1=j[z1.getId()];if(z1){A1=q(document.getElementById(z1.getId()+"_contentDiv"));if(A1&&A1.length>0){A1.css("height",A1.outerHeight()+"px");}}}}}}}function b1(j,t1,u1,v1){var i=0;var w1=j.getColGranularity();var x1=null;var y1=null;var z1=null;var A1=null;var B1=0;for(i=0;i<w1.length;i++){x1=w1[i];if(x1){if(v1===true){if(!j.isFixedColWidthSet(x1.iCol)){continue;}}y1=t1.find("#"+q.sap.encodeCSS(x1.sId));z1=u1.find("#"+q.sap.encodeCSS(x1.sId));B1=i1(y1,x1.iWidth,j.getCell(x1.iRow,x1.iCol));var C1=sap.ui.getCore().getControl(x1.sId);if(C1.isEntryEnabled()&&j.isRowHeaderArea()){A1=q(z1.find("#"+q.sap.encodeCSS(x1.sId+"_cellLayoutDiv")));}else{A1=q(z1.find("#"+q.sap.encodeCSS(x1.sId+"_contentDiv")));}A1.width(B1);}}}function c1(j,t1,u1){var i=0;var v1=j.getColGranularity();var w1=null;var x1=null;var y1=null;var z1=0;var A1={};for(i=0;i<v1.length;i++){w1=v1[i];if(w1){if(u1===true){if(!j.isFixedColWidthSet(w1.iCol)){continue;}}x1=t1.find("#"+q.sap.encodeCSS(w1.sId));z1=x1.outerWidth();if(z1>w1.iWidth){if(!y1){y1=L(t1);}h1(j,t1,y1,w1,A1);}}}if(y1){t1.replaceWith(y1);}}function d1(j,t1,u1){var i=0;var v1=j.getRowGranularity();var w1=null;var x1=null;var y1=null;var z1=null;var A1=0;for(i=0;i<v1.length;i++){w1=v1[i];if(w1){x1=t1.find("#"+q.sap.encodeCSS(w1.sId));y1=u1.find("#"+q.sap.encodeCSS(w1.sId));z1=y1.parent();A1=j1(x1,w1.iHeight);z1.height(A1);}}}function e1(j,t1){var i=0;var u1=j.getRowGranularity();var v1=null;var w1=null;var x1=0;var y1=null;var z1={};for(i=0;i<u1.length;i++){v1=u1[i];if(v1){w1=t1.find("#"+q.sap.encodeCSS(v1.sId));var A1=w1.parent();x1=A1.outerHeight();if(x1>v1.iHeight){if(!y1){y1=L(t1);}g1(j,t1,y1,v1,z1);}}}if(y1){t1.replaceWith(y1);}}function f1(i,j){var t1=0;if(u){var u1=i.find("table");if(u1===null||u1.length===0){t1=k1(i,j);}}else{t1=k1(i,j);}return t1;}function g1(j,t1,u1,v1,w1){var x1=j.getRenderStartCol()+j.getRenderColCnt();var y1=0;var z1=null;var A1=0;var i=0;var B1=j.getCalculatedRowHeights();var C1=null;var D1=null;var E1=null;var F1=0;var G1=0;var H1;var I1;for(y1=j.getRenderStartCol();y1<x1;y1++){z1=j.getCellWithColSpan(v1.iRow,y1);if(!z1){z1=j.getCellWithRowSpan(v1.iRow,y1);if(z1&&(y1<v1.iCol)&&z1.getEffectiveRowSpan()>1){if(!w1[z1.getId()]){w1[z1.getId()]=z1;}else{z1=null;}}}if(z1){D1=t1.find("#"+q.sap.encodeCSS(z1.getId()));E1=u1.find("#"+q.sap.encodeCSS(z1.getId()));if(D1.length>0){A1=0;G1=u?z1.getHtmlIE8RowSpan():z1.getEffectiveRowSpan();H1=j.getRenderRowCnt()-(Math.max(z1.getRow(),j.getRenderStartRow())-j.getRenderStartRow());I1=Math.min(H1,G1);for(i=0;i<I1;i++){A1+=B1[v1.iRow+i]||0;}F1=f1(D1,A1);C1=q(E1.find("#"+q.sap.encodeCSS(z1.getId()+"_contentDiv")));C1.css("line-height",F1+"px");if(z1.getEffectiveRowSpan()>1){w1[z1.getId()]=z1;}}}}}function h1(j,t1,u1,v1,w1){var x1=0;var y1=null;var z1=null;var A1=null;var B1=null;var C1=0;var D1=0;var i=0;var E1=j.getCalculatedColWidths();var F1;var G1;var H1;var I1=j.getRenderStartRow()+j.getRenderRowCnt();for(x1=j.getRenderStartRow();x1<I1;x1++){y1=j.getCellWithRowSpan(x1,v1.iCol);if(!y1){y1=j.getCellWithColSpan(x1,v1.iCol);if(y1&&(x1<v1.iRow)&&y1.getEffectiveColSpan()>1){if(!w1[y1.getId()]){w1[y1.getId()]=y1;}else{y1=null;}}}if(y1){if(w1[y1.getId()]){continue;}z1=t1.find("#"+q.sap.encodeCSS(y1.getId()));A1=u1.find("#"+q.sap.encodeCSS(y1.getId()));if(z1.length>0){D1=0;F1=y1.getEffectiveColSpan();G1=j.getRenderColCnt()-(Math.max(y1.getCol(),j.getRenderStartCol())-j.getRenderStartCol());H1=Math.min(G1,F1);for(i=0;i<H1;i++){D1+=E1[v1.iCol+i]||0;}C1=i1(z1,D1,y1);if(y1.isEntryEnabled()&&j.isRowHeaderArea()){B1=q(A1.find("#"+q.sap.encodeCSS(y1.sId+"_cellLayoutDiv")));}else{B1=q(A1.find("#"+q.sap.encodeCSS(y1.getId()+"_contentDiv")));}B1.width(C1);if(y1.getEffectiveColSpan()>1){w1[y1.getId()]=y1;}}}}}function i1(i,j,t1){var u1=parseInt(i.css("padding-left"))||0;var v1=parseInt(i.css("padding-right"))||0;var w1=parseInt(i.css("border-left-width"))||0;var x1=parseInt(i.css("border-right-width"))||0;var y1=0;var z1=0;if(t1!==null&&t1.isEntryEnabled()){if(t1.isEntryEnabled()&&t1.getArea().isRowHeaderArea()){var A1=q(i.find("#"+q.sap.encodeCSS(t1.getId()+"_cellLayoutDiv")));}else{A1=i.find("#"+q.sap.encodeCSS(t1.getId()+"_contentDiv"));}y1=parseInt(A1.css("border-left-width"))||0;z1=parseInt(A1.css("border-right-width"))||0;}var B1=Math.max(1,j-u1-v1-w1-x1-y1-z1);return B1;}function j1(i,j){var t1=q(i).parent();var u1=parseInt(t1.css("border-top-width"),10)||0;var v1=parseInt(t1.css("border-bottom-width"),10)||0;var w1=j+u1+v1;return w1;}function k1(i,j){var t1=parseInt(i.css("padding-top"))||0;var u1=parseInt(i.css("padding-bottom"))||0;var v1=parseInt(i.css("border-top-width"))||0;var w1=parseInt(i.css("border-bottom-width"))||0;var x1=j-t1-u1-v1-w1;return x1;}this.determineHeaderScrollbarVisible=function(){if(w){var i=0;var j=null;var t1=null;var u1=false;if(d.getColCnt()>0){i=m.getAreaSize(d).iWidth;t1=q(document.getElementById(c.getId()+"_dimHeaderArea_container"));j=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}if(i===0){if(r.getColCnt()>0){i=m.getAreaSize(r).iWidth;t1=q(document.getElementById(c.getId()+"_rowHeaderArea_container"));j=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}}if(i>0){u1=(t1.outerWidth()>j.outerWidth());}w.bHasHHeaderScrollbar=u1;}if(!w||!w.bHasHHeaderScrollbar){c.setHeaderHScrolling(false);}};this.determineDefaultScrollbarsVisible=function(){w={};var i=m.getAreaSize(d);var j=m.calculateRenderSize();var t1=m.getRenderSizeDivSize(c);var u1=c.getContentWidth();var v1=c.getContentHeight();var w1=m.getBrowserScrollbarWidth();var x1=null;var y1=b.getRenderColCnt()===b.getColCnt();var z1=b.getRenderRowCnt()===b.getRowCnt();w.bHasHScrollbar=((j.iWidth>u1||!y1)&&t1.iWidth>i.iWidth);w.bHasVScrollbar=((j.iHeight>v1||!z1)&&t1.iHeight>i.iHeight);if(w.bHasHScrollbar&&!w.bHasVScrollbar){x1=m.getRenderSizeDivBorders();if(v1<=j.iHeight+w1+x1.borders.iBottomBorderWidth+x1.borders.iTopBorderWidth){w.bHasVScrollbar=true;}}else if(!w.bHasHScrollbar&&w.bHasVScrollbar){x1=m.getRenderSizeDivBorders();if(u1<=j.iWidth+w1+x1.borders.iRightBorderWidth+x1.borders.iLeftBorderWidth){w.bHasHScrollbar=true;}}};this.determineScrollbarsVisible=function(){this.determineDefaultScrollbarsVisible();this.determineHeaderScrollbarVisible();};this.setAdjustFrameDivs=function(i){x=i;};this.removeOuterDivBorders=function(){var i=q(q.sap.byId(c.getId()+"_renderSizeDiv"));i.css("border-bottom-width","");i.css("border-top-width","");i.css("border-left-width","");i.css("border-right-width","");};this.setDivSizeValidity=function(){y=!c.getRowHeaderArea().hasLoadingPages()&&!c.getColumnHeaderArea().hasLoadingPages();};this.calculateRenderSizeDivSize=function(){if(x||!y){var i=m.calculateRenderSize(true);var j=q(q.sap.byId(c.getId()+"_renderSizeDiv"));var t1=m.getRenderSizeDivBorders(j);if(z!==-1){t1.borders.iBottomBorderWidth=z;}var u1=c.getContentWidth()-t1.borders.iLeftBorderWidth-t1.borders.iRightBorderWidth;var v1=i.iWidth;j.width(Math.min(u1,v1)+"px");var w1=c.getContentHeight()-t1.borders.iBottomBorderWidth-t1.borders.iTopBorderWidth;var x1=i.iHeight;j.height(Math.min(w1,x1)+"px");}};this.adjustRenderSizeDivSize=function(){if(x||!y){var i=q(q.sap.byId(c.getId()+"_renderSizeDiv"));var j=m.getRenderSizeDivBorders(i);if(z!==-1){j.borders.iBottomBorderWidth=z;}var t1=m.getRenderSizeDivSize().iHeight;if(z!==-1){t1+=z;}var u1=m.getRenderSizeDivSize().iWidth;var v1=c.getContentHeight();if(w.bHasHScrollbar||w.bHasHHeaderScrollbar){v1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===R.RENDERMODE_COMPACT){var w1=(w.bHasHScrollbar||w.bHasHHeaderScrollbar)?m.getBrowserScrollbarWidth():0;var x1=c.getPropertyBag().getToolbarHeight();var y1=t1+w1+j.borders.iBottomBorderWidth+j.borders.iTopBorderWidth+x1;var z1=v1+w1+x1;if(z1>=y1){v1=y1;var t=h.getElement(c.getId());t.css("height",v1+"px");if(z===-1){z=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}}if(t1>=v1){if(z===-1){z=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}var A1=Math.min(t1,v1);i.css("height",A1);var B1=c.getContentWidth();if(w.bHasVScrollbar){B1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===R.RENDERMODE_COMPACT){var C1=w.bHasVScrollbar?m.getBrowserScrollbarWidth():0;var D1=u1+C1+j.borders.iLeftBorderWidth+j.borders.iRightBorderWidth;var E1=B1+C1;if(E1>=D1){B1=D1;t=h.getElement(c.getId());t.css("width",B1+"px");i.css("border-right-width","0px");}}if(u1>=B1){i.css("border-right-width","0px");}var F1=Math.min(u1,B1);i.css("width",F1);this.adjustGlassPaneSize();}};this.adjustGlassPaneSize=function(){var j=c.getGlassPane();var i=c.getRenderSizeDiv();j.css("width",i.outerWidth()+"px");j.css("height",i.outerHeight()+"px");};this.renderScrollbars=function(){this.determineScrollbarsVisible();if(w.bHasHScrollbar||w.bHasVScrollbar||w.bHasHHeaderScrollbar){if(!p){p=k.getScrollManager();}if(w.bHasHHeaderScrollbar){H=k.getHeaderScrollManager();}if(s){s.destroy();s=null;}s=new S(c,e,m,h);s.renderScrollbars(w);s.attachHandlers(p.hScrollHandler,p.vScrollHandler,w.bHasHHeaderScrollbar?H.hScrollHandler:null);l1();}else{p=null;}};function l1(){var i=0;for(i=0;i<n.length;i++){n[i]();}}this.setScrollbarSteps=function(){if(s){s.setScrollbarSteps();}};this.adjustScrollDivSizes=function(){var i=q.sap.byId(c.getId()+"_lowerLeft");var j=i.outerWidth();var t1=m.getRenderSizeDivSize();var u1=(t1.iWidth-j)+"px";var v1=q.sap.byId(c.getId()+"_lowerRight_scrollDiv");v1.width(u1);var w1=q.sap.byId(c.getId()+"_upperRight_scrollDiv");w1.width(u1);var x1=q.sap.byId(c.getId()+"_upperLeft");var y1=x1.outerHeight();if(!y1){var z1=q.sap.byId(c.getId()+"_upperRight");y1=z1.outerHeight();}var A1=(t1.iHeight-y1)+"px";v1.height(A1);var B1=q.sap.byId(c.getId()+"_lowerLeft_scrollDiv");B1.height(A1);};this.appendLeftCols=function(i,j){var t1=Math.max(0,i.getRenderStartCol()-j);var u1=Math.max(0,i.getRenderStartCol()-1);var v1=j;if(t1===u1){v1=1;}var w1=i.getRenderStartRow();var x1=w1+i.getRenderRowCnt()-1;var y1=null;var z1=0;var A1=0;var B1=0;var C1=q(document.getElementById(i.getId()));var D1=C1.children("tbody");if(D1.length===0){C1.append("<tbody></tbody>");D1=C1.children("tbody");for(B1=w1;B1<=x1;B1++){D1.append("<tr></tr>");}}var E1=D1.children("tr");for(B1=w1;B1<=x1;B1++){var F1=E1[z1];A1=0;for(var G1=t1;G1<=u1;G1++){if(A1===0){y1=i.getCellWithColSpan(B1,G1);}else{y1=i.getCell(B1,G1);}if(y1){var H1=y1.getColSpan();if(H1>1){var I1=y1.getEffectiveColSpan();var J1=Math.min(v1,(i.getRenderStartCol()-t1));var K1=I1-(J1-A1);if(K1>0){var L1=q(F1).find("> :first-child");L1.remove();}}e.renderControl(y1);}A1++;}var M1=q(q(E1[z1])).html();e.write(M1);e.flush(F1);z1++;}var N1=i.getRenderColCnt();var O1=u1-t1+1;i.setRenderColCnt(N1+O1);i.setRenderStartCol(t1);};this.appendTopRows=function(t1,u1){var v1=Math.max(0,t1.getRenderStartRow()-u1);var w1=Math.max(0,t1.getRenderStartRow()-1);var x1=u1;if(v1===w1){x1=1;}var y1=t1.getRenderStartCol();var z1=y1+t1.getRenderColCnt()-1;var A1=q(document.getElementById(t1.getId()));var B1=A1.children("tbody");if(B1.length===0){A1.append("<tbody></tbody>");B1=A1.children("tbody");}var C1=B1.html();var D1=[];var E1=0;var F1=null;if(!c.getPropertyBag().isDebugMode()){B1.hide();}for(var G1=v1;G1<=w1;G1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");for(var H1=y1;H1<=z1;H1++){F1=null;if(E1===0){F1=t1.getCellWithRowSpan(G1,H1);}else{F1=t1.getCell(G1,H1);}if(F1){var I1=F1.getRowSpan();if(I1>1){var J1=F1.getEffectiveRowSpan();var K1=J1-(x1-E1);if(K1>0){D1.push(H1);}}e.renderControl(F1);}}e.write("</tr>");E1++;}var L1=[];if(D1.length>0){var M1=q(document.getElementById(t1.getId())).children("tbody").children("tr");var N1=q(M1[0]);var i=0;for(i=0;i<D1.length;i++){F1=N1.find("> :nth-child("+(D1[i]+1)+")");if(F1.length>0){var O1=F1.attr("id");L1.push(O1);}}for(var j=0;j<L1.length;j++){var P1=N1.find("#"+q.sap.encodeCSS(L1[j]));P1.remove();}e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");e.write(N1.html()+"</tr>");for(i=1;i<M1.length;i++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");e.write(q(M1[i]).html()+"</tr>");}}else{e.write(C1);}t1.setRenderStartRow(v1);t1.setRenderRowCnt(t1.getRenderRowCnt()+w1-v1+1);e.flush(B1[0]);B1.show();};function m1(i,j,t1){var u1=0;var v1=j.getScrollPosition();var w1={};w1.parameters={};w1.oSource=j;w1.parameters.oldScrollPos=v1;if(c.getPropertyBag().isPixelScrolling()||t1){u1=Math.max(0,Math.min(i,parseInt(j.getContentSize(),10)));w1.parameters.action="Drag";}else{u1=Math.max(0,Math.min(i,j.getSteps()));w1.parameters.action="STEP";}w1.getParameters=function(){return this.parameters;};w1.parameters.newScrollPos=u1;w1.parameters.forward=(u1-v1)>0;return w1;}this.scrollHorizontal=function(i){if(c.getHScrollbar()){var j=m1(i,c.getHScrollbar());c.getHScrollbar().setScrollPosition(j.getParameters().newScrollPos);p.hScrollHandler(j,true);}};this.scrollVertical=function(i,j){if(c.getVScrollbar()){var t1=m1(i,c.getVScrollbar());c.getVScrollbar().setScrollPosition(t1.getParameters().newScrollPos);var u1=false;if(!j){u1=true;}p.vScrollHandler(t1,u1);}};this.scrollHeaderHorizontal=function(i){var j=c.getHorizontalHeaderScrollbar();if(j){var t1=m1(i,j,true);j.setScrollPosition(t1.getParameters().newScrollPos);H.hScrollHandler(t1);}};this.getMeasuringHelper=function(){return m;};this.reset=function(i){k.reset();if(!i){k.clearSavedColWidths();}p=null;m.reset();if(s){s.destroy();s=null;}n=[];y=false;z=-1;};this.adjustScrollPositions=function(i){if(w.bHasHScrollbar||w.bHasVScrollbar){if(v&&c.getPropertyBag().isPixelScrolling()){var j=0;var t1=k.getSavedVScrollInfo();if(t1){var b=c.getDataArea();var u1=m.getAreaHeight(b);var v1=b.getRowCnt();var w1=Math.round(u1/v1);j=t1.iPos*w1;}p.setVScrollPos(j);}var x1=undefined;var y1=undefined;if(k){if(k.hasSavedInfo()){var z1=k.getSavedHScrollInfo();if(z1){x1=z1.bScrolledToEnd;}z1=k.getSavedVScrollInfo();if(z1){y1=z1.bScrolledToEnd;}}}p.moveScrollbars(w,i,x1,y1);v=false;}if(c.isHeaderHScrolling()===true){if(k&&k.hasSavedInfo()===true){H.setHScrollData(k.getHeaderScrollData());H.moveScrollbars();}}};this.hasCrosstabSizeChanged=function(){return m.hasCrosstabSizeChanged(true);};this.getTableDivValues=function(){return m.getTableDivBordersAndPadding();};function n1(){var t=c.getTableDiv();var i=o.getId();var j=r.getId();var t1=d.getId();var u1=b.getId();h.addElement(c.getId(),t);h.addElement(i,t.find("#"+q.sap.encodeCSS(i)));h.addElement(j,t.find("#"+q.sap.encodeCSS(j)));h.addElement(t1,t.find("#"+q.sap.encodeCSS(t1)));h.addElement(u1,t.find("#"+q.sap.encodeCSS(u1)));}this.showLoadingIndicator=function(){if(!l&&!I){l=setTimeout(o1,300);}else if(I){o1();}};function o1(){I=true;var t=h.getElement(c.getId());t.addClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+q.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));var j=parseInt(i.css("width"),10);var t1=parseInt(i.css("height"),10);var u1=m.getRenderSizeDivSize(c);var v1=u1.iWidth/2-j/2;var w1=u1.iHeight/2-t1/2;i.css("top",w1+"px");i.css("left",v1+"px");i.css("visibility","visible");}function p1(){if(l){clearTimeout(l);l="";}}this.hideLoadingIndicator=function(){p1();var t=h.getElement(c.getId());t.removeClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+q.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));if(i&&i[0]){i.css("visibility","hidden");}I=false;};this.showLoadingVisualization=function(){if(b.hasLoadingPages()){this.showLoadingIndicator();}else{this.hideLoadingIndicator();}};this.moveScrollDivs=function(){if(p){if(w){if(w.bHasHScrollbar){p.positionHScrollDiv();}if(w.bHasVScrollbar){p.positionVScrollDiv();}}}};this.getCrossRequestManager=function(){return k;};this.registerNewScrollbarsNotification=function(i){if(q.inArray(i,n)===-1){n.push(i);}};this.checkScrollbarSize=function(){if(w.bHasVScrollbar){var i=q(document.getElementById(c.getId()+"_upperRightPad"));var j=null;if(c.hasDimensionHeaderArea()){j=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else if(c.hasColHeaderArea()){j=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}if(i!==null&&i.length>0&&j!==null&&j.length>0){var t1=j.outerHeight();if(t1!==i.outerHeight()){if(s){s.adjustVScrollbarHeight(t1);}}}}if(w.bHasHScrollbar){var u1=q(document.getElementById(c.getId()+"_lowerLeftPad"));var v1;if(c.hasRowHeaderArea()){v1=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}else{v1=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}var w1=v1.outerWidth();if(w1!==u1.outerWidth()){if(s){s.adjustHScrollbarWidth(w1);}}}};this.updateRenderingOfInputCellAfterCheck=function(i){var j=q(document.getElementById(i.getId()));if(j.length>0){var t1=C.getCompleteStyleName(R.STYLE_INVALID_VALUE,i.getCellType());if(i.hasStyle(R.STYLE_INVALID_VALUE)===true){j.addClass(t1);}else{j.removeClass(t1);}var u1=j.find("#"+q.sap.encodeCSS(i.getId()+"_contentDiv"));u1.html(i.getText());}};this.updateHeaderScrollbarSizes=function(){if(s){s.setHorizontalHeaderScrollbarSteps();s.adjustHorizontalHeaderScrollbarContainerSize();}};function q1(i,j){var t1=q(document.getElementById(c.getId()+i));if(t1.length>0){if(j===true){t1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").addClass("sapzencrosstab-removeRightBorder");}else{t1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").removeClass("sapzencrosstab-removeRightBorder");}}}function r1(j,i){if(j&&j.length>0){j.addClass("sapzencrosstab-lowerScrollHeaderSeparator");q1("_rowHeaderArea",true);}if(i&&i.length>0){i.addClass("sapzencrosstab-upperScrollHeaderSeparator");q1("_dimHeaderArea",true);}}function s1(j,i){if(j&&j.length>0){j.removeClass("sapzencrosstab-lowerScrollHeaderSeparator");q1("_rowHeaderArea",false);}if(i&&i.length>0){i.removeClass("sapzencrosstab-upperScrollHeaderSeparator");q1("_dimHeaderArea",false);}}this.getLeftScrollDivs=function(){var j=null;var i=null;if(c.hasRowHeaderArea()){j=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}if(c.hasDimensionHeaderArea()){i=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}return{"oJqRowHeaderDiv":j,"oJqDimHeaderDiv":i};};this.determineUnrestrictedRightAreaWidth=function(){var i=0;var j;var t1;var u1=1;if(c.hasDimensionHeaderArea()){j=c.getDimensionHeaderArea();}else if(c.hasRowHeaderArea()){j=c.getRowHeaderArea();}if(j&&j.getRenderColCnt()>0){t1=c.getTableCellWithSpans(0,j.getRenderColCnt()-1);if(t1){u1=parseInt(q(document.getElementById(t1.getId())).css("border-right-width"),10);}}if(b){b.saveData();}if(o){o.saveData();}this.renderRightAreas(true);this.determineDefaultScrollbarsVisible();i=this.getRightAreaContainerWidth()+(w.bHasVScrollbar?m.getBrowserScrollbarWidth():0)+u1;if(b){q(document.getElementById(b.getId())).find("tbody").empty();b.restoreData();}if(o){q(document.getElementById(o.getId())).find("tbody").empty();o.restoreData();}return i;};this.calculateLeftAreaHeaderWidth=function(i,j,t1){var u1=0;var v1=c.getPropertyBag().getMaxHeaderWidth();var w1=c.getPropertyBag().getUserHeaderWidth();var x1;var y1=Math.round(i/2.0);if(v1>0){if(w1>0){u1=Math.min(v1,w1);}else{u1=Math.min(v1,j);}}else{u1=w1;}if(u1>=i){u1=0;}if(u1>=j){u1=0;}if(j+t1>i){if(this.hasRightArea()){if(u1===0){if(t1<=y1){x1=c.getRenderSizeDiv();u1=i-t1-parseInt(x1.css("border-right-width"),10)-parseInt(x1.css("border-left-width"),10)-1;}else if(j<=y1){u1=j;}else{u1=y1;}}}else{u1=i;}}else{u1=0;}u1=this.limitHeaderWidth(u1);return u1;};this.enableHeaderResizeHandle=function(i){var j;j=q(document.getElementById(c.getId()+"_headerResizeHandle"));if(j&&j.length>0){j.css("visibility",i?"visible":"hidden");}};this.forceHeaderWidth=function(){var j=null;var i=null;var t1=0;var u1=0;var v1=0;var w1=0;var x1=null;if(c.hasRowHeaderArea()===false&&c.hasDimensionHeaderArea()===false){return;}x1=this.getLeftScrollDivs();j=x1.oJqRowHeaderDiv;i=x1.oJqDimHeaderDiv;t1=this.getLeftAreaContainerWidth();if(this.hasRightArea()){u1=this.determineUnrestrictedRightAreaWidth();}w1=c.getContentWidth();v1=this.calculateLeftAreaHeaderWidth(w1,t1,u1);if(v1>0){this.setDivWidth(j,v1);this.setDivWidth(i,v1);c.setHeaderHScrolling(true);E=v1;r1(j,i);this.enableHeaderResizeHandle(true);}else{c.setHorizontalHeaderScrollbar(null);c.setHeaderHScrolling(false);E=0;s1(j,i);this.enableHeaderResizeHandle(false);c.getUtils().sendClientScrollPosUpdate(0,undefined,undefined,undefined,true);c.getPropertyBag().setUserHeaderWidth(0);this.sendHeaderLimit("N0",true);}};this.hasRightArea=function(){return c.hasDataArea()||c.hasColHeaderArea();};this.hasLeftArea=function(){return c.hasDimensionHeaderArea()||c.hasRowHeaderArea();};this.getLeftAreaContainerWidth=function(){var i=0;var j=null;if(c.hasDimensionHeaderArea()===true){j=q(document.getElementById(c.getId()+"_dimHeaderArea_container"));i=j.outerWidth();}else if(c.hasRowHeaderArea()===true){j=q(document.getElementById(c.getId()+"_rowHeaderArea_container"));i=j.outerWidth();}return i;};this.getRightAreaContainerWidth=function(){var i=0;var j=null;if(c.hasColHeaderArea()===true){j=q(document.getElementById(c.getId()+"_colHeaderArea_container"));i=j.outerWidth();}else if(c.hasDataArea()===true){j=q(document.getElementById(c.getId()+"_dataArea_container"));i=j.outerWidth();}return i;};this.getSectionWidth=function(){var i=this.getLeftAreaContainerWidth();var j=this.getRightAreaContainerWidth();var t1=null;var u1=null;var v1=0;var w1=0;if(c.hasDimensionHeaderArea()){t1=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else if(c.hasRowHeaderArea()){t1=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}v1=U.getWidthOfMarginBorderPadding(t1);if(c.hasColHeaderArea()){u1=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}else if(c.hasDataArea()){u1=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));}w1=U.getWidthOfMarginBorderPadding(u1);var x1=i+j+v1+w1;return x1;};this.updateHeaderResizeDiv=function(){var j=q(document.getElementById(c.getId()+"_headerResizeHandle"));var i=0;var t1=c.getPropertyBag().getMaxHeaderWidth();if(j&&j.length>0){i=E;if(isNaN(i)||!i){if(t1>0){i=Math.min(i,t1);}var u1=this.getLeftAreaContainerWidth();var v1=q(document.getElementById(c.getId()+"_renderSizeDiv")).outerWidth();var w1=j.outerWidth();i=(u1<=v1)?(u1):(v1-w1);}if(c.getPropertyBag().isRtl()){j.css("right",i+"px");}else{j.css("left",i+"px");}}};this.getIntHeaderLimit=function(i){var j;var t1;if(i.indexOf("N")===0){t1=i.substring(1);}else{t1=i;}j=parseInt(t1,10);return j;};this.sendHeaderLimit=function(i,j){var t1=c.getUserHeaderWidthCommand();var u1=0;u1=this.getIntHeaderLimit(i);if(B===u1){return;}if(t1&&t1.length>0){B=u1;k.saveColWidths();t1=t1.replace("__HEADER_WIDTH__",i);c.getUtils().executeCommandAction(t1,j);}};this.getHeaderScrollManager=function(){return H;};this.limitHeaderWidth=function(i){var j=c.getPropertyBag().getMaxHeaderWidth();var t1=0;if(j>0&&i>0){t1=Math.min(j,i);}else{t1=i;}return t1;};this.setDivWidth=function(j,i){var t1="";if(j&&j.length>0){if(!i){t1="100%";}else{t1=i+"px";}j.css("width",t1);}};this.renderLeftAreas=function(){this.renderDimensionHeaderArea();this.setUserColWidths(c.getDimensionHeaderArea());this.renderRowHeaderArea(c.getRowHeaderArea().getRenderStartRow());this.setUserColWidths(c.getRowHeaderArea());this.adjustColWidths(c.getDimensionHeaderArea(),c.getRowHeaderArea());};this.renderRightAreas=function(i){var j=o.getRenderStartCol();if(i===true){j=0;}this.renderColHeaderArea(j,i);this.setUserColWidths(c.getColumnHeaderArea());this.renderDataArea();this.setUserColWidths(c.getDataArea());this.adjustColWidths(c.getColumnHeaderArea(),c.getDataArea());};this.renderCrosstabAreas=function(){var i=c.isHeaderScrollingConfigured();this.renderLeftAreas();if(i===true&&!c.isPreparedDom()){this.forceHeaderWidth();}this.renderRightAreas();this.adjustRowHeights(c.getDimensionHeaderArea(),c.getColumnHeaderArea());this.adjustRowHeights(c.getRowHeaderArea(),c.getDataArea());};this.getScrollManager=function(){return p;};this.getScrollbarVisibility=function(){return w;};};return sap.zen.crosstab.rendering.RenderEngine;});
