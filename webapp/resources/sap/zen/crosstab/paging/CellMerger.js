/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.define(["jquery.sap.global","sap/zen/crosstab/paging/PagingConstants"],function(q,P){"use strict";q.sap.declare("sap.zen.crosstab.paging.CellMerger");sap.zen.crosstab.paging.CellMerger=function(p){var r=null;var c=null;this.mergeRowHeaderCells=function(l){r=p.getCrosstab().getRowHeaderArea();var C=0;var M=null;for(C=0;C<r.getColCnt();C++){M=d(l,C);if(M){b(M,l,C);}M=a(l,C);if(M){m(M,l,C);}}};function m(M,l,C){var n=l-1;var o=null;var u=null;var R=null;var s=0;var t=M.getRowSpan();var S=p.getHeaderTileInfo(r,n).iStatus;while(S===P.PAGE_STATUS_LOADED&&n>=0&&!u){R=g(n);for(s=R.iMaxRowIndex;s>=R.iMinRowIndex&&!u;s--){o=r.getCellDirect(s,C);if(o){if(o.getMergeKey()){if(M.getMergeKey()===o.getMergeKey()){if(s===R.iMaxRowIndex||o.getRowSpan()>1){u=o;}else{return;}}else{return;}}}}n--;S=p.getHeaderTileInfo(r,n).iStatus;}if(u){k(M,u);u.setRowSpan(t+u.getRowSpan());r.insertCell(null,M.getRow(),M.getCol());}}function g(l){var R={};R.iMinRowIndex=l*p.getTileRowCnt();R.iMaxRowIndex=(l+1)*p.getTileRowCnt()-1;R.iMaxRowIndex=Math.min(R.iMaxRowIndex,r.getRowCnt()-1);return R;}function a(l,C){var t=null;var I=g(l);var R=0;var o=null;var M="";for(R=I.iMinRowIndex;R<=I.iMaxRowIndex&&!t;R++){o=r.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){t=o;}}}return t;}function b(M,l,C){var o=null;var F=0;var s="";var I=null;var S=p.getHeaderTileInfo(r,l+1).iStatus;if(S===P.PAGE_STATUS_LOADED){I=g(l+1);o=r.getCellDirect(I.iMinRowIndex,C);if(o){s=o.getMergeKey();if(s&&s===M.getMergeKey()){F=o.getRowSpan();r.insertCell(null,I.iMinRowIndex,C);k(o,M);}}}if(F){M.setRowSpan(M.getRowSpan()+F);}}function d(l,C){var B=null;var I=g(l);var R=0;var M="";var o=null;for(R=I.iMaxRowIndex;R>=I.iMinRowIndex&&!B;R--){o=r.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){B=o;}}}return B;}this.mergeColHeaderCells=function(l){c=p.getCrosstab().getColumnHeaderArea();var R=0;var M=null;for(R=0;R<c.getRowCnt();R++){M=h(l,R);if(M){f(M,l,R);}M=i(l,R);if(M){j(M,l,R);}}};function e(l){var C={};C.iMinColIndex=l*p.getTileColCnt();C.iMaxColIndex=(l+1)*p.getTileColCnt()-1;C.iMaxColIndex=Math.min(C.iMaxColIndex,c.getColCnt()-1);return C;}function f(M,l,R){var C=null;var F=0;var s="";var I=null;var S=p.getHeaderTileInfo(c,l+1).iStatus;if(S===P.PAGE_STATUS_LOADED){I=e(l+1);C=c.getCellDirect(R,I.iMinColIndex);if(C){s=C.getMergeKey();if(s&&s===M.getMergeKey()){F=C.getColSpan();c.insertCell(null,R,I.iMinColIndex);k(C,M);}}}if(F){M.setColSpan(M.getColSpan()+F);}}function h(l,R){var o=null;var I=e(l);var C=0;var M="";var n=null;for(C=I.iMaxColIndex;C>=I.iMinColIndex&&!o;C--){n=c.getCellDirect(R,C);if(n){M=n.getMergeKey();if(M){o=n;}}}return o;}function i(l,R){var L=null;var I=e(l);var C=0;var o=null;var M="";for(C=I.iMinColIndex;C<=I.iMaxColIndex&&!L;C++){o=c.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){L=o;}}}return L;}function j(M,l,R){var C=l-1;var o=null;var L=null;var n=null;var s=0;var t=M.getColSpan();var S=p.getHeaderTileInfo(c,C).iStatus;while(S===P.PAGE_STATUS_LOADED&&C>=0&&!L){n=e(C);for(s=n.iMaxColIndex;s>=n.iMinColIndex&&!L;s--){o=c.getCellDirect(R,s);if(o){if(o.getMergeKey()){if(M.getMergeKey()===o.getMergeKey()){if(s===n.iMaxColIndex||o.getColSpan()>1){L=o;}else{return;}}else{return;}}}}C--;S=p.getHeaderTileInfo(c,C).iStatus;}if(L){k(M,L);L.setColSpan(t+L.getColSpan());c.insertCell(null,M.getRow(),M.getCol());}}function k(s,t){var S=s.getStyleIdList();t.setStyleIdList(S);}};return sap.zen.crosstab.paging.CellMerger;});
