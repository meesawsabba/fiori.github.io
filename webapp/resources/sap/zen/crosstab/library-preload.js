//@ui5-bundle sap/zen/crosstab/library-preload.js
/*!
 * (c) Copyright 2010-2019 SAP SE or an SAP affiliate company.
 */
sap.ui.predefine('sap/zen/crosstab/BaseArea',["jquery.sap.global","sap/zen/crosstab/rendering/DataModel","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils"],function(q,D,R,U){"use strict";q.sap.declare("sap.zen.crosstab.BaseArea");
sap.zen.crosstab.BaseArea=function(c){"use strict";this.sAreaType="";this.sId="";this.oCrosstab=c;this.iRenderStartRow=0;this.iRenderRowCnt=0;this.iRenderStartCol=0;this.iRenderColCnt=0;this.bHasContent=false;this.fRenderCellCallback=null;this.oDataModel=new D(this);this.aColGranularity=[];this.aColWidths=[];this.aCalculatedColWidths=[];this.aTemporaryColWidths=[];this.aRowGranularity=[];this.aRowHeights=[];this.aCalculatedRowHeights=[];this.aTemporaryRowHeights=[];this.oColsWithSymbolException={};this.oColUserWidth={};this.aLevelCells=[];this.iLoadingPageCnt=0;this.bColGranularityCalculatedAndMeasured=false;this.oUserResizedCols={};this.oCellsWithLineBreakTexts=null;this.iMaxNumberOfLineBreaks=0;this.iSaveRenderStartRow=0;this.iSaveRenderRowCnt=0;this.iSaveRenderStartCol=0;this.iSaveRenderColCnt=0;this.aSaveColGranularity=[];this.aSaveColWidths=[];this.aSaveCalculatedColWidths=[];this.aSaveTemporaryColWidths=[];this.aSaveRowGranularity=[];this.aSaveRowHeights=[];this.aSaveCalculatedRowHeights=[];this.aSaveTemporaryRowHeights=[];this.oSaveColsWithSymbolException={};this.oSaveColUserWidth={};this.aSaveLevelCells=[];this.iSaveLoadingPageCnt=0;this.bSaveColGranularityCalculatedAndMeasured=false;this.oSaveUserResizedCols={};this.oSaveCellsWithLineBreakTexts=null;this.iSaveMaxNumberOfLineBreaks=0;};
sap.zen.crosstab.BaseArea.prototype.saveData=function(){this.iSaveRenderStartRow=this.iRenderStartRow;this.iSaveRenderRowCnt=this.iRenderRowCnt;this.iSaveRenderStartCol=this.iRenderStartCol;this.iSaveRenderColCnt=this.iRenderColCnt;this.aSaveColGranularity=this.aColGranularity.slice();this.aSaveColWidths=this.aColWidths.slice();this.aSaveCalculatedColWidths=this.aCalculatedColWidths.slice();this.aSaveTemporaryColWidths=this.aTemporaryColWidths.slice();this.aSaveRowGranularity=this.aRowGranularity.slice();this.aSaveRowHeights=this.aRowHeights.slice();this.aSaveCalculatedRowHeights=this.aCalculatedRowHeights.slice();this.aSaveTemporaryRowHeights=this.aTemporaryRowHeights.slice();this.oSaveColsWithSymbolException=q.extend({},this.oColsWithSymbolException);this.oSaveColUserWidth=q.extend({},this.oColUserWidth);this.aSaveLevelCells=this.aLevelCells.slice();this.iSaveLoadingPageCnt=this.iLoadingPageCnt;this.bSaveColGranularityCalculatedAndMeasured=this.bColGranularityCalculatedAndMeasured;this.oSaveUserResizedCols=q.extend({},this.oUserResizedCols);this.oSaveCellsWithLineBreakTexts=q.extend({},this.oCellsWithLineBreakTexts);this.iSaveMaxNumberOfLineBreaks=this.iMaxNumberOfLineBreaks;};
sap.zen.crosstab.BaseArea.prototype.restoreData=function(){this.iRenderStartRow=this.iSaveRenderStartRow;this.iRenderRowCnt=this.iSaveRenderRowCnt;this.iRenderStartCol=this.iSaveRenderStartCol;this.iRenderColCnt=this.iSaveRenderColCnt;this.aColGranularity=this.aSaveColGranularity;this.aColWidths=this.aSaveColWidths;this.aCalculatedColWidths=this.aSaveCalculatedColWidths;this.aTemporaryColWidths=this.aSaveTemporaryColWidths;this.aRowGranularity=this.aSaveRowGranularity;this.aRowHeights=this.aSaveRowHeights;this.aCalculatedRowHeights=this.aSaveCalculatedRowHeights;this.aTemporaryRowHeights=this.aSaveTemporaryRowHeights;this.oColsWithSymbolException=this.oSaveColsWithSymbolException;this.oColUserWidth=this.oSaveColUserWidth;this.aLevelCells=this.aSaveLevelCells;this.iLoadingPageCnt=this.iSaveLoadingPageCnt;this.bColGranularityCalculatedAndMeasured=this.bSaveColGranularityCalculatedAndMeasured;this.oUserResizedCols=this.oSaveUserResizedCols;this.oCellsWithLineBreakTexts=this.oSaveCellsWithLineBreakTexts;this.iMaxNumberOfLineBreaks=this.iSaveMaxNumberOfLineBreaks;};
sap.zen.crosstab.BaseArea.prototype.insertCell=function(c,r,C){if(c){var n=c.getNumberOfLineBreaks();if(n>this.iMaxNumberOfLineBreaks){this.iMaxNumberOfLineBreaks=n;}if(n>0){if(!this.oCellsWithLineBreakTexts){this.oCellsWithLineBreakTexts={};}this.oCellsWithLineBreakTexts[c.getId()]=c;}this.bHasContent=true;var m=this.oCrosstab.getUtils().getModelCoordinates(r,C,this.sAreaType);if(m.iCol===0){c.addStyle(R.STYLE_FIRST_IN_ROW);}if(m.iRow===0){c.addStyle(R.STYLE_FIRST_IN_COL);}if((m.iCol+c.getColSpan())===this.oCrosstab.getTotalCols()){c.addStyle(R.STYLE_LAST_IN_ROW);}if((m.iRow+c.getRowSpan())===this.oCrosstab.getTotalRows()){c.addStyle(R.STYLE_LAST_IN_COL);}}this.oDataModel.insertCell(c,r,C);};
sap.zen.crosstab.BaseArea.prototype.addHighlightingForCell=function(r,c){var C=this.oDataModel.getCellWithSpan(r,c);if(C){C.addStyle(R.STYLE_HIGHLIGHTED);var d=q(document.getElementById(C.getId()));if(this.isDataArea()){d.addClass("sapzencrosstab-DataCellHighlighted");}else{d.addClass("sapzencrosstab-HeaderCellHighlighted");}}};
sap.zen.crosstab.BaseArea.prototype.removeHighlightingForCell=function(r,c){var C=this.oDataModel.getCellWithSpan(r,c);if(C){C.removeStyle(R.STYLE_HIGHLIGHTED);var d=q(document.getElementById(C.getId()));if(this.isDataArea()){d.removeClass("sapzencrosstab-DataCellHighlighted");}else{d.removeClass("sapzencrosstab-HeaderCellHighlighted");}}};
sap.zen.crosstab.BaseArea.prototype.resetColGranularity=function(){this.aColGranularity=[];};
sap.zen.crosstab.BaseArea.prototype.resetRowGranularity=function(){this.aRowGranularity=[];};
sap.zen.crosstab.BaseArea.prototype.calculateColGranularity=function(){if(this.bColGranularityCalculatedAndMeasured===false){var r=0;var e=this.iRenderStartRow+this.iRenderRowCnt;var c=0;var E=this.iRenderStartCol+this.iRenderColCnt;this.aColGranularity=[];for(c=this.iRenderStartCol;c<E;c++){for(r=this.iRenderStartRow;r<e;r++){if(this.collectColGranularity(r,c,this)){break;}}}}};
sap.zen.crosstab.BaseArea.prototype.calculateRowGranularity=function(){var r=0;var e=this.iRenderStartRow+this.iRenderRowCnt;var c=0;var E=this.iRenderStartCol+this.iRenderColCnt;this.aRowGranularity=[];for(r=this.iRenderStartRow;r<e;r++){for(c=this.iRenderStartCol;c<E;c++){if(this.collectRowGranularity(r,c,this)){break;}}}};
sap.zen.crosstab.BaseArea.prototype.getCellForGranularity=function(r,c,t){var C=null;if(c===t.iRenderStartCol&&r===t.iRenderStartRow){C=t.oDataModel.getCellWithSpan(r,c);}else if(c===t.iRenderStartCol){C=t.oDataModel.getCellWithColSpan(r,c);}else if(r===t.iRenderStartRow){C=t.oDataModel.getCellWithRowSpan(r,c);}else{C=t.oDataModel.getCellDirect(r,c);}return C;};
sap.zen.crosstab.BaseArea.prototype.collectColGranularity=function(r,c,t){var C=t.getCellForGranularity(r,c,t);var i=-1;if(C){i=C.getEffectiveColSpan();var o=t.aColGranularity[c];if(o){if(i<o.iColSpan){o.sId=C.getId();o.iRow=r;o.iCol=c;o.iColSpan=i;o.iWidth=0;}}else{o={};o.sId=C.getId();o.iRow=r;o.iCol=c;o.iColSpan=i;o.iWidth=0;t.aColGranularity[c]=o;}}return i===1;};
sap.zen.crosstab.BaseArea.prototype.collectRowGranularity=function(r,c,t){var C=t.getCellForGranularity(r,c,t);var i=-1;var n=0;if(C){i=C.getEffectiveRowSpan();n=U.getNumberOfLineBreaks(C.getText());var o=t.aRowGranularity[r];if(o){if(i<o.iRowSpan||n>o.iNumberOfLineBreaks){o.sId=C.getId();o.iRow=r;o.iCol=c;o.iRowSpan=i;o.iHeight=0;o.isLevelCell=this.isColHeaderArea()&&C.getLevel&&C.getLevel()>-1;o.isEntryEnabled=false;o.iNumberOfLineBreaks=n;}}else{o={};o.sId=C.getId();o.iRow=r;o.iCol=c;o.iRowSpan=i;o.iHeight=0;o.isLevelCell=this.isColHeaderArea()&&C.getLevel&&C.getLevel()>-1;o.isEntryEnabled=false;o.iNumberOfLineBreaks=n;t.aRowGranularity[r]=o;}}return(i===1)&&(n===this.iMaxNumberOfLineBreaks);};
sap.zen.crosstab.BaseArea.prototype.measureColGranularityCells=function(){var c=0;var C=null;var d=null;var a=0;var w=0;var m=0;var i=0;var I;if(this.bColGranularityCalculatedAndMeasured===false){this.aColWidths=[];I=this.oCrosstab.getUtils().isMsIE();for(c=this.iRenderStartCol;c<this.aColGranularity.length;c++){C=this.aColGranularity[c];if(C){d=q.sap.byId(C.sId);if(d){a=d.outerWidth();if(I&&!d.data("IeFixApplied")){a=a+1;d.data("IeFixApplied",true);}w=Math.floor(a/C.iColSpan);m=a%C.iColSpan;for(i=0;i<C.iColSpan;i++){if(this.aCalculatedColWidths[c+i]&&!this.aTemporaryColWidths[c+i]){this.aColWidths[c+i]=this.aCalculatedColWidths[c+i];}else{if(i===C.iColSpan-1){w+=m;}if(this.aColWidths[c+i]){if(this.aColWidths[c+i]<w){this.aColWidths[c+i]=w;}}else{this.aColWidths[c+i]=w;}}}}}}if(U.hasEntries(this.oColsWithSymbolException)){var b=null;var e;for(var f in this.oColsWithSymbolException){if(Object.prototype.hasOwnProperty.call(this.oColsWithSymbolException,f)){b=this.oColsWithSymbolException[f];if(b===undefined||b===null||isNaN(b)===true){e=this.aColWidths[f];b=e+this.oCrosstab.getExceptionSymbolWidth();this.oColsWithSymbolException[f]=b;}this.aColWidths[f]=this.oColsWithSymbolException[f];}}}if(this.oColUserWidth&&U.hasEntries(this.oColUserWidth)){var u;for(i=0;i<this.aColWidths.length;i++){u=this.determineUserColWidth(i);if(u>-1){this.aColWidths[i]=u;}}}}return this.aColWidths;};
sap.zen.crosstab.BaseArea.prototype.measureRowGranularityCells=function(){var r=0;var c=null;var d=null;var C=0;var h=0;var m=0;var i=0;this.aLevelCells=[];this.aRowHeights=[];for(r=this.iRenderStartRow;r<this.aRowGranularity.length;r++){c=this.aRowGranularity[r];if(c){d=q.sap.byId(c.sId);if(d){C=d.outerHeight();h=Math.floor(C/c.iRowSpan);m=C%c.iRowSpan;if(c.isLevelCell){for(i=0;i<c.iRowSpan;i++){if(i===c.iRowSpan-1){h+=m;}if(this.aRowHeights[r+i]){if(this.aRowHeights[r+i]<h){this.aRowHeights[r+i]=h;}}else{this.aRowHeights[r+i]=h;}if(this.aCalculatedRowHeights[r+i]&&!this.aTemporaryRowHeights[r+i]){if(this.aRowHeights[r+i]<this.aCalculatedRowHeights[r+i]){this.aRowHeights[r+i]=this.aCalculatedRowHeights[r+i];}}this.aLevelCells[r+i]=true;}}else{for(i=0;i<c.iRowSpan;i++){if(this.aCalculatedRowHeights[r+i]&&!this.aTemporaryRowHeights[r+i]&&this.iMaxNumberOfLineBreaks===0){this.aRowHeights[r+i]=this.aCalculatedRowHeights[r+i];}else{if(i===c.iRowSpan-1){h+=m;}if(this.aRowHeights[r+i]){if(this.aRowHeights[r+i]<h){this.aRowHeights[r+i]=h;}}else{this.aRowHeights[r+i]=h;}if(this.aCalculatedRowHeights[r+i]&&!this.aTemporaryRowHeights[r+i]){this.aRowHeights[r+i]=Math.max(this.aRowHeights[r+i],this.aCalculatedRowHeights[r+i]);}}this.aLevelCells[r+i]=false;}}}}}return this.aRowHeights;};
sap.zen.crosstab.BaseArea.prototype.getLevelCells=function(){return this.aLevelCells;};
sap.zen.crosstab.BaseArea.prototype.hasLoadingPages=function(){return this.iLoadingPageCnt>0;};
sap.zen.crosstab.BaseArea.prototype.getCalculatedColWidths=function(){return this.aCalculatedColWidths;};
sap.zen.crosstab.BaseArea.prototype.getCalculatedRowHeights=function(){return this.aCalculatedRowHeights;};
sap.zen.crosstab.BaseArea.prototype.addPageToTempArray=function(a,i,p){if(!a[i]){a[i]=[];}a[i].push(p);};
sap.zen.crosstab.BaseArea.prototype.removePageFromTempArray=function(a,I,p){var P=a[I];if(P){for(var i=0;i<P.length;i++){if(P[i]===p){P.splice(i,1);break;}}if(P.length===0){a[I]=null;}}};
sap.zen.crosstab.BaseArea.prototype.changeColWidthTemporaryFlag=function(c,p,i){if(!this.aCalculatedColWidths[c]&&i){this.addPageToTempArray(this.aTemporaryColWidths,c,p);}else if(!i&&this.aTemporaryColWidths[c]){this.removePageFromTempArray(this.aTemporaryColWidths,c,p);if(!this.aTemporaryColWidths[c]){this.aCalculatedColWidths[c]=null;}}};
sap.zen.crosstab.BaseArea.prototype.changeRowHeightTemporaryFlag=function(r,p,i){if(!this.aCalculatedRowHeights[r]&&i){this.addPageToTempArray(this.aTemporaryRowHeights,r,p);}else if(!i&&this.aTemporaryRowHeights[r]){this.removePageFromTempArray(this.aTemporaryRowHeights,r,p);if(!this.aTemporaryRowHeights[r]){this.aCalculatedRowHeights[r]=null;}}};
sap.zen.crosstab.BaseArea.prototype.applyColWidthsToGranularityCells=function(c,f){var C=0;var o=null;var i=0;var w=0;var a=0;for(C=this.iRenderStartCol;C<this.aColGranularity.length;C++){o=this.aColGranularity[C];if(o){w=0;for(i=0;i<o.iColSpan;i++){a=c[C+i];w+=a;if(!this.aCalculatedColWidths[C+i]||f===true){this.aCalculatedColWidths[C+i]=a;}}o.iWidth=w;}}};
sap.zen.crosstab.BaseArea.prototype.applyRowHeightsToGranularityCells=function(r,l){var a=0;var c=null;var i=0;var h=0;var C=0;var I=false;var t=false;for(a=this.iRenderStartRow;a<this.aRowGranularity.length;a++){c=this.aRowGranularity[a];if(c){h=0;for(i=0;i<c.iRowSpan;i++){C=r[a+i];h+=C;I=(this.aCalculatedRowHeights[a+i]&&C>this.aCalculatedRowHeights[a+i]);if(!this.aCalculatedRowHeights[a+i]||(l&&l[a+i])||I===true){if(I===true){t=true;}this.aCalculatedRowHeights[a+i]=C;}}c.iHeight=h;}}return t;};
sap.zen.crosstab.BaseArea.prototype.getColGranularity=function(){return this.aColGranularity;};
sap.zen.crosstab.BaseArea.prototype.getRowGranularity=function(){return this.aRowGranularity;};
sap.zen.crosstab.BaseArea.prototype.getCellDirect=function(r,c){return this.oDataModel.getCellDirect(r,c);};
sap.zen.crosstab.BaseArea.prototype.getCell=function(r,c){return this.oDataModel.getCell(r,c);};
sap.zen.crosstab.BaseArea.prototype.renderBaseArea=function(r){this.oCrosstab.getRenderEngine().renderArea(this,r);};
sap.zen.crosstab.BaseArea.prototype.setRowCnt=function(r){this.oDataModel.setRowCnt(r);};
sap.zen.crosstab.BaseArea.prototype.getRowCnt=function(){return this.oDataModel.getRowCnt();};
sap.zen.crosstab.BaseArea.prototype.setColCnt=function(c){this.oDataModel.setColCnt(c);};
sap.zen.crosstab.BaseArea.prototype.getColCnt=function(){return this.oDataModel.getColCnt();};
sap.zen.crosstab.BaseArea.prototype.clear=function(k,K){this.oDataModel.clear();this.iRenderStartRow=0;this.iRenderRowCnt=0;this.iRenderStartCol=0;this.iRenderColCnt=0;this.bHasContent=false;this.fRenderCellCallback=null;this.aColGranularity=[];this.aColWidths=[];this.aTemporaryColWidths=[];this.aRowGranularity=[];this.aRowHeights=[];this.aCalculatedRowHeights=[];this.aTemporaryRowHeights=[];this.iLoadingPageCnt=0;this.aLevelCells=[];this.oColUserWidth={};this.oColsWithSymbolException={};if(!k){this.oUserResizedCols={};}if(!K){this.aCalculatedColWidths=[];}this.oCellsWithLineBreakTexts=null;this.iMaxNumberOfLineBreaks=0;};
sap.zen.crosstab.BaseArea.prototype.getDataModel=function(){return this.oDataModel;};
sap.zen.crosstab.BaseArea.prototype.setDataModel=function(d){this.oDataModel=d;};
sap.zen.crosstab.BaseArea.prototype.getId=function(){return this.sId;};
sap.zen.crosstab.BaseArea.prototype.setId=function(i){this.sId=i;};
sap.zen.crosstab.BaseArea.prototype.getAreaType=function(){return this.sAreaType;};
sap.zen.crosstab.BaseArea.prototype.getAxisName=function(){if(this.sAreaType===R.TYPE_ROW_HEADER_AREA){return R.ROW_AXIS;}else if(this.sAreaType===R.TYPE_COLUMN_HEADER_AREA){return R.COL_AXIS;}else if(this.sAreaType===R.TYPE_DATA_AREA){return R.DATA_AXIS;}else{return"";}};
sap.zen.crosstab.BaseArea.prototype.getCrosstab=function(){return this.oCrosstab;};
sap.zen.crosstab.BaseArea.prototype.getPageManager=function(){return this.oCrosstab.getPageManager();};
sap.zen.crosstab.BaseArea.prototype.getCellWithColSpan=function(r,c,d){return this.oDataModel.getCellWithColSpan(r,c,d);};
sap.zen.crosstab.BaseArea.prototype.getCellWithRowSpan=function(r,c,d){return this.oDataModel.getCellWithRowSpan(r,c,d);};
sap.zen.crosstab.BaseArea.prototype.setRenderSize=function(r,i,a,b){var m=this.oDataModel.getRowCnt();var M=this.oDataModel.getColCnt();var c=0;this.iRenderStartRow=r;this.iRenderRowCnt=i;c=this.iRenderStartRow+this.iRenderRowCnt;if(c>m){this.iRenderRowCnt=m-this.iRenderStartRow;}this.iRenderStartCol=a;this.iRenderColCnt=b;c=this.iRenderStartCol+this.iRenderColCnt;if(c>M){this.iRenderColCnt=M-this.iRenderStartCol;}};
sap.zen.crosstab.BaseArea.prototype.setRenderStartRow=function(r){this.iRenderStartRow=r;};
sap.zen.crosstab.BaseArea.prototype.setRenderRowCnt=function(r){this.iRenderRowCnt=r;};
sap.zen.crosstab.BaseArea.prototype.setRenderStartCol=function(c){this.iRenderStartCol=c;};
sap.zen.crosstab.BaseArea.prototype.setRenderColCnt=function(c){this.iRenderColCnt=c;};
sap.zen.crosstab.BaseArea.prototype.getRenderStartRow=function(){return this.iRenderStartRow;};
sap.zen.crosstab.BaseArea.prototype.getRenderRowCnt=function(){return this.iRenderRowCnt;};
sap.zen.crosstab.BaseArea.prototype.getRenderStartCol=function(){return this.iRenderStartCol;};
sap.zen.crosstab.BaseArea.prototype.getRenderColCnt=function(){return this.iRenderColCnt;};
sap.zen.crosstab.BaseArea.prototype.getRenderedCellsByCol=function(c){return this.oDataModel.getCellsByCol(c,this.iRenderStartRow,this.iRenderRowCnt);};
sap.zen.crosstab.BaseArea.prototype.getRenderedCellsByRow=function(r){return this.oDataModel.getCellsByRow(r,this.iRenderStartCol,this.iRenderColCnt);};
sap.zen.crosstab.BaseArea.prototype.resetColWidth=function(c){this.aCalculatedColWidths[c]=0;};
sap.zen.crosstab.BaseArea.prototype.setColWidth=function(c,w){this.aCalculatedColWidths[c]=w;};
sap.zen.crosstab.BaseArea.prototype.getColWidth=function(c){return this.aCalculatedColWidths[c];};
sap.zen.crosstab.BaseArea.prototype.getColWidths=function(){return this.aCalculatedColWidths;};
sap.zen.crosstab.BaseArea.prototype.setColWidths=function(c){this.aCalculatedColWidths=c;};
sap.zen.crosstab.BaseArea.prototype.determineUserColWidth=function(c){var C=-1;if(!this.oUserResizedCols[c]){var w=this.oColUserWidth[c];var s=this.oColUserWidth["*"];if(w&&!w.ignore){C=w.width;}else{if(s){if(w){if(!w.ignore){C=s.width;}}else{C=s.width;}}}}return C;};
sap.zen.crosstab.BaseArea.prototype.getFinalColWidth=function(c){var C=0;if(!this.hasLoadingPages()){C=this.getColWidth(c);}var u=this.determineUserColWidth(c);if(u>-1){C=u;}return C;};
sap.zen.crosstab.BaseArea.prototype.getRowHeight=function(r){return this.aCalculatedRowHeights[r];};
sap.zen.crosstab.BaseArea.prototype.getFinalRowHeight=function(r){var i=0;if(!this.hasLoadingPages()){i=this.getRowHeight(r);}return i;};
sap.zen.crosstab.BaseArea.prototype.hasContent=function(){return this.bHasContent;};
sap.zen.crosstab.BaseArea.prototype.registerRenderCellCallback=function(c){this.fRenderCellCallback=c;};
sap.zen.crosstab.BaseArea.prototype.removeRenderCellCallback=function(){this.fRenderCellCallback=null;};
sap.zen.crosstab.BaseArea.prototype.getRenderCellCallback=function(){return this.fRenderCellCallback;};
sap.zen.crosstab.BaseArea.prototype.isDimHeaderArea=function(){return this.sAreaType===R.TYPE_DIMENSION_HEADER_AREA;};
sap.zen.crosstab.BaseArea.prototype.isRowHeaderArea=function(){return this.sAreaType===R.TYPE_ROW_HEADER_AREA;};
sap.zen.crosstab.BaseArea.prototype.isColHeaderArea=function(){return this.sAreaType===R.TYPE_COLUMN_HEADER_AREA;};
sap.zen.crosstab.BaseArea.prototype.isDataArea=function(){return this.sAreaType===R.TYPE_DATA_AREA;};
sap.zen.crosstab.BaseArea.getArea=function(c,a){if(a===R.TYPE_DIMENSION_HEADER_AREA){return c.getDimensionHeaderArea();}else if(a===R.TYPE_ROW_HEADER_AREA){return c.getRowHeaderArea();}else if(a===R.TYPE_COLUMN_HEADER_AREA){return c.getColumnHeaderArea();}else if(a===R.TYPE_DATA_AREA){return c.getDataArea();}else{return null;}};
sap.zen.crosstab.BaseArea.prototype.increaseLoadingPageCnt=function(){this.iLoadingPageCnt++;};
sap.zen.crosstab.BaseArea.prototype.decreaseLoadingPageCnt=function(){if(this.iLoadingPageCnt>0){this.iLoadingPageCnt--;}};
sap.zen.crosstab.BaseArea.prototype.getLoadingPageCnt=function(){return this.iLoadingPageCnt;};
sap.zen.crosstab.BaseArea.prototype.openContainerCell=function(r,c){r.write("<td");r.addStyle("border-spacing","0px");r.addStyle("padding","0px");r.addStyle("border-width","0px");r.addStyle("margin","0px");r.writeStyles();if(c){r.writeAttributeEscaped("class",c);}r.write(">");};
sap.zen.crosstab.BaseArea.prototype.closeContainerCell=function(r){r.write("</td>");};
sap.zen.crosstab.BaseArea.prototype.openContainerTable=function(r){r.write("<table");r.writeAttributeEscaped("id",this.sId+"_container");r.addStyle("border-collapse","collapse");r.addStyle("border-spacing","0px");r.addStyle("padding","0px");r.addStyle("border-width","0px");r.addStyle("margin","0px");r.writeStyles();r.write(">");};
sap.zen.crosstab.BaseArea.prototype.closeContainerTable=function(r){r.write("</table>");};
sap.zen.crosstab.BaseArea.prototype.renderContainerStructure=function(r,s,v,h){this.openContainerTable(r);r.write("<tr>");this.openContainerCell(r);r.write("<table");r.writeAttributeEscaped("id",this.sId);r.writeAttributeEscaped("class",s);r.write(">");r.write("</table>");this.closeContainerCell(r);if(h){this.openContainerCell(r,"sapzencrosstab-HorizontalCutOff-"+this.getAreaType());r.write("<div");r.writeAttributeEscaped("class","sapzencrosstab-HorizontalCutOffSpacer");r.write(">");r.write("</div>");this.closeContainerCell(r);}r.write("</tr>");if(v){r.write("<tr>");this.openContainerCell(r,"sapzencrosstab-VerticalCutOff-"+this.getAreaType());r.write("<div");r.writeAttribute("class","sapzencrosstab-VerticalCutOffSpacer");r.write(">");r.write("</div>");this.closeContainerCell(r);if(h){this.openContainerCell(r,"sapzencrosstab-CutOffCorner");this.closeContainerCell(r);}r.write("</tr>");}this.closeContainerTable(r);};
sap.zen.crosstab.BaseArea.prototype.columnHasSymbolException=function(c){this.oColsWithSymbolException[c]=null;};
sap.zen.crosstab.BaseArea.prototype.setColUserWidth=function(c,w,i){this.oColUserWidth[c]={"width":w,"ignore":i};};
sap.zen.crosstab.BaseArea.prototype.clearColUserWidth=function(c){delete this.oColUserWidth[c];};
sap.zen.crosstab.BaseArea.prototype.hasUserColWidths=function(){var h=this.oColUserWidth&&U.hasEntries(this.oColUserWidth);return h;};
sap.zen.crosstab.BaseArea.prototype.isFixedColWidthSet=function(c){if(!this.hasUserColWidths()&&!U.hasEntries(this.oUserResizedCols)){return false;}if(this.oColUserWidth[c]!==undefined){return true;}if(this.oUserResizedCols[c]!==undefined){return true;}return false;};
sap.zen.crosstab.BaseArea.prototype.setColGranularityCalculatedAndMeasured=function(c){this.bColGranularityCalculatedAndMeasured=c;};
sap.zen.crosstab.BaseArea.prototype.setUserResizedCol=function(c){this.oUserResizedCols[c]=true;};
sap.zen.crosstab.BaseArea.prototype.clearUserResizedCol=function(c){delete this.oUserResizedCols[c];};
sap.zen.crosstab.BaseArea.prototype.getCellsWithLineBreakTexts=function(){return this.oCellsWithLineBreakTexts;};
return sap.zen.crosstab.BaseArea;});
sap.ui.predefine("sap/zen/crosstab/CellStyleHandler",["sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils"],function(R,U){"use strict";sap.zen.crosstab.CellStyleHandler={};sap.zen.crosstab.CellStyleHandler.aStyles=[];sap.zen.crosstab.CellStyleHandler.iDataCellAlternatingIndex=-1;sap.zen.crosstab.CellStyleHandler.iHeaderCellAlternatingIndex=-1;sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping={};sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_BACKGROUND]="Background";sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_FONT_COLOR]="FontColor";sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_STATUS_SYMBOL]="StatusSymbol";sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_TREND_ASCENDING_SYMBOL]="TrendAscendingSymbol";sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_TREND_DESCENDING_SYMBOL]="TrendDescendingSymbol";sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[R.ALERT_TYPE_TREND_GREY_SYMBOL]="TrendGreySymbol";
sap.zen.crosstab.CellStyleHandler.getCompleteStyleName=function(s,c){var C="";if(c===R.TYPE_DATA_CELL){C=R.STYLE_PREFIX_DATA_CELL+s;}else{C=R.STYLE_PREFIX_HEADER_CELL+s;}return C;};
sap.zen.crosstab.CellStyleHandler.pushStyle=function(c){var i=sap.zen.crosstab.CellStyleHandler.aStyles.push(c);i--;return i;};
sap.zen.crosstab.CellStyleHandler.getStyleId=function(s,c){var C=sap.zen.crosstab.CellStyleHandler.getCompleteStyleName(s,c);var i=sap.zen.crosstab.CellStyleHandler.aStyles.indexOf(C);if(i===-1){i=sap.zen.crosstab.CellStyleHandler.pushStyle(C);}return i;};
sap.zen.crosstab.CellStyleHandler.pushPresetStyle=function(s,c){var C=sap.zen.crosstab.CellStyleHandler.getCompleteStyleName(s,c);var i=sap.zen.crosstab.CellStyleHandler.pushStyle(C);return i;};
sap.zen.crosstab.CellStyleHandler.translateStyleForMainMode=function(s){if(s.indexOf("CellEntryEnabled")>-1){s=s+"-MainMode";}return s;};
sap.zen.crosstab.CellStyleHandler.addTextAlignmentStyleForIE=function(s,i){if(i){s=s+" sapzencrosstab-TextAlignmentIE_RTL";}else{s=s+" sapzencrosstab-TextAlignmentIE";}return s;};
sap.zen.crosstab.CellStyleHandler.iDataCellAlternatingIndex=sap.zen.crosstab.CellStyleHandler.pushPresetStyle(R.STYLE_ALTERNATING,R.TYPE_DATA_CELL);sap.zen.crosstab.CellStyleHandler.iHeaderCellAlternatingIndex=sap.zen.crosstab.CellStyleHandler.pushPresetStyle(R.STYLE_ALTERNATING,R.TYPE_HEADER_CELL);
sap.zen.crosstab.CellStyleHandler.getCssClasses=function(c,I,b,a){var C="";var s=c.length;for(var i=0;i<s;i++){var S=c[i];if(S!==-1){if(!(I&&(S===sap.zen.crosstab.CellStyleHandler.iDataCellAlternatingIndex||S===sap.zen.crosstab.CellStyleHandler.iHeaderCellAlternatingIndex))){var d=sap.zen.crosstab.CellStyleHandler.aStyles[S];if(d){if(U.isMainMode()){d=sap.zen.crosstab.CellStyleHandler.translateStyleForMainMode(d);}if(a){d=sap.zen.crosstab.CellStyleHandler.addTextAlignmentStyleForIE(d,b);}C+=d;C+=" ";}}}}return C;};
sap.zen.crosstab.CellStyleHandler.getStyleForExceptionViz=function(f,a){var s="Alert"+a+sap.zen.crosstab.CellStyleHandler.oExceptionVisualizationMapping[f];return s;};
sap.zen.crosstab.CellStyleHandler.setExceptionStylesOnCell=function(c,f,a){if(f>4){c.getArea().columnHasSymbolException(c.getCol());c.addStyle("SymbolAlertBackground");}var s=sap.zen.crosstab.CellStyleHandler.getStyleForExceptionViz(f,a);if(s){c.addStyle(s);}};
return sap.zen.crosstab.CellStyleHandler;});
sap.ui.predefine('sap/zen/crosstab/ColResizer',["jquery.sap.global","sap/zen/crosstab/utils/Utils"],function(q,U){"use strict";q.sap.declare("sap.zen.crosstab.ColResizer");
sap.zen.crosstab.ColResizer=function(c){var t=this;var d=c.getDataArea();var r=c.getRowHeaderArea();var R=null;var o=null;var a=null;var j=null;var J=null;var b=null;var m=0;var i=0;var f=false;var u;var I=false;this.initialize=function(){u=c.getUtils();I=c.getPropertyBag().isRtl();J=c.getTableDiv();b=c.getRenderSizeDiv();a=u.getRtlAwareBoundingClientRect(b[0]);j=q(document.getElementById(c.getId()+"_colResizeRuler"));this.attachEvents();};this.attachEvents=function(){J.unbind("dblclick");J.bind("dblclick",this.onDoubleClick);j.unbind("mousemove",this.onMouseMove);j.bind("mousemove",this.onMouseMove);var e=J.find(".sapzencrosstab-columnResizeHandleWithSort, .sapzencrosstab-columnResizeHandle");q.each(e,function(g,D){var h=q(D);h.unbind("mousedown",t.onMouseDown);h.bind("mousedown",t.onMouseDown);h.unbind("mouseup",t.executeonMouseUp);h.bind("mouseup",t.executeonMouseUp);h.unbind("mousemove",t.onMouseMove);h.bind("mousemove",t.onMouseMove);});};this.onDoubleClick=function(e){t.determineResizeCell(e,true);if(R){t.resizeCol(R,-1);R=null;U.cancelEvent(e);}};this.onMouseUp=function(e){var n;if(R&&o){n=t.calculateNewColWidth(e);if(n>0){t.resizeCol(R,n);}R=null;o=null;j.css("visibility","hidden");f=false;q(document).off("mouseup",t.onMouseUp);U.cancelEvent(e);}};this.onMouseDown=function(e){if(!R){t.determineResizeCell(e);if(R){o=u.getRtlAwareBoundingClientRect(document.getElementById(R.getId()));m=e.clientX;j.outerHeight(b.outerHeight());i=o.end-j.outerWidth()-a.begin;j.css(I?"right":"left",i+"px");q(document).on("mouseup",t.onMouseUp);U.cancelEvent(e);}}};this.onMouseMove=function(e){var C;if(R&&o){C=i+t.getDelta(e);if(C!==i){C=Math.max(C,(o.begin-a.begin));if(!f){j.css("visibility","visible");f=true;}j.css(I?"right":"left",C+"px");}U.cancelEvent(e);}};this.isResizeAction=function(){if(R&&o){return true;}return false;};this.determineResizeCell=function(e,g){var l;var A;R=sap.ui.getCore().byId(e.target.id.slice(5));if(!g&&R.getColSpan()>1){l=R.getCol()+R.getColSpan()-1;A=R.getArea();R=A.getCellWithColSpan(A.getRowCnt()-1,l);if(!R){R=A.getCellWithRowSpan(A.getRowCnt()-1,l);}}};this.calculateNewColWidth=function(e){var D;var n=-1;if(R&&o){D=t.getDelta(e);if(D!==0){n=o.width+D;n=Math.max(1,n);}}return n;};this.getDelta=function(e){if(I){return(m-e.clientX);}else{return(e.clientX-m);}};this.resizeCol=function(C,w){var e=C.getArea();if(e.isColHeaderArea()){this.setColWidths(C,e,d,w);}else if(e.isDimHeaderArea()){this.setColWidths(C,e,r,w);}this.sendUpdateColWidthCommand(C,w);c.invalidate();};this.setColWidths=function(C,e,l,w){var E;var g;var h;E=C.getCol()+C.getColSpan()-1;if(w>0){e.setColWidth(E,w);e.setUserResizedCol(E);l.setColWidth(E,w);l.setUserResizedCol(E);}else{g=0;h=C.getCol()+C.getColSpan()-C.getEffectiveColSpan();for(g=E;g>=h;g--){e.resetColWidth(g);l.resetColWidth(g);e.setUserResizedCol(g);l.setUserResizedCol(g);}}};this.sendUpdateColWidthCommand=function(C,w){var s=c.getUpdateColWidthCommand();if(s!=null&&s.length>0){var T=C.getTableCol();s=s.replace("__COL__",T);s=s.replace("__WIDTH__",Math.round(w));var A=new Function(s);A();}};};
return sap.zen.crosstab.ColResizer;});
sap.ui.predefine('sap/zen/crosstab/ColumnHeaderArea',["jquery.sap.global","sap/zen/crosstab/BaseArea","sap/zen/crosstab/rendering/RenderingConstants"],function(q,B,R){"use strict";q.sap.declare("sap.zen.crosstab.ColumnHeaderArea");
sap.zen.crosstab.ColumnHeaderArea=function(c){B.call(this,c);this.sAreaType=R.TYPE_COLUMN_HEADER_AREA;this.iRenderStartCol=0;this.iRenderColCnt=0;this.bLastPageLoaded=false;};
sap.zen.crosstab.ColumnHeaderArea.prototype=q.sap.newObject(B.prototype);
sap.zen.crosstab.ColumnHeaderArea.prototype.renderArea=function(r){this.renderContainerStructure(r,"sapzencrosstab-ColumnHeaderArea",false,this.oCrosstab.isHCutOff());};
sap.zen.crosstab.ColumnHeaderArea.prototype.getSelectedCellsBySelectionCoordinates=function(r,c){var C=this.oDataModel.getCellWithSpan(r,c);var o={};if(C){o[C.getId()]=C;var s=C.getColSpan();var S=C.getRow()+1;var a=this.getRowCnt()-S;var b=0;var d=null;for(var i=0;i<s;i++){b=C.getCol()+i;d=this.oDataModel.getCellsByCol(b,S,a);for(var j=0;j<d.length;j++){o[d[j].getId()]=d[j];}}return o;}return null;};
sap.zen.crosstab.ColumnHeaderArea.prototype.getSelectedCellsByDataSelection=function(d){var r={};var s=0;var e=this.getRowCnt();var c=d.getCol();for(var i=s;i<e;i++){var C=this.oDataModel.getCellWithSpan(i,c);r[C.getId()]=C;}return r;};
return sap.zen.crosstab.ColumnHeaderArea;});
sap.ui.predefine('sap/zen/crosstab/Crosstab',["jquery.sap.global","sap/ui/core/Control","sap/zen/crosstab/paging/PageManager","sap/zen/crosstab/DataArea","sap/zen/crosstab/ColumnHeaderArea","sap/zen/crosstab/RowHeaderArea","sap/zen/crosstab/DimensionHeaderArea","sap/zen/crosstab/EventHandler","sap/zen/crosstab/SelectionHandler","sap/zen/crosstab/rendering/RenderEngine","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/PropertyBag","sap/zen/crosstab/CrosstabCellApi","sap/zen/crosstab/CrosstabTestProxy","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/CrosstabContextMenu","sap/zen/crosstab/CrosstabHeaderInfo","sap/zen/crosstab/dragdrop/DragDropHandler","sap/zen/crosstab/rendering/RenderingConstants"],function(q,C,P,D,a,R,b,E,S,c,U,d,f,g,h,j,l,m,o){"use strict";q.sap.declare("sap.zen.crosstab.Crosstab");
C.extend("sap.zen.crosstab.Crosstab",{metadata:{library:"sap.zen.crosstab",properties:{width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null},height:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:null}}}});
sap.zen.crosstab.Crosstab.prototype.init=function(){"use strict";this.scrolled=false;this.ensureIndexOf();var s=this.getId();var e=s+"_dataArea";this.dataArea=new D(this);this.dataArea.setId(e);var i=s+"_colHeaderArea";this.columnHeaderArea=new a(this);this.columnHeaderArea.setId(i);var r=s+"_rowHeaderArea";this.rowHeaderArea=new R(this);this.rowHeaderArea.setId(r);var k=s+"_dimHeaderArea";this.dimensionHeaderArea=new b(this);this.dimensionHeaderArea.setId(k);this.oPropertyBag=new d(this);this.oRenderEngine=new c(this);this.oSelectionHandler=null;this.oEventHandler=new E(this);this.oUtils=new U(this);this.iCalculatedWidth=-1;this.iCalculatedHeight=-1;this.fPageRequestHandler=null;this.bOnAfterRendering=true;this.bIsVResize=false;this.bIsHResize=false;this.iHierarchyIndentWidth=0;this.iHierarchyIndentHeight=0;this.iExceptionSymbolWidth=0;this.iRenderMode=o.RENDERMODE_COMPACT;this.bRenderScrollbars=true;this.bHCutOff=false;this.bVCutOff=false;this.sOnSelectCommand=null;this.sTransferDataCommand=null;this.sCallValueHelpCommand=null;this.iTotalRowCnt=0;this.iTotalColCnt=0;this.oHScrollbar=null;this.oVScrollbar=null;this.oHorizontalHeaderScrollbar=null;this.iTimeoutCounter=0;this.iTimeoutCounter2=0;this.oColHeaderHierarchyLevels={};this.oRowHeaderHierarchyLevels={};this.oTestProxy=new g(this,this.oEventHandler,this.oRenderEngine);this.bAdjustFrameDivs=true;this.iSavedWidthForPrepareDom=0;this.iSavedHeightForPrepareDom=0;this.oCellApi=null;this.iNewLinesCnt=0;this.sNewLinesPos="";this.bPlanningCheckMode=false;this.sScrollNotifyCommand=null;this.oContextMenu=null;this.iValueHelpStatus=0;this.bHeaderHScrolling=false;this.bPreparedDom=false;this.bWasRendered=false;this.sUserHeaderWidthCommand=null;this.bIsUserHeaderResizeAllowed=false;this.bIsHeaderScrollingConfigured=false;this.bContainerIsRendered=false;this.bContainerRenderRequest=false;this.oContainer=null;this.oHeaderInfo=null;this.sSelectionMode="";this.sSelectionSpace="";this.bEnableHoverEffect=true;this.oRenderTimer=null;this.oRenderTimer2=null;this.bQueueHeaderWidthRequest=true;this.bScrollInvalidate=false;this.bCalledByScrolling=false;this.bRevertDragDrop=false;this.bDragAction=false;this.oDragDropHandler=null;this.oDragDropCommands=null;this.bIsBlocked=false;this.bHasData=false;this.sUpdateColWidthCommand=null;};
sap.zen.crosstab.Crosstab.prototype.ensureIndexOf=function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(s){"use strict";if(this==null){throw new TypeError();}var t=Object(this);var e=t.length>>>0;if(e===0){return-1;}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}if(n>=e){return-1;}var k=n>=0?n:Math.max(e-Math.abs(n),0);for(;k<e;k++){if(k in t&&t[k]===s){return k;}}return-1;};}};
sap.zen.crosstab.Crosstab.prototype.getTableDiv=function(){var t=null;if(this.iRenderMode===o.RENDERMODE_COMPACT){t=q(document.getElementById(this.getId()+"_altRenderModeTableDiv"));}else{t=q(document.getElementById(this.getId()));}return t;};
sap.zen.crosstab.Crosstab.prototype.ensurePageManager=function(){if(!this.oPageManager){this.oPageManager=new P(this);}return this.oPageManager;};
sap.zen.crosstab.Crosstab.prototype.getIntWidth=function(){var w=-1;var W=this.getWidth();if(W&&W!=="auto"){w=parseInt(W,10);}else{w=this.iCalculatedWidth;}return w;};
sap.zen.crosstab.Crosstab.prototype.getContentWidth=function(){var w=this.getIntWidth();var t=this.getRenderEngine().getTableDivValues();w=w-t.borders.iLeftBorderWidth-t.borders.iRightBorderWidth;return w;};
sap.zen.crosstab.Crosstab.prototype.getContentHeight=function(){var H=this.getIntHeight();var t=this.getRenderEngine().getTableDivValues();var T=this.oPropertyBag.getToolbarHeight();H=H-t.borders.iTopBorderWidth-t.borders.iBottomBorderWidth-T;return H;};
sap.zen.crosstab.Crosstab.prototype.getIntHeight=function(){var H=-1;var s=this.getHeight();if(s&&s!=="auto"){H=parseInt(s,10);}else{H=this.iCalculatedHeight;}return H;};
sap.zen.crosstab.Crosstab.prototype.resize=function(){var e=q.sap.byId(this.getId());var n=parseInt(e.outerWidth(),10);var N=parseInt(e.outerHeight(),10);this.isHResize=n!==this.getIntWidth();this.isVResize=N!==this.getIntHeight();if(this.isHResize||this.isVResize){this.ensurePageManager().resizeEvent();}};
sap.zen.crosstab.Crosstab.prototype.determineRenderMode=function(e){var n=-1;if(e){if(e.alwaysfill){n=o.RENDERMODE_FILL;}else{n=o.RENDERMODE_COMPACT;}}if(n===-1){n=o.RENDERMODE_COMPACT;}if(n!==this.iRenderMode){this.oRenderEngine.reset();this.iRenderMode=n;}};
sap.zen.crosstab.Crosstab.prototype.determineScrollMode=function(e){var n=e.pixelscrolling;if(n!==this.oPropertyBag.isPixelScrolling()){this.oRenderEngine.reset();this.oPropertyBag.setPixelScrolling(n);}};
sap.zen.crosstab.Crosstab.prototype.applyControlProperties=function(e){this.bPlanningCheckMode=e.pvcheck!==null&&e.pvcheck!==undefined;var i=this.ensurePageManager().checkResponseConsistency(e);if(!i){this.reset(e);}if(!this.bPlanningCheckMode){if(e.removeselection===true){if(this.oSelectionHandler){this.oSelectionHandler.removeAllSelections();this.bOnAfterRendering=true;}}else{this.determineRenderMode(e);this.determineScrollMode(e);this.ensurePageManager().receiveData(e);}}else{this.handlePlanningCheckData(e);this.bOnAfterRendering=true;}this.bPlanningCheckMode=false;};
sap.zen.crosstab.Crosstab.prototype.calculateOffset=function(e){var O=0;var A=e.getArea();if(A.isRowHeaderArea()){for(var i=0;i<e.getCol();i++){var t=A.getCell(e.getRow(),i);if(!t){O++;}else if(!t.isEntryEnabled()){O++;}}}return O;};
sap.zen.crosstab.Crosstab.prototype.calculateRowHeaderColOffsetsForRow=function(t){var e={};var T=0;var i=null;var k=0;var M=this.rowHeaderArea.getColCnt();for(T=0;T<M;T++){i=this.getTableCell(t,T);if(i!==null&&i.isEntryEnabled()){e[k]=T;k++;}}return e;};
sap.zen.crosstab.Crosstab.prototype.handlePlanningCheckData=function(e){var i=0;var k=e.pvcheck;var n=k.length;var p={};var r=null;var t=0;for(i=0;i<n;i++){var s=k[i];r=p[s.tabrow];if(!r){r=this.calculateRowHeaderColOffsetsForRow(s.tabrow);p[s.tabrow]=r;}t=r[s.tabcol]||s.tabcol;var u=this.getTableCell(s.tabrow,t);if(u){u.setText(s.text);if(s.valid===false){u.addStyle(o.STYLE_INVALID_VALUE);}else{u.removeStyle(o.STYLE_INVALID_VALUE);}if(s.newvalue===true){u.addStyle(o.STYLE_NEW_VALUE);}this.oRenderEngine.updateRenderingOfInputCellAfterCheck(u);}}};
sap.zen.crosstab.Crosstab.prototype.determineKeepUserColWidths=function(e){if(e.dataproviderchanged){return false;}if(e.resultsetchanged&&e.rootcause===undefined){return false;}return false;};
sap.zen.crosstab.Crosstab.prototype.determineKeepCalculatedColWidths=function(e){if(e.rootcause==="sorting"){return true;}var v=(e.v_pos||1)-1;var s=e.sentdatarows||0;var i=e.clientvpos||0;var t=e.totaldatarows||0;var H=(e.h_pos||1)-1;var k=e.sentdatacols||0;var n=e.clienthpos||0;var T=e.totaldatacols||0;var I=e.ispaging||false;var K=false;var p=false;if(this.bWasRendered===true&&!I){if((i>0)&&(i<=t)&&(i>(v+s))){p=true;}if((n>0)&&(n<=T)&&(n>(H+k))){K=true;}if(p===true||K===true){return true;}}return false;};
sap.zen.crosstab.Crosstab.prototype.reset=function(e){var k=this.determineKeepUserColWidths(e);var K=this.determineKeepCalculatedColWidths(e);this.getDimensionHeaderArea().clear(k,K);this.getColumnHeaderArea().clear(k,K);this.getRowHeaderArea().clear(k,K);this.getDataArea().clear(k,K);this.oRenderEngine.reset(K);this.oPageManager.reset();};
sap.zen.crosstab.Crosstab.prototype.updateControlProperties=function(e){if(e&&e.changed){this.reset(e);}this.applyControlProperties(e);};
sap.zen.crosstab.Crosstab.prototype.expectOnAfterRenderingCall=function(){this.bOnAfterRendering=false;};
sap.zen.crosstab.Crosstab.prototype.setContainerIsRendered=function(){this.bContainerIsRendered=true;};
sap.zen.crosstab.Crosstab.prototype.setContainerRenderRequest=function(){this.bContainerRenderRequest=true;};
sap.zen.crosstab.Crosstab.prototype.cleanupContainer=function(){if(this.oContainer){if(this.oContainer.oNotificationRegistry){delete this.oContainer.oNotificationRegistry[this.getId()];}if(U.getSizeOf(this.oContainer.oNotificationRegistry)===0){if(this.oContainer.fOriginalRender){this.oContainer.getRenderer().render=this.oContainer.fOriginalRender;delete this.oContainer.fOriginalRender;}this.oContainer.removeEventDelegate(this.onAfterRenderingDelegate);}}this.oContainer=null;};
sap.zen.crosstab.Crosstab.prototype.onAfterRenderingDelegate=null;
sap.zen.crosstab.Crosstab.prototype.setupContainer=function(e){var t=this;var r=null;if(e&&e.getRenderer&&U.isDispatcherAvailable()===true){if(!e.fOriginalRender){r=e.getRenderer();e.fOriginalRender=r.render;r.render=function(i,k){e.fOriginalRender.call(e.getRenderer(),i,k);if(e.oNotificationRegistry){q.each(e.oNotificationRegistry,function(I,H){var k=sap.zen.Dispatcher.instance.getControlForId(I);if(k){H.fSetRenderRequest.call(k);}});}};this.bContainerRenderRequest=true;}if(e.onAfterRendering){e.removeEventDelegate(t.onAfterRenderingDelegate);t.onAfterRenderingDelegate={onAfterRendering:function(){if(e.oNotificationRegistry){q.each(e.oNotificationRegistry,function(i,H){var k=sap.zen.Dispatcher.instance.getControlForId(i);if(k){H.fSetIsRendered.call(k);}});}}};e.addEventDelegate(t.onAfterRenderingDelegate);}else{this.bContainerIsRendered=true;}if(!e.oNotificationRegistry){e.oNotificationRegistry={};}e.oNotificationRegistry[this.getId()]={"fSetRenderRequest":this.setContainerRenderRequest,"fSetIsRendered":this.setContainerIsRendered};this.oContainer=e;}else{this.oContainer=null;}};
sap.zen.crosstab.Crosstab.prototype.getContainer=function(){var e=null;if(this.oContainer){e=this.oContainer;}else{e=this.getParent().getParent();}return e;};
sap.zen.crosstab.Crosstab.prototype.isAutoSize=function(){var w=this.getWidth();var H=this.getHeight();if(!w){return true;}else{if(w==="auto"){return true;}}if(!H){return true;}else{if(H==="auto"){return true;}}return false;};
sap.zen.crosstab.Crosstab.prototype.prepareContainer=function(){var e=null;this.bContainerRenderRequest=false;if(!this.isAutoSize()){this.cleanupContainer();return;}if(!sap.zen.Dispatcher){this.cleanupContainer();return;}e=this.getParent().getParent();if(!e){this.cleanupContainer();return;}if(this.oContainer&&(e!==this.oContainer)){this.cleanupContainer();}this.setupContainer(e);};
sap.zen.crosstab.Crosstab.prototype.onAfterRendering=function(){if(!this.bIsDeferredRendering&&U.isDispatcherAvailable()){this.bIsDeferredRendering=sap.zen.Dispatcher.instance.isDeferredRendering();}if(!this.bContainerIsRendered&&this.bContainerRenderRequest===true&&this.oContainer){this.iTimeoutCounter++;if(this.iTimeoutCounter>1000){return;}if(this.oRenderTimer){clearTimeout(this.oRenderTimer);this.oRenderTimer=null;}this.oRenderTimer=setTimeout((function(t){return function(){t.onAfterRendering();};})(this),10);return;}if(this.bOnAfterRendering||this.bIsDeferredRendering){this.doRendering();}this.bContainerRenderRequest=false;this.bContainerIsRendered=false;this.bIsDeferredRendering=false;};
sap.zen.crosstab.Crosstab.prototype.prepareExistingDom=function(){if(!this.bPlanningCheckMode){var e=q(document.getElementById(this.getDimensionHeaderArea().getId())).find("tbody");e.empty();e=q(document.getElementById(this.getRowHeaderArea().getId())).find("tbody");e.empty();e=q(document.getElementById(this.getColumnHeaderArea().getId())).find("tbody");e.empty();e=q(document.getElementById(this.getDataArea().getId())).find("tbody");e.empty();this.bRenderScrollbars=false;this.determineNeedToAdjustOuterDivs();this.bPreparedDom=true;}};
sap.zen.crosstab.Crosstab.prototype.determineNeedToAdjustOuterDivs=function(){var w=this.getIntWidth();var H=this.getIntHeight();this.bAdjustFrameDivs=true;if(w===this.iSavedWidthForPrepareDom&&H===this.iSavedHeightForPrepareDom){this.bAdjustFrameDivs=false;}else{this.getRenderEngine().removeOuterDivBorders();}if(!this.getDataArea().hasLoadingPages()){this.iSavedWidthForPrepareDom=w;this.iSavedHeightForPrepareDom=H;}};
sap.zen.crosstab.Crosstab.prototype.determineHierarchyIndents=function(){var e=q(document.getElementById(this.getId()+"_measureDiv"));if(e&&e.length>0){e.css("visibility","visible");this.iHierarchyIndentWidth=parseInt(e.outerWidth(),10);this.iHierarchyIndentHeight=parseInt(e.outerHeight(),10);e.css("visibility","none");}};
sap.zen.crosstab.Crosstab.prototype.determineAlertSymbolDimensions=function(){var e=q(document.getElementById(this.getId()+"_exceptionMeasureDiv"));if(e&&e.length>0){e.css("visibility","visible");this.iExceptionSymbolWidth=parseInt(e.outerWidth(),10);e.css("visibility","none");}};
sap.zen.crosstab.Crosstab.prototype.isRenderingPossible=function(){if(U.isDispatcherAvailable()===true&&sap.zen.Dispatcher.instance.suppressRendering()){if(!sap.zen.Dispatcher.instance.isSingleDelta(this.getId())){sap.zen.Dispatcher.instance.registerForDeferredRendering(this);return false;}}var e=[];e.push(q(document.getElementById(this.getId())));e.push(q(document.getElementById(this.getId()+"_upperSection")));e.push(q(document.getElementById(this.getId()+"_lowerSection")));e.push(q(document.getElementById(this.getId()+"_dimHeaderArea")));e.push(q(document.getElementById(this.getId()+"_colHeaderArea")));e.push(q(document.getElementById(this.getId()+"_dataArea")));for(var i=0;i<e.length;i++){if(e[i].length!==1){this.bOnAfterRendering=true;return false;}}return true;};
sap.zen.crosstab.Crosstab.prototype.determineCrosstabSize=function(){var e=true;var J=null;if(!this.getWidth()||!this.getHeight()){e=false;}else{J=q.sap.byId(this.getId()).parent();var w=J.outerWidth();if(w&&w>10){this.iCalculatedWidth=w;}var H=J.outerHeight();if(H&&H>10){this.iCalculatedHeight=H;}}return e;};
sap.zen.crosstab.Crosstab.prototype.setInvalidateCalledByScrolling=function(){this.bCalledByScrolling=true;};
sap.zen.crosstab.Crosstab.prototype.doRendering=function(){this.iTimeoutCounter=0;if(this.oRenderTimer){clearTimeout(this.oRenderTimer);this.oRenderTimer=null;}if(this.bPlanningCheckMode===true){return;}if(!this.isRenderingPossible()){return;}if(!this.determineCrosstabSize()){return;}if(this.iCalculatedWidth===-1||this.iCalculatedHeight===-1){this.iTimeoutCounter2++;if(this.iTimeoutCounter2>1000){return;}if(this.oRenderTimer2){clearTimeout(this.oRenderTimer2);this.oRenderTimer2=null;}this.oRenderTimer2=setTimeout((function(i){return function(){i.doRendering();};})(this),10);return;}this.iTimeoutCounter2=0;if(this.oRenderTimer2){clearTimeout(this.oRenderTimer2);this.oRenderTimer2=null;}this.determineHierarchyIndents();if(this.getPropertyBag().isDisplayExceptions()){this.determineAlertSymbolDimensions();}var r=this.getRenderEngine();r.setAdjustFrameDivs(this.bAdjustFrameDivs);if(r.hasCrosstabSizeChanged()){this.ensurePageManager().resizeEvent();}if(this.oPropertyBag.hasToolbar()){var t=q(document.getElementById(this.getId()+"_toolbar"));var T=t.outerHeight();this.oPropertyBag.setToolbarHeight(T);}r.beginRendering();r.renderCrosstabAreas();r.calculateRenderSizeDivSize();if(!this.oPropertyBag.isPixelScrolling()){r.appendColumnsAfterResize();r.appendRowsAfterResize();}if(this.bRenderScrollbars){r.renderScrollbars();}r.adjustRenderSizeDivSize();if(this.bRenderScrollbars){r.setScrollbarSteps();}r.adjustScrollDivSizes();if(!this.bRenderScrollbars){r.checkScrollbarSize();}r.adjustScrollPositions(this.bRenderScrollbars);if(!this.oPropertyBag.isRtl()){if(!this.oPropertyBag.isPixelScrolling()){r.moveScrollDivs();}}else{if(this.oPropertyBag.isPixelScrolling()&&q.browser.webkit){r.moveScrollDivs();}}if(this.oHorizontalHeaderScrollbar&&!this.bPreparedDom){r.updateHeaderScrollbarSizes();}r.updateHeaderResizeDiv();if(this.getPropertyBag().isDragDropEnabled()===true&&U.isDispatcherAvailable()===true){if(!this.oDragDropHandler){this.oDragDropHandler=new m(this,this.oDragDropCommands);}}r.finishRendering();this.oEventHandler.attachEvents();this.bOnAfterRendering=true;this.bRenderScrollbars=true;this.bAdjustFrameDivs=true;this.bPreparedDom=false;this.bWasRendered=true;var e=this.bCalledByScrolling;this.bCalledByScrolling=false;var s=this.bScrollInvalidate;this.bScrollInvalidate=false;if(!e&&!this.hasLoadingPages()&&s===true){this.invalidate();}if(!this.hasLoadingPages()){this.getPropertyBag().setBookmarkProcessing(false);}};
sap.zen.crosstab.Crosstab.prototype.setScrollInvalidate=function(s){this.bScrollInvalidate=s;};
sap.zen.crosstab.Crosstab.prototype.isScrollInvalidate=function(){return this.bScrollInvalidate;};
sap.zen.crosstab.Crosstab.prototype.scrollHorizontal=function(i){this.oRenderEngine.scrollHorizontal(i);};
sap.zen.crosstab.Crosstab.prototype.scrollVertical=function(r){this.oRenderEngine.scrollVertical(r);};
sap.zen.crosstab.Crosstab.prototype.scrollHeaderHorizontal=function(p){this.oRenderEngine.scrollHeaderHorizontal(p);};
sap.zen.crosstab.Crosstab.prototype.getVScrollPos=function(){var v=-1;if(this.oVScrollbar){v=this.oVScrollbar.getScrollPosition();}return v;};
sap.zen.crosstab.Crosstab.prototype.getHScrollPos=function(){var H=-1;if(this.oHScrollbar){H=this.oHScrollbar.getScrollPosition();}return H;};
sap.zen.crosstab.Crosstab.prototype.renderResizeOutline=function(){this.oRenderEngine.renderResizeOutline();};
sap.zen.crosstab.Crosstab.prototype.removeResizeOutline=function(){this.oRenderEngine.removeResizeOutline();};
sap.zen.crosstab.Crosstab.prototype.registerPageRequestHandler=function(H){this.fPageRequestHandler=H;};
sap.zen.crosstab.Crosstab.prototype.unregisterPageRequestHandler=function(){this.fPageRequestHandler=null;};
sap.zen.crosstab.Crosstab.prototype.getPageRequestHandler=function(){return this.fPageRequestHandler;};
sap.zen.crosstab.Crosstab.prototype.getReceivedPages=function(){return this.ensurePageManager().getReceivedPages();};
sap.zen.crosstab.Crosstab.prototype.getHierarchyIndentWidth=function(){return this.iHierarchyIndentWidth;};
sap.zen.crosstab.Crosstab.prototype.getExceptionSymbolWidth=function(){return this.iExceptionSymbolWidth;};
sap.zen.crosstab.Crosstab.prototype.getHierarchyIndentHeight=function(){return this.iHierarchyIndentHeight;};
sap.zen.crosstab.Crosstab.prototype.hideLoadingIndicator=function(){this.oRenderEngine.hideLoadingIndicator();};
sap.zen.crosstab.Crosstab.prototype.showLoadingIndicator=function(){this.oRenderEngine.showLoadingIndicator();};
sap.zen.crosstab.Crosstab.prototype.setHCutOff=function(H){this.bHCutOff=H;};
sap.zen.crosstab.Crosstab.prototype.isHCutOff=function(){return this.bHCutOff;};
sap.zen.crosstab.Crosstab.prototype.setVCutOff=function(v){this.bVCutOff=v;};
sap.zen.crosstab.Crosstab.prototype.isVCutOff=function(){return this.bVCutOff;};
sap.zen.crosstab.Crosstab.prototype.getTotalRows=function(){return this.iTotalRowCnt;};
sap.zen.crosstab.Crosstab.prototype.getTotalCols=function(){return this.iTotalColCnt;};
sap.zen.crosstab.Crosstab.prototype.setTotalCols=function(i){this.iTotalColCnt=i;};
sap.zen.crosstab.Crosstab.prototype.setTotalRows=function(r){this.iTotalRowCnt=r;};
sap.zen.crosstab.Crosstab.prototype.setHScrollbar=function(H){this.oHScrollbar=H;};
sap.zen.crosstab.Crosstab.prototype.setVScrollbar=function(v){this.oVScrollbar=v;};
sap.zen.crosstab.Crosstab.prototype.getVScrollbar=function(){return this.oVScrollbar;};
sap.zen.crosstab.Crosstab.prototype.getHScrollbar=function(){return this.oHScrollbar;};
sap.zen.crosstab.Crosstab.prototype.getTestProxy=function(){return this.oTestProxy;};
sap.zen.crosstab.Crosstab.prototype.setOnSelectCommand=function(O){this.sOnSelectCommand=O;};
sap.zen.crosstab.Crosstab.prototype.getOnSelectCommand=function(){return this.sOnSelectCommand;};
sap.zen.crosstab.Crosstab.prototype.setTransferDataCommand=function(t){this.sTransferDataCommand=t;};
sap.zen.crosstab.Crosstab.prototype.getTransferDataCommand=function(){return this.sTransferDataCommand;};
sap.zen.crosstab.Crosstab.prototype.setCallValueHelpCommand=function(s){this.sCallValueHelpCommand=s;};
sap.zen.crosstab.Crosstab.prototype.getCallValueHelpCommand=function(){return this.sCallValueHelpCommand;};
sap.zen.crosstab.Crosstab.prototype.getRenderMode=function(){return this.iRenderMode;};
sap.zen.crosstab.Crosstab.prototype.getUtils=function(){return this.oUtils;};
sap.zen.crosstab.Crosstab.prototype.getDataArea=function(){return this.dataArea;};
sap.zen.crosstab.Crosstab.prototype.getDimensionHeaderArea=function(){return this.dimensionHeaderArea;};
sap.zen.crosstab.Crosstab.prototype.getColumnHeaderArea=function(){return this.columnHeaderArea;};
sap.zen.crosstab.Crosstab.prototype.getRowHeaderArea=function(){return this.rowHeaderArea;};
sap.zen.crosstab.Crosstab.prototype.getRenderEngine=function(){return this.oRenderEngine;};
sap.zen.crosstab.Crosstab.prototype.hResize=function(){return this.isHResize;};
sap.zen.crosstab.Crosstab.prototype.vResize=function(){return this.isVResize;};
sap.zen.crosstab.Crosstab.prototype.getPageManager=function(){return this.oPageManager;};
sap.zen.crosstab.Crosstab.prototype.isRenderScrollbars=function(){return this.bRenderScrollbars;};
sap.zen.crosstab.Crosstab.prototype.getPropertyBag=function(){return this.oPropertyBag;};
sap.zen.crosstab.Crosstab.prototype.hasToolbar=function(){return this.bHasToolbar;};
sap.zen.crosstab.Crosstab.prototype.setColHeaderHierarchyLevels=function(L){this.oColHeaderHierarchyLevels=L;};
sap.zen.crosstab.Crosstab.prototype.getColHeaderHierarchyLevels=function(){return this.oColHeaderHierarchyLevels;};
sap.zen.crosstab.Crosstab.prototype.setRowHeaderHierarchyLevels=function(L){this.oRowHeaderHierarchyLevels=L;};
sap.zen.crosstab.Crosstab.prototype.getRowHeaderHierarchyLevels=function(){return this.oRowHeaderHierarchyLevels;};
sap.zen.crosstab.Crosstab.prototype.isIE8Mode=function(){return this.oRenderEngine.isIE8Mode();};
sap.zen.crosstab.Crosstab.prototype.hasDimensionHeaderArea=function(){var r=false;if(this.dimensionHeaderArea!==undefined){r=(this.dimensionHeaderArea.getColCnt()>0&&this.dimensionHeaderArea.getRowCnt()>0);}return r;};
sap.zen.crosstab.Crosstab.prototype.hasRowHeaderArea=function(){var r=false;if(this.rowHeaderArea!==undefined){r=(this.rowHeaderArea.getColCnt()>0&&this.rowHeaderArea.getRowCnt()>0);}return r;};
sap.zen.crosstab.Crosstab.prototype.hasColHeaderArea=function(){var r=false;if(this.columnHeaderArea!==undefined){r=(this.columnHeaderArea.getColCnt()>0&&this.columnHeaderArea.getRowCnt()>0);}return r;};
sap.zen.crosstab.Crosstab.prototype.hasDataArea=function(){var r=false;if(this.dataArea!==undefined){r=(this.dataArea.getColCnt()>0&&this.dataArea.getRowCnt()>0);}return r;};
sap.zen.crosstab.Crosstab.prototype.restoreFocusOnCell=function(){this.oEventHandler.restoreFocusOnCell();};
sap.zen.crosstab.Crosstab.prototype.getTableCell=function(t,T){return this.oCellApi.getTableCell(t,T);};
sap.zen.crosstab.Crosstab.prototype.getTableCellWithSpans=function(r,i){return this.oCellApi.getTableCellWithSpans(r,i);};
sap.zen.crosstab.Crosstab.prototype.getTableCellWithColSpan=function(r,i){return this.oCellApi.getTableCellWithColSpan(r,i);};
sap.zen.crosstab.Crosstab.prototype.getTableCellWithRowSpan=function(r,i){return this.oCellApi.getTableCellWithRowSpan(r,i);};
sap.zen.crosstab.Crosstab.prototype.getTableRowCnt=function(){return this.oCellApi.getTableRowCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableColCnt=function(){return this.oCellApi.getTableColCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableFixedRowHeaderColCnt=function(){return this.oCellApi.getTableFixedRowHeaderColCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableFixedColHeaderRowCnt=function(){return this.oCellApi.getTableFixedColHeaderRowCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableMaxScrollColCnt=function(){return this.oCellApi.getTableMaxScrollColCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableMaxScrollRowCnt=function(){return this.oCellApi.getTableMaxScrollRowCnt();};
sap.zen.crosstab.Crosstab.prototype.getTableMaxDimHeaderRow=function(){return this.oCellApi.getTableMaxDimHeaderRow();};
sap.zen.crosstab.Crosstab.prototype.getTableMaxDimHeaderCol=function(){return this.oCellApi.getTableMaxDimHeaderCol();};
sap.zen.crosstab.Crosstab.prototype.setCellApi=function(p){this.oCellApi=p;};
sap.zen.crosstab.Crosstab.prototype.hasLoadingPages=function(){return this.dataArea.hasLoadingPages()||this.rowHeaderArea.hasLoadingPages()||this.columnHeaderArea.hasLoadingPages();};
sap.zen.crosstab.Crosstab.prototype.getRenderRowCnt=function(){if(this.dataArea){return this.dataArea.getRenderRowCnt();}else if(this.rowHeaderArea){return this.rowHeaderArea.getRenderRowCnt();}};
sap.zen.crosstab.Crosstab.prototype.getRenderStartRow=function(){if(this.dataArea){return this.dataArea.getRenderStartRow();}else if(this.rowHeaderArea){return this.rowHeaderArea.getRenderStartRow();}return null;};
sap.zen.crosstab.Crosstab.prototype.getRenderColCnt=function(){if(this.dataArea){return this.dataArea.getRenderColCnt();}else if(this.columnHeaderArea){return this.columnHeaderArea.getRenderColCnt();}return null;};
sap.zen.crosstab.Crosstab.prototype.getRenderStartCol=function(){if(this.dataArea){return this.dataArea.getRenderStartCol();}else if(this.columnHeaderArea){return this.columnHeaderArea.getRenderStartCol();}return null;};
sap.zen.crosstab.Crosstab.prototype.setNewLinesCnt=function(n){this.iNewLinesCnt=n;};
sap.zen.crosstab.Crosstab.prototype.getNewLinesCnt=function(){return this.iNewLinesCnt;};
sap.zen.crosstab.Crosstab.prototype.setNewLinesPos=function(n){this.sNewLinesPos=n;};
sap.zen.crosstab.Crosstab.prototype.getNewLinesPos=function(){return this.sNewLinesPos;};
sap.zen.crosstab.Crosstab.prototype.isNewLinesTop=function(){if(!this.sNewLinesPos){return false;}return(this.sNewLinesPos==="TOP");};
sap.zen.crosstab.Crosstab.prototype.isNewLinesBottom=function(){if(!this.sNewLinesPos){return false;}return(this.sNewLinesPos==="BOTTOM");};
sap.zen.crosstab.Crosstab.prototype.setScrollNotifyCommand=function(s){this.sScrollNotifyCommand=s;};
sap.zen.crosstab.Crosstab.prototype.getScrollNotifyCommand=function(){return this.sScrollNotifyCommand;};
sap.zen.crosstab.Crosstab.prototype.getContextMenuAction=function(s,e){var A=null;if(this.oContextMenu){A=this.oContextMenu.getContextMenuAction(s,e);}return A;};
sap.zen.crosstab.Crosstab.prototype.createContextMenu=function(){if(!this.oContextMenu){this.oContextMenu=new j(this);}};
sap.zen.crosstab.Crosstab.prototype.setValueHelpStatus=function(v){this.iValueHelpStatus=v;};
sap.zen.crosstab.Crosstab.prototype.getValueHelpStatus=function(){return this.iValueHelpStatus;};
sap.zen.crosstab.Crosstab.prototype.getHorizontalHeaderScrollbar=function(){return this.oHorizontalHeaderScrollbar;};
sap.zen.crosstab.Crosstab.prototype.setHorizontalHeaderScrollbar=function(H){this.oHorizontalHeaderScrollbar=H;};
sap.zen.crosstab.Crosstab.prototype.setHeaderHScrolling=function(H){this.bHeaderHScrolling=H;if(!this.bHeaderHScrolling){this.oHorizontalHeaderScrollbar=null;}};
sap.zen.crosstab.Crosstab.prototype.isHeaderHScrolling=function(){return this.bHeaderHScrolling;};
sap.zen.crosstab.Crosstab.prototype.setUserHeaderWidthCommand=function(u){this.sUserHeaderWidthCommand=u;};
sap.zen.crosstab.Crosstab.prototype.getUserHeaderWidthCommand=function(){return this.sUserHeaderWidthCommand;};
sap.zen.crosstab.Crosstab.prototype.isUserHeaderResizeAllowed=function(){return this.bIsUserHeaderResizeAllowed;};
sap.zen.crosstab.Crosstab.prototype.setUserHeaderResizeAllowed=function(i){this.bIsUserHeaderResizeAllowed=i;};
sap.zen.crosstab.Crosstab.prototype.setHeaderScrollingConfigured=function(i){this.bIsHeaderScrollingConfigured=i;};
sap.zen.crosstab.Crosstab.prototype.isHeaderScrollingConfigured=function(){return this.bIsHeaderScrollingConfigured;};
sap.zen.crosstab.Crosstab.prototype.isPreparedDom=function(){return this.bPreparedDom;};
sap.zen.crosstab.Crosstab.prototype.getSelectionHandler=function(){if(!this.oSelectionHandler&&this.sSelectionMode!==undefined&&this.sSelectionMode!==""){this.oSelectionHandler=new S(this);}return this.oSelectionHandler;};
sap.zen.crosstab.Crosstab.prototype.initHeaderInfo=function(H){this.oHeaderInfo=new l(this,H);};
sap.zen.crosstab.Crosstab.prototype.getHeaderInfo=function(){return this.oHeaderInfo;};
sap.zen.crosstab.Crosstab.prototype.setSelectionProperties=function(s,e,i,k){this.sSelectionMode=s;this.sSelectionSpace=e;if(!i){this.bEnableHoverEffect=true;}else{this.bEnableHoverEffect=false;}this.getPropertyBag().setFireOnSelectedOnlyOnce(k);};
sap.zen.crosstab.Crosstab.prototype.getSelectionMode=function(){return this.sSelectionMode;};
sap.zen.crosstab.Crosstab.prototype.getSelectionSpace=function(){return this.sSelectionSpace;};
sap.zen.crosstab.Crosstab.prototype.isHoveringEnabled=function(){return this.bEnableHoverEffect;};
sap.zen.crosstab.Crosstab.prototype.isPlanningMode=function(){return(this.getTransferDataCommand()&&this.getTransferDataCommand()!=="");};
sap.zen.crosstab.Crosstab.prototype.isSelectable=function(){return(this.oSelectionHandler&&this.sSelectionMode!==undefined&&this.sSelectionMode!=="");};
sap.zen.crosstab.Crosstab.prototype.isQueueHeaderWidthRequest=function(){return this.bQueueHeaderWidthRequest;};
sap.zen.crosstab.Crosstab.prototype.setQueueHeaderWidthRequest=function(Q){this.bQueueHeaderWidthRequest=Q;};
sap.zen.crosstab.Crosstab.prototype.postPlanningValue=function(){return this.oEventHandler.postPlanningValue();};
sap.zen.crosstab.Crosstab.prototype.setDragAction=function(e){this.bDragAction=e;if(this.oSelectionHandler){this.oSelectionHandler.blockSelectionHovering(e);}};
sap.zen.crosstab.Crosstab.prototype.isDragAction=function(){return this.bDragAction;};
sap.zen.crosstab.Crosstab.prototype.onUnhandledDrop=function(e,u,p){this.oDragDropHandler.onUnhandledDrop(e,u,p);};
sap.zen.crosstab.Crosstab.prototype.onEscKeyPressed=function(){this.oDragDropHandler.onEscKeyPressed();};
sap.zen.crosstab.Crosstab.prototype.setDragDropCommands=function(e){this.oDragDropCommands=e;};
sap.zen.crosstab.Crosstab.prototype.getDragDropHandler=function(){return this.oDragDropHandler;};
sap.zen.crosstab.Crosstab.prototype.getRenderSizeDiv=function(){return q(document.getElementById(this.getId()+"_renderSizeDiv"));};
sap.zen.crosstab.Crosstab.prototype.getRowHeaderAreaDiv=function(){return q(document.getElementById(this.getId()+"_lowerLeft_scrollDiv"));};
sap.zen.crosstab.Crosstab.prototype.getColHeaderAreaDiv=function(){return q(document.getElementById(this.getId()+"_upperRight_scrollDiv"));};
sap.zen.crosstab.Crosstab.prototype.getDimHeaderAreaDiv=function(){return q(document.getElementById(this.getId()+"_upperLeft_scrollDiv"));};
sap.zen.crosstab.Crosstab.prototype.isVScrolling=function(){var i=false;var v=this.oRenderEngine.getScrollbarVisibility();if(v){i=v.bHasVScrollbar;}return i;};
sap.zen.crosstab.Crosstab.prototype.isHScrolling=function(){var i=false;var v=this.oRenderEngine.getScrollbarVisibility();if(v){i=v.bHasHScrollbar;}return i;};
sap.zen.crosstab.Crosstab.prototype.getGlassPane=function(){return q(document.getElementById(this.getId()+"_glassPane"));};
sap.zen.crosstab.Crosstab.prototype.block=function(){var J;this.bIsBlocked=true;J=this.getGlassPane();J.css("visibility","visible");};
sap.zen.crosstab.Crosstab.prototype.unblock=function(){var J;if(!this.hasLoadingPages()){J=this.getGlassPane();J.css("visibility","hidden");this.bIsBlocked=false;}};
sap.zen.crosstab.Crosstab.prototype.isBlocked=function(){return this.bIsBlocked;};
sap.zen.crosstab.Crosstab.prototype.setHasData=function(H){this.bHasData=H;};
sap.zen.crosstab.Crosstab.prototype.hasData=function(){return this.bHasData;};
sap.zen.crosstab.Crosstab.prototype.enableClick=function(){this.oEventHandler.enableClick();};
sap.zen.crosstab.Crosstab.prototype.getColResizer=function(){return this.oEventHandler.getColResizer();};
sap.zen.crosstab.Crosstab.prototype.setUpdateColWidthCommand=function(s){this.sUpdateColWidthCommand=s;};
sap.zen.crosstab.Crosstab.prototype.getUpdateColWidthCommand=function(){return this.sUpdateColWidthCommand;};
sap.zen.crosstab.Crosstab.prototype.executeScrollSequence=function(s){var M=s.length-1;var i;var t=this;function e(){var k;var n;var p;var T;if(i<=M){k=s[i];n=k[0];p=k[1];if(k.length>3){T=k[3];}else{T=1000;}setTimeout(function(){if(n==="H"){t.scrollHorizontal(p);}else if(n==="V"){t.scrollVertical(p);}i++;e();},T);}}if(M>=0){i=0;e();}};
return sap.zen.crosstab.Crosstab;});
sap.ui.predefine('sap/zen/crosstab/CrosstabCellApi',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.CrosstabCellApi");
sap.zen.crosstab.CrosstabCellApi=function(c,f,F,t,T){var d=c.getDataArea();var C=c.getColumnHeaderArea();var r=c.getRowHeaderArea();var D=c.getDimensionHeaderArea();var m=F-1;var M=f-1;this.getTableCell=function(R,i){var o=null;if(i>=f&&R>=F){o=d.getCell(R-F,i-f);}else if(i<f&&R<F){o=D.getCell(R,i);}else if(i>=f&&R<F){o=C.getCell(R,i-f);}else if(i<f&&R>=F){o=r.getCell(R-F,i);}return o;};this.getTableCellWithColSpan=function(R,i){var o=null;if(i>=f&&R>=F){o=d.getDataModel().getCellWithColSpan(R-F,i-f,true);}else if(i<f&&R<F){o=D.getDataModel().getCellWithColSpan(R,i,true);}else if(i>=f&&R<F){o=C.getDataModel().getCellWithColSpan(R,i-f,true);}else if(i<f&&R>=F){o=r.getDataModel().getCellWithColSpan(R-F,i,true);}return o;};this.getTableCellWithRowSpan=function(R,i){var o=null;if(i>=f&&R>=F){o=d.getDataModel().getCellWithRowSpan(R-F,i-f,true);}else if(i<f&&R<F){o=D.getDataModel().getCellWithRowSpan(R,i,true);}else if(i>=f&&R<F){o=C.getDataModel().getCellWithRowSpan(R,i-f,true);}else if(i<f&&R>=F){o=r.getDataModel().getCellWithRowSpan(R-F,i,true);}return o;};this.getTableCellWithSpans=function(R,i){var o=this.getTableCell(R,i);var a=i--;while(!o&&a>=0){var b=R;o=this.getTableCell(b,a);if(o&&o.isLoading()){return o;}if(!o){b--;while(!o&&b>=0){o=this.getTableCell(b,a);b--;}if(o){if(o.isLoading()){return o;}var l=o.getTableRow()+o.getRowSpan()-1;if(l<R){o=null;}}}a--;}return o;};this.getTableRowCnt=function(){return T+F;};this.getTableColCnt=function(){return t+f;};this.getTableMaxScrollRowCnt=function(){return T;};this.getTableMaxScrollColCnt=function(){return t;};this.getTableFixedRowHeaderColCnt=function(){return f;};this.getTableFixedColHeaderRowCnt=function(){return F;};this.getTableMaxDimHeaderRow=function(){return m;};this.getTableMaxDimHeaderCol=function(){return M;};};
return sap.zen.crosstab.CrosstabCellApi;});
sap.ui.predefine('sap/zen/crosstab/CrosstabContextMenu',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants"],function(q,R){"use strict";q.sap.declare("sap.zen.crosstab.CrosstabContextMenu");
sap.zen.crosstab.CrosstabContextMenu=function(c){this.getContextMenuAction=function(C,d){var o=sap.ui.getCore();var e=d;while(!o.byId(e.attr("id"))){e=e.parent();}if(e.attr("id")===c.getId()){return null;}var a=o.byId(e.attr("id"));var s=null;if(a.getCellType){s=a.getCellType();}else{return null;}var r=false;var b=null;if(c.isSelectable()===true){var S=c.getSelectionHandler();if(S&&S.hasSelection()===true){if(a.getArea().isDataArea()===true){b="sapzencrosstab-DataCellSelectData";}else if(a.getArea().isRowHeaderArea()===true){b="sapzencrosstab-HeaderCellSelectRow";}else if(a.getArea().isColHeaderArea()===true){b="sapzencrosstab-HeaderCellSelectCol";}r=!(q(e).hasClass(b));}}var A=a.getArea().getAreaType();var f="";if(A===R.TYPE_COLUMN_HEADER_AREA){f="COLS";}else if(A===R.TYPE_ROW_HEADER_AREA){f="ROWS";}else if(A===R.TYPE_DIMENSION_HEADER_AREA){var D;if(a.isSplitPivotCell()){var g=c.getHeaderInfo().getDimensionInfoByRowCol(a,"ROWS");var h=c.getHeaderInfo().getDimensionInfoByRowCol(a,"COLS");if(g&&g.bIsMeasureStructure){D=h;}else if(h&&h.bIsMeasureStructure){D=g;}}else{D=c.getHeaderInfo().getDimensionInfoByRowCol(a);}if(!D){return null;}f=D.sAxisName;}else if(s===R.TYPE_DATA_CELL){f="DATA";}else{return null;}var i=a.getTableRow();var j=a.getTableCol();var k=c.getPropertyBag().getContextMenuCommand();k=k.replace("__AXIS__",f);k=k.replace("__ROW__",i);k=k.replace("__COL__",j);k=k.replace("__ID__",C);k=k.replace("__DOM_REF_ID__",d.attr("id"));if(k.indexOf("__REMOVE_SELECTION__")>=0){k=k.replace("__REMOVE_SELECTION__",r);}var l=function(){c.getUtils().executeCommandAction(k);};c.enableClick();return l;};};
return sap.zen.crosstab.CrosstabContextMenu;});
sap.ui.predefine('sap/zen/crosstab/CrosstabHeaderInfo',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.CrosstabHeaderInfo");
sap.zen.crosstab.CrosstabHeaderInfo=function(c,h){var C=h.cols;var r=h.rows;var o=null;var R=null;var d={};var D={};var f={};var F={};var a=0;var b=0;var s=0;var A={};var e={};var g={};var j={};var i=0;var k=0;var m;var l;var p;var n={};function t(v){if(!n.hasOwnProperty(v)){n[v]={};}}function u(v,i){if(v[i].charname){v[i].sDimensionName=v[i].charname;delete v[i].charname;t(v[i].sDimensionName);}if(v[i].attrname){v[i].sAttributeName=v[i].attrname;delete v[i].attrname;}if(v[i].iskey){v[i].bIsKeyPresentation=v[i].iskey;delete v[i].iskey;}}if(C){for(i=0;i<C.length;i++){u(C,i);C[i].sAxisName="ROWS";C[i].iIndex=i;o=C[i];d[i]=o;if(f[o.sDimensionName]===undefined){f[o.sDimensionName]=i;}if(A[o.sDimensionName]===undefined){A[o.sDimensionName]=k;j[k]=i;k++;}}b=k;s=0;m=C.length-1;l=C[m].sDimensionName;for(i=m;i>0;i--){p=C[i-1].sDimensionName;if(p!==l){s=i;break;}}}if(r){k=0;for(i=0;i<r.length;i++){u(r,i);r[i].sAxisName="COLS";r[i].iIndex=i;R=r[i];D[i]=R;if(F[R.sDimensionName]===undefined){F[R.sDimensionName]=i;}if(e[R.sDimensionName]===undefined){e[R.sDimensionName]=k;g[k]=i;k++;}}a=k;}this.getDimensionNameByCol=function(v){if(d&&d[v]){return d[v].sDimensionName;}else{return null;}};this.getDimensionNameByRow=function(v){if(D&&D[v]){return D[v].sDimensionName;}else{return null;}};this.getFirstColForDimension=function(l){var v=-1;if(f[l]>=0){v=f[l];}return v;};this.getFirstRowForDimension=function(l){var v=-1;if(F[l]>=0){v=F[l];}return v;};this.getAbsoluteColIndexForDimension=function(l){var v=-1;if(A[l]>=0){v=A[l];}return v;};this.getAbsoluteRowIndexForDimension=function(l){var v=-1;if(e[l]>=0){v=e[l];}return v;};this.getRowForAbsoluteRow=function(v){var w=-1;if(g[v]>=0){w=g[v];}return w;};this.getColForAbsoluteCol=function(v){var w=-1;if(j[v]>=0){w=j[v];}return w;};this.getNumberOfDimensionsOnColsAxis=function(){if(r){return r.length;}return 0;};this.getNumberOfDimensionsOnRowsAxis=function(){if(C){return C.length;}return 0;};this.isColOfInnermostDimension=function(v){var w=this.getDimensionNameByCol(v);if(w){var x=this.getAbsoluteColIndexForDimension(w);if(x!==b-1){return false;}return true;}return false;};this.getStartColForInnermostDimension=function(){return s;};this.isRowOfInnermostDimension=function(v){var w=this.getDimensionNameByRow(v);if(w){var x=this.getAbsoluteRowIndexForDimension(w);if(x!==a-1){return false;}return true;}return false;};this.isBottomRightDimHeaderCell=function(v){return((this.isBottomRowDimHeaderCell(v)===true)&&(this.isRightColDimHeaderCell(v)===true));};this.isBottomRowDimHeaderCell=function(v){var M=c.getTableMaxDimHeaderRow();var I=((v.getTableRow()+v.getRowSpan()-1)===M);return I;};this.isRightColDimHeaderCell=function(v){var M=c.getTableMaxDimHeaderCol();var w=((v.getTableCol()+v.getColSpan()-1)===M);return w;};this.getDimensionInfoForNonSplitPivotCell=function(v){var w;if(v.getScalingAxis()==="ROWS"){w=r[v.getTableRow()];}else if(v.getScalingAxis()==="COLS"){w=C[v.getTableCol()];}return w;};this.getDimensionInfoForSplitPivotCell=function(v,S){var w;if(S){if(S=="ROWS"){w=C[v.getTableCol()];}else if(S=="COLS"){w=r[v.getTableRow()];}}return w;};this.getDimensionInfoByRowCol=function(v,S){var w=null;var x=v.getTableRow();var y=v.getTableCol();if(v.isPivotCell()===true){if(v.isSplitPivotCell()===true){w=this.getDimensionInfoForSplitPivotCell(v,S);}else{w=this.getDimensionInfoForNonSplitPivotCell(v);}}else if(this.isBottomRowDimHeaderCell(v)===true){if(C){w=C[y];}else{w=r[x];}}else if(this.isRightColDimHeaderCell(v)===true){if(r){w=r[x];}else{w=C[y];}}return w;};this.getDimensionInfoByRow=function(v){var w=null;if(r){w=r[v];}return w;};this.getDimensionInfoByCol=function(v){var w=null;if(C){w=C[v];}return w;};this.hasDimensionsOnRowsAxis=function(){if(C){return true;}return false;};this.hasDimensionsOnColsAxis=function(){if(r){return true;}return false;};this.findIndexInterval=function(v,w){var I;var x;var L;var y;var z={"iStartIndex":-1,"iEndIndex":-1};if(w==="ROWS"){x=C;}else if(w==="COLS"){x=r;}L=x.length;y=null;for(I=0;I<L&&z.iStartIndex<0;I++){y=x[I].sDimensionName;if(y===v){z.iStartIndex=I;}}if(z.iStartIndex>=0){for(I=z.iStartIndex;I<L&&z.iEndIndex<0;I++){y=x[I].sDimensionName;if(y!==v){z.iEndIndex=I-1;}}if(z.iEndIndex<0){z.iEndIndex=L-1;}}return z;};this.isEqualDimInfo=function(v,w){if(v.sDimensionName!==w.sDimensionName){return false;}if(v.sAttributeName!==w.sAttributeName){return false;}if(v.bIsKeyPresentation!==w.bIsKeyPresentation){return false;}if(v.bIsTextPresentation!==w.bIsTextPresentation){return false;}if(v.bIsMeasureStructure!==w.bIsMeasureStructure){return false;}if(v.bIsStructure!==w.bIsStructure){return false;}if(v.bIsScaling!==w.bIsScaling){return false;}return true;};this.includeBottomRightCell=function(i,v,w){var x;var y;var I=true;if(this.isBottomRightDimHeaderCell(v)===true){if(!v.isSplitPivotCell()&&i>0){x=w[i];y=w[i-1];I=(x.sDimensionName===y.sDimensionName)&&(!x.bIsScaling);}}return I;};this.getCellsForInterval=function(I,v){var w;var i=I.iStartIndex;var M=c.getTableMaxDimHeaderRow();var x=c.getTableMaxDimHeaderCol();var y=[];var z;var S=I.iStartIndex===I.iEndIndex;while(i<=I.iEndIndex){z=true;if(v==="ROWS"){w=c.getTableCellWithColSpan(M,i);z=S||this.includeBottomRightCell(i,w,C,r);i=i+w.getColSpan();}else if(v==="COLS"){w=c.getTableCellWithRowSpan(i,x);z=S||this.includeBottomRightCell(i,w,r,C);i=i+w.getRowSpan();}if(z===true){y.push(w);}}return y;};this.getCellsWithSameDimensionByDimInfo=function(v){var I;var w;var l;var x;if(v){l=v.sDimensionName;x=v.sAxisName;w=this.findIndexInterval(l,x);I=this.getCellsForInterval(w,x);}return I;};this.getCellsWithSameDimension=function(v,w){var x;var I;if(!w&&v.isPivotCell()===true&&v.isSplitPivotCell()===true){return[];}else{x=this.getDimensionInfoByRowCol(v,w);}I=this.getCellsWithSameDimensionByDimInfo(x);return I;};this.setupPivotCell=function(){var v;var I=false;var w=false;var x=-1;var y=-1;var z;var B;v=c.getTableCellWithSpans(c.getTableMaxDimHeaderRow(),c.getTableMaxDimHeaderCol());if(v){y=v.getTableRow();x=v.getTableCol();if(this.isBottomRightDimHeaderCell(v)===true){I=this.hasDimensionsOnRowsAxis()===true&&this.hasDimensionsOnColsAxis()===true;}v.setPivotCell(I);z=this.getDimensionInfoByCol(x);B=this.getDimensionInfoByRow(y);if(v.isPivotCell()===true){if(!(z&&z.bIsScaling)&&!(B&&B.bIsScaling)){w=true;}}v.setSplitPivotCell(w);if(z&&z.bIsScaling===true){v.setScalingAxis("ROWS");}else if(B&&B.bIsScaling===true){v.setScalingAxis("COLS");}}return v;};this.getDimensionInfoForMemberCell=function(v){if(v.getArea().isRowHeaderArea()){return C[v.getTableCol()];}else if(v.getArea().isColHeaderArea()){return r[v.getTableRow()];}return null;};this.getMemberCellsForSameDimension=function(v){var w;var E;if(v.getArea().isRowHeaderArea()){if(C){E=C[C.length-1].bIsScaling;}w=this.getRowHeaderMemberCellsForSameDimension(v,E);}else if(v.getArea().isColHeaderArea()){if(r){E=r[r.length-1].bIsScaling;}w=this.getColHeaderMemberCellsForSameDimension(v,E);}return w;};this.getRowHeaderMemberCellsForSameDimension=function(v,E){var w;var M;var x;var i=0;var I;var y;var z;w=this.getDimensionInfoByCol(v.getTableCol());I=this.findIndexInterval(w.sDimensionName,"ROWS");x=[];y=c.getRowHeaderArea();z=y.getColCnt()-1;i=I.iStartIndex;while(i<=I.iEndIndex){M=y.getCellWithColSpan(v.getRow(),i);if(M){if(E){if(M.getCol()<z){x.push(M);}}else{x.push(M);}i=i+M.getColSpan();}else{i++;}}return x;};this.getColHeaderMemberCellsForSameDimension=function(v,E){var w;var M;var x;var i=0;var I;var y;var z;w=this.getDimensionInfoByRow(v.getTableRow());I=this.findIndexInterval(w.sDimensionName,"COLS");x=[];y=c.getColumnHeaderArea();z=y.getRowCnt()-1;i=I.iStartIndex;while(i<=I.iEndIndex){M=y.getCellWithRowSpan(i,v.getCol());if(M){if(E){if(M.getRow()<z){x.push(M);}}else{x.push(M);}i=i+M.getRowSpan();}else{i++;}}return x;};this.findStartIndexOfPreviousDimension=function(v,w){var I;var M;var i;var x;var y;var z=0;var P;if(w==="ROWS"){I=C;}else if(w==="COLS"){I=r;}if(I){M=I.length-1;i=M;x=false;while(i>=0&&!x){y=I[i];if(y.sDimensionName===v){x=true;}else{i--;}}while(y.sDimensionName===v&&i>=0){y=I[i];if(y.sDimensionName===v){i--;}}P=y.sDimensionName;while(y.sDimensionName===P&&i>=0){y=I[i];if(y.sDimensionName!==P){z=i+1;}else{i--;}}}return z;};this.isFirstDimensionOnAxis=function(v){if(v.sAxisName==="ROWS"&&C){return C[0].sDimensionName===v.sDimensionName;}else if(v.sAxisName==="COLS"&&r){return r[0].sDimensionName===v.sDimensionName;}return true;};this.isDimensionInCrosstab=function(v){if(n){if(n.hasOwnProperty(v)){return true;}}return false;};this.hasOnlyMeasureStructure=function(){var I=null;var i=0;var H=false;if(!C&&r){I=r;}else if(!r&&C){I=C;}if(I&&I.length>0){H=true;for(i=0;i<I.length;i++){if(!I[i].bIsMeasureStructure){H=false;break;}}}return H;};};
return sap.zen.crosstab.CrosstabHeaderInfo;});
sap.ui.predefine('sap/zen/crosstab/CrosstabRenderer',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils"],function(q,R,U){"use strict";q.sap.declare("sap.zen.crosstab.CrosstabRenderer");sap.zen.crosstab.CrosstabRenderer={};
sap.zen.crosstab.CrosstabRenderer.render=function(r,c){"use strict";c.prepareContainer();var a=r;var C="";var s=c.getWidth();if(s==="auto"){s="100%";}var b=c.getHeight();if(b==="auto"){b="100%";}a.write("<div");a.writeControlData(c);a.addStyle("overflow","hidden");if(s){a.addStyle("width",s);}if(b){a.addStyle("height",b);}if(U.isMainMode()){C="sapzencrosstab-FontSize-MainMode ";}C+="sapzencrosstab-CrosstabComponent ";if(c.getTransferDataCommand()&&c.getTransferDataCommand().length>0){C+="sapzencrosstab-InputEnabled ";}if(c.aCustomStyleClasses&&c.aCustomStyleClasses.length>0){var i=0;for(i=0;i<c.aCustomStyleClasses.length;i++){C=C+c.aCustomStyleClasses[i]+" ";}}if(c.getRenderMode()===R.RENDERMODE_FILL){a.addStyle("visibility","hidden");C+="sapzencrosstab-TableDiv sapzencrosstab-TableDivBackground";}a.writeAttributeEscaped("class",C);a.writeStyles();a.write(">");if(c.getRenderMode()===R.RENDERMODE_COMPACT){a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_altRenderModeTableDiv");a.addStyle("visibility","hidden");a.addStyle("width","100%");a.addStyle("height","100%");a.writeAttributeEscaped("class","sapzencrosstab-TableDiv sapzencrosstab-TableDivBackground");a.writeStyles();a.write(">");}a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_renderSizeDiv");a.writeAttribute("class","sapzencrosstab-RenderSizeDiv");a.write(">");a.write("<table");a.writeAttributeEscaped("id",c.getId()+"_table");a.writeAttribute("class","sapzencrosstab-Crosstab");a.write(">");a.write("<tr");a.writeAttributeEscaped("id",c.getId()+"_upperSection");a.write(">");sap.zen.crosstab.CrosstabRenderer.writeCell(a,c.getId()+"_upperLeft",c.getDimensionHeaderArea(),c);sap.zen.crosstab.CrosstabRenderer.writeCell(a,c.getId()+"_upperRight",c.getColumnHeaderArea(),c);a.write("</tr>");a.write("<tr");a.writeAttributeEscaped("id",c.getId()+"_lowerSection");a.write(">");sap.zen.crosstab.CrosstabRenderer.writeCell(a,c.getId()+"_lowerLeft",c.getRowHeaderArea(),c);sap.zen.crosstab.CrosstabRenderer.writeCell(a,c.getId()+"_lowerRight",c.getDataArea(),c);a.write("</tr>");a.write("</table>");a.write("</div>");if(c.getPropertyBag().hasToolbar()){a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_toolbar");a.writeAttributeEscaped("class","sapzencrosstab-ToolbarDiv");a.addStyle("position","absolute");a.addStyle("bottom","0px");a.writeStyles();a.write(">");a.write("</div>");}a.write("<div");a.writeAttribute("id",c.getId()+"_loadingAnimationDiv");a.writeAttribute("class","sapzencrosstab-loadingAnimationDiv");a.addStyle("visibility","hidden");a.writeStyles();a.write(">");a.write("<div");a.writeAttribute("class","sapzencrosstab-loadingAnimation");a.write(">");a.write("</div>");a.write("</div>");a.write("<div");a.writeAttribute("id",c.getId()+"_measureDiv");a.writeAttribute("class",c.getPropertyBag().isCozyMode()?"sapzencrosstab-HierarchyIndentCozy":"sapzencrosstab-HierarchyIndent");a.addStyle("visibility","none");a.writeStyles();a.write(">");a.write("</div>");a.write("<div");a.writeAttribute("id",c.getId()+"_exceptionMeasureDiv");a.writeAttribute("class","sapzencrosstab-SymbolAlertDimensions");a.addStyle("visibility","none");a.writeStyles();a.write(">");a.write("</div>");if(c.isUserHeaderResizeAllowed()&&(c.hasDataArea()||c.hasColHeaderArea())&&(c.hasDimensionHeaderArea()||c.hasRowHeaderArea())){a.write("<div");a.writeAttribute("id",c.getId()+"_headerResizeHandle");a.writeAttribute("class","sapzencrosstab-headerResizeHandleWidth");a.addStyle("position","absolute");a.addStyle("top","0px");a.addStyle("height","100%");a.writeStyles();a.write(">");a.write("</div>");}if(c.getPropertyBag().isEnableColResize()){a.write("<div");a.writeAttribute("id",c.getId()+"_colResizeRuler");a.writeAttribute("class","sapzencrosstab-colResizeRuler");a.addStyle("visibility","hidden");a.writeStyles();a.write(">");a.write("</div>");}if(c.getRenderMode()===R.RENDERMODE_COMPACT){a.write("</div>");}a.write("<div");a.writeAttribute("id",c.getId()+"_resizeFrame");a.writeAttribute("class","sapzencrosstab-TableDiv");a.addStyle("visibility","hidden");a.addStyle("width",s);a.addStyle("height",b);a.writeStyles();a.write(">");a.write("</div>");a.write("<div");a.writeAttribute("id",c.getId()+"_resizeDiv");a.writeAttribute("class","sapzencrosstab-ResizeDiv");a.addStyle("width","100%");a.addStyle("height","100%");a.addStyle("visibility","hidden");a.writeStyles();a.write(">");a.write("</div>");if(c.getGlassPane().length===0){a.write("<div");a.writeAttribute("id",c.getId()+"_glassPane");a.addStyle("position","absolute");a.addStyle("top","0px");if(c.getPropertyBag().isRtl()){a.addStyle("right","0px");}else{a.addStyle("left","0px");}a.addStyle("width","100%");a.addStyle("height","100%");a.writeStyles();a.write(">");a.write("</div>");}a.write("</div>");};
sap.zen.crosstab.CrosstabRenderer.writeCell=function(r,i,a,c){r.write("<td");r.writeAttribute("id",i);r.addStyle("padding","0px");r.writeStyles();r.write(">");r.write("<div");r.writeAttribute("id",i+"_scrollDiv");r.addStyle("overflow","hidden");r.writeStyles();r.write(">");a.renderArea(r,c);r.write("</div>");r.write("</td>");};
return sap.zen.crosstab.CrosstabRenderer;});
sap.ui.predefine('sap/zen/crosstab/CrosstabTestProxy',["jquery.sap.global","sap/zen/crosstab/ColResizer"],function(q,C){"use strict";q.sap.declare("sap.zen.crosstab.CrosstabTestProxy");
sap.zen.crosstab.CrosstabTestProxy=function(c,E){var t=false;var o=new C(c);function f(a,r,i,A){var b=a.getDataModel().getCellWithSpan(r,i);if(b){var e={};var d=q(document.getElementById(b.getId()));if(d&&d.length>0){e.target=d[0];A(e);}}}this.hoverCell=function(a,r,i){f(a,r,i,E.executeOnMouseEnter);};this.selectCell=function(a,r,i){f(a,r,i,E.executeOnClickAction);};this.setTestAction=function(i){t=i;};this.getTestAction=function(){return t;};this.testClickSortOrHierarchy=function(a,r,i){var b=a.getDataModel().getCellWithSpan(r,i);if(b){var T=q("#sort_"+b.getId());if(T&&T.length>0){var e={};e.target=T[0];E.executeOnClickAction(e);}}};this.doubleClickColResize=function(r,i){var a=c.getColumnHeaderArea().getCell(r,i);if(a){var I="resi_"+a.getId();var e={};e.target={};e.target.id=I;o.onDoubleClick(e);}};};
return sap.zen.crosstab.CrosstabTestProxy;});
sap.ui.predefine('sap/zen/crosstab/DataArea',["jquery.sap.global","sap/zen/crosstab/BaseArea","sap/zen/crosstab/rendering/RenderingConstants"],function(q,B,R){"use strict";q.sap.declare("sap.zen.crosstab.DataArea");
sap.zen.crosstab.DataArea=function(c){B.call(this,c);this.sAreaType=R.TYPE_DATA_AREA;};
sap.zen.crosstab.DataArea.prototype=q.sap.newObject(B.prototype);
sap.zen.crosstab.DataArea.prototype.renderArea=function(r){this.renderContainerStructure(r,"sapzencrosstab-DataArea",this.oCrosstab.isVCutOff(),this.oCrosstab.isHCutOff());};
sap.zen.crosstab.DataArea.prototype.insertCell=function(c,r,C){sap.zen.crosstab.BaseArea.prototype.insertCell.call(this,c,r,C);if(C===this.oDataModel.getColCnt()-1&&c){c.addStyle(R.STYLE_LAST_IN_ROW);}if(r===this.oDataModel.getRowCnt()-1&&c){c.addStyle(R.STYLE_LAST_IN_COL);}};
sap.zen.crosstab.DataArea.prototype.getSelectedCellsByHeaderSelection=function(h,r){var o={};var a=h.getArea();if(a.isRowHeaderArea()){var s=h.getRow();var e=0;var S=0;if(!r){e=Math.min((s+h.getRowSpan()),(this.getRenderStartRow()+this.getRenderRowCnt()));S=this.getRenderStartCol();}else{e=s+h.getRowSpan();}for(var i=s;i<e;i++){var c=this.oDataModel.getAllLoadedCellsByRow(this,i);for(var j=0;j<c.length;j++){o[c[j].getId()]=c[j];}}}else if(a.isColHeaderArea()){var E=0;if(!r){E=Math.min((S+h.getColSpan()),(this.getRenderStartCol()+this.getRenderColCnt()));s=this.getRenderStartRow();}else{E=S+h.getColSpan();}for(i=S;i<E;i++){var C=this.oDataModel.getAllLoadedCellsByCol(this,i);for(j=0;j<C.length;j++){o[C[j].getId()]=C[j];}}}return o;};
return sap.zen.crosstab.DataArea;});
sap.ui.predefine('sap/zen/crosstab/DataCell',["jquery.sap.global","sap/ui/core/Control","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/library"],function(q,C,a,R,U){"use strict";q.sap.declare("sap.zen.crosstab.DataCell");
C.extend("sap.zen.crosstab.DataCell",{metadata:{library:"sap.zen.crosstab",properties:{text:{type:"string",group:"Misc",defaultValue:null},area:{type:"object",group:"Misc",defaultValue:null},row:{type:"int",group:"Misc",defaultValue:null},col:{type:"int",group:"Misc",defaultValue:null},tableRow:{type:"int",group:"Misc",defaultValue:null},tableCol:{type:"int",group:"Misc",defaultValue:null}}}});
sap.zen.crosstab.DataCell.prototype.init=function(){"use strict";this.aStyles=[];this.bLoading=false;this.bIsEntryEnabled=false;this.sUnit="";this.sPassiveCellType=R.PASSIVE_CELL_TYPE_NORMAL;this.iNumberOfLineBreaks=0;};
sap.zen.crosstab.DataCell.prototype.getCellType=function(){return R.TYPE_DATA_CELL;};
sap.zen.crosstab.DataCell.prototype.isHeaderCell=function(){return false;};
sap.zen.crosstab.DataCell.prototype.getCssClassNames=function(i,I,b){return a.getCssClasses(this.aStyles,i,I,b);};
sap.zen.crosstab.DataCell.prototype.getStyleIdList=function(){return this.aStyles;};
sap.zen.crosstab.DataCell.prototype.setStyleIdList=function(n){this.aStyles=n;};
sap.zen.crosstab.DataCell.prototype.addStyle=function(s){var S=a.getStyleId(s,R.TYPE_DATA_CELL);if(this.aStyles.indexOf(S)===-1){this.aStyles.push(S);}};
sap.zen.crosstab.DataCell.prototype.removeStyle=function(s){var S=a.getStyleId(s,R.TYPE_DATA_CELL);var i=this.aStyles.indexOf(S);if(i!==-1){this.aStyles.splice(i,1);}};
sap.zen.crosstab.DataCell.prototype.hasStyle=function(s){var S=a.getStyleId(s,R.TYPE_DATA_CELL);var i=this.aStyles.indexOf(S);if(i===-1){return false;}else{return true;}};
sap.zen.crosstab.DataCell.prototype.getColSpan=function(){return 1;};
sap.zen.crosstab.DataCell.prototype.getRowSpan=function(){return 1;};
sap.zen.crosstab.DataCell.prototype.getEffectiveColSpan=function(){return 1;};
sap.zen.crosstab.DataCell.prototype.getEffectiveRowSpan=function(){return 1;};
sap.zen.crosstab.DataCell.prototype.isLoading=function(){return this.bLoading;};
sap.zen.crosstab.DataCell.prototype.setLoading=function(l){this.bLoading=l;};
sap.zen.crosstab.DataCell.prototype.isSelectable=function(){return false;};
sap.zen.crosstab.DataCell.prototype.getUnescapedText=function(){return U.unEscapeDisplayString(this.getText());};
sap.zen.crosstab.DataCell.prototype.setEntryEnabled=function(i){this.bIsEntryEnabled=i;};
sap.zen.crosstab.DataCell.prototype.isEntryEnabled=function(){return this.bIsEntryEnabled;};
sap.zen.crosstab.DataCell.prototype.setUnit=function(u){this.sUnit=u;};
sap.zen.crosstab.DataCell.prototype.getUnit=function(){return this.sUnit;};
sap.zen.crosstab.DataCell.prototype.getPassiveCellType=function(){return this.sPassiveCellType;};
sap.zen.crosstab.DataCell.prototype.setPassiveCellType=function(p){this.sPassiveCellType=p;};
sap.zen.crosstab.DataCell.prototype.setNumberOfLineBreaks=function(n){this.iNumberOfLineBreaks=n;};
sap.zen.crosstab.DataCell.prototype.getNumberOfLineBreaks=function(){return this.iNumberOfLineBreaks;};
return sap.zen.crosstab.DataCell;});
sap.ui.predefine('sap/zen/crosstab/DataCellRenderer',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/IDataCell"],function(q,R,I){"use strict";q.sap.declare("sap.zen.crosstab.DataCellRenderer");sap.zen.crosstab.DataCellRenderer={};
sap.zen.crosstab.DataCellRenderer.render=function(r,c){"use strict";var a=c.getArea();var C=a.getCrosstab();var f=a.getRenderCellCallback();var s=c.getText();var A=null;if(f){var o=f(new I(c));A=o.additionalStyles;s=o.renderText;}var b=r;b.write("<td");b.writeControlData(c);var d=c.getCssClassNames(C.isIE8Mode(),C.getPropertyBag().isRtl(),C.getUtils().isMsIE());b.writeAttributeEscaped("class",d);b.writeAttributeEscaped("tabindex",R.TABINDEX);b.write(">");b.write("<div");b.writeAttributeEscaped("id",c.getId()+"_contentDiv");b.writeAttributeEscaped("tabindex",R.TABINDEX);var e="sapzencrosstab-DataCellContentDiv";if(c.isLoading()){e+=" sapzencrosstab-LoadingCellContentDiv";}b.writeAttributeEscaped("class",e);if(A){for(var S in A){b.addStyle(S,A[S]);}}b.writeStyles();b.write(">");b.writeEscaped(s);b.write("</div>");b.write("</td>");};
return sap.zen.crosstab.DataCellRenderer;});
sap.ui.predefine('sap/zen/crosstab/DimensionHeaderArea',["jquery.sap.global","sap/zen/crosstab/BaseArea","sap/zen/crosstab/rendering/RenderingConstants"],function(q,B,R){"use strict";q.sap.declare("sap.zen.crosstab.DimensionHeaderArea");
sap.zen.crosstab.DimensionHeaderArea=function(c){B.call(this,c);this.sAreaType=R.TYPE_DIMENSION_HEADER_AREA;};
sap.zen.crosstab.DimensionHeaderArea.prototype=q.sap.newObject(B.prototype);
sap.zen.crosstab.DimensionHeaderArea.prototype.renderArea=function(r){var c="sapzencrosstab-DimensionHeaderArea";if(this.oCrosstab.getPropertyBag().isMobileMode()){c+=" sapzencrosstab-MobileHeaderSeparator";}this.renderContainerStructure(r,c,false,false);};
sap.zen.crosstab.DimensionHeaderArea.prototype.getPageManager=function(){return null;};
return sap.zen.crosstab.DimensionHeaderArea;});
sap.ui.predefine('sap/zen/crosstab/EventHandler',["jquery.sap.global","sap/zen/crosstab/TouchHandler","sap/zen/crosstab/SelectionHandler","sap/zen/crosstab/rendering/CrossRequestManager","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/keyboard/CrosstabKeyboardNavHandler","sap/zen/crosstab/HeaderResizer","sap/zen/crosstab/ColResizer"],function(q,T,S,C,R,U,a,H,b){"use strict";q.sap.declare("sap.zen.crosstab.EventHandler");
sap.zen.crosstab.EventHandler=function(c){var t=this;var r=c.getRenderEngine();var o=r.getCrossRequestManager();var k=new a(c,this);var m=null;var p=false;var d=null;var s="";var I=null;var h=null;var f=null;this.handleHierarchyClick=function(e,i,u){var v=l(i);var w=v.getHierarchyAction();var D=v.getDrillState();if(D!=="L"){o.saveTableDimensions();o.saveHScrollInfo(u);o.saveVScrollInfo(u);n(w);}U.cancelEvent(e);};this.handleSortClick=function(e,i,u){var v=l(i);var w=v.getSortAction();if(w||c.getTestProxy().getTestAction()){o.saveVScrollInfo(u);o.saveHScrollInfo(u);o.saveColWidths();if(!c.getTestProxy().getTestAction()){n(w);}}U.cancelEvent(e);};this.findTargetId=function(D){var e=null;var J;var i;i=q(D).attr("xtabspacer-cellid");if(i&&i.length>0){e=i;}else{J=q(D).closest("div");if(J.length>0){var u=J.attr("id");if(u){var v=u.indexOf("_contentDiv");if(v>-1){e=u.slice(0,v);}}}}return e;};this.executeOnClickAction=function(e){if(p){return;}m=null;p=false;var i=e.target.id;if(!i){i=t.findTargetId(e.target);}if(!i){return;}var u=j(i);if(u==="sort"){t.handleSortClick(e,i,u);}else if(u==="hier"){t.handleHierarchyClick(e,i,u);}else if(u==="__ce"){t.handleClickOnCell(e,i);}else if(u==="vhlp"){t.handleValueHelpClick(i);}U.cancelEvent(e);};this.handleClickOnCell=function(e,i){if(c.hasLoadingPages()){U.cancelEvent(e);return;}if(i){var u=c.getUtils().getCellIdFromContenDivId(i);if(u){var M=sap.ui.getCore().getControl(u);if(M){if(M.isEntryEnabled()){t.handleInputEnabledCell(i,-1,-1);}else{if(c.getSelectionMode()!==undefined&&c.getSelectionMode()!==""){var F="";if(e.ctrlKey){F="CTRL";}else if(e.shiftKey){F="SHIFT";}c.getSelectionHandler().handleCellClick(M,F);}}}}}};this.postPlanningValue=function(){if(c.isPlanningMode()===true&&I&&I.length>0){var J=q(document.activeElement);if(J.is("input")&&I.attr("id")===J.attr("id")){var i=I.val()||"";if(i!==s){I.blur();}}}};this.provideInputEnabledCell=function(M,i,u,v,w){I=u.find("input");if(I.length===0){var x=u.text();var y=u.html();var z=M.getArea().isDataArea();var A=null;var B=function(V){var e=M.getUnit();if(e&&e!==""){var K=V.toUpperCase().indexOf(e.toUpperCase());if(K!==-1){if(K===0){V=V.substring(K+e.length);}else{V=V.substring(0,K);}}}var O=c.calculateOffset(M);V=q.trim(V);var L=c.getTransferDataCommand();L=L.replace("__ROW__",M.getRow()+"");L=L.replace("__COL__",(M.getCol()-O)+"");L=L.replace("__VALUE__",V);L=L.replace("__CTYPE__",M.getPassiveCellType());o.saveVScrollInfo("plan");o.saveHScrollInfo("plan");o.saveColWidths();n(L,true);};var D=function(e){if(I.val()!==x){B(I.val());var K=q("<div></div>").text(x).html();y=y.replace(K,I.val());}F(e);};var E=function(e){var K=true;var i=null;var L=null;var N=null;if(e&&e.relatedTarget&&e.relatedTarget.id&&c.getValueHelpStatus()!==sap.zen.crosstab.VHLP_STATUS_OPENING){i=e.relatedTarget.id;N=q(document.getElementById(i));L=c.getTableDiv();K=N.closest(L).length>0;}return K;};var F=function(e){var K=q(document.getElementById(i+"_contentDiv"));K.html(y);if(A&&z){K.width(A);}if(E(e)===true){K.focus();}else{k.reset();s="";I.off("keydown focusout");I=null;}};var G=function(e){if(e.which===27){F();U.cancelEvent(e);}if(e.which===13){if(I.val()!==x){U.cancelEvent(e);B(I.val());}else{F();if(c.isIE8Mode()){k.keyboardNavKeyHandler(e);}}}if(e.which===38||e.which===40){return true;}if(e.which===37||e.which===39){if(!e.ctrlKey&&!e.altKey&&!e.shiftKey){U.stopEventPropagation(e);}return true;}if(e.which===115&&!z){t.invokeValueHelp(M,"vhlp_"+M.getId());}return null;};var J=0;if(z){J=u.innerWidth();A=U.getWidthFromStyle(u);}u.html("<input id=\""+i+"_input"+"\" type=\"text\" value=\""+x+"\" />");if(z){u.width(J+"px");}I=q(document.getElementById(i+"_input"));if(U.isMainMode()){I.addClass("sapzencrosstab-EntryEnabledInput-MainMode");}else{I.addClass("sapzencrosstab-EntryEnabledInput");}I.on("keydown",G);I.focus();c.getUtils().selectTextInInputField(I,v,w);I.on("focusout",D);}else{c.getUtils().selectTextInInputField(I,v,w);}s=I.val()||"";};this.handleValueHelpClick=function(e){var i=l(e);t.invokeValueHelp(i,e);};this.invokeValueHelp=function(e,i){if(e){k.focusNewCell(e,-1,-1);var u=c.getCallValueHelpCommand();var O=c.calculateOffset(e);o.saveVScrollInfo("plan");o.saveHScrollInfo("plan");o.saveColWidths();u=u.replace("__ROW__",e.getRow());u=u.replace("__COL__",e.getCol()-O);u=u.replace("__DOM_REF_ID__",i);n(u,true);}};this.handleInputEnabledCell=function(e,i,u){if(e){e=c.getUtils().getCellIdFromContenDivId(e);if(e){var M=sap.ui.getCore().getControl(e);if(M){if(M.getArea().isDataArea()||M.getArea().isRowHeaderArea()){k.focusNewCell(M,i,u);}}}}};this.sendSelectCommand=function(e){var i=-1;var u=-1;var A="";if(e){var v=e.getArea();if(v.isRowHeaderArea()){A="ROWS";}else if(v.isColHeaderArea()){A="COLUMNS";}else{A="DATA";}i=e.getRow();u=e.getCol();}var w=c.getOnSelectCommand();w=w.replace("__ROW__",i+"");w=w.replace("__COL__",u+"");w=w.replace("__AXIS__",A);n(w,true);};this.getContextElement=function(e,u){var D=[];var i=0;var J=q(document.elementFromPoint(e,u));var v=J.closest(".zenControl");var w=v.attr("id");w=J.attr("id");while(w&&w.indexOf("droparea")>-1){D.push(J);J.css("display","none");J=q(document.elementFromPoint(e,u));w=J.attr("id");}for(i=0;i<D.length;i++){D[i].css("display","block");}return J;};this.onContextMenuClick=function(e){var J=t.getContextElement(e.clientX,e.clientY);var i=c.createContextMenu();var u=i.getContext(J);if(u){var v=c.getPropertyBag().getContextMenuCommand();v=v.replace("__AXIS__",u.sAxis);v=v.replace("__ROW__",u.iRow);v=v.replace("__COL__",u.iCol);v=v.replace("__ID__","CONTEXT_MENU");v=v.replace("__DOM_REF_ID__",J.attr("id"));if(v.indexOf("__REMOVE_SELECTION__")>=0){v=v.replace("__REMOVE_SELECTION__",u.bRemoveSelection);}var D=sap.bi.framework.getService(null,"zen.rt.components.dynamicmenu");D.showDynamicMenu("ExpandedMenuBuilder",J.context,"",{"command":v},"",["crosstabActions"],"",false);}U.cancelEvent(e);c.enableClick();};this.attachEvents=function(){var A=false;var J=c.getRenderSizeDiv();var i=c.getTableDiv();J.unbind("mousedown");J.bind("mousedown",this.onMouseDown);if(c.getPropertyBag().isMobileMode()||c.getPropertyBag().isTestMobileMode()){J.unbind("click");J.bind("click",function(e){U.cancelEvent(e);});J.unbind("mousedown");J.bind("mousedown",function(e){U.cancelEvent(e);});d=new T(this,c);d.registerTouchEvents(J);k.setEnabled(false);if(c.getPropertyBag().isEnableColResize()===true){var u=new b(c);d.setColResizer(u);}}else{J.unbind("mouseup",this.onMouseUp);J.bind("mouseup",this.onMouseUp);i.unbind("mouseup",this.onMouseUp);i.bind("mouseup",this.onMouseUp);J.unbind("click");J.bind("click",this.executeOnClickAction);if(c.isSelectable()===true&&c.isHoveringEnabled()===true){J.unbind("mouseover");J.bind("mouseover",this.executeOnMouseEnter);J.unbind("mouseout");J.bind("mouseout",this.executeOnMouseOut);}k.setEnabled(c.isPlanningMode());k.attachEvents(J);if(c.getUserHeaderWidthCommand()&&c.getUserHeaderWidthCommand().length>0){h=new H(c);h.initialize();A=true;}if(c.getPropertyBag().isEnableColResize()===true){f=new b(c);f.initialize();A=true;}if(A===true){J.unbind("mousemove",this.onMouseMove);J.bind("mousemove",this.onMouseMove);}}};this.onMouseMove=function(e){if(f&&f.isResizeAction()){f.onMouseMove(e);}else if(h&&h.isResizeAction()){h.onMouseMove(e);}};this.onMouseDown=function(e){var i=e.target.id;m=i;};function g(i,e){var u=false;var D=document.getElementById(i);if(D){var v=D.getBoundingClientRect();var w=(v.left<e.clientX)&&(e.clientX<v.right);var V=(v.bottom>e.clientY)&&(e.clientY>v.top);u=w&&V;}return u;}this.onMouseUp=function(e){if(f&&f.isResizeAction()){f.onMouseUp(e);}else if(h&&h.isResizeAction()){h.onMouseUp(e);}else{p=false;if(m){var i=c.getUtils().getCellIdFromContenDivId(m);if(g(i,e)){var u=sap.ui.getCore().getControl(i);if(u){if(c.isPlanningMode()){var D=document.getElementById(m);var P=null;if(D){P=c.getUtils().getSelectionParams(D);}if(P.iSelectionStartPos>=0||P.iSelectionEndPos>=0){p=true;t.handleInputEnabledCell(e.target.id,P.iSelectionStartPos,P.iSelectionEndPos);}}}}else{if(!c.isDragAction()){U.cancelEvent(e);U.stopEventPropagation(e);}p=true;}}}};this.restoreFocusOnCell=function(){k.restoreFocusOnCell();};function j(i){var A=i.slice(0,4);return A;}function l(i){var e=i.slice(5);return sap.ui.getCore().getControl(e);}function n(A,D){if(A){if(!D){}c.getUtils().executeCommandAction(A);}}this.handleHoverEntry=function(e){if(e){var i=c.getUtils().getCellIdFromContenDivId(e);if(i&&i!==undefined){var M=sap.ui.getCore().getControl(i);if(M&&M!==undefined){c.getSelectionHandler().handleCellHoverEntry(M);}}}};this.executeOnMouseEnter=function(e){var P=null;var i=e.target.id;if(c.hasLoadingPages()){U.cancelEvent(e);return;}if(!i){i=t.findTargetId(e.target);}if(!i){return;}P=j(i);if(P==="__ce"){t.handleHoverEntry(i);}U.cancelEvent(e);};this.executeOnMouseOut=function(e){c.getSelectionHandler().handleCellHoverOut(e);U.cancelEvent(e);};this.enableClick=function(){p=false;m=null;};this.getColResizer=function(){return f;};};
return sap.zen.crosstab.EventHandler;});
sap.ui.predefine('sap/zen/crosstab/HeaderCell',["jquery.sap.global","sap/ui/core/Control","sap/zen/crosstab/IHeaderCell","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/library"],function(q,C,I,a,R){"use strict";q.sap.declare("sap.zen.crosstab.HeaderCell");
C.extend("sap.zen.crosstab.HeaderCell",{metadata:{library:"sap.zen.crosstab",properties:{rowSpan:{type:"int",group:"Misc",defaultValue:null},colSpan:{type:"int",group:"Misc",defaultValue:null},text:{type:"string",group:"Misc",defaultValue:null},formatter:{type:"object",group:"Misc",defaultValue:null},mergeKey:{type:"string",group:"Misc",defaultValue:null},sort:{type:"string",group:"Misc",defaultValue:null},sortAction:{type:"string",group:"Misc",defaultValue:null},area:{type:"object",group:"Misc",defaultValue:null},effectiveColSpan:{type:"int",group:"Misc",defaultValue:null},effectiveRowSpan:{type:"int",group:"Misc",defaultValue:null},row:{type:"int",group:"Misc",defaultValue:null},col:{type:"int",group:"Misc",defaultValue:null},level:{type:"int",group:"Misc",defaultValue:null},drillState:{type:"string",group:"Misc",defaultValue:null},hierarchyAction:{type:"string",group:"Misc",defaultValue:null},hierarchyTooltip:{type:"string",group:"Misc",defaultValue:null},htmlIE8RowSpan:{type:"int",group:"Misc",defaultValue:1},sortTextIndex:{type:"int",group:"Misc",defaultValue:null},tableRow:{type:"int",group:"Misc",defaultValue:null},tableCol:{type:"int",group:"Misc",defaultValue:null},alignment:{type:"string",group:"Misc",defaultValue:null},memberId:{type:"string",group:"Misc",defaultValue:null},parentMemberId:{type:"string",group:"Misc",defaultValue:null},nodeAlignment:{type:"string",group:"Misc",defaultValue:null}}}});
sap.zen.crosstab.HeaderCell.prototype.init=function(){this.aStyles=[];this.bLoading=false;this.bSelectable=false;this.bIsResult=false;this.bIsMobileResize=false;this.sUnit="";this.bIsEntryEnabled=false;this.sPassiveCellType=R.PASSIVE_CELL_TYPE_NORMAL;this.iNumberOfLineBreaks=0;this.sScalingAxis=null;this.bIsPivotCell=false;this.bIsSplitPivotCell=false;this.bIsRevertDrop=false;};
sap.zen.crosstab.HeaderCell.prototype.getCellType=function(){return R.TYPE_HEADER_CELL;};
sap.zen.crosstab.HeaderCell.prototype.isHeaderCell=function(){return true;};
sap.zen.crosstab.HeaderCell.prototype.getCssClassNames=function(i,b,c){return a.getCssClasses(this.aStyles,i,b,c);};
sap.zen.crosstab.HeaderCell.prototype.getStyleIdList=function(){return this.aStyles;};
sap.zen.crosstab.HeaderCell.prototype.setStyleIdList=function(n){this.aStyles=n;};
sap.zen.crosstab.HeaderCell.prototype.addStyle=function(s){var S=a.getStyleId(s,R.TYPE_HEADER_CELL);if(this.aStyles.indexOf(S)===-1){this.aStyles.push(S);}};
sap.zen.crosstab.HeaderCell.prototype.removeStyle=function(s){var S=a.getStyleId(s,R.TYPE_HEADER_CELL);var i=this.aStyles.indexOf(S);if(i!==-1){this.aStyles.splice(i,1);}};
sap.zen.crosstab.HeaderCell.prototype.hasStyle=function(s){var S=a.getStyleId(s,R.TYPE_HEADER_CELL);var i=this.aStyles.indexOf(S);if(i===-1){return false;}else{return true;}};
sap.zen.crosstab.HeaderCell.prototype.isLoading=function(){return this.bLoading;};
sap.zen.crosstab.HeaderCell.prototype.setLoading=function(l){this.bLoading=l;};
sap.zen.crosstab.HeaderCell.prototype.isSelectable=function(){return this.bSelectable;};
sap.zen.crosstab.HeaderCell.prototype.setSelectable=function(s){this.bSelectable=s;};
sap.zen.crosstab.HeaderCell.prototype.setResult=function(i){this.bIsResult=i;};
sap.zen.crosstab.HeaderCell.prototype.isResult=function(){return this.bIsResult;};
sap.zen.crosstab.HeaderCell.prototype.getUnescapedText=function(){return sap.zen.crosstab.utils.Utils.unEscapeDisplayString(this.getText());};
sap.zen.crosstab.HeaderCell.prototype.isMobileResize=function(){return this.bIsMobileResize;};
sap.zen.crosstab.HeaderCell.prototype.setMobileResize=function(p){this.bIsMobileResize=p;};
sap.zen.crosstab.HeaderCell.prototype.setEntryEnabled=function(i){this.bIsEntryEnabled=i;};
sap.zen.crosstab.HeaderCell.prototype.isEntryEnabled=function(){return this.bIsEntryEnabled;};
sap.zen.crosstab.HeaderCell.prototype.setUnit=function(u){this.sUnit=u;};
sap.zen.crosstab.HeaderCell.prototype.getUnit=function(){return this.sUnit;};
sap.zen.crosstab.HeaderCell.prototype.getPassiveCellType=function(){return this.sPassiveCellType;};
sap.zen.crosstab.HeaderCell.prototype.setPassiveCellType=function(p){this.sPassiveCellType=p;};
sap.zen.crosstab.HeaderCell.prototype.setNumberOfLineBreaks=function(n){this.iNumberOfLineBreaks=n;};
sap.zen.crosstab.HeaderCell.prototype.getNumberOfLineBreaks=function(){return this.iNumberOfLineBreaks;};
sap.zen.crosstab.HeaderCell.prototype.getScalingAxis=function(){return this.sScalingAxis;};
sap.zen.crosstab.HeaderCell.prototype.setScalingAxis=function(s){this.sScalingAxis=s;};
sap.zen.crosstab.HeaderCell.prototype.isPivotCell=function(){return this.bIsPivotCell;};
sap.zen.crosstab.HeaderCell.prototype.setPivotCell=function(i){this.bIsPivotCell=i;};
sap.zen.crosstab.HeaderCell.prototype.isSplitPivotCell=function(){return this.bIsSplitPivotCell;};
sap.zen.crosstab.HeaderCell.prototype.setSplitPivotCell=function(i){this.bIsSplitPivotCell=i;};
sap.zen.crosstab.HeaderCell.prototype.isRevertDrop=function(){return this.bIsRevertDrop;};
sap.zen.crosstab.HeaderCell.prototype.setRevertDrop=function(i){this.bIsRevertDrop=i;};
sap.zen.crosstab.HeaderCell.prototype.getFormattedText=function(){var l=this.getText();var A=this.getArea();var r=A.getRenderCellCallback();if(r){var c=r(new I());l=c.renderText;}var f=this.getFormatter();if(f){l=f.format(l);}return l;};
return sap.zen.crosstab.HeaderCell;});
sap.ui.predefine('sap/zen/crosstab/HeaderCellRenderer',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/IHeaderCell","sap/zen/crosstab/TextConstants","sap/zen/crosstab/utils/Utils"],function(q,R,I,T,U){"use strict";q.sap.declare("sap.zen.crosstab.HeaderCellRenderer");sap.zen.crosstab.HeaderCellRenderer={};
sap.zen.crosstab.HeaderCellRenderer.render=function(r,c){var a=r;var A=c.getArea();var f=A.getRenderCellCallback();var C=A.getCrosstab();var i=c.getEffectiveRowSpan();var b=c.getEffectiveColSpan();var o=null;if(f){var d=f(new I(c));o=d.additionalStyles;}var s=c.getFormattedText();var S=c.getSort();var D=c.getDrillState();var e=c.getCssClassNames(C.isIE8Mode(),C.getPropertyBag().isRtl(),C.getUtils().isMsIE());if(S){e+=" sapzencrosstab-HeaderCellSortable";}if(D){e+=" sapzencrosstab-HeaderCellHierarchy";}a.write("<td");a.writeControlData(c);a.writeAttributeEscaped("class",e);a.writeAttributeEscaped("tabindex",R.TABINDEX);if(b>1){a.writeAttributeEscaped("colspan",b);}if(i>1){a.writeAttributeEscaped("rowspan",i);}a.write(">");a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_cellLayoutDiv");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.writeAttribute("class","sapzencrosstab-cellLayoutDiv");if(c.isEntryEnabled()){a.addStyle("width","0px");a.writeStyles();}a.write(">");if(c.isEntryEnabled()){a.write("<table style='width: 100%; border-spacing: 0px;'><tbody>");a.write("<tr>");a.write("<td style='width: 100%; padding: 0px 5px 0px 0px;'>");}a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_contentDiv");a.writeAttributeEscaped("tabindex",R.TABINDEX);if(s){a.writeAttributeEscaped("title",s);}var g="sapzencrosstab-HeaderCellContentDiv";if(c.isLoading()){g+=" sapzencrosstab-LoadingCellContentDiv";}a.writeAttributeEscaped("class",g);if(o){for(var h in o){a.addStyle(h,o[h]);}}a.writeStyles();if(c.isEntryEnabled()){a.addStyle("width","100%");a.writeStyles();}a.write(">");k();y();a.write("</div>");a.write("</div>");if(c.isEntryEnabled()){a.write("</td>");a.write("<td style='padding: 0px'>");a.write("<div");a.writeAttributeEscaped("id","vhlp_"+c.getId());var j="sapzencrosstab-HeaderCellDivValueHelp";if(U.isMainMode()){j+="-MainMode";}j+=" sapzencrosstab-HeaderCellValueHelp";a.writeAttributeEscaped("class",j);a.write(">");a.write("</div>");a.write("</td>");a.write("</tr>");a.write("</tbody></table>");}a.write("</td>");function k(){if(S||D){m(S,D);}else{a.write(s);}}function l(){a.write("<div");a.writeAttributeEscaped("id",c.getId()+"_textContentDiv");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.addStyle("overflow","hidden");a.addStyle("text-overflow","ellipsis");a.writeStyles();a.write(">");a.write(s);a.write("</div>");}function m(){a.write("<table><tbody>");w();a.write("<tr>");n();p();u();v();a.write("</tr>");x();a.write("</tbody></table>");}function n(){if(D){var L=c.getLevel();var z=c.getArea().isRowHeaderArea();var B="sapzencrosstab-HeaderCellDivHierarchy ";if(c.getHierarchyAction()){if(D==="O"){B+="sapzencrosstab-CollapseNode";if(c.getNodeAlignment()==="bottom"){B+=" sapzencrosstab-BottomNode";}}else if(D==="C"){B+="sapzencrosstab-ExpandNode";if(sap.ui.getCore().getConfiguration().getRTL()){B+="-RTL";}}if(D==="O"||D==="C"){B+=" sapzencrosstab-PointerCursor";}}if(L>0){if(z){var W=L*C.getHierarchyIndentWidth();a.write("<td>");a.write("<div");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.addStyle("width",W+"px");a.writeAttribute("class","sapzencrosstab-HierarchySpacerDivBefore");a.writeAttributeEscaped("xtabspacer-cellid",c.getId());a.writeStyles();a.write("></div>");a.write("</td>");}}if((D==="L"&&L>0)||D!=="L"){a.write("<td>");a.write("<div");if(c.getHierarchyAction()){a.writeAttributeEscaped("id","hier_"+c.getId());}a.writeAttributeEscaped("class",B);var H=c.getHierarchyTooltip();if(H){a.writeAttributeEscaped("title",H);}a.write("></div>");a.write("</td>");}}}function p(){a.write("<td>");l();a.write("</td>");}function t(){if(S){var z=0;var B="sapzencrosstab-HeaderCellDivSortable ";a.write("<div");if(S==="NONE"){B+="sapzencrosstab-HeaderCellSortNone";z=0;}else if(S==="ASC"){B+="sapzencrosstab-HeaderCellSortAsc";z=1;}else if(S==="DESC"){B+="sapzencrosstab-HeaderCellSortDesc";z=2;}a.writeAttributeEscaped("class",B);a.writeAttribute("id","sort_"+c.getId());var E=C.getPropertyBag().getSortingToolTip(z);if(E){a.writeAttributeEscaped("title",E);}a.write("></div>");}}function u(){if(S){a.write("<td>");t();a.write("</td>");}}function v(){if(D&&c.getArea().isRowHeaderArea()){var L=c.getLevel();var M=C.getRowHeaderHierarchyLevels()[c.getCol()];var z=M-L;if(z>0){var W=z*C.getHierarchyIndentWidth();a.write("<td>");a.write("<div");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.addStyle("width",W+"px");a.writeAttribute("class","sapzencrosstab-HierarchySpacerDivAfter");a.writeAttributeEscaped("xtabspacer-cellid",c.getId());a.writeStyles();a.write("></div>");a.write("</td>");}}}function w(){if(D){var L=c.getLevel();if(L>0&&c.getArea().isColHeaderArea()){var H=L*C.getHierarchyIndentHeight();a.write("<tr><td>");a.write("<div");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.writeAttribute("class","sapzencrosstab-HierarchySpacerLinesBefore");a.writeAttributeEscaped("xtabspacer-cellid",c.getId());a.addStyle("height",H+"px");a.writeStyles();a.write("></div>");a.write("</td></tr>");}}}function x(){if(D&&c.getArea().isColHeaderArea()){var L=c.getLevel();var M=C.getColHeaderHierarchyLevels()[c.getRow()];var z=M-L;if(z>0){var H=z*C.getHierarchyIndentHeight();a.write("<tr><td>");a.write("<div");a.writeAttributeEscaped("tabindex",R.TABINDEX);a.writeAttribute("class","sapzencrosstab-HierarchySpacerLinesAfter");a.writeAttributeEscaped("xtabspacer-cellid",c.getId());a.addStyle("height",H+"px");a.writeStyles();a.write("></div>");a.write("</td></tr>");}}}function y(){if(C.getPropertyBag().isEnableColResize()===true){if(A.isColHeaderArea()||A.isDimHeaderArea()){if(C.getPropertyBag().isTestMobileMode()||C.getPropertyBag().isMobileMode()){c.setMobileResize(true);}else{a.write("<div");a.writeAttributeEscaped("id","resi_"+c.getId());if(S){a.writeAttribute("class","sapzencrosstab-columnResizeHandleWithSort");}else{a.writeAttribute("class","sapzencrosstab-columnResizeHandle");}a.writeAttributeEscaped("title",C.getPropertyBag().getText(T.COLWIDTH_ADJUST_TEXT_KEY));a.write(">");a.write("</div>");c.setMobileResize(false);}}}}};
return sap.zen.crosstab.HeaderCellRenderer;});
sap.ui.predefine('sap/zen/crosstab/HeaderResizer',["jquery.sap.global","sap/zen/crosstab/utils/Utils"],function(q,U){"use strict";q.sap.declare("sap.zen.crosstab.HeaderResizer");
sap.zen.crosstab.HeaderResizer=function(c){var t=this;var r=c.getRenderEngine();var j=null;var J=null;var R=0;var l=0;var o=0;var b=false;this.initialize=function(){J=c.getRenderSizeDiv();this.attachEvents();};this.attachEvents=function(){var a=q(document.getElementById(c.getId()+"_headerResizeHandle"));a.unbind("hover");a.hover(function(){a.addClass("sapzencrosstab-headerResizeHandleActive");},function(){if(!b){a.removeClass("sapzencrosstab-headerResizeHandleActive");}});a.unbind("mousedown",this.onMouseDown);a.bind("mousedown",this.onMouseDown);a.unbind("mousemove",this.onMouseMove);a.bind("mousemove",this.onMouseMove);a.unbind("mouseup",this.onMouseUp);a.bind("mouseup",this.onMouseUp);};this.onMouseUp=function(e){var L;var w="";if(c.getPropertyBag().isRtl()){L=parseInt(j.css("right"),10);}else{L=parseInt(j.css("left"),10);}w=L+"";r.sendHeaderLimit(w,false);b=false;j.removeClass("sapzencrosstab-headerResizeHandleActive");j=null;q(document).unbind("mouseup",t.handleMouseUpHeaderResizeHandle);U.cancelEvent(e);};this.onMouseDown=function(e){j=q(e.currentTarget);R=J.outerWidth();l=r.getLeftAreaContainerWidth();o=e.clientX;q(document).on("mouseup",t.handleMouseUpHeaderResizeHandle);U.cancelEvent(e);};this.onMouseMove=function(e){var O;var d;var n;var m;var M=c.getPropertyBag().getMaxHeaderWidth();if(j){b=true;if(c.getPropertyBag().isRtl()){O=parseInt(j.css("right"),10);d=o-e.clientX;}else{O=parseInt(j.css("left"),10);d=e.clientX-o;}o=e.clientX;m=Math.min(l,R);if(M>0){m=Math.min(m,M);}n=Math.max(1,Math.min(O+d,m));if(c.getPropertyBag().isRtl()){j.css("right",n+"px");}else{j.css("left",n+"px");}U.cancelEvent(e);}};this.isResizeAction=function(){return b;};};
return sap.zen.crosstab.HeaderResizer;});
sap.ui.predefine('sap/zen/crosstab/IDataCell',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.IDataCell");
sap.zen.crosstab.IDataCell=function(d){this.getText=function(){return d.getText();};this.getId=function(){return d.getId();};this.getRow=function(){return d.getRow();};this.getCol=function(){return d.getCol();};};
return sap.zen.crosstab.IDataCell;});
sap.ui.predefine('sap/zen/crosstab/IHeaderCell',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.IHeaderCell");
sap.zen.crosstab.IHeaderCell=function(h){this.getText=function(){return h.getText();};this.getId=function(){return h.getId();};this.getRow=function(){return h.getRow();};this.getCol=function(){return h.getCol();};};
return sap.zen.crosstab.IHeaderCell;});
sap.ui.predefine('sap/zen/crosstab/PropertyBag',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants"],function(q,R){"use strict";q.sap.declare("sap.zen.crosstab.PropertyBag");
sap.zen.crosstab.PropertyBag=function(c){var d=false;var m=false;var p=false;var h=false;var t=0;var D=false;var e=true;var T=false;var C=null;var u=0;var M=0;var f=false;var b=false;var z=R.ZEBRA_FULL;var i=false;var I=false;var a=false;this.setBookmarkProcessing=function(g){a=g;};this.isBookmarkProcessing=function(){return a;};this.isRepeatTexts=function(){return I;};this.setRepeatTexts=function(g){I=g;};this.isDragDropEnabled=function(){return b&&!m&&!c.isPlanningMode()&&!T;};this.setDragDropEnabled=function(g){b=g;};this.setUserHeaderWidth=function(g){if(isNaN(g)){u=0;}else{u=g;}};this.getUserHeaderWidth=function(){return u;};this.setMaxHeaderWidth=function(g){if(isNaN(g)){M=0;}else{M=g;}};this.getMaxHeaderWidth=function(){return M;};this.isDebugMode=function(){return d;};this.setDebugMode=function(g){d=g;};this.isMobileMode=function(){return m;};this.isTestMobileMode=function(){return T;};this.setMobileMode=function(g){m=g;};this.isPixelScrolling=function(){return p;};this.setPixelScrolling=function(g){p=g;};this.isDisplayExceptions=function(){return D;};this.setDisplayExceptions=function(g){D=g;};this.addText=function(k,s){sap.zen.CrosstabTextCache.oTexts[k]=s;};this.getText=function(k){return sap.zen.CrosstabTextCache.oTexts[k];};this.setContextMenuCommand=function(g){C=g;};this.getContextMenuCommand=function(){return C;};this.setHasToolbar=function(g){h=g;};this.hasToolbar=function(){return h;};this.setToolbarHeight=function(g){t=g;};this.getToolbarHeight=function(){var H=0;if(h){H=t;}return H;};this.setEnableColResize=function(g){e=g;};this.isEnableColResize=function(){return e;};this.addSortingTextLookup=function(k,s){sap.zen.CrosstabTextCache.oSortingTextLookupTable[k]=s;};this.getSortingAltText=function(k){var A="";if(sap.zen.CrosstabTextCache.oSortingTextLookupTable[k]){A=sap.zen.CrosstabTextCache.oSortingTextLookupTable[k].alttext;}return A;};this.getSortingToolTip=function(k){var s=null;var g="";if(sap.zen.CrosstabTextCache.oSortingTextLookupTable[k]){s=sap.zen.CrosstabTextCache.oSortingTextLookupTable[k].tooltipidx;}if(s!==undefined){if(sap.zen.CrosstabTextCache.oSortingTextLookupTable[s]){g=sap.zen.CrosstabTextCache.oSortingTextLookupTable[s].alttext;}}return g;};this.setFireOnSelectedOnlyOnce=function(g){f=g;};this.isFireOnSelectedOnlyOnce=function(){return f;};this.isRtl=function(){return sap.ui.getCore().getConfiguration().getRTL();};this.setZebraMode=function(g){z=g;};this.getZebraMode=function(){return z;};this.setCozyMode=function(g){i=g;};this.isCozyMode=function(){return i;};};
return sap.zen.crosstab.PropertyBag;});
sap.ui.predefine('sap/zen/crosstab/RowHeaderArea',["jquery.sap.global","sap/zen/crosstab/BaseArea","sap/zen/crosstab/rendering/RenderingConstants"],function(q,B,R){"use strict";q.sap.declare("sap.zen.crosstab.RowHeaderArea");
sap.zen.crosstab.RowHeaderArea=function(c){B.call(this,c);this.sAreaType=R.TYPE_ROW_HEADER_AREA;this.iRenderStartRow=0;this.iRenderRowCnt=0;this.bLastPageLoaded=false;};
sap.zen.crosstab.RowHeaderArea.prototype=q.sap.newObject(B.prototype);
sap.zen.crosstab.RowHeaderArea.prototype.renderArea=function(r){var c="sapzencrosstab-RowHeaderArea";if(this.oCrosstab.getPropertyBag().isMobileMode()){c+=" sapzencrosstab-MobileHeaderSeparator";}this.renderContainerStructure(r,c,this.oCrosstab.isVCutOff(),false);};
sap.zen.crosstab.RowHeaderArea.prototype.getSelectedCellsBySelectionCoordinates=function(r,c){var C=this.oDataModel.getCellWithSpan(r,c,true);var o={};if(C){o[C.getId()]=C;var s=C.getRowSpan();var S=C.getCol()+1;var a=this.getColCnt()-S;var b=0;var d=null;for(var i=0;i<s;i++){b=C.getRow()+i;d=this.oDataModel.getCellsByRow(b,S,a);for(var j=0;j<d.length;j++){o[d[j].getId()]=d[j];}}return o;}return null;};
sap.zen.crosstab.RowHeaderArea.prototype.getSelectedCellsByDataSelection=function(d){var r={};var s=0;var e=this.getColCnt();var i=d.getRow();for(var c=s;c<e;c++){var C=this.oDataModel.getCellWithSpan(i,c);r[C.getId()]=C;}return r;};
sap.zen.crosstab.RowHeaderArea.prototype.getRenderedCellsByCol=function(c){var i=0;var C=null;var o={};var m=this.iRenderStartRow+this.iRenderRowCnt;for(i=this.iRenderStartRow;i<=m;i++){C=this.oDataModel.getCellWithRowSpan(i,c,true);if(C){o[C.getId()]=C;}}return o;};
return sap.zen.crosstab.RowHeaderArea;});
sap.ui.predefine('sap/zen/crosstab/SelectionHandler',["jquery.sap.global","sap/zen/crosstab/TouchHandler","sap/zen/crosstab/rendering/CrossRequestManager","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/utils/Utils"],function(q,T,C,R,U){"use strict";q.sap.declare("sap.zen.crosstab.SelectionHandler");
sap.zen.crosstab.SelectionHandler=function(c){var t=this;var o={};var s=null;var a=null;var h=false;this.blockSelectionHovering=function(b){h=b;if(h&&a){this.removeSelection(a,true);a=null;}};this.removeAllSelections=function(){this.removeAllPreviousSelectionEffects();this.setSelection(null);};this.checkHeaderCellMerge=function(H,b){var A;var d;if(c.getPropertyBag().isRepeatTexts()===true){return false;}if(!H.isHeaderCell()||!b.isHeaderCell()){return false;}if(H.getId()===b.getId()){return true;}if(H.getMergeKey()===""||b.getMergeKey()===""){return false;}if(H.getMergeKey()!==b.getMergeKey()){return false;}if(H.getDrillState()!==b.getDrillState()){return false;}A=H.getArea();d=b.getArea();if(A.getAreaType()!==d.getAreaType()){return false;}if(A.isRowHeaderArea()){if(H.getCol()!==b.getCol()){return false;}}else if(A.isColHeaderArea()){if(H.getRow()!==b.getRow()){return false;}}return true;};this.provideSelectionForAllClickedCells=function(){q.each(o,function(b,d){t.selectCells(d);});};this.mapClickedCellsToModel=function(){var b=null;var m={};var d=[];var i=0;var e=null;q.each(o,function(f,g){b=g.getArea().getCell(g.getRow(),g.getCol());if(!b){if(g.isHeaderCell()){if(g.getArea().isRowHeaderArea()){b=g.getArea().getCellWithRowSpan(g.getRow(),g.getCol());}else if(g.getArea().isColHeaderArea()){b=g.getArea().getCellWithColSpan(g.getRow(),g.getCol());}if(b){if(t.checkHeaderCellMerge(b,g)===true){m[b.getId()]=b;}else{if(g.getArea().isRowHeaderArea()){d=g.getArea().getDataModel().getAllLoadedCellsByCol(g.getArea(),g.getCol());}else if(g.getArea().isColHeaderArea()){d=g.getArea().getDataModel().getAllLoadedCellsByRow(g.getArea,g.getRow());}for(i=0;i<d.length;i++){e=d[i];if(e){if(e.getMergeKey()===g.getMergeKey()&&e.getText()===g.getText()){m[e.getId()]=e;break;}}}}}}}else{m[b.getId()]=b;}});o=m;};this.addClickedCellsForSpannedHeaderCells=function(){var A=null;var b={};q.each(o,function(d,e){var f=null;if(e.isHeaderCell()){A=e.getArea();if(A.isRowHeaderArea()){f=A.getRenderedCellsByCol(e.getCol());q.each(f,function(i,g){if(t.checkHeaderCellMerge(g,e)===true){b[i]=g;}});}else if(A.isColHeaderArea()){f=A.getRenderedCellsByRow(e.getRow());q.each(f,function(i,g){if(t.checkHeaderCellMerge(g,e)===true){b[i]=g;}});}}});q.extend(o,b);};this.extractClickedCellsFromSelection=function(){var A="";var m;var r=0;var b=null;var S;var d;var e;var f;if(s){A=s.axis;if(s.bFromBackend===true){var H=c.getHeaderInfo();if(c.getNewLinesPos()==="TOP"){r=c.getNewLinesCnt();}for(var i=0;i<s.length;i++){S=s[i];if(A==="ROWS"){d=c.getRowHeaderArea();e=S.row+r;f=H.getColForAbsoluteCol(S.col);}else if(A==="COLUMNS"){d=c.getColumnHeaderArea();e=H.getRowForAbsoluteRow(S.row)+r;f=S.col;}else if(A==="DATA"){d=c.getDataArea();e=S.row+r;f=S.col;}m=d.getCell(e,f);if(m){o[m.getId()]=m;}}}else{b=s[A];if(b){for(i=0;i<b.length;i++){S=b[i];if(A==="ROW"){d=c.getRowHeaderArea();}else if(A==="COL"){d=c.getColumnHeaderArea();}else if(A==="DATA"){d=c.getDataArea();}m=d.getCell(S.row,S.col);if(m){o[m.getId()]=m;}}}}}};this.ensureCellsSelected=function(){o={};if(c.isPlanningMode()===true&&c.getSelectionMode()==="DATA"){s=null;}if(s){this.extractClickedCellsFromSelection();}if(o&&Object.keys(o).length>0){this.mapClickedCellsToModel();this.addClickedCellsForSpannedHeaderCells();this.provideSelectionForAllClickedCells();}};this.checkSingleCellClicked=function(m){var r=true;if(o&&(Object.keys(o).length===0)){return false;}if(o&&(Object.keys(o).length===1)&&o[m.getId()]){return true;}if(m.isHeaderCell()===true){q.each(o,function(b,d){if(!t.checkHeaderCellMerge(m,d)){r=false;return false;}});}else{r=false;}return r;};this.checkCellIsAlreadyClicked=function(m){var b=null;var r=false;if(!m.isHeaderCell()){b=o[m.getId()];if(b){return true;}}else{if((Object.keys(o).length===1)&&o[m.getId()]){return true;}q.each(o,function(d,e){if(c.getPropertyBag().isRepeatTexts()===true){if(d===m.getId()){r=true;return false;}}else{if(t.checkHeaderCellMerge(m,e)===true){r=true;return false;}}});}return r;};this.translateClick=function(m){var n=null;var A=m.getArea();var i=0;var N=0;var r=0;var b=0;var d="";var H=c.getHeaderInfo();n=m;if(A.isRowHeaderArea()){if(c.getPropertyBag().isRepeatTexts()===true){if(m.getCol()>0){n=A.getCell(m.getRow(),0);}else{n=m;}}else{i=m.getCol();d=H.getDimensionNameByCol(i);if(d&&d.length>0){N=H.getFirstColForDimension(d);if(N>=0&&N!==i){n=A.getCell(m.getRow(),N);}}}}else if(A.isColHeaderArea()){if(c.getPropertyBag().isRepeatTexts()===true){if(m.getRow()>0){n=A.getCell(0,m.getCol());}else{n=m;}}else{r=m.getRow();d=H.getDimensionNameByRow(r);if(d&&d.length>0){b=H.getFirstRowForDimension(d);if(b>=0&&b!==r){n=A.getCell(b,m.getCol());}}}}return n;};this.checkSelectionAllowed=function(m){var A=m.getArea();var r=0;if(A.isDimHeaderArea()){return false;}if(c.isPlanningMode()===true){if(c.getNewLinesCnt()>0){r=m.getRow();if(c.getNewLinesPos()==="TOP"){if(r<c.getNewLinesCnt()){return false;}}else{if(r>m.getArea().getRowCnt()-c.getNewLinesCnt()-1){return false;}}}if(c.getSelectionMode()==="DATA"){return false;}}if(c.getSelectionMode()==="DATA"){if(A.isRowHeaderArea()||A.isColHeaderArea()){return false;}}else{if(A.isDataArea()){return false;}}if(c.getSelectionSpace()==="ROW"){if(A.isColHeaderArea()){return false;}}else if(c.getSelectionSpace()==="COL"){if(A.isRowHeaderArea()){return false;}}if(c.getSelectionMode()==="SINGLE"){var H=c.getHeaderInfo();if(A.isRowHeaderArea()){return H.isColOfInnermostDimension(m.getCol());}else if(A.isColHeaderArea()){return H.isRowOfInnermostDimension(m.getRow());}}return true;};this.registerCtrlKeyUpListener=function(){if(c.getPropertyBag().isFireOnSelectedOnlyOnce()===true){if(!document.oSapCrosstabOnSelectHandlerReg){document.oSapCrosstabOnSelectHandlerReg={};}document.oSapCrosstabOnSelectHandlerReg[c.getId()]={"me":this,"fOnSelect":this.sendOnSelectCommand};if(!document.fSapCrosstabOnKeyUpHandler){document.fSapCrosstabOnKeyUpHandler=function(e){if(e.which===17){q(document).off("keyup");document.fSapCrosstabOnKeyUpHandler=null;q.each(document.oSapCrosstabOnSelectHandlerReg,function(i,H){H.fOnSelect.apply(H.me);});document.oSapCrosstabOnSelectHandlerReg=null;U.cancelEvent(e);U.stopEventPropagation(e);}};q(document).on("keyup",document.fSapCrosstabOnKeyUpHandler);}}};this.postSelectionToServer=function(b){var A=document.oSapCrosstabOnSelectHandlerReg&&document.oSapCrosstabOnSelectHandlerReg[c.getId()];if(!c.getPropertyBag().isFireOnSelectedOnlyOnce()||(c.getPropertyBag().isFireOnSelectedOnlyOnce()===true&&!A)){t.sendOnSelectCommand(b);}};this.handleCellClick=function(m,f){if(!this.checkSelectionAllowed(m)){this.removeAllSelections();this.sendJson("{}");return;}if(a){t.removeSelection(a,true);a=null;}m=this.translateClick(m);if(!f||f==="SHIFT"){if(this.checkSingleCellClicked(m)===true){this.removeSelection(m);return;}else{this.startNewSelection(m);}}else if(f==="CTRL"){this.registerCtrlKeyUpListener();if(this.checkCellIsAlreadyClicked(m)===true){this.removeSelection(m);return;}else{var i=this.checkMultiselectPossible(m);if(i){o[m.getId()]=m;}else{this.startNewSelection(m);}}}this.selectCells(m);this.updateSelectionState();};this.getCellsForSelectionState=function(){var b={};var d={};var e;var A="";var f=null;b=this.consolidateClickedCells();q.each(b,function(i,g){f=c.getUtils().translateCellCoordinatesForBackend(g);A=f.axisName;e={};if(!d[A]){d[A]=[];}e["row"]=f.row;e["col"]=f.col;d[A].push(e);});return{"axis":A,"oCells":d};};this.sendOnSelectCommand=function(b){var d;if(c.getOnSelectCommand()){if(b){d=b.oCells;}else{d=this.getCellsForSelectionState().oCells;}var r=JSON.stringify(d);t.sendJson(r);}};this.sendJson=function(j){var b=c.getOnSelectCommand();if(b){var f="\"";var r=new RegExp(f,"g");var d=j.replace(r,"\\\"");b=b.replace("__CELLS__",d);c.getUtils().executeCommandAction(b);}};this.consolidateClickedCells=function(){var r={};var b={};var O={};var A="";var k="";if(c.getPropertyBag().isRepeatTexts()===true){return o;}q.each(o,function(i,d){A=d.getArea().getAxisName();if(A===R.ROW_AXIS){k=d.getText()+" "+d.getMergeKey()+" "+d.getCol();if(!r[k]){r[k]=d;}}else if(A===R.COL_AXIS){k=d.getText()+" "+d.getMergeKey()+" "+d.getRow();if(!b[k]){b[k]=d;}}else{O[i]=d;}});return q.extend(r,b,O);};this.selectCells=function(m,H){var S=this.getSelectedCells(m);q.each(S,function(b,d){var A=d.getArea();if(A.isRowHeaderArea()){t.selectRowHeaderCell(d,H);}else if(A.isColHeaderArea()){t.selectColHeaderCell(d,H);}else if(A.isDataArea()){t.selectDataCell(d,H);}});};this.getSelectedCells=function(m,r){var A=m.getArea();var b={};if(A.isRowHeaderArea()||A.isColHeaderArea()){var S=A.getSelectedCellsBySelectionCoordinates(m.getRow(),m.getCol());var d=c.getDataArea().getSelectedCellsByHeaderSelection(m,r);b=q.extend({},S,d);}else if(A.isDataArea()){d={};d[m.getId()]=m;var e=c.getRowHeaderArea().getSelectedCellsByDataSelection(m);var f=c.getColumnHeaderArea().getSelectedCellsByDataSelection(m);b=q.extend({},d,e,f);}return b;};this.checkMultiselectPossible=function(m){var A=m.getArea();var r=true;var p="";var P=null;var f=null;if(c.getSelectionMode()==="DATA"||c.getSelectionMode()==="SINGLE"){return false;}if(c.getPropertyBag().isRepeatTexts()===true){return true;}if(A.isRowHeaderArea()){f=A.getDataModel().getCellWithSpan(m.getRow(),Math.max(m.getCol()-1,0));}else if(A.isColHeaderArea()){f=A.getDataModel().getCellWithSpan(Math.max(m.getRow()-1,0),m.getCol());}p=f.getId();q.each(o,function(b,d){if(d.getArea().getAreaType()!==A.getAreaType()){r=false;return false;}if(A.isRowHeaderArea()){if(m.getCol()!==d.getCol()){r=false;return false;}if(m.getCol()!==0){P=A.getDataModel().getCellWithSpan(d.getRow(),Math.max(d.getCol()-1,0));if(p!==P.getId()){r=false;return false;}}}else if(A.isColHeaderArea()){if(m.getRow()!==d.getRow()){r=false;return false;}if(m.getRow()!==0){P=A.getDataModel().getCellWithSpan(Math.max(d.getRow()-1,0),d.getCol());if(p!==P.getId()){r=false;return false;}}}else if(A.isDataArea()){r=false;return false;}return null;});return r;};this.startNewSelection=function(m){this.removeAllPreviousSelectionEffects();s=null;o={};o[m.getId()]=m;};this.updateSelectionState=function(){var b=this.getCellsForSelectionState();t.postSelectionToServer(b);s=b.oCells;s.axis=b.axis;};this.removeSelection=function(m,H){var b={};b[m.getId()]=m;if(m.isHeaderCell()===true){q.each(o,function(d,e){if(e.isHeaderCell()===true){if(t.checkHeaderCellMerge(e,m)===true){b[d]=e;}}});}q.each(b,function(r,d){if(!H){delete o[r];}t.removePreviousSelectionEffectsForCell(d,H);});if(!H){this.updateSelectionState();}};this.removeAllPreviousSelectionEffects=function(){q.each(o,function(k,v){t.removePreviousSelectionEffectsForCell(v,false);});};this.removePreviousSelectionEffectsForCell=function(m,H){var S=this.getSelectedCells(m,true);q.each(S,function(b,d){var A=d.getArea();if(A.isRowHeaderArea()){t.deselectRowHeaderCell(d,H);}else if(A.isColHeaderArea()){t.deselectColHeaderCell(d,H);}else if(A.isDataArea()){t.deselectDataCell(d,H);}});};this.selectRowHeaderCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HeaderCellHoverRow";}else{m.addStyle("SelectRow");b="sapzencrosstab-HeaderCellSelectRow";}var d=(q(document.getElementById(m.getId())));d.addClass(b);};this.deselectRowHeaderCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HeaderCellHoverRow";}else{m.removeStyle("SelectRow");b="sapzencrosstab-HeaderCellSelectRow";}var d=(q(document.getElementById(m.getId())));d.removeClass(b);};this.selectColHeaderCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HeaderCellHoverCol";}else{m.addStyle("SelectCol");b="sapzencrosstab-HeaderCellSelectCol";}var d=(q(document.getElementById(m.getId())));d.addClass(b);};this.deselectColHeaderCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HeaderCellHoverCol";}else{m.removeStyle("SelectCol");b="sapzencrosstab-HeaderCellSelectCol";}var d=(q(document.getElementById(m.getId())));d.removeClass(b);};this.selectDataCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HoverDataCell";}else{m.addStyle("SelectData");b="sapzencrosstab-DataCellSelectData";}var d=(q(document.getElementById(m.getId())));d.addClass(b);};this.deselectDataCell=function(m,H){var b=null;if(H===true){b="sapzencrosstab-HoverDataCell";}else{m.removeStyle("SelectData");b="sapzencrosstab-DataCellSelectData";}var d=(q(document.getElementById(m.getId())));d.removeClass(b);};this.setSelection=function(p){o={};s=p;if(s){s.bFromBackend=true;}};this.hasSelection=function(){return U.getSizeOf(o)>0;};this.handleCellHoverEntry=function(m){if(h){return;}if(!this.checkSelectionAllowed(m)){if(a){t.removeSelection(a,true);a=null;}return;}m=this.translateClick(m);if(a&&(m!==a)){t.removeSelection(a,true);a=null;}if(!a){if(!m||m===undefined||m.hasStyle("SelectCol")||m.hasStyle("SelectData")||m.hasStyle("SelectRow")){return;}a=m;t.selectCells(m,true);}};this.handleCellHoverOut=function(e){if(a){var d=e.toElement||e.relatedTarget;var D=e.target;var f=null;var b=sap.ui.getCore().getControl(e.target.id);var g=null;var r=false;if(b){if(b===a){f=q(D).find(q(d));if(!(f&&f.length>0)){r=true;}}}else{g=q(document.getElementById(a.getId()));f=g.find(q(D));if(f&&f.length>0){f=g.find(q(d));if(!(f&&f.length>0)){r=true;}}}if(r===true){t.removeSelection(a,true);a=null;}}};};
return sap.zen.crosstab.SelectionHandler;});
sap.ui.predefine('sap/zen/crosstab/TextConstants',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.TextConstants");sap.zen.crosstab.TextConstants={ROW_TEXT_KEY:"ROW_TEXT",COL_TEXT_KEY:"COL_TEXT",COLWIDTH_ADJUST_TEXT_KEY:"COLWIDTH_ADJUST_TEXT",MOBILE_MENUITEM_COLWIDTH_ADJUST_TEXT_KEY:"MOBILE_MENUITEM_COLWIDTH_ADJUST",MEASURE_STRUCTURE_TEXT_KEY:"MEASURE_STRUCTURE_TEXT"};return sap.zen.crosstab.TextConstants;});
sap.ui.predefine('sap/zen/crosstab/TouchHandler',["jquery.sap.global","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/TextConstants","sap/ui/unified/Menu","sap/ui/commons/Menu","sap/ui/unified/MenuItem","sap/ui/commons/MenuItem","sap/ui/commons/TextView","sap/m/Text","sap/ui/core/Popup"],function(q,U,T,a,C,b,c,d,f,P){"use strict";q.sap.declare("sap.zen.crosstab.TouchHandler");
sap.zen.crosstab.TouchHandler=function(E,o){var D=o.getDataArea();var r=o.getRowHeaderArea();var g=o.getColumnHeaderArea();var h=o.getDimensionHeaderArea();var l=0;var L=0;var t=false;var m=false;var j=q(document.getElementById(D.getId()));var k=q(document.getElementById(r.getId()));var n=q(document.getElementById(g.getId()));var p=q(document.getElementById(h.getId()));var s="";var u=null;var v="800";var V=0;var H=0;var R=0;var w=0;var N=0;var x=0;var O=0;var y=0;var z=null;var A=null;var I=2;var B=null;var F=null;var G=null;var J=false;var K;function M(e){var b1=null;var i=0;var c1=sap.ui.getCore().getControl(e.target.id);var d1=null;var e1=null;if(c1&&(c1.isMobileResize&&c1.isMobileResize())){b1=c1;}else{var f1=q(e.target).parents("td");if(f1){for(i=0;i<f1.length;i++){d1=q(f1[i]);e1=d1.attr("id");if(e1&&e1.length>0){c1=sap.ui.getCore().getControl(e1);if(c1&&(c1.isMobileResize&&c1.isMobileResize())){b1=c1;break;}}}}}return b1;}function Q(e){if(K){var i=e.getParameter("item").oSelectedCell;if(i){K.resizeCol(i,-1);}}}function S(){if(!B){B=sap.ui.getCore().getControl("resizemenu");if(B){B.getItems()[0].destroy();B.destroy();}if(U.isDispatcherAvailable()===true&&sap.zen.Dispatcher.instance.isMainMode()){B=new a("resizemenu",{ariaDescription:"Crosstab Menu",tooltip:"Menu containing crosstab related actions"});}else{B=new C("resizemenu",{ariaDescription:"Crosstab Menu",tooltip:"Menu containing crosstab related actions"});}B.addStyleClass("sapzencrosstab-MenuStyle");var e=null;if(U.isDispatcherAvailable()===true&&sap.zen.Dispatcher.instance.isMainMode()){e=new b("item1",{text:o.getPropertyBag().getText(T.MOBILE_MENUITEM_COLWIDTH_ADJUST_TEXT_KEY)});}else{e=new c("item1",{text:o.getPropertyBag().getText(T.MOBILE_MENUITEM_COLWIDTH_ADJUST_TEXT_KEY)});}e.attachSelect(Q);B.addItem(e);}}function W(){R=(D.getRowCnt()+"").length;w=(D.getColCnt()+"").length;z=new P();var e=null;if(U.isDispatcherAvailable()===true&&sap.zen.Dispatcher.instance.isMainMode()){e=new f();}else{e=new d();}z.setContent(e);z.setDurations(125,500);z.setAutoClose(true);A=z.getContent();A.addStyleClass("sapzencrosstab-ScrollPopup");A.setWrapping(false);var i=P.Dock;z.setPosition(i.CenterCenter,i.CenterCenter,document.getElementById(o.getId()+"_renderSizeDiv"),"0");}function X(){var e=o.getPropertyBag().getText(T.ROW_TEXT_KEY)+": "+U.padWithZeroes(N+1,R)+"/"+r.getRowCnt();var i=o.getPropertyBag().getText(T.COL_TEXT_KEY)+": "+U.padWithZeroes(x+1,w)+"/"+g.getColCnt();var b1=e+" "+i;z.getContent().setProperty("text",b1,true);z.getContent().rerender();}function Y(e){U.cancelEvent(e);V=0;H=0;N=0;x=0;if(B){B.close();}s=e.currentTarget.getAttribute("id");if(e.originalEvent.touches&&e.originalEvent.touches.length){e=e.originalEvent.touches[0];}else if(e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length){e=e.originalEvent.changedTouches[0];}l=e.pageX;L=e.pageY;t=true;m=false;if(u){window.clearTimeout(u);u=null;}u=setTimeout(function(){t=false;m=false;var i=M(e);if(i){S();var b1=q(document.getElementById(i.getId()));if(b1.length>0){var c1=sap.ui.core.Popup.Dock;B.getItems()[0].oSelectedCell=i;B.open(false,b1,c1.BeginBottom,c1.BeginTop,b1,0+" "+0,sap.ui.core.Collision.flip);}}},v);}function Z(i,e){var b1=o.getHorizontalHeaderScrollbar();if(b1){y=b1.getScrollPosition();x=Math.max(y-i,0);if(e>0){o.scrollHeaderHorizontal(x);}}}function $(i,e,b1,c1){if(o.getPropertyBag().isPixelScrolling()){if(F){O=F.getScrollPosition();N=Math.max(O-e,0);}if(G){y=G.getScrollPosition();x=Math.max(y-i,0);}if(F&&c1>0){o.scrollVertical(N);}if(G&&b1>0){o.scrollHorizontal(x);}}else{if(z.getOpenState()===sap.ui.core.OpenState.CLOSED){z.open(-1);}if(F){if(o.getRenderEngine().isVScrolledToEnd()){if(U.sign(e)>0){V-=U.sign(e);}else{V=0;}}else{V-=U.sign(e);}O=r.getRenderStartRow();N=Math.max(Math.floor(V/I)+O,0);N=Math.min(D.getRowCnt()-1,N);}if(G){if(o.getRenderEngine().isHScrolledToEnd()){if(U.sign(i)>0){H-=U.sign(i);}else{H=0;}}else{H-=U.sign(i);}y=g.getRenderStartCol();x=Math.max(Math.floor(H/I)+y,0);x=Math.min(D.getColCnt()-1,x);}X();}}function _(e){U.cancelEvent(e);if(t==false){return true;}if(e.originalEvent.touches&&e.originalEvent.touches.length){e=e.originalEvent.touches[0];}else if(e.originalEvent.changedTouches&&e.originalEvent.changedTouches.length){e=e.originalEvent.changedTouches[0];}var i=e.pageX;var b1=e.pageY;var c1=i-l;var d1=b1-L;var e1=Math.abs(d1);var f1=Math.abs(c1);if(e1>f1&&f1<10){c1=0;f1=0;}else if(f1>e1&&e1<10){d1=0;e1=0;}if(c1==0&&d1==0){m=false;return true;}m=true;if(u){window.clearTimeout(u);u=null;}F=o.getVScrollbar();G=o.getHScrollbar();J=false;if(s===r.getId()){J=o.isHeaderHScrolling()&&(c1!==0);if(!J){c1=0;f1=0;}}else if(s===g.getId()){d1=0;e1=0;}else if(s===h.getId()){J=o.isHeaderHScrolling()&&(c1!==0);if(!J){c1=0;f1=0;}d1=0;e1=0;}if(J===true){Z(c1,f1);}else{$(c1,d1,f1,e1);}l=e.pageX;L=e.pageY;return null;}function a1(e){U.cancelEvent(e);if(u){window.clearTimeout(u);u=null;}if(t==false){return true;}if(!m){E.executeOnClickAction(e);}t=false;m=false;if(!J){if(!o.getPropertyBag().isPixelScrolling()){if((z.getOpenState()===sap.ui.core.OpenState.OPEN)||(z.getOpenState()===sap.ui.core.OpenState.OPENING)){z.close();}var i=false;if(N!==O){o.scrollVertical(N);i=true;}if(x!==y){o.scrollHorizontal(x);i=true;}if(i===true){E.attachEvents();}}V=0;H=0;}}this.registerTouchEvents=function(e){W();var i="touchstart";if(o.getPropertyBag().isTestMobileMode()&&!o.getPropertyBag().isMobileMode()){i="mousedown";}j.unbind(i);j.bind(i,Y);k.unbind(i);k.bind(i,Y);n.unbind(i);n.bind(i,Y);p.unbind(i);p.bind(i,Y);i="touchmove";if(o.getPropertyBag().isTestMobileMode()&&!o.getPropertyBag().isMobileMode()){i="mousemove";}e.unbind(i);e.bind(i,_);i="touchend";if(o.getPropertyBag().isTestMobileMode()&&!o.getPropertyBag().isMobileMode()){i="mouseup";}e.unbind(i);e.bind(i,a1);};this.setColResizer=function(e){K=e;};};
return sap.zen.crosstab.TouchHandler;});
sap.ui.predefine('sap/zen/crosstab/datahandler/JsonDataHandler',["jquery.sap.global","sap/zen/crosstab/TextConstants","sap/zen/crosstab/utils/Utils","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/CrosstabCellApi","sap/zen/crosstab/DataCell","sap/zen/crosstab/HeaderCell","sap/zen/crosstab/CellStyleHandler"],function(q,T,U,R,C,D,H,a){"use strict";q.sap.declare("sap.zen.crosstab.datahandler.JsonDataHandler");
sap.zen.crosstab.datahandler.JsonDataHandler=function(c){var d=c.getDimensionHeaderArea();var o=c.getColumnHeaderArea();var r=c.getRowHeaderArea();var b=c.getDataArea();var f=0;var F=0;var t=0;var e=0;var g=false;var h=false;var k=false;var J=null;var l=null;var m=0;var n=0;var p={};var s={};function u(){if(!sap.zen.CrosstabTextCache){sap.zen.CrosstabTextCache={};sap.zen.CrosstabTextCache.filled=false;sap.zen.CrosstabTextCache.oTexts={};sap.zen.CrosstabTextCache.oSortingTextLookupTable={};sap.zen.CrosstabTextCache.defaultProvided=false;}var i=c.getPropertyBag();i.addText(T.ROW_TEXT_KEY,"Row");i.addText(T.COL_TEXT_KEY,"Column");i.addText(T.COLWIDTH_ADJUST_TEXT_KEY,"Double Click to adjust Column Width");i.addText(T.MOBILE_MENUITEM_COLWIDTH_ADJUST_TEXT_KEY,"Adjust Column Width");i.addText(T.MEASURE_STRUCTURE_TEXT_KEY,"Measure Structure");w(i);sap.zen.CrosstabTextCache.defaultProvided=true;}function v(i){if(sap.zen.CrosstabTextCache.filled===false){var j=c.getPropertyBag();if(i){j.addText(T.ROW_TEXT_KEY,i.rowtext||"Row");j.addText(T.COL_TEXT_KEY,i.coltext||"Column");j.addText(T.COLWIDTH_ADJUST_TEXT_KEY,i.colwidthtext||"Double Click to adjust Column Width");j.addText(T.MOBILE_MENUITEM_COLWIDTH_ADJUST_TEXT_KEY,i.mobilemenuitemcolwidthtext||"Adjust Column Width");j.addText(T.MEASURE_STRUCTURE_TEXT_KEY,i.measurestructtext||"Measure Structure");x(i,j);}sap.zen.CrosstabTextCache.filled=true;}}function w(i){var j={};j.alttext="Unsorted. Select to sort ascending";j.tooltipidx=0;i.addSortingTextLookup("0",j);j={};j.alttext="Sorted ascending. Select to sort descending";j.tooltipidx=1;i.addSortingTextLookup("1",j);j={};j.alttext="Sorted descending. Select to sort ascending";j.tooltipidx=2;i.addSortingTextLookup("2",j);}function x(j,Y){var Z=j.sorting;if(!Z){w(Y);}else{var i=0;var $=parseInt(Z.length,10);for(i=0;i<$;i++){var _={};_.alttext=Z[i].alttext;_.tooltipidx=Z[i].tooltipidx;Y.addSortingTextLookup(i+"",_);}}}this.determineBasicAreaData=function(i,j){if(!sap.zen.CrosstabTextCache||(sap.zen.CrosstabTextCache&&!sap.zen.CrosstabTextCache.defaultProvided)){u();}J=i;if(J.rootcause&&J.rootcause==="bookmark"){c.getPropertyBag().setBookmarkProcessing(true);}if(!J.rows){B(J);E();c.setHasData(false);}else{c.setHasData(true);if(j||J.changed){v(J.texts);p={};s={};f=J.fixedcolheaders;F=J.fixedrowheaders;if(!J.pixelscrolling){c.setHCutOff(false);c.setVCutOff(false);t=J.totaldatacols;e=J.totaldatarows;}else{c.setHCutOff(J.totaldatacols>J.sentdatacols);c.setVCutOff(J.totaldatarows>J.sentdatarows);t=J.sentdatacols;e=J.sentdatarows;}if(!f||!F){d.setRowCnt(0);d.setColCnt(0);if(!F){r.setRowCnt(0);r.setColCnt(0);if(f){o.setRowCnt(f);o.setColCnt(t);}}else if(!f){o.setRowCnt(0);o.setColCnt(0);if(F){r.setRowCnt(e);r.setColCnt(F);}}}else{d.setRowCnt(f);d.setColCnt(F);r.setRowCnt(e);r.setColCnt(F);o.setRowCnt(f);o.setColCnt(t);}b.setRowCnt(e);b.setColCnt(t);c.setTotalRows(f+e);c.setTotalCols(F+t);c.setOnSelectCommand(J.onselectcommand);c.getPropertyBag().setDisplayExceptions(J.displayexceptions);c.getPropertyBag().setEnableColResize(J.enablecolresize);c.setScrollNotifyCommand(J.scrollnotifier);c.setUpdateColWidthCommand(J.updatecolwidthcmd);y(i);var Y=new C(c,F,f,t,e);c.setCellApi(Y);}z();if(!(c.getPropertyBag().isMobileMode()||c.getPropertyBag().isTestMobileMode())){if(J.transferdatacommand){c.setTransferDataCommand(J.transferdatacommand);}else{c.setTransferDataCommand(null);}if(J.callvaluehelpcommand){c.setCallValueHelpCommand(J.callvaluehelpcommand);}if(J.newlinescnt){c.setNewLinesCnt(J.newlinescnt);}if(J.newlinespos){c.setNewLinesPos(J.newlinespos);}}if(J.contextmenucmd){c.getPropertyBag().setContextMenuCommand(J.contextmenucmd);c.createContextMenu();}if(J.headerscrolling&&J.headerscrolling==true){c.setHeaderScrollingConfigured(true);if(J.userheaderresize){c.setUserHeaderResizeAllowed(J.userheaderresize);}if(J.userheaderwidthcommand){c.setUserHeaderWidthCommand(J.userheaderwidthcommand);}if(J.headerwidth){c.getPropertyBag().setMaxHeaderWidth(J.headerwidth);}else{c.getPropertyBag().setMaxHeaderWidth(0);}if(J.headerwidthcurrent){c.getPropertyBag().setUserHeaderWidth(J.headerwidthcurrent);}else{c.getPropertyBag().setUserHeaderWidth(0);}}else{c.setHeaderScrollingConfigured(false);c.setUserHeaderResizeAllowed(false);c.setUserHeaderWidthCommand(null);c.getPropertyBag().setMaxHeaderWidth(0);c.getPropertyBag().setUserHeaderWidth(0);}if(J.selectionmode){c.setSelectionProperties(J.selectionmode,J.selectionspace,J.disablehovering,J.singleonselectevent);}var Z=c.getSelectionHandler();if(Z){Z.setSelection(J.selection);}if(J.headerinfo){c.initHeaderInfo(J.headerinfo);}if(J.repeattxt&&J.repeattxt===true){c.getPropertyBag().setRepeatTexts(true);}else{c.getPropertyBag().setRepeatTexts(false);}if(J.dragdropcommands){c.getPropertyBag().setDragDropEnabled(true);c.setDragDropCommands(J.dragdropcommands);}else{c.getPropertyBag().setDragDropEnabled(false);}if(J.zebra){c.getPropertyBag().setZebraMode(J.zebra);}else{c.getPropertyBag().setZebraMode(R.ZEBRA_FULL);}}};function y(j){var Y=j.usercolwidths;if(Y){for(var i=0;i<Y.length;i++){var Z=Y[i];var $=Z.colid;if(isNaN(Z.colwidth)){continue;}var _=Math.max(0,parseInt(Z.colwidth,10));var a1=false;if(Z.ignore!==undefined){a1=Z.ignore;}if($==="*"){if(f&&F){o.setColUserWidth($,_,a1);b.setColUserWidth($,_,a1);d.setColUserWidth($,_,a1);r.setColUserWidth($,_,a1);}else{if(!F){o.setColUserWidth($,_,a1);}else if(!f){r.setColUserWidth($,_,a1);}b.setColUserWidth($,_,a1);}}else{if(f&&F){if($>=F){o.setColUserWidth($-F,_,a1);b.setColUserWidth($-F,_,a1);}else{d.setColUserWidth($,_,a1);r.setColUserWidth($,_,a1);}}else{if(!F){o.setColUserWidth($,_,a1);b.setColUserWidth($,_,a1);}else if(!f){if($>=F){b.setColUserWidth($-F,_,a1);}else{r.setColUserWidth($,_,a1);}}}}}}}function z(){var i=c.getRenderEngine().getCrossRequestManager();if(i){if(J.clienthpos!==undefined&&J.clientvpos!==undefined&&J.clienthscrolledtoend!==undefined&&J.clientvscrolledtoend!==undefined){if(J.clienthscrolledtoend===true){J.clienthpos=J.totaldatacols-1;}if(J.clientvscrolledtoend===true){J.clientvpos=J.totaldatarows-1;}if(!i.hasSavedVScrollInfo()&&!i.hasSavedHScrollInfo()){i.setScrollData(parseInt(J.clienthpos,10),J.clienthscrolledtoend,parseInt(J.clientvpos,10),J.clientvscrolledtoend);}}if(J.rootcause){i.setRootCause(J.rootcause);if(J.rootcause==="hierarchy"){i.setHierarchyAction(J.rootcause_hierarchy);i.setIsHierarchyDirectionDown(J.rootcause_hierarchy_directiondown);}i.handleRootCause();}else{if(J.changed===true){i.setScrollData(0,false,0,false);}}var j=false;if(J.rootcause&&c.getPropertyBag().isBookmarkProcessing()){j=true;}else{if(!J.dataproviderchanged){if(J.resultsetchanged){if(J.rootcause){j=J.rootcause==="sorting"||J.rootcause==="hierarchy"||J.rootcause==="plan"||J.rootcause==="dragdrop";}}else{j=true;}}}if(J.clientheaderhpos&&j){i.setHeaderScrollData({"iHPos":parseInt(J.clientheaderhpos,10)});}else{i.setHeaderScrollData({"iHPos":0});}}}this.jsonToDataModel=function(Y){if(J.rows){l=Y.oCrosstabAreasToBeFilled;m=Y.iColOffset;n=Y.iRowOffset;A();var Z=J.rows;for(var i=0,$=Z.length;i<$;i++){var _=Z[i].row.rowidx;var a1=Z[i].row.cells;for(var j=0,b1=a1.length;j<b1;j++){var c1=a1[j].control;var d1=c1.colidx;G(c1,_,d1);}}}c.setColHeaderHierarchyLevels(p);c.setRowHeaderHierarchyLevels(s);};function A(){g=l[d.getAreaType()];h=l[r.getAreaType()];k=l[o.getAreaType()];}function B(J){d.setRowCnt(2);d.setColCnt(1);var i=O(d,0,0);i.setText(J.messagetitle);d.insertCell(i,0,0);i=O(d,1,0);i.setText(J.messagetext);d.insertCell(i,1,0);}function E(){var i=c.getSelectionHandler();if(i){i.setSelection(null);}}var G=function(j,i,Y){var Z=i-1;var $=Y-1;if(Y>F&&i>f){K(j,Z+n,$+m);}else if(g&&Y<=F&&i<=f){L(j,Z,$);}else if(k&&i<=f&&Y>F){N(j,Z,$+m);}else if(h&&Y<=F&&i>f){M(j,Z+n,$);}};function I(i,j){var Y=new D();Y.setArea(b);Y.setRow(i);Y.setCol(j);Y.addStyle(c.getPropertyBag().isCozyMode()?R.STYLE_DATA_CELL_COZY:R.STYLE_DATA_CELL);return Y;}var K=function(j,i,Y){var Z=i-f;var $=Y-F;var _=I(Z,$);_.setTableRow(i);_.setTableCol(Y);Q(j,_);if(c.getPropertyBag().getZebraMode()!==R.ZEBRA_OFF){if(Z%2===1){_.addStyle(R.STYLE_ALTERNATING);}}b.insertCell(_,Z,$);};var L=function(j,i,Y){P(j,d,i,Y,i,Y);};var M=function(j,i,Y){var Z=i;if(j.axisidx!==undefined){Z=j.axisidx+f;}P(j,r,i-f,Y,Z,Y);};var N=function(j,i,Y){var Z=Y;if(j.axisidx!==undefined){Z=j.axisidx+F;}P(j,o,i,Y-F,i,Z);};function O(i,j,Y){var Z=new H();Z.setArea(i);Z.setRow(j);Z.setCol(Y);Z.addStyle(c.getPropertyBag().isCozyMode()?R.STYLE_HEADER_CELL_COZY:R.STYLE_HEADER_CELL);return Z;}var P=function(j,i,Y,Z,$,_){var a1=O(i,Y,Z);a1.setTableRow($);a1.setTableCol(_);Q(j,a1);S(j,a1,i);if(c.getPropertyBag().isRtl()&&a1.getRow()===c.getDimensionHeaderArea().getRowCnt()-1&&a1.getCol()===c.getDimensionHeaderArea().getColCnt()-1){a1.setText(sap.zen.crosstab.utils.Utils.swapPivotKeyText(a1.getText()));}i.insertCell(a1,Y,Z);};var Q=function(j,Y){var Z=W(j);if(Z){Y.setFormatter(Z);}var $=j._v;if($){var _=sap.zen.crosstab.utils.Utils.prepareStringForRendering($);Y.setText(_.text);Y.setNumberOfLineBreaks(_.iNumberOfLineBreaks);}var a1=j.exceptionvisualizations;if(a1){for(var b1 in a1){if(Object.prototype.hasOwnProperty.call(a1,b1)){var c1=a1[b1];if(c1){a.setExceptionStylesOnCell(Y,c1.formattype,c1.alertlevel);}}}}if(j.isemphasized){Y.addStyle(R.STYLE_EMPHASIZED);}if(!(c.getPropertyBag().isMobileMode()||c.getPropertyBag().isTestMobileMode())){if(j.isdataentryenabled){Y.addStyle(R.STYLE_DATA_ENTRY_ENABLED);Y.setEntryEnabled(true);if(j.unit){Y.setUnit(j.unit);}}if(j.hasinvalidvalue){Y.addStyle(R.STYLE_INVALID_VALUE);}if(j.hasnewvalue){Y.addStyle(R.STYLE_NEW_VALUE);}if(j.islocked){Y.addStyle(R.STYLE_LOCKED);}}if(j.isresult){if(Y.setResult){Y.setResult(j.isresult);}Y.addStyle(R.STYLE_TOTAL);}if(j.passivetype){Y.setPassiveCellType(j.passivetype);}if(j.additionalstyles){for(var i=0;i<j.additionalstyles.length;i++){Y.addStyle(j.additionalstyles[i].style.stylename);}}};var S=function(j,i,Y){if(j.rowspan){i.setRowSpan(j.rowspan);}else{i.setRowSpan(1);}if(j.colspan){i.setColSpan(j.colspan);}else{i.setColSpan(1);}if(j.key){i.setMergeKey(j.key);}if(j.sort){i.setSort(j.sort);}if(j.sorttxtidx){i.setSortTextIndex(parseInt(j.sorttxtidx,10));}if(j.sortaction){i.setSortAction(j.sortaction);}if(j.alignment){i.setAlignment(j.alignment);}if(j.memberid){i.setMemberId(j.memberid);}if(j.parentmemberid){i.setParentMemberId(j.parentmemberid);}if(typeof(j.level)!="undefined"){i.setLevel(j.level);V(Y,i,j.level);}else{i.setLevel(-1);}if(j.drillstate){if(j.drillstate!=="A"){i.setDrillState(j.drillstate);}}if(j.hierarchyaction){i.setHierarchyAction(j.hierarchyaction);}if(j.hierarchytooltip){i.setHierarchyTooltip(j.hierarchytooltip);}if(j.nodeAlignment){i.setNodeAlignment(j.nodeAlignment);}if(c.getPropertyBag().getZebraMode()===R.ZEBRA_FULL){if(Y.isRowHeaderArea()&&i.getRow()%2===1&&i.getRowSpan()===1){var Z=c.getHeaderInfo();if(Z){if((i.getCol()+i.getColSpan()-1)>=Z.getStartColForInnermostDimension()){i.addStyle(R.STYLE_ALTERNATING);}}}}};var V=function(i,j,Y){if(i.getAreaType()===R.TYPE_COLUMN_HEADER_AREA){var Z=j.getRow();if(p[Z]!=undefined){if(p[Z]<Y){p[Z]=Y;}}else{p[Z]=Y;}}else if(i.getAreaType()===R.TYPE_ROW_HEADER_AREA){var $=j.getCol();if(s[$]!=undefined){if(s[$]<Y){s[$]=Y;}}else{s[$]=Y;}}};function W(j){var i;if(j.valueType){var Y=X(j.formatString);var Z;if(j.valueType==="Integer"||j.valueType==="Double"){Z={groupingEnabled:true,maxFractionDigits:j.decimals,pattern:Y,showMeasure:true};i=sap.ui.core.format.NumberFormat.getCurrencyInstance(Z);}else if(j.valueType==="Amount"||j.valueType==="Price"||j.valueType==="Quantity"){Z={groupingEnabled:true,maxFractionDigits:j.decimals,pattern:Y,showMeasure:true};i=sap.ui.core.format.NumberFormat.getCurrencyInstance(Z);}}return i;}function X(i){var j;if(i){j=i;var Y="#(?![#|"+","+"]).(?=#)";var Z=new RegExp(Y,"g");i=i.replace(Z,"#"+",");Y="0(?![0|"+"."+"]).(?=0)";Z=new RegExp(Y,"g");j=j.replace(Z,"0"+".");}return j;}};
return sap.zen.crosstab.datahandler.JsonDataHandler;});
sap.ui.predefine('sap/zen/crosstab/dragdrop/DragDropAreaRenderer',["jquery.sap.global",],function(q){"use strict";q.sap.declare("sap.zen.crosstab.dragdrop.DragDropAreaRenderer");
sap.zen.crosstab.dragdrop.DragDropAreaRenderer=function(c){var h;var m;var M;var p;var d;var D;var i;var a;var I;var o;var b={"sIdSuffix":"droparea_above","sCssClassName":"sapzencrosstab-rowAboveCellDropArea"};var e={"sIdSuffix":"droparea_below","sCssClassName":"sapzencrosstab-rowBelowCellDropArea"};var f={"sIdSuffix":"droparea_before","sCssClassName":"sapzencrosstab-columnBeforeCellDropArea"};var g={"sIdSuffix":"droparea_after","sCssClassName":"sapzencrosstab-columnAfterCellDropArea"};var j={"sIdSuffix":"droparea_after","sCssClassName":"sapzencrosstab-columnAfterCellDropAreaWithSort"};this.addStylesToHtmlString=function(H,C){if(C){for(var s in C){if(C.hasOwnProperty(s)){H=H+s+":"+C[s]+";";}}}return H;};this.applyCssStyles=function(J,C){if(C&&J){for(var s in C){if(C.hasOwnProperty(s)){J.css(s,C[s]);}}}};this.createDiv=function(C,s,k,l,A,n,P){return this.createFlexDiv(C,c.getRenderSizeDiv(),s,k,l,A,n,P);};this.createFlexDiv=function(C,J,s,k,l,A,n,P){var r=C.getId()+"_"+s;var t;var H;t=q(document.getElementById(r));if(t.length===0){H="<div id=\""+r+"\" class=\""+k+"\" style=\"";if(l){H=this.addStylesToHtmlString(H,l);}H=H+"\"></div>";if(!P){J.append(H);}else{J.prepend(H);}t=q(document.getElementById(r));t.data("xtabcellid",C.getId());}if(A){this.applyCssStyles(t,A);}if(n){n(t);}return t;};this.createBeforeDropArea=function(C,k){var r;var B;var t;var H;var s;r=o.getBoundingClientRect(document.getElementById(C.getId()));B=(r.begin-d);t=0;H=i;if(k.iTop){t=k.iTop-D;H=i-t;}if(k.iBottom){H=k.iBottom-D-t;}s={"top":t+"px","height":H+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s);};this.createAfterDropArea=function(C,k){var r;var B;var s;var S=null;var A=null;var t;var H;var l;r=o.getBoundingClientRect(document.getElementById(C.getId()));B=(r.end-d);t=0;H=i;if(k.iTop){t=k.iTop-D;H=i-t;}if(k.iBottom){H=k.iBottom-D-t;}S={"top":t+"px","height":H+"px"};if(I){S.right=B+"px";l="right";}else{S.left=B+"px";l="left";}A=function(J){J.css(l,(B-(J.outerWidth()/2.0))+"px");};return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,S,A);};this.createAboveDropArea=function(C,k){var r;var t;var w;var B;var s;r=o.getBoundingClientRect(document.getElementById(C.getId()));t=r.top-D;B=0;w=a;if(k.iBegin){B=(k.iBegin-d);w=a-B;}if(k.iEnd){w=k.iEnd-d-B;}s={"top":t+"px","width":w+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s);};this.createBelowDropArea=function(C,k){var r;var t;var s=null;var A=null;var w;var B;r=o.getBoundingClientRect(document.getElementById(C.getId()));t=r.bottom-D;B=0;w=a;if(k.iBegin){B=(k.iBegin-d);w=a-B;}if(k.iEnd){w=k.iEnd-d-B;}s={"top":t+"px","width":w+"px"};if(I){s.right=B+"px";}else{s.left=B+"px";}A=function(J){J.css("top",(t-(J.outerHeight()/2.0))+"px");};return this.createDiv(C,k.sIdSuffix,k.sCssClassName,null,s,A);};this.createDropAreasForPivotDimHeaderCell=function(C){var s;if(M===0){this.createBeforeDropArea(C,f);}else if(m===0){this.createAboveDropArea(C,b);}this.createBelowDropArea(C,e);this.createAfterDropArea(C,C.getSort()?j:g);};this.checkNeedsDropAreaByLookAheadCell=function(l,A,s){var k=true;var L=null;if(l){if(l.isSplitPivotCell()===true){L=h.getDimensionInfoByRowCol(l,A);}else{L=h.getDimensionInfoByRowCol(l);}if(L){k=L.sDimensionName!==s;}}return k;};this.createDropAreasForDimHeaderCell=function(C){var s=null;var k="";var l=false;var L;var n=null;var r=C.getTableCol();var R=C.getTableRow();if(c.getHeaderInfo().isBottomRightDimHeaderCell(C)===true){if(M===0){this.createBeforeDropArea(C,f);}else if(m===0){this.createAboveDropArea(C,b);}if(!C.getScalingAxis()||C.getScalingAxis()==="ROWS"){this.createBelowDropArea(C,e);}if(!C.getScalingAxis()||C.getScalingAxis()==="COLS"){this.createAfterDropArea(C,C.getSort()?j:g);}}else if((R<m&&c.getHeaderInfo().isRightColDimHeaderCell(C)===true)||(c.getHeaderInfo().isBottomRowDimHeaderCell(C)===true&&r<M)){k=h.getDimensionInfoByRowCol(C).sDimensionName;if(c.getHeaderInfo().isBottomRowDimHeaderCell(C)===true){if(r===0){this.createBeforeDropArea(C,f);}l=true;L=r+C.getColSpan();if(L<=M){n=c.getTableCellWithColSpan(R,L);l=(n.getScalingAxis()&&n.getScalingAxis()==="ROWS")||this.checkNeedsDropAreaByLookAheadCell(n,"ROWS",k);}if(l){this.createAfterDropArea(C,C.getSort()?j:g);}}if(c.getHeaderInfo().isRightColDimHeaderCell(C)===true){if(R===0){this.createAboveDropArea(C,b);}l=true;L=R+C.getRowSpan();if(L<=m){n=c.getTableCellWithRowSpan(L,r);l=(n.getScalingAxis()&&n.getScalingAxis()==="COLS")||this.checkNeedsDropAreaByLookAheadCell(n,"COLS",k);}if(l===true){this.createBelowDropArea(C,e);}}}};this.init=function(k,l){p=k;o=l;h=c.getHeaderInfo();m=c.getTableMaxDimHeaderRow();M=c.getTableMaxDimHeaderCol();i=c.getRenderSizeDiv().outerHeight();a=c.getRenderSizeDiv().outerWidth();I=c.getPropertyBag().isRtl();var r=o.getBoundingClientRect(c.getRenderSizeDiv()[0]);d=r.begin;D=r.top;};this.renderDimHeaderDropAreas=function(){var r=0;var C=0;var k=null;var l=p.getTableRow();var n=p.getTableCol();while(C<n){k=c.getTableCellWithColSpan(l,C);if(k){this.createDropAreasForDimHeaderCell(k);C=C+k.getColSpan();}}while(r<=l){k=c.getTableCellWithRowSpan(r,n);if(k){this.createDropAreasForDimHeaderCell(k);r=r+k.getRowSpan();}}};this.renderSplitPivotCellDragAreas=function(C,J){if(c.getPropertyBag().isRtl()){this.createFlexDiv(C,J,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{"position":"absolute","bottom":"0px","right":"0px","border-left":"0px solid transparent;"},{"border-bottom-width":J.outerHeight()+"px","border-left-width":J.outerWidth()+"px"},null,true);this.createFlexDiv(C,J,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{"position":"absolute","top":"0px","left":"0px","border-right":"0px solid transparent;"},{"border-top-width":J.outerHeight()+"px","border-right-width":J.outerWidth()+"px"},null,true);}else{this.createFlexDiv(C,J,"dragarea_rows","sapzencrosstab-pivotCellRowsDimDragArea",{"position":"absolute","bottom":"0px","left":"0px","border-right":"0px solid transparent;"},{"border-bottom-width":J.outerHeight()+"px","border-right-width":J.outerWidth()+"px"},null,true);this.createFlexDiv(C,J,"dragarea_cols","sapzencrosstab-pivotCellColsDimDragArea",{"position":"absolute","top":"0px","right":"0px","border-left":"0px solid transparent;"},{"border-top-width":J.outerHeight()+"px","border-left-width":J.outerWidth()+"px"},null,true);}};this.repositionDropAreasForHeaderScrolling=function(){var k;var J;var B;var l;var C;if(c.isHeaderHScrolling()){k=c.getRenderSizeDiv().find("div .sapzencrosstab-columnAfterCellDropArea, .sapzencrosstab-columnAfterCellDropAreaWithSort");if(k){q.each(k,function(n,r){J=q(r);l=c.getRenderSizeDiv().find("#"+q.sap.encodeCSS(J.data("xtabcellid")));if(l.length>0){C=o.getBoundingClientRect(l[0]);B=C.end-d-J.outerWidth()/2.0;J.css(I?"right":"left",B+"px");}});}}};this.createExternalDimDropAreasForMemberCell=function(C){var J=this.createAboveDropArea(C,b);var k=this.createBeforeDropArea(C,f);return{"oJqAboveArea":J,"oJqBeforeArea":k};};};
return sap.zen.crosstab.dragdrop.DragDropAreaRenderer;});
sap.ui.predefine('sap/zen/crosstab/dragdrop/DragDropHandler',["jquery.sap.global","sap/base/Log","sap/zen/crosstab/dragdrop/DragDropUtils","sap/zen/crosstab/dragdrop/DragDropAreaRenderer","sap/zen/crosstab/dragdrop/DragDropHoverManager","sap/zen/crosstab/dragdrop/MemberDragDropHandler","sap/zen/crosstab/TextConstants","sap/zen/crosstab/utils/Utils"],function(q,L){"use strict";L.info("Load Drag Drop Handler");q.sap.declare("sap.zen.crosstab.dragdrop.DragDropHandler");
sap.zen.crosstab.dragdrop.DragDropHandler=function(c,d){var t=this;var D;var o;var a;var m;var p;this.initDragDrop=function(F){var i=d.insertmembercommand&&d.insertmembercommand.length>0;sap.zen.Dispatcher.instance.registerUnhandledDropHandler(c.getId(),c.onUnhandledDrop);sap.zen.Dispatcher.instance.registerDragDropCancelHandler(c.getId(),c.onEscKeyPressed);this.registerCrosstabAsDropHandler();a=new sap.zen.crosstab.dragdrop.DragDropHoverManager(c);D=new sap.zen.crosstab.dragdrop.DragDropUtils(c);o=new sap.zen.crosstab.dragdrop.DragDropAreaRenderer(c);if(i){m=new sap.zen.crosstab.dragdrop.MemberDragDropHandler(c,d,D,o,a);}p=c.getHeaderInfo().setupPivotCell();a.init(D);D.init(a);o.init(p,D);if(i){m.init(p);}if(p){this.enableDimHeaderNonPivotCells();this.enableDimHeaderPivotCell();if(!F){o.renderDimHeaderDropAreas();this.enableDimHeaderDropAreas();}}this.addExternalDimensionDropAreasIfOnlyMeasures();};this.addExternalDimensionDropAreasIfOnlyMeasures=function(){var C;var A;D.setOnlyMeasuresMode(false);if(sap.zen.crosstab.utils.Utils.isDispatcherAvailable()){if(sap.zen.Dispatcher.instance.isInterComponentDragDropEnabled()&&c.getHeaderInfo().hasOnlyMeasureStructure()){D.setOnlyMeasuresMode(true);C=c.getTableCell(0,0);if(C&&document.getElementById(C.getId())){A=o.createExternalDimDropAreasForMemberCell(C);this.makeAboveAreaDroppable(A.oJqAboveArea,"sapzencrosstab-rowAboveCellDropArea");this.makeBeforeAreaDroppable(A.oJqBeforeArea,"sapzencrosstab-columnBeforeCellDropArea");}}}};this.returnFromDimHeaderDropAccept=function(C,A,e){C.setRevertDrop(e);sap.zen.Dispatcher.instance.setDropAccepted(C.getId(),A);return A;};function b(){var P;var e;var i;var C;C=a.getCellFromJqCell(this);P=sap.zen.Dispatcher.instance.getDragDropPayload();if(c.isBlocked()||!P||P&&P.oDragDropInfo.bIsMemberDrag){return t.returnFromDimHeaderDropAccept(C,false,true);}if(!D.checkAcceptExternalDimension(P)){return t.returnFromDimHeaderDropAccept(C,false,true);}if(!D.checkDroppableInArea(q(this),D.determineValidHeaderRect())){return t.returnFromDimHeaderDropAccept(C,false,false);}i=c.getHeaderInfo().getDimensionInfoByRowCol(C);if(D.isExternalDropOnNonRemovableStructure(i,P)){return t.returnFromDimHeaderDropAccept(C,false,true);}if(D.isDragFromOtherCrosstab(P)){return t.returnFromDimHeaderDropAccept(C,false,true);}if(!D.checkAcceptCrossComponent(P)){return t.returnFromDimHeaderDropAccept(C,false,true);}if(P.oDragDropInfo){e=P.oDragDropInfo;if(i&&i.sDimensionName===e.sDimensionName){return t.returnFromDimHeaderDropAccept(C,false,true);}}else{return t.returnFromDimHeaderDropAccept(C,false,true);}return t.returnFromDimHeaderDropAccept(C,true,false);}function h(e){var s;var i;var j;var k;var P;if(D.checkDropAllowedOnCrosstabElement(e)){P=sap.zen.Dispatcher.instance.getDragDropPayload();if(P&&P.oDragDropInfo){k=a.getCellFromJqCell(this);s=P.oDragDropInfo.sDimensionName;i=c.getHeaderInfo().getDimensionInfoByRowCol(k);j=i?i.sDimensionName:null;if(s&&s.length>0&&j&&j.length>0){if(s!==j){var C=d.swapdimensionscommand.replace("__DIMENSION_NAME__",s);C=C.replace("__WITH_DIMENSION_NAME__",j);c.getUtils().executeCommandAction(C);}}}D.resetDragDrop();}}this.getTextForDragGhostCell=function(C,e,M){var T=null;var s;if(e.bIsMeasureStructure===true){T=M;}else{if(C.isSplitPivotCell()===true){if(e.sAxisName==="ROWS"){s=c.getHeaderInfo().getDimensionInfoByCol(C.getTableCol());}else if(e.sAxisName==="COLS"){s=c.getHeaderInfo().getDimensionInfoByRow(C.getTableRow());}if(s){if(s.sAttributeName){T=s.sAttributeText;}else{T=s.sDimensionText;}}else{T=C.getText();}}else{T=C.getText();}}if(!T||T&&T.length===0){T=e.sDimensionText;}return T;};this.getDragGhostCellHtml=function(C,e,M){var T;var j;var J;var w;var H;var W;j=q(document.getElementById(C.getId()));if(!e.bIsStructure){J=q(document.getElementById(C.getId()+"_cellLayoutDiv"));w=J.outerWidth();W=w+"px";}else{W="100%";}T=this.getTextForDragGhostCell(C,e,M);H="<td class=\""+j.attr("class")+" sapzencrosstab-DragHeaderCell"+"\">";H+="<div style=\"width: "+W+"\">"+T+"</div></td>";return H;};this.createDimHeaderCellDragObject=function(e,j){var J=null;var i=0;var C;var H;var M;var l;var k;var P;if(j.bIsMeasureStructure===true){M=c.getPropertyBag().getText(sap.zen.crosstab.TextConstants.MEASURE_STRUCTURE_TEXT_KEY);l=1;}else{l=e.length;}H="<table id=\""+c.getId()+"_dragghost\" style=\"z-index: 9999;border-collapse: collapse\" class=\"sapzencrosstab-DimensionHeaderArea\"><tbody>";H+=D.getDeleteDragGhostCellRowHtml(j.sAxisName==="ROWS"?e.length:1);if(j.sAxisName==="ROWS"){C=e[0];k=q(document.getElementById(C.getId())).outerHeight();H+="<tr style=\"height: "+k+"px\">";for(i=0;i<l;i++){C=e[i];H+=this.getDragGhostCellHtml(C,j,M);}H+="</tr>";}else if(j.sAxisName==="COLS"){for(i=0;i<l;i++){C=e[i];k=q(document.getElementById(C.getId())).outerHeight();H+="<tr style=\"height: "+k+"px\">";H+=this.getDragGhostCellHtml(C,j,M);H+="</tr>";}}H+="</tbody></table>";J=q(H);P=sap.zen.Dispatcher.instance.createDragDropPayload(c.getId());P.oDragDropInfo=D.buildDimensionDragDropInfo(j);sap.zen.Dispatcher.instance.setDragDropPayload(P);c.setDragAction(true);return J;};function f(){var C;var j;var e;var i=[];C=a.getCellFromJqCell(this);if(C){D.setCurrentJqDragCell(q(this));e=c.getHeaderInfo().getDimensionInfoByRowCol(C);i=c.getHeaderInfo().getCellsWithSameDimension(C);D.saveRevertCellPosInfo(C,i);j=t.createDimHeaderCellDragObject(i,e);D.setCursorAt(C,j);}return j;}this.makeAboveAreaDroppable=function(j,C){var A=D.getAreaInfo(j);var H=function(e){var k;if(D.checkDropAllowedOnCrosstabElement(e)){if(D.isOnlyMeasuresMode()===true){k={};k.sDragDimensionName=D.getDimensionNameDromDragDropPayload();k.sDropAxisName="COLS";k.iDropAxisIndex=0;}else{k=D.getCellInfoFromDropArea(e,"droparea_above");if(k){if(k.sDropAxisName==="ROWS"&&c.getTableMaxDimHeaderRow()===0){k.sDropAxisName="COLS";k.iDropAxisIndex=0;}}}if(k){t.sendInsertDimensionCommand(k);}D.resetDragDrop();}};var i=function(e){return D.checkGenericDimMoveToAreasAccept(j,e,A.oDimInfo,A.oCell,"droparea_above",false);};D.makeDropAreaDroppable(j,C,i,H);};this.makeBelowAreaDroppable=function(j,C){var A=D.getAreaInfo(j);var H=function(e){var k;if(D.checkDropAllowedOnCrosstabElement(e)){k=D.getCellInfoFromDropArea(e,"droparea_below");if(k){if(k.bDropCellIsBottomRight===true){k.sDropAxisName="COLS";k.iDropAxisIndex=c.getHeaderInfo().getNumberOfDimensionsOnColsAxis();}else{k.iDropAxisIndex++;}t.sendInsertDimensionCommand(k);}D.resetDragDrop();}};var i=function(e){return D.checkGenericDimMoveToAreasAccept(j,e,A.oDimInfo,A.oCell,"droparea_below",false);};D.makeDropAreaDroppable(j,C,i,H);};this.makeBeforeAreaDroppable=function(j,C){var A=D.getAreaInfo(j);var H=function(e){var k;if(D.checkDropAllowedOnCrosstabElement(e)){if(D.isOnlyMeasuresMode()===true){k={};k.sDragDimensionName=D.getDimensionNameDromDragDropPayload();k.sDropAxisName="ROWS";k.iDropAxisIndex=0;}else{k=D.getCellInfoFromDropArea(e,"droparea_before");if(k){if(k.sDropAxisName==="COLS"&&c.getTableMaxDimHeaderCol()===0){k.sDropAxisName="ROWS";k.iDropAxisIndex=0;}}}if(k){t.sendInsertDimensionCommand(k);}D.resetDragDrop();}};var i=function(e){return D.checkGenericDimMoveToAreasAccept(j,e,A.oDimInfo,A.oCell,"droparea_before",false);};D.makeDropAreaDroppable(j,C,i,H);};this.makeAfterAreaDroppable=function(j,C){var A=D.getAreaInfo(j);var H=function(e){var k;if(D.checkDropAllowedOnCrosstabElement(e)){k=D.getCellInfoFromDropArea(e,"droparea_after");if(k){if(k.bDropCellIsBottomRight===true){k.sDropAxisName="ROWS";k.iDropAxisIndex=c.getHeaderInfo().getNumberOfDimensionsOnRowsAxis();}else{k.iDropAxisIndex++;}t.sendInsertDimensionCommand(k);}D.resetDragDrop();}};var i=function(e){var r=D.checkGenericDimMoveToAreasAccept(j,e,A.oDimInfo,A.oCell,"droparea_after",true);return r;};D.makeDropAreaDroppable(j,C,i,H);};this.enableDimHeaderDropAreas=function(){var j=q(document.getElementById(c.getId()));var C=null;var B=null;var A=null;var e=null;var i=null;var k=null;C="sapzencrosstab-columnBeforeCellDropArea";B=j.find("."+C);q.each(B,function(l,n){t.makeBeforeAreaDroppable(q(n),C);});C="sapzencrosstab-columnAfterCellDropArea";A=j.find("."+C);q.each(A,function(l,n){t.makeAfterAreaDroppable(q(n),C);});C="sapzencrosstab-columnAfterCellDropAreaWithSort";e=j.find("."+C);q.each(e,function(l,n){t.makeAfterAreaDroppable(q(n),C);});C="sapzencrosstab-rowAboveCellDropArea";i=j.find("."+C);q.each(i,function(l,n){t.makeAboveAreaDroppable(q(n),C);});C="sapzencrosstab-rowBelowCellDropArea";k=j.find("."+C);q.each(k,function(l,n){t.makeBelowAreaDroppable(q(n),C);});};this.getPivotCellAreaFromMouseCoordinates=function(e,C){var A=null;var i=document.getElementById(C.getId()+"_dragarea_cols");var r=i.getBoundingClientRect();var x=e.clientX-r.left;var y=e.clientY-r.top;var B=x*r.height/r.width;if(c.getPropertyBag().isRtl()){B=r.height-B;}y>B?A="ROWS":A="COLS";return A;};function g(e){var A;var C;var r;var i=null;var j;var J;var k;k=a.getCellFromJqCell(this);C=k.getTableCol();r=k.getTableRow();A=t.getPivotCellAreaFromMouseCoordinates(e,k);if(A==="ROWS"){j=c.getHeaderInfo().getDimensionInfoByCol(C);}else if(A==="COLS"){j=c.getHeaderInfo().getDimensionInfoByRow(r);}i=c.getHeaderInfo().getCellsWithSameDimensionByDimInfo(j);D.saveRevertCellPosInfo(k,i,A);J=t.createDimHeaderCellDragObject(i,j);D.setCursorAt(k,J);return J;}this.makeSplitPivotCellDraggable=function(C,j){o.renderSplitPivotCellDragAreas(C,j);D.makeCellDraggable(j,g);};this.enableDimHeaderNonPivotCells=function(){var r=0;var C=0;var M=p.getTableRow();var i=p.getTableCol();var e=null;var j=null;while(C<i){e=c.getTableCellWithColSpan(M,C);if(e){j=q(document.getElementById(e.getId()));D.makeCellDraggable(j,f);D.makeCellDroppable(j,b,h);C=C+e.getColSpan();}}while(r<M){e=c.getTableCellWithRowSpan(r,i);if(e){j=q(document.getElementById(e.getId()));D.makeCellDraggable(j,f);D.makeCellDroppable(j,b,h);r=r+e.getRowSpan();}}};this.isNonSplitPivotCellDragDropEnabled=function(){var e=true;if(p&&!p.isSplitPivotCell()){if(p.getScalingAxis()==="COLS"){e=c.getHeaderInfo().hasDimensionsOnRowsAxis();}else if(p.getScalingAxis()==="ROWS"){e=c.getHeaderInfo().hasDimensionsOnColsAxis();}}return e;};this.enableDimHeaderPivotCell=function(){var j;if(p){j=q(document.getElementById(p.getId()));if(p.isPivotCell()===true&&p.isSplitPivotCell()===true){this.makeSplitPivotCellDraggable(p,j);}else{if(this.isNonSplitPivotCellDragDropEnabled()){D.makeCellDraggable(j,f);D.makeCellDroppable(j,b,h);}}}};this.onUnhandledDrop=function(e,u,P){var i;var I=false;var j=false;if(sap.zen.Dispatcher.instance.isDragDropCanceled()){return;}if(!P){sap.zen.Dispatcher.instance.setDragDropCanceled(true);return;}if(D.checkMouseInRenderSizeDiv(e)===true){sap.zen.Dispatcher.instance.setDragDropCanceled(true);}else if(P&&P.oDragDropInfo){i=P.oDragDropInfo;if(i.bIsMemberDrag){m.removeMember(e,u,i);}else{I=i.bIsStructure;j=i.bIsRemoveStructureAllowed;if(I&&!j){sap.zen.Dispatcher.instance.setDragDropCanceled(true);}else{if(i.sDimensionName&&i.sDimensionName.length>0){var C=d.removedimensioncommand.replace("__DIMENSION_NAME__",i.sDimensionName);c.getUtils().executeCommandAction(C);}else{sap.zen.Dispatcher.instance.setDragDropCanceled(true);}}}}};this.onEscKeyPressed=function(){var j;sap.zen.Dispatcher.instance.setDragDropCanceled(true);j=D.getCurrentJqDragCell();if(j){j.draggable().trigger("mouseup");}else{D.resetDragDrop();}a.cleanupDropCells();a.cleanupDropAreas();};this.repositionDropAreasForHeaderScrolling=function(){o.repositionDropAreasForHeaderScrolling();};this.sendInsertDimensionCommand=function(C){var s=d.insertdimensioncommand;if(C&&s&&s.length>0){s=s.replace("__DIMENSION_NAME__",C.sDragDimensionName);s=s.replace("__AXIS__",C.sDropAxisName);s=s.replace("__AXIS_INDEX__",C.iDropAxisIndex);c.getUtils().executeCommandAction(s);}};this.registerCrosstabAsDropHandler=function(){var j;j=q(document.getElementById(c.getId()));if(!j.hasClass("ui-droppable")){j.droppable({greedy:true,accept:function(){return true;},drop:function(e,u){if(!e.buttons){sap.zen.Dispatcher.instance.onUnhandledDrop(e,u);}}});}};};
return sap.zen.crosstab.dragdrop.DragDropHandler;});
sap.ui.predefine('sap/zen/crosstab/dragdrop/DragDropHoverManager',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.dragdrop.DragDropHoverManager");
sap.zen.crosstab.dragdrop.DragDropHoverManager=function(c){var t=this;var d={};var j=null;var D;var m=false;var C;this.init=function(p){D=p;};this.getCellFromId=function(i){var o=sap.ui.getCore().getControl(i);return o;};this.getCellFromJqCell=function(J){var i=q(J).attr("id");return this.getCellFromId(i);};this.findAllDroppableCells=function(){var a;var J;var p;p=sap.zen.Dispatcher.instance.getDragDropPayload();if(!p){return[];}if(p.oDragDropInfo.bIsMemberDrag){J=p.oDragDropInfo.sAxisName==="ROWS"?c.getRowHeaderAreaDiv():c.getColHeaderAreaDiv();}else{J=c.getDimHeaderAreaDiv();}a=J.find("td .ui-droppable, .ui-droppable-disabled");return a;};this.getDropCell=function(e){var a;var o;var b;a=this.findAllDroppableCells();q.each(a,function(i,f){o=f.getBoundingClientRect();if(e.clientX>o.left&&e.clientX<o.right){if(e.clientY>o.top&&e.clientY<o.bottom){b=t.getCellFromJqCell(f);return false;}}});return b;};this.getCellsForDimensionDrop=function(o){var a;var p;var b;var e=null;a=c.getHeaderInfo().getDimensionInfoByRowCol(o);p=sap.zen.Dispatcher.instance.getDragDropPayload();if(!D.isExternalDropOnNonRemovableStructure(a,p)){b=p.oDragDropInfo;if(b.sDimensionName!==a.sDimensionName&&!sap.zen.Dispatcher.instance.isDragDropCanceled()&&!o.isRevertDrop()){e=c.getHeaderInfo().getCellsWithSameDimension(o);}}return e;};this.getCellsForMemberDrop=function(o){var a;var b;var e;a=c.getHeaderInfo().getDimensionInfoForMemberCell(o);b=sap.zen.Dispatcher.instance.getDragDropPayload().oDragDropInfo;if(b.sDimensionName===a.sDimensionName&&!sap.zen.Dispatcher.instance.isDragDropCanceled()&&!o.isRevertDrop()){if(c.getPropertyBag().isRepeatTexts()){e=D.getAllMemberCellsInRowOrCol(o);}else{e=c.getHeaderInfo().getMemberCellsForSameDimension(o);}}return e;};this.provideDropCellHoverEffect=function(o){var a;var i;var b;var J;var p;var s;p=sap.zen.Dispatcher.instance.getDragDropPayload();if(!p){return;}if(o){if(!p.oDragDropInfo.bIsMemberDrag){a=this.getCellsForDimensionDrop(o);}else{a=this.getCellsForMemberDrop(o);}s=this.getDropCellClassName();if(a){for(i=0;i<a.length;i++){b=a[i];J=q(document.getElementById(b.getId()));J.addClass(s);if(J.hasClass("sapzencrosstab-HeaderCellAlternating")){J.removeClass("sapzencrosstab-HeaderCellAlternating");J.data("bAlternating",true);}J.removeClass("sapzencrosstab-HeaderCellAlternating");}}}};this.cleanupDropCells=function(){var s=t.getDropCellClassName();var J;var M=c.getRenderSizeDiv().find("."+s);q.each(M,function(i,o){J=q(o);J.removeClass(s);if(J.data("bAlternating")===true){J.addClass("sapzencrosstab-HeaderCellAlternating");}});};this.getDropCellClassName=function(){var p=sap.zen.Dispatcher.instance.getDragDropPayload();if(!p){return null;}if(p.oDragDropInfo.bIsMemberDrag){return"sapzencrosstab-DropMemberCell";}else{return"sapzencrosstab-DropHeaderCell";}};this.doOnDropCellOver=function(o,e){var J;if(!j){J=q(document.getElementById(o.getId()));if(D.checkMouseInRenderSizeDiv(e)){if(!J.hasClass(t.getDropCellClassName())){t.cleanupDropCells();t.provideDropCellHoverEffect(o);}}else{J.droppable().trigger("mouseout");}}};this.onDropCellOver=function(e){C=t.getCellFromId(e.target.id);C=D.getEffectiveCell(C);t.doOnDropCellOver(C,e);};this.doOnDropCellOut=function(o){var J;if(!j){t.cleanupDropCells();if(o){J=q(document.getElementById(o.getId()));if(!J.hasClass(t.getDropCellClassName())){t.provideDropCellHoverEffect(o);}}}};this.onDropCellOut=function(e){var o=t.getDropCell(e);o=D.getEffectiveCell(o);t.doOnDropCellOut(o);};this.disableDropCell=function(o){var J;if(!d[o.getId()]){J=q(document.getElementById(o.getId()));if(J.hasClass("ui-droppable")){J.droppable("disable");J.removeClass(this.getDropCellClassName());d[o.getId()]=J;}}};this.getDisableDimHeaderDropCellsForArea=function(s,a){var b;var r;var M=c.getTableMaxDimHeaderRow();var e=c.getTableMaxDimHeaderCol();var i;var o;var f;f=c.getHeaderInfo().getCellsWithSameDimension(a);if(!f){return[];}if(s==="droparea_above"||s==="droparea_below"){r=a.getTableRow();i=0;while(i<=e){o=c.getTableCellWithColSpan(r,i);if(o){i=i+o.getColSpan();f.push(o);}else{i++;}}}else if(s==="droparea_before"||s==="droparea_after"){b=a.getTableCol();i=0;while(i<=M){o=c.getTableCellWithRowSpan(i,b);if(o){i=i+o.getRowSpan();f.push(o);}else{i++;}}}return f;};this.getDisableMemberDropCellsForArea=function(s,a){var b;var r;var o;var S;var e;var i;var E;var R;var f;var g;b=c.getHeaderInfo().getMemberCellsForSameDimension(a);if((s==="droparea_above"||s==="droparea_below")&&c.hasRowHeaderArea()){r=c.getRowHeaderArea();R=Math.max(a.getRow(),r.getRenderStartRow());i=r.getRenderStartCol();E=i+r.getRenderColCnt()-1;f=i;while(f<=E){g=r.getCellWithRowSpan(R,f);if(g){if(s==="droparea_below"){if(a.getRow()===(g.getRow()+g.getRowSpan()-1)){b.push(g);}}else{if(a.getRow()===g.getRow()){b.push(g);}}f=f+g.getColSpan();}else{f++;}}}else if((s==="droparea_before"||s==="droparea_after")&&c.hasColHeaderArea()){o=c.getColumnHeaderArea();f=Math.max(a.getCol(),o.getRenderStartCol());S=o.getRenderStartRow();e=S+o.getRenderRowCnt()-1;R=S;while(R<=e){g=o.getCellWithColSpan(R,f);if(g){if(s==="droparea_after"){if(a.getCol()===(g.getCol()+g.getColSpan()-1)){b.push(g);}}else{if(a.getCol()===g.getCol()){b.push(g);}}R=R+g.getRowSpan();}else{R++;}}}return b;};this.disableDropCellsForArea=function(s,a){var b;var o;var i;var p;p=sap.zen.Dispatcher.instance.getDragDropPayload();if(!p){return;}if(p.oDragDropInfo.bIsMemberDrag){b=this.getDisableMemberDropCellsForArea(s,a);}else{b=this.getDisableDimHeaderDropCellsForArea(s,a);}for(i=0;i<b.length;i++){o=b[i];this.disableDropCell(o);}};this.cleanupDropAreas=function(){if(j){q.each(d,function(i,o){if(o.hasClass("ui-droppable-disabled")){o.droppable("enable");}});d={};j=null;}};this.onDropAreaOver=function(e){var s;var o;var a;t.cleanupDropAreas();j=q(document.getElementById(e.target.id));if(!D.isOnlyMeasuresMode()){t.cleanupDropCells();s=j.data("xtabcellid");a=D.getDropAreaTypeFromDropAreaId(e.target.id);o=sap.ui.getCore().getControl(s);t.disableDropCellsForArea(a,o);}};this.onDropAreaOut=function(e){var o;if(!D.isOnlyMeasuresMode()){t.cleanupDropCells();}if(j){q.each(d,function(i,a){if(a.hasClass("ui-droppable-disabled")){a.droppable("enable");}});if(!D.isOnlyMeasuresMode()){o=t.getDropCell(e);if(o){t.provideDropCellHoverEffect(o);}}d={};j=null;}};this.getCurrentDropArea=function(){return j;};this.provideDraggableCellCursor=function(J){J.on("mouseenter",function(){q(this).css("cursor","move");q(this).find("div").not(".sapzencrosstab-HeaderCellDivSortable, .sapzencrosstab-columnResizeHandle, .sapzencrosstab-columnResizeHandleWithSort, .sapzencrosstab-HeaderCellDivHierarchy").css("cursor","move");});J.on("mouseleave",function(){q(this).css("cursor","default");q(this).find("div").not(".sapzencrosstab-HeaderCellDivSortable, .sapzencrosstab-columnResizeHandle, .sapzencrosstab-columnResizeHandleWithSort, .sapzencrosstab-HeaderCellDivHierarchy").css("cursor","default");});J.draggable("option","drag",function(e,u){var i=D.checkMouseInRenderSizeDiv(e);var a;var o;D.setCurrentDragHelper(q(u.helper));if(!i){a=u.helper.find(".sapzencrosstab-HeaderCellAlternating");q.each(a,function(I,b){if(b){q(b).removeClass("sapzencrosstab-HeaderCellAlternating");q(b).addClass("sapzencrosstab-AlternatingDummy");}});q(u.helper).find(".sapzencrosstab-Trashcan").show();if(!m){t.cleanupDropCells();m=true;}}else{q(u.helper).find(".sapzencrosstab-Trashcan").hide();a=u.helper.find(".sapzencrosstab-AlternatingDummy");q.each(a,function(I,b){if(b){q(b).addClass("sapzencrosstab-HeaderCellAlternating");q(b).removeClass("sapzencrosstab-AlternatingDummy");}});if(m){if(C){o=D.findCell(q(e.toElement));if(o&&o.getId()===C.getId()){t.doOnDropCellOver(C,e);}}m=false;}}});};};
return sap.zen.crosstab.dragdrop.DragDropHoverManager;});
sap.ui.predefine('sap/zen/crosstab/dragdrop/DragDropUtils',["jquery.sap.global","sap/base/Log","sap/zen/crosstab/utils/Utils"],function(q,L){"use strict";L.info("loaded drag drop utils");q.sap.declare("sap.zen.crosstab.dragdrop.DragDropUtils");
sap.zen.crosstab.dragdrop.DragDropUtils=function(c){var h=c.getHeaderInfo();var C;var d;var j;var t=this;var o=false;this.init=function(p){d=p;};this.setOnlyMeasuresMode=function(p){o=p;};this.isOnlyMeasuresMode=function(){return o;};this.getDimensionNameDromDragDropPayload=function(){var p=sap.zen.Dispatcher.instance.getDragDropPayload();var D=null;var a=null;if(p){a=p.oDragDropInfo;if(a){D=a.sDimensionName;}}return D;};this.getAreaInfo=function(J,a){var A={};var s;s=J.data("xtabcellid");A.oJqCell=q(document.getElementById(s));A.oCell=sap.ui.getCore().getControl(A.oJqCell.attr("id"));A.oDimInfo=c.getHeaderInfo().getDimensionInfoByRowCol(A.oCell,a);return A;};this.getCellInfoFromDropArea=function(e,D){var a;var b;var f;var s;var i=-1;var r=-1;var S;var A;var J;if(D==="droparea_above"||D==="droparea_below"){S="COLS";}else if(D==="droparea_before"||D==="droparea_after"){S="ROWS";}J=q(document.getElementById(e.target.id));A=this.getAreaInfo(J,S);a=A.oDimInfo;f=A.oCell;s=this.getDimensionNameDromDragDropPayload();if(f&&s&&a){r=f.getTableRow();i=f.getTableCol();b={};b.sDropDimensionName=a.sDimensionName;b.oDropCell=f;b.iDropCellTableRow=r;b.iDropCellTableCol=i;b.bDropCellIsBottomRight=(r===c.getTableMaxDimHeaderRow()&&i===c.getTableMaxDimHeaderCol());b.sDragDimensionName=s;b.sDropAxisName=a.sAxisName;if(b.sDropAxisName==="ROWS"){b.iDropAxisIndex=h.getAbsoluteColIndexForDimension(b.sDropDimensionName);}else if(b.sDropAxisName==="COLS"){b.iDropAxisIndex=h.getAbsoluteRowIndexForDimension(b.sDropDimensionName);}}return b;};this.isExternalDropOnNonRemovableStructure=function(D,p){var r=false;if(this.isInterComponentDrag(p)){if(!D){return false;}return D.bIsStructure&&!D.bIsRemoveStructureAllowed;}return r;};this.isInterComponentDrag=function(p){return(p.sComponentId!==c.getId());};this.checkAcceptCrossComponent=function(p){if(!sap.zen.Dispatcher.instance.isInterComponentDragDropEnabled()){if(this.isInterComponentDrag(p)){return false;}}return true;};this.isDragFromOtherCrosstab=function(p){var i;var D;D=sap.zen.Dispatcher.instance.getControlForId(p.sComponentId);i=(D.zenControlType&&D.zenControlType==="xtable")&&p.sComponentId!==c.getId();return i;};this.getCrosstabHeaderCellFromDraggable=function(D){var a=sap.ui.getCore().byId(D.attr("id"));if(a){if(a.isHeaderCell&&a.isHeaderCell()){return a;}}return null;};this.getAxisNameFromAreaType=function(a){if(a==="droparea_above"||a==="droparea_below"){return"COLS";}return"ROWS";};this.checkDropAreaAccept=function(D,a,p,A){var b;var i=-1;var e=-1;var l=-1;var m=c.getTableMaxDimHeaderRow();var M=c.getTableMaxDimHeaderCol();var f=null;var s;var g;var k;var n;var I;if(this.isDragFromOtherCrosstab(p)===true){return false;}n=this.getAxisNameFromAreaType(A);i=a.getTableRow();e=a.getTableCol();k=h.getDimensionInfoByRowCol(a,n);g=p.oDragDropInfo.sAxisName;if(!g||g&&g.length===0){g=n;}if(p.sComponentId===c.getId()){b=this.getCrosstabHeaderCellFromDraggable(D);if(b.getId()===a.getId()){if(g!==k.sAxisName){return true;}}}if(k){s=p.oDragDropInfo.sDimensionName;if(s===k.sDimensionName){return false;}I=(A==="droparea_above"||A==="droparea_before");if(!I&&g===k.sAxisName){if(k.sAxisName=="ROWS"){l=e+a.getColSpan();if(l<=M){f=h.getDimensionInfoByCol(l);}}else if(k.sAxisName==="COLS"){l=i+a.getRowSpan();if(l<=m){f=h.getDimensionInfoByRow(l);}}if(f){if(f.sDimensionName===s){return false;}}}}else{return false;}return true;};this.returnFromGenericDimMoveToAreasCheck=function(J,a){J.data("xtabrevertdrop",!a);sap.zen.Dispatcher.instance.setDropAccepted(J.attr("id"),a);return a;};this.checkAcceptExternalDimension=function(p){if(p&&p.oDragDropInfo){if(this.isInterComponentDrag(p)){if(c.getHeaderInfo().isDimensionInCrosstab(p.oDragDropInfo.sDimensionName)){return false;}}}return true;};this.checkGenericDimMoveToAreasAccept=function(J,D,a,b,A,e){var p;var f=d.getCurrentDropArea();p=sap.zen.Dispatcher.instance.getDragDropPayload();if(c.isBlocked()||!p||p&&p.oDragDropInfo.bIsMemberDrag){return this.returnFromGenericDimMoveToAreasCheck(J,false);}if(!this.checkAcceptExternalDimension(p)){return this.returnFromGenericDimMoveToAreasCheck(J,false);}if(e){if(!this.checkDroppableInArea(J,this.determineValidHeaderRect())){return this.returnFromGenericDimMoveToAreasCheck(J,false);}}if(f){if(J.attr("id")!==f.attr("id")){return this.returnFromGenericDimMoveToAreasCheck(J,false);}}if(this.isInterComponentDrag(p)){if(!this.checkAcceptCrossComponent(p)){return this.returnFromGenericDimMoveToAreasCheck(J,false);}}if(!o){if(!this.checkDropAreaAccept(D,b,p,A)){return this.returnFromGenericDimMoveToAreasCheck(J,false);}}return this.returnFromGenericDimMoveToAreasCheck(J,true);};this.checkMouseInRenderSizeDiv=function(e){var m=false;var r;r=c.getRenderSizeDiv()[0].getBoundingClientRect();m=(e.clientX>r.left)&&(e.clientX<r.right);m=m&&(e.clientY>r.top&&e.clientY<r.bottom);return m;};this.determineValidHeaderRect=function(){var J;var v;J=c.getDimHeaderAreaDiv();if(J.length===0){J=c.getRowHeaderAreaDiv();}v=this.getBoundingClientRect(J[0]);return v;};this.checkDroppableInArea=function(J,v){var r;if(!c.isHeaderHScrolling()){return true;}r=J[0].getBoundingClientRect();if((r.right>v.left&&r.right<v.right)||(r.left<v.right&&r.right>v.right||(r.left>v.left&&r.right<v.right))){return true;}return false;};this.setCurrentJqDragCell=function(J){C=J;};this.getCurrentJqDragCell=function(){return C;};this.checkDragRevert=function(D){var a;var i;var r;var R;var p;R=q(this).data("oRevertPosInfo");if(R){p=t.getRevertPosition(R);q(this).data("uiDraggable").originalPosition=p;}if(!sap.zen.Dispatcher.instance.isDragDropCanceled()){i=q(D).data("xtabcellid");if(i&&i.length>0){r=q(D).data("xtabrevertdrop");return r;}else{i=q(D).attr("id");a=sap.ui.getCore().getControl(i);if(a&&a.isRevertDrop){return a.isRevertDrop();}return false;}}return true;};this.resetDragDrop=function(){sap.zen.Dispatcher.instance.setDragDropCanceled(false);c.setDragAction(false);j=null;};this.buildDimensionDragDropInfo=function(D){var a={};if(D){if(D.sDimensionName&&D.sDimensionName.length>0){a.sDimensionName=D.sDimensionName;}if(D.sAttributeName&&D.sAttributeName.length>0){a.sAttributeName=D.sAttributeName;}if(D.sAxisName&&D.sAxisName.length>0){a.sAxisName=D.sAxisName;}if(D.bIsMeasureStructure===true){a.bIsMeasureStructure=true;}if(D.bIsStructure===true){a.bIsStructure=true;a.bIsRemoveStructureAllowed=D.bIsRemoveStructureAllowed;}}a.bIsMemberDrag=false;a.iMemberRow=-1;a.iMemberCol=-1;return a;};this.makeDropAreaDroppable=function(J,H,f,a){J.droppable();J.droppable("option","hoverClass",H+"Active");J.droppable("option","addClasses",false);J.droppable("option","greedy",true);J.droppable("option","tolerance","pointer");J.droppable("option","accept",f);J.droppable("option","drop",a);J.droppable("option","over",d.onDropAreaOver);J.droppable("option","out",d.onDropAreaOut);};this.makeCellDroppable=function(J,f,H){J.droppable();J.droppable("option","addClasses",false);J.droppable("option","greedy",true);J.droppable("option","tolerance","pointer");J.droppable("option","accept",f);J.droppable("option","drop",H);J.droppable("option","over",d.onDropCellOver);J.droppable("option","out",d.onDropCellOut);};this.makeCellDraggable=function(J,H){J.draggable();J.draggable("option","cursor","move");J.draggable("option","cursorAt",{top:-5});J.draggable("option","appendTo",document.getElementById(c.getId()));J.draggable("option","addClasses",true);J.draggable("option","helper",H);J.draggable("option","revert",this.checkDragRevert);J.draggable("option","stop",this.resetDragDrop);d.provideDraggableCellCursor(J);q(J.draggable()).mousedown(function(e){if(sap.zen.crosstab.utils.Utils.isDispatcherAvailable){sap.zen.Dispatcher.instance.closeContextMenu();}sap.zen.crosstab.utils.Utils.cancelEvent(e);});};this.getDropAreaTypeFromDropAreaId=function(i){return i.substring(i.indexOf("droparea_"));};this.checkDropAllowedOnCrosstabElement=function(e){return(!sap.zen.Dispatcher.instance.isDragDropCanceled()&&!e.buttons&&this.checkMouseInRenderSizeDiv(e));};this.findCell=function(J){var D=J.closest("div");var a=c.getUtils().getCellIdFromContenDivId(D.attr("id"));var b=sap.ui.getCore().byId(a);return b;};this.getBoundingClientRect=function(D){return c.getUtils().getRtlAwareBoundingClientRect(D);};this.getDeleteDragGhostCellRowHtml=function(i){var H="<tr><td colspan="+i+">";H+="<div id=\""+c.getId()+"_dragtrash\" class=\"sapzencrosstab-Trashcan\"></div>";H+="</td></tr>";return H;};this.setCurrentDragHelper=function(J){j=J;};this.saveRevertCellPosInfo=function(a,b,A){var p={};var J;p.oCell=a;p.aCells=b;p.sAxisName=A;J=q(document.getElementById(a.getId()));J.data("oRevertPosInfo",p);};this.getRevertPosition=function(r){var J;var p;var R;var a;var b=r.oCell;var e=r.aCells;var A=r.sAxisName;a=e[0];J=q(document.getElementById(a.getId()));p=J.position();if(c.getPropertyBag().isRtl()||b.isSplitPivotCell()){if(e.length>1){a=e[e.length-1];J=q(document.getElementById(a.getId()));}}if(c.getPropertyBag().isRtl()){p.left=J.position().left+(c.isVScrolling()?c.getRenderEngine().getMeasuringHelper().getBrowserScrollbarWidth():0);}if(a.isSplitPivotCell()&&A&&A==="COLS"){R=c.getUtils().getRtlAwareBoundingClientRect(J[0]);if(c.getPropertyBag().isRtl()){p.left=p.left-(j?Math.round(j.outerWidth()/2.0):Math.round(R.width/2.0));}else{p.left=p.left+Math.round(R.width/2.0);}}return p;};this.setCursorAt=function(a,J){var w=0;var l=0;var b=q(document.getElementById(c.getId()));var e=q(document.getElementById(a.getId()));b.append(J);w=J.outerWidth();J.remove();l=Math.round(w/2.0);e.draggable("option","cursorAt",{top:-5,left:l});};this.getAllMemberCellsInRowOrCol=function(a){var A=a.getArea();var i=0;var T;var b=[];if(A.isRowHeaderArea()){while(i<A.getColCnt()){T=A.getCellWithColSpan(a.getRow(),i);if(T){b.push(T);i=i+T.getColSpan();}else{i++;}}}else if(A.isColHeaderArea()){while(i<A.getRowCnt()){T=A.getCellWithRowSpan(i,a.getCol());if(T){b.push(T);i=i+T.getRowSpan();}else{i++;}}}return b;};this.getEffectiveCell=function(a){var e=a;var A=null;if(a&&c.getPropertyBag().isRepeatTexts()){A=a.getArea();if(A.isRowHeaderArea()){e=A.getCellWithColSpan(a.getRow(),A.getColCnt()-1);}else if(A.isColHeaderArea()){e=A.getCellWithRowSpan(A.getRowCnt()-1,a.getCol());}}return e;};};
return sap.zen.crosstab.dragdrop.DragDropUtils;});
sap.ui.predefine('sap/zen/crosstab/dragdrop/MemberDragDropHandler',["jquery.sap.global","sap/zen/crosstab/dragdrop/DragDropUtils","sap/zen/crosstab/dragdrop/DragDropAreaRenderer","sap/zen/crosstab/dragdrop/DragDropHoverManager","sap/zen/crosstab/TextConstants","sap/zen/crosstab/utils/Utils"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.dragdrop.MemberDragDropHandler");
sap.zen.crosstab.dragdrop.MemberDragDropHandler=function(c,d,D,o,a){var t=this;var v;var V;var p;var I;var m={"sIdSuffix":"member_droparea_above","sCssClassName":"sapzencrosstab-rowAboveCellMemberDropArea"};var M={"sIdSuffix":"member_droparea_below","sCssClassName":"sapzencrosstab-rowBelowCellMemberDropArea"};var b={"sIdSuffix":"member_droparea_before","sCssClassName":"sapzencrosstab-columnBeforeCellMemberDropArea"};var f={"sIdSuffix":"member_droparea_after","sCssClassName":"sapzencrosstab-columnAfterCellMemberDropArea"};this.init=function(e){I=c.getPropertyBag().isRepeatTexts();p=e;v=D.getBoundingClientRect(c.getRowHeaderAreaDiv()[0]);V=D.getBoundingClientRect(c.getColHeaderAreaDiv()[0]);this.removeRowHeaderDropAreas();this.enableMemberDragDrop();};this.removeRowHeaderDropAreas=function(){var J;if(!c.getPropertyBag().isPixelScrolling()){J=c.getRenderSizeDiv();J.find(".sapzencrosstab-rowAboveCellMemberDropArea").remove();J.find(".sapzencrosstab-rowBelowCellMemberDropArea").remove();J.find(".sapzencrosstab-columnBeforeCellMemberDropArea").remove();J.find(".sapzencrosstab-columnAfterCellMemberDropArea").remove();}};this.getMemberCellHtml=function(C){var J;var e;var w;var H;J=q(document.getElementById(C.getId()));e=q(document.getElementById(C.getId()+"_cellLayoutDiv"));w=e.outerWidth();H="<td class=\""+J.attr("class")+" sapzencrosstab-DragHeaderCell"+"\">";H+="<div style=\"width: "+w+"px\">"+C.getText()+"</div></td>";return H;};this.createMemberCellDragObject=function(A,e){var H;var C;var n;var r;var i;var L;var J;if(A.getArea().isRowHeaderArea()){C="sapzencrosstab-RowHeaderArea";}else if(A.getArea().isColHeaderArea()){C="sapzencrosstab-ColumnHeaderArea";}H="<table style=\"z-index: 9999;border-collapse: collapse\" class=\""+C+"\"><tbody>";L=e.length;H+=D.getDeleteDragGhostCellRowHtml(L);if(A.getArea().isRowHeaderArea()){n=e[0];r=q(document.getElementById(n.getId())).outerHeight();H+="<tr style=\"height: "+r+"px\">";for(i=0;i<L;i++){n=e[i];H+=this.getMemberCellHtml(n);}H+="</tr>";}else if(A.getArea().isColHeaderArea()){for(i=0;i<L;i++){n=e[i];r=q(document.getElementById(n.getId())).outerHeight();H+="<tr style=\"height: "+r+"px\">";H+=this.getMemberCellHtml(n);H+="</tr>";}}H+="</tbody></table>";J=q(H);c.setDragAction(true);return J;};this.restrictDropIndexLimitsForHierarchyMember=function(C,e,A){var r=c.getRowHeaderArea();var i=c.getColumnHeaderArea();var R;var n;var T;var F=-1;var L=-1;var s=null;var u=null;if(C.getAlignment()==="TOP"||C.getAlignment==="DEFAULT"){if(A==="ROWS"){for(R=e.iMinIndex;R<=e.iMaxIndex;R++){T=r.getCellWithRowSpan(R,C.getCol(),true);if(T&&T.getLevel()===C.getLevel()&&T.getParentMemberId()===C.getParentMemberId()){if(F<0){F=R;}else{s=T;}}}if(F>-1){e.iMinIndex=F;}if(s){e.iMaxIndex=s.getRow()+s.getRowSpan()-1;}}else if(A==="COLS"){for(n=e.iMinIndex;n<=e.iMaxIndex;n++){T=i.getCellWithColSpan(C.getRow(),n,true);if(T&&T.getLevel()===C.getLevel()&&T.getParentMemberId()===C.getParentMemberId()){if(F<0){F=n;}else{s=T;}}}if(F>-1){e.iMinIndex=F;}if(s){e.iMaxIndex=s.getCol()+s.getColSpan()-1;}}}else{if(A==="ROWS"){for(R=e.iMaxIndex;R>=e.iMinIndex;R--){T=r.getCellWithRowSpan(R,C.getCol(),true);if(T&&T.getLevel()===C.getLevel()&&T.getParentMemberId()===C.getParentMemberId()){if(L<0){L=R;}else{u=T;}}}if(u){e.iMinIndex=u.getRow();}if(L>-1){e.iMaxIndex=L;}}else if(A==="COLS"){for(n=e.iMaxIndex;n>=e.iMinIndex;n--){T=i.getCellWithColSpan(C.getRow(),n,true);if(T&&T.getLevel()===C.getLevel()&&T.getParentMemberId()===C.getParentMemberId()){if(L<0){L=n;}else{u=T;}}}if(u){e.iMinIndex=u.getCol();}if(L>-1){e.iMaxIndex=L;}}}return e;};this.filterResultCellsFromDropIndexLimits=function(e,C,A){var T;var r=c.getRowHeaderArea();var i=c.getColumnHeaderArea();var R;var n;if(A==="ROWS"){R=e.iMinIndex;T=r.getCellWithRowSpan(R,C.getCol());if(!T){T=r.getCellWithColSpan(R,C.getCol());}while(T&&T.isResult()&&R<e.iMaxIndex){e.iMinIndex=T.getRow()+T.getRowSpan();R++;T=r.getCellWithColSpan(R,C.getCol());}R=e.iMaxIndex;T=r.getCellWithRowSpan(R,C.getCol());if(!T){T=r.getCellWithColSpan(R,C.getCol());}while(T&&T.isResult()&&R>e.iMinIndex){e.iMaxIndex=T.getRow()-1;R--;T=r.getCellWithColSpan(R,C.getCol());}}else if(A==="COLS"){n=e.iMinIndex;T=i.getCellWithColSpan(C.getRow(),n);if(!T){T=i.getCellWithRowSpan(R,C.getCol());}while(T&&T.isResult()&&n<e.iMaxIndex){e.iMinIndex=T.getCol()+T.getColSpan();n++;T=i.getCellWithRowSpan(C.getRow(),n);}n=e.iMaxIndex;T=i.getCellWithColSpan(C.getRow(),n);if(!T){T=i.getCellWithRowSpan(R,C.getCol());}while(T&&T.isResult()&&R>e.iMinIndex){e.iMaxIndex=T.getCol()-1;n--;T=i.getCellWithRowSpan(C.getRow(),n);}}return e;};this.determineDropIndexLimitsFromPeerCell=function(P,A){var i=0;var B;var e;var n;var C;var r={};r.iMinIndex=-1;r.iMaxIndex=-1;if(I&&P.getMergeKey()&&P.getMergeKey().length>0){if(A==="COLS"){n=c.getColHeaderArea();B=n.getRenderStartCol();e=B+n.getRenderColCnt();for(i=B;(i<e)&&(r.iMaxIndex===-1);i++){C=n.getCell(P.getRow(),i);if(C.getMergeKey()===P.getMergeKey()&&r.iMinIndex===-1){r.iMinIndex=i;}if(C.getMergeKey()!==P.getMergeKey()&&r.iMinIndex>-1){r.iMaxIndex=i-1;}}}else{n=c.getRowHeaderArea();B=n.getRenderStartRow();e=B+n.getRenderRowCnt();for(i=B;(i<e)&&(r.iMaxIndex===-1);i++){C=n.getCell(i,P.getCol());if(C.getMergeKey()===P.getMergeKey()&&r.iMinIndex===-1){r.iMinIndex=i;}if(C.getMergeKey()!==P.getMergeKey()&&r.iMinIndex>-1){r.iMaxIndex=i-1;}}}if(r.iMaxIndex===-1){r.iMaxIndex=e;}}else{if(A==="COLS"){r.iMinIndex=P.getCol();r.iMaxIndex=P.getCol()+P.getColSpan()-1;}else{r.iMinIndex=P.getRow();r.iMaxIndex=P.getRow()+P.getRowSpan()-1;}}return r;};this.findDropIndexLimits=function(C,e){var i={};var n;var P;n=c.getHeaderInfo().findStartIndexOfPreviousDimension(e.sDimensionName,e.sAxisName);if(e.sAxisName==="ROWS"){if(!c.getHeaderInfo().isFirstDimensionOnAxis(e)){P=c.getRowHeaderArea().getCellWithRowSpan(C.getRow(),n);i=this.determineDropIndexLimitsFromPeerCell(P,e.sAxisName);}else{i.iMinIndex=c.getRowHeaderArea().getRenderStartRow();i.iMaxIndex=i.iMinIndex+c.getRowHeaderArea().getRenderRowCnt()-1;}}else if(e.sAxisName==="COLS"){if(!c.getHeaderInfo().isFirstDimensionOnAxis(e)){P=c.getColumnHeaderArea().getCellWithColSpan(n,C.getCol());i=this.determineDropIndexLimitsFromPeerCell(P,e.sAxisName);}else{i.iMinIndex=c.getColumnHeaderArea().getRenderStartCol();i.iMaxIndex=i.iMinIndex+c.getColumnHeaderArea().getRenderColCnt()-1;}}i=this.filterResultCellsFromDropIndexLimits(i,C,e.sAxisName);if(C.getLevel()>-1){i=this.restrictDropIndexLimitsForHierarchyMember(C,i,e.sAxisName);}return i;};this.findPreviousPeerCell=function(C,A,i){var r=c.getRowHeaderArea();var e=c.getColumnHeaderArea();var T;var R;var n;var P=null;if(C.getAlignment()==="TOP"||C.getAlignment==="DEFAULT"){if(A==="ROWS"){for(R=C.getRow();R>=i.iMinIndex&&!P;R--){T=r.getCellWithRowSpan(R,C.getCol(),true);if(T&&T.getId()!==C.getId()&&T.getLevel()===C.getLevel()){P=T;}}}else if(A==="COLS"){for(n=C.getCol();n>=i.iMinIndex&&!P;n--){T=e.getCellWithColSpan(C.getRow(),n,true);if(T&&T.getId()!==C.getId()&&T.getLevel()===C.getLevel()){P=T;}}}}else{if(A==="ROWS"){for(R=C.getRow();R<=i.iMaxIndex&&!P;R++){T=r.getCellWithRowSpan(R,C.getCol(),true);if(T&&T.getId()!==C.getId()&&T.getLevel()===C.getLevel()){P=T;}}}else if(A==="COLS"){for(n=C.getCol();n<=i.iMaxIndex&&!P;n++){T=e.getCellWithColSpan(C.getRow(),n,true);if(T&&T.getId()!==C.getId()&&T.getLevel()===C.getLevel()){P=T;}}}}if(P){if(P.getParentMemberId()!==C.getParentMemberId()){P=null;}}return P;};function g(){var C;var e;var H;var i;var J;var P;var n;var r;var s;H=c.getHeaderInfo();e=a.getCellFromJqCell(this);C=D.getEffectiveCell(e);if(C){D.setCurrentJqDragCell(q(document.getElementById(C.getId())));if(I){i=D.getAllMemberCellsInRowOrCol(C);}else{i=H.getMemberCellsForSameDimension(C);}D.saveRevertCellPosInfo(e,i);J=t.createMemberCellDragObject(C,i);D.setCursorAt(e,J);n=H.getDimensionInfoForMemberCell(C);P=sap.zen.Dispatcher.instance.createDragDropPayload(c.getId());P.oDragDropInfo=D.buildDimensionDragDropInfo(n);s=t.findDropIndexLimits(C,n);P.oDragDropInfo.oDropIndexLimits=s;if(C.getLevel()>-1){P.oDragDropInfo.bIsHierarchyMember=true;}P.oDragDropInfo.bIsMemberDrag=true;r=c.getUtils().translateCellCoordinatesForBackend(C);if(r){P.oDragDropInfo.iMemberRow=r.row;P.oDragDropInfo.iMemberCol=r.col;}sap.zen.Dispatcher.instance.setDragDropPayload(P);}return J;}this.checkBasicMemberDropAccept=function(P,s){if(!P){return false;}if(P.oDragDropInfo.sAxisName!==s){return false;}if(D.isDragFromOtherCrosstab(P)){return false;}if(D.isInterComponentDrag(P)){return false;}if(!P.oDragDropInfo.bIsMemberDrag){return false;}return true;};this.returnFromMemberCellAcceptCheck=function(C,A){C.setRevertDrop(!A);sap.zen.Dispatcher.instance.setDropAccepted(C.getId(),A);return A;};this.checkDropLimitsAgainstCells=function(e,i,n,A){var r;var s;if(n.iMinIndex===-1&&n.iMaxIndex===-1){return true;}if(n.iMinIndex===n.iMaxIndex){return false;}r=true;if(A==="ROWS"){if(e.getRow()===i.getRow()){r=false;}else{if(e.getCol()>0){s=i.getRow()+i.getRowSpan()-1;r=n.iMinIndex<=s&&n.iMaxIndex>=s;}}}else if(A==="COLS"){if(e.getCol()===i.getCol()){r=false;}else{if(e.getRow()>0){s=i.getCol()+i.getColSpan()-1;r=n.iMinIndex<=s&&n.iMaxIndex>=s;}}}else{r=false;}return r;};this.checkMatchingHierarchyLevels=function(e,i){if(i.getLevel()>-1&&e.getLevel()>-1){return(i.getLevel()===e.getLevel()&&i.getParentMemberId()===e.getParentMemberId());}return true;};function h(e){var i;var n;var P;var r;var A;var s;var u;if(!c.isDragAction()||c.isBlocked()){return false;}P=sap.zen.Dispatcher.instance.getDragDropPayload();s=P.oDragDropInfo;i=a.getCellFromJqCell(q(this));i=D.getEffectiveCell(i);u=c.getHeaderInfo().getDimensionInfoForMemberCell(i);if(!t.checkBasicMemberDropAccept(P,u.sAxisName)){return t.returnFromMemberCellAcceptCheck(i,false);}r=P.oDragDropInfo.oDropIndexLimits;n=a.getCellFromJqCell(e);n=D.getEffectiveCell(n);A=t.checkDropLimitsAgainstCells(n,i,r,s.sAxisName);if(!A){return t.returnFromMemberCellAcceptCheck(i,false);}A=t.checkMatchingHierarchyLevels(n,i);if(!A){return t.returnFromMemberCellAcceptCheck(i,false);}return t.returnFromMemberCellAcceptCheck(i,true);}this.returnFromMemberAreaAcceptCheck=function(J,A){J.data("xtabrevertdrop",!A);sap.zen.Dispatcher.instance.setDropAccepted(J.attr("id"),A);return A;};this.checkDropAreaDropLimits=function(e,i,n,A,r){var s;var u;if(n.iMinIndex!==n.iMaxIndex&&!r){if(i.isResult()){if(A==="ROWS"){if(i.getRow()+i.getRowSpan()-1===n.iMaxIndex){return false;}}else if(A==="COLS"){if(i.getCol()+i.getColSpan()-1===n.iMaxIndex){return false;}}}s={"iMinIndex":Math.max(0,n.iMinIndex-1),"iMaxIndex":n.iMaxIndex};}else{s=n;}u=this.checkDropLimitsAgainstCells(e,i,s,A);return u;};this.getDropCellFromAnchorCell=function(A,e,s,i){var n=null;if(s==="ROWS"){n=c.getRowHeaderArea().getCellWithColSpan(A.getRow(),e.getCol(),true);if(!n){n=c.getRowHeaderArea().getCellWithRowSpan(A.getRow(),e.getCol(),true);}if(n&&!i){if((A.getRow()+A.getRowSpan())!==(n.getRow()+n.getRowSpan())){n=null;}}}else if(s==="COLS"){n=c.getColumnHeaderArea().getCellWithRowSpan(e.getRow(),A.getCol(),true);if(!n){n=c.getColumnHeaderArea().getCellWithColSpan(e.getRow(),A.getCol(),true);}if(n&&!i){if((A.getCol()+A.getColSpan())!==(n.getCol()+n.getColSpan())){n=null;}}}return n;};this.checkAreaMoveOnPreviousCell=function(e,i,A,s,n){if(s==="ROWS"){if(i.getRow()===e.getRow()||(A.getRow()+A.getRowSpan())===e.getRow()){if(!n){return false;}}}else if(s==="COLS"){if(i.getCol()===e.getCol()||(A.getCol()+A.getColSpan())===e.getCol()){if(!n){return false;}}}return true;};this.isDropCellOneBelowOrBeforeBlock=function(e,i,A){var n;if(A==="ROWS"){n=e.getRow()+e.getRowSpan()-1;}else if(A==="COLS"){n=e.getCol()+e.getColSpan()-1;}return(Math.max(0,n)===Math.max(0,(i.iMinIndex-1)));};this.getNextCell=function(C,A){var F;if(A==="ROWS"){F=c.getRowHeaderArea().getCellWithRowSpan(C.getRow()+C.getRowSpan(),C.getCol());}else if(A==="COLS"){F=c.getColumnHeaderArea().getCellWithColSpan(C.getRow(),C.getCol()+C.getColSpan());}return F;};this.checkAreaMoveOnPreviousHierarchyPeerOrBeginOfFollowing=function(e,i,n,A,r){var P;var F;var C=i;if(e.getLevel()>-1&&i.getLevel()>-1){P=this.findPreviousPeerCell(e,A,n);if(P){if(i.getId()===P.getId()){return false;}if((A==="ROWS"&&(i.getRow()+i.getRowSpan()-1)===(P.getRow()-1))||(A==="COLS"&&(i.getCol()+i.getColSpan()-1)===(P.getCol()-1))){if(e.getLevel()!==i.getLevel()&&r){return false;}}else{if(!this.isDropCellOneBelowOrBeforeBlock(i,n,A)){if(!this.checkMatchingHierarchyLevels(e,i)){return false;}}}}else{if(!this.isDropCellOneBelowOrBeforeBlock(i,n,A)){if(!r&&i.getLevel()!==e.getLevel()){F=this.getNextCell(i,A);if(F){P=this.findPreviousPeerCell(F,A,n);if(P&&P.getId()===e.getId()){return false;}C=F;}}if(!this.checkMatchingHierarchyLevels(e,C)){return false;}}}}return true;};function j(e){var P;var J;var i;var n;var A;var s;var r;var u;var w;var x;var y;var z;if(!c.isDragAction()||c.isBlocked()){return false;}P=sap.zen.Dispatcher.instance.getDragDropPayload();J=q(this);A=D.getDropAreaTypeFromDropAreaId(J.attr("id"));s=(A==="droparea_above"||A==="droparea_below")?"ROWS":"COLS";w=(A==="droparea_above"||A==="droparea_before");if(!t.checkBasicMemberDropAccept(P,s)){return t.returnFromMemberAreaAcceptCheck(J,false);}n=D.getCrosstabHeaderCellFromDraggable(e);n=D.getEffectiveCell(n);r=n.getArea().isRowHeaderArea()?"ROWS":"COLS";if(r!==s){return t.returnFromMemberAreaAcceptCheck(J,false);}z=sap.ui.getCore().getControl(J.data("xtabcellid"));i=t.getDropCellFromAnchorCell(z,n,r,w);i=D.getEffectiveCell(i);if(!i||(i&&(i.getId()===n.getId()))){return t.returnFromMemberAreaAcceptCheck(J,false);}y=P.oDragDropInfo;x=y.oDropIndexLimits;u=t.checkDropAreaDropLimits(n,i,x,r,w);if(!u){return t.returnFromMemberAreaAcceptCheck(J,false);}u=t.checkAreaMoveOnPreviousCell(n,i,z,r,w);if(!u){return t.returnFromMemberAreaAcceptCheck(J,false);}u=t.checkAreaMoveOnPreviousHierarchyPeerOrBeginOfFollowing(n,i,x,r,w);if(!u){return t.returnFromMemberAreaAcceptCheck(J,false);}return t.returnFromMemberAreaAcceptCheck(J,true);}this.getCommonDropCommand=function(C,s){var e;var n;e=sap.zen.Dispatcher.instance.getDragDropPayload().oDragDropInfo;if(e.sAxisName==="ROWS"){n=C.row;}else if(e.sAxisName==="COLS"){n=C.col;}s=s.replace("__AXIS__",e.sAxisName);s=s.replace("__ROW__",e.iMemberRow);s=s.replace("__COL__",e.iMemberCol);s=s.replace("__NEW_INDEX__",n);return s;};function k(e,u){var i;var C;var s;if(D.checkDropAllowedOnCrosstabElement(e)){i=a.getCellFromJqCell(q(this));i=D.getEffectiveCell(i);C=c.getUtils().translateCellCoordinatesForBackend(i);s=t.getCommonDropCommand(C,d.swapmemberscommand);c.getUtils().executeCommandAction(s);D.resetDragDrop();}else if(!D.checkMouseInRenderSizeDiv(e)){sap.zen.Dispatcher.instance.onUnhandledDrop(e,u);}}function l(e,u){var A;var i;var n;var C;var s;var r;var w;var x;var y;var B=false;if(D.checkDropAllowedOnCrosstabElement(e)){r=sap.zen.Dispatcher.instance.getDragDropPayload().oDragDropInfo;w=r.oDropIndexLimits;x=r.sAxisName;A=sap.ui.getCore().getControl(q(this).data("xtabcellid"));i=D.getCrosstabHeaderCellFromDraggable(q(u.draggable));i=D.getEffectiveCell(i);s=D.getDropAreaTypeFromDropAreaId(q(this).attr("id"));if(s==="droparea_above"||s==="droparea_before"){B=true;}n=t.getDropCellFromAnchorCell(A,i,x,B);n=D.getEffectiveCell(n);if(t.isDropCellOneBelowOrBeforeBlock(n,w,x)){B=true;if(x==="ROWS"){n=c.getRowHeaderArea().getCellWithRowSpan(w.iMinIndex,n.getCol());}else if(x==="COLS"){n=c.getColumnHeaderArea().getCellWithColSpan(n.getRow(),w.iMinIndex);}}if(i.getLevel()!==n.getLevel()){n=t.getNextCell(n,x);B=true;}C=c.getUtils().translateCellCoordinatesForBackend(n);y=t.getCommonDropCommand(C,d.insertmembercommand);y=y.replace("__INSERT_BEFORE__",B);c.getUtils().executeCommandAction(y);D.resetDragDrop();}else if(!D.checkMouseInRenderSizeDiv(e)){sap.zen.Dispatcher.instance.onUnhandledDrop(e,u);}}this.getLeftOfBeginCellInRowHeader=function(r,C){var s;var R;var i;var T=C;var e;s=C.getCol();i=s;R=C.getRow();if(R<r.getRenderStartRow()+r.getRenderRowCnt()-1){R++;}while(T&&i>=0){T=r.getCellWithColSpan(R,i);if(T){C=T;i=T.getCol()-1;}}e=D.getBoundingClientRect(document.getElementById(C.getId()));return e.begin;};this.getTopOfBeginCellInColHeader=function(C,e){var s;var r;var i;var T=e;var R;s=e.getRow();r=s;i=e.getCol();if(i<C.getRenderStartCol()+C.getRenderColCnt()-1){i++;}while(T&&r>=0){T=C.getCellWithRowSpan(r,i);if(T){e=T;r=T.getRow()-1;}}R=D.getBoundingClientRect(document.getElementById(e.getId()));return R.top;};this.isRowContainsResultCell=function(r,R){var i=0;var C=null;for(i=0;i<r.getColCnt();i++){C=r.getCellWithColSpan(R,i);if(C&&C.isResult()){return true;}}return false;};this.isColContainsResultCell=function(C,e){var i=0;var n=null;for(i=0;i<C.getRowCnt();i++){n=C.getCellWithRowSpan(i,e);if(n&&n.isResult()){return true;}}return false;};this.enableRowHeaderCellsAndAreas=function(){var C=0;var r=0;var s=0;var e=0;var R;var i;var n;var J;var u;var F;var O=false;var w=null;var x=false;var y=false;R=c.getRowHeaderArea();if(!c.hasRowHeaderArea()||(R&&R.getRenderRowCnt()<2)){O=true;}if(p){F=p.getTableCol()+p.getColSpan()-1;if(!p.isSplitPivotCell()&&p.sScalingAxis==="ROWS"){F--;}}else{F=0;}s=R.getRenderStartRow();e=s+R.getRenderRowCnt()-1;for(r=s;r<=e;r++){if(I){x=this.isRowContainsResultCell(R,r);}for(C=0;C<=F;C++){i=R.getCellWithColSpan(r,C);if(!i&&r===s){i=R.getCellWithRowSpan(r,C);}if(i){if(O){w=c.getHeaderInfo().getDimensionInfoByCol(i.getTableCol());if(!w){return;}}u=q(document.getElementById(i.getId()));n=D.getBoundingClientRect(u[0]);if(C===F&&!O){if(r===s&&n.top>=v.top){m.iEnd=0;J=o.createAboveDropArea(i,m);D.makeDropAreaDroppable(J,"sapzencrosstab-rowAboveCellMemberDropArea",j,l);}if(n.bottom<=v.bottom){M.iEnd=0;M.iBegin=this.getLeftOfBeginCellInRowHeader(R,i);J=o.createBelowDropArea(i,M);D.makeDropAreaDroppable(J,"sapzencrosstab-rowBelowCellMemberDropArea",j,l);}}if(I){y=x;}else{y=i.isResult();}if(!y&&n.top<v.bottom){D.makeCellDraggable(u,g);if(!O){D.makeCellDroppable(u,h,k);}}}}}};this.enableColHeaderCellsAndAreas=function(){var C=0;var r=0;var s=0;var e;var i;var R;var J;var E=0;var n;var F;var O=false;var u=null;var w=false;var x=false;var y={};e=c.getColumnHeaderArea();if(!c.hasColHeaderArea()||(e&&e.getRenderColCnt()<2)){O=true;}if(p){F=p.getTableRow()+p.getRowSpan()-1;if(!p.isSplitPivotCell()&&p.sScalingAxis==="COLS"){F--;}}else{F=0;}s=e.getRenderStartCol();E=s+e.getRenderColCnt()-1;for(r=0;r<=F;r++){for(C=s;C<=E;C++){if(I){if(typeof y[C]!="undefined"){w=y[C];}else{w=this.isColContainsResultCell(e,C);y[C]=w;}}i=e.getCellWithRowSpan(r,C);if(!i&&C===s){i=e.getCellWithColSpan(r,C);}if(i){if(O){u=c.getHeaderInfo().getDimensionInfoByRow(i.getTableRow());if(!u){return;}}n=q(document.getElementById(i.getId()));R=D.getBoundingClientRect(n[0]);if(r===F&&!O){if(C===s&&R.begin>=V.begin){b.iBottom=0;J=o.createBeforeDropArea(i,b);D.makeDropAreaDroppable(J,"sapzencrosstab-columnBeforeCellMemberDropArea",j,l);}if(R.end<=V.end){f.iBottom=0;f.iTop=this.getTopOfBeginCellInColHeader(e,i);J=o.createAfterDropArea(i,f);D.makeDropAreaDroppable(J,"sapzencrosstab-columnAfterCellMemberDropArea",j,l);}}if(I){x=w;}else{x=i.isResult();}if(!x&&R.begin<V.end){D.makeCellDraggable(n,g);if(!O){D.makeCellDroppable(n,h,k);}}}}}};this.enableMemberDragDrop=function(){this.enableRowHeaderCellsAndAreas();this.enableColHeaderCellsAndAreas();};this.removeMember=function(e,u,i){if(i.bIsMemberDrag&&i.iMemberRow>-1&&i.iMemberCol>-1&&!i.bIsHierarchyMember){var C=d.removemembercommand.replace("__AXIS__",i.sAxisName);C=C.replace("__ROW__",i.iMemberRow);C=C.replace("__COL__",i.iMemberCol);c.getUtils().executeCommandAction(C);}else{sap.zen.Dispatcher.instance.setDragDropCanceled(true);}};};
return sap.zen.crosstab.dragdrop.MemberDragDropHandler;});
sap.ui.predefine('sap/zen/crosstab/keyboard/CrosstabKeyboardNavHandler',["jquery.sap.global","sap/zen/crosstab/rendering/RenderingConstants"],function(q,R){"use strict";q.sap.declare("sap.zen.crosstab.keyboard.CrosstabKeyboardNavHandler");
sap.zen.crosstab.keyboard.CrosstabKeyboardNavHandler=function(c,E){var f=-1;var F=-1;var o=-1;var O=-1;var n=0;var N=0;var t=this;var b=false;var d=c.getDataArea();this.reset=function(){this.disableCell(f,F);this.disableCell(o,O);f=-1;F=-1;o=-1;O=-1;n=0;N=0;};this.setEnabled=function(p){b=p;};this.attachEvents=function(j){if(!b){return;}j.off("keydown",this.keyboardNavKeyHandler);j.on("keydown",this.keyboardNavKeyHandler);j.attr("tabindex",R.TABINDEX);};this.getFocusScrollDiv=function(C){var D=null;if(C.getArea().isDataArea()||C.getArea().isColHeaderArea()){D=document.getElementById(c.getId()+"_lowerRight_scrollDiv");}else if(C.getArea().isRowHeaderArea()){D=document.getElementById(c.getId()+"_lowerLeft_scrollDiv");}return D;};this.movePixelCellIntoFocus=function(C,D,s,u,l,e){var h=false;var g=c.getUtils().getRtlAwareBoundingClientRect(D);var S=s.width;var i=g.width;var j=s.height;var k=g.height;if(i<S){if(g.end>s.end){var m=c.getHScrollbar().getScrollPosition();c.scrollHorizontal(m+g.end-s.end);h=true;}else if(g.begin<s.begin){m=c.getHScrollbar().getScrollPosition();c.scrollHorizontal(m-(s.begin-g.begin));h=true;}}if(u||l||e){if(k<j){if(g.bottom>s.bottom){m=c.getVScrollbar().getScrollPosition();c.scrollVertical(m+g.bottom-s.bottom);h=true;}else if(g.top<s.top){m=c.getVScrollbar().getScrollPosition();c.scrollVertical(m-(s.top-g.top));h=true;}}else{m=c.getVScrollbar().getScrollPosition();c.scrollVertical(m-(s.top-g.top));h=true;}}return h;};this.moveRowHeaderAreaCellHorizontally=function(C,D){var s=c.getUtils().getRtlAwareBoundingClientRect(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));var e=c.getUtils().getRtlAwareBoundingClientRect(D);var S=s.width;var i=e.width;var h=c.getHorizontalHeaderScrollbar();if(i<S){if(e.end>s.end){var g=h.getScrollPosition();c.scrollHeaderHorizontal(g+e.end-s.end);}else if(e.begin<s.begin){g=h.getScrollPosition();c.scrollHeaderHorizontal(g-(s.begin-e.begin));}}};this.moveRowColCellIntoFocus=function(C,D,s,u,l,e){var h=false;var g=c.getUtils().getRtlAwareBoundingClientRect(D);var S=s.width;var i=g.width;var r=c.getDataArea().getRenderStartCol();var j=c.getDataArea().getRenderStartRow();var m=c.getDataArea().getRowCnt()-1;if(C.getArea().isDataArea()||C.getArea().isColHeaderArea()){var H=c.getHScrollbar();if(H){if(i<S){if(g.end>s.end){c.scrollHorizontal(r+1);h=true;}else if(g.begin<s.begin){c.scrollHorizontal(r-1);h=true;}}}}if(c.isHeaderHScrolling()===true&&C.getArea().isRowHeaderArea()){this.moveRowHeaderAreaCellHorizontally(C,D);}if(j===C.getTableRow()-c.getTableFixedColHeaderRowCnt()){return h;}if(C.getArea().isDataArea()||(C.getArea().isRowHeaderArea()&&u)||l||e){var v=c.getVScrollbar();if(v){var k=c.getDataArea().getRenderRowCnt();var p=v.getScrollPosition();var w=C.getTableRow()-c.getTableFixedColHeaderRowCnt();if(w<j){c.scrollVertical(w);h=true;}else if(w+C.getRowSpan()>(j+k)){var x=j+k-C.getRow();var y=C.getRowSpan()-x;var z=Math.max(0,Math.min(p+y+1,m));if(y!==0){c.scrollVertical(z);h=true;}j=c.getDataArea().getRenderStartRow();if(j>w){c.scrollVertical(w);h=true;}}j=c.getDataArea().getRenderStartRow();if(j===C.getTableRow()-c.getTableFixedColHeaderRowCnt()){return h;}if(h){D=document.getElementById(C.getId());g=c.getUtils().getRtlAwareBoundingClientRect(D);p=v.getScrollPosition();}if(g.bottom>s.bottom){while(g.bottom>s.bottom&&p<m){c.scrollVertical(Math.min(p+1,m));p=v.getScrollPosition();D=document.getElementById(C.getId());g=c.getUtils().getRtlAwareBoundingClientRect(D);h=true;}}else if(g.top<s.top){c.scrollVertical(Math.max(0,p-1));h=true;}}}return h;};this.getCellIntoDom=function(C,e,g){var i=0;if(N===0){var h=c.getHScrollbar();if(h&&!g){if(n>0){i=h.getScrollPosition()+e.getColSpan();}else if(n<0){i=C.getTableCol()-c.getTableFixedRowHeaderColCnt();}c.scrollHorizontal(i);}}else if(n==0){var v=c.getVScrollbar();if(v){if(N>0){i=v.getScrollPosition()+e.getRowSpan();}else{if(N<0){i=C.getTableRow()-c.getTableFixedColHeaderRowCnt();}}c.scrollVertical(i);}}};this.getRowLookAheadCell=function(C){var l=null;var T=null;var m=0;var M=0;if(C.getRowSpan()>1){if(n>0){M=C.getTableCol();m=c.getRenderStartCol()+c.getRenderColCnt()+c.getTableFixedRowHeaderColCnt();for(var i=M;i<=m;i++){T=c.getTableCellWithSpans(f,i);if(T.getRowSpan()===1){l=T;break;}else{if(l){if(T.getRowSpan()<l.getRowSpan()){l=T;}}else{l=T;}}}}}else{l=C;}return l;};this.scrollCellIntoFocus=function(C,u,e,g){var l=C;var L=false;if(!u&&C.getArea().isRowHeaderArea()&&e===true&&c.getVScrollbar()&&!c.isHeaderHScrolling()){if(n>0&&N===0){l=this.getRowLookAheadCell(C);}}if(l!==C){C=l;L=true;}var D=this.getFocusScrollDiv(C);if(!D){return false;}var h=false;var i=c.getPropertyBag().isPixelScrolling();var j=document.getElementById(C.getId());if(!j&&!i){this.getCellIntoDom(C,g,e);}if(!j){return false;}var s=c.getUtils().getRtlAwareBoundingClientRect(D);if(i){h=this.movePixelCellIntoFocus(C,j,s,u,L,e);}else{h=this.moveRowColCellIntoFocus(C,j,s,u,L,e);}return h;};this.keyboardNavKeyHandler=function(e){if(f>-1&&F>-1){n=0;N=0;if(e.which===9){n=1;}else if(e.which===38){N=-1;}else if(e.which===40){N=1;}else if(e.which===37){n=-1;}else if(e.which===39){n=1;}if(n===0&&N===0){return true;}else{if(!c.hasLoadingPages()){t.moveCellFocus();}sap.zen.crosstab.utils.Utils.cancelEvent(e);return false;}}return true;};this.restoreFocusOnCell=function(){if(!b){return;}if(f>-1&&F>-1&&!c.hasLoadingPages()){var r=c.getTableCellWithSpans(f,F);if(r&&!r.isLoading()){this.disableCell(o,O);this.navigateToCellAction(r,-1,-1);}}};function a(j,D){var x=D.scrollLeft;var y=D.scrollTop;j.focus();if(D.scrollLeft!==x){D.scrollLeft=x;}if(D.scrollTop!==y){D.scrollTop=y;}}this.navigateToCellAction=function(C,s,S){var j=null;var J=null;var D=null;var e=null;j=q(document.getElementById(C.getId()));j.addClass("sapzencrosstab-CellFocus");J=q(document.getElementById(C.getId()+"_contentDiv"));e=j.find("#"+q.sap.encodeCSS(C.getId()+"_textContentDiv"));if(!C.isEntryEnabled()){D=this.getFocusScrollDiv(C);if(e.length>0){J=e;}if(q.browser.mozilla){a(J,D);}var g=J[0];if(g&&s===-1&&S===-1){sap.zen.crosstab.utils.Utils.selectTextInElement(g);}a(J,D);}else{E.provideInputEnabledCell(C,C.getId(),J,s,S);}};this.navigateFromCellAction=function(C){var j=q(document.getElementById(C.getId()));if(j.length>0){j.removeClass("sapzencrosstab-CellFocus");}var i=j.find("input");i.focusout();};this.focusNewCell=function(C,s,S){if(!b){return false;}if(!C){return false;}var h=false;if(f>-1&&F>-1){this.disableCell(f,F);}f=C.getTableRow();F=C.getTableCol();o=f;O=F;var v=c.getVScrollbar();var H=c.getHScrollbar();if(v||H){if(v){h=this.scrollCellIntoFocus(C,true,false,null);}}this.navigateToCellAction(C,s,S);return h;};this.scrollToCell=function(C){var D=C.getTableRow()-c.getTableFixedColHeaderRowCnt();var i=C.getTableCol()-c.getTableFixedRowHeaderColCnt();var v=D<c.getRenderStartRow()||D>(c.getRenderStartRow()+c.getRenderRowCnt());var h=false;if(C.getArea().isDataArea()||C.getArea().isColHeaderArea()){h=i<c.getRenderStartCol()||i>(c.getRenderStartCol()+c.getRenderColCnt());}if(c.getVScrollbar()&&v){c.scrollVertical(C.getTableRow()-c.getTableFixedColHeaderRowCnt());}if(c.getHScrollbar()&&C.getArea().isDataArea()&&h){c.scrollHorizontal(C.getTableCol()-c.getTableFixedRowHeaderColCnt());}};this.disableCell=function(T,i){var C=null;if(T>-1&&T>-1){C=c.getTableCellWithSpans(T,i);if(C&&!C.isLoading()){this.navigateFromCellAction(C);}}};this.moveCellFocus=function(){if(!b){return;}var e=null;var s=-1;var S=-1;var m=c.getTableRowCnt()-1;var M=c.getTableColCnt()-1;var i=c.getTableFixedColHeaderRowCnt();o=f;O=F;var g=false;var u=false;var C=c.getTableCellWithSpans(o,O);if(C&&!c.hasLoadingPages()){if(n!==0||N!==0){this.scrollToCell(C);}}if(N<0){if(C.getTableRow()===i){return;}}else if(N>0){if((C.getTableRow()+C.getRowSpan()-1)===m){return;}}this.disableCell(C.getTableRow(),C.getTableCol());if(f>-1&&F>-1){if(n===0&&N===0){return;}var h=f;var j=F;if(n!==0){if(n>0){j=C.getTableCol()+C.getColSpan()+n-1;if(j>M){if(h<m){h++;j=0;s=0;g=true;}else{j=M;h=m;}}}else{j=C.getTableCol();j--;if(j>=0){var p=c.getTableCellWithSpans(h,j);if(!p){return;}if(p.isLoading()){return;}j=p.getTableCol();}else{if(h>i){h--;j=M;s=M;if(h<d.getRenderStartRow()+i){S=h-i;}g=true;}else{j=0;h=i;}}}e=c.getTableCellWithSpans(h,j);if(e.isLoading()){return;}if(C){if(C.getArea()!==e.getArea()&&s===-1){s=0;}}}else if(N!==0){if(N>0){h=Math.min(C.getTableRow()+C.getRowSpan()+N-1,m);}else if(N<0){h=Math.max(C.getTableRow()+N,i);}e=c.getTableCellWithSpans(h,j);if(e.isLoading()){return;}h=e.getTableRow();u=true;}f=h;F=j;}if(e){if(S>=0){c.scrollVertical(S);}if(s>=0){c.scrollHorizontal(s);}this.scrollCellIntoFocus(e,u,g,C);this.navigateToCellAction(e,-1,-1);}};};
return sap.zen.crosstab.keyboard.CrosstabKeyboardNavHandler;});
sap.ui.predefine('sap/zen/crosstab/library',["sap/ui/core/Core","sap/ui/core/library","sap/m/library","sap/ui/commons/library"],function(){sap.ui.getCore().initLibrary({name:"sap.zen.crosstab",dependencies:["sap.ui.core","sap.m","sap.ui.commons"],types:[],interfaces:[],controls:["sap.zen.crosstab.Crosstab","sap.zen.crosstab.DataCell","sap.zen.crosstab.HeaderCell"],elements:[],version:"1.96.0"});var t=sap.zen.crosstab;return t;});
sap.ui.predefine('sap/zen/crosstab/paging/CellMerger',["jquery.sap.global","sap/zen/crosstab/paging/PagingConstants"],function(q,P){"use strict";q.sap.declare("sap.zen.crosstab.paging.CellMerger");
sap.zen.crosstab.paging.CellMerger=function(p){var r=null;var c=null;this.mergeRowHeaderCells=function(l){r=p.getCrosstab().getRowHeaderArea();var C=0;var M=null;for(C=0;C<r.getColCnt();C++){M=d(l,C);if(M){b(M,l,C);}M=a(l,C);if(M){m(M,l,C);}}};function m(M,l,C){var n=l-1;var o=null;var u=null;var R=null;var s=0;var t=M.getRowSpan();var S=p.getHeaderTileInfo(r,n).iStatus;while(S===P.PAGE_STATUS_LOADED&&n>=0&&!u){R=g(n);for(s=R.iMaxRowIndex;s>=R.iMinRowIndex&&!u;s--){o=r.getCellDirect(s,C);if(o){if(o.getMergeKey()){if(M.getMergeKey()===o.getMergeKey()){if(s===R.iMaxRowIndex||o.getRowSpan()>1){u=o;}else{return;}}else{return;}}}}n--;S=p.getHeaderTileInfo(r,n).iStatus;}if(u){k(M,u);u.setRowSpan(t+u.getRowSpan());r.insertCell(null,M.getRow(),M.getCol());}}function g(l){var R={};R.iMinRowIndex=l*p.getTileRowCnt();R.iMaxRowIndex=(l+1)*p.getTileRowCnt()-1;R.iMaxRowIndex=Math.min(R.iMaxRowIndex,r.getRowCnt()-1);return R;}function a(l,C){var t=null;var I=g(l);var R=0;var o=null;var M="";for(R=I.iMinRowIndex;R<=I.iMaxRowIndex&&!t;R++){o=r.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){t=o;}}}return t;}function b(M,l,C){var o=null;var F=0;var s="";var I=null;var S=p.getHeaderTileInfo(r,l+1).iStatus;if(S===P.PAGE_STATUS_LOADED){I=g(l+1);o=r.getCellDirect(I.iMinRowIndex,C);if(o){s=o.getMergeKey();if(s&&s===M.getMergeKey()){F=o.getRowSpan();r.insertCell(null,I.iMinRowIndex,C);k(o,M);}}}if(F){M.setRowSpan(M.getRowSpan()+F);}}function d(l,C){var B=null;var I=g(l);var R=0;var M="";var o=null;for(R=I.iMaxRowIndex;R>=I.iMinRowIndex&&!B;R--){o=r.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){B=o;}}}return B;}this.mergeColHeaderCells=function(l){c=p.getCrosstab().getColumnHeaderArea();var R=0;var M=null;for(R=0;R<c.getRowCnt();R++){M=h(l,R);if(M){f(M,l,R);}M=i(l,R);if(M){j(M,l,R);}}};function e(l){var C={};C.iMinColIndex=l*p.getTileColCnt();C.iMaxColIndex=(l+1)*p.getTileColCnt()-1;C.iMaxColIndex=Math.min(C.iMaxColIndex,c.getColCnt()-1);return C;}function f(M,l,R){var C=null;var F=0;var s="";var I=null;var S=p.getHeaderTileInfo(c,l+1).iStatus;if(S===P.PAGE_STATUS_LOADED){I=e(l+1);C=c.getCellDirect(R,I.iMinColIndex);if(C){s=C.getMergeKey();if(s&&s===M.getMergeKey()){F=C.getColSpan();c.insertCell(null,R,I.iMinColIndex);k(C,M);}}}if(F){M.setColSpan(M.getColSpan()+F);}}function h(l,R){var o=null;var I=e(l);var C=0;var M="";var n=null;for(C=I.iMaxColIndex;C>=I.iMinColIndex&&!o;C--){n=c.getCellDirect(R,C);if(n){M=n.getMergeKey();if(M){o=n;}}}return o;}function i(l,R){var L=null;var I=e(l);var C=0;var o=null;var M="";for(C=I.iMinColIndex;C<=I.iMaxColIndex&&!L;C++){o=c.getCellDirect(R,C);if(o){M=o.getMergeKey();if(M){L=o;}}}return L;}function j(M,l,R){var C=l-1;var o=null;var L=null;var n=null;var s=0;var t=M.getColSpan();var S=p.getHeaderTileInfo(c,C).iStatus;while(S===P.PAGE_STATUS_LOADED&&C>=0&&!L){n=e(C);for(s=n.iMaxColIndex;s>=n.iMinColIndex&&!L;s--){o=c.getCellDirect(R,s);if(o){if(o.getMergeKey()){if(M.getMergeKey()===o.getMergeKey()){if(s===n.iMaxColIndex||o.getColSpan()>1){L=o;}else{return;}}else{return;}}}}C--;S=p.getHeaderTileInfo(c,C).iStatus;}if(L){k(M,L);L.setColSpan(t+L.getColSpan());c.insertCell(null,M.getRow(),M.getCol());}}function k(s,t){var S=s.getStyleIdList();t.setStyleIdList(S);}};
return sap.zen.crosstab.paging.CellMerger;});
sap.ui.predefine("sap/zen/crosstab/paging/Page",["jquery.sap.global","sap/zen/crosstab/paging/PagingConstants","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/DataCell","sap/zen/crosstab/HeaderCell"],function(q,P,R,D,H){"use strict";q.sap.declare("sap.zen.crosstab.paging.Page");
sap.zen.crosstab.paging.Page=function(p,s,o){var S=P.PAGE_STATUS_UNKNOWN;var a=0;var b=0;var c=o.getTileRowCnt();var d=o.getTileColCnt();var C=o.getCellMerger();var e=o.getDataHandler();var f=o.getCrosstab();var g=f.getDimensionHeaderArea();var h=f.getColumnHeaderArea();var r=f.getRowHeaderArea();var j=f.getDataArea();var k={};var A=[];l();function l(){A.push(g.getAreaType());A.push(h.getAreaType());A.push(r.getAreaType());A.push(j.getAreaType());}this.getPageKey=function(){return s;};this.getRow=function(){};this.getCol=function(){};this.getPosition=function(){return p;};this.getStatus=function(){return S;};this.setStatus=function(N){S=N;};this.getPageDataRowCnt=function(){return a;};this.getPageDataColCnt=function(){return b;};this.receiveData=function(i,N){a=i.sentdatarows;b=i.sentdatacols;c=i.tilerows;d=i.tilecols;e.determineBasicAreaData(i,N);y();var O={};O.iRowOffset=p.iRow*c;O.iColOffset=p.iCol*d;O.bIsFirstPage=N;O.oCrosstabAreasToBeFilled=k;O.oCrosstabData=i;e.jsonToDataModel(O);E();z();};this.removeData=function(){S=P.PAGE_STATUS_UNKNOWN;k={};B(j);t();m();};function m(){var i=0;var N=null;for(i=0;i<A.length;i++){N=k[A[i]];if(N){I(N,false);N.oArea.decreaseLoadingPageCnt();}}}function n(i,T){var N=x(i,T);if(N.iRefCnt===0){N.iStatus=P.PAGE_STATUS_UNKNOWN;o.setHeaderTileInfo(i,T,N);B(i);}}function t(){n(g,0);n(r,p.iRow);n(h,p.iCol);}function u(){w(g,0);w(r,p.iRow);w(h,p.iCol);}function v(i,T,S){var N=o.getHeaderTileInfo(i,T);N.iStatus=S;o.setHeaderTileInfo(i,T,N);}function w(i,T){var N=o.getHeaderTileInfo(i,T);N.iRefCnt++;o.setHeaderTileInfo(i,T,N);}function x(i,T){var N=o.getHeaderTileInfo(i,T);N.iRefCnt--;o.setHeaderTileInfo(i,T,N);return N;}function y(){k={};B(j,0);if(o.getHeaderTileInfo(r,p.iRow).iStatus!==P.PAGE_STATUS_LOADED){B(r,p.iRow);}if(o.getHeaderTileInfo(h,p.iCol).iStatus!==P.PAGE_STATUS_LOADED){B(h,p.iCol);}if(o.getHeaderTileInfo(g,0).iStatus!==P.PAGE_STATUS_LOADED){B(g,0);}}function z(){var i=0;var N=null;for(i=0;i<A.length;i++){N=k[A[i]];if(N){J(N,false);K(N,false);N.oArea.decreaseLoadingPageCnt();}}}function B(i,T){var N=i.getAreaType();var O={};O.oArea=i;O.oAreaRegion=L(i);O.iTileIndex=T;k[N]=O;}this.provideLoadingCells=function(i){S=P.PAGE_STATUS_LOADING;F(i);u();G();};function E(){S=P.PAGE_STATUS_LOADED;var i=null;i=k[h.getAreaType()];if(i){C.mergeColHeaderCells(p.iCol);v(i.oArea,p.iCol,P.PAGE_STATUS_LOADED);}i=k[r.getAreaType()];if(i){C.mergeRowHeaderCells(p.iRow);v(i.oArea,p.iRow,P.PAGE_STATUS_LOADED);}i=k[g.getAreaType()];if(i){v(i.oArea,0,P.PAGE_STATUS_LOADED);}}function F(i){k={};B(j,0);if(i.isDataArea()){if(o.getHeaderTileInfo(r,p.iRow).iStatus===P.PAGE_STATUS_UNKNOWN){B(r,p.iRow);v(r,p.iRow,P.PAGE_STATUS_LOADING);}if(o.getHeaderTileInfo(h,p.iCol).iStatus===P.PAGE_STATUS_UNKNOWN){B(h,p.iCol);v(h,p.iCol,P.PAGE_STATUS_LOADING);}if(o.getHeaderTileInfo(g,0).iStatus===P.PAGE_STATUS_UNKNOWN){B(g,0);v(g,0,P.PAGE_STATUS_LOADING);}}else{if(i.isColHeaderArea()){B(i,p.iCol);v(i,p.iCol,P.PAGE_STATUS_LOADING);}else if(i.isRowHeaderArea()){B(i,p.iRow);v(i,p.iRow,P.PAGE_STATUS_LOADING);}else if(i.isDimensionHeaderArea()){B(i,0);v(i,0,P.PAGE_STATUS_LOADING);}}}function G(){var i=0;var N=null;for(i=0;i<A.length;i++){N=k[A[i]];if(N){I(N,true);J(N,true);K(N,true);N.oArea.increaseLoadingPageCnt();}}}function I(i,N){var O=0;var Q=0;var T=null;var U=i.oAreaRegion;var V=i.oArea;for(O=U.iStartRow;O<=U.iEndRow;O++){for(Q=U.iStartCol;Q<=U.iEndCol;Q++){if(N){T=M(V,O,Q);}V.insertCell(T,O,Q);}}}function J(i,N){var O=i.oAreaRegion;var Q=i.oArea;var T=0;for(T=O.iStartCol;T<=O.iEndCol;T++){Q.changeColWidthTemporaryFlag(T,s,N);}}function K(i,N){var O=i.oAreaRegion;var Q=i.oArea;var T=0;for(T=O.iStartRow;T<=O.iEndRow;T++){Q.changeRowHeightTemporaryFlag(T,s,N);}}function L(i){var N={};if(i.isDimHeaderArea()){N.iStartRow=0;N.iEndRow=i.getRowCnt()-1;N.iStartCol=0;N.iEndCol=i.getColCnt()-1;}else if(i.isRowHeaderArea()){N.iStartRow=p.iRow*c;N.iEndRow=Math.min(N.iStartRow+c-1,i.getRowCnt()-1);N.iStartCol=0;N.iEndCol=i.getColCnt()-1;}else if(i.isColHeaderArea()){N.iStartRow=0;N.iEndRow=i.getRowCnt()-1;N.iStartCol=p.iCol*d;N.iEndCol=Math.min(N.iStartCol+d-1,i.getColCnt()-1);}else if(i.isDataArea()){N.iStartRow=p.iRow*c;N.iEndRow=Math.min(N.iStartRow+c-1,i.getRowCnt()-1);N.iStartCol=p.iCol*d;N.iEndCol=Math.min(N.iStartCol+d-1,i.getColCnt()-1);}return N;}function M(i,N,O){var Q=null;if(i.isDataArea()){Q=new D();Q.addStyle(R.STYLE_DATA_CELL);}else{Q=new H();Q.addStyle(R.STYLE_HEADER_CELL);Q.setRowSpan(1);Q.setColSpan(1);}Q.setArea(i);Q.setRow(N);Q.setCol(O);Q.setLoading(true);Q.addStyle(R.STYLE_LOADING);return Q;}};
return sap.zen.crosstab.paging.Page;});
sap.ui.predefine("sap/zen/crosstab/paging/PageManager",["jquery.sap.global","sap/zen/crosstab/paging/Page","sap/zen/crosstab/paging/PagingConstants","sap/zen/crosstab/paging/RequestHandler","sap/zen/crosstab/paging/CellMerger","sap/zen/crosstab/datahandler/JsonDataHandler"],function(q,P,a,R,C,J){"use strict";q.sap.declare("sap.zen.crosstab.paging.PageManager");
sap.zen.crosstab.paging.PageManager=function(c){var j=new J(c);var o=new C(this);var r=null;var p={};var h={};var b=0;var d=0;var s="";var e=0;var f=0;var H=false;var g=[];var k=false;var n=true;var l={};var A={};var m={};var t={};var u={};var v={};var w={};var x={};function y(){B();if(k||n){k=false;n=false;z();}}function z(){var i=c.getDataArea();var N=i.getRenderRowCnt();var O=i.getRenderColCnt();var Q=Math.round(O/d)+1;var V=Math.round(N/b)+1;var S=Math.max(1,Q*V*2);if(r){r.setMaxQueueRequests(S);}}this.enableTimeout=function(i){if(r){r.enableTimeout(i);}};this.getRequestStackSize=function(){var i=-1;if(r){i=r.getMaxQueueRequests();}return i;};this.resizeEvent=function(){k=true;if(r){r.unlimitStack();}};this.checkResponseConsistency=function(i){if(i.pvcheck||i.removeselection){return true;}if(b>0&&d>0){return(i.tilerows===b&&i.tilecols===d);}return true;};this.receiveData=function(i){var N=this.checkResponseConsistency(i);if(N){G(i);var O={};O.iRow=e;O.iCol=f;var Q=null;var S=F();if(S){Q=this.createPage(O);H=true;}else{Q=this.getPage(O);}if(Q){Q.receiveData(i,S);}if(c.getPropertyBag().isDebugMode()){var T=Q.getPosition();var U=T.iRow+"_"+T.iCol;l[U]={};l[U].component=i;}}};function B(){var i=0;var N=null;var O="";for(i=0;i<g.length;i++){N=g[i];if(N){N.removeData();O=N.getPageKey();delete p[O];}}g=[];}c.getRenderEngine().addAfterFinishRenderingHandler(y);this.removeRequest=function(i){g.push(i);};this.getRequestCommandTemplate=function(){return s;};this.removeHeaderTileRequest=function(i,T,N){var O=h[i.getAreaType()];if(O){var Q=O[T];if(Q){var S=q.inArray(N,Q.aRequestingPages);if(S!==-1){Q.aRequestingPages.splice(S,1);if(Q.aRequestingPages.length===0){Q.iStatus=a.PAGE_STATUS_UNKNOWN;}}}}};this.getHeaderTileInfo=function(i,T){return E(i,T);};this.setHeaderTileInfo=function(i,T,N){var O=D(i);O[T]=N;};function D(i){var T=h[i.getAreaType()];if(!T){T={};h[i.getAreaType()]=T;}return T;}function E(i,T){var N=D(i);var O=N[T];if(!O){O={};O.iStatus=a.PAGE_STATUS_UNKNOWN;O.iRefCnt=0;N[T]=O;}return O;}this.ensureCellAvailable=function(i,N,O){var Q=null;var T=a.PAGE_STATUS_UNKNOWN;var S=false;var U=false;var V=i.getAreaType()+"/"+N+"/"+O;if(!A[V]){var W=I(N,O,i);if(W){if(i.isRowHeaderArea()){T=this.getHeaderTileInfo(i,W.iRow).iStatus;S=true;}else if(i.isColHeaderArea()){T=this.getHeaderTileInfo(i,W.iCol).iStatus;S=true;}Q=this.getPage(W);if(S){if(T===a.PAGE_STATUS_UNKNOWN){U=true;}}else{U=!Q;}if(U){Q=this.createPage(W);Q.provideLoadingCells(i);if(!r){r=new R(this);}r.sendPageRequest(Q);}else{if((Q&&Q.getStatus()===a.PAGE_STATUS_LOADED)||T&&T===a.PAGE_STATUS_LOADED){A[V]=true;K(i,N,O);}}}}};this.reset=function(){p={};h={};H=false;if(r){r.reset();}n=true;l={};A={};m={};t={};u={};v={};w={};x={};b=0;d=0;};this.getDataHandler=function(){return j;};this.getTileRowCnt=function(){return b;};this.getTileColCnt=function(){return d;};this.getPageKeyFromPos=function(i){return this.getPageKeyFromRowCol(i.iRow,i.iCol);};this.getPageKeyFromRowCol=function(i,N){return i+"/"+N;};this.getPagePosFromKey=function(i){var N={};var O=i.split("/");N.iRow=parseInt(O[0],10);N.iCol=parseInt(O[1],10);return N;};this.getCrosstab=function(){return c;};this.createPage=function(i){var N=null;var O=this.getPageKeyFromPos(i);if(O){N=new P(i,O,this);p[O]=N;}return N;};this.getPage=function(i){return this.getPageFromRowCol(i.iRow,i.iCol);};this.getPageFromRowCol=function(i,N){var O=null;var Q=this.getPageKeyFromRowCol(i,N);if(Q){O=p[Q];}return O;};this.getCellMerger=function(){return o;};function F(){return(e===0&&f===0)||!H;}function G(i){b=i.tilerows;d=i.tilecols;s=i.scrollaction;e=i.v_pos;if(e){e=Math.floor(e/b);}else{e=0;}f=i.h_pos;if(f){f=Math.floor(f/d);}else{f=0;}}function I(i,N,O){var Q={iRow:0,iCol:0};if(O.isRowHeaderArea()){Q.iRow=Math.floor(i/b);Q.iCol=Math.floor(c.getColumnHeaderArea().getRenderStartCol()/d);}else if(O.isColHeaderArea()){Q.iRow=Math.floor(c.getRowHeaderArea().getRenderStartRow()/b);Q.iCol=Math.floor(N/d);}else if(O.isDataArea()){Q.iRow=Math.floor(i/b);Q.iCol=Math.floor(N/d);}return Q;}this.getReceivedPages=function(){return JSON.stringify(l);};function K(i,N,O){if(i.isRowHeaderArea()){L(m,N,O);L(t,O,N);}else if(i.isColHeaderArea()){L(u,N,O);L(v,O,N);}else if(i.isDataArea()){L(w,N,O);L(x,O,N);}}function L(i,N,V){if(!i[N]){i[N]=[];}i[N].push(V);}function M(i,N){var O=null;if(i.isDataArea()){O=N?w:x;}else if(i.isRowHeaderArea()){O=N?m:t;}else if(i.isColHeaderArea()){O=N?u:v;}return O;}this.getLoadedCellColumnsByRow=function(i,N){var O=[];var Q=M(i,true);if(Q){O=Q[N];}return O;};this.getLoadedCellRowsByCol=function(i,N){var O=[];var Q=M(i,false);if(Q){O=Q[N];}return O;};this.getPages=function(){return p;};this.isCellLoaded=function(i,N,O){var Q=i.getAreaType()+"/"+N+"/"+O;if(A[Q]){return true;}return false;};};
return sap.zen.crosstab.paging.PageManager;});
sap.ui.predefine('sap/zen/crosstab/paging/PagingConstants',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.paging.PagingConstants");sap.zen.crosstab.paging.PagingConstants=sap.zen.crosstab.paging.PagingConstants||{};sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_UNKNOWN=0;sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADING=1;sap.zen.crosstab.paging.PagingConstants.PAGE_STATUS_LOADED=2;return sap.zen.crosstab.paging.PagingConstants;});
sap.ui.predefine('sap/zen/crosstab/paging/RequestHandler',["jquery.sap.global","sap/zen/crosstab/paging/RequestStack"],function(q,R){"use strict";q.sap.declare("sap.zen.crosstab.paging.RequestHandler");
sap.zen.crosstab.paging.RequestHandler=function(p){var c=p.getCrosstab();var P=p.getTileRowCnt();var i=p.getTileColCnt();var r=new R(0);var m=0;var t=0;r.addElementRemovedHandler(b);var o=null;this.sendPageRequest=function(e){r.push(e);a();};this.enableTimeout=function(e){t=e?1000:0;};this.reset=function(){r.clear();m=0;this.enableTimeout(false);};this.setMaxQueueRequests=function(M){m=M;};this.getMaxQueueRequests=function(){return r.getMaxSize();};this.unlimitStack=function(){r.unlimitStack();};function a(){if(o){clearTimeout(o);}o=setTimeout(h.bind(this,p),t);}function s(e,f){var g=c.getPageRequestHandler();var j=e.getPosition();if(g){var k=Math.floor(j.iRow);var C=Math.floor(j.iCol);g(k,C);}else{var l=d(j,f);c.getUtils().executeCommandAction(l,false,true);}}function h(p){var e=null;while(r.getActualSize()>0){e=r.pop();s(e,p.getRequestCommandTemplate());}if(m>0){r.resetStack(m);m=0;}}function b(e){p.removeRequest(e);}function d(e,f){var g=e.iRow*P+1;var j=e.iCol*i+1;var C=f.replace("__X__",j);C=C.replace("__Y__",g);return C;}};
return sap.zen.crosstab.paging.RequestHandler;});
sap.ui.predefine('sap/zen/crosstab/paging/RequestStack',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.paging.RequestStack");
sap.zen.crosstab.paging.RequestStack=function(m){var e=[];var E=[];var M=m;this.push=function(o){var r=null;var b=false;var a=q.inArray(o,e);if(a!=-1){e.splice(a,1);}if(M){if(e.length===M){r=e[0];b=true;e=e.splice(1,e.length-1);}e.push(o);if(b){s(r);}}else{e.push(o);}};this.pop=function(){return e.pop();};this.peek=function(){var p=null;if(e.length>0){p=e[e.length-1];}return p;};this.containsElement=function(o){return(q.inArray(o,e)!=-1);};this.clear=function(){e=[];};this.getActualSize=function(){return e.length;};this.getMaxSize=function(){return M;};this.getElementAt=function(i){var o=null;if(i>=0&&i<e.length){o=e[i];}return o;};this.resetStack=function(m){e=[];M=m;};this.unlimitStack=function(){M=0;};this.addElementRemovedHandler=function(h){E.push(h);};this.removeElementRemovedHandler=function(h){var i=q.inArray(h,E);if(i!==-1){E.splice(i,1);}};this.removeAllElementRemovedHandlers=function(){E=[];};function s(o){var i=0;var h=null;for(i=0;i<E.length;i++){h=E[i];if(h){h(o);}}}};
return sap.zen.crosstab.paging.RequestStack;});
sap.ui.predefine('sap/zen/crosstab/rendering/CrossRequestManager',["jquery.sap.global","sap/zen/crosstab/rendering/ScrollManager","sap/zen/crosstab/rendering/PixelScrollManager","sap/zen/crosstab/rendering/HeaderScrollManager","sap/zen/crosstab/utils/Utils"],function(q,S,P,H){"use strict";q.sap.declare("sap.zen.crosstab.rendering.CrossRequestManager");
sap.zen.crosstab.rendering.CrossRequestManager=function(c,r){var s=null;var h=null;var i=0;var a="";var v=0;var V="";var b=false;var C=null;var d=null;var D=null;var R=null;var e=false;var f="";var g="";var t=0;var T=0;var j=0;var k=0;var A=false;var l=false;var m=false;var n=undefined;var o=undefined;var p=null;var u=c.getDataArea();var w=c.getRowHeaderArea();var x=c.getColumnHeaderArea();var y=false;var z=false;this.reset=function(){if(s){s.destroy();}s=null;if(h){h.destroy();}h=null;};this.clearSavedColWidths=function(){C=null;d=null;D=null;R=null;};this.clearSavedData=function(){s=null;h=null;i=0;a="";v=0;V="";b=false;this.clearSavedColWidths();e=false;f="";g="";t=0;T=0;p=null;y=false;z=false;};this.saveTableDimensions=function(){if(c.getPropertyBag().isPixelScrolling()){var G=q(document.getElementById(c.getId()+"_dataArea"));j=G.outerHeight();k=G.outerWidth();}t=c.getTotalRows();T=c.getTotalCols();};function B(G){if(g==="expanded"){return(G<0);}else if(g==="collapsed"){return(G>0);}else{return false;}}this.handleRootCause=function(){var O=v;var G=i;var I=n;var J=o;if(f==="plan"){if(a!=="plan"&&V!=="plan"){this.clearSavedData();}}else if(f==="sorting"){if(a!=="sort"){this.clearSavedData();}else{v=0;o=false;}}else if(f==="hierarchy"){if(a==="hier"&&V==="hier"){var K=t-c.getTotalRows();var L=T-c.getTotalCols();if(K!==0){if(B(K)){if(!e){if(c.getPropertyBag().isPixelScrolling()){l=true;}else{v=Math.max(0,v-K);}}}else{this.clearSavedData();}}else if(L!==0){if(B(L)){if(!e){if(c.getPropertyBag().isPixelScrolling()){A=true;}else{i=Math.max(0,i-L);}}}else{this.clearSavedData();}}}else{this.clearSavedData();}}e=false;f="";g="";t=0;T=0;if(G!==i||O!==v||I!==n||J!==o){c.getUtils().sendScrollPosUpdate(i,n,v,o);}m=true;};this.getHPixelScrollPosAfterRendering=function(){var G=-1;if(c.getPropertyBag().isPixelScrolling()){var I=q(document.getElementById(c.getId()+"_dataArea"));if(A){var J=I.outerWidth()-k;G=i+J;A=false;}}return G;};this.getVPixelScrollPosAfterRendering=function(){var G=-1;if(c.getPropertyBag().isPixelScrolling()){var I=q(document.getElementById(c.getId()+"_dataArea"));if(l){var J=I.outerHeight()-j;G=v+J;l=false;}}return G;};this.setRootCause=function(G){f=G;};this.setHierarchyAction=function(G){g=G;};this.setIsHierarchyDirectionDown=function(I){e=I;};this.getScrollManager=function(){if(!s){if(c.getPropertyBag().isPixelScrolling()){s=new P(c,r);}else{s=new S(c,r);}if(b){s.setHScrollPos(i);s.setVScrollPos(v);}}return s;};this.getHeaderScrollManager=function(){if(!h){h=new H(c,r);if(b){h.setHScrollData(p);}}return h;};this.saveHScrollInfo=function(G,I){if(c.getPropertyBag().isPixelScrolling()){var s=c.getRenderEngine().getScrollManager();i=0;if(s){i=s.getCurrentHScrollPos();}}else{i=c.getColumnHeaderArea().getRenderStartCol();if(s&&s.isHScrolledToEnd()){i++;n=true;}}if(I){v=0;}a=G;b=true;y=true;};this.saveVScrollInfo=function(G,I){if(c.getPropertyBag().isPixelScrolling()){var J=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));v=0;if(J&&J.length>0){v=J.scrollTop();}}else{v=c.getRowHeaderArea().getRenderStartRow();if(s&&s.isVScrolledToEnd()){v++;o=true;}}if(I){i=0;}V=G;b=true;z=true;};this.savedInfoHandled=function(){if(m===true){i=0;a="";v=0;V="";b=false;C=null;d=null;D=null;R=null;m=false;n=undefined;o=undefined;p=null;y=false;z=false;}};this.hasSavedInfo=function(){return b;};this.getSavedHScrollInfo=function(){var G={};G.iPos=i;G.sAction=a;G.bScrolledToEnd=n;return G;};this.getSavedVScrollInfo=function(){var G={};G.iPos=v;G.sAction=V;G.bScrolledToEnd=o;return G;};this.saveColWidths=function(){var x=c.getColumnHeaderArea();var G=c.getDimensionHeaderArea();var w=c.getRowHeaderArea();var u=c.getDataArea();if(!x.hasLoadingPages()){C=x.getColWidths();b=true;}if(!u.hasLoadingPages()){D=u.getColWidths();b=true;}if(!G.hasLoadingPages()){d=G.getColWidths();b=true;}if(!w.hasLoadingPages()){R=w.getColWidths();b=true;}};this.restoreColWidths=function(){var x=c.getColumnHeaderArea();var G=c.getDimensionHeaderArea();var w=c.getRowHeaderArea();var u=c.getDataArea();if(C){x.setColWidths(C);C=null;}if(D){u.setColWidths(D);D=null;}if(d){G.setColWidths(d);d=null;}if(R){w.setColWidths(R);R=null;}};function E(G,I,J,K){var L={iHScrollPos:G,bHScrolledToEnd:I,iVScrollPos:J,bVScrolledToEnd:K};if(L.iHScrollPos<0){L.iHScrollPos=0;L.bHScrolledToEnd=false;}if(L.iVScrollPos<0){L.iVScrollPos=0;L.bVScrolledToEnd=false;}if(!c.getPropertyBag().isPixelScrolling()){var M=u?u:x;var N=M.getColCnt()-1;if(L.iHScrollPos>N){L.iHScrollPos=0;L.bHScrolledToEnd=false;}M=u?u:w;var O=M.getRowCnt()-1;if(L.iVScrollPos>O){L.iVScrollPos=0;L.bVScrolledToEnd=false;}}if((L.iHScrollPos!==G)||(L.iVScrollPos!==J)){c.getUtils().sendScrollPosUpdate(0,false,0,false);}return L;}this.setHScrollInfo=function(G,I){i=G;n=I;b=true;y=true;};this.setVScrollInfo=function(G,I){v=G;o=I;b=true;z=true;};this.setScrollData=function(G,I,J,K){var L=E(G,I,J,K);i=L.iHScrollPos;v=L.iVScrollPos;n=L.bHScrolledToEnd;o=L.bVScrolledToEnd;b=true;y=true;z=true;};function F(G){var I=G;if(I.iHPos<0){I.iHPos=0;}if(I.iHPos!==G.iHPos){c.getUtils().sendScrollPosUpdate(I.iHPos,undefined,undefined,undefined,true);}return I;}this.setHeaderScrollData=function(G){var I=F(G);b=true;p=I;};this.getHeaderScrollData=function(){return p;};this.hasSavedHScrollInfo=function(){return y;};this.hasSavedVScrollInfo=function(){return z;};};
return sap.zen.crosstab.rendering.CrossRequestManager;});
sap.ui.predefine('sap/zen/crosstab/rendering/DataModel',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.rendering.DataModel");
sap.zen.crosstab.rendering.DataModel=function(a){var m=[];var r=0;var c=0;var p=null;this.insertCell=function(C,R,d){if(R>r-1||d>c-1){throw{name:"DataModelIndexOutOfBounds",message:"A cell cannot be inserted out of the bounds defined by iRowCnt and iColCnt"};}var M=g(R);M[d]=C;if(C){var i=0;var j=0;for(i=1;i<C.getColSpan();i++){M[d+i]=null;}for(i=0;i<C.getColSpan();i++){for(j=1;j<C.getRowSpan();j++){M=g(R+j);M[d+i]=null;}}}};this.getCellDirect=function(R,C){var o=null;var M=m[R];if(M){o=M[C];}if(o&&o.setEffectiveRowSpan&&o.setEffectiveColSpan){o.setEffectiveRowSpan(o.getRowSpan());o.setEffectiveColSpan(o.getColSpan());}return o;};function g(R){var M=m[R];if(!M){M=[];m[R]=M;}return M;}this.getCell=function(R,C,d){var o=b(R,C,d);if(o&&o.setEffectiveRowSpan&&o.setEffectiveColSpan){o.setEffectiveRowSpan(o.getRowSpan());o.setEffectiveColSpan(o.getColSpan());}return o;};function b(R,C,d){if(!p&&a){p=a.getPageManager();}if(p&&!d){p.ensureCellAvailable(a,R,C);}var o=null;var M=m[R];if(M){o=M[C];}return o;}this.setRowCnt=function(R){r=R;};this.getRowCnt=function(){return r;};this.setColCnt=function(C){c=C;};this.getColCnt=function(){return c;};this.clear=function(){m=[];r=0;c=0;};this.hasData=function(){return m.length>0;};this.getCellWithSpan=function(R,C,d){var o=this.getCellWithColSpan(R,C,d);if(!o){o=this.getCellWithRowSpan(R,C,d);}return o;};this.getCellWithRowSpan=function(R,C,d){var o=this.getCell(R,C,d);if(!o){var i=1;while(!o&&R>0){R--;i++;o=this.getCell(R,C,d);}if(o&&o.getRowSpan()<i){o=null;}if(o&&o.setEffectiveRowSpan){o.setEffectiveRowSpan(o.getRowSpan()-i+1);}}else{if(o.setEffectiveRowSpan){o.setEffectiveRowSpan(o.getRowSpan());}}return o;};this.getCellWithColSpan=function(R,C,d){var o=this.getCell(R,C,d);if(!o){var i=1;while(!o&&C>0){C--;i++;o=this.getCell(R,C,d);}if(o&&o.getColSpan()<i){o=null;}if(o&&o.setEffectiveColSpan){o.setEffectiveColSpan(o.getColSpan()-i+1);}}else{if(o.setEffectiveColSpan){o.setEffectiveColSpan(o.getColSpan());}}return o;};this.getAllLoadedCellsByCol=function(a,C){var d=[];var l=null;var i=0;var o=null;if(!p&&a){p=a.getPageManager();}if(p){l=p.getLoadedCellRowsByCol(a,C);}if(l){for(i=0;i<l.length;i++){o=this.getCellWithColSpan(l[i],C,true);if(o){d.push(o);}}}return d;};this.getCellsByCol=function(C,s,r){var d=[];var R=0;var M=0;var o=null;R=s;M=s+r;for(R;R<M;R++){o=this.getCellWithColSpan(R,C,true);if(o){d.push(o);}}return d;};this.getAllLoadedCellsByRow=function(a,R){var C=[];var l=null;var i=0;var o=null;if(!p&&a){p=a.getPageManager();}if(p){l=p.getLoadedCellColumnsByRow(a,R);}if(l){for(i=0;i<l.length;i++){o=this.getCellWithRowSpan(R,l[i],true);if(o){C.push(o);}}}return C;};this.getCellsByRow=function(R,s,c){var C=[];var i=0;var M=0;var o=null;i=s;M=s+c;for(i;i<M;i++){o=this.getCellWithRowSpan(R,i,true);if(o){C.push(o);}}return C;};this.getModelRows=function(){return m;};};
return sap.zen.crosstab.rendering.DataModel;});
sap.ui.predefine('sap/zen/crosstab/rendering/DomElementProvider',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.rendering.DomElementProvider");
sap.zen.crosstab.rendering.DomElementProvider=function(){var d={};this.addElement=function(i,D){d[i]=D;};this.getElement=function(i){return d[i];};};
return sap.zen.crosstab.rendering.DomElementProvider;});
sap.ui.predefine('sap/zen/crosstab/rendering/HeaderScrollManager',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.rendering.HeaderScrollManager");
sap.zen.crosstab.rendering.HeaderScrollManager=function(c,r){var s={};var C=0;var t=this;var u=null;this.destroy=function(){};this.onNewScrollbars=function(){s={};};r.registerNewScrollbarsNotification(this.onNewScrollbars);function g(S){var j=s[S];if(!j){j=q(document.getElementById(c.getId()+S));if(j&&j.length>0){s[S]=j;}}return j;}function m(){var l=g("_lowerLeft_scrollDiv");var U=g("_upperLeft_scrollDiv");var a;var d;if(U[0]){d=U[0];}else if(l[0]){d=l[0];}if(d){a=c.getUtils().translateScrollLeft(d,C);U.scrollLeft(a);l.scrollLeft(a);}}this.hScrollHandler=function(e){c.postPlanningValue();var o=C;C=e.getParameters().newScrollPos;m();if(o!==C){t.sendClientScrollPosUpdateAndAdjustDropAreas();}};this.sendClientScrollPosUpdateAndAdjustDropAreas=function(){if(u){clearTimeout(u);u=null;}u=setTimeout(t.doSendPosUpdateAndUpdateDropAreas,200,null);};this.adjustVerticalDropAreas=function(){if(c.getDragDropHandler()){c.getDragDropHandler().repositionDropAreasForHeaderScrolling();}};this.doSendPosUpdateAndUpdateDropAreas=function(){c.getUtils().sendClientScrollPosUpdate(C,undefined,undefined,undefined,true);t.adjustVerticalDropAreas();};this.setHScrollData=function(h){if(h){C=h.iHPos;}else{C=0;}};this.moveScrollbars=function(){var h=c.getHorizontalHeaderScrollbar();if(h){m();h.setScrollPosition(C);}};};
return sap.zen.crosstab.rendering.HeaderScrollManager;});
sap.ui.predefine('sap/zen/crosstab/rendering/PixelScrollManager',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.rendering.PixelScrollManager");
sap.zen.crosstab.rendering.PixelScrollManager=function(c,r){var s={};var C=0;var i=0;var o=r.getCrossRequestManager();var t=this;var u=null;this.getCurrentHScrollPos=function(){return i;};this.destroy=function(){};this.onNewScrollbars=function(){s={};};r.registerNewScrollbarsNotification(this.onNewScrollbars);function g(S){var D=s[S];if(!D){D=q(document.getElementById(c.getId()+S));if(D&&D.length>0){s[S]=D;}}return D;}function m(p){g("_lowerLeft_scrollDiv").scrollTop(p);g("_lowerRight_scrollDiv").scrollTop(p);}function a(p){var A;var l=g("_lowerRight_scrollDiv");var U=g("_upperRight_scrollDiv");var D;var R={};R.oLRS=l;R.oURS=U;if(U[0]){D=U[0];}else if(l[0]){D=l[0];}if(D){A=c.getUtils().translateScrollLeft(D,p);}R.iPos=A;return R;}function b(p){var M=a(p);M.oURS.scrollLeft(M.iPos);M.oLRS.scrollLeft(M.iPos);}this.hScrollHandler=function(E){c.postPlanningValue();var p=E.getParameters().newScrollPos;b(p);i=p;t.sendClientScrollPosUpdate();};this.vScrollHandler=function(E){c.postPlanningValue();var p=E.getParameters().newScrollPos;m(p);C=p;t.sendClientScrollPosUpdate();};this.sendClientScrollPosUpdate=function(){if(u){clearTimeout(u);u=null;}u=setTimeout(t.doSendPosUpdate,200,null);};this.doSendPosUpdate=function(){c.getUtils().sendClientScrollPosUpdate(i,undefined,C,undefined);};function d(p){var h=c.getHScrollbar();var M=a(p);if(h){h.setScrollPosition(p);}M.oURS.scrollLeft(M.iPos);M.oLRS.scrollLeft(M.iPos);}function e(p){var v=c.getVScrollbar();if(v){v.setScrollPosition(p);}var D=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));if(D&&D.length){D.scrollTop(p);}var f=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));if(f&&f.length){f.scrollTop(p);}}this.moveScrollbars=function(){d(i);e(C);};this.positionHScrollDiv=function(){var p=i;var n=o.getHPixelScrollPosAfterRendering();if(n>-1){p=n;d(p);}b(p);};this.positionVScrollDiv=function(){var p=C;var n=o.getVPixelScrollPosAfterRendering();if(n>-1){p=n;e(p);}m(p);};this.setHScrollPos=function(h){i=h;};this.setVScrollPos=function(v){C=v;};this.adjustPixelScrollbarAfterRendering=function(){var n=o.getNewPixelScrollPosAfterRendering();if(n){var v=n.iVPos;if(v>=0){var V=c.getVScrollbar();if(V){V.setScrollPosition(v);m(v);}}var h=n.iHPos;if(h>=0){var H=c.getHScrollbar();if(H){H.setScrollPosition(h);b(h);}}}};};
return sap.zen.crosstab.rendering.PixelScrollManager;});
sap.ui.predefine('sap/zen/crosstab/rendering/RenderEngine',["jquery.sap.global","sap/zen/crosstab/rendering/ScrollbarRenderer","sap/zen/crosstab/rendering/DomElementProvider","sap/zen/crosstab/utils/Measuring","sap/zen/crosstab/CellStyleHandler","sap/zen/crosstab/rendering/RenderingConstants","sap/zen/crosstab/rendering/CrossRequestManager","sap/zen/crosstab/utils/Utils"],function(q,S,D,M,C,R,a,U){"use strict";q.sap.declare("sap.zen.crosstab.rendering.RenderEngine");
sap.zen.crosstab.rendering.RenderEngine=function(c){var o=c.getColumnHeaderArea();var d=c.getDimensionHeaderArea();var r=c.getRowHeaderArea();var b=c.getDataArea();var e=null;var s=null;var f=null;var t=null;var g=null;var l="";var I=false;var n=[];var h=new D();var m=new M(c,h);var k=new a(c,this);var p=null;var H=null;var u=false;var v=false;var w={bHasHScrollbar:false,bHasVScrollbar:false,bHasHHeaderScrollbar:false};var A=[];var x=true;var y=false;var z=-1;var B=-1;var E=0;var F=false;this.isIE8Mode=function(){return u;};this.renderResizeOutline=function(){if((c.getWidth()==="auto"&&c.hResize())||(c.getHeight()==="auto"&&c.vResize())){var i=c.getId();var j=i+"_resizeDiv";var t1=i+"_resizeFrame";var u1=0;var v1=0;t=h.getElement(i);if(t&&t[0]){t.css("overflow","hidden");var w1=m.getTableDivBordersAndPadding();u1=w1.borders.iTopBorderWidth;v1=w1.borders.iLeftBorderWidth;f=q.sap.byId(j);f.css("visibility","visible");f.css("top",-u1+"px");f.css("left",-v1+"px");g=q.sap.byId(t1);g.css("width",c.getIntWidth()+"px");g.css("height",c.getIntHeight()+"px");g.css("top",-u1+"px");g.css("left",-v1+"px");g.css("visibility","visible");var x1=t.find("#"+q.sap.encodeCSS(c.getId()+"_hScrollTab"));if(x1&&x1.length>0){x1.appendTo(g);x1.css("position","absolute");var y1=c.getPropertyBag().getToolbarHeight();x1.css("bottom",y1+"px");x1.css("left","0px");}var z1=t.find("#"+q.sap.encodeCSS(c.getId()+"_vScrollTab"));if(z1&&z1.length>0){z1.appendTo(g);z1.css("position","absolute");z1.css("top","0px");z1.css(c.getPropertyBag().isRtl()?"left":"right","0px");}if(c.getPropertyBag().hasToolbar()){var A1=t.find("#"+q.sap.encodeCSS(c.getId()+"_toolbar"));if(A1&&A1.length>0){A1.appendTo(g);A1.css("position","absolute");A1.css("left","0px");A1.css("bottom","0px");}}}}};this.removeResizeOutline=function(){if(f){f.css("visibility","hidden");f=null;}if(t){t.css("overflow","hidden");t=null;}if(g){g.css("visibility","hidden");g=null;}};this.addAfterFinishRenderingHandler=function(i){if(q.inArray(i,A)===-1){A.push(i);}};this.removeAfterFinishRenderingHandler=function(i){var j=q.inArray(i,A);if(j!==-1){A.splice(j,1);}};this.removeAllAfterFinishRenderingHandlers=function(){A=[];};this.renderCell=function(i,j,t1){var u1=i.getCell(j,t1);if(u1){e.renderControl(u1);}return u1;};this.renderArea=function(i,j,t1,u1,v1,w1){if(!j){j=0;}if(!t1){t1=0;}if(!u1){u1=0;}if(!v1){v1=0;}var x1=j+t1;var y1=u1+v1;var z1=0;var A1=0;x1=Math.min(x1,i.getRowCnt());y1=Math.min(y1,i.getColCnt());for(z1=j;z1<x1;z1++){if(w1){e.write("<tr");e.writeAttributeEscaped("class",w1);e.write(">");}else{e.write("<tr>");}for(A1=u1;A1<y1;A1++){this.renderCell(i,z1,A1);}e.write("</tr>");}};this.setDeferredVScrollPosDetermination=function(i){v=i;};function G(){u=false;if(q.browser.msie){if(q.browser.version.substring(0,2)==="8."){u=true;}if(q.browser.fVersion&&q.browser.fVersion===8){u=true;}}}this.beginRendering=function(){c.block();G();F=c.getUtils().isMsIE();e=sap.ui.getCore().createRenderManager();n1();t=h.getElement(c.getId());t.css("visibility",(c.getPropertyBag().isDebugMode()===true)?"visible":"hidden");if(k.hasSavedInfo()){var i=k.getSavedHScrollInfo();if(i){o.setRenderStartCol(i.iPos);if(i.bScrolledToEnd){o.setRenderColCnt(o.getColCnt()-o.getRenderStartCol());}k.restoreColWidths();}var j=k.getSavedVScrollInfo();if(j){r.setRenderStartRow(j.iPos);if(j.bScrolledToEnd){r.setRenderRowCnt(r.getRowCnt()-r.getRenderStartRow());}}}};this.finishRendering=function(j){var i=0;var t1=null;var u1;var v1;this.showLoadingVisualization();if(e){e.destroy();}e=null;m.reset();t=h.getElement(c.getId());t.css("visibility","visible");k.savedInfoHandled();c.restoreFocusOnCell();this.setDivSizeValidity();var w1=c.getSelectionHandler();if(w1){w1.ensureCellsSelected();}if(!c.hasLoadingPages()&&c.hasData()){v1=c.getHeaderInfo();if(v1){v1.setupPivotCell();}u1=c.getDragDropHandler();if(u1&&c.getPropertyBag().isDragDropEnabled()){u1.initDragDrop(j);}if(j&&c.getColResizer()&&c.getPropertyBag().isEnableColResize()){c.getColResizer().initialize();}}for(i=0;i<A.length;i++){t1=A[i];if(t1){t1();}}c.unblock();};this.renderDimensionHeaderArea=function(){var i=0;var j=d.getRowCnt();var t1=0;var u1=d.getColCnt();this.renderArea(d,i,j,t1,u1,"sapzencrosstab-HeaderRow");d.setRenderSize(i,j,t1,u1);e.flush(h.getElement(d.getId())[0]);};this.renderDataArea=function(){var i=b.getId();var j=h.getElement(b.getId());var t1=j;var u1="";if(!c.getPropertyBag().isDebugMode()){j.hide();}j.html("<tbody></tbody>");t1=q(document.getElementById(i).firstChild);t1.html("");u1=t1[0].innerHTML||"";e.write(u1);var v1=0;var w1=0;var x1=0;var y1=0;if(r.hasContent()){v1=r.getRenderStartRow();w1=r.getRenderRowCnt();}else{v1=0;w1=b.getRowCnt();}if(o.hasContent()){x1=o.getRenderStartCol();y1=o.getRenderColCnt();}else{x1=0;y1=b.getColCnt();}var z1=J(v1,w1,x1,y1);var A1=K(v1,w1,x1,y1);z1=null;A1=null;if(z1){N(z1);P(z1,v1,w1,x1,y1,this);}else if(A1){O(A1);Q(A1,v1,w1,x1,y1,this);}else{this.renderArea(b,v1,w1,x1,y1);}e.flush(t1[0]);j.show();b.setRenderSize(v1,w1,x1,y1);};function J(i,j,t1,u1){if(t1!==b.getRenderStartCol()||u1!==b.getRenderColCnt()||j!==b.getRenderRowCnt()){return 0;}var v1=b.getRenderStartRow()+b.getRenderRowCnt();var w1=i+j;var x1=w1-v1;if(Math.abs(x1)<j){return x1;}return 0;}function K(i,j,t1,u1){if(i!==b.getRenderStartRow()||j!==b.getRenderRowCnt()||u1!==b.getRenderColCnt()){return 0;}var v1=b.getRenderStartCol()+b.getRenderColCnt();var w1=t1+u1;var x1=w1-v1;if(Math.abs(x1)<u1){return x1;}return 0;}function L(j){var i=null;var t1;if(F===true){if(c.getPropertyBag().isDragDropEnabled()===true){t1=j.find("td");q.each(t1,function(u1,v1){var w1=q(v1);if(w1.data("ui-draggable")){w1.draggable("destroy");}if(w1.data("ui-droppable")){w1.droppable("destroy");}w1.off();});}i=j.clone(true).off();}else{i=j.clone();}return i;}function N(j){var t1=q(document.getElementById(b.getId()));var u1=L(t1);var v1=q(u1[0].firstChild);var w1=v1.find("> tr");if(j>0){for(var i=0;i<j;i++){q(w1[i]).remove();}}else{var x1=w1.length;for(i=x1+j;i<x1;i++){q(w1[i]).remove();}}t1.replaceWith(u1);h.addElement(b.getId(),q(document.getElementById(b.getId())));}function O(t1){var u1=q(document.getElementById(b.getId()));var v1=L(u1);var w1=q(v1[0].firstChild);var x1=w1.find("> tr");var y1=x1.length;if(t1>0){for(var i=0;i<y1;i++){var z1=q(x1[i]).find("> td");for(var j=0;j<t1;j++){q(z1[j]).remove();}}}else{for(i=0;i<y1;i++){z1=q(x1[i]).find("> td");var A1=z1.length-Math.abs(t1)-1;for(j=z1.length-1;j>A1;j--){q(z1[j]).remove();}}}u1.replaceWith(v1);h.addElement(b.getId(),q(document.getElementById(b.getId())));}function P(i,j,t1,u1,v1,w1){var x1=q(document.getElementById(b.getId()).firstChild);var y1=x1.html();var z1=Math.abs(i);var A1;if(i>0){e.write(y1);A1=t1+j-i;w1.renderArea(b,A1,z1,u1,v1);}else{A1=j;w1.renderArea(b,A1,z1,u1,v1);e.write(y1);}e.flush(x1[0]);}function Q(j,t1,u1,v1,w1){var x1=q(document.getElementById(b.getId()).firstChild);var y1;var z1=x1.find("> tr");if(j>0){y1=v1+w1-j;for(var i=0;i<z1.length;i++){var A1=q(z1[i]);var B1=A1.html();e.write("<tr>");e.write(B1);for(var C1=y1;C1<v1+w1;C1++){e.renderControl(b.getCell(t1+i,C1));}e.write("</tr>");}}else{y1=v1;for(i=0;i<z1.length;i++){A1=q(z1[i]);B1=A1.html();e.write("<tr>");for(C1=y1;C1<y1-j;C1++){e.renderControl(b.getCell(t1+i,C1));}e.write(B1);e.write("</tr>");}}}this.renderColHeaderArea=function(i,j){var t1=o.getId();var u1=h.getElement(o.getId());var v1=u1;var w1=o.getRowCnt();var x1=o.getColCnt();var y1="";var z1=0;var A1=0;var B1=m.getAreaWidth(d);var C1=0;var D1=c.getContentWidth();var E1=0;var F1=0;var G1,H1;var I1,J1;var K1;var L1=0;var M1=z1;var N1;var O1=c.getId()+"_ColHeaderRow_";var P1=null;if(!j){D1-=B1;}if(!c.getPropertyBag().isDebugMode()){u1.hide();}u1.html("<tbody></tbody>");v1=q(document.getElementById(t1).firstChild);v1.html("");var Q1=false;if(c.getPropertyBag().isPixelScrolling()){P1=X;z1=0;E1=x1;}else{P1=W;z1=i;E1=x1-z1;Q1=this.isHScrolledToEnd();}while(P1(A1,E1,F1,D1,Q1)){y1=v1[0].innerHTML;if(!y1){T(v1);}M1=z1+A1;L1=0;H1=o.getFinalColWidth(M1);if(!H1){L1++;}while(P1(A1,E1,F1,D1,Q1)&&H1){A1++;F1+=H1;H1=o.getFinalColWidth(z1+A1);L1++;}N1=M1+L1;for(G1=0;G1<w1;G1++){I1=O1+G1;K1=u1.find("#"+q.sap.encodeCSS(I1))[0];J1=K1.innerHTML;e.write("<tr id=\""+I1+"\" class=\"sapzencrosstab-HeaderRow\">");e.write(J1);for(var R1=M1;R1<N1;R1++){var S1=null;if(R1===z1){S1=o.getCellWithColSpan(G1,R1);}else{S1=o.getCell(G1,R1);}if(S1){e.renderControl(S1);}}e.write("</tr>");}e.flush(v1[0]);if(!o.getFinalColWidth(M1)){var T1=u1.outerWidth()-C1;F1+=T1;A1++;}C1=u1.outerWidth();}o.setRenderSize(0,o.getRowCnt(),z1,A1);u1.show();};this.appendColumnsAfterResize=function(){var i=h.getElement(o.getId());var j=0;var t1=0;var u1=0;if(o.getRenderStartCol()>0&&o.getRenderStartCol()+o.getRenderColCnt()===o.getColCnt()){var v1=c.getContentWidth()-m.getAreaWidth(d);var w1=i.outerWidth();j=w1;var x1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(w1<=v1&&o.getRenderStartCol()>0){this.appendLeftCols(o,1);this.appendLeftCols(b,1);x1=true;u1=o.getFinalColWidth(o.getRenderStartCol());if(u1){w1+=u1;}else{t1=i.outerWidth()-j;w1+=t1;}j=i.outerWidth();}i.show();if(x1){this.adjustRowHeights(d,o);this.adjustRowHeights(r,b);this.adjustColWidths(o,b);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!p){p=k.getScrollManager();}p.commandHScrolledToEnd();}}i=h.getElement(o.getId());};function T(i){var j=o.getRowCnt();var t1=0;for(t1=0;t1<j;t1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.writeAttribute("id",c.getId()+"_ColHeaderRow_"+t1);e.write(">");e.write("</tr>");}e.flush(i[0]);}function V(i){var j=i+1;var t1=0;var u1=t1+r.getColCnt();var v1=0;var w1=0;for(v1=i;v1<j;v1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");for(w1=t1;w1<u1;w1++){var x1=r.getCellWithRowSpan(v1,w1);if(x1){e.renderControl(x1);}}e.write("</tr>");}}this.isVScrolledToEnd=function(){var i=false;if(p){i=p.isVScrolledToEnd();}return i;};this.isHScrolledToEnd=function(){var i=false;if(p){i=p.isHScrolledToEnd();}return i;};function W(i,j,t1,u1,v1){return((t1<u1)||v1)&&i<j;}function X(i,j){return i<j;}this.renderRowHeaderArea=function(i){var j=r.getId();var t1=h.getElement(r.getId());var u1=t1;var v1=r.getRowCnt();var w1="";var x1=0;var y1=m.getAreaHeight(d);var z1=y1;var A1=c.getContentHeight();var B1=0;var C1=1;var D1=null;if(!c.getPropertyBag().isDebugMode()){t1.hide();}t1.html("<tbody></tbody>");u1=q(document.getElementById(j).firstChild);u1.html("");var E1=false;if(c.getPropertyBag().isPixelScrolling()){D1=X;i=0;B1=v1;}else{D1=W;B1=v1-i;E1=this.isVScrolledToEnd();}while(D1(x1,B1,z1,A1,E1)){w1=u1[0].innerHTML||"";e.write(w1);C1=1;if(x1>0){if(c.getPropertyBag().isPixelScrolling()){C1=B1-x1;}else{if(x1<B1-2){C1=3;}else if(x1<B1-1){C1=2;}}this.renderArea(r,i+x1,C1,0,r.getColCnt(),"sapzencrosstab-HeaderRow");}else{V(i);}e.flush(u1[0]);x1+=C1;z1=y1+t1.outerHeight();}t1.show();r.setRenderSize(i,x1,0,r.getColCnt());if(u){Z(r);}};function Y(r,i,j){var t1=1;var u1=r.getCell(i,j,true);if(!u1){while(!u1&&i>0){i--;t1++;u1=r.getCell(i,j,true);}}return t1;}function Z(r){var i=r.getRenderStartRow()+r.getRenderRowCnt()-1;var j=r.getRenderStartCol();var t1=j+r.getRenderColCnt()-1;var u1=0;var v1=null;var w1=1;for(u1=j;u1<=t1;u1++){v1=r.getCellWithRowSpan(i,u1);if(v1){w1=Y(r,i,u1);v1.setHtmlIE8RowSpan(w1);}}}this.appendRowsAfterResize=function(){var i=h.getElement(r.getId());var j=0;var t1=0;var u1=0;if(r.getRenderStartRow()>0){var v1=c.getContentHeight()-m.getAreaHeight(d);var w1=i.outerHeight();j=w1;var x1=false;if(!c.getPropertyBag().isDebugMode()){i.hide();}while(w1<=v1&&r.getRenderStartRow()>0&&r.getRenderStartRow()+r.getRenderRowCnt()===r.getRowCnt()){this.appendTopRows(r,1);this.appendTopRows(b,1);x1=true;u1=r.getFinalRowHeight(r.getRenderStartRow());if(u1){w1+=u1;}else{t1=i.outerHeight()-j;w1+=t1;}j=i.outerHeight();}i.show();if(x1){this.adjustRowHeights(r,b);this.adjustColWidths(d,r);this.adjustColWidths(o,b);m.calculateRenderSize(true);this.calculateRenderSizeDivSize();if(!p){p=k.getScrollManager();}p.commandVScrolledToEnd();}}i=h.getElement(r.getId());};this.setUserColWidths=function(i){if(!i.hasContent()||!i.hasUserColWidths()){return;}i.calculateColGranularity();var j=i.measureColGranularityCells();i.applyColWidthsToGranularityCells(j);var t1=h.getElement(i.getId());var u1=L(t1);b1(i,t1,u1,true);t1.replaceWith(u1);t1=q(document.getElementById(i.getId()));c1(i,t1,true);h.addElement(i.getId(),q(document.getElementById(i.getId())));i.setColGranularityCalculatedAndMeasured(true);};this.adjustColWidths=function(j,t1){if(!t1.hasContent()||!j.hasContent()){if(!j.hasUserColWidths()&&!t1.hasUserColWidths()){return;}}var u1=h.getElement(j.getId());var v1=h.getElement(t1.getId());j.calculateColGranularity();t1.calculateColGranularity();var w1=j.measureColGranularityCells();var x1=t1.measureColGranularityCells();j.setColGranularityCalculatedAndMeasured(false);t1.setColGranularityCalculatedAndMeasured(false);var i=0;var y1;for(i=j.getRenderStartCol();i<w1.length;i++){y1=Math.max(w1[i]||0,x1[i]||0);w1[i]=y1;x1[i]=y1;}j.applyColWidthsToGranularityCells(w1,j.hasUserColWidths());t1.applyColWidthsToGranularityCells(x1,t1.hasUserColWidths());var z1=L(u1);var A1=L(v1);b1(j,u1,z1);b1(t1,v1,A1);u1.replaceWith(z1);v1.replaceWith(A1);u1=q(document.getElementById(j.getId()));v1=q(document.getElementById(t1.getId()));c1(j,u1);c1(t1,v1);if(t1.isRowHeaderArea()&&c.getNewLinesCnt()>0&&c.getCallValueHelpCommand()){_();}h.addElement(j.getId(),q(document.getElementById(j.getId())));h.addElement(t1.getId(),q(document.getElementById(t1.getId())));};function $(i,j){var t1=null;var u1=null;var v1=null;var w1=0;var x1=null;var y1=r.getColGranularity();var z1=0;var A1=y1[w1].iWidth;var B1=0;var C1=0;var D1=0;var E1=0;var F1=0;var G1=null;var H1=0;for(w1=0;w1<j;w1++){x1=r.getCell(i,w1);if(x1&&x1.isEntryEnabled()){u1=q(document.getElementById(x1.getId()));t1=q(document.getElementById(x1.getId()+"_cellLayoutDiv"));U.getWidthFromStyle(t1);if(y1&&y1.length>0){A1=y1[w1].iWidth;B1=parseInt(u1.css("padding-left"))||0;C1=parseInt(u1.css("padding-right"))||0;D1=parseInt(u1.css("border-left-width"))||0;E1=parseInt(u1.css("border-right-width"))||0;z1=A1-B1-C1-D1-E1;t1.css("width",z1+"px");F1=q(t1.find("td")[1]).outerWidth();G1=q(t1.find("td")[0]);B1=parseInt(G1.css("padding-left"))||0;C1=parseInt(G1.css("padding-right"))||0;v1=G1.find("#"+q.sap.encodeCSS(x1.getId()+"_contentDiv"));H1=z1-B1-C1-F1;v1.css("width",H1+"px");}}}}function _(){var j=r.getRenderColCnt();var t1=r.getRenderRowCnt();var u1=r.getRenderStartRow();var v1=r.getRowCnt();var w1=c.getNewLinesCnt();var x1=0;var i=0;if(c.isNewLinesTop()){if(u1<w1){for(x1=u1;x1<w1;x1++){$(x1,j);}}}else if(c.isNewLinesBottom()){var y1=(u1+t1)-(v1-w1);if(y1>0){var z1=u1+t1-1;for(i=0;i<y1;i++){$(z1,j);z1--;}}}}this.adjustRowHeights=function(j,t1){if(!t1.hasContent()||!j.hasContent()){return;}var u1=h.getElement(j.getId());var v1=h.getElement(t1.getId());j.calculateRowGranularity();t1.calculateRowGranularity();var w1=j.measureRowGranularityCells();var x1=t1.measureRowGranularityCells();var i=0;var y1;for(i=j.getRenderStartRow();i<w1.length;i++){y1=Math.max(w1[i]||0,x1[i]||0);w1[i]=y1;x1[i]=y1;}var z1=t1.isColHeaderArea()?t1.getLevelCells():null;var A1=j.applyRowHeightsToGranularityCells(w1,z1);A1=A1||t1.applyRowHeightsToGranularityCells(x1,z1);if(A1===true&&w&&w.bHasHScrollbar===true&&!c.getPropertyBag().isPixelScrolling()){if(p){c.setScrollInvalidate(A1);}}var B1=L(u1);var C1=L(v1);d1(j,u1,B1);d1(t1,v1,C1);u1.replaceWith(B1);v1.replaceWith(C1);u1=q(document.getElementById(j.getId()));v1=q(document.getElementById(t1.getId()));e1(j,u1);e1(t1,v1);if(F){a1(j);a1(t1);}h.addElement(j.getId(),q(document.getElementById(j.getId())));h.addElement(t1.getId(),q(document.getElementById(t1.getId())));};function a1(i){var j=i.getCellsWithLineBreakTexts();var t1=0;var u1=0;var v1=0;var w1=0;var x1=0;var y1=0;var z1=null;var A1=null;if(j){v1=i.getRenderStartRow();w1=v1+i.getRenderRowCnt()-1;x1=i.getRenderStartCol();y1=x1+i.getRenderColCnt()-1;for(t1=v1;t1<=w1;t1++){for(u1=x1;u1<=y1;u1++){z1=i.getCell(t1,u1);if(z1){z1=j[z1.getId()];if(z1){A1=q(document.getElementById(z1.getId()+"_contentDiv"));if(A1&&A1.length>0){A1.css("height",A1.outerHeight()+"px");}}}}}}}function b1(j,t1,u1,v1){var i=0;var w1=j.getColGranularity();var x1=null;var y1=null;var z1=null;var A1=null;var B1=0;for(i=0;i<w1.length;i++){x1=w1[i];if(x1){if(v1===true){if(!j.isFixedColWidthSet(x1.iCol)){continue;}}y1=t1.find("#"+q.sap.encodeCSS(x1.sId));z1=u1.find("#"+q.sap.encodeCSS(x1.sId));B1=i1(y1,x1.iWidth,j.getCell(x1.iRow,x1.iCol));var C1=sap.ui.getCore().getControl(x1.sId);if(C1.isEntryEnabled()&&j.isRowHeaderArea()){A1=q(z1.find("#"+q.sap.encodeCSS(x1.sId+"_cellLayoutDiv")));}else{A1=q(z1.find("#"+q.sap.encodeCSS(x1.sId+"_contentDiv")));}A1.width(B1);}}}function c1(j,t1,u1){var i=0;var v1=j.getColGranularity();var w1=null;var x1=null;var y1=null;var z1=0;var A1={};for(i=0;i<v1.length;i++){w1=v1[i];if(w1){if(u1===true){if(!j.isFixedColWidthSet(w1.iCol)){continue;}}x1=t1.find("#"+q.sap.encodeCSS(w1.sId));z1=x1.outerWidth();if(z1>w1.iWidth){if(!y1){y1=L(t1);}h1(j,t1,y1,w1,A1);}}}if(y1){t1.replaceWith(y1);}}function d1(j,t1,u1){var i=0;var v1=j.getRowGranularity();var w1=null;var x1=null;var y1=null;var z1=null;var A1=0;for(i=0;i<v1.length;i++){w1=v1[i];if(w1){x1=t1.find("#"+q.sap.encodeCSS(w1.sId));y1=u1.find("#"+q.sap.encodeCSS(w1.sId));z1=y1.parent();A1=j1(x1,w1.iHeight);z1.height(A1);}}}function e1(j,t1){var i=0;var u1=j.getRowGranularity();var v1=null;var w1=null;var x1=0;var y1=null;var z1={};for(i=0;i<u1.length;i++){v1=u1[i];if(v1){w1=t1.find("#"+q.sap.encodeCSS(v1.sId));var A1=w1.parent();x1=A1.outerHeight();if(x1>v1.iHeight){if(!y1){y1=L(t1);}g1(j,t1,y1,v1,z1);}}}if(y1){t1.replaceWith(y1);}}function f1(i,j){var t1=0;if(u){var u1=i.find("table");if(u1===null||u1.length===0){t1=k1(i,j);}}else{t1=k1(i,j);}return t1;}function g1(j,t1,u1,v1,w1){var x1=j.getRenderStartCol()+j.getRenderColCnt();var y1=0;var z1=null;var A1=0;var i=0;var B1=j.getCalculatedRowHeights();var C1=null;var D1=null;var E1=null;var F1=0;var G1=0;var H1;var I1;for(y1=j.getRenderStartCol();y1<x1;y1++){z1=j.getCellWithColSpan(v1.iRow,y1);if(!z1){z1=j.getCellWithRowSpan(v1.iRow,y1);if(z1&&(y1<v1.iCol)&&z1.getEffectiveRowSpan()>1){if(!w1[z1.getId()]){w1[z1.getId()]=z1;}else{z1=null;}}}if(z1){D1=t1.find("#"+q.sap.encodeCSS(z1.getId()));E1=u1.find("#"+q.sap.encodeCSS(z1.getId()));if(D1.length>0){A1=0;G1=u?z1.getHtmlIE8RowSpan():z1.getEffectiveRowSpan();H1=j.getRenderRowCnt()-(Math.max(z1.getRow(),j.getRenderStartRow())-j.getRenderStartRow());I1=Math.min(H1,G1);for(i=0;i<I1;i++){A1+=B1[v1.iRow+i]||0;}F1=f1(D1,A1);C1=q(E1.find("#"+q.sap.encodeCSS(z1.getId()+"_contentDiv")));C1.css("line-height",F1+"px");if(z1.getEffectiveRowSpan()>1){w1[z1.getId()]=z1;}}}}}function h1(j,t1,u1,v1,w1){var x1=0;var y1=null;var z1=null;var A1=null;var B1=null;var C1=0;var D1=0;var i=0;var E1=j.getCalculatedColWidths();var F1;var G1;var H1;var I1=j.getRenderStartRow()+j.getRenderRowCnt();for(x1=j.getRenderStartRow();x1<I1;x1++){y1=j.getCellWithRowSpan(x1,v1.iCol);if(!y1){y1=j.getCellWithColSpan(x1,v1.iCol);if(y1&&(x1<v1.iRow)&&y1.getEffectiveColSpan()>1){if(!w1[y1.getId()]){w1[y1.getId()]=y1;}else{y1=null;}}}if(y1){if(w1[y1.getId()]){continue;}z1=t1.find("#"+q.sap.encodeCSS(y1.getId()));A1=u1.find("#"+q.sap.encodeCSS(y1.getId()));if(z1.length>0){D1=0;F1=y1.getEffectiveColSpan();G1=j.getRenderColCnt()-(Math.max(y1.getCol(),j.getRenderStartCol())-j.getRenderStartCol());H1=Math.min(G1,F1);for(i=0;i<H1;i++){D1+=E1[v1.iCol+i]||0;}C1=i1(z1,D1,y1);if(y1.isEntryEnabled()&&j.isRowHeaderArea()){B1=q(A1.find("#"+q.sap.encodeCSS(y1.sId+"_cellLayoutDiv")));}else{B1=q(A1.find("#"+q.sap.encodeCSS(y1.getId()+"_contentDiv")));}B1.width(C1);if(y1.getEffectiveColSpan()>1){w1[y1.getId()]=y1;}}}}}function i1(i,j,t1){var u1=parseInt(i.css("padding-left"))||0;var v1=parseInt(i.css("padding-right"))||0;var w1=parseInt(i.css("border-left-width"))||0;var x1=parseInt(i.css("border-right-width"))||0;var y1=0;var z1=0;if(t1!==null&&t1.isEntryEnabled()){if(t1.isEntryEnabled()&&t1.getArea().isRowHeaderArea()){var A1=q(i.find("#"+q.sap.encodeCSS(t1.getId()+"_cellLayoutDiv")));}else{A1=i.find("#"+q.sap.encodeCSS(t1.getId()+"_contentDiv"));}y1=parseInt(A1.css("border-left-width"))||0;z1=parseInt(A1.css("border-right-width"))||0;}var B1=Math.max(1,j-u1-v1-w1-x1-y1-z1);return B1;}function j1(i,j){var t1=q(i).parent();var u1=parseInt(t1.css("border-top-width"),10)||0;var v1=parseInt(t1.css("border-bottom-width"),10)||0;var w1=j+u1+v1;return w1;}function k1(i,j){var t1=parseInt(i.css("padding-top"))||0;var u1=parseInt(i.css("padding-bottom"))||0;var v1=parseInt(i.css("border-top-width"))||0;var w1=parseInt(i.css("border-bottom-width"))||0;var x1=j-t1-u1-v1-w1;return x1;}this.determineHeaderScrollbarVisible=function(){if(w){var i=0;var j=null;var t1=null;var u1=false;if(d.getColCnt()>0){i=m.getAreaSize(d).iWidth;t1=q(document.getElementById(c.getId()+"_dimHeaderArea_container"));j=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}if(i===0){if(r.getColCnt()>0){i=m.getAreaSize(r).iWidth;t1=q(document.getElementById(c.getId()+"_rowHeaderArea_container"));j=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}}if(i>0){u1=(t1.outerWidth()>j.outerWidth());}w.bHasHHeaderScrollbar=u1;}if(!w||!w.bHasHHeaderScrollbar){c.setHeaderHScrolling(false);}};this.determineDefaultScrollbarsVisible=function(){w={};var i=m.getAreaSize(d);var j=m.calculateRenderSize();var t1=m.getRenderSizeDivSize(c);var u1=c.getContentWidth();var v1=c.getContentHeight();var w1=m.getBrowserScrollbarWidth();var x1=null;var y1=b.getRenderColCnt()===b.getColCnt();var z1=b.getRenderRowCnt()===b.getRowCnt();w.bHasHScrollbar=((j.iWidth>u1||!y1)&&t1.iWidth>i.iWidth);w.bHasVScrollbar=((j.iHeight>v1||!z1)&&t1.iHeight>i.iHeight);if(w.bHasHScrollbar&&!w.bHasVScrollbar){x1=m.getRenderSizeDivBorders();if(v1<=j.iHeight+w1+x1.borders.iBottomBorderWidth+x1.borders.iTopBorderWidth){w.bHasVScrollbar=true;}}else if(!w.bHasHScrollbar&&w.bHasVScrollbar){x1=m.getRenderSizeDivBorders();if(u1<=j.iWidth+w1+x1.borders.iRightBorderWidth+x1.borders.iLeftBorderWidth){w.bHasHScrollbar=true;}}};this.determineScrollbarsVisible=function(){this.determineDefaultScrollbarsVisible();this.determineHeaderScrollbarVisible();};this.setAdjustFrameDivs=function(i){x=i;};this.removeOuterDivBorders=function(){var i=q(q.sap.byId(c.getId()+"_renderSizeDiv"));i.css("border-bottom-width","");i.css("border-top-width","");i.css("border-left-width","");i.css("border-right-width","");};this.setDivSizeValidity=function(){y=!c.getRowHeaderArea().hasLoadingPages()&&!c.getColumnHeaderArea().hasLoadingPages();};this.calculateRenderSizeDivSize=function(){if(x||!y){var i=m.calculateRenderSize(true);var j=q(q.sap.byId(c.getId()+"_renderSizeDiv"));var t1=m.getRenderSizeDivBorders(j);if(z!==-1){t1.borders.iBottomBorderWidth=z;}var u1=c.getContentWidth()-t1.borders.iLeftBorderWidth-t1.borders.iRightBorderWidth;var v1=i.iWidth;j.width(Math.min(u1,v1)+"px");var w1=c.getContentHeight()-t1.borders.iBottomBorderWidth-t1.borders.iTopBorderWidth;var x1=i.iHeight;j.height(Math.min(w1,x1)+"px");}};this.adjustRenderSizeDivSize=function(){if(x||!y){var i=q(q.sap.byId(c.getId()+"_renderSizeDiv"));var j=m.getRenderSizeDivBorders(i);if(z!==-1){j.borders.iBottomBorderWidth=z;}var t1=m.getRenderSizeDivSize().iHeight;if(z!==-1){t1+=z;}var u1=m.getRenderSizeDivSize().iWidth;var v1=c.getContentHeight();if(w.bHasHScrollbar||w.bHasHHeaderScrollbar){v1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===R.RENDERMODE_COMPACT){var w1=(w.bHasHScrollbar||w.bHasHHeaderScrollbar)?m.getBrowserScrollbarWidth():0;var x1=c.getPropertyBag().getToolbarHeight();var y1=t1+w1+j.borders.iBottomBorderWidth+j.borders.iTopBorderWidth+x1;var z1=v1+w1+x1;if(z1>=y1){v1=y1;var t=h.getElement(c.getId());t.css("height",v1+"px");if(z===-1){z=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}}if(t1>=v1){if(z===-1){z=parseInt(i.css("border-bottom-width"),10);}i.css("border-bottom-width","0px");}var A1=Math.min(t1,v1);i.css("height",A1);var B1=c.getContentWidth();if(w.bHasVScrollbar){B1-=m.getBrowserScrollbarWidth();}if(c.getRenderMode()===R.RENDERMODE_COMPACT){var C1=w.bHasVScrollbar?m.getBrowserScrollbarWidth():0;var D1=u1+C1+j.borders.iLeftBorderWidth+j.borders.iRightBorderWidth;var E1=B1+C1;if(E1>=D1){B1=D1;t=h.getElement(c.getId());t.css("width",B1+"px");i.css("border-right-width","0px");}}if(u1>=B1){i.css("border-right-width","0px");}var F1=Math.min(u1,B1);i.css("width",F1);this.adjustGlassPaneSize();}};this.adjustGlassPaneSize=function(){var j=c.getGlassPane();var i=c.getRenderSizeDiv();j.css("width",i.outerWidth()+"px");j.css("height",i.outerHeight()+"px");};this.renderScrollbars=function(){this.determineScrollbarsVisible();if(w.bHasHScrollbar||w.bHasVScrollbar||w.bHasHHeaderScrollbar){if(!p){p=k.getScrollManager();}if(w.bHasHHeaderScrollbar){H=k.getHeaderScrollManager();}if(s){s.destroy();s=null;}s=new S(c,e,m,h);s.renderScrollbars(w);s.attachHandlers(p.hScrollHandler,p.vScrollHandler,w.bHasHHeaderScrollbar?H.hScrollHandler:null);l1();}else{p=null;}};function l1(){var i=0;for(i=0;i<n.length;i++){n[i]();}}this.setScrollbarSteps=function(){if(s){s.setScrollbarSteps();}};this.adjustScrollDivSizes=function(){var i=q.sap.byId(c.getId()+"_lowerLeft");var j=i.outerWidth();var t1=m.getRenderSizeDivSize();var u1=(t1.iWidth-j)+"px";var v1=q.sap.byId(c.getId()+"_lowerRight_scrollDiv");v1.width(u1);var w1=q.sap.byId(c.getId()+"_upperRight_scrollDiv");w1.width(u1);var x1=q.sap.byId(c.getId()+"_upperLeft");var y1=x1.outerHeight();if(!y1){var z1=q.sap.byId(c.getId()+"_upperRight");y1=z1.outerHeight();}var A1=(t1.iHeight-y1)+"px";v1.height(A1);var B1=q.sap.byId(c.getId()+"_lowerLeft_scrollDiv");B1.height(A1);};this.appendLeftCols=function(i,j){var t1=Math.max(0,i.getRenderStartCol()-j);var u1=Math.max(0,i.getRenderStartCol()-1);var v1=j;if(t1===u1){v1=1;}var w1=i.getRenderStartRow();var x1=w1+i.getRenderRowCnt()-1;var y1=null;var z1=0;var A1=0;var B1=0;var C1=q(document.getElementById(i.getId()));var D1=C1.children("tbody");if(D1.length===0){C1.append("<tbody></tbody>");D1=C1.children("tbody");for(B1=w1;B1<=x1;B1++){D1.append("<tr></tr>");}}var E1=D1.children("tr");for(B1=w1;B1<=x1;B1++){var F1=E1[z1];A1=0;for(var G1=t1;G1<=u1;G1++){if(A1===0){y1=i.getCellWithColSpan(B1,G1);}else{y1=i.getCell(B1,G1);}if(y1){var H1=y1.getColSpan();if(H1>1){var I1=y1.getEffectiveColSpan();var J1=Math.min(v1,(i.getRenderStartCol()-t1));var K1=I1-(J1-A1);if(K1>0){var L1=q(F1).find("> :first-child");L1.remove();}}e.renderControl(y1);}A1++;}var M1=q(q(E1[z1])).html();e.write(M1);e.flush(F1);z1++;}var N1=i.getRenderColCnt();var O1=u1-t1+1;i.setRenderColCnt(N1+O1);i.setRenderStartCol(t1);};this.appendTopRows=function(t1,u1){var v1=Math.max(0,t1.getRenderStartRow()-u1);var w1=Math.max(0,t1.getRenderStartRow()-1);var x1=u1;if(v1===w1){x1=1;}var y1=t1.getRenderStartCol();var z1=y1+t1.getRenderColCnt()-1;var A1=q(document.getElementById(t1.getId()));var B1=A1.children("tbody");if(B1.length===0){A1.append("<tbody></tbody>");B1=A1.children("tbody");}var C1=B1.html();var D1=[];var E1=0;var F1=null;if(!c.getPropertyBag().isDebugMode()){B1.hide();}for(var G1=v1;G1<=w1;G1++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");for(var H1=y1;H1<=z1;H1++){F1=null;if(E1===0){F1=t1.getCellWithRowSpan(G1,H1);}else{F1=t1.getCell(G1,H1);}if(F1){var I1=F1.getRowSpan();if(I1>1){var J1=F1.getEffectiveRowSpan();var K1=J1-(x1-E1);if(K1>0){D1.push(H1);}}e.renderControl(F1);}}e.write("</tr>");E1++;}var L1=[];if(D1.length>0){var M1=q(document.getElementById(t1.getId())).children("tbody").children("tr");var N1=q(M1[0]);var i=0;for(i=0;i<D1.length;i++){F1=N1.find("> :nth-child("+(D1[i]+1)+")");if(F1.length>0){var O1=F1.attr("id");L1.push(O1);}}for(var j=0;j<L1.length;j++){var P1=N1.find("#"+q.sap.encodeCSS(L1[j]));P1.remove();}e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");e.write(N1.html()+"</tr>");for(i=1;i<M1.length;i++){e.write("<tr");e.writeAttribute("class","sapzencrosstab-HeaderRow");e.write(">");e.write(q(M1[i]).html()+"</tr>");}}else{e.write(C1);}t1.setRenderStartRow(v1);t1.setRenderRowCnt(t1.getRenderRowCnt()+w1-v1+1);e.flush(B1[0]);B1.show();};function m1(i,j,t1){var u1=0;var v1=j.getScrollPosition();var w1={};w1.parameters={};w1.oSource=j;w1.parameters.oldScrollPos=v1;if(c.getPropertyBag().isPixelScrolling()||t1){u1=Math.max(0,Math.min(i,parseInt(j.getContentSize(),10)));w1.parameters.action="Drag";}else{u1=Math.max(0,Math.min(i,j.getSteps()));w1.parameters.action="STEP";}w1.getParameters=function(){return this.parameters;};w1.parameters.newScrollPos=u1;w1.parameters.forward=(u1-v1)>0;return w1;}this.scrollHorizontal=function(i){if(c.getHScrollbar()){var j=m1(i,c.getHScrollbar());c.getHScrollbar().setScrollPosition(j.getParameters().newScrollPos);p.hScrollHandler(j,true);}};this.scrollVertical=function(i,j){if(c.getVScrollbar()){var t1=m1(i,c.getVScrollbar());c.getVScrollbar().setScrollPosition(t1.getParameters().newScrollPos);var u1=false;if(!j){u1=true;}p.vScrollHandler(t1,u1);}};this.scrollHeaderHorizontal=function(i){var j=c.getHorizontalHeaderScrollbar();if(j){var t1=m1(i,j,true);j.setScrollPosition(t1.getParameters().newScrollPos);H.hScrollHandler(t1);}};this.getMeasuringHelper=function(){return m;};this.reset=function(i){k.reset();if(!i){k.clearSavedColWidths();}p=null;m.reset();if(s){s.destroy();s=null;}n=[];y=false;z=-1;};this.adjustScrollPositions=function(i){if(w.bHasHScrollbar||w.bHasVScrollbar){if(v&&c.getPropertyBag().isPixelScrolling()){var j=0;var t1=k.getSavedVScrollInfo();if(t1){var b=c.getDataArea();var u1=m.getAreaHeight(b);var v1=b.getRowCnt();var w1=Math.round(u1/v1);j=t1.iPos*w1;}p.setVScrollPos(j);}var x1=undefined;var y1=undefined;if(k){if(k.hasSavedInfo()){var z1=k.getSavedHScrollInfo();if(z1){x1=z1.bScrolledToEnd;}z1=k.getSavedVScrollInfo();if(z1){y1=z1.bScrolledToEnd;}}}p.moveScrollbars(w,i,x1,y1);v=false;}if(c.isHeaderHScrolling()===true){if(k&&k.hasSavedInfo()===true){H.setHScrollData(k.getHeaderScrollData());H.moveScrollbars();}}};this.hasCrosstabSizeChanged=function(){return m.hasCrosstabSizeChanged(true);};this.getTableDivValues=function(){return m.getTableDivBordersAndPadding();};function n1(){var t=c.getTableDiv();var i=o.getId();var j=r.getId();var t1=d.getId();var u1=b.getId();h.addElement(c.getId(),t);h.addElement(i,t.find("#"+q.sap.encodeCSS(i)));h.addElement(j,t.find("#"+q.sap.encodeCSS(j)));h.addElement(t1,t.find("#"+q.sap.encodeCSS(t1)));h.addElement(u1,t.find("#"+q.sap.encodeCSS(u1)));}this.showLoadingIndicator=function(){if(!l&&!I){l=setTimeout(o1,300);}else if(I){o1();}};function o1(){I=true;var t=h.getElement(c.getId());t.addClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+q.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));var j=parseInt(i.css("width"),10);var t1=parseInt(i.css("height"),10);var u1=m.getRenderSizeDivSize(c);var v1=u1.iWidth/2-j/2;var w1=u1.iHeight/2-t1/2;i.css("top",w1+"px");i.css("left",v1+"px");i.css("visibility","visible");}function p1(){if(l){clearTimeout(l);l="";}}this.hideLoadingIndicator=function(){p1();var t=h.getElement(c.getId());t.removeClass("sapzencrosstab-TableDivLoading");var i=t.find("#"+q.sap.encodeCSS(c.getId()+"_loadingAnimationDiv"));if(i&&i[0]){i.css("visibility","hidden");}I=false;};this.showLoadingVisualization=function(){if(b.hasLoadingPages()){this.showLoadingIndicator();}else{this.hideLoadingIndicator();}};this.moveScrollDivs=function(){if(p){if(w){if(w.bHasHScrollbar){p.positionHScrollDiv();}if(w.bHasVScrollbar){p.positionVScrollDiv();}}}};this.getCrossRequestManager=function(){return k;};this.registerNewScrollbarsNotification=function(i){if(q.inArray(i,n)===-1){n.push(i);}};this.checkScrollbarSize=function(){if(w.bHasVScrollbar){var i=q(document.getElementById(c.getId()+"_upperRightPad"));var j=null;if(c.hasDimensionHeaderArea()){j=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else if(c.hasColHeaderArea()){j=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}if(i!==null&&i.length>0&&j!==null&&j.length>0){var t1=j.outerHeight();if(t1!==i.outerHeight()){if(s){s.adjustVScrollbarHeight(t1);}}}}if(w.bHasHScrollbar){var u1=q(document.getElementById(c.getId()+"_lowerLeftPad"));var v1;if(c.hasRowHeaderArea()){v1=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}else{v1=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}var w1=v1.outerWidth();if(w1!==u1.outerWidth()){if(s){s.adjustHScrollbarWidth(w1);}}}};this.updateRenderingOfInputCellAfterCheck=function(i){var j=q(document.getElementById(i.getId()));if(j.length>0){var t1=C.getCompleteStyleName(R.STYLE_INVALID_VALUE,i.getCellType());if(i.hasStyle(R.STYLE_INVALID_VALUE)===true){j.addClass(t1);}else{j.removeClass(t1);}var u1=j.find("#"+q.sap.encodeCSS(i.getId()+"_contentDiv"));u1.html(i.getText());}};this.updateHeaderScrollbarSizes=function(){if(s){s.setHorizontalHeaderScrollbarSteps();s.adjustHorizontalHeaderScrollbarContainerSize();}};function q1(i,j){var t1=q(document.getElementById(c.getId()+i));if(t1.length>0){if(j===true){t1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").addClass("sapzencrosstab-removeRightBorder");}else{t1.find("tbody>tr[class=sapzencrosstab-HeaderRow]>td:last-child").removeClass("sapzencrosstab-removeRightBorder");}}}function r1(j,i){if(j&&j.length>0){j.addClass("sapzencrosstab-lowerScrollHeaderSeparator");q1("_rowHeaderArea",true);}if(i&&i.length>0){i.addClass("sapzencrosstab-upperScrollHeaderSeparator");q1("_dimHeaderArea",true);}}function s1(j,i){if(j&&j.length>0){j.removeClass("sapzencrosstab-lowerScrollHeaderSeparator");q1("_rowHeaderArea",false);}if(i&&i.length>0){i.removeClass("sapzencrosstab-upperScrollHeaderSeparator");q1("_dimHeaderArea",false);}}this.getLeftScrollDivs=function(){var j=null;var i=null;if(c.hasRowHeaderArea()){j=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}if(c.hasDimensionHeaderArea()){i=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}return{"oJqRowHeaderDiv":j,"oJqDimHeaderDiv":i};};this.determineUnrestrictedRightAreaWidth=function(){var i=0;var j;var t1;var u1=1;if(c.hasDimensionHeaderArea()){j=c.getDimensionHeaderArea();}else if(c.hasRowHeaderArea()){j=c.getRowHeaderArea();}if(j&&j.getRenderColCnt()>0){t1=c.getTableCellWithSpans(0,j.getRenderColCnt()-1);if(t1){u1=parseInt(q(document.getElementById(t1.getId())).css("border-right-width"),10);}}if(b){b.saveData();}if(o){o.saveData();}this.renderRightAreas(true);this.determineDefaultScrollbarsVisible();i=this.getRightAreaContainerWidth()+(w.bHasVScrollbar?m.getBrowserScrollbarWidth():0)+u1;if(b){q(document.getElementById(b.getId())).find("tbody").empty();b.restoreData();}if(o){q(document.getElementById(o.getId())).find("tbody").empty();o.restoreData();}return i;};this.calculateLeftAreaHeaderWidth=function(i,j,t1){var u1=0;var v1=c.getPropertyBag().getMaxHeaderWidth();var w1=c.getPropertyBag().getUserHeaderWidth();var x1;var y1=Math.round(i/2.0);if(v1>0){if(w1>0){u1=Math.min(v1,w1);}else{u1=Math.min(v1,j);}}else{u1=w1;}if(u1>=i){u1=0;}if(u1>=j){u1=0;}if(j+t1>i){if(this.hasRightArea()){if(u1===0){if(t1<=y1){x1=c.getRenderSizeDiv();u1=i-t1-parseInt(x1.css("border-right-width"),10)-parseInt(x1.css("border-left-width"),10)-1;}else if(j<=y1){u1=j;}else{u1=y1;}}}else{u1=i;}}else{u1=0;}u1=this.limitHeaderWidth(u1);return u1;};this.enableHeaderResizeHandle=function(i){var j;j=q(document.getElementById(c.getId()+"_headerResizeHandle"));if(j&&j.length>0){j.css("visibility",i?"visible":"hidden");}};this.forceHeaderWidth=function(){var j=null;var i=null;var t1=0;var u1=0;var v1=0;var w1=0;var x1=null;if(c.hasRowHeaderArea()===false&&c.hasDimensionHeaderArea()===false){return;}x1=this.getLeftScrollDivs();j=x1.oJqRowHeaderDiv;i=x1.oJqDimHeaderDiv;t1=this.getLeftAreaContainerWidth();if(this.hasRightArea()){u1=this.determineUnrestrictedRightAreaWidth();}w1=c.getContentWidth();v1=this.calculateLeftAreaHeaderWidth(w1,t1,u1);if(v1>0){this.setDivWidth(j,v1);this.setDivWidth(i,v1);c.setHeaderHScrolling(true);E=v1;r1(j,i);this.enableHeaderResizeHandle(true);}else{c.setHorizontalHeaderScrollbar(null);c.setHeaderHScrolling(false);E=0;s1(j,i);this.enableHeaderResizeHandle(false);c.getUtils().sendClientScrollPosUpdate(0,undefined,undefined,undefined,true);c.getPropertyBag().setUserHeaderWidth(0);this.sendHeaderLimit("N0",true);}};this.hasRightArea=function(){return c.hasDataArea()||c.hasColHeaderArea();};this.hasLeftArea=function(){return c.hasDimensionHeaderArea()||c.hasRowHeaderArea();};this.getLeftAreaContainerWidth=function(){var i=0;var j=null;if(c.hasDimensionHeaderArea()===true){j=q(document.getElementById(c.getId()+"_dimHeaderArea_container"));i=j.outerWidth();}else if(c.hasRowHeaderArea()===true){j=q(document.getElementById(c.getId()+"_rowHeaderArea_container"));i=j.outerWidth();}return i;};this.getRightAreaContainerWidth=function(){var i=0;var j=null;if(c.hasColHeaderArea()===true){j=q(document.getElementById(c.getId()+"_colHeaderArea_container"));i=j.outerWidth();}else if(c.hasDataArea()===true){j=q(document.getElementById(c.getId()+"_dataArea_container"));i=j.outerWidth();}return i;};this.getSectionWidth=function(){var i=this.getLeftAreaContainerWidth();var j=this.getRightAreaContainerWidth();var t1=null;var u1=null;var v1=0;var w1=0;if(c.hasDimensionHeaderArea()){t1=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else if(c.hasRowHeaderArea()){t1=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}v1=U.getWidthOfMarginBorderPadding(t1);if(c.hasColHeaderArea()){u1=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}else if(c.hasDataArea()){u1=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));}w1=U.getWidthOfMarginBorderPadding(u1);var x1=i+j+v1+w1;return x1;};this.updateHeaderResizeDiv=function(){var j=q(document.getElementById(c.getId()+"_headerResizeHandle"));var i=0;var t1=c.getPropertyBag().getMaxHeaderWidth();if(j&&j.length>0){i=E;if(isNaN(i)||!i){if(t1>0){i=Math.min(i,t1);}var u1=this.getLeftAreaContainerWidth();var v1=q(document.getElementById(c.getId()+"_renderSizeDiv")).outerWidth();var w1=j.outerWidth();i=(u1<=v1)?(u1):(v1-w1);}if(c.getPropertyBag().isRtl()){j.css("right",i+"px");}else{j.css("left",i+"px");}}};this.getIntHeaderLimit=function(i){var j;var t1;if(i.indexOf("N")===0){t1=i.substring(1);}else{t1=i;}j=parseInt(t1,10);return j;};this.sendHeaderLimit=function(i,j){var t1=c.getUserHeaderWidthCommand();var u1=0;u1=this.getIntHeaderLimit(i);if(B===u1){return;}if(t1&&t1.length>0){B=u1;k.saveColWidths();t1=t1.replace("__HEADER_WIDTH__",i);c.getUtils().executeCommandAction(t1,j);}};this.getHeaderScrollManager=function(){return H;};this.limitHeaderWidth=function(i){var j=c.getPropertyBag().getMaxHeaderWidth();var t1=0;if(j>0&&i>0){t1=Math.min(j,i);}else{t1=i;}return t1;};this.setDivWidth=function(j,i){var t1="";if(j&&j.length>0){if(!i){t1="100%";}else{t1=i+"px";}j.css("width",t1);}};this.renderLeftAreas=function(){this.renderDimensionHeaderArea();this.setUserColWidths(c.getDimensionHeaderArea());this.renderRowHeaderArea(c.getRowHeaderArea().getRenderStartRow());this.setUserColWidths(c.getRowHeaderArea());this.adjustColWidths(c.getDimensionHeaderArea(),c.getRowHeaderArea());};this.renderRightAreas=function(i){var j=o.getRenderStartCol();if(i===true){j=0;}this.renderColHeaderArea(j,i);this.setUserColWidths(c.getColumnHeaderArea());this.renderDataArea();this.setUserColWidths(c.getDataArea());this.adjustColWidths(c.getColumnHeaderArea(),c.getDataArea());};this.renderCrosstabAreas=function(){var i=c.isHeaderScrollingConfigured();this.renderLeftAreas();if(i===true&&!c.isPreparedDom()){this.forceHeaderWidth();}this.renderRightAreas();this.adjustRowHeights(c.getDimensionHeaderArea(),c.getColumnHeaderArea());this.adjustRowHeights(c.getRowHeaderArea(),c.getDataArea());};this.getScrollManager=function(){return p;};this.getScrollbarVisibility=function(){return w;};};
return sap.zen.crosstab.rendering.RenderEngine;});
sap.ui.predefine('sap/zen/crosstab/rendering/RenderingConstants',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.rendering.RenderingConstants");sap.zen.crosstab.rendering.RenderingConstants={TYPE_DATA_AREA:"DataArea",TYPE_DIMENSION_HEADER_AREA:"DimensionHeaderArea",TYPE_COLUMN_HEADER_AREA:"ColumnHeaderArea",TYPE_ROW_HEADER_AREA:"RowHeaderArea",ROW_AXIS:"ROW",COL_AXIS:"COL",DATA_AXIS:"DATA",TYPE_HEADER_CELL:"HEADER_CELL",TYPE_DATA_CELL:"DATA_CELL",STYLE_PREFIX_DATA_CELL:"sapzencrosstab-DataCell",STYLE_PREFIX_HEADER_CELL:"sapzencrosstab-HeaderCell",STYLE_TOTAL:"Total",STYLE_ALTERNATING:"Alternating",STYLE_FIRST_IN_ROW:"FirstInRow",STYLE_LAST_IN_ROW:"LastInRow",STYLE_FIRST_IN_COL:"FirstInCol",STYLE_LAST_IN_COL:"LastInCol",STYLE_HEADER_CELL:"Default",STYLE_DATA_CELL:"Default",STYLE_HEADER_CELL_COZY:"Cozy",STYLE_DATA_CELL_COZY:"Cozy",STYLE_LOADING:"Loading",STYLE_HIGHLIGHTED:"Highlighted",STYLE_EMPHASIZED:"Emphasized",STYLE_DATA_ENTRY_ENABLED:"EntryEnabled",STYLE_INVALID_VALUE:"InvalidValue",STYLE_NEW_VALUE:"NewValue",STYLE_LOCKED:"Locked",ALERT_TYPE_BACKGROUND:2,ALERT_TYPE_FONT_COLOR:4,ALERT_TYPE_STATUS_SYMBOL:8,ALERT_TYPE_TREND_ASCENDING_SYMBOL:16,ALERT_TYPE_TREND_DESCENDING_SYMBOL:32,ALERT_TYPE_TREND_GREY_SYMBOL:64,RENDERMODE_FILL:0,RENDERMODE_COMPACT:1,PASSIVE_CELL_TYPE_NORMAL:"NORMAL",PASSIVE_CELL_TYPE_NEWLINE_HEADER:"NHC",PASSIVE_CELL_TYPE_NEWLINE_DATA:"NDC",TABINDEX:"0",ZEBRA_FULL:"FULL",ZEBRA_DATA:"DATA",ZEBRA_OFF:"OFF",};return sap.zen.crosstab.rendering.RenderingConstants;});
sap.ui.predefine('sap/zen/crosstab/rendering/ScrollManager',["jquery.sap.global","sap/zen/crosstab/utils/Measuring","sap/ui/core/Popup","sap/ui/core/OpenState","sap/zen/crosstab/TextConstants","sap/zen/crosstab/utils/Utils"],function(q,M,P,O,T,U){"use strict";q.sap.declare("sap.zen.crosstab.rendering.ScrollManager");
sap.zen.crosstab.rendering.ScrollManager=function(c,r){"use strict";var C=c.getColumnHeaderArea();var R=c.getRowHeaderArea();var d=c.getDimensionHeaderArea();var D=c.getDataArea();var m=r.getMeasuringHelper();var i=0;var a=0;var h=false;var v=false;var V=0;var l=null;var H=null;var L=null;var o=null;var p=new sap.ui.core.Popup();var t=null;if(U.isMainMode()){t=new sap.m.Text();}else{t=new sap.ui.commons.TextView();t.setWrapping(false);}p.setContent(t);p.setDurations(125,500);p.setAutoClose(true);p.getContent().addStyleClass("sapzencrosstab-ScrollPopup");var b=(D.getRowCnt()+"").length;var e=(D.getColCnt()+"").length;var f=0;var g=0;var B=false;var j=false;var k=this;this.destroy=function(){p.destroy();};this.setHScrollPos=function(Q){a=Q;};this.setVScrollPos=function(Q){i=Q;};function n(Q){var S=0;if(Q){S=q(document.getElementById(Q.getId())).children("tbody").children("tr").length;}return S;}function s(){var Q=n(R);var S=n(D);var W=Q-S;if(W>0){r.beginRendering();r.appendTopRows(D,W);R.setRenderStartRow(D.getRenderStartRow());R.setRenderRowCnt(D.getRenderRowCnt());r.adjustColWidths(d,R);r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.finishRendering(true);}}function u(Q){c.getPageManager().enableTimeout(true);H=null;var S=null;if(!Q){S=l;}else{S=Q.getParameters();}if(S){c.postPlanningValue();var W=c.getHScrollbar();var X=W.getSteps();h=S.newScrollPos===X;a=S.newScrollPos;k.sendClientScrollPosUpdate();var Y=S.newScrollPos;if(Y!==C.getRenderStartCol()){if(Y!==C.getColCnt()){r.beginRendering();r.renderColHeaderArea(Y);r.renderDataArea();r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.adjustRowHeights(d,C);r.finishRendering(true);}var Z=m.getAreaWidth(C);var $=m.getUpperRightScrollDivWidth();var _=Z<$;var a1=C.getRenderColCnt()+C.getRenderStartCol()===C.getColCnt();if(h||_&&a1){if(_&&Y>0){r.beginRendering();r.appendLeftCols(C,4);r.appendLeftCols(D,4);r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.adjustRowHeights(d,C);r.finishRendering(true);}if(!h&&S.forward){w(0,true);}x(true);}else{x(false);}}else{if(h){x(true);}}if(v){s();N(true);}if(S.newScrollPos===0){x(false);}}p.close();if(c.isScrollInvalidate()===true&&!c.hasLoadingPages()){c.setInvalidateCalledByScrolling();c.invalidate();}}this.hScrollHandler=function(Q,S){if(!B){if(S){u(Q);}else{l=Q.getParameters();if(H){clearTimeout(H);H=null;y(l.newScrollPos);}H=setTimeout(u,200,null);a=l.newScrollPos;}}else{B=false;}};function w(S,Q){var W=c.getHScrollbar();var X=W.getScrollPosition();var Y;if(Q){S=W.getSteps();if(c.getPropertyBag().isRtl()&&c.getUtils().isMozilla()){W.setScrollPosition(0);W.setScrollPosition(S);}h=true;}if(X!==S){W.setScrollPosition(S);B=true;}a=S;Y=c.getRenderEngine().getCrossRequestManager();if(Y){Y.setHScrollInfo(a,h);}}function x(S){k.positionHScrollDiv(S);}this.positionHScrollDiv=function(S){var Q=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));var W=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));var X;if(typeof(S)==="undefined"){S=h;}if(c.getPropertyBag().isRtl()){if(q.browser.webkit){X=S?0:W[0].scrollWidth;}else if(c.getUtils().isMozilla()){X=S?-W[0].scrollWidth:0;}else{X=S?W[0].scrollWidth:0;}}else{X=S?W[0].scrollWidth:0;}W.scrollLeft(X);Q.scrollLeft(X);};this.vScrollHandler=function(Q,S){if(!j){if(S){I(Q);}else{L=Q.getParameters();if(o){clearTimeout(o);o=null;A(L.newScrollPos);}o=setTimeout(I,200,null);i=L.newScrollPos;}}else{j=false;}};this.sendClientScrollPosUpdate=function(){c.getUtils().sendClientScrollPosUpdate(a,h,i,v);};function y(S){var C=c.getColumnHeaderArea();var Q=null;var W=[];for(var X=0;X<1;X++){Q=C.getCellWithColSpan(X,S,true);if(Q){W.push(Q.getUnescapedText());}else{W.push("?");}}var Y=c.getPropertyBag().getText(T.COL_TEXT_KEY)+" "+U.padWithZeroes(S+1,e)+"/"+C.getColCnt();if(!g){if(U.isMainMode()){p.getContent().setWrapping(false);}z(Y);if(U.isMainMode()){g=q(document.getElementById(p.getContent().getId())).outerWidth();}else{g=q(document.getElementById(p.getContent().getId())).innerWidth();}}if(U.isMainMode()){p.getContent().setMaxLines(W.length+1);p.getContent().setWrapping(true);}Y=Y+"\n"+W.join("\n");z(Y);}function z(Q){p.getContent().setProperty("text",Q,true);var S=P.Dock;if(g){p.getContent().setWidth(g+"px");}var W=c.getHScrollbar();var X=m.getRenderSizeDivSize().iWidth-m.getAreaWidth(c.getRowHeaderArea());var Y=q(document.getElementById(p.getContent().getId())).outerWidth();X=X-Y;var Z=W.getScrollPosition()/W.getSteps();var $=(X*Z)+" ";p.setPosition(S.BeginBottom,S.BeginTop,document.getElementById(c.getHScrollbar().getId()),$+"-20");if(p.getOpenState()===sap.ui.core.OpenState.CLOSED){p.open(-1);}p.getContent().rerender();}function A(S){var R=c.getRowHeaderArea();var Q=null;var W=[];for(var X=0;X<1;X++){Q=R.getCellWithRowSpan(S,X,true);if(Q){W.push(Q.getUnescapedText());}else{W.push("?");}}var Y=c.getPropertyBag().getText(T.ROW_TEXT_KEY)+" "+U.padWithZeroes(S+1,b)+"/"+R.getRowCnt();if(!f){if(U.isMainMode()){p.getContent().setWrapping(false);}E(Y);if(U.isMainMode()){f=q(document.getElementById(p.getContent().getId())).outerWidth();}else{f=q(document.getElementById(p.getContent().getId())).innerWidth();}}Y=Y+"\n"+W.join("\n");if(U.isMainMode()){p.getContent().setMaxLines(W.length+1);p.getContent().setWrapping(true);}E(Y);}function E(Q){p.getContent().setProperty("text",Q,true);var S=sap.ui.core.Popup.Dock;var W=c.getVScrollbar();var X=m.getRenderSizeDivSize().iHeight-m.getAreaHeight(c.getColumnHeaderArea());var Y=q(document.getElementById(p.getContent().getId())).outerHeight();X=X-Y;var Z=W.getScrollPosition()/W.getSteps();var $=" "+(X*Z);p.setPosition(S.EndTop,S.BeginTop,document.getElementById(c.getVScrollbar().getId()),"-20"+$);if(f){p.getContent().setWidth(f+"px");}if(p.getOpenState()===sap.ui.core.OpenState.CLOSED){p.open(-1);}p.getContent().rerender();}function F(Q){var S="";var W=1;var X=0;q(document.getElementById(Q.getId())).children("tbody").children("tr:last").children("td").each(function(Y,Z){S=q(Z).attr("colspan");if(!S){W=1;}else{W=parseInt(S,10);}X=X+W;});return X;}function G(){var Q=F(C);var S=F(D);var W=Q-S;if(W>0){r.beginRendering();r.appendLeftCols(D,W);C.setRenderStartCol(D.getRenderStartCol());C.setRenderColCnt(D.getRenderColCnt());r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.adjustRowHeights(d,C);r.finishRendering(true);}}function I(Q){c.getPageManager().enableTimeout(true);o=null;var S=null;if(!Q){S=L;}else{S=Q.getParameters();}if(S){c.postPlanningValue();var W=c.getVScrollbar();var X=W.getSteps();v=S.newScrollPos===X;i=S.newScrollPos;k.sendClientScrollPosUpdate();var Y=S.newScrollPos;if(Y!==R.getRenderStartRow()){if(Y!==R.getRowCnt()){r.beginRendering();r.renderRowHeaderArea(Y);r.renderDataArea();r.adjustColWidths(d,R);r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.finishRendering(true);}var Z=m.getAreaHeight(R);var $=m.getLowerScrollDivHeight();var _=Z<$;var a1=R.getRenderRowCnt()+R.getRenderStartRow()===R.getRowCnt();if(v||_&&a1){if(_&&Y>0){r.beginRendering();r.appendTopRows(R,2);r.appendTopRows(D,2);r.adjustColWidths(d,R);r.adjustColWidths(C,D);r.adjustRowHeights(R,D);r.finishRendering(true);}if(!v&&S.forward){K(0,true);}N(true);}else{N(false);}}else{if(v){N(true);}}if(S.newScrollPos===0){N(false);}if(h){G();x(true);}}p.close();J();}function J(){var Q=c.getRenderEngine().getHeaderScrollManager();if(Q){Q.moveScrollbars();}}function K(S,Q){var W=c.getVScrollbar();var X=W.getScrollPosition();var Y;if(Q){S=W.getSteps();v=true;}if(X!==S){W.setScrollPosition(S);j=true;}i=S;Y=c.getRenderEngine().getCrossRequestManager();if(Y){Y.setVScrollInfo(i,v);}}function N(S){k.positionVScrollDiv(S);}this.positionVScrollDiv=function(S){var Q=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));var W=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));if(typeof(S)==="undefined"){S=v;}V=S?Q[0].scrollHeight:0;Q.scrollTop(V);W.scrollTop(V);};this.moveScrollbars=function(S,Q,W,X){var Y=c.getHScrollbar();if(Y){if(W!==undefined){h=W;}else{h=(Y.getSteps()<=a)&&(C.getRenderStartCol()+C.getRenderColCnt()>=C.getColCnt());}if(h){x(true);w(0,true);}else{w(a,false);}}var Z=c.getVScrollbar();if(Z){if(X!==undefined){v=X;}else{v=(Z.getSteps()<=i)&&(R.getRenderStartRow()+R.getRenderRowCnt()>=R.getRowCnt());}if(v){K(0,true);N(true);}else{K(i,false);}}};this.commandHScrolledToEnd=function(){h=true;};this.commandVScrolledToEnd=function(){v=true;};this.isVScrolledToEnd=function(){return v;};this.isHScrolledToEnd=function(){return h;};this.setVScrolledToEnd=function(Q){v=Q;};this.setHScrolledToEnd=function(Q){h=Q;};};
return sap.zen.crosstab.rendering.ScrollManager;});
sap.ui.predefine('sap/zen/crosstab/rendering/ScrollbarRenderer',["jquery.sap.global","sap/zen/crosstab/utils/Measuring","sap/zen/crosstab/utils/Utils"],function(q,M,U){"use strict";q.sap.declare("sap.zen.crosstab.rendering.ScrollbarRenderer");
sap.zen.crosstab.rendering.ScrollbarRenderer=function(c,r,m,d){var s=0;var h=false;var v=false;var H=false;var o=null;var V=null;var a=null;var i=c.getPropertyBag().isPixelScrolling();function w(e){r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_upperRightPad");r.writeAttribute("class","sapzencrosstab-UpperRightScrollPad");r.addStyle("width",s+"px");r.addStyle("height",e+"px");r.writeStyles();r.write(">");r.write("</div>");}function b(S,e){var A=null;var I=0;var B=0;if(!c.getVScrollbar()){A=new sap.ui.core.ScrollBar();c.setVScrollbar(A);}A=c.getVScrollbar();A.setVertical(true);if(H===true&&!h){I=q(document.getElementById(c.getId()+"_renderSizeDiv")).outerHeight()-s;}else{I=S;}B=I-e;A.setSize(B+"px");r.renderControl(A);}function f(){r.write("<td");r.writeAttribute("class","sapzencrosstab-VScrollCell");r.write(">");}function g(S){var e=m.getUpperScrollDivHeight();r.write("<table");r.writeAttributeEscaped("id",c.getId()+"_vScrollTab");r.writeAttribute("class","sapzencrosstab-VScrollTable");r.write(">");r.write("<tr>");f();w(e);r.write("</td>");r.write("</tr>");r.write("<tr>");f();b(S,e);r.write("</td>");r.write("</tr>");r.write("</table>");}function j(){r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_vScrollDiv");r.addStyle("position","absolute");r.addStyle("top","0px");r.addStyle(c.getPropertyBag().isRtl()?"left":"right","0px");r.addStyle("width",s+"px");var e=m.getRenderSizeDivSize().iHeight;if(h){e=Math.min(c.getContentHeight()-s,e);}r.addStyle("height",e+"px");r.writeStyles();r.write(">");g(e);r.write("</div>");}function k(){var W=0;var D=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));var e=c.getUtils();var P=c.getPropertyBag();if(D.length>0){W=e.isMsIE()||(P.isRtl()&&e.isMozilla())?D.width():D.outerWidth();}if(W===0){D=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));W=e.isMsIE()||(P.isRtl()&&e.isMozilla())?D.width():D.outerWidth();}return W;}function l(L){if(!H){r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_lowerLeftPad");r.writeAttribute("class","sapzencrosstab-LowerLeftScrollPad");r.addStyle("width",L+"px");r.addStyle("height",s+"px");r.writeStyles();r.write(">");r.write("</div>");}else{var e=null;if(!c.getHorizontalHeaderScrollbar()){e=new sap.ui.core.ScrollBar();c.setHorizontalHeaderScrollbar(e);}e=c.getHorizontalHeaderScrollbar();e.setVertical(false);var A=k();e.setSize(A+"px");r.renderControl(e);}}function n(H){if(H===true){r.write("<td");r.writeAttributeEscaped("id",c.getId()+"_hScrollTableCell");r.writeAttribute("class","sapzencrosstab-HScrollCell sapzencrosstab-HScrollCellWithHeaderScrollRightBorder");}else{r.write("<td");r.writeAttribute("class","sapzencrosstab-HScrollCell");}r.write(">");}function p(){r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_lowerRightPad");r.writeAttribute("class","sapzencrosstab-LowerRightScrollPad");r.addStyle("width",s+"px");r.addStyle("height",s+"px");r.writeStyles();r.write(">");r.write("</div>");}function t(S,L){if(h===true){var e=null;if(!c.getHScrollbar()){e=new sap.ui.core.ScrollBar();c.setHScrollbar(e);}e=c.getHScrollbar();e.setVertical(false);e.setSize((S-L-(v?s:0))+"px");r.renderControl(e);}else{r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_lowerMiddlePad");r.writeAttribute("class","sapzencrosstab-LowerMiddleScrollPad");r.addStyle("width",(S-L-(v?s:0))+"px");r.addStyle("height",s+"px");r.writeStyles();r.write(">");r.write("</div>");}}function u(){var D=q(document.getElementById(c.getId()+"_lowerLeft"));var L=D.outerWidth();r.write("<table");r.writeAttributeEscaped("id",c.getId()+"_hScrollTab");r.writeAttribute("class","sapzencrosstab-HScrollTable");r.write(">");r.write("<tr>");n(H);l(L);r.write("</td>");var S=c.getContentWidth();n();t(S,L);r.write("</td>");if(v){n();p();r.write("</td>");}r.write("</tr>");r.write("</table>");}function x(){r.write("<div");r.writeAttributeEscaped("id",c.getId()+"_hScrollDiv");r.addStyle("position","absolute");var T=c.getPropertyBag().getToolbarHeight();r.addStyle("bottom",T+"px");r.addStyle("height",s+"px");var W=c.getContentWidth();r.addStyle("width",W+"px");r.addStyle("height",s+"px");r.writeStyles();r.write(">");u(W);r.write("</div>");}this.renderScrollbars=function(S){h=S.bHasHScrollbar;v=S.bHasVScrollbar;H=S.bHasHHeaderScrollbar;if(h||v||H){s=m.getBrowserScrollbarWidth();if(s===0){if(v){var e=new sap.ui.core.ScrollBar();c.setVScrollbar(e);}if(h){var A=new sap.ui.core.ScrollBar();c.setHScrollbar(A);}if(H){var B=new sap.ui.core.ScrollBar();c.setHorizontalHeaderScrollbar(B);}}else{var T=d.getElement(c.getId());var I=T.html();if(v){j();}if(h||H){x();}r.write(I);r.flush(T[0]);}}};this.attachHandlers=function(e,A,B){this.detachHandlers();o=e;V=A;a=B;if(o&&c.getHScrollbar()){c.getHScrollbar().attachScroll(o);c.getHScrollbar().attachBrowserEvent("mousedown touchstart",U.cancelEvent);}if(V&&c.getVScrollbar()){c.getVScrollbar().attachScroll(V);c.getVScrollbar().attachBrowserEvent("mousedown touchstart",U.cancelEvent);this.attachMouseWheelHandler();}if(a&&c.getHorizontalHeaderScrollbar()){c.getHorizontalHeaderScrollbar().attachScroll(a);c.getHorizontalHeaderScrollbar().attachBrowserEvent("mousedown touchstart",U.cancelEvent);}};this.attachMouseWheelHandler=function(){if(!c.getPropertyBag().isMobileMode()){var T=c.getTableDiv();if(/Firefox/i.test(window.navigator.userAgent)){T[0].addEventListener("DOMMouseScroll",this.vScrollMouseWheelFireFox);}else{T.on("mousewheel",this.vScrollMouseWheel);}}};this.detachMouseWheelHandler=function(){if(!c.getPropertyBag().isMobileMode()){var T=c.getTableDiv();if(/Firefox/i.test(window.navigator.userAgent)){T[0].removeEventListener("DOMMouseScroll",this.vScrollMouseWheelFireFox);}else{T.off("mousewheel",this.vScrollMouseWheel);}}};function y(e){return e&&e/Math.abs(e);}this.vScrollMouseWheelFireFox=function(e){var F=y(e.detail);z(e,F);};this.vScrollMouseWheel=function(e){var F=-y(e.originalEvent.wheelDelta);z(e,F);};function z(e,F){if(c.hasLoadingPages()===false){var S=0;var A=0;if(i===true){S=120;A=parseInt(c.getVScrollbar().getContentSize(),10);}else{S=3;A=c.getVScrollbar().getSteps();}var N=c.getVScrollPos()+F*S;N=Math.max(0,N);N=Math.min(N,A);c.getRenderEngine().scrollVertical(N,true);}U.cancelEvent(e);}this.detachHandlers=function(){if(o&&c.getHScrollbar()){c.getHScrollbar().detachScroll(o);c.getHScrollbar().detachBrowserEvent("mousedown touchstart",U.cancelEvent);}if(V&&c.getVScrollbar()){c.getVScrollbar().detachScroll(V);c.getVScrollbar().detachBrowserEvent("mousedown touchstart",U.cancelEvent);this.detachMouseWheelHandler();}if(a&&c.getHorizontalHeaderScrollbar()){c.getHorizontalHeaderScrollbar().detachScroll(a);c.getHorizontalHeaderScrollbar().detachBrowserEvent("mousedown touchstart",U.cancelEvent);}o=null;V=null;a=null;};this.destroy=function(){this.detachHandlers();s=0;h=false;v=false;o=null;V=null;};this.setScrollbarSteps=function(){if(c.getPropertyBag().isPixelScrolling()){this.setScrollbarStepsInPixelMode();}else{this.setScrollbarStepsInStepMode();}if(H){this.setHorizontalHeaderScrollbarSteps();}};this.setHorizontalHeaderScrollbarSteps=function(){var e=c.getHorizontalHeaderScrollbar();if(e){var D=null;if(c.hasDimensionHeaderArea()){D=c.getId()+"_dimHeaderArea_container";}else if(c.hasRowHeaderArea()){D=c.getId()+"_rowHeaderArea_container";}if(D){var J=q(document.getElementById(D));e.setContentSize(J.outerWidth()+"px");e.rerender();}}};this.adjustHorizontalHeaderScrollbarContainerSize=function(){var e=c.getHorizontalHeaderScrollbar();if(e){var T=q(document.getElementById(c.getId()+"_hScrollTableCell"));if(T.length>0){var W=parseInt(T.css("border-right-width"),10)+parseInt(T.css("border-left-width"),10);e.setSize((parseInt(e.getSize(),10)-W)+"px");e.rerender();}}};this.setScrollbarStepsInPixelMode=function(){var e=c.getVScrollbar();var A=c.getHScrollbar();var D=q(document.getElementById(c.getId()+"_dataArea_container"));if(e){var B=0;if(!c.hasDataArea()){var C=q(document.getElementById(c.getId()+"_rowHeaderArea_container"));B=C.outerHeight();}else{B=D.outerHeight();}e.setContentSize(B+"px");e.rerender();}if(A){var W=0;if(!c.hasDataArea()){var E=q(document.getElementById(c.getId()+"_colHeaderArea_container"));W=E.outerWidth();}else{W=D.outerWidth();}A.setContentSize(W+"px");A.rerender();}};this.setScrollbarStepsInStepMode=function(){var R=m.getRenderSizeDivSize();var D=c.getDataArea();var e=c.getVScrollbar();var A=c.getHScrollbar();if(e){var C=m.getAreaHeight(c.getColumnHeaderArea());var B=R.iHeight-C;var E=D.getRenderStartRow();var F=E+D.getRenderRowCnt();var G=1;for(var I=E;I<F;I++){B-=D.getRowHeight(I);if(B<0){break;}G++;}e.setSteps(Math.max(1,D.getRowCnt()-G));e.rerender();}if(A){var J=m.getAreaWidth(c.getRowHeaderArea());var K=R.iWidth-J;var L=D.getRenderStartCol();var N=L+D.getRenderColCnt();var O=1;for(var P=L;P<N;P++){K-=D.getColWidth(P);if(K<0){break;}O++;}A.setSteps(Math.max(1,D.getColCnt()-O));A.rerender();}};this.adjustHScrollbarWidth=function(S){var D=q(document.getElementById(c.getId()+"_lowerLeftPad"));var e=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));D.width(S);var A=c.getHScrollbar();A.setSize(e.outerWidth()+"px");A.rerender();};this.adjustVScrollbarHeight=function(S){var D=q(document.getElementById(c.getId()+"_upperRightPad"));var e=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));D.height(S);var A=c.getVScrollbar();A.setSize(e.outerHeight()+"px");A.rerender();};};
return sap.zen.crosstab.rendering.ScrollbarRenderer;});
sap.ui.predefine('sap/zen/crosstab/utils/Measuring',["jquery.sap.global"],function(q){"use strict";q.sap.declare("sap.zen.crosstab.utils.Measuring");
sap.zen.crosstab.utils.Measuring=function(c,d){var D=c.getDimensionHeaderArea();var C=c.getColumnHeaderArea();var r=c.getRowHeaderArea();var o=c.getDataArea();var i=c.getIntWidth();var a=c.getIntHeight();var R=null;var t=null;var b=null;var s=0;this.getUpperLeftScrollDivWidth=function(){var j=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));return j.outerWidth();};this.getLowerLeftScrollDivWidth=function(){var j=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));return j.outerWidth();};this.getAreaWidth=function(A){var j=q(document.getElementById(A.getId()+"_container"));var w=j.outerWidth();var S=0;if(A.isDimHeaderArea()){S=this.getUpperLeftScrollDivWidth();}else if(A.isRowHeaderArea()){S=this.getLowerLeftScrollDivWidth();}if(S>0){w=Math.min(w,S);}return w;};this.getAreaHeight=function(A){var e=q(document.getElementById(A.getId()+"_container"));return e.outerHeight();};this.getAreaSize=function(A){var S={};var e=q(document.getElementById(A.getId()+"_container"));S.iHeight=e.outerHeight();S.iWidth=this.getAreaWidth(A);return S;};this.getRenderSizeDivSize=function(){var S={};var e=q(document.getElementById(c.getId()+"_renderSizeDiv"));S.iWidth=e.outerWidth();S.iHeight=e.outerHeight();return S;};this.calculateRenderSize=function(f){f=f||false;if(!b||this.hasCrosstabSizeChanged()||f){b={};var e=this.getAreaSize(D);var g=this.getAreaSize(o);var h=this.getAreaSize(r);var j=this.getAreaSize(C);var l=r.hasContent()?h.iHeight:g.iHeight;var u=D.hasContent()?e.iHeight:j.iHeight;b.iHeight=l+u;var L=D.hasContent()?e.iWidth:h.iWidth;var k=C.hasContent()?j.iWidth:g.iWidth;b.iWidth=L+k;}return b;};this.getBrowserScrollbarWidth=function(){if(sap.ui.Device.browser.edge&&!c.getPropertyBag().isMobileMode()){s=16;}if(!s){var e=document.createElement("p");e.style.width="100%";e.style.height="200px";var f=document.createElement("div");f.style.position="absolute";f.style.top="0px";f.style.left="0px";f.style.visibility="hidden";f.style.width="200px";f.style.height="150px";f.style.overflow="hidden";f.appendChild(e);document.body.appendChild(f);var w=e.offsetWidth;f.style.overflow="scroll";var g=e.offsetWidth;if(w==g)g=f.clientWidth;document.body.removeChild(f);s=(w-g);if(s===0){var p,h;p=q("<div style=\"width:50px;height:50px;overflow:auto\"><div></div></div>").appendTo("body");h=p.children();s=h.innerWidth()-h.height(99).innerWidth();p.remove();}}return s;};this.reset=function(){b=null;};this.hasCrosstabSizeChanged=function(Q){var n=c.getIntWidth();var e=c.getIntHeight();if(i!==n||a!==e){if(!Q){i=n;a=e;}return true;}return false;};this.getLowerScrollDivHeight=function(){var e=null;if(r.hasContent()){e=q(document.getElementById(c.getId()+"_lowerLeft_scrollDiv"));}else{e=q(document.getElementById(c.getId()+"_lowerRight_scrollDiv"));}return e.outerHeight();};this.getUpperScrollDivHeight=function(){var e=null;if(D.hasContent()){e=q(document.getElementById(c.getId()+"_upperLeft_scrollDiv"));}else{e=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));}return e.outerHeight();};this.getUpperRightScrollDivWidth=function(){var e=q(document.getElementById(c.getId()+"_upperRight_scrollDiv"));return e.outerWidth();};this.getRenderSizeDivBorders=function(e){if(!R){R={};R.borders={};if(!e){e=q(document.getElementById(c.getId()+"_renderSizeDiv"));}R.borders.iBottomBorderWidth=parseInt(e.css("border-bottom-width"),10)||0;R.borders.iRightBorderWidth=parseInt(e.css("border-right-width"),10)||0;R.borders.iTopBorderWidth=parseInt(e.css("border-top-width"),10)||0;R.borders.iLeftBorderWidth=parseInt(e.css("border-left-width"),10)||0;}return R;};this.getTableDivBordersAndPadding=function(){if(!t){t={};t.borders={};t.paddings={};var e=d.getElement(c.getId());t.borders.iBottomBorderWidth=parseInt(e.css("border-bottom-width"),10);t.borders.iRightBorderWidth=parseInt(e.css("border-right-width"),10);t.borders.iTopBorderWidth=parseInt(e.css("border-top-width"),10);t.borders.iLeftBorderWidth=parseInt(e.css("border-left-width"),10);t.paddings.iBottomPadding=parseInt(e.css("padding-bottom"),10);t.paddings.iRightPadding=parseInt(e.css("padding-right"),10);t.paddings.iTopPadding=parseInt(e.css("padding-top"),10);t.paddings.iLeftPadding=parseInt(e.css("padding-left"),10);}return t;};this.reset=function(){R=null;};};
return sap.zen.crosstab.utils.Measuring;});
sap.ui.predefine('sap/zen/crosstab/utils/Utils',["jquery.sap.global","sap/base/Log","sap/zen/crosstab/rendering/RenderingConstants"],function(q,L,R){"use strict";q.sap.declare("sap.zen.crosstab.utils.Utils");
sap.zen.crosstab.utils.Utils=function(c){var t=this;var Q=null;var p={};var s=null;this.beginProfiling=function(k,T){var i=Date.now();p[k]={"iTsBegin":i,"sText":T};};this.endProfiling=function(k){var T=Date.now();var P=p[k];if(P){L.error("CROSSTAB PERF: "+k+": "+P.sText+": DURATION: "+(T-P.iTsBegin)+"ms");}};this.getModelCoordinates=function(a,A,b){var m={};m.iRow=a;m.iCol=A;var C=c.getColumnHeaderArea().getRowCnt();var r=c.getRowHeaderArea().getColCnt();if(b===R.TYPE_DATA_AREA){m.iRow+=C;m.iCol+=r;}else if(b===R.TYPE_COLUMN_HEADER_AREA){m.iCol+=r;}else if(b===R.TYPE_ROW_HEADER_AREA){m.iRow+=C;}return m;};this.selectTextInInputField=function(i,S,a){if(S===-1&&a===-1){i.select();}else{var d=i[0];if(c.isIE8Mode()){if(d.createTextRange!=="undefined"){var r=d.createTextRange();r.collapse(true);r.moveEnd("character",a+1);r.moveStart("character",S);r.select();}}else if(d.selectionStart!=="undefined"){d.selectionStart=S;d.selectionEnd=a;}}};this.getSelectionParams=function(d){var S=-1;var e=-1;if(c.isIE8Mode()){if(document.selection!=="undefined"&&document.selection.type==="Text"){var r=document.selection.createRange();if(r&&r.text.length>0){var b=document.body.createTextRange();b.moveToElementText(d);b.setEndPoint("EndToStart",r);S=b.text.length;e=S+r.text.length-1;}}}else if(window.getSelection){var a=window.getSelection().toString();if(a&&a.length>0){S=window.getSelection().anchorOffset;e=window.getSelection().focusOffset;}}return{iSelectionStartPos:S,iSelectionEndPos:e};};this.sendClientScrollPosUpdate=function(C,h,i,v,I){var o=c.getRenderEngine().getCrossRequestManager();if(o){if(I===true){o.setHeaderScrollData({"iHPos":C});}else{o.setScrollData(C,h,i,v);}}t.sendScrollPosUpdate(C,h,i,v,I);};this.saveScrollPosData=function(a,b,d,e,i){if(!s){s={};}s.iHScrollPos=a;s.bHScrolledToEnd=b;s.iVScrollPos=d;s.bVScrolledToEnd=e;s.bIsHeaderData=i;};this.compareScrollPosData=function(a,b,d,e,i){if(s){if(s.iHScrollPos===a&&s.iVScrollPos===d&&s.bHScrolledToEnd===b&&s.bVScrolledToEnd===e&&s.bIsHeaderData===i){return true;}}return false;};this.sendScrollPosUpdate=function(a,b,d,e,i){b=b||false;e=e||false;i=i||false;var C=c.getScrollNotifyCommand();if(C&&!this.compareScrollPosData(a,b,d,e,i)){C=C.replace("__CLIENT_VPOS__",d);C=C.replace("__CLIENT_VPOS_END__",e?"X":" ");C=C.replace("__CLIENT_HPOS__",(i?"H"+a:a));C=C.replace("__CLIENT_HPOS_END__",b?"X":" ");this.saveScrollPosData(a,b,d,e,i);t.executeCommandAction(C);}};this.executeCommandAction=function(C,i,I){if(c.getPropertyBag().isBookmarkProcessing()&&!I){return;}if(i===true){if(c.isQueueHeaderWidthRequest()===true){Q=C;return;}}var a;if(Q&&Q.length>0){a=new Function(Q);a();c.setQueueHeaderWidthRequest(false);Q=null;}a=new Function(C);a();};this.translateCellCoordinatesForBackend=function(C,d){var h=c.getHeaderInfo();var a=C.getArea();var o={"row":C.getRow(),"col":C.getCol(),"axisName":a.getAxisName()};var r=0;if(c.getNewLinesPos()==="TOP"){r=c.getNewLinesCnt();}if(a.isRowHeaderArea()){if(!d||d&&d.length===0){d=h.getDimensionNameByCol(C.getCol());}if(d){o.col=h.getAbsoluteColIndexForDimension(d);}o.row=o.row-r;}else if(a.isColHeaderArea()){if(!d||d&&d.length===0){d=h.getDimensionNameByRow(C.getRow()-r);}if(d){o.row=h.getAbsoluteRowIndexForDimension(d);}}return o;};this.getCellIdFromContenDivId=function(I){var i=I.indexOf("_contentDiv");if(i>-1){I=I.slice(0,i);}else{i=I.indexOf("_textContentDiv");if(i>-1){I=I.slice(0,i);}}return I;};this.isMsIE=function(){var r=q.browser.msie||false;var m=window.navigator.userAgent.match(/Trident\/7\./);r=r||(m?true:false);return r;};this.isMozilla=function(){var r=q.browser.mozilla||false;var m=window.navigator.userAgent.match(/Trident\/7\./);r=r&&(m?false:true);return r;};this.translateScrollLeft=function(d,S){var a=S;if(c.getPropertyBag().isRtl()){if(q.browser.webkit){a=d.scrollWidth-d.clientWidth-S;}else if(this.isMozilla()){a=-S;}}return a;};this.getRtlAwareBoundingClientRect=function(d){var r=d.getBoundingClientRect();r.begin=r.left;r.end=r.right;if(c.getPropertyBag().isRtl()){r.begin=q(window).width()-r.right;r.end=q(window).width()-r.left;}return r;};};
sap.zen.crosstab.utils.Utils.isCozyMode=function(){var i=false;if(sap.zen.crosstab.utils.Utils.isDispatcherAvailable()===true){i=sap.zen.Dispatcher.instance.isMainMode()&&!sap.zen.Dispatcher.instance.isCompactMode();}return i;};
sap.zen.crosstab.utils.Utils.isMainMode=function(){return true;};
sap.zen.crosstab.utils.Utils.unEscapeDisplayString=function(h){var u=h.replace(/<br\/>/g,"\r\n");u=u.replace(/&nbsp;/g,"&#x20;");u=q("<div></div>").html(u).text();return u;};
sap.zen.crosstab.utils.Utils.prepareStringForRendering=function(t){var p=t.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br/>");var P=p.replace(/(&#xd;&#xa;)|(&#xa;&#xd;)|&#xd;|&#xa;/g,"<br/>");var n=sap.zen.crosstab.utils.Utils.getNumberOfLineBreaks(P);P=P.replace(/&#x20;/g,"&nbsp;");return{"text":P,"iNumberOfLineBreaks":n};};
sap.zen.crosstab.utils.Utils.cancelEvent=function(e){if(e){if(e.preventDefault){e.preventDefault();}sap.zen.crosstab.utils.Utils.stopEventPropagation(e);}};
sap.zen.crosstab.utils.Utils.stopEventPropagation=function(e){if(e){if(e.stopPropagation){e.stopPropagation();}if(e.cancelBubble){e.cancelBubble=true;}}};
sap.zen.crosstab.utils.Utils.hasEntries=function(a){var h=false;if(a){for(var k in a){if(Object.prototype.hasOwnProperty.call(a,k)){h=true;break;}}}return h;};
sap.zen.crosstab.utils.Utils.padWithZeroes=function(n,l){var s=n.toString();if(s.length<l){s=("0000000000"+s).slice(-l);}return s;};
sap.zen.crosstab.utils.Utils.selectTextInElement=function(d){var r;var s;if(d.innerHTML){if(document.createRange&&window.getSelection){r=document.createRange();s=window.getSelection();try{s.removeAllRanges();}catch(e){}try{r.selectNodeContents(d);s.addRange(r);}catch(e){r.selectNode(d);s.addRange(r);}}else if(document.body.createTextRange){r=document.body.createTextRange();r.moveToElementText(d);r.select();}}};
sap.zen.crosstab.utils.Utils.getWidthFromStyle=function(j){var i=0;var s="";var S=null;var w=null;var a=j.attr("style");if(a){var b=a.split(";");if(b){for(i=0;i<b.length;i++){s=b[i];if(s){S=s.split(":");if(S[0]==="width"){w=S[1];break;}}}}}if(w){w=q.trim(w);}return w;};
sap.zen.crosstab.utils.Utils.sign=function(x){return x>0?1:x<0?-1:0;};
sap.zen.crosstab.utils.Utils.getCssIntProperty=function(j,c){var C=0;if(j&&j.length>0){C=parseInt(j.css(c),10);if(isNaN(C)){C=0;}}return C;};
sap.zen.crosstab.utils.Utils.getWidthOfMarginBorderPadding=function(j){var m=sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"margin-left")+sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"margin-right");var b=sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"border-left")+sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"border-right");var p=sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"padding-left")+sap.zen.crosstab.utils.Utils.getCssIntProperty(j,"padding-right");var t=m+b+p;return t;};
sap.zen.crosstab.utils.Utils.getNumberOfLineBreaks=function(e){var c=0;if(e&&e.length>0){var r=/<br\/>/g;while(r.exec(e)!=null){c++;}}return c;};
sap.zen.crosstab.utils.Utils.getSizeOf=function(o){var s=0;for(var k in o){if(Object.prototype.hasOwnProperty.call(o,k)){s++;}}return s;};
sap.zen.crosstab.utils.Utils.isDispatcherAvailable=function(){var d=false;if(typeof sap!=="undefined"&&sap){if(typeof sap.zen!=="undefined"&&sap.zen){if(typeof sap.zen.Dispatcher!=="undefined"&&sap.zen.Dispatcher){if(typeof sap.zen.Dispatcher.instance!=="undefined"&&sap.zen.Dispatcher.instance){d=true;}}}}return d;};
sap.zen.crosstab.utils.Utils.swapText=function(t,s){var T;var i;var n="";if(t.indexOf(s)>-1){T=t.split(s);for(i=T.length-1;i>=0;i--){n=n+T[i];if(i>=1){n=n+s;}}}else{n=t;}return n;};
sap.zen.crosstab.utils.Utils.swapPivotKeyText=function(t){var n;n=sap.zen.crosstab.utils.Utils.swapText(t,"&nbsp;&#x7c;&nbsp;");return n;};
return sap.zen.crosstab.utils.Utils;});
sap.ui.require.preload({
	"sap/zen/crosstab/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.zen.crosstab","type":"library","embeds":[],"applicationVersion":{"version":"1.96.0"},"title":"Design Studio Crosstab library.","description":"Design Studio Crosstab library.  NOT INTENDED FOR STANDALONE USAGE.","ach":"BI-RA-AD-EA","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.96","libs":{"sap.ui.core":{"minVersion":"1.96.0"},"sap.ui.unified":{"minVersion":"1.96.0"},"sap.ui.commons":{"minVersion":"1.96.0"}}},"library":{"i18n":false,"content":{"controls":["sap.zen.crosstab.Crosstab","sap.zen.crosstab.DataCell","sap.zen.crosstab.HeaderCell"],"elements":[],"types":[],"interfaces":[]}}}}'
},"sap/zen/crosstab/library-preload"
);
//# sourceMappingURL=library-preload.js.map