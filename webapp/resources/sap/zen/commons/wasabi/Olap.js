/*!
 * SAPUI5
  (c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/core/routing/HashChanger"],function(L,H){var e=-1;var b=0;var c=1;var d=2;var f=3;var h=new H();var O=function(){L.info("Loaded main");var t=this;var n=0;var p={};t.worker=new window.Worker(sap.ui.require.toUrl("sap/zen/commons/thirdparty/wasabi/Microcube_worker.js"));var w;function g(){function a(i,j){R=i;r=j;}if(!w){n++;var r,R;w=new Promise(a);p[n]={prom:w,reject:r,resolve:R};var s=h.getHash();var m=s.match(/\/wasabi=(.+)(&|$)/);var l=m?m[1]:".";t.worker.postMessage([n,b,l]);}return w;}t.getServerInfo=function(){return g().then(function(){n++;var r,R;function i(a,j){R=a;r=j;}var P=new Promise(i);p[n]={prom:P,reject:r,resolve:R};t.worker.postMessage([n,c,null]);return P.then(function(a){return a[1];});});};t.getResponse=function(r){return g().then(function(){n++;var R,i;function j(a,k){i=a;R=k;}var P=new Promise(j);p[n]={prom:P,reject:R,resolve:i};t.worker.postMessage([n,d,r]);return P.then(function(a){return a[1];});});};t.submitCube=function(r){return g().then(function(){n++;var R,i;function j(a,k){i=a;R=k;}var P=new Promise(j);p[n]={prom:P,reject:R,resolve:i};t.worker.postMessage([n,f,r]);return P.then(function(a){return a[1];});});};t.worker.onmessage=function(a){var m=a.data;var i=m[0];var P=p[i];if(m[1]&&m[1]instanceof Error){P.reject(m[1]);}else{P.resolve(m.splice(1));}};};return O;});
