sap.ui.define(["sap/ui/core/mvc/OverrideExecution","sap/suite/ui/generic/template/lib/TemplateAssembler","sap/suite/ui/generic/template/ListReport/controller/ControllerImplementation","sap/suite/ui/generic/template/ListReport/controllerFrameworkExtensions","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/listTemplates/filterSettingsPreparationHelper","sap/suite/ui/generic/template/js/staticChecksHelper","sap/suite/ui/generic/template/js/preparationHelper","sap/base/util/deepExtend","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/js/StableIdHelper","sap/ui/model/Context"],function(O,T,C,c,t,f,s,p,d,F,S,a){"use strict";var b="ListReport.Component";function g(o,e){var v={};return{oControllerSpecification:{getMethods:C.getMethods.bind(null,v),oControllerDefinition:c,oControllerExtensionDefinition:{onInitSmartFilterBar:function(E){},provideExtensionAppStateData:function(h){},restoreExtensionAppStateData:function(G){},ensureFieldsForSelect:function(E,h){},addFilters:function(A,h){}}},init:function(){var h=o.getModel("_templPriv");h.setProperty("/listReport",{});},adaptToChildContext:function(h){v.adaptToChildContext(h);},refreshBinding:function(u,r){v.refreshBinding(u,r);},getItems:function(){return v.getItems();},displayNextObject:function(h){return v.displayNextObject(h);},getTemplateSpecificParameters:function(m,h,D,l,i,M){function j(A,H){var u=m.getODataEntitySet(A);var w=m.getODataEntityType(u.entityType);var J,N,P;N=H.annotationPath;P=!!N&&w[N];if(P&&P.PresentationVariant){if(P.PresentationVariant.Visualizations){J=P.PresentationVariant.Visualizations[0].AnnotationPath;}else if(P.PresentationVariant.Path){var Q=P.PresentationVariant.Path.split("@")[1];var R=Q&&w[Q];J=R.Visualizations[0].AnnotationPath;}}else if(P&&P.Visualizations){J=P.Visualizations[0].AnnotationPath;}return!!(J&&J.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1);}function k(){var H="/"+l;var J=new a(M,H);var N=i.getODataDraftFunctionImportName(J,"NewAction");return!!N;}function n(H,L,u,w){var J=H?H.tableSettings:L.tableSettings;var N=false;var P=J.mode;if(J.multiEdit.enabled!==false&&L.isResponsiveTable&&!e.isDraftEnabled()&&!L.isWorklist&&!o.getAppComponent().getFlexibleColumnLayout()){N=true;if(u["Org.OData.Capabilities.V1.UpdateRestrictions"]&&u["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable&&u["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable.Bool==="false"){N=false;}else if(P==="None"){P=J.multiSelect?"MultiSelect":"SingleSelectLeft";}var Q=J.multiEdit.annotationPath;if(Q){s.checkErrorforMultiEditDialog(w,Q);var R=w[Q].Data;var U=R.filter(function(W){var X=m.getODataProperty(w,W.Value.Path);if(X){return W.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&X["sap:updatable"]!=="false"&&(!W["com.sap.vocabularies.UI.v1.Hidden"]||W["com.sap.vocabularies.UI.v1.Hidden"].Bool==="false")&&(!X["Org.OData.Core.V1.Immutable"]||X["Org.OData.Core.V1.Immutable"].Bool==="false");}});}}return{"multiEditEnabled":N,"selectionMode":P,"fields":U};}var L=d({},h);L.targetEntities={};function q(u){if(!L.targetEntities[u.entityType]){L.targetEntities[u.entityType]=p.getTargetEntityForQuickView(m,u);}}L.bNewAction=h.useNewActionForCreate&&k();var E=e.getControllerExtensions();var r=E&&E.Actions;var u=m.getODataEntitySet(l);var w=m.getODataEntityType(u.entityType);var x=p.getLineItemFromVariant(m,u.entityType);var y;if(L.quickVariantSelectionX){var z=p.getNormalizedTableSettings(m,L,D,l,r,x);var V=L.quickVariantSelectionX.variants||{};for(var K in V){var A=V[K].entitySet||l;var u=m.getODataEntitySet(A);if(!u){delete V[K];continue;}V[K].isSmartChart=j(A,V[K]);if(!V[K].isSmartChart){var B=p.getLineItemFromVariant(m,m.getODataEntitySet(A).entityType,V[K].annotationPath&&V[K].annotationPath.split("#")[1]);V[K].tableSettings=V[K].tableSettings||z;V[K].tableSettings=p.getNormalizedTableSettings(m,V[K],D,A,r,B);if(L.isResponsiveTable===undefined){L.isResponsiveTable=V[K].tableSettings.type==="ResponsiveTable";}else if(L.isResponsiveTable!==(V[K].tableSettings.type==="ResponsiveTable")){throw new F(b,"Variant with key "+K+" resulted in invalid Table Type combination. Please check documentation and update manifest.json.");}var G=m.getODataEntityType(u.entityType);if(G&&G.property&&V[K].tableSettings&&V[K].tableSettings.createWithParameterDialog){if(A!=l){var I=true;}s.checkErrorforCreateWithDialog(G,V[K].tableSettings,h,I);L.quickVariantSelectionX.variants[K].tableSettings.createWithParameterDialog.id=S.getStableId({type:'ListReportAction',subType:'CreateWithDialog',sQuickVariantKey:V[K].key});}if(V[K].tableSettings.multiEdit){y=n(V[K],L,u,w);V[K].tableSettings.multiEdit.enabled=y.multiEditEnabled;if(y.multiEditEnabled){V[K].tableSettings.multiEdit.fields=y.fields;V[K].tableSettings.mode=y.selectionMode;}}q(u);}}delete L.tableSettings;if(L.isResponsiveTable===undefined){L.isResponsiveTable=true;}}else{L.tableSettings=p.getNormalizedTableSettings(m,h,D,l,r,x);L.isResponsiveTable=L.tableSettings.type==="ResponsiveTable";if(L.tableSettings.multiEdit){y=n(undefined,L,u,w);L.tableSettings.multiEdit.enabled=y.multiEditEnabled;if(y.multiEditEnabled){L.tableSettings.multiEdit.fields=y.fields;L.tableSettings.mode=y.selectionMode;}}q(u);}L.controlConfigurationSettings=f.getControlConfigurationSettings(L,w);if(w&&w.property&&h&&L&&L.tableSettings&&L.tableSettings.createWithParameterDialog){s.checkErrorforCreateWithDialog(w,L.tableSettings,h);L.tableSettings.createWithParameterDialog.id=S.getStableId({type:'ListReportAction',subType:'CreateWithDialog'});}L.isSelflinkRequired=true;L.isIndicatorRequired=true;L.isSemanticallyConnected=false;return L;},executeAfterInvokeActionFromExtensionAPI:function(h){h.oPresentationControlHandler.setEnabledToolbarButtons();h.oPresentationControlHandler.setEnabledFooterButtons();},getCurrentState:function(){return v.getCurrentState.apply(null,arguments);},applyState:function(){v.applyState.apply(null,arguments);},getStatePreserverSettings:function(){return{callAlways:false};}};}t.testableStatic(g,"Component_getMethods");return T.getTemplateComponent(g,"sap.suite.ui.generic.template.ListReport",{metadata:{library:"sap.suite.ui.generic.template",properties:{"templateName":{"type":"string","defaultValue":"sap.suite.ui.generic.template.ListReport.view.ListReport"},"hideChevronForUnauthorizedExtNav":{"type":"boolean","defaultValue":"false"},treeTable:{type:"boolean",defaultValue:false},gridTable:{type:"boolean",defaultValue:false},tableType:{type:"string",defaultValue:undefined},multiSelect:{type:"boolean",defaultValue:false},tableSettings:{type:"object",properties:{type:{type:"string",defaultValue:undefined},multiSelect:{type:"boolean",defaultValue:false},inlineDelete:{type:"boolean",defaultValue:false},selectAll:{type:"boolean",defaultValue:false},selectionLimit:{type:"int",defaultValue:200},multiEdit:{type:"object",properties:{enabled:{type:"boolean",defaultValue:true},annotationPath:{type:"string"}}}}},"createWithFilters":"object","condensedTableLayout":"boolean",smartVariantManagement:{type:"boolean",defaultValue:false},hideTableVariantManagement:{type:"boolean",defaultValue:false},variantManagementHidden:{type:"boolean",defaultValue:false},createWithParameterDialog:{type:"object",properties:{fields:{type:"object"}}},"creationEntitySet":"string","enableTableFilterInPageVariant":{"type":"boolean","defaultValue":false},"useNewActionForCreate":{"type":"boolean","defaultValue":false},"multiContextActions":"object","isWorklist":"boolean","designtimePath":{"type":"string","defaultValue":"sap/suite/ui/generic/template/designtime/ListReport.designtime"},"flexibilityPath":{"type":"string","defaultValue":"sap/suite/ui/generic/template/ListReport/flexibility/ListReport.flexibility"},filterSettings:f.getFilterSettingsMetadata(),dataLoadSettings:{type:"object",properties:{loadDataOnAppLaunch:{type:"string",defaultValue:"ifAnyFilterExist"}}},quickVariantSelectionX:{type:"object",properties:{showCounts:{type:"boolean",defaultValue:false},variants:{type:"object",mapEntryProperties:{key:{type:"string",optional:true},annotationPath:{type:"string"},entitySet:{type:"string",optional:true},tableSettings:{type:"object",properties:{type:{type:"string",defaultValue:undefined},multiSelect:{type:"boolean",defaultValue:false},inlineDelete:{type:"boolean",defaultValue:false},selectAll:{type:"boolean",defaultValue:false},selectionLimit:{type:"int",defaultValue:200}}}}}}},quickVariantSelection:{type:"object",properties:{showCounts:{type:"boolean",defaultValue:false},variants:{type:"object",mapEntryProperties:{key:{type:"string",optional:true},annotationPath:{type:"string"}}}}},annotationPath:{type:"string",defaultValue:undefined}},"manifest":"json"}});});
