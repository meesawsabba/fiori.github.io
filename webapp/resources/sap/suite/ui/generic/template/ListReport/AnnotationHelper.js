sap.ui.define(["sap/suite/ui/generic/template/js/AnnotationHelper"],function(g){"use strict";var A={resolveMetaModelPath:function(c){var p=c.getObject();var m=c.getModel();var M=m.getProperty("/metaModel");return M.createBindingContext(p);},createWorkingContext:function(c){var p=c.getObject(),s=p.settings,m=c.getModel(),M=m.getProperty("/metaModel"),e=M.getODataEntitySet(p.entitySet),E=M.getODataEntityType(e.entityType),a="",w={};var P=A.getRelevantPresentationVariantPath(E,s.annotationPath);a=E.$path+"/"+P;w.presentationVariantQualifier=a.split("#")[1]||"";w.presentationVariant=M.getObject(a);w.presentationVariantPath=a;if(w.presentationVariant&&w.presentationVariant.Visualizations){w.presentationVariant.Visualizations.forEach(function(f){var h="/"+f.AnnotationPath.slice(1);if(h.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){a=E.$path+h;w.lineItem=M.getObject(a);w.lineItemPath=a;w.lineItemQualifier=a.split("#")[1]||"";}});}if(!w.lineItem){a=E.$path+"/com.sap.vocabularies.UI.v1.LineItem";w.lineItem=M.getObject(a);w.lineItemPath=a;w.lineItemQualifier="";}w.tableChartTabs=[];var b,v,i,I,V;v=p&&p.manifest&&p.manifest["sap.ui.generic.app"]&&p.manifest["sap.ui.generic.app"].pages&&p.manifest["sap.ui.generic.app"].pages[0].component&&p.manifest["sap.ui.generic.app"].pages[0].component.settings&&p.manifest["sap.ui.generic.app"].pages[0].component.settings.quickVariantSelectionX&&p.manifest["sap.ui.generic.app"].pages[0].component.settings.quickVariantSelectionX.variants;for(i in v){V={};b="";I={};I.key=v[i].key;I.variantAnnotationPath=v[i].annotationPath;I.variantQualifier=I.variantAnnotationPath.split("#")[1]||"";if(!!v[i].entitySet){I.entitySet=v[i].entitySet;e=M.getODataEntitySet(I.entitySet);if(e){E=M.getODataEntityType(e.entityType);}else{continue;}}V=E[I.variantAnnotationPath];if(V&&V.PresentationVariant){var o;if(V.PresentationVariant.Path){var d=V.PresentationVariant.Path.split("@")[1];o=d&&E[d];I.presentationVariantQualifier=d.split("#")[1]||"";}else{o=V.PresentationVariant;}b=o.Visualizations&&o.Visualizations[0].AnnotationPath;}else if(V&&V.Visualizations){b=V.Visualizations[0].AnnotationPath;}if(b){var r="/"+b.slice(1);if(b.indexOf("com.sap.vocabularies.UI.v1.Chart")>-1){I.smartControl="chart";I.chartAbsolutePath=E.$path+r;}else if(b.indexOf("com.sap.vocabularies.UI.v1.LineItem")>-1){I.smartControl="table";a=E.$path+r;I.lineItem=M.getObject(a);I.lineItemPath=a;I.lineItemQualifier=a.split("#")[1]||"";}}if(!(I.chartAbsolutePath||I.lineItemPath)){a=E.$path+"/com.sap.vocabularies.UI.v1.LineItem";I.lineItem=M.getObject(a);I.lineItemPath=a;I.lineItemQualifier="";}I.controlQualifier=b&&b.split("#")[1]||"";w.tableChartTabs.push(I);}m.setProperty("/workingContext",w);return"/workingContext";},getRelevantPresentationVariantPath:function(e,a){var p="com.sap.vocabularies.UI.v1.PresentationVariant";if(a&&a.indexOf('com.sap.vocabularies.UI.v1.SelectionPresentationVariant')>-1){var r=e[a]&&(e[a].PresentationVariant.Path||e[a].PresentationVariant.AnnotationPath);p=r?r.split("@")[1]:"com.sap.vocabularies.UI.v1.PresentationVariant";}else if(a&&a.indexOf('com.sap.vocabularies.UI.v1.PresentationVariant')>-1){p=a;}return p;},getValidPresentationVariantForSingleView:function(e,v){var p=A.getRelevantPresentationVariantPath(e,v);var V=e[p];var P=g.getPresentationVariant(V,e);return P;},checkIfChartQualifier:function(w,t){return!!(A.getChartQualifier(w,t));},getChartQualifier:function(w,t){var c,i,k;for(i in w.tableChartTabs){k=w.tableChartTabs[i].key;if(k===t.key){c=w.tableChartTabs[i].controlQualifier;break;}}return c;},getPresentationVariantQualifier:function(w,t){var v,i,k;for(i in w.tableChartTabs){k=w.tableChartTabs[i].key;if(k===t.key){v=w.tableChartTabs[i].variantQualifier;break;}}return v;},getChartAnnotationPath:function(t){var c,m,o,i,T,v,c,C,b;m=t.getModel();var M=m.getProperty("/metaModel");o=m.getObject(t.sPath);T=m.getData("workingContext")["workingContext"].tableChartTabs;for(i in T){v=T[i].variantAnnotationPath;if(v===o.annotationPath){c=T[i].chartAbsolutePath;C=c+'/Actions';b=M.createBindingContext(C);return b;}}},checkIfChartNavigationIsEnabled:function(I,s,c,q){var t=I.showItemNavigationOnChart;if(!t){return false;}c=!!I.entitySet?I.entitySet:c;for(var i=0;i<s.length;i++){if(s[i].entitySet===c&&s[i].navigation&&s[i].navigation['display']){return true;}}if(!A.checkIfDiffEntitySetsMode(q)&&s&&s[0]&&s[0].entitySet===c&&(!s[0].navigation||s[0].navigation&&!s[0].navigation['display'])){return true;}return false;},checkIfDiffEntitySetsMode:function(q){var i;var v=q&&q.variants;for(i in v){if(v[i].entitySet){return true;}}},setSizeCondensedCssClass:function(c){var C="sapUiSizeCompact",s="sapUiSizeCondensed",b;if(!c){return;}b=document.body;if(b.classList.contains(C)){return s;}},getEntityType:function(t){var m,d,T,e,M,E,s,o;m=t.getModel();d=m.getData();T=t.getObject();e=T&&T.entitySet;M=d.metaModel;if(!!e){E=M.getODataEntitySet(e);s=E&&E.entityType;}else{s=d.entityType;}o=M.createBindingContext(M.getODataEntityType(s,true));return o;},getEntitySet:function(t){var m,d,T,e,M,E;m=t.getModel();d=m.getData();T=t.getObject();e=T&&T.entitySet;M=d.metaModel;if(!e){e=d.entitySet;}E=M.createBindingContext(M.getODataEntitySet(e,true));return E;},getTableAnnotationPath:function(t){var T,m,o,w,i,a,T;m=t.getModel();var d=m.getData();var M=d.metaModel;o=m.getObject(t.sPath);w=m.getData("workingContext")["workingContext"];a=w.tableChartTabs;for(i in a){if(a[i].key===o.key){T=a[i].lineItemPath;var b=M.createBindingContext(T);return b;}}}};return A;},true);
