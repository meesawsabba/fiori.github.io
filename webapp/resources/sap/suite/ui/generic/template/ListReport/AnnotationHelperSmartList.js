sap.ui.define(["sap/ui/model/odata/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/js/AnnotationHelper"],function(O,t,A){"use strict";function g(p,f){var P="",B="",s="",l=p.length;if(l>1){P="{parts:[";for(var i=0;i<l;i++){if(p[i].Path){B="path";s=p[i].Path;}else if(p[i].String){B="value";s=p[i].String;}P+=("{"+B+": '"+s+"'}"+(((i===l-1))?"]":", "));}}else{if(p[0].Path){B="path";s=p[0].Path;}else if(p[0].String){B="value";s=p[0].String;}P="{"+B+": '"+s+"'"+(p[0].type?", type: '"+p[0].type+"'":"");}P+=(f?(", formatter: '"+f+"'"):"")+"}";return P;}function a(e){var r="",u=e["Org.OData.Measures.V1.Unit"];if(u){r+=" "+g([u]);}return r;}g=t.testableStatic(g,"AnnotationHelperSmartList_generatePathForField");a=t.testableStatic(a,"AnnotationHelperSmartList_appendUnitOfMeasure");var b={formatDataPointOrField:function(i,r){if(!r||!r.Value){return"";}var R="",f;var m=i.getModel();var M=m.getProperty("/metaModel");var e=M.getODataEntityType(m.getProperty("/entityType"));var E=M.getODataProperty(e,r.Value.Path);var p=[],c=E["Org.OData.Measures.V1.ISOCurrency"];if(E["type"]==="Edm.DateTime"||E["type"]==="Edm.DateTimeOffset"){var d=r.Value;d.type='sap.ui.model.type.DateTime';p.push(d);f="sap.ui.core.format.DateFormat.format";R=g(p,f);}else if(c){p.push(r.Value);p.push(c);f="sap.ui.core.format.NumberFormat.format";R=g(p,f);}else{R=O.format(i,r.Value);}return R+a(E);},getSortedDataPointsAndFields:function(c,l,m,e){function d(o){var i,j;if(o["com.sap.vocabularies.UI.v1.Importance"]){i=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;switch(i){case"com.sap.vocabularies.UI.v1.ImportanceType/High":j=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":j=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":j=3;break;}}else{j=2;}return j;}function s(c){c.sort(function(F,o){var i=d(F);var j=d(o);return i<j?-1:1;});}function f(c){var S=c.filter(function(j){return(j.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&j.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/));});s(S);var L=m.getContext(l).getObject();for(var i=0;i<S.length;i++){var o=m.getContext(l+"/"+L.indexOf(S[i])+"/Target");S[i]=m.getProperty(O.resolvePath(o));}return S;}function h(i){return A.isImageUrl(E.filter(function(p){return p.name===i.Value.Path;})[0]);}var D=f(c);var E=m.getODataEntityType(e).property;var S=c.filter(function(i){return(i.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&!h(i));});s(S);var I=c.filter(function(i){return i.RecordType==="com.sap.vocabularies.UI.v1.DataField"?h(i):false;})[0];return{dataFields:S,dataPoints:D,imageDataField:I};},getObjectListProperty:function(i,l){var n=l.dataPoints.length,s,f,F,S,c;switch(true){case(n>2):s=b.formatDataPointOrField(i,l.dataFields[2]);f=b.formatDataPointOrField(i,l.dataPoints[1]);S=b.formatDataPointOrField(i,l.dataPoints[2]);F=A.buildExpressionForProgressIndicatorCriticality(i,l.dataPoints[1]);c=A.buildExpressionForProgressIndicatorCriticality(i,l.dataPoints[2]);break;case(n>1):s=b.formatDataPointOrField(i,l.dataFields[2]);f=b.formatDataPointOrField(i,l.dataPoints[1]);F=A.buildExpressionForProgressIndicatorCriticality(i,l.dataPoints[1]);S=b.formatDataPointOrField(i,l.dataFields[3]);c=A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[3]);break;case(n>0):s=b.formatDataPointOrField(i,l.dataFields[3]);f=b.formatDataPointOrField(i,l.dataFields[2]);F=A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[2]);S=b.formatDataPointOrField(i,l.dataFields[4]);c=A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[4]);break;default:s=b.formatDataPointOrField(i,l.dataFields[4]);f=b.formatDataPointOrField(i,l.dataFields[3]);F=A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[3]);S=b.formatDataPointOrField(i,l.dataFields[5]);c=A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[5]);break;}return{title:b.formatDataPointOrField(i,l.dataFields[0]),number:l.dataPoints.length>0?b.formatDataPointOrField(i,l.dataPoints[0]):b.formatDataPointOrField(i,l.dataFields[2]),numberState:l.dataPoints.length>0?A.buildExpressionForProgressIndicatorCriticality(i,l.dataPoints[0]):A.buildExpressionForProgressIndicatorCriticality(i,l.dataFields[2]),firstAttribute:b.formatDataPointOrField(i,l.dataFields[1]),secondAttribute:s,firstStatus:f,firstStatusState:F,secondStatus:S,secondStatusState:c};}};b.formatDataPointOrField.requiresIContext=true;b.getObjectListProperty.requiresIContext=true;return b;},true);
