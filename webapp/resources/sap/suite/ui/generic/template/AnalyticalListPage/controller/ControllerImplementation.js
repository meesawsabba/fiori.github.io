sap.ui.define(["sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/AnalyticalListPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/AnalyticalListPage/controller/FilterBarController","sap/suite/ui/generic/template/listTemplates/controller/ToolbarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterDialogController","sap/suite/ui/generic/template/AnalyticalListPage/controller/AnalyticGridController","sap/ui/table/AnalyticalTable","sap/ui/model/odata/AnnotationHelper","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/AnalyticalListPage/controller/ContentAreaController","sap/suite/ui/generic/template/listTemplates/controller/IappStateHandler","sap/ui/Device","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/library","sap/ui/model/Context","sap/suite/ui/generic/template/AnalyticalListPage/util/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/AnalyticalListPage/util/FilterUtil","sap/base/util/ObjectPath","sap/suite/ui/generic/template/lib/ShareUtils","sap/base/util/merge","sap/base/util/deepExtend","sap/suite/ui/generic/template/listTemplates/semanticDateRangeTypeHelper","sap/suite/ui/generic/template/listTemplates/listUtils","sap/suite/ui/generic/template/listTemplates/controller/MultipleViewsHandler","sap/suite/ui/generic/template/js/StableIdHelper"],function(S,E,F,T,V,a,A,b,O,c,C,I,D,d,f,g,h,j,k,l,m,n,o,p,q,r,s,t,L,M,u){"use strict";var v=new n("AnalyticalListPage.controller.ControllerImplementation");var w=v.getLogger();var x=v.Level;var y="chart",z="visual",B="compact",G=900;return{getMethods:function(H,J,K){var N={};N.oRefreshTimer=null;N.nRefreshInterval=0;N.bVisualFilterInitialised=false;N._bIsStartingUp=true;function P(e){N.oRefreshTimer=setTimeout(function(){var i=K.getOwnerComponent();var d1=i.getModel("_templPriv");if(!d1.getProperty("/alp/filterChanged")){H.refreshBinding();}},e);}function Q(i){if(N.nRefreshInterval!==0){if(N.oRefreshTimer!==null){clearTimeout(N.oRefreshTimer);}if(!i){P(N.nRefreshInterval);}}}function R(){var e=K.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isLeaf",e.getIsLeaf());}function U(e,i){var d1=e&&e.property;return d1.filter(function(e1){return typeof e1[i]!=="undefined";});}function W(i){var d1=i.getModel(),e1=d1&&d1.getMetaModel(),f1=e1&&e1.getODataEntityType(i.getEntityType()),g1,h1=e1&&e1.getODataEntityType(i.getEntityType(),true),i1=l.createSVAnnotation(f1,e1,N.oController.getOwnerComponent().getQualifier());if(N.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&i1){g1=L.createSVObject(r({},i1),i);}else{if(N.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&!i1){w.warning("No SelectionVariant found in the annotation : No default values filled in FilterBar");}var j1=f1&&U(f1,"com.sap.vocabularies.Common.v1.FilterDefaultValue"),k1,l1,m1,n1,o1,p1=[];try{k1=new c.Model(new c.Model.ReferenceByModel(d1));o1=k1&&k1.findQueryResultByName(i.getEntitySet());l1=o1&&o1.getParameterization();m1=l1&&e1.getODataEntitySet(l1.getEntitySet().getQName());n1=m1&&e1.getODataEntityType(m1.entityType);p1=n1?U(n1,"defaultValue"):[];}catch(e){w.error(e);}if(j1.length>0||p1.length>0){g1=new S();j1.forEach(function(q1){var r1=e1.createBindingContext(h1+"/property/[${path:'name'}===\'"+q1.name+"']/com.sap.vocabularies.Common.v1.FilterDefaultValue");g1.addSelectOption(q1.name,"I","EQ",O.format(r1));});p1.forEach(function(q1){g1.addParameter(q1.name,q1.defaultValue);});}}return g1;}function X(e){var i=e.getSource();i.suspendSetFilterData();var d1=W(i);if(d1){N.oIappStateHandler.fnSetFiltersUsingUIState(d1.toJSONObject(),{},true,false);}N.oIappStateHandler.onSmartFilterBarInitialise();K.onInitSmartFilterBarExtension(e);K.templateBaseExtension.onInitSmartFilterBar(e);}function Y(){var e=N.oController.getOwnerComponent();if(N.hideVisualFilter||(e.getDefaultFilterMode()=="visual"&&e.getModel().mMetadataUrlParams&&e.getModel().mMetadataUrlParams["sap-value-list"]==="none")){N.oSmartFilterbar.associateValueLists();}var i=N.oIappStateHandler.onSmartFilterBarInitialized();i.then(function(){N._bIsStartingUp=false;if(N.bVisualFilterInitialised){N.oIappStateHandler.fnUpdateVisualFilterBar();}if(N.sNavType!==sap.ui.generic.app.navigation.service.NavType.iAppState){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}},function(d1){if(d1 instanceof Error){d1.showMessageBox();}N.oIappStateHandler.fnOnError();N._bIsStartingUp=false;}).finally(function(){if(N.oSmartFilterableKPI){var d1=N.oSmartFilterableKPI.getContent();d1.forEach(function(e1){if(e1.getSmartFilterId){e1._bStopDataLoad=false;e1._updateKpiList(true);}});}});}function Z(e){var i=e.getSource(),d1=e.getParameters().limitReached,e1=i.getSelectedIndices(),f1,g1;if(e1.length>0){if(d1){f1="Your last selection was limited to the maximum of "+i.getLimit()+" items.";J.oServices.oApplication.showMessageToast(f1);}}g1=i.getParent();J.oCommonUtils.setEnabledToolbarButtons(g1);}function $(e){var i=e.getParameters();var d1=e.getSource();J.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(d1,i);}function _(e){var i,d1;i=e.getParameters();d1=e.getSource();J.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(d1.getEntitySet(),d1.getFieldSemanticObjectMap(),i,N,undefined,undefined);}function a1(e){var i=N.oSmartFilterbar;var d1=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){d1=e.fetchVariant().filter.filterItems;}var e1={search:!!i.getBasicSearchValue(),filter:!!(d1.length||i.retrieveFiltersWithValues().length)};return e1;}function b1(e){var i=e.getId();var d1=a1(e);var e1="";if(d1.search||d1.filter){e1=J.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",i);}else{e1=J.oCommonUtils.getContextText("NOITEMS_SMARTCHART",i);}e.getChartAsync().then(function(f1){f1.setCustomMessages({NO_DATA:e1});});}function c1(e){var i={shareEmailPressed:function(){var e1=J.oServices.oApplication.getBusyHelper();if(e1.isBusy()){return;}var f1=J.oCommonUtils.getText("EMAIL_HEADER",[J.oServices.oApplication.getAppTitle()]);var g1=q.getCurrentUrl().then(function(h1){sap.m.URLHelper.triggerEmail(null,f1,h1);});e1.setBusy(g1);},shareJamPressed:function(){q.openJamShareDialog(J.oServices.oApplication.getAppTitle());},getDownloadUrl:function(){var e1=N.oSmartTable.getTable();var f1=e1.getBinding("rows")||e1.getBinding("items");return f1&&f1.getDownloadUrl()||"";},getServiceUrl:function(){var e1=t.isServiceUrlAllowedBySemanticDateRangeFilter(N.oSmartFilterbar,J.oComponentUtils)&&i.getDownloadUrl()||"";e1=e1&&e1+"&$top=0&$inlinecount=allpages";var f1={serviceUrl:e1};K.onSaveAsTileExtension(f1);return f1.serviceUrl;},getModelData:function(){var e1=p.get("sap.ushell.Container.getUser");var f1=K.getOwnerComponent();var g1=f1.getAppComponent();var h1=g1.getMetadata();var i1=h1.getManifestEntry("sap.ui");var j1=(i1&&i1.icons&&i1.icons.icon)||"";var k1=h1.getManifestEntry("sap.app");var l1=(k1&&k1.title)||"";return Promise.resolve().then(function(){return{serviceUrl:i.getServiceUrl(),icon:j1,title:l1,isShareInJamActive:!!e1&&e1().isJamActive(),customUrl:q.getCustomUrl()};});}};q.openSharePopup(J.oCommonUtils,e,i);var d1=this.getView().byId("bookmarkButton");d1.setBeforePressHandler(function(){e.focus();});}return{onInit:function(){var e=K.getOwnerComponent();w.setLevel(x.WARNING,"ALPSmartFilterBar");var d1=e.getModel("_templPriv");d1.setProperty("/alp",{filterMode:e.getHideVisualFilter()?B:e.getDefaultFilterMode(),contentView:e.getDefaultContentView(),autoHide:e.getAutoHide(),visibility:{hybridView:(D.system.phone||D.system.tablet&&!D.system.desktop)?false:true},filterChanged:false});N.hideVisualFilter=e.getHideVisualFilter();N.hideVisualFilter=(N.hideVisualFilter===undefined||N.hideVisualFilter!==true)?false:true;N.quickVariantSelectionX=e.getQuickVariantSelectionX();N.oSmartFilterbar=K.byId("template::SmartFilterBar");N.oSmartTable=K.byId("table");N.oSmartFilterableKPI=K.byId("template::KPITagContainer::filterableKPIs");N.oPage=K.byId("template::Page");N.oSmartChart=K.byId("chart");var e1=new M(N,K,J);N.oMultipleViewsHandler=e1;if(K.getOwnerComponent().getProperty("dshQueryName")){N.oAnalyticGridContainer=K.byId("template::AnalyticGridContainer");N.oAnalyticGridController=new A();N.oAnalyticGridController.setState(N);}N.alr_compactFilterContainer=K.byId("template::CompactFilterContainer");N.alr_visualFilterContainer=K.byId("template::VisualFilterContainer");N.alr_filterContainer=K.byId("template::FilterContainer");N.alr_visualFilterBar=K.byId("template::VisualFilterBar");var f1="";if(N.quickVariantSelectionX){f1=e1.getSelectedKey();}var g1=u.getStableId({type:"ALPTable",subType:"ColumnListItem",sQuickVariantKey:f1});N.alp_ColumnListItem=K.byId(g1);if(N.alr_visualFilterBar){N.alr_visualFilterBar.setSmartFilterId(N.oSmartFilterbar.getId());N.alr_visualFilterBar.attachOnFilterItemAdded(function(i){var t1=i.getParameters();t1.attachBeforeRebindVisualFilter(function(u1){var v1=u1.getParameters();var w1=v1.sEntityType;var x1=v1.sDimension;var y1=v1.sMeasure;var z1=v1.oContext;var p1=N.oController;p1.onBeforeRebindVisualFilterExtension(w1,x1,y1,z1);});});}N.oKpiTagContainer=K.byId("template::KPITagContainer::globalKPIs");N.oFilterableKpiTagContainer=K.byId("template::KPITagContainer::filterableKPIs");if(N.oKpiTagContainer||N.oFilterableKpiTagContainer){sap.ui.require(["sap/suite/ui/generic/template/AnalyticalListPage/controller/KpiTagController"],function(i){i.init(N);});}N.oContentArea=new C();N.oTemplateUtils=J;N.toolbarController=new T();N.oController=K;N.filterBarController=new F();N.filterBarController.init(N);N.oContentArea.createAndSetCustomModel(N);N.oContentArea.setState(N);if(!N.hideVisualFilter){N.visualFilterBarContainer=new V();N.visualFilterBarContainer.init(N);}if(N.alr_visualFilterBar){N.alr_visualFilterBar.addEventDelegate({onAfterRendering:function(){if(N.oSmartFilterbar.isInitialised()){N.oSmartFilterbar.setFilterData({_CUSTOM:N.oIappStateHandler.getFilterState()});}}});}N.oIappStateHandler=new I(N,K,J);R();K.byId("template::FilterText").attachBrowserEvent("click",function(){K.byId("template::Page").setHeaderExpanded(true);});d1.setProperty("/listReport/isHeaderExpanded",true);if(N.oSmartTable){var h1=N.oSmartTable.getTable();}var i1="sapUiSizeCozy",j1="sapUiSizeCompact",k1="sapUiSizeCondensed";if(m.isUiTable(h1)||h1 instanceof b){var l1=K.getView();var m1=document.body;if(m1.classList.contains(i1)||l1.hasStyleClass(i1)){N.oSmartTable.addStyleClass(i1);}else if(m1.classList.contains(j1)||l1.hasStyleClass(j1)){var n1=e.getCondensedTableLayout();if(n1===false){N.oSmartTable.addStyleClass(j1);}else{N.oSmartTable.addStyleClass(k1);}}}if(N.oSmartFilterableKPI){N.oSmartFilterableKPI.setModel(e.getModel("_templPriv"),"_templPriv");var o1=N.oSmartFilterableKPI.getContent(),p1=N.oController;o1.forEach(function(i){if(i.getSmartFilterId){i.attachBeforeRebindFilterableKPI(function(t1){var u1=t1.getParameters(),v1=u1.selectionVariant,w1=u1.entityType,x1=t1.getSource().getId();p1.onBeforeRebindFilterableKPIExtension(v1,w1,x1);},p1);}});}H.getUrlParameterInfo=function(){return N.oIappStateHandler.getUrlParameterInfo();};H.onComponentActivate=function(){};H.refreshBinding=function(){if(N.alr_visualFilterBar&&N.alr_visualFilterBar.updateVisualFilterBindings){N.alr_visualFilterBar.updateVisualFilterBindings();}if(N.oSmartChart&&N.oSmartChart.rebindChart){N.oSmartChart.rebindChart();}if(N.oSmartTable){J.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(N.oSmartTable).refresh();}if(N.oKpiTagContainer){var t1=N.oKpiTagContainer.mAggregations.content;for(var i in t1){if(t1[i]._createGlobalKpi){t1[i]._createGlobalKpi();}}}if(N.oFilterableKpiTagContainer){var t1=N.oFilterableKpiTagContainer.mAggregations.content;for(var i in t1){if(t1[i]._createFilterableKpi){t1[i]._createFilterableKpi();}}}Q();};H.onSuspend=function(){Q(true);};H.onRestore=function(){if(N.nRefreshInterval){P(N.nRefreshInterval);}};if(N.alr_visualFilterBar){N.alr_visualFilterBar.attachInitialized(function(i){N.bVisualFilterInitialised=true;if(!N._bIsStartingUp){N.oIappStateHandler.fnUpdateVisualFilterBar(true);}});}N.oSmartFilterbar.attachFilterChange(function(i){var d1=e.getModel("_templPriv");N.oIappStateHandler.fnCheckMandatory();var t1=N.oSmartFilterbar.isDialogOpen();var u1=i.getSource(),v1;v1=s({},u1.getFilterData(true));if(t1&&N.visualFilterDialogContainer){var w1=N.visualFilterDialogContainer.oVerticalBox.getModel("_dialogFilter");w1.setData(v1);}else{var x1=N.oController.getOwnerComponent().getModel("_filter");x1.setData(v1);}if(i.getParameters().filterItem){if(!N.hideVisualFilter){N.filterBarController.changeVisibility(i);}d1.setProperty('/alp/_ignoreChartSelections',false);}N.filterBarController._updateFilterLink();if(!N.oSmartFilterbar.isLiveMode()&&!N.oSmartFilterbar.isDialogOpen()){d1.setProperty('/alp/filterChanged',true);}});var l1=K.getView();var m1=document.body;var q1,r1;if(m1.classList.contains(i1)||l1.hasStyleClass(i1)){q1=true;}if(q1&&e.getTableType()!=="ResponsiveTable"){var s1=e.getModel("_templPriv");if(D.resize.height<=G){r1=s1.getProperty('/alp/contentView');s1.setProperty('/alp/enableHybridMode',false);s1.setProperty('/alp/contentView',r1==="charttable"?"chart":r1);}N.resizeHandler=function(i){var t1=i.height;if(t1<=G){r1=s1.getProperty('/alp/contentView');s1.setProperty('/alp/enableHybridMode',false);s1.setProperty('/alp/contentView',r1==="charttable"?"chart":r1);}else{s1.setProperty('/alp/enableHybridMode',true);}};D.resize.attachHandler(N.resizeHandler);}if(e.getRefreshIntervalInMinutes()){N.nRefreshInterval=e.getRefreshIntervalInMinutes();N.nRefreshInterval=(N.nRefreshInterval<1?1:N.nRefreshInterval)*60000;}},attachRefreshInterval:P,clearingRefreshTimerInterval:Q,onExit:function(){if(N.resizeHandler){D.resize.detachHandler(N.resizeHandler);}if(N.oRefreshTimer!==null){clearTimeout(N.oRefreshTimer);}},handlers:{onBack:function(){J.oServices.oNavigationController.navigateBack();},addEntry:function(e){var i=e.getSource();J.oCommonEventHandlers.addEntry(i,false,N.oSmartFilterbar);},deleteEntries:function(e){J.oCommonEventHandlers.deleteEntries(e);},onSelectionChange:function(e){var d1=e.getSource(),e1=d1.getModel(),f1=d1.getModel("_templPriv");var g1=e1.getMetaModel(),h1=g1.getODataEntitySet(this.getOwnerComponent().getEntitySet()),i1=h1["Org.OData.Capabilities.V1.DeleteRestrictions"];var j1=(i1&&i1.Deletable&&i1.Deletable.Path)?i1.Deletable.Path:"";var k1=false;var l1=true;var m1=(j1&&j1!=="");var n1=J.oCommonUtils.getSelectedContexts(d1);if(n1.length>0){for(var i=0;i<n1.length;i++){var o1=e1.getObject(n1[i].getPath());if(!(o1.IsActiveEntity&&o1.HasDraftEntity&&o1.DraftAdministrativeData&&o1.DraftAdministrativeData.InProcessByUser)){l1=false;}if(m1){if(e1.getProperty(j1,n1[i])){m1=false;}}if(!l1&&!m1){k1=true;break;}}}f1.setProperty("/listReport/deleteEnabled",k1);},onMultiSelectionChange:Z,onChange:function(e){J.oCommonEventHandlers.onChange(e);},onContactDetails:function(e){J.oCommonEventHandlers.onContactDetails(e);},onSmartFilterBarInitialise:X,onSmartFilterBarInitialized:Y,onEditStateFilterChanged:function(e){e.getSource().fireChange();},onFilterPress:function(e){N.filterBarController.showDialog.call(N.filterBarController);},onClearPress:function(e){N.filterBarController.clearFilters();K.onClearFilterExtension(e);},onGoPress:function(e){N.filterBarController.fnCheckMandatory();var i=N.oSmartFilterbar.isDialogOpen();if(!i){N.filterBarController.onGoFilter();}},onBeforeSFBVariantSave:function(){if(N.oSmartFilterbar.isDialogOpen()&&!N.hideVisualFilter){N.visualFilterDialogContainer._updateFilterBarFromDialog.call(N.visualFilterDialogContainer);}var e=N.oIappStateHandler.getCurrentAppState();if(!this.getOwnerComponent().getProperty('smartVariantManagement')){delete e.customData["sap.suite.ui.generic.template.genericData"].contentView;}var i=N.oSmartFilterbar.getFilterData(true);var d1,e1=N.oSmartFilterbar.getBasicSearchControl();if(e1&&e1.getValue){d1=e1.getValue();}i._CUSTOM=e.customData;N.oSmartFilterbar.setFilterData(i,true);if(d1){N.oSmartFilterbar.getBasicSearchControl().setValue(d1);}N.oSmartFilterbar.fireFilterChange();},onAfterSFBVariantLoad:function(e){if(!N.oSmartFilterbar.isDialogOpen()){N.filterBarController._afterSFBVariantLoad();if(N.oSmartFilterableKPI&&!N.oSmartFilterbar.isLiveMode()){var i=N.oSmartFilterableKPI.getContent();i.forEach(function(d1){if(d1.getSmartFilterId){if(e.getParameter("executeOnSelect")){d1.bSearchTriggred=true;}}});}}},onBeforeRebindChart:function(e){var i=e.getSource();b1(i);var d1=e.getParameters().bindingParams;N.oMultipleViewsHandler.aTableFilters=s({},d1.filters);var e1=d1.filters.slice(0);var f1={setBindingPath:i.setChartBindingPath.bind(i),ensureExtensionFields:Function.prototype,addExtensionFilters:K.templateBaseExtension.addFilters,resolveParamaterizedEntitySet:N.oMultipleViewsHandler.resolveParameterizedEntitySet,isFieldControlRequired:false,isMandatoryFiltersRequired:true};J.oCommonUtils.onBeforeRebindTableOrChart(e,f1,N.oSmartFilterbar);N.oMultipleViewsHandler.onRebindContentControl(d1,e1);},onListNavigate:function(e){J.oCommonEventHandlers.onListNavigate(e,N);},onCallActionFromToolBar:function(e){var i=J.oCommonUtils.getParentTable;J.oCommonUtils.getParentTable=function(){return N.oSmartTable;};J.oCommonEventHandlers.onCallActionFromToolBar(e,N);J.oCommonUtils.getParentTable=i;i=null;},onCallActionFromList:function(e){},onDataFieldForIntentBasedNavigation:function(e){J.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,N);},onDataFieldWithIntentBasedNavigation:function(e){J.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,N);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getSource();var d1=N.oSmartFilterbar.getUiState({allFilters:false}).getSelectionVariant();if(N.oSmartFilterbar.getEntitySet()!==i.getEntitySet()){d1.FilterContextUrl=J.oServices.oApplication.getNavigationHandler().constructContextUrl(i.getEntitySet(),i.getModel());}var e1=JSON.stringify(d1);J.oCommonUtils.semanticObjectLinkNavigation(e,e1,K);},onAssignedFiltersChanged:function(e){if(e&&e.getSource()){if(N&&N.oSmartFilterbar&&N.filterBarController){K.byId("template::FilterText").setText(N.oSmartFilterbar.retrieveFiltersWithValuesAsText());}}},onToggleFiltersPressed:function(){var e=K.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isHeaderExpanded",(i.getProperty("/listReport/isHeaderExpanded")===true)?false:true);},onSearchButtonPressed:function(){if(D.system.phone&&N.oPage.getHeaderExpanded()){N.oPage.setHeaderExpanded(false);}var e=K.getOwnerComponent().getModel();N.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/filterChanged',false);e.attachEventOnce("requestSent",function(){if(!N._bIsStartingUp){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}else{N.oIappStateHandler.fnResolveStartUpPromise();}});N.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/_ignoreChartSelections',true);J.oCommonUtils.refreshModel(N.oSmartTable.getEntitySet());Q();},onSemanticObjectLinkPopoverLinkPressed:function(e){J.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,N);},onSemanticObjectLinkNavigationPressed:$,onSemanticObjectLinkNavigationTargetObtained:_,onAfterTableVariantSave:function(){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterApplyTableVariant:function(){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterChartVariantSave:function(e){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();J.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onAfterApplyChartVariant:function(){N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFilterModeSegmentedButtonChange:function(e){N.filterBarController.handleFilterSwitch(e.getParameter("key"),e.oSource._bApplyingVariant);N.oController._templateEventHandlers.onSegmentButtonPressed();N.filterBarController.fnCheckMandatory();},onContentViewSegmentButtonPressed:function(e){if(e.getParameter("key")==="crosstable"&&!N.oAnalyticGrid){N.oAnalyticGridController.initAnalyticGrid();}if(!N.oSmartFilterableKPI&&!N.oController.getOwnerComponent().getContentTitle()){var i=N.oController.getView(),d1;if(e.getSource().getSelectedKey()==="customview1"){d1="template::contentViewExtensionToolbar";}else if(e.getSource().getSelectedKey()==="customview2"){d1="template::contentViewExtension2Toolbar";}else if(e.getSource().getSelectedKey()==="chart"||e.getSource().getSelectedKey()==="charttable"){d1=i.byId("template::masterViewExtensionToolbar")?"template::masterViewExtensionToolbar":"template::ChartToolbar";}else if(e.getSource().getSelectedKey()==="table"){d1="template::TableToolbar";}N.oController._templateEventHandlers.setFocusOnContentViewSegmentedButtonItem(i,d1);}N.oController._templateEventHandlers.onSegmentButtonPressed(!N.oController.getOwnerComponent().getProperty('smartVariantManagement'));},setFocusOnContentViewSegmentedButtonItem:function(e,i){var d1=e.byId(i);if(d1){var e1=d1.getContent().length,f1=d1.getContent()[e1-1];if(f1){f1.addEventDelegate({onAfterRendering:function(g1){g1.srcControl.focus();}});}}},onSegmentButtonPressed:function(i){if(!i){N.oController.byId('template::PageVariant').currentVariantSetModified(true);N.oSmartFilterbar.setFilterData({_CUSTOM:N.oIappStateHandler.getFilterState()});}N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onShareListReportActionButtonPress:function(e){J.oCommonUtils.executeIfControlReady(c1,"template::Share");},onDeterminingDataFieldForAction:function(e){var i=N.oController.getOwnerComponent().getModel("_templPriv");var d1=i.getProperty('/alp/contentView');var e1=J.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(d1===y?N.oSmartChart:N.oSmartTable);J.oCommonEventHandlers.onDeterminingDataFieldForAction(e,e1);},onDeterminingDataFieldForIntentBasedNavigation:function(e){var i=e.getSource();var d1=N.oController.getOwnerComponent().getModel("_templPriv");var e1=d1.getProperty('/alp/contentView');var f1=J.oServices.oPresentationControlHandlerFactory.getPresentationControlHandler(e1===y?N.oSmartChart:N.oSmartTable).getSelectedContexts();J.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(i,f1,N.oSmartFilterbar);},onInlineDataFieldForAction:function(e){J.oCommonEventHandlers.onInlineDataFieldForAction(e);},onInlineDataFieldForIntentBasedNavigation:function(e){J.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),N);},onAutoHideToggle:function(){N.oSmartTable.getModel("_tableHighlight").setProperty("/highlightMode","eyeModeSwitch");N.chartController&&N.chartController._updateTable();N.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFullScreenToggled:function(e){var i=e.getParameter("fullScreen");var d1=e.getSource().getModel("_templPriv");d1.setProperty("/alp/fullScreen",i);},onDialogClosed:function(e){N.visualFilterDialogContainer._closeDialog.call(N.visualFilterDialogContainer,e);},onDialogOpened:function(e){if(!N.visualFilterDialogContainer){N.visualFilterDialogContainer=new a();N.visualFilterDialogContainer.init(N);}var i=N.oController.getView().getModel("_templPriv"),d1=z,e1={},f1;f1=i.getProperty("/alp/searchable");if(!f1){if(N.alr_visualFilterBar&&!N.alr_visualFilterBar.getAssociateValueListsCalled()){N.alr_visualFilterBar.setAssociateValueListsCalled(true);N.oSmartFilterbar.associateValueLists();}}e1.item=new d({icon:"sap-icon://filter-analytics",tooltip:"{i18n>FILTER_VISUAL}",key:d1,enabled:"{_templPriv>/alp/searchable}"});e1.selectionChange=function(e){N.visualFilterDialogContainer._toggle.call(N.visualFilterDialogContainer,e);};e1.content=N.visualFilterDialogContainer._createForm();e1.search=function(e){N.visualFilterDialogContainer._triggerSearchInFilterDialog.call(N.visualFilterDialogContainer,e);};N.oSmartFilterbar.addAdaptFilterDialogCustomContent(e1);},onSearchForFilters:function(e){N.visualFilterDialogContainer._triggerSearchInFilterDialog.call(N.visualFilterDialogContainer,e);},onDialogSearch:function(e){N.visualFilterDialogContainer._searchDialog.call(N.visualFilterDialogContainer);},onDialogClear:function(e){K.onClearFilterExtension(e);},onRestore:function(e){N.visualFilterDialogContainer._restoreDialog.call(N.visualFilterDialogContainer);},onDialogCancel:function(e){N.visualFilterDialogContainer._cancelDialog.call(N.visualFilterDialogContainer);},onDataReceived:function(e){N.oContentArea.enableToolbar();J.oCommonEventHandlers.onDataReceived(e);J.oComponentUtils.hidePlaceholder();},onRowSelectionChange:function(e){var i=e.getSource();J.oCommonUtils.setEnabledToolbarButtons(i);},onDataRequested:function(){N.oMultipleViewsHandler.onDataRequested();}},formatters:{formatItemTextForMultipleView:function(i){return N.oMultipleViewsHandler?N.oMultipleViewsHandler.formatItemTextForMultipleView(i):"";},formatMessageStrip:function(i,e){return N.oMultipleViewsHandler?N.oMultipleViewsHandler.formatMessageStrip(i,e):"";}},extensionAPI:new E(J,K,N)};}};});
