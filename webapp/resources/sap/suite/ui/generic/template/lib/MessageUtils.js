sap.ui.define(["sap/ui/generic/app/util/MessageUtil","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger"],function(G,c,F){"use strict";var l=new F("lib.MessageUtils").getLogger();function h(o,C,S,e,p,m){p=p||{};var E=G.parseErrorResponse(e);var M=E.messageText;var a;var b=false;var d=false;var f=C&&C.getOwnerComponent();var r=p.resourceBundle||f.getModel("i18n").getResourceBundle();var g=p.navigationController||S.oNavigationController;var j=p.model||f.getModel();l.debug("handleError has been called with operation "+o+" and HTTP response status code "+E.httpStatusCode);var k=m&&m[E.httpStatusCode];if(k){k(E.httpStatusCode);}var H=E.httpStatusCode;switch(H){case 400:switch(o){case G.operations.modifyEntity:break;case G.operations.callAction:M=r.getText("ST_GENERIC_BAD_REQUEST_ACTION");break;case G.operations.deleteEntity:M=r.getText("ST_GENERIC_BAD_REQUEST_DELETE");break;case G.operations.editEntity:M=r.getText("ST_GENERIC_BAD_REQUEST_EDIT");break;case G.operations.saveEntity:case G.operations.activateDraftEntity:if(S&&S.oTemplateCapabilities&&S.oTemplateCapabilities.oMessageButtonHelper&&S.oTemplateCapabilities.oMessageButtonHelper.showMessagePopover){S.oTemplateCapabilities.oMessageButtonHelper.showMessagePopover();d=true;}else{l.info("A MessageButtonHelper class instance could not be found as one of the services' template capabilities.");}break;default:M=r.getText("ST_GENERIC_BAD_REQUEST");break;}break;case 401:b=true;M=r.getText("ST_GENERIC_ERROR_AUTHENTICATED_FAILED");a=r.getText("ST_GENERIC_ERROR_AUTHENTICATED_FAILED_DESC");break;case 403:switch(o){case G.operations.callAction:M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_ACTION");break;case G.operations.addEntry:M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_CREATE");break;case G.operations.deleteEntity:M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_DELETE");break;case G.operations.editEntity:M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_EDIT");break;default:M=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED");a=r.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_DESC");b=true;break;}break;case 404:switch(o){case G.operations.callAction:M=r.getText("ST_GENERIC_BAD_REQUEST_ACTION");break;default:M=r.getText("ST_GENERIC_BAD_REQUEST");break;}break;case 409:case 412:if((o===G.operations.activateDraftEntity||o===G.operations.deleteEntity)&&e.response&&e.response.headers&&e.response.headers["preference-applied"]==="handling=strict"){return;}break;case 422:break;case 423:if(o===G.operations.activateDraftEntity||o===G.operations.saveEntity||o===G.operations.deleteEntity){return;}break;case 500:case 501:case 502:case 503:case 504:case 505:b=!Object.keys(G.operations).some(function(q){return q===o;});switch(o){case G.operations.callAction:M=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_FOR_ACTION");break;default:M=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE");break;}a=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_DESC");break;case 0:b=false;d=true;break;default:b=true;M=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE");a=r.getText("ST_GENERIC_ERROR_SYSTEM_UNAVAILABLE_DESC");break;}if(b){var v;if(f){var t=f.getModel("_templPriv");v=t.getProperty("/generic/viewLevel");}g.navigateToMessagePage({title:r.getText("ST_GENERIC_ERROR_TITLE"),text:M,description:a,icon:"sap-icon://message-error",viewLevel:v});}else{if(!E.containsTransientMessage&&!d){G.addTransientErrorMessage(M,a,j);}}}function n(C,m){var I=C.getPositionableControlId(m.controlIds,true);c.focusControl(I);}function N(C,e,p){var m=e.getParameter("item");var M=m.getBindingContext("msg").getObject();if(p){p(M);}n(C,M);}function s(f,S){var m=sap.ui.getCore().getMessageManager().getMessageModel().getData();var M=m.some(function(o){return o.persistent;});if(!M){S.oApplication.showMessageToast(f);}}function i(m){var t=m.getTechnicalDetails();return!!t&&t.statusCode==="412"&&!t.headers["preference-applied"];}return{operations:G.operations,handleTransientMessages:G.handleTransientMessages,handleError:h,navigateFromMessageTitleEvent:N,removeTransientMessages:G.removeTransientMessages,getTransientMessages:G.getTransientMessages,showSuccessMessageIfRequired:s,parseError:G.parseErrorResponse,isMessageETagMessage:i};});
