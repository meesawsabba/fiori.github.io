sap.ui.define(["sap/ui/base/Object","sap/ui/base/Event","sap/ui/core/mvc/ControllerExtension","sap/ui/model/Context","sap/ui/model/Filter","sap/m/Table","sap/m/MessageBox","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/generic/app/navigation/service/NavError","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/metadataAnalyser","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/ui/model/analytics/odata4analytics","sap/base/util/extend","sap/base/util/deepExtend","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/js/StableIdHelper","sap/suite/ui/generic/template/genericUtilities/ControlStateWrapperFactory","sap/suite/ui/generic/template/genericUtilities/oDataModelHelper"],function(B,E,C,a,F,R,M,S,N,c,m,t,b,o,d,f,g,h,l,D){"use strict";var s="lib.CommonUtils";var n=sap.ui.getCore();var L=new b(s).getLogger();function p(q,r,u){var v;var w=new l(q);var x=Object.create(null);var O=Object.create(null);function P(e){var i;if(c.isSmartTable(e)){i=e.getCustomToolbar();}else if(c.isSmartChart(e)){i=e.getToolbar();}if(i){var j=X(i);if(j&&j.annotatedActionIds){O[e.getId()]=JSON.parse(atob(j.annotatedActionIds));}if(j&&j.deleteButtonId){O[e.getId()].push({ID:j.deleteButtonId,RecordType:"CRUDActionDelete"});}if(j&&j.multiEditButtonId){O[e.getId()].push({ID:j.multiEditButtonId,RecordType:"CRUDActionMultiEdit"});}}}function G(e){if(!O[e.getId()]){P(e);}return O[e.getId()];}function y(e){var i,j,k;i=q.getOwnerComponent().getModel().getMetaModel();j=i.getODataEntitySet(e);k=i.getODataEntityType(j.entityType);return k;}function z(e,i,j){var k=e instanceof E?e.getSource():e;var J1=k.getId();var K1=x[J1];if(!K1){if(j){return null;}K1={control:k,infoObject:Object.create(null),categories:[]};(i||Function.prototype)(K1.infoObject,K1.categories,k);x[J1]=K1;}return K1.infoObject;}function A(e,i){for(var j in x){var k=x[j];if(k.categories.indexOf(e)>=0){i(k.infoObject,k.control);}}}function H(e){r.oApplication.attachControlToParent(e,q.getView());}function I(e,i,j){var k="";var J1=q.getView();var K1=e.find(function(L1){var M1;var N1=j&&function(O1){j(L1,O1,M1);M1=O1;};if(c.isElementVisibleOnView(L1,J1,N1)){if(i){var O1=n.byId(L1);if(c.isSmartTable(O1)||c.isMTable(O1)||c.isUiTable(O1)){k=k||L1;return false;}}return true;}});return K1||k;}function J(e,i,j,k){return r.oApplication.getDialogFragmentForView(q.getView(),e,i,j,k);}function K(e,i,j,k,J1){return r.oApplication.getDialogFragmentForViewAsync(q.getView(),e,i,j,k,J1);}var Q;function T(k,e,i){var j=q.getOwnerComponent();Q=Q||j.getModel("i18n").getResourceBundle();return Q.getText(k,e,i);}function U(k,e,i,j){var J1,K1,L1,M1;var N1=q.getOwnerComponent();var O1=e.indexOf("::"+N1.getEntitySet()+"--")+2;J1=e.substring(O1,e.lastIndexOf("::"));J1=J1.replace(/--/g,"|").replace(/::/g,"|");L1=i||k;K1=J1&&J1!='|'?k+"|"+J1:L1;M1=T(K1,j,true);if(!M1&&K1!=L1){M1=T(L1,j);}return M1;}function V(i,e){var e=e||i.getSelectionBehavior();if(e==="DATAPOINT"){return{"dataPoints":i.getSelectedDataPoints().dataPoints,"count":i.getSelectedDataPoints().count};}else if(e==="CATEGORY"){return{"dataPoints":i.getSelectedCategories().categories,"count":i.getSelectedCategories().count};}else if(e==="SERIES"){return{"dataPoints":i.getSelectedSeries().series,"count":i.getSelectedSeries().count};}}function W(e){return r.oPresentationControlHandlerFactory.getPresentationControlHandler(i1(e)).getSelectedContexts();}function X(e){var i={};if(e instanceof sap.ui.core.Element){e.getCustomData().forEach(function(j){i[j.getKey()]=j.getValue();});}return i;}function Y(e){var j,k;var J1=h1(e);if(!c.isSmartTable(J1)&&!c.isSmartChart(J1)){J1=J1.getParent();}var K1=W(J1);var L1=J1.getModel();e1(K1,L1,J1);j=G(J1);for(var i=0;i<j.length;i++){k=j[i];Z(k,L1,K1,J1);}}function Z(e,i,j,k){var J1;if(e.RecordType==="CRUDActionDelete"){var K1=b1(i,j,k);u.getTemplatePrivateModel().setProperty("/listReport/deleteEnabled",K1);J1=Promise.resolve(K1);}else if(e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||e.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){var L1=i.getMetaModel();J1=a1(i,L1,j,e.RecordType,e.Action,k);}else if(e.RecordType==="CRUDActionMultiEdit"){u.getTemplatePrivateModel().setProperty("/listReport/multiEditEnabled",j.filter(d1).length>0);}var M1=q.getView().byId(e.ID);if(M1&&/generic\/controlProperties/.test(M1.getBindingPath("enabled"))){J1.then(_.bind(null,e.ID,"enabled"));}}function $(e){var i=h1(e);e1(W(i),e.getModel(),i);}function _(i,e,j){var k=u.getTemplatePrivateModel();var J1=k.getProperty("/generic/controlProperties/"+i);if(!J1){J1={};J1[e]=j;k.setProperty("/generic/controlProperties/"+i,J1);}else{k.setProperty("/generic/controlProperties/"+i+"/"+e,j);}}function a1(e,i,k,J1,K1,L1){var M1,N1,O1,P1;var Q1=false;if(J1==="com.sap.vocabularies.UI.v1.DataFieldForAction"){M1=i.getODataFunctionImport(K1);O1=M1&&M1["sap:action-for"];if(O1&&O1!==""&&O1!==" "){if(k.length>0){P1=M1["sap:applicable-path"];if(P1&&P1!==""&&P1!==" "){for(var j=0;j<k.length;j++){if(!k[j]){continue;}N1=e.getObject(k[j].getPath());if(N1&&N1[P1]){Q1=true;break;}}}else{Q1=true;}}}else{Q1=true;}}else if(J1==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(k.length>0){Q1=true;}else if(c.isSmartChart(L1)){return L1.getChartAsync().then(function(){return L1.getDrillStackFilters().length>0;});}}return Promise.resolve(Q1);}function b1(e,i,j){if(i.length===0){return false;}var k=c1(j);var J1=k&&k.Deletable&&k.Deletable.Path;return i.some(function(K1){var L1=e.getObject(K1.getPath()+"/DraftAdministrativeData");var M1=!(L1&&L1.InProcessByUser&&!L1.DraftIsProcessedByMe);return M1&&!(J1&&!e.getProperty(J1,K1));});}function c1(e){var i=e.getModel()&&e.getModel().getMetaModel();var j=i&&i.getODataEntitySet(e.getEntitySet());var k=j&&j["Org.OData.Capabilities.V1.DeleteRestrictions"];return k;}function d1(e){var i=e.getModel();var j=i.getMetaModel().getODataEntitySet(D.analyseContext(e).entitySet);var k=j["Org.OData.Capabilities.V1.UpdateRestrictions"]&&j["Org.OData.Capabilities.V1.UpdateRestrictions"].Updatable;if(k){if(k.Path){return!!i.getProperty(k.Path,e);}else if(k.Bool!=="false"){return true;}}}function e1(e,i,j){var k=g1(j);var J1=u.getTemplatePrivateModel();var K1=J1.getProperty("/generic/listCommons/breakoutActionsEnabled");if(k){var L1=q.byId("template::IconTabBar");var M1="";if(L1){M1=L1.getSelectedKey();}f1(K1,k,e,i,M1,j);}J1.setProperty("/generic/listCommons/breakoutActionsEnabled",K1);}function f1(e,i,j,k,J1,K1){var L1;for(var M1 in i){L1=true;var N1=i[M1].id+((J1&&!i[M1].determining)?"-"+J1:"");if(K1&&K1.getId().indexOf("AnalyticalListPage")>-1){L1=!!e[N1].enabled;}if(i[M1].requiresSelection){if(j.length>0){if(K1&&c.isSmartChart(K1)){if(i[M1].filter==="chart"){L1=true;}}else if(K1&&c.isSmartTable(K1)){if(i[M1].filter!=="chart"){L1=true;}}if(i[M1].applicablePath!==undefined&&i[M1].applicablePath!==""){L1=false;for(var O1=0;O1<j.length;O1++){var P1="";var Q1=i[M1].applicablePath.split("/");if(Q1.length>1){for(var R1=0;R1<Q1.length-1;R1++){P1+="/"+Q1[R1];}}var S1=k.getObject(j[O1].getPath()+P1);var T1=Q1[Q1.length-1];if(S1[T1]===true){L1=true;break;}}}}else if(c.isSmartChart(K1)){if((K1.getId().indexOf("AnalyticalListPage")>-1?i[M1].filter==="chart":true)){if(K1.getDrillStackFilters().length>0){L1=true;}else{L1=false;}}}else{if(i[M1].filter!=="chart"){L1=false;}}}e[N1]={enabled:L1};}}function g1(e){var i=u.getControllerExtensions();var j=X(e).sectionId;if(!j){return i&&i["Actions"];}else{return i&&i.Sections&&i.Sections[j]&&i.Sections[j].Actions;}}function h1(e){var i=e;while(i){if(i instanceof R||c.isUiTable(i)||c.isSmartTable(i)||c.isSmartChart(i)||c.isSmartList(i)){return i;}i=i.getParent&&i.getParent();}return null;}function i1(e){var i=e;while(i){if(c.isSmartTable(i)||c.isSmartChart(i)||c.isSmartList(i)){return i;}i=i.getParent&&i.getParent();}return null;}function j1(e){var i=q.getOwnerComponent();var j=i.getModel();if(!r.oApplication.checkEtags()&&e){var k=j.getMetaModel().getODataEntitySet(e);if(q.getMetadata().getName()==='sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage'&&k1(j,k)){j.invalidateEntityType(k.entityType);}else{j.invalidate(l1.bind(null,e));}var J1=i.getId();var K1=Object.create(null);K1[J1]=true;r.oApplication.refreshAllComponents(K1);return true;}return false;}function k1(e,i){var j=new o.Model(o.Model.ReferenceByModel(e));var k=j.findQueryResultByName(i.name);var J1=k&&k.getParameterization();return!!J1;}function l1(e,k){return k.split("(")[0]===e;}function m1(e,i){var j;if(u.isDraftEnabled()){j=r.oDraftController.isActiveEntity(e)?1:6;}else{var k=q.getOwnerComponent();j=k.getModel("ui").getProperty("/editable")?6:1;}u.navigateAccordingToContext(e,j,i);}function n1(e){if(e instanceof N){if(e.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(T("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:T("ST_GENERIC_ERROR_TITLE")});}else{M.show(e.getErrorCode(),{title:T("ST_GENERIC_ERROR_TITLE")});}}}function o1(e,i){A1(function(){v=r.oApplication.getNavigationHandler();var j={semanticObject:e.semanticObject,action:e.action};var k=v.mixAttributesAndSelectionVariant(e.parameters);if(typeof q.adaptNavigationParameterExtension==="function"){q.adaptNavigationParameterExtension(k,j);}I1(e);v.navigate(e.semanticObject,e.action,k.toJSONString(),null,n1);},Function.prototype,"LeaveApp");}function p1(e){var J1=[],K1,L1,M1;var N1=q.getOwnerComponent();var O1=N1.getModel().getMetaModel();if(!e){return{};}var P1=N1.getAppComponent().getConfig().pages[0];if(!P1){return{};}var Q1=function(i){M1=O1.getODataEntitySet(i.entitySet).entityType;L1=O1.getODataEntityType(M1);K1={};K1={entitySet:i.entitySet,aKeys:O1.getODataEntityType(M1).key.propertyRef,navigationProperty:i.navigationProperty};for(var j=0,S1=K1.aKeys.length;j<S1;j++){var k=0,T1=L1.property.length;for(k;k<T1;k++){if(K1.aKeys[j].name===L1.property[k].name){K1.aKeys[j].type=L1.property[k].type;break;}}}};var R1=function(e,P1){if(!P1.pages){return J1;}for(var i=0,j=P1.pages.length;i<j;i++){if(!P1.pages[i]){break;}if(e===P1.pages[i].entitySet){Q1(P1.pages[i]);J1.splice(0,0,K1);break;}J1=R1(e,P1.pages[i]);if(J1.length>0){Q1(P1.pages[i]);J1.splice(0,0,K1);}}return J1;};return R1(e,P1);}function q1(k,e){var J1,K1,i,L1;for(i=0,L1=k.length;i<L1;i++){if(k[i].navigationProperty){K1+="/"+k[i].navigationProperty;}else{K1="/"+k[i].entitySet;}for(var j=0,M1=k[i].aKeys.length;j<M1;j++){if(j===0){K1+="(";J1="";}else{J1=",";}switch(k[i].aKeys[j].type){case"Edm.Guid":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){K1+=J1+k[i].aKeys[j].name+"="+"guid'"+e.DraftAdministrativeData.DraftUUID+"'";}else{K1+=J1+k[i].aKeys[j].name+"="+"guid'"+e[k[i].aKeys[j].name]+"'";}break;case"Edm.Boolean":if(e.DraftAdministrativeData&&e.DraftAdministrativeData.DraftIsCreatedByMe){K1+=J1+k[i].aKeys[j].name+"="+false;}else{K1+=J1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;default:if(typeof e[k[i].aKeys[j].name]==="string"){K1+=J1+k[i].aKeys[j].name+"="+"'"+e[k[i].aKeys[j].name]+"'";}else{K1+=J1+k[i].aKeys[j].name+"="+e[k[i].aKeys[j].name];}break;}if(j===(M1-1)){K1+=")";}}}return K1;}function r1(e,k,q,J1){var K1,L1,M1,N1,O1,P1,Q1;var R1={semanticObject:"",action:""};var S1=e.getParameters();v=r.oApplication.getNavigationHandler();K1=v.mixAttributesAndSelectionVariant({},k);for(N1 in S1.semanticAttributesOfSemanticObjects){for(M1 in S1.semanticAttributesOfSemanticObjects[N1]){if(!K1.getSelectOption(M1)){K1.addParameter(M1,"");}}O1=K1.getPropertyNames();R1.semanticObject=N1;P1=K1.getSelectOptionsPropertyNames();Q1=K1.getParameterNames();for(var i=0,T1=O1.length;i<T1;i++){if(P1.indexOf(O1[i])<0&&Q1.indexOf(O1[i])<0){delete S1.semanticAttributesOfSemanticObjects[N1][O1[i]];K1.removeSelectOption(O1[i]);}}if(N1===S1.semanticObject){var U1=S1.semanticAttributesOfSemanticObjects[""];for(var j=0,T1=Q1.length;j<T1;j++){K1.removeParameter(Q1[j]);if(!(Q1[j]in U1)){var V1=S1.semanticAttributesOfSemanticObjects[S1.semanticObject][Q1[j]];V1=(typeof V1==="undefined"||V1===null)?"":String(V1);K1.addParameter(Q1[j],V1);}}K1=v.mixAttributesAndSelectionVariant(S1.semanticAttributesOfSemanticObjects[N1],K1.toJSONString());K1=s1(K1,e.getSource(),J1);q.adaptNavigationParameterExtension(K1,R1);L1=K1.toJSONString();}}delete S1.semanticAttributes;v.processBeforeSmartLinkPopoverOpens(S1,L1);}function s1(e,i,j){var k;var J1=[];var K1=q.getOwnerComponent().getEntitySet();if(!c.isSemanticObjectController(i)&&!c.isSmartTable(i)){var L1=h1(i)&&h1(i).getParent();if(c.isSmartTable(L1)){i=L1;k=i.getEntitySet();}else{k=K1;}}else{k=i.getEntitySet();}J1.push(k);var M1=j&&j.oMultipleViewsHandler&&j.oMultipleViewsHandler.getMode&&j.oMultipleViewsHandler.getMode()==="multi";if((k!==K1)&&!M1){J1.push(K1);}J1.forEach(function(N1){if(i){var O1=i.getModel().getMetaModel();var P1=O1.getODataEntityType(O1.getODataEntitySet(N1).entityType);e.getPropertyNames().forEach(function(Q1){var R1=O1.getODataProperty(P1,Q1);if(R1&&((R1["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]&&R1["com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"].Bool!=="false")||(R1["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&R1["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool!=="false"))){e.removeSelectOption(Q1);}});}});return e;}function t1(e,j){var k=function(N1){for(var i=0;i<N1.length;i++){j(N1[i].name);}};var J1=q.getView().getModel().getMetaModel();var K1=J1.getODataEntitySet(e,false);var L1=J1.getODataEntityType(K1.entityType,false);k(L1.key.propertyRef);var M1=r.oDraftController.getDraftContext();if(M1.isDraftEnabled(e)){k(M1.getSemanticKey(e));j("IsActiveEntity");j("HasDraftEntity");j("HasActiveEntity");}}function u1(i,j,k,J1){if(J1&&k&&k.getAnalyticBindingPath&&k.getConsiderAnalyticalParameters()){try{var K1=k.getAnalyticBindingPath();var L1=i.getEntitySet();var M1=i.getModel();var N1=M1.getMetaModel();var O1=N1.getODataEntitySet(L1);var P1=q.getOwnerComponent();var Q1=P1.getAppComponent();var R1=m.getParametersByEntitySet(Q1.getModel(),L1);if(j){var S1=j(O1,R1);K1=S1||K1;}if(K1){J1(K1);}}catch(e){L.warning("Mandatory parameters have no values");}}}function v1(e,j,k){for(var i=0;i<j.length;i++){var J1=j[i];var K1=J1.lastIndexOf("/");var L1;if(K1<0){if(r.oApplication.getNavigationProperty(e,J1)){L1=J1;}else{continue;}}else{L1=J1.substring(0,K1);}if(k.indexOf(L1)===-1){k.push(L1);}}}function w1(e,i,j){var k=e.getParameter("bindingParams"),J1=e.getSource().getId();k.parameters=k.parameters||{};k.parameters.transitionMessagesOnly=u.getNoStateMessagesForTables();var K1=function(R1,S1,J1){if(i&&i[R1]){var T1=true;var U1=function(){var V1=arguments[0];if(!(V1 instanceof C)){throw new g(s,"Please provide a valid ControllerExtension in order to execute extension "+R1);}if(!T1){throw new g(s,"Extension "+R1+" must be executed synchronously");}var W1=Array.prototype.slice.call(arguments,1);S1.apply(null,W1);};i[R1](U1,J1);T1=false;}};var L1=function(R1){if(!J1||q.byId(J1)===e.getSource()){k.filters.push(R1);}};if(i.addTemplateSpecificFilters){i.addTemplateSpecificFilters(k.filters);}K1("addExtensionFilters",L1,J1);var M1=e.getSource();if(q.getMetadata().getName()!=='sap.suite.ui.generic.template.ObjectPage.view.Details'){u1(M1,i.resolveParamaterizedEntitySet,j,i.setBindingPath);}var N1=M1.getEntitySet();var O1=k.parameters.select&&k.parameters.select.split(",")||[];var P1=k.parameters.expand&&k.parameters.expand.split(",")||[];var Q1=function(R1,J1){if(R1&&(!J1||q.byId(J1)===e.getSource())){var S1=R1.split(',');S1.forEach(function(T1){if(T1&&O1.indexOf(T1)===-1){O1.push(T1);}});}};if(i.isMandatoryFiltersRequired){t1(N1,Q1);}K1("ensureExtensionFields",Q1,J1);(i.addNecessaryFields||Function.prototype)(O1,Q1,N1);v1(N1,O1,P1);if(P1.length>0){k.parameters.expand=P1.join(",");}if(O1.length>0){k.parameters.select=O1.join(",");}}function x1(e,i,j){if(!e){return T("DRAFT_OBJECT");}else if(i){return T(j?"LOCKED_OBJECT":"UNSAVED_CHANGES");}else{return"";}}function y1(){return new Promise(function(e){var i;K("sap.suite.ui.generic.template.fragments.DraftAdminDataPopover",{formatText:function(){var j=Array.prototype.slice.call(arguments,1);var k=arguments[0];if(!k){return"";}if(j.length>0&&(j[0]===null||j[0]===undefined||j[0]==="")){if(j.length>3&&(j[3]===null||j[3]===undefined||j[3]==="")){return(j.length>2&&(j[1]===null||j[1]===undefined||j[1]===""))?"":j[2];}else{return T(k,j[3]);}}else{return T(k,j[0]);}},closeDraftAdminPopover:function(){i.close();},formatDraftLockText:x1},"admin").then(function(j){i=j;e(i);});});}function z1(e,i,j,k){return r.oDataLossHandler.performIfNoDataLoss(e,i,k,true,true);}function A1(e,i,j,k){j=j||"LeavePage";if(u.isDraftEnabled()){return r.oPageLeaveHandler.performAfterDiscardOrKeepDraft(e,i,j,k,false);}else{return r.oDataLossHandler.performIfNoDataLoss(e,i,j,k,false);}}function B1(e,i){i=f({busy:{set:true,check:true},dataloss:{popup:true,navigation:false}},i);var j,k;var J1=new Promise(function(N1,O1){j=N1;k=O1;});var K1=i.busy.set?function(){r.oApplication.getBusyHelper().setBusy(J1,false,{actionLabel:i.sActionLabel});return e();}:e;var L1=i.mConsiderObjectsAsDeleted?function(N1){r.oApplication.prepareDeletion(i.mConsiderObjectsAsDeleted);return K1();}:K1;var M1=function(){var N1;if(u.isDraftEnabled()){N1=L1();}else{N1=(i.dataloss.popup?A1(L1,k,null,(i.dataloss.navigation?"LeavePage":"Proceed"),true):L1());}if(N1 instanceof Promise){N1.then(j,k);}else{j(N1);}};r.oApplication.performAfterSideEffectExecution(M1,i.busy.check&&k);return J1;}function C1(e){var i=e.getId()+"-variant";var j=sap.ui.getCore().byId(i);var k=j.getDefaultVariantKey();return k===j.STANDARDVARIANTKEY?"":k;}function D1(e){var i=e.getId()+"-variant";var j=sap.ui.getCore().byId(i);var k=j.getDefaultVariantKey();return k===j.STANDARDVARIANTKEY?"":k;}function E1(e){var j;var k=u.getTemplatePrivateModel();var J1=q.getOwnerComponent();var K1,L1,M1,N1,O1,P1=[],Q1=[],i,R1,S1,T1,U1,V1,W1;var X1,Y1;K1=J1.getAppComponent();L1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");M1=k.getProperty("/generic/supportedIntents/");if(c.isSmartChart(e)){j=e.getToolbar();}else if(c.isSmartTable(e)){j=e.getCustomToolbar();}N1=j.getContent();O1=N1.length;for(i=0;i<O1;i++){R1=X(N1[i]);if(R1.hasOwnProperty("SemanticObject")&&R1.hasOwnProperty("Action")){S1=R1.SemanticObject;T1=R1.Action;U1={semanticObject:S1,action:T1,ui5Component:K1};P1.push([U1]);V1=d({},U1);V1.bLinkIsSupported=false;Q1.push(V1);}}if(P1.length>0&&L1){W1=L1.getLinks(P1);W1.done(function(Z1){M1=k.getProperty("/generic/supportedIntents/");X1=Z1.length;for(i=0;i<X1;i++){if(Z1[i][0].length>0){Q1[i].bLinkIsSupported=true;}S1=Q1[i].semanticObject;T1=Q1[i].action;Y1=k.getProperty("/generic/supportedIntents/"+S1);if(!Y1){M1[S1]={};M1[S1][T1]={"visible":Q1[i].bLinkIsSupported};}else if(!Y1[T1]){Y1[T1]={"visible":Q1[i].bLinkIsSupported};}else{Y1[T1]["visible"]=Q1[i].bLinkIsSupported;}}k.updateBindings();});}}function F1(e,i){var j=i&&q.byId(i);var k=(i&&!j)?Promise.reject():new Promise(function(J1,K1){r.oApplication.performAfterSideEffectExecution(function(){var L1=r.oApplication.getBusyHelper();if(L1.isBusy()){K1();return;}if(j&&(!j.getVisible()||(j.getEnabled&&!j.getEnabled()))){K1();return;}var k=j?e(j):e();if(k instanceof Promise){k.then(J1,K1);L1.setBusy(k);}else{J1(k);}});});k.catch(Function.prototype);return k;}function G1(e,i,j,k,J1){var K1,L1={};if(!i){K1=[];}else if(Array.isArray(i)){K1=i;}else{K1=[i];}if(j){L1.urlParameters=j;}if(k&&k.bInvocationGroupingChangeSet){L1.operationGrouping="com.sap.vocabularies.UI.v1.OperationGroupingType/ChangeSet";}L1.triggerChanges=u.isDraftEnabled();u.executeBeforeInvokeActionFromExtensionAPI(J1);var M1=r.oApplicationController.invokeActions(e,K1,L1);if(k&&k.bSetBusy){u.getBusyHelper().setBusy(M1);}M1.then(u.executeAfterInvokeActionFromExtensionAPI.bind(null,J1));return M1;}function H1(e){var i=r.oApplication.getChevronNavigationRefreshBehaviour(e);if(i!==Object.create(null)){r.oViewDependencyHelper.setRefreshBehaviour(i);}}function I1(e){var i=r.oApplication.getComponentRefreshBehaviour(e);r.oViewDependencyHelper.setRefreshBehaviour(i);}var e1=t.testable(e1,"fillEnabledMapForBreakoutActions");var h1=t.testable(h1,"getOwnerControl");var W=t.testable(W,"getSelectedContexts");var G=t.testable(G,"fnGetToolbarCustomData");var s1=t.testable(s1,"removePropertiesFromNavigationContext");return{getPositionableControlId:I,getMetaModelEntityType:y,getText:T,getContextText:U,getNavigationKeyProperties:p1,mergeNavigationKeyPropertiesWithValues:q1,executeGlobalSideEffect:function(){if(u.isDraftEnabled()){var e=q.getView();var i=q.getOwnerComponent();var j=i.getAppComponent();var k=j.getForceGlobalRefresh();var J1=i.getModel("ui");e.attachBrowserEvent("keydown",function(K1){var L1=K1.target.type==="search";var M1=K1.target.type==="textarea";var N1=K1.target.id.indexOf("rowAction")>-1;var O1=K1.target.id.indexOf("ColumnListItem")>-1;if(K1.keyCode===13&&K1.ctrlKey!==true&&J1.getProperty("/editable")&&!L1&&!M1&&!N1&&!O1){r.oApplication.addSideEffectPromise(new Promise(function(P1,Q1){var R1;if(K1.target.type==="text"){var S1=K1.target.parentElement;while(S1){R1=e.byId(S1.id);if(R1&&R1.getMetadata().getElementName()==="sap.ui.comp.smartform.SmartForm"){break;}S1=S1.parentElement;}}var T1=R1?R1.check():Promise.resolve();T1.then(function(){setTimeout(function(){var U1=r.oApplicationController.executeSideEffects(e.getBindingContext(),null,null,k);U1.then(function(){P1();setTimeout(function(){var V1=document.getElementById(K1.target.id);if(V1){V1.focus();}});},Q1);});});}));}});}},setEnabledToolbarButtons:Y,setEnabledFooterButtons:$,fillEnabledMapForBreakoutActions:e1,getBreakoutActions:g1,getSelectedContexts:W,getSelectionPoints:V,getDeleteRestrictions:c1,getSmartTableDefaultVariant:C1,getSmartChartDefaultVariant:D1,setPrivateModelControlProperty:_,removePropertiesFromNavigationContext:s1,navigateFromListItem:m1,navigateExternal:o1,semanticObjectLinkNavigation:r1,getCustomData:function(e){var j=e.getSource().getCustomData();var k={};for(var i=0;i<j.length;i++){k[j[i].getKey()]=j[i].getValue();}return k;},getCustomDataText:function(e){return new Promise(function(j,k){e.getCustomData().forEach(function(J1){var K1=J1.getKey();if(K1==="text"){var L1=J1.getBinding("value");var M1=!L1&&J1.getBindingInfo("value");if(!L1&&!M1){j(J1.getValue());return;}var N1=function(O1){j(O1.getSource().getExternalValue());return;};if(L1){L1.attachChangeOnce(N1);}else{M1.events={change:N1};for(var i=0;i<M1.parts.length;i++){M1.parts[i].targetType="string";}}}});});},onBeforeRebindTableOrChart:w1,formatDraftLockText:x1,showDraftPopover:function(e,i){y1().then(function(j){var k=j.getModel("admin");k.setProperty("/IsActiveEntity",e.getProperty("IsActiveEntity"));k.setProperty("/HasDraftEntity",e.getProperty("HasDraftEntity"));j.bindElement({path:e.getPath()+"/DraftAdministrativeData"});if(j.getBindingContext()){j.openBy(i);}else{j.getObjectBinding().attachDataReceived(function(){j.openBy(i);});}});},getContentDensityClass:function(){return r.oApplication.getContentDensityClass();},attachControlToView:H,getDialogFragment:J,getDialogFragmentAsync:K,fnProcessDataLossOrDraftDiscardConfirmation:A1,processDataLossTechnicalErrorConfirmation:z1,securedExecution:B1,getOwnerControl:h1,getOwnerPresentationControl:i1,refreshModel:j1,getElementCustomData:X,triggerAction:function(e,i,j,k){r.oDataLossHandler.performIfNoDataLoss(function(){r.oCRUDManager.callAction({functionImportPath:j.Action,contexts:e,sourceControlHandler:k,label:j.Label,operationGrouping:""}).then(function(J1){if(J1&&J1.length>0){var K1=J1[0];if(K1.response&&K1.response.context&&(!K1.actionContext||K1.actionContext&&K1.response.context.getPath()!==K1.actionContext.getPath())){r.oApplication.getBusyHelper().getUnbusy().then(r.oViewDependencyHelper.setMeToDirty.bind(null,q.getOwnerComponent(),i));}else if(K1.context&&(!K1.actionContext||K1.actionContext&&K1.context.getPath()!==K1.actionContext.getPath())){r.oApplication.getBusyHelper().getUnbusy().then(r.oViewDependencyHelper.setMeToDirty.bind(null,q.getOwnerComponent(),i));}}});},Function.prototype,"Proceed",undefined,false);},checkToolbarIntentsSupported:E1,executeIfControlReady:F1,getControlInformation:z,executeForAllInformationObjects:A,invokeActionsForExtensionAPI:G1,isContextEditable:d1,setExternalChevronRefreshBehaviour:H1,setComponentRefreshBehaviour:I1,getControlStateWrapper:w.getControlStateWrapper};}return B.extend("sap.suite.ui.generic.template.lib.CommonUtils",{constructor:function(e,i,j){d(this,p(e,i,j));}});});
