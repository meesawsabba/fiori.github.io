/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/util/merge","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/ui/core/ComponentContainer","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/genericUtilities/oDataModelHelper","sap/suite/ui/generic/template/genericUtilities/ProcessObserver","sap/suite/ui/generic/template/genericUtilities/Queue","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/lib/CRUDHelper","sap/suite/ui/generic/template/lib/navigation/routingHelper","sap/suite/ui/generic/template/lib/navigation/startupParameterHelper","sap/suite/ui/generic/template/lib/TemplateComponent","sap/ui/fl/ControlPersonalizationAPI"],function(B,m,e,a,U,C,H,b,c,F,d,D,P,Q,t,f,r,s,T,g){"use strict";var h="lib.navigation.NavigationController";var l=new d(h).getLogger();var k=c.routing.HistoryDirection;var o=b.getInstance();function n(i){i=i||o.getDirection();return i===k.Backwards;}var p=r.getCrossAppNavService();var A="sap-iapp-state--create";var q="sap-iapp-state--history";function u(R){var i=R.substring(R.length-5,R.length);if(i==="query"){return R.substring(0,R.length-5);}return R;}function N(i){if(i.indexOf("/")===0){return i;}return"/"+i;}function v(j){var E="";var R="";var G=Object.keys(j).sort();G.forEach(function(I){var V=j[I];if(Array.isArray(V)){var J=V.sort();for(var i=0;i<J.length;i++){var K=J[i];R=R+E+I+"="+K;E="&";}}else{R=R+E+I+"="+V;E="&";}});return R;}function w(i,j){i=i||"";var E=(i.charAt(i.length-1)==="/")?"?":"/?";return i+(j?E+j:"");}function x(E,G){var S=[];var I=p.createEmptyAppState(E.oAppComponent,true);var J=I.getKey();var K;var L;var M;var O;var R;var V,W;var X;var Y;var Z;var $;var _=Promise.resolve();var a1=(new Q()).start();function b1(i,j){var $2=i.iHashChangeCount+1;W={iHashChangeCount:$2,backTarget:i.iHashChangeCount,componentsDisplayed:Object.create(null),LeaveByBack:true,backSteps:1};if(j){X.followUpNeeded={mode:j.mode,displayMode:j.displayMode,identity:{treeNode:E.mRoutingTree[j.route],keys:j.keys,appStates:j.appStates}};Q1(null);}}function c1(i){Y=false;E.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);Z={};L=n();if(L){E.oBusyHelper.getUnbusy().then(function(){L=false;});X={mode:-1};if(S.length){var j=S.pop();O=j.isInitialNavigation;M=j.myIntentPromise;R=j.previousHashes;R.push(j.currentHash);b1(j.currentHash,j.serializedBackOption);return;}}else{O=!p||p.isInitialNavigation();}E.myIntentPromise=sap.ushell&&sap.ushell.renderers&&sap.ushell.Container&&new Promise(function(a3){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(b3){var c3=b3.getCurrentApplication();var d3=function(){c3=c3||b3.getCurrentApplication();var e3=c3.getIntent();a3(e3);};if(c3){d3();}else{b3.attachAppLoaded(null,d3);}});});M=E.myIntentPromise?Promise.all([E.myIntentPromise,sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(a3){var b3=e({},a3[0]);var c3=a3[1];b3.appSpecificRoute="&/";var d3=c3.constructShellHash(b3);return"#"+d3;}):Promise.resolve("");h1();if(i){var $2=!L&&!G.oHashChanger.getHash()&&E.oAppComponent.getComponentData();var _2=$2&&$2.startupParameters;if(_2){s.parametersToNavigation(E,_2).then(function(a3){if(a3){V={treeNode:E.mRoutingTree.root,keys:[],appStates:Object.create(null)};u2(a3);}G.initialize(!!a3);});}else{G.initialize();}}}var d1=Promise.resolve();var e1=Promise.resolve();var f1=new P();function g1(){var i=n();if(!i){var j=I.getData();S.push({isInitialNavigation:O,myIntentPromise:M,currentHash:W,previousHashes:R,serializedBackOption:j.serializedBackOption});}M=null;W=null;R=null;V=null;$=null;Z=null;}function h1(){W={iHashChangeCount:0,backTarget:0,componentsDisplayed:Object.create(null)};V=null;R=[];if(!L){X=null;}$=null;}function i1(){G2(E.mRoutingTree.root.sRouteName);return E.mRoutingTree.root.componentCreated;}function j1(){return G.oAppComponent.getManifestEntry("sap.app").title;}function k1(){return G.oAppComponent.getProperty('draftDiscardConfirmationSettings').enabled;}function l1(){var i=sap.ushell&&sap.ushell.Container;return i&&i.getServiceAsync("URLParsing");}function m1(i,j,$2){if(!i){return Promise.resolve();}var _2=i&&E.componentRegistry[i];var a3=[];var b3=_2&&_2.methods.getUrlParameterInfo;if(b3){a3.push(_2.viewRegistered.then(function(){var c3=j&&N(j);return b3(c3,W.componentsDisplayed[_2.route]===1).then(function(d3){e($2,d3);});}));}a3.push(_2.oStatePreserverPromise.then(function(c3){var d3=j&&N(j);return c3.getUrlParameterInfo(d3,W.componentsDisplayed[_2.route]===1).then(function(e3){e($2,e3);});}));return Promise.all(a3);}function n1(i){var j=i.treeNode.componentId;var $2=i.treeNode.getPath(2,i.keys);var _2=i.appStates;return m1(j,$2,_2);}function o1(i,j){if(i.treeNode===j.treeNode){j.appStates=i.appStates;return Promise.resolve();}j.appStates=Object.create(null);if(j.treeNode.fCLLevel===0||j.treeNode.fCLLevel===3){return n1(j);}return E.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(V,j);}function p1(i,j,$2){var _2=E.mRoutingTree[i];return m1(_2.componentId,$2,j);}function q1(i,j){var $2;if(!i&&j instanceof T){var _2=j&&E.componentRegistry[j.getId()];var a3=_2&&_2.methods.getTitle;$2=a3&&a3();}else if(!i&&j&&j.title){$2=j.title;}$2=$2||j1();E.oShellServicePromise.then(function(b3){b3.setTitle($2);}).catch(function(){l.warning("No ShellService available");});}function r1(i){var j=[E.oPagesDataLoadedObserver.getProcessFinished(true)];var $2=null;var _2=W.iHashChangeCount;delete V.componentsDisplayed;var a3=-1;for(var b3 in E.componentRegistry){var c3=E.componentRegistry[b3];var d3=c3.oControllerUtils&&c3.oControllerUtils.oServices.oTemplateCapabilities.oMessageButtonHelper;var e3=W.componentsDisplayed[c3.route]===1;var f3=c3.utils.getTemplatePrivateModel();f3.setProperty("/generic/isActive",e3);if(e3){j.push(c3.oViewRenderedPromise);if(c3.viewLevel>a3){a3=c3.viewLevel;$2=c3.oComponent;}}else{c3.utils.suspendBinding();}if(d3){d3.setEnabled(e3);}}var g3=a(W.componentsDisplayed)||(E.oFlexibleColumnLayoutHandler&&E.oFlexibleColumnLayoutHandler.isAppTitlePrefered());q1(g3,i||$2);Promise.all(j).then(function(){if(_2===W.iHashChangeCount&&a(Z)){E.oAppComponent.firePageDataLoaded();}});}var s1=r1.bind(null,null);t.testable(function(i){V=i;R.push(W);W={backTarget:0,componentsDisplayed:Object.create(null)};},"setCurrentIdentity");t.testable(function(i){J=i;},"setHistoryKey");function t1(){return V;}function u1(j,$2){if(Array.isArray(j)&&j.length<2){j=j[0];}if(Array.isArray($2)&&$2.length<2){$2=$2[0];}if(Array.isArray(j)){if(Array.isArray($2)){if(j.length===$2.length){j=j.sort();$2=$2.sort();return j.every(function(_2,i){return _2===$2[i];});}return false;}return false;}return $2===j;}function v1(i,j){if(!i||i.treeNode!==j.treeNode){return false;}for(var $2=j.treeNode;$2.level>0;$2=E.mRoutingTree[$2.parentRoute]){if(!$2.noKey&&j.keys[$2.level]!==i.keys[$2.level]){return false;}}if(a(i.appStates)){return a(j.appStates);}var _2=e(Object.create(null),j.appStates,i.appStates);for(var a3 in _2){var b3=(a3===q)?J:j.appStates[a3];if(!u1(b3,i.appStates[a3])){return false;}}return true;}function w1(i){return v1(V,i);}function x1(i,j,$2){var _2=Object.create(null);for(var a3=i;a3.level>0;a3=E.mRoutingTree[a3.parentRoute]){if(!a3.noKey){_2["keys"+a3.level]=j[a3.level];}}var b3=!a($2);var c3=i.sRouteName+(b3?"query":"");if(b3){_2["query"]=$2;}return{route:c3,parameters:_2};}function y1(i){var j=x1(X.identity.treeNode,X.identity.keys,X.identity.appStates);if(!E.ghostapp){G.oRouter.navTo(j.route,j.parameters,i);}}function z1(i){if(!i||!X.identity){return;}var j=function(_2,a3,b3){b3=a3?a3.getId():b3;var c3=E.componentRegistry[b3];(c3.methods.presetDisplayMode||Function.prototype)(i,_2);};for(var $2=X.identity.treeNode;$2;$2=$2.parentRoute&&E.mRoutingTree[$2.parentRoute]){if($2.componentId){j(W.componentsDisplayed[$2.sRouteName]===1,null,$2.componentId);}else{$2.componentCreated.then(j.bind(null,false));}if($2.fCLLevel===0||$2.fCLLevel===3){break;}}}function A1(j){if(!X||X.identity){return Promise.resolve(j);}var $2=W;for(var i=0;i>j;i--){if($2.backTarget===0){return Promise.resolve(j);}$2=R[$2.backTarget];}X.mode=j;while(w1($2.identity)){X.mode--;if($2.backTarget===0){return Promise.resolve(X.mode);}$2=R[$2.backTarget];}if($2.identity.treeNode.level===0){X.identity=$2.identity;return Promise.resolve(X.mode);}return E2($2.identity).then(function(_2){if(!_2){X.identity=$2.identity;return Promise.resolve(X.mode);}if(w1(_2.identity)){X.mode--;return A1(X.mode);}X.identity=_2.identity;X.followUpNeeded=true;return Promise.resolve(X.mode);});}function B1(i){var j;if(i){if(i.identity){i.identity.appStates[q]=J;}if(X){if(i.identity){X={identity:i.identity,followUpNeeded:true,mode:X?X.mode:0};z1(i.displayMode);}return;}if(i.identity&&w1(i.identity)){return;}j=i.mode;if(j===1&&i.identity&&W.backTarget&&v1(R[W.backTarget],i.identity)){j=-1;}X={identity:i.identity,mode:j};z1(i.displayMode);}else{j=1;}X.followUpNeeded=X.identity&&j<0;if(X.identity||(j===-1&&W.backTarget)){E.oBusyHelper.setBusyReason("HashChange",!E.ghostapp,undefined,undefined,true);a1.stop();}else{X=null;}if(j>=0){y1(j===1);}else if(!E.ghostapp){return A1(j).then(function($2){window.history.go($2);});}}function C1(i,j){i.text=((i.headerTitle!==j)&&j)||"";if($&&$.linkInfos.length>i.level){$.adjustNavigationHierarchy();}}function D1(i,j){var $2=Object.create(null);if(E.oFlexibleColumnLayoutHandler){E.oFlexibleColumnLayoutHandler.adaptBreadCrumbUrlParameters($2,i);}var _2={treeNode:i};var a3={treeNode:i,keys:V.keys.slice(0,i.level+1),appStates:$2};var b3;var c3=n1(a3).then(function(){var d3=x1(i,V.keys,$2);b3=G.oRouter.getURL(d3.route,d3.parameters);$2[q]=J;d3=x1(i,V.keys,$2);_2.fullLink=G.oRouter.getURL(d3.route,d3.parameters);});j.push(c3);_2.navigate=function(d3,e3){if(E.oFlexibleColumnLayoutHandler&&!e3){var f3;for(var g3=R[W.backTarget];g3.backTarget>0&&!f3;g3=R[g3.backTarget]){if(g3.identity.treeNode===i){f3=g3.identity;}}E.oFlexibleColumnLayoutHandler.adaptPreferredLayout($2,i,f3);}E.oBusyHelper.setBusy(c3.then(function(){return U1(a3,false,d3);}),undefined,undefined,true);};_2.adaptBreadCrumbLink=function(d3){c3.then(function(){var e3=H.getInstance();var f3=e3.hrefForAppSpecificHash?e3.hrefForAppSpecificHash(b3):"#/"+b3;d3.setHref(f3);});};return _2;}function E1(i,j){var $2={title:j.treeNode.headerTitle||"",icon:j.treeNode.titleIconUrl||"",subtitle:j.treeNode.text,intent:i+j.fullLink};return $2;}function F1(){var j=[];var $2=[M];var _2=E.oFlexibleColumnLayoutHandler&&E.oFlexibleColumnLayoutHandler.hasNavigationMenuSelfLink(V);for(var a3=_2?V.treeNode:E.mRoutingTree[V.treeNode.parentRoute];a3;a3=E.mRoutingTree[a3.parentRoute]){var b3=D1(a3,$2);j[a3.level]=b3;}var c3=Promise.all($2);var d3=function(){E.oShellServicePromise.then(function(e3){e3.setHierarchy([]);c3.then(function(f3){var g3=f3[0];var h3=[];for(var i=j.length-1;i>=0;i--){h3.push(E1(g3,j[i]));}e3.setHierarchy(h3);});}).catch(function(){l.warning("No ShellService available");});};$={linkInfos:j,adjustNavigationHierarchy:d3};d3();}function G1(){return $.linkInfos;}function H1(i,j){var $2=Object.create(null);var _2=u(i);$2.treeNode=E.mRoutingTree[_2];$2.appStates=j["?query"]||Object.create(null);$2.keys=[""];for(var a3=$2.treeNode;a3.level>0;a3=E.mRoutingTree[a3.parentRoute]){$2.keys[a3.level]=a3.noKey?"":j["keys"+a3.level];}return $2;}function I1(i){var j=V;if(X&&X.identity&&!X.followUpNeeded){V=X.identity;}else{var $2=i.getParameter("config");V=H1($2.name,i.getParameter("arguments"));}V.previousIdentity=j;V.componentsDisplayed=Object.create(null);V.componentsDisplayed[V.treeNode.sRouteName]=1;F1();}function J1(i,j){var $2=f1.getProcessFinished(true).then(function(){var _2={identity:{treeNode:V.treeNode,keys:V.keys,appStates:e(Object.create(null),V.appStates)},mode:1};if(Array.isArray(j)&&j.length<2){j=j[0];}if(j){_2.identity.appStates[i]=j;}else{delete _2.identity.appStates[i];}B1(_2);});E.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}var K1;function L1(i,j,$2,_2,a3,b3){var c3=i.then(function(d3){d3.appStates=b3||Object.create(null);var e3;if(d3.treeNode.fCLLevel===0||d3.treeNode.fCLLevel===3){e3=n1(d3);}else{e3=E.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(V,d3);}if(!j&&a3&&a3.bIsCreate&&a3.bIsDraft&&!a3.bIsDraftModified){K1={index:R.length,path:_2.getPath(),identity:d3,displayMode:e2()};}return e3.then(function(){return U1(d3,j,$2);});});E.oBusyHelper.setBusy(c3,undefined,undefined,true);return c3;}function M1(i,j,$2,_2,a3){if(!i||(Array.isArray(i)&&i.length===0)){return n2(j);}var b3=Array.isArray(i)?i:[i];var c3=(b3.length===1&&(!V||V.treeNode.level>0))&&D.analyseContext(b3[0]);var d3=c3&&E.mEntityTree[c3.entitySet];var e3=d3&&(d3.level===1?["",c3.key]:E.oApplicationProxy.getIdentityKeyForContext(b3[0]));var f3=e3?Promise.resolve({treeNode:d3,keys:e3}):new Promise(function(g3,h3){var i3=0,j3;var k3=function(){if(i3==b3.length){g3(j3);}else{var l3=b3[i3];var m3=Z1(j3,l3,true,true);m3.then(function(n3){i3++;j3=n3;k3();});}};k3();});return L1(f3,j,$2,b3[0],_2,a3);}function N1(i,j,$2,_2){var a3=Z1(null,i,true,true);return L1(a3,j,$2,i,_2).then(Function.prototype,Function.prototype);}function O1(j){if(!K1||K1.path!==j.getPath()){return null;}var $2;var _2=function(f3,i){return f3!==$2.identity.keys[i];};for(var i=K1.index+1;i<R.length;i++){$2=R[i];if(!$2.identity.treeNode||$2.identity.treeNode.level<K1.identity.treeNode.level||K1.identity.keys.some(_2)){return null;}}var a3=0;for(var b3=W;b3.iHashChangeCount!==K1.index;b3=R[b3.backTarget]){if(b3.iHashChangeCount<K1.index){return null;}a3--;}var c3=R[K1.index].identity;var d3={treeNode:c3.treeNode,keys:c3.keys,appStates:Object.create(null)};var e3={identity:d3,mode:a3,displayMode:K1.displayMode};if(c3.treeNode.fCLLevel===0||c3.treeNode.fCLLevel===3){e(d3.appStates,c3.appStates);return Promise.resolve(e3);}return E.oFlexibleColumnLayoutHandler.getSpecialDraftCancelPromise(V,c3,d3.appStates).then(function(){return e3;});}function P1(i){var j=O1(i);return j&&j.then(B1);}function Q1(i){var j=I.getData();j.serializedBackOption=i&&{mode:i.mode,displayMode:i.displayMode,route:i.identity.treeNode.sRouteName,keys:i.identity.keys,appStates:i.identity.appStates};I.setData(j);I.save();}function R1(i,j,$2){var _2=D.analyseContext(i);var a3={keys:["",_2.key],appStates:Object.create(null)};var b3=a1.makeQueuable(U1.bind(null,a3,true,j));if(V.treeNode.level===1){a3.treeNode=V.treeNode;e(a3.appStates,V.appStates);return Promise.resolve(b3);}if($2){$2.keys.forEach(function(d3){if(d3){a3.keys.push(d3);}});a3.treeNode=$2.treeNode;}if(a3.treeNode===V.treeNode){e(a3.appStates,V.appStates);return Promise.resolve(b3);}var c3=E.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(V,a3);return c3.then(function(){return b3;});}function S1(i,j){if((i&&i.treeNode)!==j.treeNode){return Promise.resolve(false);}if(E.oFlexibleColumnLayoutHandler&&!E.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(i,j)){return Promise.resolve(false);}var $2=true;var _2=i.treeNode.sRouteName;for(var a3=i.treeNode;a3.level>0;a3=E.mRoutingTree[a3.parentRoute]){var b3=a3.noKey||i.keys[a3.level]===j.keys[a3.level];if(!b3&&a3.noOData){return Promise.resolve(false);}$2=$2&&b3;if(a3.noOData){_2=a3.parentRoute;}}if($2){return Promise.resolve(true);}var c3=E.mRoutingTree[_2];var d3=i.keys.slice(0,c3.level+1);var e3=j.keys.slice(0,c3.level+1);var f3=c3.getPath(2,d3);var g3=c3.getPath(2,e3);return E.oApplicationProxy.areTwoKnownPathesIdentical(f3,g3,c3.level===1,i,j);}function T1(i){var j=R[W.backTarget];var $2=-1;if(j&&(i.level===0||(E.oFlexibleColumnLayoutHandler&&i.fCLLevel===0))){for(;j.backTarget>0&&j.identity.treeNode&&j.identity.treeNode.level>i.level;$2--){j=R[j.backTarget];}}return j&&{candidateHash:j,candidateCount:$2};}function U1(i,j,$2){var _2=T1(i.treeNode);var a3=S1(_2&&_2.candidateHash.identity,i);var b3=a3.then(function(c3){var d3=c3?_2.candidateCount:(0+!!j);var e3={identity:i,mode:d3,displayMode:$2};B1(e3);});E.oBusyHelper.setBusy(b3,undefined,undefined,true);return b3;}function V1(){if(L){return n2(true);}var i=E.componentRegistry[V.treeNode.componentId];var j=i.utils.getTemplatePrivateModel();var $2=W1();u2({title:$2.dataLoadFailedTitle,text:$2.dataLoadFailedText,description:"",viewLevel:j.getProperty("/generic/viewLevel")});return Promise.resolve();}function W1(){return{dataLoadFailedTitle:E.getText("ST_ERROR"),dataLoadFailedText:E.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function X1(i,j,$2,_2){if(!j){return{treeNode:E.mRoutingTree.root,key:""};}var a3=D.analyseContext(j);var b3=(i.level&&i.entitySet===a3.entitySet)?i:i.children.indexOf(a3.entitySet)>=0&&E.mEntityTree[a3.entitySet];if(b3){return{treeNode:b3,key:a3.key};}if($2){var c3=E.oAppComponent.getModel();var d3=c3.getMetaModel();var e3=d3.getODataEntitySet(a3.entitySet);var f3=d3.getODataEntityType(e3.entityType);var g3;var h3=i.children.some(function(j3){b3=E.mEntityTree[j3];g3=b3.navigationProperty;if(!g3){return false;}var k3=d3.getODataAssociationEnd(f3,g3);return!!k3&&k3.multiplicity.endsWith("1");});if(h3){return{treeNode:b3,navigationProperty:g3};}}if(_2&&i.level>0){var i3=E.mRoutingTree[i.parentRoute];return X1(i3,j,$2,true);}}function Y1(i,j,$2,_2){if(_2.navigationProperty){return new Promise(function(b3,c3){var d3=$2.getModel();d3.createBindingContext(_2.navigationProperty,$2,null,function(e3){var f3=e3&&Y1(i,j,e3,{treeNode:_2.treeNode,key:D.analyseContext(e3).key});if(f3){f3.then(b3,c3);}else{c3();}});});}var a3=j.slice(0,_2.treeNode.level);a3.push(_2.key);return Promise.resolve({treeNode:_2.treeNode,keys:a3});}function Z1(i,j,$2,_2){var a3=(i&&i.treeNode)||(V&&V.treeNode)||E.mRoutingTree.root;var b3=(i&&i.keys)||(V&&V.keys)||[""];var c3=X1(a3,j,$2,_2);return c3?Y1(a3,b3,j,c3):Promise.reject();}function $1(i,j,$2){var _2={treeNode:i,keys:$2||V.keys.slice(0,i.level+1),appStates:j};if(i.fCLLevel===0||i.fCLLevel===3){return n1(_2);}return E.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(V,_2);}function _1(i){var j=Z1({treeNode:E.mRoutingTree.root},i,false,true);var $2=j.then(function(_2){_2.appStates=Object.create(null);var a3;if(_2.treeNode===V.treeNode){Object.assign(_2.appStates,V.appStates);a3={identity:_2,mode:1,displayMode:1};B1(a3);return null;}var b3=$1(_2.treeNode,_2.appStates);return b3.then(U1.bind(null,_2,true,1));});E.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}function a2(i){var j;var $2=0;for(j=W;j.backTarget>0&&(!j.identity||!j.identity.treeNode||j.identity.treeNode.level>i);$2++){j=R[j.backTarget];}if(!O&&($2===0||!j.identity.treeNode||j.identity.treeNode.level>i)){window.history.go(-$2-1);return Promise.resolve();}var _2=-$2||1;var a3=z2(i);var b3={treeNode:a3,keys:V.keys.slice(0,a3.level+1),appStates:Object.create(null)};var c3=$1(b3.treeNode,b3.appStates).then(function(){if(_2<0&&(b3.treeNode.fCLLevel===1||b3.treeNode.fCLLevel===2)&&j.identity.treeNode===b3.treeNode){for(;j.backTarget>0&&!E.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(j.identity,b3);_2--){j=R[j.backTarget];if(j.identity.treeNode!==b3.treeNode){break;}}}var d3={identity:b3,mode:_2,displayMode:b3.treeNode.isDraft?6:1};B1(d3);});E.oBusyHelper.setBusy(c3,undefined,undefined,true);return c3;}var b2;function c2(i,j,$2,_2){var a3=E.mEntityTree[i];var b3=E.componentRegistry[a3.componentId];var c3;if(j){var d3=p.createEmptyAppState(E.oAppComponent);d3.setData(j);d3.save();c3=d3.getKey();}var e3=V?V.keys.slice(0,a3.level):[""];e3.push("-");_2=_2||Object.create(null);var f3=$1(a3,_2,e3);var g3=f3.then(function(){if(c3){_2[A]=c3;}var h3={treeNode:a3,keys:e3,appStates:_2};b2=$2;if(w1(h3)){var i3={componentsDisplayed:W.componentsDisplayed,isNonDraftCreate:true};return B2("-",i3,b3.oComponent);}else{var j3=!V||!!(b3&&b3.nonDraftCreateContext);return U1(h3,j3,4);}});E.oBusyHelper.setBusy(g3,undefined,undefined,true);return g3;}function d2(i){var j=Z1(null,i,false,false);var $2=j.then(function(_2){_2.appStates=Object.create(null);e(_2.appStates,V.appStates);delete _2.appStates[A];var a3={identity:_2,mode:1};B1(a3);});E.oBusyHelper.setBusy($2,undefined,undefined,true);return $2;}function e2(){var i=E.componentRegistry[V.treeNode.componentId];var j=i.utils.getTemplatePrivateModel();var $2=j.getProperty("/objectPage/displayMode")||0;return $2;}function f2(i,j,$2,_2,a3){var b3=V.keys.slice(0,i.level);b3.push(j?$2:"");var c3=Object.create(null);var d3=$1(i,c3,b3);var e3=d3.then(function(){var f3={treeNode:i,keys:b3,appStates:c3};return U1(f3,_2,a3);});E.oBusyHelper.setBusy(e3,undefined,undefined,true);return e3;}function g2($2,_2,a3,b3,c3,d3){var e3;var f3=true;for(var i=0;i<$2.children.length&&!e3;i++){var g3=$2.children[i];var h3=E.mEntityTree[g3];if(h3[$2.level?"navigationProperty":"sRouteName"]===_2){e3=h3.sRouteName;f3=!h3.noKey;}}var i3=!e3&&a3&&$2.embeddedComponents[a3];if(i3){for(var j=0;j<i3.pages.length&&!e3;j++){var j3=i3.pages[j];if(j3.navigationProperty===_2){e3=$2.sRouteName+"/"+a3+"/"+_2;f3=!(j3.routingSpec&&j3.routingSpec.noKey);}}}if(e3){var k3=E.mRoutingTree[e3];if(!d3){d3=e2();}return f2(k3,f3,b3,c3,d3);}return Promise.reject();}function h2(i,j,$2,_2){var a3=Z1({treeNode:i},j,true,false);var b3=a3.then(function(c3){c3.appStates=Object.create(null);var d3=$1(c3.treeNode,c3.appStates,c3.keys);return d3.then(U1.bind(null,c3,_2,$2));});E.oBusyHelper.setBusy(b3,undefined,undefined,true);return b3;}function i2(){return!!X;}function j2(i){l.info("Navigate back");if(W.backTarget&&N(o.getPreviousHash()||"")!==N(W.hash)){E.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);}W.LeaveByBack=!W.forwardingInfo;if(W.LeaveByBack){W.backSteps=i;}window.history.go(-i);}function k2(j,$2,_2,a3){var b3=E.oAppComponent.getObjectPageHeaderType()==="Dynamic"&&E.oAppComponent.getObjectPageVariantManagement()==="VendorLayer";var c3;var d3=new U(window.location.href);if(d3.mParams["sap-ui-layer"]){var e3=d3.mParams["sap-ui-layer"];for(var i=0;i<e3.length;i++){if(e3[i].toUpperCase()==="VENDOR"){c3=true;break;}}}j=N(j||"");l.info("Navigate to hash: "+j);if(j===W.hash){l.info("Navigation suppressed since hash is the current hash");return;}W.targetHash=j;if(W.backTarget&&N(o.getPreviousHash()||"")===j){G.navigateBack();return;}var f3=V?V.treeNode.level:0;if(b3&&c3){if(!a3){if(!E.oFlexibleColumnLayoutHandler){g.clearVariantParameterInURL();}else{if(f3>=_2){if(_2===1){g.clearVariantParameterInURL();}else if(_2===2){var g3;for(var h3 in E.componentRegistry){if(E.componentRegistry[h3].viewLevel===2){g3=E.componentRegistry[h3];break;}}var i3=g3.oController.byId("template::ObjectPage::ObjectPageVariant");g.clearVariantParameterInURL(i3);}}}}}E.oBusyHelper.setBusyReason("HashChange",true,undefined,undefined,true);W.LeaveByReplace=$2;if($2){G.oHashChanger.replaceHash(j);}else{G.oHashChanger.setHash(j);}}function l2(i,j,$2,_2,a3,b3){var c3=j.then(function(d3){i=w(i,d3);if(a3){W.backwardingInfo={count:a3.count,index:a3.index,targetHash:N(i)};j2(a3.count);}else{k2(i,_2,$2,b3);}return i;});E.oBusyHelper.setBusy(c3,undefined,undefined,true);return c3;}function m2(i,j,$2){var _2=R[W.backTarget];return _2&&_2.hash&&N(_2.hash.split("?")[0])===N(j)&&{count:1,index:W.backTarget};}function n2(i){if(V.treeNode.level===0){return Promise.resolve();}var j={treeNode:E.mRoutingTree["root"],keys:[""],appStates:Object.create(null)};var $2=n1(j);var _2=$2.then(U1.bind(null,j,i));E.oBusyHelper.setBusy(_2,undefined,undefined,true);return _2;}function o2(j,$2){var _2=W.componentsDisplayed;var a3=function(c3){var d3=E.componentRegistry[c3.getId()];(d3.methods.presetDisplayMode||Function.prototype)($2,_2[d3.route]===1);};for(var i=0;i<j.length;i++){var b3=j[i];b3.then(a3);}}function p2(i,j,$2,_2,a3){var b3={};var c3=E.oFlexibleColumnLayoutHandler&&E.oFlexibleColumnLayoutHandler.getFCLAppStatesPromise(i,b3);var d3=p1(i,b3,j);var e3=(c3?Promise.all([c3,d3]):d3).then(v.bind(null,b3));var f3=m2(_2,j,$2);var g3=l2(j,e3,$2,_2,f3,a3);E.oBusyHelper.setBusy(g3,undefined,undefined,true);return g3;}function q2(j,$2,_2,a3,b3){if(typeof j==="string"){var c3=j;var d3=N(c3);if(d3==="/"){return n2(_2);}var e3=d3.split("/");var f3=e3.length-1;var g3=[];var h3;switch(f3){case 1:h3=e3[1].split("(")[0];break;default:h3="";var i3="";for(var i=0;i<f3;i++){var j3=e3[i+1];var k3=j3.indexOf("(");if(k3>0){j3=j3.substring(0,k3);}h3=h3+i3+j3;i3="/";}h3=h3.replace(r.getEmbeddedComponentsPatternDelimiter(),"/");}o2(g3,a3||0);return p2(h3,c3,f3,_2,b3);}return M1(j,_2,a3);}function r2(i,j){W.componentsDisplayed[i]=j;var $2=E.mRoutingTree[i];var _2=$2.componentId;if(_2){var a3=E.componentRegistry[_2];var b3=a3.utils.getTemplatePrivateModel();b3.setProperty("/generic/isActive",j===1);}}function s2(i){var j,$2,_2,a3,b3,c3=null,d3,e3;if(i){j=i.entitySet;$2=i.text;c3=i.icon;e3=i.description;}if(j){d3=E.oAppComponent.getModel().getMetaModel();if(d3){_2=d3.getODataEntitySet(j);a3=d3.getODataEntityType(_2.entityType);b3=a3["com.sap.vocabularies.UI.v1.HeaderInfo"];}if(b3&&b3.TypeImageUrl&&b3.TypeImageUrl.String){c3=b3.TypeImageUrl.String;}}E.oTemplatePrivateGlobalModel.setProperty("/generic/messagePage",{text:$2,icon:c3,description:e3});if(E.oFlexibleColumnLayoutHandler){E.oFlexibleColumnLayoutHandler.displayMessagePage(i,W.componentsDisplayed);}else{var f3=G.oRouter.getTargets();if(!E.ghostapp){f3.display("messagePage");}for(var g3 in W.componentsDisplayed){r2(g3,5);}}r1(i);}function t2(){if(!a(Z)){var j=null;for(var i=0;!j;i++){j=Z[i];}Z={};s2(j);}}function u2(i){if(G.oTemplateContract.oFlexibleColumnLayoutHandler){E.oFlexibleColumnLayoutHandler.hidePlaceholder(V.treeNode.fCLLevel,true);i.viewLevel=i.viewLevel||0;Z[i.viewLevel]=i;var j=Promise.all([e1,G.oTemplateContract.oPagesDataLoadedObserver.getProcessFinished(true)]);j.then(t2);j.then(E.oBusyHelper.setBusyReason.bind(null,"HashChange",false,undefined,undefined,true));return;}E.oNavigationHost.hidePlaceholder();s2(i);E.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);}function v2(){var i=[];if(V||W){var j=V.componentsDisplayed||W.componentsDisplayed;for(var $2 in E.componentRegistry){var _2=E.componentRegistry[$2];if(j[_2.route]===1){i.push($2);}}}return i;}function w2(){var i=[];for(var j in E.componentRegistry){i.push(j);}return i;}function x2(i){return V.keys.slice(0,i+1);}function y2(){var i=V.treeNode.componentId;var j=E.componentRegistry[i];var $2=!!j.nonDraftCreateContext;if($2){var _2=Object.assign({},W);_2.isNonDraftCreate=$2;return _2;}return W;}function z2(i){return E.oApplicationProxy.getAncestralNode(V.treeNode,i);}function A2(i){return i?new Promise(function(j,$2){var _2=p.getAppState(E.oAppComponent,i);_2.done(function(a3){var b3=a3.getData();(b3===undefined?$2:j)(b3);});_2.fail($2.bind(null,undefined));}):Promise.reject();}function B2(j,$2,_2){var a3=_2.getId();var b3=E.componentRegistry[a3];var c3=x2(b3.viewLevel);var d3=b3.route;var e3=$2.componentsDisplayed[d3];var f3=e3===1;var g3=function(m3){b3.sCurrentBindingPath=m3;var n3=function(){b3.utils.bindComponent(b3.sCurrentBindingPath,f3);if(a3===V.treeNode.componentId){var p3=Object.create(null);p3.root=true;for(var h3=V.treeNode;h3.level>0;h3=E.mRoutingTree[h3.parentRoute]){p3[h3.sRouteName]=true;h3.bindElement(E.oNavigationHost,null,true);if(h3.contextTargets){for(var i=0;i<h3.contextTargets.length;i++){var q3=h3.contextTargets[i];h3.bindElement(q3,null,false);}}}for(var r3 in E.mRoutingTree){if(!p3[r3]){var s3=E.mRoutingTree[r3];s3.unbindElement(E.oNavigationHost,true);if(s3.contextTargets){s3.contextTargets.forEach(s3.unbindElement);}}}}b3.utils.refreshBinding();b3.oStatePreserverPromise.then(function(t3){t3.applyAppState(m3,f3);});return(b3.methods.onActivate||Function.prototype)(m3,f3);};var o3=b3.fnViewRegisteredResolve?b3.viewRegistered.then(n3):(n3()||Promise.resolve());return Promise.all([o3,b3.viewRegistered]).then(function(){b3.aKeys=c3;var i=b3.reactivate;if(i){delete b3.reactivate;i.then(function(p3){p3();});}});};W.componentsDisplayed[d3]=1;if($2.isNonDraftCreate&&j==="-"){var h3=E.mRoutingTree[d3];var i3=E.mRoutingTree[h3.parentRoute];var j3=i3.getPath(2,c3);var k3=E.oAppComponent.getModel();var l3=j3?new Promise(function(i){var m3={canonicalRequest:!E.bCreateRequestsCanonical};k3.createBindingContext(j3,null,m3,i);}):Promise.resolve();return l3.then(function(i){var m3=i?h3.navigationProperty:"/"+_2.getEntitySet();var n3=V.appStates[A];var o3=A2(n3);var p3=function(q3){b3.nonDraftCreateContext=b2||b3.nonDraftCreateContext||f.createNonDraft(i,m3,k3,q3,E.oApplicationProxy.mustRequireRequestsCanonical());b2=null;return g3(b3.nonDraftCreateContext.getPath());};return o3.then(p3,p3);});}delete b3.nonDraftCreateContext;return g3(j);}function C2(i,j,$2){return B2(i,j,$2).then(s1);}function D2(i,j,$2){var _2={};if(j||$2){var a3=i.level;for(var b3=0;b3<a3;b3++){_2[b3]=E.oPaginatorInfo[b3];}}E.oPaginatorInfo=_2;}function E2(i){return E.oApplicationProxy.getAlternativeIdentityPromise(i);}var F2=Object.create(null);function G2(i,j){if(F2[i.sRouteName]){return;}var $2=G.createHostView();F2[i.sRouteName]=$2;var _2=G.oRouter.getViews();_2.setView(i.sRouteName,$2);var a3=$2.byId("host");V2(a3,i.sRouteName,j);}function H2(i){var j=E.mRoutingTree;if(j&&j[i]){G2(j[i],true);}}function I2(i){Y=false;a1.stop();f1.startProcess();I1(i);G2(V.treeNode);V.treeNode.display();if(E.oFlexibleColumnLayoutHandler){_=E.oFlexibleColumnLayoutHandler.handleBeforeRouteMatched(V);}}function J2(){var i={isInitialNavigation:O,historicalEntries:[]};for(var j=W;j.iHashChangeCount>0;j=R[j.backTarget]){var $2=(j===W)?V:j.identity;var _2=$2.treeNode&&{sRouteName:$2.treeNode.sRouteName,keys:$2.keys,appStates:$2.appStates};i.historicalEntries.push(_2);}I.setData(i);I.save();var a3=V.appStates[q];if(a3===J||!(a3||W.backTarget||O)){return false;}X=null;B1({identity:{treeNode:V.treeNode,keys:V.keys,appStates:e(Object.create(null),V.appStates)},mode:1});return true;}function K2(){f1.stopProcess();if(X&&X.followUpNeeded&&(X.identity?!w1(X.identity):(typeof X.followUpNeeded==="object"))){if(!X.identity){X=X.followUpNeeded;}B1();return;}E.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);var $2=V.treeNode.level;var _2=N(G.oHashChanger.getHash()||"");l.info("Route matched with hash "+_2);var a3;if(W.backwardingInfo){a3=W;a3.identity=V.previousIdentity;delete V.previousIdentity;R.push(a3);var b3=a3.iHashChangeCount+1;W={iHashChangeCount:b3,forwardingInfo:{bIsProgrammatic:true,bIsBack:true,iHashChangeCount:b3,targetHash:a3.backwardingInfo.targetHash,componentsDisplayed:a3.componentsDisplayed},backTarget:R[a3.backwardingInfo.index].backTarget,componentsDisplayed:Object.create(null)};}if(W.forwardingInfo&&W.forwardingInfo.targetHash&&W.forwardingInfo.targetHash!==_2){W.hash=_2;var c3=W.forwardingInfo.targetHash;delete W.forwardingInfo.targetHash;k2(c3,true);return;}var d3=false;for(var i=0;i<E.aStateChangers.length;i++){var e3=E.aStateChangers[i];if(e3.isStateChange(V.appStates)){d3=true;}}if(d3){X=null;W.hash=_2;if(!J2()){a1.start();}return;}E.oTemplatePrivateGlobalModel.setProperty("/generic/routeLevel",$2);var f3=W.forwardingInfo;delete W.forwardingInfo;if(!f3){f3={componentsDisplayed:W.componentsDisplayed,isNonDraftCreate:!V.treeNode.isDraft&&V.keys[V.treeNode.level]==="-"};var g3=W.iHashChangeCount;f3.iHashChangeCount=g3+1;var h3=o.getDirection();if(X){f3.bIsProgrammatic=!!X.identity;f3.bIsBack=X.mode<0;if(f3.bIsBack){W.backSteps=0-X.mode;}f3.bIsForward=!f3.bIsBack&&(h3===k.Forwards);W.LeaveByReplace=X.mode===1;}else{f3.bIsProgrammatic=(_2===W.targetHash);f3.bIsBack=!!(W.LeaveByBack||(!f3.bIsProgrammatic&&(h3===k.Backwards)));f3.bIsForward=!f3.bIsBack&&(h3===k.Forwards);W.LeaveByReplace=f3.bIsProgrammatic&&W.LeaveByReplace;if(!f3.bIsProgrammatic&&V.previousIdentity&&V.previousIdentity.treeNode.level>0&&!V.previousIdentity.treeNode.isDraft){var i3=V.treeNode!==V.previousIdentity.treeNode;for(var j=1;!i3&&j<V.keys.length;j++){i3=V.keys[j]!==V.previousIdentity.keys[j];}if(i3){var j3=E.componentRegistry[V.previousIdentity.treeNode.componentId];var k3=j3.oComponent.getModel("ui");if(k3.getProperty("/editable")){j3.utils.cancelEdit();}}}}W.LeaveByBack=f3.bIsBack;a3=W;a3.identity=V.previousIdentity;delete V.previousIdentity;R.push(a3);W={iHashChangeCount:f3.iHashChangeCount,componentsDisplayed:Object.create(null)};if(a3.LeaveByReplace){W.backTarget=a3.backTarget;}else if(f3.bIsBack){var l3=a3.backTarget;for(var m3=a3.backSteps||1;m3>0;m3--){l3=R[l3].backTarget;}W.backTarget=l3;}else{W.backTarget=g3;}}W.hash=_2;var n3=function(o3){X=null;if(o3){var p3,q3;if(v1(a3.identity,o3.identity)){p3=W.backTarget&&R[W.backTarget];q3=-1;}else if(o3.identity.treeNode.level===0){n2();return;}else{p3=o3.identity;var r3=W.backTarget&&R[W.backTarget];q3=(r3&&r3.treeNode===p3.treeNode)?-1:1;}var s3={identity:p3,mode:q3,displayMode:o3.displayMode};B1(s3);return;}if(J2()){return;}D2(V.treeNode,f3.bIsProgrammatic,f3.bIsBack);if(E.oFlexibleColumnLayoutHandler){e1=E.oFlexibleColumnLayoutHandler.handleRouteMatched(f3);}else{e1=V.treeNode.componentCreated.then(function(t3){return C2(f3.isNonDraftCreate?"-":V.treeNode.getPath(2,V.keys),f3,t3);});}E.oBusyHelper.setBusy(e1,undefined,undefined,true);e1.then(a1.start);};if(f3.bIsBack&&!(X&&X.identity)){E.oBusyHelper.setBusy(E2(V).then(n3),undefined,undefined,true);}else{n3();}}function L2(){var i=Promise.all([_,d1.then(function(){return E.oStatePreserversAvailablePromise;})]);var j=i.then(K2,E.oBusyHelper.setBusyReason.bind(null,"HashChange",false,undefined,undefined,true));E.oBusyHelper.setBusy(j,undefined,undefined,true);P2();}function M2(j){R.push(W);var $2;var _2;if(j){O=j.isInitialNavigation;_2=j.serializedBackOption;for(var i=j.historicalEntries.length;i>0;i--){var a3=j.historicalEntries[i-1];$2={iHashChangeCount:R.length,backTarget:R.length-1};if(a3){$2.identity={treeNode:E.mRoutingTree[a3.sRouteName],keys:a3.keys,appStates:a3.appStates};}R.push($2);}}else{$2={iHashChangeCount:1,backTarget:0,identity:V};R.push($2);}b1($2,_2);L2();}function N2(){if(!K||n()){if(E.oFlexibleColumnLayoutHandler){E.oFlexibleColumnLayoutHandler.hidePlaceholder(V.treeNode.fCLLevel,true);}else{E.oNavigationHost.hidePlaceholder();}}if(L&&!R.length){var i=V.appStates[q];var j=A2(i);j.then(M2,M2);return;}L2();}function O2(){V={appStates:Object.create(null),keys:[]};u2({title:E.getText("ST_ERROR"),text:E.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),description:""});E.oBusyHelper.setBusyReason("HashChange",false,undefined,undefined,true);}function P2(){var j=function(e3){if(!e3.selectionInfo){return false;}for(var i=1;i<=e3.level;i++){if(e3.selectionInfo.keys[i]!==V.keys[i]){return false;}}return true;};var $2=function(i,d3,c3,e3){if(i.selectionInfo===d3){c3.setProperty("/generic/currentActiveChildContext",e3);}};for(var _2,a3=V.treeNode;a3;a3=_2){_2=a3.parentRoute&&E.mRoutingTree[a3.parentRoute];if(_2){_2.selectionInfo={pageEntitySet:a3.entitySet,path:a3.getPath(3,V.keys),keys:V.keys.slice(0,a3.level+1)};}var b3=a3.componentId&&E.componentRegistry[a3.componentId];if(b3){var c3=b3.utils.getTemplatePrivateModel();if(j(a3)){var d3=a3.selectionInfo;c3.setProperty("/generic/currentActiveChildContext",d3.path);if(b3.oController.onChildOpenedExtension){b3.oController.onChildOpenedExtension(d3,$2.bind(null,a3,d3,c3));}}else{a3.selectionInfo=null;c3.setProperty("/generic/currentActiveChildContext","");}}}}G.oRouter.attachBeforeRouteMatched(I2);G.oRouter.attachRouteMatched(N2);G.oRouter.attachBypassed(O2);var Q2=[];function R2(i,j){G[i]=j;Q2.push(i);}function S2(){Q2.forEach(function(i){G[i]=a1.makeQueuable(G[i]);});G.routerInitialized=Function.prototype;}function T2(i){d1=Promise.all([d1,i.componentCreated]);}function U2(i,j){for(var $2 in j){var _2=j[$2];i.setModel(_2,$2||undefined);}}function V2(i,j,$2){var _2=E.mRoutingTree[j];var a3=_2.page.component.name;var b3=_2.entitySet;var c3=_2.fCLLevel-(_2.fCLLevel===3||!E.oFlexibleColumnLayoutHandler);var d3=c3<0?E.oNavigationObserver:E.aNavigationObservers[c3];var e3=new P();var f3=c3<0?E.oHeaderLoadingObserver:E.aHeaderLoadingObservers[c3];f3.addObserver(e3);var g3={};var h3={appComponent:E.oAppComponent,isLeaf:!_2.page.pages||!_2.page.pages.length,entitySet:b3,navigationProperty:_2.navigationProperty,componentData:{registryEntry:{oAppComponent:E.oAppComponent,route:j,routeConfig:_2.page,viewLevel:_2.level,routingSpec:_2.page.routingSpec,oNavigationObserver:d3,oHeaderLoadingObserver:e3,preprocessorsData:g3}}};if(_2.page.component.settings){e(h3,_2.page.component.settings);}E.oAppComponent.runAsOwner(function(){var i3=sap.ui.core.Component.create({name:a3,settings:h3,handleValidation:true,manifest:true});i3.then(function(j3){if($2){U2(i,E.oAppComponent.oModels);i.setComponent(j3);j3.onBeforeRendering();}else{i.setComponent(j3);}});});}function W2(){Y=true;}function X2(j){if(Y){Y=false;return false;}if(X){return false;}if(j.isCrossAppNavigation){return true;}var $2=G.oRouter.getRouteInfoByHash(j.innerAppRoute);var _2=H1($2.name,$2.arguments);return _2.treeNode!==V.treeNode||_2.keys.some(function(a3,i){return a3!==V.keys[i];});}function Y2(i){return i.isDraft?E.oApplicationProxy.getAncestralNode(V.treeNode,1):i;}function Z2(){if(V.treeNode.level===0){return false;}var i=I.getData().historicalEntries;if(i.length===1||i[1].sRouteName==="root"){return true;}var j=Y2(V.treeNode);var $2=E.mRoutingTree[i[1].sRouteName];var _2=Y2($2);return j!==_2;}G.routerInitialized=S2;G.treeNodeFirstDisplay=T2;G.navigate=k2;R2("navigateBack",B1.bind(null,{mode:-1}));G.activateOneComponent=B2;G.afterActivation=s1;G.addUrlParameterInfoForRoute=p1;G.getApplicableStateForIdentityAddedPromise=n1;G.adaptAppStates=o1;G.setVisibilityOfRoute=r2;G.getActiveComponents=v2;G.getAllComponents=w2;G.getRootComponentPromise=i1;G.getActivationInfo=y2;G.getCurrentKeys=x2;G.getAppTitle=j1;G.getParsedShellHashFromFLP=l1;G.isDiscardDraftConfirmationNeeded=k1;R2("navigateByExchangingQueryParam",J1);R2("navigateToSubContext",M1);R2("navigateToDetailContextIfPossible",N1);G.getSwitchToSiblingPromise=R1;G.getSpecialDraftCancelPromise=P1;G.getSpecialDraftCancelOptionPromise=O1;G.setBackNavigationOption=Q1;G.getCurrentIdentity=t1;R2("navigateToIdentity",U1);R2("navigateAfterActivation",_1);R2("navigateUpAfterDeletion",a2);R2("navigateForNonDraftCreate",c2);R2("adaptUrlAfterNonDraftCreateSaved",d2);R2("navigateToChild",g2);R2("navigateFromNodeAccordingToContext",h2);G.isNavigating=i2;G.getLinksToUpperLayers=G1;G.setTextForTreeNode=C1;R2("navigationContextNotFound",V1);G.clearHistory=a1.makeQueuable(h1);G.suspend=g1;G.restore=c1.bind(null,false);G.prepareHostView=G2;G.preloadComponent=H2;G.navigateToMessagePage=u2;G.getAppStateFromShell=A2;G.userHasAcceptedDataLoss=W2;G.unwantedDataLossPossible=X2;G.isBackLeavingTheEditScope=Z2;var V2=t.testable(V2,"createTemplateComponent");var l1=t.testable(l1,"getParsedShellHashFromFLP");var H2=t.testable(H2,"preloadComponent");t.testable(function(i){G.createHostView=i;},"setCreateHostView");t.testable(function(i){G2=i;},"setPrepareHostView");E.oBusyHelper.setBusy((l1()||Promise.resolve()).then(function(i){var j=i&&i.parseParameters(document.location.search);if(j&&j["sap-ui-xx-placeholder"]){var $2=j["sap-ui-xx-placeholder"][0]==='false'?false:true;E.bEnablePlaceholder=$2;}K=E.bEnablePlaceholder;return r.generateRoutingStructure(E).then(c1.bind(null,true));}),undefined,undefined,true);return{navigateToRoot:a1.makeQueuable(n2),navigateToContext:a1.makeQueuable(q2),navigateToMessagePage:u2,navigateBack:function(){G.navigateBack();}};}function y(i,j){var R=j.oAppComponent.getRouter();var E={oAppComponent:j.oAppComponent,oRouter:R,oHashChanger:R.getHashChanger(),oTemplateContract:j};j.oNavigationControllerProxy=E;var G=new Promise(function(I){E.initialize=function(J){R.initialize(J);I();E.routerInitialized();};E.fnInitializationResolve=I;});j.oBusyHelper.setBusy(G,undefined,undefined,true);e(i,x(j,E));}var z=B.extend("sap.suite.ui.generic.template.lib.navigation.NavigationController",{metadata:{library:"sap.suite.ui.generic.template"},constructor:function(i){B.apply(this,arguments);t.testableStatic(y,"NavigationController")(this,i);}});z._sChanges="Changes";return z;});
