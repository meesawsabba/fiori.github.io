sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/base/util/extend"],function(B,A,t,e){"use strict";function g(T){function s(E){E=E||[];for(var i in T.componentRegistry){if(E.indexOf(i)===-1){var C=T.componentRegistry[i];C.oComponent.setIsRefreshRequired(true);}}}function a(C,E,l){var m=C.getId();var o=T.componentRegistry[m];var n=T.mRoutingTree[o.route];for(var i=0;(!l||i<l)&&n.level>0;i++){var p=T.mRoutingTree[n.parentRoute];if(p.componentId){var P=T.componentRegistry[p.componentId].oComponent;b(P,E);}n=p;}}function b(C,E){if(E){var r=T.componentRegistry[C.getId()];var R=r.mRefreshInfos;R[E]=true;if(r.utils.isComponentActive()){r.utils.refreshBinding();}}else if(C.setIsRefreshRequired){C.setIsRefreshRequired(true);}}function c(o,S){for(var i=0;i<o.children.length;i++){var C=T.mEntityTree[o.children[i]];c(C,S);if(C.componentId){var l=T.componentRegistry[C.componentId];S.push(l.oComponent);}}}function d(C){var r=[];var o=T.componentRegistry[C.getId()];var i=T.mRoutingTree[o.route];c(i,r);return r;}function u(C,l){var S=d(C);if(l){S.push(C);}for(var i=0;i<S.length;i++){T.componentRegistry[S[i].getId()].utils.unbind();}}function f(o){var S=[];c(o,S);for(var i=0;i<S.length;i++){T.componentRegistry[S[i].getId()].utils.unbind();}}function h(){var r=T.mRoutingTree.root;if(r.componentId){var R=T.componentRegistry[r.componentId];var i=R.oComponent;if(i&&typeof i.setIsRefreshRequired==="function"){i.setIsRefreshRequired(true);}}}function j(){var i=T.oNavigationControllerProxy.getActiveComponents();T.oAppComponent.getModel().resetChanges();i.forEach(function(C){var o=T.componentRegistry[C];o.oComponent.setIsRefreshRequired(true);});}function k(C){T.leaveAppPromise.then(function(){for(var i in C){for(var n in C[i].entitySets){b(C[i].component,C[i].entitySets[n]);}if(C[i].withoutAssociationsRefresh){T.componentRegistry[i].bWithoutAssociationsRefresh=true;}if(C[i].isRefreshRequired){C[i].component.setIsRefreshRequired(true);}}});}return{setAllPagesDirty:s,setParentToDirty:a,setMeToDirty:b,unbindChildren:u,unbindChildrenUsingTreeNode:f,setRootPageToDirty:h,setActivePagesToDirty:j,setRefreshBehaviour:k};}return B.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(T){e(this,g(T));}});});
