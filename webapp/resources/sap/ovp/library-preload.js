//@ui5-bundle sap/ovp/library-preload.js
sap.ui.predefine('sap/ovp/app/Component',["sap/ui/core/UIComponent","sap/ovp/cards/rta/SettingsDialogConstants","sap/ui/core/routing/Router","sap/base/util/ObjectPath","sap/ui/model/json/JSONModel","sap/ovp/ui/DashboardLayoutUtil","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/ui/core/CustomData","sap/ushell/Config","sap/base/util/merge","sap/base/util/isEmptyObject","sap/ovp/cards/ovpLogger","sap/ui/Device","sap/ovp/cards/CommonUtils","sap/ui/generic/app/navigation/service/NavigationHandler","sap/ovp/placeholder/placeholderHelper","sap/m/App","sap/ui/rta/RuntimeAuthoring"],function(U,S,R,O,J,D,V,a,b,C,c,m,d,o,e,f,N,p,A){"use strict";var l=new o("OVP.app.Component");return U.extend("sap.ovp.app.Component",{metadata:{"manifest":"json",routing:{config:{routerClass:R},targets:{},routes:[]},properties:{"cardContainerFragment":{"type":"string","defaultValue":"sap.ovp.app.CardContainer"},"dashboardLayoutUtil":{"type":"sap.ovp.ui.DashboardLayoutUtil"},"designtimePath":{"type":"string","defaultValue":"sap/ovp/ui/OVPWrapper.designtime"}},version:"1.96.0",library:"sap.ovp.app",dependencies:{libs:["sap.ovp"],components:[]},config:{fullWidth:true,hideLightBackground:true}},_getOvpCardOriginalConfig:function(s){var g=this.getOvpConfig();return g.cards[s];},restore:function(){sap.ovp.cards.charts.VizAnnotationManager.formatChartAxes();},getOvpConfig:function(){var g;var E=[];var M=this.getMetadata();while(M&&M.getComponentName()!=="sap.ovp.app"){g=M.getManifestEntry("sap.ovp");if(g){E.unshift(g);}M=M.getParent();}E.unshift({});E.unshift(true);g=m.apply(m,E);return g;},_removeExtraArrayElements:function(s,g){var h=s["staticContent"],i=g["staticContent"],j=s["tabs"],k=g["tabs"];if(h&&i){if(h.length>i.length){s["staticContent"].splice(i.length,h.length-i.length);}}if(j&&k){if(j.length>k.length){s["tabs"].splice(k.length,j.length-k.length);}}},_emptyAllArrayElements:function(s,g){var h=s["staticContent"],j=g["staticContent"],k=s["tabs"],n=g["tabs"];if(h&&j){for(var i=0;i<h.length;i++){s["staticContent"][i]={};}}if(k&&n){for(var i=0;i<k.length;i++){s["tabs"][i]={};}}},_mergeObjects:function(g,h){for(var i in h){if(h.hasOwnProperty(i)){var v=h[i];if(typeof v=="object"&&g[i]){if(v.operation==="DELETE"){delete g[i];}else{this._mergeObjects(g[i],v);}}else{if(typeof v=="object"&&!g[i]&&v.operation==="DELETE"){continue;}g[i]=v;}}}return g;},_mergeLayerObject:function(g,L){if(!g[L+".settings"]){return g;}var s=m({},g["settings"]),h=m({},g[L+".settings"]);this._removeExtraArrayElements(s,h);this._emptyAllArrayElements(s,h);g["settings"]=this._mergeObjects(s,h);return g;},_mergeKeyUserChanges:function(g){if(!g.hasOwnProperty("customer.settings")&&!g.hasOwnProperty("customer_base.settings")&&!g.hasOwnProperty("vendor.settings")){return g;}g=this._mergeLayerObject(g,"vendor");g=this._mergeLayerObject(g,"customer_base");g=this._mergeLayerObject(g,"customer");return g;},_getFullyQualifiedNameForEntity:function(E,F){var n="",r;if(!E){return"";}if(E.indexOf(".")>-1){return E;}var g=F.getMetaModel();if(f.isODataV4(F)){var h=g.getObject("/");var i=h[E];n=i.$Type;return n;}else{var j=g&&g.getODataEntityContainer();n=j&&j.namespace;if(n&&!(E.indexOf(n)>-1)){r=n+"."+E;}else{r=E;}return r;}},isDate:function(P){if(((P["type"]==="Edm.DateTime"&&P["sap:display-format"]==="Date")||(P["type"]==="Edm.String"&&P["com.sap.vocabularies.Common.v1.IsCalendarDate"]&&P["com.sap.vocabularies.Common.v1.IsCalendarDate"].Bool==="true"))&&P["sap:filter-restriction"]==="interval"){return true;}return false;},_getDatePropertiesFromEntitySet:function(F){var P=F.property,g=[];for(var k in P){var h={};if(this.isDate(P[k])){h.PropertyPath=P[k].name;}if(!d(h)){g.push(h);}}return g;},_getAllControlConfiguration:function(g,s,h){for(var i=0;i<g.length;i++){if(h[g[i].PropertyPath]){var I=false;for(var j=0;j<s.length;j++){if(s[j].PropertyPath===g[i].PropertyPath){I=true;}}if(!I){g[i].bNotPartOfSelectionField=true;s.push(g[i]);}}}return s;},_getSettingsForDateProperties:function(g,h){var i={};for(var k in g){if(h.fields&&h.fields[g[k].PropertyPath]){i[g[k].PropertyPath]=this.getConditionTypeForDateSetting(h.fields[g[k].PropertyPath]);}else{if(h.customDateRangeImplementation||h.filter||h.selectedValues){i[g[k].PropertyPath]=this.getConditionTypeForDateSetting(h);}}}return i;},getConditionTypeForDateSetting:function(g){if(g.customDateRangeImplementation){return{customDateRangeImplementation:g.customDateRangeImplementation};}else if(g.filter){return{filter:g.filter};}else if(g.selectedValues){return{selectedValues:g.selectedValues,exclude:(g.exclude!==undefined)?g.exclude:true};}return undefined;},createXMLView:function(g){if(this.getRouter()){this.getRouter().initialize();}var h=this.getMetadata().getManifestEntry("sap.app");var u=this.getMetadata().getManifestEntry("sap.ui");var i=O.get("icons.icon",u);var F=this.getModel(g.globalFilterModel);var j=F&&F.getMetaModel();this.setModel(F);var s=this.getMetadata().getComponentName();var k=s.replace(/\./g,"/");g.baseUrl=sap.ui.require.toUrl(k);g.useMacroFilterBar=F?f.isODataV4(F):false;if(g.smartVariantRequired===undefined||g.smartVariantRequired===null){g.smartVariantRequired=true;}if(g.enableLiveFilter===undefined||g.enableLiveFilter===null){g.enableLiveFilter=true;}if(g.showDateInRelativeFormat===undefined||g.showDateInRelativeFormat===null){g.showDateInRelativeFormat=true;}if((g.filterSettings&&g.filterSettings.dateSettings&&(g.filterSettings.dateSettings.useDateRange!==undefined))&&g.useDateRangeType!==undefined){throw new Error("Defining both useDateRange and useDateRangeType in the manifest is not allowed");}g.useDateRangeType=(g.filterSettings&&g.filterSettings.dateSettings&&(g.filterSettings.dateSettings.useDateRange!==undefined))?g.filterSettings.dateSettings.useDateRange:g.useDateRangeType;if(g.useDateRangeType===undefined||g.useDateRangeType===null){g.useDateRangeType=false;}if(g.bHeaderExpanded===undefined||g.bHeaderExpanded===null){g.bHeaderExpanded=e.system.desktop?true:false;}if(g.chartSettings===undefined||g.chartSettings===null){g.chartSettings={};}if(g.chartSettings.showDataLabel===undefined||g.chartSettings.showDataLabel===null){g.chartSettings.showDataLabel=false;}if(g.globalFilterEntitySet&&g.globalFilterEntitySet!==" "){var E=j&&j.getODataEntitySet(g.globalFilterEntitySet);g.globalFilterEntityType=E&&E.entityType;}var n=g.globalFilterEntityType;if(g.globalFilterEntityType&&g.globalFilterEntityType!==" "&&g.globalFilterEntityType.length>0){g.globalFilterEntityType=this._getFullyQualifiedNameForEntity(g.globalFilterEntityType,F);g.globalFilterEntityTypeNQ=g.globalFilterEntityType.split(".").pop();}var q=new J(g);q.setProperty("/applicationId",O.get("id",h));q.setProperty("/title",O.get("title",h));q.setProperty("/description",O.get("description",h));if(g.globalFilterEntityType){var r,t;if(f.isODataV4(F)){var v=j.getObject("/"+g.globalFilterEntityType+"@com.sap.vocabularies.UI.v1.SelectionFields");r=v;t=j.getObject("/"+g.globalFilterEntityType);q.setProperty("/mainEntityVersion","ODataV4");}else{t=j.getODataEntityType(g.globalFilterEntityType);r=m([],t["com.sap.vocabularies.UI.v1.SelectionFields"]);q.setProperty("/mainEntityVersion","ODataV2");}if(g.filterSettings&&g.filterSettings.dateSettings){var w=this._getDatePropertiesFromEntitySet(t);var x=this._getSettingsForDateProperties(w,g.filterSettings.dateSettings);if(q.getProperty("/useDateRangeType")&&!d(x)){throw new Error("Setting 'useDateRange' property as True and maintaining property level configuration for date ranges in Date Settings are mutually exclusive, resulting in error. Change one of these settings in manifest.json as per your requirement.");}r=this._getAllControlConfiguration(w,r,x);q.setProperty("/datePropertiesSettings",x);}q.setProperty("/allControlConfiguration",r);q.setProperty("/mainEntityType",t);}if(i){if(i.indexOf("sap-icon")<0&&i.charAt(0)!=='/'){i=g.baseUrl+"/"+i;}q.setProperty("/icon",i);}var y=g.cards;var z=[];var B;for(var G in y){if(y.hasOwnProperty(G)&&y[G]){B=this._mergeKeyUserChanges(y[G]);B.id=G;z.push(B);}}z.sort(function(L,P){if(L.id<P.id){return-1;}else if(L.id>P.id){return 1;}else{return 0;}});q.setProperty("/cards",z);if(this.inResizableTestMode()===true){g.containerLayout="resizable";}if(g.containerLayout&&g.containerLayout==="resizable"){q.setProperty("/cardContainerFragment","sap.ovp.app.DashboardCardContainer");q.setProperty("/dashboardLayout",g.resizableLayout);var H=new D(q);this.setDashboardLayoutUtil(H);}else{q.setProperty("/cardContainerFragment",this.getCardContainerFragment());}this.setModel(q,"ui");var I=this._getOvpLibResourceBundle();this.setModel(I,"ovplibResourceBundle");var t;if(f.isODataV4(F)){t="/"+g.globalFilterEntityType;}else{t=j&&j.getODataEntityType(g.globalFilterEntityType,true);}var M=this.createId("mainView");var K=new sap.ui.core.mvc.XMLView(M,{height:"100%",preprocessors:{xml:{bindingContexts:{ui:q.createBindingContext("/"),meta:j.createBindingContext(t),contextPath:j.createBindingContext("/"+n),entitySet:n},models:{ui:q,meta:j,contextPath:j,metaModel:j}}},type:V.XML,viewName:"sap.ovp.app.Main",async:true,customData:[new C({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{"designtime":"sap/ovp/ui/OVPWrapper.designtime"}}})]});return K;},_showErrorPage:function(){var v=new sap.ui.core.mvc.XMLView({height:"100%",type:V.XML,viewName:"sap.ovp.app.Error"});var g=this._getOvpLibResourceBundle();v.setModel(g,"ovplibResourceBundle");this.setAggregation("rootControl",v);if(this.oContainer){this.oContainer.invalidate();}},_formParamString:function(P){var k=Object.keys(P);var i;var s="?";for(i=0;i<k.length;i++){s=s+k[i]+"="+P[k[i]]+"&";}return s.slice(0,-1);},_checkForAuthorizationForCards:function(g){return new Promise(function(r,h){this.ovpConfig=g;var n=new N(this);f.enable(this,n);var n=f.getNavigationHandler();var j=[];for(var k in this.ovpConfig.cards){var q=this.ovpConfig.cards[k];if(q&&q.settings&&q.settings.requireAppAuthorization){j.push(q.settings.requireAppAuthorization);}}if(j.length>0&&n&&n.oCrossAppNavService){return n.oCrossAppNavService.isIntentSupported(j).done(function(s){var u=[];for(var k in this.ovpConfig.cards){if(this.ovpConfig.cards[k].settings.requireAppAuthorization&&s[this.ovpConfig.cards[k].settings.requireAppAuthorization].supported===false){u.push(k);}}for(var i=0;i<u.length;i++){for(var k in this.ovpConfig.cards){if(u[i]===k){delete this.ovpConfig.cards[k];break;}}}r(this.ovpConfig);}.bind(this)).fail(function(E){l.error(E);h(E);});}else{r(g);}}.bind(this));},_checkForAuthorizationForLineItems:function(){return new Promise(function(r,g){var h=[],k=[];var n=this.getOvpConfig();var q=n["cards"];for(var s in q){if(q.hasOwnProperty(s)&&q[s]){var t=q[s];var u=t.settings;if((t.template==="sap.ovp.cards.linklist"||t.template==="sap.ovp.cards.v4.linklist")&&u.listFlavor==="standard"&&u.staticContent){var v=u.staticContent;for(var i=0;i<v.length;i++){if(v[i].semanticObject||v[i].action){var I="#"+v[i].semanticObject+"-"+v[i].action;if(v[i].params){var P=this._formParamString(v[i].params);I=I+P;}if(k.indexOf(s)===-1){k.push(s);}if(h.indexOf(I)===-1){h.push(I);}}}}}}this._oCardsWithStaticContent=k;if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService('CrossApplicationNavigation').isIntentSupported(h).done(function(w){var n=this.getOvpConfig();for(var x in w){if(w.hasOwnProperty(x)&&w[x].supported===false){for(var i=0;i<this._oCardsWithStaticContent.length;i++){var v=n["cards"][this._oCardsWithStaticContent[i]].settings.staticContent;for(var j=v.length-1;j>=0;j--){var I="#"+v[j].semanticObject+"-"+v[j].action;if(v[j].params){var P=this._formParamString(v[j].params);I=I+P;}if(x===I){v.splice(j,1);}}n["cards"][this._oCardsWithStaticContent[i]].settings.staticContent=v;}}}delete this._oCardsWithStaticContent;r(n);}.bind(this)).fail(function(E){l.error(E);g(E);});}else{r(n);}}.bind(this));},createContent:function(){var g=this.getOvpConfig();var F=this.getModel(g.globalFilterModel);var P=[this._checkForAuthorizationForLineItems(g),b.pResourcePromise];if(f.isODataV4(F)){P.unshift(F&&F.getMetaModel().requestObject("/"+g.globalFilterModel));}else{P.unshift(F&&F.getMetaModel().loaded());}if(F&&!this.getAggregation("rootControl")){Promise.all(P).then(function(r){return this._checkForAuthorizationForCards(r[1]);}.bind(this)).then(function(r){this.oOvpConfig=r;this.runAsOwner(function(){var v=this.createXMLView(this.oOvpConfig);v.loaded().then(function(){if(p.isPlaceHolderEnabled()){var n=new A({id:'host'});n.addPage(v);this.setAggregation("rootControl",n);p.showPlaceholder(n);}else{this.setAggregation("rootControl",v);}this.oContainer.invalidate();}.bind(this));}.bind(this));}.bind(this));if(!f.isODataV4(F)){F.attachMetadataFailed(function(){this._showErrorPage();}.bind(this));}}},_getOvpLibResourceBundle:function(){if(!this.ovplibResourceBundle){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=r?new a({bundleUrl:r.oUrlInfo.url,bundle:r}):null;}return this.ovplibResourceBundle;},createMapForEntityContainer:function(E){var g={};var h=E.entitySet;for(var i=0;i<h.length;i++){g[h[i].name]=h[i].entityType;}return g;},inResizableTestMode:function(){return this._getQueryParamUpToTop('resizableTest')=='true';},_getQueryParamUpToTop:function(n){var w=window;var v=this.getQueryParam(w.location.search,n);if(v!=null){return v;}if(w==w.parent){return null;}w=w.parent;return null;},getQueryParam:function(q,n){var v=null;if(!q){return v;}if(q.indexOf('?')!=-1){q=q.substring(q.indexOf('?'));}if(q.length>1&&q.indexOf(n)!=-1){q=q.substring(1);var g=q.split('&');for(var i=0;i<g.length;i++){var h=g[i].split('=');if(h[0]==n){v=h[1];break;}}}return v;}});});
sap.ui.predefine('sap/ovp/app/FilterHelper',["sap/ui/model/Filter"],function(F){"use strict";
function g(e,f,E,o){var r=[];if(f.length>0&&e){var b=e.entityType;var R=_(e.property,f[0],e.name,b,E,o);if(R){r.push(R);}}return r;}
function _(e,f,E,t,o,T){if(!f._bMultiFilter){f.sPath=f.sPath.split('/').pop();var M=a(e,f.sPath,E,t,o,T);if(M){f.sPath=M;return f;}}else{var d=f.aFilters;var s,S=[];if(d){for(var i=0;i<d.length;i++){s=_(e,d[i],E,t,o,T);if(s){S.push(s);}}if(S.length>0){return(new F(S,f.bAnd));}}}}
function a(e,t,E,T,o,b){var i,M;for(i=0;i<e.length;i++){if(e[i].name===t){M=e[i].name;return M;}if((("P_"+e[i].name)===t)||(e[i].name===("P_"+t))){M=e[i].name;return M;}}if(!E||!T||!o||!b){return;}var c=o.oMetadata._getEntityTypeByName(E);var d=b.oMetadata._getEntityTypeByName(T);if(!c||!d){return;}var s="com.sap.vocabularies.Common.v1.SemanticObject";var f="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var h=o.oAnnotations.getAnnotationsData();if(!h||!h.propertyAnnotations){return;}var j=h.propertyAnnotations[c.namespace+"."+c.name];var k=b.oAnnotations.getAnnotationsData();if(!k||!k.propertyAnnotations){return;}var l=k.propertyAnnotations[d.namespace+"."+d.name];var n=l&&l[t];if(!n||!n[s]){return;}var p,q,r,u,L;for(p in j){q=j[p];if(q[s]&&q[s].String===n[s].String){r=q[f];if(!r){continue;}u=r.length;L="";while(u--){if(r[u].SemanticObjectProperty.String===t){L=r[u].LocalProperty.PropertyPath;break;}}if(L!==""){for(i=0;i<e.length;i++){if(e[i].name===L){M=e[i].name;return M;}}}}}return M;}
function m(r,s){return r;}
return{getEntityRelevantFilters:g,mergeFilters:m};});
sap.ui.predefine('sap/ovp/app/Main.controller',["sap/ui/core/mvc/Controller","sap/m/library","sap/ui/model/odata/ODataUtils","sap/ovp/cards/generic/Component","sap/ovp/cards/v4/generic/Component","sap/ui/generic/app/navigation/service/NavigationHandler","sap/m/MessageBox","sap/ovp/cards/CommonUtils","sap/ovp/cards/PersonalizationUtils","sap/ovp/cards/charts/VizAnnotationManager","sap/m/BusyDialog","sap/ui/model/Filter","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/comp/state/UIState","sap/m/ColumnListItem","sap/m/Text","sap/m/Switch","sap/m/Table","sap/m/Column","sap/m/Button","sap/m/Dialog","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ovp/ui/SmartphoneHeaderToggle","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/fl/write/api/ControlPersonalizationWriteAPI","sap/ui/thirdparty/hasher","sap/ui/model/analytics/odata4analytics","sap/m/BackgroundDesign","sap/m/ListSeparators","sap/ui/core/TextAlign","sap/ovp/support/lib/CommonMethods","sap/ovp/app/resources","sap/ovp/app/TemplateBaseExtension","sap/ui/core/mvc/ControllerExtension","sap/ovp/app/OVPUtils","sap/base/security/encodeURL","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/core/CustomData","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/cards/semanticDateRangeTypeHelper","sap/ui/model/Filter","sap/ovp/placeholder/placeholderHelper"],function(C,S,O,a,b,N,M,c,P,V,B,F,d,U,f,T,g,h,m,n,D,J,o,p,q,r,s,t,u,v,L,w,x,y,z,A,E,G,H,Q,I,K,R,W,X,Y,Z,$){"use strict";var _="sap.ovp.app.customData",a1="sap.ovp.app.extensionData";var b1=new W("OVP.app.Main");return C.extend("sap.ovp.app.Main",{getCustomAppStateDataExtension:function(e){},restoreCustomAppStateDataExtension:function(e){},getCustomFilters:function(){},onCustomActionPress:function(e){},onCustomParams:function(e){},modifyStartupExtension:function(e){},getCustomMessage:function(e,i){},onBeforeRebindPageExtension:function(){},oRefreshTimer:null,nRefreshInterval:0,filterItemInFocus:null,bFinishedCardsCreationProcess:false,storeIncomingDeltaChanges:function(e){this.deltaCardsInfo=e?e:[];},appendIncomingDeltaChange:function(e){this.deltaChanges.push(e);},templateBaseExtension:z,onInit:function(){this.bDeltaChangesEnabled=false;this.bRTAActive=false;this.bResetChartAxisFormatter=false;this.deltaChanges=[];this._initFlexibilityPersonalization();this.globalEventBus=sap.ui.getCore().getEventBus();this.getView().loaded().then(function(){var e=this.getOwnerComponent();var i=e.getMetadata();if(e&&i&&i.getManifest()){x.setAppComponent(this.getOwnerComponent());}x.setApplicationStatus(x.mApplicationStatus.LOADING);x.publishEvent("elements","ViewRenderingStarted",{});this.oContainer=sap.ushell&&sap.ushell.Container;this.aErrorCards=[];this.oCardsModels={};this.aFilters=[];this.errorHandlingObject={atLeastOneRequestSuccess:false,errorLoadingTimeout:{}};this.sPreviousEntityType="";this.sCurrentEntityType="";this.oLoadedComponents={};this.bGlobalFilterLoaded=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this.fnMacroFilterBarLoaded=undefined;this.isInitialLoading=true;this.isMacroFilterBar;var j=this.getUIModel();this.bDisableErrorPage=j&&j.getProperty("/disableErrorPage");this.oNavigationHandler=this.oNavigationHandler||new N(this);this.getLayout().addStyleClass("ovpLayoutElement");this.oState={};this.oState.oSmartFilterbar=this.byId("ovpGlobalFilter");this._initGlobalFilter();this._createModelForTile();this._checkJamAuth();c.enable(this,this.oNavigationHandler);this._loadCardComponent("sap.ovp.cards.error");}.bind(this));},performRecreationOfCard:function(e){e.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(e.model);e=this._getTemplateForChart(e);this._loadCardComponent(e.template);this._createModelViewMap(e);Q.when(this.createCard(e)).then(function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var i=this.getLayout().getDashboardLayoutUtil();if(i){var j=i.getDashboardLayoutModel();var k=j.getCardById(e.id);i._sizeCard(k);j.extractCurrentLayoutVariant();}}}.bind(this));},onExit:function(){this.bResetChartAxisFormatter=true;},_getOriginalCardDescriptorById:function(e){if(!e){return null;}var i=this.getView().byId(e);var j=i.getComponentInstance();var k=j.getComponentData();var l=k.appComponent;return l._getOvpCardOriginalConfig(e);},recreateCard:function(e){var i=e.cardId;var j=this._getCardFromManifest(i);var k=this._getOriginalCardDescriptorById(i);if(j.template=="sap.ovp.cards.charts.analytical"||j.template=="sap.ovp.cards.charts.smart.chart"||j.template=="sap.ovp.cards.v4.charts.analytical"){j.settings.chartAnnotationPath=e.chartAnnotationPath;j.settings.colorPalette=e.colorPalette;j.settings.bEnableStableColors=e.bEnableStableColors;if(e.navigation){j.settings.navigation=e.navigation;}}if(e.entitySet){j.settings.entitySet=e.entitySet;}j.settings.annotationPath=e.annotationPath;j.settings.dynamicSubtitleAnnotationPath=e.dynamicSubtitleAnnotationPath;j.settings.presentationAnnotationPath=e.presentationAnnotationPath;j.settings.selectionAnnotationPath=e.selectionAnnotationPath;j.settings.selectionPresentationAnnotationPath=e.selectionPresentationAnnotationPath;j.settings.kpiAnnotationPath=e.kpiAnnotationPath;j.settings.dataPointAnnotationPath=e.dataPointAnnotationPath;j.settings.identificationAnnotationPath=e.identificationAnnotationPath;j.settings.headerAnnotationPath=e.headerAnnotationPath;j.settings.staticParameters=k&&k.settings&&k.settings.staticParameters;if(e.staticParameters){j.settings.staticParameters=e.staticParameters;}if(e.customParams){j.settings.customParams=e.customParams;}var l=j.settings.selectedKey;j.settings.selectedKey=e.selectedKey;if(j){this.performRecreationOfCard(j);}var c1={changeType:"viewSwitch",content:{cardId:e.cardId,selectedKey:e.selectedKey,oldKey:l},isUserDependent:true};P.savePersonalization(c1,this.getView());},recreateRTAClonedCard:function(e){var i=this._getCardFromManifest(e.id);if(i){i.settings=e.settings;this.performRecreationOfCard(i);}},onBeforeRendering:function(){},onRequestCompleted:function(e){if(e&&e.getParameters()&&e.getParameters().success){var i=e.getParameters().response&&e.getParameters().response.responseText?JSON.parse(e.getParameters().response.responseText):"";if(i&&i.d&&i.d.results&&i.d.results.length==0){this.fVerifyAndSetErrorOrCustomMessageCard(e,true);}}else if(e&&e.getParameters()&&e.getParameters().response&&e.getParameters().response.statusCode!==0){this.fVerifyAndSetErrorOrCustomMessageCard(e,false);}},fVerifyAndSetErrorOrCustomMessageCard:function(i,j){var k;var l=this.getView().getModel("ui").getProperty('/aOrderedCards');for(k in l){var c1=this.getView().byId(l[k].id);var d1=c1&&c1.getComponentInstance();var e1=d1&&d1.getComponentData();var f1=d1&&d1.getRootControl();var g1=f1&&f1.getController();var h1=g1&&g1.getCardItemsBinding();if(h1&&!c.isODataV4(g1.oView.getModel())){var i1=i.getParameters().url;var j1=h1.sCustomParams;var k1=h1.sFilterParams;var l1=h1.sPath.replace("/","");var m1=h1.sRangeParams;var n1=h1.sCountMode&&h1.sCountMode.indexOf("Inline");var o1=h1.sSortParams;var p1=i.getSource().sServiceUrl;var q1=i.oSource&&i.oSource.oMetadata;var r1=g1.getEntityType();var s1=this.getView().getModel();var t1=g1.oView.getModel();var u1=this._getEntityRelevantFilters(r1,this.aFilters,t1,s1);var v1;try{v1=sap.ui.model.odata.ODataUtils.createFilterParams(u1,q1,r1);}catch(e){b1.error("applying filter on a card which is not valid");}i1=i1.split(l1).join("").split(j1).join("").split(k1).join("").split(m1).join("").split(o1).join("").split(p1).join("").split(v1).join("").split("?").join("").split("&").join("").split("/").join("");if(!n1){i1=i1.split("$inlinecount=allpages").join("");}var w1=e1&&e1.cardId;var x1=this._getCardFromManifest(w1);if(i1){var y1=/sap-client=[0-9][0-9][0-9]/i;i1=i1.replace(y1,"");}if(x1&&!i1){var z1=I({},i);var A1=I({},x1);var B1=this.getCustomMessage(z1,A1.id);B1=B1&&typeof B1==="object"?B1:"";if(j&&!B1){return;}if(B1){if(j&&B1.hasOwnProperty("sMessage")&&B1.sMessage&&typeof B1.sMessage==="string"){i.getParameters().response.statusText=B1.sMessage;if(B1.hasOwnProperty("sIcon")&&B1.sIcon&&typeof B1.sIcon==="string"&&B1.sIcon.indexOf("sap-icon")!==-1){i.getParameters().response.sIcon=B1.sIcon;}}else if(!j&&B1.hasOwnProperty("sMessage")&&B1.sMessage&&typeof B1.sMessage==="string"){i.getParameters().response.statusText=B1.sMessage;}}if(this.aErrorCards.indexOf(w1)==-1){this.aErrorCards.push(x1.id);}else{d1.destroy();}this.createErrorCard(x1,i);}}}},onAfterRendering:function(){x.setApplicationStatus(x.mApplicationStatus.RENDERED);x.publishEvent("elements","ViewRendered",{});this.oModelViewMap={};this.oAppStatePromise=null;if(this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes")){this.nRefreshInterval=this.getView().getModel("ui").getProperty("/refreshIntervalInMinutes");this.nRefreshInterval=(this.nRefreshInterval<=1?1:this.nRefreshInterval)*60000;}var e=this._getCardsModel();var i=[];var k;for(k in e){if(i.indexOf(e[k].model)==-1){i.push(e[k].model);}}var j=this.getOwnerComponent();if(j){for(k in i){var l=j.getModel(i[k]);if(l&&c.isODataV4(l)){setTimeout(this.destroyErrorCardsAndReplaceWithOriginal.bind(this),0);}else if(l){l.attachRequestCompleted(this.onRequestCompleted.bind(this));l.attachRequestSent(this.destroyErrorCardsAndReplaceWithOriginal.bind(this));}}}if(this.initialized){return;}this.initialized=true;Promise.all([this.oFlexibilityPersonalizationPromise,this.oGlobalFilterLoadedPromise]).then(function(){this.isMacroFilterBar=this.getMacroFilterBar()!==undefined;this.getView().byId("ovpFilterNotFulfilledPage").setVisible(false);this.getView().byId("ovpCardPage").setVisible(true);this.persistencyVariantLoaded=true;var c1;var d1=[],e1=[];this.aManifestOrderedCards=this._getCardArrayAsVariantFormat(this.getLayout().getContent());for(var f1=0;f1<this.aManifestOrderedCards.length;f1++){c1=this._getCardFromManifest(this.aManifestOrderedCards[f1].id);if(c1&&c1.settings&&c1.settings.requireAppAuthorization){d1.push({id:c1.id,cardIntent:c1.settings.requireAppAuthorization});e1.push(c1.settings.requireAppAuthorization);}}var g1=this._mergeLREPContent(this.aManifestOrderedCards);this.getView().getModel("ui").setProperty('/aOrderedCards',g1);this.organizeCards(g1);}.bind(this));if(o.system.phone){p.enable(this);}},organizeCards:function(e){var k;var l=[];this._updateLayoutWithOrderedCards();this._updateDashboardLayoutCards(e);if(this.isDragAndDropEnabled()){if(sap.ushell&&sap.ushell.Container){this._initShowHideCardsButton();}}this._clearStoredEntities();e=this.getView().getModel("ui").getProperty('/aOrderedCards');for(var i=0;i<e.length;i++){if(e[i].visibility){k=this._getCardFromManifest(e[i].id);if(k){l.push(k);}}}for(var i=0;i<l.length;i++){this._initCardModel(l[i].model);this._loadCardComponent(l[i].template);this._createModelViewMap(l[i]);}setTimeout(function(){this.getLayout().addStyleClass("ovpLayoutElementShow");}.bind(this),0);var c1=this.fGetViewSwitchIndex(l);var d1=[];for(var i=0,j=0;j<l.length;i++,j++){while(l[j].id!==e[i].id){i++;}k=l[j];if(!k.settings.title){b1.error("title is mandatory for card ID : "+k.id);}if(k.settings.tabs){var e1=0;var f1=c1&&c1.hasOwnProperty(k.id)?c1[k.id]:"";if(f1&&typeof f1=="number"&&f1>0&&f1<=k.settings.tabs.length){e1=f1>=1?f1-1:f1;this.setOrderedCardsSelectedKey(k.id,f1);}else if(e[i].selectedKey&&k.settings.tabs.length>=e[i].selectedKey){e1=e[i].selectedKey-1;}this.initializeTabbedCard(k,e1);}k=this._getTemplateForChart(k);this._loadCardComponent(k.template);k.settings.baseUrl=this._getBaseUrl();d1.push(this.createCard(k));}Promise.all(d1).then(function(){this.bFinishedCardsCreationProcess=true;}.bind(this));if(this.busyDialog){this.busyDialog.close();}},_getTemplateForChart:function(e){if(e.template==="sap.ovp.cards.charts.smart.chart"){var i=this.getView();var j=i.getModel(e.model);var k=j.getMetaModel();var l=k.getODataEntitySet(e.settings.entitySet);var c1=k.getODataEntityType(l.entityType);var d1;var e1;var f1;var g1=false;var h1;if(e&&e.settings){if(!g1&&e.settings.kpiAnnotationPath){var i1=c1[e.settings.kpiAnnotationPath];h1=i1.Detail.DefaultPresentationVariant&&i1.Detail.DefaultPresentationVariant.Path;if(h1){f1=this._getTemplateForChartFromVisualization(h1,e,j,l,c1);g1=f1.bTemplateUpdated;if(g1){e=f1.oCard;return e;}}}if(!g1&&e.settings.selectionPresentationAnnotationPath){var j1=c1[e.settings.selectionPresentationAnnotationPath];if(j1){h1=j1.PresentationVariant&&j1.PresentationVariant.Path;if(h1){f1=this._getTemplateForChartFromVisualization(h1,e,j,l,c1);g1=f1.bTemplateUpdated;if(g1){e=f1.oCard;return e;}}}}if(!g1&&e.settings.presentationAnnotationPath){h1=e.settings.presentationAnnotationPath;f1=this._getTemplateForChartFromVisualization(h1,e,j,l,c1);g1=f1.bTemplateUpdated;if(g1){e=f1.oCard;return e;}}if(!g1&&e.settings.chartAnnotationPath){d1=c1[e.settings.chartAnnotationPath];e1=d1&&d1.ChartType&&d1.ChartType.EnumMember;if(e1&&e1.split("/")[1]==="Donut"){e.template="sap.ovp.cards.charts.analytical";}else{e.template="sap.ovp.cards.charts.smart.chart";}}}}return e;},_getTemplateForChartFromVisualization:function(e,i,j,k,l){if(/^@/.test(e)){e=e.slice(1);}i.settings.presentationAnnotationPath=e;var c1=l[e]&&l[e].Visualizations;var d1;var e1;var f1;var g1=false;if(c1&&c1.length>0){for(d1=0;d1<c1.length;d1++){var h1=c1[d1].AnnotationPath;if(!h1){return{oCard:i,bTemplateUpdated:g1};}h1.trim();if(h1.startsWith("@")){h1=h1.slice(1);}if(h1.indexOf("Chart")!=-1){i.settings.chartAnnotationPath=h1;e1=l[h1];f1=e1&&e1.ChartType&&e1.ChartType.EnumMember;if(f1&&f1.split("/")[1]==="Donut"){i.template="sap.ovp.cards.charts.analytical";}else{i.template="sap.ovp.cards.charts.smart.chart";}}g1=true;}}return{oCard:i,bTemplateUpdated:g1};},_createModelViewMap:function(e){if(!e||!e.settings||!e.model){return;}if(!e.settings.entitySet||e.settings.entitySet===""){return;}if(!(e.template.startsWith("sap.ovp.cards"))){return;}var i=e.model;if(!this.oModelViewMap[i]){this.oModelViewMap[i]={};}this.oModelViewMap[i][e.id]=true;},setTabIndex:function(e){if(typeof e=="object"){this.oTabIndexList=e;}else{this.oTabIndexList={};}},getTabIndex:function(){return this.oTabIndexList;},fGetViewSwitchIndex:function(e){var j=this.getGlobalFilter();var k=j&&j.getUiState();var l=k?JSON.stringify(k.getSelectionVariant()):"{}";var c1=JSON.parse(l);var d1=I({},c1);var e1=[];if(e&&e.length>0){for(var i=0;i<e.length;i++){var f1=I({},e[i]);e1.push(f1);}}this.onBeforeRebindPageExtension(e1,d1);return this.getTabIndex();},changeViewSwitchForVisibleCard:function(){var e=this.getView().getModel("ui").getProperty('/aOrderedCards');if(e&&e.length>0){var j=[],k=[];for(var i=0;i<e.length;i++){j.push(this._getCardFromManifest(e[i].id));}var l=this.fGetViewSwitchIndex(j);if(l&&typeof l=="object"){k=Object.keys(l);}if(k&&k.length>0){for(var i=0;i<e.length;i++){if(e[i]&&e[i].visibility==true){var c1=this._getCardFromManifest(e[i].id);if(c1&&c1.settings&&c1.settings.tabs&&c1.settings.hasOwnProperty("selectedKey")){var d1=l&&l.hasOwnProperty(c1.id)?l[c1.id]:"";var e1=c1.settings.selectedKey;if(d1&&typeof d1=="number"&&d1<=c1.settings.tabs.length&&d1!==e1){this.setOrderedCardsSelectedKey(c1.id,d1);var f1={};f1=c1.settings.tabs[d1-1];var g1={cardId:c1.id,selectedKey:d1};for(var h1 in f1){g1[h1]=f1[h1];}this.recreateCard(g1);}}}}}}},setOrderedCardsSelectedKey:function(e,j){var k=this.getView().getModel("ui").getProperty('/aOrderedCards');for(var i=0;i<k.length;i++){if(k[i]&&k[i].id==e){k[i].selectedKey=j;break;}}this.getView().getModel("ui").setProperty('/aOrderedCards',k);},getOrderedCardsSelectedKey:function(e){var j=this.getView().getModel("ui").getProperty('/aOrderedCards');for(var i=0;i<j.length;i++){if(j[i]&&j[i].id==e){return j[i].selectedKey;}}},initializeTabbedCard:function(e,i){if(e.template=="sap.ovp.cards.charts.analytical"||e.template=="sap.ovp.cards.charts.smart.chart"||e.template=="sap.ovp.cards.v4.charts.analytical"){e.settings.chartAnnotationPath=e.settings.tabs[i].chartAnnotationPath;e.settings.colorPalette=e.settings.tabs[i].colorPalette;e.settings.bEnableStableColors=e.settings.tabs[i].bEnableStableColors;if(e.settings.tabs[i].navigation){e.settings.navigation=e.settings.tabs[i].navigation;}}if(e.settings.tabs[i].entitySet){e.settings.entitySet=e.settings.tabs[i].entitySet;}e.settings.annotationPath=e.settings.tabs[i].annotationPath;e.settings.dynamicSubtitleAnnotationPath=e.settings.tabs[i].dynamicSubtitleAnnotationPath;e.settings.presentationAnnotationPath=e.settings.tabs[i].presentationAnnotationPath;e.settings.selectionAnnotationPath=e.settings.tabs[i].selectionAnnotationPath;e.settings.selectionPresentationAnnotationPath=e.settings.tabs[i].selectionPresentationAnnotationPath;e.settings.kpiAnnotationPath=e.settings.tabs[i].kpiAnnotationPath;e.settings.dataPointAnnotationPath=e.settings.tabs[i].dataPointAnnotationPath;e.settings.identificationAnnotationPath=e.settings.tabs[i].identificationAnnotationPath;e.settings.params=e.settings.tabs[i].params;e.settings.selectedKey=i+1;if(!e.settings.staticParameters){e.settings.staticParameters=e.settings.tabs[i].staticParameters;}if(!e.settings.customParams){e.settings.customParams=e.settings.tabs[i].customParams;}},_getLibraryResourceBundle:function(){if(!this.oLibraryResourceBundle){this.oLibraryResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ovp");}return this.oLibraryResourceBundle;},_getOvplibResourceBundle:function(){return this.getOwnerComponent()._getOvpLibResourceBundle();},_getCardsModel:function(){if(!this.oCards){var e=this.getUIModel();this.oCards=e.getProperty("/cards");}return this.oCards;},_getBaseUrl:function(){var e=this.getUIModel();if(!this.sBaseUrl){this.sBaseUrl=e.getProperty("/baseUrl");}return this.sBaseUrl;},_getApplicationId:function(){var e=this.getUIModel();return e.getProperty("/applicationId");},_getCardFromManifest:function(e){var j=this._getCardsModel();for(var i=0;i<j.length;i++){if(j[i].id===e){return j[i];}}b1.error("Card id "+e+" is not available in the manifest");return null;},_getCardArrayAsVariantFormat:function(e){var j=[];for(var i=0;i<e.length;i++){var k=this._getCardId(e[i].getId());j.push({id:k,visibility:e[i].getVisible()});var l;if(this.getView()&&this.getView().byId){if(this.getView().byId(k).getComponentInstance()){l=this.getView().byId(k).getComponentInstance().getComponentData().settings.selectedKey;}}if(l){j[j.length-1].selectedKey=l;}}return j;},_mergeLREPContent:function(l){var e=[];var i=false;if(this.bDeltaChangesEnabled&&Array.isArray(this.deltaCardsInfo)&&this.deltaCardsInfo.length>0){l=P.addMissingCardsFromManifest(l,this.deltaCardsInfo);i=true;}if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(!i){l=this.getLayout().getLayoutDataJSON();}e=P.mergeChanges(l,this.deltaChanges);this._bDashboardLayoutLrepActive=true;this.getLayout().getDashboardLayoutModel().setLayoutVars(e);}else{e=P.mergeChanges(l,this.deltaChanges);}return e?e:[];},_updateLayoutWithOrderedCards:function(){var l=this.getLayout();var e=this.getView().getModel("ui").getProperty('/aOrderedCards');l.removeAllContent();var k,c1=false;if(this.getView().getModel("ui")&&this.getView().getModel("ui").getProperty("/cards")){k=this.getView().getModel("ui").getProperty("/cards");for(var i=0;i<k.length;i++){c1=false;for(var j=0;j<e.length;j++){if(k[i].id==e[j].id){c1=true;break;}}if(!c1&&this.getView().byId(k[i].id)){this.getView().byId(k[i].id).destroy();}}}for(var i=0;i<e.length;i++){var d1=this.getView().byId(e[i].id);if(d1){d1.setVisible(e[i].visibility);l.addContent(d1);}}},_updateErrorCardsArray:function(e){var i;for(i=0;i<e.length;i++){var j=this.aErrorCards.indexOf(e[i].id);if((j>-1)&&e[i].visibility==false){this.aErrorCards.splice(j,1);}}},_updateDashboardLayoutCards:function(e){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().updateCardVisibility(e);}}},_resetDashboardLayout:function(){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){if(this.getLayout().getDashboardLayoutUtil()){this.getLayout().getDashboardLayoutUtil().resetToManifest();}this.getLayout().rerender();}},_getCardArrayAsVariantFormatDashboard:function(){var e=[];var l=this.getLayout();var i=l.dashboardLayoutUtil.aCards;l.dashboardLayoutUtil.dashboardLayoutModel._sortCardsByRow(i);i.forEach(function(j){e.push({id:j.id,visibility:j.dashboardLayout.visible});});return e;},_fnIsLoadDataOnGoButton:function(e){this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);var i=this.getUIModel().getProperty("/smartVariantRequired");if(!i){return false;}if(!this.oState.oSmartFilterbar.isCurrentVariantStandard()){return false;}var j=this.getUIModel().getProperty("/dataLoadSettings");var l=j?j.loadDataOnAppLaunch:"ifAnyFilterExist";if(!["ifAnyFilterExist","always","never"].includes(l)){b1.error("dataLoadSetting is incorrect. It should be one of ifAnyFilterExist,always,never");}var k=false,c1=true;if(l==="ifAnyFilterExist"){var d1=this.oState.oSmartFilterbar.getFiltersWithValues();k=true;c1=d1.length?true:false;}else if(l==="always"){k=true;}else if(l==="never"){k=false;}if(k){var e1=this.oState.oSmartFilterbar.getSmartVariant();if(e1){e1.setExecuteOnStandard(true);k=e1.getExecuteOnStandard();}}E.loadingState.GLOBALFILTERFILLED=k;return k&&e&&c1;},verifyGlobalFilterLoaded:function(){var l=this.getUIModel().getProperty("/enableLiveFilter");var e=this.getGlobalFilter();var i=true;var j=e.determineMandatoryFilterItems();var k,c1=e.getFilterData(),d1;if(j&&c1){var e1=j.length;while(e1--){k=j[e1];d1=e.determineControlByFilterItem(k,true);if(d1){if(!e._checkForValues(c1,k,d1)){i=false;break;}}}}if(!this.bGlobalFilterLoaded&&l===false){if(!i){if($.hidePlaceholderNeeded()){$.hidePlaceholder();}}return this._fnIsLoadDataOnGoButton(i);}if(i){if(e.validateMandatoryFields()){E.loadingState.GLOBALFILTERFILLED=true;return true;}}else if(!i){if($.hidePlaceholderNeeded()){$.hidePlaceholder();}}this.getView().byId("ovpMain").setHeaderExpanded(true);this.getView().byId("ovpFilterNotFulfilledPage").setVisible(true);E.loadingState.GLOBALFILTERFILLED=false;return false;},onGlobalFilterChange:function(e){this.filterChanged=true;if(this.bGlobalFilterInitialized){var i=this.getGlobalFilter();var l=i.getLiveMode();var j=this.getLayout();var k=e.getParameter("afterFilterDataUpdate");if(!l&&j&&!k){j.setActive(false);}else{this.changeViewSwitchForVisibleCard();}}},destroyErrorCardsAndReplaceWithOriginal:function(){if(this.isModelRefreshTriggered||this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var k;var e=Object.assign({},this.aErrorCards);for(k in e){var i=this.getView().byId(e[k]);var j=i&&i.getComponentInstance();var l=j&&j.getComponentData();var c1=l&&l.cardId;var d1=this._getCardFromManifest(c1);j.destroy();var e1=this.aErrorCards.indexOf(c1);if((e1>-1)){this.aErrorCards.splice(e1,1);}this.createCard(d1);}this.isModelRefreshTriggered=false;}},onGlobalFilterSearch:function(){if(this.filterChanged||this.bGoButtonPressed||this.bSearchButtonPressed){var e=this.getGlobalFilter();var k=this.getLayout();if(k){k.setActive(true);}if(this.aErrorCards&&this.aErrorCards.length>0){this.destroyErrorCardsAndReplaceWithOriginal();}if(e&&!e.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL();}this._clearStoredEntities();var l=[];if(this.oGlobalFilter['_aFields'].length>0){l=this.oGlobalFilter["_aFields"];}else{var c1=this.oGlobalFilter['_aFilterBarViewMetadata'];for(var i=0;i<c1.length;i++){var d1=c1[i];for(var j=0;j<d1.fields.length;j++){l.push(d1.fields[j]);}}}for(var i=0;i<l.length;i++){if(l[i].control){var e1=document.getElementById(l[i].control.sId);if(Q(e1).hasClass('sapMFocus')){this.filterItemInFocus=l[i].control;break;}}}var f1="ovp-"+new Date().getTime();this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);if(this.nRefreshInterval!==0){if(this.oRefreshTimer!==null){clearTimeout(this.oRefreshTimer);}this.attachRefreshInterval(this.nRefreshInterval);}for(var g1 in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(g1)&&!c.isODataV4(this.oCardsModels[g1])){try{this.oCardsModels[g1].refresh(false,false,f1);}catch(h1){b1.warning(h1);}}}this.filterChanged=false;this.bGoButtonPressed=false;this.bSearchButtonPressed=false;this._clearStoredEntities();}},_clearStoredEntities:function(){if(this.sPreviousEntityType){this.sPreviousEntityType="";}if(this.sCurrentEntityType){this.sCurrentEntityType="";}},_processSFBFilters:function(){var e=this.getGlobalFilter();var i=e.getFilters();var j=this.getCustomFilters();var k=true;var l;var c1=function(f1,g1){if(!(f1 instanceof A)){throw new Error("State must always be set with respect to a ControllerExtension");}if(!k){throw new Error("State must always be provided synchronously");}if(g1){l=g1;}};this.templateBaseExtension.addFilters(c1);k=false;var d1=[];if(j&&(j instanceof F)){d1.push(j);}if(l&&(l instanceof F)){d1.push(l);}if(d1.length!==0){var e1=[];if(i&&i.length>0){d1.push(i[0]);}e1.push(new F(d1,true));if(e1.length>0){i=e1;}}this.aFilters=i;},_processMacroFilters:function(){var e=this.getMacroFilterBar();var i=e.getConditions();var j=Object.keys(i);var k=[];if(j.length>0){var l=j.map(function(c1){var d1=i[c1]&&i[c1][0];if(d1){return new Z({path:c1,operator:d1.operator,value1:d1.values[0],value2:d1.values[1]});}});l=l.filter(function(c1){return c1!==undefined;});k.push(new Z({filters:l}));}this.aFilters=k;},_processFilters:function(){this.aFilters=[];if(this.getMacroFilterBar()){this._processMacroFilters();}if(this.getGlobalFilter()){this._processSFBFilters();}},_processSearch:function(){var e,i;var j=this.getGlobalFilter();if(!j){return;}var k=j.getParameters();var i=k&&k["custom"];if(!i){return;}for(var l in i){e=l+"="+G(i[l]);}return e;},_initGlobalFilter:function(){var e=this.getGlobalFilter();if(!e){var i=this.getMacroFilterBar();if(!i){this.bGlobalFilterLoaded=true;this._parseNavigationVariant();return;}this.oGlobalFilterLoadedPromise=new Promise(function(k,l){this.fnMacroFilterBarLoaded=k;}.bind(this));return;}e.attachFiltersDialogClosed(this._storeCurrentAppStateAndAdjustURL.bind(this));var j=e.getVariantManagement();if(j){j.attachAfterSave(function(k){this._storeCurrentAppStateAndAdjustURL(undefined,true);}.bind(this));}this.oGlobalFilterLoadedPromise=new Promise(function(k,l){e.attachInitialized(function(){this._parseNavigationVariant();if(this.oParseNavigationPromise){var c1;this.oParseNavigationPromise.then(function(d1){var e1=d1[0];var f1=d1[1];var g1=d1[2];if(e1){c1=Promise.resolve(this._setNavigationVariantToGlobalFilter(e1,f1,g1)).then(function(){this.filterChanged=false;}.bind(this));}}.bind(this));this.oParseNavigationPromise.catch(function(){b1.error("Could not parse navigation variant from URL");});this.oParseNavigationPromise.finally(function(){Promise.all([c1]).then(function(){this.bGlobalFilterInitialized=true;if(e&&this.verifyGlobalFilterLoaded()){k();}}.bind(this));}.bind(this));}else if(e&&this.verifyGlobalFilterLoaded()){k();}},this);e.attachSearch(function(){if(!this.bGlobalFilterLoaded){k();this.bGlobalFilterLoaded=true;if(!e.isDialogOpen()){this._storeCurrentAppStateAndAdjustURL();}var c1=this.getLayout();if(c1){c1.setActive(true);}return;}this.onGlobalFilterSearch();},this);e.attachFilterChange(this.onGlobalFilterChange,this);e._oSearchButton&&e._oSearchButton.attachPress(function(){this.bGoButtonPressed=true;var c1=this.getLayout();if(c1){c1.setActive(true);}}.bind(this));}.bind(this));this.oGlobalFilterLoadedPromise.then(function(k){this.bGlobalFilterLoaded=true;e._oBasicSearchField&&e._oBasicSearchField.attachSearch(function(){this.bSearchButtonPressed=true;}.bind(this));}.bind(this));},onShareButtonPress:function(){var e=this.getView().byId("sapOvpShareButton");if(e&&(e.getVisible()&&e.getEnabled())){this._onShareButtonAvailableAndPressed(e);}},_onShareButtonAvailableAndPressed:function(e){var l=this._getLibraryResourceBundle();var i=this.getUIModel();var j=i&&i.getProperty("/title");if(!this._oShareActionButton){this._oShareActionButton=sap.ui.core.Fragment.load({name:"sap.ovp.app.SharePage",controller:{shareEmailPressed:function(){S.URLHelper.triggerEmail(null,l.getText("Email_Subject",[j]),document.URL);},shareJamPressed:function(){var k=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog",settings:{object:{id:document.URL,share:j}}});k.open();}}}).then(function(k){this.getView().addDependent(k);return k;}.bind(this));}this._oShareActionButton.then(function(k){k.openBy(e);});},_checkJamAuth:function(){var e=H.get("sap.ushell.Container.getUser");var i=this.getUIModel();if(i){i.setProperty("/jamVisible",!!e&&e().isJamActive());}},_createModelForTile:function(){var e=this.getUIModel();var i,j=e&&e.getProperty("/title");var k={tileTitle:j,tileCustomURL:function(){i=t.getHash();return i?("#"+i):window.location.href;}};if(e){e.setProperty("/tileInfo",k);}},_loadCardComponent:function(e){var i=e.replace(/\./g,'/');var j=sap.ui.require.toUrl(i);if(!this.oLoadedComponents[e]){this.oLoadedComponents[e]=sap.ui.core.Component.load({name:e,url:j,manifest:false}).then(function(k){return k;});}},_initCardModel:function(e){var i=false;if(this.oCardsModels[e]||!e){return;}this.oCardsModels[e]=this.getView().getModel(e);if(!c.isODataV4(this.getView().getModel(e))){if(!this.oCardsModels[e].bUseBatch){this.oCardsModels[e].setUseBatch(false);}else{this.oCardsModels[e].setUseBatch(true);}}if(this.getGlobalFilter()||this.getMacroFilterBar()){i=true;}if(!c.isODataV4(this.oCardsModels[e])){this._overrideCardModelRead(this.oCardsModels[e],i);}},getVisibleCustomFields:function(){var e=this.getGlobalFilter();var i=e.getAllFilterItems(true);var l,j,k=[];if(i){l=i.length;while(l--){j=i[l];if(j&&j.getVisibleInFilterBar()){k.push(j.getName());}}}var c1,d1,e1,f1=e.getFilterBarViewMetadata();var g1=[];if(f1){c1=f1.length;while(c1--){e1=f1[c1].fields;if(e1){d1=e1.length;while(d1--){if(e1[d1].isCustomFilterField&&k.indexOf(e1[d1].fieldName)>-1){g1.push({name:e1[d1].fieldName});}}}}}return g1;},_showErrorPage:function(e){if(this.bDisableErrorPage){return;}var i=this.getView().byId('ovpErrorPage');var j=this.getView().byId('ovpMain');if(e){i.setVisible(true);j.setVisible(false);return;}i.setVisible(false);j.setVisible(true);},_isValueHelpCall:function(e,j){var k=this.getGlobalFilter();if(!e||!k||!k._oFilterProvider){return false;}if(e.getId()!==k.getModel().getId()){return false;}var l=k._oFilterProvider;var c1=l.getAssociatedValueHelpProviders().concat(l.getAssociatedValueListProviders());var d1;for(var i=0;i<c1.length;i++){d1=c1[i]&&c1[i].oPrimaryValueListAnnotation;if(d1&&d1.valueListEntitySetName===j){return true;}}return false;},_removeFilter:function(e,i){var l=e.lastIndexOf(i);var j=e.indexOf(i);if(l===-1||j===-1){return e;}var k="%20and%20";var c1=e.substring(l).indexOf(k);c1=(c1!==-1)?l+c1:c1;var d1=e.substring(0,j).lastIndexOf(k);if(c1===-1&&d1===-1){if(e.lastIndexOf("$filter=")===0){return e.slice(0,8);}else{return"";}}else if(d1===-1){if(e.lastIndexOf("$filter=")===0){return e.slice(0,8)+e.slice(c1+k.length);}else{return e.slice(c1+k.length);}}else if(c1===-1){return e.slice(0,d1);}else{return e.slice(0,d1)+e.slice(c1);}},_removeRelevantFilterRecursively:function(e,j){if(!e._bMultiFilter){if(e.sPath===j){return undefined;}return e;}else{e.aFilters.forEach(function(k,l){e.aFilters[l]=this._removeRelevantFilterRecursively(k,j);}.bind(this));for(var i=0;i<e.aFilters.length;i++){if(!e.aFilters[i]){e.aFilters.splice(i,1);i--;}}if(e.aFilters.length>0){return e;}else{return undefined;}}},_removeRelevantFilter:function(e,i){if(!e||e.length===0){return e;}e[0]=this._removeRelevantFilterRecursively(e[0],i);return(!e[0])?undefined:e;},_getFilterPreference:function(e){var i;var j=this._getCardFromManifest(e);if(j){if(j.settings.tabs){var k=0;var l=j.settings.selectedKey;if(l&&j.settings.tabs.length>=l){k=l-1;}i=j.settings.tabs[k].mFilterPreference;}else{i=j.settings.mFilterPreference;}}return i;},_getFilterPreferenceFromUrlParams:function(e){var i=e.urlParameters;var j;var k="cardId=";var l=-1;if(i){for(var c1=0;c1<i.length;c1++){if((i[c1]).lastIndexOf(k)>=0){l=c1;break;}}if(l>=0){var d1=(i[l]).lastIndexOf(k);var e1=i[l].slice(d1+k.length);j=this._getFilterPreference(e1);if(d1>0){i[l]=i[l].slice(0,d1-1);}else{i.splice(l,1);}}}return j;},_addRelevantFilters:function(e,i,j,k){var l=e.urlParameters;var c1=-1;if(l){for(var d1=0;d1<l.length;d1++){if((l[d1]).lastIndexOf("$filter=",0)===0){c1=d1;break;}}}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){if(c1>=0){var e1=O.createFilterParams(this.aRelevantFilters,i.oMetadata,j).substr(8);if(k&&k.filterAll==="card"){l[c1]=l[c1];}else if(k&&k.filterAll==="global"){l[c1]=l[c1].slice(0,8)+e1;}else if(k&&(k.cardFilter||k.globalFilter)){if(Array.isArray(k.cardFilter)&&k.cardFilter.length>0){k.cardFilter.forEach(function(f1){e1=this._removeFilter(e1,f1);}.bind(this));}if(Array.isArray(k.globalFilter)&&k.globalFilter.length>0){k.globalFilter.forEach(function(f1){l[c1]=this._removeFilter(l[c1],f1);}.bind(this));}if(e1===""&&l[c1].length===8){l.splice(c1,1);}else if(e1===""){l[c1]=l[c1];}else if(l[c1].length===8){l[c1]=l[c1]+e1;}else{if(this.aRelevantFilters.length===1){e1="("+e1+")";}l[c1]=l[c1].slice(0,8)+"("+l[c1].slice(8,l[c1].length)+")%20and%20"+e1;}}else{if(this.aRelevantFilters.length===1){e1="("+e1+")";}l[c1]=l[c1].slice(0,8)+"("+l[c1].slice(8,l[c1].length)+")%20and%20"+e1;}}else{if(k&&k.filterAll==="card"){e.filters=undefined;}else if(k&&k.filterAll==="global"){e.filters=this.aRelevantFilters;}else if(k&&(k.cardFilter||k.globalFilter)){if(Array.isArray(k.cardFilter)&&k.cardFilter.length>0){k.cardFilter.forEach(function(f1){this.aRelevantFilters=this._removeRelevantFilter(this.aRelevantFilters,f1);}.bind(this));}if(this.aRelevantFilters&&this.aRelevantFilters.length>0){e.filters=this.aRelevantFilters;}}else{e.filters=this.aRelevantFilters;}}}else{if(c1>=0){if(k&&k.filterAll==="card"){l[c1]=l[c1];}else if(k&&k.filterAll==="global"){l.splice(c1,1);}else if(k&&k.globalFilter){if(Array.isArray(k.globalFilter)&&k.globalFilter.length>0){k.globalFilter.forEach(function(f1){l[c1]=this._removeFilter(l[c1],f1);}.bind(this));}if(l[c1].length===8){l.splice(c1,1);}}}}return e;},_overrideCardModelRead:function(e,j){var k=e.read;var l=this;e.read=function(){var c1=arguments[1];if(!c1){c1={};Array.prototype.push.call(arguments,c1);}var d1=l._getEntityTypeFromPath(e,arguments[0],c1.context,false);var e1=l._getEntitySetFromEntityType(e,d1);if(l._isValueHelpCall(e,e1.name)){return k.apply(e,arguments);}var f1=l._getFilterPreferenceFromUrlParams(c1);if(j){l._processFilters();var g1=l.getGlobalFilter();var h1=l.getMacroFilterBar();var i1=g1!==undefined?g1.getModel():h1.getModel();if(!l.aFilters){l.aFilters=[];}var j1=false;var k1;var l1=e1["Org.OData.Capabilities.V1.SearchRestrictions"];if(e1["sap:searchable"]==="true"||(l1&&l1.Searchable&&l1.Searchable.Bool&&l1.Searchable.Bool==="true")){k1=l._processSearch();}l.sCurrentEntityType=d1.entityType;if(l.sPreviousEntityType!==l.sCurrentEntityType){l.sPreviousEntityType=l.sCurrentEntityType;j1=true;}if(!l.aRelevantFilters){l.aRelevantFilters=[];j1=true;}if(j1){l.aRelevantFilters=[];if(d1){l.aRelevantFilters=l._getEntityRelevantFilters(d1,l.aFilters,e,i1);}}c1=l._addRelevantFilters(c1,e,d1,f1);var m1=c1.urlParameters;if(k1){m1[m1.length]=k1;}if(g1&&g1.getConsiderAnalyticalParameters()){var n1=g1.getAnalyticBindingPath();var o1,p1,q1;if(n1&&n1.length>0){if(d1.entityType===g1.getEntityType()){p1=arguments[0];o1=arguments[0].indexOf('$');if(o1>0){p1=arguments[0].substring(0,o1-1);}q1=n1;if(p1!==q1){arguments[0]=arguments[0].replace(p1,q1);}}else{var r1=l._getParametersFromEntityPath(arguments[0]);var s1=l._getParametersFromEntityPath(n1);var t1,u1,v1;if(r1&&r1.length>0){var w1=l._getEntityTypeFromPath(e,arguments[0],c1.context,true);for(var i=0;i<s1.length;i++){t1=l._getPropertyMapping(r1,s1[i].name,w1.name,g1.getEntityType(),e,g1.getModel());if(t1){u1=t1+"=.*?[,\)]";v1=arguments[0].match(new RegExp(u1));if(v1&&v1.length>0){p1=v1[0].slice(0,-1);q1=t1+"="+s1[i].sValue;if(p1!==q1){arguments[0]=arguments[0].replace(p1,q1);}}}}}}}}}var x1=e.getMetaModel();var y1=x1.getODataEntityType(e1.entityType);m1=l._getExpandPropertiesForSmartCharts(m1,x1,y1);var z1=arguments[1].success;arguments[1].success=(function(C1,l){return function(){if(!l.errorHandlingObject.atLeastOneRequestSuccess){l.errorHandlingObject.atLeastOneRequestSuccess=true;l._showErrorPage(false);}if(l.filterItemInFocus!=null){l.filterItemInFocus.focus();l.filterItemInFocus=null;}if(l.nRefreshInterval!==0){if(l.oRefreshTimer!==null){clearTimeout(l.oRefreshTimer);}l.attachRefreshInterval(l.nRefreshInterval);}return C1.apply(this,arguments);};})(z1,l);var A1=arguments[1].error;arguments[1].error=(function(C1,l){return function(){if(!l.errorHandlingObject.atLeastOneRequestSuccess){clearTimeout(l.errorHandlingObject.errorLoadingTimeout);l.errorHandlingObject.errorLoadingTimeout=setTimeout(function(){if(!l.errorHandlingObject.atLeastOneRequestSuccess){l._showErrorPage(true);}},9000);}return C1.apply(this,arguments);};})(A1,l);var B1=k.apply(e,arguments);return B1;};},showErrorCardForMissingParam:function(e,j){var k=e[0];var l=e[1].urlParameters;for(var i in l){k=k+l[i];}var c1=new sap.ui.base.Event();c1.mParameters={"url":k,"response":{"statusText":y.getText("Missing_Param_Text")}};c1.oSource=j;setTimeout(function(){this.fVerifyAndSetErrorOrCustomMessageCard(c1,false);}.bind(this),0);},_checkMandatoryParams:function(e,j,k){var l=new u.Model(u.Model.ReferenceByModel(e));var c1=l.findQueryResultByName(j);var d1=c1&&c1.getParameterization();if(!d1){return true;}var e1=d1.getAllParameterNames();var f1=k.match(/\(.*\)/g);if(e1.length>0&&f1===null){return false;}var g1=f1[0].replace("(","").replace(")","").split(",");if(g1.length===e1.length){for(var i in g1){var h1=g1[i].split("=")[1];if(h1.indexOf("%27")>-1){h1=h1.split("%27")[1];}if(h1.length===0){return false;}}}else{return false;}},_getExpandPropertiesForSmartCharts:function(e,i,c1){var d1;var e1="";var f1;var g1;var h1;var i1="$expand";var j1=false;var k1=false;var l1;var m1;var n1;var o1="com.sap.vocabularies.Common.v1.Text";var p1=c1&&c1.property;if(!e||!(e.length>0)){return e;}for(var l=0;l<e.length;l++){if(e[l].indexOf("$expand")>-1){return e;}}for(var q1=0;q1<e.length;q1++){if(e[q1].indexOf("$select")>-1){k1=true;m1=e[q1];h1=e[q1].split("$select=");if(h1&&h1[1]){l1=decodeURIComponent(h1[1]);d1=l1.split(",");if(!d1||!(d1.length>1)){return e;}}break;}}if(!k1){return e;}if(!d1||!(d1.length>0)||!p1||!(p1.length>0)){return e;}for(var j=0;j<d1.length;j++){for(var k=0;k<p1.length;k++){if(d1[j]==(p1[k]&&p1[k].name)){if(p1[k]&&p1[k]["sap:aggregation-role"]&&p1[k]["sap:aggregation-role"]=="dimension"){if(!p1[k][o1]||!p1[k][o1].Path||!(p1[k][o1].Path.indexOf("/")>0)){break;}e1=p1[k][o1].Path;f1=e1.split("/");if(!f1.length){break;}g1=i.getODataAssociationEnd(c1,f1[0]);if(!g1){break;}if(!j1){i1=i1+"="+f1[0];j1=true;}else if(j1){i1=i1+","+f1[0];}n1=m1+","+e1;}break;}}}if(n1&&i1){e[q1]=n1;e.push(i1);}return e;},attachRefreshInterval:function(e){this.oRefreshTimer=setTimeout(function(){this._processFilters();this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);var l=this.getLayout();if(l&&l.getActive()){for(var i in this.oCardsModels){this.isModelRefreshTriggered=true;if(!c.isODataV4(this.oCardsModels[i])){this.oCardsModels[i].refresh(false,false);}}}}.bind(this),e);},_getEntityTypeFromPath:function(e,i,j,k){var l=q.prototype._normalizePath.apply(e,[i,j]);if(k){l=i.replace(/^\/|\/$/g,"").split("/")[0];if(l.indexOf("(")!=-1){l=l.substring(0,l.indexOf("("));}}var c1=r.prototype._getEntityTypeByPath.apply(e.oMetadata,[l]);return c1;},_getEntitySetFromEntityType:function(e,j){if(!e||!j){return;}var k=e.getMetaModel();var l=k&&k.getODataEntityContainer();var c1=l&&l.entitySet;if(!c1||!Array.isArray(c1)){return;}var d1=c1.length;for(var i=0;i<d1;i++){if(c1[i].entityType===j.entityType){return c1[i];}}},_getPropertyMapping:function(e,j,k,l,c1,d1){var i,e1;for(i=0;i<e.length;i++){if(e[i].name===j){e1=e[i].name;return e1;}if((("P_"+e[i].name)===j)||(e[i].name===("P_"+j))){e1=e[i].name;return e1;}}if(!k||!l||!c1||!d1){return;}var f1=c1.oMetadata._getEntityTypeByName(k);var g1=d1.oMetadata._getEntityTypeByName(l);if(!f1||!g1){return;}var h1="com.sap.vocabularies.Common.v1.SemanticObject";var i1="com.sap.vocabularies.Common.v1.SemanticObjectMapping";var j1=c1.oAnnotations.getAnnotationsData();if(!j1||!j1.propertyAnnotations){return;}var k1=j1.propertyAnnotations[f1.namespace+"."+f1.name];var l1=d1.oAnnotations.getAnnotationsData();if(!l1||!l1.propertyAnnotations){return;}var m1=l1.propertyAnnotations[g1.namespace+"."+g1.name];var n1=m1&&m1[j];if(!n1||!n1[h1]){return;}var o1,p1,q1,r1,s1;for(o1 in k1){p1=k1[o1];if(p1[h1]&&p1[h1].String===n1[h1].String){q1=p1[i1];if(!q1){continue;}r1=q1.length;s1="";while(r1--){if(q1[r1].SemanticObjectProperty.String===j){s1=q1[r1].LocalProperty.PropertyPath;break;}}if(s1!==""){for(i=0;i<e.length;i++){if(e[i].name===s1){e1=e[i].name;return e1;}}}}}return e1;},_getParametersFromEntityPath:function(e){e=e.split("?")[0];var j=e.match(/\(.*=.*\)/);var k=[];if(!j){return k;}var l=j[0].slice(1,-1).trim().split(/\=|\,/);for(var i=0;i<l.length;i=i+2){k.push({name:l[i],sValue:l[i+1]});}return k;},_checkRelevantFiltersRecursive:function(e,j,k,l,c1,d1){if(!j._bMultiFilter){j.sPath=j.sPath.split('/').pop();var e1=this._getPropertyMapping(e,j.sPath,k,l,c1,d1);if(e1){j.sPath=e1;return j;}}else{var f1=j.aFilters;var g1,h1=[];if(f1){for(var i=0;i<f1.length;i++){g1=this._checkRelevantFiltersRecursive(e,f1[i],k,l,c1,d1);if(g1){h1.push(g1);}}if(h1.length>0){return(new F(h1,j.bAnd));}}}},_getEntityRelevantFilters:function(e,i,j,k){var l=[];if(i.length>0&&e){var c1=this.isMacroFilterBar?e.entityType:this.getGlobalFilter().getEntityType();var d1=this._checkRelevantFiltersRecursive(e.property,i[0],e.name,c1,j,k);if(d1){l.push(d1);}}return l;},_checkIsCardValid:function(e){var i=e+".Component";var j,k;sap.ui.require(i);var l=H.get(i);if(!l){return false;}if((l!==a)&&!(l.prototype instanceof a||l.prototype instanceof b)){return false;}if((j=l.getMetadata())&&(k=j.getCustomizing())){if(k["sap.ui.viewReplacements"]&&k["sap.ui.viewReplacements"]["sap.ovp.cards.generic.Card"]){return false;}}if((l.prototype.createContent!=a.prototype.createContent)&&(l.prototype.createContent!=b.prototype.createContent)){return false;}if((l.prototype.getPreprocessors!=a.prototype.getPreprocessors)&&(l.prototype.getPreprocessors!=b.prototype.getPreprocessors)){return false;}return true;},_createCardComponent:function(e,i,j){var k=e.getModel("@i18n");if(j.template&&this._checkIsCardValid(j.template)){var l={name:j.template,manifest:false,componentData:{model:i,modelName:j.model,i18n:k,cardId:j.id,settings:j.settings,appComponent:this.getOwnerComponent(),mainComponent:this}};var c1=this.getGlobalFilter();if(j.errorReason){l.componentData.errorReason=j.errorReason;}if(c1){l.componentData.globalFilter={getUiState:c1.getUiState.bind(c1)};}var d1=e;this.getOwnerComponent().runAsOwner(function(){sap.ui.core.Component.create(l).then(function(e1){var f1=e1.getComponentData().cardId;var g1=d1.byId(f1);g1.setPropagateModel(true);var h1=g1.getComponentInstance();g1.setComponent(e1);if(h1){setTimeout(function(){h1.destroy();},0);}});});}else{b1.error("Could not create Card from '"+j.template+"' template. Card is not valid.");}},createErrorCard:function(e,i){var j=I({},e,{template:"sap.ovp.cards.error"});j.errorReason=Object.assign({},i);j.settings.oldTemplate=e.template;j.settings.template="sap.ovp.cards.error";this._createCardComponent(this.getView(),undefined,j);},createCard:function(e){var i=this.getView();var j=i.getModel(e.model);var k;if(c.isODataV4(j)){k=[j.getMetaModel().requestObject("/"+e.settings.entitySet),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[e.template]];}else{k=[j.getMetaModel().loaded(),this.oGlobalFilterLoadedPromise,this.oLoadedComponents[e.template],this.oLoadedComponents["sap.ovp.cards.error"]];}return Promise.all(k).then(function(){this._createCardComponent(i,j,e);}.bind(this),function(l){b1.error("Can't load card with id:'"+e.id+"' and type:'"+e.template+"', reason:"+l);});},_getCardId:function(e){var i=this.getView().getId()+"--";if(e.indexOf(i)!=-1){var j=e.indexOf(i)+i.length;return e.substr(j);}return e;},_initFlexibilityPersonalization:function(){var l=this.getLayout();var e="sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler";var j=l.getContent();for(var i=0;i<j.length;i++){j[i].addCustomData(new R({key:"sap-ui-custom-settings",value:{"sap.ui.fl":{"flexibility":e}}}));}this.oFlexibilityPersonalizationPromise=new Promise(function(k,c1){K.waitForChanges({selectors:j}).then(function(){if(this.deltaChanges.length>0){this.bDeltaChangesEnabled=true;}k();}.bind(this),function(d1){k();});}.bind(this));},layoutChanged:function(e){var j=e.getParameter("positionChanges");var k=[],l=[];var c1,d1;if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var e1=this.getLayout().dashboardLayoutUtil.dashboardLayoutModel.iColCount;if(j){for(var i=j.length-1;i>=0;i--){c1=j[i];d1=c1.content.cardId;if(c1.content.dashboardLayout.oldRow===c1.content.dashboardLayout.row&&c1.content.dashboardLayout.oldColumn===c1.content.dashboardLayout.column&&c1.content.dashboardLayout.oldRowSpan===c1.content.dashboardLayout.rowSpan&&c1.content.dashboardLayout.oldColSpan===c1.content.dashboardLayout.colSpan){continue;}if(l[d1]){l[d1].content.dashboardLayout.oldRow=c1.content.dashboardLayout.oldRow;continue;}l[d1]=c1;}Object.keys(l).forEach(function(h1){var c1=l[h1];if(c1.content.dashboardLayout.oldRow===c1.content.dashboardLayout.row&&c1.content.dashboardLayout.oldColumn===c1.content.dashboardLayout.column&&c1.content.dashboardLayout.oldRowSpan===c1.content.dashboardLayout.rowSpan&&c1.content.dashboardLayout.oldColSpan===c1.content.dashboardLayout.colSpan){return;}k.push(l[h1]);});k.forEach(function(c1){var h1=c1.content.dashboardLayout;c1.content.dashboardLayout={};c1.content.dashboardLayout["C"+e1]=h1;});}}else{var f1=this.getLayout().getContent();var g1=this._getCardArrayAsVariantFormat(f1);this.getView().getModel("ui").setProperty('/aOrderedCards',g1);k=j;}if(k.length>0){P.savePersonalization(k,this.getView());}},saveVariant:function(e){var i=this;this.smartVariandManagement.getVariantsInfo(function(j){var k=null;if(j&&j.length>0){k=j[0].key;}var l=k!==null;var c1={name:"Personalisation",global:false,overwrite:l,key:k,def:true};i.smartVariandManagement.fireSave(c1);});},getLayout:function(){return this.getView()?this.getView().byId("ovpLayout"):null;},_initShowHideCardsButton:function(){var e=sap.ushell.Container.getRenderer("fiori2");if(e){var i={controlType:"sap.ushell.ui.launchpad.ActionItem",bCurrentState:true,oControlProperties:{icon:"sap-icon://dimension",text:y.getText("hideCardsBtn_title"),tooltip:y.getText("hideCardsBtn_title"),press:this._onManageCardsMenuButtonPress.bind(this)},bIsVisible:true,aStates:["app"]};e.addUserAction(i);}},createOrDestroyCards:function(e,k,l){var c1=-1,d1=[],e1=[];for(var i=0;i<k.length;i++){if(e[i].id==k[i].id){c1=i;}else{c1=this.getCardIndexInArray(e,k[i].id);}var f1=this.getView().byId(k[i].id);var g1=f1.getComponentInstance();if(l){if(g1){g1.destroy();}}if(k[i].visibility!=e[c1].visibility||l){if(k[i].visibility===true){var h1=this._getCardFromManifest(k[i].id);d1.push({oCard:h1,sCreateOrDestroy:"create"});e1.push(h1);}else if(g1){d1.push({oCard:g1,sCreateOrDestroy:"destroy"});}}}var i1=this.fGetViewSwitchIndex(e1);if(d1&&d1.length>0){var j1=this.getView().getModel("ui").getProperty('/aOrderedCards');for(var j=0;j<d1.length;j++){if(d1[j]&&d1[j].oCard&&d1[j].hasOwnProperty("sCreateOrDestroy")&&d1[j].sCreateOrDestroy=="create"){var k1=d1[j].oCard;if(k1){k1.settings.baseUrl=this._getBaseUrl();this._clearStoredEntities();this._initCardModel(k1.model);k1=this._getTemplateForChart(k1);this._loadCardComponent(k1.template);this._createModelViewMap(k1);if(k1.settings.tabs){var l1=0;var m1=[];m1.push(k1);var n1=i1&&i1.hasOwnProperty(k1.id)?i1[k1.id]:"";var o1=this.getOrderedCardsSelectedKey(k1.id);if(n1&&typeof n1=="number"&&n1<=k1.settings.tabs.length&&n1!==o1){l1=n1>=1?n1-1:n1;this.setOrderedCardsSelectedKey(k1.id,n1);}else if(j1[j].selectedKey&&k1.settings.tabs.length>=j1[j].selectedKey){l1=j1[j].selectedKey-1;}this.initializeTabbedCard(k1,l1);}this.createCard(k1);}}else if(d1[j]&&d1[j].oCard&&d1[j].hasOwnProperty("sCreateOrDestroy")&&d1[j].sCreateOrDestroy=="destroy"){d1[j].oCard.destroy();}}}},getCardIndexInArray:function(e,j){for(var i=0;i<e.length;i++){if(e[i].id==j){return i;}}return-1;},rerenderCards:function(e){var j=this.getView().getModel("ui").getProperty('/aOrderedCards');this.createOrDestroyCards.apply(this,[j,e,false]);this.getView().getModel("ui").setProperty('/aOrderedCards',e);this._updateDashboardLayoutCards(e);this._updateLayoutWithOrderedCards();P.savePersonalization(this.visibilityChanges,this.getView());for(var i=0;i<e.length;i++){var k=e[i];var l=this.aErrorCards.indexOf(k.id);if(l>-1&&k.visibility==false){this.aErrorCards.splice(l,1);}}},getManageCardsDialogModelState:function(e){var j=[];for(var i=0;i<e.length;i++){j.push({'id':e[i].id,'visibility':e[i].visibility});}return j;},_onManageCardsMenuButtonPress:function(){this.visibilityChanges=[];var e;this.aManageCardsDialogModelState=[];var j=this.getView().getModel("ui").getProperty('/aOrderedCards');if(this.manageCardsDialog){this.openManageCardsDialog(j);}else{sap.ui.core.Fragment.load({name:"sap.ovp.app.ManageCard",controller:{onManageCardOkButtonPressed:function(){var k=this.manageCardsDialog.getModel().getProperty('/cards');this.createOrDestroyCards.apply(this,[this.aManageCardsDialogModelState,k,false]);this.getView().getModel("ui").setProperty('/aOrderedCards',k);this._updateDashboardLayoutCards(k);this._updateLayoutWithOrderedCards();P.savePersonalization(this.visibilityChanges,this.getView());this.manageCardsDialog.close();for(var i=0;i<k.length;i++){var l=k[i];var c1=this.aErrorCards.indexOf(l.id);if(c1>-1&&l.visibility==false){this.aErrorCards.splice(c1,1);}}this.aManageCardsDialogModelState=[];}.bind(this),onManagecardCancelButtonPressed:function(){this.manageCardsDialog.close();}.bind(this),onManageCardResetButtonPressed:function(){var l=this.getLayout().getMetadata().getName();M.show(y.getText("reset_cards_confirmation_msg"),{id:"resetCardsConfirmation",icon:M.Icon.QUESTION,title:y.getText("reset_cards_confirmation_title"),actions:[M.Action.OK,M.Action.CANCEL],onClose:function(k){if(k===M.Action.OK){this.manageCardsDialog.setBusy(true);var j=this.getView().getModel("ui").getProperty('/aOrderedCards');this.createOrDestroyCards.apply(this,[j,this.aManifestOrderedCards,(l==="sap.ovp.ui.DashboardLayout")?true:false]);this.getView().getModel("ui").setProperty('/aOrderedCards',this.aManifestOrderedCards);this._resetDashboardLayout();this._updateDashboardLayoutCards(this.aManifestOrderedCards);this._updateLayoutWithOrderedCards();this.manageCardsDialog.getModel().setProperty('/cards',this.aManifestOrderedCards);var c1=[];for(var i=0;i<j.length;i++){c1.push(this.getView().byId(j[i].id));}s.reset({selectors:c1}).finally(function(){this.manageCardsDialog.setBusy(false);this.manageCardsDialog.close();}.bind(this));}}.bind(this)});}.bind(this),onCardVisibilityChange:function(i){var k=i.oSource.getParent();k.toggleStyleClass('sapOVPHideCardsTableItem');k.getCells()[0].toggleStyleClass('sapOVPHideCardsDisabledCell');var l=i.getSource().getBindingContext().getObject();var c1;this.visibilityChanges.forEach(function(d1,e1){if(d1.content.cardId===l.id){c1=e1;}});if(c1&&c1>-1){this.visibilityChanges.splice(c1,1);}else{this.visibilityChanges.push({changeType:"visibility",content:{cardId:l.id,visibility:i.getParameter("state")},isUserDependent:true});}}.bind(this),cardTitleFormatter:function(i){var k=(i!==null)?this._getCardFromManifest(i):null;if(k){var l=k.settings;return l.title||l.category||l.subTitle;}return i;}.bind(this),afterManageCardsDialogOpen:function(){var l=this.getLayout().getMetadata().getName();var k=(l==="sap.ovp.ui.DashboardLayout")?true:this.isValidForReset();var c1=this.manageCardsDialog.getButtons();var d1;for(var i=0;i<c1.length;i++){if(c1[i].sId==='manageCardsResetBtn'){d1=c1[i];}}d1.setEnabled(k);this.manageCardsDialog.setProperty('stretch',o.system.phone);}.bind(this),afterManageCardsDialogClose:function(){this.visibilityChanges=[];this.manageCardsDialog.close();}.bind(this),onAfterManageCardsTableUpdated:function(k){var l=k.oSource.mAggregations.items;if(l){for(var i=0;i<l.length;i++){if(!l[i].getCells()[1].getState()){l[i].addStyleClass('sapOVPHideCardsTableItem');l[i].getCells()[0].addStyleClass('sapOVPHideCardsDisabledCell');}}}setTimeout(function(){document.querySelector('.sapMListTblRow').focus();},200);}}}).then(function(i){this.manageCardsDialog=i;e=Object.assign([],j);this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(j);var k=new J({cards:e});this.manageCardsDialog.setModel(k);this.getView().addDependent(this.manageCardsDialog);this.openManageCardsDialog(j);}.bind(this));}},openManageCardsDialog:function(e){if(this.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){var i=this._getCardArrayAsVariantFormatDashboard();var j=[];e.forEach(function(l){j.push(l['id']);});var k=[];i.forEach(function(l){if(j.indexOf(l.id)!=-1){k.push({"id":l.id,"visibility":l.visibility});}});e=k;}this.aManageCardsDialogModelState=this.getManageCardsDialogModelState(e);this.getView().getModel("ui").setProperty('/aOrderedCards',e);this.manageCardsDialog.getModel().setProperty('/cards',e);this.manageCardsDialog.open();},isValidForReset:function(){var e=this.getView().getModel("ui").getProperty('/aOrderedCards');for(var i=0;i<this.aManifestOrderedCards.length;i++){if(this.aManifestOrderedCards[i].id!==e[i].id||this.aManifestOrderedCards[i].visibility!==e[i].visibility){return true;}}return false;},isDragAndDropEnabled:function(){return!o.system.phone;},getGlobalFilter:function(){if(!this.oGlobalFilter){this.oGlobalFilter=this.getView().byId("ovpGlobalFilter");}return this.oGlobalFilter;},getMacroFilterBar:function(){if(!this.oMacroFilterBar){this.oMacroFilterBar=this.getView().byId("ovpGlobalMacroFilter");}return this.oMacroFilterBar;},getUIModel:function(){if(!this.oUIModel){var e=this.getOwnerComponent();this.oUIModel=e&&e.getModel("ui");}return this.oUIModel;},_parseNavigationVariant:function(){if(!this.oContainer){this.oParseNavigationPromise=Promise.resolve();return;}var e=this.oNavigationHandler;this.oParseNavigationPromise=new Promise(function(i,j){return e.parseNavigation().done(function(k,l,c1){i([k,l,c1]);}).fail(function(){j();});});},_setUiStateToGlobalFilter:function(e,i,j){var k=this.getGlobalFilter();var l=new U({selectionVariant:e.toJSONObject()});k.setUiState(l,{replace:j,strictMode:false});i=i.concat(e.getParameterNames().concat(e.getSelectOptionsPropertyNames()));i=i.filter(function(c1,d1,e1){return e1.indexOf(c1)==d1;});return i;},_processModifyStartupExtension:function(e){if(!e){e=[];}var i=this.getGlobalFilter();var j=i.getUiState();var k=new d(j.getSelectionVariant());var l=JSON.parse(JSON.stringify(k));return new Promise(function(c1,d1){Promise.all([this.modifyStartupExtension(k),this.templateBaseExtension.provideStartupExtension(k)]).then(function(){if(JSON.stringify(k)!==JSON.stringify(l)){try{e=this._setUiStateToGlobalFilter(k,e,true);}catch(e1){b1.error("Error with modifyStartupExtension, falling back to default behavior"+e1);e=this._setUiStateToGlobalFilter(l,e,true);}}c1(e);}.bind(this));}.bind(this));},_addFieldsToSFBAdvancedArea:function(e){var l;var i=this.getGlobalFilter();if(e&&e.length>0){l=e.length;while(l--){i.addFieldToAdvancedArea(e[l]);}}},_restoreAppState:function(e){this.restoreCustomAppStateDataExtension(e._CUSTOM);var i=e._EXTENSION;if(!i){return;}var j=true;var k=function(l){if(!(l instanceof A)){throw new Error("State must always be retrieved with respect to a ControllerExtension");}var c1=l.getMetadata().getNamespace();if(!j){throw new Error("State must always be restored synchronously");}return i[c1];};this.templateBaseExtension.restoreExtensionAppStateData(k);j=false;},_setNavigationVariantToGlobalFilter:function(e,j,k){return new Promise(function(l,c1){var d1=this.getGlobalFilter();var e1=this.getUIModel().oData;var f1=this.oState.oSmartFilterbar;var g1=this.oGlobalFilter.getUiState().getSemanticDates();if(!d1){return;}switch(k){case"iAppState":if(e.selectionVariant){var h1=JSON.parse(e.selectionVariant);if(h1.SelectionVariantID.length!==0){var i1=d1.getVariantManagement().getVariantItems().map(function(y1){return y1.getKey();});var j1=h1.SelectionVariantID;if(i1.indexOf(j1)===-1){l();break;}}var k1,l1,m1=false;var n1,o1,p1,q1;var r1,s1,t1;d1.clearVariantSelection();h1=JSON.parse(e.selectionVariant);d1.setCurrentVariantId(h1.SelectionVariantID);s1=d1.getUiState({allFilters:false});o1=s1&&JSON.stringify(s1.getSelectionVariant());q1=d1.getFilterData()._CUSTOM;q1=((typeof q1=='undefined')?{}:q1);r1=new U({selectionVariant:e.oSelectionVariant.toJSONObject(),semanticDates:e.semanticDates});d1.setUiState(r1,{replace:true,strictMode:false});k1=new d(e.selectionVariant);l1=k1.getParameterNames().concat(k1.getSelectOptionsPropertyNames());for(var i=0;i<l1.length;i++){d1.addFieldToAdvancedArea(l1[i]);}t1=d1.getUiState({allFilters:false});n1=t1&&JSON.stringify(t1.getSelectionVariant());if(o1!==n1){m1=true;}if(e.customData&&Object.keys(e.customData).length>0){var p1=e.customData;this._restoreAppState(p1);if(JSON.stringify(q1)!==JSON.stringify(p1)){m1=true;}}d1.getSmartVariant().currentVariantSetModified(m1);d1._updateToolbarText();}l();break;case"xAppState":case"URLParams":var u1=[];var v1=new d(e.oSelectionVariant.toJSONObject());var w1=new d(e.oDefaultedSelectionVariant.toJSONObject());if(!e.bNavSelVarHasDefaultsOnly&&!v1.isEmpty()){d1.clearVariantSelection();d1.clear();u1=this._setUiStateToGlobalFilter(v1,u1,true);}if(e.bNavSelVarHasDefaultsOnly&&!w1.isEmpty()&&d1.getCurrentVariantId()===""){var x1=this._mergeDefaultWithSFBVariant(w1,new d(JSON.stringify(d1.getUiState().getSelectionVariant())));u1=this._setUiStateToGlobalFilter(x1,u1,true);}if(d1.getCurrentVariantId()!==""){this._setDisplayCurrency(w1);}Promise.resolve(this._processModifyStartupExtension(u1)).then(function(u1){this._addFieldsToSFBAdvancedArea(u1);if(this.oGlobalFilter.isCurrentVariantStandard()&&e.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){Y.setSemanticDateRangeDefaultValue(e1,f1,g1,j||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false);}l();}.bind(this));break;case"initial":Promise.resolve(this._processModifyStartupExtension()).then(function(u1){this._addFieldsToSFBAdvancedArea(u1);if(this.oGlobalFilter.isCurrentVariantStandard()&&e.bNavSelVarHasDefaultsOnly!==false&&this.oGlobalFilter.getSmartVariant()){Y.setSemanticDateRangeDefaultValue(e1,f1,g1,j||{});this.oGlobalFilter.getSmartVariant().currentVariantSetModified(false);}l();}.bind(this));break;default:break;}}.bind(this));},_mergeDefaultWithSFBVariant:function(e,i){if(e.isEmpty()){return i;}var j=new d();var k,l;[i,e].forEach(function(c1){k=c1.getSelectOptionsPropertyNames();k.forEach(function(d1){j.removeSelectOption(d1);j.massAddSelectOption(d1,c1.getSelectOption(d1));});l=c1.getParameterNames();l.forEach(function(d1){j.removeParameter(d1);j.addParameter(d1,c1.getParameter(d1));});});return j;},_setDisplayCurrency:function(e){var i=this.getGlobalFilter();if(!i){return;}var l,j;var k=i.getAnalyticalParameters();if(k&&k.length>0){l=k.length;while(l--){if((k[l].name==="P_DisplayCurrency")||(k[l].name==="DisplayCurrency")){j=k[l];break;}}}if(!j){return;}var c1=i.getFilters([j.fieldName]);var d1=c1&&c1[0]&&c1[0].oValue1;if(d1&&d1!==" "){return;}var e1,f1;if(j.name.indexOf("P_")===0){f1=j.name;e1=j.name.substr(2);}else{f1="P_"+j.name;e1=j.name;}if(e&&!e.isEmpty()){var g1;d1=e.getParameter(e1);if(!d1||d1===" "){d1=e.getParameter(f1);}if(!d1||d1===" "){g1=e.getSelectOption(e1);d1=g1&&g1[0]&&g1[0].Low;}if(!d1||d1===" "){g1=e.getSelectOption(f1);d1=g1&&g1[0]&&g1[0].Low;}}if(!d1||d1===" "){d1=j.defaultPropertyValue;}if(!d1||d1===" "){return;}var h1=new d();h1.addParameter(j.name,d1);var i1=new U({selectionVariant:h1.toJSONObject()});i.setUiState(i1,{replace:false,strictMode:false});},_getCustomAppState:function(){var e={},i={};this.getCustomAppStateDataExtension(e);if(!(X(e))){i[_]=e;}var j;var k=true;var l=function(c1,d1){if(!(c1 instanceof A)){throw new Error("State must always be set with respect to a ControllerExtension");}if(!k){throw new Error("State must always be provided synchronously");}if(d1){j=j||Object.create(null);var e1=c1.getMetadata().getNamespace();j[e1]=d1;}};this.templateBaseExtension.provideExtensionAppStateData(l);k=false;if(j){i[a1]=j;}return i;},onBeforeSFBVariantSave:function(){var e=this._getCustomAppState();var i=this.getGlobalFilter().getFilterData();var j,k=this.getGlobalFilter().getBasicSearchControl();if(k&&k.getValue){j=k.getValue();}i._CUSTOM=e[_];i._EXTENSION=e[a1];this.getGlobalFilter().setFilterData(i,true);if(j){this.getGlobalFilter().getBasicSearchControl().setValue(j);}this.getGlobalFilter().fireFilterChange();},onAfterSFBVariantLoad:function(){var e=this.getGlobalFilter().getFilterData();if(e){this._restoreAppState(e);}},onAssignedFiltersChanged:function(e){if(e.getSource()&&this.getView().byId("ovpFilterText")){this.getView().byId("ovpFilterText").setText(e.getSource().retrieveFiltersWithValuesAsText());}},_CustomFilterField:function(e,i){for(var k in e){if(e.hasOwnProperty(k)){i[k]=e[k];}}},_getCurrentAppState:function(e){var i=this.getGlobalFilter();if(!i){return;}var j={};var k=this._getCustomAppState();var l={_CUSTOM:k[_],_EXTENSION:k[a1]};if(!e){if(l._CUSTOM){this._CustomFilterField(l._CUSTOM,j);}if(l._EXTENSION){var c1=Object.keys(l._EXTENSION);if(c1){this._CustomFilterField(l._EXTENSION[c1],j);}}if(!X(j)){var d1=this.getGlobalFilter().getFilterData();d1._CUSTOM=j;this.getGlobalFilter().setFilterData(d1,true);}}var e1=i.getUiState({allFilters:false});var f1=e1&&e1.getSelectionVariant();if(i.getSmartVariant().currentVariantGetModified()){f1.SelectionVariantID="";}var g1=f1&&JSON.stringify(f1);var h1=new d(g1);return{selectionVariant:h1.toJSONString(),semanticDates:e1.getSemanticDates(),customData:l};},_storeCurrentAppStateAndAdjustURL:function(e,i){if(e&&!e.oSource._bDirtyViaDialog){return;}if(!this.bGlobalFilterLoaded){return;}if(!this.oNavigationHandler){return;}if(this.oAppStatePromise){this.rejectPreviousPromise&&this.rejectPreviousPromise("skip");}this.oAppStatePromise=new Promise(function(l,c1){this.rejectPreviousPromise=c1;var d1=this._getCurrentAppState(i);var e1=this.oNavigationHandler.storeInnerAppStateWithImmediateReturn(d1,true);e1.promise.then(function(f1){l(f1);},function(f1){c1(f1.getErrorCode());});}.bind(this));var j=function(l){this.oAppStatePromise=null;if(l&&l.length>0){this.oNavigationHandler.replaceHash(l);return;}throw"AppState key is empty";};var k=function(l){this.oAppStatePromise=null;if(l==="skip"){throw l;}throw("Something went wrong while storing AppState - "+l);};this.oAppStatePromise.then(j.bind(this),k.bind(this)).catch(function(l){if(l==="skip"){return;}});},setTitle:function(e,i,j){var k="";if(e){k=e;}else if(i){k=i;}else{k=j;}return k;},onMacroFilterBarSearch:function(e){if(this.fnMacroFilterBarLoaded!==undefined){this.fnMacroFilterBarLoaded();}this._processFilters();var i="ovp-"+new Date().getTime();for(var j in this.oCardsModels){if(this.oCardsModels.hasOwnProperty(j)&&!c.isODataV4(this.oCardsModels[j])){try{this.oCardsModels[j].refresh(false,false,i);}catch(k){b1.warning(k);}}}this.globalEventBus.publish("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",this.aFilters);}});});
sap.ui.predefine('sap/ovp/app/OVPUtils',["sap/base/util/isPlainObject"],function(a){"use strict";var o={bCRTLPressed:false};o.constants={explace:"explace",inplace:"inplace"};o.Annotations={dataPoint:"dataPoint",title:"title",subTitle:"subtitle",valueSelectionInfo:"value Selection Info",listFlavor:"listFlavor"};o.Layers={vendor:"VENDOR",customer:"CUSTOMER",customer_base:"CUSTOMER_BASE"};o.loadingState={ERROR:"Error",LOADING:"Loading",GLOBALFILTERFILLED:false};
o.merge=function(){var b,n,s,c,d,e,t=arguments[0]||{},i=1,l=arguments.length,f=false;if(typeof t==="boolean"){f=t;t=arguments[1]||{};i=2;}if(typeof t!=="object"&&typeof t!=="function"){t={};}if(l===i){t=this;--i;}for(;i<l;i++){if((b=arguments[i])==null){continue;}for(n in b){s=t[n];c=b[n];if(t===c){continue;}if(f&&c&&(a(c)||(d=Array.isArray(c)))){if(d){d=false;e=s&&Array.isArray(s)?s:[];}else{e=s&&a(s)?s:{};}t[n]=this.merge(f,e,c);}else if(c!==undefined){t[n]=c;}}}return t;};
return o;},true);
sap.ui.predefine('sap/ovp/app/TemplateBaseExtension',["sap/ui/core/mvc/ControllerExtension","sap/ui/core/mvc/OverrideExecution"],function(C,O){"use strict";return C.extend("sap.ovp.app.TemplateBaseExtension",{metadata:{methods:{provideExtensionAppStateData:{"public":true,"final":false,overrideExecution:O.After},restoreExtensionAppStateData:{"public":true,"final":false,overrideExecution:O.After},addFilters:{"public":true,"final":false,overrideExecution:O.After},provideStartupExtension:{"public":true,"final":false,overrideExecution:O.After},provideExtensionNavigation:{"public":true,"final":false,overrideExecution:O.After},provideCustomActionPress:{"public":true,"final":false,overrideExecution:O.After},provideCustomParameter:{"public":true,"final":false,overrideExecution:O.After}}},provideExtensionAppStateData:function(s){},restoreExtensionAppStateData:function(g){},addFilters:function(a){},provideStartupExtension:function(c){},provideExtensionNavigation:function(c,o,n){},provideCustomActionPress:function(c){},provideCustomParameter:function(c){}});});
sap.ui.predefine('sap/ovp/app/resources',["sap/ui/model/resource/ResourceModel","sap/ovp/cards/ovpLogger"],function(R,o){"use strict";var r={};r.oResourceBundle=null;r.oResourceModel=null;var l=new o("OVP.app.resources");r.pResourcePromise=sap.ui.getCore().getLibraryResourceBundle("sap.ovp",true).then(function(b){if(!b){return Promise.reject("Bundle creation failure");}r.oResourceBundle=b;r.oResourceModel=new R({bundleUrl:b.oUrlInfo.url,bundle:b});return Promise.resolve();},function(e){throw e;});r.pResourcePromise.catch(function(e){l.error("sap.ovp resource library bundle error:"+e);});
r.getText=function(t,s){if(s&&s.length>0){return this.oResourceBundle?this.oResourceBundle.getText(t,s):null;}else{return this.oResourceBundle?this.oResourceBundle.getText(t):null;}};
r.getProperty=function(t){return this.oResourceModel?this.oResourceModel.getProperty(t):null;};
return r;},true);
sap.ui.predefine('sap/ovp/cards/ActionUtils',["sap/ui/layout/form/SimpleForm","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/smartfield/JSONType"],function(S,a,b,J){"use strict";return{getActionInfo:function(c,d,e){var m=c.getModel().getMetaModel();var f=d.action.split('/')[1];var C=c.getObject();var g={oContext:c,sFunctionImportPath:d.action,sFunctionLabel:d.label,oFunctionImport:m.getODataFunctionImport(f),parameterData:{},allParameters:[]};var p;if(g.oFunctionImport.parameter){var k=this._getKeyProperties(e);for(var i=0;i<g.oFunctionImport.parameter.length;i++){var P=g.oFunctionImport.parameter[i];this._addParamLabel(P,e,m);if(k[P.name]){P.isKey=true;}if(typeof P.nullable==='undefined'){P.nullable=true;}if(C.hasOwnProperty(P.name)){p=C[P.name];}else{p="";}g.parameterData[P.name]=p;g.allParameters.push(P);}}return g;},_getKeyProperties:function(e){var k={};if(e&&e.key&&e.key.propertyRef){for(var i=0;i<e.key.propertyRef.length;i++){var K=e.key.propertyRef[i].name;k[K]=true;}}return k;},_addParamLabel:function(p,e,m){if(e&&p&&!p["com.sap.vocabularies.Common.v1.Label"]){var P=m.getODataProperty(e,p.name,false);if(P&&P["com.sap.vocabularies.Common.v1.Label"]){p["com.sap.vocabularies.Common.v1.Label"]=P["com.sap.vocabularies.Common.v1.Label"];}else if(P&&P["sap:label"]){p["sap:label"]=P["sap:label"];}}},buildParametersForm:function(c,o){function g(p){var L="";if(p["com.sap.vocabularies.Common.v1.Label"]){L=p["com.sap.vocabularies.Common.v1.Label"].String;}else if(p["sap:label"]){L=p["sap:label"];}else{L=p.name;}return L;}var f=new S({editable:true});var F=[];for(var i=0;i<c.allParameters.length;i++){var p=c.allParameters[i];var P=g(p);var B='{/'+p.name+'}';var j=null;var e=p.type;var m=p.maxLength?parseInt(p.maxLength,10):undefined;if(e==='Edm.Boolean'){j=J.Boolean;}else if(e==='Edm.Byte'||e==='Edm.SByte'||e==='Edm.Int16'||e==='Edm.Int32'){j=J.Integer;}else{j=J.String;}var d=this._isMandatoryParameter(p);var h=new a({value:B,mandatory:d,jsontype:j,maxLength:m,editable:!p.isKey});h.attachChange(o);F.push(h);var l=new b();l.setRequired(d&&!p.isKey);l.setText(P);l.setLabelFor(h);f.addContent(l);f.addContent(h);}return f;},getParameters:function(p,f){var c=this._validateParametersValue(p,f);return c.preparedParameterData;},mandatoryParamsMissing:function(p,f){var v=this._validateParametersValue(p,f);return v.missingMandatoryParameters&&v.missingMandatoryParameters.length>0;},_validateParametersValue:function(p,f){var m=[];var M=p.getObject('/');var P={};var v,c;for(var i=0;i<f.parameter.length;i++){var o=f.parameter[i];var s=o.name;if(M.hasOwnProperty(s)){v=M[s];c=this._isMandatoryParameter(o);if(v===undefined||v===""){if(c){if(o.type==='Edm.Boolean'){P[s]=false;}else{m.push(o);}}}else{P[s]=v;}}else{throw new Error("Unknown parameter: "+s);}}return{preparedParameterData:P,missingMandatoryParameters:m};},_isMandatoryParameter:function(p){return!this._toBoolean(p.nullable);},_toBoolean:function(p){if(typeof p==="string"){var v=p.toLowerCase();return!(v=="false"||v==""||v==" ");}return!!p;}};},true);
sap.ui.predefine('sap/ovp/cards/AnnotationHelper',["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/model/analytics/odata4analytics","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ovp/app/resources","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/security/encodeURL","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject"],function(N,D,C,O,F,a,o,S,b,f,c,e,M,d,m,g,h){"use strict";var l={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var A={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement"};var T={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var I={"List_condensed":{phone:5,tablet:5,desktop:5},"List_extended":{phone:3,tablet:3,desktop:3},"List_condensed_bar":{phone:5,tablet:5,desktop:5},"List_extended_bar":{phone:3,tablet:3,desktop:3},"Table":{phone:5,tablet:5,desktop:5},"Stack_simple":{phone:20,tablet:20,desktop:20},"Stack_complex":{phone:5,tablet:5,desktop:5}};var L=new g("OVP.cards.AnnotationHelper");
function n(i,j){var k=i.getSetting('ovpCardProperties');var i3=k.getProperty('/showLabelText');if(i3==="true"){var j3=j.Address[0];if(typeof j3.country!=="undefined"){return"{path:'"+j3.country.Path+"'}";}else if(typeof j3.locality!=="undefined"){return"{path:'"+j3.locality.Path+"'}";}else if(typeof j3.street!=="undefined"){return"{path:'"+j3.street.Path+"'}";}else if(typeof j3.code!=="undefined"){return"{path:'"+j3.code.Path+"'}";}}else{return null;}}
n.requiresIContext=true;
function p(i,j){if(!j){return"";}if(j.Label){return j.Label.String;}var k=i.getSetting&&i.getSetting('ovpCardProperties');var i3=k&&k.getProperty("/metaModel");var j3=k&&k.getProperty("/entityType");if(!i3||!j3){return"";}var k3;if(j.Value){k3=j.Value.Path;}if(j.Target){var l3=H(j3.$path,j);var m3=l3&&i3.getProperty(l3);k3=m3&&m3.Value.Path;}if(!k3||!k3.length>0||k3===" "){return"";}var n3=i3.getODataProperty(j3,k3);if(!n3){return"";}var o3=n3["sap:label"]||(n3["com.sap.vocabularies.Common.v1.Label"]||"").String||"";return o3;}
p.requiresIContext=true;
function s(i){if(i.EdmType==="Edm.DateTime"||i.EdmType==="Edm.DateTimeOffset"){return'Right';}return'Left';}
s.requiresContext=true;
function q(i,k){if(i.getSetting){var j=i.getSetting("_ovpCache");if(j){return j[k];}}return undefined;}
function r(i,k,j){if(i.getSetting){var i3=i.getSetting("_ovpCache");if(i3){i3[k]=j;}}}
function t(i,j){var k;if(j){k=j.None;if(i&&i.EnumMember){var i3=i.EnumMember;if(v(i3,'Negative')){k=j.Negative;}else if(v(i3,'Critical')){k=j.Critical;}else if(v(i3,'Positive')){k=j.Positive;}}}return k;}
function u(i){if(i=="Error"){i=1;}else if(i=="Warning"){i=2;}else if(i=="Success"){i=3;}else{i=0;}return i;}
function v(i,j){return i&&i.indexOf(j,i.length-j.length)!==-1;}
function w(i,j,k,i3,j3,k3,l3){var m3={};m3.EnumMember="None";var n3=Number.NEGATIVE_INFINITY;var o3=Number.POSITIVE_INFINITY;if((!j3&&j3!==0)&&(k||k===0)){j3=k;}if((!k3&&k3!==0)&&(i3||i3===0)){k3=i3;}if(!k&&k!==0){k=n3;}if(!i3&&i3!==0){i3=o3;}if(i!==undefined){i=Number(i);if(v(j,"Minimize")||v(j,"Minimizing")){if((k3||k3===0)&&(i3||i3===0)){if(i<=parseFloat(k3)){m3.EnumMember="Positive";}else if(i>parseFloat(i3)){m3.EnumMember="Negative";}else{m3.EnumMember="Critical";}}}else if(v(j,"Maximize")||v(j,"Maximizing")){if((j3||j3===0)&&(k||k===0)){if(i>=parseFloat(j3)){m3.EnumMember="Positive";}else if(i<parseFloat(k)){m3.EnumMember="Negative";}else{m3.EnumMember="Critical";}}}else if(v(j,"Target")){if((k3||k3===0)&&(i3||i3===0)&&(j3||j3===0)&&(k||k===0)){if(i>=parseFloat(j3)&&i<=parseFloat(k3)){m3.EnumMember="Positive";}else if(i<parseFloat(k)||i>parseFloat(i3)){m3.EnumMember="Negative";}else{m3.EnumMember="Critical";}}}}return t(m3,l3);}
function x(i,j,k,i3){if(!i||!j){return;}i=Number(i);if(!i3&&(i-j>=0)){return"Up";}if(!k&&(i-j<=0)){return"Down";}if(j&&i3&&(i-j>=i3)){return"Up";}if(j&&k&&(i-j<=k)){return"Down";}}
function y(i,j){var k=i.getPath(0)+"-DataFields-Sorted";var i3=q(i,k);if(!i3){var j3=z(i,j);var k3=j3.map(function(l3){return l3.Value.Path;});k3=k3.filter(function(l3){return!!l3;});i3=j.filter(function(l3){if(l3.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&k3.indexOf(l3.Value.Path)===-1){return true;}return false;});i3=K(i3);r(i,k,i3);}return i3;}
y.requiresIContext=true;
function z(j,k,i3){var j3=j.getPath(0)+"-DataPoints-Sorted";var k3=q(j,j3);if(!k3){if(i3){k3=k.filter(E);}else{k3=k.filter(B);}k3=K(k3);var l3;for(var i=0;i<k3.length;i++){l3=j.getPath(0).substr(0,j.getPath(0).lastIndexOf("/")+1);k3[i]=j.getModel(0).getProperty(H(l3,k3[i]));l3="";}r(j,j3,k3);}return k3;}
z.requiresIContext=true;
function B(i){if(i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true;}return false;}
function E(i){if((i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/))||(i.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.AnnotationPath.match(/@com.sap.vocabularies.Communication.v1.Contact.*/))){return true;}return false;}
function G(i){if(!i||!i.Criticality||!i.Criticality.Path){return;}return"{path:'"+i.Criticality.Path+"'}";}
function H(i,j){if(i&&!v(i,'/')){i+='/';}return i+j.Target.AnnotationPath.slice(1);}
function J(i){var j,k;if(i["com.sap.vocabularies.UI.v1.Importance"]){j=i["com.sap.vocabularies.UI.v1.Importance"].EnumMember;switch(j){case"com.sap.vocabularies.UI.v1.ImportanceType/High":k=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":k=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":k=3;break;}}else{k=4;}return k;}
function K(i){if(i.length<2){return i;}var j=parseInt(i.length/2,10);var k=i.slice(0,j);var i3=i.slice(j,i.length);return P(K(k),K(i3));}
function P(i,j){var k=[];while(i.length&&j.length){var i3=J(i[0]),j3=J(j[0]);if(i3<=j3){k.push(i.shift());}else{k.push(j.shift());}}while(i.length){k.push(i.shift());}while(j.length){k.push(j.shift());}return k;}
function Q(i,j,k){var i3=y(i,j)[k];if(i3){return Z(i,i3);}return"";}
function R(i,j,k){var i3=y(i,j)[k];return p(i,i3);}
function U(i,j,k){var i3=z(i,j)[k];if(i3&&i3.Title){return i3.Title.String;}return"";}
function V(i,j,k){var i3=j.filter(B);i3=K(i3);if(!i3||!i3.length||!i3.length>0){return"";}return p(i,i3[0]);}
function W(i,j,k,i3){var j3=z(i,j)[k];if(!j3){return"";}var k3=i.getSetting('ovpCardProperties');var l3=k3.getProperty("/entityType");var m3=k3.getProperty("/metaModel");return _(i,j3,l3,m3,i3);}
function X(i,j,k){var i3=z(i,j)[k];if(i3&&i3.Criticality){return true;}}
function Y(i,j,k){var i3=z(i,j)[k];var j3=i3.Criticality.Path;return"{path:'"+j3+"'}";}
function _(i,j,k,i3,j3){if(!j||!j.Value){return"";}var k3=i.getSetting('ovpCardProperties');var l3=false;if(k3){var m3=k3.getProperty("/ignoreSapText");l3=m3==undefined?l3:m3;}var n3=i3.getODataProperty(k,j.Value.Path);var o3=false;if(l3==true){if(n3&&(n3["com.sap.vocabularies.Analytics.v1.Measure"]||n3["sap:aggregation-role"]=="measure")){o3=true;}}if(!o3&&n3){var p3;if(n3["com.sap.vocabularies.Common.v1.Text"]){p3=n3["com.sap.vocabularies.Common.v1.Text"].String?n3["com.sap.vocabularies.Common.v1.Text"].String:n3["com.sap.vocabularies.Common.v1.Text"].Path;}else if(n3["sap:text"]){p3=n3["sap:text"];}if(p3){n3=i3.getODataProperty(k,p3);j={Value:{Path:n3.name}};}}return Z(i,j,j3);}
function Z(i,j,k,i3){if(j.Value.Apply){return O.format(i,j.Value);}var j3=i.getSetting('ovpCardProperties');var k3=j3.getProperty("/entityType");var l3=j3.getProperty("/metaModel");return a1(i,j,k3,l3,k,i3);}
Z.requiresIContext=true;
function $(i,j,k,i3){if((!k)||(typeof i3!=='string')){return i3;}var j3=k[A.TEXT];if(!j3){return i3;}var k3,l3;k3=k[A.TEXT_ARRANGEMENT];l3=k3&&k3.EnumMember;if(!l3){k3=j3&&j3[A.TEXT_ARRANGEMENT];l3=k3&&k3.EnumMember;}if(!l3){k3=j&&j[A.TEXT_ARRANGEMENT];l3=k3&&k3.EnumMember;}if(!l3){return i3;}var m3=O.format(i,j3);if(!m3||m3===" "){return i3;}var n3;switch(l3){case T.TEXT_FIRST:n3=m3+" ("+i3+")";break;case T.TEXT_LAST:n3=i3+" ("+m3+")";break;case T.TEXT_ONLY:n3=m3;break;case T.TEXT_SEPARATE:n3=i3+" ("+m3+")";break;default:n3=i3;break;}return n3;}
function a1(j,k,i3,j3,k3,l3,m3){if(k.Value.Apply){return O.format(j,k.Value);}var n3=k.Value.Path?k.Value.Path:k.Value.String;var o3=j3.getODataProperty(i3,n3),p3="",q3,r3;var s3=j.getSetting("ovpCardProperties");var t3=s3&&s3.getProperty("/contentFragment");if(!l3){if(k.Value.Path&&k.Value.Path.split("/").length>1){o3=f1(j3,i3,k.Value.Path);}if(!o3){return"";}if(o3["type"]==='Edm.DateTime'||o3["type"]==='Edm.DateTimeOffset'){var u3={'relative':true,'relativeScale':'auto'},v3=s3&&s3.getProperty("/showDateInRelativeFormat");if(v3!==undefined&&!v3){u3={'style':'medium'};}r3={dateFormat:u3,bUTC:o3["type"]==='Edm.DateTime'?true:false};q3="sap.ovp.cards.AnnotationHelper.formatDate";p3=b1([k.Value.Path?k.Value.Path:o3.name],q3,r3);}else if((k.ValueFormat&&k.ValueFormat.NumberOfFractionalDigits)||o3["scale"]){var w3=(k.ValueFormat&&k.ValueFormat.NumberOfFractionalDigits)?k.ValueFormat.NumberOfFractionalDigits.Int:0,x3;var y3=(k.ValueFormat&&k.ValueFormat.ScaleFactor&&k.ValueFormat.ScaleFactor.Decimal);if(o3["Org.OData.Measures.V1.ISOCurrency"]){x3=o3["Org.OData.Measures.V1.ISOCurrency"].Path?o3["Org.OData.Measures.V1.ISOCurrency"].Path:o3["Org.OData.Measures.V1.ISOCurrency"].String;}else if(o3["Org.OData.Measures.V1.Unit"]){x3=o3["Org.OData.Measures.V1.Unit"].Path?o3["Org.OData.Measures.V1.Unit"].Path:o3["Org.OData.Measures.V1.Unit"].String;}else if(o3["sap:unit"]){x3=o3["sap:unit"];}var z3=x3?j3.getODataProperty(i3,x3):null,A3=[k.Value.Path?k.Value.Path:o3.name];if(w3>2){w3=2;}r3={numberOfFractionalDigits:w3,scaleFactor:y3};if(o3["Org.OData.Measures.V1.ISOCurrency"]){var B3=o3["Org.OData.Measures.V1.ISOCurrency"];if(B3.Path){q3="sap.ovp.cards.AnnotationHelper.formatCurrency";A3.push(B3.Path);}else if(B3.String){r3.currencyString=B3.String;q3="sap.ovp.cards.AnnotationHelper.formatCurrency";}}else if(z3&&(z3["Org.OData.Measures.V1.ISOCurrency"]||z3["sap:semantics"]==="currency-code")){q3="sap.ovp.cards.AnnotationHelper.formatCurrency";A3.push(x3);}else{q3="sap.ovp.cards.AnnotationHelper.formatNumberCalculation";}p3=b1(A3,q3,r3);}else{if(m3){p3=O.simplePath(j,k.Value);}else{var C3=O.format(j.getModel()?j:j.getInterface(0),k.Value);var D3=C3.split(",");var E3=[];if(D3.length>1){for(var i=0;i<D3.length;i++){if(D3[i].indexOf("path:")>=0||D3[i].indexOf("type:")>=0){E3.push(D3[i]);}}if(E3.length>0){p3=p3+E3.join(',');if(p3.substring(p3.length-1)!=="}"){p3=p3+"}";}}}else{p3=C3;}}}if(t3){p3=$(j,i3,o3,p3);}if(o3["Org.OData.Measures.V1.Unit"]){var F3=o3["Org.OData.Measures.V1.Unit"];if(F3.Path){p3+=(" "+b1([F3.Path]));}else if(F3.String){if(F3.String!=="%"){p3+=" ";}p3+=F3.String;}}}if(!k3){if(o3["Org.OData.Measures.V1.ISOCurrency"]){var B3=o3["Org.OData.Measures.V1.ISOCurrency"];if(B3.Path){p3+=(" "+b1([B3.Path]));}else if(B3.String){p3+=(" "+B3.String);}}}if(p3[0]===" "){p3=p3.substring(1);}return p3;}
function b1(j,k,i3){var j3="",k3=j.length;if(k3>1||i3){j3="{parts:[";for(var i=0;i<k3;i++){j3+=("{path: '"+j[i]+"'}"+(((i===k3-1)&&!i3)?"]":", "));}if(i3){var l3="{value:"+JSON.stringify(i3)+", model: 'ovpCardProperties'}";j3+=l3+"]";}}else{j3="{path: '"+j[0]+"'";}j3+=(k?(", formatter: '"+k+"'"):"")+"}";return j3;}
function c1(){var i=arguments[arguments.length-1],j=arguments[0];var k=N.getFloatInstance({style:'short',showMeasure:false,shortRefNumber:i.scaleFactor,minFractionDigits:i.numberOfFractionalDigits,maxFractionDigits:i.numberOfFractionalDigits});return k.format(Number(j));}
function d1(){var i=arguments[arguments.length-1],j=arguments[0];var k=D.getInstance(i.dateFormat);if(!j){j="";return j;}return k.format(new Date(j),i.bUTC);}
function e1(){var i=arguments[arguments.length-1],j=arguments[0],k=arguments[1];var i3="";var j3=N.getCurrencyInstance({style:'short',showMeasure:false,shortRefNumber:i.scaleFactor,minFractionDigits:i.numberOfFractionalDigits,maxFractionDigits:i.numberOfFractionalDigits});if(k){i3=j3.format(j,k);}else{i3=i.currencyString?j3.format(j,i.currencyString):j3.format(j);}return i3;}
function f1(j,k,i3){var j3=i3.split("/");if(j3.length>1){for(var i=0;i<(j3.length-1);i++){var k3=j.getODataAssociationEnd(k,j3[i]);if(k3){k=j.getODataEntityType(k3.type);}}return j.getODataProperty(k,j3[j3.length-1]);}}
function g1(i,j,k){var i3=z(i,j);var j3=l.StateValues;var k3=i3[k];if(!k3){return j3.None;}if(k3.Criticality){return k1(i,k3,j3);}return m1(i,k3,j3);}
function h1(i,j,k){var i3=z(i,j);if(i3&&i3.length){var j3=i3[0];if(j3&&(j3.Criticality||j3.CriticalityCalculation)){return true;}}return false;}
function i1(i,j,k){if(h1(i,j,k)){return'';}return'sapUiChartPaletteQualitativeHue1';}
i1.requiresIContext=true;
function j1(i,j,k){var i3=z(i,j),j3=l.ColorValues;var k3=j3.None;if(i3.length>k){var l3=i3[k];if(l3&&l3.Criticality){k3=k1(i,l3,j3);}else{k3=m1(i,l3,j3);}}return k3;}
function k1(i,j,k){var i3=k.None;var j3;var k3=j.Criticality;if(k3){j3="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+k.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+k.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+k.Positive+"'' : "+"''"+k.None+"'' '}'";if(k3.Path){var l3='$'+O.simplePath(i,k3);i3=f(j3,l3);}else if(k3.EnumMember){var m3="'"+k3.EnumMember+"'";i3=f(j3,m3);}else{L.warning("Case not supported, returning the default Neutral state");}}else{L.warning("Case not supported, returning the default Neutral state");}return i3;}
function l1(i,j,k){var i3=z(i,j);var j3="None";if(i3.length>k){var k3=i3[k];if(k3&&k3.Criticality&&k3.Criticality.Path){j3=Y(i,j,k);}else{j3=m1(i,k3,l.StateValues);j3=u(j3);}}return j3;}
function m1(i,j,k){var i3=k.None;if(j.Criticality){i3=t(j.Criticality,k);}else if(j.CriticalityCalculation&&j.Value&&j.Value&&j.Value.Path){i3=n1(i,j,k);}return i3;}
function n1(i,j,k){var i3=F1(j.Value);var j3=j.CriticalityCalculation.ImprovementDirection.EnumMember;var k3=F1(j.CriticalityCalculation.DeviationRangeLowValue);var l3=F1(j.CriticalityCalculation.DeviationRangeHighValue);var m3=F1(j.CriticalityCalculation.ToleranceRangeLowValue);var n3=F1(j.CriticalityCalculation.ToleranceRangeHighValue);var o3=p1(k3);var p3=p1(l3);var q3=p1(m3);var r3=p1(n3);var s3={"deviationLow":k3,"deviationHigh":l3,"toleranceLow":m3,"toleranceHigh":n3,"bIsDeviationLowBinding":o3,"bIsDeviationHighBinding":p3,"bIsToleranceLowBinding":q3,"bIsToleranceHighBinding":r3,"sImprovementDirection":j3,"oCriticalityConfigValues":k};var t3="{value:"+JSON.stringify(s3)+", model: 'ovpCardProperties'}";var u3="parts: ["+i3;u3+=o3?","+k3:"";u3+=p3?","+l3:"";u3+=q3?","+m3:"";u3+=r3?","+n3:"";u3+=","+t3;u3+="]";var v3="sap.ovp.cards.AnnotationHelper.formatColor";return"{"+u3+", formatter: '"+v3+"'}";}
function o1(){var i=arguments[arguments.length-1];var j=1;return w(arguments[0],i.sImprovementDirection,i.bIsDeviationLowBinding?arguments[j++]:i.deviationLow,i.bIsDeviationHighBinding?arguments[j++]:i.deviationHigh,i.bIsToleranceLowBinding?arguments[j++]:i.toleranceLow,i.bIsToleranceHighBinding?arguments[j++]:i.toleranceHigh,i.oCriticalityConfigValues);}
function p1(i){return(typeof i==="string")&&i.charAt(0)==="{";}
function q1(j,k,i3){var j3="";var k3=i3.split("/");if(k3.length>1){for(var i=0;i<(k3.length-1);i++){var l3=j.getODataAssociationEnd(k,k3[i]);if(l3){k=j.getODataEntityType(l3.type);if(j3){j3=j3+"/";}j3=j3+k3[i];}else{return j3;}}}return j3;}
function r1(i){var j;if(i&&typeof i.getData==='function'){var k=i.getData();if(k.tabs){var i3=0;var j3=k.selectedKey;if(j3&&k.tabs.length>=j3){i3=j3-1;}j=k.tabs[i3].mFilterPreference;}else{j=k.mFilterPreference;}}return!!j;}
function s1(j,k){var i3=j.getSetting('ovpCardProperties');var j3=i3.getProperty("/addODataSelect");var k3=i3.getProperty("/metaModel");var l3=k3.getODataEntityType(k.entityType);var m3=l3[i3.getProperty('/selectionAnnotationPath')];var n3=l3[i3.getProperty('/presentationAnnotationPath')];var o3="/"+k.name;var p3=Array.prototype.slice.call(arguments,2);var q3=j.getSetting('ovpCardProperties'),r3=q3.getProperty('/parameters');if(m3||!!r3){if((m3&&m3.Parameters&&m3.Parameters.length>0)||!!r3){o3=C2(j.getSetting('dataModel'),k,m3,r3);}}if(i3.getProperty("/cardLayout")&&i3.getProperty("/cardLayout/noOfItems")){var s3="{path: '"+o3+"', length: "+ +(i3.getProperty("/cardLayout/noOfItems"));}else{var s3="{path: '"+o3+"', length: "+G1(i3);}var t3=[];if(j3){t3=u1(j,k3,l3,p3);var u3=i3.getProperty("/template");if(u3!="sap.ovp.cards.charts.analytical"&&u3!="sap.ovp.cards.charts.smart.chart"){var v3=x1(n3);for(var i=0;i<v3.length;i++){if(t3.indexOf(v3[i])===-1){t3.push(v3[i]);}}}}var w3=t1(k3,l3,p3);var x3=r1(i3);if(x3||t3.length>0||w3.length>0){s3=s3+", parameters: {";}if(t3.length>0||w3.length>0){if(t3.length>0){s3=s3+"select: '"+t3.join(',')+"'";}if(w3.length>0){if(t3.length>0){s3=s3+", ";}s3=s3+"expand: '"+w3.join(',')+"'";}if(x3){s3=s3+", ";}}if(x3){s3=s3+"custom: {cardId: '"+i3.getProperty("/cardId")+"'}";}if(x3||t3.length>0||w3.length>0){s3=s3+"}";}var y3=w1(i3,n3);if(y3.length>0){s3=s3+", sorter:"+JSON.stringify(y3);}var z3=B1(i3,m3);if(z3.length>0){s3=s3+", filters:"+JSON.stringify(z3);}s3=s3+"}";return s3;}
s1.requiresIContext=true;
function t1(k,i3,j3){var k3=[];var l3,m3,n3,o3;for(var i=0;i<j3.length;i++){if(!j3[i]){continue;}l3=i3.$path+"/"+j3[i];m3=k.createBindingContext(l3);n3=m3.getObject();n3=n3?n3:[];for(var j=0;j<n3.length;j++){if(n3[j].Value&&n3[j].Value.Path){o3=q1(k,i3,n3[j].Value.Path);if(o3&&k3.indexOf(o3)===-1){k3.push(o3);}}}}return k3;}
function u1(i3,j3,k3,l3){var m3=[];var n3,o3,p3;for(var i=0;i<l3.length;i++){if(!l3[i]){continue;}n3=k3.$path+"/"+l3[i];o3=j3.createBindingContext(n3);var q3={};if(i3&&i3.bDummyContext){m(q3,i3,o3,true);}else{q3=i3;}p3=o3.getObject();if(!p3){p3=[];}else if(c(p3)){if(p3.Data){p3=p3.Data;}else{p3=[];}}var r3;var s3;var t3;var u3;for(var j=0;j<p3.length;j++){s3=[];r3=p3[j];t3="";u3=r3.RecordType;if(u3==="com.sap.vocabularies.UI.v1.DataField"){t3=a1(q3,r3,k3,j3,undefined,undefined,true);}else if(u3==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var v3=H(k3.$path,r3);t3=_(q3,j3.getProperty(v3),k3,j3);var w3=G(j3.getProperty(v3));if(w3&&w3.length>0){t3+=w3;}}else if(u3==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&r3.Url){var x3;if(!r3.Url.UrlRef){x3=O.format(q3,r3.Url);}if(x3&&x3.substring(0,2)==="{="){t3=x3;}}if(t3){var y3=O.simplePath(q3,r3.Value);if(t3.indexOf("(")<0&&t3!==y3){t3=[].concat(y3,t3).join(" ");}s3=v1(t3);}if(s3&&s3.length>0){var z3;for(var k=0;k<s3.length;k++){z3=s3[k];if(!m3[z3]){m3[z3]=true;var A3=C.getUnitColumn(z3,k3);if(A3&&A3!==z3){m3[A3]=true;}var B3=c3(j3,k3,z3);if(B3&&B3!==z3){m3[B3]=true;}}}}}}return Object.keys(m3);}
function v1(j){var i,k=0,i3=j.length,j3="",k3;for(i=0;i<i3;i++){k3=j.charAt(i);if(!k3){return;}switch(k3){case"{":k++;break;case"}":k--;break;default:if(k<=0){continue;}break;}j3+=k3;}j=j3;var l3=/\${([a-zA-Z0-9\_|\/]*)/g;var m3=/[^[{]*[a-zA-Z0-9\_]/g;var n3=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var o3,p3,q3=[];if(j.indexOf("{parts:[")!==-1){j=j.replace("{parts:[","");j=j.replace("]","");j=j.replace(j.lastIndexOf("}",""));}if(j.substring(0,2)==="{="){o3=l3;p3=1;}else if(j.indexOf("path")!==-1){if(j.indexOf("{value")>0){var r3=0;var i=j.indexOf("{value")+5;var s3;while(i<i3){if(j[i]==="}"&&r3===0){s3=i;break;}if(j[i]==="{"){r3+=1;}if(j[i]==="}"){r3-=1;}i++;}j=j.slice(0,j.indexOf("{value"))+j.slice(s3);}var t3=m3.exec(j);while(t3){if(t3[0].indexOf("path")===-1&&t3[0].indexOf("@i18n")!==0&&t3[0].indexOf("model: 'ovpCardProperties'")<=-1){q3.push(t3[0]);}t3=m3.exec(j);}o3=n3;p3=1;}else{o3=m3;p3=0;}var u3=o3.exec(j);while(u3){if(u3[p3]&&u3[p3].indexOf("@i18n")!==0){q3.push(u3[p3]);}u3=o3.exec(j);}return q3;}
function w1(j,k){var i3=[];var j3,k3;var l3=j.getProperty("/sortBy");if(l3){var m3=j.getProperty('/sortOrder');if(m3&&m3.toLowerCase()!=='descending'){k3=false;}else{k3=true;}j3={path:l3,descending:k3};i3.push(j3);}var n3=k&&k.SortOrder||undefined;var o3,l3;if(n3){for(var i=0;i<n3.length;i++){o3=n3[i];l3=o3.Property.PropertyPath;k3=C1(o3.Descending,true);j3={path:l3,descending:k3};i3.push(j3);}}return i3;}
function x1(j){var k=[];var i3=j&&j.RequestAtLeast||undefined;if(i3){for(var i=0;i<i3.length;i++){if(i3[i].PropertyPath){k.push(i3[i].PropertyPath);}}}return k;}
function y1(i){var j=i.getProperty('/entityType');var k=j[i.getProperty('/selectionAnnotationPath')];return{filters:B1(i,k),parameters:A1(k)};}
function z1(j){if(!j){return;}var k=j.getProperty('/entityType');var i3=k[j.getProperty('/presentationAnnotationPath')];var j3=w1(j,i3);var k3=[];var i,l3=j3.length;for(i=0;i<l3;i++){if(!j3[i].path){continue;}k3.push({Property:j3[i].path,Descending:j3[i].descending});}if(k3.length>0){return{SortOrder:k3};}}
function A1(j){var k,i3=[];if(!j||!j.Parameters){return i3;}var j3=j.Parameters.length;for(var i=0;i<j3;i++){k=j.Parameters[i];if(!k.PropertyName||!k.PropertyName.PropertyPath){continue;}if(!k.PropertyValue){L.error("Missing value for parameter "+k.PropertyName.PropertyPath);continue;}i3[i3.length]={path:k.PropertyName.PropertyPath,value:E1(k.PropertyValue)};}return i3;}
function B1(k,i3){var j3=[];var k3;var l3=k.getProperty("/filters");if(l3){j3=j3.concat(l3);}if(i3&&i3.SelectOptions){k3=i3.SelectOptions;}else{k3=i3;}var m3,n3,o3;if(k3){for(var i=0;i<k3.length;i++){m3=k3[i];n3=m3.PropertyName.PropertyPath;for(var j=0;j<m3.Ranges.length;j++){o3=m3.Ranges[j];if(o3.Sign.EnumMember){var p3={path:n3,operator:o3.Option.EnumMember.split("/")[1],value1:E1(o3.Low),value2:E1(o3.High),sign:o3.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(p3.sign==="E"&&p3.operator!==F.EQ){L.error("Exclude sign is supported only with EQ operator");continue;}if(p3.sign==="E"&&p3.operator===F.EQ){p3.operator=F.NE;p3.sign="I";}if(p3.operator==="CP"&&p3.sign==="I"){var q3=F.Contains;var r3=p3.value1;if(r3){var s3=r3.indexOf('*');var t3=r3.lastIndexOf('*');if(s3>-1){if((s3===0)&&(t3!==(r3.length-1))){q3=F.EndsWith;r3=r3.substring(1,r3.length);}else if((s3!==0)&&(t3===(r3.length-1))){q3=F.StartsWith;r3=r3.substring(0,r3.length-1);}else{r3=r3.substring(1,r3.length-1);}}}p3.operator=q3;p3.value1=r3;}j3.push(p3);}}}}return j3;}
function C1(i,j){if(i&&i.Boolean){if(i.Boolean.toLowerCase()==="true"){return true;}else if(i.Boolean.toLowerCase()==="false"){return false;}}else if(i&&i.Bool){if(i.Bool.toLowerCase()==="true"){return true;}else if(i.Bool.toLowerCase()==="false"){return false;}}return j;}
function D1(i){var j;if(i){if(i.String){j=Number(i.String);}else if(i.Int){j=Number(i.Int);}else if(i.Decimal){j=Number(i.Decimal);}else if(i.Double){j=Number(i.Double);}else if(i.Single){j=Number(i.Single);}}return j;}
function E1(i){var j;if(i){if(i.String||i.String===""){j=i.String;}else if(i.Boolean||i.Bool){j=C1(i);}else if(i.DateTime){j=i.DateTime;}else if(i.DateTimeOffset){j=i.DateTimeOffset;}else{j=D1(i);}}return j;}
function F1(i){if(i){if(i.Path){return"{path:'"+i.Path+"'}";}else{return E1(i);}}else{return"";}}
function G1(i){var j=i.getProperty('/contentFragment');var k=i.getProperty('/listType');var i3=i.getProperty('/listFlavor');var j3;var k3="desktop";if(a.system.phone){k3="phone";}else if(a.system.tablet){k3="tablet";}if(j=="sap.ovp.cards.list.List"){if(k=="extended"){if(i3=="bar"){j3=I["List_extended_bar"];}else{j3=I["List_extended"];}}else if(i3=="bar"){j3=I["List_condensed_bar"];}else{j3=I["List_condensed"];}}else if(j=="sap.ovp.cards.table.Table"){j3=I["Table"];}else if(j=="sap.ovp.cards.stack.Stack"){if(i.getProperty('/objectStreamCardsNavigationProperty')){j3=I["Stack_complex"];}else{j3=I["Stack_simple"];}}if(j3){return j3[k3];}return 5;}
function H1(i){var j=i.getObject();var k=z(i,j,true);var i3=k.map(function(j3){if(j3&&j3.Value&&j3.Value.Path){return j3.Value.Path;}else if(j3&&j3.fn&&j3.fn.Path){return j3.fn.Path;}});j.filter(function(j3,k3){if(j3.RecordType==="com.sap.vocabularies.UI.v1.DataField"&&i3.indexOf(j3.Value.Path)>-1){j.splice(k3,1);}});}
H1.requiresIContext=true;
function I1(i,j){if(j.charAt(0)==='/'||j.indexOf("http")===0){return j;}var k=i.getModel(0).getProperty("/baseUrl");if(k){return k+"/"+j;}return j;}
I1.requiresIContext=true;
function J1(i,j){var k=z(i,j);return k.length;}
J1.requiresIContext=true;
function K1(i,j){return M1(i,j,0);}
K1.requiresIContext=true;
function L1(i,j){return M1(i,j,1);}
L1.requiresIContext=true;
function M1(i,j,k){var i3=z(i,j),j3=i3[k];if(j3&&j3.Value&&j3.Value.Path){return j3.Value.Path;}return"";}
function N1(i,j){return R(i,j,0);}
N1.requiresIContext=true;
function O1(i,j){return R(i,j,1);}
O1.requiresIContext=true;
function P1(i,j){return R(i,j,2);}
P1.requiresIContext=true;
function Q1(i,j){return R(i,j,3);}
Q1.requiresIContext=true;
function R1(i,j){return R(i,j,4);}
R1.requiresIContext=true;
function S1(i,j,k){return Q(i,j,k);}
S1.requiresIContext=true;
function T1(i,j,k){return W(i,j,k);}
T1.requiresIContext=true;
function U1(i,j,k,i3){var j3=J1(i,j);if(j3>0){return T1(i,j,k);}else{return S1(i,j,i3);}}
U1.requiresIContext=true;
function V1(i,j,k){return o2(i,j,k);}
V1.requiresIContext=true;
function W1(i,j){return U(i,j,0);}
W1.requiresIContext=true;
function X1(i,j){return U(i,j,1);}
X1.requiresIContext=true;
function Y1(i,j){return U(i,j,2);}
Y1.requiresIContext=true;
function Z1(i,j){return V(i,j,0);}
Z1.requiresIContext=true;
function $1(j,k){for(var i=0;i<k.length;i++){var i3=k[i];if(i3.RecordType==="com.sap.vocabularies.UI.v1.DataField"){if(i3.IconUrl&&i3.IconUrl.String){return i3.IconUrl.String;}if(i3.IconUrl&&i3.IconUrl.Path){return O.simplePath(j,i3.IconUrl);}}}}
$1.requiresIContext=true;
function _1(i,j,k){var i3="";var j3;if(Array.isArray(j)){j3=z(i,j)[k];}else{var k3=Object.assign({},j);var l3=Object.assign({},i);j3=m2(l3,k3);}if(!j3||!j3.Value){return i3;}var m3=i.getSetting('ovpCardProperties');var n3=m3&&m3.getProperty("/entityType");var o3=m3&&m3.getProperty("/metaModel");var p3=o3&&o3.getODataProperty(n3,j3.Value.Path);var q3=p3&&p3["Org.OData.Measures.V1.ISOCurrency"];if(q3&&q3.Path){i3+=(" "+b1([q3.Path]));}else if(q3&&q3.String){i3+=(" "+q3.String);}return i3;}
_1.requiresIContext=true;
function a2(i,j,k,i3){return W(i,j,k,i3);}
a2.requiresIContext=true;
function b2(i,j){return g1(i,j,0);}
b2.requiresIContext=true;
function c2(i,j){return j1(i,j,0);}
c2.requiresIContext=true;
function d2(i,j){return g1(i,j,1);}
d2.requiresIContext=true;
function e2(i,j){return g1(i,j,2);}
e2.requiresIContext=true;
function f2(i,j){return l1(i,j,0);}
f2.requiresIContext=true;
function g2(i){var j={};j.EnumMember="None";if(Number(i)===1){j.EnumMember="Negative";}else if(Number(i)===2){j.EnumMember="Critical";}else if(Number(i)===3){j.EnumMember="Positive";}return t(j,l.ColorValues);}
function h2(i,j){if(j&&j.Criticality&&j.Criticality.Path){return"{parts: [{path:'"+j.Criticality.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.kpiValueCriticality'}";}else{return m1(i,j,l.ColorValues);}}
h2.requiresIContext=true;
function i2(i,j){return X(i,j,0);}
i2.requiresIContext=true;
function j2(i,j){var k=z(i,j)[0];if(k&&(k.Criticality||k.CriticalityCalculation)){return true;}return false;}
j2.requiresIContext=true;
function k2(i,j){return X(i,j,1);}
k2.requiresIContext=true;
function l2(i,j){return X(i,j,2);}
l2.requiresIContext=true;
function m2(i,j){var k=i.getPath(0);var i3=k.slice(0,k.lastIndexOf("/"));i3=i3.slice(0,i3.lastIndexOf("/"));var j3=H(i3,j);j=i.getModel(0).getProperty(j3);return j;}
function n2(i,j){if(!j){return"";}return Z(i,j);}
n2.requiresIContext=true;
function o2(j,k,i3,j3){var k3;var l3=j3==undefined?i3:y(j,i3)[j3];var m3=j.getSetting('ovpCardProperties');var n3=m3.getProperty("/metaModel");var o3=n3.getODataEntityType(k.entityType);var p3=o3.property;if(p3){for(var i=0;i<p3.length;i++){if(l3.Value.Path===p3[i].name){k3=p3[i]["com.sap.vocabularies.Common.v1.SemanticObject"];if(k3){return O.format(j,k3);}else{return"";}}}}}
function p2(i,j,k){var i3=k===undefined?j.Value.Path:j[k].Value.Path;var j3=(i3.indexOf("/")!=-1)?i3.split('/')[0]:"";return j3;}
p2.requiresIContext=true;
function q2(i,j){var k=i.getSetting('ovpCardProperties');var i3=k.getProperty("/metaModel");var j3=i3.getODataEntityType(j.entityType);if(j3["com.sap.vocabularies.Communication.v1.Contact"]){return true;}return false;}
q2.requiresIContext=true;
function r2(i,j,k){if(!j){return"";}var i3=i.getSetting('ovpCardProperties');var j3=i3.getProperty("/entityType");var k3=i3.getProperty("/metaModel");var l3=Object.assign({},j);var m3=Object.assign({},i);j=m2(m3,l3);return _(i,j,j3,k3,k);}
r2.requiresIContext=true;
function s2(i,j){var k=Object.assign({},j);var i3=Object.assign({},i);var j3="None",k3=l.StateValues;j=m2(i3,k);if(j&&j.Criticality){j3=k1(i,j,k3);}else{j3=m1(i,j,k3);}return j3;}
s2.requiresIContext=true;
function t2(i,j){var k=Object.assign({},j);var i3=Object.assign({},i);j=m2(i3,k);if(j&&j.Criticality){return true;}}
t2.requiresIContext=true;
function u2(i,j){var k=Object.assign({},j);var i3=Object.assign({},i);var j3=i.getSetting('ovpCardProperties');var k3=j3.getProperty("/entityType");var l3=j3.getProperty("/metaModel");j=m2(i3,k);if(!j){return;}var m3=l3.getODataProperty(k3,j.Value.Path);if(j&&m3&&m3.type=="Edm.String"&&(j.Criticality||j.CriticalityCalculation)){return'Center';}if(m3&&((m3.type=="Edm.DateTime")||(m3.type=="Edm.DateTimeOffset"))){return'Right';}}
u2.requiresIContext=true;
function v2(i,j){var k=Object.assign({},j);var i3=Object.assign({},i);j=m2(i3,k);var j3="None";if(j&&j.Criticality&&j.Criticality.Path){j3="{path:'"+j.Criticality.Path+"'}";}else{j3=m1(i,j,l.StateValues);j3=u(j3);}return j3;}
v2.requiresIContext=true;
function w2(j,k){var i3;for(var i=0;i<k.length;i++){i3=k[i];if(i3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||i3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1;}}return 0;}
w2.requiresIContext=true;
function x2(i,j){var k=z(i,j)[0];if(k&&k.Value&&k.Value.Path){var i3=i.getPath(0).substr(0,i.getPath(0).lastIndexOf("/")+1);var j3=i.getModel(0);var k3=j3.getProperty(i3);var l3=j3.getODataProperty(k3,k.Value.Path);if(l3&&l3["Org.OData.Measures.V1.Unit"]){return l3["Org.OData.Measures.V1.Unit"].String==="%";}}return false;}
x2.requiresIContext=true;
function y2(i){var j=i.getObject();var k=i.getModel();var i3=k.getProperty("/metaModel");var j3=i3.getODataEntitySet(k.getProperty("/entitySet"));var k3=i3.getODataEntityType(j3.entityType);j=k3.$path+"/"+j;return i3.createBindingContext(j);}
function z2(i,j){if(i==='Edm.String'){var k=j.PropertyValue.String;return k;}return j.PropertyValue.String;}
function A2(i,j,k,i3){var j3="";var k3=[];if(i3&&i3.Parameters){i.parameters.forEach(function(m3){i3.Parameters.forEach(function(n3){var o3=n3.PropertyName.PropertyPath.split("/");o3=o3[o3.length-1];if(o3===m3){var p3=z2(i['parameterType'][m3],n3);p3=d(j.formatValue(p3,i['parameterType'][m3]));k3.push(o3+'='+p3);}});});}else{j3="/"+k.name;L.error("SelectionParameters","There are no parameters to resolve");return j3;}try{j3='/'+i.entitySetName+'('+k3.join(',')+')/'+i.navPropertyName;}catch(l3){j3="/"+k.name;L.error("getEntitySetPathWithParameters","binding path with parameters failed - "+l3||l3.message);}return j3;}
function B2(j,k,i3,j3,k3){var l3="";var m3=new o.Model(o.Model.ReferenceByModel(j));var n3=m3.findQueryResultByName(k.name);var o3=new o.QueryResultRequest(n3);var p3=n3.getParameterization();if(!p3){l3="/"+k.name;return l3;}if(k3){var q3=k3.getAnalyticalParameters();}if(p3){var r3;o3.setParameterizationRequest(new o.ParameterizationRequest(p3));if(i3&&i3.Parameters){e(i3.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){r3=this.PropertyNameFrom.PropertyPath.split("/");o3.getParameterizationRequest().setParameterValue(r3[r3.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String);}else{r3=this.PropertyName.PropertyPath.split("/");o3.getParameterizationRequest().setParameterValue(r3[r3.length-1],this.PropertyValue.String);}});}else if(j3){e(j3,function(){o3.getParameterizationRequest().setParameterValue(this.path,this.value);});}else if(q3&&q3.length>0){var s3=k3&&k3.getUiState({allFilters:false});var t3=s3?JSON.stringify(s3.getSelectionVariant()):"{}";var i3=new S(t3);for(var u3 in p3.getAllParameters()){for(var i=0;i<q3.length;i++){if(q3[i]&&(q3[i].name==u3)){var v3=q3[i].name;var w3=i3.getParameter(v3);if(!w3){var x3=i3.getSelectOption(v3);w3=x3&&x3[0]&&x3[0].Low;}o3.getParameterizationRequest().setParameterValue(u3,w3);}}}}else{l3="/"+k.name;L.error("SelectionParameters","There are no parameters to resolve");return l3;}}try{l3=o3.getURIToQueryResultEntitySet();}catch(y3){n3=o3.getQueryResult();l3="/"+n3.getEntitySet().getQName();L.error("getEntitySetPathWithParameters","binding path with parameters failed - "+y3||y3.message);}return l3;}
function C2(i,j,k,i3,j3){var k3="";if(M.checkAnalyticalParameterisedEntitySet(i,j.name)){k3=B2(i,j,k,i3,j3);}else{var l3=M.getParametersByEntitySet(i,j.name);var m3=M.getPropertyOfEntitySet(i,j.name);var n3={};if(l3){l3['parameters'].forEach(function(o3){m3.forEach(function(p3){if(p3['name']==o3){n3[o3]=p3['type'];}});});l3['parameterType']=n3;k3=A2(l3,i,j,k);}else{k3="/"+j.name;}}return k3;}
function D2(j,k,ns){var i3=j.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<i3.length;i++){if(ns+"."+i3[i].name===k){return i3[i];}}}
function E2(i,j){var k=i.filter(function(j3){if(j3.RecordType==="com.sap.vocabularies.UI.v1.DataField"){return true;}return false;});var i3=K(k);if(i3){return i3[j];}return;}
function F2(i,j,k){if(!k||!k.length||k.length===0){return false;}k=E2(k,0);return o2(i,j,k);}
F2.requiresIContext=true;
function G2(i,j,k){if(!k||!k.length||k.length===0){return false;}k=E2(k,1);return o2(i,j,k);}
G2.requiresIContext=true;
function H2(i,j){var k=i.filter(function(j3){if(j3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&j3.Target.AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1){return true;}return false;});var i3=K(k);if(i3){return i3[j];}return;}
function I2(i){if(!i||!i.length||i.length===0){return false;}var j=H2(i,0);if(j){return true;}return false;}
function J2(i,j,k,i3){var j3,k3,l3;if(k&&k.Value&&k.Value.Path){j3=k.Value.Path;}else if(k&&k.Description&&k.Description.Value&&k.Description.Value.Path){j3=k.Description.Value.Path;}if(k&&k.Description&&k.Description.Path){k3=k.Description.Path;}else if(k&&k.Title&&k.Title.Path){l3=k.Title.Path;}var m3="";var n3=i3&&i3.Parameters;var o3="";var p3=i.getSetting('ovpCardProperties'),q3=p3.getProperty('/parameters');n3=n3||!!q3;if(n3){var r3=i.getSetting("dataModel");var s3=C2(r3,j,i3,q3);m3+="{path: '"+s3+"'";}else{m3+="{path: '/"+j.name+"'";}m3+=", length: 1";var t3=i.getSetting('ovpCardProperties');var u3=t3.getProperty("/entityType");var v3=C.getUnitColumn(j3,u3);var w3=B1(t3,i3);if(w3.length>0){o3+=", filters: "+JSON.stringify(w3);}var x3=[];x3.push(j3);if(k3){x3.push(k3);}else if(l3){x3.push(l3);}if(k&&k.Criticality&&k.Criticality.Path){x3.push(k.Criticality.Path);}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.DeviationRangeLowValue&&k.CriticalityCalculation.DeviationRangeLowValue.Path){x3.push(k.CriticalityCalculation.DeviationRangeLowValue.Path);}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ToleranceRangeLowValue&&k.CriticalityCalculation.ToleranceRangeLowValue.Path){x3.push(k.CriticalityCalculation.ToleranceRangeLowValue.Path);}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.DeviationRangeHighValue&&k.CriticalityCalculation.DeviationRangeHighValue.Path){x3.push(k.CriticalityCalculation.DeviationRangeHighValue.Path);}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ToleranceRangeHighValue&&k.CriticalityCalculation.ToleranceRangeHighValue.Path){x3.push(k.CriticalityCalculation.ToleranceRangeHighValue.Path);}if(v3){x3.push(v3);}if(k&&k.TrendCalculation&&k.TrendCalculation.ReferenceValue&&k.TrendCalculation.ReferenceValue.Path){x3.push(k.TrendCalculation.ReferenceValue.Path);}var y3=r1(p3);var z3=y3?", custom: {cardId: '"+p3.getProperty("/cardId")+"'}":"";return m3+", parameters:{select:'"+x3.join(",")+"'"+z3+"}"+o3+"}";}
J2.requiresIContext=true;
function K2(i){if(!i||!i.Value||!i.Value.Path){return"";}var j=this.getModel('ovpCardProperties');var k=j.getProperty("/entityType");var i3=j.getProperty("/metaModel");var j3=i3.getODataProperty(k,i.Value.Path);if(j3["Org.OData.Measures.V1.Unit"]){var k3=j3["Org.OData.Measures.V1.Unit"];if(k3.String=="%"){this.getModel("ovpCardProperties").oData.percentageAvailable=true;}}if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits&&i.ValueFormat.NumberOfFractionalDigits.Int){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=i.ValueFormat.NumberOfFractionalDigits.Int;}var l3={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var m3='sap.ovp.cards.AnnotationHelper.KpiValueFormatter';var n3=[i.Value.Path];return b1(n3,m3,l3);}
function L2(){var i=arguments[arguments.length-1],k=arguments[0];var j=N.getFloatInstance({minFractionDigits:i.NumberOfFractionalDigits,maxFractionDigits:i.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:k});if(i.percentageAvailable){return j.format(Number(k))+" %";}else{return j.format(Number(k));}}
function M2(i,j){if(!j||!j.Value||!j.Value.Path||!j.TrendCalculation){return"";}var k=F1(j.Value);var i3=F1(j.TrendCalculation.ReferenceValue);var j3=F1(j.TrendCalculation.DownDifference);var k3=F1(j.TrendCalculation.UpDifference);var l3=p1(i3);var m3=p1(j3);var n3=p1(k3);var o3={"referenceValue":i3,"downDifference":j3,"upDifference":k3,"bIsRefValBinding":l3,"bIsDownDiffBinding":m3,"bIsUpDiffBinding":n3};var p3="{value:"+JSON.stringify(o3)+", model: 'ovpCardProperties'}";var q3="parts: ["+k;q3+=l3?","+i3:"";q3+=m3?","+j3:"";q3+=n3?","+k3:"";q3+=","+p3;q3+="]";var r3="sap.ovp.cards.AnnotationHelper.formatTrendIcon";return"{"+q3+", formatter: '"+r3+"'}";}
M2.requiresIContext=true;
function N2(){var i=arguments[arguments.length-1];var j=1;return x(arguments[0],i.bIsRefValBinding?arguments[j++]:i.referenceValue,i.bIsDownDiffBinding?arguments[j++]:i.downDifference,i.bIsUpDiffBinding?arguments[j++]:i.upDifference);}
function O2(i){if(!i||!i.TrendCalculation||!i.TrendCalculation.ReferenceValue){return"";}if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits&&i.ValueFormat.NumberOfFractionalDigits.Int){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=i.ValueFormat.NumberOfFractionalDigits.Int;}if(i.TrendCalculation.ReferenceValue.Path){return"{parts: [{path:'"+i.Value.Path+"'}, {path:'"+i.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}";}else{return"{parts: [{path:'"+i.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.returnPercentageChange'}";}}
function P2(k,i){var j,i3,j3,k3,l3=false;if(isNaN(+k)){return"";}if(k==0){k3=i;}else{k3=k;}i3=this.getModel('ovpCardProperties');if(i3.getProperty("/iNumberOfFractionalDigits")){j3=+(i3.getProperty("/iNumberOfFractionalDigits"));}if(i3.getProperty("/bPercentageAvailableForTarget")){l3=true;}if(i){j=i;}else{if(i3.getProperty("/sManifestTargetValue")){j=i3.getProperty("/sManifestTargetValue");}}if(!j3||j3<0){j3=0;}else if(j3>2){j3=2;}if(j){var m3=N.getFloatInstance({minFractionDigits:j3,maxFractionDigits:j3,style:"short",showScale:true,shortRefNumber:k3});if(l3){return m3.format(+(j))+" %";}else{return m3.format(+(j));}}}
function Q2(i){if(!i||!i.TrendCalculation||!i.TrendCalculation.ReferenceValue){return"";}if(!i||!i.Value||!i.Value.Path){return"";}var j=this.getModel('ovpCardProperties');var k=j.getProperty("/entityType");var i3=j.getProperty("/metaModel");if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits&&i.ValueFormat.NumberOfFractionalDigits.Int){j.setProperty("/iNumberOfFractionalDigits",i.ValueFormat.NumberOfFractionalDigits.Int);}if(i.TrendCalculation.ReferenceValue){if(i.TrendCalculation.ReferenceValue.String){j.setProperty("/sManifestTargetValue",i.TrendCalculation.ReferenceValue.String);return"{parts: [{path:'"+i.Value.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}";}if(i.TrendCalculation.ReferenceValue.Path){var j3=i3.getODataProperty(k,i.TrendCalculation.ReferenceValue.Path);if(j3["Org.OData.Measures.V1.Unit"]){var k3=j3["Org.OData.Measures.V1.Unit"];if(k3.String=="%"){j.setProperty("/bPercentageAvailableForTarget",true);}}return"{parts: [{path:'"+i.Value.Path+"'},{path:'"+i.TrendCalculation.ReferenceValue.Path+"'}], formatter: 'sap.ovp.cards.AnnotationHelper.TargetValueFormatter'}";}}}
function R2(k,i){var j,i3,j3;if(isNaN(+k)){return"";}k=+(k);j3=this.getModel('ovpCardProperties');if(j3.getProperty("/iNumberOfFractionalDigits")){j=+(j3.getProperty("/iNumberOfFractionalDigits"));}if(i){i3=+(i);}else{if(j3.getProperty("/sManifestTargetValue")){i3=+(j3.getProperty("/sManifestTargetValue"));}}if(!j||j<0){j=0;}else if(j>2){j=2;}if(i3){var k3=((k-i3)/i3);var l3=N.getPercentInstance({style:'short',minFractionDigits:j,maxFractionDigits:j,showScale:true});return l3.format(k3);}}
function S2(i){if(i&&i.GroupBy&&!(h(i.GroupBy))&&i.GroupBy[0].hasOwnProperty('PropertyPath')){return true;}else{return false;}}
function T2(j,k){var i3;for(var i=0;j&&i<j.length;i++){if(j[i].value==k){i3=j[i];break;}}return i3?i3.name:null;}
function U2(i,k){return T2(i,k);}
function V2(i,k){var j=T2(i,k);return j?j:b.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION");}
function W2(i){var j="";var k=i&&i.GroupBy;if(!k){return j;}var i3=this.getModel('ovpCardProperties').getProperty("/metaModel");var j3=this.getModel('ovpCardProperties').getProperty("/entityType");var k3;if(i.GroupBy.constructor===Array){k3=i.GroupBy;}else if(!i.GroupBy.Collection){return j;}else{k3=i.GroupBy.Collection;}var l3;e(k3,function(){l3=b3(i3,j3,this.PropertyPath);if(!l3){return;}j+=l3;j+=", ";});if(j[j.length-1]===" "&&j[j.length-2]===","){j=j.substring(0,j.length-2);}return j==""?"":b.getText("By",[j]);}
function X2(i,j,k){var i3=true;var j3=k["SelectOptions"].length-1;if(j.PropertyName.PropertyPath===k["SelectOptions"][j3].PropertyName.PropertyPath){i3=false;}j=[j];var k3=i.getSetting('ovpCardProperties');var l3=k3.getProperty("/entityType");var m3=k3.getProperty("/metaModel");var n3=B1(k3,j);if(n3.length==0){return"";}var o3;var p3;o3=n3[0].path;p3=c3(m3,l3,o3);if(p3!==o3){return"";}var q3=m3.getODataProperty(l3,j[0].PropertyName.PropertyPath)["type"];var r3=_2(n3,q3);if(i3===true){return r3+", ";}return r3;}
X2.requiresIContext=true;
function Y2(i,j,k){var i3=!(j.index===(k.length-1));var j3=i.getSetting('ovpCardProperties');var k3=j3.getProperty("/metaModel");var l3=j3.getProperty("/entityType");var m3=k3.getODataProperty(l3,k[j.index].path)["type"];var n3=_2([k[j.index]],m3);if(i3===true){return n3+", ";}return n3;}
Y2.requiresIContext=true;
function Z2(i){return i.id;}
function $2(i){return i.id;}
function _2(j,k){var i3=[];for(var i=0;i<j.length;i++){i3.push(a3(j[i],k));}return i3.join(', ');}
function a3(i,j){var k=false;var i3,j3=D.getInstance({'style':'medium'});if(j==='Edm.DateTime'){i3=j3.format(new Date(i.value1));}else if(j==='Edm.DateTimeOffset'){i3=j3.format(new Date(i.value1),true);}else{i3=i.value1;}if(i.operator[0]==="N"){k=true;}if(i.value2){if(j==='Edm.DateTime'){i3+=" - "+j3.format(new Date(i.value1));}else if(j==='Edm.DateTimeOffset'){i3+=" - "+j3.format(new Date(i.value1),true);}else{i3+=" - "+i.value1;}}if(k){i3=b.getText("kpiHeader_Filter_NotOperator",[i3]);}return i3;}
function b3(i,j,k){return d3(i,j,k,"com.sap.vocabularies.Common.v1.Label");}
function c3(i,j,k){return d3(i,j,k,"sap:text");}
function d3(i,j,k,i3){var j3=i.getODataProperty(j,k);if(!j3){L.error("No Property Found for with Name '"+k+" For Entity-Type '"+j.name+"'");return;}var k3=j3[i3];if(k3){if(i3==="com.sap.vocabularies.Common.v1.Label"){return k3.String;}return k3;}return j3.name;}
function e3(i){if(!i||!i.Value||!i.Value.Path){return"";}var j={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var k='sap.ovp.cards.AnnotationHelper.KpiValueFormatter';var i3=[i.Value.Path];return b1(i3,k,j);}
function f3(i,j){if(j.hasOwnProperty(i)){return true;}return false;}
function g3(i,j){var k;if(j[i].customDateRangeImplementation){return j[i].customDateRangeImplementation;}else if(j[i].filter){k={module:'sap.ui.comp.config.condition.DateRangeType',operations:{filter:j[i].filter}};return JSON.stringify(k);}else if(j[i].selectedValues){k={module:'sap.ui.comp.config.condition.DateRangeType',operations:{filter:[{path:'key',contains:j[i].selectedValues,exclude:j[i].exclude}]}};return JSON.stringify(k);}else if(j[i].defaultValue){k={module:'sap.ui.comp.config.condition.DateRangeType'};return JSON.stringify(k);}}
function h3(i){if(i){return undefined;}return"_BASIC";}
return{getGroupID:h3,getConditionTypeForDateProperties:g3,isDateRangeType:f3,criticalityConstants:l,TextArrangementType:T,getLabelForDataItem:p,colorPaletteForComparisonMicroChart:i1,formatField:Z,checkFilterPreference:r1,formatItems:s1,getCardSelections:y1,getCardSorters:z1,getFilters:B1,getPrimitiveValue:E1,getAnnotationLabel:U2,getApplicationName:V2,removeDuplicateDataField:H1,formatUrl:I1,getDataPointsCount:J1,getFirstDataPointValue:K1,getFirstDataFieldName:N1,getSecondDataFieldName:O1,getRequestFields:x1,getThirdDataFieldName:P1,formatDataFieldValueOnIndex:S1,formatDataPointValueOnIndex:T1,formatDataPointOrField:U1,formatsemanticObjectOfDataFieldGeneric:V1,getLabelForFirstDataPoint:Z1,formatImageUrl:$1,formatUnit:_1,formatObjectNumber:a2,formatFirstDataPointState:b2,formatFirstDataPointColor:c2,formatSecondDataPointState:d2,formatThirdDataPointState:e2,formatFirstDataPointStateForSmartField:f2,formatKPIHeaderState:h2,isFirstDataPointCriticality:i2,isFirstDataPointCriticalityForTableStatus:j2,getSortedDataFields:y,getSortedDataPoints:z,formatDataFieldValueGeneric:n2,formatDataPointValue:r2,formatDataPointStateGeneric:s2,checkCriticalityGeneric:t2,checkCriticalityGenericForTableStatus:u2,formatDataPointStateForSmartFieldGeneric:v2,hasActions:w2,isFirstDataPointPercentageUnit:x2,resolveEntityTypePath:y2,resolveParameterizedEntitySet:C2,getAssociationObject:D2,semanticObjectOfFirstDataField:F2,semanticObjectOfSecondDataField:G2,isFirstContactAnnotation:I2,getAggregateNumber:J2,KpiValueFormatter:L2,kpiValueCriticality:g2,formThePathForAggregateNumber:K2,formThePathForTrendIcon:M2,formPathForPercentageChange:O2,TargetValueFormatter:P2,formPathForTargetValue:Q2,returnPercentageChange:R2,isPresentationVarientPresent:S2,listGroupBy:W2,formTheFilterByString:X2,formTheFilterByStringNotFromSelVar:Y2,formTheIdForFilter:Z2,formTheIdForFilterNotFromSelVar:$2,_criticality2state:t,_calculateCriticalityState:w,_calculateTrendDirection:x,_getPropertiesFromBindingString:v1,sortCollectionByImportance:K,checkNavTargetForContactAnno:p2,checkForContactAnnotation:q2,getKPIHeaderAggregateNumber:e3,formatColor:o1,formatTrendIcon:N2,formatNumberCalculation:c1,formatCurrency:e1,formatDate:d1};},true);
sap.ui.predefine('sap/ovp/cards/AppSettingsUtils',["sap/m/Dialog","sap/m/Button","sap/ui/model/json/JSONModel","sap/ui/core/mvc/ViewType","sap/ui/model/resource/ResourceModel","sap/ovp/app/resources","sap/base/util/merge"],function(D,B,J,V,R,O,m){"use strict";var a={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oOvpResourceBundle:sap.ui.getCore().getLibraryResourceBundle("sap.ovp"),getDialogBox:function(c){return new Promise(function(r,b){var o,A,d,e;if(!this.dialogBox){this.oSaveButton=new B({text:O&&O.getText("save"),type:"Emphasized"});var C=new B({text:O&&O.getText("cancelBtn")});this.oResetButton=new B({text:O&&O.getText("resetButton")});this.dialogBox=new D({title:O&&O.getText("settingsDialogTitle"),buttons:[this.oSaveButton,C,this.oResetButton],afterClose:function(h){this.dialogBox.destroyContent();}.bind(this)});this.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.dialogBox.setBusyIndicatorDelay(0);C.attachPress(function(h){this.dialogBox.close();}.bind(this));}if(c.getParent()){o=c.getParent().getModel("ui").getData();A=m({},o);var M=c.getModel(A.globalFilterModel),f=M.getMetaModel(),E=f.getODataEntityContainer().entitySet;A["allEntityTypes"]=[];for(var i=0;E&&i<E.length;i++){var s=E[i].entityType;A["allEntityTypes"].push({name:f.getODataEntityType(s).name});}if(A.globalFilterEntityType){A.showGlobalFilters=true;}else{A.showGlobalFilters=false;}if(!A.containerLayout){A.containerLayout="fixed";}e=new J(A);d=new sap.ui.core.mvc.XMLView("appSettingsView",{viewName:"sap.ovp.cards.rta.AppSettingsDialog",type:V.XML});d.setModel(e);var g=this.oOvpResourceBundle?O.oResourceModel:null;d.setModel(g,"ovpResourceModel");this.dialogBox.addContent(d);d.loaded().then(function(v){r(this.dialogBox);}.bind(this));}}.bind(this));}};return a;},true);
sap.ui.predefine('sap/ovp/cards/CommonUtils',["sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/Device","sap/base/util/UriParameters","sap/base/util/each","sap/ui/model/json/JSONModel","sap/ovp/cards/ovpLogger"],function(O,D,U,e,J,o){"use strict";var l=new o("OVP.cards.CommonUtils");return{app:undefined,navigationHandler:undefined,supportedCardTypes:["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"],ovpConstantModel:new J({dontIncludeUOM:true,firstDataPointIndex:0,secondDataPointIndex:1,thirdDataPointIndex:2,fourthDataPointIndex:3,fifthDataPointIndex:4,sixthDataPointIndex:5,firstDataFieldIndex:0,secondDataFieldIndex:1,thirdDataFieldIndex:2,fourthDataFieldIndex:3,fifthDataFieldIndex:4,sixthDataFieldIndex:5}),deviceModel:new J(D).setDefaultBindingMode("OneWay"),checkIfCardTypeSupported:function(t){return(this.supportedCardTypes.indexOf(t)!==-1);},enable:function(a,n){this.app=a;this.navigationHandler=n;},getApp:function(){return this.app;},getNavigationHandler:function(){return this.navigationHandler;},createKeyForCB:function(t,T){return t.indexOf(T)+1;},createCardComponent:function(v,m,c,s,C){return O.createCardComponent(v,m,c,s,C);},_getLayer:function(){var u=new U(window.location.href);var a=u.mParams["sap-ui-layer"];return a&&a[0];},_getLayerNamespace:function(){var L=this._getLayer();if(!L){return"customer";}return L.toLowerCase();},getUnitColumn:function(m,E,f){var t,p=E.property;var P,s;for(var i=0,a=p.length;i<a;i++){if(p[i].name!==m){continue;}if(p[i].hasOwnProperty("Org.OData.Measures.V1.ISOCurrency")){P=p[i]["Org.OData.Measures.V1.ISOCurrency"].Path;s=p[i]["Org.OData.Measures.V1.ISOCurrency"].String;if(P){return P;}else{return(f?s:"");}}if(p[i].hasOwnProperty("Org.OData.Measures.V1.Unit")){P=p[i].hasOwnProperty("Org.OData.Measures.V1.Unit").Path;s=p[i]["Org.OData.Measures.V1.Unit"].String;if(P){t=P;}else{t=f?s:"";}if(t&&t!="%"){return t;}else{return null;}}if(p[i].hasOwnProperty("sap:unit")){return p[i]["sap:unit"];}break;}return null;},onHeaderClicked:function(){},onContentClicked:function(E){},getContentDensityClass:function(){if(this._sContentDensityClass===undefined){if(document.body.classList.contains("sapUiSizeCozy")||document.body.classList.contains("sapUiSizeCompact")){if(document.body.classList.contains("sapUiSizeCozy")===true){this._sContentDensityClass="sapUiSizeCozy";}else if(document.body.classList.contains("sapUiSizeCompact")===true){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="";}}else if(!D.support.touch){this._sContentDensityClass="sapUiSizeCompact";}else{this._sContentDensityClass="sapUiSizeCozy";}}return this._sContentDensityClass;},_setCardpropertyDensityAttribute:function(){var c=this.getContentDensityClass();if(c==="sapUiSizeCompact"){return"compact";}else if(c==="sapUiSizeCozy"){return"cozy";}else if(!D.support.touch){return"compact";}else{return"cozy";}},getPixelPerRem:function(){var f=parseFloat(getComputedStyle(document.documentElement).fontSize);return f;},showODataErrorMessages:function(E){var m=[],a,r,b="";if(E&&E.responseText){var R=E.responseText;if(R){try{r=JSON.parse(R);}catch(c){l.error("Failed parsing response as JSON: "+R);}if(r&&r.error){a=r.error;}}}if(a&&a.innererror&&a.innererror.errordetails){m=a.innererror.errordetails;}if(a&&a.message&&Array.isArray(m)){m.unshift({message:a.message.value,severity:"error"});}if(m&&m.length>0){var A={};e(m,function(i,M){var s=M.message;if(s.endsWith(".")){s=s.substr(0,s.length-1);}if(!A[s]){A[s]=true;b=b+s+" ";}});}return b;},isODataV4:function(m){return(m&&m.getODataVersion&&m.getODataVersion()=="4.0")||false;}};},true);
sap.ui.predefine('sap/ovp/cards/Filterhelper',["sap/base/util/isEmptyObject","sap/ui/model/odata/v2/ODataModel","sap/ui/model/odata/ODataMetadata","sap/ui/model/Filter","sap/ovp/cards/v4/V4AnnotationHelper"],function(a,O,b,F,V){"use strict";
function g(c){var d;if(c){if(c.settings.tabs){var i=0;var s=c.settings.selectedKey;if(s&&c.settings.tabs.length>=s){i=s-1;}d=c.settings.tabs[i]['selectionAnnotationPath'];}else{d=c.settings['selectionAnnotationPath'];}}return d;}
return{_getEntityRelevantFilters:function(e,f){var r=[];if(f.length>0&&e){var R=this._checkRelevantFiltersRecursive(e,f[0]);if(R){r.push(R);}}return r;},_checkRelevantFiltersRecursive:function(e,f){if(!f._bMultiFilter){f.sPath=f.sPath.split('/').pop();var m=this._getPropertyMapping(e,f.sPath);if(m){f.sPath=m;return f;}}else{var d=f.aFilters;var s,S=[];if(d){for(var i=0;i<d.length;i++){s=this._checkRelevantFiltersRecursive(e,d[i]);if(s){S.push(s);}}if(S.length>0){return(new F(S,f.bAnd));}}}},_getPropertyMapping:function(e,t){if(t in e){return t;}},mergeFilters:function(e,s){if(s&&s.length===0&&s&&e.length===0){return[];}var f=[];if(s&&s.length>0){var t=[];var p={};s.forEach(function(c){if(p[c.path]){p[c.path].push(new F(c));}else{p[c.path]=[new F(c)];}});Object.keys(p).forEach(function(c){t.push(new F({filters:p[c],and:false}));});f.push(new F({filters:t,and:true}));}if(!a(e[0])){f.push(e[0]);}return new F({filters:f,and:true});},getSelectionVariantFilters:function(c,o,e){var p=o.getData(),d=c.filter(function(f){return(f.id===p.cardId);})[0],s="@"+g(d),S=e[s];return S?V.getFilters(o,S):[];},formatLiteral:function(v,t){var r=/'/g;if(v===undefined){throw new Error("Illegal value: undefined");}if(v===null){return"null";}switch(t){case"Edm.Binary":return"binary'"+v+"'";case"Edm.Boolean":case"Edm.Byte":case"Edm.Double":case"Edm.Int16":case"Edm.Int32":case"Edm.SByte":case"Edm.Single":return String(v);case"Edm.Date":case"Edm.DateTimeOffset":case"Edm.Decimal":case"Edm.Guid":case"Edm.Int64":case"Edm.TimeOfDay":return v;case"Edm.Duration":return"duration'"+v+"'";case"Edm.String":return"'"+v.replace(r,"''")+"'";default:throw new Error("Unsupported type: "+t);}}};},true);
sap.ui.predefine('sap/ovp/cards/MetadataAnalyser',[],function(){"use strict";return{getPropertyOfEntitySet:function(m,e){if(!m||!m.getMetaModel){throw new Error("OData Model needs to be passed as an argument");}var M=m.getMetaModel();var E=M.getODataEntitySet(e);var o=M.getODataEntityType(E.entityType);return o.property?Array.from(o.property):[];},getParametersByEntitySet:function(m,e){if(!m||!m.getMetaModel){throw new Error("OData Model needs to be passed as an argument");}var M=m.getMetaModel();var r={entitySetName:null,parameters:[],navPropertyName:null};var E=M.getODataEntitySet(e);var o=M.getODataEntityType(E.entityType);var n=o.navigationProperty;if(!n){return r;}n.filter(function(N){var a=M.getODataAssociationEnd(o,N.name);var b=M.getODataEntityType(a.type);if(b["sap:semantics"]==="parameters"&&b.key){r.entitySetName=M.getODataAssociationSetEnd(o,N.name).entitySet;for(var i=0;i<b.key.propertyRef.length;i++){r.parameters.push(b.key.propertyRef[i].name);}var s=b.navigationProperty;var B=s.some(function(S){var c=M.getODataAssociationEnd(b,S.name).type;c===E.entityType?r.navPropertyName=S.name:Function.prototype();return r.navPropertyName;});return B&&r.navPropertyName&&r.entitySetName;}return false;});return r;},checkAnalyticalParameterisedEntitySet:function(m,e){if(!m||!m.getMetaModel){throw new Error("OData Model needs to be passed as an argument");}var M=m.getMetaModel();var E=M.getODataEntitySet(e);var o=M.getODataEntityType(E.entityType);if(o['sap:semantics']&&o['sap:semantics']==='aggregate'){return true;}return false;}};});
sap.ui.predefine('sap/ovp/cards/OVPCardAsAPIUtils',["sap/ovp/cards/ovpLogger"],function(o){"use strict";var l=new o("OVP.cards.OVPCardsAsAPIUtils");var s=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line","sap.ovp.cards.v4.charts.analytical","sap.ovp.cards.v4.charts.smart.chart","sap.ovp.cards.v4.charts.bubble","sap.ovp.cards.v4.charts.donut","sap.ovp.cards.v4.charts.line","sap.ovp.cards.error"];
function g(){return s;}
function e(m,d,E){var f={};f.message=m;if(E){f._oError=E;f.getActualError=function(){return f._oError;};}l.error(f.message);d(f);}
function c(C){var d=false;var f=C.getOwnerComponent();if(!!f){var h=f.getComponentData();if(!!h&&h.ovpCardsAsApi){d=true;}}return d;}
function r(C,d){var m=d.manifest;var f;for(var h in m.cards){f=h;}var i=m.cards[f];if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.settings.chartAnnotationPath=C.chartAnnotationPath;i.settings.navigation=C.navigation;}if(C.entitySet){i.settings.entitySet=C.entitySet;}i.settings.annotationPath=C.annotationPath;i.settings.dynamicSubtitleAnnotationPath=C.dynamicSubtitleAnnotationPath;i.settings.presentationAnnotationPath=C.presentationAnnotationPath;i.settings.selectionAnnotationPath=C.selectionAnnotationPath;i.settings.selectionPresentationAnnotationPath=C.selectionPresentationAnnotationPath;i.settings.kpiAnnotationPath=C.kpiAnnotationPath;i.settings.dataPointAnnotationPath=C.dataPointAnnotationPath;i.settings.identificationAnnotationPath=C.identificationAnnotationPath;i.settings.headerAnnotationPath=C.headerAnnotationPath;i.settings.selectedKey=C.selectedKey;if(i){m.cards[f]=i;O.createCardComponent(d.parentView,m,d.containerId,d.selectionVariant);}}
function _(C){var d=true;if(C.template==="sap.ovp.cards.error"||((C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist")&&C.settings.staticContent)){d=false;}return d;}
function a(C,S){var f=[],p=[],i,j;var d=S.getSelectOptionsPropertyNames();for(i=0;i<d.length;i++){var h=S.getSelectOption(d[i]);if(h&&h.length>0){for(j=0;j<h.length;j++){if(h[j]){var F={path:d[i],operator:h[j].Option,value1:h[j].Low,sign:h[j].Sign};if(h[j].High){F.value2=h[j].High;}f.push(F);}}}}var P=S.getParameterNames();for(i=0;i<P.length;i++){var k={path:P[i],value:S.getParameter(P[i])};p.push(k);}C.settings.filters=f;C.settings.parameters=p;return C;}
function b(v,m,C,S,f){return new Promise(function(d,h){var i,j,M="";if(!!m){for(var k in m.cards){if(m.cards.hasOwnProperty(k)){i=m.cards[k];j=k;}}if(!!i&&!!j){if(!!i.template&&!!i.settings&&(!!i.model||!_(i))){if(s.indexOf(i.template)!==-1){if(!!C&&typeof C==='string'){if(!!v){var n=(!i.model)?undefined:v.getModel(i.model);var p;if(!_(i)){p=Promise.resolve();}else{if(n&&n.getODataVersion&&n.getODataVersion()=="4.0"){p=n.getMetaModel().requestObject("/"+i.settings.entitySet);}else{p=n.getMetaModel().loaded();}}p.then(function(){var I=false;if(S){i=a(i,S);I=true;}i.settings.ignoreSelectionVariant=I;var q={name:i.template,componentData:{model:n,ovpCardsAsApi:true,parentView:v,manifest:m,containerId:C,selectionVariant:S,fnCheckNavigation:f,showDateInRelativeFormat:m.showDateInRelativeFormat,disableTableCardFlexibility:m.disableTableCardFlexibility,template:i.template,i18n:v.getModel("@i18n"),cardId:j,settings:i.settings,appComponent:null,mainComponent:null}};sap.ui.core.Component.create(q).then(function(t){var u=v.byId(C);if(!!u){var w=u.getComponentInstance();t.setModel(n);u.setComponent(t);if(w){setTimeout(function(){w.destroy();},0);}d(true);}else{M="Component Container '"+C+"' is not present in the current View";e(M,h);}},function(E){M="Component creation failed";e(M,h,E);});},function(E){M="MetaModel was not loaded";e(M,h,E);});}else{M="First argument oView is null";e(M,h);}}else{M="ContainerId should be of type string and not null";e(M,h);}}else{M=i.template+" card type is not supported in the API";e(M,h);}}else{M="Cards template or model or settings are not defined";e(M,h);}}else{M="Cards manifest entry or cardId is null";e(M,h);}}else{M="Second argument oManifest is null";e(M,h);}});}
var O={createCardComponent:b,recreateCard:r,checkIfAPIIsUsed:c,getSupportedCardTypes:g};return O;},true);
sap.ui.predefine('sap/ovp/cards/PersonalizationUtils',['sap/ovp/cards/CommonUtils','sap/ui/fl/write/api/ControlPersonalizationWriteAPI','sap/ovp/cards/ovpLogger'],function(C,a,o){"use strict";var l=new o("OVP.cards.PersonanlizationUtils");
function b(i,j){j.every(function(k){if(k.id===i.cardId){k.selectedKey=i.selectedKey;return false;}return true;});return j;}
function c(i,j){j.every(function(k){if(k.id===i.cardId){k.visibility=i.visibility;return false;}return true;});return j;}
function d(i,j,v){var M=C.getApp(),k=M._getCardId(i.id);j.every(function(n){if(n.id===k){n.visibility=v;return false;}return true;});return j;}
function e(i,j){var I=[];var v,t;v=j.filter(function(k){return k.visibility;});j.forEach(function(k,n){if(!k.visibility){I.push({card:k,index:n});}});if(!v[i.oldPosition]||!v[i.position]){return j;}t=v[i.oldPosition];v[i.oldPosition]=v[i.position];v[i.position]=t;I.forEach(function(k){v.splice(k.index,0,k.card);});j=v;return j;}
function f(i,j){j.every(function(k){if(k.id===i.cardId){Object.keys(i.dashboardLayout).forEach(function(K){if(!k.dashboardLayout[K]){k.dashboardLayout[K]={};}if(i.dashboardLayout[K].rowSpan){k.dashboardLayout[K].rowSpan=i.dashboardLayout[K].rowSpan;}if(i.dashboardLayout[K].colSpan){k.dashboardLayout[K].colSpan=i.dashboardLayout[K].colSpan;}if(i.dashboardLayout[K].maxColSpan){k.dashboardLayout[K].maxColSpan=i.dashboardLayout[K].maxColSpan;}if(i.dashboardLayout[K].noOfItems){k.dashboardLayout[K].noOfItems=i.dashboardLayout[K].noOfItems;}if(i.dashboardLayout[K].hasOwnProperty('autoSpan')){k.dashboardLayout[K].autoSpan=i.dashboardLayout[K].autoSpan;}if(i.dashboardLayout[K].row){k.dashboardLayout[K].row=i.dashboardLayout[K].row;}if(i.dashboardLayout[K].column){k.dashboardLayout[K].col=i.dashboardLayout[K].column;}if(i.dashboardLayout[K].hasOwnProperty('showOnlyHeader')){k.dashboardLayout[K].showOnlyHeader=i.dashboardLayout[K].showOnlyHeader;}});return false;}return true;});return j;}
function m(i,D){if(!Array.isArray(D)||!i){return i;}var M=[];i.forEach(function(q){var t={};Object.keys(q).forEach(function(K){t[K]=q[K];});M.push(t);});var j={VENDOR:[],CUSTOMER_BASE:[],CUSTOMER:[],USER:[]};var k=D.reduce(function(j,q){j[q.getLayer()].push(q);return j;},j);var n=[].concat(k["VENDOR"],k["CUSTOMER_BASE"],k["CUSTOMER"],k["USER"]);n.forEach(function(q){switch(q.getChangeType()){case"viewSwitch":M=b(q.getContent(),M);break;case"visibility":M=c(q.getContent(),M);break;case"hideCardContainer":M=d(q.getContent(),M,false);break;case"unhideCardContainer":M=d(q.getContent(),M,true);break;case"position":M=e(q.getContent(),M);break;case"dragOrResize":M=f(q.getContent(),M);break;default:break;}});return M;}
function g(M,D){var i=M.filter(function(j){var H=false;D.forEach(function(k){if(j.id===k.id){H=true;return;}});return!H;});return D.concat(i);}
function s(i,v){var M=C.getApp();if(M.bRTAActive){return;}var L=v?v.byId("ovpLayout"):null;var j=[],k=[],n=[];if(!Array.isArray(i)){i=[i];}i.forEach(function(O){var q=O.content.cardId;O.jsOnly=true;j.push({selectorElement:v.byId(q),changeSpecificData:O});k.push(v.byId(q));n.push(O.changeType);});a.isCondensingEnabled().then(function(q){if(q){return h(j,L);}else{return r(k,n).finally(function(){return h(j,L);});}}).then(function(){l.info("Personalization changes have been saved in lrep backend");}).catch(function(E){l.error("Personalization changes were not saved",E);});}
function r(i,j){return a.reset({selectors:i,changeTypes:j});}
function h(i,L){return a.add({changes:i},true).then(function(i){return a.save({changes:i,selector:L});});}
var p={mergeChanges:m,addMissingCardsFromManifest:g,savePersonalization:s};return p;},true);
sap.ui.predefine('sap/ovp/cards/SettingsUtils',["sap/m/Dialog","sap/m/Button","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/m/MessagePopover","sap/m/MessagePopoverItem","sap/m/Link","sap/m/MessageBox","sap/ovp/cards/AnnotationHelper","sap/ui/core/mvc/ViewType","sap/ui/model/json/JSONModel","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/merge","sap/ovp/cards/ovpLogger"],function(D,B,P,O,S,C,a,M,b,L,c,A,V,J,d,e,m,o){"use strict";var r=d;var l=new o("OVP.cards.SettingsUtils");
function f(i,q,k1){var l1=i.getComponentInstance(),m1=l1.getComponentData(),n1=m1.appComponent,o1=m1.mainComponent,p1=(k1)?"":m1.cardId,q1=p1+"Dialog",r1=(k1)?"":m1.modelName,s1=(!r1)?undefined:n1.getModel(r1),t1=q.getModel().getData(),u1={cards:{}};u1.cards[q1]={template:t1.template,settings:t1};if(j1.bNewKPICardFlag){var v1=t1.selectedKPI;s1=new sap.ui.model.odata.v2.ODataModel(v1.ODataURI,{'annotationURI':v1.ModelURI,'defaultCountMode':sap.ui.model.odata.CountMode.None});r1=C._getLayerNamespace()+".kpi_card_model_"+j(v1.ODataURI);}if(s1&&!!r1){u1.cards[q1].model=r1;q.setModel(s1,r1);}u1.cards[q1]=o1._getTemplateForChart(u1.cards[q1]);q.getController()._oManifest=u1;if(j1.bNewKPICardFlag){s1.getMetaModel().loaded().then(function(){var w1=O.createCardComponent(q,u1,"dialogCard");w1.then(function(){q.setBusy(false);}).catch(function(){n(u1.cards[q1].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");k(q,u1,q1);});},function(w1){l.error(w1);});s1.attachMetadataFailed(function(){n(u1.cards[q1].settings,"OVP_KEYUSER_METADATA_FAILURE");k(q,u1,q1);});}else{O.createCardComponent(q,u1,"dialogCard");}}
function s(i,q){if(!this.oNewDataSources[i]){this.oNewDataSources[i]={uri:q};}}
function g(i){if(this.oNewDataSources[i]){delete this.oNewDataSources[i];}}
function h(i){var q=this.oAppComponent.getMetadata(),k1=q.getManifestEntry("sap.app").dataSources;if(this.oNewDataSources[i]){return this.oNewDataSources;}return k1;}
function j(i){var q=i.split("/");return q[q.length-1]?q[q.length-1]:q[q.length-2];}
function k(i,q,k1){q.cards[k1].template="sap.ovp.cards.error";q.cards[k1].model=undefined;var l1=O.createCardComponent(i,q,"dialogCard");var m1=i.getController();l1.then(function(){i.setBusy(false);m1.setBusy(false);}).catch(function(){i.setBusy(false);m1.setBusy(false);});}
function n(i,q){if(i){i.errorStatusText=d.getText(q);}}
function p(i){if(i.indexOf('#')!==-1){return i.split('#')[1];}else{return"Default";}}
function t(i,q){if(i){var k1,l1,m1;if(i.indexOf("{")===0&&i.indexOf("}")===i.length-1){i=i.slice(1,-1);if(i.indexOf(">")!=-1){k1=i.split(">");m1=k1[0];l1=k1[1];}else if(i.indexOf("&gt;")!=-1){k1=i.split("&gt;");m1=k1[0];l1=k1[1];}if(!!l1&&m1==="@i18n"&&j1.oi18nModel){return j1.oi18nModel.getProperty(l1);}else{return i;}}else{return i;}}else{return q;}}
function u(i,q,k1,l1){if(q[i]&&q[i][k1]){var m1=typeof q[i][k1]==="string"?q[i][k1]:q[i][k1].String;return t(m1,l1);}else{return l1;}}
function v(i,q){var k1=p(q),l1=d.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[k1]);l1=(l1)?l1:k1;if(q.indexOf(",")!==-1){q=q.split(",")[0];}if(q.indexOf(".Identification")!==-1){if(i[q]){var m1=A.sortCollectionByImportance(i[q]);for(var n1=0;n1<m1.length;n1++){var o1=m1[n1];if(o1.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(o1&&o1["Label"]){return t(o1["Label"].String,l1);}else{return o1["SemanticObject"].String+"-"+o1["Action"].String;}}if(o1.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o1&&o1["Label"]){return t(o1["Label"].String,l1);}else{return o1["Url"].String;}}}}return d.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION");}else if(q.indexOf(".LineItem")!==-1){var p1=A.sortCollectionByImportance(i[q]);p1.forEach(function(s1,n1){if(s1["RecordType"]&&s1["RecordType"].indexOf(".DataField")!==-1&&s1["Label"]){p1[n1]["Label"]={String:t(s1["Label"].String,l1)};}});return p1;}else if(q.indexOf(".HeaderInfo")!==-1){if(i[q]&&i[q]["Description"]&&i[q]["Description"].Label){return t(i[q]["Description"].Label.String,l1);}else{return l1;}}else if(q.indexOf(".PresentationVariant")!==-1||q.indexOf(".SelectionVariant")!==-1||q.indexOf(".SelectionPresentationVariant")!==-1){return u(q,i,"Text",l1);}else if(q.indexOf(".DataPoint")!==-1){return u(q,i,"Title",l1);}else if(q.indexOf(".Chart")!==-1){return u(q,i,"Description",l1);}else if(q.indexOf(".FieldGroup")!==-1){return u(q,i,"Label",l1);}else{var q1="";if(k1!=="Default"){q1="#"+k1;}var r1="com.sap.vocabularies.Common.v1.Label"+q1;if(i[q]&&i[q][r1]){return t(i[q][r1].String,l1);}else{return l1;}}}
function w(q,k1){var l1=p(k1),m1=d.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[l1]);m1=(m1)?m1:l1;if(k1.indexOf(",")!==-1){k1=k1.split(",")[0];}if(k1.indexOf(".Identification")!==-1){if(q[k1]){var n1=A.sortCollectionByImportance(q[k1]);for(var i=0;i<n1.length;i++){var o1=n1[i];if(o1.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){if(o1&&o1["Label"]){return t(o1["Label"],m1);}else{return o1["SemanticObject"]+"-"+o1["Action"];}}if(o1.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o1&&o1["Label"]){return t(o1["Label"],m1);}else{return o1["Url"];}}}}return d.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION");}else if(k1.indexOf(".LineItem")!==-1){var n1=A.sortCollectionByImportance(q[k1]);n1.forEach(function(r1,i){if(r1["$Type"]&&r1["$Type"].indexOf(".DataField")!==-1&&r1["Label"]){n1[i]["Label"]=t(r1["Label"],m1);}});return n1;}else if(k1.indexOf(".HeaderInfo")!==-1){if(q[k1]&&q[k1]["Description"]&&q[k1]["Description"].Label){return t(q[k1]["Description"].Label,m1);}else{return m1;}}else if(k1.indexOf(".PresentationVariant")!==-1||k1.indexOf(".SelectionVariant")!==-1||k1.indexOf(".SelectionPresentationVariant")!==-1){return u(k1,q,"Text",m1);}else if(k1.indexOf(".DataPoint")!==-1){return u(k1,q,"Title",m1);}else if(k1.indexOf(".Chart")!==-1){return u(k1,q,"Description",m1);}else if(k1.indexOf(".FieldGroup")!==-1){return u(k1,q,"Label",m1);}else{var p1="";if(l1!=="Default"){p1="#"+l1;}var q1="com.sap.vocabularies.Common.v1.Label"+p1;if(q[k1]&&q[k1][q1]){return t(q[k1][q1],m1);}else{return m1;}}}
function x(i,q,k1){switch(q){case"cardPreview":return(O.getSupportedCardTypes().indexOf(i)!==-1);case"noOfRows":case"noOfColumns":case"stopResizing":var l1=["sap.ovp.cards.stack"];return(l1.indexOf(i)===-1);case"listType":case"listFlavor":var m1=["sap.ovp.cards.list","sap.ovp.cards.v4.list"];return(m1.indexOf(i)!==-1);case"listFlavorForLinkList":var n1=["sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return(n1.indexOf(i)!==-1);case"isViewSwitchSupportedCard":case"showViewSwitch":case"kpiHeader":var o1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return(o1.indexOf(i)!==-1);case"chartSPVorKPI":case"chart":var p1=["sap.ovp.cards.charts.analytical","sap.ovp.cards.charts.smart.chart","sap.ovp.cards.charts.bubble","sap.ovp.cards.charts.donut","sap.ovp.cards.charts.line"];return(p1.indexOf(i)!==-1);case"sortOrder":case"sortBy":case"lineItem":if(!k1){var q1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return(q1.indexOf(i)!==-1);}else{var q1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return(q1.indexOf(i)!==-1);}break;case"identification":var r1=["sap.ovp.cards.stack"];return(r1.indexOf(i)!==-1);case"addViewSwitch":var s1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];return(s1.indexOf(i)!==-1);case"addKPIHeader":var s1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.charts.analytical"];return(s1.indexOf(i)!==-1);case"selecionOrPresentation":var t1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist"];return(t1.indexOf(i)!==-1);case"addODataSelect":var u1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.stack"];return(u1.indexOf(i)!==-1);case"addCustomActions":var u1=["sap.ovp.cards.stack"];return(u1.indexOf(i)!==-1);case"setCardProperties":if(k1){var q1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table","sap.ovp.cards.linklist","sap.ovp.cards.v4.linklist","sap.ovp.cards.stack"];return(q1.indexOf(i)!==-1);}break;default:break;}}
function y(i){return!!i.kpiAnnotationPath;}
function z(i){return!!i.selectionPresentationAnnotationPath;}
function E(i){return z(i)||y(i);}
function F(i){return i.substring(i.lastIndexOf("_")+1,i.length).indexOf("C")!==-1;}
function G(i){if(i.NewKPICard){return i.NewKPICard;}else if(i.selectedKPICardID){return i.selectedKPICardID.indexOf("newKPICard")!==-1;}else{return false;}}
function H(i,q,k1,l1,m1){var n1=true;var o1=true;var p1=false;var q1=false;var r1=false;if(k1){if(i.mainViewSelected){o1=false;}else{n1=false;}}if(i.addNewCard&&i.model){var q1=true;if(i.template){r1=true;if(i.entitySet){p1=true;}}}var s1;switch(q){case"cardPreview":s1=x(i.template,"cardPreview");break;case"noOfRows":case"noOfColumns":case"stopResizing":s1=n1&&x(i.template,q);break;case"title":s1=n1;break;case"dynamicSwitchSubTitle":s1=n1&&!!i.dynamicSubTitle;break;case"dynamicSwitchStateSubTitle":s1=!!i.dynamicSubtitleAnnotationPath;break;case"subTitle":if(!i.addNewCard){if(!i.subTitle){i.subTitle=" ";s1=true;}else{s1=n1&&!i.dynamicSubtitleAnnotationPath;}}else{s1=n1;}break;case"dynamicSubTitle":s1=n1&&!!i.dynamicSubtitleAnnotationPath;break;case"valueSelectionInfo":if(!i.addNewCard){if(!i.valueSelectionInfo){i.valueSelectionInfo=" ";}s1=n1&&(x(i.template,"kpiHeader")&&!!i.dataPointAnnotationPath)&&!G(i);}else{s1=n1&&q1&&r1&&p1&&i.addKPIHeaderCheckBox&&x(i.template,"addKPIHeader");}break;case"dataPoint":if(!i.addNewCard){s1=o1&&!y(i)&&(x(i.template,"kpiHeader")&&!!i.dataPointAnnotationPath);}else{s1=o1&&q1&&r1&&p1&&i.addKPIHeaderCheckBox&&x(i.template,"addKPIHeader");}break;case"listType":case"listFlavor":case"listFlavorForLinkList":if(!i.addNewCard){s1=n1&&x(i.template,q);}else{s1=n1&&q1&&r1&&p1&&x(i.template,q);}break;case"identification":if(!i.addNewCard){s1=o1&&(!i.staticContent)&&!x(i.template,q);}else{s1=o1&&q1&&r1&&p1&&!x(i.template,q);}break;case"selectionPresentationVariant":if(!i.addNewCard){s1=o1&&z(i)&&!y(i)&&x(i.template,"kpiHeader");}else{s1=o1&&q1&&r1&&p1&&x(i.template,"selecionOrPresentation")&&!!(Array.isArray(i.selectionPresentationVariant)&&i.selectionPresentationVariant.length);}break;case"KPI":case"dataPointSelectionMode":if(!i.addNewCard){s1=o1&&y(i)&&!z(i)&&x(i.template,"chart")&&!G(i);}else{s1=o1&&q1&&r1&&p1&&x(i.template,"chart");}break;case"presentationVariant":case"selectionVariant":if(!i.addNewCard){s1=o1&&!E(i)&&(!i.staticContent)&&x(i.template,"kpiHeader");}else{s1=o1&&q1&&r1&&p1&&!(Array.isArray(i.selectionPresentationVariant)&&i.selectionPresentationVariant.length)&&x(i.template,"selecionOrPresentation");}break;case"kpiHeader":s1=n1&&!y(i)&&x(i.template,q);break;case"lineItem":case"chart":if(!i.addNewCard){s1=o1&&!E(i)&&x(i.template,q);}else{s1=o1&&q1&&r1&&p1&&x(i.template,q,i.addNewCard);}break;case"chartSPVorKPI":s1=o1&&E(i)&&!G(i)&&x(i.template,q);break;case"presentationVariantSPVorKPI":case"selectionVariantSPVorKPI":s1=o1&&E(i)&&!G(i)&&(!i.staticContent)&&x(i.template,"kpiHeader");break;case"showViewName":s1=k1&&o1;break;case"showDefaultView":if(k1&&o1){if(i.defaultViewSelected!=i.selectedKey){s1=true;}}else{s1=false;}break;case"showEntitySet":if(k1&&o1){if(i.selectedKey>0&&i.tabs[i.selectedKey-1].entitySet){s1=true;}else{s1=false;}}else{s1=false;}break;case"showMore":case"removeVisual":case"lineItemSubTitle":case"lineItemTitle":case"staticLink":case"links":var t1=((i.template==="sap.ovp.cards.linklist"||i.template==="sap.ovp.cards.v4.linklist")&&!!i.staticContent);if(q==="staticLink"){s1=(t1&&!!i.staticContent[l1].targetUri);}else if(q==="links"){s1=(t1&&!!i.staticContent[l1].semanticObject);}else if(q==="removeVisual"){s1=(t1&&(!!i.staticContent[l1].targetUri||!!i.staticContent[l1].semanticObject));}else{s1=t1;}break;case"selectCardType":s1=n1&&q1;break;case"addKPIHeader":s1=n1&&q1&&r1&&x(i.template,q);break;case"setEntitySet":s1=o1&&q1&&r1;break;case"setCardProperties":s1=n1&&q1&&r1&&p1&&x(i.template,q,i.addNewCard);break;case"setGeneralCardProperties":s1=n1&&q1&&r1&&p1;break;case"setAnnotationCardProperties":s1=o1&&q1&&r1&&p1;break;case"subTitleRequired":s1=q1&&r1&&p1&&i.addKPIHeaderCheckBox;break;case"addODataSelect":if(!i.addNewCard){s1=o1&&x(i.template,q);}else{s1=o1&&q1&&r1&&p1&&x(i.template,q);}break;case"isViewSwitchSupportedCard":case"showViewSwitch":s1=q1&&r1&&(p1||!!i.showViewSwitchButton)&&x(i.template,q);break;case"dataSource":s1=n1;break;case"dataSourceExisting":s1=!i.newDataSource;break;case"dataSourceNew":s1=i.newDataSource;break;case"addCustomActions":s1=n1&&x(i.template,q);break;default:break;}return s1;}
function I(i){var q=false;this.oVisibility.viewSwitchEnabled=false;this.oVisibility.showViewSwitch=false;if(!this.bAddNewCardFlag){if(x(i.template,"isViewSwitchSupportedCard")&&!G(i)){if(i.tabs&&i.tabs.length){q=true;this.oVisibility.showViewSwitch=true;}this.oVisibility.viewSwitchEnabled=true;}}else{if(i.tabs&&i.tabs.length){q=true;this.oVisibility.showViewSwitch=H(i,"showViewSwitch");}this.oVisibility.viewSwitchEnabled=H(i,"isViewSwitchSupportedCard");}this.oVisibility.cardPreview=H(i,"cardPreview");this.oVisibility.stopResizing=H(i,"stopResizing",q);this.oVisibility.noOfRows=H(i,"noOfRows",q);this.oVisibility.noOfColumns=H(i,"noOfColumns",q);this.oVisibility.title=H(i,"title",q);this.oVisibility.subTitle=H(i,"subTitle",q);this.oVisibility.valueSelectionInfo=H(i,"valueSelectionInfo",q);this.oVisibility.listType=H(i,"listType",q);this.oVisibility.listFlavor=H(i,"listFlavor",q);this.oVisibility.listFlavorForLinkList=H(i,"listFlavorForLinkList",q);if((i.template==="sap.ovp.cards.linklist"||i.template==="sap.ovp.cards.v4.linklist")&&!!i.staticContent){var k1=i.staticContent,l1={},m1={},n1={},o1={};for(var p1=0;p1<k1.length;p1++){var q1=k1[p1].index;l1[q1]=H(i,"staticLink",null,p1);m1[q1]=H(i,"links",null,p1);n1[q1]=H(i,"removeVisual",null,p1);o1[q1]=H(i,"showMore",null,p1);}this.oVisibility.staticLink=l1;this.oVisibility.links=m1;this.oVisibility.removeVisual=n1;this.oVisibility.showMore=o1;}this.oVisibility.lineItemTitle=H(i,"lineItemTitle");this.oVisibility.lineItemSubTitle=H(i,"lineItemSubTitle");this.oVisibility.showViewName=H(i,"showViewName",q);this.oVisibility.showDefaultView=H(i,"showDefaultView",q);this.oVisibility.showEntitySet=H(i,"showEntitySet",q);this.aVariantNames.forEach(function(s1){this.oVisibility[s1.sPath]=H(i,s1.sPath,q)&&!!i[s1.sPath]&&!!i[s1.sPath].length;}.bind(this));this.oVisibility.kpiHeader=H(i,"kpiHeader",q)&&!!i["dataPoint"]&&!!i["dataPoint"].length;this.oVisibility.dynamicSwitchSubTitle=H(i,"dynamicSwitchSubTitle",q);this.oVisibility.dynamicSwitchStateSubTitle=H(i,"dynamicSwitchStateSubTitle",q);this.oVisibility.dataSource=H(i,"dataSource",q);this.oVisibility.dataSourceExisting=H(i,"dataSourceExisting",q);this.oVisibility.dataSourceNew=H(i,"dataSourceNew",q);this.oVisibility.selectCardType=H(i,"selectCardType",q);this.oVisibility.addKPIHeader=H(i,"addKPIHeader",q);this.oVisibility.setEntitySet=H(i,"setEntitySet",q);this.oVisibility.setCardProperties=H(i,"setCardProperties",q);this.oVisibility.setGeneralCardProperties=H(i,"setGeneralCardProperties",q);this.oVisibility.subTitleRequired=H(i,"subTitleRequired",q);this.oVisibility.dataPointSelectionMode=H(i,"dataPointSelectionMode",q);var r1;for(var p1=0;p1<this.aVisiblePropertiesForAnnotation.length;p1++){if(this.oVisibility[this.aVisiblePropertiesForAnnotation[p1].sProperty]){r1=true;break;}}this.oVisibility.setAnnotationCardProperties=r1?H(i,"setAnnotationCardProperties",q):false;this.oVisibility.addODataSelect=H(i,"addODataSelect",q);this.oVisibility.addCustomActions=H(i,"addCustomActions",q);this.oVisibility.moveToTheTop=false;this.oVisibility.moveUp=false;this.oVisibility.moveDown=false;this.oVisibility.moveToTheBottom=false;this.oVisibility.delete=false;}
function K(i){var q=i.getProperty("/staticContent");for(var k1=0;k1<q.length;k1++){q[k1].index="Index--"+(k1+1);}i.setProperty("/staticContent",q);}
function N(q){var k1=0;for(var i=q.length-1;i>=0;i--){if(/^\d+$/.test(q[i])){k1=parseInt(q[i],10);break;}}return k1;}
function Q(i){var q=i&&i.metaModel&&i.metaModel.oModel;var k1=C.isODataV4(q);if(i.lineItem){i.lineItem.forEach(function(m1){if((k1&&m1.value==="@"+i.annotationPath)||m1.value===i.annotationPath){i.lineItemQualifier=m1.name;}});}if(i.tabs&&i.tabs.length&&i.selectedKey){i.viewName=i.tabs[i.selectedKey-1].value;i.isDefaultView=false;if(i.selectedKey===i.defaultViewSelected){i.isDefaultView=true;}}var l1=i.sortOrder;i.sortOrder="descending";if(l1&&l1.toLowerCase()!=="descending"){i.sortOrder="ascending";}i.isExtendedList=false;if(i.listType==="extended"){i.isExtendedList=true;}i.isBarList=false;if(i.listFlavor==="bar"){i.isBarList=true;}i.hasKPIHeader=false;if(i.dataPointAnnotationPath){i.hasKPIHeader=true;}return i;}
function R(i){var q=i&&i.metaModel&&i.metaModel.oModel;var k1=C.isODataV4(q);var l1=i.kpiAnnotationPath;var m1=i.template;var n1=k1?i.entityType.$Type:i.entityType;var o1="";if(l1&&n1&&m1==="sap.ovp.cards.charts.analytical"){var p1=n1[l1];var q1=p1&&p1.Detail;if(q1&&q1.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"&&q1.SemanticObject&&q1.Action){o1="#"+q1.SemanticObject.String+"-"+q1.Action.String;}}i["KPINav"]=o1;}
function T(i){var q=[],k1=i.metaModel,l1=!!k1?k1.getODataEntityContainer().entitySet:[],m1=k1&&k1.getODataEntityContainer().namespace+".";l1.forEach(function(n1){if(!i.addNewCard){var o1=d.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[n1.name]),p1=k1.getODataEntityType(n1.entityType)["sap:label"];q.push({name:t(p1,o1),value:n1.name});}else{var o1=d.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[n1.name]),p1=k1.getODataEntityType(n1.entityType)["sap:label"],q1=n1.entityType.split(m1)[1];q.push({name:t(p1,o1),value:n1.name,entityType:q1});}});if(q.length>0){i["allEntitySet"]=q;}}
function U(q){var k1=q.metaModel,l1=k1.getObject("/"),m1=Object.keys(l1),n1=[],o1=[];for(var i=0;i<m1.length;i++){if(m1[i].startsWith("$")){continue;}n1.push({name:m1[i],entityType:l1[m1[i]].$Type});}var p1=k1.getData();var q1=p1.$EntityContainer;var r1=q1?q1.split("."):"";r1.pop();var s1=r1.join(".")+".";n1.forEach(function(t1){var u1=d.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[t1.name]);var v1=p1&&p1[t1.entityType]&&p1[t1.entityType]["sap:label"];if(!q.addNewCard){o1.push({name:t(v1,u1),value:t1.name});}else{var w1=t1.entityType.split(s1)[1];o1.push({name:t(v1,u1),value:t1.name,entityType:w1});}});if(o1.length>0){q["allEntitySet"]=o1;}}
function W(i){var q=i.metaModel&&i.metaModel.getObject('/dataServices/schema')&&i.metaModel.getObject('/dataServices/schema')[0].entityType;if(q){q.forEach(function(k1){var l1=0;this.aVariantNames.forEach(function(m1){for(var n1 in k1){if(n1.indexOf(m1.sVariant)!==-1){l1++;}}});if(!l1){i.allEntitySet=i.allEntitySet.filter(function(m1){return m1.entityType!==k1.name;});}}.bind(this));}}
function X(i){var q=i&&i.metaModel&&i.metaModel.oModel;var k1=C.isODataV4(q);var l1;if(k1){l1=i.metaModel.getData()["$Annotations"][i.entityType.$Type];}else{l1=i.entityType;}if(!i["allEntitySet"]){if(k1){U(i);}else{T(i);}}R(i);if(i.addNewCard){W.call(this,i);}this.aVariantNames.forEach(function(q1){var r1=[],s1=1;for(var t1 in l1){if(l1.hasOwnProperty(t1)&&t1.indexOf(q1.sVariant)!==-1){if(q1.sVariant===".LineItem"){var u1={name:r.getText("OVP_KEYUSER_LABEL_LINEITEM_OPTIONS",[s1]),value:k1?t1.substring(1):t1,fields:k1?w(l1,t1):v(l1,t1)};r1.push(u1);s1++;}else{r1.push({name:k1?w(l1,t1):v(l1,t1),value:k1?t1.substring(1):t1});}}}if(r1.length!==0){i[q1.sPath]=r1;}});if(k1){var m1=i1(i);i["modelProperties"]=m1.map(function(q1){return{name:q1,value:q1};});}else if(i.entityType&&i.entityType.property){i["modelProperties"]=i.entityType.property.map(function(q1){return{name:q1.name,value:q1.name};});}if(!!i.tabs&&i.tabs.length){var n1=false,o1=i.tabs[i.tabs.length-1].value,p1=o1.split(' ');i.newViewCounter=N(p1);i.defaultViewSelected=i.selectedKey;i.isViewResetEnabled=false;i.aViews=[{text:r&&r.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false}];n1=i.tabs.some(function(q1){return q1.dataPointAnnotationPath;});i.tabs.forEach(function(q1,r1){var s1=q1.value;if(n1&&!q1.dataPointAnnotationPath&&q1.dataPoint&&q1.dataPoint.length){q1.dataPointAnnotationPath=q1.dataPoint[0].value;}if(r1+1===i.selectedKey){s1=q1.value;if(r){s1+=" ("+r.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";}else{s1+=" (Default view)";}}i.aViews.push({text:s1,key:r1+1,initialSelectedKey:r1+1,isLaterAddedView:false,isViewResetEnabled:false});});}else if(x(i.template,"isViewSwitchSupportedCard")){i.newViewCounter=0;i.aViews=[{text:r.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}];}return i;}
function Y(q){var k1=q.getData();if(sap.ushell&&sap.ushell.Container){sap.ushell.Container.getService("CrossApplicationNavigation").getLinks().done(function(l1){var m1=[],n1={};for(var i=0;i<l1.length;i++){m1.push(l1[i].intent);n1[l1[i].intent]=l1[i].text;}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(m1).done(function(o1){var l1=[];for(var p1 in o1){if(o1.hasOwnProperty(p1)&&o1[p1].supported===true&&n1&&n1[p1]){l1.push({name:n1[p1],value:p1});}}var q1=k1;if(l1.length!==0||l1.length!==0){q1["links"]=l1;}q.refresh();}).fail(function(o1){l.error(o1);});}).fail(function(i){l.error(i);});}}
function Z(i){this.oResetButton.setEnabled(i);}
function $(i){this.oSaveButton.setEnabled(i);var q=this.oMessagePopOver.getModel(),k1=q.getProperty("/Counter/Error");this.bError=(k1>0);}
function _(i){var q=new RegExp("http(s)?:\/\/(www\.)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?","i");return q.test(i);}
function a1(i,q){if(q==="targetUri"){return!_(i)&&(!!i||i==="");}else{return!(i.trim().length);}}
function b1(q){var k1=q.getParameter("path"),l1="",m1,i,n1,o1,p1,q1;if(k1==="/title"||k1==="title"||k1==="/viewName"||k1==="targetUri"||k1==="value"){var r1=q.getParameter("value"),s1=a1(r1,k1),t1,u1=q.getParameter("context");if(k1==="/viewName"){t1=q.getSource().getProperty("/selectedKey");l1=d.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");k1="/tabs/"+(t1-1)+"/value";}if(k1==="value"){l1=d.getText("OVP_KEYUSER_INPUT_ERROR_VIEW_NAME");k1=u1.getPath()+"/"+k1;}if(k1.indexOf("/title")!==-1){l1=d.getText("OVP_KEYUSER_INPUT_ERROR");}if(u1&&u1.getPath().indexOf("staticContent")!==-1){m1=u1.getPath().split("/");if(k1==="title"){l1=d.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE")+(parseInt(m1[m1.length-1],10)+1);}else if(k1==="targetUri"){l1=d.getText("OVP_KEYUSER_INPUT_ERROR_RECORD_URL")+" "+(parseInt(m1[m1.length-1],10)+1);}k1=u1.getPath()+"/"+k1;}n1=this.oMessagePopOver.getModel();o1=n1.getProperty("/Messages");p1=n1.getProperty("/Counter/All");q1=n1.getProperty("/Counter/Error");if(s1){$.bind(this)(true);for(i=0;i<o1.length;i++){if(o1[i].fieldName===k1){o1.splice(i,1);p1--;q1--;i--;}}o1.push({"type":"Error","title":l1,"fieldName":k1,"counter":q1+1});p1++;q1++;}else{$.bind(this)(true);for(i=0;i<o1.length;i++){if(o1[i].fieldName===k1){o1.splice(i,1);p1--;q1--;i--;}}}n1.setProperty("/Messages",o1);n1.setProperty("/Counter/All",p1);n1.setProperty("/Counter/Error",q1);n1.refresh(true);}else if(k1==="/staticContent,title"||k1==="/staticContent,targetUri"||k1==="/tabs,value"){m1=k1.split(",");n1=this.oMessagePopOver.getModel();o1=n1.getProperty("/Messages");p1=n1.getProperty("/Counter/All");q1=n1.getProperty("/Counter/Error");$.bind(this)(true);for(i=0;i<o1.length;i++){if(o1[i].fieldName.indexOf(m1[0])!==-1&&o1[i].fieldName.indexOf(m1[1])!==-1){o1.splice(i,1);p1--;q1--;i--;}}n1.setProperty("/Messages",o1);n1.setProperty("/Counter/All",p1);n1.setProperty("/Counter/Error",q1);n1.refresh(true);}}
function c1(){var i=this.oMessagePopOver.getModel();i.setProperty("/Messages",[]);i.setProperty("/Counter/All",0);i.setProperty("/Counter/Error",0);i.setProperty("/Counter/Success",0);i.setProperty("/Counter/Warning",0);i.setProperty("/Counter/Information",0);i.refresh(true);}
function d1(){var i=new L({text:"Show more information",href:"",target:"_blank"});var q=new b({type:"{type}",title:"{title}",description:"{description}",subtitle:"{subtitle}",counter:"{counter}",fieldName:"{fieldName}",link:i});this.oMessagePopOver=new M({items:{path:"/Messages",template:q}});var k1={"Counter":{"All":0,"Error":0,"Success":0,"Warning":0,"Information":0},"Messages":[]};var l1=new J(k1);this.oMessagePopOver.setModel(l1);this.oMessagePopOverButton.setModel(l1);}
function e1(i,q){var k1=i.byId("sapOvpSettingsForm");if(k1){var l1=k1.getDomRef();if(l1){l1.style.width=q;}}}
function f1(i){var q=this.dialogBox.getContent()[0],k1=q.getModel(),l1=q.getModel("deviceMediaProperties");switch(i.name){case"S":case"M":l1.setProperty("/deviceMedia","Column");e1(q,"100%");break;case"L":case"XL":default:l1.setProperty("/deviceMedia","Row");e1(q,"calc(100% - "+(k1.getProperty("/dialogBoxWidth")+1)+"rem)");break;}l1.refresh(true);}
function g1(){a.media.detachHandler(f1.bind(this),null,"SettingsViewRangeSet");a.media.removeRangeSet("SettingsViewRangeSet");}
function h1(){a.media.initRangeSet("SettingsViewRangeSet",[520,760,960],"px",["S","M","L","XL"]);a.media.attachHandler(f1.bind(this),null,"SettingsViewRangeSet");f1.bind(this)(a.media.getCurrentRange("SettingsViewRangeSet"));}
function i1(i){var q=i.entitySet,k1=i.metaModel,l1=k1.getObject("/"+q),m1=l1.$Type,n1=k1.getObject("/"+m1),o1=Object.keys(n1);var p1=o1.filter(function(q1){return!q1.startsWith("$");});return p1;}
var j1={dialogBox:undefined,oSaveButton:undefined,oResetButton:undefined,oMessagePopOverButton:undefined,oMessagePopOver:undefined,oAppDescriptor:undefined,oOriginalAppDescriptor:undefined,oMainComponent:undefined,oAppComponent:undefined,oNewDataSources:{},sApplicationId:"",oi18nModel:undefined,iContentHeightForDialog:38,iContentHeightForDialogWithViewSwitch:33,aVariantNames:S.aVariantNames,aVisiblePropertiesForAnnotation:S.aVisiblePropertiesForAnnotation,getDataSources:h,removeDataSources:g,setDataSources:s,attachWindowResizeHandler:h1,detachWindowResizeHandler:g1,settingFormWidth:e1,addKPINavApplicationName:R,addManifestSettings:Q,setVisibilityForFormElements:I,getVisibilityOfElement:H,checkForEmptyString:t,enableResetButton:Z,enableSaveButton:$,checkClonedCard:F,resetErrorHandling:c1,createErrorCard:k,setErrorMessage:n,getQualifier:p,getTrimmedDataURIName:j,addSupportingObjects:X,oVisibility:S.oVisibility,bError:false,bNewStaticLinkListCardFlag:false,bNewKPICardFlag:false,bAddNewCardFlag:false,aListType:S.aListType,aListFlavour:S.aListFlavour,aDataPointSelectionMode:S.aDataPointSelectionMode,aSortOrder:S.aSortOrder,aCardType:S.aCardType,aLinkListFlavour:S.aLinkListFlavour,getDialogBox:function(i){return new Promise(function(k1,l1){if(!this.dialogBox){this.oSaveButton=new B("settingsSaveBtn",{text:d.getText("save"),type:"Emphasized"});var m1=new B("settingsCancelBtn",{text:d.getText("cancelBtn")});this.oResetButton=new B("settingsResetBtn",{text:d.getText("resetCardBtn")});this.oMessagePopOverButton=new B("settingsMessagePopOverBtn",{text:"{/Counter/All}",type:"Emphasized",icon:"sap-icon://message-popup",visible:"{= ${/Counter/All} === 0 ? false : true}"}).addStyleClass("sapOvpSettingsMessagePopOverBtn");this.dialogBox=new D("settingsDialog",{title:d.getText("settingsDialogTitle"),buttons:[this.oMessagePopOverButton,this.oSaveButton,m1,this.oResetButton],afterClose:function(f2){var d2=this.dialogBox.getContent()[0],g2=d2.byId("sapOvpSettingsLineItemTitle"),h2=d2.byId("sapOvpSettingsLineItemSubTitle");if(g2){g2.destroy();}if(h2){h2.destroy();}this.bNewStaticLinkListCardFlag=false;this.bNewKPICardFlag=false;this.bAddNewCardFlag=false;this.newDataSource=false;this.dialogBox.destroyContent();this.detachWindowResizeHandler();}.bind(this)});this.dialogBox.setBusyIndicatorDelay(0);m1.attachPress(function(f2){this.dialogBox.close();}.bind(this));}this.oResetButton.setVisible(!this.bNewKPICardFlag);d1.bind(this)();var n1=this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag||this.bAddNewCardFlag;var o1=i.getComponentInstance(),p1=o1.getRootControl().getModel("ovpCardProperties"),q1;this.oi18nModel=o1.getComponentData().i18n;if(this.bNewStaticLinkListCardFlag){q1={"title":"New Title","subTitle":"New Subtitle","staticContent":[],"listFlavor":"standard","template":"sap.ovp.cards.linklist","layoutDetail":p1.getProperty("/layoutDetail")};}else if(this.bNewKPICardFlag){var r1=o1.getComponentData().mainComponent.getView().getModel("JSONModelForSSB").getProperty("/d/results"),s1=r1[0];q1={"entitySet":s1.ODataEntityset,"kpiAnnotationPath":"com.sap.vocabularies.UI.v1.KPI#"+s1.KPIQualifier,"title":s1.GroupTitle,"subTitle":s1.KPITitle,"template":"sap.ovp.cards.charts.analytical","layoutDetail":p1.getProperty("/layoutDetail"),"selectedKPI":s1,"errorStatusText":undefined,"KPIData":r1};}else if(this.bAddNewCardFlag){q1={"addNewCard":true,"newDataSource":false,"title":"","subTitle":"","cardType":this.aCardType,"aListType":this.aListType,"aListFlavour":this.aListFlavour,"valueSelectionInfo":"","navigation":this.aDataPointSelectionMode,"aLinkListFlavour":this.aLinkListFlavour,"authorization":""};}else{q1=p1.getData();}var t1=m({},q1);t1=X.call(this,t1);t1=this.addManifestSettings(t1);var u1=new J(t1),v1=i.getDomRef().offsetHeight,w1=new J(a.system),x1=new J({"deviceMedia":"Row"}),y1=o1.getComponentData(),z1=y1.mainComponent,A1=y1.appComponent,B1=(n1)?"":y1.cardId;this.oAppComponent=A1;this.oAppDescriptor=z1._getCardFromManifest(B1);this.sApplicationId=z1._getApplicationId();this.oMainComponent=z1;this.oOriginalAppDescriptor=A1._getOvpCardOriginalConfig(B1);w1.setDefaultBindingMode("OneWay");t1.dialogBoxHeight=v1;t1.dialogBoxWidth=20;var C1=[];if(t1.customParams||t1.staticParameters){u1.setProperty("/addCustomParameters",true);if(t1.staticParameters&&Object.keys(t1.staticParameters).length){for(var D1 in t1.staticParameters){C1.push({"key":D1,"value":t1.staticParameters[D1]});}u1.setProperty("/aAllStaticParameters",C1);}}else{u1.setProperty("/addCustomParameters",false);}var E1=C._getLayer();if(E1===e.Layers.vendor){u1.setProperty("/layer",E1);if(t1.objectStreamCardsSettings&&t1.objectStreamCardsSettings.customActions){u1.setProperty("/addCustomActions",true);}else{u1.setProperty("/addCustomActions",false);}var F1=o1.getComponentData().appComponent.sId;var G1=sap.ui.getCore().byId(F1+"---mainView").getModel("i18n");var H1=G1.oData.bundle&&G1.oData.bundle.oi18nModel;if(Array.isArray(H1)&&H1[0]&&H1[0].aPropertyFiles[0]&&H1[0].aPropertyFiles[0].mProperties){var I1=H1[0].aPropertyFiles[0].mProperties;var J1=[];var K1=[];var L1=[];var M1=[];if(!t1.addNewCard){var N1=S.oI18nKeyValueProperty;for(var D1 in N1){if(D1==="title"){K1.push({key:"",value:t1[D1]});}if(D1==="subTitle"){L1.push({key:"",value:t1[D1]});}if(D1==="valueSelectionInfo"){M1.push({key:"",value:t1[D1]});}}for(var D1 in I1){if(I1.hasOwnProperty(D1)){K1.push({key:D1,value:I1[D1]});}}for(var D1 in I1){if(I1.hasOwnProperty(D1)){L1.push({key:D1,value:I1[D1]});}}for(var D1 in I1){if(I1.hasOwnProperty(D1)){M1.push({key:D1,value:I1[D1]});}}u1.setProperty("/ai18nPropertiesAndTitle",K1);u1.setProperty("/ai18nPropertiesAndSubTitle",L1);u1.setProperty("/ai18nPropertiesAndValSelInfo",M1);}for(var D1 in I1){if(I1.hasOwnProperty(D1)){J1.push({key:D1,value:I1[D1]});}}u1.setProperty("/ai18nProperties",J1);}}if(t1.template==="sap.ovp.cards.linklist"||t1.template==="sap.ovp.cards.v4.linklist"){u1.setProperty("/listFlavorName",d.getText("OVP_KEYUSER_CAROUSEL"));}else{u1.setProperty("/listFlavorName",d.getText("OVP_KEYUSER_BARLIST"));}if(t1.layoutDetail==="resizable"){var O1=["sap.ovp.cards.list","sap.ovp.cards.table","sap.ovp.cards.v4.list","sap.ovp.cards.v4.table"];if(!t1.defaultSpan){t1.defaultSpan={};u1.setProperty("/defaultSpan/cols",u1.getProperty("/cardLayout/colSpan"));u1.setProperty("/defaultSpan/rows",O1.indexOf(t1.template)?u1.getProperty("/cardLayout/noOfItems"):u1.getProperty("/cardLayout/rowSpan"));}else{if(!t1.defaultSpan.rows){u1.setProperty("/defaultSpan/rows",O1.indexOf(t1.template)?u1.getProperty("/cardLayout/noOfItems"):u1.getProperty("/cardLayout/rowSpan"));}if(!t1.defaultSpan.cols){u1.setProperty("/defaultSpan/cols",u1.getProperty("/cardLayout/colSpan"));}}t1.NoOfColumns=[];var P1=1,Q1=6;for(var q=P1;q<=Q1;q++){t1.NoOfColumns.push({value:q});}if(x(t1.template,'chart')||t1.template==='sap.ovp.cards.linklist'||t1.template==='sap.ovp.cards.v4.linklist'){var R1=i.getComponentInstance().getComponentData().mainComponent,S1=R1.getLayout(),T1=S1.getDashboardLayoutUtil(),U1=z1._getCardId(i.getId()),V1=T1.calculateCardProperties(U1),W1=T1._getCardController(U1).getView().byId('bubbleText')?43:0,X1=V1.headerHeight+V1.dropDownHeight+W1+50,Y1=Math.ceil(V1.minCardHeight/T1.getRowHeightPx())+1;t1.NoOfRows=[];t1.NoOfRows.push({name:"None",value:0});t1.NoOfRows.push({name:"Small",value:Y1});t1.NoOfRows.push({name:"Standard",value:Math.ceil((X1+480)/T1.getRowHeightPx())+1});if(this.bNewStaticLinkListCardFlag||this.bNewKPICardFlag){u1.setProperty("/defaultSpan/cols",1);u1.setProperty("/defaultSpan/rows",Y1);}}}if(t1.addNewCard){u1.setProperty("/addViewSwitchCheckBox",false);u1.setProperty("/addKPIHeaderCheckBox",false);var Z1=[];var $1=z1.oCardsModels;if($1){for(var D1 in $1){if(D1.indexOf("kpi_card_model_")<0){Z1.push(Object.assign({},{Title:D1},$1[D1]));}}u1.setProperty("/datasources",Z1);u1.setProperty("/datasourcesFromManifest",Z1);}}var _1={};var a2=new J(_1);Y(a2);if((t1.template==="sap.ovp.cards.linklist"||t1.template==="sap.ovp.cards.v4.linklist")&&t1.staticContent){K(u1);u1.setProperty("/lineItemId","linkListItem--1");u1.setProperty("/lineItemIdCounter",t1.staticContent.length);}if(t1.template==="sap.ovp.cards.charts.analytical"){var b2=z1._getCardId(i.getId());u1.setProperty("/NewKPICard",this.bNewKPICardFlag);u1.setProperty("/selectedKPICardID",b2);}this.setVisibilityForFormElements(t1);var c2=new J(this.oVisibility);if(!this.bAddNewCardFlag){u1.attachPropertyChange(b1.bind(this));}var d2=new sap.ui.core.mvc.XMLView("settingsView",{viewName:"sap.ovp.cards.rta.SettingsDialog",type:V.XML,preprocessors:{xml:{bindingContexts:{ovpCardProperties:u1.createBindingContext("/")},models:{ovpCardProperties:u1,deviceSystemProperties:w1}}}});d2.setModel(a2,"staticCardProperties");var e2=d.oResourceModel;d2.setModel(u1);d2.setModel(e2,"ovpResourceModel");d2.setModel(x1,"deviceMediaProperties");d2.setModel(c2,"visibility");if(this.oi18nModel){d2.setModel(this.oi18nModel,"@i18n");}this.dialogBox.addContent(d2);this.attachWindowResizeHandler();d2.loaded().then(function(f2){if(!this.bAddNewCardFlag){var g2=f2.byId("dialogCard");if(!g2.getVisible()){g2=f2.byId("dialogCardNoPreview");var h2=d2.getModel().getProperty("/template").split("."),i2=h2[h2.length-1],j2=d.getText("OVP_KEYUSER_NO_CARD_PREVIEW_MSG",[i2]);g2.setText(j2);}else{g2.setWidth(t1.dialogBoxWidth+"rem");}}f(i,f2,n1);this.dialogBox.open();f2.getController().settingsResolve=k1;}.bind(this));}.bind(this));}};
j1.fnEditCardHandler=function(i,q){var k1=i.getComponentInstance().getComponentData().mainComponent,l1=k1.getLayout(),m1=k1.getUIModel();return j1.getDialogBox(i).then(function(n1){var o1=[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_changeCard",content:n1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"editCardSettings",content:n1.flexibilityChange}}];if(n1.viewSwitchChange){o1.push({selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{changeType:"viewSwitch",content:n1.viewSwitchChange}});}if(m1.getProperty('/containerLayout')==='resizable'){var p1=l1.getDashboardLayoutModel(),q1=l1.getDashboardLayoutUtil(),r1=k1._getCardId(i.getId()),s1=p1.getCardById(r1),t1=q1.calculateCardProperties(r1),u1=p1.getColCount(),v1='C'+u1,w1=n1.flexibilityChange.newAppDescriptor.settings.defaultSpan,x1,y1=[];if(w1&&w1.cols){o1.forEach(function(A1){if(A1.changeSpecificData.changeType==='editCardSettings'){var B1=A1.changeSpecificData.content.oldAppDescriptor;B1.settings.defaultSpan={rowSpan:s1.dashboardLayout.rowSpan,colSpan:s1.dashboardLayout.colSpan,showOnlyHeader:s1.dashboardLayout.showOnlyHeader};}});if(w1.rows===0){s1.dashboardLayout.autoSpan=false;x1=Math.ceil((t1.headerHeight+2*q1.CARD_BORDER_PX)/q1.getRowHeightPx());}else{s1.dashboardLayout.autoSpan=true;var z1=['sap.ovp.cards.list','sap.ovp.cards.table','sap.ovp.cards.v4.list','sap.ovp.cards.v4.table'];if(z1.indexOf(s1.template>-1)){s1.dashboardLayout.noOfItems=w1.rows;}else{x1=w1.rows;}}p1._arrangeCards(s1,{row:x1,column:w1.cols},'resize',y1);p1._removeSpaceBeforeCard(y1);y1.forEach(function(A1){var B1={};B1.dashboardLayout={};B1.cardId=A1.content.cardId;B1.dashboardLayout[v1]=A1.content.dashboardLayout;o1.push({selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:B1}});});}}return o1;});};
j1.fnCloneCardHandler=function(i,q){return P.getPayLoadForCloneCard(i).then(function(k1){return[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:k1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:k1.flexibilityChange}}];});};
j1.fnAddStaticLinkListCardHandler=function(i,q){j1.bNewStaticLinkListCardFlag=true;return j1.getDialogBox(i).then(function(k1){return[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:k1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:k1.flexibilityChange}}];});};
j1.fnAddKPICardHandler=function(i,q){j1.bNewKPICardFlag=true;return j1.getDialogBox(i).then(function(k1){var l1=[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:k1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:k1.flexibilityChange}}];if(k1.addODataAnnotation){l1.push({appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:k1.addODataAnnotation}});}return l1;});};
j1.fnAddNewCardHandler=function(i,q){j1.bAddNewCardFlag=true;return j1.getDialogBox(i).then(function(k1){var l1=[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_addNewCard",content:k1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"newCardSettings",content:k1.flexibilityChange}}];if(k1.addODataAnnotation){l1.push({appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_addAnnotationsToOData",content:k1.addODataAnnotation}});}return l1;});};
j1.fnRemoveCardHandler=function(i,q){return new Promise(function(k1,l1){c.confirm(d.getText("OVP_KEYUSER_MESSAGE_BOX_WARNING_MESSAGE_DELETE"),{actions:[c.Action.DELETE,c.Action.CANCEL],icon:c.Icon.WARNING,title:d.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_DELETE"),initialFocus:c.Action.CANCEL,onClose:function(m1){if(m1==="DELETE"){k1(P.getPayLoadForRemoveCard(i));}else{l1(null);}}});}).then(function(k1){var l1=[{appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_ovp_removeCard",content:k1.appDescriptorChange}},{selectorControl:i.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"removeCardContainer",content:k1.flexibilityChange}}];if(k1.removeDataSourceChange){k1.removeDataSourceChange.forEach(function(m1){l1.push({appComponent:i.getComponentInstance().getComponentData().appComponent,changeSpecificData:{appDescriptorChangeType:"appdescr_app_removeDataSource",content:m1}});});}return l1;},function(k1){return[];});};
return j1;},true);
sap.ui.predefine('sap/ovp/cards/charts/OVPVizDataHandler',["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/charts/Utils","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge"],function(C,J,U,O,e,m){"use strict";return C.extend("sap.ovp.cards.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(r,c){r.write("<div");r.writeElementData(c);r.write(">");if(c.getContent()){r.renderControl(c.getContent());}r.write("</div>");},mergeDatasets:function(b,d,c){var t=this;var a=this.getModel();var p=b.mParameters;var D=m({},this.dataSet);if(p){var s=p.select.split(",");}var f=b.getPath().substring(1);var g=-1;if(f){g=f.indexOf('Parameters');}if(g>=0){f=f.substr(0,f.indexOf('Parameters'));}var h=a.getMetaModel();var l=this.getEntitySet();var n=h.getODataEntitySet(l);var o=h.getODataEntityType(n.entityType);var q=[];var r=[];for(var i=0;i<o.property.length;i++){if(o.property[i]["com.sap.vocabularies.Analytics.v1.Measure"]||(o.property[i].hasOwnProperty("sap:aggregation-role")&&o.property[i]["sap:aggregation-role"]==="measure")){if(s&&s.indexOf(o.property[i].name)!==-1){q.push(o.property[i].name);}}else{if(s&&s.indexOf(o.property[i].name)!==-1){r.push(o.property[i].name);}}}if(D&&D.results){for(var i=0;i<D.results.length-2;i++){for(var j=0;j<q.length;j++){D.results[0][q[j]]=Number(D.results[0][q[j]])+Number(D.results[i+1][q[j]]);}}var u=D.__count-D.results.length;var v={};v.results=[];v.results[0]=D.results[0];var w;if(D.__count>D.results.length){var x=m({},this.aggregateSet);if(x&&x.results&&D.results.length<D.__count){e(q,function(i){x.results[0][q[i]]=String(Number(t.aggregateSet.results[0][q[i]])-Number(v.results[0][q[i]]));});e(r,function(i){x.results[0][r[i]]=O.getText("OTHERS_DONUT",[u+1]);});x.results[0].$isOthers=true;w=x.results[0];}}if(w){d.results.push(w);}var y=c.getModel('ovpCardProperties');var E=y&&y.getProperty("/bEnableStableColors");var z=y&&y.getProperty("/colorPalette");var A=o[y&&y.getProperty("/chartAnnotationPath")];if(A.DimensionAttributes.length===1&&E&&c.getVizType()==="donut"&&z&&(z instanceof Object)&&Object.keys(z).length<=10){var B=A.DimensionAttributes[0].Dimension.PropertyPath;if(z instanceof Array){var F=z.map(function(T){return T.color;});var G=F.slice();}else{var H=JSON.parse(JSON.stringify(z));}var V=c.getVizProperties();if(!V){var I={plotArea:{dataPointStyle:{rules:[]}}};V=I;}if(c&&V&&V.plotArea){if(!V.plotArea.dataPointStyle){V.plotArea.dataPointStyle={rules:[]};}else{V.plotArea.dataPointStyle.rules=[];}var K=h.getODataProperty(o,B);if(K){var L=K["com.sap.vocabularies.Common.v1.Label"]?K["com.sap.vocabularies.Common.v1.Label"].String:B;var M;if(K["com.sap.vocabularies.Common.v1.Text"]){M=K["com.sap.vocabularies.Common.v1.Text"]["Path"];}else if(K["sap:text"]){M=K["sap:text"];}else{M=K;}var N=function(i,k,Q,P){return{callback:function(T){if(T&&(T[L]===Q.dimensionValue)||(Q.hasOwnProperty(T[L]))){return true;}},properties:{color:(F&&F[i])||(Q&&Q[P])},"displayName":d.results[k][M]};};if(z instanceof Array){e(z,function(i,Q){for(var k=0;k<d.results.length;k++){if(d.results[k][B]===Q.dimensionValue){var R=N(i,k,Q);V.plotArea.dataPointStyle['rules'].push(R);G.splice(i,1);}}});}else{for(var k=0;k<d.results.length;k++){if(z.hasOwnProperty(d.results[k][B])){var P=d.results[k][B];var Q={};Q[P]=z[P];var R=N(i,k,Q,P);V.plotArea.dataPointStyle['rules'].push(R);delete H[P];}}}if(x){V.plotArea.dataPointStyle['rules'].push({callback:function(T){if(T&&(T[L].lastIndexOf('Others')!=-1)){return true;}},properties:{color:G&&G.length?F[F.length-1]:Object.keys(H).length&&H[Object.keys(H)[0]]},"displayName":x.results[0][B]});}}}c.setVizProperties(V);}}var S=new J();S.setData(d.results);c.setModel(S,"analyticalmodel");},updateBindingContext:function(){var b=this.getBinding("data");var a=this.getBinding("aggregateData");var t=this;if(this.chartBinding==b){return;}else{this.chartBinding=b;if(b){var t=this;b.attachEvent("dataReceived",function(E){t.dataSet=E&&E.getParameter("data");t.oDataClone=m({},t.dataSet);if(t.getChartType()=="donut"&&t.getBinding("aggregateData")!==undefined){if(t.getDependentDataReceived()===true||t.getDependentDataReceived()==="true"){t.mergeDatasets(b,t.oDataClone,t.getContent());t.setDependentDataReceived(false);}else{t.setDependentDataReceived(true);}}else{var M=new J();if(t.dataSet){var c=t.getEntitySet();var o=b.getModel();var d=U.cacheODataMetadata(o);var T=[];var f={};var g=d[c];if(g){var h=Object.keys(g);}if(h&&h.length){e(h,function(i,p){if(g[p]["type"]==="Edm.String"){if(g[p]["sap:semantics"]==="yearmonth"||g[p]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){T.push(p);f[p]={"sap:semantics":"yearmonth"};}else if(g[p]["sap:semantics"]==="yearquarter"||g[p]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){T.push(p);f[p]={"sap:semantics":"yearquarter"};}else if(g[p]["sap:semantics"]==="yearweek"||g[p]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){T.push(p);f[p]={"sap:semantics":"yearweek"};}}});}if(T&&T.length){if(t.dataSet.results&&t.dataSet.results.length){e(t.dataSet.results,function(i,r){e(T,function(i,p){if(r.hasOwnProperty(p)){var j=r[p];var y,k,q,l,n,w,s;switch(f[p]["sap:semantics"]){case'yearmonth':y=parseInt(j.substr(0,4),10);k=j.substr(4);n=parseInt(k,10)-1;r[p]=new Date(Date.UTC(y,n));break;case'yearquarter':y=parseInt(j.substr(0,4),10);q=j.substr(4);l=(parseInt(q,10)*3)-2;n=l-1;r[p]=new Date(Date.UTC(y,n));break;case'yearweek':y=parseInt(j.substr(0,4),10);w=j.substr(4);var s=(1+(parseInt(w,10)-1)*7);r[p]=new Date(Date.UTC(y,0,s));break;default:break;}}});});}}M.setData(t.dataSet.results);t.oDataClone=m({},t.dataSet);}t.getContent().setModel(M,"analyticalmodel");t.mergeDatasets(b,t.oDataClone,t.getContent());}});}C.prototype.updateBindingContext.apply(this,arguments);}if(this.chartAggrBinding==a){return;}else{this.chartAggrBinding=a;if(a){var t=this;a.attachEvent("dataReceived",function(E){t.aggregateSet=E&&E.getParameter("data");if(t.getChartType()=="donut"){if(t.getDependentDataReceived()===true||t.getDependentDataReceived()==="true"){t.oDataClone=m({},t.dataSet);t.mergeDatasets(b,t.oDataClone,t.getContent());t.setDependentDataReceived(false);}else{t.setDependentDataReceived(true);}}else{var M=new J();M.setData(t.aggregateSet.results);t.getContent().setModel(M,"analyticalmodel");}});}C.prototype.updateBindingContext.apply(this,arguments);}}});});
sap.ui.predefine('sap/ovp/cards/charts/Utils',["sap/ui/thirdparty/jquery","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger"],function(q,e,a,o){"use strict";var u={};var c={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:"Analytic cards require valid \"chartAnnotationPath\" "+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var b={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var l=new o("OVP.charts.Utils");
function g(C,d){if(!d){return"";}var s=C.getSetting('ovpCardProperties');if(!s){return"";}var S=s.oData;if(!S){return"";}var i=S&&S[d]?S[d]:"";return i===""?"":i.split("#")[1];}
u.getAllColumnTexts=function(d){return f("sap:text",d);};
u.formDimensionPath=function(d){var r="{"+d+"}";var i=this.getModel('ovpCardProperties').getProperty("/entityType");if(!i){return r;}var m=j(i);if(!m||!m[d]){return r;}var t=m[d];if(t=="Edm.DateTime"){return"{path:'"+d+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}";}var n=u.getAllColumnTexts(i);if(!n){return r;}r="{"+(n[d]||d)+"}";return r;};
function f(p,d){var m={};var n=d.property;for(var i=0,r=n.length;i<r;i++){if(n[i].hasOwnProperty(p)&&p=="com.sap.vocabularies.Common.v1.Label"){m[n[i].name]=n[i][p].String;}else if(n[i].hasOwnProperty(p)){m[n[i].name]=n[i][p];}else{m[n[i].name]=n[i].name;}}return m;}
function h(d){return f("com.sap.vocabularies.Common.v1.Label",d);}
function j(d){return f("type",d);}
var k={};u.LineChart=(function(){function n(C,v,w){var x=p(C,w).split(",");var y=r(C,v).split(",");var z=[];e(x,function(i,m){z.push(m);});var A=[];e(y,function(i,d){A.push(d);});var D=true;var N=C.getSetting("ovpCardProperties").getProperty("/navigation");if(N=="chartNav"){D=false;}var D=D?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+z.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+A.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+D+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }";}n.requiresIContext=true;function p(C,d){var v=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!v){return"";}var w=h(v);var x=[];e(d,function(i,m){x.push(w[m.Measure.PropertyPath]||m.Measure.PropertyPath);});return x.join(",");}p.requiresIContext=true;function r(C,m){var v=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!v){return"";}var w=h(v);var x=[];var y;var z;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){z=w[d.Dimension.PropertyPath];x.push(z?z:d.Dimension.PropertyPath);}});if(x.length<1){z=w[m[0].Dimension.PropertyPath];x.push(z?z:m[0].Dimension.PropertyPath);}y=g(C,c.CHART_QUALIFIER_KEY);k[y]=x;return x.join(",");}r.requiresIContext=true;function s(C,m){var v=[];var w;var x=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!x){return"";}var y=h(x);var z;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){z=y[d.Dimension.PropertyPath];v.push(z?z:d.Dimension.PropertyPath);}});w=g(C,c.CHART_QUALIFIER_KEY);v=v.filter(function(d){if(!k[w]){return true;}return d!==k[w][0];});return v.join(",");}s.requiresIContext=true;function t(C,d){return s(C,d)!=="";}t.requiresIContext=true;return{getVizProperties:n,getValueAxisFeed:p,getCategoryAxisFeed:r,getColorFeed:s,testColorFeed:t};})();u.BubbleChart=(function(){function n(C,d,z){var A=r(C,z).split(",");var B=s(C,z).split(",");var D=[];e(A,function(i,m){D.push(m);});var E=[];e(B,function(i,m){E.push(m);});var F=true;var N=C.getSetting("ovpCardProperties").getProperty("/navigation");if(N=="chartNav"){F=false;}var F=F?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+D.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+E.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+F+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }";}n.requiresIContext=true;function p(C,d){var z;if(!C||!C.getSetting||!(z=C.getSetting('ovpCardProperties'))){return[""];}var A=z.getProperty("/entityType");if(!A){return[""];}var B=h(A);var D=[null,null,null];var E=["Axis1","Axis2","Axis3"];e(d,function(i,m){if(E.indexOf(m.Role.EnumMember.split("/")[1])>-1){if(D[0]===null){D[0]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}else if(D[1]===null){D[1]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}else if(D[2]==null){D[2]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}}});return D;}p.requiresIContext=true;function r(C,m){return p(C,m)[0];}r.requiresIContext=true;function s(C,m){return p(C,m)[1];}s.requiresIContext=true;function t(C,m){return p(C,m)[2];}t.requiresIContext=true;function v(C,m){var z=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!z){return"";}var A=h(z);var B=[];var D;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){D=A[d.Dimension.PropertyPath];B.push(D?D:d.Dimension.PropertyPath);}});return B.join(",");}v.requiresIContext=true;function w(C,m){var z=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!z){return"";}var A=h(z);var B=[];var D;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){D=A[d.Dimension.PropertyPath];B.push(D?D:d.Dimension.PropertyPath);}});return B.join(",");}w.requiresIContext=true;function x(C,d){return v(C,d)!=="";}x.requiresIContext=true;function y(C,d){return w(C,d)!=="";}y.requiresIContext=true;return{getVizProperties:n,getMeasurePriorityList:p,getValueAxisFeed:r,getValueAxis2Feed:s,getBubbleWidthFeed:t,getColorFeed:v,getShapeFeed:w,testColorFeed:x,testShapeFeed:y};})();
u.validateMeasuresDimensions=function(v,t){var m=null;var d=null;if(!v.getDataset()){l.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false;}m=v.getDataset().getMeasures();d=v.getDataset().getDimensions();switch(t){case"Bubble":if(m.length!==3||d.length<1||!m[0].getName()||!m[1].getName()||!m[2].getName()||!d[0].getName()){l.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false;}break;case"Donut":if(m.length!==1||d.length!==1||!m[0].getName()||!d[0].getName()){l.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false;}break;case"Line":if(m.length<1||d.length<1||!m[0].getName()||!d[0].getName()){l.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false;}break;}return true;};
u.getSortAnnotationCollection=function(d,p,i){if(p&&p.SortOrder&&p.SortOrder.Path&&p.SortOrder.Path.indexOf('@')>=0){var s=p.SortOrder.Path.split('@')[1];var A=d.getServiceAnnotations()[i.entityType];return A[s];}return p.SortOrder;};
u.oFullConfig=null;
u.getConfig=function(C){if(!this.oFullConfig){try{var U=sap.ui.require.toUrl("sap/ovp/cards/charts/config.json");var d;q.ajax({type:"GET",url:U,dataType:"json",async:false,headers:"",success:function(m){d=a({},m);},error:function(E){l.error(E);}});this.oFullConfig=d;}catch(i){l.error(b.CONFIG_LOAD_ERROR+i);}}if(!C){return this.oFullConfig;}var s;try{s=C.EnumMember.split("/")[1];}catch(i){l.error(b.CARD_ERROR+b.INVALID_CHARTTYPE+b.ANNO_REF);return{};}if(!this.oFullConfig[s]){l.error(b.INVALID_CONFIG+s+" "+b.CONFIG_JSON);return{};}var r;if((r=this.oFullConfig[s].reference)&&this.oFullConfig[r]){var v=a({},this.oFullConfig[r]);this.oFullConfig[s]=v;}return this.oFullConfig[s];};
u.oCachedMetaModel={};
u.cacheODataMetadata=function(m){if(!m){l.error(b.CARD_ERROR+b.CACHING_ERROR);return;}var E=this.oCachedMetaModel[m.getId()];if(!E){E={};var M=m.getMetaModel();var d=M&&M.getODataEntityContainer();var i,p;e(d.entitySet,function(n,r){i=M.getODataEntityType(r.entityType);p={};e(i.property,function(s,P){p[P.name]=P;});E[r.name]=p;});this.oCachedMetaModel[m.getId()]=E;}return E;};
return u;},true);
sap.ui.predefine('sap/ovp/cards/charts/VizAnnotationManager',["sap/ui/thirdparty/jquery","sap/ovp/cards/charts/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject"],function(q,U,C,a,N,D,V,b,c,O,e,M,F,g,h,l,o,p,t,u){"use strict";var w={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut"};var y={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var S=["year","yearweek","yearmonth","yearquarter"];var z=[w.COLUMNSTACKED_CHARTTYPE,w.DONUT_CHARTTYPE,w.COLUMN_CHARTTYPE,w.BAR_CHARTTYPE,w.VERTICALBULLET_CHARTTYPE,w.LINE_CHARTTYPE,w.COMBINATION_CHARTTYPE,w.BUBBLE_CHARTTYPE];var A=[w.COLUMNSTACKED_CHARTTYPE];var G;var L=new t("OVP.charts.VizAnnotationManager");
function B(f,j,n,v,x,I1,J1){var K1="{";if(!f||!f.getSetting('ovpCardProperties')){L.error(y.ANALYTICAL_CONFIG_ERROR);K1+="}";return K1;}var L1=f.getSetting("dataModel");var M1;if(J1&&J1.EnumMember){M1=J1.EnumMember.split("/");if(M1&&(M1[1]==='Donut')){L1.setDefaultCountMode(C.Inline);}if(M1&&(M1[1]!='Donut')&&(x===undefined)){return null;}}var N1=[];var O1=[];var P1=[];var Q1=[];var R1=[];var S1=[];var T1=[];var U1=n&&n.Parameters;var V1=v&&v.SortOrder;var W1=v&&v.MaxItems,X1=null;var Y1;var Z1;var $1;var _1=null;var a2=w.TEXT_KEY;var b2=w.TEXT_KEY_V4;var c2=w.UNIT_KEY;var d2=w.UNIT_KEY_V4_ISOCurrency;var e2=w.UNIT_KEY_V4_Unit;var f2={};if(W1){X1=W1.Int32?W1.Int32:W1.Int;}if(X1){if(X1==="0"){L.error("OVP-AC: Analytic card Error: maxItems is configured as "+X1);K1+="}";return K1;}if(!/^\d+$/.test(X1)){L.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");K1+="}";return K1;}}var g2=f.getSetting('ovpCardProperties'),h2=g2.getProperty('/parameters');var i2=g2.getProperty("/metaModel");U1=U1||!!h2;if(U1){var j2=a.resolveParameterizedEntitySet(L1,j,n,h2);K1+="path: '"+j2+"'";}else{K1+="path: '/"+j.name+"'";}var k2=[];_1=f.getSetting('ovpCardProperties').getProperty("/entitySet");if(!L1||!_1){return K1;}var l2=t1(L1,_1);var m2=f.getSetting('ovpCardProperties').getProperty("/cardLayout");var n2=1,o2;var p2=$();var q2;var r2;if(x&&m2&&m2.colSpan&&m2.colSpan>1){o2=m2.colSpan-n2;for(var s2 in p2){if((r2=p2[s2].reference)&&p2[r2]){var t2=p({},p2[r2]);p2[s2]=t2;}if(s2===M1[1]||(p2[s2].time&&p2[s2].time.type===M1[1].toLowerCase())){q2=p2[s2];break;}}var u2=_(x,q2,L1,_1);if(u2){q2=q2.time;}else{q2=q2.default;}var v2=f.getSetting('ovpCardProperties').getProperty("/dataStep");if(!v2){if(q2.resize&&q2.resize.hasOwnProperty("dataStep")&&!isNaN(q2.resize.dataStep)){v2=q2.resize.dataStep;}}v2=parseInt(v2,10);if(o2>0&&v2&&!isNaN(v2)){X1=parseInt(X1,10)+v2*o2;}}if(n){var g2=f.getSetting('ovpCardProperties');k2=a.getFilters(g2,n);}if(k2.length>0){K1+=", filters: "+JSON.stringify(k2);}if(V1){var w2=v.SortOrder;if(!w2.length){w2=U.getSortAnnotationCollection(L1,v,j);}if(w2.length<1){L.warning(y.CARD_WARNING+y.SORTORDER_WARNING);}else{var x2="";var y2;var z2;var A2;for(var i=0;i<w2.length;i++){y2=w2[i];A2=y2.Property.PropertyPath;T1.push(A2);if(typeof y2.Descending==="undefined"){z2='true';}else{var i1=y2.Descending.Bool||y2.Descending.Boolean;if(!i1){L.warning(y.CARD_WARNING+y.BOOLEAN_ERROR);z2='true';}else{z2=i1.toLowerCase()==='true'?'true':'false';}}x2=x2+"{path: '"+A2+"',descending: "+z2+"},";}K1+=", sorter: ["+x2.substring(0,x2.length-1)+"]";}}var B2=f.getSetting("ovpCardProperties").getProperty("/entityType");o(I1,function(i,m){Y1=m.Measure.PropertyPath;if(m.DataPoint&&m.DataPoint.AnnotationPath){var d=B2[m.DataPoint.AnnotationPath.substring(1)];if(d.ForecastValue&&(d.ForecastValue.PropertyPath||d.ForecastValue.Path)){var r=(d.ForecastValue.PropertyPath||d.ForecastValue.Path);R1.push((d.ForecastValue.PropertyPath||d.ForecastValue.Path));if(l2&&l2[r]){var s;if(l2[r][d2]){s=l2[r][d2].Path?l2[r][d2].Path:undefined;}else if(l2[r][e2]){s=l2[r][e2].Path?l2[r][e2].Path:undefined;}else if(l2[r][c2]){s=l2[r][c2];}if(s){if((R1?Array.prototype.indexOf.call(R1,s):-1)===-1){R1.push(s);}}}}if(d.TargetValue&&(d.TargetValue.PropertyPath||d.TargetValue.Path)){var G2=(d.TargetValue.PropertyPath||d.TargetValue.Path);R1.push((d.TargetValue.PropertyPath||d.TargetValue.Path));if(l2&&l2[G2]){var s;if(l2[G2][d2]){s=l2[G2][d2].Path?l2[G2][d2].Path:undefined;}else if(l2[G2][e2]){s=l2[G2][e2].Path?l2[G2][e2].Path:undefined;}else if(l2[G2][c2]){s=l2[G2][c2];}if(s){if((R1?Array.prototype.indexOf.call(R1,s):-1)===-1){R1.push(s);}}}}}R1.push(Y1);if(l2&&l2[Y1]){if(l2[Y1][b2]){if(l2[Y1][b2].String&&Y1!=l2[Y1][b2].String){R1.push(l2[Y1][b2].String?l2[Y1][b2].String:Y1);}else if(l2[Y1][b2].Path&&Y1!=l2[Y1][b2].Path){R1.push(l2[Y1][b2].Path?l2[Y1][b2].Path:Y1);}}else if(l2[Y1][a2]&&Y1!=l2[Y1][a2]){R1.push(l2[Y1][a2]?l2[Y1][a2]:Y1);}}if(l2&&l2[Y1]){var s;if(l2[Y1][d2]){s=l2[Y1][d2].Path?l2[Y1][d2].Path:undefined;}else if(l2[Y1][e2]){s=l2[Y1][e2].Path?l2[Y1][e2].Path:undefined;}else if(l2[Y1][c2]){s=l2[Y1][c2];}if(s){if((R1?Array.prototype.indexOf.call(R1,s):-1)===-1){R1.push(s);}}}});o(x,function(i,d){Y1=d.Dimension.PropertyPath;N1.push(Y1);if(l2&&l2[Y1]){if(l2[Y1][b2]){if(l2[Y1][b2].String&&Y1!=l2[Y1][b2].String){N1.push(l2[Y1][b2].String?l2[Y1][b2].String:Y1);}else if(l2[Y1][b2].Path&&Y1!=l2[Y1][b2].Path){$1=l2[Y1][b2].Path;var m=$1.split("/");if(m.length>1){Z1=E(i2,B2,$1);if(Z1!==""){N1.push($1);O1.push(Z1);Q1=H(i2,B2,$1);if(Q1.length>0){P1=P1.concat(Q1);}}}else{N1.push($1?$1:Y1);}}}else if(l2[Y1][a2]&&Y1!=l2[Y1][a2]){N1.push(l2[Y1][a2]?l2[Y1][a2]:Y1);}}});if(P1.length>0){var k=0;while(k<P1.length){if(N1.indexOf(P1[k])!==-1){P1.splice(k,1);}else{k++;}}}if(R1.length>0){o(R1,function(i,m){f2[m]=true;});}if(N1.length>0){o(N1,function(i,d){f2[d]=true;});}K1+=", parameters: {select:'"+[].concat(N1,R1).join(",");var C2=i2.getODataEntityType(j.entityType);if(C2){var D2=a.getRequestFields(v);if(D2&&D2.length>0){o(D2,function(i,r){if(!f2.hasOwnProperty(r)){f2[r]=true;S1.push(r);}});if(S1.length>0){K1+=","+S1.join(",");}}}if(T1.length>0){var E2=[];o(T1,function(i,s){if(!f2.hasOwnProperty(s)){E2.push(s);}});if(E2.length>0){K1+=","+E2.join(",");}}if(O1.length>0){K1+="'"+","+" expand:'"+O1.join(',');}var F2=a.checkFilterPreference(f.getSetting("ovpCardProperties"));if(F2){K1+="', custom: {cardId: '"+f.getSetting("ovpCardProperties").getProperty("/cardId")+"'}}";}else{K1+="'}";}if(M1&&(M1[1]==='Donut')&&(x===undefined)){K1+=", length: 1";}else if(M1&&(M1[1]==='Donut')&&(x)&&X1){K1+=", length: "+(parseInt(X1,10)+1);}else if(X1){K1+=", length: "+X1;}K1+="}";return K1;}
B.requiresIContext=true;
function E(m,d,s){var f="";var j=s.split("/");if(j.length>1){for(var i=0;i<(j.length-1);i++){var k=m.getODataAssociationEnd(d,j[i]);if(k){d=m.getODataEntityType(k.type);if(f){f=f+"/";}f=f+j[i];}else{return f;}}}return f;}
function H(m,d,s){var f=[];var k=[];var n;var r=s.split("/");if(r.length>1){for(var i=0;i<(r.length-1);i++){var v=m.getODataAssociationEnd(d,r[i]);if(v){d=m.getODataEntityType(v.type);if(d){k=d&&d.key&&d.key.propertyRef;for(var j=0;j<k.length;j++){n=r[i]+"/"+k[j].name;f.push(n);}}}}}return f;}
function I(m,d){var f=false;var r;if(m.DataPoint&&m.DataPoint.AnnotationPath){var i=d[m.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){f=true;r=m;}}if(f===true){return r;}else{L.warning(y.CARD_WARNING+y.INVALID_FORECAST);return undefined;}}
function J(m,d){var f=false;var r;if(m.DataPoint&&m.DataPoint.AnnotationPath){var i=d[m.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){f=true;r=m;}}if(f===true){return r;}else{L.warning(y.CARD_WARNING+y.INVALID_TARGET);return undefined;}}
function K(m,d){var f;o(d,function(i,v){if(v.name===m){if(v["com.sap.vocabularies.Common.v1.Label"]){f=v["com.sap.vocabularies.Common.v1.Label"].String?v["com.sap.vocabularies.Common.v1.Label"].String:v["com.sap.vocabularies.Common.v1.Label"].Path;}else if(v["sap:label"]){f=v["sap:label"];}return false;}});return f;}
function P(f,d){var j=true;if(d==="line"||d==="column"||d==="bar"){o(f,function(i,v){if((v.getUid()==='valueAxis')||(v.getUid()==='categoryAxis')){if(v.getValues().length!=1){j=false;L.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false;}}});}else if(d==="vertical_bullet"){o(f,function(i,v){if((v.getUid()==='actualValues')||(v.getUid()==='categoryAxis')){if(v.getValues().length!=1){j=false;L.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false;}}});}if(j===true){return true;}}
function Q(m,s,v){var d=w.TYPE_KEY;if(!m||!m[s]||!m[s][d]){return v;}var n=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var f=m[s][d];if((n?Array.prototype.indexOf.call(n,f):-1)!==-1){return Number(v);}return v;}
function R(d){if(d){return d;}return"";}
function T(){var d={locale:function(){},format:function(v,f){var i="";if(f){i=f.split('/');}if(i.length>0){var m,s;if(i.length===3){m=Number(i[1]);s=Number(i[2]);if(isNaN(m)){m=-1;}if(isNaN(s)){s=0;}}else{m=2;s=0;}if(i[0]==="axisFormatter"||(i[0]==="ShortFloat")){var n;n=N.getFloatInstance({style:'short',minFractionDigits:m,maxFractionDigits:m?m:1});if(i[0]==="ShortFloat"){n=N.getFloatInstance({style:'short',minFractionDigits:m,maxFractionDigits:m});}if(m===-1){n=N.getFloatInstance({style:'short'});}return n.format(Number(v));}else if(i[0]==="tooltipNoScaleFormatter"){var j=N.getFloatInstance({style:'short',currencyCode:false,shortRefNumber:s,showScale:false,minFractionDigits:m,maxFractionDigits:m});if(m===-1){j=N.getFloatInstance({minFractionDigits:0,currencyCode:false});}return j.format(Number(v));}else if(i[0]==="CURR"){var k=N.getCurrencyInstance({style:'short',currencyCode:false,minFractionDigits:m,maxFractionDigits:m});if(m===-1){k=N.getCurrencyInstance({style:'short',currencyCode:false});}return k.format(Number(v));}else if(i[0].search("%")!==-1){var r=N.getPercentInstance({style:'short',minFractionDigits:m,maxFractionDigits:m});if(m===-1){r=N.getPercentInstance({style:'short',minFractionDigits:1,maxFractionDigits:1});}v=r.format(Number(v));return v;}}if(v.constructor===Date){var x=D.getDateTimeInstance({pattern:f});if(f==="YearMonthDay"){x=D.getDateInstance({style:"medium"});}if(f==="YearMonth"||f==="MMM"){x=D.getDateTimeInstance({format:"MMM"});}if(f==="YearQuarter"||f==="Quarter"){x=D.getDateTimeInstance({format:"QQQ"});}if(f==="YearWeek"||f==="Week"){x=D.getDateTimeInstance({format:"www"});}var I1=c.getApp();var J1=I1&&I1.bResetChartAxisFormatter;if(J1&&f==="hh:mm"){var K1=v.toLocaleTimeString();var L1=K1.split(":");v=L1[0]+":"+L1[1];return v;}var M1=J1?false:true;v=x.format(new Date(v),M1);}return v;}};V.numericFormatter(d);}
function W(v,f){var d=v.getModel();var k=v.getVizType();if(k!="line"&&k!="bubble"){return;}if(!f){f=k==="line"?"categoryAxis":"valueAxis";}var m=v.getModel('ovpCardProperties').getProperty("/entitySet");if(!d||!m){return;}var n=t1(d,m);var r=v.getFeeds();for(var i=0;i<r.length;i++){if(r[i].getUid()===f){var s=r[i].getValues();if(!s){return;}for(var j=0;j<s.length;j++){if(n[s[j][w.TYPE_KEY]]!="Edm.DateTime"){return;}}v.setVizProperties({categoryAxis:{title:{visible:false}}});return;}}}
function X(d,f,i,m,j,k){m=typeof m==="undefined"?false:m;var r=false;var n;if(!d&&m){L.error(j+y.CARD_ERROR+i+y.IS_MANDATORY);return r;}if(!d){L.warning(j+y.CARD_WARNING+i+y.IS_MISSING);r=true;return r;}n=f[d];if(!n||typeof n!=="object"){var s=m?L.error:L.warning;s(j+y.CARD_ERROR+"in "+i+". ("+d+" "+y.NOT_WELL_FORMED);return r;}if(k&&k==="sap.ovp.cards.charts.analytical.analyticalChart"&&i==="Chart Annotation"&&(!n.ChartType||!n.ChartType.EnumMember)){L.error(j+y.CARD_ERROR+y.MISSING_CHARTTYPE+y.CHART_ANNO);return r;}r=true;return r;}
function Y(d){var r=false;if(!d){return r;}var s;var f;var i;var j;var k;var m;var n;var v="";var x;var I1=d.getView();if(I1){v="["+I1.getId()+"] ";}if(!(x=d.getCardPropertiesModel())){L.error(v+y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return r;}n=x.getProperty("/entityType");if(!n||u(n)){L.error(v+y.CARD_ERROR+"in "+y.CARD_ANNO);return r;}s=x.getProperty("/selectionAnnotationPath");f=x.getProperty("/chartAnnotationPath");j=x.getProperty("/presentationAnnotationPath");k=x.getProperty("/identificationAnnotationPath");m=x.getProperty("/dataPointAnnotationPath");i=x.getProperty("/contentFragment");r=X(s,n,"Selection Variant",false,v);r=X(f,n,"Chart Annotation",true,v,i)&&r;r=X(j,n,"Presentation Variant",false,v)&&r;r=X(k,n,"Identification Annotation",true,v)&&r;r=X(m,n,"Data Point",false,v)&&r;return r;}
function Z(d,f,v){}
function $(d){return U.getConfig(d);}
function _(d,f,i,j){var r=false;var m;var k;var n;var s;var v;var x;if(!f.time||u(f.time)){return r;}if(!d){return r;}for(var I1=0;I1<d.length;I1++){if(!d[I1].Dimension||!(k=d[I1].Dimension.PropertyPath)){return r;}m=t1(i,j);if(m&&m[k]){n=m[k][w.TYPE_KEY];s=m[k][w.DISPLAY_FORMAT_KEY];v=m[k][w.SEMANTICS_KEY];x=m[k]["com.sap.vocabularies.Common.v1.IsCalendarYear"]||m[k]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||m[k]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||m[k]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"];}if(n&&n.lastIndexOf("Edm.Date",0)===0){if(n.toLowerCase()==="edm.datetime"){if(s&&s.toLowerCase()==="date"){r=true;}}else{r=true;}}if(n==="Edm.String"&&(x||v&&S.indexOf(v)>-1)){r=true;}if(r){d.unshift(d.splice(I1,1)[0]);break;}}return r;}
function a1(i,d,f){var r="";var j=$(d);var k,m;if(!j){return r;}r=j.default.type;k=i.getSetting("dataModel");m=i.getSetting('ovpCardProperties').getProperty("/entitySet");if(_(f,j,k,m)){r=j.time.type;}return r;}
a1.requiresIContext=true;
function b1(d,j,k){if(!d.length){return;}var m=k==="dimension"?"Dimension":"Measure";var n=[];o(d,function(i,v){if(!v||!v[m]||!v[m].PropertyPath){L.error(y.INVALID_CHART_ANNO);return false;}n.push(v[m].PropertyPath);});var r=q.map(j.feeds,function(f){if(f.type===k){if(f.role){return f.role.split("|");}return[];}});r=q.grep(r,function(f,i){return(r?Array.prototype.indexOf.call(r,f):-1)===i;}).join(", ");L.error(y.CARD_ERROR+y.INVALID_REDUNDANT+k+"(s) "+n.join(", ")+". "+y.ALLOWED_ROLES+j.type+y.CHART_IS+r);}
function c1(v,i){var d;if(v){if(v.String){d=v.String;}else if(v.Boolean||v.Bool){d=d1(v);}else{d=e1(v,i);}}return d;}
function d1(v,d){if(v&&v.Boolean){if(v.Boolean.toLowerCase()==="true"){return true;}else if(v.Boolean.toLowerCase()==="false"){return false;}}else if(v&&v.Bool){if(v.Bool.toLowerCase()==="true"){return true;}else if(v.Bool.toLowerCase()==="false"){return false;}}return d;}
function e1(v,i){var d;if(v){if(v.String){d=Number(v.String);}else if(v.Int){d=Number(v.Int);}else if(v.Decimal){d=Number(v.Decimal);}else if(v.Double){d=Number(v.Double);}else if(v.Single){d=Number(v.Single);}}if(i){var n=N.getFloatInstance({style:'short',minFractionDigits:2,maxFractionDigits:2});if(d){d=n.format(Number(d));}}return d;}
function f1(i,d){function h1(x){if(x){if(x.Path){return"{path:'"+x.Path+"'}";}else{return c1(x);}}else{return"";}}var v=i[i.measureNames];if(d&&d.CriticalityCalculation&&d.CriticalityCalculation.ImprovementDirection){var s=d.CriticalityCalculation.ImprovementDirection.EnumMember;var f=h1(d.CriticalityCalculation.DeviationRangeLowValue);var j=h1(d.CriticalityCalculation.DeviationRangeHighValue);var k=h1(d.CriticalityCalculation.ToleranceRangeLowValue);var m=h1(d.CriticalityCalculation.ToleranceRangeHighValue);return a._calculateCriticalityState(v,s,f,j,k,m,a.criticalityConstants.StateValues);}else{var n=d.Criticality.EnumMember;var r=n?n.split("/"):[];if(r){return r[1];}}}
function g1(d,m,f){var j,k;o(m,function(i,v){if(v["com.sap.vocabularies.Common.v1.Label"]&&v["com.sap.vocabularies.Common.v1.Label"].String===d.measureNames){j=v.name;return false;}else if(v["com.sap.vocabularies.Common.v1.Label"]&&v["com.sap.vocabularies.Common.v1.Label"].Path===d.measureNames){j=v.name;return false;}else if(v["sap:label"]===d.measureNames){j=v.name;return false;}});o(f,function(i,v){if(v.Measure.PropertyPath===j){if(!v.DataPoint||!v.DataPoint.AnnotationPath){return false;}k=v.DataPoint.AnnotationPath;return false;}});return k;}
function h1(i,d){if(i){if(i.Path){return i.Path;}else{return c1(i,d);}}else{return"";}}
function i1(m,d){function f(s,i){return s&&s.indexOf(i,s.length-i.length)!==-1;}var j=false;o(m,function(i,v){if(v.DataPoint&&v.DataPoint.AnnotationPath){var k=d[v.DataPoint.AnnotationPath.substring(1)];if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ImprovementDirection&&k.CriticalityCalculation.ImprovementDirection.EnumMember){var s=k.CriticalityCalculation.ImprovementDirection.EnumMember;var n=h1(k.CriticalityCalculation.DeviationRangeLowValue);var r=h1(k.CriticalityCalculation.DeviationRangeHighValue);var x=h1(k.CriticalityCalculation.ToleranceRangeLowValue);var I1=h1(k.CriticalityCalculation.ToleranceRangeHighValue);if(f(s,"Minimize")||f(s,"Minimizing")){if(I1&&r){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}else if(f(s,"Maximize")||f(s,"Maximizing")){if(x&&n){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}else if(f(s,"Target")){if(x&&n&&I1&&r){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}}else if(k&&k.Criticality){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_IMPROVEMENT_DIR);}}});if(j===true&&m.length>1){L.warning(y.CARD_WARNING+y.INVALID_SEMANTIC_MEASURES);}return j;}
function j1(m,d,f,v){function i(M1,N1){return M1&&M1.indexOf(N1,M1.length-N1.length)!==-1;}var r=[null,null];var j=true;var k=m.Measure.PropertyPath;if(f[k]){if(f[k][w.LABEL_KEY_V4]){k=s1(f[k][w.LABEL_KEY_V4].String?f[k][w.LABEL_KEY_V4].String:f[k][w.LABEL_KEY_V4].Path,v,f);}else if(f[k][w.LABEL_KEY]){k=f[k][w.LABEL_KEY];}else if(k){k=k;}}var n=m.DataPoint.AnnotationPath;var s=d[n.substring(1)];if(!s.CriticalityCalculation||!s.CriticalityCalculation.ImprovementDirection||!s.CriticalityCalculation.ImprovementDirection.EnumMember){return r;}var x=s.CriticalityCalculation.ImprovementDirection.EnumMember;var I1=h1(s.CriticalityCalculation.DeviationRangeLowValue,j);var J1=h1(s.CriticalityCalculation.DeviationRangeHighValue,j);var K1=h1(s.CriticalityCalculation.ToleranceRangeLowValue,j);var L1=h1(s.CriticalityCalculation.ToleranceRangeHighValue,j);if(i(x,"Minimize")||i(x,"Minimizing")){if(L1&&J1){r[0]=h.getText("MINIMIZING_LESS",[k,L1]);r[1]=h.getText("MINIMIZING_MORE",[k,J1]);r[2]=h.getText("MINIMIZING_CRITICAL",[L1,k,J1]);}}else if(i(x,"Maximize")||i(x,"Maximizing")){if(K1&&I1){r[0]=h.getText("MAXIMISING_MORE",[k,K1]);r[1]=h.getText("MAXIMISING_LESS",[k,I1]);r[2]=h.getText("MAXIMIZING_CRITICAL",[I1,k,K1]);}}else if(i(x,"Target")){if(K1&&I1&&L1&&J1){r[0]=h.getText("TARGET_BETWEEN",[K1,k,L1]);r[1]=h.getText("TARGET_AROUND",[k,I1,J1]);r[2]=h.getText("TARGET_CRITICAL",[I1,k,K1,L1,J1]);}}return r;}
function k1(m,v,d){if(v&&v.DataPoint&&v.DataPoint.AnnotationPath){var f=d[v.DataPoint.AnnotationPath.substring(1)];var i,j;if(f&&f.ValueFormat){i=f.ValueFormat;}else if(f&&f.NumberFormat){i=f.NumberFormat;}if(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int){j=i.NumberOfFractionalDigits.Int;if(m<Number(j)){m=Number(j);}}}return m;}
function l1(m,v,d){if(v&&v.DataPoint&&v.DataPoint.AnnotationPath){var f=d[v.DataPoint.AnnotationPath.substring(1)];var s,i;if(f&&f.ValueFormat){s=f.ValueFormat;}else if(f&&f.NumberFormat){s=f.NumberFormat;}if(s){if(s.ScaleFactor&&s.ScaleFactor.Decimal){i=Number(s.ScaleFactor.Decimal);}else if(s.ScaleFactor&&s.ScaleFactor.Int){i=Number(s.ScaleFactor.Int);}if(!isNaN(i)){if(m===undefined){m=Number(i);}else if(m>Number(i)){m=Number(i);}}}}return m;}
function m1(m,s){if(m&&m[s]&&(m[s]["Org.OData.Measures.V1.ISOCurrency"]||(m[s][w.SEMANTICS_KEY]&&m[s][w.SEMANTICS_KEY]===w.CURRENCY_CODE))){return true;}return false;}
function n1(m,v,f){if(m[v[f].PropertyPath][w.EDM_TYPE]===w.EDM_INT32){return true;}return false;}
function o1(m,v,f){if(m[v[f].PropertyPath][w.EDM_TYPE]===w.EDM_INT64){return true;}return false;}
function p1(d,f,r,s){var x,I1,J1,K1,L1;var M1,N1,O1,P1,Q1,R1=false;var S1;var T1,U1,V1;var W1,X1=[],Y1=[];var Z1;var $1;var _1=s&&s.getView();var a2,b2;var c2=_1&&_1.getModel("ui");var d2=c2&&c2.getProperty("/chartSettings");x=d.getModel('ovpCardProperties');if(O.checkIfAPIIsUsed(s)){R1=x&&x.getData()&&x.getData().showDataLabel;}L1=d2?d2.showDataLabel:R1;M1=d.getVizType();N1=$();for(var e2 in N1){if(($1=N1[e2].reference)&&N1[$1]){var f2=p({},N1[$1]);N1[e2]=f2;}if(N1[e2].default.type===M1||(N1[e2].time&&N1[e2].time.type===M1)){O1=N1[e2];break;}}if(!O1){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.CARD_CONFIG_ERROR+M1+" "+y.CARD_CONFIG_JSON);return;}if(!x){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return;}var g2=d.getModel();var h2=x.getProperty("/entitySet");if(!g2||!h2){return;}I1=x.getProperty("/entityType");if(!I1){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}var i2=t1(g2,h2);J1=x.getProperty("/chartAnnotationPath");if(!J1||!(K1=I1[J1])){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}if(!(P1=K1.DimensionAttributes)||!P1.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return;}var j2;if(!(Q1=K1.MeasureAttributes)||!Q1.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return;}else{var k2=Q1[0].DataPoint?I1[Q1[0].DataPoint.AnnotationPath.substring(1)]:null;var l2=k2&&k2.ValueFormat&&k2.ValueFormat.NumberOfFractionalDigits&&k2.ValueFormat.NumberOfFractionalDigits.Int;j2=l2?l2:0;}Z1=_(P1,O1,g2,h2);if(Z1){O1=O1.time;}else{O1=O1.default;}var m2=x.getProperty("/ChartProperties")||x.getProperty("/chartProperties");if(x&&x.getProperty("/tabs")&&(m2===undefined)){a2=_1.byId("ovp_card_dropdown");b2=parseInt(a2.getSelectedKey(),10);m2=x.getProperty("/tabs")&&x.getProperty("/tabs")[b2-1]&&(x.getProperty("/tabs")[b2-1]["ChartProperties"]||x.getProperty("/tabs")[b2-1]["chartProperties"]);}var n2=false;var o2=j2>0?"tooltipNoScaleFormatter/"+j2.toString()+"/":'tooltipNoScaleFormatter/-1/';var p2=new b({formatString:o2});p2.connect(d.getVizUid());p2.connect(d.getVizUid());d._oOvpVizFrameTooltip=p2;[O1.dimensions,O1.measures].forEach(function(k,i){var m=i?Q1:P1;var n=i?"measure(s)":"dimension(s)";if(k.min&&m.length<k.min){L.error(y.CARD_ERROR+"in "+M1+" "+y.CARD_LEAST+k.min+" "+n);n2=true;}if(k.max&&m.length>k.max){L.error(y.CARD_ERROR+"in "+M1+y.CARD_MOST+k.max+" "+n);n2=true;}});if(n2){return;}var q2=true;if(O1.properties&&O1.properties.hasOwnProperty("hideLabel")&&!O1.properties["hideLabel"]){q2=false;}var r2=true;var s2=false;if(M1==='donut'){s2=true;}d.removeAllAggregation();S1={legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:r2?false:true,selectability:{legendSelection:s2?true:false,axisLabelSelection:false,mode:'EXCLUSIVE',plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:'disabled'}},plotArea:{window:{start:'firstDataPoint',end:'lastDataPoint'},dataLabel:{visible:L1||s2?true:false,type:'value'},dataPoint:{invalidity:'ignore'},alignment:{vertical:'top'}},categoryAxis:{label:{truncatedLabelRatio:0.15}},general:{groupData:false,showAsUTC:true}};if(O1.properties&&O1.properties.semanticColor===true&&i1(Q1,I1)){var t2=h.getText("GOOD");var u2=h.getText("BAD");var v2=h.getText("CRITICAL");var w2=h.getText("OTHERS");if(Q1.length===1){var x2=j1(Q1[0],I1,i2,d);var t2=x2[0]||t2,u2=x2[1]||u2,v2=x2[2]||v2,w2=h.getText("OTHERS");}S1.plotArea.dataPointStyle={rules:[{callback:function(k){var m=g1(k,i2,Q1);if(!m){return false;}var n=I1[m.substring(1)];var v=f1(k,n);if(v===a.criticalityConstants.StateValues.Positive){return true;}else if(v==="Positive"){return true;}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},"displayName":t2},{callback:function(k){var m=g1(k,i2,Q1);if(!m){return false;}var n=I1[m.substring(1)];var v=f1(k,n);if(v===a.criticalityConstants.StateValues.Critical){return true;}else if(v==="Critical"){return true;}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},"displayName":v2},{callback:function(k){var m=g1(k,i2,Q1);if(!m){return false;}var n=I1[m.substring(1)];var v=f1(k,n);if(v===a.criticalityConstants.StateValues.Negative){return true;}else if(v==="Negative"){return true;}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},"displayName":u2},{callback:function(k){var m=g1(k,i2,Q1);if(!m){return false;}var n=I1[m.substring(1)];var v=f1(k,n);if(v===a.criticalityConstants.StateValues.None){return true;}else if(v==="Neutral"){return true;}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},"displayName":w2}]};}var y2=x.getProperty("/bEnableStableColors");var z2=x.getProperty("/colorPalette");var A2;if(!y2&&z.indexOf(K1.ChartType.EnumMember)>=0&&z2&&Object.keys(z2).length>=2&&Object.keys(z2).length<=4){o(P1,function(i,k){if(k&&k.Role&&k.Role.EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){A2=k.Dimension&&k.Dimension.PropertyPath;return;}});var B2;if(A2){if(i2&&i2[A2]){if(i2[A2][w.LABEL_KEY_V4]){B2=s1(i2[A2][w.LABEL_KEY_V4].String?i2[A2][w.LABEL_KEY_V4].String:i2[A2][w.LABEL_KEY_V4].Path,d,i2);}else if(i2[A2][w.LABEL_KEY]){B2=i2[A2][w.LABEL_KEY];}else if(A2){B2=A2;}}if(z2 instanceof Array){var C2=z2.map(function(v){return v.color;});var D2=z2.map(function(v){return v.legendText;});var E2=D2[0]!=undefined?D2[0]:h.getText("OTHERS");var F2=D2[1]!=undefined?D2[1]:h.getText("BAD");var G2=D2[2]!=undefined?D2[2]:h.getText("CRITICAL");var H2=D2[3]!=undefined?D2[3]:h.getText("GOOD");}S1.plotArea.dataPointStyle={rules:[{callback:function(k){if(k&&(k[B2]==="3"||k[B2]===3)){if(z2 instanceof Array){if(z2.length<4){return false;}}else if(z2&&!z2.hasOwnProperty(3)){return false;}return true;}},properties:{color:z2 instanceof Array&&C2.length?C2[3]:z2[3]&&z2[3]["color"]},"displayName":H2||z2[3]&&z2[3]["legendText"]},{callback:function(k){if(k&&(k[B2]==="2"||k[B2]===2)){if(z2 instanceof Array){if(z2.length<3){return false;}}else if(z2&&!z2.hasOwnProperty(2)){return false;}return true;}},properties:{color:z2 instanceof Array&&C2.length?C2[2]:z2[2]&&z2[2]["color"]},"displayName":G2||z2[2]&&z2[2]["legendText"]},{callback:function(k){if(k&&(k[B2]==="1"||k[B2]===1)){return true;}},properties:{color:z2 instanceof Array&&C2.length?C2[1]:z2[1]&&z2[1]["color"]},"displayName":F2||z2[1]&&z2[1]["legendText"]},{callback:function(k){if(k&&(k[B2]==="0"||k[B2]===0)){return true;}},properties:{color:z2 instanceof Array&&C2.length?C2[0]:z2[0]&&z2[0]["color"]},"displayName":E2||z2[0]&&z2[0]["legendText"]}]};}}var I2=false;var J2=false;if(K1.ChartType.EnumMember===w.SCATTER_CHARTTYPE||K1.ChartType.EnumMember===w.BUBBLE_CHARTTYPE||K1.ChartType.EnumMember===w.LINE_CHARTTYPE){if(K1&&K1.AxisScaling&&K1.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var K2=K1.AxisScaling;if(K2.AutoScaleBehavior&&K2.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var L2=K2.AutoScaleBehavior;if(L2.ZeroAlwaysVisible&&L2.ZeroAlwaysVisible.Bool=="true"){S1.plotArea.adjustScale=false;I2=true;}else if(L2.DataScope){S1.plotArea.adjustScale=true;I2=true;}}else if(K2.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&K2.ScaleBehavior&&K2.ScaleBehavior.EnumMember){var M2=K2.ScaleBehavior.EnumMember;var N2=M2.substring(M2.lastIndexOf('/')+1,M2.length);if(N2=="FixedScale"){J2=true;}}}else if(K1&&K1.AxisScaling&&K1.AxisScaling.EnumMember){var O2=K1.AxisScaling.EnumMember.substring(K1.AxisScaling.EnumMember.lastIndexOf('/')+1,K1.AxisScaling.EnumMember.length);switch(O2){case"AdjustToDataIncluding0":S1.plotArea.adjustScale=false;I2=true;break;case"AdjustToData":S1.plotArea.adjustScale=true;I2=true;break;case"MinMaxValues":J2=true;break;default:break;}}if(J2){var P2=[];if(K1["MeasureAttributes"][0]&&K1["MeasureAttributes"][0].DataPoint&&K1["MeasureAttributes"][0].DataPoint.AnnotationPath){var Q2=K1["MeasureAttributes"][0].DataPoint.AnnotationPath;var R2=Q2.substring(Q2.lastIndexOf('@')+1,Q2.length);if(I1&&I1[R2]){var S2=I1[R2];if(S2&&S2.MaximumValue&&S2.MaximumValue.Decimal&&S2.MinimumValue&&S2.MinimumValue.Decimal){P2.push({feed:"valueAxis",max:S2.MaximumValue.Decimal,min:S2.MinimumValue.Decimal});I2=true;}else{L.error(y.ERROR_MISSING_AXISSCALES);}}}if(K1.ChartType.EnumMember!==w.LINE_CHARTTYPE&&K1["MeasureAttributes"][1]&&K1["MeasureAttributes"][1].DataPoint&&K1["MeasureAttributes"][1].DataPoint.AnnotationPath){var Q2=K1["MeasureAttributes"][1].DataPoint.AnnotationPath;var R2=Q2.substring(Q2.lastIndexOf('@')+1,Q2.length);if(I1&&I1[R2]){var S2=I1[R2];if(S2&&S2.MaximumValue&&S2.MaximumValue.Decimal&&S2.MinimumValue&&S2.MinimumValue.Decimal){P2.push({feed:"valueAxis2",max:S2.MaximumValue.Decimal,min:S2.MinimumValue.Decimal});I2=true;}else{L.error(y.ERROR_MISSING_AXISSCALES);}}}d.setVizScales(P2);}}U1=P1.slice();V1=Q1.slice();var T2=0;var U2=0;var V2;var W2;var X2=false;var Y2=false;var Z2;var $2=[];var _2=[],a3=[];if((M1==="column"||M1==="bar"||M1==="vertical_bullet")&&O1.feeds&&(O1.feeds.length>0)){var b3;for(b3=0;b3<O1.feeds.length;b3++){if(O1.feeds[b3].uid==="color"){O1.feeds.splice(b3,1);break;}}for(b3=0;b3<O1.feeds.length;b3++){if(O1.feeds[b3].uid==="categoryAxis"){delete O1.feeds[b3].role;break;}}if(x.getProperty("/colorPalette")){for(b3=0;b3<O1.feeds.length;b3++){if(O1.feeds[b3].uid==="categoryAxis"){O1.feeds[b3].role="Category";break;}}O1.feeds.push({"uid":"color","min":1,"type":"dimension","role":"Series"});}}o(O1.feeds,function(i,m){var n=m.uid;var v=[];if(m.type){var y3,z3,A3;if(m.type==="dimension"){y3=P1.length;z3="Dimension";A3="dimensions";T1=U1;W1=X1;}else{y3=Q1.length;z3="Measure";A3="measures";T1=V1;W1=Y1;}var B3=0,C3=y3;if(m.min){B3=B3>m.min?B3:m.min;}if(m.max){C3=C3<m.max?C3:m.max;}if(!m.role){var D3=T1.length;for(var j=0;j<D3&&v.length<C3;++j){var E3=T1[j];T1.splice(j,1);--D3;--j;v.push(E3);if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY];}if(m1(i2,Z2)){X2=true;}else{Y2=true;}if(!X2){T2=k1(T2,E3,I1);V2=l1(V2,E3,I1);}else{U2=k1(U2,E3,I1);W2=l1(W2,E3,I1);}}}else{var F3=m.role.split("|");o(F3,function(j,Y3){if(v.length===C3){return false;}var D3=T1.length;for(var k=0;k<D3&&v.length<C3;++k){var E3=T1[k];if(E3&&E3.Role&&E3.Role.EnumMember&&E3.Role.EnumMember.split("/")&&E3.Role.EnumMember.split("/")[1]){var Z3=E3.Role.EnumMember.split("/")[1];if(Z3===Y3){T1.splice(k,1);--D3;--k;v.push(E3);if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY];}if(m1(i2,Z2)){X2=true;}else{Y2=true;}if(!X2){T2=k1(T2,E3,I1);V2=l1(V2,E3,I1);}else{U2=k1(U2,E3,I1);W2=l1(W2,E3,I1);}}}else if((W1?Array.prototype.indexOf.call(W1,E3):-1)===-1){W1.push(E3);}}});if(v.length<C3){o(W1,function(k,E3){var Y3;var b3;if((Y3=O1[A3].defaultRole)&&((F3?Array.prototype.indexOf.call(F3,Y3):-1)!==-1)&&(b3=(T1?Array.prototype.indexOf.call(T1,E3):-1)!==-1)){T1.splice(b3,1);v.push(E3);if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_ISOCurrency].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path?i2[E3[z3].PropertyPath][w.UNIT_KEY_V4_Unit].Path:undefined;}else if(i2[E3[z3].PropertyPath][w.UNIT_KEY]){Z2=i2[E3[z3].PropertyPath][w.UNIT_KEY];}if(m1(i2,Z2)){X2=true;}else{Y2=true;}if(!X2){T2=k1(T2,E3,I1);V2=l1(V2,E3,I1);}else{U2=k1(U2,E3,I1);W2=l1(W2,E3,I1);}if(v.length===C3){return false;}}});}if(v.length<B3){L.error(y.CARD_ERROR+y.MIN_FEEDS+M1+" "+y.FEEDS_OBTAINED+v.length+" "+y.FEEDS_REQUIRED+B3+" "+y.FEEDS);return false;}}if(v.length){var G3=[];var H3;if(!(H3=d.getDataset())){L.error(y.NO_DATASET);return false;}G=I1;o(v,function(i,E3){if(!E3||!E3[z3]||!E3[z3].PropertyPath){L.error(y.INVALID_CHART_ANNO);return false;}var k=E3[z3].PropertyPath;var B2=k;var Y3=k;var Z3=null;if(i2&&i2[k]){if(i2[k][w.LABEL_KEY_V4]){if(i2[k][w.LABEL_KEY_V4].String){B2=s1(i2[k][w.LABEL_KEY_V4].String,d,i2);}else if(i2[k][w.LABEL_KEY_V4].Path){B2=i2[k][w.LABEL_KEY_V4].Path;}else{B2=k;}}else if(i2[k][w.LABEL_KEY]){B2=i2[k][w.LABEL_KEY];}else if(k){B2=k;}if(i2[k][w.TEXT_KEY_V4]){Y3=i2[k][w.TEXT_KEY_V4].String?i2[k][w.TEXT_KEY_V4].String:i2[k][w.TEXT_KEY_V4].Path;}else if(i2[k][w.TEXT_KEY]){Y3=i2[k][w.TEXT_KEY];}else if(k){Y3=k;}Z3=i2[k][w.TYPE_KEY]||null;}var $3;if((Z3==="Edm.DateTime"||Z3==="Edm.DateTimeOffset")&&Y3===k){$3="{path:'"+k+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}";}else{if(i2[k]&&i2[k][w.TEXT_KEY_V4]&&i2[k][w.TEXT_KEY_V4][w.TEXT_ARRANGEMENT_ANNO]){var _3,a4;_3=i2[k][w.TEXT_ARRANGEMENT_ANNO];a4=_3&&_3.EnumMember;if(!a4){_3=i2[k][w.TEXT_KEY_V4][w.TEXT_ARRANGEMENT_ANNO];a4=_3&&_3.EnumMember;}if(!a4){var b4=G;_3=b4&&b4[w.TEXT_ARRANGEMENT_ANNO];a4=_3&&_3.EnumMember;}switch(a4){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":$3="{"+Y3+"}"+" "+"("+"{"+k+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":$3="{"+k+"}"+" "+"("+"{"+Y3+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":$3="{"+Y3+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":$3="{"+k+"}"+" "+"("+"{"+Y3+"}"+")";break;default:$3="{"+k+"}";break;}}else{$3="{"+Y3+"}";}}G3.push(B2);if(z3==="Dimension"){if(n==="waterfallType"){var c4=new e({name:B2,value:"{"+k+"}"});}else{var c4=new e({name:B2,value:"{"+k+"}",displayValue:$3});}var d4=i2[k][w.SEMANTICS_KEY];var e4=i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYear"]&&i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYear"].Bool||i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]&&i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"].Bool||i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]&&i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"].Bool||i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]&&i2[k]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"].Bool;if(Z1&&(Z3==="Edm.DateTime"||e4||Z3==="Edm.DateTimeOffset"||(d4&&d4.lastIndexOf("year",0)===0))){c4.setDataType("date");}H3.addDimension(c4);if((a3?Array.prototype.indexOf.call(a3,B2):-1)===-1){a3.push(B2);}}else{H3.addMeasure(new M({name:B2,value:"{"+k+"}"}));if(((_2?Array.prototype.indexOf.call(_2,B2):-1)===-1)&&(n!="bubbleWidth")){_2.push(B2);}}});d.addFeed(new F({'uid':n,'type':z3,'values':G3}));if(n==="categoryAxis"){S1[n]={title:{visible:q2?false:true,text:G3.join(", ")},label:{formatString:X2?'CURR':'axisFormatter',truncatedLabelRatio:0.15}};}else{S1[n]={title:{visible:q2?false:true,text:G3.join(", ")},label:{formatString:X2?'CURR':'axisFormatter'}};}$2.push(S1[n]);if(O1.hasOwnProperty("vizProperties")){var I3=0;var J3=O1.vizProperties.length;var K3;var L3;for(;I3<J3;I3++){if(O1.vizProperties[I3].hasOwnProperty("value")){L3=O1.vizProperties[I3].value;}if(O1.vizProperties[I3].hasOwnProperty("path")){K3=(O1.vizProperties[I3].path).split(".");var M3=K3.length;var N3,O3;var P3;for(var Q3=0,P3=K3[0],N3=S1,O3=m2;Q3<M3;++Q3){if(Q3===M3-1){if(O3&&O3.hasOwnProperty(P3)){if(M1==='donut'&&(O3[P3]==="value"||O3[P3]==="percentage")){L3=O3[P3];}else if(M1!='donut'){L3=O3[P3];}}if((I2&&(P3!="adjustScale"))||(!I2&&(P3==="adjustScale"))||(!I2&&(P3!="adjustScale"))){N3[P3]=L3;}break;}N3[P3]=N3[P3]||{};N3=N3[P3];if(O3){O3[P3]=O3[P3]||{};O3=O3[P3];}P3=K3[Q3+1];}}}}if(m.hasOwnProperty("vizProperties")){var i=0;var R3=m.vizProperties.length;var S3;var T3;var U3;for(;i<R3;i++){if(m.vizProperties[i].hasOwnProperty("method")){T3=m.vizProperties[i].method;switch(T3){case'count':S3=G3.length;if(m.vizProperties[i].hasOwnProperty("min")&&S3<=m.vizProperties[i].min){S3=m.vizProperties[i].min;}else if(m.vizProperties[i].hasOwnProperty("max")&&S3>=m.vizProperties[i].max){S3=m.vizProperties[i].max;}break;default:break;}}else if(m.vizProperties[i].hasOwnProperty("value")){S3=m.vizProperties[i].value;}if(m.vizProperties[i].hasOwnProperty("path")){U3=(m.vizProperties[i].path).split(".");var V3=U3.length;for(var j=0,W3=U3[0],X3=S1;j<V3;++j){if(j===V3-1){X3[W3]=S3;break;}X3[W3]=X3[W3]||{};X3=X3[W3];W3=U3[j+1];}}}}}}});var c3=d.getFeeds();if(O1.properties&&O1.properties.semanticPattern===true&&P(c3,M1)){o(c3,function(i,v){if(c3[i].getType()==='Measure'&&((c3[i].getUid()==='valueAxis')||(c3[i].getUid()==='actualValues'))){var k;o(Q1,function(b3,C3){var D3=K(C3.Measure.PropertyPath,i2);if(D3===c3[i].getValues()[0]){k=I(C3,I1);return false;}});if(k){var m=K(k.Measure.PropertyPath,i2);var n=(I1[k.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||I1[k.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path);var y3=K(n,i2);var z3=h.getText("ACTUAL",[m]);var A3=h.getText("FORECAST",[y3]);S1.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:m},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:z3},{dataContext:{MeasureNamesDimension:y3},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:A3}]};d.getDataset().addMeasure(new M({name:y3,value:"{"+n+"}"}));var B3=c3[i].getValues();B3.push(y3);c3[i].setValues(B3);}return false;}});}var d3=false;if(z2&&z2.dimensionSettings&&Object.keys(z2.dimensionSettings).length>0){var e3=Object.keys(z2.dimensionSettings);for(var i=0;i<e3.length;i++){var f3=e3[i];var g3=z2.dimensionSettings[f3];if(Object.keys(g3).length>10){d3=true;break;}}}if(y2&&A.indexOf(K1.ChartType.EnumMember)>=0&&!d3){var h3=[];var i3=true;for(var i=0;i<P1.length;i++){var j3=P1[i].Dimension.PropertyPath;h3.push(j3);}for(var i=0;i<h3.length;i++){var f3=h3[i];if(e3.indexOf(f3)>-1){var k3=z2.dimensionSettings[f3];var l3=Object.keys(k3);var m3=[];for(var i=0;i<l3.length;i++){var n3=k3[l3[i]];m3.push(n3);}i3=i3&&m3.every(G1);}}if(i3){var o3=[];for(var i=0;i<h3.length;i++){var f3=h3[i];if(e3.indexOf(f3)>-1){var k3=z2.dimensionSettings[f3];var l3=Object.keys(k3);var m3=[];for(var i=0;i<l3.length;i++){var n3=k3[l3[i]];m3.push(n3);}F1(m3);for(var j=0;j<m3.length;j++){var p3=m3[j].dimensionValue;var q3=m3[j].color;var n3={"properties":{"color":q3}};n3.dataContext={};var r3=q1(i2,d,f3);n3.dataContext[r3]=p3;n3.displayName=p3;o3.push(n3);}}}S1.plotArea.dataPointStyle=S1.plotArea.dataPointStyle||{};S1.plotArea.dataPointStyle["rules"]=o3;}else{var o3=[];for(var i=0;i<h3.length;i++){var f3=h3[i];if(e3.indexOf(f3)>-1){var k3=z2.dimensionSettings[f3];var l3=Object.keys(k3);var m3=[];for(var i=0;i<l3.length;i++){var n3=k3[l3[i]];m3.push(n3);}F1(m3);var s3=m3.map(H1);}}S1.legend.order=function(m,n){var k=s3.indexOf(m);var v=s3.indexOf(n);return k>v?1:-1;};}}if(O1.properties&&O1.properties.semanticPattern===true&&P(c3,M1)&&d.getVizType()==="vertical_bullet"){o(c3,function(i,v){if(c3[i].getType()==='Measure'&&((c3[i].getUid()==='valueAxis')||(c3[i].getUid()==='actualValues'))){var k;o(Q1,function(b3,y3){var z3=K(y3.Measure.PropertyPath,i2);if(z3===c3[i].getValues()[0]){k=J(y3,I1);return false;}});if(k){var m=(I1[k.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||I1[k.DataPoint.AnnotationPath.substring(1)].TargetValue.Path);var n=K(m,i2);d.getDataset().addMeasure(new M({name:n,value:"{"+m+"}"}));d.addFeed(new F({'uid':"targetValues",'type':"Measure",'values':[n]}));}return false;}});}if(X2&&Y2){L.warning(h.getText("Currency_non_currency_measure"));}o(c3,function(i,k){var m=k.getProperty("type");if(m==="Measure"){var n=k.getProperty("values");var v=true;var y3=K1.MeasureAttributes.filter(function(z3){return n.indexOf(i2[z3[m]["PropertyPath"]][w.LABEL_KEY])>=0||n.indexOf(i2[z3[m]["PropertyPath"]][w.LABEL_KEY_V4])>=0;});o(y3,function(j,z3){if(n1(i2,z3,m)||o1(i2,z3,m)){v=false;}else{v=true;return false;}});if(!v){S1[k.getProperty('uid')]['label']['allowDecimals']=false;}}});var t3;if(W2===undefined){W2="";}if(V2===undefined){V2="";}if(X2){t3=v1(W2,X2);}else{t3=v1(V2,X2);}if(f){f.setScale(t3);}u1(_2,a3,r);var u3="";o(c3,function(i,k){var m="-1";var n=k.getProperty("type");if(n==="Measure"){var v=$2.filter(function(A3){var B3=A3["title"]["text"].split(",").filter(function(C3){if(k.getValues().indexOf(C3.trim())>=0){return true;}else{return false;}});if(B3.length>0){return true;}else{return false;}});if(v&&v.length){var y3=k.getValues();if(y3&&y3.length){o(y3,function(i,A3){var B3=A3.trim();var C3=Q1.filter(function(G3){if(G3["Measure"]&&G3["Measure"]["PropertyPath"]){var H3=G3["Measure"]["PropertyPath"];if((i2[H3]&&i2[H3][w.LABEL_KEY]===B3)||(i2[H3]&&i2[H3][w.LABEL_KEY_V4]===B3)){return true;}else{return false;}}});if(C3&&C3.length){var D3=C3[0];if(!n1(i2,D3,n)&&!o1(i2,D3,n)){var E3="";if(D3&&D3["DataPoint"]&&D3["DataPoint"]["AnnotationPath"]&&D3["DataPoint"]["AnnotationPath"]){E3=D3["DataPoint"]["AnnotationPath"]&&D3["DataPoint"]["AnnotationPath"].substring(1);if(E3!=""){var F3;F3=I1[E3]&&I1[E3]["ValueFormat"]&&I1[E3]["ValueFormat"]["NumberOfFractionalDigits"]&&I1[E3]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];m=F3>m?F3:m;}}}else{m=m<"0"?"0":m;}}});}}if(v&&v[0]&&v[0].label&&v[0].label.formatString){var z3=v[0].label.formatString;}u3="";if(X2){if(z3==='CURR'){u3='CURR/'+m.toString()+"/";}else{u3='axisFormatter/'+m.toString()+"/";}}else{u3='axisFormatter/'+m.toString()+"/";}if(v&&v[0]){v[0].label.formatString=u3;}}});if(M1==="vertical_bullet"){S1["valueAxis"]={title:{visible:q2?false:true},label:{formatString:u3}};}var v3="";var w3="";if(X2){v3=U2.toString();w3='CURR/'+U2.toString()+"/";}else{v3=T2.toString();w3='axisFormatter/'+T2.toString()+"/";}if(M1==="donut"||L1){if(M1==="donut"){S1.legendGroup={layout:{height:0.1}};}S1.plotArea.dataLabel.formatString=w3;if(S1.plotArea.dataLabel.type==="percentage"){S1.plotArea.dataLabel.formatString="0.0%/"+v3+"/";}}b1(U1,O1,"dimension");b1(V1,O1,"measure");if(Z1){var x3=P1[0].Dimension.PropertyPath;if(i2[x3][w.SEMANTICS_KEY]==='yearmonth'||i2[x3]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){S1.timeAxis.levels=["year","month"];}else if(i2[x3][w.SEMANTICS_KEY]==='yearquarter'||i2[x3]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){S1.timeAxis.levels=["year","quarter"];}else if(i2[x3][w.SEMANTICS_KEY]==='yearweek'||i2[x3]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){S1.timeAxis.levels=["year","week"];}else if(i2[x3][w.SEMANTICS_KEY]==='year'||i2[x3]["com.sap.vocabularies.Common.v1.IsCalendarYear"]){S1.timeAxis.levels=["year"];}}d.setVizProperties(S1);}
function q1(m,v,d){var f="";if(m&&m[d]){if(m[d][w.LABEL_KEY_V4]){f=s1(m[d][w.LABEL_KEY_V4].String?m[d][w.LABEL_KEY_V4].String:m[d][w.LABEL_KEY_V4].Path,v,m);}else if(m[d][w.LABEL_KEY]){f=m[d][w.LABEL_KEY];}else if(d){f=d;}}return f;}
function r1(v,d,f){if(v&&(v.getVizType()==="bubble"||v.getVizType()==="scatter")){return;}var j,k,n,r;var s;var x=w.UNIT_KEY;var I1=w.UNIT_KEY_V4_ISOCurrency;var J1=w.UNIT_KEY_V4_Unit;var K1;var L1=[];if(!(j=v.getModel('ovpCardProperties'))){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return;}var M1=v.getModel();var N1=j.getProperty("/entitySet");if(!M1||!N1){return;}k=j.getProperty("/entityType");if(!k){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}var O1=t1(M1,N1);n=j.getProperty("/chartAnnotationPath");if(!n||!(r=k[n])){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}if(!(s=r.MeasureAttributes)||!s.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return;}o(s,function(i,m){K1=m.Measure.PropertyPath;if(m.DataPoint&&m.DataPoint.AnnotationPath){var X1=k[m.DataPoint.AnnotationPath.substring(1)];if(X1.ForecastValue&&(X1.ForecastValue.PropertyPath||X1.ForecastValue.Path)){L1.push((X1.ForecastValue.PropertyPath||X1.ForecastValue.Path));}}L1.push(K1);});var P1=d?d.results:null;var Q1="";var R1=true;var S1=[];var T1=v.getFeeds();o(T1,function(i,m){if(m.getType()==="Measure"){S1=S1.concat(m.getValues());}});if(P1){o(L1,function(i,m){var X1=q1(O1,v,m);if((S1?Array.prototype.indexOf.call(S1,X1):-1)!=-1){if(O1&&O1[m]){var Y1;if(O1[m][I1]){Y1=O1[m][I1].Path?O1[m][I1].Path:O1[m][I1].String;}else if(O1[m][J1]){Y1=O1[m][J1].Path?O1[m][J1].Path:O1[m][J1].String;}else if(O1[m][x]){Y1=O1[m][x];}if(!Y1){R1=false;return false;}if(Y1&&O1[Y1]){for(var i=0;i<P1.length;i++){var Z1=P1[i];if(R1){if(Q1&&Z1[Y1]&&(Z1[Y1]!="")&&(Q1!="")&&(Q1!=Z1[Y1])){R1=false;break;}}Q1=Z1[Y1];}}}}});}var U1="";if(R1){if(Q1!=""){U1=h.getText("IN_NO_SCALE",[Q1]);U1=" "+U1;}if(f){f.setText(U1);f.data("aria-label",U1,true);var V1=v.data("aria-label");if(V1&&U1&&V1.indexOf(U1)===-1){var W1=V1+U1;v.data("aria-label",W1,true);}}}}
function s1(f,v,m){var r;var s;var d;if(f&&f.indexOf("{")===0){f=f.slice(1,-1);if(f.indexOf(">")!=-1){d=f.split(">");r=d[0];s=d[1];}else if(f.indexOf("&gt;")!=-1){d=f.split("&gt;");r=d[0];s=d[1];}try{f=v.getModel(r).getProperty(s);}catch(i){f=m[f][w.LABEL_KEY_V4].String;L.error("Unable to read labels from resource file",i);}}return f;}
function t1(m,d){var f=U.cacheODataMetadata(m);if(!f){return undefined;}return f[d];}
function u1(m,d,f){var j="",k="",n="";if(f){j=f.getText();}if(m&&(m.length>1)){for(var i=0;i<m.length-1;i++){if(k!=""){k+=", ";}k+=m[i];}k=h.getText("MEAS_DIM_TITLE",[k,m[i]]);}else if(m){k=m[0];}if(d&&(d.length>1)){for(var i=0;i<d.length-1;i++){if(n!=""){n+=", ";}n+=d[i];}n=h.getText("MEAS_DIM_TITLE",[n,d[i]]);}else if(d){n=d[0];}if(f&&(j==="")){j=h.getText("NO_CHART_TITLE",[k,n]);f.setText(j);f.data("aria-label",j,true);}}
function v1(m,i){var n=1;var s;if(i){var d=N.getCurrencyInstance({style:'short',currencyCode:false,shortRefNumber:m});s=d.format(Number(n));}else{var f=N.getFloatInstance({style:'short',shortRefNumber:m});s=f.format(Number(n));}var j=s.slice(-1);return j;}
function w1(v,d){v.attachSelectData(function(f){var n=l.bCRTLPressed?l.constants.explace:l.constants.inplace;l.bCRTLPressed=false;var m=v.getModel('ovpCardProperties');var s=v.getModel();var I1=m.getProperty("/entitySet");var J1=t1(s,I1);var K1=[],L1=[];var M1={},N1={};var O1=v.getDataset().getDimensions();var P1;for(var i=0;i<O1.length;i++){K1.push(O1[i].getName());}var Q1=v.getDataset().getBinding("data").getCurrentContexts().map(function(x){return x.getObject();});if(f.getParameter("data")&&f.getParameter("data")[0]&&f.getParameter("data")[0].data){L1=Object.keys(f.getParameter("data")[0].data);P1=f.getParameter("data")[0].data._context_row_number;var R1=v.getDataset().getBinding("data").getContexts()[P1];var S1=d.getEntityNavigationEntries(R1)[0];if(Q1[P1].$isOthers&&Q1[P1].$isOthers===true){var T1={},U1=[];for(var j=0;j<K1.length;j++){for(var k=0;k<L1.length;k++){if(K1[j]===L1[k]){for(var V1 in J1){if(J1.hasOwnProperty(V1)){var W1=J1[V1][w.LABEL_KEY]||J1[V1][w.NAME_KEY]||J1[V1][w.NAME_CAP_KEY];if(W1===L1[k]){U1.push(V1);}}}}}}for(var i=0;i<U1.length;i++){T1[U1[i]]=[];for(var j=0;j<Q1.length-1;j++){if(j!=P1){T1[U1[i]].push(Q1[j][U1[i]]);}}}var X1={$isOthers:true};var Y1={getObject:function(){return X1;},getOtherNavigationDimensions:function(){return T1;}};if(O.checkIfAPIIsUsed(d)){if(d.checkAPINavigation()){c.onContentClicked(Y1);}}else{if(S1){d.doNavigation(Y1,S1,n);}}}else{for(var j=0;j<K1.length;j++){for(var k=0;k<L1.length;k++){if(K1[j]===L1[k]){for(var V1 in J1){if(J1.hasOwnProperty(V1)){var W1=(J1[V1][w.LABEL_KEY_V4]&&J1[V1][w.LABEL_KEY_V4].String)||J1[V1][w.LABEL_KEY]||J1[V1][w.NAME_KEY]||J1[V1][w.NAME_CAP_KEY];if(W1.match(/{@i18n>.+}/gi)){var Z1=this.getModel("@i18n").getResourceBundle();W1=Z1.getText(W1.substring(W1.indexOf(">")+1,W1.length-1));}if(W1===L1[k]){M1[V1]=Q1[P1][V1];}}}}for(var V1 in Q1[P1]){if(J1.hasOwnProperty(V1)){N1[V1]=Q1[P1][V1];}}}}if(M1){o(Object.keys(M1),function(i,V1){if(J1[V1]["type"]==="Edm.String"){if(J1[V1]["sap:semantics"]==="yearmonth"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){M1[V1]=(M1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYMM"}).format(M1[V1]):M1[V1]);}else if(J1[V1]["sap:semantics"]==="yearquarter"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){M1[V1]=(M1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYQ"}).format(M1[V1]):M1[V1]);}else if(J1[V1]["sap:semantics"]==="yearweek"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){M1[V1]=(M1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYww"}).format(M1[V1]):M1[V1]);}}});}if(N1){o(Object.keys(N1),function(i,V1){if(J1[V1]["type"]==="Edm.String"){if(J1[V1]["sap:semantics"]==="yearmonth"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){N1[V1]=(N1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYMM"}).format(N1[V1]):N1[V1]);}else if(J1[V1]["sap:semantics"]==="yearquarter"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){N1[V1]=(N1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYQ"}).format(N1[V1]):N1[V1]);}else if(J1[V1]["sap:semantics"]==="yearweek"||J1[V1]["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){N1[V1]=(N1[V1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYww"}).format(N1[V1]):N1[V1]);}}});}var $1=m.getProperty("/entityType"),_1=$1[m.getProperty('/presentationAnnotationPath')];if($1){var a2=a.getRequestFields(_1);if(a2&&a2.length>0){o(a2,function(i,r){if(!M1.hasOwnProperty(r)){M1[r]=Q1[P1][r];}});}}var Y1={getObject:function(){return M1;},getAllData:function(){return N1;}};if(O.checkIfAPIIsUsed(d)){if(d.checkAPINavigation()){c.onContentClicked(Y1);}}else{if(S1){d.doNavigation(Y1,S1,n);}}}}});}
function x1(d){if(d.EnumMember.endsWith("Bubble")){return true;}else{return false;}}
function y1(d){var r=false;if(!d||d.constructor!=Array||d.length<1||d[0].constructor!=Object||!d[0].Dimension||!d[0].Dimension.PropertyPath){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return r;}r=true;return r;}
function z1(m){var r=false;if(!m||m.constructor!=Array||m.length<1||m[0].constructor!=Object||!m[0].Measure||!m[0].Measure.PropertyPath){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return r;}r=true;return r;}
function A1(d){return d.name;}
function B1(d){if(d&&d.indexOf("#")!=-1){var f=d.split("#");if(f.length>1){return f[1];}}return"";}
function C1(n,v){var d=v.getModel('ovpCardProperties');var f=D1(v);var m=+f.itemsLength;var i=+d.getProperty("/dataStep");if(m&&i){var j=n.colSpan-1;if(j>=0){m+=i*j;E1(v,m);}}}
function D1(v){var d=v.getModel('ovpCardProperties');var f=d.getProperty("/entityType");var i=d.getProperty("/presentationAnnotationPath");var j=f.hasOwnProperty(i)&&f[i];var m=j&&j.MaxItems;if(m){var k=m.Int32?m.Int32:m.Int;return{itemsLength:+k,dataStep:+d.getProperty("/dataStep")};}}
function E1(v,d){var n,f={},j=[];var k=v.getVizType();var r=v.getModel('ovpCardProperties');var s=r.getProperty("/entityType");var x=r.getProperty("/chartAnnotationPath");var I1=s[x];var J1=v.getParent();var K1=J1.getBinding("data");f.path=K1.getPath();f.parameters={};if(K1.mParameters&&K1.mParameters.select){f.parameters.select=K1.mParameters.select;}f.filters=K1.aApplicationFilters;f.sorter=K1.aSorters;f.length=(k==="donut")?d+1:d;f.template=new g();J1.bindAggregation("data",f);if(k==="donut"){o(I1.MeasureAttributes,function(i,m){j.push(m.Measure.PropertyPath);});n={};n.path=K1.getPath();n.parameters={};n.parameters.select=j.join(",");n.filters=K1.aApplicationFilters;n.sorter=K1.aSorters;n.length=1;n.template=new g();J1.bindAggregation("aggregateData",n);}J1.updateBindingContext();}
function F1(d){d.sort(function(r,f){if(r.index<f.index){return-1;}if(r.index>f.index){return 1;}return 0;});}
function G1(d){return d.color!==undefined;}
function H1(r){return r.dimensionValue;}
return{constants:w,errorMessages:y,formatItems:B,formatByType:Q,returnDateFormat:R,formatChartAxes:T,hideDateTimeAxis:W,checkExists:X,validateCardConfiguration:Y,checkNoData:Z,getConfig:$,hasTimeSemantics:_,getChartType:a1,getPrimitiveValue:c1,formThePathForCriticalityStateCalculation:f1,checkFlag:i1,buildVizAttributes:p1,setChartUoMTitle:r1,getMetadata:t1,getSelectedDataPoint:w1,checkBubbleChart:x1,dimensionAttrCheck:y1,measureAttrCheck:z1,getEntitySet:A1,getAnnotationQualifier:B1,reprioritizeContent:C1,getMaxItems:D1,getLabelFromAnnotationPath:s1};},true);
sap.ui.predefine('sap/ovp/cards/charts/analytical/Component',["sap/ovp/cards/generic/Component","sap/ovp/cards/charts/VizAnnotationManager","sap/ovp/cards/jUtils"],function(C,V,u){"use strict";return C.extend("sap.ovp.cards.charts.analytical.Component",{metadata:{properties:{"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.KPIHeader"},"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.charts.analytical.analyticalChart"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.charts.analytical.analyticalChart"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){u.setAttributeToMultipleElements(".tabindex0","tabindex",0);u.setAttributeToMultipleElements(".tabindex-1","tabindex",-1);}});});
sap.ui.predefine('sap/ovp/cards/charts/analytical/analyticalChart.controller',["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/cards/ovpLogger","sap/ovp/app/FilterHelper","sap/ui/core/Fragment"],function(C,V,F,O,a,b,o,c,d){"use strict";var l=new o("OVP.analytical.analyticalChart");return C.extend("sap.ovp.cards.charts.analytical.analyticalChart",{onInit:function(){C.prototype.onInit.apply(this,arguments);V.formatChartAxes();var t=this;this.eventhandler=function(s,E,f){var g=t.getEntityType();var G=t.oMainComponent.getMacroFilterBar();var h=G.getModel();var i=t.getView().getModel('ovpCardProperties');var j=i.getData().entityType.name;if(g&&h){var r=c.getEntityRelevantFilters(g,f,j,h);var A=c.mergeFilters(r,t.selectionVaraintFilter);try{var k=t.getCardItemsBinding();if(k){k.filter(A);}if(t.getKPIBinding()){t.getKPIBinding().filter(A);}}catch(e){l.error(e);}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar&&this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onBeforeRendering:function(){if(this.bCardProcessed){return;}V.validateCardConfiguration(this);var v=this.getView().byId("analyticalChart");var e=this.getOwnerComponent().getComponentData();if(v){v.setHeight("21rem");}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&e&&e.appComponent){var D=e.appComponent.getDashboardLayoutUtil();var f=D.dashboardLayoutModel.getCardById(e.cardId);if(f.dashboardLayout.autoSpan&&v){v.setHeight("21rem");}}var g=this.getView().byId("vbLayout");var n;var i=false;var h=new F({data:{path:"/"}});this.isVizPropSet=i;this.oDataSet=h;this.vizFrame=v;this.vbLayout=g;if(!v){l.error(V.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")");}else{this.vbLayout.setBusy(true);n=v.getModel('ovpCardProperties').getProperty("/navigation");if(n===undefined||n=="datapointNav"||n!="headerNav"){V.getSelectedDataPoint(v,this);}v.destroyDataset();var j=v.getParent().getBinding("data");this._handleKPIHeader();if(j&&j.getPath()){j.attachDataReceived(this.onDataReceived.bind(this));j.attachDataRequested(this.onDataRequested.bind(this));}else{d.load("sap.ovp.cards.charts.generic.noData").then(function(k){var m=this.getCardContentContainer();m.removeAllItems();m.addItem(k);}.bind(this));}v.addEventDelegate({onmouseover:function(){var k=v._oOvpVizFrameTooltip;if(k){k._oPopup.close();}}});}this.bCardProcessed=true;},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);if(!O.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var s=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var f=document.getElementById(s);var h=this.getHeaderHeight();if(!e.dashboardLayout.autoSpan){if(f){var g=f.getElementsByClassName('sapOvpWrapper')[0];if(g){g.style.height=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";}}}if(e.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}var v=this.getView().byId("analyticalChart");if(v){v.setHeight(this._calculateVizFrameHeight()+"px");}}},onDataReceived:function(e){var t=this;var f=this.getView().byId("analyticalChart");var g=this.getView().byId("bubbleText");var h=this.getView().byId("ovpCT");var j=a.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");f.setDataset(this.oDataSet);var k=f.getParent();if(!this.isVizPropSet){V.buildVizAttributes(f,k,h,this);this.isVizPropSet=true;if(g!=undefined){var p=f.getFeeds();b(p,function(i,v){if(p[i].getUid()=="bubbleWidth"){g.setText(j+" "+p[i].getValues());}});}V.hideDateTimeAxis(f);}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&(f.getVizType()==="stacked_column")){var q=f.getDataset().getDimensions(),r=f.getFeeds(),s,u;for(var m=0;m<r.length;m++){if(r[m].getUid()==="color"){s=r[m].getValues()[0];break;}}for(var n=0;n<q.length;n++){if(q[n].getName()===s){u=q[n];break;}}if(s&&u){var w={};w["bDescending"]=true;u.setSorter(w);}}var x=this.getView().byId("ovpUoMTitle");var y=e?e.getParameter('data'):null;V.setChartUoMTitle(f,y,x);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false);}else{setTimeout(function(){t.vbLayout.setBusy(false);},0);}V.checkNoData(e,this.getCardContentContainer(),f);},onDataRequested:function(){this.vbLayout.setBusy(true);},getCardItemsBinding:function(){var v=this.getView().byId("analyticalChart");if(v&&v.getDataset()&&v.getDataset().getBinding("data")&&this.vbLayout){this.vbLayout.setBusy(false);}if(v&&v.getParent()){return v.getParent().getBinding("data");}return null;},resizeCard:function(n){var e=this.getCardPropertiesModel();this.newCardLayout=n;e.setProperty("/cardLayout/rowSpan",n.rowSpan);e.setProperty("/cardLayout/colSpan",n.colSpan);var f=this.getCardPropertiesModel().getProperty("/cardLayout");var h=this.getHeaderHeight();var s=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var i=0;i<s.length;i++){s[i].style.height=(n.rowSpan*f.iRowHeightPx+2)-(h+2*f.iCardBorderPx)+"px";}var g=this.getView().byId("analyticalChart");var j=this.getView().byId("bubbleText");var k=this.getView().byId("ovpCT");if(g){if(g.getVizType()==='timeseries_bubble'||g.getVizType()==='bubble'){if(f.colSpan>1){j.setVisible(false);}else{j.setVisible(true);}}g.setHeight(this._calculateVizFrameHeight()+"px");}var m=this.getView().byId('ovpCardContentContainer').getDomRef();if(m){if(!n.showOnlyHeader){m.classList.remove('sapOvpContentHidden');}else{m.classList.add('sapOvpContentHidden');}}var p=a.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var q=g.getParent();if(!this.isVizPropSet){V.buildVizAttributes(g,q,k,this);this.isVizPropSet=true;if(j!=undefined){var r=g.getFeeds();b(r,function(i,v){if(r[i].getUid()=="bubbleWidth"){j.setText(p+" "+r[i].getValues());}});}V.hideDateTimeAxis(g);}V.reprioritizeContent(this.newCardLayout,g);},_calculateVizFrameHeight:function(){var v;var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var f=this.getView().byId("analyticalChart");if(e){var g=this.getView().getController();var D=this.getItemHeight(g,'toolbar');var h=this.getHeaderHeight();var i=this.getView().byId("ovpCT")?24:0;var B=(f.getVizType()==='timeseries_bubble'||f.getVizType()==="bubble")&&e.dashboardLayout.colSpan===1?43:0;v=e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+D+i+B+30);}return v;},refreshCard:function(){this.getView().rerender();}});});
sap.ui.predefine('sap/ovp/cards/charts/generic/Component',["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(C,u){"use strict";return C.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.KPIHeader"},"selectionAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.SelectionVariant"},"chartAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Chart"},"presentationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.PresentationVariant"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"dataPointAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){u.setAttributeToMultipleElements(".tabindex0","tabindex",0);u.setAttributeToMultipleElements(".tabindex-1","tabindex",-1);},onAfterRendering:function(){this.addTabindex();}});});
sap.ui.predefine('sap/ovp/cards/custom/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.custom.Component",{metadata:{properties:{"contentFragment":{"type":"string"},"headerExtensionFragment":{"type":"string"},"contentPosition":{"type":"string","defaultValue":"Middle"},"footerFragment":{"type":"string"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"selectionAnnotationPath":{"type":"string"},"filters":{"type":"object"},"parameters":{"type":"object"},"addODataSelect":{"type":"boolean","defaultValue":false}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/error/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";
var e=C.extend("sap.ovp.cards.error.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.error.Error"},"state":{"type":"string","defaultValue":"Error"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.error.Error"}},version:"1.96.0",library:"sap.ovp"}});
return e;});
sap.ui.predefine('sap/ovp/cards/error/Error.controller',["sap/ovp/cards/generic/Card.controller","sap/ovp/cards/ovpLogger"],function(C,o){"use strict";var l=new o("OVP.error.Error");return C.extend("sap.ovp.cards.error.Error",{onInit:function(){C.prototype.onInit.apply(this,arguments);},adjustCardSize:function(){var c=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);if(c.template!=="sap.ovp.cards.stack"){var L=this.oMainComponent&&this.oMainComponent.getLayout();var d=L.getDashboardLayoutUtil();var s=d.getCardDomId(this.sCardId);var D=document.getElementById(s);var h=this.getHeaderHeight();D.getElementsByClassName("contentOfError")[0].style.height=D.getElementsByClassName("sapOvpCardContentContainer")[0].style.height=(c.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX)-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";}},onAfterRendering:function(){if(this.oMainComponent&&this.oMainComponent.getLayout().getMetadata().getName()==="sap.ovp.ui.DashboardLayout"){C.prototype.onAfterRendering.apply(this,arguments);this.adjustCardSize();}},resizeCard:function(){try{this.adjustCardSize();}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString());}}});});
sap.ui.predefine('sap/ovp/cards/generic/Card.controller',["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/generic/app/navigation/service/PresentationVariant","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavError","sap/ui/core/CustomData","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/MessageToast","sap/ui/core/TextDirection","sap/ui/generic/app/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/isPlainObject","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ui/util/openWindow","sap/ovp/placeholder/placeholderHelper"],function(C,A,S,P,a,O,R,N,b,c,M,d,e,F,J,D,B,f,T,G,q,g,h,K,k,m,o,u,l,n,p){"use strict";var L=new o("OVP.generic.Card");return C.extend("sap.ovp.cards.generic.Card",{initKeyboardNavigation:function(){var j=function(i){this.init(i);};j.prototype.layoutItemFocusHandler=function(){var r=q(document.activeElement);if(r){var s=r.find("[aria-label]");var i,t="";if(r.find('.valueStateText').length==1){var v=r.find('.valueStateText').find('.sapMObjectNumberText').text();var V=r.find('.valueStateText').find('.sapUiInvisibleText').text();r.find('.valueStateText').attr('aria-label',v+" "+V);r.find('.valueStateText').attr('aria-labelledby',"");}r.find("[role='listitem']").attr('aria-label',"");if(r.hasClass('sapOvpCardHeader')&&!r.hasClass('sapOvpStackCardContent')){var w="";var x=r.find('.cardHeaderType');if(x.length===0){var y=g.getText("CardHeaderType");w="cardHeaderType_"+new Date().getTime();var z='<div id="'+w+'" class="cardHeaderType" aria-label="'+y+'" hidden></div>';r.append(z);}else{w=x[0].id;}t+=w+" ";}for(i=0;i<s.length;i++){if(s[i].getAttribute("role")==="heading"){t+=s[i].id+" ";}}if(r.hasClass('sapOvpCardHeader')){var E=r.find('.cardHeaderText');if(E.length!==0){for(var i=0;i<E.length;i++){if(t.indexOf(E[i].id)===-1){t+=E[i].id+" ";}}}}if(t.length){r.attr("aria-labelledby",t);}if(r.prop('nodeName')==="LI"&&r.find('.linkListHasPopover').length!==0){if(r.find('#hasDetails').length===0){r.append("<div id='hasDetails' hidden>"+g.getText("HAS_DETAILS")+"</div>");r.attr('aria-describedby',"hasDetails");}}var H=r.attr("id");if((H&&H.indexOf("ovpTable")!=-1)&&r.find("[role='Link']")&&!r.hasClass('sapUiCompSmartLink')){var I=r.closest("td").attr("data-sap-ui-column"),Q=r.closest("tbody").siblings().children().filter("tr").children();for(var i=0;i<Q.length;i++){if(Q[i].getAttribute("data-sap-ui")==I&&Q[i].hasChildNodes("span")){var U=Q[i].firstElementChild.getAttribute("id");r.attr("aria-labelledby",U);}}}}};j.prototype.init=function(i){this.cardLayout=i;this.keyCodes=K;this.jqElement=q(i.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler.bind(this));};this.keyboardNavigation=new j(this);},onInit:function(){this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var s=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData.state;if(s!=="Error"){var H=this.getView().byId("ovpCardHeader");if(!!H){H.attachBrowserEvent("click",this.onHeaderClick.bind(this));H.addEventDelegate({onkeydown:function(E){if(!E.shiftKey&&E.keyCode==13){E.preventDefault();this.onHeaderClick(E);}else if(!E.shiftKey&&E.keyCode==32){E.preventDefault();}}.bind(this)});H.addEventDelegate({onkeyup:function(E){if(!E.shiftKey&&E.keyCode==32){E.preventDefault();this.onHeaderClick(E);}}.bind(this)});}}var i=this.getView().byId("kpiNumberValue");if(i){i.addEventDelegate({onAfterRendering:function(){var $=i.$();var j=$.find(".sapMNCValueScr");var r=$.find(".sapMNCScale");j.attr("aria-label",j.text());r.attr("aria-label",r.text());var t=this.getView().byId("ovpCardHeader").getDomRef();var v=this.getOwnerComponent().getComponentData();if(!!v&&!!v.appComponent){var w=v.appComponent;if(!!w.getModel("ui")){var U=w.getModel("ui");if(!!U.getProperty("/containerLayout")&&U.getProperty("/containerLayout")==="resizable"){var x=v.appComponent.getDashboardLayoutUtil();if(!!x){x.setKpiNumericContentWidth(t);}}}}}.bind(this)});}},exit:function(){if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);}},onAfterRendering:function(){var i=this.getView().byId('ovpCardHeader');var j=i&&i.getDomRef();var H=this.getView().byId('ovpHeaderTitle'),Q=this.getView().byId('ovpQuickviewCardHeader');if(j&&!j.getAttribute("ariaLabelledBy")){if(H&&H.getText()){var s=H.getDomRef().getAttribute("id");j.setAttribute("arialabelledby",s);}else if(Q&&Q.getText()){var r=Q.getDomRef().getAttribute("id");j.setAttribute("arialabelledby",r);}}var t=this.getCardPropertiesModel();this.enableClick=true;var v=t.getProperty("/contentFragment"),w=this.getOwnerComponent().getComponentData(),I=this.getCardItemsBinding();if(!I&&p.hidePlaceholderNeeded()){p.hidePlaceholder();}this._handleCountHeader();this._handleKPIHeader();var x=t.getProperty("/selectedKey");if(x&&t.getProperty("/state")!=='Loading'){var y=this.getView().byId("ovp_card_dropdown");if(y){y.setSelectedKey(x);}}try{var w=this.getOwnerComponent().getComponentData();if(w&&w.appComponent){var z=w.appComponent;if(z.getModel('ui')){var U=z.getModel('ui');if(U.getProperty('/containerLayout')==='resizable'){var E=z.getDashboardLayoutUtil();if(E){this.oDashboardLayoutUtil=E;this.cardId=w.cardId;if(E.isCardAutoSpan(w.cardId)){this.resizeHandlerId=R.register(this.getView(),function(j1){L.info('DashboardLayout autoSize:'+j1.target.id+' -> '+j1.size.height);E.setAutoCardSpanHeight(j1);});}}}}}}catch(V){L.error("DashboardLayout autoSpan check failed.");}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var $=q("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>$.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height());}}var W=0;if(w&&w.mainComponent){var X=w.mainComponent;if(X.bGlobalFilterLoaded){W=this.checkNavigation();}}else if(O.checkIfAPIIsUsed(this)){W=this.checkAPINavigation();}var Y=this.getCardPropertiesModel();var Z=Y.getProperty("/state");if(Z!=="Loading"&&Z!=="Error"){var _=Y.getProperty("/template");if(_==="sap.ovp.cards.stack"){if(!W){var a1=this.getView().byId('ViewAll');if(a1){a1=a1.getDomRef();a1.parentNode.removeChild(a1);}}}}if(v==="sap.ovp.cards.stack.Stack"){var b1=this.getView().getDomRef();var c1=b1&&b1.querySelector('.sapOvpCardContentContainer');if(c1){c1.style.borderTop="none";}}if(W){if(v?v!=="sap.ovp.cards.quickview.Quickview":true){if(v==="sap.ovp.cards.stack.Stack"){var b1=this.getView().getDomRef();var d1=b1.querySelectorAll('.sapOvpCardContentRightHeader');if(d1.length!==0){u.addClassToAllElements(d1,'sapOvpCardNavigable');}}else{this.getView().addStyleClass("sapOvpCardNavigable");}}if(v&&v==="sap.ovp.cards.quickview.Quickview"){var e1=this.byId("ovpCardHeader");if(e1){e1.addStyleClass("sapOvpCardNavigable");}}}else{if(v){this.getView().addStyleClass("ovpNonNavigableItem");var e1=this.byId("ovpCardHeader");if(e1){e1.$().removeAttr('role');e1.addStyleClass('ovpNonNavigableItem');}var f1=this.checkLineItemNavigation();if(!f1){switch(v){case"sap.ovp.cards.list.List":var g1=this.getView().byId("listItem");if(g1){g1.setType("Inactive");}break;case"sap.ovp.cards.table.Table":var g1=this.getView().byId("tableItem");if(g1){g1.setType("Inactive");}break;case"sap.ovp.cards.linklist.LinkList":if(!this.checkNavigationForLinkedList()){var g1=this.getView().byId("ovpCLI");if(g1){g1.setType("Inactive");}}break;}}}}var h1=this.getView().byId("ovp_card_dropdown");var i1=this.getView().byId("ovp_card_dropdown_label");if(h1){h1.addAriaLabelledBy(i1.getId());}if(O.checkIfAPIIsUsed(this)){this.initKeyboardNavigation();}},checkNavigation:function(){var i=this.getCardPropertiesModel();if(this.checkHeaderNavForChart()){return 0;}var E=this.getEntityType();if(E){if(i){var I=i.getProperty("/identificationAnnotationPath");var s=I;var j=i.getProperty("/contentFragment");if(j&&(j==="sap.ovp.cards.stack.Stack"||j==="sap.ovp.cards.quickview.Quickview")){var r=(I)?I.split(","):[];if(r&&r.length>1){if(j==="sap.ovp.cards.stack.Stack"){s=r[0];}else{s=r[1];}}}var t=E[s];if(this.isNavigationInAnnotation(t)){return 1;}if(i&&i.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var v=i.getProperty("/kpiAnnotationPath");if(E&&v){var w=E[v];if(w&&w.Detail){var x=w.Detail.SemanticObject&&w.Detail.SemanticObject.String;var y=w.Detail.Action&&w.Detail.Action.String;if(x&&y){return 1;}}}}}}else if(i&&i.getProperty("/template")==="sap.ovp.cards.linklist"&&i.getProperty("/staticContent")&&i.getProperty("/targetUri")){return 1;}return 0;},checkNavigationForLinkedList:function(){if(this.getEntityType()){var E=this.getEntityType();var i=E['com.sap.vocabularies.UI.v1.LineItem'];if(i&&(i[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){return true;}}return false;},checkLineItemNavigation:function(){if(this.getEntityType()){var E=this.getEntityType();var i=this.getCardPropertiesModel();if(i){var s=i.getProperty("/annotationPath");var r=E[s];return this.isNavigationInAnnotation(r);}}},isNavigationInAnnotation:function(r){if(r&&r.length){for(var i=0;i<r.length;i++){var I=r[i];if(I.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||I.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||I.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1;}}}return 0;},checkAPINavigation:function(){var i=this.getOwnerComponent().getComponentData(),j=i.fnCheckNavigation&&typeof i.fnCheckNavigation==="function",r=j?i.fnCheckNavigation:null;if(r){if(r()){return true;}}else{if(this.checkNavigation()){return true;}}return false;},onHeaderClick:function(E){var s=E.ctrlKey||E.metaKey?h.constants.explace:h.constants.inplace;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onHeaderClicked();}}else{var i=this.getCardPropertiesModel();var t=i.getProperty("/template");var j=i.getProperty("/targetUri");if(t=="sap.ovp.cards.linklist"&&i.getProperty("/staticContent")!==undefined&&j){window.location.href=j;}else if(i.getProperty("/staticContent")!==undefined&&j===""){return;}else if(this.checkHeaderNavForChart()){return;}else{this.doNavigation(this.getView().getBindingContext(),null,s);}}},checkHeaderNavForChart:function(){var i=this.getCardPropertiesModel();var t=i.getProperty("/template");var j=i.getProperty("/navigation");if(j=="noHeaderNav"&&(t=="sap.ovp.cards.charts.analytical"||"sap.ovp.cards.charts.smart.chart")){return true;}else{return false;}},resizeCard:function(i){L.info(i);if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);this.resizeHandlerId=null;}},_handleCountHeader:function(){var i=this.getView().byId("ovpCountHeader");if(i){var I=this.getCardItemsBinding();if(I){if(I.isLengthFinal()&&I.getLength()>0){this.setHeaderCounter(I,i);}I.attachDataReceived(function(E){if(p.hidePlaceholderNeeded()){p.hidePlaceholder();}this.setHeaderCounter(I,i,E);}.bind(this));I.attachChange(function(E){this.setHeaderCounter(I,i,E);}.bind(this));}}else{var I=this.getCardItemsBinding();if(I){I.attachDataReceived(function(){if(p.hidePlaceholderNeeded()){p.hidePlaceholder();}});}}},setHeaderCounter:function(i,j,E){var t;if(i.isLengthFinal()){t=i.getLength();}else{if(E&&E.getParameters().data&&E.getParameters().data.results){t=E.getParameters().data.results.length;}}var r=i.getCurrentContexts().length;var s,v="";var w=N.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});r=parseFloat(r,10);var x=this.getOwnerComponent().getComponentData();if(x&&x.appComponent){var y=x.appComponent;if(y.getModel('ui')){var U=y.getModel('ui');if(U.getProperty('/containerLayout')!=='resizable'){if(t!==0){t=w.format(Number(t));}if(r!==0){r=w.format(Number(r));}}else{s=y.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(x.cardId);}}}if(r===0){v="";}else if(s&&s.dashboardLayout.showOnlyHeader){v=g.getText("Count_Header_Total",[t]);}else if(t!=r){v=g.getText("Count_Header",[r,t]);}j.setText(v);j.addEventDelegate({onAfterRendering:function(){var $=j.$();$.attr("aria-label",v);}});},_handleKPIHeader:function(){var i,s;if(this.getView()&&this.getView().getDomRef()){i=this.getView().getDomRef().getElementsByClassName("numericContentHbox");s=this.getView().getDomRef().getElementsByClassName("noDataSubtitle");}else{return;}if(i||s){var j=this.getKPIBinding();if(j){j.attachDataReceived(function(E){var U=E.getParameter("data")&&E.getParameter("data").results&&E.getParameter("data").results[0];var t=j.getLength();if(i[0]){i[0].style.visibility=null;if(t===0){i[0].style.visibility='hidden';}else{this._setSubTitleWithUnitOfMeasure(U);i[0].style.visibility='visible';}}if(s.length!==0){s[0].style.display="none";if(t===0){s[0].style.display="flex";}}}.bind(this));}}},getKPIBinding:function(){var i=this.byId("kpiHBoxNumeric"),j=i&&i.getBindingInfo("items")&&i.getBindingInfo("items").binding;return j;},_setSubTitleWithUnitOfMeasure:function(U){var i=this.getCardPropertiesModel();if(!!i){var j=i.getData();var s=this.getView().byId("SubTitle-Text");if(!!s){s.setText(j.subTitle);if(!!j&&!!j.entityType&&!!j.dataPointAnnotationPath){var E=i.getData().entityType;var r=j.dataPointAnnotationPath.split("/");var t=r.length===1?E[j.dataPointAnnotationPath]:E[r[0]][r[1]];var v;if(t&&t.Value&&t.Value.Path){v=t.Value.Path;}else if(t&&t.Description&&t.Description.Value&&t.Description.Value.Path){v=t.Description.Value.Path;}if(!!v){var w=a.getUnitColumn(v,E);var x;if(!!w&&!!U){x=U[w];}else{x=a.getUnitColumn(v,E,true);}var y=g.getText("SubTitle_IN");if(!!j.subTitle&&!!y&&!!x){s.setText(j.subTitle+" "+y+" "+x);var z=s.getAggregation("customData");if(z){var H;for(H in z){var I=z[H];if(I.getKey()==="aria-label"){I.setValue(j.subTitle+" "+y+" "+x);break;}}}}}}}}},getCardItemsBinding:function(){},onActionPress:function(E){var s=E.getSource(),i=this._getActionObject(s),j=s.getBindingContext();if(i.type.indexOf("DataFieldForAction")!==-1){this.doAction(j,i);}else{this.doNavigation(j,i);}},_getActionObject:function(s){var j=s.getCustomData();var r={};for(var i=0;i<j.length;i++){r[j[i].getKey()]=j[i].getValue();}return r;},doNavigation:function(i,j,s){if(!s){s=h.constants.inplace;}if(!this.enableClick){return;}this.enableClick=false;setTimeout(function(){this.enableClick=true;}.bind(this),1000);if(!this.oMainComponent){return;}if(!j){j=this.getEntityNavigationEntries(i)[0];}var r=m({},i);var t=m({},j);var v=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,r,t);var E=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,r,t);var w;if(v){w=v;}if(E){w=E;}if(w){var x=w.type;if(x&&typeof x==="string"&&x.length>0){x=x.split(".").pop().split("/").pop().toLowerCase();switch(x){case"datafieldwithurl":w.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":w.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break;}j=w;}}function y(s){if(!s){s=h.constants.inplace;}if(j){switch(j.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(i,j,s);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(i,j,false,s);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(i,j,false,s);break;}}}if(!this.oMainComponent.oAppStatePromise){y.call(this,s);}else{this.oMainComponent.oAppStatePromise.then(y.bind(this,s));}},doNavigationWithUrl:function(i,j,s){if(!s){s=h.constants.inplace;}if(!sap.ushell.Container){return;}var r=sap.ushell.Container.getService("URLParsing");if(!(r.isIntentUrl(j.url))){n(j.url,"newWindow");}else{var t=r.parseShellHash(j.url);var w=t.appSpecificRoute?true:false;this.doIntentBasedNavigation(i,t,w,s);}},fnHandleError:function(E){if(E instanceof d){if(E.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(g.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:g.getText("OVP_GENERIC_ERROR_TITLE")});}else{M.show(E.getErrorCode(),{title:g.getText("OVP_GENERIC_ERROR_TITLE")});}}},doCrossApplicationNavigation:function(I,r){var s="#"+I.semanticObject+'-'+I.action;if(I.params){var t=this.oCardComponent&&this.oCardComponent.getComponentData();var v=t&&t.appComponent;if(v){var w=v._formParamString(I.params);s=s+w;}}var x=this;if(!sap.ushell.Container){return;}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([s]).done(function(y){if(y[s].supported===true){if(!!r.params){if(typeof r.params=='string'){try{r.params=JSON.parse(r.params);}catch(z){L.error("Could not parse the Navigation parameters");return;}}}var t=x.getOwnerComponent().getComponentData();var E=t?t.globalFilter:undefined;var U=E&&E.getUiState({allFilters:false});var H=U?JSON.stringify(U.getSelectionVariant()):"{}";E=JSON.parse(H);var Q=x._getFilterPreference();E=x._removeFilterFromGlobalFilters(Q,E);if(!r.params){r.params={};}if(!!E&&!!E.SelectOptions){for(var i=0;i<E.SelectOptions.length;i++){var V=E.SelectOptions[i].Ranges;if(!!V){var W=[];for(var j=0;j<V.length;j++){if(V[j].Sign==="I"&&V[j].Option==="EQ"){W.push(V[j].Low);}}r.params[E.SelectOptions[i].PropertyName]=W;}}}sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(r);}else{var X=new d("NavigationHandler.isIntentSupported.notSupported");x.fnHandleError(X);}}).then(function(){L.error("Could not get authorization from isIntentSupported");});},doIntentBasedNavigation:function(i,I,U,s){if(!s){s=h.constants.inplace;}if(sap.ushell&&!sap.ushell.Container){return;}var j,r,t,E=i?i.getObject():null;var v=this.getCardPropertiesModel(),w=v.getProperty("/customParams");if(i&&typeof i.getAllData==="function"&&w){t=i.getAllData();}else if(v.getProperty("/staticContent")){t={iStaticLinkListIndex:I.iStaticLinkListIndex,bStaticLinkListIndex:true};}if(E&&E.__metadata){delete E.__metadata;}var x=a.getNavigationHandler();if(x){if(I){j=this._getEntityNavigationParameters(E,t,i);r={target:{semanticObject:I.semanticObject,action:I.action},appSpecificRoute:I.appSpecificRoute,params:j.sNavSelectionVariant};var y={};if(j.sNavPresentationVariant){y.presentationVariant=j.sNavPresentationVariant;}if(U){if(I&&I.semanticObject&&I.action){var z=this.getCardPropertiesModel().getProperty("/staticParameters");r.params=(!!z)?z:{};this.doCrossApplicationNavigation(I,r);}}else{x.navigate(r.target.semanticObject,r.target.action,r.params,null,this.fnHandleError,y,s);}}}},doAction:function(i,j){this.actionData=A.getActionInfo(i,j,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm();}else{this._callFunction();}},getEntityNavigationEntries:function(j,s){var r=[];var E=this.getEntityType();var t=this.getCardPropertiesModel();var v=t.getProperty("/template");if(!E){return r;}if(!s&&!j){if(!this.oCardComponentData.settings.identificationAnnotationPath){var w=t.getProperty("/kpiAnnotationPath");if(w&&v==="sap.ovp.cards.charts.analytical"){s=w;var x=E[s];var y=x&&x.Detail;var z=y.SemanticObject&&y.SemanticObject.String;var H=y.Action&&y.Action.String;if(y.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){if(z&&H){r.push({type:y.RecordType,semanticObject:z,action:H,label:""});}else{L.error("Invalid Semantic object and action configured for annotation "+y.RecordType);}}}}}if(!s){var I=t.getProperty("/identificationAnnotationPath");var Q=(I)?I.split(","):[];if(Q&&Q.length>1){s=Q[0];}else{s=I;}}var U=E[s];if(Array.isArray(U)){U=b.sortCollectionByImportance(U);for(var i=0;i<U.length;i++){if(U[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){r.push({type:U[i].RecordType,semanticObject:U[i].SemanticObject.String,action:U[i].Action.String,label:U[i].Label?U[i].Label.String:null});}if(U[i].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!U[i].Url.UrlRef){var V=this.getView().getModel();var W=V.oMetaModel;var X=W.createBindingContext(E.$path);var Y=c.format(X,U[i].Url);var Z=new e({key:"url",value:Y});if(j&&v==="sap.ovp.cards.charts.analytical"){V=j.getModel();}Z.setModel(V);Z.setBindingContext(j);var $=Z.getValue();r.push({type:U[i].RecordType,url:$,value:U[i].Value.String,label:U[i].Label?U[i].Label.String:null});}}}return r;},getModel:function(){return this.getView().getModel();},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel();}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||l(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties");}return this.oCardPropertiesModel;},getEntitySet:function(){if(!this.entitySet){var E=this.getCardPropertiesModel().getProperty("/entitySet");this.entitySet=this.getMetaModel().getODataEntitySet&&this.getMetaModel().getODataEntitySet(E);}return this.entitySet;},getEntityType:function(){if(!this.entityType){if(this.getMetaModel()&&this.getEntitySet()){this.entityType=this.getMetaModel().getODataEntityType(this.getEntitySet().entityType);}}return this.entityType;},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer");}return this.cardContentContainer;},_processCustomParameters:function(j,s,r){var t=this.getCardPropertiesModel();if(!this.oMainComponent||!t){return;}var v;if(j&&j.bStaticLinkListIndex){var w=t.getProperty("/staticContent");v=w[j.iStaticLinkListIndex]["customParams"];j=null;}else{v=t.getProperty("/customParams");}if(!v||!this.oMainComponent.templateBaseExtension.provideCustomParameter||!this.oMainComponent.onCustomParams){return;}var x=this.oMainComponent.templateBaseExtension.provideCustomParameter(v)?this.oMainComponent.templateBaseExtension.provideCustomParameter(v):this.oMainComponent.onCustomParams(v);if(!x||!u.checkIfFunction(x)){return;}var y=m({},j);var z=m({},s);var E=x(y,z);if(!E||(!Array.isArray(E)&&!k(E))){return;}var I=k(E);if(I&&l(E)){return;}var H=I&&(E.bIgnoreEmptyString||E.ignoreEmptyString);var Q=I?(E.aSelectionVariant||E.selectionVariant):E;if(!Array.isArray(Q)){return;}var i,U,V,W,X,Y;U=Q.length;for(i=0;i<U;i++){V=Q[i];if(!V){continue;}W=V.path;X=V.value1;Y=V.value2;if(!W||typeof W!=="string"||W===""){L.error("Custom Variant property path '"+W+"' should be valid string");continue;}if(!(X||X===0||(X===""&&H))){continue;}X=X.toString();Y=Y&&Y.toString();if(X===""&&H){s.removeSelectOption(W);}if(j){delete j[W];}if(r){delete r[W];}s.addSelectOption(W,V.sign,V.operator,X,Y);}if(H){this._removeEmptyStringsFromSelectionVariant(s);}return H;},_getEntityNavigationParameters:function(E,j,r){var s={};var t,v,w;var x=this.getOwnerComponent().getComponentData();var y=x?x.globalFilter:undefined;var z=this.getCardPropertiesModel();var H=z&&z.getProperty("/staticContent");if(!H){var I=b.getCardSelections(this.getCardPropertiesModel());var Q=I.filters;var U=I.parameters;var V=this.getEntityType();Q&&Q.forEach(function(k1){k1.path=k1.path.replace("/",".");switch(k1.operator){case F.NE:k1.operator=F.EQ;k1.sign="E";break;case F.Contains:k1.operator="CP";var l1=k1.value1;k1.value1="*"+l1+"*";break;case F.EndsWith:k1.operator="CP";var l1=k1.value1;k1.value1="*"+l1;break;case F.StartsWith:k1.operator="CP";var l1=k1.value1;k1.value1=l1+"*";}});I.filters=Q;if(r&&E&&E.hasOwnProperty("$isOthers")){var W=r.getOtherNavigationDimensions();for(var X in W){var Y=W[X];for(var i=0;i<Y.length;i++){I.filters.push({path:X,operator:"EQ",value1:Y[i],sign:"E"});}}}U&&U.forEach(function(k1){k1.path=k1.path.replace("/",".");});I.parameters=U;var Z=b.getCardSorters(this.getCardPropertiesModel());if(E){var X;for(var i=0;V.property&&i<V.property.length;i++){X=V.property[i].name;var $=E[X];if(E.hasOwnProperty(X)){if(Array.isArray(E[X])&&E[X].length===1){s[X]=E[X][0];}else if(q.type($)!=="object"){s[X]=$;}}}}var _=z&&z.getProperty("/kpiAnnotationPath");var a1=z&&z.getProperty("/template");if(_&&a1==="sap.ovp.cards.charts.analytical"){var b1=V[_];var c1=b1&&b1.Detail;if(c1&&c1.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){s["kpiID"]=b1.ID.String;}}v=Z&&new P(Z);t=this._buildSelectionVariant(y,I);w=z&&z.getProperty("/staticParameters");}else{var d1=y&&y.getUiState({allFilters:false});var e1=d1?JSON.stringify(d1.getSelectionVariant()):"{}";t=new S(e1);var f1=this._getFilterPreference();t=this._removeFilterFromGlobalFilters(f1,t);if(H[j.iStaticLinkListIndex].params){w=H[j.iStaticLinkListIndex].params;}else if(H[j.iStaticLinkListIndex].staticParameters){w=H[j.iStaticLinkListIndex].staticParameters;}}var g1;if(j&&!j.bStaticLinkListIndex){g1=this._processCustomParameters(j,t,s);}else if(j&&j.bStaticLinkListIndex){g1=this._processCustomParameters(j,t);}else{g1=this._processCustomParameters(s,t);}var h1=g1?G.navigation.service.SuppressionBehavior.ignoreEmptyString:undefined;if(w){for(var X in w){if(!s.hasOwnProperty(X)){s[X]=w[X];}}}var i1=a.getNavigationHandler();var j1=i1&&i1.mixAttributesAndSelectionVariant(s,t.toJSONString(),h1);if(!H){this._removeSensitiveAttributesFromNavSelectionVariant(V,j1);}return{sNavSelectionVariant:j1?j1.toJSONString():null,sNavPresentationVariant:v?v.toJSONString():null};},_removeSensitiveAttributesFromNavSelectionVariant:function(E,j){for(var i=0;i<E.property.length;i++){if(E.property[i]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&E.property[i]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"].Bool){delete j._mSelectOptions[E.property[i].name];}}},_removeEmptyStringsFromSelectionVariant:function(s){var r=s.getParameterNames();for(var i=0;i<r.length;i++){if(s.getParameter(r[i])===""){s.removeParameter(r[i]);}}var t=s.getSelectOptionsPropertyNames();for(i=0;i<t.length;i++){var v=s.getSelectOption(t[i]);for(var j=0;j<v.length;j++){if(v[j].Low===""&&!v[j].High){v.splice(j,1);j--;}}if(v.length===0){s.removeSelectOption(t[i]);}}return s;},_checkIfCardFiltersAreValid:function(i,s){var j=true;if(i&&i.filterAll==="global"){j=false;}else if(i&&i.globalFilter){if(i.globalFilter.indexOf(s)>=0){j=false;}}return j;},_getFilterPreference:function(){var i=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;var j;if(i&&i.mainComponent){j=i.mainComponent._getFilterPreference(i.cardId);}return j;},_removeFilterFromGlobalFilters:function(i,s){var j=[];if(i&&i.filterAll==="card"){j=s.getSelectOptionsPropertyNames();}else if(i&&i.cardFilter){j=i.cardFilter;}j.forEach(function(r){if(r!=="$.basicSearch"){s.removeSelectOption(r);}});return s;},_buildSelectionVariant:function(r,s){var U=r&&r.getUiState({allFilters:false});var t=U?JSON.stringify(U.getSelectionVariant()):"{}";var v=new S(t);var w,V,x,y;var z=this._getFilterPreference();v=this._removeFilterFromGlobalFilters(z,v);var E=s.filters;var H=s.parameters;for(var i=0;i<E.length;i++){w=E[i];if(w.path&&w.operator&&typeof w.value1!=="undefined"){V=w.value1.toString();x=(typeof w.value2!=="undefined")?w.value2.toString():undefined;if(this._checkIfCardFiltersAreValid(z,w.path)){v.addSelectOption(w.path,w.sign,w.operator,V,x);}}}var I,Q,W;for(var j=0;j<H.length;j++){y=H[j];if(!y.path||!y.value){continue;}I=y.path.split("/").pop();I=I.split(".").pop();if(I.indexOf("P_")===0){Q=I;W=I.substr(2);}else{Q="P_"+I;W=I;}if(v.getParameter(Q)){continue;}if(v.getParameter(W)){continue;}v.addParameter(I,y.value);}return v;},_loadParametersForm:function(){var i=new J();i.setData(this.actionData.parameterData);var t=this;var j=new D('ovpCardActionDialog',{title:this.actionData.sFunctionLabel,afterClose:function(){j.destroy();}}).addStyleClass("sapUiNoContentPadding");var r=new B({text:this.actionData.sFunctionLabel,press:function(E){var x=A.getParameters(E.getSource().getModel(),t.actionData.oFunctionImport);j.close();t._callFunction(x,t.actionData.sFunctionLabel);}});var s=new B({text:"Cancel",press:function(){j.close();}});j.setBeginButton(r);j.setEndButton(s);var v=function(E){var x=A.mandatoryParamsMissing(E.getSource().getModel(),t.actionData.oFunctionImport);r.setEnabled(!x);};var w=A.buildParametersForm(this.actionData,v);j.addContent(w);j.setModel(i);j.open();},_callFunction:function(U,i){var j={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:U,forceSubmit:true,context:this.actionData.oContext,functionImport:this.actionData.oFunctionImport};var t=this;var r=new Promise(function(s,v){var w=t.actionData.oContext.getModel();var x;x="/"+j.functionImport.name;w.callFunction(x,{method:j.functionImport.httpMethod,urlParameters:j.urlParameters,batchGroupId:j.batchGroupId,changeSetId:j.changeSetId,headers:j.headers,success:function(y,z){s(z);},error:function(y){y.actionText=i;v(y);}});});r.then(function(s){return f.show(g.getText("Toast_Action_Success"),{duration:1000});},function(E){var s=a.showODataErrorMessages(E);if(s===""&&E.actionText){s=g.getText("Toast_Action_Error")+' "'+E.actionText+'"'+".";}return M.error(s,{title:g.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:T.Inherit});});},setErrorState:function(){var i=this.getOwnerComponent();if(!i||!i.oContainer){return;}var j=i.oContainer;var r=this.getCardPropertiesModel();var s={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:r.getProperty("/category"),title:r.getProperty("/title"),description:r.getProperty("/description"),entitySet:r.getProperty("/entitySet"),state:h.loadingState.ERROR,template:r.getProperty("/template")}}};sap.ui.core.Component.create(s).then(function(t){j.setComponent(t);setTimeout(function(){i.destroy();},0);});},changeSelection:function(s,i,j){if(!i){var r=this.getView().byId("ovp_card_dropdown");s=parseInt(r.getSelectedKey(),10);}var t={};if(!i){t=this.getCardPropertiesModel().getProperty("/tabs")[s-1];}else{t=j.tabs[s-1];}var U={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:s};for(var v in t){U[v]=t[v];}if(O.checkIfAPIIsUsed(this)){O.recreateCard(U,this.getOwnerComponent().getComponentData());}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(U);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,s);}},getItemHeight:function(i,s,j){if(!!i){var r=i.getView().byId(s);var H=0;if(!!r){if(j){if(r.getItems()[0]&&r.getItems()[0].getDomRef()){H=u.getOuterHeight(r.getItems()[0].getDomRef());}}else{if(r.getDomRef()){H=u.getOuterHeight(r.getDomRef());}}}return H;}},getHeaderHeight:function(){var H=this.getItemHeight(this,'ovpCardHeader'),i=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(i&&i.appComponent){var j=i.appComponent.getDashboardLayoutUtil(),r=j.getDashboardLayoutModel().getCardById(i.cardId);if(H!==0){r.dashboardLayout.headerHeight=H;}}return H;}});});
sap.ui.predefine('sap/ovp/cards/generic/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger"],function(U,J,C,D,R,V,m,O,o){"use strict";var l=new o("OVP.generic.Component");return U.extend("sap.ovp.cards.generic.Component",{metadata:{properties:{"contentFragment":{"type":"string"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.generic.Card"},"headerExtensionFragment":{"type":"string"},"contentPosition":{"type":"string","defaultValue":"Middle"},"headerFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.Header"},"footerFragment":{"type":"string"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"selectionAnnotationPath":{"type":"string"},"filters":{"type":"object"},"parameters":{"type":"object"},"addODataSelect":{"type":"boolean","defaultValue":false}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},setSelectionVariant:function(s,S){if(/^@/.test(s)){s=s.slice(1);}S.selectionAnnotationPath=s;},setPresentationVariant:function(p,s,e){if(/^@/.test(p)){p=p.slice(1);}s.presentationAnnotationPath=p;var a=p.split("/");var v=a.length===1?e[p].Visualizations:e[a[0]][a[1]][a[2]].Visualizations;var i;for(i=0;i<v.length;i++){var b=v[i].AnnotationPath;if(b){if(/^@/.test(b)){b=b.slice(1);}if(/.LineItem/.test(b)){s.annotationPath=b;break;}}}for(i=0;i<v.length;i++){var b=v[i].AnnotationPath;if(b){if(/^@/.test(b)){b=b.slice(1);}if(/.Chart/.test(b)){s.chartAnnotationPath=b;break;}}}},setDataPointAnnotationPath:function(d,s){if(/^@/.test(d)){d=d.slice(1);}s.dataPointAnnotationPath=d;},getCustomPreprocessor:function(){},getPreprocessors:function(p){var c=this.getComponentData(),s=c.settings,M=c.model,a,e,E,b;if(s.description&&!s.subTitle){s.subTitle=s.description;}if(M&&C.isODataV4(M)){a=M&&M.getMetaModel();var d="/"+s.entitySet;var e=a.getObject(d);b=a.createBindingContext(d);E=a.createBindingContext("/"+e.$Type);}else if(M&&s.entitySet){a=M&&M.getMetaModel();var f=a.getODataEntitySet(s.entitySet);var g=a.getODataEntitySet(s.entitySet,true);e=a.getODataEntityType(f.entityType);b=a.createBindingContext(g);E=a.createBindingContext(e.$path);}var h=this._getCardPropertyDefaults();var j=this._completeLayoutDefaults(h,s);var k,n;if(c.appComponent&&c.appComponent.getModel("ui")&&c.appComponent.getModel("ui").oData){var q=c.appComponent.getModel("ui").oData;k=q.showDateInRelativeFormat;n=q.disableTableCardFlexibility;}else{if(c.showDateInRelativeFormat){k=c.showDateInRelativeFormat;}if(c.disableTableCardFlexibility){n=c.disableTableCardFlexibility;}}var A={metaModel:a,entityType:e,webkitSupport:D.browser.webkit,layoutDetail:j&&j.cardLayout?j.cardLayout.containerLayout:'fixed',showDateInRelativeFormat:k,disableTableCardFlexibility:n,cardId:c.cardId};if(!!c&&!!c.cardId){var r=c.mainComponent;var t=null;if(!!r){t=r._getCardFromManifest(c.cardId)?r._getCardFromManifest(c.cardId).template:null;}else{t=c.template;}if(!!t){A.template=t;}}h.densityStyle=C._setCardpropertyDensityAttribute();if(c.errorReason){var u=c.errorReason;var P=u.getParameters?u.getParameters():u.mParameters;var v="sap-icon://message-error";if(P&&P.response){h.errorStatusCode=P.response.statusCode;h.errorStatusText=P.response.statusText;h.responseText=P.response.responseText;h.sMessageIcon=P.response.sIcon?P.response.sIcon:v;}}if(j){A.cardLayout=j.cardLayout;}if(h.state!=="Error"){if(s&&s.kpiAnnotationPath){var K=e[s.kpiAnnotationPath];var w=h.contentFragment;if(K&&(w==="sap.ovp.cards.charts.analytical.analyticalChart"||w==="sap.ovp.cards.charts.smart.analyticalChart")){var S=K.SelectionVariant&&K.SelectionVariant.Path?K.SelectionVariant.Path:s.kpiAnnotationPath+"/SelectionVariant";if(S){this.setSelectionVariant(S,s);}var x=K.Detail&&K.Detail.DefaultPresentationVariant&&K.Detail.DefaultPresentationVariant.Path?K.Detail.DefaultPresentationVariant.Path:s.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(x){this.setPresentationVariant(x,s,e);}var y=K.DataPoint&&K.DataPoint.Path?K.DataPoint.Path:s.kpiAnnotationPath+"/DataPoint";if(y){this.setDataPointAnnotationPath(y,s);}}}else if(s&&s.selectionPresentationAnnotationPath){var z=e[s.selectionPresentationAnnotationPath];if(z){var S=z.SelectionVariant&&z.SelectionVariant.Path;if(S){this.setSelectionVariant(S,s);}var x=z.PresentationVariant&&z.PresentationVariant.Path;if(x){this.setPresentationVariant(x,s,e);}}}}if(c.ovpCardsAsApi&&s.ignoreSelectionVariant){s.selectionAnnotationPath="";var I=[];for(var B=0;!!s.filters&&B<s.filters.length;B++){I.push({id:"headerFilterText--"+(B+1),index:B});}s.idForExternalFilters=I;}if(!!A.entityType&&!!s.selectionAnnotationPath&&!!A.entityType[s.selectionAnnotationPath]){var F=A.entityType[s.selectionAnnotationPath].SelectOptions;for(var G=0;!!F&&G<F.length;G++){F[G].id="headerFilterText--"+(G+1);}A.entityType[s.selectionAnnotationPath].SelectOptions=F;}if((A.template==="sap.ovp.cards.linklist"||A.template==="sap.ovp.cards.v4.linklist")&&!!s.staticContent){for(var i=0;i<s.staticContent.length;i++){s.staticContent[i].id="linkListItem--"+(i+1);}}else if(A.template==='sap.ovp.cards.charts.analytical'){s.dataStep=s.dataStep?s.dataStep:10;}h=O.merge(true,{},A,h,s);var H=new J(h);var L={xml:{bindingContexts:{entityType:E,entitySet:b},models:{device:C.deviceModel,entityType:a,entitySet:a,ovpMeta:a,ovpCardProperties:H,ovplibResourceBundle:p,ovpConstants:C.ovpConstantModel},ovpCardProperties:H,dataModel:M,_ovpCache:{}}};return m({},this.getCustomPreprocessor(),L);},_completeLayoutDefaults:function(c,s){var a={},b=this.getComponentData(),d=null,e=null;if(b.appComponent){d=b.appComponent.getOvpConfig();}if(!d){return null;}if(d.containerLayout==="resizable"&&b.cardId&&c.contentFragment!=="sap.ovp.cards.quickview.Quickview"){e=b.appComponent.getDashboardLayoutUtil();var f=b.cardId;var g=e.aCards.filter(function(i){return i.id===f;});a.cardLayout=g[0].dashboardLayout;a.cardLayout.containerLayout=d.containerLayout;a.cardLayout.iRowHeightPx=e.ROW_HEIGHT_PX;a.cardLayout.iCardBorderPx=e.CARD_BORDER_PX;a.cardLayout.headerHeight=g[0].dashboardLayout.headerHeight;}return a;},_getCardPropertyDefaults:function(){var c={};var p=this.getMetadata().getAllProperties();var P;for(var a in p){P=p[a];if(P.defaultValue!==undefined){c[P.name]=P.defaultValue;}}return c;},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=r?new R({bundleUrl:r.oUrlInfo.url}):null;}return this.ovplibResourceBundle;},_getCacheKeys:function(){var c=this.getComponentData&&this.getComponentData();if(c.ovpCardsAsApi){return;}if(c.appComponent&&!(c.appComponent instanceof sap.ui.base.ManagedObject)){return;}var I=c&&c.settings&&c.settings.isObjectStream;if(I){return;}var M=c&&c.model;if(M){var a=[];var p=M.metadataLoaded().then(function(P){var s;if(P&&P.lastModified){s=new Date(P.lastModified).getTime()+"";}else{l.error("No valid cache key segment last modification date provided by the OData Model");s=new Date().getTime()+"";}return s;});a.push(p);var b=M.annotationsLoaded().then(function(P){var d=0;if(P){for(var i=0;i<P.length;i++){if(P[i].lastModified){var L=new Date(P[i].lastModified).getTime();if(L>d){d=L;}}}}if(d===0){l.error("No valid cache key segment last modification date provided by OData annotations");d=new Date().getTime();}return d+"";});a.push(b);return a;}},createContent:function(){var c=this.getComponentData&&this.getComponentData();var M=c.model;var p;var P;var a=c&&c.mainComponent;var b=a&&a.oModelViewMap;var s=c&&c.modelName;var f=function(){if(M&&s){M.bIncludeInCurrentBatch=false;if(b&&s&&b[s]&&b[s][c.cardId]){delete b[s][c.cardId];if(Object.keys(b[s]).length>0){M.bIncludeInCurrentBatch=true;}}}};if(c&&c.mainComponent){p=c.mainComponent._getOvplibResourceBundle();}else{p=this.getOvplibResourceBundle();}P=this.getPreprocessors(p);var v={preprocessors:P,type:V.XML,viewName:"sap.ovp.cards.generic.Card"};var d=this._getCacheKeys();if(d&&d.length&&d.length>0){v.async=true;v.cache={keys:d};}var L=this._getCardPropertyDefaults().state;var i=c.cardId+(L?L:"Original");if(!L){i=i+(c.settings.selectedKey?"_Tab"+c.settings.selectedKey:"");}if(M&&M.bUseBatch&&!v.async){f();}var e=new sap.ui.core.mvc.XMLView(c.containerId==="dialogCard"?undefined:i,v);if(v.async){var g=e.onControllerConnected;e.onControllerConnected=function(){if(M&&M.bUseBatch){f();}g.apply(e,arguments);};}e.setModel(M);if(c.i18n){e.setModel(c.i18n,"@i18n");}e.setModel(P.xml.ovpCardProperties,"ovpCardProperties");e.setModel(p,"ovplibResourceBundle");return e;}});});
sap.ui.predefine('sap/ovp/cards/jUtils',["sap/base/Log"],function(L){"use strict";return{setAttributeToMultipleElements:function(s,a,b){var c=document.querySelectorAll(s);for(var i=0;i<c.length;i++){c[i].setAttribute(a,b);}},getElementWidth:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).width.replace("px",""));},getElementHeight:function(e){return parseFloat(getComputedStyle(e.getDomRef(),null).height.replace("px",""));},removeElementById:function(e){var s=document.getElementById(e);if(s){s.parentNode.removeChild(s);}return;},addClassToAllElements:function(e,c){if(e){if(e.length){e.forEach(function(a){a.classList.add(c);});}else{e.classList.add(c);}}},removeClassToAllElements:function(e,c){if(e){if(e.length){e.forEach(function(a){a.classList.remove(c);});}else{e.classList.remove(c);}}},checkIfFunction:function(p){if(typeof p==="function"){return true;}return false;},getIndex:function(n){var c=n.parentNode.childNodes;var a=0;for(var i=0;i<c.length;i++){if(c[i]==n){return a;}if(c[i].nodeType==1){a++;}}return-1;},addStyleToAllElements:function(e,p,v){if(e){if(e.length){e.forEach(function(a){a.style[p]=v;});}else{e.style[p]=v;}}},addAttributeToAllElements:function(e,a,b){if(e){if(e.length){e.forEach(function(c){c.setAttribute(a,b);});}else{e.setAttribute(a,b);}}},getOuterHeight:function(e){var h=e.offsetHeight;var s=getComputedStyle(e);h+=parseInt(s.marginTop,10)+parseInt(s.marginBottom,10);return h;},removeAttributesFromAll:function(e,s,a){if(e){e.forEach(function(b){var c=b.querySelectorAll(s);if(c){for(var i=0;i<c.length;i++){c[i].removeAttribute(a);}}});}}};},true);
sap.ui.predefine('sap/ovp/cards/linklist/AnnotationHelper',["sap/ovp/cards/AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ovp/cards/ovpLogger"],function(C,O,F,o){"use strict";var l=new o("OVP.linklist.AnnotationHelper");
function g(i){var S=[];var j,D;var P=i.getProperty("/sortBy");if(P){var u=i.getProperty("/sortOrder");if(u&&u.toLowerCase()!=="descending"){D=false;}else{D=true;}j={path:P,descending:D};S.push(j);}return S;}
function a(u,S){var v=[];var w=u.getProperty("/filters");if(w){v=v.concat(w);}var x=S&&S.SelectOptions;var y,P,R;if(x){for(var i=0;i<x.length;i++){y=x[i];P=y.PropertyName.PropertyPath;for(var j=0;j<y.Ranges.length;j++){R=y.Ranges[j];if(R.Sign.EnumMember){var z={path:P,operator:R.Option.EnumMember.split("/")[1],value1:C.getPrimitiveValue(R.Low),value2:C.getPrimitiveValue(R.High),sign:R.Sign.EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(z.sign==="E"&&z.operator!==F.EQ){l.error("Exclude sign is supported only with EQ operator");continue;}if(z.sign==="E"&&z.operator===F.EQ){z.operator=F.NE;z.sign="I";}if(z.operator==="CP"&&z.sign==="I"){var I=F.Contains;var V=z.value1;if(V){var A=V.indexOf('*');var B=V.lastIndexOf('*');if(A>-1){if((A===0)&&(B!==(V.length-1))){I=F.EndsWith;V=V.substring(1,V.length);}else if((A!==0)&&(B===(V.length-1))){I=F.StartsWith;V=V.substring(0,V.length-1);}else{V=V.substring(1,V.length-1);}}}z.operator=I;z.value1=V;}v.push(z);}}}}return v;}
function f(i,E,H){var M=i.getSetting("ovpCardProperties");var j=M.getProperty("/metaModel");var u=j.getODataEntityType(E.entityType);var v="/"+E.name;var S=u[M.getProperty("/selectionAnnotationPath")];var I;var w=M.getProperty("/layoutDetail");if(w==='resizable'){var x=M.getProperty("/cardLayout");if(x){if(M.getProperty("/listFlavor")==="standard"){var y="";for(var z in H){y+=z;}var R=M.getProperty("/cardLayout/iRowHeigthPx");if(R===undefined){R=16;}var A;if(M.getProperty("/densityStyle")==="cozy"){A=72;if((y.indexOf("Description")===-1)&&((y.indexOf("Title")>0&&y.indexOf("ImageUrl")>0)||(y.indexOf("Title")>0&&y.indexOf("TypeImageUrl")>0))){A=56;}else if((y.indexOf("Description")===-1)&&y.indexOf("Title")>0){A=48;}}else{A=60;if((y.indexOf("Description")===-1)&&((y.indexOf("Title")>0&&y.indexOf("ImageUrl")>0)||(y.indexOf("Title")>0&&y.indexOf("TypeImageUrl")>0))){A=48;}else if((y.indexOf("Description")===-1)&&y.indexOf("Title")>0){A=40;}}M.setProperty('/cardLayout/itemHeight',A);if(!M.getProperty("/defaultSpan")&&M.getProperty("/cardLayout/autoSpan")){I=M.getProperty("/cardLayout/noOfItems");var B=Math.ceil((I*A+M.getProperty("/cardLayout/headerHeight")+2*M.getProperty("/cardLayout/iCardBorderPx"))/R);M.setProperty("/cardLayout/noOfItems",B);}else{var D=Math.floor(((x.rowSpan*R)-M.getProperty("/cardLayout/headerHeight")-2*M.getProperty("/cardLayout/iCardBorderPx")));I=Math.floor(D/A)*x.colSpan;}}}}else{I=6;}var G=i.getSetting('ovpCardProperties'),P=G.getProperty('/parameters');if(S||!!P){if((S&&S.Parameters)||!!P){v=C.resolveParameterizedEntitySet(i.getSetting("dataModel"),E,S,P);}}var J="{path: '"+v+"', length: "+I;var K=g(M);if(K.length>0){J=J+", sorter:"+JSON.stringify(K);}var L=a(M,S);if(L.length>0){J=J+", filters:"+JSON.stringify(L);}var N=C.checkFilterPreference(M);if(N){J=J+", parameters:{custom: {cardId: '"+M.getProperty("/cardId")+"'}}";}J=J+"}";return J;}
f.requiresIContext=true;
function b(i,u){var B=i.getModel().getProperty("/baseUrl");return n(B,u);}
b.requiresIContext=true;
function c(i,D){var I=true;var j=O.format(i,D);if(j.toLowerCase().indexOf("icon")>0){I=false;}return I;}
c.requiresIContext=true;
function d(D){var i=true;if(!D){return null;}else if(D.toLowerCase().indexOf("icon")>0){i=false;}return i;}
function e(u){var i=new RegExp("http(s)?:\/\/(www\.)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?","i");return i.test(u);}
function h(T){var i;if(T.hasOwnProperty("Path")){i="{"+T.Path+"}";}else{i=T.String;}return i;}
function k(i){var P="{"+i.String+"}";return P;}
function m(A){if(A){return 1;}return 0;}
function n(B,u){if(!u){return undefined;}else if(u.lastIndexOf(B,0)===0||u.indexOf("://")>0){return u;}else if(u.lastIndexOf("/",0)===0){return B+u;}else{return B+"/"+u;}}
function p(i,S,v){var j;if(typeof v==="object"){j=v[i];}else{j=(typeof v==="boolean")?v:true;}return!S[i]&&j;}
function q(L,j,u){var N="";if(L){if(j&&u){N="#"+j+"-"+u;for(var i=0;i<L.length;i++){if(L[i].value===N){return L[i].name;}}N="";}else{return L[0].name;}}return N;}
function r(i,I){return n(i.baseUrl,I);}
function s(R){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","");}
function t(i){return((i.Path&&("{"+i.Path+"}"))||i.String||"");}
return{formatItems:f,formatUrl:b,isImageUrl:c,isImageUrlStaticData:d,isValidURL:e,getIconPath:h,formatString:k,linkedAction:m,formUrl:n,isVisible:p,getApplicationName:q,getImageUrl:r,contentRowIndex:s,getAvatarInitials:t};},true);
sap.ui.predefine('sap/ovp/cards/linklist/Component',["sap/ovp/cards/generic/Component","sap/ovp/cards/linklist/AnnotationHelper"],function(C,A){"use strict";return C.extend("sap.ovp.cards.linklist.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.linklist.LinkList"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.linklist.LinkList"},"communicationPath":{"type":"string","defaultValue":"com.sap.vocabularies.Communication.v1.Contact"},"headerAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.HeaderInfo"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}});});
sap.ui.predefine('sap/ovp/cards/linklist/LinkList.controller',["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ui/util/openWindow","sap/ovp/app/FilterHelper"],function(C,q,O,a,L,R,M,I,b,c,o,d,F){"use strict";var f=27,g=8,h=8,l=8,m="ovpLinkList",P="pictureCarousel",n="ovpCardHeader",A="sapMCrslActive";var D={onBeforeRendering:function(e){this.itemOnBeforeRendering(e);}};var p={onAfterRendering:function(e){this.itemOnAfterRendering(e);}};var r=new o("OVP.linklist.LinkList");return C.extend("sap.ovp.cards.linklist.LinkList",{onInit:function(){C.prototype.onInit.apply(this,arguments);this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false;var t=this;this.eventhandler=function(s,E,i){var j=t.getEntityType();var G=t.oMainComponent.getMacroFilterBar();var k=G.getModel();var u=t.getView().getModel('ovpCardProperties');var v=u.getData().entityType.name;if(j&&k){var w=F.getEntityRelevantFilters(j,i,v,k);var x=F.mergeFilters(w,t.selectionVaraintFilter);try{var y=t.getCardItemsBinding();if(y){y.filter(x);}if(t.getKPIBinding()){t.getKPIBinding().filter(x);}}catch(e){r.error(e);}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar&&this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onBeforeRendering:function(e){var i=this.getCardPropertiesModel();if(i.getProperty("/listFlavor")==="standard"&&!i.getProperty("/staticContent")){var j=this.byId("ovpCLI");if(j){j.addEventDelegate(D,this);}}},onAfterRendering:function(e){C.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var i=this.getCardPropertiesModel();var j=i.getProperty("/cardLayout/rowSpan");var k=i.getProperty("/cardLayout/colSpan");switch(i.getProperty("/listFlavor")){case"standard":if(i.getProperty("/staticContent")){if(k&&j){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList();}if(j===1){this._aLinkListIds=[m];this._setListColumnWidthInStandardCard(1);}else{this._itemOnEventBuildStandard(i,k,j,true);}}else{this._aLinkListIds=[m];this._setListColumnWidthInStandardCard(1);}}break;case"carousel":var s=this.byId(P);if(s.getId().indexOf('.')!==-1){var $=s.$();$.off('beforeSlide');$.on('beforeSlide',this.onBeforeSlide);$.trigger('beforeSlide',[1,1]);}if(i.getProperty("/staticContent")){if(j&&!(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(j);}else{this._setListHeightInCarouselCard(-1);}this._setCarouselImageProperties();}else{s.addEventDelegate(p,this);}break;default:break;}if(!O.checkIfAPIIsUsed(this)&&i.getProperty('/layoutDetail')==='resizable'){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var u=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var v=document.getElementById(u);t.dashboardLayout.showOnlyHeader?v.classList.add("sapOvpMinHeightContainer"):v.classList.remove("sapOvpMinHeightContainer");}},onBeforeSlide:function(e,i,j){if(e.target!=this){return;}var s=this.id+'-pageIndicator',k=document.getElementById(s);var E=k.querySelector('[data-slide=\''+i+'\']');E.classList.remove(A);E=k.querySelector('[data-slide=\''+j+'\']');E.classList.add(A);},getCardItemsBinding:function(){var e=this.getView().byId("ovpLinkList");var i=this.getView().byId("pictureCarousel");if(e){return e.getBinding("items");}else if(i){return i.getBinding("pages");}else{return null;}},attachingListenerToTheEventRefresh:function(){var e=this.getCardItemsBinding();var j=this.getCardPropertiesModel();if(e){if(!this._bListenerAttached){e.attachRefresh(function(){if(this._aLinkListIds){for(var i=1;i<this._aLinkListIds.length;i++){var k=this.byId(this._aLinkListIds[i]);var s=k.getItems().length;k.getItems().splice(0,s);k.destroy();}this._aLinkListIds.splice(0,this._aLinkListIds.length);}if(this._oListRest){this._oListRest.destroy();}}.bind(this));e.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(j.getProperty("/listFlavor")==="carousel"){var i=this.byId(P);i.addEventDelegate(p,this);}if(j.getProperty("/listFlavor")==="standard"){var t=e.getLength();if(t===0){var k=this.byId(m).$().parent();k.width("100%");}}}.bind(this));}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();}this._bListenerAttached=true;}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var j=e.getProperty("/cardLayout/colSpan");if(i){this._setListHeightInStandardCard(i);}if(j){this._setListColumnWidthInStandardCard(this._iVisibleColums);}else{this._setListColumnWidthInStandardCard(1);}}},itemOnBeforeRendering:function(e){var i,k=this.getCardPropertiesModel();switch(k.getProperty("/listFlavor")){case"standard":if(!k.getProperty("/defaultSpan")&&!k.getProperty("/staticContent")&&k.getProperty("/cardLayout/autoSpan")){i=k.getProperty("/cardLayout/noOfItems");}else{i=k.getProperty("/cardLayout/rowSpan");}var s=k.getProperty("/cardLayout/colSpan");var t=this.byId(m);var u=t.getItems();for(var j=0;j<u.length;j++){u[j].removeEventDelegate(D);}if(this._bInitialLoad){this._itemOnEventBuildStandard(k,s,i,true);}else{this._itemOnEventBuildStandard(k,s,i,false);}break;case"carousel":r.info("FYI: currently nothing special to handle here");break;default:break;}},getSpansWhenNoDefaultSpanMentioned:function(){var e=this.getCardPropertiesModel();var s=e.getProperty('/staticContent');var N=((s&&s.length)||(this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()))||0;var i=s?this.getItemHeight(this,m,true):e.getProperty('/cardLayout/itemHeight');var H=0;var j=this.byId(n);if(j){H=j.$().outerHeight();}var k=e.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((i*Math.min(N,6)+(H+h+l))/k);},itemOnAfterRendering:function(E){var i=this.getCardPropertiesModel();var j=i.getProperty("/cardLayout/rowSpan");var k=i.getProperty("/cardLayout/colSpan");switch(i.getProperty("/listFlavor")){case"standard":try{var s=this.byId(m);var t=s.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);t[t.length-1].removeEventDelegate(p);}catch(e){r.info("FYI: Unable to remove the delagted event at the last item of the last list");}if(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan")){j=this.getSpansWhenNoDefaultSpanMentioned();}if(j){this._setListHeightInStandardCard(j);}if(k){this._setListColumnWidthInStandardCard(this._iVisibleColums);}else{this._setListColumnWidthInStandardCard(1);}break;case"carousel":try{var u=this.byId(P);u.removeEventDelegate(p);}catch(e){r.info("FYI: Unable to remove the delagted event on the carousel");}if(j&&!(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(j);}else{this._setListHeightInCarouselCard(-1);}this._setCarouselImageProperties();break;default:break;}this._bInitialLoad=false;},_itemOnEventBuildStandard:function(e,k,s,t){var u;var v=this.byId(m);var w=this.getView().byId(this.getView().getId()+"--RestOfData");if(w){w.destroy();}if(t&&this._oListRest===undefined){this._oListRest=new L(this.getView().getId()+"--RestOfData",{});}this._aLinkListIds=[m];this._iAvailableItems=v.getItems().length;var x=e.getProperty("/cardLayout/items");if(x!==undefined){this._iNoOfItemsPerColumn=x;u=x;this._iVisibleColums=1;}else{var y=e.getProperty('/staticContent')?this.getItemHeight(this,m,true):e.getProperty('/cardLayout/itemHeight');var z=this._getListHeightInStandardCard(s);this._iNoOfItemsPerColumn=Math.floor(z/y);var N=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(N,k);u=this._iVisibleColums*this._iNoOfItemsPerColumn;}if(u>this._iAvailableItems){u=this._iAvailableItems;}else{for(var i=u;i<this._iAvailableItems;i++){v.getItems()[i].setVisible(false);}}if(this._iVisibleColums>1){var B=this.byId("ovpListRow");var E=this._iNoOfItemsPerColumn;var G=0;for(var j=this._iNoOfItemsPerColumn;j<u;j++){if(E>=this._iNoOfItemsPerColumn){E=0;G++;var H=m+G;var J=new L(this.getView().getId()+"--"+H,{showSeparators:v.getProperty("showSeparators")});this._aLinkListIds.push(H);if(v.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){J.addStyleClass("sapOvpLinkListStandardPaddingCozy");}else{J.addStyleClass("sapOvpLinkListStandardPaddingCompact");}B.addItem(J);}J.addItem(v.getItems()[this._iNoOfItemsPerColumn]);E++;}if(J){var K=J.getItems();K[K.length-1].addEventDelegate(p,this);}}else{if(t){this.itemOnAfterRendering(null);}else{var Q=v.getItems();Q[Q.length-1].addEventDelegate(p,this);}}},resizeCard:function(e){var i=this.getCardPropertiesModel();i.setProperty("/cardLayout/rowSpan",e.rowSpan);i.setProperty("/cardLayout/colSpan",e.colSpan);switch(i.getProperty("/listFlavor")){case"standard":this._resizeStandard(e,i);break;case"carousel":this._resizeCarousel(e);break;default:break;}if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);this.resizeHandlerId=null;}var j=this.getView().byId('ovpCardContentContainer').getDomRef();if(j){if(e.showOnlyHeader){j.classList.add('sapOvpContentHidden');}else{j.classList.remove('sapOvpContentHidden');}}},_mergeAllTheDataInOneList:function(){var e=this._aLinkListIds.length;var k=this.getView().byId("ovpLinkList");var s=-1;for(var t=0;t<k.getItems().length;t++){if(!k.getItems()[t].getVisible()){s=t;break;}}for(var i=1;i<e;i++){var u=this.getView().byId(this._aLinkListIds[i]);var v=u.getItems().length;for(var j=0;j<v;j++){if(s===-1){k.addItem(u.getItems()[0]);}else{k.insertItem(u.getItems()[0],s);s++;}}u.destroy();}},_resizeStandard:function(i,j){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var t=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var u=this._oListRest.getItems().length;try{for(var k=0;k<u;k++){t.addItem(this._oListRest.getItems()[0]);}}catch(e){r.info("Error: "+e);}for(var s=0;s<t.getItems().length;s++){t.getItems()[s].setVisible(true);}if(!t){var v=this.byId(m).$().parent();v.width("100%");var w=j.getProperty("/cardLayout/rowSpan");if(w){this._setListHeightInStandardCard(w);}}var B=t.getBindingInfo("items");var x=j.getProperty('/staticContent')?this.getItemHeight(this,m,true):j.getProperty('/cardLayout/itemHeight');var N=this._getListHeightInStandardCard(i.rowSpan);var y=Math.floor(N/x)*i.colSpan;this._bInitialLoad=false;q(this.getView().$()).find(".sapOvpWrapper").css({height:N+"px"});if(B){if(y>this._iAvailableItems&&B.length<=this._iAvailableItems){B.length=y;t.bindItems(B);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh();}else{this._itemOnEventBuildStandard(j,i.colSpan,i.rowSpan,false);}}else{this._itemOnEventBuildStandard(j,i.colSpan,i.rowSpan,false);}}},_resizeCarousel:function(e){this._setListHeightInCarouselCard(e.rowSpan);this._setCarouselImageProperties();},_setListHeightInCarouselCard:function(i){var e=0,j=this.byId(P);if(i!==-1){var H=0;var k=this.byId(n);if(k){H=k.$().outerHeight();}var s=this.getCardPropertiesModel();var t=s.getProperty("/cardLayout/iRowHeightPx");e=(i*t)-(H+f+g);j.$().height(e+16);}else{var u=j.$().width(),v=null,w=j.getPages(),x=0;for(var y=0;y<w.length;y++){v=w[y];if(v&&v.getItems().length>1){x=Math.max(x,v.getItems()[0].$().outerHeight());}}var N=j.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=u+(x+N);j.$().height(e);}},_setCarouselImageProperties:function(){var e=this.byId(P),i=e.getPages(),j=e.$().height(),N=i.length>1?e.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,k=null,s=null,t=0,E,u;for(var v=0;v<i.length;v++){k=i[v];if(k){E=k.getAggregation('items')&&k.getItems()[0];if(E){t=E.hasStyleClass('sapOvpCarouselContentHeader')?E.$().outerHeight():0;u=k.getItems()[k.getItems().length-1];s=u.getAggregation('items')&&u.getItems()[0];if(s instanceof I){this._setCarouselImageHeight(s,j-t-N);}}}}},_setCarouselImageHeight:function(i,e){var j=i.getDomRef().naturalHeight;if(j!==0){j<e?i.setHeight(j+'px'):i.setHeight(e+'px');}},_setListHeightInStandardCard:function(e){var j=0;var k;var s;k=this.byId(m);if(k){j=this._getListHeightInStandardCard(e);s=k.$().parent();s.height(j);}if(this._aLinkListIds){for(var i=1;i<this._aLinkListIds.length;i++){k=this.byId(this._aLinkListIds[i]);j=this._getListHeightInStandardCard(e);s=k.$().parent();s.height(j);}}},_getListHeightInStandardCard:function(i){var e=0;var j=this.getCardPropertiesModel();if(i){var H=0;var k=this.byId(n);if(k){H=k.$().outerHeight();}var s=j.getProperty("/cardLayout/iRowHeightPx");e=(i*s)-(H+h+l);}return e;},_setListColumnWidthInStandardCard:function(i){var e;var k;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var j=0;j<this._aLinkListIds.length;j++){e=this.byId(this._aLinkListIds[j]);k=e.$().parent();s=(100/i)+"%";k.width(s);}}else{e=this.byId(this._aLinkListIds[0]);if(e){k=e.$().parent();k.width(s);}}}},onLinkListItemPressLocalData:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var t=e.getSource().data("targetUri");var i=e.getSource().data("openInNewWindow");var B=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(t){t=this.buildUrl(B,t);if(i==="true"){d(t,"newWindow");}else{window.location.href=t;}}}},onLinkListActionPressLocalData:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var s=e.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:(this.onFuImpSuccess.bind(this)),error:(this.onFuImpFailed.bind(this))});}},onFuImpSuccess:function(e){M.show(b.getText("Toast_Action_Success"),{duration:3000});},onFuImpFailed:function(e){M.show(b.getText("Toast_Action_Error"),{duration:3000});},onLinkListItemPress:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),i[0],N);}},onLinkPopover:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":i=e.getSource().getParent().getAggregation("items")[0];break;case"carousel":i=e.getSource().getParent().getAggregation("items")[0];break;default:break;}var j=this.getCardPropertiesModel();if(j.getProperty("/listFlavor")==="carousel"){var k=this.byId(P);k.addEventDelegate(p,this);}i.bindElement(e.getSource().getBindingContext().getPath());i.openBy(e.getSource());if(!this._bListeningPopOver){i.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();}.bind(this));}this._bListeningPopOver=true;}},onLinkListLineItemUrl:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var t,s="com.sap.vocabularies.UI.v1.LineItem",N=this.entityType[s][0].Url;if(N.hasOwnProperty("String")){t=N.String;}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),s)[0];t=i.url;}if(t){window.location.href=t;}else{r.info("LinkList Standard Card: No Navigation on line item");}}},onLinkNavigationSingleTarget:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),undefined);this.doNavigation(e.getSource().getBindingContext(),i[0],N);}},onLinkNavigation:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{if(sap.ushell.Container.getService("CrossApplicationNavigation")){var B=e.getSource().getBindingContext();if(B.getProperty("SemanticObject")){var N={target:{semanticObject:B.getProperty("SemanticObject"),action:B.getProperty("SemanticAction")}};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(N);}}}},buildUrl:function(B,s){if(s.lastIndexOf(B,0)===0||s.indexOf("://")>0){return s;}else if(s.lastIndexOf("/",0)===0){return B+s;}else{return B+"/"+s;}},onLinkListActionPress:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var s=e.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:(this.onFuImpSuccess.bind(this)),error:(this.onFuImpFailed.bind(this))});}},onLinkListSemanticObjectPressLocalData:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=parseInt(e.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[i].semanticObject&&this._oStaticContent[i].action){var j={semanticObject:this._oStaticContent[i].semanticObject,action:this._oStaticContent[i].action,iStaticLinkListIndex:i};this.doIntentBasedNavigation(null,j,false,N);}else{M.show(b.getText("Toast_Action_Error"),{duration:3000});}}}});});
sap.ui.predefine('sap/ovp/cards/list/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.list.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.list.List"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.list.List"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"countHeaderFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.CountHeader"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.KPIHeader"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/list/List.controller',["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/app/FilterHelper"],function(C,q,J,O,a,A,b,o,u,F){"use strict";var l=new o("OVP.list.List");return C.extend("sap.ovp.cards.list.List",{counter:0,arrayLength:0,minMaxModel:{},onInit:function(){C.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new J();this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel");var t=this;this.eventhandler=function(c,E,f){var d=t.getEntityType();var g=t.oMainComponent.getMacroFilterBar();var h=g.getModel();var i=t.getView().getModel('ovpCardProperties');var j=i.getData().entityType.name;if(d&&h){var r=F.getEntityRelevantFilters(d,f,j,h);var k=F.mergeFilters(r,t.selectionVaraintFilter);try{var L=t.getCardItemsBinding();if(L){L.filter(k);}if(t.getKPIBinding()){t.getKPIBinding().filter(k);}}catch(e){l.error(e);}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar&&this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onContactDetailsLinkPress:function(e){var p,s,B;s=e.getSource();p=s.getParent().getAggregation("items")[0];B=s.getBindingContext();if(!B){return;}p.bindElement(B.getPath());p.openBy(s);},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);var i=this.getCardPropertiesModel().getProperty("/imageSupported");var d=this.getCardPropertiesModel().getProperty("/densityStyle");if(i){var c=this.byId('ovpList');c.attachUpdateFinished(function(){this._addImageCss(d);}.bind(this));}if(!O.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var h=Math.max(e.dashboardLayout.headerHeight,this.getHeaderHeight());var s=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var f=document.getElementById(s);if(!e.dashboardLayout.autoSpan){f.getElementsByClassName('sapOvpWrapper')[0].style.height=(e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX)-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";}if(e.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}}},_addImageCss:function(d){var L=this.byId('ovpList');var i=L.getItems();var c=false;var e=L.getDomRef().getAttribute("class");if(d==="cozy"){e=e+" sapOvpListImageCozy";}else{e=e+" sapOvpListImageCompact";}L.getDomRef().setAttribute("class",e);i.forEach(function(f){if(f.getIcon().indexOf("icon")!=-1){c=true;}});i.forEach(function(f){var g=f.getDomRef();var h;if(g&&g.children[0]&&g.children[0].children[0]){h=g.children[0].children[0];}var j=f.getDescription();var k=f.getIcon();var t=c;var m=f.getTitle();var n=m.split(' ').map(function(s){return s?s[0].toUpperCase():"";}).join('').substring(0,2);if(k!=""&&k.indexOf("icon")==-1){c=false;}if(c&&g.children[0]){q(g.children[0]).addClass("sapOvpIconListItem");}else if(g.children[0]){q(g.children[0]).addClass("sapOvpImageListItem");}if(h&&d==="cozy"&&c===false){if(h){var e=h.getAttribute("class");e=e+" sapOvpImageCozy";h.setAttribute("class",e);}}var p="";if(c===true&&j===""){p=d==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy";}else if(c===false&&j===""){p=d==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy";}else{p=d==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy";}f.addStyleClass(p);if(g&&g.children[0]&&k===""&&g.children[0].id!=="ovpIconImagePlaceHolder"){var r=document.createElement('div');r.innerText=n;r.setAttribute("id","ovpIconImagePlaceHolder");r.className=c===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(c===false&&d==="cozy"){r.className=r.className+" sapOvpImageCozy";}g.insertBefore(r,g.children[0]);}c=t;});},onListItemPress:function(e){var n=b.bCRTLPressed?b.constants.explace:b.constants.inplace;b.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var N=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),N[0],n);}},getCardItemsBinding:function(){var c=this.getView().byId("ovpList");return c.getBinding("items");},_getMinMaxObjectFromContext:function(n){this.counter++;var e=this.getEntityType(),s=this.getCardPropertiesModel().getProperty("/annotationPath"),r=e[s],c=this.getMetaModel().createBindingContext(e.$path+"/"+s),m={minValue:0,maxValue:0};if(A.isFirstDataPointPercentageUnit(c,r)){m.minValue=0;m.maxValue=100;return m;}var d=A.getFirstDataPointValue(c,r),f=this.getView().byId("ovpList"),g=f.getBinding("items"),M=this.getModel(),h=g.getCurrentContexts();for(var i=0;n?i<n:i<h.length;i++){var j=M.getOriginalProperty(d,h[i]),k=parseFloat(j,10);if(k<m.minValue){m.minValue=k;}else if(k>m.maxValue){m.maxValue=k;}}return m;},_updateMinMaxModel:function(n){var m=this._getMinMaxObjectFromContext(n);this.minMaxModel.setData({minValue:m.minValue,maxValue:m.maxValue});this.minMaxModel.refresh();return m;},returnBarChartValue:function(v){this._updateMinMaxModel();var V=parseFloat(v,10);return V;},getCardItemBindingInfo:function(){var L=this.getView().byId("ovpList");return L.getBindingInfo("items");},resizeCard:function(n,c){var N,i,h;try{var $=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),B=this.getCardItemBindingInfo(),H=this.getHeaderHeight(),d=this.getView().byId('ovpCardContentContainer').getDomRef();if(n.showOnlyHeader){d.classList.add('sapOvpContentHidden');N=0;}else{d.classList.remove('sapOvpContentHidden');h=H+c.dropDownHeight;i=n.rowSpan*n.iRowHeightPx-h;N=Math.abs(Math.floor(i/c.itemHeight));$.style.height=n.rowSpan*n.iRowHeightPx+'px';}d.style.height=(n.rowSpan*n.iRowHeightPx)-(H+2*n.iCardBorderPx)+"px";if(N!==B.length){B.length=N;n.noOfItems=B.length;this._updateMinMaxModel(B.length);this.getCardItemsBinding().refresh();}else{this._handleCountHeader();}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString());}}});});
sap.ui.predefine('sap/ovp/cards/ovpLogger',["sap/ui/base/Object","sap/base/Log"],function(B,L){"use strict";var f="FioriElements: ";return B.extend("sap.ui.base.Log",{constructor:function(c){return L.getLogger(f+c);}});});
sap.ui.predefine('sap/ovp/cards/quickview/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.quickview.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.quickview.Quickview"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.quickview.Quickview"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Facets"},"footerFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.ActionsFooter"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/quickview/Quickview.controller',["sap/ovp/cards/generic/Card.controller","sap/m/Button"],function(C,B){"use strict";return C.extend("sap.ovp.cards.quickview.Quickview",{onInit:function(){C.prototype.onInit.apply(this,arguments);this.bCustomActionFlag=true;},onBeforeRendering:function(){var h=this.byId('ovpQuickviewCardHeader');if(h){var t=h.getText();var s=t.substring(0);if(t[0]===':'){s=t.substring(2);}else if(t[t.length-2]===':'){s=t.substring(0,t.length-2);}h.setText(s);var c=h.getCustomData();if(c){for(var i=0;i<c.length;++i){if(c[i].getProperty('key')==='aria-label'){c[i].setValue(s);}}}}var o=this.getCardPropertiesModel();var S=o.getProperty("/showFirstActionInFooter")?o.getProperty("/showFirstActionInFooter"):false;var f=this.byId("ovpActionFooter");if(!S){if(f){var F=f.getContent();if(F&&F.length){for(var i=0,a=F.length;i<a;i++){if(F[i]instanceof B){F[i].setVisible(false);break;}}}}}},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);var c=this.getCardPropertiesModel();var f=this.byId("ovpActionFooter");if(!!this.bCustomActionFlag){var a=c.getProperty("/customActions");if(!!f&&!!a&&!!a.length){for(var j=0;j<a.length;j++){var t=a[j].text;var m=null,p;if(this.getOwnerComponent()&&this.getOwnerComponent().getComponentData()){m=this.getOwnerComponent().getComponentData().mainComponent;}if(!!m&&!!t&&!!a[j].press){p=m.templateBaseExtension.provideCustomActionPress(a[j].press)?m.templateBaseExtension.provideCustomActionPress(a[j].press):m.onCustomActionPress(a[j].press);if(typeof p==="function"){var b=new B({text:t,press:p.bind(this),type:"Transparent"});var F=c.getProperty("/showFirstActionInFooter");var s=(F)?0:1;var P=a[j].position+s;var l=f.getContent().length;if(P<(1+s)&&P>(l-1)){f.addContent(b);}else{f.insertContent(b,P);}}}}}this.bCustomActionFlag=false;}}});});
sap.ui.predefine('sap/ovp/cards/rta/AppSettingsDialog.controller',["sap/ui/core/mvc/Controller","sap/ovp/cards/AppSettingsUtils","sap/ui/model/json/JSONModel","sap/base/util/merge"],function(C,A,J,m){'use strict';return C.extend("sap.ovp.cards.rta.AppSettingsDialog",{onInit:function(){A.oResetButton.attachPress(this.onResetButton,this);},onAfterRendering:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=this.getView().getModel().getData();this._originalOVPManifestSettings=m({},this._ovpManifestSettings);},onResetButton:function(){this.setEnablePropertyForResetAndSaveButton(false);this._ovpManifestSettings=m({},this._originalOVPManifestSettings);var o=new J(this._ovpManifestSettings);this.getView().setModel(o);this.getView().getModel().refresh();},onChange:function(){this.setEnablePropertyForResetAndSaveButton(true);},setEnablePropertyForResetAndSaveButton:function(e){A.oResetButton.setEnabled(e);A.oSaveButton.setEnabled(e);}});});
sap.ui.predefine('sap/ovp/cards/rta/SelectIcons.controller',["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(C,F,a){'use strict';return C.extend("sap.ovp.cards.rta.SelectIcons",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,f,I){var q=e.getParameter("query"),g=null,b=[];for(var i=0;i<f.length;i++){b.push(new F(f[i],a.Contains,q));}if(q){g=new F(b,false);}this.getView().byId(I).getBinding("items").filter(g,"Application");},filterTable:function(e){var v=this.getView(),m=v.getModel(),t=m.getProperty("/tableName"),l;if(t==="IconTable"){this._filterTable(e,["Icon","Name"],"IconTable");l=v.byId("IconTable").getBinding("items").getLength();m.setProperty("/NoOfIcons",l);}else if(t==="ImageTable"){this._filterTable(e,["Name"],"ImageTable");l=v.byId("ImageTable").getBinding("items").getLength();m.setProperty("/NoOfImages",l);}m.refresh(true);},onItemPress:function(e){var s=e.getSource(),S=s.getBindingContext(),m=this.getView().getModel(),t=m.getProperty("/tableName"),u;if(t==="IconTable"){u=S.getProperty("Icon");}else if(t==="ImageTable"){u=S.getProperty("Image");}this.updateIconPath(u);},onSelectionChange:function(e){var k=e.getParameter("item").getKey(),m=this.getView().getModel();m.setProperty("/tableName",k);m.refresh(true);}});});
sap.ui.predefine('sap/ovp/cards/rta/SelectKPI.controller',["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(C,F,a){'use strict';return C.extend("sap.ovp.cards.rta.SelectKPI",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,f,I){var q=e.getParameter("query"),g=null,b=[];for(var i=0;i<f.length;i++){b.push(new F(f[i],a.Contains,q));}if(q){g=new F(b,false);}this.getView().byId(I).getBinding("items").filter(g,"Application");},onSearch:function(e){var v=this.getView(),m=v.getModel(),l;this._filterTable(e,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"KPITable");l=v.byId("KPITable").getBinding("items").getLength();m.setProperty("/NoOfKPIItem",l);m.refresh(true);},onItemPress:function(e){var s=e.getSource(),S=s.getBindingContext(),v=S.getObject();this.updateKPIItemPath(v,e);}});});
sap.ui.predefine('sap/ovp/cards/rta/SelectLineItem.controller',["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(C,F,a){'use strict';return C.extend("sap.ovp.cards.rta.SelectLineItem",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,f,I){var q=e.getParameter("query"),g=null,b=[];for(var i=0;i<f.length;i++){b.push(new F(f[i],a.Contains,q));}if(q){g=new F(b,false);}this.getView().byId(I).getBinding("items").filter(g,"Application");},filterTable:function(e){var v=this.getView(),m=v.getModel(),l;this._filterTable(e,["Label","VisibleFields"],"LineItemTable");l=v.byId("LineItemTable").getBinding("items").getLength();m.setProperty("/NoOfLineItem",l);m.refresh(true);},onItemPress:function(e){var s=e.getSource(),S=s.getBindingContext(),v=S.getObject();this.updateLineItemPath(v);}});});
sap.ui.predefine('sap/ovp/cards/rta/SelectLinks.controller',["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(C,F,a){'use strict';return C.extend("sap.ovp.cards.rta.SelectLinks",{onInit:function(){},onAfterRendering:function(){},_filterTable:function(e,f,I){var q=e.getParameter("query"),g=null,b=[];for(var i=0;i<f.length;i++){b.push(new F(f[i],a.Contains,q));}if(q){g=new F(b,false);}this.getView().byId(I).getBinding("items").filter(g,"Application");},filterTable:function(e){var v=this.getView(),m=v.getModel(),l;this._filterTable(e,["name","value"],"LinkTable");l=v.byId("LinkTable").getBinding("items").getLength();m.setProperty("/NoOfLinks",l);m.refresh(true);},onItemPress:function(e){var s=e.getSource(),S=s.getBindingContext(),i=S.getProperty("value");this.updateLinkPath(i);}});});
sap.ui.predefine('sap/ovp/cards/rta/SettingsDialog.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/SettingsUtils","sap/ovp/cards/PayLoadUtils","sap/ovp/cards/rta/SettingsDialogConstants","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/ChangeReason","sap/ovp/cards/linklist/AnnotationHelper","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/cards/AnnotationHelper","sap/ui/core/IconPool","sap/ui/core/mvc/ViewType","sap/m/Dialog","sap/m/Button","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/deepEqual","sap/base/util/merge","sap/ovp/cards/ovpLogger"],function(C,J,O,s,P,S,M,F,a,b,L,V,c,I,d,D,B,e,f,g,h,k,m,o){"use strict";var l=new o("OVP.rta.SettingDialog");return C.extend("sap.ovp.cards.rta.SettingsDialog",{_oCardManifestSettings:{},_aRefreshNotRequired:S._aRefreshNotRequired,_aRefreshRequired:S._aRefreshRequired,_updateManifestProperties:S._updateManifestProperties,aVariantNames:S.aVariantNames,oOvpResourceBundle:g,oMandatoryPropertiesKey:S.oMandatoryPropertiesKey,onInit:function(){s.oSaveButton.attachPress(this.onSaveButtonPress,this);s.oResetButton.attachPress(this.onResetButton,this);s.oMessagePopOverButton.attachPress(this.handleMessagePopoverPress,this);},onAfterRendering:function(){s.dialogBox.addStyleClass("sapOvpSettingsDialogBox");this.setEnablePropertyForResetAndSaveButton(false);this._oCardManifestSettings=this.getView().getModel().getData();this._oOriginalCardManifestSettings=m({},this._oCardManifestSettings);var v=this.getView(),i=v.getModel();if(!this._oCardManifestSettings.addNewCard){var j=v.byId("dialogCard");if(!j.getVisible()){j=v.byId("dialogCardNoPreview");}j.getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";v.byId("dialogCardOverlay").getDomRef().style.minHeight=this._oCardManifestSettings.dialogBoxHeight+"px";s.settingFormWidth(v,"calc(100% - "+(this._oCardManifestSettings.dialogBoxWidth+1)+"rem)");setTimeout(function(){var j=this.getView().byId("dialogCard");if(j.getVisible()){j.setBusy(false);}}.bind(this),2000);}if(this._oCardManifestSettings.staticContent){this.handleErrorHandling(i,"title","/staticContent");this.handleErrorHandling(i,"targetUri","/staticContent");}if(s.bNewKPICardFlag){var n=v.getModel();var p=v.byId("sapOvpKPITable").getBinding("items").getLength();n.setProperty("/NoOfKPIItem",p);n.setProperty("/NoKPI",p);}},validateInputField:function(E){var i=E.getSource();var j=i.getValue().trim().length;if(!j){i.setValue(i.getValue().trim());}if(!this._oCardManifestSettings.addNewCard){this.updateCard(E);}else{this.setEnablePropertyForResetAndSaveButton(true);}},addView:function(E){this._oCardManifestSettings.showViewSwitchButton=true;this.setEnablePropertyForResetAndSaveButton(true);var i,j=this._oCardManifestSettings,n=this.getView().getModel();if(!j.addNewCard){if(j.dataPointAnnotationPath&&j.dataPoint&&j.dataPoint.length){i=j.dataPoint[0].value;}}if(j.tabs&&j.tabs.length){j.newViewCounter++;if(!j.addNewCard){if(j.template==="sap.ovp.cards.charts.analytical"||j.template==="sap.ovp.cards.charts.smart.chart"){j.tabs.push({chartAnnotationPath:j.chart[0].value,dataPointAnnotationPath:i,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+j.newViewCounter)});}else{j.tabs.push({annotationPath:j.lineItem[0].value,dataPointAnnotationPath:i,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+j.newViewCounter)});}}else{j.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+j.newViewCounter)});}var p=j.tabs.length;j.aViews.push({text:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+j.newViewCounter),key:p,isLaterAddedView:true,isViewResetEnabled:false});if(!j.addNewCard){var q=j.defaultViewSelected;if(j.tabs[q-1].entitySet){j.tabs[p-1].entitySet=j.allEntitySet[0].value;}}this.selectViewSwitch(E,p);}else{j.tabs=[{}];S.tabFields.forEach(function(t){if(!j.addNewCard){if(t!=='entitySet'){j.tabs[0][t]=j[t];}}else{j.tabs[0][t]=j[t];}});j.tabs[0].value=this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1");if(!j.addNewCard){if(j.template==="sap.ovp.cards.charts.analytical"||j.template==="sap.ovp.cards.charts.smart.chart"){j.tabs.push({chartAnnotationPath:j.chart[0].value,dataPointAnnotationPath:i,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2")});}else{j.tabs.push({annotationPath:j.lineItem[0].value,dataPointAnnotationPath:i,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2")});}}else{j.tabs.push({entitySet:"",value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2")});}j.selectedKey=1;j.defaultViewSelected=1;j.aViews=[{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_MAIN_VIEW"),key:0,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 1 ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")"),key:1,initialSelectedKey:1,isLaterAddedView:false,isViewResetEnabled:false},{text:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" 2"),key:2,isLaterAddedView:true,isViewResetEnabled:false}];j.newViewCounter=2;this.selectViewSwitch(E,1);}this.handleErrorHandling(n,"value","/tabs");},deleteView:function(E){this.setEnablePropertyForResetAndSaveButton(true);var i=this._oCardManifestSettings,j=parseInt(i.selectedKey,10),n=this.getView().getModel();i.tabs.splice(j-1,1);i.aViews.splice(j,1);if(j===i.defaultViewSelected){i.defaultViewSelected=1;i.aViews[j].text=i.aViews[j].text+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";}i.aViews.forEach(function(v,p){if(p>=j){v.key--;}});this.handleErrorHandling(n,"value","/tabs");if(i.tabs.length==1){S.tabFields.forEach(function(t){var v=i.tabs[0][t];if(t!=='entitySet'||(t==='entitySet'&&v)){i[t]=v;}});delete i.selectedKey;delete i.defaultViewSelected;delete i.tabs;delete i.aViews;i.aViews=[{text:this.oOvpResourceBundle.getText("OVP_KEYUSER_SHOWS_DIFFERENT_VIEWS"),key:0,initialSelectedKey:0,isLaterAddedView:false,isViewResetEnabled:false}];s.addManifestSettings(i);s.setVisibilityForFormElements(i);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!i.addNewCard){this._fCardWithRefresh();}}else{i.selectedKey=1;this.selectViewSwitch(E,i.selectedKey);}},resetView:function(){var i=this._oCardManifestSettings,j=this.getView().getModel(),n=parseInt(i.selectedKey,10),p=i.aViews[n],q=i.defaultViewSelected;if(!p.isLaterAddedView){var r=i.dataPointAnnotationPath?true:false,t=this._oOriginalCardManifestSettings.dataPointAnnotationPath?true:false;if(n){var u=i.aViews[n].initialSelectedKey;S.tabFields.forEach(function(w){if(w!=="dataPointAnnotationPath"||r){if(this._oOriginalCardManifestSettings.tabs&&this._oOriginalCardManifestSettings.tabs.length){var x=this._oOriginalCardManifestSettings.tabs[u-1][w];if(w!=='entitySet'||(w==='entitySet'&&x)){i[w]=x;i.tabs[n-1][w]=i[w];}}else{if(w!=='entitySet'){i[w]=this._oOriginalCardManifestSettings[w];i.tabs[n-1][w]=i[w];}}}}.bind(this));if(!this._oOriginalCardManifestSettings.tabs||!this._oOriginalCardManifestSettings.tabs.length){i.newViewCounter++;i.tabs[n-1].value=this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter);}if(n===i.defaultViewSelected){i.aViews[n].text=i.tabs[n-1].value+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";}else{i.aViews[n].text=i.tabs[n-1].value;}}else{S.mainFields.forEach(function(w){i[w]=this._oOriginalCardManifestSettings[w];}.bind(this));if(r!==t){if(t){i.tabs.forEach(function(w){if(w.prevDataPointAnnotationPath){w.dataPointAnnotationPath=w.prevDataPointAnnotationPath;}else{w.dataPointAnnotationPath=i.dataPoint[0].value;}});i.dataPointAnnotationPath=i.tabs[q].dataPointAnnotationPath;}else{i.tabs.forEach(function(w){w.prevDataPointAnnotationPath=w.dataPointAnnotationPath;w.dataPointAnnotationPath=undefined;});}}}}else{var v;if(i.dataPointAnnotationPath){v=i.dataPoint[0].value;}i.newViewCounter++;if(i.template==="sap.ovp.cards.charts.analytical"||i.template==="sap.ovp.cards.charts.smart.chart"){i.tabs[n-1]={chartAnnotationPath:i.chart[0].value,dataPointAnnotationPath:v,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter)};}else{i.tabs[n-1]={annotationPath:i.lineItem[0].value,dataPointAnnotationPath:v,value:this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter)};}if(n===i.defaultViewSelected){i.aViews[n].text=this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")");}else{i.aViews[n].text=this.oOvpResourceBundle&&(this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_VIEW_NAME")+" "+i.newViewCounter);}S.tabFields.forEach(function(w){var x=i.tabs[n-1][w];if(w!=='entitySet'||(w==='entitySet'&&x)){i[w]=x;}});}this.handleErrorHandling(j,"value","/tabs");i.isViewResetEnabled=false;i.aViews[n].isViewResetEnabled=false;s.addManifestSettings(i);s.setVisibilityForFormElements(i);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!i.addNewCard){this._fCardWithRefresh();}},selectViewSwitch:function(E,i){var j=this._oCardManifestSettings,n=this.getView().getModel();if(!i){i=E.getSource().getSelectedIndex();}if(this.defaultViewSwitch){this.defaultViewSwitch.setEnabled(true);}this.setEnablePropertyForResetAndSaveButton(true);var p=j.metaModel,q,r=j.defaultViewSelected;if(!i){j.selectedKey=i;j.mainViewSelected=true;j.isViewResetEnabled=j.aViews[i].isViewResetEnabled;S.tabFields.forEach(function(v){var w=j.tabs[r-1][v];if(v!=='entitySet'||(v==='entitySet'&&w)){j[v]=w;}});this.handleErrorHandling(n,"value","/tabs");if(j.tabs[r-1].entitySet){q=p.getODataEntitySet(j.tabs[r-1].entitySet);j.entityType=p.getODataEntityType(q.entityType);this.resetSupportingObjectsOnEntitySetChange(j,r);}s.addManifestSettings(j);s.setVisibilityForFormElements(j);this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();if(!j.addNewCard){this._fCardWithRefresh();}}else{j.mainViewSelected=false;j.isViewResetEnabled=j.aViews[i].isViewResetEnabled;if(!j.addNewCard){var t=this.getView().byId("dialogCard");if(t.getVisible()){var R=t.getComponentInstance().getRootControl();var u=R.getController();u.changeSelection(i,true,j);this.handleErrorHandling(n,"value","/tabs");if(j.tabs[i-1].entitySet){q=p.getODataEntitySet(j.tabs[i-1].entitySet);j.entityType=p.getODataEntityType(q.entityType);this.resetSupportingObjectsOnEntitySetChange(j,r);}s.addManifestSettings(j);s.setVisibilityForFormElements(j);S.tabFields.forEach(function(v){var w=j.tabs[i-1][v];if(v!=='entitySet'||(v==='entitySet'&&w)){j[v]=w;}});if(!!j.kpiAnnotationPath){this.setAnnotationPathInModel(j,"sapOvpSettingsKPIAnnotation",j.kpiAnnotationPath);}if(!!j.selectionPresentationAnnotationPath){this.setAnnotationPathInModel(j,"sapOvpSettingsFilterAndPresentedBy",j.selectionPresentationAnnotationPath);}this.getView().getModel("visibility").refresh();this.getView().getModel().refresh();}}else{if(!!j.tabs[i-1].entitySet){q=p.getODataEntitySet(j.tabs[i-1].entitySet);j.entityType=p.getODataEntityType(q.entityType);s.addManifestSettings(j);}this.aVariantNames.forEach(function(v){if(this._oCardManifestSettings[v.sPath]){this._oCardManifestSettings[v.sPath]=[];}}.bind(this));this.resetSupportingObjectsOnEntitySetChange(j,r);j.selectedKey=i;S.tabFields.forEach(function(v){var w=j.tabs[i-1][v];j[v]=w;});s.setVisibilityForFormElements(j);this.getView().byId("sapOVPEntitySetList").setValue(j.tabs[i-1].entitySet);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh();}}},resetSupportingObjectsOnEntitySetChange:function(i,j){i=s.addSupportingObjects(i);var n=i.defaultViewSelected;if(n){i.aViews[n].text=i.tabs[n-1].value;}i.aViews[j].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";i.defaultViewSelected=j;},setAnnotationPathInModel:function(i,j,n){if(i.entityType[n]){this.setVariant(i,n);}if(j==="sapOvpSettingsKPIAnnotation"){s.addKPINavApplicationName(i);}},setCurrentActivePageForCarouselCard:function(i){var j=this.getView().byId("dialogCard");if(j.getVisible()){var n=j.getComponentInstance(),r=n.getRootControl(),p=r.byId("pictureCarousel");if(p){var q=p.getPages(),t=q[i];p.setActivePage(t);}}},onSelectionChange:function(E){var j=E.getSource(),n=j.getModel(),p=n.getData().staticContent,q=j.getSelectedItem(),r=q.getBindingContext().getObject(),v=j.getModel("visibility");for(var i=0;i<p.length;i++){if(p[i].id===r.id){v.setProperty("/moveToTheTop",!(p.length===1||i===0));v.setProperty("/moveUp",!(p.length===1||i===0));v.setProperty("/moveDown",!(p.length===1||i===(p.length-1)));v.setProperty("/moveToTheBottom",!(p.length===1||i===(p.length-1)));v.setProperty("/delete",true);n.setProperty("/selectedItemIndex",i);v.refresh(true);if(E.getParameter("listItem")){this.setCurrentActivePageForCarouselCard(i);}break;}}},handleErrorForProperty:function(i,p,j){i.firePropertyChange({context:i.getContext(j?j:"/"),path:p,value:i.getProperty(j?(j+"/"+p):p),reason:b.Change});},handleErrorHandling:function(j,p,n){var q=j.getProperty(n);j.firePropertyChange({context:j.getContext(n),path:n+","+p,value:j.getProperty(n),reason:b.Change});for(var i=0;i<q.length;i++){var r=n+"/"+i;j.firePropertyChange({context:j.getContext(r),path:p,value:j.getProperty(r+"/"+p),reason:b.Change});}},setEnablePropertyForResetAndSaveButton:function(E){s.enableResetButton(E);s.enableSaveButton(E);},getValueInRemString:function(v){return v+"rem";},_getSelectedItemIndex:function(i){return i.getProperty("/selectedItemIndex");},_getLastItemIndex:function(i){return this._getStaticContentArray(i).length-1;},_getStaticContentArray:function(i){return i.getProperty("/staticContent");},_setStaticContentArray:function(i,j){i.setProperty("/staticContent",j);},_setSelectedItemAndScrollToElement:function(i,H){var v=this.getView(),j=v.byId("sapOvpStaticLinkListLineItem"),n=v.byId("scrollContainer"),p=v.getModel();this.handleErrorHandling(p,"title","/staticContent");this.handleErrorHandling(p,"targetUri","/staticContent");var q=j.getItems()[i];if(H){this._oList=j;this._oItem=q;this._oScrollContainer=n;var r={onAfterRendering:function(E){this._oList.removeEventDelegate(this._oDelegateOnAfter);this._oScrollContainer.scrollToElement(this._oItem);delete this._oDelegateOnAfter;delete this._oList;delete this._oScrollContainer;delete this._oItem;}};this._oDelegateOnAfter=r;j.addEventDelegate(r,this);}else{n.scrollToElement(q);}j.setSelectedItem(q);j.fireSelectionChange();},_arrangeStaticContent:function(i,j,t){var n=this._getStaticContentArray(i);n.splice(t,0,n.splice(j,1)[0]);this._setStaticContentArray(i,n);this._setSelectedItemAndScrollToElement(t);},getIndexFromIdForStaticLinkList:function(i){var j=i.split("-");return j[j.length-1];},_getImageData:function(){var i=[];i.push({"Name":"AW.png","Image":L.formUrl(this.getView().getModel().getProperty("/baseUrl"),"img/AW.png")});return i;},_getIconData:function(j){var n=I.getIconNames(),p=[];if(j){var N=j.split("://")[1],q=n.indexOf(N);n.splice(q,1);p.push({"Name":N,"Icon":I.getIconURI(N)});}for(var i=0;i<n.length;i++){p.push({"Name":n[i],"Icon":I.getIconURI(n[i])});}return p;},_getLinkListItemId:function(i,j){return i.getProperty("/staticContent/"+j+"/index");},_makeLinkListItemId:function(i){return"linkListItem--"+i;},_makeLinkListItemIndex:function(i){return"Index--"+i;},getIconAndImageDataModel:function(i){var j=this._getIconData(i),n=this._getImageData();return new J({"Icons":j,"Images":n,"NoOfIcons":j.length,"NoOfImages":n.length});},destroyTemplatesAndObjects:function(){var v=this.getView();var t=v.byId("tableFilterImage");if(t){t.destroy();}var T=v.byId("tableFilter");if(T){T.destroy();}var i=v.byId("tableFilterLinks");if(i){i.destroy();}delete this._oEvent;delete this._iCurrentRow;delete this._oModel;delete this._oVisibilityModel;delete this._oIconsDialogContentView;delete this._oLinksDialogContentView;delete this._oLineItemDialogContentView;delete this._oKPIItemDialogContentView;},onExternalUrlChange:function(E){this.setEnablePropertyForResetAndSaveButton(true);},onLinkSourceChange:function(E){var i=E.getSource(),j=i.getModel(),v=i.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(i.getId()),p=E.getParameter("selectedIndex"),q=v.getProperty("/staticLink"),r=v.getProperty("/links"),t=this._getLinkListItemId(j,parseInt(n,10));if(p===0){q[t]=false;r[t]=true;j.setProperty("/staticContent/"+n+"/targetUri",undefined);}else{q[t]=true;r[t]=false;j.setProperty("/staticContent/"+n+"/semanticObject",undefined);j.setProperty("/staticContent/"+n+"/action",undefined);j.setProperty("/staticContent/"+n+"/targetUri","");}v.setProperty("/staticLink",q);v.setProperty("/links",r);v.refresh(true);j.refresh(true);this.handleErrorForProperty(j,"targetUri","/staticContent/"+n);this.setEnablePropertyForResetAndSaveButton(true);},onRemoveVisualPress:function(E){var i=E.getSource(),j=i.getModel(),v=i.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(i.getId()),p=this._getLinkListItemId(j,parseInt(n,10)),r=v.getProperty("/removeVisual");r[p]=false;v.setProperty("/removeVisual",r);v.refresh(true);j.setProperty("/staticContent/"+n+"/imageUri",undefined);j.refresh(true);this.updateCard(E,"sapOvpSettingsStaticLinkListRemoveVisual");},createValueHelpDialogForInternalUrl:function(E){var i=E.getSource(),j=i.getModel(),n=i.getModel("staticCardProperties"),v=i.getModel("visibility"),p=this.getIndexFromIdForStaticLinkList(i.getId());this.attachBrowserHeightChangeHandler();this._oEvent=Object.assign({},E);this._iCurrentRow=p;this._oModel=j;this._oVisibilityModel=v;var q=new B("linksCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.linksDialog=new D({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_APPLICATION_DIALOG"),buttons:[q]}).addStyleClass("sapOvpSettingsDialogBox");n.setProperty("/densityStyle",this.getDensityStyle());n.setProperty("/NoOfLinks",n.getProperty("/links").length);var r=new sap.ui.core.mvc.XMLView("linksDialogContent",{viewName:"sap.ovp.cards.rta.SelectLinks",type:d.XML,preprocessors:{xml:{bindingContexts:{tableRows:n.createBindingContext("/")},models:{tableRows:n}}}});r.setModel(n);r.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.linksDialog.addContent(r);r.loaded().then(function(t){this._oLinksDialogContentView=t;t.getController().updateLinkPath=function(u){var w=u.slice(1).split(/-(.+)/),x=w[0],A=w[1];this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/semanticObject",x);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/action",A);this._oModel.refresh(true);this.setEnablePropertyForResetAndSaveButton(true);this.cleanAndCloseDialog(q);}.bind(this);q.attachPress(function(){this.cleanAndCloseDialog(q);}.bind(this));this.linksDialog.open();setTimeout(function(){this.browserHeightChange();}.bind(this),0);}.bind(this));},onChangeVisualPress:function(E){var i=E.getSource(),j=i.getModel(),v=i.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(i.getId()),p=j.getProperty("/staticContent/"+n+"/imageUri"),N=L.isImageUrlStaticData(p);this.attachBrowserHeightChangeHandler();this._oEvent=Object.assign({},E);this._iCurrentRow=n;this._oModel=j;this._oVisibilityModel=v;var q=new B("iconsCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.iconsDialog=new D({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_SELECT_VISUAL_DIALOG"),buttons:[q]}).addStyleClass("sapOvpSettingsDialogBox");var r=(N)?this.getIconAndImageDataModel():this.getIconAndImageDataModel(p);r.setProperty("/densityStyle",this.getDensityStyle());var t=new sap.ui.core.mvc.XMLView("iconsDialogContent",{viewName:"sap.ovp.cards.rta.SelectIcons",type:d.XML,preprocessors:{xml:{bindingContexts:{tableRows:r.createBindingContext("/")},models:{tableRows:r}}}});r.setProperty("/tableName","IconTable");t.setModel(r);t.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.iconsDialog.addContent(t);t.loaded().then(function(u){this._oIconsDialogContentView=u;u.getController().updateIconPath=function(U){var w=this._getLinkListItemId(this._oModel,parseInt(this._iCurrentRow,10)),R=this._oVisibilityModel.getProperty("/removeVisual");R[w]=true;this._oVisibilityModel.setProperty("/removeVisual",R);this._oVisibilityModel.refresh(true);this._oModel.setProperty("/staticContent/"+this._iCurrentRow+"/imageUri",U);this._oModel.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListChangeVisual");this.cleanAndCloseDialog(q);}.bind(this);q.attachPress(function(){this.cleanAndCloseDialog(q);}.bind(this));this.iconsDialog.open();setTimeout(function(){this.browserHeightChange();}.bind(this),0);}.bind(this));},getDensityStyle:function(){if(!f.support.touch){return"compact";}else{return"cozy";}},cleanAndCloseDialog:function(i){if(this._oIconsDialogContentView){this._oIconsDialogContentView.destroy();}if(this._oLinksDialogContentView){this._oLinksDialogContentView.destroy();}if(this._oLineItemDialogContentView){this._oLineItemDialogContentView.destroy();}if(this._oKPIItemDialogContentView){this._oKPIItemDialogContentView.destroy();}this.destroyTemplatesAndObjects();if(this.iconsDialog){this.iconsDialog.close();}if(this.linksDialog){this.linksDialog.close();}if(this.lineItemDialog){this.lineItemDialog.close();}if(this.KPIItemDialog){this.KPIItemDialog.close();}i.destroy();this.detachBrowserHeightChangeHandler();},attachBrowserHeightChangeHandler:function(){f.resize.attachHandler(this.browserHeightChange,this);},detachBrowserHeightChangeHandler:function(){f.resize.detachHandler(this.browserHeightChange,this);},browserHeightChange:function(i){var j,n,p;if(this.iconsDialog&&this._oIconsDialogContentView){j=this.iconsDialog;n=this._oIconsDialogContentView;p="iconsScrollContainer";}else if(this.linksDialog&&this._oLinksDialogContentView){j=this.linksDialog;n=this._oLinksDialogContentView;p="linksScrollContainer";}else if(this.lineItemDialog&&this._oLineItemDialogContentView){j=this.lineItemDialog;n=this._oLineItemDialogContentView;p="lineItemScrollContainer";}else if(this.KPIItemDialog&&this._oKPIItemDialogContentView){j=this.KPIItemDialog;n=this._oKPIItemDialogContentView;p="KPIItemScrollContainer";}if(j&&n&&p){var q=j.getDomRef(),r=(i?(i.height*93)/100:s.dialogBox.getDomRef().getBoundingClientRect().height),t=q.getBoundingClientRect().height,H=Math.max(r,t)-(e.getPixelPerRem()*9),u=n.byId(p);u.setHeight(H+"px");}},handleMessagePopoverPress:function(E){s.oMessagePopOver.openBy(E.getSource());},onShowMorePress:function(E){var i=E.getSource(),j=i.getModel(),v=i.getModel("visibility"),n=this.getIndexFromIdForStaticLinkList(i.getId()),p=this._getLinkListItemId(j,parseInt(n,10)),q=v.getProperty("/showMore/"+p);if(q){v.setProperty("/showMore/"+p,false);}else{v.setProperty("/showMore/"+p,true);}v.refresh(true);},onPressDelete:function(E){this._oEvent=Object.assign({},E);M.confirm(this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_INFORMATION_MESSAGE_INFO"),{actions:[M.Action.OK,M.Action.CANCEL],icon:M.Icon.INFORMATION,title:this.oOvpResourceBundle.getText("OVP_KEYUSER_MESSAGE_BOX_TITLE_INFO"),initialFocus:M.Action.CANCEL,onClose:function(A){if(A==="OK"){var i=this._oEvent.getSource(),v=i.getModel("visibility"),j=i.getModel(),n=this._getStaticContentArray(j),p=this._getSelectedItemIndex(j),q=this._getLinkListItemId(j,p),r=v.getProperty("/staticLink"),t=v.getProperty("/links"),R=v.getProperty("/removeVisual"),u=v.getProperty("/showMore");delete r[q];delete t[q];delete R[q];delete u[q];v.setProperty("/staticLink",r);v.setProperty("/links",t);v.setProperty("/removeVisual",R);v.setProperty("/showMore",u);n.splice(p,1);this._setStaticContentArray(j,n);j.refresh(true);if(n.length>0){this._setSelectedItemAndScrollToElement(Math.min(parseInt(p,10),n.length-1),true);}if(n.length<=1){v.setProperty("/delete",false);}v.refresh(true);this.updateCard(this._oEvent,"sapOvpSettingsStaticLinkListDelete");}delete this._oEvent;}.bind(this)});},onPressAdd:function(E){var i=E.getSource(),v=i.getModel("visibility"),j=i.getModel(),n=this._getStaticContentArray(j),p=j.getProperty("/lineItemIdCounter"),q=this._makeLinkListItemId(p+1),r=this._makeLinkListItemIndex(p+1),t=v.getProperty("/staticLink"),u=v.getProperty("/links"),R=v.getProperty("/removeVisual"),w=v.getProperty("/showMore");j.setProperty("/lineItemIdCounter",p+1);n.unshift({"id":q,"index":r,"title":"Default Title","subTitle":"Default SubTitle","imageUri":"","imageAltText":"","targetUri":"","openInNewWindow":""});t[r]=true;u[r]=false;R[r]=false;w[r]=false;v.setProperty("/staticLink",t);v.setProperty("/links",u);v.setProperty("/removeVisual",R);v.setProperty("/showMore",w);v.refresh(true);this._setStaticContentArray(j,n);j.refresh(true);this._setSelectedItemAndScrollToElement(0);this.updateCard(E,"sapOvpSettingsStaticLinkListAdd");},onPressMoveToTheTop:function(E){var i=E.getSource().getModel();this._arrangeStaticContent(i,this._getSelectedItemIndex(i),0);this.updateCard(E,"sapOvpSettingsStaticLinkListSort");},onPressMoveUp:function(E){var i=E.getSource().getModel(),j=this._getSelectedItemIndex(i);this._arrangeStaticContent(i,j,j-1);this.updateCard(E,"sapOvpSettingsStaticLinkListSort");},onPressMoveDown:function(E){var i=E.getSource().getModel(),j=this._getSelectedItemIndex(i);this._arrangeStaticContent(i,j,j+1);this.updateCard(E,"sapOvpSettingsStaticLinkListSort");},onPressMoveToTheBottom:function(E){var i=E.getSource().getModel(),j=this._getSelectedItemIndex(i),n=this._getLastItemIndex(i);this._arrangeStaticContent(i,j,n);this.updateCard(E,"sapOvpSettingsStaticLinkListSort");},onResetButton:function(){this._oCardManifestSettings=m({},this._oOriginalCardManifestSettings);var i=this.getView().getModel();i.setProperty("/",this._oCardManifestSettings);s.setVisibilityForFormElements(this._oCardManifestSettings);this.getView().getModel("visibility").refresh();if(this._oCardManifestSettings.layoutDetail==="resizable"){if(this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(false);}else if(!this._oCardManifestSettings.stopResizing){this.getView().byId("sapOvpSettingsStopResize").setState(true);}}s.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);if(!this._oCardManifestSettings.addNewCard){this._fCardWithRefresh();}},handleValueStateofComboBox:function(E,p,j,n){var q=s.oMessagePopOver.getModel(),r=q.getProperty("/Messages"),t=q.getProperty("/Counter/All"),u=q.getProperty("/Counter/Error");this.bError=true;var v=true;if(n){for(var i=0;i<r.length;i++){if(r[i].fieldName===p){v=false;}}if(v){r.push({"type":"Error","title":E,"fieldName":p,"counter":u+1});t++;u++;this.getView().byId(j).setValueState("Error");}}else{this.bError=false;for(var i=0;i<r.length;i++){if(r[i].fieldName===p){r.splice(i,1);t--;u--;i--;}}this.getView().byId(j).setValueState("None");}if(!r.length){this.setEnablePropertyForResetAndSaveButton(true);}q.setProperty("/Messages",r);q.setProperty("/Counter/All",t);q.setProperty("/Counter/Error",u);q.refresh(true);},validateComboBox:function(i,p,K){var E;if((p==="KPICheckBox"&&K&&i.entitySet)||(p==="entitySet"&&i.addKPIHeaderCheckBox)){if(i.title===""){E=g.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(E,h.Annotations.title,"sapOvpCardTitle",true);}else{this.handleValueStateofComboBox("",h.Annotations.title,"sapOvpCardTitle",false);}if(i.subTitle===""){E=g.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE");this.handleValueStateofComboBox(E,h.Annotations.subTitle,"sapOvpCardSubTitle",true);}else{this.handleValueStateofComboBox("",h.Annotations.subTitle,"sapOvpCardSubTitle",false);}if(i.valueSelectionInfo===""){E=g.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO");this.handleValueStateofComboBox(E,h.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",true);}else{this.handleValueStateofComboBox("",h.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false);}if(i.dataPointAnnotationPath===""){E=g.getText("OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT");this.handleValueStateofComboBox(E,h.Annotations.dataPoint,"sapOvpDataPoint",true);}else{this.handleValueStateofComboBox("",h.Annotations.dataPoint,"sapOvpDataPoint",false);}}else if(p==="entitySet"){E=g.getText("OVP_KEYUSER_INPUT_ERROR");this.handleValueStateofComboBox(E,h.Annotations.title,"sapOvpCardTitle",true);if(i.template==="sap.ovp.cards.linklist"||i.template==="sap.ovp.cards.v4.linklist"){E=g.getText("OVP_KEYUSER_LISTFLAVOR_ERROR");this.handleValueStateofComboBox(E,h.Annotations.listFlavor,"sapOVPLinkListFlavor",true);}}else if(p==="KPICheckBox"&&!K&&i.entitySet){this.handleValueStateofComboBox("",h.Annotations.subTitle,"sapOvpCardSubTitle",false);this.handleValueStateofComboBox("",h.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo",false);this.handleValueStateofComboBox("",h.Annotations.dataPoint,"sapOvpDataPoint",false);}else{if(p==="title"){this.onComboBoxSelection(i,p,"OVP_KEYUSER_INPUT_ERROR",h.Annotations.title,"sapOvpCardTitle");}if(p==="subTitle"){this.onComboBoxSelection(i,p,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SUBTITLE",h.Annotations.subTitle,"sapOvpCardSubTitle");}if(p==="valueSelectionInfo"){this.onComboBoxSelection(i,p,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_SELECTIONVALUEINFO",h.Annotations.valueSelectionInfo,"sapOvpValueSelectionInfo");}if(p==="dataPointAnnotationPath"){this.onComboBoxSelection(i,p,"OVP_KEYUSER_INPUT_ERROR_VALUE_STATE_DATAPOINT",h.Annotations.dataPoint,"sapOvpDataPoint");}if(p==="listFlavor"){this.onComboBoxSelection(i,p,"OVP_KEYUSER_LISTFLAVOR_ERROR",h.Annotations.listFlavor,"sapOVPLinkListFlavor");}}},onComboBoxSelection:function(i,p,t,j,n){var E;if(i[p]===""){E=g.getText(t);this.handleValueStateofComboBox(E,j,n,true);}else{this.handleValueStateofComboBox(E,j,n,false);}},onSaveButtonPress:function(){if(!this._oCardManifestSettings.addNewCard){if(s.bError||this.bError){s.oMessagePopOverButton.firePress();}else{this.createAndSubmitChange.bind(this)();}}else{this.createAndSubmitChange.bind(this)();}},onResizingChange:function(E){var i=E.getParameter("state");this._oCardManifestSettings.stopResizing=!i;this.updateCard(E);},onNumberOfRowsChanged:function(E){var r=+this._oCardManifestSettings.defaultSpan.rows;this._oCardManifestSettings.defaultSpan.rows=r;this._oCardManifestSettings.defaultSpan.showOnlyHeader=(r===0);this._oCardManifestSettings.cardLayout.showOnlyHeader=(r===0);var i=["sap.ovp.cards.list","sap.ovp.cards.table"];if(i.indexOf(this._oCardManifestSettings.template)!==-1){this._oCardManifestSettings.cardLayout.noOfItems=r;}else{this._oCardManifestSettings.cardLayout.rowSpan=r;}this.updateCard(E);},onNumberOfColumnsChanged:function(E){this._oCardManifestSettings.defaultSpan.cols=+this._oCardManifestSettings.defaultSpan.cols;this.updateCard(E);},setBusy:function(i){if(i){this.getView().addStyleClass("dialogContainerOverlay");var j=this.getView().byId("dialogCard");if(j.getVisible()&&j.getComponentInstance()){j.getComponentInstance().getRootControl().setBusy(i);}}else{this.getView().removeStyleClass("dialogContainerOverlay");setTimeout(function(){var j=this.getView().byId("dialogCard");if(j.getVisible()&&j.getComponentInstance()){j.getComponentInstance().getRootControl().setBusy(i);}}.bind(this),2000);}},_fCardWithoutRefresh:function(E,u){var v=this.getView(),i=this._oCardManifestSettings,j=v.byId("dialogCard").getComponentInstance(),r=j.getRootControl(),n=r.getController(),p=n.getCardPropertiesModel(),q,t,w=false,x;if(i.tabs&&i.tabs.length){w=true;x=parseInt(i.selectedKey,10);}if(u.formElementId==="sapOvpSettingsLineItemTitle"||u.formElementId==="sapOvpSettingsLineItemSubTitle"){q=r.byId(u.cardElementId+"--"+v.getModel().getProperty("/lineItemId"));}else{q=r.byId(u.cardElementId);if(!q){this._fCardWithRefresh(E,u.cardElementId);}}switch(u.formElementId){case"sapOvpSettingsLineItemTitle":case"sapOvpSettingsLineItemSubTitle":case"sapOvpSettingsTitle":case"sapOvpSettingsValueSelectionInfo":if(q){q.setText(E.getSource().getValue());}break;case"sapOvpSettingsSubTitle":p.setProperty("/subTitle",E.getSource().getValue());n._setSubTitleWithUnitOfMeasure();break;case"sapOvpSettingsViewName":var y=i.viewName;t=v.getModel();q.getItems()[x-1].setText(y);i.tabs[x-1].value=y;if(i.defaultViewSelected===x){y=y+" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";}i.aViews[x].text=y;t.refresh();break;case"sapOvpDefaultViewSwitch":if(E.getSource().getState()){var z=i.defaultViewSelected;t=v.getModel();i.defaultViewSelected=x;i.aViews[z].text=i.tabs[z-1].value;i.aViews[x].text+=" ("+this.oOvpResourceBundle.getText("OVP_KEYUSER_LABEL_DEFAULT_VIEW")+")";t.refresh();this.defaultViewSwitch=E.getSource();this.defaultViewSwitch.setEnabled(false);}break;case"sapOvpSettingsIdentification":if(w){i.tabs[x-1][u.updateProperty]=i[u.updateProperty];}break;case"sapOvpSettingsKPIHeaderSwitch":var A=v.getModel("visibility"),G=A.getData();G.dataPoint=false;G.valueSelectionInfo=false;if(w){i.tabs.forEach(function(K){K.prevDataPointAnnotationPath=K.dataPointAnnotationPath;K.dataPointAnnotationPath=undefined;});}else{var H=i.dataPointAnnotationPath;if(H){i.prevDataPointAnnotationPath=H;}i.dataPointAnnotationPath=undefined;}A.refresh(true);q.destroy();break;default:break;}},_fCardWithRefresh:function(E,u){var p,i,v,j,n,q=this._oCardManifestSettings,r=this.getView(),t=r.byId("dialogCard"),w=(!t.getComponentInstance())?undefined:t.getComponentInstance().getComponentData(),x=(!w)?"Dialog":w.cardId,y=(!w)?undefined:w.manifest.cards[x].model,z={cards:{}},A=false,G;if(q.tabs&&q.tabs.length){A=true;G=parseInt(q.selectedKey,10);}switch(u){case"subTitleSwitch":v=this.getView();j=v.getModel("visibility");if(E.getSource().getState()){if(A){i=q.defaultViewSelected;q.tabs.forEach(function(W){p=W.prevDynamicSubtitleAnnotationPath;if(p){W.dynamicSubtitleAnnotationPath=p;}else{W.dynamicSubtitleAnnotationPath=q.dynamicSubTitle[0].value;}});q.dynamicSubtitleAnnotationPath=q.tabs[i-1].dynamicSubtitleAnnotationPath;}else{p=q.prevDynamicSubtitleAnnotationPath;if(p){q.dynamicSubtitleAnnotationPath=p;}else{q.dynamicSubtitleAnnotationPath=q.dynamicSubTitle[0].value;}}if(w.template!=='sap.ovp.cards.linklist'&&w.template!=='sap.ovp.cards.v4.linklist'){r.byId("sapOvpSettingsDynamicSubTitle").setSelectedKey(q.dynamicSubtitleAnnotationPath);}}else{if(A){q.tabs.forEach(function(W){W.prevDynamicSubtitleAnnotationPath=W.dynamicSubtitleAnnotationPath;W.dynamicSubtitleAnnotationPath=undefined;});q.dynamicSubtitleAnnotationPath=undefined;}else{var H=q.dynamicSubtitleAnnotationPath;if(H){q.prevDynamicSubtitleAnnotationPath=H;}q.dynamicSubtitleAnnotationPath=undefined;}}j.setProperty("/subTitle",s.getVisibilityOfElement(q,"subTitle",A));j.setProperty("/dynamicSubTitle",s.getVisibilityOfElement(q,"dynamicSubTitle",A)&&!!q["dynamicSubTitle"]&&!!q["dynamicSubTitle"].length);j.refresh(true);break;case"kpiHeader":v=this.getView();j=v.getModel("visibility");n=j.getData();n.valueSelectionInfo=true;n.dataPoint=true;if(q.tabs&&q.tabs.length){n.dataPoint=s.getVisibilityOfElement(q,"dataPoint",true);}if(!q.valueSelectionInfo){q.valueSelectionInfo=" ";}if(A){i=q.defaultViewSelected;q.tabs.forEach(function(W){p=W.prevDataPointAnnotationPath;if(p){W.dataPointAnnotationPath=p;}else{W.dataPointAnnotationPath=q.dataPoint[0].value;}});q.dataPointAnnotationPath=q.tabs[i-1].dataPointAnnotationPath;}else{p=q.prevDataPointAnnotationPath;if(p){q.dataPointAnnotationPath=p;}else{q.dataPointAnnotationPath=q.dataPoint[0].value;}}j.refresh(true);break;case"listType":q[u]=(E.getSource().getState())?"extended":"condensed";break;case"listFlavor":q[u]=(E.getSource().getState())?"bar":"";break;case"entitySet":if(A){q.tabs[G-1][u]=q[u];S.resetTabFields.forEach(function(W){delete q.tabs[G-1][W];delete q[W];});var K=q.metaModel,N=K.getODataEntitySet(q.tabs[G-1].entitySet),Q=q.defaultViewSelected;q.entityType=K.getODataEntityType(N.entityType);this.resetSupportingObjectsOnEntitySetChange(q,Q);}break;case"kpiAnnotationPath":if(A){q.tabs[G-1][u]=q[u];}var R=r.byId("sapOvpSettingsKPIAnnotation").getSelectedKey();if(q.entityType[R]){this.setVariant(q,R);}s.addKPINavApplicationName(q);this.getView().getModel().refresh(true);break;case"selectionPresentationAnnotationPath":if(A){q.tabs[G-1][u]=q[u];}var R=r.byId("sapOvpSettingsFilterAndPresentedBy").getSelectedKey();if(q.entityType[R]){this.setVariant(q,R);}this.getView().getModel().refresh(true);break;case"listFlavorForLinkList":case"annotationPath":case"chartAnnotationPath":case"presentationAnnotationPath":case"selectionAnnotationPath":case"dynamicSubtitleAnnotationPath":case"dataPointAnnotationPath":if(A){q.tabs[G-1][u]=q[u];}break;case"noOfRows":case"ovpHeaderTitle":case"add":case"removeVisual":case"changeVisual":case"sort":case"delete":break;default:break;}z.cards[x]={settings:q};if(s.bNewKPICardFlag){z.cards[x].template=q.template;}else{z.cards[x].template=w.template;}if(s.bNewKPICardFlag){if(y&&r.getModel(y)){r.getModel(y).destroy();r.setModel(null,y);}var T=this._oCardManifestSettings.selectedKPI,U=new sap.ui.model.odata.v2.ODataModel(T.ODataURI,{'annotationURI':T.ModelURI,'defaultCountMode':sap.ui.model.odata.CountMode.None});y=e._getLayerNamespace()+".kpi_card_model_"+s.getTrimmedDataURIName(T.ODataURI);r.setModel(U,y);}if(!!y){z.cards[x].model=y;}if(s.bNewKPICardFlag){U.getMetaModel().loaded().then(function(){var W=O.createCardComponent(r,z,"dialogCard");W.then(function(){r.setBusy(false);this.setBusy(false);}.bind(this)).catch(function(){s.setErrorMessage(z.cards[x].settings,"OVP_KEYUSER_ANNOTATION_FAILURE");s.createErrorCard(r,z,x);});}.bind(this),function(W){l.error(W);this.setBusy(false);r.setBusy(false);}.bind(this));U.attachMetadataFailed(function(){s.setErrorMessage(z.cards[x].settings,"OVP_KEYUSER_METADATA_FAILURE");s.createErrorCard(r,z,x);});}else{this.createCard(r,z);}},setVariant:function(i,j){var n=i.entityType[j];var p=n.SelectionVariant&&n.SelectionVariant.Path;if(/^@/.test(p)){p=p.slice(1);}i.selectionAnnotationPath=p;var q;if(j.indexOf(".KPI")!==-1){q=n.Detail&&n.Detail.DefaultPresentationVariant&&n.Detail.DefaultPresentationVariant.Path;}else if(j.indexOf(".SelectionPresentationVariant")!==-1){q=n.PresentationVariant&&n.PresentationVariant.Path;}if(/^@/.test(q)){q=q.slice(1);}i.presentationAnnotationPath=q;var v=i.entityType[i.presentationAnnotationPath]&&i.entityType[i.presentationAnnotationPath].Visualizations;for(var r=0;r<v.length;r++){var t=v[r].AnnotationPath;if(t){if(/^@/.test(t)){t=t.slice(1);}if(/.Chart/.test(t)){i.chartAnnotationPath=t;break;}}}},createCard:function(i,j){this.setBusy(true);var p=O.createCardComponent(i,j,"dialogCard");p.then(function(){this.setBusy(false);var n=this.getView().byId("sapOvpStaticLinkListLineItem");if(n){var q=n.getSelectedItem();if(q){var r=q.getId(),t=this.getIndexFromIdForStaticLinkList(r);this.setCurrentActivePageForCarouselCard(t);}}}.bind(this));p.catch(function(){this.setBusy(false);}.bind(this));},updateCard:function(E,n){var p=this._oCardManifestSettings,q=this.getView().byId("dialogCard");this.setEnablePropertyForResetAndSaveButton(true);if(q.getVisible()){if(p.tabs&&p.tabs.length){var r=parseInt(p.selectedKey,10);p.isViewResetEnabled=true;p.aViews[r].isViewResetEnabled=true;}var t=E.getSource(),u=(n)?n:t.getId(),v=false;if(u.indexOf("sapOvpStaticLinkListLineItem")!==-1){var w=t.getModel(),x=w.getData().staticContent,y=this.getIndexFromIdForStaticLinkList(u);this.setCurrentActivePageForCarouselCard(y);w.setProperty("/lineItemId",x[y].id);if(u.indexOf("sapOvpSettingsLineItemTitle")!==-1){u="sapOvpSettingsLineItemTitle";}else if(u.indexOf("sapOvpSettingsLineItemSubTitle")!==-1){u="sapOvpSettingsLineItemSubTitle";}}for(var i=0;i<this._aRefreshNotRequired.length;i++){if(u.indexOf(this._aRefreshNotRequired[i].formElementId)>-1){if(this._aRefreshNotRequired[i].isKpiSwitch&&E.getSource().getState()){break;}this._fCardWithoutRefresh(E,this._aRefreshNotRequired[i]);v=true;break;}}if(!v){for(var j=0;j<this._aRefreshRequired.length;j++){if(u.indexOf(this._aRefreshRequired[j].formElementId)>-1){this.setBusy(true);this._fCardWithRefresh(E,this._aRefreshRequired[j].updateProperty);break;}}}var z=e._getLayer();if(z===h.Layers.vendor){for(var A in this.oMandatoryPropertiesKey){if(u.indexOf(this.oMandatoryPropertiesKey[A])>-1){var R=false,T=A+"Key",G=A+"Property";p[A]=E.getParameter("value");p[G]=E.getParameter("value");for(var A in p.ai18nProperties){if(p.ai18nProperties[A].value===E.getParameter("value")){p[T]=p.ai18nProperties[A].key;R=true;break;}}if(!R){p[T]="";}break;}}}}},onExit:function(){s.oSaveButton.detachPress(this.onSaveButtonPress,this);s.oResetButton.detachPress(this.onResetButton,this);s.oMessagePopOverButton.detachPress(this.handleMessagePopoverPress,this);},getListItems:function(){var i=[],j=this._oCardManifestSettings,n=this.getView(),p=n.byId("dialogCard"),q=p.getComponentInstance().getComponentData();var r=q.model.getMetaModel();var t=e.isODataV4(q.model);var u=t?"/"+j.entityType.$Type+"/@"+j.annotationPath:j.entityType.$path+"/"+j.annotationPath;var v=r.getContext(r.resolve(u,this.oView.getBindingContext()));var w=2,x=1,y=0;if(j.listFlavor==="bar"){w=1;x=2;}if(j.listType&&j.listType.toLowerCase()==="extended"){w=6;x=3;y=3;if(j.listFlavor==="bar"){w=5;}}else if(j.contentFragment==="sap.ovp.cards.table.Table"||j.contentFragment==="sap.ovp.cards.table.v4.Table"){w=3;x=1;y=1;}j.lineItem.forEach(function(z){var A=t?V.getSortedDataPoints(v,z.fields):c.getSortedDataPoints(v,z.fields);var E=t?V.getSortedDataFields(v,z.fields):c.getSortedDataFields(v,z.fields);var G=[],H=[],K=s.getQualifier(z.value);A.forEach(function(T){if(T.Title){var U=t?T.Title:T.Title.String;H.push(s.checkForEmptyString(U,""));}else{H.push(g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[K]));}});E.forEach(function(T){if(T.Label){var U=t?T.Label:T.Label.String;G.push(U);}else{G.push(g.getText("OVP_KEYUSER_LABEL_DEFAULT_LABEL_WITH_QUALIFIER",[K]));}});var N=Math.min(H.length,x),Q=Math.min(y,N),R=G.slice(0,w-Q).concat(H.slice(0,N));R.map(function(T){return T.charAt(0).toUpperCase()+T.substr(1);});i.push({Value:z.value,Label:z.name,VisibleFields:R.toString()});});return i;},onSearch:function(E){var v=this.getView(),i=v.getModel(),j;this._filterTable(E,["GroupTitle","KPITitle","GroupID","KPIID","KPIQualifier"],"sapOvpKPITable");j=v.byId("sapOvpKPITable").getBinding("items").getLength();i.setProperty("/NoOfKPIItem",j);i.refresh(true);},_filterTable:function(E,j,n){var q=E.getParameter("query"),G=null,p=[];for(var i=0;i<j.length;i++){p.push(new F(j[i],a.Contains,q));}if(q){G=new F(p,false);}this.getView().byId(n).getBinding("items").filter(G,"Application");},onItemPress:function(E){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);var i=E.getSource(),j=i.getBindingContext(),K=j.getObject();this.getView().byId("sapOvpSettingsTitle").setValue(K.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(K.KPITitle);this.onKPIUpdate(K);this.updateCard(E,"sapOvpSettingsNewKPICard");},onKPIUpdate:function(K){this._oCardManifestSettings.entitySet=K.ODataEntityset;this._oCardManifestSettings.kpiAnnotationPath="com.sap.vocabularies.UI.v1.KPI#"+K.KPIQualifier;this._oCardManifestSettings.title=K.GroupTitle;this._oCardManifestSettings.subTitle=K.KPITitle;this._oCardManifestSettings.template="sap.ovp.cards.charts.analytical";this._oCardManifestSettings.selectedKPI=K;},onSeePress:function(){this.attachBrowserHeightChangeHandler();var i=new B("KPIItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.KPIItemDialog=new D({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_KPI_DIALOG_TITLE"),buttons:[i]}).addStyleClass("sapOvpSettingsDialogBox");var r=new J({"KPIItem":this._oCardManifestSettings.KPIData});r.setSizeLimit(this._oCardManifestSettings.KPIData.length);r.setProperty("/densityStyle",this.getDensityStyle());r.setProperty("/NoOfKPIItem",r.getProperty("/KPIItem").length);var K=new sap.ui.core.mvc.XMLView("KPIItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectKPI",type:d.XML,preprocessors:{xml:{bindingContexts:{tableRows:r.createBindingContext("/")},models:{tableRows:r}}}});K.setModel(r);K.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.KPIItemDialog.addContent(K);K.loaded().then(function(v){this._oKPIItemDialogContentView=v;v.getController().updateKPIItemPath=function(j,E){this.getView().setBusy(true);this.getView().setBusyIndicatorDelay(0);this.getView().byId("sapOvpSettingsTitle").setValue(j.GroupTitle);this.getView().byId("sapOvpSettingsSubTitle").setValue(j.KPITitle);this.onKPIUpdate(j);this.updateCard(E,"sapOvpSettingsNewKPICard");this.cleanAndCloseDialog(i);}.bind(this);i.attachPress(function(){this.cleanAndCloseDialog(i);}.bind(this));this.KPIItemDialog.open();setTimeout(function(){this.browserHeightChange();}.bind(this),0);}.bind(this));},openLineItemValueHelpDialog:function(E){this.attachBrowserHeightChangeHandler();this._oEvent=Object.assign({},E);var i=new B("lineItemCancelBtn",{text:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("cancelBtn")});this.lineItemDialog=new D({title:this.oOvpResourceBundle&&this.oOvpResourceBundle.getText("OVP_KEYUSER_LINEITEM_ANNO"),buttons:[i]}).addStyleClass("sapOvpSettingsDialogBox");var r=new J({"lineItem":this.getListItems()});r.setProperty("/densityStyle",this.getDensityStyle());r.setProperty("/NoOfLineItem",r.getProperty("/lineItem").length);var j=new sap.ui.core.mvc.XMLView("lineItemDialogContent",{viewName:"sap.ovp.cards.rta.SelectLineItem",type:d.XML,preprocessors:{xml:{bindingContexts:{tableRows:r.createBindingContext("/")},models:{tableRows:r}}}});j.setModel(r);j.setModel(this.getView().getModel("ovpResourceModel"),"ovpResourceModel");this.lineItemDialog.addContent(j);j.loaded().then(function(v){this._oLineItemDialogContentView=v;v.getController().updateLineItemPath=function(n){var p=n.Value,q=this._oCardManifestSettings,t;if(q.tabs&&q.tabs.length){t=parseInt(q.selectedKey,10);}q.lineItemQualifier=s.getQualifier(p);q.annotationPath=p;if(q.tabs&&q.tabs.length){q.tabs[t-1].annotationPath=q.annotationPath;}this.getView().byId("sapOvpSettingsLineItem").setValue(n.Label);this._fCardWithRefresh(this._oEvent,"annotationPath");this.setEnablePropertyForResetAndSaveButton(true);if(q.tabs&&q.tabs.length){q.isViewResetEnabled=true;q.aViews[t].isViewResetEnabled=true;}this.cleanAndCloseDialog(i);}.bind(this);i.attachPress(function(){this.cleanAndCloseDialog(i);}.bind(this));this.lineItemDialog.open();setTimeout(function(){this.browserHeightChange();}.bind(this),0);}.bind(this));},createAndSubmitChange:function(){var p;if(s.bNewStaticLinkListCardFlag){p=P.getPayLoadForNewStaticLinkListCard.bind(this)(s);}else if(s.bNewKPICardFlag){p=P.getPayLoadForNewKPICard.bind(this)(s);}else if(s.bAddNewCardFlag){p=P.getPayLoadForNewCard.bind(this)(s);}else{p=P.getPayLoadForEditCard.bind(this)(s);}this.settingsResolve(p);s.dialogBox.close();},setMandatoryFieldState:function(v,i){i.setProperty("/dataPoint",v);i.setProperty("/valueSelectionInfo",v);i.setProperty("/requiredSubTitle",v);var j=i.getData(),n=false;for(var p=0;p<s.aVisiblePropertiesForAnnotation.length;p++){if(j[s.aVisiblePropertiesForAnnotation[p].sProperty]){n=true;break;}}i.setProperty("/setAnnotationCardProperties",n);},EnableKPIHeaderFields:function(i){var v=this.getView().getModel("visibility");if(!i){this.setMandatoryFieldState(false,v);}else{this.setMandatoryFieldState(true,v);}},onCardTypeSelected:function(E){var i=E.getParameters().id;this._oCardManifestSettings.template=E.getSource().getSelectedKey();this.getView().byId("sapOVPAddKpiCheckBoxID").setSelected(false);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this._oCardManifestSettings.addKPIHeaderCheckBox=false;this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.resetPropertiesVisibility(i,this._oCardManifestSettings);},onDatasourceComboboxChanged:function(E){var j=E.getParameters().id;this._oCardManifestSettings.model=E.getParameters().value;this._oCardManifestSettings.allEntitySet="";if(!s.newDataSource){var n=this._oCardManifestSettings.datasources;for(var i=0;i<n.length;i++){if(n[i].Title===this._oCardManifestSettings.model){this._oCardManifestSettings.metaModel=n[i].oMetaModel;}}s.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(j,this._oCardManifestSettings);var p=g.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(p,"datasSourceExisting","sapOVPDataSourceExistingComboBox",true);}else{this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(j,this._oCardManifestSettings);}}else{var q=this._oCardManifestSettings.datasources.filter(function(r){return r.Title===this._oCardManifestSettings.model;}.bind(this));getMetaModelForNewDataSource(q,s.sApplicationId).then(function(r){if(r){s.newDataSourceModel=r.modelInformation;r.getODataEntityContainer=function(){return r.oEntityContainers;};r.getObject=function(t){return r.oSchema;};r.getODataEntityType=function(t){var u=r.oSchema[0].entityType.filter(function(v){var w=t.substr((r.oEntityContainers.namespace+".").length);return v.name===w;});return u[0];};this._oCardManifestSettings.metaModel=r;s.addSupportingObjects(this._oCardManifestSettings);if(this._oCardManifestSettings.allEntitySet.length===0){this._oCardManifestSettings.model="";this.resetPropertiesVisibility(j,this._oCardManifestSettings);var p=g.getText("OVP_KEYUSER_NO_RELEVANT_ANNOTATION");this.handleValueStateofComboBox(p,"datasSourceNew","sapOVPDataSourceNewInput",true);}else{this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(j,this._oCardManifestSettings);}}else{this._oCardManifestSettings.model="";this.resetPropertiesVisibility(j,this._oCardManifestSettings);var p=g.getText("OVP_KEYUSER_UNAVAILABLE_DATASOURCE");this.handleValueStateofComboBox(p,"datasSourceNew","sapOVPDataSourceNewInput",true);}}.bind(this));}},onEntitySetChanged:function(E,j){var n=this._oCardManifestSettings.metaModel.getObject('/dataServices/schema')[0].entityType;this.aVariantNames.forEach(function(v){if(this._oCardManifestSettings[v.sPath]){this._oCardManifestSettings[v.sPath]=[];}}.bind(this));for(var i in n){if(n[i].name===E){this._oCardManifestSettings.entityType=n[i];break;}}s.addSupportingObjects(this._oCardManifestSettings);this.getView().byId("sapOVPAddODataSelect").setSelected(false);this.resetPropertiesVisibility(j,this._oCardManifestSettings);},addStaticParameterRow:function(){var i=this.getView().getModel();var j=i.getProperty("/aAllStaticParameters");if(j&&j.length){j.push({key:"",value:""});}else{j=[];j.push({key:"",value:""});}i.setProperty("/aAllStaticParameters",j);},addActionRow:function(){var i=this.getView().getModel();var j=i.getProperty("/objectStreamCardsSettings/customActions");if(j&&j.length){j.push({text:"",press:"",position:""});}else{j=[];j.push({text:"",press:"",position:""});}i.setProperty("/objectStreamCardsSettings/customActions",j);},onParameterDelete:function(E){var i=this.getView().getModel();var j=i.getProperty("/aAllStaticParameters");var n=E.getSource().getBindingContext().getObject()&&E.getSource().getBindingContext().getObject()["key"];j=j.filter(function(p){return p["key"]!=n;});i.setProperty("/aAllStaticParameters",j);if(!k(this._oCardManifestSettings.staticParameters,this._oOriginalCardManifestSettings.staticParameters)){this.setEnablePropertyForResetAndSaveButton(true);}this.getView().getModel().refresh();},onActionDelete:function(E){var i=this.getView().getModel();var j=i.getProperty("/objectStreamCardsSettings/customActions");var n=E.getSource().getBindingContext().getObject()&&E.getSource().getBindingContext().getObject()["text"];j=j.filter(function(p){return p["text"]!=n;});i.setProperty("/objectStreamCardsSettings/customActions",j);if(!k(this._oCardManifestSettings.objectStreamCardsSettings,this._oOriginalCardManifestSettings.objectStreamCardsSettings)){this.setEnablePropertyForResetAndSaveButton(true);}},updateProperty:function(E){var j=E.getSource().getId();var n=false,p;if(this._oCardManifestSettings.tabs&&this._oCardManifestSettings.tabs.length){n=true;p=parseInt(this._oCardManifestSettings.selectedKey,10);this._oCardManifestSettings.isViewResetEnabled=true;this._oCardManifestSettings.aViews[p].isViewResetEnabled=true;}for(var i=0;i<this._updateManifestProperties.length;i++){if(j.indexOf(this._updateManifestProperties[i].formElementId)>-1){var q=this._updateManifestProperties[i].formElement;switch(q){case"entitySet":var r=E.getSource().getSelectedKey();if(!n){this._oCardManifestSettings["entitySet"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["entitySet"]=E.getParameter("value");}this.onEntitySetChanged(r,j);if(this._oCardManifestSettings["entitySet"].length!==0){this.validateComboBox(this._oCardManifestSettings,"entitySet");}break;case"identificationAnnotationPath":if(!n){this._oCardManifestSettings["identificationAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["identificationAnnotationPath"]=E.getParameter("value");}break;case"selectionPresentationAnnotationPath":if(!n){this._oCardManifestSettings["selectionPresentationAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["selectionPresentationAnnotationPath"]=E.getParameter("value");}break;case"selectionAnnotationPath":if(!n){this._oCardManifestSettings["selectionAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["selectionAnnotationPath"]=E.getParameter("value");}break;case"presentationAnnotationPath":if(!n){this._oCardManifestSettings["presentationAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["presentationAnnotationPath"]=E.getParameter("value");}break;case"annotationPath":if(!n){this._oCardManifestSettings["annotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["annotationPath"]=E.getParameter("value");}break;case"listType":this._oCardManifestSettings.listType=E.getSource().getSelectedKey();break;case"listFlavor":this._oCardManifestSettings.listFlavor=E.getSource().getSelectedKey();if(j.indexOf("sapOVPLinkListFlavor")!==-1){this.validateComboBox(this._oCardManifestSettings,"listFlavor");}break;case"KPICheckBox":this._oCardManifestSettings.addKPIHeaderCheckBox=E.getParameter("selected");this.EnableKPIHeaderFields(this._oCardManifestSettings.addKPIHeaderCheckBox);this.validateComboBox(this._oCardManifestSettings,"KPICheckBox",this._oCardManifestSettings.addKPIHeaderCheckBox);break;case"dataPointAnnotationPath":if(!n){this._oCardManifestSettings["dataPointAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["dataPointAnnotationPath"]=E.getParameter("value");}this.validateComboBox(this._oCardManifestSettings,"dataPointAnnotationPath");break;case"addODataSelectCheckBox":this._oCardManifestSettings.addODataSelectCheckBox=E.getParameter("selected");break;case"requireAppAuthorization":this._oCardManifestSettings.requireAppAuthorization=E.getParameter("value");break;case"kpiAnnotationPath":if(!n){this._oCardManifestSettings["kpiAnnotationPath"]=E.getParameter("value");}else{this._oCardManifestSettings.tabs[p-1]["kpiAnnotationPath"]=E.getParameter("value");}this._oCardManifestSettings.kpiAnnotationPath=E.getParameter("value");break;case"navigationPath":this._oCardManifestSettings.navigationPath=E.getParameter("value");break;case"title":case"subTitle":case"valueSelectionInfo":var R=false;var t=q+"Key";var u=q+"Property";this._oCardManifestSettings[q]=E.getParameter("value");this._oCardManifestSettings[u]=E.getParameter("value");for(var v in this._oCardManifestSettings.ai18nProperties){if(this._oCardManifestSettings.ai18nProperties[v].value===E.getParameter("value")){this._oCardManifestSettings[t]=this._oCardManifestSettings.ai18nProperties[v].key;R=true;break;}}if(!R){this._oCardManifestSettings[t]="";}this.validateComboBox(this._oCardManifestSettings,q);break;case"existingDatasSource":if(E.mParameters.selected){s.newDataSource=false;this._oCardManifestSettings.newDataSource=false;this.handleValueStateofComboBox("","datasSourceExisting","sapOVPDataSourceExistingComboBox",false);this.resetPropertiesVisibility(j,this._oCardManifestSettings);var w=this.getView().getModel();w.setProperty("/datasources",this._oCardManifestSettings.datasourcesFromManifest);}break;case"newDatasSource":if(E.mParameters.selected){s.newDataSource=true;this._oCardManifestSettings.newDataSource=true;this.handleValueStateofComboBox("","datasSourceNew","sapOVPDataSourceNewInput",false);this.resetPropertiesVisibility(j,this._oCardManifestSettings);this.getView().setBusy(true);getNewDataSources(s.sApplicationId).then(function(x){this.getView().setBusy(false);var y=x.results;var w=this.getView().getModel();w.setSizeLimit(y.length);w.setProperty("/datasources",y);}.bind(this));}break;default:break;}}}},resetPropertiesVisibility:function(E,i){if(E.indexOf("sapOVPExistingDataSource")!==-1||E.indexOf("sapOVPNewDataSource")!==-1){this._updateManifestProperties.forEach(function(p){if(!p.formElementId.includes("sapOVPExistingDataSource")&&!p.formElementId.includes("sapOVPNewDataSource")){if(p.formElementId.includes("sapOVPAddODataSelect")){i[p.formElement]=false;}else{i[p.formElement]="";}}});i.model="";}else if(E.indexOf("sapOVPDataSource")!==-1){this._updateManifestProperties.forEach(function(p){if(!p.formElementId.includes("sapOVPExistingDataSource")&&!p.formElementId.includes("sapOVPNewDataSource")&&!E.includes(p.formElementId)){if(p.formElementId.includes("sapOVPAddODataSelect")){i[p.formElement]=false;}else{i[p.formElement]="";}}});}else if(E.indexOf("sapOVPCardType")!==-1){this._updateManifestProperties.forEach(function(p){if(!(p.formElementId.includes("sapOVPDataSource")||p.formElementId.includes("sapOVPCardType"))){if(p.formElementId.includes("sapOVPAddODataSelect")){i[p.formElement]=false;}else{i[p.formElement]="";}}});}else if(E.indexOf("sapOVPEntitySetList")!==-1){var j=this.getView().getModel("visibility").getData().showViewSwitch;this._updateManifestProperties.forEach(function(p){if(!(p.formElementId.includes("sapOVPDataSource")||p.formElementId.includes("sapOVPCardType")||p.formElementId.includes("sapOVPEntitySetList"))){if(p.formElementId.includes("sapOVPAddODataSelect")){i[p.formElement]=false;}else{if(!j){i[p.formElement]="";}else{S.tabFields.forEach(function(n){if(n!=='entitySet'&&n!=='value'){i[n]="";}});}}}});}s.resetErrorHandling();this.setEnablePropertyForResetAndSaveButton(false);s.setVisibilityForFormElements(i);this.getView().getModel().refresh();this.getView().getModel("visibility").refresh();}});});
sap.ui.predefine('sap/ovp/cards/rta/SettingsDialogConstants',[],function(){"use strict";return{aVariantNames:[{sVariant:".SelectionVariant",sPath:"selectionVariant"},{sVariant:".PresentationVariant",sPath:"presentationVariant"},{sVariant:".SelectionPresentationVariant",sPath:"selectionPresentationVariant"},{sVariant:".KPI",sPath:"KPI"},{sVariant:".Identification",sPath:"identification"},{sVariant:".DataPoint",sPath:"dataPoint",isMandatoryField:true},{sVariant:".Chart",sPath:"chart",isMandatoryField:true},{sVariant:".Chart",sPath:"chartSPVorKPI",isMandatoryField:true},{sVariant:".SelectionVariant",sPath:"selectionVariantSPVorKPI"},{sVariant:".PresentationVariant",sPath:"presentationVariantSPVorKPI"},{sVariant:".LineItem",sPath:"lineItem",isMandatoryField:true},{sVariant:".HeaderInfo",sPath:"dynamicSubTitle",isMandatoryField:true}],aVisiblePropertiesForAnnotation:[{sProperty:"selectionVariant"},{sProperty:"presentationVariant"},{sProperty:"selectionPresentationVariant"},{sProperty:"KPI"},{sProperty:"identification"},{sProperty:"dataPoint"},{sProperty:"dataPointSelectionMode"},{sProperty:"lineItem"}],tabFields:['entitySet','dynamicSubtitleAnnotationPath','annotationPath','selectionAnnotationPath','presentationAnnotationPath','identificationAnnotationPath','dataPointAnnotationPath','chartAnnotationPath','colorPalette','ChartProperties','chartProperties','selectionPresentationAnnotationPath','kpiAnnotationPath','value'],mainFields:['title','subTitle','valueSelectionInfo','listType','listFlavor','sortOrder','sortBy','stopResizing','defaultSpan'],resetTabFields:['dynamicSubtitleAnnotationPath','annotationPath','selectionAnnotationPath','presentationAnnotationPath','identificationAnnotationPath','dataPointAnnotationPath','chartAnnotationPath','selectionPresentationAnnotationPath','kpiAnnotationPath'],cardSettingsForStaticLinkListCard:['title','subTitle','listFlavor','stopResizing','defaultSpan'],AllCardSettingsForKPICard:['title','subTitle','stopResizing','defaultSpan','entitySet','kpiAnnotationPath','identificationAnnotationPath'],allCardSettings:['entitySet','listType','listFlavor','sortOrder','sortBy','imageUri','targetUri','openInNewWindow','semanticObject','action','dynamicSubtitleAnnotationPath','annotationPath','selectionAnnotationPath','presentationAnnotationPath','identificationAnnotationPath','dataPointAnnotationPath','chartAnnotationPath','colorPalette','ChartProperties','chartProperties','selectionPresentationAnnotationPath','kpiAnnotationPath','stopResizing','defaultSpan'],cardSettingsArrayLevel:{"staticContent":{"text":['title','subTitle','imageAltText'],"settings":['imageUri','targetUri','openInNewWindow','semanticObject','action']},"tabs":{"text":['value'],"settings":['entitySet','dynamicSubtitleAnnotationPath','annotationPath','selectionAnnotationPath','presentationAnnotationPath','identificationAnnotationPath','dataPointAnnotationPath','chartAnnotationPath','colorPalette','ChartProperties','chartProperties','selectionPresentationAnnotationPath','kpiAnnotationPath','navigation'],"onlyTabLevelProps":['value'],"checkForRemoval":['entitySet']}},cardSettingsForComplex:{"text":['title','subTitle','valueSelectionInfo','itemText'],"settings":['listType','listFlavor','sortOrder','sortBy','stopResizing','defaultSpan','customParams','staticParameters','objectStreamCardsSettings']},cardSettings:{"text":['title','subTitle','valueSelectionInfo','itemText'],"settings":['listType','listFlavor','sortOrder','sortBy','dynamicSubtitleAnnotationPath','annotationPath','selectionAnnotationPath','presentationAnnotationPath','identificationAnnotationPath','dataPointAnnotationPath','chartAnnotationPath','colorPalette','ChartProperties','chartProperties','selectionPresentationAnnotationPath','kpiAnnotationPath','stopResizing','defaultSpan','customParams','staticParameters','objectStreamCardsSettings']},cardSettingsWithText:['title','subTitle','valueSelectionInfo','itemText',{'staticContent':['title','subTitle','imageAltText']},{'tabs':['value']}],oVisibility:{"cardPreview":true,"stopResizing":false,"noOfRows":false,"noOfColumns":false,"title":true,"showEntitySet":false,"dynamicSwitchStateSubTitle":false,"dynamicSwitchSubTitle":false,"dynamicSubTitle":false,"subTitle":true,"kpiHeader":true,"valueSelectionInfo":true,"listType":true,"listFlavor":true,"selectionVariantSPVorKPI":true,"presentationVariantSPVorKPI":true,"chartSPVorKPI":true,"selectionPresentationVariant":true,"KPI":true,"selectionVariant":true,"presentationVariant":true,"lineItem":true,"identification":true,"dataPoint":true,"chart":true,"links":false,"lineItemTitle":false,"lineItemSubTitle":false,"staticLink":false,"viewSwitch":false,"moveToTheTop":false,"moveUp":false,"moveDown":false,"moveToTheBottom":false,"delete":false,"showMore":true,"removeVisual":false,"selectCard":false,"addKPIHeader":false,"setEntitySet":false,"setCardProperties":false,"setGeneralCardProperties":false,"requiredSubTitle":false,"showNewCardTypes":false,"addCustomActions":false},oI18nKeyValueProperty:{"title":"titleKey","subTitle":"subTitleKey","valueSelectionInfo":"valueSelectionInfoKey"},oI18nValueProperty:{"title":"title","subTitle":"subTitle","valueSelectionInfo":"valueSelectionInfo"},oMandatoryPropertiesKey:{"title":"sapOvpSettingsTitle","subTitle":"sapOvpSettingsSubTitle","valueSelectionInfo":"sapOvpSettingsValueSelectionInfo"},_aRefreshNotRequired:[{"formElementId":"sapOvpSettingsTitle","cardElementId":"ovpHeaderTitle"},{"formElementId":"sapOvpSettingsViewName","cardElementId":"ovp_card_dropdown"},{"formElementId":"sapOvpDefaultViewSwitch","cardElementId":""},{"formElementId":"sapOvpSettingsSubTitle","cardElementId":"SubTitle-Text"},{"formElementId":"sapOvpSettingsLineItemTitle","cardElementId":"linkListTitleLabel"},{"formElementId":"sapOvpSettingsLineItemSubTitle","cardElementId":"linkListSubTitleLabel"},{"formElementId":"sapOvpSettingsValueSelectionInfo","cardElementId":"ovpValueSelectionInfo"},{"formElementId":"sapOvpSettingsIdentification","cardElementId":"","updateProperty":"identificationAnnotationPath"},{"formElementId":"sapOvpSettingsKPIHeaderSwitch","cardElementId":"kpiHeader","isKpiSwitch":true}],_aRefreshRequired:[{"formElementId":"sapOvpSettingsKPIHeaderSwitch","updateProperty":"kpiHeader"},{"formElementId":"sapOvpSettingsSwitchSubTitle","updateProperty":"subTitleSwitch"},{"formElementId":"sapOvpSettingsListType","updateProperty":"listType"},{"formElementId":"sapOvpSettingsListFlavorForList","updateProperty":"listFlavor"},{"formElementId":"sapOvpSettingsListFlavorForLinkList","updateProperty":"listFlavorForLinkList"},{"formElementId":"sapOvpSettingsSortOrder","updateProperty":"sortOrder"},{"formElementId":"sapOvpSettingsSortBy","updateProperty":"sortBy"},{"formElementId":"sapOvpSettingsDynamicSubTitle","updateProperty":"dynamicSubtitleAnnotationPath"},{"formElementId":"sapOvpSettingsFilterAndPresentedBy","updateProperty":"selectionPresentationAnnotationPath"},{"formElementId":"sapOvpSettingsFilterBy","updateProperty":"selectionAnnotationPath"},{"formElementId":"sapOvpSettingsPresentedBy","updateProperty":"presentationAnnotationPath"},{"formElementId":"sapOvpSettingsDataPoint","updateProperty":"dataPointAnnotationPath"},{"formElementId":"sapOvpSettingsChart","updateProperty":"chartAnnotationPath"},{"formElementId":"sapOvpSettingsLineItem","updateProperty":"annotationPath"},{"formElementId":"sapOvpSettingsEntitySet","updateProperty":"entitySet"},{"formElementId":"sapOvpSettingsStaticLinkListDelete","updateProperty":"delete"},{"formElementId":"sapOvpSettingsStaticLinkListAdd","updateProperty":"add"},{"formElementId":"sapOvpSettingsStaticLinkListSort","updateProperty":"sort"},{"formElementId":"sapOvpSettingsStaticLinkListChangeVisual","updateProperty":"changeVisual"},{"formElementId":"sapOvpSettingsStaticLinkListRemoveVisual","updateProperty":"removeVisual"},{"formElementId":"sapOvpSettingsNumberOfRows","updateProperty":"noOfRows"},{"formElementId":"sapOvpSettingsKPIAnnotation","updateProperty":"kpiAnnotationPath"},{"formElementId":"sapOvpSettingsNewKPICard","updateProperty":""}],aListType:[{"key":"condensed","name":"Condensed"},{"key":"extended","name":"Extended"}],aListFlavour:[{"key":"standard","name":"Standard"},{"key":"bar","name":"Bar"}],aLinkListFlavour:[{"key":"carousel","name":"Carousel"},{"key":"standard","name":"Standard"}],aDataPointSelectionMode:[{"key":"dataPointNav","name":"Data Point Navigation"},{"key":"chartNav","name":"Chart Navigation"}],_updateManifestProperties:[{"formElementId":"sapOVPExistingDataSource","formElement":"existingDatasSource"},{"formElementId":"sapOVPNewDataSource","formElement":"newDatasSource"},{"formElementId":"sapOVPDataSourceExistingComboBox","formElement":"datasSourceExisting"},{"formElementId":"sapOVPDataSourceNewInput","formElement":"datasSourceNew"},{"formElementId":"sapOVPCardType","formElement":"template"},{"formElementId":"sapOVPEntitySetList","formElement":"entitySet"},{"formElementId":"sapOvpCardTitle","formElement":"title"},{"formElementId":"sapOvpCardTitle","formElement":"titleKey"},{"formElementId":"sapOvpCardTitle","formElement":"titleProperty"},{"formElementId":"sapOvpCardSubTitle","formElement":"subTitle"},{"formElementId":"sapOvpCardSubTitle","formElement":"subTitleKey"},{"formElementId":"sapOvpCardSubTitle","formElement":"subTitleProperty"},{"formElementId":"sapOVPIdentification","formElement":"identificationAnnotationPath"},{"formElementId":"sapOVPSelectionPresentationVariant","formElement":"selectionPresentationAnnotationPath"},{"formElementId":"sapOVPSelectionVariant","formElement":"selectionAnnotationPath"},{"formElementId":"sapOVPPresentationVariant","formElement":"presentationAnnotationPath"},{"formElementId":"sapOVPAnnotationPath","formElement":"annotationPath"},{"formElementId":"sapOVPListType","formElement":"listType"},{"formElementId":"sapOVPListFlavor","formElement":"listFlavor"},{"formElementId":"sapOVPAddKpiCheckBoxID","formElement":"KPICheckBox"},{"formElementId":"sapOvpDataPoint","formElement":"dataPointAnnotationPath"},{"formElementId":"sapOVPAddODataSelect","formElement":"addODataSelectCheckBox"},{"formElementId":"sapOvpCardProperiesAuthorization","formElement":"requireAppAuthorization"},{"formElementId":"sapOvpKpiAnnotationPath","formElement":"kpiAnnotationPath"},{"formElementId":"sapOVPDataPointSelectionMode","formElement":"navigationPath"},{"formElementId":"sapOVPLinkListFlavor","formElement":"listFlavor"},{"formElementId":"sapOvpValueSelectionInfo","formElement":"valueSelectionInfo"},{"formElementId":"sapOvpSettingsTitle","formElement":"title"},{"formElementId":"sapOvpSettingsSubTitle","formElement":"subTitle"}],aCardType:[{"template":"sap.ovp.cards.list","text":"List"},{"template":"sap.ovp.cards.linklist","text":"Link List"},{"template":"sap.ovp.cards.v4.linklist","text":"Link List"},{"template":"sap.ovp.cards.table","text":"Table"},{"template":"sap.ovp.cards.stack","text":"Stack"},{"template":"sap.ovp.cards.charts.analytical","text":"Analytical"}],NewCardSettings:[{"template":"sap.ovp.cards.linklist","cardSettings":['title','subTitle','listFlavor','entitySet','requireAppAuthorization','annotationPath','identificationAnnotationPath','selectionAnnotationPath','presentationAnnotationPath','selectionPresentationAnnotationPath'],"text":['title','subTitle','listFlavor','requireAppAuthorization']},{"template":"sap.ovp.cards.list","cardSettings":['title','subTitle','listType','listFlavor','entitySet','requireAppAuthorization','annotationPath','identificationAnnotationPath','selectionAnnotationPath','presentationAnnotationPath','selectionPresentationAnnotationPath','addODataSelect','dataPointAnnotationPath','valueSelectionInfo'],"text":['title','subTitle','listType','listFlavor','requireAppAuthorization','addODataSelect','valueSelectionInfo']},{"template":"sap.ovp.cards.table","cardSettings":['title','subTitle','entitySet','requireAppAuthorization','annotationPath','identificationAnnotationPath','selectionAnnotationPath','presentationAnnotationPath','selectionPresentationAnnotationPath','addODataSelect','dataPointAnnotationPath','valueSelectionInfo'],"text":['title','subTitle','requireAppAuthorization','addODataSelect','valueSelectionInfo']},{"template":"sap.ovp.cards.stack","cardSettings":['title','subTitle','entitySet','requireAppAuthorization','annotationPath','addODataSelect'],"text":['title','subTitle','requireAppAuthorization','addODataSelect']},{"template":"sap.ovp.cards.charts.analytical","cardSettings":['title','subTitle','entitySet','requireAppAuthorization','kpiAnnotationPath','identificationAnnotationPath','navigationPath','dataPointAnnotationPath','valueSelectionInfo'],"text":['title','subTitle','requireAppAuthorization','valueSelectionInfo']}]};},true);
sap.ui.predefine('sap/ovp/cards/semanticDateRangeTypeHelper',[],function(){"use strict";
function s(p,f,S,u){if(p.filterSettings&&p.filterSettings.dateSettings&&p.filterSettings.dateSettings.fields){var d=p.filterSettings.dateSettings.fields;Object.entries(d).forEach(function(D){var n=-1;if(S&&S.Dates){n=S.Dates.findIndex(function(o){return o.PropertyName===D[0];});}if((n===-1||Object.keys(u).indexOf(D[0])===-1)&&D[1].defaultValue){f.getConditionTypeByKey(D[0])&&f.getConditionTypeByKey(D[0]).setOperation(D[1].defaultValue.operation);}});}}
return{setSemanticDateRangeDefaultValue:s};},true);
sap.ui.predefine('sap/ovp/cards/stack/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.stack.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.stack.Stack"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.stack.Stack"},"contentPosition":{"type":"string","defaultValue":"Right"},"objectStreamCardsSettings":{"type":"object","defaultValue":{}},"objectStreamCardsTemplate":{"type":"string","defaultValue":"sap.ovp.cards.quickview"},"objectStreamCardsNavigationProperty":{"type":"string"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/stack/Stack.controller',["sap/ovp/cards/generic/Card.controller","sap/m/library","sap/ui/thirdparty/jquery","sap/ovp/ui/ObjectStream","sap/ovp/cards/AnnotationHelper","sap/ui/Device","sap/ui/base/BindingParser","sap/ui/core/ComponentContainer","sap/m/Link","sap/ovp/ui/CustomData","sap/ui/core/Icon","sap/m/FlexItemData","sap/m/Text","sap/m/VBox","sap/ovp/app/resources","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ui/core/Component"],function(C,S,q,O,A,D,B,a,L,b,I,F,T,V,c,m,o,u,U){"use strict";var l=new o("OVP.stack.Stack");return C.extend("sap.ovp.cards.stack.Stack",{onInit:function(){C.prototype.onInit.apply(this,arguments);var v=this._oCard=this.getView().byId("stackContent");v.addEventDelegate({onclick:this.openStack.bind(this),onkeydown:function(e){if(!e.shiftKey&&(e.keyCode==13||e.keyCode==32)){e.preventDefault();this.openStack();}}.bind(this)});if(D.system.phone){this.bAfterColumnUpdateAttached=false;this.bDeviceOrientationAttached=false;}this.quickViewCardContextArray=[];this.bQuickViewCardRendered=false;this.initialLoadCardLength=10;this.quickViewCardCount=0;this._createObjectStream();},onExit:function(){if(this.oObjectStream){this.oObjectStream.destroy();}},addPlaceHolder:function(n){var v=this.getView();var d=v.getModel("ovpCardProperties");var s=d.getProperty("/objectStreamCardsNavigationProperty");var e=s?true:false;if(!e){var N=this.getEntityNavigationEntries();if(N.length>0){var f=N[0].label;if(this.sPlaceHolderText==undefined){this.sPlaceHolderText=c.getText("PlaceHolder_default");}var p=this._createPlaceHolder(n,this.sPlaceHolderText,f);var t=this;p.addEventDelegate({onclick:function(){t.doNavigation(null);}});this.oObjectStream.setPlaceHolder(p);}}},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);this.ovpLayout=sap.ui.getCore().byId(this.oCardComponent._sOwnerId+"---mainView--ovpLayout");if(D.system.phone){this._cardWidth=this.getView().$().width();if(!this.bAfterColumnUpdateAttached){var d=this.getOwnerComponent().getComponentData();if(d&&d.mainComponent&&d.appComponent.oOvpConfig&&d.appComponent.oOvpConfig.containerLayout!=="resizable"){var M=d.mainComponent,e=M.byId("ovpLayout");e.attachAfterColumnUpdate(function(E){this._setObjectStreamCardsSize(false);}.bind(this));this.bAfterColumnUpdateAttached=true;}}if(!this.bDeviceOrientationAttached){D.orientation.attachHandler(function(E){this._setObjectStreamCardsSize(true);}.bind(this));}}if(this.bSetErrorState&&this.bSetErrorState===true){this.setErrorState();return;}var v=this.getView();if(this.oObjectStream){var f=this.oObjectStream.getBinding("content");f.attachDataRequested(function(){if(this.getView().byId('stackSize')!==undefined&&this.getView().byId('stackTotalSize')!==undefined){q(this.getView().byId('stackSize').getDomRef()).css('visibility','hidden');q(this.getView().byId('stackTotalSize').getDomRef()).css('visibility','hidden');}},this);f.attachDataReceived(function(){var g=this.getView().getModel("ovpCardProperties").getObject("/category"),n=f.getCurrentContexts().length,h=f.getLength();v.byId("stackSize").setText(n);v.byId("stackTotalSize").setText(c.getText("Total_Size_Stack_Card",[h]));var s=this.getView().byId("stackContent").getDomRef();q(s).attr("aria-label",c.getText("stackCardContent",[n,h,g]));var i=this.getView().byId("stackSize").getDomRef();q(i).attr("aria-label",c.getText("stackCard",[n]));this.addPlaceHolder(h);if(this.getView().byId('stackSize')!==undefined&&this.getView().byId('stackTotalSize')!==undefined){q(this.getView().byId('stackSize').getDomRef()).css('visibility','visible');q(this.getView().byId('stackTotalSize').getDomRef()).css('visibility','visible');}var j=this.getView().getDomRef();var k=q(j).find('.sapOvpCardContentContainer');if(h!==0){if(k.length!==0){k.addClass('sapOvpCardNavigable');}}else{if(k.length!==0){var p=k.find("[role='button']");if(p.length!==0){p.removeAttr("role");}}}},this);this.addPlaceHolder("");if(f.bPendingRequest===false){f.fireDataReceived();}if(this.checkNavigation()){this.oObjectStream.getTitle().addStyleClass('sapOvpCardNavigable');}}},getCardItemsBinding:function(){return this&&this.oObjectStream&&this.oObjectStream.getBinding("content");},_setObjectStreamCardsSize:function(i){var d=this.getView().$().width();if(this._cardWidth!=d||i){this.oObjectStream.setCardsSize(d);this._cardWidth=d;}},_createObjectStream:function(){if(this.oObjectStream instanceof O){return;}var d=this.getOwnerComponent();var e=d.getComponentData&&d.getComponentData();var p;var P;if(e.i18n){this.oi18n=e.i18n;}if(e&&e.mainComponent){p=e.mainComponent._getOvplibResourceBundle();}else{p=d.getOvplibResourceBundle();}P=d.getPreprocessors(p);this.oModel=e.model;this.oCardPropsModel=P.xml.ovpCardProperties;var E=this.oCardPropsModel.getProperty("/entitySet");var f=this.oCardPropsModel.getProperty("/objectStreamCardsSettings");this.oObjectStreamCardsSettings=f;var M=this.oModel.getMetaModel();var g=M.getODataEntitySet(E);var h=M.getODataEntityType(g.entityType);var s=this.oCardPropsModel.getProperty("/annotationPath");var i=(s)?s.split(","):[];if(e){this.oAppComponent=e.appComponent;this.oOwner=e.mainComponent;}if(this.oOwner){this.oGlobalFilter=this.oOwner.getView().byId("ovpGlobalFilter");}function j(K){if(K==="ovpCardProperties"){return this.oCardPropsModel;}else if(K==="dataModel"){return this.oModel;}else if(K==="_ovpCache"){return{};}}var k=[{getSetting:j.bind(this),bDummyContext:true},g].concat(i);var n=A.formatItems.apply(this,k);var r=B.complexParser(n);var t=this.oCardPropsModel.getProperty("/objectStreamCardsNavigationProperty");this.bStackFlavorAssociation=t?true:false;this.oStackFilterMapping;var v=this.oCardPropsModel.getProperty("/objectStreamCardsTemplate");if(this.bStackFlavorAssociation){if(v==="sap.ovp.cards.quickview"){l.error("objectStreamCardsTemplate cannot be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is provided");this.bSetErrorState=true;return;}this.oStackFilterMapping=this._determineFilterPropertyId(this.oModel,g,h,t);f.entitySet=this.oModel.getMetaModel().getODataAssociationSetEnd(h,t).entitySet;}else{if(v!=="sap.ovp.cards.quickview"){l.error("objectStreamCardsTemplate must be 'sap.ovp.cards.quickview' when objectStreamCardsNavigationProperty is not provided");this.bSetErrorState=true;return;}var w=null;var x=this.oCardPropsModel.getProperty("/identificationAnnotationPath");var y=(x)?x.split(","):[];if(y&&y.length>1){w=y[1];}if(w){f.identificationAnnotationPath=w;}if(h["com.sap.vocabularies.UI.v1.HeaderInfo"]&&h["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName&&h["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String){f.title=h["com.sap.vocabularies.UI.v1.HeaderInfo"].TypeName.String;}else{f.title=h.name;}f.entitySet=E;}f.isObjectStream=true;r.factory=function(H,J){var K=new a();this.quickViewCardContextArray.push({sId:H,oContext:J,oComponentContainer:K});return K;}.bind(this);var z=this.oCardPropsModel.getObject("/title");this.sPlaceHolderText=this.oCardPropsModel.getObject("/itemText");var G=new L({text:z,subtle:true,press:this.handleObjectStreamTitlePressed.bind(this)}).addStyleClass("sapOvpObjectStreamHeader");G.addCustomData(new b({key:"tabindex",value:"0",writeToDom:true}));G.addCustomData(new b({key:"aria-label",value:z,writeToDom:true}));this.oObjectStream=new O(this.getView().getId()+"_ObjectStream",{title:G,content:r});this.oObjectStream.setModel(this.oModel);},_renderQuickViewCards:function(i,d,e){return new Promise(function(r,f){var s=this.oCardPropsModel.getProperty("/objectStreamCardsSettings"),g;if(this.bStackFlavorAssociation){g={filters:[{path:this.oStackFilterMapping.foreignKey,operator:"EQ",value1:d.getProperty(this.oStackFilterMapping.key)}]};s=m({},g,this.oObjectStreamCardsSettings);}var h={name:this.oCardPropsModel.getProperty("/objectStreamCardsTemplate"),componentData:{cardId:i,model:this.oModel,settings:s,appComponent:this.oAppComponent,mainComponent:this.oOwner},manifest:false};if(this.oGlobalFilter){h.componentData.globalFilter={getUiState:this.oGlobalFilter.getUiState.bind(this.oGlobalFilter)};}var j=this.oi18n;U.create(h).then(function(k){k.setBindingContext(d);if(j){k.setModel(j,"@i18n");}e.setComponent(k);r();e.setBindingContext=function(d){k.setBindingContext(d);};});}.bind(this));},_determineFilterPropertyId:function(M,e,E,n){var N,d=E.namespace,r,f;for(var i=0;i<E.navigationProperty.length;i++){if(E.navigationProperty[i].name===n){N=E.navigationProperty[i];break;}}r=N.relationship;f=A.getAssociationObject(M,r,d);var R=f.referentialConstraint,g={};if(R){g.foreignKey=R.dependent.propertyRef[0].name;g.key=R.principal.propertyRef[0].name;return g;}},_createPlaceHolder:function(n,p,s){var i=new I({src:"sap-icon://display-more",useIconTooltip:false,layoutData:new F({alignSelf:S.FlexAlignSelf.Center,styleClass:"sapOvpStackPlaceHolderIconContainer"})});i.addStyleClass("sapOvpStackPlaceHolderIcon");var d=n+" "+p;var e=c.getText("SeeMoreContentAppName",[d,s]);var t=new T({text:e,textAlign:"Center",layoutData:new F({alignSelf:S.FlexAlignSelf.Center,maxWidth:"14rem"})});t.addCustomData(new b({key:"role",value:"heading",writeToDom:true}));t.addCustomData(new b({key:"aria-label",value:e,writeToDom:true}));t.addStyleClass("sapOvpStackPlaceHolderTextLine");var f=new V({items:[t]});f.addStyleClass("sapOvpStackPlaceHolderLabelsContainer");f.addCustomData(new b({key:"tabindex",value:"0",writeToDom:true}));f.addCustomData(new b({key:"role",value:"button",writeToDom:true}));var v=new V({items:[i,f]});v.addStyleClass("sapOvpStackPlaceHolder");v.addEventDelegate({onkeydown:function(E){if(!E.shiftKey&&(E.keyCode==13||E.keyCode==32)){E.preventDefault();E.srcControl.$().click();}}});return v;},_openStack:function(){if(this.oObjectStream){var d=this.oObjectStream.getBinding("content");if(d.getCurrentContexts().length>0){var e=this.getView().$().width();this.getView().addDependent(this.oObjectStream);this.oObjectStream.setModel(this.getView().getModel("@i18n"),"@i18n");this.oObjectStream.open(e,this._oCard);}}this.ovpLayout.setActive(true);if(this.oObjectStream.getNewContentAvailable()){var f=[];for(var i=this.initialLoadCardLength;i<this.quickViewCardContextArray.length;i++){f.push(this._renderQuickViewCards(this.quickViewCardContextArray[i].sId,this.quickViewCardContextArray[i].oContext,this.quickViewCardContextArray[i].oComponentContainer));}this.oObjectStream.setNewContentAvailable(false);this.quickViewCardContextArray=[];}},openStack:function(){this.ovpLayout.setActive(false);if(this.oObjectStream.getNewContentAvailable()){var d=[];for(var i=this.quickViewCardCount;i<this.initialLoadCardLength;i++){d.push(this._renderQuickViewCards(this.quickViewCardContextArray[i].sId,this.quickViewCardContextArray[i].oContext,this.quickViewCardContextArray[i].oComponentContainer));}Promise.all(d).then(function(){this.bQuickViewCardRendered=true;this._openStack();}.bind(this));}else{this._openStack();}},handleObjectStreamTitlePressed:function(e){this.doNavigation(null);}});});
sap.ui.predefine('sap/ovp/cards/table/Component',["sap/ovp/cards/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.table.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.table.Table"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.table.Table"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"countHeaderFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.CountHeader"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.KPIHeader"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/table/Table.controller',["sap/ovp/cards/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/app/FilterHelper"],function(C,q,O,a,b,o,F){"use strict";var l=new o("OVP.table.Table");return C.extend("sap.ovp.cards.table.Table",{onInit:function(){C.prototype.onInit.apply(this,arguments);var t=this;this.eventhandler=function(c,E,f){var d=t.getEntityType();var g=t.oMainComponent.getMacroFilterBar();var h=g.getModel();var i=t.getView().getModel('ovpCardProperties');var j=i.getData().entityType.name;if(d&&h){var r=F.getEntityRelevantFilters(d,f,j,h);var A=F.mergeFilters(r,t.selectionVaraintFilter);try{var T=t.getCardItemsBinding();if(T){T.filter(A);}if(t.getKPIBinding()){t.getKPIBinding().filter(A);}}catch(e){l.error(e);}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oMainComponent&&this.oMainComponent.isMacroFilterBar&&this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onColumnListItemPress:function(e){var n=b.bCRTLPressed?b.constants.explace:b.constants.inplace;b.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var N=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),N[0],n);}},onContactDetailsLinkPress:function(e){if(this.oPopover){this.oPopover.setVisible(false);}var s,B;s=e.getSource();this.oPopover=s.getParent().getAggregation("items")[0];B=s.getBindingContext();if(!B){return;}this.oPopover.bindElement(B.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(s);},getCardItemsBinding:function(){var t=this.getView().byId("ovpTable");return t.getBinding("items");},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);var c=this.getOwnerComponent().getComponentData();var d=this.getCardPropertiesModel();if(!O.checkIfAPIIsUsed(this)&&d.getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(c.cardId);var h=this.getHeaderHeight();var s=this.oDashboardLayoutUtil.getCardDomId(c.cardId);var f=document.getElementById(s);if(!e.dashboardLayout.autoSpan){f.getElementsByClassName('sapOvpWrapper')[0].style.height=((e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX)+1-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX))+"px";}if(e.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}this.addColumnInTable(q(f),{colSpan:e.dashboardLayout.colSpan});}else{var t=this.getView().byId("ovpTable");var A=t.getAggregation("columns");for(var i=0;i<3;i++){if(A[i]){A[i].setStyleClass("sapTableColumnShow").setVisible(true);}}}},getCardItemBindingInfo:function(){var L=this.getView().byId("ovpTable");return L.getBindingInfo("items");},addColumnInTable:function($,c){if(c.colSpan>=1){if(q($).find("tr").length!=0){var t=sap.ui.getCore().byId(q($).find(".sapMList").attr("id"));var d=t.getAggregation("columns");var e=c.colSpan;var I=e+1;for(var i=0;i<6;i++){if(d[i]){if(i<=I){d[i].setStyleClass("sapTableColumnShow").setVisible(true);}else{d[i].setStyleClass("sapTableColumnHide").setVisible(false);}}}}}},resizeCard:function(n,c){var N,A,h,A;try{var $=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),B=this.getCardItemBindingInfo(),H=this.getHeaderHeight(),d=this.getView().byId('ovpCardContentContainer').getDomRef();if(n.showOnlyHeader){d.classList.add('sapOvpContentHidden');N=0;}else{d.classList.remove('sapOvpContentHidden');h=H+c.dropDownHeight;A=(n.rowSpan*n.iRowHeightPx)-h-c.itemHeight;N=Math.abs(Math.floor(A/c.itemHeight));$.style.height=n.rowSpan*n.iRowHeightPx+'px';}d.style.height=(n.rowSpan*n.iRowHeightPx)-(H+2*n.iCardBorderPx)+"px";this.addColumnInTable(this.getView().getDomRef(),n);if(N!==B.length){B.length=N;n.noOfItems=B.length;this.getCardItemsBinding().refresh();}else{this._handleCountHeader();}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString());}}});});
sap.ui.predefine('sap/ovp/cards/v4/V4AnnotationHelper',["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ovp/cards/CommonUtils","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/model/analytics/odata4analytics","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ovp/app/resources","sap/base/strings/formatMessage","sap/base/util/isPlainObject","sap/base/util/each","sap/ovp/cards/MetadataAnalyser","sap/base/security/encodeURL","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject","sap/ovp/app/OVPUtils"],function(N,D,C,O,F,a,o,S,b,f,c,e,M,d,m,g,h,l){"use strict";var n={StateValues:{None:"None",Negative:"Error",Critical:"Warning",Positive:"Success"},ColorValues:{None:"Neutral",Negative:"Error",Critical:"Critical",Positive:"Good"}};var A={TEXT:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT:"com.sap.vocabularies.UI.v1.TextArrangement"};var T={TEXT_LAST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TEXT_FIRST:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TEXT_ONLY:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly",TEXT_SEPARATE:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"};var I={"List_condensed":{phone:5,tablet:5,desktop:5},"List_extended":{phone:3,tablet:3,desktop:3},"List_condensed_bar":{phone:5,tablet:5,desktop:5},"List_extended_bar":{phone:3,tablet:3,desktop:3},"Table":{phone:5,tablet:5,desktop:5},"Stack_simple":{phone:20,tablet:20,desktop:20},"Stack_complex":{phone:5,tablet:5,desktop:5}};var L=new g("OVP.cards.V4AnnotationHelper");
function p(i,j){var k=i.getSetting('ovpCardProperties');var q3=k.getProperty('/showLabelText');if(q3==="true"){var r3=j.Address[0];if(typeof r3.country!=="undefined"){return"{path:'"+r3.country.Path+"'}";}else if(typeof r3.locality!=="undefined"){return"{path:'"+r3.locality.Path+"'}";}else if(typeof r3.street!=="undefined"){return"{path:'"+r3.street.Path+"'}";}else if(typeof r3.code!=="undefined"){return"{path:'"+r3.code.Path+"'}";}}else{return null;}}
p.requiresIContext=true;
function q(i,j){if(!j){return"";}if(j.Label){return j.Label;}var k=i.getSetting&&i.getSetting('ovpCardProperties');var q3=k&&k.getProperty("/metaModel");var r3=k&&k.getProperty("/entityType");if(!q3||!r3){return"";}var s3;if(j.Value){s3=j.Value.$Path;}if(j.Target){var t3="/"+J(r3.$Type,j);var u3=t3&&q3.getProperty(t3);s3=u3&&u3.Value.$Path;}if(!s3||!s3.length>0||s3===" "){return"";}var v3=q3.getData()["$Annotations"][r3.$Type+"/"+s3];if(!v3){return"";}var w3=v3["sap:label"]||(v3["@com.sap.vocabularies.Common.v1.Label"]||"")||"";return w3;}
q.requiresIContext=true;
function s(i){if(i.EdmType==="Edm.DateTime"||i.EdmType==="Edm.DateTimeOffset"){return'Right';}return'Left';}
s.requiresContext=true;
function r(i,k){if(i.getSetting){var j=i.getSetting("_ovpCache");if(j){return j[k];}}return undefined;}
function t(i,k,j){if(i.getSetting){var q3=i.getSetting("_ovpCache");if(q3){q3[k]=j;}}}
function u(i,j){var k;if(j){k=j.None;if(i&&i.$EnumMember){var q3=i.$EnumMember;if(w(q3,'Negative')){k=j.Negative;}else if(w(q3,'Critical')){k=j.Critical;}else if(w(q3,'Positive')){k=j.Positive;}}}return k;}
function v(i){if(i=="Error"){i=1;}else if(i=="Warning"){i=2;}else if(i=="Success"){i=3;}else{i=0;}return i;}
function w(i,j){return i&&i.indexOf(j,i.length-j.length)!==-1;}
function x(i,j,k,q3,r3,s3,t3){if(typeof i=="string"){i=N.getIntegerInstance().parse(i);}var u3={};u3.$EnumMember="None";var v3=Number.NEGATIVE_INFINITY;var w3=Number.POSITIVE_INFINITY;if((!r3&&r3!==0)&&(k||k===0)){r3=k;}if((!s3&&s3!==0)&&(q3||q3===0)){s3=q3;}if(!k&&k!==0){k=v3;}if(!q3&&q3!==0){q3=w3;}if(i!==undefined){i=Number(i);if(w(j,"Minimize")||w(j,"Minimizing")){if((s3||s3===0)&&(q3||q3===0)){if(i<=parseFloat(s3)){u3.$EnumMember="Positive";}else if(i>parseFloat(q3)){u3.$EnumMember="Negative";}else{u3.$EnumMember="Critical";}}}else if(w(j,"Maximize")||w(j,"Maximizing")){if((r3||r3===0)&&(k||k===0)){if(i>=parseFloat(r3)){u3.$EnumMember="Positive";}else if(i<parseFloat(k)){u3.$EnumMember="Negative";}else{u3.$EnumMember="Critical";}}}else if(w(j,"Target")){if((s3||s3===0)&&(q3||q3===0)&&(r3||r3===0)&&(k||k===0)){if(i>=parseFloat(r3)&&i<=parseFloat(s3)){u3.$EnumMember="Positive";}else if(i<parseFloat(k)||i>parseFloat(q3)){u3.$EnumMember="Negative";}else{u3.$EnumMember="Critical";}}}}return u(u3,t3);}
function y(i,j,k,q3){if(typeof i=="string"){i=N.getIntegerInstance().parse(i);}if(!i||!j){return;}i=Number(i);if(!q3&&(i-j>=0)){return"Up";}if(!k&&(i-j<=0)){return"Down";}if(j&&q3&&(i-j>=q3)){return"Up";}if(j&&k&&(i-j<=k)){return"Down";}}
function z(i,j){var k=i.getPath(0)+"-DataFields-Sorted";var q3=r(i,k);if(!q3){var r3=B(i,j);var s3=r3.map(function(t3){return t3.Value.$Path;});s3=s3.filter(function(t3){return!!t3;});q3=j.filter(function(t3){if(t3.$Type==="com.sap.vocabularies.UI.v1.DataField"&&s3.indexOf(t3.Value.$Path)===-1){return true;}return false;});q3=P(q3);t(i,k,q3);}return q3;}
z.requiresIContext=true;
function B(j,k,q3){var r3=j.getPath(0)+"-DataPoints-Sorted";var s3=r(j,r3);if(!s3){if(q3){s3=k.filter(G);}else{s3=k.filter(E);}s3=P(s3);var t3;for(var i=0;i<s3.length;i++){t3=j.getPath(0).substr(0,j.getPath(0).lastIndexOf("/")+1);s3[i]=j.getModel(0).getProperty(J(t3,s3[i]));t3="";}t(j,r3,s3);}return s3;}
B.requiresIContext=true;
function E(i){if(i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.$AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/)){return true;}return false;}
function G(i){if((i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.$AnnotationPath.match(/@com.sap.vocabularies.UI.v1.DataPoint.*/))||(i.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&i.Target.$AnnotationPath.match(/@com.sap.vocabularies.Communication.v1.Contact.*/))){return true;}return false;}
function H(i){if(!i||!i.Criticality||!i.Criticality.Path){return;}return"{path:'"+i.Criticality.Path+"'}";}
function J(i,j){return i+j.Target.$AnnotationPath;}
function K(i){var j,k;if(i["@com.sap.vocabularies.UI.v1.Importance"]){j=i["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember;switch(j){case"com.sap.vocabularies.UI.v1.ImportanceType/High":k=1;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":k=2;break;case"com.sap.vocabularies.UI.v1.ImportanceType/Low":k=3;break;}}else{k=4;}return k;}
function P(i){if(i.length<2){return i;}var j=parseInt(i.length/2,10);var k=i.slice(0,j);var q3=i.slice(j,i.length);return Q(P(k),P(q3));}
function Q(i,j){var k=[];while(i.length&&j.length){var q3=K(i[0]),r3=K(j[0]);if(q3<=r3){k.push(i.shift());}else{k.push(j.shift());}}while(i.length){k.push(i.shift());}while(j.length){k.push(j.shift());}return k;}
function R(i,j,k){var q3=z(i,j)[k];if(q3){return $(i,q3);}return"";}
function U(i,j,k){var q3=z(i,j)[k];return q(i,q3);}
function V(i,j,k){var q3=B(i,j)[k];if(q3&&q3.Title){return q3.Title.String;}return"";}
function W(i,j,k){var q3=j.filter(E);q3=P(q3);if(!q3||!q3.length||!q3.length>0){return"";}return q(i,q3[0]);}
function X(i,j,k,q3){var r3=B(i,j)[k];if(!r3){return"";}var s3=i.getSetting('ovpCardProperties');var t3=s3.getProperty("/entityType");var u3=s3.getProperty("/metaModel");return _(i,r3,t3,u3,q3);}
function Y(i,j,k){var q3=B(i,j)[k];if(q3&&q3.Criticality){return true;}}
function Z(i,j,k){var q3=B(i,j)[k];var r3=q3.Criticality.Path;return"{path:'"+r3+"'}";}
function _(i,j,k,q3,r3){if(!j||!j.Value){return"";}var s3=i.getSetting('ovpCardProperties');var t3=false;if(s3){var u3=s3.getProperty("/ignoreSapText");t3=u3==undefined?t3:u3;}var v3=q3.getData()["$Annotations"][k.$Type+"/"+j.Value.$Path];var w3=false;if(t3==true){if(v3&&(v3["@com.sap.vocabularies.Analytics.v1.Measure"]||v3["sap:aggregation-role"]=="measure")){w3=true;}}if(!w3&&v3){var x3;if(v3["com.sap.vocabularies.Common.v1.Text"]){x3=v3["com.sap.vocabularies.Common.v1.Text"]?v3["com.sap.vocabularies.Common.v1.Text"]:v3["com.sap.vocabularies.Common.v1.Text"].$Path;}else if(v3["sap:text"]){x3=v3["sap:text"];}if(x3){j={Value:{$Path:x3}};}}return $(i,j,r3);}
function $(i,j,k,q3){if(j.Value.Apply){return O.format(i,j.Value);}var r3=i.getSetting('ovpCardProperties');var s3=r3.getProperty("/entityType");var t3=r3.getProperty("/metaModel");return b1(i,j,s3,t3,k,q3);}
$.requiresIContext=true;
function a1(i,j,k,q3){if((!k)||(typeof q3!=='string')){return q3;}var r3=k["@"+A.TEXT];if(!r3){return q3;}var s3,t3;s3=k["@"+A.TEXT+"@"+A.TEXT_ARRANGEMENT];t3=s3&&s3.$EnumMember;if(!t3){s3=r3&&r3["@"+A.TEXT_ARRANGEMENT];t3=s3&&s3.$EnumMember;}if(!t3){s3=j&&j[A.TEXT_ARRANGEMENT];t3=s3&&s3.$EnumMember;}if(!t3){return q3;}var u3=O.format(r3,{context:i});if(!u3||u3===" "){return q3;}var v3;switch(t3){case T.TEXT_FIRST:v3=u3+" ("+q3+")";break;case T.TEXT_LAST:v3=q3+" ("+u3+")";break;case T.TEXT_ONLY:v3=u3;break;case T.TEXT_SEPARATE:v3=q3+" ("+u3+")";break;default:v3=q3;break;}return v3;}
function b1(j,k,q3,r3,s3,t3,u3){if(k.Value.Apply){return O.format(j,k.Value);}var v3=k.Value.$Path?k.Value.$Path:k.Value.String;var w3=c1(r3,q3,k.Value.$Path),x3="",y3,z3;var A3=j.getSetting("ovpCardProperties");var B3=A3&&A3.getProperty("/contentFragment");if(!t3){if(k.Value.$Path&&k.Value.$Path.split("/").length>1){w3=h1(r3,q3,k.Value.$Path);}if(!w3){return"";}if(w3&&(w3.$Type==='Edm.DateTime'||w3.$Type==='Edm.DateTimeOffset')){var C3={'relative':true,'relativeScale':'auto'},D3=A3&&A3.getProperty("/showDateInRelativeFormat");if(D3!==undefined&&!D3){C3={'style':'medium'};}z3={dateFormat:C3,bUTC:w3.$Type==='Edm.DateTime'?true:false};y3="sap.ovp.cards.AnnotationHelper.formatDate";x3=d1([k.Value.$Path?k.Value.$Path:v3.split("/")[v3.split("/").length-1]],y3,z3);}else if((k.ValueFormat&&(k.ValueFormat.NumberOfFractionalDigits>=0))||w3["scale"]){var E3=(k.ValueFormat&&k.ValueFormat.NumberOfFractionalDigits)?k.ValueFormat.NumberOfFractionalDigits:0,F3;var G3=(k.ValueFormat&&k.ValueFormat.ScaleFactor&&k.ValueFormat.ScaleFactor.$Decimal);if(w3["@Org.OData.Measures.V1.ISOCurrency"]){F3=w3["@Org.OData.Measures.V1.ISOCurrency"].$Path?w3["@Org.OData.Measures.V1.ISOCurrency"].$Path:w3["@Org.OData.Measures.V1.ISOCurrency"];}else if(w3["@Org.OData.Measures.V1.Unit"]){F3=w3["@Org.OData.Measures.V1.Unit"].$Path?w3["@Org.OData.Measures.V1.Unit"].$Path:w3["@Org.OData.Measures.V1.Unit"];}else if(w3["@sap:unit"]){F3=w3["@sap:unit"];}var H3=F3?r3.getProperty("/"+q3.$Type)[F3]:null,I3=[k.Value.$Path?k.Value.$Path:v3.split("/")[v3.split("/").length-1]];if(E3>2){E3=2;}z3={numberOfFractionalDigits:E3,scaleFactor:G3};if(w3["@Org.OData.Measures.V1.ISOCurrency"]){var J3=w3["@Org.OData.Measures.V1.ISOCurrency"];if(J3.$Path){y3="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency";I3.push(J3.$Path);}else if(J3.String){z3.currencyString=J3.String;y3="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency";}}else if(H3&&(H3["Org.OData.Measures.V1.ISOCurrency"]||H3["sap:semantics"]==="currency-code")){y3="sap.ovp.cards.v4.V4AnnotationHelper.formatCurrency";I3.push(F3);}else{y3="sap.ovp.cards.v4.V4AnnotationHelper.formatNumberCalculation";}x3=d1(I3,y3,z3);}else{if(u3){x3=O.format(k.Value,{context:j});}else{var K3=O.format(k.Value,j.getModel()?{context:j}:{context:j.getInterface(0)});var L3=K3.split(",");var M3=[];if(L3.length>1){for(var i=0;i<L3.length;i++){if(L3[i].indexOf("path:")>=0||L3[i].indexOf("type:")>=0){M3.push(L3[i]);}}if(M3.length>0){x3=x3+M3.join(',');if(x3.substring(x3.length-1)!=="}"){x3=x3+"}";}}}else{x3=K3;}}}if(B3){x3=a1(j,q3,w3,x3);}if(w3&&w3["@Org.OData.Measures.V1.Unit"]){var N3=w3["@Org.OData.Measures.V1.Unit"];if(N3.Path){x3+=(" "+d1([N3.Path]));}else if(N3.String){if(N3.String!=="%"){x3+=" ";}x3+=N3.String;}}}if(!s3){if(w3["@Org.OData.Measures.V1.ISOCurrency"]){var J3=w3["@Org.OData.Measures.V1.ISOCurrency"];if(J3.$Path){x3+=(" "+d1([J3.$Path]));}else if(J3){x3+=(" "+J3);}}}if(x3[0]===" "){x3=x3.substring(1);}x3=x3.replace("\\","");x3=x3.replace("\\","");x3=x3.replace("Unsupported: ","");x3=x3.replace("$P","p");return x3;}
function c1(i,j,k){var q3=i.getData().$Annotations[j.$Type+"/"+k];var r3=i.getObject("/"+j.$Type.split(".")[1]+"/"+k);var s3=l.merge(true,{},q3,r3);return s3;}
function d1(j,k,q3,r3){var s3="",t3=j.length;if(t3>1||q3){s3="{parts:[";for(var i=0;i<t3;i++){if(r3){s3+=("{path: '"+j[i]+"',type:'sap.ui.model.odata.type.Decimal'}"+(((i===t3-1)&&!q3)?"]":", "));}else{s3+=("{path: '"+j[i]+"'}"+(((i===t3-1)&&!q3)?"]":", "));}}if(q3){var u3="{value:"+JSON.stringify(q3)+", model: 'ovpCardProperties'}";s3+=u3+"]";}}else{s3="{path: '"+j[0]+"'";}s3+=(k?(", formatter: '"+k+"'"):"")+"}";return s3;}
function e1(){var i=arguments[arguments.length-1],j=arguments[0];var k=N.getFloatInstance({style:'short',showMeasure:false,shortRefNumber:i.scaleFactor,minFractionDigits:i.numberOfFractionalDigits,maxFractionDigits:i.numberOfFractionalDigits});if(typeof j=="string"){j=N.getIntegerInstance().parse(j);}return k.format(Number(j));}
function f1(){var i=arguments[arguments.length-1],j=arguments[0];var k=D.getInstance(i.dateFormat);if(!j){j="";return j;}return k.format(new Date(j),i.bUTC);}
function g1(){var i=arguments[arguments.length-1],j=arguments[0],k=arguments[1];var q3="";var r3=N.getCurrencyInstance({style:'short',showMeasure:false,shortRefNumber:i.scaleFactor,minFractionDigits:i.numberOfFractionalDigits,maxFractionDigits:i.numberOfFractionalDigits});if(typeof j=="string"){j=N.getIntegerInstance().parse(j);}if(k){q3=r3.format(j,k);}else{q3=i.currencyString?r3.format(j,i.currencyString):r3.format(j);}return q3;}
function h1(j,k,q3){var r3=q3.split("/");if(r3.length>1){for(var i=0;i<(r3.length-1);i++){k=j.getProperty("/"+k.$Type)[r3[i]];}return c1(j,k,r3[r3.length-1]);}}
function i1(i,j,k){var q3=B(i,j);var r3=n.StateValues;var s3=q3[k];if(!s3){return r3.None;}if(s3.Criticality){return m1(i,s3,r3);}return o1(i,s3,r3);}
function j1(i,j,k){var q3=B(i,j);if(q3&&q3.length){var r3=q3[0];if(r3&&(r3.Criticality||r3.CriticalityCalculation)){return true;}}return false;}
function k1(i,j,k){if(j1(i,j,k)){return'';}return'sapUiChartPaletteQualitativeHue1';}
k1.requiresIContext=true;
function l1(i,j,k){var q3=B(i,j),r3=n.ColorValues;var s3=r3.None;if(q3.length>k){var t3=q3[k];if(t3&&t3.Criticality){s3=m1(i,t3,r3);}else{s3=o1(i,t3,r3);}}return s3;}
function m1(i,j,k){var q3=k.None;var r3;var s3=j.Criticality;if(s3){r3="'{'= ({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Negative'') || ({0} === ''1'') || ({0} === 1) ? ''"+k.Negative+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Critical'') || ({0} === ''2'') || ({0} === 2) ? ''"+k.Critical+"'' : "+"({0} === ''com.sap.vocabularies.UI.v1.CriticalityType/Positive'') || ({0} === ''3'') || ({0} === 3) ? ''"+k.Positive+"'' : "+"''"+k.None+"'' '}'";if(s3.$Path){var t3='$'+O.format(s3,{context:i});q3=f(r3,t3);}else if(s3.$EnumMember){var u3="'"+s3.$EnumMember+"'";q3=f(r3,u3);}else{L.warning("Case not supported, returning the default Neutral state");}}else{L.warning("Case not supported, returning the default Neutral state");}return q3;}
function n1(i,j,k){var q3=B(i,j);var r3="None";if(q3.length>k){var s3=q3[k];if(s3&&s3.Criticality&&s3.Criticality.Path){r3=Z(i,j,k);}else{r3=o1(i,s3,n.StateValues);r3=v(r3);}}return r3;}
function o1(i,j,k,q3){var r3=k.None;if(j.Criticality){r3=u(j.Criticality,k);}else if(j.CriticalityCalculation&&j.Value&&j.Value&&j.Value.$Path){r3=p1(i,j,k,q3);}return r3;}
function p1(i,j,k,q3){var r3=H1(j.Value,q3);var s3=j.CriticalityCalculation.ImprovementDirection.$EnumMember;var t3=H1(j.CriticalityCalculation.DeviationRangeLowValue,q3);var u3=H1(j.CriticalityCalculation.DeviationRangeHighValue,q3);var v3=H1(j.CriticalityCalculation.ToleranceRangeLowValue,q3);var w3=H1(j.CriticalityCalculation.ToleranceRangeHighValue,q3);var x3=r1(t3);var y3=r1(u3);var z3=r1(v3);var A3=r1(w3);var B3={"deviationLow":t3,"deviationHigh":u3,"toleranceLow":v3,"toleranceHigh":w3,"bIsDeviationLowBinding":x3,"bIsDeviationHighBinding":y3,"bIsToleranceLowBinding":z3,"bIsToleranceHighBinding":A3,"sImprovementDirection":s3,"oCriticalityConfigValues":k};var C3="{value:"+JSON.stringify(B3)+", model: 'ovpCardProperties'}";var D3="parts: ["+r3;D3+=x3?","+t3:"";D3+=y3?","+u3:"";D3+=z3?","+v3:"";D3+=A3?","+w3:"";D3+=","+C3;D3+="]";var E3="sap.ovp.cards.v4.V4AnnotationHelper.formatColor";return"{"+D3+", formatter: '"+E3+"'}";}
function q1(){var i=arguments[arguments.length-1];var j=1;return x(arguments[0],i.sImprovementDirection,i.bIsDeviationLowBinding?parseFloat(arguments[j++].split(",").join("")):i.deviationLow,i.bIsDeviationHighBinding?parseFloat(arguments[j++].split(",").join("")):i.deviationHigh,i.bIsToleranceLowBinding?parseFloat(arguments[j++].split(",").join("")):i.toleranceLow,i.bIsToleranceHighBinding?parseFloat(arguments[j++].split(",").join("")):i.toleranceHigh,i.oCriticalityConfigValues);}
function r1(i){return(typeof i==="string")&&i.charAt(0)==="{";}
function s1(i,j,k){var q3="";var r3=k.split("/");if(r3.length>1){r3.pop();q3=r3.join("/");}return q3;}
function t1(i){var j;if(i&&typeof i.getData==='function'){var k=i.getData();if(k.tabs){var q3=0;var r3=k.selectedKey;if(r3&&k.tabs.length>=r3){q3=r3-1;}j=k.tabs[q3].mFilterPreference;}else{j=k.mFilterPreference;}}return!!j;}
function u1(j,k){var q3=j.getSetting('ovpCardProperties');var r3=q3.getProperty("/addODataSelect");var s3=q3.getProperty("/metaModel");var t3=s3.getData();var u3=k;var v3,w3,x3,y3;if(q3.getProperty('/selectionAnnotationPath')){v3="@"+q3.getProperty('/selectionAnnotationPath');w3=t3["$Annotations"][u3.$Type][v3];}if(q3.getProperty('/presentationAnnotationPath')){x3=q3.getProperty('/presentationAnnotationPath');x3="@"+x3;y3=t3["$Annotations"][u3.$Type][x3];}var z3="/"+q3.getProperty("/entitySet");var A3=Array.prototype.slice.call(arguments,2);var B3=j.getSetting('ovpCardProperties'),C3=B3.getProperty('/parameters');if(w3||!!C3){if((w3&&w3.Parameters&&w3.Parameters.length>0)||!!C3){z3=E2(j.getSetting('dataModel'),k,w3,C3);}}if(q3.getProperty("/cardLayout")&&q3.getProperty("/cardLayout/noOfItems")){var D3="{path: '"+z3+"', length: "+ +(q3.getProperty("/cardLayout/noOfItems"));}else{var D3="{path: '"+z3+"', length: "+I1(q3);}var E3=[];if(r3){E3=w1(j,s3,u3,A3);var F3=q3.getProperty("/template");if(F3!="sap.ovp.cards.charts.analytical"&&F3!="sap.ovp.cards.charts.smart.chart"){var G3=z1(y3);for(var i=0;i<G3.length;i++){if(E3.indexOf(G3[i])===-1){E3.push(G3[i]);}}}}var H3=v1(s3,u3.$Type,A3);var I3=t1(q3);if(I3||E3.length>0||H3.length>0){D3=D3+", parameters: {";}if(E3.length>0||H3.length>0){if(E3.length>0){D3=D3+"select: '"+E3.join(',')+"'";}if(H3.length>0){if(E3.length>0){D3=D3+", ";}D3=D3+"$expand: '"+H3.join(',')+"'";}if(I3){D3=D3+", ";}}if(I3){D3=D3+"custom: {cardId: '"+q3.getProperty("/cardId")+"'}";}if(I3||E3.length>0||H3.length>0){D3=D3+", $count: true}";}else{D3=D3+", parameters: {$count:true}";}var J3=y1(q3,y3);if(J3.length>0){D3=D3+", sorter:"+JSON.stringify(J3);}var K3=D1(q3,w3);if(K3.length>0){D3=D3+", filters:"+JSON.stringify(K3);}D3=D3+"}";return D3;}
u1.requiresIContext=true;
function v1(k,q3,r3){var s3=[];var t3,u3;for(var i=0;i<r3.length;i++){if(!r3[i]){continue;}t3=k.getData()["$Annotations"][q3]["@"+r3[i]];t3=t3?t3:[];for(var j=0;j<t3.length;j++){if(t3[j].Value&&t3[j].Value.$Path){u3=s1(k,q3,t3[j].Value.$Path);if(u3&&s3.indexOf(u3)===-1){s3.push(u3);}}}}return s3;}
function w1(q3,r3,s3,t3){var u3=[];var v3,w3,x3;for(var i=0;i<t3.length;i++){if(!t3[i]){continue;}v3=s3.$Type.split(".")[1]+"/@"+t3[i];w3=q3.getModel(0);var y3={};if(q3&&q3.bDummyContext){m(y3,q3,w3,true);}else{y3=q3;}x3=w3.getObject("/"+v3);if(!x3){x3=[];}else if(c(x3)){if(x3.Data){x3=x3.Data;}else{x3=[];}}var z3;var A3;var B3;var C3;for(var j=0;j<x3.length;j++){A3=[];z3=x3[j];B3="";C3=z3.$Type;if(C3==="com.sap.vocabularies.UI.v1.DataField"){B3=b1(y3.getInterface(0),z3,s3,r3,undefined,undefined,true);}else if(C3==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var D3=J(s3.$path,z3);B3=_(y3,r3.getProperty(D3),s3,r3);var E3=H(r3.getProperty(D3));if(E3&&E3.length>0){B3+=E3;}}else if(C3==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&z3.Url){var F3;if(!z3.Url.UrlRef){F3=O.format(y3,z3.Url);}if(F3&&F3.substring(0,2)==="{="){B3=F3;}}if(B3){var G3=O.format(z3.Value,{context:y3.getInterface(0)});if(B3.indexOf("(")<0&&B3!==G3){B3=[].concat(G3,B3).join(" ");}A3=x1(B3);}if(A3&&A3.length>0){var H3;for(var k=0;k<A3.length;k++){H3=A3[k];if(!u3[H3]){u3[H3]=true;var I3={};I3[H3]=c1(r3,s3,H3);var J3=N2(H3,I3);if(J3&&J3!==H3){u3[J3]=true;}var K3=g3(r3,s3,H3);if(K3&&K3!==H3){u3[K3]=true;}}}}}}return Object.keys(u3);}
function x1(j){var i,k=0,q3=j.length,r3="",s3;for(i=0;i<q3;i++){s3=j.charAt(i);if(!s3){return;}switch(s3){case"{":k++;break;case"}":k--;break;default:if(k<=0){continue;}break;}r3+=s3;}j=r3;var t3=/\${([a-zA-Z0-9\_|\/]*)/g;var u3=/[^[{]*[a-zA-Z0-9\_]/g;var v3=/path *\: *\'([a-zA-Z0-9\_]+)*\'/g;var w3,x3,y3=[];if(j.indexOf("{parts:[")!==-1){j=j.replace("{parts:[","");j=j.replace("]","");j=j.replace(j.lastIndexOf("}",""));}if(j.substring(0,2)==="{="){w3=t3;x3=1;}else if(j.indexOf("path")!==-1){if(j.indexOf("{value")>0){var z3=0;var i=j.indexOf("{value")+5;var A3;while(i<q3){if(j[i]==="}"&&z3===0){A3=i;break;}if(j[i]==="{"){z3+=1;}if(j[i]==="}"){z3-=1;}i++;}j=j.slice(0,j.indexOf("{value"))+j.slice(A3);}var B3=u3.exec(j);while(B3){if(B3[0].indexOf("path")===-1&&B3[0].indexOf("@i18n")!==0&&B3[0].indexOf("model: 'ovpCardProperties'")<=-1){y3.push(B3[0]);}B3=u3.exec(j);}w3=v3;x3=1;}else{w3=u3;x3=0;}var C3=w3.exec(j);while(C3){if(C3[x3]&&C3[x3].indexOf("@i18n")!==0){y3.push(C3[x3]);}C3=w3.exec(j);}return y3;}
function y1(j,k){var q3=[];var r3,s3;var t3=j.getProperty("/sortBy");if(t3){var u3=j.getProperty('/sortOrder');if(u3&&u3.toLowerCase()!=='descending'){s3=false;}else{s3=true;}r3={path:t3,descending:s3};q3.push(r3);}var v3=k&&k.SortOrder||undefined;var w3,t3;if(v3){for(var i=0;i<v3.length;i++){w3=v3[i];t3=w3.Property.$PropertyPath;s3=E1(w3.Descending,true);r3={path:t3,descending:s3};q3.push(r3);}}return q3;}
function z1(j){var k=[];var q3=j&&j.RequestAtLeast||undefined;if(q3){for(var i=0;i<q3.length;i++){if(q3[i].PropertyPath){k.push(q3[i].PropertyPath);}}}return k;}
function A1(i){var j=i.getProperty('/entityType');var k=j[i.getProperty('/selectionAnnotationPath')];return{filters:D1(i,k),parameters:C1(k)};}
function B1(j){if(!j){return;}var k=j.getProperty('/entityType');var q3=k[j.getProperty('/presentationAnnotationPath')];var r3=y1(j,q3);var s3=[];var i,t3=r3.length;for(i=0;i<t3;i++){if(!r3[i].path){continue;}s3.push({Property:r3[i].path,Descending:r3[i].descending});}if(s3.length>0){return{SortOrder:s3};}}
function C1(j){var k,q3=[];if(!j||!j.Parameters){return q3;}var r3=j.Parameters.length;for(var i=0;i<r3;i++){k=j.Parameters[i];if(!k.PropertyName||!k.PropertyName.PropertyPath){continue;}if(!k.PropertyValue){L.error("Missing value for parameter "+k.PropertyName.PropertyPath);continue;}q3[q3.length]={path:k.PropertyName.PropertyPath,value:G1(k.PropertyValue)};}return q3;}
function D1(k,q3){var r3=[];var s3;var t3=k.getProperty("/filters");if(t3){r3=r3.concat(t3);}if(q3&&q3.SelectOptions){s3=q3.SelectOptions;}else{s3=q3;}var u3,v3,w3;if(s3){for(var i=0;i<s3.length;i++){u3=s3[i];v3=u3.PropertyName.$PropertyPath;for(var j=0;j<u3.Ranges.length;j++){w3=u3.Ranges[j];if(w3.Sign.$EnumMember){var x3={path:v3,operator:w3.Option.$EnumMember.split("/")[1],value1:G1(w3.Low),value2:G1(w3.High),sign:w3.Sign.$EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(x3.sign==="E"&&x3.operator!==F.EQ){L.error("Exclude sign is supported only with EQ operator");continue;}if(x3.sign==="E"&&x3.operator===F.EQ){x3.operator=F.NE;x3.sign="I";}if(x3.operator==="CP"&&x3.sign==="I"){var y3=F.Contains;var z3=x3.value1;if(z3){var A3=z3.indexOf('*');var B3=z3.lastIndexOf('*');if(A3>-1){if((A3===0)&&(B3!==(z3.length-1))){y3=F.EndsWith;z3=z3.substring(1,z3.length);}else if((A3!==0)&&(B3===(z3.length-1))){y3=F.StartsWith;z3=z3.substring(0,z3.length-1);}else{z3=z3.substring(1,z3.length-1);}}}x3.operator=y3;x3.value1=z3;}r3.push(x3);}}}}return r3;}
function E1(i,j){if(i&&i.Boolean){if(i.Boolean.toLowerCase()==="true"){return true;}else if(i.Boolean.toLowerCase()==="false"){return false;}}else if(i&&i.Bool){if(i.Bool.toLowerCase()==="true"){return true;}else if(i.Bool.toLowerCase()==="false"){return false;}}return j;}
function F1(i){var j;if(i){if(i.String){j=Number(i.String);}else if(i.Int){j=Number(i.Int);}else if(i.$Decimal){j=Number(i.$Decimal);}else if(i.Double){j=Number(i.Double);}else if(i.Single){j=Number(i.Single);}else if(typeof i==="number"){return i;}}return j;}
function G1(i){var j;if(i){if(i.String||i.String===""){j=i.String;}else if(typeof(i)=="string"){j=i;}else if(i.Boolean||i.Bool){j=E1(i);}else if(i.DateTime){j=i.DateTime;}else if(i.DateTimeOffset){j=i.DateTimeOffset;}else{j=F1(i);}}return j;}
function H1(i,j){if(i){if(i.$Path){return j?"{path:'"+i.$Path+"Agg"+"', type:'sap.ui.model.odata.type.Decimal'}":"{path:'"+i.$Path+"'}";}else{return G1(i);}}else{return"";}}
function I1(i){var j=i.getProperty('/contentFragment');var k=i.getProperty('/listType');var q3=i.getProperty('/listFlavor');var r3;var s3="desktop";if(a.system.phone){s3="phone";}else if(a.system.tablet){s3="tablet";}if(j=="sap.ovp.cards.list.List"){if(k=="extended"){if(q3=="bar"){r3=I["List_extended_bar"];}else{r3=I["List_extended"];}}else if(q3=="bar"){r3=I["List_condensed_bar"];}else{r3=I["List_condensed"];}}else if(j=="sap.ovp.cards.table.Table"){r3=I["Table"];}else if(j=="sap.ovp.cards.stack.Stack"){if(i.getProperty('/objectStreamCardsNavigationProperty')){r3=I["Stack_complex"];}else{r3=I["Stack_simple"];}}if(r3){return r3[s3];}return 5;}
function J1(i){var j=i.getObject();var k=B(i,j,true);var q3=k.map(function(r3){if(r3&&r3.Value&&r3.Value.$Path){return r3.Value.$Path;}else if(r3&&r3.fn&&r3.fn.$Path){return r3.fn.$Path;}});j.filter(function(r3,s3){if(r3.$Type==="com.sap.vocabularies.UI.v1.DataField"&&q3.indexOf(r3.Value.$Path)>-1){j.splice(s3,1);}});return i.sPath;}
J1.requiresIContext=true;
function K1(i,j){if(j.charAt(0)==='/'||j.indexOf("http")===0){return j;}var k=i.getModel(0).getProperty("/baseUrl");if(k){return k+"/"+j;}return j;}
K1.requiresIContext=true;
function L1(i,j){var k=B(i,j);return k.length;}
L1.requiresIContext=true;
function M1(i,j){return O1(i,j,0);}
M1.requiresIContext=true;
function N1(i,j){return O1(i,j,1);}
N1.requiresIContext=true;
function O1(i,j,k){var q3=B(i,j),r3=q3[k];if(r3&&r3.Value&&r3.Value.$Path){return r3.Value.$Path;}return"";}
function P1(i,j){return U(i,j,0);}
P1.requiresIContext=true;
function Q1(i,j){return U(i,j,1);}
Q1.requiresIContext=true;
function R1(i,j){return U(i,j,2);}
R1.requiresIContext=true;
function S1(i,j){return U(i,j,3);}
S1.requiresIContext=true;
function T1(i,j){return U(i,j,4);}
T1.requiresIContext=true;
function U1(i,j,k){return R(i,j,k);}
U1.requiresIContext=true;
function V1(i,j,k){return X(i,j,k);}
V1.requiresIContext=true;
function W1(i,j,k,q3){var r3=L1(i,j);if(r3>0){return V1(i,j,k);}else{return U1(i,j,q3);}}
W1.requiresIContext=true;
function X1(i,j,k){return q2(i,j,k);}
X1.requiresIContext=true;
function Y1(i,j){return V(i,j,0);}
Y1.requiresIContext=true;
function Z1(i,j){return V(i,j,1);}
Z1.requiresIContext=true;
function $1(i,j){return V(i,j,2);}
$1.requiresIContext=true;
function _1(i,j){return W(i,j,0);}
_1.requiresIContext=true;
function a2(j,k){for(var i=0;i<k.length;i++){var q3=k[i];if(q3.$Type==="com.sap.vocabularies.UI.v1.DataField"){if(q3.IconUrl&&q3.IconUrl.String){return q3.IconUrl.String;}if(q3.IconUrl&&q3.IconUrl.$Path){return O.format(q3.IconUrl,{context:j});}}}}
a2.requiresIContext=true;
function b2(i,j,k){var q3="";var r3;if(Array.isArray(j)){r3=B(i,j)[k];}else{var s3=Object.assign({},j);var t3=Object.assign({},i);r3=o2(t3,s3);}if(!r3||!r3.Value){return q3;}var u3=i.getSetting('ovpCardProperties');var v3=u3&&u3.getProperty("/entityType");var w3=u3&&u3.getProperty("/metaModel");var x3=w3&&w3.getData()["$Annotations"][v3.$Type+"/"+r3.Value.$Path];var y3=x3&&x3["@Org.OData.Measures.V1.ISOCurrency"];if(y3&&y3.$Path){q3+=(" "+d1([y3.$Path]));}else if(y3){q3+=(" "+y3);}return q3;}
b2.requiresIContext=true;
function c2(i,j,k,q3){return X(i,j,k,q3);}
c2.requiresIContext=true;
function d2(i,j){return i1(i,j,0);}
d2.requiresIContext=true;
function e2(i,j){return l1(i,j,0);}
e2.requiresIContext=true;
function f2(i,j){return i1(i,j,1);}
f2.requiresIContext=true;
function g2(i,j){return i1(i,j,2);}
g2.requiresIContext=true;
function h2(i,j){return n1(i,j,0);}
h2.requiresIContext=true;
function i2(i){var j={};j.$EnumMember="None";if(Number(i)===1){j.$EnumMember="Negative";}else if(Number(i)===2){j.$EnumMember="Critical";}else if(Number(i)===3){j.$EnumMember="Positive";}return u(j,n.ColorValues);}
function j2(i,j){if(j&&j.Criticality&&j.Criticality.$Path){return"{parts: [{path:'"+j.Criticality.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.kpiValueCriticality'}";}else{return o1(i,j,n.ColorValues,true);}}
j2.requiresIContext=true;
function k2(i,j){return Y(i,j,0);}
k2.requiresIContext=true;
function l2(i,j){var k=B(i,j)[0];if(k&&(k.Criticality||k.CriticalityCalculation)){return true;}return false;}
l2.requiresIContext=true;
function m2(i,j){return Y(i,j,1);}
m2.requiresIContext=true;
function n2(i,j){return Y(i,j,2);}
n2.requiresIContext=true;
function o2(i,j){var k=i.getPath(0);var q3=k.slice(0,k.lastIndexOf("/"));q3=q3.slice(0,q3.lastIndexOf("/"));var r3=J(q3,j);j=i.getModel(0).getProperty(r3);return j;}
function p2(i,j){if(!j){return"";}return $(i,j);}
p2.requiresIContext=true;
function q2(i,j,k,q3){var r3;var s3=q3==undefined?k:z(i,k)[q3];var t3=i.getSetting('ovpCardProperties');var u3=t3.getProperty("/metaModel");var v3=j.$Type;var w3=u3.getData()["$Annotations"][v3+"/"+s3.Value.$Path];if(w3){r3=w3["@com.sap.vocabularies.Common.v1.SemanticObject"];if(r3){return O.format(r3,i.getModel()?{context:i}:{context:i.getInterface(0)});}else{return"";}}}
function r2(i,j,k){var q3=k===undefined?j.Value.$Path:j[k].Value.$Path;var r3=(q3.indexOf("/")!=-1)?q3.split('/')[0]:"";return r3;}
r2.requiresIContext=true;
function s2(i,j){var k=i.getSetting('ovpCardProperties');var q3=k.getProperty("/metaModel");var r3=q3.getData()["$Annotations"][j.$Type];if(r3["@com.sap.vocabularies.Communication.v1.Contact"]){return true;}return false;}
s2.requiresIContext=true;
function t2(i,j,k){if(!j){return"";}var q3=i.getSetting('ovpCardProperties');var r3=q3.getProperty("/entityType");var s3=q3.getProperty("/metaModel");var t3=Object.assign({},j);var u3=Object.assign({},i);j=o2(u3,t3);return _(i,j,r3,s3,k);}
t2.requiresIContext=true;
function u2(i,j){var k=Object.assign({},j);var q3=Object.assign({},i);var r3="None",s3=n.StateValues;j=o2(q3,k);if(j&&j.Criticality){r3=m1(i,j,s3);}else{r3=o1(i,j,s3);}return r3;}
u2.requiresIContext=true;
function v2(i,j){var k=Object.assign({},j);var q3=Object.assign({},i);j=o2(q3,k);if(j&&j.Criticality){return true;}}
v2.requiresIContext=true;
function w2(i,j){var k=Object.assign({},j);var q3=Object.assign({},i);var r3=i.getSetting('ovpCardProperties');var s3=r3.getProperty("/entityType");var t3=r3.getProperty("/metaModel");j=o2(q3,k);if(!j){return;}var u3=t3.getProperty("/"+s3.$Type)[j.Value.$Path];if(j&&u3&&u3.$Type=="Edm.String"&&(j.Criticality||j.CriticalityCalculation)){return'Center';}if(u3&&((u3.$Type=="Edm.DateTime")||(u3.$Type=="Edm.DateTimeOffset"))){return'Right';}}
w2.requiresIContext=true;
function x2(i,j){var k=Object.assign({},j);var q3=Object.assign({},i);j=o2(q3,k);var r3="None";if(j&&j.Criticality&&j.Criticality.Path){r3="{path:'"+j.Criticality.Path+"'}";}else{r3=o1(i,j,n.StateValues);r3=v(r3);}return r3;}
x2.requiresIContext=true;
function y2(j,k){var q3;for(var i=0;i<k.length;i++){q3=k[i];if(q3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||q3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||q3.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1;}}return 0;}
y2.requiresIContext=true;
function z2(i,j){var k=B(i,j)[0];if(k&&k.Value&&k.Value.$Path){var q3=i.getPath(0).substr(0,i.getPath(0).lastIndexOf("/")+1);var r3=i.getModel(0);var s3=r3.getData(k.Value.$Path);var t3=q3.substr(1,q3.length-2);if(s3&&s3[t3][k.Value.$Path]["Org.OData.Measures.V1.Unit"]){return s3["Org.OData.Measures.V1.Unit"].String==="%";}}return false;}
z2.requiresIContext=true;
function A2(i){var j=i.getObject();var k=i.getModel();var q3=k.getProperty("/metaModel");var r3="/"+k.getProperty("/entitySet");var s3=q3.getObject(r3);j="/"+s3.$Type+"/@"+j;return q3.createBindingContext(j);}
function B2(i,j){if(i==='Edm.String'){var k=j.PropertyValue.String;return k;}return j.PropertyValue.String;}
function C2(i,j,k,q3){var r3="";var s3=[];if(q3&&q3.Parameters){i.parameters.forEach(function(u3){q3.Parameters.forEach(function(v3){var w3=v3.PropertyName.PropertyPath.split("/");w3=w3[w3.length-1];if(w3===u3){var x3=B2(i['parameterType'][u3],v3);x3=d(j.formatValue(x3,i['parameterType'][u3]));s3.push(w3+'='+x3);}});});}else{r3="/"+k.name;L.error("SelectionParameters","There are no parameters to resolve");return r3;}try{r3='/'+i.entitySetName+'('+s3.join(',')+')/'+i.navPropertyName;}catch(t3){r3="/"+k.name;L.error("getEntitySetPathWithParameters","binding path with parameters failed - "+t3||t3.message);}return r3;}
function D2(j,k,q3,r3,s3){var t3="";var u3=new o.Model(o.Model.ReferenceByModel(j));var v3=u3.findQueryResultByName(k.name);var w3=new o.QueryResultRequest(v3);var x3=v3.getParameterization();if(!x3){t3="/"+k.name;return t3;}if(s3){var y3=s3.getAnalyticalParameters();}if(x3){var z3;w3.setParameterizationRequest(new o.ParameterizationRequest(x3));if(q3&&q3.Parameters){e(q3.Parameters,function(){if(this.RecordType==="com.sap.vocabularies.UI.v1.IntervalParameter"){z3=this.PropertyNameFrom.PropertyPath.split("/");w3.getParameterizationRequest().setParameterValue(z3[z3.length-1],this.PropertyValueFrom.String,this.PropertyValueTo.String);}else{z3=this.PropertyName.PropertyPath.split("/");w3.getParameterizationRequest().setParameterValue(z3[z3.length-1],this.PropertyValue.String);}});}else if(r3){e(r3,function(){w3.getParameterizationRequest().setParameterValue(this.path,this.value);});}else if(y3&&y3.length>0){var A3=s3&&s3.getUiState({allFilters:false});var B3=A3?JSON.stringify(A3.getSelectionVariant()):"{}";var q3=new S(B3);for(var C3 in x3.getAllParameters()){for(var i=0;i<y3.length;i++){if(y3[i]&&(y3[i].name==C3)){var D3=y3[i].name;var E3=q3.getParameter(D3);if(!E3){var F3=q3.getSelectOption(D3);E3=F3&&F3[0]&&F3[0].Low;}w3.getParameterizationRequest().setParameterValue(C3,E3);}}}}else{t3="/"+k.name;L.error("SelectionParameters","There are no parameters to resolve");return t3;}}try{t3=w3.getURIToQueryResultEntitySet();}catch(G3){v3=w3.getQueryResult();t3="/"+v3.getEntitySet().getQName();L.error("getEntitySetPathWithParameters","binding path with parameters failed - "+G3||G3.message);}return t3;}
function E2(i,j,k,q3,r3){var s3="";if(M.checkAnalyticalParameterisedEntitySet(i,j.name)){s3=D2(i,j,k,q3,r3);}else{var t3=M.getParametersByEntitySet(i,j.name);var u3=M.getPropertyOfEntitySet(i,j.name);var v3={};if(t3){t3['parameters'].forEach(function(w3){u3.forEach(function(x3){if(x3['name']==w3){v3[w3]=x3['type'];}});});t3['parameterType']=v3;s3=C2(t3,i,j,k);}else{s3="/"+j.name;}}return s3;}
function F2(j,k,ns){var q3=j.getServiceMetadata().dataServices.schema[0].association;for(var i=0;i<q3.length;i++){if(ns+"."+q3[i].name===k){return q3[i];}}}
function G2(i,j){var k=i.filter(function(r3){if(r3.$Type==="com.sap.vocabularies.UI.v1.DataField"){return true;}return false;});var q3=P(k);if(q3){return q3[j];}return;}
function H2(i,j,k){if(!k||!k.length||k.length===0){return false;}k=G2(k,0);return q2(i,j,k);}
H2.requiresIContext=true;
function I2(i,j,k){if(!k||!k.length||k.length===0){return false;}k=G2(k,1);return q2(i,j,k);}
I2.requiresIContext=true;
function J2(i,j){var k=i.filter(function(r3){if(r3.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"&&r3.Target.$AnnotationPath.indexOf("@com.sap.vocabularies.Communication.v1.Contact")!==-1){return true;}return false;});var q3=P(k);if(q3){return q3[j];}return;}
function K2(i){if(!i||!i.length||i.length===0){return false;}var j=J2(i,0);if(j){return true;}return false;}
function L2(i,j,k,q3){var r3;if(k&&k.Value&&k.Value.$Path){r3=k.Value.$Path;}else if(k&&k.Description&&k.Description.Value&&k.Description.Value.$Path){r3=k.Description.Value.$Path;}var s3="";var t3=q3&&q3.Parameters;var u3="";var v3=i.getSetting('ovpCardProperties'),w3=v3.getProperty('/parameters');t3=t3||!!w3;var x3=i.getSetting("dataModel");if(t3){var y3=E2(x3,j,q3,w3);s3+="{path: '"+y3+"'";}else{s3+="{path: '/"+j.$Type.split(".")[1]+"'";}s3+=", length: 1";var z3=i.getSetting('ovpCardProperties');var A3=z3.getProperty("/entityType");var B3=i.getModel(0);var C3=B3.getObject("/"+j.$Type.split(".")[1]+"/");var D3,E3;for(D3 in C3){if(D3.startsWith("$")){continue;}E3=A3.$Type.concat("/",D3);C3[D3].annotations=B3.getData(D3).$Annotations[E3];}var F3=D1(z3,q3);if(F3.length>0){u3+=", filters: "+JSON.stringify(F3);}var G3=[];var H3=x3.oMetaModel.getData().$Annotations;var I3=M2(r3,H3,j.$Type);G3.push("'"+r3+"Agg' : { 'name' : '"+r3+"', 'with' : '"+I3+"'}");if(k&&k.Criticality&&k.Criticality.$Path){I3=M2(k.Criticality.$Path,H3,j.$Type);G3.push("'"+k.Criticality.$Path+"Agg' : { 'name' : '"+k.Criticality.$Path+"', 'with' : '"+I3+"'}");}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.DeviationRangeLowValue&&k.CriticalityCalculation.DeviationRangeLowValue.$Path){I3=M2(k.CriticalityCalculation.DeviationRangeLowValue.$Path,H3,j.$Type);G3.push("'"+k.CriticalityCalculation.DeviationRangeLowValue.$Path+"Agg' : { 'name' : '"+k.CriticalityCalculation.DeviationRangeLowValue.$Path+"', 'with' : '"+I3+"'}");}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ToleranceRangeLowValue&&k.CriticalityCalculation.ToleranceRangeLowValue.$Path){var I3=M2(k.CriticalityCalculation.ToleranceRangeLowValue.$Path,H3,j.$Type);G3.push("'"+k.CriticalityCalculation.ToleranceRangeLowValue.$Path+"Agg' : { 'name' : '"+k.CriticalityCalculation.ToleranceRangeLowValue.$Path+"', 'with' : '"+I3+"'}");}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.DeviationRangeHighValue&&k.CriticalityCalculation.DeviationRangeHighValue.$Path){var I3=M2(k.CriticalityCalculation.DeviationRangeHighValue.$Path,H3,j.$Type);G3.push("'"+k.CriticalityCalculation.DeviationRangeHighValue.$Path+"Agg' : { 'name' : '"+k.CriticalityCalculation.DeviationRangeHighValue.$Path+"', 'with' : '"+I3+"'}");}if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ToleranceRangeHighValue&&k.CriticalityCalculation.ToleranceRangeHighValue.$Path){var I3=M2(k.CriticalityCalculation.ToleranceRangeHighValue.$Path,H3,j.$Type);G3.push("'"+k.CriticalityCalculation.ToleranceRangeHighValue.$Path+"Agg' : { 'name' : '"+k.CriticalityCalculation.ToleranceRangeHighValue.$Path+"', 'with' : '"+I3+"'}");}if(k&&k.TrendCalculation&&k.TrendCalculation.ReferenceValue&&k.TrendCalculation.ReferenceValue.$Path){var I3=M2(k.TrendCalculation.ReferenceValue.$Path,H3,j.$Type);G3.push("'"+k.TrendCalculation.ReferenceValue.$Path+"Agg' : { 'name' : '"+k.TrendCalculation.ReferenceValue.$Path+"', 'with' : '"+I3+"'}");}var J3=t1(v3);var K3=J3?", custom: {cardId: '"+v3.getProperty("/cardId")+"'}":"";var L3="parameters:{'$$aggregation' : {'aggregate' : {"+G3.join(",")+"}}"+K3+"}";return s3+", "+L3+u3+"}";}
L2.requiresIContext=true;
function M2(i,j,k){var q3=j[k+"/"+i];if(q3["@Org.OData.Aggregation.V1.default"]){return q3["@Org.OData.Aggregation.V1.default"].$EnumMember.split("/")[1].toLowerCase();}return"sum";}
function N2(i,j,k){var q3;var r3,s3,t3;for(t3 in j){if(t3!==i){continue;}if(j[t3].annotations&&j[t3].annotations.hasOwnProperty("@Org.OData.Measures.V1.ISOCurrency")){r3=j[t3].annotations["@Org.OData.Measures.V1.ISOCurrency"].$Path;s3=j[t3].annotations["@Org.OData.Measures.V1.ISOCurrency"].$String;if(r3){return r3;}else{return(k?s3:"");}}if(j[t3].annotations&&j[t3].annotations.hasOwnProperty("@Org.OData.Measures.V1.Unit")){r3=j[t3].annotations.hasOwnProperty("@Org.OData.Measures.V1.Unit").$Path;s3=j[t3].annotations["@Org.OData.Measures.V1.Unit"].$String;if(r3){q3=r3;}else{q3=k?s3:"";}if(q3&&q3!="%"){return q3;}else{return null;}}if(j[t3].annotations&&j[t3].annotations.hasOwnProperty("sap:unit")){return j[t3].annotations["sap:unit"];}break;}return null;}
function O2(i){if(!i||!i.Value||!i.Value.$Path){return"";}var j=this.getModel('ovpCardProperties');var k=j.getProperty("/entityType");var q3=j.getProperty("/metaModel");var r3=c1(q3,k,i.Value.$Path);if(r3["Org.OData.Measures.V1.Unit"]){var s3=r3["Org.OData.Measures.V1.Unit"];if(s3.String=="%"){this.getModel("ovpCardProperties").oData.percentageAvailable=true;}}if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=i.ValueFormat.NumberOfFractionalDigits;}var t3={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var u3='sap.ovp.cards.v4.V4AnnotationHelper.KpiValueFormatter';var v3=[i.Value.$Path+"Agg"];return d1(v3,u3,t3,true);}
function P2(){var i=arguments[arguments.length-1],k=arguments[0];k=k?parseInt(k.split(",").join(""),10):null;var j=N.getFloatInstance({minFractionDigits:i.NumberOfFractionalDigits,maxFractionDigits:i.NumberOfFractionalDigits,style:"short",showScale:true,shortRefNumber:k});if(i.percentageAvailable){return j.format(Number(k))+" %";}else{return j.format(Number(k));}}
function Q2(i,j){if(!j||!j.Value||!j.Value.$Path||!j.TrendCalculation){return"";}var k=H1(j.Value,true);var q3=H1(j.TrendCalculation.ReferenceValue,true);var r3=H1(j.TrendCalculation.DownDifference,true);var s3=H1(j.TrendCalculation.UpDifference,true);var t3=r1(q3);var u3=r1(r3);var v3=r1(s3);var w3={"referenceValue":q3,"downDifference":r3,"upDifference":s3,"bIsRefValBinding":t3,"bIsDownDiffBinding":u3,"bIsUpDiffBinding":v3};var x3="{value:"+JSON.stringify(w3)+", model: 'ovpCardProperties'}";var y3="parts: ["+k;y3+=t3?","+q3:"";y3+=u3?","+r3:"";y3+=v3?","+s3:"";y3+=","+x3;y3+="]";var z3="sap.ovp.cards.v4.V4AnnotationHelper.formatTrendIcon";return"{"+y3+", formatter: '"+z3+"'}";}
Q2.requiresIContext=true;
function R2(){var i=arguments[arguments.length-1];var j=1;return y(arguments[0],i.bIsRefValBinding?arguments[j++]:i.referenceValue,i.bIsDownDiffBinding?arguments[j++]:i.downDifference,i.bIsUpDiffBinding?arguments[j++]:i.upDifference);}
function S2(i){if(!i||!i.TrendCalculation||!i.TrendCalculation.ReferenceValue){return"";}if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits){this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits=i.ValueFormat.NumberOfFractionalDigits;}if(i.TrendCalculation.ReferenceValue.$Path){return"{parts: [{path:'"+i.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}, {path:'"+i.TrendCalculation.ReferenceValue.$Path+"'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.returnPercentageChange'}";}else{return"{parts: [{path:'"+i.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.returnPercentageChange'}";}}
function T2(k,i){var j,q3,r3,s3,t3=false;if(typeof k=="string"){k=N.getIntegerInstance().parse(k);}if(isNaN(+k)){return"";}if(k==0){s3=i;}else{s3=k;}q3=this.getModel('ovpCardProperties');if(q3.getProperty("/iNumberOfFractionalDigits")){r3=+(q3.getProperty("/iNumberOfFractionalDigits"));}if(q3.getProperty("/bPercentageAvailableForTarget")){t3=true;}if(i){j=i;}else{if(q3.getProperty("/sManifestTargetValue")){j=q3.getProperty("/sManifestTargetValue");}}if(!r3||r3<0){r3=0;}else if(r3>2){r3=2;}if(j){var u3=N.getFloatInstance({minFractionDigits:r3,maxFractionDigits:r3,style:"short",showScale:true,shortRefNumber:s3});if(t3){return u3.format(+(j))+" %";}else{return u3.format(+(j));}}}
function U2(i){if(!i||!i.TrendCalculation||!i.TrendCalculation.ReferenceValue){return"";}if(!i||!i.Value||!i.Value.$Path){return"";}var j=this.getModel('ovpCardProperties');var k=j.getProperty("/entityType");var q3=j.getProperty("/metaModel");if(i&&i.ValueFormat&&i.ValueFormat.NumberOfFractionalDigits){j.setProperty("/iNumberOfFractionalDigits",i.ValueFormat.NumberOfFractionalDigits);}if(i.TrendCalculation.ReferenceValue){if(i.TrendCalculation.ReferenceValue.$Path){var r3=c1(q3,k,i.TrendCalculation.ReferenceValue.$Path);if(r3["Org.OData.Measures.V1.Unit"]){var s3=r3["Org.OData.Measures.V1.Unit"];if(s3.String=="%"){j.setProperty("/bPercentageAvailableForTarget",true);}}return"{parts: [{path:'"+i.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'},{path:'"+i.TrendCalculation.ReferenceValue.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.TargetValueFormatter'}";}if(i.TrendCalculation.ReferenceValue){j.setProperty("/sManifestTargetValue",i.TrendCalculation.ReferenceValue);return"{parts: [{path:'"+i.Value.$Path+"Agg', type:'sap.ui.model.odata.type.Decimal'}], formatter: 'sap.ovp.cards.v4.V4AnnotationHelper.TargetValueFormatter'}";}}}
function V2(k,i){var j,q3,r3;if(typeof k=="string"){k=N.getIntegerInstance().parse(k);}if(isNaN(+k)){return"";}k=+(k);r3=this.getModel('ovpCardProperties');if(r3.getProperty("/iNumberOfFractionalDigits")){j=+(r3.getProperty("/iNumberOfFractionalDigits"));}if(i){q3=+(i);}else{if(r3.getProperty("/sManifestTargetValue")){q3=+(r3.getProperty("/sManifestTargetValue"));}}if(!j||j<0){j=0;}else if(j>2){j=2;}if(q3){var s3=((k-q3)/q3);var t3=N.getPercentInstance({style:'short',minFractionDigits:j,maxFractionDigits:j,showScale:true});return t3.format(s3);}}
function W2(i){if(i&&i.GroupBy&&!(h(i.GroupBy))&&i.GroupBy[0].hasOwnProperty('$PropertyPath')){return true;}else{return false;}}
function X2(j,k){var q3;for(var i=0;j&&i<j.length;i++){if(j[i].value==k){q3=j[i];break;}}return q3?q3.name:null;}
function Y2(i,k){return X2(i,k);}
function Z2(i,k){var j=X2(i,k);return j?j:b.getText("OVP_KEYUSER_LABEL_NO_NAVIGATION");}
function $2(i){var j="";var k=i&&i.GroupBy;if(!k){return j;}var q3=this.getModel('ovpCardProperties').getProperty("/metaModel");var r3=this.getModel('ovpCardProperties').getProperty("/entityType");var s3;if(i.GroupBy.constructor===Array){s3=i.GroupBy;}else if(!i.GroupBy.Collection){return j;}else{s3=i.GroupBy.Collection;}var t3;e(s3,function(){t3=f3(q3,r3,this.$PropertyPath);if(!t3){return;}j+=t3;j+=", ";});if(j[j.length-1]===" "&&j[j.length-2]===","){j=j.substring(0,j.length-2);}return j==""?"":b.getText("By",[j]);}
function _2(i,j,k){var q3=true;var r3=k["SelectOptions"].length-1;if(j.PropertyName.PropertyPath===k["SelectOptions"][r3].PropertyName.PropertyPath){q3=false;}j=[j];var s3=i.getSetting('ovpCardProperties');var t3=s3.getProperty("/entityType");var u3=s3.getProperty("/metaModel");var v3=D1(s3,j);if(v3.length==0){return"";}var w3;var x3;w3=v3[0].path;x3=g3(u3,t3,w3);if(x3!==w3){return"";}var y3=u3.getODataProperty(t3,j[0].PropertyName.PropertyPath)["type"];var z3=d3(v3,y3);if(q3===true){return z3+", ";}return z3;}
_2.requiresIContext=true;
function a3(i,j,k){var q3=!(j.index===(k.length-1));var r3=i.getSetting('ovpCardProperties');var s3=r3.getProperty("/metaModel");var t3=r3.getProperty("/entityType");var u3=s3.getODataProperty(t3,k[j.index].path)["type"];var v3=d3([k[j.index]],u3);if(q3===true){return v3+", ";}return v3;}
a3.requiresIContext=true;
function b3(i){return i.id;}
function c3(i){return i.id;}
function d3(j,k){var q3=[];for(var i=0;i<j.length;i++){q3.push(e3(j[i],k));}return q3.join(', ');}
function e3(i,j){var k=false;var q3,r3=D.getInstance({'style':'medium'});if(j==='Edm.DateTime'){q3=r3.format(new Date(i.value1));}else if(j==='Edm.DateTimeOffset'){q3=r3.format(new Date(i.value1),true);}else{q3=i.value1;}if(i.operator[0]==="N"){k=true;}if(i.value2){if(j==='Edm.DateTime'){q3+=" - "+r3.format(new Date(i.value1));}else if(j==='Edm.DateTimeOffset'){q3+=" - "+r3.format(new Date(i.value1),true);}else{q3+=" - "+i.value1;}}if(k){q3=b.getText("kpiHeader_Filter_NotOperator",[q3]);}return q3;}
function f3(i,j,k){return h3(i,j,k,"com.sap.vocabularies.Common.v1.Label");}
function g3(i,j,k){return h3(i,j,k,"sap:text");}
function h3(i,j,k,q3){var r3={};r3[k]=c1(i,j,k);if(!r3){L.error("No Property Found for with Name '"+k+" For Entity-Type '"+j.name+"'");return;}if(r3[k].annotations){var s3=r3[k].annotations["@"+q3];}if(s3){return s3;}return Object.keys(r3)[0];}
function i3(i){if(!i||!i.Value||!i.Value.$Path){return"";}var j={NumberOfFractionalDigits:this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits?this.getModel("ovpCardProperties").oData.NumberOfFractionalDigits:0,percentageAvailable:this.getModel("ovpCardProperties").oData.percentageAvailable?this.getModel("ovpCardProperties").oData.percentageAvailable:false};var k='sap.ovp.cards.v4.V4AnnotationHelper.KpiValueFormatter';var q3=[i.Value.$Path];return d1(q3,k,j);}
function j3(i,j){if(j.hasOwnProperty(i)){return true;}return false;}
function k3(i,j){var k;if(j[i].customDateRangeImplementation){return j[i].customDateRangeImplementation;}else if(j[i].filter){k={module:'sap.ui.comp.config.condition.DateRangeType',operations:{filter:j[i].filter}};return JSON.stringify(k);}else if(j[i].selectedValues){k={module:'sap.ui.comp.config.condition.DateRangeType',operations:{filter:[{path:'key',contains:j[i].selectedValues,exclude:j[i].exclude}]}};return JSON.stringify(k);}else if(j[i].defaultValue){k={module:'sap.ui.comp.config.condition.DateRangeType'};return JSON.stringify(k);}}
function l3(i){if(i){return undefined;}return"_BASIC";}
function m3(j,k){for(var i=0;i<k.length;i++){if(k[i].type.$EnumMember.indexOf('ContactInformationType/work')>=0){var q3=O.format(k[i].address,{context:j});return q3;}}return"";}
m3.requiresIContext=true;
function n3(j,k){for(var i=0;i<k.length;i++){if(k[i].type.$EnumMember.indexOf('PhoneType/work')>=0){var q3=O.format(k[i].uri,{context:j});return q3;}}return"";}
n3.requiresIContext=true;
function o3(j,k){for(var i=0;i<k.length;i++){if(k[i].type.$EnumMember.indexOf('PhoneType/cell')>=0){var q3=O.format(k[i].uri,{context:j});return q3;}}return"";}
o3.requiresIContext=true;
function p3(j,k){for(var i=0;i<k.length;i++){if(k[i].type.$EnumMember.indexOf('PhoneType/fax')>=0){var q3=O.format(k[i].uri,{context:j});return q3;}}return"";}
p3.requiresIContext=true;return{getGroupID:l3,getConditionTypeForDateProperties:k3,isDateRangeType:j3,criticalityConstants:n,TextArrangementType:T,getLabelForDataItem:q,colorPaletteForComparisonMicroChart:k1,formatField:$,checkFilterPreference:t1,formatItems:u1,getCardSelections:A1,getCardSorters:B1,getFilters:D1,getPrimitiveValue:G1,getAnnotationLabel:Y2,getApplicationName:Z2,removeDuplicateDataField:J1,formatUrl:K1,getDataPointsCount:L1,getFirstDataPointValue:M1,getFirstDataFieldName:P1,getSecondDataFieldName:Q1,getRequestFields:z1,getThirdDataFieldName:R1,formatDataFieldValueOnIndex:U1,formatDataPointValueOnIndex:V1,formatDataPointOrField:W1,formatsemanticObjectOfDataFieldGeneric:X1,getLabelForFirstDataPoint:_1,formatImageUrl:a2,formatUnit:b2,formatObjectNumber:c2,formatFirstDataPointState:d2,formatFirstDataPointColor:e2,formatSecondDataPointState:f2,formatThirdDataPointState:g2,formatFirstDataPointStateForSmartField:h2,formatKPIHeaderState:j2,isFirstDataPointCriticality:k2,isFirstDataPointCriticalityForTableStatus:l2,getSortedDataFields:z,getSortedDataPoints:B,formatDataFieldValueGeneric:p2,formatDataPointValue:t2,formatDataPointStateGeneric:u2,checkCriticalityGeneric:v2,checkCriticalityGenericForTableStatus:w2,formatDataPointStateForSmartFieldGeneric:x2,hasActions:y2,isFirstDataPointPercentageUnit:z2,resolveEntityTypePath:A2,resolveParameterizedEntitySet:E2,getAssociationObject:F2,semanticObjectOfFirstDataField:H2,semanticObjectOfSecondDataField:I2,isFirstContactAnnotation:K2,getAggregateNumber:L2,KpiValueFormatter:P2,kpiValueCriticality:i2,formThePathForAggregateNumber:O2,formThePathForTrendIcon:Q2,formPathForPercentageChange:S2,TargetValueFormatter:T2,formPathForTargetValue:U2,returnPercentageChange:V2,isPresentationVarientPresent:W2,listGroupBy:$2,formTheFilterByString:_2,formTheFilterByStringNotFromSelVar:a3,formTheIdForFilter:b3,formTheIdForFilterNotFromSelVar:c3,_criticality2state:u,_calculateCriticalityState:x,_calculateTrendDirection:y,_getPropertiesFromBindingString:x1,sortCollectionByImportance:P,checkNavTargetForContactAnno:r2,checkForContactAnnotation:s2,getKPIHeaderAggregateNumber:i3,formatColor:q1,formatTrendIcon:R2,formatNumberCalculation:e1,formatCurrency:g1,formatDate:f1,getEmail:m3,getPhone:n3,getDevice:o3,getPhoneType:p3};},true);
sap.ui.predefine('sap/ovp/cards/v4/charts/OVPVizDataHandler',["sap/ui/core/Control","sap/ui/model/json/JSONModel","sap/ovp/cards/v4/charts/Utils","sap/ovp/app/resources","sap/base/util/each","sap/base/util/merge"],function(C,J,U,O,e,m){"use strict";return C.extend("sap.ovp.cards.v4.charts.OVPVizDataHandler",{metadata:{aggregations:{data:{type:"sap.ui.core.Element"},aggregateData:{type:"sap.ui.core.Element"},content:{multiple:false}},properties:{chartType:{defaultValue:false},dependentDataReceived:{defaultValue:false},scale:{defaultValue:""},entitySet:{}}},renderer:function(r,c){r.write("<div");r.writeElementData(c);r.write(">");if(c.getContent()){r.renderControl(c.getContent());}r.write("</div>");},mergeDatasets:function(b,d,c){var t=this;var a=this.getModel();var p=b.mParameters;var D=m([],this.dataSet);if(p){var s=p["$apply"];}var f=b.getPath().substring(1);var g=-1;if(f){g=f.indexOf('Parameters');}if(g>=0){f=f.substr(0,f.indexOf('Parameters'));}var h=a.getMetaModel();var n=this.getEntitySet();var o=h.getData("/")["$Annotations"];var q=[];var r=[];for(var u in o){if(u.includes(n+"/")){if(o[u]["@com.sap.vocabularies.Analytics.v1.Measure"]){if(s&&s.includes(u.split("/")[1])){q.push(u.split("/")[1]);}}else{if(s&&s.includes(u.split("/")[1])){r.push(u.split("/")[1]);}}}}if(D){for(var i=0;i<D.length-2;i++){for(var j=0;j<q.length;j++){if(D[0]){D[0][q[j]]=Number(D[0][q[j]])+Number(D[i+1][q[j]]);}}}D.__count=D.length;var v=D.__count-D.length;var w={};w.results=[];w.results[0]=D[0];var x;if(D.__count>D.length){var y=m({},this.aggregateSet);if(y&&y.results&&D.results.length<D.__count){e(q,function(i){y.results[0][q[i]]=String(Number(t.aggregateSet.results[0][q[i]])-Number(w.results[0][q[i]]));});e(r,function(i){y.results[0][r[i]]=O.getText("OTHERS_DONUT",[v+1]);});y.results[0].$isOthers=true;x=y.results[0];if(x){d.results.splice(-1,1);}}}if(x){d.results.push(x);}var z=c.getModel('ovpCardProperties');var E=z&&z.getProperty("/bEnableStableColors");var A=z&&z.getProperty("/colorPalette");var B=o[n]["@"+(z&&z.getProperty("/chartAnnotationPath"))];if(B.DimensionAttributes.length===1&&E&&c.getVizType()==="donut"&&A&&(A instanceof Object)&&Object.keys(A).length<=10){var F=B.DimensionAttributes[0].Dimension.$PropertyPath;if(A instanceof Array){var G=A.map(function(Y){return Y.color;});var H=G.slice();}else{var I=JSON.parse(JSON.stringify(A));}var V=c.getVizProperties();if(!V){var K={plotArea:{dataPointStyle:{rules:[]}}};V=K;}if(c&&V&&V.plotArea){if(!V.plotArea.dataPointStyle){V.plotArea.dataPointStyle={rules:[]};}else{V.plotArea.dataPointStyle.rules=[];}var L=z.getProperty("/entityType");var M=h.getData()["$Annotations"][L.$Type+"/"+F];if(M){var N=M["@com.sap.vocabularies.Common.v1.Label"]?M["@com.sap.vocabularies.Common.v1.Label"]:F;var P;if(M["@com.sap.vocabularies.Common.v1.Text"]){P=M["@com.sap.vocabularies.Common.v1.Text"]["$Path"];}else if(M["sap:text"]){P=M["sap:text"];}else{P=M;}var Q=function(i,k,R,u){return{callback:function(Y){if(Y&&(Y[N]===R.dimensionValue)||(R.hasOwnProperty(Y[N]))){return true;}},properties:{color:(G&&G[i])||(R&&R[u])},"displayName":d.results[k][P]};};if(A instanceof Array){e(A,function(i,R){for(var k=0;k<d.results.length;k++){if(d.results[k][F]===R.dimensionValue){var S=Q(i,k,R);V.plotArea.dataPointStyle['rules'].push(S);H.splice(i,1);}}});}else{for(var k=0;k<d.results.length;k++){if(A.hasOwnProperty(d.results[k][F])){var u=d.results[k][F];var R={};R[u]=A[u];var S=Q(i,k,R,u);V.plotArea.dataPointStyle['rules'].push(S);delete I[u];}}}if(y){V.plotArea.dataPointStyle['rules'].push({callback:function(Y){if(Y&&(Y[N].lastIndexOf('Others')!=-1)){return true;}},properties:{color:H&&H.length?G[G.length-1]:Object.keys(I).length&&I[Object.keys(I)[0]]},"displayName":y.results[0][F]});}}}c.setVizProperties(V);}}var T=new J();var W=[];for(var i=0;i<d.results.length;i++){var X={};for(var k=0;k<r.length;k++){X[r[k]]=d.results[i]&&d.results[i][r[k]];}for(var l=0;l<q.length;l++){X[q[l]]=d.results[i]&&d.results[i][q[l]+"Aggregate"];}W.push(X);}T.setData(W);c.setModel(T,"analyticalmodel");},updateBindingContext:function(){var b=this.getBinding("data");var a=this.getBinding("aggregateData");var t=this;if(this.chartBinding==b){return;}else{this.chartBinding=b;if(b){var t=this;b.attachEvent("dataReceived",function(E){if(U.checkIfDataExistInEvent(E)){t.dataSet=E&&E.getSource().getCurrentContexts().map(function(i){return i&&i.getObject();});t.oDataClone={results:m([],t.dataSet)};if(t.getChartType()=="donut"&&t.getBinding("aggregateData")!==undefined){if(t.getDependentDataReceived()===true||t.getDependentDataReceived()==="true"){t.mergeDatasets(b,t.oDataClone,t.getContent());t.setDependentDataReceived(false);}else{t.setDependentDataReceived(true);}}else{var M=new J();if(t.dataSet){var c=t.getEntitySet().split(".")[t.getEntitySet().split(".").length-1];var o=b.getModel();var d=U.cacheODataMetadata(o);var T=[];var f={};var g=d[c];if(g){var h=Object.keys(g);}if(h&&h.length){e(h,function(i,p){if(g[p].$Type==="Edm.String"){var s=t.getModel().getMetaModel().getObject("/"+t.getEntitySet()+"/"+p+"@");if(s["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){T.push(p);f[p]={"sap:semantics":"yearmonth"};}else if(s["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){T.push(p);f[p]={"sap:semantics":"yearquarter"};}else if(s["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){T.push(p);f[p]={"sap:semantics":"yearweek"};}}});}if(T&&T.length){if(t.dataSet&&t.dataSet.length){e(t.dataSet,function(i,r){e(T,function(i,p){if(r&&r.hasOwnProperty(p)){var j=r[p];var y,k,q,l,n,w,s;switch(f[p]["sap:semantics"]){case'yearmonth':y=parseInt(j.substr(0,4),10);k=j.substr(4);n=parseInt(k,10)-1;r[p]=new Date(Date.UTC(y,n));break;case'yearquarter':y=parseInt(j.substr(0,4),10);q=j.substr(4);l=(parseInt(q,10)*3)-2;n=l-1;r[p]=new Date(Date.UTC(y,n));break;case'yearweek':y=parseInt(j.substr(0,4),10);w=j.substr(4);var s=(1+(parseInt(w,10)-1)*7);r[p]=new Date(Date.UTC(y,0,s));break;default:break;}}});});}}M.setData(t.dataSet);t.oDataClone={results:m([],t.dataSet)};}t.getContent().setModel(M,"analyticalmodel");t.mergeDatasets(b,t.oDataClone,t.getContent());}}});}C.prototype.updateBindingContext.apply(this,arguments);}if(this.chartAggrBinding==a){return;}else{this.chartAggrBinding=a;if(a){var t=this;a.attachEvent("dataReceived",function(E){t.aggregateSet=E&&E.getParameter("data");if(t.getChartType()=="donut"){if(t.getDependentDataReceived()===true||t.getDependentDataReceived()==="true"){t.oDataClone=m({},t.dataSet);t.mergeDatasets(b,t.oDataClone,t.getContent());t.setDependentDataReceived(false);}else{t.setDependentDataReceived(true);}}else{var M=new J();M.setData(t.aggregateSet.results);t.getContent().setModel(M,"analyticalmodel");}});}C.prototype.updateBindingContext.apply(this,arguments);}}});});
sap.ui.predefine('sap/ovp/cards/v4/charts/Utils',["sap/ui/thirdparty/jquery","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger"],function(q,e,a,o){"use strict";var u={};var c={CHART_QUALIFIER_KEY:"chartAnnotationPath",SELVAR_QUALIFIER_KEY:"selectionAnnotationPath",PREVAR_QUALIFIER_KEY:"presentationAnnotationPath",ERROR_NO_CHART:"Analytic cards require valid \"chartAnnotationPath\" "+"configured in manifest.json",LABEL_KEY:"sap:label",TEXT_KEY:"sap:text",TYPE_KEY:"type"};var b={CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",CACHING_ERROR:"no model defined while caching OdataMetaData"};var l=new o("OVP.v4.charts.Utils");
function g(C,d){if(!d){return"";}var s=C.getSetting('ovpCardProperties');if(!s){return"";}var S=s.oData;if(!S){return"";}var i=S&&S[d]?S[d]:"";return i===""?"":i.split("#")[1];}
u.getAllColumnTexts=function(d){return f("sap:text",d);};
u.formDimensionPath=function(d){var r="{"+d+"}";var i=this.getModel('ovpCardProperties').getProperty("/entityType");if(!i){return r;}var m=j(i);if(!m||!m[d]){return r;}var t=m[d];if(t=="Edm.DateTime"){return"{path:'"+d+"', formatter: 'sap.ovp.cards.charts.VizAnnotationManager.returnDateFormat'}";}var n=u.getAllColumnTexts(i);if(!n){return r;}r="{"+(n[d]||d)+"}";return r;};
function f(p,d){var m={};var n=d.property;for(var i=0,r=n.length;i<r;i++){if(n[i].hasOwnProperty(p)&&p=="com.sap.vocabularies.Common.v1.Label"){m[n[i].name]=n[i][p].String;}else if(n[i].hasOwnProperty(p)){m[n[i].name]=n[i][p];}else{m[n[i].name]=n[i].name;}}return m;}
function h(d){return f("com.sap.vocabularies.Common.v1.Label",d);}
function j(d){return f("type",d);}
var k={};u.LineChart=(function(){function n(C,v,w){var x=p(C,w).split(",");var y=r(C,v).split(",");var z=[];e(x,function(i,m){z.push(m);});var A=[];e(y,function(i,d){A.push(d);});var D=true;var N=C.getSetting("ovpCardProperties").getProperty("/navigation");if(N=="chartNav"){D=false;}var D=D?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{   visible:false,   text: '"+z.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, categoryAxis:{  title:{   visible:false,   text: '"+A.join(",")+"'  },  label:{   formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, general: { groupData: false }, interaction:{  noninteractiveMode: "+D+",  selectability: {   legendSelection: false,   axisLabelSelection: false,   mode: 'EXCLUSIVE',   plotLassoSelection: false,   plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }";}n.requiresIContext=true;function p(C,d){var v=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!v){return"";}var w=h(v);var x=[];e(d,function(i,m){x.push(w[m.Measure.PropertyPath]||m.Measure.PropertyPath);});return x.join(",");}p.requiresIContext=true;function r(C,m){var v=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!v){return"";}var w=h(v);var x=[];var y;var z;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){z=w[d.Dimension.PropertyPath];x.push(z?z:d.Dimension.PropertyPath);}});if(x.length<1){z=w[m[0].Dimension.PropertyPath];x.push(z?z:m[0].Dimension.PropertyPath);}y=g(C,c.CHART_QUALIFIER_KEY);k[y]=x;return x.join(",");}r.requiresIContext=true;function s(C,m){var v=[];var w;var x=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!x){return"";}var y=h(x);var z;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){z=y[d.Dimension.PropertyPath];v.push(z?z:d.Dimension.PropertyPath);}});w=g(C,c.CHART_QUALIFIER_KEY);v=v.filter(function(d){if(!k[w]){return true;}return d!==k[w][0];});return v.join(",");}s.requiresIContext=true;function t(C,d){return s(C,d)!=="";}t.requiresIContext=true;return{getVizProperties:n,getValueAxisFeed:p,getCategoryAxisFeed:r,getColorFeed:s,testColorFeed:t};})();u.BubbleChart=(function(){function n(C,d,z){var A=r(C,z).split(",");var B=s(C,z).split(",");var D=[];e(A,function(i,m){D.push(m);});var E=[];e(B,function(i,m){E.push(m);});var F=true;var N=C.getSetting("ovpCardProperties").getProperty("/navigation");if(N=="chartNav"){F=false;}var F=F?false:true;return"{ valueAxis:{  layout: { maxWidth : 0.4 }, title:{ visible:true, text: '"+D.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, valueAxis2:{  title:{ visible:true, text: '"+E.join(",")+"'  },  label:{ formatString:'axisFormatter'  } }, categoryAxis:{  title:{ visible:true  },  label:{ formatString:'axisFormatter'  } }, legend: {  isScrollable: false }, title: {  visible: false }, interaction:{  noninteractiveMode: "+F+",  selectability: { legendSelection: false, axisLabelSelection: false, mode: 'EXCLUSIVE', plotLassoSelection: false, plotStdSelection: true  }, zoom:{   enablement: 'disabled'} } }";}n.requiresIContext=true;function p(C,d){var z;if(!C||!C.getSetting||!(z=C.getSetting('ovpCardProperties'))){return[""];}var A=z.getProperty("/entityType");if(!A){return[""];}var B=h(A);var D=[null,null,null];var E=["Axis1","Axis2","Axis3"];e(d,function(i,m){if(E.indexOf(m.Role.EnumMember.split("/")[1])>-1){if(D[0]===null){D[0]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}else if(D[1]===null){D[1]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}else if(D[2]==null){D[2]=B[m.Measure.PropertyPath]||m.Measure.PropertyPath;}}});return D;}p.requiresIContext=true;function r(C,m){return p(C,m)[0];}r.requiresIContext=true;function s(C,m){return p(C,m)[1];}s.requiresIContext=true;function t(C,m){return p(C,m)[2];}t.requiresIContext=true;function v(C,m){var z=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!z){return"";}var A=h(z);var B=[];var D;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Series"){D=A[d.Dimension.PropertyPath];B.push(D?D:d.Dimension.PropertyPath);}});return B.join(",");}v.requiresIContext=true;function w(C,m){var z=C.getSetting('ovpCardProperties').getProperty("/entityType");if(!z){return"";}var A=h(z);var B=[];var D;e(m,function(i,d){if(d.Role.EnumMember.split("/")[1]==="Category"){D=A[d.Dimension.PropertyPath];B.push(D?D:d.Dimension.PropertyPath);}});return B.join(",");}w.requiresIContext=true;function x(C,d){return v(C,d)!=="";}x.requiresIContext=true;function y(C,d){return w(C,d)!=="";}y.requiresIContext=true;return{getVizProperties:n,getMeasurePriorityList:p,getValueAxisFeed:r,getValueAxis2Feed:s,getBubbleWidthFeed:t,getColorFeed:v,getShapeFeed:w,testColorFeed:x,testShapeFeed:y};})();
u.validateMeasuresDimensions=function(v,t){var m=null;var d=null;if(!v.getDataset()){l.error("OVP-AC: "+t+" Card Error: No Dataset defined for chart.");return false;}m=v.getDataset().getMeasures();d=v.getDataset().getDimensions();switch(t){case"Bubble":if(m.length!==3||d.length<1||!m[0].getName()||!m[1].getName()||!m[2].getName()||!d[0].getName()){l.error("OVP-AC: Bubble Card Error: Enter exactly 3 measures and at least 1 dimension.");return false;}break;case"Donut":if(m.length!==1||d.length!==1||!m[0].getName()||!d[0].getName()){l.error("OVP-AC: Donut Card Error: Enter exactly 1 measure and 1 dimension.");return false;}break;case"Line":if(m.length<1||d.length<1||!m[0].getName()||!d[0].getName()){l.error("OVP-AC: Line Card Error: Configure at least 1 dimensions and 1 measure.");return false;}break;}return true;};
u.getSortAnnotationCollection=function(d,p,i){if(p&&p.SortOrder&&p.SortOrder.Path&&p.SortOrder.Path.indexOf('@')>=0){var s=p.SortOrder.Path.split('@')[1];var A=d.getServiceAnnotations()[i.entityType];return A[s];}return p.SortOrder;};
u.oFullConfig=null;
u.getConfig=function(C){if(!this.oFullConfig){try{var U=sap.ui.require.toUrl("sap/ovp/cards/charts/config.json");var d;q.ajax({type:"GET",url:U,dataType:"json",async:false,headers:"",success:function(m){d=a({},m);},error:function(E){l.error(E);}});this.oFullConfig=d;}catch(i){l.error(b.CONFIG_LOAD_ERROR+i);}}if(!C){return this.oFullConfig;}var s;try{s=C.$EnumMember.split("/")[1];}catch(i){l.error(b.CARD_ERROR+b.INVALID_CHARTTYPE+b.ANNO_REF);return{};}if(!this.oFullConfig[s]){l.error(b.INVALID_CONFIG+s+" "+b.CONFIG_JSON);return{};}var r;if((r=this.oFullConfig[s].reference)&&this.oFullConfig[r]){var v=a({},this.oFullConfig[r]);this.oFullConfig[s]=v;}return this.oFullConfig[s];};
u.oCachedMetaModel={};
u.cacheODataMetadata=function(m){if(!m){l.error(b.CARD_ERROR+b.CACHING_ERROR);return;}var E=this.oCachedMetaModel[m.getId()];if(!E){E={};var M=m.getMetaModel();var d=M&&M.getObject("/");var i,p;e(d,function(n,r){if(n!="$kind"){i=M.getObject("/"+r.$Type);p={};e(i,function(s,P){if(P.$kind&&P.$kind=="Property"){p[s]=P;}});E[n]=p;}});this.oCachedMetaModel[m.getId()]=E;}return E;};
u.checkIfDataExistInEvent=function(E){if(E.getSource()&&E.getSource().getCurrentContexts()){var d=E.getSource().getCurrentContexts();for(var i=0;i<d.length;i++){if(typeof d[i]!=='undefined'){return true;}}}return false;};
return u;},true);
sap.ui.predefine('sap/ovp/cards/v4/charts/VizAnnotationManager',["sap/ui/thirdparty/jquery","sap/ovp/cards/v4/charts/Utils","sap/ui/model/odata/CountMode","sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/viz/ui5/api/env/Format","sap/viz/ui5/controls/VizTooltip","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/viz/ui5/data/DimensionDefinition","sap/viz/ui5/data/MeasureDefinition","sap/viz/ui5/controls/common/feeds/FeedItem","sap/ui/core/Element","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/base/util/each","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/base/util/isEmptyObject"],function(q,U,C,a,N,D,V,b,c,O,e,M,F,g,h,l,o,p,t,u){"use strict";var w={LABEL_KEY:"sap:label",LABEL_KEY_V4:"com.sap.vocabularies.Common.v1.Label",TEXT_KEY:"sap:text",TEXT_KEY_V4:"com.sap.vocabularies.Common.v1.Text",TEXT_ARRANGEMENT_ANNO:"com.sap.vocabularies.UI.v1.TextArrangement",TYPE_KEY:"$Type",DISPLAY_FORMAT_KEY:"sap:display-format",SEMANTICS_KEY:"sap:semantics",UNIT_KEY:"sap:unit",UNIT_KEY_V4_ISOCurrency:"Org.OData.Measures.V1.ISOCurrency",UNIT_KEY_V4_Unit:"Org.OData.Measures.V1.Unit",CURRENCY_CODE:"currency-code",NAME_KEY:"name",NAME_CAP_KEY:"Name",EDM_TYPE:"type",EDM_INT32:"Edm.Int32",EDM_INT64:"Edm.Int64",SCATTER_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Scatter",BUBBLE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bubble",LINE_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Line",COLUMNSTACKED_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked",VERTICALBULLET_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/VerticalBullet",COLUMN_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Column",BAR_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Bar",COMBINATION_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Combination",DONUT_CHARTTYPE:"com.sap.vocabularies.UI.v1.ChartType/Donut",V4_ANNOTATION:"annotations"};var y={CARD_WARNING:"OVP-AC: Analytic card: Warning: ",CARD_ERROR:"OVP-AC: Analytic card Error: ",DATA_ANNO_ERROR:"OVP-AC: Analytic card Error:",CARD_ANNO_ERROR:"OVP-AC: Analytic card: Error ",CHART_ANNO_ERROR:"OVP-AC: Analytic card: Error ",INVALID_CHART_ANNO:"OVP-AC: Analytic Cards: Invalid Chart Annotation.",ANALYTICAL_CONFIG_ERROR:"Analytic card configuration error",CACHING_ERROR:"no model defined while caching OdataMetaData",INVALID_MAXITEMS:"maxItems is Invalid. ",NO_DATASET:"OVP-AC: Analytic Cards: Could not obtain dataset.",SORTORDER_WARNING:"SortOrder is present in PresentationVariant, but it is empty or not well formed.",BOOLEAN_ERROR:"Boolean value is not present in PresentationVariant.",IS_MANDATORY:"is mandatory.",IS_MISSING:"is missing.",NOT_WELL_FORMED:"is not found or not well formed)",MISSING_CHARTTYPE:"Missing ChartType in ",CHART_ANNO:"Chart Annotation.",DATA_ANNO:"Data Annotation",CARD_ANNO:"card annotation.",CARD_CONFIG:"card configuration.",CARD_CONFIG_ERROR:"Could not obtain configuration for ",CARD_CONTAINER_ERROR:"Could not obtain card container. ",DATA_UNAVAIALABLE:"No data available.",CONFIG_LOAD_ERROR:"Failed to load config.json. Reason: ",INVALID_CHARTTYPE:"Invalid ChartType given for ",INVALID_CONFIG:"No valid configuration given for ",CONFIG_JSON:"in config.json",ENTER_INTEGER:"Please enter an Integer.",NO_CARD_MODEL:"Could not obtain Cards model.",ANNO_REF:"com.sap.vocabularies.UI.v1 annotation.",INVALID_REDUNDANT:"Invalid/redundant role configured for ",CHART_IS:"chart is/are ",CARD_CONFIG_JSON:"card from config.json",ALLOWED_ROLES:"Allowed role(s) for ",DIMENSIONS_MANDATORY:"DimensionAttributes are mandatory.",MEASURES_MANDATORY:"MeasureAttributes are mandatory.",CARD_LEAST:"card: Enter at least ",CARD_MOST:"card: Enter at most ",FEEDS:"feed(s).",MIN_FEEDS:"Minimum number of feeds required for ",FEEDS_OBTAINED:"card is not configured. Obtained ",FEEDS_REQUIRED:"feed(s), Required: ",INVALID_SEMANTIC_MEASURES:"More than one measure is being semantically coloured",INVALID_IMPROVEMENT_DIR:"No Improvement Direction Found",INVALID_CRITICALITY:"Invalid criticality values",INVALID_DIMMEAS:"Invalid number of Measures or Dimensions",INVALID_FORECAST:"Invalid/Redundant Datapoint or Forecast measure",INVALID_TARGET:"Invalid/Redundant Datapoint or Target measure",ERROR_MISSING_AXISSCALES:"Minimum and Maximum values are mandatory for AxisScale MinMax to work"};var S=["year","yearweek","yearmonth","yearquarter"];var z=[w.COLUMNSTACKED_CHARTTYPE,w.DONUT_CHARTTYPE,w.COLUMN_CHARTTYPE,w.BAR_CHARTTYPE,w.VERTICALBULLET_CHARTTYPE,w.LINE_CHARTTYPE,w.COMBINATION_CHARTTYPE,w.BUBBLE_CHARTTYPE];var A=[w.COLUMNSTACKED_CHARTTYPE];var G;var L=new t("OVP.charts.VizAnnotationManager");
function B(d,s,f){var i=d.getMetaModel().getObject("/"+s+"/"+f+"@");return i["@com.sap.vocabularies.Common.v1.IsCalendarYear"]||i["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]||i["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]||i["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"];}
function E(f,j,n,v,x,K1,L1){var M1="{";if(!f||!f.getSetting('ovpCardProperties')){L.error(y.ANALYTICAL_CONFIG_ERROR);M1+="}";return M1;}var N1=f.getSetting("dataModel");var O1;if(L1&&L1.$EnumMember){O1=L1.$EnumMember.split("/");if(O1&&(O1[1]!='Donut')&&(x===undefined)){return null;}}var P1=[];var Q1=[];var R1=[];var S1=[];var T1=[];var U1=[];var V1=[];var W1=n&&n.Parameters;var X1=v&&v.SortOrder;var Y1=v&&v.MaxItems,Z1=null;var $1;var _1;var a2;var b2=null;var c2=w.TEXT_KEY;var d2=w.TEXT_KEY_V4;var e2=w.UNIT_KEY;var f2=w.UNIT_KEY_V4_ISOCurrency;var g2=w.UNIT_KEY_V4_Unit;var h2={};if(Y1){Z1=Y1.Int32?Y1.Int32:Y1.Int;}if(Z1){if(Z1==="0"){L.error("OVP-AC: Analytic card Error: maxItems is configured as "+Z1);M1+="}";return M1;}if(!/^\d+$/.test(Z1)){L.error("OVP-AC: Analytic card Error: maxItems is Invalid. Please enter an Integer.");M1+="}";return M1;}}var i2=f.getSetting('ovpCardProperties'),j2=i2.getProperty('/parameters');var k2=i2.getProperty("/metaModel");var l2=i2.getProperty("/measureAggregate");W1=W1||!!j2;if(W1){var m2=a.resolveParameterizedEntitySet(N1,j,n,j2);M1+="path: '"+m2+"'";}else{M1+="path: '/"+j.$Type.split(".")[1]+"'";}var n2=[];b2=f.getSetting('ovpCardProperties').getProperty("/entitySet");if(!N1||!b2){return M1;}var o2=u1(N1,b2);G1(N1,o2,j.$Type);var p2=f.getSetting('ovpCardProperties').getProperty("/cardLayout");var q2=1,r2;var s2=_();var t2;var u2;if(x&&p2&&p2.colSpan&&p2.colSpan>1){r2=p2.colSpan-q2;for(var v2 in s2){if((u2=s2[v2].reference)&&s2[u2]){var w2=p({},s2[u2]);s2[v2]=w2;}if(v2===O1[1]||(s2[v2].time&&s2[v2].time.type===O1[1].toLowerCase())){t2=s2[v2];break;}}var x2=a1(x,t2,N1,b2);if(x2){t2=t2.time;}else{t2=t2.default;}var y2=f.getSetting('ovpCardProperties').getProperty("/dataStep");if(!y2){if(t2.resize&&t2.resize.hasOwnProperty("dataStep")&&!isNaN(t2.resize.dataStep)){y2=t2.resize.dataStep;}}y2=parseInt(y2,10);if(r2>0&&y2&&!isNaN(y2)){Z1=parseInt(Z1,10)+y2*r2;}}if(n){var i2=f.getSetting('ovpCardProperties');n2=a.getFilters(i2,n);}if(n2.length>0){M1+=", filters: "+JSON.stringify(n2);}if(X1){var z2=v.SortOrder;if(!z2.length){z2=U.getSortAnnotationCollection(N1,v,j);}if(z2.length<1){L.warning(y.CARD_WARNING+y.SORTORDER_WARNING);}else{var A2="";var B2;var C2;var D2;for(var i=0;i<z2.length;i++){B2=z2[i];D2=B2.Property.PropertyPath;V1.push(D2);if(typeof B2.Descending==="undefined"){C2='true';}else{var j1=B2.Descending.Bool||B2.Descending.Boolean;if(!j1){L.warning(y.CARD_WARNING+y.BOOLEAN_ERROR);C2='true';}else{C2=j1.toLowerCase()==='true'?'true':'false';}}A2=A2+"{path: '"+D2+"',descending: "+C2+"},";}M1+=", sorter: ["+A2.substring(0,A2.length-1)+"]";}}var E2=f.getSetting("ovpCardProperties").getProperty("/entityType");o(K1,function(i,m){$1=m.Measure.$PropertyPath;if(m.DataPoint&&m.DataPoint.AnnotationPath){var d=E2[m.DataPoint.AnnotationPath.substring(1)];if(d.ForecastValue&&(d.ForecastValue.PropertyPath||d.ForecastValue.Path)){var r=(d.ForecastValue.PropertyPath||d.ForecastValue.Path);T1.push((d.ForecastValue.PropertyPath||d.ForecastValue.Path));if(o2&&o2[r]){var s;if(o2[r][f2]){s=o2[r][f2].Path?o2[r][f2].Path:undefined;}else if(o2[r][g2]){s=o2[r][g2].Path?o2[r][g2].Path:undefined;}else if(o2[r][e2]){s=o2[r][e2];}if(s){if((T1?Array.prototype.indexOf.call(T1,s):-1)===-1){T1.push(s);}}}}if(d.TargetValue&&(d.TargetValue.PropertyPath||d.TargetValue.Path)){var K2=(d.TargetValue.PropertyPath||d.TargetValue.Path);T1.push((d.TargetValue.PropertyPath||d.TargetValue.Path));if(o2&&o2[K2]){var s;if(o2[K2][f2]){s=o2[K2][f2].Path?o2[K2][f2].Path:undefined;}else if(o2[K2][g2]){s=o2[K2][g2].Path?o2[K2][g2].Path:undefined;}else if(o2[K2][e2]){s=o2[K2][e2];}if(s){if((T1?Array.prototype.indexOf.call(T1,s):-1)===-1){T1.push(s);}}}}}T1.push($1);if(o2&&o2[$1]){if(o2[$1][d2]){if(o2[$1][d2].String&&$1!=o2[$1][d2].String){T1.push(o2[$1][d2].String?o2[$1][d2].String:$1);}else if(o2[$1][d2].Path&&$1!=o2[$1][d2].Path){T1.push(o2[$1][d2].Path?o2[$1][d2].Path:$1);}}else if(o2[$1][c2]&&$1!=o2[$1][c2]){T1.push(o2[$1][c2]?o2[$1][c2]:$1);}}if(o2&&o2[$1]){var s;if(o2[$1][f2]){s=o2[$1][f2].Path?o2[$1][f2].Path:undefined;}else if(o2[$1][g2]){s=o2[$1][g2].Path?o2[$1][g2].Path:undefined;}else if(o2[$1][e2]){s=o2[$1][e2];}if(s){if((T1?Array.prototype.indexOf.call(T1,s):-1)===-1){T1.push(s);}}}});o(x,function(i,d){$1=d.Dimension.$PropertyPath;P1.push($1);if(o2&&o2[$1]){if(o2[$1]["annotations"]&&o2[$1]["annotations"]["@"+d2]){if(typeof o2[$1]["annotations"]["@"+d2]==='string'&&o2[$1]["annotations"]["@"+d2]&&$1!=o2[$1]["annotations"]["@"+d2]){P1.push(o2[$1]["annotations"]["@"+d2]);}else if(o2[$1]["annotations"]["@"+d2].$Path&&$1!=o2[$1]["annotations"]["@"+d2].$Path){a2=o2[$1]["annotations"]["@"+d2].$Path;var m=a2.split("/");if(m.length>1){_1=H(k2,E2,a2);if(_1!==""){P1.push(a2);Q1.push(_1);S1=I(k2,E2,a2);if(S1.length>0){R1=R1.concat(S1);}}}else{P1.push(a2?a2:$1);}}}else if(o2[$1][c2]&&$1!=o2[$1][c2]){P1.push(o2[$1][c2]?o2[$1][c2]:$1);}}});if(R1.length>0){var k=0;while(k<R1.length){if(P1.indexOf(R1[k])!==-1){R1.splice(k,1);}else{k++;}}}if(T1.length>0){o(T1,function(i,m){h2[m]=true;});}if(P1.length>0){o(P1,function(i,d){h2[d]=true;});}M1+=", parameters: {$apply:'groupby(("+P1.join(",")+"),";M1+="aggregate(";var F2=[];T1.forEach(function(m,i){var s=l2&&l2["Axis"+(i+1)];var d=s?s:"sum";var r=[m," with ",d," as ",m,"Aggregate"].join('');F2.push(r);});M1+=F2.join(',');M1+="))";var G2=k2.getObject("/"+j.$Type);if(G2){var H2=a.getRequestFields(v);if(H2&&H2.length>0){o(H2,function(i,r){if(!h2.hasOwnProperty(r)){h2[r]=true;U1.push(r);}});if(U1.length>0){M1+=","+U1.join(",");}}}if(V1.length>0){var I2=[];o(V1,function(i,s){if(!h2.hasOwnProperty(s)){I2.push(s);}});if(I2.length>0){M1+=","+I2.join(",");}}if(Q1.length>0){M1+="'"+","+" expand:'"+Q1.join(',');}var J2=a.checkFilterPreference(f.getSetting("ovpCardProperties"));if(J2){M1+="', custom: {cardId: '"+f.getSetting("ovpCardProperties").getProperty("/cardId")+"'}}";}else{M1+="'}";}if(O1&&(O1[1]==='Donut')&&(x===undefined)){M1+=", length: 1";}else if(O1&&(O1[1]==='Donut')&&(x)&&Z1){M1+=", length: "+(parseInt(Z1,10)+1);}else if(Z1){M1+=", length: "+Z1;}M1+="}";return M1;}
E.requiresIContext=true;
function H(m,d,s){var f="";var j=s.split("/");if(j.length>1){for(var i=0;i<(j.length-1);i++){var k=m.getODataAssociationEnd(d,j[i]);if(k){d=m.getODataEntityType(k.type);if(f){f=f+"/";}f=f+j[i];}else{return f;}}}return f;}
function I(m,d,s){var f=[];var k=[];var n;var r=s.split("/");if(r.length>1){for(var i=0;i<(r.length-1);i++){var v=m.getODataAssociationEnd(d,r[i]);if(v){d=m.getODataEntityType(v.type);if(d){k=d&&d.key&&d.key.propertyRef;for(var j=0;j<k.length;j++){n=r[i]+"/"+k[j].name;f.push(n);}}}}}return f;}
function J(m,d){var f=false;var r;if(m.DataPoint&&m.DataPoint.AnnotationPath){var i=d[m.DataPoint.AnnotationPath.substring(1)];if(i&&i.ForecastValue&&(i.ForecastValue.PropertyPath||i.ForecastValue.Path)){f=true;r=m;}}if(f===true){return r;}else{L.warning(y.CARD_WARNING+y.INVALID_FORECAST);return undefined;}}
function K(m,d){var f=false;var r;if(m.DataPoint&&m.DataPoint.AnnotationPath){var i=d[m.DataPoint.AnnotationPath.substring(1)];if(i&&i.TargetValue&&(i.TargetValue.PropertyPath||i.TargetValue.Path)){f=true;r=m;}}if(f===true){return r;}else{L.warning(y.CARD_WARNING+y.INVALID_TARGET);return undefined;}}
function P(m,d){var f;o(d,function(i,v){if(v.name===m){if(v["com.sap.vocabularies.Common.v1.Label"]){f=v["com.sap.vocabularies.Common.v1.Label"].String?v["com.sap.vocabularies.Common.v1.Label"].String:v["com.sap.vocabularies.Common.v1.Label"].Path;}else if(v["sap:label"]){f=v["sap:label"];}return false;}});return f;}
function Q(f,d){var j=true;if(d==="line"||d==="column"||d==="bar"){o(f,function(i,v){if((v.getUid()==='valueAxis')||(v.getUid()==='categoryAxis')){if(v.getValues().length!=1){j=false;L.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false;}}});}else if(d==="vertical_bullet"){o(f,function(i,v){if((v.getUid()==='actualValues')||(v.getUid()==='categoryAxis')){if(v.getValues().length!=1){j=false;L.warning(y.CARD_WARNING+y.INVALID_DIMMEAS);return false;}}});}if(j===true){return true;}}
function R(m,s,v){var d=w.TYPE_KEY;if(!m||!m[s]||!m[s][d]){return v;}var n=["Edm.Int","Edmt.Int16","Edm.Int32","Edm.Int64","Edm.Decimal"];var f=m[s][d];if((n?Array.prototype.indexOf.call(n,f):-1)!==-1){return Number(v);}return v;}
function T(d){if(d){return d;}return"";}
function W(r){var d={locale:function(){},format:function(v,f){var i="";if(f){i=f.split('/');}if(i.length>0){var m,s;if(i.length===3){m=Number(i[1]);s=Number(i[2]);if(isNaN(m)){m=-1;}if(isNaN(s)){s=0;}}else{m=2;s=0;}if(i[0]==="axisFormatter"||(i[0]==="ShortFloat")){var n;n=N.getFloatInstance({style:'short',minFractionDigits:m,maxFractionDigits:m?m:1});if(i[0]==="ShortFloat"){n=N.getFloatInstance({style:'short',minFractionDigits:m,maxFractionDigits:m});}if(m===-1){n=N.getFloatInstance({style:'short'});}return n.format(Number(v));}else if(i[0]==="tooltipNoScaleFormatter"){var j=N.getFloatInstance({style:'short',currencyCode:false,shortRefNumber:s,showScale:false,minFractionDigits:m,maxFractionDigits:m});if(m===-1){j=N.getFloatInstance({minFractionDigits:0,currencyCode:false});}return j.format(Number(v));}else if(i[0]==="CURR"){var k=N.getCurrencyInstance({style:'short',currencyCode:false,minFractionDigits:m,maxFractionDigits:m});if(m===-1){k=N.getCurrencyInstance({style:'short',currencyCode:false});}return k.format(Number(v));}else if(i[0].search("%")!==-1){var x=N.getPercentInstance({style:'short',minFractionDigits:m,maxFractionDigits:m});if(m===-1){x=N.getPercentInstance({style:'short',minFractionDigits:1,maxFractionDigits:1});}v=x.format(Number(v));return v;}}if(v.constructor===Date){var K1=D.getDateTimeInstance({pattern:f});if(f==="YearMonthDay"){K1=D.getDateInstance({style:"medium"});}if(f==="YearMonth"||f==="MMM"){K1=D.getDateTimeInstance({format:"MMM"});}if(f==="YearQuarter"||f==="Quarter"){K1=D.getDateTimeInstance({format:"QQQ"});}if(f==="YearWeek"||f==="Week"){K1=D.getDateTimeInstance({format:"www"});}var L1=c.getApp();var M1=L1&&L1.bResetChartAxisFormatter;if(M1&&f==="hh:mm"){var N1=v.toLocaleTimeString();var O1=N1.split(":");v=O1[0]+":"+O1[1];return v;}var P1=M1?false:true;v=K1.format(new Date(v),P1);}return v;}};V.numericFormatter(d);}
function X(v,f){var d=v.getModel();var k=v.getVizType();if(k!="line"&&k!="bubble"){return;}if(!f){f=k==="line"?"categoryAxis":"valueAxis";}var m=v.getModel('ovpCardProperties').getProperty("/entitySet");if(!d||!m){return;}var n=u1(d,m);var r=v.getFeeds();for(var i=0;i<r.length;i++){if(r[i].getUid()===f){var s=r[i].getValues();if(!s){return;}for(var j=0;j<s.length;j++){if(n[s[j][w.TYPE_KEY]]!="Edm.DateTime"){return;}}v.setVizProperties({categoryAxis:{title:{visible:false}}});return;}}}
function Y(d,f,i,m,j,k){m=typeof m==="undefined"?false:m;var r=false;var n;if(!d&&m){L.error(j+y.CARD_ERROR+i+y.IS_MANDATORY);return r;}if(!d){L.warning(j+y.CARD_WARNING+i+y.IS_MISSING);r=true;return r;}n=f["@"+d];if(!n||typeof n!=="object"){var s=m?L.error:L.warning;s(j+y.CARD_ERROR+"in "+i+". (@"+d+" "+y.NOT_WELL_FORMED);return r;}if(k&&k==="sap.ovp.cards.v4.charts.analytical.analyticalChart"&&i==="Chart Annotation"&&(!n.ChartType||!n.ChartType.$EnumMember)){L.error(j+y.CARD_ERROR+y.MISSING_CHARTTYPE+y.CHART_ANNO);return r;}r=true;return r;}
function Z(d){var r=false;if(!d){return r;}var s;var f;var i;var j;var k;var m;var n;var v="";var x;var K1=d.getView();if(K1){v="["+K1.getId()+"] ";}if(!(x=d.getCardPropertiesModel())){L.error(v+y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return r;}n=x.getProperty("/entityType");var L1=d.getMetaModel();var M1=L1.getData().$Annotations[n.$Type];if(!n||u(n)){L.error(v+y.CARD_ERROR+"in "+y.CARD_ANNO);return r;}s=x.getProperty("/selectionAnnotationPath");f=x.getProperty("/chartAnnotationPath");j=x.getProperty("/presentationAnnotationPath");k=x.getProperty("/identificationAnnotationPath");m=x.getProperty("/dataPointAnnotationPath");i=x.getProperty("/contentFragment");r=Y(s,M1,"Selection Variant",false,v);r=Y(f,M1,"Chart Annotation",true,v,i)&&r;r=Y(j,M1,"Presentation Variant",false,v)&&r;r=Y(k,M1,"Identification Annotation",true,v)&&r;r=Y(m,M1,"Data Point",false,v)&&r;return r;}
function $(d,f,v){}
function _(d){return U.getConfig(d);}
function a1(d,f,i,j){var r=false;var m;var k;var n;var s;var v;var x;if(!f.time||u(f.time)){return r;}if(!d){return r;}for(var K1=0;K1<d.length;K1++){if(!d[K1].Dimension||!(k=d[K1].Dimension.$PropertyPath)){return r;}m=u1(i,j);if(m&&m[k]){n=m[k][w.TYPE_KEY];s=m[k][w.DISPLAY_FORMAT_KEY];v=m[k][w.SEMANTICS_KEY];x=B(i,j,k);}if(n&&n.lastIndexOf("Edm.Date",0)===0){if(n.toLowerCase()==="edm.datetime"){if(s&&s.toLowerCase()==="date"){r=true;}}else{r=true;}}if(n==="Edm.String"&&(x||v&&S.indexOf(v)>-1)){r=true;}if(r){d.unshift(d.splice(K1,1)[0]);break;}}return r;}
function b1(i,d,f){var r="";var j=_(d);var k,m;if(!j){return r;}r=j.default.type;k=i.getSetting("dataModel");m=i.getSetting('ovpCardProperties').getProperty("/entitySet");if(a1(f,j,k,m)){r=j.time.type;}return r;}
b1.requiresIContext=true;
function c1(d,j,k){if(!d.length){return;}var m=k==="dimension"?"Dimension":"Measure";var n=[];o(d,function(i,v){if(!v||!v[m]||!v[m].PropertyPath){L.error(y.INVALID_CHART_ANNO);return false;}n.push(v[m].PropertyPath);});var r=q.map(j.feeds,function(f){if(f.type===k){if(f.role){return f.role.split("|");}return[];}});r=q.grep(r,function(f,i){return(r?Array.prototype.indexOf.call(r,f):-1)===i;}).join(", ");L.error(y.CARD_ERROR+y.INVALID_REDUNDANT+k+"(s) "+n.join(", ")+". "+y.ALLOWED_ROLES+j.type+y.CHART_IS+r);}
function d1(v,i){var d;if(v){if(v.String){d=v.String;}else if(v.Boolean||v.Bool){d=e1(v);}else{d=f1(v,i);}}return d;}
function e1(v,d){if(v&&v.Boolean){if(v.Boolean.toLowerCase()==="true"){return true;}else if(v.Boolean.toLowerCase()==="false"){return false;}}else if(v&&v.Bool){if(v.Bool.toLowerCase()==="true"){return true;}else if(v.Bool.toLowerCase()==="false"){return false;}}return d;}
function f1(v,i){var d;if(v){if(v.String){d=Number(v.String);}else if(v.Int){d=Number(v.Int);}else if(v.Decimal){d=Number(v.Decimal);}else if(v.Double){d=Number(v.Double);}else if(v.Single){d=Number(v.Single);}}if(i){var n=N.getFloatInstance({style:'short',minFractionDigits:2,maxFractionDigits:2});if(d){d=n.format(Number(d));}}return d;}
function g1(i,d){function i1(x){if(x){if(x.Path){return"{path:'"+x.Path+"'}";}else{return d1(x);}}else{return"";}}var v=i[i.measureNames];if(d&&d.CriticalityCalculation&&d.CriticalityCalculation.ImprovementDirection){var s=d.CriticalityCalculation.ImprovementDirection.EnumMember;var f=i1(d.CriticalityCalculation.DeviationRangeLowValue);var j=i1(d.CriticalityCalculation.DeviationRangeHighValue);var k=i1(d.CriticalityCalculation.ToleranceRangeLowValue);var m=i1(d.CriticalityCalculation.ToleranceRangeHighValue);return a._calculateCriticalityState(v,s,f,j,k,m,a.criticalityConstants.StateValues);}else{var n=d.Criticality.EnumMember;var r=n?n.split("/"):[];if(r){return r[1];}}}
function h1(d,m,f){var j,k;o(m,function(i,v){if(v["com.sap.vocabularies.Common.v1.Label"]&&v["com.sap.vocabularies.Common.v1.Label"].String===d.measureNames){j=v.name;return false;}else if(v["com.sap.vocabularies.Common.v1.Label"]&&v["com.sap.vocabularies.Common.v1.Label"].Path===d.measureNames){j=v.name;return false;}else if(v["sap:label"]===d.measureNames){j=v.name;return false;}});o(f,function(i,v){if(v.Measure.PropertyPath===j){if(!v.DataPoint||!v.DataPoint.AnnotationPath){return false;}k=v.DataPoint.AnnotationPath;return false;}});return k;}
function i1(i,d){if(i){if(i.Path){return i.Path;}else{return d1(i,d);}}else{return"";}}
function j1(m,d){function f(s,i){return s&&s.indexOf(i,s.length-i.length)!==-1;}var j=false;o(m,function(i,v){if(v.DataPoint&&v.DataPoint.AnnotationPath){var k=d[v.DataPoint.AnnotationPath.substring(1)];if(k&&k.CriticalityCalculation&&k.CriticalityCalculation.ImprovementDirection&&k.CriticalityCalculation.ImprovementDirection.EnumMember){var s=k.CriticalityCalculation.ImprovementDirection.EnumMember;var n=i1(k.CriticalityCalculation.DeviationRangeLowValue);var r=i1(k.CriticalityCalculation.DeviationRangeHighValue);var x=i1(k.CriticalityCalculation.ToleranceRangeLowValue);var K1=i1(k.CriticalityCalculation.ToleranceRangeHighValue);if(f(s,"Minimize")||f(s,"Minimizing")){if(K1&&r){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}else if(f(s,"Maximize")||f(s,"Maximizing")){if(x&&n){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}else if(f(s,"Target")){if(x&&n&&K1&&r){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_CRITICALITY);}}}else if(k&&k.Criticality){j=true;return false;}else{L.warning(y.CARD_WARNING+y.INVALID_IMPROVEMENT_DIR);}}});if(j===true&&m.length>1){L.warning(y.CARD_WARNING+y.INVALID_SEMANTIC_MEASURES);}return j;}
function k1(m,d,f,v){function i(O1,P1){return O1&&O1.indexOf(P1,O1.length-P1.length)!==-1;}var r=[null,null];var j=true;var k=m.Measure.PropertyPath;if(f[k]){if(f[k][w.LABEL_KEY_V4]){k=t1(f[k][w.LABEL_KEY_V4].String?f[k][w.LABEL_KEY_V4].String:f[k][w.LABEL_KEY_V4].Path,v,f);}else if(f[k][w.LABEL_KEY]){k=f[k][w.LABEL_KEY];}else if(k){k=k;}}var n=m.DataPoint.AnnotationPath;var s=d[n.substring(1)];if(!s.CriticalityCalculation||!s.CriticalityCalculation.ImprovementDirection||!s.CriticalityCalculation.ImprovementDirection.EnumMember){return r;}var x=s.CriticalityCalculation.ImprovementDirection.EnumMember;var K1=i1(s.CriticalityCalculation.DeviationRangeLowValue,j);var L1=i1(s.CriticalityCalculation.DeviationRangeHighValue,j);var M1=i1(s.CriticalityCalculation.ToleranceRangeLowValue,j);var N1=i1(s.CriticalityCalculation.ToleranceRangeHighValue,j);if(i(x,"Minimize")||i(x,"Minimizing")){if(N1&&L1){r[0]=h.getText("MINIMIZING_LESS",[k,N1]);r[1]=h.getText("MINIMIZING_MORE",[k,L1]);r[2]=h.getText("MINIMIZING_CRITICAL",[N1,k,L1]);}}else if(i(x,"Maximize")||i(x,"Maximizing")){if(M1&&K1){r[0]=h.getText("MAXIMISING_MORE",[k,M1]);r[1]=h.getText("MAXIMISING_LESS",[k,K1]);r[2]=h.getText("MAXIMIZING_CRITICAL",[K1,k,M1]);}}else if(i(x,"Target")){if(M1&&K1&&N1&&L1){r[0]=h.getText("TARGET_BETWEEN",[M1,k,N1]);r[1]=h.getText("TARGET_AROUND",[k,K1,L1]);r[2]=h.getText("TARGET_CRITICAL",[K1,k,M1,N1,L1]);}}return r;}
function l1(m,v,d){if(v&&v.DataPoint&&v.DataPoint.AnnotationPath){var f=d[v.DataPoint.AnnotationPath.substring(1)];var i,j;if(f&&f.ValueFormat){i=f.ValueFormat;}else if(f&&f.NumberFormat){i=f.NumberFormat;}if(i&&i.NumberOfFractionalDigits&&i.NumberOfFractionalDigits.Int){j=i.NumberOfFractionalDigits.Int;if(m<Number(j)){m=Number(j);}}}return m;}
function m1(m,v,d){if(v&&v.DataPoint&&v.DataPoint.AnnotationPath){var f=d[v.DataPoint.AnnotationPath.substring(1)];var s,i;if(f&&f.ValueFormat){s=f.ValueFormat;}else if(f&&f.NumberFormat){s=f.NumberFormat;}if(s){if(s.ScaleFactor&&s.ScaleFactor.Decimal){i=Number(s.ScaleFactor.Decimal);}else if(s.ScaleFactor&&s.ScaleFactor.Int){i=Number(s.ScaleFactor.Int);}if(!isNaN(i)){if(m===undefined){m=Number(i);}else if(m>Number(i)){m=Number(i);}}}}return m;}
function n1(m,s){if(m&&m[s]&&(m[s]["Org.OData.Measures.V1.ISOCurrency"]||(m[s][w.SEMANTICS_KEY]&&m[s][w.SEMANTICS_KEY]===w.CURRENCY_CODE))){return true;}return false;}
function o1(m,v,f){if(m[v[f].$PropertyPath].$Type===w.EDM_INT32){return true;}return false;}
function p1(m,v,f){if(m[v[f].$PropertyPath].$Type===w.EDM_INT64){return true;}return false;}
function q1(d,f,r,s){var x,K1,L1,M1,N1;var O1,P1,Q1,R1,S1,T1=false;var U1;var V1,W1,X1;var Y1,Z1=[],$1=[];var _1;var a2;var b2=s&&s.getView();var c2,d2;var e2=b2&&b2.getModel("ui");var f2=e2&&e2.getProperty("/chartSettings");x=d.getModel('ovpCardProperties');if(O.checkIfAPIIsUsed(s)){T1=x&&x.getData()&&x.getData().showDataLabel;}N1=f2?f2.showDataLabel:T1;O1=d.getVizType();P1=_();for(var g2 in P1){if((a2=P1[g2].reference)&&P1[a2]){var h2=p({},P1[a2]);P1[g2]=h2;}if(P1[g2].default.type===O1||(P1[g2].time&&P1[g2].time.type===O1)){Q1=P1[g2];break;}}if(!Q1){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.CARD_CONFIG_ERROR+O1+" "+y.CARD_CONFIG_JSON);return;}if(!x){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return;}var i2=d.getModel();var j2=x.getProperty("/entitySet");if(!i2||!j2){return;}var k2=x.getProperty("/entityType").$Type;var l2=s.getMetaModel().getData().$Annotations[k2];var m2={"property":s.getMetaModel().getObject("/"+k2+"/")};K1=l.merge(true,{},l2,m2);if(!K1){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}var n2=u1(i2,j2);G1(i2,n2,k2);L1=x.getProperty("/chartAnnotationPath");if(!L1||!(M1=K1["@"+L1])){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}if(!(R1=M1.DimensionAttributes)||!R1.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return;}var o2;if(!(S1=M1.MeasureAttributes)||!S1.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return;}else{var p2=S1[0].DataPoint?K1[S1[0].DataPoint.AnnotationPath.substring(1)]:null;var q2=p2&&p2.ValueFormat&&p2.ValueFormat.NumberOfFractionalDigits&&p2.ValueFormat.NumberOfFractionalDigits;o2=q2?q2:0;}_1=a1(R1,Q1,i2,j2);if(_1){Q1=Q1.time;}else{Q1=Q1.default;}var r2=x.getProperty("/ChartProperties")||x.getProperty("/chartProperties");if(x&&x.getProperty("/tabs")&&(r2===undefined)){c2=b2.byId("ovp_card_dropdown");d2=parseInt(c2.getSelectedKey(),10);r2=x.getProperty("/tabs")&&x.getProperty("/tabs")[d2-1]&&(x.getProperty("/tabs")[d2-1]["ChartProperties"]||x.getProperty("/tabs")[d2-1]["chartProperties"]);}var s2=false;var t2=o2>0?"tooltipNoScaleFormatter/"+o2.toString()+"/":'tooltipNoScaleFormatter/-1/';var u2=new b({formatString:t2});u2.connect(d.getVizUid());u2.connect(d.getVizUid());d._oOvpVizFrameTooltip=u2;[Q1.dimensions,Q1.measures].forEach(function(k,i){var m=i?S1:R1;var n=i?"measure(s)":"dimension(s)";if(k.min&&m.length<k.min){L.error(y.CARD_ERROR+"in "+O1+" "+y.CARD_LEAST+k.min+" "+n);s2=true;}if(k.max&&m.length>k.max){L.error(y.CARD_ERROR+"in "+O1+y.CARD_MOST+k.max+" "+n);s2=true;}});if(s2){return;}var v2=true;if(Q1.properties&&Q1.properties.hasOwnProperty("hideLabel")&&!Q1.properties["hideLabel"]){v2=false;}var w2=true;var x2=false;if(O1==='donut'){x2=true;}d.removeAllAggregation();U1={legend:{isScrollable:false},title:{visible:false},interaction:{noninteractiveMode:w2?false:true,selectability:{legendSelection:x2?true:false,axisLabelSelection:false,mode:'EXCLUSIVE',plotLassoSelection:false,plotStdSelection:true},zoom:{enablement:'disabled'}},plotArea:{window:{start:'firstDataPoint',end:'lastDataPoint'},dataLabel:{visible:N1||x2?true:false,type:'value'},dataPoint:{invalidity:'ignore'},alignment:{vertical:'top'}},categoryAxis:{label:{truncatedLabelRatio:0.15}},general:{groupData:false,showAsUTC:true}};if(Q1.properties&&Q1.properties.semanticColor===true&&j1(S1,K1)){var y2=h.getText("GOOD");var z2=h.getText("BAD");var A2=h.getText("CRITICAL");var B2=h.getText("OTHERS");if(S1.length===1){var C2=k1(S1[0],K1,n2,d);var y2=C2[0]||y2,z2=C2[1]||z2,A2=C2[2]||A2,B2=h.getText("OTHERS");}U1.plotArea.dataPointStyle={rules:[{callback:function(k){var m=h1(k,n2,S1);if(!m){return false;}var n=K1[m.substring(1)];var v=g1(k,n);if(v===a.criticalityConstants.StateValues.Positive){return true;}else if(v==="Positive"){return true;}},properties:{color:"sapUiChartPaletteSemanticGoodLight1"},"displayName":y2},{callback:function(k){var m=h1(k,n2,S1);if(!m){return false;}var n=K1[m.substring(1)];var v=g1(k,n);if(v===a.criticalityConstants.StateValues.Critical){return true;}else if(v==="Critical"){return true;}},properties:{color:"sapUiChartPaletteSemanticCriticalLight1"},"displayName":A2},{callback:function(k){var m=h1(k,n2,S1);if(!m){return false;}var n=K1[m.substring(1)];var v=g1(k,n);if(v===a.criticalityConstants.StateValues.Negative){return true;}else if(v==="Negative"){return true;}},properties:{color:"sapUiChartPaletteSemanticBadLight1"},"displayName":z2},{callback:function(k){var m=h1(k,n2,S1);if(!m){return false;}var n=K1[m.substring(1)];var v=g1(k,n);if(v===a.criticalityConstants.StateValues.None){return true;}else if(v==="Neutral"){return true;}},properties:{color:"sapUiChartPaletteSemanticNeutralLight1"},"displayName":B2}]};}var D2=x.getProperty("/bEnableStableColors");var E2=x.getProperty("/colorPalette");var F2;if(!D2&&z.indexOf(M1.ChartType.$EnumMember)>=0&&E2&&Object.keys(E2).length>=2&&Object.keys(E2).length<=4){o(R1,function(i,k){if(k&&k.Role&&k.Role.$EnumMember==="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series"){F2=k.Dimension&&k.Dimension.$PropertyPath;return;}});var G2;if(F2){if(n2&&n2[F2]){if(n2[F2][w.LABEL_KEY_V4]){G2=t1(n2[F2][w.LABEL_KEY_V4]?n2[F2][w.LABEL_KEY_V4]:n2[F2][w.LABEL_KEY_V4].Path,d,n2);}else if(n2[F2][w.LABEL_KEY]){G2=n2[F2][w.LABEL_KEY];}else if(F2){G2=F2;}}if(E2 instanceof Array){var H2=E2.map(function(v){return v.color;});var I2=E2.map(function(v){return v.legendText;});var J2=I2[0]!=undefined?I2[0]:h.getText("OTHERS");var K2=I2[1]!=undefined?I2[1]:h.getText("BAD");var L2=I2[2]!=undefined?I2[2]:h.getText("CRITICAL");var M2=I2[3]!=undefined?I2[3]:h.getText("GOOD");}U1.plotArea.dataPointStyle={rules:[{callback:function(k){if(k&&(k[G2]==="3"||k[G2]===3)){if(E2 instanceof Array){if(E2.length<4){return false;}}else if(E2&&!E2.hasOwnProperty(3)){return false;}return true;}},properties:{color:E2 instanceof Array&&H2.length?H2[3]:E2[3]&&E2[3]["color"]},"displayName":M2||E2[3]&&E2[3]["legendText"]},{callback:function(k){if(k&&(k[G2]==="2"||k[G2]===2)){if(E2 instanceof Array){if(E2.length<3){return false;}}else if(E2&&!E2.hasOwnProperty(2)){return false;}return true;}},properties:{color:E2 instanceof Array&&H2.length?H2[2]:E2[2]&&E2[2]["color"]},"displayName":L2||E2[2]&&E2[2]["legendText"]},{callback:function(k){if(k&&(k[G2]==="1"||k[G2]===1)){return true;}},properties:{color:E2 instanceof Array&&H2.length?H2[1]:E2[1]&&E2[1]["color"]},"displayName":K2||E2[1]&&E2[1]["legendText"]},{callback:function(k){if(k&&(k[G2]==="0"||k[G2]===0)){return true;}},properties:{color:E2 instanceof Array&&H2.length?H2[0]:E2[0]&&E2[0]["color"]},"displayName":J2||E2[0]&&E2[0]["legendText"]}]};}}var N2=false;var O2=false;if(M1.ChartType.$EnumMember===w.SCATTER_CHARTTYPE||M1.ChartType.$EnumMember===w.BUBBLE_CHARTTYPE||M1.ChartType.$EnumMember===w.LINE_CHARTTYPE){if(M1&&M1.AxisScaling&&M1.AxisScaling.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"){var P2=M1.AxisScaling;if(P2.AutoScaleBehavior&&P2.AutoScaleBehavior.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisAutoScaleBehaviorType"){var Q2=P2.AutoScaleBehavior;if(Q2.ZeroAlwaysVisible&&Q2.ZeroAlwaysVisible=="true"){U1.plotArea.adjustScale=false;N2=true;}else if(Q2.DataScope){U1.plotArea.adjustScale=true;N2=true;}}else if(P2.RecordType=="com.sap.vocabularies.UI.v1.ChartAxisScalingType"&&P2.ScaleBehavior&&P2.ScaleBehavior.$EnumMember){var R2=P2.ScaleBehavior.$EnumMember;var S2=R2.substring(R2.lastIndexOf('/')+1,R2.length);if(S2=="FixedScale"){O2=true;}}}else if(M1&&M1.AxisScaling&&M1.AxisScaling.$EnumMember){var T2=M1.AxisScaling.$EnumMember.substring(M1.AxisScaling.$EnumMember.lastIndexOf('/')+1,M1.AxisScaling.$EnumMember.length);switch(T2){case"AdjustToDataIncluding0":U1.plotArea.adjustScale=false;N2=true;break;case"AdjustToData":U1.plotArea.adjustScale=true;N2=true;break;case"MinMaxValues":O2=true;break;default:break;}}if(O2){var U2=[];if(M1["MeasureAttributes"][0]&&M1["MeasureAttributes"][0].DataPoint&&M1["MeasureAttributes"][0].DataPoint.AnnotationPath){var V2=M1["MeasureAttributes"][0].DataPoint.AnnotationPath;var W2=V2.substring(V2.lastIndexOf('@')+1,V2.length);if(K1&&K1[W2]){var X2=K1[W2];if(X2&&X2.MaximumValue&&X2.MaximumValue&&X2.MinimumValue&&X2.MinimumValue){U2.push({feed:"valueAxis",max:X2.MaximumValue,min:X2.MinimumValue});N2=true;}else{L.error(y.ERROR_MISSING_AXISSCALES);}}}if(M1.ChartType.$EnumMember!==w.LINE_CHARTTYPE&&M1["MeasureAttributes"][1]&&M1["MeasureAttributes"][1].DataPoint&&M1["MeasureAttributes"][1].DataPoint.AnnotationPath){var V2=M1["MeasureAttributes"][1].DataPoint.AnnotationPath;var W2=V2.substring(V2.lastIndexOf('@')+1,V2.length);if(K1&&K1[W2]){var X2=K1[W2];if(X2&&X2.MaximumValue&&X2.MaximumValue&&X2.MinimumValue&&X2.MinimumValue){U2.push({feed:"valueAxis2",max:X2.MaximumValue,min:X2.MinimumValue});N2=true;}else{L.error(y.ERROR_MISSING_AXISSCALES);}}}d.setVizScales(U2);}}W1=R1.slice();X1=S1.slice();var Y2=0;var Z2=0;var $2;var _2;var a3=false;var b3=false;var c3;var d3=[];var e3=[],f3=[];if((O1==="column"||O1==="bar"||O1==="vertical_bullet")&&Q1.feeds&&(Q1.feeds.length>0)){var g3;for(g3=0;g3<Q1.feeds.length;g3++){if(Q1.feeds[g3].uid==="color"){Q1.feeds.splice(g3,1);break;}}for(g3=0;g3<Q1.feeds.length;g3++){if(Q1.feeds[g3].uid==="categoryAxis"){delete Q1.feeds[g3].role;break;}}if(x.getProperty("/colorPalette")){for(g3=0;g3<Q1.feeds.length;g3++){if(Q1.feeds[g3].uid==="categoryAxis"){Q1.feeds[g3].role="Category";break;}}Q1.feeds.push({"uid":"color","min":1,"type":"dimension","role":"Series"});}}o(Q1.feeds,function(i,m){var n=m.uid;var v=[];if(m.type){var E3,F3,G3;if(m.type==="dimension"){E3=R1.length;F3="Dimension";G3="dimensions";V1=W1;Y1=Z1;}else{E3=S1.length;F3="Measure";G3="measures";V1=X1;Y1=$1;}var H3=0,I3=E3;if(m.min){H3=H3>m.min?H3:m.min;}if(m.max){I3=I3<m.max?I3:m.max;}if(!m.role){var J3=V1.length;for(var j=0;j<J3&&v.length<I3;++j){var K3=V1[j];V1.splice(j,1);--J3;--j;v.push(K3);if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY];}if(n1(n2,c3)){a3=true;}else{b3=true;}if(!a3){Y2=l1(Y2,K3,K1);$2=m1($2,K3,K1);}else{Z2=l1(Z2,K3,K1);_2=m1(_2,K3,K1);}}}else{var L3=m.role.split("|");o(L3,function(j,c4){if(v.length===I3){return false;}var J3=V1.length;for(var k=0;k<J3&&v.length<I3;++k){var K3=V1[k];if(K3&&K3.Role&&K3.Role.$EnumMember&&K3.Role.$EnumMember.split("/")&&K3.Role.$EnumMember.split("/")[1]){var d4=K3.Role.$EnumMember.split("/")[1];if(d4===c4){V1.splice(k,1);--J3;--k;v.push(K3);if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY];}if(n1(n2,c3)){a3=true;}else{b3=true;}if(!a3){Y2=l1(Y2,K3,K1);$2=m1($2,K3,K1);}else{Z2=l1(Z2,K3,K1);_2=m1(_2,K3,K1);}}}else if((Y1?Array.prototype.indexOf.call(Y1,K3):-1)===-1){Y1.push(K3);}}});if(v.length<I3){o(Y1,function(k,K3){var c4;var g3;if((c4=Q1[G3].defaultRole)&&((L3?Array.prototype.indexOf.call(L3,c4):-1)!==-1)&&(g3=(V1?Array.prototype.indexOf.call(V1,K3):-1)!==-1)){V1.splice(g3,1);v.push(K3);if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_ISOCurrency].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path?n2[K3[F3].$PropertyPath][w.UNIT_KEY_V4_Unit].$Path:undefined;}else if(n2[K3[F3].$PropertyPath][w.UNIT_KEY]){c3=n2[K3[F3].$PropertyPath][w.UNIT_KEY];}if(n1(n2,c3)){a3=true;}else{b3=true;}if(!a3){Y2=l1(Y2,K3,K1);$2=m1($2,K3,K1);}else{Z2=l1(Z2,K3,K1);_2=m1(_2,K3,K1);}if(v.length===I3){return false;}}});}if(v.length<H3){L.error(y.CARD_ERROR+y.MIN_FEEDS+O1+" "+y.FEEDS_OBTAINED+v.length+" "+y.FEEDS_REQUIRED+H3+" "+y.FEEDS);return false;}}if(v.length){var M3=[];var N3;if(!(N3=d.getDataset())){L.error(y.NO_DATASET);return false;}G=K1;o(v,function(i,K3){if(!K3||!K3[F3]||!K3[F3].$PropertyPath){L.error(y.INVALID_CHART_ANNO);return false;}var k=K3[F3].$PropertyPath;var G2=k;var c4=k;var d4=null;if(n2&&n2[k]){if(n2[k]["annotations"]){if(n2[k]["annotations"]["@"+w.LABEL_KEY_V4]){if(n2[k]["annotations"]["@"+w.LABEL_KEY_V4]instanceof String&&n2[k]["annotations"]["@"+w.LABEL_KEY_V4]){G2=t1(n2[k]["annotations"]["@"+w.LABEL_KEY_V4],d,n2);}else if(n2[k]["annotations"]["@"+w.LABEL_KEY_V4].$Path){G2=n2[k]["annotations"]["@"+w.LABEL_KEY_V4].$Path;}else{G2=n2[k]["annotations"]["@"+w.LABEL_KEY_V4];}}else if(n2[k]["annotations"]["@"+w.LABEL_KEY]){G2=n2[k]["annotations"]["@"+w.LABEL_KEY];}else if(k){G2=k;}if(n2[k]["annotations"]["@"+w.TEXT_KEY_V4]){c4=n2[k]["annotations"]["@"+w.TEXT_KEY_V4]?n2[k]["annotations"]["@"+w.TEXT_KEY_V4]:n2[k]["annotations"]["@"+w.TEXT_KEY_V4].$Path;}else if(n2[k]["annotations"]["@"+w.TEXT_KEY]){c4=n2[k]["annotations"]["@"+w.TEXT_KEY];}}else if(k){c4=k;}d4=n2[k].$Type||null;}var e4;if((d4==="Edm.DateTime"||d4==="Edm.DateTimeOffset")&&c4===k){e4="{path:'"+k+"', formatter: 'sap.ovp.cards.v4.charts.VizAnnotationManager.returnDateFormat'}";}else{if(n2[k]&&n2[k]["annotations"]&&n2[k]["annotations"]["@"+w.TEXT_KEY_V4]&&n2[k]["annotations"]["@"+w.TEXT_KEY_V4+"@"+w.TEXT_ARRANGEMENT_ANNO]){var f4,g4;f4=n2[k]["annotations"]["@"+w.TEXT_KEY_V4+"@"+w.TEXT_ARRANGEMENT_ANNO];g4=f4&&f4.$EnumMember;if(!g4){f4=n2[k]["annotations"]["@"+w.TEXT_KEY_V4]["@"+w.TEXT_ARRANGEMENT_ANNO];g4=f4&&f4.$EnumMember;}if(!g4){var h4=G;f4=h4&&h4["@"+w.TEXT_ARRANGEMENT_ANNO];g4=f4&&f4.$EnumMember;}switch(g4){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":e4="{"+c4.$Path+"}"+" "+"("+"{"+k+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":e4="{"+k+"}"+" "+"("+"{"+c4.$Path+"}"+")";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":e4="{"+c4.$Path+"}";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeperate":e4="{"+k+"}"+" "+"("+"{"+c4.$Path+"}"+")";break;default:e4="{"+k+"}";break;}}else{e4="{"+c4+"}";}}M3.push(G2);if(F3==="Dimension"){if(n==="waterfallType"){var i4=new e({name:G2,value:"{"+k+"}"});}else{var i4=new e({name:G2,value:"{"+k+"}",displayValue:e4});}var j4=n2[k][w.SEMANTICS_KEY];var k4=B(d.getModel(),j2,k);if(_1&&(d4==="Edm.DateTime"||k4||d4==="Edm.DateTimeOffset"||(j4&&j4.lastIndexOf("year",0)===0))){i4.setDataType("date");}N3.addDimension(i4);if((f3?Array.prototype.indexOf.call(f3,G2):-1)===-1){f3.push(G2);}}else{N3.addMeasure(new M({name:G2,value:"{"+k+"}"}));if(((e3?Array.prototype.indexOf.call(e3,G2):-1)===-1)&&(n!="bubbleWidth")){e3.push(G2);}}});d.addFeed(new F({'uid':n,'type':F3,'values':M3}));if(n==="categoryAxis"){U1[n]={title:{visible:v2?false:true,text:M3.join(", ")},label:{formatString:a3?'CURR':'axisFormatter',truncatedLabelRatio:0.15}};}else{U1[n]={title:{visible:v2?false:true,text:M3.join(", ")},label:{formatString:a3?'CURR':'axisFormatter'}};}d3.push(U1[n]);if(Q1.hasOwnProperty("vizProperties")){var O3=0;var P3=Q1.vizProperties.length;var Q3;var R3;for(;O3<P3;O3++){if(Q1.vizProperties[O3].hasOwnProperty("value")){R3=Q1.vizProperties[O3].value;}if(Q1.vizProperties[O3].hasOwnProperty("path")){Q3=(Q1.vizProperties[O3].path).split(".");var S3=Q3.length;var T3,U3;var V3;for(var W3=0,V3=Q3[0],T3=U1,U3=r2;W3<S3;++W3){if(W3===S3-1){if(U3&&U3.hasOwnProperty(V3)){if(O1==='donut'&&(U3[V3]==="value"||U3[V3]==="percentage")){R3=U3[V3];}else if(O1!='donut'){R3=U3[V3];}}if((N2&&(V3!="adjustScale"))||(!N2&&(V3==="adjustScale"))||(!N2&&(V3!="adjustScale"))){T3[V3]=R3;}break;}T3[V3]=T3[V3]||{};T3=T3[V3];if(U3){U3[V3]=U3[V3]||{};U3=U3[V3];}V3=Q3[W3+1];}}}}if(m.hasOwnProperty("vizProperties")){var i=0;var X3=m.vizProperties.length;var Y3;var Z3;var $3;for(;i<X3;i++){if(m.vizProperties[i].hasOwnProperty("method")){Z3=m.vizProperties[i].method;switch(Z3){case'count':Y3=M3.length;if(m.vizProperties[i].hasOwnProperty("min")&&Y3<=m.vizProperties[i].min){Y3=m.vizProperties[i].min;}else if(m.vizProperties[i].hasOwnProperty("max")&&Y3>=m.vizProperties[i].max){Y3=m.vizProperties[i].max;}break;default:break;}}else if(m.vizProperties[i].hasOwnProperty("value")){Y3=m.vizProperties[i].value;}if(m.vizProperties[i].hasOwnProperty("path")){$3=(m.vizProperties[i].path).split(".");var _3=$3.length;for(var j=0,a4=$3[0],b4=U1;j<_3;++j){if(j===_3-1){b4[a4]=Y3;break;}b4[a4]=b4[a4]||{};b4=b4[a4];a4=$3[j+1];}}}}}}});var h3=d.getFeeds();if(Q1.properties&&Q1.properties.semanticPattern===true&&Q(h3,O1)){o(h3,function(i,v){if(h3[i].getType()==='Measure'&&((h3[i].getUid()==='valueAxis')||(h3[i].getUid()==='actualValues'))){var k;o(S1,function(g3,I3){var J3=P(I3.Measure.$PropertyPath,n2);if(J3===h3[i].getValues()[0]){k=J(I3,K1);return false;}});if(k){var m=P(k.Measure.$PropertyPath,n2);var n=(K1[k.DataPoint.AnnotationPath.substring(1)].ForecastValue.PropertyPath||K1[k.DataPoint.AnnotationPath.substring(1)].ForecastValue.Path);var E3=P(n,n2);var F3=h.getText("ACTUAL",[m]);var G3=h.getText("FORECAST",[E3]);U1.plotArea.dataPointStyle={rules:[{dataContext:{MeasureNamesDimension:m},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"line",lineColor:"sapUiChartPaletteSequentialHue1Light1"},displayName:F3},{dataContext:{MeasureNamesDimension:E3},properties:{color:"sapUiChartPaletteSequentialHue1Light1",lineType:"dotted",lineColor:"sapUiChartPaletteSequentialHue1Light1",pattern:"diagonalLightStripe"},displayName:G3}]};d.getDataset().addMeasure(new M({name:E3,value:"{"+n+"}"}));var H3=h3[i].getValues();H3.push(E3);h3[i].setValues(H3);}return false;}});}var i3=false;if(E2&&E2.dimensionSettings&&Object.keys(E2.dimensionSettings).length>0){var j3=Object.keys(E2.dimensionSettings);for(var i=0;i<j3.length;i++){var k3=j3[i];var l3=E2.dimensionSettings[k3];if(Object.keys(l3).length>10){i3=true;break;}}}if(D2&&A.indexOf(M1.ChartType.$EnumMember)>=0&&!Boolean(i3)){var m3=[];var n3=true;for(var i=0;i<R1.length;i++){var o3=R1[i].Dimension.$PropertyPath;m3.push(o3);}for(var i=0;i<m3.length;i++){var k3=m3[i];if(j3.indexOf(k3)>-1){var p3=E2.dimensionSettings[k3];var q3=Object.keys(p3);var r3=[];for(var i=0;i<q3.length;i++){var s3=p3[q3[i]];r3.push(s3);}n3=n3&&r3.every(I1);}}if(n3){var t3=[];for(var i=0;i<m3.length;i++){var k3=m3[i];if(j3.indexOf(k3)>-1){var p3=E2.dimensionSettings[k3];var q3=Object.keys(p3);var r3=[];for(var i=0;i<q3.length;i++){var s3=p3[q3[i]];r3.push(s3);}H1(r3);for(var j=0;j<r3.length;j++){var u3=r3[j].dimensionValue;var v3=r3[j].color;var s3={"properties":{"color":v3}};s3.dataContext={};var w3=r1(n2,d,k3);s3.dataContext[w3]=u3;s3.displayName=u3;t3.push(s3);}}}U1.plotArea.dataPointStyle=U1.plotArea.dataPointStyle||{};U1.plotArea.dataPointStyle["rules"]=t3;}else{var t3=[];for(var i=0;i<m3.length;i++){var k3=m3[i];if(j3.indexOf(k3)>-1){var p3=E2.dimensionSettings[k3];var q3=Object.keys(p3);var r3=[];for(var i=0;i<q3.length;i++){var s3=p3[q3[i]];r3.push(s3);}H1(r3);var x3=r3.map(J1);}}U1.legend.order=function(m,n){var k=x3.indexOf(m);var v=x3.indexOf(n);return k>v?1:-1;};}}if(Q1.properties&&Q1.properties.semanticPattern===true&&Q(h3,O1)&&d.getVizType()==="vertical_bullet"){o(h3,function(i,v){if(h3[i].getType()==='Measure'&&((h3[i].getUid()==='valueAxis')||(h3[i].getUid()==='actualValues'))){var k;o(S1,function(g3,E3){var F3=P(E3.Measure.PropertyPath,n2);if(F3===h3[i].getValues()[0]){k=K(E3,K1);return false;}});if(k){var m=(K1[k.DataPoint.AnnotationPath.substring(1)].TargetValue.PropertyPath||K1[k.DataPoint.AnnotationPath.substring(1)].TargetValue.Path);var n=P(m,n2);d.getDataset().addMeasure(new M({name:n,value:"{"+m+"}"}));d.addFeed(new F({'uid':"targetValues",'type':"Measure",'values':[n]}));}return false;}});}if(a3&&b3){L.warning(h.getText("Currency_non_currency_measure"));}o(h3,function(i,k){var m=k.getProperty("type");if(m==="Measure"){var n=k.getProperty("values");var v=true;var E3=M1.MeasureAttributes.filter(function(F3){var G3=F3[m].$PropertyPath;var H3=n2[G3];return Object.keys(H3).length>0&&n.indexOf(G3)>=0;});o(E3,function(j,F3){if(o1(n2,F3,m)||p1(n2,F3,m)){v=false;}else{v=true;return false;}});if(!v){U1[k.getProperty('uid')]['label']['allowDecimals']=false;}}});var y3;if(_2===undefined){_2="";}if($2===undefined){$2="";}if(a3){y3=w1(_2,a3);}else{y3=w1($2,a3);}if(f){f.setScale(y3);}v1(e3,f3,r);var z3="";o(h3,function(i,k){var m="-1";var n=k.getProperty("type");if(n==="Measure"){var v=d3.filter(function(G3){var H3=G3["title"]["text"].split(",").filter(function(I3){if(k.getValues().indexOf(I3.trim())>=0){return true;}else{return false;}});if(H3.length>0){return true;}else{return false;}});if(v&&v.length){var E3=k.getValues();if(E3&&E3.length){o(E3,function(i,G3){var H3=G3.trim();var I3=S1.filter(function(M3){if(M3["Measure"]&&M3["Measure"]["PropertyPath"]){var N3=M3["Measure"]["PropertyPath"];if((n2[N3]&&n2[N3][w.LABEL_KEY]===H3)||(n2[N3]&&n2[N3][w.LABEL_KEY_V4]===H3)){return true;}else{return false;}}});if(I3&&I3.length){var J3=I3[0];if(!o1(n2,J3,n)&&!p1(n2,J3,n)){var K3="";if(J3&&J3["DataPoint"]&&J3["DataPoint"]["AnnotationPath"]&&J3["DataPoint"]["AnnotationPath"]){K3=J3["DataPoint"]["AnnotationPath"]&&J3["DataPoint"]["AnnotationPath"].substring(1);if(K3!=""){var L3;L3=K1[K3]&&K1[K3]["ValueFormat"]&&K1[K3]["ValueFormat"]["NumberOfFractionalDigits"]&&K1[K3]["ValueFormat"]["NumberOfFractionalDigits"]["Int"];m=L3>m?L3:m;}}}else{m=m<"0"?"0":m;}}});}}if(v&&v[0]&&v[0].label&&v[0].label.formatString){var F3=v[0].label.formatString;}z3="";if(a3){if(F3==='CURR'){z3='CURR/'+m.toString()+"/";}else{z3='axisFormatter/'+m.toString()+"/";}}else{z3='axisFormatter/'+m.toString()+"/";}if(v&&v[0]){v[0].label.formatString=z3;}}});if(O1==="vertical_bullet"){U1["valueAxis"]={title:{visible:v2?false:true},label:{formatString:z3}};}var A3="";var B3="";if(a3){A3=Z2.toString();B3='CURR/'+Z2.toString()+"/";}else{A3=Y2.toString();B3='axisFormatter/'+Y2.toString()+"/";}if(O1==="donut"||N1){if(O1==="donut"){U1.legendGroup={layout:{height:0.1}};}U1.plotArea.dataLabel.formatString=B3;if(U1.plotArea.dataLabel.type==="percentage"){U1.plotArea.dataLabel.formatString="0.0%/"+A3+"/";}}c1(W1,Q1,"dimension");c1(X1,Q1,"measure");if(_1){var C3=R1[0].Dimension.$PropertyPath;var D3=d.getModel().getMetaModel().getObject("/"+j2+"/"+C3+"@");if(D3["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]){U1.timeAxis.levels=["year","month"];}else if(D3["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]){U1.timeAxis.levels=["year","quarter"];}else if(D3["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]){U1.timeAxis.levels=["year","week"];}else if(D3["@com.sap.vocabularies.Common.v1.IsCalendarYear"]){U1.timeAxis.levels=["year"];}}d.setVizProperties(U1);}
function r1(m,v,d){var f="";if(m&&m[d]){if(m[d][w.LABEL_KEY_V4]){f=t1(m[d][w.LABEL_KEY_V4].String?m[d][w.LABEL_KEY_V4].String:m[d][w.LABEL_KEY_V4].Path,v,m);}else if(m[d][w.LABEL_KEY]){f=m[d][w.LABEL_KEY];}else if(d){f=d;}}return f;}
function s1(v,d,f,j){if(v&&(v.getVizType()==="bubble"||v.getVizType()==="scatter")){return;}var k,n,r,s;var x;var K1=w.UNIT_KEY;var L1=w.UNIT_KEY_V4_ISOCurrency;var M1=w.UNIT_KEY_V4_Unit;var N1;var O1=[];if(!(k=v.getModel('ovpCardProperties'))){L.error(y.CARD_ERROR+"in "+y.CARD_CONFIG+y.NO_CARD_MODEL);return;}var P1=v.getModel();var Q1=k.getProperty("/entitySet");if(!P1||!Q1){return;}n=j[k.getProperty("/entityType").$Type];if(!n){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}var R1=u1(P1,Q1);r=k.getProperty("/chartAnnotationPath");if(!r||!(s=n["@"+r])){L.error(y.CARD_ANNO_ERROR+"in "+y.CARD_ANNO);return;}if(!(x=s.MeasureAttributes)||!x.length){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return;}o(x,function(i,m){N1=m.Measure.$PropertyPath;if(m.DataPoint&&m.DataPoint.AnnotationPath){var $1=n[m.DataPoint.AnnotationPath.substring(1)];if($1.ForecastValue&&($1.ForecastValue.PropertyPath||$1.ForecastValue.Path)){O1.push(($1.ForecastValue.PropertyPath||$1.ForecastValue.Path));}}O1.push(N1);});var S1=d?d:null;var T1="";var U1=true;var V1=[];var W1=v.getFeeds();o(W1,function(i,m){if(m.getType()==="Measure"){V1=V1.concat(m.getValues());}});if(S1){o(O1,function(i,m){var $1=r1(R1,v,m);if((V1?Array.prototype.indexOf.call(V1,$1):-1)!=-1){if(R1&&R1[m]){var _1;if(R1[m][L1]){_1=R1[m][L1].Path?R1[m][L1].Path:R1[m][L1].String;}else if(R1[m][M1]){_1=R1[m][M1].Path?R1[m][M1].Path:R1[m][M1].String;}else if(R1[m][K1]){_1=R1[m][K1];}if(!_1){U1=false;return false;}if(_1&&R1[_1]){for(var i=0;i<S1.length;i++){var a2=S1[i];if(U1){if(T1&&a2[_1]&&(a2[_1]!="")&&(T1!="")&&(T1!=a2[_1])){U1=false;break;}}T1=a2[_1];}}}}});}var X1="";if(U1){if(T1!=""){X1=h.getText("IN_NO_SCALE",[T1]);X1=" "+X1;}if(f){f.setText(X1);f.data("aria-label",X1,true);var Y1=v.data("aria-label");if(Y1&&X1&&Y1.indexOf(X1)===-1){var Z1=Y1+X1;v.data("aria-label",Z1,true);}}}}
function t1(f,v,m){var r;var s;var d;if(f&&f.indexOf("{")===0){f=f.slice(1,-1);if(f.indexOf(">")!=-1){d=f.split(">");r=d[0];s=d[1];}else if(f.indexOf("&gt;")!=-1){d=f.split("&gt;");r=d[0];s=d[1];}try{f=v.getModel(r).getProperty(s);}catch(i){f=m[f][w.LABEL_KEY_V4].String;L.error("Unable to read labels from resource file",i);}}return f;}
function u1(m,d){var f=U.cacheODataMetadata(m);if(!f){return undefined;}return f[d];}
function v1(m,d,f){var j="",k="",n="";if(f){j=f.getText();}if(m&&(m.length>1)){for(var i=0;i<m.length-1;i++){if(k!=""){k+=", ";}k+=m[i];}k=h.getText("MEAS_DIM_TITLE",[k,m[i]]);}else if(m){k=m[0];}if(d&&(d.length>1)){for(var i=0;i<d.length-1;i++){if(n!=""){n+=", ";}n+=d[i];}n=h.getText("MEAS_DIM_TITLE",[n,d[i]]);}else if(d){n=d[0];}if(f&&(j==="")){j=h.getText("NO_CHART_TITLE",[k,n]);f.setText(j);f.data("aria-label",j,true);}}
function w1(m,i){var n=1;var s;if(i){var d=N.getCurrencyInstance({style:'short',currencyCode:false,shortRefNumber:m});s=d.format(Number(n));}else{var f=N.getFloatInstance({style:'short',shortRefNumber:m});s=f.format(Number(n));}var j=s.slice(-1);return j;}
function x1(v,d){v.attachSelectData(function(f){var n=l.bCRTLPressed?l.constants.explace:l.constants.inplace;l.bCRTLPressed=false;var m=v.getModel('ovpCardProperties');var s=v.getModel();var K1=m.getProperty("/entitySet");var L1=u1(s,K1);var M1=[],N1=[];var O1={},P1={};var Q1=v.getDataset().getDimensions();var R1;var S1=m.getProperty("/entityType");var T1=d.getMetaModel().getData()["$Annotations"];for(var i=0;i<Q1.length;i++){M1.push(Q1[i].getName());}var U1=v.getDataset().getBinding("data").getCurrentContexts().map(function(x){return x.getObject();});if(f.getParameter("data")&&f.getParameter("data")[0]&&f.getParameter("data")[0].data){N1=Object.keys(f.getParameter("data")[0].data);R1=f.getParameter("data")[0].data._context_row_number;var V1=v.getDataset().getBinding("data").getContexts()[R1];var W1=d.getEntityNavigationEntries(V1)[0];if(U1[R1].$isOthers&&U1[R1].$isOthers===true){var X1={},Y1=[];for(var j=0;j<M1.length;j++){for(var k=0;k<N1.length;k++){if(M1[j]===N1[k]){for(var Z1 in L1){if(L1.hasOwnProperty(Z1)){var $1=L1[Z1][w.LABEL_KEY]||L1[Z1][w.NAME_KEY]||L1[Z1][w.NAME_CAP_KEY];if($1===N1[k]){Y1.push(Z1);}}}}}}for(var i=0;i<Y1.length;i++){X1[Y1[i]]=[];for(var j=0;j<U1.length-1;j++){if(j!=R1){X1[Y1[i]].push(U1[j][Y1[i]]);}}}var _1={$isOthers:true};var a2={getObject:function(){return _1;},getOtherNavigationDimensions:function(){return X1;}};if(O.checkIfAPIIsUsed(d)){if(d.checkAPINavigation()){c.onContentClicked(a2);}}else{if(W1){d.doNavigation(a2,W1,n);}}}else{for(var j=0;j<M1.length;j++){for(var k=0;k<N1.length;k++){if(M1[j]===N1[k]){for(var Z1 in L1){if(T1[S1.$Type+"/"+Z1]){var $1=(typeof T1[S1.$Type+"/"+Z1]["@"+w.LABEL_KEY_V4]==='string'&&T1[S1.$Type+"/"+Z1]["@"+w.LABEL_KEY_V4])||T1[S1.$Type+"/"+Z1][w.LABEL_KEY]||T1[S1.$Type+"/"+Z1][w.NAME_KEY]||T1[S1.$Type+"/"+Z1][w.NAME_CAP_KEY]||Z1;if($1.match(/{@i18n>.+}/gi)){var b2=this.getModel("@i18n").getResourceBundle();$1=b2.getText($1.substring($1.indexOf(">")+1,$1.length-1));}if($1===N1[k]){O1[Z1]=U1[R1][Z1];}}}}for(var Z1 in U1[R1]){if(L1.hasOwnProperty(Z1)){P1[Z1]=U1[R1][Z1];}}}}if(O1){o(Object.keys(O1),function(i,Z1){var r=L1[Z1]&&L1[Z1]["annotations"];if(L1[Z1]["$Type"]==="Edm.String"){if(L1[Z1]["sap:semantics"]==="yearmonth"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"])){O1[Z1]=(O1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYMM"}).format(O1[Z1]):O1[Z1]);}else if(L1[Z1]["sap:semantics"]==="yearquarter"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"])){O1[Z1]=(O1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYQ"}).format(O1[Z1]):O1[Z1]);}else if(L1[Z1]["sap:semantics"]==="yearweek"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"])){O1[Z1]=(O1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYww"}).format(O1[Z1]):O1[Z1]);}}});}if(P1){o(Object.keys(P1),function(i,Z1){var r=L1[Z1]&&L1[Z1]["annotations"];if(L1[Z1]["$Type"]==="Edm.String"){if(L1[Z1]["sap:semantics"]==="yearmonth"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearMonth"])){P1[Z1]=(P1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYMM"}).format(P1[Z1]):P1[Z1]);}else if(L1[Z1]["sap:semantics"]==="yearquarter"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"])){P1[Z1]=(P1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYQ"}).format(P1[Z1]):P1[Z1]);}else if(L1[Z1]["sap:semantics"]==="yearweek"||(r&&r["@com.sap.vocabularies.Common.v1.IsCalendarYearWeek"])){P1[Z1]=(P1[Z1].constructor===Date?D.getDateTimeInstance({pattern:"YYYYww"}).format(P1[Z1]):P1[Z1]);}}});}var c2=S1[m.getProperty('/presentationAnnotationPath')];if(S1){var d2=a.getRequestFields(c2);if(d2&&d2.length>0){o(d2,function(i,r){if(!O1.hasOwnProperty(r)){O1[r]=U1[R1][r];}});}}var a2={getObject:function(){return O1;},getAllData:function(){return P1;}};if(O.checkIfAPIIsUsed(d)){if(d.checkAPINavigation()){c.onContentClicked(a2);}}else{if(W1){d.doNavigation(a2,W1,n);}}}}});}
function y1(d){if(d.$EnumMember.endsWith("Bubble")){return true;}else{return false;}}
function z1(d){var r=false;if(!d||d.constructor!=Array||d.length<1||d[0].constructor!=Object||!d[0].Dimension||!d[0].Dimension.$PropertyPath){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.DIMENSIONS_MANDATORY);return r;}r=true;return r;}
function A1(m){var r=false;if(!m||m.constructor!=Array||m.length<1||m[0].constructor!=Object||!m[0].Measure||!m[0].Measure.$PropertyPath){L.error(y.CHART_ANNO_ERROR+"in "+y.CHART_ANNO+" "+y.MEASURES_MANDATORY);return r;}r=true;return r;}
function B1(d){d=d["$Type"];return d;}
function C1(d){if(d&&d.indexOf("#")!=-1){var f=d.split("#");if(f.length>1){return f[1];}}return"";}
function D1(n,v){var d=v.getModel('ovpCardProperties');var f=E1(v);var m=+f.itemsLength;var i=+d.getProperty("/dataStep");if(m&&i){var j=n.colSpan-1;if(j>=0){m+=i*j;F1(v,m);}}}
function E1(v){var d=v.getModel('ovpCardProperties');var f=d.getProperty("/entityType");var i=d.getProperty("/presentationAnnotationPath");var j=f.hasOwnProperty(i)&&f[i];var m=j&&j.MaxItems;if(m){var k=m.Int32?m.Int32:m.Int;return{itemsLength:+k,dataStep:+d.getProperty("/dataStep")};}}
function F1(v,d){var n,f={},j=[];var k=v.getVizType();var r=v.getModel('ovpCardProperties');var s=r.getProperty("/entityType");var x=r.getProperty("/chartAnnotationPath");var K1=s[x];var L1=v.getParent();var M1=L1.getBinding("data");f.path=M1.getPath();f.parameters={};if(M1.mParameters&&M1.mParameters.select){f.parameters.select=M1.mParameters.select;}f.filters=M1.aApplicationFilters;f.sorter=M1.aSorters;f.length=(k==="donut")?d+1:d;f.template=new g();L1.bindAggregation("data",f);if(k==="donut"){o(K1.MeasureAttributes,function(i,m){j.push(m.Measure.PropertyPath);});n={};n.path=M1.getPath();n.parameters={};n.parameters.select=j.join(",");n.filters=M1.aApplicationFilters;n.sorter=M1.aSorters;n.length=1;n.template=new g();L1.bindAggregation("aggregateData",n);}L1.updateBindingContext();}
function G1(d,m,f){var i=d.getMetaModel().getData().$Annotations;for(var k in m){if(i[f+"/"+k]&&!m[k]["annotations"]){m[k]["annotations"]=i[f+"/"+k];}}}
function H1(d){d.sort(function(r,f){if(r.index<f.index){return-1;}if(r.index>f.index){return 1;}return 0;});}
function I1(d){return d.color!==undefined;}
function J1(r){return r.dimensionValue;}
return{constants:w,errorMessages:y,formatItems:E,formatByType:R,returnDateFormat:T,formatChartAxes:W,hideDateTimeAxis:X,checkExists:Y,validateCardConfiguration:Z,checkNoData:$,getConfig:_,hasTimeSemantics:a1,getChartType:b1,getPrimitiveValue:d1,formThePathForCriticalityStateCalculation:g1,checkFlag:j1,buildVizAttributes:q1,setChartUoMTitle:s1,getMetadata:u1,getSelectedDataPoint:x1,checkBubbleChart:y1,dimensionAttrCheck:z1,measureAttrCheck:A1,getEntitySet:B1,getAnnotationQualifier:C1,reprioritizeContent:D1,getMaxItems:E1,getLabelFromAnnotationPath:t1};},true);
sap.ui.predefine('sap/ovp/cards/v4/charts/analytical/Component',["sap/ovp/cards/v4/generic/Component","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/ovp/cards/jUtils"],function(C,V,u){"use strict";return C.extend("sap.ovp.cards.v4.charts.analytical.Component",{metadata:{properties:{"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.KPIHeader"},"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.charts.analytical.analyticalChart"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.v4.charts.analytical.analyticalChart"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.viz"],components:[]},config:{}},onAfterRendering:function(){u.setAttributeToMultipleElements(".tabindex0","tabindex",0);u.setAttributeToMultipleElements(".tabindex-1","tabindex",-1);}});});
sap.ui.predefine('sap/ovp/cards/v4/charts/analytical/analyticalChart.controller',["sap/ovp/cards/v4/generic/Card.controller","sap/ovp/cards/v4/charts/VizAnnotationManager","sap/viz/ui5/data/FlattenedDataset","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/app/resources","sap/base/util/each","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper","sap/ui/model/FilterOperator","sap/ui/base/SyncPromise","sap/ovp/cards/v4/charts/Utils"],function(C,V,F,O,a,e,o,b,c,S,U){"use strict";var l=new o("OVP.v4.analytical.analyticalChart");return C.extend("sap.ovp.cards.charts.v4.analytical.analyticalChart",{onInit:function(){C.prototype.onInit.apply(this,arguments);var t=this;this.eventhandler=function(d,h,i){if(t.getView().getModel().getMetaModel().getData){var m=t.getView().getModel().getMetaModel().getData();var j=t.getView().getModel('ovpCardProperties').getData().entityType.$Type;var k=b._getEntityRelevantFilters(m[j],i);k=b.mergeFilters(k,t.selectionVaraintFilter);var n=t.getCardItemsBinding();try{if(k&&k.aFilters){f(k,n,{}).then(function(q){var s=n.mParameters.$apply.split("/").length>1?t.getCardItemsBinding().mParameters.$apply.split("/")[1]:t.getCardItemsBinding().mParameters.$apply.split("/")[0];n.mParameters.$apply="filter("+q+")/"+s;n.setAggregation();}).catch(function(p){l.error(p);});}else{if(n.mParameters.$apply.split("/").length>1){n.mParameters.$apply=n.mParameters.$apply.split("/")[1];n.setAggregation();}}if(t.getKPIBinding()){t.getKPIBinding().filter(k);}}catch(p){l.error(p);}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}V.formatChartAxes();function f(d,h,L,W){var R;var m=h.oModel.getMetaModel();var M=m.getMetaContext(h.oModel.resolve(h.sPath,h.oContext));if(!d){return S.resolve();}if(d.aFilters){return S.all(d.aFilters.map(function(s){return f(s,h,L,d.bAnd);})).then(function(i){return w(i.join(d.bAnd?" and ":" or "),W&&!d.bAnd);});}R=m.resolve(r(d.sPath,L),M);return m.fetchObject(R).then(function(p){var i,s,j;if(!p){throw new Error("Type cannot be determined, no metadata for path: "+R);}j=d.sOperator;if(j===c.All||j===c.Any){i=d.oCondition;s=d.sVariable;if(j===c.Any&&!i){return d.sPath+"/any()";}L=Object.create(L);L[s]=r(d.sPath,L);return f(i,L).then(function(k){return d.sPath+"/"+d.sOperator.toLowerCase()+"("+s+":"+k+")";});}return g(d,p.$Type,W);});}function g(d,E,W){var s,h,T,v;function i(j){return T?"tolower("+j+")":j;}T=E==="Edm.String"&&d.bCaseSensitive===false;h=i(decodeURIComponent(d.sPath));v=i(b.formatLiteral(d.oValue1,E));switch(d.sOperator){case c.BT:s=h+" ge "+v+" and "+h+" le "+i(b.formatLiteral(d.oValue2,E));break;case c.NB:s=w(h+" lt "+v+" or "+h+" gt "+i(b.formatLiteral(d.oValue2,E)),W);break;case c.EQ:case c.GE:case c.GT:case c.LE:case c.LT:case c.NE:s=h+" "+d.sOperator.toLowerCase()+" "+v;break;case c.Contains:case c.EndsWith:case c.NotContains:case c.NotEndsWith:case c.NotStartsWith:case c.StartsWith:s=d.sOperator.toLowerCase().replace("not","not ")+"("+h+","+v+")";break;default:throw new Error("Unsupported operator: "+d.sOperator);}return s;}function w(s,W){return W?"("+s+")":s;}function r(p,L){var s=p.split("/");s[0]=L[s[0]];return s[0]?s.join("/"):p;}},onBeforeRendering:function(){if(this.bCardProcessed){return;}V.validateCardConfiguration(this);var v=this.getView().byId("analyticalChart");var d=this.getOwnerComponent().getComponentData();if(v){v.setHeight("21rem");}if(this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"&&d&&d.appComponent){var D=d.appComponent.getDashboardLayoutUtil();var f=D.dashboardLayoutModel.getCardById(d.cardId);if(f.dashboardLayout.autoSpan&&v){v.setHeight("21rem");}}var g=this.getView().byId("vbLayout");var n;var i=false;var h=new F({data:{path:"/"}});this.isVizPropSet=i;this.oDataSet=h;this.vizFrame=v;this.vbLayout=g;if(!v){l.error(V.constants.ERROR_NO_CHART+": ("+this.getView().getId()+")");}else{this.vbLayout.setBusy(true);n=v.getModel('ovpCardProperties').getProperty("/navigation");if(n===undefined||n=="datapointNav"||n!="headerNav"){V.getSelectedDataPoint(v,this);}v.destroyDataset();var j=v.getParent().getBinding("data");this._handleKPIHeader();if(j&&j.getPath()){j.attachDataReceived(this.onDataReceived.bind(this));j.attachDataRequested(this.onDataRequested.bind(this));}else{sap.ui.core.Fragment.load("sap.ovp.cards.charts.generic.noData").then(function(k){var m=this.getCardContentContainer();m.removeAllItems();m.addItem(k);}.bind(this));}v.addEventDelegate({onmouseover:function(){var k=v._oOvpVizFrameTooltip;if(k){k._oPopup.close();}}});}this.bCardProcessed=true;},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);if(!O.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var d=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var s=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var f=document.getElementById(s);var h=this.getHeaderHeight();if(!d.dashboardLayout.autoSpan){if(f){var g=f.getElementsByClassName('sapOvpWrapper')[0];if(g){g.style.height=d.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";}}}if(d.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}var v=this.getView().byId("analyticalChart");if(v){v.setHeight(this._calculateVizFrameHeight()+"px");}}if(!O.checkIfAPIIsUsed(this)){var i=this.getCardPropertiesModel();var j=this.getOwnerComponent().getModel("ui").getData().cards;var r=[];if(this.getMetaModel().getData){var k=this.getMetaModel().getData()[this.getEntitySet().$Type];this.selectionVaraintFilter=b.getSelectionVariantFilters(j,i,this.getEntityType());}var m=this.oCardComponentData.mainComponent;if(m.getGlobalFilter()){r=b._getEntityRelevantFilters(k,m.oGlobalFilter.getFilters());}if(m.getMacroFilterBar()){var n=m.aFilters;r=b._getEntityRelevantFilters(k,n);}r=b.mergeFilters(r,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(r);}if(this.getKPIBinding()){this.getKPIBinding().filter(r);}}},onDataReceived:function(E){if(U.checkIfDataExistInEvent(E)){var t=this;var d=this.getView().byId("analyticalChart");var f=this.getView().byId("bubbleText");var g=this.getView().byId("ovpCT");var h=a.getText("BUBBLESIZE");var j=t.getMetaModel().getData()["$Annotations"];this.oDataSet.bindData("analyticalmodel>/","");d.setDataset(this.oDataSet);var k=d.getParent();if(!this.isVizPropSet){V.buildVizAttributes(d,k,g,this);this.isVizPropSet=true;if(f!=undefined){var p=d.getFeeds();e(p,function(i,v){if(p[i].getUid()=="bubbleWidth"){f.setText(h+" "+p[i].getValues());}});}V.hideDateTimeAxis(d);}if(this.getCardPropertiesModel()&&this.getCardPropertiesModel().getData()&&this.getCardPropertiesModel().getData().colorPalette&&(d.getVizType()==="stacked_column")){var q=d.getDataset().getDimensions(),r=d.getFeeds(),s,u;for(var m=0;m<r.length;m++){if(r[m].getUid()==="color"){s=r[m].getValues()[0];break;}}for(var n=0;n<q.length;n++){if(q[n].getName()===s){u=q[n];break;}}if(s&&u){var w={};w["bDescending"]=true;u.setSorter(w);}}var x=this.getView().byId("ovpUoMTitle");var y=E?E.getSource().getCurrentContexts().map(function(i){return i&&i.getObject();}):null;V.setChartUoMTitle(d,y,x,j);if(this.bFlag==true){this.bFlag=false;this.vbLayout.setBusy(false);}else{setTimeout(function(){t.vbLayout.setBusy(false);},0);}V.checkNoData(E,this.getCardContentContainer(),d);}},onDataRequested:function(){this.vbLayout.setBusy(true);},getCardItemsBinding:function(){var v=this.getView().byId("analyticalChart");if(v&&v.getDataset()&&v.getDataset().getBinding("data")&&this.vbLayout){this.vbLayout.setBusy(false);}if(v&&v.getParent()){return v.getParent().getBinding("data");}return null;},resizeCard:function(n){var d=this.getCardPropertiesModel();this.newCardLayout=n;d.setProperty("/cardLayout/rowSpan",n.rowSpan);d.setProperty("/cardLayout/colSpan",n.colSpan);var f=this.getCardPropertiesModel().getProperty("/cardLayout");var h=this.getHeaderHeight();var s=this.getView().getDomRef().querySelectorAll(".sapOvpWrapper");for(var i=0;i<s.length;i++){s[i].style.height=(n.rowSpan*f.iRowHeightPx+2)-(h+2*f.iCardBorderPx)+"px";}var g=this.getView().byId("analyticalChart");var j=this.getView().byId("bubbleText");var k=this.getView().byId("ovpCT");if(g){if(g.getVizType()==='timeseries_bubble'||g.getVizType()==='bubble'){if(f.colSpan>1){j.setVisible(false);}else{j.setVisible(true);}}g.setHeight(this._calculateVizFrameHeight()+"px");}var m=this.getView().byId('ovpCardContentContainer').getDomRef();if(m){if(!n.showOnlyHeader){m.classList.remove('sapOvpContentHidden');}else{m.classList.add('sapOvpContentHidden');}}var p=a.getText("BUBBLESIZE");this.oDataSet.bindData("analyticalmodel>/","");this.vizFrame.setDataset(this.oDataSet);var q=g.getParent();if(!this.isVizPropSet){V.buildVizAttributes(g,q,k,this);this.isVizPropSet=true;if(j!=undefined){var r=g.getFeeds();e(r,function(i,v){if(r[i].getUid()=="bubbleWidth"){j.setText(p+" "+r[i].getValues());}});}V.hideDateTimeAxis(g);}V.reprioritizeContent(this.newCardLayout,g);},_calculateVizFrameHeight:function(){var v;var d=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var f=this.getView().byId("analyticalChart");if(d){var g=this.getView().getController();var D=this.getItemHeight(g,'toolbar');var h=this.getHeaderHeight();var i=this.getView().byId("ovpCT")?24:0;var B=(f.getVizType()==='timeseries_bubble'||f.getVizType()==="bubble")&&d.dashboardLayout.colSpan===1?43:0;v=d.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX+2-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX+D+i+B+30);}return v;},refreshCard:function(){this.getView().rerender();}});});
sap.ui.predefine('sap/ovp/cards/v4/charts/generic/Component',["sap/ovp/cards/generic/Component","sap/ovp/cards/jUtils"],function(C,u){"use strict";return C.extend("sap.ovp.cards.charts.generic.Component",{metadata:{properties:{"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.generic.KPIHeader"},"selectionAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.SelectionVariant"},"chartAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Chart"},"presentationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.PresentationVariant"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"dataPointAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.DataPoint"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},addTabindex:function(){u.setAttributeToMultipleElements(".tabindex0","tabindex",0);u.setAttributeToMultipleElements(".tabindex-1","tabindex",-1);},onAfterRendering:function(){this.addTabindex();}});});
sap.ui.predefine('sap/ovp/cards/v4/custom/Component',["sap/ovp/cards/v4/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.v4.custom.Component",{metadata:{properties:{"contentFragment":{"type":"string"},"headerExtensionFragment":{"type":"string"},"contentPosition":{"type":"string","defaultValue":"Middle"},"footerFragment":{"type":"string"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"selectionAnnotationPath":{"type":"string"},"filters":{"type":"object"},"parameters":{"type":"object"},"addODataSelect":{"type":"boolean","defaultValue":false}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/v4/generic/Card.controller',["sap/ui/core/mvc/Controller","sap/ovp/cards/ActionUtils","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/generic/app/navigation/service/PresentationVariant","sap/ovp/cards/CommonUtils","sap/ovp/cards/OVPCardAsAPIUtils","sap/ui/core/ResizeHandler","sap/ui/core/format/NumberFormat","sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/m/MessageBox","sap/ui/generic/app/navigation/service/NavError","sap/ui/core/CustomData","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/MessageToast","sap/ui/core/TextDirection","sap/ui/generic/app/library","sap/ui/thirdparty/jquery","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/base/util/isPlainObject","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/base/util/isEmptyObject","sap/ovp/cards/Filterhelper","sap/ui/model/odata/v4/AnnotationHelper","sap/ui/util/openWindow","sap/ui/core/Component","sap/ovp/placeholder/placeholderHelper"],function(C,A,S,P,a,O,R,N,b,c,M,d,e,F,J,D,B,f,T,G,q,g,h,K,k,m,o,u,l,n,p,r,s,t){"use strict";var L=new o("OVP.generic.Card");return C.extend("sap.ovp.cards.v4.generic.Card",{initKeyboardNavigation:function(){var j=function(i){this.init(i);};j.prototype.layoutItemFocusHandler=function(){var v=q(document.activeElement);if(v){var w=v.find("[aria-label]");var i,x="";if(v.find('.valueStateText').length==1){var y=v.find('.valueStateText').find('.sapMObjectNumberText').text();var V=v.find('.valueStateText').find('.sapUiInvisibleText').text();v.find('.valueStateText').attr('aria-label',y+" "+V);v.find('.valueStateText').attr('aria-labelledby',"");}v.find("[role='listitem']").attr('aria-label',"");if(v.hasClass('sapOvpCardHeader')&&!v.hasClass('sapOvpStackCardContent')){var z="";var E=v.find('.cardHeaderType');if(E.length===0){var H=g.getText("CardHeaderType");z="cardHeaderType_"+new Date().getTime();var I='<div id="'+z+'" class="cardHeaderType" aria-label="'+H+'" hidden></div>';v.append(I);}else{z=E[0].id;}x+=z+" ";}for(i=0;i<w.length;i++){if(w[i].getAttribute("role")==="heading"){x+=w[i].id+" ";}}if(v.hasClass('sapOvpCardHeader')){var Q=v.find('.cardHeaderText');if(Q.length!==0){for(var i=0;i<Q.length;i++){if(x.indexOf(Q[i].id)===-1){x+=Q[i].id+" ";}}}}if(x.length){v.attr("aria-labelledby",x);}if(v.prop('nodeName')==="LI"&&v.find('.linkListHasPopover').length!==0){if(v.find('#hasDetails').length===0){v.append("<div id='hasDetails' hidden>"+g.getText("HAS_DETAILS")+"</div>");v.attr('aria-describedby',"hasDetails");}}var U=v.attr("id");if((U&&U.indexOf("ovpTable")!=-1)&&v.find("[role='Link']")&&!v.hasClass('sapUiCompSmartLink')){var W=v.closest("td").attr("data-sap-ui-column"),X=v.closest("tbody").siblings().children().filter("tr").children();for(var i=0;i<X.length;i++){if(X[i].getAttribute("data-sap-ui")==W&&X[i].hasChildNodes("span")){var Y=X[i].firstElementChild.getAttribute("id");v.attr("aria-labelledby",Y);}}}}};j.prototype.init=function(i){this.cardLayout=i;this.keyCodes=K;this.jqElement=q(i.getView().$());this.jqElement=this.jqElement.parent().parent().parent();this.jqElement.on("focus.keyboardNavigation",this.layoutItemFocusHandler.bind(this));};this.keyboardNavigation=new j(this);},onInit:function(){this.oCardComponent=this.getOwnerComponent();this.oCardComponentData=this.oCardComponent&&this.oCardComponent.getComponentData();this.oMainComponent=this.oCardComponentData&&this.oCardComponentData.mainComponent;this.sCardId=this.oCardComponentData.cardId;var i=this.getView().mPreprocessors.xml[0].ovpCardProperties.oData.state;if(i!=="Error"){var H=this.getView().byId("ovpCardHeader");if(!!H){H.attachBrowserEvent("click",this.onHeaderClick.bind(this));H.addEventDelegate({onkeydown:function(E){if(!E.shiftKey&&E.keyCode==13){E.preventDefault();this.onHeaderClick(E);}else if(!E.shiftKey&&E.keyCode==32){E.preventDefault();}}.bind(this)});H.addEventDelegate({onkeyup:function(E){if(!E.shiftKey&&E.keyCode==32){E.preventDefault();this.onHeaderClick(E);}}.bind(this)});}}var j=this.getView().byId("kpiNumberValue");if(j){j.addEventDelegate({onAfterRendering:function(){var $=j.$();var v=$.find(".sapMNCValueScr");var w=$.find(".sapMNCScale");v.attr("aria-label",v.text());w.attr("aria-label",w.text());var x=this.getView().byId("ovpCardHeader").getDomRef();var y=this.getOwnerComponent().getComponentData();if(!!y&&!!y.appComponent){var z=y.appComponent;if(!!z.getModel("ui")){var U=z.getModel("ui");if(!!U.getProperty("/containerLayout")&&U.getProperty("/containerLayout")==="resizable"){var E=y.appComponent.getDashboardLayoutUtil();if(!!E){E.setKpiNumericContentWidth(x);}}}}}.bind(this)});}},exit:function(){if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);}},onExit:function(){var i=this;this.GloabalEventBus.unsubscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",i.eventhandler);},onAfterRendering:function(){var i=this.getView().byId('ovpCardHeader');var j=i&&i.getDomRef();var H=this.getView().byId('ovpHeaderTitle'),Q=this.getView().byId('ovpQuickviewCardHeader');if(j&&!j.getAttribute("ariaLabelledBy")){if(H&&H.getText()){var v=H.getDomRef().getAttribute("id");j.setAttribute("arialabelledby",v);}else if(Q&&Q.getText()){var w=Q.getDomRef().getAttribute("id");j.setAttribute("arialabelledby",w);}}var x=this.getCardPropertiesModel();this.enableClick=true;var y=x.getProperty("/contentFragment");var z=this.getOwnerComponent().getComponentData();var E=x.getProperty("/selectedKey");var I=this.getCardItemsBinding();if(!I&&t.hidePlaceholderNeeded()){t.hidePlaceholder();}if(E&&x.getProperty("/state")!=='Loading'){var U=this.getView().byId("ovp_card_dropdown");if(U){U.setSelectedKey(E);}}try{var z=this.getOwnerComponent().getComponentData();if(z&&z.appComponent){var V=z.appComponent;if(V.getModel('ui')){var W=V.getModel('ui');if(W.getProperty('/containerLayout')==='resizable'){var X=V.getDashboardLayoutUtil();if(X){this.oDashboardLayoutUtil=X;this.cardId=z.cardId;if(X.isCardAutoSpan(z.cardId)){this.resizeHandlerId=R.register(this.getView(),function(l1){L.info('DashboardLayout autoSize:'+l1.target.id+' -> '+l1.size.height);X.setAutoCardSpanHeight(l1);});}}}}}}catch(Y){L.error("DashboardLayout autoSpan check failed.");}if(this.oDashboardLayoutUtil&&this.oDashboardLayoutUtil.isCardAutoSpan(this.cardId)){var $=q("#"+this.oDashboardLayoutUtil.getCardDomId(this.cardId));if(this.oView.$().outerHeight()>$.innerHeight()){this.oDashboardLayoutUtil.setAutoCardSpanHeight(null,this.cardId,this.oView.$().height());}}var Z=0;if(z&&z.mainComponent){var _=z.mainComponent;if(_.bGlobalFilterLoaded){Z=this.checkNavigation();}}else if(O.checkIfAPIIsUsed(this)){Z=this.checkAPINavigation();}var a1=this.getCardPropertiesModel();var b1=a1.getProperty("/state");if(b1!=="Loading"&&b1!=="Error"){var c1=a1.getProperty("/template");if(c1==="sap.ovp.cards.stack"){if(!Z){var d1=this.getView().byId('ViewAll');if(d1){d1=d1.getDomRef();d1.parentNode.removeChild(d1);}}}}if(Z){if(y?y!=="sap.ovp.cards.quickview.Quickview":true){if(y==="sap.ovp.cards.stack.Stack"){var e1=this.getView().getDomRef();var f1=e1.querySelectorAll('.sapOvpCardContentRightHeader');if(f1.length!==0){u.addClassToAllElements(f1,'sapOvpCardNavigable');}}else{this.getView().addStyleClass("sapOvpCardNavigable");}}if(y&&y==="sap.ovp.cards.quickview.Quickview"){var g1=this.byId("ovpCardHeader");if(g1){g1.addStyleClass("sapOvpCardNavigable");}}}else{if(y){this.getView().addStyleClass("ovpNonNavigableItem");var g1=this.byId("ovpCardHeader");if(g1){g1.$().removeAttr('role');g1.addStyleClass('ovpNonNavigableItem');}var h1=this.checkLineItemNavigation();if(!h1){switch(y){case"sap.ovp.cards.v4.list.List":var i1=this.getView().byId("listItem");if(i1){i1.setType("Inactive");}break;case"sap.ovp.cards.v4.table.Table":var i1=this.getView().byId("tableItem");if(i1){i1.setType("Inactive");}break;case"sap.ovp.cards.v4.linklist.LinkList":if(!this.checkNavigationForLinkedList()){var i1=this.getView().byId("ovpCLI");if(i1){i1.setType("Inactive");}}break;}}}}var j1=this.getView().byId("ovp_card_dropdown");var k1=this.getView().byId("ovp_card_dropdown_label");if(j1){j1.addAriaLabelledBy(k1.getId());}if(O.checkIfAPIIsUsed(this)){this.initKeyboardNavigation();}this._handleCountHeader();this._handleKPIHeader();},checkNavigation:function(){var i=this.getCardPropertiesModel();if(this.checkHeaderNavForChart()){return 0;}var E=this.getEntityType();if(E){if(i){var I=i.getProperty("/identificationAnnotationPath");var j=I;var v=i.getProperty("/contentFragment");if(v&&(v==="sap.ovp.cards.stack.Stack"||v==="sap.ovp.cards.quickview.Quickview")){var w=(I)?I.split(","):[];if(w&&w.length>1){if(v==="sap.ovp.cards.stack.Stack"){j=w[0];}else{j=w[1];}}}var x=E["@"+j];if(this.isNavigationInAnnotation(x)){return 1;}if(i&&i.getProperty("/template")==="sap.ovp.cards.charts.analytical"){var y=i.getProperty("/kpiAnnotationPath");if(E&&y){var z=E[y];if(z&&z.Detail){var H=z.Detail.SemanticObject&&z.Detail.SemanticObject.String;var Q=z.Detail.Action&&z.Detail.Action.String;if(H&&Q){return 1;}}}}}}else if(i&&i.getProperty("/template")==="sap.ovp.cards.v4.linklist"&&i.getProperty("/staticContent")&&i.getProperty("/targetUri")){return 1;}return 0;},checkNavigationForLinkedList:function(){if(this.getEntityType()){var E=this.getEntityType();var i=E['com.sap.vocabularies.UI.v1.LineItem'];if(i&&(i[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldForAction"||i[0].RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){return true;}}return false;},checkLineItemNavigation:function(){if(this.getEntityType()){var E=this.getEntityType();var i=this.getCardPropertiesModel();if(i){var j=i.getProperty("/annotationPath");var v=E["@"+j];return this.isNavigationInAnnotation(v);}}},isNavigationInAnnotation:function(j){if(j&&j.length){for(var i=0;i<j.length;i++){var I=j[i];if(I.$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"||I.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAction"||I.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){return 1;}}}return 0;},checkAPINavigation:function(){var i=this.getOwnerComponent().getComponentData(),j=i.fnCheckNavigation&&typeof i.fnCheckNavigation==="function",v=j?i.fnCheckNavigation:null;if(v){if(v()){return true;}}else{if(this.checkNavigation()){return true;}}return false;},onHeaderClick:function(E){var i=E.ctrlKey||E.metaKey?h.constants.explace:h.constants.inplace;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onHeaderClicked();}}else{var j=this.getCardPropertiesModel();var v=j.getProperty("/template");var w=j.getProperty("/targetUri");if(v=="sap.ovp.cards.v4.linklist"&&j.getProperty("/staticContent")!==undefined&&w){window.location.href=w;}else if(j.getProperty("/staticContent")!==undefined&&w===""){return;}else if(this.checkHeaderNavForChart()){return;}else{this.doNavigation(this.getView().getBindingContext(),null,i);}}},checkHeaderNavForChart:function(){var i=this.getCardPropertiesModel();var j=i.getProperty("/template");var v=i.getProperty("/navigation");if(v=="noHeaderNav"&&(j=="sap.ovp.cards.charts.analytical"||"sap.ovp.cards.charts.smart.chart")){return true;}else{return false;}},resizeCard:function(i){L.info(i);if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);this.resizeHandlerId=null;}},_handleCountHeader:function(){var i=this.getView().byId("ovpCountHeader");if(i){var I=this.getCardItemsBinding();if(I){if(I.getLength()>0){this.setHeaderCounter(I,i);}I.attachDataReceived(function(){if(t.hidePlaceholderNeeded()){t.hidePlaceholder();}this.setHeaderCounter(I,i);}.bind(this));I.attachChange(function(){this.setHeaderCounter(I,i);}.bind(this));}}else{var I=this.getCardItemsBinding();if(I){I.attachDataReceived(function(){if(t.hidePlaceholderNeeded()){t.hidePlaceholder();}});}}},setHeaderCounter:function(i,j){var v=i.getLength();var w=i.getCurrentContexts().length;var x,y="";var z=N.getIntegerInstance({minFractionDigits:0,maxFractionDigits:1,decimalSeparator:".",style:"short"});w=parseFloat(w,10);var E=this.getOwnerComponent().getComponentData();if(E&&E.appComponent){var H=E.appComponent;if(H.getModel('ui')){var U=H.getModel('ui');if(U.getProperty('/containerLayout')!=='resizable'){if(v!==0){v=z.format(Number(v));}if(w!==0){w=z.format(Number(w));}}else{x=H.getDashboardLayoutUtil().dashboardLayoutModel.getCardById(E.cardId);}}}if(w===0){y="";}else if(x&&x.dashboardLayout.showOnlyHeader){y=g.getText("Count_Header_Total",[v]);}else if(v!=w){y=g.getText("Count_Header",[w,v]);}j.setText(y);j.addEventDelegate({onAfterRendering:function(){var $=j.$();$.attr("aria-label",y);}});},_handleKPIHeader:function(){var i,j;if(this.getView()&&this.getView().getDomRef()){i=this.getView().getDomRef().getElementsByClassName("numericContentHbox");j=this.getView().getDomRef().getElementsByClassName("noDataSubtitle");}else{return;}if(i||j){var v=this.getKPIBinding();if(v){v.attachDataReceived(function(E){var U=E.getParameter("data")&&E.getParameter("data").results&&E.getParameter("data").results[0];var w=v.getLength();if(i[0]){i[0].style.visibility=null;if(w===0){i[0].style.visibility='hidden';}else{this._setSubTitleWithUnitOfMeasure(U);i[0].style.visibility='visible';}}if(j.length!==0){j[0].style.display="none";if(w===0){j[0].style.display="flex";}}}.bind(this));}}},getKPIBinding:function(){var i=this.byId("kpiHBoxNumeric"),j=i&&i.getBindingInfo("items")&&i.getBindingInfo("items").binding;return j;},_setSubTitleWithUnitOfMeasure:function(U){var i=this.getCardPropertiesModel();if(!!i){var j=i.getData();var v=this.getView().byId("SubTitle-Text");if(!!v){v.setText(j.subTitle);if(!!j&&!!j.entityType&&!!j.dataPointAnnotationPath){var E=i.getData().entityType;var w=j.dataPointAnnotationPath.split("/");var x=w.length===1?E[j.dataPointAnnotationPath]:E[w[0]][w[1]];var y;if(x&&x.Value&&x.Value.Path){y=x.Value.Path;}else if(x&&x.Description&&x.Description.Value&&x.Description.Value.Path){y=x.Description.Value.Path;}if(!!y){var z=a.getUnitColumn(y,E);var H;if(!!z&&!!U){H=U[z];}else{H=a.getUnitColumn(y,E,true);}var I=g.getText("SubTitle_IN");if(!!j.subTitle&&!!I&&!!H){v.setText(j.subTitle+" "+I+" "+H);var Q=v.getAggregation("customData");if(Q){var V;for(V in Q){var W=Q[V];if(W.getKey()==="aria-label"){W.setValue(j.subTitle+" "+I+" "+H);break;}}}}}}}}},getCardItemsBinding:function(){},onActionPress:function(E){var i=E.getSource(),j=this._getActionObject(i),v=i.getBindingContext();if(j.type.indexOf("DataFieldForAction")!==-1){this.doAction(v,j);}else{this.doNavigation(v,j);}},_getActionObject:function(j){var v=j.getCustomData();var w={};for(var i=0;i<v.length;i++){w[v[i].getKey()]=v[i].getValue();}return w;},doNavigation:function(i,j,v){if(!v){v=h.constants.inplace;}if(!this.enableClick){return;}this.enableClick=false;setTimeout(function(){this.enableClick=true;}.bind(this),1000);if(!this.oMainComponent){return;}if(!j){j=this.getEntityNavigationEntries(i)[0];}var w=m({},i);var x=m({},j);var y=this.oMainComponent.doCustomNavigation&&this.oMainComponent.doCustomNavigation(this.sCardId,w,x);var E=this.oMainComponent.templateBaseExtension&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation&&this.oMainComponent.templateBaseExtension.provideExtensionNavigation(this.sCardId,w,x);var z;if(y){z=y;}if(E){z=E;}if(z){var H=z.type;if(H&&typeof H==="string"&&H.length>0){H=H.split(".").pop().split("/").pop().toLowerCase();switch(H){case"datafieldwithurl":z.type="com.sap.vocabularies.UI.v1.DataFieldWithUrl";break;case"datafieldforintentbasednavigation":z.type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";break;}j=z;}}function I(v){if(!v){v=h.constants.inplace;}if(j){switch(j.type){case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":this.doNavigationWithUrl(i,j,v);break;case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":this.doIntentBasedNavigation(i,j,false,v);break;case"com.sap.vocabularies.UI.v1.KPIDetailType":this.doIntentBasedNavigation(i,j,false,v);break;}}}if(!this.oMainComponent.oAppStatePromise){I.call(this,v);}else{this.oMainComponent.oAppStatePromise.then(I.bind(this,v));}},doNavigationWithUrl:function(i,j,v){if(!v){v=h.constants.inplace;}if(!sap.ushell.Container){return;}var w=sap.ushell.Container.getService("URLParsing");if(!(w.isIntentUrl(j.url))){r(j.url,"newWindow");}else{var x=w.parseShellHash(j.url);var W=x.appSpecificRoute?true:false;this.doIntentBasedNavigation(i,x,W,v);}},fnHandleError:function(E){if(E instanceof d){if(E.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){M.show(g.getText("OVP_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:g.getText("OVP_GENERIC_ERROR_TITLE")});}else{M.show(E.getErrorCode(),{title:g.getText("OVP_GENERIC_ERROR_TITLE")});}}},doCrossApplicationNavigation:function(I,v){var w="#"+I.semanticObject+'-'+I.action;if(I.params){var x=this.oCardComponent&&this.oCardComponent.getComponentData();var y=x&&x.appComponent;if(y){var z=y._formParamString(I.params);w=w+z;}}var E=this;if(!sap.ushell.Container){return;}sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([w]).done(function(H){if(H[w].supported===true){if(!!v.params){if(typeof v.params=='string'){try{v.params=JSON.parse(v.params);}catch(Q){L.error("Could not parse the Navigation parameters");return;}}}var x=E.getOwnerComponent().getComponentData();var U=x?x.globalFilter:undefined;var V=U&&U.getUiState({allFilters:false});var W=V?JSON.stringify(V.getSelectionVariant()):"{}";U=JSON.parse(W);var X=E._getFilterPreference();U=E._removeFilterFromGlobalFilters(X,U);if(!v.params){v.params={};}if(!!U&&!!U.SelectOptions){for(var i=0;i<U.SelectOptions.length;i++){var Y=U.SelectOptions[i].Ranges;if(!!Y){var Z=[];for(var j=0;j<Y.length;j++){if(Y[j].Sign==="I"&&Y[j].Option==="EQ"){Z.push(Y[j].Low);}}v.params[U.SelectOptions[i].PropertyName]=Z;}}}sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(v);}else{var $=new d("NavigationHandler.isIntentSupported.notSupported");E.fnHandleError($);}}).then(function(){L.error("Could not get authorization from isIntentSupported");});},doIntentBasedNavigation:function(i,I,U,j){if(!j){j=h.constants.inplace;}if(sap.ushell&&!sap.ushell.Container){return;}var v,w,x,E=i?i.getObject():null;var y=this.getCardPropertiesModel(),z=y.getProperty("/customParams");if(i&&typeof i.getAllData==="function"&&z){x=i.getAllData();}else if(y.getProperty("/staticContent")){x={iStaticLinkListIndex:I.iStaticLinkListIndex,bStaticLinkListIndex:true};}if(E&&E.__metadata){delete E.__metadata;}var H=a.getNavigationHandler();if(H){if(I){v=this._getEntityNavigationParameters(E,x,i);w={target:{semanticObject:I.semanticObject,action:I.action},appSpecificRoute:I.appSpecificRoute,params:v.sNavSelectionVariant};var Q={};if(v.sNavPresentationVariant){Q.presentationVariant=v.sNavPresentationVariant;}if(U){if(I&&I.semanticObject&&I.action){var V=this.getCardPropertiesModel().getProperty("/staticParameters");w.params=(!!V)?V:{};this.doCrossApplicationNavigation(I,w);}}else{H.navigate(w.target.semanticObject,w.target.action,w.params,null,this.fnHandleError,Q,j);}}}},doAction:function(i,j){this.actionData=A.getActionInfo(i,j,this.getEntityType());if(this.actionData.allParameters.length>0){this._loadParametersForm();}else{this._callFunction();}},getEntityNavigationEntries:function(j,v){var w=[];var E=this.getEntityType();var x=this.getCardPropertiesModel();var y=x.getProperty("/template");if(!E){return w;}if(!v&&!j){if(!this.oCardComponentData.settings.identificationAnnotationPath){var z=x.getProperty("/kpiAnnotationPath");if(z&&y==="sap.ovp.cards.charts.analytical"){v=z;var H=E[v];var I=H&&H.Detail;var Q=I.SemanticObject&&I.SemanticObject.String;var U=I.Action&&I.Action.String;if(I.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){if(Q&&U){w.push({type:I.RecordType,semanticObject:Q,action:U,label:""});}else{L.error("Invalid Semantic object and action configured for annotation "+I.RecordType);}}}}}if(!v){var V=x.getProperty("/identificationAnnotationPath");var W=(V)?V.split(","):[];if(W&&W.length>1){v=W[0];}else{v=V;}}var X=E["@"+v];if(Array.isArray(X)){X=b.sortCollectionByImportance(X);for(var i=0;i<X.length;i++){if(X[i].$Type==="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"){w.push({type:X[i].$Type,semanticObject:X[i].SemanticObject,action:X[i].Action,label:X[i].Label?X[i].Label:null});}if(X[i].$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"&&!X[i].Url.UrlRef){var Y=this.getView().getModel();var Z=Y.getMetaModel();var $;if(j){$=j.getInterface(0).getPath();}else{$="/"+x.getInterface().getData().entitySet;}var _=Z.createBindingContext($);var a1=p.format(X[i].Url,{context:_});var b1=new e({key:"url",value:a1});if(j&&y==="sap.ovp.cards.charts.analytical"){Y=j.getModel();}b1.setModel(Y);b1.setBindingContext(j);var c1=b1.getValue();w.push({type:X[i].$Type,url:c1,value:X[i].Value,label:X[i].Label?X[i].Label:null});}}}return w;},getModel:function(){return this.getView().getModel();},getMetaModel:function(){if(this.getModel()){return this.getModel().getMetaModel();}},getCardPropertiesModel:function(){if(!this.oCardPropertiesModel||l(this.oCardPropertiesModel)){this.oCardPropertiesModel=this.getView().getModel("ovpCardProperties");}return this.oCardPropertiesModel;},getEntitySet:function(){if(!this.entitySet){var E=this.getCardPropertiesModel().getProperty("/entitySet");this.entitySet=this.getMetaModel()&&this.getMetaModel().getObject("/"+E);}return this.entitySet;},getEntityType:function(){if(!this.entityType){var i=this.getMetaModel();var E=this.getEntitySet();if(i&&E){var j=i.getData().$Annotations[E.$Type];var v={"property":i.getObject("/"+E.$Type+"/")};this.entityType=h.merge(true,{},j,v);}}return this.entityType;},getCardContentContainer:function(){if(!this.cardContentContainer){this.cardContentContainer=this.getView().byId("ovpCardContentContainer");}return this.cardContentContainer;},_processCustomParameters:function(j,v,w){var x=this.getCardPropertiesModel();if(!this.oMainComponent||!x){return;}var y;if(j&&j.bStaticLinkListIndex){var z=x.getProperty("/staticContent");y=z[j.iStaticLinkListIndex]["customParams"];j=null;}else{y=x.getProperty("/customParams");}if(!y||!this.oMainComponent.templateBaseExtension.provideCustomParameter||!this.oMainComponent.onCustomParams){return;}var E=this.oMainComponent.templateBaseExtension.provideCustomParameter(y)?this.oMainComponent.templateBaseExtension.provideCustomParameter(y):this.oMainComponent.onCustomParams(y);if(!E||!u.checkIfFunction(E)){return;}var H=m({},j);var I=m({},v);var Q=E(H,I);if(!Q||(!Array.isArray(Q)&&!k(Q))){return;}var U=k(Q);if(U&&l(Q)){return;}var V=U&&(Q.bIgnoreEmptyString||Q.ignoreEmptyString);var W=U?(Q.aSelectionVariant||Q.selectionVariant):Q;if(!Array.isArray(W)){return;}var i,X,Y,Z,$,_;X=W.length;for(i=0;i<X;i++){Y=W[i];if(!Y){continue;}Z=Y.path;$=Y.value1;_=Y.value2;if(!Z||typeof Z!=="string"||Z===""){L.error("Custom Variant property path '"+Z+"' should be valid string");continue;}if(!($||$===0||($===""&&V))){continue;}$=$.toString();_=_&&_.toString();if($===""&&V){v.removeSelectOption(Z);}if(j){delete j[Z];}if(w){delete w[Z];}v.addSelectOption(Z,Y.sign,Y.operator,$,_);}if(V){this._removeEmptyStringsFromSelectionVariant(v);}return V;},_getEntityNavigationParameters:function(E,j,v){var w={};var x,y,z;var H=this.getOwnerComponent().getComponentData();var I=H?H.globalFilter:undefined;var Q=this.getCardPropertiesModel();var U=Q&&Q.getProperty("/staticContent");if(!U){var V=b.getCardSelections(this.getCardPropertiesModel());var W=V.filters;var X=V.parameters;var Y=this.getEntityType();W&&W.forEach(function(o1){o1.path=o1.path.replace("/",".");switch(o1.operator){case F.NE:o1.operator=F.EQ;o1.sign="E";break;case F.Contains:o1.operator="CP";var p1=o1.value1;o1.value1="*"+p1+"*";break;case F.EndsWith:o1.operator="CP";var p1=o1.value1;o1.value1="*"+p1;break;case F.StartsWith:o1.operator="CP";var p1=o1.value1;o1.value1=p1+"*";}});V.filters=W;if(v&&E&&E.hasOwnProperty("$isOthers")){var Z=v.getOtherNavigationDimensions();for(var $ in Z){var _=Z[$];for(var i=0;i<_.length;i++){V.filters.push({path:$,operator:"EQ",value1:_[i],sign:"E"});}}}X&&X.forEach(function(o1){o1.path=o1.path.replace("/",".");});V.parameters=X;var a1=b.getCardSorters(this.getCardPropertiesModel());if(E){var $,b1=Y&&Y.property&&Object.keys(Y.property);for(var i=0;i<b1.length;i++){if(b1[i].startsWith("$")){continue;}$=b1[i];var c1=E[$];if(E.hasOwnProperty($)){if(Array.isArray(E[$])&&E[$].length===1){w[$]=E[$][0];}else if(q.type(c1)!=="object"){w[$]=c1;}}}}var d1=Q&&Q.getProperty("/kpiAnnotationPath");var e1=Q&&Q.getProperty("/template");if(d1&&e1==="sap.ovp.cards.charts.analytical"){var f1=Y[d1];var g1=f1&&f1.Detail;if(g1&&g1.RecordType==="com.sap.vocabularies.UI.v1.KPIDetailType"){w["kpiID"]=f1.ID.String;}}y=a1&&new P(a1);x=this._buildSelectionVariant(I,V);z=Q&&Q.getProperty("/staticParameters");}else{var h1=I&&I.getUiState({allFilters:false});var i1=h1?JSON.stringify(h1.getSelectionVariant()):"{}";x=new S(i1);var j1=this._getFilterPreference();x=this._removeFilterFromGlobalFilters(j1,x);if(U[j.iStaticLinkListIndex].params){z=U[j.iStaticLinkListIndex].params;}else if(U[j.iStaticLinkListIndex].staticParameters){z=U[j.iStaticLinkListIndex].staticParameters;}}var k1;if(j&&!j.bStaticLinkListIndex){k1=this._processCustomParameters(j,x,w);}else if(j&&j.bStaticLinkListIndex){k1=this._processCustomParameters(j,x);}else{k1=this._processCustomParameters(w,x);}var l1=k1?G.navigation.service.SuppressionBehavior.ignoreEmptyString:undefined;if(z){for(var $ in z){if(!w.hasOwnProperty($)){w[$]=z[$];}}}var m1=a.getNavigationHandler();var n1=m1&&m1.mixAttributesAndSelectionVariant(w,x.toJSONString(),l1);if(!U){this._removeSensitiveAttributesFromNavSelectionVariant(Y,n1);}return{sNavSelectionVariant:n1?n1.toJSONString():null,sNavPresentationVariant:y?y.toJSONString():null};},_removeSensitiveAttributesFromNavSelectionVariant:function(E,j){for(var i=0;i<E.property.length;i++){if(E.property[i]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]&&E.property[i]["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]){delete j._mSelectOptions[E.property[i].name];}}},_removeEmptyStringsFromSelectionVariant:function(v){var w=v.getParameterNames();for(var i=0;i<w.length;i++){if(v.getParameter(w[i])===""){v.removeParameter(w[i]);}}var x=v.getSelectOptionsPropertyNames();for(i=0;i<x.length;i++){var y=v.getSelectOption(x[i]);for(var j=0;j<y.length;j++){if(y[j].Low===""&&!y[j].High){y.splice(j,1);j--;}}if(y.length===0){v.removeSelectOption(x[i]);}}return v;},_checkIfCardFiltersAreValid:function(i,j){var v=true;if(i&&i.filterAll==="global"){v=false;}else if(i&&i.globalFilter){if(i.globalFilter.indexOf(j)>=0){v=false;}}return v;},_getFilterPreference:function(){var i=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;var j;if(i&&i.mainComponent){j=i.mainComponent._getFilterPreference(i.cardId);}return j;},_removeFilterFromGlobalFilters:function(i,j){var v=[];if(i&&i.filterAll==="card"){v=j.getSelectOptionsPropertyNames();}else if(i&&i.cardFilter){v=i.cardFilter;}v.forEach(function(w){if(w!=="$.basicSearch"){j.removeSelectOption(w);}});return j;},_buildSelectionVariant:function(v,w){var U=v&&v.getUiState({allFilters:false});var x=U?JSON.stringify(U.getSelectionVariant()):"{}";var y=new S(x);var z,V,E,H;var I=this._getFilterPreference();y=this._removeFilterFromGlobalFilters(I,y);var Q=w.filters;var W=w.parameters;for(var i=0;i<Q.length;i++){z=Q[i];if(z.path&&z.operator&&typeof z.value1!=="undefined"){V=z.value1.toString();E=(typeof z.value2!=="undefined")?z.value2.toString():undefined;if(this._checkIfCardFiltersAreValid(I,z.path)){y.addSelectOption(z.path,z.sign,z.operator,V,E);}}}var X,Y,Z;for(var j=0;j<W.length;j++){H=W[j];if(!H.path||!H.value){continue;}X=H.path.split("/").pop();X=X.split(".").pop();if(X.indexOf("P_")===0){Y=X;Z=X.substr(2);}else{Y="P_"+X;Z=X;}if(y.getParameter(Y)){continue;}if(y.getParameter(Z)){continue;}y.addParameter(X,H.value);}return y;},_loadParametersForm:function(){var i=new J();i.setData(this.actionData.parameterData);var j=this;var v=new D('ovpCardActionDialog',{title:this.actionData.sFunctionLabel,afterClose:function(){v.destroy();}}).addStyleClass("sapUiNoContentPadding");var w=new B({text:this.actionData.sFunctionLabel,press:function(E){var H=A.getParameters(E.getSource().getModel(),j.actionData.oFunctionImport);v.close();j._callFunction(H,j.actionData.sFunctionLabel);}});var x=new B({text:"Cancel",press:function(){v.close();}});v.setBeginButton(w);v.setEndButton(x);var y=function(E){var H=A.mandatoryParamsMissing(E.getSource().getModel(),j.actionData.oFunctionImport);w.setEnabled(!H);};var z=A.buildParametersForm(this.actionData,y);v.addContent(z);v.setModel(i);v.open();},_callFunction:function(U,i){var j={batchGroupId:"Changes",changeSetId:"Changes",urlParameters:U,forceSubmit:true,context:this.actionData.oContext,functionImport:this.actionData.oFunctionImport};var v=this;var w=new Promise(function(x,y){var z=v.actionData.oContext.getModel();var E;E="/"+j.functionImport.name;z.callFunction(E,{method:j.functionImport.httpMethod,urlParameters:j.urlParameters,batchGroupId:j.batchGroupId,changeSetId:j.changeSetId,headers:j.headers,success:function(H,I){x(I);},error:function(H){H.actionText=i;y(H);}});});w.then(function(x){return f.show(g.getText("Toast_Action_Success"),{duration:1000});},function(E){var x=a.showODataErrorMessages(E);if(x===""&&E.actionText){x=g.getText("Toast_Action_Error")+' "'+E.actionText+'"'+".";}return M.error(x,{title:g.getText("OVP_GENERIC_ERROR_TITLE"),onClose:null,styleClass:"",initialFocus:null,textDirection:T.Inherit});});},setErrorState:function(){var i=this.getOwnerComponent();if(!i||!i.oContainer){return;}var j=i.oContainer;var v=this.getCardPropertiesModel();var w={name:"sap.ovp.cards.loading",componentData:{model:this.getView().getModel(),settings:{category:v.getProperty("/category"),title:v.getProperty("/title"),description:v.getProperty("/description"),entitySet:v.getProperty("/entitySet"),state:h.loadingState.ERROR,template:v.getProperty("/template")}}};s.create(w).then(function(x){j.setComponent(x);setTimeout(function(){i.destroy();},0);});},changeSelection:function(i,j,v){if(!j){var w=this.getView().byId("ovp_card_dropdown");i=parseInt(w.getSelectedKey(),10);}var x={};if(!j){x=this.getCardPropertiesModel().getProperty("/tabs")[i-1];}else{x=v.tabs[i-1];}var U={cardId:this.getOwnerComponent().getComponentData().cardId,selectedKey:i};for(var y in x){U[y]=x[y];}if(O.checkIfAPIIsUsed(this)){O.recreateCard(U,this.getOwnerComponent().getComponentData());}else{this.getOwnerComponent().getComponentData().mainComponent.recreateCard(U);this.getOwnerComponent().getComponentData().mainComponent.setOrderedCardsSelectedKey(this.getOwnerComponent().getComponentData().cardId,i);}},getItemHeight:function(i,j,v){if(!!i){var w=i.getView().byId(j);var H=0;if(!!w){if(v){if(w.getItems()[0]&&w.getItems()[0].getDomRef()){H=u.getOuterHeight(w.getItems()[0].getDomRef());}}else{if(w.getDomRef()){H=u.getOuterHeight(w.getDomRef());}}}return H;}},getHeaderHeight:function(){var H=this.getItemHeight(this,'ovpCardHeader'),i=this.getOwnerComponent()?this.getOwnerComponent().getComponentData():null;if(i&&i.appComponent){var j=i.appComponent.getDashboardLayoutUtil(),v=j.getDashboardLayoutModel().getCardById(i.cardId);if(H!==0){v.dashboardLayout.headerHeight=H;}}return H;}});});
sap.ui.predefine('sap/ovp/cards/v4/generic/Component',["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/model/resource/ResourceModel","sap/ui/core/mvc/ViewType","sap/base/util/merge","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/v4/V4AnnotationHelper"],function(U,J,C,D,R,V,m,O,o,a){"use strict";return U.extend("sap.ovp.cards.v4.generic.Component",{metadata:{properties:{"contentFragment":{"type":"string"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.Card"},"headerExtensionFragment":{"type":"string"},"contentPosition":{"type":"string","defaultValue":"Middle"},"headerFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.Header"},"footerFragment":{"type":"string"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"},"selectionAnnotationPath":{"type":"string"},"filters":{"type":"object"},"parameters":{"type":"object"},"addODataSelect":{"type":"boolean","defaultValue":false}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},setSelectionVariant:function(s,S){if(/^@/.test(s)){s=s.slice(1);}S.selectionAnnotationPath=s;},setPresentationVariant:function(p,s,e){if(/^@/.test(p)){p=p.slice(1);}s.presentationAnnotationPath=p;var b=p.split("/");var v=b.length===1?e[p].Visualizations:e[b[0]][b[1]][b[2]].Visualizations;var i;for(i=0;i<v.length;i++){var c=v[i].AnnotationPath;if(c){if(/^@/.test(c)){c=c.slice(1);}if(/.LineItem/.test(c)){s.annotationPath=c;break;}}}for(i=0;i<v.length;i++){var c=v[i].AnnotationPath;if(c){if(/^@/.test(c)){c=c.slice(1);}if(/.Chart/.test(c)){s.chartAnnotationPath=c;break;}}}},setDataPointAnnotationPath:function(d,s){if(/^@/.test(d)){d=d.slice(1);}s.dataPointAnnotationPath=d;},getCustomPreprocessor:function(){},getPreprocessors:function(p){var c=this.getComponentData(),s=c.settings,M=c.model,b,e,E,d;if(s.description&&!s.subTitle){s.subTitle=s.description;}b=M&&M.getMetaModel();if(M&&M.getODataVersion){var f="/"+s.entitySet;var e=b.getObject(f);d=b.createBindingContext(f);E=b.createBindingContext("/"+e.$Type);}else{if(s.entitySet){var g=b.getODataEntitySet(s.entitySet);var h=b.getODataEntitySet(s.entitySet,true);e=b.getODataEntityType(g.entityType);d=b.createBindingContext(h);E=b.createBindingContext(e.$path);}}var j=this._getCardPropertyDefaults();var k=this._completeLayoutDefaults(j,s);var l,n;if(c.appComponent&&c.appComponent.getModel("ui")&&c.appComponent.getModel("ui").oData){var q=c.appComponent.getModel("ui").oData;l=q.showDateInRelativeFormat;n=q.disableTableCardFlexibility;}else{if(c.showDateInRelativeFormat){l=c.showDateInRelativeFormat;}if(c.disableTableCardFlexibility){n=c.disableTableCardFlexibility;}}var A={metaModel:b,entityType:e,webkitSupport:D.browser.webkit,layoutDetail:k&&k.cardLayout?k.cardLayout.containerLayout:'fixed',showDateInRelativeFormat:l,disableTableCardFlexibility:n,cardId:c.cardId};if(!!c&&!!c.cardId){var r=c.mainComponent;var t=null;if(!!r){t=r._getCardFromManifest(c.cardId)?r._getCardFromManifest(c.cardId).template:null;}else{t=c.template;}if(!!t){A.template=t;}}j.densityStyle=C._setCardpropertyDensityAttribute();if(c.errorReason){var u=c.errorReason;var P=u.getParameters?u.getParameters():u.mParameters;var v="sap-icon://message-error";if(P&&P.response){j.errorStatusCode=P.response.statusCode;j.errorStatusText=P.response.statusText;j.responseText=P.response.responseText;j.sMessageIcon=P.response.sIcon?P.response.sIcon:v;}}if(k){A.cardLayout=k.cardLayout;}if(j.state!=="Error"){if(s&&s.kpiAnnotationPath){var K=e[s.kpiAnnotationPath];var w=j.contentFragment;if(K&&(w==="sap.ovp.cards.v4.charts.analytical.analyticalChart"||w==="sap.ovp.cards.v4.charts.smart.analyticalChart")){var S=K.SelectionVariant&&K.SelectionVariant.Path?K.SelectionVariant.Path:s.kpiAnnotationPath+"/SelectionVariant";if(S){this.setSelectionVariant(S,s);}var x=K.Detail&&K.Detail.DefaultPresentationVariant&&K.Detail.DefaultPresentationVariant.Path?K.Detail.DefaultPresentationVariant.Path:s.kpiAnnotationPath+"/Detail/DefaultPresentationVariant";if(x){this.setPresentationVariant(x,s,e);}var y=K.DataPoint&&K.DataPoint.Path?K.DataPoint.Path:s.kpiAnnotationPath+"/DataPoint";if(y){this.setDataPointAnnotationPath(y,s);}}}else if(s&&s.selectionPresentationAnnotationPath){var z=e[s.selectionPresentationAnnotationPath];if(z){var S=z.SelectionVariant&&z.SelectionVariant.Path;if(S){this.setSelectionVariant(S,s);}var x=z.PresentationVariant&&z.PresentationVariant.Path;if(x){this.setPresentationVariant(x,s,e);}}}}if(c.ovpCardsAsApi&&s.ignoreSelectionVariant){s.selectionAnnotationPath="";var I=[];for(var B=0;!!s.filters&&B<s.filters.length;B++){I.push({id:"headerFilterText--"+(B+1),index:B});}s.idForExternalFilters=I;}if(!!A.entityType&&!!s.selectionAnnotationPath&&!!A.entityType[s.selectionAnnotationPath]){var F=A.entityType[s.selectionAnnotationPath].SelectOptions;for(var G=0;!!F&&G<F.length;G++){F[G].id="headerFilterText--"+(G+1);}A.entityType[s.selectionAnnotationPath].SelectOptions=F;}if(A.template==="sap.ovp.cards.v4.linklist"&&!!s.staticContent){for(var i=0;i<s.staticContent.length;i++){s.staticContent[i].id="linkListItem--"+(i+1);}}else if(A.template==='sap.ovp.cards.v4.charts.analytical'){s.dataStep=s.dataStep?s.dataStep:10;}j=O.merge(true,{},A,j,s);var H=new J(j);var L={xml:{bindingContexts:{entityType:E,entitySet:d},models:{device:C.deviceModel,entityType:b,entitySet:b,ovpMeta:b,ovpCardProperties:H,ovplibResourceBundle:p,ovpConstants:C.ovpConstantModel},ovpCardProperties:H,dataModel:M,_ovpCache:{}}};return m({},this.getCustomPreprocessor(),L);},_completeLayoutDefaults:function(c,s){var b={},d=this.getComponentData(),e=null,f=null;if(d.appComponent){e=d.appComponent.getOvpConfig();}if(!e){return null;}if(e.containerLayout==="resizable"&&d.cardId&&c.contentFragment!=="sap.ovp.cards.quickview.Quickview"){f=d.appComponent.getDashboardLayoutUtil();var g=d.cardId;var h=f.aCards.filter(function(i){return i.id===g;});b.cardLayout=h[0].dashboardLayout;b.cardLayout.containerLayout=e.containerLayout;b.cardLayout.iRowHeightPx=f.ROW_HEIGHT_PX;b.cardLayout.iCardBorderPx=f.CARD_BORDER_PX;b.cardLayout.headerHeight=h[0].dashboardLayout.headerHeight;}return b;},_getCardPropertyDefaults:function(){var c={};var p=this.getMetadata().getAllProperties();var P;for(var b in p){P=p[b];if(P.defaultValue!==undefined){c[P.name]=P.defaultValue;}}return c;},getOvplibResourceBundle:function(){if(!this.ovplibResourceBundle){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ovp");this.ovplibResourceBundle=r?new R({bundleUrl:r.oUrlInfo.url}):null;}return this.ovplibResourceBundle;},_getCacheKeys:function(){},createContent:function(){var c=this.getComponentData&&this.getComponentData();var M=c.model;var p;var P;var b=c&&c.mainComponent;var d=b&&b.oModelViewMap;var s=c&&c.modelName;var f=function(){if(M&&s){M.bIncludeInCurrentBatch=false;if(d&&s&&d[s]&&d[s][c.cardId]){delete d[s][c.cardId];if(Object.keys(d[s]).length>0){M.bIncludeInCurrentBatch=true;}}}};if(c&&c.mainComponent){p=c.mainComponent._getOvplibResourceBundle();}else{p=this.getOvplibResourceBundle();}P=this.getPreprocessors(p);var v={preprocessors:P,type:V.XML,viewName:"sap.ovp.cards.v4.generic.Card"};var e=this._getCacheKeys();if(e&&e.length&&e.length>0){v.async=true;v.cache={keys:e};}var l=this._getCardPropertyDefaults().state;var i=c.cardId+(l?l:"Original");if(!l){i=i+(c.settings.selectedKey?"_Tab"+c.settings.selectedKey:"");}if(M&&M.bUseBatch&&!v.async){f();}var g=new sap.ui.core.mvc.XMLView(c.containerId==="dialogCard"?undefined:i,v);if(v.async){var h=g.onControllerConnected;g.onControllerConnected=function(){if(M&&M.bUseBatch){f();}h.apply(g,arguments);};}g.setModel(M);if(c.i18n){g.setModel(c.i18n,"@i18n");}g.setModel(P.xml.ovpCardProperties,"ovpCardProperties");g.setModel(p,"ovplibResourceBundle");return g;}});});
sap.ui.predefine('sap/ovp/cards/v4/linklist/AnnotationHelper',["sap/ovp/cards/v4/V4AnnotationHelper","sap/ui/model/odata/AnnotationHelper","sap/ui/model/FilterOperator","sap/ovp/cards/ovpLogger"],function(V,O,F,o){"use strict";var l=new o("OVP.v4.linklist.AnnotationHelper");
function g(i){var S=[];var j,D;var P=i.getProperty("/sortBy");if(P){var u=i.getProperty("/sortOrder");if(u&&u.toLowerCase()!=="descending"){D=false;}else{D=true;}j={path:P,descending:D};S.push(j);}return S;}
function a(u,S){var v=[];var C=u.getProperty("/filters");if(C){v=v.concat(C);}var w=S&&S.SelectOptions;var x,P,R;if(w){for(var i=0;i<w.length;i++){x=w[i];P=x.PropertyName.$PropertyPath;for(var j=0;j<x.Ranges.length;j++){R=x.Ranges[j];if(R.Sign.$EnumMember){var y={path:P,operator:R.Option.$EnumMember.split("/")[1],value1:V.getPrimitiveValue(R.Low),value2:V.getPrimitiveValue(R.High),sign:R.Sign.$EnumMember==="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"?"I":"E"};if(y.sign==="E"&&y.operator!==F.EQ){l.error("Exclude sign is supported only with EQ operator");continue;}if(y.sign==="E"&&y.operator===F.EQ){y.operator=F.NE;y.sign="I";}if(y.operator==="CP"&&y.sign==="I"){var I=F.Contains;var z=y.value1;if(z){var A=z.indexOf('*');var B=z.lastIndexOf('*');if(A>-1){if((A===0)&&(B!==(z.length-1))){I=F.EndsWith;z=z.substring(1,z.length);}else if((A!==0)&&(B===(z.length-1))){I=F.StartsWith;z=z.substring(0,z.length-1);}else{z=z.substring(1,z.length-1);}}}y.operator=I;y.value1=z;}v.push(y);}}}}return v;}
function f(C,E,H){var M=C.getSetting("ovpCardProperties");var i=M.getProperty("/metaModel");var j=E;var u=i.getData();var v="/"+M.getProperty("/entitySet");var S;if(M.getProperty('/selectionAnnotationPath')){var w="@"+M.getProperty('/selectionAnnotationPath');S=u["$Annotations"][j.$Type][w];}var I;var x=M.getProperty("/layoutDetail");if(x==='resizable'){var y=M.getProperty("/cardLayout");if(y){if(M.getProperty("/listFlavor")==="standard"){var z="";for(var A in H){z+=A;}var R=M.getProperty("/cardLayout/iRowHeigthPx");if(R===undefined){R=16;}var B;if(M.getProperty("/densityStyle")==="cozy"){B=72;if((z.indexOf("Description")===-1)&&((z.indexOf("Title")>0&&z.indexOf("ImageUrl")>0)||(z.indexOf("Title")>0&&z.indexOf("TypeImageUrl")>0))){B=56;}else if((z.indexOf("Description")===-1)&&z.indexOf("Title")>0){B=48;}}else{B=60;if((z.indexOf("Description")===-1)&&((z.indexOf("Title")>0&&z.indexOf("ImageUrl")>0)||(z.indexOf("Title")>0&&z.indexOf("TypeImageUrl")>0))){B=48;}else if((z.indexOf("Description")===-1)&&z.indexOf("Title")>0){B=40;}}M.setProperty('/cardLayout/itemHeight',B);if(!M.getProperty("/defaultSpan")&&M.getProperty("/cardLayout/autoSpan")){I=M.getProperty("/cardLayout/noOfItems");var D=Math.ceil((I*B+M.getProperty("/cardLayout/headerHeight")+2*M.getProperty("/cardLayout/iCardBorderPx"))/R);M.setProperty("/cardLayout/noOfItems",D);}else{var G=Math.floor(((y.rowSpan*R)-M.getProperty("/cardLayout/headerHeight")-2*M.getProperty("/cardLayout/iCardBorderPx")));I=Math.floor(G/B)*y.colSpan;}}}}else{I=6;}var J=C.getSetting('ovpCardProperties'),P=J.getProperty('/parameters');if(S||!!P){if((S&&S.Parameters)||!!P){v=V.resolveParameterizedEntitySet(C.getSetting("dataModel"),E,S,P);}}var K="{path: '"+v+"', length: "+I;var L=g(M);if(L.length>0){K=K+", sorter:"+JSON.stringify(L);}var N=a(M,S);if(N.length>0){K=K+", filters:"+JSON.stringify(N);}var Q=V.checkFilterPreference(M);if(Q){K=K+", parameters:{custom: {cardId: '"+M.getProperty("/cardId")+"'}}";}K=K+"}";return K;}
f.requiresIContext=true;
function b(C,u){var B=C.getModel().getProperty("/baseUrl");return n(B,u);}
b.requiresIContext=true;
function c(i,D){var I=true;var j=O.format(i,D);if(j.toLowerCase().indexOf("icon")>0){I=false;}return I;}
c.requiresIContext=true;
function d(D){var i=true;if(!D){return null;}else if(D.toLowerCase().indexOf("icon")>0){i=false;}return i;}
function e(u){var i=new RegExp("http(s)?:\/\/(www\.)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?","i");return i.test(u);}
function h(T){var i;if(T.hasOwnProperty("$Path")){i="{"+T.$Path+"}";}else{i=T;}return i;}
function k(i){var P="{"+i+"}";return P;}
function m(A){if(A){return 1;}return 0;}
function n(B,u){if(!u){return undefined;}else if(u.lastIndexOf(B,0)===0||u.indexOf("://")>0){return u;}else if(u.lastIndexOf("/",0)===0){return B+u;}else{return B+"/"+u;}}
function p(i,S,v){var j;if(typeof v==="object"){j=v[i];}else{j=(typeof v==="boolean")?v:true;}return!S[i]&&j;}
function q(L,j,u){var N="";if(L){if(j&&u){N="#"+j+"-"+u;for(var i=0;i<L.length;i++){if(L[i].value===N){return L[i].name;}}N="";}else{return L[0].name;}}return N;}
function r(C,i){return n(C.baseUrl,i);}
function s(R){return this.getModel("contentRow").aBindings[0].getContext().getPath().replace("/staticContent/","");}
function t(i){return((i.$Path&&("{"+i.$Path+"}"))||i||"");}
return{getSorters:g,getFilters:a,formatItems:f,formatUrl:b,isImageUrl:c,isImageUrlStaticData:d,isValidURL:e,getIconPath:h,formatString:k,linkedAction:m,formUrl:n,isVisible:p,getApplicationName:q,getImageUrl:r,contentRowIndex:s,getAvatarInitials:t};},true);
sap.ui.predefine('sap/ovp/cards/v4/linklist/Component',["sap/ovp/cards/v4/generic/Component","sap/ovp/cards/v4/linklist/AnnotationHelper"],function(C,A){"use strict";return C.extend("sap.ovp.cards.v4.linklist.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.linklist.LinkList"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.v4.linklist.LinkList"},"communicationPath":{"type":"string","defaultValue":"com.sap.vocabularies.Communication.v1.Contact"},"headerAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.HeaderInfo"},"identificationAnnotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.Identification"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}},getCustomPreprocessor:function(){}});});
sap.ui.predefine('sap/ovp/cards/v4/linklist/LinkList.controller',["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/m/List","sap/ui/core/ResizeHandler","sap/m/MessageToast","sap/m/Image","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper","sap/ui/util/openWindow"],function(C,q,O,a,L,R,M,I,b,c,o,F,d){"use strict";var f=27,g=8,h=8,l=8,m="ovpLinkList",P="pictureCarousel",n="ovpCardHeader",A="sapMCrslActive";var D={onBeforeRendering:function(e){this.itemOnBeforeRendering(e);}};var p={onAfterRendering:function(e){this.itemOnAfterRendering(e);}};var r=new o("OVP.v4.linklist.LinkList");return C.extend("sap.ovp.cards.v4.linklist.LinkList",{onInit:function(){C.prototype.onInit.apply(this,arguments);this._bInitialLoad=true;this._bListenerAttached=false;this._bListeningPopOver=false;var t=this;this.eventhandler=function(i,j,k){if(t.getView().getModel().getMetaModel().getData){var s=t.getView().getModel().getMetaModel().getData();var u=t.getView().getModel('ovpCardProperties').getData().entityType.$Type;var v=F._getEntityRelevantFilters(s[u],k);v=F.mergeFilters(v,t.selectionVaraintFilter);try{t.getCardItemsBinding().filter(v);if(t.getKPIBinding()){t.getKPIBinding().filter(v);}}catch(e){}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onBeforeRendering:function(e){var i=this.getCardPropertiesModel();if(i.getProperty("/listFlavor")==="standard"&&!i.getProperty("/staticContent")){var j=this.byId("ovpCLI");if(j){j.addEventDelegate(D,this);}}},onAfterRendering:function(e){C.prototype.onAfterRendering.apply(this,arguments);this.attachingListenerToTheEventRefresh();var i=this.getCardPropertiesModel();var j=i.getProperty("/cardLayout/rowSpan");var k=i.getProperty("/cardLayout/colSpan");switch(i.getProperty("/listFlavor")){case"standard":if(i.getProperty("/staticContent")){if(k&&j){if(!this._bInitialLoad&&this._aLinkListIds){this._mergeAllTheDataInOneList();}if(j===1){this._aLinkListIds=[m];this._setListColumnWidthInStandardCard(1);}else{this._itemOnEventBuildStandard(i,k,j,true);}}else{this._aLinkListIds=[m];this._setListColumnWidthInStandardCard(1);}}break;case"carousel":var s=this.byId(P);if(s.getId().indexOf('.')!==-1){var $=s.$();$.off('beforeSlide');$.on('beforeSlide',this.onBeforeSlide);$.trigger('beforeSlide',[1,1]);}if(i.getProperty("/staticContent")){if(j&&!(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(j);}else{this._setListHeightInCarouselCard(-1);}this._setCarouselImageProperties();}else{s.addEventDelegate(p,this);}break;default:break;}if(!O.checkIfAPIIsUsed(this)&&i.getProperty('/layoutDetail')==='resizable'){var t=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var u=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var v=document.getElementById(u);t.dashboardLayout.showOnlyHeader?v.classList.add("sapOvpMinHeightContainer"):v.classList.remove("sapOvpMinHeightContainer");}if(!O.checkIfAPIIsUsed(this)){var i=this.getCardPropertiesModel();var w=this.getOwnerComponent().getModel("ui").getData().cards;var x=[];if(this.getMetaModel().getData){var y=this.getMetaModel().getData()[this.getEntitySet().$Type];this.selectionVaraintFilter=F.getSelectionVariantFilters(w,i,this.getEntityType());}var z=this.oCardComponentData.mainComponent;if(z.getGlobalFilter()){x=F._getEntityRelevantFilters(y,z.oGlobalFilter.getFilters());}if(z.getMacroFilterBar()){var B=z.aFilters;x=F._getEntityRelevantFilters(y,B);}x=F.mergeFilters(x,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(x);}if(this.getKPIBinding()){this.getKPIBinding().filter(x);}}},onBeforeSlide:function(e,i,j){if(e.target!=this){return;}var s=this.id+'-pageIndicator',k=document.getElementById(s);var E=k.querySelector('[data-slide=\''+i+'\']');E.classList.remove(A);E=k.querySelector('[data-slide=\''+j+'\']');E.classList.add(A);},getCardItemsBinding:function(){var e=this.getView().byId("ovpLinkList");var i=this.getView().byId("pictureCarousel");if(e){return e.getBinding("items");}else if(i){return i.getBinding("pages");}else{return null;}},attachingListenerToTheEventRefresh:function(){var e=this.getCardItemsBinding();var j=this.getCardPropertiesModel();if(e){if(!this._bListenerAttached){e.attachRefresh(function(){if(this._aLinkListIds){for(var i=1;i<this._aLinkListIds.length;i++){var k=this.byId(this._aLinkListIds[i]);var s=k.getItems().length;k.getItems().splice(0,s);k.destroy();}this._aLinkListIds.splice(0,this._aLinkListIds.length);}if(this._oListRest){this._oListRest.destroy();}}.bind(this));e.attachChange(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();if(j.getProperty("/listFlavor")==="carousel"){var i=this.byId(P);i.addEventDelegate(p,this);}if(j.getProperty("/listFlavor")==="standard"){var t=e.getLength();if(t===0){var k=this.byId(m).$().parent();k.width("100%");}}}.bind(this));}else if(this._aLinkListIds){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();}this._bListenerAttached=true;}},settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter:function(){if(this._aLinkListIds){var e=this.getCardPropertiesModel();var i=e.getProperty("/cardLayout/rowSpan");var j=e.getProperty("/cardLayout/colSpan");if(i){this._setListHeightInStandardCard(i);}if(j){this._setListColumnWidthInStandardCard(this._iVisibleColums);}else{this._setListColumnWidthInStandardCard(1);}}},itemOnBeforeRendering:function(e){var i,k=this.getCardPropertiesModel();switch(k.getProperty("/listFlavor")){case"standard":if(!k.getProperty("/defaultSpan")&&!k.getProperty("/staticContent")&&k.getProperty("/cardLayout/autoSpan")){i=k.getProperty("/cardLayout/noOfItems");}else{i=k.getProperty("/cardLayout/rowSpan");}var s=k.getProperty("/cardLayout/colSpan");var t=this.byId(m);var u=t.getItems();for(var j=0;j<u.length;j++){u[j].removeEventDelegate(D);}if(this._bInitialLoad){this._itemOnEventBuildStandard(k,s,i,true);}else{this._itemOnEventBuildStandard(k,s,i,false);}break;case"carousel":r.info("FYI: currently nothing special to handle here");break;default:break;}},getSpansWhenNoDefaultSpanMentioned:function(){var e=this.getCardPropertiesModel();var s=e.getProperty('/staticContent');var N=((s&&s.length)||(this.getCardItemsBinding()&&this.getCardItemsBinding().getLength()))||0;var i=s?this.getItemHeight(this,m,true):e.getProperty('/cardLayout/itemHeight');var H=0;var j=this.byId(n);if(j){H=j.$().outerHeight();}var k=e.getProperty("/cardLayout/iRowHeightPx");return Math.ceil((i*Math.min(N,6)+(H+h+l))/k);},itemOnAfterRendering:function(E){var i=this.getCardPropertiesModel();var j=i.getProperty("/cardLayout/rowSpan");var k=i.getProperty("/cardLayout/colSpan");switch(i.getProperty("/listFlavor")){case"standard":try{var s=this.byId(m);var t=s.getItems(this._aLinkListIds[this._aLinkListIds.length-1]);t[t.length-1].removeEventDelegate(p);}catch(e){r.info("FYI: Unable to remove the delagted event at the last item of the last list");}if(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan")){j=this.getSpansWhenNoDefaultSpanMentioned();}if(j){this._setListHeightInStandardCard(j);}if(k){this._setListColumnWidthInStandardCard(this._iVisibleColums);}else{this._setListColumnWidthInStandardCard(1);}break;case"carousel":try{var u=this.byId(P);u.removeEventDelegate(p);}catch(e){r.info("FYI: Unable to remove the delagted event on the carousel");}if(j&&!(!i.getProperty("/defaultSpan")&&i.getProperty("/cardLayout/autoSpan"))){this._setListHeightInCarouselCard(j);}else{this._setListHeightInCarouselCard(-1);}this._setCarouselImageProperties();break;default:break;}this._bInitialLoad=false;},_itemOnEventBuildStandard:function(e,k,s,t){var u;var v=this.byId(m);var w=this.getView().byId(this.getView().getId()+"--RestOfData");if(w){w.destroy();}if(t&&this._oListRest===undefined){this._oListRest=new L(this.getView().getId()+"--RestOfData",{});}this._aLinkListIds=[m];this._iAvailableItems=v.getItems().length;var x=e.getProperty("/cardLayout/items");if(x!==undefined){this._iNoOfItemsPerColumn=x;u=x;this._iVisibleColums=1;}else{var y=e.getProperty('/staticContent')?this.getItemHeight(this,m,true):e.getProperty('/cardLayout/itemHeight');var z=this._getListHeightInStandardCard(s);this._iNoOfItemsPerColumn=Math.floor(z/y);var N=Math.ceil(this._iAvailableItems/this._iNoOfItemsPerColumn);this._iVisibleColums=Math.min(N,k);u=this._iVisibleColums*this._iNoOfItemsPerColumn;}if(u>this._iAvailableItems){u=this._iAvailableItems;}else{for(var i=u;i<this._iAvailableItems;i++){v.getItems()[i].setVisible(false);}}if(this._iVisibleColums>1){var B=this.byId("ovpListRow");var E=this._iNoOfItemsPerColumn;var G=0;for(var j=this._iNoOfItemsPerColumn;j<u;j++){if(E>=this._iNoOfItemsPerColumn){E=0;G++;var H=m+G;var J=new L(this.getView().getId()+"--"+H,{showSeparators:v.getProperty("showSeparators")});this._aLinkListIds.push(H);if(v.hasStyleClass("_iNoOfItemsPerColumnPaddingCozy")){J.addStyleClass("sapOvpLinkListStandardPaddingCozy");}else{J.addStyleClass("sapOvpLinkListStandardPaddingCompact");}B.addItem(J);}J.addItem(v.getItems()[this._iNoOfItemsPerColumn]);E++;}if(J){var K=J.getItems();K[K.length-1].addEventDelegate(p,this);}}else{if(t){this.itemOnAfterRendering(null);}else{var Q=v.getItems();Q[Q.length-1].addEventDelegate(p,this);}}},resizeCard:function(e){var i=this.getCardPropertiesModel();i.setProperty("/cardLayout/rowSpan",e.rowSpan);i.setProperty("/cardLayout/colSpan",e.colSpan);switch(i.getProperty("/listFlavor")){case"standard":this._resizeStandard(e,i);break;case"carousel":this._resizeCarousel(e);break;default:break;}if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);this.resizeHandlerId=null;}var j=this.getView().byId('ovpCardContentContainer').getDomRef();if(j){if(e.showOnlyHeader){j.classList.add('sapOvpContentHidden');}else{j.classList.remove('sapOvpContentHidden');}}},_mergeAllTheDataInOneList:function(){var e=this._aLinkListIds.length;var k=this.getView().byId("ovpLinkList");var s=-1;for(var t=0;t<k.getItems().length;t++){if(!k.getItems()[t].getVisible()){s=t;break;}}for(var i=1;i<e;i++){var u=this.getView().byId(this._aLinkListIds[i]);var v=u.getItems().length;for(var j=0;j<v;j++){if(s===-1){k.addItem(u.getItems()[0]);}else{k.insertItem(u.getItems()[0],s);s++;}}u.destroy();}},_resizeStandard:function(i,j){if(this._aLinkListIds){this._mergeAllTheDataInOneList();var t=this.getView().byId("ovpLinkList");this._aLinkListIds.splice(0,this._aLinkListIds.length);var u=this._oListRest.getItems().length;try{for(var k=0;k<u;k++){t.addItem(this._oListRest.getItems()[0]);}}catch(e){r.info("Error: "+e);}for(var s=0;s<t.getItems().length;s++){t.getItems()[s].setVisible(true);}if(!t){var v=this.byId(m).$().parent();v.width("100%");var w=j.getProperty("/cardLayout/rowSpan");if(w){this._setListHeightInStandardCard(w);}}var B=t.getBindingInfo("items");var x=j.getProperty('/staticContent')?this.getItemHeight(this,m,true):j.getProperty('/cardLayout/itemHeight');var N=this._getListHeightInStandardCard(i.rowSpan);var y=Math.floor(N/x)*i.colSpan;this._bInitialLoad=false;q(this.getView().$()).find(".sapOvpWrapper").css({height:N+"px"});if(B){if(y>this._iAvailableItems&&B.length<=this._iAvailableItems){B.length=y;t.bindItems(B);this._bListenerAttached=false;this.attachingListenerToTheEventRefresh();}else{this._itemOnEventBuildStandard(j,i.colSpan,i.rowSpan,false);}}else{this._itemOnEventBuildStandard(j,i.colSpan,i.rowSpan,false);}}},_resizeCarousel:function(e){this._setListHeightInCarouselCard(e.rowSpan);this._setCarouselImageProperties();},_setListHeightInCarouselCard:function(i){var e=0,j=this.byId(P);if(i!==-1){var H=0;var k=this.byId(n);if(k){H=k.$().outerHeight();}var s=this.getCardPropertiesModel();var t=s.getProperty("/cardLayout/iRowHeightPx");e=(i*t)-(H+f+g);j.$().height(e+16);}else{var u=j.$().width(),v=null,w=j.getPages(),x=0;for(var y=0;y<w.length;y++){v=w[y];if(v&&v.getItems().length>1){x=Math.max(x,v.getItems()[0].$().outerHeight());}}var N=j.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight();e=u+(x+N);j.$().height(e);}},_setCarouselImageProperties:function(){var e=this.byId(P),i=e.getPages(),j=e.$().height(),N=i.length>1?e.$().find(".sapMCrslControlsBottom.sapMCrslControls").outerHeight():0,k=null,s=null,t=0,E,u;for(var v=0;v<i.length;v++){k=i[v];if(k){E=k.getAggregation('items')&&k.getItems()[0];if(E){t=E.hasStyleClass('sapOvpCarouselContentHeader')?E.$().outerHeight():0;u=k.getItems()[k.getItems().length-1];s=u.getAggregation('items')&&u.getItems()[0];if(s instanceof I){this._setCarouselImageHeight(s,j-t-N);}}}}},_setCarouselImageHeight:function(i,e){var j=i.getDomRef().naturalHeight;if(j!==0){j<e?i.setHeight(j+'px'):i.setHeight(e+'px');}},_setListHeightInStandardCard:function(e){var j=0;var k;var s;k=this.byId(m);if(k){j=this._getListHeightInStandardCard(e);s=k.$().parent();s.height(j);}if(this._aLinkListIds){for(var i=1;i<this._aLinkListIds.length;i++){k=this.byId(this._aLinkListIds[i]);j=this._getListHeightInStandardCard(e);s=k.$().parent();s.height(j);}}},_getListHeightInStandardCard:function(i){var e=0;var j=this.getCardPropertiesModel();if(i){var H=0;var k=this.byId(n);if(k){H=k.$().outerHeight();}var s=j.getProperty("/cardLayout/iRowHeightPx");e=(i*s)-(H+h+l);}return e;},_setListColumnWidthInStandardCard:function(i){var e;var k;var s="100%";if(this._aLinkListIds){if(this._aLinkListIds.length>1){for(var j=0;j<this._aLinkListIds.length;j++){e=this.byId(this._aLinkListIds[j]);k=e.$().parent();s=(100/i)+"%";k.width(s);}}else{e=this.byId(this._aLinkListIds[0]);if(e){k=e.$().parent();k.width(s);}}}},onLinkListItemPressLocalData:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var t=e.getSource().data("targetUri");var i=e.getSource().data("openInNewWindow");var B=this.getView().getModel("ovpCardProperties").getProperty("/baseUrl");if(t){t=this.buildUrl(B,t);if(i==="true"){d(t,"newWindow");}else{window.location.href=t;}}}},onLinkListActionPressLocalData:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var s=e.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:(this.onFuImpSuccess.bind(this)),error:(this.onFuImpFailed.bind(this))});}},onFuImpSuccess:function(e){M.show(b.getText("Toast_Action_Success"),{duration:3000});},onFuImpFailed:function(e){M.show(b.getText("Toast_Action_Error"),{duration:3000});},onLinkListItemPress:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),i[0],N);}},onLinkPopover:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i;switch(this.getCardPropertiesModel().getProperty("/listFlavor")){case"standard":i=e.getSource().getParent().getAggregation("items")[0];break;case"carousel":i=e.getSource().getParent().getAggregation("items")[0];break;default:break;}var j=this.getCardPropertiesModel();if(j.getProperty("/listFlavor")==="carousel"){var k=this.byId(P);k.addEventDelegate(p,this);}i.bindElement(e.getSource().getBindingContext().getPath());i.openBy(e.getSource());if(!this._bListeningPopOver){i.attachAfterOpen(function(){this.settingHeightAndWidthOfLinkListCardsOnManageCardAndFilter();}.bind(this));}this._bListeningPopOver=true;}},onLinkListLineItemUrl:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var t,s="com.sap.vocabularies.UI.v1.LineItem",N=this.entityType[s][0].Url;if(N.hasOwnProperty("String")){t=N.String;}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),s)[0];t=i.url;}if(t){window.location.href=t;}else{r.info("LinkList Standard Card: No Navigation on line item");}}},onLinkNavigationSingleTarget:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=this.getEntityNavigationEntries(e.getSource().getBindingContext(),undefined);this.doNavigation(e.getSource().getBindingContext(),i[0],N);}},onLinkNavigation:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{if(sap.ushell.Container.getService("CrossApplicationNavigation")){var B=e.getSource().getBindingContext();if(B.getProperty("SemanticObject")){var N={target:{semanticObject:B.getProperty("SemanticObject"),action:B.getProperty("SemanticAction")}};sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(N);}}}},buildUrl:function(B,s){if(s.lastIndexOf(B,0)===0||s.indexOf("://")>0){return s;}else if(s.lastIndexOf("/",0)===0){return B+s;}else{return B+"/"+s;}},onLinkListActionPress:function(e){if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var s=e.getSource().data("dataAction");this.getView().getModel().callFunction(s,{method:"POST",urlParameters:{FunctionImport:s},success:(this.onFuImpSuccess.bind(this)),error:(this.onFuImpFailed.bind(this))});}},onLinkListSemanticObjectPressLocalData:function(e){var N=c.bCRTLPressed?c.constants.explace:c.constants.inplace;c.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var i=parseInt(e.getSource().data("contentRowIndex"),10);this._oStaticContent=this.getCardPropertiesModel().getProperty("/staticContent");if(this._oStaticContent[i].semanticObject&&this._oStaticContent[i].action){var j={semanticObject:this._oStaticContent[i].semanticObject,action:this._oStaticContent[i].action,iStaticLinkListIndex:i};this.doIntentBasedNavigation(null,j,false,N);}else{M.show(b.getText("Toast_Action_Error"),{duration:3000});}}},onExit:function(){C.prototype.onExit.apply(this,arguments);}});});
sap.ui.predefine('sap/ovp/cards/v4/list/Component',["sap/ovp/cards/v4/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.v4.list.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.list.List"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.v4.list.List"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"countHeaderFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.CountHeader"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.KPIHeader"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:["sap.suite.ui.microchart"],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/v4/list/List.controller',["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/cards/v4/V4AnnotationHelper","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/cards/Filterhelper"],function(C,q,J,O,a,A,b,o,u,F){"use strict";var l=new o("OVP.v4.list.List");return C.extend("sap.ovp.cards.v4.list.List",{counter:0,arrayLength:0,minMaxModel:{},onInit:function(){C.prototype.onInit.apply(this,arguments);this.counter=0;this.minMaxModel=new J();this.minMaxModel.setData({minValue:0,maxValue:0});this.getView().setModel(this.minMaxModel,"minMaxModel");var t=this;this.eventhandler=function(c,d,f){if(t.getView().getModel().getMetaModel().getData){var m=t.getView().getModel().getMetaModel().getData();var g=t.getView().getModel('ovpCardProperties').getData().entityType.$Type;var r=F._getEntityRelevantFilters(m[g],f);r=F.mergeFilters(r,t.selectionVaraintFilter);try{t.getCardItemsBinding().filter(r);if(t.getKPIBinding()){t.getKPIBinding().filter(r);}}catch(e){}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onContactDetailsLinkPress:function(e){var p,s,B;s=e.getSource();p=s.getParent().getAggregation("items")[0];B=s.getBindingContext();if(!B){return;}p.bindElement(B.getPath());p.openBy(s);},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);var i=this.getCardPropertiesModel().getProperty("/imageSupported");var d=this.getCardPropertiesModel().getProperty("/densityStyle");if(i){var c=this.byId('ovpList');c.attachUpdateFinished(function(){this._addImageCss(d);}.bind(this));}if(!O.checkIfAPIIsUsed(this)&&this.getCardPropertiesModel().getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(this.cardId);var h=Math.max(e.dashboardLayout.headerHeight,this.getHeaderHeight());var s=this.oDashboardLayoutUtil.getCardDomId(this.cardId);var f=document.getElementById(s);if(!e.dashboardLayout.autoSpan){f.getElementsByClassName('sapOvpWrapper')[0].style.height=(e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX)-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX)+"px";}if(e.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}}if(!O.checkIfAPIIsUsed(this)){var g=this.getCardPropertiesModel();var j=this.getOwnerComponent().getModel("ui").getData().cards;var r=[];if(this.getMetaModel().getData){var k=this.getMetaModel().getData()[this.getEntitySet().$Type];this.selectionVaraintFilter=F.getSelectionVariantFilters(j,g,this.getEntityType());}var m=this.oCardComponentData.mainComponent;if(m.getGlobalFilter()){r=F._getEntityRelevantFilters(k,m.oGlobalFilter.getFilters());}if(m.getMacroFilterBar()){var n=m.aFilters;r=F._getEntityRelevantFilters(k,n);}r=F.mergeFilters(r,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(r);}if(this.getKPIBinding()){this.getKPIBinding().filter(r);}}},_addImageCss:function(d){var L=this.byId('ovpList');var i=L.getItems();var c=false;var e=L.getDomRef().getAttribute("class");if(d==="cozy"){e=e+" sapOvpListImageCozy";}else{e=e+" sapOvpListImageCompact";}L.getDomRef().setAttribute("class",e);i.forEach(function(f){if(f.getIcon().indexOf("icon")!=-1){c=true;}});i.forEach(function(f){var g=f.getDomRef();var h;if(g&&g.children[0]&&g.children[0].children[0]){h=g.children[0].children[0];}var j=f.getDescription();var k=f.getIcon();var t=c;var m=f.getTitle();var n=m.split(' ').map(function(s){return s?s[0].toUpperCase():"";}).join('').substring(0,2);if(k!=""&&k.indexOf("icon")==-1){c=false;}if(c&&g.children[0]){q(g.children[0]).addClass("sapOvpIconListItem");}else if(g.children[0]){q(g.children[0]).addClass("sapOvpImageListItem");}if(h&&d==="cozy"&&c===false){if(h){var e=h.getAttribute("class");e=e+" sapOvpImageCozy";h.setAttribute("class",e);}}var p="";if(c===true&&j===""){p=d==="compact"?"sapOvpListWithIconNoDescCompact":"sapOvpListWithIconNoDescCozy";}else if(c===false&&j===""){p=d==="compact"?"sapOvpListWithImageNoDescCompact":"sapOvpListWithImageNoDescCozy";}else{p=d==="compact"?"sapOvpListWithImageIconCompact":"sapOvpListWithImageIconCozy";}f.addStyleClass(p);if(g&&g.children[0]&&k===""&&g.children[0].id!=="ovpIconImagePlaceHolder"){var r=document.createElement('div');r.innerText=n;r.setAttribute("id","ovpIconImagePlaceHolder");r.className=c===true?"sapOvpIconPlaceHolder":"sapOvpImagePlaceHolder";if(c===false&&d==="cozy"){r.className=r.className+" sapOvpImageCozy";}g.insertBefore(r,g.children[0]);}c=t;});},onListItemPress:function(e){var n=b.bCRTLPressed?b.constants.explace:b.constants.inplace;b.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var N=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),N[0],n);}},getCardItemsBinding:function(){var c=this.getView().byId("ovpList");return c.getBinding("items");},_getMinMaxObjectFromContext:function(n){this.counter++;var e=this.getEntitySet(),s=this.getCardPropertiesModel().getProperty("/annotationPath");s="@"+s;var r=this.getMetaModel().getData(s).$Annotations[e.$Type][s];var c="/"+e.$Type+"/@"+s;var d=this.getMetaModel().createBindingContext(c),m={minValue:0,maxValue:0};if(A.isFirstDataPointPercentageUnit(d,r)){m.minValue=0;m.maxValue=100;return m;}var f=A.getFirstDataPointValue(d,r),g=this.getView().byId("ovpList"),h=g.getBinding("items"),j=h.getCurrentContexts();for(var i=0;n?i<n:i<j.length;i++){var k=j[i].getValue(f);var p=parseFloat(k,10);if(p<m.minValue){m.minValue=p;}else if(p>m.maxValue){m.maxValue=p;}}return m;},_updateMinMaxModel:function(n){var m=this._getMinMaxObjectFromContext(n);this.minMaxModel.setData({minValue:m.minValue,maxValue:m.maxValue});this.minMaxModel.refresh();return m;},returnBarChartValue:function(v){this._updateMinMaxModel();var V=parseFloat(v,10);return V;},getCardItemBindingInfo:function(){var L=this.getView().byId("ovpList");return L.getBindingInfo("items");},resizeCard:function(n,c){var N,i,h;try{var $=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),B=this.getCardItemBindingInfo(),H=this.getHeaderHeight(),d=this.getView().byId('ovpCardContentContainer').getDomRef();if(n.showOnlyHeader){d.classList.add('sapOvpContentHidden');N=0;}else{d.classList.remove('sapOvpContentHidden');h=H+c.dropDownHeight;i=n.rowSpan*n.iRowHeightPx-h;N=Math.abs(Math.floor(i/c.itemHeight));$.style.height=n.rowSpan*n.iRowHeightPx+'px';}d.style.height=(n.rowSpan*n.iRowHeightPx)-(H+2*n.iCardBorderPx)+"px";if(N!==B.length){B.length=N;n.noOfItems=B.length;this.getCardItemsBinding().refresh();}else{this._handleCountHeader();}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString());}},onExit:function(){C.prototype.onExit.apply(this,arguments);}});});
sap.ui.predefine('sap/ovp/cards/v4/table/Component',["sap/ovp/cards/v4/generic/Component"],function(C){"use strict";return C.extend("sap.ovp.cards.v4.table.Component",{metadata:{properties:{"contentFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.table.Table"},"controllerName":{"type":"string","defaultValue":"sap.ovp.cards.v4.table.Table"},"annotationPath":{"type":"string","defaultValue":"com.sap.vocabularies.UI.v1.LineItem"},"countHeaderFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.CountHeader"},"headerExtensionFragment":{"type":"string","defaultValue":"sap.ovp.cards.v4.generic.KPIHeader"}},version:"1.96.0",library:"sap.ovp",includes:[],dependencies:{libs:[],components:[]},config:{}}});});
sap.ui.predefine('sap/ovp/cards/v4/table/Table.controller',["sap/ovp/cards/v4/generic/Card.controller","sap/ui/thirdparty/jquery","sap/ovp/cards/OVPCardAsAPIUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger","sap/ovp/cards/Filterhelper"],function(C,q,O,a,b,o,F){"use strict";var l=new o("OVP.table.Table");return C.extend("sap.ovp.cards.v4.table.Table",{onInit:function(){C.prototype.onInit.apply(this,arguments);var t=this;this.eventhandler=function(c,d,f){if(t.getView().getModel().getMetaModel().getData){var m=t.getView().getModel().getMetaModel().getData();var g=t.getView().getModel('ovpCardProperties').getData().entityType.$Type;var r=F._getEntityRelevantFilters(m[g],f);r=F.mergeFilters(r,t.selectionVaraintFilter);try{t.getCardItemsBinding().filter(r);if(t.getKPIBinding()){t.getKPIBinding().filter(r);}}catch(e){}}};this.GloabalEventBus=sap.ui.getCore().getEventBus();if(this.oCardComponentData&&this.oCardComponentData.mainComponent){this.GloabalEventBus.subscribe("OVPGlobalfilter","OVPGlobalFilterSeacrhfired",t.eventhandler);}},onColumnListItemPress:function(e){var n=b.bCRTLPressed?b.constants.explace:b.constants.inplace;b.bCRTLPressed=false;if(O.checkIfAPIIsUsed(this)){if(this.checkAPINavigation()){a.onContentClicked(e);}}else{var N=this.getEntityNavigationEntries(e.getSource().getBindingContext(),this.getCardPropertiesModel().getProperty("/annotationPath"));this.doNavigation(e.getSource().getBindingContext(),N[0],n);}},onContactDetailsLinkPress:function(e){if(this.oPopover){this.oPopover.setVisible(false);}var s,B;s=e.getSource();this.oPopover=s.getParent().getAggregation("items")[0];B=s.getBindingContext();if(!B){return;}this.oPopover.bindElement(B.getPath());this.oPopover.setVisible(true);this.oPopover.openBy(s);},getCardItemsBinding:function(){var t=this.getView().byId("ovpTable");return t.getBinding("items");},onAfterRendering:function(){C.prototype.onAfterRendering.apply(this,arguments);var c=this.getOwnerComponent().getComponentData();var d=this.getCardPropertiesModel();if(!O.checkIfAPIIsUsed(this)&&d.getProperty("/layoutDetail")==="resizable"){var e=this.oDashboardLayoutUtil.dashboardLayoutModel.getCardById(c.cardId);var h=this.getHeaderHeight();var s=this.oDashboardLayoutUtil.getCardDomId(c.cardId);var f=document.getElementById(s);if(!e.dashboardLayout.autoSpan){f.getElementsByClassName('sapOvpWrapper')[0].style.height=((e.dashboardLayout.rowSpan*this.oDashboardLayoutUtil.ROW_HEIGHT_PX)+1-(h+2*this.oDashboardLayoutUtil.CARD_BORDER_PX))+"px";}if(e.dashboardLayout.showOnlyHeader){f.classList.add("sapOvpMinHeightContainer");}this.addColumnInTable(q(f),{colSpan:e.dashboardLayout.colSpan});}else{var t=this.getView().byId("ovpTable");var A=t.getAggregation("columns");for(var i=0;i<3;i++){if(A[i]){A[i].setStyleClass("sapTableColumnShow").setVisible(true);}}}if(!O.checkIfAPIIsUsed(this)){var d=this.getCardPropertiesModel();var g=this.getOwnerComponent().getModel("ui").getData().cards;var r=[];if(this.getMetaModel().getData){var j=this.getMetaModel().getData()[this.getEntitySet().$Type];this.selectionVaraintFilter=F.getSelectionVariantFilters(g,d,this.getEntityType());}var m=this.oCardComponentData.mainComponent;if(m.getGlobalFilter()){r=F._getEntityRelevantFilters(j,m.oGlobalFilter.getFilters());}if(m.getMacroFilterBar()){var k=m.aFilters;r=F._getEntityRelevantFilters(j,k);}r=F.mergeFilters(r,this.selectionVaraintFilter);if(this.getCardItemsBinding()){this.getCardItemsBinding().filter(r);}if(this.getKPIBinding()){this.getKPIBinding().filter(r);}}},getCardItemBindingInfo:function(){var L=this.getView().byId("ovpTable");return L.getBindingInfo("items");},addColumnInTable:function($,c){if(c.colSpan>=1){if(q($).find("tr").length!=0){var t=sap.ui.getCore().byId(q($).find(".sapMList").attr("id"));var d=t.getAggregation("columns");var e=c.colSpan;var I=e+1;for(var i=0;i<6;i++){if(d[i]){if(i<=I){d[i].setStyleClass("sapTableColumnShow").setVisible(true);}else{d[i].setStyleClass("sapTableColumnHide").setVisible(false);}}}}}},resizeCard:function(n,c){var N,A,h,A;try{var $=document.getElementById(this.oDashboardLayoutUtil.getCardDomId(this.cardId)),B=this.getCardItemBindingInfo(),H=this.getHeaderHeight(),d=this.getView().byId('ovpCardContentContainer').getDomRef();if(n.showOnlyHeader){d.classList.add('sapOvpContentHidden');N=0;}else{d.classList.remove('sapOvpContentHidden');h=H+c.dropDownHeight;A=(n.rowSpan*n.iRowHeightPx)-h-c.itemHeight;N=Math.abs(Math.floor(A/c.itemHeight));$.style.height=n.rowSpan*n.iRowHeightPx+'px';}d.style.height=(n.rowSpan*n.iRowHeightPx)-(H+2*n.iCardBorderPx)+"px";this.addColumnInTable(this.getView().getDomRef(),n);if(N!==B.length){B.length=N;n.noOfItems=B.length;this.getCardItemsBinding().refresh();}else{this._handleCountHeader();}}catch(e){l.warning("OVP resize: "+this.cardId+" catch "+e.toString());}},onExit:function(){C.prototype.onExit.apply(this,arguments);}});});
sap.ui.predefine('sap/ovp/flexibility/DashboardLayout.flexibility',["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge"],function(C,R,O,a,M,S,b,c,d,m){"use strict";return{"moveControls":{"changeHandler":"default","layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"unhideControl":C.UnhideControlConfig,"unhideCardContainer":C.UnhideCardContainer,"hideCardContainer":C.HideCardContainer,"removeCardContainer":R,"editCardSettings":{changeHandler:{applyChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getContent(),i=h.newAppDescriptor,j=f.byId(i.id),k=g.getLayout(),l=k.getDashboardLayoutModel(),L=k.getDashboardLayoutUtil(),n=l.getCardById(i.id),q=L.calculateCardProperties(i.id),N=i.settings.defaultSpan&&i.settings.defaultSpan.rows,r=i.settings.defaultSpan&&i.settings.defaultSpan.cols,s=l.getColCount()+1,t=[],F=false;o.setRevertData(h.oldAppDescriptor);if(j){if(i.settings.tabs){var D=i.settings.selectedKey;if(!D||D<1){D=1;}S.tabFields.forEach(function(v){var w=i.settings.tabs[D-1][v];if(v!=='entitySet'||(v==='entitySet'&&w)){delete i.settings[v];}if(w){i.settings[v]=w;}});}if(typeof N==='number'){if(N===0){n.dashboardLayout.showOnlyHeader=true;N=Math.ceil((q.headerHeight+2*L.CARD_BORDER_PX)/L.getRowHeightPx());}else{n.dashboardLayout.showOnlyHeader=false;if(i.template==='sap.ovp.cards.list'||i.template==='sap.ovp.cards.table'){n.dashboardLayout.noOfItems=N;}}}if(r){if(n.dashboardLayout.column+r>s){n.dashboardLayout.maxColSpan=r;r=s-n.dashboardLayout.column;}F=true;}if(F){l._arrangeCards(n,{row:N,column:r},'resize',t);l._removeSpaceBeforeCard(t);L._positionCards(l.aCards);F=false;}var u=j.getComponentInstance();u.destroy();}g.recreateRTAClonedCard(i);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getRevertData(),i=f.byId(h.id),j=g.getLayout(),l=j.getDashboardLayoutModel(),L=j.getDashboardLayoutUtil(),k=l.getCardById(h.id),n=h.settings.defaultSpan&&h.settings.defaultSpan.rowSpan,q=h.settings.defaultSpan&&h.settings.defaultSpan.colSpan,s=h.settings.defaultSpan&&h.settings.defaultSpan.showOnlyHeader,r=[];if(i){k.dashboardLayout.rowSpan=n;k.dashboardLayout.colSpan=q;k.dashboardLayout.showOnlyHeader=s;l._arrangeCards(k,{row:n,column:q},'resize',r);l._removeSpaceBeforeCard(r);L._positionCards(l.aCards);var t=i.getComponentInstance();t.destroy();}g.recreateRTAClonedCard(h);o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"newCardSettings":{changeHandler:{applyChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getContent();o.setRevertData(h.id);var n=new a(f.getId()+"--"+h.id),A=p.appComponent,u=g.getUIModel(),j=u.getProperty("/cards"),k=g.getLayout(),l=k.getDashboardLayoutUtil(),L=k.getDashboardLayoutModel(),N=(h.id.indexOf("newStaticLinkListCard_N")!==-1)&&!b.checkClonedCard(h.id),q=(h.id.indexOf("newKPICard_N")!==-1)&&!b.checkClonedCard(h.id),r=(h.id.indexOf("newCard_N")!==-1)&&!b.checkClonedCard(h.id),s=b.newDataSource;if(q){var t=h.settings.selectedKPI,v=new sap.ui.model.odata.v2.ODataModel(t.ODataURI,{'annotationURI':t.ModelURI,'defaultCountMode':sap.ui.model.odata.CountMode.None}),w=h.model;if(h.settings["sAnnoKey"]){b.setDataSources(h.settings["sAnnoKey"],t.ModelURI);}f.setModel(v,w);A.setModel(v,w);}if(s&&!A.getModel(h.model)){var x=new sap.ui.model.odata.v2.ODataModel(b.newDataSourceModel.serviceURI,{'annotationURI':b.newDataSourceModel.serviceAnnotationURI,'defaultCountMode':sap.ui.model.odata.CountMode.None}),w=h.model;b.setDataSources(b.newDataSourceModel.serviceAnnotation,b.newDataSourceModel.serviceAnnotationURI);f.setModel(x,w);A.setModel(x,w);}h.settings.baseUrl=g._getBaseUrl();if(N||q||r){h.settings.newCard=true;L._setCardSpanFromDefault(h);h.dashboardLayout.row=1;h.dashboardLayout.column=1;}else{h.settings.cloneCard=true;}var I=-1,i;for(i=0;i<j.length;i++){if(h.id.lastIndexOf(c._getLayerNamespace()+"."+j[i].id,0)===0){I=i;var y=L.getCardById(j[i].id);h.dashboardLayout=m({},y.dashboardLayout);var z=h.dashboardLayout.column+h.dashboardLayout.colSpan;h.dashboardLayout.column=z<L.getColCount()?z:1;break;}}j.splice(I+1,0,h);l.getCards().splice(I+1,0,h);u.setProperty("/cards",j);k.insertContent(n,I+1);setTimeout(function(){var B=O.getOverlay(n);B.setSelected(true);B.focus();var D=(N||q||r)?d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");M.show(D,{duration:10000});},0);g.recreateRTAClonedCard(h);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl(),A=p.appComponent,g=f.getController(),s=o.getRevertData(),h=o.getContent();var k=f.byId(s),u=g.getUIModel(),l=u.getProperty("/cards"),n=g.getLayout(),L=n.getDashboardLayoutUtil(),q=n.getDashboardLayoutModel(),r=L.getCards();var I=-1,i,j,t=-1;for(i=0;i<l.length;i++){if(s===l[i].id){I=i;break;}}l.splice(I,1);for(j=0;j<r.length;j++){if(s===r[j].id){t=j;break;}}r.splice(t,1);q._removeSpaceBeforeCard();u.setProperty("/cards",l);if(k){var v=k.getComponentInstance(),w=v.getComponentData(),N=(w.cardId.indexOf("newKPICard_N")!==-1)&&!b.checkClonedCard(s);if(N){var x=w.modelName,y=f.getModel(x);y.destroy();if(h.settings["sAnnoKey"]){b.removeDataSources(h.settings["sAnnoKey"]);}f.setModel(null,x);A.setModel(null,x);}v.destroy();}n.removeContent(I);k.destroy();o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"dragAndDropUI":{changeHandler:{applyChange:function(o,p,P){var e=P.appComponent.getRootControl().getController(),f=o.getContent(),g=e.getLayout(),l=g.getDashboardLayoutUtil(),L=g.getDashboardLayoutModel(),h=L.getCardById(f.cardId),s='C'+L.getColCount(),i=[];o.setRevertData(f);L._arrangeCards(h,{row:f.dashboardLayout[s].row,column:f.dashboardLayout[s].column},'drag',i);L._removeSpaceBeforeCard(i);l._positionCards(L.aCards);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl().getController(),g=o.getContent(),h=f.getLayout(),l=h.getDashboardLayoutUtil(),L=h.getDashboardLayoutModel(),i=L.getCardById(g.cardId),s='C'+L.getColCount(),j=[];L._arrangeCards(i,{row:g.dashboardLayout[s].oldRow,column:g.dashboardLayout[s].oldColumn},'drag',j);if(g.dashboardLayout[s].oldColSpan){L._arrangeCards(i,{row:g.dashboardLayout[s].rowSpan,column:g.dashboardLayout[s].oldColSpan},'resize',j);}L._removeSpaceBeforeCard(j);l._positionCards(L.aCards);o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"viewSwitch":C.PersonalizationDefaultConfig,"visibility":C.PersonalizationDefaultConfig,"dragOrResize":C.PersonalizationDefaultConfig};},true);
sap.ui.predefine('sap/ovp/flexibility/EasyScanLayout.flexibility',["sap/ovp/flexibility/changeHandler/CardChangeHandler","sap/ovp/flexibility/changeHandler/RemoveCardContainer","sap/ui/dt/OverlayRegistry","sap/ui/core/ComponentContainer","sap/m/MessageToast","sap/ovp/cards/rta/SettingsDialogConstants","sap/ovp/cards/SettingsUtils","sap/ovp/cards/CommonUtils","sap/ovp/app/resources","sap/base/util/merge"],function(C,R,O,a,M,S,b,c,d,m){"use strict";return{"moveControls":{"changeHandler":"default","layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"unhideControl":C.UnhideControlConfig,"unhideCardContainer":C.UnhideCardContainer,"hideCardContainer":C.HideCardContainer,"removeCardContainer":R,"editCardSettings":{changeHandler:{applyChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getContent(),i=h.newAppDescriptor,j=f.byId(i.id);o.setRevertData(h.oldAppDescriptor);if(j){if(i.settings.tabs){var D=i.settings.selectedKey;if(!D||D<1){D=1;}S.tabFields.forEach(function(l){var v=i.settings.tabs[D-1][l];if(l!=='entitySet'||(l==='entitySet'&&v)){delete i.settings[l];}if(v){i.settings[l]=v;}});}var k=j.getComponentInstance();k.destroy();}g.recreateRTAClonedCard(i);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getRevertData(),i=f.byId(h.id);if(i){var j=i.getComponentInstance();j.destroy();}g.recreateRTAClonedCard(h);o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"newCardSettings":{changeHandler:{applyChange:function(o,e,p){var f=p.appComponent.getRootControl(),g=f.getController(),h=o.getContent();o.setRevertData(h.id);var n=new a(f.getId()+"--"+h.id),A=p.appComponent,u=g.getUIModel(),j=u.getProperty("/cards"),k=g.getLayout(),N=(h.id.indexOf("newStaticLinkListCard_N")!==-1)&&!b.checkClonedCard(h.id),l=(h.id.indexOf("newKPICard_N")!==-1)&&!b.checkClonedCard(h.id),q=(h.id.indexOf("newCard_N")!==-1)&&!b.checkClonedCard(h.id),r=b.newDataSource;if(l){var s=h.settings.selectedKPI,t=new sap.ui.model.odata.v2.ODataModel(s.ODataURI,{'annotationURI':s.ModelURI,'defaultCountMode':sap.ui.model.odata.CountMode.None}),v=h.model;if(h.settings["sAnnoKey"]){b.setDataSources(h.settings["sAnnoKey"],s.ModelURI);}f.setModel(t,v);A.setModel(t,v);}if(r&&!A.getModel(h.model)){var w=new sap.ui.model.odata.v2.ODataModel(b.newDataSourceModel.serviceURI,{'annotationURI':b.newDataSourceModel.serviceAnnotationURI,'defaultCountMode':sap.ui.model.odata.CountMode.None}),v=h.model;b.setDataSources(b.newDataSourceModel.serviceAnnotation,b.newDataSourceModel.serviceAnnotationURI);f.setModel(w,v);A.setModel(w,v);}h.settings.baseUrl=g._getBaseUrl();if(N||l||q){h.settings.newCard=true;}else{h.settings.cloneCard=true;}var I=-1,i;for(i=0;i<j.length;i++){if(h.id.lastIndexOf(c._getLayerNamespace()+"."+j[i].id,0)===0){I=i;break;}}j.splice(I+1,0,h);u.setProperty("/cards",j);k.insertContent(n,I+1);setTimeout(function(){var x=O.getOverlay(n);x.setSelected(true);x.focus();var y=(N||l||q)?d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_NEW"):d.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_CLONE");M.show(y,{duration:10000});},0);g.recreateRTAClonedCard(h);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl(),A=p.appComponent,g=f.getController(),s=o.getRevertData(),h=o.getContent();var j=f.byId(s),u=g.getUIModel(),k=u.getProperty("/cards"),l=g.getLayout();var I=-1,i;for(i=0;i<k.length;i++){if(s===k[i].id){I=i;break;}}k.splice(I,1);u.setProperty("/cards",k);if(j){var n=j.getComponentInstance(),q=n.getComponentData(),N=(q.cardId.indexOf("newKPICard_N")!==-1)&&!b.checkClonedCard(s);if(N){var r=q.modelName,t=f.getModel(r);t.destroy();if(h.settings["sAnnoKey"]){b.removeDataSources(h.settings["sAnnoKey"]);}f.setModel(null,r);A.setModel(null,r);}n.destroy();}l.removeContent(I);j.destroy();o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"dragAndDropUI":{changeHandler:{applyChange:function(o,p,P){var e=P.appComponent.getRootControl().getController(),f=o.getContent(),g=m({},f),u=e.getUIModel(),h=u.getProperty("/cards"),i=e.getLayout(),v;v=g.position;g.position=g.oldPosition;g.oldPosition=v;o.setRevertData(g);v=h[f.position];h[f.position]=h[f.oldPosition];h[f.oldPosition]=v;u.setProperty("/cards",h);var t=i.getContent()[f.position],j=i.getContent()[f.oldPosition];i.removeContent(j);i.insertContent(j,f.position);i.removeContent(t);i.insertContent(t,f.oldPosition);setTimeout(function(){var k=O.getOverlay(j);k.setSelected(true);k.focus();},0);return true;},revertChange:function(o,e,p){var f=p.appComponent.getRootControl().getController(),g=o.getRevertData(),u=f.getUIModel(),h=u.getProperty("/cards"),i=f.getLayout(),v;v=h[g.position];h[g.position]=h[g.oldPosition];h[g.oldPosition]=v;u.setProperty("/cards",h);var t=i.getContent()[g.position],j=i.getContent()[g.oldPosition];i.removeContent(j);i.insertContent(j,g.position);i.removeContent(t);i.insertContent(t,g.oldPosition);setTimeout(function(){var k=O.getOverlay(j);k.setSelected(true);k.focus();},0);o.resetRevertData();return true;},completeChangeContent:function(o,s,p){return;}},layers:{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}},"viewSwitch":C.PersonalizationDefaultConfig,"visibility":C.PersonalizationDefaultConfig,"position":C.PersonalizationDefaultConfig};},true);
sap.ui.predefine('sap/ovp/flexibility/changeHandler/CardChangeHandler',[],function(){'use strict';
function g(){return{"changeHandler":{},"layers":{"VENDOR":true,"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};}
var P={"changeHandler":{applyChange:function(C,p,m){var a=m.appComponent.getRootControl();var d=a.getController();d.appendIncomingDeltaChange(C);return;},completeChangeContent:function(C,s,p){return;},revertChange:function(C,o,p){return;}},"layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};var U={"changeHandler":"default","layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};var H=g();var b=g();
H.changeHandler.applyChange=function(C,o,p){return c(C,o,p,false);};
H.changeHandler.revertChange=function(C,o,p){return _(C,o,p,true);};
H.changeHandler.completeChangeContent=function(C,s,p){C.setContent(s.removedElement);};
b.changeHandler.applyChange=function(C,o,p){return c(C,o,p,true);};
b.changeHandler.revertChange=function(C,o,p){return _(C,o,p,false);};
b.changeHandler.completeChangeContent=function(C,s,p){C.setContent({"id":s.revealedElementId});};
function _(C,o,p,v){var m=p.modifier,a=p.appComponent,M=a.getRootControl(),d=M.getController(),u=d.getUIModel(),l=d.getLayout(),s=a.createId(C.getRevertData()),e=m.bySelector(s);m.setVisible(e,v);C.resetRevertData();if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();L.updateCardVisibility([{id:L.getCardIdFromComponent(s),visibility:v}]);}l.rerender();return true;}
function c(C,o,p,v){var m=p.modifier,M=p.appComponent.getRootControl();if(!M){throw new Error("Main view is not initialized yet.");}var d=M.getController(),u=d.getUIModel(),l=d.getLayout(),s=C.getContent().id,A=p.appComponent,e=A.createId(s),S={id:e,isLocalId:false},f=m.bySelector(S,A,M);var h=d.deltaChanges.filter(function(a){return a._oDefinition.selector.id===C._oDefinition.content.id&&a._oDefinition.changeType==="visibility";});if(d.aManifestOrderedCards){for(var i=0;i<d.aManifestOrderedCards.length;i++){var j=C._oDefinition.content.id;var k=j.indexOf("---")+3;var n=j.substring(k);if(d.aManifestOrderedCards[i].id===n.split("--")[1]){d.oView.oController.aManifestOrderedCards[i].visibility=C._oDefinition.changeType==="hideCardContainer"?false:true;}}}if(!d.aManifestOrderedCards||h.length===0){C.setRevertData(e);m.setVisible(f,v);if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();if(L.aCards){L.updateCardVisibility([{id:L.getCardIdFromComponent(e),visibility:v}]);}d.appendIncomingDeltaChange(C);}if(v){var q=M.byId(e);if(!q.getComponentInstance()&&d.bFinishedCardsCreationProcess){var r=d._getCardFromManifest(d._getCardId(e));d.recreateRTAClonedCard(r);}}l.rerender();return true;}return false;}
return{HideCardContainer:H,UnhideCardContainer:b,PersonalizationDefaultConfig:P,UnhideControlConfig:U};});
sap.ui.predefine('sap/ovp/flexibility/changeHandler/PersonalizationChangeHandler',[],function(){'use strict';var c={"changeHandler":{applyChange:function(C,p,P){var a=P.appComponent.getRootControl();var b=a.getController();b.appendIncomingDeltaChange(C);return;},getCondenserInfo:function(C){return{affectedControl:C.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:C.getSelector().id+'-'+C.getDefinition().changeType};},completeChangeContent:function(C,s,p){return;},revertChange:function(C,o,p){return;}},"layers":{"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};return{"viewSwitch":c,"visibility":c,"position":c,"dragOrResize":c};});
sap.ui.predefine('sap/ovp/placeholder/placeholderHelper',["sap/base/util/UriParameters","sap/ui/core/Placeholder"],function(U,P){"use strict";var p={isPlaceHolderEnabled:function(){var e=window["sap-ushell-config"]&&window["sap-ushell-config"].apps&&window["sap-ushell-config"].apps.placeholder&&window["sap-ushell-config"].apps.placeholder.enabled,b=U.fromQuery(window.location.search).get("sap-ui-xx-placeholder");return e===false||b==="false"?false:true;},getPlaceholderInfo:function(){return new P({html:"sap/fe/placeholder/view/PlaceholderOVP.fragment.html",autoClose:true});},showPlaceholder:function(n){if(this.isPlaceHolderEnabled()&&!this.bPlaceholderShown){this.navContainer=n;this.bPlaceholderShown=true;n.showPlaceholder({placeholder:this.getPlaceholderInfo()});}},hidePlaceholder:function(){if(this.bPlaceholderShown){var n=this.navContainer;n&&n.hidePlaceholder();this.bPlaceholderShown=false;}},hidePlaceholderNeeded:function(){return this.bPlaceholderShown;}};return p;});
sap.ui.predefine('sap/ovp/support/DiagnosticsTool/DiagnosticsTool',["jquery.sap.global","sap/ui/core/support/Plugin","sap/ui/core/format/DateFormat","sap/ui/model/json/JSONModel","sap/ovp/support/lib/CommonChecks","sap/ovp/support/lib/CommonMethods"],function(q,P,D,J,C,a){"use strict";var p="sapUiSupportFioriElementsPluginALPLROP";
function g(s){var o,A,v=p+"-View",d=[],e=sap.ui.getCore().getEventBus(),m,b,r,M,I,t=10,T;function G(){return p;}function f(i){var d1=D.getDateInstance({source:{pattern:"YYYYMMdd"},style:"short"});return d1.format(d1.parse(String(i).substring(0,8)));}function c(i){var d1=window.location.origin;var e1=window.location.pathname;var f1=i||C.getComponentIDByStructure();if(f1){m=C.getManifestPath(f1);if(m){var g1=C.getManifestURL(d1,e1,m);if(g1){return g1;}}}return"";}function h(i,d1,e1,f1,g1){if(i==="string"){d.push({order:e1,name:d1,type:i,value:f1});return true;}else if(i==="link"){d.push({order:e1,name:d1,type:i,value:f1,target:g1});return true;}else if(i==="group"){d.push({order:e1,name:d1,type:i});return true;}return false;}function j(i,d1,e1){return h("string",i,d1,e1,"");}function k(i,d1,e1,f1){return h("link",i,d1,e1,f1);}function l(i,d1){return h("group",i,d1,"","");}function n(i){if(!(i&&a.hasObjectContent(i))){return undefined;}if(!(i.getMetadata()&&a.hasObjectContent(i.getMetadata()))){return undefined;}var d1=i.getMetadata();if(!(d1.getManifest()&&a.hasObjectContent(d1.getManifest()))){return undefined;}return d1.getManifest();}function u(i){d=[];j("Error",0,i);U();}function w(i){try{var d1=C.getUI5VersionInfo();if(d1&&a.hasObjectContent(d1)){j("OpenUI5 Version",i,d1.version+" (built at "+f(d1.buildTimestamp)+")");return true;}else{j("OpenUI5 Version",i,"ERROR: OpenUI5 version is not available!");return false;}}catch(ex){j("OpenUI5 Version",i,sap.ui.version+", detailed UI5 version info is not available! Possible reason: missing file \"sap-ui-version.json\"");return true;}}function x(i){var d1=a.getApplicationName(window.location.href);if(d1){k("Application URL",i,"#"+d1,window.location.href);return true;}else{j("Application URL",i,"ERROR: Could not extract application name (#semanticObject-action) from URL!");return false;}}function y(i){if(m&&b){var d1=m;if(m.indexOf("./")===0){d1=m.substring(2,m.length);}k("Manifest",i,d1,b);return true;}else{j("Manifest",i,"ERROR: Could not generate link to manifest.json! Possible reason: The application did not finish loading or is not a Fiori Elements application.");return false;}}function z(i){if(!(M)){return false;}var d1=C.getRegistrationIDsByManifest(M);if(d1&&Array.isArray(d1)&&d1.length>0){j((d1.length>1?"Fiori IDs":"Fiori ID"),i,a.concatStrings(d1));return true;}return false;}function B(i){var d1=C.getApplicationComponentByManifest(M);if(d1){j("Application Component (ACH)",i,d1);return true;}else{j("Application Component (ACH)",i,"ERROR: Path /sap.app/ach not found in manifest.json! Possible reason: Invalid manifest.json");return false;}}function E(i){var d1=C.getApplicationIDByManifest(M);if(d1){j("Application ID",i,d1);return true;}else{j("Application ID",i,"ERROR: Path /sap.app/id not found in manifest.json! Possible reason: Invalid manifest.json");return false;}}function F(i){if(M){var d1=C.getFloorplanByManifest(M);}else{d1=C.getFloorplanByStructure();}if(!C.isValidFloorplan(d1)){d1=C.mFloorplans.UNKNOWN;}if(d1===C.mFloorplans.UNKNOWN){j("Floorplan Component (ACH)",i,C.getTicketComponentForFloorplan(d1)+" (ERROR: Unknown floorplan! Possible reason: Invalid manifest.json)");return false;}else{j("Floorplan Component (ACH)",i,C.getTicketComponentForFloorplan(d1)+" ("+d1+")");return true;}}function H(i,d1){if(!(M&&a.hasObjectContent(M))){return false;}if(!(M["sap.app"]&&M["sap.app"].dataSources&&M["sap.app"].dataSources[i])){j("OData Service Metadata",d1,"ERROR: Data source "+i+" not found at /sap.app/dataSources/"+i+" in manifest.json! Possible reason: Invalid manifest.json");return false;}if(!M["sap.app"].dataSources[i].uri){j("OData Service Metadata",d1,"ERROR: Data source URI not found at /sap.app/dataSources/"+i+"/uri in manifest.json! Possible reason: Invalid manifest.json");return false;}var e1=M["sap.app"].dataSources[i].uri;if(e1.lastIndexOf("/")!==e1.length-1){e1+="/";}e1+="$metadata";k("OData Metadata",d1,e1,window.location.origin+e1);return true;}function K(i,d1){if(!(M&&a.hasObjectContent(M)&&r)){return false;}if(!(M["sap.app"]&&M["sap.app"].dataSources&&M["sap.app"].dataSources[i])){j("Annotations",d1,"ERROR: Data source "+i+" not found at /sap.app/dataSources/"+i+" in manifest.json! Possible reason: Invalid manifest.json");return false;}if(!(M["sap.app"].dataSources[i].settings&&M["sap.app"].dataSources[i].settings.annotations&&M["sap.app"].dataSources[i].settings.annotations!==[])){j("Annotations",d1,"ERROR: Data source "+i+" has no annotations at /sap.app/dataSources/"+i+"/settings/annotations in manifest.json! Possible reason: Invalid manifest.json");return false;}var e1=M["sap.app"].dataSources[i].settings.annotations;e1=e1.reverse();for(var f1 in e1){if(!e1.hasOwnProperty(f1)){continue;}var g1=e1[f1];if(M["sap.app"].dataSources[g1]){var h1=M["sap.app"].dataSources[g1].uri;if(!h1){continue;}var i1="";var j1="";if(h1.indexOf("/")===0){j1="Backend Annotation";i1=window.location.origin;}else{j1="Local Annotation";i1=r;if(i1.lastIndexOf("/")!==i1.length-1){i1+="/";}}j1+=" (Prio. "+parseInt(parseInt(f1,10)+1,10)+")";k(j1,d1,M["sap.app"].dataSources[g1].uri,i1+M["sap.app"].dataSources[g1].uri);}}return true;}function L(i){if(!(M)){return;}var d1=0;function e1(m1){d1+=0.01;return m1+d1;}if(!(M["sap.ui5"]&&M["sap.ui5"].models)){j("Data Sources",i,"ERROR: Path /sap.ui5/models not found in manifest.json! Possible reason: Invalid manifest.json");return;}var f1=M["sap.ui5"].models;var g1=[];for(var h1 in f1){if(!f1.hasOwnProperty(h1)){continue;}if(f1[h1]&&f1[h1].dataSource&&f1[h1].dataSource!==""){var i1=false;for(var j1 in g1){if(!g1.hasOwnProperty(j1)){continue;}if(g1[j1].dataSource===f1[h1].dataSource){i1=true;break;}}var k1=(h1===""?"mainService":h1);if(!i1){g1.push({models:[k1],dataSource:f1[h1].dataSource});}else{g1[j1].models.push(k1);}}}if(g1.length===0){j("Data Sources",i,"ERROR: No models with data sources found in manifest.json! Possible reason: Invalid manifest.json");return;}for(var l1 in g1){if(!g1.hasOwnProperty(l1)){continue;}if(!(M["sap.app"]&&M["sap.app"].dataSources)){j("Data Sources",i,"ERROR: No data sources found at /sap.app/dataSources in manifest.json! Possible reason: Invalid manifest.json");return;}if(!M["sap.app"].dataSources[g1[l1].dataSource]){j("Data Sources",i,"ERROR: Data source "+g1[l1].dataSource+" not found at /sap.app/dataSources/"+g1[l1].dataSource+" in manifest.json! Possible reason: Invalid manifest.json");return;}l(a.concatStrings(g1[l1].models),e1(i));H(g1[l1].dataSource,e1(i));K(g1[l1].dataSource,e1(i));}}function N(i){var d1=sap.ui.getCore().byId(i);if(d1){return d1;}else{return new sap.ui.core.mvc.XMLView(i,{viewName:"sap.ovp.support.DiagnosticsTool.view.DiagnosticsTool",viewData:{plugin:o}});}}function R(){var i=N(v);i.placeAt(p);var d1=new J();i.setModel(d1,"data");}function O(){o=this;A=window.location.hash.slice(1);if(s.isToolStub()){if(!s.hasListeners(p+"SetData")){s.attachEvent(p+"SetData",Z);}if(!s.hasListeners(p+"UpdateStatus")){s.attachEvent(p+"UpdateStatus",$);}if(!s.hasListeners(p+"ShowDataRefreshed")){s.attachEvent(p+"ShowDataRefreshed",_);}window.fioriElementsPluginID=p;R();}else{if(!s.hasListeners(p+"GetData")){s.attachEvent(p+"GetData",Y);}e.unsubscribe("elements","ViewRendered",b1);e.unsubscribe("elements","ViewRenderingStarted",b1);e.subscribe("elements","ViewRendered",b1);e.subscribe("elements","ViewRenderingStarted",b1);if("onhashchange"in window){window.addEventListener("hashchange",c1);}}Y();}function Q(){if(s.isToolStub()){window.fnFEPluginToolInstanceExit=undefined;s.detachEvent(p+"SetData",Z);s.detachEvent(p+"UpdateStatus",$);s.detachEvent(p+"ShowDataRefreshed",_);N(v).destroy();}else{window.fnFEPluginAppInstanceExit=undefined;s.detachEvent(p+"GetData",Y);e.unsubscribe("elements","ViewRendered",b1);e.unsubscribe("elements","ViewRenderingStarted",b1);if("onhashchange"in window){window.removeEventListener("hashchange",c1);}}}function S(){s.sendEvent(p+"GetData",{});}function U(){var i=new J();d.sort(a.getDynamicComparator("order"));var d1=new Date().toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});var e1=true;if(!d||d.length===0){e1=false;}var f1=a.getApplicationStatus();if(!f1){a.setApplicationStatus(a.mApplicationStatus.UNKNOWN);f1=a.mApplicationStatus.UNKNOWN;}var g1="";if(f1===a.mApplicationStatus.FAILED){g1="The application did not finish loading or is no Fiori Elements application! The shown data below could be collected anyway. If the application finishes loading, the data will be updated automatically.";}i.setData({properties:d,url:window.location.href,origin:window.location.origin,retrieval:d1,copyEnabled:e1,status:f1,statusMessage:g1});s.sendEvent(p+"SetData",JSON.parse(i.getJSON()));}function V(i,d1){s.sendEvent(p+"UpdateStatus",{timeLeft:i,status:d1});}function W(){s.sendEvent(p+"ShowDataRefreshed",{});}function X(i){if(b){r=C.getRootPath(b);}d=[];U();w(1);x(2);y(3);U();if(i&&M&&a.hasObjectContent(M)){z(3);B(4);F(5);L(6);U();W();}else if(b){q.when(a.getFileFromURI(b)).done(function(d1){M=d1;z(3);E(4);B(5);F(6);L(7);}).fail(function(){j("Manifest",3,"ERROR: Could not access manifest.json even though link could be generated! Possible reason: missing permission to access file.");}).always(function(){U();W();});}}function Y(){M=undefined;b=undefined;r=undefined;var i=a.getApplicationStatus();var d1=a.getAppComponent();var e1=false;if(!(i&&a.isValidApplicationStatus(i))){i=a.mApplicationStatus.UNKNOWN;}if(i===a.mApplicationStatus.LOADING){b1();return;}else if(i===a.mApplicationStatus.FAILED){var f1=n(d1);if(f1&&a.hasObjectContent(f1)){M=f1;if(M&&M["sap.app"]&&M["sap.app"].id){b=c(M["sap.app"].id);if(!b){e1=true;}}else{e1=true;}}else{u("Could not load any data because manifest and component of current application are unknown!");W();return;}}else if(i===a.mApplicationStatus.RENDERED){b=c();if(!b){f1=n(d1);if(f1&&a.hasObjectContent(f1)){M=f1;if(M&&M["sap.app"]&&M["sap.app"].id){b=c(M["sap.app"].id);if(!b){e1=true;}}else{e1=true;}}else{u("Could not load any data because manifest and component of current application are unknown!");W();return;}}}else if(i===a.mApplicationStatus.UNKNOWN){if(C.getFloorplanByStructure()!==C.mFloorplans.UNKNOWN){M=C.getManifestByStructure();if(M&&a.hasObjectContent(M)){if(M&&M["sap.app"]&&M["sap.app"].id){b=c(M["sap.app"].id);if(!b){e1=true;}}else{e1=true;}}}else{u("Could not load any data because manifest and component of current application are unknown!");W();return;}}X(e1);}function Z(i){var d1=new J();d1.setJSON(JSON.stringify(i.getParameters()));var e1=N(v);e1.setModel(d1,"data");e1.invalidate();}function $(i){var d1=i.getParameters();N(v).getController().updateStatus(d1.timeLeft,d1.status);}function _(){var i=N(v);i.getController().showDataRefreshed();}function a1(){var i=a.getApplicationStatus();if(T>0){V(T,i);}else{T=t;a.setApplicationStatus(a.mApplicationStatus.FAILED);V(0,a.mApplicationStatus.FAILED);I.removeListener(a1);I=undefined;Y();}T--;}function b1(i,d1){if(d1==="ViewRenderingStarted"||(!d1&&a.getApplicationStatus()===a.mApplicationStatus.LOADING)){a.setApplicationStatus(a.mApplicationStatus.LOADING);if(!I){T=t;I=new sap.ui.core.IntervalTrigger(1000);I.addListener(a1);}}else if(d1==="ViewRendered"){a.setApplicationStatus(a.mApplicationStatus.RENDERED);T=t;if(I){I.removeListener(a1);I=undefined;}Y();}}function c1(d1){function e1(j1){for(var i=0;i<j1.length;i++){if(j1[i]==="/"||j1[i]==="&"||j1[i]==="?"||j1[i]==="~"){return i;}}return j1.length;}function f1(i,j1){if(!i||!j1){return false;}if(i===j1){return true;}var k1=e1(i);var l1=e1(j1);if(k1!==l1){return false;}else if(i.substr(0,k1)===j1.substr(0,l1)){return true;}return false;}var g1,h1,i1=false;if(d1.originalEvent.oldURL&&d1.originalEvent.newURL){g1=d1.originalEvent.oldURL.split("#")[1];h1=d1.originalEvent.newURL.split("#")[1];}else{g1=A;h1=window.location.hash.slice(1);A=h1;}if(g1.length>=h1.length){i1=f1(h1,g1);}else{i1=f1(g1,h1);}if(!i1){a.setApplicationStatus(a.mApplicationStatus.LOADING);a.setAppComponent(undefined);b1();T=(t/2);}}return{init:O,exit:Q,getId:G,onRefresh:S};}
return P.extend("sap.ovp.support.DiagnosticsTool.DiagnosticsTool",{constructor:function(s){P.apply(this,[p,"SAP Fiori Elements",s]);Object.assign(this,g(s));}});});
sap.ui.predefine('sap/ovp/support/DiagnosticsTool/controller/DiagnosticsTool.controller',["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ovp/support/lib/Documentation","sap/ui/thirdparty/jquery","sap/ovp/cards/ovpLogger"],function(C,M,a,D,q,o){"use strict";var l=new o("OVP.controller.DiagnosticsTool");
function O(){this.getView().attachAfterRendering(function(){A();});}
function f(){var m=this.getView().getModel("data");if(m.getProperty("/status")==="Loading"){M.show("Application is still loading");return;}var t=new Date().toLocaleTimeString([],{hour12:false,hour:"2-digit",minute:"2-digit",second:"2-digit"});m.setData({properties:null,retrieval:t,copyEnabled:false});m.updateBindings();this.getView().getViewData().plugin.onRefresh();}
function b(){var n="\r\n";var p="- ";var e=this.getView().getModel("data").getData();if(!(e&&e.properties&&e.url)){a.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return;}var P=e.properties;var g="*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+n;g+=p+"Extracted on "+new Date().toUTCString()+n;g+=p+"Host: "+e.origin+n;g+=p+"Application status: "+e.status+n;if(e.statusMessage){g+=p+"Notice: "+e.statusMessage+n;}g+=p+"Documentation: "+D.getDocuURL()+n;g+=n;g+="APP DATA"+n;for(var i=0,h=P.length;i<h;i++){if(P[i].type==="string"){g+=p+P[i].name+": "+P[i].value+n;}else if(P[i].type==="link"){g+=p+P[i].name+": "+P[i].target+n;}else if(P[i].type==="group"){g+="Group: "+P[i].name+n;}}g+=n;g+="**************************"+n;g+=n;g+=n;g+="PROVIDE"+n;g+=p+"User/Password: <user>/<password>"+n;g+=p+"Steps to recreate the issue: <maybe also provide master data, pictures or video>"+n;var t=this.getView().byId("CopyDataTextArea").getId();var T=document.getElementById(t);T.style.display="block";T.value=g;T.select();try{var S=document.execCommand("copy");if(S){M.show("Ticket relevant information copied to clip board");}else{a.error("Could not copy data to your clipboard! You can copy it manually from here: "+n+n+g,{title:"Error"});}}catch(j){a.error("Could not copy data to your clipboard! You can copy it manually from here: "+n+n+g,{title:"Error"});}finally{T.style.display="none";}}
function c(){var n="<br/>",S="</span>"+n,e="<span>",p=e+"- ",g=this.getView().getModel("data").getData();if(!(g&&g.properties&&g.url)){a.error("Could not copy data to your clipboard! No data collected",{title:"Error"});return;}var P=g.properties,$=document.getElementById(this.getView().byId("CopyDataHTML").getId()),h=$[0];var j=e+"*************+Extracted by SAP Fiori Elements Diagnostics Plugin [FEDiagnosticOVP]+*************"+S;j+=p+"Extracted on "+new Date().toUTCString()+S;j+=p+"Host: <a href=\""+g.url+"\" rel=\"noopener noreferrer\">"+g.origin+"</a>"+S;j+=p+"Application status: "+g.status+S;if(g.statusMessage){j+=p+"Notice: "+g.statusMessage+S;}j+=p+"Documentation: "+"<a href=\""+D.getDocuURL()+"\" rel=\"noopener noreferrer\">"+D.getDocuURL()+"</a>"+S;j+=n;j+=e+"APP DATA"+S;for(var i=0,k=P.length;i<k;i++){if(P[i].type==="string"){j+=p+P[i].name+": "+P[i].value+S;}else if(P[i].type==="link"){j+=p+P[i].name+": <a href=\""+P[i].target+"\" rel=\"noopener noreferrer\">"+P[i].value+"</a>"+S;}else if(P[i].type==="group"){j+=e+"Group: "+P[i].name+S;}}j+=e+"**************************"+S;j+=n;j+=e+"PROVIDE"+S;j+=e+"User/Password: &lt;user&gt;/&lt;password&gt;"+S;j+=e+"Steps to recreate the issue: &lt;maybe also provide master data, pictures or video&gt;"+S;function r(){try{document.getSelection().removeAllRanges();}catch(t){return function(){};}}$.empty();h.insertAdjacentHTML('beforeend',j);try{var m=document.createRange();r();m.selectNode(h);document.getSelection().addRange(m);document.execCommand("copy");r();M.show("Ticket relevant information copied to clip board with HTML format");}catch(t){r();b();}finally{$.empty();}}
function d(){D.openDocumentation();}
function A(){var g=q(".diagnosticPropertiesGroupHeaderContent");if(g.length===0){l.debug("No headers found which should be customized");return;}var G,$,e;for(var i=0;i<g.length;i++){G=q(g[i]);$=G.parents("td:first");e=q("#"+$[0].id);e.addClass("diagnosticPropertiesGroupHeader");e.attr("colspan",2);e.next().remove();}}
function u(t,S){var m=this.getView().getModel("data");m.setData({timeLeft:t,status:S});}
function s(){if(window.fioriElementsPluginID){var v=document.getElementById(window.fioriElementsPluginID);if(v&&v.parent()&&!v.parent().hasClass("sapUiSupportHidden")){M.show("Data refreshed");}}}
return C.extend("sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool",{onInit:O,onRefreshData:f,onCopyDataPlain:b,onCopyDataHTML:c,onShowDocumentation:d,updateStatus:u,showDataRefreshed:s});});
sap.ui.predefine('sap/ovp/support/lib/CommonChecks',["sap/ovp/support/lib/CommonMethods","sap/ui/thirdparty/jquery"],function(C,q){"use strict";var f={UNKNOWN:"Unknown",LISTREPORT:"sap.suite.ui.generic.template.ListReport",ANALYTICALLISTPAGE:"sap.suite.ui.generic.template.AnalyticalListPage",OVERVIEWPAGE:"sap.ovp"};var t={UNKNOWN:"CA-UI5-ST",LISTREPORT:"CA-UI5-ST",ANALYTICALLISTPAGE:"CA-UI5-ST-ALP",OVERVIEWPAGE:"CA-UI5-ST-OVP"};
function g(){return sap.ui.getVersionInfo();}
function G(M){return(M&&M["sap.app"]&&M["sap.app"].ach)?M["sap.app"].ach:"";}
function a(M){if(M&&M["sap.app"]&&M["sap.app"].id){if(M["sap.app"].id==="${project"+".artifactId}"){return e();}return M["sap.app"].id;}return"";}
function b(M){return(M&&M["sap.fiori"]&&M["sap.fiori"].registrationIds&&M["sap.fiori"].registrationIds.length>0)?M["sap.fiori"].registrationIds:[];}
function c(V,P){for(var i=0;i<V.length;i++){if(V[i]&&V[i].id&&V[i].id.indexOf(P)!==-1){return V[i].id.split("::")[0];}}return"";}
function d(){var x=q(".sapUiXMLView"),O=q(".ovpWrapper"),P="::sap.suite.ui.generic.template",M;if(O&&O.length&&O.length>0){x=O.closest(".sapUiXMLView");if(x&&x.length&&x.length>0&&x[0]&&x[0].id&&sap.ui.getCore().byId(x[0].id)&&sap.ui.getCore().byId(x[0].id).getController()&&sap.ui.getCore().byId(x[0].id).getController().getOwnerComponent()&&sap.ui.getCore().byId(x[0].id).getController().getOwnerComponent().getMetadata()&&sap.ui.getCore().byId(x[0].id).getController().getOwnerComponent().getMetadata().getManifest()){M=sap.ui.getCore().byId(x[0].id).getController().getOwnerComponent().getMetadata().getManifest();}else{return undefined;}}else if(x&&x.length&&x.length>0){for(var i=0;i<x.length;i++){if(x[i].id.indexOf(P)!==-1){if(sap.ui.getCore().byId(x[i].id)&&sap.ui.getCore().byId(x[i].id).getController()&&sap.ui.getCore().byId(x[i].id).getController().getOwnerComponent()&&sap.ui.getCore().byId(x[i].id).getController().getOwnerComponent().getAppComponent()&&sap.ui.getCore().byId(x[i].id).getController().getOwnerComponent().getAppComponent().getMetadata()&&sap.ui.getCore().byId(x[i].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest()){M=sap.ui.getCore().byId(x[i].id).getController().getOwnerComponent().getAppComponent().getMetadata().getManifest();break;}}}if(!M||!C.hasObjectContent(M)){return undefined;}if(M&&C.hasObjectContent(M)&&M["sap.app"]&&M["sap.app"].id&&M["sap.app"].id==="${project"+".artifactId}"){M["sap.app"].id=c(x,P);}}else{return undefined;}return M;}
function e(){var M=d(),x,O,P="::sap.suite.ui.generic.template";if(M&&C.hasObjectContent(M)&&M["sap.app"]&&M["sap.app"].id){x=q(".sapUiXMLView");O=q(".ovpWrapper");if(O&&O.length&&O.length>0){x=O.closest(".sapUiXMLView");}if(x&&x.length&&x.length>0){return c(x,P);}}return"";}
function h(A){if(!A){return"";}var i=A.replace(/\./g,"/");return sap.ui.require.toUrl(i,"/manifest.json");}
function j(O,P,M){if(!O||!M){return"";}if(M.indexOf("./")===0||M.indexOf("../")===0){if(!P){return"";}return O+P.substring(0,P.lastIndexOf("/")+1)+M;}if(M.indexOf("/")===0){return O+M;}return"";}
function k(M){if(M){return M.replace("manifest.json","");}return"";}
function I(F){if(!F){return false;}for(var K in f){if(!f.hasOwnProperty(K)){continue;}if(f[K]===F){return true;}}return false;}
function l(F){if(F===f.UNKNOWN){return t.UNKNOWN;}else if(F===f.LISTREPORT){return t.LISTREPORT;}else if(F===f.ANALYTICALLISTPAGE){return t.ANALYTICALLISTPAGE;}else if(F===f.OVERVIEWPAGE){return t.OVERVIEWPAGE;}else{return t.UNKNOWN;}}
function m(M){return M&&M.hasOwnProperty("sap.ovp")&&Object.keys(M["sap.ovp"]).length!==0;}
function n(M){if(!(M&&M["sap.ui.generic.app"]&&M["sap.ui.generic.app"].pages&&M["sap.ui.generic.app"].pages!==[])){return false;}var P=M["sap.ui.generic.app"].pages;for(var K in P){if(P.hasOwnProperty(K)){if(P[K]&&P[K].component&&P[K].component.name&&P[K].component.name==="sap.suite.ui.generic.template.ListReport"){return true;}}}return false;}
function o(M){if(!(M&&M["sap.ui.generic.app"]&&M["sap.ui.generic.app"].pages&&M["sap.ui.generic.app"].pages!==[])){return false;}var P=M["sap.ui.generic.app"].pages;for(var K in P){if(P.hasOwnProperty(K)){if(P[K]&&P[K].component&&P[K].component.name&&P[K].component.name==="sap.suite.ui.generic.template.AnalyticalListPage"){return true;}}}return false;}
function p(M){if(M){if(m(M)){return f.OVERVIEWPAGE;}else if(n(M)){return f.LISTREPORT;}else if(o(M)){return f.ANALYTICALLISTPAGE;}}return f.UNKNOWN;}
function r(){return m(d());}
function s(){return n(d());}
function u(){return o(d());}
function v(){var M=d();if(m(M)){return f.OVERVIEWPAGE;}else if(n(M)){return f.LISTREPORT;}else if(o(M)){return f.ANALYTICALLISTPAGE;}return f.UNKNOWN;}
return{mFloorplans:f,mTicketComponents:t,getUI5VersionInfo:g,getApplicationComponentByManifest:G,getApplicationIDByManifest:a,getRegistrationIDsByManifest:b,getComponentIDByStructure:e,getManifestByStructure:d,getManifestPath:h,getManifestURL:j,getRootPath:k,isValidFloorplan:I,getTicketComponentForFloorplan:l,isOverviewPageByManifest:m,isListReportByManifest:n,isAnalyticalListPageByManifest:o,getFloorplanByManifest:p,isOverviewPageByStructure:r,isListReportByStructure:s,isAnalyticalListPageByStructure:u,getFloorplanByStructure:v};});
sap.ui.predefine('sap/ovp/support/lib/CommonMethods',["sap/ui/thirdparty/jquery","sap/ovp/cards/ovpLogger"],function(q,o){"use strict";var A={UNKNOWN:"Unknown",FAILED:"Failed",LOADING:"Loading",RENDERED:"Rendered"};var c=A.UNKNOWN;var d={};var l=new o("OVP.lib.CommonMethods");
function g(P){var m=1;if(P[0]==="-"){m=-1;P=P.substr(1);}return function(a,b){if(!a[P]){return(m===1?1:-1);}else if(!b[P]){return(m===1?-1:1);}var r=0;if(a[P]<b[P]){r=-1;}else if(a[P]>b[P]){r=1;}return r*m;};}
function G(P){if(P){return q.getJSON(P);}return undefined;}
function i(a){for(var I in A){if(A[I]===a){return true;}}return false;}
function f(){return c;}
function s(a){c=i(a)?a:A.UNKNOWN;}
function e(){return d;}
function S(a){d=a;return true;}
function p(a,E,D){l.info("Global event '"+E+"' published on channel '"+a+"'");sap.ui.getCore().getEventBus().publish(a,E,D);}
function C(a){if(!a||a.length<1){return"";}var b="";for(var I=0;I<a.length;I++){if(!a[I]||!(typeof a[I]==="string")){continue;}if(b){b+=", ";}b+=a[I];}return b;}
function h(O){if(!O){return false;}return Object.keys(O).length>0;}
function j(u){if(!u){return"";}var P=u.split("#");if(P.length<2){return"";}else{var H=P[1];var a=H.indexOf("~");var b=H.indexOf("?");var m=H.indexOf("/");var n=H.indexOf("&");if(a&&a!==-1&&(a<b||b===-1)&&(a<m||m===-1)&&(a<n||n===-1)){return H.substr(0,a);}else if(b&&b!==-1&&(b<a||a===-1)&&(b<m||m===-1)&&(b<n||n===-1)){return H.substr(0,b);}else if(m&&m!==-1&&(m<a||a===-1)&&(m<b||b===-1)&&(m<n||n===-1)){return H.substr(0,m);}else if(n&&n!==-1&&(n<a||a===-1)&&(n<b||b===-1)&&(n<m||m===-1)){return H.substr(0,n);}else{return H;}}}
function k(u){if(!u){return"";}var P=u.split("#");if(P.length<=0){return"";}else if(P.length===1){return P[0];}else{return P[0]+"#"+j(u);}}
return{mApplicationStatus:A,getDynamicComparator:g,getFileFromURI:G,isValidApplicationStatus:i,getApplicationStatus:f,setApplicationStatus:s,getAppComponent:e,setAppComponent:S,publishEvent:p,concatStrings:C,hasObjectContent:h,getApplicationName:j,shortenURL:k};});
sap.ui.predefine('sap/ovp/ui/Card',["sap/ui/core/Control"],function(C){"use strict";return C.extend("sap.ovp.ui.Card",{metadata:{library:"sap.ovp",designTime:false,aggregations:{innerCard:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"innerCard"},init:function(){},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapOvpBaseCardWrapper");r.writeClasses();r.write(">");r.renderControl(c.getAggregation("innerCard"));r.write("</div>");}});});
sap.ui.predefine('sap/ovp/ui/CardContentContainer',["sap/m/FlexBox"],function(F){"use strict";
var C=F.extend("sap.ovp.ui.CardContentContainer",{
metadata:{library:"sap.ovp"},
renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapOvpCardContentContainer sapMTBStandard");r.writeClasses();r.write(">");var a=c.getItems();for(var i=0;i<a.length;i++){r.renderControl(a[i]);}r.write("</div>");}}
});
return C;});
sap.ui.predefine('sap/ovp/ui/DashboardLayout',["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/KeyCodes","sap/ui/events/F6Navigation","sap/ovp/cards/jUtils"],function(C,q,D,R,O,a,K,F,u){"use strict";
var b=C.extend("sap.ovp.ui.DashboardLayout",{
metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{}},properties:{dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},
renderer:{render:function(r,o){var d=o.$().width();var e=sap.ui.getCore().getConfiguration().getRTL();var l=o.dashboardLayoutUtil.updateLayoutData(d?d:window.innerWidth);var f=o.dashboardLayoutUtil.getCards(l.colCount);function g(n){return n.getVisible();}function h(n){var p=this.getId();var M=p.indexOf("---")+3;var t=p.substring(M);return n.id===t.split("--")[1];}var i=o.getContent().filter(g);r.write("<div");r.writeControlData(o);r.addClass("sapUshellEasyScanLayout");if(!D.system.phone){r.addClass("sapOvpDashboardDragAndDrop");}r.addClass("sapOvpDashboard");r.writeClasses();e?r.style("margin-right",l.marginPx+"px"):r.style("margin-left",l.marginPx+"px");r.writeStyles();r.write(">");r.write("<div class='sapUshellEasyScanLayoutInner' role='list' aria-label='Cards' tabindex='0'>");if(f.length>0){var j={},k,L,s,m=o.getDashboardLayoutModel().getColCount();for(k=0,L=i.length;k<L;k++){var S=['easyScanLayoutItemWrapper','sapOvpDashboardLayoutItem'];j=f.filter(h.bind(i[k]))[0];o.dashboardLayoutUtil.setCardCssValues(j);s=j.dashboardLayout.column+j.dashboardLayout.colSpan===m+1;if(s){j.dashboardLayout.colSpan===1?S.push('sapOvpNotResizableLeftRight'):S.push('sapOvpNotResizableRight');}if(j.template==='sap.ovp.cards.stack'||j.settings.stopResizing||!D.system.desktop){S.push('sapOvpDashboardLayoutItemNoDragIcon');}r.write("<div id='"+o.dashboardLayoutUtil.getCardDomId(j.id)+"'");r.addClass(S.join(' '));r.writeClasses();r.style("transform","translate3d("+j.dashboardLayout.left+" ,"+j.dashboardLayout.top+" ,0px)");r.style("-ms-transform","translate3d("+j.dashboardLayout.left+" ,"+j.dashboardLayout.top+" ,0px)");r.style("-moz-transform","translate3d("+j.dashboardLayout.left+" ,"+j.dashboardLayout.top+" ,0px)");r.style("-webkit-transform","translate3d("+j.dashboardLayout.left+" ,"+j.dashboardLayout.top+" ,0px)");r.style("height",j.dashboardLayout.height);r.style("width",j.dashboardLayout.width);r.writeStyles();r.write("tabindex='0' aria-setsize="+L+" aria-posinset="+(k+1));r.writeAccessibilityState(undefined,{role:"listitem"});r.write(">");r.renderControl(i[k]);r.write("<div class='lastElement' tabindex='0'></div>");r.write("</div>");}}r.write("</div>");r.write("<div class='after' tabindex='0'></div>");r.write("</div>");}},
init:function(){this.data("sap-ui-fastnavgroup","true",true);this.oColumnLayoutData={};this.resizeHandlerId=this.initResizeHandler();var o=sap.ui.getCore().getComponent(this._sOwnerId);this.dashboardLayoutUtil=o.getDashboardLayoutUtil();this.dashboardLayoutUtil.setLayout(this);},
exit:function(){if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop;}},
onBeforeRendering:function(){},
onAfterRendering:function(){this.keyboardNavigation=new c(this);if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId());}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=this.dashboardLayoutUtil.getRearrange({rootSelector:this.getDragAndDropRootSelector(),layout:this});this.dashboardLayoutUtil.setAriaPos();this.fireAfterRendering();}},
getLayoutDataJSON:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel().getLayoutVariants4Pers();},
filterVisibleCards:function(e){return e.getVisible();},
getDashboardLayoutUtil:function(){return this.dashboardLayoutUtil;},
getDashboardLayoutModel:function(){return this.dashboardLayoutUtil.getDashboardLayoutModel();},
getVisibleLayoutItems:function(){var d=this.getContent();var f=d.filter(this.filterVisibleCards);return f;},
initResizeHandler:function(){var r;var d=this.getDebounceTime();var e=function(f){window.clearTimeout(r);r=window.setTimeout(this.oControl.resizeHandler.bind(this,f),d);};return R.register(this,e);},
resizeHandler:function(e){this.oControl.dashboardLayoutUtil.resizeLayout(e.size.width);},
setActive:function(s){if(s){this.removeStyleClass("ovpOverlay");}else{this.addStyleClass("ovpOverlay");}},
getActive:function(){return!this.hasStyleClass("ovpOverlay");}
});
var c=function(o){this.init(o);};
c.prototype.init=function(o){this.layoutUtil=o.getDashboardLayoutUtil();this.layoutModel=o.getDashboardLayoutModel();this.keyCodes=K;this.jqElement=o.$();this.bIgnoreSelfFocus=false;this.sLastFocusableCard=null;this.lastFocussedElement=null;this.jqElement.on('keydown',this.keyDownHandler.bind(this));this.jqElement.on('keyup',this.keyUpHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));document.querySelector('body').addEventListener('keyup',this.bodyKeyupHandler.bind(this));document.querySelector('body').addEventListener('keydown',this.bodyKeydownHandler.bind(this));var l=this.layoutClickHandler.bind(this);var d=document.querySelectorAll(".sapFDynamicPageContent");for(var i=0;i<d.length;i++){d[i].addEventListener("click",l);}this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this));};
c.prototype.spacebarHandler=function(e){a.bCRTLPressed=e.ctrlKey||e.metaKey;var d=sap.ui.getCore().byId(e.target.id);if(d&&d.mEventRegistry.hasOwnProperty('press')){var f='#'+e.target.id;var g=document.querySelectorAll(f);for(var i=0;i<g.length;i++){g[i].classList.add('sapMLIBActive');}d.firePress();}};
c.prototype.bodyKeyupHandler=function(e){if(e.ctrlKey||e.metaKey){a.bCRTLPressed=false;}};
c.prototype.bodyKeydownHandler=function(e){if(e.ctrlKey||e.metaKey){a.bCRTLPressed=true;}};
c.prototype.layoutItemFocusHandler=function(){var j=q(document.activeElement);if(j){var i,s="";if(j.find('.valueStateText').length==1){var t=j.find('.valueStateText').find('.sapMObjectNumberText').text();var v=j.find('.valueStateText').find('.sapUiInvisibleText').text();j.find('.valueStateText').attr('aria-label',t+" "+v);j.find('.valueStateText').attr('aria-labelledby',"");}j.find("[role='listitem']").attr('aria-label',"");if(j.hasClass('easyScanLayoutItemWrapper')){var d="";var e=j.find('.cardCount');var f=O.getText("Card");if(e.length===0){d="countDiv_"+new Date().getTime();var g='<div id="'+d+'" class="cardCount" aria-label="'+f+'" hidden></div>';j.append(g);}else{d=e[0].id;e.attr('aria-label',f);}s+=d+" ";var o=j.find('.cardType');if(o.length!==0){s+=o[0].id+" ";}}if(j.hasClass('sapOvpCardHeader')&&!j.hasClass('sapOvpStackCardContent')){var h="";var k=j.find('.cardHeaderType');if(k.length===0){var l=O.getText("CardHeaderType");h="cardHeaderType_"+new Date().getTime();var m='<div id="'+h+'" class="cardHeaderType" aria-label="'+l+'" hidden></div>';j.append(m);}else{h=k[0].id;}s+=h+" ";}var n,p;if(j.hasClass('easyScanLayoutItemWrapper')){p=j.find('.sapOvpCardHeader');n=p.find("[aria-label]");}else{n=j.find("[aria-label]");}var r=(j.find('.sapOvpStackCardHeader').length!==1);if(r){for(i=0;i<n.length;i++){s+=n[i].id+" ";}}if(j.hasClass('sapOvpCardHeader')){var w=j.find('.cardHeaderText');if(w.length!==0){for(var i=0;i<w.length;i++){if(s.indexOf(w[i].id)===-1){s+=w[i].id+" ";}}}}if(s.length){j.attr("aria-labelledby",s);}if(j.prop('nodeName')==="LI"&&j.find('.linkListHasPopover').length!==0){if(j.find('#hasDetails').length===0){j.append("<div id='hasDetails' hidden>"+O.getText("HAS_DETAILS")+"</div>");j.attr('aria-describedby',"hasDetails");}}var x=j.attr("id");if((x&&x.indexOf("ovpTable")!=-1)&&j.find("[role='Link']")&&!j.hasClass('sapUiCompSmartLink')){var y=j.closest("td").attr("data-sap-ui-column"),z=j.closest("tbody").siblings().children().filter("tr").children();for(var i=0;i<z.length;i++){if(z[i].getAttribute("data-sap-ui")==y&&z[i].hasChildNodes("span")){var A=z[i].firstElementChild.getAttribute("id");j.attr("aria-labelledby",A);}}}}};
c.prototype.layoutFocusHandler=function(e){if(q(e.relatedTarget).hasClass('easyScanLayoutItemWrapper')){return;}if(this.sLastFocusableCard){this.sLastFocusableCard=q(this.sLastFocusableCard);if(!this.sLastFocusableCard.is(this.lastFocussedElement)&&e.relatedTarget){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;}else{this.lastFocussedElement=undefined;}return;}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;};
c.prototype.layoutClickHandler=function(e){if(e&&e.target&&e.target.getAttribute("id")&&e.target.getAttribute("id").indexOf("mainView")!==-1){if(this.sLastFocusableCard){this.sLastFocusableCard.focus();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;return;}this.jqElement.find(".easyScanLayoutItemWrapper").first().focus();this.sLastFocusableCard=this.jqElement.find(".easyScanLayoutItemWrapper").first();this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;}};
c.prototype.ctrlArrowHandler=function(o,d){var e=this.layoutUtil.dashboardLayoutModel.getCardById(d),f=o.dashboardLayout.row,g=e.dashboardLayout.row,n=e.dashboardLayout.column,h=[],i;if(g>f&&e.dashboardLayout.rowSpan>=o.dashboardLayout.rowSpan){i=f+e.dashboardLayout.rowSpan;}else{i=g;}this.layoutUtil.dashboardLayoutModel._arrangeCards(o,{row:i,column:n},'drag',h);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard(h);this.layoutUtil._positionCards(this.layoutModel.aCards);this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:h});};
c.prototype.shiftArrowHandler=function(o,s,d){if(o.template==="sap.ovp.cards.stack"){return;}this.resizeStartHandler(o,d);var e=this.layoutUtil.calculateCardProperties(o.id),l=e.leastHeight+2*this.layoutUtil.CARD_BORDER_PX,L=Math.ceil(l/this.layoutUtil.getRowHeightPx());if(s.rowSpan<=L){s.rowSpan=L;s.showOnlyHeader=true;d.classList.add("sapOvpMinHeightContainer");}else{s.showOnlyHeader=false;d.classList.remove("sapOvpMinHeightContainer");}var r=this.layoutUtil.dashboardLayoutModel.resizeCard(o.id,s,true,this.layoutUtil.dragOrResizeChanges);this.resizeStopHandler(r.resizeCard,d);};
c.prototype.resizeStartHandler=function(o,d){this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.resizeStartCard={cardId:o.id,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader};d.classList.add('sapOvpCardResize');o.dashboardLayout.autoSpan=false;};
c.prototype.resizeStopHandler=function(o,d){d.classList.remove('sapOvpCardResize');d.style.zIndex='auto';this.layoutUtil._sizeCard(o);this.layoutUtil._positionCards(this.layoutModel.aCards);o.dashboardLayout.maxColSpan=o.dashboardLayout.colSpan;this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:o.id,dashboardLayout:{rowSpan:o.dashboardLayout.rowSpan,oldRowSpan:this.layoutUtil.resizeStartCard.rowSpan,colSpan:o.dashboardLayout.colSpan,oldColSpan:this.layoutUtil.resizeStartCard.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,oldMaxColSpan:this.layoutUtil.resizeStartCard.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,oldNoOfItems:this.layoutUtil.resizeStartCard.noOfItems,autoSpan:o.dashboardLayout.autoSpan,oldAutoSpan:this.layoutUtil.resizeStartCard.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:this.layoutUtil.resizeStartCard.showOnlyHeader}},isUserDependent:true});this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});};
c.prototype.keyUpHandler=function(e){switch(e.keyCode){case this.keyCodes.SPACE:this.spacebarHandler(e);break;default:break;}};
c.prototype.keyDownHandler=function(e){var d=document.activeElement,s=this.layoutUtil.getCardId(d.id),f=Object.assign([],this.layoutModel.aCards),o=this.layoutModel.getCardById(s),g=this.layoutModel.iColCount,t={},h,l,m,r,n,p,v,S,I=sap.ui.getCore().getConfiguration().getRTL(),w=q(document.activeElement);this.layoutModel._sortCardsByRow(f);for(var i=1;i<=g;i++){t[i]=[];}for(var j=0;j<f.length;j++){h=f[j].dashboardLayout.column;l=f[j].dashboardLayout.colSpan;if(l===1){t[h].push(f[j]);}else{for(var k=h;k<h+l;k++){t[k].push(f[j]);}}}r=this.getCardPosition(s,t[o.dashboardLayout.column]);switch(e.keyCode){case this.keyCodes.TAB:if(e.shiftKey){this.shiftTabButtonHandler(e);}else{this.tabButtonHandler(e);}break;case this.keyCodes.F6:if(e.shiftKey){this.bIgnoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();F.handleF6GroupNavigation(e);}else{this.bIgnoreSelfFocus=true;var x=this.jqElement.scrollTop();this.jqElement.find(".after").focus();F.handleF6GroupNavigation(e);this.jqElement.scrollTop(x);}break;case this.keyCodes.F7:e.preventDefault();if(w.hasClass("easyScanLayoutItemWrapper")){w.find(":sapTabbable").first().focus();}else{w.closest(".easyScanLayoutItemWrapper").focus();}break;case this.keyCodes.ARROW_UP:e.preventDefault();m=o.dashboardLayout.column;r--;n=t[m][r]&&t[m][r].id;if(n&&e.ctrlKey){this.ctrlArrowHandler(o,n);this.setFocusOnCard(s);}else if(e.shiftKey){S={rowSpan:o.dashboardLayout.rowSpan-3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,S,e.target);this.setFocusOnCard(s);}else if(w&&w.hasClass("easyScanLayoutItemWrapper")){this.setFocusOnCard(n);}break;case this.keyCodes.ARROW_DOWN:e.preventDefault();m=o.dashboardLayout.column;r++;n=t[m][r]&&t[m][r].id;if(n&&e.ctrlKey){this.ctrlArrowHandler(o,n);this.setFocusOnCard(s);}else if(e.shiftKey){if(((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==='carousel'&&o.dashboardLayout.rowSpan>=45)){return;}S={rowSpan:o.dashboardLayout.rowSpan+3,colSpan:o.dashboardLayout.colSpan};this.shiftArrowHandler(o,S,e.target);this.setFocusOnCard(s);}else{this.setFocusOnCard(n);}break;case this.keyCodes.ARROW_LEFT:var y=q(document.activeElement);if(!y.hasClass('easyScanLayoutItemWrapper')){return;}e.preventDefault();m=o.dashboardLayout.column;m--;if(!t[m]||!t[m][r]){do{if(m===0){m=g;r--;break;}if(r<0){break;}m--;}while(!t[m]||!t[m][r])}n=t[m][r]&&t[m][r].id;if(n&&e.ctrlKey){this.ctrlArrowHandler(o,n);this.setFocusOnCard(s);}else if(e.shiftKey){if(I){if((o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2)||((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==='carousel'&&o.dashboardLayout.colSpan===3)){return;}S={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1};}else{if(o.dashboardLayout.colSpan===1){return;}S={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1};}this.shiftArrowHandler(o,S,e.target);this.setFocusOnCard(s);}else{this.setFocusInCaseOfSpace(o,"Left");}break;case this.keyCodes.ARROW_RIGHT:e.preventDefault();m=o.dashboardLayout.column+o.dashboardLayout.colSpan;if(!t[m]||!t[m][r]){do{if(m>g){m=1;r++;break;}m++;}while(!t[m]||!t[m][r])}n=t[m][r]&&t[m][r].id;if(n&&e.ctrlKey){this.ctrlArrowHandler(o,n);this.setFocusOnCard(s);}else if(e.shiftKey){if(I){if(o.dashboardLayout.colSpan===1){return;}S={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan-1};}else{if((o.template==="sap.ovp.cards.list"&&o.dashboardLayout.colSpan===2)||((o.template==="sap.ovp.cards.linklist"||o.template==="sap.ovp.cards.v4.linklist")&&o.settings.listFlavor==='carousel'&&o.dashboardLayout.colSpan===3)){return;}S={rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan+1};}this.shiftArrowHandler(o,S,e.target);this.setFocusOnCard(s);}else{this.setFocusInCaseOfSpace(o,"Right");}break;case this.keyCodes.PAGE_UP:e.preventDefault();m=o.dashboardLayout.column;if(e.altKey==true){(m===1)?r=0:m=1;n=t[m][r]&&t[m][r].id;}else{p=t[m].length-1;for(var i=p;i>0;i--){v=document.getElementById(this.layoutUtil.getCardDomId(t[m][i].id));if(v.getBoundingClientRect().bottom<0){n=t[m][i].id;break;}}if(!n){n=t[m][0].id;}}this.setFocusOnCard(n);break;case this.keyCodes.PAGE_DOWN:e.preventDefault();m=o.dashboardLayout.column;if(e.altKey==true){n=(m+o.dashboardLayout.colSpan)>g?f[f.length-1].id:t[g][r]&&t[g][r].id;}else{var z=q(window).height();p=t[m].length;for(var i=0;i<p;i++){v=document.getElementById(this.layoutUtil.getCardDomId(t[m][i].id));if(v.getBoundingClientRect().top>z){n=t[m][i].id;break;}}if(!n){n=t[m][p-1].id;}}this.setFocusOnCard(n);break;case this.keyCodes.HOME:e.preventDefault();m=o.dashboardLayout.column;if(e.ctrlKey==true){(r===0)?m=1:r=0;}else{(m===1)?r=0:m=1;}n=t[m][r]&&t[m][r].id;this.setFocusOnCard(n);break;case this.keyCodes.END:e.preventDefault();m=o.dashboardLayout.column;if(e.ctrlKey==true){var A=t[m].length-1;n=(A===r)?f[f.length-1].id:t[m][A]&&t[m][A].id;}else{n=(m+o.dashboardLayout.colSpan)>g?f[f.length-1].id:t[g][r]&&t[g][r].id;}this.setFocusOnCard(n);break;case this.keyCodes.ENTER:this.spacebarHandler(e);break;default:break;}};
c.prototype.setFocusInCaseOfSpace=function(o,t){var d=Object.assign([],this.layoutModel.aCards),A=this.layoutUtil.ariaPos,e=A[o.id],n=d.filter(function(o){return t==="Right"?A[o.id]===e+1:A[o.id]===e-1;},A);this.setFocusOnCard(n[0]&&n[0].id);};
c.prototype.setFocusOnCard=function(d){if(d){var e=document.getElementById(this.layoutUtil.getCardDomId(d));e&&e.focus();this.sLastFocusableCard=e;this.layoutUtil.sLastFocusableCard=this.sLastFocusableCard;}};
c.prototype.getCardPosition=function(d,e){for(var i=0;i<e.length;i++){if(e[i].id===d){break;}}return i;};
c.prototype.tabButtonHandler=function(e){var j=q(document.activeElement);this.lastFocussedElement=j;if(j.hasClass("easyScanLayoutItemWrapper")){return;}var d=j.closest(".easyScanLayoutItemWrapper");if(!d.length){return;}var l=d.find(q(".lastElement"));if(j.is(l)){e.stopPropagation();e.stopImmediatePropagation();var f=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(f);}};
c.prototype.shiftTabButtonHandler=function(e){var j=q(document.activeElement);if(j.hasClass('after')&&this.lastFocussedElement){this.lastFocussedElement.focus();return;}if(!j.hasClass("easyScanLayoutItemWrapper")){return;}this._ignoreSelfFocus=true;this.lastFocussedElement=j;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();};
c.prototype.afterFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return;}var j,l;if(this.lastFocussedElement&&this.lastFocussedElement.hasClass('lastElement')){j=this.jqElement.find(this.lastFocussedElement.parent());l=j.find(":sapTabbable").last();}else if(this.lastFocussedElement&&this.lastFocussedElement.hasClass('easyScanLayoutItemWrapper')){l=this.lastFocussedElement;}else{j=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();l=j.find(":sapTabbable").last();}if(!l.length){l=j;}l.focus();};
return b;});
sap.ui.predefine('sap/ovp/ui/DashboardLayoutModel',["sap/ovp/cards/CommonUtils","sap/base/util/merge"],function(C,m){"use strict";var L=function(u,c,r,i){this.uiModel=u;this.setColCount(c);this.aCards=[];this.oLayoutVars=null;this.iDisplaceRow=null;this.iDummyRow=999;this.iRowHeightPx=r;this.iCardBorderPx=i;};
L.prototype.setColCount=function(c){if(!c){this.iColCount=5;}else if(c!==this.iColCount){this.iColCount=c;}};
L.prototype.setLayoutVars=function(l){if(Array.isArray(l)&&l.length>0){this.oLayoutVars=l;}this._buildGrid();};
L.prototype.updateCardVisibility=function(c){var o,a;function f(b){return b.id===c[i].id;}for(var i=0;i<c.length;i++){o=this.oLayoutVars.filter(f);a=this.aCards.filter(f);if(!c[i].visibility){o[0].dashboardLayout['C'+this.iColCount].row=this._findHighestOccupiedRow();a[0].dashboardLayout.row=o[0].dashboardLayout['C'+this.iColCount].row;}o[0].visibility=c[i].visibility;a[0].dashboardLayout.visible=c[i].visibility;}};
L.prototype.getColCount=function(){return this.iColCount;};
L.prototype.getCards=function(c){if(this.aCards.length===0||c&&c!==this.iColCount){if(c){this.setColCount(c);}this._buildGrid();}return this.aCards;};
L.prototype.getCardById=function(c){var o=null,i=0;for(i=0;i<this.aCards.length;i++){o=this.aCards[i];if(o.id===c){break;}}return o;};
L.prototype.getLayoutVariants4Pers=function(){return JSON.parse(JSON.stringify(this.oLayoutVars));};
L.prototype._readVariants=function(){var v,i,l=this.uiModel.getProperty('/dashboardLayout');function f(e){return e.id===i;}if(!!l){for(var a in l){if(l.hasOwnProperty(a)&&l[a]){v=l[a];v.id=a;for(i in v){var o=this.oLayoutVars.filter(f);if(o.length>0){var s='C'+ +v.id.replace(/[^0-9\.]/g,"");var c=o[0].dashboardLayout[s];var b=this.aCards.filter(f);if(Array.isArray(b)&&b.length>0){if(c){c.row=v[i].row;c.col=v[i].col;c.colSpan=b[0].template==='sap.ovp.cards.stack'?1:Math.min(v[i].colSpan,this.iColCount);c.maxColSpan=v[i].maxColSpan;c.noOfItems=v[i].rowSpan;}else{o[0].dashboardLayout[s]={row:v[i].row,col:v[i].col,colSpan:b[0].template==='sap.ovp.cards.stack'?1:Math.min(v[i].colSpan,this.iColCount),maxColSpan:v[i].maxColSpan,noOfItems:v[i].rowSpan,autoSpan:b[0].template==='sap.ovp.cards.stack'?false:true};}o[0].visibility=v[i].visible?v[i].visible:true;}}}}}}};
L.prototype.resetToManifest=function(){this.oLayoutVars=null;for(var i=0;i<this.aCards.length;i++){this.aCards[i].dashboardLayout={};}this._buildGrid(true);};
L.prototype._buildGrid=function(u){if(this.aCards.length===0||u){this.aCards=m([],this.uiModel.getProperty("/cards"));}if(u||!this.oLayoutVars||(this.oLayoutVars[0]&&!this.oLayoutVars[0].dashboardLayout)){this.oLayoutVars=[];this._sliceSequenceSausage();}else{this._sliceSequenceSausage(this.oLayoutVars);}this._readVariants();};
L.prototype._displaceCardToEnd=function(c){c.dashboardLayout.column=1;if(!this.iDisplaceRow){this.iDisplaceRow=this._findHighestOccupiedRow();}c.dashboardLayout.row=this.iDisplaceRow;this.iDisplaceRow+=c.dashboardLayout.rowSpan;var l=this.oLayoutVars.filter(function(i){return i.id===c.id;});if(l.length>0){l[0].dashboardLayout["C"+this.iColCount].row=c.dashboardLayout.row;}};
L.prototype._setCardSpanFromDefault=function(c){if(!c.dashboardLayout){c.dashboardLayout={};}var o=this._getDefaultCardItemHeightAndCount(c);if(!c.settings.defaultSpan){if(c.template!=='sap.ovp.cards.linklist'&&c.template!=='sap.ovp.cards.v4.linklist'){c.dashboardLayout.rowSpan=12;}c.dashboardLayout.colSpan=1;c.dashboardLayout.maxColSpan=1;c.dashboardLayout.noOfItems=o.noOfItems;c.dashboardLayout.autoSpan=c.template==='sap.ovp.cards.stack'?false:true;c.dashboardLayout.showOnlyHeader=false;}else{if(c.settings.defaultSpan.showOnlyHeader){c.dashboardLayout.rowSpan=Math.ceil((o.headerHeight+2*this.iCardBorderPx)/this.iRowHeightPx);c.dashboardLayout.noOfItems=0;c.dashboardLayout.autoSpan=false;c.dashboardLayout.showOnlyHeader=true;}else{if(c.template==='sap.ovp.cards.linklist'||c.template==='sap.ovp.cards.v4.linklist'){c.dashboardLayout.rowSpan=c.settings.defaultSpan.rows?c.settings.defaultSpan.rows:1;c.dashboardLayout.autoSpan=false;}else{c.dashboardLayout.rowSpan=8;c.dashboardLayout.autoSpan=true;}c.dashboardLayout.noOfItems=c.settings.defaultSpan.rows?c.settings.defaultSpan.rows:o.noOfItems;c.dashboardLayout.showOnlyHeader=false;}if(c.template==="sap.ovp.cards.stack"){c.dashboardLayout.colSpan=1;c.dashboardLayout.autoSpan=false;}else{c.dashboardLayout.colSpan=c.settings.defaultSpan.cols?Math.min(c.settings.defaultSpan.cols,this.iColCount):1;}c.dashboardLayout.maxColSpan=c.settings.defaultSpan.cols?c.settings.defaultSpan.cols:1;}c.dashboardLayout.visible=true;c.dashboardLayout.itemHeight=o.itemHeight;c.dashboardLayout.headerHeight=o.headerHeight;};
L.prototype._sliceSequenceSausage=function(u){var i=0,j=0,c=0,a=0,M=0,o={},s=[],b='C'+this.iColCount,p;for(i=0;i<this.iColCount;i++){s.push({col:i+1,rows:0});}function f(q){return q.id===o.id;}function n(b,q){return q!==b;}for(i=0;i<this.aCards.length;i++){o=this.aCards[i];if(!o.dashboardLayout){o.dashboardLayout={};}if(!u){this._setCardSpanFromDefault(o);}else{var l=u.filter(f);if(l.length>0){var d=l[0].dashboardLayout,e=d[b],g=Object.keys(d),O=g.filter(n.bind(this,b));if(O.length>0){p=d[O];if(p){this._mergeLayoutVariants(o.dashboardLayout,p);}}else{this._mergeLayoutVariants(o.dashboardLayout,e);continue;}}else{o.dashboardLayout.row=this.iDummyRow;o.dashboardLayout.column=1;var h={};var k={row:o.dashboardLayout.row,col:o.dashboardLayout.column,rowSpan:o.dashboardLayout.rowSpan,colSpan:o.dashboardLayout.colSpan,maxColSpan:o.dashboardLayout.maxColSpan,noOfItems:o.dashboardLayout.noOfItems,autoSpan:o.dashboardLayout.autoSpan,showOnlyHeader:o.dashboardLayout.showOnlyHeader};h[b]=k;u.push({id:o.id,visibility:o.dashboardLayout.visible,selectedKey:o.settings.selectedKey,dashboardLayout:h});continue;}}o.dashboardLayout.colSpan=o.dashboardLayout.maxColSpan;o.dashboardLayout.colSpan=o.dashboardLayout.colSpan>this.iColCount?this.iColCount:o.dashboardLayout.colSpan;c=a<this.iColCount?a+1:1;if(c+o.dashboardLayout.colSpan-1>this.iColCount){o.dashboardLayout.colSpan=this.iColCount-c+1;}a=c+o.dashboardLayout.colSpan-1;o.dashboardLayout.column=c;M=0;if(Array.isArray(l)&&l.length>0&&!l[0].visibility){o.dashboardLayout.row=this.iDummyRow;}else{for(j=o.dashboardLayout.column;j<o.dashboardLayout.column+o.dashboardLayout.colSpan;j++){if(s[j-1].rows>M){M=s[j-1].rows;}}o.dashboardLayout.row=M+1;for(j=o.dashboardLayout.column;j<o.dashboardLayout.column+o.dashboardLayout.colSpan;j++){s[j-1].rows=M+o.dashboardLayout.rowSpan;}}}this.extractCurrentLayoutVariant();};
L.prototype._mergeLayoutVariants=function(s,d){if(d.rowSpan){s.rowSpan=d.rowSpan;}if(d.colSpan){s.colSpan=d.colSpan;}if(d.maxColSpan){s.maxColSpan=d.maxColSpan;}if(d.noOfItems){s.noOfItems=d.noOfItems;}if(d.hasOwnProperty('autoSpan')){s.autoSpan=d.autoSpan;}if(d.row){s.row=d.row;}if(d.col){s.column=d.col;}if(d.hasOwnProperty('showOnlyHeader')){s.showOnlyHeader=d.showOnlyHeader;}};
L.prototype._sortCardsByRow=function(c){c.sort(function(a,b){if(!a.dashboardLayout&&b.dashboardLayout){return 1;}else if(a.dashboardLayout&&!b.dashboardLayout){return-1;}if(a.dashboardLayout.column&&a.dashboardLayout.row&&a.dashboardLayout.row===b.dashboardLayout.row){if(a.dashboardLayout.column<b.dashboardLayout.column){return-1;}else if(a.dashboardLayout.column>b.dashboardLayout.column){return 1;}}else if(a.dashboardLayout.row){return a.dashboardLayout.row-b.dashboardLayout.row;}else{return 0;}});};
L.prototype.resizeCard=function(c,s,M,d){var r=this.getCardById(c);if(!r){return[];}var a=s.colSpan-r.dashboardLayout.colSpan;var b=s.rowSpan-r.dashboardLayout.rowSpan;r.dashboardLayout.showOnlyHeader=s.showOnlyHeader;if(a===0&&b===0){return{resizeCard:r,affectedCards:[]};}else if(M&&r.dashboardLayout.autoSpan){r.dashboardLayout.autoSpan=false;}if(!M||(b&&a===0)){this._arrangeCards(r,{"row":s.rowSpan,"column":r.dashboardLayout.colSpan},'resize',d);}else{this._arrangeCards(r,{"row":s.rowSpan,"column":s.colSpan},'resize',d);}return{resizeCard:r,affectedCards:this._removeSpaceBeforeCard(d)};};
L.prototype._removeSpaceBeforeCard=function(d){this._sortCardsByRow(this.aCards);var a={};for(var i=1;i<=this.iColCount;i++){a[i]=1;}for(var j=0;j<this.aCards.length;j++){var b=this.aCards[j].dashboardLayout.column,u=this.aCards[j].dashboardLayout.column+this.aCards[j].dashboardLayout.colSpan-1;if(this.aCards[j].dashboardLayout.visible){if(u>this.iColCount){u=this.iColCount;var n=this.iColCount-this.aCards[j].dashboardLayout.column+1;if(d){d.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{colSpan:n,oldColSpan:this.aCards[j].dashboardLayout.colSpan}},isUserDependent:true});}this.aCards[j].dashboardLayout.colSpan=n;}if(this.aCards[j].dashboardLayout.colSpan>1){var t=[];for(var k=b;k<=u;k++){t.push(a[k]);}var c=Math.max.apply(Math,t);for(var l=b;l<=u;l++){a[l]=c+this.aCards[j].dashboardLayout.rowSpan;}if(d&&c!==this.aCards[j].dashboardLayout.row){d.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{row:c,oldRow:this.aCards[j].dashboardLayout.row}},isUserDependent:true});}this.aCards[j].dashboardLayout.row=c;}else{if((this.aCards[j].dashboardLayout.row!==a[b])){if(d){d.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{row:a[b],oldRow:this.aCards[j].dashboardLayout.row}},isUserDependent:true});}this.aCards[j].dashboardLayout.row=a[b];}a[b]=this.aCards[j].dashboardLayout.row+this.aCards[j].dashboardLayout.rowSpan;}}}return this.aCards;};
L.prototype._arrangeCards=function(c,n,d,D){var o=m({},c);var v=false;if(d==="drag"&&c.dashboardLayout.column===n.column&&n.row!==c.dashboardLayout.row){v=true;}this._sortCardsByRow(this.aCards);var a=[];var f=false;var b;if(d==="drag"){c.dashboardLayout.row=n.row;c.dashboardLayout.column=n.column;}else if(d==="resize"){c.dashboardLayout.rowSpan=n.row;c.dashboardLayout.colSpan=n.column;}a.push(c);for(var i=0;i<a.length;i++){for(var j=0;j<this.aCards.length;j++){if(a[i].id===this.aCards[j].id||!a[i].dashboardLayout.visible){continue;}else{f=this._checkOverlapOfCards(a[i],this.aCards[j]);if(f===true){if(v){if(n.row<o.dashboardLayout.row&&n.row===this.aCards[j].dashboardLayout.row){a[i].dashboardLayout.row=this.aCards[j].dashboardLayout.row;b=this.aCards[j].dashboardLayout.row;this.aCards[j].dashboardLayout.row=a[i].dashboardLayout.row+a[i].dashboardLayout.rowSpan;if(D){D.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{row:this.aCards[j].dashboardLayout.row,oldRow:b}},isUserDependent:true});}}else if(n.row>o.dashboardLayout.row+this.aCards[j].dashboardLayout.rowSpan){b=this.aCards[j].dashboardLayout.row;this.aCards[j].dashboardLayout.row=o.dashboardLayout.row;a[i].dashboardLayout.row=this.aCards[j].dashboardLayout.row+this.aCards[j].dashboardLayout.rowSpan;a.push(a[i]);if(D){D.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{row:this.aCards[j].dashboardLayout.row,oldRow:b}},isUserDependent:true});}}}else{b=this.aCards[j].dashboardLayout.row;this.aCards[j].dashboardLayout.row=a[i].dashboardLayout.row+a[i].dashboardLayout.rowSpan;a.push(this.aCards[j]);if(D){D.push({changeType:"dragOrResize",content:{cardId:this.aCards[j].id,dashboardLayout:{row:this.aCards[j].dashboardLayout.row,oldRow:b}},isUserDependent:true});}}}}}}};
L.prototype._checkOverlapOfCards=function(o,a){var b=o.dashboardLayout.row;var c=o.dashboardLayout.row+o.dashboardLayout.rowSpan;var d=o.dashboardLayout.column;var e=o.dashboardLayout.column+o.dashboardLayout.colSpan;var f=a.dashboardLayout.row;var g=a.dashboardLayout.row+a.dashboardLayout.rowSpan;var h=a.dashboardLayout.column;var i=a.dashboardLayout.column+a.dashboardLayout.colSpan;var j=false,k=false;if((h>=d&&h<e)||(i>d&&i<=e)||(h<=d&&i>=e)){j=true;}if((f>=b&&f<c)||(g>b&&g<=c)||(f<=b&&g>=c)){k=true;}return j&&k;};
L.prototype.extractCurrentLayoutVariant=function(){var i=0;var c={};var o=[];function f(b){return b.id===c.id;}for(i=0;i<this.aCards.length;i++){c=this.aCards[i];o=this.oLayoutVars.filter(f);var d={};var a={row:c.dashboardLayout.row,col:c.dashboardLayout.column,rowSpan:c.dashboardLayout.rowSpan,colSpan:c.dashboardLayout.colSpan,maxColSpan:c.dashboardLayout.maxColSpan,noOfItems:c.dashboardLayout.noOfItems,autoSpan:c.dashboardLayout.autoSpan,showOnlyHeader:c.dashboardLayout.showOnlyHeader};d["C"+this.iColCount]=a;if(!(Array.isArray(o)&&o.length!==0)){this.oLayoutVars.push({id:c.id,visibility:c.dashboardLayout.visible,selectedKey:c.settings.selectedKey,dashboardLayout:d});}else{o[0].selectedKey=c.settings.selectedKey||o[0].selectedKey;o[0].dashboardLayout={};o[0].dashboardLayout["C"+this.iColCount]=a;}}};
L.prototype._findHighestOccupiedRow=function(){var h=0,a=[];function f(e){return e.dashboardLayout.column===c;}function b(e,i,d){return e.dashboardLayout.row===Math.max.apply(Math,d.map(function(g){return g.dashboardLayout.row;}));}for(var c=1;c<=this.iColCount;c++){var A=this.aCards.filter(f);if(!!A){var o=A.filter(b)[0];if(!!o){a.push(+o.dashboardLayout.row+ +o.dashboardLayout.rowSpan);}}}h=Math.max.apply(Math,a.map(function(e){return e;}));return h;};
L.prototype._getDefaultCardItemHeightAndCount=function(c){var d=C._setCardpropertyDensityAttribute();var a={"List_condensed":{itemLength:5,itemHeight:64},"List_condensed_imageSupported_cozy":{itemLength:5,itemHeight:72},"List_condensed_imageSupported_compact":{itemLength:5,itemHeight:60},"List_extended":{itemLength:3,itemHeight:97},"List_condensed_bar":{itemLength:5,itemHeight:65},"List_extended_bar":{itemLength:3,itemHeight:95},"Table":{itemLength:5,itemHeight:48},"Linklist":{itemLength:6,itemHeight:0}};var h={"KPIHeader":{"1":{"1":158,"2":174},"2":{"1":179,"2":195},"3":{"1":201,"2":223}},"NormalHeader":{"1":{"1":82,"2":98},"2":{"1":103,"2":119},"3":{"1":125,"2":141}}};var S=22;var b=21;var H=0;if(c){var e=c.template,l=c.settings.listType,f=c.settings.listFlavor,i=c.settings.imageSupported,n=0,I=0;if(e=="sap.ovp.cards.list"||e=="sap.ovp.cards.v4.list"){if(l=="extended"){if(f=="bar"){n=a["List_extended_bar"]["itemLength"];I=a["List_extended_bar"]["itemHeight"];}else{n=a["List_extended"]["itemLength"];I=a["List_extended"]["itemHeight"];}}else{if(f=="bar"){n=a["List_condensed_bar"]["itemLength"];I=a["List_condensed_bar"]["itemHeight"];}else{if(i==='true'){if(d==='cozy'){I=a["List_condensed_imageSupported_cozy"]["itemHeight"];}else{I=a["List_condensed_imageSupported_compact"]["itemHeight"];}}else{I=a["List_condensed"]["itemHeight"];}n=a["List_condensed"]["itemLength"];}}}else if(e=="sap.ovp.cards.table"||e=="sap.ovp.cards.v4.table"){n=a["Table"]["itemLength"];I=a["Table"]["itemHeight"];}else if(e==="sap.ovp.cards.linklist"||e.template==='sap.ovp.cards.v4.linklist'){n=a["Linklist"]["itemLength"];I=a["Linklist"]["itemHeight"];}var t=c.settings.defaultSpan&&c.settings.defaultSpan.minimumTitleRow?c.settings.defaultSpan.minimumTitleRow:1;var s=c.settings.defaultSpan&&c.settings.defaultSpan.minimumSubTitleRow?c.settings.defaultSpan.minimumSubTitleRow:1;var g=(c.settings.dataPointAnnotationPath||(c.settings.tabs&&c.settings.tabs[0].dataPointAnnotationPath))?"KPIHeader":"NormalHeader";H=h[g][t][s];if(g==="KPIHeader"){if(c.settings.showFilterInHeader===true){H+=S;}if(c.settings.showSortingInHeader===true){H+=b;}}return{noOfItems:n,itemHeight:I,headerHeight:H};}};
return L;},true);
sap.ui.predefine('sap/ovp/ui/DashboardLayoutRearrange',["sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils"],function(U,D,q,m,o,u){"use strict";var l=new o("OVP.ui.DashboardLayoutRearrange");var R=function(s){this.init(s);};
R.prototype.init=function(s){s.beforeDragCallback=this._beforeDragHandler.bind(this);s.dragStartCallback=this._dragStartHandler.bind(this);s.dragMoveCallback=this._dragMoveHandler.bind(this);s.dragEndCallback=this._dragEndHandler.bind(this);s.resizeStartCallback=this._resizeStartHandler.bind(this);s.resizeMoveCallback=this._resizeMoveHandler.bind(this);s.resizeEndCallback=this._resizeEndHandler.bind(this);s.endCallback=this._endHandler.bind(this);this.placeHolderClass=s.placeHolderClass;this.layout=s.layout;this.settings=s;this.destroy();this.uiActions=new U(this.settings).enable();this.aCardsOrder=null;this.aCards=s.aCards;this.layoutUtil=s.layoutUtil;this.verticalMargin=null;this.horizontalMargin=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.rowHeight=s.rowHeight;this.floaterData=null;this.resizeData={};this.updatedScrollTop=0;this.SCROLL_OFFSET=16;};
R.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}};
R.prototype._resizeStartHandler=function(e,c){if(!D.system.desktop){return;}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){q(this.layoutUtil.sLastFocusableCard).blur();}var C=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(c.id));if(C.template==="sap.ovp.cards.stack"||C.settings.stopResizing){return;}this.layoutUtil.dragOrResizeChanges=[];this.layoutUtil.startResizeCardConfig=m([],this.layoutUtil.getCards());this.layoutUtil.resizeStartCard={cardId:C.id,rowSpan:C.dashboardLayout.rowSpan,colSpan:C.dashboardLayout.colSpan,maxColSpan:C.dashboardLayout.maxColSpan,noOfItems:C.dashboardLayout.noOfItems,autoSpan:C.dashboardLayout.autoSpan,showOnlyHeader:C.dashboardLayout.showOnlyHeader,row:C.dashboardLayout.row,column:C.dashboardLayout.column};if(window.getSelection){var s=window.getSelection();s.removeAllRanges();}c.classList.add('sapOvpCardResize');C.dashboardLayout.autoSpan=false;this.initCardsSettings();};
R.prototype._resizeEndHandler=function(e,c){if(c){c.classList.remove('sapOvpCardResize');if(this.uiActions.isResizeX&&!this.uiActions.isResizeY&&c.classList.contains('sapOvpNotResizableLeftRight')){return;}this.updatedScrollTop=0;c.style.zIndex='auto';var C=this.layoutUtil.changedCards.resizeCard;if(C){C.dashboardLayout.maxColSpan=C.dashboardLayout.colSpan;this.layoutUtil._sizeCard(C);this.layoutUtil.dragOrResizeChanges=[];var a=this.layoutUtil.getCards();var s=this.layoutUtil.startResizeCardConfig;for(var i=0;i<a.length;i++){var b=a[i];var d=f(s,b.id);var g=d[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:b.id,dashboardLayout:{row:b.dashboardLayout.row,oldRow:g.dashboardLayout.row,column:b.dashboardLayout.column,oldColumn:g.dashboardLayout.column,rowSpan:b.dashboardLayout.rowSpan,oldRowSpan:g.dashboardLayout.rowSpan,colSpan:b.dashboardLayout.colSpan,oldColSpan:g.dashboardLayout.colSpan,maxColSpan:b.dashboardLayout.maxColSpan,oldMaxColSpan:g.dashboardLayout.maxColSpan,noOfItems:b.dashboardLayout.noOfItems,oldNoOfItems:g.dashboardLayout.noOfItems,autoSpan:b.dashboardLayout.autoSpan,oldAutoSpan:g.dashboardLayout.autoSpan,showOnlyHeader:b.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:g.dashboardLayout.showOnlyHeader}},isUserDependent:true});}}this.layoutUtil.changedCards={};if(D.system.desktop){document.querySelector("body").classList.remove("sapOVPDisableUserSelect","sapOVPDisableImageDrag");}q(this.settings.wrapper).removeClass("dragAndDropMode");u.removeElementById("sapOvpOverlayDivForCursor");u.removeElementById("ovpResizeRubberBand");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});this.layoutUtil.setAriaPos();this.layoutUtil.startResizeCardConfig=[];if(window.getSelection){var h=window.getSelection();h.removeAllRanges();}}};
R.prototype._resizeMoveHandler=function(a){if(!D.system.desktop){return;}if(a.element){var c,b,g,d,C=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(a.element.id));if(C.template==="sap.ovp.cards.stack"||C.settings.stopResizing){return;}var v=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var e=v.offsetHeight;var h=v.getBoundingClientRect();if((a.evt.clientY-v.offsetTop+this.SCROLL_OFFSET)>e){v.scrollTop=v.scrollTop+this.SCROLL_OFFSET;this.updatedScrollTop+=this.SCROLL_OFFSET;}else if(((a.evt.clientY-v.offsetTop)<h.top+this.SCROLL_OFFSET)&&v.scrollTop!==0){v.scrollTop=v.scrollTop-this.SCROLL_OFFSET;this.updatedScrollTop-=this.SCROLL_OFFSET;}b=this.layoutUtil.calculateCardProperties(C.id);c=this._calculateMinimumCardHeight(a);if(c.ghostWidthCursor<=this.layoutUtil.getColWidthPx()&&this.uiActions.isResizeX&&!this.uiActions.isResizeY){return;}d=c.ghostHeightCursor;g=c.ghostWidthCursor<=this.layoutUtil.getColWidthPx()?this.layoutUtil.getColWidthPx():c.ghostWidthCursor;if(!this.uiActions.isResizeY){if(a.element.classList.contains('sapOvpNotResizableLeftRight')||(a.element.classList.contains('sapOvpNotResizableRight')&&c.ghostWidthCursor>C.dashboardLayout.colSpan*this.layoutUtil.getColWidthPx())){return;}else{l.info('Not a valid scenario');}if((C.template==="sap.ovp.cards.list"||C.template==="sap.ovp.cards.v4.list")&&g>this.layoutUtil.getColWidthPx()*2||((C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist")&&C.settings.listFlavor==='carousel'&&(g>this.layoutUtil.getColWidthPx()*3))){return;}}if((C.template==="sap.ovp.cards.linklist"||C.template==="sap.ovp.cards.v4.linklist")&&C.settings.listFlavor==='carousel'&&d>this.layoutUtil.getRowHeightPx()*45){a.element.classList.add('sapOvpNotResizableDown');return;}var i=b.leastHeight+2*this.layoutUtil.CARD_BORDER_PX;var j=b.minCardHeight+2*this.layoutUtil.CARD_BORDER_PX;a.element.classList.remove("sapOvpMinHeightContainer");if(d<=i){d=i;a.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true;}else if(d>i&&d<=j){var k=(i+j)/2;if(d>k){d=j;this.resizeData.showOnlyHeader=false;}else{d=i;a.element.classList.add("sapOvpMinHeightContainer");this.resizeData.showOnlyHeader=true;}}else{if(!this.uiActions.isResizeX&&(C.template==='sap.ovp.cards.list'||C.template==='sap.ovp.cards.v4.list'||C.template==='sap.ovp.cards.table'||C.template==='sap.ovp.cards.v4.table')){var n=b.headerHeight+b.dropDownHeight+2*this.layoutUtil.CARD_BORDER_PX;var p=Math.round((d-n)/b.itemHeight);d=p*b.itemHeight+n;}this.resizeData.showOnlyHeader=false;}this._addOverLay(c.cursor);this.resizeData.colSpan=Math.round(g/this.layoutUtil.getColWidthPx());this.resizeData.rowSpan=Math.ceil(d/this.layoutUtil.getRowHeightPx());this.layoutUtil.updateCardSize(C.id,d,g,this.resizeData.rowSpan);this.showGhostWhileResize(a,C);if(this.resizeData.colSpan&&this.resizeData.rowSpan){this.layoutUtil.resizeCard(a.element.getAttribute("id"),this.resizeData,this.layoutUtil.dragOrResizeChanges);}this.resizeData={};this.layoutUtil.setKpiNumericContentWidth(a.element);}};
R.prototype._beforeDragHandler=function(e,c){if(e.type==="mousedown"){e.preventDefault();}if(D.browser.mobile){this.selectableElemets=q(c).find(".sapUiSelectable");this.selectableElemets.removeClass("sapUiSelectable");}q(this.settings.wrapper).addClass("dragAndDropMode");};
R.prototype._dragStartHandler=function(e,c){if(D.system.desktop){document.querySelector("body").classList.add("sapOVPDisableUserSelect","sapOVPDisableImageDrag");}if(this.layoutUtil&&this.layoutUtil.sLastFocusableCard){q(this.layoutUtil.sLastFocusableCard).blur();}this.layoutUtil.dragOrResizeChanges=[];var C=this.layoutUtil.getCardId(c.id);var a=this.layoutUtil.dashboardLayoutModel.getCardById(C);this.layoutUtil.dragStartCardsConfig=m([],this.layoutUtil.getCards(this.columnCount));this.layoutUtil.dragStartCard={cardId:a.id,row:a.dashboardLayout.row,column:a.dashboardLayout.column,rowSpan:a.dashboardLayout.rowSpan,colSpan:a.dashboardLayout.colSpan,maxColSpan:a.dashboardLayout.maxColSpan,noOfItems:a.dashboardLayout.noOfItems,autoSpan:a.dashboardLayout.autoSpan,showOnlyHeader:a.dashboardLayout.showOnlyHeader};l.info(c);if(window.getSelection){var s=window.getSelection();s.removeAllRanges();}this.initCardsSettings();var b=c.children[0].getBoundingClientRect();this.floaterData={width:b.width,height:b.height,startLeft:b.left-this.layoutOffset.left,startTop:b.top-this.layoutOffset.top};};
R.prototype._dragMoveHandler=function(a){if(a.element){var b=0;var c=0;var v=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var d=document.getElementsByClassName("sapFDynamicPageTitleWrapper")[0].offsetHeight;if(document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0]){c=document.getElementsByClassName("sapUshellShellHeadSearchContainer")[0].offsetHeight;}var e=v.offsetHeight;var g=v.getBoundingClientRect();var h;if(document.getElementsByClassName("sapFDynamicPageHeader")[0]){b=document.getElementsByClassName("sapFDynamicPageHeader")[0].offsetHeight;}if((a.evt.clientY-v.offsetTop+this.SCROLL_OFFSET)>e){v.scrollTop=v.scrollTop+this.SCROLL_OFFSET;h=v.scrollTop;}else if(((a.evt.clientY-v.offsetTop)<g.top+this.SCROLL_OFFSET)&&v.scrollTop!==0){v.scrollTop=v.scrollTop-this.SCROLL_OFFSET;h=v.scrollTop;}else{h=v.scrollTop;}this.floaterData.id=a.element.id;this.floaterData.left=a.clone.getBoundingClientRect().left;this.floaterData.top=a.clone.getBoundingClientRect().top+h-(d+b+c);var C=Math.round(this.floaterData.left/this.layoutUtil.getColWidthPx());var n={row:Math.round(this.floaterData.top/this.layoutUtil.getRowHeightPx())+1,column:this.isRTLEnabled?this.columnCount-C:C+1};n.row=n.row<=0?1:n.row;n.column=n.column<=1?1:n.column;var i=this.layoutUtil.dashboardLayoutModel.getCardById(this.layoutUtil.getCardId(this.floaterData.id));if(n.column+i.dashboardLayout.colSpan>this.columnCount){n.column=(this.columnCount-i.dashboardLayout.colSpan)+1;}this.floaterData.row=n.row;this.floaterData.column=n.column;q.when(this.layoutUtil.dashboardLayoutModel._arrangeCards(i,this.floaterData,'drag',this.layoutUtil.dragOrResizeChanges)).done(function(){this.layoutUtil._positionCards(this.aCards);this.layoutUtil.dashboardLayoutModel._removeSpaceBeforeCard();}.bind(this));this.showGhostWhileDragMove({row:i.dashboardLayout.row,column:i.dashboardLayout.column},a);}};
R.prototype._dragEndHandler=function(e,c,a){if(c){var b=c.getBoundingClientRect();var d=a.getBoundingClientRect();var g=window.getComputedStyle(a).transform.split(",");var t=b.top-d.top;var h=b.left-d.left;var j=parseInt(g[4],10)+h;var k=parseInt(g[5],10)+t;a.style[this.layoutUtil.cssVendorTransition]='transform 0.3s cubic-bezier(0.46, 0, 0.44, 1)';j=Math.abs(j)-8<0?0:j-8;k=Math.abs(k)-8<0?0:k-8;a.style[this.layoutUtil.cssVendorTransform]='translate3d('+j+'px, '+k+'px, 0px) ';this.layoutUtil._positionCards(this.aCards);q(a).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(n){u.removeElementById("ovpDashboardLayoutMarker");this.layoutUtil.getDashboardLayoutModel().extractCurrentLayoutVariant();this.layoutUtil.dragOrResizeChanges=[];var p=this.layoutUtil.getCards();var r=this.layoutUtil.dragStartCardsConfig;for(var i=0;i<p.length;i++){var s=p[i];var C=f(r,s.id);var v=C[0];this.layoutUtil.dragOrResizeChanges.push({changeType:"dragOrResize",content:{cardId:s.id,dashboardLayout:{row:s.dashboardLayout.row,oldRow:v.dashboardLayout.row,column:s.dashboardLayout.column,oldColumn:v.dashboardLayout.column,rowSpan:s.dashboardLayout.rowSpan,oldRowSpan:v.dashboardLayout.rowSpan,colSpan:s.dashboardLayout.colSpan,oldColSpan:v.dashboardLayout.colSpan,maxColSpan:s.dashboardLayout.maxColSpan,oldMaxColSpan:v.dashboardLayout.maxColSpan,noOfItems:s.dashboardLayout.noOfItems,oldNoOfItems:v.dashboardLayout.noOfItems,autoSpan:s.dashboardLayout.autoSpan,oldAutoSpan:v.dashboardLayout.autoSpan,showOnlyHeader:s.dashboardLayout.showOnlyHeader,oldShowOnlyHeader:v.dashboardLayout.showOnlyHeader}},isUserDependent:true});}this.layoutUtil.oLayoutCtrl.fireAfterDragEnds({positionChanges:this.layoutUtil.dragOrResizeChanges});if(D.system.desktop){document.body.classList.remove("sapOVPDisableUserSelect");document.body.classList.remove("sapOVPDisableImageDrag");}q(this.settings.wrapper).removeClass("dragAndDropMode");if(window.getSelection){var w=window.getSelection();w.removeAllRanges();}this.uiActions.removeClone();c.classList.remove(this.placeHolderClass);var x=(this.layoutUtil.dashboardLayoutModel._findHighestOccupiedRow())+32;u.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"height",x+"px");u.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayoutInner"),"zIndex","1");u.addStyleToAllElements(document.querySelectorAll(".sapUshellEasyScanLayout"),"height",x+"px");this.layoutUtil.setAriaPos();this.layoutUtil.dragStartCardsConfig=[];}.bind(this));}};
R.prototype._endHandler=function(e,c){l.info(c);if(D.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass("sapUiSelectable");}};
R.prototype.initCardsSettings=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var a=this.jqLayout.scrollTop();var b=this.jqLayoutInner.height();this.isRTLEnabled=sap.ui.getCore().getConfiguration().getRTL();this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();this.corrY=this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();this.corrX=this.layoutOffset.left;this.columnCount=this.layoutUtil.dashboardLayoutModel.getColCount();var v=this.layout.getVisibleLayoutItems();if(!v){return;}function g(e){return e.$().parent()[0];}this.aCardsOrder=v.map(g);var j=this.jqLayoutInner.children().first();var c=this.isRTLEnabled?"margin-left":"margin-right";this.verticalMargin=parseInt(j.css(c),10);var d=this.aCardsOrder[0];var F=d.getBoundingClientRect();var J=this.jqLayoutInner[0].getBoundingClientRect();this.horizontalMargin=parseInt(q(d).css("margin-bottom"),10);this.verticalMargin=this.horizontalMargin;this.top=F.top-J.top;this.left=F.left-J.left;this.width=d.offsetWidth;q(this.aCardsOrder).css("position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(b);this.jqLayout.scrollTop(a);};
R.prototype.drawLayout=function(c){function a(d){var $=q(d).position();d.style[this.layoutUtil.cssVendorTransition]='all 300ms ease';d.style[this.layoutUtil.cssVendorTransform]='translate3d('+$.left+','+$.top+', 0px) ';}var C=c.length;if(C>0){for(var i=0;i<C;i++){requestAnimationFrame(a.bind(this,c[i]));}}};
R.prototype.showGhostWhileDragMove=function(n,a){var e=document.getElementById('ovpDashboardLayoutMarker'),c=(n.column-1)*this.layoutUtil.getColWidthPx(),p={top:(n.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-c-this.layoutUtil.CARD_BORDER_PX:c+this.layoutUtil.CARD_BORDER_PX};if(!e){var d=document.createElement('div');d.id='ovpDashboardLayoutMarker';d.position='absolute';d.style.height=this.floaterData.height+'px';d.style.width=this.floaterData.width+'px';d.style[this.layoutUtil.cssVendorTransform]='translate3d('+p.left+'px,'+p.top+'px, 0px) ';document.getElementsByClassName('sapUshellEasyScanLayoutInner')[0].appendChild(d);}else{e.style[this.layoutUtil.cssVendorTransition]='all 300ms ease';e.style[this.layoutUtil.cssVendorTransform]='translate3d('+p.left+'px,'+p.top+'px, 0px) ';}a.element.style[this.layoutUtil.cssVendorTransition]='all 300ms ease';a.element.style[this.layoutUtil.cssVendorTransform]='translate3d('+p.left+'px,'+p.top+'px, 0px) ';};
R.prototype.showGhostWhileResize=function(a,c){var e=document.getElementById('ovpResizeRubberBand'),C=(c.dashboardLayout.column-1)*this.layoutUtil.getColWidthPx(),p={top:(c.dashboardLayout.row-1)*this.layoutUtil.getRowHeightPx()+this.layoutUtil.CARD_BORDER_PX,left:this.isRTLEnabled?-C-this.layoutUtil.CARD_BORDER_PX:C+this.layoutUtil.CARD_BORDER_PX},h=this.resizeData.rowSpan*this.layoutUtil.getRowHeightPx()-2*this.layoutUtil.CARD_BORDER_PX+2,w=this.resizeData.colSpan*this.layoutUtil.getColWidthPx()-2*this.layoutUtil.CARD_BORDER_PX+2;if(!e){var d=document.createElement('div');d.id='ovpResizeRubberBand';d.classList.add('ovpResizeRubberBand');d.position='absolute';d.style.height=h+'px';d.style.width=w+'px';d.style[this.layoutUtil.cssVendorTransition]='all 300ms ease';d.style[this.layoutUtil.cssVendorTransform]='translate3d('+p.left+'px,'+p.top+'px, 0px) ';a.element.parentElement.appendChild(d);}else{e.style.height=h+'px';e.style.width=w+'px';}};
R.prototype._addOverLay=function(c){var e=document.getElementById('sapOvpOverlayDivForCursor');if(!e){var a=document.createElement('div');a.id='sapOvpOverlayDivForCursor';a.style.cursor=c;this.jqLayout[0].appendChild(a);}else{e.style.cursor=c;}};
R.prototype._calculateMinimumCardHeight=function(a){var $=a.element.getBoundingClientRect(),e=$.top,c=$.right,g,b,d;if(this.uiActions.isResizeX&&!this.uiActions.isResizeY){g=this.isRTLEnabled?c-a.moveX:a.moveX-$.left;b=$.height;d='ew-resize';}else if(!this.uiActions.isResizeX&&this.uiActions.isResizeY){g=$.width;b=a.moveY-e;d='ns-resize';}else{g=this.isRTLEnabled?c-a.moveX:a.moveX-$.left;b=a.moveY-e;d=this.isRTLEnabled?'nesw-resize':'nwse-resize';}return{ghostWidthCursor:g,ghostHeightCursor:b,cursor:d};};
function f(c,a){return c.filter(function(i){return i.id===a;});}
return R;});
sap.ui.predefine('sap/ovp/ui/DashboardLayoutUtil',["sap/ovp/ui/DashboardLayoutRearrange","sap/ovp/ui/DashboardLayoutModel","sap/ovp/cards/CommonUtils","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/merge","sap/ovp/cards/ovpLogger","sap/ovp/cards/jUtils","sap/ovp/ui/cardPositionHelper"],function(R,D,C,a,q,m,o,u,c){"use strict";var l=new o("OVP.ui.DashboardLayoutUtil");var b=function(d){this.aCards=null;this.ROW_HEIGHT_PX=16;this.MIN_COL_WIDTH_PX=320;this.CARD_BORDER_PX=8;this.EXTRA_MARGIN=8;this.oLayoutData={layoutWidthPx:1680,contentWidthPx:1600,colCount:5,previousColCount:0,colWidthPx:this.MIN_COL_WIDTH_PX,rowHeightPx:this.ROW_HEIGHT_PX,marginPx:this.convertRemToPx(3)-this.CARD_BORDER_PX};this.dashboardLayoutModel=new D(d,this.oLayoutData.colCount,this.ROW_HEIGHT_PX,this.CARD_BORDER_PX);this.layoutDomId="";this.oLayoutCtrl={};this.componentDomId="";this.lastTriggeredColWidth=0.0;this.changedCards={};this.isRTLEnabled=sap.ui.getCore().getConfiguration().getRTL();switch(true){case a.browser.webkit:this.cssVendorTransition="-webkit-transition";this.cssVendorTransform="-webkit-transform";break;case a.browser.msie:this.cssVendorTransition="-ms-transition";this.cssVendorTransform="-ms-transform";break;case a.browser.mozilla:this.cssVendorTransition="-moz-transition";this.cssVendorTransform="-moz-transform";break;default:this.cssVendorTransition="transition";this.cssVendorTransform="transform";}};
b.prototype.setLayout=function(d){this.oLayoutCtrl=d;this.layoutDomId=d.getId();var M=this.layoutDomId.indexOf("---")+3;var s=this.layoutDomId.substring(0,M);var e=this.layoutDomId.substring(M);this.componentDomId=s+e.split("--")[0];};
b.prototype.getDashboardLayoutModel=function(){return this.dashboardLayoutModel;};
b.prototype.updateCardVisibility=function(d){this.dashboardLayoutModel.updateCardVisibility(d);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);this.dashboardLayoutModel._removeSpaceBeforeCard();this._setCardsCssValues(this.aCards);this._positionCards(this.aCards);};
b.prototype.updateLayoutData=function(d){var i=this.oLayoutData.marginPx,e=0,s=320,M=1024,f=this.CARD_BORDER_PX,g=this.EXTRA_MARGIN,n=d+i,h,j;this.oLayoutData.layoutWidthPx=d;if(n<=s){i=this.convertRemToPx(0.5)-f;e=a.system.desktop?16:0;}else if(n<=M){i=this.convertRemToPx(1)-f;e=a.system.desktop?8:0;}else{i=this.convertRemToPx(3)-f;}if(i!==this.oLayoutData.marginPx){this.oLayoutData.marginPx=i;q(".sapUshellEasyScanLayout").css({"margin-left":i+"px"});}this.oLayoutData.contentWidthPx=d-i-e;this.oLayoutData.previousColCount=this.oLayoutData.colCount;this.oLayoutData.colCount=Math.round(this.oLayoutData.contentWidthPx/this.MIN_COL_WIDTH_PX);if(this.oLayoutData.colCount===0){this.oLayoutData.colCount=1;}this.oLayoutData.colWidthPx=this.oLayoutData.contentWidthPx/this.oLayoutData.colCount;if(q(".sapOvpDashboardDragAndDrop").length>0&&q(".easyScanLayoutItemWrapper").length>0){h=q(".sapOvpDashboardDragAndDrop")[0].offsetLeft+g;if(q(".sapOvpDashboardDragAndDrop")[0].offsetLeft<40){j=h+8;}else{j=h;}}else{h=i+g;j=i+e+g;}q('.sapFDynamicPageTitle').css({"margin-left":h+"px","margin-right":j+"px","visibility":"visible"});q('.sapFDynamicPageHeader').css({"margin-left":h+"px","margin-right":j+"px"});return this.oLayoutData;};
b.prototype.getRearrange=function(s){var d={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"dashboardLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:500,isTouch:!a.system.desktop,debug:false,aCards:this.aCards,layoutUtil:this,rowHeight:this.oLayoutData.rowHeightPx,colWidth:this.oLayoutData.colWidthPx};return new R(m(d,s));};
b.prototype.resizeLayout=function(w){var B=this.oLayoutData.colCount;var t=false;if(this.oLayoutData.layoutWidthPx!==w&&w!==0){this.updateLayoutData(w);t=Math.abs(this.lastTriggeredColWidth-this.oLayoutData.colWidthPx)>this.convertRemToPx(0.5);this.aCards=this.dashboardLayoutModel.getCards(this.oLayoutData.colCount);for(var i=0;i<this.aCards.length;i++){var d=this.aCards[i];this.setCardCssValues(d);var e=document.getElementById(this.getCardDomId(d.id));if(e){e.style.width=d.dashboardLayout.width;e.style.height=d.dashboardLayout.height;if(B!==this.oLayoutData.colCount){e.style[this.cssVendorTransition]='all 0.25s ease';}else{e.style[this.cssVendorTransition]='';}e.style[this.cssVendorTransform]='translate3d('+d.dashboardLayout.left+' ,'+d.dashboardLayout.top+', 0px)';this.setKpiNumericContentWidth(e);}if(B!==this.oLayoutData.colCount&&t){this._triggerCardResize(d);}}this.dashboardLayoutModel._removeSpaceBeforeCard();this.oLayoutCtrl.fireAfterDragEnds();if(t){this.lastTriggeredColWidth=this.oLayoutData.colWidthPx;}this.setAriaPos();}};
b.prototype.getCards=function(i){if(this.aCards&&this.oLayoutData.previousColCount===i){return this.aCards;}this._setColCount(i);this.aCards=this.dashboardLayoutModel.getCards(i);this._setCardsCssValues(this.aCards);return this.aCards;};
b.prototype.resetToManifest=function(){this.aCards=[];this.dashboardLayoutModel.resetToManifest();};
b.prototype.getCardDomId=function(d){return this.layoutDomId+"--"+d;};
b.prototype.getCardId=function(s){var d=s.indexOf("---")+3;var M=s.substring(d);return M?M.split("--")[2]:'';};
b.prototype.getCardIdFromComponent=function(s){var d=s.indexOf("---")+3;var L=s.substring(d);return L?L.split("--")[1]:'';};
b.prototype.isCardAutoSpan=function(d){return this.dashboardLayoutModel.getCardById(d).dashboardLayout.autoSpan;};
b.prototype.setAutoCardSpanHeight=function(e,d,h){var r,f,g;if(!d&&e&&e.target.parentElement){var s=e.target.parentElement.parentElement.id;var i=s.indexOf("---")+3;var M=s.substring(i);d=M.split("--")[1];}var H=h;if(!H&&e){H=e.size.height;}if(this.isCardAutoSpan(d)){g=this.dashboardLayoutModel.getCardById(d);if(g.dashboardLayout.showOnlyHeader){r=Math.ceil((H+2*this.CARD_BORDER_PX)/this.getRowHeightPx());}else{r=Math.round((H+2*this.CARD_BORDER_PX)/this.getRowHeightPx());}f=this.dashboardLayoutModel.resizeCard(d,{rowSpan:r,colSpan:1},false);this._sizeCard(f.resizeCard);this._positionCards(f.affectedCards);this.setAriaPos();}};
b.prototype.calculateCardProperties=function(s){var g=this._getCardController(s);var d=this.dashboardLayoutModel.getCardById(s);var i=250,h,e,L,f,H;if(g){H=g.getItemHeight(g,'ovpCardHeader');h=H===0?d.dashboardLayout.headerHeight:H;e=g.getItemHeight(g,'toolbar');if(d.template==='sap.ovp.cards.list'||d.template==='sap.ovp.cards.v4.list'){H=g.getItemHeight(g,'ovpList',true);L=H===0?d.dashboardLayout.itemHeight:H;f=h+e+L;}else if(d.template==='sap.ovp.cards.table'||d.template==='sap.ovp.cards.v4.table'){L=d.dashboardLayout.itemHeight;f=h+e+2*L;}else if(d.template==='sap.ovp.cards.linklist'||d.template==='sap.ovp.cards.v4.linklist'){if(d.settings.listFlavor==='carousel'){f=h+u.getOuterHeight(document.querySelector('.sapOvpCarouselContentHeader'))+240+u.getOuterHeight(document.querySelector('.sapMCrslControlsBottom.sapMCrslControls'));}else{L=g.getItemHeight(g,'ovpLinkList',true);var j=g.getView().getModel('ovpCardProperties').getProperty('/densityStyle');if(j==='cozy'){f=h+e+L+8;}else{f=h+e+L+4;}}}else if(d.template==='sap.ovp.cards.charts.analytical'){var B=g.getView().byId('bubbleText')?43:0;f=h+e+i+B+50;}else{f=h+e;}return{headerHeight:h,dropDownHeight:e,itemHeight:L,minCardHeight:f,leastHeight:h};}};
b.prototype._sizeCard=function(d){if(!d){return;}var $=document.getElementById(this.getCardDomId(d.id));d.dashboardLayout.width=d.dashboardLayout.colSpan*this.oLayoutData.colWidthPx+"px";d.dashboardLayout.height=d.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx+"px";if($){$.style.height=d.dashboardLayout.height;$.style.width=d.dashboardLayout.width;this._triggerCardResize(d);}this.dashboardLayoutModel._removeSpaceBeforeCard();var i=(this.dashboardLayoutModel._findHighestOccupiedRow())+32;q(".sapUshellEasyScanLayoutInner").css({"height":i+"px"});q(".sapUshellEasyScanLayout").css({"height":i+"px"});};
b.prototype._triggerCardResize=function(d){var e=d.dashboardLayout,f=d.id,g=this._getCardComponentDomId(f),$=document.getElementById(g),G=this._getCardController(f),h,i,j;try{if((e.autoSpan||!e.visible)&&G){i=G.getCardItemsBinding();h=this.calculateCardProperties(f);if(i&&h){var n=i.getLength();var k=n?Math.min(n,d.dashboardLayout.noOfItems):d.dashboardLayout.noOfItems;var A=(n===0)?d.dashboardLayout.noOfItems:k;var p=e.rowSpan*this.ROW_HEIGHT_PX;var r=p-(h.headerHeight+2*this.CARD_BORDER_PX);if(d.template==='sap.ovp.cards.table'||d.template==='sap.ovp.cards.v4.table'){G.addColumnInTable($,e);}else if(d.template==='sap.ovp.cards.list'||d.template==='sap.ovp.cards.v4.list'){j=A*h.itemHeight+h.dropDownHeight;$.style.height=Math.min(j,r)+d.dashboardLayout.headerHeight+"px";}}return;}}catch(s){l.warning("Card auto span failed for card "+f+" and error is  "+s.toString());}e.iRowHeightPx=this.getRowHeightPx();e.iCardBorderPx=this.CARD_BORDER_PX;try{if(G){h=this.calculateCardProperties(f);G.resizeCard(e,h);}else{l.warning("OVP resize: no controller found for "+f);}}catch(t){l.warning("OVP resize: "+f+" catch "+t.toString());}};
b.prototype._positionCards=function(d){if(!d){return;}var p={},s=false;d.forEach(function(e){if(!e.dashboardLayout.visible){return;}p=this._mapGridToPositionPx(e.dashboardLayout);e.dashboardLayout.top=p.top;e.dashboardLayout.left=p.left;var f=document.getElementById(this.getCardDomId(e.id));if(f){f.classList.remove('sapOvpNotResizableLeftRight','sapOvpNotResizableRight','sapOvpNotResizableDown');f.style[this.cssVendorTransition]='all 0.15s ease';f.style[this.cssVendorTransform]='translate3d('+p.left+' ,'+p.top+', 0px)';s=e.dashboardLayout.column+e.dashboardLayout.colSpan===this.oLayoutData.colCount+1;if(s){if(e.dashboardLayout.colSpan===1){f.classList.add('sapOvpNotResizableLeftRight');}else{f.classList.add('sapOvpNotResizableRight');}}if(((e.template==="sap.ovp.cards.list"||e.template==="sap.ovp.cards.v4.list")&&e.dashboardLayout.colSpan===2)||((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&e.settings.listFlavor==='carousel'&&e.dashboardLayout.colSpan===3)){f.classList.add('sapOvpNotResizableRight');}if((e.template==="sap.ovp.cards.linklist"||e.template==="sap.ovp.cards.v4.linklist")&&e.settings.listFlavor==='carousel'&&e.dashboardLayout.rowSpan===45){f.classList.add('sapOvpNotResizableDown');}}}.bind(this));};
b.prototype.updateCardSize=function(s,g,d){var e=this.dashboardLayoutModel.getCardById(s);var f=this._getCardController(s);var $=document.getElementById(this.getCardDomId(s));$.style.height=g+'px';$.style.width=d+'px';$.style[this.cssVendorTransition]='none';$.style.zIndex=10;if((e.template==='sap.ovp.cards.linklist'||e.template==='sap.ovp.cards.v4.linklist')&&e.settings.listFlavor==='carousel'){f.getView().byId('pictureCarousel').$().css('height',g-(e.dashboardLayout.headerHeight+2*this.CARD_BORDER_PX)+'px');}};
b.prototype.resizeCard=function(d,s,e){this.changedCards=this.dashboardLayoutModel.resizeCard(this.getCardId(d),s,true,e);this._positionCards(this.changedCards.affectedCards);};
b.prototype._mapGridToPositionPx=function(g){var L=(g.column-1)*this.getColWidthPx();var p={top:(g.row-1)*this.getRowHeightPx()+"px",left:(this.isRTLEnabled?-L:L)+"px"};return p;};
b.prototype._getCardComponentDomId=function(d){return this.componentDomId+"--"+d;};
b.prototype._getCardController=function(d){var e=null;var f=sap.ui.getCore().byId(this._getCardComponentDomId(d));if(f){var g=f.getComponentInstance();if(g){e=g.getAggregation("rootControl").getController();}}return e;};
b.prototype._setCardsCssValues=function(d){var i=0;for(i=0;i<d.length;i++){this.setCardCssValues(d[i]);}};
b.prototype.setCardCssValues=function(d){var L=(d.dashboardLayout.column-1)*this.oLayoutData.colWidthPx;d.dashboardLayout.top=((d.dashboardLayout.row-1)*this.oLayoutData.rowHeightPx)+'px';d.dashboardLayout.width=(d.dashboardLayout.colSpan*this.oLayoutData.colWidthPx)+'px';d.dashboardLayout.height=(d.dashboardLayout.rowSpan*this.oLayoutData.rowHeightPx)+'px';d.dashboardLayout.left=(this.isRTLEnabled?-L:L)+'px';};
b.prototype.convertRemToPx=function(v){var d=v;if(typeof v==="string"||v instanceof String){d=v.length>0?parseInt(v.split("rem")[0],10):0;}return d*C.getPixelPerRem();};
b.prototype.convertPxToRem=function(v){var d=v;if(typeof v==="string"||v instanceof String){d=v.length>0?parseFloat(v.split("px")[0],10):0;}return d/C.getPixelPerRem();};
b.prototype.setKpiNumericContentWidth=function($){var O=$.getElementsByClassName("sapOvpKpiContent");if(!!O&&O.length>0){var d=O[0];var i=8;var p=16;d.style.width=(this.getColWidthPx()-(2*i+2*p))+"px";}};
b.prototype.getLayoutWidthPx=function(){return this.oLayoutData.colCount*this.oLayoutData.colWidthPx;};
b.prototype.getColWidthPx=function(){return this.oLayoutData.colWidthPx;};
b.prototype.getRowHeightPx=function(){return this.oLayoutData.rowHeightPx;};
b.prototype._setColCount=function(i){this.oLayoutData.colCount=i;};
b.prototype.setAriaPos=function(){var d=[];this.ariaPos={};this.aCards.forEach(function(e){if(e.dashboardLayout.visible===true){e.visited=false;if(d[e.dashboardLayout.column-1]){d[e.dashboardLayout.column-1].push(e);}else{d[e.dashboardLayout.column-1]=[e];}}});d.forEach(function(e){e.sort(function(f,g){if(f.dashboardLayout.row<g.dashboardLayout.row){return-1;}else if(f.dashboardLayout.row>g.dashboardLayout.row){return 1;}else{return 0;}});});c.setAriaPosition(d,this);};
return b;},true);
sap.ui.predefine('sap/ovp/ui/EasyScanLayout',["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/ui/UIActions","sap/ui/Device","sap/ui/core/Control","sap/ui/core/ResizeHandler","sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ui/events/F6Navigation","sap/ui/events/KeyCodes","sap/ovp/cards/jUtils"],function(q,C,U,D,a,R,O,b,F,K,u){"use strict";var c=function(s){this.init(s);};
c.prototype.init=function(s){s.beforeDragCallback=this._beforeDragHandler.bind(this);s.dragStartCallback=this._dragStartHandler.bind(this);s.dragMoveCallback=this._dragMoveHandler.bind(this);s.dragEndCallback=this._dragEndHandler.bind(this);s.endCallback=this._endHandler.bind(this);this.layout=s.layout;this.afterReplaceElements=s.afterReplaceElements||function(){};this.settings=s;delete s.afterReplaceElements;this.destroy();this.uiActions=new U(this.settings).enable();this.aCardsOrder=null;this.verticalMargin=null;this.horizontalMargin=null;this.columnCount=null;this.top=null;this.left=null;this.width=null;this.layoutOffset=null;this.jqLayout=null;this.jqLayoutInner=null;this.isRTLEnabled=null;this.lastCollidedEl=null;this.lastCollisionTop=null;this.SCROLL_OFFSET=16;};
c.prototype.findCollision=function(e,j,l){var n;for(var i=0;i<l.length;i++){var o=l[i];var p=!(o.posDnD.right<e||o.posDnD.left>e);var r=!(o.posDnD.bottom<j||o.posDnD.top>j);if(p&&r){n=o;break;}}return n;};
c.prototype.isCollisionTop=function(e,i,j){var l=((j.posDnD.bottom-j.posDnD.top)/2)+j.posDnD.top;var n=!(l<i||j.posDnD.top>i);return n;};
c.prototype._dragMoveHandler=function(e,i){var s=e.element;var j=e.moveX-this.layoutOffset.left;var l=e.moveY-this.jqLayout.get(0).getBoundingClientRect().top+this.jqLayout.scrollTop();if(!i){var v=document.getElementsByClassName("sapFDynamicPageContentWrapper")[0];var n=v.offsetHeight;var o=v.getBoundingClientRect();if((e.evt.clientY-v.offsetTop+this.SCROLL_OFFSET)>n){v.scrollTop=v.scrollTop+this.SCROLL_OFFSET;}else if(((e.evt.clientY-v.offsetTop)<o.top+this.SCROLL_OFFSET)&&v.scrollTop!==0){v.scrollTop=v.scrollTop-this.SCROLL_OFFSET;}}var p=this.findCollision(j,l,this.aCardsOrder);if(!p){return;}var r=this.isCollisionTop(j,l,p);if(p===s){this.lastCollidedEl=p;return;}if(p===this.lastCollidedEl){if(this.lastCollisionTop===r){return;}if(this.lastCollisionTop){this.lastCollisionTop=r;if(s.posDnD.top>p.posDnD.top){return;}}else{this.lastCollisionTop=r;if(s.posDnD.top<p.posDnD.top){return;}}}if(this.lastCollidedEl&&(this.lastCollidedEl!==p&&this.lastCollidedEl!==s)&&(this.lastCollidedEl.posDnD.left===p.posDnD.left&&this.lastCollidedEl.posDnD.left===s.posDnD.left)){p=this.lastCollidedEl;}this.dragAndDropElement(s,p);this.lastCollidedEl=this.findCollision(j,l,this.aCardsOrder);if(this.lastCollidedEl){this.lastCollisionTop=this.isCollisionTop(j,l,this.lastCollidedEl);}};
c.prototype.dragAndDropElement=function(s,t){if(s&&t){this.aCardsOrder=this.dragAndDropSwapElement(s,t,this.aCardsOrder);this.drawLayout(this.aCardsOrder);}};
c.prototype.dragAndDropSwapElement=function(s,t,i){var n=i.slice();var e=i.indexOf(s);var j=i.indexOf(t);n[j]=s;n[e]=t;if(!!this.positionChanges&&t&&t.children){var T=t.children[0].getAttribute("id");this.positionChanges.push({changeType:"position",content:{cardId:T.substring(T.indexOf("mainView--")+10,T.length),position:e,oldPosition:j},isUserDependent:true});}return n;};
c.prototype.dragAndDropSwapElementForKeyboardNavigation=function(s,t){if(s&&t){var l=this.layout.getVisibleLayoutItems().map(function(j){return j.$().parent()[0];});var e=0;for(var i=0;i<l.length;i++){if(l[i]===s){l[i]=t;e++;continue;}if(l[i]===t){l[i]=s;e++;continue;}}if(e===2){this.afterReplaceElements(l);}}};
c.prototype.initCardsSettingsForDragAndDrop=function(){this.jqLayout=this.layout.$();this.jqLayoutInner=this.jqLayout.children().first();var l=this.jqLayout.scrollTop();var e=this.jqLayoutInner.height();this.isRTLEnabled=sap.ui.getCore().getConfiguration().getRTL()?1:-1;this.aCardsOrder=[];this.layoutOffset=this.jqLayout.offset();if(D.system.tablet===true&&D.system.desktop===false){this.jqLayout.css('height',this.jqLayoutInner.height());}var v=this.layout.getVisibleLayoutItems();if(!v){return;}this.aCardsOrder=v.map(function(o){var p=o.$().parent()[0];p.posDnD={width:p.offsetWidth,height:p.offsetHeight};p.style.width=p.offsetWidth+"px";return p;});var j=this.jqLayoutInner.children().first();var i=(this.isRTLEnabled===1)?"margin-left":"margin-right";this.verticalMargin=parseInt(j.css(i),10);var n=this.aCardsOrder[0];this.horizontalMargin=parseInt(getComputedStyle(n)["margin-bottom"],10);this.columnCount=this.layout.getColumnCount();this.top=n.getBoundingClientRect().top-this.jqLayoutInner[0].getBoundingClientRect().top;this.left=n.getBoundingClientRect().left-this.jqLayoutInner[0].getBoundingClientRect().left;this.width=n.offsetWidth;u.addStyleToAllElements(this.aCardsOrder,"position","absolute");this.drawLayout(this.aCardsOrder);this.jqLayoutInner.height(e);this.jqLayout.scrollTop(l);};
c.prototype.drawLayout=function(e){var o=[];for(var i=0;i<this.columnCount;i++){o[i]=0;}for(var n=0;n<e.length;n++){var l=n%this.columnCount;var p=o[l]++;var r=this.left-this.isRTLEnabled*(l*this.verticalMargin+l*this.width);var s=this.top;var t=e[n];for(var j=0;j<p;j++){s+=this.horizontalMargin;var v=n-(j+1)*this.columnCount;s+=e[v].posDnD.height;}t.posDnD.top=s;t.posDnD.bottom=s+t.posDnD.height;t.posDnD.left=r;t.posDnD.right=r+t.posDnD.width;this.updateElementCSS(e[n]);}};
c.prototype.updateElementCSS=function(e){u.addStyleToAllElements(e,"top",e.posDnD.top);u.addStyleToAllElements(e,"left",e.posDnD.left);};
c.prototype._dragStartHandler=function(e,i){this.positionChanges=[];if(D.system.desktop){u.addClassToAllElements(document.querySelectorAll('body'),"sapOVPDisableUserSelect");u.addClassToAllElements(document.querySelectorAll('body'),"sapOVPDisableImageDrag");}if(window.getSelection){var s=window.getSelection();s.removeAllRanges();}this.initCardsSettingsForDragAndDrop();};
c.prototype._beforeDragHandler=function(e,i){if(D.browser.mobile){this.selectableElemets=q(i).find('.sapUiSelectable');this.selectableElemets.removeClass('sapUiSelectable');}q(this.settings.wrapper).addClass("dragAndDropMode");};
c.prototype._dragEndHandler=function(e,i){this.lastCollidedEl=null;if(e.type=='mouseup'||e.type=='touchend'){if(this.aCardsOrder){this.afterReplaceElements(this.aCardsOrder);}}if(D.system.desktop){u.addClassToAllElements(document.querySelectorAll('body'),"sapOVPDisableUserSelect");u.addClassToAllElements(document.querySelectorAll('body'),"sapOVPDisableImageDrag");}q(this.settings.wrapper).removeClass("dragAndDropMode");if(this.jqLayoutInner){this.jqLayoutInner.removeAttr("style");}if(this.aCardsOrder){q(this.aCardsOrder).removeAttr("style");}this.uiActions.removeClone();};
c.prototype._endHandler=function(e,i){if(D.browser.mobile&&this.selectableElemets){this.selectableElemets.addClass('sapUiSelectable');}};
c.prototype.getSwapItemsFunction=function(){return this.dragAndDropSwapElementForKeyboardNavigation.bind(this);};
c.prototype.destroy=function(){if(this.uiActions){this.uiActions.disable();this.uiActions=null;}};
var d={buildReplaceItemsInstance:function(s){var e={containerSelector:".sapUshellEasyScanLayoutInner",wrapper:".sapUshellEasyScanLayout",draggableSelector:".easyScanLayoutItemWrapper",placeHolderClass:"easyScanLayoutItemWrapper-placeHolder",cloneClass:"easyScanLayoutItemWrapperClone",moveTolerance:10,switchModeDelay:800,isTouch:!D.system.desktop,debug:false};s=Object.assign({},e,s);return new c(s);}};var f=function(e,s){this.init(e,s);};
f.prototype.init=function(e,s){this.easyScanLayout=e;this.swapItemsFunction=(typeof s==="function")?s:function(){};this.keyCodes=K;this.jqElement=e.$();this.jqElement.on('keydown',this.keydownHandler.bind(this));this.jqElement.on('keyup',this.keyupHandler.bind(this));document.querySelector('body').addEventListener('keyup',this.bodyKeyupHandler.bind(this));document.querySelector('body').addEventListener('keydown',this.bodyKeydownHandler.bind(this));this.jqElement.find(".after").on("focus.keyboardNavigation",this.afterFocusHandler.bind(this));this.jqElement.find(".sapUshellEasyScanLayoutInner").on("focus.keyboardNavigation",this.layoutFocusHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".easyScanLayoutItemWrapper",this.layoutItemFocusHandler.bind(this));this._ignoreSelfFocus=false;this.swapSourceElement=null;this.lastFocussedElement=null;this.lastFocussedClassId=null;this.jqElement.on('keyup',this.ctrlArrowUpDownHandler.bind(this));};
f.prototype.ctrlArrowUpDownHandler=function(e){switch(e.keyCode){case this.keyCodes.PAGE_UP:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true);}break;case this.keyCodes.PAGE_DOWN:if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false);}break;default:break;}};
f.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");this.jqElement.find(".after").off(".keyboardNavigation");this.jqElement.find(".sapUshellEasyScanLayoutInner").off(".keyboardNavigation");}delete this.jqElement;delete this.easyScanLayout;};
f.prototype.getVisibleLayoutItems=function(){var e=this.easyScanLayout.getContent();var i=e.filter(function(j){return j.getVisible();});return i;};
f.prototype.afterFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return;}var j=this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first();var l=j.find(":sapTabbable").last();if(!l.length){l=j;}l.focus();};
f.prototype.layoutFocusHandler=function(){if(this._ignoreSelfFocus){this._ignoreSelfFocus=false;return;}this.jqElement.find(".easyScanLayoutItemWrapper:sapTabbable").first().focus();};
f.prototype.layoutItemFocusHandler=function(){var j=q(document.activeElement);if(j){var i,s="";if(j.find('.valueStateText').length==1){var t=j.find('.valueStateText').find('.sapMObjectNumberText').text();var v=j.find('.valueStateText').find('.sapUiInvisibleText').text();j.find('.valueStateText').attr('aria-label',t+" "+v);j.find('.valueStateText').attr('aria-labelledby',"");}j.find("[role='listitem']").attr('aria-label',"");if(j.hasClass('easyScanLayoutItemWrapper')){var e="";var l=j.find('.cardCount');var n=O.getText("Card");if(l.length===0){e="countDiv_"+new Date().getTime();var o='<div id="'+e+'" class="cardCount" aria-label="'+n+'" hidden></div>';j.append(o);}else{e=l[0].id;l.attr('aria-label',n);}s+=e+" ";var p=j.find('.cardType');if(p.length!==0){s+=p[0].id+" ";}}if(j.hasClass('sapOvpCardHeader')&&!j.hasClass('sapOvpStackCardContent')){var r="";var w=j.find('.cardHeaderType');if(w.length===0){var x=O.getText("CardHeaderType");r="cardHeaderType_"+new Date().getTime();var y='<div id="'+r+'" class="cardHeaderType" aria-label="'+x+'" hidden></div>';j.append(y);}else{r=w[0].id;}s+=r+" ";}var z,A;if(j.hasClass('easyScanLayoutItemWrapper')){A=j.find('.sapOvpCardHeader');z=A.find("[aria-label]");}else{z=j.find("[aria-label]");}var B=(j.find('.sapOvpStackCardHeader').length!==1);if(B){for(i=0;i<z.length;i++){s+=z[i].id+" ";}}if(j.hasClass('sapOvpCardHeader')){var G=j.find('.cardHeaderText');if(G.length!==0){for(var i=0;i<G.length;i++){if(s.indexOf(G[i].id)===-1){s+=G[i].id+" ";}}}}if(s.length){j.attr("aria-labelledby",s);}if(j.prop('nodeName')==="LI"&&j.find('.linkListHasPopover').length!==0){if(j.find('#hasDetails').length===0){j.append("<div id='hasDetails' hidden>"+O.getText("HAS_DETAILS")+"</div>");j.attr('aria-describedby',"hasDetails");}}var H=j.attr("id");if((H&&H.indexOf("ovpTable")!=-1)&&j.find("[role='Link']")&&!j.hasClass('sapUiCompSmartLink')){var I=j.closest("td").attr("data-sap-ui-column"),J=j.closest("tbody").siblings().children().filter("tr").children();for(var i=0;i<J.length;i++){if(J[i].getAttribute("data-sap-ui")==I&&J[i].hasChildNodes("span")){var L=J[i].firstElementChild.getAttribute("id");j.attr("aria-labelledby",L);}}}}};
f.prototype._getLayoutItemIndex=function(j){if(!j.hasClass("easyScanLayoutItemWrapper")){return false;}var e=j.children().attr("id");var i=false;this.getVisibleLayoutItems().forEach(function(l,n){if(e==l.getId()){i=n;}});return i;};
f.prototype._changeItemsFocus=function(j){var e=document.querySelectorAll('.easyScanLayoutItemWrapper');u.addAttributeToAllElements(e,"tabindex","-1");j.attr("tabindex",0);setTimeout(function(){j.focus();},500);};
f.prototype._swapItemsFocus=function(e,j,i){e.preventDefault();j.attr("tabindex","-1");setTimeout(function(){i.attr("tabindex","0").focus();},0);};
f.prototype.tabButtonHandler=function(e){var j=q(document.activeElement);this.lastFocussedElement=j;if(j.hasClass("easyScanLayoutItemWrapper")){return;}var i=j.closest(".easyScanLayoutItemWrapper");if(!i.length){return;}var l=i.find(q(".lastElement"));if(j.is(l)){e.stopPropagation();e.stopImmediatePropagation();var n=this.jqElement.scrollTop();this._ignoreSelfFocus=true;this.jqElement.find(".after").focus();this.jqElement.scrollTop(n);}};
f.prototype.f7Handler=function(e){var j=q(document.activeElement);if(j.hasClass("easyScanLayoutItemWrapper")){j.find(":sapTabbable").first().focus();}else{j.closest(".easyScanLayoutItemWrapper").focus();}e.preventDefault();};
f.prototype.shiftTabButtonHandler=function(e){var j=q(document.activeElement);if(j.hasClass('after')){this.lastFocussedElement.focus();return;}if(!j.hasClass("easyScanLayoutItemWrapper")){return;}this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();};
f.prototype.arrowUpDownHandler=function(e,i){e.preventDefault();var n=i?"prev":"next";var j=q(document.activeElement);if(!j.hasClass("sapOvpCardHeader")){var l=q(j)[n](".easyScanLayoutItemWrapper");if(!l.is(j)){this._swapItemsFocus(e,j,l);}}};
f.prototype.arrowRightLeftHandler=function(e,i){var j=i?1:-1;var l=q(document.activeElement);var n=this._getLayoutItemIndex(l);if(n===false){return;}var I=this.getVisibleLayoutItems()[n+j];if(I){this._swapItemsFocus(e,l,I.$().parent());}};
f.prototype.altPageUpAndHomeHandler=function(e){var j=q(document.activeElement);var i=this._getLayoutItemIndex(j);if(i===false){return;}var l=this.easyScanLayout.getColumnCount();var n=i%l;var o;var p=this.getVisibleLayoutItems();if(n==0){o=p[0];}else{o=p[i-n];}this._swapItemsFocus(e,j,o.$().parent());};
f.prototype.altPageDownAndEndHandler=function(e){var j=q(document.activeElement);var i=this._getLayoutItemIndex(j);if(i===false){return;}var l=this.easyScanLayout.getColumnCount();var n=i%l;var o;var p=this.getVisibleLayoutItems();if((n==(l-1))||((i+(l-n))>p.length)){o=p[(p.length-1)];}else{o=p[i+(l-n-1)];}this._swapItemsFocus(e,j,o.$().parent());};
f.prototype.ctrlHomeHandler=function(e){var j=q(document.activeElement);var i=this._getLayoutItemIndex(j);if(i===false){return;}var l=this.easyScanLayout.getColumnCount();var n=i%l;var v=this.getVisibleLayoutItems();var o=v[n];var p=o.$().parent();if(p.is(j)){p=v[0].$().parent();}this._swapItemsFocus(e,j,p);};
f.prototype.ctrlEndHandler=function(e){var j=q(document.activeElement);var l=this._getLayoutItemIndex(j);if(l<0){return;}var n=this.easyScanLayout.getColumnCount();var o=l%n;var p;var v=this.getVisibleLayoutItems();for(var i=v.length-1;i>=0;i--){if((i%n)==o){p=v[i];break;}}var r=p.$().parent();if(r.is(j)){r=v[v.length-1].$().parent();}this._swapItemsFocus(e,j,r);};
f.prototype.pageUpDownHandler=function(e,i){var n=i?"prev":"next";var j=q(document.activeElement);if(!j.hasClass("easyScanLayoutItemWrapper")){return;}if(!j[n]().length){return;}var l=false;var o=j;var w=q(window).height();while(!l){var p=o[n]();if(!p.length){l=o;break;}if(!i&&p.offset().top>w){l=p;break;}var r=p.offset().top;var s=0;if(r){s=r<0?-1:1;}if(i&&(s<=0)){l=p;break;}o=p;}this._swapItemsFocus(e,j,l);};
f.prototype.ctrlArrowHandler=function(e){if(this.swapSourceElement==null){this.swapSourceElement=q(document.activeElement);if(!this.swapSourceElement.hasClass("easyScanLayoutItemWrapper")){this.endSwap();}else{this.jqElement.on('keyup.keyboardNavigation',this.keyupHandler.bind(this));this.jqElement.addClass('dragAndDropMode');this.swapSourceElement.addClass('dragHovered');}}};
f.prototype.keyupHandler=function(e){if(this.swapSourceElement!=null&&e.keyCode===this.keyCodes.CONTROL){var j=q(document.activeElement);if(j.hasClass("easyScanLayoutItemWrapper")){this.swapItemsFunction(this.swapSourceElement[0],j[0]);this._changeItemsFocus(this.swapSourceElement);}this.endSwap();}else if(e.keyCode===this.keyCodes.SPACE){this.spacebarHandler(e);}};
f.prototype.endSwap=function(e){this.swapSourceElement.removeClass('dragHovered');this.jqElement.removeClass('dragAndDropMode');this.swapSourceElement=null;this.jqElement.off('keyup.keyboardNavigation');};
f.prototype.checkIfSwapInterrupted=function(e){if(this.swapSourceElement!=null&&e.keyCode!=this.keyCodes.ARROW_LEFT&&e.keyCode!=this.keyCodes.ARROW_RIGHT&&e.keyCode!=this.keyCodes.ARROW_UP&&e.keyCode!=this.keyCodes.ARROW_DOWN){this.endSwap();}};
f.prototype.spacebarHandler=function(e){b.bCRTLPressed=e.ctrlKey||e.metaKey;var i=sap.ui.getCore().byId(e.target.id);if(i&&i.mEventRegistry.hasOwnProperty('press')){var t='#'+e.target.id;u.addClassToAllElements(document.querySelectorAll(t),'sapMLIBActive');i.firePress();}};
f.prototype.bodyKeyupHandler=function(e){if(e.ctrlKey||e.metaKey){b.bCRTLPressed=false;}};
f.prototype.bodyKeydownHandler=function(e){if(e.ctrlKey||e.metaKey){b.bCRTLPressed=true;}};
f.prototype.keydownHandler=function(e){this.checkIfSwapInterrupted(e);switch(e.keyCode){case this.keyCodes.TAB:(e.shiftKey)?this.shiftTabButtonHandler(e):this.tabButtonHandler(e);break;case this.keyCodes.F6:if(e.shiftKey){this._ignoreSelfFocus=true;this.jqElement.find(".sapUshellEasyScanLayoutInner").focus();F.handleF6GroupNavigation(e);}else{this._ignoreSelfFocus=true;var i=this.jqElement.scrollTop();this.jqElement.find(".after").focus();F.handleF6GroupNavigation(e);this.jqElement.scrollTop(i);}break;case this.keyCodes.F7:this.f7Handler(e);break;case this.keyCodes.ARROW_UP:if(e.ctrlKey==true){this.ctrlArrowHandler(e);}this.arrowUpDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:if(e.ctrlKey==true){this.ctrlArrowHandler(e);}this.arrowUpDownHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:if(e.ctrlKey==true){this.ctrlArrowHandler(e);}this.arrowRightLeftHandler(e,true);break;case this.keyCodes.ARROW_LEFT:if(e.ctrlKey==true){this.ctrlArrowHandler(e);}this.arrowRightLeftHandler(e,false);break;case this.keyCodes.HOME:(e.ctrlKey==true)?this.ctrlHomeHandler(e):this.altPageUpAndHomeHandler(e);break;case this.keyCodes.END:(e.ctrlKey==true)?this.ctrlEndHandler(e):this.altPageDownAndEndHandler(e);break;case this.keyCodes.PAGE_UP:(e.altKey==true)?this.altPageUpAndHomeHandler(e):this.pageUpDownHandler(e,true);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,true);}break;case this.keyCodes.PAGE_DOWN:(e.altKey==true)?this.altPageDownAndEndHandler(e):this.pageUpDownHandler(e,false);if(e.ctrlKey){this.ctrlArrowHandler(e);this.pageUpDownHandler(e,false);}break;case this.keyCodes.ENTER:this.spacebarHandler(e);break;default:break;}};
var E=a.extend("sap.ovp.ui.EasyScanLayout",{
metadata:{designTime:true,library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},defaultAggregation:"content",events:{afterRendering:{},afterDragEnds:{},afterColumnUpdate:{}},properties:{useMediaQueries:{group:"Misc",type:"boolean",defaultValue:false},dragAndDropRootSelector:{group:"Misc",type:"string"},dragAndDropEnabled:{group:"Misc",type:"boolean",defaultValue:true},debounceTime:{group:"Misc",type:"int",defaultValue:150}}},
renderer:{render:function(r,o){r.write("<div");r.writeControlData(o);r.addClass("sapUshellEasyScanLayout");r.writeClasses();r.write(">");r.write("<div class='sapUshellEasyScanLayoutInner' role='list' tabindex='0' aria-label='Cards'>");var e=o.columnCount;var j=Array.apply(null,new Array(e)).map(function(){return[];});var l=o.getContent().filter(function(p){return p.getVisible();});for(var i=0;i<l.length;i++){j[i%e].push(l[i]);}var n=1;j.forEach(function(p){r.write("<div");r.addClass("easyScanLayoutColumn");r.writeClasses();r.write(">");p.forEach(function(s,t){r.write("<div ");(n===1)?r.write("tabindex='0' "):r.write("tabindex='-1' ");r.addClass("easyScanLayoutItemWrapper");r.writeAccessibilityState(undefined,{role:"listitem"});r.write("aria-setsize="+l.length+" aria-posinset="+n);n++;r.writeClasses();r.write(">");r.renderControl(s);r.write("<div class='lastElement' tabindex='0'></div>");r.write("</div>");});r.write("</div>");});r.write("</div>");r.write("<div class='after' tabindex='0'></div>");r.write("</div>");}}
});
var g=function(){return[{minWidth:0,styleClass:"columns-blank",columnCount:1},{minWidth:240,styleClass:"columns-block",columnCount:1},{minWidth:352,styleClass:"columns-narrow",columnCount:1},{minWidth:433,styleClass:"columns-wide",columnCount:1},{minWidth:704,styleClass:"columns-narrow",columnCount:2},{minWidth:864,styleClass:"columns-wide",columnCount:2},{minWidth:1024,styleClass:"columns-narrow",columnCount:3},{minWidth:1280,styleClass:"columns-wide",columnCount:3},{minWidth:1440,styleClass:"columns-narrow",columnCount:4},{minWidth:1800,styleClass:"columns-wide",columnCount:4},{minWidth:2560,styleClass:"columns-narrow",columnCount:5},{minWidth:3008,styleClass:"columns-wide",columnCount:5},{minWidth:3600,styleClass:"columns-narrow",columnCount:4},{minWidth:3840,styleClass:"columns-wide",columnCount:4},{minWidth:5120,styleClass:"columns-wide",columnCount:5},{minWidth:6016,styleClass:"columns-wide",columnCount:5}];};
E.prototype.init=function(){this.data("sap-ui-fastnavgroup","true",true);this.columnResolutionList=g();this.columnCount=this.columnResolutionList[0].columnCount;this.columnStyle="";this.updateColumnClass(this.columnResolutionList[0].styleClass);var e=D.browser.msie&&D.browser.version>9;if(e&&this.getUseMediaQueries()){this.mediaQueryList=this.initMediaListeners(this.columnResolutionList);}else{this.resizeHandlerId=this.initResizeHandler(this.columnResolutionList);}};
var m;var h=function(e,i,j){var l=function(n,o){this.updateColumnClass(o);this.refreshColumnCount(n,this.getContent());};if(j.matches){window.clearTimeout(m);m=window.setTimeout(l.bind(this,e,i),this.getDebounceTime());}};var k=function(e,t){var i=e.minWidth;var j=t&&t.minWidth;return"(min-width: "+i+"px)"+(j?" and (max-width: "+(j-1)+"px)":"");};
E.prototype.initMediaListeners=function(e){var j=[];for(var i=0;i<e.length;i++){var l=k(e[i],e[i+1]);var n=window.matchMedia(l);var o=h.bind(this,e[i].columnCount,e[i].styleClass);n.addListener(o);n.bindedListener=o;o(n);j.push(n);}return j;};
E.prototype.initResizeHandler=function(e){var r;var i=this.getDebounceTime();var j=function(){window.clearTimeout(r);r=window.setTimeout(this.oControl.resizeHandler.bind(this,e),i);};return R.register(this,j);};
E.prototype.resizeHandler=function(e){var w=this.iWidth;var t=this;var o=this.oControl;var r;if(document.querySelectorAll(".sapFDynamicPageContent").length>0){w=window.innerWidth;}for(var i=0;i<e.length;i++){if(!e[i+1]){r=e[i];break;}if(e[i].minWidth<=w&&e[i+1].minWidth>w){r=e[i];break;}}o.refreshColumnCount(r.columnCount,o.getContent(),t);o.updateColumnClass(r.styleClass);o.fireAfterColumnUpdate(r);};
E.prototype.getColumnWidth=function(s){var e;switch(s){case"columns-blank":e=0;break;case"columns-narrow":e=20;break;case"columns-wide":e=25;break;default:break;}return e;};
E.prototype.refreshColumnCount=function(e,l,t){this.columnCount=e;var n=q();for(var i=0;i<e;i++){n=n.add("<div class='easyScanLayoutColumn'></div>");}var o=l.filter(function(r){return r.getVisible();});var p=1;for(var j=0;j<o.length;j++){q(o[j].getDomRef()).parent().attr('aria-posinset',p);p++;n.get(j%e).appendChild(o[j].getDomRef().parentNode);}this.$().children(".sapUshellEasyScanLayoutInner").empty().append(n);if(t&&t.iWidth){this.headerMargin(t);}};
E.prototype.headerMargin=function(t){var e=0,j=0;var w=t.iWidth;var r,l,n,s=0,o,v=0;var p=g();var x=C.getPixelPerRem();var y=(parseInt(window.getComputedStyle(document.querySelector('.sapFDynamicPageTitleWrapper'),null).getPropertyValue("width").split("px")[0],10)*1.0)/x;if(document.querySelectorAll(".sapFDynamicPageContent").length>0){w=window.innerWidth;}for(var i=0;i<p.length;i++){if(!p[i+1]){r=p[i];break;}if(p[i].minWidth<=w&&p[i+1].minWidth>w){r=p[i];break;}}o=this.getColumnWidth(r.styleClass);n=(r.columnCount*o+(r.columnCount-1)*1);l=(y-n)/2;q('.sapFDynamicPageTitle').css({"margin-left":l+"rem","margin-right":l+"rem","visibility":"visible"});q('.sapFDynamicPageHeader').css({"margin-left":l+"rem","margin-right":l+"rem"});if(D.system.desktop){y=document.body.clientWidth;if(document.querySelectorAll(".sapFDynamicPageContentFitContainer").length>0){e=document.querySelectorAll(".sapFDynamicPageContentFitContainer")[0].clientWidth;}if(y===e){var z=document.querySelector('.sapFDynamicPageTitle')||undefined;var A=z&&getComputedStyle(z)['margin-left'];var B=z&&getComputedStyle(z)['margin-right'];if(typeof A==="string"||A instanceof String){A=A.length>0?parseInt(A.split("px")[0],10):0;}if(typeof B==="string"||B instanceof String){B=B.length>0?parseInt(B.split("px")[0],10):0;}s=q('.sapFDynamicPageScrollBar').css('width');if(typeof s==="string"||s instanceof String){v=s.length>0?parseInt(s.split("px")[0],10):0;}s=v;j=s/2;A=(A+j)/(x*1.0);B=(B+j)/(x*1.0);q('.sapFDynamicPageTitle').css({"margin-left":A+"rem","margin-right":B+"rem","visibility":"visible"});q('.sapFDynamicPageHeader').css({"margin-left":A+"rem","margin-right":B+"rem"});}}};
E.prototype.getColumnCount=function(){return this.columnCount;};
E.prototype.getVisibleLayoutItems=function(){var e=this.getContent();var i=e.filter(function(j){return j.getVisible();});return i;};
E.prototype.updateColumnClass=function(e){if(this.columnStyle===e){return;}this.removeStyleClass(this.columnStyle);this.addStyleClass(e);this.columnStyle=e;};
E.prototype.afterDragAndDropHandler=function(e){var A=this.removeAllAggregation("content",true);var v=[];var V=0;e.forEach(function(j,l){var n=j.children[0].getAttribute("id");var o=sap.ui.getCore().byId(n);v.push(o);q(j).attr('aria-posinset',l+1);});for(var i=0;i<A.length;i++){if(A[i].getVisible()){this.addAggregation("content",v[V],true);V++;}else{this.addAggregation("content",A[i],true);}}this.fireAfterDragEnds({positionChanges:this.layoutDragAndDrop.positionChanges});this.refreshColumnCount(this.getColumnCount(),this.getContent());};
E.prototype.setActive=function(s){if(s){this.removeStyleClass("ovpOverlay");}else{this.addStyleClass("ovpOverlay");}};
E.prototype.getActive=function(){return!this.hasStyleClass("ovpOverlay");};
E.prototype.onAfterRendering=function(){if(!this.getDragAndDropRootSelector()){this.setDragAndDropRootSelector("#"+this.getId());}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();}if(this.getDragAndDropEnabled()){this.layoutDragAndDrop=d.buildReplaceItemsInstance({afterReplaceElements:this.afterDragAndDropHandler.bind(this),rootSelector:this.getDragAndDropRootSelector(),layout:this});}if(this.keyboardNavigation){this.keyboardNavigation.destroy();}var s=this.layoutDragAndDrop?this.layoutDragAndDrop.getSwapItemsFunction():null;this.keyboardNavigation=new f(this,s);this.fireAfterRendering();};
E.prototype.exit=function(){if(this.mediaQueryList){this.mediaQueryList.forEach(function(e){e.removeListener(e.bindedListener);});delete this.mediaQueryList;}if(this.resizeHandlerId){R.deregister(this.resizeHandlerId);}if(this.layoutDragAndDrop){this.layoutDragAndDrop.destroy();delete this.layoutDragAndDrop;}};
return E;});
sap.ui.predefine('sap/ovp/ui/OVPControllerExtensionTemplate',["sap/ui/core/mvc/Controller","sap/ui/core/mvc/ControllerExtension","sap/m/MessageToast","sap/ui/util/openWindow"],function(C,a,M,o){"use strict";return a.extend("{{controllerExtensionName}}",{});});
sap.ui.predefine('sap/ovp/ui/ObjectStreamRenderer',["sap/ui/core/Icon"],function(I){"use strict";var O={};
O.render=function(r,c){if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);r.writeAccessibilityState(undefined,{role:"dialog"});r.writeAccessibilityState(c,{label:c.getTitle()});r.addClass("sapOvpObjectStream");r.writeClasses();r.write(">");r.write("<div");r.writeClasses();r.write(">");var t=c.getTitle();if(t){r.renderControl(t);}r.write("</div>");r.write('<div tabindex="0" ');r.addClass("sapOvpObjectStreamClose");r.writeAccessibilityState(undefined,{role:"button"});r.writeAccessibilityState(c,{label:"close"});r.writeClasses();r.write(">");r.renderControl(c._closeIcon);r.write("</div>");r.write('<div id="'+c.getId()+'-cont" class="sapOvpObjectStreamCont"');r.write(">");r.write('<div id="'+c.getId()+'-scroll"');r.writeAccessibilityState(undefined,{role:"list"});r.addClass("sapOvpObjectStreamScroll");r.writeClasses();r.write(">");var C=c.getContent();var p=c.getPlaceHolder();C.forEach(function(a,i){r.write("<div class='sapOvpObjectStreamItem' ");if(i==0){r.write("tabindex='0' ");}else{r.write("tabindex='-1' ");}r.writeAccessibilityState(undefined,{role:"listitem"});r.write("aria-label = ' '");if(p){r.write("aria-setsize = "+(C.length+1)+" aria-posinset = "+(i+1));}else{r.write("aria-setsize = "+(C.length)+" aria-posinset = "+(i+1));}r.write(">");r.renderControl(a);r.write("</div>");});if(p){r.write("<div class='sapOvpObjectStreamItem' ");if(!C.length){r.write("tabindex='0'");}else{r.write("tabindex='-1'");}r.writeAccessibilityState(undefined,{role:"listitem"});r.write("aria-setsize = "+(C.length+1)+" aria-posinset = "+(C.length+1));r.write(">");r.renderControl(p);r.write("</div>");}r.write("</div>");r.write('<div id="'+c.getId()+'-leftedge" class="sapOvpOSEdgeLeft">');r.renderControl(new I({src:"sap-icon://slim-arrow-left",useIconTooltip:false}));r.write('</div>');r.write('<div id="'+c.getId()+'-rightedge" class="sapOvpOSEdgeRight">');r.renderControl(new I({src:"sap-icon://slim-arrow-right",useIconTooltip:false}));r.write('</div>');r.write("</div>");r.write("</div>");};
O.renderFooterContent=function(r,c){};
return O;},true);
sap.ui.predefine('sap/ovp/ui/SmartphoneHeaderToggle',[],function(){"use strict";return{threshold:10,headerVisible:true,startY:undefined,app:undefined,jqView:undefined,startHandler:function(e){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return;}this.startY=e.touches[0].pageY;},resizeHandler:function(){if(!this.headerVisible){this.animateHeader.call(this,this.headerVisible);}},animateHeader:function(s){var j=this.jqView.find('.ovpApplication > .sapUiFixFlexFixed > .sapMVBox');var a=this.jqView.find('.ovpApplication > .sapUiFixFlexFlexible');var b=a.children();var t;if(s){t="translateY(0px)";j.add(a).css({"transform":t,"-webkit-transform":t});a.one('transitionend',function(e){if(this.headerVisible){b.css({bottom:"0px"});}}.bind(this));}else{var h=this.getView().byId('ovpMain').getHeader();if(h){var c=h.$().height();b.css({bottom:"-"+c+"px"});t="translateY(-"+c+"px)";a.add(j).css({"transform":t,"-webkit-transform":t});}}},moveHandler:function(e){var m=e.touches[0].pageY;if(typeof this.startY==="undefined"){if(this.app.getGlobalFilter()&&this.app.getGlobalFilter().hasOwnProperty("getVisible")&&this.app.getGlobalFilter().getVisible()){return;}this.startY=m;}if(Math.abs(this.startY-m)<this.threshold){return;}if(this.startY>m&&this.headerVisible){this.headerVisible=false;this.startY=m;this.animateHeader.call(this,this.headerVisible);}if(this.startY<m&&!this.headerVisible){this.headerVisible=true;this.startY=m;this.animateHeader.call(this,this.headerVisible);}},endHandler:function(){this.startY=undefined;return;},enable:function(a){this.app=a;this.view=this.app.getView();this.jqView=this.view.$();this.jqView.on('touchstart.headerHiding',this.startHandler.bind(this));this.jqView.on('touchmove.headerHiding',this.moveHandler.bind(this));this.jqView.on('touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding',this.endHandler.bind(this));window.addEventListener("resize.headerHiding",this.resizeHandler.bind(this));},disable:function(){this.jqView.off('touchstart.headerHiding touchmove.headerHiding touchend.headerHiding touchcancel.headerHiding touchleave.headerHiding');window.removeEventListener("resize.headerHiding");}};},true);
sap.ui.predefine('sap/ovp/ui/UIActions',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/events/KeyCodes"],function(q,B,K){"use strict";return B.extend("sap.ovp.ui.UIActions",{constructor:function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=false;this.dragMoveCallback=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.swapTargetElement=null;this.endX=null;this.endY=null;this.isTouch=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.keyUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.preventClickFlag=false;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragStartCallback=null;this.dragEndCallback=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.beforeDragCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollEdge=100;this.isRTLEnabled=null;this.resizeStartCallback=null;this.resizeMoveCallback=null;this.resizeEndCallback=null;this.isResize=null;this.isResizeX=null;this.isResizeY=null;this.resizeHandleDistance=null;this.layoutDetails=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.resizeHandleDistance=16;this.isResize=false;this.isResizeX=false;this.isResizeY=false;this.noop=function(){};this.isTouch=c.isTouch?!!c.isTouch:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||1000;this.draggableSelector=c.draggableSelector;this.mode='normal';this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector);this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==='function'?c.clickCallback:this.noop;this.beforeDragCallback=typeof c.beforeDragCallback==='function'?c.beforeDragCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==='function'?c.doubleTapCallback:this.noop;this.dragEndCallback=typeof c.dragEndCallback==='function'?c.dragEndCallback:this.noop;this.endCallback=typeof c.endCallback==='function'?c.endCallback:this.noop;this.dragStartCallback=typeof c.dragStartCallback==='function'?c.dragStartCallback:this.noop;this.dragMoveCallback=typeof c.dragMoveCallback==='function'?c.dragMoveCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent='scroll';this.touchStartEvent='touchstart';this.touchMoveEvent='touchmove';this.touchEndEvent='touchend';this.mouseDownEvent='mousedown';this.mouseMoveEvent='mousemove';this.mouseUpEvent='mouseup';this.keyUpEvent='keyup';this.contextMenuEvent='contextmenu';this.touchCancelEvent='touchcancel';this.clickEvent='click';this.layoutDetails=c.layout?c.layout.dashboardLayoutUtil:null;this.isRTLEnabled=sap.ui.getCore().getConfiguration().getRTL();this.resizeStartCallback=typeof c.resizeStartCallback==='function'?c.resizeStartCallback:this.noop;this.resizeMoveCallback=typeof c.resizeMoveCallback==='function'?c.resizeMoveCallback:this.noop;this.resizeEndCallback=typeof c.resizeEndCallback==='function'?c.resizeEndCallback:this.noop;if(this.wrapper){q(this.wrapper).css({"position":"relative","top":0,"left":0,"right":0,"bottom":0,"-webkit-transform":"translateZ(0)","transform":"translateZ(0)"});}};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,i){return Array.prototype.indexOf.call(s,i);};this.insertBefore=function(s,i,r){var a,b,d;d=Array.prototype.splice;a=this.indexOf(s,i);b=this.indexOf(s,r);d.call(s,b-(a<b?1:0),0,d.call(s,a,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e;this.draggable=q(this.draggableSelector,this.container);while(typeof e==='undefined'&&a!==this.root){if(this.indexOf(this.draggable,a)>=0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==='touchstart'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousedown'){a=e;if(e.which!==1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=a.pageX;this.startY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.element){var $=q(this.element);var b=$.offset().left;var d=$.offset().top;var f=$.height();var g=$.width();if(this.layoutDetails){var r=this.isRTLEnabled?(this.startX-b)<this.resizeHandleDistance:(b+g-this.startX)<this.resizeHandleDistance;var h=(d+f-this.startY)<this.resizeHandleDistance;if(r||h){if(r&&h){this.isResizeX=false;this.isResizeY=false;}else if(!r&&h){this.isResizeX=false;this.isResizeY=true;}else if(r&&!h){this.isResizeX=true;this.isResizeY=false;}this.isResize=true;}}else{var x=b+g-this.startX;var y=d+f-this.startY;if(x<this.resizeHandleDistance&&y<this.resizeHandleDistance){this.isResize=true;}}}if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log('captureStart('+this.startX+', '+this.startY+')');}};this.startHandler=function(e){this.log('startHandler');this.captureStart(e);if(this.element){this.beforeDragCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode='double-tap';return;}if(e.type==="touchstart"){this.timer=setTimeout(function(){if(this.isResize){this.log("mode switched to resize");this.mode="resize";this.resizeStartCallback(e,this.element);}else{this.log('mode switched to drag');this.mode='drag';this.createClone();this.dragStartCallback(e,this.element);}}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==='touchmove'&&e.touches.length===1){a=e.touches[0];}else if(e.type==='mousemove'){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log('captureMove('+this.moveX+', '+this.moveY+')');}};this.moveHandler=function(e){this.log('moveHandler');this.captureMove(e);switch(this.mode){case'normal':if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(e.type==="touchmove"){this.log('-> normal');clearTimeout(this.timer);delete this.timer;}else if(this.element){if(this.isResize){this.log("mode switched to resize");this.mode="resize";}else{this.log('mode switched to drag');this.mode='drag';this.createClone();}}}break;case'drag':e.preventDefault();this.log('-> drag');this.mode='drag-and-scroll';window.addEventListener(this.mouseUpEvent,this.endHandler,true);window.addEventListener(this.keyUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.dragStartCallback(e,this.element);}break;case'drag-and-scroll':e.stopPropagation();e.preventDefault();this.log('-> drag-and-scroll');this.translateClone();this.dragMoveCallback({evt:e,clone:this.clone,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;case"resize":e.preventDefault();this.log('-> resize');this.mode='resize-and-scroll';window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.scrollContainer=document.querySelector(this.scrollContainerSelector);if(e.type==="mousemove"){this.resizeStartCallback(e,this.element);}break;case"resize-and-scroll":e.stopPropagation();e.preventDefault();this.log('-> resize-and-scroll');this.resizeMoveCallback({evt:e,element:this.element,draggable:this.draggable,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==='touchend'||e.type==='touchcancel')&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==='mouseup'){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log('captureEnd('+this.endX+', '+this.endY+')');}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){var v=document.getElementsByClassName('viz-controls-chartTooltip');var a=v&&v[0]&&v[0].id;var b=sap.ui.getCore().byId(a);if(b){var p=b&&b.aDelegates[0]&&b.aDelegates[0].oDelegate;if(p){p.close();}}if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endHandler=function(e){this.log('endHandler');if((e.type==this.keyUpEvent&&e.which==K.ESCAPE)||e.type==this.mouseUpEvent||e.type==this.touchEndEvent){this.captureEnd(e);switch(this.mode){case'normal':this.log('-> normal');break;case'drag':this.log('-> drag');this.dragEndCallback(e,this.element,this.clone);this.preventClick();break;case'drag-and-scroll':this.log('-> drag-and-scroll');window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.dragEndCallback(e,this.element,this.clone);this.preventClick();e.stopPropagation();e.preventDefault();break;case'double-tap':this.log('-> double-tap');this.doubleTapCallback(e,this.element);break;case"resize":this.log("-> resize");this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();break;case"resize-and-scroll":this.log("-> resize-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.isResize=false;this.resizeEndCallback(e,this.element);this.preventClick();e.stopPropagation();e.preventDefault();break;default:break;}if(this.element){this.endCallback(e,this.element);}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.swapTargetElement=null;this.element=null;this.mode='normal';}}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;if(this.clone){this.removeClone();}r=this.element.getBoundingClientRect();this.clone=this.element.cloneNode(true);var a=this.element.querySelectorAll('canvas');if(a.length){var b=this.clone.querySelectorAll('canvas');for(var i=0;i<a.length;i++){b[i].getContext('2d').drawImage(a[i],0,0);}}this.clone.className+=(' '+this.cloneClass);if(!this.layoutDetails){this.element.className+=(' '+'easyScanLayoutItemWrapper-placeHolder');}else{this.element.className+=(' '+'dashboardLayoutItemWrapper-placeHolder');}s=this.clone.style;s.position='absolute';s.display='block';s.top=(r.top-this.root.getBoundingClientRect().top)+'px';s.left=(r.left-this.root.getBoundingClientRect().left)+'px';s.width=r.width+'px';s.zIndex='100';s.webkitTransition='-webkit-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.mozTransition='-moz-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.msTransition='-ms-transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.transition='transform 0ms cubic-bezier(0.33, 0.66, 0.66, 1)';s.webkitTransform='translate3d(0px, 0px, 0px) ';s.mozTransform='translate3d(0px, 0px, 0px) ';s.msTransform='translate3d(0px, 0px, 0px) ';s.transform='translate3d(0px, 0px, 0px) ';this.root.appendChild(this.clone);this.log('createClone');};this.removeClone=function(){if(this.element!==null&&typeof(this.element)!=="undefined"){this.element.className=this.element.className.split(' '+this.placeHolderClass).join('');}if(this.clone!==null){this.clone.parentElement.removeChild(this.clone);this.clone=null;this.log("removeClone");}};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;if(this.clone&&d&&a){this.clone.style.webkitTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.mozTransform='translate3d('+d+'px, '+a+'px, 0px)';this.clone.style.msTransform='translate('+d+'px, '+a+'px)';this.clone.style.transform='translate3d('+d+'px, '+a+'px, 0px)';this.log('translateClone ('+d+', '+a+')');}};this.enable=function(){this.log('enable');this.root.addEventListener(this.touchStartEvent,this.startHandler,false);this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.touchEndEvent,this.endHandler,false);this.root.addEventListener(this.touchCancelEvent,this.endHandler,false);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseDownEvent,this.startHandler,false);this.root.addEventListener(this.mouseUpEvent,this.endHandler,false);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.disable=function(){this.log('disable');this.root.removeEventListener(this.touchStartEvent,this.startHandler,false);this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.touchEndEvent,this.endHandler,false);this.root.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseUpEvent,this.endHandler,false);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);this.getMove=function(){return{x:this.moveX,y:this.moveY};};}});});
sap.ui.predefine('sap/ovp/ui/cardPositionHelper',[],function(){"use strict";var c={getDependentColumns:function(C,a,b,d){var D=[];var o={};var g=function(e,a,d,D,f){if(C&&a){o[C.id]=true;e.forEach(function(C){if((C.dashboardLayout.row<a||(C.dashboardLayout.row===a&&C.dashboardLayout.column<d))&&!f[C.id]&&!C.visited){D.push(C);f[C.id]=true;}else if(C.dashboardLayout.row+C.dashboardLayout.rowSpan===a&&!f[C.id]&&!C.visited){f[C.id]=true;D.push(C);}},this);}}.bind(this);for(var i=0;i<this.allColumns.length;i++){g(this.allColumns[i],a,d,D,o);}return D;},getNextIndexColumns:function(C,r,a,p,i,b,I){var s=function(C,i,p,b,f,d,e,I){C[i].visited=true;p[C[i].id]=b+1;f.rowValue=d+e;f.Result=true;var o=I.getCardDomId(C[i].id)&&document.getElementById((I.getCardDomId(C[i].id)));if(o){o.ariaPosInSet=b+1;}};var f={Result:false,rowValue:''},d=C[i]&&C[i].dashboardLayout&&C[i].dashboardLayout.row,e=C[i]&&C[i].dashboardLayout&&C[i].dashboardLayout.rowSpan,g=C[i]&&C[i].dashboardLayout&&C[i].dashboardLayout.column;if(d===r&&g===a&&C[i]&&!C[i].visited){s(C,i,p,b,f,d,e,I);}else{var D=this.getDependentColumns(C[i],d,e,g);if(D&&!D.length&&C[i]){s(C,i,p,b,f,d,e,I);}}return f;},processAllColumns:function(C,r,p,I,a,o){var R;for(var i=0;i<C.length;i++){var b=C[i];if(b&&b.length&&b[I[i]]&&!b[I[i]].visited){R=this.getNextIndexColumns(b,r[i],b[I[i]].dashboardLayout.column,p,I[i],a,o);if(R.Result){r[i]=R.rowValue;a=a+1;I[i]=I[i]+1;}}}var n=function(C){return C.some(function(d){return d.some(function(e){return e.visited===false;});});};if(!n(C)){return;}this.processAllColumns(C,r,p,I,a,o);},fnSetAriaPos:function(C,I){var p=I.ariaPos,a=0,b=[],r=[],d=[];for(var i=0;i<C.length;i++){b[i]=0;r[i]=1;d[i]=C[i]||[];}this.allColumns=d;this.processAllColumns(d,r,p,b,a,I);}};return{setAriaPosition:c.fnSetAriaPos,getNextIndexColumns:c.getNextIndexColumns,getDependentColumns:c.getDependentColumns,processAllColumns:c.processAllColumns};});
/*!
 * Copyright (c) 2009-2014 SAP SE, All Rights Reserved
 */
sap.ui.predefine('sap/ovp/cards/PayLoadUtils',['sap/ui/thirdparty/jquery',"sap/ovp/cards/CommonUtils",'sap/ovp/cards/rta/SettingsDialogConstants',"sap/ovp/app/OVPUtils","sap/base/util/merge"],function(q,C,S,O,m){"use strict";
function g(i,j,k,M){return i+"_sap.ovp.cards."+j+"."+k+"."+M;}
function c(V){return{"type":"XTIT","maxLength":40,"value":{"":V}};}
function a(){return{"i18n":"../i18n/i18n.properties"};}
function b(i,j,k){var M=i+"["+j+"]";if(k){M+="/"+k;}return M;}
function s(j,M){var k=M._getCardsModel();for(var i=0;i<k.length;i++){if(k[i].id===j){return true;}}return false;}
function d(i,j,k){var M={"propertyPath":i,"operation":j};if(k){M["propertyValue"]=k;}return M;}
function f(j){delete j.id;delete j.dashboardLayout;delete j.settings.baseUrl;delete j.settings.cloneCard;delete j.settings.newCard;delete j["customer.settings"];delete j["customer_base.settings"];delete j["vendor.settings"];if(j.settings["staticContent"]){for(var i=0;i<j.settings["staticContent"].length;i++){delete j.settings["staticContent"][i].id;}}}
function e(N,i,j,k){if(j){if(N===C._getLayerNamespace()+".settings"){j[k]={operation:"DELETE"};}}else{if(N===C._getLayerNamespace()+".settings"){P.aEntityPropertyChange.push(d(i,"UPSERT",{operation:"DELETE"}));}else{P.aEntityPropertyChange.push(d(i,"DELETE"));}}}
function h(i){P.aEntityPropertyChange.push(d(C._getLayerNamespace()+".settings","UPSERT",i[C._getLayerNamespace()+".settings"]));}
function l(i,j,k,V,M,N){var Q;var R=C._getLayer();if(!P.oText){P.oText={};}if(!R||R===O.Layers.customer){Q=g(P.sApplicationId,P.sCardId,i,k);P.oText[Q]=c(V);}else{var T=false;for(var U in M.ai18nProperties){if(M.ai18nProperties[U].value===V){Q=M.ai18nProperties[U].key;T=true;break;}}if(!T){Q=g(P.sApplicationId,P.sCardId,i,k);}P.oText[Q]=c(V);}if(N){N[k]="{{"+Q+"}}";}else{var W=j+"/"+k;P.aEntityPropertyChange.push(d(W,"UPSERT","{{"+Q+"}}"));}}
function n(N,j,T,k){var M=this._oCardManifestSettings,Q=this._oOriginalCardManifestSettings;for(var i=0;i<T.length;i++){if((!Q[T[i]]&&M[T[i]])||(Q[T[i]]&&M[T[i]]&&(Q[T[i]]!=M[T[i]]))){if(k){l(N,N,T[i],M[T[i]],M,j[N]);}else{l(N,N,T[i],M[T[i]],M);}var R=C._getLayer();if(!R||R===O.Layers.customer){j.settings[T[i]]=M[T[i]];}else{var U=S.oI18nValueProperty;if(U[T[i]]){j.settings[T[i]]=this._oCardManifestSettings[U[T[i]]];}else{j.settings[T[i]]=M[T[i]];}}}else if(!M[T[i]]&&Q[T[i]]){if(k){e(N,N+"/"+T[i],j[N],T[i]);}else{e(N,N+"/"+T[i]);}delete j.settings[T[i]];}}}
function o(i,j,V,k){var M=i+"/"+j;if(k){k[j]=V;}else{P.aEntityPropertyChange.push(d(M,"UPSERT",V));}}
function p(N,j,k,M){var Q=this._oCardManifestSettings,R=this._oOriginalCardManifestSettings;for(var i=0;i<k.length;i++){if((!R[k[i]]&&Q[k[i]])||(R[k[i]]&&Q[k[i]]&&(R[k[i]]!=Q[k[i]]))){if(M){o(N,k[i],Q[k[i]],j[N]);}else{o(N,k[i],Q[k[i]]);}j.settings[k[i]]=Q[k[i]];}else if(!Q[k[i]]&&R[k[i]]){if(M){e(N,N+"/"+k[i],j[N],k[i]);}else{e(N,N+"/"+k[i]);}delete j.settings[k[i]];}}}
function r(N,i){var j=S.cardSettings["settings"],T=S.cardSettings["text"];if(N===C._getLayerNamespace()+".settings"){if(i[C._getLayerNamespace()+".settings"]){n.bind(this)(N,i,T,false);p.bind(this)(N,i,j,false);}else{i[C._getLayerNamespace()+".settings"]={};n.bind(this)(N,i,T,true);p.bind(this)(N,i,j,true);h(i);}}else{n.bind(this)(N,i,T,false);p.bind(this)(N,i,j,false);}}
function t(N,k,M,T,Q,R){var U=this._oCardManifestSettings;var V=U[Q];for(var i=0;i<V.length;i++){for(var j=0;j<T.length;j++){if(V[i][T[j]]){var W=b(N+"/"+Q,i),X=N+"."+Q+"."+i;if(R){l(X,W,T[j],V[i][T[j]],U,k[N][Q][i]);}else{l(X,W,T[j],V[i][T[j]],U,M[i]);}}}}if(!R){o(N,Q,M);}}
function u(j,T){var k=S.cardSettingsArrayLevel[T]["onlyTabLevelProps"],M=false;for(var i=0;k&&i<k.length;i++){if(k[i]===j){M=true;break;}}return M;}
function v(N,j,T,k,M,Q){var R=this._oCardManifestSettings,i;for(i=0;i<T.length;i++){if(R[T[i]]&&!u(T[i],M)){if(Q){l(N,N,T[i],R[T[i]],R,j[N]);}else{l(N,N,T[i],R[T[i]],R);}j.settings[T[i]]=R[T[i]];}}for(i=0;i<k.length;i++){if(R[k[i]]&&!u(k[i],M)){if(Q){o(N,k[i],R[k[i]],j[N]);}else{o(N,k[i],R[k[i]]);}j.settings[k[i]]=R[k[i]];}}if(Q){e(N,N+"/"+M,j[N],M);}else{e(N,N+"/"+M);}delete j.settings[M];}
function w(N,j,k,T,M,Q,R){var i;for(i=0;i<T.length;i++){if(j[N][T[i]]){if(R){e(N,N+"/"+T[i],j[N],T[i]);}else{e(N,N+"/"+T[i]);}delete j.settings[T[i]];}}for(i=0;i<M.length;i++){if(j[N][M[i]]){if(R){e(N,N+"/"+M[i],j[N],M[i]);}else{e(N,N+"/"+M[i]);}delete j.settings[M[i]];}}t.bind(this)(N,j,k,T,Q,R);}
function x(j,T){return q.map(m({},j),function(k){var M=S.cardSettingsArrayLevel[T]["text"],i,N=S.cardSettingsArrayLevel[T]["settings"],Q={};for(i=0;i<M.length;i++){if(k[M[i]]){Q[M[i]]=k[M[i]];}}for(i=0;i<N.length;i++){if(k[N[i]]||k[N[i]]===""){Q[N[i]]=k[N[i]];}}return Q;});}
function y(j,k,T,M){var N=S.cardSettingsArrayLevel[T]["checkForRemoval"],i,Q;for(i=0;i<N.length;i++){if(!k[0][N[i]]){Q=j.indexOf(N[i]);if(M==="remove"){if(Q>-1){j.splice(Q,1);}}else if(M==="add"){if(Q===-1){j.push(N[i]);}}}}return j;}
function z(N,i,j,k,T,M){var Q=S.cardSettingsArrayLevel[T]["text"],R=S.cardSettingsArrayLevel[T]["settings"],U=x(j,T);if(j&&k){i.settings[T]=x(j,T);if(N===C._getLayerNamespace()+".settings"){i[N][T]=x(j,T);}t.bind(this)(N,i,U,Q,T,M);}else if(!j&&k){v.bind(this)(N,i,Q,R,T,M);}else if(j&&!k){i.settings[T]=x(j,T);if(N===C._getLayerNamespace()+".settings"){i[N][T]=x(j,T);}R=y(R,U,T,"remove");w.bind(this)(N,i,U,Q,R,T,M);R=y(R,U,T,"add");}}
function A(N,i,j){var k=this._oCardManifestSettings["staticContent"],M=this._oOriginalCardManifestSettings["staticContent"],T=this._oCardManifestSettings["tabs"],Q=this._oOriginalCardManifestSettings["tabs"];if(k||M){z.bind(this)(N,i,k,M,"staticContent",j);}else if(T||Q){z.bind(this)(N,i,T,Q,"tabs",j);}}
function B(N,i){var j=S.cardSettingsForComplex["settings"],T=S.cardSettingsForComplex["text"];if(N===C._getLayerNamespace()+".settings"){if(i[C._getLayerNamespace()+".settings"]){n.bind(this)(N,i,T,false);p.bind(this)(N,i,j,false);A.bind(this)(N,i,false);}else{i[C._getLayerNamespace()+".settings"]={};n.bind(this)(N,i,T,true);p.bind(this)(N,i,j,true);A.bind(this)(N,i,true);h(i);}}else{n.bind(this)(N,i,T,false);p.bind(this)(N,i,j,false);A.bind(this)(N,i,false);}}
function D(N,i){var j=this._oCardManifestSettings["staticContent"],k=this._oOriginalCardManifestSettings["staticContent"],T=this._oCardManifestSettings["tabs"],M=this._oOriginalCardManifestSettings["tabs"];if(j||k||T||M){B.bind(this)(N,i);}else{r.bind(this)(N,i);}}
function E(k){var M=S.AllCardSettingsForKPICard,j,N=this._oCardManifestSettings,Q={"model":C._getLayerNamespace()+".kpi_card_model_"+k.getTrimmedDataURIName(N.selectedKPI.ODataURI),"template":"sap.ovp.cards.charts.analytical","settings":{}};for(j=0;j<M.length;j++){if(N[M[j]]){Q.settings[M[j]]=N[M[j]];}}if(N["addCustomParameters"]){Q.settings.staticParameters={};var R=N['aAllStaticParameters'];if(Array.isArray(R)&&R.length>0){for(var i=0;i<R.length;i++){var T=R[i];Q.settings.staticParameters[T.key]=T.value;}}}return Q;}
function F(){var k=this._oCardManifestSettings["staticContent"],T=S.cardSettingsArrayLevel["staticContent"]["text"],i,j,M=S.cardSettingsArrayLevel["staticContent"]["settings"],N=this._oCardManifestSettings,Q=S.cardSettingsForStaticLinkListCard,R={"template":"sap.ovp.cards.linklist","settings":{"staticContent":[]}};for(j=0;j<Q.length;j++){if(N[Q[j]]){R.settings[Q[j]]=N[Q[j]];}}for(j=0;j<k.length;j++){R.settings["staticContent"].push({});for(i=0;i<T.length;i++){if(k[j][T[i]]){R.settings["staticContent"][j][T[i]]=k[j][T[i]];}}for(i=0;i<M.length;i++){if(k[j][M[i]]){R.settings["staticContent"][j][M[i]]=k[j][M[i]];}}}return R;}
function G(i){var k=S.NewCardSettings,M;var N=this._oCardManifestSettings;k.forEach(function(Y){if(Y.template===this._oCardManifestSettings.template){M=Y;}}.bind(this));var Q={"model":this._oCardManifestSettings.model,"template":M.template,"settings":{}};if(!this._oCardManifestSettings["tabs"]){var R=M.cardSettings;var T=S.oI18nValueProperty;for(var j=0;j<R.length;j++){if(!i.bAddNewCardFlag){if(N[R[j]]){Q.settings[R[j]]=N[R[j]];}}else{if(N[R[j]]){if(T[R[j]]){Q.settings[R[j]]=this._oCardManifestSettings[T[R[j]]];}else{Q.settings[R[j]]=N[R[j]];}}}}}else{var U=M.text;for(var j=0;j<U.length;j++){if(N[U[j]]){Q.settings[U[j]]=N[U[j]];}}var V=this._oCardManifestSettings["tabs"],W=x(V,"tabs"),X=this._oCardManifestSettings.defaultViewSelected;Q.settings["tabs"]=W;Q.settings.selectedKey=X;}return Q;}
function H(i,T){var j=[];if(T){for(var k in T){var M=T[k];j.push({"key":k,"value":M.value[""],"textType":M.type});}if(j.length){writeToI18n("/"+i+"/webapp/i18n",j);}}}
function I(M,N,Q,R){var T,i,j,k,U,V=Q.settings["staticContent"],W=Q.settings["tabs"];var X=S.cardSettingsWithText;var Y=S.oI18nKeyValueProperty;for(i=0;i<X.length;i++){var Z;if(typeof X[i]=="string"){if(Q.settings[X[i]]){if(!T){T={};}if(R){if(!R.bAddNewCardFlag){Z=g(M,N,"settings",X[i]);}else{for(var $ in Y){if(X[i]===$){Z=this._oCardManifestSettings[Y[$]]?this._oCardManifestSettings[Y[$]]:g(M,N,"settings",X[i]);break;}}}}else{Z=g(M,N,"settings",X[i]);}T[Z]=c(Q.settings[X[i]]);Q.settings[X[i]]="{{"+Z+"}}";}}else if(typeof X[i]=="object"){if(X[i].hasOwnProperty("staticContent")){if(V){for(j=0;j<V.length;j++){for(k=0;k<X[i]["staticContent"].length;k++){U=X[i]["staticContent"][k];if(V[j][U]){if(!T){T={};}Z=g(M,N,"settings.staticContent."+j,U);T[Z]=c(V[j][U]);Q.settings["staticContent"][j][U]="{{"+Z+"}}";}}}}}else if(X[i].hasOwnProperty("tabs")){if(W){for(j=0;j<W.length;j++){for(k=0;k<X[i]["tabs"].length;k++){U=X[i]["tabs"][k];if(W[j][U]){if(!T){T={};}Z=g(M,N,"settings.tabs."+j,U);T[Z]=c(W[j][U]);Q.settings["tabs"][j][U]="{{"+Z+"}}";}}}}}}}return T;}
function J(M,j,k){var N=false;for(var i=0;i<k.length;i++){if(k[i].id!==j&&k[i].model===M){N=true;break;}}return N;}
function K(i,T,j,k,V){var M={};M['appDescriptorChange']={'parameters':i};if(T){M['appDescriptorChange']['texts']=T;}if(k){M['flexibilityChange']={"newAppDescriptor":j,"oldAppDescriptor":k};}else{M['flexibilityChange']=j;}if(V){M['viewSwitchChange']=V;}return M;}
function L(j,k){var M={card:{}},N={},Q=j.oMainComponent,R=Q._getApplicationId(),T,U={},V=C._getLayer();if(j.bAddNewCardFlag){T=G.bind(this)(j);}else if(j.bNewStaticLinkListCardFlag){T=F.bind(this)(j);}else if(j.bNewKPICardFlag){T=E.bind(this)(j);}var W=C._getLayerNamespace()+k,i=1;while(s(W+"_N"+i,Q)){i++;}W=W+"_N"+i;f(T);N=m({},T);N.id=W;if(this._oCardManifestSettings.selectedKPI){N.settings.selectedKPI=m({},this._oCardManifestSettings.selectedKPI);}U.oFlexCardManifest=N;U.oText=I.bind(this)(R,W,T,j);if(V===O.Layers.vendor){H(R,m({},U.oText));U.oText=a();}M.card[W]=T;U.oParameters=M;return U;}
var P={sApplicationId:"",sCardId:"",aEntityPropertyChange:[],oText:undefined,getPayLoadForEditCard:function(i){var j=i.oAppDescriptor.id,k={"cardId":j},T,M,N=m({},i.oAppDescriptor),Q=m({},i.oAppDescriptor),R,V,U=C._getLayer();R=(j.lastIndexOf(C._getLayerNamespace()+".",0)===0)?"settings":C._getLayerNamespace()+".settings";P.sApplicationId=i.sApplicationId;P.sCardId=j;P.aEntityPropertyChange=[];P.oText=undefined;D.bind(this)(R,N);T=m({},P.oText);if(U===O.Layers.vendor){H(P.sApplicationId,P.oText);T=a();}M=P.aEntityPropertyChange;if(M.length===1){k["entityPropertyChange"]=M[0];}else{k["entityPropertyChange"]=M;}if(this._oCardManifestSettings["tabs"]){var W=this._oCardManifestSettings.defaultViewSelected,X=this._oOriginalCardManifestSettings.selectedKey;X=(X&&X>0)?X:1;if(W&&W>0&&W!==X){V={cardId:j,selectedKey:W,oldKey:X};}N.settings.selectedKey=W;}return K(k,T,N,Q,V);},getPayLoadForCloneCard:function(j){return new Promise(function(k,M){var N={card:{}},T,Q={},R=j.getComponentInstance().getComponentData(),U=R.mainComponent,V=U._getApplicationId(),W=m({},U._getCardFromManifest(R.cardId)),X=C._getLayer();var Y=C._getLayerNamespace()+"."+W.id,i=1;while(s(Y+"_C"+i,U)){i++;}Y=Y+"_C"+i;f(W);Q=m({},W);Q.id=Y;Q.settings.title=Q.settings.title+" "+i;W.settings.title=W.settings.title+" "+i;if(W.settings.defaultSpan&&W.settings.defaultSpan.showOnlyHeader){W.settings.defaultSpan.rows=12;}T=I(V,Y,W);if(X===O.Layers.vendor){H(V,m({},T));T=a();}N.card[Y]=W;k(K(N,T,Q));});},getPayLoadForNewStaticLinkListCard:function(i){var j=L.bind(this)(i,".newStaticLinkListCard");return K(j.oParameters,j.oText,j.oFlexCardManifest);},getPayLoadForNewKPICard:function(i){var j=L.bind(this)(i,".newKPICard"),k=i.oAppComponent,M=j.oFlexCardManifest,N=j.oParameters,Q=M.model+"_ANNO",R=i.getDataSources(Q),T=true,U=0;if(R[Q]){if(R[Q].uri!==this._oCardManifestSettings.selectedKPI.ModelURI){while(R[Q+"_"+U]){U++;}Q=Q+"_"+U;}else{T=false;}}var V=k.getModel(M.model);if(!V){N["model"]={};N["model"][M.model]={dataSource:M.model,settings:{"defaultCountMode":sap.ui.model.odata.CountMode.None}};N["dataSource"]={};N["dataSource"][M.model]={uri:this._oCardManifestSettings.selectedKPI.ODataURI,type:"OData",settings:{annotations:[Q],localUri:""}};if(T){N["dataSource"][Q]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};M.settings["sAnnoKey"]=Q;}}var W=K(N,j.oText,j.oFlexCardManifest);if(T&&V){W["addODataAnnotation"]={'parameters':{"dataSourceId":M.model,"annotations":[Q],"dataSource":{}}};W["addODataAnnotation"].parameters.dataSource[Q]={uri:this._oCardManifestSettings.selectedKPI.ModelURI,type:"ODataAnnotation",settings:{localUri:""}};W['flexibilityChange'].settings["sAnnoKey"]=Q;}return W;},getPayLoadForNewCard:function(i){var j=L.bind(this)(i,".newCard"),k=j.oParameters;if(i.newDataSource){var M=i.oAppComponent,N=j.oFlexCardManifest,Q=i.newDataSourceModel.serviceAnnotation,R=i.getDataSources(Q),T=true,U=0;if(R[Q]){if(R[Q].uri!==i.newDataSourceModel.serviceAnnotationURI){while(R[Q+"_"+U]){U++;}Q=Q+"_"+U;}else{T=false;}}var V=M.getModel(N.model);if(!V){k["model"]={};k["model"][N.model]={dataSource:N.model,settings:{"defaultCountMode":sap.ui.model.odata.CountMode.None}};k["dataSource"]={};k["dataSource"][N.model]={uri:i.newDataSourceModel.serviceURI,type:"OData",settings:{annotations:[Q],localUri:""}};if(T){k["dataSource"][Q]={uri:i.newDataSourceModel.serviceAnnotationURI,type:"ODataAnnotation",settings:{localUri:""}};}}}return K(j.oParameters,j.oText,j.oFlexCardManifest);},getPayLoadForRemoveCard:function(i){var j={},k={},M=i.getComponentInstance().getComponentData(),N=M.cardId;j["cardId"]=N;k.id=i.getId();var Q=K(j,null,k),R=M.mainComponent.getUIModel().getProperty("/cards");if(!J(M.modelName,N,R)&&!!M.modelName){Q["removeDataSourceChange"]=[];var T=M.appComponent.getMetadata(),U=T.getManifestEntry("sap.ui5").models[M.modelName].dataSource,V=T.getManifestEntry("sap.app").dataSources[U].settings.annotations;V.forEach(function(W){Q["removeDataSourceChange"].push({'parameters':{"dataSourceId":W}});});}return Q;}};return P;},true);
sap.ui.predefine('sap/ovp/flexibility/changeHandler/RemoveCardContainer',["sap/m/MessageToast","sap/ovp/app/resources"],function(M,O){"use strict";var R={"changeHandler":{},"layers":{"VENDOR":true,"CUSTOMER_BASE":true,"CUSTOMER":true,"USER":true}};
R.changeHandler.applyChange=function(c,C,p){var m=p.modifier,o=p.appComponent.getRootControl(),a=o.getController(),u=a.getUIModel(),b=u.getProperty("/cards"),l=a.getLayout(),s=c.getContent().id,e=a._getCardId(s),A=p.appComponent,S={id:s,isLocalId:false},d=m.bySelector(S,A,o),i;for(i=0;i<b.length;i++){if(b[i].id===e){break;}}var f=b.splice(i,1);u.setProperty("/cards",b);c.setRevertData({id:s,oCard:f[0],index:i});m.setVisible(d,false);if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();if(L.aCards){L.updateCardVisibility([{id:L.getCardIdFromComponent(s),visibility:false}]);}}var g=O.getText("OVP_KEYUSER_TOAST_MESSAGE_FOR_REMOVE",[d.getComponentInstance().getComponentData().settings.title]);M.show(g,{duration:10000});l.rerender();return true;};
R.changeHandler.revertChange=function(c,C,p){var m=p.modifier,o=p.appComponent.getRootControl(),a=o.getController(),u=a.getUIModel(),b=u.getProperty("/cards"),l=a.getLayout(),r=c.getRevertData(),d=m.bySelector(r.id);b.splice(r.index,0,r.oCard);u.setProperty("/cards",b);m.setVisible(d,true);c.resetRevertData();if(u.getProperty('/containerLayout')==='resizable'){var L=l.getDashboardLayoutUtil();L.updateCardVisibility([{id:L.getCardIdFromComponent(r.id),visibility:true}]);}l.rerender();return true;};
R.changeHandler.completeChangeContent=function(c,s,p){return;};
return R;},true);
sap.ui.predefine('sap/ovp/library',["sap/ui/core/library","sap/ui/layout/library","sap/ui/generic/app/library","sap/m/library","sap/f/library","sap/ui/comp/library","sap/ui/rta/library","sap/suite/ui/microchart/library","sap/viz/library","sap/fe/placeholder/library","sap/fe/macros/library"],function(){'use strict';sap.ui.getCore().initLibrary({name:"sap.ovp",dependencies:["sap.ui.core","sap.ui.layout","sap.ui.generic.app","sap.m","sap.f","sap.ui.comp","sap.ui.rta","sap.suite.ui.microchart","sap.viz","sap.fe.placeholder","sap.fe.macros"],types:[],interfaces:[],controls:[],elements:[],version:"1.96.0",extensions:{flChangeHandlers:{"sap.ovp.ui.EasyScanLayout":"sap/ovp/flexibility/EasyScanLayout","sap.ovp.ui.DashboardLayout":"sap/ovp/flexibility/DashboardLayout"},"sap.ui.support":{diagnosticPlugins:["sap/ovp/support/DiagnosticsTool/DiagnosticsTool"]}}});var t=sap.ovp;return t;});
sap.ui.predefine('sap/ovp/support/lib/Documentation',["sap/m/library"],function(l){"use strict";var E="https://ui5.sap.com/";var a="03265b0408e2432c9571d6b3feb6b1fd";
function g(){var u=sap.ui.getVersionInfo().version;if(u.indexOf("-SNAPSHOT")!==-1){return E+"#/topic/"+a;}else{return E+u+"/#/topic/"+a;}}
function o(){l.URLHelper.redirect(g(),true);}
return{getDocuURL:g,openDocumentation:o};});
sap.ui.predefine('sap/ovp/ui/ComponentContainerDesigntimeMetadata',["sap/ui/thirdparty/jquery","sap/ovp/cards/CommonUtils","sap/ovp/cards/SettingsUtils","sap/ui/dt/plugin/ElementMover","sap/ui/dt/OverlayRegistry",'sap/ui/dt/OverlayUtil','sap/ui/rta/plugin/Plugin','sap/ui/rta/util/BindingsExtractor','sap/ui/dt/MetadataPropagationUtil','sap/ui/rta/Utils',"sap/ovp/app/resources","sap/ovp/app/OVPUtils","sap/ovp/cards/ovpLogger"],function(q,C,S,E,O,a,P,B,M,U,b,c,o){"use strict";var A=C.getApp();var i=false;var l=new o("OVP.ui.ComponentContainerDesigntimeMetadata");var _=function(){var u="https://"+window.location.host+"/sap/opu/odata/SSB/SMART_BUSINESS_DESIGNTIME_SRV/KPIs";q.ajax({type:"GET",url:u,dataType:"json",async:false,headers:"",success:function(p,t,r){var D={'d':{'results':[]}};D.d.results=p.d.results.filter(function(K){return!!K.ModelURI;});i=(D.d.results.length>0);if(i){var s=new sap.ui.model.json.JSONModel();s.setData(D);A.getView().setModel(s,"JSONModelForSSB");}},error:function(p){l.error(p);}});};_();var e=new E(),d=function(p){p.setTargetZone(false);},f=function(p){p.setTargetZone(true);},g=function(t){var p=t.getAggregationOverlays();var r=p.filter(function(s){return s.isTargetZone();});if(r.length>0){return r[0];}else{return null;}},h=function(t){var p=e.getMovedOverlay();if(!p){return false;}var r=false;if(!(t.getElement()===p.getElement())){var T=g(t);if(T){r=true;}else if(a.isInTargetZoneAggregation(t)){r=true;}}if(r){p.setSelected(true);setTimeout(function(){p.focus();},0);}return r;},j=function(p,s){var r=p.getAggregationOverlays();r.forEach(function(t){s(t);});},k=function(s,p){var r=O.getOverlay(s),t=r&&r.getParentElementOverlay(),u=t&&a.findAllSiblingOverlaysInContainer(r,t);u&&u.forEach(function(v){j(v,p);});};var m=E.prototype.checkTargetZone;
E.prototype.checkTargetZone=function(p,r,s){var t=r?r:this.getMovedOverlay();var T=m.apply(this,arguments);if(!T){return Promise.resolve(false);}var u=t.getElement();var v=p.getParent();var w=t.getRelevantContainer();var x=v.getElement();var y=p.getDesignTimeMetadata();var z=M.getRelevantContainerForPropagation(y.getData(),u);z=z?z:x;if(!w||!z||!P.prototype.hasStableId(v)||w!==z){return Promise.resolve(false);}if(t.getParent().getElement()!==x){var D=B.getBindings(u,u.getModel());if(Object.keys(D).length>0&&u.getBindingContext()&&x.getBindingContext()){var F=U.getEntityTypeByPath(u.getModel(),u.getBindingContext().getPath());var G=U.getEntityTypeByPath(x.getModel(),x.getBindingContext().getPath());if(!(F===G)){return Promise.resolve(false);}}}return Promise.resolve(true);};
E.prototype.deactivateAllTargetZones=function(s){k(s,d);};
E.prototype.activateAllValidTargetZones=function(s){k(s,f);};
var n={name:{singular:b.getText("Card"),plural:b.getText("Cards")},actions:{remove:{name:b.getText("OVP_KEYUSER_MENU_HIDE_CARD"),changeType:"hideCardContainer",changeOnRelevantContainer:true},reveal:{changeType:"unhideCardContainer",changeOnRelevantContainer:true,getLabel:function(p){var s=this._getCardId(p.getId()),r=this._getCardFromManifest(s);if(r){var t=r.settings;if(t.title){return t.title;}else if(t.category){return(t.category);}else if(t.subTitle){return t.subTitle;}return r.cardId;}else{l.error("Card id "+s+" is not present in the manifest");return"";}}.bind(A)}}};var L=C._getLayer();n.actions["settings"]=function(p){if(!p.getComponentInstance()){return{};}var r=p.getComponentInstance().getComponentData(),s=r.mainComponent,t=s._getCardFromManifest(r.cardId);if(!t||!C.checkIfCardTypeSupported(t.template)){return{};}var u={"EditCard":{icon:"sap-icon://edit",name:b.getText("OVP_KEYUSER_MENU_EDIT_CARD"),isEnabled:function(v){return true;},changeOnRelevantContainer:true,handler:S.fnEditCardHandler},"CloneCard":{icon:"sap-icon://value-help",name:b.getText("OVP_KEYUSER_MENU_CLONE_CARD"),isEnabled:function(v){return true;},handler:S.fnCloneCardHandler}};if(!L||L===c.Layers.customer){u["Cut"]={icon:"sap-icon://scissors",name:b.getText("OVP_KEYUSER_MENU_CUT_CARD"),isEnabled:function(v){return true;},changeOnRelevantContainer:true,handler:function(v,G){var w=O.getOverlay(v),x=e.getMovedOverlay();if(x){x.removeStyleClass("sapUiDtOverlayCutted");e.setMovedOverlay(null);e.deactivateAllTargetZones(v);}e.setMovedOverlay(w);w.addStyleClass("sapUiDtOverlayCutted");e.activateAllValidTargetZones(v);return Promise.resolve([]).then(function(){return[];});}};u["Paste"]={icon:"sap-icon://paste",name:b.getText("OVP_KEYUSER_MENU_PASTE_CARD"),isEnabled:function(v){var w=O.getOverlay(v),T=g(w);return!!((T)||(a.isInTargetZoneAggregation(w)));},changeOnRelevantContainer:true,handler:function(v,G){var w=O.getOverlay(v),x=e.getMovedOverlay();if(x){var y=x.getElement(),T=w.getElement(),z=a.getParentInformation(x),D=a.getParentInformation(w),F=v.getComponentInstance().getComponentData().mainComponent,H=F.getLayout(),I=F.getUIModel(),J={},K={},N=[];if(I.getProperty('/containerLayout')==='resizable'){var Q=H.getDashboardLayoutModel(),R=F._getCardId(y.getId()),V=F._getCardId(v.getId()),W=Q.getCardById(R),X=Q.getCardById(V),Y=Q.getColCount(),Z='C'+Y,$=[];J.cardId=R;J.dashboardLayout={};J.dashboardLayout[Z]={row:X.dashboardLayout.row,oldRow:W.dashboardLayout.row,column:X.dashboardLayout.column,oldColumn:W.dashboardLayout.column};if(X.dashboardLayout.column+W.dashboardLayout.colSpan>Y+1){J.dashboardLayout[Z].colSpan=X.dashboardLayout.colSpan;J.dashboardLayout[Z].oldColSpan=W.dashboardLayout.colSpan;J.dashboardLayout[Z].rowSpan=W.dashboardLayout.rowSpan;J.dashboardLayout[Z].oldRowSpan=W.dashboardLayout.rowSpan;}N.push({selectorControl:v.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:J}});N.push({selectorControl:v.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:J}});Q._arrangeCards(W,{row:X.dashboardLayout.row,column:X.dashboardLayout.column},'drag',$);Q._removeSpaceBeforeCard($);$.forEach(function(b1){var c1={};c1.dashboardLayout={};c1.cardId=b1.content.cardId;c1.dashboardLayout[Z]=b1.content.dashboardLayout;N.push({selectorControl:v.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{changeType:"dragOrResize",content:c1}});});}else{var a1=D.parent.getContent().filter(function(t){return t.getVisible();});J={cardId:F._getCardId(y.getId()),position:a1.indexOf(T),oldPosition:a1.indexOf(y)};N.push({selectorControl:v.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{changeType:"position",content:J}});K={cardId:F._getCardId(y.getId()),position:D.index,oldPosition:z.index};N.push({selectorControl:v.getComponentInstance().getComponentData().appComponent.getRootControl().getController().getLayout(),changeSpecificData:{runtimeOnly:true,changeType:"dragAndDropUI",content:K}});}}h(w);if(x){x.removeStyleClass("sapUiDtOverlayCutted");e.setMovedOverlay(null);e.deactivateAllTargetZones(v);return Promise.resolve(N).then(function(b1){return b1;});}}};u["AddStaticLinkListCard"]={icon:"sap-icon://form",name:b.getText("OVP_KEYUSER_MENU_CREATE_LINK_LIST_CARD"),isEnabled:function(v){return true;},handler:S.fnAddStaticLinkListCardHandler};if(i){u["AddKPICard"]={icon:"sap-icon://kpi-corporate-performance",name:b.getText("OVP_KEYUSER_MENU_ADD_KPI_CARD"),isEnabled:function(v){return true;},handler:S.fnAddKPICardHandler};}}else if(L&&(L===c.Layers.vendor||L===c.Layers.customer_base)){u["AddCard"]={icon:"sap-icon://add-activity",name:b.getText("OVP_KEYUSER_MENU_AddCard"),isEnabled:function(v){return true;},handler:S.fnAddNewCardHandler};}u["RemoveCard"]={icon:"sap-icon://delete",name:b.getText("OVP_KEYUSER_MENU_REMOVE_CARD"),isEnabled:function(v){var u=v.getComponentInstance().getComponentData().settings;return v.getId().indexOf(C._getLayerNamespace()+".")!==-1&&!u.cloneCard&&!u.newCard;},handler:S.fnRemoveCardHandler};return u;};return n;},true);
sap.ui.predefine('sap/ovp/ui/CustomData',['sap/ui/core/CustomData','sap/ovp/cards/ovpLogger'],function(C,o){"use strict";var l=new o("OVP.ui.CustomData");
var C=C.extend("sap.ovp.ui.CustomData");
C.prototype._checkWriteToDom=function(r){var k=this.getKey().toLowerCase(),i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return;}if(!this.getWriteToDom()){return null;}var v=this.getValue();if(typeof v!="string"){l.error("CustomData with key "+k+" should be written to HTML of "+r+" but the value is not a string.");return null;}if(!(sap.ui.core.ID.isValid(k))||(k.indexOf(":")!=-1)){l.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (must be a valid sap.ui.core.ID without any colon).");return null;}if(k==window._FASTNAVIGATIONKEY){v=/^\s*(x|true)\s*$/i.test(v)?"true":"false";}else if(k.indexOf("sap-ui")==0){l.error("CustomData with key "+k+" should be written to HTML of "+r+" but the key is not valid (may not start with 'sap-ui').");return null;}return{key:k,value:v};};
return C;});
sap.ui.predefine('sap/ovp/ui/OVPWrapper',["sap/ui/core/Control"],function(C){"use strict";return C.extend("sap.ovp.ui.OVPWrapper",{metadata:{library:"sap.ovp",designTime:true,aggregations:{DynamicPage:{type:"sap.ui.core.Control",multiple:false}},defaultAggregation:"DynamicPage"},init:function(){},renderer:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("ovpWrapper");r.writeClasses();r.write(">");r.renderControl(c.getAggregation("DynamicPage"));r.write("</div>");}});});
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5/OpenUI5)
 * (c) Copyright 2009-2014 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ovp/ui/ObjectStream',["sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/Control","sap/ui/core/Icon","sap/m/Dialog","sap/ovp/app/resources","sap/ui/events/KeyCodes","sap/base/util/uid"],function(q,D,C,I,a,O,K,u){"use strict";var _=null;var b=function(o){this.init(o);};
b.prototype.init=function(o){this.objectStream=o;this.keyCodes=K;this.jqElement=o.$();this.jqElement.on('keydown.keyboardNavigation',this.keydownHandler.bind(this));this.jqElement.on("focus.keyboardNavigation",".sapOvpObjectStreamItem",this.ObjectStreamFocusAccessabilityHandler.bind(this));};
b.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");}delete this.jqElement;delete this.objectStream;};
b.prototype._swapItemsFocus=function(e,j,d){e.preventDefault();j.attr("tabindex","-1");d.attr("tabindex","0").focus();};
b.prototype.ObjectStreamFocusAccessabilityHandler=function(){var f=document.activeElement;f=q(f);if(f){var l=f.find("[aria-label]");var i,d="";for(i=0;i<l.length;i++){if(l[i].getAttribute("role")=="heading"){d+=l[i].id+" ";}}if(d.length){f.attr("aria-labelledby",d);}if(f.hasClass('sapOvpCardHeader')){f.closest('.sapOvpObjectStreamItem').removeAttr("aria-labelledby");}}};
b.prototype.tabButtonHandler=function(e){var j=q(document.activeElement);if(j.hasClass("sapOvpObjectStreamItem")){return;}if(j.hasClass("sapOvpObjectStreamClose")){e.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable").focus();return;}var d=j.closest(".sapOvpObjectStreamItem");if(!d.length){return;}var f=d.find(":sapTabbable");if(f.eq(f.length-1).is(j)){e.preventDefault();this.jqElement.find("a.sapOvpObjectStreamHeader").focus();}};
b.prototype.shiftTabButtonHandler=function(e){var j=q(document.activeElement);if(j.hasClass("sapOvpObjectStreamItem")){e.preventDefault();this.jqElement.find(".sapOvpObjectStreamClose").focus();}if(j.hasClass("sapOvpObjectStreamClose")){e.preventDefault();this.jqElement.find('a.sapOvpObjectStreamHeader').focus();}if(j.hasClass("sapOvpObjectStreamHeader")){e.preventDefault();this.jqElement.find(".sapOvpObjectStreamItem:sapTabbable *:sapTabbable").last().focus();return;}};
b.prototype.enterHandler=function(e){var j=q(document.activeElement);if(j.hasClass("sapOvpObjectStreamClose")){e.preventDefault();this.objectStream.getParent().close();if(_){_.focus();}return;}if(j.hasClass("sapOvpObjectStreamItem")&&!j.next().length){j.children().click();return;}};
b.prototype.f6Handler=function(e){var j=q(document.activeElement);if(j.hasClass("sapOvpObjectStreamClose")){this.jqElement.find('.sapOvpObjectStreamItem').attr("tabindex","-1").first().attr("tabindex","0").focus();}else{this.jqElement.find('.sapOvpObjectStreamClose').focus();}};
b.prototype.f7Handler=function(e){var j=q(document.activeElement);if(j.hasClass("sapOvpObjectStreamItem")){j.find(':sapTabbable').first().focus();}else{j.closest('.sapOvpObjectStreamItem').focus();}e.preventDefault();};
b.prototype.leftRightHandler=function(e,i){var n=i?"next":"prev";var j=q(document.activeElement);if(!j.hasClass("sapOvpObjectStreamItem")){return false;}var d=j[n]();if(!d.length){return;}this._swapItemsFocus(e,j,d);};
b.prototype.homeEndHandler=function(e,i){var n=i?"first":"last";var j=q(document.activeElement);if(!j.hasClass("sapOvpObjectStreamItem")){return false;}e.preventDefault();var d=this.jqElement.find(".sapOvpObjectStreamItem")[n]();this._swapItemsFocus(e,j,d);};
b.prototype.pageUpDownHandler=function(e,i){var n=i?"prev":"next";var j=q(document.activeElement);if(!j.hasClass("sapOvpObjectStreamItem")){return;}if(!j[n]().length){return;}var d=false;var f=j;var w=window.innerWidth;while(!d){var g=f[n]();if(!g.length){d=f;break;}if(!i&&g.offset().left>w){d=g;break;}if(i&&(g.offset().left+g.outerHeight())<=0){d=g;break;}f=g;}this._swapItemsFocus(e,j,d);};
b.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.TAB:(e.shiftKey)?this.shiftTabButtonHandler(e):this.tabButtonHandler(e);break;case this.keyCodes.ENTER:case this.keyCodes.SPACE:this.enterHandler(e);break;case this.keyCodes.F6:this.f6Handler(e);break;case this.keyCodes.F7:this.f7Handler(e);break;case this.keyCodes.ARROW_UP:case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_DOWN:case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.pageUpDownHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.pageUpDownHandler(e,false);break;default:break;}};
var c=C.extend("sap.ovp.ui.ObjectStream",{metadata:{library:"sap.ovp",aggregations:{content:{type:"sap.ui.core.Control",multiple:true},placeHolder:{type:"sap.ui.core.Control",multiple:false},title:{type:"sap.ui.core.Control",multiple:false}}}});
c.prototype.init=function(){var t=this;this._closeIcon=new I({src:"sap-icon://decline",tooltip:O.getText("close")});this._closeIcon.addEventDelegate({onclick:function(){t.getParent().close();}});};
c.prototype._startScroll=function(d){this._direction=d;var e=this.wrapper.scrollWidth-this.wrapper.offsetWidth-Math.abs(this.wrapper.scrollLeft);var l;if(d=="left"){l=(this.rtl&&!this.scrollReverse)?e:this.wrapper.scrollLeft;if(l<=0){return;}this.jqRightEdge.css("opacity",1);}else{l=(this.rtl&&!this.scrollReverse)?Math.abs(this.wrapper.scrollLeft):e;if(l<=0){return;}this.jqLeftEdge.css("opacity",1);}var f=l*3;var t=(d=="left")?l:~l+1;q(this.container).one("transitionend",function(){this._mouseLeave({data:this});}.bind(this));this.container.style.transition='transform '+f+'ms linear';this.container.style.transform='translate('+t+'px, 0px) scale(1) translateZ(0px) ';};
c.prototype._mouseLeave=function(e){var d=window.getComputedStyle(e.data.container).transform;e.data.container.style.transform=d;e.data.container.style.transition='';this.rtl=sap.ui.getCore().getConfiguration().getRTL();var t;var f=d.split(",");if(d.substr(0,8)=="matrix3d"){t=parseInt(f[12],10);}else if(d.substr(0,6)=="matrix"){t=parseInt(f[4],10);}if(isNaN(t)){return;}e.data.container.style.transform="none";if(D.browser.msie){t=this.rtl?~t:t;}e.data.wrapper.scrollLeft+=~t+(e.data._direction=="left"?-5:5);e.data._checkEdgesVisibility();};
var s;
c.prototype.debounceScrollHandler=function(){window.clearTimeout(s);s=window.setTimeout(this._checkEdgesVisibility.bind(this),150);};
c.prototype._initScrollVariables=function(){var j=this.$();this.container=j.find(".sapOvpObjectStreamScroll").get(0);this.rtl=sap.ui.getCore().getConfiguration().getRTL();this.wrapper=j.find(".sapOvpObjectStreamCont").get(0);this.scrollReverse=this.scrollReverse||this.wrapper.scrollLeft>0;this.shouldShowScrollButton=(!D.system.phone&&!D.system.tablet)||D.system.combi;this.jqRightEdge=j.find(".sapOvpOSEdgeRight");this.jqLeftEdge=j.find(".sapOvpOSEdgeLeft");if(this.shouldShowScrollButton){this.jqRightEdge.add(this.jqLeftEdge).on("mouseenter.objectStream",this,this._mouseEnter).on("mouseleave.objectStream",this,this._mouseLeave);q(this.wrapper).on("scroll.objectStream",this.debounceScrollHandler.bind(this));}else{this.jqLeftEdge.css("display","none");this.jqRightEdge.css("display","none");}this._checkEdgesVisibility();};
c.prototype._afterOpen=function(){if(D.os.ios&&this.$().length){this.$().on("touchmove.scrollFix",function(e){e.stopPropagation();});}var o=this.$().find('a.sapOvpObjectStreamHeader');o.removeAttr('aria-describedby');o.removeAttr('href');var l=o.attr('id');o.parent('div').attr('aria-labelledby',l);o.focus();if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new b(this);this._initScrollVariables();this.jqBackground=q("<div id='objectStreamBackgroundId' class='objectStreamNoBackground'></div>");q("#sap-ui-static").prepend(this.jqBackground);this.jqBackground.on('click.closePopup',function(){this._oPopup.close();}.bind(this));q(".sapUshellEasyScanLayout").addClass("bluredLayout");var d=this.$().find('.sapOvpObjectStreamItem');for(var i=0;i<d.length;i++){var f=q(d[i]).find('.sapOvpActionFooter');if(f.find('button').length==0){f.attr('tabindex','-1');}}};
c.prototype._beforeClose=function(){if(D.os.ios&&this.$().length){this.$().off(".scrollFix");}this.keyboardNavigation.destroy();this.jqBackground.remove();this.jqLeftEdge.add(this.jqRightEdge).add(this.wrapper).off(".objectStream");q(".sapUshellEasyScanLayout").removeClass("bluredLayout");this._oPopup=undefined;};
c.prototype._mouseEnter=function(e){var d='right';if((e.target==e.data.jqRightEdge.get(0))||(e.currentTarget==e.data.jqRightEdge.get(0))){d=sap.ui.getCore().getConfiguration().getRTL()?'left':'right';}if((e.target==e.data.jqLeftEdge.get(0))||(e.currentTarget==e.data.jqLeftEdge.get(0))){d=sap.ui.getCore().getConfiguration().getRTL()?'right':'left';}e.data._startScroll(d);};
c.prototype._checkEdgesVisibility=function(){var d=this.wrapper.scrollLeft;var l=this.wrapper.scrollWidth-this.wrapper.offsetWidth-this.wrapper.scrollLeft;var e=(d==0)?0:1;var r=(l==0)?0:1;if(sap.ui.getCore().getConfiguration().getRTL()&&this.scrollReverse){this.jqLeftEdge.css("opacity",r);this.jqRightEdge.css("opacity",e);this.jqRightEdge.css("z-index",(e===0)?0:1);}else{this.jqLeftEdge.css("opacity",e);this.jqRightEdge.css("opacity",r);this.jqRightEdge.css("z-index",(r===0)?0:1);}};
c.prototype._createPopup=function(){this._oPopup=new a({showHeader:false,afterOpen:this._afterOpen.bind(this),beforeClose:this._beforeClose.bind(this),content:[this],stretch:D.system.phone}).removeStyleClass("sapUiPopupWithPadding").addStyleClass("sapOvpStackedCardPopup");this._oPopup.oPopup.setModal(false);};
c.prototype.open=function(d,e){if(!this._oPopup){this._createPopup();}this._cardWidth=d;_=e;this.setCardsSize(this._cardWidth);this._oPopup.open();};
c.prototype.onBeforeRendering=function(){var o=this.getBinding("content");var p=this.getPlaceHolder();if(o&&o.getLength()<=20){this.setPlaceHolder(null);if(p){p.destroy();}}};
c.prototype.onAfterRendering=function(){if(!this._oPopup||!this._oPopup.isOpen()||!this.getContent().length){return;}setTimeout(function(){this._initScrollVariables();}.bind(this));};
c.prototype.exit=function(){if(this._oPopup){this._oPopup.destroy();}if(this.jqBackground){this.jqBackground.remove();}this._closeIcon.destroy();if(this._oScroller){this._oScroller.destroy();this._oScroller=null;}};
c.prototype.setCardsSize=function(d){var r=parseInt(window.getComputedStyle(document.documentElement).fontSize,10);var e=D.system.phone?document.body.clientHeight/r-4.5:28.75;var f=this.getContent();f.map(function(o){o.setWidth(d+"px");o.setHeight(e+"rem");});var p=this.getPlaceHolder();if(p){p.setWidth(d+"px");p.setHeight(e+"rem");}};
c.prototype.getNewContentAvailable=function(){return this.onRefreshNewContent;};
c.prototype.setNewContentAvailable=function(v){this.onRefreshNewContent=v;};
c.prototype.updateContent=function(r){var B=this.mBindingInfos["content"],o=B.binding,d=o.getContexts(B.startIndex,B.length);if(r==="change"){var f=B.factory,i=0,e=this.getContent(),g=function(j){var k=this.getId()+"-"+u(),l=f(k,j);l.setBindingContext(j,B.model);this.addContent(l);};var h=g.bind(this);if(e.length<d.length){for(i=0;i<e.length;++i){e[i].destroy();}e.length=0;this.setNewContentAvailable(true);for(i=0;i<d.length;i++){h(d[i]);}}if(!this.getNewContentAvailable()){for(i=0;i<d.length;++i){e[i].setBindingContext(d[i],B.model);}}if(e.length>=d.length){for(i=0;i<e.length;++i){e[i].destroy();}e.length=d.length;this.setNewContentAvailable(true);for(i=0;i<d.length;i++){h(d[i]);}}}};
return c;});
sap.ui.require.preload({
	"sap/ovp/app/CardContainer.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:sap.ui.fl="sap.ui.fl" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:EasyScanLayout id="ovpLayout" dragAndDropRootSelector=".ovpApplication" afterDragEnds="layoutChanged" dragAndDropEnabled="{path:\'ui&gt;\',formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat list="{ui&gt;/cards}" var="card"><core:ComponentContainer id="{card&gt;id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true"/><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;Cards}" writeToDom="true"/></ovp:customData></ovp:EasyScanLayout></core:FragmentDefinition>',
	"sap/ovp/app/DashboardCardContainer.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:sap.ui.fl="sap.ui.fl" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:DashboardLayout id="ovpLayout" dragAndDropRootSelector=".ovpApplication" afterDragEnds="layoutChanged" dragAndDropEnabled="{path:\'ui&gt;\',formatter:\'.isDragAndDropEnabled\'}"><ovp:content><template:repeat list="{ui&gt;/cards}" var="card"><core:ComponentContainer id="{card&gt;id}"/></template:repeat></ovp:content><ovp:customData><ovp:CustomData key="role" value="region" writeToDom="true"/><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;Cards}" writeToDom="true"/></ovp:customData></ovp:DashboardLayout></core:FragmentDefinition>',
	"sap/ovp/app/Error.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"><MessagePage icon="sap-icon://message-error" text="{ovplibResourceBundle&gt;LOAD_DATA_ERROR_PAGE}" description="{ovplibResourceBundle&gt;LOAD_DATA_ERROR_CONTENT}" showHeader="false"/></mvc:View>',
	"sap/ovp/app/HeaderCommands.fragment.xml":'<core:FragmentDefinition xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:core="sap.ui.core"><core:CommandExecution execute="onShareButtonPress" command="Share"/><core:CommandExecution execute="onGlobalFilterSearch" command="Search"/></core:FragmentDefinition>',
	"sap/ovp/app/Main.view.xml":'<mvc:View controllerName="sap.ovp.app.Main" xmlns="sap.m" xmlns:variants="sap.ui.comp.smartvariants" xmlns:core="sap.ui.core" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:mvc="sap.ui.core.mvc" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build" xmlns:f="sap.f" xmlns:v="sap.ui.fl.variants" xmlns:macros="sap.fe.macros"><MessagePage id="ovpErrorPage" icon="sap-icon://message-error" text="{ovplibResourceBundle&gt;LOAD_DATA_ERROR_HEADER}" description="{ovplibResourceBundle&gt;LOAD_DATA_ERROR_CONTENT}" showHeader="false" visible="false"/><ovp:OVPWrapper id="ovpWrapper"><f:DynamicPage id="ovpMain" class="ovpApplication" preserveHeaderStateOnScroll="false" headerExpanded="{ui&gt;/bHeaderExpanded}"><f:dependents><core:Fragment fragmentName="sap.ovp.app.HeaderCommands" type="XML"/></f:dependents><template:if test="{= !${ui&gt;/globalFilterEntityType} &amp;&amp; !${ui&gt;/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui&gt;/description} ? false : true}"><f:title><f:DynamicPageTitle id="ovpMainPageTitle" areaShrinkRatio="0:1.6:1.6"><f:heading><HBox class="ovpDescription"><template:if test="{= ${ui&gt;/useMacroFilterBar} === false &amp;&amp; !${ui&gt;/smartVariantRequired}}"><template:then><Title text="{parts:[{path:\'ui&gt;/subTitleIfVariantMgmtHidden\'},{path:\'ui&gt;/description\'},{path:\'ui&gt;/title\'}],formatter:\'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui&gt;/useMacroFilterBar} === false &amp;&amp; ${ui&gt;/smartVariantRequired} === true || (!${ui&gt;/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui&gt;/description} &amp;&amp; !${ui&gt;/title})}"><variants:SmartVariantManagement id="ovpPageVariant" persistencyKey="ovpGlobalFilter" visible="{= ${ui&gt;/globalFilterEntityType} ? true : false}" showShare="true" showExecuteOnSelection="true" displayTextForExecuteOnSelectionForStandardVariant="{= (${ui&gt;/dataLoadSettings/loadDataOnAppLaunch} === \'ifAnyFilterExist\' || ${ui&gt;/dataLoadSettings/loadDataOnAppLaunch} === undefined) ? \'{ovplibResourceBundle&gt;ST_LIST_DISPLAY_TEXT_FOR_EXECUTE_ON_SELECTION}\' : undefined}"/></template:if><template:if test="{= ${ui&gt;/useMacroFilterBar} === true &amp;&amp; !${ui&gt;/smartVariantRequired}}"><template:then><Title text="{parts:[{path:\'ui&gt;/subTitleIfVariantMgmtHidden\'},{path:\'ui&gt;/description\'},{path:\'ui&gt;/title\'}],formatter:\'.setTitle\'}"/></template:then></template:if><template:if test="{= ${ui&gt;/useMacroFilterBar} === true &amp;&amp; ${ui&gt;/smartVariantRequired} === true || (!${ui&gt;/subTitleIfVariantMgmtHidden} &amp;&amp; !${ui&gt;/description} &amp;&amp; !${ui&gt;/title})}"><v:VariantManagement id="ovpGlobalMacroFilterVariantMGMT" for="ovpGlobalMacroFilter"/></template:if></HBox></f:heading><f:actions><ToolbarSpacer/><core:ExtensionPoint name="SmartFilterBarGlobalActionExtension"/><OverflowToolbarButton id="sapOvpShareButton" type="Transparent" icon="sap-icon://action" visible="{= (${ui&gt;/globalFilterEntityType} &amp;&amp; ${ui&gt;/smartVariantRequired})}" press="cmd:Share" tooltip="{ovplibResourceBundle&gt;shareBtn}"><layoutData><OverflowToolbarLayoutData closeOverflowOnInteraction="false"/></layoutData></OverflowToolbarButton></f:actions><f:snappedContent><Text id="ovpFilterText"/></f:snappedContent></f:DynamicPageTitle></f:title></template:if><template:if test="{ui&gt;/globalFilterEntityType}"><f:header><f:DynamicPageHeader id="ovpPageHeader" pinnable="true"><template:if test="{= ${ui&gt;/useMacroFilterBar} === false }"><template:then><f:content><template:if test="{= ${ui&gt;/smartVariantRequired} === true || !${ui&gt;/description}}"><template:then><core:Fragment fragmentName="sap.ovp.app.SmartFilterBarWithVariant" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.app.SmarFilterBarWithoutVariant" type="XML"/></template:else></template:if></f:content></template:then></template:if><template:if test="{= ${ui&gt;/useMacroFilterBar} === true }"><f:content><template:with path="ui&gt;allControlConfiguration" var="selectionField"><macros:FilterBar id="ovpGlobalMacroFilter" metaPath="{selectionField&gt;}" search=".onMacroFilterBarSearch"/></template:with></f:content></template:if></f:DynamicPageHeader></f:header></template:if><f:content><VBox><VBox id="ovpFilterNotFulfilledPage" visible="false" fitContainer="true" alignItems="Center" justifyContent="Center" height="300px"><Text text="{ovplibResourceBundle&gt;FILTER_NOT_FULFILLED_CONTENT}"/></VBox><VBox id="ovpCardPage" visible="true"><core:Fragment fragmentName="{ui&gt;/cardContainerFragment}" type="XML"/></VBox></VBox></f:content></f:DynamicPage></ovp:OVPWrapper></mvc:View>',
	"sap/ovp/app/ManageCard.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"><Dialog id="manageCardsDialog" class="sapOVPCardsVisibilityDialog" title="{ovplibResourceBundle&gt;hideCardsBtn_title}" contentWidth="29.6rem" contentHeight="50%" afterOpen="afterManageCardsDialogOpen" afterClose="afterManageCardsDialogClose"><content><Table id="sapOVPHideCardsTable" backgroundDesign="Transparent" showSeparators="Inner" updateFinished="onAfterManageCardsTableUpdated" items="{path:\'/cards\'}"><columns><Column vAlign="Middle"/><Column hAlign="Right" vAlign="Middle" width="4.94rem"/></columns><items><ColumnListItem><cells><Text text="{path:\'id\',formatter:\'.cardTitleFormatter\'}"/><Switch state="{visibility}" customTextOff=" " customTextOn=" " tooltip="{ovplibResourceBundle&gt;hideCards_switchTooltip}" change="onCardVisibilityChange"/></cells></ColumnListItem></items></Table></content><buttons><Button id="manageCardsOkBtn" text="{ovplibResourceBundle&gt;okBtn}" type="Emphasized" press="onManageCardOkButtonPressed"/><Button id="manageCardsResetBtn" text="{ovplibResourceBundle&gt;resetBtn}" press="onManageCardResetButtonPressed"/><Button id="manageCardsCancelBtn" text="{ovplibResourceBundle&gt;cancelBtn}" type="Transparent" press="onManagecardCancelButtonPressed"/></buttons></Dialog></core:FragmentDefinition>',
	"sap/ovp/app/SharePage.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:footerbar="sap.ushell.ui.footerbar"><ActionSheet id="template::ShareSheet" placement="VerticalPreferedBottom"><buttons><Button id="ShareEmailButton" icon="sap-icon://email" press="shareEmailPressed" text="{ovplibResourceBundle&gt;Email_Text}"/><footerbar:AddBookmarkButton id="BookmarkButton" title="{ui&gt;/tileInfo/tileTitle}" tileIcon="sap-icon://bookmark" customUrl="{ui&gt;/tileInfo/tileCustomURL}"/><Button id="shareJamButton" icon="sap-icon://share-2" press="shareJamPressed" text="{ovplibResourceBundle&gt;share_jam}" class="sapMFlexBox" visible="{ui&gt;/jamVisible}"/></buttons></ActionSheet></core:FragmentDefinition>',
	"sap/ovp/app/SmarFilterBarWithoutVariant.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar id="ovpGlobalFilter" entitySet="{ui&gt;/globalFilterEntitySet}" entityType="{ui&gt;/globalFilterEntityType}" filterBarExpanded="false" assignedFiltersChanged="onAssignedFiltersChanged" useToolbar="false" showMessages="false" liveMode="{ui&gt;/enableLiveFilter}" enableBasicSearch="{ui&gt;/showBasicSearch}" considerAnalyticalParameters="{ui&gt;/considerAnalyticalParameters}" search="cmd:Search" useDateRangeType="{ui&gt;/useDateRangeType}"><template:if test="{meta&gt;}"><smartFilterBar:controlConfiguration><template:with path="ui&gt;allControlConfiguration" var="selectionField"><template:repeat list="{selectionField&gt;}"><template:if test="{parts:[{path:\'selectionField&gt;PropertyPath\'},{path:\'ui&gt;datePropertiesSettings\'}],formatter:\'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration key="{= (${selectionField&gt;PropertyPath}).replace(\'/\', \'.\').trim() }" groupId="{path:\'selectionField&gt;bNotPartOfSelectionField\',formatter:\'sap.ovp.cards.AnnotationHelper.getGroupID\'}" conditionType="{parts:[{path:\'selectionField&gt;PropertyPath\'},{path:\'ui&gt;datePropertiesSettings\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}"/></template:then><template:else><smartFilterBar:ControlConfiguration key="{= (${selectionField&gt;PropertyPath}).replace(\'/\', \'.\').trim() }" groupId="_BASIC"/></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui&gt;globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui&gt;globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value="\\{&quot;UTC&quot;:true,&quot;style&quot;:&quot;medium&quot;\\}"/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/SmartFilterBarWithVariant.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:smartFilterBar="sap.ui.comp.smartfilterbar" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><smartFilterBar:SmartFilterBar id="ovpGlobalFilter" entitySet="{ui&gt;/globalFilterEntitySet}" entityType="{ui&gt;/globalFilterEntityType}" persistencyKey="ovpGlobalFilter" filterBarExpanded="true" showMessages="false" beforeVariantSave="onBeforeSFBVariantSave" afterVariantLoad="onAfterSFBVariantLoad" assignedFiltersChanged="onAssignedFiltersChanged" useToolbar="false" smartVariant="ovpPageVariant" useDateRangeType="{ui&gt;/useDateRangeType}" liveMode="{ui&gt;/enableLiveFilter}" enableBasicSearch="{ui&gt;/showBasicSearch}" search="cmd:Search" considerAnalyticalParameters="{ui&gt;/considerAnalyticalParameters}"><template:if test="{meta&gt;}"><smartFilterBar:controlConfiguration><template:with path="ui&gt;allControlConfiguration" var="selectionField"><template:repeat list="{selectionField&gt;}"><template:if test="{parts:[{path:\'selectionField&gt;PropertyPath\'},{path:\'ui&gt;datePropertiesSettings\'}],formatter:\'sap.ovp.cards.AnnotationHelper.isDateRangeType\'}"><template:then><smartFilterBar:ControlConfiguration key="{= (${selectionField&gt;PropertyPath}).replace(\'/\', \'.\').trim() }" groupId="{path:\'selectionField&gt;bNotPartOfSelectionField\',formatter:\'sap.ovp.cards.AnnotationHelper.getGroupID\'}" conditionType="{parts:[{path:\'selectionField&gt;PropertyPath\'},{path:\'ui&gt;datePropertiesSettings\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getConditionTypeForDateProperties\'}"/></template:then><template:else><smartFilterBar:ControlConfiguration key="{= (${selectionField&gt;PropertyPath}).replace(\'/\', \'.\').trim() }" groupId="_BASIC"/></template:else></template:if></template:repeat></template:with><template:if test="{= ${ui&gt;globalFilterEntitySet}}"><template:then><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntitySet}"/></template:then><template:elseif test="{= ${ui&gt;globalFilterEntityType}}"><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntityTypeNQ}"/><core:ExtensionPoint name="SmartFilterBarControlConfigurationExtension|{ui&gt;globalFilterEntityType}"/></template:elseif></template:if></smartFilterBar:controlConfiguration></template:if><smartFilterBar:customData><core:CustomData key="dateFormatSettings" value="\\{&quot;UTC&quot;:true,&quot;style&quot;:&quot;medium&quot;\\}"/></smartFilterBar:customData></smartFilterBar:SmartFilterBar></core:FragmentDefinition>',
	"sap/ovp/app/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","id":"sap.ovp.app","type":"application","i18n":{"bundleUrl":"../messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"applicationVersion":{"version":"1.96.0"},"title":"{{TITLE}}","description":"{{DESCRIPTION}}","tags":{"keywords":["{{TITLE}}"]},"ach":"CA-UI5-ST-OVP","embeddedBy":"../","offline":false,"resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.ui5service.ShellUIService"}},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.ui.comp":{"minVersion":"1.30.1"},"sap.ui.generic.app":{"minVersion":"1.30.1"},"sap.ui.layout":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.rta":{"minVersion":"1.30.1"},"sap.f":{"minVersion":"1.41.0"},"sap.suite.ui.microchart":{"minVersion":"1.41.0"},"sap.viz":{"minVersion":"1.41.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"../messagebundle.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}},"commands":{"Share":{"name":"Share","shortcut":"Shift+Ctrl+S"},"Search":{"name":"Search","shortcut":"Enter"}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ovp/cards/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:suite="sap.suite.ui.commons" xmlns:viz="sap.viz.ui5.controls" xmlns:dataSet="sap.viz.ui5.data" xmlns:feed="sap.viz.ui5.controls.common.feeds" xmlns:ovp="sap.ovp.ui" xmlns:charts="sap.ovp.cards.charts"><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;analyticalCardType}" writeToDom="true"/></customData><template:with path="ovpCardProperties&gt;/chartAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="chart"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="selVar"><template:with path="ovpCardProperties&gt;/presentationAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="preVar"><template:if test="{chart&gt;}"><HBox class="ovpChartTitleHBox"><items><VBox class="ovpChartTitleText"><Text id="ovpCT" class="ovpChartTitle" maxLines="1" text="{path:\'chart&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{path:\'chart&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/></template:if></customData></Text></VBox><VBox class="ovpChartTitleScaleText"><Text id="ovpUoMTitle" class="ovpChartTitle" maxLines="1"><customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="" writeToDom="true"/></template:if></customData></Text></VBox></items></HBox><template:if test="{path:\'chart&gt;DimensionAttributes\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart&gt;MeasureAttributes\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart&gt;ChartType}"><template:if test="{preVar&gt;MaxItems}"><template:then><charts:OVPVizDataHandler chartType="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}" entitySet="{path:\'entitySet&gt;\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\'}" data="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;DimensionAttributes\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}" aggregateData="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;undefined\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element/></charts:data><charts:aggregateData><core:Element/></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz" uiConfig="{applicationSet:\'fiori\'}" vizType="{parts:[{path:\'chart&gt;ChartType\'},{path:\'chart&gt;DimensionAttributes\'}],formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}" width="100%"><viz:customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{path:\'chart&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel&gt;/}"/></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler chartType="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}" entitySet="{path:\'entitySet&gt;\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getEntitySet\'}" data="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;DimensionAttributes\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element/></charts:data><charts:aggregateData><core:Element/></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz" uiConfig="{applicationSet:\'fiori\'}" vizType="{parts:[{path:\'chart&gt;ChartType\'},{path:\'chart&gt;DimensionAttributes\'}],formatter:\'sap.ovp.cards.charts.VizAnnotationManager.getChartType\'}" width="100%"><viz:customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{path:\'chart&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel&gt;/}"/></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with path="ovpCardProperties&gt;/chartAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="chart"><template:if test="{chart&gt;}"><template:if test="{chart&gt;ChartType}"><template:if test="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.charts.VizAnnotationManager.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/charts/generic/noData.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns="sap.m"><FlexBox alignItems="Center" justifyContent="SpaceAround" class="noDataSection"><Text maxLines="1" text="{ovplibResourceBundle&gt;noData}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;noData}" writeToDom="true"/><ovp:CustomData key="tabindex" value="0" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/error/Error.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessagePage id="sapOvpErrorCard" icon="{ovpCardProperties&gt;/sMessageIcon}" text="{ovpCardProperties&gt;/errorStatusText}" description="" class="{= ${ovpCardProperties&gt;/oldTemplate} === \'sap.ovp.cards.stack\' ? \'stackContentOfError\' : \'contentOfError\' }" showHeader="false"/></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Action.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||                            ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||                            ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button text="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onActionPress" type="Transparent"><layoutData><OverflowToolbarLayoutData moveToOverflow="true" stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField&gt;RecordType}"/><template:if test="{= ${dataField&gt;SemanticObject}}"><core:CustomData key="semanticObject" value="{path:\'dataField&gt;SemanticObject\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField&gt;Url}}"><core:CustomData key="url" value="{path:\'dataField&gt;Url\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField&gt;Action}}"><core:CustomData key="action" value="{path:\'dataField&gt;Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></template:if><core:CustomData key="label" value="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/identificationAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="identification"><template:if test="{path:\'identification&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="toolbar" writeToDom="true"/></customData><ToolbarSpacer/><template:repeat list="{path:\'identification&gt;\',filters:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'High\'},{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'Medium\'}],sorter:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]}" var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat list="{path:\'identification&gt;\',filters:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'Low\'}]}" var="dataField"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:repeat><template:repeat list="{path:\'identification&gt;\'}" var="dataField"><template:if test="{=  !${dataField&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Card.view.xml":'<mvc:View controllerName="{ovpCardProperties&gt;/controllerName}" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"/><FlexBox width="100%" justifyContent="End" class="sapOvpNewBadgeWrapper" visible="{= ${ovpCardProperties&gt;/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle&gt;OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox width="100%" justifyContent="End" class="sapOvpNewBadgeWrapper" visible="{= ${ovpCardProperties&gt;/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle&gt;OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties&gt;/contentPosition} === \'Right\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device&gt;/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"/></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"/></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"/></mvc:View>',
	"sap/ovp/cards/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage header="{ovplibResourceBundle&gt;CONTACT_INFO}" icon="{= ${contact&gt;photo} ? ${path: \'contact&gt;photo\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'sap-icon://person-placeholder\'}" title="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" description="{path:\'contact&gt;role\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><QuickViewGroup><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_JOB_TITLE}" type="text" value="{path:\'contact&gt;title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" visible="{= !!${contact&gt;title}}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_DEPARTMENT}" type="text" value="{path:\'contact&gt;org\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" visible="{= !!${contact&gt;org}}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_EMAIL}" type="email" value="{path:\'contact&gt;email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')&gt;=0]/address\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" visible="{= !!${path: \'contact&gt;email/[${type/EnumMember}.indexOf(\\\'ContactInformationType/work\\\')&gt;=0]/address\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} }"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_PHONE}" type="phone" value="{= ${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')&gt;=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }" visible="{= !!${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/work\\\')&gt;=0]/uri\'} }"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_MOBILE}" type="{= (${device&gt;/system/phone} || ${device&gt;/system/tablet})  ? \'mobile\'  : \'phone\' }" value="{= ${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')&gt;=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }" visible="{= !!${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/cell\\\')&gt;=0]/uri\'} }"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_FAX}" type="text" value="{= ${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')&gt;=0]/uri\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}.replace(\'tel:\',\'\') }" visible="{= !!${path: \'contact&gt;tel/[${type/EnumMember}.indexOf(\\\'PhoneType/fax\\\')&gt;=0]/uri\'} }"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition controllerName="sap.ovp.cards.generic.Card" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties&gt;/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer id="ovpCardContentContainer" class="{= ${ovpCardProperties&gt;/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties&gt;/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\' || !${ovpCardProperties&gt;/reason} || ${ovpCardProperties&gt;/state} === \'undefined\'}"><template:if test="{ovpCardProperties&gt;/tabs}"><Toolbar id="toolbar" class="sapOvpDropDown {= ${ovpCardProperties&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle&gt;OVP_CARD_DROP_DOWN_LABEL}"/><Select id="ovp_card_dropdown" selectedKey="1" change="changeSelection"><template:repeat list="{ovpCardProperties&gt;/tabs}" var="tab"><core:Item id="{parts:[{path:\'ovpCardProperties&gt;/tabs\'},{path:\'tab&gt;\'}],formatter:\'sap.ovp.cards.CommonUtils.createKeyForCB\'}" key="{parts:[{path:\'ovpCardProperties&gt;/tabs\'},{path:\'tab&gt;\'}],formatter:\'sap.ovp.cards.CommonUtils.createKeyForCB\'}" text="{tab&gt;value}"/></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties&gt;/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties&gt;/layoutDetail} !== \'resizable\' || ${ovpCardProperties&gt;/state} === \'Loading\' || ${ovpCardProperties&gt;/reason}}"><template:if test="{ovpCardProperties&gt;/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/ContentRight.fragment.xml":'<core:FragmentDefinition controllerName="sap.ovp.cards.generic.Card" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class="cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties&gt;/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountFooter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/generic/CountHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui"><FlexBox class="sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Header.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox id="ovpCardHeader" class="{= ${ovpCardProperties&gt;/category} || ${ovpCardProperties&gt;/title} || ${ovpCardProperties&gt;/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } {= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'}"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with path="entityType&gt;com.sap.vocabularies.UI.v1.HeaderInfo" var="header"><Text id="ovpQuickviewCardHeader" text="{= ${ovpCardProperties&gt;/title} + \': \' + ${path: \'header&gt;Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData key="aria-label" value="{= ${ovpCardProperties&gt;/title} + \': \' + ${path: \'header&gt;Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties&gt;/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text id="ViewAll" text="{ovplibResourceBundle&gt;View_All_Stack_Card}" class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;View_All_Stack_Card}" writeToDom="true"/></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="selVar"><template:with path="ovpCardProperties&gt;/presentationAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="preVar"><template:if test="{dataPoint&gt;}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint&gt;Value/Path}"><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" id="kpiHBoxNumeric" class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber"><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent id="kpiNumberValue" size="M" truncateValueTo="8" indicator="{parts:[{path:\'dataPoint&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formThePathForTrendIcon\'}" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formThePathForAggregateNumber\'}" formatterValue="true" valueColor="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}" state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass" press="press" withMargin="false"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatKPIHeaderState\'}" writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id="ovpKpiTarget" text="{ovplibResourceBundle&gt;KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;KPI_Target_Text}" writeToDom="true"/></customData></Text><Text id="ovpTargetValue" text="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}" class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formPathForTargetValue\'}" writeToDom="true"/></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text id="ovpKPIDeviation" text="{ovplibResourceBundle&gt;KPI_Deviation_Text}" class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;KPI_Deviation_Text}" writeToDom="true"/></customData></Text><Text id="kpiNumberPercentage" text="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}" class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formPathForPercentageChange\'}" writeToDom="true"/></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint&gt;Value/Path}"><template:if test="{ovpCardProperties&gt;/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text id="ovpValueSelectionInfo" maxLines="1" text="{ovpCardProperties&gt;/valueSelectionInfo}" class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/valueSelectionInfo}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if test="{= (${ovpCardProperties&gt;/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox alignItems="Start" justifyContent="SpaceBetween" class="KpiPreVarFlex" visible="{ovpCardProperties&gt;/showSortingInHeader}"><Text id="headerGroupByText" maxLines="1" text="{path:\'preVar&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}" class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'preVar&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.listGroupBy\'}" writeToDom="true"/></customData></Text></FlexBox></template:if><template:if test="{= (${ovpCardProperties&gt;/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar&gt;\'}, {path:\'selVar&gt;\'}], formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties&gt;/ignoreSelectionVariant} === true}"><template:then><FlexBox alignItems="Start" justifyContent="flex-start" class="KpiSelVarFlex" visible="{ovpCardProperties&gt;/showFilterInHeader}"><template:repeat list="{path:\'selVar&gt;SelectOptions\'}" var="selectionVar"><Text id="{path:\'selectionVar&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilter\'}" text="{parts:[{path:\'selectionVar&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{parts:[{path:\'selectionVar&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByString\'}" writeToDom="true"/></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox alignItems="Start" justifyContent="flex-start" class="KpiSelVarFlex" visible="{ovpCardProperties&gt;/showFilterInHeader}"><template:repeat list="{path:\'ovpCardProperties&gt;/idForExternalFilters\'}" var="selectionVar"><Text id="{path:\'selectionVar&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" text="{parts:[{path:\'selectionVar&gt;\'},{path:\'ovpCardProperties&gt;/filters\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{parts:[{path:\'selectionVar&gt;\'},{path:\'ovpCardProperties&gt;/filters\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" writeToDom="true"/></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;quickViewCard}" writeToDom="true"/></customData><template:with path="entityType&gt;com.sap.vocabularies.UI.v1.HeaderInfo" var="header"><template:with path="entityType&gt;com.sap.vocabularies.UI.v1.Facets" var="facets"><QuickViewPage header="{= ${header&gt;TypeNamePlural} ? ${path: \'header&gt;TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'{ovplibResourceBundle&gt;LineItem_Detail_Text}\' }" icon="{= ${header&gt;ImageUrl} ? ${path: \'header&gt;ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header&gt;TypeImageUrl} ? ${path: \'header&gt;TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }" title="{= ${header&gt;Title/Value} ? ${path: \'header&gt;Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }" description="{= ${header&gt;Description/Value} ? ${path: \'header&gt;Description/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }"><template:repeat list="{path:\'facets&gt;\'}" var="referenceFacet"><template:if test="{referenceFacet&gt;com.sap.vocabularies.UI.v1.IsSummary}"><template:with path="referenceFacet&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="target"><QuickViewGroup heading="{path:\'target&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat list="{path:\'target&gt;Data\'}" var="dataField"><template:if test="{dataField&gt;Url}"><template:then><template:if test="{dataField&gt;Url/UrlRef}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" url="{path:\'dataField&gt;Url/UrlRef\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="link"/></template:then><template:else><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" url="{path:\'dataField&gt;Url\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="link"/></template:else></template:if></template:then><template:else><template:if test="{dataField&gt;Value}"><template:with path="dataField&gt;Value" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="fValue"><template:if test="{= ${fValue&gt;sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" url="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="url"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="email"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement label="{path: \'dataFie\\ld&gt;Label\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="phone"/></template:then><template:else><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/generic/SubTitle.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\'}"><template:if test="{ovpCardProperties&gt;/dynamicSubtitleAnnotationPath}"><template:then><template:with path="ovpCardProperties&gt;/dynamicSubtitleAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="headerInfo"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="selVar"><template:if test="{headerInfo&gt;Description}"><HBox><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'headerInfo&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="ovpDescriptionValue" maxLines="2" text="{path:\'headerInfo&gt;Description/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{path:\'headerInfo&gt;Description/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties&gt;/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="SubTitle-Text" maxLines="2" text="{ovpCardProperties&gt;/subTitle}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/subTitle}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties&gt;/dataPointAnnotationPath}"><template:then><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="selVar"><template:if test="{dataPoint&gt;Description}"><HBox><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="ovpDescriptionValue" maxLines="2" text="{path:\'dataPoint&gt;Description\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;Description\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"/></template:else></template:if></template:else></template:if></template:else></template:if></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/generic/Title.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties&gt;/title} || {ovpCardProperties&gt;/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties&gt;/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text id="ovpHeaderTitle" maxLines="3" text="{ovpCardProperties&gt;/title}" class="sapOvpCardTitle tabindex-1" build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/title}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties&gt;/dataPointAnnotationPath}}"><template:then><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:if test="{dataPoint&gt;Title}"><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAggregateNumber\'}" class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text id="ovpHeaderTitleFromKPI" maxLines="3" text="{path:\'dataPoint&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" class="sapOvpCardTitle tabindex-1" build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;Title\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.list.List\' || ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.table.Table\'}"><template:if test="{ovpCardProperties&gt;/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/LinkList.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns="sap.m"><template:if test="{ovpCardProperties&gt;/staticContent}"><template:then><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties&gt;/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/headerAnnotationPath" var="header"><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties&gt;/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m"><Carousel id="pictureCarousel" loop="true" class="sapOvpCardLinkListCarousel cardType" arrowsPlacement="PageIndicator" pages="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListCarouselType}" writeToDom="true"/></customData><pages><VBox class="sapMCrslItemTableCell"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/identificationAnnotationPath" var="identification"><template:if test="{= ${header&gt;Title/Value} || ${header&gt;Description/Value}}"><VBox class="{= ${header&gt;Title/Value} || ${header&gt;Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link class="sapOvpCardLinkListTitle " press="onLinkNavigationSingleTarget" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:then><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link class="sapOvpCardLinkListTitle" press="onLinkListActionPress" app:dataAction="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><Link class="sapOvpCardLinkListTitle" target="_blank" href="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatString\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link class="sapOvpCardLinkListTitle" press="onLinkPopover" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:if></template:with></template:elseif><template:else><Text class="sapOvpCardLinkListTitle" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><Text class="sapOvpCardLinkListSubTitle" text="{path:\'header&gt;Description\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkNavigationSingleTarget" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkListActionPress" app:dataAction="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkListItemPress" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkPopover" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:if></template:with></template:elseif><template:else><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon width="100%" size="128px" press="onLinkNavigationSingleTarget" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon width="100%" size="128px" press="onLinkListActionPress" app:dataAction="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><core:Icon width="100%" size="128px" press="onLinkListItemPress" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><core:Icon width="100%" size="128px" press="onLinkPopover" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon width="100%" size="128px" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true"/></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle&gt;RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List showSeparators="None" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem/></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListType}" writeToDom="true"/></customData><List id="ovpLinkList" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}" showSeparators="None" items="{parts:[{path:\'entitySet&gt;\'},{path:\'header&gt;\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatItems\'}"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/identificationAnnotationPath" var="identification"><CustomListItem id="ovpCLI" type="Active" press="{= ${path: \'identification&gt;0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'           : ${path: \'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'           : ${path: \'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'           : ${path: \'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'           : \'\'}" app:dataAction="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><HBox class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitleImage\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitleIcon\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'             : ${ovpCardProperties&gt;/densityStyle} === \'compact\' &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitleImage\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitleIcon\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'             : \'ovpDefaultClass\'}             {= ${path: \'identification&gt;0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'             : \'\'} "><template:if test="{= ${header&gt;ImageUrl} || ${header&gt;TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' }"><template:if test="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar id="linkListImage" class="sapUiSmallMarginEnd" displayShape="Circle" displaySize="Custom" customDisplaySize="40px" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" initials="{path:\'header&gt;Initials\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"/></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar id="linkListImage" class="sapUiSmallMarginEnd" displayShape="Circle" displaySize="Custom" customDisplaySize="36px" src="{path:\'header&gt;ImageUrl\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" initials="{path:\'header&gt;Initials\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getAvatarInitials\'}"/></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon id="linkListIcon" size="24px" class="sapOvpLinkListImageCenter" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem"><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" app:dataAction="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" target="_blank" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path:\'entityType&gt;com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header&gt;Description/Value}"><template:then><Label id="linkListSubTitleLabel" class="sapOvpCardLinkListSubTitle" text="{path:\'header&gt;Description\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m"><VBox><Carousel id="pictureCarousel" loop="true" class="sapOvpCardLinkListCarousel cardType" arrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListCarouselType}" writeToDom="true"/></customData><pages><template:repeat list="{ovpCardProperties&gt;/staticContent}" var="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow&gt;title} || ${contentRow&gt;subTitle}}"><VBox class="{= ${contentRow&gt;title} || ${contentRow&gt;subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow&gt;dataAction}"><template:then><Link id="linkListTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListTitle" text="{contentRow&gt;title}" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:then><template:else><Link id="linkListTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListTitle" text="{contentRow&gt;title}" press="onLinkListItemPressLocalData" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:else></template:if><Text id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;subTitle}" writeToDom="true"/><ovp:CustomData key="role" value="text" writeToDom="true"/></customData></Text></VBox></template:if><template:if test="{contentRow&gt;dataAction}"><template:then><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="linkListImage--{contentRow&gt;id}" alt="{contentRow&gt;imageAltText}" tooltip="{contentRow&gt;toolTip}" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}" densityAware="true" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"/></HBox></template:then><template:else><core:Icon id="linkListIcon--{contentRow&gt;id}" size="128px" src="{contentRow&gt;imageUri}" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="linkListImage--{contentRow&gt;id}" alt="{contentRow&gt;imageAltText}" tooltip="{contentRow&gt;toolTip}" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}" densityAware="true" press="onLinkListItemPressLocalData" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"/></HBox></template:then><template:else><core:Icon id="linkListIcon--{contentRow&gt;id}" size="128px" src="{contentRow&gt;imageUri}" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" press="onLinkListItemPressLocalData" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true"/></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:smartlink="sap.ui.comp.navpopover" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List id="ovpLinkList" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType" showSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListType}" writeToDom="true"/></customData><items><template:repeat list="{ovpCardProperties&gt;/staticContent}" var="contentRow"><CustomListItem id="{contentRow&gt;id}" type="Active" press="{= ${contentRow&gt;semanticObject} &amp;&amp; ${contentRow&gt;action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow&gt;dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow&gt;semanticObject} &amp;&amp; !${contentRow&gt;action} ? \'\' : \'onLinkListItemPressLocalData\'}" app:targetUri="{= ${contentRow&gt;targetUri} ? ${contentRow&gt;targetUri} : \'\'}" app:openInNewWindow="{=${contentRow&gt;openInNewWindow} ? ${contentRow&gt;openInNewWindow} :\'\' }" app:dataAction="{= ${contentRow&gt;dataAction} ? ${contentRow&gt;dataAction} : \'\'}" app:contentRowIndex="{path:\'contentRow&gt;\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.contentRowIndex\'}"><HBox class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleImage\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleIcon\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'                             : ${ovpCardProperties&gt;/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleImage\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleIcon\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'                             : \'ovpDefaultClass\'}"><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' }"><template:if test="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar id="linkListImage--{contentRow&gt;id}" class="sapUiSmallMarginEnd" tooltip="{contentRow&gt;toolTip}" displayShape="Circle" displaySize="Custom" customDisplaySize="40px" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"/></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar id="linkListImage--{contentRow&gt;id}" class="sapUiSmallMarginEnd" tooltip="{contentRow&gt;toolTip}" displayShape="Circle" displaySize="Custom" customDisplaySize="36px" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.linklist.AnnotationHelper.formatUrl\'}"/></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow&gt;imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="40px"><core:Icon id="linkListIcon--{contentRow&gt;id}" class="sapOvpLinkListImageCenter" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" size="22px" src="{contentRow&gt;imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow&gt;dataAction}"><template:then><VBox class="sapOvpLinkListItem"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:then><template:elseif test="{= ${contentRow&gt;semanticObject} &amp;&amp; ${contentRow&gt;action} }"><VBox class="sapOvpLinkListItem"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' }"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem id="listItem" type="Active" press="onListItemPress" class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties&gt;/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text id="DataField" class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart id="BarChartDataPoint" class="sapOvpBarListComparisonMicroChartAlignment" width="100%" shrinkable="true" colorPalette="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}" minValue="{minMaxModel&gt;/minValue}" maxValue="{minMaxModel&gt;/maxValue}"><micro:data><micro:ComparisonMicroChartData displayValue=" " value="{= \'{path: \\\'\' + ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }" color="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"/></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}"><template:then><ObjectNumber id="DataPoint1" class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber id="DataPoint1" class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber" textAlign="End" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 1}"><ObjectNumber id="DataPoint2" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem id="listItem" type="Active" press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if test="{= ${ovpCardProperties&gt;/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfFirstDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text id="DataField1" class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.semanticObjectOfSecondDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text id="DataField2" class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart id="BarChartDataPoint" class="sapOvpBarListComparisonMicroChartAlignment" width="100%" height="1rem" colorPalette="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.colorPaletteForComparisonMicroChart\'}" minValue="{minMaxModel&gt;/minValue}" maxValue="{minMaxModel&gt;/maxValue}"><micro:data><micro:ComparisonMicroChartData displayValue=" " value="{= \'{path: \\\'\' + ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }" color="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointColor\'}"/></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" textAlign="Right" press="onContactDetailsLinkPress"/></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 1}"><ObjectNumber id="DataPoint2" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 2}"><ObjectNumber id="DataPoint3" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointPercentageUnit\'}}"><template:then><ObjectNumber id="BarChartValue" class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber id="BarChartStateValue" class="sapOvpBarListObjectNumber valueStateText " textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/list/List.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/imageSupported} &amp;&amp; ${ovpCardProperties&gt;/listType} === \'condensed\' }"><template:then><core:Fragment fragmentName="sap.ovp.cards.list.StandardListImage" type="XML"/></template:then><template:else><List id="ovpList" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatItems\'}" class="listCardType"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="lineItem"><template:if test="{= ${ovpCardProperties&gt;/listType} === \'extended\'}"><template:then><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'bar\'}"><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;barChartCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;listCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'bar\'}"><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;barChartCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;listCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/list/ObjectList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><items><ObjectListItem id="listItem" class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}" numberState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"><attributes><ObjectAttribute id="listItem2Row1Column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fifthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 2}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fifthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/sixthDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/list/StandardList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><items><StandardListItem id="listItem" class="sapOvpStandardListItem" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" description="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" info="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}" infoState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"/></items></core:FragmentDefinition>',
	"sap/ovp/cards/list/StandardListImage.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><List id="ovpList" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatItems\'}"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="lineItem"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;imageListCardType}" writeToDom="true"/></customData><items><StandardListItem id="listItem" class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons" icon="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatImageUrl\'}" iconInset="false" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" description="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}" info="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointOrField\'}" infoState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"/></items></template:with></List></core:FragmentDefinition>',
	"sap/ovp/cards/quickview/Quickview.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewCard id="quickViewCard" class="sapMPanelContent sapOvpCardContent cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;quickViewCard}" writeToDom="true"/></customData><template:with path="entityType&gt;com.sap.vocabularies.UI.v1.HeaderInfo" var="header"><QuickViewPage pageId="quickViewPage" header="{= ${header&gt;TypeNamePlural} ? ${path: \'header&gt;TypeNamePlural\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} :  \'\' }" icon="{= ${header&gt;ImageUrl} ? ${path: \'header&gt;ImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : (${header&gt;TypeImageUrl} ? ${path: \'header&gt;TypeImageUrl\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'} : \'\') }" title="{= ${header&gt;Title} ? ${path: \'header&gt;Title\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }" description="{= ${header&gt;Description} ? ${path: \'header&gt;Description\', formatter: \'sap.ovp.cards.AnnotationHelper.formatField\'} :  \'\' }"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="facets"><template:repeat list="{path:\'facets&gt;\'}" var="referenceFacet"><template:if test="{referenceFacet&gt;com.sap.vocabularies.UI.v1.IsSummary}"><template:with path="referenceFacet&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="target"><QuickViewGroup heading="{path:\'target&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}"><template:repeat list="{path:\'target&gt;Data\'}" var="dataField"><template:if test="{dataField&gt;Url}"><template:then><template:if test="{dataField&gt;Url/UrlRef}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" url="{path:\'dataField&gt;Url/UrlRef\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="link"/></template:then><template:else><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" url="{path:\'dataField&gt;Url\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="link"/></template:else></template:if></template:then><template:else><template:if test="{dataField&gt;Value}"><template:with path="dataField&gt;Value" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="fValue"><template:if test="{= ${fValue&gt;sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" url="{path:\'dataField&gt;Value\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" type="url"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" type="email"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}" type="phone"/></template:then><template:else><QuickViewGroupElement label="{path:\'dataField&gt;Label\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatField\'}"/></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></template:with></QuickViewPage></template:with></QuickViewCard></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AddCustomActions.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomActionsToolbar"><ToolbarSpacer/><Button icon="sap-icon://add" press="addActionRow"/></Toolbar><Table id="sapOvpCustomActions" items="{path:\'/objectStreamCardsSettings/customActions\'}" sticky="ColumnHeaders" inset="false" fixedLayout="false" visible="true"><columns><Column><Text text="Text"/></Column><Column><Text text="Action"/></Column><Column><Text text="Position"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{text}" change="updateCard" required="true"/><Input type="Text" value="{press}" change="updateCard" required="true"/><Input type="Text" value="{position}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onActionDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AddStaticParameters.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Toolbar id="sapOVPCustomParamToolbar"><ToolbarSpacer/><Button icon="sap-icon://add" press="addStaticParameterRow"/></Toolbar><Table id="sapOvpStaticParameters" items="{path:\'/aAllStaticParameters\'}" sticky="ColumnHeaders" inset="false" fixedLayout="false" visible="true"><columns><Column id="1"><Text text="key"/></Column><Column id="2"><Text text="value"/></Column><Column><Text text=""/></Column></columns><items><ColumnListItem><cells><Input type="Text" value="{key}" change="updateCard" required="true"/><Input type="Text" value="{value}" change="updateCard" required="true"/><Button icon="sap-icon://delete" press="onParameterDelete"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/AppSettingsDialog.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout" controllerName="sap.ovp.cards.rta.AppSettingsDialog"><VBox class="sapOvpScrollContainer sapUiLargeMargin"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout labelSpanXL="6" labelSpanL="6" labelSpanM="6" labelSpanS="6" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" singleContainerFullSize="false"/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel&gt;showGlobalFilter}"><f:fields><Switch state="{/showGlobalFilters}" type="Default" change="onChange"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_FILTER_ENTITY_TYPE}" visible="{/showGlobalFilters}"><f:fields><ComboBox items="{path:\'/allEntityTypes\'}" selectedKey="{/globalFilterEntityType}" forceSelection="false" change="onChange"><core:Item key="{name}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_LIVE_FILTER}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/enableLiveFilter}" change="onChange" type="Default"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_SMART_VARIANT}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/smartVariantRequired}" change="onChange" type="Default"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_CONTAINER_LAYOUT}"><f:fields><SegmentedButton selectedKey="{/containerLayout}" select="onChange"><items><SegmentedButtonItem key="fixed" text="fixed"/><SegmentedButtonItem key="resizable" text="resizable"/></items></SegmentedButton></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_DATE_RANGE_TYPE}" visible="{/showGlobalFilters}"><f:fields><Switch state="{/useDateRangeType}" change="onChange" type="Default"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LABEL_DATE_RELATIVE_FORMAT}"><f:fields><Switch state="{/showDateInRelativeFormat}" change="onChange" type="Default"/></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></mvc:View>',
	"sap/ovp/cards/rta/KPICardTable.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m"><Toolbar><Title text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField placeholder="{ovpResourceModel&gt;OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" width="40%" search="onSearch" class="{= ${tableRows&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><Table id="sapOvpKPITable" items="{path:\'/KPIData\',length:5}" sticky="ColumnHeaders" inset="false" fixedLayout="false"><columns><Column id="sapOvpGroupTitle"><Text text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column id="sapOvpKPITitle" minScreenWidth="Tablet" demandPopin="true"><Text text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem press="onItemPress" type="Active"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SelectIcons.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ovp.cards.rta.SelectIcons"><Toolbar><Title text="{ovpResourceModel&gt;OVP_KEYUSER_ICONS_DIALOG}({/NoOfIcons})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField placeholder="{ovpResourceModel&gt;OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" width="40%" search="filterTable" class="{= ${tableRows&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer id="iconsScrollContainer" class="sapOvpScrollContainer" width="100%" horizontal="false" vertical="true" focusable="true"><Table id="IconTable" sticky="ColumnHeaders" inset="false" fixedLayout="false" items="{/Icons}" visible="{= ${/tableName} === \'IconTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_ICON}"/></Column><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_NAME}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><core:Icon src="{Icon}"/><Text text="{Name}"/></cells></ColumnListItem></items></Table><Table id="ImageTable" inset="false" fixedLayout="false" items="{/Images}" visible="{= ${/tableName} === \'ImageTable\' ? true : false}"><columns><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_IMAGE}"/></Column><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_NAME}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Image src="{Image}" width="3rem" height="3rem"/><Text text="{Name}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectKPI.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ovp.cards.rta.SelectKPI"><Toolbar><Title text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_TABLE}({/NoOfKPIItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField placeholder="{ovpResourceModel&gt;OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" width="40%" search="onSearch" class="{= ${tableRows&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer id="KPIItemScrollContainer" class="sapOvpScrollContainer" width="100%" horizontal="false" vertical="true" focusable="true"><Table id="KPITable" sticky="ColumnHeaders" inset="false" fixedLayout="false" items="{/KPIItem}"><columns><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_GROUP_TITLE}"/></Column><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_TITLE}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{GroupTitle}"/><Text text="{KPITitle}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLineItem.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ovp.cards.rta.SelectLineItem"><Toolbar><Title text="{ovpResourceModel&gt;OVP_KEYUSER_LINEITEM_ANNO}({/NoOfLineItem})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField placeholder="{ovpResourceModel&gt;OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" width="40%" search="filterTable" class="{= ${tableRows&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer id="lineItemScrollContainer" class="sapOvpScrollContainer" width="100%" horizontal="false" vertical="true" focusable="true"><Table id="LineItemTable" sticky="ColumnHeaders" inset="false" fixedLayout="false" items="{/lineItem}"><columns><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_LINEITEM_QUAL}"/></Column><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_VISIBLE_FIELDS}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{Label}"/><Text text="{VisibleFields}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SelectLinks.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ovp.cards.rta.SelectLinks"><Toolbar><Title text="{ovpResourceModel&gt;OVP_KEYUSER_APPLICATIONS_DIALOG}({/NoOfLinks})" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><SearchField placeholder="{ovpResourceModel&gt;OVP_KEYUSER_PLACEHOLDER_FOR_SEARCH}" width="40%" search="filterTable" class="{= ${tableRows&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact\' : \'\'}"/></Toolbar><ScrollContainer id="linksScrollContainer" class="sapOvpScrollContainer" width="100%" horizontal="false" vertical="true" focusable="true"><Table id="LinkTable" sticky="ColumnHeaders" inset="false" fixedLayout="false" items="{/links}"><columns><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_APPLICATION_NAME}"/></Column><Column><Label text="{ovpResourceModel&gt;OVP_KEYUSER_TABLE_TITLE_TECHNICAL_NAME}"/></Column></columns><items><ColumnListItem type="Active" press="onItemPress"><cells><Text text="{name}"/><Text text="{value}"/></cells></ColumnListItem></items></Table></ScrollContainer></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialog.view.xml":'<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:l="sap.ui.layout" controllerName="sap.ovp.cards.rta.SettingsDialog"><OverflowToolbar width="100%" visible="{visibility&gt;/viewSwitchEnabled}" class="sapOvpSettingsDialogOverFlowToolbar sapUiSmallMarginTopBottom"><ToolbarSpacer/><Select enabled="{visibility&gt;/showViewSwitch}" items="{path:\'/aViews\'}" selectedKey="{/selectedKey}" change="selectViewSwitch"><core:Item key="{key}" text="{text}"/></Select><Button id="addView" text="{ovpResourceModel&gt;OVP_KEYUSER_ADD_VIEW_BUTTON}" press="addView" type="Transparent"/><Button id="deleteView" enabled="{visibility&gt;/showViewName}" type="Transparent" text="{ovpResourceModel&gt;OVP_KEYUSER_DELETE_VIEW_BUTTON}" press="deleteView"/><ToolbarSpacer/></OverflowToolbar><template:if test="{= ${deviceSystemProperties&gt;/phone}}"><template:then><Carousel><pages><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></l:VerticalLayout><l:VerticalLayout><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></l:VerticalLayout></pages></Carousel></template:then><template:else><ScrollContainer id="SettingsDialogScrollContainerForForm" class="sapOvpScrollContainer" width="100%" height="100%" horizontal="false" vertical="true" focusable="true"><FlexBox id="dialogContainer" direction="{deviceMediaProperties&gt;/deviceMedia}"><template:if test="{= !${ovpCardProperties&gt;/addNewCard}}"><VBox id="dialogCardVBox"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogCardPreview" type="XML"/></VBox></template:if><VBox id="sapOvpSettingsForm"><core:Fragment fragmentName="sap.ovp.cards.rta.SettingsDialogForm" type="XML"/></VBox></FlexBox></ScrollContainer></template:else></template:if></mvc:View>',
	"sap/ovp/cards/rta/SettingsDialogCardPreview.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m"><VBox class="sapUiSmallMarginTop sapUiSmallMarginBegin"><HBox id="dialogCardOverlay" class="dialogCardVBox dialogCardOverlay"><core:ComponentContainer id="dialogCard" busyIndicatorDelay="0" busy="true" visible="{visibility&gt;/cardPreview}"/><MessagePage id="dialogCardNoPreview" visible="{= !${visibility&gt;/cardPreview}}" icon="sap-icon://map-3" class="sapOvpSettingsDialogErrorPreviewWidth" showHeader="false" description=""/></HBox><HBox visible="{visibility&gt;/showViewSwitch}"><Button class="sapUiMediumMarginBottom" enabled="{/isViewResetEnabled}" press="resetView" text="{ovpResourceModel&gt;OVP_KEYUSER_RESET_VIEW_BUTTON}" type="Transparent"/></HBox></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/rta/SettingsDialogForm.fragment.xml":'<core:FragmentDefinition xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns="sap.m"><f:Form editable="true"><f:layout><f:ResponsiveGridLayout labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" singleContainerFullSize="false"/></f:layout><f:formContainers><template:if test="{= !${ovpCardProperties&gt;/addNewCard}}"><template:then><f:FormContainer id="sapOvpSettingsFormContainer"><f:formElements><template:if test="{= !(${ovpCardProperties&gt;/layer} ===\'VENDOR\' || ${ovpCardProperties&gt;/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TITLE}" visible="{visibility&gt;/title}"><f:fields><Input id="sapOvpSettingsTitle" value="{/title}" change="validateInputField" editable="true" required="true" valueState="{= ${/title} === \'\' ? \'Error\' : \'None\'}" valueStateText="{= ${/title} === \'\' ? ${ovpResourceModel&gt;OVP_KEYUSER_INPUT_ERROR_VALUE_STATE} : \'\'}"/></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TITLE}" visible="{visibility&gt;/title}"><f:fields><Input id="sapOvpSettingsTitle" value="{/title}" change="updateCard" editable="true" showSuggestion="true" required="true" suggestionItems="{path:\'/ai18nPropertiesAndTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DYNAMIC_SUBTITLE_SWITCH}" visible="{visibility&gt;/dynamicSwitchSubTitle}"><f:fields><Switch id="sapOvpSettingsSwitchSubTitle" state="{visibility&gt;/dynamicSwitchStateSubTitle}" type="Default" change="updateCard"/></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SUBTITLE}" visible="{visibility&gt;/dynamicSubTitle}"><f:fields><ComboBox id="sapOvpSettingsDynamicSubTitle" width="100%" items="{path:\'/dynamicSubTitle\'}" selectedKey="{/dynamicSubtitleAnnotationPath}" forceSelection="false" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_VIEW_NAME}" visible="{visibility&gt;/showViewName}"><f:fields><Input id="sapOvpSettingsViewName" value="{/viewName}" change="validateInputField" required="true" valueState="{= ${/viewName} === \'\' ? \'Error\' : \'None\'}" valueStateText="{= ${/viewName} === \'\' ? ${ovpResourceModel&gt;OVP_KEYUSER_INPUT_ERROR_VIEW_NAME} : \'\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SET_DEFAULT}" visible="{visibility&gt;/showDefaultView}"><f:fields><Switch id="sapOvpDefaultViewSwitch" state="{/isDefaultView}" change="updateCard" type="Default"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_ENTITYSET}" visible="{visibility&gt;/showEntitySet}"><f:fields><ComboBox id="sapOvpSettingsEntitySet" width="100%" items="{path:\'/allEntitySet\'}" selectedKey="{/entitySet}" forceSelection="false" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= !(${ovpCardProperties&gt;/layer} ===\'VENDOR\' || ${ovpCardProperties&gt;/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SUBTITLE}" visible="{visibility&gt;/subTitle}"><f:fields><Input id="sapOvpSettingsSubTitle" value="{/subTitle}" change="updateCard" editable="true"/></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SUBTITLE}" visible="{visibility&gt;/subTitle}"><f:fields><Input id="sapOvpSettingsSubTitle" value="{/subTitle}" change="updateCard" editable="true" showSuggestion="true" suggestionItems="{path:\'/ai18nPropertiesAndSubTitle\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><template:if test="{= ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_HEADER}" visible="{visibility&gt;/kpiHeader}"><f:fields><Switch id="sapOvpSettingsKPIHeaderSwitch" state="{/hasKPIHeader}" type="Default" change="updateCard"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_Value}" visible="{visibility&gt;/dataPoint}"><f:fields><ComboBox id="sapOvpSettingsDataPoint" width="100%" items="{path:\'/dataPoint\'}" selectedKey="{/dataPointAnnotationPath}" forceSelection="false" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><template:if test="{= !(${ovpCardProperties&gt;/layer} ===\'VENDOR\' || ${ovpCardProperties&gt;/layer} ===\'CUSTOMER_BASE\')}"><template:then><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility&gt;/valueSelectionInfo}"><f:fields><Input id="sapOvpSettingsValueSelectionInfo" value="{/valueSelectionInfo}" change="updateCard" editable="true"/></f:fields></f:FormElement></template:then><template:else><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_DESCRIPTION}" visible="{visibility&gt;/valueSelectionInfo}"><f:fields><Input id="sapOvpSettingsValueSelectionInfo" value="{/valueSelectionInfo}" change="updateCard" editable="true" showSuggestion="true" suggestionItems="{path:\'/ai18nPropertiesAndValSelInfo\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement></template:else></template:if><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LIST_TYPE}" visible="{visibility&gt;/listType}"><f:fields><Switch id="sapOvpSettingsListType" state="{/isExtendedList}" change="updateCard" type="Default"/></f:fields></f:FormElement></template:if><f:FormElement label="{ovpCardProperties&gt;/listFlavorName}" visible="{visibility&gt;/listFlavor}"><f:fields><Switch id="sapOvpSettingsListFlavorForList" state="{/isBarList}" type="Default" change="updateCard"/></f:fields></f:FormElement><f:FormElement label="{ovpCardProperties&gt;/listFlavorName}" visible="{visibility&gt;/listFlavorForLinkList}"><f:fields><SegmentedButton id="sapOvpSettingsListFlavorForLinkList" select="updateCard" selectedKey="{/listFlavor}"><items><SegmentedButtonItem id="sapOvpSettingsListFlavorList" key="standard" text="{ovpResourceModel&gt;OVP_KEYUSER_LIST_TEXT_SEG_BUTTON}"/><SegmentedButtonItem id="sapOvpSettingsListFlavorCarousel" key="carousel" text="{ovpResourceModel&gt;OVP_KEYUSER_CAROUSEL_TEXT_SEG_BUTTON}"/></items></SegmentedButton></f:fields></f:FormElement><template:if test="{= ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.linklist\' &amp;&amp; ${ovpCardProperties&gt;/template} !== \'sap.ovp.cards.v4.linklist\'}"><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SELECTION_PRESENTATION_VAR}" visible="{visibility&gt;/selectionPresentationVariant}"><f:fields><ComboBox id="sapOvpSettingsFilterAndPresentedBy" width="100%" items="{path:\'/selectionPresentationVariant\'}" selectedKey="{/selectionPresentationAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_ANNO}" visible="{visibility&gt;/KPI}"><f:fields><ComboBox id="sapOvpSettingsKPIAnnotation" width="100%" items="{path:\'/KPI\'}" selectedKey="{/kpiAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SELECTION_VAR}" visible="{visibility&gt;/selectionVariantSPVorKPI}"><f:fields><Text id="sapOvpSettingsFilterByAnalytical" width="100%" text="{parts:[{path:\'/selectionVariant\'},{path:\'/selectionAnnotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility&gt;/presentationVariantSPVorKPI}"><f:fields><Text id="sapOvpSettingsPresentedByAnalytical" width="100%" text="{parts:[{path:\'/presentationVariant\'},{path:\'/presentationAnnotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility&gt;/KPI}"><f:fields><Text id="sapOvpSettingsIdentificationForKPI" width="100%" text="{parts:[{path:\'staticCardProperties&gt;/links\'},{path:\'/KPINav\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getApplicationName\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility&gt;/chartSPVorKPI}"><f:fields><Text id="sapOvpSettingsChartAnalytical" width="100%" text="{parts:[{path:\'/chart\'},{path:\'/chartAnnotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.getAnnotationLabel\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SELECTION_VAR}" visible="{visibility&gt;/selectionVariant}"><f:fields><ComboBox id="sapOvpSettingsFilterBy" width="100%" items="{path:\'/selectionVariant\'}" selectedKey="{/selectionAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_PRESENTATION_VAR}" visible="{visibility&gt;/presentationVariant}"><f:fields><ComboBox id="sapOvpSettingsPresentedBy" width="100%" items="{path:\'/presentationVariant\'}" selectedKey="{/presentationAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LINEITEM_ANNO}" visible="{visibility&gt;/lineItem}"><f:fields><Input id="sapOvpSettingsLineItem" value="{path:\'/lineItemQualifier\'}" showValueHelp="true" editable="true" enabled="true" valueHelpOnly="true" valueHelpRequest="openLineItemValueHelpDialog"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_IDENTIFICATION_ANNO}" visible="{visibility&gt;/identification}"><f:fields><ComboBox id="sapOvpSettingsIdentification" width="100%" items="{path:\'/identification\'}" selectedKey="{/identificationAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TYPE_OF_CHART}" visible="{visibility&gt;/chart}"><f:fields><ComboBox id="sapOvpSettingsChart" width="100%" items="{path:\'/chart\'}" forceSelection="false" selectedKey="{/chartAnnotationPath}" change="updateCard"><core:Item key="{value}" text="{name}"/></ComboBox></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties&gt;/template} === \'sap.ovp.cards.linklist\' ||                                                        ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.v4.linklist\') &amp;&amp;                                                         ${ovpCardProperties&gt;/staticContent}}"><f:FormElement><f:fields><Toolbar><content><ToolbarSpacer/><Button id="moveToTheTop" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_TOP}" icon="sap-icon://collapse-group" press="onPressMoveToTheTop" enabled="{visibility&gt;/moveToTheTop}" type="Transparent"/><Button id="moveUp" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_UP}" icon="sap-icon://navigation-up-arrow" press="onPressMoveUp" enabled="{visibility&gt;/moveUp}" type="Transparent"/><Button id="moveDown" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_DOWN}" icon="sap-icon://navigation-down-arrow" press="onPressMoveDown" enabled="{visibility&gt;/moveDown}" type="Transparent"/><Button id="moveToTheBottom" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_BOTTOM}" icon="sap-icon://expand-group" press="onPressMoveToTheBottom" enabled="{visibility&gt;/moveToTheBottom}" type="Transparent"/><Button id="delete" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_DELETE}" icon="sap-icon://delete" press="onPressDelete" enabled="{visibility&gt;/delete}" type="Transparent"/><Button id="add" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_ADD}" icon="sap-icon://add" press="onPressAdd" type="Transparent"/></content></Toolbar></f:fields></f:FormElement><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.StaticLinkListCardLineItemsPanel" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.analytical\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.smart.chart\') &amp;&amp; ${ovpCardProperties&gt;/NewKPICard}}"><f:FormElement><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.KPICardTable" type="XML"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link text="{ovpResourceModel&gt;OVP_KEYUSER_KPI_LINK}({/NoKPI})" press="onSeePress"/></FlexBox></f:fields></f:FormElement></template:if><template:if test="{= ${ovpCardProperties&gt;/layoutDetail} === \'resizable\'}"><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_STOP_RESIZE}" visible="{visibility&gt;/stopResizing}"><f:fields><Switch id="sapOvpSettingsStopResize" state="{= !${/stopResizing}}" type="Default" change="onResizingChange"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DEFAULT_NUMBER_OF_COLUMNS}" visible="{visibility&gt;/noOfColumns}"><f:fields><ComboBox id="sapOvpSettingsNumberOfColumns" width="100%" items="{path:\'/NoOfColumns\'}" forceSelection="false" selectedKey="{/defaultSpan/cols}" change="onNumberOfColumnsChanged"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DEFAULT_NUMBER_OF_ROWS}" visible="{visibility&gt;/noOfRows}"><f:fields><template:if test="{= ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.analytical\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.smart.chart\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.bubble\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.donut\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.charts.line\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.linklist\' ||                                                 ${ovpCardProperties&gt;/template} === \'sap.ovp.cards.v4.linklist\'}"><template:then><ComboBox id="sapOvpSettingsNumberOfRows" width="100%" items="{path:\'/NoOfRows\'}" forceSelection="false" selectedKey="{/defaultSpan/rows}" change="onNumberOfRowsChanged"><core:Item key="{value}" text="{name}"/></ComboBox></template:then><template:else><StepInput id="sapOvpSettingsNumberOfRows" value="{/defaultSpan/rows}" min="0" max="99" valueStateText="Number of Rows should be between 0 and 99" change="onNumberOfRowsChanged"/></template:else></template:if></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties&gt;/layer} ===\'VENDOR\' || ${ovpCardProperties&gt;/layer} ===\'CUSTOMER_BASE\')}"><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input id="sapOvpCardProperiesAuthorization" value="{/requireAppAuthorization}" change="updateProperty" width="100%" editable="true"/></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox id="sapOVPAddODataSelect" width="100%" visible="{visibility&gt;/addODataSelect}" text="{ovpResourceModel&gt;OVP_KEYUSER_ADDODATASELECT}" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_ADDODATASELECT}" selected="{/addODataSelectCheckBox}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement><f:fields><CheckBox id="sapOVPEnableCustomParameter" width="100%" text="{ovpResourceModel&gt;OVP_DTA_CUSTOM_PARAMS}" selected="{/addCustomParameters}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_CUSTOM_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><Input id="sapOVPCustomParams" value="{/customParams}" change="validateInputField" editable="true"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement><f:FormElement visible="{visibility&gt;/addCustomActions}"><f:fields><CheckBox id="sapOVPEnableCustomActions" width="100%" text="{ovpResourceModel&gt;OVP_DTA_CUSTOM_Actions}" selected="{/addCustomActions}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement visible="{/addCustomActions}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddCustomActions" type="XML"/></f:fields></f:FormElement></template:if><template:if test="{= (${ovpCardProperties&gt;/layer} !==\'VENDOR\' || ${ovpCardProperties&gt;/layer} !==\'CUSTOMER_BASE\') &amp;&amp; ${ovpCardProperties&gt;/NewKPICard}}"><f:FormElement><f:fields><CheckBox id="sapOVPEnableCustomParameter" width="100%" text="{ovpResourceModel&gt;OVP_DTA_CUSTOM_PARAMS}" selected="{/addCustomParameters}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_STATIC_PARAMETERS}" visible="{/addCustomParameters}"><f:fields><core:Fragment fragmentName="sap.ovp.cards.rta.AddStaticParameters" type="XML"/></f:fields></f:FormElement></template:if></f:formElements></f:FormContainer></template:then><template:else><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DATASOURCE}" visible="{visibility&gt;/dataSource}"><f:fields><RadioButtonGroup id="useDatasource_RadioButtonGroup" columns="2" width="100%" class="sapUiMediumMarginBottom"><buttons><RadioButton id="sapOVPExistingDataSource" text="{ovpResourceModel&gt;OVP_KEYUSER_EXISTING_DS}" selected="true" select="updateProperty"/><RadioButton id="sapOVPNewDataSource" text="{ovpResourceModel&gt;OVP_KEYUSER_NEW_DS}" selected="false" select="updateProperty"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement visible="{visibility&gt;/dataSourceExisting}"><f:fields><ComboBox id="sapOVPDataSourceExistingComboBox" width="100%" items="{path:\'/datasources\'}" change="onDatasourceComboboxChanged" selectedKey="{/datasSourceExisting}" visible="{visibility&gt;/dataSourceExisting}"><core:Item key="{Title}" text="{Title}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility&gt;/dataSourceNew}"><f:fields><Input id="sapOVPDataSourceNewInput" value="{/datasSourceNew}" change="onDatasourceComboboxChanged" editable="true" showSuggestion="true" required="true" suggestionItems="{path:\'/datasources\'}" width="100%" visible="{visibility&gt;/dataSourceNew}"><core:Item key="{Title}" text="{Title}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;SELECTCARDTYPEWIZARDSTEP_TITLE_LABEL}" visible="{visibility&gt;/selectCardType}"><f:fields><ComboBox id="sapOVPCardType" width="100%" items="{path:\'/cardType\'}" selectedKey="{/template}" selectionChange="onCardTypeSelected"><core:Item key="{template}" text="{text}"/></ComboBox></f:fields></f:FormElement><f:FormElement visible="{visibility&gt;/addKPIHeader}"><f:fields><CheckBox id="sapOVPAddKpiCheckBoxID" width="100%" text="{ovpResourceModel&gt;CARD_CUSTOMIZATION_ADD_KPI_HEADER_LABEL}" tooltip="{ovpResourceModel&gt;CARD_CUSTOMIZATION_ADD_KPI_HEADER_TOOLTIP}" selected="{/addKPIHeaderCheckBox}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;CARD_ENTITYSET}" visible="{visibility&gt;/setEntitySet}"><f:fields><ComboBox id="sapOVPEntitySetList" width="100%" required="true" items="{path:\'/allEntitySet\'}" change="updateProperty" forceSelection="false" selectedKey="{/entitySet}"><core:Item key="{entityType}" text="{value}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel&gt;OVP_KEYUSER_GENERAL}" visible="{visibility&gt;/setGeneralCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TITLE}"><f:fields><Input id="sapOvpCardTitle" value="{/title}" change="updateProperty" editable="true" required="true" showSuggestion="true" suggestionItems="{path:\'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SUBTITLE}"><f:fields><Input id="sapOvpCardSubTitle" value="{/subTitle}" change="updateProperty" required="{visibility&gt;/requiredSubTitle}" editable="true" showSuggestion="true" suggestionItems="{path:\'/ai18nProperties\'}"><core:Item key="{value}" text="{value}"/></Input></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_AUTHORIZATION}"><f:fields><Input id="sapOvpCardProperiesAuthorization" value="{/requireAppAuthorization}" change="updateProperty" width="100%" editable="true"/></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel&gt;OVP_KEYUSER_ANNOTATIONS}" visible="{visibility&gt;/setAnnotationCardProperties}"><f:formElements><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_KPI_ANNO_PATH}" visible="{visibility&gt;/KPI}"><f:fields><ComboBox id="sapOvpKpiAnnotationPath" width="100%" items="{path:\'/KPI\'}" selectedKey="{/kpiAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_IDENTIFICATION}" visible="{visibility&gt;/identification}"><f:fields><ComboBox id="sapOVPIdentification" width="100%" items="{path:\'/identification\'}" selectedKey="{/identificationAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SELECTIONPRESENTATIONVARIANT}" visible="{visibility&gt;/selectionPresentationVariant}"><f:fields><ComboBox id="sapOVPSelectionPresentationVariant" width="100%" items="{path:\'/selectionPresentationVariant\'}" selectedKey="{/selectionPresentationAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SELECTIONVARIANT}" visible="{visibility&gt;/selectionVariant}"><f:fields><ComboBox id="sapOVPSelectionVariant" width="100%" items="{path:\'/selectionVariant\'}" selectedKey="{/selectionAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_PRESENTATIONVARIANT}" visible="{visibility&gt;/presentationVariant}"><f:fields><ComboBox id="sapOVPPresentationVariant" width="100%" items="{path:\'/presentationVariant\'}" selectedKey="{/presentationAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_ANNOTATIONPATH}" visible="{visibility&gt;/lineItem}"><f:fields><ComboBox id="sapOVPAnnotationPath" width="100%" items="{path:\'/lineItem\'}" selectedKey="{/annotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DATAPOINT}" visible="{visibility&gt;/dataPoint}"><f:fields><ComboBox id="sapOvpDataPoint" width="100%" required="true" items="{path:\'/dataPoint\'}" selectedKey="{/dataPointAnnotationPath}" change="updateProperty"><core:Item key="{value}" text="{value}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_DATA_POINT_SELMODE}" visible="{visibility&gt;/dataPointSelectionMode}"><f:fields><ComboBox id="sapOVPDataPointSelectionMode" width="100%" items="{path:\'/navigation\'}" selectedKey="{/navigationPath}" change="updateProperty"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement></f:formElements></f:FormContainer><f:FormContainer title="{ovpResourceModel&gt;OVP_KEYUSER_CARDPROPERTIES}" visible="{visibility&gt;/setCardProperties}"><f:formElements><f:FormElement><f:fields><CheckBox id="sapOVPAddODataSelect" width="100%" visible="{visibility&gt;/addODataSelect}" text="{ovpResourceModel&gt;OVP_KEYUSER_ADDODATASELECT}" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_ADDODATASELECT}" selected="{/addODataSelectCheckBox}" select="updateProperty"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LISTTYPE}" visible="{visibility&gt;/listFlavorForLinkList}"><f:fields><ComboBox id="sapOVPLinkListFlavor" width="100%" items="{path:\'/aLinkListFlavour\'}" selectedKey="{/listFlavor}" change="updateProperty" required="true"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LISTTYPE}" visible="{visibility&gt;/listType}"><f:fields><ComboBox id="sapOVPListType" width="100%" items="{path:\'/aListType\'}" selectedKey="{/listType}" change="updateProperty"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LISTFLAVOR}" visible="{visibility&gt;/listFlavor}"><f:fields><ComboBox id="sapOVPListFlavor" width="100%" items="{path:\'/aListFlavour\'}" selectedKey="{/listFlavor}" change="updateProperty"><core:Item key="{key}" text="{name}"/></ComboBox></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_VALUESELECTIONINFO}" visible="{visibility&gt;/valueSelectionInfo}"><f:fields><Input id="sapOvpValueSelectionInfo" value="{/valueSelectionInfo}" change="updateProperty" required="true" editable="true" showSuggestion="true" suggestionItems="{path:\'/ai18nProperties\'}"><core:Item key="{key}" text="{value}"/></Input></f:fields></f:FormElement></f:formElements></f:FormContainer></template:else></template:if></f:formContainers></f:Form></core:FragmentDefinition>',
	"sap/ovp/cards/rta/StaticLinkListCardLineItemsPanel.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m"><ScrollContainer id="scrollContainer" class="sapOvpScrollContainer" height="20rem" width="100%" horizontal="false" vertical="true" focusable="true"><List id="sapOvpStaticLinkListLineItem" class="sapOvpSettingsDialogCustomList" items="{/staticContent}" selectionChange="onSelectionChange" mode="SingleSelectLeft" includeItemInSelection="true"><items><CustomListItem type="Active"><HBox><VBox width="30%" visible="{= !${deviceSystemProperties&gt;/phone}}" alignItems="Center" justifyContent="Center"><HBox><Image class="sapUiSmallMargin" visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === true}" alt="{imageAltText}" tooltip="{toolTip}" densityAware="true" width="4rem" height="4rem" backgroundPosition="center center" mode="Background" src="{parts:[{path:\'/\'},{path:\'imageUri\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getImageUrl\'}"/><VBox visible="{= !!${imageUri} &amp;&amp; ${path: \'imageUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isImageUrlStaticData\'} === false}" class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon class="sapOvpLinkListImageCenter" tooltip="{toolTip}" useIconTooltip="false" size="3rem" src="{imageUri}"/></FlexBox></VBox><VBox visible="{= !${imageUri}}" class="sapUiSmallMargin sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="3rem"><core:Icon class="sapOvpLinkListImageCenter" tooltip="{toolTip}" useIconTooltip="false" size="3rem" src="sap-icon://background"/></FlexBox></VBox></HBox><HBox visible="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><Button class="sapOvpSettingsMiniMarginBeginEnd" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_CHANGE_VISUAL}" icon="sap-icon://edit" press="onChangeVisualPress" enabled="true" type="Transparent"/><Button class="sapOvpSettingsMiniMarginBeginEnd" tooltip="{ovpResourceModel&gt;OVP_KEYUSER_TOOLTIP_FOR_REMOVE_VISUAL}" icon="sap-icon://delete" press="onRemoveVisualPress" enabled="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'},{path:\'visibility&gt;/removeVisual\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}" type="Transparent"/></HBox></VBox><VBox><f:Form editable="true"><f:layout><f:ResponsiveGridLayout labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" singleContainerFullSize="false"/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_TITLE_FOR_LINK}" visible="{visibility&gt;/lineItemTitle}"><f:fields><Input id="sapOvpSettingsLineItemTitle" value="{title}" change="validateInputField" required="true" valueState="{= ${title} === \'\' ? \'Error\' : \'None\'}" valueStateText="{= ${title} === \'\' ? ${ovpResourceModel&gt;OVP_KEYUSER_INPUT_ERROR_RECORD_TITLE} : \'\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_SUBTITLE_FOR_LINK}" visible="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'},{path:\'visibility&gt;/lineItemSubTitle\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input id="sapOvpSettingsLineItemSubTitle" value="{subTitle}" change="updateCard"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LINK_TYPE}" visible="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><RadioButtonGroup columns="2" select="onLinkSourceChange" selectedIndex="{= ${parts:[{path:\'index\'}, {path:\'visibility&gt;/showMore\'}, {path:\'visibility&gt;/staticLink\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} === true ? 1 : 0}"><buttons><RadioButton text="{ovpResourceModel&gt;OVP_KEYUSER_APPLICATION_TEXT_RAD_BUTTON}"/><RadioButton text="{ovpResourceModel&gt;OVP_KEYUSER_URL_TEXT_RAD_BUTTON}"/></buttons></RadioButtonGroup></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LINKS}" visible="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'},{path:\'visibility&gt;/staticLink\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input value="{targetUri}" change="onExternalUrlChange" required="true" valueState="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? \'Error\' : \'None\'}" valueStateText="{= ${path: \'targetUri\', formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isValidURL\'} === false ? ${ovpResourceModel&gt;OVP_KEYUSER_INPUT_ERROR_RECORD_URL} : \'\'}"/></f:fields></f:FormElement><f:FormElement label="{ovpResourceModel&gt;OVP_KEYUSER_LINKS}" visible="{parts:[{path:\'index\'},{path:\'visibility&gt;/showMore\'},{path:\'visibility&gt;/links\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'}"><f:fields><Input value="{parts:[{path:\'staticCardProperties&gt;/links\'},{path:\'semanticObject\'},{path:\'action\'}],formatter:\'sap.ovp.cards.linklist.AnnotationHelper.getApplicationName\'}" showValueHelp="true" editable="true" enabled="true" valueHelpOnly="true" required="true" valueHelpRequest="createValueHelpDialogForInternalUrl"/></f:fields></f:FormElement><f:FormElement><f:fields><FlexBox justifyContent="End"><Link text="{= !${parts:[{path:\'index\'}, {path:\'visibility&gt;/showMore\'}], formatter: \'sap.ovp.cards.linklist.AnnotationHelper.isVisible\'} ? ${ovpResourceModel&gt;OVP_KEYUSER_SHOW_MORE_LINK}: ${ovpResourceModel&gt;OVP_KEYUSER_SHOW_LESS_LINK}}" press="onShowMorePress"/></FlexBox></f:fields></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></VBox></HBox></CustomListItem></items></List></ScrollContainer></core:FragmentDefinition>',
	"sap/ovp/cards/stack/Stack.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui"><VBox id="stackContent" class="sapOvpStackCardContent" justifyContent="SpaceBetween"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><Label id="stackSize" class="sapOvpStackCardSize"><customData><ovp:CustomData key="role" value="" writeToDom="true"/></customData></Label><Text id="stackTotalSize" class="sapOvpStackCardTotalSize"/><core:Icon id="StackCardIcon" class="sapOvpStackCardIcon" src="sap-icon://dimension" useIconTooltip="false"/></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/table/Table.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table id="ovpTable" class="ovpTableClass cardType" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties&gt;/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="eachItem"><template:with path="eachItem&gt;" helper="sap.ovp.cards.AnnotationHelper.removeDuplicateDataField" var="lineItem"><columns><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField1"><template:if test="{= ${dataField1&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField1&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField1&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField1&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField1&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField1&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField2"><template:if test="{= ${dataField2&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField2&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField2&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField2&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField2&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField2&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField3"><template:if test="{=  !${dataField3&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember}}"><template:then><template:if test="{= ${dataField3&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField3&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':                                 ${dataField3&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField3&gt;\',                                      formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':                                     ${dataField3&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField3&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem id="tableItem" type="Active" press="onColumnListItemPress"><cells><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField4"><template:if test="{= ${dataField4&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{= (${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'} === ${dataField4&gt;Label/String} &amp;&amp; ${ovpCardProperties&gt;/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.LineItemDetails" type="XML"/><Link class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField4&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField4&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField4&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField4&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField4&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField5"><template:if test="{= ${dataField5&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField5&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField5&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField5&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField5&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField5&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField5&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField5&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField6"><template:if test="{= ${dataField6&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField6&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField6&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField6&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField6&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField6&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField6&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField6&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField7"><template:if test="{=  !${dataField7&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><template:then><template:if test="{= ${dataField7&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField7&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7&gt;Target/AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField7&gt;Target" helper="sap.ui.model.odata.AnnotationHelper.resolvePath" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField7&gt;Target/AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField7&gt;Target/AnnotationPath\'}.slice(0, ${ path: \'dataField7&gt;Target/AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'contact&gt;fn\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="ovpSmartLink {= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField7&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/disableTableCardFlexibility} === true}"><template:then><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.AnnotationHelper.resolveEntityTypePath" var="lineItem"><columns><Column><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><Text class="displayBlock {= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}" text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem id="tableItem" type="Active" press="onColumnListItemPress"><cells><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField class="textAlignCenter" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointStateForSmartField\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/analytical/analyticalChart.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:suite="sap.suite.ui.commons" xmlns:viz="sap.viz.ui5.controls" xmlns:dataSet="sap.viz.ui5.data" xmlns:feed="sap.viz.ui5.controls.common.feeds" xmlns:ovp="sap.ovp.ui" xmlns:charts="sap.ovp.cards.v4.charts"><VBox class="ovpChartTitleVBox cardType" id="vbLayout"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;analyticalCardType}" writeToDom="true"/></customData><template:with path="ovpCardProperties&gt;/chartAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="chart"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="selVar"><template:with path="ovpCardProperties&gt;/presentationAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="preVar"><template:if test="{chart&gt;}"><HBox class="ovpChartTitleHBox"><items><VBox class="ovpChartTitleText"><Text id="ovpCT" class="ovpChartTitle" maxLines="1" text="{chart&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}"><customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{chart&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/></template:if></customData></Text></VBox><VBox class="ovpChartTitleScaleText"><Text id="ovpUoMTitle" class="ovpChartTitle" maxLines="1"><customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" writeToDom="true"/></template:if></customData></Text></VBox></items></HBox><template:if test="{path:\'chart&gt;DimensionAttributes\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.dimensionAttrCheck\'}"><template:if test="{path:\'chart&gt;MeasureAttributes\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.measureAttrCheck\'}"><template:if test="{chart&gt;ChartType}"><template:if test="{preVar&gt;MaxItems}"><template:then><charts:OVPVizDataHandler chartType="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}" entitySet="{path:\'entitySet&gt;\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\'}" data="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;DimensionAttributes\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}" aggregateData="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;undefined\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element/></charts:data><charts:aggregateData><core:Element/></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz" uiConfig="{applicationSet:\'fiori\'}" vizType="{parts:[{path:\'chart&gt;ChartType\'},{path:\'chart&gt;DimensionAttributes\'}],formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}" width="100%"><viz:customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{chart&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel&gt;/}"/></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:then><template:else><charts:OVPVizDataHandler chartType="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}" entitySet="{path:\'entitySet&gt;\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getEntitySet\'}" data="{parts:[{path:\'entitySet&gt;\'},{path:\'selVar&gt;\'},{path:\'preVar&gt;\'},{path:\'chart&gt;DimensionAttributes\'},{path:\'chart&gt;MeasureAttributes\'},{path:\'chart&gt;ChartType\'}],formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.formatItems\'}"><charts:data><core:Element/></charts:data><charts:aggregateData><core:Element/></charts:aggregateData><charts:content width="100%"><viz:VizFrame id="analyticalChart" class="ovpViz" uiConfig="{applicationSet:\'fiori\'}" vizType="{parts:[{path:\'chart&gt;ChartType\'},{path:\'chart&gt;DimensionAttributes\'}],formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.getChartType\'}" width="100%"><viz:customData><template:if test="{chart&gt;Title}"><ovp:CustomData key="aria-label" value="{chart&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/></template:if></viz:customData><viz:dataset><dataSet:FlattenedDataset data="{analyticalmodel&gt;/}"/></viz:dataset></viz:VizFrame></charts:content></charts:OVPVizDataHandler></template:else></template:if></template:if></template:if></template:if></template:if></template:with></template:with></template:with></VBox><template:with path="ovpCardProperties&gt;/chartAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="chart"><template:if test="{chart&gt;}"><template:if test="{chart&gt;ChartType}"><template:if test="{path:\'chart&gt;ChartType\',formatter:\'sap.ovp.cards.v4.charts.VizAnnotationManager.checkBubbleChart\'}"><Text id="bubbleText" class="ovpChartFooter"/></template:if></template:if></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/charts/generic/noData.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns="sap.m"><FlexBox alignItems="Center" justifyContent="SpaceAround" class="noDataSection"><Text maxLines="1" text="{ovplibResourceBundle&gt;noData}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;noData}" writeToDom="true"/><ovp:CustomData key="tabindex" value="0" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Action.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{=  ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForAction\' ||                            ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation\'||                            ${dataField&gt;RecordType} === \'com.sap.vocabularies.UI.v1.DataFieldWithUrl\'}"><Button text="{dataField&gt;Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}" press="onActionPress" type="Transparent"><layoutData><OverflowToolbarLayoutData moveToOverflow="true" stayInOverflow="false"/></layoutData><customData><core:CustomData key="type" value="{dataField&gt;RecordType}"/><template:if test="{= ${dataField&gt;SemanticObject}}"><core:CustomData key="semanticObject" value="{dataField&gt;SemanticObject@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField&gt;Url}}"><core:CustomData key="url" value="{dataField&gt;Url@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><template:if test="{= ${dataField&gt;Action}}"><core:CustomData key="action" value="{dataField&gt;Action@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></template:if><core:CustomData key="label" value="{dataField&gt;Label@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></customData></Button></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ActionsFooter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/identificationAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="identification"><template:if test="{path:\'identification&gt;\',formatter:\'sap.ovp.cards.AnnotationHelper.hasActions\'}"><OverflowToolbar id="ovpActionFooter" class="sapOvpActionFooter"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="toolbar" writeToDom="true"/></customData><ToolbarSpacer/><template:repeat list="{path:\'identification&gt;\',filters:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'High\'},{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'Medium\'}],sorter:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\'}]}" var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat list="{path:\'identification&gt;\',filters:[{path:\'com.sap.vocabularies.UI.v1.Importance/EnumMember\',operator:\'EndsWith\',value1:\'Low\'}]}" var="dataField"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:repeat><template:repeat list="{path:\'identification&gt;\'}" var="dataField"><template:if test="{=  !${dataField&gt;com.sap.vocabularies.UI.v1.Importance/EnumMember} }"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Action" type="XML"/></template:if></template:repeat></OverflowToolbar></template:if></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Card.view.xml":'<mvc:View controllerName="{ovpCardProperties&gt;/controllerName}" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox class="sapOvpCardOverlaySideContainer sapOvpCardRightOverlayCursor"/><FlexBox width="100%" justifyContent="End" class="sapOvpNewBadgeWrapper" visible="{= ${ovpCardProperties&gt;/cloneCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle&gt;OVP_KEYUSER_LABEL_COPY}" class="sapOvpNewBadgeText"/></HBox></FlexBox><FlexBox width="100%" justifyContent="End" class="sapOvpNewBadgeWrapper" visible="{= ${ovpCardProperties&gt;/newCard} ? true : false}"><HBox class="sapOvpNewBadge"><Text text="{ovplibResourceBundle&gt;OVP_KEYUSER_LABEL_NEW}" class="sapOvpNewBadgeText"/></HBox></FlexBox><template:if test="{= ${ovpCardProperties&gt;/contentPosition} === \'Right\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentRight" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContentMiddle" type="XML"/></template:else></template:if><template:if test="{device&gt;/support/touch}"><template:then><core:HTML content="&lt;div&gt;&lt;/div&gt;"/></template:then><template:else><core:HTML content="&lt;div;&gt;&lt;/div&gt;"/></template:else></template:if><HBox class="sapOvpCardOverlayContainer sapOvpCardBottomOverlayCursor"/></mvc:View>',
	"sap/ovp/cards/v4/generic/ContactDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContactDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickViewPage header="{ovplibResourceBundle&gt;CONTACT_INFO}" icon="{= ${contact&gt;photo} ? ${contact&gt;photo@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'sap-icon://person-placeholder\'}" title="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" description="{contact&gt;role@@sap.ui.model.odata.v4.AnnotationHelper.format}"><QuickViewGroup><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_JOB_TITLE}" type="text" value="{contact&gt;title@@sap.ui.model.odata.v4.AnnotationHelper.format}" visible="{= !!${contact&gt;title}}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_DEPARTMENT}" type="text" value="{contact&gt;org@@sap.ui.model.odata.v4.AnnotationHelper.format}" visible="{= !!${contact&gt;org}}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_EMAIL}" type="email" value="{path:\'contact&gt;email\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}" visible="{path:\'contact&gt;email\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getEmail\'}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_PHONE}" type="phone" value="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}" visible="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getPhone\'}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_MOBILE}" type="{= (${device&gt;/system/phone} || ${device&gt;/system/tablet})  ? \'mobile\'  : \'phone\' }" value="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}" visible="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getDevice\'}"/><QuickViewGroupElement label="{ovplibResourceBundle&gt;CONTACT_FAX}" type="text" value="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}" visible="{path:\'contact&gt;tel\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getPhoneType\'}"/></QuickViewGroup></QuickViewPage></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentMiddle.fragment.xml":'<core:FragmentDefinition controllerName="sap.ovp.cards.v4.generic.Card" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl"><VBox class="sapOvpBaseCard"><template:if test="{ovpCardProperties&gt;/headerFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/headerFragment}" type="XML"/></template:if><ovp:CardContentContainer id="ovpCardContentContainer" class="{= ${ovpCardProperties&gt;/cardLayout/containerLayout} === \'resizable\' &amp;&amp; ${ovpCardProperties&gt;/cardLayout/showOnlyHeader} === true ? \'sapOvpWrapper sapOvpContentHidden\' :  \'sapOvpWrapper\'}"><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\' || !${ovpCardProperties&gt;/reason} || ${ovpCardProperties&gt;/state} === \'undefined\'}"><template:if test="{ovpCardProperties&gt;/tabs}"><Toolbar id="toolbar" class="sapOvpDropDown {= ${ovpCardProperties&gt;/densityStyle} === \'compact\' ? \'sapUiSizeCompact dropDrownCompact\' : \'sapUiSizeCozy sapOvpDropDownPadding dropDrownCozy\' }"><core:InvisibleText id="ovp_card_dropdown_label" text="{ovplibResourceBundle&gt;OVP_CARD_DROP_DOWN_LABEL}"/><Select id="ovp_card_dropdown" selectedKey="1" change="changeSelection"><template:repeat list="{ovpCardProperties&gt;/tabs}" var="tab"><core:Item id="{parts:[{path:\'ovpCardProperties&gt;/tabs\'},{path:\'tab&gt;\'}],formatter:\'sap.ovp.cards.CommonUtils.createKeyForCB\'}" key="{parts:[{path:\'ovpCardProperties&gt;/tabs\'},{path:\'tab&gt;\'}],formatter:\'sap.ovp.cards.CommonUtils.createKeyForCB\'}" text="{tab&gt;value}"/></template:repeat></Select></Toolbar></template:if><template:if test="{ovpCardProperties&gt;/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/contentFragment}" type="XML"/></template:if></template:if></ovp:CardContentContainer><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.quickview.Quickview\' || ${ovpCardProperties&gt;/layoutDetail} !== \'resizable\' || ${ovpCardProperties&gt;/state} === \'Loading\' || ${ovpCardProperties&gt;/reason}}"><template:if test="{ovpCardProperties&gt;/footerFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/footerFragment}" type="XML"/></template:if></template:if></VBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/ContentRight.fragment.xml":'<core:FragmentDefinition controllerName="sap.ovp.cards.v4.generic.Card" xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><ovp:Card id="ovpCardControl" class="cardType"><HBox class="sapOvpBaseCard sapOvpCardRightContent"><FlexBox class="sapOvpCardContentRightHeader"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Header" type="XML"/><layoutData><FlexItemData growFactor="1" baseSize="1rem"/></layoutData></FlexBox><ovp:CardContentContainer id="ovpCardContentContainer"><template:if test="{ovpCardProperties&gt;/contentFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/contentFragment}" type="XML"/></template:if></ovp:CardContentContainer></HBox></ovp:Card></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountFooter.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui"><Text id="ovpCountFooter" class="sapOvpCardFooter"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/></customData></Text></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/CountHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui"><FlexBox class="sapOvpHeaderCountMainDiv"><Text id="ovpCountHeader" class="sapOvpHeaderCounter" maxLines="1"><customData><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Header.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><VBox id="ovpCardHeader" class="{= ${ovpCardProperties&gt;/category} || ${ovpCardProperties&gt;/title} || ${ovpCardProperties&gt;/subTitle} ? \'sapOvpCardHeader sapUiContentPadding\' : \'sapOvpCardHeader sapOvpCardHideHeader\' } {= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.stack.Stack\' ? \'sapOvpStackCardHeader\' :  \'\'}"><customData><ovp:CustomData key="tabindex" value="0" writeToDom="true"/><ovp:CustomData key="role" value="button" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.quickview.Quickview\'}"><template:then><template:with path="entityType&gt;com.sap.vocabularies.UI.v1.HeaderInfo" var="header"><Text id="ovpQuickviewCardHeader" text="{= ${ovpCardProperties&gt;/title} + \': \' + ${path: \'header&gt;Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" class="sapOvpCardTitle tabindex-1"><customData><ovp:CustomData key="aria-label" value="{= ${ovpCardProperties&gt;/title} + \': \' + ${path: \'header&gt;Title/Value\', formatter: \'sap.ui.model.odata.AnnotationHelper.format\'}}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.generic.Title" type="XML"/></template:else></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} !== \'sap.ovp.cards.quickview.Quickview\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.SubTitle" type="XML"/></template:if><template:if test="{ovpCardProperties&gt;/headerExtensionFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/headerExtensionFragment}" type="XML"/></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.stack.Stack\'}"><FlexBox class="sapOvpCardViewAllContainer"><Text id="ViewAll" text="{ovplibResourceBundle&gt;View_All_Stack_Card}" class="sapOvpCardViewAll cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;View_All_Stack_Card}" writeToDom="true"/></customData></Text></FlexBox></template:if></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/KPIHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="selVar"><template:with path="ovpCardProperties&gt;/presentationAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="preVar"><template:if test="{dataPoint&gt;}"><VBox id="kpiHeader" class="sapOVPKpiHeaderVbox tabindex-1"><template:if test="{dataPoint&gt;Value/$Path}"><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" id="kpiHBoxNumeric" class="numericContentHbox sapUiTinyMarginTop sapOvpKPIHeaderAggregateNumber"><items><HBox class="innerNumericContentHbox sapOvpKpiContent" alignItems="End" justifyContent="SpaceBetween"><NumericContent id="kpiNumberValue" size="M" truncateValueTo="8" indicator="{parts:[{path:\'dataPoint&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formThePathForTrendIcon\'}" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formThePathForAggregateNumber\'}" formatterValue="true" valueColor="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatKPIHeaderState\'}" state="Loaded" class="sapOvpKPIHeaderNumberValueStyle kpiHeaderClass" press="press" withMargin="false"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getKPIHeaderAggregateNumber\'} {path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatKPIHeaderState\'}" writeToDom="true"/></customData></NumericContent><template:if test="{= ${path:\'dataPoint&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'} !== \'\'}"><FlexBox class="TargetDeviationFlexbox"><VBox class="KpiTargetContainer"><Text id="ovpKpiTarget" text="{ovplibResourceBundle&gt;KPI_Target_Text}" class="KpiTargetText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;KPI_Target_Text}" writeToDom="true"/></customData></Text><Text id="ovpTargetValue" text="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formPathForTargetValue\'}" class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formPathForTargetValue\'}" writeToDom="true"/></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox><VBox class="KpiDeviationContainer"><Text id="ovpKPIDeviation" text="{ovplibResourceBundle&gt;KPI_Deviation_Text}" class="KpiDeviationText tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;KPI_Deviation_Text}" writeToDom="true"/></customData></Text><Text id="kpiNumberPercentage" text="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'}" class="sapOvpKPIHeaderTrendPercentStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'dataPoint&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formPathForPercentageChange\'}" writeToDom="true"/></customData><layoutData><FlexItemData growFactor="1"/></layoutData></Text></VBox></FlexBox></template:if></HBox></items></FlexBox></template:if><template:if test="{dataPoint&gt;Value/$Path}"><template:if test="{ovpCardProperties&gt;/valueSelectionInfo}"><FlexBox class="UOMFlexbox"><Text id="ovpValueSelectionInfo" maxLines="1" text="{ovpCardProperties&gt;/valueSelectionInfo}" class="sapOvpKPIHeaderUnitOfMeasureStyle sapOvpCardSubtitle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/valueSelectionInfo}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="5" writeToDom="true"/></customData></Text></FlexBox></template:if></template:if><template:if test="{= (${ovpCardProperties&gt;/showSortingInHeader} === true) &amp;&amp; ${path:\'preVar&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isPresentationVarientPresent\'} === true}"><FlexBox alignItems="Start" justifyContent="SpaceBetween" class="KpiPreVarFlex" visible="{ovpCardProperties&gt;/showSortingInHeader}"><Text id="headerGroupByText" maxLines="1" text="{path:\'preVar&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.listGroupBy\'}" class="sapOvpKPIHeaderDimensionStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{path:\'preVar&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.listGroupBy\'}" writeToDom="true"/></customData></Text></FlexBox></template:if><template:if test="{= (${ovpCardProperties&gt;/showFilterInHeader} === true) &amp;&amp; {parts:[{path:\'selectionVar&gt;\'}, {path:\'selVar&gt;\'}], formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'} !== \'\'}"><template:if test="{= !${ovpCardProperties&gt;/ignoreSelectionVariant} === true}"><template:then><FlexBox alignItems="Start" justifyContent="flex-start" class="KpiSelVarFlex" visible="{ovpCardProperties&gt;/showFilterInHeader}"><template:repeat list="{path:\'selVar&gt;SelectOptions\'}" var="selectionVar"><Text id="{path:\'selectionVar&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheIdForFilter\'}" text="{parts:[{path:\'selectionVar&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'}" class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{parts:[{path:\'selectionVar&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByString\'}" writeToDom="true"/></customData></Text></template:repeat></FlexBox></template:then><template:else><FlexBox alignItems="Start" justifyContent="flex-start" class="KpiSelVarFlex" visible="{ovpCardProperties&gt;/showFilterInHeader}"><template:repeat list="{path:\'ovpCardProperties&gt;/idForExternalFilters\'}" var="selectionVar"><Text id="{path:\'selectionVar&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheIdForFilterNotFromSelVar\'}" text="{parts:[{path:\'selectionVar&gt;\'},{path:\'ovpCardProperties&gt;/filters\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" class="sapOvpKPIHeaderFilterStyle tabindex-1 cardHeaderText"><customData><ovp:CustomData key="aria-label" value="{parts:[{path:\'selectionVar&gt;\'},{path:\'ovpCardProperties&gt;/filters\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formTheFilterByStringNotFromSelVar\'}" writeToDom="true"/></customData></Text></template:repeat></FlexBox></template:else></template:if></template:if></VBox></template:if></template:with></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/LineItemDetails.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><QuickView placement="Auto"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetailsQuickViewGroup" type="XML"/></QuickView></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/LineItemDetailsQuickViewGroup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;quickViewCard}" writeToDom="true"/></customData><template:with path="entityType&gt;@com.sap.vocabularies.UI.v1.HeaderInfo" var="header"><template:with path="entityType&gt;@com.sap.vocabularies.UI.v1.Facets" var="facets"><QuickViewPage header="{= ${header&gt;TypeNamePlural} ? ${header&gt;TypeNamePlural@@sap.ui.model.odata.v4.AnnotationHelper.format} :  \'{ovplibResourceBundle&gt;LineItem_Detail_Text}\' }" icon="{= ${header&gt;ImageUrl} ? ${header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : (${header&gt;TypeImageUrl} ? ${header&gt;TypeImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format} : \'\') }" title="{= ${header&gt;Title/Value} ? ${path: \'header&gt;Title/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }" description="{= ${header&gt;Description/Value} ? ${header&gt;Description/Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format} :  \'\' }"><template:repeat list="{path:\'facets&gt;\'}" var="referenceFacet"><template:if test="{referenceFacet&gt;com.sap.vocabularies.UI.v1.IsSummary}"><template:with path="referenceFacet&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="target"><QuickViewGroup heading="{target&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}"><template:repeat list="{path:\'target&gt;Data\'}" var="dataField"><template:if test="{dataField&gt;Url}"><template:then><template:if test="{dataField&gt;Url/UrlRef}"><template:then><QuickViewGroupElement label="{dataField&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" url="{dataField&gt;Url/UrlRef@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" type="link"/></template:then><template:else><QuickViewGroupElement label="{dataField&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" url="{dataField&gt;Url@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" type="link"/></template:else></template:if></template:then><template:else><template:if test="{dataField&gt;Value}"><template:with path="dataField&gt;Value/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="fValue"><template:if test="{= ${fValue&gt;sap:semantics} === \'url\'}"><template:then><QuickViewGroupElement label="{dataField&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" url="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" type="url"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'email\'}"><template:then><QuickViewGroupElement label="{dataField&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" type="email"/></template:then><template:else><template:if test="{= ${fValue&gt;sap:semantics} === \'tel\'}"><template:then><QuickViewGroupElement label="{dataFie\\ld&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{dataField&gt;Value@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" type="phone"/></template:then><template:else><QuickViewGroupElement label="{dataField&gt;Label@@sap.ui.model.odata.odata.v4.AnnotationHelper.format}" value="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.v4.AnnotationHelper.formatField\'}"/></template:else></template:if></template:else></template:if></template:else></template:if></template:with></template:if></template:else></template:if></template:repeat></QuickViewGroup></template:with></template:if></template:repeat></QuickViewPage></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/SubTitle.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\'}"><template:if test="{ovpCardProperties&gt;/dynamicSubtitleAnnotationPath}"><template:then><template:with path="ovpCardProperties&gt;/dynamicSubtitleAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="headerInfo"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="selVar"><template:if test="{headerInfo&gt;Description}"><HBox><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'headerInfo&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="ovpDescriptionValue" maxLines="2" text="{headerInfo&gt;Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{headerInfo&gt;Description/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><template:if test="{ovpCardProperties&gt;/subTitle}"><template:then><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="SubTitle-Text" maxLines="2" text="{ovpCardProperties&gt;/subTitle}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/subTitle}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{ovpCardProperties&gt;/dataPointAnnotationPath}"><template:then><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:with path="ovpCardProperties&gt;/selectionAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="selVar"><template:if test="{dataPoint&gt;Description}"><HBox><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'},{path:\'selVar&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" class="sapOvpCardSubtitleContainer ovpHeaderContainer"><Text id="ovpDescriptionValue" maxLines="2" text="{dataPoint&gt;Description@@sap.ui.model.odata.v4.AnnotationHelper.format}" class="sapOvpCardSubtitle sapUiTinyMarginTop tabindex-1"><customData><ovp:CustomData key="aria-label" value="{dataPoint&gt;Description@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="4" writeToDom="true"/></customData></Text></FlexBox></HBox></template:if></template:with></template:with></template:then><template:else><FlexBox class="sapOvpCardSubtitleContainer ovpHeaderContainer"/></template:else></template:if></template:else></template:if></template:else></template:if></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/generic/Title.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{ovpCardProperties&gt;/title} || {ovpCardProperties&gt;/dataPointAnnotationPath}"><HBox><template:if test="{ovpCardProperties&gt;/title}"><template:then><FlexBox class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text id="ovpHeaderTitle" maxLines="3" text="{ovpCardProperties&gt;/title}" class="sapOvpCardTitle tabindex-1" build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData key="aria-label" value="{ovpCardProperties&gt;/title}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="2" writeToDom="true"/></customData></Text></FlexBox></template:then><template:else><template:if test="{= ${ovpCardProperties&gt;/state} !== \'Loading\' &amp;&amp; ${ovpCardProperties&gt;/dataPointAnnotationPath}}"><template:then><template:with path="ovpCardProperties&gt;/dataPointAnnotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="dataPoint"><template:if test="{dataPoint&gt;Title}"><FlexBox items="{parts:[{path:\'entitySet&gt;\'},{path:\'dataPoint&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getAggregateNumber\'}" class="ovpHeaderContainer sapOvpCardHeaderTitleWidth"><Text id="ovpHeaderTitleFromKPI" maxLines="3" text="{dataPoint&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" class="sapOvpCardTitle tabindex-1" build:metadata="#pattern:GenericCard;prop:text:Title"><customData><ovp:CustomData key="aria-label" value="{dataPoint&gt;Title@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="heading" writeToDom="true"/><ovp:CustomData key="aria-level" value="3" writeToDom="true"/></customData></Text></FlexBox></template:if></template:with></template:then></template:if></template:else></template:if><template:if test="{= ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.v4.list.List\' || ${ovpCardProperties&gt;/contentFragment} === \'sap.ovp.cards.v4.table.Table\'}"><template:if test="{ovpCardProperties&gt;/countHeaderFragment}"><core:Fragment fragmentName="{ovpCardProperties&gt;/countHeaderFragment}" type="XML"/></template:if></template:if></HBox></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/LinkList.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns="sap.m"><template:if test="{ovpCardProperties&gt;/staticContent}"><template:then><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties&gt;/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStaticDataCarousel" type="XML"/></template:elseif></template:if></template:then><template:else><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/headerAnnotationPath" var="header"><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'standard\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListStandard" type="XML"/></template:then><template:elseif test="{= ${ovpCardProperties&gt;/listFlavor} === \'carousel\'}"><core:Fragment fragmentName="sap.ovp.cards.v4.linklist.fragments.LinkListCarousel" type="XML"/></template:elseif></template:if></template:with></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListCarousel.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m"><Carousel id="pictureCarousel" loop="true" class="sapOvpCardLinkListCarousel cardType" arrowsPlacement="PageIndicator" pages="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListCarouselType}" writeToDom="true"/></customData><pages><VBox class="sapMCrslItemTableCell"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/identificationAnnotationPath" var="identification"><template:if test="{= ${header&gt;Title/Value} || ${header&gt;Description/Value}}"><VBox class="{= ${header&gt;Title/Value} || ${header&gt;Description/Value} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><Link class="sapOvpCardLinkListTitle " press="onLinkNavigationSingleTarget" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:then><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><Link class="sapOvpCardLinkListTitle" press="onLinkListActionPress" app:dataAction="{entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><Link class="sapOvpCardLinkListTitle" target="_blank" href="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatString\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link class="sapOvpCardLinkListTitle" press="onLinkPopover" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"><customData><ovp:CustomData key="aria-label" value="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:if></template:with></template:elseif><template:else><Text class="sapOvpCardLinkListTitle" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><Text class="sapOvpCardLinkListSubTitle" text="{path:\'header&gt;Description\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></VBox></template:if><template:if test="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkNavigationSingleTarget" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}" alt="{path:\'header&gt;Title/Value\',formatter:\'sap.ui.model.odata.v4.AnnotationHelper.format\'}"/></HBox></template:then><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkListActionPress" app:dataAction="{entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4..format}" alt="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkListItemPress" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}" alt="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Image id="ovpLinkLinstCarouselImg" densityAware="true" press="onLinkPopover" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}" alt="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:if></template:with></template:elseif><template:else><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="ovpLinkLinstCarouselImg" densityAware="true" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}" alt="{header&gt;Title/Value@@sap.ui.model.odata.v4.AnnotationHelper.format}"/></HBox></template:else></template:if></template:then><template:else><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><core:Icon width="100%" size="128px" press="onLinkNavigationSingleTarget" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:then><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><core:Icon width="100%" size="128px" press="onLinkListActionPress" app:dataAction="{entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><core:Icon width="100%" size="128px" press="onLinkListItemPress" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><core:Icon width="100%" size="128px" press="onLinkPopover" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:if></template:with></template:elseif><template:else><core:Icon width="100%" size="128px" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></template:else></template:if></template:else></template:if></template:with></VBox></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true"/></customData></Carousel></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListNavigationTargets.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover title="{ovplibResourceBundle&gt;RELATED_APPS}" placement="Auto"><HBox class="sapOvpLinkListStandardHBox"><List showSeparators="None" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' }"><CustomListItem/></List></HBox></Popover></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStandard.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox cardType"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListType}" writeToDom="true"/></customData><List id="ovpLinkList" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\'}" showSeparators="None" items="{parts:[{path:\'entitySet&gt;\'},{path:\'header&gt;\'}],formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatItems\'}"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/identificationAnnotationPath" var="identification"><CustomListItem id="ovpCLI" type="Active" press="{= ${path: \'identification&gt;0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkNavigationSingleTarget\'           : ${path: \'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListActionPress\'           : ${path: \'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'onLinkListLineItemUrl\'           : ${path: \'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'           : \'\'}" app:dataAction="entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action@@sap.ui.model.odata.v4.AnnotationHelper.format}"><HBox class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitleImage\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCozyTitleIcon\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleImageSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCozyTitleIconSubtitle\'             : ${ovpCardProperties&gt;/densityStyle} === \'compact\' &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitleImage\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; !${header&gt;Description/Value}) ? \'sapOvpCompactTitleIcon\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;ImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleImageSubtitle\'             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${header&gt;TypeImageUrl} &amp;&amp; (${header&gt;Title/Value} &amp;&amp; ${header&gt;Description/Value}) ? \'sapOvpCompactTitleIconSubtitle\'             : \'ovpDefaultClass\'}             {= ${path: \'identification&gt;0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'\'             : ${path: \'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'} ? \'linkListHasPopover\'             : \'\'} "><template:if test="{= ${header&gt;ImageUrl} || ${header&gt;TypeImageUrl}}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' }"><template:if test="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}"><template:then><template:if test="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar id="linkListImage" class="sapUiSmallMarginEnd" displayShape="Circle" displaySize="Custom" customDisplaySize="40px" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format}" initials="{path:\'header&gt;Initials\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getAvatarInitials\'}"/></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar id="linkListImage" class="sapUiSmallMarginEnd" displayShape="Circle" displaySize="Custom" customDisplaySize="36px" src="{header&gt;ImageUrl@@sap.ui.model.odata.v4.AnnotationHelper.format\'}" initials="{path:\'header&gt;Initials\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getAvatarInitials\'}"/></FlexBox></template:else></template:if></template:then><template:else><FlexBox height="40px"><core:Icon id="linkListIcon" size="24px" class="sapOvpLinkListImageCenter" src="{path:\'header&gt;TypeImageUrl\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.getIconPath\'}"/></FlexBox></template:else></template:if></VBox></template:then></template:if><VBox class="sapOvpLinkListItem"><template:if test="{path:\'identification&gt;0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:if test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:then><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" app:dataAction="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Action\',formatter:\'sap.ui.model.odata.AnnotationHelper.format\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.UI.v1.LineItem/0/Url\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:if test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:then><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:then><template:else><Label id="linkListTitleLabel" target="_blank" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if></template:elseif><template:elseif test="{path:\'entityType&gt;@com.sap.vocabularies.Communication.v1.Contact\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.linkedAction\'}"><template:with helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" path="ovpCardProperties&gt;/communicationPath" var="contact"><template:if test="{contact&gt;}"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link id="linkListTitleLabel" press="onLinkPopover" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:if></template:with></template:elseif><template:else><Label id="linkListTitleLabel" class="{= ${header&gt;Description/Value} || !${header&gt;Description/Value} &amp;&amp; !${header&gt;ImageUrl} &amp;&amp; !${header&gt;TypeImageUrl} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}" text="{path:\'header&gt;Title\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:else></template:if><template:if test="{header&gt;Description/Value}"><template:then><Label id="linkListSubTitleLabel" class="sapOvpCardLinkListSubTitle" text="{path:\'header&gt;Description\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatField\'}"/></template:then></template:if></VBox></HBox></CustomListItem></template:with></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataCarousel.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m"><VBox><Carousel id="pictureCarousel" loop="true" class="sapOvpCardLinkListCarousel cardType" arrowsPlacement="PageIndicator"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListCarouselType}" writeToDom="true"/></customData><pages><template:repeat list="{ovpCardProperties&gt;/staticContent}" var="contentRow"><VBox class="sapMCrslItemTableCell"><template:if test="{= ${contentRow&gt;title} || ${contentRow&gt;subTitle}}"><VBox class="{= ${contentRow&gt;title} || ${contentRow&gt;subTitle} ? \'sapOvpCarouselContentHeader\' : \'sapOvpCarouselContentHeader sapOvpCarouselHideContentHeader\' }"><template:if test="{contentRow&gt;dataAction}"><template:then><Link id="linkListTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListTitle" text="{contentRow&gt;title}" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:then><template:else><Link id="linkListTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListTitle" text="{contentRow&gt;title}" press="onLinkListItemPressLocalData" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;title}" writeToDom="true"/><ovp:CustomData key="role" value="link" writeToDom="true"/></customData></Link></template:else></template:if><Text id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"><customData><ovp:CustomData key="aria-label" value="{contentRow&gt;subTitle}" writeToDom="true"/><ovp:CustomData key="role" value="text" writeToDom="true"/></customData></Text></VBox></template:if><template:if test="{contentRow&gt;dataAction}"><template:then><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="linkListImage--{contentRow&gt;id}" alt="{contentRow&gt;imageAltText}" tooltip="{contentRow&gt;toolTip}" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}" densityAware="true" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"/></HBox></template:then><template:else><core:Icon id="linkListIcon--{contentRow&gt;id}" size="128px" src="{contentRow&gt;imageUri}" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" press="onLinkListActionPressLocalData" app:dataAction="{contentRow&gt;dataAction}"/></template:else></template:if></template:then><template:else><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><HBox class="sapMCrslItemTableCell sapOVPCarouselImageContainer" alignItems="Center" justifyContent="Center"><Image id="linkListImage--{contentRow&gt;id}" alt="{contentRow&gt;imageAltText}" tooltip="{contentRow&gt;toolTip}" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}" densityAware="true" press="onLinkListItemPressLocalData" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"/></HBox></template:then><template:else><core:Icon id="linkListIcon--{contentRow&gt;id}" size="128px" src="{contentRow&gt;imageUri}" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" press="onLinkListItemPressLocalData" app:targetUri="{contentRow&gt;targetUri}" app:openInNewWindow="{contentRow&gt;openInNewWindow}"/></template:else></template:if></template:else></template:if></VBox></template:repeat></pages><customData><ovp:CustomData key="aria-live" value="assertive" writeToDom="true"/></customData></Carousel></VBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/linklist/fragments/LinkListStaticDataStandard.fragment.xml":'<core:FragmentDefinition xmlns:build="sap.build" xmlns:core="sap.ui.core" xmlns:l="sap.ui.layout" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:smartlink="sap.ui.comp.navpopover" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns="sap.m" xmlns:f="sap.f"><HBox id="ovpListRow" class="sapOvpLinkListStandardHBox"><List id="ovpLinkList" class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListStandardPaddingCozy\' : \'sapOvpLinkListStandardPaddingCompact\' } cardType" showSeparators="None"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;linkListType}" writeToDom="true"/></customData><items><template:repeat list="{ovpCardProperties&gt;/staticContent}" var="contentRow"><CustomListItem id="{contentRow&gt;id}" type="Active" press="{= ${contentRow&gt;semanticObject} &amp;&amp; ${contentRow&gt;action} ? \'onLinkListSemanticObjectPressLocalData\' : ${contentRow&gt;dataAction} ? \'onLinkListActionPressLocalData\' : ${contentRow&gt;semanticObject} &amp;&amp; !${contentRow&gt;action} ? \'\' : \'onLinkListItemPressLocalData\'}" app:targetUri="{= ${contentRow&gt;targetUri} ? ${contentRow&gt;targetUri} : \'\'}" app:openInNewWindow="{=${contentRow&gt;openInNewWindow} ? ${contentRow&gt;openInNewWindow} :\'\' }" app:dataAction="{= ${contentRow&gt;dataAction} ? ${contentRow&gt;dataAction} : \'\'}" app:contentRowIndex="{path:\'contentRow&gt;\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.contentRowIndex\'}"><HBox class="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleImage\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleIcon\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleImageSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'cozy\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCozyTitleIconSubtitle\'                             : ${ovpCardProperties&gt;/densityStyle} === \'compact\' &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleImage\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; !${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleIcon\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; !${path: \'contentRow&gt;imageUri\'} &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === true &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleImageSubtitle\'                             : ( ${ovpCardProperties&gt;/densityStyle} === \'compact\') &amp;&amp; ${path: \'contentRow&gt;imageUri\', formatter: \'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'} === false &amp;&amp; (${contentRow&gt;title} &amp;&amp; ${contentRow&gt;subTitle}) ? \'sapOvpCompactTitleIconSubtitle\'                             : \'ovpDefaultClass\'}"><template:if test="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.isImageUrlStaticData\'}"><template:then><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemImageCozy\' : \'sapOvpLinkListItemImageCompact\' }"><template:if test="{= ${ovpCardProperties&gt;/densityStyle} === \'cozy\'}"><template:then><FlexBox height="40px"><f:Avatar id="linkListImage--{contentRow&gt;id}" class="sapUiSmallMarginEnd" tooltip="{contentRow&gt;toolTip}" displayShape="Circle" displaySize="Custom" customDisplaySize="40px" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"/></FlexBox></template:then><template:else><FlexBox height="40px"><f:Avatar id="linkListImage--{contentRow&gt;id}" class="sapUiSmallMarginEnd" tooltip="{contentRow&gt;toolTip}" displayShape="Circle" displaySize="Custom" customDisplaySize="36px" src="{path:\'contentRow&gt;imageUri\',formatter:\'sap.ovp.cards.v4.linklist.AnnotationHelper.formatUrl\'}"/></FlexBox></template:else></template:if></VBox></template:then><template:elseif test="{contentRow&gt;imageUri}"><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemIconCozy\' : \'sapOvpLinkListItemIconCompact\' }"><FlexBox height="40px"><core:Icon id="linkListIcon--{contentRow&gt;id}" class="sapOvpLinkListImageCenter" tooltip="{contentRow&gt;toolTip}" useIconTooltip="false" size="22px" src="{contentRow&gt;imageUri}"/></FlexBox></VBox></template:elseif></template:if><template:if test="{contentRow&gt;dataAction}"><template:then><VBox class="sapOvpLinkListItem"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:then><template:elseif test="{= ${contentRow&gt;semanticObject} &amp;&amp; ${contentRow&gt;action} }"><VBox class="sapOvpLinkListItem"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:elseif><template:else><VBox class="sapOvpLinkListItem {= ${ovpCardProperties&gt;/densityStyle} === \'cozy\' ? \'sapOvpLinkListItemCozy\' : \'sapOvpLinkListItemCompact\' }"><Label id="linkListTitleLabel--{contentRow&gt;id}" text="{contentRow&gt;title}" class="{= ${contentRow&gt;subTitle} || !${contentRow&gt;subTitle} &amp;&amp; !${contentRow&gt;imageUri} ? \'sapOvpCardLinkListTitle\' : \'sapOvpCardLinkListTitleOnly\'}"/><Label id="linkListSubTitleLabel--{contentRow&gt;id}" class="sapOvpCardLinkListSubTitle" text="{contentRow&gt;subTitle}"/></VBox></template:else></template:if></HBox></CustomListItem></template:repeat></items></List></HBox></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/CondensedBarList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem id="listItem" type="Active" press="onListItemPress" class="sapOvpBarList sapOvpBarCondensedList"><template:if test="{= ${ovpCardProperties&gt;/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text id="DataField" class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><HBox class="sapOvpBarListHBox sapOvpBarStandardList"><micro:ComparisonMicroChart id="BarChartDataPoint" class="sapOvpBarListComparisonMicroChartAlignment" width="100%" shrinkable="true" colorPalette="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.colorPaletteForComparisonMicroChart\'}" minValue="{minMaxModel&gt;/minValue}" maxValue="{minMaxModel&gt;/maxValue}"><micro:data><micro:ComparisonMicroChartData displayValue=" " value="{= \'{path: \\\'\' + ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }" color="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointColor\'}"/></micro:data></micro:ComparisonMicroChart><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointPercentageUnit\'}}"><template:then><ObjectNumber id="DataPoint1" class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberPercentage" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber id="DataPoint1" class="sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpObjectNumber" textAlign="End" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"/></template:else></template:if></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox class="textAlignRight"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 1}"><ObjectNumber id="DataPoint2" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber sapOvpBarListSubDataField\' : \'sapOvpBarListObjectNumber sapOvpBarListSubDataField sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}"/></template:if></template:else></template:if></HBox></CustomListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/ExtendedBarList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:micro="sap.suite.ui.microchart"><items><CustomListItem id="listItem" type="Active" press="onListItemPress"><HBox class="sapOvpBarListHBox sapOvpExtendedBarListHBox"><VBox class="sapOvpBarListVBoxLeft"><template:if test="{= ${ovpCardProperties&gt;/showLineItemDetail} === true}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link class="sapOvpBarListDataField sapOvpOverflowEllipsisDataField sapOvpBarListTitle" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}"><navpopover:SmartLink class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfFirstDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text id="DataField1" class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfSecondDataField\'}"><template:then><navpopover:SmartLink class="sapOvpExtendedBarListFirstDataField sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'lineItem&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.semanticObjectOfSecondDataField\'}" contactAnnotationPath="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text id="DataField2" class="sapOvpBarListDataField sapOvpBarListSubDataField sapOvpExtendedBarListBlock sapOvpOverflowEllipsisDataField" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if><layoutData><FlexItemData growFactor="1"/></layoutData><micro:ComparisonMicroChart id="BarChartDataPoint" class="sapOvpBarListComparisonMicroChartAlignment" width="100%" height="1rem" colorPalette="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.colorPaletteForComparisonMicroChart\'}" minValue="{minMaxModel&gt;/minValue}" maxValue="{minMaxModel&gt;/maxValue}"><micro:data><micro:ComparisonMicroChartData displayValue=" " value="{= \'{path: \\\'\' + ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataPointValue\'} + \'\\\', formatter: \\\'.returnBarChartValue\\\'}\' }" color="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointColor\'}"/></micro:data></micro:ComparisonMicroChart></VBox><VBox class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0 ? \'sapOvpBarListVBoxRight\' : \'sapOvpListEmptyField\'}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstContactAnnotation\'} === true}"><template:then><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:then><template:if test="{= ${dataField&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox class="textAlignRight" width="100%"><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" textAlign="Right" press="onContactDetailsLinkPress"/></VBox></template:with></template:then></template:if></template:then></template:if></template:repeat></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 1}"><ObjectNumber id="DataPoint2" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}"/></template:if></template:else></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 2}"><ObjectNumber id="DataPoint3" class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} === \'None\' ?                                             \'sapOvpBarListObjectNumber\' : \'sapOvpBarListObjectNumber sapOvpBarListObjectNumberWithoutState\'} sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatThirdDataPointState\'}"/></template:if><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointPercentageUnit\'}}"><template:then><ObjectNumber id="BarChartValue" class="sapOvpBarListObjectNumber sapOvpBarListObjectNumberPercentage sapOvpObjectNumber" textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"/></template:then><template:else><ObjectNumber id="BarChartStateValue" class="sapOvpBarListObjectNumber valueStateText " textAlign="End" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></VBox></HBox></CustomListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/List.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/imageSupported} &amp;&amp; ${ovpCardProperties&gt;/listType} === \'condensed\' }"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardListImage" type="XML"/></template:then><template:else><List id="ovpList" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}" class="listCardType"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="lineItem"><template:if test="{= ${ovpCardProperties&gt;/listType} === \'extended\'}"><template:then><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'bar\'}"><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;barChartCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ExtendedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;listCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.ObjectList" type="XML"/></template:else></template:if></template:then><template:else><template:if test="{= ${ovpCardProperties&gt;/listFlavor} === \'bar\'}"><template:then><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;barChartCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.CondensedBarList" type="XML"/></template:then><template:else><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;listCard}" writeToDom="true"/></customData><core:Fragment fragmentName="sap.ovp.cards.v4.list.StandardList" type="XML"/></template:else></template:if></template:else></template:if></template:with></List></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/ObjectList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><items><ObjectListItem id="listItem" class="sapOvpObjectListItem sapOvpListFragment sapUiContentPadding" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}" numberState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"><attributes><ObjectAttribute id="listItem2Row1Column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:then><template:else><ObjectAttribute id="listItem3row1column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fifthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></template:else></template:if></attributes><firstStatus><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatSecondDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><ObjectStatus id="listItem2row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:else></template:if></template:else></template:if></firstStatus><secondStatus><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 2}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatThirdDataPointState\'}"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 1}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fourthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/fifthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:then><template:else><ObjectStatus id="listItem3row2column" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/sixthDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" state="None"/></template:else></template:if></template:else></template:if></template:else></template:if></secondStatus></ObjectListItem></items></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/StandardList.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><items><StandardListItem id="listItem" class="sapOvpStandardListItem" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" description="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" info="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}" infoState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"/></items></core:FragmentDefinition>',
	"sap/ovp/cards/v4/list/StandardListImage.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:ovp="sap.ovp.ui" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1" xmlns:build="sap.build"><List id="ovpList" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="lineItem"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;imageListCardType}" writeToDom="true"/></customData><items><StandardListItem id="listItem" class="sapOvpStandardListItem sapOvpStandardListItemImagesIcons" icon="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatImageUrl\'}" iconInset="false" title="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" description="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}" info="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointOrField\'}" infoState="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0 ? ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'} : \'None\' }" type="Active" press="onListItemPress"/></items></template:with></List></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/Table.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><Table id="ovpTable" class="ovpTableClass cardType" items="{parts:[{path:\'entitySet&gt;\'},{path:\'ovpCardProperties&gt;/annotationPath\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatItems\'}"><customData><ovp:CustomData key="aria-label" value="{ovplibResourceBundle&gt;tableCard}" writeToDom="true"/></customData><template:if test="{= ${ovpCardProperties&gt;/layoutDetail} === \'resizable\'}"><template:then><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableEasyScanLayout" type="XML"/></template:else></template:if></Table></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableDashBoardLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:navpopover="sap.ui.comp.navpopover" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="eachItem"><template:with path="eachItem&gt;" helper="sap.ovp.cards.v4.V4AnnotationHelper.removeDuplicateDataField" var="lineItem"><columns><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField"><template:if test="{= ${dataField&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : ${dataField&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField1"><template:if test="{= ${dataField1&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField1&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField1&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField1&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField1&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField1&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField1&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField1&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField1&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField1&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField2"><template:if test="{= ${dataField2&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField2&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField2&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField2&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField2&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField2&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'Center\' : ${dataField2&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField2&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : ${dataField2&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField2&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField3"><template:if test="{=  !${dataField3&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember}}"><template:then><template:if test="{= ${dataField3&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.setAlignmentForDataPoint\'} === \'Right\' ? \'Right\' : \'Left\'}"><Text text="{path:\'dataField3&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:then><template:elseif test="{= ${dataField3&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><Column styleClass="sapTableColumnHide" visible="false" hAlign="{= ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'Right\' : ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'Center\':                                 ${dataField3&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'Left\' : \'Right\'}"><Text class="displayBlock {= ${path: \'dataField3&gt;\',                                      formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Right\' ? \'textAlignRight\' : ${path: \'dataField3&gt;\',                                  formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\'? \'textAlignCenter\':                                     ${dataField3&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0 ? \'textAlignLeft\' : \'textAlignRight\'}" text="{path:\'dataField3&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForDataItem\'}" wrapping="true" wrappingType="Hyphenated"/></Column></template:elseif></template:if></template:then></template:if></template:repeat></columns><items><ColumnListItem id="tableItem" type="Active" press="onColumnListItemPress"><cells><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField4"><template:if test="{= ${dataField4&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/High\'}"><template:then><template:if test="{= ${dataField4&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{= (${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataFieldName\'} === ${dataField4&gt;Label} &amp;&amp; ${ovpCardProperties&gt;/showLineItemDetail})}"><template:then><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.LineItemDetails" type="XML"/><Link class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}" press="onContactDetailsLinkPress"/></VBox></template:then><template:elseif test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:elseif><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField4&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField4&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField4&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField4&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField4&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField4&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField4&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField4&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField4&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'dataField4&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField5"><template:if test="{= ${dataField5&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Medium\'}"><template:then><template:if test="{= ${dataField5&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField5&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField5&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField5&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField5&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField5&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField5&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField5&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === Center ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField5&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField5&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'dataField5&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField6"><template:if test="{= ${dataField6&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} === \'com.sap.vocabularies.UI.v1.ImportanceType/Low\'}"><template:then><template:if test="{= ${dataField6&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField6&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField6&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField6&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField6&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField6&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField6&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField6&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField6&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField6&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'dataField6&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat><template:repeat list="{path:\'lineItem&gt;\'}" var="dataField7"><template:if test="{=  !${dataField7&gt;@com.sap.vocabularies.UI.v1.Importance/$EnumMember} }"><template:then><template:if test="{= ${dataField7&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataField\'}"><template:then><template:if test="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}"><template:then><navpopover:SmartLink class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow ovpTableSmartLink\' : \'sapTableDataRowIE ovpTableSmartLink\' }" text="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}" semanticObject="{parts:[{path:\'entitySet&gt;\'},{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatsemanticObjectOfDataFieldGeneric\'}" contactAnnotationPath="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkNavTargetForContactAnno\'}" enableAvailableActionsPersonalization="false" forceLinkRendering="{parts:[{path:\'entitySet&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.checkForContactAnnotation\'}"/></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueGeneric\'}"/></template:else></template:if></template:then><template:elseif test="{= ${dataField7&gt;$Type} === \'com.sap.vocabularies.UI.v1.DataFieldForAnnotation\'}"><template:if test="{= ${dataField7&gt;Target/$AnnotationPath}.indexOf(\'com.sap.vocabularies.Communication.v1.Contact\') &gt;= 0}"><template:then><template:with path="dataField7&gt;Target/$AnnotationPath" helper="sap.ui.model.odata.v4.AnnotationHelper.resolve$Path" var="contact"><VBox><core:Fragment fragmentName="sap.ovp.cards.v4.generic.ContactDetails" type="XML"/><Link binding="{= ${ path: \'dataField7&gt;Target/$AnnotationPath\'}.indexOf(\'/\') &gt; -1 ? \'{\' + ${path: \'dataField7&gt;Target/$AnnotationPath\'}.slice(0, ${ path: \'dataField7&gt;Target/$AnnotationPath\'}.indexOf(\'/\')) + \'}\' : null}" class="textAlignLeft {= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{contact&gt;fn@@sap.ui.model.odata.v4.AnnotationHelper.format}" press="onContactDetailsLinkPress"/></VBox></template:with></template:then><template:elseif test="{= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGeneric\'} === true  &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><sfi:SmartField class="ovpSmartLink {= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'}" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateForSmartFieldGeneric\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:elseif><template:else><ObjectNumber class="{= ${path: \'dataField7&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.checkCriticalityGenericForTableStatus\'} === \'Center\' ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'dataField7&gt;\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValue\'}" unit="{parts:[{path:\'dataField7&gt;\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'dataField7&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointStateGeneric\'}"/></template:else></template:if></template:elseif></template:if></template:then></template:if></template:repeat></cells></ColumnListItem></items></template:with></template:with></core:FragmentDefinition>',
	"sap/ovp/cards/v4/table/TableEasyScanLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:build="sap.build" xmlns:ovp="sap.ovp.ui" xmlns:sfi="sap.ui.comp.smartfield" xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1"><template:if test="{= ${ovpCardProperties&gt;/disableTableCardFlexibility} === true}"><template:then><template:with path="ovpCardProperties&gt;/annotationPath" helper="sap.ovp.cards.v4.V4AnnotationHelper.resolveEntityTypePath" var="lineItem"><columns><Column><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getFirstDataFieldName\'}"/></Column><Column><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getSecondDataFieldName\'}"/></Column><Column hAlign="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'Center\' : \'Right\'}"><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><Text class="displayBlock {= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'}" text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getLabelForFirstDataPoint\'}"/></template:then><template:else><Text text="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.getThirdDataFieldName\'}"/></template:else></template:if></Column></columns><items><ColumnListItem id="tableItem" type="Active" press="onColumnListItemPress"><cells><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/secondDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.getDataPointsCount\'} &gt; 0}"><template:then><template:if test="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticality\'} === true &amp;&amp; ${ovpCardProperties&gt;/enableLocaleCurrencyFormatting} === false}"><template:then><sfi:SmartField class="textAlignCenter" editable="false" uomEditable="false" enabled="true" clientSideMandatoryCheck="false" value="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataPointValueOnIndex\'}"><sfi:controlProposal><sfi:ControlProposal><sfi:objectStatus><sfi:ObjectStatus criticality="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointStateForSmartField\'}" criticalityRepresentationType="WithoutIcon"/></sfi:objectStatus></sfi:ControlProposal></sfi:controlProposal></sfi:SmartField></template:then><template:else><ObjectNumber class="{= ${path: \'lineItem&gt;\', formatter: \'sap.ovp.cards.v4.V4AnnotationHelper.isFirstDataPointCriticalityForTableStatus\'} === true ? \'textAlignCenter\' : \'textAlignRight\'} sapOvpObjectNumber" number="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'},{path:\'ovpConstants&gt;/dontIncludeUOM\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatObjectNumber\'}" unit="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/firstDataPointIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatUnit\'}" state="{path:\'lineItem&gt;\',formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatFirstDataPointState\'}"/></template:else></template:if></template:then><template:else><Text class="{= ${ovpCardProperties&gt;/webkitSupport} ? \'sapTableDataRow\' : \'sapTableDataRowIE\' }" text="{parts:[{path:\'lineItem&gt;\'},{path:\'ovpConstants&gt;/thirdDataFieldIndex\'}],formatter:\'sap.ovp.cards.v4.V4AnnotationHelper.formatDataFieldValueOnIndex\'}"/></template:else></template:if></cells></ColumnListItem></items></template:with></template:then><template:else><core:Fragment fragmentName="sap.ovp.cards.v4.table.TableDashBoardLayout" type="XML"/></template:else></template:if></core:FragmentDefinition>',
	"sap/ovp/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ovp","type":"library","embeds":["app"],"applicationVersion":{"version":"1.96.0"},"title":"SAP library: sap.ovp","description":"SAP library: sap.ovp","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_horizon"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.96","libs":{"sap.ui.core":{"minVersion":"1.96.0"},"sap.ui.layout":{"minVersion":"1.96.0"},"sap.ui.generic.app":{"minVersion":"1.96.0"},"sap.m":{"minVersion":"1.96.0"},"sap.f":{"minVersion":"1.96.0"},"sap.ui.comp":{"minVersion":"1.96.0"},"sap.viz":{"minVersion":"1.96.0"},"sap.suite.ui.microchart":{"minVersion":"1.96.0"},"sap.ui.rta":{"minVersion":"1.96.0"}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":[],"elements":[],"types":[],"interfaces":[]}}}}',
	"sap/ovp/support/DiagnosticsTool/view/DiagnosticsTool.view.xml":'<mvc:View controllerName="sap.ovp.support.DiagnosticsTool.controller.DiagnosticsTool" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:html="http://www.w3.org/1999/xhtml"><Panel expandable="false" class="sapUiNoContentPadding"><content><VBox visible="{= ${data&gt;/status} === \'Loading\'}" width="100%" alignItems="Center" class="sapUiSmallMarginTopBottom sapUiNoMarginBegin sapUiNoMarginEnd"><BusyIndicator text="The application is still loading! Please wait a few more seconds..."/></VBox><MessageStrip text="{data&gt;/statusMessage}" type="Warning" showIcon="true" visible="{= ${data&gt;/status} === \'Failed\'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"/><MessageStrip text="The current state of the application is not known by the plugin!" type="Error" showIcon="true" visible="{= ${data&gt;/status} !== \'Failed\' &amp;&amp; ${data&gt;/status} !== \'Rendered\' &amp;&amp; ${data&gt;/status} !== \'Loading\' &amp;&amp; ${data&gt;/status} !== \'Unknown\'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd sapUiSmallMarginTop sapUiNoContentPadding"/><Table id="diagnosticPropertiesTable" noDataText="No data available! Please verify that the Fiori Elements application is still running." items="{data&gt;/properties}" visible="{= ${data&gt;/status} === \'Rendered\' || ${data&gt;/status} === \'Failed\' || ${data&gt;/status} === \'Unknown\'}" class="sapUiSizeCompact"><headerToolbar><Toolbar><Title text="Time of Retrieval: {data&gt;/retrieval}"/><ToolbarSpacer/><Button icon="sap-icon://synchronize" tooltip="Refresh" press="onRefreshData"/><MenuButton icon="sap-icon://copy" tooltip="Copy Plaintext" enabled="{data&gt;/copyEnabled}" buttonMode="Split" defaultAction="onCopyDataPlain" useDefaultActionOnly="true" width="auto"><menu><Menu><items><MenuItem text="Copy Plaintext" icon="sap-icon://copy" press="onCopyDataPlain"/><MenuItem text="Copy HTML" icon="sap-icon://attachment-html" press="onCopyDataHTML"/></items></Menu></menu></MenuButton><Button icon="sap-icon://sys-help" tooltip="Documentation" press="onShowDocumentation"/></Toolbar></headerToolbar><columns><Column id="nameCol" width="30%"/><Column id="valueCol"/></columns><items><ColumnListItem><cells><VBox><Text text="{data&gt;name}" class="diagnosticPropertiesGroupHeaderContent" visible="{= ${data&gt;type} === \'group\'}"/><Text text="{data&gt;name}" visible="{= ${data&gt;type} !== \'group\'}"/></VBox><VBox><Text text="{data&gt;value}" wrapping="true" visible="{= ${data&gt;type} === \'string\'}"/><Link text="{data&gt;value}" href="{data&gt;target}" target="_blank" wrapping="true" visible="{= ${data&gt;type} === \'link\'}"/></VBox></cells></ColumnListItem></items></Table><html:textarea id="CopyDataTextArea" class="diagnosticPropertiesCopyDataTextArea">\n\t\t\t</html:textarea><html:div id="CopyDataHTML"/></content></Panel></mvc:View>'
},"sap/ovp/library-preload"
);
//# sourceMappingURL=library-preload.js.map