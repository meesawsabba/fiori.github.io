/*
 * ! SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/comp/library","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartLabel","sap/ui/core/Control","sap/m/library","sap/ui/model/odata/CountMode","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,A,a,b,c,d,M,e,S,f){"use strict";var V=M.ValueColor;var g=S.extend("sap.ui.comp.smartmicrochart.SmartAreaMicroChart",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartAreaMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:true}}},renderer:f});g.prototype._CHART_TYPE=["Area","Line"];g.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Area",true);this.setAggregation("_chart",new A(),true);};g.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);o.setSize(this.getSize(),true);};g.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);this.getAggregation("_chart").setProperty("showLabel",s,true);this.invalidate();}return this;};g.prototype.setEnableAutoBinding=function(){return this.setProperty("enableAutoBinding",true,true);};g.prototype.bindElement=function(){return this;};g.prototype._createAndBindInnerChart=function(){this._createChartLabels();this._createChartItem("chart",this._oDataPointAnnotations.Value.Path);this._createChartItem("target",this._oDataPointAnnotations.TargetValue.Path);this._buildThreshold();};g.prototype._buildThreshold=function(){var o=this._oDataPointAnnotations.CriticalityCalculation;if(this._hasMember(o,"ImprovementDirection.EnumMember")){switch(o.ImprovementDirection.EnumMember){case S._MINIMIZE:this._createChartItem("minThreshold",o.ToleranceRangeHighValue.Path,V.Good);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);break;case S._MAXIMIZE:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.ToleranceRangeLowValue.Path,V.Good);break;case S._TARGET:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);this._createChartItem("innerMinThreshold",o.ToleranceRangeLowValue.Path,V.Good);this._createChartItem("innerMaxThreshold",o.ToleranceRangeHighValue.Path,V.Good);break;default:break;}}};g.prototype._createChartLabels=function(){var l,m=this._getLabelsMap();for(var k in m){l=new c();this.getAggregation("_chart").setAggregation(m[k],l,true);}};g.prototype._createChartItem=function(h,p,i){var P,I;P=new a({x:{path:this._oChartViewMetadata.dimensionFields[0],formatter:this._formatDimension.bind(this)},y:{path:p,type:"sap.ui.model.odata.type.Decimal"}});I=new b({points:{path:this._getBindingPath(),template:P,parameters:{countMode:e.None},events:{change:this._onBindingDataChange.bind(this)}},color:i});this.getAggregation("_chart").setAggregation(h,I,true);};g.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getAggregation("chart").getBinding("points");this._updateAssociations(p);this.updateChartLabels.call(this,p);};g.prototype._updateLabel=function(n,D){var l=this.getAggregation("_chart").getAggregation(n);l.setProperty("label",D.text,true);if(D.color){l.setProperty("color",D.color,true);}};g.prototype._getLabelsMap=function(){return{"leftTop":"firstYLabel","rightTop":"lastYLabel","leftBottom":"firstXLabel","rightBottom":"lastXLabel"};};return g;});
