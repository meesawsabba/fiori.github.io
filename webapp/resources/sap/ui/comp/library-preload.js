//@ui5-bundle sap/ui/comp/library-preload.js
/*
 * ! SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.predefine('sap/ui/comp/config/condition/DateRangeType',["sap/ui/thirdparty/jquery",'sap/ui/comp/config/condition/Type','sap/ui/Device','sap/ui/core/library','sap/m/library','sap/m/Input','sap/m/DatePicker','sap/m/Text','sap/m/Select','sap/ui/core/ListItem','sap/m/Label','sap/ui/core/date/UniversalDate','sap/ui/core/format/DateFormat','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/ui/model/type/Integer','sap/ui/model/Sorter','sap/ui/model/Filter',"sap/base/Log","sap/ui/core/date/UniversalDateUtils","sap/m/DynamicDateRange","sap/m/DynamicDateUtil","sap/m/DynamicDateFormat","sap/m/CustomDynamicDateOption",'sap/m/DynamicDateValueHelpUIType','sap/base/util/UriParameters',"sap/ui/dom/jquery/cursorPos"],function(q,T,D,c,l,I,a,b,S,L,d,U,e,f,g,h,m,j,k,o,p,r,t,C,u,v){"use strict";var V=c.ValueState;var P=l.PlacementType;var w=l.StandardDynamicDateRangeKeys.concat(["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS","NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"]);var R;var x;var B;
var N=h.extend("sap.ui.model.type.NullableInteger",{parseValue:function(i,s){if(this.getPrimitiveType(s)=="string"){if(i===""){return null;}}return h.prototype.parseValue.apply(this,arguments);}});
var y=T.extend("sap.ui.comp.config.condition.DateRangeType",{constructor:function(F,i,n){T.apply(this,[F,i,n]);this.oDateFormat=i&&i._oDateFormatSettings?i._oDateFormatSettings:{UTC:true};this._bIgnoreTime=false;this._maxIntValue=10000;this.bMandatory=this.oFieldMetadata?this.oFieldMetadata.isMandatory:false;}});
y.prototype.applySettings=function(s){T.prototype.applySettings.apply(this,arguments);if(s&&s.ignoreTime){this._bIgnoreTime=s.ignoreTime;}};
y.setStartTime=function(i){i=y.toUniversalDate(i);return o.resetStartTime(i);};
y.setEndTime=function(i,n){i=y.toUniversalDate(i);if(!n){return o.resetEndTime(i);}else{return o.resetStartTime(i);}};
y.toUniversalDate=function(i){if(i instanceof Date){return U.getInstance(i);}if(!i){return U.getInstance();}if(!(i instanceof U)){return y.toUniversalDate(new Date(i));}return i;};
y.getWeekStartDate=function(i){return o.getWeekStartDate(i);};
y.getMonthStartDate=function(i){return o.getMonthStartDate(i);};
y.getQuarterStartDate=function(i){return o.getQuarterStartDate(i);};
y.getYearStartDate=function(i){return o.getYearStartDate(i);};
y.getDateRange=function(i,s,n,A,E){if(n===true){A=true;n=null;}if(!n){n=new U();}else{n=new U(n);}if(A){switch(s){case"DAY":break;case"WEEK":n=o.getWeekStartDate(n);break;case"MONTH":n=o.getMonthStartDate(n);break;case"QUARTER":n=o.getQuarterStartDate(n);break;case"YEAR":n=o.getYearStartDate(n);break;}}if(!E&&i>0){if(i!==0&&!isNaN(i)){var F=-1;switch(s){case"DAY":n.setDate(n.getDate()+F);break;case"WEEK":n.setDate(n.getDate()+(F*7));break;case"MONTH":n.setMonth(n.getMonth()+F);break;case"QUARTER":n.setMonth(n.getMonth()+(F*3));break;case"YEAR":n.setFullYear(n.getFullYear()+F);break;}}}return o.getRange(i,s,n,false);};
y.getTextField=function(n,E){var s=T._createStableId(n,"text");if(n._oOperationSelect){var A=n._oOperationSelect.getAriaLabelledBy();var F=false;for(var i=0;i<A.length;i++){if(s===A[i]){F=true;break;}}if(!F){n._oOperationSelect.addAriaLabelledBy(s);}}if(E){return new b(s,{text:"{path: '$smartEntityFilter>value1', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:n.oDateFormat.style,pattern:n.oDateFormat.pattern})+"} - {path: '$smartEntityFilter>value2', type:'sap.ui.model.type.Date', formatOptions:"+JSON.stringify({style:n.oDateFormat.style,pattern:n.oDateFormat.pattern})+"}"});}else{return new b(s,{text:{path:'$smartEntityFilter>value1',type:'sap.ui.model.type.Date',formatOptions:{style:n.oDateFormat.style,pattern:n.oDateFormat.pattern}}});}};
y.getIntField=function(i){return new I(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,value:{path:"$smartEntityFilter>value1",type:new N({},{minimum:0,maximum:i._maxIntValue})},textAlign:"End",width:"100%"});};
y.getIntFromToField=function(i,n,O){var s=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);var A=i._createIntFromToControl(i,"fieldFrom","value1");s.setLabelFor(A);n.push(A);s=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);var E=i._createIntFromToControl(i,"fieldTo","value2");s.setLabelFor(E);n.push(E);i._setIntControlBinding(A,O,"value1");i._setIntControlBinding(E,O,"value2");};
y.ControlFactory=function(i,n,O){if(O.type==="range"){var s=y.getTextField(i,O.display!=="start");s.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(s);return;}if(O.type==="int"){var s=y.getIntField(i);n.push(s);if(O.descriptionTextKeys){s.setFieldWidth("auto");s.bindProperty("description",{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer",formatter:function(){var A=O.descriptionTextKeys[0];var E=O.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(A);}else{return T.getTranslatedText(E||A);}}});}}if(O.type==="[int,int]"){y.getIntFromToField(i,n,O);}};
y._defaultOnChangeHandler=function(s,i){if(s.toLowerCase()===this.languageText.toLowerCase()){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("inputstate","NONE",i.getContext());if(this.category.indexOf("FIXED")!==0){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}return false;};
y._IntOnChangeHandler=function(s,i){if(this.basicLanguageText.indexOf("{0}")>=0){var n=new RegExp(this.basicLanguageText.replace("+","\\+").replace("{0}","([a-zA-Z0-9_]+)")+"$",'i');if(s.match(n)){var s=s.match(n)[1];if(s){var A=parseInt(s);if(!isNaN(A)&&A<=i._maxIntValue){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",A);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};
y._IntFromToOnChangeHandler=function(s,i){if(this.basicLanguageText.indexOf("- {0}")>=0&&this.basicLanguageText.indexOf("+ {1}")>=0){var n=new RegExp(this.basicLanguageText.replace("/","\\/").replace("- {0}","(\\- (\\()?((-)?([a-zA-Z0-9_]+))(\\))?)").replace("+ {1}","(\\+ (\\()?((-)?([a-zA-Z0-9_]+))(\\))?)")+"$",'i');var A=s.match(n);if(A){var E=A[3];var F=A[9];if(E&&F){var G=parseInt(E);var H=parseInt(F);if(i._isValidFromToPeriod(G,H)){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",G);i.oModel.setProperty("/condition/value2",H);i.oModel.setProperty("inputstate","NONE",i.getContext());}else{i.oModel.setProperty("inputstate","ERROR",i.getContext());}return true;}}}return false;};
y._DateOnChangeHandler=function(i,n){if(i.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=i.slice(this.languageText.length);if(s.length>0&&s[0]===" "){s=s.trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var A=n._getDateFormatter(true);var E=A.parse(s);if(E){n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",E);n.oModel.setProperty("inputstate","NONE",n.getContext());}else{n.oModel.setProperty("inputstate","ERROR",n.getContext());}return true;}}return false;};
y._DateWithDefaultsOnChangeHandler=function(s,i){var n,A,E,F,G,H=s.toLowerCase().indexOf(this.languageText.toLowerCase())===0;if(H){n=i._getDateFormatter(true);A=typeof this.defaultValues==="function"&&this.defaultValues();E=A[0]&&A[0].oDate;if(s.indexOf(this.languageText+" ")===0){F=s.slice(this.languageText.length+1);if(F[0]==="("&&F[F.length-1]===")"){F=F.slice(1,F.length-1);}}G=n.parse(F);if(G instanceof Date&&G.getTime()!==E.getTime()){return false;}}return y._DateOnChangeHandler.apply(this,arguments);};
y._DateRangeOnChangeHandler=function(i,n){if(i.toLowerCase().indexOf(this.languageText.toLowerCase())===0){var s=i.slice(this.languageText.length).trim();if(s[0]==="("&&s[s.length-1]===")"){s=s.slice(1,s.length-1);}var A=s.split("-")[0];var E=s.split("-")[1];var F=n._getDateFormatter(true);var G=F.parse(A);var H=F.parse(E);if(G&&H){n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",G);n.oModel.setProperty("/condition/value2",H);n.oModel.setProperty("inputstate","NONE",n.getContext());}else{n.oModel.setProperty("inputstate","ERROR",n.getContext());}return true;}return false;};
y._MonthOnChangeHandler=function(s,i){var M;var n=false;if(s.toLowerCase().indexOf(this.languageText.toLowerCase())===0){M=s.slice(this.languageText.length).trim();if(M.indexOf("(")==0){M=M.slice(1);M=M.slice(0,M.length-1);}n=true;}else{M=s;}var A=this.getValueList();var E=-1;A.some(function(F,G){var n=F.text.toLowerCase()===M.toLowerCase();if(n){E=G;}return n;});if(E>-1){i.oModel.setProperty("/condition/operation",this.key);i.oModel.setProperty("/condition/value1",E);i.oModel.setProperty("inputstate","NONE",i.getContext());return true;}else{if(n){i.oModel.setProperty("inputstate","ERROR",i.getContext());}return n;}};
y._DefaultFilterSuggestItem=function(s,n,A){var M=false;if(this.languageText.toLowerCase().startsWith(s.toLowerCase())){M=true;}else{var W=this.languageText.split(" ");for(var i=0;i<W.length;i++){var E=W[i];if(E.toLowerCase().startsWith(s.toLowerCase())){M=true;}}}n.setAdditionalText(this.textValue);n.setText(this.languageText);return M;};
y._HideFilterSuggestItem=function(s,i,n){return false;};
y._IntFilterSuggestItem=function(s,i,n){if(!this.basicLanguageText){this.basicLanguageText=n.basicLanguageText;}if(!this.basicLanguageText){this.basicLanguageText=this.languageText||T.getTranslatedText(this.textKey);}var A=this.basicLanguageText.indexOf("{0}");var E;var F;if(A>=0){E=this.basicLanguageText.slice(0,A).trim();F=this.basicLanguageText.slice(A+3).trim();}var G=s.split(" ");if(G.length<1||G.length>3){return false;}var M=false;var H;var J=function(s){return!!s.match(/(^[0-9]+$)/)&&parseInt(s)>=0;};if(E.toLowerCase().startsWith(G[0].toLowerCase())){if(G[1]){if(J(G[1])){H=G[1];if(G[2]){if(F.toLowerCase().startsWith(G[2].toLowerCase())){M=true;}}else{M=true;}}}else{M=true;}}else if(J(G[0])&&G.length<3){H=G[0];if(G[1]){if(F.toLowerCase().startsWith(G[1].toLowerCase())){M=true;}}else{M=true;}}else if(F.toLowerCase().startsWith(G[0].toLowerCase())&&G.length==1){M=true;}if(M&&H){var K;switch(this.category){case"DYNAMIC.DATE.INT":K="DAY";break;case"DYNAMIC.WEEK.INT":K="WEEK";break;case"DYNAMIC.MONTH.INT":K="MONTH";break;case"DYNAMIC.QUARTER.INT":K="QUARTER";break;case"DYNAMIC.YEAR.INT":K="YEAR";break;default:K="DAY";break;}var O=parseInt(H),Q=true;if(!n._maxIntValue){n._maxIntValue=n.getControls(n.key)[0].getBindingInfo('value').type.oConstraints.maximum;}if(O>n._maxIntValue){M=false;}if(this.key.startsWith("LAST")){O=O*-1;Q=false;}var W;if(this.getDateRange){var X=this.getDateRange({operation:this.key,value1:O});W=[X.value1,X.value2];}else{W=y.getDateRange(O,K,true,Q,Q);}var Y=n._getDateFormatter(true);if(Math.abs(O)===1&&this.singulareBasicLanguageText){i.setText(this.singulareBasicLanguageText);if(K!=="DAY"){i.setAdditionalText(Y.format(W[0])+" - "+Y.format(W[1]));}else{i.setAdditionalText(Y.format(W[0]));}}else{i.setText(n._fillNumberToText(this.basicLanguageText,H));i.setAdditionalText(Y.format(W[0])+" - "+Y.format(W[1]));}i._value1=parseInt(H);}else{i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;}return M;};
y._IntFromToFilterSuggestItem=function(s,i,n){var A=new RegExp("(\\- ([0-9]+))",'i'),E=new RegExp("(\\+ ([0-9]+))",'i'),F=new RegExp("(\\- ((\\(-)?([0-9]+)(\\)))?)",'i'),G=new RegExp("(\\+ ((\\(-)?([0-9]+)(\\)))?)",'i'),H=s.match(A),J=s.match(E),K=s.match(F),M=s.match(G);if((!H&&!K)||(!J&&!M)){i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;i._value2=null;return false;}var O=function($,a1){if($&&!isNaN($[2])){return parseInt($[2]);}else if(a1&&a1[2]){var s=a1[2].replace("(","").replace(")","");if(!isNaN(s)){return parseInt(s);}}return null;},Q,W;Q=O(H,K);W=O(J,M);if(!n._isValidFromToPeriod(Q,W)){i.setAdditionalText(null);i.setText(this.languageText);i._value1=null;i._value2=null;return false;}var X=n._getDateFormatter(true),Y,Z;Y=n._getTodayFromToValueFrom(Q);Z=n._getTodayFromToValueTo(W);i.setText(n._fillNumberToText(this.basicLanguageText,Q,W));i.setAdditionalText(X.format(Y)+" - "+X.format(Z));i._value1=Q;i._value2=W;return true;};
y._DateFilterSuggestItem=function(s,i,n){var A=n._getDateFormatter(true);var E=A.parse(s);if(E){i.setText(this.languageText+" ("+A.format(E)+")");i._value1=E;return true;}else{i.setText(this.languageText);i._value1=null;return false;}};
y._DateRangeFilterSuggestItem=function(s,i,n){var A=n._getDateFormatter(true);var E,F;var G="-";var H=false;var J=s.split(G);if(J.length===2){if(J[0].slice(J[0].length-1,J[0].length)==" "){J[0]=J[0].slice(0,J[0].length-1);}if(J[1].slice(0,1)==" "){J[1]=J[1].slice(1);}}else{J=s.split(" "+G+" ");}if(J.length<2){var K=s.split(" ");if(K.length===2){J=K;}}if(J.length>=1&&J.length<=2){E=A.parse(J[0]);if(E){i._value1=E;if(J.length==2&&J[1]===""){J.splice(1,1);}if(J.length==2){F=A.parse(J[1]);if(F){i._value2=F;H=true;i.setText(this.languageText+" ("+A.format(E)+" "+G+" "+A.format(F)+")");}}else{H=true;i.setText(this.languageText+" ("+A.format(E)+" "+G+")");}}}if(!H){i.setText(this.languageText);i._value1=null;i._value2=null;}return H;};
y._MonthFilterSuggestItem=function(s,n,A){var M=false;n._value1=null;var E=this.getValueList();for(var i=0;i<E.length;i++){var F=E[i];M=F.text.toLowerCase().startsWith(s.toLowerCase());if(M){n.setText(this.languageText+" ("+F.text+")");n._value1=i;break;}}return M;};
y._DefaultOnItemSelected=function(s,i,n){n.oModel.setProperty("/condition/operation",this.key);if("value1"in this){n.oModel.setProperty("/condition/value1",i._value1);}if("value2"in this){n.oModel.setProperty("/condition/value2",i._value2);}n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};
y._IntOnItemSelected=function(s,i,n){var A=i._value1;n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",A);n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};
y._IntOnItemsSelected=function(s,i,n){var A=i._value1;var E=i._value2;n.oModel.setProperty("/condition/operation",this.key);n.oModel.setProperty("/condition/value1",A);n.oModel.setProperty("/condition/value2",E);n.oModel.setProperty("inputstate","NONE",n.getContext());n._bSuggestItemSelected=true;};
y.getFixedRangeOperation=function(K,s,i,n,F,O){return{key:K,textKey:s,category:i,order:O||100,defaultValues:n||null,type:"range",display:"range",filterSuggestItem:F||y._DefaultFilterSuggestItem,onItemSelected:y._DefaultOnItemSelected,getControls:y.ControlFactory};};
y.createSingleIntRangeOperation=function(K,s,i,n,A,E,O,Z){return{key:K,textKey:s,singularTextKey:i,zeroNumberTextKey:Z,category:n,order:O,defaultValues:[A],value1:null,type:"int",descriptionTextKeys:E,onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory,_getInitialValues:function(F){return[F.value1,F.value2];}};};
y.Operations={DATERANGE:{key:"DATERANGE",textKey:"CONDITION_DATERANGETYPE_DATERANGE",category:"DYNAMIC.DATERANGE",order:2,defaultOperation:true,defaultValues:[null,null],value1:null,value2:null,onChange:y._DateRangeOnChangeHandler,filterSuggestItem:y._DateRangeFilterSuggestItem,onItemSelected:y._DefaultOnItemSelected,getControls:function(i,n){var s=false,A=false,E=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELFROM")});E.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(E);var F=new a(T._createStableId(i,"field1"),{dateValue:{path:"$smartEntityFilter>value1"},maxDate:{path:"$smartEntityFilter>value2"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(H){var J=H.getSource(),K=H.getParameter("valid");J.setValueState(K?V.None:V.Error);if(!s){s=true;J.getBinding("maxDate").attachChange(function(H){i.datePickerValidateLastValue(J);});}}});E.setLabelFor(F);n.push(F);E=new d({text:T.getTranslatedText("CONDITION_DATERANGETYPE_DATERANGE_LABELTO")});E.addStyleClass("sapUiCompFilterBarCTPaddingTop");n.push(E);var G=new a(T._createStableId(i,"field2"),{dateValue:{path:"$smartEntityFilter>value2"},minDate:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(H){var J=H.getSource(),K=H.getParameter("valid");J.setValueState(K?V.None:V.Error);if(!A){A=true;J.getBinding("minDate").attachChange(function(H){i.datePickerValidateLastValue(J);});}}});E.setLabelFor(G);n.push(G);}},DATE:{key:"DATE",textKey:"CONDITION_DATERANGETYPE_DATE",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:y._DateOnChangeHandler,filterSuggestItem:y._DateFilterSuggestItem,onItemSelected:y._DefaultOnItemSelected,getControls:function(i,n){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var A=E.getParameter("valid");if(A){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},FROM:{key:"FROM",textKey:"CONDITION_DATERANGETYPE_FROM",category:"DYNAMIC.DATE",order:0,defaultValues:[null],value1:null,onChange:y._DateOnChangeHandler,filterSuggestItem:y._DateFilterSuggestItem,onItemSelected:y._DefaultOnItemSelected,getControls:function(i,n){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var A=E.getParameter("valid");if(A){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},TO:{key:"TO",textKey:"CONDITION_DATERANGETYPE_TO",category:"DYNAMIC.DATE",order:1,defaultValues:[null],value1:null,onChange:y._DateOnChangeHandler,filterSuggestItem:y._DateFilterSuggestItem,onItemSelected:y._DefaultOnItemSelected,getControls:function(i,n,O){var s=new a(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,dateValue:{path:"$smartEntityFilter>value1"},displayFormat:i.oDateFormat.style||i.oDateFormat.pattern||"",change:function(E){var A=E.getParameter("valid");if(A){this.getModel("$smartEntityFilter").setProperty("inputstate","NONE",this.getModel("$smartEntityFilter").getContext("/"));}else{this.getModel("$smartEntityFilter").setProperty("inputstate","ERROR",this.getModel("$smartEntityFilter").getContext("/"));}}});n.push(s);}},LASTDAYS:y.createSingleIntRangeOperation("LASTDAYS","CONDITION_DATERANGETYPE_LASTDAYS","CONDITION_DATERANGETYPE_YESTERDAY","DYNAMIC.DATE.INT",1,["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],4,"CONDITION_DATERANGETYPE_TODAY"),LASTWEEKS:y.createSingleIntRangeOperation("LASTWEEKS","CONDITION_DATERANGETYPE_LASTWEEKS","CONDITION_DATERANGETYPE_LASTWEEK","DYNAMIC.WEEK.INT",1,["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],8,"CONDITION_DATERANGETYPE_THISWEEK"),LASTMONTHS:{key:"LASTMONTHS",textKey:"CONDITION_DATERANGETYPE_LASTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_LASTMONTH",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISMONTH",category:"DYNAMIC.MONTH.INT",order:14,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},LASTQUARTERS:{key:"LASTQUARTERS",textKey:"CONDITION_DATERANGETYPE_LASTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_LASTQUARTER",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISQUARTER",category:"DYNAMIC.QUARTER.INT",order:19,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},LASTYEARS:{key:"LASTYEARS",textKey:"CONDITION_DATERANGETYPE_LASTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_LASTYEAR",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISYEAR",category:"DYNAMIC.YEAR.INT",order:28,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},NEXTDAYS:{key:"NEXTDAYS",textKey:"CONDITION_DATERANGETYPE_NEXTDAYS",singularTextKey:"CONDITION_DATERANGETYPE_TOMORROW",zeroNumberTextKey:"CONDITION_DATERANGETYPE_TODAY",category:"DYNAMIC.DATE.INT",order:5,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},NEXTWEEKS:{key:"NEXTWEEKS",textKey:"CONDITION_DATERANGETYPE_NEXTWEEKS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTWEEK",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISWEEK",category:"DYNAMIC.WEEK.INT",order:10,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_WEEK","CONDITION_DATERANGETYPE_MULTIPLE_WEEKS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},NEXTMONTHS:{key:"NEXTMONTHS",textKey:"CONDITION_DATERANGETYPE_NEXTMONTHS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTMONTH",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISMONTH",category:"DYNAMIC.MONTH.INT",order:16,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_MONTH","CONDITION_DATERANGETYPE_MULTIPLE_MONTHS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},NEXTQUARTERS:{key:"NEXTQUARTERS",textKey:"CONDITION_DATERANGETYPE_NEXTQUARTERS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTQUARTER",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISQUARTER",category:"DYNAMIC.QUARTER.INT",order:21,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_QUARTER","CONDITION_DATERANGETYPE_MULTIPLE_QUARTERS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},NEXTYEARS:{key:"NEXTYEARS",textKey:"CONDITION_DATERANGETYPE_NEXTYEARS",singularTextKey:"CONDITION_DATERANGETYPE_NEXTYEAR",zeroNumberTextKey:"CONDITION_DATERANGETYPE_THISYEAR",category:"DYNAMIC.YEAR.INT",order:30,defaultValues:[1],value1:null,type:"int",descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_YEAR","CONDITION_DATERANGETYPE_MULTIPLE_YEARS"],onChange:y._IntOnChangeHandler,filterSuggestItem:y._IntFilterSuggestItem,onItemSelected:y._IntOnItemSelected,getControls:y.ControlFactory},SPECIFICMONTH:{key:"SPECIFICMONTH",textKey:"CONDITION_DATERANGETYPE_SPECIFICMONTH",category:"DYNAMIC.MONTH",order:11,defaultValues:function(){var i=new U();return[i.getMonth()];},value1:null,onChange:y._MonthOnChangeHandler,onItemSelected:y._DefaultOnItemSelected,filterSuggestItem:y._MonthFilterSuggestItem,getControls:function(i,n,O){var s=new S(T._createStableId(i,"field"),{ariaLabelledBy:i._oOperationSelect||null,width:"100%",selectedKey:{path:"$smartEntityFilter>value1",type:"sap.ui.model.type.Integer"}});s.bindAggregation("items",{path:"$smartEntityFilter>/currentoperation/valueList",template:new L({text:{path:"$smartEntityFilter>text"},key:{path:"$smartEntityFilter>key"}}),templateShareable:false});n.push(s);},getValueList:function(){var n=new U(),M=[],F=e.getDateInstance({pattern:"LLLL"});n.setDate(15);n.setMonth(0);for(var i=0;i<12;i++){M.push({text:F.format(n),key:i});n.setMonth(n.getMonth()+1);}return M;}},YESTERDAY:{key:"YESTERDAY",textKey:"CONDITION_DATERANGETYPE_YESTERDAY",category:"FIXED.DATE",order:3.1,defaultValues:function(){return o.ranges.yesterday();},type:"range",display:"start",onChange:y._DateWithDefaultsOnChangeHandler,onItemSelected:y._DefaultOnItemSelected,getControls:y.ControlFactory},TODAY:{key:"TODAY",textKey:"CONDITION_DATERANGETYPE_TODAY",category:"FIXED.DATE",order:3,defaultValues:function(){return o.ranges.today();},type:"range",display:"start",onChange:y._DateWithDefaultsOnChangeHandler,onItemSelected:y._DefaultOnItemSelected,getControls:y.ControlFactory},TOMORROW:{key:"TOMORROW",textKey:"CONDITION_DATERANGETYPE_TOMORROW",category:"FIXED.DATE",order:3.2,defaultValues:function(){var i=o.ranges.tomorrow();return i;},type:"range",display:"start",onChange:y._DateWithDefaultsOnChangeHandler,onItemSelected:y._DefaultOnItemSelected,getControls:y.ControlFactory},THISWEEK:y.getFixedRangeOperation("THISWEEK","CONDITION_DATERANGETYPE_THISWEEK","FIXED.WEEK",function(){return o.ranges.currentWeek();},y._DefaultFilterSuggestItem,6),LASTWEEK:y.getFixedRangeOperation("LASTWEEK","CONDITION_DATERANGETYPE_LASTWEEK","FIXED.WEEK",function(){return o.ranges.lastWeek();},y._DefaultFilterSuggestItem,7),LAST2WEEKS:y.getFixedRangeOperation("LAST2WEEKS","CONDITION_DATERANGETYPE_LAST2WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-2);},y._HideFilterSuggestItem,-1),LAST3WEEKS:y.getFixedRangeOperation("LAST3WEEKS","CONDITION_DATERANGETYPE_LAST3WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-3);},y._HideFilterSuggestItem,-1),LAST4WEEKS:y.getFixedRangeOperation("LAST4WEEKS","CONDITION_DATERANGETYPE_LAST4WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-4);},y._HideFilterSuggestItem,-1),LAST5WEEKS:y.getFixedRangeOperation("LAST5WEEKS","CONDITION_DATERANGETYPE_LAST5WEEKS","FIXED.WEEK",function(){return o.ranges.lastWeeks(-5);},y._HideFilterSuggestItem,-1),NEXTWEEK:y.getFixedRangeOperation("NEXTWEEK","CONDITION_DATERANGETYPE_NEXTWEEK","FIXED.WEEK",function(){return o.ranges.nextWeek();},y._DefaultFilterSuggestItem,9),NEXT2WEEKS:y.getFixedRangeOperation("NEXT2WEEKS","CONDITION_DATERANGETYPE_NEXT2WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(2);},y._HideFilterSuggestItem,-1),NEXT3WEEKS:y.getFixedRangeOperation("NEXT3WEEKS","CONDITION_DATERANGETYPE_NEXT3WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(3);},y._HideFilterSuggestItem,-1),NEXT4WEEKS:y.getFixedRangeOperation("NEXT4WEEKS","CONDITION_DATERANGETYPE_NEXT4WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(4);},y._HideFilterSuggestItem,-1),NEXT5WEEKS:y.getFixedRangeOperation("NEXT5WEEKS","CONDITION_DATERANGETYPE_NEXT5WEEKS","FIXED.WEEK",function(){return o.ranges.nextWeeks(5);},y._HideFilterSuggestItem,-1),THISMONTH:y.getFixedRangeOperation("THISMONTH","CONDITION_DATERANGETYPE_THISMONTH","FIXED.MONTH",function(){return o.ranges.currentMonth();},y._DefaultFilterSuggestItem,12),LASTMONTH:y.getFixedRangeOperation("LASTMONTH","CONDITION_DATERANGETYPE_LASTMONTH","FIXED.MONTH",function(){return o.ranges.lastMonth();},y._DefaultFilterSuggestItem,13),NEXTMONTH:y.getFixedRangeOperation("NEXTMONTH","CONDITION_DATERANGETYPE_NEXTMONTH","FIXED.MONTH",function(){return o.ranges.nextMonth();},y._DefaultFilterSuggestItem,15),THISQUARTER:y.getFixedRangeOperation("THISQUARTER","CONDITION_DATERANGETYPE_THISQUARTER","FIXED.QUARTER",function(){return o.ranges.currentQuarter();},y._DefaultFilterSuggestItem,17),LASTQUARTER:y.getFixedRangeOperation("LASTQUARTER","CONDITION_DATERANGETYPE_LASTQUARTER","FIXED.QUARTER",function(){return o.ranges.lastQuarter();},y._DefaultFilterSuggestItem,18),NEXTQUARTER:y.getFixedRangeOperation("NEXTQUARTER","CONDITION_DATERANGETYPE_NEXTQUARTER","FIXED.QUARTER",function(){return o.ranges.nextQuarter();},y._DefaultFilterSuggestItem,20),YEARTODATE:y.getFixedRangeOperation("YEARTODATE","CONDITION_DATERANGETYPE_YEARTODATE","FIXED.YEAR",function(){return o.ranges.yearToDate();},y._DefaultFilterSuggestItem,31),THISYEAR:y.getFixedRangeOperation("THISYEAR","CONDITION_DATERANGETYPE_THISYEAR","FIXED.YEAR",function(){return o.ranges.currentYear();},y._DefaultFilterSuggestItem,26),LASTYEAR:y.getFixedRangeOperation("LASTYEAR","CONDITION_DATERANGETYPE_LASTYEAR","FIXED.YEAR",function(){return o.ranges.lastYear();},y._DefaultFilterSuggestItem,27),NEXTYEAR:y.getFixedRangeOperation("NEXTYEAR","CONDITION_DATERANGETYPE_NEXTYEAR","FIXED.YEAR",function(){return o.ranges.nextYear();},y._DefaultFilterSuggestItem,29),QUARTER1:y.getFixedRangeOperation("QUARTER1","CONDITION_DATERANGETYPE_QUARTER1","FIXED.QUARTER",function(){return o.ranges.quarter(1);},y._DefaultFilterSuggestItem,22),QUARTER2:y.getFixedRangeOperation("QUARTER2","CONDITION_DATERANGETYPE_QUARTER2","FIXED.QUARTER",function(){return o.ranges.quarter(2);},y._DefaultFilterSuggestItem,23),QUARTER3:y.getFixedRangeOperation("QUARTER3","CONDITION_DATERANGETYPE_QUARTER3","FIXED.QUARTER",function(){return o.ranges.quarter(3);},y._DefaultFilterSuggestItem,24),QUARTER4:y.getFixedRangeOperation("QUARTER4","CONDITION_DATERANGETYPE_QUARTER4","FIXED.QUARTER",function(){return o.ranges.quarter(4);},y._DefaultFilterSuggestItem,25),TODAYFROMTO:{key:"TODAYFROMTO",textKey:"CONDITION_DATERANGETYPE_TODAYFROMTO",singularTextKey:"CONDITION_DATERANGETYPE_TODAYFROMTO",category:"DYNAMIC.DATE.INT",order:3.3,defaultValues:[1,1],type:"[int,int]",display:"int",value1:null,value2:null,descriptionTextKeys:["CONDITION_DATERANGETYPE_SINGLE_DAY","CONDITION_DATERANGETYPE_MULTIPLE_DAYS"],onChange:y._IntFromToOnChangeHandler,filterSuggestItem:y._IntFromToFilterSuggestItem,onItemSelected:y._IntOnItemsSelected,getControls:y.ControlFactory}};
y.prototype.getControls=function(O){var i=[];if(!O){return;}O.getControls(this,i,O);return i;};
y.prototype.setIgnoreTime=function(i){this._bIgnoreTime=i;};
T.prototype.getIgnoreTime=function(i){return this._bIgnoreTime;};
y.prototype.getDefaultValues=function(O){if(!O){return[];}var i=O.defaultValues||[];if(typeof i==="function"){i=O.defaultValues();}var n=this.getCondition(),s=i[0]||null,A=i[1]||null;if(O.key==="DATERANGE"&&n&&n.value1&&n.value2&&(n.value1 instanceof Date&&n.value2 instanceof Date||n.value1.oDate&&n.value2.oDate)){s=n.value1.oDate||n.value1;A=n.value2.oDate||n.value2;}else{if(s instanceof Date){s=new U(s);}if(A instanceof Date){A=new U(A);}}return[s,A];};
y.prototype.getOperations=function(){var O=[];for(var n in y.Operations){var i=y.Operations[n];if(this._filterOperation(i)){O.push(i);}}return O;};
y.prototype._updateOperation=function(O){T.prototype._updateOperation.apply(this,[O]);if(O.languageText&&!O.basicLanguageText){O.basicLanguageText=O.languageText;if(!O.singulareBasicLanguageText&&O.singularTextKey){O.singulareBasicLanguageText=this.getTranslatedText(O.singularTextKey);}if(!O.zeroNumberLanguageText&&O.zeroNumberTextKey){O.zeroNumberLanguageText=this.getTranslatedText(O.zeroNumberTextKey);}O.languageText=this._fillNumberToText(O.languageText);}if(O.display){var i=this.getDefaultValues(O);var n=this._getDateFormatter(false);if(O.display==="start"&&i[0]!==null){O.textValue=n.format(i[0].oDate);}else if(O.display==="range"&&i&&i[0]&&i[1]){O.textValue=n.format(i[0].oDate)+" - "+n.format(i[1].oDate);}}O.suggestText=O.languageText;};
y.prototype.isValidCondition=function(){var i=this.getCondition(),O=this.getOperation(i.operation);if(O&&i&&i.key&&i.operation){if("value1"in O&&"value2"in O){return"value1"in i&&i.value1!==null&&"value2"in i&&i.value2!==null;}else if("value1"in O){return"value1"in i&&i.value1!==null;}else if("value2"in O){return"value2"in i&&i.value2!==null;}else if(!("value1"in O)&&!("value2"in O)){return true;}}return false;};
y.prototype.hasSemanticDate=function(J){var O=this.getOperations();if(J.ranges[0].semantic&&J.ranges[0].semantic.operation){var i=0;for(i=0;i<O.length;i++){if(O[i].key.indexOf(J.ranges[0].semantic.operation)!==-1){return true;}}return false;}};
y.prototype.providerDataUpdated=function(i,n){};
y.prototype.initialize=function(J){T.prototype.initialize.apply(this,[J]);this.oModel.suspend();var O=Object.assign({},J,true),s,i;var n=(new U()).getCalendarType();if(!J.conditionTypeInfo){if(J.ranges&&J.ranges.length==1){var A;if(this.hasSemanticDate(J)){A=J.ranges[0].semantic.operation;if(J.ranges[0].semantic.value1||J.ranges[0].semantic.value1==0){s=J.ranges[0].semantic.value1;}if(J.ranges[0].semantic.value2||J.ranges[0].semantic.value2==0){i=J.ranges[0].semantic.value2;}if(this.getDefaultOperation().key===A){var E=this.getOperation(A),F=E&&E._getInitialValues?E._getInitialValues(J):null;if(!F){F=this.getDefaultValues(E);}if((F[0]&&F[0].oDate&&F[0].oDate.toISOString()!==J.ranges[0].value1)||(F[1]&&F[1].oDate&&F[1].oDate.toISOString()!==J.ranges[0].value2)){A="DATERANGE";}}}else{A="DATERANGE";}if(J.ranges[0].operation==="GE"){A="FROM";}if(J.ranges[0].operation==="LE"){A="TO";}J.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:A,value1:(s||s==0)?s:J.ranges[0].value1,value2:(i||i==0)?i:J.ranges[0].value2,calendarType:n}};}else{var E=this.getDefaultOperation(),K=E?E.key:"";J.conditionTypeInfo={name:this.getName(),data:{key:this.sFieldName,operation:K,calendarType:n}};}}if(J.conditionTypeInfo){J=J.conditionTypeInfo;}if(J.name&&J.data){if(J.name!==this.getName()){k.debug("ConditionType "+this.getName()+" tries to deserialize data from "+J.name);}J=J.data;}if(!J.operation){return;}if(this.getOperation(J.operation)&&this.getOperation(J.operation).order<0){var G=["LAST2WEEKS","LAST3WEEKS","LAST4WEEKS","LAST5WEEKS"].indexOf(J.operation);if(G>=0){J.operation="LASTWEEKS";J.value1=G+2;}G=["NEXT2WEEKS","NEXT3WEEKS","NEXT4WEEKS","NEXT5WEEKS"].indexOf(J.operation);if(G>=0){J.operation="NEXTWEEKS";J.value1=G+2;}}var H=this.getOperation(J.operation);if(!H){if(this.getAsync()){this.setPending(true);var M=this,Q=function($){if($.getParameter("pending")===false){M.oFilterProvider.detachPendingChange(Q);M.initialize(O);}};this.oFilterProvider.attachPendingChange(Q);this.oModel.resume();return;}}var W;if(n!==J.calendarType&&(J.calendarType==="Islamic"||n==="Islamic")&&J.operation==="SPECIFICMONTH"){J.operation="DATERANGE";var X=parseInt(J.value1),Y=U.getInstance(new Date(),J.calendarType);Y.setMonth(X);Y=o.getMonthStartDate(Y);W=o.getRange(0,"MONTH",Y);J.value1=W[0].oDate.toISOString();J.value2=W[1].oDate.toISOString();}var Z=this.getConditionContext().getObject();Z.operation=J.operation;Z.key=J.key;Z.value1=null;Z.value2=null;if(J.operation==="DATERANGE"){if(typeof J.value1==="string"){J.value1=J.value1===""?null:(new U(J.value1)).oDate;}if(typeof J.value2==="string"){J.value2=J.value2===""?null:(new U(J.value2)).oDate;}Z.value1=J.value1;Z.value2=J.value2;}else if(["DATE","FROM","TO"].indexOf(J.operation)!==-1){if(typeof J.value1==="string"){J.value1=J.value1===""?null:(new U(J.value1)).oDate;}Z.value1=J.value1;}else if(["LASTDAYS","LASTWEEKS","LASTMONTHS","LASTQUARTERS","LASTYEARS","NEXTDAYS","NEXTWEEKS","NEXTMONTHS","NEXTQUARTERS","NEXTYEARS"].indexOf(J.operation)>-1){Z.value1=J.value1;}else if(J.operation==="SPECIFICMONTH"){Z.value1=J.value1+"";}else if(J.operation==="TODAYFROMTO"){Z.value1=J.value1;Z.value2=J.value2;}else{H=this.getOperation(J.operation);W=H&&H._getInitialValues?H._getInitialValues(J):null;if(!W){W=this._getValuesFromCurrentOperation(J);}if(!W){W=this.getDefaultValues(H);}Z.value1=W[0];Z.value2=W[1];}this.bIgnoreBindingChange=true;this.oModel.resume();delete this.bIgnoreBindingChange;this.serialize(true,false);this._setDDROperation.call(this,J);};
y.prototype._getValuesFromCurrentOperation=function(i){var n=[];if(i.value1){n.push(i.value1);}if(i.value2){n.push(i.value2);}if(n.length>0){return n;}return null;};
y.prototype.serialize=function(i,F){var J={},n=this.getCondition();if(!n.operation){return null;}var O=this.getOperation(n.operation);if(!O||!("value1"in O)){n.value1=null;}if(!O||!("value2"in O)){n.value2=null;}n.calendarType=(new U()).getCalendarType();J.conditionTypeInfo={name:this.getName(),data:n};if(this.iChangeTimer){clearTimeout(this.iChangeTimer);delete this.iChangeTimer;}if(i){this._updateProvider(J,true,F);}else{this.iChangeTimer=setTimeout(this._updateProvider.bind(this,J,false,F),0);}return J;};
y.prototype._updateProvider=function(J,s,F){J.ranges=this.getFilterRanges();J.items=[];var i=false;var n=0;var A=0;var E=0;var G=this.oModel.getData(),H=G.currentoperation;if(H.languageText){var K=H.languageText;if(this._isIntIntInterval(H)){if(J.conditionTypeInfo.data.value1!=null&&J.conditionTypeInfo.data.value1!==""&&J.conditionTypeInfo.data.value2!=null&&J.conditionTypeInfo.data.value2!==""){K=this._formatIntIntInterval(H,J);}this.oModel.setProperty("inputstate","NONE",this.getContext());if(!this._isValidFromToPeriod(J.conditionTypeInfo.data.value1,J.conditionTypeInfo.data.value2)){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else if(this._isIntInterval(H)){if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){K=this._formatIntInterval(H,J);this.oModel.setProperty("inputstate","NONE",this.getContext());}else if(this._bSuggestItemSelected){K=this._fillNumberToText(H.basicLanguageText);var M=H.basicLanguageText.indexOf("{0}");n=M+1;A=M;E=M+1;i=true;}else{K="";this.oModel.setProperty("inputstate","NONE",this.getContext());}}else if(this._isFixedRange(H)){K=this._formatFixedRange(H,H.textValue);this.oModel.setProperty("inputstate","NONE",this.getContext());}else{if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){var O=this._calculateDateRangeValueText(H,J);var Q=O.value;i=O.bSetCursor;if(Q){K=this._formatFixedRange(H,Q);n=K.length-1;this.oModel.setProperty("inputstate","NONE",this.getContext());}else{K="";}}else{K="";}}this._bSuggestItemSelected=false;this.oModel.setProperty("/formattedText",K);if(i&&!(this._oPopup&&this._oPopup.isOpen())&&this._oInput){this._oInput.$("inner").cursorPos(n);if(A<E){this._oInput.selectText(A,E);}this._oInput._lastValue="";}}if(this.oFilterProvider){this.oFilterProvider.oModel.setProperty("/"+this.sFieldName,J);this.oFilterProvider.setFilterData({},false,this.sFieldName);if(F&&this.oFilterProvider._oSmartFilter){this.oFilterProvider._oSmartFilter.fireFilterChange();}}};
y.prototype.getFilterRanges=function(){var i=this.getCondition(),n=[],s;if(i.operation==="LASTDAYS"){if(!isNaN(i.value1)){n=o.ranges.lastDays(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTWEEKS"){if(!isNaN(i.value1)){n=o.ranges.lastWeeks(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTMONTHS"){if(!isNaN(i.value1)){n=o.ranges.lastMonths(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTQUARTERS"){if(!isNaN(i.value1)){n=o.ranges.lastQuarters(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="LASTYEARS"){if(!isNaN(i.value1)){n=o.ranges.lastYears(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTDAYS"){if(!isNaN(i.value1)){n=o.ranges.nextDays(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTWEEKS"){if(!isNaN(i.value1)){n=o.ranges.nextWeeks(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTMONTHS"){if(!isNaN(i.value1)){n=o.ranges.nextMonths(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTQUARTERS"){if(!isNaN(i.value1)){n=o.ranges.nextQuarters(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="NEXTYEARS"){if(!isNaN(i.value1)){n=o.ranges.nextYears(i.value1);}i.value1=n[0];i.value2=n[1];}else if(i.operation==="SPECIFICMONTH"){var A=parseInt(i.value1),E=new U();E.setMonth(A);E=o.getMonthStartDate(E);n=o.getRange(0,"MONTH",E);i.value1=n[0];i.value2=n[1];}else if(i.operation==="TODAYFROMTO"){if(!isNaN(parseInt(i.value1))){i.value1=this._getTodayFromToValueFrom(i.value1);}if(!isNaN(parseInt(i.value2))){i.value2=this._getTodayFromToValueTo(i.value2);}}else{var O=this.getOperation(i.operation);if(O&&O.getDateRange){s=O.getDateRange(i);if(!s){return[];}i.value1=s&&s.value1?s.value1:null;i.value2=s&&s.value2?s.value2:null;}}if(i.value1 instanceof U){i.value1=i.value1.oDate;}if(i.value2 instanceof U){i.value2=i.value2.oDate;}if(i.operation==="DATE"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="BT";i.value2=i.value1;i.value1=y.setStartTime(i.value1).oDate;i.value2=y.setEndTime(i.value2,this._bIgnoreTime,this._Precision).oDate;}else if(i.operation==="FROM"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="GE";delete i.value2;}else if(i.operation==="TO"){if(!(this.isValidCondition()&&i.value1)){return[];}i.operation="LE";delete i.value2;i.value1=y.setEndTime(i.value1,this._bIgnoreTime).oDate;}else{if(s){i.operation=s.operation;i.value1=i.value1?y.setStartTime(i.value1).oDate:null;i.value2=i.value2?y.setEndTime(i.value2,this._bIgnoreTime).oDate:null;}else{if(!(this.isValidCondition()&&i.value1&&i.value2)){return[];}i.operation="BT";i.value1=y.setStartTime(i.value1).oDate;i.value2=y.setEndTime(i.value2,this._bIgnoreTime).oDate;}}i.exclude=false;i.keyField=i.key;delete i.key;return[i];};
y.prototype.getTokenText=function(){return"";};
y.prototype.getName=function(){return this.getMetadata().getName();};
y.prototype.getType=function(){return"Edm.Date";};
y.prototype._bindValueState=function(i){i.bindProperty("valueState",{path:"$smartEntityFilter>inputstate",formatter:function(){if(this.getBinding("valueState").getValue()==="ERROR"){return V.Error;}else{return V.None;}}});};
y.prototype.initializeFilterItem=function(){if(this._isNewDynamicDateRangeEnabled()){return this._initializeFilterItemNew.apply(this,arguments);}return this._initializeFilterItemOld.apply(this,arguments);};
y.prototype._initializeFilterItemOld=function(){this._oInput=new I(T._createStableId(this),{value:"{$smartEntityFilter>formattedText}",showValueHelp:true,showSuggestion:true,maxSuggestionWidth:"auto",valueHelpRequest:this._toggleOpen.bind(this)});this._oInput._highlightListText=function(){var i,n,s=this._oList.$().find('.sapMDLILabel, .sapMSLITitleOnly');for(i=0;i<s.length;i++){n=s[i];n.innerHTML=this._createHighlightedText(n);}};this._bindValueState(this._oInput);this._oInput.bindAggregation("suggestionItems",{path:"$smartEntityFilter>operations",sorter:new m("order",false,false),filters:new j("order",function(i){return i!==undefined&&i>-1;}),template:new L({key:{path:"$smartEntityFilter>key"}}),templateShareable:false});this._oInput.setFilterFunction(function(s,i){if(this._oPopup&&this._oPopup.isOpen()){return false;}var O=this.getOperation(i.getKey());s=s.trim();if(s==="?"){y._DefaultFilterSuggestItem.call(O,s,i,this);return O.category!=="DYNAMIC.DATERANGE"&&O.category!=="DYNAMIC.DATE";}if(O.filterSuggestItem){return O.filterSuggestItem(s,i,this);}else{return y._DefaultFilterSuggestItem.call(O,s,i,this);}}.bind(this));this._oInput.attachSuggestionItemSelected(function(E){var i=E.getParameter("selectedItem");if(!i){return;}var O=i.getKey();var n=this.getOperation(O);var s=E.oSource.getValue().trim();if(n.onItemSelected){n.onItemSelected(s,i,this);return;}else{y._DefaultOnItemSelected.call(n,s,i,this);}}.bind(this));this._oInput.attachChange(function(E){var s=E.getParameter("value");if(s){var O=this.getOperations();var H=O.some(function(i){if(i.onChange){return i.onChange(s,this);}else{return y._defaultOnChangeHandler.call(i,s,this);}},this);if(!H){this.oModel.setProperty("inputstate","ERROR",this.getContext());}}else{this.setCondition({key:this.sFieldName,operation:"FROM",value1:null,value2:null});this.oModel.setProperty("inputstate","NONE",this.getContext());}}.bind(this));this._oInput.attachBrowserEvent("focusin",function(E){if(q(E.target).hasClass("sapMInputBaseInner")&&this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();}}.bind(this));this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};
y.prototype._toggleOpen=function(E){if(!this._oPopup){if((!R||!x||(D.system.phone&&!B))&&!this._bPopoverRequested){R=sap.ui.require("sap/m/ResponsivePopover");x=sap.ui.require("sap/m/VBox");if(D.system.phone){B=sap.ui.require("sap/m/Button");if(!R||!x||!B){sap.ui.require(["sap/m/ResponsivePopover","sap/m/VBox","sap/m/Button"],_.bind(this));this._bPopoverRequested=true;}}else if(!R||!x){sap.ui.require(["sap/m/ResponsivePopover","sap/m/VBox"],_.bind(this));this._bPopoverRequested=true;}}if(!R||!x||(D.system.phone&&!B)){return;}this._oPopupLayout=new x();this._oPopupLayout.addStyleClass("sapUiCompDateRangeType");this._initializeFilterItemPopoverContent(this._oPopupLayout);this._oPopup=new R({showCloseButton:false,showArrow:true,showHeader:false,horizontalScrolling:false,placement:P.VerticalPreferedBottom,content:this._oPopupLayout,contentWidth:"18rem",afterClose:function(){if(z(this._oPopup)){this._oPopup.getModel("$smartEntityFilter").refresh(true);}if(this.oFilterProvider._oSmartFilter.getLiveMode()){var i=sap.ui.require("sap/ui/comp/smartfilterbar/SmartFilterBar");this.oFilterProvider._oSmartFilter.triggerSearch(i.LIVE_MODE_INTERVAL);}}.bind(this)});this._oPopup.addAriaLabelledBy(this._oOperationLabel);if(D.system.phone){this._oPopup.setBeginButton(new B({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_CLOSEBUTTON"),type:"Emphasized",press:function(E){this._oPopup.close();}.bind(this)}));}sap.ui.getCore().getMessageManager().registerObject(this._oPopup,true);this._oPopup.setModel(this.getModel(),"$smartEntityFilter");this._oPopup._oControl.oPopup.setAutoCloseAreas([this._oInput.getDomRef()]);}if(!this._oPopup.isOpen()){this._oPopup.openBy(this._oInput._getValueHelpIcon());}else{this._oPopup.close();}};
function _(i,n,s){R=i;x=n;B=s;this._bPopoverRequested=false;if(!this._bIsBeingDestroyed){this._toggleOpen();}}
function z(n){var i,s,H=false,A=n.getContent()[0].getItems();for(i=0;i<A.length;i++){s=A[i];if(s.getMetadata().getName()==="sap.m.DatePicker"&&s.getValueState()!==V.None){H=true;break;}}return H;}
y.prototype.datePickerValidateLastValue=function(i){var s;if(!i.isValidValue()){s=i.getValue();i.resetProperty("value");i.setValue(s);if(i.isValidValue()){i.setValueState(i.isValidValue()?V.None:V.Error);}}};
y.prototype._getDateFormatter=function(s){var F={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:s};if(JSON.stringify(F)!==this._sFormatSettings){this._sFormatSettings=JSON.stringify(F);this._oDateFormatter=e.getInstance(F);}return this._oDateFormatter;};
y.prototype._fillNumberToText=function(s,n,i){var A="X",E="Y";if(n||n===0){A=String(n);}if(i||i===0){E=String(i);if(n<0){A="("+A+")";}if(i<0){E="("+E+")";}}s=s.replace("{0}",A);s=s.replace("{1}",E);return s;};
y.prototype._setIntControlBinding=function(i,O,s){i.setFieldWidth("auto");i.bindProperty("description",{path:"$smartEntityFilter>"+s,type:"sap.ui.model.type.Integer",formatter:function(){var n=O.descriptionTextKeys[0];var A=O.descriptionTextKeys[1];if(this.getBinding("description").getValue()===1){return T.getTranslatedText(n);}else{return T.getTranslatedText(A||n);}}});};
y.prototype._createIntFromToControl=function(i,s,n){return new I(T._createStableId(i,s),{value:{path:"$smartEntityFilter>"+n,type:new N({},{minimum:-i._maxIntValue,maximum:i._maxIntValue})},ariaLabelledBy:i._oOperationSelect||null,textAlign:"End",width:"100%"});};
y.prototype._isValidFromToPeriod=function(i,n){if((!i&&i!==0)||isNaN(i)){return false;}if((!n&&n!==0)||isNaN(n)){return false;}if(i<-this._maxIntValue||i>this._maxIntValue){return false;}if(n<-this._maxIntValue||n>this._maxIntValue){return false;}if((i<0&&Math.abs(i)>Math.abs(n))||(i===0&&n<0)||(n<0&&Math.abs(n)>Math.abs(i))||(n===0&&i<0)||(i<0&&n<0)){return false;}return true;};
y.prototype._getTodayFromToValueFrom=function(i){if(i<0){var n=o.getRange((-1*i),"DAY")[1];n.setHours(0,0,0);return n;}return o.getRange(-i,"DAY")[0];};
y.prototype._getTodayFromToValueTo=function(i){if(i<0){var n=o.getRange(i,"DAY")[0];n.setHours(23,59,59);return n;}return o.getRange(i,"DAY")[1];};
y.prototype.destroy=function(){if(this.iChangeTimer){clearTimeout(this.iChangeTimer);delete this.iChangeTimer;}if(this._oPopup){sap.ui.getCore().getMessageManager().unregisterObject(this._oPopup);this._oPopup.destroy();}T.prototype.destroy.apply(this,arguments);};
y.prototype._initializeFilterItemNew=function(){this._createCustomDDOptions(this.getOperations());var F={style:this.oDateFormat.style,pattern:this.oDateFormat.pattern,strictParsing:false};this._oInput=new p(T._createStableId(this),{name:this.sFieldName,formatter:t.getInstance({date:F}),options:{path:"$smartEntityFilter>/operations",formatter:function(O){return O.map(function(i){if(w.includes(i.key)){return i.key;}return this._getCustomDDOptionName(i.key);}.bind(this));}.bind(this)},value:this._getDefaultValueDDR(),change:this._onDDRChange.bind(this)});this._bindValueState(this._oInput);this._oInput._reApplyFocusToElement=this._reApplyFocusToElement.bind(this._oInput,this);this._oInput.setBindingContext(this.getContext(),"$smartEntityFilter");this._oInput.setModel(this.getModel(),"$smartEntityFilter");this.bFireFilterChange=false;this.getModel().checkUpdate(true);this.bFireFilterChange=true;return this._oInput;};
y.prototype.updateOperations=function(){var O=this.getOperations();for(var i=0;i<O.length;i++){this._updateOperation(O[i]);}if(this._isNewDynamicDateRangeEnabled()){this._createCustomDDOptions(O);}return this.oModel.setProperty("operations",O,this.getContext(),true);};
y.prototype.setCondition=function(i){T.prototype.setCondition.apply(this,arguments);this._setDDROperation.call(this,i);return this;};
y.prototype._onDDRChange=function(E){var O,i,n=E.getParameter("value"),s=E.getParameter("valid");if(s&&n){var A=this._getOptionName(n.operator);O=this.getOperation(A);i=this._prepareDDRValues(O,n,A);this.oModel.setProperty("/currentoperation",O);this.oModel.setProperty("/condition/operation",A);this.oModel.setProperty("/condition/value1",i[0]);this.oModel.setProperty("/condition/value2",i[1]);}else if(s){O=this.getOperation("DATERANGE");this.oModel.setProperty("/currentoperation",O);this.oModel.setProperty("/condition/operation","DATERANGE");this.oModel.setProperty("/condition/value1",null);this.oModel.setProperty("/condition/value2",null);}this.oModel.setProperty("inputstate",s?"NONE":"ERROR",this.getContext());};
y.prototype._reApplyFocusToElement=function(i,n,s){var A,O=this._oNavContainer.getPages()[0],E=i.getDefaultOperation()||y.Operations["DATERANGE"];if(n!==O||s){return;}var F=this._oOptionsList.getItems().find(function(G){if(!G.isA("sap.m.DynamicDateRangeListItem")){return false;}var H=G.getOptionKey();if(H==="DATERANGE"){A=G;}return H===E.key;});if(!F){F=A||q(n.getDomRef().querySelector("section")).firstFocusableDomRef();}F.focus();};
y.prototype._getDefaultValueDDR=function(){var i=this.getDefaultOperation(),O=i&&i.key;if(!this._getDDROption(O)){return null;}var n=typeof i.defaultValues==="function"?i.defaultValues():i.defaultValues;if(!w.includes(O)){O=this._getCustomDDOptionName(O);}if(Array.isArray(n)&&n.length>0&&n[0]!==null){return{operator:O,values:n};}return null;};
y.prototype._getDDROption=function(n){if(w.includes(n)){return r.getOption(n);}return r.getOption(this._getCustomDDOptionName(n));};
y.prototype._getCustomDDOptionName=function(n){return this.sFieldName+"__custom__"+n;};
y.prototype._getOptionName=function(n){var i=n.split("__custom__");if(i.length>1){return i[1];}return i[0];};
y.prototype._createCustomDDOptions=function(O){O.forEach(this._createCustomDDOption,this);};
y.prototype._createCustomDDOption=function(i){if(w.includes(i.key)){return;}var n;var s=typeof i.category==="object"?i.category.key:i.category;if(s.toLowerCase().startsWith("fixed")||i.type==="range"){n=this._createCustomFixedDDOption(i);}else{n=this._createCustomDynamicDDOption(i);}n.getGroupHeader=function(){if(typeof i.category==="object"){var A=i.category.bundle;var E=i.category.key;if(sap.ui.getCore().getLibraryResourceBundle(A).hasText(E)){return sap.ui.getCore().getLibraryResourceBundle(A).getText(E);}}if(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").hasText(i.category)){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText(i.category);}if(sap.ui.getCore().getLibraryResourceBundle("sap.m").hasText(i.category)){return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText(i.category);}return sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("DDR_OPTIONS_GROUP_0");};n.getGroup=function(){return i.order;};r.addOption(n);};
y.prototype._createCustomFixedDDOption=function(i){var n=this;var s=new C({key:this._getCustomDDOptionName(i.key),getText:function(){return i.languageText||T.getTranslatedText(i.textKey);},getValueHelpUITypes:function(){return[];},enhanceFormattedValue:function(){if(!n.getOperation(n._getOptionName(i.key))){return false;}if(i.category.toUpperCase().startsWith('FIXED.')&&i.type==="int"){return false;}return true;},format:this._customDDOptionFormatter.bind(this),toDates:function(){var A=i.defaultValues;if(typeof A==="function"){A=A();}return A;},parse:function(A){var E=i.basicLanguageText||i.languageText||T.getTranslatedText(i.textKey);if(A&&E&&E.toLowerCase().startsWith(A.toLowerCase())){return{operator:this.getKey(),values:this.toDates()};}return null;}});return s;};
y.prototype._createCustomDynamicDDOption=function(n){var s=this;var A=new sap.m.CustomDynamicDateOption({key:this._getCustomDDOptionName(n.key),getText:function(){var i=(n.languageText||T.getTranslatedText(n.textKey));if(i.indexOf("{0}")>=0){return s._fillNumberToText(i);}return i;},getValueHelpUITypes:function(){if(n.type==="int"){return[new u({type:"int"})];}else if(n.type==="[int,int]"){return[new u({type:"int"}),new u({type:"int"})];}},createValueHelpUI:function(i,E){i.aControlsByParameters={};i.aControlsByParameters[this.getKey()]=[];s.setControls([]);var F=s.getControls(n),G=n.defaultValues.length,H=n.defaultValues;if(typeof H==="function"){H=H();}F.forEach(function(J){if(!J.getValue()&&H&&H[0]){if(typeof H==="function"){H=H();}J.setValue(H[0]);H.shift();s.oModel.setProperty("/condition/value"+(G-H.length),J.getValue());}if(typeof E==="function"){J.attachChange(function(){E(this);},this);}i.aControlsByParameters[this.getKey()].push(J);},this);s.setControls(F);return F;},format:this._customDDOptionFormatter.bind(this),toDates:function(i){var E=s.oModel.getProperty("",s.oConditionContext),O=E.operation,F=E.value1,G=E.value2;E.operation=s._getOptionName(i.operator);E.value1=!isNaN(i.values[0])?parseInt(i.values[0]):i.values[0];E.value2=!isNaN(i.values[1])?parseInt(i.values[1]):i.values[1];var H=s.getFilterRanges();E.operation=O;E.value1=F;E.value2=G;if(H.length===0){return[];}return[H[0].value1,H[0].value2];},parse:function(i){var E=new L({key:n.key}),M=n.filterSuggestItem.call(n,i,E,s);if(M){return{operator:this.getKey(),values:[E._value1,E._value2||null]};}return null;},validateValueHelpUI:function(E){var F=function(J){var K=J.getValue(),M=this._maxIntValue,O=-this._maxIntValue;if((!K&&K!==0)||isNaN(K)){return false;}if(H&&H.getBindingInfo('value')&&H.getBindingInfo('value').type&&H.getBindingInfo('value').type.oConstraints){if(H.getBindingInfo('value').type.oConstraints.hasOwnProperty("minimum")){O=H.getBindingInfo('value').type.oConstraints.minimum;}if(H.getBindingInfo('value').type.oConstraints.hasOwnProperty("maximum")){M=H.getBindingInfo('value').type.oConstraints.maximum;}}if(K<O||K>M){return false;}return true;};var G=this.getValueHelpUITypes();for(var i=0;i<G.length;i++){var H=E.aControlsByParameters[this.getKey()][i];switch(G[i].getType()){case"int":return F.call(s,H);case"month":case"date":case"daterange":if(!H.getSelectedDates()||H.getSelectedDates().length==0){return false;}break;case"options":if(H.getSelectedIndex()<0){return false;}break;}}return true;}});return A;};
y.prototype._customDDOptionFormatter=function(i){var O=this._getOptionName(i.operator),n=this.getOperation(O);if(!n){this.oModel.setProperty("/condition/value1",null);this.oModel.setProperty("/condition/value2",null);return"";}var s=this._prepareDDRValues(n,i,O);var J={conditionTypeInfo:{data:{value1:s[0],value2:s[1]}}};if(n.languageText){var F=n.languageText;if(this._isIntIntInterval(n)){if(J.conditionTypeInfo.data.value1!=null&&J.conditionTypeInfo.data.value1!==""&&J.conditionTypeInfo.data.value2!=null&&J.conditionTypeInfo.data.value2!==""){F=this._formatIntIntInterval(n,J);}}else if(this._isIntInterval(n)){if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){F=this._formatIntInterval(n,J);}else{F="";}}else if(this._isFixedRange(n)){F=this._formatFixedRange(n,n.textValue);}else{if(J.conditionTypeInfo.data.value1!==null&&J.conditionTypeInfo.data.value1!==""){var A=this._calculateDateRangeValueText(n,J);var E=A.value;if(E){F=this._formatFixedRange(n,E);}else{F="";}}else{F="";}}}return F;};
y.prototype._isNewDynamicDateRangeEnabled=function(){return v.fromQuery(window.location.search).get("sap-ui-xx-smartFilterBarDynamicDateRange");};
y.prototype._isIntInterval=function(i){return i.basicLanguageText.indexOf("{0}")>=0;};
y.prototype._formatIntInterval=function(i,J){if(J.conditionTypeInfo.data.value1===0&&i.zeroNumberTextKey){return i.zeroNumberLanguageText;}if(J.conditionTypeInfo.data.value1===1&&i.singulareBasicLanguageText){return i.singulareBasicLanguageText;}return this._fillNumberToText(i.basicLanguageText,J.conditionTypeInfo.data.value1);};
y.prototype._isIntIntInterval=function(i){return i.basicLanguageText.indexOf("{0}")>=0&&i.basicLanguageText.indexOf("{1}")>=0;};
y.prototype._formatIntIntInterval=function(i,J){return this._fillNumberToText(i.basicLanguageText,J.conditionTypeInfo.data.value1,J.conditionTypeInfo.data.value2);};
y.prototype._isFixedRange=function(i){return i.textValue;};
y.prototype._formatFixedRange=function(i,s){if(this._isNewDynamicDateRangeEnabled()){return i.languageText;}return i.languageText+" ("+s+")";};
y.prototype._calculateDateRangeValueText=function(i,J){var n=J.conditionTypeInfo.data.value1;var s=J.conditionTypeInfo.data.value2;var A;var E=false;if((typeof n==="number"||typeof n==="string"&&!isNaN(parseInt(n)))&&i.valueList){A=i.valueList[n].text;}else if(n instanceof Date){var F=this._getDateFormatter(false);if(J.conditionTypeInfo.data.operation!=="DATERANGE"&&(n&&!s)){A=F.format(n);}else if(J.conditionTypeInfo.data.operation==="DATERANGE"&&n&&s){A=F.format(n)+" - "+F.format(s);}else if(J.conditionTypeInfo.data.operation==="DATERANGE"&&n&&!s&&!(this._oPopup&&this._oPopup.isOpen())){A=F.format(n)+" - ";E=true;}else{A="";}}else{A=J.conditionTypeInfo.data.value1;}return{value:A,bSetCursor:E};};
y.prototype._convertUniversalDateToDate=function(i){return i.map(function(n){if(n.getJSDate){return n.getJSDate();}return n;});};
y.prototype._prepareDDRValues=function(O,i,s){var n=typeof O.category==="object"?O.category.key:O.category;if(O.type==="int"&&!n.toUpperCase().startsWith('FIXED.')){return[parseInt(i.values[0]),null];}if(O.type==="[int,int]"){return[parseInt(i.values[0]),parseInt(i.values[1])];}var A=this._getDDROption(s).toDates(i);return this._convertUniversalDateToDate(A);};
y.prototype._setDDROperation=function(i){if(this._isNewDynamicDateRangeEnabled()&&this._oInput&&i.key&&i.operation){var n=[];if(i.value1||i.value1===0){n[0]=i.value1;if(i.value2||i.value2===0){n[1]=i.value2;}}var O=this._getDDROption(i.operation),s=this.getOperation(i.operation),A=function(s,n){if(!s){return false;}if(s.hasOwnProperty("value1")&&!n[0]){return false;}if(s.hasOwnProperty("value2")&&!n[1]){return false;}return true;};if(A(s,n)){this._oInput.setValue({key:i.key,operator:O.getKey(),values:n});}else{this._oInput.setValue(null);this._oInput._oInput.setValue(null);}}};
return y;});
sap.ui.predefine('sap/ui/comp/config/condition/Type',['sap/ui/base/EventProvider','sap/ui/model/json/JSONModel','sap/m/Select','sap/ui/core/ListItem','sap/m/Label','sap/ui/model/Sorter','sap/ui/model/Filter'],function(E,J,S,L,a,b,F){"use strict";
var T=E.extend("sap.ui.comp.config.condition.Type",{constructor:function(f,o,c){E.call(this);this.oFilterProvider=o;var d={condition:{operation:"",value1:null,value2:null,key:f},operations:[],controls:[],currentoperation:{},pending:false};this.oModel=new J(d);var C=this.oModel.checkUpdate;this.oModel.suspend=function(){this.bSuspended=true;this.checkUpdate=function(){};};this.oModel.resume=function(){this.bSuspended=false;this.checkUpdate=C;this.checkUpdate();};this.oContext=this.oModel.getContext("/");this.oConditionContext=this.oModel.getContext("/condition");this.sFieldName=f;var O=this.oModel.bindProperty("operation",this.oConditionContext),t=this;O.attachChange(function(){var s=t.oModel.getProperty("operation",t.getConditionContext()),e=t.getOperation(s);if(e){e=Object.assign({},e);if(!t.bIgnoreBindingChange){var D=t.getDefaultValues(e);t.setDefaultValues(D[0],D[1]);}}t.setControls([]);t.setControls(t.getControls(e));if(e){if(e.getValueList){e.valueList=e.getValueList();}t.oModel.setProperty("/currentoperation",e);}if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var v=this.oModel.bindProperty("value1",this.oConditionContext);v.attachChange(function(){if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var V=this.oModel.bindProperty("value2",this.oConditionContext);V.attachChange(function(){if(!t.bIgnoreBindingChange){t.serialize(false,t.bFireFilterChange);}});var p=this.oModel.bindProperty("pending",this.oContext);p.attachChange(function(){if(t.bAsync){if(t._iPendingTimer){clearTimeout(t._iPendingTimer);}t._iPendingTimer=setTimeout(t["fireEvent"].bind(t,"PendingChange",{oSource:t,pending:t.oModel.getProperty("/pending")}),10);}});this._oOperationSelect=null;this.oFieldMetadata=c;this.oOperationFilter=null;this.bAsync=false;}});
T._createStableId=function(i,s){if(i&&i.oFilterProvider&&i.oFieldMetadata){return i.oFilterProvider._createFilterControlId(i.oFieldMetadata)+(s?s:"");}else{return undefined;}};
T.getTranslatedText=function(t,r){if(typeof t==="object"){r=t.bundle;t=t.key;}if(!r){r="sap.ui.comp";}return sap.ui.getCore().getLibraryResourceBundle(r).getText(t)||t;};
T.prototype.getTranslatedText=T.getTranslatedText;
T.prototype.applySettings=function(s){if(s&&s.operations&&s.operations.filter){this.oOperationFilter=s.operations.filter;}else{this.oOperationFilter=null;}};
T.prototype.getParent=function(){return this.oFilterProvider._oSmartFilter;};
T.prototype.getModel=function(){return this.oModel;};
T.prototype.getConditionContext=function(){return this.oConditionContext;};
T.prototype.setDefaultValues=function(v,V){this.oModel.setProperty("value1",v,this.getConditionContext(),true);this.oModel.setProperty("value2",V,this.getConditionContext(),true);};
T.prototype.getContext=function(){return this.oContext;};
T.prototype.getControls=function(o){return[];};
T.prototype.getOperations=function(){return[];};
T.prototype.isPending=function(){return this.getModel().getProperty("pending",this.getContext());};
T.prototype.attachPendingChange=function(h){this.attachEvent("PendingChange",h);};
T.prototype.detachPendingChange=function(h){this.detachEvent("PendingChange",h);};
T.prototype.setPending=function(v){if(this.bAsync){this.getModel().setProperty("pending",v,this.getContext());}};
T.prototype._filterOperation=function(o){if(!this.oOperationFilter){return true;}var f=Array.isArray(this.oOperationFilter)?this.oOperationFilter:[this.oOperationFilter],r;f.some(function(c){if(!c.path){return false;}var v=o[c.path];var e=c.exclude||false;var d;if(c.contains&&v){d=(typeof c.contains==="string")?c.contains.split(","):c.contains;r=e;for(var j=0;j<d.length;j++){if(e&&v.indexOf(d[j])>-1){r=false;return true;}else if(!e&&v.indexOf(d[j])>-1){r=true;return true;}}}if(c.equals&&v){d=(typeof c.equals==="string")?c.equals.split(","):c.equals;r=e;for(var j=0;j<d.length;j++){if(e&&v===d[j]){r=false;return true;}else if(!e&&v===d[j]){r=true;return true;}}}return false;});return r;};
T.prototype._updateOperation=function(o){if(!o.textValue){o.textValue="";}if(!o.languageText&&o.textKey){o.languageText=this.getTranslatedText(o.textKey);}};
T.prototype.updateOperations=function(){this.oModel.setProperty("operations",[],this.getContext());};
T.prototype.getOperation=function(o){var O=this.oModel.getProperty("operations",this.getContext())||[];for(var i=0;i<O.length;i++){if(o===O[i].key){return O[i];}}return null;};
T.prototype.getDefaultOperation=function(){var o=this.getOperations();if(!o||o.length===0){return null;}for(var i=0;i<o.length;i++){if(o[i].defaultOperation){return o[i];}}return o[0];};
T.prototype.setControls=function(c){var o=this.oModel.getProperty("controls",this.getContext());var i;if(o){for(i=0;i<o.length;i++){o[i].destroy();}}this.oModel.setProperty("controls",c,this.getContext());if(c){for(i=0;i<c.length;i++){c[i].setBindingContext(this.getConditionContext(),"$smartEntityFilter");}this._setAriaLabeledByToControls(c);}};
T.prototype._setAriaLabeledByToControls=function(c){if(this._oOperationLabel&&c){for(var i=0;i<c.length;i++){if(c[i].addAriaLabelledBy){if(c[i].getAriaLabelledBy().indexOf(this._oOperationLabel.getId())===-1){c[i].addAriaLabelledBy(this._oOperationLabel);}}}}};
T.prototype.setOperation=function(o){var O=this.getOperation(o);if(O){this.setCondition({operation:O.key,key:this.sFieldName,value1:O.defaultValues[0]||null,value2:O.defaultValues[1]||null});this.getModel().checkUpdate(true);}else{}};
T.prototype.isValidCondition=function(){return false;};
T.prototype.setCondition=function(c){this.oModel.setProperty("key",c.key,this.oConditionContext);this.oModel.setProperty("operation",c.operation,this.oConditionContext);this.oModel.setProperty("value1",c.value1,this.oConditionContext);this.oModel.setProperty("value2",c.value2,this.oConditionContext);this.oModel.setProperty("tokenText",this.getTokenText(c),this.oConditionContext);return this;};
T.prototype.setAsync=function(A){this.bAsync=A;};
T.prototype.getAsync=function(A){return this.bAsync;};
T.prototype.initialize=function(j){this.updateOperations();};
T.prototype.serialize=function(){};
T.prototype.validate=function(f){this._bForceError=f!==false;var i=this.getModel().getProperty("inputstate",this.getContext())||"NONE";if(!this.isPending()&&this.oFieldMetadata&&this.oFieldMetadata.isMandatory&&(!this.isValidCondition()||i!=="NONE")&&this._bForceError){this.getModel().setProperty("inputstate","ERROR",this.getContext());return false;}this.getModel().setProperty("inputstate","NONE",this.getContext());return true;};
T.prototype.getCondition=function(){var c=Object.assign({},this.oModel.getProperty("",this.oConditionContext));return c;};
T.prototype.providerDataUpdated=function(u,d){};
T.prototype.getFilter=function(f){return null;};
T.prototype.getFilterRanges=function(p){return null;};
T.prototype.getTokenText=function(o){return"";};
T.prototype.getName=function(){return this.getMetadata().getName();};
T.prototype.getType=function(){return"Edm";};
T.prototype._initializeFilterItemPopoverContent=function(l){var o=new a({text:T.getTranslatedText("CONDITION_DATERANGETYPE_POPOVER_LABEL")});l.addItem(o);this._oOperationLabel=o;var O=new S(T._createStableId(this,"select"),{width:"100%"});if(O._oList&&O._oList.setShowSecondaryValues){O._oList.setShowSecondaryValues(true);}O.bindProperty("selectedKey",{path:"$smartEntityFilter>condition/operation"});O.bindAggregation("items",{path:"$smartEntityFilter>operations",sorter:new b("order",false,false),filters:new F("order",function(v){return v!==undefined&&v>-1;}),template:new L({text:{path:"$smartEntityFilter>languageText"},key:{path:"$smartEntityFilter>key"},additionalText:{path:"$smartEntityFilter>textValue"}})});O.setBindingContext(this.getContext(),"$smartEntityFilter");var c=this.getModel().bindList("controls",this.getContext());c.attachChange(function(){var n=c.getModel().getProperty("controls",c.getContext());if(n){for(var i=0;i<n.length;i++){l.addItem(n[i]);}}});l.addItem(O);o.setLabelFor(O);this._oOperationSelect=O;l.setModel(this.getModel(),"$smartEntityFilter");this.bIgnoreBindingChange=true;this.getModel().checkUpdate(true);this.bIgnoreBindingChange=false;this.oLayout=l;};
T.prototype.destroy=function(){this.setControls([]);this.oLayout=null;E.prototype.destroy.apply(this,arguments);};
return T;});
sap.ui.predefine('sap/ui/comp/filterbar/FilterBar',["sap/ui/core/library","sap/m/Button","sap/m/Label","sap/m/Panel","sap/m/Text","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/ui/Device","sap/ui/comp/state/UIState","./VariantConverterFrom","./VariantConverterTo","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagementUi2","sap/ui/core/InvisibleText","sap/ui/layout/Grid","sap/ui/layout/GridRenderer","sap/ui/layout/GridData","sap/ui/layout/HorizontalLayout","sap/ui/layout/VerticalLayout","sap/ui/layout/AlignedFlowLayout","sap/m/library","sap/ui/model/json/JSONModel","./FilterGroupItem","sap/base/Log","sap/base/util/merge","sap/ui/core/ShortcutHintsMixin","sap/base/util/Deferred"],function(c,B,L,P,T,a,b,D,U,V,d,e,S,I,G,f,g,H,h,A,m,J,F,k,o,p,q){"use strict";var r=c.ValueState;var s=c.TextAlign;var t=m.ButtonType;var u;var v;var w;var x;var y;var R;
var z=G.extend("sap.ui.comp.filterbar.FilterBar",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/filterbar/FilterBar.designtime",properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:""},advancedMode:{type:"boolean",group:"Misc",defaultValue:false},expandAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false,deprecated:true},searchEnabled:{type:"boolean",group:"Misc",defaultValue:true},filterBarExpanded:{type:"boolean",group:"Misc",defaultValue:true},considerGroupTitle:{type:"boolean",group:"Misc",defaultValue:false},showClearButton:{type:"boolean",group:"Misc",defaultValue:false},showRestoreButton:{type:"boolean",group:"Misc",defaultValue:true},showGoOnFB:{type:"boolean",group:"Misc",defaultValue:true},showRestoreOnFB:{type:"boolean",group:"Misc",defaultValue:false},showClearOnFB:{type:"boolean",group:"Misc",defaultValue:false},showGoButton:{type:"boolean",group:"Misc",defaultValue:null,deprecated:true},deltaVariantMode:{type:"boolean",group:"Misc",defaultValue:true},filterContainerWidth:{type:"string",group:"Misc",defaultValue:"12rem"},useToolbar:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:""},showFilterConfiguration:{type:"boolean",group:"Misc",defaultValue:true},useSnapshot:{type:"boolean",group:"Misc"},isRunningInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{filterItems:{type:"sap.ui.comp.filterbar.FilterItem",multiple:true,singularName:"filterItem"},filterGroupItems:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"filterGroupItem"},_parameters:{type:"sap.ui.comp.filterbar.FilterGroupItem",multiple:true,singularName:"_parameter",visibility:"hidden"}},associations:{basicSearch:{type:"sap.m.SearchField",multiple:false}},events:{cancel:{},reset:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},search:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},beforeVariantSave:{parameters:{context:{type:"string"}}},beforeVariantFetch:{},afterVariantLoad:{parameters:{context:{type:"string"},executeOnSelect:{type:"boolean"}}},filterChange:{added:{type:"sap.ui.core.Control"},deleted:{type:"sap.ui.core.Control"},filterItem:{type:"sap.ui.comp.filterbar.FilterGroupItem"}},clear:{parameters:{selectionSet:{type:"sap.ui.core.Control[]"}}},initialise:{},initialized:{},afterVariantSave:{},filtersDialogClosed:{parameters:{context:{type:"string"}}},filtersDialogBeforeOpen:{},filtersDialogSearch:{},filtersDialogCancel:{},filtersDialogSearchForFilters:{parameters:{newValue:{type:"string"}}},assignedFiltersChanged:{}}},
renderer:{apiVersion:2}
});
z.INTERNAL_GROUP="__$INTERNAL$";
z.prototype.init=function(){var i=this.getFilterContainerWidth();G.prototype.init.apply(this,arguments);this._filterGroupItemChange=this._filterGroupItemChange.bind(this);this._filterItemChange=this._filterItemChange.bind(this,null);this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._oHideShowButton=null;this._oShowAllFiltersButton=null;this._oSearchButton=null;this._oFiltersButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._bIsInitialized=false;this._oInitializedDeferred=new q();this._aFields=null;this._oBasicSearchField=null;this._oVariant={};this._filterChangeSemaphore=true;this._triggerFilterChangeState=true;this._fRegisteredFilterChangeHandlers=null;this._fInitialiseVariants=null;this._bHostedVariantManagement=false;this._nMaxFiltersByDefault=8;this._bResetFiltersDialogTriggered=false;this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.setHSpacing(0);this.addStyleClass("sapUiCompFilterBar sapUiCompFilterBarMarginBottom sapUiCompFilterBarPaddingPanel sapContrastPlus");this.addStyleClass(this._isPhone()?"sapUiCompFilterBarPhone":"sapUiCompFilterBarNonPhone");this._oToolbar=this._createToolbar();this.addContent(this._oToolbar);this._bDelayRendering=true;this._bShowAllFilters=false;this._oBasicAreaLayout=new A();this._oBasicAreaLayout.setVisible(false);this._oBasicAreaLayout.setLayoutData(new g({span:"L12 M12 S12"}));this._oBasicAreaLayout.setMinItemWidth(i);this._oBasicAreaLayout.setMaxItemWidth(i);this.addContent(this._oBasicAreaLayout);this._oAdvancedPanel=new P();this._oAdvancedPanel.setLayoutData(new g({span:"L12 M12 S12"}));this._oAdvancedPanel.setVisible(false);this.addContent(this._oAdvancedPanel);this.oModel=new J({});this.setModel(this.oModel,"FilterBar");this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:s.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");if(this._isTablet()||this._isPhone()){this.setFilterBarExpanded(false);}this.getMetadata().addPublicMethods("getInitializedPromise");};
z.prototype.onBeforeRendering=function(){if(G.prototype.onBeforeRendering){G.prototype.onBeforeRendering.apply(this,arguments);}if(this.getIsRunningInValueHelpDialog()){if(this._isTablet()){this.addStyleClass("compFilterBarTablet");}this.iAddedContentLength=4-this._oBasicAreaLayout.getContent().length;var l=this.iAddedContentLength;if(l<4&&l>0&&!this._bLayoutAdded){while(l>0){this._oBasicAreaLayout.addContent(new h().data("blankLayout",true));l--;}this._bLayoutAdded=true;}if(this._oShowAllFiltersButton===null){this.initShowAllFiltersButton();}if(this._oBasicSearchField&&this._oBasicSearchField.isA("sap.m.SearchField")){this._oBasicSearchField.setWidth("100%");}this._oBasicAreaLayout.setMaxItemWidth(null);this._oAdvancedPanel.setVisible(false);this._rerenderFilters();}else if(this._oShowAllFiltersButton){this._oBasicAreaLayout.removeEndContent(this._oShowAllFiltersButton);this._oShowAllFiltersButton=null;}else{this._oHideShowButton&&this._oHideShowButton.addStyleClass("sapUiCompFilterBarPaddingRightBtn");}};
z.prototype.getShowAllFiltersButton=function(){return this._oShowAllFiltersButton;};
z.prototype.setFilterContainerWidth=function(i){this._oBasicAreaLayout.setMinItemWidth(i);if(this.getUseToolbar()){this._oBasicAreaLayout.setMaxItemWidth(this._oBasicAreaLayout.getMinItemWidth());}else{this._setMaxItemWidth2();}this.setProperty("filterContainerWidth",i);return this;};
z.prototype._setMaxItemWidth2=function(){var j,n,l=this._oBasicAreaLayout.getMinItemWidth();["rem","%","px","em"].some(function(O){var i=l.indexOf(O);if(i>0){l=l.substring(0,i);j=O;return true;}return false;});if(j){n=parseInt(l);if(!isNaN(n)){n*=2;this._oBasicAreaLayout.setMaxItemWidth(n+j);}}};
z.prototype._hasAnyVisibleFiltersOnFB=function(){var j=this._retrieveVisibleAdvancedItems();for(var i=0;i<j.length;i++){if(j[i].filterItem.getVisibleInFilterBar()){return true;}}return false;};
z.prototype._showHintText=function(){var i=0;if(!this._oHintText){return;}if(this._isNewFilterBarDesign()){return;}if(!this.getAdvancedMode()&&!this._isPhone()){var j=!this._hasAnyVisibleFiltersOnFB();if(j){i=this._oAdvancedPanel.indexOfContent(this._oHintText);if(i<0){this._oAdvancedPanel.insertContent(this._oHintText,0);}}this._oHintText.setVisible(j);this._oAdvancedPanel.setVisible(j);if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(!j&&this.getFilterBarExpanded());}}};
z.prototype._hasRelevantFilters=function(){var i,n=null,j;if(!this._mAdvancedAreaFilter||(Object.keys(this._mAdvancedAreaFilter)<1)){return false;}if(this.getAdvancedMode()){for(n in this._mAdvancedAreaFilter){var l=this._mAdvancedAreaFilter[n];if(l&&l.items){for(i=0;i<l.items.length;i++){j=l.items[i];if(j){if(this._determineVisibility(j.filterItem)){return true;}}}}}return false;}return true;};
z.prototype._adaptButtonsEnablement=function(){var i=false||!!this._mAdvancedAreaFilter;if(this._oHideShowButton){this._oHideShowButton.setEnabled(i);if(this.getAdvancedMode()&&!this._isPhone()){this._oHideShowButton.setVisible(this._hasRelevantFilters());}}this._oClearButtonOnFB.setEnabled(i);this._oRestoreButtonOnFB.setEnabled(i);this._oFiltersButton.setEnabled(i);var j=true;if(this._isPhone()&&this.getUseToolbar()){j=false;}if(i&&this.getFilterBarExpanded()&&j&&!this.getAdvancedMode()){this._oBasicAreaLayout.setVisible(true);}};
z.prototype.getVariantManagement=function(){return this._oVariantManagement;};
z.prototype.setShowClearOnFB=function(i){this.setProperty("showClearOnFB",i);this._oClearButtonOnFB.setVisible(i);return this;};
z.prototype.setShowRestoreOnFB=function(i){this.setProperty("showRestoreOnFB",i);this._oRestoreButtonOnFB.setVisible(i);return this;};
z.prototype.setShowGoOnFB=function(i){this.setProperty("showGoOnFB",i);this._calcVisibilityGoButton();return this;};
z.prototype._calcVisibilityGoButton=function(){var i=this.getShowGoOnFB();if(i&&!this._isPhone()&&this.isLiveMode&&this.isLiveMode()){i=false;}this._oSearchButton.setVisible(i);};
z.prototype.setShowGoButton=function(i){this.setShowGoOnFB(i);return this;};
z.prototype.getShowGoButton=function(){return this.getShowGoOnFB();};
z.prototype.hideGoButton=function(){this._oSearchButton.setVisible(false);};
z.prototype.restoreGoButton=function(){this._oSearchButton.setVisible(this.getShowGoOnFB());};
z.prototype.setShowFilterConfiguration=function(i){this.setProperty("showFilterConfiguration",i);if(this._oFiltersButton){this._oFiltersButton.setVisible(i);}return this;};
z.prototype.isCurrentVariantStandard=function(){var i;if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();if(i===""){return true;}return(i===this._oVariantManagement.getStandardVariantKey());}return undefined;};
z.prototype.setCurrentVariantId=function(i,j){if(this._oVariantManagement){this._oVariantManagement.setCurrentVariantId(i,j);}};
z.prototype.getCurrentVariantId=function(){var i="";if(this._oVariantManagement){i=this._oVariantManagement.getCurrentVariantId();}return i;};
z.prototype.getDataSuiteFormat=function(i){return this._getDataSuiteFormat(i,null);};
z.prototype._getDataSuiteFormat=function(i,j){var l=null,n,O,Q,W,X;if(this._oVariantManagement){n=this.getCurrentVariantId();if(this.getFilterDataAsString){Q=this._determineVariantFiltersInfo(i,true);if(this.getFilterContextUrl){X=this.getFilterContextUrl();}if(this.getParameterContextUrl){W=this.getParameterContextUrl();}O=this.getFilterDataAsString(i);if(O){var Y=new d();l=Y.convert(n,Q,O,this,j,W,X);}}}return l;};
z.prototype.getBasicSearchName=function(){var i=null;if(this._oBasicSearchField&&this.getEntitySet){i="$"+this.getEntitySet()+".basicSearch";}return i;};
z.prototype.getBasicSearchValue=function(){return this._getBasicSearchValue();};
z.prototype.setUiStateAsVariant=function(i){var j={replace:true,strictMode:true};this.setUiState(i,j);this.fireAfterVariantLoad("SPV_VARIANT",false);this._applyVisibility(i.getSelectionVariant());};
z.prototype._applyVisibility=function(i){var j=function(l){if(l&&l.getVisible()&&!l.getHiddenFilter()){if(!l.getVisibleInFilterBar()){l.setVisibleInFilterBar(true);}if(!l.getPartOfCurrentVariant()){l.setPartOfCurrentVariant(true);}}};if(this._bIsInitialized){for(var n in this._mAdvancedAreaFilter){if(n){this._mAdvancedAreaFilter[n].items.forEach(function(l){if(l&&l.filterItem&&l.filterItem.getMandatory()){j(l.filterItem);}else if(l&&l.filterItem){if(l.filterItem.getVisibleInFilterBar()){l.filterItem.setVisibleInFilterBar(false);}if(l.filterItem.getPartOfCurrentVariant()){if(n===z.INTERNAL_GROUP){l.filterItem.setPartOfCurrentVariant(true);}else{l.filterItem.setPartOfCurrentVariant(false);}}}});}}if(i&&i.Parameters){i.Parameters.forEach(function(l){var O=this.determineFilterItemByName(l.PropertyName);j(O);}.bind(this));}if(i&&i.SelectOptions){i.SelectOptions.forEach(function(l){var O=this.determineFilterItemByName(l.PropertyName);j(O);}.bind(this));}}};
z.prototype.getUiState=function(i){var j,l,n=false,O=null,Q,W;if(i){n=(i.allFilters===true);}l=this._getDataSuiteFormat(n,"13.0");j=new U();j.selectionVariant=JSON.parse(l);j.setSelectionVariant(j.selectionVariant);var X=j.getSelectionVariant();if(X){if(this.getModelData&&this.getModelData()){O=this.getModelData();}W=U.calcSemanticDates(X,O);j.setSemanticDates(W);Q=U.calculateValueTexts(X,O);j.setValueTexts(Q);window.sessionStorage.setItem(this.getId(),JSON.stringify(Q));window.sessionStorage.setItem("semanticDates",JSON.stringify(W));}return j;};
z.prototype.setUiState=function(i,j){var l,n,O=null,Q=false,W=true,X;if(j&&typeof j.replace==="boolean"){Q=j.replace;}if(j&&typeof j.strictMode==="boolean"){W=j.strictMode;}if(i){O=i.getSelectionVariant();if(O){n=JSON.stringify(O);}l=i.getValueTexts();X=i.getSemanticDates();}if(!l){l=JSON.parse(window.sessionStorage.getItem(this.getId()));}if(!X){X=JSON.parse(window.sessionStorage.getItem("semanticDates"));}this._setDataSuiteFormat(n,Q,W,l,X);this._enhanceFilterItemsWithTextValue(l,O);};
z.prototype.getDescriptionForKeys=function(i){};
z.prototype._enhanceFilterItemsWithTextValue=function(i,j){var l=U.determineFiltersWithOnlyKeyValues(i,j,[this.getBasicSearchName()]);this.getDescriptionForKeys(l);};
z.prototype.setDataSuiteFormat=function(i,j){this._setDataSuiteFormat(i,j,true);};
z.prototype._setDataSuiteFormat=function(i,j,l,n,O){var Q,W,X;if(i){Q=new V();W=Q.convert(i,this,l);if(W){this._clearErrorState();if(W.variantId&&this._oVariantManagement){if(this._bIsInitialized){if(this._oVariantManagement.isPageVariant()){this._oVariantManagement._selectVariant(W.variantId,"DATA_SUITE");}else{this._setFilterVisibility(W.variantId);}}this._oVariantManagement.setInitialSelectionKey(W.variantId);}if(W.payload&&(j||(Object.keys(JSON.parse(W.payload)).length>0))&&this.setFilterDataAsString){X=W.payload;if(n){X=U.enrichWithValueTexts(X,n);}if(O){X=U.enrichWithSemanticDates(X,O);}this.setFilterDataAsString(X,j);}if(W.basicSearch&&this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||W.basicSearch);this._updateToolbarText();}}}};
z.prototype._setFilterVisibility=function(i){if(this._oVariantManagement.getSelectionKey()!==i){this._oVariantManagement.setInitialSelectionKey(i);var j=this._getStandardVariant();if(j){var l=this._oVariantManagement.getVariantContent(this,i);if(l&&l.filterbar){if(l.hasOwnProperty("version")){l=this.mergeVariant(j,l);}this._reapplyVisibility(l.filterbar);}}}};
z.prototype.applySettings=function(j){if(this._possibleToChangeVariantManagement()){if(j&&j.customData){for(var i=0;i<j.customData.length;i++){var l=j.customData[i];if(l&&l.mProperties&&l.mProperties.key==="pageVariantPersistencyKey"){this._oVariantManagement.setPersistencyKey(l.mProperties.value);this._oVariantManagement.setVisible(true);this._bHostedVariantManagement=true;}}}}if(j&&j.persistencyKey){this._bHostedVariantManagement=true;}this._applyLayoutDataToToolbarButtons();G.prototype.applySettings.apply(this,arguments);if(!this.getUseToolbar()&&!this.getFilterBarExpanded()){this.setFilterBarExpanded(true);}this._afterVariantsLoad();};
z.prototype._applyLayoutDataToToolbarButtons=function(i){if(this._isPhone()||this._isTablet()||this.getAdvancedMode()||!this.getUseToolbar()){return;}if(!u&&!this._bToolbarLayoutDataRequested){u=sap.ui.require("sap/m/ToolbarLayoutData");if(!u){sap.ui.require(["sap/m/ToolbarLayoutData"],_.bind(this));this._bToolbarLayoutDataRequested=true;}}if(!u){return;}this._oHideShowButton.setLayoutData(new u({shrinkable:true}));this._oClearButtonOnFB.setLayoutData(new u({shrinkable:true}));this._oRestoreButtonOnFB.setLayoutData(new u({shrinkable:true}));this._oFiltersButton.setLayoutData(new u({shrinkable:true}));this._oSearchButton.setLayoutData(new u({shrinkable:false}));};
function _(i){u=i;this._bToolbarLayoutDataRequested=false;if(!this._bIsBeingDestroyed){this._applyLayoutDataToToolbarButtons();}}
z.prototype.setPersistencyKey=function(i){this.setProperty("persistencyKey",i);if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(true);}return this;};
z.prototype._possibleToChangeVariantManagement=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){return true;}return false;};
z.prototype.clearVariantSelection=function(){if(this._oVariantManagement){this._oVariantManagement.clearVariantSelection();}};
z.prototype.setSearchEnabled=function(i){this.setProperty("searchEnabled",i);if(this._oSearchButton){this._oSearchButton.setEnabled(i);}return this;};
z.prototype.setSearchButtonEmphType=function(i){};
z.prototype.setSimplifiedMode=function(i){};
z.prototype.getSimplifiedMode=function(){if(this.getAdvancedMode()){return false;}return true;};
z.prototype.setExpandAdvancedArea=function(i){this.setFilterBarExpanded(i);return this;};
z.prototype.getExpandAdvancedArea=function(){return this.getFilterBarExpanded();};
z.prototype.setAdvancedMode=function(i){this.setProperty("advancedMode",i);this.toggleStyleClass("sapContrastPlus",!i);if(i){if(!this._oAdvancedAreaForm){this._oAdvancedAreaForm=this._createAdvancedAreaForm();}if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}if(this._oToolbar){this._oToolbar.addStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");if(this._oBasicSearchField){if(this._oToolbar.indexOfContent(this._oBasicSearchField)<0){this._oToolbar.insertContent(this._oBasicSearchField,1);}}}}else{if(this.getPersistencyKey()&&this._possibleToChangeVariantManagement()){if(this._oVariantManagement){this._oVariantManagement.setVisible(true);}if(this._oToolbar){this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}}this._oFiltersButton.setVisible(!i);if(this._oHideShowButton){this._oHideShowButton.setVisible((i&&this._isPhone())?false:true);if(this._oHideShowButton.getVisible()){if(this.getFilterBarExpanded()){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_HIDE_FILTERS"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_SHOW_FILTERS"));}}}if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(!i&&this.getFilterBarExpanded());}this._oAdvancedPanel.setVisible(i&&this.getFilterBarExpanded());this._adaptButtonsEnablement();return this;};
z.prototype.setUseToolbar=function(i){this.setProperty("useToolbar",i);if(!i){this._adaptNewFilterBarDesign();}else{this._recreateToolbar();}return this;};
z.prototype._recreateToolbar=function(){if(!this._oToolbar){this._bButtonaAdded=false;if(this._oButtonsVLayout){this._oBasicAreaLayout.removeContent(this._oButtonsVLayout);this._oButtonsVLayout.destroy();this._oButtonsVLayout=null;}this._oToolbar=this._createToolbar(true);this.insertContent(this._oToolbar,0);if(this._oVariantManagement){if(this._oVariantManagement instanceof S||((this._oVariantManagement.getId()===(this.getId()+"-variant")))){this._oToolbar.insertContent(this._oVariantManagement,0);}}this._adaptButtonsEnablement();if(this._oBasicSearchFieldContainer){this._oBasicAreaLayout.removeContent(this._oBasicSearchFieldContainer);this._cleanBasicSearchContainer();this.setBasicSearch(this._oBasicSearchField);}this._oHintText=new T({text:this._oRb.getText("FILTER_BAR_NO_FILTERS_ON_FB"),textAlign:s.Center});this._oHintText.setVisible(false);this._oHintText.addStyleClass("sapUiCompFilterBarHint");this._oBasicAreaLayout.addContent(this._oHintText);this._oBasicAreaLayout.setMaxItemWidth(this._oBasicAreaLayout.getMinItemWidth());this._updateToolbarText();}};
z.prototype._cleanBasicSearchContainer=function(){if(this._oBasicSearchFieldContainer){var j=this._oBasicSearchFieldContainer.removeAllContent();if(j){for(var i=0;i<j.length;i++){if(j[i]!==this._oBasicSearchField){j[i].destroy();}}}this._oBasicSearchFieldContainer.destroy();this._oBasicSearchFieldContainer=null;}};
z.prototype.setHeader=function(i){this.setProperty("header",i);if(this.getUseToolbar()){this._addHeaderToToolbar(i);}return this;};
z.prototype._addHeaderToToolbar=function(i){if(this._oToolbar){if(i){if(this._oVariantManagement&&(this._oVariantManagement.getVisible()||this._bHostedVariantManagement)&&(this._oToolbar.indexOfContent(this._oVariantManagement)>-1)){if(!this._oSeparator){if(!v&&!this._bToolbarSeparatorRequested){v=sap.ui.require("sap/m/ToolbarSeparator");if(!v){sap.ui.require(["sap/m/ToolbarSeparator"],C.bind(this));this._bToolbarSeparatorRequested=true;}}if(v){this._oSeparator=new v(this.getId()+"-HeadSep");}}this._oToolbar.removeContent(this._oSeparator);this._oToolbar.insertContent(this._oSeparator,0);this._oToolbar.setHeight("3rem");}if(!this._oText){this._oText=new T(this.getId()+"-HeadText");this._oText.addStyleClass("sapMH4Style");this._oText.addStyleClass("sapUiCompSmartChartHeader");}this._oText.setText(i);this._oToolbar.removeContent(this._oText);this._oToolbar.insertContent(this._oText,0);}else{if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);this._oSeparator.destroy();delete this._oSeparator;this._oToolbar.setHeight();}if(this._oText){this._oToolbar.removeContent(this._oText);this._oText.destroy();delete this._oText;}}}};
function C(i){v=i;this._bToolbarSeparatorRequested=false;if(!this._bIsBeingDestroyed){this._addHeaderToToolbar(this.getHeader());}}
z.prototype._isNewFilterBarDesign=function(){if(this.getAdvancedMode()){return false;}if(!this.getUseToolbar()){return true;}return false;};
z.prototype._adaptNewFilterBarDesign=function(){if(this._isNewFilterBarDesign()){this.setFilterBarExpanded(true);if(!this._bDelayRendering){this._oBasicAreaLayout.setVisible(true&&this.getFilterBarExpanded());}if(this._oToolbar){var j=this._oToolbar.getContent();for(var i=0;i<j.length;i++){this._oToolbar.removeContent(j[i]);if(j[i].isA("sap.m.ToolbarSpacer")){j[i].destroy();}}if(!this.getUseToolbar()){this.removeContent(this._oToolbar);this._oToolbar.destroy();this._oToolbar=null;}}if(this._oHintText){this._oBasicAreaLayout.removeContent(this._oHintText);this._oHintText.destroy();this._oHintText=null;}if(this._oHideShowButton){this._oHideShowButton.destroy();this._oHideShowButton=null;}if(!this._bButtonaAdded){this._bButtonaAdded=true;this._addButtonsToBasicArea();}if(this._oBasicSearchField){this.setBasicSearch(this._oBasicSearchField);}this._oBasicAreaLayout.setMinItemWidth(this.getFilterContainerWidth());this._setMaxItemWidth2();}};
z.prototype._addButtonsToBasicArea=function(){var i=new h();if(sap.ui.getCore().getConfiguration().getRTL()){i.addStyleClass("sapUiCompFilterBarFloatLeft");}else{i.addStyleClass("sapUiCompFilterBarFloatRight");}var j=new H();i.addContent(new T());i.addContent(j);j.addContent(this._oSearchButton);j.addContent(this._oClearButtonOnFB);j.addContent(this._oRestoreButtonOnFB);j.addContent(this._oFiltersButton);this._updateToolbarText();this._oBasicAreaLayout.addEndContent(i);this._oButtonsVLayout=i;};
z.prototype._addBasicSearchToBasicArea=function(i){if(this._oBasicSearchFieldContainer){this._cleanBasicSearchContainer();}if(i){var l=new L({text:"\u2008"});l.addStyleClass("sapBasicSearchFilter");var j=this._addControlToBasicAreaContainer(null,i,l);if(j){j.setVisible(true);this._oBasicAreaLayout.insertContent(j,0);this._oBasicSearchFieldContainer=j;this._oBasicSearchFieldContainer.setWidth("100%");}}};
z.prototype._setCollectiveSearch=function(i){if(this.getAdvancedMode()){if(this._oToolbar){if(this._oVariantManagement){this._oToolbar.removeContent(this._oVariantManagement);this._unregisterVariantManagement(this._oVariantManagement);this._oVariantManagement=null;}if(this._oCollectiveSearch){this._oToolbar.removeContent(this._oCollectiveSearch);}this._oCollectiveSearch=i;this._oToolbar.insertContent(this._oCollectiveSearch,0);this._oToolbar.removeStyleClass("sapUiCompFilterBarToolbarBasicSearchNoVariant");}}};
z.prototype.setBasicSearch=function(i){var j=this;this.setAssociation("basicSearch",i,true);if(typeof i==="string"){i=sap.ui.getCore().byId(i);}if(i&&i.getParent()){if(this._isUi2Mode()){i.attachLiveChange(function(l){j.fireFilterChange(l);});}this._oBasicSearchField=i;return;}if(this._oBasicSearchField&&this._oToolbar){this._oToolbar.removeContent(this._oBasicSearchField);}if(i&&this._isNewFilterBarDesign()){this._addBasicSearchToBasicArea(i);}else{if(i&&this._oToolbar&&(!this._isPhone()||this.getAdvancedMode())){var n=this._indexOfSpacerOnToolbar();this._oToolbar.insertContent(i,n);if(this._isUi2Mode()){i.attachLiveChange(function(l){j.fireFilterChange(l);});}}}this._oBasicSearchField=i;return this;};
z.prototype._getBasicSearchValue=function(){if(this._oBasicSearchField&&this._oBasicSearchField.getValue){return this._oBasicSearchField.getValue();}return null;};
z.prototype._indexOfSpacerOnToolbar=function(){var j=this._oToolbar.getContent(),i;if(j){for(i=0;i<j.length;i++){if(j[i]instanceof b){return i;}}}return 0;};
z.prototype.addFilterItem=function(i){var n,j,l,O;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem' may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.name' may not be null nor empty");}j=i.getControl();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterItem()"+" Expected argument 'oFilterItem.control' may not be null nor empty");}this.addAggregation("filterItems",i,true);if(!this._aBasicAreaSelection){this._aBasicAreaSelection=[];}var Q={control:i.getControl(),filterItem:i};this._aBasicAreaSelection.push(Q);O=i.getId()+"__filterGroupItem";l=sap.ui.getCore().byId(O);if(!l){l=new F(i.getId()+"__filterGroupItem",{label:i.getLabel(),controlTooltip:i.getControlTooltip(),name:i.getName(),mandatory:i.getMandatory(),visible:i.getVisible(),visibleInFilterBar:i.getVisibleInFilterBar(),partOfCurrentVariant:true,control:i.getControl(),groupName:z.INTERNAL_GROUP,groupTitle:"",hiddenFilter:i.getHiddenFilter(),entitySetName:i.getEntitySetName(),entityTypeName:i.getEntityTypeName()});}if(i.data('isCustomField')){l.data('isCustomField',true);}i.attachChange(this._filterItemChange);this.addFilterGroupItem(l);return this;};
z.prototype.addFilterGroupItem=function(i){var n,j,O,l;if(!i){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItem()"+" Expected argument 'oFilterGroupItem' may not be null nor empty");}this.addAggregation("filterGroupItems",i,true);j=i.getGroupName();if(!j){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" GroupName may not be null nor empty");}n=i.getName();if(!n){throw new Error("sap.ui.comp.filterbar.FilterBar.prototype.addFilterGroupItems()"+" Name may not be null nor empty");}if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[j]){this._mAdvancedAreaFilter[j]={};this._mAdvancedAreaFilter[j].filterItem=null;this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].items){this._mAdvancedAreaFilter[j].items=[];}if(!this._mAdvancedAreaFilter[j].filterItem){this._mAdvancedAreaFilter[j].filterItem=i;}O={control:i.getControl(),filterItem:i};if(this.getAdvancedMode()||i.getVisibleInFilterBar()){i.setVisibleInFilterBar(true);}else{i.setVisibleInFilterBar(false);}this._mAdvancedAreaFilter[j].items.push(O);if(!i.getHiddenFilter()){l=this._addControlToBasicAreaFormContainer(i);if(l){O.container=l;l.setVisible(i.getVisible()&&i.getVisibleInFilterBar());if(i.getVisibleInFilterBar()){i.setPartOfCurrentVariant(i.getVisibleInFilterBar());}i.attachChange(this._filterGroupItemChange);}if(this.getAdvancedMode()&&!this.getIsRunningInValueHelpDialog()){this._rerenderAA();}else{this._showHintText();}}this._adaptButtonsEnablement();return this;};
z.prototype.removeFilterItem=function(O){var i,j,l,n,Q=this.getFilterItems(),W=this.getFilterGroupItems();if(!Q||!Q.length){return null;}j=this._getRemovedItemAsObject(O,Q);if(!j){return null;}j.detachChange(this._filterItemChange);for(i=0;i<this._aBasicAreaSelection.length;i++){if(this._aBasicAreaSelection[i].filterItem.getId()===j.getId()){this._aBasicAreaSelection.splice(i,1);if(this._aBasicAreaSelection.length===0){this._aBasicAreaSelection=null;}break;}}this.removeAggregation("filterItems",j,true);l=j.getId()+"__filterGroupItem";n=this._getRemovedItemAsObject(l,W);this._removeFilterGroupItem(n);return j;};
z.prototype.removeFilterGroupItem=function(O){var i,j=this.getFilterGroupItems();if(!j||!j.length){return null;}i=this._getRemovedItemAsObject(O,j);if(!i){return null;}return this._removeFilterGroupItem(i);};
z.prototype._getRemovedItemAsObject=function(O,j){var i,l;if(typeof O==="string"){for(i=0;i<j.length;i++){if(j[i].getId()===O){l=j[i];break;}}}if(typeof O==="number"){if(O<0||O>=j.length){k.warning("sap.ui.comp.filterbar.FilterBar.prototype.removeFilterGroupItems() is called with invalid index "+O);}else{l=j[O];}}if(typeof O==="object"){l=O;}return l;};
z.prototype._removeFilterGroupItem=function(j){var i,l,n,O=j.getGroupName();j.detachChange(this._filterGroupItemChange);this.removeAggregation("filterGroupItems",j,true);if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[O]&&this._mAdvancedAreaFilter[O].items){l=this._mAdvancedAreaFilter[O];for(i=0;i<l.items.length;i++){n=l.items[i];if(n.filterItem.getId()===j.getId()){n.container.removeAllContent();n.container.destroy();l.items.splice(i,1);if(l.filterItem.getId()===j.getId()){if(l.items.length){l.filterItem=l.items[0].filterItem;}else{delete this._mAdvancedAreaFilter[O];}}break;}}if(this.getFilterGroupItems().length===0){this._mAdvancedAreaFilter=null;this._adaptButtonsEnablement();}}return j;};
z.prototype._addParameter=function(j){var i,O,l,n=false,Q=false,W=z.INTERNAL_GROUP;j._setParameter(true);j.setVisibleInFilterBar(true);j.setPartOfCurrentVariant(true);this.addAggregation("_parameters",j,true);O={control:j.getControl(),filterItem:j};if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};}if(!this._mAdvancedAreaFilter[W]){this._mAdvancedAreaFilter[W]={};this._mAdvancedAreaFilter[W].filterItem=null;}if(!this._mAdvancedAreaFilter[W].items){this._mAdvancedAreaFilter[W].items=[];}for(i=0;i<this._mAdvancedAreaFilter[W].items.length;i++){var X=this._mAdvancedAreaFilter[W].items[i];if(X.filterItem._isParameter()){continue;}this._mAdvancedAreaFilter[W].items.splice(i,0,O);n=true;break;}if(!n){this._mAdvancedAreaFilter[W].items.push(O);if(Object.keys(this._mAdvancedAreaFilter).length>1){Q=true;}}l=this._addControlToBasicAreaFormContainer(j);if(l){O.container=l;l.setVisible(j.getVisible());j.attachChange(this._filterGroupItemChange.bind(this));}if(n||Q){this._oBasicAreaLayout.removeContent(l);if(j.getVisible()){this._addContainerInOrder(O.filterItem,O.container);}}if(!this.getAdvancedMode()){this._showHintText();}this._adaptButtonsEnablement();return this;};
z.prototype._filterItemChange=function(i,j){var l,n,O,Q;if(j&&j.oSource&&(j.oSource.isA("sap.ui.comp.filterbar.FilterItem"))){O=j.getParameter("propertyName");if(O==="visibleInFilterBar"||O==="visible"||O==="label"||O==="labelTooltip"||O==="controlTooltip"||O==="mandatory"){l=this._determineItemByName(j.oSource.getName(),z.INTERNAL_GROUP);if(l&&l.filterItem){if((O==="visible")){n=j.oSource.getVisible();l.filterItem.setVisible(n);}else if(O==="visibleInFilterBar"){n=j.oSource.getVisibleInFilterBar();var W=this._checkChangePossibleVisibleInFilterBar(l.filterItem,n);if(W){l.filterItem.setVisibleInFilterBar(n);}else{j.oSource.setVisibleInFilterBar(true);}}else if(O==="label"){l.filterItem.setLabel(j.oSource.getLabel());}else if(O==="labelTooltip"){l.filterItem.setLabelTooltip(j.oSource.getLabelTooltip());}else if(O==="controlTooltip"){Q=this.determineControlByFilterItem(l.filterItem,true);if(Q&&Q.setTooltip){Q.setTooltip(l.filterItem.getControlTooltip());}}else if(O==="mandatory"){n=j.oSource.getMandatory();l.filterItem.setMandatory(n);}}}}};
z.prototype._filterGroupItemChange=function(i){var j;var l;if(i&&i.oSource){l=i.getParameter("propertyName");if(l==="visibleInFilterBar"||l==="visible"){j=this._determineItemByName(i.oSource.getName(),i.oSource.getGroupName());if(j){if(l==="visibleInFilterBar"){var n=i.oSource.getVisibleInFilterBar();var O=n;var Q=this._checkChangePossibleVisibleInFilterBar(i.oSource,n);if(!Q){i.oSource.setVisibleInFilterBar(true);O=true;}if(O){i.oSource.setPartOfCurrentVariant(true);}if(!n&&!this._isFilterItemInBasicGroup(j.filterItem)){i.oSource.setPartOfCurrentVariant(false);}if(!this.getAdvancedMode()&&!this._oAdaptFiltersDialog){this._rerenderItem(j);}}else if(l==="visible"){if(!this._oAdaptFiltersDialog){if(this.getAdvancedMode()&&j.container){j.container.setVisible(true);}else{this._updateToolbarText();this._rerenderItem(j);}}}this._showHintText();}}else if(l==="groupTitle"){if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[i.oSource.getGroupName()]){this._adaptGroupTitle(i.oSource.getGroupName());}}else if(l==="label"){if(!this._oAdaptFiltersDialog){this._adaptGroupTitleForFilter(i.oSource);}}else if(l==="mandatory"){this._mandatoryFilterItemChange(i.oSource);}else if((l==="partOfCurrentVariant")&&this.ensureLoadedValueHelpList){var W=this.determineFilterItemByName(i.oSource.getName());if(W&&W.getPartOfCurrentVariant()){this.ensureLoadedValueHelpList(i.oSource.getName());}}if(this.getAdvancedMode()&&!this.getIsRunningInValueHelpDialog()){this._rerenderAA();}}};
z.prototype._addContainer=function(i){if(i&&this._oBasicAreaLayout){if(i.container&&(this._oBasicAreaLayout.indexOfContent(i.container)===-1)){this._addContainerInOrder(i.filterItem,i.container);}}};
z.prototype._removeContainer=function(i){if(i&&this._oBasicAreaLayout){if(i.container&&(this._oBasicAreaLayout.indexOfContent(i.container)>-1)){this._oBasicAreaLayout.removeContent(i.container);}}};
z.prototype._addContainerInOrder=function(j,l){var n,i,O,Q=this._oBasicAreaLayout.getContent(),W=-1;if(this._oBasicSearchField&&this._isNewFilterBarDesign()){W++;}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){var X=this._mAdvancedAreaFilter[n];if(X&&X.items){for(i=0;i<X.items.length;i++){if(!X.items[i].container){continue;}if(X.items[i].container===l){this._oBasicAreaLayout.insertContent(l,W+1);return;}O=Q.indexOf(X.items[i].container);if(O>=0){W=O;}}}}}};
z.prototype._checkChangePossibleVisibleInFilterBar=function(i,j){if(i&&i.getMandatory()&&!j){var l=this._hasFilterValue(i);if(!l){i.setVisibleInFilterBar(true);return false;}}return true;};
z.prototype._hasFilterValue=function(i){var j;if(!this._getTriggerFilterChangeState()&&this.getAllFiltersWithValues){j=this.getAllFiltersWithValues();}else{j=this._getFiltersWithValues();}return this._checkFilterForValue(j,i);};
z.prototype._adaptGroupTitleForFilter=function(i){var l;var j;if(i&&!i.getHiddenFilter()){l=i.getLabel();j=i.getLabelControl(this.getId());if(this.getConsiderGroupTitle()){if(j&&i.getGroupTitle()){j.setText(l+" ("+i.getGroupTitle()+')');}}else{j.setText(l);}}};
z.prototype._adaptGroupTitle=function(j){var i;var l;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){l=this._mAdvancedAreaFilter[j].items[i];if(l&&l){this._adaptGroupTitleForFilter(l.filterItem);}}}};
z.prototype.registerGetFiltersWithValues=function(i){this._fRegisterGetFiltersWithValues=i;return this;};
z.prototype.registerFetchData=function(i){this._fRegisteredFetchData=i;return this;};
z.prototype.registerApplyData=function(i){this._fRegisteredApplyData=i;return this;};
z.prototype._isTINAFScenario=function(){if(this._oVariantManagement){if(!this._isUi2Mode()){return true;}}else{if(this._oCollectiveSearch&&this.getAdvancedMode()){return true;}}return false;};
z.prototype.fireInitialise=function(){if(this._isTINAFScenario()){this._createVisibleFilters();if(this.getAdvancedMode()){this._ensureFilterLoaded(null);}this._fireInitialiseEvent();}else{this._initializeVariantManagement();}if(this.getIsRunningInValueHelpDialog()){this._rerenderFilters();}};
z.prototype.variantsInitialized=function(){this._afterVariantsLoad();this.fireInitialized();this._oInitializedDeferred.resolve();};
z.prototype.fireInitialized=function(){this.fireEvent("initialized");this._oInitializedDeferred.resolve();};
z.prototype.getInitializedPromise=function(){return this._oInitializedDeferred.promise;};
z.prototype._initializeVariantManagement=function(){this._createVisibleFilters();if(this._oVariantManagement&&this.getPersistencyKey()){if(this._isTINAFScenario()){this._oVariantManagement.initialise(this._initialiseVariants,this);}else{this._fInitialiseVariants=this._initialiseVariants.bind(this);this._oVariantManagement.attachInitialise(this._fInitialiseVariants,this);this._oVariantManagement.initialise();}}else{this._fireInitialiseEvent();}};
z.prototype._fireInitialiseEvent=function(){try{this.fireEvent("initialise");this._showHintText();}catch(i){k.error("error during initialise event handling - "+i.message);}this._bIsInitialized=true;this._updateToolbarText();};
z.prototype._initialiseVariants=function(){this._fireInitialiseEvent();if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(false);}};
z.prototype.fireAfterVariantLoad=function(i,j){this._rerenderFilters();var l={context:i,executeOnSelect:j};try{this.fireEvent("afterVariantLoad",l);}catch(n){k.error("error during 'afterVariantLoad' event handling - "+n.message);}};
z.prototype.fireBeforeVariantSave=function(i){var j={context:i};var l=this._getConsiderFilterChanges();if(i){this._setConsiderFilterChanges(false);}this.fireEvent("beforeVariantSave",j);if(i){this._setConsiderFilterChanges(l);}};
z.prototype.destroyFilterGroupItems=function(){var i=this.getFilterGroupItems();this._destroyItems(i);return this;};
z.prototype.destroyFilterItems=function(){var i=this.getFilterItems();this._destroyItems(i);return this;};
z.prototype.removeAllFilterItems=function(){var i,j=this.getFilterItems();if(j&&j.length){for(i=0;i<j.length;i++){this.removeFilterItem(j[i]);}}return j;};
z.prototype.removeAllFilterGroupItems=function(){var i,j=[],l=this.getFilterGroupItems();if(l&&l.length){for(i=0;i<l.length;i++){j.push(l[i]);this.removeFilterGroupItem(l[i]);}}return j;};
z.prototype.removeAllFilters=function(){this.removeAllFilterItems();this.removeAllFilterGroupItems();this.removeBasicSearch();};
z.prototype.removeBasicSearch=function(){this.setBasicSearch(null);};
z.prototype.getAllFilterItems=function(j){var i,n=null;var l=[];var O,Q;if(!j){this._ensureFilterLoaded(null);}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){O=this._mAdvancedAreaFilter[n];if(O.items){for(i=0;i<O.items.length;i++){Q=O.items[i];if(Q&&Q.filterItem&&Q.filterItem.getVisible()){if(j){if(Q.filterItem.getVisibleInFilterBar()||this._checkIfFilterHasValue(Q.filterItem.getName())){l.push(Q.filterItem);}}else{l.push(Q.filterItem);}}}}}}}return l;};
z.prototype._checkIfFilterHasValue=function(i){return false;};
z.prototype._clearErrorState=function(){this._resetFiltersInErrorValueState();};
z.prototype.getAggregation=function(n){if(n=="filterGroupItems"&&!this.__bDeleteMode){this._ensureFilterLoaded(null);}return G.prototype.getAggregation.apply(this,arguments);};
z.prototype._getFilterInformation=function(){return[];};
z.prototype._createVisibleFilters=function(){this._getFilters();};
z.prototype._getFilters=function(){this._aFields=this._getFilterInformation();var i,j;if(this._aFields&&this._aFields.length>0){if(!this._mAdvancedAreaFilter){this._mAdvancedAreaFilter={};if(!this.getAdvancedMode()){this._mAdvancedAreaFilter[z.INTERNAL_GROUP]={};this._mAdvancedAreaFilter[z.INTERNAL_GROUP].filterItem=null;this._mAdvancedAreaFilter[z.INTERNAL_GROUP].items=null;}}for(i=0;i<this._aFields.length;i++){j=this._aFields[i];if(j.groupName!==z.INTERNAL_GROUP){if(!this._mAdvancedAreaFilter[j.groupName]){this._mAdvancedAreaFilter[j.groupName]={};this._mAdvancedAreaFilter[j.groupName].groupTitle=j.groupTitle;this._mAdvancedAreaFilter[j.groupName].filterItem=null;this._mAdvancedAreaFilter[j.groupName].items=[];}}if(j.visibleInAdvancedArea||(j.groupName===z.INTERNAL_GROUP)){this._instanciateFilterItem(j);}}}this._adaptButtonsEnablement();};
z.prototype.isVisibleInFilterBarByName=function(n){var i,j=this._getFilterMetadata(n);if(j&&j.factory){if((j.hasOwnProperty("visibleInAdvancedArea")&&j.visibleInAdvancedArea)||(j.groupName===z.INTERNAL_GROUP)){return true;}}else{i=this.determineFilterItemByName(n);if(i){return i.getVisibleInFilterBar();}}return false;};
z.prototype._getFilterMetadata=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i];}}}return null;};
z.prototype.getNonVisibleCustomFilterNames=function(){if(this._aFields.length>0){return this._getLazyNonVisibleCustomFilterNames();}else{return this._getNonVisibleCustomFilterNames();}};
z.prototype._getLazyNonVisibleCustomFilterNames=function(){var i=this,j=[];this._aFields.forEach(function(l){if(l.factory){if(l.isCustomFilterField&&!l.visibleInAdvancedArea){j.push(l.fieldName);}}else if(i._isNonVisibleCustomFilterNamesByName(l.fieldName,l.groupName)){j.push(l.fieldName);}});return j;};
z.prototype._isNonVisibleCustomFilterNamesByName=function(n,j){var i,l;if(this._mAdvancedAreaFilter&&this._mAdvancedAreaFilter[j]&&this._mAdvancedAreaFilter[j].items){for(i=0;i<this._mAdvancedAreaFilter[j].items.length;i++){l=this._mAdvancedAreaFilter[j].items[i];if(l.filterName&&(l.filterItem.getName()===n)){return this._isNonVisibleCustomFilterNamesByFilter(l.filterItem);}}}return false;};
z.prototype._isNonVisibleCustomFilterNamesByFilter=function(i){if(i.data("isCustomField")&&!i.getVisibleInFilterBar()){return true;}return false;};
z.prototype._getNonVisibleCustomFilterNames=function(){var i=this,j=[],l=this.getAllFilterItems();if(l){l.forEach(function(n){if(i._isNonVisibleCustomFilterNamesByFilter(n)){j.push(n.getName());}});}return j;};
z.prototype._ensureFilterLoaded=function(l){var i,j,n;if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){n=this._aFields[j];if(!n.factory){continue;}if(l){for(i=0;i<l.length;i++){if(n.fieldName===l[i].name){if(n.groupName===l[i].group){this._instanciateFilterItem(n);break;}else if(n.groupEntityType===l[i].group){this._instanciateFilterItem(n);}}}}else{this._instanciateFilterItem(n);}}if(!l){this._aFields=[];}}};
z.prototype._instanciateFilterItem=function(i){var j=i.factory;if(j){delete i.factory;j.call(i);}};
z.prototype._destroyItems=function(j){if(j&&j.length){for(var i=0;i<j.length;i++){j[i].destroy();}}};
z.prototype._reapplyVisibility=function(j,l){var i,n=null;var O;var Q=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var W=this._mAdvancedAreaFilter[n];if(W&&W.items){for(i=0;i<W.items.length;i++){O=W.items[i];if(O&&O.filterItem){this._setPersVisibility(j,O.filterItem,Q,l);}}}}}}return Q;};
z.prototype._setPersVisibility=function(i,j,l,n){var O,Q;if(j&&!j.getHiddenFilter()){O=j.getGroupName();Q=this._checkForFilterInfo(i,j);if(this._isTINAFScenario()){if(Q){j.setVisibleInFilterBar(Q.visibleInFilterBar);if(Q.hasOwnProperty("visible")){j.setVisible(Q.visible);}}else{j.setVisibleInFilterBar(false);if((O===z.INTERNAL_GROUP)||j._isParameter()){}}}else{if(Q&&(Q.visibleInFilterBar!==undefined)){j.setVisibleInFilterBar((Q.visibleInFilterBar));}else{if((O!==z.INTERNAL_GROUP)&&Q&&(Q.group===O)){j.setVisibleInFilterBar((Q!==null));}}}if(j){var W=this.determineControlByFilterItem(j,true);if(!n&&W&&W.getValueState&&(W.getValueState()!==r.None)){W.setValueState(r.None);}if(Q&&Q.hasOwnProperty("partOfCurrentVariant")&&(!Q.partOfCurrentVariant)){l.push(j);}}}};
z.prototype._checkForFilterInfo=function(l,n){var i,j,O=n.getName(),Q=[n.getGroupName(),n.getEntitySetName(),n.getEntityTypeName()];var W=[];if(l&&l.length){for(i=0;i<l.length;i++){if(l[i].name===O){if(Q.indexOf(l[i].group)>-1){W.push(l[i]);}}}}if(W.length===1){return W[0];}else if(W.length>1){for(j=0;j<Q.length;j++){for(i=0;i<W.length;i++){if(W[i].group===Q[j]){return W[i];}}}}return null;};
z.prototype._createVariantManagement=function(){var i=new S(this.getId()+"-variantUi2",{});var j=new e({type:"filterBar",keyName:"persistencyKey"});j.setControl(this);i.addPersonalizableControl(j);i.addStyleClass("sapUiCompFilterBarMarginLeft");return i;};
z.prototype.fireAssignedFiltersChanged=function(){this.fireEvent("assignedFiltersChanged");};
z.prototype.retrieveFiltersWithValuesAsText=function(){var j,l,n=this.retrieveFiltersWithValues(),O,Q=this.getBasicSearchValue();if(Q&&n){n.splice(0,0,this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_SEARCH_TERM"));}if(!n||(n.length===0)){j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_ZERO");}else{if(!this._isPhone()){O=Math.min(5,n.length);l="";for(var i=0;i<O;i++){l+=n[i];if(i<(O-1)){l+=', ';}}j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS",[n.length,l]);if(O<n.length){j+=", ...";}}else{j=this._oRb.getText("FILTER_BAR_ASSIGNED_FILTERS_MOBILE",[n.length]);}}return j;};
z.prototype.retrieveFiltersWithValues=function(){var i,j=[];var l=this._getFiltersWithValues();if(l){for(i=0;i<l.length;i++){if(l[i].getHiddenFilter()){continue;}if(l[i].getVisible()&&l[i].getPartOfCurrentVariant()){j.push(l[i].getLabel());}}}return j;};
z.prototype._getFiltersWithValues=function(){if(this._fRegisterGetFiltersWithValues){try{return this._fRegisterGetFiltersWithValues();}catch(i){k.error("callback for obtaining the filter count throws an exception");}}return null;};
z.prototype._getFiltersWithValuesCount=function(){var n=0;var i=this.retrieveFiltersWithValues();n=i.length;if(this._oBasicSearchField&&this._oBasicSearchField.getValue&&this._oBasicSearchField.getValue()){n++;}return n;};
z.prototype._checkFilterForValue=function(j,l){var i;if(j){for(i=0;i<j.length;i++){if(j[i]===l){return true;}}}return false;};
z.prototype._handleVisibilityOfToolbar=function(){if(this.getAdvancedMode()&&this._oToolbar){var j=false;var l=this._oToolbar.getContent();for(var i=0;i<l.length;i++){if(l[i]instanceof b){continue;}if(l[i].getVisible&&l[i].getVisible()){j=true;break;}}this._oToolbar.setVisible(j);}};
z.prototype._hasMandatoryFields=function(){return this.getFilterGroupItems().some(function(i){return i.getMandatory();});};
z.prototype._toggleHideShow=function(){this.setFilterBarExpanded(!this.getFilterBarExpanded());this._bShowAllFilters=this._hasMandatoryFields()?true:false;if(!this.getAdvancedMode()){this._rerenderFilters();}};
z.prototype._updateToolbarText=function(){var i=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS":"FILTER_BAR_ACTIVE_FILTERS";var Z=this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_ZERO":"FILTER_BAR_ACTIVE_FILTERS_ZERO";var n=this._getFiltersWithValuesCount();var j=n?(this._oRb.getText(i,[n])):(this._oRb.getText(Z));this._oFiltersButton.setText(j);this.fireAssignedFiltersChanged();};
z.prototype.setFilterBarExpanded=function(i){var j;if(this.getAdvancedMode()){this.setProperty("filterBarExpanded",i);if(this._oHideShowButton){if(i){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_HIDE_FILTERS"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_VH_SHOW_FILTERS"));}}this._calcVisibilityGoButton();if(this.getIsRunningInValueHelpDialog()){this._oBasicAreaLayout.setVisible(i);}else{this._oAdvancedPanel.setVisible(i);}}else{if(this._isPhone()&&this.getUseToolbar()){j=false;}else{j=i;}this.setProperty("filterBarExpanded",j);if(this._isNewFilterBarDesign()){return this;}if(this._isPhone()){if(this._oHideShowButton){this._oHideShowButton.setVisible(false);}this._calcVisibilityGoButton();this._oBasicAreaLayout.setVisible(false);}else{if(this._oHideShowButton){if(j){this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_HIDE"));}else{this._oHideShowButton.setText(this._oRb.getText("FILTER_BAR_SHOW"));}this._oHideShowButton.setVisible(true);}this._calcVisibilityGoButton();if(this._oHideShowButton){if(this._oHideShowButton.getEnabled()){this._oBasicAreaLayout.setVisible(j);}else{this._oBasicAreaLayout.setVisible(false);}}}}this._updateToolbarText();return this;};
z.prototype._selectionChangedInFilterDialogByValue=function(i,j){j.setVisibleInFilterBar(i);if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;};
z.prototype._mandatoryFilterChange=function(i){if(!i){return;}var j=i.getParameters();if(!j||!j.oSource){return;}var l=this._determineByControl(j.oSource);if(l){this._mandatoryFilterItemChange(l.filterItem);}};
z.prototype._mandatoryFilterItemChange=function(i){if(i){if(!i.getMandatory()){return;}var j=this._hasFilterValue(i);if(!i.getVisibleInFilterBar()&&!j){i.setVisibleInFilterBar(true);}}};
z.prototype._isPhone=function(){return!!(D.system.phone);};
z.prototype._isTablet=function(){return!!(D.system.tablet&&!D.system.desktop);};
z.prototype.fireSearch=function(i){if(this._bOKFiltersDialogTriggered&&this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.close();}else if(this._oAdaptFiltersDialog){this._bEnterPressedLeadsToSearch=true;}this.fireEvent("search",i);};
z.prototype._variantSave=function(i){this._oVariant={};this.fireBeforeVariantSave();};
z.prototype._afterVariantSave=function(i){this.fireAfterVariantSave();};
z.prototype._filterSetInErrorState=function(i){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialog.isOpen()){if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}this._bDirtyViaDialog=true;}};
z.prototype._cancelFilterDialog=function(i){if(i&&this._oVariantManagement){this._bDirtyViaDialog=this._oVariantManagement._bSaveCanceled;}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===false)){this.fireCancel();return;}if(this._oInitialVariant&&this._oInitialVariant.content&&this._bDirtyViaDialog){var j=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(j);this.applyVariant(this._oInitialVariant.content,"CANCEL");if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement._setSelectionByKey(this._oInitialVariant.key);}this._oVariantManagement.currentVariantSetModified(this._oInitialVariant.modified);}this.fireCancel();}};
z.prototype._resetFiltersInErrorValueState=function(){var n;n=this._retrieveCurrentSelectionSet(true,true);n.forEach(function(O){if(O.control&&O.control.setValueState&&O.control.getValueState){if(O.control.getValueState()===r.Error){if(O.control.setValue){O.control.setValue("");}O.control.setValueState(r.None);}}});};
z.prototype.setContentWidth=function(W){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentWidth(W+"px");}};
z.prototype.setContentHeight=function(i){if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.setContentHeight(i+"px");}};
z.prototype.addAdaptFilterDialogCustomContent=function(i){this._mCustomViewInfo={item:i.item,search:i.search,selectionChange:i.selectionChange,content:i.content};};
z.prototype._createStructureForAdaptFiltersDialog=function(){var j,l,O={filtersOnFilterBar:{},allFilters:[]};var Q,W=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){j=this._mAdvancedAreaFilter[n];if(j.items){for(var i=0;i<j.items.length;i++){l=j.items[i];Q=this._checkFilterForValue(W,l.filterItem);if(l.filterItem.getVisibleInFilterBar()){O.filtersOnFilterBar[l.filterItem.getName()]=l.filterItem;}var X=l.filterItem.getGroupName()?l.filterItem.getGroupName():z.INTERNAL_GROUP;var Y=(X===z.INTERNAL_GROUP)?this._oRb.getText("FILTER_BAR_BASIC_GROUP"):l.filterItem.getGroupTitle();var Z=l.filterItem.getControlTooltip()?l.filterItem.getControlTooltip():"";O.allFilters.push({name:l.filterItem.getName(),label:l.filterItem.getLabel(),group:X,groupLabel:Y,tooltip:Z,visibleInDialog:l.filterItem.getVisible(),filterItem:l.filterItem,isFiltered:Q,required:l.filterItem.getMandatory()});}}}}}return O;};
z.prototype._restoreControls=function(j,l){var O,Q,W;if(this._fRegisteredFilterChangeHandlers){this.detachFilterChange(this._fRegisteredFilterChangeHandlers);this._fRegisteredFilterChangeHandlers=null;}if(this._mAdvancedAreaFilter){for(var n in this._mAdvancedAreaFilter){if(n){O=this._mAdvancedAreaFilter[n];if(O.items){for(var i=0;i<O.items.length;i++){Q=O.items[i];if(Q.filterItem&&!Q.filterItem.getHiddenFilter()&&Q.control&&Q.container){if(Q.contentReplaced){Q.contentReplaced=undefined;W=Q.container.getContent();var X=W[1];Q.container.removeContent(X);if(X&&X.getValueState){if(l&&(X.getValueState()!=Q.control.getValueState())){Q.control.setValueState(X.getValueState());}}X.destroy();Q.container.insertContent(Q.control,1);}Q.filterItem.detachChange(j);}}}}}}this._rerenderFilters();};
z.prototype._expandGroup=function(l){if(this._oAdaptFiltersDialog&&this._oAdaptFiltersDialogModel&&this._oAdaptFiltersPanel&&l&&l.filterItem){var n=l.filterItem.getGroupName()?l.filterItem.getGroupName():z.INTERNAL_GROUP;var O=this._oAdaptFiltersDialogModel.getData().itemsGrouped;for(var i=0;i<O.length;i++){if(O[i].group===n){for(var j=0;j<O[i].items.length;j++){if(O[i].items[j].name===l.filterItem.getName()){this._oAdaptFiltersPanel.setGroupExpanded(O[i].items[j].group,true);return;}}return;}}}};
var E,K;
z.prototype._getEntitiesLazy=function(){if(E&&K){return Promise.resolve();}this.setBusy(true);return sap.ui.getCore().loadLibrary('sap.ui.mdc',{async:true}).then(function(){return new Promise(function(i){sap.ui.require(["sap/ui/mdc/p13n/P13nBuilder","sap/ui/mdc/p13n/panels/AdaptFiltersPanel"],function(j,l){E=j;K=l;i();this.setBusy(false);}.bind(this));}.bind(this));}.bind(this));};
z.prototype._filtersButtonPressed=function(){this._oFiltersButton.focus();this.showAdaptFilterDialog();};
z.prototype._checkAssignedFilters=function(){if(this._oAdaptFiltersDialog){var j=this.getAllFiltersWithValues?this.getAllFiltersWithValues():this._getFiltersWithValues();var l=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<l.length;i++){if(l[i].hasOwnProperty("filterItem")){var n=this._checkFilterForValue(j,l[i].filterItem);if(l[i].isFiltered!==n){l[i].isFiltered=n;}}}}};
z.prototype.showAdaptFilterDialogForKeyUser=function(i,j){this._fGetDataForKeyUser=j;this.showAdaptFilterDialog().then(function(){this._oAdaptFiltersDialog.addStyleClass(i);}.bind(this));};
z.prototype._createKeyUserChange=function(){var O=[];if(this._bOKFiltersDialogTriggered&&this._oVariantManagement&&this._oVariantManagement.isA("sap.ui.comp.smartvariants.SmartVariantManagement")&&this._oVariantManagement.getVisible()&&this._oVariantManagement._getPersoController()){O=[{selectorControl:this._oVariantManagement._getPersoController(),changeSpecificData:{changeType:"variantContent",content:{key:this._oVariantManagement.getSelectionKey(),persistencyKey:this.getPersistencyKey(),content:this.fetchVariant()}}}];}return O;};
z.prototype.showAdaptFilterDialog=function(l){return new Promise(function(n){this._getEntitiesLazy().then(function(){if(!this._oAdaptFiltersDialog){var O=function(e1,f1){for(var i=0;i<e1.length;i++){if(e1[i].group===f1){var Y=e1[i].items;for(var j=0;j<Y.length;j++){if(Y[j].filterItem&&Y[j].filterItem.getVisible()){if(!e1[i].groupVisible){e1[i].groupVisible=true;}return;}}if(e1[i].groupVisible){e1[i].groupVisible=false;}return;}}};var Q=function(j){if(j&&j.oSource&&(j.oSource.isA("sap.ui.comp.filterbar.FilterItem"))){var e1=j.getParameter("propertyName");if(this._oAdaptFiltersDialogModel&&e1){var Y=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<Y.length;i++){if(Y[i].hasOwnProperty("filterItem")&&Y[i].filterItem===j.oSource){if(e1==="visible"){var f1=j.oSource.getVisible();if(Y[i].visibleInDialog!=f1){Y[i].visibleInDialog=f1;O(this._oAdaptFiltersDialogModel.getData().itemsGrouped,Y[i].group);this._oAdaptFiltersDialogModel.checkUpdate();break;}}else if(e1==="visibleInFilterBar"){Y[i].visible=j.oSource.getVisibleInFilterBar();this._oAdaptFiltersDialogModel.checkUpdate();break;}}}}}}.bind(this);this._ensureFilterLoaded(null);var W=this._createStructureForAdaptFiltersDialog();var X=E.prepareAdaptationData(W.allFilters,function(j,e1){o(j,e1);var f1=true;if(!e1.filterItem||e1.filterItem.getHiddenFilter()){f1=false;}j.visible=!!W.filtersOnFilterBar[e1.name];return f1;},true);E.sortP13nData({visible:"visible",position:"position"},X.items);this._oAdaptFiltersDialogModel=new J();this._oAdaptFiltersDialogModel.setSizeLimit(1000);this._oAdaptFiltersDialogModel.setData(X);var Y=this._oAdaptFiltersDialogModel.getData().items;for(var i=0;i<Y.length;i++){if(Y[i].hasOwnProperty("filterItem")){Y[i].filterItem.attachChange(Q);}}this._fRegisteredFilterChangeHandlers=function(j){this._mandatoryFilterChange(j);}.bind(this);this.attachFilterChange(this._fRegisteredFilterChangeHandlers);var Z=function(j,e1){if(j&&j.filterItem&&j.filterItem.getVisibleInFilterBar()!==e1){this._selectionChangedInFilterDialogByValue(e1,j.filterItem);}}.bind(this);var $=function(j){var i,Y,e1,f1=j.getParameter("item"),g1=j.getParameter("reason"),h1=g1==="Add"||g1==="SelectAll";if((g1==="SelectAll"||g1==="DeselectAll")){Y=this._oAdaptFiltersDialogModel.getProperty("/items");for(i=0;i<Y.length;i++){f1=Y[i];if(!h1&&this._shouldBeVisible(f1)){e1="/items/"+i;this._oAdaptFiltersDialogModel.setProperty(e1+"/visible",true);}else{Z(f1,h1);}}}else if(f1){if(!h1&&this._shouldBeVisible(f1)){f1.visible=true;}else{Z(f1,h1);}}}.bind(this);var a1=new K({enableReorder:false});a1.getView(a1.GROUP_KEY).getContent().attachChange($);a1.getView(a1.LIST_KEY).getContent().attachChange($);this._oAdaptFiltersPanel=a1;a1.setItemFactory(function(j){var e1,f1,g1;g1=j.getObject();if(!g1){return undefined;}f1=this._determineItemByName(g1.name,g1.group);if(!f1||!f1.filterItem||!f1.control){return undefined;}e1=f1.control;if(!f1.contentReplaced&&f1.container&&f1.container.getContent()[1]===e1){f1.contentReplaced=true;f1.container.removeContent(f1.control);f1.container.insertContent(f1.control.clone(),1);}return e1;}.bind(this));this.fireFiltersDialogBeforeOpen({newDialog:true});a1.setP13nModel(this._oAdaptFiltersDialogModel);if(this._mCustomViewInfo&&this._mCustomViewInfo.item&&this._mCustomViewInfo.item.getKey()){a1.addCustomView(this._mCustomViewInfo);a1.switchView(l?l:a1.getDefaultView());}var b1=function(j){this._dialogCancel(this._oAdaptFiltersDialog);}.bind(this);var c1=function(j){this._bOKFiltersDialogTriggered=true;this._oAdaptFiltersDialog.close();}.bind(this);var d1;if(this.getShowRestoreButton()&&!this._fGetDataForKeyUser){d1={onExecute:this._dialogRestore.bind(this),idButton:this.getId()+"-resetBtn"};}E.createP13nDialog(a1,{id:this.getId()+"-adapt-filters-dialog",title:this._oRb.getText(this._isNewFilterBarDesign()?"FILTER_BAR_ADAPT_FILTERS_DIALOG":"FILTER_BAR_ADV_FILTERS_DIALOG"),reset:d1,verticalScrolling:false,cancel:b1,confirm:{text:this._oRb.getText("FILTER_BAR_OK"),handler:c1}}).then(function(j){this._oAdaptFiltersDialog=j;this._oVariant.content=this.fetchVariant();if(this._oVariantManagement){this._oVariant.key=this._oVariantManagement.getSelectionKey();this._oVariant.modified=this._oVariantManagement.currentVariantGetModified();}this._oInitialVariant={};o(this._oInitialVariant,this._oVariant);this._bOKFiltersDialogTriggered=false;this._oAdaptFiltersDialog.attachBeforeOpen(function(){this._bDirtyViaDialog=false;this._bEnterPressedLeadsToSearch=false;}.bind(this));this._oAdaptFiltersDialog.attachBeforeClose(function(){this._restoreControls(Q,!this._bOKFiltersDialogTriggered);if(!this._bOKFiltersDialogTriggered){this._cancelFilterDialog(false);}if(this._fGetDataForKeyUser){this._fGetDataForKeyUser(this._createKeyUserChange());}}.bind(this));this._oAdaptFiltersDialog.attachAfterClose(function(){this._oBasicAreaLayout.rerender();this._oAdaptFiltersDialogModel=null;this._oAdaptFiltersPanel=null;this._oVariant={};this._oInitialVariant=null;this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;this._fGetDataForKeyUser=null;if((this._bOKFiltersDialogTriggered&&this._bDirtyViaDialog||this._bResetFiltersDialogTriggered)&&!this._bEnterPressedLeadsToSearch){if(!this.isLiveMode||!this.isLiveMode()){this.fireFilterChange();}}this._bEnterPressedLeadsToSearch=false;this._bResetFiltersDialogTriggered=false;this.fireFiltersDialogClosed({context:this._bOKFiltersDialogTriggered?"SEARCH":"CANCEL"});if(this._oHintText&&!this._oHintText.getVisible()){this.setFilterBarExpanded(true);}}.bind(this));this._oAdaptFiltersDialog.setParent(this);if(this.$().closest(".sapUiSizeCompact").length>0){this._oAdaptFiltersDialog.addStyleClass("sapUiSizeCompact");}this._oAdaptFiltersDialog.isPopupAdaptationAllowed=function(){return false;};this._oAdaptFiltersDialog.open();n();}.bind(this));return;}n();}.bind(this));}.bind(this));};
z.prototype.isDialogOpen=function(){return this._oAdaptFiltersDialog?true:false;};
z.prototype._dialogCancel=function(i){if(i){this._bOKFiltersDialogTriggered=false;this.fireFiltersDialogCancel();i.close();}};
z.prototype._dialogRestore=function(){this.reset();if(this._oVariantManagement&&this._oVariantManagement.getVisible()&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(false);}this._bDirtyViaDialog=false;this._bResetFiltersDialogTriggered=true;};
z.prototype._createButtons=function(i){var j=this;this._oSearchButton=new B(this.getId()+"-btnGo",{visible:this.getShowGoOnFB(),text:this._oRb.getText("FILTER_BAR_GO"),type:t.Emphasized}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");p.addConfig(this._oSearchButton,{event:"search"},this);this._oSearchButton.attachPress(function(){j._oSearchButton.focus();j.search();});i.addContent(this._oSearchButton);this._oHideShowButton=new B(this.getId()+"-btnShowHide",{text:this._oRb.getText("FILTER_BAR_HIDE"),type:t.Transparent,enabled:false});this._oHideShowButton.attachPress(function(){j._toggleHideShow();});i.addContent(this._oHideShowButton);this._oClearButtonOnFB=new B(this.getId()+"-btnClear",{visible:this.getShowClearOnFB(),text:this._oRb.getText("FILTER_BAR_CLEAR"),tooltip:this._oRb.getText("FILTER_BAR_CLEAR"),type:t.Transparent,enabled:false}).addStyleClass("sapUiCompFilterBarPaddingRightBtn");this._oClearButtonOnFB.attachPress(function(){j.clear();if(j.isLiveMode&&j.isLiveMode()){j.search();}});i.addContent(this._oClearButtonOnFB);this._oRestoreButtonOnFB=new B(this.getId()+"-btnRestore",{visible:this.getShowRestoreOnFB(),text:this._oRb.getText("FILTER_BAR_RESTORE"),tooltip:this._oRb.getText("FILTER_BAR_RESTORE"),type:t.Transparent,enabled:false});this._oRestoreButtonOnFB.attachPress(function(){j.reset();if(j._oVariantManagement){j._oVariantManagement.currentVariantSetModified(false);}});i.addContent(this._oRestoreButtonOnFB);this._oFiltersButton=new B(this.getId()+"-btnFilters",{visible:this.getShowFilterConfiguration(),text:this._oRb.getText("FILTER_BAR_ACTIVE_FILTERS_ZERO"),type:t.Transparent,enabled:false});this._oFiltersButton.attachPress(function(){this._filtersButtonPressed();}.bind(this));i.addContent(this._oFiltersButton);};
z.prototype._toggleAllFilters=function(){this._bShowAllFilters=!this._bShowAllFilters;this._oShowAllFiltersButton.setVisible(!this._bShowAllFilters);this._rerenderFilters();};
z.prototype.initShowAllFiltersButton=function(){this._oShowAllFiltersButton=new B(this.getId()+"-btnShowAll",{text:this._oRb.getText("FILTER_BAR_VH_SHOW_ALL"),type:t.Transparent,press:this._toggleAllFilters.bind(this)});this._oBasicAreaLayout.addEndContent(this._oShowAllFiltersButton);};
z.prototype._createVariantLayout=function(){this._oVariantManagement=this._createVariantManagement();if(this._possibleToChangeVariantManagement()){this._oVariantManagement.setVisible(false);}this._registerVariantManagement();return this._oVariantManagement;};
z.prototype._createToolbar=function(i){var j=new a(this.getId()+"-toolbar");if(!i){var l=this._createVariantLayout();j.addContent(l);}j.addContent(new b());this._createButtons(j);j.addStyleClass("sapUiCompFilterBarToolbar");j.setLayoutData(new g({span:"L12 M12 S12"}));return j;};
z.prototype._replaceVariantManagement=function(i){if(this._oVariantManagement){this._unregisterVariantManagement();if(this._oToolbar&&this._oToolbar.getContent(this._oVariantManagement)){this._oToolbar.removeContent(this._oVariantManagement);}this._oVariantManagement.destroy();}this._oVariantManagement=i;this._registerVariantManagement();this._adaptNewFilterBarDesign();};
z.prototype._createAdvancedAreaForm=function(){if((!w||!x||!y||!R)&&!this._bAdvancedRequested){w=sap.ui.require("sap/ui/layout/form/Form");x=sap.ui.require("sap/ui/layout/form/FormContainer");y=sap.ui.require("sap/ui/layout/form/FormElement");R=sap.ui.require("sap/ui/layout/form/ResponsiveGridLayout");if(!w||!x||!y||!R){sap.ui.require(["sap/ui/layout/form/Form","sap/ui/layout/form/FormContainer","sap/ui/layout/form/FormElement","sap/ui/layout/form/ResponsiveGridLayout"],M.bind(this));this._bAdvancedRequested=true;}}if(!w||!x||!y||!R){return;}var i=new R(this.getId()+"-AdvancedFormLayout");i.addStyleClass("sapUiCompFilterBarPaddingForm");i.setColumnsL(3);i.setColumnsM(2);var j=new w(this.getId()+"-AdvancedForm",{editable:true});j.setLayout(i);if(!this.oInvisibleFormTitle){this.oInvisibleFormTitle=new I({text:this._oRb.getText("ADVANCED_SEARCH_TEXT")});this.addContent(this.oInvisibleFormTitle);}j.addAriaLabelledBy(this.oInvisibleFormTitle);this._oAdvancedPanel.addContent(j);return j;};
function M(i,j,l,n){w=i;x=j;y=l;R=n;this._bAdvancedRequested=false;if(!this._bIsBeingDestroyed){if(!this.getIsRunningInValueHelpDialog()){this._oAdvancedAreaForm=this._createAdvancedAreaForm();this._rerenderAA();}}}
z.prototype._addControlToBasicAreaFormContainer=function(i){var j=i.getControl();if(!j){k.error("no Control obtained");return null;}var l=i.getLabelControl(this.getId());if(!l){k.error("no Label obtained");return null;}this._adaptGroupTitleForFilter(i);return this._addControlToBasicAreaContainer(i,j,l);};
z.prototype._addControlToBasicAreaContainer=function(i,j,l){var n=new h();if(j.setWidth){j.setWidth("100%");}n.setWidth("100%");if(l){if(!l.hasStyleClass("sapUiCompFilterLabel")){l.addStyleClass("sapUiCompFilterLabel");}n.addContent(l);if(l.setLabelFor){if(i&&j){l.setLabelFor(j);if(j.setTooltip&&i.getControlTooltip()){j.setTooltip(i.getControlTooltip());}}}}n.addContent(j);if((!this.getAdvancedMode()||this.getIsRunningInValueHelpDialog())&&!this._oAdaptFiltersDialog){if(i&&i.getVisible()&&i.getVisibleInFilterBar()){var O=this._oBasicAreaLayout.getContent();if(this._isNewFilterBarDesign()&&!this._isPhone()){this._oBasicAreaLayout.insertContent(n,O.length);}else{this._oBasicAreaLayout.addContent(n);}}}return n;};
z.prototype._rerenderAA=function(){if(this._oAdvancedAreaForm){this._oAdvancedAreaForm.removeAllFormContainers();var i=this._flattenMap();this._layOutAA(i);}};
z.prototype._groupsWithVisibleFilters=function(){var n,j,l=this._mAdvancedAreaFilter;if(this._mAdvancedAreaFilter&&Object.keys(this._mAdvancedAreaFilter).length>1){l={};for(var O in this._mAdvancedAreaFilter){if(O&&this._mAdvancedAreaFilter[O]&&this._mAdvancedAreaFilter[O].items){n=this._mAdvancedAreaFilter[O].items.length;for(var i=0;i<this._mAdvancedAreaFilter[O].items.length;i++){j=this._mAdvancedAreaFilter[O].items[i].filterItem;if(j&&(j.getHiddenFilter()||!j.getVisible())){n--;}}if(n){l[O]={};}}}}return l;};
z.prototype._layOutAA=function(i){var j=this._groupsWithVisibleFilters();if(j&&Object.keys(j).length>1){this._layOutAAMultipleGroup(i);}else{this._layOutAASingleGroup(i);}};
z.prototype._layOutAAMultipleGroup=function(l){var i,j,n=0,O=null,W=false;for(i=0;i<l.length;i++){if(l[i].control===null){n++;}}if(this._mAdvancedAreaFilter&&(Object.keys(this._mAdvancedAreaFilter).length===2)&&this._mAdvancedAreaFilter[z.INTERNAL_GROUP]&&this._mAdvancedAreaFilter[z.INTERNAL_GROUP].items&&(this._mAdvancedAreaFilter[z.INTERNAL_GROUP].items.length>0)){W=true;}var Q=this._oAdvancedAreaForm.getLayout();if(Q){if(n>=3){Q.setLabelSpanL(5);Q.setLabelSpanM(5);Q.setColumnsL(3);Q.setColumnsM(2);}else if(n===2){Q.setLabelSpanL(4);Q.setLabelSpanM(5);Q.setColumnsL(2);Q.setColumnsM(2);}else if(n===1){Q.setLabelSpanL(4);Q.setLabelSpanM(5);Q.setColumnsL(2);Q.setColumnsM(2);}}for(i=0;i<l.length;i++){if(l[i].control===null){O=new x();if((Object.keys(this._mAdvancedAreaFilter).length>1)&&!W){if((n>=3)&&(l[i].filterItem.getGroupName()===z.INTERNAL_GROUP)){O.setTitle(this._oRb.getText("FILTER_BAR_BASIC_GROUP"));}else{O.setTitle(l[i].filterItem.getGroupTitle());}}this._oAdvancedAreaForm.addFormContainer(O);j=i+1;while(j<l.length&&(l[j].control)){this._addControlToAdvancedArea(l[j].filterItem,l[j].control,O);j++;}i=j-1;}}if(n===1){this._oAdvancedAreaForm.addFormContainer(new x());}};
z.prototype._layOutAASingleGroup=function(j){var i,l,n,O;var Q=j.length-1;var W=Q>2?2:1;if(W>1){n=Math.floor(Q/W);O=((n*W)<Q);for(i=1;i<W;i++){l=i*n;if(O){++l;}if((l+i)<j.length){j.splice(l+i,0,j[0]);}}}this._layOutAAMultipleGroup(j);};
z.prototype._flattenMap=function(){var n=null,i,j=[],l;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n].items){l=false;for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){var O=this._mAdvancedAreaFilter[n].items[i];if(O.filterItem&&O.filterItem.getVisibleInFilterBar()&&O.filterItem.getVisible()&&!O.filterItem.getHiddenFilter()){if(!l){l=true;j.push({control:null,filterItem:this._mAdvancedAreaFilter[n].filterItem});}j.push({control:O.control,filterItem:O.filterItem});}}}}}return j;};
z.prototype._rerenderItem=function(i,j){var l;if(i){l=i.filterItem.getVisible()&&i.filterItem.getVisibleInFilterBar()&&!i.filterItem.getHiddenFilter();if(j!==undefined){l=l&&!j;}if(i.container){i.container.setVisible(l);if(l){this._addContainer(i);}else{this._removeContainer(i);}}}};
z.prototype._rerenderFilters=function(){var i;var n=null;var j=null;var l=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];var O=j.filterItem.getVisible()&&j.filterItem.getVisibleInFilterBar()&&!j.filterItem.getHiddenFilter();if(O){l.push({visible:O,item:j});}else{this._removeContainer(j);}}}}}var Q=this.getIsRunningInValueHelpDialog()&&!this._bShowAllFilters;var W=l.length;var X=l.length>this._nMaxFiltersByDefault?this._nMaxFiltersByDefault-1:this._nMaxFiltersByDefault;for(var Y=0;Y<l.length;Y++){var Z=Q&&Y>=X;this._rerenderItem(l[Y].item,Z);}if(this._oShowAllFiltersButton){if(Q&&W>this._nMaxFiltersByDefault){this._oShowAllFiltersButton.setVisible(true);}else{this._oShowAllFiltersButton.setVisible(false);}}this._updateToolbarText();};
z.prototype.rerenderFilters=function(){this._rerenderFilters();};
z.prototype._setTriggerFilterChangeState=function(i){this._triggerFilterChangeState=i;};
z.prototype._getTriggerFilterChangeState=function(){return this._triggerFilterChangeState;};
z.prototype._setConsiderFilterChanges=function(i){this._filterChangeSemaphore=i;};
z.prototype._getConsiderFilterChanges=function(){return this._filterChangeSemaphore;};
z.prototype.fireFilterChange=function(i){this._updateToolbarText();if(!this._getTriggerFilterChangeState()){return;}if(this._getConsiderFilterChanges()&&this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){this._oVariantManagement.currentVariantSetModified(true);}if(this._oAdaptFiltersDialog&&!(this._oAdaptFiltersDialog.isOpen())){return;}if(this._oAdaptFiltersDialog){this._bDirtyViaDialog=true;this._checkAssignedFilters();}this.fireEvent("filterChange",i);};
z.prototype._notifyAboutChangedFilters=function(i,j){var O,l=this._determineByControl(j);if(i){O={"added":j,"filterItem":l};}else{O={"deleted":j,"filterItem":l};}this.fireFilterChange(O);};
z.prototype._determineVariantFiltersInfo=function(j,l){var i;var n=null,O,Q;var W=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){O=this._mAdvancedAreaFilter[n].items[i];if(j||O.filterItem.getVisible()){Q={group:O.filterItem.getGroupName(),name:O.filterItem.getName(),partOfCurrentVariant:O.filterItem.getPartOfCurrentVariant(),visibleInFilterBar:O.filterItem.getVisibleInFilterBar(),visible:O.filterItem.getVisible()};if(l||this._considerFilter(Q)){W.push(Q);}}}}}}}return W;};
z.prototype.mergeVariant=function(i,j){var l={};o(l,j);l.filterbar=[];l.filterBarVariant={};o(l.filterbar,i.filterbar);o(l.filterBarVariant,i.filterBarVariant);if(j&&(j.hasOwnProperty("version"))){l.filterbar=this._mergeVariantFields(l.filterbar,j.filterbar);l.filterBarVariant=j.filterBarVariant;}return l;};
z.prototype._mergeVariantFields=function(j,l){var i;l.forEach(function(n){for(i=0;i<j.length;i++){if((j[i].group===n.group)&&(j[i].name===n.name)){j.splice(i,1);break;}}});return j.concat(l);};
z.prototype._isUi2Mode=function(){if(this._oVariantManagement instanceof S){return true;}return false;};
z.prototype._isDeltaHandling=function(){if(this._isUi2Mode()){return false;}return this.getDeltaVariantMode();};
z.prototype._getStandardVariant=function(){return this._oVariantManagement.getStandardVariant(this);};
z.prototype._considerFilter=function(j){if(!this._isDeltaHandling()){return true;}var l=null;var n=this._getStandardVariant();if(n&&n.filterbar){for(var i=0;i<n.filterbar.length;i++){if((n.filterbar[i].group===j.group)&&(n.filterbar[i].name===j.name)){l=n.filterbar[i];break;}}}if(!l){if(!j.partOfCurrentVariant){return false;}return true;}if((l.partOfCurrentVariant!==j.partOfCurrentVariant)||(l.visibleInFilterBar!==j.visibleInFilterBar)||(l.visible!==j.visible)){return true;}return false;};
z.prototype._addControlToAdvancedArea=function(i,j,l){var n=new y({label:i.getLabelControl(this.getId()),fields:[(j!==null)?j:new T()]});l.addFormElement(n);};
z.prototype._determineVisibility=function(i){var j=false;if(i){j=i.getVisible()&&(i.getVisibleInFilterBar()||this._checkIfFilterHasValue(i.getName()));j=j&&!i.getHiddenFilter();}return j;};
z.prototype._retrieveVisibleAdvancedItems=function(){var i,n=null,j;var l=[];if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){if(this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j){if(this._determineVisibility(j.filterItem)){l.push(j);}}}}}}}return l;};
z.prototype._retrieveCurrentSelectionSet=function(W,j){var i,l,O,n=[];var Q=this._retrieveVisibleAdvancedItems();for(i=0;i<Q.length;i++){l=Q[i];if(l.control&&l.filterItem&&(j||!l.filterItem._isParameter())){if(W){O={name:Q[i].filterItem.getName(),control:Q[i].control};}else{O=Q[i].control;}n.push(O);}}return n;};
z.prototype.search=function(){this.fireSearch({selectionSet:this._retrieveCurrentSelectionSet(false)});return true;};
z.prototype.clear=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(i.selectionSet);this._clearErrorState();this.fireClear(i);this._updateToolbarText();};
z.prototype._deleteValidatingTokenFlag=function(i){i.forEach(function(j){if(j.hasOwnProperty("__bValidatingToken")){delete j.__bValidatingToken;}});};
z.prototype.reset=function(){var i={};i.selectionSet=this._retrieveCurrentSelectionSet(false);this.fireReset(i);this._resetVariant();};
z.prototype._resetVariant=function(){var i=null,j=null;this._resetFiltersInErrorValueState();var l=this._retrieveCurrentSelectionSet(false);this._deleteValidatingTokenFlag(l);if(this._oVariantManagement){var n=this._oVariantManagement.getSelectionKey();if(n){i=this._oVariantManagement.getVariantContent(this,n);if(this._oVariant){this._oVariant.content=i;this._oVariant.modified=false;if(this.getPersistencyKey()&&this._oInitialVariant){this._oInitialVariant.content=i;this._oInitialVariant.modified=false;this._oInitialVariant.key=n;}}if(!this.getPersistencyKey()&&(this.getUseSnapshot()===undefined)&&this._oInitialVariant&&this._oInitialVariant.content){j=this._oInitialVariant.content;}if(i||j){this.applyVariant(i||j,"RESET");}}}};
z.prototype._removeValuesForNonPartOfCurrentVariants=function(i){};
z.prototype._removeEmptyFilters=function(i){return i;};
z.prototype._applyVariant=function(i,j,l,n){var O,Q=null,W,X=false;if(i){if(l){W=this._getTriggerFilterChangeState();this._setTriggerFilterChangeState(false);}this._setConsiderFilterChanges(false);O=i.filterBarVariant;Q=i.filterbar;if(Array.isArray(Q)&&Q.length){this._ensureFilterLoaded(Q.filter(function(Z){return Z.visibleInFilterBar;}));}this._applyVariantFields(O,n);var Y=this._reapplyVisibility(Q,(j==="CANCEL"));this._removeValuesForNonPartOfCurrentVariants(Y);if(this._oBasicSearchField&&this._oBasicSearchField.setValue){this._oBasicSearchField.setValue(""||i.basicSearch);}if(i.executeOnSelection){X=i.executeOnSelection;}this.fireAfterVariantLoad(j,X);this._setConsiderFilterChanges(true);this._updateToolbarText();if(X||(this.getLiveMode&&this.getLiveMode())){this.search();}else if(j!=="CANCEL"){this._clearErrorState();}if(l){this._setTriggerFilterChangeState(W);}}};
z.prototype._fetchVariantFiltersData=function(i){if(this._fRegisteredFetchData){try{return this._fRegisteredFetchData(i);}catch(j){k.error("callback for fetching data throws an exception");}}else{k.warning("no callback for fetch data supplied");}return null;};
z.prototype._applyVariantFields=function(j,i){if(this._fRegisteredApplyData){try{return this._fRegisteredApplyData(j,i);}catch(l){k.error("callback for applying data throws an exception");}}else{k.warning("no callback for apply data supplied");}};
z.prototype._isStandardVariant=function(){var i=this.getCurrentVariantId();if(!i){return true;}if(this._oVariantManagement){if((i===this._oVariantManagement.getStandardVariantKey())){return true;}if(this._oVariantManagement._oStandardVariant===null){return true;}}return false;};
z.prototype.isCurrentVariantExecuteOnSelectEnabled=function(){if(this._oVariantManagement&&!this._oVariantManagement.getInErrorState()){var i=this.getCurrentVariantId();if(!i){return this._oVariantManagement.getExecuteOnSelectForStandardVariant();}var j=this._oVariantManagement.getItemByKey(i);if(j){return j.getExecuteOnSelection();}}return false;};
z.prototype.fetchVariant=function(){var i,j={},l,n;if(this._isDeltaHandling()){if(!this._isStandardVariant()){j.version="V3";}}this.fireBeforeVariantFetch();i=this._determineVariantFiltersInfo(true,!j.version);j.filterbar=(!i)?[]:i;n=this._fetchVariantFiltersData(j.version);j.filterBarVariant=this._removeEmptyFilters(n);l=this._getBasicSearchValue();if(l){j.basicSearch=l;}if(this._oVariant&&this._oVariant.content){this._oVariant.content=j;}return j;};
z.prototype.applyVariant=function(i,j,l){if(i.hasOwnProperty("version")){i=this.mergeVariant(this._getStandardVariant(),i,j);}this._applyVariant(i,j,l,i.version);};
z.prototype._afterVariantsLoad=function(){if(this._bDelayRendering){this._oBasicAreaLayout.setVisible(this.getFilterBarExpanded());}this._bDelayRendering=false;};
z.prototype.determineMandatoryFilterItems=function(){var i;var j=[];var l=this._retrieveVisibleAdvancedItems();for(i=0;i<l.length;i++){if(l[i].filterItem.getMandatory()===true){if(l[i].control){j.push(l[i].filterItem);}}}return j;};
z.prototype.determineControlByFilterItem=function(j,l){var i,n=null;var O,Q;if(!j||(!l&&j._isParameter())){return null;}if(this._aBasicAreaSelection){for(i=0;i<this._aBasicAreaSelection.length;i++){O=this._aBasicAreaSelection[i];if(j===O.filterItem){return O.control;}}}if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){Q=this._mAdvancedAreaFilter[n];if(Q&&Q.items){for(i=0;i<Q.items.length;i++){O=Q.items[i];if((l||!O.filterItem._isParameter())&&(j===O.filterItem)){return O.control;}}}}}}return null;};
z.prototype.determineControlByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem&&!j.filterItem._isParameter()){return j.control;}return null;};
z.prototype.determineLabelByName=function(n,i){var j=this._determineEnsuredItemByName(n,i);if(j&&j.filterItem){return j.filterItem._oLabel;}return null;};
z.prototype._determineEnsuredItemByName=function(n,i){if(!i){i=this._determineGroupNameByName(n);}this._ensureFilterLoaded([{name:n,group:i}]);return this._determineItemByName(n,i);};
z.prototype._determineGroupNameByName=function(n){if(this._aFields){for(var i=0;i<this._aFields.length;i++){if(this._aFields[i].fieldName===n){return this._aFields[i].groupName;}}}var j=this._determineFilterItemByName(n);if(j){var l=j.getGroupName();if(l!==z.INTERNAL_GROUP){return l;}}return null;};
z.prototype._determineItemByName=function(n,j){var i;var l,O;var Q=j;if(!n){return null;}if(!Q){Q=z.INTERNAL_GROUP;}if(this._mAdvancedAreaFilter){O=this._mAdvancedAreaFilter[Q];if(O&&O.items){for(i=0;i<O.items.length;i++){l=O.items[i];if(l&&l.filterItem&&(l.filterItem.getName()===n)){return l;}}}}return null;};
z.prototype.determineFilterItemByName=function(n){var i=this._determineEnsuredItemByName(n);if(i&&i.filterItem){return i.filterItem;}return null;};
z.prototype._determineFilterItemByName=function(i){var n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){j=this._determineItemByName(i,n);if(j){return j.filterItem;}}}return null;};
z.prototype._determineByControl=function(j){var n=null,i;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n){var l=this._mAdvancedAreaFilter[n];if(l&&l.items){for(i=0;i<l.items.length;i++){if(l.items[i]&&l.items[i].control===j){return l.items[i];}}}}}}return null;};
z.prototype.onAfterRendering=function(j){if(!(this._isPhone()||this._isTablet())){if(this._oHintText&&this._oHintText.getVisible()){this.setFilterBarExpanded(false);}}if(this.getIsRunningInValueHelpDialog()){if(!this._isPhone()){var l=this.iAddedContentLength,n=this._oBasicAreaLayout.getContent(),O;if(l>0&&l<4){for(var i=3;i>=4-l;i--){O=n[i].$().parent()[0];if(O){O.style.height="0px";O.style.margin="0px";}}}}}};
z.prototype._destroyLazyFilterControl=function(){var j,i;if(this._aFields&&(this._aFields.length>0)){if(this._aFields&&this._aFields.length>0){for(j=0;j<this._aFields.length;j++){i=this._aFields[j];if(i.factory){if(i.control){i.control.destroy();}}}}}};
z.prototype._destroyNonVisibleFilterControl=function(){var i,n,j;if(this._mAdvancedAreaFilter){for(n in this._mAdvancedAreaFilter){if(n&&this._mAdvancedAreaFilter[n]&&this._mAdvancedAreaFilter[n].items){for(i=0;i<this._mAdvancedAreaFilter[n].items.length;i++){j=this._mAdvancedAreaFilter[n].items[i];if(j&&j.container){if(this._oBasicAreaLayout&&(this._oBasicAreaLayout.indexOfContent(j.container)<0)){if(j.control&&!j.bDestroyed){j.control.destroy();j.bDestroyed=true;}}}}}}}};
z.prototype._destroyFilterControls=function(){if(!this.getAdvancedMode()){this._destroyLazyFilterControl();this._destroyNonVisibleFilterControl();}};
z.prototype._registerVariantManagement=function(){if(this._oVariantManagement){this._oVariantManagement.attachSave(this._variantSave,this);this._oVariantManagement.attachAfterSave(this._afterVariantSave,this);}};
z.prototype._unregisterVariantManagement=function(){if(this._oVariantManagement){if(this._fInitialiseVariants){this._oVariantManagement.detachInitialise(this._fInitialiseVariants);this._fInitialiseVariants=null;}this._oVariantManagement.detachSave(this._variantSave,this);this._oVariantManagement.detachAfterSave(this._afterVariantSave,this);if((!this.getUseToolbar()||this.getAdvancedMode())&&!this._oVariantManagement.getDomRef()){this._oVariantManagement.destroy();}}};
z.prototype.showFilterDialog=function(){if(!this._oAdaptFiltersDialog){this.showAdaptFilterDialog();}};
z.prototype.addFilterDialogContent=function(i){if(this._oAdaptFiltersDialog){return i;}return null;};
z.prototype.getFilterDialogContent=function(){if(this._oAdaptFiltersDialog){return new sap.ui.layout.form.Form();}return null;};
z.prototype.setShowOldFilterDialog=function(){};
z.prototype._getFilterControlById=function(j){for(var l in this._mAdvancedAreaFilter){var n=this._mAdvancedAreaFilter[l];for(var i=0;i<n.items.length;i++){var O=n.items[i];if(O.control&&O.control.getId()===j){return O.control;}}}return null;};
z.prototype._getFilterControlByIndex=function(n){var j=0;for(var l in this._mAdvancedAreaFilter){var O=this._mAdvancedAreaFilter[l];for(var i=0;i<O.items.length;i++){var Q=O.items[i];if(Q.filterItem.getVisibleInFilterBar()){if(j===n){return Q.control;}j++;}}}};
function N(i,j){var n=i.filter(function(l){return l.getText()===j;});return n.length>0;}
z.prototype._getFilterControlByLabel=function(l){for(var j in this._mAdvancedAreaFilter){var n=this._mAdvancedAreaFilter[j];for(var i=0;i<n.items.length;i++){var O=n.items[i];if(O.control){if(N(O.control.getLabels(),l)){return O.control;}}}}};
z.prototype._isFilterItemInBasicGroup=function(i){return i&&!i.getGroupName()||i.getGroupName()===z.INTERNAL_GROUP;};
z.prototype._shouldBeVisible=function(i){return(i.filterItem.getMandatory()&&!this._hasFilterValue(i.filterItem))||(i.name==="_BASIC_SEARCH_FIELD");};
z.prototype.exit=function(){this._unregisterVariantManagement();this._destroyFilterControls();if(this._oHintText&&(this._oAdvancedPanel.indexOfContent(this._oHintText)<0)){this._oHintText.destroy();}window.sessionStorage.removeItem(this.getId());window.sessionStorage.removeItem("semanticDates");G.prototype.exit.apply(this,arguments);if(this._oAdaptFiltersDialog){this._oAdaptFiltersDialog.destroy();this._oAdaptFiltersDialog=null;}if(this._oAdaptFiltersDialogModel){this._oAdaptFiltersDialogModel=null;}if(this._oAdaptFiltersPanel){this._oAdaptFiltersPanel=null;}if(this.oModel){this.oModel.destroy();this.oModel=null;}this._aFields=null;this._oHintText=null;this._aBasicAreaSelection=null;this._mAdvancedAreaFilter=null;this._oBasicAreaLayout=null;this._oVariantManagement=null;this._oCollectiveSearch=null;this._oVariant=null;this._fRegisteredFetchData=null;this._fRegisteredApplyData=null;this._fRegisterGetFiltersWithValues=null;this._fRegisteredFilterChangeHandlers=null;this._oSearchButton=null;this._oFiltersButton=null;this._oHideShowButton=null;this._oClearButtonOnFB=null;this._oRestoreButtonOnFB=null;this._oBasicSearchField=null;this._oBasicSearchFieldContainer=null;this._oButtonsVLayout=null;this._bLayoutAdded=null;this.iAddedContentLength=null;this._oInitializedDeferred=null;};
return z;});
sap.ui.predefine('sap/ui/comp/filterbar/FilterGroupItem',['./FilterItem','sap/ui/comp/library'],function(F,l){"use strict";
var a=F.extend("sap.ui.comp.filterbar.FilterGroupItem",{metadata:{library:"sap.ui.comp",properties:{groupTitle:{type:"string",group:"Misc",defaultValue:null},groupName:{type:"string",group:"Misc",defaultValue:null},visibleInAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false}}}});
a.prototype.init=function(){this.setVisibleInAdvancedArea(false);this._setParameter(false);};
a.prototype._setParameter=function(v){this._bIsParameter=v;};
a.prototype.setGroupTitle=function(v){this.setProperty("groupTitle",v);this.fireChange({propertyName:"groupTitle"});return this;};
a.prototype.setVisibleInAdvancedArea=function(v){this.setVisibleInFilterBar(v);return this;};
a.prototype.getVisibleInAdvancedArea=function(){return this.getVisibleInFilterBar();};
a.prototype.destroy=function(){F.prototype.destroy.apply(this,arguments);};
return a;});
sap.ui.predefine('sap/ui/comp/filterbar/FilterItem',['sap/m/Label','sap/ui/core/Element','sap/ui/comp/util/IdentifierUtil'],function(L,E,I){"use strict";
var F=E.extend("sap.ui.comp.filterbar.FilterItem",{metadata:{library:"sap.ui.comp",properties:{label:{type:"string",group:"Misc",defaultValue:null},name:{type:"string",group:"Misc",defaultValue:null},mandatory:{type:"boolean",group:"Misc",defaultValue:false},visible:{type:"boolean",group:"Misc",defaultValue:true},labelTooltip:{type:"string",group:"Misc",defaultValue:null},controlTooltip:{type:"string",group:"Misc",defaultValue:null},partOfCurrentVariant:{type:"boolean",group:"Misc",defaultValue:true},visibleInFilterBar:{type:"boolean",group:"Misc",defaultValue:true},hiddenFilter:{type:"boolean",group:"Misc",defaultValue:false},entitySetName:{type:"string",group:"Misc",defaultValue:null},entityTypeName:{type:"string",group:"Misc",defaultValue:null}},aggregations:{control:{type:"sap.ui.core.Control",multiple:false}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
F.prototype.init=function(){this._oLabel=null;this._bIsParameter=false;this._sControlId=null;};
F.prototype.setControl=function(c){if(c&&c.getId){this._sControlId=c.getId();}this.setAggregation("control",c);return this;};
F.prototype.getControl=function(){var c=this.getAggregation("control");if(c){return c;}if(this._sControlId===null){return null;}return sap.ui.getCore().byId(this._sControlId);};
F.prototype._isParameter=function(){return this._bIsParameter;};
F.prototype.setVisible=function(v){this.setProperty("visible",v);this.fireChange({propertyName:"visible"});return this;};
F.prototype.setVisibleInFilterBar=function(v){this.setProperty("visibleInFilterBar",v);this.fireChange({propertyName:"visibleInFilterBar"});return this;};
F.prototype.setPartOfCurrentVariant=function(v){if(v){this.fireChange({propertyName:"partOfCurrentVariant"});}return this;};
F.prototype.getPartOfCurrentVariant=function(){return true;};
F.prototype._getGroupName=function(){var n="";if(this.getGroupName){n=I.replace(this.getGroupName());}return n;};
F.prototype._getName=function(){var n=I.replace(this.getName());var g=this._getGroupName();if(g){n=g+"-"+n;}return n;};
F.prototype._createLabelControl=function(f){var t=this.getLabel();var i="filterItem-"+this._getName();if(f){i=f+"-"+i;}var l=new L({id:i,required:this.getMandatory(),textAlign:"Begin"});l.setText(t);l.setTooltip(this.getLabelTooltip());return l;};
F.prototype.setMandatory=function(v){this.setProperty("mandatory",v);if(this._oLabel){this._oLabel.setRequired(v);}this.fireChange({propertyName:"mandatory"});return this;};
F.prototype.setLabel=function(v){this.setProperty("label",v);if(this._oLabel){this._oLabel.setText(v);}if(!this.getLabelTooltip()){this.setLabelTooltip(v);}this.fireChange({propertyName:"label"});return this;};
F.prototype.setLabelTooltip=function(t){this.setProperty("labelTooltip",t);if(this._oLabel){this._oLabel.setTooltip(t);}this.fireChange({propertyName:"labelTooltip"});return this;};
F.prototype.setControlTooltip=function(t){this.setProperty("controlTooltip",t);this.fireChange({propertyName:"controlTooltip"});return this;};
F.prototype.getLabelControl=function(f){if(!this._oLabel){this._oLabel=this._createLabelControl(f);}return this._oLabel;};
F.prototype.destroy=function(){E.prototype.destroy.apply(this,arguments);if(this._oLabel&&!this._oLabel.bIsDestroyed){this._oLabel.destroy();}if(this.getControl()&&!this.getControl().bIsDestroyed){this.getControl().destroy();}var f=this.getId()+"__filterGroupItem",o=sap.ui.getCore().byId(f);if(o){E.prototype.destroy.apply(o,arguments);if(o._oLabel&&!o._oLabel.bIsDestroyed){o._oLabel.destroy();}o._oLabel=null;}this._oLabel=null;this._sQuickinfo=null;};
return F;});
sap.ui.predefine('sap/ui/comp/filterbar/VariantConverterFrom',['sap/ui/comp/library','sap/ui/comp/util/DateTimeUtil','sap/m/MultiComboBox','sap/m/MultiInput','sap/m/DatePicker','sap/m/DateRangeSelection',"sap/base/Log","sap/ui/core/format/DateFormat"],function(l,D,M,a,b,c,L,d){"use strict";var A=l.ANALYTICAL_PARAMETER_PREFIX;var V=l.valuehelpdialog.ValueHelpRangeOperation;var e=function(){};
e.prototype.convert=function(s,f,S){var C=null,r=null,o;if(s){this._bStrictMode=S;o=JSON.parse(s);if(f&&f.getFilterBarViewMetadata&&o){this._sBasicSearchName=null;this._sBasicSearchValue=null;if(f.getBasicSearchName){this._sBasicSearchName=f.getBasicSearchName();}C={};if(o.Parameters){this._addParameters(o.Parameters,f,C);}if(o.SelectOptions){this._addSelectOptions(o.SelectOptions,f,C);}r={payload:null,variantId:null};r.payload=JSON.stringify(C);if(o.SelectionVariantID){r.variantId=o.SelectionVariantID;}if(this._sBasicSearchValue){r.basicSearch=this._sBasicSearchValue;}}}return r;};
e.prototype.retrieveVariantId=function(s){var v=null;var S;if(s){S=JSON.parse(s);if(S&&S.SelectionVariantID){v=S.SelectionVariantID;}}return v;};
e.prototype._getParameterMetaData=function(n,f,i){if(this._bStrictMode){return this._getParameterMetaDataStrictMode(n,f);}return this._getParameterMetaDataNonStrictMode(n,f,i);};
e.prototype._getFilter=function(n,f){var i,j,g,F;F=f.getFilterBarViewMetadata();if(F){for(i=0;i<F.length;i++){g=F[i];for(j=0;j<g.fields.length;j++){if(n===g.fields[j].fieldName){return g.fields[j];}}}}return null;};
e.prototype._getParameter=function(n,f){var j,g;if(f.getAnalyticalParameters){g=f.getAnalyticalParameters();if(g){for(j=0;j<g.length;j++){if(n===g[j].fieldName){return g[j];}}}}return null;};
e.prototype._getParameterWithInnerPrefix=function(n,f){var p=n;if(n.indexOf(A)!==0){p=A+n;}return this._getParameter(p,f);};
e.prototype._getParameterMetaDataStrictMode=function(n,f){var m=this._getExactFilterParameterMatch(n,f);if(m){return m;}return null;};
e.prototype._getParameterMetaDataNonStrictMode=function(o,f,i){var m,n,N,t,s=o,h=false,_=function(){return(h&&s===t)||(!h&&s!==t);};if(o.indexOf(A)===0){s=o.substr(A.length);h=true;}if(s.indexOf("P_")===0){n=s;N=s.substr(2);}else{n="P_"+s;N=s;}if(s!==n){t=n;}else if(s!==N){t=N;}m=this._getExactParameterMatch(s,f);if(m){return m;}m=this._getExactParameterMatch(t,f);if(m){return m;}if(_()){m=this._getFilter(N,f);if(m){return m;}}return null;};
e.prototype._getExactParameterMatch=function(n,f){var p;p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}return null;};
e.prototype._getExactFilterParameterMatch=function(n,f){var F,p;F=this._getFilter(n,f);if(F){return F;}p=this._getParameterWithInnerPrefix(n,f);if(p){return p;}return null;};
e.prototype._addParameters=function(s,f,C){var i;var n,v;var F;for(i=0;i<s.length;i++){v=s[i].PropertyValue;n=s[i].PropertyName;if(this._sBasicSearchName&&(n===this._sBasicSearchName)){this._sBasicSearchValue=v;continue;}F=this._getParameterMetaData(n,f,true);if(F){f.determineControlByName(n);this._addAccordingMetaData(C,f,F,v);}else{L.error("neither metadata nor custom information for filter '"+n+"'");}}};
e.prototype._addSelectOptions=function(s,f,C){var i;var n,r;var F,o;for(i=0;i<s.length;i++){n=s[i].PropertyName;r=s[i].Ranges;if(this._sBasicSearchName&&(n===this._sBasicSearchName)){if(r&&r.length>0){this._sBasicSearchValue=r[0].Low;}continue;}f.determineControlByName(n);F=this._getParameterMetaData(n,f,false);if(F){o=F.control;this._addRangesAccordingMetaData(C,f,F,r,o);}else{L.error("neither metadata nor custom information for filter '"+n+"'");}}};
e.convertOption=function(s,v){var i;switch(s){case"CP":i=V.Contains;if(v){var n=v.indexOf('*');var f=v.lastIndexOf('*');if(n>-1){if((n===0)&&(f!==(v.length-1))){i=V.EndsWith;v=v.substring(1,v.length);}else if((n!==0)&&(f===(v.length-1))){i=V.StartsWith;v=v.substring(0,v.length-1);}else{v=v.substring(1,v.length-1);}}}break;case"EQ":case"BT":case"LE":case"GE":case"GT":case"LT":i=s;break;default:L.error("Suite Option is not supported '"+s+"'");i=undefined;v=undefined;}return{op:i,v:v};};
e.prototype._getYearMonthDatePattern=function(s){var m=s.match(/^([0-9]{4})([0-9]{2})([0-9]{2})$/);if(m){return[m[1],m[2],m[3]];}};
e.prototype._getTimeZoneFormat=function(m){return m.split(/[\s+-]/)[0];};
e.prototype._createDateObject=function(s){var f,g,m,p,P,o,t,h;if(!s){return;}f=s.split(".");g=f[0];m=f[1];if(m){m=this._getTimeZoneFormat(m);}P=g.split("T");h=P[0].split("-");if(h.length===1){p=this._getYearMonthDatePattern(h[0]);if(p){h=p;}}if(P.length<2){o=new Date(h[0],h[1]-1,h[2]);}else{t=P[1].split(":");o=new Date(h[0],h[1]-1,h[2],t[0],t[1],t[2],m?m:0);}o.setFullYear(h[0]);return o;};
e.prototype._addRangesAccordingMetaData=function(C,f,F,r,o,n){var i,O;var g=function(F,f,v,q){if(f&&f.isInUTCMode&&v.indexOf("PT")===-1&&(F.filterType==="date")){if(f.isInUTCMode()){v=v.split('T')[0]+"T00:00:00";}else if(!f.isInUTCMode()&&(v.split("T").length===1)){v+="T00:00:00";}}if(v.indexOf('Z')!==(v.length-1)){if(f&&f.isInUTCMode&&!f.isInUTCMode()){q=D.localToUtc(this._createDateObject(v)).toJSON();}else{q=this._createDateObject(v).toJSON();}}else{L.error("Property '"+F.fieldName+"' was added with zulu time zone information.");}return q;}.bind(this);var h=function(v){var q=d.getTimeInstance({pattern:"'PT'hh'H'mm'M'ss'S'"});return q.parse(v);};var j=function(v){var q=v;if(v&&F){if(F.filterType==="numeric"){if((F.type==="Edm.Decimal")||(F.type==="Edm.Float")||(F.type==="Edm.Double")||(F.type==="Edm.Single")){q=parseFloat(v);}else{q=parseInt(v);}}else{switch(F.type){case"Edm.DateTime":q=g(F,f,v,q);break;case"Edm.Time":if(v.indexOf("PT")===0){q=h(v);}else{q=g(F,f,v,q);}break;case"Edm.String":if(F.isCalendarDate&&!(F.filterType==="stringdate"&&F.controlType==="date")){q=g(F,f,v,q);}break;case"Edm.DateTimeOffset":q=v;break;case"Edm.Date":var S=v.split('T'),t=S[1];if(t){t=this._getTimeZoneFormat(t);}q=(t)?S[0]+"T"+t:v;break;default:q=v;break;}}}return q;};var k=function(q,r){var i,I,O;for(i=0;i<r.length;i++){O=e.convertOption(r[i].Option,r[i].Low);if(O&&O.op){I={"exclude":(r[i].Sign==="E"),"operation":O.op,"keyField":q,"value1":j(O.v),"value2":j(r[i].High)};if(!C[q]){C[q]={ranges:[],items:[],value:null};}C[q].ranges.push(I);}}};var m=function(r){for(var i=0;i<r.length;i++){if(r[i].Sign==="E"){return true;}}return false;};if(r&&r.length>0){if(F.isCustomFilterField){if(!C._CUSTOM){C._CUSTOM={};}if(Array.isArray(r)&&r.length>1){C._CUSTOM[F.fieldName]=r.map(function(R){return R.Low;});}else{C._CUSTOM[F.fieldName]=r[0].Low;}return;}if(F.conditionType){for(i=0;i<r.length;i++){if(!r[i].High){r[i].High=r[i].Low;}}k(F.fieldName,r);return;}if(F.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.single){if(!r[0].Low&&o&&(o instanceof b)){C[F.fieldName]=null;}else{C[F.fieldName]=j(r[0].Low);}}else if(F.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.interval){if(o&&(o instanceof c)){if(r[0].Low&&r[0].High){C[F.fieldName]={low:j(r[0].Low),high:j(r[0].High)};}else if(r[0].Low&&!r[0].High){C[F.fieldName]={low:j(r[0].Low),high:j(r[0].Low)};}else if(!r[0].Low&&r[0].High){C[F.fieldName]={low:j(r[0].High),high:j(r[0].High)};}else{C[F.fieldName]={low:null,high:null};}}else{if(F.type==="Edm.Time"){k(F.fieldName,r);}else{C[F.fieldName]={low:r[0].Low===undefined?null:j(r[0].Low),high:r[0].High===undefined?null:j(r[0].High)};}}}else if(F.filterRestriction===sap.ui.comp.smartfilterbar.FilterType.multiple){C[F.fieldName]={ranges:[],items:[],value:null};var s=(F.type==="Edm.DateTimeOffset")||F.isCalendarDate||(F.type==="Edm.DateTime")||(F.type==="Edm.Time");var p=(o instanceof a)&&m(r);if(o&&!s&&((o instanceof M)||(o instanceof a))&&!p){for(i=0;i<r.length;i++){O=e.convertOption(r[i].Option,j(r[i].Low));if(O.op===V.EQ){C[F.fieldName].items.push({key:j(O.v)});}}}else{k(F.fieldName,r);}}else{k(F.fieldName,r);}L.warning("potential reduced information for filter '"+F.fieldName+"'");}else{L.warning("no Ranges-section found for filter '"+F.fieldName+"'");}};
e.prototype._addAccordingMetaData=function(C,f,F,v){var h=F.type==="Edm.DateTime"?"":v;var r=[{Sign:"I",Low:v,High:h,Option:"EQ"}];this._addRangesAccordingMetaData(C,f,F,r);};
return e;},true);
sap.ui.predefine('sap/ui/comp/filterbar/VariantConverterTo',['sap/ui/comp/library','sap/ui/comp/util/DateTimeUtil','sap/ui/comp/odata/ODataType','sap/ui/comp/util/FormatUtil','sap/ui/core/format/DateFormat',"sap/base/Log"],function(l,D,O,F,a,L){"use strict";var b=l.smartfilterbar.FilterType;var V=l.valuehelpdialog.ValueHelpRangeOperation;var A=l.ANALYTICAL_PARAMETER_PREFIX;var c=function(){};
c.prototype.convert=function(k,f,d,o,v,p,s){var e,i,j,J,n=null,B,g;var S={SelectionVariantID:k};if(p){S.ParameterContextUrl=p;}if(s){S.FilterContextUrl=s;}this._sAPILevel=v;if(d&&f){j=JSON.parse(d);if(j){e=this._getFields(f);if(e&&e.length>0){for(i=0;i<e.length;i++){this._convertField(S,e[i],j,o);}}if(j._CUSTOM){if(typeof j._CUSTOM==="string"){J=JSON.parse(j._CUSTOM);}else{J=j._CUSTOM;}for(n in J){if(n){if(Array.isArray(J[n])&&J[n].length>1){this._addArrayOfSingleValues(S,n,J[n]);}else{this._addSingleValue(S,n,c._getValue(J[n],true));}}}}if(o&&o.getBasicSearchName){B=o.getBasicSearchName();if(B){g=o.getBasicSearchValue();this._addSingleValue(S,B,c._getValue(g,true));}}}}return JSON.stringify(S);};
c.prototype._getParameterMetaData=function(n,f){var i,j,g;var d=f.getFilterBarViewMetadata();if(d){for(i=0;i<d.length;i++){g=d[i];for(j=0;j<g.fields.length;j++){if(n===g.fields[j].fieldName){return g.fields[j];}}}}if(f.getAnalyticalParameters){var e=f.getAnalyticalParameters();if(e){for(j=0;j<e.length;j++){if(n===e[j].fieldName){return e[j];}}}}return null;};
c.prototype._convertField=function(s,f,C,o){var d,v,e=null,r,g,h,i;if(C&&f&&s){d=C[f];if(d){g=this._getParameterMetaData(f,o);if(g){if(g.isCustomFilterField){return;}if(g.filterRestriction===b.single){v=(d.value===undefined)?d:d.value;v=c._getValueWithMetadata(o,g,v,true);this._addSingleValue(s,f,v);}else if(g.filterRestriction===b.interval){if(d.conditionTypeInfo){this._convertFieldByValue(s,f,C,o,g);}else{r=c.addRangeEntry(s,f);if((g.type==="Edm.DateTime")&&!d.high){d.high=d.low;}else if((g.type==="Edm.String")&&!d.high){e="EQ";}if(g.type==="Edm.Time"){this._addRangeMultipleRangeValues(o,g,r,d.ranges,true);}else if(g.type==="Edm.DateTimeOffset"&&!d.high){e="BT";h=F.parseDateTimeOffsetInterval(d.low);if(h&&(h.length===2)&&h[0]){h[0]=g.ui5Type.parseValue(h[0],"string");if(h.length===2){h[1]=g.ui5Type.parseValue(h[1],"string");}i={low:h[0],high:h[1]};this._addRangeLowHigh(o,g,r,i,"BT");}else{this._addRangeLowHigh(o,g,r,d,"EQ");}}else if(O.isNumeric(g.type)&&!d.high){h=F.parseFilterNumericIntervalData(d.low);if(h&&(h.length===2)&&h[0]){this._addRangeLowHigh(o,g,r,{low:h[0],high:h[1]},"BT");}else{this._addRangeLowHigh(o,g,r,d,"EQ");}}else{this._addRangeLowHigh(o,g,r,d,e);}}}else if(g.filterRestriction===b.multiple){r=c.addRangeEntry(s,f);if(d.items&&d.items.length>0){this._addRangeMultipleSingleValues(o,g,r,d.items);}else if(d.ranges&&d.ranges.length>0){this._addRangeMultipleRangeValues(o,g,r,d.ranges,d.conditionTypeInfo?true:false);}else{this._addRangeSingleValue(r,d.value);}}else{this._convertFieldByValue(s,f,C,o,g);}}else{this._convertFieldByValue(s,f,C,o,g);}}}};
c.prototype._convertFieldByValue=function(s,f,C,o,d){var e;var r;if(C&&f&&s){e=C[f];if(e){if(e.conditionTypeInfo){if(e.ranges&&e.ranges.length>0){r=c.addRangeEntry(s,f);c.addRanges(r,e.ranges,o,d);}}else if((e.ranges!==undefined)&&(e.items!==undefined)&&(e.value!==undefined)){r=c.addRangeEntry(s,f);if(e.ranges&&e.ranges.length>0){c.addRanges(r,e.ranges,o,d);}if(e.items&&e.items.length>0){this._addRangeMultipleSingleValues(o,d,r,e.items);}if(e.value){this._addRangeSingleValue(r,c._getValueWithMetadata(o,d,e.value));}}else if((e.items!==undefined)&&e.items&&(e.items.length>0)){r=c.addRangeEntry(s,f);this._addRangeMultipleSingleValues(o,d,r,e.items);}else if((e.low!==undefined)&&e.low&&(e.high!==undefined)&&e.high){r=c.addRangeEntry(s,f);this._addRangeLowHigh(o,d,r,e);}else if((e.value!==undefined)&&e.value){this._addSingleValue(s,f,e.value);}else if(e){this._addSingleValue(s,f,e);}}}};
c.addRangeEntry=function(s,f){var o={PropertyName:f,Ranges:[]};if(!s.SelectOptions){s.SelectOptions=[];}s.SelectOptions.push(o);return o.Ranges;};
c.addRanges=function(r,R,f,o){var s,d,e,h;for(var i=0;i<R.length;i++){s=R[i].exclude?"E":"I";e=c._getValueWithMetadata(f,o,R[i].value1,true);h=null;if(R[i].operation===V.BT){h=c._getValueWithMetadata(f,o,R[i].value2);}switch(R[i].operation){case V.Contains:d="CP";if(e){e="*"+e+"*";}break;case V.StartsWith:d="CP";if(e){e=e+"*";}break;case V.EndsWith:d="CP";if(e){e="*"+e;}break;case V.Empty:d="EQ";e="";break;case V.EQ:case V.BT:case V.LE:case V.GE:case V.GT:case V.LT:d=R[i].operation;break;default:L.error("ValueHelpRangeOperation is not supported '"+R[i].operation+"'");return;}r.push({Sign:s,Option:d,Low:e,High:h});}};
c.prototype._addRangeMultipleSingleValues=function(f,o,r,I){for(var i=0;i<I.length;i++){r.push({Sign:"I",Option:"EQ",Low:c._getValueWithMetadata(f,o,I[i].key,true),High:null});}};
c.prototype._addRangeMultipleRangeValues=function(f,o,r,I,t){for(var i=0;i<I.length;i++){r.push({Sign:"I",Option:t?"BT":"EQ",Low:c._getValueWithMetadata(f,o,I[i].value1,true),High:t?c._getValueWithMetadata(f,o,I[i].value2):null});}};
c.prototype._addRangeSingleValue=function(r,v){r.push({Sign:"I",Option:"EQ",Low:c._getValue(v,true),High:null});};
c.prototype._addRangeLowHigh=function(f,o,r,d,s){var e=s||"BT";r.push({Sign:"I",Option:e,Low:c._getValueWithMetadata(f,o,d.low,true),High:c._getValueWithMetadata(f,o,d.high)});};
c.prototype._addParamaterSingleValue=function(s,f,v){if(!s.Parameters){s.Parameters=[];}s.Parameters.push({PropertyName:f,PropertyValue:v});};
c.prototype._createRangeSingleValue=function(s,f,v){var r=c.addRangeEntry(s,f);this._addRangeSingleValue(r,v);};
c.prototype._addSingleValue=function(s,f,v){var n;if(this._sAPILevel){n=f.split(A);if(n.length>1){this._addParamaterSingleValue(s,n[n.length-1],v);}else{this._createRangeSingleValue(s,f,v);}}else{this._addParamaterSingleValue(s,f,v);}};
c.prototype._addArrayOfSingleValues=function(s,f,v){var r=c.addRangeEntry(s,f);v.forEach(function(d){r.push({Sign:"I",Option:"EQ",Low:c._getValue(d,true),High:null});});};
c.prototype._getFields=function(f){var r=[];if(f){for(var i=0;i<f.length;i++){r.push(f[i].name);}}return r;};
c._getValue=function(v,u){if((v===null)||(v===undefined)||(v==="")){return(u?"":null);}return""+v;};
c._getValueWithMetadata=function(f,o,v,u){if((v===null)||(v===undefined)||(v==="")){return(u?"":null);}else if(f&&o){if((o.type==="Edm.DateTime")||(o.type==="Edm.Time")){if(f&&f.isInUTCMode&&f.isInUTCMode()){v=D.localToUtc(new Date(v)).toJSON();}if(v.indexOf('Z')===(v.length-1)){v=v.substr(0,v.length-1);}}else if(o.type==="Edm.DateTimeOffset"){v=new Date(v).toJSON();}}return""+v;};
return c;},true);
sap.ui.predefine('sap/ui/comp/historyvalues/Constants',function(){"use strict";var H="sapui5.history.";var S="ui5.";var a="__sapui5_suggestion_order";var M=5;return{getHistoryPrefix:function(){return H;},getShortHistoryPrefix:function(){return S;},getSuggestionsGroupPropertyName:function(){return a;},getMaxHistoryItems:function(){return M;}};});
sap.ui.predefine('sap/ui/comp/historyvalues/HistoryAppDataService',["sap/ui/base/Object","./Constants","./HistoryGlobalDataService"],function(B,c,H){"use strict";var D="en";var i;
var a=B.extend("sap.ui.comp.historyvalues.HistoryAppDataService",{constructor:function(){B.apply(this,arguments);this._initialize();}});
a.prototype._initialize=function(){this._initializeAppContainerId=this._initializeAppContainerId.bind(this);this._initializeAppData=this._initializeAppData.bind(this);this._sContainerId="";this._sItemId=c.getHistoryPrefix()+"appData";this._oPersonalizer=null;this._sAppId=g();this._oData={};this._oDataReadyPromise=this._getHistoryGlobalDataService().getApps().then(this._initializeAppContainerId).then(this._initializeAppData);};
a.prototype._getHistoryGlobalDataService=function(){return H.getInstance();};
a.prototype._initializeAppContainerId=function(A){this._sContainerId=A[this._sAppId];if(!this._sContainerId){this._createAndSaveContainerId(A);}return this._sContainerId;};
a.prototype._initializeAppData=function(){return this._getPersonalizer().getPersData().then(function(d){this._oData=d||this._getDefaultData();return this._oData;}.bind(this));};
a.prototype._getPersonalizer=function(){if(this._oPersonalizer){return this._oPersonalizer;}var p=sap.ushell.Container.getService("Personalization"),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:false,validity:Infinity},P={container:this._sContainerId,item:this._sItemId};this._oPersonalizer=p.getPersonalizer(P,s);return this._oPersonalizer;};
a.prototype._createAndSaveContainerId=function(A){this._sContainerId=this._createContainerId();A[this._sAppId]=this._sContainerId;this._getHistoryGlobalDataService().setApps(A);};
a.prototype._createContainerId=function(){var u="xxxxxxxx.xxxx.4xxx.yxxx.xxxxxxxxxxxx".replace(/[xy]/g,function(p){var r=Math.random()*16|0;if(p==='y'){r=r&0x3|0x8;}return r.toString(16);});return c.getShortHistoryPrefix()+u;};
a.prototype._getDefaultData=function(){return{};};
a.prototype._isDataReady=function(){return this._oDataReadyPromise;};
a.prototype._getHistoryEnabled=function(){return this._getHistoryGlobalDataService().getHistoryEnabled();};
a.prototype.getFieldData=function(f){return this._isDataReady().then(this._getHistoryEnabled.bind(this)).then(function(e){if(!e){return[];}var d=[],l=this._getLanguage();if(this._isDefaultLanguage(l)){d=this._oData[f]||[];}else{var s=c.getHistoryPrefix()+l;if(!this._oData[s]){d=[];}else{d=this._oData[s][f]||[];}}return d.slice();}.bind(this));};
a.prototype.setFieldData=function(f,d){return this._isDataReady().then(this._getHistoryEnabled.bind(this)).then(function(e){if(!e){return false;}var l=this._getLanguage();if(this._isDefaultLanguage(l)){this._oData[f]=d;}else{var s=c.getHistoryPrefix()+l;if(!this._oData[s]){this._oData[s]={};}this._oData[s][f]=d;}return this._getPersonalizer().setPersData(this._oData);}.bind(this));};
a.prototype._getLanguage=function(){var l=sap.ui.getCore().getConfiguration().getLanguage()||D;var m=l.match(/[a-z]+/i);if(m[0]){l=m[0].toLowerCase();}return l;};
a.prototype._isDefaultLanguage=function(l){return l===D;};
a.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);this._sContainerId="";this._sItemId="";this._oPersonalizer=null;this._sAppId="";this._oData={};this._oDataReadyPromise=null;};
function g(){var A=sap.ushell.Container.getService("AppLifeCycle"),C=A.getCurrentApplication(),o,m,M,I;if(C){o=C.componentInstance;}if(o){m=o.getMetadata();}if(m){M=m.getManifest();}if(M){I=M["sap.app"].id;}return c.getHistoryPrefix()+I;}
return{getInstance:function(){var C=g();if(!i){i=new a();}if(i._sAppId!==C){i.destroy();i=new a();}return i;}};});
sap.ui.predefine('sap/ui/comp/historyvalues/HistoryGlobalDataService',["sap/ui/base/Object","./Constants"],function(B,c){"use strict";var i;
var H=B.extend("sap.ui.comp.historyvalues.HistoryGlobalDataService",{constructor:function(){B.apply(this,arguments);this._initialize();}});
H.prototype._initialize=function(){this._initializeHistoryData=this._initializeHistoryData.bind(this);this._sContainerId=c.getHistoryPrefix()+"HistorySettings";this._sItemId=c.getHistoryPrefix()+"settings";this._oPersonalizer=null;this._oData={};this._oDataReadyPromise=this._getPersonalizer().getPersData().then(this._initializeHistoryData);};
H.prototype._initializeHistoryData=function(d){this._oData=d||this._getDefaultData();return Object.assign({},this._oData);};
H.prototype._getPersonalizer=function(){if(this._oPersonalizer){return this._oPersonalizer;}var p=sap.ushell.Container.getService("Personalization"),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:false,validity:Infinity},P={container:this._sContainerId,item:this._sItemId};this._oPersonalizer=p.getPersonalizer(P,s);return this._oPersonalizer;};
H.prototype._getDefaultData=function(){return{historyEnabled:true,apps:{}};};
H.prototype._isDataReady=function(){return this._oDataReadyPromise;};
H.prototype.getHistoryEnabled=function(){return this._isDataReady().then(function(){return this._oData.historyEnabled;}.bind(this));};
H.prototype.setHistoryEnabled=function(e){return this._isDataReady().then(function(){this._oData.historyEnabled=e;return this._getPersonalizer().setPersData(this._oData);}.bind(this));};
H.prototype.getApps=function(){return this._isDataReady().then(function(){return Object.assign({},this._oData.apps);}.bind(this));};
H.prototype.setApps=function(a){return this._isDataReady().then(function(){this._oData.apps=a;return this._getPersonalizer().setPersData(this._oData);}.bind(this));};
H.prototype.deleteHistory=function(){return this._isDataReady().then(function(){var d=this._oData,D=[],a=d.apps;Object.keys(a).forEach(function(k){D.push(sap.ushell.Container.getService("Personalization").delContainer(a[k]));});return Promise.all(D);}.bind(this));};
H.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);this._sContainerId="";this._sItemId="";this._oPersonalizer=null;this._oData={};this._oDataReadyPromise=null;};
return{getInstance:function(){if(!i){i=new H();}return i;}};});
sap.ui.predefine('sap/ui/comp/historyvalues/HistoryOptOutProvider',["sap/ui/base/Object","sap/ui/core/Core","sap/ui/core/IconPool","./HistoryGlobalDataService","./Constants","sap/m/Dialog","sap/m/MessageBox","sap/m/FlexBox","sap/m/VBox","sap/m/HBox","sap/m/Switch","sap/m/Button","sap/m/Label"],function(B,C,I,H,a,D,M,F,V,b,S,c,L){"use strict";var i;
var d=B.extend("sap.ui.comp.historyvalues.HistoryOptOutProvider",{
metadata:{library:"sap.ui.comp"},
constructor:function(){B.apply(this,arguments);this._initialize();}
});
d.prototype._initialize=function(){this._oRB=C.getLibraryResourceBundle("sap.ui.comp");this._oHistoryGlobalDataService=H.getInstance();this._oDialog=null;this._oHistoryEnabledSwitch=null;this._oHistoryEnabledLabel=null;this._oDeleteHistoryButton=null;this._oDeleteHistoryLabel=null;this._oSaveButton=null;this._oCancelButton=null;this._oDialogLayout=null;this._oHistoryEnabledLayout=null;this._oDeleteHistoryLayout=null;};
d.prototype._createOptOutUserProfileEntry=function(){var r=sap.ushell.Container.getRenderer("fiori2"),A={controlType:"sap.m.Button",oControlProperties:{id:a.getHistoryPrefix()+"optOut.trigger",text:this._oRB.getText("HISTORY_SETTING_TITLE"),icon:I.getIconURI("history"),press:function(){this._createDialogContent();this._createLayouts();this._createDialog();this._oHistoryGlobalDataService.getHistoryEnabled().then(function(e){this._oHistoryEnabledSwitch.setState(e);this._oDialog.open();}.bind(this));}.bind(this)},bIsVisible:true,bCurrentState:true};return r.addUserAction(A);};
d.prototype._createDialogContent=function(){this._createHistoryEnabledSwitch();this._createHistoryEnabledLabel();this._createDeleteHistoryButton();this._createDeleteHistoryLabel();this._createSaveButton();this._createCancelButton();};
d.prototype._createLayouts=function(){this._oHistoryEnabledLayout=new b({alignItems:"Center",items:[this._oHistoryEnabledLabel,this._oHistoryEnabledSwitch]});this._oDeleteHistoryLayout=new F({alignItems:"Center",items:[this._oDeleteHistoryLabel,this._oDeleteHistoryButton]});this._oDialogLayout=new V({items:[this._oHistoryEnabledLayout,this._oDeleteHistoryLayout]}).addStyleClass("sapUiSmallMargin");};
d.prototype._createDialog=function(){this._oDialog=new D(a.getHistoryPrefix()+"optOutDialog",{title:this._oRB.getText("HISTORY_SETTING_TITLE"),content:[this._oDialogLayout],buttons:[this._oSaveButton,this._oCancelButton]});this._oDialog.attachAfterClose(this._onOptOutDialogAfterClose,this);};
d.prototype._createHistoryEnabledSwitch=function(){this._oHistoryEnabledSwitch=new S();};
d.prototype._createHistoryEnabledLabel=function(){this._oHistoryEnabledLabel=new L({text:this._oRB.getText("HISTORY_SETTING_ENABLE_TRACKING_DESCRIPTION")}).addStyleClass("sapUiSmallMarginEnd");};
d.prototype._createDeleteHistoryButton=function(){this._oDeleteHistoryButton=new c({busyIndicatorDelay:0,text:this._oRB.getText("HISTORY_SETTING_DELETE_BUTTON")});this._oDeleteHistoryButton.attachPress(this._onDeleteHistoryPress,this);};
d.prototype._createDeleteHistoryLabel=function(){this._oDeleteHistoryLabel=new L({text:this._oRB.getText("HISTORY_SETTING_DELETE_DESCRIPTION")}).addStyleClass("sapUiSmallMarginEnd");};
d.prototype._createSaveButton=function(){this._oSaveButton=new c({text:this._oRB.getText("HISTORY_SETTING_SAVE")});this._oSaveButton.attachPress(this._onSavePress,this);};
d.prototype._createCancelButton=function(){this._oCancelButton=new c({text:this._oRB.getText("HISTORY_SETTING_CANCEL")});this._oCancelButton.attachPress(this._onCancelPress,this);};
d.prototype._onOptOutDialogAfterClose=function(){this._oDialog.destroy();};
d.prototype._onDeleteHistoryPress=function(e){var o=e.getSource();o.setBusy(true);this._oHistoryGlobalDataService.deleteHistory().then(function(){o.setBusy(false);});};
d.prototype._onSavePress=function(){M.confirm(this._oRB.getText("HISTORY_SETTING_CONFIRM"),{onClose:function(r){if(r=="CANCEL"){return;}this._oHistoryGlobalDataService.setHistoryEnabled(this._oHistoryEnabledSwitch.getState()).then(function(){window.location.reload();});}.bind(this)});};
d.prototype._onCancelPress=function(){this._oDialog.close();};
d.prototype.exit=function(){if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}this._oRB=null;this._oHistoryEnabledSwitch=null;this._oHistoryEnabledLabel=null;this._oDeleteHistoryButton=null;this._oDeleteHistoryLabel=null;this._oSaveButton=null;this._oCancelButton=null;this._oDialogLayout=null;this._oHistoryEnabledLayout=null;this._oDeleteHistoryLayout=null;};
return{createOptOutSettingPage:function(){if(!i){i=new d();}if(!i._oUserActionPromise){i._oUserActionPromise=i._createOptOutUserProfileEntry();}else{i._oUserActionPromise.then(function(){i._oUserActionPromise=i._createOptOutUserProfileEntry();});}return i;}};});
sap.ui.predefine('sap/ui/comp/historyvalues/HistoryValuesProvider',["sap/ui/base/EventProvider","sap/base/util/values","./Constants","./HistoryGlobalDataService","./HistoryAppDataService"],function(E,v,c,H,a){"use strict";
var b=E.extend("sap.ui.comp.providers.HistoryValuesProvider",{
metadata:{library:"sap.ui.comp",events:{fieldUpdated:{parameters:{fieldData:{type:"Array"}}}}},
constructor:function(C,f){E.apply(this,arguments);this._initialize(C,f);}
});
b.prototype._initialize=function(C,f){this._oControl=C;this._sFieldName=f;};
b.prototype._getHistoryGlobalDataService=function(){return H.getInstance();};
b.prototype._getHistoryAppDataService=function(){return a.getInstance();};
b.prototype.attachChangeListener=function(){if(this._oControl.isA("sap.m.MultiInput")){this._oControl.attachTokenUpdate(this._onMultiInputChange,this);return;}if(this._oControl.isA("sap.m.MultiComboBox")){this._oControl.attachSelectionChange(this._onMultiComboBoxChange,this);return;}if(this._oControl.isA("sap.m.Input")){this._oControl.attachChange(this._onInputChange,this);return;}if(this._oControl.isA("sap.m.ComboBox")){this._oControl.attachChange(this._onComboBoxChange,this);return;}};
b.prototype._detachChangeListener=function(){if(this._oControl.isA("sap.m.MultiInput")){this._oControl.detachTokenUpdate(this._onMultiInputChange,this);return;}if(this._oControl.isA("sap.m.MultiComboBox")){this._oControl.detachSelectionChange(this._onMultiComboBoxChange,this);return;}if(this._oControl.isA("sap.m.Input")){this._oControl.detachChange(this._onInputChange,this);return;}if(this._oControl.isA("sap.m.ComboBox")){this._oControl.detachChange(this._onComboBoxChange,this);return;}};
b.prototype._onMultiInputChange=function(e){var t=e.getParameter("type"),A=e.getParameter("addedTokens");if(t==="added"){var d=A.reduce(function(r,T){var D=T.data("row");if(D){D=Object.assign({},D);delete D.__metadata;delete D[c.getSuggestionsGroupPropertyName()];D=this._processDateValues(D);return r.concat(D);}return r;}.bind(this),[]);this.setFieldData(d);}};
b.prototype._onMultiComboBoxChange=function(e){var s=e.getParameter("selected"),C=e.getParameter("changedItem");if(s&&C){var d=C.getBindingContext("list").getObject();this._processSingleValueControl(d);}};
b.prototype._onInputChange=function(e){var V=e.getParameter("validated"),s=sap.ui.getCore().byId(e.getSource().getSelectedRow());if(V&&s){var d=s.getBindingContext("list").getObject();this._processSingleValueControl(d);}};
b.prototype._onComboBoxChange=function(e){var V=e.getParameter("value"),n=e.getParameter("newValue"),s=e.getSource().getSelectedItem();if(V&&n&&s){var d=s.getBindingContext("list").getObject();this._processSingleValueControl(d);}};
b.prototype._processSingleValueControl=function(d){if(d){d=Object.assign({},d);delete d.__metadata;delete d[c.getSuggestionsGroupPropertyName()];d=this._processDateValues(d);this.setFieldData([d]);}};
b.prototype._processDateValues=function(d){return Object.keys(d).reduce(function(r,k){if(typeof d[k]==="object"&&Object.prototype.toString.call(d[k])==="[object Date]"){r[k]="/Date("+d[k].getTime()+")/";}else{r[k]=d[k];}return r;},{});};
b.prototype._getDistinct=function(d){var u={},D=[];d.forEach(function(x){var k=v(x).join();if(!u[k]){D.push(x);u[k]=true;}},this);return D;};
b.prototype.getFieldData=function(){return this._getHistoryAppDataService().getFieldData(this._sFieldName);};
b.prototype.setFieldData=function(f){return this._getHistoryAppDataService().getFieldData(this._sFieldName).then(function(F){var m=c.getMaxHistoryItems(),d=this._getDistinct(f.concat(F));d=d.slice(0,m);this.fireEvent("fieldUpdated",{fieldData:d});return this._getHistoryAppDataService().setFieldData(this._sFieldName,d);}.bind(this));};
b.prototype.getHistoryEnabled=function(){return this._getHistoryGlobalDataService().getHistoryEnabled();};
b.prototype.destroy=function(){E.prototype.destroy.apply(this,arguments);if(this._oControl){this._detachChangeListener();this._oControl=null;}this._sFieldName="";this._oDataReadyPromise=null;};
return b;});
sap.ui.predefine('sap/ui/comp/library',['sap/ui/core/Core','sap/ui/core/library','sap/m/library'],function(C,l,a){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.comp",version:"1.96.0",dependencies:["sap.ui.core","sap.m"],designtime:"sap/ui/comp/designtime/library.designtime",types:["sap.ui.comp.smartfield.ControlProposalType","sap.ui.comp.smartfield.ControlContextType","sap.ui.comp.smartfield.ControlType","sap.ui.comp.smartchart.SelectionMode","sap.ui.comp.smartfield.DisplayBehaviour","sap.ui.comp.smartfield.JSONType","sap.ui.comp.smartfield.CriticalityRepresentationType","sap.ui.comp.smartfield.TextInEditModeSource","sap.ui.comp.smartfield.Importance","sap.ui.comp.TextArrangementType","sap.ui.comp.smarttable.TableType","sap.ui.comp.smarttable.ExportType","sap.ui.comp.smartlist.ListType","sap.ui.comp.personalization.AggregationRole","sap.ui.comp.personalization.ResetType","sap.ui.comp.personalization.ChangeType","sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation","sap.ui.comp.smartfilterbar.SelectOptionSign","sap.ui.comp.smartfilterbar.DisplayBehaviour","sap.ui.comp.smartform.SmartFormValidationMode"],interfaces:["sap.ui.comp.smartform.SmartFormLayout","sap.ui.comp.IFormGroupElement"],controls:["sap.ui.comp.filterbar.FilterBar","sap.ui.comp.navpopover.NavigationPopover","sap.ui.comp.navpopover.SmartLink","sap.ui.comp.smartchart.SmartChart","sap.ui.comp.smartfield.SmartField","sap.ui.comp.smartfield.SmartLabel","sap.ui.comp.smartfilterbar.SmartFilterBar","sap.ui.comp.smartform.SmartForm","sap.ui.comp.smartmultiedit.Field","sap.ui.comp.smartmultiedit.Container","sap.ui.comp.smartmicrochart.SmartAreaMicroChart","sap.ui.comp.smartmicrochart.SmartLineMicroChart","sap.ui.comp.smartmicrochart.SmartBulletMicroChart","sap.ui.comp.smartmicrochart.SmartDeltaMicroChart","sap.ui.comp.smartmicrochart.SmartRadialMicroChart","sap.ui.comp.smartmicrochart.SmartStackedBarMicroChart","sap.ui.comp.smartmicrochart.SmartComparisonMicroChart","sap.ui.comp.smartmicrochart.SmartColumnMicroChart","sap.ui.comp.smartmicrochart.SmartHarveyBallMicroChart","sap.ui.comp.smartmicrochart.SmartMicroChart","sap.ui.comp.smarttable.SmartTable","sap.ui.comp.smartlist.SmartList","sap.ui.comp.smartvariants.SmartVariantManagement","sap.ui.comp.smartvariants.SmartVariantManagementUi2","sap.ui.comp.transport.TransportDialog","sap.ui.comp.valuehelpdialog.ValueHelpDialog","sap.ui.comp.variants.EditableVariantItem","sap.ui.comp.variants.VariantManagement"],elements:["sap.ui.comp.filterbar.FilterGroupItem","sap.ui.comp.filterbar.FilterItem","sap.ui.comp.navpopover.LinkData","sap.ui.comp.navpopover.SemanticObjectController","sap.ui.comp.smartfield.Configuration","sap.ui.comp.smartfield.ControlProposal","sap.ui.comp.smartfield.ObjectStatus","sap.ui.comp.smartfilterbar.ControlConfiguration","sap.ui.comp.smartfilterbar.GroupConfiguration","sap.ui.comp.smartfilterbar.SelectOption","sap.ui.comp.smartform.Group","sap.ui.comp.smartform.GroupElement","sap.ui.comp.smartform.SemanticGroupElement","sap.ui.comp.smartform.Layout","sap.ui.comp.smartvariants.PersonalizableInfo","sap.ui.comp.variants.VariantItem","sap.ui.comp.navpopover.NavigationContainer","sap.ui.comp.smartvariants.SmartVariantManagementAdapter"],extensions:{flChangeHandlers:{"sap.ui.comp.smartform.SmartForm":"sap/ui/comp/smartform/flexibility/SmartForm","sap.ui.comp.smartform.Group":{"hideControl":"default","unhideControl":"default","renameGroup":"sap/ui/comp/smartform/flexibility/changes/RenameGroup","addField":"sap/ui/comp/smartform/flexibility/changes/AddField","addFields":"sap/ui/comp/smartform/flexibility/changes/AddFields","addMultiEditField":"sap/ui/comp/smartmultiedit/flexibility/changes/AddMultiEditFields"},"sap.ui.comp.smartform.GroupElement":{"hideControl":"default","unhideControl":"sap/ui/comp/smartform/flexibility/changes/UnhideControl","renameField":"sap/ui/comp/smartform/flexibility/changes/RenameField"},"sap.ui.comp.navpopover.NavigationContainer":{"addLink":{"changeHandler":"sap/ui/comp/navpopover/flexibility/changes/AddLink","layers":{"USER":true}},"removeLink":{"changeHandler":"sap/ui/comp/navpopover/flexibility/changes/RemoveLink","layers":{"USER":true}}},"sap.ui.comp.smartvariants.SmartVariantManagement":{"variantContent":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/VariantContent","layers":{"USER":false}}},"sap.ui.comp.smartfilterbar.SmartFilterBar":{"variantContent":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/VariantContent","layers":{"USER":false}}},"sap.ui.comp.smarttable.SmartTable":{"variantContent":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/VariantContent","layers":{"USER":false}}},"sap.ui.comp.smartchart.SmartChart":{"variantContent":{"changeHandler":"sap/ui/comp/smartvariants/flexibility/changes/VariantContent","layers":{"USER":false}}},"sap.ui.comp.smartfield.SmartField":"sap/ui/comp/smartfield/flexibility/SmartField"},"sap.ui.support":{publicRules:true}}});sap.ui.comp.ANALYTICAL_PARAMETER_PREFIX="$Parameter.";sap.ui.comp.STANDARD_VARIANT_NAME="STANDARD";
sap.ui.comp.smartform.inheritCostomDataToFields=function(c){var k=c.getKey();var b={startsWith:{strings:["sap.ui.fl"],compareFunction:function(B){return k.startsWith(B);}},wholeString:{strings:["sap-ui-custom-settings"],compareFunction:function(B){return k==B;}}};var r=true;Object.keys(b).forEach(function(t){if(r&&b[t].strings.some(b[t].compareFunction)){r=false;return true;}});return r;};
sap.ui.comp.TextArrangementType={TextFirst:"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst",TextLast:"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast",TextSeparate:"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate",TextOnly:"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"};sap.ui.comp.smartchart.SelectionMode={Multi:"MULTIPLE",Single:"SINGLE",None:"NONE"};sap.ui.comp.smartfield.ControlType={auto:"auto",dropDownList:"dropDownList",input:"input",datePicker:"datePicker",checkBox:"checkBox",selection:"selection"};sap.ui.comp.smartfield.DisplayBehaviour={auto:"auto",descriptionOnly:"descriptionOnly",descriptionAndId:"descriptionAndId",idAndDescription:"idAndDescription",idOnly:"idOnly",TrueFalse:"TrueFalse",OnOff:"OnOff",YesNo:"YesNo"};sap.ui.comp.smartfield.JSONType={String:"String",Date:"Date",Float:"Float",Integer:"Integer",Boolean:"Boolean",DateTime:"DateTime"};sap.ui.comp.smartfield.ControlContextType={None:"",ResponsiveTable:"responsiveTable",Form:"form",Table:"table",SmartFormGrid:"smartFormGrid"};sap.ui.comp.smartfield.ControlProposalType={None:"",ObjectNumber:"ObjectNumber",ObjectIdentifier:"ObjectIdentifier"};sap.ui.comp.smartfield.CriticalityRepresentationType={WithoutIcon:"WithoutIcon",WithIcon:"WithIcon"};sap.ui.comp.smarttable.TableType={Table:"Table",ResponsiveTable:"ResponsiveTable",AnalyticalTable:"AnalyticalTable",TreeTable:"TreeTable"};sap.ui.comp.smarttable.InfoToolbarBehavior={Auto:"Auto",On:"On",Off:"Off"};sap.ui.comp.smartfield.TextInEditModeSource={None:"None",NavigationProperty:"NavigationProperty",ValueList:"ValueList",ValueListNoValidation:"ValueListNoValidation"};sap.ui.comp.smartfield.Importance={High:"High",Medium:"Medium",Low:"Low"};sap.ui.comp.smarttable.ExportType={GW:"GW",UI5Client:"UI5Client"};sap.ui.comp.smartlist.ListType={List:"List",Tree:"Tree"};sap.ui.comp.personalization.ResetType={ResetFull:"ResetFull",ResetPartial:"ResetPartial"};sap.ui.comp.personalization.AggregationRole={Dimension:"Dimension",Measure:"Measure",NotDimeasure:"NotDimeasure"};sap.ui.comp.personalization.ChangeType={Unchanged:"Unchanged",ModelChanged:"ModelChanged",TableChanged:"TableChanged"};sap.ui.comp.personalization.TableType={ResponsiveTable:"ResponsiveTable",Table:"Table",AnalyticalTable:"AnalyticalTable",TreeTable:"TreeTable",ChartWrapper:"ChartWrapper",SelectionWrapper:"SelectionWrapper"};sap.ui.comp.personalization.ColumnType={ResponsiveColumn:"ResponsiveColumn",TableColumn:"TableColumn",ColumnWrapper:"ColumnWrapper"};sap.ui.comp.smartfilterbar.FilterType={auto:"auto",single:"single",multiple:"multiple",interval:"interval"};sap.ui.comp.smartfilterbar.ControlType={auto:"auto",input:"input",dropDownList:"dropDownList",date:"date",dateTimePicker:"dateTimePicker"};sap.ui.comp.smartfilterbar.MandatoryType={auto:"auto",mandatory:"mandatory",notMandatory:"notMandatory"};sap.ui.comp.smartfilterbar.DisplayBehaviour={auto:"auto",descriptionOnly:"descriptionOnly",descriptionAndId:"descriptionAndId",idAndDescription:"idAndDescription",idOnly:"idOnly"};sap.ui.comp.smartfilterbar.SelectOptionSign={I:"I",include:"I",E:"E",exclude:"E"};sap.ui.comp.navpopover.ChangeHandlerType={addLink:"addLink",removeLink:"removeLink",moveLink:"moveLink"};sap.ui.comp.smartvariants.ChangeHandlerType={addFavorite:"addFavorite",removeFavorite:"removeFavorite"};sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation={BT:"BT",EQ:"EQ",Contains:"Contains",StartsWith:"StartsWith",EndsWith:"EndsWith",LT:"LT",LE:"LE",GT:"GT",GE:"GE",Initial:"Initial",Empty:"Empty"};sap.ui.comp.smartform.SmartFormValidationMode={Standard:"Standard",Async:"Async"};sap.ui.comp.smartform.Importance={High:"High",Medium:"Medium",Low:"Low"};sap.ui.comp.filterbar.FilterBar.AdaptFiltersView={group:"group"};return sap.ui.comp;});
sap.ui.predefine('sap/ui/comp/navpopover/ContactDetailsController',['sap/ui/comp/library','sap/ui/core/Element','sap/ui/layout/form/SimpleForm','sap/m/Title','sap/m/Label','sap/m/Text','sap/m/Image','sap/m/Link','sap/ui/base/ManagedObjectObserver','sap/ui/comp/odata/MetadataAnalyser','sap/base/Log',"sap/ui/layout/library","sap/ui/core/library","sap/base/util/merge"],function(C,E,S,T,L,c,I,d,M,e,f,l,g,m){"use strict";var h=g.TitleLevel;var i=l.form.SimpleFormLayout;
var j=E.extend("sap.ui.comp.navpopover.ContactDetailsController",{metadata:{library:"sap.ui.comp"}});
j.prototype.init=function(){this._oObserver=null;};
j.prototype.exit=function(){if(this._oObserver){this._oObserver.disconnect();this._oObserver=null;}};
j.prototype.getBindingPath4ContactAnnotation=function(b,s,k){if(s===undefined||s===null||!b){return Promise.resolve(null);}if(!this.getModel()){return Promise.resolve(null);}if(!this.getModel().getMetaModel()){return Promise.resolve(null);}var o=this.getModel().getMetaModel();return o.loaded().then(function(){var p;try{o.getMetaContext(b);}catch(a){f.error("sap.ui.comp.navpopover.ContactDetailsController.getBindingPath4ContactAnnotation: binding path '"+b+"' is not valid. Error has been caught: "+a);return null;}try{p="/"+s+"('"+k+"')";o.getMetaContext(p);return p;}catch(a){}try{p=s?b+"/"+s:b;o.getMetaContext(p);return p;}catch(a){f.error("sap.ui.comp.navpopover.ContactDetailsController.getBindingPath4ContactAnnotation: the path of sContactAnnotationPath '"+b+"/"+s+"' is not valid. Error has been caught: "+a);return null;}});};
j.prototype.getContactDetailsAnnotation=function(b){if(!b){return null;}var o=new e(this.getModel());var a=o.getContactAnnotation(b);if(!a){return null;}return a;};
j.prototype.getContactDetailsContainers=function(b){var o=this.getContactDetailsAnnotation(b);if(!o){return[];}var a=[];var k=[];var s=[];var n;this._oObserver=new M(function(p){if(p.type==="property"&&p.name==="visible"){var v=false;for(var q=1;q<n.getContent().length;q++){if(n.getContent()[q].getLabelFor&&n.getContent()[q].getLabelFor()){continue;}if(n.getContent()[q].getVisible()){v=true;}}n.setVisible(v);}});var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.addProperty2ExpandAndSelect("photo",o,b,k,s);this._addPhoto("photo",o,b,a,this._oObserver);this.addProperty2ExpandAndSelect("fn",o,b,k,s);this._addLabeledText("fn",r.getText("POPOVER_CONTACT_SECTION_NAME"),o,b,a,this._oObserver);this.addProperty2ExpandAndSelect("role",o,b,k,s);this._addLabeledText("role",r.getText("POPOVER_CONTACT_SECTION_ROLE"),o,b,a,this._oObserver);this.addProperty2ExpandAndSelect("title",o,b,k,s);this._addLabeledText("title",r.getText("POPOVER_CONTACT_SECTION_JOBTITLE"),o,b,a,this._oObserver);this.addProperty2ExpandAndSelect("org",o,b,k,s);this._addLabeledText("org",r.getText("POPOVER_CONTACT_SECTION_DEPARTMENT"),o,b,a,this._oObserver);this._addEmails(o,b,k,s,a,this._oObserver);this._addTels(o,b,k,s,a,this._oObserver);this._addAddresses(o,b,k,s,a,this._oObserver);if(!a.length){return[];}a.splice(0,0,new T({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_CONTACT_SECTION_TITLE"),level:h.H2}));n=new S({maxContainerCols:1,editable:false,layout:i.ResponsiveGridLayout,content:a});this._requestData(n,b,k,s);return[n];};
j.prototype._addPhoto=function(a,o,b,k,O){if(!o[a]){return;}var B=b+"/"+o[a].Path;if(this.isPropertyHidden(B)){return;}var n=new I({src:{path:B},visible:{path:B,formatter:function(v){return!!v;}},decorative:false});n.addStyleClass("sapUiIcon");n.addStyleClass("navigationPopoverThumbnail");O.observe(n,{properties:["visible"]});k.push(n);};
j.prototype._addLabeledText=function(a,s,o,b,k,O){if(!o[a]){return;}var B=b+"/"+o[a].Path;if(this.isPropertyHidden(B)){return;}var n=new c({text:{path:B},visible:{path:B,formatter:function(v){return!!v;}}});var p=new L({text:s,labelFor:n.getId()});O.observe(n,{properties:["visible"]});k.push(p);k.push(n);};
j.prototype._addEmails=function(o,B,k,s,n,O){if(!o.email||!o.email.length){return;}var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var p=m([],o.email);p.filter(function(a){return!a.processed&&a.type&&(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1||a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1);}).sort(function(a,b){if(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1&&b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")<0){return-1;}if(b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")<0){return 1;}return 0;}).forEach(function(a){this.addProperty2ExpandAndSelect("address",a,B,k,s);this._addLabeledEmail("address",r.getText("POPOVER_CONTACT_SECTION_EMAIL"),a,B,n,O);a.processed=true;},this);};
j.prototype._addTels=function(o,B,k,s,n,O){if(!o.tel||!o.tel.length){return;}var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var t=m([],o.tel);t.filter(function(a){return!a.processed&&a.type&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1;}).sort(function(a,b){if(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return-1;}if(b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return 1;}return 0;}).forEach(function(a){this.addProperty2ExpandAndSelect("uri",a,B,k,s);this._addLabeledTel("uri",r.getText("POPOVER_CONTACT_SECTION_PHONE"),a,B,n,O);a.processed=true;},this);t.filter(function(a){return!a.processed&&a.type&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1;}).sort(function(a,b){if(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return-1;}if(b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return 1;}return 0;}).forEach(function(a){this.addProperty2ExpandAndSelect("uri",a,B,k,s);this._addLabeledTel("uri",r.getText("POPOVER_CONTACT_SECTION_MOBILE"),a,B,n,O);a.processed=true;},this);t.filter(function(a){return!a.processed&&a.type&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1;}).sort(function(a,b){if(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return-1;}if(b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1){return 1;}return 0;}).forEach(function(a){this.addProperty2ExpandAndSelect("uri",a,B,k,s);this._addLabeledTel("uri",r.getText("POPOVER_CONTACT_SECTION_FAX"),a,B,n,O);a.processed=true;},this);t.filter(function(a){return!a.processed&&a.type&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/preferred")>-1;}).forEach(function(a){this.addProperty2ExpandAndSelect("uri",a,B,k,s);this._addLabeledTel("uri",r.getText("POPOVER_CONTACT_SECTION_PHONE"),a,B,n,O);a.processed=true;},this);};
j.prototype._addAddresses=function(o,B,k,s,n,O){if(!o.adr||!o.adr.length){return;}var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var A=m([],o.adr);A.filter(function(a){return!a.processed&&a.type&&(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1||a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1);}).sort(function(a,b){if(a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1&&b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")<0){return-1;}if(b.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")>-1&&a.type.EnumMember.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/preferred")<0){return 1;}return 0;}).forEach(function(a){this._addLabeledAddress(r.getText("POPOVER_CONTACT_SECTION_ADR"),a,B,k,s,n,O);a.processed=true;},this);};
j.prototype._addLabeledAddress=function(s,a,b,k,n,o,O){var p=[];["street","code","locality","region","country"].forEach(function(A){this.addProperty2ExpandAndSelect(A,a,b,k,n);var B;if(a[A]){B=b+"/"+a[A].Path;}p.push(B&&!this.isPropertyHidden(B)?{path:B}:{path:"$notExisting"});},this);if(!p.length){return;}var q=new c({text:{parts:p,formatter:function(t,u,v,R,w){var V=[];if(t){V.push(t);}if(u&&v){V.push(u+" "+v);}else{if(u){V.push(u);}if(v){V.push(v);}}if(R){V.push(R);}if(w){V.push(w);}return V.join(', ');}},visible:{parts:p,formatter:function(t,u,v,R,w){return!!(t||u||v||R||w);}}});var r=new L({text:s,labelFor:q.getId()});O.observe(q,{properties:["visible"]});o.push(r);o.push(q);};
j.prototype._addLabeledTel=function(a,s,t,b,k,o){if(!t[a]||!b){return;}var B=b+"/"+t[a].Path;if(this.isPropertyHidden(B)){return;}var n=new d({href:{path:B,formatter:function(v){return v?"tel:"+v:v;}},text:{path:B},visible:{path:B,formatter:function(v){return!!v;}}});var p=new L({text:s,labelFor:n.getId()});o.observe(n,{properties:["visible"]});k.push(p);k.push(n);};
j.prototype._addLabeledEmail=function(a,s,o,b,k,O){if(!o[a]||!b){return;}var B=b+"/"+o[a].Path;if(this.isPropertyHidden(B)){return;}var n=new d({href:{path:B,formatter:function(v){return v?"mailto:"+v:v;}},text:{path:B},visible:{path:B,formatter:function(v){return!!v;}}});var p=new L({text:s,labelFor:n.getId()});O.observe(n,{properties:["visible"]});k.push(p);k.push(n);};
j.prototype.addProperty2ExpandAndSelect=function(a,A,b,k,s){if(!A[a]||!b){return;}var B=b+"/"+A[a].Path;if(!B){return;}if(B.indexOf("/")!==0){throw("sap.ui.comp.navpopover.ContactDetailsController.addProperty2ExpandAndSelect: the path of sBindingPathOfProperty '"+B+"' is not valid.");}var p=B.split("/");p.shift();p.shift();var n=p.join("/");if(n){s.push(n);}p.pop();var o=p.join("/");if(!o){return;}var q=k.filter(function(P){return P===o;});if(!q.length){k.push(o);}};
j.prototype.isPropertyHidden=function(p){var o;if(!this.getModel()){f.error("sap.ui.comp.navpopover.ContactDetailsController.isPropertyHidden: the model does not exist");return false;}if(!this.getModel().getMetaModel()){f.error("sap.ui.comp.navpopover.ContactDetailsController.isPropertyHidden: the model should be the ODataModel");return false;}try{o=this.getModel().getMetaModel().getMetaContext(p);}catch(a){f.error("sap.ui.comp.navpopover.ContactDetailsController.isPropertyHidden: the path of property path '"+p+"' is not valid. Error has been caught: "+a);return false;}var P=o.getProperty(o.getPath());return e.isHidden(P);};
j.prototype._requestData=function(s,b,a,k){var p={};if(a.length){p.expand=a.join(",");}if(k.length){p.select=k.join(",");}var B="/"+b.split("/")[1];s.bindContext({path:B,parameters:p,events:{change:function(){s.invalidate();}}});};
return j;});
sap.ui.predefine('sap/ui/comp/navpopover/Factory',['sap/ui/comp/library'],function(C){"use strict";var F={getService:function(s){switch(s){case"CrossApplicationNavigation":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation");case"URLParsing":return sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("URLParsing");default:return null;}}};return F;},true);
sap.ui.predefine('sap/ui/comp/navpopover/FlexConnector',['sap/ui/comp/library','sap/ui/comp/navpopover/flexibility/changes/AddLink','sap/ui/comp/navpopover/flexibility/changes/RemoveLink','sap/base/Log'],function(C,A,R,L){"use strict";var a=C.navpopover.ChangeHandlerType;return{createAndSaveChangesForControl:function(m,M,c){if(!m.length&&!M.length){return Promise.resolve();}return this._createChangesForControl(M.concat(m),c).then(function(b){return this._saveChangesForControl(c,b);}.bind(this),function(e){return Promise.reject(e);});},_getControlPersonalizationWriteAPI:function(){return sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){return new Promise(function(r){sap.ui.require(["sap/ui/fl/write/api/ControlPersonalizationWriteAPI"],function(b){r(b);});});});},discardChangesForControl:function(c){return this._getControlPersonalizationWriteAPI().then(function(b){return b.reset({selectors:[c]});});},_saveChangesForControl:function(c,b){return this._getControlPersonalizationWriteAPI().then(function(d){return d.save({selector:c,changes:b});});},_createChangesForControl:function(m,c){if(!m.length){return[];}var p=[];m.forEach(function(M){var P={selectorElement:c,changeSpecificData:{changeType:M.visible?a.addLink:a.removeLink,content:M,isUserDependent:true}};p.push(P);});return this._getControlPersonalizationWriteAPI().then(function(b){return b.add({changes:p});});},activateApplyChangeStatistics:function(){var t=this;this.aStatistics=[];var w=function(o,n){if(t.aStatistics.findIndex(function(s){return s.stableId===n.getId()&&s.changeId===o.getId();})<0){var e=n.getAvailableActions().find(function(g){return g.getKey()===o.getContent().key;});t.aStatistics.push({stableId:n.getId(),changeId:o.getId(),layer:o.getLayer(),key:o.getContent().key,text:e?e.getText():'',changeType:o.getChangeType()});}};var d=function(l){t.aStatistics=t.aStatistics.filter(function(s){return s.layer!==l;});};var f=A.applyChange.bind(A);A.applyChange=function(o,n,p){w(o,n);f(o,n,p);};var r=R.applyChange.bind(R);R.applyChange=function(o,n,p){w(o,n);r(o,n,p);};var b=A.discardChangesOfLayer.bind(A);A.discardChangesOfLayer=function(l,n){d(l);b(l,n);};var c=R.discardChangesOfLayer.bind(R);R.discardChangesOfLayer=function(l,n){d(l);c(l,n);};},_formatStatistic:function(s){var l=s.layer;switch(s.layer){case"VENDOR":l=""+l;break;case"CUSTOMER":l="        "+l;break;case"USER":l="                "+l;break;default:l=""+l;}var v;switch(s.changeType){case a.addLink:v="On";break;case a.removeLink:v="Off";break;default:v="";}return{formattedLayer:l,formattedValue:v};},printStatisticAll:function(){if(!this.aStatistics){L.info("Please activate with sap.ui.comp.navpopover.FlexConnector.activateApplyChangeStatistics()");return;}var t=this;L.info("idx - VENDOR ------------ CUSTOMER ----------- USER --------------------------------------");this.aStatistics.forEach(function(s,i){var f=t._formatStatistic(s);L.info(i+" "+s.stableId+" "+f.formattedLayer+" '"+s.text+"' "+f.formattedValue);});}};},true);
sap.ui.predefine('sap/ui/comp/navpopover/LinkData',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var L=E.extend("sap.ui.comp.navpopover.LinkData",{metadata:{library:"sap.ui.comp",properties:{text:{type:"string",defaultValue:null},href:{type:"string",defaultValue:null},target:{type:"string",defaultValue:null},description:{type:"string",defaultValue:undefined},visible:{type:"boolean",defaultValue:true},key:{type:"string",defaultValue:undefined},press:{type:"object",defaultValue:null},isSuperiorAction:{type:"boolean"},visibleChangedByUser:{type:"boolean"}}}});
L.prototype.getJson=function(){return{key:this.getKey(),href:this.getHref(),text:this.getText(),target:this.getTarget(),description:this.getDescription(),visible:this.getVisible(),press:this.getPress(),isSuperiorAction:this.getIsSuperiorAction()};};
L.convert2Json=function(a){return a.map(function(o){return o.getJson();});};
return L;});
sap.ui.predefine('sap/ui/comp/navpopover/Log',['sap/ui/base/Object','sap/ui/thirdparty/jquery'],function(B,q){"use strict";
var L=B.extend("sap.ui.comp.navpopover.Log",{constructor:function(){this.reset();}});
L.prototype.reset=function(){this._oLog={semanticObjects:[],intents:[]};return this;};
L.prototype.createSemanticObjectStructure=function(s){this._oLog.semanticObjects[s]={attributes:{},intents:[]};};
L.prototype.addIntent=function(i){this._oLog.intents.push(i);return this;};
L.prototype.addSemanticObjectAttribute=function(s,a,A){if(!this._oLog.semanticObjects[s]){this.createSemanticObjectStructure(s);}this._oLog.semanticObjects[s].attributes[a]=A;return this;};
L.prototype.addSemanticObjectIntent=function(s,i){if(!this._oLog.semanticObjects[s]){this.createSemanticObjectStructure(s);}this._oLog.semanticObjects[s].intents.push(i);return this;};
L.prototype.updateSemanticObjectAttributes=function(s,S,o){if(!this._oLog.semanticObjects[s]){this.createSemanticObjectStructure(s);}var t,T;var a=Object.keys(o);for(var A in o){if(this._oLog.semanticObjects[s].attributes[A]){t=this._oLog.semanticObjects[s].attributes[A].transformations;T=t[t.length-1];if(o[A]!==T["value"]){this._oLog.semanticObjects[s].attributes[A].transformations.push({value:o[A],description:"\u2139 Value of the attribute has been changed in an event handler.",reason:"\ud83d\udd34 Is changed in the event handler of the event BeforePopoverOpens for the SmartLink control. Please check the implementation if the result is not what you expected."});}}else{this.addSemanticObjectAttribute(s,A,{transformations:[{value:o[A],description:"\u2139 The attribute has been added in an event handler.",reason:"\ud83d\udd34 Is added in the event handler of the event BeforePopoverOpens for the SmartLink control. Please check the implementation if the result is not what you expected."}]});}}for(var b in S){if(a.indexOf(b)<0&&this._oLog.semanticObjects[s].attributes[b]){this._oLog.semanticObjects[s].attributes[b].transformations.push({value:undefined,description:"\u2139 The attribute has been removed in an event handler.",reason:"\ud83d\udd34 Is removed in the event handler of the event BeforePopoverOpens for the SmartLink control. Please check the implementation if the result is not what you expected."});}}return this;};
L.prototype.getFormattedText=function(){var g=function(v){return(typeof v==="string")?"'"+v+"'":v;};var r=function(a,A){var o={value:"\u2022\u0020"+A+" : ",description:""};a.forEach(function(b,I){o.value=o.value+(I>0?"\u0020 \u279c \u0020":"")+g(b["value"]);o.description=o.description+"\u2026 \u0020 "+b["description"]+"\n";if(b["reason"]){o.description=o.description+"\u2026 \u0020 "+b["reason"]+"\n";}});return o;};var R=function(I){var a="";I.forEach(function(o){a+="\u2022\u0020'"+o.text+"' : "+o.intent+"\n";});return a;};var s=function(d){try{var l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var C=window.Intl.Collator(l,{numeric:true});d.sort(function(a,b){return C.compare(a,b);});}else{d.sort(function(a,b){return a.localeCompare(b,l,{numeric:true});});}}catch(e){}};var t="";for(var S in this._oLog.semanticObjects){t=t+"\n\u2b24"+" "+S+"\n";if(q.isEmptyObject(this._oLog.semanticObjects[S].attributes)){t+="\u2026\u2026 \u0020\ud83d\udd34 No semantic attributes available for semantic object "+S+". Please be aware "+"that without semantic attributes no URL parameters can be created.\n";}else{var c=Object.keys(this._oLog.semanticObjects[S].attributes);s(c);for(var i=0;i<c.length;i++){var A=c[i];var T=r(this._oLog.semanticObjects[S].attributes[A].transformations,A);t+=T.value+"\n";t+=T.description;}}if(this._oLog.semanticObjects[S].intents.length){t+="\nIntents returned by FLP for semantic object "+S+":\n";t+=R(this._oLog.semanticObjects[S].intents);}}if(this._oLog.intents.length){t+="\nIntents returned by event handler:\n";t+=R(this._oLog.intents);}return t;};
return L;});
sap.ui.predefine('sap/ui/comp/navpopover/NavigationContainer',['sap/m/Link','sap/ui/core/Control','sap/m/VBox','sap/m/HBox','sap/m/Button','sap/m/Title','sap/m/Image','sap/m/Text','sap/ui/layout/form/SimpleForm','./Factory','./LinkData','sap/ui/model/json/JSONModel','./Util','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/ui/layout/library','sap/ui/comp/personalization/Util','sap/ui/base/ManagedObjectObserver','sap/m/FlexItemData','sap/ui/model/BindingMode','sap/m/library','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/SelectionWrapper','sap/ui/comp/personalization/ColumnWrapper','sap/base/Log','sap/ui/comp/navpopover/flexibility/changes/AddLink','sap/ui/core/CustomData'],function(L,C,V,H,B,T,I,a,S,F,b,J,U,c,d,l,P,M,e,f,m,g,h,i,j,A,k){"use strict";var n=l.form.SimpleFormLayout;var o=m.FlexJustifyContent;var p=m.ButtonType;
var N=V.extend("sap.ui.comp.navpopover.NavigationContainer",{
metadata:{library:"sap.ui.comp",properties:{mainNavigationId:{type:"string",group:"Misc",defaultValue:null},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true}},aggregations:{availableActions:{type:"sap.ui.comp.navpopover.LinkData",multiple:true,singularName:"availableAction"},mainNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false}},associations:{extraContent:{type:"sap.ui.core.Control",multiple:false},component:{type:"sap.ui.core.Element",multiple:false},control:{type:"sap.ui.core.Control",multiple:false}},events:{navigate:{},beforePopoverOpen:{},afterPopoverClose:{}}},
renderer:{apiVersion:2}
});
N.prototype.init=function(){V.prototype.init.call(this);var q=new J({mainNavigationLink:{title:undefined,subtitle:undefined,href:undefined,target:undefined},availableActions:[],enableAvailableActionsPersonalization:undefined,extraContent:undefined,initialAvailableActions:[]});q.setDefaultBindingMode(f.TwoWay);q.setSizeLimit(1000);this.setModel(q,"$sapuicompNavigationContainer");this._oObserver=new M(this._observeChanges.bind(this));this._oAvailableActionsObserver=new M(this._observeAvailableActionsChanges.bind(this));this._oAvailableActionsObserver.observe(this,{aggregations:["availableActions"]});this.oPersonalizationController=null;};
N.prototype.applySettings=function(){V.prototype.applySettings.apply(this,arguments);this._createContent();};
N.prototype.exit=function(q){if(this._getInternalModel()){this._getInternalModel().destroy();}if(this._oObserver){this._oObserver.disconnect();this._oObserver=null;}if(this._oAvailableActionsObserver){this._oAvailableActionsObserver.disconnect();this._oAvailableActionsObserver=null;}this._oDefaultExtraConent=null;this._oSeparator=null;};
N.prototype.openSelectionDialog=function(q,s,r,t,u,v){this.fireBeforePopoverOpen();return this._getFlexRuntimeInfoAPI().then(function(w){return w.waitForChanges({element:this}).then(function(){return new Promise(function(x){var y=this._getInternalModel();var z=U.getStorableAvailableActions(y.getProperty("/initialAvailableActions"));var D=U.getStorableAvailableActions(y.getProperty("/availableActions")).map(function(E){return{columnKey:E.key,visible:E.visible};});if(!this.oPersonalizationController){this.oPersonalizationController=new g({resetToInitialTableState:true,table:new h({columns:z.map(function(E){return new i({label:E.text,selected:E.visible,href:q?undefined:E.href,target:E.target,press:function(O){this._onLinkPress(O);}.bind(this),description:E.description,customData:new k({key:"p13nData",value:{columnKey:E.key}})});}.bind(this))}),setting:{selection:{visible:true,payload:{callbackSaveChanges:function(E){var G=(E&&E.selection&&E.selection.selectionItems)||[];if(r){r(G.map(function(Q){return{key:Q.columnKey,visible:Q.visible};}));return Promise.resolve(true);}var K=[];var O=[];G.forEach(function(Q){if(Q.visible===true){K.push({key:Q.columnKey,visible:Q.visible});}else{O.push({key:Q.columnKey,visible:Q.visible});}});return N._saveChanges(K,O,this).then(function(){return true;});}.bind(this)}}},dialogConfirmedReset:function(){N._discardChanges(this);}.bind(this),dialogAfterClose:function(){this.fireAfterPopoverClose();x();}.bind(this)});}this.oPersonalizationController.setPersonalizationData({selection:{selectionItems:D}});this.oPersonalizationController.openLegacyDialog({contentWidth:"25rem",contentHeight:"35rem",styleClass:""+u,showReset:s,selection:{visible:true}});if(v){v.addDependent(this.oPersonalizationController._oDialog);}}.bind(this));}.bind(this));}.bind(this));};
N._discardChanges=function(s){return new Promise(function(r){sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){sap.ui.require(['sap/ui/comp/navpopover/FlexConnector'],function(q){return q.discardChangesForControl(s).then(function(){return r(true);},function(E){j.error("Changes could not be discarded in LRep: "+E);return r(false);});});});});};
N._saveChanges=function(q,r,s){return new Promise(function(t){sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){sap.ui.require(['sap/ui/comp/navpopover/FlexConnector'],function(u){return u.createAndSaveChangesForControl(q,r,s).then(function(){return t(true);},function(E){j.error("Changes could not be saved in LRep: "+E);return t(false);});});});});};
N.prototype.getDirectLink=function(){var q=this._getInternalModel();if(q.getProperty('/extraContent')){return null;}if(q.getProperty('/mainNavigationLink/href')&&!q.getProperty('/availableActions').length){return this._oHeaderArea.getItems()[0];}if(q.getProperty('/availableActions').length===1&&!q.getProperty('/mainNavigationLink/href')){return this._oActionArea.getItems()[0].getItems()[0];}return null;};
N.prototype.hasContent=function(){var q=this._getInternalModel();return!!q.getProperty("/mainNavigationLink/href")||!!q.getProperty("/availableActions").length||!!q.getProperty('/extraContent');};
N.prototype.setExtraContent=function(q){this.setAssociation("extraContent",q);if(!q){return this;}var r=this._getInternalModel();if(r.getProperty("/extraContent")){this.removeItem(1);}if(typeof q==="string"){q=sap.ui.getCore().byId(q);}this.insertItem(q,1);r.setProperty("/extraContent",q);return this;};
N.prototype.setMainNavigationId=function(s){this.setProperty("mainNavigationId",s,true);var q=this._getInternalModel();if(typeof s==="string"){q.setProperty("/mainNavigationLink/title",s);}return this;};
N.prototype.setMainNavigation=function(q){this.setAggregation("mainNavigation",q,true);if(!q){return this;}var r=this._getInternalModel();if(q.getHref()){r.setProperty("/mainNavigationLink/href",this._convertToExternal(q.getHref()));r.setProperty("/mainNavigationLink/target",q.getTarget());}if(!r.getProperty("/mainNavigationLink/title")&&r.getProperty("/mainNavigationLink/title")!==''){r.setProperty("/mainNavigationLink/title",q.getText());}r.setProperty("/mainNavigationLink/subtitle",q.getDescription());return this;};
N.prototype.setEnableAvailableActionsPersonalization=function(E){this.setProperty("enableAvailableActionsPersonalization",E,true);this._getInternalModel().setProperty("/enableAvailableActionsPersonalization",E);return this;};
N.prototype.onAfterRenderingActionForm=function(){var q=this._getInternalModel();var $=q.getProperty("/extraContent")?q.getProperty("/extraContent").$()[0]:undefined;if($&&$.scrollHeight>$.clientHeight){this.setFitContainer(false).setJustifyContent(o.Start);}};
N.prototype._getFlexRuntimeInfoAPI=function(){return sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){return new Promise(function(r){sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(q){r(q);});});});};
N.prototype._createContent=function(){this.addStyleClass("navigationPopover");this._oHeaderArea=this._createHeaderArea();this._oDefaultExtraConent=new S({layout:n.ResponsiveGridLayout,content:[new T({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_MSG_NO_CONTENT")})]});this._oDefaultExtraConent.addStyleClass("navigationPopoverDefaultExtraContent");this._oSeparator=new V({visible:false});this._oSeparator.addStyleClass("navigationPopoverSeparator");this._oActionArea=new V({items:{path:'/availableActions',templateShareable:false,factory:function(s,q){var r=new L({visible:"{visible}",text:"{text}",href:"{href}",target:"{target}",press:q.getProperty("press")});this._oObserver.observe(r,{bindings:["visible"],properties:["visible"]});return new V({visible:"{visible}",layoutData:new e({styleClass:q.getProperty("description")?"navigationPopoverAvailableLinkGroup":"navigationPopoverAvailableLinkWithoutGroup"}),items:[r,new a({visible:"{visible}",text:"{description}"})]});}.bind(this)}});this._oActionArea.addEventDelegate({onAfterRendering:this.onAfterRenderingActionForm.bind(this)});this._oActionArea.addStyleClass("navigationPopoverAvailableLinks");this._oPersonalizationButton=new H({visible:{parts:[{path:'/enableAvailableActionsPersonalization'}],formatter:function(E){return!!E;}},justifyContent:"End",items:new B({type:p.Transparent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_DEFINE_LINKS"),press:function(E){this.openSelectionDialog(false,true,undefined,true,undefined,E.getSource());}.bind(this)})});this._oPersonalizationButton.addStyleClass("navigationPopoverPersonalizationButton");this.setFitContainer(true);this.setJustifyContent(o.Start);this.addItem(this._oHeaderArea).addItem(this._getInternalModel().getProperty("/extraContent")||this._oDefaultExtraConent).addItem(this._oSeparator).addItem(this._oActionArea).addItem(this._oPersonalizationButton);this._oHeaderArea.setModel(this._getInternalModel());this._oSeparator.setModel(this._getInternalModel());this._oActionArea.setModel(this._getInternalModel());this._oPersonalizationButton.setModel(this._getInternalModel());};
N.prototype._createHeaderArea=function(){var t=this._createTitle();var s=this._createSubTitle();var q=new V({items:[t,s],visible:{path:'/mainNavigationLink/title',formatter:function(r){return!!r;}}});q.addStyleClass("navigationPopoverTitleH1");q.addStyleClass("navigationPopoverHeader");return q;};
N.prototype._createSubTitle=function(){var s=new a({text:{path:'/mainNavigationLink/subtitle'},visible:{path:'/mainNavigationLink/subtitle',formatter:function(v){return!!v;}}});return s;};
N.prototype._createTitle=function(){var t=new L({href:{path:'/mainNavigationLink/href'},text:{path:'/mainNavigationLink/title'},target:{path:'/mainNavigationLink/target'},visible:{path:'/mainNavigationLink/title',formatter:function(q){return!!q;}},enabled:{path:'/mainNavigationLink/href',formatter:function(v){return!!v;}},press:this._onLinkPress.bind(this)});t.addStyleClass("navigationPopoverTitle");this._oObserver.observe(t,{bindings:["visible"],properties:["visible"]});return t;};
N.prototype._getControl=function(){var q=this.getAssociation("control");if(typeof q==="string"){q=sap.ui.getCore().byId(q);}return q;};
N.prototype._getSmartLink=function(){var s;var q=this.getParent();while(q){if(q.getMetadata().getName()!=="sap.ui.comp.navpopover.SmartLink"){q=q.getParent();}else{s=q;break;}}return s;};
N.prototype._onLinkPress=function(E){var s=this._getSmartLink();if(s&&s.getBeforeNavigationCallback()&&E.getParameter("target")!=="_blank"){E.preventDefault();}this.fireNavigate({text:E.getSource().getText(),href:E.getSource().getHref()});};
N.prototype._convertToExternal=function(s){var x=F.getService("CrossApplicationNavigation");if(!x){return s;}return x.hrefForExternal({target:{shellHash:s}},this._getComponent());};
N.prototype._getComponent=function(){var q=this.getComponent();if(typeof q==="string"){q=sap.ui.getCore().getComponent(q);}return q;};
N.prototype._observeAvailableActionsChanges=function(q){var r;if(q.object.isA("sap.ui.comp.navpopover.NavigationContainer")){switch(q.name){case"availableActions":r=this._getInternalModel();var s=q.child?[q.child]:q.children;s.forEach(function(t){switch(q.mutation){case"insert":if(!t){return;}t.setHref(this._convertToExternal(t.getHref()));t.setPress(this._onLinkPress.bind(this));this._oAvailableActionsObserver.observe(t,{properties:["visible"]});r.setProperty("/initialAvailableActions/"+this.indexOfAvailableAction(t)+"/",t.getJson());r.setProperty("/availableActions/"+this.indexOfAvailableAction(t)+"/",t.getJson());break;case"remove":j.error("Deletion of AvailableActions is not supported");break;default:j.error("Mutation '"+q.mutation+"' is not supported jet.");}}.bind(this));break;default:j.error("The '"+q.name+"' of NavigationContainer is not supported yet.");}}else if(q.object.isA("sap.ui.comp.navpopover.LinkData")){switch(q.name){case"visible":var t=q.object;r=this._getInternalModel();var u=-1;r.getProperty("/availableActions").some(function(v,w){if(t.getKey()===v.key){u=w;return true;}});if(u<0){j.error("The available action with key '"+t.getKey()+"' does not exist in availableActions.");}if(t.getVisibleChangedByUser()){r.setProperty("/availableActions/"+u+"/visible",t.getVisible());}else{r.setProperty("/initialAvailableActions/"+u+"/visible",t.getVisible());r.setProperty("/availableActions/"+u+"/visible",t.getVisible());}break;default:j.error("The '"+q.name+"' of LinkData is not supported yet.");}}};
N.prototype._observeChanges=function(q){if((q.type==="property"||q.type==="binding")&&q.name==="visible"){var r=this._getInternalModel().getProperty("/availableActions");var s=r.filter(function(t){return t.visible===true;});this._oSeparator.setVisible(s.length>0||!!this._getInternalModel().getProperty("/enableAvailableActionsPersonalization"));this._oActionArea.setVisible(s.length>0);if(this.hasContent()&&!this._getInternalModel().getProperty("/extraContent")){this._oDefaultExtraConent.setVisible(false);}}};
N.prototype._getInternalModel=function(){return this.getModel("$sapuicompNavigationContainer");};
return N;});
sap.ui.predefine('sap/ui/comp/navpopover/NavigationPopover',['sap/m/Link','sap/m/ResponsivePopover','sap/m/Button','sap/m/Title','sap/m/Image','sap/m/Text','sap/m/VBox','sap/m/HBox','./Factory','./LinkData','sap/ui/model/json/JSONModel','sap/ui/base/ManagedObjectObserver','sap/m/FlexItemData','sap/ui/model/BindingMode','sap/ui/Device','sap/m/library','sap/base/Log'],function(L,R,B,T,I,a,V,H,F,b,J,M,c,d,D,l,e){"use strict";var P=l.PlacementType;var f=l.FlexJustifyContent;var g=l.ButtonType;
var N=R.extend("sap.ui.comp.navpopover.NavigationPopover",{
metadata:{library:"sap.ui.comp",properties:{semanticObjectName:{type:"string",group:"Misc",defaultValue:null},semanticAttributes:{type:"object",group:"Misc",defaultValue:null},appStateKey:{type:"string",group:"Misc",defaultValue:null},mainNavigationId:{type:"string",group:"Misc",defaultValue:null},availableActionsPersonalizationText:{type:"string",group:"Misc",defaultValue:undefined}},aggregations:{availableActions:{type:"sap.ui.comp.navpopover.LinkData",multiple:true,singularName:"availableAction"},mainNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData",multiple:false}},associations:{source:{type:"sap.ui.core.Control",multiple:false},extraContent:{type:"sap.ui.core.Control",multiple:false},component:{type:"sap.ui.core.Element",multiple:false}},events:{targetsObtained:{},navigate:{parameters:{text:{type:"string"},href:{type:"string"}}},availableActionsPersonalizationPress:{}}},
renderer:{apiVersion:2}
});
N.prototype.init=function(){R.prototype.init.call(this);var m=new J({mainNavigationLink:{title:undefined,subtitle:undefined,href:undefined,target:undefined},ownNavigation:undefined,availableActions:[],availableActionsPersonalizationText:undefined,extraContent:undefined});m.setDefaultBindingMode(d.TwoWay);m.setSizeLimit(1000);this.setModel(m,"$sapuicompNavigationPopover");this._bUseExternalContent=false;this.addStyleClass("navigationPopover");this.setContentWidth("380px");this.setHorizontalScrolling(false);this.setShowHeader(D.system.phone);this.setPlacement(P.Auto);this._oObserver=null;};
N.prototype.applySettings=function(s){if(s&&s.customData&&s.customData.getProperty("key")==="useExternalContent"){this._bUseExternalContent=true;}this._createContent();R.prototype.applySettings.apply(this,arguments);};
N.prototype.exit=function(C){if(this._getInternalModel()){this._getInternalModel().destroy();}if(this._oObserver){this._oObserver.disconnect();this._oObserver=null;}R.prototype.exit.apply(this,arguments);};
N.prototype.retrieveNavTargets=function(){var x=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!x||!u){e.error("Service 'CrossApplicationNavigation' could not be obtained");this.fireTargetsObtained();return;}var t=this;this.setMainNavigation(null);this.setOwnNavigation(null);this.removeAllAvailableActions();var p=x.getLinks({semanticObject:this.getSemanticObjectName(),params:this.getSemanticAttributes(),appStateKey:this.getAppStateKey(),ui5Component:this._getComponent(),sortResultOnTexts:true});p.done(function(h){if(!h||!h.length){t.fireTargetsObtained();return;}var C=x.hrefForExternal();if(C&&C.indexOf("?")!==-1){C=C.split("?")[0];}h.forEach(function(o){if(o.intent.indexOf(C)===0){t.setOwnNavigation(new b({href:o.intent,text:o.text}));return;}var s=u.parseShellHash(o.intent);if(s.action&&(s.action==='displayFactSheet')){t.setMainNavigation(new b({href:o.intent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_FACTSHEET")}));return;}t.addAvailableAction(new b({href:o.intent,text:o.text}));});t.fireTargetsObtained();});p.fail(function(){e.error("'retrieveNavTargets' failed");});};
N.prototype.show=function(o){var C=o||this._getControl();if(!C){e.error("no source assigned");return;}this.openBy(C);};
N.prototype.getDirectLink=function(){if(this._bUseExternalContent){return this.getContent()[0].getDirectLink();}var m=this._getInternalModel();if(m.getProperty('/extraContent')){return null;}if(m.getProperty('/mainNavigationLink/href')&&!m.getProperty('/availableActions').length){return this._oHeaderArea.getItems()[0];}if(m.getProperty('/availableActions').length===1&&!m.getProperty('/mainNavigationLink/href')){return this._oActionArea.getItems()[0].getItems()[0];}return null;};
N.prototype.hasContent=function(){if(this._bUseExternalContent){return this.getContent()[0].hasContent();}var m=this._getInternalModel();return!!m.getProperty("/mainNavigationLink/href")||!!m.getProperty("/availableActions").length||!!m.getProperty('/extraContent');};
N.prototype.setMainNavigationId=function(m){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setProperty("mainNavigationId",m,true);var o=this._getInternalModel();if(typeof m==="string"){o.setProperty("/mainNavigationLink/title",m);}return this;};
N.prototype.setAvailableActionsPersonalizationText=function(A){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setProperty("availableActionsPersonalizationText",A,true);var m=this._getInternalModel();m.setProperty("/availableActionsPersonalizationText",A);return this;};
N.prototype.setExtraContent=function(C){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var m=this._getInternalModel();if(m.getProperty("/extraContent")){this._getContentContainer().removeItem(1);}if(typeof C==="string"){C=sap.ui.getCore().byId(C);}this._getContentContainer().insertItem(C,1);this.setAssociation("extraContent",C);m.setProperty("/extraContent",C);return this;};
N.prototype.setMainNavigation=function(o){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.setAggregation("mainNavigation",o,true);if(!o){return this;}var m=this._getInternalModel();if(o.getHref()){m.setProperty("/mainNavigationLink/href",this._convertToExternal(o.getHref()));m.setProperty("/mainNavigationLink/target",o.getTarget());}if(!m.getProperty("/mainNavigationLink/title")&&m.getProperty("/mainNavigationLink/title")!==''){m.setProperty("/mainNavigationLink/title",o.getText());}m.setProperty("/mainNavigationLink/subtitle",o.getDescription());return this;};
N.prototype.addAvailableAction=function(o){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.addAggregation("availableActions",o);if(!o){return this;}o.setHref(this._convertToExternal(o.getHref()));o.setPress(this._onLinkPress.bind(this));var m=this._getInternalModel();m.setProperty("/availableActions/"+this.indexOfAvailableAction(o)+"/",o.getJson());return this;};
N.prototype.insertAvailableAction=function(o,i){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}this.insertAggregation("availableActions",o,i);if(!o){return this;}o.setHref(this._convertToExternal(o.getHref()));o.setPress(this._onLinkPress.bind(this));var m=this._getInternalModel();m.setProperty("/availableActions/"+i+"/",o.getJson());return this;};
N.prototype.removeAvailableAction=function(o){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var i=this.indexOfAvailableAction(o);if(i>-1){var m=this._getInternalModel();m.getData().availableActions.splice(i,1);m.refresh(true);}o=this.removeAggregation("availableActions",o);return o;};
N.prototype.removeAllAvailableActions=function(){if(this._bUseExternalContent){throw"The API should not be used in case that the external content has been set";}var A=this.removeAllAggregation("availableActions");var m=this._getInternalModel();m.setProperty("/availableActions",[]);m.refresh(true);return A;};
N.prototype.onAfterRenderingActionForm=function(){var m=this._getInternalModel();var C=m.getProperty("/extraContent")?m.getProperty("/extraContent").$()[0]:undefined;if(C&&C.scrollHeight>C.clientHeight){this._getContentContainer().setFitContainer(false).setJustifyContent(f.Start);}};
N.prototype._createContent=function(){if(this._bUseExternalContent){return;}var t=this;var o=new L({href:{path:'/mainNavigationLink/href'},text:{path:'/mainNavigationLink/title'},target:{path:'/mainNavigationLink/target'},visible:{path:'/mainNavigationLink/title',formatter:function(h){return!!h;}},enabled:{path:'/mainNavigationLink/href',formatter:function(v){return!!v;}},press:this._onLinkPress.bind(this)});o.addStyleClass("navigationPopoverTitle");var s=new a({text:{path:'/mainNavigationLink/subtitle'},visible:{path:'/mainNavigationLink/subtitle',formatter:function(v){return!!v;}}});this._oHeaderArea=new V({items:[o,s],visible:{path:'/mainNavigationLink/title',formatter:function(h){return!!h;}}});this._oHeaderArea.addStyleClass("navigationPopoverTitleH1");this._oHeaderArea.addStyleClass("navigationPopoverHeader");this._oHeaderArea.setModel(this._getInternalModel());this._oObserver=new M(function(h){if(h.type==="property"&&h.name==="visible"){var m=this._getInternalModel().getProperty("/availableActions").filter(function(i){return i.visible===true;});S.setVisible(m.length>0||this._getInternalModel().getProperty("/enableAvailableActionsPersonalization"));this._oActionArea.setVisible(m.length>0);}}.bind(this));var S=new V();S.setModel(this._getInternalModel());S.addStyleClass("navigationPopoverSeparator");this._oActionArea=new V({items:{path:'/availableActions',templateShareable:false,factory:function(i,h){var j=new L({visible:"{visible}",text:"{text}",href:"{href}",target:"{target}",press:h.getProperty("press")});this._oObserver.observe(j,{properties:["visible"]});return new V({visible:"{visible}",layoutData:new c({styleClass:h.getProperty("description")?"navigationPopoverAvailableLinkGroup":"navigationPopoverAvailableLinkWithoutGroup"}),items:[j,new a({visible:"{visible}",text:"{description}"})]});}.bind(this)}});this._oActionArea.addEventDelegate({onAfterRendering:this.onAfterRenderingActionForm.bind(this)});this._oActionArea.addStyleClass("navigationPopoverAvailableLinks");this._oActionArea.setModel(this._getInternalModel());this._oPersonalizationButton=new H({visible:{parts:[{path:'/enableAvailableActionsPersonalization'}],formatter:function(E){return!!E;}},justifyContent:"End",items:new B({type:g.Transparent,text:{path:'/availableActionsPersonalizationText'},press:function(){t.fireAvailableActionsPersonalizationPress();}})});this._oPersonalizationButton.setModel(this._getInternalModel());this._oPersonalizationButton.addStyleClass("navigationPopoverPersonalizationButton");var C=new V({fitContainer:true,justifyContent:f.Start,items:[this._oHeaderArea]});if(this._getInternalModel().getProperty("/extraContent")){C.addItem(this._getInternalModel().getProperty("/extraContent"));}C.addItem(S).addItem(this._oActionArea).addItem(this._oPersonalizationButton);this.addContent(C);};
N.prototype._onLinkPress=function(E){this.fireNavigate({text:E.getSource().getText(),href:E.getSource().getHref()});};
N.prototype._convertToExternal=function(h){var x=F.getService("CrossApplicationNavigation");if(!x){return h;}return x.hrefForExternal({target:{shellHash:h}},this._getComponent());};
N.prototype._getControl=function(){var C=this.getAssociation("source");if(typeof C==="string"){C=sap.ui.getCore().byId(C);}return C;};
N.prototype._getComponent=function(){var C=this.getComponent();if(typeof C==="string"){C=sap.ui.getCore().getComponent(C);}return C;};
N.prototype._getContentContainer=function(){return this.getContent()[0];};
N.prototype._getInternalModel=function(){return this.getModel("$sapuicompNavigationPopover");};
return N;});
sap.ui.predefine('sap/ui/comp/navpopover/NavigationPopoverHandler',['sap/ui/thirdparty/jquery','sap/ui/comp/library','sap/ui/base/ManagedObject','./SemanticObjectController','sap/ui/model/json/JSONModel','sap/ui/model/BindingMode','sap/ui/core/Control','./Factory','./NavigationPopover','./Util','sap/m/VBox','./LinkData','sap/m/MessageBox','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/Util','./NavigationContainer','./ContactDetailsController','./Log','sap/ui/core/InvisibleText','sap/ui/core/CustomData','sap/base/Log','sap/base/util/isPlainObject','sap/ui/core/Component',"sap/base/util/merge"],function(q,C,M,S,J,B,a,F,N,U,V,L,b,c,P,d,e,f,I,g,h,i,j,m){"use strict";
var k=M.extend("sap.ui.comp.navpopover.NavigationPopoverHandler",{metadata:{library:"sap.ui.comp",properties:{semanticObject:{type:"string",defaultValue:null},additionalSemanticObjects:{type:"string[]",defaultValue:[]},semanticObjectController:{type:"any",defaultValue:null},fieldName:{type:"string",defaultValue:null},semanticObjectLabel:{type:"string",defaultValue:null},mapFieldToSemanticObject:{type:"boolean",defaultValue:true},contactAnnotationPath:{type:"string",defaultValue:undefined},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true},beforeNavigationCallback:{type:"function"}},aggregations:{_popover:{type:"sap.ui.comp.navpopover.NavigationPopover",multiple:false,visibility:"hidden"}},associations:{control:{type:"sap.ui.core.Control",multiple:false}},events:{beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},innerNavigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}}}}});
k.prototype.init=function(){this._oPopover=null;this._oContactDetailsController=new e();var o=new J({semanticObject:undefined,semanticAttributes:undefined,appStateKey:undefined,mainNavigationId:undefined,navigationTarget:{mainNavigation:undefined,enableAvailableActionsPersonalization:undefined,extraContent:undefined},availableActions:[]});o.setDefaultBindingMode(B.TwoWay);o.setSizeLimit(1000);this.setModel(o,"$sapuicompNavigationPopoverHandler");this._oLog=h.getLevel()>=h.Level.INFO?new f():undefined;};
k.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._setSemanticAttributes(this._calculateSemanticAttributes(null));};
k.prototype.openPopover=function(D){var t=this;return this._getPopover().then(function(p){var l=p.getDirectLink();if(l){t._fireInnerNavigate({text:l.getText(),href:l.getHref()});window.location.href=l.getHref();t._destroyPopover();return;}p.show(D);});};
k.prototype.getSemanticObjectValue=function(){var s=this._getSemanticAttributes();if(s){return s[this.getSemanticObject()][this.getSemanticObject()];}return undefined;};
k.prototype.getNavigationPopoverStableId=function(){var o=sap.ui.getCore().byId(this.getControl());if(!o){h.error("NavigationPopoverHandler: Stable ID could not be determined because the control is undefined");return undefined;}var A=this._getComponent(o);if(!A){h.error("NavigationPopoverHandler: Stable ID could not be determined because the app component is not defined for control '"+o.getId()+"'");return undefined;}var s=this.getModel("$sapuicompNavigationPopoverHandler").getProperty("/semanticObject");if(!s){h.error("NavigationPopoverHandler: Stable ID could not be determined because no default semantic object is defined");return undefined;}var l=[s].concat(this.getAdditionalSemanticObjects());U.sortArrayAlphabetical(l);var n=l.join("--");return A.createId("sapuicompnavpopoverNavigationPopover---"+n);};
k.prototype.updateBindingContext=function(){var o=this.getBindingContext("$sapuicompNavigationPopoverHandler");a.prototype.updateBindingContext.apply(this,arguments);var l=this.getBindingContext("$sapuicompNavigationPopoverHandler");if(l&&l!==o){this._setSemanticAttributes(this._calculateSemanticAttributes(null));this._destroyPopover();}};
k.prototype.setSemanticObject=function(s){this._destroyPopover();this.setProperty("semanticObject",s);this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/semanticObject",s);this._setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
k.prototype._setSemanticAttributes=function(s){this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/semanticAttributes",s);};
k.prototype._getSemanticAttributes=function(){return this.getModel("$sapuicompNavigationPopoverHandler").getProperty("/semanticAttributes");};
k.prototype.setEnableAvailableActionsPersonalization=function(E){this.setProperty("enableAvailableActionsPersonalization",E);this.getModel("$sapuicompNavigationPopoverHandler").setProperty("/navigationTarget/enableAvailableActionsPersonalization",E);return this;};
k.prototype.setFieldName=function(s){this.setProperty("fieldName",s);this._setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
k.prototype.setControl=function(o){this.setAssociation("control",o);this.setModel(o.getModel());this._destroyPopover();this._updateSemanticObjectController();this._setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
k.prototype.setMapFieldToSemanticObject=function(l){this.setProperty("mapFieldToSemanticObject",l);this._setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
k.prototype.setSemanticObjectController=function(s){this._updateSemanticObjectController(s);this._setSemanticAttributes(this._calculateSemanticAttributes(null));return this;};
k.prototype.exit=function(){this._oContactDetailsController.destroy();this._destroyPopover();if(this.getSemanticObjectController()){this.getSemanticObjectController().unregisterControl(this);}if(this.getModel("$sapuicompNavigationPopoverHandler")){this.getModel("$sapuicompNavigationPopoverHandler").destroy();}};
k.prototype._initModel=function(){var t=this;var s;var l=this.getSemanticObject();var A=this.getAdditionalSemanticObjects();var n=U.getContactAnnotationPath(this,this.getSemanticObjectController());var o=sap.ui.getCore().byId(this.getControl());if(!o){h.error("sap.ui.comp.navpopover.NavigationPopoverHandler: No control provided, popover cannot be attached.");}var p=o&&o.getBindingContext()?o.getBindingContext().getPath():null;if(!p){h.warning("sap.ui.comp.navpopover.NavigationPopoverHandler: Binding Context is null. Please be aware that without binding context no semantic attributes can be calculated. Without semantic attributes no URL parameters can be created.");}var O=this.getModel();var r=this._getComponent(o);var u=o&&o.getId();var v,w,x;if(this._oLog){this._oLog.reset();}return sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){return U.retrieveSemanticObjectMapping(t.getFieldName(),O,p);}).then(function(y){t._setSemanticAttributes(t._calculateSemanticAttributes(y,t._oLog));s=t._getSemanticAttributes();return t._fireBeforePopoverOpens(s,l,u,t._oLog);}).then(function(R){s=R.semanticAttributes;t._setSemanticAttributes(s);w=t.getSemanticObjectValue();v=(o&&o._getTextOfDom&&o._getTextOfDom())||t.getSemanticObjectValue();t.getModel("$sapuicompNavigationPopoverHandler").setProperty("/appStateKey",R.appStateKey);return U.retrieveNavigationTargets(l,A,R.appStateKey,r,s,v,t.getFieldName(),O,p,t._oLog);}).then(function(T){x=T;t._oContactDetailsController.setModel(O);return t._oContactDetailsController.getBindingPath4ContactAnnotation(p,n,w);}).then(function(y){var z=t._oContactDetailsController.getContactDetailsContainers(y);return t._fireNavigationTargetsObtained(v,l,s,u,z,x,t._oLog);}).then(function(R){if(R.mainNavigation&&!R.mainNavigation.getDescription()){R.mainNavigation.setDescription(t.getSemanticObjectLabel());}var y=t.getModel("$sapuicompNavigationPopoverHandler");y.setProperty("/mainNavigationId",R.mainNavigationId);y.setProperty("/navigationTarget/mainNavigation",R.mainNavigation);y.setProperty("/navigationTarget/extraContent",R.extraContent);y.setProperty("/availableActions",t._updateVisibilityOfAvailableActions(L.convert2Json(R.availableActions)));y.setProperty("/navigationTarget/enableAvailableActionsPersonalization",t._getEnableAvailableActionsPersonalization(y.getProperty("/availableActions")));if(h.getLevel()>=h.Level.TRACE){h.info("sap.ui.comp.NavigationPopoverHandler: calculation of semantic attributes\n---------------------------------------------\nBelow you can see detailed information regarding semantic attributes which have been calculated for one or more semantic objects defined in a SmartLink control. Semantic attributes are used to create the URL parameters. Additionally you can see all links containing the URL parameters.\n"+t._getLogFormattedText());}});};
k.prototype._initPopover=function(){var t=this;return this._initModel().then(function(){var o=t.getModel("$sapuicompNavigationPopoverHandler");var p=t._createPopover();p.setModel(o,"$sapuicompNavigationPopoverHandler");var l=sap.ui.getCore().byId(t.getControl());if(l){l.addDependent(p);}return p;});};
k.prototype._initNavigationContainer=function(){var t=this;return this._initModel().then(function(){var o=t.getModel("$sapuicompNavigationPopoverHandler");var n=t._createNavigationContainer();n.setModel(o,"$sapuicompNavigationPopoverHandler");var l=sap.ui.getCore().byId(t.getControl());if(l){l.addDependent(n);}return n;});};
k.prototype._getPopover=function(){if(!this._oPopover){return this._initPopover();}else{return Promise.resolve(this._oPopover);}};
k.prototype._getNavigationContainer=function(){return this._initNavigationContainer().then(function(n){return n;});};
k.prototype._destroyPopover=function(){if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
k.prototype._createPopover=function(){if(this._oPopover){return this._oPopover;}var n=this._createNavigationContainer();var o=new I({text:"{$sapuicompNavigationPopoverHandler>/mainNavigationId}"});this._oPopover=new N({customData:new g({key:"useExternalContent"}),content:[n,o],ariaLabelledBy:o,semanticObjectName:"{$sapuicompNavigationPopoverHandler>/semanticObject}",semanticAttributes:"{$sapuicompNavigationPopoverHandler>/semanticAttributes}",appStateKey:"{$sapuicompNavigationPopoverHandler>/appStateKey}",source:this.getControl(),beforeClose:function(){this.removeAllContent().forEach(function(l){l.destroy();});},afterClose:this._destroyPopover.bind(this)});this.setAggregation("_popover",this._oPopover);return this._oPopover;};
k.prototype._createNavigationContainer=function(){var s=this.getNavigationPopoverStableId();if(!s){h.error("NavigationPopoverHandler: Due to undefined stable ID the button of action personalization is set to disabled");}if(sap.ui.getCore().byId(s)){h.error("Duplicate ID '"+s+"'. The instance of NavigationContainer should be destroyed first in order to avoid duplicate creation of NavigationContainer with stable ID.");throw"Duplicate ID";}var o=this.getModel("$sapuicompNavigationPopoverHandler");return new d(s,{mainNavigationId:"{$sapuicompNavigationPopoverHandler>/mainNavigationId}",mainNavigation:o.getProperty("/navigationTarget/mainNavigation"),availableActions:{path:'$sapuicompNavigationPopoverHandler>/availableActions',templateShareable:false,template:new L({key:"{$sapuicompNavigationPopoverHandler>key}",href:"{$sapuicompNavigationPopoverHandler>href}",text:"{$sapuicompNavigationPopoverHandler>text}",target:"{$sapuicompNavigationPopoverHandler>target}",description:"{$sapuicompNavigationPopoverHandler>description}",visible:"{$sapuicompNavigationPopoverHandler>visible}"})},extraContent:o.getProperty("/navigationTarget/extraContent")?o.getProperty("/navigationTarget/extraContent").getId():undefined,component:this._getComponent(sap.ui.getCore().byId(this.getControl())),enableAvailableActionsPersonalization:"{$sapuicompNavigationPopoverHandler>/navigationTarget/enableAvailableActionsPersonalization}",beforePopoverOpen:function(){if(this._oPopover){this._oPopover.setModal(true);}}.bind(this),afterPopoverClose:function(){if(this._oPopover){this._oPopover.setModal(false);}}.bind(this),navigate:this._onNavigate.bind(this),control:this.getControl()});};
k.prototype._fireBeforePopoverOpens=function(s,l,n,o){var t=this;return new Promise(function(r){var R={semanticAttributes:s,appStateKey:undefined};if(!t.hasListeners("beforePopoverOpens")){r(R);return;}var E=function(s){var p=Object.keys(s).filter(function(u){return!q.isEmptyObject(s[u]);});return!!p.length;};t.fireBeforePopoverOpens({originalId:n,semanticObject:l,semanticAttributes:!q.isEmptyObject(s[l])?s[l]:null,semanticAttributesOfSemanticObjects:E(s)?s:null,setSemanticAttributes:function(s,p){p=p||l;R.semanticAttributes=R.semanticAttributes||{};if(o){o.updateSemanticObjectAttributes(p,R.semanticAttributes[p],s);}R.semanticAttributes[p]=s;},setAppStateKey:function(A){R.appStateKey=A;},open:function(){return r(R);}});});};
k.prototype._fireNavigationTargetsObtained=function(s,l,o,n,p,r,t){var u=this;return new Promise(function(v){var R={mainNavigationId:s,mainNavigation:r.mainNavigation,availableActions:r.availableActions,ownNavigation:r.ownNavigation,extraContent:p.length?new V({items:p}):undefined};if(!u.hasListeners("navigationTargetsObtained")){v(R);return;}u.fireNavigationTargetsObtained({mainNavigation:r.mainNavigation,actions:r.availableActions,ownNavigation:r.ownNavigation,popoverForms:p,semanticObject:l,semanticAttributes:o?o[l]:o,originalId:n,show:function(s,w,A,x){if(arguments.length>0&&!(typeof s==="string"||w instanceof L||Array.isArray(A))&&x===undefined){x=A;A=w;w=s;s=undefined;}if(s!==undefined&&s!==null){R.mainNavigationId=s;}if(w!==undefined){R.mainNavigation=w;if(t&&w){t.addIntent({text:w.getText(),intent:w.getHref()});}}if(A){A.forEach(function(y){if(y.getKey()===undefined){h.error("'key' attribute of 'availableAction' '"+y.getText()+"' is undefined. Links without 'key' can not be persisted.");h.warning("The 'visible' attribute of 'availableAction' '"+y.getText()+"' is set to 'true'");y.setVisible(true);}if(t&&y){t.addIntent({text:y.getText(),intent:y.getHref()});}});R.availableActions=A;}if(x){R.extraContent=x;}return v(R);}});});};
k.prototype._onNavigate=function(E){var p=E.getParameters();this._fireInnerNavigate({text:p.text,href:p.href});};
k.prototype._fireInnerNavigate=function(p){var o=sap.ui.getCore().byId(this.getControl());var s=this.getSemanticObject();var l=this._getSemanticAttributes();var n={text:p.text,href:p.href,originalId:o?o.getId():undefined,semanticObject:s,semanticAttributes:l?l[s]:l};if(this.getBeforeNavigationCallback()){this.getBeforeNavigationCallback()(m({},n)).then(function(r){if(r===true){this.fireInnerNavigate(n);window.location.href=p.href;}}.bind(this));}else{this.fireInnerNavigate(n);}};
k.prototype._getComponent=function(o){if(!o){return null;}var p=o.getParent();while(p){if(p instanceof j){if(p&&p.getAppComponent){p=p.getAppComponent();}return p;}p=p.getParent();}return j.get(j.getOwnerIdFor(o));};
k.prototype.getAppComponent=function(){return this._getComponent(sap.ui.getCore().byId(this.getControl()));};
k.prototype._getBindingContextObject=function(){var o=sap.ui.getCore().byId(this.getControl());var l=this.getBindingContext()||(o&&o.getBindingContext());return l?l.getObject(l.getPath()):null;};
k.prototype._getLogFormattedText=function(){return this._oLog?this._oLog.getFormattedText():"No logging data available";};
k.prototype._calculateSemanticAttributes=function(s,l){var o=this._getBindingContextObject();var n=this.getFieldName();var t=this;var p=["",this.getSemanticObject()].concat(this.getAdditionalSemanticObjects());var r={};p.forEach(function(u){r[u]={};var v=t._getMappingRules(u,s,o);for(var A in o){var w=null,T=null;if(l&&u){w={transformations:[]};l.addSemanticObjectAttribute(u,A,w);}if(o[A]===undefined||o[A]===null){if(w){w.transformations.push({value:o[A],description:"\u2139 Undefined and null values have been removed in NavigationPopoverHandler."});}continue;}if(i(o[A])){if(w){w.transformations.push({value:o[A],description:"\u2139 Plain objects has been removed in NavigationPopoverHandler."});}continue;}var x=v[A];if(w&&A!==x){T=s?{value:undefined,description:"\u2139 The attribute "+A+" has been renamed to "+x+" in NavigationPopoverHandler.",reason:"\ud83d\udd34 A com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation is defined for semantic object "+u+" with source attribute "+A+" and target attribute "+x+". You can modify the annotation if the mapping result is not what you expected."}:{value:undefined,description:"\u2139 The attribute "+A+" has been renamed to "+x+" in NavigationPopoverHandler.",reason:"\ud83d\udd34 The property mapFieldToSemanticObject is set to true. Attribute "+A+" is mapped to "+x+". (semantic object is "+t.getSemanticObject()+", field name is "+t.getFieldName()+"). If this is not what you expected, you can set the property to false or define a com.sap.vocabularies.Common.v1.SemanticObjectMapping annotation."};}var y=o[A];if(r[u][x]){if(o[n]){if(x===v[t.getFieldName()]){y=o[n];}else{h.error("The attribute "+A+" can not be renamed to the attribute "+x+" due to a clash situation. This can lead to wrong navigation later on.");}}}r[u][x]=y;if(w){w.transformations.push({value:o[A],description:"\u2139 The attribute "+A+" with the value "+o[A]+" is taken from the binding context in NavigationPopoverHandler."});if(T){w.transformations.push(T);l.addSemanticObjectAttribute(u,x,{transformations:[{value:y,description:"\u2139 The attribute "+x+" with the value "+y+" has been added due to a mapping rule regarding the attribute "+A+" in NavigationPopoverHandler."}]});}}}});return r;};
k.prototype._getMappingRules=function(s,o,l){var n=this.getMapFieldToSemanticObject();if(this.getSemanticObjectController()&&this.getSemanticObjectController().getMapFieldToSemanticObject()!==undefined){n=this.getSemanticObjectController().getMapFieldToSemanticObject();}var A;var p={};if(o){for(A in o[s]){if(typeof o[s][A]==="string"){p[A]=o[s][A];}}}else if(n){if(this.getSemanticObjectController()){var r=this.getSemanticObjectController().getFieldSemanticObjectMap();for(A in r){p[A]=r[A];}}if(this.getFieldName()&&this.getSemanticObject()){p[this.getFieldName()]=this.getSemanticObject();}}for(A in l){if(!p.hasOwnProperty(A)){p[A]=A;}}return p;};
k.prototype._updateSemanticObjectController=function(o){var l=this.getProperty("semanticObjectController");var n=sap.ui.getCore().byId(this.getControl());o=o||this.getSemanticObjectController()||this._getSemanticObjectControllerOfControl(n);if(o&&n&&o.isControlRegistered(n)){o.unregisterControl(this);}if(o!==l&&l){l.unregisterControl(this);}this.setProperty("semanticObjectController",o);if(o&&!o.isControlRegistered(n)){o.registerControl(this);}};
k.prototype._getSemanticObjectControllerOfControl=function(o){if(!o){return undefined;}var s;var p=o.getParent();while(p){if(p.getSemanticObjectController){s=p.getSemanticObjectController();if(s){this.setSemanticObjectController(s);break;}}p=p.getParent();}return s;};
k.prototype._updateVisibilityOfAvailableActions=function(l){if(!this._getEnableAvailableActionsPersonalization(l)){return l;}var n=U.getStorableAvailableActions(l);var H=n.some(function(o){return!!o.isSuperiorAction;});n.forEach(function(o){if(l.length>10){o.visible=false;}if(H){o.visible=false;}if(o.isSuperiorAction){o.visible=true;}});if(l.every(function(o){return!o.visible;})){if(l[0]){l[0].visible=true;}if(l[1]){l[1].visible=true;}if(l[2]){l[2].visible=true;}}return l;};
k.prototype._getEnableAvailableActionsPersonalization=function(l){var n=U.getStorableAvailableActions(l);if(n.length===0){return false;}var E=this.getEnableAvailableActionsPersonalization();if(this.getSemanticObjectController()&&this.getSemanticObjectController().getEnableAvailableActionsPersonalization()&&this.getSemanticObjectController().getEnableAvailableActionsPersonalization()[this.getFieldName()]!==undefined){E=this.getSemanticObjectController().getEnableAvailableActionsPersonalization()[this.getFieldName()];}return E;};
return k;});
sap.ui.predefine('sap/ui/comp/navpopover/RTAHandler',['sap/ui/comp/library','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/Util','./Util','sap/ui/comp/navpopover/flexibility/changes/AddLink','sap/ui/comp/navpopover/flexibility/changes/RemoveLink','./Factory'],function(C,a,P,U,A,R,F){"use strict";var b=C.navpopover.ChangeHandlerType;var c={};
c.isSettingsAvailable=function(){return!!F.getService("CrossApplicationNavigation");};
c.getStableElements=function(n){if(!n||!(n.isA("sap.ui.comp.navpopover.NavigationPopoverHandler"))){return null;}var s=n.getNavigationPopoverStableId();if(!s){return null;}var o=n.getAppComponent();if(!o){return null;}return[{id:s,appComponent:o}];};
c.execute=function(n,g,r){return new Promise(function(d,e){if(!n||!(n.isA("sap.ui.comp.navpopover.NavigationPopoverHandler"))){e(new Error("oNavigationPopoverHandler is not of supported type sap.ui.comp.navpopover.NavigationPopoverHandler"));return;}if(!n.getNavigationPopoverStableId()){e(new Error("StableId is not defined. SemanticObject="+n.getSemanticObject()));return;}var o=n.getAppComponent();if(!o){e(new Error("AppComponent is not defined. oControl="+n.getControl()));return;}n._getNavigationContainer().then(function(N){var m=[];var M=[];var f=function(h){var s=N.getId();m=h.filter(function(i){return i.visible===true;}).map(function(i){return{selectorControl:{id:s,controlType:"sap.ui.comp.navpopover.NavigationContainer",appComponent:o},changeSpecificData:{changeType:b.addLink,content:i}};});M=h.filter(function(i){return i.visible===false;}).map(function(i){return{selectorControl:{id:s,controlType:"sap.ui.comp.navpopover.NavigationContainer",appComponent:o},changeSpecificData:{changeType:b.removeLink,content:i}};});};N.openSelectionDialog(true,false,f,false,r,undefined).then(function(){N.destroy();d(m.concat(M));});});});};
return c;},true);
sap.ui.predefine('sap/ui/comp/navpopover/SemanticObjectController',['sap/ui/thirdparty/jquery','sap/ui/comp/library','sap/ui/core/Element','./Factory','sap/ui/model/json/JSONModel','sap/ui/comp/odata/MetadataAnalyser','sap/ui/model/BindingMode','sap/base/Log',"sap/base/util/merge"],function(q,l,E,F,J,M,B,L,m){"use strict";
var S=E.extend("sap.ui.comp.navpopover.SemanticObjectController",{metadata:{library:"sap.ui.comp",properties:{ignoredFields:{type:"string",group:"Misc",defaultValue:null},prefetchNavigationTargets:{type:"boolean",group:"Misc",defaultValue:false},fieldSemanticObjectMap:{type:"object",group:"Misc",defaultValue:null},entitySet:{type:"string",group:"Misc",defaultValue:null},contactAnnotationPaths:{type:"object",defaultValue:null},enableAvailableActionsPersonalization:{type:"object",defaultValue:null},mapFieldToSemanticObject:{type:"boolean"},forceLinkRendering:{type:"object",defaultValue:null},beforeNavigationCallback:{type:"function"}},events:{navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}},prefetchDone:{parameters:{semanticObjects:{type:"object"}}}}}});
S.oSemanticObjects={};S.oNavigationTargetActions={};S.bHasPrefetchedDistinctSemanticObjects=false;S.bHasPrefetchedNavigationTargetActions=false;S.oPromise=null;S.oPromiseActions=null;
S.prototype.init=function(){S.prefetchDistinctSemanticObjects();this._proxyOnBeforePopoverOpens=this._onBeforePopoverOpens.bind(this);this._proxyOnTargetsObtained=this._onTargetsObtained.bind(this);this._proxyOnNavigate=this._onNavigate.bind(this);this._aRegisteredControls=[];};
S.prototype.isControlRegistered=function(c){return this._aRegisteredControls.indexOf(c)>-1;};
S.prototype.registerControl=function(c){if(!c||!(c.isA("sap.ui.comp.navpopover.SmartLink")||c.isA("sap.ui.comp.navpopover.NavigationPopoverHandler"))){L.warning("sap.ui.comp.navpopover.SemanticObjectController: "+(c.getMetadata?c.getMetadata():"parameter")+" is neither of SmartLink nor of NavigationPopoverHandler instance");return;}if(this.isControlRegistered(c)){return;}if(c.attachBeforePopoverOpens){c.attachBeforePopoverOpens(this._proxyOnBeforePopoverOpens);}if(c.attachNavigationTargetsObtained){c.attachNavigationTargetsObtained(this._proxyOnTargetsObtained);}if(c.attachInnerNavigate){c.attachInnerNavigate(this._proxyOnNavigate);}this._aRegisteredControls.push(c);};
S.prototype.unregisterControl=function(c){if(!c){return;}if(!this.isControlRegistered(c)){return;}if(c.detachBeforePopoverOpens){c.detachBeforePopoverOpens(this._proxyOnBeforePopoverOpens);}if(c.detachNavigationTargetsObtained){c.detachNavigationTargetsObtained(this._proxyOnTargetsObtained);}if(c.detachInnerNavigate){c.detachInnerNavigate(this._proxyOnNavigate);}this._aRegisteredControls.splice(this._aRegisteredControls.indexOf(c),1);};
S.prototype.setEnableAvailableActionsPersonalization=function(e){this.setProperty("enableAvailableActionsPersonalization",e,true);return this;};
S.prototype._onBeforePopoverOpens=function(e){var p=e.getParameters();if(this.hasListeners("beforePopoverOpens")){this.fireBeforePopoverOpens({semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,semanticAttributesOfSemanticObjects:p.semanticAttributesOfSemanticObjects,setSemanticAttributes:p.setSemanticAttributes,setAppStateKey:p.setAppStateKey,originalId:p.originalId,open:p.open});}else{p.open();}};
S.prototype._onTargetsObtained=function(e){var p=e.getParameters();if(!this.hasListeners("navigationTargetsObtained")){p.show();return;}this.fireNavigationTargetsObtained({mainNavigation:p.mainNavigation,actions:p.actions,ownNavigation:p.ownNavigation,popoverForms:p.popoverForms,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,originalId:p.originalId,show:p.show});};
S.prototype._onNavigate=function(e){var p=e.getParameters();var n={text:p.text,href:p.href,originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes};if(this.getBeforeNavigationCallback()&&!e.getSource().getBeforeNavigationCallback()){this.getBeforeNavigationCallback()(m({},n)).then(function(N){if(N===true){this.fireNavigate(n);window.location.href=p.href;}}.bind(this));}else{this.fireNavigate(n);}};
S.prototype.setIgnoredState=function(s){if(s&&s.isA("sap.ui.comp.navpopover.SmartLink")){s._updateEnabled();}};
S.prototype.setIgnoredFields=function(i){this.setProperty("ignoredFields",i);this._aRegisteredControls.forEach(function(r){if(r._updateEnabled){r._updateEnabled();}});return this;};
S.prototype.setPrefetchNavigationTargets=function(p){this.setProperty("prefetchNavigationTargets",p);if(p!==true){return this;}L.error("sap.ui.comp.navpopover.SemanticObjectController: Please be aware that in case of a large amount of semantic objects the performance may suffer significantly and the received links will be created out of context");var t=this;S.getDistinctSemanticObjects().then(function(s){S.getNavigationTargetActions(s).then(function(n){t.firePrefetchDone({semanticObjects:n});});});return this;};
S.prototype.getFieldSemanticObjectMap=function(){var o=this.getProperty("fieldSemanticObjectMap");if(o){return o;}if(!this.getEntitySet()){L.warning("sap.ui.comp.navpopover.SemanticObjectController: FieldSemanticObjectMap is not set on SemanticObjectController, retrieval without EntitySet not possible");return null;}var a=new M(this.getModel());o=a.getFieldSemanticObjectMap(this.getEntitySet());if(o){this.setProperty("fieldSemanticObjectMap",o,true);}return o;};
S.prototype.getEntitySet=function(){var e=this.getProperty("entitySet");if(e){return e;}var p=this.getParent();while(p){if(p.getEntitySet){e=p.getEntitySet();if(e){this.setProperty("entitySet",e,true);break;}}p=p.getParent();}return e;};
S.prototype.hasSemanticObjectLinks=function(s){return S.hasDistinctSemanticObject([s],S.oSemanticObjects);};
S.prefetchDistinctSemanticObjects=function(){S.getJSONModel();if(!S.bHasPrefetchedDistinctSemanticObjects){S.getDistinctSemanticObjects();}};
S.getDistinctSemanticObjects=function(){if(S.bHasPrefetchedDistinctSemanticObjects){return Promise.resolve(S.oSemanticObjects);}if(!S.oPromise){S.oPromise=new Promise(function(r){var c=F.getService("CrossApplicationNavigation");if(!c){L.error("sap.ui.comp.navpopover.SemanticObjectController: Service 'CrossApplicationNavigation' could not be obtained");S.bHasPrefetchedDistinctSemanticObjects=true;r({});return;}c.getDistinctSemanticObjects().then(function(s){s.forEach(function(a){S.oSemanticObjects[a]={};});var o=S.getJSONModel();o.setProperty("/distinctSemanticObjects",S.oSemanticObjects);S.bHasPrefetchedDistinctSemanticObjects=true;return r(S.oSemanticObjects);},function(){L.error("sap.ui.comp.navpopover.SemanticObjectController: getDistinctSemanticObjects() of service 'CrossApplicationNavigation' failed");S.bHasPrefetchedDistinctSemanticObjects=true;return r({});});});}return S.oPromise;};
S.getNavigationTargetActions=function(s){if(S.bHasPrefetchedNavigationTargetActions){return Promise.resolve(S.oNavigationTargetActions);}if(!S.oPromiseLinks){S.oPromiseLinks=new Promise(function(r){var c=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!c||!u){L.error("sap.ui.comp.navpopover.SemanticObjectController: Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");S.bHasPrefetchedNavigationTargetActions=true;r({});return;}var a=Object.keys(s);var p=a.map(function(b){return[{semanticObject:b}];});c.getLinks(p).then(function(b){a.forEach(function(d,i){S.oNavigationTargetActions[d]=[];b[i][0].forEach(function(e){var f=u.parseShellHash(e.intent);if(f&&f.semanticObject===d){S.oNavigationTargetActions[d].push(f.action);}});});var o=S.getJSONModel();o.setProperty("/navigationTargetActions",S.oNavigationTargetActions);S.bHasPrefetchedNavigationTargetActions=true;return r(S.oNavigationTargetActions);},function(){L.error("sap.ui.comp.navpopover.SemanticObjectController: getLinks() of service 'CrossApplicationNavigation' failed");S.bHasPrefetchedNavigationTargetActions=true;return r({});});});}return S.oPromiseLinks;};
S.hasDistinctSemanticObject=function(s,o){return s.some(function(a){return!!o[a];});};
S.getJSONModel=function(){var o=sap.ui.getCore().getModel("$sapuicompSemanticObjectController_DistinctSemanticObjects");if(o&&!q.isEmptyObject(o.getData())){return o;}o=new J({distinctSemanticObjects:{}});o.setDefaultBindingMode(B.OneTime);o.setSizeLimit(1000);sap.ui.getCore().setModel(o,"$sapuicompSemanticObjectController_DistinctSemanticObjects");return o;};
S.destroyDistinctSemanticObjects=function(){S.oSemanticObjects={};S.oNavigationTargetActions={};S.oPromise=null;S.oPromiseActions=null;S.bHasPrefetchedDistinctSemanticObjects=false;S.bHasPrefetchedNavigationTargetActions=false;var o=sap.ui.getCore().getModel("$sapuicompSemanticObjectController_DistinctSemanticObjects");if(o){o.destroy();}};
return S;});
sap.ui.predefine('sap/ui/comp/navpopover/SmartLink',['sap/ui/base/ManagedObject','sap/m/Link','./LinkData','sap/ui/core/Control','./SemanticObjectController','./NavigationPopoverHandler','sap/ui/model/json/JSONModel','sap/ui/comp/personalization/Util','./Util','sap/base/Log','./SmartLinkRenderer'],function(M,L,a,C,S,N,J,P,U,b){"use strict";
var c=L.extend("sap.ui.comp.navpopover.SmartLink",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/navpopover/SmartLink.designtime",properties:{semanticObject:{type:"string",defaultValue:null},additionalSemanticObjects:{type:"string[]",defaultValue:[]},semanticObjectController:{type:"any",defaultValue:null},fieldName:{type:"string",defaultValue:null},semanticObjectLabel:{type:"string",defaultValue:null},createControlCallback:{type:"object",defaultValue:null},mapFieldToSemanticObject:{type:"boolean",defaultValue:true},contactAnnotationPath:{type:"string",defaultValue:undefined},ignoreLinkRendering:{type:"boolean",defaultValue:false},enableAvailableActionsPersonalization:{type:"boolean",defaultValue:true},forceLinkRendering:{type:"boolean",defaultValue:false},uom:{type:"string",defaultValue:undefined},beforeNavigationCallback:{type:"function"}},aggregations:{innerControl:{type:"sap.ui.core.Control",multiple:false}},events:{beforePopoverOpens:{parameters:{semanticObject:{type:"string"},semanticAttributes:{type:"object"},semanticAttributesOfSemanticObjects:{type:"object"},setSemanticAttributes:{type:"function"},setAppStateKey:{type:"function"},originalId:{type:"string"},open:{type:"function"}}},navigationTargetsObtained:{parameters:{mainNavigation:{type:"sap.ui.comp.navpopover.LinkData"},actions:{type:"sap.ui.comp.navpopover.LinkData[]"},ownNavigation:{type:"sap.ui.comp.navpopover.LinkData"},popoverForms:{type:"sap.ui.layout.form.SimpleForm[]"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"},show:{type:"function"}}},innerNavigate:{parameters:{text:{type:"string"},href:{type:"string"},semanticObject:{type:"string"},semanticAttributes:{type:"object"},originalId:{type:"string"}}}}}});
c.prototype.getInnerControlValue=function(){if(this._isRenderingInnerControl()){var i=this._getInnerControl();if(i){if(i.getText){return i.getText();}if(i.getValue){return i.getValue();}}}return this.getText();};
c.prototype.getNavigationPopoverHandler=function(){return this._createNavigationPopoverHandler();};
c.prototype.init=function(){S.prefetchDistinctSemanticObjects();this._oNavigationPopoverHandler=null;this.attachPress(this._onLinkPressed);this.addStyleClass("sapUiCompSmartLink");};
c.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._updateEnabled();};
c.prototype.updateBindingContext=function(){C.prototype.updateBindingContext.apply(this,arguments);this.setHref(null);this.setTarget(null);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setBindingContext(this.getBindingContext());}};
c.prototype._getTextOfDom=function(){if(!this.getDomRef()){return"";}if(this.$().find("span").length===2){return this.$().find("span")[0].textContent+this.$().find("span")[1].textContent;}else{return this.$()[0].textContent;}};
c.prototype.setText=function(t){if(this._isRenderingInnerControl()){this.setProperty("text",t,true);}else{L.prototype.setText.call(this,t);}return this;};
c.prototype.setMapFieldToSemanticObject=function(m){this.setProperty("mapFieldToSemanticObject",m);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setMapFieldToSemanticObject(m);}return this;};
c.prototype.setSemanticObject=function(s){this.setProperty("semanticObject",s);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setSemanticObject(s);}this._updateEnabled();return this;};
c.prototype.setAdditionalSemanticObjects=function(s){this.setProperty("additionalSemanticObjects",s);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setAdditionalSemanticObjects(s);}this._updateEnabled();return this;};
c.prototype.setBeforeNavigationCallback=function(B){this.setProperty("beforeNavigationCallback",B);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setBeforeNavigationCallback(B);}return this;};
c.prototype.setContactAnnotationPath=function(s){this.setProperty("contactAnnotationPath",s);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setContactAnnotationPath(s);}this._updateEnabled();return this;};
c.prototype.setEnableAvailableActionsPersonalization=function(e){this.setProperty("enableAvailableActionsPersonalization",e);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setEnableAvailableActionsPersonalization(e);}return this;};
c.prototype.setIgnoreLinkRendering=function(i){this.setProperty("ignoreLinkRendering",i);this._updateEnabled();return this;};
c.prototype.setFieldName=function(f){this.setProperty("fieldName",f);if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setFieldName(f);}this._updateEnabled();return this;};
c.prototype.setSemanticObjectController=function(o){if(o&&!(o.isA("sap.ui.comp.navpopover.SemanticObjectController"))){b.warning("Warning: setSemanticObjectController() has to be an object of sap.ui.comp.navpopover.SemanticObjectController instances",this);return this;}var d=this.getProperty("semanticObjectController");if(d===o){return this;}if(d){d.unregisterControl(this);}this.setProperty("semanticObjectController",o,true);if(o){o.registerControl(this);if(!this.getBeforeNavigationCallback()){this.setBeforeNavigationCallback(o.getBeforeNavigationCallback());}}if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.setSemanticObjectController(o);}this._updateEnabled();return this;};
c.prototype.onBeforeRendering=function(){L.prototype.onBeforeRendering.apply(this,arguments);if(!this.getSemanticObjectController()){var s=this._getSemanticObjectControllerOfParent();if(s){this.setSemanticObjectController(s);}}};
c.prototype.exit=function(){if(this.getSemanticObjectController()){this.getSemanticObjectController().unregisterControl(this);}if(this._oNavigationPopoverHandler){this._oNavigationPopoverHandler.destroy();this._oNavigationPopoverHandler=null;}};
c.prototype._onLinkPressed=function(e){this._createNavigationPopoverHandler().openPopover();};
c.prototype._createNavigationPopoverHandler=function(){if(!this._oNavigationPopoverHandler){if(!this.getFieldName()){var B=this.getBinding("text");var f;if(B){if(B.getBindings){f=B.getBindings()[0].getPath();}else{f=B.getPath();}}this.setFieldName(f);}this._oNavigationPopoverHandler=new N({semanticObject:this.getSemanticObject(),semanticObjectLabel:this.getSemanticObjectLabel(),additionalSemanticObjects:this.getAdditionalSemanticObjects(),semanticObjectController:this.getSemanticObjectController(),fieldName:this.getFieldName(),mapFieldToSemanticObject:this.getMapFieldToSemanticObject(),contactAnnotationPath:this.getContactAnnotationPath(),enableAvailableActionsPersonalization:this.getEnableAvailableActionsPersonalization(),control:this,beforePopoverOpens:this._onBeforePopoverOpens.bind(this),navigationTargetsObtained:this._onNavigationTargetsObtained.bind(this),innerNavigate:this._onInnerNavigate.bind(this),beforeNavigationCallback:this.getBeforeNavigationCallback()});this._oNavigationPopoverHandler.setModel(this.getModel());this._oNavigationPopoverHandler.isPopupAdaptationAllowed=function(){return false;};}return this._oNavigationPopoverHandler;};
c.prototype._onNavigationTargetsObtained=function(e){var p=e.getParameters();if(!this.hasListeners("navigationTargetsObtained")){p.show();return;}this.fireNavigationTargetsObtained({mainNavigation:p.mainNavigation,actions:p.actions,ownNavigation:p.ownNavigation,popoverForms:p.popoverForms,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,originalId:p.originalId,show:p.show});};
c.prototype._onBeforePopoverOpens=function(e){var p=e.getParameters();if(!this.hasListeners("beforePopoverOpens")){p.open();return;}this.fireBeforePopoverOpens({originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes,semanticAttributesOfSemanticObjects:p.semanticAttributesOfSemanticObjects,setSemanticAttributes:p.setSemanticAttributes,setAppStateKey:p.setAppStateKey,open:p.open});};
c.prototype._onInnerNavigate=function(e){var p=e.getParameters();if(!this.hasListeners("innerNavigate")){return;}this.fireInnerNavigate({text:p.text,href:p.href,originalId:p.originalId,semanticObject:p.semanticObject,semanticAttributes:p.semanticAttributes});};
c.prototype._isRenderingInnerControl=function(){return this.getIgnoreLinkRendering()&&this._getInnerControl()!==null;};
c.prototype._getInnerControl=function(){var i=this.getAggregation("innerControl");if(i){return i;}var f=this.getCreateControlCallback();if(f){i=f();this.setAggregation("innerControl",i,true);return i;}return null;};
c.prototype._getSemanticObjectControllerOfParent=function(){var s;var p=this.getParent();while(p){if(p.getSemanticObjectController){s=p.getSemanticObjectController();if(s){this.setSemanticObjectController(s);break;}}p=p.getParent();}return s;};
c.prototype._updateEnabled=function(){var t=this;S.getDistinctSemanticObjects().then(function(s){if(t.getSemanticObjectController()&&P.createArrayFromString(t.getSemanticObjectController().getIgnoredFields()).indexOf(t.getFieldName())>-1){t.setEnabled(false);return;}if(t.getIgnoreLinkRendering()===true){t.setEnabled(false);return;}if(U.getForceLinkRendering(t,t.getSemanticObjectController())){t.setEnabled(true);return;}if(!S.hasDistinctSemanticObject(t.getAdditionalSemanticObjects().concat(t.getSemanticObject()),s)&&U.getContactAnnotationPath(t,t.getSemanticObjectController())===undefined){t.setEnabled(false);return;}t.setEnabled(true);});};
c.prototype.getAccessibilityInfo=function(){return this.getEnabled()?L.prototype.getAccessibilityInfo.apply(this,arguments):{description:this.getText()||this.getHref()||""};};
return c;});
sap.ui.predefine('sap/ui/comp/navpopover/SmartLinkRenderer',['sap/ui/core/Renderer','sap/m/LinkRenderer'],function(R,L){"use strict";var S=R.extend(L);S.apiVersion=2;
S.render=function(r,c){var b=true;if(c.getIgnoreLinkRendering()){var o=c._getInnerControl();if(o){r.openStart("div",c);r.openEnd();r.renderControl(o);r.close("div");b=false;}}if(b){L.render.apply(this,arguments);}};
S.writeText=function(r,c){if(!c.getUom()){r.text(c.getText());return;}r.openStart("span");r.openEnd();r.text(c.getText());r.close("span");r.openStart("span");r.style("display","inline-block");r.style("min-width","2.5em");r.style("width","3.0em");r.style("text-align","start");r.openEnd();r.text(c.getUom());r.close("span");};
return S;},true);
sap.ui.predefine('sap/ui/comp/navpopover/Util',['sap/ui/comp/library','./Factory','./LinkData',"sap/base/Log"],function(C,F,L,c){"use strict";var U={getContactAnnotationPath:function(o,s){var a=o.getContactAnnotationPath();if(a===undefined&&s&&s.getContactAnnotationPaths()&&s.getContactAnnotationPaths()[o.getFieldName()]!==undefined){a=s.getContactAnnotationPaths()[o.getFieldName()];}return a;},getForceLinkRendering:function(o,s){return o.getForceLinkRendering()||(s&&s.getForceLinkRendering()&&s.getForceLinkRendering()[o.getFieldName()]);},getStorableAvailableActions:function(m){return m.filter(function(M){return M.key!==undefined;});},sortArrayAlphabetical:function(n){var l;try{l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var o=window.Intl.Collator(l,{numeric:true});n.sort(function(a,b){return o.compare(a,b);});}else{n.sort(function(a,b){return a.localeCompare(b,l,{numeric:true});});}}catch(e){}},retrieveNavigationTargets:function(s,a,A,o,S,m,p,O,b,l){var n={mainNavigation:undefined,ownNavigation:undefined,availableActions:[]};var x=F.getService("CrossApplicationNavigation");var u=F.getService("URLParsing");if(!x||!u){c.error("Service 'CrossApplicationNavigation' or 'URLParsing' could not be obtained");return Promise.resolve(n);}var d=[s].concat(a);var P=d.map(function(e){return[{semanticObject:e,params:S?S[e]:undefined,appStateKey:A,ui5Component:o,sortResultsBy:"text"}];});var f;return new Promise(function(r){x.getLinks(P).then(function(e){return r(e);});}).then(function(e){f=e;return(f&&f.length)?this.retrieveSemanticObjectUnavailableActions(p,O,b):Promise.resolve({});}.bind(this)).then(function(e){if(!f||!f.length){return Promise.resolve(n);}var g=x.hrefForExternal();if(g&&g.indexOf("?")!==-1){g=g.split("?")[0];}if(g){g+="?";}var I=function(j,k){return!!e&&!!e[j]&&e[j].indexOf(k)>-1;};f[0][0].forEach(function(j){var k=u.parseShellHash(j.intent);var K=(k.semanticObject&&k.action)?k.semanticObject+"-"+k.action:undefined;var q=(j.tags&&j.tags.indexOf("superiorAction")>-1);if(j.intent.indexOf(g)===0){var r=new L({key:K,href:j.intent,visible:true,isSuperiorAction:q});r.setText(j.text);n.ownNavigation=r;return;}if(k.action&&k.action==='displayFactSheet'&&!I(k.semanticObject,k.action)){n.mainNavigation=new L({key:K,href:j.intent,text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_FACTSHEET"),visible:true,isSuperiorAction:q});if(l){l.addSemanticObjectIntent(k.semanticObject,{text:j.text,intent:j.intent});}return;}if(!I(k.semanticObject,k.action)){var t=new L({key:K,href:j.intent,visible:true,isSuperiorAction:q});t.setText(j.text);n.availableActions.push(t);if(l){l.addSemanticObjectIntent(k.semanticObject,{text:j.text,intent:j.intent});}}});if(!n.mainNavigation&&typeof m==="string"){var M=new L({visible:true});M.setText(m);n.mainNavigation=M;}var h=[];for(var i=1;i<d.length;i++){h=h.concat(f[i][0]);}h.forEach(function(j){var k=u.parseShellHash(j.intent);if(I(k.semanticObject,k.action)){return;}var q=(j.tags&&j.tags.indexOf("superiorAction")>-1);var r=new L({key:(k.semanticObject&&k.action)?k.semanticObject+"-"+k.action:undefined,href:j.intent,visible:true,isSuperiorAction:q});r.setText(j.text);n.availableActions.push(r);if(l){l.addSemanticObjectIntent(k.semanticObject,{text:j.text,intent:j.intent});}});return Promise.resolve(n);});},retrieveSemanticObjectMapping:function(p,o,b){return this._getEntityTypeAnnotationOfProperty(p,o,b).then(function(P){if(!P){return Promise.resolve(null);}if(!P[0]["com.sap.vocabularies.Common.v1.SemanticObjectMapping"]){return Promise.resolve(null);}var s=this._getSemanticObjectMappingsOfProperty(P[0],this._getSemanticObjectsOfProperty(P[0]));var S={};for(var q in s){S[s[q].name]=s[q].mapping;}return Promise.resolve(S);}.bind(this));},retrieveSemanticObjectUnavailableActions:function(p,o,b){return this._getEntityTypeAnnotationOfProperty(p,o,b).then(function(P){if(!P){return Promise.resolve(null);}if(!P[0]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){return Promise.resolve(null);}var s=this._getSemanticObjectUnavailableActionsOfProperty(P[0],this._getSemanticObjectsOfProperty(P[0]));var S={};for(var q in s){S[s[q].name]=s[q].unavailableActions;}return Promise.resolve(S);}.bind(this));},_getEntityTypeAnnotationOfProperty:function(p,o,b){if(!p){return Promise.resolve(null);}if(!o||!o.getMetaModel()){return Promise.resolve(null);}var m=o.getMetaModel();return m.loaded().then(function(){var M;try{M=m.getMetaContext(b);}catch(e){c.error("sap.ui.comp.navpopover.Util._getEntityTypeAnnotationOfProperty: binding path '"+b+"' is not valid. Error has been caught: "+e);return Promise.resolve(null);}if(!M){return Promise.resolve(null);}var E=M.getProperty(M.getPath());if(!E.property){return Promise.resolve(null);}var P=E.property.filter(function(a){return a.name===p;});if(P.length!==1){return Promise.resolve(null);}return Promise.resolve(P);});},_getSemanticObjectsOfProperty:function(p){var s={};for(var a in p){var A=a.split("#")[0];var q=a.split("#")[1]||"";if(A.startsWith("com.sap.vocabularies.Common.v1.SemanticObject")&&A.endsWith("com.sap.vocabularies.Common.v1.SemanticObject")){s[q]={name:p[a]["String"],mapping:undefined};}}return s;},_getSemanticObjectMappingsOfProperty:function(p,s){var g=function(S){var m={};if(Array.isArray(S)){S.forEach(function(P){m[P.LocalProperty.PropertyPath]=P.SemanticObjectProperty.String;});}return m;};for(var a in p){var A=a.split("#")[0];var q=a.split("#")[1]||"";if(A.startsWith("com.sap.vocabularies.Common.v1.SemanticObjectMapping")&&A.endsWith("com.sap.vocabularies.Common.v1.SemanticObjectMapping")){if(s[q]){s[q].mapping=g(p[a]);}}}return s;},_getSemanticObjectUnavailableActionsOfProperty:function(p,s){var g=function(S){var u=[];if(Array.isArray(S)){S.forEach(function(o){u.push(o.String);});}return u;};for(var a in p){var A=a.split("#")[0];var q=a.split("#")[1]||"";if(A.startsWith("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")&&A.endsWith("com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions")){if(s[q]){s[q].unavailableActions=g(p[a]);}}}return s;}};return U;},true);
sap.ui.predefine('sap/ui/comp/navpopover/flexibility/changes/AddLink',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var A={};
A.applyChange=function(c,n,p){var C=c.getContent();if(q.isEmptyObject(C)){L.error("Change does not contain sufficient information to be applied");return false;}var a=n.getAvailableActions().filter(function(l){return l.getKey()===C.key;});if(a.length!==1){L.error("Item with key "+C.key+" not found in the availableAction aggregation");return false;}p.modifier.setProperty(a[0],"visibleChangedByUser",c.getLayer()==="USER");p.modifier.setProperty(a[0],"visible",C.visible);return true;};
A.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==true){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'true'");}c.setContent(s.content);};
A.revertChange=function(){return true;};
return A;},true);
sap.ui.predefine('sap/ui/comp/navpopover/flexibility/changes/RemoveLink',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var R={};
R.applyChange=function(c,n,p){var C=c.getContent();if(q.isEmptyObject(C)){L.error("Change does not contain sufficient information to be applied");return false;}var a=n.getAvailableActions().filter(function(l){return l.getKey()===C.key;});if(a.length!==1){L.error("Item with key "+C.key+" not found in the availableAction aggregation");return false;}p.modifier.setProperty(a[0],"visibleChangedByUser",c.getLayer()==="USER");p.modifier.setProperty(a[0],"visible",C.visible);return true;};
R.completeChangeContent=function(c,s,p){if(q.isEmptyObject(s.content)){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.key){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(s.content.visible!==false){throw new Error("In oSpecificChangeInfo.content.select attribute should be 'false'");}c.setContent(s.content);};
R.revertChange=function(){return true;};
return R;},true);
sap.ui.predefine('sap/ui/comp/odata/CalendarMetadata',[],function(){"use strict";var c={"com.sap.vocabularies.Common.v1.IsCalendarDate":true,"com.sap.vocabularies.Common.v1.IsCalendarHalfyear":true,"com.sap.vocabularies.Common.v1.IsCalendarMonth":true,"com.sap.vocabularies.Common.v1.IsCalendarQuarter":true,"com.sap.vocabularies.Common.v1.IsCalendarWeek":true,"com.sap.vocabularies.Common.v1.IsCalendarYear":true,"com.sap.vocabularies.Common.v1.IsCalendarYearMonth":true,"com.sap.vocabularies.Common.v1.IsCalendarYearQuarter":true,"com.sap.vocabularies.Common.v1.IsCalendarYearWeek":true};var C={isCalendarValue:function(f){return this._isMatching(f,c);},isYear:function(f){return this._isDefaultTrue(f["com.sap.vocabularies.Common.v1.IsCalendarYear"]);},isYearWeek:function(f){return this._isDefaultTrue(f["com.sap.vocabularies.Common.v1.IsCalendarYearWeek"]);},isYearMonth:function(f){return this._isDefaultTrue(f["com.sap.vocabularies.Common.v1.IsCalendarYearMonth"]);},isYearQuarter:function(f){return this._isDefaultTrue(f["com.sap.vocabularies.Common.v1.IsCalendarYearQuarter"]);},_isMatching:function(f,m){var M=false;for(var a in m){if(this._isDefaultTrue(f[a])){M=true;break;}}return M;},_isDefaultTrue:function(t){if(t){return t.Bool?t.Bool!=="false":true;}return false;}};return C;});
sap.ui.predefine('sap/ui/comp/odata/CriticalityMetadata',[],function(){"use strict";var c={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":0,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":1,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":2,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":3};var C={0:"None",1:"Error",2:"Warning",3:"Success"};var m={0:null,1:"sap-icon://message-error",2:"sap-icon://message-warning",3:"sap-icon://message-success"};var a={getCriticalityState:function(t){if(typeof t==="string"){t=c[t];}return C[t];},getCriticalityIcon:function(t){if(typeof t==="string"){t=c[t];}return m[t];},getShowCriticalityIcon:function(t){return t==="com.sap.vocabularies.UI.v1.CriticalityRepresentationType/WithoutIcon"?false:true;}};return a;},true);
sap.ui.predefine('sap/ui/comp/odata/FiscalFormat',["sap/ui/base/Object","sap/ui/core/LocaleData"],function(B,L){"use strict";
var F=B.extend("sap.ui.comp.odata.FiscalFormat",{
metadata:{library:"sap.ui.comp"},
constructor:function(i,f){B.call(this,i,f);var a,P,b,c,l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale(),o=L.getInstance(l),C=sap.ui.getCore().getConfiguration().getFormatSettings().getCustomLocaleData(),d=/(m|y)(?:.*)(\W)(m|y)/i,s=C["dateFormats-short"];this.oFormatOptions=f;if(this.oFormatOptions.format.length>4){a="yM";}else if(this.oFormatOptions.format==="PPP"){a="M";}else{a=this.oFormatOptions.format;}if(s&&a==="yM"){c=s.match(d).splice(1).join("");if(c){P=c;}}else{P=o.getCustomDateTimePattern(a,this.oFormatOptions.calendarType);}P=P.replace(/([\u4e00-\u9faf\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uffef])+/gi,'');if(this.oFormatOptions.format.length>4){P=P.replace(/y+/i,this.oFormatOptions.format.slice(0,this.oFormatOptions.format.lastIndexOf("Y")+1));P=P.replace(/m+/i,this.oFormatOptions.format.slice(this.oFormatOptions.format.lastIndexOf("Y")+1));}else if(this.oFormatOptions.format==="PPP"){P="PPP";}b=this.parseCldrDatePattern(P);this.oFormatOptions.pattern=b.length>1?P:"";this._setFormatRegex(b);this._setParseRegex(b);this._setValidationRegex(b);}
});
F.getDateInstance=function(f){return new F(null,f);};
F.prototype.getPattern=function(){return this.oFormatOptions.pattern;};
F.prototype.getRegExPattern=function(){return this.sFormatRegExPattern;};
F.prototype.getTemplate=function(){return this.sFormatRegExGroups;};
F.prototype._setFormatRegex=function(f){var r=[],R=[],P,s,o,y,i;for(i=0;i<f.length;i++){P=f[i];s=P.symbol||"";o=this.oSymbols[s].format;if(s===""){R[i]=(P.value);}else if(s==="y"||s==="Y"){r.unshift("("+o.source+")");R[i]=('$'+1);}else{r.push("("+o.source+")");y=f.some(function(P){return P.symbol==="y"||P.symbol==="Y";});R[i]=y?('$'+2):('$'+1);}}this.sFormatRegExPattern=new RegExp(r.join(""));this.sFormatRegExGroups=R.join("");};
F.prototype._setParseRegex=function(f){var P,s,r,i,c,R=[],o={},n=0;for(i=0;i<f.length;i++){P=f[i];s=P.symbol||"";r=this.oSymbols[s].parse;if(s===""){R.push("\\D+?");}else{R.push("("+r.source+")");c=++n;o[c]=P;}}this.sParseRegExPattern=new RegExp("^"+R.join("")+"$");this.fnParseRegExReplacer=function(){var P,g,a=[];for(var i in o){P=o[i];g=arguments[i];if(g.length<P.digits){if(P.symbol==="y"||P.symbol==="Y"){g=p(g);}else{g=g.padStart(P.digits,'0');}}if(P.symbol==="y"||P.symbol==="Y"){a.unshift(g);}else{a.push(g);}}return a.join("");};};
F.prototype._setValidationRegex=function(f){var i,P,s,r,R=[];for(i=0;i<f.length;i++){P=f[i];s=P.symbol||"";r=this.oSymbols[s].format;if(s===""){continue;}else if(s==="y"||s==="Y"){R.unshift(r.source);}else{R.push(r.source);}}this.sValidationRegExPattern=new RegExp("^("+R.join(")(")+")$");};
F.prototype.parseCldrDatePattern=function(P){var i,c,C,o,f=[];for(i=0;i<P.length;i++){c=P[i];if(C!==c){o={};}else{o.digits+=1;continue;}if(typeof this.oSymbols[c]==="undefined"){o.value=c;o.type="text";}else{o.symbol=c;o.digits=1;}C=c;f.push(o);}return f;};
F.prototype.format=function(v){if(v==null){return"";}return v.replace(this.sFormatRegExPattern,this.sFormatRegExGroups);};
F.prototype.parse=function(v){if(v){return v.replace(this.sParseRegExPattern,this.fnParseRegExReplacer);}return null;};
F.prototype.validate=function(v){return this.sValidationRegExPattern.test(v);};
F.oRegexFormatPatterns={"year":/[1-9][0-9]{3}/,"period":/[0-9]{3}/,"quarter":/[1-4]/,"week":/0[1-9]|[1-4][0-9]|5[0-3]/,"day":/371|370|3[0-6][0-9]|[1-2][0-9][0-9]|[1-9][0-9]|[1-9]/};F.oRegexParsePatterns={"year":/[0-9]{1,4}/,"period":/[0-9]{1,3}/,"quarter":/[1-4]/,"week":/[0-9]{1,2}/,"day":/[1-9]/};F.prototype.oSymbols={"":"","y":{format:F.oRegexFormatPatterns.year,parse:F.oRegexParsePatterns.year},"Y":{format:F.oRegexFormatPatterns.year,parse:F.oRegexParsePatterns.year},"P":{format:F.oRegexFormatPatterns.period,parse:F.oRegexParsePatterns.period},"W":{format:F.oRegexFormatPatterns.week,parse:F.oRegexParsePatterns.week},"d":{format:F.oRegexFormatPatterns.day,parse:F.oRegexParsePatterns.day},"Q":{format:F.oRegexFormatPatterns.quarter,parse:F.oRegexParsePatterns.quarter},"q":{format:F.oRegexFormatPatterns.quarter,parse:F.oRegexParsePatterns.quarter}};
F.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);if(this._oAnnotationValidationRegexPattern){this._oAnnotationValidationRegexPattern=null;}};
function p(y){var Y,i=Number.parseInt(y),c=new Date().getUTCFullYear(),C=Math.floor(c/100);Y=C*100+i-c;if(y.length===3){i+=Math.floor((C-1)/10)*1000;}else if(Y<-70){i+=(C+1)*100;}else if(Y<30){i+=C*100;}else{i+=(C-1)*100;}return i;}
return F;});
sap.ui.predefine('sap/ui/comp/odata/FiscalMetadata',[],function(){"use strict";var F={isFiscalValue:function(p){for(var i=0;i<this.aAnnotations.length;i++){if(this.isTermDefaultTrue(p[this.aAnnotations[i]])){return true;}}return false;},isFiscalYear:function(p){return this.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsFiscalYear"]);},isFiscalYearPeriod:function(p){return this.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"]);},getFiscalAnotationType:function(p){for(var i=0;i<this.aAnnotations.length;i++){var f=p[this.aAnnotations[i]];if(f&&f.Bool!=="false"){return this.aAnnotations[i];}}return null;},isTermDefaultTrue:function(t){if(t){return t.Bool?t.Bool!=="false":true;}return false;},updateViewMetadata:function(v){var a=this.getFiscalAnotationType(v);if(a==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"||a==="com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"||a==="com.sap.vocabularies.Common.v1.IsFiscalYearWeek"){v.maxLength=(parseInt(v.maxLength)+1).toString();}return v;},aAnnotations:["com.sap.vocabularies.Common.v1.IsFiscalYear","com.sap.vocabularies.Common.v1.IsFiscalPeriod","com.sap.vocabularies.Common.v1.IsFiscalYearPeriod","com.sap.vocabularies.Common.v1.IsFiscalQuarter","com.sap.vocabularies.Common.v1.IsFiscalYearQuarter","com.sap.vocabularies.Common.v1.IsFiscalWeek","com.sap.vocabularies.Common.v1.IsFiscalYearWeek","com.sap.vocabularies.Common.v1.IsDayOfFiscalYear"]};return F;});
sap.ui.predefine('sap/ui/comp/odata/MetadataAnalyser',['./ODataType','sap/ui/comp/odata/FiscalMetadata','sap/ui/model/odata/AnnotationHelper','sap/base/Log'],function(O,F,A,L){"use strict";var f={"com.sap.vocabularies.Common.v1.FilterExpressionType/SingleInterval":"interval","com.sap.vocabularies.Common.v1.FilterExpressionType/MultiValue":"multi-value","com.sap.vocabularies.Common.v1.FilterExpressionType/SingleValue":"single-value"};var s={"com.sap.vocabularies.UI.v1.SelectionRangeOptionType/EQ":"EQ","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/BT":"BT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/CP":"CP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LE":"LE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GE":"GE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NE":"NE","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NB":"NB","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/NP":"NP","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/GT":"GT","com.sap.vocabularies.UI.v1.SelectionRangeOptionType/LT":"LT"};var S={"com.sap.vocabularies.UI.v1.SelectionRangeSignType/I":"I","com.sap.vocabularies.UI.v1.SelectionRangeSignType/E":"E"};var M=function(r){if(typeof r==="object"){this.oModel=r;}else{this._sResourceRootUri=r;}this._oMetadata=null;if(!this.oModel&&this._sResourceRootUri){L.error("Analyzing metadata cannot be done without an ODataModel!");return;}if(this.oModel){this._oMetaModel=this.oModel.getMetaModel();}if(this._oMetaModel){this._oMetadata=this._oMetaModel.getProperty("/");}if(this._oMetadata&&this._oMetadata.dataServices){this._oSchemaDefinition=this._oMetadata.dataServices.schema[0];}};M.hierarchyType={nodeFor:1,nodeExternalKeyFor:2,parentNodeFor:3,levelFor:4,drillStateFor:5,nodeDescendantCountFor:6};
M.prototype.getNamespace=function(){if(this._oSchemaDefinition){return this._oSchemaDefinition.namespace;}};
M.prototype.getSchemaDefinition=function(){return this._oSchemaDefinition;};
M.prototype.getEntityContainerAttribute=function(a){var b=null,e;if(this._oMetaModel&&a){if(a.indexOf("sap:")<0){a="sap:"+a;}e=this._oMetaModel.getODataEntityContainer();b=e[a]||null;}return b;};
M.prototype.getEntityLabelByEntityTypeName=function(e){var E=this._getEntityDefinition(e),r,R="";if(E){r=E["com.sap.vocabularies.Common.v1.Label"];if(r&&r.String){R=r.String;}}return R;};
M.prototype._getEntityDefinition=function(e){var E=null;if(e){E=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(e));}return E;};
M.prototype._getComplexTypeDefinition=function(c){var C=null;if(c){C=this._oMetaModel.getODataComplexType(this._getFullyQualifiedNameForEntity(c));}return C;};
M.prototype._getNameOfPropertyUsingComplexType=function(e,c){var C=this.getNamespace();if(e&&c&&C){var t=C+"."+c;var m=this._getEntityDefinition(e);if(m){var p=m.property;if(p&&p.length){var i=0;for(i=0;i<p.length;i++){var P=p[i];if(P&&P.type===t){return P.name;}}}}}return null;};
M.prototype.removeNamespace=function(a){var i,r=a;if(a){i=a.lastIndexOf(".")+1;}if(i>0){r=a.substring(i);}return r;};
M.prototype.getEntityTypeNameFromEntitySetName=function(e){var E=null,a=null;if(this._oMetaModel){E=this._oMetaModel.getODataEntitySet(e);if(E){a=E.entityType;}}return a;};
M.prototype.getEntitySetNameFromEntityTypeName=function(e){var q,E,a,i,l,o;if(this._oMetaModel&&e){q=this._getFullyQualifiedNameForEntity(e);E=this._oMetaModel.getODataEntityContainer();if(E&&q){a=E.entitySet;l=a.length;for(i=0;i<l;i++){o=a[i];if(o.entityType===q){break;}o=null;}if(o){return o.name;}}}return null;};
M.prototype.getKeysByEntitySetName=function(e){var k=null,E=null;if(!this._oMetaModel){return undefined;}E=this.getEntityTypeNameFromEntitySetName(e);if(E){k=this.getKeysByEntityTypeName(E);}return k;};
M.prototype.getKeysByEntityTypeName=function(e){var k=null,p=null,i,l=0,E=null;if(!this._oMetaModel){return undefined;}E=this._getEntityDefinition(e);if(E){if(E.key){p=E.key.propertyRef;if(p){l=p.length;k=[];for(i=0;i<l;i++){k.push(p[i].name);}}}}return k;};
M.prototype.getFieldsByEntitySetName=function(e){var a=null,E,b=null;if(!this._oMetaModel){return undefined;}E=this._oMetaModel.getODataEntitySet(e);if(E){b=E.entityType;}if(b){a=this.getFieldsByEntityTypeName(b);this._enrichEntitySetMetadata(a,E);}return a;};
M.prototype._enrichEntitySetMetadata=function(a,e){var l,o,n,N,r,m;n=this._getNonSortableFields(e);N=this._getNonFilterableFields(e);r=this._getRequiredFilterFields(e);m=this._getFilterExpressionRestriction(e);l=a.length;while(l--){o=a[l];o.sortable=!(n.indexOf(o.name)>-1);o.filterable=!(N.indexOf(o.name)>-1);o.requiredFilterField=(r.indexOf(o.name)>-1);o.filterRestriction=m[o.name];}};
M.prototype._extractPropertyPathsFromAnnotation=function(a,b){var p=[],c,l,P;if(a&&b){c=a[b];}if(c){l=c.length;while(l--){P=c[l].PropertyPath;if(P){p.push(P);}}}return p;};
M.prototype._getNonSortableFields=function(e){var o;if(e){o=e["Org.OData.Capabilities.V1.SortRestrictions"];}return this._extractPropertyPathsFromAnnotation(o,"NonSortableProperties");};
M.prototype._getNonFilterableFields=function(e){var o;if(e){o=e["Org.OData.Capabilities.V1.FilterRestrictions"];}return this._extractPropertyPathsFromAnnotation(o,"NonFilterableProperties");};
M.prototype._getRequiredFilterFields=function(e){var o;if(e){o=e["Org.OData.Capabilities.V1.FilterRestrictions"];}return this._extractPropertyPathsFromAnnotation(o,"RequiredProperties");};
M.prototype._getFilterExpressionRestriction=function(e){var m={},a,l,o,p,b;if(e){var c=e["Org.OData.Capabilities.V1.FilterRestrictions"];if(c){a=c["FilterExpressionRestrictions"];if(a){for(var i=0;i<a.length;i++){p=a[i].Property;b=a[i].AllowedExpressions;if(b&&b.String){switch(b.String){case"SingleValue":m[p.PropertyPath]="single-value";break;case"MultiValue":m[p.PropertyPath]="multi-value";break;case"SingleRange":m[p.PropertyPath]="interval";break;default:}}}}}if(a==undefined){a=e["com.sap.vocabularies.Common.v1.FilterExpressionRestrictions"];if(a){l=a.length;while(l--){o=a[l];if(o){p=o.Property;b=o.AllowedExpressions;if(p&&b&&p.PropertyPath&&b.EnumMember){m[p.PropertyPath]=f[b.EnumMember];}}}}}}return m;};
M.prototype._isFilterable=function(p,e){var n,b=true;if(e){n=this._getNonFilterableFields(e);b=!(n.indexOf(p.name)>-1);}if(b){b=!(p["sap:filterable"]==="false");}return b;};
M.isHiddenFilter=function(p){return!!p["com.sap.vocabularies.UI.v1.HiddenFilter"]&&M.isTermDefaultTrue(p["com.sap.vocabularies.UI.v1.HiddenFilter"]);};
M.isHidden=function(p){return!!p["com.sap.vocabularies.UI.v1.Hidden"]&&M.isTermDefaultTrue(p["com.sap.vocabularies.UI.v1.Hidden"]);};
M.prototype.getFieldsByEntityTypeName=function(e){var E;if(!this._oMetaModel){return undefined;}E=this._getEntityDefinition(e);return this._getFieldsByEntityDefinition(E);};
M.prototype.getFieldsByComplexTypeName=function(c,p){var C;if(!this._oMetaModel){return undefined;}C=this._getComplexTypeDefinition(c);return this._getFieldsByEntityDefinition(C,p);};
M.prototype.getAllEntityTypeNames=function(){if(!this._oMetaModel){return undefined;}var o=this._oSchemaDefinition;if(o.entityType&&o.entityType.length>0){var i=0;var r=[];for(i=0;i<o.entityType.length;i++){r.push(o.entityType[i].name);}return r;}return null;};
M.prototype.getFieldSemanticObjectMap=function(e){var o=this.getFieldsByEntitySetName(e);if(!o){return null;}var m={},i,l=o.length;for(i=0;i<l;i++){var a=o[i];var b=this.getSemanticObjectAnnotation(a.fullName);if(b&&b.semanticObject){m[a.name]=b.semanticObject;}}return m;};
M.prototype._getFieldsByEntityDefinition=function(e,p){var a=null,P=null,i=0,l=0,o,b;if(e){P=e.property;}if(P){a=[];l=P.length;for(i=0;i<l;i++){o=P[i];if(o){b=this._parseV4PropertyAnnotations(o,e,p);this._determineHierarchyInformation(b,o);this._determineFilterAndSortInformation(b,o,null);a.push(b);}}}return a;};
M.prototype.getPropertyContextByPath=function(p){var P,t,a,b,o;if(p&&this._oMetaModel){P=p.split("/");t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);a=P[1];b=this._oMetaModel.getODataProperty(t,a,true);if(b){o=this._oMetaModel.createBindingContext(b);}}return o;};
M.getDisplayFormat=function(p){var d=p["sap:display-format"];if(d){return d;}};
M.isCalendarDate=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsCalendarDate"]);};
M.isFiscalDate=function(p){return F.isFiscalValue(p);};
M.hasValueListRelevantQualifiers=function(p){var h=false;if(p&&p["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]){h=true;}return h;};
M.getAggregationRole=function(p){if(p["com.sap.vocabularies.Analytics.v1.Dimension"]){return"dimension";}if(p["com.sap.vocabularies.Analytics.v1.Measure"]){return"measure";}return undefined;};
M.getLinkDisplayFormat=function(p){if(M.isEmailAddress(p)){return"EmailAddress";}if(M.isPhoneNumber(p)){return"PhoneNumber";}if(M.isURL(p)){return"URL";}return"";};
M.getValueListMode=function(p){if(M.isValueListWithFixedValues(p)){return"fixed-values";}var v=p["sap:value-list"];if(v){return v;}return"";};
M.isTermTrue=function(t){return!!t&&(t.Bool==="true");};
M.isPropertyStringType=function(p){return!!p&&(p.type==="Edm.String");};
M.isTermDefaultTrue=function(t){if(t){return t.Bool?t.Bool!=="false":true;}return false;};
M.isNullable=function(p){return!(p&&(p.nullable==="false"));};
M.isSkippingMeasuredQuantityCheck=function(p){var t="com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity";return M.isTermTrue(p[t]);};
M.isDigitSequence=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsDigitSequence"]);};
M.isUpperCase=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Common.v1.IsUpperCase"]);};
M.isEmailAddress=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Communication.v1.IsEmailAddress"]);};
M.isPhoneNumber=function(p){return M.isPropertyStringType(p)&&M.isTermDefaultTrue(p["com.sap.vocabularies.Communication.v1.IsPhoneNumber"]);};
M.isURL=function(p){return M.isPropertyStringType(p)&&(M.isTermDefaultTrue(p["Org.OData.Core.V1.IsURL"])||M.isTermDefaultTrue(p["Org.OData.Core.V1.IsUrl"]));};
M.isValueList=function(p){var t="com.sap.vocabularies.Common.v1.ValueList";return!!(p&&(p["sap:value-list"]||p[t]));};
M.isRecommendationList=function(p){return!!(p&&p["com.sap.vocabularies.UI.v1.RecommendationList"]);};
M.isValueListWithFixedValues=function(p){var t="com.sap.vocabularies.Common.v1.ValueListWithFixedValues";return M.isTermTrue(p[t]);};
M.hasImportance=function(p){return!!(p&&p["com.sap.vocabularies.UI.v1.Importance"]);};
M.prototype._parseProperty=function(p,e,P){var o=this._parseV4PropertyAnnotations(p,e,P);this._determineHierarchyInformation(o,p);this._determineFilterAndSortInformation(o,p,null);return o;};
M.prototype._parseV4PropertyAnnotations=function(p,e,P){var o=Object.assign({},p);var r=p["com.sap.vocabularies.Common.v1.Label"];if(r){o.fieldLabel=r.String;}r=p["com.sap.vocabularies.Common.v1.QuickInfo"];if(r){o.quickInfo=r.String;}o.displayFormat=M.getDisplayFormat(p);o.isDigitSequence=M.isDigitSequence(p);o.isURL=M.isURL(p);o.isEmailAddress=M.isEmailAddress(p);o.isPhoneNumber=M.isPhoneNumber(p);o.isUpperCase=M.isUpperCase(p);o.isCalendarDate=M.isCalendarDate(p);o.isFiscalDate=M.isFiscalDate(p);o.aggregationRole=M.getAggregationRole(p);r=p["Org.OData.Measures.V1.ISOCurrency"];if(r){o.isCurrencyField=true;o.isMeasureField=true;o.unit=r.Path;}r=p["Org.OData.Measures.V1.Unit"];if(r){o.isMeasureField=true;o.unit=r.Path;}r=p["com.sap.vocabularies.Common.v1.Text"];if(r){o.description=r.Path;o.displayBehaviour=this.getTextArrangementValue(r);}else if(p["com.sap.vocabularies.UI.v1.TextArrangement"]){o.displayBehaviour=this.getTextArrangementValue(p);}r=p["com.sap.vocabularies.UI.v1.IsImageURL"]||p["com.sap.vocabularies.UI.v1.IsImageUrl"];o.isImageURL=M.isTermDefaultTrue(r);o.entityName=e.name;o.parentPropertyName=P;o.fullName=this._getFullyQualifiedNameForField(p.name,e);r=p["com.sap.vocabularies.Common.v1.FieldControl"];o.visible=!(r&&((r.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden")||(r.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Inapplicable")));o.visible=o.visible&&!M.isHidden(p);o.hiddenFilter=M.isHiddenFilter(p);if(p["defaultValue"]!==undefined){o.defaultPropertyValue=p["defaultValue"];}r=p["com.sap.vocabularies.Common.v1.FilterDefaultValue"];if(r){o.defaultFilterValue=this._getDefaultValues(p.type,r,p);}return o;};
M.prototype._determineHierarchyInformation=function(o,p){var h={field:null,type:null};if(p["sap:hierarchy-node-for"]!=null){h.field=p["sap:hierarchy-node-for"];h.type=M.hierarchyType.nodeFor;}if(p["sap:hierarchy-node-external-key-for"]!=null){h.field=p["sap:hierarchy-node-external-key-for"];h.type=M.hierarchyType.nodeExternalKeyFor;}if(p["sap:hierarchy-parent-node-for"]!=null){h.field=p["sap:hierarchy-parent-node-for"];h.type=M.hierarchyType.parentNodeFor;}if(p["sap:hierarchy-level-for"]!=null){h.field=p["sap:hierarchy-level-for"];h.type=M.hierarchyType.levelFor;}if(p["sap:hierarchy-drill-state-for"]!=null){h.field=p["sap:hierarchy-drill-state-for"];h.type=M.hierarchyType.drillStateFor;}if(p["sap:hierarchy-node-descendant-count-for"]!=null){h.field=p["sap:hierarchy-node-descendant-count-for"];h.type=M.hierarchyType.nodeDescendantCountFor;}if(h.type!=null){o.hierarchy=h;}};
M.prototype._determineFilterAndSortInformation=function(o,p,e){if(e){this._enrichEntitySetMetadata([o],e);}if(o.filterable==undefined||o.filterable){o.filterable=p["sap:filterable"]!=="false";}if(!o.filterRestriction&&p["sap:filter-restriction"]){o.filterRestriction=p["sap:filter-restriction"];}if(!o.requiredFilterField){o.requiredFilterField=p["sap:required-in-filter"]==="true";}if(o.sortable==undefined||o.sortable){o.sortable=p["sap:sortable"]!=="false";}};
M.prototype._getDefaultValues=function(t,r,p){var v=null,d=O.getDefaultValueTypeName(t);if(r[d]){v=r[d];}else{L.error("default value for "+p.name+" expected through the property "+d);}return v;};
M.prototype.extractNavigationPropertyField=function(p,e){var E,m,o,P,a,n,b,c=null;if(e&&p){E="/"+e+"/";P=p.split("/");a=P.pop();n=P.join("/");if(n&&a){m=this._oMetaModel.getMetaContext(E+n);if(m){b=this._oMetaModel.getProperty(m.getPath());}}if(b){o=this._oMetaModel.getODataProperty(b,a);}if(o){c=this._parseV4PropertyAnnotations(o,b,n);c.name=p;var d=this._oMetaModel.getODataEntitySet(e);this._determineFilterAndSortInformation(c,o,d);c.name=o.name;}}return c;};
M.prototype.getAllFilterableFieldNamesByEntityTypeName=function(e){var g,i,a,j,b,r,G;r=[];g=this.getAllFilterableFieldsByEntityTypeName(e);if(g&&g.length){a=g.length;for(i=0;i<a;i++){G=g[i];if(G.fields&&G.fields.length){b=G.fields.length;for(j=0;j<b;j++){r.push(G.fields[j].name);}}}}return r;};
M.prototype._getAllFilterableFieldsByEntity=function(e,i,I,c){var a=[],E,o,m,n,r,b,d,g;if(!this._oMetaModel||!e){return undefined;}if(i){o=this._oMetaModel.getODataEntitySet(e);if(o){E=this._getEntityDefinition(o.entityType);}}else{E=this._getEntityDefinition(e);}if(E){a.push(this._getFilterableFieldsFromEntityDefinition(E,undefined,o));m=this._getFilterableAssociations(E,o);for(n in m){if(!c||(c.indexOf(n)>-1)){g=m[n];if(i){r=this._oMetaModel.getODataAssociationSetEnd(E,n);if(r.entitySet){d=this._oMetaModel.getODataEntitySet(r.entitySet);}}b=this._getEntityDefinition(g);if(b){if(I&&(b["sap:semantics"]==="parameters")){continue;}a.push(this._getFilterableFieldsFromEntityDefinition(b,n,d));}}}}return a;};
M.prototype.getAllFilterableFieldsByEntitySetName=function(e,i,c){if(!this._oMetaModel){return undefined;}return this._getAllFilterableFieldsByEntity(e,true,i,c);};
M.prototype.getAllFilterableFieldsByEntityTypeName=function(e){if(!this._oMetaModel){return undefined;}return this._getAllFilterableFieldsByEntity(e);};
M.prototype._getFilterableFieldsFromEntityDefinition=function(e,p,E){var o={},a=[],h=[],P=null,b,i,l,c=null;if(!this._oMetaModel||!e){return undefined;}if(!E){L.error("mandatory parameter 'oEntitySet' not set or null.");}else{b=e["com.sap.vocabularies.Common.v1.Label"];if(b){o.groupLabel=b.String;}o.groupEntitySetName=E.name;o.groupEntityTypeName=e.name;o.groupName=p;P=this._getFieldsByEntityDefinition(e,p);if(E){this._enrichEntitySetMetadata(P,E);}l=P.length;for(i=0;i<l;i++){c=P[i];if(c.filterable){if(c.visible){c.groupEntitySet=o.groupEntitySetName;c.groupEntityType=o.groupEntityTypeName;a.push(c);}else{h.push(c);}}}}o.fields=a;o.hiddenFields=h;return o;};
M.prototype._getFullyQualifiedNameForField=function(a,e){var n,E,r=a;if(e){n=e.namespace;E=e.name;}if(n&&E){r=n+"."+E+"/"+a;}return r;};
M.prototype.getFieldNameByFullyQualifiedFieldName=function(a){var r,n;r=this.removeNamespace(a);n=r.indexOf("/");r=r.substring(n+1);return r;};
M.prototype._getFilterableAssociations=function(e,E){return this._getAssociations(e,E,true,false);};
M.prototype._getAssociations=function(e,E,c,a){var m={},n=null,N=null,i,l=0,o=null;if(!this._oMetaModel||!e){return undefined;}n=e.navigationProperty;if(n&&n.length){l=n.length;for(i=0;i<l;i++){N=n[i];if(c){if(!this._isFilterable(N,E)||M.isHiddenFilter(N)){continue;}}o=this._oMetaModel.getODataAssociationEnd(e,N.name);if(!o||o.type===(e.namespace+"."+e.name)){continue;}if(a||o.multiplicity==="1"||o.multiplicity==="0..1"){if(m[N.name]===undefined){m[N.name]=o.type;}}}}return m;};
M.prototype.getParametersByEntitySetName=function(e){var r,a,m,n,b,c,d,o,E,g,h;h=this._oMetaModel.getODataEntitySet(e);if(h){E=this._getEntityDefinition(h.entityType);}a=this._getAssociations(E,null,false,false);for(n in a){c=a[n];o=this._oMetaModel.getODataAssociationSetEnd(E,n);if(o.entitySet){g=this._getEntityDefinition(c);if(g){if((g["sap:semantics"]==="parameters")&&g.key){r={entitySetName:o.entitySet,parameters:[],navPropertyName:""};for(var i=0;i<g.key.propertyRef.length;i++){r.parameters.push(g.key.propertyRef[i].name);}m=this._getAssociations(g,null,false,true);for(b in m){d=m[b];if(d===h.entityType){r.navPropertyName=b;break;}}return r;}}}}return null;};
M.prototype.getValueListAnnotationLazy=function(p,b){var P,v,B,o,a={additionalAnnotations:[],additionalAnnotationsWithPVQualifier:[]},r,c,d,e,q;o=new Promise(function(R,g){if(p&&this._oMetaModel){e=this.getPropertyContextByPath(p);d=p.split("/");c=d[1];if(e){P=e.getObject&&e.getObject();if(b&&M.hasValueListRelevantQualifiers(P)){B=this.oModel.getContext(b);v=this.getODataRelevantValueLists(e,B);}else{v=this._oMetaModel.getODataValueLists(e);}v.then(function(V){for(q in V){r={annotation:V[q]};if(r.annotation){this._enrichValueHelpAnnotation(r,c);if(!r.annotation["PresentationVariantQualifier"]){if(!q){a.primaryValueListAnnotation=r;}else{r.qualifier=q;a.additionalAnnotations.push(r);}}else{if(!q){a.primaryValueListAnnotationWithPVQualifier=r;}else{r.qualifier=q;a.additionalAnnotationsWithPVQualifier.push(r);}}}}R(a);}.bind(this),g);return;}}g();}.bind(this));return o;};
M.prototype.getODataRelevantValueLists=function(p,b){return this._oMetaModel.getODataValueLists(p).then(function(v){var q,P="",r={},R=this._getODataValueListRelevantQualifiers(p,b),h=Array.isArray(R)&&R.length>0;for(q in v){if((h&&R.indexOf(q)!==-1)||q===P){r[q]=v[q];}}return r;}.bind(this));};
M.prototype._getODataValueListRelevantQualifiers=function(p,b){var r,d=b.getModel(),P=p.getObject(),q=P["com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"];if(Array.isArray(q)&&d!==undefined){r=q.filter(function g(Q){var e,a,R,m,i=false,I=Q["If"],c=Q["String"];if(c){i=true;}else if(this._isBooleanStatement(I)){a=I[0]["Path"];m=d.getObject(a,b);if(m===true){i=true;}}else if(I){e=I[0]["Eq"];a=e[0]["Path"];R=e[1]["String"];m=d.getObject(a,b);if(R===m){i=true;}}return i;}.bind(this)).map(function e(Q){var a,i=Q["If"],c=Q["String"];if(c){a=c;}else if(i){a=i[1]&&i[1]["String"];}return a;});}return r;};
M.prototype._isBooleanStatement=function(o){var i=false;if(o&&o[0]&&o[0]["Eq"]===undefined&&o[0]["Path"]!==undefined){i=true;}return i;};
M.prototype.getValueListAnnotationForFunctionImport=function(v,p){var a={additionalAnnotations:[]},r,q;for(q in v){r={annotation:v[q]};if(r.annotation){this._enrichValueHelpAnnotation(r,p);if(!q){a.primaryValueListAnnotation=r;}else{r.qualifier=q;a.additionalAnnotations.push(r);}}}return a;};
M.prototype.getValueListAnnotation=function(p){var a={additionalAnnotations:[]},r,P,b,t,o,q;if(p&&this._oMetaModel){b=p.split("/");t=this._oMetaModel.getODataEntityType(b[0])||this._oMetaModel.getODataComplexType(b[0]);o=this._oMetaModel.getODataProperty(t,b[1]);if(o){P=o.name;for(var c in o){if(c==="com.sap.vocabularies.Common.v1.ValueList"||c.indexOf("com.sap.vocabularies.Common.v1.ValueList#")>-1){q=null;r={annotation:o[c]};b=c.split("#");if(b.length===2){q=b[1];}if(r.annotation){this._enrichValueHelpAnnotation(r,P);if(!q){a.primaryValueListAnnotation=r;}else{r.qualifier=q;a.additionalAnnotations.push(r);}}}}}}return a;};
M.prototype._getRecommendationListAnnotation=function(p){var P=p.split("/"),t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]),a=P[1],b=this._oMetaModel.getODataProperty(t,a,true),o=this._oMetaModel.createBindingContext(b),c=o.getObject();return c["com.sap.vocabularies.UI.v1.RecommendationList"];};
M.prototype._enrichValueHelpAnnotation=function(a,p){var r,R,e,k=[],K,I={},o={},c={},b,d,g,h=[],v=[],l,P,V,m,C,n,q=0,i=0,j=0,t=0,u,H=[];if(a&&a.annotation){r=a.annotation;if(r){R=r["SearchSupported"];a.isSearchSupported=R?R.Bool==="true":false;R=r["CollectionPath"];if(R){a.valueListEntitySetName=R.String;if(this._oMetaModel){e=this._oMetaModel.getODataEntitySet(a.valueListEntitySetName);}if(e){a.valueListEntityName=e.entityType;a.semantics=e["sap:semantics"];k=this.getKeysByEntitySetName(e.name);h=this.getFieldsByEntitySetName(e.name);}}R=r["Label"];if(R){a.valueListTitle=R.String;}l=r["Parameters"];if(h&&l){q=l.length;}for(i=0;i<q;i++){n=l[i];V=undefined;m=undefined;C=undefined;P=n["ValueListProperty"];if(P){V=P.String;}P=n["LocalDataProperty"];if(P){m=P.PropertyPath;}P=n["Constant"];if(P){C=P[Object.keys(P)[0]];}b=false;if(n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){b=true;}d=false;if(n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterOut"){d=true;}g=false;if(n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterConstant"){g=true;}if(b){I[m]=V;}if(d){o[m]=V;}if(g){c[V]=C;}if(d||n.RecordType==="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"){t=h.length;while(t--){if(h[t].name===V){v.push(h[t]);break;}}}if(!K&&d&&m===p){K=V;}if(M.hasImportance(n)&&this._getImportanceAnnotation(n)==="High"){for(j=0;j<h.length;j++){u=h[j];if(u.name===V){H.push(u);break;}}}}}a.inParams=I;a.outParams=o;a.constParams=c;a.fields=h;a.valueListFields=v;a.aHighImportanceFields=H;a.keys=k;a.keyField=K;a.descriptionField=this.getDescriptionFieldName(a.keyField,a.valueListEntitySetName);a.deprecationCodeField=this.getDeprecationCodeFieldName(h);}};
M.prototype._enrichRecommendationListAnnotation=function(r){var R={},a=[],e,m;R.annotation=r;m=r["CollectionPath"];if(m){R.path=m.String;}m=r["RankProperty"];if(m){R.rankProperty=m.String;}m=r["Binding"];if(m){a=m;}if(this._oMetaModel&&R.path){e=this._oMetaModel.getODataEntitySet(R.path);}if(e){R.entityName=e.name;R.keys=this.getKeysByEntitySetName(e.name);R.fields=this.getFieldsByEntitySetName(e.name);R.rankField=R.fields.filter(function(o){return o.name===R.rankProperty;});}a=a.map(function(o){var i=0;while(i<R.fields.length){if(R.fields[i].name===o.RecommendationListProperty.String){return R.fields[i];}i++;}return false;});R.fieldsToDisplay=a.concat(R.rankField);return R;};
M.prototype.getDescriptionFieldName=function(k,e){var a,i=0,l,o,d;if(typeof k==="object"){o=k;}else{a=this.getFieldsByEntitySetName(e);if(a){l=a.length;for(i=0;i<l;i++){o=a[i];if(o.name===k){break;}o=null;}}}if(o&&o["com.sap.vocabularies.Common.v1.Text"]){d=o["com.sap.vocabularies.Common.v1.Text"].Path;}return d;};
M.prototype.getDeprecationCodeFieldName=function(a){var i=0,l,o,d;for(i=0,l=a.length;i<l;i++){o=a[i];if(M.isTermDefaultTrue(o["com.sap.vocabularies.CodeList.v1.IsConfigurationDeprecationCode"])){d=o.name;break;}}return d;};
M.prototype.getIsSearchSupported=function(a){var i=false,p;if(a){p=a.SearchSupported;if(p&&p.Bool==="true"){i=true;}}return i;};
M.prototype.getValueListSemantics=function(a){var e,E,b;if(a){e=a["CollectionPath"]?a["CollectionPath"].String:undefined;}if(e){E=this._oMetaModel.getODataEntitySet(e);if(E){b=E["sap:semantics"];}}return b;};
M.prototype.getLineItemAnnotation=function(p,q){var e,t,a,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.LineItem";if(q){t+="#"+q;}a=e[t];if(a){r={annotation:a};this._enrichAnnotationWithUIDataField(r,a);}}}return r;};
M.prototype.isSemanticAggregation=function(p){var e;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){return e["sap:semantics"]==="aggregate";}}return false;};
M.prototype.getPresentationVariantAnnotation=function(p,q){var e,t,a,l,i,r,o,c,I;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.PresentationVariant";if(q){t+="#"+q;}a=e[t];if(a){r={annotation:a,requestAtLeastFields:[],sortOrderFields:[],groupByFields:[],maxItems:undefined};if(a.Visualizations){l=a.Visualizations.length;for(i=0;i<l;i++){I=a.Visualizations[i].AnnotationPath;if(!o&&(I==="@com.sap.vocabularies.UI.v1.LineItem"||I.indexOf("@com.sap.vocabularies.UI.v1.LineItem#")>-1)){o=e[I.substring(1)];r.lineItemAnnotation={annotation:o};this._enrichAnnotationWithUIDataField(r.lineItemAnnotation,o);}else if(!c&&(I==="@com.sap.vocabularies.UI.v1.Chart"||I.indexOf("@com.sap.vocabularies.UI.v1.Chart#")>-1)){c=e[I.substring(1)];r.chartAnnotation={annotation:c,semantics:e["sap:semantics"]};this._enrichChartAnnotation(r.chartAnnotation,c);}if(o&&c){break;}}}if(a.RequestAtLeast){l=a.RequestAtLeast.length;for(i=0;i<l;i++){r.requestAtLeastFields.push(a.RequestAtLeast[i].PropertyPath);}}if(a.SortOrder){l=a.SortOrder.length;for(i=0;i<l;i++){r.sortOrderFields.push({name:a.SortOrder[i].Property.PropertyPath,descending:a.SortOrder[i].Descending?a.SortOrder[i].Descending.Bool==="true":false});}}if(a.GroupBy){l=a.GroupBy.length;for(i=0;i<l;i++){r.groupByFields.push(a.GroupBy[i].PropertyPath);}}if(a.MaxItems){r.maxItems=a.MaxItems.Int;}}}}return r;};
M.prototype._enrichChartAnnotation=function(a,o){var i,l,b;if(a&&o){a.measureFields=[];a.dimensionFields=[];a.measureAttributes={};a.dimensionAttributes={};if(o.ChartType&&o.ChartType.EnumMember){a.chartType=o.ChartType.EnumMember;}if(o.Measures){l=o.Measures.length;for(i=0;i<l;i++){a.measureFields.push(o.Measures[i].PropertyPath);}}if(o.MeasureAttributes){l=o.MeasureAttributes.length;for(i=0;i<l;i++){b=o.MeasureAttributes[i];if(b.Measure){a.measureAttributes[b.Measure.PropertyPath]={role:b.Role?b.Role.EnumMember:null,dataPoint:b.DataPoint?b.DataPoint.AnnotationPath:null};}}}if(o.Dimensions){l=o.Dimensions.length;for(i=0;i<l;i++){a.dimensionFields.push(o.Dimensions[i].PropertyPath);}}if(o.DimensionAttributes){l=o.DimensionAttributes.length;for(i=0;i<l;i++){b=o.DimensionAttributes[i];if(b.Dimension){a.dimensionAttributes[b.Dimension.PropertyPath]={role:b.Role?b.Role.EnumMember:null,hierarchyLevel:b.HierarchyLevel?b.HierarchyLevel.Int:0};}}}}};
M.prototype.getChartAnnotation=function(p,q){var e,a,r,t;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){t="com.sap.vocabularies.UI.v1.Chart";if(q){t+="#"+q;}a=e[t];if(a){r={annotation:a,semantics:e["sap:semantics"]};this._enrichChartAnnotation(r,a);}}}return r;};
M.prototype.getDataPointAnnotation=function(p){var e,P,q,a,d,r={};if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){for(P in e){if(P==="com.sap.vocabularies.UI.v1.DataPoint"||P.indexOf("com.sap.vocabularies.UI.v1.DataPoint#")>-1){q=null;d=e[P];a=P.split("#");if(a.length===2){q=a[1];}if(d){if(q){if(!r.additionalAnnotations){r.additionalAnnotations={};}r.additionalAnnotations[q]=d;}else{r.primaryAnnotation=d;}}}}}}return r;};
M.prototype.getFieldGroupAnnotation=function(p){var e,q,P,r,a,R,b=[];if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var c in e){if(c==="com.sap.vocabularies.UI.v1.FieldGroup"||c.indexOf("com.sap.vocabularies.UI.v1.FieldGroup#")>-1){q=null;a=e[c];P=c.split("#");if(P.length===2){q=P[1];}if(a){R={annotation:a};if(q){R.groupName=q;}r=a["Label"];if(r){R.groupLabel=r.String;}r=a["Data"];if(r){this._enrichAnnotationWithUIDataField(R,r);}b.push(R);}}}}}return b;};
M.prototype.getFieldGroupsByFilterFacetsAnnotation=function(p){var e,P,q,r,R,a=this.getFieldGroupAnnotation(p);R=a;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var b in e){if(b==="com.sap.vocabularies.UI.v1.FilterFacets"||b.indexOf("com.sap.vocabularies.UI.v1.FilterFacets#")>-1){R=[];r=e[b];if(r){for(var i=0;i<r.length;i++){P=r[i].Target.AnnotationPath.split("#");if(P.length===2){q=P[1];}if(q){a.some(function(o){if(o.groupName===q){if(r[i].Label){o.groupLabel=r[i].Label.String;}R.push(o);return true;}return false;});}}}}}}}return R;};
M.prototype._enrichAnnotationWithUIDataField=function(a,r){var b=[],u={},l={},I={},c={},w={},p,d,P,e=0,i=0;if(a&&r){e=r.length;b=[];l={};for(i=0;i<e;i++){P=r[i];if(P&&(P.RecordType==="com.sap.vocabularies.UI.v1.DataField"||P.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){d=null;p=P["Value"];if(p){d=p.Path;}if(d){b.push(d);p=P["Url"];if(p){u[d]=this._extractURLInfo(p);}p=P["Label"];if(p&&p.String){l[d]=p.String;}I[d]=this._getImportanceAnnotation(P);p=P["Criticality"];if(p){c[d]=this._extractCriticalityInfo(p,P);}w[d]=this._getWidthAnnotation(P);}}}a.fields=b;a.urlInfo=u;a.labels=l;a.importance=I;a.criticality=c;a.width=w;}};
M.prototype._extractCriticalityInfo=function(c,r){var R,C;if(c.Path||c.EnumMember){R={};R["path"]=c.Path;R["criticalityType"]=c.EnumMember;C=r["CriticalityRepresentation"];if(C){if(C.Path){R["criticalityRepresentationPath"]=C.Path;}else if(C.EnumMember){R["criticalityRepresentationType"]=C.EnumMember;}}}return R;};
M.prototype._extractURLInfo=function(p){var r,P,l,o;if(p){if(p.Apply&&p.Apply.Name==="odata.fillUriTemplate"){r={urlTarget:undefined,parameters:[]};if(!this._oDummyAnnotationHelperContext){this._oDummyAnnotationHelperContext=this._oMetaModel.createBindingContext("/");}if(this._oDummyAnnotationHelperContext){r.urlTarget=A.format(this._oDummyAnnotationHelperContext,p);}P=p.Apply.Parameters;l=P&&P.length?P.length:0;while(l--){o=P[l];if(o&&o.Type==="LabeledElement"&&o.Value&&o.Value.Path){r.parameters.push(o.Value.Path);}}}else if(p.Path){r={urlPath:p.Path};}}return r;};
M.prototype.updateDataFieldDefault=function(o){var d=o&&o["com.sap.vocabularies.UI.v1.DataFieldDefault"],p;if(d&&(d.RecordType==="com.sap.vocabularies.UI.v1.DataField"||d.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl")){p=d["Label"];if(p&&p.String){o.label=p.String;}p=d["Criticality"];if(p){o.criticalityInfo=this._extractCriticalityInfo(p,d);}p=d["Url"];if(p){o.urlInfo=this._extractURLInfo(p);}o.width=this._getWidthAnnotation(d);o.importance=this._getImportanceAnnotation(d);}};
M.prototype.getSelectionVariantAnnotationList=function(p){var e,a,q,r=[],P;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){for(var b in e){if(b==="com.sap.vocabularies.UI.v1.SelectionVariant"||b.indexOf("com.sap.vocabularies.UI.v1.SelectionVariant#")>-1){q="";a=e[b];P=b.split("#");if(P.length===2){q=P[1];}if(a){r.push({qualifier:q,annotation:a});}}}}}return r;};
M.prototype.getSelectionPresentationVariantAnnotationList=function(e){var E,o,a,b,q,v,c,t=null,d=null,p=null,r=[],P;if(e&&this._oMetaModel){o=this._oMetaModel.getODataEntitySet(e);if(o){a=this._oMetaModel.getODataEntityType(o.entityType);}E=[o,a];var g=function(q,j){return j.filter(function(d){return d.qualifier===q;})[0];};var h=this.getEntityTypeNameFromEntitySetName(e);var i=this;E.forEach(function(j){if(j){for(var k in j){if(k==="com.sap.vocabularies.UI.v1.SelectionPresentationVariant"||k.indexOf("com.sap.vocabularies.UI.v1.SelectionPresentationVariant#")>-1){q="";b=j[k];P=k.split("#");if(P.length===2){q=P[1];}if(b){t=null;if(b.Text&&b.Text.String){t=b.Text.String;}if(b.SelectionVariant&&b.SelectionVariant.Path){c=b.SelectionVariant.Path;v="";P=c.split("#");if(P.length===2){v=P[1];}if(a[c.substring(1)]){var l=g(v,i.getSelectionVariantAnnotationList(h));d={qualifier:v,annotation:l?l.annotation:undefined};}}if(b.PresentationVariant&&b.PresentationVariant.Path){c=b.PresentationVariant.Path;v="";P=c.split("#");if(P.length===2){v=P[1];}if(a[c.substring(1)]){p={qualifier:v,annotation:i.getPresentationVariantAnnotation(h,v)};}}r.push({qualifier:q,text:t,annotation:b,selectionVariant:d,presentationVariant:p});}}}}});}return r;};
M.prototype.getSelectionFieldsAnnotation=function(p){var e,a,l,i,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(this._getFullyQualifiedNameForEntity(p));if(e){a=e["com.sap.vocabularies.UI.v1.SelectionFields"];if(a){r={annotation:a,selectionFields:[]};l=a.length;for(i=0;i<l;i++){r.selectionFields.push(a[i].PropertyPath);}}}}return r;};
M.prototype.getSemanticKeyAnnotation=function(p){var e,a,l,i,r;if(p&&this._oMetaModel){e=this._oMetaModel.getODataEntityType(p);if(e){a=e["com.sap.vocabularies.Common.v1.SemanticKey"];if(a){r={annotation:a,semanticKeyFields:[]};l=a.length;for(i=0;i<l;i++){r.semanticKeyFields.push(a[i].PropertyPath);}}}}return r;};
M.resolveEditableFieldFor=function(o){var r=o&&o["com.sap.vocabularies.Common.v1.EditableFieldFor"];return r&&r.PropertyPath;};
M.isPotentiallySensitive=function(o){return this.isTermTrue(o["com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]);};
M.prototype._getImportanceAnnotation=function(p){var i=null,r;r=p["com.sap.vocabularies.UI.v1.Importance"];if(r){i=r.EnumMember;}switch(i){case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";case"com.sap.vocabularies.UI.v1.ImportanceType/Low":return"Low";default:return"High";}};
M.prototype._getWidthAnnotation=function(p){var w=null,r,W,a=/\d*\.?\d+(px|em|rem)/gi;r=p["com.sap.vocabularies.HTML5.v1.CssDefaults"];if(r){W=r.width;if(W&&W.String&&a.test(W.String)){w=W.String;}}return w;};
M.prototype.getTextArrangementValue=function(p){var P,t,o,a,d;if(p&&this._oMetaModel){if(typeof(p)==="string"){p=this._getFullyQualifiedNameForEntity(p);P=p.split("/");if(P.length>1){t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);o=this._oMetaModel.getODataProperty(t,P[1]);}else{o=this._oMetaModel.getODataEntityType(p)||this._oMetaModel.getODataComplexType(p);}}else{o=p;}if(o){a=o["com.sap.vocabularies.UI.v1.TextArrangement"];}if(a){switch(a.EnumMember){case"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst":d="descriptionAndId";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextLast":d="idAndDescription";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate":d="idOnly";break;case"com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly":d="descriptionOnly";break;default:d=undefined;break;}}}return d;};
M.prototype.getSemanticObjectAnnotation=function(p){var P,t,o,a;if(p&&this._oMetaModel){P=p.split("/");t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);o=this._oMetaModel.getODataProperty(t,P[1]);if(o){a=o["com.sap.vocabularies.Common.v1.SemanticObject"];}return this._prepareSemanticObjectAnnotationFromProperty(a);}return null;};
M.prototype.getSemanticObjectsFromAnnotation=function(p){if(!p||!this._oMetaModel){return null;}var P=p.split("/");var t=this._oMetaModel.getODataEntityType(P[0])||this._oMetaModel.getODataComplexType(P[0]);return M.getSemanticObjectsFromProperty(this._oMetaModel.getODataProperty(t,P[1]));};
M.getSemanticObjectsFromProperty=function(p){var o={defaultSemanticObject:undefined,additionalSemanticObjects:[]};for(var a in p){if(a==="com.sap.vocabularies.Common.v1.SemanticObject"){o.defaultSemanticObject=p[a]["String"];}else if(a.startsWith("com.sap.vocabularies.Common.v1.SemanticObject#")){o.additionalSemanticObjects.push(p[a]["String"]);}}return(o.defaultSemanticObject||o.additionalSemanticObjects.length>0)?o:undefined;};
M.prototype.getSemanticObjectAnnotationFromProperty=function(p){var a;if(p){a=p["com.sap.vocabularies.Common.v1.SemanticObject"];return this._prepareSemanticObjectAnnotationFromProperty(a);}return null;};
M.prototype._prepareSemanticObjectAnnotationFromProperty=function(a){var r,R;if(a){r=a["String"];if(r){R={annotation:a};R.semanticObject=r;}}return R;};
M.prototype.getContactAnnotation=function(b){var m=this._oMetaModel.getMetaContext(b);var p=m.getProperty(m.getPath());return p["com.sap.vocabularies.Communication.v1.Contact"];};
M.prototype._getFullyQualifiedNameForEntity=function(e){var n,r;if(!e){return undefined;}if(e.indexOf(".")>-1){return e;}n=this.getNamespace();if(n&&!(e.indexOf(n)>-1)){r=n+"."+e;}else{r=e;}return r;};
M.prototype.getMultiUnitBehaviorEnabled=function(){var e=this._oMetaModel&&this._oMetaModel.getODataEntityContainer();return M.isTermDefaultTrue(e&&e["com.sap.vocabularies.Common.v1.ApplyMultiUnitBehaviorForSortingAndFiltering"]);};
M.getSelectionRangeOptionType=function(t){return s[t];};
M.getSelectionRangeSignType=function(t){return S[t];};
M.hasTextArrangementAnnotation=function(p){if(p["com.sap.vocabularies.UI.v1.TextArrangement"]||p["com.sap.vocabularies.Common.v1.Text"]&&p["com.sap.vocabularies.Common.v1.Text"]["com.sap.vocabularies.UI.v1.TextArrangement"]){return true;}return false;};
M.prototype.destroy=function(){this.oModel=null;this._oMetaModel=null;this._oMetadata=null;this._oSchemaDefinition=null;this._sResourceRootUri=null;this.bIsDestroyed=true;this._oDummyAnnotationHelperContext=null;};
return M;},true);
sap.ui.predefine('sap/ui/comp/odata/ODataModelUtil',["sap/ui/model/odata/v2/ODataModel"],function(O){"use strict";var a={handleModelInit:function(s,m,w){var l=false,M;if(s&&!s._bMetaModelLoadAttached&&m){M=s.getModel();if(M){if(M.getMetadata()&&M instanceof O){l=true;}else if(M.bLoadMetadataAsync||(M.getServiceMetadata&&!M.getServiceMetadata())){l=true;}s._bMetaModelLoadAttached=true;if(l&&M.getMetaModel()&&M.getMetaModel().loaded){if(!w){M.getMetaModel().loaded().then(m.bind(s));}else{this._getFlexRuntimeInfoAPI().then(function(F){var p;if(!F.isFlexSupported({element:s})){p=Promise.resolve();}else{p=F.waitForChanges({element:s});}Promise.all([M.getMetaModel().loaded(),p]).then(m.bind(s));});}}else{m.apply(s);}}}},_getFlexRuntimeInfoAPI:function(){return sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){return new Promise(function(r){sap.ui.require(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(F){r(F);});});});}};return a;},true);
sap.ui.predefine('sap/ui/comp/odata/ODataType',['sap/ui/model/odata/type/Boolean','sap/ui/model/odata/type/Byte','sap/ui/model/odata/type/DateTime','sap/ui/model/odata/type/DateTimeOffset','sap/ui/model/odata/type/Decimal','sap/ui/model/odata/type/Double','sap/ui/model/odata/type/Single','sap/ui/model/odata/type/Guid','sap/ui/model/odata/type/Int16','sap/ui/model/odata/type/Int32','sap/ui/model/odata/type/Int64','sap/ui/model/odata/type/SByte','sap/ui/model/odata/type/String','sap/ui/model/odata/type/Time','sap/ui/comp/odata/type/StringDate','sap/ui/comp/odata/type/FiscalDate','sap/ui/comp/odata/type/NumericText'],function(B,a,D,b,c,d,S,G,I,e,f,g,h,T,i,F,N){"use strict";var u={"Edm.Boolean":B,"Edm.Byte":a,"Edm.DateTime":D,"Edm.DateTimeOffset":b,"Edm.Decimal":c,"Edm.Double":d,"Edm.Float":S,"Edm.Guid":G,"Edm.Int16":I,"Edm.Int32":e,"Edm.Int64":f,"Edm.SByte":g,"Edm.Single":S,"Edm.String":h,"Edm.Time":T};var m={"Edm.Boolean":"Bool","Edm.Byte":"Int","Edm.DateTime":"Date","Edm.DateTimeOffset":"DateTimeOffset","Edm.Decimal":"Decimal","Edm.Double":"Float","Edm.Float":"Float","Edm.Guid":"Guid","Edm.Int16":"Int","Edm.Int32":"Int","Edm.Int64":"Int","Edm.SByte":"Int","Edm.Single":"Float","Edm.String":"String","Edm.Time":"TimeOfDay"};var n={"Edm.Byte":true,"Edm.Decimal":true,"Edm.Double":true,"Edm.Float":true,"Edm.Int16":true,"Edm.Int32":true,"Edm.Int64":true,"Edm.SByte":true,"Edm.Single":true};var j={"Edm.DateTime":true,"Edm.DateTimeOffset":true,"Edm.Time":true};var O={getType:function(t,o,C,s){var k=null,_;if(s){if(typeof s==="boolean"||s.isCalendarDate){return new i(o);}if(s.isFiscalDate){return new F(o,C,{anotationType:s.fiscalType});}if(C&&C.isDigitSequence){return new N(o,C);}}_=u[t];if(_){k=new _(o,C);}return k;},isNumeric:function(t){return n[t]?true:false;},isDateOrTime:function(t){return j[t]?true:false;},getDefaultValueTypeName:function(t){return m[t];},getTypeName:function(t){if(t.indexOf("Edm.")===0){return t.substring(4);}return t;}};return O;},true);
sap.ui.predefine('sap/ui/comp/odata/type/FiscalDate',["sap/ui/core/Core","sap/ui/core/library","sap/ui/comp/smartfield/type/String","sap/ui/comp/odata/type/NumericText","sap/ui/comp/odata/FiscalFormat","sap/ui/model/ValidateException"],function(C,c,S,N,F,V){"use strict";
var a=S.extend("sap.ui.comp.odata.type.FiscalDate",{constructor:function(f,o,s){S.call(this,f,o);if(this.oConstraints&&this.oConstraints.isDigitSequence){N.call(this,f,o);}this.sAnotationType=s.anotationType;this.formatter=F.getDateInstance(Object.assign({format:a.oDateFormats[s.anotationType],calendarType:c.CalendarType.Gregorian},f));}});
a.prototype.parseValue=function(v){if(v===""){return null;}if(this.oConstraints&&this.oConstraints.isDigitSequence){return this.formatter.parse(N.prototype.parseValue.apply(this,arguments));}return this.formatter.parse(S.prototype.parseValue.apply(this,arguments));};
a.prototype.formatValue=function(v){var f;if(this.oConstraints&&this.oConstraints.isDigitSequence){f=N.prototype.formatValue.apply(this,arguments);}else{f=S.prototype.formatValue.apply(this,arguments);}if(f===null){return null;}return this.formatter.format(f);};
a.prototype.validateValue=function(v){try{S.prototype.validateValue.apply(this,arguments);}catch(e){if(!this.formatter.validate(v)){throw new V(this.getErrorMessage(this.sAnotationType));}}if(v===null){return;}if(!this.formatter.validate(v)){throw new V(this.getErrorMessage(this.sAnotationType));}};
a.prototype.destroy=function(){S.prototype.destroy.apply(this,arguments);if(this.formatter){this.formatter.destroy();this.formatter=null;}};
a.prototype.getErrorMessage=function(A){var v;this.iFullYear=this.iFullYear||new Date().getFullYear().toString();switch(A){case"com.sap.vocabularies.Common.v1.IsFiscalYear":v=this.iFullYear;break;case"com.sap.vocabularies.Common.v1.IsFiscalPeriod":v="001";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":v=this.iFullYear+"001";break;case"com.sap.vocabularies.Common.v1.IsFiscalQuarter":v="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearQuarter":v=this.iFullYear+"1";break;case"com.sap.vocabularies.Common.v1.IsFiscalWeek":v="01";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearWeek":v=this.iFullYear+"01";break;case"com.sap.vocabularies.Common.v1.IsDayOfFiscalYear":v="1";break;case"com.sap.vocabularies.Common.v1.IsFiscalYearVariant":break;default:v=this.iFullYear;}return C.getLibraryResourceBundle("sap.ui.comp").getText("FISCAL_VALIDATION_FAILS",[this.formatValue(v,"string")]);};
a.oDateFormats={"com.sap.vocabularies.Common.v1.IsFiscalYear":"YYYY","com.sap.vocabularies.Common.v1.IsFiscalPeriod":"PPP","com.sap.vocabularies.Common.v1.IsFiscalYearPeriod":"YYYYPPP","com.sap.vocabularies.Common.v1.IsFiscalQuarter":"Q","com.sap.vocabularies.Common.v1.IsFiscalYearQuarter":"YYYYQ","com.sap.vocabularies.Common.v1.IsFiscalWeek":"WW","com.sap.vocabularies.Common.v1.IsFiscalYearWeek":"YYYYWW","com.sap.vocabularies.Common.v1.IsDayOfFiscalYear":"d","com.sap.vocabularies.Common.v1.IsFiscalYearVariant":""};
a.prototype.getName=function(){return"sap.ui.comp.odata.type.FiscalDate";};
a.prototype.getFormatter=function(){return this.formatter;};
return a;});
sap.ui.predefine('sap/ui/comp/odata/type/NumericText',["sap/ui/core/Core","sap/ui/core/library","sap/ui/comp/smartfield/type/String"],function(C,c,S){"use strict";
var N=S.extend("sap.ui.comp.odata.type.NumericText",{constructor:function(f,o){S.call(this,f,o);this.oCustomRegex=new RegExp("^[0]*$");}});
N.prototype.parseValue=function(v,s,b){if(this.oCustomRegex.test(v)&&!b){if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return null;}return S.prototype.parseValue.apply(this,arguments);};
N.prototype.formatValue=function(v,s,b){if(this.oCustomRegex.test(v)){if(b){return"0";}return null;}return S.prototype.formatValue.apply(this,arguments);};
N.prototype.destroy=function(){S.prototype.destroy.apply(this,arguments);};
return N;});
sap.ui.predefine('sap/ui/comp/p13n/P13nConditionPanel',['sap/m/P13nConditionPanel','sap/m/library','sap/ui/core/library','sap/ui/core/Control','sap/ui/core/IconPool','sap/ui/Device','sap/ui/core/InvisibleText','sap/ui/core/ResizeHandler','sap/ui/core/Item','sap/ui/core/ListItem','sap/ui/model/odata/type/Boolean','sap/ui/model/type/String','sap/ui/model/odata/type/String','sap/ui/model/type/Date','sap/ui/model/type/Time','sap/ui/model/odata/type/DateTime','sap/ui/model/type/Float','sap/ui/layout/Grid','sap/ui/layout/GridData','sap/m/Button','sap/m/OverflowToolbar','sap/m/OverflowToolbarLayoutData','sap/m/ToolbarSpacer','sap/m/Text','sap/m/SearchField','sap/m/CheckBox','sap/m/ComboBox','sap/m/Select','sap/m/Label','sap/m/Input','sap/m/DatePicker','sap/m/TimePicker','sap/m/DateTimePicker','sap/base/Log','sap/ui/thirdparty/jquery','sap/ui/comp/odata/type/StringDate','sap/ui/comp/p13n/P13nOperationsHelper','sap/m/P13nConditionPanelRenderer',"sap/ui/model/json/JSONModel",'sap/ui/model/Sorter'],function(P,a,c,C,I,D,b,R,d,L,B,S,e,f,T,g,F,G,h,k,O,m,o,p,q,r,s,t,u,v,w,x,y,z,Q,A,E,H,J,K){"use strict";var M=a.ButtonType,N=a.P13nConditionOperation,U=a.P13nConditionOperationType,V=c.ValueState,W=[N.BT,N.EQ,N.LE,N.LT,N.GE,N.GT,N.NotBT,N.NotEQ,N.NotLE,N.NotLT,N.NotGE,N.NotGT];
var X=P.extend("sap.ui.comp.p13n.P13nConditionPanel",{
metadata:{library:"sap.ui.comp.p13n"},
renderer:H.renderer
});
X.prototype.init=function(){this._oRbComp=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");P.prototype.init.apply(this);this._oOperationsHelper=new E();};
X.prototype.setOperations=function(i,j,l){var n=l?U.Exclude:U.Include;j=j||"default";if(this._oTypeOperations[j]===undefined){this._oTypeOperations[j]={};}this._oTypeOperations[j][n]=i;this._updateAllOperations();};
X._createKeyFieldTypeInstance=function(i){var j;if(!i.typeInstance){switch(i.type){case"boolean":i.typeInstance=new B();break;case"numc":if(!(i.formatSettings&&i.formatSettings.isDigitSequence)){z.error("sap.m.P13nConditionPanel","NUMC type support requires isDigitSequence==true!");i.formatSettings=Object.assign({},i.formatSettings,{isDigitSequence:true});}j=i.formatSettings;if(i.maxLength){j=Object.assign({},j,{maxLength:i.maxLength});}if(!j.maxLength){z.error("sap.m.P13nConditionPanel","NUMC type suppport requires maxLength!");}i.typeInstance=new e({},j);break;case"date":i.typeInstance=new f(Object.assign({},i.formatSettings,{strictParsing:true}),{});break;case"time":i.typeInstance=new T(Object.assign({},i.formatSettings,{strictParsing:true}),{});break;case"datetime":i.typeInstance=new g(Object.assign({},i.formatSettings,{strictParsing:true}),{displayFormat:"Date"});var n=i.typeInstance;if(!n.oFormat){n.formatValue(new Date(),"string");}if(n.oFormat){n.oFormat.oFormatOptions.UTC=false;}break;case"stringdate":i.typeInstance=new A(Object.assign({},i.formatSettings,{strictParsing:true}));break;case"numeric":if(i.precision||i.scale){j={};if(i.precision){j["maxIntegerDigits"]=parseInt(i.precision);}if(i.scale){j["maxFractionDigits"]=parseInt(i.scale);}}i.typeInstance=new F(j);break;default:var l=i.formatSettings;if(i.maxLength){l=Object.assign({},l,{maxLength:i.maxLength});}i.typeInstance=new S({},l);break;}}};
X.prototype.setKeyFields=function(i){this._aKeyFields=i;this._aKeyFields.forEach(function(j){X._createKeyFieldTypeInstance(j);},this);this._updateKeyFieldItems(this._oConditionsGrid,true);this._updateAllConditionsEnableStates();this._createAndUpdateAllKeyFields();this._updateAllOperations();this._updateConditionFields();};
X.prototype.setValues=function(i,j){j=j||"default";this._oTypeValues[j]=i;};
X.prototype.addOperation=function(i,j,l){var n=l?U.Exclude:U.Include;j=j||"default";if(this._oTypeOperations[j]===undefined){this._oTypeOperations[j]={};}if(this._oTypeOperations[j][n]===undefined){this._oTypeOperations[j][n]=[];}this._oTypeOperations[j][n].push(i);this._updateAllOperations();};
X.prototype.getOperations=function(i,j){var l,n,Y,Z;i=i||"default";if(j!==undefined){l=j?U.Exclude:U.Include;Z=this._oTypeOperations[i]&&this._oTypeOperations[i][l]||[];}else{n=this._oTypeOperations[i]&&this._oTypeOperations[i][U.Include]||[];Y=this._oTypeOperations[i]&&this._oTypeOperations[i][U.Exclude]||[];Z=n.concat(Y);}return Z;};
X.prototype._updatePaginatorToolbar=function(){if(this._sConditionType!=="Filter"||this.getMaxConditions()!=="-1"){return;}var i=this._aConditionKeys.length;var j=1+Math.floor(Math.max(0,i-1)/this._iConditionPageSize);var l=1+Math.floor(this._iFirstConditionIndex/this._iConditionPageSize);var n=this.getParent();if(!this._oPaginatorToolbar){if(i>this._iConditionPageSize){this._createPaginatorToolbar();this.insertAggregation("content",this._oPaginatorToolbar,0);this._onGridResize();}else{if(n&&n.getMetadata().getName()==="sap.m.Panel"){if(this._sOrgHeaderText==undefined){this._sOrgHeaderText=n.getHeaderText();}}return;}}this._oPrevButton.setEnabled(this._iFirstConditionIndex>0);this._oNextButton.setEnabled(this._iFirstConditionIndex+this._iConditionPageSize<i);if(n&&n.setHeaderToolbar){if(!n.getHeaderToolbar()){this.removeAggregation("content",this._oPaginatorToolbar);n.setHeaderToolbar(this._oPaginatorToolbar);n.attachExpand(function($){this._setToolbarElementVisibility($.getSource().getExpanded()&&this._bPaginatorButtonsVisible);}.bind(this));}}if(n&&n.getMetadata().getName()==="sap.m.Panel"){if(this._sOrgHeaderText==undefined){this._sOrgHeaderText=n.getHeaderText();}var Y=this._sOrgHeaderText+(i>0?" ("+i+")":"");this._oHeaderText.setText(Y);}else{this._oHeaderText.setText(i+" Conditions");}this._oPageText.setText(l+"/"+j);this._bPaginatorButtonsVisible=this._bPaginatorButtonsVisible||j>1;this._setToolbarElementVisibility(this._bPaginatorButtonsVisible);if(l>j){this._iFirstConditionIndex-=Math.max(0,this._iConditionPageSize);this._clearConditions();this._fillConditions();}var Z=0;this._oConditionsGrid.getContent().forEach(function($){if($.select.getSelected()){Z++;}},this);if(j==l&&(i-this._iFirstConditionIndex)>Z){this._clearConditions();this._fillConditions();}};
X.prototype._setToolbarElementVisibility=function(i){this._oPrevButton.setVisible(i);this._oNextButton.setVisible(i);this._oPageText.setVisible(i);this._oFilterField.setVisible(false);this._setLayoutVisible(this._oAddButton,i);this._setLayoutVisible(this._oRemoveAllButton,i);};
X.prototype._unregisterResizeHandler=function(){if(this._sContainerResizeListener){R.deregister(this._sContainerResizeListener);this._sContainerResizeListener=null;}};
X.prototype._registerResizeHandler=function(){if(this.getContainerQuery()){this._sContainerResizeListener=R.register(this._oConditionsGrid,this._onGridResize.bind(this));this._onGridResize();}};
X.prototype._handleRemoveCondition=function(i,j){var l=i.getContent().indexOf(j);this._removeCondition(i,j);if(this.getAutoReduceKeyFieldItems()){this._updateKeyFieldItems(i,false);}if(l>=0){l=Math.min(l,i.getContent().length-1);var j=i.getContent()[l];setTimeout(function(){j.remove.focus();});}this._updatePaginatorToolbar();};
X.prototype._getCurrentKeyFieldItem=function(i){if(i.getSelectedKey&&i.getSelectedKey()){var j=i.getSelectedKey();var l=this._aKeyFields;for(var n in l){var Y=l[n];if(Y.key===j){return Y;}}}return null;};
X.prototype._createConditionRow=function(i,j,l,n,Y){var Z,$=this,_=new J();if(n===undefined){n=i.getContent().length;}var a1=new G({width:"100%",defaultSpan:"L12 M12 S12",hSpacing:1,vSpacing:0,containerQuery:this.getContainerQuery()}).data("_key",l);for(var b1 in this._aConditionsFields){var c1;var d1=this._aConditionsFields[b1];switch(d1["Control"]){case"CheckBox":c1=new r({enabled:false,layoutData:new h({span:d1["Span"+this._sConditionType]})});this._setLayoutVisible(c1,false);if(d1["ID"]==="showIfGrouped"){c1.setEnabled(true);c1.setText(d1["Label"]);c1.attachSelect(function(){$._changeField(a1);});c1.setSelected(j?j.showIfGrouped:true);}else{if(j){c1.setSelected(true);c1.setEnabled(true);}}break;case"ComboBox":if(d1["ID"]==="keyField"){c1=new s({width:"100%",ariaLabelledBy:this._oInvisibleTextField});var e1=c1.setSelectedKey.bind(c1);c1.setSelectedKey=function(l){e1(l);var s1=$.getValidationExecutor();if(s1){s1();}};var f1=c1.setSelectedItem.bind(c1);c1.setSelectedItem=function(s1){f1(s1);var t1=$.getValidationExecutor();if(t1){t1();}};c1.setLayoutData(new h({span:d1["Span"+this._sConditionType]}));this._fillKeyFieldListItems(c1,this._aKeyFields);if(c1.attachSelectionChange){c1.attachSelectionChange(function(s1){var t1=$.getValidationExecutor();if(t1){t1();}$._handleSelectionChangeOnKeyField(i,a1);});}if(c1.attachChange){c1.attachChange(function(s1){a1.keyField.close();$._handleChangeOnKeyField(i,a1);});}if(c1.setSelectedItem){if(j){c1.setSelectedKey(j.keyField);this._aKeyFields.forEach(function(g1,s1){var t1=g1.key;if(t1===undefined){t1=g1;}if(j.keyField===t1){c1.setSelectedItem(c1.getItems()[s1]);}},this);}else{if(this.getUsePrevConditionSetting()&&!this.getAutoReduceKeyFieldItems()){if(n>0&&!l&&Y){Z=i.getContent()[n-1];if(Z.keyField.getSelectedKey()){c1.setSelectedKey(Z.keyField.getSelectedKey());}else{if(!c1.getSelectedItem()&&c1.getItems().length>0){c1.setSelectedItem(c1.getItems()[0]);}}}else{this._aKeyFields.some(function(g1,s1){if(g1.isDefault){c1.setSelectedItem(c1.getItems()[s1]);return true;}if(!c1.getSelectedItem()&&g1.type!=="boolean"){c1.setSelectedItem(c1.getItems()[s1]);}},this);if(!c1.getSelectedItem()&&c1.getItems().length>0){c1.setSelectedItem(c1.getItems()[0]);}}}else{this._aKeyFields.forEach(function(g1,s1){if(g1.isDefault){c1.setSelectedItem(c1.getItems()[s1]);}},this);}}}}if(d1["ID"]==="operation"){c1=new s({width:"100%",ariaLabelledBy:this._oInvisibleTextOperator,layoutData:new h({span:d1["Span"+this._sConditionType]})});c1.addEventDelegate({onmouseup:function(){if(!this.isOpen()){this.showItems();}}},c1);c1.setFilterFunction(function(){return true;});c1.setModel(_);c1.attachChange(function(s1){$._validateOperationValue(s1);$._handleChangeOnOperationField(i,a1);});a1[d1["ID"]]=c1;this._updateOperationItems(i,a1);var g1=this._getCurrentKeyFieldItem(a1.keyField),h1=this._getRelevantOperations(g1);if(j){var i1=this.getCurrentOparation(j);h1.some(function(s1){if(i1===s1){c1.setSelectedKey(s1);return true;}},this);}else{if(this.getUsePrevConditionSetting()){if(n>0&&l===null){var Z=i.getContent()[n-1],j1=Z.operation.getSelectedKey()||h1[0];c1.setSelectedKey(j1);}else{c1.setSelectedKey(h1[0]);}}}}if(c1.getSelectedItem&&c1.getSelectedItem()&&c1.getMetadata()._sUIDToken!=="box"){c1.setTooltip(c1.getSelectedItem().getTooltip());}break;case"TextField":var k1=this._getCurrentKeyFieldItem(a1.keyField);c1=this._createValueField(k1,d1,a1);c1.oTargetGrid=i;if(c1.addAriaDescribedBy){c1.addAriaDescribedBy(this._oInvisibleTextOperatorInputValue);}if(j&&j[d1["ID"]]!==undefined){var l1=j[d1["ID"]];if(c1 instanceof t){if(typeof l1==="boolean"){c1.setSelectedIndex(l1?2:1);}}else if(l1!==null&&a1.oType){if(typeof l1==="string"&&a1.oType.getName()==="sap.ui.comp.odata.type.StringDate"){c1.setValue(l1);}else{var m1=a1&&a1.operation&&W.indexOf(a1.operation.getSelectedKey())!==-1;if(typeof l1==="string"&&["String","sap.ui.model.odata.type.String","sap.ui.model.odata.type.Decimal"].indexOf(a1.oType.getName())==-1){try{l1=a1.oType.parseValue(l1,"string",m1);c1.setValue(a1.oType.formatValue(l1,"string",m1));}catch(n1){z.error("sap.m.P13nConditionPanel","Value '"+l1+"' does not have the expected type format for "+a1.oType.getName()+".parseValue()");}}else{c1.setValue(a1.oType.formatValue(l1,"string",m1));if(c1.isA("sap.m.ComboBox")){if(l1===""){c1.getModel().attachEventOnce("batchRequestCompleted",function(c1){c1.setSelectedItem(c1.getItems()[0]);}.bind(null,c1));}else{c1.setSelectedKey(l1);}}}}}else{c1.setValue(l1);}}break;case"Label":c1=new u({text:d1["Text"]+":",visible:this.getShowLabel(),layoutData:new h({span:d1["Span"+this._sConditionType]})}).addStyleClass("conditionLabel");c1.oTargetGrid=i;break;}a1[d1["ID"]]=c1;a1.addContent(c1);}this._addButtons(a1,i);i.insertContent(a1,n);this._updateOperationItems(i,a1);this._changeOperationValueFields(i,a1);this._updateAllConditionsEnableStates();this._updateConditionButtons(i);if(this.getAutoReduceKeyFieldItems()){this._updateKeyFieldItems(i,false);}if(this._sLayoutMode){this._updateLayout({name:this._sLayoutMode});}if(j){var o1=this._getFormatedConditionText(j.operation,j.value1,j.value2,j.exclude,j.keyField,j.showIfGrouped);j._oGrid=a1;j.value=o1;this._oConditionsMap[l]=j;}var p1=a1.operation.getSelectedKey();if(p1==="BT"&&a1.value1.setMinDate&&a1.value2.setMaxDate){var q1=a1.value1.getDateValue();var r1=a1.value2.getDateValue();this._updateMinMaxDate(a1,q1,r1);}else{this._updateMinMaxDate(a1,null,null);}return a1;};
X.prototype._fillOperationListItems=function(i,j,l){var n={items:[]};if(l==="_STRING_"){l="";}if(l==="_TIME_"||l==="_DATETIME_"){l="_DATE_";}if(l==="_BOOLEAN_"||l==="_NUMC_"){l="";}i.destroyItems();if(j&&j.length>0){j.forEach(function(Y){var Z=this._oRb.getText("CONDITIONPANEL_OPTION"+l+Y);if(Z.startsWith("CONDITIONPANEL_OPTION")){Z=this._oRb.getText("CONDITIONPANEL_OPTION"+Y);}n.items.push({key:Y,text:Z,sorter:this._oOperationsHelper.isExcludeType(Y)?this._oRbComp.getText("VALUEHELPDLG_EXCLUDE"):this._oRbComp.getText("VALUEHELPDLG_INCLUDE"),tooltip:Z});}.bind(this));i.getModel().setData(n);i.bindAggregation("items",{path:"/items",sorter:new K("sorter",true,true),template:new L({key:"{key}",text:"{text}"})});}};
X.prototype._validateOperationValue=function(i){var j=i.getSource(),l=j.getSelectedKey(),n=j.getValue();if(!l&&n){j.setValueState(V.Error);j.setValueStateText(this._oRbComp.getText("VALUEHELPDLG_VALUE_NOT_EXIST",n));}else{j.setValueState(V.None);}};
X.prototype._fillKeyFieldListItems=function(i,j){i.destroyItems();for(var l in j){var n=j[l];i.addItem(new L({key:n.key,text:n.text,tooltip:n.tooltip}));}this._setLayoutVisible(i,i.getItems().length>1);};
X.prototype._updateOperationItems=function(i,j){var l=this._getCurrentKeyFieldItem(j.keyField);var n=l&&l.type||"";var Y=j.operation;var Z=Y.getSelectedItem();var $=this._getRelevantOperations(l);this._fillOperationListItems(Y,$,n?"_"+n.toUpperCase()+"_":"");if(Z&&Y.getItemByKey(Z.getKey())){Y.setSelectedKey(Z.getKey());}else{Y.setSelectedItem(Y.getItems()[1]);}this._sConditionType="Filter";if($[0]===N.Ascending||$[0]===N.Descending){this._sConditionType="Sort";}if($[0]===N.GroupAscending||$[0]===N.GroupDescending){this._sConditionType="Group";}this._adjustValue1Span(j);};
X.prototype._updateKeyFieldItems=function(l,Y,Z,$){var n=l.getContent().length;var i;var _={};if(!Y){for(i=0;i<n;i++){var a1=l.getContent()[i].keyField;var b1=a1.getSelectedKey();if(b1!=null&&b1!==""){_[b1]=true;}}}for(i=0;i<n;i++){var a1=l.getContent()[i].keyField;var c1=l.getContent()[i].select;var d1=a1.getSelectedKey();var j=0;var e1=this._aKeyFields;if(a1!==$){if(Z){j=e1.length-1;}else{a1.destroyItems();}for(j;j<e1.length;j++){var f1=e1[j];if(f1.key==null||f1.key===""||!_[f1.key]||f1.key===d1){a1.addItem(new L({key:f1.key,text:f1.text,tooltip:f1.tooltip}));}}this._setLayoutVisible(a1,a1.getItems().length>1);}if(d1){a1.setSelectedKey(d1);}else if(a1.getItems().length>0){a1.setSelectedItem(a1.getItems()[0]);}if(!c1.getSelected()){this._aKeyFields.some(function(g1,h1){if(g1.isDefault){a1.setSelectedItem(a1.getItems()[h1]);return true;}if(!a1.getSelectedItem()){if(g1.type!=="boolean"){a1.setSelectedItem(a1.getItems()[h1]);}}},this);}if(a1.getSelectedItem()){a1.setTooltip(a1.getSelectedItem().getTooltip());}}};
X.prototype._adjustValue1Span=function(i){if(this._sConditionType==="Filter"&&i.value1&&i.operation){var j=i.operation;var n=this._aConditionsFields[5]["Span"+this._sConditionType];var l=j.getSelectedKey();if(l!==N.BT&&l!==N.NotBT){n=this._aKeyFields.length>1?"L5 M11 S10":"XL8 L8 M8 S10";}var Y=i.value1.getLayoutData();if(Y.getSpan()!==n){Y.setSpan(n);}}};
X.prototype._changeField=function(i,j){var l=i.keyField.getSelectedKey();if(i.keyField.getSelectedItem()){i.keyField.setTooltip(i.keyField.getSelectedItem().getTooltip());}else{i.keyField.setTooltip(null);}var n=i.operation.getSelectedKey();var Y=this._oOperationsHelper.isExcludeType(n);n=Y?this._oOperationsHelper.getCorrespondingIncludeOperation(n):n;if(i.operation.getSelectedItem()){i.operation.setTooltip(i.operation.getSelectedItem().getTooltip());}else{i.operation.setTooltip(null);}var Z=function(l1,m1,j){var g1,n1,i=l1.getParent();if(l1.getDateValue&&!(l1.isA("sap.m.TimePicker"))&&m1.getName()!=="sap.ui.comp.odata.type.StringDate"){n1=l1.getDateValue();if(m1&&n1){if((j&&j.getParameter("valid"))||l1.isValidValue()){g1=m1.formatValue(n1,"string");}else{g1="";}}}else{g1=this._getValueTextFromField(l1);n1=g1;if(m1&&m1.getName()==="sap.ui.comp.odata.type.StringDate"){g1=m1.formatValue(n1,"string");}else if(m1&&g1){try{var o1=i&&i.operation&&W.indexOf(i.operation.getSelectedKey())!==-1;n1=m1.parseValue(g1,"string",o1);var d1=this._getCurrentKeyFieldItem(i.keyField);if(d1&&d1.type==="numc"&&!o1&&n1===null){g1=m1.formatValue(n1,"string",o1);l1.setValue(g1);}m1.validateValue(n1);if((l1.isA("sap.m.ComboBox")&&!l1.getSelectedKey())||j&&l1.getId()==j.getSource().getId()&&i.operation.getSelectedKey()===N.BT&&(this._isInvalidFiscalRange(i)||(this._isFieldNumeric(i)&&this._isInvalidRange(i)))){g1="";}}catch(p1){z.error("sap.m.P13nConditionPanel","not able to parse value "+g1+" with type "+m1.getName());g1="";}}}return[n1,g1];}.bind(this);var $=Z(i.value1,i.oType,j);var _=$[0],a1=$[1];$=Z(i.value2,i.oType,j);var b1=$[0],c1=$[1];if(this._hasSecondValue(n)){this._updateMinMaxDate(i,_,b1);}else{this._updateMinMaxDate(i,null,null);}var d1=this._getCurrentKeyFieldItem(i.keyField);if(d1&&d1.type==="numc"){if([N.Contains,N.EndsWith].indexOf(n)!=-1){_=i.oType.formatValue(_,"string");}}var e1=i.showIfGrouped.getSelected();var f1=i.select;var g1="";var h1;if(l===""||l==null){l=null;h1=this._getKeyFromConditionGrid(i);this._removeConditionFromMap(h1);this._enableCondition(i,false);var i1=this._getIndexOfCondition(i);if(f1.getSelected()){f1.setSelected(false);f1.setEnabled(false);this._bIgnoreSetConditions=true;this.fireDataChange({key:h1,index:i1,operation:"remove",newData:null});this._bIgnoreSetConditions=false;}return;}this._enableCondition(i,true);g1=this._getFormatedConditionText(n,a1,c1,Y,l,e1);var j1={"value":g1,"exclude":Y,"operation":n,"keyField":l,"value1":_,"value2":this._hasSecondValue(n)?b1:null,"showIfGrouped":e1};h1=this._getKeyFromConditionGrid(i);if(g1!==""||i.value1.isA("sap.m.ComboBox")){f1.setSelected(true);f1.setEnabled(true);var k1="update";if(!this._oConditionsMap[h1]){k1="add";}this._oConditionsMap[h1]=j1;if(k1==="add"){this._aConditionKeys.splice(this._getIndexOfCondition(i),0,h1);}i.data("_key",h1);this.fireDataChange({key:h1,index:this._getIndexOfCondition(i),operation:k1,newData:j1});}else if(this._oConditionsMap[h1]!==undefined){this._removeConditionFromMap(h1);i.data("_key",null);var i1=this._getIndexOfCondition(i);if(f1.getSelected()){f1.setSelected(false);f1.setEnabled(false);this._bIgnoreSetConditions=true;this.fireDataChange({key:h1,index:i1,operation:"remove",newData:null});this._bIgnoreSetConditions=false;}}this._updatePaginatorToolbar();};
X.prototype._getConditions=function(i){return{"index":this._iConditions,"key":this._createConditionKey(),"exclude":this._oOperationsHelper.isExcludeType(i.oOperation),"operation":i.oOperation,"keyField":i.oKeyField,"value1":i.oPastedValue,"value2":null};};
X.prototype._isFieldNumeric=function(i){var j=this._getCurrentKeyFieldItem(i.keyField),l=j.type;return!!(l==="numc"||l==="numeric");};
X.prototype._isFiscalField=function(i){var j=this._getCurrentKeyFieldItem(i.keyField);return j.typeInstance&&j.typeInstance.isA("sap.ui.comp.odata.type.FiscalDate");};
X.prototype._isInvalidRange=function(i){var j=i.value1.getValue(),l=i.value2.getValue();return!!(j&&l&&(Number(i.oType.parseValue(j,"string"))>Number(i.oType.parseValue(l,"string"))));};
X.prototype._isInvalidFiscalRange=function(i){var j,l,n,Y,Z=i.value1.getValue(),$=i.value2.getValue(),_=this._getCurrentKeyFieldItem(i.keyField),a1=_.typeInstance&&_.typeInstance.sAnotationType;if(!this._isFiscalField(i)||!Z||!$){return false;}if(a1==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"||a1==="com.sap.vocabularies.Common.v1.IsFiscalYearQuarter"||a1==="com.sap.vocabularies.Common.v1.IsFiscalYearWeek"){if(Z.indexOf("/")!==-1&&$.indexOf("/")!==-1){j=Z.split("/")[0];n=$.split("/")[0];l=Z.split("/")[1];Y=$.split("/")[1];return l===Y?j>n:l>Y;}}else{return parseFloat(Z)>parseFloat($);}};
X.prototype._validateAndFormatFieldValue=function(i){var j=i.oSource;var l=j.getParent();var n;var Y=this._oRbComp.getText("VALUEHELPVALDLG_FIELD_RANGE_MESSAGE"),Z=l&&l.operation&&W.indexOf(l.operation.getSelectedKey())!==-1;if(j.getDateValue&&i){n=i.getParameter("value");var $=i.getParameter("valid");this._makeFieldValid(j,$);return;}else{n=j.getValue&&j.getValue();}if(!l){return;}if(this.getDisplayFormat()==="UpperCase"&&n){n=n.toUpperCase();j.setValue(n);}if(l.oType&&n){try{var _=l.oType.parseValue(n,"string",Z);l.oType.validateValue(_);this._makeFieldValid(j,true);n=l.oType.formatValue(_,"string",Z);j.setValue(n);if(l.operation.getSelectedKey()===N.BT){if((this._isFieldNumeric(l)&&this._isInvalidRange(l,i))||this._isInvalidFiscalRange(l,i)){this._makeFieldValid(j,false,Y);}else{this._makeFieldValid(l.value1,true);this._makeFieldValid(l.value2,true);}}}catch(a1){var b1=a1.message;this._makeFieldValid(j,false,b1);}}else{this._makeFieldValid(j,true);}};
X.prototype._changeOperationValueFields=function(i,j){P.prototype._changeOperationValueFields.apply(this,arguments);var l=j.getContent().length,n=j.remove,Y=j.indexOfContent(n),Z=l-1;if(Y!==Z){j.insertContent(n,Z);}};
X.prototype._updateLayout=function(i){};
X.prototype._updateConditionFields=function(){this._aConditionsFields=this._createConditionsFields();};
X.prototype._addButtons=function(i,j){var l=this;var n=new k({type:M.Transparent,icon:I.getIconURI("decline"),tooltip:this._oRb.getText("CONDITIONPANEL_REMOVE"+(this._sAddRemoveIconTooltipKey?"_"+this._sAddRemoveIconTooltipKey:"")+"_TOOLTIP"),press:function(){l._handleRemoveCondition(this.oTargetGrid,i);},layoutData:new h({span:"XL1 L1 M1 S1"})});n.oTargetGrid=j;i.addContent(n);i["remove"]=n;var Y=new k({text:this._oRbComp.getText("VALUEHELPDLG_CONDITIONPANEL_ADD"),press:function(){l._handleAddCondition(this.oTargetGrid,i,true);},layoutData:new h({span:"XL2 L3 M3 S3",indent:"XL9 L8 M8 S7",linebreak:true}),ariaDescribedBy:l._oInvisibleTextOperatorAddButton});Y.oTargetGrid=j;Y.addStyleClass("conditionAddBtnFloatRight");i.addContent(Y);i["add"]=Y;};
X.prototype.getCurrentOparation=function(i){return i.exclude?this._oOperationsHelper.getCorrespondingExcludeOperation(i.operation):i.operation;};
X.prototype._hasSecondValue=function(i){return P.prototype._hasSecondValue.apply(this,arguments)||i===N.NotBT;};
X.prototype._hasNoValues=function(i){return P.prototype._hasNoValues.apply(this,arguments)||i===N.NotEmpty;};
X.prototype._createConditionsFields=function(){return[{"ID":"select","Label":"","SpanFilter":"L1 M1 S1","SpanSort":"L1 M1 S1","SpanGroup":"L1 M1 S1","Control":"CheckBox","Value":""},{"ID":"keyFieldLabel","Text":"Sort By","SpanFilter":"L1 M1 S1","SpanSort":"L1 M1 S1","SpanGroup":"L1 M1 S1","Control":"Label"},{"ID":"keyField","Label":"","SpanFilter":"L3 M5 S10","SpanSort":"L5 M5 S12","SpanGroup":"L4 M4 S12","Control":"ComboBox"},{"ID":"operationLabel","Text":"Sort Order","SpanFilter":"L1 M1 S1","SpanSort":"L1 M1 S1","SpanGroup":"L1 M1 S1","Control":"Label"},{"ID":"operation","Label":"","SpanFilter":this._aKeyFields.length>1?"L3 M6 S10":"XL3 L3 M3 S10","SpanSort":D.system.phone?"L5 M5 S8":"L5 M5 S9","SpanGroup":"L2 M5 S10","Control":"ComboBox"},{"ID":"value1","Label":this._sFromLabelText,"SpanFilter":this._aKeyFields.length>1?"L3 M10 S10":"XL4 L4 M4 S10","SpanSort":"L3 M10 S10","SpanGroup":"L3 M10 S10","Control":"TextField","Value":""},{"ID":"value2","Label":this._sToLabelText,"SpanFilter":this._aKeyFields.length>1?"L2 M10 S10":"XL4 L4 M4 S10","SpanSort":"L2 M10 S10","SpanGroup":"L2 M10 S10","Control":"TextField","Value":""},{"ID":"showIfGrouped","Label":this._sShowIfGroupedLabelText,"SpanFilter":"L1 M10 S10","SpanSort":"L1 M10 S10","SpanGroup":"L3 M4 S9","Control":"CheckBox","Value":"false"}];};
X.prototype._getSecondValueNegativeIndex=function(){return 2;};
X.prototype._getConditionsGridAtPosition=function(n){var i=this._oConditionsGrid.getContent();if(n>=i.length){return null;}return i[n];};
X.prototype._getConditionsCount=function(){var i=this._oConditionsGrid.getContent();return i.length;};
X.prototype.fireDataChange=function(i){var j,l=i.newData;if(l){j=l.operation;l.operation=this._oOperationsHelper.isExcludeType(j)?this._oOperationsHelper.getCorrespondingIncludeOperation(j):j;}return C.prototype.fireEvent.call(this,"dataChange",i);};
X.prototype._makeFieldValid=function(i,j,l,n){if(n){var Y=i.getSelectedItem();if(!Y){i.setValueState(V.Error);}else{i.setValueState(V.None);}}else if(j){i.setValueState(V.None);i.setValueStateText("");}else{i.setValueState(V.Warning);i.setValueStateText(l?l:this._sValidationDialogFieldMessage);}};
X.prototype._getRelevantOperations=function(i){var j,l=i&&i.typeInstance,n=l&&i.typeInstance.oConstraints&&i.typeInstance.oConstraints.isDigitSequence,Y=l&&(i.typeInstance.sAnotationType==="com.sap.vocabularies.Common.v1.IsFiscalPeriod"||i.typeInstance.sAnotationType==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod"),Z=n&&Y?"numcFiscal":i&&i.type,$=i&&i.type&&this.getOperations(Z);if(i&&i.operations){j=i.operations;}else if(Array.isArray($)&&$.length>0){j=$;}else{j=this.getOperations("default");}return j;};
X.prototype._createValueField=function(j,n,Y){var Z,$,_=this,a1={value:n["Value"],width:"100%",placeholder:n["Label"],change:function(g1){_._validateAndFormatFieldValue(g1);_._changeField(Y,g1);},layoutData:new h({span:n["Span"+this._sConditionType]})};if(j&&j.typeInstance){var b1=j.typeInstance;$=this._findConfig(b1,"ctrl");if($==="DateTimePicker"&&b1.getMetadata().getName()==="sap.ui.model.odata.type.DateTime"){if(!(b1.oConstraints&&b1.oConstraints.isDateOnly)){z.error("sap.m.P13nConditionPanel","sap.ui.model.odata.type.DateTime without displayFormat = Date is not supported!");b1.oConstraints=Object.assign({},b1.oConstraints,{isDateOnly:true});}$="DatePicker";}Y.oType=b1;if($=="select"){var c1=[];var d1=j.values||this._oTypeValues[$]||["",b1.formatValue(false,"string"),b1.formatValue(true,"string")];d1.forEach(function(g1,h1){c1.push(new d({key:h1.toString(),text:g1.toString()}));});a1={width:"100%",items:c1,change:function(){_._changeField(Y);_._makeFieldValid(Z,true);},layoutData:new h({span:n["Span"+this._sConditionType]})};Z=new t(a1);}else if($=="TimePicker"){if(b1.oFormatOptions&&b1.oFormatOptions.style){a1.displayFormat=b1.oFormatOptions.style;}Z=new x(a1);}else if($=="DateTimePicker"){if(b1.oFormatOptions&&b1.oFormatOptions.style){a1.displayFormat=b1.oFormatOptions.style;}Z=new y(a1);}else if($==="DatePicker"){if(b1.oFormatOptions){a1.displayFormat=b1.oFormatOptions.style||b1.oFormatOptions.pattern;if(b1.isA("sap.ui.comp.odata.type.StringDate")){a1.valueFormat="yyyyMMdd";}}Z=new w(a1);}else{var e1=this.data("dropdownFields");Z=new v(a1);if(e1){for(var i=0;i<e1.length;i++){if(e1[i].name===j.key){a1={width:"100%",items:[],change:function(){_._changeField(Y);_._makeFieldValid(Z,true,undefined,true);},layoutData:new h({span:n["Span"+this._sConditionType]})};Z=new s(a1);break;}}}if(this._fSuggestCallback){j=this._getCurrentKeyFieldItem(Y.keyField);if(j&&j.key){var f1=this._fSuggestCallback(Z,j.key);if(f1){Z._oSuggestProvider=f1;}}}}}else{Y.oType=null;Z=new v(a1);}if($!=="boolean"&&$!=="enum"&&Z){Z.onpaste=function(g1){var h1;if(window.clipboardData){h1=window.clipboardData.getData("Text");}else{h1=g1.originalEvent.clipboardData.getData('text/plain');}var Y=g1.srcControl.getParent();var i1=h1.split(/\r\n|\r|\n/g);if(i1&&i1[i1.length-1].trim()===""){i1.pop();}var j1=Y.operation;var op=j1.getSelectedKey();if(i1&&i1.length>1&&op!=="BT"){setTimeout(function(){var k1=i1?i1.length:0;var l1=_._getCurrentKeyFieldItem(Y.keyField);var j1=Y.operation;for(var i=0;i<k1;i++){if(_._aConditionKeys.length>=_._getMaxConditionsAsNumber()){break;}var m1=i1[i].trim();if(m1){var n1;if(l1.typeInstance){try{n1=l1.typeInstance.parseValue(m1,"string");l1.typeInstance.validateValue(n1);}catch(o1){z.error("sap.m.P13nConditionPanel.onPaste","not able to parse value "+m1+" with type "+l1.typeInstance.getName());m1="";n1=null;}if(!n1){continue;}}var p1={"index":_._iConditions,"key":_._createConditionKey(),"exclude":_.getExclude()||_._oOperationsHelper.isExcludeType(j1.getSelectedKey()),"operation":j1.getSelectedKey(),"keyField":l1.key,"value1":n1,"value2":null};_._addCondition2Map(p1);_.fireDataChange({key:p1.key,index:p1.index,operation:"add",newData:p1});}}_._clearConditions();_._fillConditions();},0);}};}if(j&&j.maxLength&&Z.setMaxLength){var l=-1;if(typeof j.maxLength==="string"){l=parseInt(j.maxLength);}if(typeof j.maxLength==="number"){l=j.maxLength;}if(l>0&&(!Z.getShowSuggestion||!Z.getShowSuggestion())){Z.setMaxLength(l);}}return Z;};
X.prototype._enableCondition=function(i,j){var l=this._getCurrentKeyFieldItem(i.keyField);l&&l.type==="boolean"?i.operation.setEnabled(false):i.operation.setEnabled(j);i.value1.setEnabled(j);i.value2.setEnabled(j);i.showIfGrouped.setEnabled(j);};
X.prototype._getValueTextFromField=function(i){if(i instanceof t){return i.getSelectedItem()?i.getSelectedItem().getText():"";}if(i.isA("sap.m.ComboBox")){return i.getSelectedItem()?i.getSelectedItem().getKey():"";}return i.getValue();};
return X;});
sap.ui.predefine('sap/ui/comp/p13n/P13nFilterPanel',['sap/m/P13nFilterPanel','sap/ui/comp/p13n/P13nConditionPanel','sap/m/Panel','sap/m/library','sap/m/P13nFilterItem','sap/ui/comp/p13n/P13nOperationsHelper','sap/m/P13nFilterPanelRenderer'],function(P,a,b,l,c,d,e){"use strict";var f=l.P13nPanelType,g=l.P13nConditionOperation;
var h=P.extend("sap.ui.comp.p13n.P13nFilterPanel",{
metadata:{library:"sap.ui.comp.p13n"},
renderer:e.renderer
});
h.prototype.setConditions=function(C){this._oConditionPanel.setConditions(C);return this;};
h.prototype.getConditions=function(){return this._oConditionPanel.getConditions();};
h.prototype.setContainerQuery=function(C){this.setProperty("containerQuery",C);this._oConditionPanel.setContainerQuery(C);return this;};
h.prototype.setLayoutMode=function(m){this.setProperty("layoutMode",m);this._oConditionPanel.setLayoutMode(m);return this;};
h.prototype.validateConditions=function(){return this._oConditionPanel.validateConditions();};
h.prototype.removeInvalidConditions=function(){this._oConditionPanel.removeInvalidConditions();};
h.prototype.removeValidationErrors=function(){this._oConditionPanel.removeValidationErrors();};
h.prototype.setIncludeOperations=function(o,t){t=t||"default";this._aIncludeOperations[t]=o;if(this._oConditionPanel){this._oConditionPanel.setOperations(this._aIncludeOperations[t],t);}};
h.prototype.getIncludeOperations=function(t){if(this._oConditionPanel){return this._oConditionPanel.getOperations(t,false);}};
h.prototype.setExcludeOperations=function(o,t){t=t||"default";this._aExcludeOperations[t]=o;if(this._oConditionPanel){this._oConditionPanel.setOperations(this._aExcludeOperations[t],t,true);}};
h.prototype.getExcludeOperations=function(t){if(this._oConditionPanel){return this._oConditionPanel.getOperations(t,true);}};
h.prototype.setKeyFields=function(k,K){this._aKeyFields=k;if(this._oConditionPanel){k.some(function(o){if(o.isDefault){this._oConditionPanel.setAutoAddNewRow(true);}}.bind(this));this._oConditionPanel.setKeyFields(k);}};
h.prototype.setMaxIncludes=function(m){this.setProperty("maxIncludes",m);if(this._oConditionPanel){this._oConditionPanel.setMaxConditions(m);}return this;};
h.prototype.setMaxExcludes=function(m){this.setProperty("maxExcludes",m);return this;};
h.prototype.init=function(){this.setType(f.filter);this.setTitle(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("FILTERPANEL_TITLE"));this._aKeyFields=[];this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._aIncludeOperations={};this._aExcludeOperations={};this._oPanel=new b({expanded:true,expandable:false,width:"auto"}).addStyleClass("sapMFilterPadding");this._oConditionPanel=new a({maxConditions:this.getMaxIncludes(),alwaysShowAddIcon:false,layoutMode:this.getLayoutMode(),dataChange:this._handleDataChange()});this._oConditionPanel._sAddRemoveIconTooltipKey="FILTER";this._oPanel.addContent(this._oConditionPanel);this.addAggregation("content",this._oPanel);if(!this._oOperationsHelper){this._oOperationsHelper=new d();}this._updateOperations();};
h.prototype.onBeforeRendering=function(){var k=[],K,m,E=this.getEnableEmptyOperations();if(this._bUpdateRequired){this._bUpdateRequired=false;var M=this.getMessageStrip();if(M){M.addStyleClass("sapUiResponsiveMargin");this.insertAggregation("content",M,0);}K=[];m=(this.getBindingInfo("items")||{}).model;var G=function(n,o,i){var B=i.getBinding(n),j;if(B&&o){return o.getObject()[B.getPath()];}j=i.getMetadata();return j.hasProperty(n)?j.getProperty(n).get(i):j.getAggregation(n).get(i);};this.getItems().forEach(function(i){var o=i.getBindingContext(m),F,n,j;if(i.getBinding("key")){o.getObject()[i.getBinding("key").getPath()]=i.getKey();}K.push(F={key:i.getColumnKey(),text:G("text",o,i),tooltip:G("tooltip",o,i),maxLength:G("maxLength",o,i),type:G("type",o,i),typeInstance:G("typeInstance",o,i),formatSettings:G("formatSettings",o,i),precision:G("precision",o,i),scale:G("scale",o,i),isDefault:G("isDefault",o,i),values:G("values",o,i)});if(E){n=i.getNullable();j={};Object.keys(F).forEach(function(s){j[s]=F[s];});k.push(j);this._enhanceFieldOperationsWithEmpty(F,n);this._modifyFieldOperationsBasedOnMaxLength(j);}this._modifyFieldOperationsBasedOnMaxLength(F);},this);this.setKeyFields(K,k);var C=[];m=(this.getBindingInfo("filterItems")||{}).model;this.getFilterItems().forEach(function(F){var o=F.getBindingContext(m);if(F.getBinding("key")&&o){o.getObject()[F.getBinding("key").getPath()]=F.getKey();}C.push({key:F.getKey(),keyField:G("columnKey",o,F),operation:G("operation",o,F),value1:G("value1",o,F),value2:G("value2",o,F),exclude:G("exclude",o,F)});});this.setConditions(C);}};
h.prototype._updateOperations=function(){if(this.getMaxIncludes()!=0){this._oOperationsHelper.getIncludeTypes().forEach(function(t){this.setIncludeOperations(this._oOperationsHelper.getIncludeOperationsByType(t),t);}.bind(this));}if(this.getMaxExcludes()!=0){this._oOperationsHelper.getExcludeTypes().forEach(function(t){this.setExcludeOperations(this._oOperationsHelper.getExcludeOperationsByType(t),t);}.bind(this));}};
h.prototype._modifyFieldOperationsBasedOnMaxLength=function(F){var o;if(F.maxLength===1||F.maxLength==="1"){o=F.operations?F.operations:this._oConditionPanel.getOperations(F.type);F.operations=[];o.forEach(function(O){if([g.Contains,g.StartsWith,g.EndsWith].indexOf(O)===-1){F.operations.push(O);}},this);}};
h.prototype._enhanceFieldOperationsWithEmpty=function(F,n){var i,E,D=F&&F.typeInstance&&F.typeInstance.oConstraints&&F.typeInstance.oConstraints.isDigitSequence,j=F&&F.typeInstance&&(F.typeInstance.sAnotationType==="com.sap.vocabularies.Common.v1.IsFiscalPeriod"||F.typeInstance.sAnotationType==="com.sap.vocabularies.Common.v1.IsFiscalYearPeriod");if(["string","stringdate"].indexOf(F.type)>-1||(["date","datetime"].indexOf(F.type)>-1&&n&&!(D&&j)&&!this.bIsSingleIntervalRange)){i=this._oConditionPanel.getOperations(F.type,false).slice();E=this._oConditionPanel.getOperations(F.type,true).slice();if(i.length===0){i=this._oConditionPanel.getOperations("default",false);}if(E.length===0){E=this._oConditionPanel.getOperations("default",true);}if(i.indexOf(g.Empty)===-1){i.push(g.Empty);}if(E.indexOf(g.NotEmpty)===-1){E.push(g.NotEmpty);}if(!Array.isArray(F.operations)){F.operations=[];}F.operations=F.operations.concat(i).concat(E);}};
h.prototype._handleDataChange=function(){var t=this;return function(E){var n=E.getParameter("newData"),o=E.getParameter("operation"),k=E.getParameter("key"),i=E.getParameter("index"),F;switch(o){case"update":F=t.getFilterItems()[i];if(F){F.setExclude(n.exclude);F.setColumnKey(n.keyField);F.setOperation(n.operation);F.setValue1(n.value1);F.setValue2(n.value2);}t.fireUpdateFilterItem({key:k,index:i,filterItemData:F});t.fireFilterItemChanged({reason:"updated",key:k,index:i,itemData:{columnKey:n.keyField,operation:n.operation,exclude:n.exclude,value1:n.value1,value2:n.value2}});break;case"add":if(i>=0){i++;}F=new c({columnKey:n.keyField,exclude:n.exclude,operation:n.operation});F.setValue1(n.value1);F.setValue2(n.value2);t._bIgnoreBindCalls=true;t.fireAddFilterItem({key:k,index:i,filterItemData:F});t.fireFilterItemChanged({reason:"added",key:k,index:i,itemData:{columnKey:n.keyField,operation:n.operation,exclude:n.exclude,value1:n.value1,value2:n.value2}});t._bIgnoreBindCalls=false;break;case"remove":t._bIgnoreBindCalls=true;t.fireRemoveFilterItem({key:k,index:i});t.fireFilterItemChanged({reason:"removed",key:k,index:i});t._bIgnoreBindCalls=false;break;default:throw"Operation'"+o+"' is not supported yet";}t._notifyChange();};};
h.prototype.getConditionPanel=function(){return this._oConditionPanel;};
h.prototype.setInnerTitle=function(t){this._oPanel&&this._oPanel.setHeaderText(t);};
h.prototype.setSuggestCallback=function(s){if(this._oConditionPanel){this._oConditionPanel.setSuggestCallback(s);}};
return h;});
sap.ui.predefine('sap/ui/comp/p13n/P13nOperationsHelper',["sap/m/P13nOperationsHelper","sap/m/library"],function(P,l){"use strict";var O=l.P13nConditionOperation;var e="Not";var a=function(){P.apply(this,arguments);this.init();this.oIncludeOperations.numcFiscal=[O.EQ,O.BT,O.LT,O.LE,O.GT,O.GE];};a.prototype=Object.create(P.prototype);a.prototype.oIncludeOperationsOptinal={"optinal":[O.Empty]};a.prototype.oExcludeOperationsDefault={"default":[O.NotEQ]};a.prototype.oExcludeOperationsExtended={"default":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"string":[O.NotContains,O.NotEQ,O.NotBT,O.NotStartsWith,O.NotEndsWith,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"date":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"time":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"datetime":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"numeric":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"numc":[O.NotContains,O.NotEQ,O.NotBT,O.NotEndsWith,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"numcFiscal":[O.NotEQ,O.NotBT,O.NotLT,O.NotLE,O.NotGT,O.NotGE],"boolean":[O.NotEQ]};a.prototype.oExcludeOperationsOptional={"optinal":[O.NotEmpty]};
a.prototype.isExcludeType=function(o){return c(o,this.oExcludeOperationsExtended)||c(o,this.oExcludeOperationsOptional);};
a.prototype.getCorrespondingExcludeOperation=function(o){return e+o;};
a.prototype.getCorrespondingIncludeOperation=function(o){return o.slice(e.length);};
function c(s,o){var i,t,b,d,r=false;for(t in o){b=o[t];for(i=0;i<b.length;i++){d=b[i];if(d===s){r=true;break;}}if(r){break;}}return r;}
return a;},true);
sap.ui.predefine('sap/ui/comp/personalization/BaseController',['sap/ui/base/ManagedObject','sap/ui/comp/library','./Util','./ColumnHelper','sap/base/Log','sap/ui/mdc/p13n/P13nBuilder','sap/ui/model/json/JSONModel'],function(M,C,U,a,L,P,J){"use strict";
var B=M.extend("sap.ui.comp.personalization.BaseController",{metadata:{"abstract":true,library:"sap.ui.comp",properties:{type:{type:"string",defaultValue:null},itemType:{type:"string",defaultValue:null},ignoreColumnKeys:{type:"object",defaultValue:[]},additionalIgnoreColumnKeys:{type:"object",defaultValue:[]},stableColumnKeys:{type:"string[]",defaultValue:[]},columnHelper:{type:"sap.ui.comp.personalization.ColumnHelper",defaultValue:null},columnKeys:{type:"string[]",defaultValue:[]},tableType:{type:"string",defaultValue:null},messageStrip:{type:"sap.m.MessageStrip"}},associations:{table:{type:"sap.ui.core.Control",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{},afterPotentialModelChange:{parameters:{json:{type:"object"}}}}}});
B.prototype.exit=function(){if(this.getModel()){this.getModel().destroy();}if(this._oAdaptationModel){this._oAdaptationModel.destroy();this._oAdaptationModel=null;this.oPanel=null;}};
B.prototype.setModelFunction=function(){var t=this;return function(){if(!this.getModel("$sapmP13nPanel")){this.setModel(t.getInternalModel(),"$sapmP13nPanel");}};};
B.prototype.setTable=function(t){this.setAssociation("table",t);this.setTableType(U.getTableType(this.getTable()));return this;};
B.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};
B.prototype.getColumnMap=function(){return this.getColumnHelper().getColumnMap();};
B.prototype.createControlDataStructure=function(i){i=i||[];var j={};j[this.getType()]={};j[this.getType()][this.getItemType()]=i;return j;};
B.prototype.createColumnKeysStructure=function(c){c=c||[];var j={};j[this.getType()]={};j[this.getType()][this.getItemType()]=c.map(function(s){return{columnKey:s};});return j;};
B.prototype.checkConsistency=function(){var c=this.getColumnMap();this.getIgnoreColumnKeys().some(function(d){if(c[d]&&c[d].getVisible()){throw"The provided 'ignoreColumnKeys' for '"+this.getType()+"' are inconsistent. No columns specified as ignored is allowed to be visible.";}},this);var b=this.getColumnKeys();Object.keys(c).forEach(function(d){if(b.indexOf(d)<0){throw"The provided 'columnKeys' and columns are inconsistent. For the column '"+d+"' no entry in 'columnKeys' exists.";}});var s=this.getStableColumnKeys();s.forEach(function(S,i){if(c[S].getIndex()!=i){throw"The provided 'stableColumnKeys' are inconsistens. Please provide 'stableColumnKeys' by ascending indices of the columns, starting from index 0.";}});};
B.prototype.initializeInternalModel=function(m){["controlDataInitial","controlDataBase","controlData","alreadyKnownRuntimeData","alreadyKnownPersistentData"].forEach(function(p){if(!m.getProperty("/"+p)){m.setProperty("/"+p,{});}m.setProperty("/"+p+"/"+this.getType(),this.createControlDataStructure()[this.getType()]);},this);["ignoreData"].forEach(function(p){if(!m.getProperty("/"+p)){m.setProperty("/"+p,{});}m.setProperty("/"+p+"/"+this.getType(),this.createColumnKeysStructure()[this.getType()]);},this);["persistentDataChangeType","persistentDeltaDataChangeType"].forEach(function(p){if(!m.getProperty("/"+p)){m.setProperty("/"+p,{});}m.setProperty("/"+p+"/"+this.getType(),C.personalization.ChangeType.Unchanged);m.setProperty("/"+p+"/"+this.getType(),C.personalization.ChangeType.Unchanged);},this);["controlDataReduce","transientData","beforeOpenData","variantDataInitial"].forEach(function(p){if(!m.getProperty("/"+p)){m.setProperty("/"+p,undefined);}});this.setModel(m,"$sapuicomppersonalizationBaseController");};
B.prototype._extendPropertyWithControlDataStructure=function(p){var m=this.getInternalModel();if(m.getProperty("/"+p)){return;}m.setProperty("/"+p,{});m.setProperty("/"+p+"/"+this.getType(),this.createControlDataStructure()[this.getType()]);};
B.prototype.getInternalModel=function(){return this.getModel("$sapuicomppersonalizationBaseController");};
B.prototype.calculateIgnoreData=function(){var i=this.getIgnoreColumnKeys().concat(this.getAdditionalIgnoreColumnKeys());i=i.filter(function(c,I){return i.indexOf(c)===I;});var j=this.createColumnKeysStructure(i);this.setIgnoreData2Model(j);};
B.prototype.calculateControlData=function(){var j=U.copy(this.getControlDataBase());this._deselectIgnoreDataFromJson(j);this.setControlData2Model(j);};
B.prototype.calculateControlDataReduce=function(){var j=U.copy(this.getControlDataBase());this._removeIgnoreDataFromJson(j);this.setControlDataReduce2Model(j);};
B.prototype.calculateTransientData=function(j){j=U.copy(j);this._removeIgnoreDataFromJson(j);this.setTransientData2Model(j);};
B.prototype.calculatePersistentChangeTypesFromJson=function(j,r){var c=this.getPersistentDeltaDataChangeType();var o=this.getUnionData(this.getControlDataInitial(),j);c[this.getType()]=this.getChangeType(o,this.getAlreadyKnownPersistentData());this.setPersistentDeltaDataChangeType(c);c=this.getPersistentDataChangeType();if(r===C.personalization.ResetType.ResetFull){c[this.getType()]=this.getChangeType(j,this.getControlDataInitial());}else if(r===C.personalization.ResetType.ResetPartial){c[this.getType()]=this.getChangeType(j,this.getVariantDataInitial());}this.setPersistentDataChangeType(c);};
B.prototype._removeIgnoreDataFromJson=function(j){if(!this.getIgnoreData()[this.getType()]){return;}this.getIgnoreData()[this.getType()][this.getItemType()].forEach(function(i){var I=U.getIndexByKey("columnKey",i.columnKey,j[this.getType()][this.getItemType()]);if(I>-1){j[this.getType()][this.getItemType()].splice(I,1);}},this);};
B.prototype._deselectIgnoreDataFromJson=function(j){if(!this.getIgnoreData()[this.getType()]){return;}this.getIgnoreData()[this.getType()][this.getItemType()].forEach(function(i){var I=U.getIndexByKey("columnKey",i.columnKey,j[this.getType()][this.getItemType()]);if(I>-1){this.handleIgnore(j,I);}},this);};
B.prototype.updateControlDataBaseFromJson=function(j){var i=this.getIgnoreData();var b=U.copy(this.getControlDataBase());var o=U.copy(this.getControlDataBase());var c=U.copy(j);b[this.getType()][this.getItemType()]=this.getControlDataBase()[this.getType()][this.getItemType()].filter(function(I){return U.getIndexByKey("columnKey",I.columnKey,i[this.getType()][this.getItemType()])>-1;},this);c[this.getType()][this.getItemType()]=j[this.getType()][this.getItemType()].filter(function(I){return U.getIndexByKey("columnKey",I.columnKey,i[this.getType()][this.getItemType()])<0;},this);o[this.getType()][this.getItemType()]=c[this.getType()][this.getItemType()];if(this.getType()==="columns"){if(o[this.getType()][this.getItemType()].length!==c[this.getType()][this.getItemType()].length){throw"the updated columns are inconsistent with 'controlDataBase'";}o[this.getType()][this.getItemType()].some(function(I){if(U.getIndexByKey("columnKey",I.columnKey,c[this.getType()][this.getItemType()])<0){throw"the columnKey '"+I.columnKey+"' is not contained in 'controlDataBase'";}},this);}var d=U.copy(this.getControlDataBase());d[this.getType()][this.getItemType()]=o[this.getType()][this.getItemType()].concat(b[this.getType()][this.getItemType()]);Object.keys(d[this.getType()]).forEach(function(A){if(!Array.isArray(d[this.getType()][A])){d[this.getType()][A]=j[this.getType()][A];}},this);this.setControlDataBase2Model(d);this.fireAfterPotentialModelChange({json:d});};
B.prototype.extendControlDataInitial=function(j){this._extendData("controlDataInitial",j);};
B.prototype.extendControlDataBase=function(j){this._extendData("controlDataBase",j);};
B.prototype.extendVariantDataInitial=function(j){this._extendData("variantDataInitial",j);};
B.prototype.extendAlreadyKnownRuntimeData=function(j){this._extendData("alreadyKnownRuntimeData",j);};
B.prototype.extendAlreadyKnownPersistentData=function(j){this._extendData("alreadyKnownPersistentData",j);};
B.prototype._extendData=function(p,j){if(!j||!j[this.getType()]||!this._getInternalModelData(p)){return;}var o=U.copy(j);var m=this.getInternalModel();Object.keys(o[this.getType()]).forEach(function(A){if(Array.isArray(o[this.getType()][A])){o[this.getType()][A].forEach(function(i){var I=this._getInternalModelData(p)[this.getType()][A];if(U.getIndexByKey("columnKey",i.columnKey,I)>-1){throw"columnKey '"+i.columnKey+"' does already exist in internal model";}m.setProperty("/"+p+"/"+this.getType()+"/"+A+"/"+I.length+"/",i);},this);return;}m.setProperty("/"+p+"/"+this.getType()+"/"+A+"/",o[this.getType()][A]);},this);};
B.prototype.setControlDataInitial2Model=function(j){this._setModelData("controlDataInitial",j);};
B.prototype.setControlDataBase2Model=function(j){this._setModelData("controlDataBase",j);};
B.prototype.setControlData2Model=function(j){this._setModelData("controlData",j);};
B.prototype.setAlreadyKnownRuntimeData2Model=function(j){this._setModelData("alreadyKnownRuntimeData",j);};
B.prototype.setAlreadyKnownPersistentData2Model=function(j){this._setModelData("alreadyKnownPersistentData",j);};
B.prototype.setVariantDataInitial2Model=function(j){this._extendPropertyWithControlDataStructure("variantDataInitial");this._setModelData("variantDataInitial",j);};
B.prototype.setIgnoreData2Model=function(j){this._setModelData("ignoreData",j);};
B.prototype.setPersistentDataChangeType=function(j){this._setModelData("persistentDataChangeType",j);};
B.prototype.setPersistentDeltaDataChangeType=function(j){this._setModelData("persistentDeltaDataChangeType",j);};
B.prototype.setControlDataReduce2Model=function(j){this._extendPropertyWithControlDataStructure("controlDataReduce");this._setModelData("controlDataReduce",j);};
B.prototype.setTransientData2Model=function(j){this._extendPropertyWithControlDataStructure("transientData");this._setModelData("transientData",j);};
B.prototype.setBeforeOpenData2Model=function(j){this._extendPropertyWithControlDataStructure("beforeOpenData");this._setModelData("beforeOpenData",j);};
B.prototype._setModelData=function(p,j){this.getInternalModel().setProperty("/"+p+"/"+this.getType(),(j?U.copy(j)[this.getType()]:undefined));};
B.prototype.getControlDataInitial=function(){return this._getInternalModelData("controlDataInitial");};
B.prototype.getControlDataBase=function(){return this._getInternalModelData("controlDataBase");};
B.prototype.getControlData=function(){return this._getInternalModelData("controlData");};
B.prototype.getAlreadyKnownRuntimeData=function(){return this._getInternalModelData("alreadyKnownRuntimeData");};
B.prototype.getAlreadyKnownPersistentData=function(){return this._getInternalModelData("alreadyKnownPersistentData");};
B.prototype.getVariantDataInitial=function(){return this._getInternalModelData("variantDataInitial");};
B.prototype.getIgnoreData=function(){return this._getInternalModelData("ignoreData");};
B.prototype.getPersistentDataChangeType=function(){return this._getInternalModelData("persistentDataChangeType");};
B.prototype.getPersistentDeltaDataChangeType=function(){return this._getInternalModelData("persistentDeltaDataChangeType");};
B.prototype.getControlDataReduce=function(){return this._getInternalModelData("controlDataReduce");};
B.prototype.getTransientData=function(){return this._getInternalModelData("transientData");};
B.prototype.getBeforeOpenData=function(){return this._getInternalModelData("beforeOpenData");};
B.prototype.isEqualAdditionalIgnoreColumnKeys=function(c){var i=this.getAdditionalIgnoreColumnKeys();if(i.length!==c.length){return false;}return!i.some(function(s){return c.indexOf(s)<0;});};
B.prototype._getInternalModelData=function(p){return this.getInternalModel().getProperty("/"+p);};
B.prototype.determineMissingColumnKeys=function(j){if(!j||!j[this.getType()]||!j[this.getType()][this.getItemType()]){return this.createColumnKeysStructure();}var c=this.getColumnMap();var i=this.getIgnoreData();var m=j[this.getType()][this.getItemType()].filter(function(I){return!c[I.columnKey];}).filter(function(I){return U.getIndexByKey("columnKey",I.columnKey,i[this.getType()][this.getItemType()])<0;},this).map(function(I){return I.columnKey;});return this.createColumnKeysStructure(m);};
B.prototype.extractIgnoreDataFromJson=function(j){if(!j||!j[this.getType()]||!j[this.getType()][this.getItemType()]){return null;}var i=this.getIgnoreData();var o=j[this.getType()][this.getItemType()].filter(function(m){return U.getIndexByKey("columnKey",m.columnKey,i[this.getType()][this.getItemType()])>-1;},this);return o.length?this.createControlDataStructure(o):null;};
B.prototype.getTable2Json=function(j){var o=this.createControlDataStructure();var c=this.getColumnMap();var b=this.getColumnKeys();j[this.getType()][this.getItemType()].forEach(function(d){var e=c[d.columnKey];if(!e){L.warning("Column with columnKey '"+d.columnKey+"' does not exist.");return;}var m=this.getColumn2Json(e,d.columnKey,b.indexOf(d.columnKey));if(m){o[this.getType()][this.getItemType()].push(m);}},this);this.getAdditionalData2Json(o,this.getTable());return o;};
B.prototype.getTable2JsonTransient=function(j){var o=this.createControlDataStructure();var c=this.getColumnMap();var t,T;var v;j[this.getType()][this.getItemType()].forEach(function(b){var i=false;if(this.getType()==="columns"){this.getStableColumnKeys().forEach(function(s){if(s==b.columnKey){i=true;}});}var d=c[b.columnKey];if(!d||i){return;}if(d.isA("sap.ui.table.Column")){if(!d.getLabel()){throw"The column '"+b.columnKey+"' should have a 'label' aggregation otherwise the column can not be identified in the personalization dialog.";}t=d.getLabel().getText();v=d.getTooltip();T=(v&&typeof v==="object"&&v.isA("sap.ui.core.TooltipBase"))?v.getTooltip_Text():d.getTooltip_Text();}if(d.isA("sap.m.Column")){if(!d.getHeader()){throw"The column '"+b.columnKey+"' should have a 'header' aggregation otherwise the column can not be identified in the personalization dialog.";}t=d.getHeader().getText();v=d.getHeader().getTooltip();T=(v&&typeof v==="object"&&v.isA("sap.ui.core.TooltipBase"))?v.getTooltip_Text():d.getHeader().getTooltip_Text();}if(d.isA("sap.ui.comp.personalization.ColumnWrapper")){if(!d.getLabel()){throw"The column '"+b.columnKey+"' should have a 'label' aggregation otherwise the column can not be identified in the personalization dialog.";}t=d.getLabel();v=d.getTooltip();T=(v&&typeof v==="object"&&v.isA("sap.ui.core.TooltipBase"))?v.getTooltip_Text():d.getTooltip_Text();}var m=this.getColumn2JsonTransient(d,b.columnKey,t,T);if(m){o[this.getType()][this.getItemType()].push(m);}},this);U.sortItemsByText(o[this.getType()][this.getItemType()],"text");return o;};
B.prototype.getColumn2Json=function(c,s,i){};
B.prototype.getAdditionalData2Json=function(j,t){};
B.prototype.getColumn2JsonTransient=function(c,s){};
B.prototype.handleIgnore=function(j,i){};
B.prototype.fixConflictWithIgnore=function(j,o){};
B.prototype.syncJson2Table=function(j){};
B.prototype.getPanel=function(){};
B.prototype.getAdaptationUI=function(){return this.oPanel&&!this.oPanel.bIsDestroyed?this.oPanel:null;};
B.prototype.retrieveAdaptationUI=function(p){return this.getPanel(p);};
B.prototype.getAdaptationModel=function(){var t=this.getInternalModel().getProperty("/transientData");var c=this.getInternalModel().getProperty("/controlDataReduce");var r=c[this.getType()][this.getItemType()].reduce(function(m,p,i){m[p.columnKey]=Object.assign({},p);m[p.columnKey].position=i;return m;},{});var I=[];t[this.getType()][this.getItemType()].forEach(function(T,i){I.push(this._transformAdaptationData(r[T.columnKey],T));}.bind(this));this._sortAdaptationData(I);if(!this._oAdaptationModel){var A=new J({items:I,presenceAttribute:this._getPresenceAttribute()});this._oAdaptationModel=A;this._oAdaptationModel.setSizeLimit(10000);}else{this._oAdaptationModel.setProperty("/items",I);}return this._oAdaptationModel;};
B.prototype._transformAdaptationData=function(i,I){return{position:i?i.position:-1,name:I.columnKey,label:I.text,tooltip:I.tooltip};};
B.prototype._sortAdaptationData=function(i){P.sortP13nData({visible:"visible",position:"position"},i);};
B.prototype._getPresenceAttribute=function(){return"visible";};
B.prototype._getP13nBuilder=function(){return P;};
B.prototype.getChangeType=function(c,o){};
B.prototype.getChangeData=function(c,o){};
B.prototype.getUnionData=function(c,o){};
return B;});
sap.ui.predefine('sap/ui/comp/personalization/ChartWrapper',['sap/ui/core/Element','sap/ui/comp/library','./ColumnWrapper','sap/ui/core/CustomData'],function(E,l,C,a){"use strict";var A=l.personalization.AggregationRole;
var b=E.extend("sap.ui.comp.personalization.ChartWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",properties:{externalFilters:{type:"sap.m.P13nFilterItem[]",defaultValue:[]}},aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}},associations:{chart:{type:"sap.chart.Chart",multiple:false}},events:{externalFiltersSet:{parameters:{filters:{type:"sap.m.P13nFilterItem[]"}}}}}
});
b.prototype.getChartObject=function(){var c=this.getAssociation("chart");if(typeof c==="string"){c=sap.ui.getCore().byId(c);}return c;};
b.prototype.getModel=function(){return this.getChartObject().getModel();};
b.prototype.getDomRef=function(){var c=this.getChartObject();return c.getDomRef();};
b.createChartWrapper=function(c,d,e){var p;var o={};c.getDimensions().forEach(function(D){p=D.data("p13nData");o[p.columnKey]=new C({label:D.getLabel(),tooltip:D.getTooltip(),selected:c.getVisibleDimensions().indexOf(D.getName())>-1,aggregationRole:A.Dimension,role:D.getRole()?D.getRole():D.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),hierarchyLevel:p.hierarchyLevel,chart:c});});c.getMeasures().forEach(function(m){p=m.data("p13nData");o[p.columnKey]=new C({label:m.getLabel(),tooltip:m.getTooltip(),selected:c.getVisibleMeasures().indexOf(m.getName())>-1,aggregationRole:A.Measure,role:m.getRole()?m.getRole():m.getMetadata().getProperty("role").getDefaultValue(),sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),chart:c});});if(d){d.forEach(function(p){o[p.columnKey]=new C({label:p.label,tooltip:p.tooltip,selected:false,aggregationRole:A.NotDimeasure,sorted:p.sorted,sortOrder:p.sortOrder,customData:new a({key:"p13nData",value:p}),chart:c});if(!o[p.columnKey].getParent()){c.addDependent(o[p.columnKey]);}});}return new b({chart:c,columns:e.map(function(s){return o[s];})});};
return b;});
sap.ui.predefine('sap/ui/comp/personalization/ColumnHelper',['sap/ui/thirdparty/jquery','sap/ui/base/ManagedObject','./Util','./ColumnWrapper'],function(q,M,U,C){"use strict";
var a=M.extend("sap.ui.comp.personalization.ColumnHelper",{
constructor:function(i,s){M.apply(this,arguments);},
metadata:{properties:{callbackOnSetVisible:{type:"object",defaultValue:null},callbackOnSetSummed:{type:"object",defaultValue:null}}}
});
a.prototype.init=function(){this._oColumnKey2ColumnMap={};this._oColumnKeyIsMonkeyPatched={};};
a.prototype.exit=function(){this._oColumnKey2ColumnMap=null;this._oColumnKeyIsMonkeyPatched=null;};
a.prototype.addColumns=function(c){if(!c){return;}c.forEach(function(o){this._addColumnToMap(U.getColumnKey(o),o);},this);this._checkConsistencyOfColumns(this._oColumnKey2ColumnMap);};
a.prototype.addColumnMap=function(c){if(!c){return;}for(var s in c){this._addColumnToMap(s,c[s]);}this._checkConsistencyOfColumns(this._oColumnKey2ColumnMap);};
a.prototype.getColumnMap=function(){return this._oColumnKey2ColumnMap;};
a.prototype._checkConsistencyOfColumns=function(c){if(q.isEmptyObject(c)){return;}var s=Object.keys(c)[0];var h=!!U._getCustomProperty(c[s],"columnKey");for(var b in c){if(h!==!!U._getCustomProperty(c[b],"columnKey")){throw"The table instance contains some columns for which a columnKey is provided, some for which a columnKey is not provided.";}}};
a.prototype._addColumnToMap=function(c,o){if(this._oColumnKey2ColumnMap[c]){throw"Duplicate 'columnKey': The column '"+o.getId()+"' and column '"+this._oColumnKey2ColumnMap[c]+"' have same 'columnKey' "+c;}if(!this._oColumnKey2ColumnMap[c]){this._oColumnKey2ColumnMap[c]=o;this._monkeyPatchColumn(o,c);}};
a.prototype._monkeyPatchColumn=function(c,s){if(c instanceof C){return;}if(this._oColumnKeyIsMonkeyPatched[s]){return;}this._oColumnKeyIsMonkeyPatched[s]=true;var f=this.getCallbackOnSetVisible();var S=c.setVisible.bind(c);var b=function(v){if(f){f(v,s);}S(v);};c.setVisible=b;if(c.setSummed){var d=this.getCallbackOnSetSummed();var e=c.setSummed.bind(c);var g=function(i){if(d){d(i,c);}e(i);};c.setSummed=g;}};
return a;});
sap.ui.predefine('sap/ui/comp/personalization/ColumnWrapper',['sap/ui/core/Element','sap/ui/comp/personalization/Util'],function(E,U){"use strict";
var C=E.extend("sap.ui.comp.personalization.ColumnWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",properties:{label:{type:"string"},tooltip:{type:"string"},selected:{type:"boolean",defaultValue:false},aggregationRole:{type:"sap.ui.comp.personalization.AggregationRole"},role:{type:"string"},href:{type:"string",defaultValue:null},target:{type:"string",defaultValue:null},press:{type:"object",defaultValue:null},sorted:{type:"boolean",defaultValue:false},sortOrder:{type:"string",defaultValue:"Ascending"},hierarchyLevel:{type:"int",defaultValue:0},description:{type:"string",defaultValue:null}},associations:{chart:{type:"sap.chart.Chart",multiple:false}}}
});
C.prototype.getVisible=function(){var c=this.getAssociation("chart");if(typeof c==="string"){c=sap.ui.getCore().byId(c);}var v=c.getVisibleDimensions().concat(c.getVisibleMeasures());var s=U.getColumnKey(this);return v.indexOf(s)>-1;};
return C;});
sap.ui.predefine('sap/ui/comp/personalization/ColumnsController',['./BaseController','sap/m/library','sap/ui/comp/library','./Util','sap/base/util/merge'],function(B,M,C,U,m){"use strict";
var c=B.extend("sap.ui.comp.personalization.ColumnsController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.columns);this.setItemType(M.P13nPanelType.columns+"Items");},
metadata:{properties:{triggerModelChangeOnColumnInvisible:{type:"boolean",group:"Misc",defaultValue:false}},events:{afterColumnsModelDataChange:{}}}
});
c.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(this.getTableType()===C.personalization.TableType.ResponsiveTable){var o=t.findElements(false,function(e){return e.isA("sap.m.plugins.ColumnResizer");})[0];if(o){o.detachColumnResize(this._onColumnResize,this);o.attachColumnResize(this._onColumnResize,this);}}else if(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable){t.detachColumnMove(this._onColumnMove,this);t.detachColumnVisibility(this._onColumnVisibility,this);t.detachColumnResize(this._onColumnResize,this);t.attachColumnMove(this._onColumnMove,this);t.attachColumnVisibility(this._onColumnVisibility,this);t.attachColumnResize(this._onColumnResize,this);}this._monkeyPatchTable(t);};
c.prototype.getColumn2Json=function(o,s,i){return{columnKey:s,index:i,visible:o.getVisible(),width:o.getWidth?o.getWidth():undefined,total:o.getSummed?o.getSummed():undefined};};
c.prototype.getAdditionalData2Json=function(j,t){j.columns.fixedColumnCount=t&&t.getFixedColumnCount?t.getFixedColumnCount():undefined;};
c.prototype.getColumn2JsonTransient=function(o,s,t,T){return{columnKey:s,text:t,tooltip:T!==t?T:undefined};};
c.prototype.handleIgnore=function(j,i){j.columns.columnsItems[i].visible=false;};
c.prototype.syncJson2Table=function(j){var t=this.getTable();var o=this.getColumnMap();this.fireBeforePotentialTableChange();if(this.getTable()&&(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable)){this._applyChangesToUiTableType(t,j,o);}else if(this.getTableType()===C.personalization.TableType.ResponsiveTable){this._applyChangesToMTableType(t,j,o);}this.fireAfterPotentialTableChange();};
c.prototype.getDataSuiteFormat2Json=function(d){var j=this.createControlDataStructure();var a=function(s,p,P){var i=U.getIndexByKey("columnKey",s,j.columns.columnsItems);if(i<0){i=j.columns.columnsItems.length;j.columns.columnsItems.splice(i,0,{columnKey:s});}j.columns.columnsItems[i][p]=P;};this.getControlDataInitial().columns.columnsItems.filter(function(o){return o.visible===true;}).forEach(function(o){a(o.columnKey,"visible",false);});if(d.Visualizations&&d.Visualizations.length){var l=d.Visualizations.filter(function(v){return v.Type==="LineItem";});if(l.length){l[0].Content.forEach(function(o,i){a(o.Value,"visible",true);a(o.Value,"index",i);},this);}}if(d.Total&&d.Total.length){d.Total.forEach(function(s){a(s,"total",true);});}return j;};
c.prototype.getDataSuiteFormatSnapshot=function(d){var o=this.getUnionData(this.getControlDataInitial(),this.getControlData());if(!o.columns||!o.columns.columnsItems||!o.columns.columnsItems.length){return;}var a=o.columns.columnsItems.filter(function(e){return!!e.total;});if(a.length){d.Total=a.map(function(e){return e.columnKey;});}var b=o.columns.columnsItems.filter(function(e){return!!e.visible;});if(b.length){if(!d.Visualizations){d.Visualizations=[];}b.sort(this._sortByIndex);d.Visualizations.push({Type:"LineItem",Content:b.map(function(e){return{Value:e.columnKey,Label:undefined};})});}};
c.prototype._onColumnMove=function(e){var i=e.getParameter("newPos");var s=U.getColumnKey(e.getParameter("column"));var o=this.getControlData();var I=U.getIndexByKey("columnKey",s,o.columns.columnsItems);if(I<0||i<0||I>o.columns.columnsItems.length-1||i>o.columns.columnsItems.length-1){return;}this.fireBeforePotentialTableChange();var a=o.columns.columnsItems.splice(I,1);o.columns.columnsItems.splice(i,0,a[0]);var b=-1;o.columns.columnsItems.forEach(function(d){if(d.index!==undefined){d.index=++b;}});this.updateControlDataBaseFromJson(o);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
c.prototype._onColumnVisibility=function(e){this.fireBeforePotentialTableChange();this._updateInternalModel(U.getColumnKey(e.getParameter("column")),"visible",e.getParameter("newVisible"));this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
c.prototype._onColumnTotal=function(p){this.fireBeforePotentialTableChange();this._updateInternalModel(U.getColumnKey(p.column),"total",p.isSummed);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
c.prototype._onColumnResize=function(e){this.fireBeforePotentialTableChange();this._updateInternalModel(U.getColumnKey(e.getParameter("column")),"width",e.getParameter("width"));this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
c.prototype._onColumnFixedCount=function(f){this.fireBeforePotentialTableChange();var o=this.getControlData();this.getInternalModel().setProperty("/controlData/columns/fixedColumnCount",f);this.updateControlDataBaseFromJson(o);this.fireAfterPotentialTableChange();this.fireAfterColumnsModelDataChange();};
c.prototype._updateInternalModel=function(s,p,P){if(!s||!p){return;}var o=this.getControlData();var i=U.getIndexByKey("columnKey",s,o.columns.columnsItems);if(i<0){throw"No entry found in 'controlDataBase' for columnKey '"+s+"'";}this.getInternalModel().setProperty("/controlData/columns/columnsItems/"+i+"/"+p,P);this.updateControlDataBaseFromJson(o);};
c.prototype.getPanel=function(p){var v=(p&&p.visibleItemsThreshold)?p.visibleItemsThreshold:-1;return new Promise(function(r){sap.ui.require(['sap/m/P13nColumnsPanel','sap/m/P13nItem','sap/m/P13nColumnsItem'],function(P,a,b){return r(new P({visibleItemsThreshold:v,items:{path:'$sapmP13nPanel>/transientData/columns/columnsItems',template:new a({columnKey:'{$sapmP13nPanel>columnKey}',text:'{$sapmP13nPanel>text}',tooltip:'{$sapmP13nPanel>tooltip}'})},columnsItems:{path:"$sapmP13nPanel>/controlDataReduce/columns/columnsItems",template:new b({columnKey:"{$sapmP13nPanel>columnKey}",index:"{$sapmP13nPanel>index}",visible:"{$sapmP13nPanel>visible}",width:"{$sapmP13nPanel>width}",total:"{$sapmP13nPanel>total}"})},beforeNavigationTo:this.setModelFunction(),changeColumnsItems:function(e){if(!e.getParameter("items")){return;}var o=this.getControlDataReduce();o.columns.columnsItems=e.getParameter("items");this.setControlDataReduce2Model(o);this._enhanceForStableKeys(this.getControlDataInitial(),o);this.fireAfterPotentialModelChange({json:o});}.bind(this)}));}.bind(this));}.bind(this));};
c.prototype.retrieveAdaptationUI=function(p){return new Promise(function(r){sap.ui.require(['sap/ui/mdc/p13n/panels/ListView','sap/m/Column'],function(L,a){var A=this.getAdaptationModel();var s=new L({enableReorder:true,showHeader:true,enableCount:true});s.setPanelColumns([sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc").getText("fieldsui.COLUMNS"),new a({width:"25%",hAlign:"Center",vAlign:"Middle"})]);s.setP13nModel(A);s._oListControl.setMultiSelectMode("Default");this.oPanel=s;var b;s.attachChange(function(o){b=o.getSource().getP13nModel().getProperty("/items").map(function(P,i){return{columnKey:P.name,visible:P.visible,index:i,width:P.width,total:P.total};});var n=this.getControlDataReduce();n.columns.columnsItems=b;this.setControlDataReduce2Model(n);this.fireAfterPotentialModelChange({json:this._enhanceForStableKeys(this.getControlDataInitial(),n)});}.bind(this));r(s);}.bind(this));}.bind(this));};
c.prototype._transformAdaptationData=function(r,t){var a=B.prototype._transformAdaptationData.apply(this,arguments);a.visible=r.visible;a.position=r.index;a.width=r.width;a.total=r.total;return a;};
c.prototype._sortByIndex=function(a,b){if(a.index!==undefined&&b.index===undefined){return-1;}if(b.index!==undefined&&a.index===undefined){return 1;}if(a.index<b.index){return-1;}if(a.index>b.index){return 1;}return 0;};
c.prototype._applyChangesToUiTableType=function(t,j,o){var a=null;var b={};var d=this;var s=function(i,k){i.forEach(function(n){b[n.columnKey]=n;});i.sort(d._sortByIndex);var l=i.map(function(n){return n.columnKey;});k.forEach(function(n,I){if(l.indexOf(n)<0){l.splice(I,0,n);}});return l;};var S=function(i,a){var k=b[i];if(k&&k.visible!==undefined&&a.getVisible()!==k.visible){a.setVisible(k.visible,true);}};var f=function(i,k,a){var T=t.indexOfColumn(a);var l=i;if(l!==undefined&&T!==l){if(T>-1){t.removeColumn(a,true);}t.insertColumn(a,l,true);}};var e=function(i,a){var k=b[i];if(k&&k.width!==undefined&&a.getWidth()!==k.width){a.setWidth(k.width,true);}};var g=function(i,a){var k=b[i];if(k&&k.total!==undefined&&a.getSummed&&a.getSummed()!==k.total){a.setSummed(k.total,true);}};if(j.columns.columnsItems.length){var h=s(j.columns.columnsItems,this.getColumnKeys());h.forEach(function(i,I){a=o[i];if(a){S(i,a);f(I,i,a);e(i,a);g(i,a);}});}var F=j.columns.fixedColumnCount||0;if(t.getFixedColumnCount&&t.getFixedColumnCount()!==F){t.setFixedColumnCount(F,true);}};
c.prototype._applyChangesToMTableType=function(t,j,o){var T=false;var s=function(a,b){var i=a.index;if(i!==undefined){b.setOrder(i,true);T=true;}};var S=function(a,b){if(a.visible!==undefined&&b.getVisible()!==a.visible){b.setVisible(a.visible,true);T=true;}};var f=function(a,b){if(a.width!==undefined&&b.getWidth()!==a.width){b.setWidth(a.width);}};if(j.columns.columnsItems.length){j.columns.columnsItems.sort(function(a,b){if(a.index<b.index){return-1;}if(a.index>b.index){return 1;}return 0;});j.columns.columnsItems.forEach(function(a){var b=o[a.columnKey];if(b){s(a,b);S(a,b);f(a,b);}},this);}if(T){t.invalidate();}};
c.prototype.getChangeType=function(o,a){var b=this.getChangeData(o,a);var n=this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTriggerModelChangeOnColumnInvisible();if(b){var d=C.personalization.ChangeType.TableChanged;b.columns.columnsItems.some(function(i){if(i.visible||(i.visible===false&&n)){d=C.personalization.ChangeType.ModelChanged;return true;}if(i.total===false||i.total===true){d=C.personalization.ChangeType.ModelChanged;return true;}});return d;}return C.personalization.ChangeType.Unchanged;};
c.prototype.getChangeData=function(o,a){if(!a||!a.columns||!a.columns.columnsItems){return null;}var b={columns:U.copy(o.columns)};var i=true;i=(o.columns.fixedColumnCount===a.columns.fixedColumnCount);o.columns.columnsItems.some(function(I){var d=U.getArrayElementByKey("columnKey",I.columnKey,a.columns.columnsItems);if(!U.semanticEqual(I,d)){i=false;return true;}});if(i){return null;}var t=[];b.columns.columnsItems.forEach(function(I,d){var e=U.getArrayElementByKey("columnKey",I.columnKey,a.columns.columnsItems);if(U.semanticEqual(I,e)){t.push(I);return;}for(var p in I){if(p==="columnKey"||!e){if(e&&e[p]===undefined){delete I[p];}else{continue;}}if(I[p]===e[p]){delete I[p];}}if(Object.keys(I).length<2){t.push(I);}});t.forEach(function(I){var d=U.getIndexByKey("columnKey",I.columnKey,b.columns.columnsItems);b.columns.columnsItems.splice(d,1);});if(b.columns.fixedColumnCount===0){delete b.columns.fixedColumnCount;}return b;};
c.prototype._sortArrayByPropertyName=function(A,p,t){var s=[];if(t===null||t===undefined){t=false;}if(A&&A.length>0&&p!==undefined&&p!==null&&p!==""){if(t){s=m([],A);}else{s=A;}s.sort(function(a,b){var d=a[p];var e=b[p];if(d<e||(d!==undefined&&e===undefined)){return-1;}if(d>e||(d===undefined&&e!==undefined)){return 1;}return 0;});}return s;};
c.prototype.getUnionData=function(j,J){if(!J||!J.columns||!J.columns.columnsItems){return U.copy(j);}var u=U.copy(J);Object.keys(j.columns).forEach(function(a){if(Array.isArray(j.columns[a])){j.columns[a].forEach(function(o){var b=U.getArrayElementByKey("columnKey",o.columnKey,u.columns[a]);if(!b){u.columns[a].push(o);return;}if(b.visible===undefined&&o.visible!==undefined){b.visible=o.visible;}if(b.width===undefined&&o.width!==undefined){b.width=o.width;}if(b.total===undefined&&o.total!==undefined){b.total=o.total;}if(b.index===undefined&&o.index!==undefined){b.index=o.index;}});return;}if(u.columns[a]===undefined&&j.columns[a]!==undefined){u.columns[a]=j.columns[a];}},this);return u;};
c.prototype._enhanceForStableKeys=function(j,J){if(this.getStableColumnKeys().length>0&&this._checkFillRequired(j,J)){var g=this._getFilledArray(j,J);J.columns.columnsItems=g;}return J;};
c.prototype._checkFillRequired=function(j,J){var a=J.columns.columnsItems.reduce(function(b,o){b[o.columnKey]=o;return b;},{});var f=j.columns.columnsItems.some(function(o){return!a[o.columnKey];});return f;};
c.prototype._getFilledArray=function(j,J){var g=[];var a=j.columns.columnsItems.reduce(function(b,d){b[d.columnKey]=d;return b;},{});for(var i=0;i<J.columns.columnsItems.length;i++){var o=J.columns.columnsItems[i];if(a[o.columnKey]){var I=o.index?o.index+this.getStableColumnKeys().length:i+this.getStableColumnKeys().length;a[o.columnKey]=o;a[o.columnKey].index=I;}}Object.keys(a).forEach(function(s){g.push(a[s]);});return g;};
c.prototype.fixConflictWithIgnore=function(j,J){if(!j||!j.columns||!j.columns.columnsItems||!J||!J.columns||!J.columns.columnsItems||!J.columns.columnsItems.length){return j;}this._sortArrayByPropertyName(j.columns.columnsItems,"index");var i=false;J.columns.columnsItems.forEach(function(o){var a=U.getIndexByKey("columnKey",o.columnKey,j.columns.columnsItems);if(a<0||j.columns.columnsItems[a].index===undefined){return;}if((a+1<=j.columns.columnsItems.length-1&&j.columns.columnsItems[a+1].index===j.columns.columnsItems[a].index)||(a-1>=0&&j.columns.columnsItems[a-1].index===j.columns.columnsItems[a].index)){i=true;}if(a+1<=j.columns.columnsItems.length-1&&j.columns.columnsItems[a+1].index===j.columns.columnsItems[a].index){var b=j.columns.columnsItems.splice(a,1);j.columns.columnsItems.splice(a+1,0,b[0]);}});if(i){var I=-1;j.columns.columnsItems.forEach(function(o){if(o.index!==undefined){o.index=++I;}});}};
c.prototype.isColumnSelected=function(o,s){var i=U.getIndexByKey("columnKey",s,o.columnsItems);return(i>-1)?o.columnsItems[i].visible:false;};
c.prototype._monkeyPatchTable=function(t){if(this.getTableType()!==C.personalization.TableType.AnalyticalTable&&this.getTableType()!==C.personalization.TableType.Table&&this.getTableType()!==C.personalization.TableType.TreeTable){return;}var a=this;var s=t.setFixedColumnCount.bind(t);var S=function(f,b){a._onColumnFixedCount(f);s(f,b);};if(t.setFixedColumnCount.toString()===S.toString()){return;}t.setFixedColumnCount=S;};
c.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(this.getTable()&&(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable)){t.detachColumnMove(this._onColumnMove,this);t.detachColumnVisibility(this._onColumnVisibility,this);t.detachColumnResize(this._onColumnResize,this);}};
return c;});
sap.ui.predefine('sap/ui/comp/personalization/Controller',['./UIManager','sap/base/Log','sap/ui/thirdparty/jquery','sap/ui/base/ManagedObject','sap/m/library','sap/ui/comp/library','./ColumnsController','./FilterController','./GroupController','./SortController','./DimeasureController','./SelectionController','./Util','./ChartWrapper','./SelectionWrapper','./ColumnHelper','sap/m/P13nDialog','./Validator','sap/ui/model/json/JSONModel','sap/ui/Device','sap/ui/model/BindingMode'],function(C,L,q,M,a,b,c,F,G,S,D,d,U,e,f,g,P,V,J,h,B){"use strict";
var i=M.extend("sap.ui.comp.personalization.Controller",{
constructor:function(I,s){M.apply(this,arguments);},
metadata:{library:"sap.ui.comp",interfaces:["sap.ui.mdc.p13n.AdaptationProvider"],properties:{setting:{type:"object",defaultValue:{}},resetToInitialTableState:{type:"boolean",defaultValue:true},columnKeys:{type:"string[]",defaultValue:[]}},associations:{table:{type:"object",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{},afterP13nModelDataChange:{parameters:{persistentData:{type:"object"},persistentDataChangeType:{type:"sap.ui.comp.personalization.ChangeType"},runtimeDeltaData:{type:"object"},runtimeDeltaDataChangeType:{type:"sap.ui.comp.personalization.ChangeType"}}},requestColumns:{parameters:{columnKeys:{type:"string"}}},dialogAfterClose:{parameters:{cancel:{type:"boolean"}}},dialogAfterOpen:{},dialogConfirmedReset:{}}}
});
i.prototype.applySettings=function(s){M.prototype.applySettings.apply(this,arguments);this._initialize();};
i.prototype._initialize=function(){this._bInitCalled=true;var t=this.getTable();if(!t){throw"The table instance should be passed into constructor.";}this._createSettingCurrent(this.getSetting());var j=t.getColumns();if(!this.getColumnKeys().length){this.setProperty("columnKeys",U.getColumnKeys(j),true);}var m=this._createInternalModel(this.getColumnKeys());this._callControllers(this._oSettingCurrent,"initializeInternalModel",m);this._oColumnHelper=new g({callbackOnSetVisible:this._onSetVisible.bind(this),callbackOnSetSummed:this._onSetSummed.bind(this)});this._oColumnHelper.addColumns(j);this._callControllers(this._oSettingCurrent,"setColumnHelper",this._oColumnHelper);this._callControllers(this._oSettingCurrent,"setTriggerModelChangeOnColumnInvisible");this._callControllers(this._oSettingCurrent,"setTable",t);this._callControllers(this._oSettingCurrent,"setColumnKeys",this.getColumnKeys());this._callControllers(this._oSettingCurrent,"setIgnoreColumnKeys");this._callControllers(this._oSettingCurrent,"setStableColumnKeys");this._callControllers(this._oSettingCurrent,"checkConsistency");this._callControllers(this._oSettingCurrent,"calculateIgnoreData");var k=i._getOrderedColumnKeys(this._oColumnHelper.getColumnMap(),this.getColumnKeys());this._extendModelStructure(k);this._callControllers(this._oSettingCurrent,"calculateControlData");this._suspendTable();this._syncTableUi();this._resumeTable(true);this._fireChangeEvent();};
i.prototype.init=function(){this._oDialog=null;this._bInitCalled=false;this._bSuspend=false;this._bUnconfirmedResetPressed=false;this._oColumnHelper=null;this._oSettingCurrent={};};
i.prototype.setSetting=function(s){if(this._bInitCalled){throw"The setting instance should be passed only into constructor.";}s=this.validateProperty("setting",s);this.setProperty("setting",s,true);return this;};
i.prototype.setResetToInitialTableState=function(r){if(this._bInitCalled){throw"The resetToInitialTableState property should be passed only into constructor.";}r=this.validateProperty("resetToInitialTableState",r);this.setProperty("resetToInitialTableState",r,true);return this;};
i.prototype.setColumnKeys=function(j){if(this._bInitCalled){throw"The columnKeys array should be passed only into constructor.";}j=this.validateProperty("columnKeys",j);var k=j.filter(function(s,I){var l=j.indexOf(s,I+1)>-1;if(l){L.warning("The provided columnKeys is inconsistent as columnKey "+s+" is not unique and therefore the duplicate entry is deleted from columnKeys.");}return!l;});this.setProperty("columnKeys",k,true);return this;};
i.prototype.setTable=function(t){if(this._bInitCalled){throw"The table instance should be passed only into constructor.";}this.setAssociation("table",t);return this;};
i.prototype._createSettingCurrent=function(s){var t=U.getTableType(this.getTable());var j,T;switch(t){case b.personalization.TableType.ChartWrapper:j=[a.P13nPanelType.dimeasure,a.P13nPanelType.sort,a.P13nPanelType.filter];break;case b.personalization.TableType.SelectionWrapper:j=[a.P13nPanelType.selection];break;default:j=[a.P13nPanelType.columns,a.P13nPanelType.sort,a.P13nPanelType.filter,a.P13nPanelType.group];}for(T in s){if(s[T].visible===false&&j.indexOf(T)>-1){j.splice(j.indexOf(T),1);}if(s[T].visible===true&&j.indexOf(T)<0){j.push(T);}}j.forEach(function(T){this._oSettingCurrent[T]={visible:true,controller:(s[T]&&s[T].controller)?s[T].controller:this._controllerFactory(T),payload:(s[T]&&s[T].payload)?s[T].payload:undefined,ignoreColumnKeys:(s[T]&&s[T].ignoreColumnKeys)?s[T].ignoreColumnKeys:[],triggerModelChangeOnColumnInvisible:(s[T]&&s[T].triggerModelChangeOnColumnInvisible)?s[T].triggerModelChangeOnColumnInvisible:undefined,createMessageStrip:(s[T]&&s[T].createMessageStrip)?s[T].createMessageStrip:undefined};if(T=="columns"){this._oSettingCurrent.columns.stableColumnKeys=s.stableColumnKeys;}},this);};
i.prototype._mixSetting=function(s,o){if(!o){return s;}if(o.useAvailablePanels){return Object.assign(s,o);}for(var t in o){if(o[t].visible===true&&s[t]&&s[t].visible===true){o[t].controller=s[t].controller;o[t].payload=o[t].payload||s[t].payload;}}return o;};
i.prototype.openLegacyDialog=function(s){this._suspendTable();this._prepareDialogUi();var o=this._mixSetting(this._oSettingCurrent,s);this._bCancelPressed=false;this._oDialog=new P(this.getId()+"-P13nDialog",{stretch:h.system.phone,showReset:(s&&s.showReset!==undefined)?s.showReset:true,showResetEnabled:{path:'$sapuicomppersonalizationBaseController>/isDirty'},initialVisiblePanelType:this._oInitialVisiblePanelType,validationExecutor:function(){var T=U.getTableType(this.getTable());var k=this._oColumnHelper.getColumnMap();var l=this._callControllers(o,"getUnionData",this._getControlDataInitial(),this._getControlDataReduce());return V.checkGroupAndColumns(T,o,k,l,[]).then(function(r){var m=this._callControllers(o,"getUnionData",this._getControlDataBase(),this._getControlDataReduce());var n=this._callControllers(o,"getUnionData",this._getControlDataInitial(),m);var u=this._callControllers(o,"getChangeData",n,this._getAlreadyKnownPersistentData());return V.checkSaveChanges(T,o,u,r);}.bind(this)).then(function(r){return V.checkChartConsistency(T,o,l,r);}).then(function(r){return r;});}.bind(this)});this._oDialog.setModel(this._getInternalModel(),"$sapuicomppersonalizationBaseController");this._oDialog.toggleStyleClass("sapUiSizeCompact",!!q(this.getTable().getDomRef()).closest(".sapUiSizeCompact").length);if(s&&s.contentWidth){this._oDialog.setContentWidth(s.contentWidth);}if(s&&s.contentHeight){this._oDialog.setContentHeight(s.contentHeight);}if(s&&s.styleClass){this._oDialog.addStyleClass(s.styleClass);}this._callControllers(this._oSettingCurrent,"setMessageStrip");var p=this._callControllers(o,"getPanel");var j=[];for(var t in p){if(p[t]){j.push(p[t]);}}Promise.all(j).then(function(k){k.forEach(function(l){this._oDialog.addPanel(l);},this);this._oDialog.attachOk(this._handleDialogOk,this);this._oDialog.attachCancel(this._handleDialogCancel,this);this._oDialog.attachReset(this._handleDialogReset,this);this._oDialog.attachAfterClose(this._handleDialogAfterClose,this);this._oDialog.isPopupAdaptationAllowed=function(){return false;};this._oDialog.setEscapeHandler(function(){this._handleDialogCancel().bind(this);}.bind(this));this._oDialog.open();this.fireDialogAfterOpen();}.bind(this));};
i.prototype.getUISettings=function(){var s=this._oUISetting;var p=this._callControllers(s,"retrieveAdaptationUI");var u={resetEnabled:s.showReset,contentHeight:s.contentHeight,contentWidth:s.contentWidth};var j=[];var k=Object.keys(p);var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");var t={columns:r.getText("p13nDialog.TAB_Column"),dimeasure:r.getText("p13nDialog.TAB_Chart"),filter:r.getText("p13nDialog.TAB_Filter"),sort:r.getText("p13nDialog.TAB_Sort"),group:r.getText("p13nDialog.TAB_Group")};k.forEach(function(K){var T=t[K];var l=p[K];u[K]={resetEnabled:true,adaptationUI:l instanceof Promise?l:Promise.resolve(),containerSettings:{title:T,tabText:T}};j.push(p[K]);});Promise.all(j).then(function(l){this._callControllers(this._oSettingCurrent,"setModelFunction");}.bind(this));return u;};
i.prototype.initAdaptation=function(){return Promise.resolve();};
i.prototype.reset=function(o,k){return new Promise(function(r){this.resetPersonalization();this._syncDialogUi();for(var K in this._oSettingCurrent){var s=this._oSettingCurrent[K].controller;if(s&&s.getAdaptationUI()&&s.getAdaptationUI().setP13nModel){s.getAdaptationUI().setP13nModel(s.getAdaptationModel());}}r();}.bind(this));};
i.prototype.validateP13n=function(v,k,A){var t=U.getTableType(this.getTable());var o=this._oColumnHelper.getColumnMap();var j=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataInitial(),this._getControlDataReduce());return V.checkGroupAndColumns(t,this._oSettingCurrent,o,j,[]).then(function(r){var l=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataBase(),this._getControlDataReduce());var m=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataInitial(),l);var p=this._callControllers(this._oSettingCurrent,"getChangeData",m,this._getAlreadyKnownPersistentData());return V.checkSaveChanges(t,this._oSettingCurrent,p,r);}.bind(this)).then(function(r){return V.checkChartConsistency(t,this._oSettingCurrent,j,r);}.bind(this)).then(function(r){if(r.length>0){r.forEach(function(l){for(var k in this._oSettingCurrent){var s=this._oSettingCurrent[k].controller;if(l.panelTypes.indexOf(k)>-1&&s){s.getAdaptationUI().setMessageStrip(new sap.m.MessageStrip({type:l.messageType,text:l.messageText}));}}}.bind(this));}else{for(var k in this._oSettingCurrent){var s=this._oSettingCurrent[k].controller;if(s&&s.getAdaptationUI()&&s.getAdaptationUI().isA("sap.ui.mdc.p13n.panels.BasePanel")){s.getAdaptationUI().setMessageStrip(undefined);}}}}.bind(this));};
i.prototype.openDialog=function(s){this._suspendTable();if(!this._oUIManager){this._oUIManager=new C(this);}this._prepareDialogUi();this._oUISetting=this._mixSetting(this._oSettingCurrent,s);this._callControllers(this._oSettingCurrent,"setMessageStrip");var k=Object.keys(this._getControllers());var K=Object.assign([],k);if(s&&(s.useAvailablePanels!==true)){var j=Object.keys(s);k.forEach(function(l,I){if(j.indexOf(l)<0){K.splice(K.indexOf(l),1);}});}return sap.ui.getCore().loadLibrary('sap.ui.mdc',{async:true}).then(function(){return this._oUIManager.show(this.getTable(),K).then(function(o){if(o.getCustomHeader()){var r=o.getCustomHeader().getContentRight()[0];r.bindProperty("enabled",{model:"$sapmP13nPanel",path:"/isDirty",formatter:function(l){return!!l;}});}o.getButtons()[1].attachPress(this._handleDialogCancel,this);o.attachAfterClose(this._handleDialogAfterClose,this);if(K.length>1&&this._sActivePanel){o.getContent()[0].switchView(this._sActivePanel);}if(s&&s.styleClass){o.addStyleClass(s.styleClass);}o.setModel(this._getInternalModel(),"$sapmP13nPanel");this._oDialog=o;this.fireDialogAfterOpen();return o;}.bind(this));}.bind(this));};
i.prototype.addColumns=function(o){var t=this.getTable();Object.keys(o).forEach(function(s){if(!o[s].getParent()){t.addDependent(o[s]);}});this._oColumnHelper.addColumnMap(o);};
i.prototype.getDataSuiteFormatSnapshot=function(){this._callControllers(this._oSettingCurrent,"calculateControlData");var r={};this._callControllers(this._oSettingCurrent,"getDataSuiteFormatSnapshot",r);return r;};
i.prototype.setDataSuiteFormatSnapshot=function(r,p,j){if(j){U.convertSelectOptions(r,this._oColumnHelper.getColumnMap());U.convertFilters(p,this._oColumnHelper.getColumnMap());}var R=this._callControllers(this._oSettingCurrent,"getDataSuiteFormat2Json",r);this._setRuntimeAndPersonalizationData(R,p);};
i.prototype.setPersonalizationDataAsDataSuiteFormat=function(r,j){if(j){U.convertSelectOptions(r,this._oColumnHelper.getColumnMap());}var R=this._callControllers(this._oSettingCurrent,"getDataSuiteFormat2Json",r);this._setRuntimeAndPersonalizationData(R,R);};
i.prototype.setPersonalizationData=function(p,j){if(j){U.convertFilters(p,this._oColumnHelper.getColumnMap());}this._setRuntimeAndPersonalizationData(p,p);};
i.prototype.resetPersonalization=function(r){r=this._determineResetType(r);if(r===b.personalization.ResetType.ResetFull){this._resetFull();}else{this._resetPartial();}this._setRuntimeAndPersonalizationData(this._getControlDataBase(),this._getVariantData());};
i.prototype.addToSettingIgnoreColumnKeys=function(j){if(this._isEqualAdditionalIgnoreColumnKeys(j)){return this;}this._callControllers(this._oSettingCurrent,"setAdditionalIgnoreColumnKeys",j);this._callControllers(this._oSettingCurrent,"calculateIgnoreData");this._requestMissingColumnsWithoutIgnore(this._getControlDataBase());this._suspendTable();this._syncTableUi();this._resumeTable(true);this._fireChangeEvent();return this;};
i.prototype._handleDialogReset=function(){this._bUnconfirmedResetPressed=true;var r=this._determineResetType();if(r===b.personalization.ResetType.ResetFull){this._resetFull();}else{this._resetPartial();}this._syncDialogUi();};
i.prototype._handleDialogOk=function(){if(this._oDialog.isA("sap.m.P13nDialog")){this._oDialog.detachOk(this._handleDialogOk,this);}if(this._bUnconfirmedResetPressed){this.fireDialogConfirmedReset();}setTimeout(function(){this._postDialogUi(this._getControlDataReduce());this._syncTableUi();var j=function(E){var m=false;for(var t in this._oSettingCurrent){m=m||E.getParameter("runtimeDeltaDataChangeType")[t]==="ModelChanged";if(m){break;}}var I=!m;this._resumeTable(I);};this.attachEventOnce("afterP13nModelDataChange",j,this);this._fireChangeEvent();}.bind(this),0);if(this._oDialog.isA("sap.m.P13nDialog")){this._oDialog.close();}};
i.prototype.handleP13n=function(){return new Promise(function(r){var w=this._oDialog.getContent()[0];if(w.isA("sap.ui.mdc.p13n.panels.Wrapper")){this._sActivePanel=w.getCurrentViewKey();}this._handleDialogOk(true);r();}.bind(this));};
i.prototype._handleDialogCancel=function(){if(this._oDialog.isA("sap.m.P13nDialog")){this._oDialog.detachCancel(this._handleDialogCancel,this);}setTimeout(function(){this._postDialogUi(this._getBeforeOpenData());this._resumeTable(false);this._callControllers(this._oSettingCurrent,"calculateControlData");}.bind(this),0);this._bCancelPressed=true;if(this._oDialog.isA("sap.m.P13nDialog")){this._oDialog.close();}};
i.prototype._handleDialogAfterClose=function(){if(this._oDialog.isA("sap.m.P13nDialog")){this._oInitialVisiblePanelType=this._oDialog.getVisiblePanel()?this._oDialog.getVisiblePanel().getType():this._getInitialVisiblePanelType();}this._bUnconfirmedResetPressed=false;this.fireDialogAfterClose({cancel:this._bCancelPressed});if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}};
i.prototype._getInitialVisiblePanelType=function(){for(var t in this._oSettingCurrent){return t;}};
i.prototype._suspendTable=function(){if(U.getTableBaseType(this.getTable())===b.personalization.TableType.Table){this._bSuspend=true;}};
i.prototype._resumeTable=function(I){I=(I===undefined)?true:I;var t=this.getTable();if(this._bSuspend){if(t){if(I){t.invalidate();}}this._bSuspend=false;}};
i.prototype._requestMissingColumnsWithoutIgnore=function(j){var o=this._callControllers(this._oSettingCurrent,"determineMissingColumnKeys",j);var m=U.getUnionOfColumnKeys(o);if(!m.length){return[];}this.fireRequestColumns({columnKeys:m});return m;};
i.prototype._extendModelStructure=function(j){if(!j.length){return;}var o=this._callControllers(this._oSettingCurrent,"createColumnKeysStructure",j);var k=this._callControllers(this._oSettingCurrent,"getTable2Json",o);this._callControllers(this._oSettingCurrent,"extendControlDataInitial",k);this._callControllers(this._oSettingCurrent,"extendVariantDataInitial",k);this._callControllers(this._oSettingCurrent,"extendControlDataBase",k);this._callControllers(this._oSettingCurrent,"extendAlreadyKnownRuntimeData",k);this._callControllers(this._oSettingCurrent,"extendAlreadyKnownPersistentData",k);};
i.prototype._setRuntimeAndPersonalizationData=function(r,p){r=(r===null?{}:r);if(!this._sanityCheck(r)){return;}p=(p===null?{}:p);if(!this._sanityCheck(p)){return;}this._setVariantData(p);this._extendModelStructure(this._requestMissingColumnsWithoutIgnore(r));var j=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataInitial(),p);this._callControllers(this._oSettingCurrent,"setVariantDataInitial2Model",j);var R=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataInitial(),r);this._callControllers(this._oSettingCurrent,"fixConflictWithIgnore",R,this._getIgnoreData());this._callControllers(this._oSettingCurrent,"setControlDataBase2Model",R);for(var t in this._oSettingCurrent){this._calculateChangeType(t,R);}this._suspendTable();this._syncTableUi();this._resumeTable(true);this._fireChangeEvent();};
i.prototype._prepareDialogUi=function(){var j=this._callControllers(this._oSettingCurrent,"createColumnKeysStructure",this.getColumnKeys());this._extendModelStructure(this._requestMissingColumnsWithoutIgnore(j));this._callControllers(this._oSettingCurrent,"setBeforeOpenData2Model",this._getControlDataBase());this._callControllers(this._oSettingCurrent,"calculateControlDataReduce");var o=this._callControllers(this._oSettingCurrent,"getTable2JsonTransient",j);this._callControllers(this._oSettingCurrent,"calculateTransientData",o);this._callControllers(this._oSettingCurrent,"calculatePropertyInfo",o);};
i.prototype._postDialogUi=function(j){this._callControllers(this._oSettingCurrent,"updateControlDataBaseFromJson",j);this._callControllers(this._oSettingCurrent,"setBeforeOpenData2Model",undefined);this._callControllers(this._oSettingCurrent,"setControlDataReduce2Model",undefined);this._callControllers(this._oSettingCurrent,"setTransientData2Model",undefined);};
i.prototype._syncDialogUi=function(){this._callControllers(this._oSettingCurrent,"calculateControlDataReduce");};
i.prototype._syncTableUi=function(){this._callControllers(this._oSettingCurrent,"calculateControlData");this._callControllers(this._oSettingCurrent,"syncJson2Table",this._getControlData());};
i.prototype._resetFull=function(){this._setVariantData(undefined);this._callControllers(this._oSettingCurrent,"setControlDataBase2Model",this._getControlDataInitial());};
i.prototype._resetPartial=function(){this._callControllers(this._oSettingCurrent,"setControlDataBase2Model",this._getVariantDataInitial());};
i.prototype._calculateChangeType=function(t,j){var s={};s[t]=this._oSettingCurrent[t];this._callControllers(s,"calculatePersistentChangeTypesFromJson",j,this._determineResetType());var p=this._getPersistentDataChangeType();var I=false;for(t in this._oSettingCurrent){if(p[t]!==b.personalization.ChangeType.Unchanged){I=true;}}this._setIsDirty(I);};
i.prototype._fireChangeEvent=function(r){var o={};var j=this._callControllers(this._oSettingCurrent,"getUnionData",this._getControlDataInitial(),this._getControlData());o.runtimeDeltaDataChangeType=this._callControllers(this._oSettingCurrent,"getChangeType",j,this._getAlreadyKnownRuntimeData());o.persistentDeltaDataChangeType=this._getPersistentDeltaDataChangeType();o.persistentDataChangeType=this._getPersistentDataChangeType();if(!U.hasChangedType(o.runtimeDeltaDataChangeType)&&!U.hasChangedType(o.persistentDeltaDataChangeType)){return;}var k=this._callControllers(this._oSettingCurrent,"getChangeData",j,this._getAlreadyKnownRuntimeData());o.runtimeDeltaData=U.removeEmptyProperty(U.copy(k));var p=this._callControllers(this._oSettingCurrent,"getChangeData",this._getControlDataBase(),this._getControlDataInitial());o.persistentData=U.removeEmptyProperty(p);this._callControllers(this._oSettingCurrent,"setAlreadyKnownRuntimeData2Model",this._getControlData());this._callControllers(this._oSettingCurrent,"setAlreadyKnownPersistentData2Model",this._getControlDataBase());delete o.persistentDeltaDataChangeType;this.fireAfterP13nModelDataChange(o);};
i.prototype._onSetVisible=function(v,s){if(v){var I=U.getUnionOfAttribute(this._oSettingCurrent,"ignoreColumnKeys");if(I.indexOf(s)>-1){throw"The provided 'ignoreColumnKeys' are inconsistent. No column specified as ignored is allowed to be visible. "+this;}}};
i.prototype._onSetSummed=function(I,o){this._oSettingCurrent.columns.controller._onColumnTotal({column:o,isSummed:I});};
i.prototype._getArgumentsByType=function(A,t){var r=[],o=null;if(A&&A.length&&t){A.forEach(function(j){if(j&&j[t]&&typeof j[t]!=="function"){o={};o[t]=j[t];r.push(o);}else{r.push(j);}});}return r;};
i.prototype._callControllers=function(s,m){var o,j,A;var r={},k=Array.prototype.slice.call(arguments,2);for(var t in s){o=j=A=null;o=s[t];j=o.controller;if(!j||!o.visible||!j[m]){continue;}A=this._getArgumentsByType(k,t);if(m==="getPanel"||m==="retrieveAdaptationUI"){A.push(o.payload);}else if(m==="setIgnoreColumnKeys"){A.push(o.ignoreColumnKeys);}else if(m==="setTriggerModelChangeOnColumnInvisible"){A.push(o.triggerModelChangeOnColumnInvisible);}if(m==="setStableColumnKeys"&&t=="columns"){A.push(s.columns.stableColumnKeys);}if(m==="setMessageStrip"&&o.createMessageStrip){var l=o.createMessageStrip();A.push(l);}var R=j[m].apply(j,A);if(R!==null&&R!==undefined&&R[t]!==undefined){r[t]=R[t];}else{r[t]=R;}}return r;};
i.prototype._sanityCheck=function(j){return true;};
i.prototype._createInternalModel=function(j){var m=new J();m.setDefaultBindingMode(B.TwoWay);m.setSizeLimit(10000);this.setModel(m,"$sapuicomppersonalizationBaseController");return m;};
i.prototype._getInternalModel=function(){return this.getModel("$sapuicomppersonalizationBaseController");};
i.prototype._getInternalModelData=function(s){return this._getInternalModel().getProperty("/"+s);};
i.prototype._getControlDataInitial=function(){return this._getInternalModelData("controlDataInitial");};
i.prototype._getControlDataBase=function(){return this._getInternalModelData("controlDataBase");};
i.prototype._getIgnoreData=function(){return this._getInternalModelData("ignoreData");};
i.prototype._getPersistentDataChangeType=function(){return this._getInternalModelData("persistentDataChangeType");};
i.prototype._getPersistentDeltaDataChangeType=function(){return this._getInternalModelData("persistentDeltaDataChangeType");};
i.prototype._getControlData=function(){return this._getInternalModelData("controlData");};
i.prototype._getControlDataReduce=function(){return this._getInternalModelData("controlDataReduce");};
i.prototype._getTransientData=function(){return this._getInternalModelData("transientData");};
i.prototype._getAlreadyKnownRuntimeData=function(){return this._getInternalModelData("alreadyKnownRuntimeData");};
i.prototype._getAlreadyKnownPersistentData=function(){return this._getInternalModelData("alreadyKnownPersistentData");};
i.prototype._getVariantDataInitial=function(){return this._getInternalModelData("variantDataInitial");};
i.prototype._getBeforeOpenData=function(){return this._getInternalModelData("beforeOpenData");};
i.prototype._setVariantData=function(j){this._getInternalModel().setProperty("/variantData",j?U.copy(j):undefined);};
i.prototype._setIsDirty=function(I){this._getInternalModel().setProperty("/isDirty",I);};
i.prototype._getVariantData=function(){return this._getInternalModel().getProperty("/variantData");};
i.prototype._getControllers=function(){var m={};Object.keys(this._oSettingCurrent).forEach(function(k){var s=this._oSettingCurrent[k];if(s.hasOwnProperty("controller")){m[k]=s;}}.bind(this));return m;};
i.prototype._controllerFactory=function(t){var j=this;switch(t){case a.P13nPanelType.columns:return new c({afterColumnsModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});case a.P13nPanelType.sort:return new S({afterSortModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});case a.P13nPanelType.filter:return new F({afterFilterModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});case a.P13nPanelType.group:return new G({afterGroupModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});case a.P13nPanelType.dimeasure:return new D({afterDimeasureModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});case a.P13nPanelType.selection:return new d({afterSelectionModelDataChange:function(){j._fireChangeEvent();},beforePotentialTableChange:function(){j.fireBeforePotentialTableChange();},afterPotentialTableChange:function(){j.fireAfterPotentialTableChange();},afterPotentialModelChange:function(E){j._calculateChangeType(t,E.getParameter("json"));}});default:throw"Panel type '"+t+"' is not valid";}};
i.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};
i._getOrderedColumnKeys=function(o,j){var m=Object.keys(o);return j.reduce(function(r,s){if(m.indexOf(s)>-1){r.push(s);}return r;},[]);};
i.prototype.exit=function(){var t;this._resumeTable(false);if(this._oDialog){this._oDialog.destroy();this._oDialog=null;}if(this._oUIManager){this._oUIManager.destroy();this._oUIManager=null;}this._oUISetting=null;this._callControllers(this._oSettingCurrent,"destroy");for(t in this._oSettingCurrent){this._oSettingCurrent[t]=null;}this._oSettingCurrent=null;this._oColumnHelper=null;};
i.prototype._determineResetType=function(r){r=r||(this.getResetToInitialTableState()?b.personalization.ResetType.ResetFull:b.personalization.ResetType.ResetPartial);if(r===b.personalization.ResetType.ResetFull||this._getVariantData()===undefined){return b.personalization.ResetType.ResetFull;}return b.personalization.ResetType.ResetPartial;};
i.prototype._isEqualAdditionalIgnoreColumnKeys=function(j){var o=this._callControllers(this._oSettingCurrent,"isEqualAdditionalIgnoreColumnKeys",j);var I=true;for(var t in o){I=I&&o[t];}return I;};
i.SyncReason={ResetFull:14,ResetPartial:15,NewModelDataMixedWithVariant:7};return i;});
sap.ui.predefine('sap/ui/comp/personalization/DimeasureController',['./BaseController','sap/m/library','sap/ui/comp/library','./ChartWrapper','./Util','sap/ui/comp/odata/ChartMetadata'],function(B,M,C,c,U,d){"use strict";
var D=B.extend("sap.ui.comp.personalization.DimeasureController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.dimeasure);this.setItemType(M.P13nPanelType.dimeasure+"Items");},
metadata:{events:{afterDimeasureModelDataChange:{}}}
});
D.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(this.getTableType()!==C.personalization.TableType.ChartWrapper){throw"The provided object is incorrect. 'oTable' has to be an instance of sap.ui.comp.personalization.ChartWrapper. ";}var o=t.getChartObject();o.detachDrilledDown(this._onDrilledDown,this);o.attachDrilledDown(this._onDrilledDown,this);o.detachDrilledUp(this._onDrilledUp,this);o.attachDrilledUp(this._onDrilledUp,this);this._monkeyPatchTable(o);};
D.prototype._monkeyPatchTable=function(o){var t=this;var s=o.setChartType.bind(o);var S=function(a){s(a);t._onSetChartType(a);};if(o.setChartType.toString()===S.toString()){return;}o.setChartType=S;};
D.prototype._onSetChartType=function(s){var o=this.getControlData();if(!s||s===o.dimeasure.chartTypeKey){return;}this.fireBeforePotentialTableChange();o.dimeasure.chartTypeKey=s;this.updateControlDataBaseFromJson(o);this.fireAfterPotentialTableChange();this.fireAfterDimeasureModelDataChange();};
D.prototype._onDrilledDown=function(e){this.fireBeforePotentialTableChange();this._addVisibleDimensions(e.getParameter("dimensions")||[]);this.fireAfterPotentialTableChange();this.fireAfterDimeasureModelDataChange();};
D.prototype._addVisibleDimensions=function(a){if(!a.length){return;}var o=this.getControlData();var s=o.dimeasure.dimeasureItems.filter(function(m){return m.visible&&m.aggregationRole===C.personalization.AggregationRole.Dimension&&a.indexOf(m.columnKey)<0;}).reduce(function(b,m){return m.columnKey;},"");a.forEach(function(b){var i=U.getIndexByKey("columnKey",s,o.dimeasure.dimeasureItems)+1;var I=U.getIndexByKey("columnKey",b,o.dimeasure.dimeasureItems);s=b;if(I<0||i<0||I>o.dimeasure.dimeasureItems.length-1||i>o.dimeasure.dimeasureItems.length-1){return;}var m=o.dimeasure.dimeasureItems.splice(I,1);m[0].visible=true;o.dimeasure.dimeasureItems.splice(i,0,m[0]);var e=-1;o.dimeasure.dimeasureItems.forEach(function(f){if(f.index!==undefined){f.index=++e;}});this.updateControlDataBaseFromJson(o);},this);};
D.prototype._onDrilledUp=function(e){this.fireBeforePotentialTableChange();var o=this.getControlData();var i=e.getParameter("dimensions")||[];i.forEach(function(s){var m=U.getArrayElementByKey("columnKey",s,o.dimeasure.dimeasureItems);if(!m){throw"No entry found in 'controlDataBase' for columnKey '"+s+"'";}m.visible=false;this.updateControlDataBaseFromJson(o);},this);this.fireAfterPotentialTableChange();this.fireAfterDimeasureModelDataChange();};
D.prototype.getColumn2Json=function(o,s,i){if(!U.isAggregatable(o)){return null;}return{columnKey:s,index:i,visible:o.getVisible(),role:o.getRole(),aggregationRole:o.getAggregationRole()};};
D.prototype.getAdditionalData2Json=function(j,t){var o=t.getChartObject();j.dimeasure.chartTypeKey=o.getChartType();};
D.prototype.getColumn2JsonTransient=function(o,s,t,T){if(!U.isAggregatable(o)){return null;}return{columnKey:s,text:t,tooltip:T!==t?T:undefined,aggregationRole:o.getAggregationRole()};};
D.prototype.handleIgnore=function(j,i){j.dimeasure.dimeasureItems[i].visible=false;};
D.prototype.syncJson2Table=function(j){var o=this.getTable().getChartObject();var u=function(b,s,S,g){var e=U.copy(b);e.sort(D._sortByIndex);var f=[];e.forEach(function(h){if(h.visible===true){f.push(h.columnKey);var i=g(h.columnKey);if(i){i.setRole(h.role);}}});if(JSON.stringify(f)!==JSON.stringify(s)){S(f,true);}};this.fireBeforePotentialTableChange();var a=j.dimeasure.dimeasureItems.filter(function(b){return b.aggregationRole===C.personalization.AggregationRole.Dimension;});var m=j.dimeasure.dimeasureItems.filter(function(b){return b.aggregationRole===C.personalization.AggregationRole.Measure;});var v=o.getVisibleDimensions();u(a,v,o.setVisibleDimensions.bind(o),o.getDimensionByName.bind(o));var V=o.getVisibleMeasures();u(m,V,o.setVisibleMeasures.bind(o),o.getMeasureByName.bind(o));o.setChartType(j.dimeasure.chartTypeKey);this.fireAfterPotentialTableChange();};
D.prototype.getDataSuiteFormat2Json=function(o){var j=this.createControlDataStructure();var a=function(s,p,P){var i=U.getIndexByKey("columnKey",s,j.dimeasure.dimeasureItems);if(i<0){i=j.dimeasure.dimeasureItems.length;j.dimeasure.dimeasureItems.splice(i,0,{columnKey:s});}j.dimeasure.dimeasureItems[i][p]=P;};this.getControlDataInitial().dimeasure.dimeasureItems.filter(function(m){return m.visible===true;}).forEach(function(m){a(m.columnKey,"visible",false);});if(o.Visualizations&&o.Visualizations.length){var b=o.Visualizations.filter(function(V){return V.Type==="Chart";});if(b.length){var v=0;if(b[0].Content.Dimensions.length){v=b[0].Content.Dimensions.length;b[0].Content.Dimensions.forEach(function(n,i){var A=U.getArrayElementByKey("Dimension",n,b[0].Content.DimensionAttributes);a(n,"visible",true);a(n,"index",i);if(A&&A.Role){a(n,"role",d.getDimensionRole(A.Role));}a(n,"aggregationRole",C.personalization.AggregationRole.Dimension);},this);}if(b[0].Content.Measures.length){b[0].Content.Measures.forEach(function(n,i){var A=U.getArrayElementByKey("Measure",n,b[0].Content.MeasureAttributes);a(n,"visible",true);a(n,"index",v+i);if(A&&A.Role){a(n,"role",d.getMeasureRole(A.Role));}a(n,"aggregationRole",C.personalization.AggregationRole.Measure);},this);}}j.dimeasure.chartTypeKey=d.getChartType(b[0].Content.ChartType);}return j;};
D.prototype.getDataSuiteFormatSnapshot=function(o){var a=this.getUnionData(this.getControlDataInitial(),this.getControlData());if(!a.dimeasure||!a.dimeasure.dimeasureItems||!a.dimeasure.dimeasureItems.length){return;}var b=a.dimeasure.dimeasureItems.filter(function(e){return e.aggregationRole===C.personalization.AggregationRole.Dimension;}).filter(function(e){return e.visible===true;});var m=a.dimeasure.dimeasureItems.filter(function(e){return e.aggregationRole===C.personalization.AggregationRole.Measure;}).filter(function(e){return e.visible===true;});if(b.length||m.length){if(!o.Visualizations){o.Visualizations=[];}o.Visualizations.push({Type:"Chart",Content:{ChartType:d.getAnnotationChartType(a.dimeasure.chartTypeKey),Dimensions:b.map(function(e){return e.columnKey;}),DimensionAttributes:b.map(function(e){return{Dimension:e.columnKey,Role:d.getAnnotationDimensionRole(e.role)};}),Measures:m.map(function(e){return e.columnKey;}),MeasureAttributes:m.map(function(e){return{Measure:e.columnKey,Role:d.getAnnotationMeasureRole(e.role)};})}});}};
D.prototype.getPanel=function(p){if(!U.hasAggregatableColumns(this.getColumnMap())){return null;}var a=(p&&p.availableChartTypes)?p.availableChartTypes:[];return new Promise(function(r){sap.ui.require(['sap/m/P13nDimMeasurePanel','sap/m/P13nItem','sap/m/P13nDimMeasureItem','sap/ui/core/ResizeHandler'],function(P,b,e,R){var o=new P({availableChartTypes:a,chartTypeKey:"{$sapmP13nPanel>/controlDataReduce/dimeasure/chartTypeKey}",items:{path:'$sapmP13nPanel>/transientData/dimeasure/dimeasureItems',template:new b({columnKey:'{$sapmP13nPanel>columnKey}',text:'{$sapmP13nPanel>text}',tooltip:'{$sapmP13nPanel>tooltip}',aggregationRole:'{$sapmP13nPanel>aggregationRole}'})},dimMeasureItems:{path:"$sapmP13nPanel>/controlDataReduce/dimeasure/dimeasureItems",template:new e({columnKey:"{$sapmP13nPanel>columnKey}",index:"{$sapmP13nPanel>index}",visible:"{$sapmP13nPanel>visible}",role:"{$sapmP13nPanel>role}"})},beforeNavigationTo:this.setModelFunction(),changeChartType:function(E){var f=this.getControlDataReduce();f.dimeasure.chartTypeKey=E.getParameter("chartTypeKey");this.setControlDataReduce2Model(f);this.fireAfterPotentialModelChange({json:f});}.bind(this),changeDimMeasureItems:function(E){if(!E.getParameter("items")){return;}var i=E.getParameter("items");var f=this.getControlDataReduce();f.dimeasure.dimeasureItems.forEach(function(m){var g=U.getArrayElementByKey("columnKey",m.columnKey,i);if(!g){return;}m.index=g.index;m.visible=g.visible;m.role=g.role;});this.setControlDataReduce2Model(f);this.fireAfterPotentialModelChange({json:f});}.bind(this)});R.deregister(o._sContainerResizeListener);return r(o);}.bind(this));}.bind(this));};
D.prototype._isDimMeasureItemEqual=function(o,a){if(!o&&!a){return true;}if(o&&!a){if(o.index===-1&&o.visible===false){return true;}return false;}if(a&&!o){if(a.index===-1&&a.visible===false){return true;}return false;}for(var p in o){if(a[p]===undefined||o[p]!==a[p]){return false;}}return true;};
D.prototype._isSemanticEqual=function(p,P){if(p.dimeasure.chartTypeKey!==P.dimeasure.chartTypeKey){return false;}var s=function(a,b){if(a.visible===true&&(b.visible===false||b.visible===undefined)){return-1;}else if((a.visible===false||a.visible===undefined)&&b.visible===true){return 1;}else if(a.visible===true&&b.visible===true){if(a.index<b.index){return-1;}else if(a.index>b.index){return 1;}else{return 0;}}else if((a.visible===false||a.visible===undefined)&&(b.visible===false||b.visible===undefined)){if(a.columnKey<b.columnKey){return-1;}else if(a.columnKey>b.columnKey){return 1;}else{return 0;}}};var e=U.copy(p.dimeasure.dimeasureItems).sort(s);var f=U.copy(P.dimeasure.dimeasureItems).sort(s);var i=true;e.some(function(o,I){if(!this._isDimMeasureItemEqual(o,f[I])){i=false;return true;}},this);return i;};
D.prototype.getChangeType=function(p,P){if(!P||!P.dimeasure||!P.dimeasure.dimeasureItems){return C.personalization.ChangeType.Unchanged;}return this._isSemanticEqual(p,P)?C.personalization.ChangeType.Unchanged:C.personalization.ChangeType.ModelChanged;};
D.prototype.getChangeData=function(p,P){if(!p||!p.dimeasure||!p.dimeasure.dimeasureItems){return this.createControlDataStructure();}if(!P||!P.dimeasure||!P.dimeasure.dimeasureItems){return{chartTypeKey:p.dimeasure.chartTypeKey,dimeasure:U.copy(p.dimeasure)};}if(!this._isSemanticEqual(p,P)){return{chartTypeKey:p.dimeasure.chartTypeKey,dimeasure:U.copy(p.dimeasure)};}return null;};
D.prototype.getUnionData=function(j,J){if(!J||!J.dimeasure||!J.dimeasure.dimeasureItems){return U.copy(j);}var u=U.copy(J);Object.keys(j.dimeasure).forEach(function(a){if(Array.isArray(j.dimeasure[a])){j.dimeasure[a].forEach(function(m){var o=U.getArrayElementByKey("columnKey",m.columnKey,u.dimeasure[a]);if(!o){u.dimeasure[a].push(m);return;}if(o.visible===undefined&&m.visible!==undefined){o.visible=m.visible;}if(o.role===undefined&&m.role!==undefined){o.role=m.role;}if(o.index===undefined&&m.index!==undefined){o.index=m.index;}if(o.aggregationRole===undefined&&m.aggregationRole!==undefined){o.aggregationRole=m.aggregationRole;}});return;}if(u.dimeasure[a]===undefined&&j.dimeasure[a]!==undefined){u.dimeasure[a]=j.dimeasure[a];}},this);return u;};
D._sortByIndex=function(a,b){if(a.index!==undefined&&b.index===undefined){return-1;}if(b.index!==undefined&&a.index===undefined){return 1;}if(a.index<b.index){return-1;}if(a.index>b.index){return 1;}return 0;};
D.prototype.isChartConsistent=function(o){var t=this.getTable();if(!t){return true;}var a=t.getChartObject();if(!a){return true;}sap.ui.getCore().loadLibrary("sap.chart");try{var r=sap.chart.api.getChartTypeLayout(o.dimeasure.chartTypeKey,a.getDimensions(),a.getMeasures());return r.errors.length===0;}catch(e){return false;}};
D.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(t){var o=t.getChartObject();if(o){o.detachDrilledDown(this._onDrilledDown,this);o.detachDrilledUp(this._onDrilledUp,this);}}};
return D;});
sap.ui.predefine('sap/ui/comp/personalization/FilterController',['./BaseController','sap/m/library','sap/ui/comp/library','./Util','sap/ui/comp/filterbar/VariantConverterTo','sap/ui/comp/filterbar/VariantConverterFrom','sap/base/util/merge'],function(B,M,C,U,V,a,m){"use strict";
var F=B.extend("sap.ui.comp.personalization.FilterController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.filter);this.setItemType(M.P13nPanelType.filter+"Items");},
metadata:{events:{afterFilterModelDataChange:{}}}
});
F.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);};
F.prototype.getColumn2Json=function(c,s,i){if(this.getTableType()!==C.personalization.TableType.AnalyticalTable&&this.getTableType()!==C.personalization.TableType.Table&&this.getTableType()!==C.personalization.TableType.TreeTable){return null;}if(!U.isFilterable(c)){return null;}if(!c.getFiltered||(c.getFiltered&&!c.getFiltered())){return null;}return{columnKey:s,exclude:false,operation:c.getFilterOperator(),value1:c.getFilterValue(),value2:""};};
F.prototype.getColumn2JsonTransient=function(c,s,t,T){if(!U.isFilterable(c)){return null;}var v;if(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable){if(U.getColumnType(c)==="boolean"){v=U._getCustomProperty(c,"values");}return{columnKey:s,text:t,tooltip:T!==t?T:undefined,maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),typeInstance:U._getCustomProperty(c,"typeInstance"),values:v,nullable:U._getCustomProperty(c,"nullable")};}if(this.getTableType()===C.personalization.TableType.ResponsiveTable){if(U.getColumnType(c)==="boolean"){v=U._getCustomProperty(c,"values");}return{columnKey:s,text:t,tooltip:T!==t?T:undefined,maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),typeInstance:U._getCustomProperty(c,"typeInstance"),values:v,nullable:U._getCustomProperty(c,"nullable")};}if(this.getTableType()===C.personalization.TableType.ChartWrapper){return{columnKey:s,text:t,tooltip:T!==t?T:undefined,maxLength:U._getCustomProperty(c,"maxLength"),precision:U._getCustomProperty(c,"precision"),scale:U._getCustomProperty(c,"scale"),type:U.getColumnType(c),typeInstance:U._getCustomProperty(c,"typeInstance"),values:v,nullable:U._getCustomProperty(c,"nullable")};}};
F.prototype.handleIgnore=function(j,i){j.sort.sortItems.splice(i,1);};
F.prototype.syncJson2Table=function(j){var c=this.getColumnMap();var o=m({},c);this.fireBeforePotentialTableChange();if(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable){j.filter.filterItems.forEach(function(f){var b=c[f.columnKey];if(b){if(!b.getFiltered()){b.setFiltered(true);}delete o[f.columnKey];}});for(var s in o){var b=o[s];if(b&&b.getFiltered()){b.setFiltered(false);}}}this.fireAfterPotentialTableChange();};
F.prototype.getDataSuiteFormat2Json=function(d){var j=this.createControlDataStructure();if(!d.SelectOptions||!d.SelectOptions.length){return j;}j.filter.filterItems=d.SelectOptions.map(function(s){var c=a.convertOption(s.Ranges[0].Option,s.Ranges[0].Low);return{columnKey:s.PropertyName,exclude:(s.Ranges[0].Sign==="E"),operation:c.op,value1:c.v,value2:s.Ranges[0].High};});return j;};
F.prototype.getDataSuiteFormatSnapshot=function(d){var c=this.getUnionData(this.getControlDataInitial(),this.getControlData());if(!c.filter||!c.filter.filterItems||!c.filter.filterItems.length){return;}c.filter.filterItems.forEach(function(f){var r=V.addRangeEntry(d,f.columnKey);V.addRanges(r,[f]);});};
F.prototype.getPanel=function(p){if(!U.hasFilterableColumns(this.getColumnMap())){return null;}if(p&&p.column){var c=U.getColumnKey(p.column);if(c){var j=this.getTransientData();j.filter.filterItems.forEach(function(i){i["isDefault"]=i.columnKey===c;});}}var s=this._getSmartFilterBar();this._aDropdownFields=s&&s._oFilterProvider&&s._oFilterProvider._aFilterBarDropdownFieldMetadata;return new Promise(function(r){sap.ui.require(['sap/ui/comp/p13n/P13nFilterPanel','sap/m/P13nItem','sap/m/P13nAnyFilterItem','sap/ui/comp/providers/ValueListProvider'],function(P,b,d,e){var o=this.getColumnMap(true),f=new P({containerQuery:true,enableEmptyOperations:true,items:{path:"$sapmP13nPanel>/transientData/filter/filterItems",template:new b({columnKey:'{$sapmP13nPanel>columnKey}',text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}",maxLength:"{$sapmP13nPanel>maxLength}",precision:"{$sapmP13nPanel>precision}",scale:"{$sapmP13nPanel>scale}",type:"{$sapmP13nPanel>type}",typeInstance:"{$sapmP13nPanel>typeInstance}",isDefault:"{$sapmP13nPanel>isDefault}",values:"{$sapmP13nPanel>values}",nullable:"{$sapmP13nPanel>nullable}"})},filterItems:{path:"$sapmP13nPanel>/controlDataReduce/filter/filterItems",template:new d({key:"{$sapmP13nPanel>key}",columnKey:"{$sapmP13nPanel>columnKey}",exclude:"{$sapmP13nPanel>exclude}",operation:"{$sapmP13nPanel>operation}",value1:"{$sapmP13nPanel>value1}",value2:"{$sapmP13nPanel>value2}"})},messageStrip:this.getMessageStrip(),beforeNavigationTo:this.setModelFunction(),filterItemChanged:function(E){var R=E.getParameter("reason");var i=E.getParameter("index");var I=E.getParameter("itemData");var g=this.getControlDataReduce();if(I&&R==="added"){if(i>-1){g.filter.filterItems.splice(i,0,I);}else{g.filter.filterItems.push(I);}}if(R==="removed"&&i>-1){g[this.getType()][this.getItemType()].splice(i,1);}this.setControlDataReduce2Model(g);this.fireAfterPotentialModelChange({json:g});}.bind(this)});if(this._aDropdownFields&&this._aDropdownFields.length>0){this._aDropdownFields=this._aDropdownFields.filter(function(g){var h=o[g.name];return!!U._getCustomProperty(h,"fullName");});}f._oConditionPanel.data("dropdownFields",this._aDropdownFields);var S=function(g,h){var k=this.getColumnMap(true),l=k[h],n=U._getCustomProperty(l,"fullName"),s=this._getSmartFilterBar(),q=s&&s.getControlConfiguration(),A,t,D,u,i;if(g.isA("sap.m.ComboBox")||g.isA("sap.m.MultiComboBox")){A="items";t=false;D="idOnly";if(s&&s._oFilterProvider){D=s._oFilterProvider._sTextArrangementDisplayBehaviour;this._aDropdownFields.forEach(function(v){if(v.name===h){var R=v["com.sap.vocabularies.Common.v1.Text"];if(R){D=s._oFilterProvider._oMetadataAnalyser.getTextArrangementValue(R);}else if(v["com.sap.vocabularies.UI.v1.TextArrangement"]){D=s._oFilterProvider._oMetadataAnalyser.getTextArrangementValue(v);}}});}if(Array.isArray(q)&&q.length>0){for(i=0;i<q.length;i++){u=q[i];if(u.getKey()===h){D=u.getDisplayBehaviour();break;}}}}else{A="suggestionRows";t=true;}if(n){g.setShowSuggestion&&g.setShowSuggestion(true);g.setFilterSuggests&&g.setFilterSuggests(false);g.setModel(this.getTable().getModel());return new e({fieldName:h,control:g,model:this.getTable().getModel(),maxLength:U._getCustomProperty(l,"maxLength"),displayBehaviour:D,resolveInOutParams:false,loadAnnotation:true,fullyQualifiedFieldName:n,aggregation:A,typeAheadEnabled:t,enableShowTableSuggestionValueHelp:false});}}.bind(this);f._oConditionPanel._fSuggestCallback=S;f._enableEnhancedExcludeOperations();f.addStyleClass("sapUiSmallMarginTop");return r(f);}.bind(this));}.bind(this));};
F.prototype.getChangeType=function(p,P){if(!P||!P.filter||!P.filter.filterItems){return C.personalization.ChangeType.Unchanged;}if(P&&P.filter&&P.filter.filterItems){P.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(p&&p.filter&&p.filter.filterItems){p.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}var i=JSON.stringify(p.filter.filterItems)!==JSON.stringify(P.filter.filterItems);return i?C.personalization.ChangeType.ModelChanged:C.personalization.ChangeType.Unchanged;};
F.prototype.getChangeData=function(p,P){if(!p||!p.filter||!p.filter.filterItems){return this.createControlDataStructure();}if(P&&P.filter&&P.filter.filterItems){P.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(p&&p.filter&&p.filter.filterItems){p.filter.filterItems.forEach(function(f){delete f.key;delete f.source;});}if(!P||!P.filter||!P.filter.filterItems){return{filter:U.copy(p.filter)};}if(JSON.stringify(p.filter.filterItems)!==JSON.stringify(P.filter.filterItems)){return{filter:U.copy(p.filter)};}return null;};
F.prototype.getUnionData=function(j,J){if(!J||!J.filter||!J.filter.filterItems){return{filter:U.copy(j.filter)};}return{filter:U.copy(J.filter)};};
F.prototype._getSmartFilterBar=function(){var s,t=this.getTable();if(t){s=t.oParent&&t.oParent._oSmartFilter;}if(!s&&t&&this.getTableType()===C.personalization.TableType.ChartWrapper){s=t.getChartObject()&&t.getChartObject().oParent&&t.getChartObject().oParent._oSmartFilter;}return s?s:null;};
F.prototype.exit=function(){B.prototype.exit.apply(this,arguments);this._aDropdownFields=null;};
return F;});
sap.ui.predefine('sap/ui/comp/personalization/GroupController',['./BaseController','sap/m/library','sap/ui/comp/library','./Util','sap/m/P13nConditionPanel'],function(B,M,C,U,P){"use strict";var a=M.P13nConditionOperation;
var G=B.extend("sap.ui.comp.personalization.GroupController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.group);this.setItemType(M.P13nPanelType.group+"Items");},
metadata:{events:{afterGroupModelDataChange:{}}}
});
G.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable){t.detachGroup(this._onGroup,this);t.attachGroup(this._onGroup,this);}};
G.prototype.getColumn2Json=function(c,s,i){if(this.getTableType()!==C.personalization.TableType.AnalyticalTable){return null;}if(!c.getGrouped()){return null;}return{columnKey:s,isGrouped:c.getGrouped(),operation:c.getSortOrder&&c.getSortOrder()==="Ascending"?a.GroupAscending:a.GroupDescending,showIfGrouped:c.getShowIfGrouped?c.getShowIfGrouped():false};};
G.prototype.getAdditionalData2Json=function(j,t){if(this.getTableType()!==C.personalization.TableType.AnalyticalTable){return;}if(!j.group.groupItems.length){return;}t.getGroupedColumns().forEach(function(c,i){if(typeof c==="string"){c=sap.ui.getCore().byId(c);}var I=U.getIndexByKey("columnKey",U.getColumnKey(c),j.group.groupItems);if(I>-1&&i===I){return;}var o=j.group.groupItems.splice(I,1);j.group.groupItems.splice(i,0,o);});};
G.prototype.getColumn2JsonTransient=function(c,s,t,T){if(!U.isGroupable(c)){return null;}return{columnKey:s,text:t,tooltip:T!==t?T:undefined};};
G.prototype.handleIgnore=function(j,i){j.sort.sortItems.splice(i,1);};
G.prototype.syncJson2Table=function(j){var c=this.getColumnMap();var t=this.getTable();var o;this.fireBeforePotentialTableChange();if(this.getTableType()===C.personalization.TableType.TreeTable){return;}else if(this.getTableType()===C.personalization.TableType.AnalyticalTable){for(var s in c){o=c[s];if(!o){return;}if(o.getGrouped()){o.setGrouped(false);o.setShowIfGrouped(false);}}j.group.groupItems.forEach(function(m){o=c[m.columnKey];if(!o){return;}o.setGrouped(true);o.setShowIfGrouped(m.showIfGrouped);});}else if(this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.TreeTable){if(j.group.groupItems.length>0){j.group.groupItems.some(function(m){o=c[m.columnKey];if(o){t.setGroupBy(o);return true;}});}else{t.setGroupBy(null);}}this.fireAfterPotentialTableChange();};
G.prototype.getDataSuiteFormat2Json=function(d){var j=this.createControlDataStructure();if(!d.GroupBy||!d.GroupBy.length){return j;}j.group.groupItems=d.GroupBy.map(function(g){return{columnKey:g,operation:a.GroupAscending,showIfGrouped:false};});return j;};
G.prototype.getDataSuiteFormatSnapshot=function(d){var c=this.getUnionData(this.getControlDataInitial(),this.getControlData());if(!c.group||!c.group.groupItems||!c.group.groupItems.length){return;}d.GroupBy=c.group.groupItems.map(function(m){return m.columnKey;});};
G.prototype._onGroup=function(e){this.fireBeforePotentialTableChange();this._updateInternalModel(e.getParameter("groupedColumns"));this.fireAfterPotentialTableChange();this.fireAfterGroupModelDataChange();};
G.prototype._updateInternalModel=function(g){this.getInternalModel().setProperty("/controlData/group/groupItems",[]);var c=this.getControlData();g.forEach(function(o){if(typeof o==="string"){o=sap.ui.getCore().byId(o);}var s=U.getColumnKey(o);var i=U.getIndexByKey("columnKey",s,c.group.groupItems);i=(i>-1)?i:c.group.groupItems.length;this.getInternalModel().setProperty("/controlData/group/groupItems/"+i+"/",{columnKey:s,showIfGrouped:o.getShowIfGrouped?o.getShowIfGrouped():false});},this);this.updateControlDataBaseFromJson(c);};
G.prototype.getPanel=function(){if(!U.hasGroupableColumns(this.getColumnMap())){return null;}return new Promise(function(r){sap.ui.require(['sap/m/P13nGroupPanel','sap/m/P13nItem','sap/m/P13nGroupItem'],function(b,c,d){return r(new b({maxGroups:this.getTableType()===C.personalization.TableType.AnalyticalTable?"-1":"1",containerQuery:true,items:{path:"$sapmP13nPanel>/transientData/group/groupItems",template:new c({columnKey:"{$sapmP13nPanel>columnKey}",text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}"})},groupItems:{path:"$sapmP13nPanel>/controlDataReduce/group/groupItems",template:new d({columnKey:"{$sapmP13nPanel>columnKey}",operation:"{$sapmP13nPanel>operation}",showIfGrouped:"{$sapmP13nPanel>showIfGrouped}"})},beforeNavigationTo:this.setModelFunction(),updateGroupItem:function(){this.fireAfterPotentialModelChange({json:this.getControlDataReduce()});}.bind(this),addGroupItem:function(e){if(!e.getParameter("groupItemData")){return;}var i=e.getParameter("index");var g=e.getParameter("groupItemData");var o={columnKey:g.getColumnKey(),operation:g.getOperation(),showIfGrouped:g.getShowIfGrouped()};var f=this.getControlDataReduce();if(i>-1){f.group.groupItems.splice(i,0,o);}else{f.group.groupItems.push(o);}this.setControlDataReduce2Model(f);this.fireAfterPotentialModelChange({json:f});}.bind(this),removeGroupItem:function(e){var i=e.getParameter("index");if(i<0){return;}var o=this.getControlDataReduce();o.group.groupItems.splice(i,1);this.setControlDataReduce2Model(o);this.fireAfterPotentialModelChange({json:o});}.bind(this)}));}.bind(this));}.bind(this));};
G.prototype.retrieveAdaptationUI=function(p){if(!U.hasGroupableColumns(this.getColumnMap())){return null;}return new Promise(function(r){sap.ui.require(['sap/ui/mdc/p13n/panels/GroupPanel'],function(b){var A=this.getAdaptationModel();var i=this.getTableType()===C.personalization.TableType.AnalyticalTable;var g=new b({queryLimit:i?undefined:1,enableShowField:i});this.oPanel=g;g.setP13nModel(A);g.attachChange(function(e){var I=I=e.getParameter("item");var c=g.getP13nState();var n=this.getControlDataReduce();n.group.groupItems=c.map(function(o){return{isGrouped:true,columnKey:o.name,operation:o.descending?"GroupDescending":"GroupAscending",showIfGrouped:I.name===o.name?I.showIfGrouped:true};});this.setControlDataReduce2Model(n);this.fireAfterPotentialModelChange({json:n});}.bind(this));r(g);}.bind(this));}.bind(this));};
G.prototype._transformAdaptationData=function(r,t){var A=B.prototype._transformAdaptationData.apply(this,arguments);A.grouped=!!r;A.showIfGrouped=r?r.showIfGrouped:true;return A;};
G.prototype._sortAdaptationData=function(i){this._getP13nBuilder().sortP13nData({visible:"grouped",position:"position"},i);};
G.prototype._getPresenceAttribute=function(){return"grouped";};
G.prototype.getChangeType=function(p,o){if(!o||!o.group||!o.group.groupItems){return C.personalization.ChangeType.Unchanged;}var i=JSON.stringify(p.group.groupItems)!==JSON.stringify(o.group.groupItems);return i?C.personalization.ChangeType.ModelChanged:C.personalization.ChangeType.Unchanged;};
G.prototype.getChangeData=function(p,o){if(!p||!p.group||!p.group.groupItems){return this.createControlDataStructure();}if(!o||!o.group||!o.group.groupItems){return{group:U.copy(p.group)};}if(JSON.stringify(p.group.groupItems)!==JSON.stringify(o.group.groupItems)){return{group:U.copy(p.group)};}return null;};
G.prototype.getUnionData=function(j,J){if(!J||!J.group||!J.group.groupItems){return{group:U.copy(j.group)};}return{group:U.copy(J.group)};};
G.prototype.isGroupSelected=function(c,s){var i=-1;c.groupItems.some(function(m,I){if(m.columnKey===s){i=I;return true;}});return i>-1;};
G.prototype.exit=function(){B.prototype.exit.apply(this,arguments);if(this.getTable()&&(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable)){this.getTable().detachGroup(this._onGroup,this);}};
return G;});
sap.ui.predefine('sap/ui/comp/personalization/SelectionController',['./BaseController','sap/m/library','sap/ui/comp/library','./Util'],function(B,M,C,U){"use strict";
var S=B.extend("sap.ui.comp.personalization.SelectionController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.selection);this.setItemType(M.P13nPanelType.selection+"Items");},
metadata:{events:{afterSelectionModelDataChange:{}}}
});
S.prototype.getColumn2Json=function(c,s,i){return{columnKey:s,text:c.getLabel(),visible:c.getSelected()};};
S.prototype.getColumn2JsonTransient=function(c,s,t,T){return{columnKey:s,text:t,href:c.getHref(),target:c.getTarget(),press:c.getPress(),description:c.getDescription()};};
S.prototype.syncJson2Table=function(j){this.fireBeforePotentialTableChange();this.fireAfterPotentialTableChange();};
S.prototype.getPanel=function(p){return new Promise(function(r){sap.ui.require(['sap/m/P13nSelectionPanel','sap/m/P13nItem','sap/m/P13nSelectionItem'],function(P,a,b){return r(new P({titleLarge:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("POPOVER_SELECTION_TITLE"),items:{path:'$sapmP13nPanel>/transientData/selection/selectionItems',template:new a({columnKey:'{$sapmP13nPanel>columnKey}',href:'{$sapmP13nPanel>href}',target:'{$sapmP13nPanel>target}',text:'{$sapmP13nPanel>text}',press:'{$sapmP13nPanel>press}'})},selectionItems:{path:"$sapmP13nPanel>/controlDataReduce/selection/selectionItems",template:new b({columnKey:"{$sapmP13nPanel>columnKey}",selected:"{$sapmP13nPanel>visible}"})},beforeNavigationTo:this.setModelFunction(),changeSelectionItems:function(e){if(!e.getParameter("items")){return;}var c=this.getControlDataReduce();c.selection.selectionItems=e.getParameter("items").map(function(m){return{columnKey:m.columnKey,visible:m.selected};});this.setControlDataReduce2Model(c);this.fireAfterPotentialModelChange({json:c});}.bind(this)}));}.bind(this));}.bind(this));};
S.prototype.getChangeType=function(d,D){return this.getChangeData(d,D)?C.personalization.ChangeType.ModelChanged:C.personalization.ChangeType.Unchanged;};
S.prototype.getChangeData=function(d,D){if(!D||!D.selection||!D.selection.selectionItems){return null;}var c={selection:U.copy(d.selection)};if(this._isSemanticEqual(d,D)){return null;}var t=[];c.selection.selectionItems.forEach(function(i){var I=U.getArrayElementByKey("columnKey",i.columnKey,D.selection.selectionItems);if(U.semanticEqual(i,I)){t.push(i);return;}for(var p in i){if(p==="columnKey"||!I){continue;}if(i[p]===I[p]){delete i[p];}}if(Object.keys(i).length<2){t.push(i);}});t.forEach(function(i){var I=U.getIndexByKey("columnKey",i.columnKey,c.selection.selectionItems);c.selection.selectionItems.splice(I,1);});return c;};
S.prototype.getUnionData=function(d,D){var o=U.copy(d);if(!D||!D.selection||!D.selection.selectionItems){return o.selection?{selection:U.copy(o.selection)}:null;}if(!o||!o.selection||!o.selection.selectionItems){return{selection:U.copy(D.selection)};}var u=this.createControlDataStructure();o.selection.selectionItems.forEach(function(s){var a=U.getArrayElementByKey("columnKey",s.columnKey,D.selection.selectionItems);if(a){if(a.visible!==undefined){s.visible=a.visible;}}u.selection.selectionItems.push(s);});return u;};
S.prototype._isSemanticEqual=function(d,D){var s=function(a,b){if(a.visible===true&&(b.visible===false||b.visible===undefined)){return-1;}else if((a.visible===false||a.visible===undefined)&&b.visible===true){return 1;}else if(a.visible===true&&b.visible===true){return 0;}else if((a.visible===false||a.visible===undefined)&&(b.visible===false||b.visible===undefined)){if(a.columnKey<b.columnKey){return-1;}else if(a.columnKey>b.columnKey){return 1;}else{return 0;}}};var c=U.copy(d.selection.selectionItems).sort(s);var e=U.copy(D.selection.selectionItems).sort(s);return!c.some(function(o,i){if(!U.semanticEqual(o,e[i])){return true;}});};
return S;});
sap.ui.predefine('sap/ui/comp/personalization/SelectionWrapper',['sap/ui/core/Element','./ColumnWrapper'],function(E,C){"use strict";
var S=E.extend("sap.ui.comp.personalization.SelectionWrapper",{
constructor:function(i,s){E.apply(this,arguments);},
metadata:{library:"sap.ui.comp",aggregations:{columns:{type:"sap.ui.comp.personalization.ColumnWrapper",multiple:true,singularName:"column"}}}
});
return S;});
sap.ui.predefine('sap/ui/comp/personalization/SortController',['./BaseController','sap/m/library','sap/ui/comp/library','./Util','sap/base/util/merge'],function(B,M,C,U,m){"use strict";
var S=B.extend("sap.ui.comp.personalization.SortController",{
constructor:function(i,s){B.apply(this,arguments);this.setType(M.P13nPanelType.sort);this.setItemType(M.P13nPanelType.sort+"Items");},
metadata:{events:{afterSortModelDataChange:{}}}
});
S.prototype.setTable=function(t){B.prototype.setTable.apply(this,arguments);if(this.getTable()&&t.detachSort&&t.attachSort){t.detachSort(this._onSort,this);t.attachSort(this._onSort,this);}};
S.prototype.getColumn2Json=function(c,s,i){if(!U.isSortable(c)){return null;}if(!c.getSorted||(c.getSorted&&!c.getSorted())){return null;}return{columnKey:s,operation:c.getSortOrder()};};
S.prototype.getColumn2JsonTransient=function(c,s,t,T){if(!U.isSortable(c)){return null;}return{columnKey:s,text:t,tooltip:T!==t?T:undefined};};
S.prototype.handleIgnore=function(j,i){j.sort.sortItems.splice(i,1);};
S.prototype.syncJson2Table=function(j){var c=this.getColumnMap();var o=m({},c);this.fireBeforePotentialTableChange();if(this.getTableType()===C.personalization.TableType.AnalyticalTable||this.getTableType()===C.personalization.TableType.Table||this.getTableType()===C.personalization.TableType.TreeTable){j.sort.sortItems.forEach(function(b){var a=c[b.columnKey];if(!a){return;}if(b.operation===undefined){return;}if(!a.getSorted()){a.setSorted(true);}if(a.getSortOrder()!==b.operation){a.setSortOrder(b.operation);}delete o[b.columnKey];});for(var s in o){var a=o[s];if(a&&a.getSorted()){a.setSorted(false);}}}this.fireAfterPotentialTableChange();};
S.prototype.getDataSuiteFormat2Json=function(d){var j=this.createControlDataStructure();if(!d.SortOrder||!d.SortOrder.length){return j;}j.sort.sortItems=d.SortOrder.map(function(s){return{columnKey:s.Property,operation:s.Descending?"Descending":"Ascending"};});return j;};
S.prototype.getDataSuiteFormatSnapshot=function(d){var c=this.getUnionData(this.getControlDataInitial(),this.getControlData());if(!c.sort||!c.sort.sortItems||!c.sort.sortItems.length){return;}d.SortOrder=c.sort.sortItems.map(function(s){return{Property:s.columnKey,Descending:s.operation==="Descending"};});};
S.prototype._onSort=function(e){e.preventDefault();this._updateInternalModel(U.getColumnKey(e.getParameter("column")),e.getParameter("sortOrder"),e.getParameter("columnAdded"));this.syncJson2Table(this.getControlData());this.fireAfterSortModelDataChange();};
S.prototype._updateInternalModel=function(c,o,a){if(!c||(o!=="Descending"&&o!=="Ascending"&&o!=="None")){return;}if(!a){this.getInternalModel().setProperty("/controlData/sort/sortItems",[]);}var b=this.getControlData();if(o!="None"){var i=U.getIndexByKey("columnKey",c,b.sort.sortItems);i=(i>-1)?i:b.sort.sortItems.length;this.getInternalModel().setProperty("/controlData/sort/sortItems/"+i+"/",{columnKey:c,operation:o});}this.updateControlDataBaseFromJson(b);};
S.prototype.getPanel=function(){if(!U.hasSortableColumns(this.getColumnMap())){return null;}return new Promise(function(r){sap.ui.require(['sap/m/P13nSortPanel','sap/m/P13nItem','sap/m/P13nSortItem'],function(P,a,b){return r(new P({containerQuery:true,items:{path:"$sapmP13nPanel>/transientData/sort/sortItems",template:new a({columnKey:"{$sapmP13nPanel>columnKey}",text:"{$sapmP13nPanel>text}",tooltip:"{$sapmP13nPanel>tooltip}"})},sortItems:{path:"$sapmP13nPanel>/controlDataReduce/sort/sortItems",template:new b({columnKey:"{$sapmP13nPanel>columnKey}",operation:"{$sapmP13nPanel>operation}"})},beforeNavigationTo:this.setModelFunction(),updateSortItem:function(){this.fireAfterPotentialModelChange({json:this.getControlDataReduce()});}.bind(this),addSortItem:function(e){if(!e.getParameter("sortItemData")){return;}var i=e.getParameter("index");var s=e.getParameter("sortItemData");var o={columnKey:s.getColumnKey(),operation:s.getOperation()};var c=this.getControlDataReduce();if(i>-1){c.sort.sortItems.splice(i,0,o);}else{c.sort.sortItems.push(o);}this.setControlDataReduce2Model(c);this.fireAfterPotentialModelChange({json:c});}.bind(this),removeSortItem:function(e){var i=e.getParameter("index");if(i<0){return;}var c=this.getControlDataReduce();c.sort.sortItems.splice(i,1);this.setControlDataReduce2Model(c);this.fireAfterPotentialModelChange({json:c});}.bind(this)}));}.bind(this));}.bind(this));};
S.prototype.retrieveAdaptationUI=function(p){if(!U.hasSortableColumns(this.getColumnMap())){return null;}return new Promise(function(r){sap.ui.require(['sap/ui/mdc/p13n/panels/SortQueryPanel'],function(a){var A=this.getAdaptationModel();var s=new a();s.setP13nModel(A);this.oPanel=s;s.attachChange(function(e){var b=s.getP13nState();var n=this.getControlDataReduce();n.sort.sortItems=b.map(function(o){return{columnKey:o.name,operation:o.descending?"Descending":"Ascending"};});this.setControlDataReduce2Model(n);this.fireAfterPotentialModelChange({json:n});}.bind(this));r(s);}.bind(this));}.bind(this));};
S.prototype._transformAdaptationData=function(r,t){var a=B.prototype._transformAdaptationData.apply(this,arguments);a.sorted=!!r;a.descending=r?r.operation==="Descending":false;return a;};
S.prototype._sortAdaptationData=function(i){this._getP13nBuilder().sortP13nData({visible:"sorted",position:"position"},i);};
S.prototype._getPresenceAttribute=function(){return"sorted";};
S.prototype.getChangeType=function(p,P){if(!P||!P.sort||!P.sort.sortItems){return C.personalization.ChangeType.Unchanged;}var i=JSON.stringify(p.sort.sortItems)!==JSON.stringify(P.sort.sortItems);return i?C.personalization.ChangeType.ModelChanged:C.personalization.ChangeType.Unchanged;};
S.prototype.getChangeData=function(p,P){if(!p||!p.sort||!p.sort.sortItems){return{sort:{sortItems:[]}};}if(!P||!P.sort||!P.sort.sortItems){return{sort:U.copy(p.sort)};}if(JSON.stringify(p.sort.sortItems)!==JSON.stringify(P.sort.sortItems)){return{sort:U.copy(p.sort)};}return null;};
S.prototype.getUnionData=function(j,J){if(!J||!J.sort||!J.sort.sortItems){return{sort:U.copy(j.sort)};}return{sort:U.copy(J.sort)};};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);var t=this.getTable();if(t&&t.detachSort){t.detachSort(this._onSort,this);}};
return S;});
sap.ui.predefine('sap/ui/comp/personalization/UIManager',["sap/ui/mdc/p13n/UIManager","sap/ui/base/Object"],function(U,B){"use strict";
var C=U.extend("sap.ui.comp.personalization.UIManager",{constructor:function(a){this.oAdaptationProvider=a;B.call(this);}});
return C;});
sap.ui.predefine('sap/ui/comp/personalization/Util',['sap/ui/comp/library','sap/m/library','sap/base/util/merge'],function(C,M,m){"use strict";var c=C.personalization.ChangeType;var A=C.personalization.AggregationRole;var T=C.personalization.TableType;var d=C.personalization.ColumnType;var U={getColumnKeys:function(a){if(!a||!a.length){return[];}return a.map(function(o){return this.getColumnKey(o);},this);},sortItemsByText:function(i,k){var l;try{var l=sap.ui.getCore().getConfiguration().getLocale().toString();if(typeof window.Intl!=='undefined'){var o=window.Intl.Collator(l,{numeric:true});i.sort(function(a,b){return o.compare(a[k],b[k]);});}else{i.sort(function(a,b){return a[k].localeCompare(b[k],l,{numeric:true});});}}catch(e){}},getUnionOfAttribute:function(s,a){var u=[];var f=function(b){if(u.indexOf(b)<0){u.push(b);}};for(var n in s){var N=s[n];if(!N[a]){continue;}N[a].forEach(f);}return u;},getUnionOfColumnKeys:function(j){var u=[];var f=function(I){u=u.concat(I.map(function(o){return o.columnKey;}));u=u.filter(function(s,a){return u.indexOf(s)===a;});};for(var t in j){for(var i in j[t]){if(!Array.isArray(j[t][i])){continue;}f(j[t][i]);}}return u;},copy:function(o){if(o instanceof Array){return jQuery.extend(true,[],o);}else{return jQuery.extend(true,{},o);}},sort:function(k,e){var r=this.copy(e);r.sort(function(a,b){var t=a[k].toLocaleLowerCase();var f=b[k].toLocaleLowerCase();if(t<f){return-1;}if(t>f){return 1;}return 0;});return r;},removeEmptyProperty:function(j){for(var t in j){if(j[t]===null||j[t]===undefined){delete j[t];}}return j;},semanticEqual:function(i,I){if(!i||!I){return false;}for(var p in i){if(i[p]!==I[p]){return false;}}return true;},hasChangedType:function(o){for(var t in o){if(o[t]===c.ModelChanged||o[t]===c.TableChanged){return true;}}return false;},isNamespaceChanged:function(o,n){if(o[n]){return o[n]===c.ModelChanged||o[n]===c.TableChanged;}return false;},createArrayFromString:function(e){if(!e){return[];}var E=[];var r=e.split(",");r.forEach(function(f){if(f!==""){E.push(f.trim());}});return E;},getIndexByKey:function(k,K,a){if(!a||!a.length){return-1;}var I=-1;a.some(function(e,i){if(e[k]!==undefined&&e[k]===K){I=i;return true;}});return I;},getColumnKey:function(o){return this._getCustomProperty(o,"columnKey")||o.getId();},getColumnType:function(o){return this._getCustomProperty(o,"type");},hasSortableColumns:function(o){for(var s in o){if(U.isSortable(o[s])){return true;}}return false;},hasGroupableColumns:function(o){for(var s in o){if(U.isGroupable(o[s])){return true;}}return false;},hasFilterableColumns:function(o){for(var s in o){if(U.isFilterable(o[s])){return true;}}return false;},hasAggregatableColumns:function(o){for(var s in o){if(U.isAggregatable(o[s])){return true;}}return false;},isGroupable:function(o){if(o&&o.isA("sap.ui.table.AnalyticalColumn")){return o.isGroupable()||this._getCustomProperty(o,"isGroupable");}if(o&&o.isA("sap.m.Column")){return this.isSortable(o);}return false;},isSortable:function(o){if(o.getSortProperty){return!!o.getSortProperty();}return!!this._getCustomProperty(o,"sortProperty");},isFilterable:function(o){if(o.getFilterProperty){return!!o.getFilterProperty();}return!!this._getCustomProperty(o,"filterProperty");},isAggregatable:function(o){if(o.getAggregationRole){return o.getAggregationRole()===A.Dimension||o.getAggregationRole()===A.Measure;}return false;},getArrayElementByKey:function(k,K,a){if(!a||!a.length){return null;}var e=null;a.some(function(E){if(E[k]!==undefined&&E[k]===K){e=E;return true;}});return e;},isColumnIgnored:function(o,i){if(!i){return false;}return i.indexOf(this.getColumnKey(o))>-1;},createSort2Json:function(t,D,i){if(this.getTableBaseType(t)!==T.Table&&this.getTableType(t)!==T.ChartWrapper){return;}this.addSortPersistentData(this._mapTable2P13nSortJson(t),{sort:{sortItems:D}},i);},addSortPersistentData:function(s,D,i){s.sort.sortItems.forEach(function(S){if(!S.isSorted||i.indexOf(S.columnKey)>-1){return;}D.sort.sortItems.push({columnKey:S.columnKey,operation:S.operation});});},_mapTable2P13nSortJson:function(t){return{sort:{sortItems:t.getColumns().map(function(o){return{columnKey:U.getColumnKey(o),isSorted:o.getSorted(),operation:o.getSortOrder()};})}};},getTableType:function(t){switch(t&&t.getMetadata().getName()){case"sap.ui.comp.personalization.ChartWrapper":return T.ChartWrapper;case"sap.ui.comp.personalization.SelectionWrapper":return T.SelectionWrapper;case"sap.m.Table":return T.ResponsiveTable;case"sap.ui.table.AnalyticalTable":return T.AnalyticalTable;case"sap.ui.table.TreeTable":return T.TreeTable;case"sap.ui.table.Table":return T.Table;}return null;},getTableBaseType:function(t){switch(this.getTableType(t)){case T.ChartWrapper:return T.ChartWrapper;case T.SelectionWrapper:return T.SelectionWrapper;case T.ResponsiveTable:return T.ResponsiveTable;case T.AnalyticalTable:case T.Table:case T.TreeTable:return T.Table;}return null;},getColumnBaseType:function(o){switch(o&&o.getMetadata().getName()){case"sap.ui.comp.personalization.ColumnWrapper":return d.ColumnWrapper;case"sap.m.Column":return d.ResponsiveColumn;case"sap.ui.table.AnalyticalColumn":case"sap.ui.table.Column":return d.TableColumn;}return null;},_getCustomProperty:function(o,p){var a=this._getCustomData(o);if(!a||!p){return null;}return a[p];},_getCustomData:function(o){if(!o){return null;}var a=o.data("p13nData");if(typeof a==="string"){try{a=JSON.parse(a);o.data("p13nData",a);}catch(e){}}return a;},getColumnKeysOfType:function(t,o){var a=[];for(var s in o){if(this.getColumnType(o[s])===t){a.push(s);}}return a;},convertFilters:function(p,o){if(p&&p.filter&&p.filter.filterItems){var a=this.getColumnKeysOfType("date",o);var b=this.getColumnKeysOfType("time",o);var e=this.getColumnKeysOfType("datetime",o);p.filter.filterItems.forEach(function(f){if(a.indexOf(f.columnKey)>-1||b.indexOf(f.columnKey)>-1||e.indexOf(f.columnKey)>-1){if(f.value1&&typeof(f.value1)==="string"){f.value1=new Date(f.value1);}if(f.value2&&typeof(f.value2)==="string"){f.value2=new Date(f.value2);}}});}},convertSelectOptions:function(r,o){if(r&&r.SelectOptions){var a=this.getColumnKeysOfType("date",o);var b=this.getColumnKeysOfType("time",o);var e=this.getColumnKeysOfType("datetime",o);r.SelectOptions.forEach(function(s){s.Ranges.forEach(function(R){if(a.indexOf(s.PropertyName)>-1||b.indexOf(s.PropertyName)>-1||e.indexOf(s.PropertyName)>-1){if(R.Low&&typeof(R.Low)==="string"){R.Low=new Date(R.Low);}if(R.High&&typeof(R.High)==="string"){R.High=new Date(R.High);}}});});}}};return U;},true);
sap.ui.predefine('sap/ui/comp/personalization/Validator',['sap/ui/comp/library','sap/m/library','sap/ui/core/library'],function(l,M,c){"use strict";var a=c.MessageType;var P=M.P13nPanelType;var T=l.personalization.TableType;var V={checkGroupAndColumns:function(t,s,C,p,r){if(t!==T.AnalyticalTable||!s.group||!s.columns){return Promise.resolve(r);}for(var b in C){var d=s.columns.controller.isColumnSelected(p.columns,b);var g=s.group.controller.isGroupSelected(p.group,b);if(g&&!d){r.push({columnKey:b,panelTypes:[P.group,P.columns],messageType:a.Warning,messageText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("PERSODIALOG_MSG_GROUPING_NOT_POSSIBLE_DESCRIPTION")});}}return Promise.resolve(r);},checkSaveChanges:function(t,s,p,r){if(t!==T.SelectionWrapper){return Promise.resolve(r);}return s.selection.payload.callbackSaveChanges(p).then(function(S){if(S){return r;}r.push({panelTypes:[P.selection],messageType:a.Error,messageText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("PERSODIALOG_MSG_CHANGES_SAVE_FAILED")});return r;});},checkChartConsistency:function(t,s,C,r){if(t!==T.ChartWrapper){return Promise.resolve(r);}var i=s.dimeasure.controller.isChartConsistent(C);if(!i){r.push({panelTypes:[P.dimeasure],messageType:a.Error,messageText:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("PERSODIALOG_MSG_VALIDATION_CHARTTYPE")});}return Promise.resolve(r);}};return V;},true);
sap.ui.predefine('sap/ui/comp/providers/BaseValueListProvider',['sap/ui/thirdparty/jquery','sap/ui/comp/library','sap/ui/base/EventProvider','sap/ui/comp/odata/ODataType','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/util/FormatUtil','sap/ui/comp/util/DateTimeUtil','sap/base/Log','sap/m/Token','sap/ui/model/Filter','sap/ui/model/FilterOperator'],function(q,l,E,O,M,F,D,L,T,a,b){"use strict";var c=l.smartfilterbar.DisplayBehaviour;var A=l.ANALYTICAL_PARAMETER_PREFIX;var d;
var B=E.extend("sap.ui.comp.providers.BaseValueListProvider",{constructor:function(p){E.call(this);this.sFieldName=p.fieldName;this.oControl=p.control;this.oODataModel=p.model;this.oFilterModel=p.filterModel;this.oFilterProvider=p.filterProvider;this.sDisplayFormat=p.displayFormat;this._oDateFormatSettings=p.dateFormatSettings;this._aValidationPromises=[];this.sContext=p.context;this._selectedODataRowHandler=p.selectedODataRowHandler;if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this._fieldViewMetadata=p.fieldViewMetadata;this.sValueListEntitySetName=null;this.bResolveInOutParams=(p.resolveInOutParams===false)?false:true;this.sDisplayBehaviour=p.displayBehaviour;this.sDDLBDisplayBehaviour=this.sDisplayBehaviour;if(!this.sDDLBDisplayBehaviour||this.sDDLBDisplayBehaviour===c.auto){this.sDDLBDisplayBehaviour=this.oFilterProvider?this.oFilterProvider.sDefaultDropDownDisplayBehaviour:c.descriptionOnly;}this._sType=p.type;this._sMaxLength=p.maxLength;this.sPropertyTypePath="";if(this.bResolveInOutParams&&!this.oFilterModel&&!this.oFilterProvider){this._resolvePropertyPath();}if(p.loadAnnotation&&p.fullyQualifiedFieldName){this._oMetadataAnalyser=p.metadataAnalyser;this._sFullyQualifiedFieldName=p.fullyQualifiedFieldName;this._attachAnnotationLoadOnRender();}else{if(p.loadAnnotation){L.error("BaseValueListProvider","loadAnnotation is true, but no fullyQualifiedFieldName set for field '"+(this._sFullyQualifiedFieldName||this.sFieldName)+"'! Please check your annotations");}this._onAnnotationLoad({primaryValueListAnnotation:p.annotation,additionalAnnotations:p.additionalAnnotations});}}});
B.prototype._attachAnnotationLoadOnRender=function(){this.oBeforeRenderingEventDelegate={onBeforeRendering:function(){this.oControl.removeEventDelegate(this.oBeforeRenderingEventDelegate,this);delete this.oBeforeRenderingEventDelegate;if(!this._bValueListRequested){if(this.bInitialised){if(this._onMetadataInitialised&&this.sAggregationName&&!this.bTypeAheadEnabled&&this.oControl.$()){this._onMetadataInitialised();}}else{this._loadAnnotation();}}}};this.oControl.addEventDelegate(this.oBeforeRenderingEventDelegate,this);};
B.prototype.loadAnnotation=function(){if(this.oBeforeRenderingEventDelegate){this.oControl.removeEventDelegate(this.oBeforeRenderingEventDelegate,this);delete this.oBeforeRenderingEventDelegate;}if(this.oAfterRenderingEventDelegate){this.oControl.removeEventDelegate(this.oAfterRenderingEventDelegate,this);delete this.oAfterRenderingEventDelegate;}return this._loadAnnotation();};
B.prototype._loadAnnotation=function(){if(!this._bValueListRequested){this._bValueListRequested=true;if(!this._oMetadataAnalyser){this._oMetadataAnalyser=new M(this.oODataModel);this._bCleanupMetadataAnalyser=true;}return this.getValueListAnnotation().then(this._onAnnotationLoad.bind(this),function(e){this._oError=e;this.bInitialised=true;L.debug(e);}.bind(this));}return Promise.resolve();};
B.prototype.getValueListAnnotation=function(){return this._oMetadataAnalyser.getValueListAnnotationLazy(this._sFullyQualifiedFieldName);};
B.prototype.attachValueListChanged=function(f,o){this.attachEvent("valueListChanged",f,o);};
B.prototype.detachValueListChanged=function(f,o){this.detachEvent("valueListChanged",f,o);};
B.prototype._onAnnotationLoad=function(v){var o={};this.oPrimaryValueListAnnotation=v.primaryValueListAnnotation;this.additionalAnnotations=v.additionalAnnotations;this._resolveAnnotationData(this.oPrimaryValueListAnnotation);this.bInitialised=true;if(this._fBaseValueListProviderResolve){this._fBaseValueListProviderResolve();}if(this._onMetadataInitialised&&this.sAggregationName&&!this.bTypeAheadEnabled&&this.oControl.$()){this._onMetadataInitialised();}if(v.primaryValueListAnnotation&&v.primaryValueListAnnotation.annotation||v.primaryValueListAnnotationWithPVQualifier&&v.primaryValueListAnnotationWithPVQualifier.annotation){o.primaryValueListAnnotation=v.primaryValueListAnnotation||v.primaryValueListAnnotationWithPVQualifier;}if(Array.isArray(v.additionalAnnotations)&&v.additionalAnnotations.length>0){o.additionalAnnotations=v.additionalAnnotations;}if(Array.isArray(v.additionalAnnotationsWithPVQualifier)&&v.additionalAnnotationsWithPVQualifier.length>0){if(Array.isArray(o.additionalAnnotations)){o.additionalAnnotations=o.additionalAnnotations.concat(v.additionalAnnotationsWithPVQualifier);}else{o.additionalAnnotations=v.additionalAnnotationsWithPVQualifier;}}return o;};
B.prototype._resolvePropertyPath=function(){var o=this.oControl.getBindingInfo("value"),p,P,e;if(o&&o.parts){p=o.parts[0]?o.parts[0].path:"";}if(p){e=p.split("/");if(e.length>1){P=e[e.length-1];this.sPropertyTypePath=p.replace("/"+P,"");}}};
B.prototype._resolveAnnotationData=function(o){var e=0,i=0,C,f,h;if(this.oODataModel&&o){this.bSupportBasicSearch=o.isSearchSupported;this.sValueListTitle=o.valueListTitle||o.qualifier;this.sKey=o.keyField;this._aKeys=o.keys;this.sValueListEntitySetName=o.valueListEntitySetName;this.mInParams=o.inParams;this.mOutParams=o.outParams;this.mConstParams=o.constParams;this.sTokenDisplayBehaviour=this.sDisplayBehaviour;if(!this.sTokenDisplayBehaviour||this.sTokenDisplayBehaviour===c.auto){this.sTokenDisplayBehaviour=this.oFilterProvider?this.oFilterProvider.sDefaultTokenDisplayBehaviour:c.descriptionAndId;}if(!o.descriptionField){this.sTokenDisplayBehaviour=c.idOnly;}this.sDescription=o.descriptionField||this.sKey;if(this.sValueListEntitySetName&&this.sKey){this._aCols=[];this.aSelect=[];C=o.valueListFields;h=o.aHighImportanceFields;if(h&&h.length){this._aHighImportanceCols=[];}e=C.length;for(i=0;i<e;i++){f=C[i];if(f.visible){if(h&&h.indexOf(f)!==-1){this._aHighImportanceCols.push(this._getColumnConfigFromField(f));}this._aCols.push(this._getColumnConfigFromField(f));}this.aSelect.push(f.name);}if(o.descriptionField){this.aSelect.push(o.descriptionField);}if(o.deprecationCodeField){this.aSelect.push(o.deprecationCodeField);}}else{if(!this.sKey){L.error("BaseValueListProvider","key for ValueListEntitySetName '"+this.sValueListEntitySetName+"' missing! Please check your annotations");}}}};
B.prototype._getColumnConfigFromField=function(f){var t=null,o=null,C,e;if(f.type==="Edm.Boolean"){t="boolean";}else if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"){t="date";e=this._oDateFormatSettings;C={displayFormat:"Date"};}else if(f.type==="Edm.Decimal"){t="decimal";C={precision:f.precision,scale:f.scale};}else if(f.type==="Edm.String"){if(f.isCalendarDate){t="stringdate";}else{t="string";}}o=O.getType(f.type,e,C,f.isCalendarDate);return{description:f.description,label:f.fieldLabel,tooltip:f.quickInfo||f.fieldLabel,type:t,oType:o,width:F.getWidth(f,15),template:f.name,sort:f.sortable?f.name:undefined,sorted:f.sortable&&f.name===this.sKey,sortOrder:"Ascending"};};
B.prototype._getFilterData=function(){var o,f={};if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter){o=this.oFilterProvider._oSmartFilter.getFilterData();if(this.sFieldName&&(this.sFieldName.indexOf(A)===0)){Object.keys(o).forEach(function(n){var e=n.split(A);f[e[e.length-1]]=o[n];});return f;}}return o;};
B.prototype._setFilterData=function(f){var o=f,e={};if(this.oFilterProvider){if(this.sFieldName&&(this.sFieldName.indexOf(A)===0)){Object.keys(f).forEach(function(n){e[A+n]=f[n];});o=e;}this.oFilterProvider.setFilterData(o);}};
B.prototype._adaptPropertyValue=function(v,V){var r=V;if((V instanceof Date||(typeof V==="string"&&!isNaN(V)))&&this.oPrimaryValueListAnnotation&&this.oPrimaryValueListAnnotation.fields){var p=null;this.oPrimaryValueListAnnotation.fields.some(function(P){if(P.name===v){p=P;}return p!==null;});if(p&&p.type==="Edm.DateTime"&&p.displayFormat==="Date"){r=D.utcToLocal(V);}if(p&&p.isDigitSequence){var R=new RegExp("^[0]*$");if(R.test(V)){r=null;}}}return r;};
B.prototype._calculateFilterInputData=function(){var s,v,o=null,e,C;delete this.mFilterInputData;if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter){o=this._getFilterData();}else if(this.oFilterModel){o=this.oFilterModel.getData();}if(this.mInParams&&o){this.mFilterInputData={};this.aFilterField=[];for(s in this.mInParams){if(s){v=this.mInParams[s];v=v.replace("/",".");if(v!==this.sKey){if(o[s]){this.mFilterInputData[v]=o[s];if(typeof this.mFilterInputData[v]==="object"){if(this.mFilterInputData[v].ranges&&this.mFilterInputData[v].ranges.length>0){for(var i=0;i<this.mFilterInputData[v].ranges.length;i++){this.mFilterInputData[v].ranges[i].keyField=v;}}}this.aFilterField.push(v);}}}}}else if(this.oODataModel&&this.bResolveInOutParams){e=this.oControl.getBindingContext();if(this.mInParams&&e){this.mFilterInputData={};this.aFilterField=[];for(s in this.mInParams){if(s){v=this.mInParams[s];v=v.replace("/",".");if(v!==this.sKey){var p=this.sPropertyTypePath?this.sPropertyTypePath+"/"+s:s;var V=e.getProperty(p);if(V){V=this._adaptPropertyValue(v,V);this.mFilterInputData[v]=V;this.aFilterField.push(v);}}}}}}if(this.mConstParams){for(C in this.mConstParams){this.mFilterInputData[C]=this.mConstParams[C];this.aFilterField.push(C);}}};
B.prototype._calculateAndSetFilterOutputData=function(e){var s,f,v,m=null,o,g,n,i,h,j,k;if(this.mOutParams&&e&&(this.oFilterProvider||this.oFilterModel)){m={};h=function(I){return I.key===n.key;};j=function(R){if(n.value1 instanceof Date&&R.value1 instanceof Date){return R.operation==="EQ"&&n.value1.getTime()===R.value1.getTime();}return R.operation==="EQ"&&n.value1===R.value1;};k=function(R){return R.operation==="EQ"&&n.key===R.value1;};for(s in this.mOutParams){if(s){if(!this.oFilterProvider&&Object.keys(this.mOutParams).length>1){if(s!==this.sFieldName){continue;}}var p=this.oFilterProvider&&this.oFilterProvider._getFieldMetadata(s);v=this.mOutParams[s];if(e.length>0){for(var i=0;i<this._aCols.length;i++){if(this._aCols[i].template===v){var r=this._aCols[i].description;f=e[0][r];}}}if(v!==this.sKey){g=null;i=e.length;while(i--){o=e[i];if(o[v]){var V=o[v];var t=p&&(p.type==="Edm.DateTime"||!p.hasValueListAnnotation);if(t){if(p.type==="Edm.DateTime"&&this._oDateFormatSettings.UTC==true){V=D.utcToLocal(V);}n={"exclude":false,"operation":"EQ","keyField":s,"value1":V,"value2":null};}else{n={key:V,text:F.getFormattedExpressionFromDisplayBehaviour(this.sTokenDisplayBehaviour,V,f)};}if(!m[s]){if(!g&&this.oFilterModel){g=this.oFilterModel.getData();}if(g&&g[s]&&g[s].items){m[s]=g[s];if(!m[s].ranges){m[s].ranges=[];}}else{m[s]={items:[],ranges:[]};}}var u=m[s];if(t){if(u.ranges.filter(j).length<=0){u.ranges.push(n);}}else if(u.items.filter(h).length<=0){if(!u.ranges||u.ranges.filter(k).length<=0){u.items.push(n);}}}}}}}if(m){if(this.oFilterProvider){this._setFilterData(m);if(!q.isEmptyObject(m)){this.fireEvent("valueListChanged",{"changes":Object.keys(m)});}}else if(this.oFilterModel){this.oFilterModel.setData(m,true);}}}else if(this.oODataModel&&this.bResolveInOutParams){this._calculateAndSetODataModelOutputData(e[0]);}};
B.prototype._calculateAndSetODataModelOutputData=function(o){var e,s,v,p,V,C={};if(o&&this.mOutParams){e=this.oControl.getBindingContext();for(s in this.mOutParams){if(s){v=this.mOutParams[s];if(v!==this.sKey){V=o[v];C[s]=V;p=this.sPropertyTypePath?this.sPropertyTypePath+"/"+s:s;this.oODataModel.setProperty(p,V,e,true);}}}if(C&&!q.isEmptyObject(C)){this.fireEvent("valueListChanged",{"changes":C});}}};
B.prototype._handleRowsSelect=function(e){var i,j,k,t,o,f=[],C,g;if(!(this.oControl&&this.oControl.addToken)){return;}C=this.oControl.getTokens();for(i=0;i<e.length;i++){k=e[i][this.sKey];t=e[i][this.sDescription];if(k||(k==="")){t=F.getFormattedExpressionFromDisplayBehaviour(this.sTokenDisplayBehaviour,k,t);o=new T({key:k,text:t,tooltip:t});o.data("row",e[i]);f.push(o);for(j=0;j<C.length;j++){g=C[j];var s=g.getKey();if(s||(s===""&&s===k)){break;}else if(g.data("range")&&(!g.data("range").exclude)&&(g.data("range").operation==="EQ")&&(g.data("range").value1===k)){break;}}if(j<C.length){C.splice(j,1);}}}if(f.length){this.oControl.setTokens(C.concat(f));}};
B.prototype.readData=function(I){if(!d){d=sap.ui.require("sap/ui/comp/smartfilterbar/FilterProvider");}var f=[],s;this._oReadPromise=new Promise(function(r){this._fBaseValueListProviderResolve=r;}.bind(this));if(this.bInitialised){this._fBaseValueListProviderResolve();}this._oReadPromise.then(function(){this._fBaseValueListProviderResolve=null;for(var i=0;i<I.length;i++){s=(this.sDisplayFormat==="UpperCase")?I[i].toUpperCase():I[i];f.push(new a(this.sKey,b.EQ,s));}if(!this.sValueListEntitySetName){return;}this.oODataModel.read("/"+this.sValueListEntitySetName,{filters:f,success:function(r,e){if(r){if(r.results&&r.results.length!==I.length){L.error("Expecting "+I.length+" result rows, but received "+r.results.length+" rows...");return;}var g=r.results;if(this.oControl&&this.oControl.isA("sap.m.MultiInput")&&this.oControl.getTokens().length!==I.length){g=this._getUpdatedDataModelRows(g);}this._handleRowsSelect(g);}}.bind(this),error:function(e){L.error("Error occured reading /"+this.sValueListEntitySetName);}.bind(this)});}.bind(this));};
B.prototype._getUpdatedDataModelRows=function(e){var C=this.oControl.getTokens(),f=[];for(var i=0;i<C.length;i++){var o=C[i];var s=o.getKey();if(s){f.push(s);}else if(o.data("range")&&o.data("range").value1){f.push(o.data("range").value1);}}var r=[];for(var i=0;i<e.length;i++){var R=e[i][this.sKey];if(f.indexOf(R)!==-1){r.push(e[i]);}}return r;};
B.prototype._addValidationPromise=function(p){var i,P,C,I=false;for(i=0;i<this._aValidationPromises.length;i++){C=this._aValidationPromises[i];if(C===null){this._aValidationPromises[i]=p;P=i;I=true;break;}}if(!I){this._aValidationPromises.push(p);P=this._aValidationPromises.length-1;}p.finally(function(){this._removeValidationPromise(P);}.bind(this));};
B.prototype._removeValidationPromise=function(i){this._aValidationPromises[i]=null;};
B.prototype._getCurrentValidationPromises=function(){var i,C,e=[];for(i=0;i<this._aValidationPromises.length;i++){C=this._aValidationPromises[i];this._removeValidationPromise(i);e.push(C);}return e;};
B.prototype.destroy=function(){E.prototype.destroy.apply(this,arguments);if(this._bCleanupMetadataAnalyser&&this._oMetadataAnalyser){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(this.oBeforeRenderingEventDelegate){this.oControl.removeEventDelegate(this.oBeforeRenderingEventDelegate);delete this.oBeforeRenderingEventDelegate;}if(this.oAfterRenderingEventDelegate){this.oControl.removeEventDelegate(this.oAfterRenderingEventDelegate);delete this.oAfterRenderingEventDelegate;}this.oControl=null;this.sFieldName=null;this.mFilterInputData=null;this.aFilterField=null;this.sValueListEntitySetName=null;this.oODataModel=null;this.oFilterModel=null;this.oFilterProvider=null;this.oPrimaryValueListAnnotation=null;this.additionalAnnotations=null;this.sDisplayFormat=null;this.bSupportBasicSearch=null;this.bInitialised=null;this._oError=null;this.sValueListTitle=null;this.sKey=null;this._aKeys=null;this.mInParams=null;this.mOutParams=null;this.sDescription=null;this.aSelect=null;this._aCols=null;this._aHighImportanceCols=null;this.sDDLBDisplayBehaviour=null;this.sTokenDisplayBehaviour=null;this._oDateFormatSettings=null;this._fieldViewMetadata=null;this._oReadPromise=null;this._fBaseValueListProviderResolve=null;this.bIsDestroyed=true;this._aValidationPromises=null;};
return B;});
sap.ui.predefine('sap/ui/comp/providers/ControlProvider',['sap/m/CheckBox','sap/m/DatePicker','sap/m/TimePicker','sap/m/HBox','sap/m/Input','sap/m/Text','sap/m/ObjectIdentifier','sap/m/ObjectStatus','sap/m/Image','sap/m/Link','sap/m/VBox','sap/m/FlexItemData','sap/m/library','sap/ui/comp/navpopover/SmartLink','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/smartfield/ODataHelper','sap/ui/comp/smartfield/SmartField','sap/ui/comp/odata/ODataType','sap/ui/comp/odata/FiscalMetadata','sap/ui/comp/odata/CalendarMetadata','sap/ui/comp/odata/CriticalityMetadata','sap/ui/comp/util/FormatUtil','sap/ui/comp/util/MultiUnitUtil','sap/ui/core/Control','sap/ui/comp/navpopover/SemanticObjectController','sap/ui/comp/navpopover/NavigationPopoverHandler','./ValueHelpProvider','./ValueListProvider'],function(C,D,T,H,I,a,O,b,c,L,V,F,M,S,d,e,f,g,h,j,k,l,m,n,o,N,p,q){"use strict";var r;var s=function(P){if(P){this._oParentODataModel=P.model;this._oMetadataAnalyser=P.metadataAnalyser;this._aODataFieldMetadata=P.fieldsMetadata;this._oLineItemAnnotation=P.lineItemAnnotation;this._oSemanticKeyAnnotation=P.semanticKeyAnnotation;this._smartTableId=P.smartTableId;this._bProcessDataFieldDefault=P.processDataFieldDefault;this._isAnalyticalTable=P.isAnalyticalTable;this._isMobileTable=P.isMobileTable;this._oDateFormatSettings=P.dateFormatSettings;this._useUTCDateTime=P.useUTCDateTime;this._bEnableDescriptions=P.enableDescriptions;this._oCurrencyFormatSettings=P.currencyFormatSettings;this._oDefaultDropDownDisplayBehaviour=P.defaultDropDownDisplayBehaviour||"descriptionAndId";this.useSmartField=P.useSmartField==="true";this.useSmartToggle=P.useSmartToggle==="true";this._sEntitySet=P.entitySet;this._oSemanticKeyAdditionalControl=P._semanticKeyAdditionalControl;this._oSemanticObjectController=P.semanticObjectController;this._bPreserveDecimals=P.preserveDecimals;}if(!this._oMetadataAnalyser&&this._oParentODataModel){this._oMetadataAnalyser=new d(this._oParentODataModel);this._intialiseMetadata();}this._mSmartField={};this._oHelper=new e(this._oMetadataAnalyser.oModel);this._aValueListProvider=[];this._aValueHelpProvider=[];this._aLinkHandlers=[];};
s.prototype._intialiseMetadata=function(){if(!this._aODataFieldMetadata){this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntity);}};
s.prototype.getFieldViewMetadata=function(i,t){var u=this._createFieldMetadata(i);this._createFieldTemplate(u,t);return u;};
s.prototype._createFieldTemplate=function(v,i){if(this.useSmartField){v.template=new f({value:{path:v.name},entitySet:this._sEntitySet,contextEditable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},controlContext:this._isMobileTable?"responsiveTable":"table",wrapping:this._isMobileTable});if(g.isNumeric(v.type)||g.isDateOrTime(v.type)||j.isCalendarValue(v)||h.isFiscalValue(v)){v.template.setTextAlign("Right");v.template.setWidth("100%");}this._completeSmartField(v);v.template._setPendingEditState(i);}if(this.useSmartToggle){v.template=new r({editable:{path:"sm4rtM0d3l>/editable",mode:"OneWay"},edit:this.useSmartField?v.template:this._createEditableTemplate(v),display:this._createDisplayOnlyTemplate(v)});}else if(!this.useSmartField){v.template=i?this._createEditableTemplate(v):this._createDisplayOnlyTemplate(v);}};
s.prototype._completeSmartField=function(v){var i={annotations:{},path:v.name};if(!this._mSmartField.entitySetObject){this._mSmartField.entitySetObject=this._oHelper.oMeta.getODataEntitySet(this._sEntitySet);this._mSmartField.entityType=this._oHelper.oMeta.getODataEntityType(this._mSmartField.entitySetObject.entityType);}i.modelObject=this._oParentODataModel;i.entitySetObject=this._mSmartField.entitySetObject;i.entitySet=this._mSmartField.entitySetObject;i.entityType=this._mSmartField.entityType;this._oHelper.getProperty(i);v.fieldControlProperty=this._oHelper.oAnnotation.getFieldControlPath(i.property.property);if(v.fieldControlProperty&&v.parentPropertyName){v.fieldControlProperty=v.parentPropertyName+"/"+v.fieldControlProperty;}i.annotations.uom=this._oHelper.getUnitOfMeasure2(i);i.annotations.text=this._oHelper.getTextProperty2(i);i.annotations.lineitem=this._oLineItemAnnotation;i.annotations.semantic=d.getSemanticObjectsFromProperty(i.property.property);this._oHelper.getUOMTextAnnotation(i);if(i.property.property["sap:value-list"]||i.property.property["com.sap.vocabularies.Common.v1.ValueList"]){i.annotations.valuelist=this._oHelper.getValueListAnnotationPath(i);if(i.property.property["sap:value-list"]){i.annotations.valuelistType=i.property.property["sap:value-list"];}else{i.annotations.valuelistType=this._oMetadataAnalyser.getValueListSemantics(i.property.property["com.sap.vocabularies.Common.v1.ValueList"]);}}this._oHelper.getUOMValueListAnnotationPath(i);delete i.entitySet;v.template.data("configdata",{"configdata":i});v.template.data("dateFormatSettings",this._oDateFormatSettings);v.template.data("currencyFormatSettings",this._oCurrencyFormatSettings);v.template.data("defaultDropDownDisplayBehaviour",this._oDefaultDropDownDisplayBehaviour);if(i.annotations.uom||g.isNumeric(v.type)||g.isDateOrTime(v.type)||j.isCalendarValue(v)||h.isFiscalValue(v)){var A=v.template.getTextAlign();if(A==="Initial"){A="Right";}if(g.isNumeric(v.type)&&!v.unit&&v.description&&v.displayBehaviour!=="idOnly"){A=undefined;}v.align=A;}s._createModelTypeInstance(v,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);};
s.prototype._createEditableTemplate=function(v,B){var t=null,i=s._createModelTypeInstance(v,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);var u=v.type==="Edm.DateTime"&&v.displayFormat==="Date";if(u||v.isCalendarDate){t=new D({value:{path:v.name,type:i}});}else if(v.type==="Edm.Boolean"){t=new C({selected:{path:v.name}});}if(v.semanticObjects&&(!B)){t=this._createSmartLinkFieldTemplate(v,i,function(){return this._createEditableTemplate(v,true);}.bind(this));}if(!t){if(v.type==="Edm.Time"){t=new T({value:{path:v.name,type:i}});}else{t=new I({value:{path:v.name,type:i}});if(v.unit){t.bindProperty("description",{path:v.unit});t.setTextAlign("Right");t.setTextDirection("LTR");t.setFieldWidth("80%");}else if(this._bEnableDescriptions&&v.description){t.bindProperty("description",{path:v.description});}else if(g.isNumeric(v.type)||g.isDateOrTime(v.type)||j.isCalendarValue(v)||h.isFiscalValue(v)){v.align="Right";t.setTextAlign("Right");t.setTextDirection("LTR");}if(v.hasValueListAnnotation){this._associateValueHelpAndSuggest(t,v);}}}return t;};
s.prototype._associateValueHelpAndSuggest=function(i,t){i.setShowValueHelp(true);this._aValueHelpProvider.push(new p({fieldName:t.fieldName,control:i,model:this._oParentODataModel,dateFormatSettings:this._oDateFormatSettings,displayFormat:t.displayFormat,displayBehaviour:t.displayBehaviour,loadAnnotation:true,fullyQualifiedFieldName:t.fullName,metadataAnalyser:this._oMetadataAnalyser,title:t.label,preventInitialDataFetchInValueHelpDialog:true,takeOverInputValue:false,type:t.type,maxLength:t.maxLength}));i.setShowSuggestion(true);i.setFilterSuggests(false);this._aValueListProvider.push(new q({fieldName:t.fieldName,control:i,model:this._oParentODataModel,displayFormat:t.displayFormat,dateFormatSettings:this._oDateFormatSettings,displayBehaviour:t.displayBehaviour,loadAnnotation:true,fullyQualifiedFieldName:t.fullName,metadataAnalyser:this._oMetadataAnalyser,aggregation:"suggestionRows",typeAheadEnabled:true}));};
s.prototype._createDisplayOnlyTemplate=function(v,B){var t=null,i=null,A,u,w;i=s._createModelTypeInstance(v,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);if(g.isNumeric(v.type)||g.isDateOrTime(v.type)||j.isCalendarValue(v)||h.isFiscalValue(v)){A="Right";if(g.isNumeric(v.type)&&!v.unit&&v.description&&v.displayBehaviour!=="idOnly"){A=undefined;}}if(v.urlInfo){t=this._createLink(v,i,v.urlInfo);}else if(v.criticalityInfo){t=this._createObjectStatusTemplate(v,i,v.criticalityInfo);}if(this._isMobileTable&&!t){if(v.isImageURL){t=new c({src:{path:v.name},width:"3em",height:"3em"});}else{w=s._getSemanticKeyIndex(v,this._oSemanticKeyAnnotation);if(w>-1){t=this._createObjectIdentifierTemplate(v,i,w===0);}}}if(!t){if(v.semanticObjects&&(!B)){t=this._createSmartLinkFieldTemplate(v,i,function(){return this._createDisplayOnlyTemplate(v,true);}.bind(this));}else if(v.unit){t=this._createMeasureFieldTemplate(v,i);}else if(v.isEmailAddress||v.isPhoneNumber){t=this._createEmailOrPhoneLink(v,i);}else{u=this._getDefaultBindingInfo(v,i);t=new a({wrapping:this._isMobileTable,textAlign:A,text:u});}}v.align=A;return t;};
s._getSemanticKeyIndex=function(v,i){var t=-1,E;if(i&&i.semanticKeyFields){t=i.semanticKeyFields.indexOf(v.name);if(t<0){E=d.resolveEditableFieldFor(v);t=E?i.semanticKeyFields.indexOf(E):-1;}}return t;};
s._createModelTypeInstance=function(v,i,u,P){var t,w,x={};var y=v.type==="Edm.DateTime"&&v.displayFormat==="Date";if(y||v.isCalendarDate){t=i;w={displayFormat:"Date"};}else if(v.type==="Edm.DateTime"&&u){t={UTC:true};}else if(v.type==="Edm.Decimal"){w={precision:v.precision,scale:v.scale};t={preserveDecimals:P};}else if(v.type==="Edm.String"){w={isDigitSequence:v.isDigitSequence};}if(v.isCalendarDate){x.isCalendarDate=true;}if(v.isFiscalDate){x.isFiscalDate=true;x.fiscalType=h.getFiscalAnotationType(v);}w=Object.assign({},w,{maxLength:v.maxLength});if(v.type=="Edm.DateTime"){v.modelType=g.getType(v.type,t,w,x);v.modelType.formatValue(new Date(),"string");v.modelType.oFormat.oFormatOptions.UTC=false;return g.getType(v.type,t,w,x);}v.modelType=g.getType(v.type,t,w,x);return v.modelType;};
s.prototype.createModelTypeInstance=function(v){return s._createModelTypeInstance(v,this._oDateFormatSettings,this._useUTCDateTime,this._bPreserveDecimals);};
s.prototype._createEmailOrPhoneLink=function(v,t){var i=new L({text:this._getDefaultBindingInfo(v,t),wrapping:this._isMobileTable,press:function(E){var u=E.getSource().getText();if(v.isEmailAddress){M.URLHelper.triggerEmail(u);}else if(v.isPhoneNumber){M.URLHelper.triggerTel(u);}}});return i;};
s.prototype._getDefaultBindingInfo=function(v,t){var B={path:v.name,type:t};if(this._bEnableDescriptions&&v.description){B={parts:[{path:v.name,type:t},{path:v.description}],formatter:l.getFormatterFunctionFromDisplayBehaviour(v.displayBehaviour)};}return B;};
s.prototype._createLink=function(v,t,i){var u=null;v.linkProperties=i.parameters||i.urlPath;if(i.urlPath){u={path:i.urlPath};}else if(i.urlTarget){u=i.urlTarget;}return new L({text:this._getDefaultBindingInfo(v,t),wrapping:this._isMobileTable,href:u});};
s.prototype._createObjectIdentifierTemplate=function(v,t,i){var u,w,x,y,z,A;var B=this;var E=function(G){if(B._oSemanticObjectController&&B._oSemanticObjectController.getForceLinkRendering()&&B._oSemanticObjectController.getForceLinkRendering()[v.name]){return true;}var J=v.semanticObjects.additionalSemanticObjects.concat(v.semanticObjects.defaultSemanticObject);return o.hasDistinctSemanticObject(J,G);};if(v.semanticObjects){o.getDistinctSemanticObjects().then(function(G){if(E(G)){A=new N({semanticObject:v.semanticObjects.defaultSemanticObject,additionalSemanticObjects:v.semanticObjects.additionalSemanticObjects,semanticObjectLabel:v.label,fieldName:v.name,semanticObjectController:B._oSemanticObjectController,navigationTargetsObtained:function(J){var u=sap.ui.getCore().byId(J.getSource().getControl());var K=J.getParameters().mainNavigation;if(K){K.setDescription(u.getText());}J.getParameters().show(u.getTitle(),K,undefined,undefined);}});B._aLinkHandlers.push(A);}});}if(v.description){switch(v.displayBehaviour){case"descriptionAndId":v.vertical=true;w=v.description;x=v.name;y=t;break;case"idAndDescription":v.vertical=true;w=v.name;x=v.description;z=t;break;case"idOnly":w=v.name;y=t;break;default:w=v.description;break;}}else{w=v.name;z=t;}u=new O({title:w?{path:w,type:z}:undefined,text:x?{path:x,type:y}:undefined,titleActive:v.semanticObjects?{path:"$sapuicompcontrolprovider_distinctSO>/distinctSemanticObjects",formatter:function(G){return E(G);}}:false,titlePress:function(G){if(A){A.setControl(G.getSource());A.setBindingContext(G.getSource().getBindingContext());A.openPopover(G.getParameter("domRef"));}}});u.attachEvent("ObjectIdentifier.designtime",function(G){if(A){A.setControl(G.getSource());G.getParameters().registerNavigationPopoverHandler(A);}});u.setModel(o.getJSONModel(),"$sapuicompcontrolprovider_distinctSO");if(this._oSemanticKeyAdditionalControl&&i){this._bSemanticKeyAdditionalControlUsed=true;return new V({renderType:"Bare",items:[u,this._oSemanticKeyAdditionalControl]}).addStyleClass("sapUiTinyMarginTopBottom");}return u;};
s.prototype._createObjectStatusTemplate=function(v,t,i){var u,w,x,B;x=k.getShowCriticalityIcon(i.criticalityRepresentationType);if(i.path){v.criticality=i.path;u={path:i.path,formatter:k.getCriticalityState};if(i.criticalityRepresentationPath){v.criticalityRepresentation=i.criticalityRepresentationPath;w={parts:[{path:i.path},{path:i.criticalityRepresentationPath}],formatter:function(y,z){return k.getShowCriticalityIcon(z)?k.getCriticalityIcon(y):undefined;}};}else if(x){w={path:i.path,formatter:k.getCriticalityIcon};}}else{u=k.getCriticalityState(i.criticalityType);if(i.criticalityRepresentationPath){v.criticalityRepresentation=i.criticalityRepresentationPath;w={path:i.criticalityRepresentationPath,formatter:function(y){return k.getShowCriticalityIcon(y)?k.getCriticalityIcon(i.criticalityType):undefined;}};}else if(x){w=k.getCriticalityIcon(i.criticalityType);}}if(v.unit){B={parts:[{path:v.name,type:t},{path:v.unit},{mode:"OneTime",path:v.isCurrencyField?"/##@@requestCurrencyCodes":"/##@@requestUnitsOfMeasure",targetType:"any"}],formatter:v.isCurrencyField?l.getInlineAmountFormatter(this._bPreserveDecimals):l.getInlineMeasureUnitFormatter(this._bPreserveDecimals),useRawValues:true};}else{B=this._getDefaultBindingInfo(v,t);}return new b({text:B,state:u,icon:w});};
s.prototype._createSmartLinkFieldTemplate=function(v,t,i){var B=v.unit?{parts:[{path:v.name,type:t},{path:v.unit}],formatter:v.isCurrencyField?l.getAmountCurrencyFormatter():l.getMeasureUnitFormatter(),useRawValues:true}:this._getDefaultBindingInfo(v,t);var u=new S({semanticObject:v.semanticObjects.defaultSemanticObject,additionalSemanticObjects:v.semanticObjects.additionalSemanticObjects,semanticObjectLabel:v.label,fieldName:v.name,text:B,uom:v.unit?{path:v.unit}:undefined,wrapping:this._isMobileTable,semanticObjectController:this._oSemanticObjectController,beforeNavigationCallback:this._oSemanticObjectController?this._oSemanticObjectController.getBeforeNavigationCallback():undefined,navigationTargetsObtained:function(E){var w=this.getBinding("text");if(!w||!Array.isArray(w.getValue())||v.unit){E.getParameters().show();return;}var x=w.getValue();var y=l.getTextsFromDisplayBehaviour(v.displayBehaviour,x[0],x[1]);var z=E.getParameters().mainNavigation;if(z){z.setDescription(y.secondText);}E.getParameters().show(y.firstText,z,undefined,undefined);}});u.setCreateControlCallback(i);return u;};
s.prototype._createMeasureFieldTemplate=function(v,t){var i,A,u,w,U,E=false;E=!!(v.isCurrencyField&&this._oCurrencyFormatSettings&&this._oCurrencyFormatSettings.showCurrencySymbol);w=new a({layoutData:this._isMobileTable?undefined:new F({growFactor:1,baseSize:"0%"}),textDirection:"LTR",wrapping:false,textAlign:"End",text:{parts:[{path:v.name,type:t},{path:v.unit},{mode:"OneTime",path:v.isCurrencyField?"/##@@requestCurrencyCodes":"/##@@requestUnitsOfMeasure",targetType:"any"}],formatter:v.isCurrencyField?l.getAmountCurrencyFormatter(this._bPreserveDecimals):l.getMeasureUnitFormatter(this._bPreserveDecimals),useRawValues:true}}).addStyleClass("sapUiCompCurrency").addStyleClass("sapUiCompCurrencyTabNums");U=new a({layoutData:new F({shrinkFactor:0}),textDirection:"LTR",wrapping:false,textAlign:"End",width:"3em",text:{path:v.unit,formatter:E?l.getCurrencySymbolFormatter():undefined}}).addStyleClass("sapUiCompUoMPart").addStyleClass("sapUiCompCurrencyMonoFont");i=new H({renderType:"Bare",justifyContent:"End",wrap:this._isMobileTable?"Wrap":undefined,items:[w,U]});i.addStyleClass("sapUiCompDirectionLTR");if(this._isAnalyticalTable){u=i;u.bindProperty("visible",{path:v.unit,formatter:m.isNotMultiUnit});A=new L({text:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_LINK_TEXT")||"Show Details",visible:{path:v.unit,formatter:m.isMultiUnit},press:[{value:v.name,unit:v.unit,additionalParent:this.useSmartToggle,smartTableId:this._smartTableId,template:u},m.openMultiUnitPopover]});i=new V({renderType:"Bare",items:[A,u]});}return i;};
s.prototype._createFieldMetadata=function(i){var t=Object.assign({},i);t.label=i.fieldLabel||i.name;t.quickInfo=i.quickInfo||t.label;t.displayBehaviour=t.displayBehaviour||this._oDefaultDropDownDisplayBehaviour;t.filterType=this._getFilterType(i);this._updateValueListMetadata(t);this._setAnnotationMetadata(t);if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields&&this._oLineItemAnnotation.fields.indexOf(i.name)>-1){t.urlInfo=this._oLineItemAnnotation.urlInfo&&this._oLineItemAnnotation.urlInfo[i.name];t.criticalityInfo=this._oLineItemAnnotation.criticality&&this._oLineItemAnnotation.criticality[i.name];}else if(this._bProcessDataFieldDefault){this._oMetadataAnalyser.updateDataFieldDefault(t);}return t;};
s.prototype._updateValueListMetadata=function(i){i.hasValueListAnnotation=i["sap:value-list"]!==undefined;if(i.hasValueListAnnotation){i.hasFixedValues=i["sap:value-list"]==="fixed-values";}else if(i["com.sap.vocabularies.Common.v1.ValueList"]){i.hasValueListAnnotation=true;i.hasFixedValues=this._oMetadataAnalyser.getValueListSemantics(i["com.sap.vocabularies.Common.v1.ValueList"])==="fixed-values";}};
s.prototype._setAnnotationMetadata=function(i){if(i&&i.fullName){i.semanticObjects=this._oMetadataAnalyser.getSemanticObjectsFromAnnotation(i.fullName);}};
s.prototype._getFilterType=function(i){return l._getFilterType(i);};
s.prototype.destroy=function(){var t=function(A){var i;if(A){i=A.length;while(i--){A[i].destroy();}}};if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(!this._bSemanticKeyAdditionalControlUsed&&this._oSemanticKeyAdditionalControl&&this._oSemanticKeyAdditionalControl.destroy){this._oSemanticKeyAdditionalControl.destroy();}t(this._aValueHelpProvider);this._aValueHelpProvider=null;t(this._aValueListProvider);this._aValueListProvider=null;t(this._aLinkHandlers);this._aLinkHandlers=null;if(this._oHelper){this._oHelper.destroy();}this._oHelper=null;this._mSmartField=null;this._aODataFieldMetadata=null;this._oDateFormatSettings=null;this._oCurrencyFormatSettings=null;this._oDefaultDropDownDisplayBehaviour=null;this._oLineItemAnnotation=null;this._oSemanticKeyAnnotation=null;this._oParentODataModel=null;this.bIsDestroyed=true;};
r=n.extend("sap.ui.comp.SmartToggle",{metadata:{library:"sap.ui.comp",properties:{editable:{type:"boolean",defaultValue:false}},aggregations:{edit:{type:"sap.ui.core.Control",multiple:false},display:{type:"sap.ui.core.Control",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:{apiVersion:2,render:function(i,t){i.openStart("span",t).class("sapUiCompSmartToggle").openEnd();i.renderControl(t.getEditable()?t.getEdit():t.getDisplay());i.close("span");}}});
r.prototype.getFocusDomRef=function(){var i=this.getEditable()?this.getEdit():this.getDisplay();if(i){return i.getFocusDomRef();}return n.prototype.getFocusDomRef.call(this);};
r.prototype.getAccessibilityInfo=function(){var i=this.getEditable()?this.getEdit():this.getDisplay();if(i&&i.getAccessibilityInfo){return i.getAccessibilityInfo();}return null;};
r.prototype.addAssociation=function(A,i,t){if(A==="ariaLabelledBy"){var E=this.getEdit(),u=this.getDisplay();E&&E.addAssociation(A,i,t);u&&u.addAssociation(A,i,t);}return n.prototype.addAssociation.apply(this,arguments);};
r.prototype.removeAssociation=function(A,v,i){if(A==="ariaLabelledBy"){var E=this.getEdit(),t=this.getDisplay();E&&E.removeAssociation(A,v,i);t&&t.removeAssociation(A,v,i);}return n.prototype.removeAssociation.apply(this,arguments);};
r.prototype.removeAllAssociation=function(A,i){if(A==="ariaLabelledBy"){var E=this.getEdit(),t=this.getDisplay();E&&E.removeAllAssociation(A,i);t&&t.removeAllAssociation(A,i);}return n.prototype.removeAllAssociation.apply(this,arguments);};
return s;},true);
sap.ui.predefine('sap/ui/comp/providers/TableProvider',['sap/ui/comp/odata/MetadataAnalyser','./ControlProvider','sap/ui/comp/util/FormatUtil','sap/ui/Device','sap/ui/comp/odata/FiscalMetadata'],function(M,C,F,D,a){"use strict";var T=function(p){if(p){this._oParentODataModel=p.model;this.sEntitySet=p.entitySet;this._sIgnoredFields=p.ignoredFields;this._sInitiallyVisibleFields=p.initiallyVisibleFields;this.isEditableTable=p.isEditableTable;this._smartTableId=p.smartTableId;this._isAnalyticalTable=p.isAnalyticalTable;this._isMobileTable=p.isMobileTable;this.useSmartField=p.useSmartField;this.useSmartToggle=p.useSmartToggle;this.useUTCDateTime=p.useUTCDateTime==="true";this._bSkipAnnotationParse=p.skipAnnotationParse==="true";this._sLineItemQualifier=p.lineItemQualifier;this._sPresentationVariantQualifier=p.presentationVariantQualifier;this.enableInResultForLineItem=p.enableInResultForLineItem==="true";this._oSemanticKeyAdditionalControl=p._semanticKeyAdditionalControl;this._bShowDetailsButton=p.showDetailsButton;this._bEnableAutoColumnWidth=p.enableAutoColumnWidth;this._bPreserveDecimals=p.preserveDecimals;try{var g=function(s){switch(typeof s){case"string":return JSON.parse(s);case"object":if(s==null){return undefined;}return s;default:return undefined;}};this._oDateFormatSettings=g(p.dateFormatSettings);this._oCurrencyFormatSettings=g(p.currencyFormatSettings);this._oDefaultDropDownDisplayBehaviour=p.defaultDropDownDisplayBehaviour;}catch(e){}}if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this._aODataFieldMetadata=[];this._aTableViewMetadata=[];this._aIgnoredFields=[];this._aInitiallyVisibleFields=[];this._oMetadataAnalyser=new M(this._oParentODataModel);this._oSemanticObjectController=p.semanticObjectController;this._intialiseMetadata();};
T.prototype._intialiseMetadata=function(){var t=[],c=-1,i,l,f,o,s,S,b;this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntitySet);b=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);if(!this._bSkipAnnotationParse){this._oPresentationVariant=this._oMetadataAnalyser.getPresentationVariantAnnotation(b,this._sPresentationVariantQualifier);if(this._oPresentationVariant){this._oLineItemAnnotation=this._oPresentationVariant.lineItemAnnotation;}if(!this._oLineItemAnnotation){this._oLineItemAnnotation=this._oMetadataAnalyser.getLineItemAnnotation(b,this._sLineItemQualifier);}}if(this._isMobileTable){this._oSemanticKeyAnnotation=this._oMetadataAnalyser.getSemanticKeyAnnotation(b);}if(!this._isAnalyticalTable){this._addLineItemNavigationFields(b);}S=this._oMetadataAnalyser.getEntityContainerAttribute("supported-formats");if(S){this._bSupportsExcelExport=S.indexOf("xlsx")>-1;}if(!this._oDefaultDropDownDisplayBehaviour){this._oDefaultDropDownDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(b);}this._generateArrays();this._oControlProvider=new C({metadataAnalyser:this._oMetadataAnalyser,model:this._oParentODataModel,fieldsMetadata:this._aODataFieldMetadata,lineItemAnnotation:this._oLineItemAnnotation,semanticKeyAnnotation:this._oSemanticKeyAnnotation,_semanticKeyAdditionalControl:this._oSemanticKeyAdditionalControl,processDataFieldDefault:true,isMobileTable:this._isMobileTable,isAnalyticalTable:this._isAnalyticalTable,smartTableId:this._smartTableId,dateFormatSettings:this._oDateFormatSettings,currencyFormatSettings:this._oCurrencyFormatSettings,defaultDropDownDisplayBehaviour:this._oDefaultDropDownDisplayBehaviour,useSmartField:this.useSmartField,useSmartToggle:this.useSmartToggle,useUTCDateTime:this.useUTCDateTime,enableDescriptions:true,entitySet:this.sEntitySet,semanticObjectController:this._oSemanticObjectController,preserveDecimals:this._bPreserveDecimals});this._oFieldSemanticObjectMap={};if(this._aODataFieldMetadata){l=this._aODataFieldMetadata.length;}for(i=0;i<l;i++){f=this._aODataFieldMetadata[i];if(this._aIgnoredFields.indexOf(f.name)>-1||!f.visible){continue;}if(f.type.indexOf("Edm.")===0){o=this._oControlProvider.getFieldViewMetadata(f,this.isEditableTable);this._enrichWithTableViewMetadata(o,c++);t.push(o);if(o.semanticObject){this._oFieldSemanticObjectMap[o.name]=o.semanticObject;}}}s=function(d,e){return d.index-e.index;};this._aTableViewMetadata=t.sort(s);if(this._isAnalyticalTable&&this._mDimensionFromText){this._aTableViewMetadata.forEach(function(d){var e=this._mDimensionFromText[d.name];if(e&&d.aggregationRole!=="dimension"){if(!d.additionalProperty){d.additionalProperty=e;}else{d.additionalProperty+=","+e;}}}.bind(this));}};
T.prototype._addLineItemNavigationFields=function(f){var b,l,s,o;if(this._aODataFieldMetadata&&this._oLineItemAnnotation){b=this._oLineItemAnnotation.fields;if(b){l=b.length;}while(l--){s=b[l];if(s&&s.indexOf("/")>=0){o=this._oMetadataAnalyser.extractNavigationPropertyField(s,this.sEntitySet);if(o){o.name=o.parentPropertyName+"/"+o.name;if(o.description){o.description=o.parentPropertyName+"/"+o.description;}if(o.unit){o.unit=o.parentPropertyName+"/"+o.unit;}this._aODataFieldMetadata.push(o);}}}}};
T.prototype.getFieldSemanticObjectMap=function(){return this._oFieldSemanticObjectMap;};
T.prototype.getTableViewMetadata=function(){return this._aTableViewMetadata;};
T.prototype.getSupportsExcelExport=function(){return this._bSupportsExcelExport;};
T.prototype.getMultiUnitBehaviorEnabled=function(){return this._oMetadataAnalyser.getMultiUnitBehaviorEnabled();};
T.prototype.getIsUTCDateHandlingEnabled=function(){return this._oDateFormatSettings?this._oDateFormatSettings.UTC:false;};
T.prototype.getRequestAtLeastFields=function(){return(this._oPresentationVariant&&this._oPresentationVariant.requestAtLeastFields)?this._oPresentationVariant.requestAtLeastFields:[];};
T.prototype.isLineItemDefaultImportance=function(f){if(f.importance!="High"){return false;}var l=(this._oLineItemAnnotation&&this._oLineItemAnnotation.annotation)||[];return l.some(function(A){return A.Value&&A.Value.Path==f.name&&!M.hasImportance(A);});};
T.prototype.getFieldMetadata=function(n,A){var f=this._aTableViewMetadata.concat(this._aODataFieldMetadata).find(function(m){return m.name==n;});if(!f&&n&&n.includes("/")){try{f=this._oMetadataAnalyser.extractNavigationPropertyField(n,this.sEntitySet);}catch(e){}}if(f){if(!f.modelType){this._oControlProvider.createModelTypeInstance(f);}if(A&&!f.hasOwnProperty("additionalProperty")){f.additionalProperty=this._getAdditionalProperty(f).join(",");}}return f;};
T.prototype._generateArrays=function(){if(this._sIgnoredFields){this._aIgnoredFields=this._sIgnoredFields.split(",");}if(this._sInitiallyVisibleFields){this._aInitiallyVisibleFields=this._sInitiallyVisibleFields.split(",");}};
T.prototype._getAdditionalProperty=function(f){var A=[];if(f.isMeasureField&&f.unit){A.push(f.unit);}else if(f.description){A.push(f.description);}if(f.criticality){A.push(f.criticality);}if(f.criticalityRepresentation){A.push(f.criticalityRepresentation);}if(f.linkProperties&&f.linkProperties.length){A=A.concat(f.linkProperties);}if(f.fieldControlProperty){A.push(f.fieldControlProperty);}return A;};
T.prototype._enrichWithTableViewMetadata=function(f,c){var n=[],A,p,l,w;var e=function(P){var N,t;if(P&&P.indexOf("/")>-1){t=P.split("/");t.pop();N=t.join("/");}return N;};this._updateLabel(f);f.importance=this._getFieldImportance(f)||f.importance;f.isInitiallyVisible=this._isInitiallyVisible(f);f.index=this._getIndex(f,c);if(!f.width){w=this._getLineItemFieldWidth(f);if(w){f.width=w;}else if(!this._isMobileTable&&!this._bEnableAutoColumnWidth){f.width=F.getWidth(f);}}A=this._getAdditionalProperty(f);l=A.length;if(l){f.additionalProperty=A.join(",");}while(l--){p=e(A[l]);if(p){n.push(p);}}if(f.parentPropertyName){n.push(f.parentPropertyName);}f.navigationProperty=n.join(",");this._setSortOrder(f);if(f.isFiscalDate){a.updateViewMetadata(f);}if(this._isAnalyticalTable){f.summed=f.aggregationRole==="measure";this._setInResult(f);this._setGroupBy(f);this._mapDimensionFromTextProperty(f);}};
T.prototype._isInitiallyVisible=function(f){var i=false;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields){i=this._oLineItemAnnotation.fields.indexOf(f.name)>-1;if(i&&!D.system.desktop&&!this._bShowDetailsButton){var I=f.importance;if(I){if(D.system.tablet){i=I==="High"||I==="Medium";}else if(D.system.phone){i=I==="High";}}}}if(!i&&this._aInitiallyVisibleFields){i=this._aInitiallyVisibleFields.indexOf(f.name)>-1;}return i;};
T.prototype._setInResult=function(f){if(this._oPresentationVariant){if(this._oPresentationVariant.requestAtLeastFields&&this._oPresentationVariant.requestAtLeastFields.indexOf(f.name)>-1){f.inResult=true;}}else if(this.enableInResultForLineItem){if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields&&this._oLineItemAnnotation.fields.indexOf(f.name)>-1){f.inResult=true;}}};
T.prototype._setSortOrder=function(f){var l;if(this._oPresentationVariant&&this._oPresentationVariant.sortOrderFields){l=this._oPresentationVariant.sortOrderFields.length;for(var i=0;i<l;i++){if(this._oPresentationVariant.sortOrderFields[i].name===f.name){f.sorted=true;f.sortOrder=this._oPresentationVariant.sortOrderFields[i].descending?"Descending":"Ascending";break;}}}};
T.prototype._setGroupBy=function(f){if(this._oPresentationVariant&&this._oPresentationVariant.groupByFields&&this._oPresentationVariant.groupByFields.indexOf(f.name)>=0){f.grouped=true;}};
T.prototype._getFieldImportance=function(f){var r=null;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.importance){r=this._oLineItemAnnotation.importance[f.name];}return r;};
T.prototype._getLineItemFieldWidth=function(f){var r=null;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.width){r=this._oLineItemAnnotation.width[f.name];}return r;};
T.prototype._mapDimensionFromTextProperty=function(f){if(!f.description||f.aggregationRole!=="dimension"){return;}if(!this._mDimensionFromText){this._mDimensionFromText={};}this._mDimensionFromText[f.description]=f.name;};
T.prototype._getIndex=function(f,c){var i=-1,l=0,I=0;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.fields){l=this._oLineItemAnnotation.fields.length;i=this._oLineItemAnnotation.fields.indexOf(f.name);}if(i<0&&this._aInitiallyVisibleFields){I=this._aInitiallyVisibleFields.length;i=this._aInitiallyVisibleFields.indexOf(f.name);if(i>-1){i+=l;}}if(i>-1){return i;}return c+l+I;};
T.prototype._updateLabel=function(f){var l;if(this._oLineItemAnnotation&&this._oLineItemAnnotation.labels){l=this._oLineItemAnnotation.labels[f.name];}if(l){f.label=l;if(f.template&&f.template.setSemanticObjectLabel){f.template.setSemanticObjectLabel(f.label);}}};
T.prototype.getFieldLabel=function(e,f){if(!f){return null;}var o=this._oMetadataAnalyser.getFieldsByEntitySetName(e).find(function(c){return c.name==f;});if(!o){return null;}return(o["com.sap.vocabularies.Common.v1.Label"]&&o["com.sap.vocabularies.Common.v1.Label"]["String"])||o["fieldLabel"]||null;};
T.prototype.destroy=function(){if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(this._oControlProvider&&this._oControlProvider.destroy){this._oControlProvider.destroy();}this._mDimensionFromText=null;this._oControlProvider=null;this._aODataFieldMetadata=null;this._aTableViewMetadata=null;this._aIgnoredFields=null;this._aInitiallyVisibleFields=null;this._sIgnoredFields=null;this._sInitiallyVisibleFields=null;this.bIsDestroyed=true;};
return T;},true);
sap.ui.predefine('sap/ui/comp/providers/ValueHelpProvider',['sap/ui/thirdparty/jquery','sap/ui/comp/library','sap/m/library','sap/m/List','sap/m/ResponsivePopover','sap/m/StandardListItem','sap/m/Token','sap/m/Table','sap/m/ColumnListItem','sap/m/Label','./BaseValueListProvider','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/util/FormatUtil','sap/ui/comp/util/DateTimeUtil','sap/ui/model/json/JSONModel','sap/ui/core/format/DateFormat','sap/ui/Device','sap/ui/comp/smartfilterbar/SmartFilterBar','sap/ui/model/Sorter','sap/base/util/merge','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/core/Item','sap/base/strings/capitalize'],function(q,l,L,a,R,S,T,b,C,c,B,M,F,D,J,d,e,f,g,m,h,j,I){"use strict";var V=l.valuehelpdialog.ValueHelpRangeOperation;var k={DeprecatedCode:"W",RevokedCode:"E",ValidCode:""};var n;
var o=B.extend("sap.ui.comp.providers.ValueHelpProvider",{constructor:function(p){if(!f){f=sap.ui.require("sap/ui/comp/smartfilterbar/SmartFilterBar");}if(p){this.preventInitialDataFetchInValueHelpDialog=!!p.preventInitialDataFetchInValueHelpDialog;this.sTitle=p.title;this.bSupportMultiselect=!!p.supportMultiSelect;this.bSupportRanges=!!p.supportRanges;this.bIsSingleIntervalRange=!!p.isSingleIntervalRange;this.bIsUnrestrictedFilter=!!p.isUnrestrictedFilter;this.bTakeOverInputValue=(p.takeOverInputValue===false)?false:true;this._sScale=p.scale;this._sPrecision=p.precision;if(this.bIsSingleIntervalRange){this.bSupportRanges=true;}}B.apply(this,arguments);this._onInitialise();}});
o.prototype._onInitialise=function(){if(this.oControl.attachValueHelpRequest){this._fVHRequested=function(E){if(!this.bInitialised){return;}var s=E.getParameter("_userInputValue");this.oControl=E.getSource();this.bForceTriggerDataRetreival=E.getParameter("fromSuggestions");if(this.bSupportBasicSearch&&(this.bTakeOverInputValue||this.bForceTriggerDataRetreival)&&(s||s==="")){this.sBasicSearchText=s;}this._createValueHelpDialog();}.bind(this);this.oControl.attachValueHelpRequest(this._fVHRequested);}};
o.prototype._getEntitiesLazy=function(){return sap.ui.getCore().loadLibrary('sap.ui.mdc',{async:true}).then(function(){return new Promise(function(r){sap.ui.require(["sap/ui/mdc/filterbar/vh/CollectiveSearchSelect",'sap/ui/comp/valuehelpdialog/ValueHelpDialog'],function(i,v){r([v,i]);});});});};
o.prototype._createValueHelpDialog=function(){if(!this.bCreated){this.bCreated=true;if(!this._oValueHelpDialogClass||!this._oCollectiveSearchSelectClass){this._getEntitiesLazy().then(this._onValueHelpDialogRequired.bind(this));}else{this._onValueHelpDialogRequired([this._oValueHelpDialogClass,this._oCollectiveSearchSelectClass]);}}};
o.prototype._getTitle=function(){if(this.sTitle){return this.sTitle;}else if(this.oFilterProvider){return this.oFilterProvider._determineFieldLabel(this._fieldViewMetadata);}return"";};
o.prototype.getValueListAnnotation=function(){var s;if(this._isContextDependent()){s=this.oControl.getBindingContext()&&this.oControl.getBindingContext().getPath();}return this._oMetadataAnalyser.getValueListAnnotationLazy(this._sFullyQualifiedFieldName,s);};
o.prototype._onValueHelpDialogRequired=function(i){if(this.bInitialised&&this.bIsContextDependent){this._bValueListRequested=false;return this._loadAnnotation().then(function(){return this._onInitValueHelpDialog(i);}.bind(this));}else{return this._onInitValueHelpDialog(i);}};
o.prototype._onInitValueHelpDialog=function(i){this._oValueHelpDialogClass=i[0];this._oCollectiveSearchSelectClass=i[1];var v=this.oControl.getId()+"-valueHelpDialog";this.oValueHelpDialog=new this._oValueHelpDialogClass(v,{stretch:e.system.phone,basicSearchText:this.sBasicSearchText,supportRangesOnly:this.bIsSingleIntervalRange||!this.oPrimaryValueListAnnotation,supportMultiselect:this.bSupportMultiselect,title:this._getTitle(),supportRanges:this.bSupportRanges,displayFormat:this.sDisplayFormat,ok:this._onOK.bind(this),cancel:this._onCancel.bind(this),afterClose:function(){if(this.oPrimaryValueListAnnotation){this._resolveAnnotationData(this.oPrimaryValueListAnnotation);}this.oValueHelpDialog.destroy();this.bCreated=false;if(this.oControl&&this.oControl.focus&&!e.system.phone){this.oControl.focus();}}.bind(this)});if(this.oValueHelpDialog._oColSearchBox){this.oValueHelpDialog._oColSearchBox.destroy();this.oValueHelpDialog._oColSearchBox=null;}this.oValueHelpDialog._oColSearchBox=new this._oCollectiveSearchSelectClass({visible:false,title:sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("COLLECTIVE_SEARCH_SELECTION_TITLE")}).addStyleClass("sapUiTinyMarginEnd");this.oValueHelpDialog.setProperty("_enhancedExcludeOperations",true);this.oControl.addDependent(this.oValueHelpDialog);this.oValueHelpDialog.suggest(function(p,s){if(this.oPrimaryValueListAnnotation){var r=function(n){p.setShowSuggestion(true);p.setFilterSuggests(false);p._oSuggestProvider=new n({fieldName:s,control:p,model:this.oODataModel,displayFormat:this.sDisplayFormat,resolveInOutParams:false,displayBehaviour:this.sTokenDisplayBehaviour,annotation:this.oPrimaryValueListAnnotation,fieldViewMetadata:this._fieldViewMetadata,maxLength:this._sMaxLength,filterModel:this.oFilterModel,aggregation:"suggestionRows",typeAheadEnabled:true,enableShowTableSuggestionValueHelp:false});}.bind(this);n=sap.ui.require('sap/ui/comp/providers/ValueListProvider');if(!n){sap.ui.require(['sap/ui/comp/providers/ValueListProvider'],r);}else{r(n);return p._oSuggestProvider;}return null;}}.bind(this));if(this.bIsSingleIntervalRange){this.oValueHelpDialog.setIncludeRangeOperations([V.BT,V.EQ],this._sType);this.oValueHelpDialog.setMaxIncludeRanges(1);this.oValueHelpDialog.setMaxExcludeRanges(0);this.oValueHelpDialog.bIsSingleIntervalRange=this.bIsSingleIntervalRange;this._updateInitialInterval();}else if((this._sType==="date"||this._sType==="time"||this._sType==="datetime")&&!this.bIsUnrestrictedFilter){this.oValueHelpDialog.setIncludeRangeOperations([V.EQ],this._sType);this.oValueHelpDialog.setMaxExcludeRanges(0);}if(this.oControl.$()&&this.oControl.$().closest(".sapUiSizeCompact").length>0){this.oValueHelpDialog.addStyleClass("sapUiSizeCompact");}else if(this.oControl.$()&&this.oControl.$().closest(".sapUiSizeCozy").length>0){this.oValueHelpDialog.addStyleClass("sapUiSizeCozy");}else if(q("body").hasClass("sapUiSizeCompact")){this.oValueHelpDialog.addStyleClass("sapUiSizeCompact");}else{this.oValueHelpDialog.addStyleClass("sapUiSizeCozy");}if(this.bSupportRanges){this.oValueHelpDialog.setRangeKeyFields([{label:this._getTitle(),key:this.sFieldName,typeInstance:this._fieldViewMetadata?this._fieldViewMetadata.ui5Type:null,type:this._sType,formatSettings:this._sType==="numc"?{isDigitSequence:true,maxLength:this._sMaxLength}:Object.assign({},this._oDateFormatSettings,{UTC:false}),scale:this._sScale,precision:this._sPrecision,maxLength:this._sMaxLength,nullable:this._fieldViewMetadata?this._fieldViewMetadata.nullable:false}]);}if(!(this.bIsSingleIntervalRange||!this.oPrimaryValueListAnnotation)){this.oValueHelpDialog.setModel(this.oODataModel);this._createAdditionalValueHelpControls();this._createCollectiveSearchControls();}if(this.oControl.getTokens){var t=this.oControl.getTokens();if(t){t=this._adaptTokensFromFilterBar(t);this.oValueHelpDialog.setTokens(t);}}return Promise.resolve().then(this.oValueHelpDialog.open.bind(this.oValueHelpDialog));};
o.prototype._isContextDependent=function(){var p,P;if(this.bIsContextDependent===undefined){P=this._oMetadataAnalyser.getPropertyContextByPath(this._sFullyQualifiedFieldName);if(P){p=P.getObject();if(M.hasValueListRelevantQualifiers(p)){this.bIsContextDependent=true;}}}return this.bIsContextDependent;};
o.prototype._adaptTokensFromFilterBar=function(t){var p,r,s,u=t;if(this.oFilterProvider&&t&&this._sType==="time"){u=[];for(var i=0;i<t.length;i++){p=m({},t[i]);r=p.data("range");if(r){r=m({},r);if(r.value1 instanceof Date){s=D.localToUtc(r.value1);r.value1={__edmType:"Edm.Time",ms:s.getTime()};}if(r.value2 instanceof Date){s=D.localToUtc(r.value2);r.value2={__edmType:"Edm.Time",ms:s.getTime()};}p.data("range",r);u.push(p);}}}return u;};
o.prototype._updateInitialInterval=function(){var i=this.oControl.getValue(),t,r,v,p,s;if(i){t=new T();r={exclude:false,keyField:this.sFieldName};if(this._sType==="numeric"){v=F.parseFilterNumericIntervalData(i);if(v.length==0){v.push(i);}}else if(this._sType==="datetime"){v=F.parseDateTimeOffsetInterval(i);p=d.getDateTimeInstance(Object.assign({},this._oDateFormatSettings,{UTC:false}));s=p.parse(v[0]);v[0]=s?s:new Date(v[0]);if(v.length===2){s=p.parse(v[1]);v[1]=s?s:new Date(v[1]);}}else{v=i.split("-");}if(v&&v.length===2){r.operation="BT";r.value1=v[0];r.value2=v[1];}else{r.operation="EQ";r.value1=v[0];}t.data("range",r);}if(t){this.oValueHelpDialog.setTokens([t]);}};
o.prototype._createCollectiveSearchControls=function(){var p,i=0,r=0,O,A;if(this.additionalAnnotations&&this.additionalAnnotations.length){O=function(E){var s,t,p,K=E.getParameter("key"),u=E.getSource(),v=u&&u.getItems();for(var i=0;i<v.length;i++){p=v[i];if(p.getKey()===K){s=p;break;}}if(s){t=s.data("_annotation");if(t){this._triggerAnnotationChange(t);}}}.bind(this);p=new I({key:this.oPrimaryValueListAnnotation.keyField,text:this.oPrimaryValueListAnnotation.valueListTitle});p.data("_annotation",this.oPrimaryValueListAnnotation);this.oValueHelpDialog._oColSearchBox.addItem(p);this.oValueHelpDialog._oColSearchBox.setSelectedItemKey(this.oPrimaryValueListAnnotation.keyField);r=this.additionalAnnotations.length;for(i=0;i<r;i++){A=this.additionalAnnotations[i];p=new I({key:A.qualifier,text:A.valueListTitle});p.data("_annotation",A);this.oValueHelpDialog._oColSearchBox.addItem(p);}this.oValueHelpDialog._oColSearchBox.attachSelect(O);this.oValueHelpDialog._oColSearchBox.setVisible(true);}};
o.prototype._triggerAnnotationChange=function(A){this.oValueHelpDialog.resetTableState();this._resolveAnnotationData(A);this._createAdditionalValueHelpControls();};
o.prototype._createAdditionalValueHelpControls=function(){var s=null;this.oValueHelpDialog.setKey(this.sKey);this.oValueHelpDialog.setKeys(this._aKeys);this.oValueHelpDialog.setDescriptionKey(this.sDescription);this.oValueHelpDialog.setTokenDisplayBehaviour(this.sTokenDisplayBehaviour);var i=new J();i.setData({cols:this._aCols});this.oValueHelpDialog.setModel(i,"columns");if(this.bSupportBasicSearch){s=this.sKey;}if(this.oSmartFilterBar){this.oSmartFilterBar._setCollectiveSearch(null);this.oSmartFilterBar.destroy();}this.oSmartFilterBar=new f(this.oValueHelpDialog.getId()+"-smartFilterBar",{entitySet:this.sValueListEntitySetName,basicSearchFieldName:s,enableBasicSearch:this.bSupportBasicSearch,isRunningInValueHelpDialog:true,advancedMode:true,showGoOnFB:!e.system.phone,filterBarExpanded:false,search:this._onFilterBarSearchPressed.bind(this),reset:this._onFilterBarResetPressed.bind(this),filterChange:this._onFilterBarFilterChange.bind(this),initialise:this._onFilterBarInitialise.bind(this)});if(this._oDateFormatSettings){this.oSmartFilterBar.data("dateFormatSettings",this._oDateFormatSettings);}if(this.oPrimaryValueListAnnotation&&this.oPrimaryValueListAnnotation.constParams){this.oSmartFilterBar.data("hiddenFields",Object.keys(this.oPrimaryValueListAnnotation.constParams));}this.oValueHelpDialog.setFilterBar(this.oSmartFilterBar);};
o.prototype._onFilterBarFilterChange=function(){if(!this._bIgnoreFilterChange){this.oValueHelpDialog.getTableAsync().then(function(t){t.setShowOverlay(true);this.oValueHelpDialog.TableStateSearchData();}.bind(this));}};
o.prototype._expandFilterBar=function(){var A=this.oFilterProvider&&this.oFilterProvider._oAdditionalConfiguration,i=A?A.getControlConfigurationByKey(this._fieldViewMetadata.fieldName):null;if(this.oSmartFilterBar._hasMandatoryFields()){this.oSmartFilterBar.setFilterBarExpanded(true);this.oSmartFilterBar._bShowAllFilters=true;this.oSmartFilterBar.rerenderFilters();}else if(!this.bSupportBasicSearch||(this.oFilterProvider&&this.oFilterProvider._getPreventInitialDataFetchInValueHelpDialog(this._fieldViewMetadata,i))){this.oSmartFilterBar.setFilterBarExpanded(true);}};
o.prototype._onFilterBarSearchPressed=function(){this._rebindTable();};
o.prototype._rebindTable=function(){var p,P,r,s;p=this.oSmartFilterBar.getFilters();s=this.oPrimaryValueListAnnotation.deprecationCodeField;if(s){if((p.length===0)||(p.length>0&&!this._checkForExistingRevokedFilters(p[0],s))){p.push(new h(s,j.NE,k.RevokedCode));}}P=this.oSmartFilterBar.getParameters()||{};if(this.aSelect&&this.aSelect.length){P["select"]=this.aSelect.toString();}r={path:"/"+this.sValueListEntitySetName,filters:p,parameters:P,events:{dataReceived:function(E){this.oValueHelpDialog.TableStateDataFilled();var i=E.getSource();this.oValueHelpDialog.getTableAsync().then(function(t){if(i&&this.oValueHelpDialog&&this.oValueHelpDialog.isOpen()){var u=i.getLength();if(u){this.oValueHelpDialog.update();}else{this.oValueHelpDialog._updateTitles();}}}.bind(this));}.bind(this)}};this.oValueHelpDialog.getTableAsync().then(function(t){t.setShowOverlay(false);this.oValueHelpDialog.TableStateDataSearching();t.setEnableBusyIndicator(true);if(t instanceof b){var E;if(this.sKey&&this._oMetadataAnalyser){E=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sValueListEntitySetName);for(var i=0;i<E.length;i++){if(E[i].name===this.sKey&&E[i].sortable!==false){r.sorter=new g(this.sKey);break;}}}r.factory=function(w,x){var y=t.getModel("columns").getData().cols;return new C({cells:y.map(function(z){var A=z.template;return new c({text:"{"+A+"}"});})});};t.bindItems(r);}else{var u=t.getColumns();for(var i=0;i<u.length;i++){var v=u[i];v._appDefaults=null;}u=t.getSortedColumns();if(!u||u.length==0){u=t.getColumns();}for(var i=0;i<u.length;i++){var v=u[i];if(v.getSorted()){if(!r.sorter){r.sorter=[];}r.sorter.push(new g(v.getSortProperty(),v.getSortOrder()==="Descending"));}}t.bindRows(r);}}.bind(this));};
o.prototype._checkForExistingRevokedFilters=function(i,s){var E=false;if(i.sPath===s&&i.sOperator===V.EQ&&i.oValue1===k.RevokedCode){E=true;}else if(Array.isArray(i.aFilters)){for(var p=0;p<i.aFilters.length;p++){E=this._checkForExistingRevokedFilters(i.aFilters[p],s);if(E){break;}}}return E;};
o.prototype._onFilterBarResetPressed=function(){this._calculateFilterInputData();if(this.oSmartFilterBar){this.oSmartFilterBar.setFilterData(this.mFilterInputData);}};
o.prototype._onFilterBarInitialise=function(){var i=null;this._bIgnoreFilterChange=true;this._onFilterBarResetPressed();delete this._bIgnoreFilterChange;if(this.oSmartFilterBar&&this.oSmartFilterBar.getBasicSearchControl){i=this.oSmartFilterBar.getBasicSearchControl();if(i){i.setValue(this.sBasicSearchText);if(e.system.phone&&i.isA("sap.m.SearchField")){i.setShowSearchButton(true);}}}if(!this.preventInitialDataFetchInValueHelpDialog||this.bForceTriggerDataRetreival){this._rebindTable();this.bForceTriggerDataRetreival=false;}if(e.system.desktop){this._expandFilterBar();}};
o.prototype._onOK=function(p){var _=p.getParameter("_tokensHaveChanged"),t=p.getParameter("tokens"),r,K,i=0,s=[],u=null,v,w={};this._onCancel();if(!_){return;}if(this.oControl.isA("sap.m.MultiInput")){this.oControl.setValue("");this.oControl.destroyTokens();this.oControl.setTokens(t);i=t.length;if(i>0){w.type="added";w.addedTokens=t;}this.oControl.fireTokenUpdate(w);while(i--){u=t[i].data("row");if(u){s.push(u);}}}else{if(t[0]){if(this.bIsSingleIntervalRange){r=t[0].data("range");if(r){if(this._sType==="datetime"){v=d.getDateTimeInstance(Object.assign({},this._oDateFormatSettings,{UTC:false}));if(typeof r.value1==="string"){r.value1=new Date(r.value1);}if(r.operation==="BT"){if(typeof r.value2==="string"){r.value2=new Date(r.value2);}K=v.format(r.value1)+"-"+v.format(r.value2);}else{K=v.format(r.value1);}}else{if(r.operation==="BT"){K=r.value1+"-"+r.value2;}else{K=r.value1;}}}}else{K=t[0].getKey();}u=t[0].data("row");if(u){s.push(u);}t[0].destroy();}if(this.sContext==="SmartField"&&this._selectedODataRowHandler){this._selectedODataRowHandler(K,s[0]);}this.oControl.setValue(K);this.oControl.fireChange({value:K,validated:true});}this._calculateAndSetFilterOutputData(s);};
o.prototype._onCancel=function(){this.oValueHelpDialog.close();this.oValueHelpDialog.setModel(null);};
o.prototype.destroy=function(){if(this.oControl&&this.oControl.detachValueHelpRequest){this.oControl.detachValueHelpRequest(this._fVHRequested);this._fVHRequested=null;}B.prototype.destroy.apply(this,arguments);if(this.oValueHelpDialog){this.oValueHelpDialog.destroy();this.oValueHelpDialog=null;}if(this.oSmartFilterBar){this.oSmartFilterBar.destroy();this.oSmartFilterBar=null;}this.sTitle=null;};
return o;});
sap.ui.predefine('sap/ui/comp/providers/ValueListProvider',['sap/ui/core/library','sap/ui/comp/library','sap/m/library','sap/ui/comp/odata/MetadataAnalyser','sap/ui/comp/util/DateTimeUtil','sap/ui/core/SeparatorItem','sap/m/GroupHeaderListItem','sap/m/Column','sap/m/ColumnListItem','sap/m/Text','sap/m/Token','./BaseValueListProvider','sap/ui/core/ListItem','sap/ui/model/Filter','sap/ui/model/Sorter','sap/ui/model/json/JSONModel','sap/ui/model/FilterOperator','sap/ui/comp/util/FormatUtil','sap/ui/comp/smartfilterbar/FilterProvider','sap/ui/comp/historyvalues/HistoryValuesProvider','sap/ui/comp/historyvalues/HistoryOptOutProvider','sap/ui/comp/historyvalues/Constants','sap/m/ComboBox','sap/m/MultiComboBox','sap/base/util/deepEqual','sap/ui/Device','sap/base/Log','sap/base/util/values','sap/m/Label','sap/base/strings/whitespaceReplacer'],function(c,l,L,M,D,S,G,C,d,T,e,B,f,F,g,J,h,j,k,H,m,n,o,p,q,r,s,v,t,w){"use strict";var u=l.smartfilterbar.DisplayBehaviour;var P=L.PopinDisplay;var W=L.WrappingType;var V=c.ValueState;var y={Recommendations:10,RecentlyUsed:20,Others:30};var z="list";
var A=B.extend("sap.ui.comp.providers.ValueListProvider",{constructor:function(a){if(!k){k=sap.ui.require("sap/ui/comp/smartfilterbar/FilterProvider");}if(a){this.sAggregationName=a.aggregation;this.bTypeAheadEnabled=!!a.typeAheadEnabled;this.bEnableShowTableSuggestionValueHelp=a.enableShowTableSuggestionValueHelp===undefined?true:a.enableShowTableSuggestionValueHelp;this.dropdownItemKeyType=a.dropdownItemKeyType;this.sDeferredGroupId=a.deferredGroupId;this._fieldHistoryEnabled=a.fieldHistoryEnabled;this._fieldHistoryEnabledInitial=a.fieldHistoryEnabledInitial;}this._aRecommendations=[];this._oRecommendationListPromise=Promise.resolve();this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._groupHeaderFactory=this._groupHeaderFactory.bind(this);B.apply(this,arguments);this._onInitialise();}});
A.prototype._onInitialise=function(){if(!this.bTypeAheadEnabled){this.oAfterRenderingEventDelegate={onAfterRendering:this._onMetadataInitialised};this.oControl.addEventDelegate(this.oAfterRenderingEventDelegate,this);}else if(this.oControl.attachSuggest){this._fSuggest=function(E){this.oControl=E.getSource();if(!this.bInitialised){return;}if(!this._oTemplate||!this.oControl.data("_hassuggestionTemplate")){this._createSuggestionTemplate();}var i=E.getParameter("suggestValue");this._fetchData(i);}.bind(this);this.oControl.attachSuggest(this._fSuggest);if(!this.oFilterModel){var a=this;var b=this.oControl.setParent;this.oControl.setParent=function(N,i,x){var O=this.getParent();var R=b.apply(this,arguments);N=this.getParent();var E=!(N&&(O===null));if((N!==O)&&E){a.unbindAggregation();}return R;};}this._handleSelect();}this.oControl.setModel(new J(),z);this._setupHistoryValues();this._setupRecommendations();};
A.prototype._onMetadataInitialised=function(){if(this.bInitialised){if(this.oAfterRenderingEventDelegate){this.oControl.removeEventDelegate(this.oAfterRenderingEventDelegate);}if(this.oPrimaryValueListAnnotation){if(this.sAggregationName&&this.sAggregationName=="suggestionRows"){this._createSuggestionTemplate();}else{this._createDropDownTemplate();}this._fetchData();if(this._isControlDropdown()){if(this.mOutParams&&Object.keys(this.mOutParams).length>1){this._handleOutParameters();}if(this.mInParams&&Object.keys(this.mInParams).length>1){this._handleInParameters();}}}else{s.error("ValueListProvider","Missing primary ValueListAnnotation for "+(this._sFullyQualifiedFieldName||this.sFieldName));}if(this.oAfterRenderingEventDelegate){delete this.oAfterRenderingEventDelegate;}}};
A.prototype._onAnnotationLoad=function(a){var b=B.prototype._onAnnotationLoad.call(this,a);if(!this._isControlSupportedForHistory(this.oControl)){return b;}if(this._shouldHaveRecommendations()||this._shouldHaveHistory()){this._setupSuggestionInteractions();}return b;};
A.prototype._isSortable=function(N){if(this.oPrimaryValueListAnnotation){for(var i=0;i<this.oPrimaryValueListAnnotation.valueListFields.length;i++){if(this.oPrimaryValueListAnnotation.valueListFields[i].name===N){return this.oPrimaryValueListAnnotation.valueListFields[i].sortable!==false;}}return false;}return false;};
A.prototype._createDropDownTemplate=function(){this._oTemplate=new f({key:{path:this._resolveSuggestionBindingPath(this.sKey),type:this.dropdownItemKeyType},text:{parts:[{path:this._resolveSuggestionBindingPath(this.sKey),type:this.dropdownItemKeyType},{path:this._resolveSuggestionBindingPath(this.sDescription)}],formatter:function(K,a){var b=j.getFormatterFunctionFromDisplayBehaviour(this.sDDLBDisplayBehaviour),i=b(K,a);return w(i);}.bind(this)}});if(this._oRecommendationListAnnotation){this._oTemplate.bindProperty("additionalText",{path:this._resolveSuggestionBindingPath(this._oRecommendationListAnnotation.rankProperty)});}this._oSorter=null;if(this.sDDLBDisplayBehaviour===u.idOnly||this.sDDLBDisplayBehaviour===u.idAndDescription){if(this._isSortable(this.sKey)){this._oSorter=new g(this.sKey);}}else{if(this._isSortable(this.sDescription)){this._oSorter=new g(this.sDescription);}else if((this.sDescription!==this.sKey)&&this._isSortable(this.sKey)){this._oSorter=new g(this.sKey);}}};
A.prototype._createSuggestionTemplate=function(){var i=0,a=0,b=0,x=this._aHighImportanceCols||this._aRecommendationCols||this._aCols;this._oTemplate=new d();if(x){this.oControl.removeAllSuggestionColumns();a=x.length;for(i=0;i<a;i++){var E=false,I="1px",K=x[i].width;if(r.system.phone){K=undefined;if(i>=2){E=true;I=(i+1)*10+"rem";}}this.oControl.addSuggestionColumn(new C({header:new t({wrapping:true,wrappingType:W.Hyphenated,text:x[i].label}),demandPopin:E,popinDisplay:P.Inline,minScreenWidth:I,width:K}));this._oTemplate.addCell(new t({wrapping:true,text:{path:this._resolveSuggestionBindingPath(x[i].template),type:x[i].oType,formatter:function(N){return w(N);}}}));if(K){b+=parseFloat(K.substring(0,K.length-2));}}if(b>0){this.oControl.setProperty('maxSuggestionWidth',b+a+"em",true);}}this.oControl.data("_hassuggestionTemplate",true);if(this.oControl&&this.oControl._oSuggestionTable){this.oControl._oSuggestionTable.addStyleClass("sapUiCompValueListProviderTable");}};
A.prototype._handleRowSelect=function(a,b){var K,i,x;if(a){K=a[this.sKey];i=a[this.sDescription];}if(K||(K==="")){if(this.oControl.addToken){i=j.getFormattedExpressionFromDisplayBehaviour(this.sTokenDisplayBehaviour,K,i);x=new e();x.setKey(K);x.setText(i);x.setTooltip(i);x.data("row",a);if(b){b(x);}if(this.oControl.getValue()===""){this.oControl.setValue("");}delete this.oControl.__sValidationText;}else{if(this.sContext==="SmartField"&&this._selectedODataRowHandler){this._selectedODataRowHandler(K,a);}this.oControl.setValue(K);this.oControl.fireChange({value:K,validated:true});}}this._calculateAndSetFilterOutputData([a]);};
A.prototype._multiInputValidator=function(a){if(!this.bInitialised){return;}if(this._aValidators){var b;this._aValidators.some(function(K){b=K(a);return b;},this);if(b){return b;}}var R=a.suggestionObject,i,I=a.text;if(R){var x=this._getSuggestionsModelName(),E=R.getBindingContext(x);i=E.getObject();this._handleRowSelect(i,a.asyncCallback);}else if(I){this._validateInput(I,a.asyncCallback);}};
A.prototype._validateInput=function(i,a){var b,x=[],E=this.oControl,I;if(this.sDisplayFormat==="UpperCase"){i=i.toUpperCase();}if(E.__sValidationText!==i){E.__sValidationText=i;if(i===this._truncateSearchText(i)){E.__bValidatingToken=true;this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){x=k.generateFilters(this.aFilterField,this.mFilterInputData);}x.push(new F(this.sKey,h.EQ,i));if(this.bSupportBasicSearch){I={"search-focus":this.sKey};}b=new Promise(function(R,K){this.oODataModel.read("/"+this.sValueListEntitySetName,{filters:x,urlParameters:I,success:function(N){if(!this.oControl||!this.oControl.hasOwnProperty("__bValidatingToken")){return;}var O=N;delete this.oControl.__bValidatingToken;if(N){if(N.results&&N.results.length>=1){if(N.results.length===1){O=N.results[0];}if(this.oControl.data("__validationError")){this.oControl.data("__validationError",null);this.oControl.setValueState("None");}}else{this.oControl.setValueState("Error");this.oControl.data("__validationError",true);}if(O&&O[this.sKey]){E._pendingAutoTokenGeneration=true;this._handleRowSelect(O,a);E._pendingAutoTokenGeneration=false;}}this._afterTokenValidate();R();}.bind(this),error:function(){if(this.oControl.data("__validationError")){this.oControl.setValueState("None");}delete this.oControl.__bValidatingToken;this._afterTokenValidate();R();}.bind(this)});}.bind(this));this._addValidationPromise(b);}}else{if(E.data("__validationError")){E.setValueState(V.Error);}}};
A.prototype._validateStringSingleWithValueList=function(E){var a;if(E.getParameter("validated")){return;}a=E.getParameter("value");if(a===""||a===undefined){return;}this._validateInput(a);};
A.prototype._afterTokenValidate=function(){if(this.oFilterProvider&&this.oFilterProvider._oSmartFilter&&this.oFilterProvider._oSmartFilter.bIsSearchPending&&this.oFilterProvider._oSmartFilter.search){if(this.oFilterProvider._oSmartFilter.getLiveMode&&this.oFilterProvider._oSmartFilter.getLiveMode()){return;}this.oFilterProvider._oSmartFilter.search();}};
A.prototype._onSuggestionItemSelected=function(E){var R=E.getParameter("selectedRow");if(R){var a=this._getSuggestionsModelName();this._handleRowSelect(R.getBindingContext(a).getObject());}};
A.prototype._setFilterOutputDataFromSelectedRow=function(R){var a,b,i;if(R){a=this._getSuggestionsModelName();b=R.getBindingContext(a);i=b.getObject();this._calculateAndSetFilterOutputData([i]);}};
A.prototype._onMultiComboBoxItemSelected=function(E){if(!E.getParameter("selected")){return;}var R=E.getParameter("changedItem");this._setFilterOutputDataFromSelectedRow(R);};
A.prototype._onComboBoxItemSelected=function(E){var a=E.getParameter("value"),N=E.getParameter("newValue"),b=E.getParameter("filterChangeReason");if(b&&!a&&!N){return;}var R=this.oControl.getSelectedItem();this._setFilterOutputDataFromSelectedRow(R);};
A.prototype._handleSelect=function(){if(this.oControl.addValidator){this._aValidators=this.oControl&&this.oControl.isA('sap.m.MultiInput')?this.oControl.getValidators().slice():[];this.oControl.removeAllValidators();this._fValidator=this._multiInputValidator.bind(this);this.oControl.addValidator(this._fValidator);}else if(this.oControl.attachSuggestionItemSelected){this.oControl.attachSuggestionItemSelected(this._onSuggestionItemSelected,this);if(this.sContext==="SmartFilterBar"&&this._fieldViewMetadata&&this._fieldViewMetadata.hasValueListAnnotation){this.oControl.attachChange(this._validateStringSingleWithValueList,this);}}if(this.oControl.setRowResultFunction){this.oControl.setRowResultFunction(function(a){var b,R="",i=this._getSuggestionsModelName();if(a){b=a.getBindingContext(i);}if(b&&this.sKey){R=b.getProperty(this.sKey);}return R;}.bind(this));}};
A.prototype._filterDropdownRowsByInParameters=function(){this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){this.oControl.setBusy(true);this._fetchData();this._mLastFilterInputData=this.mFilterInputData;this._cleanupControlSelection();}};
A.prototype.isInSmartFilterBar=function(){return!!this.oFilterModel;};
A.prototype._isControlDropdown=function(a){if(!a){a=this.oControl;}return!!(a.isA("sap.m.MultiComboBox")||a.isA("sap.m.ComboBox"));};
A.prototype._cleanupControlSelection=function(){if(this.isInSmartFilterBar()&&this.oControl.isA("sap.m.MultiComboBox")){this.oFilterModel.setProperty("/"+this.sFieldName+"/items",[]);this.oControl.setSelectedKeys(null);}else{this.oControl.setSelectedKey(null);this.oControl.clearSelection();}};
A.prototype._openDropdown=function(){if(this.oControl.isA("sap.m.MultiComboBox")){p.prototype.open.apply(this.oControl,arguments);}else if(this.oControl.isA("sap.m.ComboBox")){o.prototype.open.apply(this.oControl,arguments);}};
A.prototype._handleOutParameters=function(){if(this.oControl.isA("sap.m.MultiComboBox")){this.oControl.attachSelectionChange(this._onMultiComboBoxItemSelected,this);}else if(this.oControl.isA("sap.m.ComboBox")){this.oControl.attachChange(this._onComboBoxItemSelected,this);}};
A.prototype._handleInParameters=function(){this.oControl.setBusyIndicatorDelay(0);this._calculateFilterInputData();this._mLastFilterInputData=this.mFilterInputData;this.oControl.open=function(){this._calculateFilterInputData();if(q(this._mLastFilterInputData,this.mFilterInputData)){this._openDropdown();return;}this._filterDropdownRowsByInParameters();this._openDropdown();}.bind(this);this.oControl.addEventDelegate({onmousedown:function(E){if(E.target===this.oControl.getIcon().getFocusDomRef()){this._bSkipFocusIn=true;}}.bind(this),onmouseup:function(E){if(this._bSkipFocusIn&&E.target===this.oControl.getIcon().getFocusDomRef()){this.oControl.open();}this._bSkipFocusIn=false;}.bind(this),onfocusin:function(E){if(this._bSkipFocusIn){return E;}setTimeout(function(){this._calculateFilterInputData();if(q(this._mLastFilterInputData,this.mFilterInputData)){return;}this._filterDropdownRowsByInParameters();}.bind(this));return E;}.bind(this)});};
A.prototype._fetchData=function(a){var b={},i=[],x=this._getBindingLength(),E="",I,K;a=a||"";if(this.bTypeAheadEnabled){if(a&&this.sDisplayFormat==="UpperCase"){a=a.toUpperCase();}if(this.bSupportBasicSearch){if(this._shouldHaveRecommendations()||this._shouldHaveHistory()){b={"search-focus":this.sKey,"search":a};}else{b.custom={"search-focus":this.sKey,"search":a};}}this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){i=k.generateFilters(this.aFilterField,this.mFilterInputData,{dateSettings:this._oDateFormatSettings});}if(!this.bSupportBasicSearch){if(this._fieldViewMetadata&&this._fieldViewMetadata.filterType==="numc"){i.push(new F(this.sKey,h.Contains,a));}else{E=this._truncateSearchText(a);if(E===a){i.push(new F(this.sKey,h.StartsWith,E));}else{this.oControl.closeSuggestions();return;}}}x=10;}b["$top"]=x;b["$skip"]=0;if(!this.sValueListEntitySetName){s.error("ValueListProvider","Empty sValueListEntitySetName for "+this.sAggregationName+" binding! (missing primaryValueListAnnotation)");}if(this.sDeferredGroupId){b["batchGroupId"]=this.sDeferredGroupId;}if(this.aSelect&&this.aSelect.length){b["$select"]=this.aSelect.toString();}if(!(this._shouldHaveRecommendations()||this._shouldHaveHistory())||!this._isControlSupportedForHistory(this.oControl)){if(this.bTypeAheadEnabled&&this.bEnableShowTableSuggestionValueHelp){K={dataReceived:function(Q){var R=Q.getSource(),U;if(R){U=R.getLength();if(U&&U<=x){this.oControl.setShowTableSuggestionValueHelp(false);}else{this.oControl.setShowTableSuggestionValueHelp(true);}}}.bind(this)};}else if(this.bTypeAheadEnabled){this.oControl.setShowTableSuggestionValueHelp(false);}if(this.aSelect&&this.aSelect.length){b["select"]=this.aSelect.toString();delete b["$select"];}if(this._isControlDropdown(this.oControl)&&(this.mInParams&&Object.keys(this.mInParams).length>1||this.mConstParams&&Object.keys(this.mConstParams).length>=1)){if(!K){K={dataReceived:function(){this.oControl.setBusy(false);}.bind(this)};}this._calculateFilterInputData();if(this.mFilterInputData&&this.aFilterField){i=k.generateFilters(this.aFilterField,this.mFilterInputData,{dateSettings:this._oDateFormatSettings});}}this.oControl.bindAggregation(this.sAggregationName,{path:"/"+this.sValueListEntitySetName,length:x,parameters:b,filters:i,sorter:this._oSorter,events:K,template:this._oTemplate,templateShareable:true});return;}this._bindInnerControlSuggestions();var N=this;I=new Promise(function(Q,R){if(!N.sValueListEntitySetName){Q({results:[]});}N.oODataModel.read("/"+N.sValueListEntitySetName,{urlParameters:b,filters:i,sorters:N._oSorter&&[N._oSorter],success:function(U){Q(U);},error:function(U){R(U);}});});var O=Promise.resolve([]);if(this._shouldHaveHistory()){O=N._oHistoryValuesProvider.getFieldData();}Promise.all([I,this._oRecommendationListPromise,O]).then(function(R){var Q=[],U=[],X=[],Y=[],Z=N._getSuggestionsModelName(),$=N.oControl;if(!$){return;}var _=$.getModel(Z);if(Array.isArray(R[0]&&R[0].results)){U=N._addSuggestionsToGroup(R[0].results,y.Others);}if(Array.isArray(R[1]&&R[1].results)){X=N._addSuggestionsToGroup(R[1].results,y.Recommendations);}if(N._shouldHaveHistory()&&Array.isArray(R[2])){Y=N._addSuggestionsToGroup(R[2],y.RecentlyUsed);Y=N._parseHistoryJsonDates(Y);}Q=Q.concat(X).concat(Y).concat(U);Q=N._getDistinctSuggestions(Q);Q=Q.filter(N._filterSuggestionsWithInParams.bind(N,N.mFilterInputData));N._showSuggestionsMoreButton(U.length>=x);if(N.oControl.isA("sap.m.MultiInput")){N.oControl._oSuggPopover._oProposedItem=null;}_.setData(Q);});};
A.prototype._sortRecommendations=function(a,b){var R=this._oRecommendationListAnnotation.rankProperty,i=parseFloat(a[R]),x=parseFloat(b[R]);return x-i;};
A.prototype._showSuggestionsMoreButton=function(b){if(!this.bTypeAheadEnabled){return;}if(this.bEnableShowTableSuggestionValueHelp){this.oControl.setShowTableSuggestionValueHelp(b);}else{this.oControl.setShowTableSuggestionValueHelp(false);}};
A.prototype._addSuggestionsToGroup=function(a,i){if(!a){return[];}return a.map(function(b){var x={};x[n.getSuggestionsGroupPropertyName()]=i;return Object.assign({},b,x);});};
A.prototype._groupHeaderFactory=function(a){var b=this._getGroupHeaderTitle(a.key);if(this._isControlDropdown()){return new S({key:n.getHistoryPrefix()+a.key+".key",text:b});}return new G({title:b});};
A.prototype._getGroupHeaderTitle=function(a){switch(a){case y.Recommendations:return this._oResourceBundle.getText("VALUELIST_RECOMMENDATIONS_TITLE");case y.RecentlyUsed:return this._oResourceBundle.getText("VALUELIST_RECENTLY_USED_TITLE");default:return this._oResourceBundle.getText("VALUELIST_OTHERS_TITLE");}};
A.prototype._getGroupHeaderSorter=function(){if(this._groupHeaderSorter){return this._groupHeaderSorter;}this._groupHeaderSorter=new g({path:n.getSuggestionsGroupPropertyName(),descending:false,group:function(a){return a.getProperty(n.getSuggestionsGroupPropertyName());}});return this._groupHeaderSorter;};
A.prototype._getDistinctSuggestions=function(a){var U={},b=[];a.forEach(function(x){var i=Object.assign({},x);delete i[n.getSuggestionsGroupPropertyName()];delete i.__metadata;var K=v(i).join();if(!U[K]){b.push(x);U[K]=true;}},this);return b;};
A.prototype._resolveRecommendationListAnnotationData=function(R){var a=R.fieldsToDisplay,b,x,E;this._aRecommendationCols=[];this.aRecommendationSelect=[];for(var i=0;i<a.length;i++){b=a[i];x=this._getColumnConfigFromField(b);if(b.visible){this._aRecommendationCols.push(x);this.aRecommendationSelect.push(b.name);}}if(this._aHighImportanceCols&&this._oRecommendationListAnnotation){E=this._oRecommendationListAnnotation.rankField[0];E=this._getColumnConfigFromField(E);this._aHighImportanceCols.push(E);}};
A.prototype._setupRecommendations=function(){if(!this._shouldHaveRecommendations()||!this._isControlSupportedForHistory(this.oControl)){return;}this._resolveRecommendationListAnnotationData(this._getRecommendationListAnnotation());this._fetchRecommendations();};
A.prototype._shouldHaveRecommendations=function(){return M.isRecommendationList(this._fieldViewMetadata);};
A.prototype._getRecommendationListAnnotation=function(){if(!this._oRecommendationListAnnotation){var R=this._oMetadataAnalyser._getRecommendationListAnnotation(this._sFullyQualifiedFieldName);this._oRecommendationListAnnotation=this._oMetadataAnalyser._enrichRecommendationListAnnotation(R);}return this._oRecommendationListAnnotation;};
A.prototype._fetchRecommendations=function(){var a=this;this._oRecommendationListPromise=new Promise(function(b,i){a.oODataModel.read("/"+a._oRecommendationListAnnotation.path,{urlParameters:{$skip:0,$top:5,$select:a.aRecommendationSelect.toString()},sorter:a._oSorter,success:function(x){var R=a._addSuggestionsToGroup(x.results,y.Recommendations),E=a._getSuggestionsModelName(),I=a.oControl.getModel(E),K=I.getData(),N=R.sort(a._sortRecommendations.bind(a));a._aRecommendations=N;if(Array.isArray(K)){N=[].concat(K).concat(N);}I.setData(N);a._showSuggestionsMoreButton(false);b(x);},error:function(x){i(x);}});});};
A.prototype._createHistoryValuesProvider=function(){return new H(this.oControl,this._sFullyQualifiedFieldName);};
A.prototype._createHistoryOptOutProvider=function(){return m.createOptOutSettingPage();};
A.prototype._setupHistoryValues=function(){if(!this._shouldHaveHistory()||!this._isControlSupportedForHistory(this.oControl)){return;}this._oHistoryValuesProvider=this._createHistoryValuesProvider();this._createHistoryOptOutProvider();this._oHistoryValuesProvider.getHistoryEnabled().then(function(E){if(!E||!this._oHistoryValuesProvider){return;}this._oHistoryValuesProvider.attachChangeListener();this._oHistoryValuesProvider.attachEvent("fieldUpdated",this._onHistoryFieldUpdated,this);this._oHistoryValuesProvider.getFieldData().then(this._onHistoryDataInitialized.bind(this));}.bind(this));};
A.prototype._onHistoryDataInitialized=function(a){this._updateModelHistoryData(a);return a;};
A.prototype._onHistoryFieldUpdated=function(E){var a=E.getParameter("fieldData")||[];if(this.oControl.isA("sap.m.Input")){setTimeout(function(){this._updateModelHistoryData(a);this.oControl&&this.oControl._oSuggPopover._oPopover.close();}.bind(this));return;}this._updateModelHistoryData(a);if(this.oControl.isA("sap.m.ComboBox")){setTimeout(function(){this.oControl&&this.oControl._oSuggestionPopover._oPopover.close();}.bind(this));}};
A.prototype._updateModelHistoryData=function(a){if(!this.oControl){return;}a=this._parseHistoryJsonDates(a);var b=[],R=this._addSuggestionsToGroup(a,y.RecentlyUsed),i=this._getSuggestionsModelName(),x=this.oControl.getModel(i),O=x.getData();if(!Array.isArray(O)){O=[];}b=this._getDistinctSuggestions(b.concat(R).concat(O));x.setData(b);this._showSuggestionsMoreButton(false);};
A.prototype._shouldHaveHistory=function(){if(!this._fieldHistoryEnabled||!this._fieldViewMetadata||!this._sFullyQualifiedFieldName||!this.oControl||(this._isControlDropdown()&&(this._fieldHistoryEnabledInitial||this._fieldHistoryEnabledInitial===undefined)&&this._fieldHistoryEnabled)){return false;}var a=window["sap-ushell-config"],b,i,E;if(a){b=a.apps;}if(b){i=b.inputFieldHistory;}if(i){E=i.enabled;}return sap.ushell&&sap.ushell.Container&&E&&!M.isPotentiallySensitive(this._fieldViewMetadata);};
A.prototype._bindInnerControlSuggestions=function(){if(this.sAggregationName&&this.oControl.isBound(this.sAggregationName)){return;}if(this.sAggregationName&&this.sAggregationName==="suggestionRows"){this._createSuggestionTemplate();}else{this._createDropDownTemplate();}var b={path:this._getSuggestionsModelName()+">/",template:this._oTemplate,templateShareable:true,length:this._getBindingLength()};b.groupHeaderFactory=this._groupHeaderFactory;b.sorter=this._getGroupHeaderSorter();if(this.sAggregationName){this.oControl.bindAggregation(this.sAggregationName,b);}};
A.prototype._setupSuggestionInteractions=function(){if(this.sAggregationName==="suggestionRows"){this._setupInputSuggestionInteractions();return;}this._setupComboBoxSuggestionInteractions();};
A.prototype._setupInputSuggestionInteractions=function(){var i=this.oControl;i.setFilterSuggests(true);i.setFilterFunction(function(a,I){var b=this._getSuggestionsModelName(),x=I.getBindingContext(b).getObject(),K=x[this.sKey],E=x[this.sDescription],N=j.getFormatterFunctionFromDisplayBehaviour(this.sDDLBDisplayBehaviour),O=N(K,E);a=a.replace(/\*$/,"");a=a.replace(/^\*/,"");var Q=Object.keys(x).some(function(K){var U=x[K]+"";return U.toLowerCase().indexOf(a.toLowerCase())!==-1;});var R=O.toLowerCase().indexOf(a.toLowerCase())!==-1;return Q||R;}.bind(this));i.attachLiveChange(function(E){var a=E.getParameter("value"),b=[y.RecentlyUsed,y.Recommendations];if(a===""){this.oControl._oSuggPopover._oPopover.close();this._showInitialSuggestions(b);}},this);i.addEventDelegate({onmousedown:function(E){if((this.oControl.getAggregation("_suggestionPopup")&&this.oControl.getAggregation("_suggestionPopup").isOpen())||E.target.tagName!=="INPUT"){return;}this._bindInnerControlSuggestions();setTimeout(function(){this._showInitialSuggestions("suggestionRows",i.getValue());}.bind(this));},onkeyup:function(E){this._bindInnerControlSuggestions();if(E.keyCode!==9){return;}setTimeout(function(){this._showInitialSuggestions("suggestionRows",i.getValue());}.bind(this));}},this);if(i.isA("sap.m.MultiInput")||!this._shouldHaveRecommendations()){return;}i.attachSuggestionItemSelected(function(E){var a=this._getSuggestionsModelName(),b=E.getParameter("selectedRow"),I;if(b){var x=b.getBindingContext(a).getObject();I=x&&x[this.sKey];}if(this._isNotRecommendationItemSelected("suggestionRows",I)){this._setControlValueState(V.Warning);}else{this._setControlValueState(V.None);}},this);};
A.prototype._setupComboBoxSuggestionInteractions=function(){var a=this.oControl;a.setShowSecondaryValues(true);a.addEventDelegate({onmousedown:function(E){if((this.oControl.getPicker()&&this.oControl.getPicker().isOpen())||E.target.tagName!=="INPUT"){return;}this._bindInnerControlSuggestions();setTimeout(function(){this._showInitialSuggestions("items",a.getValue());}.bind(this));},onkeyup:function(E){this._bindInnerControlSuggestions();if(E.keyCode!==9){return;}setTimeout(function(){this._showInitialSuggestions("items",a.getValue());}.bind(this));}},this);if(a.isA("sap.m.MultiComboBox")||!this._shouldHaveRecommendations()){return;}a.attachChange(function(E){if(this._isNotRecommendationItemSelected("items",E.getParameter("value"))){this._setControlValueState(V.Warning);}else{this._setControlValueState(V.None);}},this);};
A.prototype._isNotRecommendationItemSelected=function(a,b){return this._findSuggestionItemGroup(a,b)!==y.Recommendations;};
A.prototype._findSuggestionItemGroup=function(a,b){var x=this.oControl.getBinding(a),I=x?x.getCurrentContexts():[],E;for(var i=0;i<I.length;i++){var K=I[i].getObject(),N=K[this.sKey],O=K[this.sDescription];if(N===b||O===b){E=K;break;}}return E?E[n.getSuggestionsGroupPropertyName()]:null;};
A.prototype._setControlValueState=function(a){this.oControl.setValueState(a?a:V.None);this.oControl.setValueStateText(" ");};
A.prototype._showInitialSuggestions=function(a,b){var i=this,x=[y.RecentlyUsed,y.Recommendations],E=[y.RecentlyUsed],I=[];if(this._isNotRecommendationItemSelected(a,b)){I=x;}else if(this._shouldHaveHistory()){I=E;}this._calculateFilterInputData();this.oControl.showItems(function(b,K){var N=i._getSuggestionsModelName(),O=K.getBindingContext(N),Q=O?O.getObject():{},R=Q[n.getSuggestionsGroupPropertyName()];return i._filterSuggestionsWithInParams(i.mFilterInputData,Q)&&I.indexOf(R)!==-1;});};
A.prototype._filterSuggestionsWithInParams=function(a,i){if(!a||a.length===0){return true;}return Object.keys(a).every(function(K){var b=i[K];var x=a[K];if(!b){return true;}if(typeof x==="string"){return x===b;}if(typeof x==="object"&&x.items&&x.items.length>0){return x.items.some(function(E){return E.key===b;});}return true;});};
A.prototype._getSuggestionsModelName=function(){var a;if(!this._isControlSupportedForHistory(this.oControl)){return a;}if(this._shouldHaveRecommendations()||this._shouldHaveHistory()){a=z;}return a;};
A.prototype._resolveSuggestionBindingPath=function(a){var b=this._getSuggestionsModelName();if(b){a=b+">"+a;}return a;};
A.prototype._isControlSupportedForHistory=function(a){if(!a){return false;}if(a.isA("sap.ui.comp.smartfield.DisplayComboBox")){return false;}if(a.isA("sap.m.ComboBox")||a.isA("sap.m.MultiComboBox")||a.isA("sap.m.Input")||a.isA("sap.m.MultiInput")){return true;}return false;};
A.prototype._getBindingLength=function(){var i=300;if(this.oODataModel&&this.oODataModel.iSizeLimit&&this.oODataModel.iSizeLimit>i){i=this.oODataModel.iSizeLimit;}return i;};
A.prototype._parseHistoryJsonDates=function(a){return a.map(function(i){return Object.keys(i).reduce(function(R,K){if(D._hasJsonDateString(i[K])){R[K]=D._parseJsonDateString(i[K]);}else{R[K]=i[K];}return R;},{});});};
A.prototype._truncateSearchText=function(a){var i=-1;if(this._sMaxLength){i=parseInt(this._sMaxLength);}else if(this._fieldViewMetadata&&this._fieldViewMetadata.maxLength){i=parseInt(this._fieldViewMetadata.maxLength);}if(i>-1&&a.length>i){a=a.substr(0,i);}return a;};
A.prototype.unbindAggregation=function(){if(this.oControl){this.oControl.unbindAggregation(this.sAggregationName);}return this;};
A.prototype.destroy=function(){if(this.oControl){if(this.oControl.detachSuggest&&this._fSuggest){this.oControl.detachSuggest(this._fSuggest);this._fSuggest=null;}if(this.oControl.removeValidator&&this._fValidator){this.oControl.removeValidator(this._fValidator);this._fValidator=null;}else if(this.oControl.detachSuggestionItemSelected){this.oControl.detachSuggestionItemSelected(this._onSuggestionItemSelected,this);}if(this.oControl.detachChange){this.oControl.detachChange(this._validateStringSingleWithValueList,this);}this.oControl.unbindAggregation(this.sAggregationName);this.oControl.data("_hassuggestionTemplate",false);delete this.oControl.__sValidationText;delete this.oControl.__bValidatingToken;}if(this._oHistoryValuesProvider){this._oHistoryValuesProvider.destroy();this._oHistoryValuesProvider=null;}B.prototype.destroy.apply(this,arguments);if(this.oJsonModel){this.oJsonModel.destroy();this.oJsonModel=null;}if(this._oTemplate){this._oTemplate.destroy();}this._oTemplate=null;this.sAggregationName=null;this.bTypeAheadEnabled=null;this._oSorter=null;};
return A;});
sap.ui.predefine('sap/ui/comp/smartfield/ComboBox',["sap/ui/comp/library","sap/m/ComboBox","sap/m/ComboBoxRenderer"],function(l,B,C){"use strict";var d="00000000-0000-0000-0000-000000000000";
function i(v){return v===d;}
var a=B.extend("sap.ui.comp.smartfield.ComboBox",{
metadata:{library:"sap.ui.comp",properties:{enteredValue:{type:"string",group:"Data",defaultValue:""}}},
renderer:C
});
a.prototype.setEnteredValue=function(v){if(typeof v!=="undefined"){this.setSelectedKey(v);}var s=this.getSelectedItem();if(v&&!s&&!i(v)){this.setValue(v);}var e=s?this.getSelectedKey():this.getValue();this.setProperty("enteredValue",e);return this;};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/Configuration',["sap/ui/comp/library","sap/ui/core/Element"],function(l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfield.Configuration",{metadata:{library:"sap.ui.comp",properties:{controlType:{type:"sap.ui.comp.smartfield.ControlType",group:"Misc",defaultValue:null},displayBehaviour:{type:"sap.ui.comp.smartfield.DisplayBehaviour",group:"Misc",defaultValue:null},preventInitialDataFetchInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:false}}}});
return C;});
sap.ui.predefine('sap/ui/comp/smartfield/ObjectStatus',["sap/ui/comp/library","sap/ui/core/Element"],function(l,E){"use strict";
var O=E.extend("sap.ui.comp.smartfield.ObjectStatus",{metadata:{library:"sap.ui.comp",properties:{criticality:{type:"any",group:"Misc",defaultValue:null},criticalityRepresentationType:{type:"sap.ui.comp.smartfield.CriticalityRepresentationType",group:"Misc",defaultValue:l.smartfield.CriticalityRepresentationType.WithIcon}}}});
return O;});
sap.ui.predefine('sap/ui/comp/smartfield/SmartField',["sap/ui/core/Core","sap/ui/core/library","sap/ui/comp/library","./JSONControlFactory","./ODataControlFactory","./BindingUtil","./SideEffectUtil","./ODataHelper","sap/ui/core/Control","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/ui/model/json/JSONModel","sap/ui/model/BindingMode","sap/base/strings/capitalize","sap/base/Log","sap/m/DisplayListItem","sap/m/InputListItem"],function(C,c,l,J,O,B,S,a,b,P,V,d,e,f,L,D,I){"use strict";var g=c.ValueState;var T=l.smartfield.TextInEditModeSource;var h=l.smartfield.Importance;var k=c.TextAlign;var m=c.TextDirection;var n=l.smartfield.ControlContextType;var o=l.smartfield.ControlProposalType;
var p=b.extend("sap.ui.comp.smartfield.SmartField",{
metadata:{interfaces:["sap.ui.core.IFormContent","sap.ui.core.ISemanticFormContent"],library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartfield/SmartField.designtime",properties:{value:{type:"any",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},entitySet:{type:"string",group:"Misc",defaultValue:""},editable:{type:"boolean",group:"Misc",defaultValue:true},contextEditable:{type:"boolean",group:"Misc",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Misc",defaultValue:""},textAlign:{type:"sap.ui.core.TextAlign",group:"Misc",defaultValue:k.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:m.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},name:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:g.None},valueStateText:{type:"string",group:"Appearance",defaultValue:""},showValueStateMessage:{type:"boolean",group:"Appearance",defaultValue:true},jsontype:{type:"sap.ui.comp.smartfield.JSONType",group:"Misc",defaultValue:null},mandatory:{type:"boolean",group:"Misc",defaultValue:false},maxLength:{type:"int",group:"Misc",defaultValue:0},showSuggestion:{type:"boolean",group:"Misc",defaultValue:true},showValueHelp:{type:"boolean",group:"Misc",defaultValue:true},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},textLabel:{type:"string",group:"Misc",defaultValue:""},tooltipLabel:{type:"string",group:"Misc",defaultValue:""},uomVisible:{type:"boolean",group:"Misc",defaultValue:true},uomEditable:{type:"boolean",group:"Misc",defaultValue:true},uomEnabled:{type:"boolean",group:"Misc",defaultValue:true},url:{type:"string",group:"Misc",defaultValue:""},uomEditState:{type:"int",group:"Misc",defaultValue:-1},controlContext:{type:"sap.ui.comp.smartfield.ControlContextType",group:"Misc",defaultValue:n.None},proposedControl:{type:"sap.ui.comp.smartfield.ControlProposalType",group:"Misc",defaultValue:o.None},wrapping:{type:"boolean",group:"Misc",defaultValue:true},clientSideMandatoryCheck:{type:"boolean",group:"Misc",defaultValue:true},fetchValueListReadOnly:{type:"boolean",group:"Misc",defaultValue:true},expandNavigationProperties:{type:"boolean",group:"Behavior",defaultValue:false},textInEditModeSource:{type:"sap.ui.comp.smartfield.TextInEditModeSource",group:"Behavior",defaultValue:T.None},historyEnabled:{type:"boolean",group:"Misc",defaultValue:true},importance:{type:"sap.ui.comp.smartfield.Importance",group:"Misc",defaultValue:h.Low},fixedValueListValidationEnabled:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{_content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},configuration:{type:"sap.ui.comp.smartfield.Configuration",multiple:false},controlProposal:{type:"sap.ui.comp.smartfield.ControlProposal",multiple:false},_ariaLabelInvisibleText:{type:"sap.ui.core.InvisibleText",multiple:true,visibility:"hidden"},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"}},events:{entitySetFound:{parameters:{entitySet:{type:"string"}}},change:{parameters:{value:{type:"string"},newValue:{type:"string"}}},changeModelValue:{parameters:{valueChanged:{type:"boolean"},valueLastValueState:{type:"boolean"},unitChanged:{type:"boolean"},unitLastValueState:{type:"sap.ui.core.ValueState"}}},initialise:{},visibleChanged:{parameters:{visible:{type:"boolean"}}},editableChanged:{parameters:{editable:{type:"boolean"}}},contextEditableChanged:{parameters:{editable:{type:"boolean"}}},innerControlsCreated:{},valueListChanged:{parameters:{changes:{type:"sap.ui.core.Control[]"}}},press:{}}},
renderer:{apiVersion:2,render:function(r,i){var j=i.getContent();r.openStart("div",i);r.class("sapUiCompSmartField");r.openEnd();if(j&&i.getMode()==="display"&&i.isFormContextType()&&i._innerControlHasNoValue()&&i.getInnerControls()[0]&&!i.getInnerControls()[0].isA("sap.m.Text")){r.openStart("span");r.class("sapUiPseudoInvisibleText");r.openEnd();r.text(C.getLibraryResourceBundle("sap.ui.comp").getText("NO_VALUE"));r.close("span");r.openStart("span");r.attr("aria-hidden","true");r.class("sapMText");r.class("sapUiSelectable");r.class("sapMTextMaxWidth");r.class("sapUiCompSmartFieldValue");r.class("sapUiCompEmptyValue");r.openEnd();r.close("span");}r.renderControl(j);if(i.getAggregation("_ariaLabelInvisibleText")){i.getAggregation("_ariaLabelInvisibleText").forEach(function(q){r.renderControl(q);});}r.close("div");}}
});
p.prototype.init=function(){this._isInnerControlCreationDelayed=false;this._sAnnotationLabel="";this._bInDestroy=false;this._oSideEffects=new S(this);this._oFactory=null;this.attachChange(function(){this._bValueNotInitial=true;}.bind(this));this._oControl={display:null,"display_uom":null,edit:null,current:null};this._oValue={display:null,edit:null,uom:null,uomset:null};this._oError={bComplex:false,bFirst:false,bSecond:false};this._sBindingContextPath="";this._oUtil=new B();this._bSuppressToggleControl=false;};
p.prototype.setVisible=function(v,s){var i=this.getVisible();b.prototype.setVisible.apply(this,arguments);v=this.getVisible();if(v!==i){this.fireVisibleChanged({visible:v});}return this;};
p.prototype._setVisibilityBasedOnImportance=function(F){var M,i,s,A,j,q=this._oFactory,G=this.oParent&&this.oParent.isA("sap.ui.comp.smartform.GroupElement")&&this.oParent.getDomRef();if(!q||!G){return;}M=q.getMetaData&&q.getMetaData();i=M&&M.property&&M.property.property;A=q._oHelper&&q._oHelper.oAnnotation;if(A){if(!A.isNullable(i)||A.isStaticMandatory(i)||A.getVisible(i)==="false"){return;}}if(this.getMandatory()||!this.getVisible()||this._fieldControlValue===0||this._fieldControlValue===7){return;}s=(!this.isPropertyInitial("importance")&&this.getImportance())||(A&&A.getImportanceAnnotation(i));switch(F){case h.High:j=s===h.High?"":"none";break;case h.Medium:j=s===h.Low?"none":"";break;default:j="";}G.style.display=j;};
p.prototype.getComputedTextLabel=function(){return this.getProperty("textLabel")||this._sAnnotationLabel;};
p.prototype.setEditable=function(E){return this.setEditableProperty("editable",E,false);};
p.prototype.setContextEditable=function(i){return this.setEditableProperty("contextEditable",i,true);};
p.prototype.setEditableProperty=function(s,E,i){var j=f(s),G=this["get"+j].bind(this),q=G(),M,r;this.setProperty(s,E,i);E=G();this._bPendingEditableState=false;var t=E!==q,u=this.isPropertyBeingUpdatedByModel(s);M=this.getMode();if(t&&this._oFactory){if(this._oFactory.reBindIfNecessary&&!E&&q){this._oFactory.reBindIfNecessary();}else if(this._oFactory.reBind&&this.isTextInEditModeSourceNotNone()&&M==="edit"&&E&&!q){this._oFactory.reBind();}}if((t&&!u)||(t&&u&&this._boundEntityExists())||!this._oControl[M]){this._toggleInnerControlIfRequired();}if(this.isContextTable()&&t&&E&&!q){r=this._oControl&&this._oControl.edit;if(r){(r.isA("sap.m.HBox")?r.getItems():[r]).forEach(function(w){if(w.getValueState&&(w.getValueState()===g.Error||w.getValueState()===g.Warning)){w.setValueState(g.None);}});}}if(t){var v="fire"+j+"Changed";this[v]({editable:E});}return this;};
p.prototype.isPropertyBeingUpdatedByModel=function(s){var i=this.getBindingInfo(s);return!!(i&&i.skipModelUpdate);};
p.prototype._boundEntityExists=function(v){v=v||this.getBindingContext();return!!(v&&v.getObject());};
p.prototype.setUomEditable=function(u){this.setProperty("uomEditable",u,true);var U=this._getEmbeddedSmartField();if(U){U.setEditable(this.getUomProperty("editable"));}return this;};
p.prototype.setUomEnabled=function(u){this.setProperty("uomEnabled",u,true);var U=this._getEmbeddedSmartField();if(U){U.setEnabled(this.getUomEnabled());}return this;};
p.prototype.setUomVisible=function(u){this.setProperty("uomVisible",u,true);var U=this._getEmbeddedSmartField();if(U){u=this.getUomProperty("visible");U.setVisible(u);var M=this._oFactory&&this._oFactory.oMeasureField;if(M){M.toggleStyleClass("smartFieldPaddingRight",u);}}return this;};
p.prototype.setMandatory=function(M){this.setProperty("mandatory",M,false);this._setPropertyOnControls("required",this.getMandatory());return this;};
p.prototype.setWidth=function(w){this.setProperty("width",w,true);this._setOnInnerControl();return this;};
p.prototype.setWrapping=function(w){this.setProperty("wrapping",w,true);this._setOnInnerControl();return this;};
p.prototype.setTextAlign=function(t){this.setProperty("textAlign",t,true);this._setOnInnerControl();return this;};
p.prototype.setTextDirection=function(t){this.setProperty("textDirection",t);this._setOnInnerControl();return this;};
p.prototype.setPlaceholder=function(s){this.setProperty("placeholder",s,true);this._setOnInnerControl();return this;};
p.prototype.setName=function(N){this.setProperty("name",N,true);this._setOnInnerControl();return this;};
p.prototype.setMaxLength=function(M){this.setProperty("maxLength",M,true);this._setOnInnerControl();return this;};
p.prototype.setShowValueHelp=function(v){var i=this.getShowValueHelp();this.setProperty("showValueHelp",v,true);var j=this.getContent();if(j&&(typeof j.setShowValueHelp==="function")){v=this.getShowValueHelp();var q=v!==i,F=this._oFactory;if(q&&F){if(v){if(F.shouldCreateValueHelpForControl(j)){F._createValueHelp();}}else{F.destroyValueHelp();}}j.setShowValueHelp(v);}return this;};
p.prototype.setShowSuggestion=function(s){var i=this.getShowSuggestion();this.setProperty("showSuggestion",s,true);var j=this.getContent();if(j&&(typeof j.setShowSuggestion==="function")){s=this.getShowSuggestion();var q=s!==i,F=this._oFactory;if(q&&F){if(s){if(F.shouldCreateValueHelpForControl(j)){F._createValueHelp();}}else{F.destroyValueHelp();}}j.setShowSuggestion(s);}return this;};
p.prototype.setConfiguration=function(i){var j=this.getConfiguration(),r=this.setAggregation("configuration",i,true);i=this.getConfiguration();var q=!!((i&&(j===null))||(j&&(i===null))),H=!!this.getContent();if(H&&(q||(i&&j&&((i.getControlType()!==j.getControlType())||(i.getDisplayBehaviour()!==j.getDisplayBehaviour()))))){this._destroyControls();this._toggleInnerControlIfRequired();}return r;};
p.prototype.setTextInEditModeSource=function(t){var s=this.getTextInEditModeSource();this.setProperty("textInEditModeSource",t,false);t=this.getTextInEditModeSource();if(t!==s){if(this._oFactory&&this._oFactory.reBind){this._oFactory.reBind();}this._destroyControls();this._toggleInnerControlIfRequired();}return this;};
p.prototype.setTooltip=function(t){this._refreshTooltipBaseDelegate(t);this.setAggregation("tooltip",t,true);var i=this.getFirstInnerControl();if(i){i.setTooltip(t);}return this;};
p.prototype._setOnInnerControl=function(){var i=this.getContent();if(i){if(typeof i.setWidth==="function"){var w=this.getWidth();if(w){i.setWidth(w);}}this._setPropertyOnControls("wrapping",this.getWrapping());if(typeof i.setName==="function"){i.setName(this.getName());}if(typeof i.setPlaceholder==="function"&&this.getPlaceholder()!==""){i.setPlaceholder(this.getPlaceholder());}if(typeof i.setTextAlign==="function"){i.setTextAlign(this.getTextAlign());}this._setPropertyOnControls("required",this.getMandatory());this._setPropertyOnControls("textDirection",this.getTextDirection());var u=this._getEmbeddedSmartField();if(u){if(!this.isPropertyInitial("uomEditable")){u.setEditable(this.getUomProperty("editable"));}if(!this.isPropertyInitial("uomEnabled")){u.setEnabled(this.getUomEnabled());}if(!this.isPropertyInitial("uomVisible")){u.setVisible(this.getUomProperty("visible"));}}}return this;};
p.prototype.getUomProperty=function(s){var u=this._getEmbeddedSmartField(),U=u&&u.getControlFactory(),i=U&&U._oFieldControl,j=f(s),q="getUom"+j,r=this[q]();if(u.isBound(s)&&i){var t=U.getMetaData();if(t){var v=i._oStoredBindings[s],w=i["_get"+j](t,v,s);w.path();var x=w.formatter.call(u,r);return x;}}return r;};
p.prototype._setPropertyOnControls=function(s,v,i){i=i||this.getInnerControls();i.forEach(function(j){var M="set"+f(s);if(typeof j[M]==="function"){j[M](this._convertValueForControl(s,v,j));}},this);};
p.prototype._convertValueForControl=function(s,v,i){var j;if(i){j=i.getMetadata().getProperty(s);}if(j){switch(s){case"wrapping":switch(j.type){case"boolean":return v;case"sap.ui.core.Wrapping":var w=c.Wrapping;if(v){return w.Soft;}return w.None;}}}return v;};
p.prototype.setUrl=function(v){this.setProperty("url",v,true);return this;};
p.prototype.setEntitySet=function(v){this.setProperty("entitySet",v,true);this.fireEntitySetFound({entitySet:v});return this;};
p.prototype._setPendingEditState=function(i){this.data("pendingEditableState",!i);};
p.prototype.applySettings=function(s){if(s&&s.customData){for(var i=0;i<s.customData.length;i++){var j=s.customData[i];if(j&&j.mProperties&&j.mProperties.key==="pendingEditableState"){this._bPendingEditableState=j.mProperties.value;}}}return b.prototype.applySettings.apply(this,arguments);};
p.prototype.setEnabled=function(v){this.setProperty("enabled",v,false);this._toggleInnerControlIfRequired();return this;};
p.prototype.setContent=function(v){return this.setAggregation("_content",v);};
p.prototype.getContent=function(){return this.getAggregation("_content");};
p.prototype.getControlFactory=function(){return this._oFactory;};
p.prototype.getValue=function(){var i=this.getInnerValueFunction();if(i){return i();}return this.getProperty("value");};
p.prototype.getInnerValueFunction=function(){if(this._oValue&&(typeof this._oValue[this.getMode()]==="function")){return this._oValue[this.getMode()];}return null;};
p.prototype.getValueState=function(){var i=this.getInnerControls(),j=this._getMaxSeverity(i);if(j>-1){return i[j].getValueState();}return g.None;};
p.prototype.setValueState=function(v){this.setProperty("valueState",v,true);var i=this.getInnerControls(),j,M="setSimpleClientError";if(i&&i.length){j=i[0];if(i.length>1){M="setComplexClientErrorFirstOperand";}}if(j&&(typeof j.setValueState==="function")){j.setValueState(v);this[M](v===g.Error);}return this;};
p.prototype.getValueStateText=function(){var i=this.getInnerControls(),j=this._getMaxSeverity(i);if(j>-1){return i[j].getValueStateText();}return this.getProperty("valueStateText");};
p.prototype.setValueStateText=function(t){this.setProperty("valueStateText",t,true);var i=this.getInnerControls(),j;if(i&&i.length){j=i[0];}if(j&&(typeof j.setValueStateText==="function")){j.setValueStateText(t);}return this;};
p.prototype._getMaxSeverity=function(j){var s,q,i,r,t=0,u=-1,v={"Error":3,"Warning":2,"Success":1,"None":0};r=j.length;for(i=0;i<r;i++){q=j[i];if(q.getValueState){s=q.getValueState();if(s&&v[s]>t){t=v[s];u=i;}}}return u;};
p.prototype.getFocusDomRef=function(){var i=this.getInnerControls(),j,q=i.length;if(q>0){j=i[0];}if(j&&j.getFocusDomRef){return j.getFocusDomRef();}return b.prototype.getFocusDomRef.apply(this,arguments);};
p.prototype.getIdForLabel=function(){var i=this.getInnerControls(),j,q=i.length;if(q>0){j=i[0];}if(j&&(typeof j.getIdForLabel==="function")){return j.getIdForLabel();}return this.getId();};
p.prototype.updateBindingContext=function(s,F,u){b.prototype.updateBindingContext.apply(this,arguments);if(this._bInDestroy){return;}this._init(F);if(this._oFactory){if(this.getBindingContext()){this._sBindingContextPath=this.getBindingContext().getPath();}if(typeof this._oFactory.bind==="function"){this._oFactory.bind();}else{this._toggleInnerControlIfRequired();}}};
p.prototype.bindProperty=function(s,i){var j=s==="value";if(!j||this.isPropertyInitial("value")){return b.prototype.bindProperty.apply(this,arguments);}var v=this.getBindingPath("value"),q=this.getBindingContext(),r=q&&q.getPath();b.prototype.bindProperty.apply(this,arguments);var t=this.getBindingPath("value"),u=this.getBindingContext(),w=u&&u.getPath();if((t!==v)||(w!==r)){this._destroyFactory();this._init();var F=this._oFactory;if(F&&(typeof F.bind==="function")){F.bind();}}return this;};
p.prototype.unbindProperty=function(s,i){b.prototype.unbindProperty.apply(this,arguments);var j=this.getAllInnerControls();j.forEach(function(q){var r=q.getMetadata().getName();var v=O.getBoundPropertiesMapInfoForControl(r,{propertyName:s});if(Array.isArray(v)){v.forEach(function(t){q.unbindProperty(t,i);});}});return this;};
p.prototype.getMode=function(){var E=this.getEditable(),i=this.getEnabled(),j=this.getContextEditable();if(this.getControlContext()==="responsiveTable"&&this.data("suppressUnit")!=="true"){if(!E||!j||!i||(this.getProperty("uomEditState")===0)){return"display_uom";}}if(j&&this.data("configdata")&&this.data("configdata").configdata.isUOM&&this.data("configdata").configdata.isInnerControl&&this.data("configdata").configdata.getContextEditable){j=this.data("configdata").configdata.getContextEditable();}return E&&i&&j?"edit":"display";};
p.prototype.isInEditMode=function(){return this.getMode()==="edit";};
p.prototype._toggleInnerControlIfRequired=function(){if(this._bPendingEditableState||this._bSuppressToggleControl||(!this._oFactory||this._oFactory.bPending)){return;}var M=this.getMode();if((M==="edit")||(M==="display_uom")){this._createControlIfRequired(M);if(this.getContent()){this._checkFieldGroups();}}else{var v=this.getProperty("value"),i=true;var j=this.data("configdata");if(j&&j.configdata&&!j.configdata.isUOM){if(v===null||v===""){i=false;}}if(i){this._createControlIfRequired(M);}else{this.setContent(null);this._oControl.current="display";}}};
p.prototype._forceInitialise=function(){};
p.prototype._updateInnerControlsIfRequired=function(){};
p.prototype.setImportance=function(i){var s=this.getProperty("importance");if(s===i){return this;}this.setProperty("importance",i);return this;};
p.prototype.setValue=function(v){var s=this.getProperty("value");this.setProperty("value",v,true);if(!this.isPropertyBeingUpdatedByModel("value")&&!this.getBindingContext()){var i=this.getFirstInnerControl();if(i){var j=i.getMetadata().getName();var q=O.getBoundPropertiesMapInfoForControl(j,{propertyName:"value"})[0];var r=i.getBinding(q);if((this.getMode()==="display")&&r&&(typeof r.getFormatter()==="function")&&(r.getBindingMode()===e.OneWay)){v=r.getExternalValue();}this._setPropertyOnControls(q,v,[i]);}}var F=this._oFactory;if(!F){return this;}if(!F.bPending){this._toggleInnerControlIfRequired();}v=this.getProperty("value");if(F.oTextArrangementDelegate){F.oTextArrangementDelegate.setValue(v,s);}if(v!==s){this.invalidate();}return this;};
p.prototype.isTextInEditModeSourceNotNone=function(){return(this._getComputedTextInEditModeSource()!==T.None);};
p.prototype._getComputedTextInEditModeSource=function(){var t=this.getTextInEditModeSource(),s=this.data("defaultTextInEditModeSource");if(s&&this.isPropertyInitial("textInEditModeSource")&&this.getMode()==="edit"){t=s;}return t;};
p.prototype._createControlIfRequired=function(E){if(!this._oFactory){return;}var v=this._oControl[E];if((E!==this._oControl.current)||!v){if(!v){var i=this._oFactory.createControl();if(i){this._oControl[E]=i.control;this._placeCallBacks(i,E);}}this._oControl.current=E;this.setContent(this._oControl[E]);this._oFactory.updateControl();this._setOnInnerControl();this.fireInnerControlsCreated(this.getInnerControls());}else if(!this.getContent()){this.setContent(this._oControl[E]);}};
p.prototype._placeCallBacks=function(i,M){if(i.params&&i.params.getValue){this._oValue[M]=i.params.getValue;}if(i.params&&i.params.uom){this._oValue.uom=i.params.uom;}if(i.params&&i.params.uomset){this._oValue.uomset=i.params.uomset;}};
p.prototype._init=function(M){var i,j,q=this.getBindingContext(),s;if(this._oFactory&&this._sBindingContextPath&&q&&(this._sBindingContextPath!==q.getPath())||(this._sBindingContextPath&&q===null)){this._destroyFactory();}if(!this._oFactory){j=this.data("configdata");if(!j){i=this.getModel(M);}s=this.getBindingPath("value");if(M===undefined&&s&&(j||i)){this._oFactory=this._createFactory(M,i,s,j);}}};
p.prototype._destroyFactory=function(){this._bSuppressToggleControl=true;this._bSideEffects=false;if(this._oFactory){this._oFactory.destroy();}this._oFactory=null;this._bSuppressToggleControl=false;this._destroyControls();};
p.prototype._destroyControls=function(){if(this._oControl){if(this._oControl.display){this._oControl.display.destroy();}if(this._oControl["display_uom"]){this._oControl["display_uom"].destroy();}if(this._oControl.edit){this._oControl.edit.destroy();}this._oControl.display=null;this._oControl["display_uom"]=null;this._oControl.edit=null;this._oControl.current=null;}this._oValue={display:null,edit:null,uom:null,uomset:null};this.destroyAggregation("_content");};
p.prototype._createFactory=function(M,i,s,j){if(i&&i instanceof d){return new J(i,this,{model:M,path:s});}var E;if(!j){E=this._getEntitySet(M);}if(E||j){var q;if(j){q=j.configdata;}else{q={entitySet:E,model:M,path:s};}return new O(i,this,q);}return null;};
p.prototype._getEntitySet=function(M){var E=this.getEntitySet(),i=E!=="";if(i&&!M){return E;}var j=this.getBindingContext(M);if(j){var s=j.getPath();if((s==="")||(s===undefined)||(s==="/undefined")){return"";}E=this._oUtil.correctPath(s);this.fireEntitySetFound({entitySet:E});return E;}return"";};
p.prototype.getDataType=function(){var i;if(this._oFactory){if(this._oFactory.getDataProperty){i=this._oFactory.getDataProperty();if(i){return i.property.type;}}return this.getJsonType();}return null;};
p.prototype.getDataProperty=function(){if(this._oFactory){if(this._oFactory.getDataProperty){return this._oFactory.getDataProperty();}return null;}return null;};
p.prototype.getUnitOfMeasure=function(){if(this._oValue.uom){return this._oValue.uom();}return null;};
p.prototype.setUnitOfMeasure=function(u){if(u&&this._oValue.uomset){this._oValue.uomset(u);}};
p.prototype.setSimpleClientError=function(E){this._oError.bFirst=E;};
p.prototype.setComplexClientErrorFirstOperand=function(E){this._oError.bComplex=true;this._oError.bFirst=E;};
p.prototype.setComplexClientErrorSecondOperand=function(E){this._oError.bComplex=true;this._oError.bSecond=E;};
p.prototype.setComplexClientErrorSecondOperandNested=function(E){var i=this.getParent().getParent();i.setComplexClientErrorSecondOperand(E);};
p.prototype._hasClientError=function(){if(this._oError.bComplex){return this._oError.bFirst||this._oError.bSecond;}return this._oError.bFirst;};
p.prototype.checkClientError=function(s){s=Object.assign({handleSuccess:false},s);var E="The sap.ui.comp.smartfield.SmartField#checkClientError method is deprecated. "+"Please use the sap.ui.comp.smartfield.SmartField#checkValuesValidity method instead.";L.warning(E,this.getMetadata().getName());if(this.getMode()==="display"){return false;}if(this._hasClientError()&&!s.handleSuccess){return true;}this.getInnerControls().forEach(function(i){this._checkErrors(i,{checkClientErrorsOnly:true,handleSuccess:s.handleSuccess});}.bind(this));return this._hasClientError();};
p.prototype.checkValuesValidity=function(s){var i,F=this.getControlFactory(),E;if(F&&F.getEdmProperty){E=F.getEdmProperty();if(!E){return Promise.resolve();}i=E.name;}if(this.getMode()==="display"){return Promise.resolve({property:i,instance:this});}s=s||{};var j={handleSuccess:true,innerControls:this.getInnerControls(),rawValues:[]};var u=this._getEmbeddedSmartField();s=Object.assign(j,s);if(s.rawValues.length===0&&u&&u.data("configdata")&&u.data("configdata").configdata.isUOM){this._updateCurrencyRawValues(s);}return new Promise(function(r,R){var q={rawValues:s.rawValues,handleSuccess:s.handleSuccess,bCheckValuesValidity:true};var t=s.innerControls.map(function(v){return this._checkErrors(v,q);},this);Promise.all(t).then(function(){r({property:i,instance:this});}.bind(this)).catch(function(v){R({property:i,instance:this});}.bind(this));}.bind(this));};
p.prototype.checkUnitValidity=function(s){var v=false;if(this.getMode()==="display"){return true;}s=s||{};var i={handleSuccess:true,innerControls:this.getInnerControls(),rawValues:[]};var u=this._getEmbeddedSmartField();s=Object.assign(i,s);if(s.rawValues.length===0&&u&&u.data("configdata")&&u.data("configdata").configdata.isUOM){this._updateCurrencyRawValues(s);}if(i.innerControls.length!==2&&(i.innerControls.length!==1&&!this._oFactory._checkSuppressUnit())){throw new V();}u=u?u:i.innerControls[1];var M=i.innerControls[0],U=u?u:this._getUomControl(),j,q,r,t;s=Object.assign({checkClientErrorsOnly:false,handleSuccess:true},s);if(M){var w=O.getBoundPropertiesMapInfoForControl(M.getMetadata().getName(),{propertyName:"value"});r=w&&w[0];}if(U){var x=O.getBoundPropertiesMapInfoForControl(U.getMetadata().getName(),{propertyName:"value"});t=x&&x[0];}if(r){j=M.getBinding(r);}if(t){q=U.getBinding(t);}if(!j||(!q&&!this._oFactory._checkSuppressUnit())){return true;}try{var y="get"+f(r),z=j.getType(),A=j.sInternalType,E=M[y]();if(A&&z){var R=s.rawValues||j.getValue(),F=z.parseValue(E,j.sInternalType,R);if(F){z.validateValue(F);}if(j.hasValidation()){var G=false,H=true,K={element:M,property:r,type:j.getType(),newValue:E,oldValue:j.getValue(),mParameters:{suppressChangeModelValue:true}};M.fireValidationSuccess(K,G,H);v=true;}}}catch(N){var Q={element:M,property:r,type:j.getType(),newValue:E,oldValue:j.getValue(),exception:N,message:N.message};if(N instanceof P){M.fireParseError(Q);}else if(N instanceof V){M.fireValidationError(Q);}else{if(N.toString()==="TypeError: Cannot read property 'decimals' of undefined"){N.validationUnitError=true;}throw N;}}try{if(!t||!U.getVisible()){return v;}var W="get"+f(t),X=q.getType(),Y=q.sInternalType,E=M[y](),Z=U[W]();if(Y&&X){var R=s.rawValues||j.getValue(),$=X.parseValue(Z,q.sInternalType,R);if($){X.validateValue($);}if(q.hasValidation()){var G=false,H=true,_={element:U,property:t,type:q.getType(),newValue:Z,oldValue:q.getValue(),mParameters:{suppressChangeModelValue:true}};U.fireValidationSuccess(_,G,H);v&=true;}}}catch(N){var a1={element:U,property:t,type:q.getType(),newValue:Z,oldValue:q.getValue(),exception:N,message:N.message};if(N instanceof P){U.fireParseError(a1);}else if(N instanceof V){U.fireValidationError(a1);}else{N.validationUnitError=true;throw N;}v=false;}return v;};
p.prototype._updateCurrencyRawValues=function(s){s.rawValues=s.innerControls.map(function(i){var M=i.getMetadata(),j=O.getBoundPropertiesMapInfoForControl(M.getName(),{propertyName:"value"});return M.getProperty(j).get(i);});};
p.prototype._checkErrors=function(i,s){s=Object.assign({checkClientErrorsOnly:false,handleSuccess:true},s);var j,q;if(i){var v=O.getBoundPropertiesMapInfoForControl(i.getMetadata().getName(),{propertyName:"value"});q=v&&v[0];}if(q){j=i.getBinding(q);}if(!j){return Promise.resolve();}var r;function t(G){var H={element:i,property:q,type:j.getType(),newValue:r,oldValue:j.getValue(),exception:G,message:G.message};if(G instanceof P){i.fireParseError(H);}else if(G instanceof V){i.fireValidationError(H);}else{throw G;}}function u(){if(s.handleSuccess&&j.hasValidation()){var H={element:i,property:q,type:j.getType(),newValue:r,oldValue:j.getValue(),mParameters:{suppressChangeModelValue:true}};var K=false,N=true;i.fireValidationSuccess(H,K,N);}}try{var M="get"+f(q),w=j.getType(),x=j.sInternalType;r=i[M]();if(x&&w){if(s.checkClientErrorsOnly&&w.async){var E="The deprecated sap.ui.comp.smartfield.SmartField#checkClientError method can not be "+"used with async types. Please use sap.ui.comp.smartfield.SmartField#checkValuesValidity "+"method instead.";L.error(E,this.getMetadata().getName());this.setSimpleClientError(true);return Promise.reject();}if(w.async){var y=j.getDataState();var z=w.formatValue(y.getValue(),x);if(!y.isControlDirty()&&(z===r)){u();return Promise.resolve();}}var R=s.rawValues||j.getValue(),A=w.parseValue(r,j.sInternalType,R),F;if(A&&(A instanceof Promise)){F=A.then(function(H){return w.validateValue(H);}).then(u);F.catch(t);return F;}F=w.validateValue(A,s.bCheckValuesValidity);if(F instanceof Promise){F.catch(t);return F.then(u);}}}catch(G){t(G);return Promise.reject();}u();return Promise.resolve();};
p.prototype.isContextTable=function(){return(this.getControlContext()==="responsiveTable"||this.getControlContext()==="table");};
p.prototype.isFormContextType=function(){var s=this.getControlContext(),i=l.smartfield.ControlContextType;return(s===i.Form)||(s===i.SmartFormGrid);};
p.prototype.isTableContextType=function(){var s=this.getControlContext(),i=l.smartfield.ControlContextType;return(s===i.Table)||(s===i.ResponsiveTable);};
p.prototype.getInnerControls=function(){var i,j,q={"sap.m.HBox":function(r){var s,t,u=0;t=r.getItems();if(t){u=t.length;}if(u===0){return[];}if(u===1){return[t[0]];}s=t[1].getContent();if(s){return[t[0],s];}return[t[0]];},"sap.ui.comp.navpopover.SmartLink":function(r){var s=r.getAggregation("innerControl");if(s){return[s];}return[r];}};i=this.getContent();if(i){j=q[i.getMetadata()._sClassName];}if(j){return j(i);}if(i){return[i];}return[];};
p.prototype.getAllInnerControls=function(){var i=[],j=this._oControl;if(j){for(var s in j){if(j.hasOwnProperty(s)){var q=j[s];if(q&&(q instanceof Object)){i.push(q);}}}}return i;};
p.prototype._getEmbeddedSmartField=function(){var i=this.getContent();if(i){if(i.isA("sap.m.HBox")){var H=i.getItems();if(H){for(var j=0;j<H.length;j++){if(H[j]instanceof p){return H[j];}}}}}return null;};
p.prototype.onBeforeRendering=function(){b.prototype.onBeforeRendering.apply(this,arguments);var i=this.getClientSideMandatoryCheck(),u=this._getEmbeddedSmartField();if(this.isContextTable()&&u){this._handleUoMAriaLabelledByInSmartTable(u);}else if(u){this._handleUoMAriaLabelledBy(u);}if(u&&u.data("configdata")&&u.data("configdata").configdata.isUOM){u.setClientSideMandatoryCheck(i);}};
p.prototype.getFirstInnerControl=function(){var i=this.getInnerControls();if(i.length){return i[0]||null;}return null;};
p.prototype._checkFieldGroups=function(){var v,M,s=this.getMode();if(this.getBindingContext()&&this._oFactory&&this._oFactory.getMetaData&&(s==="edit")&&!this._bSideEffects){M=this._oFactory.getMetaData();if(M&&(!M.property||(M.property&&!M.property.property))){return;}v=this._getView();if(v&&M){this._setFieldGroup(M,v);}}};
p.prototype._setFieldGroup=function(M,v){var i,j=this._oSideEffects.getFieldGroupIDs(M,v);if(j){i=this.getFirstInnerControl();if(i){this._bSideEffects=true;i.setFieldGroupIds(j);}}};
p.prototype._getView=function(){var i=this.getParent();while(i){if(i.isA("sap.ui.core.mvc.View")){return i;}i=i.getParent();}return null;};
p.prototype._getUomControl=function(){var j=this.getAllInnerControls();if(this.getUomEnabled()&&j&&j.length===1){var q=j[0].getItems?j[0].getItems():[];for(var i=0;i<q.length;i++){if(q[i].isA("sap.ui.comp.smartfield.SmartField")){return q[i];}}}return null;};
p.prototype.refreshDataState=function(N,i){var j,q;if(N==="value"){if(i.isLaundering()){if(this.getEditable()){j=this.getBindingContext();if(j&&j.getObject){q=j.getObject();if(q&&q.__metadata&&q.__metadata.created){this._checkCreated=true;return;}}}}if(this._checkCreated&&!i.isLaundering()&&!i.isDirty()){if(this._oFactory){this._oFactory.rebindOnCreated();}this._checkCreated=false;}}};
p.prototype.onValidation=function(E){var i,j=E.getParameters(),q=j.newValue!==j.oldValue,r=this.data("configdata")&&this.data("configdata").configdata,s=r&&r.smartFieldRootControl?r.smartFieldRootControl:this,u=s._getEmbeddedSmartField(),t=u&&u.getFirstInnerControl(),U=t&&t.getId(),v=s.getModel(),w=E.getSource().getId(),x=j.mParameters,y=x&&x.originSource&&x.originSource.getId(),z=x&&x.suppressChangeModelValue||false,A=U&&U!==w,F=U&&U===w,G=U&&y&&U!==y,H=U&&y&&U===y;if(y&&y!==w||z||v.getDefaultBindingMode()!==e.TwoWay){return;}if(G||A){i={valueChanged:q,valueLastValueState:s.getValueState(),unitChanged:false,unitLastValueState:u.getValueState()};}else if(H||F){i={valueChanged:false,valueLastValueState:s.getValueState(),unitChanged:q,unitLastValueState:u.getValueState()};}else{i={valueChanged:q,valueLastValueState:s.getValueState()};}s.fireChangeModelValue(i);};
p.prototype.exit=function(){this._bInDestroy=true;var i=null;if(this._oSideEffects){this._oSideEffects.destroy();}if(this._oUtil){this._oUtil.destroy();}if(this._oFactory){this._oFactory.destroy();}var j=this._oControl;if(j){if(j.current==="edit"){i=j["display"]||j["display_uom"];}else{i=j["edit"];}if(j[j.current]&&!j[j.current].getParent()){j[j.current].destroy();}}if(i&&(typeof i.destroy==="function")){i.destroy();}this._oUtil=null;this._oError=null;this._oValue=null;this._oFactory=null;this._oControl=null;this._oSideEffects=null;this._sBindingContextPath="";this._sAnnotationLabel="";};
p.getSupportedAnnotationPaths=function(M,E,v,N){var i,u,r=[],j;if(M&&E&&v){j={entitySet:E,entityType:M.getODataEntityType(E.entityType),path:v};i={helper:new a(null,null,M)};if(N){i.navigationPathOnly=N;}i.helper.getProperty(j);p._getFromEntitySet(r,j,i);p._getFromProperty(r,j,i);u=i.helper.getUnitOfMeasure2(j);if(u){p._getFromProperty(r,u,i);}i.helper.destroy();}return r;};
p._getFromEntitySet=function(r,M,i){var s;if(M.entitySet){s=i.helper.oAnnotation.getUpdateEntitySetPath(M.entitySet);p._push(s,r,M,i);}};
p._push=function(s,r,M,i){var j,q,t,u,R={};if(s){if(i.navigationPathOnly){j=s.split("/");t=j.length;R.entityType=M.entityType;while(t--){q=j.shift();if(q===""){continue;}R=i.helper.getNavigationProperty(R.entityType,q);if(!R.entitySet){break;}if(u){u=u+"/"+q;}else{u=q;}}}else{u=s;}}if(u){if(M.navigationPath){r.push(M.navigationPath+"/"+u);}else{r.push(u);}}};
p._getFromProperty=function(r,M,i){var s;if(M.property.property){s=i.helper.oAnnotation.getText(M.property.property);p._push(s,r,M,i);s=i.helper.oAnnotation.getUnit(M.property.property);p._push(s,r,M,i);s=i.helper.oAnnotation.getFieldControlPath(M.property.property);p._push(s,r,M,i);}};
p.prototype.addAssociation=function(A,i,s){if(A==="ariaLabelledBy"&&i){this.getInnerControls().forEach(function(j){if(j.addAriaLabelledBy){j.addAriaLabelledBy(i);}});}else if(A==="ariaDescribedBy"&&i){this.getInnerControls().forEach(function(j){if(j.addAriaDescribedBy){j.addAriaDescribedBy(i);}});}return b.prototype.addAssociation.apply(this,arguments);};
p.prototype.removeAssociation=function(A,v,s){var i=b.prototype.removeAssociation.apply(this,arguments);if(A==="ariaLabelledBy"&&i){this.getInnerControls().forEach(function(j){if(j.removeAriaLabelledBy){j.removeAriaLabelledBy(i);}});}else if(A==="ariaDescribedBy"&&i){this.getInnerControls().forEach(function(j){if(j.removeAriaDescribedBy){j.removeAriaDescribedBy(i);}});}return i;};
p.prototype.getAccessibilityInfo=function(){var i=this.getContent();return i&&i.getAccessibilityInfo?i.getAccessibilityInfo():null;};
p.prototype.enhanceAccessibilityState=function(E,A){var i=this.getParent();if(i&&i.enhanceAccessibilityState){i.enhanceAccessibilityState(this,A);}};
p.prototype._handleUoMAriaLabelledByInSmartTable=function(u){var A,t=this;if(this.getAriaLabelledBy().length>0){this.getInnerControls().forEach(function(i){if(i.addAriaLabelledBy&&i.getAriaLabelledBy){A=i.getAriaLabelledBy().indexOf(t.getAriaLabelledBy()[0])>-1;if(!A&&(i.getAriaLabelledBy().length===0)){i.addAriaLabelledBy(t.getAriaLabelledBy()[0]);}t._handleUoMAriaLabelledBy(u);}});}};
p.prototype._handleUoMAriaLabelledBy=function(u){this.getInnerControls().forEach(function(i){if(i.addAriaLabelledBy&&i.getAriaLabelledBy&&!u.getEditable()){var A=i.getAriaLabelledBy().indexOf(u.getId()+"-text")>-1;if(!A){i.addAriaLabelledBy(u.getId()+"-text");}}});};
p.prototype._isValueInitial=function(){return!this._bValueNotInitial;};
p.prototype.getRequired=function(){if(this.getContextEditable()&&this.getEditable()){return this.getMandatory();}else{return false;}};
p.prototype.getBindingMode=function(s){var i=this.getBindingInfo(s);return i?i.parts[0].mode:undefined;};
p.prototype._innerControlHasNoValue=function(){var i,j,q,v,r,s,t,u,w=this.getInnerControls(),H=false;for(i=0;i<w.length;i++){r=w[i];s=r.getMetadata().getName();if(s==="sap.m.ObjectStatus"&&!(r.getText().trim()||r.getIcon().trim()||r.getTitle().trim())){H=true;break;}else{u=O.getBoundPropertiesMapInfoForControl(s,{propertyName:"value"});if(!Array.isArray(u)){return false;}q=0;for(j=0;j<u.length;j++){v=undefined;t=u[j];v=r.getProperty(t);if(v===""||v===null){q+=1;}}if(q===u.length){H=true;break;}}}return H;};
p.prototype._getHistoryEnabled=function(){return this.getHistoryEnabled();};
p.prototype.getFormValueProperty=function(){return"value";};
p.prototype.getFormFormattedValue=function(){return this.getValue()?this.getValue():"";};
p.prototype.getDataSourceLabel=function(){return this._sAnnotationLabel;};
return p;},true);
sap.ui.predefine('sap/ui/comp/smartfield/SmartLabel',["sap/ui/core/Control","sap/m/Label","sap/ui/comp/library","./BindingUtil","./AnnotationHelper","./SmartField","sap/base/strings/capitalize"],function(C,L,l,B,A,S,c){"use strict";
var a=L.extend("sap.ui.comp.smartfield.SmartLabel",{
metadata:{interfaces:["sap.ui.core.Label","sap.ui.core.IShrinkable","sap.m.IOverflowToolbarContent","sap.m.IHyphenation"],library:"sap.ui.comp"},
renderer:{apiVersion:2}
});
a.prototype.init=function(){this._sSmartFieldId=null;this._bMetaDataApplied=false;this._fInnerControlsCreatedHandlers=null;};
a.prototype._bindProperties=function(){var s=this._getField();if(s){var b=new B();var i=null;if(!this.isBound("visible")){this.setVisible(s.getVisible());}if(!this._bTextSetExplicitly){i=s.getBindingInfo("textLabel");if(i){this.bindProperty("text",b.toBinding(i));}else if(!this.getBindingInfo("text")){this._setText(s.getComputedTextLabel());}}i=s.getBindingInfo("tooltipLabel");if(i){this.bindProperty("tooltip",b.toBinding(i));}else{this.setTooltip(s.getTooltipLabel());}}};
a.prototype.onFieldVisibilityChange=function(o){if(!this.isBound("visible")){this.setVisible(o.getSource().getVisible());}};
a.prototype.getLabelInfo=function(){var m,o;var s=this._getField();if(s){this._bindProperties();m=s.getDataProperty();if(m){o=this._getLabelInfo(m);if(o){if(o.text&&!this._bTextSetExplicitly){this._setProperty(this,"text",o.text);}if(o.quickinfo){this._setProperty(this,"tooltip",o.quickinfo);}}}}};
a.prototype._setProperty=function(o,p,v){if(o&&p){if(v.match(/{@i18n>.+}/gi)){o.bindProperty(p,v.slice(1,-1));}else{var P=c(p);if(!o.getBindingInfo(p)&&(!o["get"+P]())){o["set"+P](v);}}}};
a.prototype.setLabelFor=function(s){var o=this._getField();var n="";if(s){if(typeof s==="string"){n=s;}else if(s.getId){n=s.getId();}}if(n.length>0&&n===this._sSmartFieldId){return this;}if(o){if(this._fChange){o.detachEvent("_change",this._fChange);this._fChange=null;}if(this._fInitialized){o.detachInitialise(this._fInitialized);this._fInitialized=null;}this.detachFieldVisibilityChange(o);this._bMetaDataApplied=false;}if(n.length>0){this._sSmartFieldId=n;this._setLabelFor();}else{this._sSmartFieldId=null;}L.prototype.setLabelFor.apply(this,arguments);var b=sap.ui.getCore().byId(this.getLabelFor());this.detachFieldVisibilityChange(b);this.attachFieldVisibilityChange(b);return this;};
a.prototype._getField=function(){if(this._sSmartFieldId){return sap.ui.getCore().byId(this._sSmartFieldId);}return null;};
a.prototype._setLabelFor=function(){var d,s=this._getField();if(s&&!this._bMetaDataApplied){this._bMetaDataApplied=true;if(s.getDataProperty){d=s.getDataProperty();if(d){this.getLabelInfo();}else{if(!this._fInitialized){this._fInitialized=this.getLabelInfo.bind(this);s.attachInitialise(this._fInitialized);}if(!this._fChange){this._fChange=function(e){if(e.getParameter("name")==="textLabel"){this.getLabelInfo();}else if(e.getParameter("name")==="mandatory"){this.invalidate();}}.bind(this);s.attachEvent("_change",this._fChange);}}this._lateUpdateLabelFor(s);}}};
a.prototype.updateLabelFor=function(b){var i=b.slice(0);if(i&&i.length>0){this.invalidate();L.prototype.setLabelFor.call(this,i.shift());this.updateAriaLabeledBy(i);}};
a.prototype.updateAriaLabeledBy=function(b){if(b){for(var i=0;i<b.length;i++){var o=b[i];if(typeof o.addAriaLabelledBy==="function"){o.removeAriaLabelledBy(this);o.addAriaLabelledBy(this);}}}};
a.prototype.setText=function(v){this.setProperty("text",v);this._bTextSetExplicitly=true;return this;};
a.prototype._setText=function(v){this.setProperty("text",v);};
a.prototype._getLabelInfo=function(p){var o=new A();if(p&&p.property){return{text:o.getLabel(p.property),quickinfo:o.getQuickInfo(p.property)};}};
a.prototype._delayUpdateLabelFor=function(s){var t=this;if(s.attachInnerControlsCreated&&!this._fInnerControlsCreatedHandlers){this._fInnerControlsCreatedHandlers=function(e){t.updateLabelFor(e.getParameters());};s.attachInnerControlsCreated(this._fInnerControlsCreatedHandlers);}};
a.prototype._lateUpdateLabelFor=function(s){var i;if(s&&(s instanceof S)){i=s.getInnerControls();if(i&&(i.length>0)){this.updateLabelFor(i);}else{this._delayUpdateLabelFor(s);}var o=sap.ui.getCore().byId(this.getLabelFor());this.detachFieldVisibilityChange(o);this.attachFieldVisibilityChange(o);}};
a.prototype.onBeforeRendering=function(){if(this._sSmartFieldId){var s=this._getField();if(!this._bMetaDataApplied){this._setLabelFor();if(s.getId()===this.getLabelFor()){this._lateUpdateLabelFor(s);}}}};
a.prototype.attachFieldVisibilityChange=function(o){if(o&&(typeof o.attachVisibleChanged==="function")){o.attachVisibleChanged(this.onFieldVisibilityChange,this);}};
a.prototype.detachFieldVisibilityChange=function(o){if(o&&(typeof o.detachVisibleChanged==="function")){o.detachVisibleChanged(this.onFieldVisibilityChange,this);}};
a.prototype.destroy=function(s){var o=this._getField();delete this._bTextSetExplicitly;if(o){if(this._fInnerControlsCreatedHandlers&&o.detachInnerControlsCreated){o.detachInnerControlsCreated(this._fInnerControlsCreatedHandlers);this._fInnerControlsCreatedHandlers=null;}if(this._fInitialized&&o.detachInitialise){o.detachInitialise(this._fInitialized);this._fInitialized=null;}if(this._fChange){o.detachEvent("_change",this._fChange);this._fChange=null;}}this._sSmartFieldId=null;return L.prototype.destroy.apply(this,arguments);};
a.prototype.exit=function(){L.prototype.exit.apply(this,arguments);this.detachFieldVisibilityChange(sap.ui.getCore().byId(this.getLabelFor()));};
return a;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/AdditionalConfigurationHelper',[],function(){"use strict";var A=function(c,g){this.controlConfiguration=[];this.groupConfiguration=[];this._initialize(c,g);};
A.prototype._initialize=function(c,g){var i,l,G,C,o,d,D,j,a,b;if(!c){c=[];}if(!g){g=[];}l=c.length;for(i=0;i<l;i++){C=c[i];o={};o.key=C.getKey();o.groupId=C.getGroupId();o.index=C.getIndex();o.label=C.getLabel();o.isVisible=C.getVisible();o.mandatory=C.getMandatory();o.width=C.getWidth();o.hasValueHelpDialog=C.getHasValueHelpDialog();o.hasTypeAhead=C.getHasTypeAhead();o.controlType=C.getControlType();o.filterType=C.getFilterType();o.customControl=C.getCustomControl();o.visibleInAdvancedArea=C.getVisibleInAdvancedArea();o.preventInitialDataFetchInValueHelpDialog=C.getPreventInitialDataFetchInValueHelpDialog();o.isSetPreventInitialDataFetchInValueHelpDialog=C.isPropertyInitial("preventInitialDataFetchInValueHelpDialog");o.displayBehaviour=C.getDisplayBehaviour();o.defaultFilterValues=[];o.conditionType=C.getConditionType();o.historyEnabled=C.getHistoryEnabled();o.historyEnabledInitial=C.isPropertyInitial("historyEnabled");d=C.getDefaultFilterValues();if(d&&d.length){a=d.length;for(j=0;j<a;j++){D=d[j];b={};b.sign=D.getSign();b.operator=D.getOperator();b.low=D.getLow();b.high=D.getHigh();o.defaultFilterValues.push(b);}}this.controlConfiguration.push(o);}l=g.length;for(i=0;i<l;i++){G=g[i];o={key:G.getKey(),index:G.getIndex(),label:G.getLabel()};this.groupConfiguration.push(o);}};
A.prototype.getControlConfigurationByKey=function(k){var i,l;l=this.controlConfiguration.length;for(i=0;i<l;i++){if(this.controlConfiguration[i].key===k){return this.controlConfiguration[i];}}return undefined;};
A.prototype.getControlConfiguration=function(){return this.controlConfiguration;};
A.prototype.getGroupConfiguration=function(){return this.groupConfiguration;};
A.prototype.getGroupConfigurationByKey=function(k){var i,l;l=this.groupConfiguration.length;for(i=0;i<l;i++){if(this.groupConfiguration[i].key===k){return this.groupConfiguration[i];}}return undefined;};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/ControlConfiguration',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfilterbar.ControlConfiguration",{metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},groupId:{type:"string",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},hasValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:true},controlType:{type:"sap.ui.comp.smartfilterbar.ControlType",group:"Misc",defaultValue:'auto'},filterType:{type:"sap.ui.comp.smartfilterbar.FilterType",group:"Misc",defaultValue:'auto'},index:{type:"int",group:"Misc",defaultValue:-1},hasTypeAhead:{type:"boolean",group:"Misc",defaultValue:true},mandatory:{type:"sap.ui.comp.smartfilterbar.MandatoryType",group:"Misc",defaultValue:'auto'},width:{type:"string",group:"Misc",defaultValue:null},visibleInAdvancedArea:{type:"boolean",group:"Misc",defaultValue:false},preventInitialDataFetchInValueHelpDialog:{type:"boolean",group:"Misc",defaultValue:false},displayBehaviour:{type:"sap.ui.comp.smartfilterbar.DisplayBehaviour",group:"Misc",defaultValue:'auto'},conditionType:{type:"any",group:"Misc",defaultValue:null},historyEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{defaultFilterValues:{type:"sap.ui.comp.smartfilterbar.SelectOption",multiple:true,singularName:"defaultFilterValue"},customControl:{type:"sap.ui.core.Control",multiple:false}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
C.prototype.setVisible=function(i){this.setProperty("visible",i);this.fireChange({propertyName:"visible"});return this;};
C.prototype.setLabel=function(L){this.setProperty("label",L);this.fireChange({propertyName:"label"});return this;};
C.prototype.setVisibleInAdvancedArea=function(v){this.setProperty("visibleInAdvancedArea",v);this.fireChange({propertyName:"visibleInAdvancedArea"});return this;};
C.FILTERTYPE=l.smartfilterbar.FilterType;C.CONTROLTYPE=l.smartfilterbar.ControlType;C.MANDATORY=l.smartfilterbar.MandatoryType;C.DISPLAYBEHAVIOUR=l.smartfilterbar.DisplayBehaviour;return C;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/FilterProvider',["sap/ui/comp/util/DateTimeUtil","sap/ui/comp/util/FilterUtil","sap/m/DateTimePicker","sap/m/Select","sap/ui/core/Item","sap/m/ComboBox","sap/m/DatePicker","sap/m/DateRangeSelection","sap/m/TimePicker","sap/m/Input","sap/m/MultiComboBox","sap/ui/comp/smartfilterbar/SFBMultiInput","sap/ui/comp/smartfilterbar/SortingUtil","sap/m/SearchField","sap/m/Token","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/providers/ValueHelpProvider","sap/ui/comp/providers/ValueListProvider","sap/ui/model/Filter","sap/ui/model/json/JSONModel","sap/ui/comp/odata/ODataType","sap/ui/comp/util/FormatUtil","sap/ui/base/EventProvider","sap/ui/comp/util/IdentifierUtil","sap/ui/comp/providers/TokenParser","sap/ui/core/format/DateFormat","sap/ui/comp/library","sap/ui/core/library","sap/ui/model/analytics/odata4analytics","sap/ui/model/FilterOperator","sap/base/Log","sap/base/util/UriParameters","sap/base/security/encodeURL","sap/base/util/merge"],function(D,F,a,S,I,C,b,c,T,d,M,f,g,h,l,m,o,V,p,q,J,O,r,E,s,t,u,v,w,x,y,L,U,z,A){"use strict";var B=v.smartfilterbar.ControlType;var G=v.smartfilterbar.DisplayBehaviour;var H=v.smartfilterbar.FilterType;var K=w.ValueState;var N=v.valuehelpdialog.ValueHelpRangeOperation;var P=v.smartfilterbar.MandatoryType;var Q=function(e){if(!p){p=sap.ui.require("sap/ui/comp/providers/ValueListProvider");}if(!V){V=sap.ui.require("sap/ui/comp/providers/ValueHelpProvider");}this._bInitialized=false;this._bPending=true;this._bConsiderAnalyticalParameters=false;this._bAttachInitializedDone=false;this.aFilterAnnotations=[];if(e){this._oParentODataModel=e.model;this._sServiceURL=e.serviceUrl;this._sBasicSearchFieldName=e.basicSearchFieldName;this._isBasicSearchEnabled=e.enableBasicSearch;this._bUseContainsAsDefault=e.useContainsAsDefaultFilter==="true";this.sEntityType=e.entityType;this.sEntitySet=e.entitySet;this._isRunningInValueHelpDialog=e.isRunningInValueHelpDialog;this._oAdditionalConfiguration=e.additionalConfiguration;this.sDefaultDropDownDisplayBehaviour=e.defaultDropDownDisplayBehaviour;this.sDefaultTokenDisplayBehaviour=e.defaultTokenDisplayBehaviour;if(typeof e.dateFormatSettings==="string"){try{this._oDateFormatSettings=e.dateFormatSettings?JSON.parse(e.dateFormatSettings):undefined;}catch(i){}}else{this._oDateFormatSettings=e.dateFormatSettings;}if(!this._oDateFormatSettings){this._oDateFormatSettings={};}if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}this._oSmartFilter=e.smartFilter;this._bConsiderAnalyticalParameters=e.considerAnalyticalParameters;this._bUseDateRangeType=e.useDateRangeType;this._bConsiderSelectionVariants=e.considerSelectionVariants;this._aConsiderNavigations=e.considerNavigations;this._bSuppressValueListsAssociation=e.suppressValueListsAssociation;}this.sFilterModelName=Q.FILTER_MODEL_NAME;this._sBasicFilterAreaID=Q.BASIC_FILTER_AREA_ID;this._aAnalyticalParameters=[];this._aFilterBarViewMetadata=[];this._oFilterBarViewMetadataExtend={};this._aFilterBarFieldNames=[];this._aFilterBarMultiValueFieldMetadata=[];this._aFilterBarDropdownFieldMetadata=[];this._aFilterBarStringDateFieldNames=[];this._aFilterBarDateFieldNames=[];this._aFilterBarTimeFieldNames=[];this._aFilterBarTimeIntervalFieldNames=[];this._aFilterBarDateTimeMultiValueFieldNames=[];this._aFilterBarStringFieldNames=[];this._aFilterBarDateTimeFieldNames=[];this._aFieldGroupAnnotation=[];this._oMetadataAnalyser=new m(this._oParentODataModel||this._sServiceURL);this.oModel=new J();this._aValueListProvider=[];this._aValueHelpDialogProvider=[];this._mTokenHandler={};this._mConditionTypeFields={};this._aSelectionVariants=[];this._oParameterization=null;this._oNonAnaParameterization=null;this._aPromises=[];};Q.FILTER_MODEL_NAME="fi1t3rM0d31";Q.BASIC_FILTER_AREA_ID="_BASIC";Q.BASIC_SEARCH_FIELD_ID="_BASIC_SEARCH_FIELD";Q.CUSTOM_FIELDS_MODEL_PROPERTY="_CUSTOM";Q.FIELD_NAME_REGEX=/\./g;Q.ASSOCIATE_VALUE_LISTS="AssociateValueLists";
Q._createFilterProvider=function(e){var i=new Q(e);return i._intialiseMetadata();};
Q.prototype._intialiseMetadata=function(){var e,k,n,R,W,X,i,j,Y,Z,$,_,a1;this._aPromises=[];this._aFilterBarViewMetadata.push({groupName:this._sBasicFilterAreaID,index:0,fields:[]});if(!this.sEntitySet&&this.sEntityType){this.sEntitySet=this._oMetadataAnalyser.getEntitySetNameFromEntityTypeName(this.sEntityType);}this.sEntityType=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);X=this._oMetadataAnalyser.getAllFilterableFieldsByEntitySetName(this.sEntitySet,this._bConsiderAnalyticalParameters,this._aConsiderNavigations);if(X){this._updateDisplayBehaviour();this._aFieldGroupAnnotation=this._oMetadataAnalyser.getFieldGroupsByFilterFacetsAnnotation(this.sEntityType);R=this._oMetadataAnalyser.getSelectionFieldsAnnotation(this.sEntityType);if(R&&R.selectionFields){this._aSelectionFields=R.selectionFields;}if(this._aFieldGroupAnnotation){e=this._aFieldGroupAnnotation.length;for(i=0;i<e;i++){W=this._aFieldGroupAnnotation[i];$=this._createGroupMetadata(W);$.index=this._aFilterBarViewMetadata.length;this._aFilterBarViewMetadata.push($);}}e=X.length;for(i=0;i<e;i++){W=X[i];k=W.fields.length;$=this._createGroupMetadata(W);this._aFilterBarViewMetadata.push($);for(j=0;j<k;j++){Y=W.fields[j];if(Y.type.indexOf("Edm.")===0){Z=this._createFieldMetadata(Y);$.fields.push(Z);this._aFilterBarFieldNames.push(Z.fieldName);}}n=W.hiddenFields&&W.hiddenFields.length;if(this._isRunningInValueHelpDialog&&n){for(j=0;j<n;j++){Y=W.hiddenFields[j];if(Y.type.indexOf("Edm.")===0){Z=this._createFieldMetadata(Y);$.hiddenFields.push(Z);}}}}}a1=this._getAdditionalConfigurationForCustomGroups(X);e=a1.length;for(j=0;j<e;j++){$=this._createGroupMetadataForCustomGroup(a1[j]);if($){this._aFilterBarViewMetadata.push($);}}_=this._getAdditionalConfigurationForCustomFilterFields();k=_.length;for(j=0;j<k;j++){Z=this._createFieldMetadataForCustomFilterFields(_[j]);if(Z){this._aFilterBarViewMetadata[0].fields.push(Z);}}if(this._hasBasicSearch()){Z=this._createBasicSearchFieldMetadata();this._aFilterBarViewMetadata[0].fields.push(Z);}if(!this._isRunningInValueHelpDialog){this._createParameters();}return new Promise(function(b1){Promise.all(this._aPromises).then(function(){if(this._bConsiderSelectionVariants){this._createSelectionVariants();}this._applyGroupId();this._applyIndexes();this._createInitialModel(true);this._initializeConditionTypeFields();this.setPending(this.isPending());this._bInitialized=true;b1(this);}.bind(this));}.bind(this));};
Q.prototype._createSelectionVariants=function(){this._aSelectionVariants=this._oMetadataAnalyser.getSelectionVariantAnnotationList(this.sEntityType);};
Q.prototype._createParameters=function(){if(this._oMetadataAnalyser.isSemanticAggregation(this.sEntityType)){if(this._bConsiderAnalyticalParameters){var e=sap.ui.require("sap/ui/model/analytics/odata4analytics");if(e){this._createAnalyticalParameters(e);}else{var i=new Promise(function(R){sap.ui.require(["sap/ui/model/analytics/odata4analytics"],function(e){this._createAnalyticalParameters(e);R();}.bind(this));}.bind(this));this._aPromises.push(i);}}}else{this._createNonAnalyticalParameters();}};
Q.prototype._createAnalyticalParameters=function(e){this._oParameterization=this._getAnalyticParameterization(e);this._createAnalyticParameters(this._oParameterization);};
Q.prototype._getAnalyticParameterization=function(i){var j,k;try{j=new i.Model(new i.Model.ReferenceByModel(this._oParentODataModel));}catch(e){throw"Failed to instantiate analytical extensions for given OData model: "+e.message;}k=j&&j.findQueryResultByName(this.sEntitySet);return(k&&k.getParameterization());};
Q.prototype._createNonAnalyticalParameters=function(){if(this.sEntitySet){this._oNonAnaParameterization=this._oMetadataAnalyser.getParametersByEntitySetName(this.sEntitySet);if(this._oNonAnaParameterization){this._createParametersByEntitySetName(this._oNonAnaParameterization.entitySetName,this._oNonAnaParameterization.parameters);}}};
Q.prototype.attachPendingChange=function(e){this._attachEvent("PendingChange",e);};
Q.prototype.detachPendingChange=function(e){this._detachEvent("PendingChange",e);};
Q.prototype.setPending=function(e){var i=this._bPending!==e;this._bPending=e;if(i){var j={};j.pending=e;this._fireEvent("PendingChange",j);}};
Q.prototype.isPending=function(){if(!this._bInitialized){return true;}for(var n in this._mConditionTypeFields){if(this._mConditionTypeFields[n].conditionType.isPending()){return true;}}return false;};
Q.prototype._updateDisplayBehaviour=function(){this._sTextArrangementDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(this.sEntityType);if(!this.sDefaultDropDownDisplayBehaviour){if(this._sTextArrangementDisplayBehaviour){this.sDefaultDropDownDisplayBehaviour=this._sTextArrangementDisplayBehaviour;}else{this.sDefaultDropDownDisplayBehaviour=G.descriptionOnly;}}if(!this.sDefaultTokenDisplayBehaviour){if(this._sTextArrangementDisplayBehaviour){this.sDefaultTokenDisplayBehaviour=this._sTextArrangementDisplayBehaviour;}else{this.sDefaultTokenDisplayBehaviour=G.descriptionAndId;}}};
Q.prototype._hasBasicSearch=function(){return this._isBasicSearchEnabled;};
Q.prototype._getAdditionalConfigurationForCustomFilterFields=function(){var e,j,i,R;if(!this._oAdditionalConfiguration){return[];}e=this._oAdditionalConfiguration.getControlConfiguration();if(!this._aFilterBarFieldNames||!this._aFilterBarFieldNames.length){return e;}R=[];j=e.length;for(i=0;i<j;i++){if(this._aFilterBarFieldNames.indexOf(e[i].key)<0){R.push(e[i]);}}return R;};
Q.prototype._getAdditionalConfigurationForCustomGroups=function(e){var k,n,R,i,W,j,X,Y;if(!this._oAdditionalConfiguration){return[];}k=this._oAdditionalConfiguration.getGroupConfiguration();if(!e||!e.length){return k;}W=[];R=e.length;n=k.length;for(i=0;i<n;i++){X=false;for(j=0;j<R;j++){Y=e[j].groupName||e[j].groupEntitySetName;if(Y===k[i].key){X=true;break;}}if(!X){W.push(k[i]);}}return W;};
Q.prototype._createInitialModelForField=function(j,e,i){var k=false,n,R,W=false,X=false,Y=null,Z=null,$,_=null,a1=[],b1=[];if(!e||e.isCustomFilterField){return;}if(e.filterRestriction!==H.multiple){X=true;}if((e.filterType==="date"||e.filterType==="time"||e.filterType==="datetime")&&!e.isFiscalDate){k=true;}if(i){n=e.defaultFilterValues;W=n&&n.length;if(!W){if(e.defaultPropertyValue&&e.isParameter){R=e.defaultPropertyValue;if(e.filterType==="numeric"){R=this._getType(e).parseValue(R,"string");}n=[{low:R}];W=true;}else if(e.defaultFilterValue){R=e.defaultFilterValue;n=[{low:R,high:R,operator:"EQ",sign:"I"}];W=true;}}}var c1=this._oAdditionalConfiguration?this._oAdditionalConfiguration.getControlConfigurationByKey(e.fieldName):null;if(e.hasFixedValues||(c1&&c1.controlType===B.dropDownList)){this._aFilterBarDropdownFieldMetadata.push(e);}if(e.filterRestriction===H.single){if(W){R=n[0];Y=k?this._createDateTimeValue(e,R.low):R.low;}j[e.fieldName]=Y;}else if(e.filterRestriction===H.interval&&e.type!=="Edm.Time"){if(W){R=n[0];Y=k?this._createDateTimeValue(e,R.low):R.low;Z=k?this._createDateTimeValue(e,R.high):R.high;}j[e.fieldName]={low:Y,high:Z};}else{if(W){$=n.length;while($--){R=n[$];if(X){_={"exclude":R.sign==="E","operation":R.operator==="CP"?"Contains":R.operator,"keyField":e.fieldName,"value1":k?this._createDateTimeValue(e,R.low):R.low,"value2":k?null:R.high};if((e.filterType==="time")&&R.high){_.value2=new Date(R.high);}}else{_={key:k?this._createDateTimeValue(e,R.low):R.low,text:k?"":R.low};}a1.push(_);}}this._aFilterBarMultiValueFieldMetadata.push(e);j[e.fieldName]={value:null};if(X){b1=a1.slice(0);a1=[];j[e.fieldName].ranges=b1;}j[e.fieldName].items=a1;this._updateMultiValueControl(e.control,a1,b1);}};
Q.prototype._createDateTimeValue=function(e,i){switch(e.type){case"Edm.Time":if(i.indexOf("PT")===0){return this._getTime(i);}else{L.error("Default value for "+e.fieldName+" could not be parsed.");}break;case"Edm.DateTime":if(typeof i=="string"&&e.displayFormat&&e.displayFormat.toLowerCase()=="date"){var j=i.split('T');i=j[0]+"T00:00:00";return new Date(i);}else{L.error("Default value for "+e.fieldName+" could not be parsed.");}break;case"Edm.DateTimeOffset":return new Date(i);default:L.error("Default value for "+e.fieldName+" could not be parsed.");}};
Q.prototype._createInitialModel=function(e){var k,n,R,W,X,j,i;k={};this._bCreatingInitialModel=true;this._aFilterBarMultiValueFieldMetadata=[];this._aFilterBarDropdownFieldMetadata=[];if(this._aFilterBarViewMetadata){n=this._aFilterBarViewMetadata.length;for(i=0;i<n;i++){X=this._aFilterBarViewMetadata[i];R=X.fields.length;for(j=0;j<R;j++){this._createInitialModelForField(k,X.fields[j],e);}W=X.hiddenFields&&X.hiddenFields.length;if(this._isRunningInValueHelpDialog&&W){for(j=0;j<W;j++){this._createInitialModelForField(k,X.hiddenFields[j],e);}}}}if(this._aAnalyticalParameters){R=this._aAnalyticalParameters.length;for(j=0;j<R;j++){this._createInitialModelForField(k,this._aAnalyticalParameters[j],e);}}this.oModel.setData(k);if(!e){this._clearConditionTypeFields();}this._updateConditionTypeFields();this._bCreatingInitialModel=false;};
Q.prototype._updateMultiValueControl=function(e,j,R,k){var i=0,n=null,W=null,X=null,Y=null,Z=null,$,_,a1;if(e&&j){i=j.length;if(e instanceof f){n=[];while(i--){Y=j[i].text||j[i].key;var W=new l();W.setKey(j[i].key);W.setText(Y);W.setTooltip(Y);n.push(W);}if(R){i=R.length;while(i--){X=R[i];if((X.value1===""||X.value1===null)&&(X.operation===y.EQ)){X.operation=N.Empty;X.tokenText=r.getFormattedRangeText(X.operation,null,null,X.exclude);X.value1=null;}if(X.tokenText){Y=X.tokenText;}else{$=X.value1;_=X.value2;if(k){var b1=true;var c1=["date","datetime","time"];if(c1.indexOf(k.filterType)>-1){a1=this._getType(k);if(a1){if($){if(k.filterType==="time"){$=D.dateToEdmTime(D.localToUtc($));}$=a1.formatValue($,"string",b1);}if(_){if(k.filterType==="time"){_=D.dateToEdmTime(D.localToUtc(_));}_=a1.formatValue(_,"string",b1);}}}else if((k.filterType==="numeric")){a1=this._getType(k);if(a1){if($!==""&&($!==undefined)){if(typeof $==="string"&&!isNaN($)){$=parseFloat($);X.value1=$;}$=a1.formatValue($,"string");}if(_!==""&&(_!==undefined)){if(typeof _==="string"&&!isNaN(_)){_=parseFloat(_);X.value2=_;}_=a1.formatValue(_,"string");}}}else if((k.filterType==="boolean")){a1=this._getType(k);if(a1){if($!==""&&($!==undefined)&&$==="false"){$=a1.formatValue(false,"string");}else{$=a1.formatValue($,"string");}if(_!==""&&(_!==undefined)&&_==="false"){_=a1.formatValue(false,"string");}else{_=a1.formatValue($,"string");}}}else{var d1=k.isCalendarDate||k.isFiscalDate||(($ instanceof Date)||(_ instanceof Date));if(d1){a1=this._getType(k);if($){$=a1.formatValue($,"string");}if(_){_=a1.formatValue(_,"string");}}}}Y=r.getFormattedRangeText(X.operation,$,_,X.exclude);}W=new l();W.setText(Y);W.setTooltip(Y);W.data("range",X);n.push(W);}}e.setTokens(n);e.fireTokenUpdate();}if(e instanceof M){Z=[];while(i--){Z.push(j[i].key);}e.setSelectedKeys(Z);}}};
Q.prototype._applyIndexes=function(){if(!this._aFilterBarViewMetadata){return;}this._aFilterBarViewMetadata=g.groupSorting(this._aFilterBarViewMetadata);};
Q.prototype._applyGroupId=function(){var e=Array.isArray(this._aFilterBarViewMetadata)?this._aFilterBarViewMetadata.length:0,n,R,W,i,j,k;for(i=0;i<e;i++){if(!this._aFilterBarViewMetadata[i].fields){continue;}n=this._aFilterBarViewMetadata[i].fields.length;for(j=0;j<n;j++){W=this._aFilterBarViewMetadata[i].fields[j];if(W&&W.groupId&&W.groupId!==this._aFilterBarViewMetadata[i].groupName){R=undefined;for(k=0;k<e;k++){if(this._aFilterBarViewMetadata[k].groupName===W.groupId){R=this._aFilterBarViewMetadata[k];break;}}if(R){this._aFilterBarViewMetadata[i].fields.splice(j,1);j--;n--;R.fields=R.fields||[];R.fields.push(W);}}}}};
Q.prototype._createFilterControlId=function(e){var i=this._oSmartFilter?this._oSmartFilter.getId():"unit-test";var j=s.replace(e.groupId||"");var n=s.replace(e.fieldName);return i+"-filterItemControl"+j+"-"+n;};
Q.prototype._createGroupMetadata=function(e){var i,j=null,k;k=e.groupName||e.groupEntitySetName;if(this._oAdditionalConfiguration){j=this._oAdditionalConfiguration.getGroupConfigurationByKey(k);}i={};i.groupName=k;i.groupLabel=this._getGroupLabel(e,j);i.fields=[];i.hiddenFields=[];i.index=this._getGroupIndex(j);return i;};
Q.prototype._createGroupMetadataForCustomGroup=function(e){var i;i={};i.groupName=e.key;i.groupLabel=e.label;i.fields=[];i.index=this._getGroupIndex(e);return i;};
Q.prototype._getTime=function(e){var i=u.getTimeInstance({pattern:"'PT'hh'H'mm'M'ss'S'"});return i.parse(e);};
Q.prototype._checkMetadataDefaultValue=function(e){var i=e.defaultFilterValue||e.defaultPropertyValue;if(i){try{if((e.type==="Edm.Time")&&(i.indexOf("PT")===0)){this._getTime(i);}else{this._getType(e);}}catch(j){e.defaultPropertyValue=null;e.defaultFilterValue=null;L.error("default value for "+e.fieldName+" could not be parsed.");}}};
Q.prototype._getType=function(e){var i,j={},k={},n={};if(e.ui5Type){return e.ui5Type;}if(e.precision||e.scale){k.precision=e.precision;k.scale=e.scale;}if(e.maxLength){k.maxLength=e.maxLength;}if(e.displayFormat){k.displayFormat=e.displayFormat;}if(e.isDigitSequence){k.isDigitSequence=e.isDigitSequence;}if(e.isCalendarDate){n.isCalendarDate=true;}if(e.isFiscalDate&&e.fiscalType){n.isFiscalDate=true;n.fiscalType=e.fiscalType;}if((e.filterType==="date")||(e.filterType==="time")||(e.filterType==="datetime")||e.isCalendarDate){j=Object.assign({},this._oDateFormatSettings,{UTC:false});}i=O.getType(e.type,j,k,n);return i;};
Q.prototype._setControlDisplayFormat=function(e,i){var j;if(!i){return;}j=i.style||i.pattern;if(!j){return;}e.setDisplayFormat(j);};
Q.prototype._createControl=function(e){var i,j,k=false,n,R;if(e.customControl){return e.customControl;}j=this._getType(e);i=new e.fControlConstructor(this._createFilterControlId(e));if(e.fControlConstructor===c){this._setControlDisplayFormat(i,this._oDateFormatSettings);if(e.isCalendarDate){i.bindProperty("dateValue",{path:this.sFilterModelName+">/"+e.fieldName+"/low",type:j});i.bindProperty("secondDateValue",{path:this.sFilterModelName+">/"+e.fieldName+"/high",type:j});}else{i.bindProperty("dateValue",this.sFilterModelName+">/"+e.fieldName+"/low");i.bindProperty("secondDateValue",this.sFilterModelName+">/"+e.fieldName+"/high");}}else if((e.fControlConstructor===C)||(e.fControlConstructor===S)){if(i.setForceSelection){i.setForceSelection(true);}if(e.fControlConstructor===S){i.addItem(new I({key:"",text:""}));i.addItem(new I({key:false,text:j.formatValue(false,"string")}));i.addItem(new I({key:true,text:j.formatValue(true,"string")}));}else{this._associateValueList(i,"items",e,false,this._getSuppressValueListsAssociation());i.attachSelectionChange(function(){if(this._bUpdatingFilterData||this._bCreatingInitialModel){return;}i.fireChange({filterChangeReason:e.fieldName,value:""});}.bind(this));}i.bindProperty('selectedKey',this.sFilterModelName+">/"+e.fieldName);}else if(e.fControlConstructor===M){this._associateValueList(i,"items",e,false,this._getSuppressValueListsAssociation());i.attachSelectionChange(function(X){if(this._bUpdatingFilterData||this._bCreatingInitialModel){return;}var Y=X.getSource(),Z=null,$=[],_;Z=Y.getSelectedItems();if(Z){_=Z.length;while(_--){$.push({key:Z[_].getKey(),text:Z[_].getText()});}}if(this.oModel){this.oModel.setProperty("/"+e.fieldName+"/items",$);}Y.fireChange({filterChangeReason:e.fieldName,value:""});}.bind(this));i.bindProperty("value",this.sFilterModelName+">/"+e.fieldName+"/value");}else if(e.fControlConstructor===f){if(e.controlType===B.date||e.type==="Edm.Time"||e.type==="Edm.DateTimeOffset"){i.setValueHelpOnly(true);if(e.filterRestriction===H.interval){this._associateValueHelpDialog(i,e,false,false);}else{this._associateValueHelpDialog(i,e,true,true);}}else{if(e.hasValueHelpDialog){this._associateValueHelpDialog(i,e,e.filterRestriction!==H.multiple,true);}else{i.setShowValueHelp(false);}i.bindProperty("value",{path:this.sFilterModelName+">/"+e.fieldName+"/value",type:j});}this._handleMultiInput(i,e,j);}else if(e.fControlConstructor===d){if(e.filterRestriction===H.interval){k=true;i.bindProperty("value",this.sFilterModelName+">/"+e.fieldName+"/low");if(!this.oResourceBundle){this.oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}if(!this.sIntervalPlaceholder){this.sIntervalPlaceholder=this.oResourceBundle.getText("INTERVAL_PLACEHOLDER_TEXT");}i.setPlaceholder(this.sIntervalPlaceholder);}else{i.bindProperty('value',{path:this.sFilterModelName+">/"+e.fieldName,type:j});}if(e.hasValueHelpDialog){i.setShowValueHelp(true);if(k){i.setValueHelpOnly(true);}this._associateValueHelpDialog(i,e,false,false);}}else if(e.isCalendarDate){this._setControlDisplayFormat(i,this._oDateFormatSettings);i.bindProperty("dateValue",{path:this.sFilterModelName+">/"+e.fieldName,type:j});}else if(e.fControlConstructor===b){i.bindProperty("dateValue",this.sFilterModelName+">/"+e.fieldName);this._setControlDisplayFormat(i,this._oDateFormatSettings);}else if(e.fControlConstructor===T||e.fControlConstructor===a){i.bindProperty("dateValue",this.sFilterModelName+">/"+e.fieldName);if(this._oDateFormatSettings&&this._oDateFormatSettings.style){i.setDisplayFormat(this._oDateFormatSettings.style);}}if(i instanceof b){i.attachChange(function(X){var Y=X.getParameter("valid");i.data("__mandatoryEmpty",null);if(Y){i.setValueState(K.None);i.setValueStateText();}else{var Z=i._parseValue(X.getParameter("newValue")),$=this._getSelectedDateRange(Z);i.setValueState(K.Error);if($[0]&&$[1]){var _=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp"),a1=this._getDateFieldOutOfRangeErrorText(i,$,j,_);i.setValueStateText(a1);}else if(j){try{j.parseValue("foo","string");}catch(b1){i.setValueStateText(b1.message);}}}}.bind(this));}if(e.hasTypeAhead){if(e.hasValueListAnnotation){i.setShowSuggestion(true);}i.setFilterSuggests(false);this._associateValueList(i,"suggestionRows",e,true,this._getSuppressValueListsAssociation());}if((e.displayFormat==="UpperCase")&&(e.controlType!==B.dropDownList)&&i.attachChange&&i.getValue&&i.setValue){i.attachChange(function(X){var Y=i.getValue();if(Y){i.setValue(Y.toUpperCase());}});if(this._mTokenHandler[i.getId()]&&this._mTokenHandler[i.getId()].parser){var W=this._mTokenHandler[i.getId()].parser;W.getKeyFields()[0].displayFormat=e.displayFormat;}}if(i instanceof d){if(e.maxLength){n=parseInt(e.maxLength);if(!isNaN(n)){if(this._mTokenHandler[i.getId()]&&this._mTokenHandler[i.getId()].parser){var W=this._mTokenHandler[i.getId()].parser;W.getKeyFields()[0].maxLength=n;}else{if(!e.hasValueListAnnotation&&!k){i.setMaxLength(n);}}}}if(e.isFiscalDate){i.setPlaceholder(j.formatter.getPattern());}}R=function(X){var Y=X.getParameter("exception");var Z=X.getParameter("element");if(i&&Z&&(i.getId()===Z.getId())){if(Y){if(i.setValueStateText){i.setValueStateText(Y.message);}}if(i.setValueState){i.setValueState(K.Error);}i.data("__mandatoryEmpty",null);}};i.attachParseError(R);i.attachFormatError(R);i.attachValidationError(R);i.attachValidationSuccess(function(X){var Y=X.getParameter("element");if(i&&Y&&(i.getId()===Y.getId())){if(i.setValueState){i.setValueState(K.None);}if(i.setValueStateText){i.setValueStateText();}i.data("__mandatoryEmpty",null);delete i.__sValidationText;}});return i;};
Q.prototype._getControlConstructor=function(e,i){var j=d,k,n,R;R=i?i+e.fieldName:e.fieldName;if(e.isCustomFilterField){j=undefined;}else{k=(e.filterRestriction===H.single);n=(e.filterRestriction===H.interval);if(e.controlType===B.date){if(k){j=b;}else{j=n?c:f;}if(e.isCalendarDate){this._aFilterBarStringDateFieldNames.push(R);}else{this._aFilterBarDateFieldNames.push(R);}if(e.filterRestriction===H.multiple){this._aFilterBarDateTimeMultiValueFieldNames.push(R);}}else if(e.controlType===B.dropDownList){if(k){j=this._isBooleanWithFixedValuedButWithoutValueListAnnotation(e)?S:C;}else{j=M;}if(!k){e.filterRestriction=H.multiple;}}else if(e.type==="Edm.Time"){if(k){j=T;}else{j=f;}this._aFilterBarTimeFieldNames.push(R);if(n){this._aFilterBarTimeIntervalFieldNames.push(R);}else if(e.filterRestriction===H.multiple){this._aFilterBarDateTimeMultiValueFieldNames.push(R);}}else if(!n&&e.controlType===B.dateTimePicker){if(k){j=a;}else{j=f;}this._aFilterBarDateTimeFieldNames.push(R);if(e.filterRestriction===H.multiple){this._aFilterBarDateTimeMultiValueFieldNames.push(R);}}else if(n&&e.type==="Edm.DateTimeOffset"){this._aFilterBarDateTimeFieldNames.push(R);}else if(!k&&!n){j=f;}}return j;};
Q.prototype._handleTokenUpdate=function(e,i){this._tokenUpdate({control:i.control,fieldViewMetadata:i.fieldViewMetadata,removedTokens:e&&e.getParameter("removedTokens")});};
Q.prototype._tokenUpdate=function(e){var R=e.removedTokens,i=e.control,j=e.fieldViewMetadata,k,n=[],W,X,Y,Z=[],$="/"+j.fieldName;if(this._bUpdatingFilterData||this._bCreatingInitialModel){return;}k=i.getTokens();if(R){k=k.filter(function(X){return R.indexOf(X)===-1;});}if(Array.isArray(k)&&k.length>0){W=k.length;while(W--){X=k[W];Y=X.data("range");if(Y){Y.tokenText=X.getText();if(Y&&(X.getKey().indexOf("range_")===0)){if(j.type==="Edm.Time"){if(Y.value1&&(Y.value1.ms||Y.value1.ms===0)){Y.value1=D.utcToLocal(D.edmTimeToDate(Y.value1));}if(Y.value2&&(Y.value2.ms||Y.value2.ms===0)){Y.value2=D.utcToLocal(D.edmTimeToDate(Y.value2));}}}Z.push(Y);}else{n.push({key:X.getKey(),text:X.getText()});}}}if(this.oModel){this.oModel.setProperty($+"/items",n);this.oModel.setProperty($+"/ranges",Z);}if(i.__bValidatingToken){delete i.__bValidatingToken;}if(!i._pendingAutoTokenGeneration){i.fireChange({filterChangeReason:j.fieldName,value:""});}};
Q.prototype._handleMultiInput=function(e,i,j){e._setFilterProvider(this);e._setFieldViewMetadata(i);e.attachTokenUpdate({control:e,fieldViewMetadata:i},this._handleTokenUpdate,this);var k,n=((i.type==="Edm.DateTime"&&i.displayFormat==="Date"));if(i.hasValueListAnnotation||(i.type==="Edm.String")||n){e.attachEvent("_validateOnPaste",function(R){var W=R.getParameter("texts"),X,Y,Z,$,_;Y=W?W.length:0;if(Y>1){R.preventDefault();X=this.oModel.getProperty("/"+i.fieldName);_=X.ranges||[];e.setValue("");while(Y--){Z=W[Y];if(Z){$=null;if(n){k=this._getDateValue(Z,j);if(isNaN(k.getDate())){continue;}else{$=Z;Z=k;}}var a1=t._createRangeByText(Z);_.push(Object.assign({"keyField":i.fieldName,"tokenText":$,"value1":Z,"value2":null},a1));}}this.oModel.setProperty("/"+i.fieldName+"/ranges",_);this._updateMultiValueControl(e,X.items,_,i);}}.bind(this));}};
Q.prototype._associateValueHelpDialog=function(e,i,j,k){if(this._getSuppressValueListsAssociation()){this._attachEventOnce(Q.ASSOCIATE_VALUE_LISTS,function(){this._associateValueHelpDialogHandler(e,i,j,k);}.bind(this));}else{this._associateValueHelpDialogHandler(e,i,j,k);}};
Q.prototype._associateValueHelpDialogHandler=function(e,i,j,k){var n={fieldName:i.fieldName,control:e,model:this._oParentODataModel,filterModel:this.oModel,filterProvider:this,dateFormatSettings:this._oDateFormatSettings,fieldViewMetadata:i,displayFormat:i.displayFormat,displayBehaviour:i.displayBehaviour,loadAnnotation:i.hasValueListAnnotation,fullyQualifiedFieldName:i.fullName,metadataAnalyser:this._oMetadataAnalyser,preventInitialDataFetchInValueHelpDialog:i.preventInitialDataFetchInValueHelpDialog,supportMultiSelect:k,supportRanges:j,isSingleIntervalRange:i.filterRestriction===H.interval,isUnrestrictedFilter:i.filterRestriction!==H.multiple,type:i.filterType,maxLength:i.maxLength,scale:i.scale,precision:i.precision};if(i.isCalendarDate){n.oType=this._getType(i);}var R=new V(n);R.attachValueListChanged(function(X){if(this._oSmartFilter){this._oSmartFilter.fireFilterChange(X);this._oSmartFilter.validateMandatoryFields();}}.bind(this));if(i.visibleInAdvancedArea||(i.groupId===Q.BASIC_FILTER_AREA_ID)){this.aFilterAnnotations.push(R.loadAnnotation().then(function(X){this._enrichFieldViewMetadata(i,X);}.bind(this)));}this._aValueHelpDialogProvider.push(R);if(j&&e.addValidator){var W=new t();W.addKeyField({key:i.fieldName,label:i.label,type:i.filterType,oType:i.ui5Type});if(i.filterType==="numeric"){W.setDefaultOperation("EQ");}W.associateInput(e);this._mTokenHandler[e.getId()]={parser:W};}};
Q.prototype._determineFieldLabel=function(e){var i,j=e.label;if(this._oSmartFilter&&this._oSmartFilter.determineFilterItemByName){i=this._oSmartFilter.determineFilterItemByName(e.name);if(i){j=i.getLabel();}}return j;};
Q.prototype._associateValueList=function(e,i,j,k,n){var R=j.visibleInAdvancedArea||(j.groupId===Q.BASIC_FILTER_AREA_ID),W={control:e,aggregation:i,fieldViewMetadata:j,hasTypeAhead:k,annotaionIsToBeLoaded:R};if(n&&R){this._attachEventOnce(Q.ASSOCIATE_VALUE_LISTS,function(){this._associateValueListHandler(W);}.bind(this));}else{this._associateValueListHandler(W);}};
Q.prototype._associateValueListHandler=function(e){var i,j=e.control,k=e.aggregation,n=e.fieldViewMetadata,R=e.hasTypeAhead,W=e.annotaionIsToBeLoaded;if(this._oSmartFilter&&!this._bAttachInitializedDone&&U.fromQuery(window.location.search).get("sap-ui-comp-filterbar-data-defer")){var X=this._oParentODataModel;this._sDeferredGroupId="sapUiCompFilterBarData";var Y=X.getDeferredGroups?this._oParentODataModel.getDeferredGroups():null;if(Y!==null){Y.push(this._sDeferredGroupId);X.setDeferredGroups(Y);var Z=function(){X.submitChanges({groupId:this._sDeferredGroupId});var Y=X.getDeferredGroups().filter(function($){return $!==this._sDeferredGroupId;}.bind(this));X.setDeferredGroups(Y);delete this._sDeferredGroupId;this._oSmartFilter.detachInitialized(Z);}.bind(this);this._oSmartFilter.attachInitialized(Z);this._bAttachInitializedDone=true;}}if(n.hasValueListAnnotation){i=new p({fieldName:n.fieldName,control:j,model:this._oParentODataModel,filterModel:this.oModel,filterProvider:this,displayFormat:n.displayFormat,dateFormatSettings:this._oDateFormatSettings,fieldViewMetadata:n,displayBehaviour:n.displayBehaviour,loadAnnotation:true,fullyQualifiedFieldName:n.fullName,metadataAnalyser:this._oMetadataAnalyser,type:n.filterType,aggregation:k,typeAheadEnabled:R,enableShowTableSuggestionValueHelp:n.hasValueHelpDialog,deferredGroupId:this._sDeferredGroupId,context:"SmartFilterBar",fieldHistoryEnabled:n.historyEnabled!==undefined?n.historyEnabled:true,fieldHistoryEnabledInitial:n.historyEnabledInitial!==undefined?n.historyEnabledInitial:true});i.attachValueListChanged(function($){if(this._oSmartFilter){this._oSmartFilter.fireFilterChange($);this._oSmartFilter.validateMandatoryFields();}}.bind(this));if(W){this.aFilterAnnotations.push(i.loadAnnotation().then(function($){this._enrichFieldViewMetadata(n,$);}.bind(this)));}this._aValueListProvider.push(i);}else if(this._mTokenHandler[j.getId()]&&this._mTokenHandler[j.getId()].parser){this._mTokenHandler[j.getId()].parser.setDefaultOperation("EQ");}};
Q.prototype._createAnalyticParameters=function(e){var i,j;if(e){j=e.getAllParameterNames();i=e.getEntitySet();if(i){this._createParametersByEntitySetName(i.getQName(),j);}}};
Q.prototype._createParametersByEntitySetName=function(e,j){var k,n=this._oMetadataAnalyser.getFieldsByEntitySetName(e);for(var i=0;i<n.length;i++){if(j.indexOf(n[i].name)>=0){k=this._createAnalyticParameterMetadata(n[i]);if(k&&k.visible){if(this._oNonAnaParameterization&&k.isCustomFilterField){continue;}this._aAnalyticalParameters.push(k);}}}};
Q.prototype._createAnalyticParameterMetadata=function(e){var i,j=v.ANALYTICAL_PARAMETER_PREFIX,k=function(i){return i.type==="Edm.String"&&i["sap:parameter"]==="optional";};e.filterRestriction="single-value";i=this._createFieldMetadata(e,j);if(i){i.fieldName=j+e.name;i.isMandatory=k(i)?false:true;i.isParameter=true;i.visibleInAdvancedArea=true;}else{L.error("_createAnalyticParameterMetadata issue with property: "+e.name);}return i;};
Q.prototype.getAnalyticParameters=function(){return this._aAnalyticalParameters;};
Q.prototype.getSelectionVariants=function(){return this._aSelectionVariants;};
Q.prototype.getAnalyticBindingPath=function(){var e,i=[],j=this.getAnalyticParameters();j.forEach(function(k){i.push(k.fieldName);});e=this.getFilledFilterData(i);if(this._oParameterization){return this._createAnalyticBindingPath(j,e);}else{return this._createNonAnalyticBindingPath(j,e);}};
Q.prototype._createAnalyticBindingPath=function(e,i){var j,k="",n;n=this._getParameterizationRequest(this._oParameterization);if(n){e.forEach(function(R){j=i[R.fieldName];if(!j){j="";}else if(R.type==="Edm.Time"&&j instanceof Date){if(this._oDateFormatSettings&&!this._oDateFormatSettings.UTC){j=D.utcToLocal(j);}j=D.localToUtc(j);j={__edmType:"Edm.Time",ms:j.valueOf()};}else if((R.type!=="Edm.DateTimeOffset")&&this._oDateFormatSettings&&this._oDateFormatSettings.UTC&&j instanceof Date){j=D.localToUtc(j);}n.setParameterValue(R.name,j);}.bind(this));k=n.getURIToParameterizationEntry()+'/'+this._oParameterization.getNavigationPropertyToQueryResult();}return k;};
Q.prototype._createNonAnalyticBindingPath=function(e,i){var j,k="",n="";if(this._oNonAnaParameterization){k="/"+this._oNonAnaParameterization.entitySetName+'(';e.forEach(function(R){j=i[R.fieldName];if(!j){j="";}else if(R.type==="Edm.Time"&&j instanceof Date){j=D.localToUtc(j);j={__edmType:"Edm.Time",ms:j.valueOf()};}else if((R.type!=="Edm.DateTimeOffset")&&this._oDateFormatSettings&&this._oDateFormatSettings.UTC&&j instanceof Date){j=D.localToUtc(j);}k+=(n+R.name+"="+z(this._oParentODataModel.formatValue(j,R.type)));n=",";}.bind(this));k+=(")/"+this._oNonAnaParameterization.navPropertyName);}return k;};
Q.prototype._getParameterizationRequest=function(){return this._oParameterization?new x.ParameterizationRequest(this._oParameterization):null;};
Q.prototype._constructContextUrl=function(e,i){var j=e._getServerUrl();if(j&&(j.lastIndexOf('/')===(j.length-1))){j=j.substr(0,j.length-1);}return j+e.sServiceUrl+"/$metadata#"+i;};
Q.prototype.getFilterContextUrl=function(){var e,i=null;if(this._oParentODataModel&&this._oParentODataModel.isA("sap.ui.model.odata.v2.ODataModel")&&this._oParentODataModel.getMetaModel()){e=this._oParentODataModel.getMetaModel().getODataEntitySet(this.sEntitySet);if(e){i=this._constructContextUrl(this._oParentODataModel,e.name);}}return i;};
Q.prototype.getParameterContextUrl=function(){var e,i=null;if(this._oParentODataModel&&this._oParentODataModel.isA("sap.ui.model.odata.v2.ODataModel")&&this._oParentODataModel.getMetaModel()){if(this._oParameterization&&this._oParameterization.getEntitySet()){e=this._oParameterization.getEntitySet().getQName();}else if(this._oNonAnaParameterization){e=this._oNonAnaParameterization.entitySetName;}if(e){i=this._constructContextUrl(this._oParentODataModel,e);}}return i;};
Q.prototype._createFieldMetadata=function(e,i){var j,k,n,R,W;e.fieldName=this._getFieldName(e);e.fieldNameOData=e.fieldName.replace(Q.FIELD_NAME_REGEX,"/");k=this._oAdditionalConfiguration?this._oAdditionalConfiguration.getControlConfigurationByKey(e.fieldName):null;j=Object.assign({},e);j.filterRestriction=this._getFilterRestriction(e.filterRestriction,k);this._updateValueListMetadata(j,e);j.hasValueHelpDialog=this._hasValueHelpDialog(j,k);if(k){j.preventInitialDataFetchInValueHelpDialog=this._getPreventInitialDataFetchInValueHelpDialog(j,k);if(k.displayBehaviour&&k.displayBehaviour!=="auto"){j.displayBehaviour=k.displayBehaviour;}j.isCustomFilterField=!!(k.customControl);j.visibleInAdvancedArea=!!(k.visibleInAdvancedArea);j.defaultFilterValues=k.defaultFilterValues;j.customControl=k.customControl;n=k.conditionType;j.width=this._getWidth(k);j.isVisible=this._isVisible(k);j.historyEnabled=k.historyEnabled;j.historyEnabledInitial=k.historyEnabledInitial;}else{j.preventInitialDataFetchInValueHelpDialog=this._getPreventInitialDataFetchInValueHelpDialog(j);j.isVisible=true;j.isCustomFilterField=false;j.visibleInAdvancedArea=false;}j.controlType=this._getControlType(j,k);j.label=this._getLabel(e,k);j.isMandatory=this._isMandatory(e,k);j.groupId=this._getGroupID(e,k);j.index=this._getIndex(e,k);j.fControlConstructor=this._getControlConstructor(j,i);j.isFiscalDate=o.isFiscalValue(j);j.fiscalType=o.getFiscalAnotationType(j);if(j.isFiscalDate){o.updateViewMetadata(j);}j.filterType=this._getFilterType(j);j.hasTypeAhead=this._hasTypeAhead(j,e,k);j.ui5Type=this._getType(j);if(j.ui5Type&&j.ui5Type.isA("sap.ui.model.odata.type.DateTime")){j.ui5Type.formatValue(new Date(),"string");j.ui5Type.oFormat.oFormatOptions.UTC=false;}j.fCreateControl=function(Z){var $;Z.control=this._createControl(Z);$=this.oModel.getData()[Z.fieldName];if($){this._updateMultiValueControl(Z.control,$.items,$.ranges,Z);}}.bind(this);this._applyWidth(j);if(j.type==="Edm.String"){this._aFilterBarStringFieldNames.push(j.fieldName);}j.conditionType=null;if(!n&&this._bUseDateRangeType&&(j.fControlConstructor===c)){n="sap.ui.comp.config.condition.DateRangeType";}if(n){R="";if(typeof n==="object"){R=n.module;n.module=null;}else{R=n;n=null;}try{R=R.replace(/\./g,"/");var X=sap.ui.require(R);if(X){this._enhanceConditionTypeInfo(X,R,n,j);}else{W=new Promise(function(Z){sap.ui.require([R],function(X){this._enhanceConditionTypeInfo(X,R,n,j);Z();}.bind(this));}.bind(this));this._aPromises.push(W);}}catch(Y){L.error("Module "+R+" could not be loaded");}}else{this._checkMetadataDefaultValue(j);}return j;};
Q.prototype._requireConditionType=function(e,i,j){var e=e.replace(/\./g,"/");var k=sap.ui.require(e);if(k){this._enhanceConditionTypeInfo(k,e,i,j);}else{sap.ui.require([e],function(k){this._enhanceConditionTypeInfo(k,e,i,j);}.bind(this));}};
Q.prototype._enhanceConditionTypeInfo=function(e,i,j,k){var n=e;k.conditionType=new n(k.fieldName,this,k);this._mConditionTypeFields[k.fieldName]=k;if(j&&!this._bUseDateRangeType){k.conditionType.applySettings(j);}this._checkMetadataDefaultValue(k);};
Q.prototype._getFilterType=function(e){return r._getFilterType(e);};
Q.prototype._updateValueListMetadata=function(e,i){e.hasValueListAnnotation=i["sap:value-list"]!==undefined;if(e.hasValueListAnnotation){e.hasFixedValues=i["sap:value-list"]==="fixed-values";}else if(i["com.sap.vocabularies.Common.v1.ValueList"]){e.hasValueListAnnotation=true;e.hasFixedValues=this._oMetadataAnalyser.getValueListSemantics(i["com.sap.vocabularies.Common.v1.ValueList"])==="fixed-values";if(!e.hasFixedValues){e.hasFixedValues=m.isValueListWithFixedValues(i);}}};
Q.prototype._createBasicSearchFieldMetadata=function(){var e;var R=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");e={};e.filterRestriction=H.single;e.name=Q.BASIC_SEARCH_FIELD_ID;e.fieldName=Q.BASIC_SEARCH_FIELD_ID;e.label=undefined;e.isMandatory=false;e.isVisible=true;e.groupId=Q.BASIC_FILTER_AREA_ID;e.index=-1;e.control=new h(this._oSmartFilter.getId()+"-btnBasicSearch",{showSearchButton:true});if(!this._isRunningInValueHelpDialog){e.control.setPlaceholder(R.getText("FILTER_BAR_BSEARCH_PLACE_HOLDER"));}e.control.bindProperty('value',this.sFilterModelName+">/"+e.fieldName);this._oBasicSearchControl=e.control;return e;};
Q.prototype._applyWidth=function(e){if(e&&e.width&&e.control&&(typeof e.control.setWidth==='function')){e.control.setWidth(e.width);}};
Q.prototype._createFieldMetadataForCustomFilterFields=function(e){var i;if(!e||!e.customControl){return undefined;}i={};i.name=e.key;i.fieldName=e.key;i.label=e.label;i.visibleInAdvancedArea=!!(e&&e.visibleInAdvancedArea);i.isVisible=this._isVisible(e);i.groupId=e.groupId;i.isMandatory=this._isMandatory(undefined,e);i.index=e.index;i.width=this._getWidth(e);i.control=e.customControl;i.isCustomFilterField=true;this._applyWidth(i);return i;};
Q.prototype._getFieldName=function(e){if(!e.parentPropertyName){return e.name;}else{return e.parentPropertyName+"."+e.name;}};
Q.prototype._getPreventInitialDataFetchInValueHelpDialog=function(e,i){if(i&&!i.isSetPreventInitialDataFetchInValueHelpDialog){return i.preventInitialDataFetchInValueHelpDialog;}if(m.isValueList(e)&&e["com.sap.vocabularies.Common.v1.ValueList"]&&e["com.sap.vocabularies.Common.v1.ValueList"].FetchValues){return e["com.sap.vocabularies.Common.v1.ValueList"].FetchValues.Int!=="1";}return false;};
Q.prototype._hasValueHelpDialog=function(e,i){var j=true;if(i){if(i.controlType===B.dropDownList){j=false;}else if(i.hasValueHelpDialog!==true){j=false;}}if(e&&!e.hasValueListAnnotation){if(e.filterRestriction===H.single||e.filterRestriction===H.multiple){j=false;}}return j;};
Q.prototype._isVisible=function(e){if(e&&e.isVisible===false){return false;}return true;};
Q.prototype._getWidth=function(e){if(e&&e.width){return e.width;}return undefined;};
Q.prototype._isMandatory=function(e,i){if(i&&i.mandatory!==P.auto){return i.mandatory===P.mandatory;}if(e){return e.requiredFilterField;}return false;};
Q.prototype._getFilterRestriction=function(e,i){if(i&&i.filterType&&i.filterType!==H.auto){return i.filterType;}switch(e){case"single-value":return H.single;case"multi-value":return H.multiple;case"interval":return H.interval;default:return H.auto;}};
Q.prototype._getControlType=function(e,i){var j;if(i&&i.controlType&&i.controlType!==B.auto){j=i.controlType;}else if(e.type==="Edm.DateTime"&&e.displayFormat==="Date"||e.isCalendarDate){j=B.date;}else if(e.type==="Edm.DateTimeOffset"){j=B.dateTimePicker;}else if(e.hasValueListAnnotation&&e.hasFixedValues){j=B.dropDownList;}else if(this._isBooleanWithFixedValuedButWithoutValueListAnnotation(e)){j=B.dropDownList;}else{j=B.input;}return j;};
Q.prototype._isBooleanWithFixedValuedButWithoutValueListAnnotation=function(e){if(e.type==="Edm.Boolean"&&!e.hasFixedValues&&!e.hasValueListAnnotation&&(e.filterRestriction==="single")){return true;}return false;};
Q.prototype._getGroupID=function(e,i){if(i&&i.groupId){return i.groupId;}else if(e&&(e.requiredFilterField||(this._aSelectionFields&&this._aSelectionFields.indexOf(e.fieldNameOData)>-1))){return this._sBasicFilterAreaID;}return this._getGroupIDFromFieldGroup(e);};
Q.prototype._getGroupIDFromFieldGroup=function(e){var i=0,j=null,k;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){i=this._aFieldGroupAnnotation.length;while(i--){j=this._aFieldGroupAnnotation[i];if(j&&j.fields&&j.fields.indexOf(e.fieldNameOData)>-1){k=j.groupName;break;}}}return k;};
Q.prototype._getLabel=function(e,i){if(i&&i.label){return i.label;}return this._getLabelFromFieldGroup(e)||e.fieldLabel||e.fieldName;};
Q.prototype._getLabelFromFieldGroup=function(e){var i=0,j=null,k;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){i=this._aFieldGroupAnnotation.length;while(i--){j=this._aFieldGroupAnnotation[i];if(j&&j.fields&&j.fields.indexOf(e.fieldNameOData)>-1){k=j.labels[e.fieldNameOData];break;}}}return k;};
Q.prototype._getIndex=function(e,i){if(i&&(i.index>=0)){return i.index;}else if(this._aSelectionFields&&this._aSelectionFields.indexOf(e.fieldNameOData)>-1){return this._aSelectionFields.indexOf(e.fieldNameOData);}return this._getIndexFromFieldGroup(e);};
Q.prototype._getIndexFromFieldGroup=function(e){var i=0,j=null,k;if(e&&this._aFieldGroupAnnotation&&this._aFieldGroupAnnotation.length){i=this._aFieldGroupAnnotation.length;while(i--){j=this._aFieldGroupAnnotation[i];if(j&&j.fields){k=j.fields.indexOf(e.fieldNameOData);if(k>-1){break;}k=undefined;}}}return k;};
Q.prototype._getGroupIndex=function(e){if(e&&(e.index||e.index===0)){return e.index;}};
Q.prototype._getGroupLabel=function(e,i){if(i&&i.label){return i.label;}return e.groupLabel||e.groupName||e.groupEntitySetName;};
Q.prototype._hasTypeAhead=function(e,i,j){var k;k=true;if(j){k=j.hasTypeAhead;}else if(i.type!=="Edm.String"){return false;}if(!(e.fControlConstructor===d||e.fControlConstructor===f)){return false;}return k;};
Q.prototype.getModel=function(){return this.oModel;};
Q.prototype.getFilterBarViewMetadata=function(){return this._aFilterBarViewMetadata;};
Q.prototype._getFilterBarViewMetadataExtend=function(){return this._oFilterBarViewMetadataExtend;};
Q.prototype.getAssociatedValueHelpProviders=function(){return this._aValueHelpDialogProvider;};
Q.prototype.getAssociatedValueListProviders=function(){return this._aValueListProvider;};
Q.prototype.getParameters=function(){var e,i=null;if(this.oModel){i=this.oModel.getProperty("/"+Q.BASIC_SEARCH_FIELD_ID);}if(this._sBasicSearchFieldName||i){e={custom:{}};if(this._sBasicSearchFieldName){e.custom["search-focus"]=this._sBasicSearchFieldName;}e.custom["search"]=i||"";}return e;};
Q.prototype.getFilters=function(e){var i=null;if(this.oModel){i=this.oModel.getData();}return Q.generateFilters(e,i,{dateSettings:this._oDateFormatSettings,useContainsAsDefault:this._bUseContainsAsDefault,stringFields:this._aFilterBarStringFieldNames,timeFields:this._aFilterBarTimeFieldNames,dateTimeOffsetValueFields:this._aFilterBarDateTimeFieldNames,viewMetadataData:this._aFilterBarViewMetadata});};
Q.prototype.getFilterData=function(){return this.oModel?this.oModel.getData():null;};
Q.prototype.getFilterDataAsString=function(){return this.oModel?this.oModel.getJSON():null;};
Q.prototype.getFilledFilterData=function(e){var i,j={},k,n,R;i=this.oModel?this.oModel.getData():null;if(i&&e){k=e.length;while(k--){n=e[k];if(n&&n!==Q.BASIC_SEARCH_FIELD_ID){R=i[n];if(R&&R.hasOwnProperty("low")){if(R.low){j[n]=R;}}else if(R&&R.hasOwnProperty("items")){if(R.value&&typeof R.value==="string"){R.value=R.value.trim();}if(R.items.length||(R.ranges&&R.ranges.length)||R.value||(typeof R.value==="boolean")){j[n]=R;}}else if(R){if(typeof R==="string"){R=R.trim();}if(R){j[n]=R;}}}if(k===0){n=Q.CUSTOM_FIELDS_MODEL_PROPERTY;R=i[n];if(R){j[n]=R;}}}}return A({},j);};
Q.prototype.getFilledFilterDataAsString=function(e){return JSON.stringify(this.getFilledFilterData(e));};
Q.prototype.setFilterData=function(j,R){var e=null,i=null,k=null;if(this.oModel&&j){this._bUpdatingFilterData=true;try{if(R){this._createInitialModel(false);}e=this._parseFilterData(j,R);if(e){this.oModel.setData(e,true);i=[];var n=arguments[2];if(n){i.push(n);}for(k in e){i.push(k);}this._handleFilterDataUpdate(i);}}finally{this._bUpdatingFilterData=false;}}};
Q.prototype.setFilterDataAsString=function(j,R){if(j){this.setFilterData(JSON.parse(j),R);}};
Q.prototype._parseFilterData=function(j,R){return Q.parseFilterData(this.oModel.getData(),j,{stringDateFields:this._aFilterBarStringDateFieldNames,dateFields:this._aFilterBarDateFieldNames,timeFields:this._aFilterBarTimeFieldNames,timeIntervalFields:this._aFilterBarTimeIntervalFieldNames,dateTimeMultiValueFields:this._aFilterBarDateTimeMultiValueFieldNames,conditionTypeFields:this._mConditionTypeFields,dateTimeOffsetValueFields:this._aFilterBarDateTimeFieldNames,viewMetadataData:this._aFilterBarViewMetadata,filterProvider:this},R);};
Q.prototype._handleFilterDataUpdate=function(e){var i=0,j,k,n;var _=function(R,W){var X=W;R.forEach(function(Y){W.forEach(function(Z){if(Z.operation===y.EQ&&Z.value1===Y.key){X.splice(W.indexOf(Z),1);}});});return X;};if(this._aFilterBarMultiValueFieldMetadata){i=this._aFilterBarMultiValueFieldMetadata.length;while(i--){if(!k){k=this.oModel.getData();}if(k){j=this._aFilterBarMultiValueFieldMetadata[i];if(e.indexOf(j.fieldName)>-1){n=k[j.fieldName];if(n){if(n.items&&n.items.length>0&&n.ranges&&n.ranges.length>0){n.ranges=_(n.items,n.ranges);}this._updateMultiValueControl(j.control,n.items,n.ranges,j);}}}}this._updateConditionTypeFields();}};
Q.prototype.clear=function(){this._createInitialModel(false);};
Q.prototype.reset=function(){this._createInitialModel(true);};
Q.prototype._initializeConditionTypeFields=function(){var e=function(i){this.setPending(this.isPending());}.bind(this);for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.initialize(this.oModel.getData()[n]);if(this._mConditionTypeFields[n].conditionType.getAsync()){this._mConditionTypeFields[n].conditionType.attachPendingChange(e);}}};
Q.prototype._updateConditionTypeFields=function(){var e=this._oldData;var i=this.oModel.getData();this._oldData=A({},i);if(e!==undefined){var j=[],n;for(n in i){var k=JSON.stringify(i[n]);var R=JSON.stringify(e[n]);if(k!==R){j.push(n);}}if(j.length>0){for(n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.providerDataUpdated(j,i);}}}};
Q.prototype._clearConditionTypeFields=function(){var e=this.oModel.getData();for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.initialize(e[n]);}};
Q.prototype._validateConditionTypeFields=function(){var i=false;for(var n in this._mConditionTypeFields){var e=this._mConditionTypeFields[n].conditionType.validate();if(!e&&!i){i=true;}}return i;};
Q.prototype._getFieldMetadata=function(e){return Q._getFieldMetadata(this.getFilterBarViewMetadata(),e);};
Q._getFieldMetadata=function(e,i){var j=null;e.some(function(k){if(k&&k.fields){k.fields.some(function(n){if(n&&n.fieldName===i){j=n;}return j!==null;});}return j!==null;});return j;};
Q.prototype._getSelectedDateRange=function(e){if(!Array.isArray(e)){e=[e,e];}return e;};
Q.prototype._getDateFieldOutOfRangeErrorText=function(e,i,j,R){var k=e.getMinDate()||e._oMinDate,n=e.getMaxDate()||e._oMaxDate;if(i[0].getTime()<k.getTime()){return R.getText("FILTER_BAR_DATE_FIELD_MIN_DATE_ERROR",[j.formatValue(k,"string")]);}if(i[1].getTime()>n.getTime()){return R.getText("FILTER_BAR_DATE_FIELD_MAX_DATE_ERROR",[j.formatValue(n,"string")]);}};
Q.generateFilters=function(e,i,j){var k=[],n=null,R=null,W=null,X=null,Y=Q.FIELD_NAME_REGEX,Z=null,$,_,a1=null,b1=0,c1=0,d1,e1,f1,g1,h1,i1,j1,k1,l1,m1=[],n1,o1,p1;if(j){d1=j.dateSettings;e1=j.useContainsAsDefault;f1=j.stringFields;g1=j.timeFields;j1=j.dateTimeOffsetValueFields;m1=j.viewMetadataData||[];}if(e&&i){c1=e.length;while(c1--){i1=false;k1=false;X=e[c1];l1=Q._getFieldMetadata(m1,X);if(l1&&l1.isCustomFilterField){continue;}if(X&&X!==Q.BASIC_SEARCH_FIELD_ID){a1=null;h1=false;if(e1&&f1){if(f1.indexOf(X)>-1){h1=true;}}else if(g1&&g1.indexOf(X)>-1){i1=true;}else if(j1&&j1.indexOf(X)>-1){k1=true;}Z=i[X];X=X.replace(Y,"/");if(Z&&Z.hasOwnProperty("low")){if(Z.low&&Z.high){$=Z.low;_=Z.high;if(!k1&&d1&&d1.UTC&&$ instanceof Date&&_ instanceof Date){$=D.localToUtc($);_=D.localToUtc(_);}$=Q.adaptTime($,l1);_=Q.adaptTime(_,l1);k.push(new q(X,y.BT,$,_));}else if(Z.low){if(Z.low instanceof Date){$=Z.low;if(!k1&&d1&&d1.UTC){$=D.localToUtc($);}$=Q.adaptTime($,l1);k.push(new q(X,y.EQ,$));}else if(typeof Z.low==="string"){if(k1&&l1){a1=r.parseDateTimeOffsetInterval(Z.low);a1[0]=l1.ui5Type.parseValue(a1[0],"string");if(a1.length===2){a1[1]=l1.ui5Type.parseValue(a1[1],"string");}}else{a1=r.parseFilterNumericIntervalData(Z.low);}if(a1&&a1.length===2){Z[0]=Q.adaptTime(Z[0],l1);Z[1]=Q.adaptTime(Z[1],l1);k.push(new q(X,y.BT,a1[0],a1[1]));}else if(a1&&a1.length===1){Z[0]=Q.adaptTime(Z[0],l1);k.push(new q(X,y.EQ,a1[0]));}else{k.push(new q(X,h1?y.Contains:y.EQ,Z.low));}}}}else if(Z&&Z.hasOwnProperty("items")){n=[];W=[];R=null;if(Z&&Z.hasOwnProperty("ranges")){a1=Z.ranges;b1=a1.length;while(b1--){n1=a1[b1];$=n1.value1;_=n1.value2;if(i1){if($ instanceof Date){$=r.getEdmTimeFromDate($);}if(_ instanceof Date){_=r.getEdmTimeFromDate(_);}}else if(l1&&l1.isCalendarDate){if($ instanceof Date){$=l1.ui5Type.parseValue($);}if(_ instanceof Date){_=l1.ui5Type.parseValue(_);}}else if(!k1&&d1&&d1.UTC){if($ instanceof Date){$=D.localToUtc($);}if(_ instanceof Date){_=D.localToUtc(_);}}$=Q.adaptTime($,l1);_=Q.adaptTime(_,l1);o1=(n1.exclude?W:n);if(n1.operation===N.Empty){if(l1&&["Edm.DateTime","Edm.DateTimeOffset"].indexOf(l1.type)>-1){o1.push(new q(X,n1.exclude?y.NE:y.EQ,null));}else{o1.push(Q._getStringEmptyFilter(X,l1,n1.exclude));}}else{if(n1.operation!==y.BT&&n1.operation!==y.NB){_=undefined;}p1=n1.exclude?F.getTransformedExcludeOperation(n1.operation):n1.operation;o1.push(new q(X,p1,$,_));}}if(W.length){R=new q(W,true);}}a1=Z.items;b1=a1.length;while(b1--){n.push(new q(X,y.EQ,a1[b1].key));}if(Z.value||Z.value===0||Z.value===false){if(typeof Z.value==="string"){Z.value=Z.value.trim();}n.push(new q(X,h1?y.Contains:y.EQ,Z.value));}if(n.length){if(R){k.push(new q([new q(n,false),R],true));}else{k.push(new q(n,false));}}else if(R){k.push(R);}}else if(Z||Z===0||Z===false){if(typeof Z==="string"){Z=Z.trim();}if(Z&&Z instanceof Date){if(i1){Z=r.getEdmTimeFromDate(Z);}else if(!k1&&d1&&d1.UTC){Z=D.localToUtc(Z);}}if(Z||Z===0||Z===false){Z=Q.adaptTime(Z,l1);k.push(new q(X,h1?y.Contains:y.EQ,Z));}}}}}return(k.length>1)?[new q(k,true)]:k;};
Q._getStringEmptyFilter=function(e,i,j){var k=j?y.NE:y.EQ;if(i&&i.nullable==="false"){return new q(e,k,"");}else{return new q({and:!!j,filters:[new q(e,k,""),new q(e,k,null)]});}};
Q.parseFilterData=function(e,j,k,R){var n={},W=null,X=null,Y=null,Z,$,i,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1;if(k){b1=k.stringDateFields;c1=k.dateFields;d1=k.timeFields;e1=k.timeIntervalFields;f1=k.dateTimeMultiValueFields;W=k.conditionTypeFields||{};g1=k.dateTimeOffsetValueFields;h1=k.viewMetadataData||[];j1=k.filterProvider||null;}if(!b1){b1=[];}if(!c1){c1=[];}if(!d1){d1=[];}if(!e1){e1=[];}if(!f1){f1=[];}if(!g1){g1=[];}if(e&&j){$=Object.assign({},j,true);for(X in $){i1=Q._getFieldMetadata(h1,X);if(e.hasOwnProperty(X)&&X!==Q.CUSTOM_FIELDS_MODEL_PROPERTY){Y=e[X];Z=$[X];if(X in W){if(Z&&(("conditionTypeInfo"in Z)||(!("conditionTypeInfo"in Z)&&Z.ranges))){W[X].conditionType.initialize(Z);}}else if(Y&&Y.hasOwnProperty("low")){n[X]=Z;if(Z){if((Z.low||Z.low===0)&&(Z.high||Z.high===0)){if((c1.indexOf(X)>-1)||(d1.indexOf(X)>-1)){if(!(Z.low instanceof Date)){n[X].low=new Date(Z.low);}if(!(Z.high instanceof Date)){n[X].high=new Date(Z.high);}}else if(j1&&i1&&(g1.indexOf(X)>-1)){n[X].low=i1.ui5Type.formatValue(new Date(Z.low),"string")+'-'+i1.ui5Type.formatValue(new Date(Z.high),"string");n[X].high=null;}else if(b1.indexOf(X)===-1){n[X].low=Z.low+'-'+Z.high;n[X].high=null;}}else if((Z.low||(Z.low===0)||Z.value)&&!Z.high){if(!Z.low&&Z.value){Z.low=Z.value;}if(((c1.indexOf(X)>-1)||(d1.indexOf(X)>-1)||(g1.indexOf(X)>-1))&&!(Z.low instanceof Date)){k1=Date.parse(Z.low);if(!Number.isNaN(k1)){n[X].low=new Date(k1);}}n[X].low=Z.low;n[X].high=null;}}}else if(Y&&Y.hasOwnProperty("items")){if(Z&&(Z.items||Z.ranges)){if(Z.ranges&&Z.ranges.length){if(e1.indexOf(X)>-1){_=Z.ranges.length;for(i=0;i<_;i++){a1=Z.ranges[i];if(!a1.exclude&&(a1.operation==="EQ"||a1.operation==="BT")){break;}a1=null;}if(a1){if(a1.value1&&typeof a1.value1==="string"){a1.value1=new Date(a1.value1);}if(a1.value2&&typeof a1.value2==="string"){a1.value2=new Date(a1.value2);}n[X]={ranges:[a1],items:[],value:""};}continue;}else if(c1.indexOf(X)>-1||d1.indexOf(X)>-1||g1.indexOf(X)>-1){_=Z.ranges.length;for(i=0;i<_;i++){a1=Z.ranges[i];if(a1.value1&&typeof a1.value1==="string"){a1.value1=new Date(a1.value1);}if(a1.value2&&typeof a1.value2==="string"){a1.value2=new Date(a1.value2);}}}else if(i1&&i1.isCalendarDate){_=Z.ranges.length;for(i=0;i<_;i++){a1=Z.ranges[i];if(a1.value1&&(typeof a1.value1==="string")&&!a1.value1.match(/([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])/)){a1.value1=i1.ui5Type.parseValue(new Date(a1.value1),"date");}if(a1.value2&&(typeof a1.value2==="string")&&!a1.value2.match(/([1-9][0-9]{3,}|0[0-9]{3})(0[1-9]|1[0-2])(0[1-9]|[12][0-9]|3[01])/)){a1.value2=i1.ui5Type.parseValue(new Date(a1.value2),"date");}}}else if(i1&&i1.filterType==="boolean"){_=Z.ranges.length;for(i=0;i<_;i++){a1=Z.ranges[i];if(a1.hasOwnProperty("value1")){if(typeof a1.value1==="string"){a1.value1=(a1.value1==="true");}}if(a1.hasOwnProperty("value2")){if(typeof a1.value2==="string"){a1.value2=(a1.value2==="true");}}}}}n[X]=Z;if(!R&&n[X].ranges){for(i=0;i<n[X].ranges.length;i++){n[X].ranges[i].tokenText=null;}}}else if(typeof Z==="string"||typeof Z==="boolean"||typeof Z==="number"||Z instanceof Date){if(Z&&(c1.indexOf(X)>-1||d1.indexOf(X)>-1)){if(typeof Z==="string"){Z=new Date(Z);}n[X]={ranges:[{"exclude":false,"operation":"EQ","keyField":X,"value1":Z,"value2":null}],items:[],value:""};}else{n[X]={value:Z,items:[]};}}}else{n[X]=null;if(typeof Z==="string"||typeof Z==="boolean"||typeof Z==="number"||Z instanceof Date){if(typeof Z==="string"&&(c1.indexOf(X)>-1||d1.indexOf(X)>-1||g1.indexOf(X)>-1)){n[X]=new Date(Z);}else{n[X]=Z;}}else if(Z&&(Z.value||Z.value===0||Z.value===false)){n[X]=Z.value;}else if(Z&&Z.items&&Z.items.length){n[X]=Z.items[0].key;}else if(Z&&Z.ranges&&Z.ranges.length){_=Z.ranges.length;for(i=0;i<_;i++){a1=Z.ranges[i];if(!a1.exclude&&a1.operation==="EQ"){break;}a1=null;}if(a1&&a1.value1){if(typeof a1.value1==="string"&&(c1.indexOf(X)>-1||d1.indexOf(X)>-1||g1.indexOf(X)>-1)){n[X]=new Date(a1.value1);}else{n[X]=a1.value1;}}}}}else if(R||X===Q.CUSTOM_FIELDS_MODEL_PROPERTY){n[X]=$[X];}}}return n;};
Q.adaptTime=function(e,i){var j;if(!(e instanceof Date)||!i){return e;}if(i.displayFormat==="Date"){return D.normalizeDate(e,true);}j=parseInt(i.precision);return D.adaptPrecision(e,j);};
Q.prototype._attachEvent=function(e,i){if(!this._oEventProvider){this._oEventProvider=new E();}this._oEventProvider.attachEvent(e,i);};
Q.prototype._attachEventOnce=function(e,i){if(!this._oEventProvider){this._oEventProvider=new E();}this._oEventProvider.attachEventOnce(e,i);};
Q.prototype._detachEvent=function(e,i){if(!this._oEventProvider){return;}this._oEventProvider.detachEvent(e,i);};
Q.prototype._fireEvent=function(e,i){if(!this._oEventProvider){return;}this._oEventProvider.fireEvent(e,i||{});};
Q.prototype._getSuppressValueListsAssociation=function(){return this._bSuppressValueListsAssociation;};
Q.prototype._getCurrentValidationPromises=function(){return this._aValueListProvider.concat(this._aValueHelpDialogProvider).reduce(function(e,i){return e.concat(i._getCurrentValidationPromises());},[]);};
Q.prototype._enrichFieldViewMetadata=function(e,j){var i,k,n,R,W,X,Y={},Z="com.sap.vocabularies.Common.v1.ValueList";if(j===undefined||e===undefined){return;}k=e["groupName"];n=e["fullName"];R=j.primaryValueListAnnotation!==undefined;W=Array.isArray(j.additionalAnnotations)&&j.additionalAnnotations.length>0;if(R){Y[Z]=j.primaryValueListAnnotation.annotation;}if(W){for(i=0;i<j.additionalAnnotations.length;i++){X=j.additionalAnnotations[i];Y[Z+"#"+X.qualifier]=X.annotation;}}if(R||W){if(this._oFilterBarViewMetadataExtend[k]===undefined){this._oFilterBarViewMetadataExtend[k]={};}if(this._oFilterBarViewMetadataExtend[k][n]===undefined){this._oFilterBarViewMetadataExtend[k][n]={};}this._oFilterBarViewMetadataExtend[k][n]=Y;}};
Q.prototype.destroy=function(){var e=function(R){var i;if(R){i=R.length;while(i--){R[i].destroy();}}};this._oParentODataModel=null;this._aAnalyticalParameters=null;this._aFilterBarViewMetadata=null;this._oFilterBarViewMetadataExtend=null;this._oParameterization=null;this._oNonAnaParameterization=null;this._aFilterBarFieldNames=null;this._aFilterBarStringDateFieldNames=null;this._aFilterBarDateFieldNames=null;this._aFilterBarTimeFieldNames=null;this._aFilterBarTimeIntervalFieldNames=null;this._aFilterBarDateTimeMultiValueFieldNames=null;this._aFilterBarStringFieldNames=null;this._aFilterBarMultiValueFieldMetadata=null;this._aFilterBarDropdownFieldMetadata=null;this._aFilterBarDateTimeFieldNames=null;this._aFieldGroupAnnotation=null;this._aSelectionFields=null;this._aSelectionVariants=null;if(this._oBasicSearchControl&&this._oBasicSearchControl.destroy){this._oBasicSearchControl.destroy();}this._oBasicSearchControl=null;if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;e(this._aValueHelpDialogProvider);this._aValueHelpDialogProvider=null;e(this._aValueListProvider);this._aValueListProvider=null;if(this._mTokenHandler){for(var j in this._mTokenHandler){var k=this._mTokenHandler[j];if(k.parser){k.parser.destroy();k.parser=null;}}delete this._mTokenHandler;}this.oResourceBundle=null;this.sIntervalPlaceholder=null;this.sDefaultDropDownDisplayBehaviour=null;this.sDefaultTokenDisplayBehaviour=null;this._oSmartFilter=null;if(this._oEventProvider){if(this._oEventProvider.destroy){this._oEventProvider.destroy();}this._oEventProvider=null;}for(var n in this._mConditionTypeFields){this._mConditionTypeFields[n].conditionType.destroy();}this._mConditionTypeFields=null;if(this.oModel){this.oModel.destroy();this.oModel=null;}this._aPromises=[];this.bIsDestroyed=true;};
return Q;},true);
sap.ui.predefine('sap/ui/comp/smartfilterbar/SelectOption',['sap/ui/comp/library','sap/ui/core/Element','sap/ui/model/FilterOperator'],function(l,E,F){"use strict";
var S=E.extend("sap.ui.comp.smartfilterbar.SelectOption",{metadata:{library:"sap.ui.comp",properties:{sign:{type:"sap.ui.comp.smartfilterbar.SelectOptionSign",group:"Misc",defaultValue:'I'},operator:{type:"sap.ui.model.FilterOperator",group:"Misc",defaultValue:'EQ'},low:{type:"string",group:"Misc",defaultValue:null},high:{type:"string",group:"Misc",defaultValue:null}}}});
S.SIGN=l.smartfilterbar.SelectOptionSign;S.OPERATOR=F;return S;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/SmartFilterBar',["sap/ui/thirdparty/jquery","sap/m/MessageBox","sap/ui/comp/util/DateTimeUtil","sap/ui/comp/filterbar/FilterBar","sap/ui/comp/filterbar/FilterGroupItem","sap/ui/comp/filterbar/FilterItem","sap/ui/comp/library","./AdditionalConfigurationHelper","./ControlConfiguration","./FilterProvider","./GroupConfiguration","sap/ui/comp/util/FormatUtil","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/comp/smartvariants/SmartVariantManagement","sap/ui/comp/odata/ODataModelUtil","sap/ui/core/library","sap/ui/comp/variants/VariantItem","sap/ui/model/odata/AnnotationHelper","sap/ui/model/Context","sap/ui/comp/filterbar/VariantConverterFrom","sap/base/Log","sap/base/util/merge",'sap/ui/Device'],function(q,M,D,F,a,b,l,A,C,c,G,d,P,S,O,f,V,g,h,k,L,m,n){"use strict";var o=f.ValueState;var p=l.smartfilterbar.FilterType;
var r=F.extend("sap.ui.comp.smartfilterbar.SmartFilterBar",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartfilterbar/SmartFilterBar.designtime",properties:{entityType:{type:"string",group:"Misc",defaultValue:null},entitySet:{type:"string",group:"Misc",defaultValue:null},resourceUri:{type:"string",group:"Misc",defaultValue:null},basicSearchFieldName:{type:"string",group:"Misc",defaultValue:null},enableBasicSearch:{type:"boolean",group:"Misc",defaultValue:false},liveMode:{type:"boolean",group:"Misc",defaultValue:false},showMessages:{type:"boolean",group:"Misc",defaultValue:false},considerAnalyticalParameters:{type:"boolean",group:"Misc",defaultValue:false},useDateRangeType:{type:"boolean",group:"Misc",defaultValue:null},suppressSelection:{type:"boolean",group:"Misc",defaultValue:false},considerSelectionVariants:{type:"boolean",group:"Misc",defaultValue:false},defaultSelectionVariantName:{type:"string",group:"Misc",defaultValue:null},useProvidedNavigationProperties:{type:"boolean",group:"Misc",defaultValue:false},navigationProperties:{type:"string",group:"Misc",defaultValue:""}},associations:{smartVariant:{type:"sap.ui.comp.smartvariants.SmartVariantManagement",multiple:false}},aggregations:{controlConfiguration:{type:"sap.ui.comp.smartfilterbar.ControlConfiguration",multiple:true,singularName:"controlConfiguration"},groupConfiguration:{type:"sap.ui.comp.smartfilterbar.GroupConfiguration",multiple:true,singularName:"groupConfiguration"}},events:{pendingChange:{pendingValue:{type:"boolean"}}}},
renderer:{apiVersion:2}
});
r.LIVE_MODE_INTERVAL=300;r.SELECTION_VARIANT_KEY_PREFIX="#";
r.prototype.init=function(){if(!c){c=sap.ui.require("sap/ui/comp/smartfilterbar/FilterProvider");}this._bCreateFilterProviderCalled=false;this._aFilterBarViewMetadata=null;this._oFilterBarViewMetadataExtend=null;this._bSetFilterDataSuspended=false;this._oStoredFilterData={};F.prototype.init.apply(this);sap.ui.getCore().getMessageManager().registerObject(this,true);this.getMetadata().addPublicMethods(["suspendSelection","resumeSelection"]);};
r.prototype._initializeMetadata=function(){if(!this.bIsInitialised){O.handleModelInit(this,this._onMetadataInitialised,!this.getIsRunningInValueHelpDialog());}};
r.prototype._onMetadataInitialised=function(){var R,e,E,s;this._bMetaModelLoadAttached=false;if(!this.bIsInitialised&&!this._bCreateFilterProviderCalled){e=this.getModel();R=this.getResourceUri();E=this.getEntityType();s=this.getEntitySet();if((e||R)&&(E||s)){this._bCreateFilterProviderCalled=true;this._createFilterProvider(e,R,E,s).then(function(i){if(!i){return;}if(this.bIsDestroyed){i.destroy();return;}this._oFilterProvider=i;this._aFilterBarViewMetadata=i.getFilterBarViewMetadata();this._oFilterBarViewMetadataExtend=i._getFilterBarViewMetadataExtend();if(this._aFilterBarViewMetadata){this._attachAdditionalConfigurationChanged();this.bIsInitialised=true;this.setModel(i.oModel,i.sFilterModelName);this.registerGetFiltersWithValues(this.getFiltersWithValues.bind(this));this.registerFetchData(function(v){return this.getFilterDataAsStringForVariant(true,v);}.bind(this));this.registerApplyData(function(j,v){this.setFilterDataAsStringFromVariant(j,true,v);}.bind(this));this._initializeVariantManagement();}i.attachPendingChange(function(j){this.firePendingChange({pendingValue:j.getParameter("pending")});}.bind(this));}.bind(this));}}};
r.prototype._setInitialFocus=function(){var e=this.getAssociation("smartVariant")||this.getConsiderSelectionVariants(),B=this.getBasicSearchControl(),v=this.getAllFilterItems(true),i;if(!e){if(this.getEnableBasicSearch()){this._onAfterRenderingBasicSearchDelegate={onAfterRendering:function(){setTimeout(function(){B.focus();B.removeDelegate(this._onAfterRenderingBasicSearchDelegate);}.bind(this));}.bind(this)};B.addDelegate(this._onAfterRenderingBasicSearchDelegate,this);}else if(v.length>0){i=v[0].getControl();this._onAfterRenderingFirstFilterVisibleFieldDelegate={onAfterRendering:function(){setTimeout(function(){i.focus();i.removeDelegate(this._onAfterRenderingFirstFilterVisibleFieldDelegate);}.bind(this));}.bind(this)};i.addDelegate(this._onAfterRenderingFirstFilterVisibleFieldDelegate,this);}}};
r.prototype.getModelData=function(){return this._oFilterProvider?this._oFilterProvider.getModel().getData():null;};
r.prototype.getFilterContextUrl=function(){return this._oFilterProvider?this._oFilterProvider.getFilterContextUrl():null;};
r.prototype.getParameterContextUrl=function(){return this._oFilterProvider?this._oFilterProvider.getParameterContextUrl():null;};
r.prototype.getFilterBarViewMetadata=function(e){var i;if(this._aFilterBarViewMetadata===null){return[];}i=Object.assign({},this._aFilterBarViewMetadata);i=this._aFilterBarViewMetadata.map(function(j){var s=Object.assign({},j);if(e&&this._oFilterBarViewMetadataExtend!==null){s.fields=s.fields.map(function(t){var u,v=t.groupName,w=t.fullName,x=this._oFilterBarViewMetadataExtend[v]&&this._oFilterBarViewMetadataExtend[v][w];if(x!==undefined){u=Object.assign({},t,x);}else{u=Object.assign({},t);}return u;}.bind(this));}return s;}.bind(this));return i;};
r.prototype.getAnalyticalParameters=function(){return this._oFilterProvider?this._oFilterProvider.getAnalyticParameters():[];};
r.prototype.getSelectionVariants=function(){var s=null;if(this._oFilterProvider){s=this._oFilterProvider.getSelectionVariants();if(Object.keys(s).length<1){s=null;}}return s;};
r.prototype._createFilterProvider=function(e,R,E,s){return c._createFilterProvider({basicSearchFieldName:this.getBasicSearchFieldName(),enableBasicSearch:this.getEnableBasicSearch(),entityType:E,entitySet:s,serviceUrl:R,isRunningInValueHelpDialog:this.getIsRunningInValueHelpDialog(),model:e,additionalConfiguration:this.getAdditionalConfiguration(),defaultDropDownDisplayBehaviour:this.data("defaultDropDownDisplayBehaviour"),defaultTokenDisplayBehaviour:this.data("defaultTokenDisplayBehaviour"),dateFormatSettings:this.data("dateFormatSettings"),useContainsAsDefaultFilter:this.data("useContainsAsDefaultFilter"),smartFilter:this,considerAnalyticalParameters:this.getConsiderAnalyticalParameters(),useDateRangeType:this.getUseDateRangeType(),considerSelectionVariants:this.getConsiderSelectionVariants(),considerNavigations:this.getUseProvidedNavigationProperties()?this._createArrayFromString(this.getNavigationProperties()):null,suppressValueListsAssociation:this.getSuppressValueListsAssociation()});};
r.prototype._createArrayFromString=function(s){return!s?[]:s.split(",").filter(function(e){return e!==""?e.trim():false;});};
r.prototype._attachAdditionalConfigurationChanged=function(){var e,j,i,s;j=this.getGroupConfiguration();s=j.length;for(i=0;i<s;i++){j[i].attachChange(this._handleGroupConfigurationChanged.bind(this));}e=this.getControlConfiguration();s=e.length;for(i=0;i<s;i++){e[i].attachChange(this._handleControlConfigurationChanged.bind(this));}};
r.prototype._handleControlConfigurationChanged=function(e){var s,i,j,K,v;s=e.getParameter("propertyName");i=e.oSource;if(!i){return;}K=i.getKey();j=this._getFilterItemByName(K);if(!j){this._handleControlConfigurationChangedForDelayedFilterItems(K,i,s);return;}if(s==="visible"){v=i.getVisible();j.setVisible(v);}else if(s==="label"){v=i.getLabel();j.setLabel(v);}else if(s==="visibleInAdvancedArea"){v=i.getVisibleInAdvancedArea();if(j.setVisibleInAdvancedArea){j.setVisibleInAdvancedArea(v);}}};
r.prototype._handleControlConfigurationChangedForDelayedFilterItems=function(K,e,s){var v,i;if(this._aFilterBarViewMetadata){this._aFilterBarViewMetadata.some(function(j){j.fields.some(function(I){if(I.fieldName===K){i=I;}return!!i;});return!!i;});}if(i){if(s==="visible"){v=e.getVisible();i.isVisible=v;}else if(s==="label"){v=e.getLabel();i.label=v;}else if(s==="visibleInAdvancedArea"){v=e.getVisibleInAdvancedArea();i.visibleInAdvancedArea=v;}}};
r.prototype._handleGroupConfigurationChanged=function(e){var s,i;s=e.getParameter("propertyName");i=e.oSource;if(s==="label"){this._handleGroupConfigurationLabelChanged(i);}};
r.prototype._handleGroupConfigurationLabelChanged=function(e){var i,K,s;if(!e){return;}s=e.getLabel();K=e.getKey();i=this._getFilterGroupItemByGroupName(K);if(i){i.setGroupTitle(s);}else{this._handleGroupConfigurationLabelChangedForDelayedFilterItems(K,s);}};
r.prototype._handleGroupConfigurationLabelChangedForDelayedFilterItems=function(K,s){var e=null;if(this._aFilterBarViewMetadata){this._aFilterBarViewMetadata.some(function(i){if(i.groupName===K){e=i;}return!!e;});}if(e){e.groupLabel=s;}};
r.prototype._getFilterItemByName=function(N){return this.determineFilterItemByName(N);};
r.prototype._getFilterGroupItemByGroupName=function(N){return this.determineFilterItemByName(N);};
r.prototype.getAdditionalConfiguration=function(){return new A(this.getControlConfiguration(),this.getGroupConfiguration());};
r.prototype.setEntityType=function(e){this.setProperty("entityType",e);this._initializeMetadata();return this;};
r.prototype.setEntitySet=function(e){this.setProperty("entitySet",e);this._initializeMetadata();return this;};
r.prototype.setResourceUri=function(R){this.setProperty("resourceUri",R);this._initializeMetadata();return this;};
r.prototype.propagateProperties=function(){F.prototype.propagateProperties.apply(this,arguments);this._initializeMetadata();};
r.prototype._getFilterInformation=function(){var H=this.data("hiddenFields"),e,i,j,s=0,t=0,u,v=[],w;if(this._aFilterBarViewMetadata){s=this._aFilterBarViewMetadata.length;for(i=0;i<s;i++){e=this._aFilterBarViewMetadata[i];u=e.fields;t=u.length;for(j=0;j<t;j++){w=u[j];if(Array.isArray(H)&&H.indexOf(w.name)!==-1){continue;}else if(w.name===c.BASIC_SEARCH_FIELD_ID){this.setBasicSearch(w.control);this._attachToBasicSearch(w.control);continue;}else if(e.groupName===c.BASIC_FILTER_AREA_ID){this._createFieldInAdvancedArea({groupName:F.INTERNAL_GROUP,groupLabel:""},w);}else{this._createFieldInAdvancedArea(e,w);}v.push(w);}}var x=this.getAnalyticalParameters();s=x.length;for(i=0;i<s;i++){w=x[i];this._createAnalyticParameter(w);v.push(w);}}return v;};
r.prototype._validateState=function(){var e,i,j,I=false;e=this.getAllFilterItems(true);if(Array.isArray(e)){i=e.length;while(i--){j=this.determineControlByFilterItem(e[i],true);if(j){if(j.__bValidatingToken){this.bIsSearchPending=true;I=true;break;}else if(j.getValueState&&j.getValueState()===o.Error&&!j.data("__mandatoryEmpty")){I=true;break;}}}}if(this._oFilterProvider){return!I&&!this._oFilterProvider._validateConditionTypeFields();}else{return!I;}};
r.prototype._isDateRangeTypeFilter=function(s){return!!(this._oFilterProvider&&this._oFilterProvider._mConditionTypeFields[s]);};
r.prototype._specialControls=function(e,s){return!!(e.setValue&&(this._isDateRangeTypeFilter(s)||e.isA("sap.m.DatePicker")));};
r.prototype._clearErroneusControlValues=function(){var e,i,j,v;e=this.getAllFilterItems(true);if(e){i=e.length;while(i--){j=this.determineControlByFilterItem(e[i],true);if(j){if(j.getValueState&&j.getValueState()===o.Error){v=j.getBinding("value");if(v&&!this._specialControls(j,e[i].getName())){v.checkUpdate(true);}else if(j.setValue){j.setValue("");j.setValueState(o.None);}}}}}};
r.prototype._attachToBasicSearch=function(B){if(B){B.attachSearch(function(e){if(e&&e.getParameter("clearButtonPressed")){return;}if(!this.isDialogOpen()){this.search();}}.bind(this));B.attachChange(this._onChange.bind(this));}};
r.prototype._onLiveChange=function(e){var i=e.getSource();if(i.data("__validationError")&&!i.getValue()){i.data("__validationError",null);i.setValueState(o.None);delete i.__sValidationText;}};
r.prototype._onChange=function(e){var i=e.getSource();if(i.data("__mandatoryEmpty")){i.data("__mandatoryEmpty",null);i.setValueState(o.None);}if(i.data("__validationError")&&!i.getValue()){i.data("__validationError",null);i.setValueState(o.None);}if(i.isA("sap.m.ComboBox")&&i.getValue()){this._filterSetInErrorState(i);if(!i.getSelectedItem()){i.data("__validationError",true);i.setValueState(o.Error);return;}if(i.data("__validationError")){i.data("__validationError",null);i.setValueState(o.None);}}if(this._oFilterProvider._bUpdatingFilterData||this._oFilterProvider._bCreatingInitialModel){return;}if(!i||(i&&!i.__bValidatingToken)){this.fireFilterChange(e);this._oFilterProvider._updateConditionTypeFields(e.getParameter("filterChangeReason"));}else{this._filterSetInErrorState(i);}if(this.isLiveMode()){if(e.getSource().isA("sap.m.MultiComboBox")||e.getSource().isA("sap.m.ComboBox")){this.triggerSearch();}else{this.search();}}};
r.prototype._handleChange=function(e){if(e){if(e.attachChange){e.attachChange(this._onChange.bind(this));}if(e.attachLiveChange){e.attachLiveChange(this._onLiveChange.bind(this));}}};
r.prototype._handleSelectionChange=function(e){if(e){if(e.attachSelectionChange){e.attachSelectionChange(this._onChange.bind(this));}}};
r.prototype._handleEnter=function(i){if(this.isLiveMode()){return;}i.attachBrowserEvent("keydown",function(e){if(e.which===13){i.__bSuggestInProgress=(i._oSuggestionPopup&&i._oSuggestionPopup.isOpen());}});i.attachBrowserEvent("keyup",function(e){if(e.which===13&&!i.__bSuggestInProgress&&(i.isA("sap.m.InputBase")||i.isA("sap.m.Select"))){this.search();}}.bind(this));};
r.prototype._createFilterFieldControl=function(e){if(e.conditionType){e.control=e.conditionType.initializeFilterItem();}else if(!e.control&&e.fCreateControl){e.fCreateControl(e);delete e.fCreateControl;}this._handleEnter(e.control);this._handleChange(e.control);if(e.isCustomFilterField&&e.control.isA("sap.m.MultiComboBox")){this._handleSelectionChange(e.control);}};
r.prototype._createAnalyticParameter=function(e){e.factory=function(){this._createFilterFieldControl(e);if(!e.control){return;}var i=new a({controlTooltip:e.quickInfo,name:e.fieldName,mandatory:e.isMandatory,visible:e.isVisible,control:e.control,hiddenFilter:false});this._setLabel(i,e.label);this._addParameter(i);}.bind(this);e.groupName=F.INTERNAL_GROUP;return e;};
r.prototype._createFieldInAdvancedArea=function(e,i){i.factory=function(){this._createFilterFieldControl(i);var j=new a({controlTooltip:i.quickInfo,name:i.fieldName,groupName:e.groupName,groupTitle:e.groupLabel,entitySetName:i.groupEntitySet,entityTypeName:i.groupEntityType,mandatory:i.isMandatory,visible:i.isVisible,visibleInAdvancedArea:i.visibleInAdvancedArea||(e.groupName===F.INTERNAL_GROUP),control:i.control,hiddenFilter:i.hiddenFilter});if(i.isCustomFilterField){j.data("isCustomField",true);this._attachCustomControlCustomDataChange(j.getControl().getCustomData());}if(i.control&&i.control.getTooltip&&i.control.getTooltip()){j.setControlTooltip(i.control.getTooltip());}if(i.quickInfo){this._setLabelTooltip(j,i.quickInfo);}this._setLabel(j,i.label);this.addFilterGroupItem(j);}.bind(this);i.groupName=e.groupName;i.groupTitle=e.groupLabel;return i;};
r.prototype._setLabel=function(e,s){if(s.match(/{@i18n>.+}/gi)){e.bindProperty("label",s.substring(1,s.length-1));}else{e.setLabel(s);}};
r.prototype._setLabelTooltip=function(e,Q){var R=/{(@?i18n>.+)}/i.exec(Q);if(R&&R[1]){e.bindProperty("labelTooltip",R[1]);}else{e.setLabelTooltip(Q);}};
r.prototype._logAccessWhenNotInitialized=function(s){if(!this.bIsInitialised){L.error("SmartFilterBar."+s+": called before the SmartFilterBar is initialized");}};
r.prototype.ensureLoadedValueHelp=function(s){this._logAccessWhenNotInitialized("ensureLoadedValueHelp");if(this._oFilterProvider){this._oFilterProvider.getAssociatedValueHelpProviders().some(function(v){if(v.sFieldName===s){this._ensureLoadedValueHelpList(v);return true;}}.bind(this));}};
r.prototype.ensureLoadedValueList=function(s){if(this._oFilterProvider){this._oFilterProvider.getAssociatedValueListProviders().some(function(v){if(v.sFieldName===s){this._ensureLoadedValueHelpList(v);return true;}}.bind(this));}};
r.prototype._ensureLoadedValueHelpList=function(B){if(!B._bValueListRequested){B.loadAnnotation();}};
r.prototype._getValueListHelpProvider=function(s){var v=null;if(this._oFilterProvider){this._oFilterProvider.getAssociatedValueListProviders().some(function(e){if(e.sFieldName===s){v=e;}return v!=null;});if(!v){this._oFilterProvider.getAssociatedValueHelpProviders().some(function(e){if(e.sFieldName===s){v=e;}return v!=null;});}}return v;};
r.prototype.getDescriptionForKeys=function(e){var i=[];if(e){e.forEach(function(I){var B=this._getValueListHelpProvider(I.filterName);if(B){if(!B._bValueListRequested){B.loadAnnotation();}I.provider=B;i.push(I);}}.bind(this));if(i&&i.length>0){i.forEach(function(I){if(I.provider){I.provider.readData(I.keys);}});}}};
r.prototype.ensureLoadedValueHelpList=function(s){this.ensureLoadedValueHelp(s);this.ensureLoadedValueList(s);};
r.prototype.getFilters=function(e){this._logAccessWhenNotInitialized("getFilters");if(!e||!e.length){if(this.getIsRunningInValueHelpDialog()){e=this._getAllFieldNames();}else{e=this._getVisibleFieldNames(true);}}return this._oFilterProvider?this._oFilterProvider.getFilters(e):[];};
r.prototype.getParameters=function(){this._logAccessWhenNotInitialized("getParameters");return this._oFilterProvider?this._oFilterProvider.getParameters():{};};
r.prototype.getAnalyticBindingPath=function(){var B="";this._logAccessWhenNotInitialized("getAnalyticBindingPath");if(this._oFilterProvider){B=this._oFilterProvider.getAnalyticBindingPath();}return B;};
r.prototype.getParameterBindingPath=function(){return this.getAnalyticBindingPath();};
r.prototype.getControlByKey=function(K){this._logAccessWhenNotInitialized("getControlByKey");return this.determineControlByName(K);};
r.prototype._getAllFieldNames=function(){var e,j=[],i,s,I;if(this._oFilterProvider&&this._oFilterProvider._oMetadataAnalyser){e=this._oFilterProvider._oMetadataAnalyser.getFieldsByEntitySetName(this.getEntitySet());}if(e){s=e.length;for(i=0;i<s;i++){I=e[i];if(I){j.push(I.name);}}}return j;};
r.prototype._getAllFilterAndParameterNames=function(i){var e=[],v=this.getAllFilterItems(false),j=v.length,I;while(j--){I=v[j];if(I){if(i&&I._isParameter()){continue;}e.push(I.getName());}}return e;};
r.prototype._getVisibleFieldNames=function(i){var e=[],v=this.getAllFilterItems(true),j=v.length,I;while(j--){I=v[j];if(I){if(i&&I._isParameter()){continue;}e.push(I.getName());}}return e;};
r.prototype._checkHasValueData=function(e){if(!e||e==="false"){return false;}if(typeof e==="boolean"){return e;}else if(typeof e==="string"&&e.toLowerCase()==="true"){return true;}return false;};
r.prototype._checkForValues=function(e,i,j){var v=null,s;if(e&&i&&j){if(!i.data("isCustomField")){v=e[i.getName()];if(!v&&j.getSelectedItem&&j.getSelectedItem()){s=c._getFieldMetadata(this._aFilterBarViewMetadata,i.getName());if(s&&(s.type==="Edm.Boolean")){if(j.getSelectedItem().getKey()===""){return false;}}return true;}if(!v&&j.getSelectedKey&&j.getSelectedKey()){return true;}if(v&&j.isA("sap.m.ComboBox")&&!j.getItemByKey(v.toString())){return false;}if(v===undefined){return false;}}else{var t=j.data("hasValue");if((t!==undefined)&&(t!=null)){return this._checkHasValueData(t);}else{if(j.getValue){if(j.getValue()){return true;}}if(j.getSelectedItem&&j.getSelectedItem()){return true;}if(j.getSelectedKey&&j.getSelectedKey()){return true;}if(j.getSelectedKeys&&j.getSelectedKeys().length>0){return true;}if(j.getTokens&&j.getTokens().length>0){return true;}}}}return!!v;};
r.prototype.getFiltersWithValues=function(){this._logAccessWhenNotInitialized("getFiltersWithValues");return this._getFiltersWithAssignedValues(true);};
r.prototype.getAllFiltersWithValues=function(){return this._getFiltersWithAssignedValues(false);};
r.prototype._getFiltersWithAssignedValues=function(e){var i=[];var j=this.getAllFilterItems(e),s,t,u=0,v;if(e){s=this.getFilterData();}else if(this._oFilterProvider){s=this._oFilterProvider.getFilledFilterData(this._getAllFilterAndParameterNames());}if(j&&s){u=j.length;while(u--){t=j[u];v=this.determineControlByFilterItem(t,true);if(this._checkForValues(s,t,v)){i.push(t);}}}return i.reverse();};
r.prototype._checkIfFilterHasValue=function(s){var e=this._oFilterProvider.getFilterData();var v=e[s]||(e._CUSTOM&&e._CUSTOM[s]);if(v===null||typeof v==="undefined"){return false;}if(typeof v==="string"&&v){return true;}if(typeof v==="number"){return true;}if(typeof v==="object"&&Object.prototype.toString.call(v)==="[object Date]"){return true;}if(typeof v==="object"&&(v.hasOwnProperty("low")||v.hasOwnProperty("high"))){return!!v.low||!!v.high;}if(typeof v==="object"&&(v.hasOwnProperty("value")||v.hasOwnProperty("items")||v.hasOwnProperty("ranges"))){return!!v.value||(v.items&&!!v.items.length)||(v.ranges&&!!v.ranges.length);}return false;};
r.prototype._removeEmptyFilters=function(s){var e=JSON.parse(s);var i={};Object.keys(e).forEach(function(j){if((j==="_CUSTOM")||this._checkIfFilterHasValue(j)){i[j]=e[j];}}.bind(this));return JSON.stringify(i);};
r.prototype._removeValuesForNonPartOfCurrentVariants=function(e){var i=[];if(this._oFilterProvider&&e&&(e.length>0)){var j=this._oFilterProvider.getFilterData();e.forEach(function(s){var t=s.getName();if(!s.data("isCustomField")){var u=this._oFilterProvider._getFieldMetadata(t);if(u.conditionType){i.push(u);}this._oFilterProvider._createInitialModelForField(j,u,false);}else if(j._CUSTOM&&j._CUSTOM[t]){delete j._CUSTOM[t];}},this);this.setFilterData(j);i.forEach(function(s){var t=s.fieldName;this._oFilterProvider._mConditionTypeFields[t].conditionType.initialize(j[t]);},this);}};
r.prototype.getFilterDataAsStringForVariant=function(e,v){var j={},i=this._oFilterProvider._aFilterBarDateTimeFieldNames;if(i.length>0){j=m(j,this.getFilterData(e));i.forEach(function(s){var t,u,w=c._getFieldMetadata(this._aFilterBarViewMetadata,s);if(w&&(w.type==="Edm.DateTimeOffset")){u=j[s];if(u&&u.low){if(w.filterRestriction===p.interval){t=d.parseDateTimeOffsetInterval(u.low);if(t&&(t.length===2)){u.low=w.ui5Type.parseValue(t[0],"string");u.high=w.ui5Type.parseValue(t[1],"string");}}}}}.bind(this));if(v==="V3"){this._oFilterProvider._aFilterBarDateFieldNames.concat(this._oFilterProvider._aFilterBarTimeFieldNames).forEach(function(s){var t,u=c._getFieldMetadata(this._aFilterBarViewMetadata,s);if(!u){u=this.getParameterMetadata(s);}if(u&&(u.filterType==="date")||(u.filterType==="time")){t=j[s];if(t){if((u.filterRestriction===p.multiple)||(u.filterRestriction===p.auto)){this._processDateRanges(t.ranges);}else if(u.filterRestriction===p.single){j[s]=this._dateConvert(t);}else if(u.filterRestriction===p.interval){if(t.ranges){this._processDateRanges(t.ranges);}else{if(t.low){t.low=this._dateConvert(t.low);}if(t.high){t.high=this._dateConvert(t.high);}}}}}}.bind(this));}return JSON.stringify(j);}else{return this.getFilterDataAsString(e);}};
r.prototype._dateConvert=function(v){if(this.isInUTCMode()){if(typeof v==="string"){v=new Date(v);}v=D.localToUtc(v).toJSON();}if(v.indexOf('Z')===(v.length-1)){v=v.substr(0,v.length-1);}return v;};
r.prototype._processDateRanges=function(R){if(!Array.isArray(R)){return;}R.forEach(function(e){e.tokenText=null;if(e.value1){e.value1=this._dateConvert(e.value1);}if(e.value2){e.value2=this._dateConvert(e.value2);}}.bind(this));};
r.prototype.getFilterData=function(e){if(this._bSetFilterDataSuspended){return Object.assign({},this._oStoredFilterData);}var i=this._oFilterProvider;this._logAccessWhenNotInitialized("getFilterData");if(!i){return null;}return e?i.getFilterData():i.getFilledFilterData(this._getVisibleFieldNames());};
r.prototype.getFilterDataAsString=function(e){var i=this._oFilterProvider;this._logAccessWhenNotInitialized("getFilterDataAsString");if(!i){return null;}return e?i.getFilterDataAsString():i.getFilledFilterDataAsString(this._getVisibleFieldNames());};
r.prototype.getParameterMetadata=function(N){var e=null,i=this.getAnalyticalParameters();if(N.indexOf(l.ANALYTICAL_PARAMETER_PREFIX)===0){N=N.substring(l.ANALYTICAL_PARAMETER_PREFIX.length);}if(Array.isArray(i)){i.some(function(j){if(j.name===N){e=j;}return e!==null;});}return e;};
r.prototype.setFilterDataAsStringFromVariant=function(j,R,v){var J,e=this._oFilterProvider._aFilterBarDateTimeFieldNames;if(j){if(e.length>0){J=JSON.parse(j);e.forEach(function(s){var t,u=c._getFieldMetadata(this._aFilterBarViewMetadata,s);if(u&&(u.type==="Edm.DateTimeOffset")){t=J[s];if(t&&(u.filterRestriction===p.multiple||u.filterRestriction===p.auto)){if(t.ranges){for(var i=0;i<t.ranges.length;i++){delete t.ranges[i].tokenText;}}}}}.bind(this));if(v==="V3"){this._oFilterProvider._aFilterBarDateFieldNames.concat(this._oFilterProvider._aFilterBarTimeFieldNames).forEach(function(s){var t,u=c._getFieldMetadata(this._aFilterBarViewMetadata,s);if(!u){u=this.getParameterMetadata(s);}if(u&&(u.filterType==="date")||(u.filterType==="time")){t=J[s];if(t){if(t.ranges){for(var i=0;i<t.ranges.length;i++){delete t.ranges[i].tokenText;}}}}}.bind(this));}this.setFilterData(J,R);}else{this.setFilterDataAsString(j,R);}}};
r.prototype.setFilterData=function(j,R){if(this._bSetFilterDataSuspended){if(R){this._oStoredFilterData=j;}else{this._oStoredFilterData=Object.assign({},this._oStoredFilterData,j);}return;}this._setFilterData(j,R);};
r.prototype.suspendSetFilterData=function(){this._bSetFilterDataSuspended=true;};
r.prototype.resumeSetFilterData=function(){if(this._bSetFilterDataSuspended){this._bSetFilterDataSuspended=false;this.setFilterData(this._oStoredFilterData,true);this._oStoredFilterData={};}};
r.prototype._setFilterData=function(j,R){this._logAccessWhenNotInitialized("setFilterData");if(this._oFilterProvider){this._oFilterProvider.setFilterData(j,R);}if(j&&(Object.keys(j).length===1)&&j._CUSTOM){return;}this.fireFilterChange({afterFilterDataUpdate:true});};
r.prototype.setFilterDataAsString=function(j,R){if(j){this.setFilterData(JSON.parse(j),R);}};
r.prototype.fireClear=function(){this._clearFilterFields();this.fireEvent("clear",arguments);};
r.prototype._clearFilterFields=function(){if(this._oFilterProvider){this._oFilterProvider.clear();this._clearErroneusControlValues();}this.fireFilterChange({afterFilterDataUpdate:true});};
r.prototype.fireReset=function(){this._resetFilterFields();this.fireEvent("reset",arguments);};
r.prototype._resetFilterFields=function(){if(this._oFilterProvider){this._oFilterProvider.reset();this._clearErroneusControlValues();}this.fireFilterChange({afterFilterDataUpdate:true});};
r.prototype._suspendedTriggerSearch=function(i){if(this.getSuppressSelection()){return;}this._oSuspendedTriggerSearch={delay:i};return true;};
r.prototype._regularTriggerSearch=function(i){if(this.getSuppressSelection()){return;}this._clearDelayedSearch();this._iDelayedSearchId=setTimeout(function(){var e=this._getVisibleControlsLoadingPromises();if(!this._bSearchTriggeredOnce&&e.length){Promise.all(e).then(this._search.bind(this)).catch(this._search.bind(this));}else{this._search();}}.bind(this),i||0);};
r.prototype.suspendSelection=function(){this.triggerSearch=this._suspendedTriggerSearch;};
r.prototype.resumeSelection=function(){this.triggerSearch=this._regularTriggerSearch;if(this._oSuspendedTriggerSearch){this.triggerSearch(this._oSuspendedTriggerSearch.delay);this._oSuspendedTriggerSearch=undefined;}};
r.prototype.triggerSearch=r.prototype._regularTriggerSearch;
r.prototype._getVisibleControlsLoadingPromises=function(){var e=[];this.determineMandatoryFilterItems().forEach(function(i){var j=i.getControl();if(j&&j.isA("sap.m.ComboBox")&&j.isBound("items")&&!j.getItems().length){e.push(new Promise(function(s){j.getBinding("items").attachEventOnce("dataReceived",s);}));}});return e;};
r.prototype.search=function(s){if(this.getSuppressSelection()){return undefined;}this._logAccessWhenNotInitialized("search");if(s&&!this.isLiveMode()){return this._search();}this.triggerSearch(0);return true;};
r.prototype._search=function(){var e=true,i=false,E,I,H;this._bSearchTriggeredOnce=true;I=this.verifySearchAllowed();if(I.hasOwnProperty("pending")){if(this._iDelayedSearchId&&!this.getSuppressSelection()){this.triggerSearch();}return undefined;}else if(I.hasOwnProperty("error")){e=false;i=true;}else if(I.hasOwnProperty("mandatory")){e=false;}if(this.isPending()&&!this._bIsPendingChangeAttached){H=function(j){if(j.getParameter("pendingValue")===false){this.detachPendingChange(H);this._bIsPendingChangeAttached=false;this.triggerSearch();}}.bind(this);this._bIsPendingChangeAttached=true;this.attachPendingChange(H);return undefined;}this._clearDelayedSearch();if(e){if(this._isTablet()&&this.getUseToolbar()&&!this.getAdvancedMode()){this.setFilterBarExpanded(false);}this.fireSearch([{selectionSet:this._retrieveCurrentSelectionSet(false,true)}]);}else{if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}if(!i){if(!this._sMandatoryErrorMessage){this._sMandatoryErrorMessage=this._oResourceBundle.getText("EMPTY_MANDATORY_MESSAGE");}E=this._sMandatoryErrorMessage;}else{if(!this._sValidationErrorMessage){this._sValidationErrorMessage=this._oResourceBundle.getText("VALIDATION_ERROR_MESSAGE");}E=this._sValidationErrorMessage;}if(this.getShowMessages()&&!this.getLiveMode()){try{M.error(E,{styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":"",onClose:this._setFocusOnFirstErroneousField.bind(this)});}catch(x){return undefined;}}else{this._setFocusOnFirstErroneousField();L.warning("search was not triggered. "+E);if(n.system.desktop){this.setFilterBarExpanded(true);}}if(this._bExpandAdvancedFilterArea&&this.rerenderFilters){this.rerenderFilters(true);}}return e;};
r.prototype.validateMandatoryFields=function(){this._logAccessWhenNotInitialized("validateMandatoryFields");return this._validateMandatoryFields();};
r.prototype.verifySearchAllowed=function(){this._logAccessWhenNotInitialized("verifySearchAllowed");this.bIsSearchPending=false;if(this._validateState()){if(this.validateMandatoryFields()){return{};}return{mandatory:true};}if(this.bIsSearchPending){return{pending:true};}return{error:true};};
r.prototype._setFocusOnFirstErroneousField=function(){var e,j,s,i;e=this.getAllFilterItems(true);if(Array.isArray(e)){j=e.length;for(i=0;i<j;i++){s=this.determineControlByFilterItem(e[i],true);if(s&&s.getValueState&&s.getValueState()===o.Error){setTimeout(s["focus"].bind(s),0);break;}}}};
r.prototype.setLiveMode=function(e){if(!this._isPhone()){if(e){this.hideGoButton();}else{this.restoreGoButton();}}if(this._oSmartVariantManagement){if(e){if(this._bShowShareState===undefined){this._bShowShareState=this._oSmartVariantManagement.getShowExecuteOnSelection();}this._oSmartVariantManagement.setShowExecuteOnSelection(false);}else if(this._bShowShareState!==undefined){this._oSmartVariantManagement.setShowExecuteOnSelection(this._bShowShareState);}}return this.setProperty("liveMode",e);};
r.prototype.isLiveMode=function(){return this._isPhone()?false:this.getLiveMode();};
r.prototype._clearDelayedSearch=function(){if(this._iDelayedSearchId){clearTimeout(this._iDelayedSearchId);this._iDelayedSearchId=null;}};
r.prototype.isPending=function(){return!this._oFilterProvider?false:this._oFilterProvider.isPending();};
r.prototype._validateMandatoryFields=function(){var e=true,i=this.determineMandatoryFilterItems(),j,s=this.getFilterData(),t=0,u;this._bExpandAdvancedFilterArea=false;if(i&&s){t=i.length;while(t--){j=i[t];u=this.determineControlByFilterItem(j,true);if(u&&u.setValueState){if(this._checkForValues(s,j,u)){if(u.data("__mandatoryEmpty")){u.data("__mandatoryEmpty",null);u.setValueState(o.None);}}else{e=false;u.setValueState(o.Error);u.data("__mandatoryEmpty",true);if(j.getGroupName){this._bExpandAdvancedFilterArea=true;}}}}}return e;};
r.prototype._setSmartVariant=function(s){var e;if(!s){return;}e=sap.ui.getCore().byId(s);if(e){if(e.isA("sap.ui.comp.smartvariants.SmartVariantManagement")){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._replaceVariantManagement(e);this._oSmartVariantManagement=e;}}else{L.error("Control with the id="+s+" not of expected type");}}else{L.error("Control with the id="+s+" not found");}};
r.prototype.setSmartVariant=function(s){if(this.getAdvancedMode()){L.error("not supported for the advanced mode");return this;}this.setAssociation("smartVariant",s);this._setSmartVariant(s);return this;};
r.prototype.getSmartVariant=function(){if(this.getAdvancedMode()){L.error("not supported for the advanced mode");return null;}var s=this.getAssociation("smartVariant");if(s){return sap.ui.getCore().byId(s);}return this._oSmartVariantManagement;};
r.prototype._createVariantManagement=function(){if(this.getAdvancedMode()){return F.prototype._createVariantManagement.apply(this);}this._setSmartVariant(this.getSmartVariant());if(!this._oSmartVariantManagement){this._oSmartVariantManagement=new S(this.getId()+"-variant",{showExecuteOnSelection:true,showShare:true});}return this._oSmartVariantManagement;};
r.prototype._initializeVariantManagement=function(){if(!this.getIsRunningInValueHelpDialog()&&this._oSmartVariantManagement&&this.getPersistencyKey()){var e=new P({type:"filterBar",keyName:"persistencyKey",dataSource:this.getEntitySet()||this.getEntityType()});e.setControl(this);if(this.getConsiderSelectionVariants()&&!this._oSmartVariantManagement.isPageVariant()){this._oSmartVariantManagement._createMetadataPromise();this._prepareSelectionVariants();this._oSmartVariantManagement._resolveMetadataPromise();}this._oSmartVariantManagement.addPersonalizableControl(e);if(this._checkHasValueData(this.data("executeStandardVariantOnSelect"))){this._oSmartVariantManagement._executeOnSelectForStandardVariantByXML(true);}F.prototype._initializeVariantManagement.apply(this,arguments);}else{this.fireInitialise();this.fireInitialized();}};
r.prototype.fireInitialized=function(){if(this.getConsiderSelectionVariants()&&this._oSmartVariantManagement&&!this._oSmartVariantManagement.isPageVariant()){if(this._oStandardSelectionVariant){this._oSmartVariantManagement._oStandardVariant=m({},this._defaultSelectionVariantHandling(this._oStandardSelectionVariant));}if(!this._oSmartVariantManagement._getDefaultVariantKey()){if(this.getDefaultSelectionVariantName()){var s=r.SELECTION_VARIANT_KEY_PREFIX+this.getDefaultSelectionVariantName();this._oSmartVariantManagement.setInitialSelectionKey(s);this._oSmartVariantManagement.fireSelect({key:s});}else if(this._oStandardSelectionVariant){this._oSmartVariantManagement.fireSelect({key:this._oSmartVariantManagement.STANDARDVARIANTKEY});}}this._oStandardSelectionVariant=null;}F.prototype.fireInitialized.apply(this,arguments);};
r.prototype._prepareSelectionVariants=function(){var s,K=r.SELECTION_VARIANT_KEY_PREFIX,v=[],e=this._oSmartVariantManagement;s=this.getSelectionVariants();if(s){var R={callback:this.getSelectionVariant,handler:this};s.forEach(function(i){var j=K+i.qualifier;if(i.qualifier){v.push({id:j,favorite:true,name:i.annotation.Text.String});}else{this._oStandardSelectionVariant=i;}}.bind(this));if(v.length>0){R.variants=v;e.registerSelectionVariantHandler(R,K);}}};
r.prototype._defaultSelectionVariantHandling=function(s){var v={},e=this._oSmartVariantManagement,i,j;if(!e||e._sAppStandardVariantKey||!(s&&s.annotation)){return v;}v=this.convertSelectionVariantToInternalVariant(s.annotation);if(!v){return v;}if(!e.isPageVariant()){v.version="V1";j=JSON.parse(v.filterBarVariant);if(e._oStandardVariant){i=JSON.parse(e._oStandardVariant.filterBarVariant);if(i._CUSTOM){j._CUSTOM=i._CUSTOM;v.filterBarVariant=JSON.stringify(j);}}}return v;};
r.prototype._adaptFilterVisibilityProperties=function(e){var i,j=[];if(this._oSmartVariantManagement&&this._oSmartVariantManagement._oStandardVariant&&this._oSmartVariantManagement._oStandardVariant.filterbar){m(j,this._oSmartVariantManagement._oStandardVariant.filterbar);}Object.keys(e).forEach(function(E){i=false;j.some(function(s){if(s.name===E){i=true;s.partOfCurrentVariant=true;}return i;});if(!i){j.push({group:this._determineGroupNameByName(E),name:E,partOfCurrentVariant:true,visibleInFilterBar:false,visible:true});}}.bind(this));return j;};
r.prototype.getSelectionVariant=function(K){var v=null,s=null,e=K.substring(r.SELECTION_VARIANT_KEY_PREFIX.length);this.getSelectionVariants().some(function(i){if(i.qualifier===e){s=i;return true;}return false;});if(s){if(s.variantContent){v=s.variantContent;}else{v=this.convertSelectionVariantToInternalVariant(s.annotation);s.variantContent=v;}}return v;};
r.prototype.convertSelectionVariantToInternalVariant=function(s){var e=JSON.parse(JSON.stringify(s)),v,i,j,t=e.SelectOptions,u=e.Parameters,w;if(t||u){j=new h(null,"/");}if(t){t.forEach(function(x){x.PropertyName=x.PropertyName.PropertyPath;x.Ranges.forEach(function(y){y.Sign=y.Sign.EnumMember.split("/")[1];y.Option=y.Option.EnumMember.split("/")[1];y.Low=y.Low&&g.format(j,y.Low)||null;y.High=y.High&&g.format(j,y.High)||null;});});}if(u){u.forEach(function(x){x.PropertyName=x.PropertyName.PropertyPath.split("/")[1]||x.PropertyName.PropertyPath;x.PropertyValue=g.format(j,x.PropertyValue)||null;});}w=new k();v=w.convert(JSON.stringify(e),this,true);i=JSON.parse(v.payload);v={"version":"V2","filterbar":this._adaptFilterVisibilityProperties(i),"filterBarVariant":JSON.stringify(i)};return v;};
r.prototype.getBasicSearchControl=function(){return sap.ui.getCore().byId(this.getBasicSearch());};
r.prototype.addFieldToAdvancedArea=function(K){var e;this._logAccessWhenNotInitialized("addFieldToAdvancedArea");e=this._getFilterItemByName(K);if(e&&e.setVisibleInAdvancedArea){e.setVisibleInAdvancedArea(true);}};
r.prototype._onCustomFieldCustomDataChange=function(e){var N=e.getParameter("newValue"),v=e.getParameter("oldValue"),s=e.getParameter("name");if(v!==N&&s==="value"){this._updateToolbarText();}};
r.prototype._attachCustomControlCustomDataChange=function(e){var j,i;for(i=0;i<e.length;i++){j=e[i];if(j.getKey()==="hasValue"){j.attachEvent("_change",this._onCustomFieldCustomDataChange,this);break;}}};
r.prototype.getConditionTypeByKey=function(K){if(this._oFilterProvider._mConditionTypeFields[K]){return this._oFilterProvider._mConditionTypeFields[K].conditionType;}};
r.prototype.isInUTCMode=function(){if(this._oFilterProvider&&this._oFilterProvider._oDateFormatSettings){return this._oFilterProvider._oDateFormatSettings.UTC;}return false;};
r.prototype.isInitialised=function(){return!!this.bIsInitialised;};
r.prototype.associateValueLists=function(){if(this.getSuppressValueListsAssociation()&&this._oFilterProvider){this._oFilterProvider._fireEvent(c.ASSOCIATE_VALUE_LISTS);this._oFilterProvider._bSuppressValueListsAssociation=false;this._fireValueListAnnotationLoaded();if(typeof this._enhanceFilterItemsWithTextOnValueListAssociation==="function"){this._enhanceFilterItemsWithTextOnValueListAssociation();}}};
r.prototype._enhanceFilterItemsWithTextValue=function(v,s){if(!this._enhanceFilterItemsWithTextOnValueListAssociation&&this.getSuppressValueListsAssociation()){this._enhanceFilterItemsWithTextOnValueListAssociation=function(){var u=this.getUiState();F.prototype._enhanceFilterItemsWithTextValue.call(this,u.getValueTexts(),u.getSelectionVariant());}.bind(this);}else{F.prototype._enhanceFilterItemsWithTextValue.apply(this,arguments);}};
r.prototype._createVisibleFilters=function(){F.prototype._createVisibleFilters.apply(this,arguments);if(!this.getSuppressValueListsAssociation()&&this._oFilterProvider){this._fireValueListAnnotationLoaded();}this._setInitialFocus();};
r.prototype._attachValueListAnnotationLoaded=function(e,i,j){this.attachEvent("valueListAnnotationLoaded",e,i,j);};
r.prototype._fireValueListAnnotationLoaded=function(e){if(this._oFilterProvider&&Array.isArray(this._oFilterProvider.aFilterAnnotations)){Promise.all(this._oFilterProvider.aFilterAnnotations).then(function(){this.fireEvent("valueListAnnotationLoaded",e);}.bind(this));}};
r.prototype.getSuppressValueListsAssociation=function(){return false;};
r.prototype.setCustomFilterData=function(j){if(this._oFilterProvider&&this._oFilterProvider.getModel()){this._oFilterProvider.getModel().setProperty("/"+c.CUSTOM_FIELDS_MODEL_PROPERTY,j);}};
r.prototype.getCustomFilterData=function(){if(this._oFilterProvider&&this._oFilterProvider.getModel()){return this._oFilterProvider.getModel().getProperty("/"+c.CUSTOM_FIELDS_MODEL_PROPERTY);}};
r.prototype.refreshFiltersCount=function(){return Promise.all(this._oFilterProvider._getCurrentValidationPromises()).then(function(){return this._updateToolbarText();}.bind(this));};
r.prototype.destroy=function(){this._clearDelayedSearch();if(this._oFilterProvider&&this._oFilterProvider.destroy){this._oFilterProvider.destroy();}this._oFilterProvider=null;if(this._oSmartVariantManagement&&this.getConsiderSelectionVariants()){this._oSmartVariantManagement.unregisterSelectionVariantHandler(this);}F.prototype.destroy.apply(this,arguments);sap.ui.getCore().getMessageManager().unregisterObject(this);this._aFilterBarViewMetadata=null;this._oFilterBarViewMetadataExtend=null;this._bExpandAdvancedFilterArea=null;this._oResourceBundle=null;this._sMandatoryErrorMessage=null;this._sValidationErrorMessage=null;this._oSmartVariantManagement=null;};
return r;});
sap.ui.predefine('sap/ui/comp/smartform/ColumnLayout',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var C=E.extend("sap.ui.comp.smartform.ColumnLayout",{metadata:{interfaces:["sap.ui.comp.smartform.SmartFormLayout"],library:"sap.ui.comp",properties:{columnsXL:{type:"sap.ui.layout.form.ColumnsXL",group:"Appearance",defaultValue:2},columnsL:{type:"sap.ui.layout.form.ColumnsL",group:"Appearance",defaultValue:2},columnsM:{type:"sap.ui.layout.form.ColumnsM",group:"Appearance",defaultValue:1},labelCellsLarge:{type:"sap.ui.layout.form.ColumnCells",group:"Appearance",defaultValue:4},emptyCellsLarge:{type:"sap.ui.layout.form.EmptyCells",group:"Appearance",defaultValue:0}}}});
return C;});
sap.ui.predefine('sap/ui/comp/smartform/Group',['sap/ui/comp/library','sap/ui/core/Element','sap/ui/layout/form/FormContainer',"sap/base/Log"],function(l,E,F,L){"use strict";var R;
var G=F.extend("sap.ui.comp.smartform.Group",{metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartform/Group.designtime",properties:{useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},label:{type:"string",group:"Misc",defaultValue:null}},defaultAggregation:"groupElements",aggregations:{groupElements:{type:"sap.ui.comp.IFormGroupElement",multiple:true,singularName:"groupElement"},layout:{type:"sap.ui.layout.GridData",multiple:false}},_bVisibleElements:false}});
G.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["useHorizontalLayout","horizontalLayoutGroupElementMinWidth","label"]});};
function _(v){var j=this.getGroupElements();for(var i=0;i<j.length;i++){if(j[i].isA("sap.ui.comp.smartform.SemanticGroupElement")){L.error("useHorizontalLayout can't be used for SemanticGroupElement",this);}else if(j[i].getUseHorizontalLayout()!=v){j[i].setUseHorizontalLayout(v);}}this._updateLayoutData();}
G.prototype._updateLayoutData=function(){if(this.getUseHorizontalLayout()){var s=this.getParent();while(s&&!s.addGroup&&s.getParent){s=s.getParent();}if(s){var o=s.getLayout();if(!o||!o.getGridDataSpan()){if(!this.getLayoutData()){if(!R&&!this._bResponsiveFlowLayoutDataRequested){R=sap.ui.require("sap/ui/layout/ResponsiveFlowLayoutData");if(!R){sap.ui.require(["sap/ui/layout/ResponsiveFlowLayoutData"],a.bind(this));this._bResponsiveFlowLayoutDataRequested=true;}}if(R&&!this._bResponsiveFlowLayoutDataRequested){var r=new R({"linebreak":true,"linebreakable":true});r._bCreatedByGroup=true;this.setLayoutData(r);}}}else{this._updateLineBreaks();}}}else{var i=this.getLayoutData();if(i&&i._bCreatedByGroup){this.destroyLayoutData();}}};
function a(r){R=r;this._bResponsiveFlowLayoutDataRequested=false;if(!this._bIsBeingDestroyed){this._updateLayoutData();}}
function b(n){L.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);var j=this.getGroupElements();for(var i=0;i<j.length;i++){j[i].setHorizontalLayoutGroupElementMinWidth(n);}}
G.prototype.setEditMode=function(i){this._setEditable(i);return this;};
G.prototype._updateLineBreaks=function(){if(!this.getUseHorizontalLayout()){return;}var s=this.getParent();if(!s){return;}while(s&&!s._getGridDataSpanNumbers&&s.getParent){s=s.getParent();}if(!s._getGridDataSpanNumbers){return;}var S=s._getGridDataSpanNumbers();if(!S){return;}var j=this.getGroupElements();j=j.filter(function(t){return t.isVisible();});var C=0;var k=0;var m=0;var n=0;var o=false;var p=false;var q=false;var r=false;for(var i=0;i<j.length;i++){var t=j[i];C++;k++;m++;n++;if(S.XL*C>12){o=true;C=1;}else{o=false;}if(S.L*k>12){p=true;k=1;}else{p=false;}if(S.M*m>12){q=true;m=1;}else{q=false;}if(S.S*n>12){r=true;n=1;}else{r=false;}t._setLinebreak(o,p,q,r);}};
G.prototype._updateGridDataSpan=function(){if(!this.getUseHorizontalLayout()){return;}var j=this.getGroupElements();for(var i=0;i<j.length;i++){j[i]._updateGridDataSpan();}};
G.prototype._updateFormContainerVisibility=function(){var i=this.getGroupElements();var v=false;v=i.some(function(o){return o.isVisible();});if(this._bVisibleElements!==v){this._bVisibleElements=v;if(this.isPropertyInitial("visible")){this.fireEvent("_visibleChanged");}}};
function c(s){var t=this.getTitle();if(t&&(typeof t!=="string")){L.error("Title already set, Label can not be set",this);}else{this.setTitle(s);}}
G.prototype.setVisible=function(v){var o=this.getVisible();F.prototype.setVisible.apply(this,arguments);if(v!=o||v!=this._bVisibleElements){this.fireEvent("_visibleChanged");}return this;};
G.prototype.isVisible=function(){if(this.isPropertyInitial("visible")){return this._bVisibleElements;}else{return this.getVisible();}};
G.prototype.addGroupElement=function(o){return this.addFormElement(o);};
G.prototype.insertGroupElement=function(o,i){return this.insertFormElement(o,i);};
G.prototype.getGroupElements=function(){return this.getFormElements();};
G.prototype.indexOfGroupElement=function(o){return this.indexOfFormElement(o);};
G.prototype.removeGroupElement=function(v){return this.removeFormElement(v);};
G.prototype.removeAllGroupElements=function(){return this.removeAllFormElements();};
G.prototype.destroyGroupElements=function(){return this.destroyFormElements();};
G.prototype.addFormElement=function(o){if(!o){return this;}o=this.validateAggregation("groupElements",o,true);d.call(this,o);F.prototype.addFormElement.apply(this,arguments);e.call(this,o);return this;};
G.prototype.insertFormElement=function(o,i){if(!o){return this;}o=this.validateAggregation("groupElements",o,true);d.call(this,o);F.prototype.insertFormElement.apply(this,arguments);e.call(this,o);return this;};
G.prototype.removeFormElement=function(v){var o=F.prototype.removeFormElement.apply(this,arguments);if(o){o.detachVisibleChanged(this._updateFormContainerVisibility,this);h.call(this,o);this._updateFormContainerVisibility();this._updateLineBreaks();}return o;};
G.prototype.removeAllFormElements=function(){var j=F.prototype.removeAllFormElements.apply(this,arguments);for(var i=0;i<j.length;i++){var o=j[i];o.detachVisibleChanged(this._updateFormContainerVisibility,this);h.call(this,o);}this._updateFormContainerVisibility();this._updateLineBreaks();return j;};
G.prototype.destroyFormElements=function(){F.prototype.destroyFormElements.apply(this,arguments);this._updateFormContainerVisibility();this._updateLineBreaks();return this;};
function d(o){var u=this.getUseHorizontalLayout();var H=this.getHorizontalLayoutGroupElementMinWidth();if(H!=o.getHorizontalLayoutGroupElementMinWidth){o.setHorizontalLayoutGroupElementMinWidth(H);}if(u!=o.getUseHorizontalLayout()){o.setUseHorizontalLayout(u);}o.attachVisibleChanged(this._updateFormContainerVisibility,this);f.call(this,o);}
function e(o){this._updateFormContainerVisibility();if(this.getUseHorizontalLayout()){o._updateGridDataSpan();this._updateLineBreaks();}}
G.prototype.setLayout=function(o){o=this.validateAggregation("layout",o,false);return this.setLayoutData(o);};
G.prototype.getLayout=function(){return this.getLayoutData();};
G.prototype.destroyLayout=function(o){return this.destroyLayoutData();};
G.prototype.addCustomData=function(C){if(!C){return this;}F.prototype.addCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){g.call(this,j[i],C);}return this;};
G.prototype.insertCustomData=function(C,I){if(!C){return this;}F.prototype.insertCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){g.call(this,j[i],C);}return this;};
G.prototype.removeCustomData=function(C){var o=F.prototype.removeCustomData.apply(this,arguments);if(o){var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i],o.getId());}}return o;};
G.prototype.removeAllCustomData=function(){var C=F.prototype.removeAllCustomData.apply(this,arguments);if(C.length>0){var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i]);}}return C;};
G.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var j=this.getGroupElements();for(var i=0;i<j.length;i++){h.call(this,j[i]);}return this;};
function f(o){var C=this.getCustomData();for(var i=0;i<C.length;i++){g.call(this,o,C[i]);}}
function g(o,C){if(l.smartform.inheritCostomDataToFields(C)){var n=C.clone();n._bFromGroup=true;n._sOriginalId=C.getId();o.addCustomData(n);}}
function h(o,O){var C=o.getCustomData();for(var i=0;i<C.length;i++){var j=C[i];if(j._bFromGroup&&(!O||O==j._sOriginalId)){o.removeCustomData(j);}}}
G.prototype.clone=function(I,j){var k=this.removeAllGroupElements();var C=F.prototype.clone.apply(this,arguments);for(var i=0;i<k.length;i++){var o=k[i];var m=o.clone(I,j);this.addGroupElement(o);C.addGroupElement(m);}return C;};
G.prototype._observeChanges=function(C){F.prototype._observeChanges.apply(this,arguments);if(C.name=="label"){c.call(this,C.current);}else if(C.name=="useHorizontalLayout"){_.call(this,C.current);}else if(C.name=="horizontalLayoutGroupElementMinWidth"){b.call(this,C.current);}};
return G;});
sap.ui.predefine('sap/ui/comp/smartform/GroupElement',['sap/ui/comp/library','sap/ui/core/Element','sap/ui/core/Control','sap/ui/layout/form/FormElement','sap/m/Label','sap/ui/comp/smartfield/SmartLabel','sap/ui/comp/smartfield/SmartField',"sap/base/Log"],function(l,E,C,F,L,S,a,b){"use strict";var V;var H;var c;var d;var G;var e=l.smartfield.ControlContextType;
var f=F.extend("sap.ui.comp.smartform.GroupElement",{
metadata:{library:"sap.ui.comp",interfaces:["sap.ui.comp.IFormGroupElement"],properties:{useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},elementForLabel:{type:"int",group:"Misc",defaultValue:0}},defaultAggregation:"elements",aggregations:{elements:{type:"sap.ui.core.Control",multiple:true,singularName:"element"}},events:{visibleChanged:{}},designtime:"sap/ui/comp/designtime/smartform/GroupElement.designtime"},
_bVisibleElements:false,
_bHorizontalLayoutUsed:false
});
f._myVBox=undefined;
f.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["useHorizontalLayout","horizontalLayoutGroupElementMinWidth","elementForLabel","_editable"]});};
f.prototype._getFieldRelevantForLabel=function(){var i=this.getElements();var P=this.getElementForLabel();if(i.length>P&&(i[P]instanceof a)){return i[P];}return null;};
f.prototype._extractFields=function(i,P){var Q=[];i.forEach(function(R){if(R instanceof V||R instanceof H){Q=Q.concat(R.getItems());}else{Q.push(R);}});if(Q.some(function(R){return R instanceof V||R instanceof H;})){Q=this._extractFields(Q);}if(P){Q=Q.filter(function(R){return!(R instanceof L);});}return Q;};
f.prototype.setTooltip=function(T){F.prototype.setTooltip.apply(this,[T]);var R=this._getFieldRelevantForLabel();var i=this._getLabel();_.call(this,i,R);return this;};
function _(i,R){if(i==this._oSetLabel){return;}var T;if(this._oSetLabel&&this._oSetLabel instanceof C){T=O.call(this._oSetLabel);}if(!T){T=O.call(this);}if(T){if(i instanceof S){if(R&&R.setTooltipLabel){R.setTooltipLabel(T);}}else{i.setTooltip(T);}}}
f.prototype.setLabel=function(i){if(!i&&this._bMoveLabelToVBox){return this.setAggregation("label",i);}if(this._oSetLabel&&(typeof this._oSetLabel!=="string")){this._oSetLabel.detachEvent("_change",g,this);}var P;var Q;var R;if(typeof i==="string"){P=this._getLabel();if(P){Q=P.getText();}}else if(!i&&this._oSetLabel){Q=this.getLabelText();}F.prototype.setLabel.apply(this,[i]);this._oSetLabel=i;h.call(this);if(typeof i==="string"){if(this._oLabel instanceof S&&i!=Q&&(i.length>0||Q.length>0)){R=this._getFieldRelevantForLabel();if(R&&i!=null){if(R.getComputedTextLabel){if(!R._oTextLabelSetByGroupElement){R._oTextLabelSetByGroupElement={oldText:R.getComputedTextLabel()};}R.setTextLabel(i);}}}if(!this._bHorizontalLayoutUsed){this.setAggregation("_label",this._oLabel,true);}this._oLabel.isRequired=j;this._oLabel.isDisplayOnly=k;}else{if(i){if(i.isRequired){i.isRequired=j;}if(i.isDisplayOnly){i.isDisplayOnly=k;}i.attachEvent("_change",g,this);}else{R=this._getFieldRelevantForLabel();if(R){M.call(this,R,Q);}}this.updateLabelOfFormElement();}return this;};
f.prototype.destroyLabel=function(){var i=this.getLabelText();F.prototype.destroyLabel.apply(this);delete this._oSetLabel;h.call(this);var P=this._getFieldRelevantForLabel();if(P){M.call(this,P,i);}this.updateLabelOfFormElement();return this;};
function g(i){if(i.getParameter("name")=="text"){var P=i.oSource;var T=P.getText();if(this._oLabel){this._oLabel.setText(T);}var Q=this._getFieldRelevantForLabel();if(Q&&Q.getComputedTextLabel){if(!Q._oTextLabelSetByGroupElement){Q._oTextLabelSetByGroupElement={oldText:Q.getComputedTextLabel()};}Q.setTextLabel(T);}}}
function h(){if(!this._bHorizontalLayoutUsed){return;}var i=this.getFields();var P;if(i.length>0){var Q=this.getFields()[0];if(Q instanceof V){var R=Q.getItems();var T=this._getLabel();if(R.length>0&&R[0]instanceof L){P=R[0];}this._bMoveLabelToVBox=true;if(P&&P!=T){Q.removeItem(0);if(P._bCreatedByGroupElement){this.setAggregation("_label",P,true);}else{this.setAggregation("label",P);}}if(T&&P!=T){Q.insertItem(T,0);}this._bMoveLabelToVBox=false;n.call(this);}}}
function j(){if(this.getRequired&&this.getRequired()){return true;}var P=this.getParent();if(P&&P.isA("sap.m.VBox")){P=P.getParent();}var Q=P.getElements();for(var i=0;i<Q.length;i++){var R=Q[i];if(R.getRequired&&R.getRequired()===true&&(!R.getEditable||R.getEditable())&&(!R.getContextEditable||R.getContextEditable())){return true;}}return false;}
function k(){if(this.getDisplayOnly){if(!this.isPropertyInitial("displayOnly")){return this.getDisplayOnly();}var i=this.getParent();if(i&&i.isA("sap.m.VBox")){i=i.getParent();}var P=i.getParent();if(P){var Q=P.getParent();if(Q){return!Q.getEditable();}}}return false;}
function m(){var i=this.getParent();if(i&&i.isA("sap.m.VBox")){i=i.getParent();}if(i._oSetLabel&&!(typeof i._oSetLabel==="string")&&i._oSetLabel.getWrapping&&!i._oSetLabel.isPropertyInitial("wrapping")){return i._oSetLabel.getWrapping();}return true;}
function n(){var i=this._getFieldRelevantForLabel();if(i){if(this._oLabel){this._oLabel.setLabelFor(i);}return;}var P=this.getFields();i=P.length>0?P[0]:null;if(i instanceof V){var Q=i.getItems();if(Q[1]instanceof H){i=Q[1].getItems()[0];}else{i=Q[1];}}var R=this._oLabel;if(R){R.setLabelFor(i);}else{R=this.getLabel();if(R instanceof C){R.setAlternativeLabelFor(i);}}}
f.prototype.getLabel=function(){return this._oSetLabel;};
f.prototype._getLabel=function(){if(this._oLabel){return this._oLabel;}else{return this._oSetLabel;}};
f.prototype.getLabelControl=function(){if(this._bHorizontalLayoutUsed){return null;}else{return this._getLabel();}};
f.prototype.getLabelText=function(){var i="";var P=this._getLabel();if(P){i=P.getText();}return i;};
f.prototype.getDataSourceLabel=function(){var i=this._getFieldRelevantForLabel();if(i&&i.isA("sap.ui.comp.smartfield.SmartField")){return i.getDataSourceLabel();}};
f.prototype._createLabel=function(i){var P=null;var Q=this._getFieldRelevantForLabel();if(Q){if(Q.getShowLabel&&Q.getShowLabel()){P=new S(Q.getId()+'-label');if(i){if(!Q._oTextLabelSetByGroupElement){Q._oTextLabelSetByGroupElement={oldText:Q.getComputedTextLabel()};}Q.setTextLabel(i);P.setText(i);}P.setLabelFor(Q);}}else{P=new L(this.getId()+"-label",{text:i});}if(P){P._bCreatedByGroupElement=true;P.isRequired=j;P.isDisplayOnly=k;P.isWrapping=m;this._oLabel=P;if(!this._bHorizontalLayoutUsed){this.setAggregation("_label",P,true);}if(this._oSetLabel&&typeof this._oSetLabel!=="string"){this._oSetLabel.setAlternativeLabelFor(null);}}return P;};
f.prototype.updateLabelOfFormElement=function(){var i=false,P=null;var Q=this.getElements();var R=this._getFieldRelevantForLabel();var T=this._getLabel();var U=false;if(T&&T._bCreatedByGroupElement){if(T instanceof S){if(!R||(T._sSmartFieldId&&T._sSmartFieldId!=R.getId())){U=true;}}else if(R){U=true;}if(U){T.destroy();delete this._oLabel;T=null;if(this._oSetLabel&&!R){if(typeof this._oSetLabel==="string"){F.prototype.setLabel.apply(this,[this._oSetLabel]);T=this._oLabel;this._oLabel.isRequired=j;this._oLabel.isDisplayOnly=k;}else{T=this._oSetLabel;}h.call(this);}}}else if(T&&R){if(T==this._oLabel){T.destroy();delete this._oLabel;}T=null;}if(!T){if(this._oSetLabel){if(typeof this._oSetLabel==="string"){P=this._oSetLabel;}else{P=this._oSetLabel.getText();}}else{P="";}}if(!T&&Q.length>0){T=this._createLabel(P);i=true;}if(T){if(T instanceof S){if(R&&R.setTextLabel&&R.getComputedTextLabel()){T.setText(R.getComputedTextLabel());}}_.call(this,T,R);}if(i){h.call(this);if(T&&T.setLabelFor&&!(T instanceof S)&&!R&&(Q.length>0)){T.setLabelFor(Q[0]);}}};
f.prototype.setEditMode=function(i){this._setEditable(i);return this;};
function o(P){var Q=this.getElements();for(var i=0;i<Q.length;i++){var R=Q[i];p.call(this,R,P);}}
function p(i,P){if(i instanceof a){if(!(i.data("editable")===false)){i.setContextEditable(P);}}}
f.prototype.invalidateLabel=function(){var i=this._getLabel();if(i){i.invalidate();}};
f.prototype._updateFormElementVisibility=function(){var i=this.getVisibleBasedOnElements();if(this._bVisibleElements!==i){this._bVisibleElements=i;if(this.isPropertyInitial("visible")){y.call(this);this.invalidate();}}};
f.prototype._updateLayout=function(){var i=null;var P=null;var Q=null;var U=this.getUseHorizontalLayout();var R;var T=0;var W;if(U==this._bHorizontalLayoutUsed){return;}if(U&&!q.call(this)){return;}var X=this.getElements();var Y=this._getLabel();this._bNoObserverChange=true;if(U){if(X.length>0){if(X[0].getLayoutData()){Q=X[0].getLayoutData();}this.removeAllFields();if(X.length>1){for(T=0;T<X.length;T++){W=X[T];if(T>0){s.call(this,W);}}P=v.call(this,X.slice(0));}if(P){R=[P];}else{R=X.slice(0);}i=u.call(this,R,Y,Q);this.addField(i);if(Y){n.call(this);}}}else{var Z=this.getFields();if(Z[0]instanceof V){i=Z[0];R=i.getItems();if(X.length>1&&R.length>0){if(Y){if(R.length>1&&R[1]instanceof H){P=R[1];}}else if(R[0]instanceof H){P=R[0];}if(P){P.removeAllItems();P.destroy();}}i.removeAllItems();i.destroy();}this.removeAllFields();for(T=0;T<X.length;T++){W=X[T];t.call(this,W);this.addField(W);}if(Y){if(Y==this._oLabel){this.setAggregation("_label",Y,true);}else{this.setAggregation("label",Y);}}}this._bHorizontalLayoutUsed=U;this._bNoObserverChange=false;};
function q(){if((!V||!H||!c||!d||!G)&&!this._bVBoxRequested){V=sap.ui.require("sap/m/VBox");H=sap.ui.require("sap/m/HBox");c=sap.ui.require("sap/m/FlexItemData");d=sap.ui.require("sap/ui/core/VariantLayoutData");G=sap.ui.require("sap/ui/layout/GridData");if(!V||!H||!c||!d||!G){sap.ui.require(["sap/m/VBox","sap/m/HBox","sap/m/FlexItemData","sap/ui/core/VariantLayoutData","sap/ui/layout/GridData"],r.bind(this));this._bVBoxRequested=true;}}if(V&&H&&c&&d&&G&&!this._bVBoxRequested){return true;}else{return false;}}
function r(i,P,Q,R,T){V=i;H=P;c=Q;d=R;G=T;this._bVBoxRequested=false;if(!this._bIsBeingDestroyed){this._updateLayout();}}
function s(i){var P=i.getLayoutData();if(P){if(P.getStyleClass&&!P.getStyleClass()){P.setStyleClass("sapUiCompGroupElementHBoxPadding");}}else{P=new c({styleClass:"sapUiCompGroupElementHBoxPadding"});P._bCreatedByGroupElement=true;i.setLayoutData(P);}}
function t(i){var P=i.getLayoutData();if(P){if(P._bCreatedByGroupElement){P.destroy();}else if(P.getStyleClass&&P.getStyleClass()=="sapUiCompGroupElementHBoxPadding"){P.setStyleClass();}}}
function u(i,P,Q){if(!f._myVBox){f._myVBox=V.extend("SmartFormVBox",{metadata:{interfaces:["sap.ui.core.IFormContent"]},enhanceAccessibilityState:w,renderer:{apiVersion:2}});}this._bMoveLabelToVBox=true;var R=i.slice(0);if(P){R.splice(0,0,P);}var T=new f._myVBox(this.getId()+"--VBox",{"items":R});this._bMoveLabelToVBox=false;T.addStyleClass("sapUiCompGroupElementVBox");T._oGroupElement=this;if(Q&&(Q instanceof G||Q instanceof d||Q.isA("sap.ui.layout.ResponsiveFlowLayoutData"))){T.setLayoutData(Q.clone());}x.call(this,T);return T;}
function v(i){var P=new H(this.getId()+"--HBox",{"items":i});P._oGroupElement=this;P.enhanceAccessibilityState=w;return P;}
function w(i,P){var Q=this._oGroupElement._getLabel();if(Q&&Q!=i&&!(i instanceof H)){var R=P["labelledby"];if(!R){R=Q.getId();}else{var T=R.split(" ");if(((T?Array.prototype.indexOf.call(T,Q.getId()):-1))<0){T.splice(0,0,Q.getId());R=T.join(" ");}}P["labelledby"]=R;}}
f.prototype._updateGridDataSpan=function(){if(!this._bHorizontalLayoutUsed){return;}var i=this.getFields();if(i.length>0){var P=i[0];if(P instanceof V){x.call(this,P);}}};
function x(P){var Q=this.getParent();if(!Q||!Q.addGroupElement){return;}var R=Q.getParent();while(R&&!R.addGroup&&R.getParent){R=R.getParent();}if(!R){return;}var T="";var U=R.getLayout();if(U){T=U.getGridDataSpan();}var W=P.getLayoutData();var X;if(W){if(!(W instanceof G)&&!(W instanceof d)&&T){X=new G({span:T});X._bFromGroupElement=true;var Y=new d({multipleLayoutData:[W,X]});Y._bFromGroupElement=true;P.setLayoutData(Y);}else if(W instanceof G){if(W._bFromGroupElement){if(!T){W.destroy();}else{W.setSpan(T);}}}else if(W instanceof d){var Z=false;W.getMultipleLayoutData().forEach(function(W){if(W instanceof G){Z=true;if(W._bFromGroupElement){if(!T){W.destroy();}else{W.setSpan(T);}}}});if(!Z&&T){X=new G({span:T});X._bFromGroupElement=true;W.addMultipleLayoutData(X);}if(W._bFromGroupElement&&W.getMultipleLayoutData().length==1){X=W.getMultipleLayoutData()[0];P.setLayoutData(X);W.destroy();}}}else if(T){X=new G({span:T});X._bFromGroupElement=true;P.setLayoutData(X);}var $=this.getElements();for(var i=0;i<$.length;i++){var a1=$[i];if(a1&&a1.setControlContext){if(T){a1.setControlContext(e.SmartFormGrid);}else{a1.setControlContext(e.Form);}}}}
f.prototype._setLinebreak=function(P,Q,R,T){if(!this._bHorizontalLayoutUsed){return;}var U=this.getFields();if(U.length>0){var W=U[0];if(!(W instanceof V)){return;}var X=W.getLayoutData();if(X){if(X instanceof d){var Y=X.getMultipleLayoutData();for(var i=0;i<Y.length;i++){X=Y[i];if(X instanceof G){X.setLinebreakXL(P);X.setLinebreakL(Q);X.setLinebreakM(R);X.setLinebreakS(T);}}}else if(X instanceof G){X.setLinebreakXL(P);X.setLinebreakL(Q);X.setLinebreakM(R);X.setLinebreakS(T);}}}};
f.prototype.setVisible=function(i){var P=this.isVisible();F.prototype.setVisible.apply(this,arguments);if(P!=i){y.call(this);}return this;};
f.prototype.isVisible=function(){if(this.isPropertyInitial("visible")){return this._bVisibleElements;}else{return this.getVisible();}};
function y(){this.fireVisibleChanged({visible:this.isVisible()});if(this.getParent()){this.getParent()._updateLineBreaks();}}
f.prototype.getFormElement=function(){return this;};
f.prototype.addElement=function(i){if(!i){return this;}i=this.validateAggregation("elements",i,true);A.call(this,i);var P;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){P=this._oLabel._sSmartFieldId;}if(this._bHorizontalLayoutUsed){z.call(this,i,undefined,true);}else{this.addField(i);}if(P&&P!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(P);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
f.prototype.insertElement=function(i,P){if(!i){return this;}i=this.validateAggregation("elements",i,true);A.call(this,i);var Q;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){Q=this._oLabel._sSmartFieldId;}if(this._bHorizontalLayoutUsed){z.call(this,i,P,false);}else{this.insertField(i,P);}if(Q&&Q!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(Q);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
f.prototype.getElements=function(){var i;var P;if(this._bHorizontalLayoutUsed){i=this.getFields();P=this._extractFields(i,true);}else{P=this.getFields();}return P;};
f.prototype.indexOfElement=function(P){var Q=-1;if(this._bHorizontalLayoutUsed){var R=this.getElements();for(var i=0;i<R.length;i++){if(P==R[i]){Q=i;break;}}}else{Q=this.indexOfField(P);}return Q;};
f.prototype.removeElement=function(i){var R;var P;if(this._oLabel&&this._oLabel._bCreatedByGroupElement&&this._oLabel._sSmartFieldId){P=this._oLabel._sSmartFieldId;}if(this._bHorizontalLayoutUsed){R=J.call(this,i,false);}else{R=this.removeField(i);}if(R){K.call(this,R);}if(P&&P!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(P);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return R;};
f.prototype.removeAllElements=function(){var R;if(this._bHorizontalLayoutUsed){R=J.call(this,undefined,true);}else{R=this.removeAllFields();}if(R&&Array.isArray(R)){for(var i=0;i<R.length;i++){K.call(this,R[i]);}}this.updateLabelOfFormElement();this._updateFormElementVisibility();return R;};
f.prototype.destroyElements=function(){if(this._bHorizontalLayoutUsed){var i=this.getFields();if(i.length>0){var P=this._getLabel();if(P){i[0].removeItem(P);if(P==this._oLabel){this.setAggregation("_label",P,true);}else{this.setAggregation("label",P);}}this.destroyFields();}}else{this.destroyFields();}this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
f.prototype._observeChanges=function(i){F.prototype._observeChanges.apply(this,arguments);if(i.object==this){switch(i.name){case"useHorizontalLayout":this._updateLayout();break;case"horizontalLayoutGroupElementMinWidth":b.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);this._updateLayout();break;case"elementForLabel":this.updateLabelOfFormElement();break;case"_editable":o.call(this,i.current);break;default:break;}}else{I.call(this,i);}};
function z(i,P,Q){var R=this._getLabel();var T=this.getFields();var U;var W;var X;if(T.length>0){U=T[0];}else{X=[i];var Y=i.getLayoutData();U=u.call(this,X,R,Y);this.addField(U);if(R){n.call(this);}return;}if(!(U instanceof V)){return;}X=U.getItems();if(R){if(X.length>1){W=X[1];}}else if(X.length>0){W=X[0];}if(W instanceof H){X=W.getItems();if((Q||P>0)&&X.length>0){s.call(this,i);}if(Q){W.addItem(i);}else{if(P==0&&X.length>0){s.call(this,X[0]);}W.insertItem(i,P);}}else{var Z=W;X=[];if(Z){U.removeItem(Z);if(Q||P>0){X.push(Z);X.push(i);s.call(this,i);}else{X.push(i);X.push(Z);s.call(this,Z);}W=v.call(this,X);U.addItem(W);}else{U.addItem(i);}if(R){n.call(this);}}}
function A(i){if(i.getEditable){if(!i.getEditable()){i.data("editable",false);}}this._oObserver.observe(i,{properties:["visible"]});if(i.attachInnerControlsCreated){i.attachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(e.Form);}if(i.getMetadata().getProperty("mandatory")){this._oObserver.observe(i,{properties:["mandatory"]});}p.call(this,i,this.getProperty("_editable"));B.call(this,i);}
function B(P){if(P instanceof a){var Q=this.getCustomData();for(var i=0;i<Q.length;i++){D.call(this,P,Q[i]);}}}
function D(i,P){if(i instanceof a&&l.smartform.inheritCostomDataToFields(P)){var Q=P.clone();Q._bFromGroupElement=true;Q._sOriginalId=P.getId();i.addCustomData(Q);}}
function I(i){if(i.name=="mandatory"){this.invalidateLabel();}else if(i.name=="visible"){this._updateFormElementVisibility();}}
function J(P,Q){var R=this._getLabel();var T=this.getFields();var U;var W;var X;var Y;var Z=false;var $;if(T.length>0){U=T[0];}if(!(U instanceof V)){return null;}X=U.getItems();if(R){if(X.length>1){W=X[1];}}else if(X.length>0){W=X[0];}if(W instanceof H){if(Q){Y=W.removeAllItems();Z=true;}else{Y=W.removeItem(P);X=W.getItems();if(X.length>0){t.call(this,X[0]);if(X.length==1){$=X[0];W.removeAllItems();U.removeItem(W);W.destroy();U.addItem($);}}}}else{if(Q){Y=U.removeAllItems();}else{Y=U.removeItem(P);}if(Y){Z=true;}}if(Z){if(R){U.removeItem(R);if(R==this._oLabel){this.setAggregation("_label",R,true);}else{this.setAggregation("label",R);}}this.removeField(U);U.destroy();}if(Y){if(Array.isArray(Y)){for(var i=0;i<Y.length;i++){$=Y[i];t.call(this,$);}}else{t.call(this,Y);}}return Y;}
function K(i){if(i.detachInnerControlsCreated){i.detachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(e.None);}N.call(this,i);M.call(this,i,this.getLabelText());}
function M(i,P){if(i._oTextLabelSetByGroupElement){if(i.getComputedTextLabel()==P){i.setTextLabel(i._oTextLabelSetByGroupElement.oldText);}delete i._oTextLabelSetByGroupElement;}}
function N(P,Q){if(P instanceof a){var R=P.getCustomData();for(var i=0;i<R.length;i++){var T=R[i];if(T._bFromGroupElement&&(!Q||Q==T._sOriginalId)){P.removeCustomData(T);T.destroy();}}}}
f.prototype._updateFormElementLabel=function(i){var R=this._getFieldRelevantForLabel();var P=this._getLabel();var Q=i.oSource;var T=i.getParameters();if(P instanceof S&&Q&&T&&Q===R){P.updateLabelFor(T);}};
f.prototype.addCustomData=function(P){if(!P){return this;}F.prototype.addCustomData.apply(this,arguments);var Q=this.getElements();for(var i=0;i<Q.length;i++){D.call(this,Q[i],P);}return this;};
f.prototype.insertCustomData=function(P,Q){if(!P){return this;}F.prototype.insertCustomData.apply(this,arguments);var R=this.getElements();for(var i=0;i<R.length;i++){D.call(this,R[i],P);}return this;};
f.prototype.removeCustomData=function(P){var Q=F.prototype.removeCustomData.apply(this,arguments);if(Q){var R=this.getElements();for(var i=0;i<R.length;i++){N.call(this,R[i],Q.getId());}}return Q;};
f.prototype.removeAllCustomData=function(){var P=F.prototype.removeAllCustomData.apply(this,arguments);if(P.length>0){var Q=this.getElements();for(var i=0;i<Q.length;i++){N.call(this,Q[i]);}}return P;};
f.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var P=this.getElements();for(var i=0;i<P.length;i++){N.call(this,P[i]);}return this;};
f.prototype.getVisibleBasedOnElements=function(){var i=false;var P=this.getElements();if(P&&P.length>0){i=P.some(function(Q){return Q.getVisible();});}return i;};
function O(){var T=this.getTooltip();if(!T||typeof T==="string"||T instanceof String){return T;}else{return T.getText();}}
f.prototype.clone=function(P,Q){var R=this.removeAllElements();var T=F.prototype.clone.apply(this,arguments);for(var i=0;i<R.length;i++){var U=R[i];var W=U.clone(P,Q);this.addElement(U);T.addElement(W);}return T;};
return f;});
sap.ui.predefine('sap/ui/comp/smartform/Layout',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var L=E.extend("sap.ui.comp.smartform.Layout",{
metadata:{interfaces:["sap.ui.comp.smartform.SmartFormLayout"],library:"sap.ui.comp",properties:{labelSpanXL:{type:"int",group:"Misc",defaultValue:null},labelSpanL:{type:"int",group:"Misc",defaultValue:null},labelSpanM:{type:"int",group:"Misc",defaultValue:null},labelSpanS:{type:"int",group:"Misc",defaultValue:null},emptySpanXL:{type:"int",group:"Misc",defaultValue:null},emptySpanL:{type:"int",group:"Misc",defaultValue:null},emptySpanM:{type:"int",group:"Misc",defaultValue:null},emptySpanS:{type:"int",group:"Misc",defaultValue:null},columnsXL:{type:"int",group:"Misc",defaultValue:null},columnsL:{type:"int",group:"Misc",defaultValue:null},columnsM:{type:"int",group:"Misc",defaultValue:null},singleGroupFullSize:{type:"boolean",group:"Misc",defaultValue:true},breakpointXL:{type:"int",group:"Misc",defaultValue:null},breakpointL:{type:"int",group:"Misc",defaultValue:null},breakpointM:{type:"int",group:"Misc",defaultValue:null},gridDataSpan:{type:"sap.ui.layout.GridSpan",group:"Misc",defaultValue:""}}},
_oSpan:{XL:0,L:0,M:0,S:0}
});
L.prototype.setGridDataSpan=function(g){var r=[];var P=/XL([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.XL=parseInt(r[1]);}else{this._oSpan.XL=0;}P=/\bL([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.L=parseInt(r[1]);if(!this._oSpan.XL){this._oSpan.XL=this._oSpan.L;}}P=/M([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.M=parseInt(r[1]);}P=/S([1-9]|1[0-2])(?:\s|$)/i;r=P.exec(g);if(r&&r[1]){this._oSpan.S=parseInt(r[1]);}this.setProperty("gridDataSpan",g);return this;};
L.prototype._getGridDataSpanNumbers=function(){return this._oSpan;};
return L;});
sap.ui.predefine('sap/ui/comp/smartform/SemanticGroupElement',['sap/ui/comp/library','sap/ui/core/Control','sap/ui/layout/form/SemanticFormElement','sap/m/Label','sap/ui/comp/smartfield/SmartLabel','sap/ui/comp/smartfield/SmartField',"sap/base/Log"],function(l,C,F,L,S,a,b){"use strict";var V;var G;var c=l.smartfield.ControlContextType;
var d=F.extend("sap.ui.comp.smartform.SemanticGroupElement",{
metadata:{library:"sap.ui.comp",interfaces:["sap.ui.comp.IFormGroupElement"],properties:{elementForLabel:{type:"int",group:"Misc",defaultValue:0}},defaultAggregation:"elements",aggregations:{elements:{type:"sap.ui.core.Control",multiple:true,singularName:"element"}},events:{visibleChanged:{}}},
_bVisibleElements:false
});
function _(i,R){if(i==this._oSetLabelFromOutside){return;}var T;if(this._oSetLabelFromOutside&&this._oSetLabelFromOutside instanceof C){T=e.call(this._oSetLabelFromOutside);}if(!T){T=e.call(this);}if(T){if(i instanceof S){if(R&&R.setTooltipLabel){R.setTooltipLabel(T);}}else{i.setTooltip(T);}}}
function e(){var T=this.getTooltip();if(!T||typeof T==="string"||T instanceof String){return T;}else{return T.getText();}}
function f(E){if(E.getParameter("name")=="text"){var i=E.oSource;var T=i.getText();if(this._oLabel){this._oLabel.setText(T);}var w=this._getFieldRelevantForLabel();if(w&&w.getComputedTextLabel){if(!w._oTextLabelSetBySemanticGroupElement){w._oTextLabelSetBySemanticGroupElement={oldText:w.getComputedTextLabel()};}w.setTextLabel(T);}}}
function g(){if(this.getRequired&&this.getRequired()){return true;}var w=this.getParent();var x=w.getElements();for(var i=0;i<x.length;i++){var y=x[i];if(y.getRequired&&y.getRequired()===true&&(!y.getEditable||y.getEditable())&&(!y.getContextEditable||y.getContextEditable())){return true;}}return false;}
function h(){if(this.getDisplayOnly){if(!this.isPropertyInitial("displayOnly")){return this.getDisplayOnly();}var i=this.getParent();var w=i.getParent();if(w){var x=w.getParent();if(x){return!x.getEditable();}}}return false;}
function j(){var i=this.getParent();if(i._oSetLabelFromOutside&&!(typeof i._oSetLabelFromOutside==="string")&&i._oSetLabelFromOutside.getWrapping&&!i._oSetLabelFromOutside.isPropertyInitial("wrapping")){return i._oSetLabelFromOutside.getWrapping();}return true;}
function k(i,w){if(i._oTextLabelSetBySemanticGroupElement){if(i.getComputedTextLabel()==w){i.setTextLabel(i._oTextLabelSetBySemanticGroupElement.oldText);}delete i._oTextLabelSetBySemanticGroupElement;}}
function m(i){i._bCreatedBySemanticGroupElement=true;i.isRequired=g;i.isDisplayOnly=h;i.isWrapping=j;return i;}
function n(i){if(i.getEditable){if(!i.getEditable()){i.data("editable",false);}}this._oObserver.observe(i,{properties:["visible"]});if(i.attachInnerControlsCreated){i.attachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(c.Form);}if(i.getMetadata().getProperty("mandatory")){this._oObserver.observe(i,{properties:["mandatory"]});}r.call(this,i,this.getProperty("_editable"));s.call(this,i);}
function o(i){if(i.name=="mandatory"){this.invalidateLabel();}else if(i.name=="visible"){this._updateFormElementVisibility();}}
function p(){this.fireVisibleChanged({visible:this.isVisible()});if(this.getParent()){this.getParent()._updateLineBreaks();}}
function q(E){var w=this.getElements();for(var i=0;i<w.length;i++){var x=w[i];r.call(this,x,E);}}
function r(i,E){if(i instanceof a){if(!(i.data("editable")===false)){i.setContextEditable(E);}}}
function s(w){if(w instanceof a){var x=this.getCustomData();for(var i=0;i<x.length;i++){u.call(this,w,x[i]);}}}
function t(w,O){if(w instanceof a){var x=w.getCustomData();for(var i=0;i<x.length;i++){var y=x[i];if(y._bFromSemanticGroupElement&&(!O||O==y._sOriginalId)){w.removeCustomData(y);y.destroy();}}}}
function u(i,w){if(i instanceof a&&l.smartform.inheritCostomDataToFields(w)){var N=w.clone();N._bFromSemanticGroupElement=true;N._sOriginalId=w.getId();i.addCustomData(N);}}
function v(i){if(i.detachInnerControlsCreated){i.detachInnerControlsCreated(this._updateFormElementLabel,this);}if(i.setControlContext){i.setControlContext(c.None);}t.call(this,i);k.call(this,i,this.getLabelText());}
d.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver.observe(this,{properties:["elementForLabel","_editable","delimiter"]});};
d.prototype._getFieldRelevantForLabel=function(){var E=this.getElements();var i=this.getElementForLabel();if(E.length>i&&(E[i]instanceof a)){return E[i];}return null;};
d.prototype._extractFields=function(E,i){var w=[];E.forEach(function(x){w.push(x);});if(i){w=w.filter(function(x){return!(x instanceof L);});}return w;};
d.prototype._observeChanges=function(i){F.prototype._observeChanges.apply(this,arguments);if(i.object==this){switch(i.name){case"useHorizontalLayout":b.error("useHorizontalLayout can't be used with SemanticGroupElement",this);break;case"elementForLabel":this.updateLabelOfFormElement();break;case"_editable":q.call(this,i.current);break;default:break;}}else{o.call(this,i);}};
d.prototype._getLabel=function(){if(this._oLabel){return this._oLabel;}else{return this._oSetLabelFromOutside;}};
d.prototype._createLabel=function(i){var w=null;var x=this._getFieldRelevantForLabel();if(x){if(x.getShowLabel&&x.getShowLabel()){w=new S(x.getId()+'-label');if(i){if(!x._oTextLabelSetBySemanticGroupElement){x._oTextLabelSetBySemanticGroupElement={oldText:x.getComputedTextLabel()};}x.setTextLabel(i);w.setText(i);}w.setLabelFor(x);}}else{w=new L(this.getId()+"-label",{text:i});}if(w){w=m(w);this._oLabel=w;this.setAggregation("_label",w,true);if(this._oSetLabelFromOutside&&typeof this._oSetLabelFromOutside!=="string"){this._oSetLabelFromOutside.setAlternativeLabelFor(null);}}return w;};
d.prototype._updateFormElementLabel=function(E){var R=this._getFieldRelevantForLabel();var i=this._getLabel();var w=E.oSource;var I=E.getParameters();if(i instanceof S&&w&&I&&w===R){i.updateLabelFor(I);}};
d.prototype._updateFormElementVisibility=function(){var i=this.getVisibleBasedOnElements();if(this._bVisibleElements!==i){this._bVisibleElements=i;if(this.isPropertyInitial("visible")){p.call(this);this.invalidate();}}};
d.prototype._updateGridDataSpan=function(){};
d.prototype._setLinebreak=function(i,w,x,y){var z=this.getFields();if(z.length>0){var A=z[0];if(!(A instanceof V)){return;}var B=A.getLayoutData();if(B instanceof G){B.setLinebreakXL(i);B.setLinebreakL(w);B.setLinebreakM(x);B.setLinebreakS(y);}}};
d.prototype.setTooltip=function(T){F.prototype.setTooltip.apply(this,[T]);var R=this._getFieldRelevantForLabel();var i=this._getLabel();_.call(this,i,R);return this;};
d.prototype.setLabel=function(i){if(this._oSetLabelFromOutside&&(typeof this._oSetLabelFromOutside!=="string")){this._oSetLabelFromOutside.detachEvent("_change",f,this);}var O;var w;var x;if(typeof i==="string"){O=this._getLabel();if(O){w=O.getText();}}else if(!i&&this._oSetLabelFromOutside){w=this.getLabelText();}F.prototype.setLabel.apply(this,[i]);this._oSetLabelFromOutside=i;if(typeof i==="string"){if(this._oLabel instanceof S&&i!=w&&(i.length>0||w.length>0)){x=this._getFieldRelevantForLabel();if(x&&i!=null){if(x.getComputedTextLabel){if(!x._oTextLabelSetBySemanticGroupElement){x._oTextLabelSetBySemanticGroupElement={oldText:x.getComputedTextLabel()};}x.setTextLabel(i);}}}this.setAggregation("_label",this._oLabel,true);this._oLabel.isRequired=g;this._oLabel.isDisplayOnly=h;}else{if(i){if(i.isRequired){i.isRequired=g;}if(i.isDisplayOnly){i.isDisplayOnly=h;}i.attachEvent("_change",f,this);}else{x=this._getFieldRelevantForLabel();if(x){k.call(this,x,w);}}this.updateLabelOfFormElement();}return this;};
d.prototype.destroyLabel=function(){var O=this.getLabelText();F.prototype.destroyLabel.apply(this);delete this._oSetLabelFromOutside;var i=this._getFieldRelevantForLabel();if(i){k.call(this,i,O);}this.updateLabelOfFormElement();return this;};
d.prototype.getLabel=function(){return this._oSetLabelFromOutside;};
d.prototype.getLabelControl=function(){return this._getLabel();};
d.prototype.getLabelText=function(){var i="";var w=this._getLabel();if(w){i=w.getText();}return i;};
d.prototype.getDataSourceLabel=function(){var i=this._getFieldRelevantForLabel();if(i&&i.isA("sap.ui.comp.smartfield.SmartField")){return i.getDataSourceLabel();}};
d.prototype.updateLabelOfFormElement=function(){var i=false,O=null;var E=this.getElements();var R=this._getFieldRelevantForLabel();var w=this._getLabel();var D=false;if(w&&w._bCreatedBySemanticGroupElement){if(w instanceof S){if(!R||(w._sSmartFieldId&&w._sSmartFieldId!=R.getId())){D=true;}}else if(R){D=true;}if(D){w.destroy();delete this._oLabel;w=null;if(this._oSetLabelFromOutside&&!R){if(typeof this._oSetLabelFromOutside==="string"){F.prototype.setLabel.apply(this,[this._oSetLabelFromOutside]);w=this._oLabel;this._oLabel.isRequired=g;this._oLabel.isDisplayOnly=h;}else{w=this._oSetLabelFromOutside;}}}}else if(w&&R){if(w==this._oLabel){w.destroy();delete this._oLabel;}w=null;}if(!w){if(this._oSetLabelFromOutside){if(typeof this._oSetLabelFromOutside==="string"){O=this._oSetLabelFromOutside;}else{O=this._oSetLabelFromOutside.getText();}}else{O="";}}if(!w&&E.length>0){w=this._createLabel(O);i=true;}if(w){if(w instanceof S){if(R&&R.setTextLabel&&R.getComputedTextLabel()){w.setText(R.getComputedTextLabel());}}_.call(this,w,R);}if(i){if(w&&w.setLabelFor&&!(w instanceof S)&&!R&&(E.length>0)){w.setLabelFor(E[0]);}}};
d.prototype.invalidateLabel=function(){var i=this._getLabel();if(i){i.invalidate();}};
d.prototype.getUseHorizontalLayout=function(){b.error("getUseHorizontalLayout can't be used with SemanticGroupElement",this);};
d.prototype.setUseHorizontalLayout=function(){b.error("setUseHorizontalLayout can't be used with SemanticGroupElement",this);};
d.prototype.getHorizontalLayoutGroupElementMinWidth=function(){b.error("getHorizontalLayoutGroupElementMinWidth can't be used with SemanticGroupElement",this);};
d.prototype.setHorizontalLayoutGroupElementMinWidth=function(){b.error("setHorizontalLayoutGroupElementMinWidth can't be used with SemanticGroupElement",this);};
d.prototype.setVisible=function(i){var w=this.isVisible();F.prototype.setVisible.apply(this,arguments);if(w!=i){p.call(this);}return this;};
d.prototype.isVisible=function(){if(this.isPropertyInitial("visible")){return this._bVisibleElements;}else{return this.getVisible();}};
d.prototype.getVisibleBasedOnElements=function(){var i=false;var E=this.getElements();if(E&&E.length>0){i=E.some(function(w){return w.getVisible();});}return i;};
d.prototype.getFormElement=function(){return this;};
d.prototype.addElement=function(E){if(!E){return this;}E=this.validateAggregation("elements",E,true);n.call(this,E);var i;if(this._oLabel&&this._oLabel._bCreatedBySemanticGroupElement&&this._oLabel._sSmartFieldId){i=this._oLabel._sSmartFieldId;}this.addField(E);if(i&&i!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(i);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
d.prototype.insertElement=function(E,i){if(!E){return this;}E=this.validateAggregation("elements",E,true);n.call(this,E);var w;if(this._oLabel&&this._oLabel._bCreatedBySemanticGroupElement&&this._oLabel._sSmartFieldId){w=this._oLabel._sSmartFieldId;}this.insertField(E,i);if(w&&w!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(w);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
d.prototype.getElements=function(){var i;i=this.getFields();return i;};
d.prototype.indexOfElement=function(E){var i=-1;i=this.indexOfField(E);return i;};
d.prototype.removeElement=function(E){var R;var i;if(this._oLabel&&this._oLabel._bCreatedBySemanticGroupElement&&this._oLabel._sSmartFieldId){i=this._oLabel._sSmartFieldId;}R=this.removeField(E);if(R){v.call(this,R);}if(i&&i!=this._oLabel._sSmartFieldId){this._oLabel.setLabelFor(i);}this.updateLabelOfFormElement();this._updateFormElementVisibility();return R;};
d.prototype.removeAllElements=function(){var R=this.removeAllFields();if(R&&Array.isArray(R)){for(var i=0;i<R.length;i++){v.call(this,R[i]);}}this.updateLabelOfFormElement();this._updateFormElementVisibility();return R;};
d.prototype.destroyElements=function(){this.destroyFields();this.updateLabelOfFormElement();this._updateFormElementVisibility();return this;};
d.prototype.addCustomData=function(w){if(!w){return this;}F.prototype.addCustomData.apply(this,arguments);var E=this.getElements();for(var i=0;i<E.length;i++){u.call(this,E[i],w);}return this;};
d.prototype.insertCustomData=function(w,I){if(!w){return this;}F.prototype.insertCustomData.apply(this,arguments);var E=this.getElements();for(var i=0;i<E.length;i++){u.call(this,E[i],w);}return this;};
d.prototype.removeCustomData=function(w){var x=F.prototype.removeCustomData.apply(this,arguments);if(x){var E=this.getElements();for(var i=0;i<E.length;i++){t.call(this,E[i],x.getId());}}return x;};
d.prototype.removeAllCustomData=function(){var w=F.prototype.removeAllCustomData.apply(this,arguments);if(w.length>0){var E=this.getElements();for(var i=0;i<E.length;i++){t.call(this,E[i]);}}return w;};
d.prototype.destroyCustomData=function(){F.prototype.destroyCustomData.apply(this,arguments);var E=this.getElements();for(var i=0;i<E.length;i++){t.call(this,E[i]);}return this;};
d.prototype.clone=function(I,w){var E=this.removeAllElements();var x=F.prototype.clone.apply(this,arguments);for(var i=0;i<E.length;i++){var y=E[i];var z=y.clone(I,w);this.addElement(y);x.addElement(z);}return x;};
return d;});
sap.ui.predefine('sap/ui/comp/smartform/SmartForm',['sap/ui/comp/library','sap/ui/core/Control','sap/ui/core/theming/Parameters','sap/ui/layout/form/Form','sap/ui/base/ManagedObjectObserver','sap/base/Log'],function(l,C,t,F,M,L){"use strict";var P;var T;var O;var a;var b;var B;var c;var m;var S=l.smartform.SmartFormValidationMode;var I=l.smartform.Importance;var f={ResponsiveGridLayout:{layout:undefined,path:"sap/ui/layout/form/ResponsiveGridLayout",name:"sap.ui.layout.form.ResponsiveGridLayout",requested:false,loaded:j1,promise:undefined},ResponsiveLayout:{layout:undefined,path:"sap/ui/layout/form/ResponsiveLayout",name:"sap.ui.layout.form.ResponsiveLayout",requested:false,loaded:k1,promise:undefined},ColumnLayout:{layout:undefined,path:"sap/ui/layout/form/ColumnLayout",name:"sap.ui.layout.form.ColumnLayout",requested:false,loaded:l1,promise:undefined}};var s={apiVersion:2,render:function(i,j){i.openStart("div",j);i.class("sapUiCompSmartForm");i.openEnd();var k=j.getAggregation("content");i.renderControl(k);i.close("div");}};
var d=C.extend("sap.ui.comp.smartform.SmartForm",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartform/SmartForm.designtime",properties:{title:{type:"string",group:"Misc",defaultValue:null},useHorizontalLayout:{type:"boolean",group:"Misc",defaultValue:null},horizontalLayoutGroupElementMinWidth:{type:"int",group:"Misc",defaultValue:null},checkButton:{type:"boolean",group:"Misc",defaultValue:false},entityType:{type:"string",group:"Misc",defaultValue:null},expandable:{type:"boolean",group:"Misc",defaultValue:false},expanded:{type:"boolean",group:"Misc",defaultValue:null},editTogglable:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:false},ignoredFields:{type:"string",group:"Misc",defaultValue:null},flexEnabled:{type:"boolean",group:"Misc",defaultValue:true},validationMode:{type:"sap.ui.comp.smartform.SmartFormValidationMode",group:"Misc",defaultValue:S.Standard},importance:{type:"sap.ui.comp.smartform.Importance",group:"Misc",defaultValue:I.Low}},defaultAggregation:"groups",aggregations:{groups:{type:"sap.ui.comp.smartform.Group",multiple:true,singularName:"group"},content:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},layout:{type:"sap.ui.comp.smartform.SmartFormLayout",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},customToolbar:{type:"sap.m.Toolbar",multiple:false},toolbar:{type:"sap.m.Toolbar",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{editToggled:{parameters:{editable:{type:"boolean"}}},checked:{parameters:{erroneousFields:{type:"sap.ui.comp.smartfield.SmartField[]"}}}}},
renderer:s
});
d.prototype.init=function(){this._oForm=new F(this.getId()+"--Form");this._oForm.getToolbar=function(){var i=this.getParent();if(i&&!i.getExpandable()){return i._getToolbar();}};this.setAggregation("content",this._oForm);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._oObserver=new M(o.bind(this));this._oObserver.observe(this,{properties:["editTogglable","title","checkButton","useHorizontalLayout","horizontalLayoutGroupElementMinWidth","expandable","expanded"],aggregations:["layout","customData"],associations:["ariaLabelledBy"]});};
d.prototype.onBeforeRendering=function(){h1.call(this);};
d.prototype.onAfterRendering=function(){var i=this.getSmartFields(false,false),j=this.getImportance();if(!this.isPropertyInitial("importance")){i.forEach(function(k){k._setVisibilityBasedOnImportance(j);});}};
d.prototype.addGroup=function(i){var j=this,k,s1,t1;if(!i){return this;}t1=this._getSmartFieldsByGroup(i,false);t1.forEach(function(u1){k=u1.setImportance;u1.setImportance=function(){k.apply(this,arguments);s1=j.getImportance();this._setVisibilityBasedOnImportance(s1);};});i=this.validateAggregation("groups",i,true);G.call(this,i);this._oForm.addFormContainer(i);_.call(this,i);return this;};
d.prototype.getGroups=function(){return this._oForm.getFormContainers();};
d.prototype.indexOfGroup=function(i){return this._oForm.indexOfFormContainer(i);};
d.prototype.insertGroup=function(i,j){if(!i){return this;}i=this.validateAggregation("groups",i,true);G.call(this,i);this._oForm.insertFormContainer(i,j);_.call(this,i);return this;};
d.prototype.removeGroup=function(i){var j=this._oForm.removeFormContainer(i);if(j){j.detachEvent("_visibleChanged",o1,this);J.call(this,j);o1.call(this);}return j;};
d.prototype.removeAllGroups=function(){var j=this._oForm.removeAllFormContainers();for(var i=0;i<j.length;i++){j[i].detachEvent("_visibleChanged",o1,this);J.call(this,j[i]);}o1.call(this);return j;};
d.prototype.destroyGroups=function(){var j=this.getGroups();for(var i=0;i<j.length;i++){j[i].detachEvent("_visibleChanged",o1,this);}this._oForm.destroyFormContainers();o1.call(this);return this;};
function _(i){var j=this.getUseHorizontalLayout();var k=this.getHorizontalLayoutGroupElementMinWidth();i.attachEvent("_visibleChanged",o1,this);if(k!=i.getHorizontalLayoutGroupElementMinWidth){i.setHorizontalLayoutGroupElementMinWidth(k);}if(j!=i.getUseHorizontalLayout()){i.setUseHorizontalLayout(j);}if(j){i._updateGridDataSpan();i._updateLineBreaks();}else{o1.call(this);}}
d.prototype._getToolbar=function(){var i=this.getCustomToolbar();return i||this.getAggregation("toolbar");};
d.prototype.propagateGridDataSpan=function(){var j=this.getGroups();for(var i=0;i<j.length;i++){var k=j[i];k._updateGridDataSpan();k._updateLineBreaks();}return this;};
d.prototype._getGridDataSpanNumbers=function(){var i=this.getLayout();var j;if(i&&i._getGridDataSpanNumbers){j=i._getGridDataSpanNumbers();}return j;};
d.prototype._toggleEditMode=function(){var i=this.getEditable();this.setEditable(!i);};
d.prototype.check=function(i){var j={considerOnlyVisible:true,handleSuccess:false};if(typeof i==="boolean"){j.considerOnlyVisible=i;}else{j=Object.assign(j,i);}if(this.getValidationMode()===S.Standard){return this._checkClientError(j);}else{return this._checkClientErrorAsync(j);}};
d.prototype._checkClientError=function(i){if(i.considerOnlyVisible===undefined){i.considerOnlyVisible=true;}var j=this.getSmartFields(i.considerOnlyVisible,i.considerOnlyVisible);var k=[];var s1=null;j.forEach(function(t1){if(t1.checkClientError({handleSuccess:i.handleSuccess})){if(i.considerOnlyVisible&&t1.getVisible){if(!t1.getVisible()){return;}}s1=t1.getParent();while(s1.getParent){s1=s1.getParent();if(s1.isA("sap.ui.comp.smartform.Group")){if(!s1.getExpanded()){s1.setExpanded(true);}break;}}k.push(t1.getId());}});return k;};
d.prototype._checkClientErrorAsync=function(i){var j=this.getSmartFields(i.considerOnlyVisible,i.considerOnlyVisible),k,s1=[],t1;this.setBusy(true);if(i.considerOnlyVisible===undefined){i.considerOnlyVisible=true;}k=j.map(function(u1){if(i.considerOnlyVisible&&!u1.getVisible()){return false;}return u1.checkValuesValidity({handleSuccess:i.handleSuccess}).catch(function(){t1=u1.getParent();while(t1.getParent){t1=t1.getParent();if(t1.isA("sap.ui.comp.smartform.Group")){if(!t1.getExpanded()){t1.setExpanded(true);}break;}}s1.push(u1.getId());});});return Promise.all(k).then(function(){this.setBusy(false);return s1;}.bind(this));};
d.prototype._displayError=function(i){var j=this._oRb.getText("FORM_CLIENT_CHECK_ERROR_TITLE");var k=this._oRb.getText("FORM_CLIENT_CHECK_ERROR");if(!c&&!this._bMessageBoxRequested){c=sap.ui.require("sap/m/MessageBox");if(!c){sap.ui.require(["sap/m/MessageBox"],e.bind(this));this._bMessageBoxRequested=true;}}if(c){c.show(k,{icon:c.Icon.ERROR,title:j,styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});}};
function e(i){c=i;this._bMessageBoxRequested=false;if(!this._bIsBeingDestroyed){g.call(this);}}
function g(){var i=this.check(true);if(i&&i.length>0){this._displayError(i);return true;}return false;}
function h(){return this.check(true).then(function(i){if(i&&i.length){this._displayError(i);}return i;}.bind(this));}
d.prototype.setEditable=function(i){var j=this.getEditable();i=this.validateProperty("editable",i);if(j===i){return this;}if(!i&&this.hasListeners("editToggled")){if(this.getValidationMode()===S.Standard){if(g.call(this)){return this;}}else{h.call(this).then(function(k){if(k.length){return this.setProperty("editable",true);}n.call(this,i);}.bind(this));return this.setProperty("editable",i);}}this.setProperty("editable",i);n.call(this,i);return this;};
function n(i){if(this._oForm){this._oForm.setEditable(i);}this.fireEditToggled({editable:i});if(this._oEditToggleButton){this._oEditToggleButton.setIcon(i?"sap-icon://display":"sap-icon://edit");var j=this._oRb.getText(i?"FORM_TOOLTIP_DISPLAY":"FORM_TOOLTIP_EDIT");this._oEditToggleButton.setTooltip(j);}if(this.getCheckButton()&&i){a1.call(this);}else{b1.call(this);}}
function o(i){if(i.object==this){if(i.name=="editTogglable"){p.call(this,i.current);}else if(i.name=="title"){q.call(this,i.current);}else if(i.name=="checkButton"){r.call(this,i.current);}else if(i.name=="useHorizontalLayout"){u.call(this,i.current);}else if(i.name=="horizontalLayoutGroupElementMinWidth"){w.call(this,i.current);}else if(i.name=="expanded"){D.call(this,i.current);}else if(i.name=="expandable"){x.call(this,i.current);}else if(i.name=="layout"){v.call(this,i.child,i.mutation);}else if(i.name=="customData"){E.call(this,i.child,i.mutation);}else if(i.name=="ariaLabelledBy"){K.call(this,i.ids,i.mutation);}}else if(i.object.isA("sap.ui.comp.smartform.SmartFormLayout")){r1.call(this,i.object,i.name,i.current,i.old);}}
function p(i){if(i){Z.call(this);}else{$.call(this);}R.call(this);}
function q(i){if(this._oPanel){this._oPanel.setHeaderText(i);}R.call(this);}
function r(i){if(i){a1.call(this);}else{b1.call(this);}R.call(this);}
function u(i){if(i){this.addStyleClass("sapUiCompSmartFormHorizontalLayout");}else{this.removeStyleClass("sapUiCompSmartFormHorizontalLayout");}var j=this.getGroups();if(j){j.forEach(function(s1){if(s1.getUseHorizontalLayout()!=i){s1.setUseHorizontalLayout(i);}});}var k=this.getLayout();if(i){m1.call(this,k);}else{h1.call(this);m1.call(this,k);}}
function v(i,j){if(j==="remove"){this._oObserver.unobserve(i);}else{this._oObserver.observe(i,{properties:true});}if(i.isA("sap.ui.comp.smartform.Layout")){this.propagateGridDataSpan();}h1.call(this);m1.call(this,j==="insert"?i:null);}
function w(i){L.error("HorizontalLayoutGroupElementMinWidth is deprecated",this);var j=this.getGroups();if(j){j.forEach(function(k){k.setHorizontalLayoutGroupElementMinWidth(i);});}}
d.prototype.getVisibleProperties=function(){var i=[];var j=this.getGroups();if(j){j.forEach(function(k){var s1=k.getGroupElements();if(s1.length>0){s1.forEach(function(t1){var u1=t1.getElements();if(u1.length>0){u1.forEach(function(v1){if(v1.getVisible()){var w1=v1.getBindingPath("value");if(w1){i.push(w1);}}});}});}});}return i;};
d.prototype.setCustomToolbar=function(i){var j=this.getCustomToolbar();if(j==i){return this;}W.call(this);$.call(this);b1.call(this);this.setAggregation("customToolbar",i);if(this.getTitle()){R.call(this);}if(this.getEditTogglable()){Z.call(this);}if(this.getCheckButton()){a1.call(this);}return this;};
d.prototype.destroyCustomToolbar=function(){var i=this.getCustomToolbar();if(i){W.call(this);$.call(this);b1.call(this);}this.destroyAggregation("customToolbar");if(this.getTitle()){R.call(this);}if(this.getEditTogglable()){Z.call(this);}if(this.getCheckButton()){a1.call(this);}return this;};
function x(i){if(i){if(!P&&!this._bPanelRequested){P=sap.ui.require("sap/m/Panel");if(!P){sap.ui.require(["sap/m/Panel"],z.bind(this));this._bPanelRequested=true;}}if(P){y.call(this);}}else if(this._oPanel){this.setAggregation("content",this._oForm);this._oPanel.destroy();this._oPanel=null;}R.call(this);}
function y(){this._oPanel=new P(this.getId()+"--Panel",{expanded:this.getExpanded(),expandable:true,headerText:this.getTitle(),expandAnimation:false});this._oPanel.getHeaderToolbar=function(){var i=this.getParent();if(i){return i._getToolbar();}};this._oPanel.attachExpand(A,this);this.setAggregation("content",this._oPanel);this._oPanel.addContent(this._oForm);}
function z(i){P=i;this._bPanelRequested=false;if(this.getExpandable()&&!this._bIsBeingDestroyed){y.call(this);}}
function A(i){this.setProperty("expanded",i.getParameter("expand"),true);}
function D(i){if(this._oPanel){this._oPanel.setExpanded(i);}}
function E(j,k){var s1=this.getGroups();for(var i=0;i<s1.length;i++){if(k==="insert"){H.call(this,s1[i],j);}else{J.call(this,s1[i],j.getId());}}}
function G(j){var k=this.getCustomData();for(var i=0;i<k.length;i++){H.call(this,j,k[i]);}}
function H(i,j){if(l.smartform.inheritCostomDataToFields(j)){var k=j.clone();k._bFromSmartForm=true;k._sOriginalId=j.getId();i.addCustomData(k);}}
function J(j,k){var s1=j.getCustomData();for(var i=0;i<s1.length;i++){var t1=s1[i];if(t1._bFromSmartForm&&(!k||k==t1._sOriginalId)){j.removeCustomData(t1);}}}
function K(j,k){var s1;if(Array.isArray(j)){s1=j;}else{s1=[j];}for(var i=0;i<s1.length;i++){var t1=s1[i];if(k==="insert"){this._oForm.addAriaLabelledBy(t1);}else{this._oForm.removeAriaLabelledBy(t1);}}}
d.prototype._getSmartFieldsByGroup=function(i,s1){var t1=[],u1=[],v1=[];t1=i.getGroupElements();for(var j=0;j<t1.length;j++){var w1=t1[j];if(!s1||(s1&&w1.isVisible())){u1=w1.getElements();for(var k=0;k<u1.length;k++){var x1=u1[k];if(x1.isA("sap.ui.comp.smartfield.SmartField")){v1.push(x1);}}}}return v1;};
d.prototype.getSmartFields=function(j,k){var s1=[],t1,u1=[];if(j===undefined){j=true;}s1=this.getGroups();for(var i=0;i<s1.length;i++){var v1=s1[i];if(!j||(j&&v1.isVisible())){t1=this._getSmartFieldsByGroup(v1,k);u1=u1.concat(t1);}}return u1;};
d.prototype.setFocusOnEditableControl=function(){var i=[];this.getGroups().forEach(function(j){if(j.isVisible()){j.getGroupElements().forEach(function(k){if(k.isVisible()){i=i.concat(k.getElements());}});}});i.some(function(j){if(j.getEditable&&j.getEditable()&&j.focus&&j.getVisible()){if(j.isA("sap.ui.comp.smartfield.SmartField")){j.attachEventOnce("innerControlsCreated",function(k){setTimeout(k.oSource._oControl[k.oSource._oControl.current]["focus"].bind(k.oSource._oControl[k.oSource._oControl.current]),0);});}else{j.focus();}return true;}});};
d.prototype.clone=function(j,k){this.setAggregation("content",null);var s1=this.getAggregation("toolbar");var t1=this.getCustomToolbar();var u1=this.getCustomData();var v1=this.getGroups();var i=0;if(t1){W.call(this);$.call(this);b1.call(this);}else if(s1){this.setAggregation("toolbar",null);}if(u1.length>0){for(i=0;i<v1.length;i++){J.call(this,v1[i]);}}var w1=C.prototype.clone.apply(this,arguments);for(i=0;i<v1.length;i++){var x1=v1[i].clone(j,k);w1.addGroup(x1);}if(this.getExpandable()&&this._oPanel){this.setAggregation("content",this._oPanel);}else{this.setAggregation("content",this._oForm);}if(t1){if(this.getTitle()){R.call(this);}if(this.getEditTogglable()){Z.call(this);}if(this.getCheckButton()){a1.call(this);}}else if(s1){this.setAggregation("toolbar",s1);}if(u1.length>0){for(i=0;i<v1.length;i++){G.call(this,v1[i]);}}return w1;};
d.prototype.exit=function(){if(this._oForm){this._oForm.destroy();}if(this._oPanel){this._oPanel.destroy();}if(this._oTitle){this._oTitle.destroy();}if(this._oEditToggleButton){this._oEditToggleButton.destroy();}this._oForm=null;this._oPanel=null;this._oTitle=null;this._oRb=null;this._oEditToggleButton=null;this._oObserver.disconnect();this._oObserver=undefined;};
function N(){var i=this.getAggregation("toolbar");if(!i){i=new O(this.getId()+"-toolbar-sfmain",{"height":"3rem","design":m.ToolbarDesign.Transparent});i._bCreatedBySmartForm=true;this.setAggregation("toolbar",i);}return i;}
function Q(i){var j=this.getAggregation("toolbar");if(j){if(i){var k=j.getContent();if(k.length>0){return;}}this.destroyAggregation("toolbar");}}
function R(){var i=this.getTitle();if(i){if(!this.getCustomToolbar()&&!this.getCheckButton()&&!this.getEditTogglable()){if(this._oTitle){if(this._getToolbar()){W.call(this);}this._oForm.removeAriaLabelledBy(this._oTitle);this._oTitle.destroy();this._oTitle=null;}this._oForm.setTitle(i);}else{this._oForm.setTitle();if(!this._oTitle){if((!T||!O||!a||!b||!m)&&!this._bTitleRequested){T=sap.ui.require("sap/m/Title");O=sap.ui.require("sap/m/OverflowToolbar");a=sap.ui.require("sap/m/ToolbarSpacer");b=sap.ui.require("sap/m/ToolbarSeparator");m=sap.ui.require("sap/m/library");if(!T||!O||!a||!b||!m){sap.ui.require(["sap/m/Title",'sap/m/OverflowToolbar','sap/m/ToolbarSpacer','sap/m/ToolbarSeparator',"sap/m/library"],U.bind(this));this._bTitleRequested=true;}}if(T&&!this._bTitleRequested){var j=t.get('sap.ui.layout.FormLayout:_sap_ui_layout_FormLayout_FormTitleSize');this._oTitle=new T(this.getId()+"-title-sfmain",{level:j.toUpperCase()});}}if(this._oTitle){this._oTitle.setText(i);this._oForm.addAriaLabelledBy(this._oTitle);V.call(this);}}}else{if(this._oTitle){W.call(this);this._oForm.removeAriaLabelledBy(this._oTitle);this._oTitle.destroy();this._oTitle=null;}else{this._oForm.setTitle();}}}
function U(i,j,k,s1,t1){T=i;O=j;a=k;b=s1;m=t1;this._bTitleRequested=false;if(!this._bIsBeingDestroyed){R.call(this);}}
function V(){if(!this._oTitle){return;}var i=this._getToolbar();if(!i){i=N.call(this);}i.insertContent(this._oTitle,0);}
function W(){if(!this._oTitle){return;}var i=this._getToolbar();i.removeContent(this._oTitle);Q.call(this,true);}
function X(){if((!B||!O||!a||!b||!m)&&!this._bButtonRequested){B=sap.ui.require("sap/m/Button");O=sap.ui.require("sap/m/OverflowToolbar");a=sap.ui.require("sap/m/ToolbarSpacer");b=sap.ui.require("sap/m/ToolbarSeparator");m=sap.ui.require("sap/m/library");if(!B||!O||!a||!b||!m){sap.ui.require(["sap/m/Button",'sap/m/OverflowToolbar','sap/m/ToolbarSpacer','sap/m/ToolbarSeparator',"sap/m/library"],Y.bind(this));this._bButtonRequested=true;}}if(B&&!this._bButtonRequested){return true;}return false;}
function Y(i,j,k,s1,t1){B=i;O=j;a=k;b=s1;m=t1;this._bButtonRequested=false;if(!this._bIsBeingDestroyed){if(this._bEditRequested){this._bEditRequested=false;Z.call(this);}if(this._bCheckRequested){this._bCheckRequested=false;a1.call(this);}}}
function Z(){if(!this.getEditTogglable()){return;}if(!X.call(this)){this._bEditRequested=true;return;}var i=this._getToolbar();if(!i){i=N.call(this);}if(!this._oCheckButton){e1.call(this,i);}if(!this._oEditToggleButton){var j=this.getEditable()?"sap-icon://display":"sap-icon://edit";var k=this._oRb.getText(this.getEditable()?"FORM_TOOLTIP_DISPLAY":"FORM_TOOLTIP_EDIT");this._oEditToggleButton=new B(i.getId()+"-button-sfmain-editToggle",{icon:j,tooltip:k});this._oEditToggleButton.attachPress(this._toggleEditMode,this);}var s1=i.getContent().length;if(this._oCheckButton){s1--;}i.insertContent(this._oEditToggleButton,s1);}
function $(){if(!this._oEditToggleButton){return;}var i=this._getToolbar();i.removeContent(this._oEditToggleButton);this._oEditToggleButton.destroy();this._oEditToggleButton=null;f1.call(this,i);Q.call(this,true);}
function a1(){if(!this.getCheckButton()||!this.getEditable()){return;}if(!X.call(this)){this._bCheckRequested=true;return;}var i=this._getToolbar();if(!i){i=N.call(this);}if(!this._oEditToggleButton){e1.call(this,i);}if(!this._oCheckButton){this._oCheckButton=new B(this.getId()+"-"+i.getId()+"-button-sfmain-check",{text:this._oRb.getText("SMART_FORM_CHECK")});this._oCheckButton.attachPress((this.getValidationMode()===S.Standard)?c1:d1,this);}var j=i.getContent().length;i.insertContent(this._oCheckButton,j);}
function b1(){if(!this._oCheckButton){return;}var i=this._getToolbar();i.removeContent(this._oCheckButton);this._oCheckButton.destroy();this._oCheckButton=null;f1.call(this,i);Q.call(this,true);}
function c1(i){var j=[];j=this.check(true);this.fireChecked({erroneousFields:j});}
function d1(i){this.check(true).then(function(j){this.fireChecked({erroneousFields:j});}.bind(this));}
function e1(j){var k;if(!j._bCreatedBySmartForm){var s1=j.getContent();var t1=false;for(var i=0;i<s1.length;i++){if(s1[i]instanceof a){t1=true;break;}}if(!t1){k=new a(this.getId()+"-"+j.getId()+"-spacer");k._bCreatedBySmartForm=true;j.addContent(k);}if(!(s1[s1.length-1]instanceof b)){var u1=new b(this.getId()+"-"+j.getId()+"-separator");u1._bCreatedBySmartForm=true;j.addContent(u1);}}else{k=new a(j.getId()+"-spacer");k._bCreatedBySmartForm=true;j.addContent(k);}}
function f1(i){var j=i.getContent();var k;if(!i._bCreatedBySmartForm){k=j[j.length-1];if(k instanceof b&&k._bCreatedBySmartForm){k.destroy();}j=i.getContent();}k=j[j.length-1];if(k instanceof a&&k._bCreatedBySmartForm){k.destroy();}}
function g1(i,j){if(!i.layout&&!i.requested){i.layout=sap.ui.require(i.path);if(!i.layout){i.promise=new Promise(function(k){sap.ui.require([i.path],i.loaded.bind(this));i.resolve=k;i.requestIds=[this.getId()];}.bind(this));i.requested=true;}}else if(!i.layout&&i.requested&&i.promise&&i.requestIds.indexOf(this.getId())<0){i.promise.then(function(){if(!this._bIsBeingDestroyed){h1.call(this);}}.bind(this));i.requestIds.push(this.getId());}if(i.layout&&!i.requested&&!(j instanceof i.layout)){if(j){j.destroy();}j=new i.layout(this._oForm.getId()+"-layout");this._oForm.setLayout(j);return true;}return false;}
function h1(){var j=this.getLayout();var k=this._oForm.getLayout();var s1=this.getUseHorizontalLayout();var t1=false;if(j&&j.isA("sap.ui.comp.smartform.ColumnLayout")){if(s1){throw new Error("ColumnLayout and useHorizontalLayout must not ne used at the same time on "+this);}t1=g1.call(this,f.ColumnLayout,k);if(t1){q1.call(this,j);}}else if(s1&&(!j||!j.getGridDataSpan())){t1=g1.call(this,f.ResponsiveLayout,k);}else if(!k||!f.ResponsiveGridLayout.layout||!(k instanceof f.ResponsiveGridLayout.layout)){t1=g1.call(this,f.ResponsiveGridLayout,k);if(t1){this._oFormLayoutNotInitial=true;n1.call(this,j);}}if(t1){var u1=this.getGroups();for(var i=0;i<u1.length;i++){var v1=u1[i];v1._updateLayoutData();}}}
function i1(i,j){i.layout=j;i.requested=false;i.resolve();delete i.resolve;delete i.requestIds;i.promise=undefined;if(!this._bIsBeingDestroyed){h1.call(this);}}
function j1(i){i1.call(this,f.ResponsiveGridLayout,i);}
function k1(i){i1.call(this,f.ResponsiveLayout,i);}
function l1(i){i1.call(this,f.ColumnLayout,i);}
function m1(i){if(!i||i.isA("sap.ui.comp.smartform.Layout")){n1.call(this,i);}else if(i.isA("sap.ui.comp.smartform.ColumnLayout")){q1.call(this,i);}}
function n1(i){var j=this._oForm.getLayout();if(!j||!j.isA(f.ResponsiveGridLayout.name)){return;}if(this.getUseHorizontalLayout()){if(i&&i.getGridDataSpan()){p1.call(this,j);j.setColumnsL(1);j.setColumnsM(1);if(i.getBreakpointM()>0){j.setBreakpointM(i.getBreakpointM());}if(i.getBreakpointL()>0){j.setBreakpointL(i.getBreakpointL());}if(i.getBreakpointXL()>0){j.setBreakpointXL(i.getBreakpointXL());}this._oFormLayoutNotInitial=true;}}else{if(i){j.setLabelSpanXL(i.getLabelSpanXL()?i.getLabelSpanXL():-1);j.setLabelSpanL(i.getLabelSpanL()?i.getLabelSpanL():4);j.setLabelSpanM(i.getLabelSpanM()?i.getLabelSpanM():4);j.setLabelSpanS(i.getLabelSpanS()?i.getLabelSpanS():12);j.setEmptySpanXL(i.getEmptySpanXL()?i.getEmptySpanXL():-1);j.setEmptySpanL(i.getEmptySpanL()?i.getEmptySpanL():0);j.setEmptySpanM(i.getEmptySpanM()?i.getEmptySpanM():0);j.setColumnsXL(i.getColumnsXL()?i.getColumnsXL():-1);j.setColumnsL(i.getColumnsL()?i.getColumnsL():3);j.setColumnsM(i.getColumnsM()?i.getColumnsM():2);j.setSingleContainerFullSize(i.getSingleGroupFullSize());j.setBreakpointXL(i.getBreakpointXL()?i.getBreakpointXL():1440);j.setBreakpointL(i.getBreakpointL()?i.getBreakpointL():1024);j.setBreakpointM(i.getBreakpointM()?i.getBreakpointM():600);this._oFormLayoutNotInitial=true;}else{p1.call(this,j);}o1.call(this,i,j);}}
function o1(j,k){if(this.getUseHorizontalLayout()){return;}if(!k){k=this._oForm.getLayout();j=this.getLayout();}if(!k||!k.isA(f.ResponsiveGridLayout.name)){return;}var s1=this.getGroups();var t1=-1;var u1=3;var v1=true;var w1=0;for(var i=0;i<s1.length;i++){if(s1[i].isVisible()){w1++;}}if(j){u1=j.getColumnsL()?j.getColumnsL():3;t1=(j.getColumnsXL()>0)?j.getColumnsXL():-1;v1=j.getSingleGroupFullSize();}if(s1&&w1>0&&w1<t1&&v1){k.setColumnsXL(w1);}else if(k.getColumnsXL()!=t1){k.setColumnsXL(t1);}if(s1&&w1>0&&w1<u1&&v1){k.setColumnsL(w1);}else if(k.getColumnsL()!=u1){k.setColumnsL(u1);}}
function p1(i){if(this._oFormLayoutNotInitial){i.setLabelSpanXL(-1);i.setLabelSpanL(4);i.setLabelSpanM(4);i.setLabelSpanS(12);i.setEmptySpanXL(-1);i.setEmptySpanL(0);i.setEmptySpanM(0);i.setColumnsXL(-1);i.setColumnsL(3);i.setColumnsM(2);i.setSingleContainerFullSize(true);i.setBreakpointXL(1440);i.setBreakpointL(1024);i.setBreakpointM(600);this._oFormLayoutNotInitial=false;}}
function q1(i){var j=this._oForm.getLayout();if(!j||!j.isA(f.ColumnLayout.name)){return;}if(this.getUseHorizontalLayout()){throw new Error("ColumnLayout and useHorizontalLayout must not ne used at the same time on "+this);}else{j.setColumnsXL(i.getColumnsXL());j.setColumnsL(i.getColumnsL());j.setColumnsM(i.getColumnsM());j.setLabelCellsLarge(i.getLabelCellsLarge());j.setEmptyCellsLarge(i.getEmptyCellsLarge());}}
function r1(i,j,k,s1){m1.call(this,i);if(j==="gridDataSpan"){this.propagateGridDataSpan();if(k===""||s1===""){h1.call(this);}}}
d.prototype._suggestTitleId=function(i){this._oForm._suggestTitleId(i);return this;};
return d;});
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RemoveGroup',[],function(){"use strict";var R={};
R.applyChange=function(c,g,p){var m=p.modifier;var v=p.view;var f=m.getParent(g);var a;var G;return Promise.resolve().then(m.findIndexInParentAggregation(g)).then(function(i){G=i;if(m.getControlType(f)==="sap.ui.layout.form.Form"){a="formContainers";return m.removeAggregation(f,"formContainers",g,v);}a="groups";return m.removeAggregation(f,"groups",g,v);}).then(m.insertAggregation.bind(m,f,"dependents",g,0,v)).then(function(){c.setRevertData({groupIndex:G,aggregation:a});});};
R.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
R.revertChange=function(c,g,p){var v=p.view;var m=p.modifier;var r=c.getRevertData();var f=m.getParent(g);return Promise.resolve().then(m.removeAggregation.bind(m,f,"dependents",g)).then(m.insertAggregation.bind(m,f,r.aggregation,g,r.groupIndex,v)).then(c.resetRevertData.bind(c));};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartlist/SmartList',['sap/ui/comp/library','sap/m/library','sap/m/VBox','sap/m/FlexItemData','sap/m/List','sap/m/Tree','sap/m/Title','sap/m/Toolbar','sap/m/OverflowToolbar','sap/m/ToolbarSpacer','sap/m/OverflowToolbarButton','sap/ui/comp/odata/ODataModelUtil','sap/ui/comp/util/FullScreenUtil','sap/ui/core/format/NumberFormat',"sap/base/util/deepEqual"],function(l,M,V,F,L,T,a,b,O,c,d,e,f,N,g){"use strict";var h=M.ToolbarDesign;
var S=V.extend("sap.ui.comp.smartlist.SmartList",{
metadata:{library:"sap.ui.comp",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},selectFields:{type:"string",group:"Misc",defaultValue:null},expandFields:{type:"string",group:"Misc",defaultValue:null},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},listBindingPath:{type:"string",group:"Misc",defaultValue:null},listType:{type:"sap.ui.comp.smartlist.ListType",group:"Misc",defaultValue:null},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:false}},associations:{smartFilter:{type:"sap.ui.core.Control"}},aggregations:{listItemTemplate:{type:"sap.m.ListItemBase",multiple:false}},events:{initialise:{},beforeRebindList:{},dataReceived:{}}},
renderer:{apiVersion:2},
constructor:function(){V.apply(this,arguments);this.addStyleClass("sapUiCompSmartList");this._createToolbar();this._createList();this.attachModelContextChange(this._initialiseMetadata,this);}
});
S.prototype._sAggregation="items";
S.prototype.setHeader=function(t){this.setProperty("header",t,true);this._refreshHeaderText();return this;};
S.prototype.setShowRowCount=function(s){this.setProperty("showRowCount",s,true);this._refreshHeaderText();return this;};
S.prototype.setShowFullScreenButton=function(s){this.setProperty("showFullScreenButton",s,true);if(this._oFullScreenButton){this._oFullScreenButton.setVisible(this.getShowFullScreenButton());}return this;};
S.prototype.setEntitySet=function(E){this.setProperty("entitySet",E);this._initialiseMetadata();return this;};
S.prototype._refreshHeaderText=function(){if(!this._headerText){return;}var t=this.getHeader();var i=!!t;this._headerText.setVisible(i);if(i&&this.getShowRowCount()){var r=parseInt(this._getRowCount(true));if(r>0){if(!this._oNumberFormatter){this._oNumberFormatter=N.getFloatInstance();}var v=this._oNumberFormatter.format(r);t+=" ("+v+")";}}this._headerText.setText(t);};
S.prototype._addFullScreenButton=function(){if(this._oFullScreenButton){this._oToolbar.removeContent(this._oFullScreenButton);}if(this.getShowFullScreenButton()){if(!this._oFullScreenButton){this._oFullScreenButton=new d(this.getId()+"-btnFullScreen",{press:function(){this._toggleFullScreen(!this.bFullScreen);}.bind(this)});}this._toggleFullScreen(this.bFullScreen,true);this._oToolbar.addContent(this._oFullScreenButton);}};
S.prototype._createToolbar=function(){var C,i,t;if(!this._oToolbar){C=this.getItems();i=C?C.length:0;while(i--){t=C[i];if(t instanceof b){break;}t=null;}if(t){this._oToolbar=t;}else{this._oToolbar=new O(this.getId()+"-toolbar",{design:h.Transparent});this.insertItem(this._oToolbar,0);}if(!this._oToolbar.getLayoutData()){this._oToolbar.setLayoutData(new F({shrinkFactor:0}));}}};
S.prototype._toggleFullScreen=function(v,i){var r=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp"),t;if(!this._oFullScreenButton||(v===this.bFullScreen&&!i)){return;}this.bFullScreen=v;f.toggleFullScreen(this,this.bFullScreen,this._oFullScreenButton,this._toggleFullScreen);t=this.bFullScreen?r.getText("CHART_MINIMIZEBTN_TOOLTIP"):r.getText("CHART_MAXIMIZEBTN_TOOLTIP");this._oFullScreenButton.setTooltip(t);this._oFullScreenButton.setText(t);this._oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
S.prototype._createToolbarContent=function(){if(!this._oToolbar){this._createToolbar();}this._addHeaderToToolbar();this._addSpacerToToolbar();this._addFullScreenButton();this._oToolbar.addStyleClass("sapMTBHeader-CTX");};
S.prototype._addHeaderToToolbar=function(){if(this._headerText){this._oToolbar.removeContent(this._headerText);}if(!this._headerText){this._headerText=new a(this.getId()+"-header");this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartTableHeader");}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);};
S.prototype._addSpacerToToolbar=function(){var j=false,I=this._oToolbar.getContent(),i,k;if(I){k=I.length;i=0;for(i;i<k;i++){if(I[i]instanceof c){j=true;break;}}}if(!j){this._oToolbar.addContent(new c(this.getId()+"-toolbarSpacer"));}};
S.prototype._getRowCount=function(C){var r=this._getRowBinding();if(!r){return C?undefined:0;}var R;if(!C){R=r.getLength();}else{if(typeof r.getCount==='function'){R=r.getCount();}else if(!r.isA('sap.ui.model.TreeBinding')&&typeof r.isLengthFinal==='function'&&r.isLengthFinal()){R=r.getLength();}}if(R<0||R==="0"){R=0;}return R;};
S.prototype._getRowBinding=function(){if(this._oList){return this._oList.getBinding(this._sAggregation);}};
S.prototype._initialiseMetadata=function(){if(!this.bIsInitialised){e.handleModelInit(this,this._onMetadataInitialised);}};
S.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){this.detachModelContextChange(this._initialiseMetadata,this);this.bIsInitialised=true;this._listenToSmartFilter();this._createToolbarContent();this._createContent();this.fireInitialise();this._checkAndTriggerBinding();}};
S.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindList();}}}};
S.prototype._listenToSmartFilter=function(){var s=null;s=this.getSmartFilter();if(typeof s==="string"){this._oSmartFilter=sap.ui.getCore().byId(s);}else{this._oSmartFilter=s;}if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindList,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);this._oSmartFilter.attachCancel(this._cancelEvent,this);this._setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_DATA"));}};
S.prototype._filterChangeEvent=function(){if(this._isListBound()&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()){this._showOverlay(true);}};
S.prototype._cancelEvent=function(){if(this._oSmartFilter&&!this._oSmartFilter.getLiveMode()){this._showOverlay(false);}};
S.prototype._showOverlay=function(s){};
S.prototype.rebindList=function(i){this._reBindList(null,i);};
S.prototype._reBindList=function(E,i){var o,s,j,k,m,p={},B={preventListBind:false};if(this._oSmartFilter){j=this._oSmartFilter.getFilters();p=this._oSmartFilter.getParameters()||{};}k=j;if(!m){m=[];}p["select"]=this.getSelectFields();p["expand"]=this.getExpandFields();p["useBatchRequests"]=true;B.filters=k;B.sorter=m;B.parameters=p;B.length=undefined;B.startIndex=undefined;this.fireBeforeRebindList({bindingParams:B});if(!B.preventListBind){m=B.sorter;k=B.filters;p=B.parameters;s=this.getListBindingPath()||("/"+this.getEntitySet());this._bDataLoadPending=true;this._bIgnoreChange=false;if(!i){o=this._oList.getBinding(this._sAggregation);if(o&&o.mParameters){i=!(g(p,o.mParameters,true)&&g(p.custom,o.mParameters.custom)&&!B.length&&!B.startIndex&&s===o.getPath());}}if(!o||!this._bIsListBound||i){this._oList.bindItems({path:s,filters:k,sorter:m,parameters:p,length:B.length,startIndex:B.startIndex,template:this._oTemplate,events:{dataRequested:function(){this._bIgnoreChange=true;}.bind(this),dataReceived:function(E){this._bIgnoreChange=false;this._onDataLoadComplete(E,true);this.fireDataReceived(E);}.bind(this),change:function(E){if(this._bIgnoreChange){return;}var r,n=false;r=(E&&E.getParameter)?E.getParameter("reason"):undefined;if(!r||r==="filter"||r==="context"){n=true;}if(r==="change"||n){this._onDataLoadComplete(E,n);}}.bind(this)}});this._bIsListBound=true;}else{o.sort(m);o.filter(k,"Application");}this._showOverlay(false);}};
S.prototype._onDataLoadComplete=function(E,i){if(this._bDataLoadPending||i){this._bDataLoadPending=false;if(!this._bNoDataUpdated&&!this._getRowCount()){this._bNoDataUpdated=true;this._setNoDataText();}this._refreshHeaderText();}};
S.prototype._isListBound=function(){if(this._bIsListBound){return true;}if(this._oList){return this._oList.isBound(this._sAggregation);}return false;};
S.prototype._setNoDataText=function(o){if(this._oList){if(!o){o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_RESULTS");}this._oList.setNoDataText(o);}};
S.prototype._createContent=function(){if(!this._oTemplate){this._oTemplate=this.getListItemTemplate();}};
S.prototype._createList=function(){var C=this.getItems(),i=C?C.length:0,o,I;while(i--){o=C[i];if(o instanceof L||o instanceof T){break;}o=null;}if(o){this._oList=o;if(o instanceof T){this._isTree=true;}else{this._isList=true;}this._oTemplate=(o.getItems()&&o.getItems().length>0)?o.getItems()[0]:this.getListItemTemplate();o.removeAllItems();}else{I=this.getId()+"-ui5list";if(this.getListType()==="Tree"){this._oList=new T(I);this._isTree=true;}else{this._oList=new L(I,{growing:true,growingScrollToLoad:true});this._isList=true;}this.insertItem(this._oList,2);}if(!this._oList.getLayoutData()){this._oList.setLayoutData(new F({growFactor:1,baseSize:"auto"}));}this._oList.addAriaLabelledBy(this.getId()+"-header");};
S.prototype.getList=function(){return this._oList;};
S.prototype.isInitialised=function(){return!!this.bIsInitialised;};
S.prototype.exit=function(){if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindList,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);this._oSmartFilter.detachCancel(this._cancelEvent,this);this._oSmartFilter=null;}f.cleanUpFullScreen(this);if(!this._bIsListBound&&this._oTemplate){this._oTemplate.destroy();}this._oTemplate=null;this._oToolbar=null;this._headerText=null;this._oFullScreenButton=null;this._oNumberFormatter=null;this._oList=null;};
return S;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartAreaMicroChart',["sap/ui/comp/library","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartLabel","sap/ui/core/Control","sap/m/library","sap/ui/model/odata/CountMode","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,A,a,b,c,d,M,e,S,f){"use strict";var V=M.ValueColor;
var g=S.extend("sap.ui.comp.smartmicrochart.SmartAreaMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartAreaMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:true}}},
renderer:f
});
g.prototype._CHART_TYPE=["Area","Line"];
g.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Area",true);this.setAggregation("_chart",new A(),true);};
g.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);o.setSize(this.getSize(),true);};
g.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);this.getAggregation("_chart").setProperty("showLabel",s,true);this.invalidate();}return this;};
g.prototype.setEnableAutoBinding=function(){return this.setProperty("enableAutoBinding",true,true);};
g.prototype.bindElement=function(){return this;};
g.prototype._createAndBindInnerChart=function(){this._createChartLabels();this._createChartItem("chart",this._oDataPointAnnotations.Value.Path);this._createChartItem("target",this._oDataPointAnnotations.TargetValue.Path);this._buildThreshold();};
g.prototype._buildThreshold=function(){var o=this._oDataPointAnnotations.CriticalityCalculation;if(this._hasMember(o,"ImprovementDirection.EnumMember")){switch(o.ImprovementDirection.EnumMember){case S._MINIMIZE:this._createChartItem("minThreshold",o.ToleranceRangeHighValue.Path,V.Good);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);break;case S._MAXIMIZE:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.ToleranceRangeLowValue.Path,V.Good);break;case S._TARGET:this._createChartItem("minThreshold",o.DeviationRangeLowValue.Path,V.Error);this._createChartItem("maxThreshold",o.DeviationRangeHighValue.Path,V.Error);this._createChartItem("innerMinThreshold",o.ToleranceRangeLowValue.Path,V.Good);this._createChartItem("innerMaxThreshold",o.ToleranceRangeHighValue.Path,V.Good);break;default:break;}}};
g.prototype._createChartLabels=function(){var l,m=this._getLabelsMap();for(var k in m){l=new c();this.getAggregation("_chart").setAggregation(m[k],l,true);}};
g.prototype._createChartItem=function(h,p,i){var P,I;P=new a({x:{path:this._oChartViewMetadata.dimensionFields[0],formatter:this._formatDimension.bind(this)},y:{path:p,type:"sap.ui.model.odata.type.Decimal"}});I=new b({points:{path:this._getBindingPath(),template:P,parameters:{countMode:e.None},events:{change:this._onBindingDataChange.bind(this)}},color:i});this.getAggregation("_chart").setAggregation(h,I,true);};
g.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getAggregation("chart").getBinding("points");this._updateAssociations(p);this.updateChartLabels.call(this,p);};
g.prototype._updateLabel=function(n,D){var l=this.getAggregation("_chart").getAggregation(n);l.setProperty("label",D.text,true);if(D.color){l.setProperty("color",D.color,true);}};
g.prototype._getLabelsMap=function(){return{"leftTop":"firstYLabel","rightTop":"lastYLabel","leftBottom":"firstXLabel","rightBottom":"lastXLabel"};};
return g;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartBulletMicroChart',["sap/ui/comp/library","sap/ui/core/Control","sap/suite/ui/microchart/library","sap/suite/ui/microchart/BulletMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/m/library","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(l,C,M,B,a,b,S,c){"use strict";var V=b.ValueColor;
var d=S.extend("sap.ui.comp.smartmicrochart.SmartBulletMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartBulletMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false}}},
renderer:c
});
d._CRITICAL_COLOR=V.Critical;d._ERROR_COLOR=V.Error;d.prototype._CHART_TYPE=["Bullet"];
d.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Bullet",true);this.setAggregation("_chart",new B({"showValueMarker":true}),true);};
d.prototype.setShowLabel=function(s){if(this.getShowLabel()!==s){this.setProperty("showLabel",s,true);var o=this.getAggregation("_chart");o.setProperty("showActualValue",s,true);o.setProperty("showTargetValue",s,true);o.setProperty("showDeltaValue",s,true);o.setProperty("showValueMarker",s,true);this.invalidate();}return this;};
d.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
d.prototype._createAndBindInnerChart=function(){this._bindValueProperties();this._bindActualValue();this._bindChartThresholds();this._updateAssociations.call(this);this._setMode();};
d.prototype._setMode=function(){if(this._hasMember(this,"_oDataPointAnnotations.Visualization.EnumMember")){if(this._oDataPointAnnotations.Visualization.EnumMember===S._DELTABULLET){this.getAggregation("_chart").setMode(M.BulletMicroChartModeType.Delta);}}};
d.prototype._bindValueProperties=function(){var m,f,i=this.getAggregation("_chart");if(this._hasMember(this,"_oDataPointAnnotations.TargetValue.Path")){i.bindProperty("targetValue",{path:this._oDataPointAnnotations.TargetValue.Path,type:"sap.ui.model.odata.type.Decimal"});var F=this._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.TargetValue.Path);i.bindProperty("targetValueLabel",{path:this._oDataPointAnnotations.TargetValue.Path,formatter:F.format.bind(F)});}if(this._hasMember(this,"_oDataPointAnnotations.ForecastValue.Path")){i.bindProperty("forecastValue",{path:this._oDataPointAnnotations.ForecastValue.Path,type:"sap.ui.model.odata.type.Decimal"});}if(this._oDataPointAnnotations.MaximumValue){if(this._oDataPointAnnotations.MaximumValue.hasOwnProperty("Path")){i.bindProperty("maxValue",{path:this._oDataPointAnnotations.MaximumValue.Path,type:"sap.ui.model.odata.type.Decimal"});}else if(this._oDataPointAnnotations.MaximumValue.hasOwnProperty("Decimal")){m=parseFloat(this._oDataPointAnnotations.MaximumValue.Decimal);i.setMaxValue(m,true);}}if(this._oDataPointAnnotations.MinimumValue){if(this._oDataPointAnnotations.MinimumValue.hasOwnProperty("Path")){i.bindProperty("minValue",{path:this._oDataPointAnnotations.MinimumValue.Path,type:"sap.ui.model.odata.type.Decimal"});}else if(this._oDataPointAnnotations.MinimumValue.hasOwnProperty("Decimal")){f=parseFloat(this._oDataPointAnnotations.MinimumValue.Decimal);i.setMinValue(f,true);}}};
d.prototype._bindActualValue=function(){var i=this.getAggregation("_chart"),f=this._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.Value.Path);var o=new a({value:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"},color:{parts:[this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path||"",this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path||""],formatter:this._getValueColor.bind(this)}});i.setAggregation("actual",o,true);i.bindProperty("actualValueLabel",{path:this._oDataPointAnnotations.Value.Path,formatter:f.format.bind(f)});};
d.prototype._bindChartThresholds=function(){var D,o;if(this._hasMember(this._oDataPointAnnotations,"CriticalityCalculation.ImprovementDirection.EnumMember")){o=this._oDataPointAnnotations.CriticalityCalculation;D=o.ImprovementDirection.EnumMember;if(D!==S._MINIMIZE&&o.DeviationRangeLowValue&&o.DeviationRangeLowValue.Path){this._bindThresholdAggregation(o.DeviationRangeLowValue.Path,d._ERROR_COLOR);}if(D!==S._MINIMIZE&&o.ToleranceRangeLowValue&&o.ToleranceRangeLowValue.Path){this._bindThresholdAggregation(o.ToleranceRangeLowValue.Path,d._CRITICAL_COLOR);}if(D!==S._MAXIMIZE&&o.ToleranceRangeHighValue&&o.ToleranceRangeHighValue.Path){this._bindThresholdAggregation(o.ToleranceRangeHighValue.Path,d._CRITICAL_COLOR);}if(D!==S._MAXIMIZE&&o.DeviationRangeHighValue&&o.DeviationRangeHighValue.Path){this._bindThresholdAggregation(o.DeviationRangeHighValue.Path,d._ERROR_COLOR);}}};
d.prototype._bindThresholdAggregation=function(p,s){var t=new a({value:{path:p,type:"sap.ui.model.odata.type.Decimal"},color:s});this.getAggregation("_chart").addAggregation("thresholds",t,true);};
return d;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartColumnMicroChart',["sap/ui/comp/library","sap/suite/ui/microchart/library","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/suite/ui/microchart/ColumnMicroChart","sap/suite/ui/microchart/ColumnMicroChartData","sap/suite/ui/microchart/ColumnMicroChartLabel","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,M,a,b,D,m,L,c,d,e,S,f){"use strict";
var g=S.extend("sap.ui.comp.smartmicrochart.SmartColumnMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartColumnMicroChart.designtime"},
renderer:f
});
g.prototype._CHART_TYPE=["Column"];
g.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Column",true);this.setAggregation("_chart",new c(),true);};
g.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
g.prototype.setShowLabel=function(s){var o;if(this.getShowLabel()!==s){o=this.getAggregation("_chart");this.setProperty("showLabel",s,true);o.setProperty("showTopLabels",s,true);o.setProperty("showBottomLabels",s,true);o.invalidate();}return this;};
g.prototype._createAndBindInnerChart=function(){if(this._aDataPointAnnotations.length===0){L.error("DataPoint annotation missing! Cannot create the SmartColumnMicroChart");return;}if(!(this._aDataPointAnnotations[0].Value&&this._aDataPointAnnotations[0].Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartColumnMicroChart");return;}var o=this.getAggregation("_chart"),h=new d({value:{path:this._aDataPointAnnotations[0].Value.Path,type:"sap.ui.model.odata.type.Decimal"}});if(this._aDataPointAnnotations[0].Criticality&&this._aDataPointAnnotations[0].Criticality.Path){h.bindProperty("color",{path:this._aDataPointAnnotations[0].Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}if(this._aDataPointAnnotations[0].Title&&this._aDataPointAnnotations[0].Title.Path){h.bindProperty("label",this._aDataPointAnnotations[0].Title.Path);}var A=this._getPropertyAnnotation.call(this,this._aDataPointAnnotations[0].Value.Path);var i=A["com.sap.vocabularies.Common.v1.Text"];if(i&&i.Path){o.setAllowColumnLabels(true);h.bindProperty("displayValue",i.Path);}o.bindAggregation("columns",{path:this._getBindingPath(),template:h,events:{change:this._onBindingDataChange.bind(this)}});this._createChartLabels();};
g.prototype._createChartLabels=function(){var l,o=this._getLabelsMap();for(var k in o){l=new e();this.getAggregation("_chart").setAggregation(o[k],l,true);}};
g.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getBinding("columns");this._updateAssociations(p);this.updateChartLabels.call(this,p);};
g.prototype._updateLabel=function(n,o){var l=this.getAggregation("_chart").getAggregation(n);l.setProperty("label",o.text,true);if(o.color){l.setProperty("color",o.color,true);}};
g.prototype._getLabelsMap=function(){return{"leftTop":"leftTopLabel","rightTop":"rightTopLabel","leftBottom":"leftBottomLabel","rightBottom":"rightBottomLabel"};};
return g;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartComparisonMicroChart',["sap/ui/comp/library","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/ComparisonMicroChartData","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,a,b,c,d,D,m,L,S,e){"use strict";
var f=S.extend("sap.ui.comp.smartmicrochart.SmartComparisonMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartComparisonMicroChart.designtime"},
renderer:e
});
f.prototype._CHART_TYPE=["Comparison"];
f.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Comparison",true);this.setAggregation("_chart",new a(),true);};
f.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
f.prototype._createAndBindInnerChart=function(){if(!(this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartComparisonMicroChart");return;}var o=this.getAggregation("_chart"),B=new b({value:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"}});if(this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path){B.bindProperty("color",{path:this._oDataPointAnnotations.Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}if(this._oDataPointAnnotations.Title&&this._oDataPointAnnotations.Title.Path){B.bindProperty("title",this._oDataPointAnnotations.Title.Path);}var A=this._getPropertyAnnotation.call(this,this._oDataPointAnnotations.Value.Path);var g=A["com.sap.vocabularies.Common.v1.Text"];if(g&&g.Path){B.bindProperty("displayValue",g.Path);}o.bindAggregation("data",{path:this._getBindingPath(),template:B,events:{change:this._onBindingDataChange.bind(this)}});};
f.prototype._onBindingDataChange=function(){var o=this.getAggregation("_chart").getBinding("data");this._updateAssociations(o);};
return f;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartDeltaMicroChart',["sap/ui/comp/library","sap/ui/core/Control","sap/suite/ui/microchart/DeltaMicroChart","sap/ui/comp/smartmicrochart/SmartMicroChartBase","sap/base/Log","./SmartMicroChartRenderer"],function(l,C,D,S,L,a){"use strict";
var b=S.extend("sap.ui.comp.smartmicrochart.SmartDeltaMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartDeltaMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false}}},
renderer:a
});
b.prototype._CHART_TYPE=["Delta"];
b.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType",this._CHART_TYPE,true);this.setAggregation("_chart",new D(),true);};
b.prototype.onBeforeRendering=function(){var c=this.getAggregation("_chart");c.setSize(this.getSize(),true);c.setWidth(this.getWidth(),true);};
b.prototype._createAndBindInnerChart=function(){if(this._aDataPointAnnotations.length<2){L.error("Two DataPoint annotation are needed! Cannot create the SmartColumnMicroChart");return;}if(!(this._aDataPointAnnotations[0].Value&&this._aDataPointAnnotations[0].Value.Path&&this._aDataPointAnnotations[1].Value&&this._aDataPointAnnotations[1].Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartColumnMicroChart");return;}this.bindProperties();this._updateAssociations();};
b.prototype.bindProperties=function(){var c=this.getAggregation("_chart"),f=this._getLabelNumberFormatter.call(this,this._aDataPointAnnotations[0].Value.Path),F=this._getLabelNumberFormatter.call(this,this._aDataPointAnnotations[1].Value.Path);c.bindProperty("value1",{path:this._aDataPointAnnotations[0].Value.Path,type:"sap.ui.model.odata.type.Decimal",events:{change:this._onBindingDataChange.bind(this)}});c.bindProperty("value2",{path:this._aDataPointAnnotations[1].Value.Path,type:"sap.ui.model.odata.type.Decimal",events:{change:this._onBindingDataChange.bind(this)}});c.bindProperty("displayValue1",{path:this._aDataPointAnnotations[0].Value.Path,formatter:f.format.bind(f)});c.bindProperty("displayValue2",{path:this._aDataPointAnnotations[1].Value.Path,formatter:f.format.bind(F)});if(this._aDataPointAnnotations[0].Title&&this._aDataPointAnnotations[0].Title.Path){c.bindProperty("title1",{path:this._aDataPointAnnotations[0].Title.Path});}if(this._aDataPointAnnotations[1].Title&&this._aDataPointAnnotations[1].Title.Path){c.bindProperty("title2",{path:this._aDataPointAnnotations[1].Title.Path});}if(this._aDataPointAnnotations[0].Criticality&&this._aDataPointAnnotations[0].Criticality.Path){c.bindProperty("color",{path:this._aDataPointAnnotations[0].Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}};
b.prototype._onBindingDataChange=function(){var c=this.getAggregation("_chart"),f=this._getLabelNumberFormatter.call(this,this._aDataPointAnnotations[0].Value.Path);c.setDeltaDisplayValue(f.format(c._getDeltaValue()));this._updateAssociations();};
return b;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartHarveyBallMicroChart',["sap/ui/comp/library","sap/ui/core/Control","sap/suite/ui/microchart/library","sap/m/library","sap/ui/comp/smartmicrochart/SmartMicroChartBase","sap/suite/ui/microchart/HarveyBallMicroChart","sap/suite/ui/microchart/HarveyBallMicroChartItem","sap/base/Log","./SmartMicroChartRenderer"],function(l,C,M,a,S,H,b,L,c){"use strict";
var d=S.extend("sap.ui.comp.smartmicrochart.SmartHarveyBallMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartHarveyBallMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false}},associations:{freeText:{type:"sap.m.Label",group:"Misc",multiple:false}}},
renderer:c
});
d._CHART_TYPE=["Pie"];
d.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Pie",true);this.setAggregation("_chart",new H(),true);};
d.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
d.prototype._createAndBindInnerChart=function(){if(!(this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartHarveyBallMicroChart");return;}var o=this.getAggregation("_chart"),i=new b({fraction:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"}});var v=this._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.Value.Path);i.bindProperty("fractionLabel",{path:this._oDataPointAnnotations.Value.Path,formatter:v.format.bind(v)});var m=this._getLabelNumberFormatter.call(this,this._oDataPointAnnotations.MaximumValue.Path);if(this._oDataPointAnnotations.MaximumValue&&this._oDataPointAnnotations.MaximumValue.Path){o.bindProperty("total",{path:this._oDataPointAnnotations.MaximumValue.Path,type:"sap.ui.model.odata.type.Decimal"});o.bindProperty("totalLabel",{path:this._oDataPointAnnotations.MaximumValue.Path,formatter:m.format.bind(m)});}if(this._getAnnotation("unitOfMeasure").Path){o.bindProperty("totalScale",{path:this._getAnnotation("unitOfMeasure").Path});i.bindProperty("fractionScale",{path:this._getAnnotation("unitOfMeasure").Path});}if(this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path){i.bindProperty("color",{path:this._oDataPointAnnotations.Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}o.addItem(i);this._updateAssociations();};
d.prototype._getSupportedChartTypes=function(){return d._CHART_TYPE;};
return d;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartLineMicroChart',["sap/ui/comp/library","sap/suite/ui/microchart/library","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/suite/ui/microchart/LineMicroChart","sap/suite/ui/microchart/LineMicroChartLine","sap/suite/ui/microchart/LineMicroChartPoint","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,M,a,b,D,m,L,c,d,e,S,f){"use strict";
var g=S.extend("sap.ui.comp.smartmicrochart.SmartLineMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartLineMicroChart.designtime"},
renderer:f
});
g.prototype._CHART_TYPE=["Line"];
g.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Line",true);this.setAggregation("_chart",new c({showThresholdLine:false}),true);};
g.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
g.prototype.setShowLabel=function(s){var o;if(this.getShowLabel()!==s){o=this.getAggregation("_chart");this.setProperty("showLabel",s,true);o.setProperty("showTopLabels",s,true);o.setProperty("showBottomLabels",s,true);o.invalidate();}return this;};
g.prototype._createAndBindInnerChart=function(){if(this._aDataPointAnnotations.length===0){L.error("DataPoint annotation missing! Cannot create the SmartLineMicroChart");return;}for(var i=0;i<this._aDataPointAnnotations.length;i++){if(!(this._aDataPointAnnotations[i].Value&&this._aDataPointAnnotations[i].Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartLineMicroChart");return;}}var o=this.getAggregation("_chart"),l;this._aDataPointAnnotations.forEach(function(h,I){l=new d(this.getId()+"-line-"+I,{points:{path:this._getBindingPath(),factory:this._pointFactory.bind(this),events:{change:this._onBindingDataChange.bind(this)}}});o.addLine(l);},this);};
g.prototype._pointFactory=function(i,o){var x,y,p,l=i.split("-").slice(-2,-1),h=this.getAggregation("_chart").getLines()[l],j=this._aDataPointAnnotations[l],s;x=o.getProperty(this._oChartViewMetadata.dimensionFields[l]);x=this._formatDimension.call(this,x);y=o.getProperty(j.Value.Path);y=Number(y);p=new e({x:x,y:y});if(h&&j.Criticality&&j.Criticality.Path){s=this._mapCriticalityTypeWithColor(o.getProperty(j.Criticality.Path));this.getAggregation("_chart").getLines()[l].setColor(s);}return p;};
g.prototype._onBindingDataChange=function(){var p=this.getAggregation("_chart").getLines()[0].getBinding("points");this._updateAssociations(p);this.updateChartLabels.call(this,p);};
g.prototype._updateLabel=function(n,o){this.getAggregation("_chart").setProperty(n,o.text,true);};
g.prototype._getLabelsMap=function(){return{"leftTop":"leftTopLabel","rightTop":"rightTopLabel","leftBottom":"leftBottomLabel","rightBottom":"rightBottomLabel"};};
return g;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChart',["sap/ui/comp/library","sap/ui/core/Control","sap/ui/comp/providers/ChartProvider","sap/suite/ui/microchart/library","sap/m/library","sap/ui/core/CustomData","sap/ui/comp/smartmicrochart/SmartMicroChartBase","sap/base/Log","./SmartMicroChartRenderer"],function(C,a,b,M,c,d,S,L,e){"use strict";var f=c.Size;
var g=a.extend("sap.ui.comp.smartmicrochart.SmartMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartMicroChart.designtime",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false},freeText:{type:"sap.m.Label",group:"Misc",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{initialize:{}}},
renderer:e
});
g.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;};
g.prototype.setChartType=function(){return this;};
g.prototype.getChartType=function(){return this.getAggregation("_chart").getChartType();};
g.prototype.propagateProperties=function(){if(a.prototype.propagateProperties){a.prototype.propagateProperties.apply(this,arguments);}this._initializeMetadata();};
g.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");if(o){if(o.getMetadata().hasProperty("height")){o.setHeight(this.getHeight(),true);}if(o.getMetadata().hasProperty("width")){o.setWidth(this.getWidth(),true);}if(o.getMetadata().hasProperty("size")){o.setSize(this.getSize(),true);}M._passParentContextToChild(this,o);if(o.getMetadata().hasProperty("showLabel")){o.setShowLabel(this.getShowLabel(),true);}if(o.getMetadata().hasAssociation("chartTitle")){o.setAssociation("chartTitle",this.getChartTitle(),true);}if(o.getMetadata().hasAssociation("chartDescription")){o.setAssociation("chartDescription",this.getChartDescription(),true);}if(o.getMetadata().hasAssociation("unitOfMeasure")){o.setAssociation("unitOfMeasure",this.getUnitOfMeasure(),true);}if(o.getMetadata().hasAssociation("freeText")){o.setAssociation("freeText",this.getFreeText(),true);}}};
g.prototype.setSize=function(s){if(this.getSize()!==s){if(s===f.Responsive){this.setProperty("isResponsive",true);}else{this.setProperty("isResponsive",false);}this.setProperty("size",s);}return this;};
g.prototype.setIsResponsive=function(i){var s,h=this.getSize();this.setProperty("isResponsive",i);if(i){s=f.Responsive;}else{s=h===f.Responsive?f.Auto:h;}this.setProperty("size",s);return this;};
g.prototype.addAriaLabelledBy=function(A){this.addAssociation("ariaLabelledBy",A,true);this.getAggregation("_chart").addAriaLabelledBy(A);return this;};
g.prototype.removeAriaLabelledBy=function(A){this.removeAssociation("ariaLabelledBy",A,true);this.getAggregation("_chart").removeAriaLabelledBy(A);return this;};
g.prototype.removeAllAriaLabelledBy=function(){this.removeAllAssociation("ariaLabelledBy",true);this.getAggregation("_chart").removeAllAriaLabelledBy();return this;};
g.prototype._initializeMetadata=function(){if(!this._bIsInitialized){var m=this.getModel();if(m&&(m.getMetadata().getName()==="sap.ui.model.odata.v2.ODataModel"||m.getMetadata().getName()==="sap.ui.model.odata.ODataModel")){if(!this._bMetaModelLoadAttached){m.getMetaModel().loaded().then(this._onMetadataInitialized.bind(this));this._bMetaModelLoadAttached=true;}}else if(m){this._onMetadataInitialized();}}};
g.prototype._createChartProvider=function(){var E=this.getEntitySet(),m=this.getModel();if(m&&E){this._oChartProvider=new b({entitySet:E,model:m,chartQualifier:this.data("chartQualifier")});}};
g.prototype._onMetadataInitialized=function(){var q,D;this._bMetaModelLoadAttached=false;if(!this._bIsInitialized){this._createChartProvider();if(this._oChartProvider){this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();if(this._oChartViewMetadata){this._bIsInitialized=true;this._createInnerChart();}else{q=this.data("chartQualifier");D=this._oChartProvider.getChartDataPointMetadata();if(D){D=q?D.additionalAnnotations[q]:D.primaryAnnotation;if(D){this._bIsInitialized=true;this._createInnerChartFromDataPoint(D);}else{L.error("There is no UI.Chart annotation nore DataPoint annotation. We cannot initialize SmartMicroChart.");}}else{L.error("There is no UI.Chart annotation nore DataPoint annotation. We cannot initialize SmartMicroChart.");}}}}};
g.prototype._createInnerChartFromDataPoint=function(D){var t=D.Visualization.EnumMember;if(S._isBulletVizualizationType(t)){this._buildSmartBulletMicroChart();}else{L.error("Only Bullet chart can be initialize with just DataPoint annotation. Type: "+t+" is not a Bullet chart type.");return;}this.invalidate();};
g.prototype._createInnerChart=function(){if(!this._checkChartMetadata()){L.error("Created annotations not valid. Please review the annotations and metadata.");return;}var s=this._oChartViewMetadata.chartType;switch(s){case"line":case"area":var t=this._oChartViewMetadata.annotation.ChartType.EnumMember.split("/").pop().toLowerCase();if(t==="area"){this._buildSmartAreaMicroChart();}else if(t==="line"){this._buildSmartLineMicroChart();}else{L.error("Not supported chart type used.");return;}break;case"bullet":this._buildSmartBulletMicroChart();break;case"donut":this._buildSmartRadialMicroChart();break;case"stacked_bar":this._buildSmartStackedBarMicroChart();break;case"column":this._buildSmartColumnMicroChart();break;case"pie":this._buildSmartHarveyBallMicroChart();break;default:L.error("Not supported chart type used.");return;}this.invalidate();};
g.prototype._buildSmartLineMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartLineMicroChart);};
g.prototype._buildSmartAreaMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartAreaMicroChart);};
g.prototype._buildSmartBulletMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartBulletMicroChart);};
g.prototype._buildSmartRadialMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartRadialMicroChart);};
g.prototype._buildSmartStackedBarMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartStackedBarMicroChart);};
g.prototype._buildSmartColumnMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartColumnMicroChart);};
g.prototype._buildSmartHarveyBallMicroChart=function(){this._buildSmartMicroChart(C.smartmicrochart.SmartHarveyBallMicroChart);};
g.prototype._buildSmartMicroChart=function(h){var o=new h({entitySet:this.getEntitySet(),chartBindingPath:this.getChartBindingPath(),initialize:[this._onChartInitialized,this],customData:[new d({key:"chartQualifier",value:this.data("chartQualifier")})]});if(o.getMetadata().hasProperty("enableAutoBinding")){o.setProperty("enableAutoBinding",this.getEnableAutoBinding(),true);}this.setAggregation("_chart",o,true);};
g.prototype._onChartInitialized=function(){this.fireInitialize();};
g.prototype._checkChartMetadata=function(){if(this._oChartViewMetadata.chartType&&this._oChartViewMetadata.annotation&&this._oChartViewMetadata.annotation.ChartType&&this._oChartViewMetadata.annotation.ChartType.EnumMember&&this._oChartViewMetadata.annotation.ChartType.EnumMember.length>0){return true;}else{return false;}};
g.prototype.getAccessibilityInfo=function(){var A={};var i=this.getAggregation("_chart");if(i&&i.getAccessibilityInfo){A=i.getAccessibilityInfo();}return A;};
return g;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChartBase',["sap/ui/thirdparty/jquery","sap/ui/comp/library","sap/m/library","sap/ui/comp/providers/ChartProvider","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/ui/model/type/Date","sap/base/Log","sap/ui/core/Control","./SmartMicroChartRenderer"],function(q,l,M,C,N,D,a,L,b,S){"use strict";var V=M.ValueColor;var c=M.Size;
var d=b.extend("sap.ui.comp.smartmicrochart.SmartMicroChartBase",{
metadata:{"abstract":true,library:"sap.ui.comp",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc"},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},showLabel:{type:"boolean",group:"Appearance",defaultValue:true},width:{type:"sap.ui.core.CSSSize",group:"Misc"},height:{type:"sap.ui.core.CSSSize",group:"Misc"},size:{type:"sap.m.Size",group:"Misc",defaultValue:"Auto"},isResponsive:{type:"boolean",group:"Appearance",defaultValue:false}},defaultAggregation:"_chart",aggregations:{_chart:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},associations:{chartTitle:{type:"sap.m.Label",group:"Misc",multiple:false},chartDescription:{type:"sap.m.Label",group:"Misc",multiple:false},unitOfMeasure:{type:"sap.m.Label",group:"Misc",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{initialize:{}}},
renderer:S
});
d._MINIMIZE="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Minimize";d._MAXIMIZE="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Maximize";d._TARGET="com.sap.vocabularies.UI.v1.ImprovementDirectionType/Target";d._DELTABULLET="com.sap.vocabularies.UI.v1.VisualizationType/DeltaBulletChart";d._BULLET="com.sap.vocabularies.UI.v1.VisualizationType/BulletChart";d._CALENDAR_TERMS_PATTERNS={"com.sap.vocabularies.Common.v1.IsCalendarYear":"yyyy","com.sap.vocabularies.Common.v1.IsCalendarQuarter":"Q","com.sap.vocabularies.Common.v1.IsCalendarMonth":"MM","com.sap.vocabularies.Common.v1.IsCalendarWeek":"ww","com.sap.vocabularies.Common.v1.IsCalendarDate":"yyyyMMdd","com.sap.vocabularies.Common.v1.IsCalendarYearMonth":"yyyyMM"};d._ASSOCIATIONS=["chartTitle","chartDescription","unitOfMeasure","freeText"];d._ASSOCIATIONS_ANNOTATIONS_MAP={chartDescription:"Description",chartTitle:"Title",unitOfMeasure:{propertyAnnotationPath:"Value",propertyAnnotationProperties:["ISOCurrency","Unit"]},freeText:{propertyAnnotationPath:"Value",propertyAnnotationProperties:["Label"]}};
d._isBulletVizualizationType=function(t){return(t===d._BULLET)||(t===d._DELTABULLET);};
d.prototype._initializeMetadata=function(){if(!this._bIsInitialized){var m=this.getModel();if(m&&(m.getMetadata().getName()==="sap.ui.model.odata.v2.ODataModel"||m.getMetadata().getName()==="sap.ui.model.odata.ODataModel")){if(!this._bMetaModelLoadAttached){m.getMetaModel().loaded().then(this._onMetadataInitialized.bind(this));this._bMetaModelLoadAttached=true;}}else if(m){this._onMetadataInitialized.call(this);}}};
d.prototype._onMetadataInitialized=function(){this._bMetaModelLoadAttached=false;if(this._bIsInitialized){return;}this._createChartProvider.call(this);this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();this._oDataPointMetadata=this._oChartProvider.getChartDataPointMetadata();this._bIsInitialized=true;this.fireInitialize();if(this.getEnableAutoBinding&&this.getEnableAutoBinding()){if(this.getChartBindingPath()){this.bindElement(this.getChartBindingPath());}else{L.error("The property chartBindingPath needs to be set in order for property enableAutoBinding to be applied.");}}if(this._checkChartMetadata.call(this)){this._aDataPointAnnotations=this._getDataPointAnnotations.call(this);this._oDataPointAnnotations=this._aDataPointAnnotations[0];if(this._aDataPointAnnotations.every(this._checkDataPointAnnotation.bind(this))){this._createAndBindInnerChart();}}else{L.error("Created annotations not valid. Please review the annotations and metadata.");}};
d.prototype._getDataPointAnnotations=function(){var A=[],o;if(this._oChartViewMetadata&&this._oChartViewMetadata.measureFields){for(var i=0;i<this._oChartViewMetadata.measureFields.length;i++){o=this._getDataPointAnnotation.call(this,this._oChartViewMetadata.measureFields[i]);A.push(o);}}else{o=this._getDataPointAnnotation.call(this);A.push(o);}return A;};
d.prototype._cleanup=function(){if(this._oDateType){this._oDateType.destroy();this._oDateType=null;}};
d.prototype._createChartProvider=function(){var m,e;e=this.getEntitySet();m=this.getModel();if(m&&e){this._oChartProvider=new C({entitySet:e,model:m,chartQualifier:this.data("chartQualifier")});}else{L.error("Property entitySet is not set or no model has been attached to the control.");}};
d.prototype._checkChartMetadata=function(){if(q.isEmptyObject(this._oChartViewMetadata)){if(q.isEmptyObject(this._oDataPointMetadata)){L.error("DataPoint annotation must be provided if chart annotation is missing.");return false;}return true;}else{if(!this._oChartViewMetadata.fields||this._oChartViewMetadata.fields.length===0){L.error("No fields exist in the metadata.");return false;}if(this._hasMember(this,"_oChartViewMetadata.annotation.ChartType")){return this._checkChartType.call(this);}else if(this.getChartType()==="Comparison"||this.getChartType()==="Delta"){return true;}else{L.error("The Chart annotation is invalid.");return false;}}};
d.prototype._checkChartType=function(){var t=this._getSupportedChartTypes();for(var i=0;i<t.length;i++){if(this._oChartViewMetadata.annotation.ChartType.EnumMember==="com.sap.vocabularies.UI.v1.ChartType/"+t[i]){return true;}}L.error("The ChartType property in the Chart annotation is not part of the list of valid types: \""+t.toString()+"\".");return false;};
d.prototype._getDataPointQualifier=function(m){var o;if(!this._oChartViewMetadata&&this._oDataPointMetadata){return this.data("chartQualifier");}if(!this._hasMember(this,"_oChartViewMetadata.annotation.MeasureAttributes.length")||!this._oChartViewMetadata.annotation.MeasureAttributes.length){return"";}if(m&&this._oChartViewMetadata.measureAttributes&&this._oChartViewMetadata.measureAttributes[m]){return(this._oChartViewMetadata.measureAttributes[m].dataPoint.match(/\#([^\#]*)$/)||[])[1]||"";}o=this._oChartViewMetadata.annotation.MeasureAttributes[0];if(this._hasMember(o,"DataPoint.AnnotationPath")){return(o.DataPoint.AnnotationPath.match(/\#([^\#]*)$/)||[])[1]||"";}};
d.prototype._getDataPointAnnotation=function(m){var Q=this._getDataPointQualifier.call(this,m),A;if(Q){A=this._oDataPointMetadata.additionalAnnotations[Q];}else{A=this._oDataPointMetadata.primaryAnnotation;}return A;};
d.prototype._checkDataPointAnnotation=function(o){var v=null;if(q.isEmptyObject(o)){L.error("The DataPoint annotation is empty. Please check it!");return false;}if(this._hasMember(o,"Visualization.EnumMember")){v=o.Visualization.EnumMember;if(!d._isBulletVizualizationType(v)){L.error("The only support visualization types for micro charts are BulletChart and DeltaBulletChart.");return false;}}if(q.isEmptyObject(this._oChartViewMetadata)&&(v===null)){L.error("If only DataPoint annotation is provided the VisualizationType is expected to be set.");return false;}if(this._hasMember(o,"Value.Path")){if(q.isEmptyObject(o.Criticality)){this._checkCriticalityMetadata(o.CriticalityCalculation);}return true;}else{L.error("The Value property does not exist in the DataPoint annotation. This property is essential for creating the smart chart.");return false;}};
d.prototype._checkCriticalityMetadata=function(o){if(q.isEmptyObject(o)){L.warning("The CriticalityCalculation property in DataPoint annotation is not provided.");return false;}if(this._hasMember(o,"ImprovementDirection.EnumMember")){var i=o.ImprovementDirection.EnumMember;switch(i){case d._MINIMIZE:return this._checkCriticalityMetadataForMinimize(o);case d._MAXIMIZE:return this._checkCriticalityMetadataForMaximize(o);case d._TARGET:return this._checkCriticalityMetadataForTarget(o);default:L.warning("The improvement direction in DataPoint annotation must be either Minimize, Maximize or Target.");}}else{L.warning("The ImprovementDirection property in DataPoint annotation is not provided.");}return false;};
d.prototype._checkCriticalityMetadataForMinimize=function(o){if(!this._hasMember(o,"ToleranceRangeHighValue.Path")){L.warning("The ToleranceRangeHighValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}if(!this._hasMember(o,"DeviationRangeHighValue.Path")){L.warning("The DeviationRangeHighValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}return true;};
d.prototype._checkCriticalityMetadataForMaximize=function(o){if(!this._hasMember(o,"ToleranceRangeLowValue.Path")){L.warning("The ToleranceRangeLowValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}if(!this._hasMember(o,"DeviationRangeLowValue.Path")){L.warning("The DeviationRangeLowValue property in DataPoint annotation is missing for Minimize improvement direction.");return false;}return true;};
d.prototype._checkCriticalityMetadataForTarget=function(o){if(!this._hasMember(o,"ToleranceRangeLowValue.Path")){L.warning("The DeviationRangeLowValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!this._hasMember(o,"ToleranceRangeHighValue.Path")){L.warning("The ToleranceRangeHighValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!this._hasMember(o,"DeviationRangeLowValue.Path")){L.warning("The ToleranceRangeLowValue property in DataPoint annotation is missing for Target improvement direction.");return false;}if(!this._hasMember(o,"DeviationRangeHighValue.Path")){L.warning("The DeviationRangeHighValue property in DataPoint annotation is missing for Target improvement direction.");return false;}return true;};
d.prototype._mapCriticalityTypeWithColor=function(t){var T;if(!t){return V.Neutral;}else{T=t.toString();}T=(T.match(/(?:CriticalityType\/)?([^\/]*)$/)||[])[1]||"";switch(T){case"Negative":case"1":return V.Error;case"Critical":case"2":return V.Critical;case"Positive":case"3":return V.Good;default:return V.Neutral;}};
d.prototype._getThresholdValues=function(o){var t={},e=this.getBindingContext();for(var k in o){if(o.hasOwnProperty(k)&&k!=="ImprovementDirection"){t[k]=o[k].Path&&e&&e.getProperty(o[k].Path)||o[k].Decimal||0;}}return t;};
d.prototype._getValueColorForMinimize=function(v,t,i){if(v<=t){return this._mapCriticalityTypeWithColor("Positive");}else if(v>t&&v<=i){return this._mapCriticalityTypeWithColor("Critical");}else if(v>i){return this._mapCriticalityTypeWithColor("Negative");}};
d.prototype._getValueColorForMaximize=function(v,t,i){if(v>=t){return this._mapCriticalityTypeWithColor("Positive");}else if(v<t&&v>=i){return this._mapCriticalityTypeWithColor("Critical");}else if(v<i){return this._mapCriticalityTypeWithColor("Negative");}};
d.prototype._getValueColorForTarget=function(v,t,i,T,e){if(v>=t&&v<=T){return this._mapCriticalityTypeWithColor("Positive");}else if((v>=i&&v<t)||(v>T&&v<=e)){return this._mapCriticalityTypeWithColor("Critical");}else if(v<i||v>e){return this._mapCriticalityTypeWithColor("Negative");}};
d.prototype._getValueColor=function(v,s){var o=this._oDataPointAnnotations.CriticalityCalculation,t,e;v=parseFloat(v)||0;if(typeof s==="string"){e=this._mapCriticalityTypeWithColor(s);}else if(o&&typeof v!=="undefined"&&v!==null){t=this._getThresholdValues.call(this,o);e=this._criticalityCalculation(v,o.ImprovementDirection.EnumMember,t);}return e||this._mapCriticalityTypeWithColor();};
d.prototype._getTopLabelColor=function(v,o,i){var e=this._aDataPointAnnotations[i].CriticalityCalculation,f=parseFloat(v)||0,t={},s;for(var k in e){if(e.hasOwnProperty(k)&&k!=="ImprovementDirection"){t[k]=o[e[k].Path];}}if(e&&typeof f!=="undefined"&&f!==null){s=this._criticalityCalculation(f,e.ImprovementDirection.EnumMember,t);}return s;};
d.prototype._criticalityCalculation=function(v,i,t){var s;switch(i){case d._MINIMIZE:s=this._getValueColorForMinimize(v,t.ToleranceRangeHighValue,t.DeviationRangeHighValue);break;case d._MAXIMIZE:s=this._getValueColorForMaximize(v,t.ToleranceRangeLowValue,t.DeviationRangeLowValue);break;case d._TARGET:s=this._getValueColorForTarget(v,t.ToleranceRangeLowValue,t.DeviationRangeLowValue,t.ToleranceRangeHighValue,t.DeviationRangeHighValue);break;default:L.warning("The improvement direction in DataPoint annotation must be either Minimize, Maximize or Target.");}return s;};
d.prototype._getAnnotation=function(e){var A=d._ASSOCIATIONS_ANNOTATIONS_MAP[e];if(!A){L.warning("No annotation connected to association \""+e+"\".");return{};}if(!q.isEmptyObject(this._oChartViewMetadata)&&typeof A==="string"){return this._oChartViewMetadata.annotation[A];}if(!q.isEmptyObject(this._oDataPointAnnotations)&&this._hasMember(A,"propertyAnnotationPath")&&this._hasMember(A,"propertyAnnotationProperties")){var p;if(this._hasMember(this._oDataPointAnnotations,A.propertyAnnotationPath+".Path")){p=this._getPropertyAnnotation.call(this,this._oDataPointAnnotations[A.propertyAnnotationPath].Path);}if(p){return this._getValueFromPropertyAnnotation(p,A.propertyAnnotationProperties);}}return{};};
d.prototype._getValueFromPropertyAnnotation=function(p,P){for(var s in p){for(var i=0;i<P.length;i++){if(s.indexOf(P[i])>-1){return p[s];}}}return{};};
d.prototype._updateAssociation=function(e,f){var A,o;if(this.getMetadata().hasAssociation(e)){A=sap.ui.getCore().byId(this.getAssociation(e));if(A&&A.getMetadata().hasProperty("text")){o=this._getAnnotation.call(this,e);this._setAssociationText(A,o,f);}}};
d.prototype._updateAssociations=function(B){var o=B&&B.getContexts(0,1)[0],e=o&&o.getObject();var n=d._ASSOCIATIONS.length;for(var i=0;i<n;i++){this._updateAssociation.call(this,d._ASSOCIATIONS[i],e);}};
d.prototype.updateChartLabels=function(B){var m={value:Infinity},o={value:-Infinity},e={value:Infinity},f={value:-Infinity},g,h,x,y,j;j=B.getContexts();j.forEach(function(k){for(var i=0;i<this._oChartViewMetadata.dimensionFields.length;i++){x=this._oChartViewMetadata.dimensionFields[i];g=k.getProperty(x);y=this._oChartViewMetadata.measureFields[i];h=k.getProperty(y);m=(g<m.value)?{context:k,value:g,index:i}:m;o=(g>o.value)?{context:k,value:g,index:i}:o;e=(h<e.value)?{context:k,value:h,index:i}:e;f=(h>f.value)?{context:k,value:h,index:i}:f;}},this);if(e.context&&m.context&&f.context&&o.context){this._updateTopLabel.call(this,this._getLabelsMap()["leftTop"],e.context.getObject(),e.index);this._updateBottomLabel.call(this,this._getLabelsMap()["leftBottom"],m.context.getObject(),m.index);this._updateTopLabel.call(this,this._getLabelsMap()["rightTop"],f.context.getObject(),f.index);this._updateBottomLabel.call(this,this._getLabelsMap()["rightBottom"],o.context.getObject(),o.index);}};
d.prototype._updateTopLabel=function(n,o,i){var v=o[this._aDataPointAnnotations[i].Value.Path],s=this._getTopLabelColor.call(this,v,o,i),f=this._getLabelNumberFormatter.call(this,this._aDataPointAnnotations[i].Value.Path),F;F=f.format(v);this._updateLabel(n,{text:F,color:s});};
d.prototype._updateBottomLabel=function(n,o,i){var A,e,v,f;A=this._oChartViewMetadata.dimensionFields[i];if(A){v=o[A];e=this._getPropertyAnnotation.call(this,this._oChartViewMetadata.dimensionFields[i]);if(e.hasOwnProperty("sap:text")||e.hasOwnProperty("com.sap.vocabularies.Common.v1.Text")){var p=e["sap:text"]||e["com.sap.vocabularies.Common.v1.Text"].Path;f=o[p];}else{f=this._formatBottomLabel.call(this,v,e);}if(f){this._updateLabel(n,{text:f});}}};
d.prototype._formatBottomLabel=function(v,e){var p=this._getSemanticsPattern.call(this,e);if(p){return this._formatSemanticsValue.call(this,v,p);}p=this._getCalendarPattern.call(this,e);if(p){return this._formatSemanticsValue.call(this,v,p);}return this._formatDateAndNumberValue.call(this,v);};
d.prototype._formatSemanticsValue=function(v,p){if(p){if(!this._oDateType){this._oDateType=new a({style:"short",source:{pattern:p}});}return this._oDateType.formatValue(v,"string");}return null;};
d.prototype._formatDateAndNumberValue=function(v){if(v instanceof Date){return this._getLabelDateFormatter.call(this).format(v);}else if(!isNaN(v)){return this._getLabelNumberFormatter.call(this,this._oChartViewMetadata.dimensionFields[0]).format(v);}else{return null;}};
d.prototype._getSemanticsPattern=function(e){if(e.hasOwnProperty("sap:semantics")){switch(e["sap:semantics"]){case"yearmonthday":return"yyyyMMdd";case"yearmonth":return"yyyyMM";case"year":return"yyyy";default:return null;}}return null;};
d.prototype._getCalendarPattern=function(e){for(var s in d._CALENDAR_TERMS_PATTERNS){if(e.hasOwnProperty(s)){return d._CALENDAR_TERMS_PATTERNS[s];}}return null;};
d.prototype._getLabelNumberFormatter=function(p){var P=this._getPropertyAnnotation.call(this,p).precision||null;return N.getFloatInstance({style:"short",showScale:true,precision:P});};
d.prototype._getLabelDateFormatter=function(){return D.getInstance({style:"short"});};
d.prototype._setAssociationText=function(e,f,g){if(!f){return;}if(f.Path&&g){e.setProperty("text",g[f.Path],false);}else if(f.Path){e.bindProperty("text",{path:f.Path,mode:sap.ui.model.BindingMode.OneWay});e.invalidate();}else if(f.String){if(f.String.indexOf("{")===0){var p=f.String.split(">");e.bindProperty("text",{path:p[1].substr(0,p[1].length-1),model:p[0].substr(1),mode:sap.ui.model.BindingMode.OneWay});e.invalidate();}else{e.setProperty("text",f.String,false);}}};
d.prototype._getPropertyAnnotation=function(p){var m,e,E,P;m=this.getModel().getMetaModel();e=this._oChartProvider._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.getEntitySet());E=m.getODataEntityType(e);P=m.getODataProperty(E,p);return P;};
d.prototype._hasMember=function(o,p){var s=".",P=p.split(s),m=P.shift();return!!o&&((P.length>0)?this._hasMember(o[m],P.join(s)):o.hasOwnProperty(m));};
d.prototype.getAccessibilityInfo=function(){var A={};var i=this.getAggregation("_chart");if(i&&i.getAccessibilityInfo){A=i.getAccessibilityInfo();}return A;};
d.prototype._formatDimension=function(v){if(typeof v==="string"){var A=this._getPropertyAnnotation.call(this,this._oChartViewMetadata.dimensionFields[0]),p=this._getSemanticsPattern.call(this,A);if(p){v=D.getInstance({pattern:p}).parse(v);}}if(v instanceof Date){return parseFloat(v.getTime());}else if(!isNaN(v)){return parseFloat(v);}else{this.getAggregation("_chart").enableXIndexing(true);return 0;}};
d.prototype.exit=function(){this._cleanup.call(this);};
d.prototype.setEntitySet=function(e){if(this.getProperty("entitySet")!==e){this.setProperty("entitySet",e,true);this._initializeMetadata.call(this);}return this;};
d.prototype.addAriaLabelledBy=function(A){this.addAssociation("ariaLabelledBy",A,true);this.getAggregation("_chart").addAriaLabelledBy(A);return this;};
d.prototype.removeAriaLabelledBy=function(A){this.removeAssociation("ariaLabelledBy",A,true);this.getAggregation("_chart").removeAriaLabelledBy(A);return this;};
d.prototype.removeAllAriaLabelledBy=function(){this.removeAllAssociation("ariaLabelledBy",true);this.getAggregation("_chart").removeAllAriaLabelledBy();return this;};
d.prototype.setChartType=function(){return this;};
d.prototype.propagateProperties=function(){if(b.prototype.propagateProperties){b.prototype.propagateProperties.apply(this,arguments);}this._initializeMetadata.call(this);};
d.prototype._getBindingPath=function(){if(this.getChartBindingPath()){return this.getChartBindingPath();}else if(this.getEntitySet()){return"/"+this.getEntitySet();}else{return"";}};
d.prototype._getSupportedChartTypes=function(){return this._CHART_TYPE;};
d.prototype.setSize=function(s){if(this.getSize()!==s){if(s===c.Responsive){this.setProperty("isResponsive",true);}else{this.setProperty("isResponsive",false);}this.setProperty("size",s);}return this;};
d.prototype.setIsResponsive=function(i){var s,e=this.getSize();this.setProperty("isResponsive",i);if(i){s=c.Responsive;}else{s=e===c.Responsive?c.Auto:e;}this.setProperty("size",s);return this;};
d.prototype.setAssociation=function(A,i,s){if(b.prototype.setAssociation){b.prototype.setAssociation.apply(this,arguments);}this._updateAssociation.call(this,A);return this;};
return d;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartRadialMicroChart',["sap/ui/comp/library","sap/ui/core/Control","sap/suite/ui/microchart/library","sap/suite/ui/microchart/RadialMicroChart","sap/m/library","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(l,C,M,R,a,S,b){"use strict";
var c=S.extend("sap.ui.comp.smartmicrochart.SmartRadialMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartRadialMicroChart.designtime",properties:{enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false}},associations:{freeText:{type:"sap.m.Label",group:"Misc",multiple:false}}},
renderer:b
});
c.prototype._CHART_TYPE=["Donut"];
c.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","Donut",true);this.setAggregation("_chart",new R(),true);};
c.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);M._passParentContextToChild(this,o);};
c.prototype._createAndBindInnerChart=function(){this._bindProperties();this._updateAssociations.call(this);};
c.prototype._bindProperties=function(){var i=this.getAggregation("_chart");if(this._oDataPointAnnotations.Value&&!this._oDataPointAnnotations.TargetValue){if(this._hasMember(this._oDataPointAnnotations.Value,"Path")){i.bindProperty("percentage",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}}else if(this._hasMember(this,"_oDataPointAnnotations.TargetValue.Path")&&this._hasMember(this,"_oDataPointAnnotations.Value.Path")){i.bindProperty("total",{path:this._oDataPointAnnotations.TargetValue.Path,type:"sap.ui.model.odata.type.Decimal"});i.bindProperty("fraction",{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"});}i.bindProperty("valueColor",{parts:[this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path||"",this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path||""],formatter:this._getValueColor.bind(this)});};
return c;});
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartStackedBarMicroChart',["sap/ui/comp/library","sap/suite/ui/microchart/StackedBarMicroChart","sap/suite/ui/microchart/StackedBarMicroChartBar","sap/ui/core/Control","sap/ui/model/odata/CountMode","sap/ui/core/format/DateFormat","sap/m/library","sap/base/Log","sap/ui/comp/smartmicrochart/SmartMicroChartBase","./SmartMicroChartRenderer"],function(C,S,a,b,c,D,m,L,d,e){"use strict";
var f=d.extend("sap.ui.comp.smartmicrochart.SmartStackedBarMicroChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmicrochart/SmartStackedBarMicroChart.designtime"},
renderer:e
});
f.prototype._CHART_TYPE=["BarStacked"];
f.prototype.init=function(){this._bIsInitialized=false;this._bMetaModelLoadAttached=false;this.setProperty("chartType","BarStacked",true);this.setAggregation("_chart",new S(),true);};
f.prototype.onBeforeRendering=function(){var o=this.getAggregation("_chart");o.setSize(this.getSize(),true);o.setWidth(this.getWidth(),true);o.setHeight(this.getHeight(),true);};
f.prototype._createAndBindInnerChart=function(){if(!(this._oDataPointAnnotations.Value&&this._oDataPointAnnotations.Value.Path)){L.error("Value DataPoint annotation missing! Cannot create the SmartStackedBarMicroChart");return;}var o=this.getAggregation("_chart"),B=new a({value:{path:this._oDataPointAnnotations.Value.Path,type:"sap.ui.model.odata.type.Decimal"}});if(this._oDataPointAnnotations.Criticality&&this._oDataPointAnnotations.Criticality.Path){B.bindProperty("valueColor",{path:this._oDataPointAnnotations.Criticality.Path,formatter:this._mapCriticalityTypeWithColor.bind(this)});}var A=this._getPropertyAnnotation.call(this,this._oDataPointAnnotations.Value.Path);var g=A["com.sap.vocabularies.Common.v1.Text"];if(g&&g.Path){B.bindProperty("displayValue",g.Path);}o.bindAggregation("bars",{path:this._getBindingPath(),template:B,events:{change:this._onBindingDataChange.bind(this)}});};
f.prototype._onBindingDataChange=function(){var B=this.getAggregation("_chart").getBinding("bars");this._updateAssociations(B);};
return f;});
sap.ui.predefine('sap/ui/comp/smartmultiinput/SmartMultiInput',["sap/ui/core/Core","sap/m/library","sap/m/List","sap/m/Popover","sap/m/StandardListItem",'sap/m/MultiInput','sap/m/MultiComboBox','sap/m/Token','sap/m/Tokenizer','sap/ui/comp/smartfield/SmartField','sap/ui/comp/odata/MetadataAnalyser',"sap/ui/model/ParseException","sap/ui/model/ValidateException",'sap/ui/model/BindingMode','sap/ui/comp/odata/ODataType','sap/ui/comp/providers/ValueHelpProvider',"sap/ui/comp/util/FormatUtil","sap/ui/core/format/DateFormat","sap/ui/comp/smartfilterbar/FilterProvider","sap/base/Log","sap/base/util/deepEqual","sap/ui/comp/library","sap/ui/core/library","sap/ui/core/ResizeHandler","sap/m/Link","sap/m/Text","sap/m/FlexBox","sap/m/HBox","sap/base/util/isEmptyObject"],function(C,M,L,P,S,a,b,T,c,d,e,f,V,B,O,g,F,D,h,j,k,l,m,R,n,o,p,H,q){"use strict";var r=l.valuehelpdialog.ValueHelpRangeOperation;var s=l.smartfilterbar.DisplayBehaviour;var t=l.smartfield.TextInEditModeSource;var u=m.ValueState;var v=M.PlacementType;var I="-mInput";var w="-mInputTokenizer";var x="-mInputHBox";var y="-mMoreLink";var z=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");
var A=d.extend("sap.ui.comp.smartmultiinput.SmartMultiInput",{
metadata:{library:"sap.ui.comp",properties:{supportRanges:{type:"boolean",defaultValue:false},supportMultiSelect:{type:"boolean",defaultValue:true},enableODataSelect:{type:"boolean",defaultValue:false},requestAtLeastFields:{type:"string",defaultValue:""},textSeparator:{type:"string",defaultValue:null}},events:{beforeCreate:{allowPreventDefault:true,parameters:{oData:{type:"object"},mParameters:{type:"object"}}},beforeRemove:{allowPreventDefault:true,parameters:{mParameters:{type:"object"}}},tokenUpdate:{parameters:{type:{type:"string"},addedTokens:{type:"sap.m.Token[]"},removedTokens:{type:"sap.m.Token[]"}}},selectionChange:{parameters:{changedItem:{type:"sap.ui.core.Item"},selected:{type:"boolean"}}},selectionFinish:{parameters:{selectedItems:{type:"sap.ui.core.Item[]"}}}}},
renderer:function(i,K){d.getMetadata().getRenderer().render(i,K);if(K._oEmptyDash){var N=K.getTokens().length>0?false:true;K._oEmptyDash.setVisible(N);if(N&&K._oMoreLink){K._oMoreLink.setVisible(false);}}}
});
A.prototype.getTokens=function(){if(this._isReadMode()&&this._oTokenizer){return this._oTokenizer.getTokens();}else if(this._oMultiComboBox&&this._oMultiComboBox.getAggregation("tokenizer")){return this._oMultiComboBox.getAggregation("tokenizer").getTokens();}else if(this._oMultiInput){return this._oMultiInput.getTokens();}return[];};
A.prototype.getValue=function(){return this.getTokens();};
A.prototype._createMultiInput=function(){var i=this._createAttributes();if(this._oMultiComboBox){this._oMultiComboBox.destroy();this._oMultiComboBox=null;}this._oMultiInput=new a(this.getId()+I,i);this._oMultiInput.attachChange(function(N){this._validateValueOnChange(N.getParameter("value"));},this);if(this.getBindingContext()){this._bindMultiInput();}this._oMultiInput.attachTokenUpdate(function(N){this._validateValueOnChange(this._oMultiInput.getValue());var Q=N.getParameters();delete Q.id;if(this.getBinding("value").getBindingMode()!=="TwoWay"||!this.getBindingContext()){if(N.getParameter("removedTokens")){N.getParameter("removedTokens").forEach(function(U){U.destroy();});}}this.fireTokenUpdate(Q);},this);var K={control:this._oMultiInput,onCreate:"_onMultiInputCreate",params:{type:{type:this._getType(),property:this._oFactory._oMetaData.property}}};this._initMultiInputValueHelp(K);return K;};
A.prototype._createMultiComboBox=function(){var i=this._createAttributes();this._oMultiComboBox=new b(this.getId()+"mComboBox",i);if(this.getBindingContext()){this._bindMultiComboBox();}else{this._oMultiInput=this._oMultiComboBox._oTokenizer;}this._oMultiComboBox.attachSelectionChange(function(N){var Q=N.getParameters();delete Q.id;this.fireSelectionChange(Q);},this);this._oMultiComboBox.attachSelectionFinish(function(N){var Q=N.getParameters();delete Q.id;this.oLocalContext=[];this.fireSelectionFinish(Q);},this);var K={control:this._oMultiComboBox,onCreate:"_onCreate",params:{type:{type:this._getType(),property:this._oFactory._oMetaData.property},valuehelp:{annotation:this._getValueListAnnotation(),aggregation:"items",noDialog:true,noTypeAhead:true}}};return K;};
A.prototype._createAttributes=function(){var N={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true,valueStateText:true};var i=this._oFactory.createAttributes(null,this._oFactory._oMetaData.property,N,{event:"change",parameter:"value"});return i;};
function E(K){var N=K.getParameter("tokens"),Q,U,i=0,W=[],X=null,Y;this._onCancel();if(this.oControl instanceof sap.m.MultiInput){this.oControl.setValue("");var Z=this.oControl.getTokens();var $=[];var a1=[];var b1=[];Z.forEach(function(h1){var i1=N.some(function(k1){return h1.getKey()===k1.getKey();});if(!i1){a1.push(h1);}else{var j1=N.filter(function(k1){return h1.getKey()===k1.getKey();})[0];h1.setText(j1.getText());b1.push(h1);}});N.forEach(function(h1){var i1=Z.some(function(j1){return j1.getKey()===h1.getKey();});if(!i1){$.push(h1);b1.push(h1);}});this.oControl.setTokens(b1);var c1=this.oControl.getParent();if(c1.getBindingContext()&&c1.getBinding("value").getBindingMode()==="TwoWay"){var d1=c1._getModel(),e1=c1._getEntitySetName(),f1=d1._resolveGroup(e1),g1=d1.getDeferredGroups().indexOf(f1.groupId)>=0||d1.getDeferredBatchGroups().indexOf(f1.groupId)>=0;if(!g1&&(a1.length||$.length)&&b1.length){c1.setBusyIndicatorDelay(c1.getBusyIndicatorDelay());c1.setBusy(true);}}this.oControl.fireTokenUpdate({type:"tokensChanged",removedTokens:a1,addedTokens:$});i=N.length;while(i--){X=N[i].data("row");if(X){W.push(X);}}}else{if(N[0]){if(this.bIsSingleIntervalRange){Q=N[0].data("range");if(Q){if(this._sType==="datetime"){Y=D.getDateTimeInstance(Object.assign({},this._oDateFormatSettings,{UTC:false}));if(typeof Q.value1==="string"){Q.value1=new Date(Q.value1);}if(Q.operation==="BT"){if(typeof Q.value2==="string"){Q.value2=new Date(Q.value2);}U=Y.format(Q.value1)+"-"+Y.format(Q.value2);}else{U=Y.format(Q.value1);}}else{if(Q.operation==="BT"){U=Q.value1+"-"+Q.value2;}else{U=Q.value1;}}}}else{U=N[0].getKey();}X=N[0].data("row");if(X){W.push(X);}}this.oControl.setValue(U);this.oControl.fireChange({value:U,validated:true});}this._calculateAndSetFilterOutputData(W);}
function G(i){var K,N,Q,U={};if(i&&this.mOutParams){for(K in this.mOutParams){if(K){N=this.mOutParams[K];if(N!==this.sKey){Q=i[N];U[K]=Q;}}}if(U&&!jQuery.isEmptyObject(U)){this.fireEvent("valueListChanged",{"changes":U});}}}
function _(i,K){var N=document.createElement("span");N.style.whiteSpace="nowrap";N.innerHTML=i;N.className="sapMText";K.appendChild(N);var Q=K.childNodes;var U=Q[Q.length-1].offsetWidth;K.removeChild(K.childNodes[Q.length-1]);return U;}
A.prototype._initMultiInputValueHelp=function(i){var K=this._getFilterType(this._oFactory._oMetaData.property.property),N={},Q=this._getDateFormatSettings(),U;this._oFactory._getValueHelpDialogTitle(N);if(this._getValueListAnnotation()){i.params.valuehelp={annotation:this._getValueListAnnotation(),aggregation:"suggestionRows",noDialog:false,noTypeAhead:false,supportMultiSelect:this.getSupportMultiSelect(),supportRanges:this.getBindingContext()?false:this.getSupportRanges(),type:K,displayBehaviour:this._getDisplayBehaviour()};}else if(this.getSupportRanges()&&!this.getBindingContext()){U=new g({fieldName:this._getPropertyName(),preventInitialDataFetchInValueHelpDialog:true,model:this.getModel(),control:this._oMultiInput,title:N.dialogtitle,supportMultiSelect:this.getSupportMultiSelect(),supportRanges:true,type:K,dateFormatSettings:Q,isUnrestrictedFilter:this._isTimeType(K),displayBehaviour:this._getDisplayBehaviour()});U._onOK=E;U._calculateAndSetODataModelOutputData=G;this._oMultiInput.addValidator(this._validateToken.bind(this));}else{this._oMultiInput.setShowValueHelp(false);this._oMultiInput.addValidator(this._validateToken.bind(this));}};
A.prototype._bindMultiInput=function(){var i=this.getBinding("value").getBindingMode();switch(i){case B.OneTime:this._bindMultiInputOneTime();break;case B.OneWay:this._bindMultiInputOneWay();break;case B.TwoWay:default:this._bindMultiInputTwoWay();}};
A.prototype._bindMultiInputOneTime=function(){var i=this;this._readNavigationPropertySet().then(function(K){K.results.forEach(function(N){var Q=N[i._getPropertyName()];var U=i._getDescriptionFieldName();var W=U?N[U]:"";i._oMultiInput.addToken(i._createToken(Q,W));});});};
A.prototype._bindMultiInputOneWay=function(){this._bindMultiInputTokens(this._oMultiInput);};
A.prototype._bindMultiInputTwoWay=function(){this._bindMultiInputTokens(this._oMultiInput);this._oMultiInput.attachTokenUpdate(function(i){i.getParameter("addedTokens").forEach(this._addToken.bind(this));i.getParameter("removedTokens").forEach(this._removeToken.bind(this));},this);};
A.prototype._bindMultiInputTokens=function(i){var N=this._getNavigationPath(),K=this._getSelectExpandParameter();if(!q(K)){i.bindAggregation("tokens",{path:N,parameters:K,factory:this._tokensFactory.bind(this),events:{aggregatedDataStateChange:this._processDataState.bind(this)}});}else{i.bindAggregation("tokens",{path:N,factory:this._tokensFactory.bind(this),events:{aggregatedDataStateChange:this._processDataState.bind(this)}});}};
A.prototype._processDataState=function(i){var K=i.getParameter("dataState"),N=this.getBinding("value");if(!K||!K.getChanges().messages){return;}if(N&&N.bIsBeingDestroyed){return;}var Q=K.getMessages();if(Q.length){var U=false;var W=Q[0];Q.forEach(function(X){if(X.getControlIds().indexOf(this.getId())==-1){X.addControlId(this.getId());U=true;}}.bind(this));this.setValueState(W.getType());this.setValueStateText(W.getMessage());if(U){C.getMessageManager().getMessageModel().checkUpdate(false,true);}}else{this.setValueState(u.None);this.setValueStateText("");}};
A.prototype._getSelectExpandParameter=function(){var i={};if(this.getEnableODataSelect()){i.select=this._addODataSelectParameters();}if(this._oFactory._oMetaData.annotations.text&&this._oFactory._oMetaData.annotations.text.navigationPathHelp){i.expand=this._oFactory._oMetaData.annotations.text.navigationPathHelp;}return i;};
A.prototype._addODataSelectParameters=function(i){var K=this._getPropertyName();if(this._getDescriptionFieldName()){K=K+","+this._getDescriptionFieldName();}if(this.getRequestAtLeastFields()){K=K+","+this.getRequestAtLeastFields();}return K;};
A.prototype._checkFieldGroups=function(){var i,K,N=this.getMode();if(this.getBindingContext()&&this._oFactory&&this._oFactory._oMeta&&(N==="edit")&&!this._bSideEffects){var Q=this._oFactory._oMeta.entitySet,U=this.getModel().getMetaModel().getODataEntitySet(Q),W=this.getModel().getMetaModel().getODataEntityType(U.entityType);K={entitySet:U,entityType:W,path:this._getNavigationPath()};i=this._getView();if(i&&K){this._setFieldGroup(K,i);}}};
A.prototype._bindMultiComboBox=function(){var i=this.getBinding("value").getBindingMode();switch(i){case B.OneTime:this._bindMultiComboBoxOneTime();break;case B.OneWay:this._bindMultiComboBoxOneWay();break;case B.TwoWay:default:this._bindMultiComboBoxTwoWay();}};
A.prototype._bindMultiComboBoxOneTime=function(){var i=this;this._readNavigationPropertySet().then(function(K){var N=K.results.map(function(Q){return Q[i._getPropertyName()];});i._oMultiComboBox.setSelectedKeys(N);});};
A.prototype._bindMultiComboBoxOneWay=function(){this._createAndAttachHelperMultiInput();};
A.prototype._bindMultiComboBoxTwoWay=function(){this._createAndAttachHelperMultiInput();this.oLocalContext=[];this._oMultiComboBox.attachSelectionChange(function(i){var K=i.getParameter("selected"),N=i.getParameter("changedItem"),Q={},U,W,X;this.setValueState(u.None);this.setValueStateText("");if(K){Q[this._getPropertyName()]=N.getKey();X=N.getBindingContext("list")||N.getBindingContext();U=X.getProperty();this._getEntityType().key.propertyRef.forEach(function(Y){if(U&&U[Y.name]){Q[Y.name]=U[Y.name];}});}else{W=this._oMultiInput.getTokens().filter(function(Y){return Y.getKey()===N.getKey();})[0];}if(K){this.oLocalContext.push(this._createEntity(Q));}else{if(W){this._removeEntity(W.getBindingContext());}else{this.oLocalContext.forEach(function(Y,Z){if(Y.getProperty(this._getPropertyName())===N.getKey()){this._getModel().deleteCreatedEntry(Y);this.oLocalContext.splice(Z,1);}}.bind(this));}}},this);};
A.prototype._readNavigationPropertySet=function(){var i=this;return new Promise(function(K,N){var Q=i.getBindingContext(),U=i._getModel(),W=i._getNavigationPath();U.read(W,{context:Q,success:function(X){K(X);},error:function(X){i.setValueState(u.Error);i.setValueStateText(X.responseText);N(X);}});});};
A.prototype._createAndAttachHelperMultiInput=function(){this._oMultiInput=new a();this._oMultiInput.setBindingContext(this.getBindingContext());this._oMultiInput.setModel(this._getModel());this._bindMultiInputTokens(this._oMultiInput);var i=this._oMultiInput.getBinding("tokens");function K(){var N=this._oMultiInput.getTokens().map(function(Q){return Q.getKey();});if(this._oMultiComboBox){this._oMultiComboBox.setSelectedKeys(N);}}K.call(this);i.attachChange(K,this);};
A.prototype._getReadTokenList=function(){if(!this.oReadTokenList){this.oReadTokenList=new L();this.addDependent(this.oReadTokenList);}return this.oReadTokenList;};
A.prototype._getReadTokenListPopover=function(){if(!this.oReadTokenListPopover){this.oReadTokenListPopover=new P({showArrow:true,placement:v.Auto,showHeader:false,contentMinWidth:"auto",content:[this.oReadTokenList]});this.addDependent(this.oReadTokenListPopover);}return this.oReadTokenListPopover;};
A.prototype._handleNMoreIndicatorPress=function(){var K=this.getTokens();if(!K){return;}var N=this._getReadTokenList();var Q=this._getReadTokenListPopover();N.removeAllItems();for(var i=0,U=K.length;i<U;i++){var W=K[i],X=new S({title:W.getText()});N.addItem(X);}if(this._oMoreLink.getDomRef()){Q.openBy(this._oMoreLink.getDomRef());}};
A.prototype._onResize=function(){if(this._isReadMode()&&this._oTokenizer){this._deregisterResizeHandler();this._oTokenizer.setMaxWidth(this.$().width()+"px");this._oTokenizer.setRenderMode("Narrow");this._oTokenizer.scrollToEnd();if(this.getMode()==="display"&&this.getTokens().length>0){this._onDisplayResize();}this._registerResizeHandler();}};
A.prototype._onDisplayResize=function(){var i=this.getDomRef().clientWidth,N=this._iHiddenLabelsCount?_("999 "+z.getText("POPOVER_DEFINE_MORE_LINKS"),this.getDomRef()):0,K=this._iHBoxWidth+N>i,Q=this._iHiddenLabelsCount&&(this._iHBoxWidth+N+this._iFirstHiddenTokenLength<i);if(K||Q){this._oHBox.removeAllItems();this.getTokens().forEach(function(U){this._oHBox.addItem(this._generateDisplayText(U.getText()));}.bind(this));}};
A.prototype.onBeforeRendering=function(){if(d.prototype.onBeforeRendering){d.prototype.onBeforeRendering.apply(this,arguments);}this._deregisterResizeHandler();};
A.prototype.onAfterRendering=function(){if(d.prototype.onAfterRendering){d.prototype.onAfterRendering.apply(this,arguments);}if(this.getMode()==="display"&&this.bControlNotRendered){this._oHBox.removeAllItems();this._oMoreLink.setVisible(false);this.getTokens().forEach(function(i){var K=this._generateDisplayText(i.getText());this._oHBox.addItem(K);},this);}this._registerResizeHandler();};
A.prototype._registerResizeHandler=function(){if(!this._iResizeHandlerId){this._iResizeHandlerId=R.register(this,this._onResize.bind(this));}};
A.prototype._deregisterResizeHandler=function(){if(this._iResizeHandlerId){R.deregister(this._iResizeHandlerId);this._iResizeHandlerId=null;}};
A.prototype._createTokenizer=function(){this._oTokenizer=new c(this.getId()+w,{editable:false,visible:false,width:"100%"});this._oHBox=new H(this.getId()+x);this._oMoreLink=new n(this.getId()+y,{press:this._handleNMoreIndicatorPress.bind(this),ariaLabelledBy:this.getId()+"-label"});this._oEmptyDash=new o({text:"–",visible:true});var N=this._getNavigationPath(),i=this._getSelectExpandParameter();if(this.getBindingContext()){this._bindMultiInputTokens(this._oTokenizer);this._oHBox.bindAggregation("items",{path:N,parameters:i,factory:this._textFactory.bind(this)});}else{this.attachInnerControlsCreated(this._mirrorTokensToDisplayTokenizer,this);}var K=new p({height:"100%",items:[this._oEmptyDash,this._oHBox,this._oMoreLink,this._oTokenizer]});return{control:K,onCreate:"_onCreate"};};
A.prototype._textFactory=function(i,K){var N=K.getProperty(this._getPropertyName()),Q=N instanceof Date?this._formatValue(N):N.toString(),U=this._getDescriptionFieldName(),W=U?K.getProperty(U):"",X=this._getFormattedText(Q,W),Y;if(this.getDomRef()){this.bControlNotRendered=false;Y=this._generateDisplayText(X);}else{this.bControlNotRendered=true;Y=new o({text:X});}if(this._oEmptyDash){this._oEmptyDash.setVisible(false);}return Y;};
A.prototype._generateDisplayText=function(i){var K=this.getDomRef(),N=K.offsetWidth,Q=_("999 "+z.getText("POPOVER_DEFINE_MORE_LINKS"),K),U=new o(),W,X,Y;if(this._oHBox.getItems().length===0){this._iHBoxWidth=0;this._iHiddenLabelsCount=0;this._iFirstHiddenTokenLength=0;}this._oHBox.getItems().filter(function($){return!$.getVisible();}).forEach(function($){this._oHBox.removeItem($);}.bind(this));U.setTooltip(i);i=this._iHBoxWidth===0?i:"\u00a0"+this.getTextSeparator()+"\u00a0"+i;U.setText(i);var Z=_(i,K);this._iHBoxWidth+=Z;if(this._iHiddenLabelsCount===0&&this._iHBoxWidth<=N){this._oMoreLink.setVisible(false);}else{while(this._iHBoxWidth&&this._iHBoxWidth>N-Q){this._iHiddenLabelsCount+=1;if(this._oHBox.getItems()[0]){this._iFirstHiddenTokenLength=_(this._oHBox.getItems()[0].getText(),K);this._iHBoxWidth-=this._iFirstHiddenTokenLength;this._oHBox.removeItem(0);}else{this._iHBoxWidth-=Z;U.setVisible(false);}}if(this._oHBox.getItems().length===0&&this._iHiddenLabelsCount===1&&!U.getVisible()){this._iHiddenLabelsCount=0;this._iHBoxWidth+=Z;U.setVisible(true);this._oMoreLink.setVisible(false);}else{if(this._oHBox.getItems().length>0){W=this._oHBox.getItems()[0];W.setText(W.getTooltip());if(this._oHBox.getItems().length-1>0){X=this._oHBox.getItems()[(this._oHBox.getItems().length-1)];Y="\u00a0"+this.getTextSeparator()+"\u00a0"+X.getTooltip();X.setText(Y);}U.setText(U.getText()+"\u00a0"+this.getTextSeparator()+"\u00a0");}else{U.setText(U.getTooltip()+"\u00a0"+this.getTextSeparator()+"\u00a0");}this._oMoreLink.setVisible(true);this._oMoreLink.setText(this._iHiddenLabelsCount+" "+z.getText("POPOVER_DEFINE_MORE_LINKS"));}}return U;};
A.prototype._mirrorTokensToDisplayTokenizer=function(){if(this.getMode()==="display"&&typeof this._oMultiInput!=="undefined"){this._oTokenizer.removeAllTokens();this._oHBox.removeAllItems();this._oMoreLink.setVisible(false);this._oMultiInput.getTokens().forEach(function(i){var N=new T({text:i.getText(),key:i.getKey()});this._oTokenizer.addToken(N);var K=this._generateDisplayText(i.getText());this._oHBox.addItem(K);},this);}};
A.prototype.getTextSeparator=function(){var i=this.getProperty("textSeparator");if(i){return i;}return z.getText("SMARTMULTIINPUT_SEPARATOR");};
A.prototype._tokensFactory=function(i,K){var N;this.setBusy(false);if(this._oFactory){var Q=K.getProperty(this._getPropertyName());var U=Q instanceof Date?this._formatValue(Q):Q.toString();var W=this._getDescriptionFieldName();var X=W?K.getProperty(W):"";N=this._createToken(U,X,K);}else{N=new T();}return N;};
A.prototype._createToken=function(K,i,N){var Q=this._getFormattedText(K,i);var U;U=new T();U.setKey(K);U.setText(Q);return U;};
A.prototype._addToken=function(i){var K={},N,Q,U,W=i.data("row"),X=i.data("range");K[this._getPropertyName()]=i.getKey();if(W){this._getEntityType().key.propertyRef.forEach(function(Z){if(W[Z.name]){K[Z.name]=W[Z.name];}});if(this._oFactory._aProviders&&this._oFactory._aProviders[0].mOutParams){var Y=this._oFactory._aProviders[0].mOutParams;for(Q in Y){if(Q&&Q!==this._getPropertyName()){U=Y[Q];K[Q]=W[U];}}}}if(X){K["range"]=X;}this.setValueState(u.None);this.setValueStateText("");N=this._createEntity(K);i.setBindingContext(N);};
A.prototype._createEntity=function(i){var K=this._getModel(),N=this._getEntitySetName(),Q=K._resolveGroup(N),U=this._getNavigationPath(),W=this.fireBeforeCreate({oData:i,mParameters:Q});Q.refreshAfterChange=true;Q.context=this.getBindingContext();if(W){Q.properties=i;var X=K.createEntry(U,Q);return X;}};
A.prototype._removeToken=function(i){this._removeEntity(i.getBindingContext());i.destroy();};
A.prototype._removeEntity=function(i){var K=this._getModel(),N=this._getEntitySetName(),Q=K._resolveGroup(N),U=this.fireBeforeRemove({mParameters:Q});var W=K.getDeferredGroups().indexOf(Q.groupId)>=0||K.getDeferredBatchGroups().indexOf(Q.groupId)>=0;if(W&&this._entityHasPendingCreateChange(K,i)){K.deleteCreatedEntry(i);U=false;}Q.refreshAfterChange=true;Q.context=i;if(U){var X="";K.remove(X,Q);}};
A.prototype._entityHasPendingCreateChange=function(i,K){var N=i.getPendingChanges();var Q=i.getKey(K);return!!N[Q]&&k(N[Q],K.getObject());};
A.prototype._getEntityKeyProperties=function(i){var K=this._getModel(),N=K.oMetadata._getEntityTypeByPath(i.getPath()),Q={};N.key.propertyRef.forEach(function(U){var W=U.name;Q[W]=i.getProperty(W);});return Q;};
A.prototype.checkClientError=function(){if(this.getMode()==="display"){return false;}return!this._validateMultiInput();};
A.prototype.getRangeData=function(){var i=this.getTokens(),K=[];i.forEach(function(N){var Q;if(N.data("range")){Q=N.data("range");}else{Q=this._getDefaultTokenRangeData(N);}K.push(Q);},this);return K;};
A.prototype.setRangeData=function(i){if(!this.getBindingContext()){var K=Array.isArray(i)?i:[i];if(!this._oMultiInput){var N=this.getEditable(),Q=this.getEnabled(),U=this.getContextEditable();this.setEditable(true);this.setEnabled(true);this.setContextEditable(true);this.setEditable(N);this.setEnabled(Q);this.setContextEditable(U);}this._oMultiInput.removeAllTokens();K.forEach(function(W){var X=this._getTokenTextFromRangeData(W);var Y=new T({text:X,key:X});Y.data("range",W);this._oMultiInput.addToken(Y);},this);this._mirrorTokensToDisplayTokenizer();}else{j.warning("setRangeData can only be used without property binding");}};
A.prototype._getTokenTextFromRangeData=function(i){var K="";switch(i.operation){case r.EQ:K="="+i.value1;break;case r.GT:K=">"+i.value1;break;case r.GE:K=">="+i.value1;break;case r.LT:K="<"+i.value1;break;case r.LE:K="<="+i.value1;break;case r.Contains:K="*"+i.value1+"*";break;case r.StartsWith:K=i.value1+"*";break;case r.EndsWith:K="*"+i.value1;break;case r.BT:K=i.value1+"...";if(i.value2){K+=i.value2;}break;default:K="";}if(i.exclude&&K!==""){K="!("+K+")";}return K;};
A.prototype._getComputedTextInEditModeSource=function(){var i=this.getTextInEditModeSource();if(this.isPropertyInitial("textInEditModeSource")&&this.getMode()==="edit"){i=t.None;}return i;};
A.prototype.getFilter=function(){var i=[this._getPropertyName()],K={},N=this.getRangeData(),Q;K[this._getPropertyName()]={ranges:N,items:[]};Q=h.generateFilters(i,K);return Q&&Q.length===1&&Q[0];};
A.prototype._getDefaultTokenRangeData=function(i){var K={exclude:false,operation:r.EQ,value1:this._parseValue(i.getKey()),value2:"",keyField:this._getPropertyName()};return K;};
A.prototype._validateToken=function(i){var K=i.text;var N=this._validateValue(K);if(N){var Q=new T({key:K,text:K});if(this.getSupportRanges()){var U=this._getDefaultTokenRangeData(Q);Q.data("range",U);Q.setText("="+K);}return Q;}};
A.prototype._validateMultiInput=function(){if(this._oMultiInput.getValueState()!==u.None){return false;}if(this.getRequired()&&this.getTokens().length===0){this.setValueStateText(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE"));this.setValueState(u.Error);return false;}else{this.setValueState(u.None);this.setValueStateText("");return true;}};
A.prototype._validateValueOnChange=function(i){if(i===""){this.setValueState(u.None);this.setValueStateText("");this._validateMultiInput();}else{this._validateValue(i);}};
A.prototype._parseValue=function(i){return this._getType().parseValue(i,"string");};
A.prototype._formatValue=function(i){return this._getType().formatValue(i,"string");};
A.prototype._validateValue=function(i){try{var K=this._parseValue(i);this._getType().validateValue(K);this.setValueState(u.None);this.setValueStateText("");return true;}catch(N){this.setValueState(u.Error);this.setValueStateText(N.message);var Q={element:this._oMultiInput,property:"value",type:this._getType(),newValue:i,oldValue:null,exception:N,message:N.message};if(N instanceof f){this.fireParseError(Q);}else if(N instanceof V){this.fireValidationError(Q);}return false;}};
A.prototype._getModel=function(){if(this._oFactory){return this._oFactory._oModel;}};
A.prototype._getDateFormatSettings=function(){var i=this.data("dateFormatSettings");if(typeof i==="string"){try{i=JSON.parse(i);}catch(K){}}return i;};
A.prototype._getNavigationPath=function(){return this._oFactory._oMetaData.navigationPath;};
A.prototype._getDescriptionFieldName=function(){var i=this._oFactory._oMetaData.annotations.text;if(i){if(i.navigationPathHelp){return i.navigationPathHelp+"/"+i.property.property.name;}return i.property.property.name;}};
A.prototype._getType=function(){if(!this._oType){var i;if(this._isEdmTimeType()){i=this._getDateFormatSettings();}this._oType=this._oFactory._oTypes.getType(this._oFactory._oMetaData.property,i);}return this._oType;};
A.prototype._isEdmTimeType=function(){var i=["Edm.DateTime","Edm.DateTimeOffset","Edm.Time"];return i.indexOf(this._oFactory._oMetaData.property.property.type)>-1;};
A.prototype._isTimeType=function(i){var K=["date","datetime","time"];return K.indexOf(i)>-1;};
A.prototype._getPropertyName=function(){return this._oFactory._oMetaData.property.property.name;};
A.prototype._getEntitySetName=function(){return this._oFactory._oMetaData.entitySet.name;};
A.prototype._getEntityType=function(){return this._oFactory._oMetaData.entityType;};
A.prototype._getValueListAnnotation=function(){return this._oFactory._oMetaData.annotations.valuelist;};
A.prototype._getDisplayBehaviour=function(){var i=this._oFactory._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour");if(!i||i===s.auto){i=s.descriptionAndId;}return i;};
A.prototype._getFormattedText=function(K,i){var N=this._getDisplayBehaviour();return F.getFormattedExpressionFromDisplayBehaviour(N,K,i);};
A.prototype._getFilterType=function(i){if(O.isNumeric(i.type)){return"numeric";}else if(i.type==="Edm.DateTime"&&i["sap:display-format"]==="Date"){return"date";}else if(i.type==="Edm.String"){return"string";}else if(i.type==="Edm.Boolean"){return"boolean";}else if(i.type==="Edm.Time"){return"time";}else if(i.type==="Edm.DateTimeOffset"){return"datetime";}return undefined;};
A.prototype.setEntitySet=function(){d.prototype.setEntitySet.apply(this,arguments);this.updateBindingContext(false,this._getModel());return this;};
A.prototype.bindProperty=function(i,K){d.prototype.bindProperty.apply(this,arguments);if(i==="value"){this.updateBindingContext(false,this._getModel());}return this;};
A.prototype._checkComboBox=function(){var i=this._oFactory._oSelector.checkComboBox();return i&&i.combobox;};
A.prototype._isReadMode=function(){return!this.getEditable()||!this.getEnabled()||!this.getContextEditable();};
function J(){this._onCreate.apply(this,arguments);if(this._aProviders.length>0){this._aProviders[0]._onOK=E;this._aProviders.forEach(function(i){i._calculateAndSetODataModelOutputData=G;});}}
A.prototype._init=function(){var i=this;d.prototype._init.apply(this,arguments);if(this._oFactory){this._oFactory._createMultiInput=this._createMultiInput.bind(this);this._oFactory._createMultiComboBox=this._createMultiComboBox.bind(this);this._oFactory._createTokenizer=this._createTokenizer.bind(this);this._oFactory._onMultiInputCreate=J;this._oFactory._oSelector.getCreator=function(){if(i._isReadMode()){return"_createTokenizer";}else if(i._checkComboBox()){return"_createMultiComboBox";}else{return"_createMultiInput";}};}};
A.prototype.exit=function(){this._deregisterResizeHandler();if(this._oMultiInput){this._oMultiInput.destroy();}if(this._oMultiComboBox){this._oMultiComboBox.destroy();}if(this._oTokenizer){this._oTokenizer.destroy();}if(this._oHBox){this._oHBox.destroy();}this._oMultiInput=null;this._oMultiComboBox=null;this._oTokenizer=null;this._oHBox=null;d.prototype.exit.apply(this,arguments);};
return A;});
sap.ui.predefine('sap/ui/comp/smarttable/SmartTable',['sap/ui/thirdparty/jquery','sap/m/library','sap/ui/core/library','sap/ui/core/Core','sap/ui/core/ShortcutHintsMixin','sap/ui/core/format/ListFormat','sap/ui/events/KeyCodes','sap/ui/comp/util/DateTimeUtil','sap/ui/comp/util/FilterUtil','sap/m/Column','sap/m/ColumnListItem','sap/m/Label','sap/m/MessageBox','sap/m/Table','sap/m/Text','sap/m/Title','sap/m/OverflowToolbar','sap/m/ToolbarSpacer','sap/m/OverflowToolbarButton','sap/m/ToolbarSeparator','sap/m/VBox','sap/m/FlexItemData','sap/ui/comp/library','sap/ui/comp/providers/TableProvider','sap/ui/comp/smartvariants/SmartVariantManagement','sap/ui/model/Sorter','sap/ui/model/Filter','sap/ui/model/FilterOperator','sap/ui/model/json/JSONModel','sap/ui/table/AnalyticalColumn','sap/ui/table/AnalyticalTable','sap/ui/table/Column','sap/ui/table/Table','sap/ui/table/TreeTable','sap/ui/comp/personalization/Controller','sap/ui/comp/personalization/Util','sap/ui/comp/util/FormatUtil','sap/ui/comp/util/FullScreenUtil','sap/ui/comp/odata/ODataModelUtil','sap/ui/comp/odata/ODataType','sap/ui/comp/state/UIState','sap/ui/comp/smartvariants/PersonalizableInfo','sap/ui/core/format/NumberFormat','sap/ui/Device','sap/base/Log','sap/base/util/deepEqual','sap/base/util/merge',"sap/m/ColumnHeaderPopover",'sap/m/ColumnPopoverActionItem','sap/m/Menu','sap/m/MenuButton','sap/m/MenuItem','sap/m/Button','sap/m/Link','sap/m/MessageStrip','sap/ui/core/InvisibleMessage','sap/ui/util/openWindow','sap/ui/core/theming/Parameters','sap/m/plugins/ColumnResizer',"sap/m/ColumnPopoverSelectListItem","sap/m/table/Util"],function(q,M,c,C,S,L,K,D,F,a,b,d,f,R,T,g,O,h,j,k,V,l,m,n,o,p,r,s,J,A,t,u,v,w,x,P,y,z,B,E,U,G,N,H,I,Q,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1,g1,h1,i1){"use strict";var j1=M.ButtonType;var k1=M.MenuButtonMode;var l1=M.ToolbarDesign;var m1=M.ToolbarStyle;var n1=c.SortOrder;var o1=m.smarttable.InfoToolbarBehavior;
var p1=V.extend("sap.ui.comp.smarttable.SmartTable",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smarttable/SmartTable.designtime",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},smartFilterId:{type:"string",group:"Misc",defaultValue:null},ignoredFields:{type:"string",group:"Misc",defaultValue:null},initiallyVisibleFields:{type:"string",group:"Misc",defaultValue:null},requestAtLeastFields:{type:"string",group:"Misc",defaultValue:null},ignoreFromPersonalisation:{type:"string",group:"Misc",defaultValue:null},tableType:{type:"sap.ui.comp.smarttable.TableType",group:"Misc",defaultValue:null},useVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},showVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},useExportToExcel:{type:"boolean",group:"Misc",defaultValue:true},exportType:{type:"sap.ui.comp.smarttable.ExportType",group:"Misc",defaultValue:"UI5Client"},useTablePersonalisation:{type:"boolean",group:"Misc",defaultValue:true},showTablePersonalisation:{type:"boolean",group:"Misc",defaultValue:true},showRowCount:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:sap.ui.core.TitleLevel.Auto},toolbarStyleClass:{type:"string",group:"Misc",defaultValue:null},enableCustomFilter:{type:"boolean",group:"Misc",defaultValue:true},persistencyKey:{type:"string",group:"Misc",defaultValue:null},useOnlyOneSolidToolbar:{type:"boolean",group:"Misc",defaultValue:false},placeToolbarInTable:{type:"boolean",group:"Misc",defaultValue:false},currentVariantId:{type:"string",group:"Misc",defaultValue:null},editable:{type:"boolean",group:"Misc",defaultValue:false},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},tableBindingPath:{type:"string",group:"Misc",defaultValue:null},editTogglable:{type:"boolean",group:"Misc",defaultValue:false},demandPopin:{type:"boolean",group:"Misc",defaultValue:false},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:false},initialNoDataText:{type:"string",group:"Misc",defaultValue:null},useInfoToolbar:{type:"sap.ui.comp.smarttable.InfoToolbarBehavior",group:"Behavior",defaultValue:o1.Auto},showDetailsButton:{type:"boolean",group:"Misc",defaultValue:false},detailsButtonSetting:{type:"sap.ui.core.Priority[]",group:"Behavior"},enableAutoColumnWidth:{type:"boolean",group:"Misc",defaultValue:false},showPasteButton:{type:"boolean",group:"Behavior",defaultValue:false},enablePaste:{type:"boolean",group:"Behavior",defaultValue:true}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}},aggregations:{customToolbar:{type:"sap.m.Toolbar",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},semanticKeyAdditionalControl:{type:"sap.ui.core.Control",multiple:false},dataStateIndicator:{type:"sap.m.plugins.DataStateIndicator",multiple:false}},events:{initialise:{},beforeRebindTable:{},editToggled:{},dataRequested:{},dataReceived:{},afterVariantInitialise:{},afterVariantSave:{parameters:{currentVariantId:{type:"string"}}},afterVariantApply:{parameters:{currentVariantId:{type:"string"}}},showOverlay:{},fieldChange:{},fullScreenToggled:{parameters:{fullScreen:{type:"boolean"}}},beforeExport:{parameters:{exportSettings:{type:"object"},userExportSettings:{type:"object"}}},beforePaste:{allowPreventDefault:true,parameters:{columnInfos:{type:"object[]"}}},paste:{parameters:{result:{type:"object"}}}}},
renderer:{apiVersion:2},
constructor:function(){this._oTableReady=(function(){var e={};e.promise=new Promise(function(i){e.resolve=i;});return e;}());V.apply(this,arguments);this._aExistingColumns=[];this._aAlwaysSelect=[];this._oTemplate=null;this._mFieldMetadataByKey={};this._createToolbar();this._oP13nDialogSettings=this._getP13nDialogSettings();this._bIsFilterPanelEnabled=(this._oP13nDialogSettings&&this._oP13nDialogSettings.filter)?this._oP13nDialogSettings.filter.visible!==false:true;this._bIsSortPanelEnabled=(this._oP13nDialogSettings&&this._oP13nDialogSettings.sort)?this._oP13nDialogSettings.sort.visible!==false:true;this._createTable();this.attachModelContextChange(this._initialiseMetadata,this);}
});
p1.prototype._getP13nDialogSettings=function(){var i=this.data("p13nDialogSettings");if(typeof this._oP13nDialogSettings==="string"){try{i=JSON.parse(this._oP13nDialogSettings);}catch(e){i=null;}}return i;};
p1.prototype.getDataStateIndicatorPluginOwner=function(){return this._oTable||this._oTableReady.promise;};
p1.prototype.setDataStateIndicator=function(e){this._handeDataStateEvents(this.getDataStateIndicator(),"detach");this.setAggregation("dataStateIndicator",e,true);this._handeDataStateEvents(this.getDataStateIndicator(),"attach");return this;};
p1.prototype._handeDataStateEvents=function(e,i){if(e){e[i+"ApplyFilter"](this._onApplyMessageFilter,this);e[i+"ClearFilter"](this._onClearMessageFilter,this);e[i+"Event"]("filterInfoPress",this._handleInfoToolbarPress,this);}};
p1.prototype.setHeaderLevel=function(e){if(this.getHeaderLevel()===e){return this;}this.setProperty("headerLevel",e,true);this._headerText&&this._headerText.setLevel(e);return this;};
p1.prototype._getP13nFilterMessageStrip=function(){var e,i;if(this._oMessageFilter){i=C.getLibraryResourceBundle("sap.ui.comp");e=new c1({text:i.getText("SMARTTABLE_P13N_FILTER_MESSAGESTRIP"),link:new b1({text:i.getText("SMARTTABLE_MESSAGESTRIP_CLEAR_FILTER"),press:[function(){this._fnClearMessageFilter();e.setVisible(false);},this]})});}return e;};
p1.prototype._onApplyMessageFilter=function(e){this._fnClearMessageFilter=e.getParameter("revert");this._oMessageFilter=e.getParameter("filter");e.preventDefault();this._reBindTable();};
p1.prototype._onClearMessageFilter=function(e){this._oMessageFilter=null;e.preventDefault();this._reBindTable();};
p1.prototype.init=function(){V.prototype.init.call(this);this.addStyleClass("sapUiCompSmartTable");this.setFitContainer(true);this._aColumnKeys=[];this._aDeactivatedColumns=[];this._mLazyColumnMap={};};
p1.prototype._getVariantManagementControl=function(e){var i=null;if(e){if(typeof e==='string'){i=C.byId(e);}else{i=e;}if(i){if(!(i instanceof o)){I.error("Control with the id="+e.getId?e.getId():e+" not of expected type");return null;}}}return i;};
p1.prototype._createVariantManagementControl=function(){if(this._oVariantManagement||(!this.getUseVariantManagement()&&!this.getUseTablePersonalisation())||!this.getPersistencyKey()){return;}var e=new G({type:"table",keyName:"persistencyKey",dataSource:"TODO"});e.setControl(this);var i=this.getSmartVariant();if(i){this._oVariantManagement=this._getVariantManagementControl(i);}else if(this._oSmartFilter&&this._oSmartFilter.data("pageVariantPersistencyKey")){i=this._oSmartFilter.getSmartVariant();if(i){this._oVariantManagement=this._getVariantManagementControl(i);}}else{this._oVariantManagement=new o(this.getId()+"-variant",{showShare:true});}if(this._oVariantManagement){this._oVariantManagement.addPersonalizableControl(e);this._oVariantManagement.attachSave(this._variantSaved,this);this._oVariantManagement.attachAfterSave(this._variantAfterSave,this);this._oVariantManagement.initialise(this._variantInitialised,this);}};
p1.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}this.fireAfterVariantInitialise();if(this._oVariantManagement&&!this._oVariantManagement.getEnabled()){this._checkAndTriggerBinding();}};
p1.prototype._variantSaved=function(){if(this._oPersController){this._oPersController.setPersonalizationData(this._oCurrentVariant,true);}};
p1.prototype._variantAfterSave=function(){this.fireAfterVariantSave({currentVariantId:this.getCurrentVariantId()});};
p1.prototype.setTableBindingPath=function(e){this.setProperty("tableBindingPath",e,true);return this;};
p1.prototype.setShowTablePersonalisation=function(e){this.setProperty("showTablePersonalisation",e,true);if(this._oTablePersonalisationButton){this._oTablePersonalisationButton.setVisible(e);}return this;};
p1.prototype.setUseVariantManagement=function(e){this.setProperty("useVariantManagement",e,true);if(this._oPersController){this._oPersController.setResetToInitialTableState(!e);}return this;};
p1.prototype.setShowVariantManagement=function(e){this.setProperty("showVariantManagement",e,true);if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(e);if(this._oSeparator){this._oSeparator.setVisible(e);}}return this;};
p1.prototype.setToolbarStyleClass=function(e){this.setProperty("toolbarStyleClass",e,true);return this;};
p1.prototype.setCustomToolbar=function(e){this._oCustomToolbar=e;return this;};
p1.prototype.getCustomToolbar=function(){return this._oCustomToolbar;};
p1.prototype.setHeader=function(e){var i=this.getProperty("header"),q1;this.setProperty("header",e,true);if(this.bIsInitialised&&this._oToolbar){q1=(!i===!e);if(!q1){this._createToolbarContent();}else{this._refreshHeaderText();}}return this;};
p1.prototype.setShowRowCount=function(e){this.setProperty("showRowCount",e,true);this._refreshHeaderText();return this;};
p1.prototype.setEditable=function(e){if((e=!!e)==this.getEditable()){return this;}this.setProperty("editable",e,true);if(this._oEditModel){this._oEditModel.setProperty("/editable",e);}if(this._oEditButton){this._oEditButton.setIcon(e?"sap-icon://display":"sap-icon://edit");}if(this._isMobileTable&&this._oTable.setKeyboardMode){this._oTable.setKeyboardMode(e?"Edit":"Navigation");}this._updateVisibleColumnsWidthForEdit();return this;};
p1.prototype.setDemandPopin=function(e){var i=this.getDemandPopin();if(i===e){return this;}this.setProperty("demandPopin",e,true);if(this.bIsInitialised){if(e){this._updateColumnsPopinFeature();}else{this._deactivateColumnsPopinFeature();}}return this;};
p1.prototype._refreshHeaderText=function(){if(!this._headerText){return;}if(!this._oNumberFormatInstance){this._oNumberFormatInstance=N.getFloatInstance();}var i;var e=this.getHeader();this._headerText.setVisible(!!e);if(this.getShowRowCount()){i=this._getRowCount(true);if(i>0){var q1=this._oNumberFormatInstance.format(i);e+=" ("+q1+")";}}this._headerText.setText(e);this._updateAriaLabelledByInfo();if(this._bUpdateTableAnnouncement){this._bUpdateTableAnnouncement=false;this._updateTableAnnouncement(i);}};
p1.prototype._updateAriaLabelledByInfo=function(){var e=this._headerText.getId();if(this._oTable&&this._oTable.addAriaLabelledBy){if(this._headerText.getVisible()){if(this._oTable.getAriaLabelledBy().indexOf(e)===-1){this._oTable.addAriaLabelledBy(e);}}else{this._oTable.removeAriaLabelledBy(e);}}};
p1.prototype._updateTableAnnouncement=function(i){var e=d1.getInstance();if(e){var q1=C.getLibraryResourceBundle("sap.ui.comp");var r1=this.getHeader();if(i===undefined&&this._getRowCount(false)>0){e.announce(q1.getText("SMARTTABLE_ANNOUNCEMENT_TABLE_UPDATED",[r1]));}else if(i>1){e.announce(q1.getText("SMARTTABLE_ANNOUNCEMENT_TABLE_UPDATED_MULT",[r1,i]));}else if(i===1){e.announce(q1.getText("SMARTTABLE_ANNOUNCEMENT_TABLE_UPDATED_SING",[r1,i]));}else{e.announce(q1.getText("SMARTTABLE_ANNOUNCEMENT_TABLE_UPDATED_NOITEMS",[r1]));}}};
p1.prototype._addFullScreenButton=function(){if(this._oFullScreenButton){this._oToolbar.removeContent(this._oFullScreenButton);}if(this.getShowFullScreenButton()){if(!this._oFullScreenButton){this._oFullScreenButton=new j(this.getId()+"-btnFullScreen",{press:[function(){this._toggleFullScreen(!this.bFullScreen);},this]});this._oFullScreenButton.addStyleClass("sapUiCompSmartTableToolbarContent");}this._renderFullScreenButton();this._oToolbar.addContent(this._oFullScreenButton);}};
p1.prototype._addPasteButton=function(){var e=this.getId()+"-btnPaste";var i=C.byId(e);if(i){this._oToolbar.removeContent(i);}if(this.getShowPasteButton()){if(!i){i=new j(e);i.addStyleClass("sapUiCompSmartTableToolbarContent");sap.ui.require(["sap/m/plugins/PasteProvider"],function(q1){i.addDependent(new q1({pasteFor:this._oTable.getId()}));}.bind(this));}i.setEnabled(this.getEnablePaste());this._oToolbar.addContent(i);}};
p1.prototype._createToolbar=function(){var e=null;if(!this._oToolbar){e=this.getCustomToolbar();if(e){this._oToolbar=e;}else{this._oToolbar=new O({design:l1.Transparent,style:this.getTableType()==="ResponsiveTable"?m1.Standard:m1.Clear});this._oToolbar.addStyleClass("sapUiCompSmartTableToolbar");if(this.getToolbarStyleClass()){this._oToolbar.addStyleClass(this.getToolbarStyleClass());}}this._oToolbar.setLayoutData(new l({shrinkFactor:0}));}};
p1.prototype._toggleShowHideDetails=function(e){if(!this._oShowHideDetailsButton||(e===this.bHideDetails)){return;}this.bHideDetails=e;if(this.bHideDetails){this._oTable.setHiddenInPopin(this._getImportanceToHide());}else{this._oTable.setHiddenInPopin([]);}this._renderShowHideDetailsButton();};
p1.prototype._getImportanceToHide=function(){var e=this.getDetailsButtonSetting()||[];var i=[];if(e.length){i=e;}else{i=H.system.phone?["Low","Medium"]:["Low"];}return i;};
p1.prototype._renderShowHideDetailsButton=function(){var e=C.getLibraryResourceBundle("sap.ui.comp"),i;i=this.bHideDetails?e.getText("TABLE_SHOWDETAILS_TEXT"):e.getText("TABLE_HIDEDETAILS_TEXT");this._oShowHideDetailsButton.setTooltip(i);this._oShowHideDetailsButton.setText(i);};
p1.prototype._toggleFullScreen=function(e,i){if(!this._oFullScreenButton||(e===this.bFullScreen&&!i)){return;}this.bFullScreen=e;z.toggleFullScreen(this,this.bFullScreen,this._oFullScreenButton,this._toggleFullScreen);this._renderFullScreenButton();this.fireFullScreenToggled({fullScreen:e});};
p1.prototype._renderFullScreenButton=function(){var e=C.getLibraryResourceBundle("sap.ui.comp"),i;i=this.bFullScreen?e.getText("CHART_MINIMIZEBTN_TOOLTIP"):e.getText("CHART_MAXIMIZEBTN_TOOLTIP");this._oFullScreenButton.setTooltip(i);this._oFullScreenButton.setText(i);this._oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
p1.prototype._createToolbarContent=function(){if(!this._oToolbar){this._createToolbar();}this._addVariantManagementToToolbar();this._addSeparatorToToolbar();this._addHeaderToToolbar();this._addSpacerToToolbar();this._addPasteButton();this._addEditTogglableToToolbar();this._addShowHideDetailsButton();this._addTablePersonalisationToToolbar();this._addExportToExcelToToolbar();this._addFullScreenButton();this._bToolbarInsertedIntoItems=true;this._placeToolbar();};
p1.prototype._placeToolbar=function(){if(!this.getPlaceToolbarInTable()){this.insertItem(this._oToolbar,0);}else if(this._isMobileTable){this._oTable.setHeaderToolbar(this._oToolbar);}else{this._oTable.addExtension(this._oToolbar);}};
p1.prototype.getToolbar=function(){return this._oToolbar;};
p1.prototype._addEditTogglableToToolbar=function(){var e;if(this._oEditButton){this._oToolbar.removeContent(this._oEditButton);}if(this.getEditTogglable()){if(!this._oEditButton){e=C.getLibraryResourceBundle("sap.ui.comp").getText("TABLE_EDITTOGGLE_TOOLTIP");this._oEditButton=new j(this.getId()+"-btnEditToggle",{icon:this.getEditable()?"sap-icon://display":"sap-icon://edit",text:e,tooltip:e,press:[function(){var i=this.getEditable();i=!i;this.setEditable(i,true);this.fireEditToggled({editable:i});},this]});this._oEditButton.addStyleClass("sapUiCompSmartTableToolbarContent");}this._oToolbar.addContent(this._oEditButton);}};
p1.prototype._addHeaderToToolbar=function(){if(this._headerText){this._oToolbar.removeContent(this._headerText);}if(!this._headerText){this._headerText=new g(this.getId()+"-header");this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartTableHeader");this._headerText.addStyleClass("sapUiCompSmartTableToolbarContent");this._headerText.setLevel(this.getHeaderLevel());}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);};
p1.prototype._addSeparatorToToolbar=function(){if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);}if(this.getHeader()&&this.getUseVariantManagement()&&this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){if(!this._oSeparator){this._oSeparator=new k(this.getId()+"-toolbarSeperator");if(!this.getShowVariantManagement()){this._oSeparator.setVisible(false);}}this._oToolbar.insertContent(this._oSeparator,0);}if(this._oToolbar){this._oToolbar.addStyleClass("sapMTBHeader-CTX");}};
p1.prototype._addVariantManagementToToolbar=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oToolbar.removeContent(this._oVariantManagement);if(this.getUseVariantManagement()){this._oToolbar.insertContent(this._oVariantManagement,0);this._oVariantManagement.addStyleClass("sapUiCompSmartTableToolbarContent");if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(this.getShowVariantManagement());}}}};
p1.prototype._addSpacerToToolbar=function(){var e=false,q1=this._oToolbar.getContent(),i,r1;if(q1){r1=q1.length;i=0;for(i;i<r1;i++){if(q1[i]instanceof h){e=true;break;}}}if(!e){this._oToolbar.addContent(new h(this.getId()+"-toolbarSpacer"));}};
p1.prototype._createShowHideDetailsButton=function(){this._oShowHideDetailsButton=new a1(this.getId()+"-btnShowHideDetails",{visible:false,press:[function(){this._toggleShowHideDetails(!this.bHideDetails);},this]});this._oShowHideDetailsButton.addStyleClass("sapUiCompSmartTableToolbarContent");};
p1.prototype._addShowHideDetailsButton=function(){if(this._oShowHideDetailsButton){this._oToolbar.removeContent(this._oShowHideDetailsButton);}if(this.getShowDetailsButton()&&this._isMobileTable){this.bHideDetails=true;if(!this._oShowHideDetailsButton){this._createShowHideDetailsButton();}this._renderShowHideDetailsButton();this._oToolbar.addContent(this._oShowHideDetailsButton);}};
p1.prototype._addTablePersonalisationToToolbar=function(){var e;if(this._oTablePersonalisationButton){this._oToolbar.removeContent(this._oTablePersonalisationButton);}if(this.getUseTablePersonalisation()){if(!this._oTablePersonalisationButton){e=C.getLibraryResourceBundle("sap.ui.comp").getText("TABLE_PERSOBTN_TOOLTIP");this._oTablePersonalisationButton=new j(this.getId()+"-btnPersonalisation",{icon:"sap-icon://action-settings",text:e,tooltip:e,press:[function(i){this._oPersController.openDialog();},this]});S.addConfig(this._oTablePersonalisationButton,{messageBundleKey:H.os.macintosh?"SMARTTABLE_SHORTCUT_SHOW_SETTINGS_MAC":"SMARTTABLE_SHORTCUT_SHOW_SETTINGS"},this);this._oTablePersonalisationButton.addStyleClass("sapUiCompSmartTableToolbarContent");this._oTablePersonalisationButton.setVisible(this.getShowTablePersonalisation());}this._oToolbar.addContent(this._oTablePersonalisationButton);}};
p1.prototype._triggerGWExport=function(){var e=C.getLibraryResourceBundle("sap.ui.comp");var i=function(){var r1=this._getRowBinding();var s1=r1.getDownloadUrl("xlsx");s1=this._removeExpandParameter(s1);var t1={url:s1};this.fireBeforeExport({exportSettings:t1});e1(t1.url);}.bind(this);var q1=this._getRowCount(true);if(q1>10000){f.confirm(e.getText("DOWNLOAD_CONFIRMATION_TEXT",q1),{actions:[f.Action.YES,f.Action.NO],onClose:function(r1){if(r1===f.Action.YES){i();}}});}else{i();}};
p1.prototype._addExportToExcelToToolbar=function(){if(this._oUseExportToExcel){this._oToolbar.removeContent(this._oUseExportToExcel);}if(!this.getUseExportToExcel()){return;}if(!this._oUseExportToExcel){var e=this.getId()+"-btnExcelExport";var i="sap-icon://excel-attachment";var q1=C.getLibraryResourceBundle("sap.ui.comp");if(this.getExportType()==="UI5Client"){this._oUseExportToExcel=this._createClientExportButton(e,i);}if(this._bTableSupportsExcelExport&&this.getExportType()==="GW"){var r1;r1=q1.getText("TABLE_EXPORT_TEXT");this._oUseExportToExcel=new j(e,{icon:i,text:r1,tooltip:r1,press:[this._triggerGWExport,this]});}this._setExcelExportEnableState();if(this._oUseExportToExcel){this._oUseExportToExcel.addStyleClass("sapUiCompSmartTableToolbarContent");}}this._oToolbar.addContent(this._oUseExportToExcel);};
p1.prototype._openExportSettings=function(){var e=this;this._loadExportLibrary().then(function(){sap.ui.require(['sap/ui/export/ExportUtils'],function(i){i.getExportSettingsViaDialog(e._cachedExcelSettings,e).then(function(q1){e._cachedExcelSettings=q1;e._triggerUI5ClientExport(q1);},function(){});});});};
p1.prototype._createClientExportButton=function(e,i){var q1=C.getLibraryResourceBundle("sap.ui.comp");var r1={fileName:this.getHeader()};if(!this._cachedExcelSettings){this._cachedExcelSettings=r1;}var s1=new $(e,{icon:i,tooltip:q1.getText("TABLE_EXPORT_TEXT"),type:j1.Ghost,buttonMode:k1.Split,useDefaultActionOnly:true,defaultAction:[function(){this._triggerUI5ClientExport(r1);},this],menu:[new Z({items:[new _({text:q1.getText("QUICK_EXPORT"),press:[function(){this._triggerUI5ClientExport(r1);},this]}),new _({text:q1.getText("EXPORT_WITH_SETTINGS"),press:[this._openExportSettings,this]})]})]});S.addConfig(s1._getButtonControl(),{addAccessibilityLabel:true,messageBundleKey:H.os.macintosh?"SMARTTABLE_SHORTCUT_EXPORT_TO_EXCEL_MAC":"SMARTTABLE_SHORTCUT_EXPORT_TO_EXCEL"},this);return s1;};
p1.prototype.onkeydown=function(e){if(e.isMarked()){return;}if((e.metaKey||e.ctrlKey)&&e.shiftKey&&e.which===K.E){if(this.getUseExportToExcel()&&this.getExportType()==="UI5Client"&&this._oUseExportToExcel&&this._oUseExportToExcel.getEnabled()){this._openExportSettings();e.setMarked();e.preventDefault();}}else if((e.metaKey||e.ctrlKey)&&e.which===K.COMMA){if(this.getUseTablePersonalisation()&&this._oTablePersonalisationButton&&this._oTablePersonalisationButton.getVisible()){this._oPersController.openDialog();e.setMarked();e.preventDefault();}}};
p1.prototype._loadExportLibrary=function(){if(!this._oExportLibLoadPromise){this._oExportLibLoadPromise=C.loadLibrary("sap.ui.export",true);}return this._oExportLibLoadPromise;};
p1.prototype._getColumnLabel=function(e){var i,q1;if(typeof e==='string'){i=e;e=this._getColumnByKey(e);}if(!e){var r1=this._oTableProvider.getFieldLabel(this.getEntitySet(),i);if(r1&&r1.match(/{@i18n>.+}/gi)){var s1=this.getModel("@i18n");if(s1&&s1.isA("sap.ui.model.resource.ResourceModel")){return s1.getProperty(r1.slice(1,-1).substring(6))||r1;}}return r1;}if(e.getLabel){q1=e.getLabel();}else if(e.getHeader){q1=e.getHeader();}return(q1&&q1.getText)?q1.getText():null;};
p1.prototype._getColumnWidthNumber=function(e){if(e.indexOf("em")>0){return Math.round(parseFloat(e));}if(e.indexOf("px")>0){return Math.round(parseInt(e)/16);}return"";};
p1.prototype._triggerUI5ClientExport=function(e){var i=this._createExportColumnConfiguration(e);if(!i||!i.length){f.error(C.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_COLS_EXPORT"),{styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});return;}var q1=this._getRowBinding();var r1=this._getColumnLabel.bind(this);var s1={workbook:{columns:i,hierarchyLevel:(this._isTreeTable&&q1.getTreeAnnotation)?q1.getTreeAnnotation("hierarchy-level-for"):undefined},dataSource:q1,fileName:e?e.fileName:this.getHeader()};this._loadExportLibrary().then(function(){sap.ui.require(['sap/ui/export/ExportUtils','sap/ui/export/Spreadsheet'],function(t1,u1){var v1=Promise.resolve();if(e.includeFilterSettings){v1=t1.parseFilterConfiguration(q1,r1).then(function(w1){if(e.includeFilterSettings&&w1){s1.workbook.context={metaSheetName:w1.name,metainfo:[w1]};}});}v1.then(function(){var w1={splitCells:false,includeFilterSettings:false};if(e){w1.splitCells=e.splitCells;w1.includeFilterSettings=e.includeFilterSettings;}var x1=new u1(s1);x1.attachBeforeExport(function(z1){this.fireBeforeExport({exportSettings:z1.getParameter('exportSettings'),userExportSettings:w1});},this);var y1=function(){x1.destroy();};x1.build().then(y1,y1);}.bind(this));}.bind(this));}.bind(this));};
p1.prototype._createExportColumnConfiguration=function(e){var q1,i,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1,C1,D1,E1,F1,G1,H1=[],I1,J1,K1;var L1=e&&e.splitCells;var M1=function(O1,P1){return'{'+(parseInt(P1)-1)+'}';};q1=this._isMobileTable?this._oTable.getColumns(true):this._oTable.getColumns();r1=q1.length;K1=this.data("useUTCDateTime");if(K1!=null){if(typeof K1==="string"){I1=K1==="true";}else if(typeof K1==="boolean"){I1=K1;}}for(i=0;i<r1;i++){v1=null;w1=null;x1=null;s1=q1[i];J1=I1;if(s1.getVisible()){t1=s1.data("p13nData");if(s1.getLeadingProperty){v1=s1.getLeadingProperty();}if(!v1&&t1){v1=t1["leadingProperty"];}if(Array.isArray(v1)){v1=v1[0];}if(v1){u1=this._getColumnLabel(s1);C1=s1.getWidth().toLowerCase()||t1.width||"";C1=this._getColumnWidthNumber(C1);D1=t1.type==="numeric"?"Number":t1.type;G1=t1.typeInstance;F1=null;E1=null;if(t1.unit){D1=t1.isCurrency?"Currency":"Number";if(L1){x1=t1.unit;}}else if(G1&&G1.isA("sap.ui.comp.odata.type.FiscalDate")){var N1=G1.getFormatter();w1=N1.getTemplate().replace(/\$(\d)/g,M1);E1=N1.getRegExPattern().toString().slice(1,-1);D1="String";}else if(D1!="date"&&E.isDateOrTime(t1.edmType)){D1=E.getTypeName(t1.edmType);if(D1==="DateTimeOffset"){D1="DateTime";J1=false;}}else if(D1==="stringdate"){D1="Date";E1="YYYYMMDD";}else if(D1==="boolean"){D1="Boolean";F1=E.getType(t1.edmType);}else if(t1.description){D1="String";if(!L1){w1=y.getFormattedExpressionFromDisplayBehaviour(t1.displayBehaviour,"{0}","{1}");}else if(t1.displayBehaviour==="descriptionOnly"){v1=t1.description;}else if(t1.displayBehaviour!=="idOnly"){x1=t1.description;}}else if(t1.isDigitSequence){D1="Number";}else if(D1==="string"){D1="String";}else if(D1==="date"){D1="Date";}else if(D1==="time"){D1="Time";}H1.push({columnId:s1.getId(),property:t1.description&&!L1?[v1,t1.description]:v1,type:D1,inputFormat:E1,label:u1?u1:v1,width:C1,textAlign:s1.getHAlign(),template:w1,trueValue:(D1==="Boolean"&&F1)?F1.formatValue(true,"string"):undefined,falseValue:(D1==="Boolean"&&F1)?F1.formatValue(false,"string"):undefined,unitProperty:(D1==="Currency"||(D1==="Number"&&!L1))?t1.unit:undefined,displayUnit:D1==="Currency"&&!L1,precision:t1.precision,scale:t1.scale,autoScale:D1==="Number",utc:(D1==="DateTime"&&J1!=null)?J1:undefined});if(x1){y1=this._getColumnByKey(x1);z1=u1;u1=null;if(y1){u1=this._getColumnLabel(y1);C1=y1.getWidth().toLowerCase()||"";C1=this._getColumnWidthNumber(C1);B1=y1.getHAlign();}else{A1=this._mFieldMetadataByKey[x1];if(A1){u1=A1.label;C1=A1.width;}}H1.push({columnId:s1.getId()+"-additionalProperty",property:x1,type:"String",label:u1||(z1?z1+" (2)":x1),width:C1,textAlign:B1});}}}}return H1;};
p1.prototype._removeExpandParameter=function(e){var i=e.replace(new RegExp("([\\?&]\\$expand=[^&]+)(&?)"),function(q1,r1,s1){return s1?r1.substring(0,1):"";});return i;};
p1.prototype._getRowCount=function(e){var i=this._getRowBinding();if(!i){return e?undefined:0;}var q1;if(!e){q1=i.getLength();}else if(typeof i.getCount==='function'){q1=i.getCount();}else if(!i.isA('sap.ui.model.TreeBinding')&&typeof i.isLengthFinal==='function'&&i.isLengthFinal()){q1=i.getLength();}if(q1<0||q1==="0"){q1=0;}return q1;};
p1.prototype._setExcelExportEnableState=function(){if(this._oUseExportToExcel){var i=this._getRowCount();this._oUseExportToExcel.setEnabled(i>0);}};
p1.prototype._createPersonalizationController=function(){if(this._oPersController||!this.getUseTablePersonalisation()){return;}var e=this._oP13nDialogSettings;e=this._setIgnoreFromPersonalisationToSettings(e);e=e||{};if(this._isTreeTable){e.stableColumnKeys=[];e.stableColumnKeys.push(this._aColumnKeys[0]);}if(this._bIsFilterPanelEnabled){e.filter=e.filter?e.filter:{};e.filter.createMessageStrip=this._getP13nFilterMessageStrip.bind(this);}this._oPersController=new x(this.getId()+"-persoController",{table:this._oTable,columnKeys:this._aColumnKeys,setting:e,resetToInitialTableState:!this.getUseVariantManagement(),beforePotentialTableChange:[this._beforePersonalisationModelDataChange,this],afterPotentialTableChange:[this._afterPersonalisationModelDataChange,this],afterP13nModelDataChange:[this._personalisationModelDataChange,this],requestColumns:[this._personalisationRequestColumns,this]});this._oPersController.attachDialogAfterClose(function(i){if(this._fGetDataForKeyUser){if(i.getParameter("cancel")){this._fGetDataForKeyUser([]);}this._cleanUpKeyUser();}}.bind(this));if(this._aDeactivatedColumns.length>0){this._oPersController.addToSettingIgnoreColumnKeys(this._aDeactivatedColumns);}};
p1.prototype.getVariantManagement=function(){return this._oVariantManagement;};
p1.prototype.openDialogForKeyUser=function(e,i){this._fGetDataForKeyUser=i;this._oPersController.openDialog({showReset:false,useAvailablePanels:true,styleClass:e});};
p1.prototype._cleanUpKeyUser=function(){this._fGetDataForKeyUser=null;};
p1.prototype._createKeyUserChange=function(){return[{selectorControl:this._oVariantManagement._getPersoController(),changeSpecificData:{changeType:"variantContent",content:{key:this._oVariantManagement.getSelectionKey(),persistencyKey:this.getPersistencyKey(),content:this.fetchVariant()}}}];};
p1.prototype._setIgnoreFromPersonalisationToSettings=function(e){var i=P.createArrayFromString(this.getIgnoreFromPersonalisation());if(i.length){if(!e){e={};}var q1=function(r1){if(!e[r1]){e[r1]={};}e[r1].ignoreColumnKeys=i;};q1("filter");q1("sort");q1("group");q1("columns");}return e;};
p1.prototype._getRowBinding=function(){if(this._oTable){return this._oTable.getBinding(this._sAggregation);}};
p1.prototype.setEntitySet=function(e){this.setProperty("entitySet",e,true);this._initialiseMetadata();return this;};
p1.prototype._initialiseMetadata=function(e){var i=this,q1=i;if(e){q1=e.getSource();}if(!q1.bIsInitialised){B.handleModelInit(q1,q1._onMetadataInitialised,true);}};
p1.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(this.bIsInitialised){return;}this._updateInitialColumns();this._createTableProvider();if(!this._oTableProvider){return;}this._aTableViewMetadata=this._oTableProvider.getTableViewMetadata();if(!this._aTableViewMetadata){return;}if(this.getEnableAutoColumnWidth()){this._oTable.getColumns().forEach(this._setWidthForCustomColumn,this);}if(!this._isMobileTable&&this.getDemandPopin()){this.setDemandPopin(false);I.error("use SmartTable property 'demandPopin' only  with responsive table, property has been set to false");}this.detachModelContextChange(this._initialiseMetadata,this);this.bIsInitialised=true;var e=this._getP13nDialogSettings();if(!Q(this._oP13nDialogSettings,e)){this._oP13nDialogSettings=e;this._bIsFilterPanelEnabled=(this._oP13nDialogSettings&&this._oP13nDialogSettings.filter)?this._oP13nDialogSettings.filter.visible!==false:true;this._bIsSortPanelEnabled=(this._oP13nDialogSettings&&this._oP13nDialogSettings.sort)?this._oP13nDialogSettings.sort.visible!==false:true;this._attachTableCustomFilter();}this._bTableSupportsExcelExport=this._oTableProvider.getSupportsExcelExport();this._bMultiUnitBehaviorEnabled=this._oTableProvider.getMultiUnitBehaviorEnabled();this._listenToSmartFilter();this._createVariantManagementControl();this._createToolbarContent();this._aAlwaysSelect=this._oTableProvider.getRequestAtLeastFields();this._createContent();this._createPersonalizationController();this._oEditModel=new J({editable:this.getEditable()});this.setModel(this._oEditModel,"sm4rtM0d3l");this.attachEvent("_change",this._onPropertyChange,this);this.fireInitialise();if(!this._oVariantManagement||(this._oVariantManagement&&this._bVariantInitialised)){this._checkAndTriggerBinding();}};
p1.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){if(this._oSmartFilter.isInitialised()){this._oSmartFilter.search();}else{this._oSmartFilter.attachEventOnce("initialise",function(){this._oSmartFilter.search();},this);}}else{this._reBindTable();}}}};
p1.prototype._aStaticProperties=["entitySet","ignoredFields","initiallyVisibleFields","ignoreFromPersonalisation","tableType","useTablePersonalisation","enableAutoBinding","persistencyKey","smartFilterId","showDetailsButton","enableAutoColumnWidth"];p1.prototype._aToolbarRelatedProperties=["useExportToExcel","exportType","showFullScreenButton","showPasteButton","editTogglable","placeToolbarInTable"];
p1.prototype._onPropertyChange=function(e){var i=e.getParameter("name");if(this._aStaticProperties.indexOf(i)>-1){I.error("Property "+i+" cannot be changed after the SmartTable with id "+this.getId()+" is initialised");}if(this._oToolbar&&this._aToolbarRelatedProperties.indexOf(i)>-1){if(i==="exportType"&&this._oUseExportToExcel){this._oUseExportToExcel.destroy();this._oUseExportToExcel=null;}this._createToolbarContent();}};
p1.prototype._createTableProvider=function(){var e,i,q1,r1;i=this.getEntitySet();q1=this.getIgnoredFields();e=this.getModel();r1=this.data("preserveDecimals");if(r1!=null){if(r1==false||(typeof r1==="string"&&r1==="false")){this._bPreserveDecimals=false;}else{this._bPreserveDecimals=true;}}else{this._bPreserveDecimals=true;}if(e&&i){if(this._aExistingColumns.length){if(q1){q1+=","+this._aExistingColumns.toString();}else{q1=this._aExistingColumns.toString();}}this._oTableProvider=new n({entitySet:i,ignoredFields:q1,initiallyVisibleFields:this.getInitiallyVisibleFields(),isEditableTable:this.getEditable(),smartTableId:this.getId(),isAnalyticalTable:!!this._isAnalyticalTable,isMobileTable:!!this._isMobileTable,dateFormatSettings:this.data("dateFormatSettings"),useUTCDateTime:this.data("useUTCDateTime"),currencyFormatSettings:this.data("currencyFormatSettings"),defaultDropDownDisplayBehaviour:this.data("defaultDropDownDisplayBehaviour"),useSmartField:this.data("useSmartField"),useSmartToggle:this.data("useSmartToggle"),skipAnnotationParse:this.data("skipAnnotationParse"),lineItemQualifier:this.data("lineItemQualifier"),presentationVariantQualifier:this.data("presentationVariantQualifier"),enableInResultForLineItem:this.data("enableInResultForLineItem"),_semanticKeyAdditionalControl:this.getAggregation("semanticKeyAdditionalControl"),model:e,semanticObjectController:this.getSemanticObjectController(),showDetailsButton:this.getShowDetailsButton(),enableAutoColumnWidth:this.getEnableAutoColumnWidth(),preserveDecimals:this._bPreserveDecimals});}};
p1.prototype._listenToSmartFilter=function(){var e,i,q1=false;e=this.getSmartFilterId();this._oSmartFilter=this._findControl(e,"sap.ui.comp.filterbar.FilterBar");if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindTable,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);q1=true;}var r1=C.getLibraryResourceBundle("sap.ui.comp"),s1,t1,u1={SMARTTABLE_NO_DATA:r1.getText("SMARTTABLE_NO_DATA"),SMARTTABLE_NO_DATA_WITHOUT_FILTERBAR:r1.getText("SMARTTABLE_NO_DATA_WITHOUT_FILTERBAR"),SMARTTABLE_NO_RESULTS:r1.getText("SMARTTABLE_NO_RESULTS")};if(this._oTable){s1=this._oTable.getNoData;t1="noData";if(!s1){s1=this._oTable.getNoDataText;t1="noDataText";}}if(s1){var v1=s1.call(this._oTable);if(v1&&(!this._isMobileTable||!this._oTable.isPropertyInitial(t1))){if(Object.values(u1).indexOf(v1)==-1){this._vCustomNoData=v1;}}}i=this.getInitialNoDataText();if(i){q1=i==="$FILTERBAR";if(!q1&&i!=="$NO_FILTERBAR"){this._setNoDataText(i);return;}}if(q1){this._setNoDataText(u1["SMARTTABLE_NO_DATA"]);}else{this._setNoDataText(u1["SMARTTABLE_NO_DATA_WITHOUT_FILTERBAR"]);}};
p1.prototype._filterChangeEvent=function(){if(this._isTableBound()&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()&&!this._oSmartFilter.isDialogOpen()){this._showOverlay(true);}};
p1.prototype._showOverlay=function(e){if(e){var i={show:true};this.fireShowOverlay({overlay:i});e=i.show;}this._oTable.setShowOverlay(e);};
p1.prototype._findControl=function(i,e){var q1,r1;if(i){q1=C.byId(i);if(!q1||!q1.isA(e)){r1=this._getView();if(r1){q1=r1.byId(i);}}if(q1&&!q1.isA(e)){q1=undefined;}}return q1;};
p1.prototype._getView=function(){if(!this._oView){var e=this.getParent();while(e){if(e.isA("sap.ui.core.mvc.View")){this._oView=e;break;}e=e.getParent();}}return this._oView;};
p1.prototype.rebindTable=function(e){if(this.isInitialised()){this._reBindTable(null,e);return;}I.error("rebindTable method called before the SmartTable is initialized. Please execute the UI5 Support Assistant 'SmartTable' rules to get more information",this.getId(),"sap.ui.comp.smarttable.SmartTable");};
p1.prototype._reBindTable=function(e,q1){var r1,s1,t1,i,u1,v1,w1=[],x1,y1,z1,A1,B1,C1,D1,E1={},F1={preventTableBind:false};this._bUpdateTableAnnouncement=e&&e.getId&&e.getId()==="search";t1=this._getTablePersonalisationData()||{};if(this._oMessageFilter){x1=this._oMessageFilter;}else{x1=t1.filters;y1=t1.excludeFilters;}D1=t1.sorters;if(this._oSmartFilter){v1=this._oSmartFilter.getFilters();E1=this._oSmartFilter.getParameters()||{};}if(v1&&v1.length){if(y1){w1=[new r([v1[0],y1],true)];}else{w1=v1;}}else if(y1){w1=[y1];}if(x1){x1=w1.concat(x1);}else{x1=w1;}z1=this._getRequestAtLeastFields();B1=this._getRelevantColumnPaths();A1=B1["select"];if(!A1||!A1.length){A1=z1;}else{u1=z1.length;for(i=0;i<u1;i++){if(A1.indexOf(z1[i])<0){A1.push(z1[i]);}}}if(this._mSelectExpandForGroup&&this._mSelectExpandForGroup.select){this._mSelectExpandForGroup.select.forEach(function(I1){if(A1.indexOf(I1)<0){A1.push(I1);}});}if(A1.length){E1["select"]=A1.toString();C1=B1["expand"]||[];if(this._mSelectExpandForGroup&&this._mSelectExpandForGroup.expand){this._mSelectExpandForGroup.expand.forEach(function(I1){if(C1.indexOf(I1)<0){C1.push(I1);}});}if(C1.length){E1["expand"]=C1.join(",");}}E1["useBatchRequests"]=true;if(!D1){D1=[];}F1.filters=x1;F1.sorter=D1;F1.parameters=E1;F1.length=undefined;F1.startIndex=undefined;F1.events={};this.fireBeforeRebindTable({bindingParams:F1,messageFilterActive:!!this._oMessageFilter});if(!F1.preventTableBind){D1=F1.sorter;x1=F1.filters;E1=F1.parameters;A1=F1.parameters["select"];if(!A1||!A1.length){f.error(C.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_COLS"),{styleClass:(this.$()&&this.$().closest(".sapUiSizeCompact").length)?"sapUiSizeCompact":""});return;}s1=this.getTableBindingPath()||("/"+this.getEntitySet());if(this._oTable.resumeUpdateAnalyticalInfo){this._oTable.resumeUpdateAnalyticalInfo(true,false);}this._bDataLoadPending=true;this._bIgnoreChange=false;if(this._bForceTableUpdate){q1=true;this._bForceTableUpdate=false;}if(!q1){r1=this._oTable.getBinding(this._sAggregation);if(r1&&r1.mParameters){q1=!(Q(E1,r1.mParameters,true)&&Q(E1.custom,r1.mParameters.custom)&&!F1.length&&!F1.startIndex&&s1===r1.getPath());}}if(!this._bNoDataUpdated){this._bNoDataUpdated=true;this._setNoDataText();}if(!r1||!this._bIsTableBound||q1){p1._addBindingListener(F1,"change",this._onBindingChange,this);p1._addBindingListener(F1,"dataRequested",this._onDataRequested,this);p1._addBindingListener(F1,"dataReceived",this._onDataReceived,this);if(this._isMobileTable){var G1=this._oTable?this._oTable.getColumns():[];var H1=this._oTemplate?this._oTemplate.getCells():[];if(G1.length===H1.length){G1.forEach(function(I1,J1){H1[J1].setBindingContext(I1.getVisible()?undefined:null);});}}this._oTable.bindRows({path:s1,filters:x1,sorter:D1,parameters:E1,length:F1.length,startIndex:F1.startIndex,template:this._oTemplate,events:F1.events});this._bIsTableBound=true;}else{r1.sort(D1);r1.filter(x1,"Application");}this._showOverlay(false);}};
p1.prototype._onDataRequested=function(e){if(e&&e.getParameter&&e.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._bIgnoreChange=true;this.fireDataRequested(e.getParameters());};
p1.prototype._onDataReceived=function(e){if(e&&e.getParameter&&e.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._bIgnoreChange=false;this._onDataLoadComplete(e,true);this.fireDataReceived(e);};
p1.prototype._onBindingChange=function(e){if(this._bIgnoreChange){return;}var i,q1=false;i=(e&&e.getParameter)?e.getParameter("reason"):undefined;if(!i||i==="filter"||i==="context"||(!this._bDataLoadPending&&i==="change")){q1=true;}if(i==="change"||q1){this._onDataLoadComplete(e,q1);}};
p1._addBindingListener=function(e,i,q1,r1){if(!e.events){e.events={};}if(!e.events[i]){e.events[i]=q1.bind(r1);}else{var s1=e.events[i];e.events[i]=function(){q1.apply(r1,arguments);s1.apply(r1,arguments);};}};
p1.prototype._onDataLoadComplete=function(e,i){if(this._bDataLoadPending||i){this._bDataLoadPending=false;this.updateTableHeaderState();}};
p1.prototype._isTableBound=function(){if(this._bIsTableBound){return true;}if(this._oTable){return this._oTable.isBound(this._sAggregation);}return false;};
p1.prototype.setNoData=function(e){this._oNoData=e;if(this._bNoDataUpdated||this._isTableBound()){this._setNoDataText();}return this;};
p1.prototype.getNoData=function(){return this._oNoData;};
p1.prototype._setNoDataText=function(e){var i=this._oTable.setNoData;if(!i){i=this._oTable.setNoDataText;}if(!i){return;}if(this._bNoDataUpdated&&this._vCustomNoData){i.call(this._oTable,this._vCustomNoData,true);return;}var q1=e;if(!q1){q1=this.getNoData();}if(!q1){q1=C.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_NO_RESULTS");}i.call(this._oTable,q1,true);};
p1.prototype.updateTableHeaderState=function(){this._refreshHeaderText();this._setExcelExportEnableState();};
p1.prototype._createContent=function(){var i,e=0,q1,r1,s1,t1=[];if(this._aExistingColumns&&this._aExistingColumns.length){this._aColumnKeys=[].concat(this._aExistingColumns.reverse());}r1=this._parseIndexedColumns();e=this._aTableViewMetadata.length;for(i=0;i<e;i++){q1=this._aTableViewMetadata[i];if(q1.isInitiallyVisible){this._aColumnKeys.push(q1.name);}else{t1.push(q1.name);}if(!(q1.isInitiallyVisible||q1.inResult)){this._mLazyColumnMap[q1.name]=q1;}else{s1=this._createColumnForField(q1);this._oTable.addColumn(s1);}this._mFieldMetadataByKey[q1.name]=q1;}this._insertIndexedColumns(r1);this._aColumnKeys=this._aColumnKeys.concat(t1);if(this._isMobileTable&&this.getEnableAutoColumnWidth()){this.setDemandPopin(true);this._oTable.setFixedLayout("Strict");this._oTable.setContextualWidth("auto");this._oTable.addDependent(new g1());}this._updateColumnsPopinFeature();if(this.getShowDetailsButton()){this._oTable.setHiddenInPopin(this._getImportanceToHide());}this._storeInitialColumnSettings();};
p1.prototype._createColumnForField=function(e){var i,q1;q1=this.getId()+"-"+e.name.replace(/[^A-Za-z0-9_.:-]+/g,"_");i=this._createColumn(e,q1);e.isColumnCreated=true;i.data("p13nData",{columnKey:e.name,leadingProperty:e.name,additionalProperty:e.additionalProperty,navigationProperty:e.navigationProperty,sortProperty:e.sortable?e.name:undefined,filterProperty:e.filterable?e.name:undefined,isGroupable:e.sortable&&e.filterable&&e.aggregationRole==="dimension",fullName:e.hasValueListAnnotation?e.fullName:null,type:e.filterType,typeInstance:e.modelType,maxLength:e.maxLength,precision:e.precision,scale:e.scale,align:e.align,edmType:e.type,displayBehaviour:e.displayBehaviour,description:e.description,isDigitSequence:e.isDigitSequence,isCurrency:e.isCurrencyField,unit:e.unit,width:e.width,aggregationRole:e.aggregationRole,nullable:e.nullable!=="false"});if(e.filterable&&i.setFilterProperty){i.setFilterProperty(e.name);}if(e.sortable&&i.setSortProperty){i.setSortProperty(e.name);}if(this.getEnableAutoColumnWidth()){e.width=i.getWidth();if(this.getEditable()){this._updateColumnWidthForEdit(i,e);}}this._registerContentTemplateEvents(e.template);return i;};
p1.prototype._parseIndexedColumns=function(){var i,e,q1,r1,s1,t1,u1,v1,w1;var x1=this._oTable.getColumns();var y1=null;if(this._oTemplate&&this._oTemplate.getCells){y1=this._oTemplate.getCells();}if(!x1){return null;}r1=[];e=x1.length;for(i=0;i<e;i++){q1=x1[i];s1=q1.data("p13nData");t1=null;u1=null;if(s1){t1=s1.columnIndex;u1=s1.columnKey;}v1=-1;if(t1!==null&&t1!==undefined){v1=parseInt(t1);}if(!isNaN(v1)&&v1>-1){if(y1){w1=y1[i];this._oTemplate.removeCell(w1);}else{w1=null;}this._aColumnKeys.splice(i-r1.length,1);r1.push({index:v1,columnKey:u1,column:q1,template:w1});this._oTable.removeColumn(q1);}}r1.sort(function(z1,A1){return z1.index-A1.index;});return r1;};
p1.prototype._insertIndexedColumns=function(e){var i,q1,r1;if(!e){return;}q1=e.length;for(i=0;i<q1;i++){r1=e[i];this._aColumnKeys.splice(r1.index,0,r1.columnKey);this._oTable.insertColumn(r1.column,r1.index);if(r1.template){this._oTemplate.insertCell(r1.template,r1.index);}}};
p1.prototype._updateColumnsPopinFeature=function(){if(!this._isMobileTable||!this.getDemandPopin()){return;}if(!this._oTable.getAutoPopinMode()){this._oTable.setAutoPopinMode(true);}var e=this._oTable.getColumns(true);if(!e){return;}e=e.filter(function(i){return i.getVisible();});e.forEach(function(i){if(i.getPopinDisplay()!="WithoutHeader"){i.setPopinDisplay("Inline");}});};
p1.prototype._storeInitialColumnSettings=function(){this._aInitialSorters=[];P.createSort2Json(this._oTable,this._aInitialSorters,P.createArrayFromString(this.getIgnoreFromPersonalisation()));};
p1.prototype._deactivateColumnsPopinFeature=function(){if(!this._isMobileTable){return;}if(this._oTable.getAutoPopinMode()){this._oTable.setAutoPopinMode(false);}var e=this._oTable.getColumns();if(!e){return;}var q1,r1=e.length;for(var i=0;i<r1;i++){q1=e[i];q1.setDemandPopin(false);q1.setMinScreenWidth("1px");}};
p1.prototype._registerContentTemplateEvents=function(e){if(e.isA("sap.ui.comp.SmartToggle")){e=e.getEdit();}if(e&&e.attachChange){e.attachChange(function(i){this.fireFieldChange({changeEvent:i});},this);}};
p1.prototype._updateInitialColumns=function(){var i=this._oTable.getColumns(),q1=i.length,r1,s1;var t1=this.getEnableAutoColumnWidth();while(q1--){r1=i[q1];s1=r1.data("p13nData");if(s1&&s1.columnKey&&this._aExistingColumns.indexOf(s1.columnKey)>=0){continue;}if(typeof s1==="string"){try{s1=JSON.parse(s1);r1.data("p13nData",s1);}catch(e){}}if(s1&&s1.columnKey){this._aExistingColumns.push(s1.columnKey);}if(t1&&this._isMobileTable){var u1=r1.getHeader();if(u1&&u1.isPropertyInitial("wrapping")&&u1.getMetadata().getProperty("wrapping")){u1.setWrapping(false);}}}};
p1.prototype._getRelevantColumnPaths=function(){var e={},q1=[],r1=[],s1=this._oTable.getColumns(),i,t1=s1?s1.length:0,u1,v1,w1,x1,y1;var z1=function(w1,A1){var B1,C1;if(w1){C1=w1.split(",");B1=C1.length;while(B1--){w1=C1[B1];if(w1&&A1.indexOf(w1)<0){A1.push(w1);}}}};for(i=0;i<t1;i++){u1=s1[i];w1=null;if(u1.getVisible()||(u1.getInResult&&u1.getInResult())){if(u1.getLeadingProperty){w1=u1.getLeadingProperty();}v1=u1.data("p13nData");if(v1){if(!w1){w1=v1["leadingProperty"];}x1=v1["additionalProperty"];y1=v1["navigationProperty"];}if(w1&&q1.indexOf(w1)<0){q1.push(w1);}z1(x1,q1);z1(y1,r1);}}e["select"]=q1;e["expand"]=r1;return e;};
p1.prototype._createTable=function(){var e=this.getItems(),i=e?e.length:0,q1,r1;this._sAggregation="rows";while(i--){q1=e[i];if(q1 instanceof v||q1 instanceof R){break;}q1=null;}if(q1){this._oTable=q1;if(q1 instanceof t){this._isAnalyticalTable=true;}else if(q1 instanceof R){this._isMobileTable=true;this._oTemplate=(q1.getItems()&&q1.getItems().length>0)?q1.getItems()[0]:new b();q1.removeAllItems();}else if(q1 instanceof w){this._isTreeTable=true;}this._updateInitialColumns();}else{r1=this.getId()+"-ui5table";if(this.getTableType()==="AnalyticalTable"){this._isAnalyticalTable=true;this._oTable=new t(r1,{enableCustomFilter:true});}else if(this.getTableType()==="ResponsiveTable"){this._isMobileTable=true;this._oTable=new R(r1,{growing:true,autoPopinMode:this.getDemandPopin()});this._oTemplate=new b();}else if(this.getTableType()==="TreeTable"){this._isTreeTable=true;this._oTable=new w(r1,{selectionMode:"MultiToggle"});}else{this._oTable=new v(r1,{selectionMode:"MultiToggle"});}if(this._oTable.setVisibleRowCountMode){this._oTable.setVisibleRowCountMode("Auto");}this.insertItem(this._oTable,2);}this._oTableReady.resolve(this._oTable);this._fColumnPaddingBorder=(this._isMobileTable)?1:1.1875;if(!this._oTable.getLayoutData()){if(this._oTable instanceof R||(this._oTable.getVisibleRowCountMode&&this._oTable.getVisibleRowCountMode()!=="Auto")){this._oTable.setLayoutData(new l({growFactor:1,baseSize:"auto"}));}else{this._oTable.setLayoutData(new l({growFactor:1,baseSize:"0%"}));}}this._oTable.addStyleClass("sapUiCompSmartTableInnerTable");this._oTable.setEnableBusyIndicator(true);this._oTable.setBusyIndicatorDelay(100);if(this._oTable.setEnableCustomFilter){this._oTable.setEnableCustomFilter(this.getEnableCustomFilter());}if(this._oTable.setShowColumnVisibilityMenu){this._oTable.setShowColumnVisibilityMenu(false);}this._attachTableCustomFilter();if(this._isAnalyticalTable){this._createColumn=this._createAnalyticalColumn;}else if(this._isMobileTable){if(this.getUseTablePersonalisation()){this._oTable.bActiveHeaders=true;this._oTable.attachEvent("columnPress",this._onColumnPress,this);this._oTable.attachSort=function(){this.attachEvent("sort",arguments[0],arguments[1],arguments[2]);};this._oTable.detachSort=function(){this.detachEvent("sort",arguments[0],arguments[1]);};}this._sAggregation="items";this._createColumn=this._createMobileColumn;this._oTable.bindRows=this._oTable.bindItems;if(this.getShowDetailsButton()){this._oTable.attachEvent("popinChanged",this._onPopinChanged,this);}}if(!this._isMobileTable){this._oTable.attachRowsUpdated(function(){this._setExcelExportEnableState();},this);}if(this._oTable._setLargeDataScrolling){this._oTable._setLargeDataScrolling(true);}this._oTable.attachPaste(this._onInnerTablePaste,this);};
p1.prototype._attachTableCustomFilter=function(){if(this._oTable.detachCustomFilter){this._oTable.detachCustomFilter(this._onCustomFilter,this);}if(this._oTable.getEnableCustomFilter&&this._oTable.getEnableCustomFilter()&&this._bIsFilterPanelEnabled){if(this._oTable.setEnableCellFilter){this._oTable.setEnableCellFilter(false);}if(this._oTable.attachCustomFilter){this._oTable.attachCustomFilter(this._onCustomFilter,this);}}};
p1.prototype._createResponsivePopover=function(e){this._oFilterButton=new Y({text:C.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_RP_FILTER"),icon:"sap-icon://filter",press:[function(q1){this._onCustomFilter(q1);},this]});var i=C.getLibraryResourceBundle("sap.ui.comp");this._aSortButton=[new h1({label:i.getText("SMARTTABLE_RP_SORT_ASCENDING"),icon:"sap-icon://sort-ascending",action:[true,this._onCustomSort,this]}),new h1({label:i.getText("SMARTTABLE_RP_SORT_DESCENDING"),icon:"sap-icon://sort-descending",action:[false,this._onCustomSort,this]})];this._oColumnHeaderPopover=new X({items:[this._aSortButton,this._oFilterButton]});if(e){this._oColumnHeaderPopover.addItem(new Y({text:C.getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_RP_RESIZE"),icon:"sap-icon://resize-horizontal",press:[function(){g1.getPlugin(this._oTable).startResizing(this._oColumnClicked.getDomRef());},this]}));}};
p1.prototype._onColumnPress=function(e){this._oColumnClicked=e.getParameter("column");var i=this._oColumnClicked.data("p13nData");var q1=window.matchMedia("(hover:none)").matches&&this._isMobileTable&&this.getEnableAutoColumnWidth();if(!i&&!q1){return;}var r1=i.filterProperty;var s1=i.sortProperty;if(!this._oColumnHeaderPopover){this._createResponsivePopover(q1);}this._oFilterButton.setVisible(!!r1&&this._bIsFilterPanelEnabled);var t1=!!s1&&this._bIsSortPanelEnabled;this._aSortButton[0].setVisible(t1);this._aSortButton[1].setVisible(t1);if((r1&&this._bIsFilterPanelEnabled)||(s1&&this._bIsSortPanelEnabled)||q1){this._oColumnHeaderPopover.removeAllAriaLabelledBy();this._oColumnHeaderPopover.addAriaLabelledBy(this._oColumnClicked.getHeader());this._oColumnHeaderPopover.openBy(this._oColumnClicked);}};
p1.prototype._onCustomSort=function(e,i){var q1=this._oColumnClicked.data("p13nData");var r1,s1;if(q1){if(q1.sorted&&q1.sorted.ascending===i){delete q1.sorted;s1=n1.None;this._oColumnClicked.setSortIndicator(s1);}else{q1.sorted={"ascending":i};r1=q1.sorted;s1=(r1&&r1.ascending)?n1.Ascending:n1.Descending;}this._oTable.fireEvent("sort",{column:this._oColumnClicked,sortOrder:s1,columnAdded:false});}};
p1.prototype._onCustomFilter=function(e){this._showTableFilterDialog(e.getParameter("column")||this._oColumnClicked);};
p1.prototype._onPopinChanged=function(e){if(!this._oShowHideDetailsButton){this._createShowHideDetailsButton();}var i=e.getParameter("visibleInPopin");var q1=e.getParameter("hiddenInPopin");var r1=e.getSource().getVisibleItems();var s1=i.some(function(t1){return this._getImportanceToHide().indexOf(t1.getImportance())>-1;},this);if(r1.length&&(q1.length||s1)){this._oShowHideDetailsButton.setVisible(true);}else{this._oShowHideDetailsButton.setVisible(false);}};
p1.prototype.getTable=function(){return this._oTable;};
p1.prototype._showTableFilterDialog=function(e){if(this._oPersController){var i={filter:{visible:true}};if(e){i.filter["payload"]={column:e};}this._oPersController.openDialog(i);}};
p1.prototype._calcColumnWidth=function(e,i,q1){q1=Object.assign({label:i?false:true,defaultWidth:i?4:8,padding:this._fColumnPaddingBorder},q1);if(!e){return q1.defaultWidth;}var r1=0,s1=0,t1=Math.max(q1.min||0,(i?1:2)),u1=Math.max(t1,q1.max||19),v1=e.additionalProperty||"",w1=e.displayBehaviour,x1=e.modelType,y1=e.type||"";if(u1<t1){return u1;}if(q1.additionalProperty){v1=q1.additionalProperty.concat(v1.split(",")).filter(function(A1,B1,C1){return A1&&C1.indexOf(A1)==B1;}).join(",");}if(i||e.unit||!v1||w1!="descriptionOnly"){if(e.isImageURL||y1=="Edm.Byte"||y1=="Edm.SByte"){r1+=t1;}else if(x1){r1+=i1.calcTypeWidth(x1,{defaultWidth:q1.defaultWidth,maxWidth:q1.maxWidth});}else{r1+=q1.defaultWidth;}}if(this._isTreeTable&&e.hierarchy&&e.index==0){r1+=3;}if(!i){e.ownWidth=r1=Math.min(r1,u1);}if(!i&&w1!="idOnly"&&v1&&this._oTableProvider&&r1<u1){v1.split(",").forEach(function(v1){if(v1==e.fieldControlProperty){return;}var A1=this._oTableProvider.getFieldMetadata(v1);var B1=Object.assign({padding:0.4,max:u1-r1-0.4},e.vertical&&{padding:0,max:u1});var C1=this._calcColumnWidth(A1,true,B1);if(e.vertical){r1=Math.max(C1,r1);}else{r1+=C1;}},this);if(w1=="descriptionOnly"){e.ownWidth=r1;}else{e.additionalWidth=r1-e.ownWidth;}}r1=r1+(q1.gap||0);if(q1.label){var z1=e.label||e.fieldLabel||"";e.labelWidth=s1=i1.calcHeaderWidth(z1,r1,u1,t1);}r1=Math.max(t1,r1,s1);r1=Math.min(r1,u1)+q1.padding;r1=Math.round(r1*100)/100;return r1;};
p1.prototype._setWidthForCustomColumn=function(e){var i=e.data("p13nData");if(!this._oTableProvider||!i||!i.autoColumnWidth||e.getWidth()){return;}var q1=i.autoColumnWidth;var r1=q1.visibleProperty||[i.leadingProperty,i.additionalProperty].join(",");var s1=r1.split(",");var t1=this._oTableProvider.getFieldMetadata(s1.shift(),true);if(!t1){return;}t1.label=this._getColumnLabel(e);var u1=this._calcColumnWidth(t1,false,{additionalProperty:s1,min:q1.min,max:q1.max,gap:q1.gap});t1.width=u1+"rem";e.setWidth(t1.width);if(this.getEditable()){this._updateColumnWidthForEdit(e,t1,q1);}};
p1.prototype._updateColumnWidthForEdit=function(e,i){if(!i||!i.isColumnCreated||i.type=="Edm.Boolean"||i.semanticObjects){return;}var q1=this.data("useSmartField")=="true"||this.data("useSmartField")===true;if(q1&&i["sap:updatable"]=="false"){return;}var r1=e.getWidth();if(!this.getEditable()){if(i.editWidth==r1){e.setWidth(i.width);}}else if(i.width==r1){if(i.editWidth){return e.setWidth(i.editWidth);}if(!this._aEditableColumnAdditionalWidth){var s1=this._fColumnPaddingBorder;var t1=this.$().closest(".sapUiSizeCompact").length?"_Compact":"";var u1=parseFloat(f1.get({name:"_sap_m_InputBase"+t1+"_IconWidth"}));s1+=parseFloat(f1.get({name:"_sap_m_InputBaseWrapper_Sum_Border"}));s1+=parseFloat(f1.get({name:"_sap_m_InputBase"+t1+"_InnerPadding"}).split(" ").pop())*2;this._aEditableColumnAdditionalWidth=[s1,s1+u1-0.25];}var v1=(i.displayBehaviour||"").includes("And");var w1=(i.labelWidth||0)+this._fColumnPaddingBorder;if(q1&&v1&&i.additionalWidth&&i.hasValueListAnnotation&&!i.hasFixedValues){i.editWidth=Math.max(i.ownWidth+this._aEditableColumnAdditionalWidth[1],w1)+"rem";return e.setWidth(i.editWidth);}var x1=i.isCalendarDate||E.isDateOrTime(i.type);var y1=i.hasValueListAnnotation||x1;var z1=this._aEditableColumnAdditionalWidth[+y1];if(q1&&v1&&!i.additionalWidth&&i.hasValueListAnnotation&&i.hasFixedValues){z1=Math.max(i.ownWidth+3+z1,w1);}else if(i.ownWidth<4||x1){z1+=i.ownWidth;}else{z1+=2;}var A1=parseFloat(r1);if(A1<z1){i.editWidth=z1+"rem";e.setWidth(i.editWidth);}}};
p1.prototype._updateVisibleColumnsWidthForEdit=function(){if(this._oTable&&this._oTableProvider&&this.getEnableAutoColumnWidth()){this._oTable.getColumns().forEach(function(e){if(e.getVisible()){var i=e.data("p13nData");var q1=i&&i.leadingProperty;if(q1){var r1=this._oTableProvider.getFieldMetadata(q1);r1&&this._updateColumnWidthForEdit(e,r1);}}},this);}};
p1.prototype._createColumn=function(e,i){var q1=new u(i,{autoResizable:true,hAlign:e.align,width:e.width,visible:e.isInitiallyVisible,label:new d(i+"-header",{textAlign:e.align,text:e.label}),sorted:e.sorted,sortOrder:e.sortOrder,tooltip:e.quickInfo,showSortMenuEntry:e.sortable&&this._bIsSortPanelEnabled,showFilterMenuEntry:e.filterable&&this._bIsFilterPanelEnabled,name:e.fieldName,template:e.template});if(!e.width&&this.getEnableAutoColumnWidth()){q1.setWidth(this._calcColumnWidth(e)+"rem");}return q1;};
p1.prototype._createAnalyticalColumn=function(e,i){if(e.aggregationRole!=="measure"&&e.isMeasureField&&e.unit&&e.template.addStyleClass){e.template.addStyleClass("sapUiAnalyticalTableSumCellHidden sapUiAnalyticalTableGroupCellHidden");}else if(e.isCurrencyField&&e.template.addStyleClass){e.template.addStyleClass("sapUiCompCurrencyBold");}var q1=new A(i,{autoResizable:true,hAlign:e.align,width:e.width,visible:e.isInitiallyVisible,inResult:e.inResult,label:new d(i+"-header",{textAlign:e.align,text:e.label}),tooltip:e.quickInfo,sorted:e.sorted,sortOrder:e.sortOrder,grouped:e.grouped,showIfGrouped:e.grouped,showSortMenuEntry:e.sortable&&this._bIsSortPanelEnabled,showFilterMenuEntry:e.filterable&&this._bIsFilterPanelEnabled,summed:e.summed,leadingProperty:e.name,template:e.template,groupHeaderFormatter:y.getInlineGroupFormatterFunction(e,true,this._getDateFormatSettings(),this._bPreserveDecimals)});if(!e.width&&this.getEnableAutoColumnWidth()){q1.setWidth(this._calcColumnWidth(e)+"rem");}return q1;};
p1.prototype._createMobileColumn=function(e,i){var q1=new a(i,{hAlign:e.align,visible:e.isInitiallyVisible,header:new d(i+"-header",{textAlign:e.align,text:e.label,tooltip:e.quickInfo,wrapping:!this.getEnableAutoColumnWidth(),wrappingType:M.WrappingType.Hyphenated}),tooltip:e.quickInfo});if(e.importance&&!this._oTableProvider.isLineItemDefaultImportance(e)){q1.setImportance(e.importance);}if(this._oTemplate){this._oTemplate.addCell(e.template);}if(e.width){return q1.setWidth(e.width);}if(!this.getEnableAutoColumnWidth()){return q1.setWidth(e.isImageURL?"3em":"auto");}return q1.setWidth(this._calcColumnWidth(e)+"rem");};
p1.prototype.fetchVariant=function(){if(this._oCurrentVariant==="STANDARD"||this._oCurrentVariant===null){return{};}return this._oCurrentVariant;};
p1.prototype.applyVariant=function(e,i){this._oCurrentVariant=e;if(this._oCurrentVariant==="STANDARD"){this._oCurrentVariant=null;}this._bApplyingVariant=true;if(this._oTable._setSuppressRefresh){this._oTable._setSuppressRefresh(true);}if(this._oPersController){if(this._oCurrentVariant===null||q.isEmptyObject(this._oCurrentVariant)){this._oPersController.resetPersonalization("ResetFull");}else{this._oPersController.setPersonalizationData(this._oCurrentVariant,true);}}this._bApplyingVariant=false;this.fireAfterVariantApply({currentVariantId:this.getCurrentVariantId()});};
p1.prototype.variantsInitialized=function(){this._bVariantInitialised=true;this._checkAndTriggerBinding();};
p1.prototype.getUiState=function(){var e=this._oPersController?this._oPersController.getDataSuiteFormatSnapshot():null;return new U({presentationVariant:{SortOrder:e?e.SortOrder:[],GroupBy:e?e.GroupBy:[],Total:e?e.Total:[],RequestAtLeast:this._getRequestAtLeastFields(),Visualizations:e?e.Visualizations:[]},selectionVariant:{SelectOptions:e?e.SelectOptions:[]},variantName:this.getCurrentVariantId()});};
p1.prototype.setUiState=function(e){this._setUiState(e,false);};
p1.prototype.setUiStateAsVariant=function(e){this._setUiState(e,true);};
p1.prototype._setUiState=function(e,i){var q1=e.getPresentationVariant()&&e.getPresentationVariant().RequestAtLeast?[].concat(e.getPresentationVariant().RequestAtLeast):[];if(!Q(q1,this._getRequestAtLeastFields())){this._aAlwaysSelect=q1;}if(this._oPersController){if(i){this._oPersController.setPersonalizationDataAsDataSuiteFormat(W({},e.getPresentationVariant(),e.getSelectionVariant()),true);}else{var r1=(this._oVariantManagement&&e.getVariantName())?this._oVariantManagement.getVariantContent(this,e.getVariantName()):{};this._oPersController.setDataSuiteFormatSnapshot(W({},e.getPresentationVariant(),e.getSelectionVariant()),r1,true);}}};
p1.prototype._getRequestAtLeastFields=function(){var e=this.getRequestAtLeastFields();var i=e?e.split(","):[];return i.concat(this._aAlwaysSelect);};
p1.prototype._personalisationRequestColumns=function(e){var q1=e.getParameter("columnKeys"),r1,i,s1,t1,u1,v1={};s1=q1.length;for(i=0;i<s1;i++){r1=q1[i];t1=this._mLazyColumnMap[r1];if(t1){u1=this._createColumnForField(t1);if(this._isMobileTable){this._oTable.addColumn(u1);}v1[t1.name]=u1;}}this._oPersController.addColumns(v1);};
p1.prototype._beforePersonalisationModelDataChange=function(e){if(this._oTable.suspendUpdateAnalyticalInfo){this._oTable.suspendUpdateAnalyticalInfo();}};
p1.prototype._afterPersonalisationModelDataChange=function(e){this._updateColumnsPopinFeature();if(this.getEditable()){this._updateVisibleColumnsWidthForEdit();}};
p1.prototype._personalisationModelDataChange=function(e){this._oCurrentVariant=e.getParameter("persistentData");if(this._fGetDataForKeyUser){this._fGetDataForKeyUser(this._createKeyUserChange());}var i=e.getParameter("runtimeDeltaDataChangeType");var q1=this._getChangeStatus(i);if(q1==="Unchanged"){return;}if(!(this._bApplyingVariant||this._bDeactivatingColumns)){if(!this.getUseVariantManagement()){this._persistPersonalisation();}else if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(true);}}if(q1==="ModelChanged"&&this._isTableBound()){if(i&&i.columns==="ModelChanged"){this._bForceTableUpdate=true;}if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindTable(null);}}if(this._isMobileTable){this._adaptCustomSort();}this._createInfoToolbar();};
p1.prototype._adaptCustomSort=function(){if(this._oCurrentVariant){var e,i,q1,r1=[],s1;if(this._oCurrentVariant.sort&&this._oCurrentVariant.sort.sortItems){r1=this._oCurrentVariant.sort.sortItems;}this._oTable.getColumns().forEach(function(t1){e=t1.data("p13nData");i=e&&e.columnKey;if(i){q1=r1.filter(function(u1){return i===u1.columnKey;});s1=q1[0];if(s1){if(!e.sorted){e.sorted={"ascending":false};}if(s1.operation===n1.None){delete e.sorted;}else{e.sorted={"ascending":s1.operation!==n1.Descending};}t1.setSortIndicator(s1.operation);}else if(e&&e.sorted){e.sorted=null;t1.setSortIndicator(c.None);}}else if(t1.getSortIndicator()!==n1.None){t1.setSortIndicator(n1.None);}},this);}};
p1.prototype.setUseInfoToolbar=function(e){this.setProperty("useInfoToolbar",e,true);if(this.getTable()){this._createInfoToolbar();}return this;};
p1.prototype._updateInfoToolbar=function(i,e){if(!this._oInfoToolbar){this._oInfoToolbar=new O({active:true,visible:true,design:l1.Info,content:[new T({id:this.getId()+"-infoToolbarText",text:i,wrapping:false})],press:[e,this._handleInfoToolbarPress,this]});}else{this._oInfoToolbar.setVisible(true);this._oInfoToolbar.getContent()[0].setText(i);this._oInfoToolbar.detachPress(this._handleInfoToolbarPress,this);this._oInfoToolbar.attachPress(e,this._handleInfoToolbarPress,this);}};
p1.prototype._handleInfoToolbarPress=function(e,i){this._showTableFilterDialog(i);};
p1.prototype._createInfoToolbar=function(){var e=this.getUseInfoToolbar(),i=this.getTable(),q1=this.getId()+"-infoToolbarText",r1,s1=C.getLibraryResourceBundle("sap.ui.comp");if(e===o1.Off){if(this._oInfoToolbar&&this._oInfoToolbar.getVisible()){this._oInfoToolbar.setVisible(false);i.removeAriaLabelledBy(q1);}return;}if(this._isMobileTable){if(i.getInfoToolbar()&&!this._oInfoToolbar){I.error("Custom infoToolbar is used, hence set useInfoToolbar property on the SmartTable with id='"+this.getId()+"' to Off");return;}var t1=this._oCurrentVariant&&this._oCurrentVariant.filter&&this._oCurrentVariant.filter.filterItems,u1=t1&&t1.length;if(u1){var v1=[],w1=L.getInstance();t1.forEach(function(y1){var z1=this._getColumnLabel(y1.columnKey);if(z1&&v1.indexOf(z1)===-1){v1.push(z1);}},this);var x1=s1.getText("SMARTTABLE_INFOTOOLBAR_FILTERED_BY",[w1.format(v1)]);r1=this._getColumnByKey(t1[0].columnKey);this._updateInfoToolbar(x1,r1);if(!i.getInfoToolbar()){i.setInfoToolbar(this._oInfoToolbar);}if(i.getAriaLabelledBy().indexOf(q1)===-1){i.addAriaLabelledBy(q1);}}else if(this._oInfoToolbar&&this._oInfoToolbar.getVisible()){this._oInfoToolbar.setVisible(false);i.removeAriaLabelledBy(q1);}}else if(this._oInfoToolbar){this._oInfoToolbar.setVisible(false);}};
p1.prototype._getChangeStatus=function(e){if(!e){return"ModelChanged";}if(e.sort==="ModelChanged"||e.filter==="ModelChanged"||e.columns==="ModelChanged"||e.group==="ModelChanged"){return"ModelChanged";}if(e.sort==="TableChanged"||e.filter==="TableChanged"||e.columns==="TableChanged"||e.group==="TableChanged"){return"TableChanged";}return"Unchanged";};
p1.prototype._getDateFormatSettings=function(){if(this._oTableProvider&&this._oTableProvider._oDateFormatSettings){return this._oTableProvider._oDateFormatSettings;}return undefined;};
p1.prototype._getTablePersonalisationData=function(){this._mSelectExpandForGroup=null;if(!this._oCurrentVariant){return null;}var e=[],i=[],q1=[],r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1={},C1={},D1="",E1;if(this._isMobileTable&&this._oCurrentVariant.group&&this._oCurrentVariant.group.groupItems){s1=this._oCurrentVariant.group.groupItems[0];if(this._aDeactivatedColumns.indexOf(s1.columnKey)<0){v1=this._getColumnByKey(s1.columnKey);if(v1){D1=v1.getHeader().getText();}A1=this._getPathFromColumnKeyAndProperty(s1.columnKey,"sortProperty");}if(A1){x1=A1;y1=null;var F1=this._mFieldMetadataByKey[s1.columnKey],G1;if(F1){y1=F1.unit||F1.description;G1=y.getInlineGroupFormatterFunction(F1,false,this._getDateFormatSettings(),this._bPreserveDecimals);}t1=new p(x1,s1.operation==="GroupDescending",function(J1){var K1=J1.getProperty(x1),L1;if(G1){if(y1){L1=J1.getProperty(y1);}K1=G1(K1,L1);}if(K1===undefined||K1===null){K1="";}return{key:K1,text:D1?D1+": "+K1:K1};});this._mSelectExpandForGroup={select:[x1]};if(F1){if(F1.additionalProperty){this._mSelectExpandForGroup.select.push(F1.additionalProperty);}if(F1.navigationProperty){this._mSelectExpandForGroup.expand=[F1.navigationProperty];}}e.push(t1);}}if(this._oCurrentVariant.sort){u1=this._oCurrentVariant.sort.sortItems;}else{u1=this._aInitialSorters;}if(u1){u1.forEach(function(J1,K1){var L1=J1.operation==="Descending";A1=null;z1=null;if(this._aDeactivatedColumns.indexOf(J1.columnKey)<0){A1=this._getPathFromColumnKeyAndProperty(J1.columnKey,"sortProperty");}if(A1){if(t1&&t1.sPath===A1){t1.bDescending=L1;}else{var F1=this._mFieldMetadataByKey[J1.columnKey];if(!F1){v1=this._getColumnByKey(J1.columnKey);w1=v1.data("p13nData");}if(this._bMultiUnitBehaviorEnabled&&((F1&&F1.isCurrencyField)||(w1&&w1.isCurrency))){z1=F1?F1.unit:w1.unit;if(z1&&!B1[z1]){B1[z1]={index:K1,descending:L1};}}C1[A1]={};if(C1[z1]){delete B1[z1];}else if(B1[A1]){delete B1[A1];}e.push(new p(A1,L1));}}},this);var H1=Object.keys(B1),I1;if(H1.length){H1.reverse().forEach(function(J1){I1=t1?B1[J1].index+1:B1[J1].index;e.splice(I1,0,new p(J1,B1[J1].descending));});}}if(this._oCurrentVariant.filter){this._oCurrentVariant.filter.filterItems.forEach(function(J1){var K1=J1.value1,L1=J1.value2,M1;A1=null;E1=false;v1=null;if(this._aDeactivatedColumns.indexOf(J1.columnKey)<0){v1=this._getColumnByKey(J1.columnKey);}if(v1){if(v1.getFilterProperty){A1=v1.getFilterProperty();}w1=v1.data("p13nData");if(w1){E1=w1.type==="time";if(!A1){A1=w1["filterProperty"];}}}if(A1){if(E1){if(K1 instanceof Date){K1=y.getEdmTimeFromDate(K1);}if(L1 instanceof Date){L1=y.getEdmTimeFromDate(L1);}}else{var N1=w1&&w1.typeInstance&&w1.typeInstance.getName()==="sap.ui.model.odata.type.DateTimeOffset";if(K1 instanceof Date&&!N1&&this._oTableProvider&&this._oTableProvider.getIsUTCDateHandlingEnabled()){K1=D.localToUtc(K1);L1=L1?D.localToUtc(L1):L1;}}var O1=(J1.exclude?q1:i);if(J1.operation==="Empty"){var P1=J1.exclude?s.NE:s.EQ;if(w1.edmType==="Edm.String"||w1.type==="string"){if(!w1.nullable){O1.push(new r(A1,P1,""));}else{O1.push(new r({and:!!J1.exclude,filters:[new r(A1,P1,""),new r(A1,P1,null)]}));}}else if(w1.nullable){O1.push(new r(A1,P1,null));}}else{M1=J1.exclude?F.getTransformedExcludeOperation(J1.operation):J1.operation;O1.push(new r(A1,M1,K1,L1));}}},this);if(q1.length){r1=new r(q1,true);}}return{filters:i,excludeFilters:r1,sorters:e};};
p1.prototype._getColumnByKey=function(e){var q1,r1,s1,i,t1;if(this._oTable){q1=this._oTable.getColumns();s1=q1.length;for(i=0;i<s1;i++){r1=q1[i];t1=r1.data("p13nData");if(t1&&t1.columnKey===e){return r1;}}}return null;};
p1.prototype._getPathFromColumnKeyAndProperty=function(e,i){var q1=null,r1,s1;r1=this._getColumnByKey(e);if(r1){if(i=="sortProperty"&&r1.getSortProperty){q1=r1.getSortProperty();}else if(i=="filterProperty"&&r1.getFilterProperty){q1=r1.getFilterProperty();}else if(i=="leadingProperty"&&r1.getLeadingProperty){q1=r1.getLeadingProperty();}if(!q1){s1=r1.data("p13nData");if(s1){q1=s1[i];}}}return q1;};
p1.prototype._persistPersonalisation=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){var e=this.getCurrentVariantId();if(!this._bSaving){this._bSaving=true;this._oVariantManagement.fireSave({name:"Personalisation",implicit:true,global:false,overwrite:!!e,key:e,def:true});delete this._bSaving;}}};
p1.prototype.getCurrentVariantId=function(){return this._oVariantManagement?this._oVariantManagement.getCurrentVariantId():"";};
p1.prototype.setCurrentVariantId=function(e){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantId(e);}else{I.error("sap.ui.comp.smarttable.SmartTable.prototype.setCurrentVariantId: VariantManagement does not exist, or is a page variant");}return this;};
p1.prototype.setDetailsButtonSetting=function(e){this.setProperty("detailsButtonSetting",e,true);return this;};
p1.prototype.setEnablePaste=function(e){this.setProperty("enablePaste",e,true);var i=C.byId(this.getId()+"-btnPaste");if(i){i.setEnabled(this.getEnablePaste());}return this;};
p1.prototype.isInitialised=function(){return!!this.bIsInitialised;};
p1.prototype._aAvailablePanels=["Columns","Sort","Filter","Group"];
p1.prototype.openPersonalisationDialog=function(e){if(!e||this._aAvailablePanels.indexOf(e)<0){I.warning("sap.ui.comp.smarttable.SmartTable.prototype.openPersonalisationDialog: "+e+" is not a valid panel!");return;}if(this._oPersController){var i={};i[e.toLowerCase()]={visible:true};this._oPersController.openDialog(i);}};
p1.prototype.deactivateColumns=function(e){this._aDeactivatedColumns=e||[];this._bDeactivatingColumns=true;if(this._oPersController){this._oPersController.addToSettingIgnoreColumnKeys(this._aDeactivatedColumns);}this._bDeactivatingColumns=false;};
p1.prototype._onInnerTablePaste=function(e){if(!this.getEnablePaste()||(!this.hasListeners("beforePaste")&&!this.hasListeners("paste"))){return;}var i=e.getParameter("data");var q1=i.slice(0);var r1=this._getColumnInfoForPaste();if(this.fireBeforePaste({columnInfos:r1})){sap.ui.require(["sap/ui/core/util/PasteHelper"],function(s1){s1.parse(q1,r1).then(function(t1){this.firePaste({result:t1});}.bind(this));}.bind(this));}};
p1.prototype._getColumnInfoForPaste=function(){var e=[],q1=this._oTable.getColumns(),i,r1=q1.length,s1,t1,u1,v1,w1,x1;if(this._isMobileTable&&q1.length){q1=q1.sort(function(y1,z1){return y1.getOrder()-z1.getOrder();});}for(i=0;i<r1;i++){s1=q1[i];u1=null;x1=null;if(s1.getVisible()){if(s1.getLeadingProperty){u1=s1.getLeadingProperty();}t1=s1.data("p13nData");if(!u1&&t1){u1=t1["leadingProperty"];}v1=t1.type==="numeric"?"number":t1.type;w1=t1["typeInstance"];if(t1.isCurrency||v1==="number"){x1=t1.unit;}else if(t1.description&&t1.displayBehaviour!=="idOnly"){x1=t1.description;}}e.push({columnId:s1.getId(),property:u1,ignore:!u1,type:w1});w1=E.getType("Edm.String");if(x1){e.push({columnId:s1.getId(),additionalProperty:true,property:x1,type:w1});}}return e;};
p1.prototype.exit=function(){var i,e;this.detachEvent("_change",this._onPropertyChange,this);if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindTable,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);this._oSmartFilter=null;}if(this._oTableProvider&&this._oTableProvider.destroy){this._oTableProvider.destroy();}this._oTableProvider=null;if(this._oPersController&&this._oPersController.destroy){this._oPersController.destroy();}this._oPersController=null;if(this._oVariantManagement){this._oVariantManagement.detachSave(this._variantSaved,this);this._oVariantManagement.detachAfterSave(this._variantAfterSave,this);if(!this._oVariantManagement.isPageVariant()&&this._oVariantManagement.destroy){this._oVariantManagement.destroy();}}this._oNumberFormatInstance=null;z.cleanUpFullScreen(this);if(this._oEditModel){this._oEditModel.destroy();}if(this._oNoData&&this._oNoData.destroy){this._oNoData.destroy();}this.oNoData=null;if(this._aTableViewMetadata){i=this._aTableViewMetadata.length;while(i--){e=this._aTableViewMetadata[i];if(e&&!e.isColumnCreated&&e.template){e.template.destroy();}}}if(this._oShowHideDetailsButton){this._oShowHideDetailsButton.destroy();}this._oShowHideDetailsButton=null;this._aTableViewMetadata=null;this._mFieldMetadataByKey=null;this._mSelectExpandForGroup=null;this._oEditModel=null;this._oVariantManagement=null;this._oCurrentVariant=null;this._aExistingColumns=null;this._mLazyColumnMap=null;this._aColumnKeys=null;this._aDeactivatedColumns=null;this._aAlwaysSelect=null;this._oCustomToolbar=null;if(this._oToolbar&&!this._bToolbarInsertedIntoItems){this._oToolbar.destroy();}this._oToolbar=null;if(this._oUseExportToExcel&&!this.getUseExportToExcel()){this._oUseExportToExcel.destroy();}this._oUseExportToExcel=null;this._oTablePersonalisationButton=null;this._oP13nDialogSettings=null;if(this._oTemplate){this._oTemplate.destroy();}this._oTemplate=null;if(this._oColumnHeaderPopover){this._oColumnHeaderPopover.destroy();}this._oColumnHeaderPopover=null;this._oFilterButton=null;this._aSortButton=null;this._oInfoToolbar=null;this._oTableReady=null;this._oView=null;this._oTable=null;};
return p1;});
sap.ui.predefine('sap/ui/comp/smartvariants/PersonalizableInfo',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var P=E.extend("sap.ui.comp.smartvariants.PersonalizableInfo",{metadata:{library:"sap.ui.comp",properties:{type:{type:"string",group:"Misc",defaultValue:null},dataSource:{type:"string",group:"Misc",defaultValue:null},keyName:{type:"string",group:"Misc",defaultValue:null}},associations:{control:{type:"sap.ui.core.Control",multiple:false}}}});
return P;});
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagement',['sap/ui/thirdparty/jquery','sap/ui/comp/library','sap/ui/comp/variants/VariantItem','sap/ui/comp/odata/ODataModelUtil','sap/ui/comp/odata/MetadataAnalyser','./SmartVariantManagementAdapter','./SmartVariantManagementBase','sap/base/Log','sap/base/util/merge','sap/ui/base/SyncPromise'],function(q,l,V,O,M,S,a,L,m,b){"use strict";var F;var c;var d;
var e=a.extend("sap.ui.comp.smartvariants.SmartVariantManagement",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartvariants/SmartVariantManagement.designtime",properties:{persistencyKey:{type:"string",group:"Misc",defaultValue:null},entitySet:{type:"string",group:"Misc",defaultValue:null},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""}},aggregations:{personalizableControls:{type:"sap.ui.comp.smartvariants.PersonalizableInfo",multiple:true,singularName:"personalizableControl"}},events:{initialise:{},save:{parameters:{tile:{type:"boolean"}}},afterSave:{}}},
renderer:{apiVersion:2}
});
e.prototype.init=function(){a.prototype.init.apply(this);this._bIsInitialized=false;this._bIsVariantAdaptationEnabled=false;this._oStandardVariant=null;this._fRegisteredApplyAutomaticallyOnStandardVariant=null;this._oControlPromise=null;this._oPersoControl=null;this._sAppStandardVariantKey=null;this._mShadowContent={};this._oSelectionVariantHandler={};this._oAppStdContent=null;this._aPersonalizableControls=[];if(this.setLifecycleSupport){this.setLifecycleSupport(true);}this._setBackwardCompatibility(false);this._oAdapter=null;this._bApplyingUIState=false;this.setSupportExecuteOnSelectOnSandardVariant(true);this._mVariants={};this._loadFlex();};
e.prototype.setEntitySet=function(E){this.setProperty("entitySet",E,true);this.attachModelContextChange(this._initializeMetadata,this);this._createMetadataPromise();this._initializeMetadata();return this;};
e.prototype._createMetadataPromise=function(){this._oMetadataPromise=new Promise(function(r,f){this._fResolveMetadataPromise=r;}.bind(this));};
e.prototype._resolveMetadataPromise=function(){if(this._fResolveMetadataPromise){this._fResolveMetadataPromise();}};
e.prototype._initializeMetadata=function(){if(!this.bIsInitialised){O.handleModelInit(this,this._onMetadataInitialised);}};
e.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this.bIsInitialised){var o=new M(this.getModel());if(o){this._oAdapter=new S({selectionPresentationVariants:o.getSelectionPresentationVariantAnnotationList(this.getEntitySet())});this.detachModelContextChange(this._initializeMetadata,this);this.bIsInitialised=true;this._resolveMetadataPromise();}}};
e.prototype.applySettings=function(s){if(!s||!s.hasOwnProperty("useFavorites")){this.setUseFavorites(true);}a.prototype.applySettings.apply(this,arguments);};
e.prototype._createControlWrapper=function(C){var o=null;var f=sap.ui.getCore().byId(C.getControl());if(f){o={control:f,type:C.getType(),dataSource:C.getDataSource(),keyName:C.getKeyName(),loaded:q.Deferred()};}return o;};
e.prototype._getControlWrapper=function(C){var f=this._getAllPersonalizableControls();if(f&&f.length){for(var i=0;i<f.length;i++){if(f[i].control===C){return f[i];}}}return null;};
e.prototype.addPersonalizableControl=function(C){var o,s=C.getControl();var f=sap.ui.getCore().byId(s);if(!f){L.error("couldn't obtain the control with the id="+s);return this;}this.addAggregation("personalizableControls",C,true);o=this._createControlWrapper(C);if(o){this._aPersonalizableControls.push(o);}if(this.isPageVariant()){return this;}this.setPersControler(f);return this;};
e.prototype.getTransportSelection=function(){if(c){return Promise.resolve(c._getTransportSelection());}else{return this._loadFlex().then(function(){return c._getTransportSelection();});}};
e.prototype._loadFlex=function(){var r=function(){return new Promise(function(R){sap.ui.require(["sap/ui/fl/apply/api/SmartVariantManagementApplyAPI","sap/ui/fl/write/api/SmartVariantManagementWriteAPI","sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(f,g,h){F=f;c=g;d=h;R();});});};if(!this._oFlLibrary){if(!this._oPersistencyPromise){this._oPersistencyPromise=new Promise(function(R,f){this._fResolvePersistencyPromise=R;this._fRejectPersistencyPromise=f;}.bind(this));}this._oFlLibrary=new Promise(function(R){sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){r().then(R);});});}return this._oFlLibrary;};
e.prototype.setPersControler=function(C){if(F&&c&&d){this._setPersControler(C);}else{this._loadFlex().then(function(){this._setPersControler(C);}.bind(this));}};
e.prototype._setPersControler=function(C){if(!this._oPersoControl){if(this._isFlexSupported(C)){this._oPersoControl=C;this._handleGetChanges(C);}}};
e.prototype._isFlexSupported=function(C){return d.isFlexSupported({element:C});};
e.prototype.setPersistencyKey=function(k){this.setProperty("persistencyKey",k);this.setPersControler(this);return this;};
e.prototype.isPageVariant=function(){if(this.getPersistencyKey()){return true;}return false;};
e.prototype._getAdapter=function(){return this._oAdapter;};
e.prototype._getFilterBarAdapter=function(){return(this._oSelectionVariantHandler["#"]);};
e.prototype._handleGetChanges=function(C){if(C&&F){this._mShadowContent={};this._oControlPromise=new Promise(function(r,f){Promise.all([this._oMetadataPromise]).then(function(){if(this._bIsBeingDestroyed){return;}var p={control:this._oPersoControl,standardVariant:{id:this.STANDARDVARIANTKEY,name:this._determineStandardVariantName(),executeOnSelection:this.bExecuteOnSelectForStandardViaXML}};if(this._getAdapter()){p.variants=this._getAdapter().getODataVariants();}else if(this._getFilterBarAdapter()){p.variants=this._getFilterBarAdapter().variants;}F.loadVariants(p).then(function(v){this._fResolvePersistencyPromise();r(v);}.bind(this),function(g){this._fRejectPersistencyPromise(g);f(g);}.bind(this));}.bind(this));}.bind(this));}};
e.prototype._getVariantById=function(k){if(this._mVariants&&this._mVariants[k]){return this._mVariants[k];}return null;};
e.prototype.getVariantContent=function(C,k){var p,o=this._getVariantContent(k);if(o&&this.isPageVariant()&&C){p=this._getControlPersKey(C);if(p){o=this._retrieveContent(o,p);}}return o;};
e.prototype._isUIAdaptationMode=function(){return(sap.ui.dt&&sap.ui.dt.OverlayRegistry&&sap.ui.dt.OverlayRegistry.getOverlay(this.getId()));};
e.prototype._getContent=function(v){if(this._mShadowContent[v.getId()]&&this._isUIAdaptationMode()){return this._mShadowContent[v.getId()];}return v.getContent();};
e.prototype.assignShadowContent=function(k,s){this._mShadowContent[k]=s;};
e.prototype._removeShadowContent=function(k){if(this._mShadowContent[k]){delete this._mShadowContent[k];}};
e.prototype._getVariantContent=function(k){var v=this._getVariantById(k);if(v){var C=this._getContent(v);if(C){if((k===this.STANDARDVARIANTKEY)&&(Object.keys(C).length<1)){C=this.getStandardVariant();}return m({},C);}}return null;};
e.prototype._getAllPersonalizableControls=function(){return this._aPersonalizableControls;};
e.prototype.removeAllPersonalizableControls=function(){this.removeAllAggregation("personalizableControls");this._aPersonalizableControls=[];};
e.prototype.removePersonalizableControl=function(C){var p=this.removeAggregation("personalizableControls",C);if(p){this._aPersonalizableControls.some(function(P,i){if(P.control.getId()===p.getControl()){this._aPersonalizableControls.splice(i,1);return true;}return false;}.bind(this));}return p;};
e.prototype.removePersonalizableControlById=function(C){var p=this.getAggregation("personalizableControls");if(p){p.some(function(P,i){if(P.getControl()===C.getId()){this.removePersonalizableControl(P);return true;}return false;}.bind(this));}};
e.prototype._createVariantItem=function(v){this._mVariants[v.getId()]=v;var o=new V({key:v.getId(),global:!v.isUserDependent(),lifecycleTransportId:v.getRequest(),lifecyclePackage:v.getPackage(),namespace:v.getNamespace(),readOnly:!v.isEditEnabled(),labelReadOnly:!v.isRenameEnabled(),favorite:v.getFavorite(),executeOnSelection:this._getExecuteOnSelection(v),author:v.getOwnerId()});if(v.getContexts){o.setContexts(v.getContexts());}o.setText(v.getName());this.addVariantItem(o);};
e.prototype._createVariantEntries=function(v){var s,A=null;this.removeAllVariantItems();if(v){if(v.standardVariant){this._createVariantItem(v.standardVariant);var C=this._getVariantContent(v.standardVariant.getId());if(Object.keys(C).length>0){A=v.standardVariant.getId();}}if(v.variants){v.variants.forEach(function(o){this._createVariantItem(o);}.bind(this));}}if(this._oPersoControl){s=this._getDefaultVariantKey();if(s){this.setInitialSelectionKey(s);}var f=this._isApplicationVariant({control:this._oPersoControl});if(f){this._setIndustrySolutionMode(f);f=this._isVendorLayer();this._setVendorLayer(f);}if(this._getIndustrySolutionMode()&&A){this._sAppStandardVariantKey=A;if(A!==this.STANDARDVARIANTKEY){this.setStandardVariantKey(A);}}if(F&&F.isVariantDownport()){this._enableManualVariantKey(true);}}};
e.prototype._isApplicationVariant=function(o){return F.isApplicationVariant(o);};
e.prototype._isVendorLayer=function(){return F.isVendorLayer();};
e.prototype._addFavorites=function(f){f.forEach(function(E){if(E.key!==this.STANDARDVARIANTKEY){var v=this._getVariantById(E.key);if(v){this._flUpdateVariant(v,{favorite:E.visible});}}}.bind(this));};
e.prototype._flUpdateVariant=function(v,p){var u;var P={control:this._oPersoControl,id:v.getId()};if(p.hasOwnProperty("content")||p.hasOwnProperty("name")){var f=m({},P);f.layer=v.getLayer();if(p.hasOwnProperty("content")){f.content=p.content;}if(p.hasOwnProperty("name")){f.name=p.name;}if(p.hasOwnProperty("packageName")){f.packageName=p.packageName;}if(p.hasOwnProperty("transportId")){f.transportId=p.transportId;}u=this._flWriteUpdateVariant(f);if(u){this._mVariants[u.getId()]=u;}}P={control:this._oPersoControl,id:v.getId()};if(p.hasOwnProperty("favorite")||p.hasOwnProperty("executeOnSelection")){P.isUserDependent=true;if(p.hasOwnProperty("favorite")){P.favorite=p.favorite;}if(p.hasOwnProperty("executeOnSelection")){P.executeOnSelection=p.executeOnSelection;}u=this._flWriteUpdateVariant(P);if(u){this._mVariants[u.getId()]=u;}}};
e.prototype._flRemoveVariant=function(v){var p={control:this._oPersoControl,id:v.getId(),layer:v.getLayer()};var D=this._flWriteRemoveVariant(p);if(D){delete this._mVariants[D.getId()];}};
e.prototype._flWriteUpdateVariant=function(p){if(c){return c.updateVariant(p);}return null;};
e.prototype._flWriteRemoveVariant=function(p){if(c){return c.removeVariant(p);}return null;};
e.prototype._flWriteAddVariant=function(p){if(c){return c.addVariant(p);}return null;};
e.prototype.flWriteOverrideStandardVariant=function(f){if(c){c.overrideStandardVariant({control:this._oPersoControl,executeOnSelection:f});}};
e.prototype.getCurrentVariantId=function(){var k=this._getCurrentVariantId();if(k===this.STANDARDVARIANTKEY){k="";}return k;};
e.prototype._getCurrentVariantId=function(){var k=this.getSelectionKey();return k;};
e.prototype.setCurrentVariantId=function(v,D){var i=this._determineVariantId(v);if(this._oPersoControl){if(!this._oStandardVariant){this._setSelectionByKey(i);}else{this._applyCurrentVariantId(i,D);}}};
e.prototype._applyCurrentVariantId=function(v,D){var o,C;if(this._oPersoControl){o=this._getVariantById(v);if(o){C=this._getVariantContent(v);if(C){this._setSelectionByKey(v);if(!D){if(this.isPageVariant()){this._applyVariants(C,"SET_VM_ID",o.getExecuteOnSelection());}else{this._applyVariant(this._oPersoControl,C,"SET_VM_ID",false,o.getExecuteOnSelection());}}}}}};
e.prototype._determineVariantId=function(v){var i=v;if(!i){i=this.getStandardVariantKey();}else{if(!this.getItemByKey(i)){i=this.getStandardVariantKey();}}return i;};
e.prototype.initialise=function(C,p){var o,E;try{if(p&&C){o=this._getControlWrapper(p);if(!o){L.error("initialise on an unknown control.");return;}if(o.bInitialized){L.error("initialise on "+p.getId()+" already executed");return;}o.fInitCallback=C;}else if(!this.isPageVariant()){o=this._getControlWrapper(this._oPersoControl);}if(this._oPersistencyPromise){this._oPersistencyPromise.then(function(){if(this._oControlPromise&&this._oPersoControl&&o){Promise.all([this._oMetadataPromise,this._oControlPromise,c.isVariantSharingEnabled(),c.isVariantPersonalizationEnabled(),c.isVariantAdaptationEnabled()]).then(function(v){this._dataReceived(v[1],v[2],v[3],v[4],o);}.bind(this),function(g){E="'loadVariants' failed:";if(g&&g.message){E+=(' '+g.messages);}this._errorHandling(E,C,p);}.bind(this),function(g){if(g&&g.message){E=g.message;}else{E="accessing either flexibility functionality or odata metadata.";}this._errorHandling("'initialise' failed: "+E,C,p);}.bind(this));}else{this._errorHandling("'initialise' no personalizable component available",C,p);}}.bind(this),function(g){if(g&&g.message){E=g.message;}else{E="accessing the flexibility functionality.";}this._errorHandling("'initialise' failed: "+E,C,p);}.bind(this));}else{this._errorHandling("'initialise' no '_oPersistencyPromise'  available",C,p);}}catch(f){this._errorHandling("exception occurs during 'initialise' processing",C,p);}};
e.prototype._errorHandling=function(E,C,p){var f={variantKeys:[]};this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"),E);if(C&&p){C.call(p);}else{this.fireEvent("initialise",f);}if(p.variantsInitialized){p.variantsInitialized();}};
e.prototype.isVariantAdaptationEnabled=function(){return this._bIsVariantAdaptationEnabled;};
e.prototype._dataReceived=function(v,i,I,f,C){var D,k,p={variantKeys:[]};if(this._bIsBeingDestroyed){return;}if(!this._bIsInitialized){this._bIsVariantAdaptationEnabled=f;this.setVariantCreationByUserAllowed(I);this.setShowShare(i);this._bIsInitialized=true;this._createVariantEntries(v);k=this._getDefaultVariantKey();if(k){D=this._getVariantById(k);if(D){this.setDefaultVariantKey(k);this.setInitialSelectionKey(k);}}if(this._sAppStandardVariantKey){this._oAppStdContent=this._getVariantContent(this._sAppStandardVariantKey);}}this._initialize(p,C);};
e.prototype._initialize=function(p,C){var k,o=null,i=this.isPageVariant();var v,E=false;if(this._oAppStdContent){if((C.type==="table")||(C.type==="chart")){if(i){this._applyControlVariant(C.control,this._oAppStdContent,"STANDARD",true);}else{this._applyVariant(C.control,this._oAppStdContent,"STANDARD",true);}}}if(C.fInitCallback){C.fInitCallback.call(C.control);delete C.fInitCallback;C.bInitialized=true;}else{p.variantKeys=Object.keys(this._mVariants);this.fireEvent("initialise",p);}k=this.getSelectionKey();if(k&&(k!==this.getStandardVariantKey())){o=this._getVariantContent(k);v=this._getVariantById(k);if(v){E=v.getExecuteOnSelection();}}else if(this._oAppStdContent){o=this._oAppStdContent;if((C.type==="table")||(C.type==="chart")){o=null;}}var r;if(this._sAppStandardVariantKey){r=this._updateStandardVariant(C,this._oAppStdContent);}else{r=this._setStandardVariant(C);}b.resolve(r).then(function(r){C.loaded.resolve();if(o){if(i){this._applyControlVariant(C.control,o,"INIT",true,E);}else{this._applyVariant(C.control,o,"INIT",true,E);}}if(this.bConsiderXml!==undefined){this._executeOnSelectForStandardVariantByXML(this.bConsiderXml);}if(C.control.variantsInitialized){C.control.variantsInitialized();}if(this._getCurrentVariantId()===this.getStandardVariantKey()){if(this._getApplyAutomaticallyOnStandardVariant()&&C.control.search){C.control.search();}if(this.getExecuteOnSelectForStandardVariant()&&this._oAppStdContent){var I=this.getItemByKey(this._getCurrentVariantId());if(I){I.setExecuteOnSelection(true);}}}if(!this.getEnabled()){this.setEnabled(true);}}.bind(this)).catch(function(f){L.error("'_initialize' throws an exception:"+f.message);}).unwrap();};
e.prototype._updateVariant=function(v){if(this._isIndustrySolutionModeAndVendorLayer()||(v.key!==this.getStandardVariantKey())){if(v){var o=this._getVariantById(v.key);if(o){try{return b.resolve(this._fetchContentAsync()).then(function(C){if(C){var i=this.getItemByKey(v.key);if(this._isIndustrySolutionModeAndVendorLayer()&&(v.key===this.getStandardVariantKey())){C.standardvariant=true;}var p={content:C};if((v.lifecycleTransportId!==null)&&(v.lifecycleTransportId!==undefined)){p.transportId=v.lifecycleTransportId;}if((v.lifecyclePackage!==null)&&(v.lifecyclePackage!==undefined)){p.packageName=v.lifecyclePackage;}if(i){p.executeOnSelection=i.getExecuteOnSelection();}this._flUpdateVariant(o,p);if(v.def===true){this._setDefaultVariantKey(v.key);}}this._save(false);this.setEnabled(true);}.bind(this)).catch(function(f){L.error("'_updateVariant' throws an exception:"+f.message);}).unwrap();}catch(f){L.error("'_updateVariant' throws an exception");}}}}};
e.prototype._createChangeHeader=function(){if(this.isPageVariant()){return{type:"page",dataService:"n/a"};}var C=this._getAllPersonalizableControls();if(C&&C.length>0){return{type:C[0].type,dataService:C[0].dataSource};}};
e.prototype._newVariant=function(v){var i,I=false;if(v){var t=this._createChangeHeader();var u=!v.global;var p="";if((v.lifecyclePackage!==null)&&(v.lifecyclePackage!==undefined)){p=v.lifecyclePackage;}var T="";if((v.lifecycleTransportId!==null)&&(v.lifecycleTransportId!==undefined)){T=v.lifecycleTransportId;}i=this._isVariantDownport()?v.key:null;if(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===this.STANDARDVARIANTKEY)){if((T||p)&&(v.name===this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"))){this.setStandardVariantKey(i);I=true;}}return b.resolve(this._fetchContentAsync()).then(function(C){if(C){if(I){C.standardvariant=true;}}var P={type:t.type,ODataService:t.dataSource,texts:{variantName:v.name},content:C,isVariant:true,packageName:p,isUserDependent:u,executeOnSelection:v.exe,id:i};var o=this._flWriteAddVariant({control:this._oPersoControl,changeSpecificData:P});if(o){i=o.getId();this._mVariants[i]=o;if(!this._isVendorLayer()){this._flUpdateVariant(o,{favorite:true});}if(v.implicit&&!this.verifyVariantKey(v.key)){v.key=this.createVariantEntry(v);}this.replaceKey(v.key,i);this.setInitialSelectionKey(i);if(this._isIndustrySolutionModeAndVendorLayer()&&((v.key===this.STANDARDVARIANTKEY)||this._isVariantDownport())){this.setStandardVariantKey(i);}if(v.def===true){this._setDefaultVariantKey(i);}o.setRequest(T);var f=this.getItemByKey(i);if(f){f.setNamespace(o.getNamespace());f.setFavorite(true);}this._save(true);this.setEnabled(true);}}.bind(this)).catch(function(f){L.error("'_newVariant' throws an exception:"+f.message);}).unwrap();}};
e.prototype._setFavorite=function(i){var I=this.getItemByKey(i);if(I){I.setFavorite(true);}this._addFavorites([{key:i,visible:true}]);};
e.prototype._fetchContent=function(){var C,p,o,f={};var g=this._getAllPersonalizableControls();for(var i=0;i<g.length;i++){C=g[i];if(C&&C.control&&C.control.fetchVariant){o=C.control.fetchVariant();if(o){o=m({},o);if(this.isPageVariant()){p=this._getControlPersKey(C);if(p){f=this._assignContent(f,o,p);}else{L.error("no persistancy key retrieved");}}else{f=o;break;}}}}return f;};
e.prototype._fetchContentAsync=function(){var C,p,o,f={},g=[],h=[];var j=this._getAllPersonalizableControls();for(var i=0;i<j.length;i++){C=j[i];if(C&&C.control&&C.control.fetchVariant){o=C.control.fetchVariant();if(o){if(o&&o instanceof Promise){this.setEnabled(false);g.push(o);h.push(C);continue;}o=m({},o);if(this.isPageVariant()){p=this._getControlPersKey(C);if(p){f=this._assignContent(f,o,p);}else{L.error("no persistancy key retrieved");}}else{f=o;break;}}}}if(g.length>0){var r=null;var P=new Promise(function(k,n){r=k;});Promise.all(g).then(function(k){for(var i=0;i<k.length;i++){o=m({},k[i]);if(this.isPageVariant()){p=this._getControlPersKey(h[i]);if(p){f=this._assignContent(f,o,p);}else{L.error("no persistancy key retrieved");}}else{f=o;break;}}r(f);}.bind(this));return P;}else{return f;}};
e.prototype._getControlInfoPersKey=function(C){var p=null;if(C.keyName==="id"){p=C.control.getId();}else{p=C.control.getProperty(C.keyName);}return p;};
e.prototype._getControlPersKey=function(C){var o=C;if(!C.keyName){o=this._getControlWrapper(C);}return this._getControlInfoPersKey(o);};
e.prototype._appendLifecycleInformation=function(v,i){var t;var I=this.getItemByKey(i);if(I){t=I.getLifecycleTransportId();if(t===null||t===undefined){t="";}}return t;};
e.prototype._renameVariant=function(v){if(v.key!==this.getStandardVariantKey()){if(v){var o=this._getVariantById(v.key);if(o){var p={name:v.name};var t=this._appendLifecycleInformation(o,v.key);if(t!=undefined){p.transportId=t;}this._flUpdateVariant(o,p);}}}};
e.prototype._deleteVariants=function(v){var t;if(v&&v.length){var s=this._getDefaultVariantKey();for(var i=0;i<v.length;i++){if(v[i]===this.getStandardVariantKey()){if(!this._isIndustrySolutionModeAndVendorLayer()){continue;}else{this.setStandardVariantKey(this.STANDARDVARIANTKEY);}}var o=this._getVariantById(v[i]);if(o){t=this._appendLifecycleInformation(o,v[i]);o.setRequest(t);this._flRemoveVariant(o);if(s&&s===v[i]){this._setDefaultVariantKey("");}}}}};
e.prototype._getDefaultVariantKey=function(){var D="";if(F){D=F.getDefaultVariantId({control:this._oPersoControl});}return D;};
e.prototype._executeOnSelectForStandardVariantByXML=function(s){a.prototype._executeOnSelectForStandardVariantByXML.apply(this,arguments);this._reapplyExecuteOnSelectForStandardVariant(s);};
e.prototype._reapplyExecuteOnSelectForStandardVariant=function(s){if(Object.keys(this._mVariants).length>0){this.bConsiderXml=undefined;this.flWriteOverrideStandardVariant(s);var f=this.getStandardVariantKey();var v=this._getVariantById(f);if(v){var o=this.getItemByKey(f);if(o){o.setExecuteOnSelection(v.getExecuteOnSelection());}}}else{this.bConsiderXml=s;}};
e.prototype.setExecuteOnStandard=function(s){this._reapplyExecuteOnSelectForStandardVariant(s);};
e.prototype.getExecuteOnStandard=function(){var s=this.getStandardVariantKey();var o=this.getItemByKey(s);if(o){return o.getExecuteOnSelection();}return undefined;};
e.prototype.registerApplyAutomaticallyOnStandardVariant=function(C){this._fRegisteredApplyAutomaticallyOnStandardVariant=C;return this;};
e.prototype._getApplyAutomaticallyOnStandardVariant=function(){var E=this.getExecuteOnSelectForStandardVariant();if(this._fRegisteredApplyAutomaticallyOnStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant()){try{E=this._fRegisteredApplyAutomaticallyOnStandardVariant();}catch(f){L.error("callback for determination of apply automatically on standard variant failed");}}return E;};
e.prototype._setDefaultVariantKey=function(v){if(c){c.setDefaultVariantId({control:this._oPersoControl,defaultVariantId:v});}};
e.prototype._isVariantDownport=function(){var D=false;if(F){D=F.isVariantDownport();}return D;};
e.prototype._getExecuteOnSelection=function(v){return v.getExecuteOnSelection();};
e.prototype._setExecuteOnSelections=function(v){if(v&&v.length){for(var i=0;i<v.length;i++){var o=this._getVariantById(v[i].key);if(o){this._flUpdateVariant(o,{executeOnSelection:v[i].exe});}}}};
e.prototype._save=function(n,i){if(c){try{c.save({control:this._oPersoControl}).then(function(){if(!i){if(n){this._updateUser();}this.fireEvent("afterSave");}}.bind(this),function(g){var E="'_save' failed:";if(g&&g.message){E+=(' '+g.message);}this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"),E);}.bind(this));}catch(f){this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"),"'_save' throws an exception");}}};
e.prototype._updateUser=function(){var i=this.getInitialSelectionKey();var u,v=this._getVariantById(i);if(v){u=v.getOwnerId();if(u){this._assignUser(i,u);}}};
e.prototype.fireSave=function(v){var E={};if(v){if(v.hasOwnProperty("tile")){E.tile=v.tile;}if(v.overwrite){if(this._isIndustrySolutionModeAndVendorLayer()||(v.key!==this.getStandardVariantKey())){this.fireEvent("save",E);if(v.key===this.STANDARDVARIANTKEY){this._newVariant(v);}else{this._updateVariant(v);}}}else{this.fireEvent("save",E);this._newVariant(v);}}};
e.prototype.fireManage=function(v){var i,D=false;if(v){if(v.renamed){for(i=0;i<v.renamed.length;i++){this._renameVariant(v.renamed[i]);}}if(v.deleted){this._deleteVariants(v.deleted);}if(v.exe){this._setExecuteOnSelections(v.exe);}if(v.def){var s=this._getDefaultVariantKey();if(s!==v.def){if(!((s==="")&&(v.def===this.STANDARDVARIANTKEY))){this._setDefaultVariantKey(v.def);D=true;}}}if(v.fav&&(v.fav.length>0)){this._addFavorites(v.fav);}if((v.deleted&&v.deleted.length>0)||(v.renamed&&v.renamed.length>0)||(v.exe&&v.exe.length>0)||D){this._save();}else if(v.fav&&(v.fav.length>0)){this._save(false,true);}this.fireEvent("manage",v);}};
e.prototype.fireSelect=function(v,C){if(this._oPersoControl&&v&&v.key){this._triggerSelectVariant(v.key,C);this.fireEvent("select",v);}};
e.prototype._selectVariant=function(v,C){this.fireSelect({key:v},C);};
e.prototype._checkForSelectionHandler=function(v){var h=null,H=Object.keys(this._oSelectionVariantHandler);if(H.length>-1){H.some(function(k){if(v.indexOf(k)===0){h=this._oSelectionVariantHandler[k];return true;}return false;}.bind(this));}return h;};
e.prototype._triggerSelectVariant=function(v,C){var E,o,h=false,H=this._checkForSelectionHandler(v);var f=this._getVariantById(v);if(f){E=f.getExecuteOnSelection();if(v===this.getStandardVariantKey()){E=this._getApplyAutomaticallyOnStandardVariant();}h=(Object.entries(this._getContent(f)).length===0)?false:true;}if(h){o=this._getGeneralSelectVariantContent(v,C);}else if(this._getAdapter()&&(v.substring(0,1)==="#")){this._applyUiState(v,C,E);return;}else if(H){o=this._getSpecialSelectVariantContent(v,C,H);}else{o=this._getGeneralSelectVariantContent(v,C);}if(o){if(this.isPageVariant()){this._applyVariants(o,C,E);}else{this._applyVariant(this._oPersoControl,o,C,false,E);}}};
e.prototype._getSpecialSelectVariantContent=function(v,C,h){return h.callback.call(h.handler,v,C);};
e.prototype._getGeneralSelectVariantContent=function(v,C){var o=this._getVariantContent(v);if(o){o=m({},o);}return o;};
e.prototype.currentVariantSetModified=function(f){if(!this._bApplyingUIState){a.prototype.currentVariantSetModified.apply(this,arguments);}};
e.prototype._applyControlUiState=function(C,o){if(C&&o){C.loaded.then(function(){if(C.control.setUiStateAsVariant){C.control.setUiStateAsVariant(o);}});}};
e.prototype._applyUiState=function(v,C,E){var i,A=this._getAdapter(),o=null,f=this._getAllPersonalizableControls();var s=null;if(A){o=A.getUiState(v);this._bApplyingUIState=true;for(i=0;i<f.length;i++){if(f[i]&&f[i].control&&f[i].loaded){this._applyControlUiState(f[i],o,C);if(f[i].control.search){s=f[i].control;}}}this._bApplyingUIState=false;if(E&&s){s.search();}}};
e.prototype._applyControlWrapperVariants=function(C,o,s,E){if(C){C.loaded.then(function(){this._applyControlVariant(C.control,o,s,false,E);}.bind(this));}};
e.prototype._applyVariants=function(C,s,E){var i,f=this._getAllPersonalizableControls();for(i=0;i<f.length;i++){if(f[i]&&f[i].control&&f[i].loaded){this._applyControlWrapperVariants(f[i],C,s,E);}}};
e.prototype._setStandardVariant=function(C){var o=C.control;if(o){if(o.fireBeforeVariantSave){o.fireBeforeVariantSave(l.STANDARD_VARIANT_NAME);}return this._assignStandardVariantAsync(C);}};
e.prototype._retrieveContent=function(C,p){var r=C;if(this.isPageVariant()&&C){r=C[p];if(!r&&(p===this.getPersistencyKey())&&this._aPersonalizableControls&&this._aPersonalizableControls.length===1){r=C;}}return r;};
e.prototype._assignContent=function(t,C,p){if(this.isPageVariant()){t[p]=C;}else{t=C;}return t;};
e.prototype._updateStandardVariant=function(C,o){if(C.control){var f=o;if(this.isPageVariant()){var p=this._getControlPersKey(C);if(p){f=this._retrieveContent(o,p);}}return this._assignStandardVariantForControl(C,f);}return o;};
e.prototype._assignStandardVariantAsync=function(C){var s=null;if(C.control){if(C.control.fetchVariant){s=C.control.fetchVariant();}if(s instanceof Promise){this.setEnabled(false);}return b.resolve(s).then(function(s){return this._assignStandardVariantForControl(C,s);}.bind(this)).catch(function(f){L.error("'_assignStandardVariant' throws an exception: "+f.message);}).unwrap();}return null;};
e.prototype._assignStandardVariantForControl=function(C,s){var o=s;if(C){if(this.isPageVariant()){var p=this._getControlPersKey(C.control);if(p){if(!this._oStandardVariant){this._oStandardVariant={};}this._oStandardVariant=this._assignContent(this._oStandardVariant,o,p);}}else{this._oStandardVariant=o;}}return this._oStandardVariant;};
e.prototype.getStandardVariant=function(C){var p,o,f=null;if(this._oStandardVariant){if(!C){f=this._oStandardVariant;}else{if(this.isPageVariant()){o=this._getControlWrapper(C);if(o){p=this._getControlPersKey(C);if(p){f=this._retrieveContent(this._oStandardVariant,p);}}}else{if((C===this._oPersoControl)){f=this._oStandardVariant;}}}}return f;};
e.prototype._applyVariant=function(C,o,s,i,E){if(C&&C.applyVariant){if(E!=undefined){o.executeOnSelection=E;}C.applyVariant(o,s,i);}};
e.prototype._applyVariantByPersistencyKey=function(p,C,s){var o=null;this.getAggregation("personalizableControls",[]).some(function(P){var g=sap.ui.getCore().byId(P.getControl());if(g){var h=P.getKeyName();if(g.getProperty(h)===p){o=g;}return o!=null;}});if(o){var f=this._retrieveContent(C,p);this._applyVariant(o,f,s);}};
e.prototype._applyControlVariant=function(C,o,s,i,E){var f,p;p=this._getControlPersKey(C);if(p){f=this._retrieveContent(o,p);if(f){this._applyVariant(C,f,s,i,E);}}};
e.prototype.registerSelectionVariantHandler=function(h,k){this._oSelectionVariantHandler[k]=h;};
e.prototype.unregisterSelectionVariantHandler=function(h){var E=null;if(!this._oSelectionVariantHandler){return;}if(typeof h==='string'){E=h;}else{Object.keys(this._oSelectionVariantHandler).some(function(k){if(this._oSelectionVariantHandler[k].handler===h){E=k;return true;}return false;}.bind(this));}if(E){delete this._oSelectionVariantHandler[E];}};
e.prototype._setErrorValueState=function(t,s){this.setInErrorState(true);if(s){L.error(s);}};
e.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._aFavorites=null;this._aPersonalizableControls=null;this._fRegisteredApplyAutomaticallyOnStandardVariant=null;this._fResolvePersistencyPromise=null;this._fRejectPersistencyPromise=null;this._fResolveMetadataPromise=null;this._oMetadataPromise=null;this._fResolveMetadataPromise=null;this._oControlPromise=null;this._oFlLibrary=null;this._oPersistencyPromise=null;this._oPersoControl=null;this._oAppStdContent=null;this._sAppStandardVariantKey=null;this._oSelectionVariantHandler=null;this._aFavoriteChanges=null;if(this._oAdapter){this._oAdapter.destroy();this._oAdapter=null;}this._mVariants=null;this._mShadowContent=null;};
return e;});
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagementAdapter',['sap/ui/comp/library','sap/ui/comp/variants/VariantItem','sap/ui/comp/state/UIState','sap/ui/core/Element'],function(l,V,U,E,A,C){"use strict";
var S=E.extend("sap.ui.comp.smartvariants.SmartVariantManagementAdapter",{metadata:{library:"sap.ui.comp",properties:{selectionPresentationVariants:{type:"object",group:"Misc",defaultValue:false}}}});
S.prototype.getUiState=function(k){var c,s=null,K=k.substring(1);this.getSelectionPresentationVariants().some(function(o){if(o.qualifier===K){s=o;}return s!==null;});if(s){if(s.uiStateContent){c=s.uiStateContent;}else{c=U.createFromSelectionAndPresentationVariantAnnotation(s.text,s.selectionVariant?s.selectionVariant.annotation:null,s.presentationVariant?s.presentationVariant.annotation:null);s.uiStateContent=c;}}return c;};
S.prototype.getODataVariants=function(){var k="#",v=[];var s=this.getSelectionPresentationVariants();if(s){s.forEach(function(o){if(o.qualifier){var a=k+o.qualifier;v.push({id:a,favorite:true,name:o.text});}});}return v;};
S.prototype._getExecuteOnSelection=function(v,k){var a=v.getProperty("adaptationInfo");if(a&&a.executeOnSelect){return!!a.executeOnSelect[k];}return false;};
S.prototype.destroy=function(){E.prototype.destroy.apply(this,arguments);};
return S;});
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagementBase',['sap/ui/Device','sap/ui/core/library','sap/ui/core/Icon','sap/base/Log','sap/base/util/merge','sap/m/library','sap/m/ObjectIdentifier','sap/m/RadioButton','sap/m/CheckBox','sap/m/Text','sap/m/Button','sap/m/Input','sap/m/HBox','sap/m/Dialog','sap/ui/comp/variants/VariantItem','sap/ui/comp/variants/EditableVariantItem','sap/ui/comp/variants/VariantManagement'],function(D,c,I,L,m,a,O,R,C,T,B,b,H,d,V,E,e){"use strict";var f=c.ValueState;var g=c.VerticalAlign;var h=a.ButtonType;
var S=e.extend("sap.ui.comp.smartvariants.SmartVariantManagementBase",{
metadata:{library:"sap.ui.comp"},
renderer:{apiVersion:2}
});
S.prototype.init=function(){e.prototype.init.apply(this);};
S.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oRolesComponent){this._oRolesComponent=null;}if(this._oInfoPopup){this._oInfoPopup.destroy();this._oInfoPopup=null;}if(this._oRolesDialog){this._oRolesDialog.destroy();this._oRolesDialog=null;}};
S.prototype.getPersonalizableControlPersistencyKey=function(){if(this.isPageVariant()){return this.getPersistencyKey();}var p=this._getAllPersonalizableControls();if(p&&(p.length===1)){return this._getControlPersKey(p[0]);}return null;};
S.prototype.addVariant=function(v,i){this._createVariantItem(v);if(i){this.setDefaultVariantId(v.getId());}};
S.prototype.removeVariant=function(p){if(p.variantId){var v=this.getItemByKey(p.variantId);if(v){this.removeVariantItem(v);v.destroy();}delete this._mVariants[p.variantId];}if(p.previousVariantId){this.activateVariant(p.previousVariantId);}if(p.previousDefault){this.setDefaultVariantId(p.previousDefault);}};
S.prototype.removeWeakVariant=function(p){if(p.variantId){var v=this.getItemByKey(p.variantId);if(v){this.removeVariantItem(v);v.destroy();}delete this._mVariants[p.variantId];}if(p.previousVariantId){this.setInitialSelectionKey(p.previousVariantId);}if(p.previousDirtyFlag){this.setModified(p.previousDirtyFlag);}if(p.previousDefault){this.setDefaultVariantId(p.previousDefault);}};
S.prototype.updateVariant=function(v){var o;if(v){o=this.getItemByKey(v.getId());if(o){o.setExecuteOnSelection(this._getExecuteOnSelection(v));o.setFavorite(v.getFavorite());o.setText(v.getText("variantName"));if(v.getContexts){o.setContexts(v.getContexts());}}}};
S.prototype.activateVariant=function(v){this._setSelectionByKey(v);this.setModified(false);this.fireSelect({key:v});};
S.prototype.getAllVariants=function(){var i,j=this.getVariantItems();if(!j||(j.length<1)){return[];}i=j[0];j.splice(0,1);j.sort(this._compareItems);j.splice(0,0,i);var s=[];j.forEach(function(i){s.push(this._getVariantById(i.getKey()));}.bind(this));return s;};
S.prototype.getModified=function(){return this.currentVariantGetModified();};
S.prototype.setModified=function(v){return this.currentVariantSetModified(v);};
S.prototype.getDefaultVariantId=function(){return this.getDefaultVariantKey();};
S.prototype.setDefaultVariantId=function(v){this.setDefaultVariantKey(v);};
S.prototype.getPresentVariantId=function(){return this.getCurrentVariantId()?this.getCurrentVariantId():this.STANDARDVARIANTKEY;};
S.prototype.getPresentVariantText=function(){return this._getVariantText();};
S.prototype.getPresentVariantContent=function(){return this._getContentAsync();};
S.prototype._getPersoController=function(){return this._oPersoControl;};
S.prototype._getPersoControllerType=function(){if(this.isPageVariant()){return"page";}var p=this._getAllPersonalizableControls();if(p&&(p.length===1)){return p[0].type;}return null;};
S.prototype.getTitle=function(){return this.oVariantText;};
S.prototype.isNameDuplicate=function(n){var v=n.trim();return this._isDuplicateSaveAs(v);};
S.prototype.isNameTooLong=function(n){var v=n.trim();return(v.length>e.MAX_NAME_LEN);};
S.prototype.setStandardItemText=function(n){e.prototype.setStandardItemText.apply(this,arguments);if(this.oVariantList){var v=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(v){v.setText(n);}}};
S.prototype._executeOnSelectForStandardVariantByXML=function(s){e.prototype._executeOnSelectForStandardVariantByXML.apply(this,arguments);};
S.prototype.getExecuteOnSelectForStandardVariant=function(){var i=e.prototype.getExecuteOnSelectForStandardVariant.apply(this,arguments);var s=this.getItemByKey(this.getStandardVariantKey());if(s){i=s.getExecuteOnSelection();}return i;};
S.prototype._createStandardVariantListItem=function(){var s=this.getVariantItems()[0];var v=new V(this.oVariantPopoverTrigger.getId()+"-item-standard",{key:s.getKey()});v.setText(this._determineStandardVariantName());this._setVariantListItemProperties(s,v);if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){v.setAuthor(this.getStandardItemAuthor());v.setExecuteOnSelection(this.getExecuteOnSelectForStandardVariant());}return v;};
S.prototype._restoreCompleteList=function(i){var j,o,k,v,s;this.oVariantList.destroyItems();s=this._createStandardVariantListItem();if(s){if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===s.getKey()){this.oVariantList.setSelectedItem(s);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==s.getKey()||this.getSelectionKey()===null){this.oVariantList.setSelectedItem(s);}}}k=this.getVariantItems();k.sort(this._compareItems);if(s){this.oVariantList.insertItem(s,0);}for(j=0;j<k.length;j++){o=k[j];if(!this._considerItem(i,o)){continue;}if(o.getKey()===this.getStandardVariantKey()){continue;}v=this.oVariantList.getItemByKey(o.getKey());if(!v){v=this._createVariantListItem(o,j);this.oVariantList.addItem(v);}if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===v.getKey()){this.oVariantList.setSelectedItem(v);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==v.getKey()){this.oVariantList.setSelectedItem(v);}}}};
S.prototype._determineTooltip=function(i){var t;if(i.getReadOnly()){t=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");}else if(i.getLabelReadOnly()){t=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");}if(i.getKey()===this.getStandardVariantKey()){t=this.oResourceBundle.getText("VARIANT_MANAGEMENT_INFO");}return t;};
S.prototype._checkManageItemNameChangeKeyUser=function(i,o){var t=i.getValue().trim();var k=o.getKey();this._checkVariantNameConstraints(i,this.oManagementTable);if(i.getValueState()===f.Error){return;}if(this.oVariantList.getItemByKey(k).getText().trim()===t){return;}this._mTitleChanges[k]=t;};
S.prototype._getVariantByKeyFromManageKeyUser=function(k){var v=null;this.oManagementTable.getItems().some(function(i){if(i.getKey()===k){v=i;}return(v!=null);});return v;};
S.prototype._getStandardVariantFromManageKeyUser=function(){return this._getVariantByKeyFromManageKeyUser(this.getStandardVariantKey());};
S.prototype._getDefaultedEntryFromManageDefaultKeyUser=function(){var o=null;this.oManagementTable.getItems().some(function(i){if(i.getCells()[e.DEF_COLUMN].getSelected()){o=i;}return(o!=null);});return o;};
S.prototype._handleManageDeletePressedKeyUser=function(o,i,s){var j=this._getDefaultedEntryFromManageDefaultKeyUser();if(j&&(j.getKey()===i.getKey())){var k=this._getStandardVariantFromManageKeyUser();if(k){k.getCells()[e.DEF_COLUMN].setSelected(true);this._sDefaultChanges=k.getKey();if(s){var F=k.getCells()[e.FAV_COLUMN];if(F&&this._isFavoriteSelected(F)){s(k,F,true);}}}}this.oManagementTable.removeItem(i);this._anyInErrorState(this.oManagementTable,i.getCells()[e.NAME_COLUMN]);this._mDeletedChanges[i.getKey()]=true;i.destroy();};
S.prototype._checkAndAddRolesContainerToManageDialog=function(){if(this._oRolesComponentContainer&&this._oRolesDialog){var r=null;this._oRolesDialog.getContent().some(function(o){if(o===this._oRolesComponentContainer){r=o;return true;}return false;}.bind(this));if(!r){this._oRolesDialog.addContent(this._oRolesComponentContainer);}}};
S.prototype._determineRolesSpecificText=function(i,t){if(i&&t){t.setText(this.oResourceBundle.getText((i.role&&i.role.length>0)?"VARIANT_MANAGEMENT_VISIBILITY_RESTRICTED":"VARIANT_MANAGEMENT_VISIBILITY_NON_RESTRICTED"));}};
S.prototype._checkAndCreateContextInfoChanges=function(k,t){if(k){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){var i=this._getSelectedContexts();this._mContextInfoChanges[k]=i;this._determineRolesSpecificText(i,t);}else{return false;}}catch(j){return false;}}return true;}return false;};
S.prototype._createRolesDialog=function(){if(!this._oRolesDialog){this._oRolesDialog=new d(this.getId()+"-roledialog",{draggable:true,resizable:true,contentWidth:"40%",title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SELECTROLES_DIALOG"),beginButton:new B(this.getId()+"-rolesave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),type:h.Emphasized,press:function(){if(!this._checkAndCreateContextInfoChanges(this._oCurrentContextsKey,this._oTextControl)){return;}this._oRolesDialog.close();}.bind(this)}),endButton:new B(this.getId()+"-rolecancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._oRolesDialog.close();}.bind(this)}),content:[this._oRolesComponentContainer],stretch:D.system.phone});this._oRolesDialog.setParent(this);this._oRolesDialog.addStyleClass("sapUiContentPadding");this._oRolesDialog.addStyleClass(this._sStyleClassKeyUser);this._oRolesDialog.isPopupAdaptationAllowed=function(){return false;};}this._checkAndAddRolesContainerToManageDialog();};
S.prototype._openRolesDialog=function(i,t){this._createRolesDialog();this._oCurrentContextsKey=i.getKey();this._oTextControl=t;var j=i.getContexts();if(this._mContextInfoChanges[this._oCurrentContextsKey]){j=this._mContextInfoChanges[this._oCurrentContextsKey];}this._setSelectedContexts(j);this._oRolesDialog.open();};
S.prototype._createEntriesForManageViewsDialog=function(i,j,k){var o,n,t,l,p,q,r;var s=this.getDefaultVariantId();var u,v=this._determineTooltip(i);var M=new E(this.oVariantManage.getId()+"-edit-"+j,{key:i.getKey(),global:i.getGlobal(),readOnly:i.getReadOnly(),author:i.getAuthor(),favorite:i.getFavorite(),labelReadOnly:i.getLabelReadOnly(),lifecyclePackage:i.getLifecyclePackage(),lifecycleTransportId:i.getLifecycleTransportId(),namespace:i.getNamespace(),vAlign:g.Middle});var w=this._getVariantById(i.getKey());if(this._fGetDataForKeyUser){var x=m({},i.getContexts());if(!x.hasOwnProperty("role")){x.role=[];}M.setContexts(x);}o=new I(this.oVariantManage.getId()+"-fav-"+j,{});this._setFavoriteIcon(o,i.getFavorite());if(i.getKey()===this.getStandardVariantKey()){o.addStyleClass("sapUICompVarMngmtFavNonInteractiveColor");}else{o.addStyleClass("sapUICompVarMngmtFavColor");o.attachPress(k.selectFavorite);}M.addCell(o);if(this._fGetDataForKeyUser){if(w&&!w.isRenameEnabled(this._sLayer)){n=new O(this.oVariantManage.getId()+"-text-"+j);n.setTitle(i.getText());if(v){n.setTooltip(v);}}else{n=new b(this.oVariantManage.getId()+"-input-"+j,{liveChange:k.inputLiveChange,change:k.inputChange});n.setValue(i.getText());}}else{if(i.getLabelReadOnly()||!this.getVariantCreationByUserAllowed()){n=new O(this.oVariantManage.getId()+"-text-"+j);n.setTitle(i.getText());if(v){n.setTooltip(v);}}else{n=new b(this.oVariantManage.getId()+"-input-"+j,{liveChange:k.inputLiveChange,change:k.inputChange});n.setValue(i.getText());}}M.addCell(n);if(this._fGetDataForKeyUser){t=new T();}else{if(i.getGlobal()){u=this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARED");}else{u=this.oResourceBundle.getText("VARIANT_MANAGEMENT_PRIVATE");}t=new T(this.oVariantManage.getId()+"-type-"+j,{text:u,wrapping:false});t.addStyleClass("sapUICompVarMngmtType");}M.addCell(t);l=new R(this.oVariantManage.getId()+"-def-"+j,{groupName:this.oVariantManage.getId(),select:k.selectDefault});if(this._fGetDataForKeyUser){if((s===i.getKey())||(i.getKey()===this.getStandardVariantKey())&&(s==="")){l.setSelected(true);}}else{if(this.sNewDefaultKey===i.getKey()||i.getKey()===this.getStandardVariantKey()&&this.sNewDefaultKey===""){l.setSelected(true);this._setFavoriteIcon(o,true);}}if(l.getSelected()&&o){if(o.hasStyleClass("sapUICompVarMngmtFavColor")){o.removeStyleClass("sapUICompVarMngmtFavColor");o.addStyleClass("sapUICompVarMngmtFavNonInteractiveColor");}}M.addCell(l);if(this.getDisplayTextForExecuteOnSelectionForStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&i.getKey()===this.getStandardVariantKey()){p=new C(this.oVariantManage.getId()+"-exe-"+j,{enabled:true,wrapping:true,text:this.getDisplayTextForExecuteOnSelectionForStandardVariant(),select:k.executeOnSelect});if(this.bExecuteOnSelectForStandardByUser!==null){p.setSelected(this.bExecuteOnSelectForStandardByUser);}else{p.setSelected(i.getExecuteOnSelection());}}else{p=new C(this.oVariantManage.getId()+"-exe-"+j,{selected:false,enabled:true,text:"",select:k.executeOnSelect});if(i.getKey()===this.getStandardVariantKey()){p.setEnabled(true);if(this.bExecuteOnSelectForStandardByUser!==null){p.setSelected(this.bExecuteOnSelectForStandardByUser);}else{p.setSelected(i.getExecuteOnSelection());}}else{p.setSelected(i.getExecuteOnSelection());}}M.addCell(p);if(this._fGetDataForKeyUser&&(i.getKey()!==this.getStandardVariantKey())){var y=new T({wrapping:false});this._determineRolesSpecificText(i.getContexts(),y);var z=new I({src:"sap-icon://edit",press:k.rolesPressed});z.addStyleClass("sapUiCompVarMngmtRolesEdit");z.setTooltip(this.oResourceBundle.getText("VARIANT_MANAGEMENT_VISIBILITY_ICON_TT"));r=new H(this.oVariantManage.getId()+"-role-"+j,{items:[y,z]});r.addStyleClass("sapUICompVarMngmtRole");}else{r=new T();}M.addCell(r);t=new T(this.oVariantManage.getId()+"-author-"+j,{text:i.getAuthor(),textAlign:"Begin"});M.addCell(t);q=new B(this.oVariantManage.getId()+"-del-"+j,{icon:"sap-icon://decline",enabled:true,type:h.Transparent,press:k.deletePressed,tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DELETE")});if(this._fGetDataForKeyUser){if(w){q.setEnabled(w.isDeleteEnabled(this._sLayer));if((i.getKey()===this.getStandardVariantKey())||(i.getKey().indexOf("#")===0)){q.setVisible(false);}else{q.setVisible(true);}}}else{if(w&&!w.isDeleteEnabled()||!this.getVariantCreationByUserAllowed()){q.setVisible(false);q.setEnabled(false);}}this._assignColumnInfoForDeleteButton(q);M.addCell(q);this.oManagementTable.addItem(M);};
S.prototype._toggleIconActivityState=function(F,i,t){if(!F||!i){return;}if(i.getKey()===this.getStandardVariantKey()){return;}if(t){if(F.hasStyleClass("sapUICompVarMngmtFavColor")){F.removeStyleClass("sapUICompVarMngmtFavColor");F.addStyleClass("sapUICompVarMngmtFavNonInteractiveColor");}}else if(F.hasStyleClass("sapUICompVarMngmtFavNonInteractiveColor")){F.removeStyleClass("sapUICompVarMngmtFavNonInteractiveColor");F.addStyleClass("sapUICompVarMngmtFavColor");}};
S.prototype.openManageViewsDialogForKeyUser=function(p,j){var o;var r=p.contextSharingComponentContainer;var s=p.rtaStyleClass;this._sLayer=p.layer;this._delayedControlCreation();this._mFavoriteChanges={};this._mExecuteOnSelectChanges={};this._mTitleChanges={};this._mDeletedChanges={};this._mContextInfoChanges={};this.aRemovedVariants=[];this._sDefaultChanges=null;this.oManagementSave.setEnabled(true);this.oManagementTable.destroyItems();this._sStyleClassKeyUser=s;this._fGetDataForKeyUser=j;this._bShowShare=this.getShowShare();this.setShowShare(false);var k=function(i,x,y){this._mFavoriteChanges[i.getKey()]=y;this._setFavoriteIcon(x,y);}.bind(this);var l=function(i){var x=this._isFavoriteSelected(i.oSource),y=i.oSource.getParent();if(y){k(y,i.oSource,x);}}.bind(this);var n=function(i){var x=i.oSource.getParent();if(x){this._checkManageItemNameChangeKeyUser(i.oSource,x);}}.bind(this);var q=function(i){this._checkVariantNameConstraints(i.oSource,this.oManagementTable);}.bind(this);var t=function(i){var x=i.oSource.getParent();if(x){this._handleManageDeletePressedKeyUser(i.oSource,x,k);}}.bind(this);var u=function(i){var x=(i.getParameters().selected===true),y=i.oSource.getParent();if(y){var F=y.getCells()[e.FAV_COLUMN];if(x){this._sDefaultChanges=y.getKey();if(y.getKey()===this.getStandardVariantKey()){return;}if(F&&this._isFavoriteSelected(F)){k(y,F,true);}}else{this._sDefaultChanges=null;}this._toggleIconActivityState(F,y,x);}}.bind(this);var v=function(i){var x=(i.getParameters().selected===true),y=i.oSource.getParent();if(y){this._mExecuteOnSelectChanges[y.getKey()]=x;}}.bind(this);var w=function(i){var x=i.oSource.getParent().getParent();this._openRolesDialog(x,i.oSource.getParent().getItems()[0]);}.bind(this);this._initalizeManagementTableColumns();this._restoreCompleteList(true);o=this.oVariantList.getItems();Promise.all([r]).then(function(A){this._oRolesComponentContainer=A[0];this._columnVisibilityManagementTable(e.RESTRICT_COLUMN,(!!this._oRolesComponentContainer));var x={selectFavorite:l,selectDefault:u,executeOnSelect:v,rolesPressed:w,inputChange:n,inputLiveChange:q,deletePressed:t};for(var i=0;i<o.length;i++){this._createEntriesForManageViewsDialog(o[i],i,x);}this._createManagementDialog();this._setDialogCompactStyle(this,this.oManagementDialog);this.oManagementDialog.isPopupAdaptationAllowed=function(){return false;};var y=this.oVariantList.getSelectedItem();if(y){this.lastSelectedVariantKey=y.getKey();}this.oVariantPopOver.close();this.oManagementDialog.addStyleClass(s);this.oManagementDialog.open();}.bind(this));};
S.prototype._openVariantManagementDialog=function(){var o;var j=null;this._mFavoriteChanges={};this.oManagementSave.setEnabled(true);this.oManagementTable.destroyItems();var l=function(t){this._checkVariantNameConstraints(t.oSource,this.oManagementTable);}.bind(this);var k=function(t){var u=this._createEvent("inputfieldChange",this._checkManageItemNameChange);u.args.push(t.oSource.getParent());this._addEvent(u);}.bind(this);var s=function(t){var u=this._isFavoriteSelected(t.oSource),o=t.oSource.getParent();if(o&&(this.sNewDefaultKey!==o.getKey())){this._mFavoriteChanges[o.getKey()]=u;this._setFavoriteIcon(t.oSource,u);}}.bind(this);var n=function(t){var u=(t.getParameters().selected===true),o=t.oSource.getParent();if(o){var F=o.getCells()[e.FAV_COLUMN];if(u){this.sNewDefaultKey=o.getKey();if(o.getKey()===this.getStandardVariantKey()){return;}this._mFavoriteChanges[o.getKey()]=u;if(F){this._setFavoriteIcon(F,true);}}this._toggleIconActivityState(F,o,u);}}.bind(this);var p=function(t){var u=this._createEvent("executeOnSelectionChange",this._handleManageExecuteOnSelectionChanged);u.args.push(t.oSource);this._addEvent(u);}.bind(this);var q=function(t){var u=this._createEvent("manageDeletePressed",this._handleManageDeletePressed);u.args.push(t.oSource);this._addEvent(u);}.bind(this);if(this.oManageDialogSearchField){this.oManageDialogSearchField.setValue("");}this._initalizeManagementTableColumns();this.sNewDefaultKey=this.getDefaultVariantKey();this._restoreCompleteList(true);o=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(o){this.oVariantList.removeItem(o);}j=this.oVariantList.getItems();j.sort(this._compareItems);if(o){this.oVariantList.insertItem(o);j.splice(0,0,o);}var r={selectFavorite:s,selectDefault:n,executeOnSelect:p,inputChange:k,inputLiveChange:l,deletePressed:q};for(var i=0;i<j.length;i++){this._createEntriesForManageViewsDialog(j[i],i,r);}this.aRemovedVariants=[];this.aRemovedVariantTransports=[];this.aRenamedVariants=[];this.aExeVariants=[];this._createManagementDialog();this._setDialogCompactStyle(this,this.oManagementDialog);o=this.oVariantList.getSelectedItem();if(o){this.lastSelectedVariantKey=o.getKey();}this.oVariantPopOver.close();this.oManagementDialog.open();};
S.prototype._checkAndAddRolesContainerToSaveAsDialog=function(){if(this._oRolesComponentContainer&&this.oSaveDialog){var r=null;this.oSaveDialog.getContent().some(function(o){if(o===this._oRolesComponentContainer){r=o;return true;}return false;}.bind(this));this._setSelectedContexts({role:[]});if(!r){this.oSaveDialog.addContent(this._oRolesComponentContainer);}}};
S.prototype.openSaveAsDialogForKeyUser=function(s,i,r){this._delayedControlCreation();this._sStyleClassKeyUser=s;this._fGetDataForKeyUser=i;this._mContextInfoChanges={};this._bShowShare=this.getShowShare();this.setShowShare(false);this._initSaveAsDialog();this.oSaveDialog.addStyleClass(s);this.oSaveDialog.isPopupAdaptationAllowed=function(){return false;};Promise.all([r]).then(function(A){this._oRolesComponentContainer=A[0];this._checkAndAddRolesContainerToSaveAsDialog();this.oSaveDialog.open();}.bind(this));};
S.prototype._cleanUpSaveForKeyUser=function(){this.oSaveDialog.removeStyleClass(this._sStyleClassKeyUser);if(this._oRolesComponentContainer){this.oSaveDialog.removeContent(this._oRolesComponentContainer);}this._cleanUpKeyUser();this.oSaveDialog.close();};
S.prototype._cleanUpManageViewsForKeyUser=function(){this.oManagementDialog.removeStyleClass(this._sStyleClassKeyUser);this._cleanUpKeyUser();this.oManagementDialog.close();};
S.prototype._cleanUpKeyUser=function(){this.setShowShare(this._bShowShare);this._mFavoriteChanges=null;this._mExecuteOnSelectChanges=null;this._sDefaultChanges=null;this._mTitleChanges=null;this._mDeletedChanges=null;this._mContextInfoChanges=null;this._fGetDataForKeyUser=null;this._sLayer=null;this._sStyleClassKeyUser=undefined;this._oRolesComponentContainer=null;};
S.prototype._handleManageSavePressedForKeyUser=function(){var i,j={};var s=false;if(this._sDefaultChanges){j.default=this._sDefaultChanges;}if(Object.keys(this._mExecuteOnSelectChanges).length>0){for(i in this._mExecuteOnSelectChanges){if(!j[i]){j[i]={};}j[i].executeOnSelection=this._mExecuteOnSelectChanges[i];}}if(Object.keys(this._mFavoriteChanges).length>0){for(i in this._mFavoriteChanges){if(!j[i]){j[i]={};}j[i].favorite=this._mFavoriteChanges[i];}}if(Object.keys(this._mTitleChanges).length>0){for(i in this._mTitleChanges){if(!j[i]){j[i]={};}j[i].name=this._mTitleChanges[i];}}if(Object.keys(this._mDeletedChanges).length>0){for(i in this._mDeletedChanges){if(!j[i]){j[i]={};}j[i].deleted=this._mDeletedChanges[i];}if(this.lastSelectedVariantKey===i){s=true;}}if(Object.keys(this._mContextInfoChanges).length>0){for(i in this._mContextInfoChanges){if(!j[i]){j[i]={};}j[i].contexts=this._mContextInfoChanges[i];}}if(s){this.activateVariant(this.getStandardVariantKey());}this._fGetDataForKeyUser(j);this._cleanUpManageViewsForKeyUser();};
S.prototype._handleManageCancelPressedForKeyUser=function(){this._fGetDataForKeyUser();this._cleanUpManageViewsForKeyUser();};
S.prototype._handleSaveAsCancelPressedForKeyUser=function(){this._fGetDataForKeyUser();this._cleanUpSaveForKeyUser();};
S.prototype._getSelectedContexts=function(){return this._oRolesComponentContainer.getComponentInstance().getSelectedContexts();};
S.prototype._setSelectedContexts=function(i){this._oRolesComponentContainer.getComponentInstance().setSelectedContexts(i);};
S.prototype._isInErrorContexts=function(){return this._oRolesComponentContainer.getComponentInstance().hasErrorsAndShowErrorMessage();};
S.prototype._getContentAsync=function(){return Promise.resolve(this._fetchContentAsync());};
S.prototype._handleSaveAsPressedForKeyUser=function(){if(!this._checkAndCreateContextInfoChanges("newDummyKey")){return;}try{this._getContentAsync().then(function(o){var j={"default":this.oDefault.getSelected(),executeOnSelection:this.oExecuteOnSelect.getSelected(),type:this._getPersoControllerType(),text:this.oInputName.getValue().trim(),contexts:this._mContextInfoChanges["newDummyKey"],content:o};this._fGetDataForKeyUser(j);this._removeShadowContent(this.getSelectionKey());this._cleanUpSaveForKeyUser();}.bind(this));}catch(i){L.error("'_handleSaveAsPressedForKeyUser' throws an exception:"+i.message);this._fGetDataForKeyUser();this._cleanUpSaveForKeyUser();}};
return S;});
sap.ui.predefine('sap/ui/comp/smartvariants/SmartVariantManagementUi2',['sap/ui/comp/library','./PersonalizableInfo','sap/ui/comp/variants/VariantItem','sap/ui/comp/variants/VariantManagement',"sap/base/Log"],function(l,P,V,a,L){"use strict";
var S=a.extend("sap.ui.comp.smartvariants.SmartVariantManagementUi2",{
metadata:{library:"sap.ui.comp",aggregations:{personalizableControl:{type:"sap.ui.comp.smartvariants.PersonalizableInfo",multiple:false}},events:{initialise:{},afterSave:{}}},
renderer:{apiVersion:2}
});
S.prototype.init=function(){a.prototype.init.apply(this);this._oStandardVariant=null;this._oPersController=null;this._sKeyName=null;this._oContainer=null;this._oVariantSet=null;if(this.setLifecycleSupport){this.setLifecycleSupport(false);}this._setBackwardCompatibility(false);};
S.prototype.isPageVariant=function(){return false;};
S.prototype.getVariantContent=function(c,k){var C=null;if(k===this.STANDARDVARIANTKEY){C=this._getStandardVariant();}else{if(this._oVariantSet){var v=this._oVariantSet.getVariant(k);if(v){C=this._getContent(v);}}}return C;};
S.prototype.getCurrentVariantId=function(){var k="";var i=this._getSelectedItem();if(i){k=i.getKey();if(k===this.STANDARDVARIANTKEY){k="";}}return k;};
S.prototype.setCurrentVariantId=function(v,d){var c;var i=v;if(!i){i=this.STANDARDVARIANTKEY;}else{if(!this.getItemByKey(i)){i=this.STANDARDVARIANTKEY;}}if(this._oVariantSet){c=this.getVariantContent(this._oPersController,i);if(c){this._setSelectionByKey(i);if(d!==true){this._applyVariantContent(c);}}}};
S.prototype.addPersonalizableControl=function(c){this.setAggregation("personalizableControl",c,true);if(c.getControl()){this._oPersController=sap.ui.getCore().byId(c.getControl());}this._sKeyName=c.getKeyName();return this;};
S.prototype.initialise=function(){var c=this._getPersistencyKey();if(!c){L.warning("PersistencyKey not set");this.fireEvent("initialise");return;}if(sap.ushell&&sap.ushell.Container){var t=this;sap.ushell.Container.getService("Personalization").getContainer(c,{validity:Infinity}).fail(function(){L.error("Loading personalization container failed");t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"));t.fireEvent("initialise");}).done(function(C){t._readPersonalization(C);t.fireEvent("initialise");t._setStandardVariant();t._setSelectedVariant();});return;}L.error("Could not obtain the personalization container");this._setErrorValueState(this.oResourceBundle.getText("VARIANT_MANAGEMENT_READ_FAILED"));this.fireEvent("initialise");};
S.prototype._setSelectedVariant=function(){var v=null;if(this._oVariantSet){var k=this.getSelectionKey();if(k){v=this._oVariantSet.getVariant(k);if(v){this._applyVariant(v);}}}};
S.prototype._reCreateVariantEntries=function(){var n=null;var v=null;var o,b;this.removeAllItems();if(this._oVariantSet){var m=this._oVariantSet.getVariantNamesAndKeys();if(m){for(n in m){if(n){b=new V({text:n,key:m[n]});this.addVariantItem(b);}}v=this._oVariantSet.getCurrentVariantKey();o=this._oVariantSet.getVariant(v);if(o){this.setDefaultVariantKey(v);this.setInitialSelectionKey(v);}}}};
S.prototype._getVariantSetAdapter=function(){var v=null;if(this._oContainer){v=new sap.ushell.services.Personalization.VariantSetAdapter(this._oContainer);}return v;};
S.prototype._createVariantEntries=function(){var v=this._getVariantSetAdapter();if(v){this._oVariantSet=v.getVariantSet("filterBarVariantSet");if(this._oVariantSet){this._reCreateVariantEntries();}else{this._oVariantSet=v.addVariantSet("filterBarVariantSet");}}};
S.prototype._readPersonalization=function(c){this._oContainer=c;if(this._oContainer){this._createVariantEntries();}};
S.prototype._savePersonalizationContainer=function(){var t=this;if(this._oContainer){this._oContainer.save().fail(function(){L.error("Saving personalization data failed");t._setErrorValueState(t.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE_FAILED"));}).done(function(){L.info("Saving personalization data succeeded");t.fireEvent("afterSave");});}};
S.prototype.fireSave=function(v){var o=null,n=null;var s;if(!this._oVariantSet){return;}if(v){if(v.overwrite){if(v.key){o=this._oVariantSet.getVariant(v.key);}}else{if(v.name){o=this._oVariantSet.addVariant(v.name);n=o;s=n.getVariantKey();this.replaceKey(v.key,s);this.setInitialSelectionKey(s);}}if(o){this.fireEvent("save",v);var b=this._fetchVariant();if(b){o.setItemValue("filterBarVariant",b.filterBarVariant);o.setItemValue("filterbar",b.filterbar);o.setItemValue("basicSearch","");if(b.basicSearch){o.setItemValue("basicSearch",b.basicSearch);}s=o.getVariantKey();if(v.def){if(s){this._oVariantSet.setCurrentVariantKey(s);}}else{var d=this._oVariantSet.getCurrentVariantKey();if(s===d){this._oVariantSet.setCurrentVariantKey(null);}}}this._savePersonalizationContainer();}}};
S.prototype._setStandardVariant=function(){if(this._oPersController&&this._oPersController.fireBeforeVariantSave){this._oPersController.fireBeforeVariantSave(a.STANDARD_NAME);}this._oStandardVariant=this._fetchVariant();};
S.prototype._getStandardVariant=function(){return this._oStandardVariant;};
S.prototype.getStandardVariant=function(){return this._getStandardVariant();};
S.prototype._setVariantName=function(v,s,n){var k;var f,F;if(this._oVariantSet){var N=this._oVariantSet.addVariant(n);f=v.getItemValue("filterBarVariant");N.setItemValue("filterBarVariant",f);F=v.getItemValue("filterbar");N.setItemValue("filterbar",F);k=this._oVariantSet.getCurrentVariantKey();if(k===s){this._oVariantSet.setCurrentVariantKey(N.getVariantKey());}this._oVariantSet.delVariant(s);k=N.getVariantKey();this.replaceKey(s,k);this.setInitialSelectionKey(k);}};
S.prototype._getVariantNamesAndKeys=function(){return this._oVariantSet.getVariantNamesAndKeys();};
S.prototype.fireManage=function(v){var i;var r=null,d=null;var o;if(!this._oVariantSet){return;}if(v){r=v.renamed;d=v.deleted;if(r){for(i=0;i<r.length;i++){o=this._oVariantSet.getVariant(r[i].key);if(o){if(o.setVariantName){o.setVariantName(r[i].name);}else{this._setVariantName(o,r[i].key,r[i].name);}}}}if(d){var s=this._oVariantSet.getCurrentVariantKey();for(i=0;i<d.length;i++){o=this._oVariantSet.getVariant(d[i]);if(o){if(s&&s===o.getVariantKey()){this._oVariantSet.setCurrentVariantKey(null);}this._oVariantSet.delVariant(d[i]);}}}if(v.def){o=this._oVariantSet.getVariant(v.def);if(o||(v.def===this.STANDARDVARIANTKEY)){this._oVariantSet.setCurrentVariantKey(v.def);}}if((d&&d.length>0)||(r&&r.length>0)||(v.def)){this._savePersonalizationContainer();}}};
S.prototype.fireSelect=function(v){var o=null;if(v&&v.key){if(this._oVariantSet){if(v.key===this.STANDARDVARIANTKEY){o=this._getStandardVariant();}else{o=this._oVariantSet.getVariant(v.key);}}}if(o){this._applyVariant(o);}};
S.prototype._getContent=function(v){var c=null;if(v){if(v.getItemValue){c={filterbar:v.getItemValue("filterbar"),filterBarVariant:v.getItemValue("filterBarVariant")};var b=v.getItemValue("basicSearch");if(b){c.basicSearch=b;}}else{c=v;}}return c;};
S.prototype._applyVariant=function(v){var c=this._getContent(v);this._applyVariantContent(c);};
S.prototype._applyVariantContent=function(c){if(c&&this._oPersController&&this._oPersController.applyVariant){this._oPersController.applyVariant(c);}};
S.prototype._fetchVariant=function(){if(this._oPersController&&this._oPersController.fetchVariant){return this._oPersController.fetchVariant();}return null;};
S.prototype._getPersistencyKey=function(){if(this._oPersController&&this._sKeyName){return this._oPersController.getProperty(this._sKeyName);}return null;};
S.prototype._setErrorValueState=function(t){this.setEnabled(false);};
S.prototype.exit=function(){a.prototype.exit.apply(this,arguments);this._oStandardVariant=null;this._oPersController=null;this._sKeyName=null;this._oContainer=null;this._oVariantSet=null;};
return S;});
sap.ui.predefine('sap/ui/comp/smartvariants/flexibility/changes/VariantContent',['sap/base/util/merge',"sap/base/Log"],function(m,L){"use strict";var V={};
V.applyChange=function(c,p,P){var C=c.getContent();if(!C){L.error("Change does not contain sufficient information to be applied");return;}var v=p.getVariantManagement?p.getVariantManagement():p;if(v.isA("sap.ui.comp.smartvariants.SmartVariantManagement")){var r={};var o=v._getVariantContent(C.key);if(v.isPageVariant()){r.content=o&&o[C.persistencyKey];}else{r.content=o;}r.key=C.key;r.persistencyKey=C.persistencyKey;c.setRevertData(r);if((v.getSelectionKey()===C.key)){var a={};if(v.isPageVariant()){a[C.persistencyKey]=C.content;v._applyVariantByPersistencyKey(C.persistencyKey,a,"KEY_USER");}else{a=C.content;v._applyVariant(v._getPersoController(),a,"KEY_USER");}v.assignShadowContent(C.key,a);}}};
V.completeChangeContent=function(c,s,p){if(!s.hasOwnProperty("content")){throw new Error("oSpecificChangeInfo.content should be filled");}if(!s.content.hasOwnProperty("key")){throw new Error("In oSpecificChangeInfo.content.key attribute is required");}if(!s.content.hasOwnProperty("persistencyKey")){throw new Error("In oSpecificChangeInfo.content.persistencyKey attribute is required");}if(!s.content.hasOwnProperty("content")){throw new Error("In oSpecificChangeInfo.content.content attribute is required");}};
V.revertChange=function(c,p,P){var C=c.getRevertData();var v=p.getVariantManagement?p.getVariantManagement():p;if(C&&(v.isA("sap.ui.comp.smartvariants.SmartVariantManagement"))){if((v.getSelectionKey()===C.key)){var o={};if(v.isPageVariant()){o[C.persistencyKey]=C.content;v._applyVariantByPersistencyKey(C.persistencyKey,o,"KEY_USER");}else{o=C.content;v._applyVariant(v._getPersoController(),o,"KEY_USER");}v.assignShadowContent(C.key,o);}c.resetRevertData();}};
return V;},true);
sap.ui.predefine('sap/ui/comp/state/UIState',['sap/ui/comp/library','sap/ui/base/ManagedObject','sap/ui/comp/odata/MetadataAnalyser','sap/ui/model/odata/AnnotationHelper','sap/ui/model/Context','sap/ui/thirdparty/jquery'],function(c,M,a,A,C,q){"use strict";
var U=M.extend("sap.ui.comp.state.UIState",{metadata:{library:"sap.ui.comp",properties:{presentationVariant:{type:"object"},selectionVariant:{type:"object"},variantName:{type:"string"},valueTexts:{type:"object"},semanticDates:{type:"object"}}}});
U._getFilterNamesWithValuesForCurrentLanguage=function(v){var p=[],l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().getLanguage();if(v&&v.Texts){v.Texts.some(function(t){if(t.Language===l){t.PropertyTexts.forEach(function(P){var o,f=false;for(var i=0;i<p.length;i++){if(p[i].filterName===P.PropertyName){o=p[i];f=true;break;}}if(P.PropertyName&&P.ValueTexts&&(Object.keys(P.ValueTexts).length>0)){P.ValueTexts.forEach(function(V){if(!o){o={filterName:P.PropertyName,keys:[]};}o.keys.push(V.PropertyValue);});}if(!f&&o&&o.keys.length){p.push(o);}});return true;}return false;});}return p;};
U._getFilterNamesWithValuesFromSelectOption=function(s,i){var S=[];if(s&&s.SelectOptions){s.SelectOptions.forEach(function(o){var b=i?(i.indexOf(o.PropertyName)<0):true;if(b){var O={filterName:o.PropertyName,keys:[]};o.Ranges.forEach(function(r){if(r.Option==="EQ"&&r.Sign==="I"){O.keys.push(r.Low);}});S.push(O);}});}return S;};
U._determineFiltersWithOnlyKeyValues=function(f,F){var b,I,d=[];f=f||[];F=F||[];F.forEach(function(o){var O={filterName:o.filterName,keys:[]};I=null;f.some(function(e){if(o.filterName===e.filterName){I=e;}return I!==null;});for(var i=0;i<o.keys.length;i++){b=false;if(I){for(var j=0;j<I.keys.length;j++){if(o.keys[i]===I.keys[j]){b=true;break;}}}if(!b){O.keys.push(o.keys[i]);}}if(O.keys.length){d.push(O);}});return d;};
U.determineFiltersWithOnlyKeyValues=function(v,s,i){var V=U._getFilterNamesWithValuesForCurrentLanguage(v);var S=U._getFilterNamesWithValuesFromSelectOption(s,i);return U._determineFiltersWithOnlyKeyValues(V,S);};
U.calculateValueTexts=function(s,d){var v=null;var f=function(p,e){var P=null;if(!v){v={"Texts":[{"ContextUrl":"","Language":sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().getLanguage(),"PropertyTexts":[]}]};}for(var i=0;i<v.Texts[0].PropertyTexts.length;i++){if(v.Texts[0].PropertyTexts[i].PropertyName===p){P=v.Texts[0].PropertyTexts[i];break;}}if(!P){P={"PropertyName":p,ValueTexts:[]};v.Texts[0].PropertyTexts.push(P);}P.ValueTexts.push({"PropertyValue":e.key,"Text":e.text});};if(d&&s&&s.SelectOptions){s.SelectOptions.forEach(function(S){if(d[S.PropertyName]){if(d[S.PropertyName].ranges){d[S.PropertyName].ranges.forEach(function(e){if(e.hasOwnProperty("text")){f(S.PropertyName,e);}});}if(d[S.PropertyName].items){d[S.PropertyName].items.forEach(function(e){if(e.hasOwnProperty("text")){f(S.PropertyName,e);}});}}});}return v;};
U.enrichWithValueTexts=function(p,v){var e=false,t,l,P,E=p;l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().getLanguage().toLowerCase();if(v&&v.Texts){v.Texts.some(function(o){if(o.Language&&o.Language.toLowerCase()===l){t=o;}return t!==null;});if(t&&t.PropertyTexts){if(!P){P=JSON.parse(p);}t.PropertyTexts.forEach(function(o){var b=P[o.PropertyName];if(b&&b.ranges&&o.ValueTexts){o.ValueTexts.forEach(function(V){var d=null,n=-1;if(V.Text){b.ranges.some(function(f,i){if(!f.exclude&&(f.operation==="EQ")&&(f.value1===V.PropertyValue)){d=f;n=i;}return(d!=null);});}if(d){e=true;if(!b.items){b.items=[];}b.items.push({key:V.PropertyValue,text:V.Text});P[o.PropertyName].ranges.splice(n,1);}});}});if(e){E=JSON.stringify(P);}}}return E;};
U.createFromSelectionAndPresentationVariantAnnotation=function(v,s,p){var S={};if(s&&s.SelectOptions&&s.SelectOptions.length){S.SelectOptions=s.SelectOptions.map(function(o){return{PropertyName:o.PropertyName.PropertyPath,Ranges:o.Ranges.map(function(r){var b=new C(null,"/");return{Sign:a.getSelectionRangeSignType([r.Sign.EnumMember]),Option:a.getSelectionRangeOptionType([r.Option.EnumMember]),Low:r.Low&&A.format(b,r.Low)||undefined,High:r.High&&A.format(b,r.High)||undefined};})};});}if(s&&s.Parameters&&s.Parameters.length){S.Parameters=s.Parameters.map(function(o){var b=new C(null,"/");return{PropertyName:o.PropertyName.PropertyPath,PropertyValue:o.PropertyValue&&A.format(b,o.PropertyValue)||undefined};});}var P={};if(p&&p.lineItemAnnotation){if(!P.Visualizations){P.Visualizations=[];}var f=[];if(p.lineItemAnnotation.fields){var l=p.lineItemAnnotation.labels;var u=p.lineItemAnnotation.urlInfo;var i=p.lineItemAnnotation.importance;var m=p.lineItemAnnotation.criticality;p.lineItemAnnotation.fields.forEach(function(F){var o={Value:F};o.Label=l[F]?l[F]:null;o.IconUrl=u[F]?u[F]:null;o.Importance=i[F]?i[F]:null;o.Criticality=m[F]?m[F]:null;f.push(o);});}P.Visualizations.push({Type:"LineItem",Content:f});}if(p&&p.chartAnnotation){if(!P.Visualizations){P.Visualizations=[];}P.Visualizations.push({Type:"Chart",Content:{ChartType:p.chartAnnotation.chartType,Measures:p.chartAnnotation.measureFields,MeasureAttributes:Object.keys(p.chartAnnotation.measureAttributes).map(function(b){return{Measure:b,Role:p.chartAnnotation.measureAttributes[b].role};}),Dimensions:p.chartAnnotation.dimensionFields,DimensionAttributes:Object.keys(p.chartAnnotation.dimensionAttributes).map(function(b){return{Dimension:b,Role:p.chartAnnotation.dimensionAttributes[b].role};})}});}if(p&&p.maxItems){P.MaxItems=parseInt(p.maxItems);}if(p&&p.sortOrderFields){P.SortOrder=p.sortOrderFields.map(function(F){return{Property:F.name,Descending:F.descending};});}if(p&&p.groupByFields){P.GroupBy=p.groupByFields;}if(p&&p.requestAtLeastFields){P.RequestAtLeast=p.requestAtLeastFields;}return new U({presentationVariant:!q.isEmptyObject(P)?P:undefined,selectionVariant:!q.isEmptyObject(S)?S:undefined,variantName:v?v:undefined});};
U.calcSemanticDates=function(s,d){var S=null;var f=function(p,e){var P=null;if(!S){S={"Dates":[]};}for(var i=0;i<S.Dates.length;i++){if(S.Dates[i].PropertyName===p){P=S.Dates[i];break;}}if(!P){P={"PropertyName":p,"Data":e.conditionTypeInfo.data};S.Dates.push(P);}};if(d&&s&&s.SelectOptions){s.SelectOptions.forEach(function(o){if(d[o.PropertyName]){if(d[o.PropertyName].ranges){if(d[o.PropertyName].hasOwnProperty("conditionTypeInfo")){f(o.PropertyName,d[o.PropertyName]);}}}});}return S;};
U.enrichWithSemanticDates=function(p,s){var e=false,P,E=p;if(s&&s.Dates){if(!P){P=JSON.parse(p);}s.Dates.forEach(function(o){var b=P[o.PropertyName];if(b&&b.ranges&&o.Data){e=true;if(!b.items){b.items=[];}b.ranges[0].semantic=o.Data;}});if(e){E=JSON.stringify(P);}}return E;};
return U;});
sap.ui.predefine('sap/ui/comp/util/DateTimeUtil',[],function(){"use strict";var j=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/;var D={localToUtc:function(d){var p,P="0",s=d.getFullYear().toString().padStart(4,P)+"-"+(d.getMonth()+1).toString().padStart(2,P)+"-"+d.getDate().toString().padStart(2,P)+"T00:00:00.000Z";p=new Date(s);p.setUTCHours(d.getHours());p.setUTCMinutes(d.getMinutes());p.setUTCSeconds(d.getSeconds());p.setUTCMilliseconds(d.getMilliseconds());return p;},utcToLocal:function(d){var p,P="0",s=d.getUTCFullYear().toString().padStart(4,P)+"-"+(d.getUTCMonth()+1).toString().padStart(2,P)+"-"+d.getUTCDate().toString().padStart(2,P)+"T00:00:00.000";p=new Date(s);p.setHours(d.getUTCHours());p.setMinutes(d.getUTCMinutes());p.setSeconds(d.getUTCSeconds());p.setMilliseconds(d.getUTCMilliseconds());return p;},dateToEdmTime:function(d){return{__edmType:"Edm.Time",ms:d.valueOf()};},edmTimeToDate:function(t){return new Date(t.ms);},adaptPrecision:function(d,p){var m=d.getMilliseconds(),r;if(isNaN(p)||p>=3||m===0){return d;}if(p===0){m=0;}else if(p===1){m=Math.floor(m/100)*100;}else if(p===2){m=Math.floor(m/10)*10;}r=new Date(d);r.setMilliseconds(m);return r;},isDate:function(d,u){if(u){return d.getUTCHours()===0&&d.getUTCMinutes()===0&&d.getUTCSeconds()===0&&d.getUTCMilliseconds()===0;}else{return d.getHours()===0&&d.getMinutes()===0&&d.getSeconds()===0&&d.getMilliseconds()===0;}},normalizeDate:function(d,u){var r;if(this.isDate(d,u)){return d;}r=new Date(d);if(u){r.setUTCHours(0,0,0,0);}else{r.setHours(0,0,0,0);}return r;},_parseJsonDateString:function(v){var a=v&&j.exec(v);if(a){var r=new Date(parseInt(a[1]));if(a[2]){var m=parseInt(a[3]);if(a[2]==="-"){m=-m;}var c=r.getUTCMinutes();r.setUTCMinutes(c-m);r.__edmType="Edm.DateTimeOffset";}if(!isNaN(r.valueOf())){return r;}}},_hasJsonDateString:function(v){return j.test(v);}};return D;});
sap.ui.predefine('sap/ui/comp/util/FilterUtil',[],function(){"use strict";return{getTransformedExcludeOperation:function(o){var t={"EQ":"NE","GE":"LT","LT":"GE","LE":"GT","GT":"LE","BT":"NB","Contains":"NotContains","StartsWith":"NotStartsWith","EndsWith":"NotEndsWith"}[o];return t?t:o;}};});
sap.ui.predefine('sap/ui/comp/util/FormatUtil',["sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/m/P13nConditionPanel","sap/ui/comp/odata/ODataType","sap/ui/model/odata/type/Currency","sap/ui/model/odata/type/Unit"],function(N,D,P,O,C,U){"use strict";var F={CHAR_FIGURE_SPACE:'\u2007',CHAR_PUNCTUATION_SPACE:'\u2008',MAX_CURRENCY_DIGITS:3,getFormattedExpressionFromDisplayBehaviour:function(d,i,s){return F.getFormatterFunctionFromDisplayBehaviour(d)(i,s);},getFormatterFunctionFromDisplayBehaviour:function(d){switch(d){case"descriptionAndId":return F._getTextFormatterForDescriptionAndId;case"idAndDescription":return F._getTextFormatterForIdAndDescription;case"descriptionOnly":return F._getTextFormatterForDescriptionOnly;default:return F._getTextFormatterForIdOnly;}},_processText:function(t,p){if(p){return t;}return t.secondText?t.firstText+" ("+t.secondText+")":t.firstText;},_getTextFormatterForDescriptionAndId:function(i,d,p){return F._processText({firstText:d?d:i,secondText:d?i:undefined},p);},_getTextFormatterForIdAndDescription:function(i,d,p){return F._processText({firstText:i,secondText:d?d:undefined},p);},_getTextFormatterForDescriptionOnly:function(i,d,p){return F._processText({firstText:d,secondText:undefined},p);},_getTextFormatterForIdOnly:function(i,d,p){return F._processText({firstText:i,secondText:undefined},p);},getTextsFromDisplayBehaviour:function(d,i,s){return F.getFormatterFunctionFromDisplayBehaviour(d)(i,s,true);},getFormattedRangeText:function(o,v,V,e){return P.getFormatedConditionText(o,v,V,e);},_initialiseCurrencyFormatter:function(){if(!F._oCurrencyFormatter){F._oCurrencyFormatter=N.getCurrencyInstance({showMeasure:false});}if(!F._fAmountCurrencyFormatter){F._fAmountCurrencyFormatter=function(a,c){var v,i;v=F._oCurrencyFormatter.format(a,c);i=F._oCurrencyFormatter.oLocaleData.getCurrencyDigits(c);return F._applyPadding(v,i,F.MAX_CURRENCY_DIGITS);};}},_initialiseUnitFormatter:function(){if(!F._oUnitFormatter){F._oUnitFormatter=N.getUnitInstance({showMeasure:false,maxFractionDigits:3,minFractionDigits:3});}if(!F._fMeasureUnitFormatter){F._fMeasureUnitFormatter=function(v,u){return F._oUnitFormatter.format(v,u);};}},_applyPadding:function(v,s,m){var p;if(typeof v!=="string"){return"";}if(s===0){v+=F.CHAR_PUNCTUATION_SPACE;}p=m-s;if(p){v=v.padEnd(v.length+p,F.CHAR_FIGURE_SPACE);}return v;},_getFractionDigitDifference:function(t,v,f,m){if(!v){return 0;}var d=v.indexOf(t.oOutputFormat.oFormatOptions.decimalSeparator);if(d<0){return 0;}var i=v.substr(d+1).length;if(i<=m&&i>f){return i-f;}if(i>m&&f<m){return m-f;}return 0;},getAmountCurrencyFormatter:function(p){var m=0,c,a;F._initialiseCurrencyFormatter();return function(A,s,b){var v,i;if(A===undefined||A===null||s==="*"){return"";}if(!b){return F._fAmountCurrencyFormatter(A,s);}if(!a){a=b;m=F._getMaxCurrencyFractionDigits(a);if(!c){c=F._getCurrencyInstance(p);}}i=a&&a[s]?a[s].UnitSpecificScale:F._oCurrencyFormatter.oLocaleData.getCurrencyDigits(s);v=c.formatValue([A,s||null,a],"string");if(p){i+=F._getFractionDigitDifference(c,v,i,m);}return F._applyPadding(v,i,m);};},_getMaxCurrencyFractionDigits:function(c){var m=0;for(var e in c){if(c[e].UnitSpecificScale&&c[e].UnitSpecificScale>m){m=c[e].UnitSpecificScale;}}return m;},_getCurrencyInstance:function(p){return new C({showMeasure:false,preserveDecimals:p});},getCurrencySymbolFormatter:function(){F._initialiseCurrencyFormatter();if(!F._fCurrencySymbolFormatter){F._fCurrencySymbolFormatter=function(c){if(!c||c==="*"){return"";}return F._oCurrencyFormatter.oLocaleData.getCurrencySymbol(c);};}return F._fCurrencySymbolFormatter;},getMeasureUnitFormatter:function(p){F._initialiseUnitFormatter();var m=0,u,c;return function(v,s,a){if(v===undefined||v===null||s==="*"){return"";}if(a){if(!c){c=a;m=F._getMaxMeasureUnitFractionDigit(c);if(!u){u=F._getUnitInstance(p,m);}}v=u.formatValue([v,s,c],"string");var i=c[s]&&c[s].UnitSpecificScale!=null?c[s].UnitSpecificScale:m;if(p){i+=F._getFractionDigitDifference(u,v,i,m);}return F._applyPadding(v,i,(m||3));}return F._fMeasureUnitFormatter(v,s)+F.CHAR_FIGURE_SPACE;};},getInlineMeasureUnitFormatter:function(p){var m=0,u,c;if(!F._fInlineMeasureFormatter){F._fInlineMeasureFormatter=function(v,s){if(v===undefined||v===null||s==="*"){return"";}if(!s){return v;}return v+F.CHAR_FIGURE_SPACE+s;};}return function(v,s,a){if(a){if(!c){c=a;m=F._getMaxMeasureUnitFractionDigit(c);if(!u){u=F._getUnitInstance(p,m);}}v=u.formatValue([v,s,c],"string");return v+F.CHAR_FIGURE_SPACE+s;}return F._fInlineMeasureFormatter(v,s);};},_getUnitInstance:function(p,m){return new U({showMeasure:false,preserveDecimals:p,maxFractionDigits:m});},_getMaxMeasureUnitFractionDigit:function(c){var m=0;for(var e in c){var u=c[e].UnitSpecificScale;if(u>3){c[e].UnitSpecificScale=3;u=3;}if(m<3&&u>m&&u<=3){m=u;}}return m;},getInlineAmountFormatter:function(p){var c,m;F._initialiseCurrencyFormatter();if(!F._fInlineAmountFormatter){F._fInlineAmountFormatter=function(a,s){var v;if(a===undefined||a===null||s==="*"){return"";}v=F._oCurrencyFormatter.format(a,s);return v+F.CHAR_FIGURE_SPACE+s;};}return function(a,s,b){if(a===undefined||a===null||s==="*"){return"";}if(!b){return F._fInlineAmountFormatter(a,s);}if(!m){m=b;if(!c){c=F._getCurrencyInstance(p);}}var v=c.formatValue([a,s||null,m],"string");return v+F.CHAR_FIGURE_SPACE+s;};},getInlineGroupFormatterFunction:function(f,d,o,p){var i,r=f.type==="Edm.String"&&!f.isCalendarDate&&!f.isDigitSequence;if(f.unit){if(f.isCurrencyField){return F.getInlineAmountFormatter(p);}else{i=F.getInlineMeasureUnitFormatter(p);return function(v,u){var V=v;if(f.modelType){V=f.modelType.formatValue(v,"string");}return i(V,u);};}}else if(!d&&r&&f.description){return F.getFormatterFunctionFromDisplayBehaviour(f.displayBehaviour);}else if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"&&o&&o["UTC"]){var c={displayFormat:"Date"};var s={isCalendarDate:f.isCalendarDate};var a=O.getType(f.type,o,c,s);return function(v){return a.formatValue(v,"string");};}else if(f.modelType){return function(v){return f.modelType.formatValue(v,"string");};}},getWidth:function(f,m,M){var w=f.maxLength||f.precision,W,i;if(!m){m=30;}if(!M){M=3;i=true;}if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"||f.isCalendarDate){w="9em";}else if(w){if(f.type==="Edm.String"&&f.description&&f.displayBehaviour&&(f.displayBehaviour==="descriptionAndId"||f.displayBehaviour==="descriptionOnly")){w="Max";}if(w==="Max"){w=m+"";}W=parseInt(w);if(!isNaN(W)){W+=0.75;if(W>m){W=m;}else if(W<M){W=M;}w=W+"em";}else{w=null;}}if(!w){if(f.type==="Edm.Boolean"){if(i){M+=0.25;}w=M+"em";}else{w=m+"em";}}return w;},getEdmTimeFromDate:function(d){if(!F._oTimeFormat){F._oTimeFormat=D.getTimeInstance({pattern:"'PT'HH'H'mm'M'ss'S'"});}return F._oTimeFormat.format(d);},parseFilterNumericIntervalData:function(v){var r=[],R=v.match(RegExp("^(-?[^-]*)-(-?[^-]*)$"));if(R&&R.length>=2){r.push(R[1]);r.push(R[2]);}return r;},parseDateTimeOffsetInterval:function(v){var V=v.split('-'),r=[v],n=0;if((V.length%2)===0){r=[];for(var i=0;i<V.length/2;i++){n=v.indexOf('-',++n);}r.push(v.substr(0,n).replace(/\s+/g,''));r.push(v.substr(n+1).replace(/\s+/g,''));}return r;},_getFilterType:function(f){if(f.isFiscalDate){return"date";}else if(f.isDigitSequence){return"numc";}else if(O.isNumeric(f.type)){return"numeric";}else if(f.type==="Edm.DateTime"&&f.displayFormat==="Date"){return"date";}else if(f.type==="Edm.DateTimeOffset"){return"datetime";}else if(f.type==="Edm.String"){if(f.isCalendarDate){return"stringdate";}return"string";}else if(f.type==="Edm.Boolean"){return"boolean";}else if(f.type==="Edm.Time"){return"time";}return undefined;}};return F;},true);
sap.ui.predefine('sap/ui/comp/util/FullScreenUtil',["sap/ui/thirdparty/jquery","sap/m/Dialog","sap/ui/core/HTML"],function(q,D,H){"use strict";var F={toggleFullScreen:function(c,e,f,E,s,d){var $;if(e){$=c.$();$.css("height","100%");if($){if(!c._oHTML){c._oHTML=new H({preferDOM:false,afterRendering:function(){if(c&&c._oHTML){var b=c._oHTML.$(),o;if(b){o=b.children();o.remove();b.css("height","100%");b.append(c.getDomRef());}}}});}if(!c._oFullScreenDialog){c._oFullScreenDialog=new D({showHeader:false,stretch:true,horizontalScrolling:!d,verticalScrolling:!d,beforeClose:function(){if(c&&c._$placeHolder&&E){E.call(c,false);}},content:[c._oHTML]});if(s){c._oFullScreenDialog.addStyleClass(s);}if(f){c._oFullScreenDialog.attachAfterOpen(function(){f.focus();if(c._oGrowingDelegate&&c._oGrowingDelegate.onAfterRendering){c._oOldParent=c.oParent;c.oParent=c._oFullScreenDialog;c._oGrowingDelegate.onAfterRendering();c.oParent=c._oOldParent;delete c._oOldParent;}});c._oFullScreenDialog.attachAfterClose(function(){f.focus();});}c._oFullScreenDialog.addStyleClass($.closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"");c._oFullScreenDialog.addStyleClass("sapUiCompSmartFullScreenDialog");}c._$placeHolder=q(document.createElement("div"));$.before(c._$placeHolder);c._oHTML.setContent("<div></div>");}if(!c._oGrowingDelegate){c._oGrowingDelegate=c._oTable||c._oList;if(c._oGrowingDelegate&&c._oGrowingDelegate.getGrowingScrollToLoad&&c._oGrowingDelegate.getGrowingScrollToLoad()){c._oGrowingDelegate=c._oGrowingDelegate._oGrowingDelegate;}else{c._oGrowingDelegate=null;}}c._oFullScreenDialog.open();}else if(c._$placeHolder&&c._oHTML){var C=c.getHeight&&c.getHeight();var a=c.$();if(C&&C!==a.css("height")){a.css("height",C);}$=c._oHTML.$();c._$placeHolder.replaceWith($.children());c._$placeHolder=null;$=null;if(c._oFullScreenDialog){c._oFullScreenDialog.close();}}},cleanUpFullScreen:function(c){if(c._oFullScreenDialog){c._oFullScreenDialog.destroy();c._oFullScreenDialog=null;}c._$placeHolder=null;c._oHTML=null;c._oGrowingDelegate=null;}};return F;},true);
sap.ui.predefine('sap/ui/comp/util/IdentifierUtil',['sap/ui/base/DataType'],function(D){"use strict";var I={replace:function(n){var t=D.getType("sap.ui.core.ID");if(!t.isValid(n)){n=n.replace(/[^A-Za-z0-9_.:]+/g,"_");if(!t.isValid(n)){n="A_"+n;}}return n;}};return I;},true);
sap.ui.predefine('sap/ui/comp/util/MultiUnitUtil',["sap/m/List","sap/m/ResponsivePopover","sap/m/CustomListItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/syncStyleClass","sap/base/util/merge"],function(L,R,C,F,a,s,m){"use strict";var M={isMultiUnit:function(u){return u==="*";},isNotMultiUnit:function(u){return u!=="*";},openMultiUnitPopover:function(e,A){var S=sap.ui.getCore().byId(A.smartTableId);var o=S.getTable();var b=o.getBinding("rows");var v=A.value;var u=A.unit;var U=A.template;var c,d;if(!b||!v||!u){return;}var l=e.getSource();var f=l.getParent();if(A.additionalParent){f=f.getParent();}var g=o.getAnalyticalInfoOfRow(f.getParent());if(!g){return;}var i,h=[],j=[v,u],t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_TOTAL_TITLE")||"Total";if(b.aApplicationFilter){h=[].concat(b.aApplicationFilter);}var B=o.getBindingInfo("rows");var k=(B&&B.parameters&&B.parameters.custom)?m({},B.parameters.custom):undefined;if(g.groupTotal||g.group){var G=g.groupedColumns;for(i=0;i<G.length;i++){d=sap.ui.getCore().byId(G[i]).getLeadingProperty();if(!d){continue;}c=b.getAnalyticalInfoForColumn(d);if(c){d=c.dimensionPropertyName;}if(d){h.push(new F(d,a.EQ,g.context.getProperty(d)));}}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}else if(!g.grandTotal){var p=Object.getOwnPropertyNames(b.getDimensionDetails());for(i=0;i<p.length;i++){h.push(new F(p[i],a.EQ,g.context.getProperty(p[i])));}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}var D=U.clone();D.unbindProperty("visible");var P=A.smartTableId+"-multiUnitPopover",n,q;n=sap.ui.getCore().byId(P);if(!n){q=new L(P+"-detailsList",{showSeparators:"None",ariaLabelledBy:P+"-title"});q.addStyleClass("sapUiContentPadding sapUiCompMultiCurrency");n=new R(P,{content:q});s("sapUiSizeCompact",o,n);o.addDependent(n);}if(!q){q=sap.ui.getCore().byId(P+"-detailsList");}n.setTitle(t);n.setPlacement(g.grandTotal?"VerticalPreferredTop":"VerticalPreferredBottom");q.bindItems({path:b.getPath(),filters:h,parameters:{select:j.join(","),custom:k},templateShareable:false,template:new C({content:[D]})});n.openBy(l);}};return M;},true);
sap.ui.predefine('sap/ui/comp/valuehelpdialog/ItemsCollection',['sap/ui/comp/util/FormatUtil','sap/ui/base/ManagedObject','sap/m/Token'],function(F,M,T){"use strict";var I=function(){this.items={};};
I.prototype.add=function(k,o){this.items[k]=o;};
I.prototype.remove=function(k){delete this.items[k];};
I.prototype.removeAll=function(){this.items={};};
I.prototype.getItem=function(k){return this.items[k];};
I.prototype.getItems=function(){var k=[];for(var i in this.items){k.push(i);}return k;};
I.prototype.getSelectedItemsTokenArray=function(k,d,D){var t=[];for(var i in this.items){var o=this.items[i];var s,a;if(typeof o==="string"){a=i;s=o;}else{a=o[k];s=o[d];if(s===undefined){s=this.items[i];}else{if(!D){D="descriptionAndId";}s=F.getFormattedExpressionFromDisplayBehaviour(D,a,s);}}var b=new T({key:M.escapeSettingsValue(a)});b.setText(s);b.setTooltip(typeof s==="string"?s:"");if(typeof o!=="string"){b.data("row",o);b.data("longKey",M.escapeSettingsValue(i));}t.push(b);}return t;};
I.prototype.getModelData=function(){var m=[];for(var i in this.items){var a=this.items[i];if(typeof a==="string"){a={missing:i};}m.push(a);}return m;};
return I;},true);
sap.ui.predefine('sap/ui/comp/valuehelpdialog/ValueHelpDialog',['sap/base/Log','sap/ui/comp/library','sap/m/Dialog','sap/m/MessageBox','sap/m/Token','./ItemsCollection','sap/ui/core/library','sap/m/VBox','sap/m/HBox','sap/m/FlexBox','sap/ui/comp/util/FormatUtil','sap/m/DialogRenderer','sap/m/FlexItemData','sap/m/Title','sap/m/Text','sap/m/Label','sap/m/Button','sap/m/Bar','sap/m/OverflowToolbarLayoutData','sap/m/Tokenizer','sap/m/Panel','sap/m/StandardListItem','sap/m/IconTabBar','sap/m/IconTabFilter','sap/m/library','sap/ui/core/InvisibleText','sap/ui/core/IconPool','sap/ui/table/library','sap/ui/table/Table','sap/ui/table/Column','sap/m/Table','sap/m/Column','sap/ui/layout/HorizontalLayout','sap/ui/layout/Grid','sap/ui/Device','sap/m/List','sap/m/Link','sap/ui/comp/p13n/P13nFilterPanel','sap/m/P13nConditionPanel','sap/m/P13nItem','sap/m/P13nAnyFilterItem','sap/m/CheckBox','sap/ui/comp/p13n/P13nOperationsHelper',"sap/ui/core/format/NumberFormat","sap/ui/core/ResizeHandler"],function(L,l,D,M,T,I,c,V,H,F,a,b,d,f,g,h,B,k,O,m,P,S,p,q,r,s,t,u,U,v,w,C,x,G,y,z,A,E,J,K,N,Q,R,W,X){"use strict";var Y;var Z=r.ButtonType;var $=r.OverflowToolbarPriority;var _=r.ListMode;var a1=r.ListType;var b1=c.HorizontalAlign;var c1=l.smartfilterbar.DisplayBehaviour;var d1={DESKTOP_LIST_VIEW:"DESKTOP_LIST_VIEW",DESKTOP_CONDITIONS_VIEW:"DESKTOP_CONDITIONS_VIEW",PHONE_MAIN_VIEW:"PHONE_MAIN_VIEW",PHONE_SEARCH_VIEW:"PHONE_SEARCH_VIEW",PHONE_LIST_VIEW:"PHONE_LIST_VIEW",PHONE_CONDITIONS_VIEW:"PHONE_CONDITIONS_VIEW"};
var e1=D.extend("sap.ui.comp.valuehelpdialog.ValueHelpDialog",{
metadata:{library:"sap.ui.comp",properties:{basicSearchText:{type:"string",group:"Misc",defaultValue:""},supportMultiselect:{type:"boolean",group:"Misc",defaultValue:true},supportRanges:{type:"boolean",group:"Misc",defaultValue:false},supportRangesOnly:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Misc",defaultValue:""},keys:{type:"string[]",group:"Misc",defaultValue:null},descriptionKey:{type:"string",group:"Misc",defaultValue:""},maxIncludeRanges:{type:"string",group:"Misc",defaultValue:'-1'},maxExcludeRanges:{type:"string",group:"Misc",defaultValue:'-1'},displayFormat:{type:"string",group:"Misc",defaultValue:""},tokenDisplayBehaviour:{type:"string",group:"Misc",defaultValue:""},filterMode:{type:"boolean",group:"Misc",defaultValue:false},_enhancedExcludeOperations:{type:"boolean",group:"Misc",defaultValue:false,visibility:"hidden"}},aggregations:{filterBar:{type:"sap.ui.comp.filterbar.FilterBar",multiple:false}},events:{ok:{parameters:{tokens:{type:"sap.m.Token[]"}}},cancel:{},selectionChange:{parameters:{tableSelectionParams:{type:"object"},updateTokens:{type:"object[]"},useDefault:{type:"boolean",defaultValue:false},table:{type:"object"}}},tokenRemove:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}},updateSelection:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}}}},
renderer:{apiVersion:2}
});
e1.prototype.setSupportMultiselect=function(e){this.setProperty("supportMultiselect",e);this._updatePropertySupportMultiselect(e);this._oTokenizerGrid.setVisible(e);this._oButtonOk.setVisible(e);return this;};
e1.prototype._updatePropertySupportMultiselect=function(e){if(!this._oTable){return undefined;}if(!this._isPhone()){if(this._oTable.setSelectionMode){this._oTable.setSelectionMode(e?u.SelectionMode.MultiToggle:u.SelectionMode.Single);}}else if(this._oTable.setMode){this._oTable.setMode(e?_.MultiSelect:_.SingleSelectLeft);}return this;};
e1.prototype.setSupportRanges=function(e){this.setProperty("supportRanges",e);this._updateNavigationControl();return this;};
e1.prototype.setSupportRangesOnly=function(e){this.setProperty("supportRangesOnly",e);this._updateNavigationControl();return this;};
e1.prototype.setTitle=function(e){this.setProperty("title",e);this._updateDlgTitle();return this;};
e1.prototype.setFilterBar=function(o){this.setAggregation("filterBar",o);if(this._oMainLayout&&o){if(this._isPhone()){if(this._oFilterBar){this._oContentContainer.removeItem(this._oFilterBar);this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);}}else if(this._oFilterBar){this._oMainLayout.removeItem(this._oFilterBar);this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);}this._oFilterBar=o;this._oFilterBar.attachInitialise(this._handleFilterBarInitialize,this);if(this._oFilterBar){this._oFilterBar.addStyleClass("compVHSearch");if(this._isPhone()){var e=sap.ui.getCore().byId(this._oFilterBar.getBasicSearch());if(e&&e.isA("sap.m.SearchField")){e.setShowSearchButton(true);e.attachSearch(function(j){if(j.mParameters.refreshButtonPressed!==undefined){this.getFilterBar().search();}}.bind(this));}this._oFilterBar.setShowGoOnFB(false);this._oColSearchBox.setLayoutData(new d({shrinkFactor:0}));this._oContentContainer.insertItem(this._oColSearchBox,0);this._oFilterBar.setLayoutData(new d({shrinkFactor:0}));this._oContentContainer.insertItem(this._oFilterBar,1);this._oFilterBar.attachSearch(function(j){this._updateView(d1.PHONE_LIST_VIEW);}.bind(this));if(this._currentViewMode===d1.PHONE_LIST_VIEW){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);this._handleFilterBarInitialize();}}else{this._oFilterBar._setCollectiveSearch(this._oColSearchBox);this._oMainLayout.insertItem(this._oFilterBar,0);}}if(h1(this._oTabBar)){this.setInitialFocus(this._oTabBar.getItems()[0]);}else if(this._oFilterBar._oSearchButton){this.setInitialFocus(this._oFilterBar._oSearchButton);}if(this._oFilterBar._oBasicSearchField){var i=this._oFilterBar._oBasicSearchField;i.setValue(this.getBasicSearchText());if(!h1(this._oTabBar)){this.setInitialFocus(i);}}}return this;};
e1.prototype._handleFilterBarInitialize=function(){if(this._currentViewMode===d1.PHONE_LIST_VIEW){this._oFilterBar._handleVisibilityOfToolbar();var e=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(e);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));}this._setToolbarSpacerWidth();if(h1(this._oTabBar)){this.setInitialFocus(this._oTabBar.getItems()[0]);}else if(this._oFilterBar&&this._oFilterBar._oBasicSearchField){this.setInitialFocus(this._oFilterBar._oBasicSearchField);}};
e1.prototype.getFilterBar=function(){return this._oFilterBar;};
e1.prototype.setBasicSearchText=function(e){this.setProperty("basicSearchText",e);if(this._oFilterBar&&this._oFilterBar._oBasicSearchField){this._oFilterBar._oBasicSearchField.setValue(e);}return this;};
e1.prototype.setTokens=function(e){var j=true;if(e.length){var n=0,o;for(var i=0;i<e.length;i++){var i1=e[i];if(i1.data("range")){var j1=Object.assign({},i1.data("range"));o=i1.getKey();if(!o){do{o="range_"+n;n++;}while(this._oSelectedRanges[o]);}var k1=this._getFormatedRangeTokenText(j1.operation,j1.value1,j1.value2,j1.exclude,j1.keyField);this._addToken2Tokenizer(o,k1,this._getTokenizer(),j1.keyField);this._oSelectedRanges[o]=j1;j=false;}else{o=i1.getKey();var l1=i1.getText();var m1=i1.data("longKey");var n1=i1.data("row");if(!m1){m1=o;}this._oSelectedItems.add(m1,n1?n1:i1.getText());var o1=new T(g1.call(this,m1));o1.setKey(m1);o1.setText(l1);o1.setTooltip(l1);this._getTokenizer().addToken(o1);}}}else{this._oSelectedItems.removeAll();this._oSelectedRanges={};this._getTokenizer().destroyTokens();}if(j){this._updateTokenizer();}};
e1.prototype.open=function(){if(!this._oTable&&!(this._isPhone()&&(this.getSupportRangesOnly()||this.getFilterMode()))){return f1.call(this).then(function(){return this.open();}.bind(this));}this._bIgnoreSelectionChange=false;if(this._oColSearchBox){this._bIsMdcCollectiveSearch=this._oColSearchBox.isA("sap.ui.mdc.filterbar.vh.CollectiveSearchSelect");if(this._bIsMdcCollectiveSearch){this.bCollectiveSearchActive=this._oColSearchBox.getVisible();}else{this.bCollectiveSearchActive=this.oSelectionTitle.getVisible()&&this.oSelectionButton.getVisible();this._oColSearchBox.setVisible(this.bCollectiveSearchActive);}}if(!this._isPhone()){if(this.getSupportRangesOnly()||this.getFilterMode()){this._updateView(d1.DESKTOP_CONDITIONS_VIEW);}if(this.isPropertyInitial("contentWidth")){this.setContentWidth(this._getDefaultContentWidth());}}else{this._updateView(d1.PHONE_MAIN_VIEW);}D.prototype.open.apply(this);if(h1(this._oTabBar)){this.setInitialFocus(this._oTabBar.getItems()[0]);}else if(this._oFilterBar&&this._oFilterBar._oBasicSearchField){this.setInitialFocus(this._oFilterBar._oBasicSearchField);}else if(!this._oFilterBar&&this._currentViewMode==="DESKTOP_CONDITIONS_VIEW"){if(this._oFilterPanel&&this._oFilterPanel._oConditionPanel){var o=this._oFilterPanel._oConditionPanel._oConditionsGrid.getAggregation("content")[0].operation;this.setInitialFocus(o);}}return this;};
e1.prototype.getTable=function(){L.warning("Please use getTableAsync to prevent synchronous calls.",this);if(!this._oTable){this._createDefaultTable();}return this._oTable;};
e1.prototype.getTableAsync=function(){if(this._oTablePromise){return this._oTablePromise;}else if(!this._oTable){return f1.call(this);}else{return new Promise(function(e){e(this._oTable);}.bind(this));}};
e1.prototype.setTable=function(o){if(this._oTable){this._oMainLayout.removeItem(this._oTable);if(this._bTableCreatedInternal){this._oTable.destroy();this._oTable=null;}}this._bTableCreatedInternal=(arguments.length>1)&&(arguments[1]==true);if(o&&o.isA("sap.ui.comp.smarttable.SmartTable")){this._oTable=o.getTable();}else{this._oTable=o;}if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this._oTable.setEnableBusyIndicator(true);if(this._oTable.isA("sap.ui.table.AnalyticalTable")){Y=sap.ui.require("sap/ui/table/AnalyticalColumn");}}this._oTable.setLayoutData(new d({shrinkFactor:0,growFactor:1}));this.theTable=this._oTable;this._initializeTable();this._oMainLayout.addItem(o);};
e1.prototype._getDefaultContentWidth=function(){var i;if(y.system.desktop){i=1080;}else if(y.system.tablet){if(y.orientation.landscape){i=920;}else if(y.orientation.portrait){i=600;}}return i+"px";};
e1.prototype.resetTableState=function(){if(this._oTable){if(this._oTable.unbindRows){this._oTable.unbindRows();}this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));}};
e1.prototype.TableStateSearchData=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));};
e1.prototype._updateNoDataText=function(n){if(this._oTable){if(this._oTable.setNoData){this._oTable.setNoData(n);}else if(this._oTable.setNoDataText){this._oTable.setNoDataText(n);}}};
e1.prototype.TableStateDataFilled=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));};
e1.prototype.TableStateDataSearching=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_SEARCHING"));};
e1.prototype.init=function(){D.prototype.init.apply(this);this._oTokenIdCount={};this._bTableCreatedInternal=false;this._aIncludeRangeOperations={};this._aExcludeRangeOperations={};this._bInitTokensHaveChanged;this.setStretch(this._isPhone());this.setResizable(!this._isPhone());this.setDraggable(!this._isPhone());this.bCollectiveSearchActive=false;this.addStyleClass("compValueHelpDialog");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._sTableTitle1=this._oRb.getText("VALUEHELPDLG_TABLETITLE1");this._sTableTitle2=this._oRb.getText("VALUEHELPDLG_TABLETITLE2");this._sTableTitleNoCount=this._oRb.getText("VALUEHELPDLG_TABLETITLENOCOUNT");this._currentViewMode=null;this._oSelectedItems=new I();this._oSelectedRanges={};this._oOperationsHelper=new R();this._fnRejectTablePromise;this._createHeaderBar();this._createCollectiveSearch();this._createTokenizer();this._updateTokenizer();this._oNavigationContainer=new V(this.getId()+"-navigationContainer",{width:"100%",layoutData:new d({growFactor:0,shrinkFactor:0})});this._oContentContainer=new V(this.getId()+"-vbox",{width:"100%",height:"100%"}).addStyleClass("compVHContentContainerVbox");this._oContainersWrapper=new F(this.getId()+"-containersWrapper",{alignItems:"Start",height:"100%",width:"100%",direction:"Column",justifyContent:"SpaceBetween",items:[this._oNavigationContainer,this._oContentContainer]});this.addContent(this._oContainersWrapper);this._oMainLayout=new V(this.getId()+"-mainLayout",{fitContainer:true,items:[this._oFilterBar],layoutData:new d({growFactor:1,shrinkFactor:0,styleClass:"mainLayout"})});this._createNavigationControl();this._updateNavigationControl();this._oContentContainer.addItem(this._oMainLayout);if(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode()){this._oContentContainer.addItem(this._oTokenizerGrid);}this._createFooterControls();this.setVerticalScrolling(false);this.setHorizontalScrolling(false);if(!y.system.desktop){this._oContentContainer.attachBrowserEvent("touchmove",function(e){e.setMarked();});}if(!this._isPhone()){this._updateView(d1.DESKTOP_LIST_VIEW);}};
e1.prototype._updateView=function(n){if(this._currentViewMode===n){return;}switch(n){case d1.DESKTOP_LIST_VIEW:this._validateRanges(function(){this._oTokenizerGrid.setVisible(this.getSupportMultiselect());this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==d1.DESKTOP_LIST_VIEW){this._oTabBar.setSelectedKey(d1.DESKTOP_LIST_VIEW);}this._oMainLayout.addItem(this._oFilterBar);this._oMainLayout.addItem(this._oTable);this._updateDlgTitle();}.bind(this),function(){this._oTabBar.setSelectedKey(d1.DESKTOP_CONDITIONS_VIEW);this._updateView(d1.DESKTOP_CONDITIONS_VIEW);}.bind(this));break;case d1.DESKTOP_CONDITIONS_VIEW:if(this.getSupportRanges()){this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==d1.DESKTOP_CONDITIONS_VIEW){this._oTabBar.setSelectedKey(d1.DESKTOP_CONDITIONS_VIEW);}this._createAddRanges();this._oButtonOk.setVisible(this.getSupportRangesOnly()||this.getSupportMultiselect());this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}}break;case d1.PHONE_MAIN_VIEW:this.setVerticalScrolling(false);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(true);this._updateNavigationControl();this._oAdvancedSearchLink.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(false);this._oFilterBar.setFilterBarExpanded(false);}if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(false);this._bNoneMainView=false;if(!(this._oSelectItemLI.getVisible()&&this._oDefineConditionsLI.getVisible())){this._bNoneMainView=true;if(this._oSelectItemLI.getVisible()){this._updateView(d1.PHONE_LIST_VIEW);}if(this._oDefineConditionsLI.getVisible()){this._updateView(d1.PHONE_CONDITIONS_VIEW);}return;}break;case d1.PHONE_LIST_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(this.bCollectiveSearchActive);if(this._bIsMdcCollectiveSearch){this._oColSearchBox.addStyleClass("sapUiTinyMarginBegin");this._oColSearchBox.oText.removeStyleClass("sapUiMdcCollectiveSearchSelectTextPhoneMaxWidth");}this._oMainListMenu.setVisible(false);if(this._oFilterBar){var e=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(e);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);}if(this._oTable){this._oTable.setVisible(true);}this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(this.getSupportMultiselect());this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;case d1.PHONE_SEARCH_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(true);}this._oAdvancedSearchLink.setVisible(false);if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(true);this._oButtonClear.setVisible(this._oFilterBar&&this._oFilterBar.getShowClearOnFB());this._oButtonOk.setVisible(false);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(true);break;case d1.PHONE_CONDITIONS_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(false);}this._oAdvancedSearchLink.setVisible(false);if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(false);if(!this._oRanges){this._createAddRanges();}if(this._oRanges){this._oRanges.setVisible(true);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;default:break;}if(this._oMainListMenu&&this._oContentContainer){if(this._oFilterBar){this._oFilterBar._handleVisibilityOfToolbar();}this._oContentContainer.rerender();}this._currentViewMode=n;this._updateDlgTitle();};
e1.prototype._changeTableRowSelectionForKey=function(e,j){var i;var o=this._oTable;this._bIgnoreSelectionChange=true;if(o&&o.isA("sap.ui.table.Table")){var n=o.getBinding("rows");if(n){if(n.aKeys){for(i=0;i<n.aKeys.length;i++){if(decodeURIComponent(n.aKeys[i])===e){if(j){o.addSelectionInterval(i,i);}else{o.removeSelectionInterval(i,i);}break;}}}else{this.oRows=o.getBinding("rows");if(this.oRows.aIndices){for(i=0;i<this.oRows.aIndices.length;i++){var i1=o.getContextByIndex(this.oRows.aIndices[i]);if(i1){var j1=i1.getObject();if(j1[this.getKey()]===e){if(j){o.addSelectionInterval(i,i);}else{o.removeSelectionInterval(i,i);}break;}}}}}}}else{for(i=0;i<o.getItems().length;i++){var k1=o.getItems()[i];var l1=k1.getBindingContext().getObject();if(l1[this.getKey()]===e){o.setSelectedItem(k1,j);break;}}}this._bIgnoreSelectionChange=false;};
e1.prototype.update=function(){var i,j,o,e;var n;var i1=this._oSelectedItems.getItems();var j1={tokenKeys:i1,useDefault:false};this._bIgnoreSelectionChange=true;if(this._hasListeners("updateSelection")){this.fireUpdateSelection(j1);}else{j1.useDefault=true;}if(j1.useDefault){if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this.oRows=this._oTable.getBinding("rows");this._oTable.clearSelection();if(this.oRows&&this.oRows.aKeys){var k1=this.getKeys();var l1=k1&&k1.length>1?this.getKey()+"=":"";for(j=0;j<i1.length;j++){n=i1[j];var m1=l1+"'"+n+"'";for(i=0;i<this.oRows.aKeys.length;i++){var n1=this.oRows.aKeys[i];if(n1===undefined){continue;}n1=decodeURIComponent(n1);var o1=n1===n;if(o1||n1.indexOf(m1)>=0){if(!o1){this._oSelectedItems.remove(n);var p1=this._getTokenByKey(n,this._getTokenizer());if(p1){p1.setKey(n1);}}e=this._oTable.getContextByIndex(i);if(e){o=e.getObject();this._oSelectedItems.add(n1,o);}this._oTable.addSelectionInterval(i,i);break;}}}}else if(this.oRows&&this.oRows.aIndices){this._oTable.clearSelection();var q1=this._oTable.getBinding("rows").getContexts();for(j=0;j<i1.length;j++){var r1=i1[j];for(i=0;i<this.oRows.aIndices.length;i++){e=q1[i];if(e){o=e.getObject();if(o[this.getKey()]===r1){this._oSelectedItems.add(o[this.getKey()],o);this._oTable.addSelectionInterval(i,i);break;}}}}}}else{var s1=this._oTable;for(j=0;j<i1.length;j++){n=i1[j];for(i=0;i<s1.getItems().length;i++){var t1=s1.getItems()[i];var u1=t1.getBindingContext().getObject();if(u1[this.getKey()]===n){s1.setSelectedItem(t1,true);break;}}}}}this._bIgnoreSelectionChange=false;this._updateTitles();};
e1.prototype._createHeaderBar=function(){this._oTitle=new f(this.getId()+"-title");var o=null;if(this._isPhone()){o=new B(this.getId()+"-back",{visible:false,type:Z.Back,press:function(i){if(this._currentViewMode===d1.PHONE_SEARCH_VIEW){this._updateView(d1.PHONE_LIST_VIEW);}else{this._updateView(d1.PHONE_MAIN_VIEW);}}.bind(this)});this._oBackButton=o;}this._oTitle.addStyleClass("sapUiSmallMarginBeginEnd");var e=new k(this.getId()+"-header",{contentLeft:[o,this._oTitle],design:"Header"});this.setCustomHeader(e);this.getCustomHeader().addStyleClass("sapContrastPlus");};
e1.prototype._createCollectiveSearch=function(){this.oSelectionTitle=new g(this.getId()+"-selTitle",{visible:false,wrapping:false}).addStyleClass("compVHColSearchText");if(y.system.tablet&&!y.system.desktop){this.oSelectionTitle.addStyleClass("compVHColSearchTextTabletMaxWidth");}else{this.oSelectionTitle.addStyleClass("compVHColSearchTextMaxWidth");}this.oSelectionButton=new B(this.getId()+"-selButton",{icon:"sap-icon://slim-arrow-down",tooltip:this._oRb.getText("VALUEHELPVALDLG_SEARCHTEMPLATES_TOOLTIP"),type:Z.Transparent,visible:false,ariaLabelledBy:this.oSelectionTitle}).addStyleClass("compVHColSearchBtn");this._oColSearchBox=new H(this.getId()+"-selBox",{fitContainer:true,visible:this.oSelectionButton.getVisible(),items:[this.oSelectionTitle,this.oSelectionButton]}).addStyleClass("compVHColSearchVBox");};
e1.prototype._createFooterControls=function(){this._oButtonOk=new B(this.getId()+"-ok",{text:this._oRb.getText("VALUEHELPDLG_OK"),press:this._onCloseAndTakeOverValues.bind(this),visible:this.getSupportMultiselect(),type:Z.Emphasized,layoutData:new O({priority:$.NeverOverflow})});this._oButtonCancel=new B(this.getId()+"-cancel",{text:this._oRb.getText("VALUEHELPDLG_CANCEL"),press:this._onCancel.bind(this),layoutData:new O({priority:$.NeverOverflow})});if(this._isPhone()){this._oButtonGo=new B(this.getId()+"-go",{text:this._oRb.getText("VALUEHELPDLG_GO"),type:Z.Emphasized,press:this._onGo.bind(this),visible:false,layoutData:new O({priority:$.NeverOverflow})});this._oButtonClear=new B(this.getId()+"-clear",{text:this._oRb.getText("VALUEHELPDLG_CLEAR"),press:this._onClear.bind(this),visible:false,layoutData:new O({priority:$.NeverOverflow})});this.addButton(this._oButtonGo);this.addButton(this._oButtonClear);}this.addButton(this._oButtonOk);this.addButton(this._oButtonCancel);};
e1.prototype._createTokenizer=function(){if(this._oTokenizerGrid){return this._oTokenizerGrid;}this._oSelectedTokenTitle=new s(this.getId()+"-selectedTokenTitle");this._oSelectedTokens=new m(this.getId()+"-selectedTokens",{tokenUpdate:function(e){if(this._ignoreRemoveToken){return;}if(e.getParameter("type")===m.TokenChangeType.Removed){var n=e.getParameter("removedTokens");var i1=[];var j1=[];for(var j=0;j<n.length;j++){var k1=n[j];var l1=k1.getKey();if(this._oSelectedRanges&&this._oSelectedRanges[l1]){j1.push(l1);this._removeToken(l1);}else{i1.push(l1);this._oSelectedItems.remove(l1);this._removeTokenFromTokenizer(l1,this._getTokenizer());}}this._removeRangeByKey(j1);var m1={tokenKeys:i1,useDefault:false};if(this._hasListeners("tokenRemove")){this._bIgnoreSelectionChange=true;this.fireTokenRemove(m1);this._bIgnoreSelectionChange=false;}else{m1.useDefault=true;}if(m1.useDefault){i1.forEach(function(i){this._changeTableRowSelectionForKey(i,false);}.bind(this));}if(n.length===1){setTimeout(function(){var n1=this._getTokenizer().getTokens();if(n1){var i=n1.length-1;if(i>=0){n1[i].focus();}else{this._manageFocusAfterRemoveTokens();}}}.bind(this));}this._updateTitles();}}.bind(this),ariaLabelledBy:this._oSelectedTokenTitle}).addStyleClass("compVHTokensDiv");this._oRemoveAllSelectedItemsBtn=new B(this.getId()+"-removeSelItems",{type:Z.Transparent,icon:t.getIconURI("decline"),tooltip:this._oRb.getText("VALUEHELPVALDLG_REMOVETOKENS_TOOLTIP"),press:function(){this._getTokenizer().destroyTokens();this._removeRangeByKey(Object.keys(this._oSelectedRanges));this._oSelectedItems.removeAll();this._bIgnoreSelectionChange=true;if(this._oTable&&this._oTable.clearSelection){this._oTable.clearSelection();}if(this._oTable&&this._oTable.removeSelections){this._oTable.removeSelections();}this._bIgnoreSelectionChange=false;this._updateTitles();this._manageFocusAfterRemoveTokens();}.bind(this),ariaDescribedBy:this._oSelectedTokenTitle}).addStyleClass("compVHRemoveAllBtn");var o=new x(this.getId()+"-selItemsBox",{content:[this._getTokenizer(),this._oRemoveAllSelectedItemsBtn]}).addStyleClass("compVHTokenizerHLayout");this._oIncludeTokenGrid=new G(this.getId()+"-selItemsGrid",{width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:[this._oSelectedTokenTitle,o]}).addStyleClass("sapUiRespGridOverflowHidden");this._oTokenizerPanel=new P(this.getId()+"-tokenPanel",{expanded:y.system.desktop,expandable:false,expandAnimation:true,headerText:"",width:"auto",content:[this._oIncludeTokenGrid],expand:function(e){this._updateTokenizer();if(e.mParameters.expand&&this._oTable&&!(this._oTable.isA("sap.m.Table"))){var i=window.document.getElementById(this.getId()+"-scrollCont");if(i&&i.scrollTop){i.stop().animate({scrollTop:"1000"},1000);}}}.bind(this)}).addStyleClass("compVHBackgroundTransparent").addStyleClass("compVHTokensPanel").addStyleClass("compValueHelpDialogTokens");if(this._isPhone()){this._getTokenizer().addStyleClass("sapMTokenizerMultiLine");}this._oTokenizerGrid=new G(this.getId()+"-tokenizerGrid",{width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:this._oTokenizerPanel}).addStyleClass("compVHDBackground").addStyleClass("sapUiRespGridOverflowHidden");return this._oTokenizerGrid;};
e1.prototype._addToken2Tokenizer=function(e,i,o,j){var n=(typeof i==="string")?i:"";var i1=this._getTokenByKey(e,o);if(!i1){i1=new T(g1.call(this,e,j));i1.setKey(e);o.addToken(i1);this._updateTokenizer();}if(i1){i1.setText(i);i1.setTooltip(n);}};
e1.prototype._getTokenByKey=function(e,o){var j=o.getTokens();for(var i=0;i<j.length;i++){var n=j[i];if(n.getKey()===e){return n;}}return null;};
e1.prototype._removeToken=function(e){this._removeTokenFromTokenizer(e,this._getTokenizer());};
e1.prototype._removeTokenFromTokenizer=function(e,o){var i=this._getTokenByKey(e,o);if(i){this._ignoreRemoveToken=true;o.removeToken(i);i.destroy();this._ignoreRemoveToken=false;this._updateTokenizer();return true;}return false;};
e1.prototype._updateTokenizer=function(){this._bInitTokensHaveChanged=true;var e=false;if(this._oTokenizerPanel){e=this._oTokenizerPanel.getExpanded();}var n=this._getTokenizer().getTokens().length;var i=this._oRb.getText("VALUEHELPDLG_SELECTEDITEMS_CONDITIONS");var j=this._oRb.getText("VALUEHELPDLG_NONESELECTEDITEMS_CONDITIONS");var o=i.replace("{0}",n.toString());var i1=n===0?j:o;if(this._oTokenizerPanel){if(!e){i1="";if(n!==0){i1=o;}if(i1===""){i1=j;}}this._oTokenizerPanel.setHeaderText(i1);this._oSelectedTokenTitle.setText(i1);}else{this._oSelectedTokenTitle.setText(i1);}this._oRemoveAllSelectedItemsBtn.setEnabled(n!==0);this._oIncludeTokenGrid.removeStyleClass("displayNone");};
e1.prototype._createNavigationControl=function(){if(!this._isPhone()){this._oTabBar=new p(this.getId()+"-navigation",{expandable:false,items:[new q(this.getId()+"-itemstable",{visible:true,text:this._getTabSearchAndSelectText(),key:d1.DESKTOP_LIST_VIEW}),new q(this.getId()+"-ranges",{visible:true,text:this._getTabRangesText(),key:d1.DESKTOP_CONDITIONS_VIEW})],select:function(o){this._updateView(o.getParameters().key);}.bind(this)});this._oTabBar.setLayoutData(new d({shrinkFactor:0}));this._oNavigationContainer.addItem(this._oTabBar);}else{this._oSelectItemLI=new S(this.getId()+"-itemstable",{type:a1.Navigation,title:this._getTabSearchAndSelectText()}).data("key",d1.PHONE_LIST_VIEW);this._oDefineConditionsLI=new S(this.getId()+"-ranges",{type:a1.Navigation,title:this._getTabRangesText()}).data("key",d1.PHONE_CONDITIONS_VIEW);this._oMainListMenu=new z(this.getId()+"-navigation",{mode:_.None,items:[this._oSelectItemLI,this._oDefineConditionsLI],itemPress:function(e){if(e){this._updateView(e.mParameters.listItem.data("key"));}}.bind(this)});this._oMainListMenu.setLayoutData(new d({shrinkFactor:0}));this._oContentContainer.addItem(this._oMainListMenu);this._oAdvancedSearchLink=new A(this.getId()+"-advancedSearchLink",{text:this._oRb.getText("FILTER_BAR_ADV_FILTERS_DIALOG"),press:function(){this._updateView(d1.PHONE_SEARCH_VIEW);}.bind(this)}).addStyleClass("compVHAdvancedSearchLink");this._oAdvancedSearchLink.setLayoutData(new d({shrinkFactor:0,alignSelf:"End"}));this._oContentContainer.addItem(this._oAdvancedSearchLink);}};
e1.prototype._updateNavigationControl=function(){var e=!this.getSupportRangesOnly();var i=this.getSupportRangesOnly()||this.getSupportRanges();if(this._oTabBar){var j=this._oTabBar.getItems();j[0].setVisible(e);j[1].setVisible(i);this._oTabBar.setVisible(e&&i);this._updateDlgTitle();}if(this._oMainListMenu){this._oSelectItemLI.setVisible(e);this._oDefineConditionsLI.setVisible(i);}};
e1.prototype._removeRangeByKey=function(e){var i=e;if(typeof i==="string"){i=[i];}i.forEach(function(e,j,i){var n=this._oSelectedRanges[e];if(!n._oGrid){delete this._oSelectedRanges[e];if(this._oFilterPanel){var o=this._oFilterPanel.getConditionPanel();if(i.length==1){o.removeCondition(e);}else{o._removeConditionFromMap(e);}}}},this);if(i.length>1&&this._oFilterPanel){var o=this._oFilterPanel.getConditionPanel();o._clearConditions();o._fillConditions();}};
e1.prototype._createAddRanges=function(){if(!this._oRanges){if(!sap.ui.require('sap/m/P13nFilterPanel')){sap.ui.require(['sap/m/P13nFilterPanel'],function(){this._oRanges=this._createRanges();this._oMainLayout.addItem(this._oRanges);}.bind(this));}else{this._oRanges=this._createRanges();this._oMainLayout.addItem(this._oRanges);}}else{this._oMainLayout.addItem(this._oRanges);}};
e1.prototype._createRanges=function(){var e,o;this._oFilterPanel=new E(this.getId()+"-filterPanel",{maxIncludes:this.getMaxIncludeRanges(),maxExcludes:this.getMaxExcludeRanges(),containerQuery:true,enableEmptyOperations:true,filterItemChanged:function(j1){var k1=j1.getParameter("reason");var l1=j1.getParameter("key");var m1=j1.getParameter("itemData");if(m1&&k1==="added"){var n1={exclude:m1.exclude,keyField:m1.columnKey,operation:m1.operation,value1:m1.value1,value2:m1.value2};this._oSelectedRanges[l1]=n1;var n=new N({key:l1,exclude:m1.exclude,columnKey:m1.columnKey,operation:m1.operation});n.setValue1(m1.value1);n.setValue2(m1.value2);this._oFilterPanel.addFilterItem(n);var o1=this._getFormatedRangeTokenText(n1.operation,n1.value1,n1.value2,n1.exclude,n1.keyField);this._addToken2Tokenizer(l1,o1,this._getTokenizer(),n1.keyField);this._updateTokenizer();}if(m1&&k1==="updated"){var n1=this._oSelectedRanges[l1];n1.exclude=m1.exclude;n1.keyField=m1.columnKey;n1.operation=m1.operation;n1.value1=m1.value1;n1.value2=m1.value2;var o1=this._getFormatedRangeTokenText(n1.operation,n1.value1,n1.value2,n1.exclude,n1.keyField);this._addToken2Tokenizer(l1,o1,this._getTokenizer(),n1.keyField);this._updateTokenizer();}if(k1==="removed"){delete this._oSelectedRanges[l1];this._removeToken(l1);this._updateTokenizer();}this._updateTabRangesTitle();}.bind(this)});this._oFilterPanel.bIsSingleIntervalRange=this.bIsSingleIntervalRange;if(this.getProperty("_enhancedExcludeOperations")){this._oFilterPanel._enableEnhancedExcludeOperations();}o=this._oFilterPanel.getConditionPanel();o.setDisplayFormat(this.getDisplayFormat());this._oFilterPanel.setSuggestCallback(this._fSuggestCallback);o._sAddRemoveIconTooltipKey="CONDITION";if(this._aIncludeRangeOperations){for(e in this._aIncludeRangeOperations){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[e],e);}}if(this._aExcludeRangeOperations){for(e in this._aExcludeRangeOperations){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[e],e);}}if(this._aRangeKeyFields){this._aRangeKeyFields.forEach(function(j1){this._oFilterPanel.addItem(new K({columnKey:j1.key,text:j1.label,typeInstance:j1.typeInstance,type:j1.type,maxLength:j1.maxLength,formatSettings:j1.formatSettings,scale:j1.scale,precision:j1.precision,isDefault:j1.isDefault,values:null,nullable:j1.nullable!=="false"}));},this);}if(this._oSelectedRanges){for(var i in this._oSelectedRanges){var j=this._oSelectedRanges[i];var n=new N({key:i,exclude:j.exclude,columnKey:j.keyField,operation:j.operation});n.setValue1(j.value1);n.setValue2(j.value2);this._oFilterPanel.addFilterItem(n);}}var i1=new G(this.getId()+"-rangeFieldsGrid",{width:"100%",defaultSpan:"L12 M12 S12",vSpacing:0,hSpacing:0,content:[this._oFilterPanel]}).addStyleClass("sapUiRespGridOverflowHidden");this._sValidationDialogTitle=this._oRb.getText("VALUEHELPVALDLG_TITLE");this._sValidationDialogMessage=this._oRb.getText("VALUEHELPVALDLG_MESSAGE");this._sValidationDialogFieldMessage=this._oRb.getText("VALUEHELPVALDLG_FIELDMESSAGE");return i1;};
e1.prototype.suggest=function(e){this._fSuggestCallback=e;if(this._oFilterPanel){this._oFilterPanel.setSuggestCallback(this._fSuggestCallback);}};
e1.prototype._getKeyFieldByKey=function(e){var o;if(this._aRangeKeyFields){this._aRangeKeyFields.some(function(i){if(typeof i!=="string"){if(i.key===e){o=i;return true;}}return false;});}return o;};
e1.prototype._validateRanges=function(e,i){if(this._oRanges){if(!this._oRanges.getParent()){e();return;}var j=this._oFilterPanel.validateConditions();if(!j){M.show(this._sValidationDialogMessage,{icon:M.Icon.WARNING,title:this._sValidationDialogTitle,actions:[M.Action.OK,M.Action.CANCEL],styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:function(n){if(n===M.Action.OK&&e){e();}if(n===M.Action.CANCEL&&i){i();}}});return;}}e();};
e1.prototype.setUpdateSingleRowCallback=function(e){this.fSingleRowCallback=e;this._updateNavigationControl();};
e1.prototype._createDefaultTable=function(){if(!this._isPhone()){this.setTable(new U(this.getId()+"-table"),true);}else{this.setTable(new w(this.getId()+"-table"),true);this.TableStateSearchData();}};
function f1(){if(!(this._oTablePromise instanceof Promise)){this._oTablePromise=new Promise(function(e,i){this._fnRejectTablePromise=i;if(!this._isPhone()){var o=new U(this.getId()+"-table");this.setTable(o,true);e(o);}else{var o=new w(this.getId()+"-table");this.setTable(o,true);this.TableStateSearchData();e(o);}}.bind(this));}return this._oTablePromise;}
e1.prototype._initializeTable=function(){if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this._oTable.setTitle(y.system.desktop?this._sTableTitleNoCount:null);if(this._bTableCreatedInternal){this._oTable.setSelectionBehavior(u.SelectionBehavior.Row);}this._oTable.setSelectionMode(this.getSupportMultiselect()?u.SelectionMode.MultiToggle:u.SelectionMode.Single);this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_PRESSSEARCH"));this._oTable.setVisibleRowCountMode(u.VisibleRowCountMode.Fixed);this._oTable.setMinAutoRowCount(y.system.desktop?5:4);this._oTable.attachRowSelectionChange(function(o){if(this._bIgnoreSelectionChange||!o.getParameter("userInteraction")){return;}var j={tableSelectionParams:o.mParameters,updateTokens:[],useDefault:false,table:this._oTable};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(j);this._bIgnoreSelectionChange=false;j.updateTokens.forEach(function(r1){this._addRemoveTokenByKey(r1.sKey,r1.oRow,r1.bSelected);}.bind(this));}else{j.useDefault=true;}if(j.useDefault){var i1=o.getSource();var j1=i1.getBinding("rows");var k1=i1.getSelectedIndices();var l1=o.getParameter("rowIndices");var m1=o.getParameter("selectAll");var n1=j1.isLengthFinal?j1.isLengthFinal():true;var i,n=k1.length;var o1;var p1=0;if(n1){if(j1.aKeys){for(i=0;i<n;i++){o1=k1[i];if(!j1.aKeys[o1]){p1++;}}}}else if(m1){p1=99999999;}if(p1!==0){var q1=function(){j1.attachEventOnce("dataReceived",function(){if(m1){i1.selectAll();l1=i1.getSelectedIndices();}this._handleSelectionUpdateTokens(i1,l1);}.bind(this));if(m1){if(n1){j1.getContexts(0,n);}else{j1.getContexts(0,p1);}}else{j1.getContexts(l1[0],l1[l1.length-1]);}}.bind(this);if(p1<=400){q1();return;}else{M.show(this._oRb.getText("VALUEHELPDLG_SELECTIONFAILEDLOAD"),{icon:M.Icon.WARNING,title:this._oRb.getText("VALUEHELPDLG_SELECTIONFAILEDLOADTITLE"),actions:[M.Action.OK,M.Action.CANCEL],initialFocus:M.Action.CANCEL,styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:function(r1){if(r1===M.Action.OK){q1();}else{this.update();}}.bind(this)});return;}}this._handleSelectionUpdateTokens(i1,l1);}this._updateTitles();if(!this.getSupportMultiselect()){this._bIgnoreSelectionChange=true;this._onCloseAndTakeOverValues();}}.bind(this));this._oTable.addStyleClass("compVHMainTable");if(!this._oTable.getParent()||!this._oTable.getParent().isA("sap.ui.comp.smarttable.SmartTable")){this._oTable.bindAggregation("columns","columns>/cols",function(i,o){var j,n,i1,j1=o.getProperty("tooltip");if(o.getProperty("type")==="string"){n={path:o.getProperty("template")};}if(o.getProperty("type")==="boolean"){j=new Q(i+"-control",{enabled:false,selected:{path:o.getProperty("template")}});}else{j=new g(i+"-control",{wrapping:false,text:{path:o.getProperty("template"),type:o.getProperty("oType")},tooltip:n});}if(this._oTable.isA("sap.ui.table.AnalyticalTable")){i1=new Y(i,{label:"{columns>label}",template:j,width:"{columns>width}",hAlign:j instanceof Q?b1.Center:b1.Begin,filterProperty:o.getProperty("filter")});}else{i1=new v(i,{label:"{columns>label}",template:j,width:"{columns>width}",hAlign:j instanceof Q?b1.Center:b1.Begin,sortProperty:o.getProperty("sort"),sorted:o.getProperty("sorted"),sortOrder:o.getProperty("sortOrder"),filterProperty:o.getProperty("filter")});}if(j1){i1.applySettings({tooltip:j1});}return i1;}.bind(this));}}else{this._oTable.setMode(this.getSupportMultiselect()?_.MultiSelect:_.SingleSelectLeft);this._oTable.setGrowing(true);this._oTable.attachSelectionChange(function(o){if(this._bIgnoreSelectionChange){return;}var j=o.mParameters;var i1={tableSelectionParams:o.mParameters,updateTokens:[],useDefault:false,table:this._oTable};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(i1);this._bIgnoreSelectionChange=false;i1.updateTokens.forEach(function(o1){this._addRemoveTokenByKey(o1.sKey,o1.oRow,o1.bSelected);}.bind(this));}else{i1.useDefault=true;}if(i1.useDefault){var j1=j.selected;var i,n=j.listItems.length;for(i=0;i<n;i++){var k1=j.listItems[i];var l1=k1.getBindingContext();var m1=l1?l1.getObject():null;if(m1){var n1=m1[this.getKey()];if(!this.getSupportMultiselect()){this._oSelectedItems.removeAll();}this._addRemoveTokenByKey(n1,m1,j1);}}}if(!this.getSupportMultiselect()){this._onCloseAndTakeOverValues();}}.bind(this));if(!this._oTable.getParent()||!this._oTable.getParent().isA("sap.ui.comp.smarttable.SmartTable")){var e=0;this._oTable.bindAggregation("columns","columns>/cols",function(i,o){var j=o.getProperty("label");var n=this._oTable.getColumns().length>=2;e++;return new C(this._oTable.getId()+"-column"+e,{header:new h(this._oTable.getId()+"-column"+e+"-label",{text:j}),demandPopin:n,minScreenWidth:n?(this._oTable.getColumns().length+1)*10+"rem":"1px"});}.bind(this));}}};
e1.prototype._handleSelectionUpdateTokens=function(o,e){var i,n=e.length;var j;var i1;var j1;var k1=false;if(o.getBinding("rows").aKeys){k1=true;}if(!this.getSupportMultiselect()){this._oSelectedItems.removeAll();}for(i=0;i<n;i++){j=e[i];i1=o.getContextByIndex(j);j1=i1?i1.getObject():null;if(j1){var l1;if(k1){l1=i1.sPath.substring(1);}else{l1=j1[this.getKey()];}this._addRemoveTokenByKey(l1,j1,o.isIndexSelected(j));}}};
e1.prototype._addRemoveTokenByKey=function(i,o,j){try{i=decodeURIComponent(i);}catch(e){}if(j){this._oSelectedItems.add(i,o);this._addToken2Tokenizer(i,this._getFormatedTokenText(i),this._getTokenizer());}else{this._oSelectedItems.remove(i);this._removeTokenFromTokenizer(i,this._getTokenizer());}};
e1.prototype._onCloseAndTakeOverValues=function(){var e=this;var j=function(){var n;var o=e._oSelectedItems.getSelectedItemsTokenArray(e.getKey(),e.getDescriptionKey(),e.getTokenDisplayBehaviour());if(e._oSelectedRanges){var i=0;for(var i1 in e._oSelectedRanges){n=e._oSelectedRanges[i1];var j1=n.tokenValue;if(!j1){j1=e._getFormatedRangeTokenText(n.operation,n.value1,n.value2,n.exclude,n.keyField);}if(!n._oGrid||n._oGrid.select.getSelected()){var k1=new T({key:"range_"+i}).data("range",{"exclude":n.exclude,"operation":n.operation,"keyField":n.keyField,"value1":n.value1,"value2":n.value2});k1.setText(j1);k1.setTooltip(typeof j1==="string"?j1:null);o.push(k1);i++;}}}e.fireOk({"tokens":o,"_tokensHaveChanged":e._bInitTokensHaveChanged});};this._validateRanges(j);};
e1.prototype._onCancel=function(){this.fireCancel();};
e1.prototype._onGo=function(){this._oFilterBar.search();};
e1.prototype._onClear=function(){this._oFilterBar.clear();};
e1.prototype._updateTitles=function(){this._updateTableTitle();this._updateTokenizer();this._updateTabSearchAndSelectTitle();this._updateTabRangesTitle();};
e1.prototype._updateDlgTitle=function(){var e="";var i;if(this._oTitle){if(this._oTabBar&&!this._oTabBar.getVisible()&&!this.getFilterMode()){if(this._oTabBar.getSelectedKey()===d1.DESKTOP_LIST_VIEW){e="VALUEHELPDLG_TITLE";}else if(this._oTabBar.getSelectedKey()===d1.DESKTOP_CONDITIONS_VIEW){if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){e="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{e="VALUEHELPDLG_RANGESTITLE";}}}else if(this._isPhone()&&!this.getFilterMode()){switch(this._currentViewMode){case d1.PHONE_MAIN_VIEW:e="";break;case d1.PHONE_LIST_VIEW:i=this._getTabSearchAndSelectText();break;case d1.PHONE_SEARCH_VIEW:e="FILTER_BAR_ADV_FILTERS_DIALOG";break;case d1.PHONE_CONDITIONS_VIEW:if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){e="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{i=this._getTabRangesText();}break;default:break;}}if(!i){i=this.getTitle();}if(e){i=this._oRb.getText(e,i);}if(i){this._oTitle.setText(i);this._oFilterPanel&&this._oFilterPanel.setInnerTitle(this.getTitle());}}};
e1.prototype._updateTableTitle=function(){if(!this._oTable){return;}var i=0;this.oRows=this._oTable.getBinding("rows");if(this.oRows){i=this.oRows.getLength();}if(!this._oNumberFormatInstance){this._oNumberFormatInstance=W.getFloatInstance();}if(i>0&&this.oRows.isLengthFinal&&this.oRows.isLengthFinal()){var e=this._oNumberFormatInstance.format(i);this._setTableTitle(this._sTableTitle1.replace("{0}",e));}else{this._setTableTitle(this._sTableTitleNoCount);}};
e1.prototype._getTabSearchAndSelectText=function(){var o=this._oTable;if(o){if(o.isA("sap.ui.comp.smarttable.SmartTable")){o=o.getTable();}var n=0;if(o.getSelectedIndices){n=o.getSelectedIndices().length;}else if(o.getSelectedItems){n=o.getSelectedItems().length;}if(n>0){return this._oRb.getText("VALUEHELPDLG_ITEMSTABLE_SELECT",[n]);}}return this._oRb.getText("VALUEHELPDLG_ITEMSTABLE_SELECT").replace("({0})","");};
e1.prototype._getTabRangesText=function(){if(this._oSelectedRanges&&Object.keys(this._oSelectedRanges).length>0){var n=Object.keys(this._oSelectedRanges).length;return this._oRb.getText("VALUEHELPDLG_RANGES",[n]);}return this._oRb.getText("VALUEHELPDLG_RANGES").replace("({0})","");};
e1.prototype._updateTabSearchAndSelectTitle=function(){var e=!this.getSupportRangesOnly();if(e){if(this._oTabBar){this._oTabBar.getItems()[0].setText(this._getTabSearchAndSelectText());}if(this._oMainListMenu&&this._oSelectItemLI){this._oSelectItemLI.setTitle(this._getTabSearchAndSelectText());}}};
e1.prototype._updateTabRangesTitle=function(){var e=this.getSupportRangesOnly()||this.getSupportRanges();if(e){if(this._oTabBar){this._oTabBar.getItems()[1].setText(this._getTabRangesText());}if(this._oMainListMenu&&this._oDefineConditionsLI){this._oDefineConditionsLI.setTitle(this._getTabRangesText());}}};
e1.prototype._setTableTitle=function(e){if(y.system.desktop&&this._oTable&&!(this._oTable.isA("sap.m.Table"))){if(this._oTable.getTitle()){this._oTable.getTitle().setText(e);}else{this._oTable.setTitle(e);}}else{this._oTable.addStyleClass("compValueHelpSmallMarginTop");}};
e1.prototype.onAfterRendering=function(){D.prototype.onAfterRendering.apply(this);if(this._oTable){this._updateTitles();}if(!this._isPhone()&&this.getContentHeight()===""){if(this.getSupportRangesOnly()&&(this.getMaxExcludeRanges()==="-1"||this.getMaxIncludeRanges()==="-1")){this.setContentHeight("70%");}else{var o=this.getDomRef("scroll");var e=o.clientHeight;this.setContentHeight(e+"px");}if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this._oTable.setVisibleRowCountMode(u.VisibleRowCountMode.Auto);}}this._bInitTokensHaveChanged=false;this._registerResizeHandler();};
e1.prototype.onsapbackspace=function(e){if(this._ignoreRemoveToken||!e.srcControl||!e.srcControl.isA("sap.m.Token")){return;}var j=e.srcControl.getKey?e.srcControl.getKey():"",n=[];if((e.type==="sapbackspace"||e.type==="sapdelete")&&j){if(this._oSelectedRanges&&this._oSelectedRanges[j]){n.push(j);this._removeToken(j);}else{this._oSelectedItems.remove(j);this._removeTokenFromTokenizer(j,this._getTokenizer());}}this._removeRangeByKey(n);var o={tokenKeys:[j],useDefault:false};if(this._hasListeners("tokenRemove")){this._bIgnoreSelectionChange=true;this.fireTokenRemove(o);this._bIgnoreSelectionChange=false;}else{o.useDefault=true;}if(o.useDefault){this._changeTableRowSelectionForKey(j,false);}setTimeout(function(){var i1=this._getTokenizer().getTokens();if(i1){var i=i1.length-1;if(i>=0){i1[i].focus();}else{this._manageFocusAfterRemoveTokens();}}}.bind(this));this._updateTitles();};
e1.prototype.onsapdelete=e1.prototype.onsapbackspace;
e1.prototype._getDialogOffset=function(e){var i=e||this._$Window.width();var j={small:600,large:1024};var n=function(o){var i1=parseInt(window.getComputedStyle(document.body).fontSize);return(o*i1)*2;};var o=1;if(i>j.small&&i<j.large){o=2;}else if(i>=j.large){o=2;}return{top:n(o),left:n(o)};};
e1.prototype.exit=function(){D.prototype.exit.apply(this);if(typeof this._fnRejectTablePromise==="function"){this._fnRejectTablePromise();}this.removeDelegate(this._onBeforeRenderingInputEventDelegate);var e=function(o){if(o&&o.destroy){o.destroy();}return null;};this._oTokenizerGrid=e(this._oTokenizerGrid);this._oRanges=e(this._oRanges);this._oFilterPanel=e(this._oFilterPanel);if(this._bTableCreatedInternal){this._oTable=e(this._oTable);}this._oTable=null;this.theTable=null;this._oNumberFormatInstance=null;this._oTabBar=e(this._oTabBar);this._oMainListMenu=e(this._oMainListMenu);this._oContentContainer=e(this._oContentContainer);this._oVarManagment=e(this._oVarManagment);this._aRangeKeyFields=e(this._aRangeKeyFields);this._aIncludeRangeOperations=e(this._aIncludeRangeOperations);this._aExcludeRangeOperations=e(this._aExcludeRangeOperations);if(this._oFilterBar){this._oFilterBar.detachInitialise(this._handleFilterBarInitialize);this._oFilterBar=e(this._oFilterBar);}this._oRb=e(this._oRb);this._sTableTitle1=e(this._sTableTitle1);this._sTableTitle2=e(this._sTableTitle2);this._sTableTitleNoCount=e(this._sTableTitleNoCount);this._sValidationDialogTitle=e(this._sValidationDialogTitle);this._sValidationDialogMessage=e(this._sValidationDialogMessage);this._sValidationDialogFieldMessage=e(this._sValidationDialogFieldMessage);this._oSelectedItems=e(this._oSelectedItems);this._oSelectedRanges=e(this._oSelectedRanges);this._oButtonOk=e(this._oButtonOk);this._oButtonCancel=e(this._oButtonCancel);if(this._oButtonGo){this._oButtonGo=e(this._oButtonGo);}if(this._oButtonClear){this._oButtonClear=e(this._oButtonClear);}if(this._oColSearchBox){this._oColSearchBox=e(this._oColSearchBox);}};
e1.prototype.setRangeKeyFields=function(e){this._aRangeKeyFields=e;if(this._aRangeKeyFields){this._aRangeKeyFields.some(function(i){if(i.typeInstance&&i.typeInstance.isA("sap.ui.model.odata.type.DateTime")){var o=i.typeInstance;if(!o.oFormat){o.formatValue(new Date(),"string");}if(o.oFormat){o.oFormat.oFormatOptions.UTC=false;}}});}};
e1.prototype.getRangeKeyFields=function(){return this._aRangeKeyFields;};
e1.prototype.setIncludeRangeOperations=function(o,e){e=e||"default";this._aIncludeRangeOperations[e]=o;if(this._oFilterPanel){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[e],e);}};
e1.prototype.setExcludeRangeOperations=function(o,e){e=e||"default";this._aExcludeRangeOperations[e]=o.map(function(i){return this._oOperationsHelper.getCorrespondingExcludeOperation(i);}.bind(this));if(this._oFilterPanel){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[e],e);}};
e1.prototype._getFormatedTokenText=function(e){var i=this._oSelectedItems.getItem(e);var j=i[this.getDescriptionKey()];var n=i[this.getKey()];if(j===undefined){if(typeof i==="string"){j=i;}else{j=e;}}else{j=a.getFormattedExpressionFromDisplayBehaviour(this.getTokenDisplayBehaviour()?this.getTokenDisplayBehaviour():c1.descriptionAndId,n,j);}return j;};
e1.prototype._getFormatedRangeTokenText=function(o,e,i,j,n){var i1=this._getKeyFieldByKey(n);var j1=e;var k1=i;var l1=true;if(i1){if(!i1.typeInstance&&J._createKeyFieldTypeInstance){J._createKeyFieldTypeInstance(i1);}if(i1.typeInstance){j1=i1.typeInstance.formatValue(e,"string",l1);k1=i1.typeInstance.formatValue(i,"string",l1);}}var m1=a.getFormattedRangeText(o,j1,k1,j);if(this._aRangeKeyFields&&this._aRangeKeyFields.length>1&&i1&&i1.label&&m1!==""){m1=i1.label+": "+m1;}return m1;};
e1.prototype._isPhone=function(){return y.system.phone;};
e1.prototype._hasListeners=function(e){if(this._bTableCreatedInternal){return false;}return this.hasListeners(e);};
e1.prototype._rotateSelectionButtonIcon=function(e){if(!y.system.phone){var o=sap.ui.getCore().byId(this.oSelectionButton.$("img")[0].id);if(e){o.addStyleClass("sapUiVHImageExpand");}else{o.removeStyleClass("sapUiVHImageExpand");}}};
e1.prototype._getTokenizer=function(){return this._oSelectedTokens;};
e1.prototype._getTabSearchAndSelect=function(){var e=!this.getSupportRangesOnly();if(e){if(this._oTabBar){return this._oTabBar.getItems()[0];}if(this._oMainListMenu&&this._oSelectItemLI){return this._oSelectItemLI;}}return null;};
e1.prototype._getTabDefneConditions=function(){var e=this.getSupportRangesOnly()||this.getSupportRanges();if(e){if(this._oTabBar){return this._oTabBar.getItems()[1];}if(this._oMainListMenu&&this._oDefineConditionsLI){return this._oDefineConditionsLI;}}return null;};
e1.prototype._registerResizeHandler=function(){D.prototype._registerResizeHandler.apply(this,arguments);X.register(this,this._onResize.bind(this));};
e1.prototype._onResize=function(){D.prototype._onResize.apply(this,arguments);this._setToolbarSpacerWidth();};
e1.prototype._setToolbarSpacerWidth=function(){var o,e,j;if(!this._oFilterBar){return;}if(this._oFilterBar._oToolbar){e=this._oFilterBar._oToolbar.getContent();for(var i=0;i<e.length;i++){if(e[i].isA("sap.m.ToolbarSpacer")){o=e[i];break;}}}if(o&&this._oFilterBar.getBasicSearch()){j=this.getDomRef()&&parseInt(this.getDomRef().style.width);if(j>=1000){o.setWidth("6rem");}else if(j<1000&&j>700){o.setWidth("4rem");}else{o.setWidth("0.5rem");}}};
e1.prototype._manageFocusAfterRemoveTokens=function(){var o,e=this._oFilterPanel?this._oFilterPanel.getConditionPanel():undefined;if(this._currentViewMode.toLowerCase().indexOf("list")>-1){this._oButtonOk.focus();}else{this._onAfterRenderingInputDelegate={onAfterRendering:function(){o.focus();}};this._onBeforeRenderingInputEventDelegate={onBeforeRendering:function(){if(o.getDomRef()){o.removeDelegate(this._onAfterRenderingInputDelegate,this);}}};o=e._oConditionsGrid.getAggregation("content")[0].value1;o.addDelegate(this._onAfterRenderingInputDelegate,this);o.addDelegate(this._onBeforeRenderingInputEventDelegate,this);o.focus();}};
function g1(e,i){if(!i){i=this.getKey();}e=e.replace(/[^a-zA-Z0-9]/g,"");i=i.replace(/[^a-zA-Z0-9]/g,"");var j=i?i+"-"+e:e;if(!this._oTokenIdCount[j]){this._oTokenIdCount[j]=0;}this._oTokenIdCount[j]++;return this.getId()+"-token-"+j+"_"+this._oTokenIdCount[j];}
function h1(e){if(e){var i=e.getItems();return i[0].getVisible()&&i[1].getVisible();}else{return false;}}
return e1;});
sap.ui.predefine('sap/ui/comp/variants/EditableVariantItem',['sap/m/ColumnListItem','sap/m/ColumnListItemRenderer','sap/ui/comp/library'],function(C,a,l){"use strict";
var E=C.extend("sap.ui.comp.variants.EditableVariantItem",{
metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},global:{type:"boolean",group:"Misc",defaultValue:null},lifecyclePackage:{type:"string",group:"Misc",defaultValue:null},lifecycleTransportId:{type:"string",group:"Misc",defaultValue:null},namespace:{type:"string",group:"Misc",defaultValue:null},readOnly:{type:"boolean",group:"Misc",defaultValue:false},accessOptions:{type:"string",group:"Misc",defaultValue:null,deprecated:true},labelReadOnly:{type:"boolean",group:"Misc",defaultValue:false},author:{type:"string",group:"Misc",defaultValue:null},favorite:{type:"boolean",group:"Misc",defaultValue:false},_contexts:{type:"object",group:"Misc",visibility:"hidden",defaultValue:{}}}},
renderer:{apiVersion:2}
});
E.prototype.setContexts=function(c){this.setProperty("_contexts",c);};
E.prototype.getContexts=function(){return this.getProperty("_contexts");};
return E;});
sap.ui.predefine('sap/ui/comp/variants/VariantItem',['sap/ui/comp/library','sap/ui/core/Item'],function(l,I){"use strict";
var V=I.extend("sap.ui.comp.variants.VariantItem",{metadata:{library:"sap.ui.comp",properties:{executeOnSelection:{type:"boolean",group:"Misc",defaultValue:false},readOnly:{type:"boolean",group:"Misc",defaultValue:false},lifecycleTransportId:{type:"string",group:"Misc",defaultValue:null},global:{type:"boolean",group:"Misc",defaultValue:null},lifecyclePackage:{type:"string",group:"Misc",defaultValue:null},namespace:{type:"string",group:"Misc",defaultValue:null},accessOptions:{type:"string",group:"Misc",defaultValue:null,deprecated:true},labelReadOnly:{type:"boolean",group:"Misc",defaultValue:false},author:{type:"string",group:"Misc",defaultValue:null},favorite:{type:"boolean",group:"Misc",defaultValue:false},_contexts:{type:"object",group:"Misc",visibility:"hidden",defaultValue:{}}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
V.prototype.setText=function(t){this.setProperty("text",t);this.fireChange({propertyName:"text"});return this;};
V.prototype.setContexts=function(c){this.setProperty("_contexts",c);};
V.prototype.getContexts=function(){return this.getProperty("_contexts");};
return V;});
sap.ui.predefine('sap/ui/comp/variants/VariantManagement',['sap/ui/Device','sap/ui/model/json/JSONModel','sap/ui/core/library','sap/m/library','sap/m/VBox','sap/m/SearchField','sap/m/ToggleButton','sap/m/RadioButton','sap/m/Column','sap/m/Text','sap/m/Bar','sap/m/Table','sap/m/Page','sap/m/OverflowToolbar','sap/m/OverflowToolbarLayoutData','sap/m/Toolbar','sap/m/ToolbarSpacer','sap/m/Button','sap/m/CheckBox','sap/m/Dialog','sap/m/Input','sap/m/Title','sap/m/Label','sap/m/ResponsivePopover','sap/m/SelectList','sap/m/ObjectIdentifier','sap/ui/comp/library','./EditableVariantItem','./VariantItem','sap/ui/core/InvisibleText','sap/ui/core/Control','sap/ui/core/Icon','sap/ui/core/Item','sap/ui/layout/HorizontalLayout','sap/ui/layout/Grid','sap/ui/events/KeyCodes'],function(D,J,c,l,V,S,T,R,C,a,B,b,P,O,d,f,g,h,j,k,I,m,L,n,o,p,q,E,r,s,t,u,v,H,G,K){"use strict";var w=c.VerticalAlign;var x=c.ValueState;var y=l.ButtonType;var z=l.PlacementType;var A=l.PopinDisplay;var F=l.ScreenSize;var M=c.TextAlign;var N=c.TitleLevel;var Q=l.OverflowToolbarPriority;var U=l.FlexAlignItems;
var W=t.extend("sap.ui.comp.variants.VariantManagement",{
metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/variants/VariantManagement.designtime",properties:{initialSelectionKey:{type:"string",group:"Misc",defaultValue:null},enabled:{type:"boolean",group:"Misc",defaultValue:true},defaultVariantKey:{type:"string",group:"Misc",defaultValue:null},selectionKey:{type:"string",group:"Misc",defaultValue:null},showCreateTile:{type:"boolean",group:"Misc",defaultValue:false},showExecuteOnSelection:{type:"boolean",group:"Misc",defaultValue:false},showShare:{type:"boolean",group:"Misc",defaultValue:false},showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},lifecycleSupport:{type:"boolean",group:"Misc",defaultValue:false},standardItemText:{type:"string",group:"Misc",defaultValue:null},useFavorites:{type:"boolean",group:"Misc",defaultValue:false},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},variantCreationByUserAllowed:{type:"boolean",group:"Misc",defaultValue:true},standardItemAuthor:{type:"string",group:"Misc",defaultValue:"SAP"}},defaultAggregation:"items",aggregations:{items:{type:"sap.ui.core.Item",multiple:true,singularName:"item",deprecated:true},variantItems:{type:"sap.ui.comp.variants.VariantItem",multiple:true,singularName:"variantItem"}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},exe:{type:"boolean"},def:{type:"boolean"},global:{type:"boolean"},lifecyclePackage:{type:"string"},lifecycleTransportId:{type:"string"}}},manage:{parameters:{renamed:{type:"string[]"},deleted:{type:"string[]"},exe:{type:"object[]"},def:{type:"boolean"}}},select:{parameters:{key:{type:"string"}}}}},
renderer:{apiVersion:2,render:function(e,i){e.openStart("div",i);e.class("sapUiCompVarMngmt");e.openEnd();e.renderControl(i.oVariantLayout);e.close("div");}}
});
W.STANDARD_NAME=q.STANDARD_VARIANT_NAME;W.MAX_NAME_LEN=100;W.FAV_COLUMN=0;W.NAME_COLUMN=1;W.SHARE_COLUMN=2;W.DEF_COLUMN=3;W.EXEC_COLUMN=4;W.RESTRICT_COLUMN=5;W.AUTHOR_COLUMN=6;
W.prototype.init=function(){var e=this;this.STANDARDVARIANTKEY="*standard*";this.setStandardVariantKey(this.STANDARDVARIANTKEY);this.aRemovedVariants=[];this.aRenamedVariants=[];this.aRemovedVariantTransports=[];this.aExeVariants=[];this.oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this.lastSelectedVariantKey=this._sStandardVariantKey;this.bVariantItemMode=false;this.oSelectedItem=null;this.sNewDefaultKey="";this.bManagementTableInitialized=false;this.sTransport=null;this.sPackage=null;this.aEvents=[];this.bEventRunning=false;this.oVariantSelectionPage=null;this.bManualVariantKey=false;this.bFireSelect=false;this.bExecuteOnSelectForStandardViaXML=false;this.bExecuteOnSelectForStandardByUser=null;this.bSupportExecuteOnSelectOnSandardVariant=false;this._bInnerControlsCreated=false;this._bIndustrialSolutionMode=false;this._bVendorLayer=false;this.oModel=new J({enabled:false,selectedVariant:"",creationAllowed:true,saveVariantVisible:true});this.setModel(this.oModel,"save_enablement");this.oVariantInvisbletext=new s({text:{parts:[{path:'save_enablement>/selectedVariant'},{path:'save_enablement>/enabled'}],formatter:function(i,X){if(X){i=e.oResourceBundle.getText("VARIANT_MANAGEMENT_SEL_VARIANT_MOD",[i]);}else{i=e.oResourceBundle.getText("VARIANT_MANAGEMENT_SEL_VARIANT",[i]);}return i;}}});this.oVariantText=new m(this.getId()+"-text",{text:"{save_enablement>/selectedVariant}"});this._setStandardText();this.oVariantText.addStyleClass("sapUICompVarMngmtClickable");this.oVariantText.addStyleClass("sapUICompVarMngmtTitle");this.oVariantText.addStyleClass("sapMTitleStyleH3");if(D.system.phone){this.oVariantText.addStyleClass("sapUICompVarMngmtTextPhoneMaxWidth");}else{this.oVariantText.addStyleClass("sapUICompVarMngmtTextMaxWidth");}this.oVariantModifiedText=new a(this.getId()+"-modified",{visible:"{save_enablement>/enabled}"});this.oVariantModifiedText.setText("*");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtClickable");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtModified");this.oVariantModifiedText.addStyleClass("sapMTitleStyleH3");this.oVariantPopoverTrigger=new T(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:y.Transparent,tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisbletext);this.oVariantPopoverTrigger.addStyleClass("sapUICompVarMngmtTriggerBtn");this.oVariantLayout=new H({content:[this.oVariantText,this.oVariantModifiedText,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapUICompVarMngmtLayout");this.oVariantInvisbletext.setModel(this.oModel,"save_enablement");this.oVariantInvisbletext.toStatic();this.addDependent(this.oVariantLayout);};
W.prototype.getOverflowToolbarConfig=function(){var e={canOverflow:false,invalidationEvents:["save","manage","select"]};return e;};
W.prototype._columnVisibilityManagementTable=function(e,i){if(!this.bManagementTableInitialized){return;}if(this.oManagementTable){var X=this.oManagementTable.getColumns();if(X&&X.length>=e){X[e].setVisible(i);}}};
W.prototype.setVariantCreationByUserAllowed=function(e){this.setProperty("variantCreationByUserAllowed",e);this.oModel.setProperty("/creationAllowed",e);return this;};
W.prototype.setUseFavorites=function(e){this.setProperty("useFavorites",e);this._columnVisibilityManagementTable(W.FAV_COLUMN,e);return this;};
W.prototype.setShowShare=function(e){this.setProperty("showShare",e);this._columnVisibilityManagementTable(W.SHARE_COLUMN,e);return this;};
W.prototype.setShowSetAsDefault=function(e){this.setProperty("showSetAsDefault",e);this._columnVisibilityManagementTable(W.DEF_COLUMN,e);return this;};
W.prototype.setShowExecuteOnSelection=function(e){this.setProperty("showExecuteOnSelection",e);this._columnVisibilityManagementTable(W.EXEC_COLUMN,e);return this;};
W.prototype.setStandardItemText=function(e){this.setProperty("standardItemText",e);var i=this._getSelectedItem();if(!i||(i.getKey()===this.getStandardVariantKey())){this.oModel.setProperty("/selectedVariant",e);}return this;};
W.prototype._triggerSave=function(){var e=this._createEvent("variantSaveAs",this._handleVariantSaveAs);this._addEvent(e);};
W.prototype._checkNameValidity=function(e,i){var X=false;if(i&&this._getVariantNamesAndKeys){var Y=this._getVariantNamesAndKeys();var Z=i.getItems();Z.forEach(function($){var _=$.getCells()[W.NAME_COLUMN];var a1=$.getKey();if(_.getValue&&Y.hasOwnProperty(_.getValue())&&(Y[_.getValue()]!==a1)){_.setValueState(x.Error);_.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"));X=true;}}.bind(this));}return X;};
W.prototype._checkVariantNameConstraints=function(i,e){var X;if(!i){return;}X=i.getValue().trim();if(!this._checkIsDuplicate(i,X,this.oManagementTable)){if(X===""){i.setValueState(x.Error);i.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));}else if(X.indexOf('{')>-1){i.setValueState(x.Error);i.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_NOT_ALLOWED_CHAR",["{"]));}else if(X.length>W.MAX_NAME_LEN){i.setValueState(x.Error);i.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_MAX_LEN",[W.MAX_NAME_LEN]));}else{i.setValueState(x.None);i.setValueStateText(null);}}if(i.getValueState()!==x.Error){this._checkIsDuplicate(i,X,e);}if(e&&this._getVariantNamesAndKeys){this._checkNameValidity(X,e);}};
W.prototype._anyItemInErrorState=function(){var e,X,i;if(this.oManagementTable){e=this.oManagementTable.getItems();if(e){for(i=0;i<e.length;i++){X=e[i].getCells()[W.NAME_COLUMN];if(X&&X.getValueState&&(X.getValueState()===x.Error)){this._checkVariantNameConstraints(X,this.oManagementTable);if(X.getValueState()===x.Error){return true;}}}for(i=0;i<e.length;i++){X=e[i].getCells()[W.NAME_COLUMN];if(X&&X.isA("sap.m.Input")){this._checkVariantNameConstraints(X,this.oManagementTable);if(X.getValueState()===x.Error){return true;}}}}}return false;};
W.prototype._anyInErrorState=function(e,X){var Y,Z,i;if(e){Y=e.getItems();if(Y){for(i=0;i<Y.length;i++){Z=Y[i].getCells()[W.NAME_COLUMN];if(X&&(X===Z)){continue;}if(Z&&Z.getValueState&&(Z.getValueState()===x.Error)){if(this._checkIsDuplicate(Z,Z.getValue(),e)){return true;}}}}}return false;};
W.prototype._checkIsDuplicate=function(i,e,X){var Y=this._isDuplicate(i,e,X);if(Y){i.setValueState(x.Error);i.setValueStateText(this.oResourceBundle.getText(e?"VARIANT_MANAGEMENT_ERROR_DUPLICATE":"VARIANT_MANAGEMENT_ERROR_EMPTY"));}else{i.setValueState(x.None);i.setValueStateText(null);}return Y;};
W.prototype._isDuplicate=function(i,e,X){if(X){return this._isDuplicateManaged(i,e,X);}else{return this._isDuplicateSaveAs(e);}};
W.prototype._isDuplicateManaged=function(e,X,Y){var Z,$,i;if(Y){Z=Y.getItems();if(Z&&(Z.length>0)){for(i=0;i<Z.length;i++){$=Z[i].getCells()[W.NAME_COLUMN];if($===e){continue;}if($){if($.getValue&&(X===$.getValue().trim())){return true;}else if($.getText&&(X===$.getText().trim())){return true;}else if($.getTitle&&(X===$.getTitle().trim())){return true;}}}}else{if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey){return false;}}}return false;};
W.prototype._isDuplicateSaveAs=function(e){var i=e.trim();if(!i){return true;}var X=this._determineStandardVariantName();if(X===i){if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey){return false;}return true;}var Y=this._getItems();for(var Z=0;Z<Y.length;Z++){X=Y[Z].getText().trim();if(X===i){return true;}}return false;};
W.prototype._createSaveDialog=function(){var e=this;if(!this.oSaveDialog){this.oSaveDialog=new k(this.getId()+"-savedialog",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),beginButton:this.oSaveSave,endButton:new h(this.getId()+"-variantcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){if(e._fGetDataForKeyUser){e._handleSaveAsCancelPressedForKeyUser();}else{e._bSaveCanceled=true;e.oSaveDialog.close();}}}),content:[this.oLabelName,this.oInputName,this.oLabelKey,this.oInputKey,this.oSaveDialogOptionsGrid],stretch:D.system.phone});this.oSaveDialog.setParent(this);this.oSaveDialog.addStyleClass("sapUiContentPadding");this.oSaveDialog.addStyleClass("sapUiCompVarMngmtSaveDialog");}};
W.prototype._createManagementDialog=function(){var e=this;if(!this.oManagementDialog){this.oManagementDialog=new k(this.getId()+"-managementdialog",{contentWidth:"64%",draggable:true,resizable:true,title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"),beginButton:this.oManagementSave,endButton:new h(this.getId()+"-managementcancel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){if(e._fGetDataForKeyUser){e._handleManageCancelPressedForKeyUser();}else{e.aRemovedVariants=[];e.oManagementDialog.close();}}}),content:[this.oManagementTable],stretch:D.system.phone,afterClose:function(){if(e.bFireSelect==true){e.bFireSelect=false;e._fireSelectAsync();}}});this.oManagementDialog.setParent(this);var i=new B();this.oManageDialogSearchField=new S();this.oManageDialogSearchField.attachLiveChange(function(X){this._triggerSearchInManageDialog(X);}.bind(this));i.addContentMiddle(this.oManageDialogSearchField);this.oManagementDialog.setSubHeader(i);}};
W.prototype._handleArrowUpDown=function(i,X){var Y=null;var Z=this;i.attachBrowserEvent("keydown",function(e){if(e.which===38){if(Z.oVariantSelectionPage.getShowSubHeader()){Y=document.activeElement.id;}}});i.attachBrowserEvent("keyup",function(e){if(e.which===38){if(Y&&(Y===document.activeElement.id)){var $=i.getItems();if($&&$.length>0){var _=sap.ui.getCore().byId(Y);if(_===$[0]){X.focus();}}}Y=null;}});X.attachBrowserEvent("keyup",function(e){if(e.which===40){var $=i.getItems();if($&&$.length>0){$[0].focus();}}});};
W.prototype._triggerSearch=function(e){if(!e){return;}var i=e.getParameters();if(!i){return;}this._restoreCompleteList();var X=i.newValue?i.newValue:"";this._triggerSearchByValue(X.toLowerCase());};
W.prototype._triggerSearchByValue=function(e){var i,X,Y;this.oSelectedVariantItemKey=null;Y=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(Y&&(Y.getText().toLowerCase().indexOf(e)<0)){if(this.getSelectionKey()===X){this.oSelectedVariantItemKey=X;}this.oVariantList.removeItem(Y);Y.destroy();}var Z=this._getItems();for(var $=0;$<Z.length;$++){i=Z[$].getText();if(i.toLowerCase().indexOf(e)<0){X=Z[$].getKey();Y=this.oVariantList.getItemByKey(X);if(Y){if(this.getSelectionKey()===X){this.oSelectedVariantItemKey=X;}this.oVariantList.removeItem(Y);Y.destroy();}}}};
W.prototype._triggerSearchInManageDialog=function(e){var i,X,Y="",Z,$;if(!e){return;}var _=e.getParameters();if(!_){return;}i=_.newValue?_.newValue.toLowerCase():"";if(this.oManagementTable){var a1=this.oManagementTable.getItems();a1.forEach(function(b1){X=true;Y="";$=b1.getCells();if($&&$[W.NAME_COLUMN]){Z=$[W.NAME_COLUMN];if(Z.getTitle){Y=Z.getTitle();}else if(Z.getValue){Y=Z.getValue();}if(Y.toLowerCase().indexOf(i)>=0){X=false;}}if(X&&$&&$[W.AUTHOR_COLUMN]){Z=$[W.AUTHOR_COLUMN];if(Z.getText){Y=Z.getText();if(Y.toLowerCase().indexOf(i)>=0){X=false;}}}b1.setVisible(!X);});}};
W.prototype._considerItem=function(i,e){if(this.getUseFavorites()&&!i){if(this._isIndustrySolutionModeAndVendorLayer()){return true;}if(e.getFavorite&&e.getFavorite()){return true;}return false;}return true;};
W.prototype._restoreCompleteList=function(i){var e,X,Y,Z;this.oVariantList.destroyItems();Z=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(!Z){Z=this._createStandardVariantListItem();if(Z){if(this._considerItem(i,Z)){this.oVariantList.insertItem(Z,0);}else{Z.destroy();}}}if(Z){if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===Z.getKey()){this.oVariantList.setSelectedItem(Z);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==Z.getKey()||this.getSelectionKey()===null){this.oVariantList.setSelectedItem(Z);}}}Y=this._getItems();Y.sort(this._compareItems);for(e=0;e<Y.length;e++){X=Y[e];if(!this._considerItem(i,X)){continue;}if(X.getKey()===this.getStandardVariantKey()){continue;}Z=this.oVariantList.getItemByKey(X.getKey());if(!Z){Z=this._createVariantListItem(X,e);this.oVariantList.addItem(Z);}if(this.oSelectedVariantItemKey){if(this.oSelectedVariantItemKey===Z.getKey()){this.oVariantList.setSelectedItem(Z);this.oSelectedVariantItemKey=null;}}else{if(this.getSelectionKey()==Z.getKey()){this.oVariantList.setSelectedItem(Z);}}}};
W.prototype._determineStandardVariantName=function(){var e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD");if(this.bVariantItemMode===false){e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT");}if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){e=this.getStandardItemText();}}return e;};
W.prototype._createStandardVariantListItem=function(){var i,e=null;var X=this._determineStandardVariantName();if((this.bVariantItemMode===true)||(this.bVariantItemMode===false&&(this.getSelectionKey()===this.getStandardVariantKey()||this.getSelectionKey()===null))){e=new r(this.oVariantPopoverTrigger.getId()+"-item-standard",{key:this.getStandardVariantKey(),readOnly:true,executeOnSelection:this.getExecuteOnSelectForStandardVariant()});e.setText(X);if(this._isIndustrySolutionModeAndVendorLayer()&&this.bVariantItemMode){e.setGlobal(true);e.setReadOnly(false);}if(this.getStandardVariantKey()!==this.STANDARDVARIANTKEY){i=this.getItemByKey(this.getStandardVariantKey());if(i){this._setVariantListItemProperties(i,e);if(i.getFavorite&&!i.getFavorite()&&(this.getSelectionKey()===this.getStandardVariantKey())){e.setFavorite(true);}}}else{e.setAuthor(this.getStandardItemAuthor());e.setReadOnly(true);e.setFavorite(this.getStandardFavorite());}}return e;};
W.prototype._createVariantListItem=function(i,e){var X=new r(this.oVariantPopoverTrigger.getId()+"-item-"+e,{key:i.getKey(),text:i.getText()});this._setVariantListItemProperties(i,X);return X;};
W.prototype._setVariantListItemProperties=function(i,e){if(i.getReadOnly){e.setReadOnly(i.getReadOnly());}if(i.getExecuteOnSelection){e.setExecuteOnSelection(i.getExecuteOnSelection());}if(i.getGlobal){e.setGlobal(i.getGlobal());}if(i.getLifecyclePackage){e.setLifecyclePackage(i.getLifecyclePackage());}if(i.getLifecycleTransportId){e.setLifecycleTransportId(i.getLifecycleTransportId());}if(i.getNamespace){e.setNamespace(i.getNamespace());}if(i.getAccessOptions){e.setAccessOptions(i.getAccessOptions());}if(i.getLabelReadOnly){e.setLabelReadOnly(i.getLabelReadOnly());}if(i.getAuthor){e.setAuthor(i.getAuthor());}if(i.getFavorite){e.setFavorite(i.getFavorite());}if(i.getContexts){e.setContexts(i.getContexts());}};
W.prototype.exit=function(){if(this.oVariantInvisbletext){this.oVariantInvisbletext.destroy(true);this.oVariantInvisbletext=undefined;}if(this.oSearchField){this.oSearchField.destroy();this.oSearchField=undefined;}if(this.oManageDialogSearchField){this.oManageDialogSearchField.destroy();this.oManageDialogSearchField=undefined;}if(this.oVariantManage){this.oVariantManage.destroy();this.oVariantManage=undefined;}if(this.oVariantSave){this.oVariantSave.destroy();this.oVariantSave=undefined;}if(this.oVariantList){this.oVariantList.destroy();this.oVariantList=undefined;}if(this.oInputName){this.oInputName.destroy();this.oInputName=undefined;}if(this.oLabelName){this.oLabelName.destroy();this.oLabelName=undefined;}if(this.oDefault){this.oDefault.destroy();this.oDefault=undefined;}if(this.oSaveSave){this.oSaveSave.destroy();this.oSaveSave=undefined;}if(this.oSaveDialog){this.oSaveDialog.destroy();this.oSaveDialog=undefined;}if(this.oManagementTable){this.oManagementTable.destroy();this.oManagementTable=undefined;}if(this.oManagementSave){this.oManagementSave.destroy();this.oManagementSave=undefined;}if(this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined;}if(this.oVariantText){this.oVariantText.destroy();this.oVariantText=undefined;}if(this.oVariantPopoverTrigger){this.oVariantPopoverTrigger.destroy();this.oVariantPopoverTrigger=undefined;}if(this.oVariantLayout){this.oVariantLayout.destroy();this.oVariantLayout=undefined;}if(this.oVariantPopOver){this.oVariantPopOver.destroy();this.oVariantPopOver=undefined;}if(this.oVariantSaveAs){this.oVariantSaveAs.destroy();this.oVariantSaveAs=undefined;}if(this.oShare){this.oShare.destroy();this.oShare=undefined;}if(this.oExecuteOnSelect){this.oExecuteOnSelect.destroy();this.oExecuteOnSelect=undefined;}if(this.oCreateTile){this.oCreateTile.destroy();this.oCreateTile=undefined;}if(this.oSaveDialogOptionsGrid){this.oSaveDialogOptionsGrid.destroy();this.oSaveDialogOptionsGrid=undefined;}if(this.oVariantSelectionPage){this.oVariantSelectionPage.destroy();this.oVariantSelectionPage=undefined;}if(this.oErrorVariantPopOver){this.oErrorVariantPopOver.destroy();this.oErrorVariantPopOver=undefined;}if(this.oInputKey){this.oInputKey.destroy();this.oInputKey=undefined;}if(this.oLabelKey){this.oLabelKey.destroy();this.oLabelKey=undefined;}if(this.oModel){this.oModel.destroy();this.oModel=undefined;}};
W.prototype.addItem=function(i){i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.addAggregation("items",i,false);var _=this.getInitialSelectionKey();this._setSelection(i,_);this._setStandardText();return this;};
W.prototype.insertItem=function(i,e){var _=e;i=this.validateAggregation("items",i,true);this.bVariantItemMode=false;this.insertAggregation("items",i,_);var X=this.getInitialSelectionKey();this._setSelection(i,X);this._setStandardText();return this;};
W.prototype.removeItem=function(i){i=this.removeAggregation("items",i);return i;};
W.prototype.removeAllItems=function(){var e=this.removeAllAggregation("items");this._setSelectedItem(null);return e;};
W.prototype.destroyItems=function(){this.destroyAggregation("items");this._setSelectedItem(null);return this;};
W.prototype._getItems=function(){if(this.bVariantItemMode){return this.getVariantItems();}else{return this.getItems();}};
W.prototype._removeItem=function(i){if(this.bVariantItemMode){return this.removeVariantItem(i);}else{return this.removeItem(i);}};
W.prototype.getItemByKey=function(e){var i=this._getItems();for(var X=0;X<i.length;X++){if(e==i[X].getKey()){return i[X];}}return null;};
W.prototype.addVariantItem=function(e){e=this.validateAggregation("variantItems",e,true);this.bVariantItemMode=true;this.addAggregation("variantItems",e,false);var _=this.getInitialSelectionKey();this._setSelection(e,_);this._setStandardText();e.attachChange(this._variantItemChange.bind(this,null));return this;};
W.prototype.insertVariantItem=function(e,i){var _=i;e=this.validateAggregation("variantItems",e,true);this.bVariantItemMode=true;this.insertAggregation("variantItems",e,_);var X=this.getInitialSelectionKey();this._setSelection(e,X);this._setStandardText();e.attachChange(this._variantItemChange.bind(this,null));return this;};
W.prototype._variantItemChange=function(e,i){var X;if(i&&i.oSource&&(i.oSource.isA("sap.ui.comp.variants.VariantItem"))){X=i.getParameter("propertyName");if(X==="text"){if(i.oSource===this._getSelectedItem()){this.oModel.setProperty("/selectedVariant",this._getSelectedItem().getText());}}}};
W.prototype._setSelectedItem=function(i){this.oSelectedItem=i;if(i!=null&&i.getKey()!=this.getStandardVariantKey()){this._setVariantText(i.getText());}else{this._setStandardText();}};
W.prototype._getSelectedItem=function(){return this.oSelectedItem;};
W.prototype.setInitialSelectionKey=function(e){this.setProperty("initialSelectionKey",e,true);this._setSelectionByKey(e);return this;};
W.prototype.setEnabled=function(e){this.setProperty("enabled",e,false);if(!e){this.oVariantText.removeStyleClass("sapUICompVarMngmtClickable");this.oVariantModifiedText.removeStyleClass("sapUICompVarMngmtClickable");this.oVariantText.addStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtDisabled");}else{this.oVariantText.removeStyleClass("sapUICompVarMngmtDisabled");this.oVariantModifiedText.removeStyleClass("sapUICompVarMngmtDisabled");this.oVariantText.addStyleClass("sapUICompVarMngmtClickable");this.oVariantModifiedText.addStyleClass("sapUICompVarMngmtClickable");}return this;};
W.prototype.getFocusDomRef=function(){if(this.oVariantPopoverTrigger&&this.getEnabled()){return this.oVariantPopoverTrigger.getFocusDomRef();}};
W.prototype._setSelection=function(i,e){if(i.getKey()===e){this._setSelectedItem(i);this.fireSelect({key:e});}};
W.prototype.addStyleClass=function(e){if(t.prototype.addStyleClass){t.prototype.addStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.addStyleClass(e);}if(this.oSaveDialog){this.oSaveDialog.addStyleClass(e);}if(this.oManagementDialog){this.oManagementDialog.addStyleClass(e);}};
W.prototype.removeStyleClass=function(e){if(t.prototype.addStyleClass){t.prototype.removeStyleClass.apply(this,arguments);}if(this.oVariantPopOver){this.oVariantPopOver.removeStyleClass(e);}if(this.oSaveDialog){this.oSaveDialog.removeStyleClass(e);}if(this.oManagementDialog){this.oManagementDialog.removeStyleClass(e);}};
W.prototype.clearVariantSelection=function(){this.setInitialSelectionKey(this.getStandardVariantKey());this._setSelectedItem(null);};
W.prototype._setDialogCompactStyle=function(e,i){if(this._checkDialogCompactStyle(e)){i.addStyleClass("sapUiSizeCompact");}else{i.removeStyleClass("sapUiSizeCompact");}};
W.prototype._checkDialogCompactStyle=function(e){if(e.$().closest(".sapUiSizeCompact").length>0){return true;}else{return false;}};
W.prototype.getSelectionKey=function(){var e=null;var i=this._getSelectedItem();if(i!==null){e=i.getKey();}else if(this.bVariantItemMode){e=this.getStandardVariantKey();}else{e=null;}return e;};
W.prototype._setSelectionByKey=function(e){var i=this._getItems();var X=false;if(i.length>0){for(var Y=0;Y<i.length;Y++){if(i[Y].getKey()===e){this._setSelectedItem(i[Y]);X=true;break;}}}if(!X){this._setSelectedItem(null);}};
W.prototype.replaceKey=function(e,i){var X=this._getItems();if(X.length>0){for(var Y=0;Y<X.length;Y++){if(X[Y].getKey()===e){X[Y].setKey(i);if(this.getDefaultVariantKey()==e){this.setDefaultVariantKey(i);}if(this._getSelectedItem()===X[Y]){this._setSelectedItem(null);}break;}}}};
W.prototype.verifyVariantKey=function(e){return this.getItemByKey(e)?true:false;};
W.prototype.createVariantEntry=function(e){var i="SV"+new Date().getTime();var X=new r({key:i,text:e.name,global:e.global});this.addAggregation("variantItems",X,false);return i;};
W.prototype._assignUser=function(e,i){var X=this.getItemByKey(e);if(X&&X.isA("sap.ui.comp.variants.VariantItem")&&!X.getAuthor()){X.setAuthor(i);}};
W.prototype.currentVariantSetModified=function(e){if(this.oModel){this.oModel.setProperty("/enabled",e);}};
W.prototype.currentVariantGetModified=function(){return this.oModel.getProperty("/enabled");};
W.prototype._delayedControlCreation=function(){var e=this;if(this._bInnerControlsCreated){return;}this._bInnerControlsCreated=true;this.oVariantManage=new h(this.getId()+"-manage",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){e._openVariantManagementDialog();},layoutData:new d({priority:Q.High})});this.oVariantSave=new h(this.getId()+"-mainsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){var i=e._createEvent("variantSavePressed",e._variantSavePressed);e._addEvent(i);},visible:{parts:[{path:'save_enablement>/creationAllowed'},{path:'save_enablement>/saveVariantVisible'}],formatter:function(i,X){return i&&X;}},type:y.Emphasized,layoutData:new d({priority:Q.Low})});this.oVariantSave.setModel(this.oModel);this.oVariantSaveAs=new h(this.getId()+"-saveas",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){e._openSaveAsDialog();},visible:"{save_enablement>/creationAllowed}",layoutData:new d({priority:Q.Low})});this.oVariantList=new o(this.getId()+"-list",{itemPress:function(i){var X=null;if(i&&i.getParameters()){var Y=i.getParameters().item;if(Y){X=Y.getKey();}}if(X){e.lastSelectedVariantKey=X;e._setSelectionByKey(X);e.oVariantPopOver.close();e.oModel.setProperty("/enabled",false);e.bFireSelect=true;}}});this.oVariantList.setNoDataText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_NODATA"));this.oSearchField=new S();this.oSearchField.attachLiveChange(function(i){e._triggerSearch(i);});this._handleArrowUpDown(this.oVariantList,this.oSearchField);this.oVariantSelectionPage=new P(this.getId()+"selpage",{subHeader:new f({content:[this.oSearchField]}),content:[this.oVariantList],footer:new O({content:[new g(this.getId()+"-spacer"),this.oVariantSave,this.oVariantSaveAs,this.oVariantManage]}),showSubHeader:false,showNavButton:false,showHeader:false});this.oVariantPopOver=new n(this.getId()+"-popover",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTS"),titleAlignment:"Auto",contentWidth:"400px",placement:z.VerticalPreferredBottom,content:[this.oVariantSelectionPage],afterOpen:function(){e.bPopoverOpen=true;e.oVariantPopoverTrigger.setPressed(true);e._markSharedVariants();},afterClose:function(){e.oVariantPopoverTrigger.setPressed(false);if(e.bPopoverOpen){if(e.bFireSelect==true){e.bFireSelect=false;e._fireSelectAsync();}setTimeout(function(){e.bPopoverOpen=false;},200);}},contentHeight:"300px"});this.oVariantPopOver.setParent(this);this.oVariantPopOver.addStyleClass("sapUICompVarMngmtPopover");this.oInputName=new I(this.getId()+"-name",{liveChange:function(i){e._checkVariantNameConstraints(this);}});this.oLabelName=new L(this.getId()+"-namelabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME")});this.oLabelName.setLabelFor(this.oInputName);this.oLabelName.addStyleClass("sapUiCompVarMngmtSaveDialogLabel");this.oDefault=new j(this.getId()+"-default",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),enabled:true,visible:true,width:"100%"});this.oExecuteOnSelect=new j(this.getId()+"-execute",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),enabled:true,visible:false,width:"100%"});this.oCreateTile=new j(this.getId()+"-tile",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_CREATETILE"),enabled:true,visible:false,width:"100%"});this.oShare=new j(this.getId()+"-share",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARE"),enabled:true,visible:false,select:function(i){var X=e._createEvent("inputfieldChange",e._handleShareSelected);X.args.push(i);e._addEvent(X);},width:"100%"});this.oInputKey=new I(this.getId()+"-key",{liveChange:function(i){e._checkVariantNameConstraints(this);}});this.oLabelKey=new L(this.getId()+"-keylabel",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputKey);this.oSaveSave=new h(this.getId()+"-variantsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),type:y.Emphasized,press:function(){e._checkVariantNameConstraints(e.oInputName);if(e.oInputName.getValueState()==="Error"){e.oInputName.focus();return;}e._bSaveCanceled=false;if(e._fGetDataForKeyUser){e._handleSaveAsPressedForKeyUser();}else{e._triggerSave();}},enabled:true});this.oSaveDialogOptionsGrid=new G({defaultSpan:"L12 M12 S12"});this.oManagementTable=new b(this.getId()+"-managementTable",{contextualWidth:"Auto",fixedLayout:false});this.oManagementSave=new h(this.getId()+"-managementsave",{text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_SAVE"),enabled:true,type:y.Emphasized,press:function(){this._saveFromManagementDialog();}.bind(this)});};
W.prototype._saveFromManagementDialog=function(){if(this._anyItemInErrorState()){return;}if(!this._fGetDataForKeyUser){var e=this._createEvent("managementSave",this._handleManageSavePressed);this._addEvent(e);}else{this._handleManageSavePressedForKeyUser();}};
W.prototype._openInErrorState=function(){var i=this,X;if(!this.oErrorVariantPopOver){X=new V({fitContainer:true,alignItems:U.Center,items:[new u({size:"4rem",color:"lightgray",src:"sap-icon://message-error"}),new m({titleStyle:N.H2,text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_TEXT1")}),new a({textAlign:M.Center,text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_TEXT2")})]});X.addStyleClass("sapUICompVarMngmtErrorPopover");this.oErrorVariantPopOver=new n(this.getId()+"-errorpopover",{title:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTS"),contentWidth:"400px",placement:z.VerticalPreferredBottom,content:[new P(this.getId()+"-errorselpage",{showSubHeader:false,showNavButton:false,showHeader:false,content:[X]})],afterOpen:function(){i.bPopoverOpen=true;},afterClose:function(){if(i.bPopoverOpen){i.bPopoverOpen=false;}},contentHeight:"300px"});this.oErrorVariantPopOver.attachBrowserEvent("keyup",function(e){if(e.which===32){this.oErrorVariantPopOver.close();}}.bind(this));}if(this.bPopoverOpen){return;}this.oErrorVariantPopOver.openBy(this.oVariantLayout);};
W.prototype.showSaveButton=function(e){if(e){this.oVariantSaveAs.setType(y.Default);}else{this.oVariantSaveAs.setType(y.Emphasized);}this.oModel.setProperty("/saveVariantVisible",e);};
W.prototype._openVariantSelection=function(){var i=null,e;if(this.getInErrorState()){this._openInErrorState();return;}this._delayedControlCreation();if(this.bPopoverOpen){return;}if(this.bVariantItemMode===false&&this.getSelectionKey()!==null){this.showSaveButton(true);}else{this.showSaveButton(false);}i=this._getItems();if(i.length<9){this.oVariantSelectionPage.setShowSubHeader(false);}else{this.oVariantSelectionPage.setShowSubHeader(true);this.oSearchField.setValue("");}this._restoreCompleteList();if(this.currentVariantGetModified()){e=this.oVariantList.getItemByKey(this.getSelectionKey());if(e){if(!e.getReadOnly()||(this._isIndustrySolutionModeAndVendorLayer()&&(this.getStandardVariantKey()===e.getKey()))){this.showSaveButton(true);}}}if(this._isIndustrySolutionModeAndVendorLayer()&&this.bManualVariantKey&&(this.getStandardVariantKey()===this.STANDARDVARIANTKEY)){this.showSaveButton(false);}this._setDialogCompactStyle(this,this.oVariantPopOver);e=this.oVariantList.getSelectedItem();if(e){this.oVariantPopOver.setInitialFocus(e.getId());}var X=this._oCtrlRef?this._oCtrlRef:this.oVariantLayout;this._oCtrlRef=null;this.oVariantPopOver.openBy(X);};
W.prototype._obtainControl=function(e){if(e&&e.target&&e.target.id){var i=e.target.id;var X=i.indexOf("-inner");if(X>0){i=i.substring(0,X);}return sap.ui.getCore().byId(i);}return null;};
W.prototype.handleOpenCloseVariantPopover=function(e){if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close();}else if(!this.bPopoverOpen){this._oCtrlRef=this._obtainControl(e);this._openVariantSelection();}else if(this.getInErrorState()&&this.oErrorVariantPopOver&&this.oErrorVariantPopOver.isOpen()){this.oErrorVariantPopOver.close();}};
W.prototype._initalizeManagementTableColumns=function(){if(this.bManagementTableInitialized){return;}this.oManagementTable.addColumn(new C({width:"3rem",visible:this.getUseFavorites()&&!this._isIndustrySolutionModeAndVendorLayer()}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_NAME")}),width:"16rem"}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VARIANTTYPE"),wrappingType:"Hyphenated"}),demandPopin:true,popinDisplay:A.Inline,minScreenWidth:F.Tablet,visible:this.getShowShare()}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"),wrappingType:"Hyphenated"}),hAlign:M.Center,demandPopin:true,popinDisplay:A.Block,minScreenWidth:F.Tablet,visible:this.getShowSetAsDefault()}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),wrappingType:"Hyphenated"}),hAlign:(this.getDisplayTextForExecuteOnSelectionForStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant())?M.Begin:M.Center,demandPopin:true,popinDisplay:A.Block,minScreenWidth:F.Tablet,visible:this.getShowExecuteOnSelection()}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_VISIBILITY"),wrappingType:"Hyphenated"}),width:"8rem",demandPopin:true,popinDisplay:A.Inline,minScreenWidth:F.Tablet,visible:false}));this.oManagementTable.addColumn(new C({header:new a({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_AUTHOR")}),demandPopin:true,popinDisplay:A.Block,minScreenWidth:F.Tablet}));this.oManagementTable.addColumn(new C({header:new s({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")}),hAlign:M.Center}));this.bManagementTableInitialized=true;};
W.prototype._initalizeSaveAsDialog=function(){this.oSaveDialogOptionsGrid.removeAllContent();this.oDefault.setVisible(this.getShowSetAsDefault());this.oShare.setVisible(this.getShowShare());this.oExecuteOnSelect.setVisible(this.getShowExecuteOnSelection());this.oCreateTile.setVisible(this.getShowCreateTile());if(this.getShowSetAsDefault()){this.oSaveDialogOptionsGrid.addContent(this.oDefault);}if(this.getShowShare()){this.oSaveDialogOptionsGrid.addContent(this.oShare);}if(this.getShowExecuteOnSelection()){this.oSaveDialogOptionsGrid.addContent(this.oExecuteOnSelect);}if(this.getShowCreateTile()){this.oSaveDialogOptionsGrid.addContent(this.oCreateTile);}};
W.prototype.ontap=function(e){if(this.getEnabled()){if(this.oVariantPopoverTrigger&&!this.bPopoverOpen){this.oVariantPopoverTrigger.focus();}this.handleOpenCloseVariantPopover(e);}};
W.prototype.onkeyup=function(e){if(e.which===K.ENTER||e.which===K.F4||e.which===K.SPACE||e.altKey===true&&e.which===K.ARROW_UP||e.altKey===true&&e.which===K.ARROW_DOWN){if(this.getEnabled()){this._oCtrlRef=this._obtainControl(e);this._openVariantSelection();}}};
W.prototype.onAfterRendering=function(){this.oVariantText.$().off("mouseover").on("mouseover",function(){this.oVariantPopoverTrigger.addStyleClass("sapUICompVarMngmtTriggerBtnHover");}.bind(this));this.oVariantText.$().off("mouseout").on("mouseout",function(){this.oVariantPopoverTrigger.removeStyleClass("sapUICompVarMngmtTriggerBtnHover");}.bind(this));};
W.prototype.onBeforeRendering=function(){var e=function(X){var a1,b1=0;for(var i=0;i<X.length;i++){a1=X[i].$().width();if(a1>b1){b1=a1;}}return b1;};if(this.oSaveDialogOptionsGrid&&this.oSaveDialog&&this.oSaveDialog.getVisible()){var X=this.oSaveDialogOptionsGrid.getContent();if(X&&X.length>0){var Y=this.oSaveDialogOptionsGrid.$().width();var Z=e(X);var $=32;var _=12;if(!this._checkDialogCompactStyle(this.oSaveDialog)){$=48;_=18;}if(($+Z+_)>Y/2){this.oSaveDialogOptionsGrid.setDefaultSpan("L12 M12 S12");}}}};
W.prototype._markSharedVariants=function(){var e,X,Y=this._getItems();for(var i=0;i<Y.length;i++){X=Y[i];if(X.getGlobal&&X.getGlobal()){e=this.oVariantList.getItemByKey(X.getKey());if(e){var Z=e.$();if(Z){Z.addClass("sapUiCompVarMngmtSharedVariant");}}}}};
W.prototype._variantSavePressed=function(){var i=this._getSelectedItem();if(!i){if(this.getStandardVariantKey()===this.STANDARDVARIANTKEY){i=new r({key:this.STANDARDVARIANTKEY,global:this._isIndustrySolutionModeAndVendorLayer()});i.setText(this._determineStandardVariantName());}else{i=this.getItemByKey(this.getStandardVariantKey());}}var e=false;if(this.getDefaultVariantKey()===i.getKey()){e=true;}if(i.getLifecyclePackage&&i.getGlobal()==true){var X=this;var Y=function($,_){X.oVariantPopOver.close();X.sPackage=$;X.sTransport=_;X.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:e,global:(X._isIndustrySolutionModeAndVendorLayer()&&(X.getStandardVariantKey()===X.getStandardVariantKey())),lifecyclePackage:X.sPackage,lifecycleTransportId:X.sTransport});i.setLifecycleTransportId(X.sTransport);X.oModel.setProperty("/enabled",false);X._eventDone();};var Z=function($){X.sTransport=null;X.sPackage=null;X._cancelAllEvents();};this._assignTransport(i,Y,Z,this.oVariantText);}else{this.oVariantPopOver.close();this.fireSave({name:i.getText(),overwrite:true,key:i.getKey(),def:e});this.oModel.setProperty("/enabled",false);this._eventDone();}};
W.prototype._assignTransport=function(e,i,X,Y){var Z={type:"variant",name:"",namespace:""};Z["package"]="";if(e!==null){Z["package"]=e.getLifecyclePackage();Z["name"]=e.getKey();Z["namespace"]=e.getNamespace();}var _=function(b1){var c1;var a1;a1=b1.getParameters().selectedTransport;c1=b1.getParameters().selectedPackage;i(c1,a1);};var $=function(b1){X(b1);};if(this.getLifecycleSupport()){var a1=null;if(e){a1=e.getLifecycleTransportId();}if(a1!=null&&a1.trim().length>0){i(Z["package"],a1);}else{this._getTransportSelection().then(function(b1){b1.selectTransport(Z,_,$,this._checkDialogCompactStyle(Y),Y);}.bind(this));}}else{i(Z["package"],"");}};
W.prototype._getTransportSelection=function(){if(this.getTransportSelection){return this.getTransportSelection();}else{return this._getFlTransportSelection();}};
W.prototype._getFlTransportSelection=function(){return sap.ui.getCore().loadLibrary('sap.ui.fl',{async:true}).then(function(){return new Promise(function(e){sap.ui.require(["sap/ui/fl/write/api/SmartVariantManagementWriteAPI"],function(i){e(i._getTransportSelection());});});});};
W.prototype.getDefaultVariantKey=function(){var e=this.getProperty("defaultVariantKey");if(e===""){if(this.bVariantItemMode){e=this.getStandardVariantKey();}}return e;};
W.prototype._compareItems=function(e,i){var X=e.getText();var Y=i.getText();var Z=X.toUpperCase();var $=Y.toUpperCase();if(Z==$){if(X==Y){return 0;}if(X<Y){return-1;}if(X>Y){return 1;}}if(Z<$){return-1;}if(Z>$){return 1;}};
W.prototype._accessOptionsText=function(e){var i=null;switch(e){case"R":i=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");break;case"RD":i=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");break;default:i=null;}return i;};
W.prototype._openSaveAsDialog=function(){this._initSaveAsDialog();this.oSaveDialog.open();};
W.prototype._initSaveAsDialog=function(){this._initalizeSaveAsDialog();this.oInputName.setValue(this.oModel.getProperty("/selectedVariant"));this.oInputName.setEnabled(true);this.oInputName.setValueState(x.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oShare.setSelected(false);this.oCreateTile.setSelected(false);this.oExecuteOnSelect.setSelected(false);if(this._isIndustrySolutionModeAndVendorLayer()){this.oInputName.setValue(this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"));}this._createSaveDialog();this._setDialogCompactStyle(this,this.oSaveDialog);this.oVariantPopOver.close();this.sTransport=null;this.sPackage=null;if(this.bManualVariantKey){this.oInputKey.setVisible(true);this.oInputKey.setEnabled(true);this.oInputKey.setValueState(x.None);this.oInputKey.setValueStateText(null);this.oLabelKey.setVisible(true);}else{this.oInputKey.setVisible(false);this.oLabelKey.setVisible(false);}};
W.prototype._checkManageItemNameChange=function(e){var i="";var X=null;var Y=this;X=e.getCells()[W.NAME_COLUMN];i=X.getValue();i=i.trim();var Z=e;var $=Z.getKey();this._checkVariantNameConstraints(X,this.oManagementTable);if(X.getValueState()===x.Error){this._eventDone();return;}if(this.oVariantList.getItemByKey($).getText().trim()===i){this._eventDone();return;}if(Z.getGlobal()){var _=function(b1,c1){Z.setLifecyclePackage(b1);Z.setLifecycleTransportId(c1);Y._eventDone();};var a1=function(b1){if(Y&&Y.oVariantList){var c1=Y.oVariantList.getItemByKey($);X.setValue(c1.getText());}Y._cancelAllEvents();};this._createManagementDialog();this._assignTransport(Z,_,a1,this.oManagementDialog);}else{this._eventDone();}};
W.prototype._handleManageSavePressed=function(){var e=this.oManagementTable.getItems();var i,X;var Y=false;var Z="";var $=null;var _=0;var a1=[];for(var iG=0;iG<e.length;iG++){i=this.oVariantList.getItemByKey(e[iG].getKey());X=e[iG].getCells()[W.NAME_COLUMN];if(X&&X.getValue){Z=X.getValue();}else if(X&&X.getTitle){Z=X.getTitle();}else if(X&&X.getText){Z=X.getText();}Z=Z.trim();if(i.getText()!==Z){this.aRenamedVariants.push({key:i.getKey(),name:Z});$=this.getItemByKey(e[iG].getKey());$.setText(Z);if($.setLifecyclePackage){$.setLifecyclePackage(e[iG].getLifecyclePackage());$.setLifecycleTransportId(e[iG].getLifecycleTransportId());}if(this.lastSelectedVariantKey===i.getKey()){this._setVariantText(Z);}}if(this.getUseFavorites()&&!this._isIndustrySolutionModeAndVendorLayer()){var c1=e[iG].getKey();if(this._mFavoriteChanges&&this._mFavoriteChanges[c1]!==undefined){var d1=this._mFavoriteChanges[c1];if(c1===this.STANDARDVARIANTKEY){if(this.getStandardFavorite()!==d1){a1.push({key:c1,visible:d1});this.setStandardFavorite(d1);}}else{$=this.getItemByKey(e[iG].getKey());if($&&i.getFavorite&&(i.getFavorite()!==d1)){a1.push({key:c1,visible:d1});$.setFavorite(d1);}}}}if(this.getShowExecuteOnSelection()&&i.getExecuteOnSelection&&e[iG].getCells()[W.EXEC_COLUMN].isA("sap.m.CheckBox")&&i.getExecuteOnSelection()!=e[iG].getCells()[W.EXEC_COLUMN].getSelected()){var e1=e[iG].getCells()[W.EXEC_COLUMN].getSelected();var f1=this.getItemByKey(e[iG].getKey());if(!f1&&(this.getSupportExecuteOnSelectOnSandardVariant()&(e[iG].getKey()===this.getStandardVariantKey()))){f1=new r();}if(f1&&f1.setExecuteOnSelection){f1.setExecuteOnSelection(e1);if(this.getSupportExecuteOnSelectOnSandardVariant()&(e[iG].getKey()===this.getStandardVariantKey())){this._executeOnSelectForStandardVariantByUser(e1);}this.aExeVariants.push({key:i.getKey(),exe:e1});if(f1.setLifecyclePackage&&!f1.getReadOnly()){f1.setLifecyclePackage(e[iG].getLifecyclePackage());f1.setLifecycleTransportId(e[iG].getLifecycleTransportId());}}}}if(this.oManagementDialog){this.oManagementDialog.close();}if(this.bVariantItemMode===false){if(this.getDefaultVariantKey()!=this.sNewDefaultKey){var g1=null;if(this.sNewDefaultKey==this.getStandardVariantKey()){g1=this.getItemByKey(this.getDefaultVariantKey());this.fireSave({name:g1.getText(),overwrite:true,key:g1.getKey(),def:false});}else{g1=this.getItemByKey(this.sNewDefaultKey);this.fireSave({name:g1.getText(),overwrite:true,key:g1.getKey(),def:true});}}}if(this.sNewDefaultKey!=this.getDefaultVariantKey()){this.setDefaultVariantKey(this.sNewDefaultKey);}for(_=0;_<this.aRemovedVariants.length;_++){i=this.getItemByKey(this.aRemovedVariants[_]);for(var iE=0;iE<this.aRemovedVariantTransports.length;iE++){if(this.aRemovedVariants[_]===this.aRemovedVariantTransports[iE].key){var i1=this.aRemovedVariantTransports[iE];if(i.setLifecyclePackage){i.setLifecycleTransportId(i1.transport);}break;}}}this.fireManage({renamed:this.aRenamedVariants,deleted:this.aRemovedVariants,exe:this.aExeVariants,def:this.getDefaultVariantKey(),fav:a1});for(_=0;_<this.aRemovedVariants.length;_++){i=this.getItemByKey(this.aRemovedVariants[_]);if(i){this._removeItem(i);i.destroy();}if(this.lastSelectedVariantKey===this.aRemovedVariants[_]){Y=true;this._setSelectedItem(null);this.oModel.setProperty("/enabled",false);}}if(Y){this.bFireSelect=true;}this._eventDone();};
W.prototype._createEvent=function(e,i){var X={name:e,fFunc:i,args:[]};return X;};
W.prototype._handleNextEvent=function(){if(this.aEvents.length>0){if(!this.bEventRunning){this.bEventRunning=true;var e=this.aEvents.pop();e.fFunc.apply(this,e.args);}}};
W.prototype._addEvent=function(e){this.aEvents.push(e);this._handleNextEvent();};
W.prototype._cancelAllEvents=function(){this.aEvents=[];this.bEventRunning=false;};
W.prototype._eventDone=function(){this.bEventRunning=false;this._handleNextEvent();};
W.prototype._handleManageExecuteOnSelectionChanged=function(e){var i=this;var X=e.getParent();if(X&&X.getGlobal()&&!X.getReadOnly()){var Y=function($,_){X.setLifecyclePackage($);X.setLifecycleTransportId(_);i._eventDone();};var Z=function($){e.setSelected(!e.getSelected());i._cancelAllEvents();};this._createManagementDialog();this._assignTransport(X,Y,Z,this.oManagementDialog);}else{this._eventDone();}};
W.prototype._handleManageDeletePressed=function(e){var i=this,X;var Y=function(){var X=null,b1=i.oManagementTable.getItems();b1.some(function(c1){if(c1.getKey()===i.getStandardVariantKey()){X=c1;return true;}});return X;};this._anyInErrorState(this.oManagementTable,e.getParent().getCells()[W.NAME_COLUMN]);X=Y();var Z=e.getParent();if(Z.getGlobal()){var $=function(b1,c1){var d1=Z.getKey();i.aRemovedVariants.push(d1);i.oManagementTable.removeItem(Z);if(i.getShowSetAsDefault()){if((Z.getKey()===i.sNewDefaultKey)){if(X){X.getCells()[W.DEF_COLUMN].setSelected(true);X.getCells()[W.DEF_COLUMN].fireSelect({selected:true});}else{i.setStandardVariantKey(i.STANDARDVARIANTKEY);}i.sNewDefaultKey=i.getStandardVariantKey();}}Z.destroy();var e1={key:d1,transport:c1};i.aRemovedVariantTransports.push(e1);i._eventDone();};var _=function(b1){i._cancelAllEvents();};this._createManagementDialog();this._assignTransport(Z,$,_,this.oManagementDialog);}else{this.aRemovedVariants.push(Z.getKey());this.oManagementTable.removeItem(Z);if(this.getShowSetAsDefault()){if(Z.getKey()===this.sNewDefaultKey){if(X){X.getCells()[W.DEF_COLUMN].setSelected(true);X.getCells()[W.DEF_COLUMN].fireSelect({selected:true});}this.sNewDefaultKey=this.getStandardVariantKey();}}Z.destroy();this._eventDone();}var a1=sap.ui.getCore().byId(this.getId()+"-managementcancel");if(a1){a1.focus();}};
W.prototype._handleShareSelected=function(e){var i=this;if(e.getParameters&&e.getParameters()&&e.getParameters().selected){var X=function(Z,$){i.sTransport=$;i.sPackage=Z;i._eventDone();};var Y=function(Z){i.oShare.setSelected(false);i.sTransport=null;i.sPackage=null;i._cancelAllEvents();};this._createSaveDialog();this._assignTransport(null,X,Y,this.oSaveDialog);}else{this.sTransport=null;this.sPackage=null;this._eventDone();}};
W.prototype._handleVariantSaveAs=function(){var e="SV"+new Date().getTime();var i=this.oInputName.getValue();var X=this.oInputKey.getValue();var Y="";var Z="";var $=false;var _=false;var a1=null;i=i.trim();if(i==""){this.oInputName.setValueState(x.Error);this.oInputName.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}X=X.trim();if(this.bManualVariantKey&&X==""){this.oInputKey.setValueState(x.Error);this.oInputKey.setValueStateText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));this._cancelAllEvents();return;}if(this.bManualVariantKey){e=X;}if(this.oSaveDialog){this.oSaveDialog.close();}if(this.oExecuteOnSelect!==null){$=this.oExecuteOnSelect.getSelected();}if(this.oCreateTile!==null){_=this.oCreateTile.getSelected();}if(this.bVariantItemMode){a1=new r({key:e,readOnly:false,executeOnSelection:$,global:this.oShare.getSelected(),lifecycleTransportId:this.sTransport,lifecyclePackage:this.sPackage});a1.setText(i);this.addVariantItem(a1);this._setSelectedItem(a1);}else{a1=new v({key:e});a1.setText(i);this.addItem(a1);this._setSelectedItem(a1);}if(this.oDefault.getSelected()){this.setDefaultVariantKey(e);}if(this.oShare.getSelected()){Z=this.sPackage;Y=this.sTransport;}this.fireSave({name:i,overwrite:false,def:this.oDefault.getSelected(),key:e,exe:this.oExecuteOnSelect.getSelected(),tile:_,global:this.oShare.getSelected(),lifecyclePackage:Z,lifecycleTransportId:Y});this.oModel.setProperty("/enabled",false);this._eventDone();};
W.prototype.setBackwardCompatibility=function(e){this._setBackwardCompatibility(e);};
W.prototype._setBackwardCompatibility=function(e){if(this.getItems().length===0&&this.getVariantItems().length===0){this.bVariantItemMode=!e;}this._setStandardText();};
W.prototype._setStandardText=function(){var e=this.getSelectionKey();if(e===null||e===this.getStandardVariantKey()){if(this.bVariantItemMode==false){this._setVariantText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"));}else{this._setVariantText(this.oResourceBundle.getText("VARIANT_MANAGEMENT_STANDARD"));}if(this.getStandardItemText()!==null&&this.getStandardItemText()!=""){this._setVariantText(this.getStandardItemText());}}};
W.prototype._setVariantText=function(e){var i,X=this.extractBindingInfo(e),Y=e;if((typeof X==="object")&&X.model&&X.path){i=this.getModel(X.model);if(i){Y=i.getProperty(X.path);}}this.oModel.setProperty("/selectedVariant",Y);};
W.prototype._getVariantText=function(e){return this.oModel.getProperty("/selectedVariant");};
W.prototype._updateVariantInvisibletext=function(e,i){if(i){e=this.oResourceBundle.getText("VARIANT_MANAGEMENT_MODIFIED",[e]);}return e;};
W.prototype._setFavoriteIcon=function(i,e){i.setSrc(e?"sap-icon://favorite":"sap-icon://unfavorite");i.setTooltip(this.oResourceBundle.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP"));i.setAlt(this.oResourceBundle.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_ACC":"VARIANT_MANAGEMENT_FAV_ADD_ACC"));};
W.prototype._isFavoriteSelected=function(i){return i.getSrc()==="sap-icon://unfavorite";};
W.prototype._openVariantManagementDialog=function(){var i;var e=null;var X=0;var Y;var Z;var $;var _;var a1;var b1;var c1;var d1;var e1,f1,g1,h1,i1,j1;var k1=this;this._mFavoriteChanges={};this.oManagementSave.setEnabled(true);this.oManagementSave.setTooltip(null);this.oManagementTable.destroyItems();e1=function(l1){k1._checkVariantNameConstraints(this,k1.oManagementTable);};f1=function(l1){var n1=k1._createEvent("inputfieldChange",k1._checkManageItemNameChange);n1.args.push(this.getParent());k1._addEvent(n1);};i1=function(l1){var n1=k1._isFavoriteSelected(l1.oSource),i=this.getParent();if(i&&(k1.sNewDefaultKey!==i.getKey())){k1._mFavoriteChanges[i.getKey()]=n1;k1._setFavoriteIcon(l1.oSource,n1);}};g1=function(l1){var n1=(l1.getParameters().selected===true),i=this.getParent();if(i){if(n1){k1.sNewDefaultKey=i.getKey();k1._mFavoriteChanges[i.getKey()]=n1;}var o1=i.getCells()[W.FAV_COLUMN];if(o1&&i.getFavorite){if(n1){k1._setFavoriteIcon(o1,true);}else if(k1._mFavoriteChanges[i.getKey()]!==undefined){k1._setFavoriteIcon(o1,k1._mFavoriteChanges[i.getKey()]);}else{k1._setFavoriteIcon(o1,i.getFavorite()===true);}}}};h1=function(l1){var n1=k1._createEvent("executeOnSelectionChange",k1._handleManageExecuteOnSelectionChanged);n1.args.push(this);k1._addEvent(n1);};j1=function(l1){var n1=k1._createEvent("manageDeletePressed",k1._handleManageDeletePressed);n1.args.push(this);k1._addEvent(n1);};if(this.oManageDialogSearchField){this.oManageDialogSearchField.setValue("");}this._initalizeManagementTableColumns();this.sNewDefaultKey=this.getDefaultVariantKey();this._restoreCompleteList(true);if(this.oVariantList.getItems()[0].getKey()!==this.getStandardVariantKey()&&this.bVariantItemMode==false){i=new r(this.oVariantManage.getId()+"-item-standard",{key:this.getStandardVariantKey(),text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DEFAULT"),readOnly:true,executeOnSelection:false});this.oVariantList.insertItem(i,0);}if(this.getUseFavorites()){i=this.oVariantList.getItemByKey(this.getStandardVariantKey());if(i){this.oVariantList.removeItem(i);}}e=this.oVariantList.getItems();if(this.getUseFavorites()){e.sort(this._compareItems);if(i){this.oVariantList.insertItem(i);e.splice(0,0,i);}}for(var iH=0;iH<e.length;iH++){if(e[iH].getReadOnly()||e[iH].getLabelReadOnly()){var m1=e[iH].getAccessOptions();d1=this._accessOptionsText(m1);}else{d1=null;}if(e[iH].getReadOnly()){d1=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LAYER");}else if(e[iH].getLabelReadOnly()===true){d1=this.oResourceBundle.getText("VARIANT_MANAGEMENT_WRONG_LANGUAGE");}if(e[iH].getKey()===this.getStandardVariantKey()){d1=null;}Y=new E(this.oVariantManage.getId()+"-edit-"+X,{key:e[iH].getKey(),global:e[iH].getGlobal(),readOnly:e[iH].getReadOnly(),lifecyclePackage:e[iH].getLifecyclePackage(),lifecycleTransportId:e[iH].getLifecycleTransportId(),namespace:e[iH].getNamespace(),labelReadOnly:e[iH].getLabelReadOnly(),author:e[iH].getAuthor(),favorite:e[iH].getFavorite(),vAlign:w.Middle});Z=new u(this.oVariantManage.getId()+"-fav-"+X,{press:i1});Z.addStyleClass("sapUICompVarMngmtFavColor");if(e[iH].getFavorite){this._setFavoriteIcon(Z,e[iH].getFavorite());}Y.addCell(Z);if(e[iH].getKey()===this.getStandardVariantKey()||e[iH].getReadOnly()===true||e[iH].getLabelReadOnly()===true){Z=new p(this.oVariantManage.getId()+"-text-"+X,{});Z.setTitle(e[iH].getText());if(d1){Z.setTooltip(d1);}}else{Z=new I(this.oVariantManage.getId()+"-input-"+X,{liveChange:e1,change:f1});Z.setValue(e[iH].getText());}Y.addCell(Z);if(e[iH].getGlobal()){c1=this.oResourceBundle.getText("VARIANT_MANAGEMENT_SHARED");}else{c1=this.oResourceBundle.getText("VARIANT_MANAGEMENT_PRIVATE");}$=new a(this.oVariantManage.getId()+"-type-"+X,{text:c1,wrapping:false});$.addStyleClass("sapUICompVarMngmtType");Y.addCell($);_=new R(this.oVariantManage.getId()+"-def-"+X,{groupName:this.oVariantManage.getId(),select:g1});if(this.sNewDefaultKey===e[iH].getKey()||e[iH].getKey()===this.getStandardVariantKey()&&this.sNewDefaultKey===""){_.setSelected(true);if(e[iH].getFavorite){this._setFavoriteIcon(Y.getCells()[0],true);}}Y.addCell(_);a1=new j(this.oVariantManage.getId()+"-exe-"+X,{selected:false,enabled:false,select:h1});if(e[iH].getExecuteOnSelection){if((e[iH].getKey()===this.getStandardVariantKey()&&this.getSupportExecuteOnSelectOnSandardVariant())){a1.setEnabled(true);if(this.bExecuteOnSelectForStandardByUser!==null){a1.setSelected(this.bExecuteOnSelectForStandardByUser);}else{a1.setSelected(e[iH].getExecuteOnSelection());}}else{a1.setEnabled(!e[iH].getReadOnly());a1.setSelected(e[iH].getExecuteOnSelection());}if(d1){a1.setTooltip(d1);}}Y.addCell(a1);Y.addCell(new a());$=new a(this.oVariantManage.getId()+"-author-"+X,{text:e[iH].getAuthor(),textAlign:"Begin"});Y.addCell($);b1=new h(this.oVariantManage.getId()+"-del-"+X,{icon:"sap-icon://decline",enabled:true,type:y.Transparent,press:j1,tooltip:this.oResourceBundle.getText("VARIANT_MANAGEMENT_DELETE")});this._assignColumnInfoForDeleteButton(b1);if(e[iH].getReadOnly&&e[iH].getReadOnly()){b1.setEnabled(false);b1.setVisible(false);}Y.addCell(b1);this.oManagementTable.addItem(Y);X++;}this.aRemovedVariants=[];this.aRemovedVariantTransports=[];this.aRenamedVariants=[];this.aExeVariants=[];this._createManagementDialog();this._setDialogCompactStyle(this,this.oManagementDialog);i=this.oVariantList.getSelectedItem();if(i){this.lastSelectedVariantKey=i.getKey();}this.oVariantPopOver.close();this.oManagementDialog.open();};
W.prototype._assignColumnInfoForDeleteButton=function(e){if(!this._oInvisibleDeleteColumnName){this._oInvisibleDeleteColumnName=new s({text:this.oResourceBundle.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")});this._createManagementDialog();this.oManagementDialog.addContent(this._oInvisibleDeleteColumnName);}if(this._oInvisibleDeleteColumnName){e.addAriaLabelledBy(this._oInvisibleDeleteColumnName);}};
W.prototype._enableManualVariantKey=function(e){this.bManualVariantKey=e;};
W.prototype._fireSelectAsync=function(e){var i;if(e===undefined||e===null){var X=this._getSelectedItem();if(X===null){i=this.getStandardVariantKey();}else{i=X.getKey();}}this.fireSelect({key:i});};
W.prototype.setSupportExecuteOnSelectOnSandardVariant=function(e){this.bSupportExecuteOnSelectOnSandardVariant=e;};
W.prototype.getSupportExecuteOnSelectOnSandardVariant=function(){return this.bSupportExecuteOnSelectOnSandardVariant;};
W.prototype._executeOnSelectForStandardVariantByXML=function(e){this.bExecuteOnSelectForStandardViaXML=e;};
W.prototype._executeOnSelectForStandardVariantByUser=function(e){this.bExecuteOnSelectForStandardByUser=e;};
W.prototype.getExecuteOnSelectForStandardVariant=function(){if(this.getSupportExecuteOnSelectOnSandardVariant()){if(this.bExecuteOnSelectForStandardByUser!==null){return this.bExecuteOnSelectForStandardByUser;}}return this.bExecuteOnSelectForStandardViaXML;};
W.prototype.getStandardVariantKey=function(){return this._sStandardVariantKey;};
W.prototype.setStandardVariantKey=function(e){this._sStandardVariantKey=e;};
W.prototype._setVendorLayer=function(e){this._bVendorLayer=e;};
W.prototype.setStandardFavorite=function(e){this._isFavorite=e;};
W.prototype.getStandardFavorite=function(){return this._isFavorite;};
W.prototype._isIndustrySolutionModeAndVendorLayer=function(){if(this._getIndustrySolutionMode()&&this._bVendorLayer){return true;}return false;};
W.prototype._setIndustrySolutionMode=function(e){this._bIndustrialSolutionMode=e;};
W.prototype._getIndustrySolutionMode=function(){return this._bIndustrialSolutionMode;};
return W;});
/*!
 * SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.predefine('sap/ui/comp/navpopover/FakeFlpConnector',['sap/ui/thirdparty/jquery','./Factory'],function(q,F){"use strict";
function a(){}
a.enableFakeConnector=function(s){if(a.getServiceReal){return;}a.getServiceReal=F.getService;F.getService=a._createFakeService(s);};
a._createFakeService=function(s){return function(S){switch(S){case"CrossApplicationNavigation":return{hrefForExternal:function(t){if(!t||!t.target||!t.target.shellHash){return null;}return t.target.shellHash;},getDistinctSemanticObjects:function(){var b=[];for(var c in s){b.push(c);}var d=q.Deferred();setTimeout(function(){d.resolve(b);},0);return d.promise();},getLinks:function(p){var l=[];if(!Array.isArray(p)){s[p.semanticObject]?l=s[p.semanticObject].links:l=[];}else{p.forEach(function(P){s[P[0].semanticObject]?l.push([s[P[0].semanticObject].links]):l.push([[]]);});}var d=q.Deferred();setTimeout(function(){d.resolve(l);},0);return d.promise();}};case"URLParsing":return{parseShellHash:function(i){var f=function(L){var c=L.filter(function(l){return l.intent===i;});return c[0];};for(var b in s){var l=f(s[b].links);if(l){return{semanticObject:b,action:l.action};}}return{semanticObject:null,action:null};}};default:return a.getServiceReal(S);}};};
a.disableFakeConnector=function(){if(a.getServiceReal){F.getService=a.getServiceReal;a.getServiceReal=undefined;}};
return a;},true);
sap.ui.predefine('sap/ui/comp/odata/ChartMetadata',[],function(){"use strict";var c={"com.sap.vocabularies.UI.v1.ChartType/Column":"column","com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":"stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnDual":"dual_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual":"dual_stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":"100_stacked_column","com.sap.vocabularies.UI.v1.ChartType/ColumnStackedDual100":"100_dual_stacked_column","com.sap.vocabularies.UI.v1.ChartType/Bar":"bar","com.sap.vocabularies.UI.v1.ChartType/BarStacked":"stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarDual":"dual_bar","com.sap.vocabularies.UI.v1.ChartType/BarStackedDual":"dual_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarStacked100":"100_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/BarStackedDual100":"100_dual_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/Area":"area","com.sap.vocabularies.UI.v1.ChartType/AreaStacked":"stacked_column","com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":"100_stacked_column","com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":"bar","com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":"stacked_bar","com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":"100_stacked_bar","com.sap.vocabularies.UI.v1.ChartType/Line":"line","com.sap.vocabularies.UI.v1.ChartType/LineDual":"dual_line","com.sap.vocabularies.UI.v1.ChartType/Combination":"combination","com.sap.vocabularies.UI.v1.ChartType/CombinationStacked":"stacked_combination","com.sap.vocabularies.UI.v1.ChartType/CombinationDual":"dual_combination","com.sap.vocabularies.UI.v1.ChartType/CombinationStackedDual":"dual_stacked_combination","com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStacked":"horizontal_stacked_combination","com.sap.vocabularies.UI.v1.ChartType/Pie":"pie","com.sap.vocabularies.UI.v1.ChartType/Donut":"donut","com.sap.vocabularies.UI.v1.ChartType/Scatter":"scatter","com.sap.vocabularies.UI.v1.ChartType/Bubble":"bubble","com.sap.vocabularies.UI.v1.ChartType/Radar":"line","com.sap.vocabularies.UI.v1.ChartType/HeatMap":"heatmap","com.sap.vocabularies.UI.v1.ChartType/TreeMap":"treemap","com.sap.vocabularies.UI.v1.ChartType/Waterfall":"waterfall","com.sap.vocabularies.UI.v1.ChartType/Bullet":"bullet","com.sap.vocabularies.UI.v1.ChartType/VerticalBullet":"vertical_bullet","com.sap.vocabularies.UI.v1.ChartType/HorizontalWaterfall":"horizontal_waterfall","com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationDual":"dual_horizontal_combination","com.sap.vocabularies.UI.v1.ChartType/HorizontalCombinationStackedDual":"dual_horizontal_stacked_combination"};var m={"com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1":"axis1","com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis2":"axis2","com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis3":"axis3","com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis4":"axis4"};var d={"com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category":"category","com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series":"series","com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category2":"category2"};var v=["AcceptanceRangeLowValue","AcceptanceRangeHighValue","ToleranceRangeLowValue","ToleranceRangeHighValue","DeviationRangeLowValue","DeviationRangeHighValue"];var C={mCriticalityType:{},mImprovementDirectionType:{},getChartType:function(s){return c[s];},getAnnotationChartType:function(u){for(var s in c){if(c[s]===u){return s;}}},getMeasureRole:function(r){return m[r];},getAnnotationMeasureRole:function(u){for(var t in m){if(m[t]===u){return t;}}},getDimensionRole:function(r){return d[r];},getAnnotationDimensionRole:function(u){for(var t in d){if(d[t]===u){return t;}}},getCriticalityThresholds:function(){return v;},calculateConstantValue:function(t){var V=t?(t.Decimal||t.Int||t.String):undefined;return Number(V);},calculateValue:function(V){var r=V?(V.Decimal||V.Int||V.String):undefined;return r;},getValueCriticality:function(t){return t["com.sap.vocabularies.UI.v1.ValueCriticality"]||null;},getCriticalityType:function(s){return C.mCriticalityType[s];},getImprovementDirectionType:function(i){return C.mImprovementDirectionType[i];},feedWithChartLibrary:function(a){if(!C.chartLibrary){C.chartLibrary=a;var b=a.coloring.CriticalityType;var I=a.coloring.ImprovementDirectionType;C.mCriticalityType={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":b.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":b.Negative,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":b.Critical,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":b.Positive};C.mImprovementDirectionType={"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Target":I.Target,"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Maximize":I.Maximize,"com.sap.vocabularies.UI.v1.ImprovementDirectionType/Minimize":I.Minimize};}}};return C;},true);
sap.ui.predefine('sap/ui/comp/odata/SideEffects',[],function(){"use strict";var S=function(){};
S.prototype.getSideEffects=function(p,t,m){var r={};if(m){if(p){if(m.entitySet){r.entitySet=this._getForPath(m.entitySet,p);}if(m.entityType){r.entityType=this._getForPath(m.entityType,p);}}if(t&&m.complexType){r.complexType=this._getForPath(m.complexType,t);}}return r;};
S.prototype._getForPath=function(e,p){var n,s,r={};for(n in e){if(n.indexOf&&n.indexOf("com.sap.vocabularies.Common.v1.SideEffects")===0){s=e[n];if(this._checkSourceProperties(s,p)){r[n]=s;}if(this._checkSourceEntities(s,p)){r[n]=s;}}}return r;};
S.prototype._checkSourceProperties=function(s,p){var i,l;if(s.SourceProperties){l=s.SourceProperties.length;for(i=0;i<l;i++){if(s.SourceProperties[i].PropertyPath===p){return true;}}}return false;};
S.prototype._checkSourceEntities=function(s,p){var i,l;if(s.SourceEntities&&s.SourceEntities.Collection){l=s.SourceEntities.Collection.length;for(i=0;i<l;i++){if(s.SourceEntities.Collection[i].NavigationPropertyPath===p){return true;}}}else if(s.SourceEntities&&Array.isArray(s.SourceEntities)){l=s.SourceEntities.length;for(i=0;i<l;i++){if(s.SourceEntities[i].NavigationPropertyPath===p){return true;}}}return false;};
S.prototype.destroy=function(){};
return S;},true);
sap.ui.predefine('sap/ui/comp/odata/type/StringDate',['sap/ui/core/library',"sap/ui/model/SimpleType","sap/ui/core/format/DateFormat","sap/ui/model/ValidateException"],function(c,S,D,V){"use strict";
var a=S.extend("sap.ui.comp.odata.type.StringDate",{constructor:function(f){S.apply(this,[f]);this.sName="sap.ui.comp.odata.type.StringDate";f=Object.assign({},f,{UTC:false});this.displayFormatter=D.getDateInstance(f);this.parseFormatter=D.getDateInstance({UTC:false,pattern:"yyyyMMdd",calendarType:c.CalendarType.Gregorian,strictParsing:true});}});
a.prototype.parseValue=function(v,s){if(v===""){v=null;}if(v!=null&&v!=""){var o=s==="string"?this.parseFormatter.parse(v,true):v;v=this.parseFormatter.format(o);}return v;};
a.prototype.formatValue=function(v,t){if(v===null||v===undefined||v==""){return null;}if(!(v instanceof Date)){v=this.parseFormatter.parse(v);}if(t==="string"){return this.displayFormatter.format(v);}return v;};
a.prototype.validateValue=function(v){if(v!=null){var d=this.parseFormatter.parse(v);if(!d){throw new V(v+" is not a valid date");}}};
return a;});
sap.ui.predefine('sap/ui/comp/providers/ChartProvider',["sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/odata/ChartMetadata","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/odata/CalendarMetadata","sap/ui/comp/odata/ODataType","./ControlProvider","sap/ui/core/format/DateFormat"],function(M,C,F,a,O,b,D){"use strict";var c=function(p){if(p){this._oParentODataModel=p.model;this.sEntitySet=p.entitySet;this._sIgnoredFields=p.ignoredFields;this._bSkipAnnotationParse=p.skipAnnotationParse==="true";this._sChartQualifier=p.chartQualifier;this._sPresentationVariantQualifier=p.presentationVariantQualifier;this._oDefaultDropDownDisplayBehaviour=p.defaultDropDownDisplayBehaviour;this._bUseTimeseries=p.useTimeSeries;try{this._oDateFormatSettings=p.dateFormatSettings?JSON.parse(p.dateFormatSettings):undefined;if(!this._oDateFormatSettings.hasOwnProperty("UTC")){this._oDateFormatSettings["UTC"]=true;}}catch(e){}if(p.chartLibrary){C.feedWithChartLibrary(p.chartLibrary);}}this._aODataFieldMetadata=[];this._oChartViewMetadata=null;this._oChartDataPointMetadata=null;this._aIgnoredFields=[];this._oMetadataAnalyser=new M(this._oParentODataModel);this._intialiseMetadata();};
c.prototype._intialiseMetadata=function(){var o,d=[],f,i,l=0;this._aODataFieldMetadata=this._oMetadataAnalyser.getFieldsByEntitySetName(this.sEntitySet);this._sFullyQualifiedEntityTypeName=this._oMetadataAnalyser.getEntityTypeNameFromEntitySetName(this.sEntitySet);if(!this._bSkipAnnotationParse){this._oPresentationVariant=this._oMetadataAnalyser.getPresentationVariantAnnotation(this._sFullyQualifiedEntityTypeName,this._sPresentationVariantQualifier);if(this._oPresentationVariant&&this._oPresentationVariant.chartAnnotation){this._oChartAnnotation=this._oPresentationVariant.chartAnnotation;}else{this._oChartAnnotation=this._oMetadataAnalyser.getChartAnnotation(this._sFullyQualifiedEntityTypeName,this._sChartQualifier);}}if(!this._oDefaultDropDownDisplayBehaviour){this._oDefaultDropDownDisplayBehaviour=this._oMetadataAnalyser.getTextArrangementValue(this._sFullyQualifiedEntityTypeName);}this._generateIgnoredFieldsArray();this._oControlProvider=new b({metadataAnalyser:this._oMetadataAnalyser,model:this._oParentODataModel,fieldsMetadata:this._aODataFieldMetadata,dateFormatSettings:this._oDateFormatSettings,defaultDropDownDisplayBehaviour:this._oDefaultDropDownDisplayBehaviour,enableDescriptions:false,entitySet:this.sEntitySet});if(this._aODataFieldMetadata){this._prepareHierarchy();l=this._aODataFieldMetadata.length;}for(i=0;i<l;i++){f=this._aODataFieldMetadata[i];if(this._aIgnoredFields.indexOf(f.name)>-1||!f.visible){continue;}if(f.type.indexOf("Edm.")===0){o=this._getFieldViewMetadata(f);this._enrichWithChartViewMetadata(f,o);d.push(f);}}if(this._oChartAnnotation){this._oChartViewMetadata=Object.assign({},this._oChartAnnotation);this._oChartViewMetadata.chartType=C.getChartType(this._oChartViewMetadata.chartType);this._oChartViewMetadata.fields=d;}};
c.prototype._prepareHierarchy=function(){for(var i=0;i<this._aODataFieldMetadata.length;i++){if(this._aODataFieldMetadata[i].hierarchy){for(var j=0;j<this._aODataFieldMetadata.length;j++){this._aODataFieldMetadata[j].hierarchy=this._aODataFieldMetadata[j].hierarchy||{};this._aODataFieldMetadata[j].hierarchy.up=this._aODataFieldMetadata[j].hierarchy.up||{};if(this._aODataFieldMetadata[i].hierarchy.field===this._aODataFieldMetadata[j].name){this._aODataFieldMetadata[i].hierarchy.down=this._getFieldViewMetadata(this._aODataFieldMetadata[j]);this._aODataFieldMetadata[j].hierarchy.up[this._aODataFieldMetadata[i].hierarchy.type]=this._getFieldViewMetadata(this._aODataFieldMetadata[i]);}}}}};
c.prototype._setAnnotationMetadata=function(f){if(f&&f.fullName){var s=this._oMetadataAnalyser.getSemanticObjectsFromAnnotation(f.fullName);if(s){f.semanticObjects=s;}}};
c.prototype._getFieldViewMetadata=function(f){var o=this._oControlProvider.getFieldViewMetadata(f,false);this._setAnnotationMetadata(o);return o;};
c.prototype._generateIgnoredFieldsArray=function(){if(this._sIgnoredFields){this._aIgnoredFields=this._sIgnoredFields.split(",");}};
c.prototype._enrichWithChartViewMetadata=function(f,v){function i(R,d,o){if(d.aggregationRole){return d.aggregationRole===R;}if(o){var e=R=="dimension"?o.dimensionFields:o.measureFields;return e&&e.indexOf(d.name)!=-1;}return false;}f.isMeasure=i("measure",f,this._oChartAnnotation);f.isDimension=i("dimension",f,this._oChartAnnotation);f.isHierarchyDimension=f.hierarchy&&f.hierarchy.type===M.hierarchyType.nodeFor&&i("dimension",f.hierarchy.down,this._oChartAnnotation);f.quickInfo=v.quickInfo;f.modelType=v.modelType;f.hasValueListAnnotation=v.hasValueListAnnotation;f.fullName=v.fullName;f.timeUnitType=this._getTimeUnitType(f);f.dateFormatter=this._getDateFormatter(f);f.isTimeDimension=f.timeUnitType!==undefined;f.role=this._getRole(f);f.hierarchyLevel=this._getHierarchyLevel(f);f.dataPoint=this._getDataPoint(f);f.filterType=v.filterType;if(v.template){f.template=v.template;}if(f.isDimension){f.displayBehaviour=v.displayBehaviour;}else if(f.isHierarchyDimension){var r=f.hierarchy.up[M.hierarchyType.nodeExternalKeyFor]||v;f.displayBehaviour=r.displayBehaviour;f.description=r.description||r.name;}f.isSemanticObject=(v.semanticObjects)?true:false;this._setInResult(f);this._setSortOrder(f);};
c.prototype._getTimeUnitType=function(f){var t;switch(f.type){case"Edm.Date":t="Date";break;case"Edm.DateTime":case"Edm.DateTimeOffset":if(f.displayFormat==="Date"){t="Date";}break;case"Edm.String":if(f.isCalendarDate){t="yearmonthday";break;}if(a.isYearWeek(f)){t="yearweek";break;}if(a.isYearMonth(f)){t="yearmonth";break;}if(a.isYearQuarter(f)){t="yearquarter";break;}if(F.isFiscalYear(f)){t="fiscalyear";break;}if(F.isFiscalYearPeriod(f)){t="fiscalyearperiod";break;}break;}return t;};
c.prototype._getDateFormatter=function(f){var d,e;switch(f.type){case"Edm.Date":e=D.getDateInstance(this._oDateFormatSettings);break;case"Edm.Time":e=D.getTimeInstance(this._oDateFormatSettings);break;case"Edm.DateTimeOffset":case"Edm.DateTime":if(f.displayFormat==="Date"){e=D.getDateInstance(this._oDateFormatSettings);}else{e=D.getDateTimeInstance(this._oDateFormatSettings);}break;case"Edm.String":if(f.isCalendarDate&&this._oDateFormatSettings){var o;var s={isCalendarDate:true};if(!d){var S=O.getType("Edm.String",this._oDateFormatSettings,o,s);d=function(v){return S.formatValue(v,"string");};}}else if(!this._bUseTimeseries){var o;var s={isCalendarDate:true};d=this._getDateFormatterForAnnotation(f,o,s);}break;}if(e){d=function(t){if(!t){return null;}var g=new Date(t);return e.format(g);};}return d;};
c.prototype._getDateFormatterForAnnotation=function(f,o,s){var d={};var p=this._getParserSettingsForAnnotation(f);var P=this._getParserPrefixForAnnotation(f);if(this._oDateFormatSettings){Object.assign(d,this._oDateFormatSettings);}d.pattern=this._getFormatterPatternForAnnotation(f);if(d.pattern){var S=O.getType("Edm.String",d,o,s);var e=function(v){v=D.getInstance({pattern:p}).parse(v);return P+S.formatValue(v,"string");};return e;}};
c.prototype._getParserPrefixForAnnotation=function(f){if(a.isYearWeek(f)){return"CW ";}else if(a.isYearQuarter(f)){return"Q";}return"";};
c.prototype._getParserSettingsForAnnotation=function(f){if(f.type==="Edm.String"){var s;if(a.isYearWeek(f)){s="yyyyww";}else if(a.isYearMonth(f)){s="yyyyMM";}else if(a.isYearQuarter(f)){s="yyyyQQQQQ";}return s;}};
c.prototype._getFormatterPatternForAnnotation=function(f){if(f.type==="Edm.String"){var s;if(f.isCalendarDate){s="d MMMM y";}else if(a.isYearWeek(f)){s="ww y";}else if(a.isYearMonth(f)){s="MMMM y";}else if(a.isYearQuarter(f)){s="Q y";}return s;}};
c.prototype._setInResult=function(f){if(this._oPresentationVariant){if(this._oPresentationVariant.requestAtLeastFields&&this._oPresentationVariant.requestAtLeastFields.indexOf(f.name)>-1){f.inResult=true;}}};
c.prototype._setSortOrder=function(f){f.sorted=false;f.sortOrder="Ascending";var l;if(this._oPresentationVariant&&this._oPresentationVariant.sortOrderFields){l=this._oPresentationVariant.sortOrderFields.length;for(var i=0;i<l;i++){if(this._oPresentationVariant.sortOrderFields[i].name===f.name){f.sorted=true;f.sortOrder=this._oPresentationVariant.sortOrderFields[i].descending?"Descending":"Ascending";f.sortIndex=i;break;}}}};
c.prototype._unmarkTextDimensions=function(f,t){var i,o;for(i=0;i<f.length;i++){o=f[i];if(o.isDimension){if(t.indexOf(o.name)>-1){o.isDimension=false;}}}};
c.prototype._getRole=function(f){if(this._oChartAnnotation){if((f.isDimension||f.isHierarchyDimension)&&this._oChartAnnotation.dimensionAttributes[f.name]){return C.getDimensionRole(this._oChartAnnotation.dimensionAttributes[f.name].role);}else if(f.isMeasure&&this._oChartAnnotation.measureAttributes[f.name]){return C.getMeasureRole(this._oChartAnnotation.measureAttributes[f.name].role);}}};
c.prototype._getHierarchyLevel=function(f){if(this._oChartAnnotation){if(f.isHierarchyDimension&&this._oChartAnnotation.dimensionAttributes[f.name]){var l=null;try{l=parseInt(this._oChartAnnotation.dimensionAttributes[f.name].hierarchyLevel);}catch(e){l=0;}return l;}return 0;}};
c.prototype._getTextPropertyForHierachyDimension=function(f){var r=f.hierarchy.up[M.hierarchyType.nodeExternalKeyFor]||f;return r.description||r.name;};
c.prototype._getDataPoint=function(f){if(this._oChartAnnotation&&f.isMeasure&&this._oChartAnnotation.measureAttributes[f.name]&&this._oChartAnnotation.measureAttributes[f.name].dataPoint){var d=this._oChartAnnotation.measureAttributes[f.name].dataPoint;var e=d.split("#");var q=e.length===2?e[1]:"";return this._getMeasureDataPoint(q,f.name);}return null;};
c.prototype.getChartViewMetadata=function(){return this._oChartViewMetadata;};
c.prototype.getViewField=function(d){var f=this._oChartViewMetadata.fields.filter(function(e){return e.name===d;})[0];return f;};
c.prototype.getChartDataPointMetadata=function(){if(!this._oChartDataPointMetadata&&this._sFullyQualifiedEntityTypeName){this._oChartDataPointMetadata=this._oMetadataAnalyser.getDataPointAnnotation(this._sFullyQualifiedEntityTypeName);}return this._oChartDataPointMetadata;};
c.prototype._getMeasureDataPoint=function(q,m){var o=this.getChartDataPointMetadata();if(o){var d=null;if(q){if(o.additionalAnnotations){d=o.additionalAnnotations[q];}}else if(o.primaryAnnotation){d=o.primaryAnnotation;}if(d!=null&&d.Value&&d.Value.Path==m){return d;}}return null;};
c.prototype.getIsUTCDateHandlingEnabled=function(){return this._oDateFormatSettings?this._oDateFormatSettings.UTC:false;};
c.prototype.destroy=function(){if(this._oMetadataAnalyser&&this._oMetadataAnalyser.destroy){this._oMetadataAnalyser.destroy();}this._oMetadataAnalyser=null;if(this._oControlProvider&&this._oControlProvider.destroy){this._oControlProvider.destroy();}this._oControlProvider=null;this._aODataFieldMetadata=null;this._oChartViewMetadata=null;this._oChartDataPointMetadata=null;this._sIgnoredFields=null;this.bIsDestroyed=true;};
c.prototype.provideSemanticColoring=function(d){var o={};if(d.Criticality){if(d.Criticality.Path){o={Calculated:d.Criticality.Path};}else{o={Static:C.getCriticalityType(d.Criticality.EnumMember)};}}else{var t={};var e=this._buildThresholds(t,d.CriticalityCalculation);if(e){o={ConstantThresholds:t};}else{o={DynamicThresholds:t};}}return o;};
c.prototype.calculateDimensionColoring=function(d){var v=C.getValueCriticality(d);if(!v){return null;}var V,o,e={Positive:{Values:[]},Critical:{Values:[]},Negative:{Values:[]},Neutral:{Values:[]}};for(var i=0;i<v.length;i++){o=v[i];V=C.calculateValue(o.Value);if(o.Criticality.EnumMember.endsWith("Positive")){e.Positive.Values.push(V);}else if(o.Criticality.EnumMember.endsWith("Critical")){e.Critical.Values.push(V);}else if(o.Criticality.EnumMember.endsWith("Negative")){e.Negative.Values.push(V);}else{e.Neutral.Values.push(V);}}return e;};
c.prototype._buildThresholds=function(t,o){var d=true;t.ImprovementDirection=C.getImprovementDirectionType(o.ImprovementDirection.EnumMember);var v=C.getCriticalityThresholds();var l=v.length;var e={oneSupplied:false};var f={oneSupplied:false};for(var i=0;i<l;i++){e[v[i]]=o[v[i]]?o[v[i]].Path:undefined;e.oneSupplied=e.oneSupplied||e[v[i]];if(!e.oneSupplied){f[v[i]]=C.calculateConstantValue(o[v[i]]);f.oneSupplied=f.oneSupplied||f[v[i]];}}if(e.oneSupplied){d=false;for(var i=0;i<l;i++){if(e[v[i]]){t[v[i]]=e[v[i]];}}}else{var A;t.AggregationLevels=[];if(f.oneSupplied){A={VisibleDimensions:null};for(var i=0;i<l;i++){if(f[v[i]]){A[v[i]]=f[v[i]];}}t.AggregationLevels.push(A);}if(o.ConstantThresholds&&o.ConstantThresholds.length>0){for(var i=0;i<o.ConstantThresholds.length;i++){var g=o.ConstantThresholds[i];var V=g.AggregationLevel?[]:null;if(g.AggregationLevel&&g.AggregationLevel.length>0){for(var j=0;j<g.AggregationLevel.length;j++){V.push(g.AggregationLevel[j].PropertyPath);}}A={VisibleDimensions:V};for(var j=0;j<l;j++){var n=C.calculateConstantValue(g[v[j]]);if(n){A[v[j]]=n;}}t.AggregationLevels.push(A);}}}return d;};
c.prototype.getMaxItems=function(){var m=-1;if(this._oPresentationVariant&&this._oPresentationVariant.maxItems){m=Math.min(this._oPresentationVariant.maxItems,100);}return m;};
return c;},true);
sap.ui.predefine('sap/ui/comp/providers/TokenParser',["sap/ui/comp/library","sap/ui/base/ManagedObject","sap/m/Token","sap/m/library","sap/ui/comp/util/FormatUtil"],function(l,M,T,L,F){"use strict";var V=l.valuehelpdialog.ValueHelpRangeOperation;var P=L.P13nConditionOperation;var a=function(d){this._sDefaultOperation=d;this._aKeyFields=[];this._mTypeOperations={"default":[P.EQ,P.BT,P.LT,P.LE,P.GT,P.GE,P.NotEQ,P.NotBT,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"string":[P.Empty,P.NotEmpty,P.Contains,P.EQ,P.BT,P.StartsWith,P.EndsWith,P.LT,P.LE,P.GT,P.GE,P.NotEQ,P.NotContains,P.NotStartsWith,P.NotEndsWith,P.NotBT,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"date":[P.Empty,P.NotEmpty,P.EQ,P.BT,P.LT,P.LE,P.GT,P.GE,P.NotEQ,P.NotBT,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"time":[P.EQ,P.BT,P.LT,P.LE,P.GT,P.GE,P.NotEQ,P.NotBT,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"numeric":[P.EQ,P.BT,P.LT,P.LE,P.GT,P.GE,P.NotEQ,P.NotBT,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"numc":[P.Contains,P.EQ,P.BT,P.EndsWith,P.LT,P.LE,P.GT,P.GE,P.NotContains,P.NotEQ,P.NotBT,P.NotEndsWith,P.NotLT,P.NotLE,P.NotGT,P.NotGE],"boolean":[P.EQ]};this._init();};
function p(t){var v=this.re.exec(t),s=v[1],b=v[2];if(v){if(s&&s.trim){s=s.trim();}if(b&&b.trim){b=b.trim();}return[s,b];}return[];}
a.rangeOperations={};a.rangeOperations[P.Empty]={regex:new RegExp("^"+F.getFormattedRangeText(V.Empty,null,null,false)+"$","i"),operator:P.Empty,example:F.getFormattedRangeText(V.Empty,null,null,false),template:F.getFormattedRangeText(V.Empty,null,null,false),exclude:false,parse:function(t){return[];}};a.rangeOperations[P.BT]={regex:/^([^!].*)\.\.\.(.+)$/,operator:P.BT,example:"foo...bar",template:"$0...$1",exclude:false,parse:p};a.rangeOperations[P.EQ]={regex:/^\=(.+)$/,operator:P.EQ,example:"=foo",template:"=$0",exclude:false};a.rangeOperations[P.Contains]={regex:/^\*(.+)\*$/,operator:P.Contains,example:"*foo*",template:"*$0*",exclude:false};a.rangeOperations[P.StartsWith]={regex:/^([^\*!].*)\*$/,operator:P.StartsWith,example:"foo*",template:"$0*",exclude:false};a.rangeOperations[P.EndsWith]={regex:/^\*(.*[^\*])$/,operator:P.EndsWith,example:"*foo",template:"*$0",exclude:false};a.rangeOperations[P.LT]={regex:/^\<([^\=].*)$/,operator:P.LT,example:"< foo",template:"<$0",exclude:false};a.rangeOperations[P.LE]={regex:/^\<\=(.+)$/,operator:P.LE,example:"<=foo",template:"<=$0",exclude:false};a.rangeOperations[P.GT]={regex:/^\>([^\=].*)$/,operator:P.GT,example:"> foo",template:">$0",exclude:false};a.rangeOperations[P.GE]={regex:/^>=(.+)$/,operator:P.GE,example:">=foo",template:">=$0",exclude:false};a.rangeOperations[P.NotEmpty]={regex:new RegExp("^"+F.getFormattedRangeText(V.Empty,null,null,true).replace("(","\\(").replace(")","\\)")+"$","i"),operator:P.NotEmpty,example:F.getFormattedRangeText(V.Empty,null,null,true),template:F.getFormattedRangeText(V.Empty,null,null,true),exclude:true,parse:function(t){return[];}};a.rangeOperations[P.NotBT]={regex:/^![(]?(.+)\.\.\.([^)]+)[)]?$/,operator:P.NotBT,example:"!foo...bar",template:"!($0...$1)",exclude:true,parse:p};a.rangeOperations[P.NotEQ]={regex:/^![(]?=(.+?)[)]?$/,operator:P.NotEQ,example:"!=foo",template:"!(=$0)",exclude:true};a.rangeOperations[P.NotContains]={regex:/^![(]?\*(.+)\*[)]?$/,operator:P.NotContains,example:"!*foo*",template:"!(*$0*)",exclude:true};a.rangeOperations[P.NotStartsWith]={regex:/^![(]?([^\\*].*)\*[)]?$/,operator:P.NotStartsWith,example:"!foo*",template:"!($0*)",exclude:true};a.rangeOperations[P.NotEndsWith]={regex:/^![(]?\*([^\*)]*)[)]?$/,operator:P.NotEndsWith,example:"!*foo",template:"!(*$0)",exclude:true};a.rangeOperations[P.NotLT]={regex:/^![(]?<([^=].*?)[)]?$/,operator:P.NotLT,example:"!<foo",template:"!(<$0)",exclude:true};a.rangeOperations[P.NotLE]={regex:/^![(]?<=(.+?)[)]?$/,operator:P.NotLE,example:"!<=foo",template:"!(<=$0)",exclude:true};a.rangeOperations[P.NotGT]={regex:/^![(]?>([^=].*?)[)]?$/,operator:P.NotGT,example:"!>foo",template:"!(>$0)",exclude:true};a.rangeOperations[P.NotGE]={regex:/^![(]?>=(.+?)[)]?$/,operator:P.NotGE,example:"!>=foo",template:"!(>=$0)",exclude:true};a.excludeOperationsMapping={};a.excludeOperationsMapping[P.NotEmpty]=P.Empty;a.excludeOperationsMapping[P.NotLT]=P.LT;a.excludeOperationsMapping[P.NotLE]=P.LE;a.excludeOperationsMapping[P.NotGT]=P.GT;a.excludeOperationsMapping[P.NotGE]=P.GE;a.excludeOperationsMapping[P.NotContains]=P.Contains;a.excludeOperationsMapping[P.NotStartsWith]=P.StartsWith;a.excludeOperationsMapping[P.NotEndsWith]=P.EndsWith;a.excludeOperationsMapping[P.NotBT]=P.BT;a.excludeOperationsMapping[P.NotEQ]=P.EQ;
a.prototype._init=function(){this.createOperation(a.rangeOperations[P.Empty]);this.createOperation(a.rangeOperations[P.BT]);this.createOperation(a.rangeOperations[P.EQ]);this.createOperation(a.rangeOperations[P.Contains]);this.createOperation(a.rangeOperations[P.StartsWith]);this.createOperation(a.rangeOperations[P.EndsWith]);this.createOperation(a.rangeOperations[P.LT]);this.createOperation(a.rangeOperations[P.LE]);this.createOperation(a.rangeOperations[P.GT]);this.createOperation(a.rangeOperations[P.GE]);this.createOperation(a.rangeOperations[P.NotEmpty]);this.createOperation(a.rangeOperations[P.NotBT]);this.createOperation(a.rangeOperations[P.NotEQ]);this.createOperation(a.rangeOperations[P.NotContains]);this.createOperation(a.rangeOperations[P.NotStartsWith]);this.createOperation(a.rangeOperations[P.NotEndsWith]);this.createOperation(a.rangeOperations[P.NotLT]);this.createOperation(a.rangeOperations[P.NotLE]);this.createOperation(a.rangeOperations[P.NotGT]);this.createOperation(a.rangeOperations[P.NotGE]);};
a.prototype.destroy=function(){if(this._oInput&&!this._oInput.bIsDestroyed){this._oInput.removeValidator(this._validator);if(this._aOrgValidators&&this._aOrgValidators.length>0){this._oInput.addValidator(this._aOrgValidators);}this._oInput=null;}this._aOrgValidators=null;this._aKeyFields=null;this._mTypeOperations=null;};
a.prototype.setDefaultOperation=function(o){this._sDefaultOperation=o;};
a.prototype.getDefaultOperation=function(){return this._sDefaultOperation;};
a.prototype.getOperations=function(){return this._mOperations;};
a.prototype.getOperation=function(o){return this._mOperations&&this._mOperations[o];};
a.prototype._getKeyFieldByLabel=function(s){var k;this._aKeyFields.some(function(K){if(K.label.toUpperCase()===s.toUpperCase()){k=K;}},this);return k;};
a.prototype.addKeyField=function(k){this._aKeyFields.push(k);};
a.prototype.getKeyFields=function(){return this._aKeyFields;};
a.prototype.addTypeOperations=function(t,o){this._mTypeOperations[t]=o;};
a.prototype.removeTypeOperations=function(t){delete this._mTypeOperations[t];};
a.prototype.getTypeOperations=function(t){return this._mTypeOperations[t]||this._mTypeOperations["default"];};
a.prototype.createOperation=function(o){var O=o.operator,e=o.example,r=o.regex,t=o.template,f=o.parse,E=o.exclude;if(!this._mOperations){this._mOperations={};}this._mOperations[O]={key:O,example:e,re:r,template:t,exclude:E,parser:this,match:function(s,k){var b=this.re.exec(s);if(b){var v=this.parse(s);if(k){v.forEach(function(c){if(k.hasOwnProperty("maxLength")&&k.maxLength>=0&&c.length>k.maxLength){b=null;}if(k.oType){try{c=k.oType.parseValue(c,"string");k.oType.validateValue(c);}catch(d){b=null;}}},this);}}return b;},parse:f||function(s){var v=this.re.exec(s);if(v){var b=v[1]||v[2];if(b&&b.trim){b=b.trim();}return[b];}return[];},getFilledTemplate:function(s,k){var v=this.parse(s);var b=[];var c="";for(var i=0;i<v.length;i++){b[i]=this.formatValue(v[i],false,k);}c=a._templateReplace(this.template,b);return c;},getConditionData:function(s,k){var b={};b.exclude=this.exclude;if(this.exclude){b.operation=a.excludeOperationsMapping[this.key];if(!b.operation){b.operation=this.key;}}else{b.operation=this.key;}var v=this.parse(s);for(var i=0;i<v.length;i++){b["value"+(i+1)]=this.formatValue(v[i],true,k);}return b;},formatValue:function(v,b,k){if(!k){return v;}if(k.hasOwnProperty("maxLength")){if(k.maxLength>=0){v=v.substring(0,k.maxLength);}}if(k.displayFormat){if(k.displayFormat==="UpperCase"){v=v.toUpperCase();}}if(k.oType){try{v=k.oType.parseValue(v,"string");k.oType.validateValue(v);}catch(c){return"ERROR";}if(!b){v=k.oType.formatValue(v,"string");}}return v;}};return this._mOperations[O];};
a.prototype.removeOperation=function(o){delete this._mOperations[o];};
a.prototype.removeAllOperations=function(){var o=Object.keys(this._mOperations);o.forEach(function(b){delete this._mOperations[b];},this);};
a.prototype.getTranslatedText=function(t,o,r){var s=o.key;t=t!=="default"?"_"+t.toUpperCase()+"_":"";if(t==="_STRING_"||t==="_BOOLEAN_"||t==="_NUMC_"){t="";}if(t==="_TIME_"){t="_DATE_";}if(!r){r="sap.m";}s="CONDITIONPANEL_OPTION"+t+s;var b=sap.ui.getCore().getLibraryResourceBundle(r).getText(s)||s;if(b.startsWith("CONDITIONPANEL_OPTION")){s="CONDITIONPANEL_OPTION"+o.key;b=sap.ui.getCore().getLibraryResourceBundle(r).getText(s);}return b;};
a.prototype.associateInput=function(i){this._oInput=i;this._aOrgValidators=this._oInput&&this._oInput.isA('sap.m.MultiInput')?this._oInput.getValidators().slice():[];this._oInput.removeAllValidators();this._oInput.addValidator(this._validator.bind(this));};
a.prototype._validator=function(b){if(this._aOrgValidators){var t;this._aOrgValidators.some(function(v){t=v(b);return t;},this);if(t){return t;}}if(b.text){return this._onValidate(b.text);}return null;};
a._templateReplace=function(t,v){return t.replace(/\$\d/g,function(m){return v[parseInt(m.substr(1))];});};
a.prototype._onValidate=function(t){var k=this._aKeyFields.length>0?this._aKeyFields[0]:null;if(this._oInput._getIsSuggestionPopupOpen&&this._oInput._getIsSuggestionPopupOpen()&&this._oInput._oSuggestionsTable&&this._oInput._oSuggestionsTable.getSelectedItem()){return null;}if(k){var b=/^\w+\:\s/.exec(t);if(b){var K=b[0];k=this._getKeyFieldByLabel(K.slice(0,K.indexOf(":")));if(k){t=t.slice(b[0].length).trim();}}}var c=k&&k.type||"default";var d=this.getTypeOperations(c);var C=function(o,t){if(o.match(t,k)){var r=o.getConditionData(t,k);r.keyField=k?k.key:null;if(k.hasOwnProperty("maxLength")&&k.maxLength===1){if([P.Contains,P.EndsWith,P.StartsWith].indexOf(o.key)!==-1){return;}}if(c==="numc"){if([P.Contains,P.EndsWith].indexOf(o.key)!==-1){r.value1=k.oType.formatValue(r.value1,"string");}}var s=(k&&k.label&&this._aKeyFields.length>1?k.label+": ":"")+o.getFilledTemplate(t,k);s=M.escapeSettingsValue(s);return new T({text:s,tooltip:s}).data("range",r);}return null;}.bind(this);var e;if(d.some(function(o){e=C(this._mOperations[o],t);return e;},this)){return e;}if(this._sDefaultOperation&&this._mOperations[this._sDefaultOperation]){t=a._templateReplace(this._mOperations[this._sDefaultOperation].template,[t]);return C(this._mOperations[this._sDefaultOperation],t);}return null;};
a._createRangeByText=function(t){var o=a._matchOperationFromText(t);if(!o){return{"exclude":false,"operation":P.EQ,"tokenText":null,"value1":t,"value2":null};}var c=o;var e=false;if(a.excludeOperationsMapping[o]){c=a.excludeOperationsMapping[o];e=true;}var m=c===P.BT?true:false;return a._getRangeByTextAndOperation(t,c,e,m);};
a._matchOperationFromText=function(t){var m=[];for(var o in a.rangeOperations){if(a.rangeOperations[o].regex.test(t)){m.push(o);}}if(m.length===0){return null;}if(m.length>1){if(t===F.getFormattedRangeText(V.Empty,null,null,false)&&m.indexOf(a.rangeOperations[P.Empty].operator)>-1){m=[a.rangeOperations[P.Empty].operator];}if(t===F.getFormattedRangeText(V.Empty,null,null,true)&&m.indexOf(a.rangeOperations[P.NotEmpty].operator)>-1){m=[a.rangeOperations[P.NotEmpty].operator];}if(m.indexOf(a.rangeOperations[P.NotContains].operator)>-1&&m.indexOf(a.rangeOperations[P.NotStartsWith].operator)>-1){return a.rangeOperations[P.NotContains].operator;}}return m[0];};
a._getRangeByTextAndOperation=function(t,o,e,m){var v=[];if(e&&t.startsWith("!(")&&t.endsWith(")")){t=t.slice(2,-1);}var s=a.rangeOperations[o].template;if(m){v=t.split("...");return{"exclude":e,"operation":o,"value1":v[0],"value2":v[1]};}else{var S=s.indexOf("$0");var E=S+2;if(E===s.length){t=t.slice(S);}else{E=(s.length-E);t=t.slice(S,-E);}return{"exclude":e,"operation":o,"value1":t,"value2":null};}};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartfield/AnnotationHelper',[],function(){"use strict";var A=function(){};
A.prototype.getText=function(p){return this._getObject("com.sap.vocabularies.Common.v1.Text/Path",p);};
A.prototype.getTextArrangement=function(p,e,I){var E=null,P=null;P=this._getObject("com.sap.vocabularies.Common.v1.Text",p);if(P){E=P["com.sap.vocabularies.UI.v1.TextArrangement"];}if(!E){E=this._getObject("com.sap.vocabularies.UI.v1.TextArrangement",p);}if(!E){E=this._getObject("com.sap.vocabularies.UI.v1.TextArrangement",e);}if(I&&!E&&P&&P.Path){for(var i=0;i<e.property.length;i++){if(e.property[i].name===P.Path){P=e.property[i];var t=this._getObject("com.sap.vocabularies.Common.v1.Text",P);if(t&&!t.navigationPath){E=t["com.sap.vocabularies.UI.v1.TextArrangement"];}break;}}}if(E&&E.EnumMember){if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"){return"descriptionAndId";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"idAndDescription";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"idOnly";}if(E.EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"descriptionOnly";}}return null;};
A.prototype.getUnit=function(p){return this._getObject("Org.OData.Measures.V1.ISOCurrency/Path",p)||this._getObject("Org.OData.Measures.V1.Unit/Path",p);};
A.prototype.getLabel=function(p){var l=this._getObject("com.sap.vocabularies.UI.v1.DataFieldWithUrl/Label/String",p);return l||this._getObject("com.sap.vocabularies.Common.v1.Label/String",p);};
A.prototype.isCurrency=function(e,E){return!!(E&&(E["sap:semantics"]==="currency-code"))||!!(e&&this._getObject("Org.OData.Measures.V1.ISOCurrency/Path",e));};
A.prototype.getQuickInfo=function(p){return this._getObject("com.sap.vocabularies.Common.v1.QuickInfo/String",p);};
A.prototype.isMasked=function(p){return(!!this._getObject("com.sap.vocabularies.Common.v1.Masked",p));};
A.prototype.isMultiLineText=function(p){return(!!this._getObject("com.sap.vocabularies.UI.v1.MultiLineText",p));};
A.prototype.isStaticMandatory=function(p){var f=this._getObject("com.sap.vocabularies.Common.v1.FieldControl",p);if(f&&f.EnumMember){return(f.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory");}return false;};
A.prototype.isNullable=function(p){var n=this._getObject("nullable",p);if(n){return(n==="true");}return true;};
A.prototype.isUpperCase=function(p){return(this._getObject("com.sap.vocabularies.Common.v1.IsUpperCase/Bool",p)==="true");};
A.prototype.canCreateEntitySet=function(e){return!(this._getObject("Org.OData.Capabilities.V1.InsertRestrictions/Insertable/Bool",e)==="false");};
A.prototype.canCreateProperty=function(p){var i=this._getObject("Org.OData.Core.V1.Immutable/Bool",p);var c=this._getObject("Org.OData.Core.V1.Computed/Bool",p);if(c){return c=="false";}if(i){return i=="true";}return true;};
A.prototype.canUpdateEntitySet=function(e){return!(this._getObject("Org.OData.Capabilities.V1.UpdateRestrictions/Updatable/Bool",e)==="false");};
A.prototype.getUpdateEntitySetPath=function(e){return this._getObject("Org.OData.Capabilities.V1.UpdateRestrictions/Updatable/Path",e);};
A.prototype.canUpdateProperty=function(p){var n=(this._getObject("Org.OData.Core.V1.Computed/Bool",p)==="true")||(this._getObject("Org.OData.Core.V1.Immutable/Bool",p)==="true")||(this._getObject("com.sap.vocabularies.Common.v1.FieldControl/EnumMember",p)==="com.sap.vocabularies.Common.v1.FieldControlType/ReadOnly");return!n;};
A.prototype.getFieldControlPath=function(p){return this._getObject("com.sap.vocabularies.Common.v1.FieldControl/Path",p);};
A.prototype.getUIHiddenPath=function(p){return this._getObject("com.sap.vocabularies.UI.v1.Hidden/Path",p);};
A.prototype.getVisible=function(p){var v=this._getObject("com.sap.vocabularies.Common.v1.FieldControl/EnumMember",p);if(v==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden"){return"false";}var h=this._getObject("com.sap.vocabularies.UI.v1.Hidden",p);if(h&&h.Bool&&!(h.Bool=="false")){return"false";}return"true";};
A.prototype.getImportanceAnnotation=function(p){var i,I=this._getObject("com.sap.vocabularies.UI.v1.Importance",p);if(I){i=I.EnumMember;}switch(i){case"com.sap.vocabularies.UI.v1.ImportanceType/High":return"High";case"com.sap.vocabularies.UI.v1.ImportanceType/Medium":return"Medium";default:return"Low";}};
A.prototype._getObject=function(p,o){var n=o,P=p.split("/"),i=0;while(n&&P[i]){n=n[P[i]];i++;}return n;};
A.prototype.destroy=function(){};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartfield/BindingUtil',["sap/ui/model/odata/AnnotationHelper","sap/ui/base/BindingParser"],function(A,B){"use strict";var a=function(){};
a.prototype.correctPath=function(p){var e,r=/\((.+)\)*/,m=r.exec(p);if(m){e=p.replace(m[0],"");}else{e=p||"";}return e.replace("/","");};
a.prototype.getNavigationProperties=function(c){var o,b,r={};b=c.getBindingContext();if(b&&b.sPath){r.paths=b.sPath.split("/");}o=c.getObjectBinding();if(o&&o.sPath){r.objectBinding=o.sPath;if(r.paths){r.paths.push(o.sPath);}else{r.paths=[o.sPath];}}if(!r.paths){r.paths=[];}return r;};
a.prototype.getBindingParts=function(b,p,I){var l=0,i,P,o;if(b&&b.parts){l=b.parts.length;}for(i=0;i<l;i++){o="";P=b.parts[i];if(P.model){o=o+P.model+">";}o=o+P.path;p.push(o);I.length++;}};
a.prototype.toBinding=function(I){var o={},n,p,i,l,N={model:true,formatter:true,mode:true,path:true};if(I){if(I.parts&&I.parts.length){l=I.parts.length;o.parts=[];}for(i=0;i<l;i++){p=I.parts[i];o.parts.push(p);}for(n in N){if(I[n]){o[n]=I[n];}}return o;}return null;};
a.prototype.toBindingPath=function(I){var o,O="",p,i,l;o=this.toBinding(I);if(o){if(o.model){O=o.model+">";}if(o.path){O=O+o.path;}else if(o.parts&&o.parts.length>0){l=o.parts.length;for(i=0;i<l;i++){p=o.parts[i];if(p.model){O=O+p.model+">";}O=O+p.path;}}}return O;};
a.prototype.fromFormatter=function(m,f,p){var i,l,P,b={model:m,formatter:f.formatter};P=f.path();l=P.length;if(l>0){b.parts=P;if(p){for(i=0;i<l;i++){p.push(P[i]);}}}else{b.path="";}return b;};
a.prototype.executeODataBindingExpression=function(b,o){var i,v,V,p,h,H="";if(b&&o){h=A.format(o,b);H=h;p=B.complexParser(h,o);V=[];if(p){if(p.formatter){for(i=0;i<p.parts.length;i++){v=o.getProperty(p.parts[i].path,"value");V.push(v);}H=p.formatter.apply(null,V);}else{H=o.getProperty(p.path,"value");}}}return H;};
a.prototype.destroy=function(){};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ControlFactoryBase',["sap/ui/base/Object","sap/ui/core/library","sap/ui/comp/library","sap/ui/model/BindingMode","sap/ui/comp/util/FormatUtil","sap/ui/comp/providers/ValueHelpProvider","sap/ui/comp/providers/ValueListProvider","sap/ui/comp/smartfield/BindingUtil","sap/ui/comp/odata/MetadataAnalyser","sap/m/HBox","sap/base/Log","sap/base/strings/capitalize"],function(B,c,l,a,F,V,b,d,M,H,L,e){"use strict";var C=l.smartfield.ControlContextType;var f=c.ValueState;
var g=B.extend("sap.ui.comp.smartfield.ControlFactoryBase",{constructor:function(m,p){B.apply(this,arguments);this.sName="ControlFactoryBase";this._oModel=m;this._oParent=p;this._oBinding=new d();this._aProviders=[];this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}});
g.prototype.createControl=function(h){var m,o;m=this._getCreator(h);if(m){o=this[m]();this._addAriaLabelledBy(o);this._addAriaDescribedBy(o);if(o&&o.onCreate){this[o.onCreate](o.control,o.params);}}return o;};
g.prototype.updateControl=function(){var i,m,s=this._oParent,o=s.data("configdata");if(o&&o.configdata){m=s.getMode();i=s.getFirstInnerControl();if(o.configdata.onText&&(m==="display"||m==="display_uom")){o.configdata.onText(i);}else if(o.configdata.onInput&&m==="edit"){o.configdata.onInput(i);}}};
g.prototype._addAriaLabelledBy=function(o){var t=this._getTargetControlForAccAttributes(o),p=this._oParent.getAriaLabelledBy();if(t&&t.addAriaLabelledBy&&p.length>0){t.removeAllAriaLabelledBy();p.forEach(function(A){t.addAriaLabelledBy(A);});}};
g.prototype._addAriaDescribedBy=function(o){var t=this._getTargetControlForAccAttributes(o),p=this._oParent.getAriaDescribedBy();if(t&&t.addAriaDescribedBy&&p.length>0){t.removeAllAriaDescribedBy();p.forEach(function(A){t.addAriaDescribedBy(A);});}};
g.prototype._getTargetControlForAccAttributes=function(o){var t,p=this._oParent.getControlContext();if((p===C.None)||(p===C.Form)||(p===C.SmartFormGrid)){if(o){t=o.control;if(t instanceof H){if(t.getItems().length>0){t=t.getItems()[0];}}}}return t;};
g.prototype.addValidations=function(o,m){var s,E,t=this;s=function(S,h){var i,j,k=h.getSource();if(k){if(k.setValueState){k.setValueState(S);}j=h.getParameter("exception");if(j){i=j.message;}if(!i){i=h.getParameter("message");}if(k.setValueStateText){k.setValueStateText(i);}}if(m){t._oParent[m](S===f.Error);}};E=function(h){s(f.Error,h);};o.attachFormatError(E);o.attachParseError(E);o.attachValidationError(E);o.attachValidationSuccess(function(h){t._oParent.onValidation(h);s(f.None,h);});};
g.prototype._getDisplayBehaviourConfiguration=function(D){var s=null,i=this._oParent._getComputedTextInEditModeSource()==="ValueListNoValidation";var o=this._oParent.getConfiguration();if(o){s=o.getDisplayBehaviour();}if(!s&&this._oMetaData&&this._oMetaData.entityType){s=this._oHelper.oAnnotation.getTextArrangement(this._oMetaData.property.property,this._oMetaData.entityType,i);}if(!s){s=this._oParent.data(D?D:"defaultInputFieldDisplayBehaviour");}return s;};
g.prototype._getPreventInitialDataFetchInVHDialog=function(E){var o=this._oParent.getConfiguration();if(o&&!o.isPropertyInitial("preventInitialDataFetchInValueHelpDialog")){return o.getPreventInitialDataFetchInValueHelpDialog();}if(M.isValueList(E)&&E["com.sap.vocabularies.Common.v1.ValueList"]&&E["com.sap.vocabularies.Common.v1.ValueList"].FetchValues){return E["com.sap.vocabularies.Common.v1.ValueList"].FetchValues.Int!=="1";}return false;};
g.prototype._formatDisplayBehaviour=function(D,k,s){var h=this._getDisplayBehaviourConfiguration(D);if(D==="defaultCheckBoxDisplayBehaviour"){return this._getFormattedExpressionFromDisplayBehaviour(h,k);}if(D==="defaultComboBoxReadOnlyDisplayBehaviour"&&!h){h="descriptionAndId";}return F.getFormattedExpressionFromDisplayBehaviour(h||"idOnly",k,s);};
g.prototype._getFormattedExpressionFromDisplayBehaviour=function(D,v){var k="";switch(D){case"OnOff":k=v?"SMARTFIELD_CB_ON":"SMARTFIELD_CB_OFF";break;case"TrueFalse":k=v?"SMARTFIELD_CB_TRUE":"SMARTFIELD_CB_FALSE";break;default:k=v?"SMARTFIELD_CB_YES":"SMARTFIELD_CB_NO";break;}return this._oRb.getText(k);};
g.prototype.shouldCreateValueHelpForControl=function(o){if(!o){return false;}var p=this._oParent;return p&&((p.getMode()==="edit")||(o.getMetadata().getName()==="sap.ui.comp.smartfield.DisplayComboBox"));};
g.prototype.getDropdownItemKeyType=function(){};
g.prototype.getValueStateBindingInfoForRecommendationStateAnnotation=function(){};
g.prototype.createValueHelp=function(s){var v,E=s.edmProperty,o=s.valueHelp;if(o.annotation&&(E["sap:value-list"]||E["com.sap.vocabularies.Common.v1.ValueList"])){var D=o.displayBehaviour||this._getDisplayBehaviourConfiguration("defaultDropDownDisplayBehaviour"),h=this._oParent.data("dateFormatSettings"),p=this._getPreventInitialDataFetchInVHDialog(E);if(typeof h==="string"){try{h=JSON.parse(h);}catch(i){}}var A,j;if(typeof o.annotation==="string"){j=o.annotation;}else if(o&&typeof o.annotation==="object"){A=o.analyser.getValueListAnnotationForFunctionImport({"":o.annotation},E.name).primaryValueListAnnotation;}var k=s.control,m=s.model,O=s.onValueListChange;if(!o.noDialog){if(k.setFilterSuggests){k.setFilterSuggests(false);}var n=new V({context:"SmartField",selectedODataRowHandler:this._selectedODataRowHandler.bind(this),fieldName:E.name,control:k,model:m,dateFormatSettings:h,displayBehaviour:D,loadAnnotation:true,fullyQualifiedFieldName:j,metadataAnalyser:o.analyser,annotation:A,title:o.dialogtitle,preventInitialDataFetchInValueHelpDialog:p,supportMultiSelect:!!o.supportMultiSelect,supportRanges:!!o.supportRanges,takeOverInputValue:true,type:o.type,maxLength:E.maxLength});if(O){n.attachValueListChanged(O);}this._aProviders.push(n);if(k.setShowValueHelp){k.setShowValueHelp(true);}}var q=true,r=true;if(this._oParent._getHistoryEnabled){q=this._oParent._getHistoryEnabled();r=this._oParent.isPropertyInitial("historyEnabled");}if(!o.noTypeAhead||!k.isA("sap.m.Input")){v={control:k,model:m,dateFormatSettings:h,displayBehaviour:D,fieldViewMetadata:E,loadAnnotation:true,fullyQualifiedFieldName:j,metadataAnalyser:o.analyser,annotation:A,aggregation:o.aggregation,typeAheadEnabled:!o.noTypeAhead,dropdownItemKeyType:this.getDropdownItemKeyType(k),maxLength:E.maxLength,fieldHistoryEnabled:q,fieldHistoryEnabledInitial:r};var t=new b(this.getValueListProviderConfiguration(v));if(!o.noTypeAhead){if(k.setShowSuggestion){k.setShowSuggestion(true);}}if(O){t.attachValueListChanged(O);}this._aProviders.push(t);}}};
g.prototype.getValueListProviderConfiguration=function(s){return{context:"SmartField",selectedODataRowHandler:this._selectedODataRowHandler.bind(this),control:s.control,model:s.model,dateFormatSettings:s.dateFormatSettings,displayBehaviour:s.displayBehaviour,fieldViewMetadata:s.fieldViewMetadata,loadAnnotation:true,fullyQualifiedFieldName:s.fullyQualifiedFieldName,metadataAnalyser:s.metadataAnalyser,annotation:s.annotation,aggregation:s.aggregation,typeAheadEnabled:s.typeAheadEnabled,dropdownItemKeyType:s.dropdownItemKeyType,maxLength:s.maxLength,fieldHistoryEnabled:s.fieldHistoryEnabled,fieldHistoryEnabledInitial:s.fieldHistoryEnabledInitial};};
g.prototype._selectedODataRowHandler=function(v,D){if(this.oTextArrangementDelegate){this.oTextArrangementDelegate.setDataForNextDescriptionRequest(v,D);}};
g.prototype.getAttribute=function(n){var i=this._oParent.getBindingInfo(n);if(i){return this._oBinding.toBindingPath(i);}return this._oParent["get"+n.substring(0,1).toUpperCase()+n.substring(1)]();};
g.prototype.getCustomDataConfiguration=function(){var o=this._oParent.data("configdata");return o&&o.configdata?o.configdata:null;};
g.prototype.createAttributes=function(A,t,n,E){var h=this,m={};for(var p in n){if(n.hasOwnProperty(p)){var o=this._oParent.getBindingInfo(p);if(o){m[p]=this._oBinding.toBinding(o);}else if((p==="valueState")&&this._oParent.isPropertyInitial("valueState")){o=this.getValueStateBindingInfoForRecommendationStateAnnotation();if(o){m[p]=o;}else{m[p]=this._oParent["get"+e(p)]();}}else{m[p]=this._oParent["get"+e(p)]();}}}if(A){m[A]={model:this._oMetaData.model,path:this._oMetaData.path,type:t?this._oTypes.getType(t):null,mode:this._oParent.getBindingMode("value")};var i=this.getCustomDataConfiguration();if(i&&i.currency){m[A].mode=a.OneWay;}}if(E){m[E.event]=function(j){try{var P=j.getParameters();var k={value:P[E.parameter],newValue:P[E.parameter]};h._oParent.fireChange(k);}catch(q){L.warning(q);}};}return m;};
g.prototype.mapBindings=function(A,N){var n,i;for(n in N){i=this._oParent.getBindingInfo(n);if(i){A[N[n]]=this._oBinding.toBinding(i);}else{A[N[n]]=this._oParent["get"+n.substring(0,1).toUpperCase()+n.substring(1)]();}}};
g.prototype.getFormatSettings=function(s){var m=null,h,o,i;if(s){m=this._oParent.data(s);if(!m){h=this._oParent.getCustomData();if(h){i=h.length;while(i--){o=h[i];if(o.getKey()===s){m=o.getValue();break;}}}}if(m&&typeof(m)==="string"){try{m=JSON.parse(m);}catch(j){return null;}}}return m;};
g.prototype.getValueListProvider=function(){return this._aProviders.find(function(p){return p.isA("sap.ui.comp.providers.ValueListProvider");});};
g.prototype.destroyValueHelp=function(){this._aProviders.forEach(function(p){p.destroy();});this._aProviders=[];};
g.prototype.destroy=function(){this.destroyValueHelp();if(this._oBinding){this._oBinding.destroy();}this._oBinding=null;this._oParent=null;this._oModel=null;this._oRb=null;};
return g;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ControlProposal',["sap/ui/comp/library","sap/ui/core/Element"],function(l,E){"use strict";
var C=E.extend("sap.ui.comp.smartfield.ControlProposal",{metadata:{library:"sap.ui.comp",properties:{controlType:{type:"sap.ui.comp.smartfield.ControlProposalType",group:"Misc",defaultValue:sap.ui.comp.smartfield.ControlProposalType.None}},aggregations:{objectStatus:{type:"sap.ui.comp.smartfield.ObjectStatus",multiple:false}}}});
return C;});
sap.ui.predefine('sap/ui/comp/smartfield/FieldControl',["sap/ui/comp/smartfield/BindingUtil","sap/ui/model/ParseException","sap/base/strings/capitalize","sap/base/util/isPlainObject"],function(B,P,c,a){"use strict";var F=function(p,h){this._bIsDestroyed=false;this._oBinding=new B();this._oStoredProperties={};this._bVisibleSet=false;this._bEditableSet=false;this._bMandatorySet=false;this._bUomEditableSet=false;this._oStoredBindings={};this._oParent=p;this._oHelper=h;this._oAnnotation=h.oAnnotation;};
F.prototype.getPropertyNames=function(n){if(n){return["editable","visible"];}return["editable","visible","mandatory"];};
F.prototype.getControlFormatters=function(m,p){var M,l,n,r={};if(m&&p){l=p.length;while(l--){n=p[l];M="_get"+c(n);if(this[M]){r[n]=this[M](m,this._oParent.getBindingInfo(n));}}}return r;};
F.prototype._getEditable=function(m,b,p){if(p===undefined){p="editable";}var d,i=-1,e=-1,f=-1,t=this;var o={length:0};if(p==="uomEditable"){this._bUomEditableSet=true;}else{this._bEditableSet=true;}if(!b){d=this._oParent["get"+c(p)]();this._oStoredProperties[p]=d;this._oStoredBindings.editable=null;}else if(this._oStoredBindings.editable===undefined){this._oStoredBindings.editable=b;}return{path:function(){var g=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getFieldControlPath(m.property.property);if(s){g.push(t._toPath(m,s));i=l;l++;}if(m.entitySet["sap:updatable-path"]){if(m.toRoleAssociationEndMultiplicity==="1"){g.push(t._toPath(m,m.entitySet["sap:updatable-path"]));}else{g.push(m.entitySet["sap:updatable-path"]);}e=l;l++;}if(b){f=l;t._oBinding.getBindingParts(b,g,o);l=l+o.length;}if(l>0){return g;}return[""];},formatter:function z(v,g,h,j){if(t._bIsDestroyed){return false;}if(!t._oAnnotation){return false;}var s=this||t._oParent;var k;if(s&&(typeof s.getBindingContext==="function")){k=s.getBindingContext();}var E=k&&k.getObject(),l=E&&E.__metadata,n=!!(l&&l.created),q=m.property&&m.property.property;if(E&&q){if(n){if(!t._getCreatableStatic(m)){return false;}}else if(!t._getUpdatableStatic(m)){return false;}}var r=[];if(i>-1){r.push(arguments[i]!==1);}if(e>-1&&(!E||!l||!n)){r.push(!!arguments[e]);}if(f>-1){if(b.formatter){r.push(t._execFormatter(b.formatter,arguments,f,o.length));}else{r.push(!!arguments[f]);}}if(r.length==0){var u=s&&s.getBinding(p),w=s&&s.getBindingPath(p),x=w==="",y=!!u&&u.isInitial(),V=(v==null);if(y&&V&&x){}else if(!y&&V){d=true;}else if(!y&&!V&&x&&!a(v)){d=v;}else{d=t._oParent["get"+c(p)]();}r.push(d);}return t._compare(r,false,true);}};};
F.prototype._execFormatter=function(f,A,s,l){var b=[],i;if(s>-1&&l>-1){for(i=0;i<l;i++){b.push(A[s+i]);}}return f.apply(this._oParent,b);};
F.prototype._getCreatableStatic=function(m){return(this._oAnnotation.canCreateEntitySet(m.entitySet)&&this._oAnnotation.canCreateProperty(m.property.property));};
F.prototype._getUpdatableStatic=function(m){return(this._oAnnotation.canUpdateEntitySet(m.entitySet)&&this._oAnnotation.canUpdateProperty(m.property.property));};
F.prototype._compare=function(A,p,d){var i,l=A.length;for(i=0;i<l;i++){if(A[i]===p){return p;}}return d;};
F.prototype._getVisible=function(m,b,p){if(p===undefined){p="visible";}var d,i=-1,e=-1,t=this;var o={length:0};this._bVisibleSet=true;if(!b){d=this._oParent["get"+c(p)]();this._oStoredProperties[p]=d;this._oStoredBindings.visible=null;}else if(this._oStoredBindings.visible===undefined){this._oStoredBindings.visible=b;}return{path:function(){var f=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getUIHiddenPath(m.property.property);if(!s){s=t._oAnnotation.getFieldControlPath(m.property.property);}if(s){f.push(t._toPath(m,s));e=l;l++;}if(b){i=l;t._oBinding.getBindingParts(b,f,o);l=l+o.length;}if(l>0){return f;}return[""];},formatter:function q(v,f){if(t._bIsDestroyed){return false;}if(!t._oAnnotation){return false;}var s=this||t._oParent;var E=m.property&&m.property.property;if(E&&(t._oAnnotation.getVisible(E)==="false")||(t._oAnnotation.getUIHiddenPath(E)&&v===true)){return false;}var V=[];if(e>-1){V.push(arguments[e]!==0);s._fieldControlValue=v;}if(i>-1){if(b.formatter){V.push(t._execFormatter(b.formatter,arguments,i,o.length));}else{V.push(!!arguments[i]);}}if(V.length==0){var g=s&&s.getBinding(p),h=s&&s.getBindingPath(p),j=h==="",k=!!g&&g.isInitial(),l=(v==null),n;if(k&&l&&j){n=d;}else if(!k&&l){n=true;}else if(!k&&!l&&j&&!a(v)){n=v;}else{n=t._oParent["get"+c(p)]();}V.push(n);}return t._compare(V,false,true);}};};
F.prototype._getMandatory=function(m,b){var i=-1,p=-1,t=this;var o={length:0};this._bMandatorySet=true;if(!b){this._oStoredProperties.mandatory=this._oParent.getMandatory();this._oStoredBindings.mandatory=null;}else if(this._oStoredBindings.mandatory===undefined){this._oStoredBindings.mandatory=b;}return{path:function(){var d=[],s,l=0;if(!m.property||!m.property.property){return[""];}s=t._oAnnotation.getFieldControlPath(m.property.property);if(s){d.push(t._toPath(m,s));p=l;l++;}if(b){i=l;t._oBinding.getBindingParts(b,d,o);l=l+o.length;}if(l>0){return d;}return[""];},formatter:function h(d,e){if(t._bIsDestroyed){return true;}var E=m.property&&m.property.property,M=[];if(E){if((E.nullable==="false")||(t._oAnnotation&&t._oAnnotation.isStaticMandatory(E))){M.push(true);}else if(E.nullable){M.push(false);}}var f=p>-1;if(f){M.push(arguments[p]===7);}var g=i>-1;if(g){if(b.formatter){M.push(t._execFormatter(b.formatter,arguments,i,o.length));}else{M.push(!!arguments[i]);}}if((M.length===0)||((E.nullable==="true")&&!f&&!g)){M.push(t._oParent.getMandatory());}return t._compare(M,true,false);}};};
F.prototype._toPath=function(m,p){if(m.property.complex){return m.path.replace(m.property.property.name,p);}if(m.navigationPath){return m.navigationPath+"/"+p;}return p;};
F.prototype.getMandatoryCheck=function(p){if(p){switch(p.property.type){case"Edm.DateTimeOffset":case"Edm.DateTime":case"Edm.Time":case"Edm.String":case"Edm.Decimal":case"Edm.Double":case"Edm.Float":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":case"Edm.Byte":case"Edm.SByte":return function(v,s){var e=(v===""||v==null);if(e){var m=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE");if(this._oAnnotation&&!this._oAnnotation.isNullable(p.property)){throw new P(m);}if(this._oParent.getClientSideMandatoryCheck()&&this._oParent.getMandatory()){throw new P(m);}}}.bind(this);}}};
F.prototype.getUOMEditState=function(m){var n,u,U,l=0,b;b=this._oParent.getBindingInfo("editable");n=this._getEditable(m,b);U={model:m.model,path:this._oHelper.getUOMPath(m),entitySet:m.entitySet,entityType:m.entityType,property:{property:m.annotations.uom.property,complex:m.property.complex,typePath:this._oHelper.getUOMTypePath(m)}};u=this._getEditable(U,this._oParent.getBindingInfo("uomEditable"),"uomEditable");return{path:function(){var N=n.path(),d=u.path();if(N[0]===""&&d===""){return[""];}l=N.length;return N.concat(d);},formatter:function h(v,p,d,e){var A=[],i,N,f,g=arguments.length;for(i=0;i<l;i++){A.push(arguments[i]);}N=n.formatter.apply(null,A);A=[];for(i=0;i<g;i++){A.push(arguments[i]);}for(i=0;i<l;i++){A.shift();}f=u.formatter.apply(null,A);if(!f&&!N){return 0;}return 1;}};};
F.prototype.hasUomEditState=function(m){var p;if(m&&m.annotations&&m.annotations.uom){p=this._oParent.getControlProposal();if(p){if(p.getControlType()==="ObjectNumber"){return true;}if(p.getObjectStatus()){return true;}}return this._oParent.getProposedControl()==="ObjectNumber";}return false;};
F.prototype.bindProperties=function(s){var d={propertiesNames:this.getPropertyNames()};s=Object.assign(d,s);var p=s.propertiesNames,m=s.metadata;if(p.length){var f=this.getControlFormatters(m,p);for(var b in f){var o=this._oBinding.fromFormatter(m.model,f[b]);this._oParent.bindProperty(b,o);}}};
F.prototype.destroy=function(){if(this._oBinding){this._oBinding.destroy();this._oBinding=null;}this._oAnnotation=null;var s=this._oParent;if(s&&!s._bInDestroy){var S=true;for(var p in this._oStoredProperties){s.unbindProperty(p,S);var m="set"+c(p),M=s[m];if(typeof M==="function"){M.call(s,this._oStoredProperties[p]);}}if(this._oStoredProperties){if(!this._oStoredProperties.editable&&this._bEditableSet){s.unbindProperty("editable");}if(!this._oStoredProperties.visible&&this._bVisibleSet){s.unbindProperty("visible");}if(!this._oStoredProperties.mandatory&&this._bMandatorySet){s.unbindProperty("mandatory");}if(!this._oStoredProperties.uomEditable&&this._bUomEditableSet){s.unbindProperty("uomEditable");}}if(this._oStoredBindings){if(this._oStoredBindings.editable){s.bindProperty("editable",this._oStoredBindings.editable);}if(this._oStoredBindings.visible){s.bindProperty("visible",this._oStoredBindings.visible);}if(this._oStoredBindings.mandatory){s.bindProperty("mandatory",this._oStoredBindings.mandatory);}if(this._oStoredBindings.uomEditable){s.bindProperty("uomEditable",this._oStoredBindings.uomEditable);}}}this._oStoredProperties=null;this._oStoredBindings=null;this._oParent=null;this._oHelper=null;this._bIsDestroyed=true;this._bEditableSet=false;this._bMandatorySet=false;this._bVisibleSet=false;this._bUomEditableSet=false;};
return F;},true);
sap.ui.predefine('sap/ui/comp/smartfield/JSONControlFactory',["sap/m/CheckBox","sap/m/ComboBox","sap/m/DatePicker","sap/m/Input","sap/m/Text","sap/ui/comp/smartfield/ControlFactoryBase","sap/ui/comp/smartfield/JSONTypes"],function(C,a,D,I,T,b,J){"use strict";
var c=b.extend("sap.ui.comp.smartfield.JSONControlFactory",{constructor:function(m,p,M){b.apply(this,[m,p]);this.sName="JSONControlFactory";this._oMetaData=M;this._oTypes=new J();}});
c.prototype._getCreator=function(){var m={"Boolean":"_createBoolean","Date":"_createDate","DateTime":"_createString","Float":"_createString","Integer":"_createString","String":"_createString"};if(!this._oParent.getEditable()||!this._oParent.getEnabled()){if(this._oParent.getJsontype()==="Boolean"){return"_createBoolean";}return"_createDisplay";}return m[this._oParent.getJsontype()]||"_createString";};
c.prototype._createString=function(){var n,N,m={width:true,textAlign:true,placeholder:true,name:true,maxLength:true};n=!this._oParent.getShowValueHelp();N=!this._oParent.getShowSuggestion();if(n){if(((this._oParent.data("controlType")==="dropDownList"))){return this._createComboBox({annotation:null,noDialog:n,noTypeAhead:true});}}return{control:new I(this.createAttributes("value",this._oParent.getJsontype(),m,{event:"change",parameter:"value"})),onCreate:"_onCreate",noDialog:n,noTypeAhead:N,params:{getValue:"getValue"}};};
c.prototype._createComboBox=function(v){var n={width:true,textAlign:true,placeholder:true,name:true};return{control:new a(this.createAttributes("value",this._oParent.getJsontype(),n,{event:"selectionChange",parameter:"selectedItem"})),onCreate:"_onCreate",params:{valuehelp:v,getValue:"getValue"}};};
c.prototype._createBoolean=function(){var A=this.createAttributes("selected",this._oParent.getJsontype(),{},{event:"select",parameter:"selected"});A.enabled=this._oParent.getEditable()&&this._oParent.getEnabled();return{control:new C(A),onCreate:"_onCreate",params:{getValue:"getSelected"}};};
c.prototype._createDate=function(){var n={width:true,textAlign:true,placeholder:true,name:true};return{control:new D(this.createAttributes("value",this._oParent.getJsontype(),n,{event:"change",parameter:"value"})),onCreate:"_onCreate",params:{getValue:"getValue"}};};
c.prototype._createDisplay=function(){var n={width:true,textAlign:true};return{control:new T(this.createAttributes("text",this._oParent.getJsontype(),n))};};
c.prototype._onCreate=function(o,p){var g;this.addValidations(o,"setSimpleClientError");if(p.getValue){g=p.getValue;p.getValue=function(){return o[g]();};}};
c.prototype.destroy=function(){this._oTypes.destroy();this._oTypes=null;this._oMetaData=null;b.prototype.destroy.apply(this,[]);};
return c;},true);
sap.ui.predefine('sap/ui/comp/smartfield/JSONTypes',["sap/ui/model/type/Boolean","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/type/String"],function(B,D,F,I,S){"use strict";var J=function(){};
J.prototype.getType=function(t){if(t){switch(t){case"Boolean":return new B();case"Date":return new D();case"Float":return new F();case"Integer":return new I();default:return new S();}}return null;};
J.prototype.destroy=function(){};
return J;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataControlFactory',["sap/ui/core/library","sap/m/library","sap/ui/comp/library","sap/ui/model/BindingMode","sap/m/TextArea","sap/m/Link","sap/m/CheckBox","sap/m/ComboBox","sap/ui/comp/smartfield/ComboBox","sap/m/DatePicker","sap/m/DateTimePicker","sap/m/FlexItemData","sap/m/HBox","sap/m/Input","sap/m/Select","sap/m/Text","sap/m/ExpandableText","sap/ui/core/Renderer","sap/ui/comp/navpopover/SmartLink","./ControlFactoryBase","./FieldControl","./ODataControlSelector","./ODataHelper","./ODataTypes","./TextArrangementDelegate","sap/m/ObjectNumber","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/TimePicker","sap/ui/comp/navpopover/SemanticObjectController","sap/ui/comp/util/FormatUtil","sap/ui/comp/smartfield/Configuration","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/navpopover/NavigationPopoverHandler","sap/ui/core/InvisibleText","sap/base/Log","sap/base/assert","sap/base/security/URLListValidator","sap/base/util/merge","sap/base/strings/capitalize","sap/base/util/deepClone",'sap/base/strings/whitespaceReplacer'],function(c,m,l,B,T,L,C,a,b,D,d,F,H,I,S,f,E,R,g,h,j,O,k,o,p,q,r,s,t,u,v,w,M,x,N,y,z,A,U,G,J,K,P){"use strict";var V=c.ValueState;var Q=c.TextAlign;var W=m.InputType;var X=m.FlexJustifyContent;var Y=l.smartfield.CriticalityRepresentationType;var Z=l.smartfield.ControlContextType;var $=c.TextDirection;var _=m.FlexAlignContent;var a1=m.EmptyIndicatorMode;var b1;
var c1=h.extend("sap.ui.comp.smartfield.ODataControlFactory",{constructor:function(e,i,n){h.call(this,e,i);this.sName="ODataControlFactory";this._oMetaData={annotations:{}};this._oMeta=n;this._oHelper=new k(e,this._oBinding);this._oFieldControl=new j(i,this._oHelper);this._oTypes=new o(i);this._oSelector=new O(this._oMetaData,i,this._oTypes);this.oTextArrangementDelegate=new p(this);this._bInitialized=false;this.bPending=false;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oMeasureField=null;b1=sap.ui.require("sap/ui/comp/smartfield/SmartField");if(!b1){throw new Error("SmartField module not loaded for "+this);}}});
c1.prototype._init=function(e){this._oMetaData.model=e.model;this._oMetaData.path=e.path;this._oMetaData.entitySet=e.entitySetObject||this._oHelper.oMeta.getODataEntitySet(e.entitySet);if(this._oHelper.oMeta){A(this._oMetaData.entitySet,'The entity set named "'+e.entitySet+'" was not found in the "'+this._oHelper.oMeta.getODataEntityContainer().name+'" entity container of the service metadata document. - '+this.getMetadata().getName());}this._oMetaData.entityType=e.entityType||this._oHelper.oMeta.getODataEntityType(this._oMetaData.entitySet.entityType);this._oMetaData.navigationPath=e.navigationPath||null;if(this._oModel){this._oHelper.checkNavigationProperty(this._oMetaData,this._oParent);this._oHelper.getProperty(this._oMetaData);var i=this.getEdmProperty();A(!!i,'The EDM property "'+e.path+'" was not found in the "'+this._oMetaData.entityType.namespace+"."+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(i){this._oMetaData.annotations.text=this._oHelper.getTextProperty2(this._oMetaData);this._oMetaData.annotations.uom=this._oHelper.getUnitOfMeasure2(this._oMetaData);this._oHelper.getValueListData(this._oMetaData);this._oMetaData.annotations.lineitem=this._oHelper.getAnalyzer().getLineItemAnnotation(this._oMetaData.entitySet.entityType);this._oHelper.getUOMValueListAnnotationPath(this._oMetaData);this._oMetaData.annotations.semantic=M.getSemanticObjectsFromProperty(i);this._oMetaData.annotations.semanticKeys=this._oHelper.getAnalyzer().getSemanticKeyAnnotation(this._oMetaData.entitySet.entityType);if(this._oMetaData.annotations.uom){this._oMetaData.annotations.uom.annotations={};this._oHelper.getValueListData(this._oMetaData.annotations.uom);}this._oHelper.getUOMTextAnnotation(this._oMetaData);if(this._oParent&&this._oParent.getExpandNavigationProperties()){var n=this._oParent.getBindingContext(),d1=n&&n.getObject(),e1=d1&&d1.__metadata.created;if(!e1){var f1=this._oHelper.getAutoExpandProperties(i);if(f1.length>0){this._oParent.bindElement({path:"",parameters:{expand:f1,select:f1}});}}}}}else{this._oMetaData.modelObject=e.modelObject;this._oMetaData.property=e.property;this._oMetaData.property.valueListAnnotation=null;this._oMetaData.property.valueListKeyProperty=null;this._oMetaData.property.valueListEntitySet=null;this._oMetaData.property.valueListEntityType=null;this._oMetaData.annotations.text=e.annotations.text;this._oMetaData.annotations.uom=e.annotations.uom;if(this._oMetaData.annotations.uom&&!this._oMetaData.annotations.uom.annotations){this._oMetaData.annotations.uom.annotations={};}this._oMetaData.annotations.valuelist=e.annotations.valuelist;this._oMetaData.annotations.valuelistType=e.annotations.valuelistType;this._oMetaData.annotations.lineitem=e.annotations.lineitem;this._oMetaData.annotations.semantic=e.annotations.semantic;this._oMetaData.annotations.valuelistuom=e.annotations.valuelistuom;}};
c1.prototype._initValueList=function(e){var i=this._oMetaData.property,n=e.primaryValueListAnnotation;this._oMetaData.annotations.valueListData=n;i.valueListAnnotation=n;i.valueListKeyProperty=this._oHelper.getODataValueListKeyProperty(n);i.valueListEntitySet=this._oHelper.oMeta.getODataEntitySet(n.valueListEntitySetName);i.valueListEntityType=this._oHelper.oMeta.getODataEntityType(this._oHelper.oMeta.getODataEntitySet(n.valueListEntitySetName).entityType);};
c1.prototype._getTextArrangementType=function(){var e=null,i=p.getPaths("ValueList",this._oMetaData);if(i.keyField&&i.descriptionField){e=this._oTypes.getType(this._oMetaData.property,null,null,{composite:true,keyField:i.keyField,descriptionField:i.descriptionField,valueListNoValidation:this._oParent._getComputedTextInEditModeSource()==="ValueListNoValidation"});if(!(e.isA("sap.ui.comp.smartfield.type.TextArrangementString")||e.isA("sap.ui.comp.smartfield.type.TextArrangementGuid"))){e=null;}}return e;};
c1.prototype._createEdmDisplay=function(){var i,e,n,d1,e1,f1=false,g1="getText",h1=this,i1={width:true,textAlign:true},j1=this.getEdmProperty(),k1=this._oParent.data("configdata"),l1=((k1&&(k1.isInnerControl!==true))||this._oParent.isContextTable()),m1=this._oSelector.checkComboBox(l1),n1=this._oSelector.checkDatePicker()||(j1?j1.type.startsWith("Edm.Date"):false);if(j1){d1=this._oHelper.oAnnotation.getText(j1);}if(this._checkLink()&&!this._oSelector.useObjectIdentifier()){return this._createLink(n1);}e1=this.createAttributes(null,this._oMetaData.property,i1);e1.emptyIndicatorMode=a1.On;this.oType=null;if(n1){this.oType=this._getDateFormatType();e1.text={model:this._oMetaData.model,path:this._oMetaData.path,type:this.oType};}else{if(this._bTextInDisplayModeValueList&&this._oMetaData.property&&this._oMetaData.property.valueListAnnotation){this.oType=this._getTextArrangementType();}if(!this.oType){this.oType=this._oTypes.getType(this._oMetaData.property);}e1.text={model:this._oMetaData.model,path:this._oHelper.getEdmDisplayPath(this._oMetaData),type:this.oType};}if(j1){e=this._oHelper.oAnnotation.isMasked(j1);if(e){e1.text.formatter=o.maskValue;}if(d1){n=this._oSelector.useObjectIdentifier(n1,e);if(n){delete e1.width;delete e1.textAlign;e1.text={path:this._oMetaData.path};e1.title={path:this._oHelper.getEdmDisplayPath(this._oMetaData)};if(this._oParent.hasListeners("press")){e1.titleActive=true;e1.titlePress=function(s1){h1._oParent.firePress(s1);};}else if(this._oMetaData.annotations.semantic&&this._oMetaData.annotations.semantic.defaultSemanticObject){var o1;var p1;var q1=this._oMetaData.annotations.semantic.additionalSemanticObjects.concat(this._oMetaData.annotations.semantic.defaultSemanticObject);u.getDistinctSemanticObjects().then(function(s1){o1=u.hasDistinctSemanticObject(q1,s1);if(o1){var t1=h1._oParent.getBindingInfo("value");var u1=t1.parts[0].path;var v1=h1._oHelper.oAnnotation.getLabel(h1._oMetaData.property.property);if(h1._oMetaData.annotations.lineitem&&h1._oMetaData.annotations.lineitem.labels&&h1._oMetaData.annotations.lineitem.labels[u1]){v1=h1._oMetaData.annotations.lineitem.labels[u1];}p1=new N({semanticObject:h1._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:h1._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:v1,fieldName:u1,navigationTargetsObtained:function(w1){var x1=sap.ui.getCore().byId(w1.getSource().getControl());var y1=w1.getParameters().mainNavigation;if(y1){y1.setDescription(x1.getText());}w1.getParameters().show(x1.getTitle(),y1,undefined,undefined);}});}});e1.titleActive={path:"$sapuicompsmartfield_distinctSO>/distinctSemanticObjects",formatter:function(s1){return u.hasDistinctSemanticObject(q1,s1);}};e1.titlePress=function(s1){if(o1&&p1){p1.setControl(s1.getSource(s1.getParameter("domRef")));p1.openPopover();}};}}else if(!(k1&&(k1.isInnerControl===true))){e1.text={};e1.text.parts=[];e1.text.parts.push(this._oMetaData.path);e1.text.parts.push(this._oHelper.getEdmDisplayPath(this._oMetaData));e1.text.formatter=function(s1,t1){if(m1.combobox){var u1=h1._formatDisplayBehaviour("defaultComboBoxReadOnlyDisplayBehaviour",s1,t1),v1=u1(s1,t1);return P(v1);}if(h1.oType&&!h1._bTextInDisplayModeValueList){s1=h1.oType.formatValue(s1,"string");}if(h1.oType&&h1.oType.isA("sap.ui.comp.odata.type.NumericText")&&s1===null&&t1){s1="";}return h1._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",s1,t1);};}}else if(this._oSelector.checkCheckBox()){e1.text.formatter=function(s1){return h1._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",s1);};}}if(n){i=new r(this._oParent.getId()+"-objIdentifier",e1);if(this._oMetaData.annotations.semantic){i.setModel(u.getJSONModel(),"$sapuicompsmartfield_distinctSO");}}else{if(e1.text.type&&e1.text.type.isA("sap.ui.comp.smartfield.type.DateTime")&&e1.text.type.oConstraints&&e1.text.type.oConstraints.isDateOnly){e1.wrapping=false;}if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){e1.textDirection="LTR";}if(typeof e1.text.formatter==="undefined"){e1.text.formatter=function(s1){return P(s1);};}if(this._oHelper.oAnnotation.isMultiLineText(j1)){delete e1.width;i=new E(this._oParent.getId()+"-expandableText",e1);}else{i=new f(this._oParent.getId()+"-text",e1);}f1=this._oSelector._checkComboBox(l1).combobox&&(this._oParent.getFetchValueListReadOnly()||(d1===undefined));if(f1){g1=null;}}if(n&&k1&&k1.configdata&&k1.configdata.onText){delete k1.configdata.onText;}var r1={control:i,onCreate:"_onCreate",params:{getValue:g1,noValidations:true,type:null}};if(this.oType){r1.type={type:this.oType,property:this._oMetaData.property};}return r1;};
c1.prototype._getDateFormatType=function(){var i=this.getFormatSettings("dateFormatSettings"),n=this.getEdmProperty(),d1;try{d1=K(i);}catch(e){d1=i;}if(d1&&n&&n.type==="Edm.DateTimeOffset"){d1.UTC=false;}return this._oTypes.getType(this._oMetaData.property,d1);};
c1.prototype._createEdmTime=function(){var e=this.getFormatSettings("dateFormatSettings"),n={width:true,placeholder:true,valueState:true,valueStateText:true};var i=c1.getBoundPropertiesMapInfoForControl(t.getMetadata().getName(),{propertyName:"value"})[0];var d1={valueFormat:"HH:mm:ss"};d1=Object.assign(d1,this.createAttributes(i,this._oMetaData.property,n,{event:"change",parameter:"value"}));if(d1.width===""){d1.width="100%";}if(e){d1[i].type=this._oTypes.getType(this._oMetaData.property,e);}var e1=new t(this._oParent.getId()+"-timePicker",d1);return{control:e1,onCreate:"_onCreate",params:{getValue:"getValue",type:{type:d1.value.type,property:this._oMetaData.property}}};};
c1.prototype._createObjectStatus=function(){var e=this.createAttributes(null,this._oMetaData.property,null),i=this._oHelper.oAnnotation.getText(this.getEdmProperty());var n=c1.getBoundPropertiesMapInfoForControl(s.getMetadata().getName(),{propertyName:"value"})[0];if(i){e[n]={parts:[this._oHelper.getEdmDisplayPath(this._oMetaData)]};}else{e[n]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};}this._addObjectStatusAttributes(e);var d1=new s(this._oParent.getId()+"-objStatus",e);return{control:d1,onCreate:"_onCreate",params:{getValue:"getText",noValidation:true}};};
c1.prototype._addObjectStatusAttributes=function(e){var i,n=this._oParent.getControlProposal(),d1=n.getObjectStatus();if(d1){i=d1.getBindingInfo("criticality");}var e1=function(h1){var i1={0:V.None,1:V.Error,2:V.Warning,3:V.Success};var j1={"com.sap.vocabularies.UI.v1.CriticalityType/Neutral":V.Neutral,"com.sap.vocabularies.UI.v1.CriticalityType/Negative":V.Warning,"com.sap.vocabularies.UI.v1.CriticalityType/Critical":V.Error,"com.sap.vocabularies.UI.v1.CriticalityType/Positive":V.Success};return j1[h1]||i1[h1]||V.None;};var f1=function(){var h1={};h1[V.Error]="sap-icon://message-error";h1[V.Warning]="sap-icon://message-warning";h1[V.Success]="sap-icon://message-success";h1[V.None]=null;var i1;if(i){if(i.formatter){i1=i.formatter.apply(null,arguments);}else{i1=arguments[0];}}else{i1=d1.getCriticality();}if((i1===undefined)||(i1===null)){return null;}return h1[e1(i1)];};var g1=function(){if(!d1){return false;}return d1.getCriticalityRepresentationType()!==Y.WithoutIcon;};if(i){e.state={formatter:function(){var h1;if(i.formatter){h1=i.formatter.apply(null,arguments);}else{h1=arguments[0];}return e1(h1);},parts:i.parts};if(g1()){e.icon={formatter:f1,parts:i.parts};}}else{if(d1){e.state=e1(d1.getCriticality());}if(g1()){e.icon=f1();}}};
c1.prototype._createEdmString=function(){var e={};if(this._oSelector.checkCheckBox()){return this._createCheckBox();}var i=this._oSelector.checkSelection();if(i.selection){return this._createSelect({valueHelp:c1.getValueHelpDropdownSettings(i)});}i=this._oSelector.checkComboBox();if(i.combobox){return this._createComboBox({valueHelp:c1.getValueHelpDropdownSettings(i),edit:true});}var n={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true,valueStateText:true};var d1=this.getEdmProperty();if(this._oHelper.oAnnotation.isMultiLineText(d1)){delete n["width"];return this._createMultiLineText({attributesNamesMap:n});}var e1=this._oParent.isTextInEditModeSourceNotNone(),f1=/Edm.String|Edm.Guid/.test(d1.type);if(e1||this._bTextInDisplayModeValueList){A(f1,"The ValueList and NavigationProperty"+"members of the sap.ui.comp.smartfield.TextInEditModeSource enumeration are only supported for OData "+"EDM Properties typed as Edm.String or Edm.Guid. - "+this.getMetadata().getName());}var g1=c1.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var h1=this._oParent._getComputedTextInEditModeSource(),i1,j1;if(this._oParent.data("defaultTextInEditModeSource")&&this._oParent.isPropertyInitial("textInEditModeSource")&&this._oParent.getMode()==="edit"){i1=true;}this.oTextArrangementDelegate.bValidMetadata=f1&&this.oTextArrangementDelegate.checkRequiredMetadata(h1,i1);if(this.oTextArrangementDelegate.bValidMetadata){j1=this.createAttributes("",this._oMetaData.property,n);e.valueListNoValidation=this._oParent._getComputedTextInEditModeSource()==="ValueListNoValidation";j1[g1]=this.oTextArrangementDelegate.getBindingInfo(e);}else{j1=this.createAttributes(g1,this._oMetaData.property,n);}if(x.isFiscalValue(d1)){j1.placeholder=j1.value.type.formatter.getPattern();return{control:new I(this._oParent.getId()+"-input",j1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:j1.value.type,property:this._oMetaData.property}}};}var k1=new I(this._oParent.getId()+"-input",j1);if(this._oHelper.oAnnotation.isMasked(d1)){k1.setType(W.Password);}var l1=this.getCustomDataConfiguration();if(this.oTextArrangementDelegate.bValidMetadata){this._handleEventingForTextArrangement({control:k1});}else{this._handleEventingForEdmString({control:k1,edmProperty:this._oMetaData.property.property,currency:l1&&l1.currency});}return{control:k1,onCreate:"_onCreate",params:{valuehelp:{annotation:i.annotation,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"},getValue:"getValue",type:{type:j1.value.type,property:this._oMetaData.property}}};};
c1.getValueHelpDropdownSettings=function(e){return{annotation:e.annotation,noDialog:true,noTypeAhead:true};};
c1.prototype._getMaxLength=function(){return this._oTypes.getMaxLength(this._oMetaData.property,this._oParent.getBindingInfo("value"));};
c1.prototype._addAriaLabelledBy=function(e){var i,n,d1,e1=this._oParent.getControlContext();if((e1===Z.None)||(e1===Z.Form)||(e1===Z.SmartFormGrid)){h.prototype._addAriaLabelledBy.apply(this,arguments);d1=this._oParent.data("configdata");if(d1&&d1.configdata.isInnerControl&&d1.configdata.isUOM){if(e){n=e.control;if(n instanceof H){if(n.getItems().length>0){n=n.getItems()[0];}}}if(n&&n.getAriaLabelledBy&&n.getAriaLabelledBy().length===0){var f1=this.getEdmProperty();if(this._oHelper.oAnnotation.getLabel(f1)){i=new y({text:this._oHelper.oAnnotation.getLabel(f1)});n.addAriaLabelledBy(i);this._oParent.addAggregation("_ariaLabelInvisibleText",i);}}}}};
c1.prototype._addAriaDescribedBy=function(){var e=this._oParent.getControlContext();if((e===Z.None)||(e===Z.Form)||(e===Z.SmartFormGrid)){h.prototype._addAriaDescribedBy.apply(this,arguments);}};
c1.prototype._handleEventingForEdmString=function(e){var i=e.control;if(!i){return;}i.attachChange(function j1(n){var d1=this._getChangeEventParams(n),e1=n&&n.getParameters(),f1=n&&n.getSource();if(e1){var g1=e1.value;d1.value=g1;d1.newValue=g1;if(i._oSuggestionPopup&&i._oSuggestionPopup.isOpen()){if(!e1.validated){if(i._iPopupListSelectedIndex>=0){return;}}}if(e.currency){var h1=this.getCurrencyValidationSettings();h1.oSource=f1;if(this._oHelper.oAnnotation.isUpperCase(e.edmProperty)&&g1){g1=g1.toUpperCase();i.setValue(g1);}this.updateModelPropertiesForCurrency("value",h1);}try{this._oParent.fireChange(d1);}catch(i1){z.error(i1);}}}.bind(this));};
c1.prototype._handleEventingForTextArrangement=function(e){var i=e.control;if(!i){return;}i.attachChange(function(n){var d1=this._getChangeEventParams(n);try{this._oParent.fireChange(d1);}catch(e1){z.error(e1);}}.bind(this));};
c1.prototype.getUOMChangeHandler=function(e){return function(i){try{var n=e.smartFieldRootControl,d1=i.getParameters(),e1=d1.value,f1=i.getSource(),g1=e.currency,h1=g1?this.getCurrencyValidationSettings(e):this.getUnitValidationSettings(e);h1.oSource=f1;g1?this.updateModelPropertiesForCurrency("value",h1):this.updateModelPropertiesForUnit("value",h1);n.fireChange({value:e1,newValue:e1,unitChanged:!!e.unit,validated:!!d1.validated});}catch(i1){if(i1.validationUnitError){n.fireChange({value:e1,newValue:e1,unitChanged:!!e.unit,validated:!!d1.validated});}z.error(i1);}}.bind(this);};
c1.prototype.getCurrencyValidationSettings=function(e){var i;if(e){i=e.smartFieldRootControl;}else{var n=this.getCustomDataConfiguration();i=n&&n.smartFieldRootControl;}var d1=i.getInnerControls();return{amountField:d1[0],currencyField:d1[1],errorState:i._oError,checkValidity:i.checkValuesValidity.bind(i),rootControl:i};};
c1.prototype.getUnitValidationSettings=function(e){var i;if(e){i=e.smartFieldRootControl;}else{var n=this.getCustomDataConfiguration();i=n&&n.smartFieldRootControl;}var d1=i.getInnerControls();return{measureField:d1[0],unitField:d1[1],errorState:i._oError,checkValidity:i.checkUnitValidity.bind(i),rootControl:i};};
c1.prototype.updateModelPropertiesForCurrency=function(e,i){var n=i.amountField,d1=i.currencyField,e1=i.oSource,f1=n.getValue(),g1,h1="";if(d1){var i1=d1.getMetadata().getName();g1=c1.getBoundPropertiesMapInfoForControl(i1,{propertyName:e})[0];var j1="get"+J(g1);h1=d1[j1]();}var k1=[f1,h1];var l1={rawValues:k1,handleSuccess:false};var m1=i.checkValidity(l1);function n1(q1){var r1=n.getModel(),s1=n.getBinding(e),t1,u1;if(d1){t1=d1.getBinding(g1);u1=t1.getType();}var v1=s1.getType(),w1=s1.getExternalValue(),x1=t1&&t1.getExternalValue(),y1=v1.parseValue(f1,"string",k1),z1=y1[1],A1=v1.formatValue(y1,"string"),B1=u1&&u1.formatValue(z1,"string");if(r1.getDefaultBindingMode()===B.TwoWay){if(!q1){s1.setValue(y1);}}if(!q1){n.setValue(A1);}var C1=false,D1=true;if(s1.hasValidation()&&!q1){var E1={element:n,property:e,type:v1,newValue:A1,oldValue:w1,mParameters:{originSource:e1}};n.fireValidationSuccess(E1,C1,D1);}if(t1&&t1.hasValidation()){var F1={element:d1,property:g1,type:u1,newValue:B1,oldValue:x1,mParameters:{originSource:e1}};d1.fireValidationSuccess(F1,C1,D1);}}function o1(q1){}function p1(){var q1=i.errorState;if(q1.bComplex&&q1.bFirst&&q1.bSecond){var r1=n.getBinding(e).getExternalValue();k1=[r1,h1];var l1={rawValues:k1,innerControls:[d1],handleSuccess:false};var m1=i.checkValidity(l1);m1.then(function(){return n1.call(this,true);}.bind(this)).catch(o1);}}m1.then(function(){return n1();}).catch(o1).finally(p1);};
c1.prototype.updateModelPropertiesForUnit=function(e,i){var n=i.measureField,d1=i.unitField,e1=n.getValue(),f1,g1="";if(d1){var h1=d1.getMetadata().getName();f1=c1.getBoundPropertiesMapInfoForControl(h1,{propertyName:e})[0];var i1="get"+J(f1),j1=d1.getParent();if(d1.isA("sap.m.ComboBox")){g1=d1.getSelectedKey();}else if(this._getDisplayBehaviourConfiguration()&&j1&&(!j1.getEditable()||j1._oFactory._getTextArrangementType())){g1=j1.getBinding("value").getValue();}else{g1=d1[i1]();}}else if(this._checkSuppressUnit()){var k1=this.getMetaData().annotations.uom.path,l1=n.getBindingContext();g1=this._oModel.getData(k1,l1);}var m1=[e1,g1];var n1={rawValues:m1,handleSuccess:false};var o1=i.checkValidity(n1);if(o1){var p1=n.getModel(),q1=n.getBinding(e),r1,s1;if(d1){r1=d1.getBinding(f1);s1=r1.getType();}var t1=q1.getType(),u1=t1.parseValue(e1,"string",m1),v1=u1[1],w1,x1;if(v1===undefined&&d1&&!d1.getEditable){w1=t1.formatValue([u1[0],null],"string");x1=v1;}else{w1=t1.formatValue(u1,"string");if(!q1.isA("sap.ui.comp.smartfield.type.Unit")){v1=g1;}x1=s1&&s1.formatValue(v1,"string");}if(p1.getDefaultBindingMode()===B.TwoWay){q1.setValue(u1);}n.setValue(w1);if(d1&&d1.getEditable&&d1.getEditable()&&d1.getParent().getVisible()&&!d1.isA("sap.m.ComboBox")){d1.setValue(x1);}}};
c1.prototype._createComboBox=function(e){var i=null,n=(this._oSelector&&this._oSelector._oParent&&this._oSelector._oParent.oParent&&this._oSelector._oParent.oParent.isA("sap.ui.comp.smartmultiedit.Field")||(this._oParent&&this._oParent.getFixedValueListValidationEnabled&&this._oParent.getFixedValueListValidationEnabled())),d1={width:true,textAlign:true,placeholder:true,tooltip:true,name:true,valueState:true},e1,f1;if(n){e1=c1.getBoundPropertiesMapInfoForControl(a.getMetadata().getName(),{propertyName:"value"})[0];f1={change:function(g1){if(g1.getParameter("itemPressed")){return;}var h1=g1.getSource().getSelectedKey();this._oParent.fireChange({value:h1,newValue:h1});}.bind(this)};}else{e1=c1.getBoundPropertiesMapInfoForControl(b.getMetadata().getName(),{propertyName:"value"})[0];f1={change:function(g1){if(this._oParent.getFirstInnerControl().setEnteredValue){this._oParent.getFirstInnerControl().setEnteredValue();}var h1=g1.getSource().getSelectedKey();if(!h1){h1=g1.getSource().getValue();}this._oParent.fireChange({value:h1,newValue:h1});}.bind(this)};}f1["selectionChange"]=this._oHelper.getSelectionChangeHandler(this._oParent);f1=Object.assign(f1,this.createAttributes(e1,this._oMetaData.property,d1));if(f1.width===""){f1.width="100%";}if(e.edit){if(n){i=new a(this._oParent.getId()+"-comboBoxEdit",f1);}else{i=new b(this._oParent.getId()+"-comboBoxEdit",f1);}}else{i=this._createDisplayedComboBox(f1);}return{control:i,onCreate:"_onCreate",params:{valuehelp:{annotation:e.valueHelp.annotation,aggregation:"items",noDialog:e.valueHelp.noDialog,noTypeAhead:e.valueHelp.noTypeAhead},getValue:"get"+e1[0].toUpperCase()+e1.slice(1),type:{type:f1[e1].type,property:this._oMetaData.property}}};};
c1.prototype._createDisplayedComboBox=function(e){var i=a.extend("sap.ui.comp.smartfield.DisplayComboBox",{metadata:{library:"sap.ui.comp",properties:{wrapping:{type:"boolean",group:"Appearance",defaultValue:true}}},renderer:function(n,d1){var e1=d1.getWidth(),f1=d1.getValue(),g1=d1.getTextDirection(),h1=d1.getTextAlign(),i1=d1.getTooltip_AsString(),j1=d1.getWrapping();n.write("<span");n.writeControlData(d1);n.addClass("sapMText");n.addClass("sapUiSelectable");if(j1){if(f1&&(f1.length>0)&&!/\s/.test(f1)){n.addClass("sapMTextBreakWord");}}else{n.addClass("sapMTextNoWrap");}if(e1&&(f1!=="")){n.addStyle("width",e1);}else{n.addClass("sapMTextMaxWidth");}if(g1!==$.Inherit){n.writeAttribute("dir",g1.toLowerCase());}if(i1){n.writeAttributeEscaped("title",i1);}if(h1){h1=R.getTextAlign(h1,g1);if(h1){n.addStyle("text-align",h1);}}var k1=j1?"sapMTextRenderWhitespaceWrap":"sapMTextRenderWhitespace";n.addClass(k1);n.writeClasses();n.writeStyles();n.write(">");f1.replace(/\r\n|\n\r|\r/g,"\n");n.writeEscaped(f1);n.write("</span>");},updateDomValue:function(n){if(!this.isActive()){return this;}n=this._getInputValue(n);if(this.$().text()!==n){this.$().text(n);this._bCheckDomValue=true;}return this;},getValue:function(){return this.getProperty("value");},getFocusDomRef:function(){return this.getDomRef();},getEditable:function(){return false;}});return new i(this._oParent.getId()+"-comboBoxDisp",e);};
c1.prototype._createSelect=function(e){var n={width:true,name:true,valueState:true};var i=c1.getBoundPropertiesMapInfoForControl(S.getMetadata().getName(),{propertyName:"value"})[0];var d1={change:this._oHelper.getSelectionChangeHandler(this._oParent),forceSelection:false};d1=Object.assign(d1,this.createAttributes(i,this._oMetaData.property,n));if(d1.width===""){d1.width="100%";}return{control:new S(this._oParent.getId()+"-select",d1),onCreate:"_onCreate",params:{valuehelp:{annotation:e.valueHelp.annotation,aggregation:"items",noDialog:e.valueHelp.noDialog,noTypeAhead:e.valueHelp.noTypeAhead},getValue:"getSelectedKey",type:{type:d1.selectedKey.type,property:this._oMetaData.property}}};};
c1.prototype._createCheckBox=function(){var e=c1.getBoundPropertiesMapInfoForControl(C.getMetadata().getName(),{propertyName:"value"})[0];var i=this.createAttributes(e,null,{},{event:"select",parameter:"selected"});i.editable=(this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable());i.selected.type=this._oTypes.getAbapBoolean();return{control:new C(this._oParent.getId()+"-cBox",i),onCreate:"_onCreate",params:{getValue:"getSelected"}};};
c1.prototype._createEdmDateTime=function(){var e=this.getFormatSettings("dateFormatSettings"),i;var n={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var d1=this.createAttributes(null,this._oMetaData.property,n,{event:"change",parameter:"value"});if(this._oSelector.checkDatePicker()){i=c1.getBoundPropertiesMapInfoForControl(D.getMetadata().getName(),{propertyName:"value"})[0];d1[i]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,e,{displayFormat:"Date"}),model:this._oMetaData.model,mode:this._oParent.getBindingMode("value")};if(e&&e.style){d1.displayFormat=e.style;}return{control:new D(this._oParent.getId()+"-datePicker",d1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:d1.value.type,property:this._oMetaData.property}}};}i=c1.getBoundPropertiesMapInfoForControl(d.getMetadata().getName(),{propertyName:"value"})[0];d1[i]={path:this._oMetaData.path,model:this._oMetaData.model,type:this._oTypes.getType(this._oMetaData.property,e),mode:this._oParent.getBindingMode("value")};return{control:new d(this._oParent.getId()+"-input",d1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:d1.value.type,property:this._oMetaData.property}}};};
c1.prototype._createEdmDateTimeOffset=function(){var i=this.getFormatSettings("dateFormatSettings"),n;try{n=K(i);}catch(e){n=i;}if(n){n.UTC=false;}var d1=c1.getBoundPropertiesMapInfoForControl(d.getMetadata().getName(),{propertyName:"value"})[0];var e1={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var f1=this.createAttributes(null,this._oMetaData.property,e1,{event:"change",parameter:"value"});f1[d1]={model:this._oMetaData.model,path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property,n),mode:this._oParent.getBindingMode("value")};return{control:new d(this._oParent.getId()+"-input",f1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:f1.value.type,property:this._oMetaData.property}}};};
c1.prototype._createEdmNumeric=function(){var e=this._oSelector.checkComboBox();if(e.combobox){return this._createComboBox({valueHelp:{annotation:e.annotation,noDialog:true,noTypeAhead:true},edit:true});}var n={width:true,textAlign:true,placeholder:true,name:true,valueState:true};var i=c1.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var d1=this.createAttributes(i,this._oMetaData.property,n,{event:"change",parameter:"value"});if(this._oParent.isContextTable()&&sap.ui.getCore().getConfiguration().getRTL()){d1.textDirection="LTR";}return{control:new I(this._oParent.getId()+"-input",d1),onCreate:"_onCreate",params:{getValue:"getValue",type:{type:d1.value.type,property:this._oMetaData.property}}};};
c1.prototype._createEdmUOM=function(){var e=this.getEdmProperty(),i=this._oMetaData.annotations.uom.property.property,n=this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(e,i);var d1={currency:n,edmProperty:i};var e1=this._createEdmUOMAttributes(d1),f1=sap.ui.getCore().getConfiguration().getRTL(),g1=f1&&this._oParent.isContextTable(),h1=this._oParent.getId(),i1;if(g1){e1.textDirection="LTR";}var j1=new I(h1+"-input",e1);this.oMeasureField=j1;if(this._oParent.data("suppressUnit")==="true"){var k1={getValue:"getValue"};if(!n){k1.type={type:e1.value.type,property:this._oMetaData.property};}return{control:j1,onCreate:"_onCreate",params:k1};}if(!n){i1={type:e1.value.type,property:this._oMetaData.property};}var l1={change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,currency:n,unit:true}),textAlign:this._getEdmUOMTextAlignment()};var m1=c1.getBoundPropertiesMapInfoForControl(b1.getMetadata().getName(),{propertyName:"value"})[0];var n1=this._oHelper.getUOMPath(this._oMetaData);l1[m1]={model:this._oMetaData.model,path:n1};this.mapBindings(l1,c1._getEmbeddedSmartFieldMapSettings());if(this._oParent.getConfiguration()){l1.configuration=new w({preventInitialDataFetchInValueHelpDialog:this._getPreventInitialDataFetchInVHDialog()});}var o1=new b1(h1+"-sfEdit",l1),p1=this;o1.data("configdata",{"configdata":{currency:n,smartFieldRootControl:this._oParent,measureField:this.oMeasureField,isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:n1,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,valuelistType:this._oMetaData.annotations.uom.annotations.valuelistType,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(r1){j1.setLayoutData(new F({growFactor:1}));o1.setLayoutData(p1._getStaticUOMTextFlexItemData({shrinkFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitDisplay"}));o1.addStyleClass("sapUiCompSmartFieldUOMDisplayText");if(r1){if(g1&&(typeof r1.setTextDirection==="function")){r1.setTextDirection("LTR");}r1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(r1){j1.setLayoutData(p1._getDynamicAmountInputFlexItemData({control:o1}));o1.setLayoutData(p1._getStaticUOMInputFlexItemData({growFactor:0,styleClass:"sapUiCompSmartFieldFlexItemUnitEdit",minWidth:""}));if(r1){if(g1&&(typeof r1.setTextDirection==="function")){r1.setTextDirection("LTR");}r1.addStyleClass("sapUiCompSmartFieldUnit");}}}});o1.data("errorCheck","setComplexClientErrorSecondOperandNested");if(o1.getVisible()){j1.addStyleClass("smartFieldPaddingRight");}j1.addStyleClass("sapUiCompSmartFieldValue");var q1=new H({justifyContent:X.End,items:[j1,o1],fitContainer:true,width:this._oParent.getWidth()});q1.addStyleClass("sapUiCompUOM");q1.enhanceAccessibilityState=function(r1,s1){this._oParent.enhanceAccessibilityState(r1,s1);}.bind(this);if(this._oParent.isContextTable()){if(g1){q1.addStyleClass("sapUiCompDirectionLTR");}q1.addStyleClass("sapUiCompUOMInTable");if(this._oParent.getMode()!=="edit"){q1.addStyleClass("sapUiCompUOMInTableDisplay");}}return{control:q1,onCreate:"_onCreateUOM",params:{getValue:true,valuehelp:true,type:i1}};};
c1.prototype._createEdmUOMAttributes=function(e){e=e||{};var i=this.createUOMDefaultAttributes(e);var n=c1.getBoundPropertiesMapInfoForControl(I.getMetadata().getName(),{propertyName:"value"})[0];var d1=e.currency||(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this.getEdmProperty(),this._oMetaData.annotations.uom.property.property));i[n]={mode:B.OneWay,model:this._oMetaData.model,parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)},{mode:'OneTime',path:d1?'/##@@requestCurrencyCodes':'/##@@requestUnitsOfMeasure',targetType:'any'}],type:d1?this._oTypes.getCurrencyType(this._oMetaData.property):this._oTypes.getUoMType(this._oMetaData.property)};return i;};
c1.prototype.createUOMDefaultAttributes=function(e){return{textAlign:this._getEdmUOMTextAlignment(),placeholder:this.getAttribute("placeholder"),name:this.getAttribute("name"),change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,currency:e.currency}),valueState:this.getValueStateBindingInfoForRecommendationStateAnnotation()};};
c1.prototype._getEdmUOMTextAlignment=function(){var e=this.getAttribute("textAlign");if(!e){e=Q.Initial;}if(e===Q.Initial){if(this._oParent.isContextTable()){return Q.End;}return Q.Begin;}return e;};
c1.prototype._createEdmUOMDisplay=function(){var e=this,i=this._oHelper.getUOMPath(this._oMetaData),n=this._getEdmUOMTextAlignment(),d1=null,e1=this.getEdmProperty(),f1=sap.ui.getCore().getConfiguration().getRTL(),g1=f1&&this._oParent.isContextTable(),h1=this._oHelper.oAnnotation.isCurrency(e1);var i1=c1.getBoundPropertiesMapInfoForControl(f.getMetadata().getName(),{propertyName:"value"})[0];var j1={textAlign:n};j1[i1]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:i},{mode:'OneTime',path:h1?'/##@@requestCurrencyCodes':'/##@@requestUnitsOfMeasure',targetType:'any'}],model:this._oMetaData.model,formatter:this._oTypes.getDisplayFormatter(e1,{currency:h1,mask:this._oHelper.oAnnotation.isMasked(e1),type:this._oTypes.getType(this._oMetaData.property)}),useRawValues:true};if(g1){j1.textDirection="LTR";}j1.emptyIndicatorMode=a1.On;var k1=new f(this._oParent.getId()+"-text",j1);i=this._oHelper.getUOMPath(this._oMetaData);j1={change:this.getUOMChangeHandler({smartFieldRootControl:this._oParent,currency:h1,unit:true}),textAlign:this._getEdmUOMTextAlignment()};i1=c1.getBoundPropertiesMapInfoForControl(b1.getMetadata().getName(),{propertyName:"value"})[0];j1[i1]={model:this._oMetaData.model,path:i};this.mapBindings(j1,c1._getEmbeddedSmartFieldMapSettings());k1.addStyleClass("smartFieldPaddingRight");k1.addStyleClass("sapUiCompSmartFieldValue");if(this._checkSuppressUnit()){return{control:k1};}d1=new b1(this._oParent.getId()+"-sfDisp",j1);d1.data("configdata",{"configdata":{isInnerControl:true,isUOM:!this._oParent.data("configdata"),model:this._oMetaData.model,navigationPath:this._oMetaData.annotations.uom.navigationPath||null,path:i,entitySetObject:this._oMetaData.annotations.uom.entitySet,entityType:this._oMetaData.annotations.uom.entityType,property:this._oMetaData.annotations.uom.property,annotations:{valuelist:this._oMetaData.annotations.valuelistuom,text:this._oMetaData.annotations.textuom},modelObject:this._oMetaData.modelObject||this._oModel,onText:function(m1){if(m1){if(m1.setWrapping){m1.setWrapping(false);}if(g1&&(typeof m1.setTextDirection==="function")){m1.setTextDirection("LTR");}if(typeof m1.setEmptyIndicatorMode==="function"){m1.setEmptyIndicatorMode(a1.Off);}m1.addStyleClass("sapUiCompSmartFieldUnit");}},onInput:function(m1){k1.setLayoutData(new F({growFactor:0}));d1.setLayoutData(new F({growFactor:0}));if(m1){if(g1&&(typeof m1.setTextDirection==="function")){m1.setTextDirection("LTR");}m1.addStyleClass("sapUiCompSmartFieldUnit");}},getContextEditable:function(){return e._oParent.getContextEditable();}}});d1.data("errorCheck","setComplexClientErrorSecondOperandNested");var l1=new H({alignItems:_.Center,items:[k1,d1],fitContainer:true,width:this._oParent.getWidth()});l1.enhanceAccessibilityState=function(m1,n1){this._oParent.enhanceAccessibilityState(m1,n1);}.bind(this);if(this._oParent.isContextTable()){l1.setJustifyContent("End");this._oParent.addStyleClass("sapUiCompUOMInTable");if(g1){l1.addStyleClass("sapUiCompDirectionLTR");}l1.addStyleClass("sapUiCompUOMInTable");}return{control:l1};};
c1.prototype._createEdmUOMObjectStatus=function(){var e,i=this.getEdmProperty(),n=this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(i),d1=this._oTypes.getDisplayFormatter(i,{currency:n}),e1=this._oHelper.getUOMPath(this._oMetaData),f1={};var g1=c1.getBoundPropertiesMapInfoForControl(s.getMetadata().getName(),{propertyName:"value"})[0];f1[g1]={parts:[{path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)},{path:e1},{mode:'OneTime',path:n?'/##@@requestCurrencyCodes':'/##@@requestUnitsOfMeasure',targetType:'any'}],formatter:function(){var h1=d1.apply(this,arguments);return h1+arguments[1];},useRawValues:true};this._addObjectStatusAttributes(f1);e=new s(this._oParent.getId()+"-objStatus",f1);e.addStyleClass("sapUiCompUOM");return{control:e};};
c1.prototype._createEdmUOMObjectNumber=function(){var e,i,n=this._getEdmUOMTextAlignment();var d1=c1.getBoundPropertiesMapInfoForControl(q.getMetadata().getName(),{propertyName:"value"});if(this._oMetaData.annotations.uom&&this._oHelper.oAnnotation.isCurrency(this.getEdmProperty(),this._oMetaData.annotations.uom.property.property)){e={model:this._oMetaData.model,textAlign:n};e[d1[0]]={parts:[{path:this._oMetaData.path},{path:this._oHelper.getUOMPath(this._oMetaData)},{mode:'OneTime',path:'/##@@requestCurrencyCodes',targetType:'any'}],type:this._oTypes.getCurrencyType(this._oMetaData.property)};e[d1[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}else{e={model:this._oMetaData.model,textAlign:n};e[d1[0]]={path:this._oMetaData.path,type:this._oTypes.getType(this._oMetaData.property)};e[d1[1]]={path:this._oHelper.getUOMPath(this._oMetaData)};}i=new q(this._oParent.getId()+"-objNumber",e);i.addStyleClass("sapUiCompUOM");return{control:i};};
c1.prototype._createEdmSemantic=function(){var e=this,i=this._oParent.getBindingPath("value"),n=this.getEdmProperty(),d1=this._oHelper.oAnnotation.getLabel(n);if(this._oMetaData.annotations.lineitem&&this._oMetaData.annotations.lineitem.labels&&this._oMetaData.annotations.lineitem.labels[i]){d1=this._oMetaData.annotations.lineitem.labels[i];}var e1={semanticObject:this._oMetaData.annotations.semantic.defaultSemanticObject,additionalSemanticObjects:this._oMetaData.annotations.semantic.additionalSemanticObjects,semanticObjectLabel:d1,fieldName:i,width:this.getAttribute("width"),createControlCallback:function(){var h1=this.createControl(true);if(h1){return h1.control;}return null;}.bind(this)};var f1=this._oHelper.oAnnotation.getText(n);this.oType=this._oTypes.getType(this._oMetaData.property);if(f1){e1.text={parts:[this._oMetaData.path,this._oHelper.getEdmDisplayPath(this._oMetaData)],model:this._oMetaData.model,formatter:function(h1,i1){if(e.oType){h1=e.oType.formatValue(h1,"string");}if(e.oType&&e.oType.isA("sap.ui.comp.odata.type.NumericText")&&h1===null&&i1){h1="";}if(h1&&i1){return e._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",h1,i1);}return h1?h1:"";}};e1.navigationTargetsObtained=function(h1){var i1=this.getBinding("text");if(!Array.isArray(i1.getValue())){h1.getParameters().show();return;}var j1=i1.getValue();var k1=e._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour")||"idOnly";var l1=v.getTextsFromDisplayBehaviour(k1,j1[0],j1[1]);var m1=h1.getParameters().mainNavigation;if(m1){m1.setDescription(l1.secondText);}h1.getParameters().show(l1.firstText,m1,undefined,undefined);};}else{var g1=this._oHelper.getUOMPath(this._oMetaData);if(g1){e1.text={parts:[{path:i},{path:g1}],model:this._oMetaData.model,formatter:this._oHelper.oAnnotation.isCurrency(n,this._oMetaData.annotations.uom.property.property)?v.getAmountCurrencyFormatter():v.getMeasureUnitFormatter(),useRawValues:true};e1.uom={path:g1};}else{e1.text={path:i,model:this._oMetaData.model,type:this.oType};}}return{control:new g(this._oParent.getId()+"-sl",e1),onCreate:"_onCreate",params:{getValue:"getInnerControlValue"}};};
c1.prototype._createMultiLineText=function(e){var i=c1.getBoundPropertiesMapInfoForControl(T.getMetadata().getName(),{propertyName:"value"})[0];var n=this.createAttributes(i,this._oMetaData.property,e.attributesNamesMap);var d1=this.getFormatSettings("multiLineSettings");n=G(n,d1);if(this._oParent.isContextTable()){n.width="100%";}var e1=new T(this._oParent.getId()+"-textArea",n);this._handleEventingForEdmString({control:e1,edmProperty:this._oMetaData.property.property});return{control:e1,onCreate:"_onCreate",params:{type:{type:n.value.type,property:this._oMetaData.property},getValue:"getValue"}};};
c1.prototype._createLink=function(e){var i=this,n=this._oParent,d1=n.getBindingInfo("url");var e1={text:"",href:""};var f1=c1.getBoundPropertiesMapInfoForControl(L.getMetadata().getName(),{propertyName:"url"})[0];if(d1){e1[f1]=this._oBinding.toBinding(d1);}else{e1[f1]=n.getUrl();}if(n.hasListeners("press")){e1.press=function(m1){m1.preventDefault();n.firePress(m1);};}var g1=n.getBindingInfo("value");var h1=c1.getBoundPropertiesMapInfoForControl(L.getMetadata().getName(),{propertyName:"value"});if(g1){var i1=this._oMetaData,j1=i1.path,k1=i1.property.property;if(i1.annotations.text&&(k1.type==="Edm.String")){e1[h1[0]]={parts:[i1.path,this._oHelper.getEdmDisplayPath(i1)],formatter:this._formatText.bind(i)};}else if(c1.isSpecialLink(k1)){var l1=c1[c1._getLinkFormatterFunctionName(k1)];e1[h1[0]]={path:j1};e1[h1[1]]={path:j1,formatter:null};if(typeof l1==="function"){e1[h1[1]].formatter=l1;}}else if(e){e1[h1[0]]={path:j1,type:this._getDateFormatType()};}else{e1[h1[0]]=this._oBinding.toBinding(g1);}}else{e1[h1[0]]=n.getValue();}return{control:new L(n.getId()+"-link",e1),onCreate:"_onCreate",params:{noValidation:true}};};
c1.prototype._createEdmBoolean=function(){var e=this._oSelector.checkComboBox(),i=this._oParent.getEditable()&&this._oParent.getEnabled()&&this._oParent.getContextEditable(),n=this,d1=null,e1;if(e.combobox){if(i||this._oParent.getFetchValueListReadOnly()){return this._createComboBox({valueHelp:{annotation:e.annotation,noDialog:true,noTypeAhead:true},edit:i});}}var f1,g1;if(i){g1=c1.getBoundPropertiesMapInfoForControl(C.getMetadata().getName(),{propertyName:"value"})[0];f1=this.createAttributes(g1,this._oMetaData.property,{},{event:"select",parameter:"selected"});e1=new C(this._oParent.getId()+"-cBoxBool",f1);d1={getValue:"getSelected"};}else{g1=c1.getBoundPropertiesMapInfoForControl(f.getMetadata().getName(),{propertyName:"value"})[0];f1=this.createAttributes(g1,this._oMetaData.property,{width:true,textAlign:true});f1.emptyIndicatorMode=a1.On;f1[g1]={model:this._oMetaData.model,path:this._oMetaData.path,formatter:function(h1){return n._formatDisplayBehaviour("defaultCheckBoxDisplayBehaviour",h1);}};e1=new f(this._oParent.getId()+"-text",f1);}return{control:e1,onCreate:"_onCreate",params:d1};};
c1.prototype._createValueHelp=function(){var e=this._oParent.getContent();if(!e){return;}var i={annotation:this._oMetaData.annotations.valuelist,noDialog:!this._oParent.getShowValueHelp(),noTypeAhead:!this._oParent.getShowSuggestion(),aggregation:"suggestionRows"};this._getValueHelpDialogTitle(i);i.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:e,edmProperty:this.getEdmProperty(),valueHelp:i,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function(n){this._oParent.fireValueListChanged({changes:n.mParameters.changes});}.bind(this)});};
c1.prototype.getValueListProviderConfiguration=function(e){var i=h.prototype.getValueListProviderConfiguration.apply(this,arguments);if(this._oHelper.oAnnotation.isUpperCase(this._oMetaData.property.property)){i.displayFormat="UpperCase";}return i;};
c1.prototype._checkSuppressUnit=function(){if(this._oParent.data("suppressUnit")==="true"){return true;}var i=this._oParent.getBindingInfo("uomVisible");return(!i&&!this._oParent.getUomVisible());};
c1.prototype.getEdmProperty=function(){var e=this._oHelper;if(e){return e.getEdmProperty(this._oMetaData);}return null;};
c1.prototype.getEntityType=function(){if(this._oMetaData){return this._oMetaData.entityType;}return null;};
c1.prototype._checkLink=function(){var i=this._oParent.getBindingInfo("url"),e=this.getEdmProperty();if(i||this._oParent.getUrl()||c1.isSpecialLink(e)){return true;}return this._oParent.hasListeners("press");};
c1._getEmbeddedSmartFieldMapSettings=function(){return{"uomEditable":"editable","uomEnabled":"enabled","uomVisible":"visible","mandatory":"mandatory","contextEditable":"contextEditable"};};
c1.getBoundPropertiesMapInfoForControl=function(e,i){i=i||{};var n=null;switch(e){case"sap.m.Input":case"sap.m.TimePicker":case"sap.m.DatePicker":case"sap.m.DateTimePicker":case"sap.m.TextArea":n={value:["value"]};break;case"sap.m.Text":case"sap.m.ObjectIdentifier":case"sap.ui.comp.navpopover.SmartLink":n={value:["text"]};break;case"sap.m.Link":n={url:["href"],value:["text","href"]};break;case"sap.m.ObjectStatus":n={value:["text","state","icon"]};break;case"sap.m.ObjectNumber":n={value:["number","unit"]};break;case"sap.m.Select":case"sap.m.ComboBox":case"sap.ui.comp.smartfield.DisplayComboBox":n={value:["selectedKey"]};break;case"sap.ui.comp.smartfield.ComboBox":n={value:["enteredValue"]};break;case"sap.m.CheckBox":n={value:["selected"]};break;case"sap.ui.comp.smartfield.SmartField":var d1=Object.keys(b1.getMetadata().getProperties());n={};d1.forEach(function(e1,f1,g1){n[e1]=[g1[f1]];});break;}if(n&&i.propertyName){return n[i.propertyName]||null;}return n;};
c1.isSpecialLink=function(e){return M.isEmailAddress(e)||M.isPhoneNumber(e)||M.isURL(e);};
c1._getLinkFormatterFunctionName=function(e){return"_format"+M.getLinkDisplayFormat(e);};
c1._formatEmailAddress=function(e){return"mailto:"+e;};
c1._formatPhoneNumber=function(e){return"tel:"+e;};
c1._formatURL=function(e){return U.validate(e)?e:"";};
c1.prototype._formatText=function(i,e){if(i&&e){return this._formatDisplayBehaviour("defaultInputFieldDisplayBehaviour",i,e);}return i||"";};
c1.prototype._getCreator=function(e){return this._oSelector.getCreator(e);};
c1.prototype._onCreate=function(e,i){var n,d1,e1=true,f1=this;if(i){if(i.noValidation){e1=false;}if(i.valuehelp&&this.shouldCreateValueHelpForControl(e)){this._getValueHelpDialogTitle(i.valuehelp);i.valuehelp.analyser=this._oHelper.getAnalyzer(this._oModel||this._oMetaData.modelObject);this.createValueHelp({control:e,edmProperty:this.getEdmProperty(),valueHelp:i.valuehelp,model:this._oModel||this._oMetaData.modelObject,onValueListChange:function(g1){f1._oParent.fireValueListChanged({changes:g1.mParameters.changes});}});}if(i.getValue){n=i.getValue;i.getValue=function(){return e[n]();};}if(i.type){d1=this._oFieldControl.getMandatoryCheck(i.type.property);if(d1){i.type.type.oFieldControl=d1;}}}if(e1){this.addValidations(e,this._oParent.data("errorCheck")||"setSimpleClientError");}if(!this._checkUOM()){e.addStyleClass("sapUiCompSmartFieldValue");}};
c1.prototype._checkUOM=function(){var e=this._oParent.data("configdata");if(e&&e.configdata){if(e.configdata.onInput||e.configdata.onText){return true;}}return false;};
c1.prototype.getValueStateBindingInfoForRecommendationStateAnnotation=function(e,i,n){e=e||this.getEdmProperty();var d1=e&&e["com.sap.vocabularies.UI.v1.RecommendationState"];if(!d1){return null;}A(!(d1.Path===undefined),'Missing "Path" attribute of the "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+e.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());A(!(d1.Path===""),'Missing path name of "com.sap.vocabularies.UI.v1.RecommendationState" annotation for "'+e.name+'" EDM property of "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());i=i||this._oHelper.findProperty(this._oMetaData.entityType.property,d1.Path);A(!!i,'The EDM property was not found in the "'+this._oMetaData.entityType.name+'" entity type. - '+this.getMetadata().getName());if(i&&(i.type==="Edm.Byte")){return{model:n||this._oMetaData.model,path:d1.Path,formatter:c1.formatRecommendationState};}A(i&&(i.type==="Edm.Byte"),'The EDM property "'+i.name+'" of "'+this._oMetaData.entityType.name+'" entity type must be typed as Edm.Byte. - '+this.getMetadata().getName());return null;};
c1.formatRecommendationState=function(e){e=String(e);switch(e){case"0":return V.None;case"1":return V.Information;case"2":return V.Warning;default:return V.None;}};
c1.prototype._getDynamicAmountInputFlexItemData=function(e){var i="sapUiCompSmartFieldFlexItemAmountEdit",n="",d1=e.control;if(d1&&!d1.getVisible()){i="sapUiCompSmartFieldFlexItemAmountNoUnitEdit";n="100%";}var e1=this._oAmountInputFlexItemData;if(e1&&!e1.bIsDestroyed){e1.setMaxWidth(n);e1.setStyleClass(i);return e1;}this._oAmountInputFlexItemData=new F({growFactor:1,maxWidth:n,styleClass:i});return this._oAmountInputFlexItemData;};
c1.prototype._getStaticUOMInputFlexItemData=function(e){var i=this._oUOMInputFlexItemData;if(i&&!i.bIsDestroyed){return i;}this._oUOMInputFlexItemData=new F(e);return this._oUOMInputFlexItemData;};
c1.prototype._getStaticUOMTextFlexItemData=function(e){var i=this._oUOMTextFlexItemData;if(i&&!i.bIsDestroyed){return i;}this._oUOMTextFlexItemData=new F(e);return this._oUOMTextFlexItemData;};
c1.prototype._getValueHelpDialogTitle=function(e){e.dialogtitle=this._oParent.getComputedTextLabel();if(!e.dialogtitle){var i=this.getEdmProperty();e.dialogtitle=this._oHelper.oAnnotation.getLabel(i)||i.name;}};
c1.prototype._onCreateUOM=function(e,i){var n=e.getItems(),d1;this.addValidations(n[0],"setComplexClientErrorFirstOperand");if(i&&i.getValue){i.getValue=function(){return n[0].getValue();};}i.uom=function(){return n[1].getValue();};i.uomset=function(e1){n[1].setValue(e1);};if(i.type){d1=this._oFieldControl.getMandatoryCheck(i.type.property);if(d1){i.type.type.oFieldControl=d1;}}};
c1.prototype.triggerCreationOfControls=function(e){try{if(e){this._init(e);}this._setUOMEditState();var i=this._hasBoundFieldControl();var n=this._bReBindOnVL&&i;if(!n){this._oFieldControl.bindProperties({metadata:this._oMetaData});}this._oParent._toggleInnerControlIfRequired();this._addLabelAndQuickInfo();if(!n){this._oParent.fireInitialise();}}catch(d1){z.error(d1,null,this.getMetadata().getName());}};
c1.prototype._checkTextInDisplayModeValueList=function(){var e=this._oHelper.getValueListAnnotationPath(this._oMetaData),i=this.getEdmProperty();return!!(this._oMetaData.annotations&&this._oMetaData.annotations.valuelist!==undefined&&(i.type==="Edm.String"||i.type==="Edm.Guid")&&this._getDisplayBehaviourConfiguration("defaultInputFieldDisplayBehaviour")&&this._oParent.getMode()==="display"&&this._oParent.getFetchValueListReadOnly()&&e&&!this._oParent.getExpandNavigationProperties()&&!this._oHelper.startWithNavigationProperty(e,this._oMetaData)&&!this.isValueInitialWithTextArrangement(i));};
c1.prototype.isValueInitialWithTextArrangement=function(e){return this._oParent._isValueInitial()&&this._oHelper.oAnnotation.getText(e);};
c1.prototype.reBindIfNecessary=function(){if(this._bInitialized&&this.bPending===false&&this._checkTextInDisplayModeValueList()){if(!this._oModel){return;}this._oModel.getMetaModel().loaded().then(function(){var e;if(!this._oParent){return false;}this._init(this._oMeta);e=this._oMetaData.annotations.valuelist;if(typeof e==="string"){return this._oHelper.loadValueListAnnotation(e);}return false;}.bind(this)).then(function(e){if(e&&this._oParent&&this._oParent.getMode()==="display"){this.reBind();}}.bind(this)).catch(function(){});}};
c1.prototype.reBind=function(){this._bReBindOnVL=true;this.bind().finally(function(){this._bReBindOnVL=false;}.bind(this));};
c1.prototype._hasBoundFieldControl=function(){var e=this._oFieldControl.getPropertyNames();for(var i=0;i<e.length;i++){if(this._oParent.getBinding(e[i])){return true;}}return false;};
c1.prototype.bind=function(){if(!(!this._bInitialized&&!this.bPending)&&!this._bReBindOnVL){return Promise.resolve();}this._bInitialized=true;var e=this._oParent.data("configdata");if(e&&e.configdata){this.triggerCreationOfControls(this._oMeta);return Promise.resolve();}if(!this._oModel){return Promise.resolve();}var i=!!(this._oParent&&this._oParent.isTextInEditModeSourceNotNone());if(!i&&this._oModel.bMetaModelLoaded&&(this._oParent.getMode()!=="display"||!this._oParent.getFetchValueListReadOnly())){this.triggerCreationOfControls(this._oMeta);return Promise.resolve();}this.bPending=true;var n=this._oModel.getMetaModel().loaded().catch(function(e1){z.error("The meta model could not be loaded.",e1,this.getMetadata().getName());}.bind(this));var d1=n.then(function f1(){if(!this._oParent){this.bPending=false;return Promise.reject();}this._init(this._oMeta);this._bTextInDisplayModeValueList=this._checkTextInDisplayModeValueList();if((this._oParent.getMode()!=="display"&&i)||this._bTextInDisplayModeValueList){var e1=this._oMetaData.annotations.valuelist;if(typeof e1==="string"){return this._oHelper.loadValueListAnnotation(e1);}else{this.bPending=false;this.triggerCreationOfControls();return Promise.reject();}}this.bPending=false;this.triggerCreationOfControls();}.bind(this)).then(function f1(e1){if(!i&&!this._bTextInDisplayModeValueList){return;}if(!this._oParent){return;}this.bPending=false;if(e1){this._initValueList(e1);}this.triggerCreationOfControls();if(e1&&this.oTextArrangementDelegate){this.oTextArrangementDelegate.fetchIDAndDescriptionCollectionIfRequired();if(!this.bHasListenerModelContextChange){this.bHasListenerModelContextChange=true;this._oParent.attachModelContextChange(this._handleModelContextChangeEvent.bind(this));}}}.bind(this)).catch(function(e1){if(e1){z.error(e1,null,this.getMetadata().getName()+".onMetaModelLoaded");}}.bind(this));return d1;};
c1.prototype._handleModelContextChangeEvent=function(){if(this._oParent&&this._oParent.getModel()&&this._oParent.getBindingContext()){this.oTextArrangementDelegate.fetchIDAndDescriptionCollectionIfRequired();}};
c1.prototype._addLabelAndQuickInfo=function(){var e=this.getDataProperty();e=e.property;var i=this._oHelper.oAnnotation.getLabel(e);var n=this._oHelper.oAnnotation.getQuickInfo(e);if(i){this._oParent._sAnnotationLabel=i;}if(n&&this._oParent.isPropertyInitial("tooltipLabel")){this._oParent.setTooltipLabel(n);}};
c1.prototype.rebindOnCreated=function(){var e,i=this._oFieldControl.getControlFormatters(this._oMetaData,["editable"]);for(var n in i){e=this._oBinding.fromFormatter(this._oMetaData.model,i[n]);this._oParent.bindProperty(n,e);}};
c1.prototype._setUOMEditState=function(){if(this._oFieldControl.hasUomEditState(this._oMetaData)){var e=this._oFieldControl.getUOMEditState(this._oMetaData);if(e){var i=this._oBinding.fromFormatter(this._oMetaData.model,e);this._oParent.bindProperty("uomEditState",i);}}};
c1.prototype.getDataProperty=function(){return this._oMetaData.property;};
c1.prototype.getDropdownItemKeyType=function(e){var i=e.getMetadata().getName();if((i==="sap.ui.comp.smartfield.DisplayComboBox")||(i==="sap.m.ComboBox")||(i==="sap.ui.comp.smartfield.ComboBox")||(i==="sap.m.Select")){var n=c1.getBoundPropertiesMapInfoForControl(i,{propertyName:"value"})[0];var d1=e.getBindingInfo(n);return(d1&&d1.type)||null;}return null;};
c1.prototype.getMetaData=function(){return this._oMetaData;};
c1.prototype.getODataHelper=function(){return this._oHelper;};
c1.prototype._getChangeEventParams=function(e){var i,n={},d1=e&&e.getParameters();if(d1){i=d1.value;n.value=i;n.newValue=i;if(d1.validated){n.validated=d1.validated;}}else{n=e;}return n;};
c1.prototype.destroy=function(){if(this._oFieldControl){this._oFieldControl.destroy();}if(this._oSelector){this._oSelector.destroy();}if(this._oTypes){this._oTypes.destroy();}if(this._oHelper){this._oHelper.destroy();}if(this.oType){this.oType.destroy();this.oType=null;}if(this.oTextArrangementDelegate){this.oTextArrangementDelegate.destroy();}this._oHelper=null;this._oFieldControl=null;this._oTypes=null;this._oSelector=null;this._oMetaData=null;this._oAmountInputFlexItemData=null;this._oUOMInputFlexItemData=null;this._oUOMTextFlexItemData=null;this.oMeasureField=null;this.oTextArrangementDelegate=null;h.prototype.destroy.apply(this,arguments);};
return c1;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataControlSelector',[],function(){"use strict";var O=function(m,p,t){this._oMetaData=m;this._oParent=p;this._oTypes=t;};
O.prototype.checkComboBox=function(c){var r={},d=this._oParent.getMode();if(d==="display"||d==="display_uom"){r.combobox=false;return r;}return this._checkComboBox(c);};
O.prototype._checkComboBox=function(c){var r={};if(this._oMetaData.annotations.valuelist){r.valuelistType=this._oMetaData.annotations.valuelistType;r.annotation=this._oMetaData.annotations.valuelist;}if(!r.annotation){return r;}if((r.valuelistType==="fixed-values")&&!c){r.combobox=true;}if(!r.combobox){r.annotation=this._oMetaData.annotations.valuelist;r.combobox=this._checkConfig("dropDownList");}return r;};
O.prototype.checkSelection=function(){var r={};if(this._oMetaData.annotations.valuelist){r.annotation=this._oMetaData.annotations.valuelist;r.selection=this._checkConfig("selection");}return r;};
O.prototype.checkCheckBox=function(){var b,m;if(this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.String"){b=this._oParent.getBindingInfo("value");m=this._oTypes.getMaxLength(this._oMetaData.property,b);if(m===1){if(this._checkConfig("checkBox")){return true;}}}return false;};
O.prototype.checkDatePicker=function(){if(this._oMetaData.property&&this._oMetaData.property.property&&(this._oMetaData.property.property["sap:display-format"]==="Date"||this._oTypes.isCalendarDate(this._oMetaData.property))){return true;}return this._checkConfig("datePicker");};
O.prototype._checkConfig=function(t){var c=this._oParent.getConfiguration();if(c){return c.getControlType()===t;}return false;};
O.prototype.getCreator=function(b){var c=true,C;var m={"Edm.Decimal":"_createEdmNumeric","Edm.Double":"_createEdmNumeric","Edm.Float":"_createEdmNumeric","Edm.Single":"_createEdmNumeric","Edm.Int16":"_createEdmNumeric","Edm.Int32":"_createEdmNumeric","Edm.Int64":"_createEdmNumeric","Edm.Byte":"_createEdmNumeric","Edm.DateTimeOffset":"_createEdmDateTimeOffset","Edm.DateTime":"_createEdmDateTime","Edm.Boolean":"_createEdmBoolean","Edm.String":"_createEdmString","Edm.Time":"_createEdmTime"};if(this._isUOMDisplayObjectStatus()){return"_createEdmUOMObjectStatus";}if(this._isUOMDisplay()){return"_createEdmUOMObjectNumber";}C=this._oParent.data("configdata");if(C&&C.configdata&&C.configdata.isUOM){if(C.configdata.getContextEditable){c=C.configdata.getContextEditable();}}if(!this._oParent.getEditable()||!this._oParent.getEnabled()||!this._oParent.getContextEditable()||!c){if(this._oMetaData.annotations){if(this.useObjectIdentifier(this.checkDatePicker())&&this._oMetaData.annotations.text&&this._oMetaData.annotations.semanticKeys&&this._oMetaData.annotations.semanticKeys.semanticKeyFields&&this._oMetaData.annotations.semanticKeys.semanticKeyFields.indexOf(this._oMetaData.path)>-1){return"_createEdmDisplay";}if(this._oMetaData.annotations.semantic&&!b){return"_createEdmSemantic";}if(this._oMetaData.annotations.uom){return"_createEdmUOMDisplay";}if(this._isObjectStatusProposed()){return"_createObjectStatus";}return(this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.Boolean")?"_createEdmBoolean":"_createEdmDisplay";}}if(this._oMetaData.annotations&&this._oMetaData.annotations.uom){return"_createEdmUOM";}if(this._oMetaData.property&&this._oMetaData.property.property){if(this._oTypes.isCalendarDate(this._oMetaData.property)){return"_createEdmDateTime";}return m[this._oMetaData.property.property.type]||"_createEdmString";}return null;};
O.prototype._isUOMDisplay=function(){if(this._oMetaData.annotations.uom){if(this._isObjectNumberProposed()){if(!this._oParent.getContextEditable()||(!this._oParent.getEditable()&&!this._oParent.getUomEditable())||(!this._oParent.getEnabled()&&!this._oParent.getUomEnabled())){return true;}if(this._oParent.getProperty("uomEditState")===0){return true;}}}return false;};
O.prototype._isUOMDisplayObjectStatus=function(){if(this._oMetaData.annotations.uom){if(this._isObjectStatusProposed()){if(!this._oParent.getContextEditable()||(!this._oParent.getEditable()&&!this._oParent.getUomEditable())||(!this._oParent.getEnabled()&&!this._oParent.getUomEnabled())){return true;}if(this._oParent.getProperty("uomEditState")===0){return true;}}}return false;};
O.prototype._isObjectStatusProposed=function(){var p=this._oParent.getControlProposal(),s;if(p){s=p.getObjectStatus();if(s){return true;}}return false;};
O.prototype._isObjectNumberProposed=function(){var p;if(this._oParent.data("suppressUnit")!=="true"){p=this._oParent.getControlProposal();if(p&&p.getControlType()==="ObjectNumber"){return true;}if(this._oParent.getProposedControl()==="ObjectNumber"){return true;}}return false;};
O.prototype.useObjectIdentifier=function(d,m){var p;if(this._oMetaData&&this._oMetaData.property&&this._oMetaData.property.property&&this._oMetaData.property.property.type==="Edm.String"){if(!d&&!m){p=this._oParent.getControlProposal();if(p&&p.getControlType()==="ObjectIdentifier"){return true;}if(this._oParent.getProposedControl()==="ObjectIdentifier"){return true;}}}return false;};
O.prototype.destroy=function(){this._oParent=null;this._oMetaData=null;this._oTypes=null;};
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataHelper',["sap/ui/comp/library","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/smartfield/AnnotationHelper","sap/base/Log","sap/ui/model/odata/_ODataMetaModelUtils","sap/ui/model/odata/ODataUtils","sap/base/assert"],function(l,M,A,L,O,a,b){"use strict";var T=l.TextArrangementType;var c=function(m,u,o){if(m){this.oMeta=m.getMetaModel();}if(o){this.oMeta=o;}this._oModel=m;this._oUtil=u;this.oAnnotation=new A();};
c.prototype.getAnalyzer=function(m){if(!this._oAnalyzer){this._oAnalyzer=new M(this._oModel||m);}return this._oAnalyzer;};
c.prototype.checkNavigationProperty=function(m,C){var p,P,d,r;if(C&&m){p=this._oUtil.getNavigationProperties(C);d=p.paths.length;while(d--){P=p.paths.shift();P=this._oUtil.correctPath(P);if(P===""||P===m.entitySet.name){continue;}r=this.getNavigationProperty(m.entityType,P);if(r.entitySet){m.entitySet=r.entitySet;m.entityType=r.entityType;}}}};
c.prototype.getNavigationProperty=function(e,p){var n=this._getNamedProperty(p,"navigationProperty",e),t,o,r={};if(n){t=this.oMeta.getODataAssociationSetEnd(e,n.name);o=this.getAssociation(e,n.name);if(o){r.toRoleAssociationEndMultiplicity=this.getToRoleAssociationEndMultiplicity(o.end,n.toRole);}r.entitySet=this.oMeta.getODataEntitySet(t.entitySet);if(r.entitySet){r.entityType=this.oMeta.getODataEntityType(r.entitySet.entityType);}}return r;};
c.prototype.startWithNavigationProperty=function(p,m){var P=p.split("/"),o;if(P&&P.length>1){o=this._getNamedProperty(P.shift(),"navigationProperty",m.entityType);}if(o){return o.name;}return null;};
c.prototype.getProperty=function(m){var n=[],d,p,P,s,e,r={entityType:m.entityType,entitySet:m.entitySet};if(m){p=m.path.split("/");d=p.length;if(d>1){while(r.entityType){s=p[0];r=this.getNavigationProperty(r.entityType,s);if(r.entityType){m.entityType=r.entityType;m.entitySet=r.entitySet;m.toRoleAssociationEndMultiplicity=r.toRoleAssociationEndMultiplicity;n.push(p.shift());d--;}}}m.navigationPath=n.join("/");if(d>1){P=this.oMeta.getODataProperty(m.entityType,p[0]);if(P){m.property=this._getComplex(P,p,d);}return;}if(m.navigationPath){e=m.path.replace(m.navigationPath+"/","");}else{e=m.path;}P=this.oMeta.getODataProperty(m.entityType,e);m.property={property:P,typePath:m.path,valueListAnnotation:null,valueListKeyProperty:null,valueListEntitySet:null,valueListEntityType:null};}};
c.prototype._getComplex=function(p,P,i){var o=p,t,C=[];while(i--){if(o){if(i===0){t=o.name;o=this._getNamedProperty(P[0],"property",o);return{typePath:t+"/"+P[0],property:o,complex:true,parents:C};}o=this.oMeta.getODataComplexType(o.type);if(o){C.push(o);}}P.shift();}};
c.prototype._getNamedProperty=function(n,s,p){var r;if(p[s]){for(var i=0;i<p[s].length;i++){if(p[s][i].name===n){r=p[s][i];break;}}}return r;};
c.prototype.getTextProperty2=function(m){var s,o;s=this.oAnnotation.getText(m.property.property);if(s){o=this._preprocAnnotation(s,m);this.getProperty(o);this._postprocAnnotation(o,m);}return o;};
c.prototype.getUnitOfMeasure2=function(m){var s,o;s=this.oAnnotation.getUnit(m.property.property);if(s){o=this._preprocAnnotation(s,m);this.getProperty(o);this._postprocAnnotation(o,m);}return o;};
c.prototype._preprocAnnotation=function(s,m){var p,o;o=this.traverseNavigationProperties(s,m.entityType);if(!o.navigationPath){o.entitySet=m.entitySet;}if(m.navigationPath){o.path=m.path.replace(m.navigationPath+"/","");}else{o.path=m.path;}if(o.navigationPath){p=s.replace(o.navigationPath+"/","");}else{p=s;}o.path=o.path.replace(m.property.property.name,p);if(o.navigationPath){o.navigationPathHelp=o.navigationPath;}return o;};
c.prototype._postprocAnnotation=function(m,o){var p;if(m.navigationPathHelp){m.navigationPath=m.navigationPathHelp;}if(m.navigationPath){p=m.navigationPath;}else{p="";}if(o.navigationPath){if(p){p=o.navigationPath+"/"+p;}else{p=o.navigationPath;}}m.navigationPath=p;if(m.navigationPath){m.path=m.navigationPath+"/"+m.path;}};
c.prototype.traverseNavigationProperties=function(p,e){var r={},R={},P,s,d;P=p.split("/");d=P.length;r.entityType=e;R.entityType=e;while(d--){s=P.shift();if(s===""){continue;}R=this.getNavigationProperty(r.entityType,s);if(!R.entitySet){break;}r.entityType=R.entityType;r.entitySet=R.entitySet;if(r.navigationPath){r.navigationPath=r.navigationPath+"/"+s;}else{r.navigationPath=s;}}return r;};
c.prototype.getValueListAnnotationPath=function(m){var p,d,e=this.getEdmProperty(m),E=e?e.name:"";if(m&&m.property&&m.property.complex){d=m.property.parents.length-1;p=m.property.parents[d].namespace;p=p+"."+m.property.typePath;}else if(m&&m.entitySet&&e){p=m.entitySet.entityType+"/"+E;}return p;};
c.prototype.getUOMValueListAnnotationPath=function(m){var p;if(m.annotations.uom){p=this.getValueListAnnotationPath(m.annotations.uom);}if(p){m.annotations.valuelistuom=p;}};
c.prototype.getUOMTextAnnotation=function(m){if(m&&m.annotations&&m.annotations.uom){m.annotations.textuom=this.getTextProperty2(m.annotations.uom);}};
c.prototype.geValueListEntitySet=function(m){if(m&&m.annotations&&m.annotations.valuelist){if(m.annotations.valuelist.primaryValueListAnnotation&&m.annotations.valuelist.primaryValueListAnnotation.valueListEntitySetName){m.annotations.valuelistentityset=this.oMeta.getODataEntitySet(m.annotations.valuelist.primaryValueListAnnotation.valueListEntitySetName);}}};
c.prototype.getEdmProperty=function(m){var o=m.property;return(o&&o.property)||null;};
c.prototype.getValueListData=function(m){var o=this.getEdmProperty(m),d=m.annotations;if(M.isValueList(o)){d.valuelist=this.getValueListAnnotationPath(m);var v=M.getValueListMode(o);if(v){d.valuelistType=v;}else{d.valuelistType=this.getAnalyzer().getValueListSemantics(o["com.sap.vocabularies.Common.v1.ValueList"]);}}};
c.prototype.findProperty=function(p,P){return O.findObject(p,P);};
c.prototype.getAssociation=function(e,n){var N;if(e){N=this.findProperty(e.navigationProperty,n);}if(N&&this.oMeta.oModel){return O.getObject(this.oMeta.oModel,"association",N.relationship);}return null;};
c.prototype.getToRoleAssociationEnd=function(d,n){if(Array.isArray(d)){for(var i=0;i<d.length;i++){var o=d[i];if(o.role===n){return o;}}}return null;};
c.prototype.getToRoleAssociationEndMultiplicity=function(d,n){var o=this.getToRoleAssociationEnd(d,n);return o?o.multiplicity:"";};
c.prototype.checkNavigationPropertyRequiredMetadata=function(m){var e=m.propertyName,t=m.textAnnotation,s=t?t.Path:"",E=m.entityType,d=E.namespace+"."+E.name,C="sap.ui.comp.smartfield.ODataHelper",f="com.sap.vocabularies.Common.v1.Text";if(!t){L.info('Missing "'+f+'" annotation for "'+e+'" EDM property of "'+d+'" entity type.',C);return false;}if(s===undefined){b(false,'Missing "Path" attribute of "'+f+'" annotation for "'+e+'" EDM property of "'+d+'" entity type. - '+C);return false;}if(s===""){b(false,'Missing URL path name of "'+f+'" annotation for "'+e+'" EDM property of "'+d+'" entity type. - '+C);return false;}var g="com.sap.vocabularies.UI.v1.TextArrangement",o=t[g];if(!o){L.info('Missing "'+g+'" annotation for "'+e+'" EDM property of "'+d+'" entity type.',C);return false;}var v=o.EnumMember;if(v===undefined){b(false,'Missing "EnumMember" attribute of "'+g+'" annotation for "'+e+'" EDM property of "'+d+'" entity type. - '+C);return false;}if(!(v.split("/")[1]in T)){b(false,'Invalid "'+v+'" Text annotation enumeration member for "'+e+'" EDM property of "'+d+'" entity type. - '+C);return false;}if(o.EnumMember===T.TextSeparate){return false;}if(s.indexOf("/")===-1){b(false,'Invalid navigation property URL path name specified in the "'+f+'" annotation of the "'+e+'" EDM property of the "'+d+'" entity type. - '+C);return false;}var n=s.split("/")[0],N=this.findProperty(E.navigationProperty,n);if(!N){b(false,'The navigation property URL path name "'+n+'" (specified in the Text annotation of the "'+e+'" EDM property) was not found in the "'+d+'" entity type of the service metadata document. - '+C);return false;}var h=this.getAssociation(E,n);if(!h){b(false,'Missing "'+N.relationship+'" association for "'+N.name+'" EDM navigation property of the "'+d+'" entity type. - '+C);return false;}var r=h.referentialConstraint;if(!r){b(false,'Missing referential constraint for "'+N.relationship+'" association in the service metadata document. - '+C);return false;}if(!Array.isArray(h.end)||!(h.end.length>0)){b(false,'Missing association end for "'+N.relationship+'" association in the service metadata document. - '+C);return false;}var i=this.getToRoleAssociationEndMultiplicity(h.end,N.toRole);if(i!=="1"){b(false,'Expected multiplicity of 1 for "'+N.toRole+'" association end of the "'+N.relationship+'" association in the service metadata document. - '+C);return false;}if((r.principal.propertyRef.length!==1)||(r.dependent.propertyRef.length!==1)){b(false,'Expected the single "'+e+'" foreign key EDM property as '+'referential constraint in the "'+N.relationship+'" association. - '+C);return false;}var j=m.entityTypeOfNavigationProperty||this.getNavigationProperty(E,n).entityType;if(j.key.propertyRef.length!==1){b(false,'Expected a single key property in the lookup "'+j.namespace+"."+j.name+'" entity type. - '+C);return false;}var R=r.principal.propertyRef[0].name;if(R!==j.key.propertyRef[0].name){b(false,'Expected a property named "'+R+'" to be the single key property in the lookup "'+j.namespace+"."+j.name+'" entity type. - '+C);return false;}return true;};
c.prototype.checkNavigationPropertyRequiredMetadataNoAsserts=function(m){var t=m.textAnnotation,s=t?t.Path:"",e=m.entityType;if(!t){return false;}if(s===undefined){return false;}if(s===""){return false;}var d="com.sap.vocabularies.UI.v1.TextArrangement",o=t[d];if(!o){return false;}var v=o.EnumMember;if(v===undefined){return false;}if(!(v.split("/")[1]in T)){return false;}if(o.EnumMember===T.TextSeparate){return false;}if(s.indexOf("/")===-1){return false;}var n=s.split("/")[0],N=this.findProperty(e.navigationProperty,n);if(!N){return false;}var f=this.getAssociation(e,n);if(!f){return false;}var r=f.referentialConstraint;if(!r){return false;}if(!Array.isArray(f.end)||!(f.end.length>0)){return false;}var g=this.getToRoleAssociationEndMultiplicity(f.end,N.toRole);if(g!=="1"){return false;}if((r.principal.propertyRef.length!==1)||(r.dependent.propertyRef.length!==1)){return false;}var E=m.entityTypeOfNavigationProperty||this.getNavigationProperty(e,n).entityType;if(E.key.propertyRef.length!==1){return false;}var R=r.principal.propertyRef[0].name;if(R!==E.key.propertyRef[0].name){return false;}return true;};
c.prototype.checkValueListRequiredMetadataForTextArrangmentNoAsserts=function(m){var v=m.valueListAnnotation;if(!v){return false;}if(!Array.isArray(v.fields)){return false;}var d=v.descriptionField,V=this.findProperty(v.fields,d);if(!V){return false;}if(V["sap:filterable"]==="false"){return false;}return true;};
c.prototype.checkValueListRequiredMetadataForTextArrangment=function(m){var v=m.valueListAnnotation,C="sap.ui.comp.smartfield.ODataHelper";if(!v){var e=m.entityType,E=e.namespace+"."+e.name;b(false,'Missing "ValueList" annotation for "'+m.propertyName+'" EDM property of "'+E+'" entity type. - '+C);return false;}if(!Array.isArray(v.fields)){b(false,'Missing fields for "'+v.valueListEntityName+'" entity. - '+C);return false;}var d=v.descriptionField,V=this.findProperty(v.fields,d);if(!V){b(false,'The "'+d+'" description field was not found '+'in the service metadata document. - '+C);return false;}if(V["sap:filterable"]==="false"){b(false,'Expected the "'+V.fullName+'" field to be filterable. - '+C);return false;}return true;};
c.prototype.getEdmDisplayPath=function(m){var t=m.annotations.text;if(t){return t.path;}return m.path;};
c.prototype.getTextAnnotationPropertyPath=function(t){return t?t.path:"";};
c.prototype.getAbsolutePropertyPathToValueListEntity=function(s){var v=s.property,V=v&&v["com.sap.vocabularies.Common.v1.Text"],B=s.bindingContextPath;if((typeof B==="string")&&(B!=="")){return B+"/"+V.Path;}var o=s.entitySet,e=s.entityID,d;if((e==null)||(e==="")){return"";}if(V&&o){if(s.property.type=="Edm.Guid"){d=s.entityID.toLowerCase();}else{d=s.entityID;}d=a.formatValue(d,s.property.type,true);return"/"+o.name+"("+d+")"+"/"+V.Path;}return"";};
c.prototype.getODataValueListKeyProperty=function(v){for(var i=0;i<v.fields.length;i++){var f=v.fields[i];if(f.name===v.keyField){return f;}}};
c.prototype.getUOMPath=function(m){if(m&&m.annotations&&m.annotations.uom){return m.annotations.uom.path;}return null;};
c.prototype.getUOMTypePath=function(m){if(m.property.complex){return m.property.typePath.replace(m.property.property.name,m.annotations.uom.property.name);}return m.annotations.uom.property.name;};
c.prototype.getSelectionChangeHandler=function(C){return function(p){var k="";try{var i=p.getParameter("selectedItem");if(i){k=i.getKey();}C.fireChange({value:k,newValue:k,selectionChange:true});}catch(e){L.warning(e);}};};
c.prototype.destroy=function(){if(this._oAnalyzer){this._oAnalyzer.destroy();}if(this.oAnnotation){this.oAnnotation.destroy();}this._oUtil=null;this.oMeta=null;this.oAnalyzer=null;this.oAnnotation=null;};
c.prototype.getAutoExpandProperties=function(m){var n=[],d=[];for(var s in m){switch(s){case"com.sap.vocabularies.Common.v1.Text":case"Org.OData.Measures.V1.Unit":case"Org.OData.Measures.V1.ISOCurrency":case"com.sap.vocabularies.Common.v1.FieldControl":if(m[s].Path){d=m[s].Path.split("/");}break;}if(d.length>1&&n.indexOf(d[0])<0){n.push(d[0]);}}return n.join(",");};
c.prototype.loadValueListAnnotation=function(p){var P=this.getAnalyzer().getValueListAnnotationLazy(p);P.catch(function(){L.error("The value list annotation could not be loaded.",undefined,"sap.ui.comp.smartfield.ODataHelper.loadValueListAnnotation");});return P;};
return c;},true);
sap.ui.predefine('sap/ui/comp/smartfield/ODataTypes',["sap/ui/model/SimpleType","sap/ui/core/format/NumberFormat","sap/ui/model/odata/type/Boolean","sap/ui/comp/smartfield/type/Double","sap/ui/comp/smartfield/type/DateTime","sap/ui/comp/odata/type/StringDate","sap/ui/comp/odata/type/FiscalDate","sap/ui/comp/odata/type/NumericText","sap/ui/comp/smartfield/type/DateTimeOffset","sap/ui/comp/smartfield/type/Decimal","sap/ui/comp/smartfield/type/Int16","sap/ui/comp/smartfield/type/Int32","sap/ui/comp/smartfield/type/Int64","sap/ui/comp/smartfield/type/Byte","sap/ui/comp/smartfield/type/SByte","sap/ui/comp/smartfield/type/String","sap/ui/comp/smartfield/type/TextArrangementString","sap/ui/comp/smartfield/type/TextArrangementGuid","sap/ui/comp/smartfield/type/AbapBool","sap/ui/comp/smartfield/type/Currency","sap/ui/comp/smartfield/type/Time","sap/ui/comp/smartfield/type/Guid","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/odata/FiscalMetadata","sap/ui/comp/smartfield/type/Unit"],function(S,N,B,D,a,b,F,c,d,e,I,f,g,h,i,j,T,k,A,C,l,G,M,m,U){"use strict";var O=function(P){this._oParent=P;};
O.prototype.getType=function(P,n,r,s){s=s||{};var t=this._oParent.getBindingInfo("value"),u=t&&t.binding&&t.binding.getType(),v=s.composite&&(u instanceof S);if(u&&!v){return o(u);}if(P&&P.property&&P.property.type){if(!u){r=this.getConstraints(P.property,r);n=this.getFormatOptions(P.property,n);}switch(P.property.type){case"Edm.Boolean":return new B(n,r);case"Edm.Double":return new D(n,r);case"Edm.Decimal":case"Edm.Single":return new e(n,this._getDecimalConstraints(P,r));case"Edm.Int16":return new I(n,r);case"Edm.Int32":return new f(n,r);case"Edm.Int64":return new g(n,r);case"Edm.Byte":return new h(n,r);case"Edm.SByte":return new i(n,r);case"Edm.DateTimeOffset":return new d(n,r);case"Edm.DateTime":return new a(n,this._getDateTimeConstraints(P,r));case"Edm.String":if(this.isCalendarDate(P)){return new b(n);}var w=m.getFiscalAnotationType(P.property);if(w){return new F(n,r,{anotationType:w});}if(!u){r=this._getStringConstraints(P);}if(r.isDigitSequence&&!s.composite){return new c(n,r);}if(s.composite){n=Object.assign({},n,this._getTextArrangementFormatOptions());return new T(n,r,this._getTextArrangementOptions(s));}return new j(n,r);case"Edm.Time":return new l(n,r);case"Edm.Guid":var V={},x=this._getTextArrangementFormatOptions();if(M.hasTextArrangementAnnotation(P.property)&&x&&x.textArrangement==="descriptionOnly"){V={validateException:{resourceBundle:"sap.ui.comp",text:"ENTER_GUID_OR_DESCRIPTION"}};}if(s.composite){n=Object.assign({},n,this._getTextArrangementFormatOptions());return new k(n,r,this._getTextArrangementOptions(s));}return new G(n,r,V);default:return null;}}return null;};
function o(t){var P=t.parseValue,n=t.destroy;t.parseValue=function(v,s){var r=P.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};t.destroy=function(){n.apply(this,arguments);this.oFieldControl=null;};return t;}
O.prototype.getConstraints=function(P,n){return Object.assign({},n,{nullable:M.isNullable(P),skipDecimalsValidation:M.isSkippingMeasuredQuantityCheck(P)});};
O.prototype.getFormatOptions=function(P,n){var r={};if(M.isUpperCase(P)){r.displayFormat="UpperCase";}return Object.assign({},n,r);};
O.prototype._getDateTimeConstraints=function(P,r){var s={},n;if((P.property["sap:display-format"]==="Date")||this.isCalendarDate(P)){s={displayFormat:"Date"};}for(n in r){s[n]=r[n];}return s;};
O.prototype.getMaxLength=function(P,n){var v=[],V,r=0;if(n&&n.constraints){if(n.constraints.maxLength&&n.constraints.maxLength>-1){v.push(n.constraints.maxLength);}}if(n&&n.type&&n.type.oConstraints){if(n.type.oConstraints.maxLength&&n.type.oConstraints.maxLength>-1){v.push(n.type.oConstraints.maxLength);}}if(P&&P.property&&P.property.maxLength){var s=parseInt(P.property.maxLength);if(s>-1){v.push(s);}}var t=this._oParent.getMaxLength();if(t>0){v.push(t);}var u=v.length;while(u--){V=v[u];if(V>0){if(r>0){if(V<r){r=V;}}else{r=V;}}}return r;};
O.prototype._getDecimalConstraints=function(P,n){var E=P.property;n=n||{};if(E.precision){n.precision=parseInt(E.precision);}if(E.scale){n.scale=parseInt(E.scale);}if(E["sap:variable-scale"]){n.variableScale=E["sap:variable-scale"]==="true";}return n;};
O.prototype._getTextArrangementFormatOptions=function(){return{textArrangement:this._oParent.getControlFactory()._getDisplayBehaviourConfiguration()};};
O.prototype._getStringConstraints=function(P,n){n=n||{};var r=this._oParent.getBindingInfo("value"),s=this.getMaxLength(P,r),E;if(r&&r.type&&r.type.oConstraints){if(r.type.oConstraints.equals){E=r.type.oConstraints.equals;}}if(s>0||E){if(s>0){n.maxLength=s;}if(E){n.equals=E;}}if(M.isDigitSequence(P.property)){n.isDigitSequence=true;}return n;};
O.prototype._getTextArrangementOptions=function(n){var t=this._oParent.getControlFactory().oTextArrangementDelegate;return{keyField:n.keyField,descriptionField:n.descriptionField,valueListNoValidation:n.valueListNoValidation,onBeforeValidateValue:t.onBeforeValidateValue.bind(t),delegate:n.delegate};};
O.prototype.isCalendarDate=function(P){var n=P.property["com.sap.vocabularies.Common.v1.IsCalendarDate"];if(n&&n.Bool){return n.Bool?n.Bool!=="false":true;}return false;};
O.prototype.getDisplayFormatter=function(P,s){s=s||{};if(s.currency){return this.getCurrencyDisplayFormatter(s);}else if(s.type&&s.type.oConstraints&&s.type.oConstraints.scale&&P.scale){P.scale=s.type.oConstraints.scale;}return this.getUOMDisplayFormatter(P,s);};
O.prototype.getCurrencyDisplayFormatter=function(s){var n=new C({showMeasure:false,emptyString:NaN});return function(r,t,u){var v,w,L,x,P,y=this&&this.oParent&&this.oParent.oParent,z=y&&y.isA("sap.ui.comp.smartfield.SmartField")&&y.isFormContextType();if(!r||!t||t==="*"){return"";}if(!s.currency){v=r+="\u2008";return v;}if(isNaN(parseFloat(r))){return r.toString()+"\u2008";}v=n.formatValue([r,t,u],"string");x=u&&u[t]&&u[t].digits;L=n&&n.oOutputFormat&&n.oOutputFormat.oLocaleData.getCurrencyDigits(t);w=x||L;if(w===0&&!z){v+="\u2008";}P=3-w;if(P&&!z&&v){v=v.padEnd(v.length+P,"\u2007");}else{v+="\u2007";}if(s.mask){return O.maskValue(v);}return v;};};
O.prototype.getUOMDisplayFormatter=function(P,s){var n=new U({showMeasure:false,emptyString:NaN},{scale:P&&P.scale?P.scale:0});return function(v,u,r){var V,t,w=this&&this.oParent&&this.oParent.oParent,x=w&&w.isA("sap.ui.comp.smartfield.SmartField")&&w.isFormContextType();if((!v&&v!==0)||(!u&&u!=="")||u==="*"){return"";}if(isNaN(parseFloat(v))){return v.toString()+"\u2008";}V=n.formatValue([v,u,r],"string");t=r&&r[u]&&r[u].UnitSpecificScale;if((t===0||t===null)&&!x){V+="\u2008";}if(x){V+="\u2007";}if(s&&s.mask){return O.maskValue(V);}return V;};};
O.maskValue=function(t){if(t){return t.replace(new RegExp(".","igm"),"*");}return t;};
O.prototype.getCurrencyType=function(P){if(P){var n=this._getDecimalConstraints(P),r=this.getConstraints(P.property,n),s=p(r),t=q(n);return new C(s,this.getConstraints(P.property,t));}return null;};
O.prototype.getUoMType=function(P){var n=["edm.int16","edm.int32","edm.byte","edm.double"];if(P){var r=this._getDecimalConstraints(P),s=this.getConstraints(P.property,r),t=p(s);if(n.includes(P.property.type.toLowerCase())){t.parseAsString=false;s.type=P.property.type;}return new U(t,s);}return null;};
function p(n){var E=n.nullable?null:0;return{showMeasure:false,parseAsString:true,emptyString:E,precision:n.precision};}
function q(n){return{precision:n.precision,scale:n.scale,variableScale:n.variableScale};}
O.prototype.getAbapBoolean=function(){return new A();};
O.prototype.destroy=function(){this._oParent=null;};
return O;},true);
sap.ui.predefine('sap/ui/comp/smartfield/SideEffectUtil',["sap/ui/comp/odata/SideEffects"],function(S){"use strict";var a=function(p){this._oParent=p;this._oSideEffects=new S();};
a.prototype.getFieldGroupIDs=function(m,v){var M,c,t,s;if(m.property&&m.property.complex){c=m.property.parents[0];t=this._toTypePath(m.path,c);}M={entitySet:m.entitySet,entityType:m.entityType,complexType:c};s=this._oSideEffects.getSideEffects(m.path,t,M);return this._calcFieldGroups(s,m,v);};
a.prototype._calcFieldGroups=function(s,m,v){var c,b,i,l,g=[],C;b=this._getSideEffects(s,m,v);l=b.length;C=this._oParent.getBindingContext();c=C.getPath();for(i=0;i<l;i++){this._calcFieldGroups2(b[i],g,v,c,C);}return g.length>0?g:null;};
a.prototype._calcFieldGroups2=function(s,g,v,c,C){var u,i,I,t=this;s.sideEffects.forEach(function(o){I={name:o.name,originType:o.originType,originName:s.origin.name,originNamespace:s.origin.namespace,context:c};i=JSON.stringify(I);i=i.substring(1,i.length-2);u=v.data(i);if(!u){u=t.createUUID();I.contextObject=C;v.data(u,I);v.data(i,u);}g.push(u);});};
a.prototype._getSideEffects=function(s,m){var r=[];var R={};R.sideEffects=this._getSideEffectsFromEntity("entitySet",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.entitySet;r.push(R);}R={};R.sideEffects=this._getSideEffectsFromEntity("entityType",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.entityType;r.push(R);}R={};R.sideEffects=this._getSideEffectsFromEntity("complexType",s);if(R.sideEffects&&R.sideEffects.length){R.origin=m.property.parents[0];r.push(R);}return r;};
a.prototype._getSideEffectsFromEntity=function(N,s){var n,b=[];if(s[N]){for(n in s[N]){b.push({name:n,originType:N,sideEffect:s[N][n]});}}return b;};
a.prototype._toTypePath=function(p,c){var P=p.split("/");return p.replace(P[0],c.name);};
a.prototype.createUUID=function(){var d=new Date().getTime();var u="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[x]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==="x"?r:(r&0x7|0x8)).toString(16);});return u;};
a.prototype.destroy=function(){if(this._oSideEffects){this._oSideEffects.destroy();}this._oSideEffects=null;};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartfield/TextArrangementDelegate',["sap/ui/comp/library","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/assert"],function(c,B,F,a,b){"use strict";var T=c.smartfield.TextInEditModeSource;
var d=B.extend("sap.ui.comp.smartfield.TextArrangementDelegate",{constructor:function(o){B.apply(this,arguments);this.oTextArrangementType=null;this.oFactory=o;this.oSmartField=o._oParent;this.bValidMetadata=false;this.sBindingContextPath="";this._mOneTimeDescriptionCache=new Map();}});
d.prototype.setValue=function(v,o){var s=this.oSmartField,C=s._oControl;if(this.bValidMetadata&&(v!==o)&&C){var i=C[C.current],h=i&&i.getBinding("value");if(!h){return;}var m=s.isPropertyBeingUpdatedByModel("value");switch(s._getComputedTextInEditModeSource()){case T.NavigationProperty:var D=!!s.getModel().getData(h.getBindings()[1].getPath(),s.getBindingContext(),true);if((m&&!D)||!m){i.setValue(v);}return;case T.ValueList:case T.ValueListNoValidation:if(!m){i.setValue(v);}else if(this._sTextArrangementLastReadValue!==v){this.fetchIDAndDescriptionCollectionIfRequired();}return;}}};
d.getPaths=function(t,m){var v=m.property&&m.property.valueListAnnotation;switch(t){case T.NavigationProperty:var n=m.annotations.text;if(!n){return{};}return{keyField:n.entityType.key.propertyRef[0].name,descriptionField:n.property.typePath,entitySetName:n.entitySet.name};case T.ValueList:if(!v){return{};}return{keyField:v.keyField,descriptionField:v.descriptionField,entitySetName:m.property.valueListEntitySet&&m.property.valueListEntitySet.name};case T.ValueListNoValidation:if(!v){return{};}return{valueListNoValidation:true,keyField:v.keyField,descriptionField:v.descriptionField,entitySetName:m.property.valueListEntitySet.name};}};
d.prototype.getBindingInfo=function(s){var o,v=s.valueListNoValidation,h={},S=this.oSmartField,i=this.oFactory,m=i._oMetaData;this.oTextArrangementType=s&&s.type;if(!this.oTextArrangementType){var j=S.getBindingInfo("value");this.oTextArrangementType=(j&&j.type)||{};var t=d.getPaths(i._bTextInDisplayModeValueList?T.ValueList:S._getComputedTextInEditModeSource(),m);this.oTextArrangementType=i._oTypes.getType(m.property,Object.assign(h,this.oTextArrangementType.oFormatOptions),this.oTextArrangementType.oConstraints,{composite:true,keyField:t.keyField,descriptionField:t.descriptionField,valueListNoValidation:v,delegate:this});}var k=this.getTextAnnotationPropertyPath();if(k===""||k.indexOf("undefined")!==-1){k="__$$SmartFieldNotExistingBindingPath";}o={model:m.model,type:this.oTextArrangementType,parts:[{path:m.path},{path:k}]};return o;};
d.prototype.getTextAnnotationPropertyPath=function(s){s=s||{};var t=s.textInEditModeSource||this.oSmartField._getComputedTextInEditModeSource(),o=this.oFactory,m=o._oMetaData;if(o._bTextInDisplayModeValueList){t=T.ValueList;}switch(t){case T.NavigationProperty:var h=s.textAnnotation||m.annotations.text;return o._oHelper.getTextAnnotationPropertyPath(h);case T.ValueList:var E=s.edmValueListKeyProperty||m.property.valueListKeyProperty,i=s.bindingContextPath||this.sBindingContextPath;return o._oHelper.getAbsolutePropertyPathToValueListEntity({property:E,bindingContextPath:i});case T.ValueListNoValidation:var E=s&&s.edmValueListKeyProperty||m.property.valueListKeyProperty,i=s&&s.bindingContextPath||this.sBindingContextPath,h=s&&s.textAnnotation||m&&m.annotations&&m.annotations.text;if(h&&i!=="/undefined"&&this.oSmartField._isValueInitial()){var j=o._oHelper.getTextAnnotationPropertyPath(h);if(j&&j!==this.oFactory.getMetaData().path){return j;}}return o._oHelper.getAbsolutePropertyPathToValueListEntity({property:E,bindingContextPath:i});case T.None:return"";default:return"";}};
d.prototype.checkRequiredMetadata=function(t,s){var o=this.oFactory,m=o._oMetaData;switch(t){case T.None:return false;case T.NavigationProperty:var n=m.annotations.text,E;if(n){E=n.entityType;}var C={propertyName:m.property&&m.property.property&&m.property.property.name,entityType:m.entityType,entityTypeOfNavigationProperty:E,textAnnotation:m.property&&m.property.property&&m.property.property["com.sap.vocabularies.Common.v1.Text"]};if(s){return o._oHelper.checkNavigationPropertyRequiredMetadataNoAsserts(C);}else{return o._oHelper.checkNavigationPropertyRequiredMetadata(C);}case T.ValueList:case T.ValueListNoValidation:var v={propertyName:m.property&&m.property.property&&m.property.property.name,entityType:m.entityType,valueListAnnotation:m.property&&m.property.valueListAnnotation};if(s){return o._oHelper.checkValueListRequiredMetadataForTextArrangmentNoAsserts(v);}else{return o._oHelper.checkValueListRequiredMetadataForTextArrangment(v);}default:return false;}};
d.prototype.onBeforeValidateValue=function(v,s){var S=this.oSmartField;if(!S.getBindingContext()){return;}var o=this.onFetchIDAndDescriptionCollectionSuccess.bind(this,{success:s.success});var O=this.onFetchIDAndDescriptionCollectionError.bind(this,{error:s.error});var h={value:v,success:o,error:O,filterFields:s.filterFields,bCheckValuesValidity:s.bCheckValuesValidity};this.fetchIDAndDescriptionCollection(h);var i=S._oControl.edit;if(i&&v){i.setBusyIndicatorDelay(300);i.setBusy(true);}};
d.prototype.fetchIDAndDescriptionCollectionIfRequired=function(){var s=this.oSmartField;var t=s._getComputedTextInEditModeSource();var m=this.oFactory&&this.oFactory.getMetaData();var o=m&&m.annotations&&m.annotations.text;var n=this.oSmartField&&this.oSmartField.getBinding("value")&&this.oSmartField.getBinding("value").vOriginalValue!==this.oSmartField.getBinding("value").getValue();if(o&&((m&&o.path===m.path)||this.sBindingContextPath==="/undefined"||n)){o=null;}if(t===T.ValueList||(!o&&t===T.ValueListNoValidation&&this.oFactory._getDisplayBehaviourConfiguration()!=="idOnly")||this.oFactory._bTextInDisplayModeValueList){var I="value",M=s.getModel(),h=s.getBindingContext(),p=s.getBinding(I).getPath(),v=M&&h&&p&&M.getProperty(p,h),u=(v==null)||(v==="");if(!u){var i=["keyField"];var S={value:v,oldValue:v,updateBusyIndicator:false,initialRendering:true};this.fetchIDAndDescriptionCollection({value:v,filterFields:i,success:this.onFetchIDAndDescriptionCollectionSuccess.bind(this,S)});}}};
d.prototype.fetchIDAndDescriptionCollection=function(s){var v=s.value;if((v==null)||(v==="")){return;}if(s.bCheckValuesValidity){s.filterFields=["keyField"];}this.readODataModel(s);};
d.prototype.readODataModel=function(s){var S=this.oSmartField,h,A,t=S._getComputedTextInEditModeSource(),m=S.getControlFactory().getMetaData(),i=d.getPaths(this.oFactory._bTextInDisplayModeValueList?T.ValueList:t,m),k=i.keyField,D=i.descriptionField,C,v=this.oFactory&&this.oFactory.getValueListProvider();if(!D){return;}this._sTextArrangementLastReadValue=s.value;C=this.getDataForNextDescriptionRequest(s.value);if(C&&C.hasOwnProperty(D)&&v&&v._shouldHaveHistory&&!v._shouldHaveHistory()){setTimeout(s.success.bind(this,{results:[C]}));return;}A=this.getAdditionalFiltersData(S,m,C);var o={keyFieldPath:k,descriptionFieldPath:D,aFilterFields:s.filterFields};for(h in A){s.filterFields.push(h);o[h]=A[h];}var j=this.getFilters(s.value,o);var u={"$select":k+","+D,"$top":2};var p="/"+i.entitySetName;var l={filters:j,urlParameters:u,success:s.success,error:s.error};var O=S.getModel();O.read(p,l);};
d.prototype.getAdditionalFiltersData=function(s,D,S){var C,i,h,I,v,A={};if(typeof S==="undefined"){S={};}if(D&&D.annotations&&D.annotations.valueListData){i=D.annotations.valueListData.inParams;C=D.annotations.valueListData.constParams;}if(C){for(h in C){A[h]=C[h];}}if(i){for(I in i){v=i[I];if(v!==D.annotations.valueListData.keyField){A[v]=S[v]!==undefined?S[v]:s.getBindingContext().getProperty(I);}}}return A;};
d.prototype.onFetchIDAndDescriptionCollectionSuccess=function(s,D,r){s=Object.assign({updateBusyIndicator:true},s);if(!this.oSmartField){return;}var S=this.oSmartField,i=S._oControl.edit,I=i&&i.getBinding("value"),o=S._oControl.display;if(I&&s.updateBusyIndicator){i.setBusyIndicatorDelay(0);i.setBusy(false);}if(typeof s.success==="function"){s.success(D.results);}var h=function(S,D,k,l){var O=S.getModel(),v=S.getTextInEditModeSource()==="ValueListNoValidation"||S._getComputedTextInEditModeSource()==="ValueListNoValidation",m;b(Array.isArray(D.results)," - "+this.getMetadata().getName());if(O){if(D&&Array.isArray(D.results)&&D.results.length===1){m=O.getKey(D.results[0]);}if(v&&D.results.length!==1){this.sBindingContextPath="/"+m;this.bindPropertyForValueList(k,l,true);}else if(typeof m==="string"){this.sBindingContextPath="/"+m;this.bindPropertyForValueList(k,l,false,v);}}};if(S.getMode()==="display"){var u=function(){h.call(this,S,D,"text",o);};if(s.initialRendering){u.call(this);}}if(I&&S.getMode()==="edit"&&S.isTextInEditModeSourceNotNone()){var j=function(){h.call(this,S,D,"value",i);};j.call(this);}};
d.prototype.onFetchIDAndDescriptionCollectionError=function(s,E){var i=this.oSmartField._oControl.edit;if(i){i.setBusyIndicatorDelay(0);i.setBusy(false);}if(typeof s.error==="function"){s.error(E);}};
d.prototype.bindPropertyForValueList=function(p,i,s,v){var S=this.oSmartField,o={},t,h,j,k=S._getComputedTextInEditModeSource();if(k===T.ValueList||k===T.ValueListNoValidation||this.oFactory._bTextInDisplayModeValueList){h=i&&i.getBinding(p);if(this.oFactory&&h){j=h.getType();if((!j||!j.isA("sap.ui.comp.smartfield.type.TextArrangement"))&&this.oFactory._getTextArrangementType){t=this.oFactory._getTextArrangementType();if(t){j=t;}}if(j){o={type:j};}o.skipValidation=s;o.bValueListNoValidation=v;i.bindProperty(p,this.getBindingInfo(o));}}};
d.prototype.getFilters=function(v,s){this.destroyFilters();var h=s.aFilterFields,A;if(h.length===1){switch(h[0]){case"keyField":this.oIDFilter=g(v,s);return[this.oIDFilter];case"descriptionField":this.oDescriptionFilter=e(v,s);return[this.oDescriptionFilter];}}this.oIDFilter=g(v,s);A=f(s);this.oFilters=new F({and:true,filters:[new F({and:false,filters:[this.oIDFilter]})]});if(A.aFilters.length>0){this.oFilters.aFilters.push(A);}return[this.oFilters];};
d.prototype.setDataForNextDescriptionRequest=function(v,D){this._mOneTimeDescriptionCache.set(v,D);};
d.prototype.getDataForNextDescriptionRequest=function(v){var D=this._mOneTimeDescriptionCache.get(v);this._mOneTimeDescriptionCache.delete(v);return D;};
function g(v,s){return new F({value1:v,path:s.keyFieldPath,operator:a.EQ});}
function e(v,s){return new F({value1:v,path:s.descriptionFieldPath,operator:a.Contains});}
function f(s){var h,j=[],i;for(h in s){for(i=0;i<s.aFilterFields.length;i++){if(s.aFilterFields[i]==h){j.push(new F({value1:s[h],path:h,operator:a.EQ}));}}}return new F({and:true,filters:j});}
d.prototype.destroyFilters=function(){if(this.oIDFilter){this.oIDFilter.destroy();this.oIDFilter=null;}if(this.oDescriptionFilter){this.oDescriptionFilter.destroy();this.oDescriptionFilter=null;}if(this.oFilters){this.oFilters.destroy();this.oFilters=null;}};
d.prototype.destroy=function(){this.oSmartField=null;this.bValidMetadata=false;this.sBindingContextPath="";this._mOneTimeDescriptionCache=null;this.destroyFilters();};
return d;});
sap.ui.predefine('sap/ui/comp/smartfield/flexibility/ODataV2Delegate',[],function(){"use strict";var A=true;
function i(p){if(p&&p.type){if(p.type.toLowerCase().indexOf("edm")!==0){return true;}}return false;}
function c(E,s){if(!E){return false;}var B=E.getBindingInfo(s);var p=B&&B.path;if(!p){return false;}return p.indexOf("/")===0;}
function g(E,m,s){var B;if(m){B=E.getBindingInfo(s);if(typeof B.model==="string"&&B.model!==""){B=undefined;}}else{B=E.getBindingContext();}return B;}
function e(p,o,E,s){var P={name:p.name,bindingPath:p.name,entityType:o.name};var L=p["com.sap.vocabularies.Common.v1.Label"];P.label=L&&L.String;var q=p["com.sap.vocabularies.Common.v1.QuickInfo"];P.tooltip=q&&q.String;var H=p["com.sap.vocabularies.UI.v1.Hidden"];P.hideFromReveal=!!H&&H.Bool==="true";var F;if(!P.hideFromReveal){F=p["com.sap.vocabularies.Common.v1.FieldControl"];if(F&&F.EnumMember){P.hideFromReveal=F.EnumMember==="com.sap.vocabularies.Common.v1.FieldControlType/Hidden";}else{var m=F&&F.Path;if(m){var n=E.getBinding(s)instanceof sap.ui.model.ListBinding;if(!n){var r=E.getBindingContext().getProperty(m);P.hideFromReveal=r===0;}}}}return P;}
function a(o,m,E,s){var F=o.property.map(function(P){return P["sap:field-control"];}).filter(Boolean);var n=function(P){return!F.includes(P.name);};var p=o.property.map(function(P){var q=e(P,o,E,s);if(i(P)){var C=m.getODataComplexType(P.type);if(C){q.properties=C.property.map(function(r){var I=e(r,o,E,s);I.bindingPath=P.name+"/"+r.name;I.referencedComplexPropertyName=q.label||q.name;return I;}).filter(n);}}return q;});if(o.navigationProperty){var N=o.navigationProperty.map(function(q){var r=(m.getODataAssociationEnd(o,q.name)&&m.getODataAssociationEnd(o,q.name).type);return{name:q.name,entityType:r,bindingPath:q.name,unsupported:true};});p=p.concat(N);}return p.filter(n);}
function b(E,s,p){if(p.path){return p.path;}var m=c(E,s);var B=g(E,m,s);if(B){return m?B.path:B.getPath();}}
function l(E,p){return Promise.resolve().then(function(){var m=E.getModel(p.modelName);if(m){var M=m.getMetadata().getName();if(M==="sap.ui.model.odata.ODataModel"||M==="sap.ui.model.odata.v2.ODataModel"){var o=m.getMetaModel();return o.loaded().then(function(){return o;});}}});}
function d(m,B){var M=m.getMetaContext(B);return M.getObject();}
function f(E,m,o){var D=E.getMetadata().getAggregation();if(D){var B=E.getBindingInfo(D.name);var t=B&&B.template;if(t){var p=E.getBindingPath(D.name);var n=m.getODataAssociationEnd(o,p);var F=n&&n.type;if(F){var q=m.getODataEntityType(F);o=q;}}}return o;}
function h(E,s,p){return l(E,p).then(function(m){var P=[];if(m){var B=b(E,s,p);if(B){var o=d(m,B);o=f(E,m,o);P=a(o,m,E,s);}}return P;});}
function j(p){return p.modifier.createControl("sap.ui.comp.smartfield.SmartLabel",p.appComponent,p.view,p.labelFor+"-label",{labelFor:p.labelFor},A);}
function k(p){return p.modifier.createControl("sap.ui.comp.smartfield.SmartField",p.appComponent,p.view,p.fieldSelector,{value:"{"+p.bindingPath+"}"},A);}
var O={};
O.getPropertyInfo=function(p){return h(p.element,p.aggregationName,p.payload);};
O.createLabel=function(p){return j(p);};
O.createControlForProperty=function(p){return k(p).then(function(C){return{control:C,valueHelp:undefined};});};
return O;});
sap.ui.predefine('sap/ui/comp/smartfield/flexibility/SmartField.flexibility',["sap/ui/fl/apply/api/DelegateMediatorAPI"],function(D){"use strict";D.registerDefaultDelegate({modelType:"sap.ui.model.odata.v2.ODataModel",delegate:"sap/ui/comp/smartfield/flexibility/ODataV2Delegate",requiredLibraries:{"sap.ui.comp":{minVersion:"1.81",lazy:false}}});D.registerDefaultDelegate({modelType:"sap.ui.model.odata.ODataModel",delegate:"sap/ui/comp/smartfield/flexibility/ODataV2Delegate",requiredLibraries:{"sap.ui.comp":{minVersion:"1.81",lazy:false}}});return{};},true);
sap.ui.predefine('sap/ui/comp/smartfield/type/AbapBool',["sap/ui/model/FormatException","sap/ui/model/ParseException","sap/ui/model/SimpleType"],function(F,P,S){"use strict";
var A=S.extend("sap.ui.comp.smartfield.type.AbapBool",{constructor:function(){S.apply(this,arguments);this.sName="sap.ui.comp.smartfield.type.AbapBool";}});
A.prototype.formatValue=function(v,t){if(v===undefined||v===null){return null;}switch(t){case"boolean":case"any":return v==="X";default:throw new F("Don't know how to format Boolean to "+t);}};
A.prototype.parseValue=function(v,s){switch(s){case"boolean":return(v===true)?"X":"";default:throw new P("Don't know how to parse Boolean from "+s);}};
A.prototype.validateValue=function(v){if(v!==null&&v!==undefined){if(v!=="X"&&v!==""){throw new P("Invalid Boolean "+v);}}};
return A;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Byte',["sap/ui/model/odata/type/Byte"],function(B){"use strict";
var a=B.extend("sap.ui.comp.smartfield.type.Byte",{constructor:function(f,c){B.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=B.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){B.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Byte";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Currency',["sap/ui/core/Core","sap/ui/model/type/Currency","sap/ui/model/odata/type/Currency","sap/ui/model/ValidateException"],function(C,a,O,V){"use strict";var _=/^([-]?)(\d+)(?:\.(\d+))?$/;
var b=O.extend("sap.ui.comp.smartfield.type.Currency",{constructor:function(f,o){O.apply(this,[f]);this.oConstraints=o;this.bParseWithValues=true;this.sName="Currency";}});
b.prototype.parseValue=function(v,i,d){if(d[1]&&this.shouldConvertUnitToUpperCase(d[1])){arguments[2][1]=arguments[2][1].toUpperCase();}var e=O.prototype.parseValue.apply(this,arguments),I,f,m=Array.isArray(e)&&e[0]&&c(e[0]);if(Array.isArray(m)){I=m[1]+m[2];f=m[3];if(Number.parseInt(f)===0){e[0]=I;}}if(e[1]===undefined){e[1]=d[1];}return e;};
b.prototype.validateValue=function(v){var m,s=v[0],n=s===null,S=0;if(v[1]&&this.shouldConvertUnitToUpperCase(v[1])){arguments[0][1]=arguments[0][1].toUpperCase();}if(this.oConstraints&&this.oConstraints.nullable&&(n||(s===this.oFormatOptions.emptyString))){return;}m=c(s);if((typeof s!=="string")||(m===null)){throw new V(g("EnterNumber"));}var i=parseInt(m[2]),I=i===0?0:m[2].length,f=(m[3]||"").length,d=this.oConstraints&&this.oConstraints.precision,p=typeof d==="number"?d:Infinity,e=v[1],h=this.oOutputFormat.oLocaleData.getCurrencyDigits(e),j=this.mCustomUnits&&this.mCustomUnits[e]&&this.mCustomUnits[e].decimals;if(j||j===0){h=j;}if(this.oConstraints&&this.oConstraints.variableScale){S=Math.min(p,h);}else{S=Math.min((this.oConstraints&&this.oConstraints.scale)||0,h);}if(S>p){S=p;}if(f>S){if(S===0){throw new V(g("EnterInt"));}if((I+S)>p){throw new V(g("EnterNumberIntegerFraction",[p-S,S]));}throw new V(g("EnterNumberFraction",[S]));}if(I>(p-S)){throw new V(g("EnterNumberInteger",[p-S]));}};
function c(v){return _.exec(v);}
function g(k,p){return C.getLibraryResourceBundle().getText(k,p);}
b.prototype.shouldConvertUnitToUpperCase=function(v){return this.mCustomUnits&&!this.mCustomUnits[v]&&this.mCustomUnits[v.toUpperCase()];};
b.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Currency";};
return b;});
sap.ui.predefine('sap/ui/comp/smartfield/type/DateTime',["sap/ui/model/odata/type/DateTime"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.DateTime",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){D.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.DateTime";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/DateTimeOffset',["sap/ui/model/odata/type/DateTimeOffset"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.DateTimeOffset",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){D.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.DateTimeOffset";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Decimal',["sap/ui/model/odata/type/Decimal"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.Decimal",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=D.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){D.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Decimal";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Double',["sap/ui/model/odata/type/Double"],function(D){"use strict";
var a=D.extend("sap.ui.comp.smartfield.type.Double",{constructor:function(f,c){D.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){v=D.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return v;};
a.prototype.destroy=function(){D.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Double";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Guid',["sap/ui/model/odata/type/Guid","sap/ui/model/ValidateException"],function(G,V){"use strict";var r=/^[A-F0-9]{8}-([A-F0-9]{4}-){3}[A-F0-9]{12}$/i;
function g(b){return sap.ui.getCore().getLibraryResourceBundle(b.resourceBundle).getText(b.text);}
function s(v){throw new V(g(v));}
var a=G.extend("sap.ui.comp.smartfield.type.Guid",{constructor:function(f,c,S){G.apply(this,arguments);this.oSettings=S;this.oFieldControl=null;this.oValidateExceptionSettings=this.oSettings&&this.oSettings.validateException||{resourceBundle:"",text:"EnterGuid"};}});
a.prototype.parseValue=function(v,S){v=G.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,S);}return v;};
a.prototype.validateValue=function(v){if(v===null){if(this.oConstraints&&this.oConstraints.nullable===false){s.call(this,this.oValidateExceptionSettings);}return;}if(typeof v!=="string"){throw new V("Illegal "+this.getName()+" value: "+v);}if(!r.test(v)){s.call(this,this.oValidateExceptionSettings);}};
a.prototype.destroy=function(){G.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Guid";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int16',["sap/ui/model/odata/type/Int16"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int16",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){I.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int16";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int32',["sap/ui/model/odata/type/Int32"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int32",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){I.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int32";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Int64',["sap/ui/model/odata/type/Int64"],function(I){"use strict";
var a=I.extend("sap.ui.comp.smartfield.type.Int64",{constructor:function(f,c){I.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=I.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){I.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Int64";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/SByte',["sap/ui/model/odata/type/SByte"],function(S){"use strict";
var a=S.extend("sap.ui.comp.smartfield.type.SByte",{constructor:function(f,c){S.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=S.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){S.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.SByte";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/String',["sap/ui/model/odata/type/String"],function(S){"use strict";
var a=S.extend("sap.ui.comp.smartfield.type.String",{constructor:function(f,c){S.apply(this,arguments);this.oFormatOptions=f;this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=S.prototype.parseValue.apply(this,arguments);if(this.oFormatOptions&&this.oFormatOptions.displayFormat==="UpperCase"&&r&&r.toUpperCase){r=r.toUpperCase();}if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.String";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/TextArrangement',["sap/ui/core/Core","sap/ui/model/CompositeType","sap/ui/comp/util/FormatUtil","sap/ui/model/ParseException","sap/ui/model/ValidateException","sap/base/util/isPlainObject","sap/base/assert"],function(c,C,F,P,V,i,a){"use strict";
var T=C.extend("sap.ui.comp.smartfield.type.TextArrangement",{
constructor:function(o,b,s){this.getPrimaryType().call(this,o,b);C.call(this,o,b);this.init(o,b,s);a(s.keyField!==undefined,"Missing value for the keyField. - "+this.getName());a(s.descriptionField!==undefined,"Missing value for the descriptionField. - "+this.getName());},
metadata:{"abstract":true}
});
T.prototype.init=function(o,b,s){this.sName="TextArrangement";this.bParseWithValues=true;this.async=true;var d={textArrangement:"idOnly"};var D={onBeforeValidateValue:function(){}};this.oSettings=Object.assign(D,s);this.oFormatOptions=Object.assign(d,o);this.fnParser=this.getValidator({textArrangement:this.oFormatOptions.textArrangement,prefix:"parse"});this.fnValidator=this.getValidator({textArrangement:this.oFormatOptions.textArrangement,prefix:"validate"});this.bValueListNoValidation=s.valueListNoValidation;};
T.prototype.parseValue=function(v,s,b){var r,t=this.oFormatOptions.textArrangement;if(typeof v==="string"){v=v.replace(/\s+$/,"");}if(v===""||(t==="idOnly")){r=this.parseIDOnly(v,s);}else{r=this.fnParser(v,s,b,this.oFormatOptions,this.oSettings);}if(r[0]&&r[0].toUpperCase&&this.oFormatOptions.displayFormat==="UpperCase"){r[0]=r[0].toUpperCase();}return r;};
T.prototype.parseIDOnly=function(v,s){v=this.getPrimaryType().prototype.parseValue.call(this,v,s);return[v,undefined];};
T.prototype.parseIDAndDescription=function(v,s,b,o){var r=/.*\s\(.*\)/i;if(r.test(v)){var d=/\s\(/gi;if(v.match(d).length>1){throw new P(this.getResourceBundleText("SMARTFIELD_NOT_FOUND"));}var e=T.splitIDAndDescription(v,{separator:d,textArrangement:o.textArrangement});v=e[0];}return this.parseIDOnly(v,s);};
T.prototype.parseDescriptionOnly=function(v,s,b,o,S){return new Promise(function(r,R){if(v===null||v===""){return r([v,""]);}function h(D){var I,k=S.keyField,e=S.descriptionField;var g=f(v,{key:e,value:k,data:D});var j=g.length;if(j===1){I=this.getPrimaryType().prototype.parseValue.call(this,g[0],s);r([I,undefined]);return;}if(j===0){g=f(v,{key:k,value:e,data:D});j=g.length;}if(!this.bValueListNoValidation){if(j===0){R(new V(this.getResourceBundleText("SMARTFIELD_NOT_FOUND")));return;}if(j>1){R(new V(this.getResourceBundleText("SMARTFIELD_DUPLICATE_VALUES")));return;}}I=this.getPrimaryType().prototype.parseValue.call(this,v,s);r([I,undefined]);}function d(e){R(new V(this.getResourceBundleText("SMARTFIELD_INVALID_ENTRY")));}var O={filterFields:this.getFilterFields(),success:h.bind(this),error:d.bind(this)};this.onBeforeValidateValue(v,O);}.bind(this));};
T.prototype.validateValue=function(v,b){this.validateIDOnly(v);var I=v[0];if(I===null){return;}if(this.oFormatOptions.textArrangement==="descriptionOnly"){this.validateDescriptionOnly(v,this.oSettings);return;}if(this.oFormatOptions.textArrangement==="idOnly"){this.validateIDOnly(v,this.oSettings);return;}var p=new Promise(function(r,R){function h(D){var s=Object.assign({},this.oSettings,{data:D,reject:R});var e=this.fnValidator(v,s);if(e){r(v);}}function d(e){R(new V(this.getResourceBundleText("SMARTFIELD_INVALID_ENTRY")));}var o={filterFields:this.getFilterFields(),success:h.bind(this),error:d.bind(this),bCheckValuesValidity:b};this.onBeforeValidateValue(I,o);}.bind(this));if(this.bValueListNoValidation){return;}else{return p;}};
T.prototype.validateIDOnly=function(v){this.getPrimaryType().prototype.validateValue.call(this,v[0]);};
T.prototype.validateIDAndDescription=function(v,s){var o={key:s.keyField,value:s.descriptionField,data:s.data};if(this.oFormatOptions&&this.oFormatOptions.displayFormat){o.displayFormat=this.oFormatOptions.displayFormat;}var d=f(v[0],o);var r=s.reject;if(!this.bValueListNoValidation){if(d.length===0){r(new V(this.getResourceBundleText("SMARTFIELD_NOT_FOUND")));return false;}if(d.length>1){r(new V(this.getResourceBundleText("SMARTFIELD_DUPLICATE_VALUES")));return false;}}return true;};
T.prototype.validateDescriptionOnly=function(v,s){};
T.prototype.formatValue=function(v,t){var k;if(!Array.isArray(v)){return v;}if(this.bValueListNoValidation&&v[1]===undefined){v.splice(1,1);}k=this.getPrimaryType().prototype.formatValue.call(this,v[0],t);if(k===""||k===null){return k;}if(k&&this.oFormatOptions.displayFormat==="UpperCase"){k=k.toUpperCase();}var d=v[1];if(d===""&&this.oFormatOptions.textArrangement!=="idOnly"&&this.oSettings.delegate){this.oSettings.delegate._sTextArrangementLastReadValue=null;}if(!d&&this.oFormatOptions.textArrangement==="descriptionOnly"){return k;}if(i(d)){d="";}return F.getFormattedExpressionFromDisplayBehaviour(this.oFormatOptions.textArrangement,k,d);};
T.prototype.destroy=function(){this.oFormatOptions=null;this.oSettings=null;this.fnParser=null;this.fnValidator=null;};
T.prototype.getName=function(){return"sap.ui.comp.smartfield.type.TextArrangement";};
T.prototype.onBeforeValidateValue=function(v,s){this.oSettings.onBeforeValidateValue(v,s);};
T.prototype.getResourceBundleText=function(k,p){return c.getLibraryResourceBundle("sap.ui.comp").getText(k,p);};
T.prototype.getPrimaryType=function(){};
T.prototype.getValidator=function(s){switch(s.textArrangement){case"idAndDescription":case"descriptionAndId":return this[s.prefix+"IDAndDescription"];case"descriptionOnly":return this[s.prefix+"DescriptionOnly"];default:return this[s.prefix+"IDOnly"];}};
T.prototype.getFilterFields=function(v){return["keyField"];};
function f(k,s){var v=[];if(s.displayFormat==="UpperCase"){k=k.toLowerCase();}s.data.forEach(function(d,I,D){var b=s.displayFormat==="UpperCase"?d[s.key].toLowerCase():d[s.key];if(b===k){v.push(d[s.value]);}});return v;}
T.splitIDAndDescription=function(v,s){var b=s.separator.exec(v),I=b["index"];switch(s.textArrangement){case"idAndDescription":return[v.slice(0,I),v.slice(I+2,-1)];case"descriptionAndId":return[v.slice(I+2,-1),v.slice(0,I)];default:return["",""];}};
return T;});
sap.ui.predefine('sap/ui/comp/smartfield/type/TextArrangementGuid',["sap/ui/comp/smartfield/type/TextArrangement","sap/ui/comp/smartfield/type/Guid","sap/ui/model/ValidateException","sap/base/assert"],function(T,G,V,a){"use strict";
var b=T.extend("sap.ui.comp.smartfield.type.TextArrangementGuid");
b.prototype.init=function(){T.prototype.init.apply(this,arguments);if(this.oFormatOptions&&this.oFormatOptions.textArrangement==="descriptionOnly"){this.oValidateExceptionSettings={resourceBundle:"sap.ui.comp",text:"ENTER_GUID_OR_DESCRIPTION"};}else{this.oValidateExceptionSettings={resourceBundle:"",text:"EnterGuid"};}};
b.prototype.parseDescriptionOnly=function(v,s,c,f,S){var p=G.prototype.parseValue.call(this,v,s);if(i(p)){return new Promise(function(r,R){function h(D){if(D.length===1){this.sDescription=D[0][S.descriptionField];r([p,undefined]);return;}if(D.length===0){R(new V(this.getResourceBundleText("SMARTFIELD_NOT_FOUND")));return;}a(false,"Duplicate GUID. - "+this.getName());}function d(e){R(new V(this.getResourceBundleText("SMARTFIELD_INVALID_ENTRY")));}var o={filterFields:this.getFilterFields(p),success:h.bind(this),error:d.bind(this)};this.onBeforeValidateValue(p,o);}.bind(this));}else{v=v.trim();return T.prototype.parseDescriptionOnly.call(this,v,s,c,f,S);}};
b.prototype.getFilterFields=function(v){if(this.oFormatOptions.textArrangement==="descriptionOnly"){if(i(v)){return["keyField"];}return["descriptionField"];}return["keyField","descriptionField"];};
b.prototype.getName=function(){return"sap.ui.comp.smartfield.type.TextArrangementGuid";};
b.prototype.getPrimaryType=function(){return G;};
function i(v){var r=/^[A-F0-9]{8}-([A-F0-9]{4}-){3}[A-F0-9]{12}$/i;return r.test(v);}
return b;});
sap.ui.predefine('sap/ui/comp/smartfield/type/TextArrangementString',["sap/ui/comp/smartfield/type/TextArrangement","sap/ui/comp/smartfield/type/String","sap/ui/model/ValidateException"],function(T,S,V){"use strict";
var a=T.extend("sap.ui.comp.smartfield.type.TextArrangementString");
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.TextArrangementString";};
a.prototype.validateValue=function(v){var c=this.oConstraints||{},m=c.maxLength,s=v[0];if(this.oFormatOptions.textArrangement==="descriptionOnly"&&(s&&s.length>m)){throw new V(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("ENTER_A_VALID_VALUE"));}else{return T.prototype.validateValue.apply(this,arguments);}};
a.prototype.getPrimaryType=function(){return S;};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Time',["sap/ui/model/odata/type/Time"],function(T){"use strict";
var a=T.extend("sap.ui.comp.smartfield.type.Time",{constructor:function(f,c){T.apply(this,arguments);this.oFieldControl=null;}});
a.prototype.parseValue=function(v,s){var r=T.prototype.parseValue.apply(this,arguments);if(typeof this.oFieldControl==="function"){this.oFieldControl(v,s);}return r;};
a.prototype.destroy=function(){T.prototype.destroy.apply(this,arguments);this.oFieldControl=null;};
a.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Time";};
return a;});
sap.ui.predefine('sap/ui/comp/smartfield/type/Unit',["sap/ui/core/Core","sap/ui/model/odata/type/Unit","sap/ui/comp/smartfield/type/Decimal","sap/ui/comp/smartfield/type/Int16","sap/ui/comp/smartfield/type/Int32","sap/ui/comp/smartfield/type/Int64","sap/ui/comp/smartfield/type/Byte","sap/ui/comp/smartfield/type/SByte","sap/ui/comp/smartfield/type/Double","sap/ui/model/ValidateException"],function(C,O,D,I,a,b,B,S,c,V){"use strict";var _=/^([-]?)(\d+)(?:\.(\d+))?$/;
var U=O.extend("sap.ui.comp.smartfield.type.Unit",{constructor:function(f,o){f.decimals=o.scale;O.apply(this,[f,{skipDecimalsValidation:o.skipDecimalsValidation}]);this.oConstraints=o;this.sName="Unit";}});
U.prototype.parseValue=function(v,i,f){var h=O.prototype.parseValue.apply(this,arguments),s,F,m=Array.isArray(h)&&h[0]&&d(h[0]);if(Array.isArray(m)){s=m[1]+m[2];F=m[3];if(Number.parseInt(F)===0){h[0]=s;}}if(h[1]===undefined&&f){h[1]=f[1];}return h;};
U.prototype.validateValue=function(v){var m,s=v[0],n=s===null;if(v[1]&&this.shouldConvertUnitToUpperCase(v[1])){arguments[0][1]=arguments[0][1].toUpperCase();}O.prototype.validateValue.apply(this,arguments);if(this.oConstraints.nullable&&(n||(s===this.oFormatOptions.emptyString))){return;}m=d(s);if(m===null){throw new V(g("EnterNumber"));}if(this.oConstraints&&this.oConstraints.skipDecimalsValidation){return;}e.call(this,this.oConstraints.type,s);var i=parseInt(m[2]),f,p=this.oConstraints&&this.oConstraints.scale,u=p,h=i===0?0:m[2].length,F=(m[3]||"").length,j=this.oConstraints&&this.oConstraints.precision,P=typeof j==="number"?j:Infinity,k=v[1],l=this.mCustomUnits&&this.mCustomUnits[k]&&this.mCustomUnits[k].decimals;if(l||l===0){u=l;}if(this.oConstraints&&this.oConstraints.variableScale){f=Math.min(P,u);p=f;}else{f=Math.min(p||0,u);}if(f>P){f=P;}if(F>f){if(f===0){throw new V(g("EnterInt"));}if((h+f)>P){throw new V(g("EnterNumberIntegerFraction",[P-f,f]));}throw new V(g("EnterNumberFraction",[f]));}if(h>(P-p)){throw new V(g("EnterNumberInteger",[P-p]));}};
function d(v){return _.exec(v);}
function g(k,p){return C.getLibraryResourceBundle().getText(k,p);}
function e(t,v){if(t){var T;switch(t){case"Edm.Double":T=new c({},this.oConstraints);break;case"Edm.Decimal":T=new D({},this.oConstraints);break;case"Edm.Int16":T=new I({},this.oConstraints);break;case"Edm.Int32":T=new a({},this.oConstraints);break;case"Edm.Int64":T=new b({},this.oConstraints);break;case"Edm.Byte":T=new B({},this.oConstraints);break;case"Edm.SByte":T=new S({},this.oConstraints);break;}T.validateValue(v);}}
U.prototype.shouldConvertUnitToUpperCase=function(v){return this.mCustomUnits&&!this.mCustomUnits[v]&&this.mCustomUnits[v.toUpperCase()];};
U.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Unit";};
return U;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/GroupConfiguration',['sap/ui/comp/library','sap/ui/core/Element'],function(l,E){"use strict";
var G=E.extend("sap.ui.comp.smartfilterbar.GroupConfiguration",{metadata:{library:"sap.ui.comp",properties:{key:{type:"string",group:"Misc",defaultValue:null},index:{type:"any",group:"Misc",defaultValue:undefined},label:{type:"any",group:"Misc",defaultValue:undefined}},events:{change:{parameters:{propertyName:{type:"string"}}}}}});
G.prototype.setLabel=function(L){this.setProperty("label",L);this.fireChange({propertyName:"label"});return this;};
return G;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/SFBMultiInput',["sap/m/MultiInput","sap/m/MultiInputRenderer"],function(M,a){"use strict";
var S=M.extend("sap.ui.comp.smartfilterbar.SFBMultiInput",{
metadata:{library:"sap.ui.comp"},
renderer:a
});
S.prototype.setTokens=function(t){M.prototype.setTokens.apply(this,arguments);this._pendingAutoTokenGeneration=true;this._getFilterProvider()._tokenUpdate({control:this,fieldViewMetadata:this._getFieldViewMetadata()});this._pendingAutoTokenGeneration=false;};
S.prototype._setFilterProvider=function(f){this.oFilterProvider=f;};
S.prototype._getFilterProvider=function(){return this.oFilterProvider;};
S.prototype._setFieldViewMetadata=function(f){this.oFieldViewMetadata=f;};
S.prototype._getFieldViewMetadata=function(){return this.oFieldViewMetadata;};
S.prototype.onBeforeRendering=function(){M.prototype.onBeforeRendering.apply(this,arguments);if(!this._bAfterFirstRendering&&this.getValue()){this._pendingAutoTokenGeneration=true;this._validateCurrentText(true);this._pendingAutoTokenGeneration=false;}this._bAfterFirstRendering=true;};
return S;});
sap.ui.predefine('sap/ui/comp/smartfilterbar/SortingUtil',[],function(){"use strict";var S={sortByIndex:function(a){var f,r,I,F;if(!a||!a.length){return a;}r=[];f=[];for(var i=0;i<a.length;i++){F=a[i];I=F.index;if(I>=0){f.push(F);}else{r.push(F);}}if(f.length){f=f.sort(function(b,c){return b.index-c.index;});if(!r.length){r=f;}else{for(var j=0;j<f.length;j++){F=f[j];if(F.index>=r.length){r.push(F);}else{r.splice(F.index,0,F);}}}}return r;},groupSorting:function(a){var r=[];r=this.sortByIndex(a);for(var i=0;i<r.length;i++){if(r[i].fields){r[i].fields=this.sortByIndex(r[i].fields);}}return r;},destroy:function(){}};return S;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/SmartForm.flexibility',["sap/ui/comp/smartform/flexibility/changes/RemoveGroup","sap/ui/comp/smartform/flexibility/changes/AddGroup","sap/ui/comp/smartform/flexibility/changes/MoveGroups","sap/ui/comp/smartform/flexibility/changes/RenameTitle","sap/ui/comp/smartform/flexibility/changes/CombineFields","sap/ui/comp/smartform/flexibility/changes/SplitField","sap/ui/comp/smartform/flexibility/changes/MoveFields"],function(R,A,M,a,C,S,b){"use strict";return{"removeGroup":R,"addGroup":A,"moveGroups":M,"renameField":a,"combineFields":C,"splitField":S,"moveControls":b};},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddField',["sap/base/Log","sap/ui/fl/changeHandler/Base","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/comp/smartform/flexibility/changes/AddFields"],function(L,B,J,A){"use strict";var a={};
a.applyChange=function(c,g,p){var C=c.getDefinition();var f=function(C){var M=C.texts&&C.texts.fieldLabel&&C.texts.fieldLabel.value;var h=C.content;var k=false;if(h){k=C.content.field&&(C.content.field.selector||C.content.field.id)&&C.content.field.jsType&&C.content.field.value&&C.content.field.valueProperty;}return M&&h&&k;};var m=p.modifier;var o=p.appComponent;var v=p.view;if(f(C)){var b=C.content;var F=b.field.selector;var s=b.field.id;var l=C.texts.fieldLabel.value;var j=b.field.jsType;var P=b.field.valueProperty;var d=b.field.value;var e=b.field.entitySet;var i=b.field.index;if(m.bySelector(F||s,o,v)){return B.markAsNotApplicable("Control to be created already exists:"+F||s,true);}return Promise.resolve().then(m.createControl.bind(m,"sap.ui.comp.smartform.GroupElement",o,v,F||s)).then(function(G){if(!F){F=m.getSelector(s,o);}c.setRevertData({newFieldSelector:F});m.setProperty(G,"label",undefined);m.setProperty(G,"label",l);return Promise.resolve().then(m.insertAggregation.bind(m,g,"groupElements",G,i,v)).then(function(){return A.addElementIntoGroupElement(m,v,G,j,P,d,e,i,o);});});}L.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);return Promise.resolve();};
a.completeChangeContent=function(c,s,p){var o=p.appComponent;var C=c.getDefinition();if(s.fieldLabel){B.setTextInChange(C,"fieldLabel",s.fieldLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValue){C.content.field.value=s.fieldValue;}else{throw new Error("oSpecificChangeInfo.fieldValue attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else{throw new Error("oSpecificChangeInfo.valueProperty attribute required");}if(s.newControlId){C.content.field.selector=J.getSelector(s.newControlId,o,{index:s.index});}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsType){C.content.field.jsType=s.jsType;}else{throw new Error("oSpecificChangeInfo.jsType attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};
a.revertChange=function(c,g,p){return A.revertChange(c,g,p);};
a.getChangeVisualizationInfo=function(c){return{affectedControls:[c.getDefinition().content.field.selector]};};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddFields',["sap/ui/fl/changeHandler/Base","sap/ui/fl/apply/api/DelegateMediatorAPI","sap/ui/core/util/reflection/JsControlTreeModifier","sap/base/util/merge","sap/base/util/ObjectPath"],function(B,D,J,m,O){"use strict";
function i(f){return typeof f==="function";}
function g(G,I){return G+"-element"+I;}
function c(C){var M=false;M=C.content.field&&(C.content.field.selector||C.content.field.id)&&C.content.field.jsTypes&&C.content.field.value&&C.content.field.valueProperty;if(!M){throw new Error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}}
function a(d,o){var e=m({},d);e.fieldSelector.id=g(e.fieldSelector.id,0);return o.createControlForProperty(e).then(function(s){var n=d.modifier.getId(s.control);d.labelFor=n;return o.createLabel(d).then(function(l){return{label:l,control:s.control};});});}
function b(d,p){var e=m({aggregationName:"formElements",payload:d.payload||{}},p);var o=d.instance;return Promise.resolve().then(function(){if(i(o.createLayout)){return o.createLayout(e);}}).then(function(l){if(O.get("control",l)){l.layoutControl=true;return l;}return a(e,o);});}
var A={};
A.applyChange=function(C,G,p){var o=C.getDefinition();var d=C.getContent();var M=p.modifier;var e=p.appComponent;var f=d.field.selector;var v=p.view;var F=d.field.id;if(M.bySelector(f||F,e,v)){return B.markAsNotApplicable("Control to be created already exists:"+f||F,true);}var h=d.field.index;var s=C.getDependentControl("form",p);var j=s&&M.getFlexDelegate(s);if(!j){c(o);var k;return Promise.resolve().then(M.createControl.bind(M,"sap.ui.comp.smartform.GroupElement",e,v,f||F)).then(function(l){k=l;if(!f){f=M.getSelector(F,e);}C.setRevertData({newFieldSelector:f});return d.field.jsTypes.reduce(function(n,q,I){var P=d.field.valueProperty[I];var r=d.field.value[I];var E=d.field.entitySet;return n.then(this.addElementIntoGroupElement.bind(this,M,v,k,q,P,r,E,I,e));}.bind(this),Promise.resolve());}.bind(this)).then(function(){return M.insertAggregation(G,"groupElements",k,h);});}return A._addFieldFromDelegate(s,G,f,F,h,d.field.value[0],C,M,v,e);};
A._addFieldFromDelegate=function(s,G,f,F,d,e,C,M,v,o){var h;var I;return D.getDelegateForControl({control:s,modifier:M}).then(function(j){var k={appComponent:o,view:v,fieldSelector:f||F,bindingPath:e,modifier:M,element:s};return b(j,k);}).then(function(j){I=j;if(!I.layoutControl){return Promise.resolve().then(M.createControl.bind(M,"sap.ui.comp.smartform.GroupElement",o,v,f||F)).then(function(k){h=k;return Promise.resolve().then(M.insertAggregation.bind(M,h,"label",I.label,0,v)).then(M.insertAggregation.bind(M,h,"fields",I.control,0,v)).then(function(){return h;});});}return I.control;}).then(function(h){return M.insertAggregation(G,"groupElements",h,d,v);}).then(function(){if(I.valueHelp){return M.insertAggregation(s,"dependents",I.valueHelp,0,v);}}).then(function(){if(!f){f=M.getSelector(F,o);}C.setRevertData({newFieldSelector:f,valueHelpSelector:I.valueHelp&&M.getSelector(I.valueHelp,o)});});};
A.addElementIntoGroupElement=function(M,v,G,j,p,P,e,I,o){var V;var s=M.getId(G);var d=g(s,I);return Promise.resolve().then(M.createControl.bind(M,j,o,v,d)).then(function(C){V=C;M.bindProperty(V,p,P);M.setProperty(V,"expandNavigationProperties",true);return M.insertAggregation(G,"elements",V,I,v,true);}).then(function(){if(e){M.setProperty(V,"entitySet",e);}}).catch(function(E){return B.markAsNotApplicable(E&&E.message||"Control couldn't be created",true);});};
A.completeChangeContent=function(C,s,p){var o=p.appComponent;var d=C.getDefinition();if(!d.content){d.content={};}if(!d.content.field){d.content.field={};}if(s.fieldValues){d.content.field.value=s.fieldValues;}else if(s.bindingPath){d.content.field.value=[s.bindingPath];}else{throw new Error("oSpecificChangeInfo.fieldValue or bindingPath attribute required");}if(s.valueProperty){d.content.field.valueProperty=s.valueProperty;}else if(s.bindingPath){d.content.field.valueProperty=["value"];}else{throw new Error("oSpecificChangeInfo.valueProperty or bindingPath attribute required");}if(s.newControlId){d.content.field.selector=J.getSelector(s.newControlId,o);}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsTypes){d.content.field.jsTypes=s.jsTypes;}else if(s.bindingPath){d.content.field.jsTypes=["sap.ui.comp.smartfield.SmartField"];}else{throw new Error("oSpecificChangeInfo.jsTypes or bindingPath attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{d.content.field.index=s.index;}if(s.entitySet){d.content.field.entitySet=s.entitySet;}if(s.relevantContainerId){C.addDependentControl(s.relevantContainerId,"form",p);}};
A.revertChange=function(C,G,p){var o=p.appComponent;var v=p.view;var M=p.modifier;var r=C.getRevertData();var f=r.newFieldSelector;var d=M.bySelector(f,o,v);return Promise.resolve().then(M.removeAggregation.bind(M,G,"groupElements",d)).then(function(){M.destroy(d);var V=r.valueHelpSelector;if(V){var e=M.bySelector(V,o,v);var s=C.getDependentControl("form",p);return Promise.resolve().then(M.removeAggregation.bind(M,s,"dependents",e)).then(function(){M.destroy(e);});}}).then(function(){C.resetRevertData();});};
A.getCondenserInfo=function(C){return{affectedControl:C.getContent().field.selector,classification:sap.ui.fl.condenser.Classification.Create,targetContainer:C.getSelector(),targetAggregation:"groupElements",setTargetIndex:function(C,n){C.getContent().field.index=n;},getTargetIndex:function(C){return C.getContent().field.index;}};};
A.getChangeVisualizationInfo=function(C){return{affectedControls:[C.getContent().field.selector]};};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/AddGroup',["sap/base/Log","sap/ui/fl/changeHandler/Base","sap/ui/core/util/reflection/JsControlTreeModifier"],function(L,B,J){"use strict";var A={};
A.applyChange=function(c,f,p){var m=p.modifier;var a=p.appComponent;var v=p.view;var C=c.getDefinition();if(C.texts&&C.texts.groupLabel&&C.texts.groupLabel.value&&C.content&&C.content.group&&(C.content.group.selector||C.content.group.id)){var l=C.texts.groupLabel.value;var i=C.content.group.index;var g=C.content.group.selector;return Promise.resolve().then(m.createControl.bind(m,"sap.ui.comp.smartform.Group",a,v,C.content.group.selector||C.content.group.id)).then(function(G){if(!g){g=m.getSelector(C.content.group.id,a);}c.setRevertData({newGroupSelector:g});m.setProperty(G,"visible",true);m.setProperty(G,"label",l);return m.insertAggregation(f,"groups",G,i,v);});}L.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);return Promise.resolve();};
A.completeChangeContent=function(c,s,p){var C=c.getDefinition();var a=p.appComponent;if(s.newLabel){B.setTextInChange(C,"groupLabel",s.newLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.groupLabel attribute required");}if(!C.content){C.content={};}if(!C.content.group){C.content.group={};}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.group.index=s.index;}if(s.newControlId){C.content.group.selector=J.getSelector(s.newControlId,a);}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}};
A.revertChange=function(c,f,p){var a=p.appComponent;var v=p.view;var m=p.modifier;var g=c.getRevertData().newGroupSelector;var G=m.bySelector(g,a,v);return Promise.resolve().then(m.removeAggregation.bind(m,f,"groups",G)).then(function(){m.destroy(G);c.resetRevertData();});};
A.getChangeVisualizationInfo=function(c){return{affectedControls:[c.getContent().group.selector]};};
return A;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/CombineFields',["sap/ui/fl/changeHandler/Base","sap/ui/comp/smartform/flexibility/changes/RenameField"],function(B,R){"use strict";var C={};
C._evaluateElementForIndex=function(m,g){var M=-1;return g.reduce(function(p,G){return p.then(m.getAggregation.bind(m,G,"fields")).then(function(s){return Promise.all(s.map(function(S){M++;return m.getProperty(S,"mandatory");}));});},Promise.resolve()).then(function(b){return b?M:-1;});};
C._getPreviousLabelPropertyOnControl=function(o,m,p){return Promise.resolve().then(m.getProperty.bind(m,o,p)).then(function(l){if(l&&(typeof l!=="string")){p="text";o=l;}return m.getPropertyBindingOrProperty(o,p);}).then(function(P){return P?P:"$$Handled_Internally$$";});};
function c(g,s,m,v,i,S){if(g!==s){var p=m.getParent(g);return S.reduce(function(a,o,k){return a.then(m.removeAggregation.bind(m,g,"elements",o)).then(m.insertAggregation.bind(m,s,"elements",o,i+k,v));},Promise.resolve()).then(m.removeAggregation.bind(m,p,"groupElements",g)).then(m.insertAggregation.bind(m,p,"dependents",g,0,v));}return Promise.resolve();}
C.applyChange=function(o,a,p){var b=o.getDefinition();var m=p.modifier;var A=p.appComponent;var v=p.view;var s=m.bySelector(b.content.sourceSelector,A,v);var l=[];var P;var t;var r;var g=b.content.combineFieldSelectors.map(function(d){return m.bySelector(d,A,v);});return this._collectRevertDataForElements(m,g,A).then(function(d){r=d;return this._evaluateElementForIndex(m,g);}.bind(this)).then(function(M){if(M>0){m.setProperty(s,"elementForLabel",M);}var I=sap.ui.getCore().getConfiguration().getRTL();return g.reduce(function(d,G,i){return d.then(function(){var L="fieldLabel"+i.toString();t=b.texts[L];if(t&&t.value!==P&&t.value.length>0){I?l.unshift(t.value):l.push(t.value);P=t.value;}return m.getAggregation(G,"elements");}).then(function(S){return c(G,s,m,v,i,S);});},Promise.resolve());}).then(function(){return R.setLabelPropertyOnControl(s,l.join("/"),m,"label");}).then(function(){o.setRevertData(r);});};
C._collectRevertDataForElements=function(m,g,a){var r={elementStates:[]};var f=0;var l=0;return Promise.all(g.map(function(e){var p=m.getParent(e);return Promise.all([m.getAggregation(e,"elements"),m.getAggregation(p,"groupElements"),this._getPreviousLabelPropertyOnControl(e,m,"label"),m.getProperty(e,"elementForLabel")]).then(function(b){l=f+b[0].length-1;r.elementStates.push({groupElementSelector:m.getSelector(m.getId(e),a),parentSelector:m.getSelector(m.getId(p),a),groupElementIndex:b[1].indexOf(e),firstFieldIndex:f,lastFieldIndex:l,label:b[2],elementForLabel:b[3]});f=l+1;});}.bind(this))).then(function(){return r;});};
C.revertChange=function(o,s,p){var r=o.getRevertData();var m=p.modifier;var a=p.appComponent;var f=[];return r.elementStates.reduce(function(b,e){var P=p.modifier.bySelector(e.parentSelector,a);var g=p.modifier.bySelector(e.groupElementSelector,a);return b.then(m.getAggregation.bind(m,P,"groupElements")).then(function(A){if(A.indexOf(g)===-1){return Promise.resolve().then(m.removeAggregation.bind(m,P,"dependents",g)).then(m.insertAggregation.bind(m,P,"groupElements",g,e.groupElementIndex));}else{return Promise.resolve().then(m.getAggregation.bind(m,g,"elements")).then(function(d){f=d;return m.removeAllAggregation(g,"elements");});}});},Promise.resolve()).then(function(){return r.elementStates.reduce(function(b,e){var g;var P;return b.then(function(){g=m.bySelector(e.groupElementSelector,a);var I=[];for(var i=e.firstFieldIndex;i<=e.lastFieldIndex;i++){I.push(m.insertAggregation(g,"elements",f[i],f.length));}return Promise.all(I);}).then(function(){P=e.label;if(P==="$$Handled_Internally$$"){P=undefined;return m.getAggregation(g,"fields");}}).then(function(A){if(A&&A.length){var E=A[e.elementForLabel];m.setProperty(E,"textLabel",undefined);}m.setProperty(g,"elementForLabel",e.elementForLabel);return R.setLabelPropertyOnControl(g,P,m,"label");});},Promise.resolve());}).then(o.resetRevertData.bind(o));};
C.completeChangeContent=function(o,s,p){var m=p.modifier;var v=p.view;var a=p.appComponent;var b=o.getDefinition();var d=s.combineElementIds;if(d&&d.length>=2){b.content.combineFieldSelectors=d.map(function(e){return m.getSelector(e,a);});o.addDependentControl(d,"combinedFields",p);}else{throw new Error("oSpecificChangeInfo.combineElementIds attribute required");}if(s.sourceControlId){b.content.sourceSelector=m.getSelector(s.sourceControlId,a);o.addDependentControl(s.sourceControlId,"sourceControl",p);}else{throw new Error("oSpecificChangeInfo.sourceControlId attribute required");}var t;var f;var g;for(var i=0;i<b.content.combineFieldSelectors.length;i++){var S=b.content.combineFieldSelectors[i];g=m.bySelector(S,a,v);t=g.getLabelText();if(t){f="fieldLabel"+i;B.setTextInChange(b,f,t,"XFLD");}}};
C.getChangeVisualizationInfo=function(o){return{affectedControls:[o.getDefinition().content.sourceSelector]};};
return C;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/MoveFields',["sap/ui/fl/changeHandler/MoveControls"],function(M){"use strict";var a=Object.assign({},M);
a.applyChange=function(c,C,p){var m=Object.assign({},p,{targetAggregation:"groupElements",sourceAggregation:"groupElements"});return M.applyChange.call(this,c,C,m);};
a.getCondenserInfo=function(c){var C=M.getCondenserInfo.call(this,c);C.targetAggregation="groupElements";return C;};
return a;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/MoveGroups',["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier"],function(L,J){"use strict";var M={};
M._checkCompleteChangeContentConditions=function(s){if(!s.movedElements){throw new Error("oSpecificChangeInfo.movedElements attribute required");}if(s.movedElements.length===0){throw new Error("MovedElements array is empty");}s.movedElements.forEach(function(m){if(!m.id){throw new Error("MovedElements element has no id attribute");}if(typeof(m.targetIndex)!=="number"){throw new Error("Index attribute at MovedElements element is no number");}});};
M._buildStableChangeInfo=function(m){var s=m.source.id;var t=m.target.id;var c={changeType:m.changeType,selector:{id:s},targetId:t!==s?t:null};c[m.changeType]=[];m.movedElements.forEach(function(a){c[m.changeType].push({id:a.id,sourceIndex:a.sourceIndex,index:a.targetIndex});});return c;};
M.applyChange=function(c,s,p){function a(c,m){if(!c){return Promise.reject(new Error("No change instance"));}var C=c.getContent();return Promise.resolve().then(m.getAggregation.bind(m,s,"groups")).then(function(e){if(!e){L.error("Object has no smartform elements aggregation",m.getId(s));}if(!C||!C.moveGroups||C.moveGroups.length===0){return Promise.reject(new Error("Change format invalid"));}return undefined;});}function g(o,m,A,v){if(!o.selector&&!o.id){return Promise.reject(new Error("Change format invalid - moveGroups element has no id attribute"));}if(typeof(o.index)!=="number"){return Promise.reject(new Error("Change format invalid - moveGroups element index attribute is no number"));}return Promise.resolve(m.bySelector(o.selector||o.id,A,v));}var m=p.modifier;var v=p.view;var A=p.appComponent;var b=[];function d(o,G){if(!G){return Promise.resolve(L.warning("Group to move not found"));}return Promise.resolve().then(m.findIndexInParentAggregation.bind(m,G)).then(function(i){if(i===o.index&&typeof o.sourceIndex==="number"){i=o.sourceIndex;}b.push({selector:m.getSelector(G,A),index:i});}).then(m.removeAggregation.bind(m,s,"groups",G,v)).then(m.insertAggregation.bind(m,s,"groups",G,o.index));}return a(c,m).then(function(){var C=c.getContent();return C.moveGroups.reduce(function(e,o){return e.then(g.bind(null,o,m,A,v)).then(function(G){return d(o,G);});},Promise.resolve());}).then(function(){c.setRevertData({movedGroups:b});});};
M.completeChangeContent=function(c,s,p){this._checkCompleteChangeContentConditions(s);s=this._buildStableChangeInfo(s);var C=c.getDefinition();if(!C.content){C.content={};}if(!C.content.moveGroups){C.content.moveGroups=[];}var m=s.moveGroups.map(function(g){var G=sap.ui.getCore().byId(g.id);var S=J.getSelector(G,p.appComponent);C.content.moveGroups.push({selector:S,sourceIndex:g.sourceIndex,index:g.index});return G;});c.addDependentControl(m,"movedGroups",p);};
M.revertChange=function(c,s,p){var a=p.appComponent;var v=p.view;var m=p.modifier;var b=c.getRevertData().movedGroups;return b.reduce(function(d,o){var g=m.bySelector(o.selector,a,v);return d.then(m.removeAggregation.bind(m,s,"groups",g,v)).then(m.insertAggregation.bind(m,s,"groups",g,o.index));},Promise.resolve()).then(function(){c.resetRevertData();});};
M.getChangeVisualizationInfo=function(c){var C=c.getContent();return{affectedControls:[C.moveGroups[0].selector],dependentControls:[(C.moveGroups[0].selector.source||c.getSelector())]};};
return M;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RemoveField',[],function(){"use strict";var R={};
R.applyChange=function(c,f,p){var m=p.modifier;var v=p.view;var g=m.getParent(f);if(g){return Promise.resolve().then(m.findIndexInParentAggregation.bind(m,f)).then(function(F){c.setRevertData({fieldIndex:F});return m.removeAggregation(g,"groupElements",f,v);});}return Promise.resolve();};
R.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
R.revertChange=function(c,f,p){var v=p.view;var m=p.modifier;var F=c.getRevertData().fieldIndex;var g=m.getParent(f);return Promise.resolve().then(m.insertAggregation.bind(m,g,"groupElements",f,F,v)).then(c.resetRevertData.bind(c));};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameField',["sap/ui/fl/changeHandler/BaseRename","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier"],function(B,L,J){"use strict";var P="label";var C="fieldLabel";var T="XFLD";var R=B.createRenameChangeHandler({changePropertyName:C,translationTextType:T});
R.applyChange=function(c,o,p){var a=c.getDefinition();var t=a.texts[C];var v=t.value;if(a.texts&&t&&typeof(v)==="string"){return this.setLabelPropertyOnControl(o,v,p.modifier,P).then(function(O){c.setRevertData(O);});}L.error("Change does not contain sufficient information to be applied: ["+a.layer+"]"+a.namespace+"/"+a.fileName+"."+a.fileType);return Promise.resolve();};
R.revertChange=function(c,o,p){var O=c.getRevertData();if(O||O===""){if(O==="$$Handled_Internally$$"){O=undefined;}return this.setLabelPropertyOnControl(o,O,p.modifier,P).then(function(){c.resetRevertData();});}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");return Promise.resolve();};
R.setLabelPropertyOnControl=function(c,v,m,p){return Promise.resolve().then(m.getProperty.bind(m,c,p)).then(function(l){if(l&&(typeof l!=="string")){p="text";c=l;}}).then(m.getPropertyBindingOrProperty.bind(m,c,p)).then(function(o){m.setPropertyBindingOrProperty(c,p,v);return o||"$$Handled_Internally$$";});};
R.getChangeVisualizationInfo=function(c,a){var n=(c.getDefinition().texts&&c.getDefinition().texts[C]),o=c.getRevertData(),s,e,d;if(o==="$$Handled_Internally$$"){o=undefined;s=c.getSelector();e=J.bySelector(s,a);if(e.isA("sap.ui.comp.smartform.GroupElement")){d=e.getDataSourceLabel();if(d){o=d;}}}return{payload:{originalLabel:o,newLabel:n&&n.value}};};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameGroup',["sap/ui/fl/changeHandler/BaseRename","sap/base/Log"],function(B,L){"use strict";var P="label";var C="groupLabel";var T="XFLD";var R=B.createRenameChangeHandler({propertyName:P,changePropertyName:C,translationTextType:T});
R.applyChange=function(c,o,p){var a=c.getDefinition();var t=a.texts[C];var v=t.value;if(a.texts&&t&&typeof(v)==="string"){return this.setLabelOrTitleOnControl(o,v,p.modifier,P).then(function(O){c.setRevertData(O);});}L.error("Change does not contain sufficient information to be applied: ["+a.layer+"]"+a.namespace+"/"+a.fileName+"."+a.fileType);return Promise.resolve();};
R.revertChange=function(c,o,p){var O=c.getRevertData();if(O||O===""){return this.setLabelOrTitleOnControl(o,O,p.modifier,P).then(c.resetRevertData());}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");return Promise.resolve();};
R.setLabelOrTitleOnControl=function(c,v,m,p){return Promise.all([m.getProperty(c,p),m.getAggregation(c,"title")]).then(function(V){var l=V[0];var t=V[1];if(!l&&t){if(typeof t==="string"){p="title";}else{p="text";c=t;}}return m.getPropertyBindingOrProperty(c,p);}).then(function(o){m.setPropertyBindingOrProperty(c,p,v);return o;});};
return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/RenameTitle',['sap/ui/fl/changeHandler/BaseRename'],function(B){"use strict";var R=B.createRenameChangeHandler({propertyName:"title",changePropertyName:"fieldLabel",translationTextType:"XFLD"});return R;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/SplitField',[],function(){"use strict";var S={};
S.applyChange=function(c,C,p){var o=c.getDefinition();var m=p.modifier;var A=p.appComponent;var v=p.view;var s=m.bySelector(o.content.sourceSelector,A,v);var l;var f=function(a,b){if(a.index>b.index){return 1;}else if(a.index<b.index){return-1;}};var P=m.bySelector(o.content.parentSelector,A,v);var n=o.content.newElementIds.slice();var d=[];var F;var L;var g;var i;return Promise.all([m.getAggregation(s,"elements"),m.getProperty(s,"elementForLabel"),m.getAggregation(P,"groupElements")]).then(function(V){F=V[0];L=V[1];g=V[2];i=g.indexOf(s);return m.getProperty(s,"label");}).then(function(a){if(a&&(typeof a!=="string")){return m.getProperty(a,"text");}return a;}).then(function(a){l=a;return F.reduce(function(b,e,I){if(I!==L){var N=n.pop();var h;return b.then(m.createControl.bind(m,"sap.ui.comp.smartform.GroupElement",p.appComponent,v,N)).then(function(j){h=j;d.push({groupElementSelector:m.getSelector(h,A),index:I});return Promise.resolve().then(m.removeAggregation.bind(m,s,"elements",e)).then(m.insertAggregation.bind(m,h,"elements",e,0,v)).then(m.insertAggregation.bind(m,P,"groupElements",h,i+I,v)).then(m.getProperty.bind(m,h,"label")).then(function(k){if(k&&(typeof k!=="string")){m.setProperty(k,"text",l);}else{m.setProperty(h,"label",l);}});});}else{d.push({groupElementSelector:m.getSelector(s,A),index:I});if(L!==0){m.setProperty(s,"elementForLabel",0);}return b.then(m.removeAggregation.bind(m,s,"elements",e)).then(m.insertAggregation.bind(m,s,"elements",e,0,v)).then(m.getProperty.bind(m,s,"label")).then(function(j){if(j&&(typeof j!=="string")){m.setProperty(j,"text",l);}else{m.setProperty(s,"label",l);}});}},Promise.resolve());}).then(function(){c.setRevertData({sourceControlSelector:o.content.sourceSelector,labelText:l,splittedFields:d.sort(f)});});};
S.completeChangeContent=function(c,s,p){var m=p.modifier;var a=p.appComponent;var C=c.getDefinition();if(s.newElementIds){C.content.newElementIds=s.newElementIds.slice(0,-1);}else{throw new Error("oSpecificChangeInfo.newElementIds attribute required");}if(s.sourceControlId){C.content.sourceSelector=m.getSelector(s.sourceControlId,a);c.addDependentControl(s.sourceControlId,"sourceControl",p);}else{throw new Error("oSpecificChangeInfo.sourceControlId attribute required");}if(s.parentId){C.content.parentSelector=m.getSelector(s.parentId,a);c.addDependentControl(s.parentId,"parent",p);}else{throw new Error("oSpecificChangeInfo.parentId attribute required");}};
S.revertChange=function(c,C,p){var v=p.view;var m=p.modifier;var a=p.appComponent;var r=c.getRevertData();var s=r.splittedFields;var o=m.bySelector(r.sourceControlSelector,a,v);return s.reduce(function(b,d){var g=m.bySelector(d.groupElementSelector,a,v);return b.then(m.getAggregation.bind(m,g,"elements")).then(function(f){var F=f[0];return Promise.resolve().then(m.removeAggregation.bind(m,g,"elements",F)).then(m.insertAggregation.bind(m,o,"elements",F,d.index,v));}).then(function(){if(g!==o){m.destroy(g);}});},Promise.resolve()).then(m.getProperty.bind(m,o,"label")).then(function(l){if(l&&(typeof l!=="string")){m.setProperty(l,"text",r.labelText);}else{m.setProperty(o,"label",r.labelText);}c.resetRevertData();});};
S.getChangeVisualizationInfo=function(c){return{affectedControls:[c.getDefinition().content.sourceSelector],dependentControls:c.getDefinition().content.newElementIds};};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartform/flexibility/changes/UnhideControl',[],function(){"use strict";var U={};
U.applyChange=function(c,g,p){var m=p.modifier;var P;var f=[];return Promise.resolve().then(m.getAggregation.bind(m,g,"elements")).then(function(a){f=a;return f.reduce(function(b,F){return b.then(function(v){return v||m.getVisible(F);});},Promise.resolve(false));}).then(function(i){P=i;if(!P){f.forEach(function(F){m.setVisible(F,true);});}return m.getAggregation(g,"label");}).then(function(l){var v=false;if(l&&(typeof l!=="string")){m.setVisible(l,true);v=true;}m.setVisible(g,true);c.setRevertData({partiallyVisible:P,visibleLabel:v});});};
U.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};
U.revertChange=function(c,g,p){var m=p.modifier;var r=c.getRevertData();return Promise.resolve().then(m.getAggregation.bind(m,g,"elements")).then(function(f){if(!r.partiallyVisible){f.forEach(function(F){m.setVisible(F,false);});}if(r.visibleLabel){return Promise.resolve().then(m.getAggregation.bind(m,g,"label")).then(function(l){m.setVisible(l,false);});}}).then(function(){m.setVisible(g,false);c.resetRevertData();});};
U.getCondenserInfo=function(c){return{affectedControl:c.getSelector(),classification:sap.ui.fl.condenser.Classification.Reverse,uniqueKey:"visible"};};
return U;},true);
sap.ui.predefine('sap/ui/comp/smartmicrochart/SmartMicroChartRenderer',[],function(){"use strict";var S={apiVersion:2};
S.render=function(r,c){if(c._bIsInitialized){r.openStart("div",c);if(c.getIsResponsive()){r.class("sapSuiteUiSmartMicroChartResponsive");}r.openEnd();r.renderControl(c.getAggregation("_chart"));r.close("div");}};
return S;},true);
sap.ui.predefine('sap/ui/comp/smartmultiedit/Container',["sap/ui/thirdparty/jquery",".././library","sap/ui/core/Control","sap/ui/comp/smartmultiedit/Field","sap/ui/model/Context","sap/base/Log"],function(q,l,C,F,a,L){"use strict";
var b=C.extend("sap.ui.comp.smartmultiedit.Container",{
metadata:{library:"sap.ui.comp",properties:{entitySet:{type:"string",defaultValue:null},contexts:{type:"sap.ui.model.Context[]",defaultValue:[]}},defaultAggregation:"layout",aggregations:{layout:{type:"sap.ui.comp.smartform.SmartForm",multiple:false}},designTime:"sap/ui/comp/designtime/smartmultiedit/Container.designtime"},
renderer:{apiVersion:2,render:function(r,c){r.openStart("div",c);r.class("sapUiCompSmartMultiEditContainer");r.openEnd();if(c._bReadyToRender){r.renderControl(c.getLayout());}r.close("div");}}
});
b.prototype.init=function(){this._bIsInitialized=false;this._bReadyToRender=false;this._aFields=null;this.attachEvent("modelContextChange",this._initializeMetadata,this);};
b.prototype.setEntitySet=function(e){if(e!==this.getProperty("entitySet")){this.setProperty("entitySet",e,true);if(e){this._initializeMetadata();}}return this;};
b.prototype.setContexts=function(c){if(Array.isArray(c)){for(var i=0;i<c.length;i++){if(!(c[i]instanceof a)){return this;}}this.setProperty("contexts",c,true);this._getFields().forEach(function(f){f._updateContextItems();});}else{L.error("Parameter contexts is expected to be an array.");}return this;};
b.prototype.setLayout=function(s){this.setAggregation("layout",s,true);this._refreshFields();return this;};
b.prototype.addCustomData=function(c){var o;if(!c){return this;}C.prototype.addCustomData.apply(this,arguments);this._getFields().forEach(function(f){o=c.clone();f._oSmartField.addCustomData(o);});return this;};
b.prototype.insertCustomData=function(c,i){var o;if(!c){return this;}C.prototype.insertCustomData.apply(this,arguments);this._getFields().forEach(function(f){o=c.clone();f._oSmartField.addCustomData(o);});return this;};
b.prototype.removeCustomData=function(c){var o=C.prototype.removeCustomData.apply(this,arguments);if(o){this._getFields().forEach(function(f){f._oSmartField.removeCustomData(o);});}return o;};
b.prototype.removeAllCustomData=function(){var c=C.prototype.removeAllCustomData.apply(this,arguments);if(c.length>0){this._getFields().forEach(function(f){c.forEach(function(o){f._oSmartField.removeCustomData(o);});});}return c;};
b.prototype.destroyCustomData=function(){C.prototype.destroyCustomData.apply(this,arguments);this._getFields().forEach(function(f){f._oSmartField.destroyCustomData();});return this;};
b.prototype.getAllUpdatedContexts=function(m){var c=this.getContexts(),u=[],t=this,i=0,s=10;if(c.length===0){return Promise.resolve(u);}return new Promise(function(r){function g(d,e,f){for(i=e;i<Math.min(f,d.length);i++){u.push({context:d[i],data:t._getUpdatedDataObject(d[i].getObject(),m)});}if(i<d.length){setTimeout(g.bind(null,c,i,i+s),0);}else{r(u);}}g(c,i,i+s);});};
b.prototype.getErroneousFields=function(){return this._getFields().filter(function(f){f._performValidation();return f.hasClientError();});};
b.prototype.getErroneousFieldsAndTokens=function(){var p=this._getFields().map(function(f){return f._performValidation();});return Promise.all(p).then(function(){var e=this._getFields().filter(function(f){return f.hasClientError();});return e;}.bind(this));};
b.prototype.indexField=function(f){var c;if(!(f instanceof F)){L.error("Container.indexField","Element '"+JSON.stringify(f)+"' must be of type sap.ui.comp.smartmultiedit.Field","sap.ui.comp.smartmultiedit.Container");return;}this._aFields.push(f);f._setContainer(this);this.getCustomData().forEach(function(o){if(f.getSmartField()){c=o.clone();f.getSmartField().addCustomData(c);}});};
b.prototype._getUpdatedDataObject=function(o,m){var d=m?Object.assign({},o):{},p,u,t,n;this._getFields().forEach(function(f){p=f.getPropertyName();u=f.getUnitOfMeasurePropertyName();n=f.getRawValue();if(n.hasOwnProperty(p)){if(f.isDate()||f.isDateTime()){if(!o[p]){if(n[p]){d[p]=n[p];}}else if(!n[p]){d[p]=null;}else if(!o[p].getTime){L.error("Container._getUpdatedDataObject","Field "+p+" has incompatible data and metadata, expected: Date/DateTime, but found "+typeof d[p],"sap.ui.comp.smartmultiedit.Container");return;}else if(n[p].getTime()!==o[p].getTime()){d[p]=n[p];}}else{if((n[p]!==o[p])&&(n[p]!==""&&n[p]!=null||o[p]!==""&&o[p]!=null)){d[p]=n[p];}}}if(f.isComposite()&&n.hasOwnProperty(u)&&n[u]!==o[u]){d[u]=n[u];}else if(f.isComboBox()){t=f.getRecordTextPath();if(n.hasOwnProperty(t)&&n[t]!==o[t]){d[t]=n[t];}}});return d;};
b.prototype.getFields=function(){return this._getFields();};
b.prototype._getFields=function(){if((!this._aFields||(Array.isArray(this._aFields)&&!this._aFields.length))&&this.getLayout()){this._aFields=[];this.getLayout().getGroups().forEach(function(g){g.getGroupElements().forEach(function(G){G.getElements().forEach(function(e){if(e instanceof F){this.indexField(e);}}.bind(this));}.bind(this));}.bind(this));}return this._aFields||[];};
b.prototype._initializeMetadata=function(){var m=this.getModel();if(!this._bIsInitialized&&this.getEntitySet()&&m&&(m.getMetadata().getName()==="sap.ui.model.odata.v2.ODataModel")){if(!this.getBindingContext()){var c=m.createEntry("/"+this.getEntitySet());this.setBindingContext(c);this.getModel().deleteCreatedEntry(c);}m.getMetaModel().loaded().then(this._onMetadataInitialized.bind(this));}};
b.prototype._onMetadataInitialized=function(){if(this._bIsInitialized){return;}this._bIsInitialized=true;this._bReadyToRender=true;this.invalidate();};
b.prototype._refreshFields=function(){this._aFields=null;this._getFields();};
return b;});
sap.ui.predefine('sap/ui/comp/smartmultiedit/Field',["../library","sap/ui/core/library","sap/ui/core/Control","sap/ui/core/Item","sap/m/Select","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/smartfield/ODataControlFactory","sap/ui/model/BindingMode","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/HBox","sap/ui/core/format/NumberFormat","sap/ui/core/format/DateFormat","sap/m/CheckBox","sap/m/Label","sap/m/Input","sap/base/Log","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/smartfield/type/Decimal"],function(l,c,C,I,S,a,d,O,B,F,f,H,N,D,g,L,h,i,M,j){"use strict";var V=c.ValueState;
var k=O.extend("sap.ui.comp.smartmultiedit.HackedControlFactory");
k.prototype.createAttributes=function(A,t,b,e){var o=O.prototype.createAttributes.apply(this,arguments);if(A&&o[A]){o[A].mode=B.OneWay;}return o;};
k.prototype._createEdmUOMAttributes=function(){var A=O.prototype._createEdmUOMAttributes.apply(this,arguments);if(A.value){A.value.mode=B.OneWay;}return A;};
k.prototype._createEdmDateTime=function(){var r=O.prototype._createEdmDateTime.apply(this);r.params.getValue=function(){if(r.control.getDateValue()){return r.params.type.type.parseValue(r.control.getValue(),"string");}else{return null;}};return r;};
k.prototype._createEdmDateTimeOffset=function(){var r=O.prototype._createEdmDateTimeOffset.apply(this);r.params.getValue=function(){if(r.control.getDateValue()){return r.params.type.type.parseValue(r.control.getValue(),"string");}else{return null;}};return r;};
k.prototype._onCreate=function(o,p){var G;if(p&&typeof p.getValue==="function"){G=p.getValue;p.getValue=null;}if(O.prototype._onCreate){O.prototype._onCreate.call(this,o,p);}if(G){p.getValue=G;}};
k.createFromFactory=function(o){if(!o){return null;}return new k(o._oModel,o._oParent,o._oMeta);};
var m=10;
var n=C.extend("sap.ui.comp.smartmultiedit.Field",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartmultiedit/Field.designtime",properties:{propertyName:{type:"string",defaultValue:null},useApplyToEmptyOnly:{type:"boolean",defaultValue:false},applyToEmptyOnly:{type:"boolean",defaultValue:false},description:{type:"string",defaultValue:null},validateTokenExistence:{type:"boolean",defaultValue:true}},aggregations:{configuration:{type:"sap.ui.comp.smartfield.Configuration",multiple:false}},associations:{},events:{change:{parameters:{selectedItem:{type:"sap.ui.core.Item"}}}}},
renderer:{apiVersion:2,render:function(r,o){r.openStart("div",o);r.class("sapUiCompSmartMultiEditField");r.openEnd();r.renderControl(o._oSelect);r.openStart("div");r.class("sapUiCompSmartMultiEditFieldSFWrapper");r.openEnd();if(o._oSmartField&&o._oSmartField.aCustomStyleClasses.indexOf("sapUiCompSmartMultiEditSmartField")>=0){r.renderControl(o._oSmartField);}r.close("div");if(o.getDescription()){r.openStart("div");r.class("sapUiCompSmartMultiEditSmartFieldDescription");r.openEnd();o._oDescription.setText(o.getDescription());r.renderControl(o._oDescription);r.close("div");}if(o.getUseApplyToEmptyOnly()){r.renderControl(o._oApplyToEmptyOnlyCheckBox);}r.close("div");}}
});
n.ACTION_ITEM_KEY={KEEP:"keep",BLANK:"blank",NEW:"new",TRUE:"true",FALSE:"false"};
n.prototype.init=function(){this._createSelect();this._createSpecialSelectItems();this._createDescription();this._createApplyToEmptyOnlyCheckBox();this._oContainer=null;this._bNullable=true;this._bShowValueHelp=true;this._bClientError=null;this._oAnnotations=null;this._aDistinctValues=[];this._mRecordKeyTextMap={};};
n.prototype.onBeforeRendering=function(){this._updateSpecialSelectItems();};
n.prototype.getNullable=function(){return this._bNullable;};
n.prototype.getShowValueHelp=function(){return this._bShowValueHelp;};
n.prototype.getLabel=function(){if(this.getParent()&&this.getParent().getLabel){return this.getParent().getLabel();}else{return null;}};
n.prototype.getSmartField=function(){return this._oSmartField;};
n.prototype.getValue=function(){return this._oSmartField?this._oSmartField.getValue():null;};
n.prototype.getDataType=function(){if(!this._oSmartField){return null;}try{return this._oSmartField.getDataType();}catch(e){return null;}};
n.prototype.isComposite=function(){return!!this._oAnnotations.uom;};
n.prototype.isString=function(){return this.getDataType()==="Edm.String";};
n.prototype.isInteger=function(){return this.getDataType()==="Edm.Byte"||this.getDataType()==="Edm.Int16"||this.getDataType()==="Edm.Int32"||this.getDataType()==="Edm.Int64"||this.getDataType()==="Edm.SByte";};
n.prototype.isFloat=function(){return this.getDataType()==="Edm.Decimal"||this.getDataType()==="Edm.Double"||this.getDataType()==="Edm.Float"||this.getDataType()==="Edm.Single";};
n.prototype.isDate=function(){return this.getDataType()==="Edm.DateTime";};
n.prototype.isDateTime=function(){return this.getDataType()==="Edm.DateTimeOffset";};
n.prototype.isTime=function(){return this.getDataType()==="Edm.Time";};
n.prototype.isBoolean=function(){return this.getDataType()==="Edm.Boolean";};
n.prototype.isComboBox=function(){var o=this._getCurrentValueControl();return o&&o.isA("sap.m.ComboBox")||false;};
n.prototype.getRecordTextPath=function(){if(this._oAnnotations&&this._oAnnotations.text){return this._oAnnotations.text.path;}else{return null;}};
n.prototype.getUnitOfMeasure=function(){return this._oSmartField?this._oSmartField.getUnitOfMeasure():null;};
n.prototype.getUnitOfMeasurePropertyName=function(){return this._oAnnotations&&this._oAnnotations.uom?this._oAnnotations.uom.path:null;};
n.prototype.setParent=function(p,A,s){C.prototype.setParent.call(this,p,A,s);if(p&&p.getLabel&&!p.getLabel()){this._oLabel=new d(this.getId()+"-SmartLabel");this._oLabel.onFieldVisibilityChange=function(){};this._oLabel.setLabelFor(this._oSmartField.getId());p.setLabel(this._oLabel);this._oSelect.addAriaLabelledBy(this._oLabel);if(this.getDescription()){this._oSelect.addAriaLabelledBy(this._oDescription);}}return this;};
n.prototype.addCustomData=function(o){var b;if(!o){return this;}C.prototype.addCustomData.apply(this,arguments);b=o.clone();this._oSmartField.addCustomData(b);return this;};
n.prototype.insertCustomData=function(o,b){var e;if(!o){return this;}C.prototype.insertCustomData.apply(this,arguments);e=o.clone();this._oSmartField.addCustomData(e);return this;};
n.prototype.removeCustomData=function(v){var o=C.prototype.removeCustomData.apply(this,arguments);if(o){this._oSmartField.removeCustomData(o);}return o;};
n.prototype.removeAllCustomData=function(){var b=C.prototype.removeAllCustomData.apply(this,arguments);if(b.length>0){b.forEach(function(o){this._oSmartField.removeCustomData(o);}.bind(this));}return b;};
n.prototype.destroyCustomData=function(){C.prototype.destroyCustomData.apply(this,arguments);this._oSmartField.destroyCustomData();return this;};
n.prototype.setPropertyName=function(s){this.setProperty("propertyName",s,true);this._createSmartField();return this;};
n.prototype.setConfiguration=function(o){var b;this.setAggregation("configuration",o,true);if(this._oSmartField){b=o?o.clone():null;this._oSmartField.setConfiguration(b);}return this;};
n.prototype.getSelectedItem=function(){return this._oSelect.getSelectedItem();};
n.prototype.setSelectedItem=function(o,s){this._handleSelectionChange(o,s);return this;};
n.prototype.setSelectedIndex=function(b){this.setSelectedItem(this._oSelect.getItems()[b]);return this;};
n.prototype.exit=function(){this._getKeep().destroy();this._getBlank().destroy();this._getValueHelp().destroy();this._getBoolTrueItem().destroy();this._getBoolFalseItem().destroy();};
n.prototype.isBlankSelected=function(){return this._oSelect.getSelectedItem()===this._getBlank();};
n.prototype.isKeepExistingSelected=function(){return this._oSelect.getSelectedItem()===this._getKeep();};
n.prototype.isValueHelpSelected=function(){return this._oSelect.getSelectedItem()===this._getValueHelp();};
n.prototype.getRawValue=function(){var r={},v,b,u,s=this.getSelectedItem(),p=this.getPropertyName();if(s===this._getBoolTrueItem()){v=true;}else if(s===this._getBoolFalseItem()){v=false;}else if(this.isBlankSelected()){v=null;}else if(s===this._getValueHelp()){if(this.isComposite()){b=this.getValue();if(b==null||(typeof b==="string"&&!b.trim())){v={value:null};}else{v={value:(N.getFloatInstance().parse(b)).toString()};}u=this.getUnitOfMeasure();if(u==null||(typeof u==="string"&&!u.trim())){v.unit=null;}else{v.unit=u;}}else if(this.isInteger()&&this.getDataType()!=="Edm.Int64"){v=N.getIntegerInstance().parse(this.getValue());}else if(this.getDataType()==="Edm.Decimal"){v=j.prototype.parseValue(this.getValue(),"string");}else{v=this.getValue();}}else if(s){v=this._mContextItemsData[s.getKey()];}if(!this.isKeepExistingSelected()&&typeof v!=="undefined"){if(this.isComposite()){if(v!=null){r[p]=v.value;r[this.getUnitOfMeasurePropertyName()]=v.unit;}else{r[p]=null;r[this.getUnitOfMeasurePropertyName()]=null;}}else{r[p]=v;if(this.isComboBox()&&this.getRecordTextPath()){if(v!=null){r[this.getRecordTextPath()]=this._mRecordKeyTextMap[v];}else{r[this.getRecordTextPath()]=null;}}}}return r;};
n.prototype.hasClientError=function(){return this._bClientError;};
n.prototype._setNullable=function(v){if(v!==this._bNullable){this._bNullable=v;this._updateSpecialSelectItems();this.getLabel().setRequired(true);}return this;};
n.prototype._setShowValueHelp=function(b){if(b!==this._bShowValueHelp){this._bShowValueHelp=b;this._updateSpecialSelectItems();}return this;};
n.prototype._isSpecialValueItem=function(b){return b===this._getKeep()||b===this._getBlank()||b===this._getValueHelp();};
n.prototype._handleSelectionChangeEvent=function(e){var o=e.getParameter("selectedItem");this._handleSelectionChange(o);};
n.prototype._handleSelectionChange=function(o,s){this._oSelect.setSelectedItem(o);if(this.isKeepExistingSelected()||this.isBlankSelected()){this.getSmartField().removeStyleClass("sapUiCompSmartMultiEditSmartField");this.getSmartField().addStyleClass("sapUiCompSmartMultiEditSmartFieldHidden");}else{this.getSmartField().addStyleClass("sapUiCompSmartMultiEditSmartField");this.getSmartField().removeStyleClass("sapUiCompSmartMultiEditSmartFieldHidden");}if(s){return;}this.fireChange({selectedItem:o});var u=this.isValueHelpSelected();this._oSmartField.setContextEditable(u);this._oSmartField._updateInnerControlsIfRequired();this._oApplyToEmptyOnlyCheckBox.setVisible(u);this._bClientError=null;if(this._isSpecialValueItem(o)){this._setSmartFieldDisplayText(null,null);}else{this._oApplyToEmptyOnlyCheckBox.setVisible(true);if(!this.isBoolean()){this._oSmartField.setContextEditable(true);this._oSmartField._updateInnerControlsIfRequired();}var v=this._mContextItemsData[o.getKey()];if(this.isComposite()){if(this._isCurrencyValue()){this._setSmartFieldDisplayText(this._formatCurrencyValue(N.getFloatInstance().format(v.value),v.unit,true),v.unit);}else{this._setSmartFieldDisplayText(N.getFloatInstance().format(v.value),v.unit);}}else if(this.isBoolean()){this._setSmartFieldDisplayText(o.getText());}else if(this.isDate()){this._setSmartFieldDisplayText(D.getDateInstance().format(v));}else if(this.isDateTime()){this._setSmartFieldDisplayText(D.getDateTimeInstance().format(v));}else if(this.isInteger()){this._setSmartFieldDisplayText(N.getIntegerInstance().format(v));}else if(this.isFloat()){this._setSmartFieldDisplayText(N.getFloatInstance().format(v));}else{this._setSmartFieldDisplayText(v.toString());}if(!this.isBoolean()){this.setSelectedItem(this._getValueHelp(),true);}this._performValidation();}this.invalidate();};
n.prototype._extractValueDisplayText=function(v){var t;if(v==null||v==undefined){return null;}if(this.isComposite()){if(this._isCurrencyValue()){t=this._formatCurrencyValue(N.getFloatInstance().format(v.value),v.unit);}else{t=N.getFloatInstance().format(v.value)+" "+v.unit;}}else if(this.isBoolean()){t=v?this._getBoolTrueItem().getText():this._getBoolFalseItem().getText();}else if(this.isDate()){t=D.getDateInstance().format(v);}else if(this.isDateTime()){t=D.getDateTimeInstance().format(v);}else if(this.isInteger()){t=N.getIntegerInstance().format(v);}else if(this.isFloat()){t=N.getFloatInstance().format(v);}else{t=String(v);}return t;};
n.prototype._createSelect=function(){this._oSelect=new S(this.getId()+"-select");this._oSelect.setWidth("100%");this._oSelect.attachChange(this._handleSelectionChangeEvent,this);this.addDependent(this._oSelect);};
n.prototype._getResourceBundle=function(){if(this._oRb==null){this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");}return this._oRb;};
n.prototype._createSpecialSelectItems=function(){var G=new I({key:n.ACTION_ITEM_KEY.KEEP,text:"< "+this._getResourceBundle().getText("MULTI_EDIT_KEEP_TEXT")+" >"});this._getKeep=function(){return G;};var o=new I({key:n.ACTION_ITEM_KEY.BLANK,text:"< "+this._getResourceBundle().getText("MULTI_EDIT_BLANK_TEXT")+" >"});this._getBlank=function(){return o;};var b=new I({key:n.ACTION_ITEM_KEY.NEW,text:"< "+this._getResourceBundle().getText("MULTI_EDIT_NEW_TEXT")+" >"});this._getValueHelp=function(){return b;};var e=new I({key:n.ACTION_ITEM_KEY.TRUE,text:this._getResourceBundle().getText("SMARTFIELD_CB_YES")});this._getBoolTrueItem=function(){return e;};var p=new I({key:n.ACTION_ITEM_KEY.FALSE,text:this._getResourceBundle().getText("SMARTFIELD_CB_NO")});this._getBoolFalseItem=function(){return p;};};
n.prototype._createDescription=function(){if(!this._oDescription){this._oDescription=new L();this.addDependent(this._oDescription);}};
n.prototype._createApplyToEmptyOnlyCheckBox=function(){this._oApplyToEmptyOnlyCheckBox=new g(this.getId()+"-ApplyToEmptyOnly");this._oApplyToEmptyOnlyCheckBox.setText(this._getResourceBundle().getText("MULTI_EDIT_APPLY_TO_EMPTY_ONLY"));this._oApplyToEmptyOnlyCheckBox.attachSelect(function(e){this.setApplyToEmptyOnly(e.getSource().getSelected());}.bind(this));this.addDependent(this._oApplyToEmptyOnlyCheckBox);};
n.prototype._createSmartField=function(){this._bIsSmartFieldInitialized=false;this._oSmartField=new a({id:this.getId()+"-SmartField",value:{path:this.getPropertyName(),mode:"OneWay"}});this._oSmartField.addStyleClass("sapUiCompSmartMultiEditSmartFieldHidden");this._oSmartField._createFactory=function(){var o=a.prototype._createFactory.apply(this,arguments);return k.createFromFactory(o);};this.addDependent(this._oSmartField);this._oSmartField.setValue=this._handleSmartFieldSetValue;this._pInitialised=new Promise(function(r,R){this._oSmartField.attachInitialise({resolve:r,reject:R},this._handleSmartFieldInitialized,this);}.bind(this));this._oSmartField.attachInnerControlsCreated(this._handleInnerControlsCreation.bind(this),this);if(this.getConfiguration()){this._oSmartField.setConfiguration(this.getConfiguration().clone());}this._oSmartField._forceInitialise();this._oSmartFieldValue=null;};
n.prototype._getCurrentValueControl=function(){return this._oSmartField?this._oSmartField._oControl[this._oSmartField._oControl.current]:null;};
n.prototype._setSmartFieldDisplayText=function(v,u){var o,U;this._oSmartFieldValue=v;this._oSmartField.setValue(v);var b=this._getCurrentValueControl();if(b){if(this.isComboBox()){b.setSelectedKey(v);}else if(this.isComposite()&&b.getItems){o=b.getItems()[0];if(o.setValue){o.setValue(v);}else if(o.setText){o.setText(v);}else if(o.setSelectedKey){o.setSelectedKey(v);}o=b.getItems()[1];if(o._oControl.current==="display"){U=o._oControl.display;if(U.setText){U.setText(u);}}else if(o._oControl.current==="edit"){U=o._oControl.edit;if(U.setValue){U.setValue(u);}else if(U.setSelectedKey){U.setSelectedKey(u);}}}else if(b.setText){b.setText(v);}else if(b.setValue){b.setValue(v);}}};
n.prototype._getSmartFieldDisplayText=function(){var o=this._oSmartField._oControl.display,t="";if(o){if(this.isComposite()&&o.getItems){if(o.getItems()[0].getText){t+=o.getItems()[0].getText();}var b=o.getItems()[1]._oControl.display;if(b&&b.getText){t+=o.getItems()[1]._oControl.display.getText();}return t;}else if(o.isA("sap.m.ComboBox")){return this._mRecordKeyTextMap[o.getSelectedKey()]||"";}else if(o.getText){return o.getText();}else{return null;}}else{return null;}};
n.prototype._handleSmartFieldSetValue=function(v){if(v===this.getParent()._oSmartFieldValue){a.prototype.setValue.call(this.getParent()._oSmartField,v);}};
n.prototype._handleSmartFieldInitialized=function(e,p){if(this.isTime()){i.error("Field._handleSmartFieldInitialized","Edm.Time data type is not supported, field: '"+this.getPropertyName()+"'","sap.ui.comp.smartmultiedit.Field");return;}this._oAnnotations=this._oSmartField._oFactory._oMetaData.annotations;this._bIsSmartFieldInitialized=true;this._oSmartField.setContextEditable(false);this._oSmartField._updateInnerControlsIfRequired();this._updateContextItems();this._oApplyToEmptyOnlyCheckBox.setVisible(false);p.resolve();};
n.prototype._handleInnerControlsCreation=function(e){var b;e.mParameters.forEach(function(o){if(o.getParent()&&o.getParent()._oControl){if(o.getParent()._oControl.display===o){if(o.mBindingInfos.text){o.mBindingInfos.text.skipModelUpdate=true;}}else if(o.getParent()._oControl.edit===o){if(o.mBindingInfos.value){o.mBindingInfos.value.skipModelUpdate=true;o.setValue(null);}else if(o.mBindingInfos.selected){o.mBindingInfos.selected.skipModelUpdate=true;o.setSelected(false);}}}if(o===this._oSmartField._oControl.display){return;}if(o.attachChange){o.attachChange(this._performValidation,this);}if(o.getParent()&&o.getParent().getParent()instanceof a&&o.getParent().getParent()._oControl.edit instanceof H&&this._oAnnotations&&this.isComposite()){var p=o.getParent().getParent()._oControl.edit;var q=p.getItems();q[0].attachChange(this._handleCompositeInputChange,this);if(q[1]&&q[1]._oControl&&q[1]._oControl.edit){q[1]._oControl.edit.attachChange(this._handleCompositeInputChange,this);}}else if(o.getParent()instanceof a&&!(o.getParent().getParent()instanceof H)&&o.getParent()._oControl.edit instanceof h){o.getParent()._oControl.edit.attachChange(this._handleInputChange,this);}}.bind(this));b=this._oSmartField.getMandatory();this._setNullable(!b);};
n.prototype._getInnerEdit=function(){return this._oSmartField._oControl.edit;};
n.prototype._getFirstInnerEdit=function(){return this._oSmartField._oControl.edit?this._oSmartField._oControl.edit.getItems()[0]:null;};
n.prototype._getSecondInnerEdit=function(){return this._oSmartField._oControl.edit?this._oSmartField._oControl.edit.getItems()[1]._oControl.edit:null;};
n.prototype._performTokenValidation=function(s,v,o){return new Promise(function(r,b){var e=new M(o.getModel());e.getValueListAnnotationLazy(v).then(function(R){var p=R.primaryValueListAnnotation;if(!p){r();return;}o.getModel().read("/"+p.valueListEntitySetName,{success:function(R){if(R.results&&R.results.length===0&&s._oControl.edit){s._oControl.edit.setValueState(V.Error);o._bClientError=true;}else if(!o._bClientError){s._oControl.edit.setValueState(V.None);o._bClientError=null;}r();},filters:[new F({path:p.keyField,operator:f.EQ,value1:s.getValue()})],error:function(E){b(E);}});});});};
n.prototype._performValidation=function(){var e=this._oSmartField._oError;e.bComplex=false;e.bFirst=false;e.bSecond=false;var b=this._oSmartField.getInnerControls();if(this.isComposite()&&b.length===2&&b[0].getBinding("value")){var v=b[0].getBinding("value");var G=v.getValue;v.getValue=function(){var s=this._getFirstInnerEdit().getValue();var o=this._getSecondInnerEdit().getValue();return[s,o];}.bind(this);this._bClientError=this._oSmartField.checkClientError();v.getValue=G;}else{this._bClientError=this._oSmartField.checkClientError();}if(this.isKeepExistingSelected()||this.isBlankSelected()){return;}if(this.isComposite()){if(this._bClientError){if(e.bFirst&&this._getFirstInnerEdit()){this._getFirstInnerEdit().setValueState(V.Error);}if(e.bSecond&&this._getSecondInnerEdit()){this._getSecondInnerEdit().setValueState(V.Error);}}else{if(this._getFirstInnerEdit()){this._getFirstInnerEdit().setValueState(V.None);}if(this._getSecondInnerEdit()){this._getSecondInnerEdit().setValueState(V.None);}}}else{if(!this._getInnerEdit()){return;}if(this._bClientError){this._getInnerEdit().setValueState(V.Error);}else{this._getInnerEdit().setValueState(V.None);}}if(this.getValidateTokenExistence()){var p=[];if("valuelist"in this._oAnnotations){p.push(this._performTokenValidation(this.getSmartField(),this._oAnnotations.valuelist,this));}if(this.isComposite()&&"valuelistuom"in this._oAnnotations&&this.getSmartField()._oControl.edit){p.push(this._performTokenValidation(this.getSmartField()._oControl.edit.getItems()[1],this._oAnnotations.valuelistuom,this));}return Promise.all(p);}else{return Promise.resolve();}};
n.prototype._handleCompositeInputChange=function(e){var s=this._getFirstInnerEdit().getValue(),b=this._getSecondInnerEdit().getValue(),o;if(this._isCurrencyValue()){o=this._formatCurrencyValue(s,b,true);}else{var v=N.getFloatInstance({parseAsString:true}).parse(s);o=N.getFloatInstance().format(v);}if(!this._oSmartField._oError.bFirst&&!this._oSmartField._oError.bSecond){this._setSmartFieldDisplayText(o,this._getSecondInnerEdit().getValue());}};
n.prototype._handleInputChange=function(){var v=this._getInnerEdit().getValue();if(!this.isString()){var p=N.getFloatInstance({parseAsString:true}).parse(v);v=N.getFloatInstance().format(p);}if(!this._oSmartField._oError.bFirst){this._setSmartFieldDisplayText(v,this._getInnerEdit().getValue());}};
n.prototype._formatCurrencyValue=function(v,s,b){var e=N.getFloatInstance().parse(v),o=N.getCurrencyInstance().format(e,s);if(b){o=o.replace(s,"").trim();}return o;};
n.prototype._updateSpecialSelectItems=function(){this._oSelect.removeAggregation("items",this._getKeep(),true);this._oSelect.removeAggregation("items",this._getBlank(),true);this._oSelect.removeAggregation("items",this._getValueHelp(),true);this._oSelect.insertAggregation("items",this._getKeep(),0,true);if(this.getShowValueHelp()){this._oSelect.insertAggregation("items",this._getValueHelp(),1,true);}if(this.getNullable()){this._oSelect.insertAggregation("items",this._getBlank(),this.getShowValueHelp()?2:1,true);}this.invalidate();};
n.prototype._removeContextItems=function(){this._oSelect.removeAllItems();this._updateSpecialSelectItems();};
n.prototype._updateContextItems=function(){var v,u,U,t;if(!this._oContainer||!this.getDataType()||!this._bIsSmartFieldInitialized){return;}this._removeContextItems();if(this.isBoolean()){this._oSelect.addAggregation("items",this._getBoolTrueItem(),true);this._oSelect.addAggregation("items",this._getBoolFalseItem(),true);this._setShowValueHelp(false);}this._aDistinctValues=[];this._mContextItemsData={};this._mValueOccurences={};this._oContainer.getContexts().forEach(function(o){v=this.getModel().getObject(o.getPath())[this.getPropertyName()];if(typeof v==="undefined"||v==null||(typeof v==="string"&&!v.trim())){return;}if(this.isComposite()){u=this.getModel().getObject(o.getPath())[this.getUnitOfMeasurePropertyName()];U={value:v,unit:u};if(this._aDistinctValues.map(JSON.stringify).indexOf(JSON.stringify(U))===-1){this._aDistinctValues.push(U);this._mValueOccurences[U.unit+U.value]={count:1,value:U,context:o};}else{this._mValueOccurences[U.unit+U.value].count++;}}else if(this.isDate()||this.isDateTime()){if(this._aDistinctValues.map(Number).indexOf(+v)===-1){this._aDistinctValues.push(v);this._mValueOccurences[v]={count:1,value:v,context:o};}else{this._mValueOccurences[v].count++;}}else{if(this._aDistinctValues.indexOf(v)===-1){this._aDistinctValues.push(v);this._mValueOccurences[v]={count:1,value:v,context:o};}else{this._mValueOccurences[v].count++;}}}.bind(this));t=Object.keys(this._mValueOccurences).map(function(b){return[b,this._mValueOccurences[b]];}.bind(this));t.sort(function(b,s){if(s[1].count!==b[1].count){return s[1].count-b[1].count;}else{if(this.isComposite()){return s[1].value.value-b[1].value.value;}else if(this.isInteger()||this.isFloat()){return s[1].value-b[1].value;}else if(this.isDate()||this.isDateTime()){return s[1].value.getTime()-b[1].value.getTime();}else if(b[1].value.localeCompare&&s[1].value.localeCompare){return b[1].value.localeCompare(s[1].value);}else{return 0;}}}.bind(this));t=t.slice(0,m);this._aDistinctValues=[];t.forEach(function(o){this._addInnerSelectItem(o[1].value,o[1].context);this._aDistinctValues.push(o[1].value);}.bind(this));this._setSmartFieldDisplayText(null,null);};
n.prototype._addInnerSelectItem=function(v,o){var K,t;if(typeof v==="undefined"||v==null||this.isBoolean()){return;}if(this.isComposite()){K=JSON.stringify([v.value,v.unit]);}else if(this.isDate()){K=D.getDateInstance().format(v);}else if(this.isDateTime()){K=D.getDateTimeInstance().format(v);}else{K=String(v);}if(this.isComboBox()){t=o.getObject(this.getRecordTextPath());this._mRecordKeyTextMap[K]=t;}else{t=this._extractValueDisplayText(v);}this._oSelect.addItem(new I({key:K,text:t}),true);this._mContextItemsData[K]=v;};
n.prototype._setContainer=function(o){this._oContainer=o;this._updateContextItems();};
n.prototype._isCurrencyValue=function(){return(this._oAnnotations&&this._oAnnotations.uom&&this._oAnnotations.uom.property.property["sap:semantics"]=="currency-code");};
return n;});
sap.ui.predefine('sap/ui/comp/smartmultiedit/flexibility/changes/AddMultiEditFields',["sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/comp/smartmultiedit/Container","sap/ui/comp/smartform/flexibility/changes/AddFields"],function(L,J,C,A){"use strict";var a={};
a.applyChange=function(c,g,p){var o=c.getDefinition();var m=p.modifier;var b=p.appComponent;var f=o.content.field.selector;var v=p.view;var F=o.content.field.id;var i=o.content.field.index;var P=o.content.field.propertyName;var s=c.getDependentControl("form",p);var d=s&&m.getFlexDelegate(s);if(!d){if(this._checkChangeDefinition(o)){var j=o.content.field.jsType;var e=o.content.field.entitySet;var G;var h;return Promise.resolve().then(m.createControl.bind(m,"sap.ui.comp.smartform.GroupElement",p.appComponent,p.view,f||F)).then(function(k){G=k;return this._createGroupElementField(m,p.view,G,j,P,e,p.appComponent);}.bind(this)).then(function(k){h=k;return m.insertAggregation(g,"groupElements",G,i,p.view);}).then(function(){var k=this._getContainerFromGroup(g);if(k){k.indexField(h);}c.setRevertData({newFieldSelector:m.getSelector(G,p.appComponent)});}.bind(this));}else{L.error("Change doesn't contain sufficient information to be applied: "+this._getChangeInfo(o));}}return A._addFieldFromDelegate(s,g,f,F,i,P,c,m,v,b);};
a.revertChange=function(c,g,p){var o=c.getDefinition(),r=c.getRevertData(),s=r.newFieldSelector,m=p.modifier;if(s){var G=m.bySelector(s,p.appComponent,p.view);return Promise.resolve().then(m.removeAggregation.bind(m,g,"groupElements",G)).then(function(){m.destroy(G);var b=this._getContainerFromGroup(g);if(b){b._refreshFields();}var v=r.valueHelpSelector;if(v){var d=p.appComponent;var V=p.view;var e=m.bySelector(v,d,V);var S=c.getDependentControl("form",p);return Promise.resolve().then(m.removeAggregation.bind(m,S,"dependents",e)).then(m.destroy.bind(m,e));}}.bind(this)).then(function(){c.resetRevertData();});}else{L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange: "+this._getChangeInfo(o));return Promise.resolve();}};
a.completeChangeContent=function(c,s,p){var o=p.appComponent;var b=c.getDefinition();if(!b.content){b.content={};}if(!b.content.field){b.content.field={};}if(s.bindingPath){b.content.field.propertyName=s.bindingPath;}else{throw new Error("oSpecificChangeInfo.bindingPath or bindingPath attribute required");}if(s.newControlId){b.content.field.selector=J.getSelector(s.newControlId,o);}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsTypes){b.content.field.jsType=s.jsType;}else if(s.bindingPath){b.content.field.jsType="sap.ui.comp.smartmultiedit.Field";}else{throw new Error("oSpecificChangeInfo.jsTypes or bindingPath attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{b.content.field.index=s.index;}if(s.entitySet){b.content.field.entitySet=s.entitySet;}if(s.relevantContainerId){c.addDependentControl(s.relevantContainerId,"form",p);}};
a._checkChangeDefinition=function(c){var b=c.content,m=false;if(b){m=c.content.field&&(c.content.field.selector||c.content.field.id)&&c.content.field.jsType&&c.content.field.propertyName;}return b&&m;};
a._createGroupElementField=function(m,v,g,j,p,e,o){return Promise.resolve().then(m.createControl.bind(m,j,o,v)).then(function(V){m.setProperty(V,"propertyName",p);if(e){m.setProperty(V,"entitySet",e);}return Promise.resolve().then(m.insertAggregation.bind(m,g,"elements",V,0,v,true)).then(function(){return V;});});};
a._getContainerFromGroup=function(g){if(g&&typeof g.getParent==="function"&&typeof g.getParent().getParent==="function"&&typeof g.getParent().getParent().getParent==="function"){var c=g.getParent().getParent().getParent();if(c instanceof C){return c;}}};
a._getChangeInfo=function(c){return"["+c.layer+"]"+c.namespace+"/"+c.fileName+"."+c.fileType;};
return a;},true);
sap.ui.predefine('sap/ui/comp/transport/TransportDialog',["sap/ui/fl/transport/TransportDialog"],function(F){"use strict";
var T=F.extend("sap.ui.comp.transport.TransportDialog",{
metadata:{library:"sap.ui.comp",deprecated:true},
renderer:{apiVersion:2}
});
return T;},true);
sap.ui.predefine('sap/ui/comp/type/Interval',['sap/ui/comp/util/DateTimeUtil','sap/ui/model/CompositeType','sap/ui/model/FormatException','sap/ui/model/ParseException','sap/ui/model/ValidateException','sap/ui/core/LocaleData'],function(D,C,F,P,V,L){"use strict";
var I=C.extend("sap.ui.comp.type.Interval",{constructor:function(){C.apply(this,arguments);this.sName="Interval";this.bUseInternalValues=true;}});
I.prototype.formatValue=function(v,i){if(v==undefined||v==null){return null;}if(!Array.isArray(v)){throw new F("Cannot format interval: "+v+" is expected as an Array but given the wrong format");}if(v.length<1||v.length>2){throw new F("Cannot format interval: "+v+" is expected as an Array with 1 or 2 entries");}if(!i){i="string";}switch(this.getPrimitiveType(i)){case"string":case"any":if(v[0]===null&&(v.length===1||v[1]===null)){return"";}var t=this.oFormatOptions.type;var p=_.call(this,t);var s;var d;var r;if(t){if(t.isA("sap.ui.model.odata.type.Time")){s=t.formatValue(b(v[0]),"string");}else{s=t.formatValue(v[0],"string");}}else{s=v[0];}if(v.length===1||v[1]===null){r=s;}else{if(t){if(t.isA("sap.ui.model.odata.type.Time")){d=t.formatValue(b(v[1]),"string");}else{d=t.formatValue(v[1],"string");}}else{d=v[1];}r=p.replace(/\{0\}/g,s).replace(/\{1\}/g,d);}return r;default:throw new F("Don't know how to format Interval to "+i);}};
I.prototype.parseValue=function(v,i,d){if((!i||i==="any")&&typeof v==="string"){i="string";}switch(this.getPrimitiveType(i)){case"string":if(!v){return[null,null];}var t=this.oFormatOptions.type;var p=_.call(this,t);var s=a.call(this,t);var r=[];var e=v.indexOf(s);var f=null;var g=null;if(e<0&&s.length>1){s=s.replace(/\s+/g,'');e=v.indexOf(s);}if(e<0&&s!==" - "&&s!=="-"){s=" - ";e=v.indexOf(s);}if(e<0&&s!=="-"){s="-";e=v.indexOf(s);}if(e===0&&s==="-"){e=v.slice(1).indexOf(s);if(e>=0){e++;}}if(e<0){f=v;if(!f){throw new P(v+" is not a valid interval");}}else if(e===0){f="";g=v.slice(s.length);if(!g){throw new P(v+" is not a valid interval");}}else{f=v.slice(0,e);g=v.slice(e+s.length);if(!f||!g){throw new P(v+" is not a valid interval");}}if(t){f=t.parseValue(f,"string");if(t.isA("sap.ui.model.odata.type.Time")){f=c(f);}if(e>=0){g=t.parseValue(g,"string");if(t.isA("sap.ui.model.odata.type.Time")){g=c(g);}}}if(p.indexOf("{0}")<p.indexOf("{1}")){r.push(f);r.push(g);}else{r.push(g);r.push(f);}return r;default:throw new P("Don't know how to parse Interval from "+i);}};
I.prototype.validateValue=function(v){if(v==undefined||v==null){return;}if(!Array.isArray(v)){throw new V("An array is expected");}if(v.length<1||v.length>2){throw new V("There must be only one or two values in the array");}if(v.length===2&&v[1]!==null&&typeof v[0]!==typeof v[1]){throw new V("Low and high value must have the same type");}var t=this.oFormatOptions.type;if(t){if(t.isA("sap.ui.model.odata.type.Time")){t.validateValue(b(v[0]));}else{t.validateValue(v[0]);}if(v.length===2&&v[1]!==null){if(t.isA("sap.ui.model.odata.type.Time")){t.validateValue(b(v[1]));}else{t.validateValue(v[1]);}}}if(typeof v[0]==="number"){if(v.length===2&&v[1]!==null&&v[0]>v[1]){throw new V("Low value must be smaller than high value");}}else if(v[0]instanceof Date){if(v.length===2&&v[1]instanceof Date&&v[0]>v[1]){throw new V("Low value must be smaller than high value");}}};
I.prototype._handleLocalizationChange=function(){delete this._sPattern;delete this._sDelimiter;};
function _(t){if(this.oFormatOptions.delimiter){return"{0} "+this.oFormatOptions.delimiter+" {1}";}else if(!this._sPattern){var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=L.getInstance(l);if(t&&(t.isA("sap.ui.model.type.Time")||t.isA("sap.ui.model.odata.type.Time")||t.isA("sap.ui.model.type.Date")||t.isA("sap.ui.model.odata.type.Date")||t.isA("sap.ui.model.type.DateTime")||t.isA("sap.ui.model.odata.type.DateTime")||t.isA("sap.ui.model.odata.type.DateTimeOffset")||t.isA("sap.ui.model.odata.type.TimeOfDay"))){this._sPattern=o.getIntervalPattern();}else{this._sPattern=o.getMiscPattern("range");}return this._sPattern;}else{return this._sPattern;}}
function a(t){if(this.oFormatOptions.delimiter){return this.oFormatOptions.delimiter;}else if(!this._sDelimiter){var p=_.call(this,t);this._sDelimiter=p.replace(/\{0\}/g,"").replace(/\{1\}/g,"");return this._sDelimiter;}else{return this._sDelimiter;}}
function b(d){if(d instanceof Date){d=D.localToUtc(d);return D.dateToEdmTime(d);}else{return d;}}
function c(t){var d;if(t&&t.ms){d=D.edmTimeToDate(t);return D.utcToLocal(d);}else{return t;}}
return I;});
sap.ui.require.preload({
	"sap/ui/comp/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ui.comp","type":"library","embeds":[],"applicationVersion":{"version":"1.96.0"},"title":"SAPUI5 library with smart controls.","description":"SAPUI5 library with smart controls.","ach":"CA-UI5-CMP\\n\\t\\t\\t","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.96","libs":{"sap.ui.core":{"minVersion":"1.96.0"},"sap.m":{"minVersion":"1.96.0"},"sap.ui.fl":{"minVersion":"1.96.0","lazy":true},"sap.ui.mdc":{"minVersion":"1.96.0","lazy":true},"sap.ui.table":{"minVersion":"1.96.0","lazy":true},"sap.chart":{"minVersion":"1.96.0","lazy":true},"sap.ui.layout":{"minVersion":"1.96.0","lazy":true},"sap.suite.ui.microchart":{"minVersion":"1.96.0","lazy":true}}},"library":{"i18n":{"bundleUrl":"messagebundle.properties","supportedLocales":["","ar","bg","ca","cs","cy","da","de","el","en","en-GB","en-US-sappsd","en-US-saprigi","en-US-saptrc","es","es-MX","et","fi","fr","fr-CA","hi","hr","hu","id","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","pt-PT","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh-CN","zh-TW"]},"content":{"controls":["sap.ui.comp.filterbar.FilterBar","sap.ui.comp.navpopover.NavigationPopover","sap.ui.comp.navpopover.SmartLink","sap.ui.comp.smartchart.SmartChart","sap.ui.comp.smartfield.SmartField","sap.ui.comp.smartfield.SmartLabel","sap.ui.comp.smartfilterbar.SmartFilterBar","sap.ui.comp.smartform.SmartForm","sap.ui.comp.smartmultiedit.Field","sap.ui.comp.smartmultiedit.Container","sap.ui.comp.smartmicrochart.SmartAreaMicroChart","sap.ui.comp.smartmicrochart.SmartLineMicroChart","sap.ui.comp.smartmicrochart.SmartBulletMicroChart","sap.ui.comp.smartmicrochart.SmartDeltaMicroChart","sap.ui.comp.smartmicrochart.SmartRadialMicroChart","sap.ui.comp.smartmicrochart.SmartStackedBarMicroChart","sap.ui.comp.smartmicrochart.SmartComparisonMicroChart","sap.ui.comp.smartmicrochart.SmartColumnMicroChart","sap.ui.comp.smartmicrochart.SmartHarveyBallMicroChart","sap.ui.comp.smartmicrochart.SmartMicroChart","sap.ui.comp.smarttable.SmartTable","sap.ui.comp.smartlist.SmartList","sap.ui.comp.smartvariants.SmartVariantManagement","sap.ui.comp.smartvariants.SmartVariantManagementUi2","sap.ui.comp.transport.TransportDialog","sap.ui.comp.valuehelpdialog.ValueHelpDialog","sap.ui.comp.variants.EditableVariantItem","sap.ui.comp.variants.VariantManagement"],"elements":["sap.ui.comp.filterbar.FilterGroupItem","sap.ui.comp.filterbar.FilterItem","sap.ui.comp.navpopover.LinkData","sap.ui.comp.navpopover.SemanticObjectController","sap.ui.comp.smartfield.Configuration","sap.ui.comp.smartfield.ControlProposal","sap.ui.comp.smartfield.ObjectStatus","sap.ui.comp.smartfilterbar.ControlConfiguration","sap.ui.comp.smartfilterbar.GroupConfiguration","sap.ui.comp.smartfilterbar.SelectOption","sap.ui.comp.smartform.Group","sap.ui.comp.smartform.GroupElement","sap.ui.comp.smartform.SemanticGroupElement","sap.ui.comp.smartform.Layout","sap.ui.comp.smartvariants.PersonalizableInfo","sap.ui.comp.variants.VariantItem","sap.ui.comp.navpopover.NavigationContainer","sap.ui.comp.smartvariants.SmartVariantManagementAdapter"],"types":["sap.ui.comp.smartfield.ControlProposalType","sap.ui.comp.smartfield.ControlContextType","sap.ui.comp.smartfield.ControlType","sap.ui.comp.smartchart.SelectionMode","sap.ui.comp.smartfield.DisplayBehaviour","sap.ui.comp.smartfield.JSONType","sap.ui.comp.smartfield.CriticalityRepresentationType","sap.ui.comp.smartfield.TextInEditModeSource","sap.ui.comp.smartfield.Importance","sap.ui.comp.TextArrangementType","sap.ui.comp.smarttable.TableType","sap.ui.comp.smarttable.ExportType","sap.ui.comp.smartlist.ListType","sap.ui.comp.personalization.AggregationRole","sap.ui.comp.personalization.ResetType","sap.ui.comp.personalization.ChangeType","sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation","sap.ui.comp.smartfilterbar.SelectOptionSign","sap.ui.comp.smartfilterbar.DisplayBehaviour","sap.ui.comp.smartform.SmartFormValidationMode"],"interfaces":["sap.ui.comp.smartform.SmartFormLayout","sap.ui.comp.IFormGroupElement"]}}}}',
	"sap/ui/comp/library-preload-lazy.js":function(){
/* the subsequent text seems not to contain a copyright or license statement */
sap.ui.loader.config({bundlesUI5:{"sap/ui/comp/library-preload.js":["sap/ui/comp/config/condition/DateRangeType.js","sap/ui/comp/config/condition/Type.js","sap/ui/comp/filterbar/FilterBar.js","sap/ui/comp/filterbar/FilterGroupItem.js","sap/ui/comp/filterbar/FilterItem.js","sap/ui/comp/filterbar/VariantConverterFrom.js","sap/ui/comp/filterbar/VariantConverterTo.js","sap/ui/comp/historyvalues/Constants.js","sap/ui/comp/historyvalues/HistoryAppDataService.js","sap/ui/comp/historyvalues/HistoryGlobalDataService.js","sap/ui/comp/historyvalues/HistoryOptOutProvider.js","sap/ui/comp/historyvalues/HistoryValuesProvider.js","sap/ui/comp/library.js","sap/ui/comp/manifest.json","sap/ui/comp/navpopover/ContactDetailsController.js","sap/ui/comp/navpopover/Factory.js","sap/ui/comp/navpopover/FakeFlpConnector.js","sap/ui/comp/navpopover/FlexConnector.js","sap/ui/comp/navpopover/LinkData.js","sap/ui/comp/navpopover/Log.js","sap/ui/comp/navpopover/NavigationContainer.js","sap/ui/comp/navpopover/NavigationPopover.js","sap/ui/comp/navpopover/NavigationPopoverHandler.js","sap/ui/comp/navpopover/RTAHandler.js","sap/ui/comp/navpopover/SemanticObjectController.js","sap/ui/comp/navpopover/SmartLink.js","sap/ui/comp/navpopover/SmartLinkRenderer.js","sap/ui/comp/navpopover/Util.js","sap/ui/comp/navpopover/flexibility/changes/AddLink.js","sap/ui/comp/navpopover/flexibility/changes/RemoveLink.js","sap/ui/comp/odata/CalendarMetadata.js","sap/ui/comp/odata/ChartMetadata.js","sap/ui/comp/odata/CriticalityMetadata.js","sap/ui/comp/odata/FiscalFormat.js","sap/ui/comp/odata/FiscalMetadata.js","sap/ui/comp/odata/MetadataAnalyser.js","sap/ui/comp/odata/ODataModelUtil.js","sap/ui/comp/odata/ODataType.js","sap/ui/comp/odata/SideEffects.js","sap/ui/comp/odata/type/FiscalDate.js","sap/ui/comp/odata/type/NumericText.js","sap/ui/comp/odata/type/StringDate.js","sap/ui/comp/p13n/P13nConditionPanel.js","sap/ui/comp/p13n/P13nFilterPanel.js","sap/ui/comp/p13n/P13nOperationsHelper.js","sap/ui/comp/personalization/BaseController.js","sap/ui/comp/personalization/ChartWrapper.js","sap/ui/comp/personalization/ColumnHelper.js","sap/ui/comp/personalization/ColumnWrapper.js","sap/ui/comp/personalization/ColumnsController.js","sap/ui/comp/personalization/Controller.js","sap/ui/comp/personalization/DimeasureController.js","sap/ui/comp/personalization/FilterController.js","sap/ui/comp/personalization/GroupController.js","sap/ui/comp/personalization/SelectionController.js","sap/ui/comp/personalization/SelectionWrapper.js","sap/ui/comp/personalization/SortController.js","sap/ui/comp/personalization/UIManager.js","sap/ui/comp/personalization/Util.js","sap/ui/comp/personalization/Validator.js","sap/ui/comp/providers/BaseValueListProvider.js","sap/ui/comp/providers/ChartProvider.js","sap/ui/comp/providers/ControlProvider.js","sap/ui/comp/providers/TableProvider.js","sap/ui/comp/providers/TokenParser.js","sap/ui/comp/providers/ValueHelpProvider.js","sap/ui/comp/providers/ValueListProvider.js","sap/ui/comp/smartchart/SmartChart.js","sap/ui/comp/smartfield/AnnotationHelper.js","sap/ui/comp/smartfield/BindingUtil.js","sap/ui/comp/smartfield/ComboBox.js","sap/ui/comp/smartfield/Configuration.js","sap/ui/comp/smartfield/ControlFactoryBase.js","sap/ui/comp/smartfield/ControlProposal.js","sap/ui/comp/smartfield/FieldControl.js","sap/ui/comp/smartfield/JSONControlFactory.js","sap/ui/comp/smartfield/JSONTypes.js","sap/ui/comp/smartfield/ODataControlFactory.js","sap/ui/comp/smartfield/ODataControlSelector.js","sap/ui/comp/smartfield/ODataHelper.js","sap/ui/comp/smartfield/ODataTypes.js","sap/ui/comp/smartfield/ObjectStatus.js","sap/ui/comp/smartfield/SideEffectUtil.js","sap/ui/comp/smartfield/SmartField.js","sap/ui/comp/smartfield/SmartLabel.js","sap/ui/comp/smartfield/TextArrangementDelegate.js","sap/ui/comp/smartfield/flexibility/ODataV2Delegate.js","sap/ui/comp/smartfield/flexibility/SmartField.flexibility.js","sap/ui/comp/smartfield/type/AbapBool.js","sap/ui/comp/smartfield/type/Byte.js","sap/ui/comp/smartfield/type/Currency.js","sap/ui/comp/smartfield/type/DateTime.js","sap/ui/comp/smartfield/type/DateTimeOffset.js","sap/ui/comp/smartfield/type/Decimal.js","sap/ui/comp/smartfield/type/Double.js","sap/ui/comp/smartfield/type/Guid.js","sap/ui/comp/smartfield/type/Int16.js","sap/ui/comp/smartfield/type/Int32.js","sap/ui/comp/smartfield/type/Int64.js","sap/ui/comp/smartfield/type/SByte.js","sap/ui/comp/smartfield/type/String.js","sap/ui/comp/smartfield/type/TextArrangement.js","sap/ui/comp/smartfield/type/TextArrangementGuid.js","sap/ui/comp/smartfield/type/TextArrangementString.js","sap/ui/comp/smartfield/type/Time.js","sap/ui/comp/smartfield/type/Unit.js","sap/ui/comp/smartfilterbar/AdditionalConfigurationHelper.js","sap/ui/comp/smartfilterbar/ControlConfiguration.js","sap/ui/comp/smartfilterbar/FilterProvider.js","sap/ui/comp/smartfilterbar/GroupConfiguration.js","sap/ui/comp/smartfilterbar/SFBMultiInput.js","sap/ui/comp/smartfilterbar/SelectOption.js","sap/ui/comp/smartfilterbar/SmartFilterBar.js","sap/ui/comp/smartfilterbar/SortingUtil.js","sap/ui/comp/smartform/ColumnLayout.js","sap/ui/comp/smartform/Group.js","sap/ui/comp/smartform/GroupElement.js","sap/ui/comp/smartform/Layout.js","sap/ui/comp/smartform/SemanticGroupElement.js","sap/ui/comp/smartform/SmartForm.js","sap/ui/comp/smartform/flexibility/SmartForm.flexibility.js","sap/ui/comp/smartform/flexibility/changes/AddField.js","sap/ui/comp/smartform/flexibility/changes/AddFields.js","sap/ui/comp/smartform/flexibility/changes/AddGroup.js","sap/ui/comp/smartform/flexibility/changes/CombineFields.js","sap/ui/comp/smartform/flexibility/changes/MoveFields.js","sap/ui/comp/smartform/flexibility/changes/MoveGroups.js","sap/ui/comp/smartform/flexibility/changes/RemoveField.js","sap/ui/comp/smartform/flexibility/changes/RemoveGroup.js","sap/ui/comp/smartform/flexibility/changes/RenameField.js","sap/ui/comp/smartform/flexibility/changes/RenameGroup.js","sap/ui/comp/smartform/flexibility/changes/RenameTitle.js","sap/ui/comp/smartform/flexibility/changes/SplitField.js","sap/ui/comp/smartform/flexibility/changes/UnhideControl.js","sap/ui/comp/smartlist/SmartList.js","sap/ui/comp/smartmicrochart/SmartAreaMicroChart.js","sap/ui/comp/smartmicrochart/SmartBulletMicroChart.js","sap/ui/comp/smartmicrochart/SmartColumnMicroChart.js","sap/ui/comp/smartmicrochart/SmartComparisonMicroChart.js","sap/ui/comp/smartmicrochart/SmartDeltaMicroChart.js","sap/ui/comp/smartmicrochart/SmartHarveyBallMicroChart.js","sap/ui/comp/smartmicrochart/SmartLineMicroChart.js","sap/ui/comp/smartmicrochart/SmartMicroChart.js","sap/ui/comp/smartmicrochart/SmartMicroChartBase.js","sap/ui/comp/smartmicrochart/SmartMicroChartRenderer.js","sap/ui/comp/smartmicrochart/SmartRadialMicroChart.js","sap/ui/comp/smartmicrochart/SmartStackedBarMicroChart.js","sap/ui/comp/smartmultiedit/Container.js","sap/ui/comp/smartmultiedit/Field.js","sap/ui/comp/smartmultiedit/flexibility/changes/AddMultiEditFields.js","sap/ui/comp/smartmultiinput/SmartMultiInput.js","sap/ui/comp/smarttable/SmartTable.js","sap/ui/comp/smartvariants/PersonalizableInfo.js","sap/ui/comp/smartvariants/SmartVariantManagement.js","sap/ui/comp/smartvariants/SmartVariantManagementAdapter.js","sap/ui/comp/smartvariants/SmartVariantManagementBase.js","sap/ui/comp/smartvariants/SmartVariantManagementUi2.js","sap/ui/comp/smartvariants/flexibility/changes/VariantContent.js","sap/ui/comp/state/UIState.js","sap/ui/comp/transport/TransportDialog.js","sap/ui/comp/type/Interval.js","sap/ui/comp/util/DateTimeUtil.js","sap/ui/comp/util/FilterUtil.js","sap/ui/comp/util/FormatUtil.js","sap/ui/comp/util/FullScreenUtil.js","sap/ui/comp/util/IdentifierUtil.js","sap/ui/comp/util/MultiUnitUtil.js","sap/ui/comp/valuehelpdialog/ItemsCollection.js","sap/ui/comp/valuehelpdialog/ValueHelpDialog.js","sap/ui/comp/variants/EditableVariantItem.js","sap/ui/comp/variants/VariantItem.js","sap/ui/comp/variants/VariantManagement.js"]}});
},
/*!
 * SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
	"sap/ui/comp/smartchart/SmartChart.js":function(){if(sap.ui&&sap.ui.performance&&sap.ui.performance.Measurement&&sap.ui.performance.Measurement.getActive()){sap.ui.performance.Measurement.start("SmartChartInit","Measurement of SmartChart init time");}sap.ui.define(["jquery.sap.global","sap/ui/comp/library","sap/ui/comp/util/DateTimeUtil","sap/m/Button","sap/m/Text","sap/m/FlexItemData","sap/m/OverflowToolbar","sap/m/OverflowToolbarButton","sap/m/OverflowToolbarToggleButton","sap/m/ToolbarSeparator","sap/m/ToolbarSpacer","sap/m/VBox","sap/ui/comp/providers/ChartProvider","sap/ui/comp/smartfilterbar/FilterProvider","sap/ui/comp/smartvariants/SmartVariantManagement","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/model/json/JSONModel","sap/ui/model/Sorter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/comp/personalization/Util","sap/ui/Device","sap/ui/comp/odata/ODataModelUtil","sap/ui/comp/odata/MetadataAnalyser","sap/ui/comp/state/UIState","sap/m/SelectionDetails","sap/m/SelectionDetailsItem","sap/m/SelectionDetailsItemLine","sap/m/Title","sap/ui/comp/util/FormatUtil","sap/ui/comp/navpopover/NavigationPopoverHandler","sap/ui/core/InvisibleText","sap/m/OverflowToolbarLayoutData","sap/m/library","sap/ui/comp/personalization/Controller","sap/ui/comp/personalization/ChartWrapper","sap/ui/comp/navpopover/SemanticObjectController","sap/ui/performance/Measurement","sap/base/Log","sap/base/util/merge","sap/chart/TimeUnitType","sap/ui/core/CustomData","sap/ui/comp/util/FullScreenUtil"],function(q,c,D,B,T,F,O,d,f,g,h,V,C,j,S,P,J,k,m,o,p,r,s,M,U,t,u,v,w,x,N,I,y,z,A,E,G,H,L,K,Q,R,W){"use strict";var X=z.ToolbarDesign;var Y=z.ListMode;var Z=z.ListType;var $=z.PlacementType;var _=c.personalization.ChangeType;var a1=c.personalization.ResetType;var b1;var c1;var d1;var e1;var f1;var g1;var h1;var i1;var j1;var k1;var l1;var m1;var n1;var o1;var p1;var q1;
var r1=V.extend("sap.ui.comp.smartchart.SmartChart",{
metadata:{library:"sap.ui.comp",designtime:"sap/ui/comp/designtime/smartchart/SmartChart.designtime",properties:{entitySet:{type:"string",group:"Misc",defaultValue:null},smartFilterId:{type:"string",group:"Misc",defaultValue:null},ignoredFields:{type:"string",group:"Misc",defaultValue:null},requestAtLeastFields:{type:"string",group:"Misc",defaultValue:null},ignoreFromPersonalisation:{type:"string",group:"Misc",defaultValue:null},chartType:{type:"string",group:"Misc",defaultValue:null},ignoredChartTypes:{type:"string",group:"Misc",defaultValue:null},useVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},useChartPersonalisation:{type:"boolean",group:"Misc",defaultValue:true},header:{type:"string",group:"Misc",defaultValue:null},persistencyKey:{type:"string",group:"Misc",defaultValue:null},currentVariantId:{type:"string",group:"Misc",defaultValue:null},enableAutoBinding:{type:"boolean",group:"Misc",defaultValue:false},chartBindingPath:{type:"string",group:"Misc",defaultValue:null},showDrillButtons:{type:"boolean",group:"Misc",defaultValue:true},showZoomButtons:{type:"boolean",group:"Misc",defaultValue:true},showSemanticNavigationButton:{type:"boolean",group:"Misc",defaultValue:true},showVariantManagement:{type:"boolean",group:"Misc",defaultValue:true},showDownloadButton:{type:"boolean",group:"Misc",defaultValue:false},showDetailsButton:{type:"boolean",group:"Misc",defaultValue:false},showDrillBreadcrumbs:{type:"boolean",group:"Misc",defaultValue:false},showChartTooltip:{type:"boolean",group:"Misc",defaultValue:true},showLegendButton:{type:"boolean",group:"Misc",defaultValue:true},legendVisible:{type:"boolean",group:"Misc",defaultValue:true},selectionMode:{type:"sap.ui.comp.smartchart.SelectionMode",group:"Misc",defaultValue:sap.ui.comp.smartchart.SelectionMode.Multi},showFullScreenButton:{type:"boolean",group:"Misc",defaultValue:true},useTooltip:{type:"boolean",group:"Misc",defaultValue:true},useListForChartTypeSelection:{type:"boolean",group:"Misc",defaultValue:true},showChartTypeSelectionButton:{type:"boolean",group:"Misc",defaultValue:true},noData:{type:"string",group:"Misc",defaultValue:null},showToolbar:{type:"boolean",group:"Misc",defaultValue:true},toolbarStyle:{type:"sap.m.ToolbarStyle",group:"Appearance"},showDimensionsTitle:{type:"boolean",group:"Misc",defaultValue:true},showMeasuresTitle:{type:"boolean",group:"Misc",defaultValue:true},activateTimeSeries:{type:"boolean",group:"Misc",defaultValue:false}},associations:{smartVariant:{type:"sap.ui.core.Control",multiple:false}},aggregations:{toolbar:{type:"sap.m.Toolbar",multiple:false},semanticObjectController:{type:"sap.ui.comp.navpopover.SemanticObjectController",multiple:false},selectionDetailsItemActions:{type:"sap.ui.core.Item",multiple:true},selectionDetailsActions:{type:"sap.ui.core.Item",multiple:true},selectionDetailsActionGroups:{type:"sap.ui.core.Item",multiple:true}},events:{initialise:{},initialized:{},beforeRebindChart:{},dataReceived:{},afterVariantInitialise:{},afterVariantSave:{parameters:{currentVariantId:{type:"string"}}},afterVariantApply:{parameters:{currentVariantId:{type:"string"}}},showOverlay:{},fullScreenToggled:{parameters:{fullScreen:{type:"boolean"}}},selectionDetailsActionPress:{parameters:{action:{type:"sap.ui.core.Item"},itemContexts:{type:"sap.ui.model.Context"},level:{type:"sap.m.SelectionDetailsActionLevel"}}},chartDataChanged:{parameters:{changeTypes:{type:"object"}}}}},
renderer:{apiVersion:2}
});
r1.prototype.init=function(){V.prototype.init.call(this);this.addStyleClass("sapUiCompSmartChart");this.setFitContainer(true);this._bUpdateToolbar=true;this._oChartTypeModel=null;var a=new J({items:[]});this.setModel(a,"$smartChartTypes");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");if(!this.getLayoutData()){this.setLayoutData(new F({growFactor:1,baseSize:"auto"}));}};
r1.prototype._getVariantManagementControl=function(a){var b=null;if(a){if(typeof a==='string'){b=sap.ui.getCore().byId(a);}else{b=a;}if(b){if(!(b instanceof S)){L.error("Control with the id="+typeof a.getId=="function"?a.getId():a+" not of expected type");return null;}}}return b;};
r1.prototype._createVariantManagementControl=function(){if(this._oVariantManagement||(!this.getUseVariantManagement()&&!this.getUseChartPersonalisation())||!this.getPersistencyKey()){return;}var a=new P({type:"chart",keyName:"persistencyKey",dataSource:this.getEntitySet()});a.setControl(this);var b=this.getSmartVariant();if(b){this._oVariantManagement=this._getVariantManagementControl(b);}else if(this._oSmartFilter&&this._oSmartFilter.data("pageVariantPersistencyKey")){b=this._oSmartFilter.getSmartVariant();if(b){this._oVariantManagement=this._getVariantManagementControl(b);}}else{this._oVariantManagement=new S(this.getId()+"-variant",{showShare:true});}if(this._oVariantManagement){if(!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(this.getShowVariantManagement());}this._oVariantManagement.addPersonalizableControl(a);this._oVariantManagement.attachSave(this._variantSaved,this);this._oVariantManagement.attachAfterSave(this._variantAfterSave,this);this._oVariantManagement.initialise(this._variantInitialised,this);}};
r1.prototype._variantInitialised=function(){if(!this._oCurrentVariant){this._oCurrentVariant="STANDARD";}this.fireAfterVariantInitialise();if(this._oVariantManagement&&!this._oVariantManagement.getEnabled()){this._checkAndTriggerBinding();}};
r1.prototype._variantSaved=function(){if(this._oPersController){this._oPersController.setPersonalizationData(this._oCurrentVariant,true);}};
r1.prototype._variantAfterSave=function(){this.fireAfterVariantSave({currentVariantId:this.getCurrentVariantId()});};
r1.prototype.setUseChartPersonalisation=function(b){this.setProperty("useChartPersonalisation",b,true);this._bUpdateToolbar=true;return this;};
r1.prototype.setUseTooltip=function(b){this.setProperty("useTooltip",b,true);this._createTooltipOrPopover();return this;};
r1.prototype._createTooltipOrPopover=function(){if(this.getUseTooltip()&&this.getShowChartTooltip()){this._toggleChartTooltipVisibility(true);}else{this._createPopover();}};
r1.prototype._createPopover=function(){if(this._oChart){if(!h1&&!this._bVizPopoverRequested){h1=sap.ui.require("sap/viz/ui5/controls/Popover");if(!h1){sap.ui.require(["sap/viz/ui5/controls/Popover"],s1.bind(this));this._bVizPopoverRequested=true;}}if(!this._oPopover&&h1&&!this._oChart._getVizFrame()._connectPopover){this._oPopover=new h1({});}if(this._oPopover){this._oPopover.connect(this._oChart.getVizUid());}}};
function s1(a){h1=a;this._bVizPopoverRequested=false;if(!this._bIsBeingDestroyed){this._createPopover();}}
r1.prototype._destroyPopover=function(){if(this._oPopover){this._oPopover.destroy();this._oPopover=null;}};
r1.prototype.setUseVariantManagement=function(b){this.setProperty("useVariantManagement",b,true);if(this._oPersController){this._oPersController.setResetToInitialTableState(!b);}this._bUpdateToolbar=true;return this;};
r1.prototype.setToolbar=function(a){if(this._oToolbar){this.removeItem(this._oToolbar);}this._oToolbar=a;this._bUpdateToolbar=true;this._oToolbar.setLayoutData(new F({shrinkFactor:0}));this.insertItem(this._oToolbar,0);this._oToolbar.setVisible(this.getShowToolbar());this._oToolbar.setStyle(this.getToolbarStyle());return this;};
r1.prototype.getToolbar=function(){return this._oToolbar;};
r1.prototype.setHeader=function(a){this.setProperty("header",a,true);this._refreshHeaderText();return this;};
r1.prototype._refreshHeaderText=function(){if(!this._headerText){this._bUpdateToolbar=true;return;}var a=this.getHeader();this._headerText.setText(a);if(this._oSeparator){if(a){this._oSeparator.setVisible(true);}else{this._oSeparator.setVisible(false);}}};
r1.prototype._createToolbar=function(){if(!this._oToolbar){this._oToolbar=new O({design:X.Transparent});this._oToolbar.addStyleClass("sapUiCompSmartChartToolbar");this._oToolbar.addStyleClass("sapMTBHeader-CTX");this._oToolbar.setLayoutData(new F({shrinkFactor:0}));this.insertItem(this._oToolbar,0);this._oToolbar.setVisible(this.getShowToolbar());this._oToolbar.setStyle(this.getToolbarStyle());}};
r1.prototype._createToolbarContent=function(){this._addVariantManagementToToolbar();this._addSeparatorToToolbar();this._addHeaderToToolbar();this._addSpacerToToolbar();this._addSemanticNavigationButton();this._addDetailsButton();this._addDrillUpDownButtons();this._addLegendButton();this._addZoomInOutButtons();this._addDownloadButton();this._addPersonalisationToToolbar();this._addFullScreenButton();this._addChartTypeToToolbar();if(this._oToolbar&&(this._oToolbar.getContent().length===0||(this._oToolbar.getContent().length===1&&this._oToolbar.getContent()[0]instanceof h))){this.removeItem(this._oToolbar);this._oToolbar.destroy();this._oToolbar=null;}};
r1.prototype.setShowVariantManagement=function(b){this.setProperty("showVariantManagement",b);if(this._oVariantManagement&&this._oVariantManagement.isPageVariant()){this._oVariantManagement.setVisible(b);}return this;};
r1.prototype.setShowDetailsButton=function(b){this.setProperty("showDetailsButton",b);if(this._oSelectionDetails){this._oSelectionDetails.setVisible(b);if(this._oDrillDownTextButton){this._oDrillDownTextButton.setVisible(b);}this._setBehaviorTypeForDataSelection();}if(this._oDrillDownButton){this._oDrillDownButton.setVisible(!b);}return this;};
r1.prototype.setShowChartTypeSelectionButton=function(b){this.setProperty("showChartTypeSelectionButton",b);if(this._oChartTypeButton){this._oChartTypeButton.setVisible(b);}return this;};
r1.prototype.setShowDownloadButton=function(b){this.setProperty("showDownloadButton",b);if(this._oDownloadButton){this._oDownloadButton.setVisible(b);}return this;};
r1.prototype.setShowDrillBreadcrumbs=function(b){this.setProperty("showDrillBreadcrumbs",b);if(this._oDrillBreadcrumbs){this._oDrillBreadcrumbs.setVisible(b);}if(this._oDrillUpButton){this._oDrillUpButton.setVisible(!b);}return this;};
r1.prototype.setShowChartTooltip=function(b){this.setProperty("showChartTooltip",b);this._toggleChartTooltipVisibility(b);return this;};
r1.prototype._setBehaviorTypeForDataSelection=function(){if(this.getShowDetailsButton()){this._oChart.setVizProperties({"interaction":{"behaviorType":"noHoverBehavior"}});}else if(this._oChart.getVizProperties().interaction.behaviorType){var i=this._oChart.getVizProperties().interaction;delete i.behaviorType;this._oChart.setVizProperties({"interaction":i});}};
r1.prototype._addDrillBreadcrumbs=function(){if(!this._oDrillBreadcrumbs&&this.getShowDrillBreadcrumbs()){if((!j1||!k1)&&!this._bBreadcrumbsRequested){j1=sap.ui.require("sap/m/Breadcrumbs");k1=sap.ui.require("sap/m/Link");if(!j1){sap.ui.require(["sap/m/Breadcrumbs","sap/m/Link"],t1.bind(this));this._bBreadcrumbsRequested=true;}}if(this._oChart&&j1&&k1){this._oDrillBreadcrumbs=new j1(this.getId()+"-drillBreadcrumbs",{visible:this.getShowDrillBreadcrumbs()}).addStyleClass("sapUiCompSmartChartBreadcrumbs");this.insertItem(this._oDrillBreadcrumbs,1);this._updateDrillBreadcrumbs();this._oChart.attachDrilledUp(function(e){this._updateDrillBreadcrumbs();}.bind(this));this._oChart.attachDrilledDown(function(e){this._updateDrillBreadcrumbs();}.bind(this));}}};
function t1(b,l){j1=b;k1=l;this._bBreadcrumbsRequested=false;if(!this._bIsBeingDestroyed){this._addDrillBreadcrumbs();}}
r1.prototype.getDrillStackFilters=function(){var a=this._oChart.getDrillStack();var b=[];var e=function(i){if(!i){return;}if(i&&i.sPath&&i.sOperator){b.push(i);}if(i.aFilters){i.aFilters.forEach(function(l){e(l);});}};a.forEach(function(i){e(i.filter);});return b;};
r1.prototype._getDrillStackDimensions=function(){var a=this._oChart.getDrillStack();var b=[];a.forEach(function(e){e.dimension.forEach(function(i){if(i!=null&&i!=""&&b.indexOf(i)==-1){b.push(i);}});});return b;};
r1.prototype._updateDrillBreadcrumbs=function(){if(!this._oDrillBreadcrumbs){return;}var a=this._oChart.getDrillStack();var n=[];if(a){a.reverse();a.forEach(function(l,A1,B1){if(l.dimension.length>0&&typeof this._oChart.getDimensionByName(l.dimension[l.dimension.length-1])!='undefined'){if(this.getShowDrillBreadcrumbs()){this._oDrillBreadcrumbs.setVisible(true);}var C1=this._oChart.getDimensionByName(l.dimension[l.dimension.length-1]).getLabel();if(A1==0){this._oDrillBreadcrumbs.setCurrentLocationText(C1);}else{var D1=new k1({text:C1,press:function(E1){var F1=this._oDrillBreadcrumbs.indexOfLink(E1.getSource());this._oChart.drillUp(F1+1);this._oChart.fireDeselectData(E1);this._updateDrillBreadcrumbs();}.bind(this)});n.push(D1);}}else{if(A1==0){this._oDrillBreadcrumbs.setVisible(false);}}}.bind(this));}var b=this._oDrillBreadcrumbs.getLinks();n.reverse();var e=false;if(b.length!==n.length){e=true;}else{for(var i=0;i<n.length;i++){if(n[i].getText()!=b[i].getText()){e=true;break;}}}if(e){if(this._oDrillBreadcrumbs.getLinks()){this._oDrillBreadcrumbs.removeAllLinks();}for(var i=0;i<n.length;i++){this._oDrillBreadcrumbs.addLink(n[i]);}}};
r1.prototype._addDetailsButton=function(){this._oSelectionDetails=new t(this.getId()+"-selectionDetails",{visible:this.getShowDetailsButton(),customData:[new R({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{"designtime":"sap/ui/comp/designtime/smartchart/SmartChartDetails.designtime"}}})]});this._oSelectionDetails.registerSelectionDetailsItemFactory([],function(a,b,e,l){var n=[];var A1=function(B1){var B1=a[i].value;if(B1){return B1 instanceof Object?B1:B1.toString();}else{return B1;}};for(var i=0;i<a.length;i++){n.push(new v({label:a[i].label,value:A1(a[i].value),unit:a[i].unit}));}return new u({enableNav:(function(){if(this._determineSemanticObjectsforDetailsPopover(b,e).length>0){return true;}else{return false;}}.bind(this)()),lines:n}).setBindingContext(e);}.bind(this));this._oSelectionDetails.attachNavigate(function(e){if(e.getParameter("direction")==="back"){e.getParameter("content").destroy();}else{this._navigateToSemanticObjectDetails(e);}}.bind(this));this._oSelectionDetails.attachActionPress(function(e){var i=[];e.getParameter("items").forEach(function(a){i.push(a.getBindingContext());});this.fireSelectionDetailsActionPress({id:e.getParameter("id"),action:e.getParameter("action"),itemContexts:i,level:e.getParameter("level")});}.bind(this));this._oSelectionDetails.attachBeforeOpen(function(e){var a=this._oSelectionDetails.getItems();a.forEach(function(l){var b=this._getDetailsActionsClones();b.selectionDetailsItemActions.forEach(function(n){l.addAction(n);});}.bind(this));var b=this._getDetailsActionsClones().selectionDetailsActions;this._oSelectionDetails.removeAllActions();b.forEach(function(l){this._oSelectionDetails.addAction(l);}.bind(this));var i=this._getDetailsActionsClones().selectionDetailsActionGroups;this._oSelectionDetails.removeAllActionGroups();i.forEach(function(l){this._oSelectionDetails.addActionGroup(l);}.bind(this));}.bind(this));this._oSelectionDetails.attachBeforeClose(function(e){if(this._oNavigationContainer){this._oNavigationContainer.destroy();}}.bind(this));this._oToolbar.addContent(this._oSelectionDetails);this._addDrillDownTextButton();};
r1.prototype._getDetailsActionsClones=function(){var a={selectionDetailsItemActions:[],selectionDetailsActions:[],selectionDetailsActionGroups:[]};this.getSelectionDetailsItemActions().forEach(function(i){a.selectionDetailsItemActions.push(i.clone());});this.getSelectionDetailsActions().forEach(function(i){a.selectionDetailsActions.push(i.clone());});this.getSelectionDetailsActionGroups().forEach(function(i){a.selectionDetailsActionGroups.push(i.clone());});return a;};
r1.prototype._addDownloadButton=function(){if(!this._oDownloadButton){this._oDownloadButton=new d(this.getId()+"btnDownload",{type:"Transparent",text:this._oRb.getText("CHART_DOWNLOADBTN_TEXT"),tooltip:this._oRb.getText("CHART_DOWNLOADBTN_TOOLTIP"),icon:"sap-icon://download",visible:this.getShowDownloadButton(),enabled:false,press:function(e){if(window.navigator&&window.navigator.msSaveOrOpenBlob){var a=new window.Blob([this._getVizFrame().exportToSVGString()],{'type':"image/svg+xml"});window.navigator.msSaveOrOpenBlob(a);}else{this._downloadChartPNG();}}.bind(this)});this._oToolbar.addContent(this._oDownloadButton);}};
r1.prototype._downloadChartSVG=function(){var a=this.getHeader();var b=document.createElement('a');b.setAttribute('href','data:image/svg+xml,'+encodeURIComponent(this._getVizFrame().exportToSVGString()));b.setAttribute('download',a?a:'Chart'+'.svg');b.click();};
r1.prototype._downloadChartPNG=function(){var a=this.getHeader();var b=this._getVizFrame().exportToSVGString();var e=document.createElement('canvas');var i=e.getContext('2d');var l=new Image();l.width=e.width=document.getElementById(this._oChart.getId()).offsetWidth;l.height=e.height=document.getElementById(this._oChart.getId()).offsetHeight;l.onload=function(){i.drawImage(l,0,0);var n=document.createElement('a');n.setAttribute('href',e.toDataURL());n.setAttribute('download',a?a:'Chart'+'.png');n.click();};l.setAttribute('crossOrigin','anonymous');l.src='data:image/svg+xml,'+encodeURIComponent(b);};
r1.prototype._addFullScreenButton=function(){var a;if(this.getShowFullScreenButton()){a=new d(this.getId()+"-btnFullScreen",{type:"Transparent",press:function(){this._toggleFullScreen(!this.bFullScreen);}.bind(this),enabled:false});this.oFullScreenButton=a;this._renderFullScreenButton();this._oToolbar.addContent(a);}};
r1.prototype._addZoomInOutButtons=function(){var a=this;this._oZoomInButton=new d(this.getId()+"-btnZoomIn",{type:"Transparent",text:this._oRb.getText("CHART_ZOOMINBTN_TEXT"),tooltip:this._oRb.getText("CHART_ZOOMINBTN_TOOLTIP"),icon:"sap-icon://zoom-in",press:function(){if(a._oChart){a._oChart.zoom({direction:"in"});this._oZoomInPressed=true;this._toggleZoomButtonEnablement();}}.bind(this),visible:this.getShowZoomButtons(),enabled:false});this._oZoomOutButton=new d(this.getId()+"-btnZoomOut",{type:"Transparent",text:this._oRb.getText("CHART_ZOOMOUTBTN_TEXT"),tooltip:this._oRb.getText("CHART_ZOOMOUTBTN_TOOLTIP"),icon:"sap-icon://zoom-out",press:function(){if(a._oChart){a._oChart.zoom({direction:"out"});this._oZoomOutPressed=true;this._toggleZoomButtonEnablement();}}.bind(this),visible:this.getShowZoomButtons(),enabled:false});this._oToolbar.addContent(this._oZoomInButton);this._oToolbar.addContent(this._oZoomOutButton);};
r1.prototype._toggleZoomButtonEnablement=function(){var i=this._oChart.getZoomInfo().currentZoomLevel;if(i===undefined){return;}else if(i===null){this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(false);}else if(i===0){if(this._oZoomInPressed){this._oZoomInButton.focus();this._oZoomInPressed=false;}this._oZoomOutButton.setEnabled(false);this._oZoomInButton.setEnabled(true);}else if(i===1){if(this._oZoomOutPressed){this._oZoomOutButton.focus();this._oZoomOutPressed=false;}this._oZoomInButton.setEnabled(false);this._oZoomOutButton.setEnabled(true);}else{if(this._oZoomOutButton.getEnabled()==false){this._oZoomOutButton.setEnabled(true);}if(this._oZoomInButton.getEnabled()==false){this._oZoomInButton.setEnabled(true);}}};
r1.prototype.setShowZoomButtons=function(b){this.setProperty("showZoomButtons",b);if(this._oZoomInButton){this._oZoomInButton.setVisible(b);}if(this._oZoomOutButton){this._oZoomOutButton.setVisible(b);}return this;};
r1.prototype.setShowFullScreenButton=function(b){this.setProperty("showFullScreenButton",b);if(this.oFullScreenButton){this.oFullScreenButton.setVisible(b);}return this;};
r1.prototype.setLegendVisible=function(b){this.setProperty("legendVisible",b);this._setLegendVisible(b);return this;};
r1.prototype._setLegendVisible=function(b){var a=this._getVizFrame();if(a){a.setLegendVisible(b);}};
r1.prototype._getVizFrame=function(){var a=null;if(this._oChart){a=this._oChart.getAggregation("_vizFrame");}return a;};
r1.prototype._addLegendButton=function(){var a=this;this._oLegendButton=new f(this.getId()+"-btnLegend",{type:"Transparent",text:this._oRb.getText("CHART_LEGENDBTN_TEXT"),tooltip:this._oRb.getText("CHART_LEGENDBTN_TOOLTIP"),icon:"sap-icon://legend",press:function(){a.setLegendVisible(!a.getLegendVisible());this.setPressed(a.getLegendVisible());},pressed:this.getLegendVisible(),visible:this.getShowLegendButton(),enabled:false});this._oToolbar.addContent(this._oLegendButton);};
r1.prototype.setShowLegendButton=function(b){this.setProperty("showLegendButton",b);if(this._oLegendButton){this._oLegendButton.setVisible(b);}return this;};
r1.prototype.setShowSemanticNavigationButton=function(b){this.setProperty("showSemanticNavigationButton",b);if(this._oSemanticalNavButton){this._oSemanticalNavButton.setVisible(b);}else{if(b){this._addSemanticNavigationButton();}}return this;};
r1.prototype._addSemanticNavigationButton=function(){var a=this;if(!this._oSemanticalNavButton&&this.getShowSemanticNavigationButton()&&this._oToolbar){this._oSemanticalNavButton=new B(this.getId()+"-btnNavigation",{type:"Transparent",text:this._oRb.getText("CHART_SEMNAVBTN"),tooltip:this._oRb.getText("CHART_SEMNAVBTN_TOOLTIP"),visible:this.getShowSemanticNavigationButton(),enabled:false});this._oNavHandler=new N({control:this._oSemanticalNavButton,customData:[new R({key:"sap-ui-custom-settings",value:{"sap.ui.dt":{"designtime":"sap/ui/comp/designtime/smartchart/SmartChartDetails.designtime"}}})],navigationTargetsObtained:function(e){var l=e.getParameters().mainNavigation;if(l){var n=e.getSource().getBindingContext().getObject();var A1=this._getField(e.getSource().getFieldName());var B1=x.getTextsFromDisplayBehaviour(A1.displayBehaviour,n[A1.name],n[A1.description]);l.setDescription(B1.secondText);e.getParameters().show(B1.firstText,l,undefined,undefined);}e.getParameters().show();}.bind(this)});var b=this.getSemanticObjectController();if(b){this._oNavHandler.setSemanticObjectController(b);}this._oSemanticalNavButton.attachPress(function(e){if(this._aSemanticObjects&&(this._aSemanticObjects.length>0)){if(this._aSemanticObjects.length===1){var l=M.getSemanticObjectsFromProperty(this._aSemanticObjects[0]);if(l){this._oNavHandler.setFieldName(this._aSemanticObjects[0].name);this._oNavHandler.setSemanticObject(l.defaultSemanticObject);this._oNavHandler.setAdditionalSemanticObjects(l.additionalSemanticObjects);this._oNavHandler.openPopover();}}else{a._semanticObjectList(this._aSemanticObjects,this._oNavHandler);}}}.bind(this));if(this._oChart){this._attachDataPointHandling();}else{this.attachInitialized(function(){this._attachDataPointHandling();}.bind(this));}var i=this._indexOfSpacerOnToolbar();this._oToolbar.insertContent(this._oSemanticalNavButton,i+1);}};
r1.prototype._attachDataPointHandling=function(){if(this._oChart){this._oChart.attachDeselectData(function(){this._aSemanticObjects=this._setSelectionDataPointHandling(this._oNavHandler);}.bind(this));this._oChart.attachSelectData(function(){this._aSemanticObjects=this._setSelectionDataPointHandling(this._oNavHandler);}.bind(this));}};
r1.prototype.setSelectionMode=function(a){this.setProperty("selectionMode",a);if(this._oChart){this._oChart.setSelectionMode(a);}return this;};
r1.prototype._setSelectionDataPointHandling=function(n){var a=this._setSelectionDataPoint(n);if(a&&a.length>0){this._oSemanticalNavButton.setEnabled(true);}else{this._oSemanticalNavButton.setEnabled(false);}return a;};
r1.prototype._setSemanticObjectsContext=function(e){var a,b,i=null;a=e.getParameter("item").getBindingContext();if(a){b=a.getObject();if(b){i=this._determineSemanticObjectsforDetailsPopover(b,a);}}return i;};
r1.prototype._setSelectionDataPoint=function(n){var a,b,e=null,l;var A1=this._oChart.getSelectedDataPoints();if(!A1||!A1.dataPoints||(A1.dataPoints.length===0)){return e;}if(A1.dataPoints.length===1){a=A1.dataPoints[0].context;if(a){b=a.getObject();if(b){e=this._determineSemanticObjects(b,a);if(e&&(e.length>0)){n.setBindingContext(a);}}}return e;}l=[];for(var i=0;i<A1.dataPoints.length;i++){a=A1.dataPoints[i].context;if(a){b=a.getObject();if(b){l.push(b);}}}if(l&&l.length>0){e=this._condensBasedOnSameValue(l);if(e&&e.length>0){n.setBindingContext(A1.dataPoints[A1.dataPoints.length-1].context);}}return e;};
r1.prototype._condensBasedOnSameValue=function(a){var b=null,e,l,n;b=this._determineSemanticObjects(a[0]);if(b&&b.length>0){for(var i=0;i<b.length;i++){l=b[i];n=l.name;if(this._bAllValuesAreEqual(a,n)){if(!e){e=[];}e.push(l);}}b=e;}return b;};
r1.prototype._bAllValuesAreEqual=function(a,b){var e,l;for(var i=0;i<a.length;i++){e=a[i];if(i===0){l=e[b];continue;}if(l!=e[b]){return false;}}return true;};
r1.prototype._semanticObjectList=function(a,n){var b,l,e,A1;if(this._oChart){if((!l1||!m1||!n1)&&!this._bSemanticObjectListRequested){l1=sap.ui.require("sap/m/ResponsivePopover");m1=sap.ui.require("sap/m/List");n1=sap.ui.require("sap/m/StandardListItem");if(!l1||!m1||!n1){sap.ui.require(["sap/m/ResponsivePopover","sap/m/List","sap/m/StandardListItem"],u1.bind(this));this._bSemanticObjectListRequested=true;this._oSemanticObjectListAttr={object:a,nav:n};}}if(!l1||!m1||!n1){return;}l=new m1({mode:Y.SingleSelectMaster,selectionChange:function(B1){if(B1&&B1.mParameters&&B1.mParameters.listItem){var C1=B1.mParameters.listItem.data("semObj");if(C1){n.setFieldName(B1.mParameters.listItem.data("fieldName"));n.setSemanticObject(C1.defaultSemanticObject);n.setAdditionalSemanticObjects(C1.additionalSemanticObjects);n.openPopover();}}b.close();}});for(var i=0;i<a.length;i++){A1=a[i];e=new n1({title:A1.fieldLabel,type:Z.Active});e.data("semObj",M.getSemanticObjectsFromProperty(A1));e.data("fieldName",A1.name);l.addItem(e);}b=new l1({title:this._oRb.getText("CHART_SEMNAVBTN"),showHeader:false,contentWidth:"12rem",placement:$.Left});b.addContent(l);b.openBy(this._oSemanticalNavButton);}};
function u1(a,l,b){l1=a;m1=l;n1=b;this._bSemanticObjectListRequested=false;if(!this._bIsBeingDestroyed){this._semanticObjectList(this._oSemanticObjectListAttr.object,this._oSemanticObjectListAttr.nav);}delete this._oSemanticObjectListAttr;}
r1.prototype._semanticObjectListForDetails=function(a,b){var l,e,n;if(!this._oChart){return undefined;}l=new m1({mode:Y.SingleSelectMaster,rememberSelections:false,itemPress:function(i){if(i&&i.mParameters&&i.mParameters.listItem){var A1=i.mParameters.listItem.data("semObj");if(A1){var B1=new N({fieldName:i.mParameters.listItem.data("fieldName"),control:i.mParameters.listItem,semanticObject:A1.defaultSemanticObject,additionalSemanticObjects:A1.additionalSemanticObjects,navigationTargetsObtained:function(i){var C1=i.getParameters().mainNavigation;if(C1){var D1=b.getObject();var E1=this._getField(i.getSource().getFieldName());var F1=x.getTextsFromDisplayBehaviour(E1.displayBehaviour,D1[E1.name],D1[E1.description]);C1.setDescription(F1.secondText);i.getParameters().show(F1.firstText,C1,undefined,undefined);}i.getParameters().show();}.bind(this)});B1._getNavigationContainer().then(function(C1){var D1=C1.getDirectLink();if(D1){B1._fireInnerNavigate({text:D1.getText(),href:D1.getHref()});window.location.href=D1.getHref();C1.destroy();return;}C1.attachBeforePopoverOpen(function(){this._oSelectionDetails.setPopoverModal(true);}.bind(this));C1.attachAfterPopoverClose(function(){this._oSelectionDetails.setPopoverModal(false);}.bind(this));this._oSelectionDetails.navTo("",C1);}.bind(this),function(C1){L.error("NavigationContainer could not be determined: "+C1);});}}}.bind(this)});G.getDistinctSemanticObjects().then(function(A1){for(var i=0;i<a.length;i++){n=a[i];if(n["com.sap.vocabularies.Common.v1.SemanticObject"]&&n["com.sap.vocabularies.Common.v1.SemanticObject"].String&&G.hasDistinctSemanticObject([n["com.sap.vocabularies.Common.v1.SemanticObject"].String],A1)){e=new n1({title:n.fieldLabel,type:Z.Navigation});e.setBindingContext(b);e.data("semObj",M.getSemanticObjectsFromProperty(n));e.data("fieldName",n.name);l.addItem(e);}}});return l;};
r1.prototype._determineSemanticObjects=function(e,i){var n,l,A1=[];if(e){for(n in e){if(n){l=this._getField(n);if(l&&l.isDimension&&l.isSemanticObject){A1.push(l);}}}}if(A1){A1.sort(function(a,b){return a.fieldLabel.localeCompare(b.fieldLabel);});}return A1;};
r1.prototype._determineSemanticObjectsforDetailsPopover=function(e,i){var n,l,A1=[];if(e){for(n in e){if(n){l=this._getField(n);if(l&&l.isDimension&&l.isSemanticObject){A1.push(l);}}}}if(A1){A1.sort(function(a,b){return a.fieldLabel.localeCompare(b.fieldLabel);});}return A1;};
r1.prototype._addDrillUpDownButtons=function(){if(this.getShowDrillButtons()){var a=this;this._oDrillUpButton=new d(this.getId()+"-btnDrillUp",{type:"Transparent",tooltip:this._oRb.getText("CHART_DRILLUPBTN_TOOLTIP"),text:this._oRb.getText("CHART_DRILLUPBTN_TEXT"),icon:"sap-icon://drill-up",press:function(){if(a._oChart){a._oChart.drillUp();}},visible:!this.getShowDrillBreadcrumbs(),enabled:false});this._oDrillDownButton=new d(this.getId()+"-btnDrillDown",{type:"Transparent",text:this._oRb.getText("CHART_DRILLDOWNBTN_TEXT"),icon:"sap-icon://drill-down",press:function(e){a._drillDown(e);},visible:!this.getShowDetailsButton(),enabled:false});this._oToolbar.addContent(this._oDrillUpButton);this._oToolbar.addContent(this._oDrillDownButton);}};
r1.prototype._addDrillDownTextButton=function(){this._oDrillDownTextButton=new B(this.getId()+"-btnDrillDownText",{type:"Transparent",text:this._oRb.getText("CHART_DRILLDOWNBTN_TEXT"),tooltip:this._oRb.getText("CHART_DRILLDOWNBTN_TOOLTIP"),enabled:false,visible:this.getShowDetailsButton(),layoutData:new y({closeOverflowOnInteraction:false}),press:function(e){this._drillDown(e);}.bind(this)});this._oToolbar.addContent(this._oDrillDownTextButton);};
r1.prototype.setShowDrillButtons=function(b){this.setProperty("showDrillButtons",b);if(this._oDrillUpButton){this._oDrillUpButton.setVisible(b);}if(this._oDrillDownButton){this._oDrillDownButton.setVisible(b);}return this;};
r1.prototype._triggerSearchInPopover=function(e,l){var a,i,b,n,A1,B1;if(!e||!l){return;}a=e.getParameters();if(!a){return;}A1=a.newValue?a.newValue.toLowerCase():"";if(this._oChart){B1=l.getItems();for(i=0;i<B1.length;i++){n=B1[i].getTooltip();b=B1[i].getTitle();if((b&&(b.toLowerCase().indexOf(A1)>-1))||(n&&(n.toLowerCase().indexOf(A1)>-1))){B1[i].setVisible(true);}else{B1[i].setVisible(false);}}}};
r1.prototype._drillDown=function(e,a){var b=this,l,n,A1,B1,C1,D1,E1,F1,i,G1,H1;if(this._oChart){if((!l1||!m1||!o1||!p1||!n1)&&!this._bDrillDownRequested){l1=sap.ui.require("sap/m/ResponsivePopover");m1=sap.ui.require("sap/m/List");o1=sap.ui.require("sap/m/Bar");p1=sap.ui.require("sap/m/SearchField");n1=sap.ui.require("sap/m/StandardListItem");if(!l1||!m1||!o1||!p1||!n1){sap.ui.require(["sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/SearchField","sap/m/StandardListItem"],v1.bind(this));this._bDrillDownRequested=true;this._oDrillDownSource=e.getSource();}}if(!l1||!m1||!o1||!p1||!n1){return;}D1=new m1({mode:Y.SingleSelectMaster,selectionChange:function(e){if(e&&e.mParameters&&e.mParameters.listItem){if(e.mParameters.listItem.getType()===Z.Inactive){return;}var B1=e.mParameters.listItem.data("dim");if(B1){b._oChart.drillDown(B1);}}l.close();}});E1=new o1();F1=new p1({placeholder:this._oRb.getText("CHART_DRILLDOWN_SEARCH")});F1.attachLiveChange(function(e){b._triggerSearchInPopover(e,D1);});E1.addContentMiddle(F1);l=new l1({contentWidth:"25rem",contentHeight:"20rem",placement:$.Bottom,subHeader:E1});l.addStyleClass("sapUiCompSmartChartDrillDownPopover");if(r.system.desktop){var I1=new I({text:this._oRb.getText("CHART_DRILLDOWN_TITLE")});l.setShowHeader(false);l.addContent(I1);l.addAriaLabelledBy(I1);}else{l.setTitle(this._oRb.getText("CHART_DRILLDOWN_TITLE"));}l.addContent(D1);n=this._getDrillStackDimensions();A1=this._getSortedDimensions();if(A1.length<7){E1.setVisible(false);}for(i=0;i<A1.length;i++){B1=A1[i];if(n.indexOf(B1.getName())>-1){continue;}H1=this._oChartProvider.getViewField(B1.getName());if(!H1.filterable&&this._oChart.getSelectedDataPoints().count>0){continue;}C1=new n1({title:B1.getLabel(),type:Z.Active});C1.data("dim",B1);G1=this._getFieldTooltip(B1.getName());if(G1){C1.setTooltip(G1);}D1.addItem(C1);}l.openBy(e?e.getSource():a);}};
function v1(a,l,b,e,i){l1=a;m1=l;o1=b;p1=e;n1=i;this._bDrillDownRequested=false;if(!this._bIsBeingDestroyed){this._drillDown(null,this._oDrillDownSource);}delete this._oDrillDownSource;}
r1.prototype._navigateToSemanticObjectDetails=function(e){var a=this._setSemanticObjectsContext(e);if(a&&(a.length>0)){if(a.length===1){var b=M.getSemanticObjectsFromProperty(a[0]);if(b){var i=e.getParameter("item");var n=new N({fieldName:a[0].name,control:i,semanticObject:b.defaultSemanticObject,additionalSemanticObjects:b.additionalSemanticObjects,navigationTargetsObtained:function(B1){var C1=B1.getParameters().mainNavigation;if(C1){var D1=i.getBindingContext().getObject();var E1=this._getField(B1.getSource().getFieldName());var F1=x.getTextsFromDisplayBehaviour(E1.displayBehaviour,D1[E1.name],D1[E1.description]);C1.setDescription(F1.secondText);B1.getParameters().show(F1.firstText,C1,undefined,undefined);}B1.getParameters().show();}.bind(this)});n._getNavigationContainer().then(function(B1){this._oNavigationContainer=B1;this._oNavigationContainer.attachBeforePopoverOpen(function(){this._oSelectionDetails.setPopoverModal(true);}.bind(this));this._oNavigationContainer.attachAfterPopoverClose(function(){this._oSelectionDetails.setPopoverModal(false);}.bind(this));this._oSelectionDetails.navTo("",this._oNavigationContainer);}.bind(this),function(B1){L.error("NavigationContainer could not be determined");});}}else{var l=e.getParameter("item").getBindingContext();if((!m1||!n1)&&!this._bObjectListRequested){m1=sap.ui.require("sap/m/List");n1=sap.ui.require("sap/m/StandardListItem");if(!m1||!n1){sap.ui.require(["sap/m/List","sap/m/StandardListItem"],w1.bind(this));this._bObjectListRequested=true;this._oObjectListAttr={context:l,objects:a};}}if(m1&&n1){var A1=this._semanticObjectListForDetails(a,l);this._oSelectionDetails.navTo(this._oRb.getText("CHART_SEMNAVBTN"),A1);}}}};
function w1(l,a){m1=l;n1=a;this._bObjectListRequested=false;if(!this._bIsBeingDestroyed){var b=this._semanticObjectListForDetails(this._oObjectListAttr.objects,this._oObjectListAttr.context);this._oSelectionDetails.navTo(this._oRb.getText("CHART_SEMNAVBTN"),b);}delete this._oObjectListAttr;}
r1.prototype._addHeaderToToolbar=function(){if(this._oToolbar){if(!this._headerText){this._headerText=new w({});this._headerText.addStyleClass("sapMH4Style");this._headerText.addStyleClass("sapUiCompSmartChartHeader");}this._refreshHeaderText();this._oToolbar.insertContent(this._headerText,0);}};
r1.prototype._addSeparatorToToolbar=function(){if(this.getUseVariantManagement()&&this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oSeparator=new g();this._oToolbar.insertContent(this._oSeparator,0);if(!this._oToolbar.getHeight()){this._oToolbar.setHeight("auto");}}else if(this._oSeparator){this._oToolbar.removeContent(this._oSeparator);}};
r1.prototype._addVariantManagementToToolbar=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){if(this.getUseVariantManagement()){this._oToolbar.insertContent(this._oVariantManagement,0);}else if(this._oVariantManagement){this._oToolbar.removeContent(this._oVariantManagement);}}};
r1.prototype._addSpacerToToolbar=function(){if(this._indexOfSpacerOnToolbar()===-1){this._oToolbar.addContent(new h());}};
r1.prototype._indexOfSpacerOnToolbar=function(){var a=this._oToolbar.getContent(),i,l;if(a){l=a.length;i=0;for(i;i<l;i++){if(a[i]instanceof h){return i;}}}return-1;};
r1.prototype._getP13NSettings=function(){return{dimeasure:{visible:true,payload:{availableChartTypes:this.getAvailableChartTypes()}},sort:{visible:true},filter:{visible:true},contentWidth:"48rem"};};
r1.prototype._addPersonalisationToToolbar=function(){if(this.getUseChartPersonalisation()){if(!this._oChartPersonalisationButton){this._oChartPersonalisationButton=new d(this.getId()+"-btnPersonalisation",{type:"Transparent",icon:"sap-icon://action-settings",text:this._oRb.getText("CHART_PERSOBTN_TEXT"),tooltip:this._oRb.getText("CHART_PERSOBTN_TOOLTIP"),press:function(e){if(this._oPersController){this._oPersController.openDialog(this._getP13NSettings());}}.bind(this),enabled:false});}this._oToolbar.addContent(this._oChartPersonalisationButton);}else if(this._oChartPersonalisationButton){this._oToolbar.removeContent(this._oChartPersonalisationButton);}};
r1.prototype.getVariantManagement=function(){return this._oVariantManagement;};
r1.prototype.openDialogForKeyUser=function(a,b){this._fGetDataForKeyUser=b;var e=this._getP13NSettings();e.styleClass=a;e.showReset=false;this._oPersController.openDialog(e);};
r1.prototype._cleanUpKeyUser=function(){this._fGetDataForKeyUser=null;};
r1.prototype._createKeyUserChange=function(){return[{selectorControl:this._oVariantManagement._getPersoController(),changeSpecificData:{changeType:"variantContent",content:{key:this._oVariantManagement.getSelectionKey(),persistencyKey:this.getPersistencyKey(),content:this.fetchVariant()}}}];};
r1.prototype._addChartTypeToToolbar=function(){this._oChartTypeButton=this._createChartTypeButton();this._oToolbar.addContent(this._oChartTypeButton);};
r1.prototype._createChartTypeButton=function(){var a=new d(this.getId()+"-btnChartType",{visible:this.getShowChartTypeSelectionButton(),enabled:false,type:"Transparent",text:this._oRb.getText("CHART_TYPEBTN_TEXT"),layoutData:new y({closeOverflowOnInteraction:false}),press:function(e){this._displayChartTypes(e);}.bind(this)});return a;};
r1.prototype._displayChartTypes=function(e,a){var b=this,i,l,n,A1,B1=false;if(this._bAvailableChartListIsOpen){return;}if(this._oChart&&(e||a)){if((!l1||!m1||!o1||!p1||!n1)&&!this._bChartTypesRequested){l1=sap.ui.require("sap/m/ResponsivePopover");m1=sap.ui.require("sap/m/List");o1=sap.ui.require("sap/m/Bar");p1=sap.ui.require("sap/m/SearchField");n1=sap.ui.require("sap/m/StandardListItem");if(!l1||!m1||!o1||!p1||!n1){sap.ui.require(["sap/m/ResponsivePopover","sap/m/List","sap/m/Bar","sap/m/SearchField","sap/m/StandardListItem"],x1.bind(this));this._bChartTypesRequested=true;this._oChartTypesSource=e.getSource();}}if(!l1||!m1||!o1||!p1||!n1){return;}var C1=e?e.getSource():a;var D1=new n1({title:"{$smartChartTypes>text}",icon:"{$smartChartTypes>icon}",selected:"{$smartChartTypes>selected}"});l=new m1({mode:Y.SingleSelectMaster,items:{path:"$smartChartTypes>/items",template:D1},selectionChange:function(e){if(e&&e.mParameters&&e.mParameters.listItem){var F1=e.mParameters.listItem.getBinding("title");if(F1){var G1=F1.getContext();if(G1){var H1=G1.getObject();if(H1&&H1.key){b._setChartType(H1.key);b._enrichPassedButton(b._oChartTypeButton,b._oChart.getChartType());}}}}B1=true;b._rerenderControlInFullscreen();i.close();}});n=new o1();A1=new p1({placeholder:this._oRb.getText("CHART_TYPE_SEARCH")});A1.attachLiveChange(function(e){b._triggerSearchInPopover(e,l);});n.addContentRight(A1);i=new l1({placement:$.Bottom,subHeader:n,contentWidth:"25rem"});i.addStyleClass("sapUiCompSmartChartTypePopover");i.attachAfterClose(function(e){if(!B1){}b._bAvailableChartListIsOpen=false;});i.setModel(this.getModel("$smartChartTypes"),"$smartChartTypes");if(r.system.desktop){var E1=new I({text:this._oRb.getText("CHART_TYPELIST_TEXT")});i.setShowHeader(false);i.addContent(E1);i.addAriaLabelledBy(E1);}else{i.setTitle(this._oRb.getText("CHART_TYPELIST_TEXT"));}i.addContent(l);if(l.getItems().length<7){n.setVisible(false);}this._bAvailableChartListIsOpen=true;i.openBy(C1);}};
function x1(a,l,b,e,i){l1=a;m1=l;o1=b;p1=e;n1=i;this._bChartTypesRequested=false;if(!this._bIsBeingDestroyed){this._displayChartTypes(null,this._oChartTypesSource);}delete this._oChartTypesSource;}
var y1={"bar":"sap-icon://horizontal-bar-chart","bullet":"sap-icon://horizontal-bullet-chart","bubble":"sap-icon://bubble-chart","column":"sap-icon://vertical-bar-chart","combination":"sap-icon://business-objects-experience","dual_bar":"sap-icon://horizontal-bar-chart","dual_column":"sap-icon://vertical-bar-chart","dual_combination":"sap-icon://business-objects-experience","dual_horizontal_combination":"sap-icon://business-objects-experience","dual_horizontal_stacked_combination":"sap-icon://business-objects-experience","dual_line":"sap-icon://line-chart","dual_stacked_bar":"sap-icon://full-stacked-chart","dual_stacked_column":"sap-icon://vertical-stacked-chart","dual_stacked_combination":"sap-icon://business-objects-experience","donut":"sap-icon://donut-chart","heatmap":"sap-icon://heatmap-chart","horizontal_stacked_combination":"sap-icon://business-objects-experience","line":"sap-icon://line-chart","pie":"sap-icon://pie-chart","scatter":"sap-icon://scatter-chart","stacked_bar":"sap-icon://full-stacked-chart","stacked_column":"sap-icon://vertical-stacked-chart","stacked_combination":"sap-icon://business-objects-experience","treemap":"sap-icon://Chart-Tree-Map","vertical_bullet":"sap-icon://vertical-bullet-chart","100_dual_stacked_bar":"sap-icon://full-stacked-chart","100_dual_stacked_column":"sap-icon://vertical-stacked-chart","100_stacked_bar":"sap-icon://full-stacked-chart","100_stacked_column":"sap-icon://full-stacked-column-chart","waterfall":"sap-icon://vertical-waterfall-chart","horizontal_waterfall":"sap-icon://horizontal-waterfall-chart"};
r1.prototype._rerenderControlInFullscreen=function(){if(this.bFullScreen){this._oChart.setLayoutData(new F({baseSize:"100%"}));this.invalidate(this._oChart);}};
r1.prototype._getMatchingIcon=function(a){var i=y1[a];if(!i){i="";}return i;};
r1.prototype._enrichPassedButton=function(b,a,e){if(!b){return;}if(e===undefined){e=a;var i=this._retrieveChartTypeDescription(a);if(i&&i.text){e=i.text;}}b.data("chartType",a);var l=this._getMatchingIcon(a);b.setIcon(l?l:"sap-icon://vertical-bar-chart");var n=(this._oChart.getChartType()===a)?"CHART_TYPE_TOOLTIP":"CHART_TYPE_UNSEL_TOOLTIP";b.setTooltip(this._oRb.getText(n,[e]));};
r1.prototype._updateAvailableChartType=function(){var a=this,b,e,i=[];b=this.getModel("$smartChartTypes");if(!b){return;}e={items:i};var l=this._oChart.getChartType();this.getAvailableChartTypes().forEach(function(n){var A1={key:n.key,text:n.text,icon:a._getMatchingIcon(n.key),selected:l===n.key};i.push(A1);});b.setData(e);if(this._oSegmentedButton){this._updateVisibilityOfChartTypes(this._oSegmentedButton);}this._updateVizTooltipFormatter();};
r1.prototype._createPersonalizationController=function(){if(this._oPersController){return;}var a=this.data("p13nDialogSettings");if(typeof a==="string"){try{a=JSON.parse(a);}catch(e){a=null;}}a=this._setIgnoreFromPersonalisationToSettings(a);a=a||{};var b=E.createChartWrapper(this._oChart,this._oChart.data("p13nData"),this._aColumnKeysOrdered);if(this.$()&&this.$().closest(".sapUiSizeCompact").length>0){this._oChart.addStyleClass("sapUiSizeCompact");}var i=this._oChart.setVisibleMeasures;var l=function(n,A1){this.setProperty("visibleMeasures",n,A1);var B1=this._getDrillStateTop();if(!this._bIsInitialized){this._createDrillStack();}else{B1.measures=this.getProperty("visibleMeasures");}if(!A1){this._invalidateBy({source:this,keys:{binding:true,dataSet:true,vizFrame:true}});}return this;}.bind(this._oChart);this._oPersController=new A(this.getId()+"-persoController",{table:b,setting:a,resetToInitialTableState:!this.getUseVariantManagement(),afterP13nModelDataChange:this._personalisationModelDataChange.bind(this),beforePotentialTableChange:function(n){this._oChart.setVisibleMeasures=l;}.bind(this),afterPotentialTableChange:function(n){this._oChart.setVisibleMeasures=i;}.bind(this)});this._oPersController.attachDialogConfirmedReset(function(){if(this._oDrillBreadcrumbs){this._updateDrillBreadcrumbs();}var n=sap.ui.getCore().byId(this.getId()+"-btnChartType");if(n){this._enrichPassedButton(n,this._oChart.getChartType());}}.bind(this));this._oPersController.attachDialogAfterClose(function(n){if(this._fGetDataForKeyUser){if(n.getParameter("cancel")){this._fGetDataForKeyUser([]);}this._cleanUpKeyUser();}}.bind(this));};
r1.prototype._setIgnoreFromPersonalisationToSettings=function(a){var i=p.createArrayFromString(this.getIgnoreFromPersonalisation());if(i.length){if(!a){a={};}var b=function(e){if(!a[e]){a[e]={};}a[e].ignoreColumnKeys=i;};b("dimeasure");b("filter");b("sort");}return a;};
r1.prototype._personalisationModelDataChange=function(e){this._oCurrentVariant=e.getParameter("persistentData");if(this._fGetDataForKeyUser){this._fGetDataForKeyUser(this._createKeyUserChange());}var a=e.getParameter("runtimeDeltaDataChangeType");var b=this._getChangeStatus(a);if(b===_.Unchanged){return;}this._fireChartDataChanged(a);if(!this._bApplyingVariant){if(!this.getUseVariantManagement()){this._persistPersonalisation();}else if(this._oVariantManagement){this._oVariantManagement.currentVariantSetModified(true);}}this._updateAvailableChartType();this._enrichPassedButton(this._oChartTypeButton,this._oChart.getChartType());this._checkDimensionColoring();if(b===_.TableChanged){if(this._oSemanticalNavButton){this._oSemanticalNavButton.setEnabled(false);}}else if(b===_.ModelChanged&&this._bIsChartBound){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindChart();}}if(this._oDrillBreadcrumbs){this._updateDrillBreadcrumbs();}};
r1.prototype._fireChartDataChanged=function(a){var b={dimeasure:false,filter:false,sort:false};for(var e in a){if(a[e]!=="Unchanged"){b[e]=true;}}this.fireChartDataChanged({changeTypes:b});};
r1.prototype._getChangeStatus=function(a){if(!a){return _.ModelChanged;}if(a.sort===_.ModelChanged||a.filter===_.ModelChanged||a.dimeasure===_.ModelChanged||a.group===_.ModelChanged){return _.ModelChanged;}if(a.sort===_.TableChanged||a.filter===_.TableChanged||a.dimeasure===_.TableChanged||a.group===_.TableChanged){return _.TableChanged;}return _.Unchanged;};
r1.prototype.setEntitySet=function(e){this.setProperty("entitySet",e);this._initialiseMetadata();return this;};
r1.prototype.propagateProperties=function(){V.prototype.propagateProperties.apply(this,arguments);this._initialiseMetadata();};
r1.prototype._initialiseMetadata=function(){if(!this._bMetadataIsInitialised){s.handleModelInit(this,this._onMetadataInitialised,true);}};
r1.prototype._onMetadataInitialised=function(){this._bMetaModelLoadAttached=false;if(!this._bMetadataIsInitialised){this._listenToSmartFilter();this._createToolbar();this._createVariantManagementControl();this._createToolbarContent();this._bMetadataIsInitialised=true;if(q1){this._initialiseInnerChart();}if(H.getActive()){H.end("SmartChartInit");}if(!this._oVariantManagement||(this._oVariantManagement&&this._bVariantInitialised)){this._checkAndTriggerBinding();}}};
r1.prototype._checkAndTriggerBinding=function(){if(!this._bAutoBindingTriggered){this._bAutoBindingTriggered=true;if(this.getEnableAutoBinding()){if(this._oSmartFilter){this._oSmartFilter.search();}else{this._reBindChart();}}else if(!this._oChart){this._createTempNoData();}}};
r1.prototype._createTempNoData=function(){var n=new T({text:this.getNoData()});this._oNoDataStruct=new V({items:[n],justifyContent:"Center",alignItems:"Center",height:"100%"});this.insertItem(this._oNoDataStruct,2);};
r1.prototype._createChartProvider=function(){var a,e;e=this.getEntitySet();a=this.getModel();if(a&&!this._bChartCreated){this._aAlwaysSelect=[];this._aInitialSorters=[];this._addDrillBreadcrumbs();this._bChartCreated=true;}if(a&&e){this._oChartProvider=new C({entitySet:e,ignoredFields:this.getIgnoredFields(),dateFormatSettings:this.data("dateFormatSettings"),defaultDropDownDisplayBehaviour:this.data("defaultDimensionDisplayBehaviour"),skipAnnotationParse:this.data("skipAnnotationParse"),chartQualifier:this.data("chartQualifier"),presentationVariantQualifier:this.data("presentationVariantQualifier"),model:a,chartLibrary:b1,useTimeSeries:this.getActivateTimeSeries()});}};
r1.prototype._listenToSmartFilter=function(){this._fetchSmartFilter();if(this._oSmartFilter){this._oSmartFilter.attachSearch(this._reBindChart,this);this._oSmartFilter.attachFilterChange(this._filterChangeEvent,this);}};
r1.prototype.getNoData=function(){var n=this.getProperty("noData");if(!n){this._fetchSmartFilter();if(this._oSmartFilter){n=this._oRb.getText("CHART_NO_RESULTS");}else{n=this._oRb.getText("CHART_NO_DATA_WITHOUT_FILTERBAR");}this.setNoData(n,true);}return n;};
r1.prototype._fetchSmartFilter=function(){var a=null;a=this.getSmartFilterId();this._oSmartFilter=this._findControl(a);};
r1.prototype._filterChangeEvent=function(){if(this._bIsChartBound&&this._oSmartFilter&&!this._oSmartFilter.getLiveMode()&&!this._oSmartFilter.isDialogOpen()){this._showOverlay(true);}};
r1.prototype._adjustOverlayHeight=function(){if(sap.ui.Device.browser.safari||sap.ui.Device.browser.chrome){var a=this._oChart.$(),b=a.find(".sapUiCompSmartChartOverlay");if(b.length===1){b.height(a.height());}}};
r1.prototype._renderOverlay=function(b){if(this._oChart){var a=this._oChart.$(),e=a.find(".sapUiCompSmartChartOverlay");if(b&&e.length===0){e=q("<div>").addClass("sapUiOverlay sapUiCompSmartChartOverlay").css("z-index","1");a.append(e);this._adjustOverlayHeight();this.sOverlayResizeListenerId=sap.ui.core.ResizeHandler.register(a,this._adjustOverlayHeight.bind(this));}else if(!b){e.remove();sap.ui.core.ResizeHandler.deregister(this.sOverlayResizeListenerId);}}};
r1.prototype.showOverlay=function(b){this._showOverlay(b);};
r1.prototype._showOverlay=function(b){if(b){var a={show:true};this.fireShowOverlay({overlay:a});b=a.show;}this._hasOverlay=b;this._renderOverlay(b);};
r1.prototype._findControl=function(i){var a,b;if(i){a=sap.ui.getCore().byId(i);if(!a){b=this._getView();if(b){a=b.byId(i);}}}return a;};
r1.prototype._getView=function(){if(!this._oView){var a=this.getParent();while(a){if(a.isA("sap.ui.core.mvc.View")){this._oView=a;break;}a=a.getParent();}}return this._oView;};
r1.prototype._updateInResultDimensions=function(){var a=this._getInResultDimensionTotal();var b=function(n){var e=this._oChart.getInResultDimensions();if(e.length!=n.length){return false;}for(var i=0,l=e.length;i<l;i++){if(e[i]!=n[i]){return false;}}return true;}.bind(this);if(a.length>0&&!b(a)){this._oChart.setInResultDimensions(a);}};
r1.prototype._initialiseInnerChart=function(){this._createChart();this._createChartProvider();if(this._oChartProvider){this._oChartViewMetadata=this._oChartProvider.getChartViewMetadata();if(this._oChartViewMetadata){this._assignData();this._createContent();this._createPersonalizationController();this._oChart.attachRenderComplete(this._toggleZoomButtonEnablement,this);this._oSelectionDetails.attachSelectionHandler("_selectionDetails",this._oChart);this._enrichPassedButton(this._oChartTypeButton,this._oChart.getChartType());this._enableToolbarButtons();this._checkDimensionColoring();this._updateDrillBreadcrumbs();this.bIsInitialised=true;this.fireInitialise();this.fireInitialized();this.applyVariant(this.fetchVariant());}}};
r1.prototype._enableToolbarButtons=function(){if(this._oDrillUpButton&&this._oDrillDownButton){this._oDrillUpButton.setEnabled(true);this._oDrillDownButton.setEnabled(true);}if(this._oDrillDownTextButton){this._oDrillDownTextButton.setEnabled(true);}if(this._oLegendButton){this._oLegendButton.setEnabled(true);}if(this._oZoomInButton&&this._oZoomOutButton){this._oZoomInButton.setEnabled(true);this._oZoomOutButton.setEnabled(true);}if(this._oDownloadButton){this._oDownloadButton.setEnabled(true);}if(this._oChartPersonalisationButton){this._oChartPersonalisationButton.setEnabled(true);}if(this.oFullScreenButton){this.oFullScreenButton.setEnabled(true);}if(this._oChartTypeButton){this._oChartTypeButton.setEnabled(true);}};
function z1(a,b,e,i,l,n,A1){b1=a;c1=b;d1=e;e1=i;f1=l;g1=n;i1=A1;this._bChartRequested=false;if(!this._bIsBeingDestroyed){this._reBindChart();}}
r1.prototype.rebindChart=function(){if(!this._bMetadataIsInitialised){L.error("rebindChart method called before the metadata is initialized. Please execute the UI5 Support Assistant 'SmartChart' rules to get more information",this.getId(),"sap.ui.comp.smartChart");}this._reBindChart();};
r1.prototype._reBindChart=function(){var a,b,e=[],i,l,n,A1={},B1={preventChartBind:false};if(!this._oChart){if((!b1||!c1||!d1||!e1||!f1||!g1||!i1)&&!this._bChartRequested){b1=sap.ui.require("sap/chart/library");c1=sap.ui.require("sap/chart/Chart");d1=sap.ui.require("sap/chart/data/Dimension");e1=sap.ui.require("sap/chart/data/HierarchyDimension");f1=sap.ui.require("sap/chart/data/TimeDimension");g1=sap.ui.require("sap/chart/data/Measure");i1=sap.ui.require("sap/viz/ui5/controls/VizTooltip");if(!b1||!c1||!d1||!e1||!f1||!g1||!i1){sap.ui.getCore().loadLibrary("sap.chart",{async:true}).then(function(){sap.ui.require(['sap/chart/library','sap/chart/Chart','sap/chart/data/Dimension','sap/chart/data/HierarchyDimension','sap/chart/data/TimeDimension','sap/chart/data/Measure','sap/viz/ui5/controls/VizTooltip'],z1.bind(this));this._bChartRequested=true;}.bind(this));}}if(!b1||!c1||!d1||!e1||!f1||!g1||!i1){return;}this._initialiseInnerChart();}a=this._getChartPersonalisationData()||{};i=a.filters;l=a.excludeFilters;n=a.sorters;if(this._oSmartFilter){b=this._oSmartFilter.getFilters();A1=this._oSmartFilter.getParameters()||{};}if(b&&b.length){if(l){e=[new m([b[0],l],true)];}else{e=b;}}else if(l){e=[l];}if(i){i=e.concat(i);}else{i=e;}this._updateInResultDimensions();A1["entitySet"]=this.getEntitySet();if(!n){n=[];}B1.filters=i;B1.sorter=n;B1.parameters=A1;B1.events={};this.fireBeforeRebindChart({bindingParams:B1});if(!B1.preventChartBind&&this._oChartViewMetadata){n=B1.sorter;i=B1.filters;A1=B1.parameters;this._oChart.setBusy(true);this._bDataLoadPending=true;r1._addBindingListener(B1,"change",this._onDataLoadComplete.bind(this));r1._addBindingListener(B1,"dataReceived",this._onDataReceived.bind(this));var C1={path:this.getChartBindingPath()||("/"+this.getEntitySet()),parameters:A1,filters:i,events:B1.events};if(!this._bIsChartBound){C1.sorter=n;}if(B1.length){C1.length=Math.min(B1.length,100);}else{var D1=this._oChartProvider.getMaxItems();if(D1>0){C1.length=D1;}}this._oChart.bindData(C1);if(this._bIsChartBound){this._oChart.getBinding("data").sort(n);}this._showOverlay(false);this._bIsChartBound=true;}};
r1.prototype._validateSorters=function(a){var b=[];var e=this._oChart.getVisibleDimensions().concat(this._oChart.getVisibleMeasures());if(a){a.forEach(function(i){e.forEach(function(l){if(i.sPath===l){b.push(i);}});});}return b;};
r1.prototype._onDataReceived=function(e){if(e&&e.getParameter&&e.getParameter("__simulateAsyncAnalyticalBinding")){return;}this._onDataLoadComplete(e,true);this.fireDataReceived(e);};
r1._addBindingListener=function(b,e,a){if(!b.events){b.events={};}if(!b.events[e]){b.events[e]=a;}else{var i=b.events[e];b.events[e]=function(){a.apply(this,arguments);i.apply(this,arguments);};}};
r1.prototype._onDataLoadComplete=function(e,b){if(this._oSemanticalNavButton){this._oSemanticalNavButton.setEnabled(false);}if(this._bDataLoadPending||b){this._bDataLoadPending=false;this._updateAvailableChartType();this._oChart.setBusy(false);}};
r1.prototype._assignData=function(){if(this._oChartViewMetadata&&this._oChart){this._oChart.resetLayout();if(this._oChartViewMetadata.measureFields&&(this._oChartViewMetadata.measureFields.length>0)){this._oChart.setVisibleMeasures(this._oChartViewMetadata.measureFields);}if(this._oChartViewMetadata.dimensionFields&&(this._oChartViewMetadata.dimensionFields.length>0)){this._oChart.setVisibleDimensions(this._oChartViewMetadata.dimensionFields);}if(!this.getChartType()&&this._oChartViewMetadata.chartType){this._setChartType(this._oChartViewMetadata.chartType);}}};
r1.prototype._createP13nObject=function(a){if(a.sortable&&a.sorted){var b={columnKey:a.name,operation:a.sortOrder};if(a.sortIndex!=null){this._aInitialSorters.splice(a.sortIndex,0,b);}else{this._aInitialSorters.push(b);}}return{columnKey:a.name,leadingProperty:a.name,additionalProperty:a.additionalProperty,sortProperty:a.sortable?a.name:undefined,filterProperty:a.filterable?a.name:undefined,fullName:a.hasValueListAnnotation?a.fullName:null,type:a.filterType,typeInstance:a.modelType,maxLength:a.maxLength,precision:a.precision,scale:a.scale,isMeasure:a.isMeasure,isDimension:a.isDimension,isHierarchyDimension:a.isHierarchyDimension,hierarchyLevel:a.hierarchyLevel,aggregationRole:a.aggregationRole,label:a.label,tooltip:a.quickInfo,sorted:a.sorted,sortOrder:a.sortOrder,criticality:a.valueCriticality};};
r1.prototype._createContent=function(){var i,l=0,a,b,e,n=[],A1;var B1=[];this._aColumnKeysOrdered=[];Object.assign(this._aColumnKeysOrdered,this._oChartViewMetadata.dimensionFields);this._aColumnKeysOrdered=this._aColumnKeysOrdered.concat(this._oChartViewMetadata.measureFields);l=this._oChartViewMetadata.fields.length;var C1=this._oChartViewMetadata.dimensionFields||[];var D1=this._oChartViewMetadata.measureFields||[];for(i=0;i<l;i++){b=null;a=this._oChartViewMetadata.fields[i];a.label=a.fieldLabel||a.name;if(this._aColumnKeysOrdered.indexOf(a.name)===-1){this._aColumnKeysOrdered.push(a.name);}if(this._oChart.getDimensionByName(a.name)===undefined&&this._oChart.getMeasureByName(a.name)===undefined){A1=this._createP13nObject(a);e={name:a.name,label:a.label,tooltip:a.quickInfo};}if(a.inResult){this._aAlwaysSelect.push(a.name);}if(a.isDimension||a.isHierarchyDimension||(C1.indexOf(a.name)!=-1)){if(this._oChart.getDimensionByName(a.name)===undefined){if(a.isDimension){if(a.isTimeDimension&&this.getActivateTimeSeries()){b=new f1(e);var E1=a.timeUnitType;if(Q.hasOwnProperty(a.timeUnitType)){b.setTimeUnit(Q[E1]);}}else{b=new d1(e);}}else{e.level=a.hierarchyLevel;b=new e1(e);}this._oChart.addDimension(b);if(a.description){b.setTextProperty(a.description);b.setTextFormatter(x.getFormatterFunctionFromDisplayBehaviour(a.displayBehaviour));}else if(a.dateFormatter){b.setTextFormatter(a.dateFormatter);}}else{var F1=this._oChart.getDimensionByName(a.name).data("p13nData");if(F1){this._oChart.getDimensionByName(a.name).data("p13nData",typeof F1==="string"?JSON.parse(F1):F1);}}}else if(a.isMeasure||(D1.indexOf(a.name)!=-1)){if(this._oChart.getMeasureByName(a.name)===undefined){b=new g1(e);this._oChart.addMeasure(b);if(a.dataPoint){B1.push({dataPoint:a.dataPoint,measure:b});}if(a.unit){b.setUnitBinding(a.unit);}}else{var F1=this._oChart.getMeasureByName(a.name).data("p13nData");if(F1){this._oChart.getMeasureByName(a.name).data("p13nData",typeof F1==="string"?JSON.parse(F1):F1);}}}else if(a.sortable||a.filterable){n.push(A1);}if(b){if(a.role){b.setRole(a.role);}b.data("p13nData",A1);}}if(this._oChart){this._oChart.data("p13nData",n);}if(B1.length>0){this._enrichFromDataPoints(B1);}};
r1.prototype._getField=function(n){var a,i,l;if(n&&this._oChartViewMetadata&&this._oChartViewMetadata.fields){l=this._oChartViewMetadata.fields.length;for(i=0;i<l;i++){a=this._oChartViewMetadata.fields[i];if(a.name===n){return a;}}}return null;};
r1.prototype.attachInitialise=function(a,b,l){this.attachEvent("initialise",a,b,l);q1=true;sap.ui.getCore().loadLibrary('sap.chart');b1=sap.ui.requireSync('sap/chart/library');c1=sap.ui.requireSync('sap/chart/Chart');d1=sap.ui.requireSync('sap/chart/data/Dimension');e1=sap.ui.requireSync('sap/chart/data/HierarchyDimension');f1=sap.ui.requireSync('sap/chart/data/TimeDimension');g1=sap.ui.requireSync('sap/chart/data/Measure');i1=sap.ui.requireSync('sap/viz/ui5/controls/VizTooltip');if(this._bMetadataIsInitialised){this._initialiseInnerChart();}L.error("The event 'initialise' is deprecated, please use 'initialized' instead");return this;};
r1.prototype._createChart=function(){if(this._oNoDataStruct){this._oNoDataStruct.destroy();}var a=this.getItems(),l=a?a.length:0,b,e=this;while(l--){b=a[l];if(b instanceof c1){break;}b=null;}if(b){this._oChart=b;}else{this._oChart=new c1({uiConfig:{applicationSet:'fiori'},busyIndicatorDelay:0,vizProperties:{title:{text:''},plotArea:{dataLabel:{hideWhenOverlap:false}},general:{groupData:false},valueAxis:{title:{visible:e.getShowMeasuresTitle()}},categoryAxis:{title:{visible:e.getShowDimensionsTitle()},layout:{autoHeight:true,autoWidth:true}}},selectionMode:this.getSelectionMode(),width:"100%"});if(this.getHeight()){this._oChart.setHeight("100%");}this._toggleChartTooltipVisibility(this.getShowChartTooltip());this._setBehaviorTypeForDataSelection();this.insertItem(this._oChart,2);}if(sap.ui.Device.browser.safari||sap.ui.Device.browser.chrome||sap.ui.Device.browser.firefox){this.addStyleClass("sapUiCompSmartChartInnerChartHeight");}this.setLegendVisible(this.getLegendVisible());if(!this._oChart.getLayoutData()){var i={growFactor:1};var n=this.getLayoutData();if(n&&n.getBaseSize){i.baseSize=n.getBaseSize();}else{i.baseSize="100%";}this._oChart.setLayoutData(new F(i));}if(this.getChartType()){this._setChartType(this.getChartType());}this._oChart.attachRenderComplete(function(){if(this._hasOverlay){setTimeout(function(){this._showOverlay(true);}.bind(this),0);}this._oChart.getLayoutData().setGrowFactor(1);}.bind(this));this._oChart.setCustomMessages({'NO_DATA':this.getNoData()});this._createTooltipOrPopover();};
r1.prototype._toggleChartTooltipVisibility=function(b){if(this._oChart){if(b){if(!this._vizTooltip){this._vizTooltip=new i1();}this._vizTooltip.connect(this._oChart.getVizUid());}else{if(this._vizTooltip){this._vizTooltip.destroy();}}}};
r1.prototype._updateVizTooltipFormatter=function(){if(this._vizTooltip){if(this._oChart.getChartType().match(/100/)!==null){this._vizTooltip.setFormatString(sap.viz.ui5.format.ChartFormatter.DefaultPattern.PERCENT);}else{this._vizTooltip.setFormatString(sap.viz.ui5.format.ChartFormatter.DefaultPattern.STANDARDFLOAT);}}};
r1.prototype.getChart=function(){if(!this._oChart&&this._bMetadataIsInitialised){sap.ui.getCore().loadLibrary('sap.chart');b1=sap.ui.requireSync('sap/chart/library');c1=sap.ui.requireSync('sap/chart/Chart');d1=sap.ui.requireSync('sap/chart/data/Dimension');e1=sap.ui.requireSync('sap/chart/data/HierarchyDimension');f1=sap.ui.requireSync('sap/chart/data/TimeDimension');g1=sap.ui.requireSync('sap/chart/data/Measure');i1=sap.ui.requireSync('sap/viz/ui5/controls/VizTooltip');this._initialiseInnerChart();}else if(!this._bMetadataIsInitialised){L.error("Accesing the inner chart before the metadata is initialized will not work. Instead, wait for the initialized event!");}L.error("This function is deprecated, please use getChartAsync instead");return this._oChart;};
r1.prototype.getChartAsync=function(){if(!this._oChart&&this._bMetadataIsInitialised){return new Promise(function(a,b){sap.ui.require(["sap/chart/library","sap/chart/Chart","sap/chart/data/Dimension","sap/chart/data/HierarchyDimension","sap/chart/data/TimeDimension","sap/chart/data/Measure","sap/viz/ui5/controls/VizTooltip"],function(e,i,l,n,A1,B1,C1){b1=e;c1=i;d1=l;e1=n;f1=A1;g1=B1;i1=C1;if(!this._oChart){this._initialiseInnerChart();}if(this._oChart){a(this._oChart);}else{b("The inner chart couldn't be created");}}.bind(this));}.bind(this));}else if(!this._bMetadataIsInitialised){L.error("Accesing the inner chart before the metadata is initialized will not work. Instead, wait for the initialized event!");return Promise.reject(new Error('Accesing the inner chart before the metadata is initialized will not work. Instead, wait for the initialized event!'));}else{return Promise.resolve(this._oChart);}};
r1.prototype._getChartTypes=function(){var a;try{a=sap.chart.api.getChartTypes();}catch(e){a={};L.error("sap.chart.api..getChartTypes throws an exception.\n"+e.toString());}return a;};
r1.prototype.getAvailableChartTypes=function(){var i,a,b=[],e,l={},n;if(this._oChart){n=p.createArrayFromString(this.getIgnoredChartTypes());l=this._getChartTypes();e=this._oChart.getAvailableChartTypes().available;if(e){for(i=0;i<e.length;i++){a=e[i].chart;if(n.indexOf(a)<0){b.push({key:a,text:l[a]});}}}}return b;};
r1.prototype._getAllChartTypes=function(){var a,b=[],e,i;i=p.createArrayFromString(this.getIgnoredChartTypes());e=this._getChartTypes();for(a in e){if(a){if(i.indexOf(a)<0){b.push({key:a,text:e[a]});}}}return b;};
r1.prototype._retrieveChartTypeDescription=function(a){var b=this._getChartTypes();return({key:a,text:b[a]});};
r1.prototype._setChartType=function(a){if(this._oChart){var b=this._oChart.getHeight();this._oChart.setChartType(a);this._aDetailsEntries=[];this._toggleMeasureUnitBinding(a,this._oChart.getMeasures());this._oChart.setHeight(b);}};
r1.prototype._toggleMeasureUnitBinding=function(a,b){if(typeof b!='undefined'&&b instanceof Array){if(a.substring(0,4)==="100_"){b.forEach(function(i){i.setUnitBinding();});}else{if(this._oChartProvider){var e=this._oChartProvider._aODataFieldMetadata;b.forEach(function(l){for(var i=e.length-1;i>=0;i--){if(e[i].name==l.getName()){if(e[i]["Org.OData.Measures.V1.ISOCurrency"]&&e[i]["Org.OData.Measures.V1.ISOCurrency"].Path){l.setUnitBinding(e[i]["Org.OData.Measures.V1.ISOCurrency"].Path);}else if(e[i]["Org.OData.Measures.V1.Unit"]&&e[i]["Org.OData.Measures.V1.Unit"].Path){l.setUnitBinding(e[i]["Org.OData.Measures.V1.Unit"].Path);}break;}}});}}}};
r1.prototype._getDimensions=function(){var a=[];if(this._oChart){a=this._oChart.getDimensions();}return a;};
r1.prototype._getVisibleDimensions=function(){var a=[];if(this._oChart){a=this._oChart.getVisibleDimensions();}return a;};
r1.prototype._getMeasures=function(){var a=[];if(this._oChart){a=this._oChart.getMeasures();}return a;};
r1.prototype._getVisibleMeasures=function(){var a=[];if(this._oChart){a=this._oChart.getVisibleMeasures();}return a;};
r1.prototype._getSortedDimensions=function(){var e=[];if(this._oChart){e=this._oChart.getDimensions();if(e){e.sort(function(a,b){if(a.getLabel()&&b.getLabel()){return a.getLabel().localeCompare(b.getLabel());}});}}return e;};
r1.prototype.fetchVariant=function(){if(this._oCurrentVariant==="STANDARD"||this._oCurrentVariant===null){return{};}return this._oCurrentVariant;};
r1.prototype.applyVariant=function(a,b){this._oCurrentVariant=a;if(this._oCurrentVariant==="STANDARD"){this._oCurrentVariant=null;}this._bApplyingVariant=true;if(this._oPersController){if(this._oCurrentVariant===null||q.isEmptyObject(this._oCurrentVariant)){this._oPersController.resetPersonalization(a1.ResetFull);}else{this._oPersController.setPersonalizationData(this._oCurrentVariant,true);}}this._bApplyingVariant=false;this.fireAfterVariantApply({currentVariantId:this.getCurrentVariantId()});};
r1.prototype.variantsInitialized=function(){this._bVariantInitialised=true;this._checkAndTriggerBinding();};
r1.prototype.getUiState=function(){if(!this.isInitialised()){L.error("SmartChart: Called getUiState() before inner structure was initialized. This will force a synchronous load of dependencies.");this.getChart();}var a=this._oPersController?this._oPersController.getDataSuiteFormatSnapshot():null;return new U({presentationVariant:{ContextUrl:"",MaxItems:this._oChartProvider?this._oChartProvider.getMaxItems():undefined,SortOrder:a?a.SortOrder:[],GroupBy:a?a.GroupBy:[],Total:a?a.Total:[],RequestAtLeast:this._getInResultDimensionTotal(),Visualizations:a?a.Visualizations:[]},selectionVariant:{SelectOptions:a?a.SelectOptions:[]},variantName:this.getCurrentVariantId()});};
r1.prototype.setUiState=function(a){if(this._oPersController){var b=(this._oVariantManagement&&a.getVariantName())?this._oVariantManagement.getVariantContent(this,a.getVariantName()):{};this._oPersController.setDataSuiteFormatSnapshot(K({},a.getPresentationVariant(),a.getSelectionVariant()),b,true);}this._setInResultDimensionFromVariant(a);};
r1.prototype.setUiStateAsVariant=function(a){if(this._oPersController){this._oPersController.setPersonalizationDataAsDataSuiteFormat(K({},a.getPresentationVariant(),a.getSelectionVariant()),true);}this._setInResultDimensionFromVariant(a);};
r1.prototype._setInResultDimensionFromVariant=function(a){if(a.getPresentationVariant()&&this._oChart){this._oChart.setInResultDimensions(a.getPresentationVariant().RequestAtLeast);}else{this._oUiStateRequestAtLeast=a.getPresentationVariant().RequestAtLeast;}};
r1.prototype.setRequestAtLeastFields=function(a){this.setProperty("requestAtLeastFields",a);if(this._oChart){this._updateInResultDimensions();}return this;};
r1.prototype._getInResultDimensionTotal=function(){var i=[];if(this.getRequestAtLeastFields()){i=this.getRequestAtLeastFields().split(",");}i=i.concat(this._aAlwaysSelect);if(this._oChart){i=i.concat(this._oChart.getInResultDimensions());}if(this._oUiStateRequestAtLeast){i.concat(this._oUiStateRequestAtLeast);this._oUiStateRequestAtLeast=null;}return i.filter(function(e,a,b){return a==b.indexOf(e);});};
r1.prototype._getFieldTooltip=function(a){var b=this._getFieldByKey(a);if(b){return b.quickInfo;}return"";};
r1.prototype._getFieldByKey=function(a){var i,b=null;if(this._oChartViewMetadata&&this._oChartViewMetadata.fields){for(i=0;i<this._oChartViewMetadata.fields.length;i++){b=this._oChartViewMetadata.fields[i];if(a===b.name){return b;}}return null;}};
r1.prototype._getByKey=function(a,b){var i,l,e,n;if(a){l=a.length;for(i=0;i<l;i++){e=a[i];n=e.data("p13nData");if(n&&n.columnKey===b){return e;}}}return null;};
r1.prototype._getDimensionByKey=function(a){if(this._oChart){return this._getByKey(this._oChart.getDimensions(),a);}return null;};
r1.prototype._getMeasureByKey=function(a){if(this._oChart){return this._getByKey(this._oChart.getMeasures(),a);}return null;};
r1.prototype._getChartObjByKey=function(a){var b=this._getDimensionByKey(a);if(!b){b=this._getMeasureByKey(a);}return b;};
r1.prototype._getPathFromColumnKeyAndProperty=function(a,b){var e=null,i,l;i=this._getChartObjByKey(a);if(i){l=i.data("p13nData");if(l){e=l[b];}}return e;};
r1.prototype._getChartPersonalisationData=function(){if(!this._oCurrentVariant){return null;}var a=[],b=[],e=[],i,l,n;if(this._oCurrentVariant.sort){l=this._oCurrentVariant.sort.sortItems;}else{l=this._aInitialSorters;}if(l){l.forEach(function(A1){var B1=A1.operation==="Descending";n=A1.columnKey;a.push(new k(n,B1));},this);}if(this._oCurrentVariant.filter){this._oCurrentVariant.filter.filterItems.forEach(function(A1){var B1=A1.value1,C1=A1.value2;n=A1.columnKey;if(B1 instanceof Date&&this._oChartProvider&&this._oChartProvider.getIsUTCDateHandlingEnabled()){B1=D.localToUtc(B1);C1=C1?D.localToUtc(C1):C1;}if(A1.exclude){e.push(new m(n,"NE",A1.operation==="Empty"?"":B1));}else if(A1.operation==="Empty"){b.push(new m(n,"EQ",""));}else{b.push(new m(n,A1.operation,B1,C1));}},this);if(e.length){i=new m(e,true);}}return{filters:b,excludeFilters:i,sorters:a};};
r1.prototype._persistPersonalisation=function(){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){var a=this.getCurrentVariantId();if(!this._bSaving){this._bSaving=true;this._oVariantManagement.fireSave({name:"Personalisation",implicit:true,global:false,overwrite:!!a,key:a,def:true});delete this._bSaving;}}};
r1.prototype.getCurrentVariantId=function(){var a="";if(this._oVariantManagement){a=this._oVariantManagement.getCurrentVariantId();}return a;};
r1.prototype.setCurrentVariantId=function(a){if(this._oVariantManagement&&!this._oVariantManagement.isPageVariant()){this._oVariantManagement.setCurrentVariantId(a);}else{L.error("sap.ui.comp.smartchart.SmartChart.prototype.setCurrentVariantId: VariantManagement does not exist or is a page variant");}return this;};
r1.prototype._adjustHeight=function(){if(this._oChart){var i=0,b=0;var a=this.getDomRef()?this.getDomRef().offsetHeight:0;if(a===0){return;}if(this._oToolbar&&this._oToolbar.getDomRef()){i=this._oToolbar.getDomRef().offsetHeight;}if(this._oDrillBreadcrumbs&&this._oDrillBreadcrumbs.getDomRef()){var e=this._oDrillBreadcrumbs.getDomRef().parentNode?this._oDrillBreadcrumbs.getDomRef().parentNode:this._oDrillBreadcrumbs.getDomRef();b=e.offsetHeight;}var l=a-i-b;this._oChart.setHeight(l+"px");this._updateDrillBreadcrumbs();if(this._hasOverlay){setTimeout(function(){this._showOverlay(true);}.bind(this),0);}}};
r1.prototype._toggleFullScreen=function(b,a){if(!this.oFullScreenButton||(b===this.bFullScreen&&!a)){return;}if(b==true&&this._oChart){this._sChartHeight=this._oChart.getHeight();this._oChart.setHeight("100%");}this.bFullScreen=b;W.toggleFullScreen(this,this.bFullScreen,this.oFullScreenButton,this._toggleFullScreen,"sapContrastPlus",true);if(!b){this._adjustHeight();}this._renderFullScreenButton();this.fireFullScreenToggled({fullScreen:b});if(b==false&&this._oChart){this._oChart.setHeight(this._sChartHeight);}};
r1.prototype._renderFullScreenButton=function(){this.oFullScreenButton.setTooltip(this.bFullScreen?this._oRb.getText("CHART_MINIMIZEBTN_TOOLTIP"):this._oRb.getText("CHART_MAXIMIZEBTN_TOOLTIP"));this.oFullScreenButton.setText(this.bFullScreen?this._oRb.getText("CHART_MINIMIZEBTN_TEXT"):this._oRb.getText("CHART_MAXIMIZEBTN_TEXT"));this.oFullScreenButton.setIcon(this.bFullScreen?"sap-icon://exit-full-screen":"sap-icon://full-screen");};
r1.prototype._enrichFromDataPoints=function(a){var l=a.length;var b=[];var e={};for(var i=0;i<l;i++){this._interpretDataPoint(a[i].dataPoint,a[i].measure,e,b);}if(b.length>0){this._oChart.setActiveColoring({coloring:sap.chart.ColoringType.Criticality,parameters:{measure:b}});this._oChart.setColorings({Criticality:{MeasureValues:e}});}};
r1.prototype._interpretDataPoint=function(a,b,e,i){this._setSemanticPatterns(a,b);if(b.setBoundaryValues){this._setBoundaryValues(a,b);}if(a.Criticality||a.CriticalityCalculation){e[a.Value.Path]=this._oChartProvider.provideSemanticColoring(a);i.push(a.Value.Path);}};
r1.prototype._setSemanticPatterns=function(a,b){var e=a.TargetValue?a.TargetValue.Path:null;var i=a.ForecastValue?a.ForecastValue.Path:null;b.setSemantics(sap.chart.data.MeasureSemantics.Actual);if(e!=null){var l=this._oChart.getMeasureByName(e);if(l){l.setSemantics(sap.chart.data.MeasureSemantics.Reference);}else{L.error("sap.ui.comp.SmartChart: "+a.TargetValue.Path+" is not a valid measure");}}if(i){var n=this._oChart.getMeasureByName(i);if(n){n.setSemantics(sap.chart.data.MeasureSemantics.Projected);}else{L.error("sap.ui.comp.SmartChart: "+a.ForecastValue.Path+" is not a valid measure");}}b.setSemanticallyRelatedMeasures({referenceValueMeasure:e,projectedValueMeasure:i});};
r1.prototype._setBoundaryValues=function(a,b){var e={};if(a.MinimumValue){e.minimum=a.MinimumValue;}if(a.MaximumValue){e.maximum=a.MaximumValue;}if(e.minimum||e.maximum){b.setBoundaryValues(e);}};
r1.prototype.isInitialised=function(){return!!this.bIsInitialised;};
r1.prototype.exit=function(){this._oRb=null;if(this._oSmartFilter){this._oSmartFilter.detachSearch(this._reBindChart,this);this._oSmartFilter.detachFilterChange(this._filterChangeEvent,this);}if(this._oChartProvider&&this._oChartProvider.destroy){this._oChartProvider.destroy();}this._oChartProvider=null;if(this._oPersController&&this._oPersController.destroy){this._oPersController.destroy();}if(this._oSegmentedButton){this._oSegmentedButton.removeAllButtons();this._oButtonChart1.destroy();this._oButtonChart2.destroy();this._oButtonChart3.destroy();this._oButtonChart4.destroy();this._oButtonChart5.destroy();this._oButtonChart1=null;this._oButtonChart2=null;this._oButtonChart3=null;this._oButtonChart4=null;this._oButtonChart5=null;}this._oPersController=null;if(this._oVariantManagement){this._oVariantManagement.detachSave(this._variantSaved,this);this._oVariantManagement.detachAfterSave(this._variantAfterSave,this);if(!this._oVariantManagement.isPageVariant()&&this._oVariantManagement.destroy){this._oVariantManagement.destroy();}}this._oVariantManagement=null;this._destroyPopover();W.cleanUpFullScreen(this);if(this._oDetailsPopover){this._oDetailsPopover.destroy();if(this._oRelatedAppsMasterList){this._oRelatedAppsMasterList.destroy();}}if(this.oChart){this._oChart.detachRenderComplete(this._toggleZoomButtonEnablement,this);}this._oCurrentVariant=null;this._oChartViewMetadata=null;this._aAlwaysSelect=null;this._aInitialSorters=null;this._oSmartFilter=null;this._oToolbar=null;this._oChartPersonalisationButton=null;this._oView=null;this._oChart=null;};
r1.prototype._processResizeHandler=function(a){if(a){this.sResizeListenerId=null;if(r.system.desktop){this.sResizeListenerId=sap.ui.core.ResizeHandler.register(this,this._adjustHeight.bind(this));}else{r.orientation.attachHandler(this._adjustHeight,this);r.resize.attachHandler(this._adjustHeight,this);}}else{if(r.system.desktop&&this.sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this.sResizeListenerId);this.sResizeListenerId=null;}else{r.orientation.detachHandler(this._adjustHeight,this);r.resize.detachHandler(this._adjustHeight,this);}}};
r1.prototype.setShowToolbar=function(b){if(this._oToolbar){this._oToolbar.setVisible(b);}return this.setProperty("showToolbar",b,true);};
r1.prototype.setToolbarStyle=function(a){if(this._oToolbar){this._oToolbar.setStyle(a);}return this.setProperty("toolbarStyle",a,true);};
r1.prototype.setShowDimensionsTitle=function(b){if(this._oChart){this._oChart.setVizProperties({"categoryAxis":{"title":{"visible":b}}});}return this.setProperty("showDimensionsTitle",b,true);};
r1.prototype.setShowMeasuresTitle=function(b){if(this._oChart){this._oChart.setVizProperties({"valueAxis":{"title":{"visible":b}}});}return this.setProperty("showMeasuresTitle",b,true);};
r1.prototype._checkDimensionColoring=function(){var a=this._getVisibleDimensions(),b,e={Criticality:{DimensionValues:{}}},l;for(var i=0;i<a.length;i++){b=this._getField(a[i]);l=this._oChartProvider.calculateDimensionColoring(b);if(l){if(this._sColoringDimension!=b.name){e.Criticality.DimensionValues[b.name]=l;this._oChart.setActiveColoring({coloring:sap.chart.ColoringType.Criticality,parameters:{dimension:b.name}});this._oChart.setColorings(e);this._sColoringDimension=b.name;}return;}}};
r1.prototype.getIdForLabel=function(){if(this._headerText){return this._headerText.getId();}return V.prototype.getIdForLabel.apply(this,[]);};
return r1;});
}
},"sap/ui/comp/library-preload"
);
//# sourceMappingURL=library-preload.js.map