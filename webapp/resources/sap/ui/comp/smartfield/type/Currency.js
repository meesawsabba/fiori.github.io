/*
 * SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/model/type/Currency","sap/ui/model/odata/type/Currency","sap/ui/model/ValidateException"],function(C,a,O,V){"use strict";var _=/^([-]?)(\d+)(?:\.(\d+))?$/;var b=O.extend("sap.ui.comp.smartfield.type.Currency",{constructor:function(f,o){O.apply(this,[f]);this.oConstraints=o;this.bParseWithValues=true;this.sName="Currency";}});b.prototype.parseValue=function(v,i,d){if(d[1]&&this.shouldConvertUnitToUpperCase(d[1])){arguments[2][1]=arguments[2][1].toUpperCase();}var e=O.prototype.parseValue.apply(this,arguments),I,f,m=Array.isArray(e)&&e[0]&&c(e[0]);if(Array.isArray(m)){I=m[1]+m[2];f=m[3];if(Number.parseInt(f)===0){e[0]=I;}}if(e[1]===undefined){e[1]=d[1];}return e;};b.prototype.validateValue=function(v){var m,s=v[0],n=s===null,S=0;if(v[1]&&this.shouldConvertUnitToUpperCase(v[1])){arguments[0][1]=arguments[0][1].toUpperCase();}if(this.oConstraints&&this.oConstraints.nullable&&(n||(s===this.oFormatOptions.emptyString))){return;}m=c(s);if((typeof s!=="string")||(m===null)){throw new V(g("EnterNumber"));}var i=parseInt(m[2]),I=i===0?0:m[2].length,f=(m[3]||"").length,d=this.oConstraints&&this.oConstraints.precision,p=typeof d==="number"?d:Infinity,e=v[1],h=this.oOutputFormat.oLocaleData.getCurrencyDigits(e),j=this.mCustomUnits&&this.mCustomUnits[e]&&this.mCustomUnits[e].decimals;if(j||j===0){h=j;}if(this.oConstraints&&this.oConstraints.variableScale){S=Math.min(p,h);}else{S=Math.min((this.oConstraints&&this.oConstraints.scale)||0,h);}if(S>p){S=p;}if(f>S){if(S===0){throw new V(g("EnterInt"));}if((I+S)>p){throw new V(g("EnterNumberIntegerFraction",[p-S,S]));}throw new V(g("EnterNumberFraction",[S]));}if(I>(p-S)){throw new V(g("EnterNumberInteger",[p-S]));}};function c(v){return _.exec(v);}function g(k,p){return C.getLibraryResourceBundle().getText(k,p);}b.prototype.shouldConvertUnitToUpperCase=function(v){return this.mCustomUnits&&!this.mCustomUnits[v]&&this.mCustomUnits[v.toUpperCase()];};b.prototype.getName=function(){return"sap.ui.comp.smartfield.type.Currency";};return b;});
