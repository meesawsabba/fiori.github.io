/*!
 * SAPUI5
 * (c) Copyright 2009-2021 SAP SE. All rights reserved.
 */
sap.ui.define(["sap/ui/fl/changeHandler/BaseRename","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier"],function(B,L,J){"use strict";var P="label";var C="fieldLabel";var T="XFLD";var R=B.createRenameChangeHandler({changePropertyName:C,translationTextType:T});R.applyChange=function(c,o,p){var a=c.getDefinition();var t=a.texts[C];var v=t.value;if(a.texts&&t&&typeof(v)==="string"){return this.setLabelPropertyOnControl(o,v,p.modifier,P).then(function(O){c.setRevertData(O);});}L.error("Change does not contain sufficient information to be applied: ["+a.layer+"]"+a.namespace+"/"+a.fileName+"."+a.fileType);return Promise.resolve();};R.revertChange=function(c,o,p){var O=c.getRevertData();if(O||O===""){if(O==="$$Handled_Internally$$"){O=undefined;}return this.setLabelPropertyOnControl(o,O,p.modifier,P).then(function(){c.resetRevertData();});}L.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.");return Promise.resolve();};R.setLabelPropertyOnControl=function(c,v,m,p){return Promise.resolve().then(m.getProperty.bind(m,c,p)).then(function(l){if(l&&(typeof l!=="string")){p="text";c=l;}}).then(m.getPropertyBindingOrProperty.bind(m,c,p)).then(function(o){m.setPropertyBindingOrProperty(c,p,v);return o||"$$Handled_Internally$$";});};R.getChangeVisualizationInfo=function(c,a){var n=(c.getDefinition().texts&&c.getDefinition().texts[C]),o=c.getRevertData(),s,e,d;if(o==="$$Handled_Internally$$"){o=undefined;s=c.getSelector();e=J.bySelector(s,a);if(e.isA("sap.ui.comp.smartform.GroupElement")){d=e.getDataSourceLabel();if(d){o=d;}}}return{payload:{originalLabel:o,newLabel:n&&n.value}};};return R;},true);
