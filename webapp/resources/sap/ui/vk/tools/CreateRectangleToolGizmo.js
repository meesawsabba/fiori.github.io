/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["./CreateParametricGizmo","../svg/Element","../svg/Rectangle"],function(G,E,R){"use strict";var C=G.extend("sap.ui.vk.tools.CreateRectangleToolGizmo",{metadata:{library:"sap.ui.vk"}});C.prototype.hasDomElement=function(){return false;};C.prototype.show=function(v,t){this._viewport=v;this._tool=t;this.updateParentNode();};C.prototype.hide=function(){this._viewport=null;this._tool=null;this._root=null;};C.prototype._startAdding=function(p){this._startPos=p;var m=this._viewport._camera._transformRect({x1:0,y1:0,x2:1,y2:1});this._minWidth=m.x2-m.x1;this._minHeight=m.y2-m.y1;this._activeElement=new R({subelement:true,width:this._minWidth,height:this._minHeight,material:this._tool._material,lineStyle:this._tool._lineStyle,fillStyle:this._tool._fillStyle});var n=new E({name:"Rectangle",matrix:[1,0,0,1,p.x,p.y]});n.add(this._activeElement);this._root.add(n);};C.prototype._update=function(p,i){var a=this._startPos;var b=this._activeElement;if(b){var m=Math.min(a.x,p.x);var c=Math.min(a.y,p.y);var w=Math.max(Math.abs(a.x-p.x),this._minWidth);var h=Math.max(Math.abs(a.y-p.y),this._minHeight);if(this._tool.getUniformMode()^i){if(w<h){w=h;if(p.x<a.x){m=a.x-w;}}else{h=w;if(p.y<a.y){c=a.y-h;}}}b.parent.setMatrix([1,0,0,1,m,c]);b.width=w;b.height=h;b.invalidate();}};C.prototype._stopAdding=function(){var a=this._activeElement;this._activeElement=null;this._tool.fireCompleted({node:a.parent,request:this._createRequest(a.parent)});};return C;});
