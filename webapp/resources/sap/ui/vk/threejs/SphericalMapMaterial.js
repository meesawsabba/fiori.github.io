/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["../thirdparty/three"],function(t){"use strict";var v=["#ifdef USE_MAP","	varying vec3 vEyeDirection;","#endif","void main() {","	#include <begin_vertex>","	#include <project_vertex>","#ifdef USE_MAP","	if (isOrthographic) {","		vEyeDirection = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);","	} else {","		vec4 worldPosition = modelMatrix * vec4(transformed, 1.0);","		vEyeDirection = worldPosition.xyz - cameraPosition;","	}","#endif","}"].join("\n");var f=["#define RECIPROCAL_PI 0.3183098861837907","#define RECIPROCAL_PI2 0.15915494309189535","#include <map_pars_fragment>","uniform vec3 color;","uniform float opacity;","#ifdef USE_MAP","	varying vec3 vEyeDirection;","#endif","void main() {","#ifdef USE_MAP","#if UP_AXIS == 4","	vec2 texCoord = vec2(atan(vEyeDirection.x, vEyeDirection.y), acos(-vEyeDirection.z / length(vEyeDirection))) * vec2(RECIPROCAL_PI2, RECIPROCAL_PI);","#else","	vec2 texCoord = vec2(atan(vEyeDirection.z, vEyeDirection.x), acos(-vEyeDirection.y / length(vEyeDirection))) * vec2(RECIPROCAL_PI2, RECIPROCAL_PI);","#endif","	vec4 mapColor = vec4(texture2D(map, texCoord).rgb, opacity);","	mapColor.rgb *= color;","#else","	discard;","	vec4 mapColor = vec4(0.0);","#endif","	gl_FragColor = mapColor;","}"].join("\n");function S(p){p=p||{};THREE.ShaderMaterial.call(this,{type:"SphericalMapMaterial",uniforms:{map:{value:p.map||null},color:{value:p.color||new THREE.Color(1,1,1)},opacity:{value:p.opacity!==undefined?p.opacity:1}},defines:{UP_AXIS:p.upAxis!==undefined?p.upAxis:2},vertexShader:v,fragmentShader:f,depthTest:false,depthWrite:false,blending:THREE.CustomBlending});Object.defineProperties(this,{map:{enumerable:true,get:function(){return this.uniforms.map.value;},set:function(a){this.uniforms.map.value=a;}},color:{enumerable:true,get:function(){return this.uniforms.color.value;},set:function(a){this.uniforms.color.value=a;}},opacity:{enumerable:true,get:function(){return this.uniforms.opacity.value;},set:function(a){this.uniforms.opacity.value=a;}},upAxis:{enumerable:true,get:function(){return this.defines.UP_AXIS;},set:function(a){this.defines.UP_AXIS=a;this.needsUpdate=true;}}});}S.prototype=Object.assign(Object.create(THREE.ShaderMaterial.prototype),{constructor:S});S.prototype.isSphericalMapMaterial=true;S.prototype.copy=function(s){THREE.ShaderMaterial.prototype.copy.call(this,s);this.map=s.map;this.color.copy(s.color);return this;};return S;});
