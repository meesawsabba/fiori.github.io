//@ui5-bundle sap/ushell_abap/bootstrap/evo/core-min-0.js
/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/m/OverflowToolbarAssociativePopoverRenderer',['./PopoverRenderer','sap/ui/core/Renderer'],function(P,R){"use strict";var O=R.extend(P);O.apiVersion=2;return O;},true);
sap.ui.predefine('sap/ui/base/ManagedObjectObserver',['sap/ui/base/Object','sap/ui/base/ManagedObject','sap/ui/base/EventProvider',"sap/base/util/array/uniqueSort",'sap/base/util/deepExtend'],function(B,M,E,u,d){"use strict";var a=B.extend("sap.ui.base.ManagedObjectObserver",{constructor:function(C){if(!C&&typeof C!=="function"){throw new Error("Missing callback function in ManagedObjectObserver constructor");}this._fnCallback=C;}});a.prototype.observe=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but observe was called for "+i);}p(i,C);c(i,this,C);};a.prototype.unobserve=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but unobserve was called for "+i);}if(C){p(i,C);}r(i,this,C);};a.prototype.isObserved=function(i,C){if(!(i instanceof M)){if(i==null){return false;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but isObserved was called for "+i);}return e(i,this,C);};a.prototype.disconnect=function(){f(this);};a.prototype.getConfiguration=function(i){return g(i,this);};var O={},t=Object.create(null);O.propertyChange=function(i,n,v,N){h("properties",i,n,function(){return{type:"property",old:v,current:N};});};O.aggregationChange=function(i,n,s,v){h("aggregations",i,n,function(){return{type:"aggregation",mutation:s,children:Array.isArray(v)?v:null,child:!Array.isArray(v)?v:null};});};O.parentChange=function(i,n,s,P){h("parent",i,n,function(){return{type:"parent",mutation:s,parent:P};});var q=s==="unset"?"remove":"insert";O.aggregationChange(P,n,q,i);};O.associationChange=function(i,n,s,I){h("associations",i,n,function(){return{type:"association",mutation:s,ids:I};});};O.eventChange=function(i,n,s,L,F,D){h("events",i,n,function(){return{type:"event",mutation:s,listener:L,func:F,data:D};});};O.bindingChange=function(i,n,s,q,v){h("bindings",i,n,function(){return{type:"binding",mutation:s,bindingInfo:q,memberType:v};});};O.objectDestroyed=function(i){h("destroy",i,null,function(){return{type:"destroy"};});var I=i.getId();if(t[I]){i.detachEvent("EventHandlerChange",H);delete t[I];}delete i._observer;};function h(T,n,N,C){var I=n.getId(),q=t[I];if(q){var s;for(var i=0;i<q.listeners.length;i++){if(b(q.configurations[i],T,N)){if(!s){s=C();s.name=N;s.object=n;}var L=q.listeners[i];L._fnCallback(s);}}}}function b(C,T,n){if(C==null||!T){return false;}if(T!="destroy"&&T!="parent"&&!n){return false;}return C[T]===true||(Array.isArray(C[T])&&C[T].indexOf(n)>-1);}function c(T,L,C){j(T,L,C,false);}function g(T,L){var i=T.getId();var n=t[i];if(n&&n.listeners){var I=n.listeners.indexOf(L);if(I>=0){var C=d({},n.configurations[I]);return C;}}return null;}function r(T,L,C){C=C||g(T,L);j(T,L,C,true);}function e(T,L,C){var i=T.getId(),n=t[i];C=C||g(T,L);if(!n){return false;}var I=n.listeners.indexOf(L);if(I===-1){return false;}else{return m(n.configurations[I].properties,C.properties)&&m(n.configurations[I].aggregations,C.aggregations)&&m(n.configurations[I].associations,C.associations)&&m(n.configurations[I].bindings,C.bindings)&&m(n.configurations[I].events,C.events)&&o(n.configurations[I].destroy,C.destroy)&&o(n.configurations[I].parent,C.parent);}}function f(L){for(var n in t){var T=t[n];for(var i=0;i<T.listeners.length;i++){if(T.listeners[i]===L){T.listeners.splice(i,1);T.configurations.splice(i,1);}}if(T.listeners&&T.listeners.length===0){delete t[n];T.object._observer=undefined;}}}function j(T,L,C,R){var i=T.getId(),n=t[i],q,I;if(R){if(!n){return;}I=n.listeners.indexOf(L);if(I>=0){q=n.configurations[I];}}else{if(!n){n=t[i]={listeners:[],configurations:[],object:T};}I=n.listeners.indexOf(L);if(I===-1){n.listeners.push(L);n.configurations.push(C);}else{q=n.configurations[I];}}if(q){q.properties=q.properties||[];l(q.properties,C.properties,R);q.aggregations=q.aggregations||[];l(q.aggregations,C.aggregations,R);q.associations=q.associations||[];l(q.associations,C.associations,R);q.bindings=q.bindings||[];l(q.bindings,C.bindings,R);q.events=q.events||[];l(q.events,C.events,R);if(C.destroy!=null){if(R){delete q.destroy;}else{q.destroy=C.destroy;}}if(C.parent!=null){if(R){delete q.parent;}else{q.parent=C.parent;}}}var s=k(T,"events");if(T._observer&&R){if(!s&&E.hasListener(T,"EventHandlerChange",H)){T.detachEvent("EventHandlerChange",H);}if(!s&&!k(T,"properties")&&!k(T,"aggregations")&&!k(T,"associations")&&!k(T,"destroy")&&!k(T,"parent")&&!k(T,"bindings")){delete T._observer;delete t[i];}}else if(!T._observer&&!R){if(s&&!E.hasListener(T,"EventHandlerChange",H)){T.attachEvent("EventHandlerChange",H);}T._observer=O;}}function k(T,s){var i=T.getId(),n=t[i];if(n){var C=n.configurations.filter(function(q){return q.hasOwnProperty(s)&&q[s]&&(q[s]===true||q[s].length>0);});return C.length>0;}return false;}function H(i){var T=i.getSource(),s=i.mParameters.EventId;if(T.getMetadata().hasEvent(s)){if(i.mParameters.type==="listenerAttached"){O.eventChange(T,s,"insert",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}else if(i.mParameters.type==="listenerDetached"){O.eventChange(T,s,"remove",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}}}function l(n,A,R){if(!A){return;}for(var i=0;i<A.length;i++){var I=n.indexOf(A[i]);if(I>-1&&R){n.splice(I,1);}else if(I===-1&&!R){n.push(A[i]);}}}function m(F,s){if(!Array.isArray(s)||s.length==0){return true;}if(!Array.isArray(F)||F.length==0){return false;}var U=u(F.concat(s));return F.length===U.length;}function o(i,C){if(C==null){return true;}return i===C;}function p(i,C){var n=i.getMetadata(),P=Object.keys(n.getAllProperties()),A=Object.keys(n.getAllAggregations()),q=Object.keys(n.getAllAssociations()),s=u(P.concat(A)),v=Object.keys(n.getAllEvents());C.properties=C.properties===true?P:C.properties;C.aggregations=C.aggregations===true?A:C.aggregations;C.associations=C.associations===true?q:C.associations;C.bindings=C.bindings===true?s:C.bindings;C.events=C.events===true?v:C.events;C.destroy=(C.destroy==null)?false:C.destroy;C.parent=(C.parent==null)?false:C.parent;}return a;});
sap.ui.predefine('sap/ui/model/base/ManagedObjectModel',['../json/JSONModel','../json/JSONPropertyBinding','../json/JSONListBinding','sap/ui/base/ManagedObject','sap/ui/base/ManagedObjectObserver','../Context','../ChangeReason',"sap/base/util/uid","sap/base/Log","sap/base/util/isPlainObject","sap/base/util/deepClone"],function(J,a,b,M,c,C,d,u,L,e,f){"use strict";var g="@custom",I="--";function _(n,o,A,O){var p=A.get(o)||[],q,r;if(p&&!Array.isArray(p)&&!A.multiple){p=[p];}for(var i=0;i<p.length;i++){q=p[i];if(!(q instanceof M)){continue;}r=true;if(O){n._oObserver.observe(q,{properties:true,aggregations:true});}else{n._oObserver.unobserve(q,{properties:true,aggregations:true});}var s=q.getMetadata().getAllAggregations();for(var K in s){_(n,q,s[K],O);}}if(r){var K=o.getId()+"/@"+A.name;if(O){if(!n._mObservedCount.aggregations[K]){n._mObservedCount.aggregations[K]=0;}n._mObservedCount.aggregations[K]++;}else{delete n._mObservedCount.aggregations[K];}}}function h(n){var s,i=n.length-1,p=[];while(!(n[i].node instanceof M)){if(s){p.splice(0,0,s);}s=n[i].path;i--;}return[n[i].node,n[i+1],p,s];}function j(o){var D="",p;var t=typeof o;if(o==null||(t!="object"&&t!="function")){D=o;}else if(e(o)){D=JSON.stringify(o);}else if(o instanceof M){D=o.getId();for(p in o.mProperties){D=D+"$"+j(o.mProperties[p]);}}else if(Array.isArray(o)){for(var i=0;o.length;i++){D=D+"$"+j(o);}}else{L.warning("Could not stringify object "+o);D="$";}return D;}var k=b.extend("sap.ui.model.base.ManagedObjectModelAggregationBinding",{constructor:function(){b.apply(this,arguments);this._getOriginOfManagedObjectModelBinding();},_mightBeAffectedByChangesInside:function(o){while(o){if(o.getParent()===this._oOriginMO){return true;}o=o.getParent();}return false;},getEntryKey:function(o){var O=o.getObject();if(O instanceof M){return O.getId();}return b.prototype.getEntryKey.apply(this,arguments);},getEntryData:function(o){var O=o.getObject();if(O instanceof M){return j(O);}return b.prototype.getEntryData.apply(this,arguments);},_getContexts:function(s,i){var S;if(this._oAggregation){var o=this._oOriginMO.getBinding(this._sMember);if(o){var n=o.getModel();S=n.iSizeLimit;}var B=this._oOriginMO.getBindingInfo(this._sMember);if(B&&s>=0&&i&&S&&i>S){var U=false;if(s!=B.startIndex){B.startIndex=s;U=true;}if(i!=B.length){B.length=i;U=true;}if(U){this._oAggregation.update(this._oOriginMO,"change");}}}return b.prototype._getContexts.apply(this,arguments);},_getOriginOfManagedObjectModelBinding:function(){if(!this._oOriginMO){var o=this.oModel,n=[];o._getObject(this.sPath,this.oContext,n);var v=h(n);this._oOriginMO=v[0];this._aPartsInJSON=v[2];this._sMember=v[3];this._oAggregation=this._oOriginMO.getMetadata().getAggregation(this._sMember);}},getLength:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.getLength();}}return b.prototype.getLength.apply(this,arguments);},isLengthFinal:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.isLengthFinal();}}return true;}});var l=a.extend("sap.ui.model.base.ManagedObjectModelPropertyBinding");var m=J.extend("sap.ui.model.base.ManagedObjectModel",{constructor:function(o,D){if(!D&&typeof D!="object"){D={};}D[g]={};this._oObject=o;this._mObservedCount={properties:{},aggregations:{}};this.mListBinding={};J.apply(this,[D]);this._oObserver=new c(this.observerChanges.bind(this));this.setSizeLimit(1000000);}});m.prototype.getAggregation=J.prototype.getProperty;m.prototype.setData=function(D,i){var n={};n[g]=D;J.prototype.setData.apply(this,[n,i]);};m.prototype.getJSON=function(){return JSON.stringify(this.oData[g]);};m.prototype.setProperty=function(p,v,o,A){var r=this.resolve(p,o),n,O,P;if(!r){return false;}if(r.indexOf("/"+g)===0){return J.prototype.setProperty.apply(this,arguments);}n=r.lastIndexOf("/");O=r.substring(0,n||1);P=r.substr(n+1);var N=[],q=this._getObject(O,null,N);if(q){if(q instanceof M){var s=q.getMetadata().getManagedProperty(P);if(s){if(s.get(q)!==v){s.set(q,v);var F=function(B){var p=this.resolve(B.sPath,B.oContext);return p?p.startsWith(r):false;}.bind(this);this.checkUpdate(false,A,F);return true;}}else{L.warning("The setProperty method only supports properties, the path "+r+" does not point to a property",null,"sap.ui.model.base.ManagedObjectModel");}}else if(q[P]!==v){var V=h(N);var t=f(V[1].node),w=V[2];var x=t;for(var i=0;i<w.length;i++){x=x[w[i]];}x[P]=v;var y="/"+P;if(w.length>0){y="/"+w.join("/")+y;}var D=r.lastIndexOf(y);var z=r.substr(0,D);return this.setProperty(z,t,o);}}return false;};m.prototype.addBinding=function(B){J.prototype.addBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");this.mListBinding[A]=B;}B.checkUpdate(false);};m.prototype.removeBinding=function(B){J.prototype.removeBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");delete this.mListBinding[A];}this._observeBeforeEvaluating(B,false);};m.prototype.firePropertyChange=function(p){if(p.reason===d.Binding){p.resolvedPath=this.resolve(p.path,p.context);}J.prototype.firePropertyChange.call(this,p);};m.prototype.bindAggregation=function(p,o,P){return J.prototype.bindProperty.apply(this,arguments);};m.prototype.bindProperty=function(p,o,P){var B=new l(this,p,o,P);return B;};m.prototype.bindList=function(p,o,s,F,P){var B=new k(this,p,o,s,F,P);return B;};m.prototype.getManagedObject=function(p,o){if(p instanceof C){o=p;p=o.getPath();}var O=this.getProperty(p,o);if(O instanceof M){return O;}return null;};m.prototype.getRootObject=function(){return this._oObject;};m.prototype._observePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;if(!this._oObserver.isObserved(o,{properties:[p.name]})){this._oObserver.observe(o,{properties:[p.name]});this._mObservedCount.properties[K]=1;}else{this._mObservedCount.properties[K]++;}};m.prototype._unobservePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;this._mObservedCount.properties[K]--;if(this._mObservedCount.properties[K]==0){this._oObserver.unobserve(o,{properties:[p.name]});delete this._mObservedCount.properties[K];}};m.prototype._observeAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;if(!this._oObserver.isObserved(o,{aggregations:[A.name]})){this._oObserver.observe(o,{aggregations:[A.name]});this._mObservedCount.aggregations[K]=1;_(this,o,A,true);}else{this._mObservedCount.aggregations[K]++;}};m.prototype._unobserveAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;this._mObservedCount.aggregations[K]--;if(this._mObservedCount.aggregations[K]==0){this._oObserver.unobserve(o,{aggregations:[A.name]});delete this._mObservedCount.aggregations[K];}};m.prototype._createId=function(i){var o=this._oObject;if(typeof o.createId==="function"){return o.createId(i);}if(!i){return o.getId()+I+u();}if(i.indexOf(o.getId()+I)!=0){return o.getId()+I+i;}return i;};m.prototype._getSpecialNode=function(n,s,p,P){if(n instanceof M){if(s==="className"){if(n.getMetadata){return n.getMetadata().getName();}else{return typeof n;}}else if(s==="id"){return n.getId();}else if(s==="metadataContexts"){return n._oProviderData;}}else if(s==="binding"&&p&&P){return p.getBinding(P);}else if(s==="bound"&&p&&P){return p.isBound(P);}else if(s==="bindingInfo"&&p&&P){return p.getBindingInfo(P);}else if(Array.isArray(n)){if(s==="length"){return n.length;}else if(s.indexOf("id=")===0){var o=s.substring(3),F=null;for(var i=0;i<n.length;i++){if(n[i].getId()===this._createId(o)||n[i].getId()===o){F=n[i];break;}}return F;}}return null;};m.prototype._getObject=function(p,o,n){var N=this._oObject,r="",t=this;if(n){n.push({path:"/",node:N});}this.aBindings.forEach(function(B){if(!B._bAttached){t._observeBeforeEvaluating(B,true);}});if(typeof p==="string"&&p.indexOf("/")!=0&&!o){return null;}if(o instanceof M){N=o;r=p;}else if(!o||o instanceof C){r=this.resolve(p,o);if(!r){return N;}if(r.indexOf("/"+g)===0){return J.prototype._getObject.apply(this,[p,o]);}}else{N=o;r=p;}if(!N){return null;}var P=r.split("/"),i=0;if(!P[0]){i++;}var q=null,s=null,v;while(N!==null&&P[i]){v=P[i];if(v=="id"){v="@id";}if(v.indexOf("@")===0){N=this._getSpecialNode(N,v.substring(1),q,s);}else if(N instanceof M){var w=N.getMetadata();if(w.isInstanceOf("sap.ui.core.IDScope")&&v.indexOf("#")===0){N=N.byId(v.substring(1));}else{q=N;s=v;var x=w.getManagedProperty(v);if(x){N=x.get(N);}else{var A=w.getManagedAggregation(v);if(A){N=A.get(N);}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}}}}else if(Array.isArray(N)||e(N)){N=N[v];}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}if(n){n.push({path:v,node:N});}i++;}return N;};m.prototype.destroy=function(){for(var n in this._mAggregationObjects){var o=this._mAggregationObjects[n];if(o.object.invalidate.fn){o.object.invalidate=o.object.invalidate.fn;}}J.prototype.destroy.apply(this,arguments);};m.prototype._observeBeforeEvaluating=function(B,o){if(!B.isResolved()){return;}var p=B.getPath();var i=B.getContext(),n=this._oObject,r;if(i instanceof M){n=i;r=p;}else if(!i||i instanceof C){r=this.resolve(p,i);if(!r){return;}if(r.indexOf("/"+g)===0){return;}}else{return;}var P=r.split("/");if(!P[0]){P.shift();}var s=P[0];if(n.getMetadata().isInstanceOf("sap.ui.core.IDScope")&&s.indexOf("#")===0){n=n.byId(s.substring(1));s=P[1];}if(n instanceof M){var N=n.getMetadata(),q=N.getManagedProperty(s);if(q){if(o===true){this._observePropertyChange(n,q);}else if(o===false){this._unobservePropertyChange(n,q);}}else{var A=N.getAggregation(s)||N.getAllPrivateAggregations()[s];if(A){if(o===true){this._observeAggregationChange(n,A);}else if(o===false){this._unobserveAggregationChange(n,A);}}}B._bAttached=o;}};m.prototype.observerChanges=function(o){if(o.type=="aggregation"){var A={};if(o.child instanceof M){A=o.child.getMetadata().getAllAggregations();}if(o.mutation=="insert"){if(o.child instanceof M){this._oObserver.observe(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],true);}if(this.mListBinding[o.name]){var i=this._oObject.getBinding(o.name);var n=this._oObject.getAggregation(o.name);if(i&&i.getCurrentContexts().length!=n.length){return;}}}else{if(o.child instanceof M){this._oObserver.unobserve(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],false);}}}else if(o.type==="property"){this.aBindings.forEach(function(B){if(B._mightBeAffectedByChangesInside&&B._mightBeAffectedByChangesInside(o.object)){B.checkUpdate(true);}});}this.checkUpdate();};m.prototype.checkUpdate=function(F,A,i){if(A){this.bForceUpdate=this.bForceUpdate||F;if(!this.sUpdateTimer){this.fnFilter=this.fnFilter||i;this.sUpdateTimer=setTimeout(function(){this.checkUpdate(this.bForceUpdate,false,this.fnFilter);}.bind(this),0);}else if(this.fnFilter&&this.fnFilter!==i){this.fnFilter=undefined;}return;}F=this.bForceUpdate||F;i=!this.fnFilter||this.fnFilter===i?i:undefined;if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null;this.bForceUpdate=undefined;this.fnFilter=undefined;}var B=this.aBindings.slice(0);B.forEach(function(o){if(!i||i(o)){o.checkUpdate(F);}});};return m;});
/*!
 * @copyright@
 */
sap.ui.predefine('sap/ui/generic/app/navigation/service/SelectionVariant',["sap/fe/navigation/SelectionVariant","./NavError"],function(F,N){"use strict";var S=F.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{constructor:function(s){try{F.apply(this,[s]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getID:function(){return F.prototype.getID.apply(this);},setID:function(i){F.prototype.setID.apply(this,[i]);},setText:function(n){try{F.prototype.setText.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getText:function(){return F.prototype.getText.apply(this);},setParameterContextUrl:function(u){try{F.prototype.setParameterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameterContextUrl:function(){return F.prototype.getParameterContextUrl.apply(this);},getFilterContextUrl:function(){return F.prototype.getFilterContextUrl.apply(this);},setFilterContextUrl:function(u){try{F.prototype.setFilterContextUrl.apply(this,[u]);}catch(e){if(e){throw new N(e._sErrorCode);}}},addParameter:function(n,v){try{F.prototype.addParameter.apply(this,[n,v]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},removeParameter:function(n){try{F.prototype.removeParameter.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},renameParameter:function(n,s){try{F.prototype.renameParameter.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameter:function(n){try{return F.prototype.getParameter.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getParameterNames:function(){return F.prototype.getParameterNames.apply(this);},addSelectOption:function(p,s,o,l,h){try{F.prototype.addSelectOption.apply(this,[p,s,o,l,h]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},removeSelectOption:function(n){try{F.prototype.removeSelectOption.apply(this,[n]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},renameSelectOption:function(n,s){try{F.prototype.renameSelectOption.apply(this,[n,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getSelectOption:function(p){try{return F.prototype.getSelectOption.apply(this,[p]);}catch(e){if(e){throw new N(e._sErrorCode);}}},getSelectOptionsPropertyNames:function(){return F.prototype.getSelectOptionsPropertyNames.apply(this);},getPropertyNames:function(){return F.prototype.getPropertyNames.apply(this);},massAddSelectOption:function(p,s){try{F.prototype.massAddSelectOption.apply(this,[p,s]);return this;}catch(e){if(e){throw new N(e._sErrorCode);}}},getValue:function(n){try{return F.prototype.getValue.apply(this,[n]);}catch(e){if(e){throw new N(e._sErrorCode);}}},isEmpty:function(){return F.prototype.isEmpty.apply(this);},toJSONObject:function(){return F.prototype.toJSONObject.apply(this);},toJSONString:function(){return F.prototype.toJSONString.apply(this);}});return S;},true);
/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash strict include="omit,uniq,uniqBy,uniqWith,intersection,intersectionBy,intersectionWith,pick,pickBy,debounce,throttle,max,min,castArray,curry,merge,mergeWith,toArray,xor,xorBy,xorWith,isNil,difference,differenceBy,differenceWith,flatMap,flatMapDeep,flatMapDepth,isEqual,isEqualWith,without,flatten,flattenDeep,flattenDepth,compact,zipObject,zipObjectDeep,union,unionBy,unionWith"`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Modifications SAP SE or an SAP affiliate company and OpenUI5 contributors. All rights reserved.
 */
sap.ui.predefine('sap/base/util/restricted/_/lodash.custom',function(){'use strict';var u;var V='4.17.21';var L=200;var F='Expected a function';var H='__lodash_hash_undefined__';var M=500;var P='__lodash_placeholder__';var C=1,a=2,b=4;var c=1,d=2;var W=1,f=2,g=4,h=8,i=16,j=32,k=64,l=128,m=256,o=512;var p=800,q=16;var I=1/0,r=9007199254740991,s=1.7976931348623157e+308,N=0/0;var t=4294967295;var w=[['ary',l],['bind',W],['bindKey',f],['curry',h],['curryRight',i],['flip',o],['partial',j],['partialRight',k],['rearg',m]];var v='[object Arguments]',x='[object Array]',y='[object AsyncFunction]',z='[object Boolean]',A='[object Date]',B='[object Error]',D='[object Function]',E='[object GeneratorFunction]',G='[object Map]',J='[object Number]',K='[object Null]',O='[object Object]',Q='[object Promise]',R='[object Proxy]',S='[object RegExp]',T='[object Set]',U='[object String]',X='[object Symbol]',Y='[object Undefined]',Z='[object WeakMap]';var $='[object ArrayBuffer]',_='[object DataView]',a1='[object Float32Array]',b1='[object Float64Array]',c1='[object Int8Array]',d1='[object Int16Array]',e1='[object Int32Array]',f1='[object Uint8Array]',g1='[object Uint8ClampedArray]',h1='[object Uint16Array]',i1='[object Uint32Array]';var j1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k1=/^\w*$/,l1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var m1=/[\\^$.*+?()[\]{}|]/g;var n1=/^\s+/;var o1=/\s/;var p1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,q1=/\{\n\/\* \[wrapped with (.+)\] \*/,r1=/,? & /;var s1=/\\(\\)?/g;var t1=/\w*$/;var u1=/^[-+]0x[0-9a-f]+$/i;var v1=/^0b[01]+$/i;var w1=/^\[object .+?Constructor\]$/;var x1=/^0o[0-7]+$/i;var y1=/^(?:0|[1-9]\d*)$/;var z1='\\ud800-\\udfff',A1='\\u0300-\\u036f',B1='\\ufe20-\\ufe2f',C1='\\u20d0-\\u20ff',D1=A1+B1+C1,E1='\\ufe0e\\ufe0f';var F1='['+z1+']',G1='['+D1+']',H1='\\ud83c[\\udffb-\\udfff]',I1='(?:'+G1+'|'+H1+')',J1='[^'+z1+']',K1='(?:\\ud83c[\\udde6-\\uddff]){2}',L1='[\\ud800-\\udbff][\\udc00-\\udfff]',M1='\\u200d';var N1=I1+'?',O1='['+E1+']?',P1='(?:'+M1+'(?:'+[J1,K1,L1].join('|')+')'+O1+N1+')*',Q1=O1+N1+P1,R1='(?:'+[J1+G1+'?',G1,K1,L1,F1].join('|')+')';var S1=RegExp(H1+'(?='+H1+')|'+R1+Q1,'g');var T1=RegExp('['+M1+z1+D1+E1+']');var U1={};U1[a1]=U1[b1]=U1[c1]=U1[d1]=U1[e1]=U1[f1]=U1[g1]=U1[h1]=U1[i1]=true;U1[v]=U1[x]=U1[$]=U1[z]=U1[_]=U1[A]=U1[B]=U1[D]=U1[G]=U1[J]=U1[O]=U1[S]=U1[T]=U1[U]=U1[Z]=false;var V1={};V1[v]=V1[x]=V1[$]=V1[_]=V1[z]=V1[A]=V1[a1]=V1[b1]=V1[c1]=V1[d1]=V1[e1]=V1[G]=V1[J]=V1[O]=V1[S]=V1[T]=V1[U]=V1[X]=V1[f1]=V1[g1]=V1[h1]=V1[i1]=true;V1[B]=V1[D]=V1[Z]=false;var W1=parseInt;var X1=typeof global=='object'&&global&&global.Object===Object&&global;var Y1=typeof self=='object'&&self&&self.Object===Object&&self;var Z1=X1||Y1||Function('return this')();var $1=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var _1=$1&&typeof module=='object'&&module&&!module.nodeType&&module;var a2=_1&&_1.exports===$1;var b2=a2&&X1.process;var c2=(function(){try{var n=_1&&_1.require&&_1.require('util').types;if(n){return n;}return b2&&b2.binding&&b2.binding('util');}catch(e){}}());var d2=c2&&c2.isMap,e2=c2&&c2.isSet,f2=c2&&c2.isTypedArray;function g2(e,n,_6){switch(_6.length){case 0:return e.call(n);case 1:return e.call(n,_6[0]);case 2:return e.call(n,_6[0],_6[1]);case 3:return e.call(n,_6[0],_6[1],_6[2]);}return e.apply(n,_6);}function h2(e,K7){var n=-1,_6=e==null?0:e.length;while(++n<_6){if(K7(e[n],n,e)===false){break;}}return e;}function i2(e,n){var _6=-1,R7=e==null?0:e.length,S7=0,T7=[];while(++_6<R7){var U7=e[_6];if(n(U7,_6,e)){T7[S7++]=U7;}}return T7;}function j2(e,n){var _6=e==null?0:e.length;return!!_6&&q2(e,n,0)>-1;}function k2(e,n,_6){var R7=-1,S7=e==null?0:e.length;while(++R7<S7){if(_6(n,e[R7])){return true;}}return false;}function l2(e,K7){var n=-1,_6=e==null?0:e.length,R7=Array(_6);while(++n<_6){R7[n]=K7(e[n],n,e);}return R7;}function m2(e,H7){var n=-1,_6=H7.length,R7=e.length;while(++n<_6){e[R7+n]=H7[n];}return e;}function n2(e,n){var _6=-1,R7=e==null?0:e.length;while(++_6<R7){if(n(e[_6],_6,e)){return true;}}return false;}function o2(e){return e.split('');}function p2(e,n,_6,R7){var S7=e.length,T7=_6+(R7?1:-1);while((R7?T7--:++T7<S7)){if(n(e[T7],T7,e)){return T7;}}return-1;}function q2(e,n,_6){return n===n?G2(e,n,_6):p2(e,r2,_6);}function r2(e){return e!==e;}function s2(e){return function(n){return n==null?u:n[e];};}function t2(n,K7){var e=-1,_6=Array(n);while(++e<n){_6[e]=K7(e);}return _6;}function u2(e){return e?e.slice(0,I2(e)+1).replace(n1,''):e;}function v2(e){return function(n){return e(n);};}function w2(e,n){return l2(n,function(_6){return e[_6];});}function x2(e,n){return e.has(n);}function y2(e,n){var _6=e.length,R7=0;while(_6--){if(e[_6]===n){++R7;}}return R7;}function z2(e,n){return e==null?u:e[n];}function A2(e){return T1.test(e);}function B2(e){var n,_6=[];while(!(n=e.next()).done){_6.push(n.value);}return _6;}function C2(U6){var e=-1,n=Array(U6.size);U6.forEach(function(_6,R7){n[++e]=[R7,_6];});return n;}function D2(e,n){return function(_6){return e(n(_6));};}function E2(e,n){var _6=-1,R7=e.length,S7=0,T7=[];while(++_6<R7){var U7=e[_6];if(U7===n||U7===P){e[_6]=P;T7[S7++]=_6;}}return T7;}function F2(e){var n=-1,_6=Array(e.size);e.forEach(function(R7){_6[++n]=R7;});return _6;}function G2(e,n,_6){var R7=_6-1,S7=e.length;while(++R7<S7){if(e[R7]===n){return R7;}}return-1;}function H2(e){return A2(e)?J2(e):o2(e);}function I2(e){var n=e.length;while(n--&&o1.test(e.charAt(n))){}return n;}function J2(e){return e.match(S1)||[];}var K2=Array.prototype,L2=Function.prototype,M2=Object.prototype;var N2=Z1['__core-js_shared__'];var O2=L2.toString;var P2=M2.hasOwnProperty;var Q2=(function(){var e=/[^.]+$/.exec(N2&&N2.keys&&N2.keys.IE_PROTO||'');return e?('Symbol(src)_1.'+e):'';}());var R2=M2.toString;var S2=O2.call(Object);var T2=RegExp('^'+O2.call(P2).replace(m1,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var U2=a2?Z1.Buffer:u,V2=Z1.Symbol,W2=Z1.Uint8Array,X2=U2?U2.allocUnsafe:u,Y2=D2(Object.getPrototypeOf,Object),Z2=Object.create,$2=M2.propertyIsEnumerable,_2=K2.splice,a3=V2?V2.isConcatSpreadable:u,b3=V2?V2.iterator:u,c3=V2?V2.toStringTag:u;var d3=(function(){try{var n=L5(Object,'defineProperty');n({},'',{});return n;}catch(e){}}());var e3=Object.getOwnPropertySymbols,f3=U2?U2.isBuffer:u,g3=D2(Object.keys,Object),h3=Math.max,i3=Math.min,j3=Date.now;var k3=L5(Z1,'DataView'),l3=L5(Z1,'Map'),m3=L5(Z1,'Promise'),n3=L5(Z1,'Set'),o3=L5(Z1,'WeakMap'),p3=L5(Object,'create');var q3=o3&&new o3;var r3={};var s3=s6(k3),t3=s6(l3),u3=s6(m3),v3=s6(n3),w3=s6(o3);var x3=V2?V2.prototype:u,y3=x3?x3.valueOf:u,z3=x3?x3.toString:u;function A3(){}var B3=(function(){function e(){}return function(n){if(!j7(n)){return{};}if(Z2){return Z2(n);}e.prototype=n;var _6=new e;e.prototype=u;return _6;};}());function C3(){}function D3(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=t;this.__views__=[];}D3.prototype=B3(C3.prototype);D3.prototype.constructor=D3;function E3(e){var n=-1,_6=e==null?0:e.length;this.clear();while(++n<_6){var R7=e[n];this.set(R7[0],R7[1]);}}function F3(){this.__data__=p3?p3(null):{};this.size=0;}function G3(e){var n=this.has(e)&&delete this.__data__[e];this.size-=n?1:0;return n;}function H3(e){var n=this.__data__;if(p3){var _6=n[e];return _6===H?u:_6;}return P2.call(n,e)?n[e]:u;}function I3(e){var n=this.__data__;return p3?(n[e]!==u):P2.call(n,e);}function J3(e,n){var _6=this.__data__;this.size+=this.has(e)?0:1;_6[e]=(p3&&n===u)?H:n;return this;}E3.prototype.clear=F3;E3.prototype['delete']=G3;E3.prototype.get=H3;E3.prototype.has=I3;E3.prototype.set=J3;function K3(e){var n=-1,_6=e==null?0:e.length;this.clear();while(++n<_6){var R7=e[n];this.set(R7[0],R7[1]);}}function L3(){this.__data__=[];this.size=0;}function M3(e){var n=this.__data__,_6=g4(n,e);if(_6<0){return false;}var R7=n.length-1;if(_6==R7){n.pop();}else{_2.call(n,_6,1);}--this.size;return true;}function N3(e){var n=this.__data__,_6=g4(n,e);return _6<0?u:n[_6][1];}function O3(e){return g4(this.__data__,e)>-1;}function P3(e,n){var _6=this.__data__,R7=g4(_6,e);if(R7<0){++this.size;_6.push([e,n]);}else{_6[R7][1]=n;}return this;}K3.prototype.clear=L3;K3.prototype['delete']=M3;K3.prototype.get=N3;K3.prototype.has=O3;K3.prototype.set=P3;function Q3(e){var n=-1,_6=e==null?0:e.length;this.clear();while(++n<_6){var R7=e[n];this.set(R7[0],R7[1]);}}function R3(){this.size=0;this.__data__={'hash':new E3,'map':new(l3||K3),'string':new E3};}function S3(e){var n=J5(this,e)['delete'](e);this.size-=n?1:0;return n;}function T3(e){return J5(this,e).get(e);}function U3(e){return J5(this,e).has(e);}function V3(e,n){var _6=J5(this,e),R7=_6.size;_6.set(e,n);this.size+=_6.size==R7?0:1;return this;}Q3.prototype.clear=R3;Q3.prototype['delete']=S3;Q3.prototype.get=T3;Q3.prototype.has=U3;Q3.prototype.set=V3;function W3(H7){var e=-1,n=H7==null?0:H7.length;this.__data__=new Q3;while(++e<n){this.add(H7[e]);}}function X3(e){this.__data__.set(e,H);return this;}function Y3(e){return this.__data__.has(e);}W3.prototype.add=W3.prototype.push=X3;W3.prototype.has=Y3;function Z3(e){var n=this.__data__=new K3(e);this.size=n.size;}function $3(){this.__data__=new K3;this.size=0;}function _3(e){var n=this.__data__,_6=n['delete'](e);this.size=n.size;return _6;}function a4(e){return this.__data__.get(e);}function b4(e){return this.__data__.has(e);}function c4(e,n){var _6=this.__data__;if(_6 instanceof K3){var R7=_6.__data__;if(!l3||(R7.length<L-1)){R7.push([e,n]);this.size=++_6.size;return this;}_6=this.__data__=new Q3(R7);}_6.set(e,n);this.size=_6.size;return this;}Z3.prototype.clear=$3;Z3.prototype['delete']=_3;Z3.prototype.get=a4;Z3.prototype.has=b4;Z3.prototype.set=c4;function d4(e,n){var _6=b7(e),R7=!_6&&a7(e),S7=!_6&&!R7&&e7(e),T7=!_6&&!R7&&!S7&&r7(e),U7=_6||R7||S7||T7,V7=U7?t2(e.length,String):[],W7=V7.length;for(var X7 in e){if((n||P2.call(e,X7))&&!(U7&&(X7=='length'||(S7&&(X7=='offset'||X7=='parent'))||(T7&&(X7=='buffer'||X7=='byteLength'||X7=='byteOffset'))||X5(X7,W7)))){V7.push(X7);}}return V7;}function e4(e,n,_6){if((_6!==u&&!eq(e[n],_6))||(_6===u&&!(n in e))){j4(e,n,_6);}}function f4(e,n,_6){var R7=e[n];if(!(P2.call(e,n)&&eq(R7,_6))||(_6===u&&!(n in e))){j4(e,n,_6);}}function g4(e,n){var _6=e.length;while(_6--){if(eq(e[_6][0],n)){return _6;}}return-1;}function h4(e,n){return e&&k5(n,A7(n),e);}function i4(e,n){return e&&k5(n,B7(n),e);}function j4(e,n,_6){if(n=='__proto__'&&d3){d3(e,n,{'configurable':true,'enumerable':true,'value':_6,'writable':true});}else{e[n]=_6;}}function k4(e,n,_6,R7,S7,T7){var U7,V7=n&C,W7=n&a,X7=n&b;if(_6){U7=S7?_6(e,R7,S7,T7):_6(e);}if(U7!==u){return U7;}if(!j7(e)){return e;}var Y7=b7(e);if(Y7){U7=S5(e);if(!V7){return j5(e,U7);}}else{var Z7=P5(e),$7=Z7==D||Z7==E;if(e7(e)){return b5(e,V7);}if(Z7==O||Z7==v||($7&&!S7)){U7=(W7||$7)?{}:T5(e);if(!V7){return W7?m5(e,i4(U7,e)):l5(e,h4(U7,e));}}else{if(!V1[Z7]){return S7?e:{};}U7=U5(e,Z7,V7);}}T7||(T7=new Z3);var _7=T7.get(e);if(_7){return _7;}T7.set(e,U7);if(o7(e)){e.forEach(function(c8){U7.add(k4(c8,n,_6,c8,e,T7));});}else if(l7(e)){e.forEach(function(c8,R7){U7.set(R7,k4(c8,n,_6,R7,e,T7));});}var a8=X7?(W7?E5:D5):(W7?B7:A7);var b8=Y7?u:a8(e);h2(b8||e,function(c8,R7){if(b8){R7=c8;c8=e[R7];}f4(U7,R7,k4(c8,n,_6,R7,e,T7));});return U7;}function l4(e,H7,K7,n){var _6=-1,R7=j2,S7=true,T7=e.length,U7=[],V7=H7.length;if(!T7){return U7;}if(K7){H7=l2(H7,v2(K7));}if(n){R7=k2;S7=false;}else if(H7.length>=L){R7=x2;S7=false;H7=new W3(H7);}outer:while(++_6<T7){var W7=e[_6],X7=K7==null?W7:K7(W7);W7=(n||W7!==0)?W7:0;if(S7&&X7===X7){var Y7=V7;while(Y7--){if(H7[Y7]===X7){continue outer;}}U7.push(W7);}else if(!R7(H7,X7,n)){U7.push(W7);}}return U7;}var m4=o5(q4);function n4(e,K7,n){var _6=-1,R7=e.length;while(++_6<R7){var S7=e[_6],T7=K7(S7);if(T7!=null&&(U7===u?(T7===T7&&!q7(T7)):n(T7,U7))){var U7=T7,V7=S7;}}return V7;}function o4(e,n,_6,R7,S7){var T7=-1,U7=e.length;_6||(_6=W5);S7||(S7=[]);while(++T7<U7){var V7=e[T7];if(n>0&&_6(V7)){if(n>1){o4(V7,n-1,_6,R7,S7);}else{m2(S7,V7);}}else if(!R7){S7[S7.length]=V7;}}return S7;}var p4=p5();function q4(e,K7){return e&&p4(e,K7,A7);}function r4(e,n){n=a5(n,e);var _6=0,R7=n.length;while(e!=null&&_6<R7){e=e[r6(n[_6++])];}return(_6&&_6==R7)?e:u;}function s4(e,n,_6){var R7=n(e);return b7(e)?R7:m2(R7,_6(e));}function t4(e){if(e==null){return e===u?Y:K;}return(c3&&c3 in Object(e))?M5(e):h6(e);}function u4(e,n){return e>n;}function v4(e,n){return e!=null&&n in Object(e);}function w4(e,K7,n){var _6=n?k2:j2,R7=e[0].length,S7=e.length,T7=S7,U7=Array(S7),V7=Infinity,W7=[];while(T7--){var X7=e[T7];if(T7&&K7){X7=l2(X7,v2(K7));}V7=i3(X7.length,V7);U7[T7]=!n&&(K7||(R7>=120&&X7.length>=120))?new W3(T7&&X7):u;}X7=e[0];var Y7=-1,Z7=U7[0];outer:while(++Y7<R7&&W7.length<V7){var $7=X7[Y7],_7=K7?K7($7):$7;$7=(n||$7!==0)?$7:0;if(!(Z7?x2(Z7,_7):_6(W7,_7,n))){T7=S7;while(--T7){var a8=U7[T7];if(!(a8?x2(a8,_7):_6(e[T7],_7,n))){continue outer;}}if(Z7){Z7.push(_7);}W7.push($7);}}return W7;}function x4(e){return k7(e)&&t4(e)==v;}function y4(e,n,_6,R7,S7){if(e===n){return true;}if(e==null||n==null||(!k7(e)&&!k7(n))){return e!==e&&n!==n;}return z4(e,n,_6,R7,y4,S7);}function z4(e,n,_6,R7,S7,T7){var U7=b7(e),V7=b7(n),W7=U7?x:P5(e),X7=V7?x:P5(n);W7=W7==v?O:W7;X7=X7==v?O:X7;var Y7=W7==O,Z7=X7==O,$7=W7==X7;if($7&&e7(e)){if(!e7(n)){return false;}U7=true;Y7=false;}if($7&&!Y7){T7||(T7=new Z3);return(U7||r7(e))?z5(e,n,_6,R7,S7,T7):A5(e,n,W7,_6,R7,S7,T7);}if(!(_6&c)){var _7=Y7&&P2.call(e,'__wrapped__'),a8=Z7&&P2.call(n,'__wrapped__');if(_7||a8){var b8=_7?e.value():e,c8=a8?n.value():n;T7||(T7=new Z3);return S7(b8,c8,_6,R7,T7);}}if(!$7){return false;}T7||(T7=new Z3);return B5(e,n,_6,R7,S7,T7);}function A4(e){return k7(e)&&P5(e)==G;}function B4(e,n,_6,R7){var S7=_6.length,T7=S7,U7=!R7;if(e==null){return!T7;}e=Object(e);while(S7--){var V7=_6[S7];if((U7&&V7[2])?V7[1]!==e[V7[0]]:!(V7[0]in e)){return false;}}while(++S7<T7){V7=_6[S7];var W7=V7[0],X7=e[W7],Y7=V7[1];if(U7&&V7[2]){if(X7===u&&!(W7 in e)){return false;}}else{var Z7=new Z3;if(R7){var $7=R7(X7,Y7,W7,e,n,Z7);}if(!($7===u?y4(Y7,X7,c|d,R7,Z7):$7)){return false;}}}return true;}function C4(e){if(!j7(e)||a6(e)){return false;}var n=h7(e)?T2:w1;return n.test(s6(e));}function D4(e){return k7(e)&&P5(e)==T;}function E4(e){return k7(e)&&i7(e.length)&&!!U1[t4(e)];}function F4(e){if(typeof e=='function'){return e;}if(e==null){return J7;}if(typeof e=='object'){return b7(e)?L4(e[0],e[1]):K4(e);}return M7(e);}function G4(e){if(!b6(e)){return g3(e);}var n=[];for(var _6 in Object(e)){if(P2.call(e,_6)&&_6!='constructor'){n.push(_6);}}return n;}function H4(e){if(!j7(e)){return g6(e);}var n=b6(e),_6=[];for(var R7 in e){if(!(R7=='constructor'&&(n||!P2.call(e,R7)))){_6.push(R7);}}return _6;}function I4(e,n){return e<n;}function J4(e,K7){var n=-1,_6=c7(e)?Array(e.length):[];m4(e,function(R7,S7,e){_6[++n]=K7(R7,S7,e);});return _6;}function K4(e){var n=K5(e);if(n.length==1&&n[0][2]){return d6(n[0][0],n[0][1]);}return function(_6){return _6===e||B4(_6,e,n);};}function L4(e,n){if(Z5(e)&&c6(n)){return d6(r6(e),n);}return function(_6){var R7=y7(_6,e);return(R7===u&&R7===n)?z7(_6,e):y4(n,R7,c|d);};}function M4(e,n,_6,R7,S7){if(e===n){return;}p4(n,function(T7,U7){S7||(S7=new Z3);if(j7(T7)){N4(e,n,U7,_6,M4,R7,S7);}else{var V7=R7?R7(l6(e,U7),T7,(U7+''),e,n,S7):u;if(V7===u){V7=T7;}e4(e,U7,V7);}},B7);}function N4(e,n,_6,R7,S7,T7,U7){var V7=l6(e,_6),W7=l6(n,_6),X7=U7.get(W7);if(X7){e4(e,_6,X7);return;}var Y7=T7?T7(V7,W7,(_6+''),e,n,U7):u;var Z7=Y7===u;if(Z7){var $7=b7(W7),_7=!$7&&e7(W7),a8=!$7&&!_7&&r7(W7);Y7=W7;if($7||_7||a8){if(b7(V7)){Y7=V7;}else if(d7(V7)){Y7=j5(V7);}else if(_7){Z7=false;Y7=b5(W7,true);}else if(a8){Z7=false;Y7=g5(W7,true);}else{Y7=[];}}else if(n7(W7)||a7(W7)){Y7=V7;if(a7(V7)){Y7=w7(V7);}else if(!j7(V7)||h7(V7)){Y7=T5(W7);}}else{Z7=false;}}if(Z7){U7.set(W7,Y7);S7(Y7,W7,R7,T7,U7);U7['delete'](W7);}e4(e,_6,Y7);}function O4(e,n){return P4(e,n,function(_6,R7){return z7(e,R7);});}function P4(e,n,_6){var R7=-1,S7=n.length,T7={};while(++R7<S7){var U7=n[R7],V7=r4(e,U7);if(_6(V7,U7)){S4(T7,a5(U7,e),V7);}}return T7;}function Q4(e){return function(n){return r4(n,e);};}function R4(e,n){return n6(i6(e,n,J7),e+'');}function S4(e,n,_6,R7){if(!j7(e)){return e;}n=a5(n,e);var S7=-1,T7=n.length,U7=T7-1,V7=e;while(V7!=null&&++S7<T7){var W7=r6(n[S7]),X7=_6;if(W7==='__proto__'||W7==='constructor'||W7==='prototype'){return e;}if(S7!=U7){var Y7=V7[W7];X7=R7?R7(Y7,W7,V7):u;if(X7===u){X7=j7(Y7)?Y7:(X5(n[S7+1])?[]:{});}}f4(V7,W7,X7);V7=V7[W7];}return e;}var T4=!q3?J7:function(e,n){q3.set(e,n);return e;};var U4=!d3?J7:function(e,n){return d3(e,'toString',{'configurable':true,'enumerable':false,'value':I7(n),'writable':true});};function V4(e,n,_6){var R7=-1,S7=e.length;if(n<0){n=-n>S7?0:(S7+n);}_6=_6>S7?S7:_6;if(_6<0){_6+=S7;}S7=n>_6?0:((_6-n)>>>0);n>>>=0;var T7=Array(S7);while(++R7<S7){T7[R7]=e[R7+n];}return T7;}function W4(e){if(typeof e=='string'){return e;}if(b7(e)){return l2(e,W4)+'';}if(q7(e)){return z3?z3.call(e):'';}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function X4(e,K7,n){var _6=-1,R7=j2,S7=e.length,T7=true,U7=[],V7=U7;if(n){T7=false;R7=k2;}else if(S7>=L){var W7=K7?null:w5(e);if(W7){return F2(W7);}T7=false;R7=x2;V7=new W3;}else{V7=K7?[]:U7;}outer:while(++_6<S7){var X7=e[_6],Y7=K7?K7(X7):X7;X7=(n||X7!==0)?X7:0;if(T7&&Y7===Y7){var Z7=V7.length;while(Z7--){if(V7[Z7]===Y7){continue outer;}}if(K7){V7.push(Y7);}U7.push(X7);}else if(!R7(V7,Y7,n)){if(V7!==U7){V7.push(Y7);}U7.push(X7);}}return U7;}function Y4(e,n){n=a5(n,e);e=j6(e,n);return e==null||delete e[r6(E6(n))];}function Z4(e,K7,n){var _6=e.length;if(_6<2){return _6?X4(e[0]):[];}var R7=-1,S7=Array(_6);while(++R7<_6){var T7=e[R7],U7=-1;while(++U7<_6){if(U7!=R7){S7[R7]=l4(S7[R7]||T7,e[U7],K7,n);}}}return X4(o4(S7,1),K7,n);}function $4(e,H7,n){var _6=-1,R7=e.length,S7=H7.length,T7={};while(++_6<R7){var U7=_6<S7?H7[_6]:u;n(T7,e[_6],U7);}return T7;}function _4(e){return d7(e)?e:[];}function a5(e,n){if(b7(e)){return e;}return Z5(e,n)?[e]:q6(x7(e));}function b5(e,n){if(n){return e.slice();}var _6=e.length,R7=X2?X2(_6):new e.constructor(_6);e.copy(R7);return R7;}function c5(e){var n=new e.constructor(e.byteLength);new W2(n).set(new W2(e));return n;}function d5(e,n){var _6=n?c5(e.buffer):e.buffer;return new e.constructor(_6,e.byteOffset,e.byteLength);}function e5(e){var n=new e.constructor(e.source,t1.exec(e));n.lastIndex=e.lastIndex;return n;}function f5(e){return y3?Object(y3.call(e)):{};}function g5(e,n){var _6=n?c5(e.buffer):e.buffer;return new e.constructor(_6,e.byteOffset,e.length);}function h5(e,n,_6,R7){var S7=-1,T7=e.length,U7=_6.length,V7=-1,W7=n.length,X7=h3(T7-U7,0),Y7=Array(W7+X7),Z7=!R7;while(++V7<W7){Y7[V7]=n[V7];}while(++S7<U7){if(Z7||S7<T7){Y7[_6[S7]]=e[S7];}}while(X7--){Y7[V7++]=e[S7++];}return Y7;}function i5(e,n,_6,R7){var S7=-1,T7=e.length,U7=-1,V7=_6.length,W7=-1,X7=n.length,Y7=h3(T7-V7,0),Z7=Array(Y7+X7),$7=!R7;while(++S7<Y7){Z7[S7]=e[S7];}var _7=S7;while(++W7<X7){Z7[_7+W7]=n[W7];}while(++U7<V7){if($7||S7<T7){Z7[_7+_6[U7]]=e[S7++];}}return Z7;}function j5(e,n){var _6=-1,R7=e.length;n||(n=Array(R7));while(++_6<R7){n[_6]=e[_6];}return n;}function k5(e,n,_6,R7){var S7=!_6;_6||(_6={});var T7=-1,U7=n.length;while(++T7<U7){var V7=n[T7];var W7=R7?R7(_6[V7],e[V7],V7,_6,e):u;if(W7===u){W7=e[V7];}if(S7){j4(_6,V7,W7);}else{f4(_6,V7,W7);}}return _6;}function l5(e,n){return k5(e,N5(e),n);}function m5(e,n){return k5(e,O5(e),n);}function n5(e){return R4(function(n,_6){var R7=-1,S7=_6.length,T7=S7>1?_6[S7-1]:u,U7=S7>2?_6[2]:u;T7=(e.length>3&&typeof T7=='function')?(S7--,T7):u;if(U7&&Y5(_6[0],_6[1],U7)){T7=S7<3?u:T7;S7=1;}n=Object(n);while(++R7<S7){var V7=_6[R7];if(V7){e(n,V7,R7,T7);}}return n;});}function o5(e,n){return function(_6,K7){if(_6==null){return _6;}if(!c7(_6)){return e(_6,K7);}var R7=_6.length,S7=n?R7:-1,T7=Object(_6);while((n?S7--:++S7<R7)){if(K7(T7[S7],S7,T7)===false){break;}}return _6;};}function p5(e){return function(n,K7,_6){var R7=-1,S7=Object(n),T7=_6(n),U7=T7.length;while(U7--){var V7=T7[e?U7:++R7];if(K7(S7[V7],V7,S7)===false){break;}}return n;};}function q5(e,n,_6){var R7=n&W,S7=r5(e);function T7(){var fn=(this&&this!==Z1&&this instanceof T7)?S7:e;return fn.apply(R7?_6:this,arguments);}return T7;}function r5(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var _6=B3(e.prototype),R7=e.apply(_6,n);return j7(R7)?R7:_6;};}function s5(e,n,_6){var R7=r5(e);function S7(){var T7=arguments.length,U7=Array(T7),V7=T7,W7=H5(S7);while(V7--){U7[V7]=arguments[V7];}var X7=(T7<3&&U7[0]!==W7&&U7[T7-1]!==W7)?[]:E2(U7,W7);T7-=X7.length;if(T7<_6){return v5(e,n,t5,S7.placeholder,u,U7,X7,u,u,_6-T7);}var fn=(this&&this!==Z1&&this instanceof S7)?R7:e;return g2(fn,this,U7);}return S7;}function t5(e,n,_6,R7,S7,T7,U7,V7,W7,X7){var Y7=n&l,Z7=n&W,$7=n&f,_7=n&(h|i),a8=n&o,b8=$7?u:r5(e);function c8(){var d8=arguments.length,e8=Array(d8),f8=d8;while(f8--){e8[f8]=arguments[f8];}if(_7){var g8=H5(c8),h8=y2(e8,g8);}if(R7){e8=h5(e8,R7,S7,_7);}if(T7){e8=i5(e8,T7,U7,_7);}d8-=h8;if(_7&&d8<X7){var i8=E2(e8,g8);return v5(e,n,t5,c8.placeholder,_6,e8,i8,V7,W7,X7-d8);}var j8=Z7?_6:this,fn=$7?j8[e]:e;d8=e8.length;if(V7){e8=k6(e8,V7);}else if(a8&&d8>1){e8.reverse();}if(Y7&&W7<d8){e8.length=W7;}if(this&&this!==Z1&&this instanceof c8){fn=b8||r5(fn);}return fn.apply(j8,e8);}return c8;}function u5(e,n,_6,R7){var S7=n&W,T7=r5(e);function U7(){var V7=-1,W7=arguments.length,X7=-1,Y7=R7.length,Z7=Array(Y7+W7),fn=(this&&this!==Z1&&this instanceof U7)?T7:e;while(++X7<Y7){Z7[X7]=R7[X7];}while(W7--){Z7[X7++]=arguments[++V7];}return g2(fn,S7?_6:this,Z7);}return U7;}function v5(e,n,_6,R7,S7,T7,U7,V7,W7,X7){var Y7=n&h,Z7=Y7?U7:u,$7=Y7?u:U7,_7=Y7?T7:u,a8=Y7?u:T7;n|=(Y7?j:k);n&=~(Y7?k:j);if(!(n&g)){n&=~(W|f);}var b8=[e,n,S7,_7,Z7,a8,$7,V7,W7,X7];var c8=_6.apply(u,b8);if(_5(e)){m6(c8,b8);}c8.placeholder=R7;return o6(c8,e,n);}var w5=!(n3&&(1/F2(new n3([,-0]))[1])==I)?L7:function(H7){return new n3(H7);};function x5(e,n,_6,R7,S7,T7,U7,V7){var W7=n&f;if(!W7&&typeof e!='function'){throw new TypeError(F);}var X7=R7?R7.length:0;if(!X7){n&=~(j|k);R7=S7=u;}U7=U7===u?U7:h3(u7(U7),0);V7=V7===u?V7:u7(V7);X7-=S7?S7.length:0;if(n&k){var Y7=R7,Z7=S7;R7=S7=u;}var $7=W7?u:F5(e);var _7=[e,n,_6,R7,S7,Y7,Z7,T7,U7,V7];if($7){f6(_7,$7);}e=_7[0];n=_7[1];_6=_7[2];R7=_7[3];S7=_7[4];V7=_7[9]=_7[9]===u?(W7?0:e.length):h3(_7[9]-X7,0);if(!V7&&n&(h|i)){n&=~(h|i);}if(!n||n==W){var a8=q5(e,n,_6);}else if(n==h||n==i){a8=s5(e,n,V7);}else if((n==j||n==(W|j))&&!S7.length){a8=u5(e,n,_6,R7);}else{a8=t5.apply(u,_7);}var b8=$7?T4:m6;return o6(b8(a8,_7),e,n);}function y5(e){return n7(e)?u:e;}function z5(e,n,_6,R7,S7,T7){var U7=_6&c,V7=e.length,W7=n.length;if(V7!=W7&&!(U7&&W7>V7)){return false;}var X7=T7.get(e);var Y7=T7.get(n);if(X7&&Y7){return X7==n&&Y7==e;}var Z7=-1,$7=true,_7=(_6&d)?new W3:u;T7.set(e,n);T7.set(n,e);while(++Z7<V7){var a8=e[Z7],b8=n[Z7];if(R7){var c8=U7?R7(b8,a8,Z7,n,e,T7):R7(a8,b8,Z7,e,n,T7);}if(c8!==u){if(c8){continue;}$7=false;break;}if(_7){if(!n2(n,function(b8,d8){if(!x2(_7,d8)&&(a8===b8||S7(a8,b8,_6,R7,T7))){return _7.push(d8);}})){$7=false;break;}}else if(!(a8===b8||S7(a8,b8,_6,R7,T7))){$7=false;break;}}T7['delete'](e);T7['delete'](n);return $7;}function A5(e,n,_6,R7,S7,T7,U7){switch(_6){case _:if((e.byteLength!=n.byteLength)||(e.byteOffset!=n.byteOffset)){return false;}e=e.buffer;n=n.buffer;case $:if((e.byteLength!=n.byteLength)||!T7(new W2(e),new W2(n))){return false;}return true;case z:case A:case J:return eq(+e,+n);case B:return e.name==n.name&&e.message==n.message;case S:case U:return e==(n+'');case G:var V7=C2;case T:var W7=R7&c;V7||(V7=F2);if(e.size!=n.size&&!W7){return false;}var X7=U7.get(e);if(X7){return X7==n;}R7|=d;U7.set(e,n);var Y7=z5(V7(e),V7(n),R7,S7,T7,U7);U7['delete'](e);return Y7;case X:if(y3){return y3.call(e)==y3.call(n);}}return false;}function B5(e,n,_6,R7,S7,T7){var U7=_6&c,V7=D5(e),W7=V7.length,X7=D5(n),Y7=X7.length;if(W7!=Y7&&!U7){return false;}var Z7=W7;while(Z7--){var $7=V7[Z7];if(!(U7?$7 in n:P2.call(n,$7))){return false;}}var _7=T7.get(e);var a8=T7.get(n);if(_7&&a8){return _7==n&&a8==e;}var b8=true;T7.set(e,n);T7.set(n,e);var c8=U7;while(++Z7<W7){$7=V7[Z7];var d8=e[$7],e8=n[$7];if(R7){var f8=U7?R7(e8,d8,$7,n,e,T7):R7(d8,e8,$7,e,n,T7);}if(!(f8===u?(d8===e8||S7(d8,e8,_6,R7,T7)):f8)){b8=false;break;}c8||(c8=$7=='constructor');}if(b8&&!c8){var g8=e.constructor,h8=n.constructor;if(g8!=h8&&('constructor'in e&&'constructor'in n)&&!(typeof g8=='function'&&g8 instanceof g8&&typeof h8=='function'&&h8 instanceof h8)){b8=false;}}T7['delete'](e);T7['delete'](n);return b8;}function C5(e){return n6(i6(e,u,y6),e+'');}function D5(e){return s4(e,A7,N5);}function E5(e){return s4(e,B7,O5);}var F5=!q3?L7:function(e){return q3.get(e);};function G5(e){var n=(e.name+''),_6=r3[n],R7=P2.call(r3,n)?_6.length:0;while(R7--){var S7=_6[R7],T7=S7.func;if(T7==null||T7==e){return S7.name;}}return n;}function H5(e){var n=P2.call(A3,'placeholder')?A3:e;return n.placeholder;}function I5(){var e=A3.iteratee||K7;e=e===K7?F4:e;return arguments.length?e(arguments[0],arguments[1]):e;}function J5(U6,e){var n=U6.__data__;return $5(e)?n[typeof e=='string'?'string':'hash']:n.map;}function K5(e){var n=A7(e),_6=n.length;while(_6--){var R7=n[_6],S7=e[R7];n[_6]=[R7,S7,c6(S7)];}return n;}function L5(e,n){var _6=z2(e,n);return C4(_6)?_6:u;}function M5(n){var _6=P2.call(n,c3),R7=n[c3];try{n[c3]=u;var S7=true;}catch(e){}var T7=R2.call(n);if(S7){if(_6){n[c3]=R7;}else{delete n[c3];}}return T7;}var N5=!e3?N7:function(e){if(e==null){return[];}e=Object(e);return i2(e3(e),function(n){return $2.call(e,n);});};var O5=!e3?N7:function(e){var n=[];while(e){m2(n,N5(e));e=Y2(e);}return n;};var P5=t4;if((k3&&P5(new k3(new ArrayBuffer(1)))!=_)||(l3&&P5(new l3)!=G)||(m3&&P5(m3.resolve())!=Q)||(n3&&P5(new n3)!=T)||(o3&&P5(new o3)!=Z)){P5=function(e){var n=t4(e),_6=n==O?e.constructor:u,R7=_6?s6(_6):'';if(R7){switch(R7){case s3:return _;case t3:return G;case u3:return Q;case v3:return T;case w3:return Z;}}return n;};}function Q5(e){var n=e.match(q1);return n?n[1].split(r1):[];}function R5(e,n,_6){n=a5(n,e);var R7=-1,S7=n.length,T7=false;while(++R7<S7){var U7=r6(n[R7]);if(!(T7=e!=null&&_6(e,U7))){break;}e=e[U7];}if(T7||++R7!=S7){return T7;}S7=e==null?0:e.length;return!!S7&&i7(S7)&&X5(U7,S7)&&(b7(e)||a7(e));}function S5(e){var n=e.length,_6=new e.constructor(n);if(n&&typeof e[0]=='string'&&P2.call(e,'index')){_6.index=e.index;_6.input=e.input;}return _6;}function T5(e){return(typeof e.constructor=='function'&&!b6(e))?B3(Y2(e)):{};}function U5(e,n,_6){var R7=e.constructor;switch(n){case $:return c5(e);case z:case A:return new R7(+e);case _:return d5(e,_6);case a1:case b1:case c1:case d1:case e1:case f1:case g1:case h1:case i1:return g5(e,_6);case G:return new R7;case J:case U:return new R7(e);case S:return e5(e);case T:return new R7;case X:return f5(e);}}function V5(e,n){var _6=n.length;if(!_6){return e;}var R7=_6-1;n[R7]=(_6>1?'& ':'')+n[R7];n=n.join(_6>2?', ':' ');return e.replace(p1,'{\n/* [wrapped with '+n+'] */\n');}function W5(e){return b7(e)||a7(e)||!!(a3&&e&&e[a3]);}function X5(e,n){var _6=typeof e;n=n==null?r:n;return!!n&&(_6=='number'||(_6!='symbol'&&y1.test(e)))&&(e>-1&&e%1==0&&e<n);}function Y5(e,n,_6){if(!j7(_6)){return false;}var R7=typeof n;if(R7=='number'?(c7(_6)&&X5(n,_6.length)):(R7=='string'&&n in _6)){return eq(_6[n],e);}return false;}function Z5(e,n){if(b7(e)){return false;}var _6=typeof e;if(_6=='number'||_6=='symbol'||_6=='boolean'||e==null||q7(e)){return true;}return k1.test(e)||!j1.test(e)||(n!=null&&e in Object(n));}function $5(e){var n=typeof e;return(n=='string'||n=='number'||n=='symbol'||n=='boolean')?(e!=='__proto__'):(e===null);}function _5(e){var n=G5(e),_6=A3[n];if(typeof _6!='function'||!(n in D3.prototype)){return false;}if(e===_6){return true;}var R7=F5(_6);return!!R7&&e===R7[0];}function a6(e){return!!Q2&&(Q2 in e);}function b6(e){var n=e&&e.constructor,_6=(typeof n=='function'&&n.prototype)||M2;return e===_6;}function c6(e){return e===e&&!j7(e);}function d6(e,n){return function(_6){if(_6==null){return false;}return _6[e]===n&&(n!==u||(e in Object(_6)));};}function e6(e){var n=Y6(e,function(R7){if(_6.size===M){_6.clear();}return R7;});var _6=n.cache;return n;}function f6(e,n){var _6=e[1],R7=n[1],S7=_6|R7,T7=S7<(W|f|l);var U7=((R7==l)&&(_6==h))||((R7==l)&&(_6==m)&&(e[7].length<=n[8]))||((R7==(l|m))&&(n[7].length<=n[8])&&(_6==h));if(!(T7||U7)){return e;}if(R7&W){e[2]=n[2];S7|=_6&W?0:g;}var V7=n[3];if(V7){var W7=e[3];e[3]=W7?h5(W7,V7,n[4]):V7;e[4]=W7?E2(e[3],P):n[4];}V7=n[5];if(V7){W7=e[5];e[5]=W7?i5(W7,V7,n[6]):V7;e[6]=W7?E2(e[5],P):n[6];}V7=n[7];if(V7){e[7]=V7;}if(R7&l){e[8]=e[8]==null?n[8]:i3(e[8],n[8]);}if(e[9]==null){e[9]=n[9];}e[0]=n[0];e[1]=S7;return e;}function g6(e){var n=[];if(e!=null){for(var _6 in Object(e)){n.push(_6);}}return n;}function h6(e){return R2.call(e);}function i6(e,n,_6){n=h3(n===u?(e.length-1):n,0);return function(){var R7=arguments,S7=-1,T7=h3(R7.length-n,0),U7=Array(T7);while(++S7<T7){U7[S7]=R7[n+S7];}S7=-1;var V7=Array(n+1);while(++S7<n){V7[S7]=R7[S7];}V7[n]=_6(U7);return g2(e,this,V7);};}function j6(e,n){return n.length<2?e:r4(e,V4(n,0,-1));}function k6(e,n){var _6=e.length,R7=i3(n.length,_6),S7=j5(e);while(R7--){var T7=n[R7];e[R7]=X5(T7,_6)?S7[T7]:u;}return e;}function l6(e,n){if(n==='constructor'&&typeof e[n]==='function'){return;}if(n=='__proto__'){return;}return e[n];}var m6=p6(T4);var n6=p6(U4);function o6(e,n,_6){var R7=(n+'');return n6(e,V5(R7,t6(Q5(R7),_6)));}function p6(e){var n=0,_6=0;return function(){var R7=j3(),S7=q-(R7-_6);_6=R7;if(S7>0){if(++n>=p){return arguments[0];}}else{n=0;}return e.apply(u,arguments);};}var q6=e6(function(e){var n=[];if(e.charCodeAt(0)===46){n.push('');}e.replace(l1,function(_6,R7,S7,T7){n.push(S7?T7.replace(s1,'$1'):(R7||_6));});return n;});function r6(e){if(typeof e=='string'||q7(e)){return e;}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function s6(n){if(n!=null){try{return O2.call(n);}catch(e){}try{return(n+'');}catch(e){}}return'';}function t6(e,n){h2(w,function(_6){var R7='_.'+_6[0];if((n&_6[1])&&!j2(e,R7)){e.push(R7);}});return e.sort();}function u6(e){var n=-1,_6=e==null?0:e.length,R7=0,S7=[];while(++n<_6){var T7=e[n];if(T7){S7[R7++]=T7;}}return S7;}var v6=R4(function(e,H7){return d7(e)?l4(e,o4(H7,1,d7,true)):[];});var w6=R4(function(e,H7){var K7=E6(H7);if(d7(K7)){K7=u;}return d7(e)?l4(e,o4(H7,1,d7,true),I5(K7,2)):[];});var x6=R4(function(e,H7){var n=E6(H7);if(d7(n)){n=u;}return d7(e)?l4(e,o4(H7,1,d7,true),u,n):[];});function y6(e){var n=e==null?0:e.length;return n?o4(e,1):[];}function z6(e){var n=e==null?0:e.length;return n?o4(e,I):[];}function A6(e,n){var _6=e==null?0:e.length;if(!_6){return[];}n=n===u?1:u7(n);return o4(e,n);}var B6=R4(function(e){var n=l2(e,_4);return(n.length&&n[0]===e[0])?w4(n):[];});var C6=R4(function(e){var K7=E6(e),n=l2(e,_4);if(K7===E6(n)){K7=u;}else{n.pop();}return(n.length&&n[0]===e[0])?w4(n,I5(K7,2)):[];});var D6=R4(function(e){var n=E6(e),_6=l2(e,_4);n=typeof n=='function'?n:u;if(n){_6.pop();}return(_6.length&&_6[0]===e[0])?w4(_6,u,n):[];});function E6(e){var n=e==null?0:e.length;return n?e[n-1]:u;}var F6=R4(function(e){return X4(o4(e,1,d7,true));});var G6=R4(function(e){var K7=E6(e);if(d7(K7)){K7=u;}return X4(o4(e,1,d7,true),I5(K7,2));});var H6=R4(function(e){var n=E6(e);n=typeof n=='function'?n:u;return X4(o4(e,1,d7,true),u,n);});function I6(e){return(e&&e.length)?X4(e):[];}function J6(e,K7){return(e&&e.length)?X4(e,I5(K7,2)):[];}function K6(e,n){n=typeof n=='function'?n:u;return(e&&e.length)?X4(e,u,n):[];}var L6=R4(function(e,H7){return d7(e)?l4(e,H7):[];});var M6=R4(function(e){return Z4(i2(e,d7));});var N6=R4(function(e){var K7=E6(e);if(d7(K7)){K7=u;}return Z4(i2(e,d7),I5(K7,2));});var O6=R4(function(e){var n=E6(e);n=typeof n=='function'?n:u;return Z4(i2(e,d7),u,n);});function P6(e,H7){return $4(e||[],H7||[],f4);}function Q6(e,H7){return $4(e||[],H7||[],S4);}function R6(e,K7){return o4(U6(e,K7),1);}function S6(e,K7){return o4(U6(e,K7),I);}function T6(e,K7,n){n=n===u?1:u7(n);return o4(U6(e,K7),n);}function U6(e,K7){var n=b7(e)?l2:J4;return n(e,I5(K7,3));}var V6=function(){return Z1.Date.now();};function W6(e,n,_6){n=_6?u:n;var R7=x5(e,h,u,u,u,u,u,n);R7.placeholder=W6.placeholder;return R7;}function X6(e,n,_6){var R7,S7,T7,U7,V7,W7,X7=0,Y7=false,Z7=false,$7=true;if(typeof e!='function'){throw new TypeError(F);}n=v7(n)||0;if(j7(_6)){Y7=!!_6.leading;Z7='maxWait'in _6;T7=Z7?h3(v7(_6.maxWait)||0,n):T7;$7='trailing'in _6?!!_6.trailing:$7;}function _7(i8){var j8=R7,k8=S7;R7=S7=u;X7=i8;U7=e.apply(k8,j8);return U7;}function a8(i8){X7=i8;V7=setTimeout(d8,n);return Y7?_7(i8):U7;}function b8(i8){var j8=i8-W7,k8=i8-X7,l8=n-j8;return Z7?i3(l8,T7-k8):l8;}function c8(i8){var j8=i8-W7,k8=i8-X7;return(W7===u||(j8>=n)||(j8<0)||(Z7&&k8>=T7));}function d8(){var i8=V6();if(c8(i8)){return e8(i8);}V7=setTimeout(d8,b8(i8));}function e8(i8){V7=u;if($7&&R7){return _7(i8);}R7=S7=u;return U7;}function f8(){if(V7!==u){clearTimeout(V7);}X7=0;R7=W7=S7=V7=u;}function g8(){return V7===u?U7:e8(V6());}function h8(){var i8=V6(),j8=c8(i8);R7=arguments;S7=this;W7=i8;if(j8){if(V7===u){return a8(W7);}if(Z7){clearTimeout(V7);V7=setTimeout(d8,n);return _7(W7);}}if(V7===u){V7=setTimeout(d8,n);}return U7;}h8.cancel=f8;h8.flush=g8;return h8;}function Y6(e,n){if(typeof e!='function'||(n!=null&&typeof n!='function')){throw new TypeError(F);}var _6=function(){var R7=arguments,S7=n?n.apply(this,R7):R7[0],T7=_6.cache;if(T7.has(S7)){return T7.get(S7);}var U7=e.apply(this,R7);_6.cache=T7.set(S7,U7)||T7;return U7;};_6.cache=new(Y6.Cache||Q3);return _6;}Y6.Cache=Q3;function Z6(e,n,_6){var R7=true,S7=true;if(typeof e!='function'){throw new TypeError(F);}if(j7(_6)){R7='leading'in _6?!!_6.leading:R7;S7='trailing'in _6?!!_6.trailing:S7;}return X6(e,n,{'leading':R7,'maxWait':n,'trailing':S7});}function $6(){if(!arguments.length){return[];}var e=arguments[0];return b7(e)?e:[e];}function eq(e,n){return e===n||(e!==e&&n!==n);}var a7=x4(function(){return arguments;}())?x4:function(e){return k7(e)&&P2.call(e,'callee')&&!$2.call(e,'callee');};var b7=Array.isArray;function c7(e){return e!=null&&i7(e.length)&&!h7(e);}function d7(e){return k7(e)&&c7(e);}var e7=f3||O7;function f7(e,n){return y4(e,n);}function g7(e,n,_6){_6=typeof _6=='function'?_6:u;var R7=_6?_6(e,n):u;return R7===u?y4(e,n,u,_6):!!R7;}function h7(e){if(!j7(e)){return false;}var n=t4(e);return n==D||n==E||n==y||n==R;}function i7(e){return typeof e=='number'&&e>-1&&e%1==0&&e<=r;}function j7(e){var n=typeof e;return e!=null&&(n=='object'||n=='function');}function k7(e){return e!=null&&typeof e=='object';}var l7=d2?v2(d2):A4;function m7(e){return e==null;}function n7(e){if(!k7(e)||t4(e)!=O){return false;}var n=Y2(e);if(n===null){return true;}var _6=P2.call(n,'constructor')&&n.constructor;return typeof _6=='function'&&_6 instanceof _6&&O2.call(_6)==S2;}var o7=e2?v2(e2):D4;function p7(e){return typeof e=='string'||(!b7(e)&&k7(e)&&t4(e)==U);}function q7(e){return typeof e=='symbol'||(k7(e)&&t4(e)==X);}var r7=f2?v2(f2):E4;function s7(e){if(!e){return[];}if(c7(e)){return p7(e)?H2(e):j5(e);}if(b3&&e[b3]){return B2(e[b3]());}var n=P5(e),_6=n==G?C2:(n==T?F2:H7);return _6(e);}function t7(e){if(!e){return e===0?e:0;}e=v7(e);if(e===I||e===-I){var n=(e<0?-1:1);return n*s;}return e===e?e:0;}function u7(e){var n=t7(e),_6=n%1;return n===n?(_6?n-_6:n):0;}function v7(e){if(typeof e=='number'){return e;}if(q7(e)){return N;}if(j7(e)){var n=typeof e.valueOf=='function'?e.valueOf():e;e=j7(n)?(n+''):n;}if(typeof e!='string'){return e===0?e:+e;}e=u2(e);var _6=v1.test(e);return(_6||x1.test(e))?W1(e.slice(2),_6?2:8):(u1.test(e)?N:+e);}function w7(e){return k5(e,B7(e));}function x7(e){return e==null?'':W4(e);}function y7(e,n,_6){var R7=e==null?u:r4(e,n);return R7===u?_6:R7;}function z7(e,n){return e!=null&&R5(e,n,v4);}function A7(e){return c7(e)?d4(e):G4(e);}function B7(e){return c7(e)?d4(e,true):H4(e);}var C7=n5(function(e,n,_6){M4(e,n,_6);});var D7=n5(function(e,n,_6,R7){M4(e,n,_6,R7);});var E7=C5(function(e,n){var _6={};if(e==null){return _6;}var R7=false;n=l2(n,function(T7){T7=a5(T7,e);R7||(R7=T7.length>1);return T7;});k5(e,E5(e),_6);if(R7){_6=k4(_6,C|a|b,y5);}var S7=n.length;while(S7--){Y4(_6,n[S7]);}return _6;});var F7=C5(function(e,n){return e==null?{}:O4(e,n);});function G7(e,n){if(e==null){return{};}var _6=l2(E5(e),function(R7){return[R7];});n=I5(n);return P4(e,_6,function(R7,S7){return n(R7,S7[0]);});}function H7(e){return e==null?[]:w2(e,A7(e));}function I7(e){return function(){return e;};}function J7(e){return e;}function K7(e){return F4(typeof e=='function'?e:k4(e,C));}function L7(){}function M7(e){return Z5(e)?s2(r6(e)):Q4(e);}function N7(){return[];}function O7(){return false;}function P7(e){return(e&&e.length)?n4(e,J7,u4):u;}function Q7(e){return(e&&e.length)?n4(e,J7,I4):u;}A3.castArray=$6;A3.compact=u6;A3.constant=I7;A3.curry=W6;A3.debounce=X6;A3.difference=v6;A3.differenceBy=w6;A3.differenceWith=x6;A3.flatMap=R6;A3.flatMapDeep=S6;A3.flatMapDepth=T6;A3.flatten=y6;A3.flattenDeep=z6;A3.flattenDepth=A6;A3.intersection=B6;A3.intersectionBy=C6;A3.intersectionWith=D6;A3.iteratee=K7;A3.keys=A7;A3.keysIn=B7;A3.map=U6;A3.memoize=Y6;A3.merge=C7;A3.mergeWith=D7;A3.omit=E7;A3.pick=F7;A3.pickBy=G7;A3.property=M7;A3.throttle=Z6;A3.toArray=s7;A3.toPlainObject=w7;A3.union=F6;A3.unionBy=G6;A3.unionWith=H6;A3.uniq=I6;A3.uniqBy=J6;A3.uniqWith=K6;A3.values=H7;A3.without=L6;A3.xor=M6;A3.xorBy=N6;A3.xorWith=O6;A3.zipObject=P6;A3.zipObjectDeep=Q6;A3.eq=eq;A3.get=y7;A3.hasIn=z7;A3.identity=J7;A3.isArguments=a7;A3.isArray=b7;A3.isArrayLike=c7;A3.isArrayLikeObject=d7;A3.isBuffer=e7;A3.isEqual=f7;A3.isEqualWith=g7;A3.isFunction=h7;A3.isLength=i7;A3.isMap=l7;A3.isNil=m7;A3.isObject=j7;A3.isObjectLike=k7;A3.isPlainObject=n7;A3.isSet=o7;A3.isString=p7;A3.isSymbol=q7;A3.isTypedArray=r7;A3.last=E6;A3.max=P7;A3.min=Q7;A3.stubArray=N7;A3.stubFalse=O7;A3.noop=L7;A3.now=V6;A3.toFinite=t7;A3.toInteger=u7;A3.toNumber=v7;A3.toString=x7;A3.VERSION=V;W6.placeholder=A3;return A3;});
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/AppInfoParameters',["sap/base/Log","sap/ushell/services/AppConfiguration","sap/base/util/restricted/_curry","sap/base/util/restricted/_zipObject","sap/ui/VersionInfo","sap/ushell/Config"],function(L,a,_,b,V,C){"use strict";function g(p){var A=p.applicationType;if(A==="TR"){A="GUI";}return A;}function c(){return a.getCurrentApplication().appCapabilities||{};}function d(p){function q(v){return(v.version||"")+(" ("+(v.buildTimestamp||"")+")")||"";}if(g(p)==="UI5"){return V.load().then(q).catch(function(){L.error("VersionInfo could not be loaded");});}return undefined;}function e(p){return Promise.resolve().then(function(){var q=p.componentInstance;if(q){var A=q.getManifestEntry("/sap.app/applicationVersion/version");return A;}return undefined;});}function f(p){var t=p.getTechnicalParameter("sap-ach");return t.then(function(A){var s=A&&A[0];if(s){return s;}return c().appSupportInfo;});}function h(p){function q(){var M=a.getMetadata();return M.technicalName;}var E={UI5:function(){var r=p.componentInstance;if(r){var s=r.getMetadata().getManifestEntry("/sap.ui5/componentName");if(!s){s=r.getMetadata().getComponentName();}return s;}return q();},TR:function(){return(q()||"").replace(/\s[(]TCODE[)]$/,"");},WDA:q,NWBC:q,URL:function(){return Promise.resolve().then(function(){var r=a.getCurrentApplication();if(r.appCapabilities.technicalAppComponentId){return r.appCapabilities.technicalAppComponentId;}return undefined;});}};var A=p.applicationType;if(E.hasOwnProperty(A)){return E[A]();}return undefined;}function i(p){return p.getTechnicalParameter("sap-fiori-id").then(function(F){if(F&&typeof F[0]==="string"){return F[0];}if(p.homePage){return"LAUNCHPAD";}return c().appId||p.inboundPermanentKey;});}function j(u){return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(r){return new Promise(function(R,p){r.resolveReferences([u]).then(function(q){R(q[u]);}).catch(p);});});}function k(p){return Promise.resolve().then(function(){var q=a.getCurrentApplication();var A=g(p);if(A&&A!=="URL"){return A;}return q.appCapabilities&&q.appCapabilities.appFrameworkId;}).then(function(A){var q={NWBC:"WDA",TR:"GUI"};return q[A]||A;});}function l(p,q){return q.getSystemContext().then(function(s){return s.getProperty(p);});}function m(){var s=window.hasher&&window.hasher.getHash();if(!s){return Promise.reject("Could not identify current application hash");}return Promise.resolve().then(function(){return s;});}var H={theme:j.bind(null,"User.env.sap-theme-NWBC"),languageTag:j.bind(null,"User.env.sap-languagebcp47"),appIntent:m,appFrameworkId:k,appFrameworkVersion:d,appSupportInfo:f,technicalAppComponentId:h,appId:i,appVersion:e,productName:_(l)("productName")};function n(p){return!H[p]&&/[.]/.test(p);}function o(p,q){var P=p.map(function(s){if(n(s)){H[s]=_(l)(s);}if(!H[s]){L.error(s+" is not a valid app info parameter");return undefined;}return H[s](q);});return Promise.all(P).then(function(v){return b(p,v);});}return{getInfo:function(p,q){if(!q){return Promise.reject("Parameter application missing");}return o(["appFrameworkId"],q).then(function(){return o(p,q);});}};},false);
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config","sap/base/util/deepExtend","sap/ui/core/routing/History"],function(U,L,u,a,A,s,w,g,p,C,d,H){"use strict";function b(J,K,N){var O=J.inbound,R=O&&O.resolutionResult,P;if(!(!O||!R||!(R["sap.wda"]))){P=w.constructFullWDAResolutionResult(J,K,N);}else if(!(!O||!R)){P=w.constructWDAResolutionResult(J,K,N);}if(P){P.then(function(Q){r(Q,(Q.url&&Q.url.indexOf("/ui2/nwbc/")>=0)?"NWBC":"WDA");});}return P;}function c(J,K,N){return g.generateTRResolutionResult(J,K,N).then(function(R){r(R,"GUI");return R;});}function e(J,K,N){var O=new U(K),P=J.inbound,Q=P&&P.resolutionResult,R=d({},J.mappedIntentParamsPlusSimpleDefaults),S,T;if(R["sap-system"]){S=R["sap-system"][0];delete R["sap-system"];}if(R["sap-system-src"]){T=R["sap-system-src"][0];delete R["sap-system-src"];}return new Promise(function(V,W){s.spliceSapSystemIntoURI(O,Q.systemAlias,S,T,"WCF",Q.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,N).done(function(X){var Y=A.getURLParsing().paramsToString(R),Z=A.appendParametersToUrl(Y,X.toString());var $={url:Z,text:Q.text||"",additionalInformation:Q.additionalInformation||"",applicationType:"WCF",fullWidth:true};r($,"WCF");V($);}).fail(function(X){W(X);});});}function f(J,K,N){var O=J.inbound,P,S,Q,R,T={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(W){if(O.resolutionResult.hasOwnProperty(W)){T[W]=O.resolutionResult[W];}});T.url=K;if(T.applicationDependencies&&typeof T.url==="undefined"){T.url="";}if(typeof T.url==="undefined"){T.url="";L.warning("The component url is undefined. We set it to empty string avoid rejection of the promise");}R=d({},J.mappedIntentParamsPlusSimpleDefaults);T.reservedParameters={};var V={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(V).forEach(function(W){var X=R[W];if(X){delete R[W];T.reservedParameters[W]=X;}});J.mappedDefaultedParamNames=J.mappedDefaultedParamNames.filter(function(W){return!V[W];});if(J.mappedDefaultedParamNames.length>0){R["sap-ushell-defaultedParameterNames"]=[JSON.stringify(J.mappedDefaultedParamNames)];}S=R["sap-system"]&&R["sap-system"][0];Q=R["sap-system-src"]&&R["sap-system-src"][0];T["sap-system"]=S;if(typeof Q==="string"){T["sap-system-src"]=Q;}J.effectiveParameters=R;P=A.getURLParsing().paramsToString(R);if(P){T.url=T.url+((T.url.indexOf("?")<0)?"?":"&")+P;}if(typeof O.resolutionResult.ui5ComponentName!=="undefined"){T.ui5ComponentName=O.resolutionResult.ui5ComponentName;}T.text=O.title;return Promise.resolve(T);}function h(T){var J=new U().fragment();var K=J.lastIndexOf("&/");var O=1;if(K>0){if(T&&T.capabilities&&T.capabilities.appFrameworkId==="UI5"){O=2;}return J.substr(K+O);}return undefined;}function i(J){var K=J.targetNavigationMode;if(K===undefined||K===""){K="inplace";}return K;}function j(){var J=window.hasher&&window.hasher.getHash(),K="",P;if(J&&J.length>0&&J.indexOf("sap-iapp-state=")>0){P=/(?:sap-iapp-state=)([^&/\\]+)/.exec(J);if(P&&P.length===2){K=P[1];}}return K;}function k(){return new Promise(function(R){Promise.all([sap.ushell.Container.getServiceAsync("UserInfo"),sap.ushell.Container.getServiceAsync("PluginManager")]).then(function(J){var K=J[0],P=J[1];var N=K.getUser();var O=sap.ui.getCore().getConfiguration();var Q=u.getUi5Version();var S=N.getContentDensity();var T=N.getTheme();if(T.indexOf("sap_")!==0){var V=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=N.getTheme(V);}var W;var X;if(O){X=O.getLanguage&&O.getLanguage();W=O.getSAPLogonLanguage&&O.getSAPLogonLanguage();}var Y=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var Z=0;if(C.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){Z=C.last("/core/shell/sessionTimeoutIntervalInMinutes");}R({language:X,logonLanguage:W,theme:T,themeServiceRoot:Y,isDebugMode:!!window["sap-ui-debug"],ui5Version:Q,contentDensity:S,sapPlugins:P._getNamesOfPluginsWithAgents(),innerAppState:j(),sessionTimeout:Z,historyDirection:H.getInstance().getDirection()||""});});});}function l(J){var K;switch(J){case"inplace":K="embedded";break;case"explace":K="newWindow";break;default:K=J||"newWindow";}return K;}function m(T,S){var J=l(T);var K=u.getMember(S,"sap|integration.navMode");switch(K){case"inplace":return"embedded";case"explace":if(J==="embedded"){return"newWindowThenEmbedded";}if(["newWindowThenEmbedded","newWindow"].indexOf(J)>=0){return J;}L.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return J;}}function n(T,S,J){var K=u.clone(T);K.navigationMode=m(T.navigationMode,S);K.appId=J(T.appId||"");K.technicalAppComponentId=J(T.technicalAppComponentId||"");K.appSupportInfo=S["sap.app"]&&S["sap.app"].ach;K.appFrameworkId=T.appFrameworkId;delete K.urlTransformation;return K;}function o(S,J,K){var N={appParams:{},system:undefined},O;if(K.mappedIntentParamsPlusSimpleDefaults){N.appParams=JSON.parse(JSON.stringify(K.mappedIntentParamsPlusSimpleDefaults));}O=u.getMember(J,"sap|app.destination");if(typeof O==="string"&&O.length>0){N.system=S.systemAliases[O]&&JSON.parse(JSON.stringify(S.systemAliases[O]));if(typeof N.system==="object"){N.system.alias=O;}}return N;}function q(J,T){return new Promise(function(R,K){var N=new U(J);var P=N.query(true);var O=true;if(T==="explace"){O=false;}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(S){S.compactParams(P,["sap-language","sap-theme","sap-shell","sap-ui-app-id","transaction","sap-iframe-hint","sap-keep-alive","sap-ui-versionedLibCss","sap-wd-configId"],undefined,O).done(function(Q){if(!Q.hasOwnProperty("sap-intent-param")){R(J);return;}var V;if(Q["sap-theme"]){var W="sap-theme="+Q["sap-theme"];Q["sap-theme"]="sap-theme-temp-placeholder";N.query(Q);V=N.toString();V=V.replace("sap-theme=sap-theme-temp-placeholder",W);}else{N.query(Q);V=N.toString();}R(V);}).fail(function(Q){K(Q);});});});}function r(R,J){if(J){y(R,"sap-iframe-hint",J);}}function t(R){var K=R.extendedInfo.appParams["sap-keep-alive"];if(K!==undefined){y(R,"sap-keep-alive",K[0]);}}function v(R){var S=C.last("/core/spaces/enabled");if(S===true){y(R,"sap-spaces",S);}}function x(R,S,J){var T=u.getMember(S,"sap|integration.urlTemplateId");if(T==="urltemplate.url-dynamic"&&R.url.indexOf("sap-language=")===-1){y(R,"sap-language",J.env.language);}}function y(R,N,V){if(R.url){var J=R.url.indexOf("#"),K=R.url,O="";if(J>0){K=R.url.slice(0,J);O=R.url.slice(J);}R.url=K+(K.indexOf("?")>=0?"&":"?")+N+"="+V+O;}}function z(J,K,N){return new Promise(function(R){var O=J.inbound,T=O.templateContext,P=T.payload.capabilities||{};if(J.mappedIntentParamsPlusSimpleDefaults&&J.mappedIntentParamsPlusSimpleDefaults.hasOwnProperty("sap-ushell-innerAppRoute")){var Q=window.hasher.getHash();if(J.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"].length>0&&Q.indexOf("&/")===-1){Q+="&/"+J.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"];window.hasher.replaceHash(Q);}}var S={innerAppRoute:h(T.payload)||J.parsedIntent.appSpecificRoute,targetNavMode:i(J),defaultParameterNames:J.mappedDefaultedParamNames,startupParameter:J.mappedIntentParamsPlusSimpleDefaults};k().then(function(V){S.env=V;if(P.appFrameworkId==="UI5"&&S.startupParameter){for(var W in S.startupParameter){if(W!=="sap-ushell-innerAppRoute"){S.startupParameter[W][0]=encodeURIComponent(S.startupParameter[W][0]);}}}var X=a.expand(T.payload,T.site,S,T.siteAppSection,"startupParameter");var Y=function(_){var a1=u.clone(T.payload);a1.urlTemplate=_;return a.expand(a1,T.site,S,T.siteAppSection,"startupParameter");};var Z={applicationType:"URL",text:O.title,appCapabilities:n(P,T.siteAppSection,Y),url:X,extendedInfo:o(T.site,T.siteAppSection,J),contentProviderId:O.contentProviderId||"",systemAlias:(T.siteAppSection["sap.app"]&&T.siteAppSection["sap.app"].destination)||T.siteAppSection.destination||""};r(Z,Z.appCapabilities.appFrameworkId);t(Z);v(Z);x(Z,T.siteAppSection,S);var $=new Promise(function(_){sap.ushell.Container.getServiceAsync("URLTemplate").then(function(a1){sap.ui.require(["sap/ushell/components/applicationIntegration/application/BlueBoxesCache"],function(b1){var c1=(b1.get(Z.url)===undefined);a1.handlePostTemplateProcessing(Z.url,T.siteAppSection,c1).then(_);});});});$.then(function(_){Z.url=_;B(Z.url,P,T).then(function(a1){Z.url=a1;q(Z.url,S.targetNavMode).then(function(b1){Z.url=b1;R(Z);},function(){R(Z);});});});});});}function B(J,K,T){return new Promise(function(R){var N=K.urlTransformation||{enabled:false},S,O,P;if(N.enabled===true){P=new U(J);S=N.transformations[0].service.uri;var Q=a.prepareExpandData({urlTemplate:"",parameters:{names:S.queryOptions}},{},{urlComponent:{query:P.query()}},T.siteAppSection,"");O=U.expand("{+rootPath}/{+resourcePath}{?queryParams*}",{rootPath:S.rootPath,resourcePath:S.resourcePath,queryParams:Q.oResolvedParameters}).toString();sap.ui.require(["sap/ui/thirdparty/datajs"],function(V){V.read({requestUri:O,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}},function(W){L.info("URL Transformation Succeeded",JSON.stringify({URLBeforeTransformation:J,TransformationResult:W.transformAppLaunchQueryString.queryString}),"sap.ushell.ApplicationType");J=P.query(W.transformAppLaunchQueryString.queryString).toString();R(J);},function(W){L.error("URL Transformation Failed",JSON.stringify(W),"sap.ushell.ApplicationType");R(J);});});}else{R(J);}});}function D(J,K,N){var O=J.inbound,P=O&&O.resolutionResult,R={};var Q=new U(K);var S=d({},J.mappedIntentParamsPlusSimpleDefaults);if(J.inbound&&J.inbound.action==="launchURL"&&J.inbound.semanticObject==="Shell"){delete S["sap-external-url"];}var T=S["sap-system"]&&S["sap-system"][0];var V=S["sap-system-src"]&&S["sap-system-src"][0];R["sap-system"]=T;delete S["sap-system"];if(typeof V==="string"){R["sap-system-src"]=V;delete S["sap-system-src"];}return(new Promise(function(W,X){if(A.absoluteUrlDefinedByUser(Q,P.systemAlias,P.systemAliasSemantics)){W(K);}else{s.spliceSapSystemIntoURI(Q,P.systemAlias,T,V,"URL",P.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,N).fail(X).done(function(Y){var Z=Y.toString();W(Z);});}})).then(function(W){var X=false,Y,Z=C.last("/core/navigation/flpURLDetectionPattern"),$=new RegExp(Z);if(S&&S.hasOwnProperty("sap-params-append")){delete S["sap-params-append"];X=true;}Y=A.getURLParsing().paramsToString(S);return $.test(W)||(X===true)?A.appendParametersToIntentURL(S,W):A.appendParametersToUrl(Y,W);},Promise.reject.bind(Promise)).then(function(W){["additionalInformation","applicationDependencies","systemAlias"].forEach(function(X){if(O.resolutionResult.hasOwnProperty(X)){R[X]=O.resolutionResult[X];}});R.url=W;R.text=O.title;R.applicationType="URL";return Promise.resolve(R);},Promise.reject.bind(Promise));}var E={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(J){var K=J.inbound.hasOwnProperty("templateContext");return K?z.apply(null,arguments):D.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,enableWdaCompatibilityMode:C.last("/core/navigation/enableWdaCompatibilityMode"),generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:c,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:e,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:f,defaultFullWidthSetting:false}};function F(){return Object.keys(E).map(function(J){return E[J];}).filter(function(J){return typeof J.easyAccessMenu==="object";});}function G(){var J={};F().forEach(function(K){J[K.easyAccessMenu.intent]=K.easyAccessMenu.resolver;});return function(K,R){if(J[K]&&(!R||R!=="SAPUI5")){return J[K];}return null;};}function I(J){if(!E[J]){return false;}return E[J].defaultFullWidthSetting;}Object.defineProperty(E,"enum",{value:Object.keys(E).reduce(function(J,K){if(E[K].type){J[K]=E[K].type;}return J;},{})});var M={getEasyAccessMenuResolver:G(),getEasyAccessMenuDefinitions:F,getDefaultFullWidthSetting:I};Object.keys(M).forEach(function(J){Object.defineProperty(E,J,{value:M[J]});});return E;},true);
sap.ui.predefine('sap/ushell/CanvasShapesManager',["sap/ui/Device","sap/ui/core/theming/Parameters"],function(D,T){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};P.prototype.getDistance=function(p){var x=this.x-p.x,y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width,a=(window.innerHeight>0)?window.innerHeight:screen.height,b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)},m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},r,e,s,f,g;this.shapes=[];this.bIsDirty=true;for(g in d){r=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;e=this.getRandomPoint(d[g]);s=this._getSquarePoints(r,e);f=this._calculatebezierCurves(r,s);this.shapes.push({bezierCurves:f,centerPoint:e});}for(var h in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));D.resize.attachHandler(this.resizeHandler,this);},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(r){var x=Math.floor(Math.random()*(r.x.max-r.x.min)+r.x.min),y=Math.floor(Math.random()*(r.y.max-r.y.min)+r.y.min);return new P(x,y);},onThemeChanged:function(){var s=T.get("sapUshellShellBackgroundShapesColor");if(s&&s!=="transparent"){this.sShapesColor=s;this.bIsDirty=true;this.drawShapes();}},resizeHandler:function(){var d=document.getElementById(this.Id);if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.bIsDirty=true;this.onThemeChanged();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},makeAmorphousShape:function(s,d,x,y){var e,f,g;switch(d){case 0:e=s.bezierCurves[0].controlPoint1;f=s.bezierCurves[3].controlPoint2;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint1=g[0];s.bezierCurves[3].controlPoint2=g[1];break;case 1:e=s.bezierCurves[0].controlPoint2;f=s.bezierCurves[1].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint2=g[0];s.bezierCurves[1].controlPoint1=g[1];break;case 2:e=s.bezierCurves[1].controlPoint2;f=s.bezierCurves[2].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[1].controlPoint2=g[0];s.bezierCurves[2].controlPoint1=g[1];break;case 3:e=s.bezierCurves[2].controlPoint2;f=s.bezierCurves[3].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[2].controlPoint2=g[0];s.bezierCurves[3].controlPoint1=g[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(r,d){var s=[];s[0]=new P(d.x+r,d.y);s[1]=new P(d.x,d.y-r);s[2]=new P(d.x-r,d.y);s[3]=new P(d.x,d.y+r);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(r,s){var d=[],e,f,g,h;h=s[0];g=s[1];e=new P(h.x,h.y-r/2);f=new P(h.x-r/2,h.y-r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[1];g=s[2];e=new P(h.x-r/2,h.y);f=new P(h.x-r,h.y+r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[2];g=s[3];e=new P(h.x,h.y+r/2);f=new P(h.x+r/2,h.y+r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[3];g=s[0];e=new P(h.x+r/2,h.y);f=new P(h.x+r,h.y-r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});return d;},drawShapes:function(){var d=document.getElementById(this.Id);if(this.bIsDirty&&d&&d.getContext){var e=d.getContext("2d"),s,f,g,h;e.clearRect(0,0,c*2,a*2);if(!this.sShapesColor){this.sShapesColor=T.get("sapUshellShellBackgroundShapesColor");}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=this.sShapesColor;e.fill();}}this.bIsDirty=false;}}};var C=new m();return C;},true);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher","sap/base/util/extend"],function(B,C,U,R,S,h,e){"use strict";var u;U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};var A=B.extend("AppInfo",{constructor:function(c){B.call(this);this._oComponent=c;},getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},_getLocalized:function(t,r){var m=new R({bundleUrl:sap.ui.require.toUrl(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}});var H=B.extend("HeaderInfo",{constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var E=this._aHierarchy[i],k=(E.id===this._oCurrentViewInfo.sViewId),K=(E.intent===s);if(k||K){n=false;E=this._updateHierarchyEntry(E);this._aHierarchy[i]=E;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){E.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},_createHierarchyEntry:function(){var s="#"+h.getHash(),E={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return E;},_updateHierarchyEntry:function(E){E.id=this._oCurrentViewInfo.sViewId;E.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;E.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return E;},_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=="title"){delete O[p];}}});return o;}});var F=B.extend("sap.ushell.Fiori20Adapter",{constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},init:function(){if(!S){return;}var c=e({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);},destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},_onViewChange:function(E){this._oHeaderInfo.registerView(E.getParameters());}});F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry","sap/base/Log","sap/base/util/Version","sap/base/util/isEmptyObject"],function(U,a,F,c,S,L,V,b){"use strict";var d={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_ALLOWLIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(C){var o=this._getURLParamConfiguration();if(!o){o=this._getMetadataConfiguration(C);}if(!o){o=this._getDefaultConfiguration(C);}o.iSearchDepth=o.iSearchDepth||d.I_DEFAULT_SEARCH_DEPTH;if((typeof o.iSearchDepth==="string")&&!isNaN(o.iSearchDepth)){o.iSearchDepth=parseInt(o.iSearchDepth,10);}return o;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(d.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),e,s;if(typeof(u)==="boolean"){e=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(e===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:e,bMoveTitle:s?s.indexOf("title")>-1:e,bHideBackButton:s?s.indexOf("back")>-1:e,bCollapseHeader:s?s.indexOf("collapse")>-1:e,bHierarchy:s?s.indexOf("hierarchy")>-1:e};},_getMetadataConfiguration:function(C){var A=C.getMetadata("config").getConfig(d.S_FIORI20ADAPTER_METADATA_PARAM_NAME),e,f;if(typeof(A)==="boolean"){e=A;}else if((typeof A==="object")&&!b(A)){f=A;}if(!f&&(e===undefined)){return;}return{bStylePage:f?this._isSgnTrue(f.style):e,bMoveTitle:f?this._isSgnTrue(f.title):e,bHideBackButton:f?this._isSgnTrue(f.back):e,bCollapseHeader:f?this._isSgnTrue(f.collapse):e,bHierarchy:f?this._isSgnTrue(f.hierarchy):e,bLateAdaptation:f?this._isSgnTrue(f.lateAdaptation):d.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(C){var e=this._hasMinVersionSmallerThan(C,"1.42")&&this._isAllowed(C);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var u=new U(window.location.href),A=u.mParams&&u.mParams[p];return A&&(A.length>0);},_isAllowed:function(C){var s=C.getMetadata().getName();for(var i=0;i<d.A_ALLOWLIST.length;i++){var n=d.A_ALLOWLIST[i].substring(0,d.A_ALLOWLIST[i].length-2);if(this._isPrefixedString(s,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(C,v){var i=C.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new V(i.dependencies.minUI5Version);m=M.compareTo(new V(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};a._fnOnInstanceInitialized=function(C){var o=C.getAggregation("rootControl");if(!o||o.getId()==="navContainerFlp"||C.getId().indexOf("application-")!==0){return;}var e=d.getConfiguration(C);if(!d._isAdaptationRequired(e)){return;}if(!c.service||!S||typeof S.get!=="function"){L.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var D={onBeforeRendering:function(){o.removeEventDelegate(D);var s=S.get("sap.ushell.ui5service.ShellUIService"),f=s&&s.createInstance();if(!s||!f){L.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}f.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(o,C,e,s);}},function(E){L.warning("Fiori20Adapter not loaded as ShellUIService is not available",E,"sap.ushell.Fiori20AdapterTest");});}};o.addEventDelegate(D);};});
sap.ui.predefine('sap/ushell/SessionHandler',["sap/ushell/resources","sap/ushell/Config","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/json/JSONModel","sap/m/VBox","sap/ui/core/library","sap/m/library","sap/ushell/ui/launchpad/LoadingDialog","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log","sap/ushell/EventHub"],function(r,C,D,B,T,J,V,c,m,L,q,S,a,E){"use strict";var b=m.ButtonType;var d=c.ValueState;var e=function(A){var t=this,i=false,l=false;this.init=function(o){a.debug("SessionHandler.oConfig.sessionTimeoutIntervalInMinutes: "+o.sessionTimeoutIntervalInMinutes,"","SessionHandler");a.debug("SessionHandler.oConfig.sessionTimeoutReminderInMinutes: "+o.sessionTimeoutReminderInMinutes,"","SessionHandler");a.debug("SessionHandler.oConfig.enableAutomaticSignout: "+o.enableAutomaticSignout,"","SessionHandler");this.oConfig=o;this.oModel=new J();this.putTimestampInStorage(this._getCurrentDate());this.initLogout();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(f){this.oAppLifeCycleService=f;this.attachUserEvents();}.bind(this));if(o.sessionTimeoutIntervalInMinutes>0){this.initSessionTimeout();}if(o.sessionTimeoutTileStopRefreshIntervalInMinutes>0){this.initTileRequestTimeout();}E.on("nwbcUserIsActive").do(this.userActivityHandler.bind(this));i=true;};this.initLogout=function(){if(l===false){sap.ushell.Container.registerLogout(this.logout);this.registerCommHandlers();l=true;}};this.initSessionTimeout=function(){if(this.oConfig.enableAutomaticSignout===undefined){this.oConfig.enableAutomaticSignout=false;}if(this.oConfig.sessionTimeoutReminderInMinutes===undefined){this.oConfig.sessionTimeoutReminderInMinutes=0;}this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.oConfig.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.notifyServer();this.monitorUserIsInactive();};this.registerCommHandlers=function(){A.registerShellCommunicationHandler({"sap.ushell.sessionHandler":{oRequestCalls:{logout:{isActiveOnly:false,distributionType:["URL"]},extendSessionEvent:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{notifyUserActive:{executeServiceCallFn:function(){if(i===true){t.userActivityHandler();}return new q.Deferred().resolve().promise();}}}}});};this.monitorUserIsInactive=function(){a.debug("SessionHandler.monitorInactiveUser : Check started","*****","SessionHandler");var f=this.timeLastInteraction(),g=this.timePopup(),h=this.timeNow(),j=this.timeOver(),R=g-h,k=h-f,M;a.debug("SessionHandler.monitorUserIsInactive :: time since last interaction : "+k,"","SessionHandler");a.debug("SessionHandler.monitorUserIsInactive :: remaining time until dialog : "+R,"","SessionHandler");if(h<g){M=setTimeout(this.monitorUserIsInactive.bind(this),R*1000);this.oMonitorUserIsInactiveTimer=this.oMonitorUserIsInactiveTimer||M;return;}if(h>=g&&h<j&&this.oConfig.sessionTimeoutReminderInMinutes>0){this.detachUserEvents();this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();a.debug("SessionHandler.monitorUserIsInactive :: Dialog opened","","SessionHandler");this.monitorCountdown(true);this._createSystemNotification();}if(h>=j){a.debug("SessionHandler.monitorUserIsInactive :: Session over detected","","SessionHandler");this.handleSessionOver();return;}a.debug("SessionHandler.monitorInactiveUser :: Check done","*****","SessionHandler");};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);sap.ui.getCore().getEventBus().publish("launchpad","sessionTimeout");if(this.oConfig.enableAutomaticSignout===true){a.debug("SessionHandler.handleSessionOver :: Automatic signout gets initiated","","SessionHandler");this.logout();}else{a.debug("SessionHandler.handleSessionOver :: Session expired dialog gets opened","","SessionHandler");this.createSessionExpiredDialog().open();}};this.notifyServer=function(){var f=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),g=f/(1000*60);if(g<=this.oConfig.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),this.oConfig.sessionTimeoutIntervalInMinutes*60*1000);};this.monitorCountdown=function(I){if(I){a.debug("SessionHandler.monitorCountdown :: Initiated from outside","*****","SessionHandler");}else{a.debug("SessionHandler.monitorCountdown :: Initiated from internal call","**","SessionHandler");}var f=this.timeLastInteraction(),g=this.timePopup(),h=this.timeNow(),j=this.timeOver(),k=h-f;a.debug("SessionHandler.monitorCountdown :: timeNow : "+h,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: iTimeLastInteraction : "+f,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: timeSinceLastInteraction : "+k,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: iTimeOver : "+j,"","SessionHandler");if(h<g){a.debug("SessionHandler.monitorCountdown :: Auto-click","<=","SessionHandler");this.continueWorkingButtonPressHandler(true);return;}var R=j-h;if(R>0){a.debug("SessionHandler.monitorCountdown :: Remaining seconds : "+R+" - iTimeOver : "+j,"","SessionHandler");this.oModel.setProperty("/SessionRemainingTimeInSeconds",R);this.remainingTimer=setTimeout(this.monitorCountdown.bind(this,false),500);return;}if(R<=0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}this.handleSessionOver();}};this.initTileRequestTimeout=function(){this.checkStopBackendRequestRemainingTime();this.bBackendRequestsActive=true;};this.checkStopBackendRequestRemainingTime=function(){var s=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),f=s/(1000*60),R=this.oConfig.sessionTimeoutTileStopRefreshIntervalInMinutes,g=(R-f)*60*1000;if(f<R){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),g);}else if(R>0){this._setConnectionActive(false);}};this._setConnectionActive=function(f){if(f){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),0);}if(this.bBackendRequestsActive===f){return;}sap.ui.getCore().getEventBus().publish("launchpad","setConnectionToServer",{active:f});if(!C.last("/core/spaces/enabled")){if(f){this._setTilesVisibleOnHomepage();}else{this._setTilesInvisibleOnHomepage();}}this.bBackendRequestsActive=f;};this._setTilesVisibleOnHomepage=function(){sap.ui.require(["sap/ushell/utils"],function(u){u.handleTilesVisibility();});};this._setTilesInvisibleOnHomepage=function(){return new Promise(function(f,g){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(h){h.getGroups().then(function(G){var o=sap.ui.getCore().getEventBus();G.forEach(function(j){h.getGroupTiles(j).forEach(function(k){h.setTileVisible(k,false);});});o.publish("launchpad","visibleTilesChanged",[]);f();});});});};this.getLocalStorage=function(){if(this.oLocalStorage===undefined){var s=new S(this.oConfig&&this.oConfig.sessionType||S.Type.local);if(this._isLocalStorageSupported(s)){this.oLocalStorage=s;}else{this.oLocalStorage=false;}}return this.oLocalStorage;};this._isLocalStorageSupported=function(s){var I;try{I=s.isSupported();}catch(f){I=false;}if(!I){a.warning("SessionHandler._isLocalStorageSupported :: Failed to instantiate local storage handler: "+"Might be disabled by the browser!","","SessionHandler");}return I;};this._createSystemNotification=function(){var f=function(){var s=this.oModel.getProperty("/SessionRemainingTimeInSeconds");var n=new Notification(r.i18n.getText("sessionTimeoutMessage_title"),{body:this.continueWorkingFormatter(s)});n.onclick=function(o){window.focus();};}.bind(this);if(!("Notification"in window)){return;}else if(Notification.permission==="granted"){f();}else if(Notification.permission!=="denied"){Notification.requestPermission().then(function(p){if(p==="granted"){f();}});}};this.continueWorkingFormatter=function(s){var I=s>60,f,g,M;f=I?r.i18n.getText("sessionTimeoutMessage_units_minutes"):r.i18n.getText("sessionTimeoutMessage_units_seconds");g=I?Math.ceil(s/60):s;if(t.oConfig.enableAutomaticSignout){M=r.i18n.getText("sessionTimeoutMessage_kioskMode_main",[g,f]);}else{M=r.i18n.getText("sessionTimeoutMessage_main",[g,f]);}return M;};this.createContinueWorkingDialog=function(){a.debug("SessionHandler.createContinueWorkingDialog :: Continue working dialog being created","","SessionHandler");this.oMessageVBox=new V();this.oSessionKeepAliveLabel=new T({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:this.continueWorkingFormatter}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.oConfig.enableAutomaticSignout===false){this.oLostDataReminder=new T({text:r.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder);}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new D("sapUshellKeepAliveDialog",{title:r.i18n.getText("sessionTimeoutMessage_title"),type:"Message",state:d.Warning,content:this.oMessageVBox,beginButton:this.createContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy();}.bind(this)}).addStyleClass("sapContrastPlus");if(this.oConfig.enableAutomaticSignout===true){this.oSignOutButton=new B({text:r.i18n.getText("logoutBtn_title"),tooltip:r.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton);}return this.oSessionKeepAliveDialog;};this.createContinueWorkingButton=function(){return new B({text:r.i18n.getText("sessionTimeoutMessage_continue_button_title"),type:b.Emphasized,press:t.continueWorkingButtonPressHandler.bind(t,false)});};this.continueWorkingButtonPressHandler=function(f){a.debug("SessionHandler.continueWorkingButtonPressHandler :: Session was extended"+f?"automatically":"by user","","SessionHandler");if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}clearTimeout(this.remainingTimer);if(!f){this.putTimestampInStorage(this._getCurrentDate());}this.monitorUserIsInactive();this.attachUserEvents();A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new D("sapUshellSessionTimedOutDialog",{title:r.i18n.getText("sessionExpiredMessage_title"),type:"Message",state:d.Warning,content:new T({text:r.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.createReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy();}.bind(this)}).addStyleClass("sapContrastPlus");return this.oSessionExpiredDialog;};this.createReloadButton=function(){return new B({text:r.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){t.oSessionExpiredDialog.close();location.reload();}});};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));this.oAppLifeCycleService.attachAppLoaded({},this.userActivityHandler,this);};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");this.oAppLifeCycleService.detachAppLoaded(this.userActivityHandler,this);};this.putTimestampInStorage=function(f){a.debug("SessionHandler.putTimestampInStorage :: Timestamp is "+f,"","SessionHandler");var o=this.getLocalStorage();if(o){o.put("lastActivityTime",f);if(this.bBackendRequestsActive===false){this._setConnectionActive(true);}}};this.getTimestampFromStorage=function(){var o=this.getLocalStorage();if(o){return o.get("lastActivityTime");}return null;};this.timeNow=function(){return Math.floor(Date.now()/1000);};this.timeLastInteraction=function(){return Math.floor(new Date(this.getTimestampFromStorage()).getTime()/1000);};this.timeOver=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60);};this.timePopup=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60-this.oConfig.sessionTimeoutReminderInMinutes*60);};this.userActivityHandler=function(){if(this.oUserActivityTimer!==undefined){return;}this.oUserActivityTimer=setTimeout(function(){a.debug("SessionHandler.userActivityHandler :: Timed time stamp update","","SessionHandler");t.putTimestampInStorage(t._getCurrentDate());t.oUserActivityTimer=undefined;},1000);};this._getCurrentDate=function(){return new Date();};this.logout=function(){a.debug("SessionHandler.logout :: Logout initiated","","SessionHandler");var o=new L({text:""});A.postMessageToIframeApp("sap.ushell.sessionHandler","logout",{},true).then(function(){if(i===true){t.detachUserEvents();}if(t.oUserActivityTimer){clearTimeout(t.oUserActivityTimer);}if(t.remainingTimer){clearTimeout(t.remainingTimer);}if(t.notifyServerTimer){clearTimeout(t.notifyServerTimer);}o.openLoadingScreen();o.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.setDirtyFlag(false);sap.ushell.Container.defaultLogout();});};};return e;},true);
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:d},"sap-app-origin":{injectFrom:"startupParameter",isIntentParameter:false,getValue:d}};function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}function b(p,A){var r=A.getReservedParameters();return r&&r[p];}function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}function f(){return Object.keys(T);}function i(p){return T.hasOwnProperty(p);}function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/utils"],function(L,U,a,_,b,c,d,e){"use strict";function l(s){L.debug(s,"sap.ushell.URLTemplateProcessor");}function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}function g(P){var j=Object.keys(P).filter(function(s){return typeof P[s]==="object"&&P[s].hasOwnProperty("renameTo");});var o=[];j.forEach(function(s){var k=P[s];if(k.hasOwnProperty("renameTo")){o.push(function(u,m){var r=m;r=m.replace(new RegExp(s+"=","g"),k.renameTo+"=");return r;});}});return o;}function h(t,s,r,A,D){var E=p(t,s,r,A,D);return i(t,E);}function p(t,s,r,A,D){l("[TEMPLATE EXPANSION] "+t.urlTemplate);var o=_.buildDefinitionParameterSet(t.parameters,s,D)||{};var R=e.removeArrayParameterNotation(r[D]||{});var j=d.parseTemplateParameterSet(o,D);var k=d.parseTemplateParameterSetAsLiterals(R);var P=e.mergeObject(k,j);l("- parsed template parameters: "+JSON.stringify(P,null,3));var G=b.buildDependencyGraph(P);l("- created dependency graph: "+JSON.stringify(G,null,3));var m=b.getDependencyResolutionOrder(G);l("- resolving in order: "+m.join(" > "));var n=c.resolveAllParameters(P,m,s,r,A,D);Object.keys(n).forEach(function(q){var u=n[q];l(q+" --> "+f(u));});return{oDefinitionParamsSet:o,oResolvedParameters:n};}function i(t,E){var P=g(E.oDefinitionParamsSet||{});var u=t.urlTemplate;var s=U.expand(u,E.oResolvedParameters).toString();l("- created URL: "+s);P.forEach(function(o){s=o(u,s);});if(P.length>0){l("- created URL (post expansion): "+s);}return s;}return{prepareExpandData:p,expand:h};});
sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData","sap/base/Log","sap/base/util/deepExtend"],function(U,E,L,a,d){"use strict";function c(o){if(o===undefined){return undefined;}return d({},o);}function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}function b(t){return t.indexOf("sap_")===0;}var e=function(C){var f=[],B,s,o,S,h=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getTimeZone=function(){return C.timeZone;};this.getInitials=function(){var F=C.fullName||"",I="",n=true;for(var i=0,l=F.length;i<l;++i){if(F[i]===" "){n=true;}else if(n){n=false;I+=F[i];}}return I;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),i=new L(l),j=sap.ui.getCore().getConfiguration().getLanguageTag();j=j.replace("-","_");var k=i.getLanguages(),m=k[j]||this.getLanguage().toUpperCase();return m;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;h.fireEvent("onSetImage",u);};this.attachOnSetImage=function(F,D){h.attachEvent("onSetImage",F,D);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===e.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===e.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===e.prototype.constants.themeFormat.NWBC){if(b(o.theme)){return o.theme;}return this.getTheme(e.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var i="setTheme not permitted";a.error(i);throw new Error(i);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(e.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{currentThemeId:N,themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var i="setAccessibilityMode not permitted";a.error(i);throw new Error(i);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(i){if(this.isSetContentDensityPermitted()===false){var j="setContentDensity not permitted";a.error(j);throw new Error(j);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,i);C.contentDensity=i;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return d([],f);};this.setChangedProperties=function(p,i,n){f.push({propertyName:p.propertyName,name:p.name,oldValue:i,newValue:n});};this.resetChangedProperties=function(){f=[];};this.resetChangedProperty=function(p){f=f.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(i){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,i);C.isImageConsent=i;};this.getImageConsent=function(){return C.isImageConsent;};this.getImportBookmarksFlag=function(){return C.importBookmarks||null;};this.setImportBookmarksFlag=function(i){this.setChangedProperties({propertyName:"importBookmarks",name:"MYHOME_IMPORT_FROM_CLASSIC"},this.getImportBookmarksFlag()||"",i);C.importBookmarks=i;};this.getShowMyHome=function(){return C.showMyHome!==false;};this.setShowMyHome=function(i){i=!!i;this.setChangedProperties({propertyName:"showMyHome",name:"MYHOME_ENABLEMENT"},C.showMyHome,i);C.showMyHome=i;};s={locationPathUi5:(new U(sap.ui.require.toUrl(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){a.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){a.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){a.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};e.prototype._amendTheme=function(t,s){var T={},f,r;function h(R,o){var u,O,p={};u=new U(R);O=g(u);if(O){p.locationOrigin=O;p.locationPath=u.path();}else{p.locationOrigin=o.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){f=T.originalTheme.theme.split("@",2);T.theme=f[0];T.suppliedRoot=f[1];r=h(f[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=h(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(b(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};e.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"},NEW_DESIGN:"sap_horizon"};return e;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub","sap/base/Log","sap/base/util/extend"],function(u,a,T,E,L,b){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(d,i,f){e.subscribe("launchpad",d,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(d,i,f){e.subscribe(d,t._handleAction,t);});this._observedEventHubEvents.forEach(function(d,i,f){t._aDoableObjects.push(E.on(d).do(t._handleActionEventHub.bind(t)));});L.addLogListener(this);t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(d,i,f){e.unsubscribe("launchpad",d,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(d,i,f){e.unsubscribe(d,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});L.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,d){if(this._isActive){this._addMessageInternal(t,m,d);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){if(d.level<=2){var e=d.message;if(typeof d.details!=="undefined"&&(d.details!=="")){e=e+", "+d.details;}this.addMessage(this.messageType.ERROR,e);}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,d,e,f,g;return function(){var h=this.getMetadata().getName();if(h==="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(h==="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var i=a.parseShellHash(n);n="#"+a.constructShellHash({target:{semanticObject:i.semanticObject,action:i.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();d=sap.ui.getCore().byId(this.getId());e=d.getModel();f=this.getBindingContext();g=f.getPath();l.tileTitle=f.getModel().getProperty(g).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+e.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,d){var l=this._getLoggingQueueFromStorage(),e={type:null},p;for(p in this.messageType){if(t===this.messageType[p]){e.type=p;break;}}if(e.type===null){return;}b(e,{messageID:d,messageText:m,time:new Date(),toString:function(){var f=[this.type,this.time];if(typeof this.messageID!=="undefined"){f.push(this.messageID);}f.push(this.messageText);return f.join(" :: ");}});l.push(e);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(C,e,d){var m;switch(e){case"deleteTile":m="Delete Tile "+(d.tileId||"");break;case"moveTile":m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case"createGroupAt":m="Create Group";break;case"changeGroupTitle":m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case"deleteGroup":m="Delete Group "+(d.groupId||"");break;case"addTile":var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,f=this._findInModel(s,t),g=f.id,h=d.groupContext.getObject(),i=h.groupId;m="Add Tile "+(g||"")+" to Group "+(i||"");break;case"moveGroup":m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case"appOpened":m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case"addBookmarkTile":m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case"showCatalog":m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var d,f=m,i,g;try{d=p.split("/");for(i=0;i<d.length;i=i+1){if(g!==d[i]){continue;}f=f[g];}}catch(e){return undefined;}return f;},_getUserDetails:function(){var d=sap.ushell.Container.getUser();return{fullName:d.getFullName()||"",userId:d.getId()||"",eMail:d.getEmail()||"",Language:d.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(d,e){if((!d)||(!e)){return false;}return(this._getHashSegment(d)===this._getHashSegment(e));},_getHashSegment:function(d){var i=d.indexOf("~"),e;if(i>-1){return d.substring(0,i);}e=d.indexOf("?");if(e>-1){return d.substring(0,e);}return d;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var c=new U();return c;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery","sap/base/Log"],function(U,a,S,c,p,q,L){"use strict";function r(O,K){K.forEach(function(s){delete O[s];});}function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]===D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}function b(P){var B=c.filterObject(P,d);return B;}function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}function f(T,s,y,E){var z,A;T=encodeURIComponent(T);z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);C(R);});});}function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;a.setSystemAlias(F,I.resolutionResult);R(F);}).fail(C);});}function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);C(R);});});}function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);D(R);});});}function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{L.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);return R;}function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}function w(T,P){var s=v(T);if(s.error){L.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(C){return C.name.toUpperCase()+"%3d"+C.value;});var D,A=true;if(P.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){D=P["DYNP_SKIP_SEL_SCREEN"];delete P["DYNP_SKIP_SEL_SCREEN"];if(D[0]===""||D[0]===" "||D[0]==="0"||D[0]===0||(D[0]&&D[0].toLowerCase()==="false")){A=false;}}var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var B=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(B){y.push(B);}var H=y.length>0;return s.transactionParamName+"="+(H&&A?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/Log"],function(U,u,q,i,L){"use strict";var S="";var O={apply:"apply",applied:"applied"};function a(o){return(o.protocol()||"").length>0;}function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var p=u.getLocalStorage();var t=p.getItem(K);var w={};if(t){try{w=JSON.parse(t);}catch(x){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+t);}return new q.Deferred().resolve(w).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,w,x;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(y){D.reject(y);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){w=R.language;}else{x=sap.ushell.Container.getUser();if(!x){L.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");w="en";}else{w=x.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+w;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){L.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}L.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}function h(V){L.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var w=R[n].pathPrefix;var P=p===w;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(w);}else{m(p);}});return D.promise();}return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ushell/utils/UrlParsing","sap/ushell/_ApplicationType/systemAlias"],function(u,s){"use strict";function g(){return u;}function a(U,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(U)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(U);}throw new Error("Invalid system alias semantics: '"+e+"'");}function b(p,U){var S,f;if(p){var e=U.match(/#.*/);if(e){f=e;S=U.replace(e,"");}else{S=U;f="";}U=S+((U.indexOf("?")<0)?"?":"&")+p+f;}return U;}function c(p,U){var e=U.match(/#.*/);var f=e&&e[0];if(!f){var P=u.paramsToString(p);return b(P,U);}var h=u.parseShellHash(f);Object.keys(p).forEach(function(l){var m=p[l];h.params[l]=[m];});var i=Object.keys(h.params).reduce(function(o,K){var v=h.params[K];var V=v.map(function(l){return encodeURIComponent(l);});o[encodeURIComponent(K)]=V;return o;},{});h.params=i;var j=U.replace(f,"");var k=u.constructShellHash(h);return j+"#"+k;}function d(r,e){if(r["sap-system"]&&r["sap-system"]!=null&&r["sap-system"]!=undefined&&r["sap-system"]!=""){r.systemAlias=r["sap-system"];}else{r.systemAlias=e.systemAlias;}if(r.systemAlias===undefined){delete r.systemAlias;}}return{getURLParsing:g,appendParametersToUrl:b,appendParametersToIntentURL:c,absoluteUrlDefinedByUser:a,setSystemAlias:d};});
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(S){S.compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params","sap-iframe-hint","sap-keep-alive","sap-wd-configId"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});}).catch(function(k){j(k);});});}function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}a.setSystemAlias(R,I.resolutionResult);["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}function r(I,m,E,j){var A=I.params["sap-ui2-wd-app-id"][0];var C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];var o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}return{createModel:d};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder',["sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(t,r,u,T){"use strict";var S="/payload/parameters/names";function b(p,s,d){if(!p||!p.names){return{};}if(!p.hasOwnProperty("mergeWith")){return p.names;}var m=p&&p.mergeWith;if(Array.isArray(m)===false&&typeof m!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array");}var P=p&&p.names;var D=f(p.mergeWith,s,d,{});var M=D.map(function(a){var o=t.parsePath(d,a);v(o);var c=r.resolvePath(o,{},s,{},{});if(!T.isPlainObject(c)){throw new Error("Cannot merge parameters from '"+a+"'. The path must point to an object");}return c;}).reduce(function(o,a){o=u.mergeObject(o,a);return o;},{});return u.mergeObject(M,P);}function v(p){if(p.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}p.value.forEach(function(P){if(P.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});}function f(m,s,d,V){if(Array.isArray(m)){return m.slice().reverse();}if(typeof m==="string"){if(V[m]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.");}V[m]=true;var p=t.parsePath(d,m);v(p);var a=r.resolvePath(p,{},s,{},{});if(!a){throw new Error("The specified mergeWith path does cannot be resolved: '"+m+"'");}var h=S.split("/").slice(1).reduce(function(o,c){if(o.result&&o.obj&&o.obj.hasOwnProperty(c)){o.obj=o.obj[c];}else{o.result=false;}return o;},{obj:a,result:true}).result;if(!h){throw new Error(m+" does not contain "+S+". Please make sure "+m+" points to the root of a URL template.");}return f(a.payload.parameters.mergeWith,s,d,V).concat([m+S]);}return[];}return{buildDefinitionParameterSet:b};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/base/util/deepExtend"],function(d){"use strict";function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}function a(n){return n.type==="reference"&&!n.namespace;}function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}function c(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}function g(D){var o=d({},D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}return{buildDependencyGraph:c,getDependencyResolutionOrder:g};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(d,U,_,u){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var j=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(j.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+j.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var j=V.every(_.hasValue);return j?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(_.hasValue(P)){return P;}return _.hasValue(n)?n:undefined;});}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(A,v){var j=new RegExp(A.strRegExp,A.flags);var R=A.strReplace||"";if(typeof v===undefined||v===null){return v;}if(u.isArray(v)){if(v.length===1){return O.replace.fn.call(this,A,v[0]);}return v.map(function(V){return O.replace.fn.call(this,A,V);});}if(u.isPlainObject(v)){return Object.keys(v).reduce(function(o,k){var V=v[k];o[k]=O.replace.fn.call(this,A,V);return o;},{});}if(typeof v==="string"){return v.replace(j,R);}return O.replace.fn.call(this,A,v+"");}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!u.isPlainObject(s)&&!u.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=_.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var j=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(j.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var j=new RegExp(s);var m=v.filter(function(V){var I;if(u.isPlainObject(V)){I=Object.keys(V);}else if(u.isArray(V)){I=V;}else{I=[""+V];}return I.some(j.exec.bind(j));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},stringify:{args:[],minValues:1,fn:function(A,v){if(u.isArray(v)){if(v.length===0){return"";}if(v.length===1){v=v[0];}}if(typeof v==="string"){return v;}return JSON.stringify(v);}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var V=v[0];if(typeof V!=="string"){return V;}return encodeURIComponent(V);}}};function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}function g(v){var V;if(u.isArray(v)){V=v;}else if(u.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}function a(F,o,v){if(v!==undefined&&!u.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}function b(F,o,v){if(v!==undefined&&!u.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=u.isArray(v)?v.length:0;if(_.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(_.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}function c(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}function e(A){return A.charAt(A.length-1)!=="?";}function r(A){return A.substr(0,A.length-1);}function p(F,A){var j=d([],O[F].args);if(c(j)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=j.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=j.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}function f(P,F,j,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,j);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}function t(s){return s.split("").map(function(j){if(j==="["){return"[\\[]";}return"["+j+"]";}).join("");}function h(){var A=Object.keys(O);return A.map(t).join("|");}return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/base/util/deepExtend","sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/_URLTemplateProcessor/utils"],function(d,_,a){"use strict";var O={literal:r,expression:g,reference:h,function:e,path:b,pipe:c};function f(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}function r(p){return p.value;}function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return f(l,k,R);}function c(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return _.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},d({},o[D]||{}));}function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return _.applyFunctionInValueContext(F,k,v);}function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:c,resolveParameterValue:i,resolveAllParameters:j};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/_URLTemplateProcessor/Functions"],function(_){"use strict";function p(D,E){var s=k();var t=s.exec(E);if(t===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+_.getPossibleFunctionsRegExpString()+")[^a-z]";var u=new RegExp(A);if(u.exec(S)){return g(D,S);}return d(D,S);}function a(D,P){var s=h(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(g.bind(null,D)))};}function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var t=s.split(":");N=t[0];s=t[1];}var u={type:"reference",value:s};if(N){u.namespace=N;}return u;}function c(D,P){var s=P.split("/");var t="relative";if(s[0]===""){t="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:t,value:s.map(e.bind(null,D))};}function d(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return d(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return c(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return f(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}function e(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return d(D,r(P));}return{type:"literal",value:P};}function f(L){return{type:"literal",value:L};}function g(D,F){var t=F.split(/[(\s]/)[0];var R=m(F,t);R=R.replace(/^\s+/,"");var u="";if(R.charAt(0)==="("){var v=R.search(/([)]\s)|([)]$)/);if(v===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}u=R.substr(1,v-1);R=m(R,"("+u+")");R=R.replace(/^\s+/,"");}var w=R;return{type:"function",name:t,args:h(D,u,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(d.bind(null,D)),params:h(D,w,",").map(d.bind(null,D))};}function h(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var t=A.length-1;var P=A[t];var M=P.length>0&&P.charAt(P.length-1)==="\\";var u="";if(M){u=A.pop();u=u.substr(0,u.length-1)+s;}A.push(u+N);return A;},[]);return S;}function i(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=n(s);if(I){return f(s);}var t="expression";var u=p(D,s);var v={type:t,value:u};if(R){u.renameTo=R;}return v;}function j(s){var E=s.indexOf("{")===0;var t=k();var G=t.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}function k(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var u="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+u+"|"+V+")";var t="("+F+"(,"+F+")*)";var w="("+"[(]"+t+"[)]"+")?";var A=_.getPossibleFunctionsRegExpString();var x="("+"("+A+")"+"("+w+")"+")";var W="([*]([|]"+x+")*)";var E="^{("+W+"|"+"(("+x+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var y=new RegExp(E);return y;}function l(s){return j(s)!==null;}function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}function m(t,P){if(t.indexOf(P)===0){return t.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}function n(s){return typeof s==="string"&&!l(s);}function o(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=i(D,v);return s;},{});}function q(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=f(v);return s;},{});}return{parseTemplateParameterSet:o,parseTemplateParameterSetAsLiterals:q,parsePath:c,_isExpression:l,_parseList:h,_parseParameterValue:i};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/base/util/deepExtend"],function(d){"use strict";function h(v){return v!==null&&typeof v!=="undefined";}function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}function m(a,b){var c=d({},a);var e=d({},b);return Object.keys(e).reduce(function(o,O){o[O]=e[O];return o;},c);}return{mergeObject:m,hasValue:h,removeArrayParameterNotation:r};});
sap.ui.predefine('sap/ushell/adapters/cdm/PagesCommonDataModelAdapter',["sap/base/Log","sap/base/util/deepExtend","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/ushell/utils/clone","sap/base/util/extend","sap/base/util/Version","sap/ui/thirdparty/jquery"],function(L,d,c,a,e,V,q){"use strict";var P=function(){this._oCDMPagesRequests={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(r,b){this.fnSiteResolve=r;this.fnSiteReject=b;}.bind(this));};P.prototype.getSite=function(){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavigationDataProvider").then(function(n){return n.getNavigationData();}).then(function(n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var s=I[i].permanentKey||I[i].id;N[s]=I[i];}var S={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:{},applications:c.getApplications(N),vizTypes:{},systemAliases:d({},n.systemAliases),pages:{}};this.fnSiteResolve(S);return S;}.bind(this)).then(D.resolve).catch(function(b){D.reject(b);this.fnSiteReject(b);}.bind(this));return D.promise();};P.prototype.getPage=function(p){if(!p){var E="PagesCommonDataModelAdapter: getPage was called without a pageId";L.fatal(E,null,this._sComponent);return Promise.reject(E);}return this.oSitePromise.then(function(s){if(s.pages[p]){return s.pages[p];}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPage(p),n.getNavigationData(),sap.ushell.Container.getServiceAsync("URLParsing")]);}).then(function(r){var o=r[0];var n=r[1];var u=r[2];this._addVisualizationsToSite(s,o.visualizations,u);this._addVizTypesToSite(s,o);this._addPageToSite(s,o.page,n);return s.pages[o.page.id];}.bind(this)).catch(function(v){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",v,this._sComponent);return Promise.reject(v);}.bind(this));}.bind(this));};P.prototype._addVizTypesToSite=function(s,D){var v={};Object.keys(D.vizTypes).forEach(function(b){if(!s.vizTypes[b]){v[b]=D.vizTypes[b];}});e(s.vizTypes,c.getVizTypes(v));};P.prototype._addVisualizationsToSite=function(s,v,u,C){var o;if(C){o={};Object.keys(v).forEach(function(b){if(!s.visualizations[b]){o[b]=v[b];}});}else{o=v;}e(s.visualizations,c.getVisualizations(o,u));};P.prototype._addPageToSite=function(s,p,n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var b=I[i].permanentKey||I[i].id;N[b]=I[i];}var o=s.pages[p.id]={identification:{id:p.id,title:p.title},payload:{layout:{sectionOrder:p.sections.map(function(l){return l.id;})},sections:{}}};var S;var f;for(var j=0;j<p.sections.length;j++){S=p.sections[j];f=o.payload.sections[S.id]={id:S.id,title:S.title,layout:{vizOrder:S.viz.map(function(v){return v.id;})},viz:{}};var v,g,t;for(var k=0;k<S.viz.length;k++){v=S.viz[k];g=!s.visualizations[v.vizId];t=v.targetMappingId&&!N[v.targetMappingId];if(g||t){var h=f.layout.vizOrder;h.splice(h.indexOf(v.id),1);if(g){L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.");}if(t){L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching target with id "+v.targetMappingId+". As the tile cannot be used to start an app it is removed from the page.");}continue;}f.viz[v.id]={id:v.id,vizId:v.vizId,displayFormatHint:v.displayFormatHint};}}};P.prototype.getPages=function(p){if(!(p&&Array.isArray(p)&&p.length!==0)){var E="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";L.fatal(E,null,this._sComponent);return Promise.reject(E);}return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([v.getVisualizationData(),sap.ushell.Container.getServiceAsync("URLParsing"),this.oSitePromise]).then(function(r){var o=r[0];var u=r[1];var s=r[2];this._addVisualizationsToSite(s,o.visualizations,u);this._addVizTypesToSite(s,o);var b=[],f;for(var i=0;i<p.length;i++){f=p[i];if(!s.pages[f]){b.push(p[i]);}}if(b.length===0){return s.pages;}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var g=S[0];var n=S[1];return Promise.all([g.getPages(b),n.getNavigationData()]);}).then(function(R){var g=R[0];var n=R[1];for(var j=0;j<g.length;j++){this._addVisualizationsToSite(s,g[j].visualizations,u,true);this._addVizTypesToSite(s,g[j]);this._addPageToSite(s,g[j].page,n);}return s.pages;}.bind(this)).catch(function(g){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",g,this._sComponent);return Promise.reject(g);}.bind(this));}.bind(this));}.bind(this));};P.prototype.getPersonalization=function(C){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o;var b=new V(C);o={container:"sap.ushell.cdm.personalization",item:"data"};if(b.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false};p.getPersonalizer(o,s).getPersData().done(function(f){D.resolve(f||{});}).fail(function(E){D.reject(E);});}).catch(function(){D.reject("Personalization Service could not be loaded");});return D.promise();};P.prototype.setPersonalization=function(p){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var b;var C=new V(p.version);b={container:"sap.ushell.cdm.personalization",item:"data"};if(C.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false};o.getPersonalizer(b,s).setPersData(p).done(function(){D.resolve(p);}).fail(D.reject);}).catch(function(){D.reject("Personalization Service could not be loaded");});return D.promise();};P.prototype.getVisualizations=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),v.getVisualizationData(),this.oSitePromise]).then(function(r){var u=r[0];var o=r[1];var s=r[2];this._addVisualizationsToSite(s,o.visualizations,u);return s.visualizations;}.bind(this));}.bind(this));};P.prototype.getVizTypes=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([v.getVisualizationData(),this.oSitePromise]).then(function(r){var o=r[0];var s=r[1];this._addVizTypesToSite(s,o);return s.vizTypes;}.bind(this));}.bind(this));};P.prototype.getVizType=function(v){return this.oSitePromise.then(function(s){var o=s.vizTypes[v];if(o){return o;}if(!v.startsWith("X-SAP-UI2-CHIP:")){return;}return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(b){return b.loadVizType(v);}).then(function(l){if(!l){return;}var b={};b[v]=l;e(s.vizTypes,c.getVizTypes(b));return s.vizTypes[v];});});};P.prototype.getCachedVisualizations=function(){return this.oSitePromise.then(function(s){return s.visualizations;});};P.prototype.getCachedVizTypes=function(){return this.oSitePromise.then(function(s){return s.vizTypes;});};return P;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/util/AppForInbound',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};A._getURLApp=function(i,a){return{"sap.app":{id:i,crossNavigation:{inbounds:{"Shell-launchURL":{semanticObject:"Shell",action:"launchURL",signature:{parameters:{"sap-external-url":{required:true,filter:{value:a.resolutionResult.url,format:"plain"}}}}}}}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};A._getUI5App=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui5":{componentName:a.resolutionResult.ui5ComponentName},"sap.ui":{technology:"UI5",deviceTypes:a.deviceTypes},"sap.platform.runtime":{componentProperties:{url:a.resolutionResult.url}}};};A._getApplicationInbound=function(i){var a={};a[i.id]={semanticObject:i.semanticObject,action:i.action,signature:i.signature};return a;};A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"GUI",deviceTypes:a.deviceTypes},"sap.flp":{type:"application"},"sap.gui":{transaction:t}};};A._getWDAApp=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};A._getWCFApp=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};return A;});
sap.ui.predefine('sap/ushell/adapters/cdm/util/cdmSiteUtils',["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(A,L,u){"use strict";var c={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};c.getVisualizations=function(v,a){var V={};Object.keys(v).forEach(function(b){var o=v[b];var s;if(o.isCustomTile){s=o.vizType;}else if(o.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var d={vizType:s,vizConfig:{"sap.app":{title:o.title,subTitle:o.subTitle,info:o.info,tags:{keywords:o.keywords}},"sap.ui":{icons:{icon:o.icon}},"sap.flp":{tileSize:o.size,indicatorDataSource:o.indicatorDataSource,numberUnit:o.numberUnit,target:u.toTargetFromHash(o.url,a)}}};if(o.isCustomTile){d.vizConfig["sap.flp"]._instantiationData=o._instantiationData;}V[b]=d;}.bind(this));return V;};c.getApplications=function(n){return Object.keys(n).reduce(function(a,b){var i=n[b],I=i.permanentKey||i.id;try{a[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");a[b]={};}return a;},{});};c.getVizTypes=function(v){return Object.keys(v).reduce(function(V,s){var a=v[s].id;if(!V[a]){V[a]={"sap.app":{id:a,type:"chipVizType"},"sap.flp":{vizOptions:v[s].vizOptions,tileSize:v[s].tileSize}};}return V;},{});};return c;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications',["sap/base/util/ObjectPath"],function(O){"use strict";var r={};r.getId=function(a){return O.get(["sap.app","id"],a);};r.getTitle=function(a){return O.get(["sap.app","title"],a);};r.getSubTitle=function(a){return O.get(["sap.app","subTitle"],a);};r.getIcon=function(a){return O.get(["sap.ui","icons","icon"],a);};r.getInfo=function(a){return O.get(["sap.app","info"],a);};r.getKeywords=function(a){return O.get(["sap.app","tags","keywords"],a);};r.getContentProviderId=function(a){return O.get(["sap.app","contentProviderId"],a);};r.getInbounds=function(a){return O.get(["sap.app","crossNavigation","inbounds"],a);};r.getInbound=function(a,i){return O.get(["sap.app","crossNavigation","inbounds",i],a);};r.getInboundTarget=function(a,A,i){var o=O.get([A],a)||{};var I=this.getInbound(o,i);if(!o||!I){return;}return{semanticObject:I.semanticObject,action:I.action};};return r;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readHome',["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(t,r){"use strict";var a={};a.getGroupsArrayFromSite=function(s){var l=[];s.site.payload.groupsOrder.forEach(function(g,i){var G=s.groups[g];if(G){G.payload=G.payload||{};l.push(G);}});return l;};a.getGroupsMapFromSite=function(s){return s.groups;};a.getGroupIdsFromSite=function(s){return s.site.payload.groupsOrder;};a.getGroupFromSite=function(s,g){return s.groups[g];};a.getDefaultGroup=function(g){var d=g.filter(function(G){return G.payload.hasOwnProperty("isDefaultGroup");});if(d.length>0){return d[0];}};a.getGroupId=function(g){return g.identification&&g.identification.id;};a.getGroupTitle=function(g){return g.identification.title;};a.isGroupPreset=function(g){if(!g.payload.hasOwnProperty("isPreset")){return true;}return!!g.payload.isPreset;};a.isGroupLocked=function(g){return!!g.payload.locked;};a.isGroupVisible=function(g){return!!(g.identification.isVisible===undefined||g.identification.isVisible===true);};a.getGroupTiles=function(g){if(g.payload.tiles&&t.isArray(g.payload.tiles)&&g.payload.tiles.length>0){return g.payload.tiles;}return[];};a.getGroupLinks=function(g){if(g.payload.links&&t.isArray(g.payload.links)&&g.payload.links.length>0){return g.payload.links;}return[];};a.getTileId=function(T){return T.id;};a.getTileVizId=function(T){return T.vizId;};a.getTileTitle=function(R,T){var o;if(T&&T.isBookmark){return T.title;}o=R[T.id];if(o){return T.title||o.tileResolutionResult.title;}};a.getContentProviderId=function(T){return T.contentProvider||undefined;};a.getTileSubtitle=function(R,T){var o;if(T.isBookmark){return T.subTitle;}o=R[T.id];if(o){return T.subTitle||o.tileResolutionResult.subTitle;}};a.getTileInfo=function(R,T){var o;if(T.isBookmark){return T.info;}o=R[T.id];if(o){return T.info||o.tileResolutionResult.info;}};a.getTileIcon=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileIndicatorDataSource=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileSize=function(R,T){var o=R[T.id];if(o&&o.tileResolutionResult&&o.tileResolutionResult.size){return o.tileResolutionResult.size;}};a.isLink=function(R,T){var o=R[T.id];if(o){return!!o.isLink;}return false;};a.isCard=function(R,i){var o=R[i.id];if(o){return!!o.tileResolutionResult.isCard;}return false;};a.isGroupTile=function(T){return!!(T&&T.id&&!T.isCatalogTile);};a.supportsFormFactor=function(A,f){return A.deviceTypes&&A.deviceTypes[f];};a.getInbound=function(A,i){var I=r.getInbound(A,i);return I&&{key:i,inbound:I};};return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils',["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ushell/library"],function(r,a,b,u,C,d,i,O,c,e,f){"use strict";var g={};var D=f.DisplayFormat;g.getVizData=function(s,v,U,S){if(v.isBookmark&&v.url){v=d(v);v.subTitle=v.subtitle;v.target=u.toTargetFromHash(v.url);}var h=this.getCdmParts(s,v);var V=h&&h[1]||{};var A=h&&h[3]||{};var o=r.get(s,b.getTileVizId(v))||{};var j={id:b.getTileId(v),vizId:b.getTileVizId(v)||"",vizType:v.vizType||r.getTypeId(o)||"",vizConfig:c({},V,v.vizConfig),title:r.getTitle(h)||"",subtitle:r.getSubTitle(h)||"",icon:r.getIcon(h)||"",keywords:r.getKeywords(h)||[],info:r.getInfo(h)||"",target:v.target||r.getTarget(o)||{},indicatorDataSource:this._getIndicatorDataSource(v,o,S),isBookmark:v.isBookmark||false,contentProviderId:v.contentProviderId||a.getContentProviderId(A)||"",displayFormatHint:v.displayFormatHint,numberUnit:r.getNumberUnit(h),_instantiationData:r.getInstantiationData(o)};j.target=this.harmonizeTarget(j.target);j.targetURL=u.toHashFromVizData(j,s.applications);if(j.indicatorDataSource&&j.indicatorDataSource.dataSource){j.dataSource=r.getDataSource(h,j.indicatorDataSource.dataSource);}if(v.isBookmark){this._addBookmarkInstantiationData(j,s);}if(!j._instantiationData||!Object.keys(j._instantiationData)){j._instantiationData={platform:"CDM",vizType:r.getType(s,j.vizType)};}this._evaluateDisplayFormat(j,s);return j;};g._getIndicatorDataSource=function(v,V,s){if(v.indicatorDataSource&&v.indicatorDataSource.path){if(v.contentProviderId&&s){v.indicatorDataSource.path=s.getFullyQualifiedXhrUrl(v.indicatorDataSource.path);}return v.indicatorDataSource;}return r.getIndicatorDataSource(V);};g.getVizRef=function(v){var V={id:v.id,vizId:v.vizId,title:v.title,subTitle:v.subtitle,icon:v.icon,keywords:v.keywords,info:v.info,target:v.target,indicatorDataSource:v.indicatorDataSource,contentProviderId:v.contentProviderId,displayFormatHint:v.displayFormatHint,numberUnit:v.numberUnit};if(V.indicatorDataSource&&V.indicatorDataSource.originalPath){V.indicatorDataSource.path=V.indicatorDataSource.originalPath;delete V.indicatorDataSource.originalPath;}if(v.isBookmark){V.isBookmark=v.isBookmark;if(v.vizConfig!==undefined&&!e(v.vizConfig)){V.vizType=v.vizType;if(v.cdmVizType){V.vizType=v.cdmVizType;}V.vizConfig=v.vizConfig;}}return V;};g.getCdmParts=function(s,t){var v=r.get(s,b.getTileVizId(t))||{};var V=r.getConfig(v);var A=r.getAppDescriptor(s,r.getAppId(v));var I=a.getInbound(A,r.getInboundId(v));return[t,V,I,A];};g.harmonizeTarget=function(t){var p=t.parameters;if(!p||i(p)){return t;}var P={};p.forEach(function(o){if(P[o.name]){if(!Array.isArray(P[o.name].value.value)){P[o.name].value.value=[P[o.name].value.value];}P[o.name].value.value.push(o.value);}else{P[o.name]={value:{value:o.value,format:"plain"}};}});t.parameters=P;return t;};g._evaluateDisplayFormat=function(v,s){var h=v.displayFormatHint;var V=r.getType(s,v.vizType);var t=r.getTileSize(V);var S=t==="1x2"?D.StandardWide:D.Standard;var j=[S,D.Compact];v.supportedDisplayFormats=r.getSupportedDisplayFormats(V)||j;var k=r.getDefaultDisplayFormat(V)||S;if(v.supportedDisplayFormats.indexOf(h)===-1){v.displayFormatHint=k;}};g._addBookmarkInstantiationData=function(v,s){if(v.vizType){var V=r.getType(s,v.vizType);var h=O.get(["sap.app","type"],V||{});if(V&&h!=="chipVizType"){v._instantiationData={platform:"CDM",vizType:V};}else{var o=r.getChipConfigFromVizReference(v);v._instantiationData={platform:"ABAP",chip:d(o),simplifiedChipFormat:true};v.cdmVizType=v.vizType;v.vizType=o.chipId;}}else if(v.indicatorDataSource&&v.indicatorDataSource.path){v.vizType="sap.ushell.DynamicAppLauncher";}else{v.vizType="sap.ushell.StaticAppLauncher";}};g.getBookmarkVizTypeIds=function(B){var I=["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"];var s=B.vizType;if(s&&!I.includes(s)){I.push(s);}var o=r.getChipConfigFromVizReference(B);var h=o&&o.chipId;if(h&&!I.includes(h)){I.push(h);}return I;};return g;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations',["sap/ushell/utils","sap/base/util/ObjectPath"],function(u,O){"use strict";var r={};r.getMap=function(s){return s.visualizations;};r.get=function(s,i){return O.get(["visualizations",i],s);};r.getTypeMap=function(s){return s.vizTypes;};r.getType=function(s,i){return O.get(["vizTypes",i],s);};r.getTypeId=function(v){return O.get("vizType",v||{});};r.isStandardVizType=function(v){return v==="sap.ushell.StaticAppLauncher"||v==="sap.ushell.DynamicAppLauncher";};r.getSupportedDisplayFormats=function(v){return O.get(["sap.flp","vizOptions","displayFormats","supported"],v||{});};r.getDefaultDisplayFormat=function(v){return O.get(["sap.flp","vizOptions","displayFormats","default"],v||{});};r.getTileSize=function(v){return O.get(["sap.flp","tileSize"],v||{});};r.getConfig=function(v){return O.get("vizConfig",v||{});};r.getTarget=function(v){var V=this.getConfig(v);return O.get(["sap.flp","target"],V||{});};r.getAppId=function(v){var t=this.getTarget(v);return O.get("appId",t||{});};r.getInboundId=function(v){var t=this.getTarget(v);return O.get("inboundId",t||{});};r.getOutbound=function(v,i){var o={semanticObject:i.semanticObject,action:i.action,parameters:this.getTarget(v).parameters||{}};o.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(v)}};return o;};r.startsExternalUrl=function(v){var t=this.getTarget(v);return t&&t.type==="URL";};r.getAppDescriptor=function(s,i){return O.get(["applications",i],s);};r.getKeywords=function(c){var C=u.clone(c);C.splice(2,1);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.tags.keywords","sap|app.tags.keywords"]);};r.getTitle=function(c){return u.getNestedObjectProperty(c,["title","sap|app.title","title","sap|app.title"]);};r.getSubTitle=function(c){return u.getNestedObjectProperty(c,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"]);};r.getIcon=function(c){return u.getNestedObjectProperty(c,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"]);};r.getNumberUnit=function(c){var C=u.clone(c);C.splice(2,2);return u.getNestedObjectProperty(C,["numberUnit","sap|flp.numberUnit"]);};r.getInfo=function(c){return u.getNestedObjectProperty(c,["info","sap|app.info","info","sap|app.info"]);};r.getShortTitle=function(c){var C=u.clone(c);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"]);};r.getInstantiationData=function(v){return O.get(["vizConfig","sap.flp","_instantiationData"],v);};r.getIndicatorDataSource=function(v){return O.get(["vizConfig","sap.flp","indicatorDataSource"],v);};r.getDataSource=function(c,d){var C=u.clone(c);C.splice(2,1);C.splice(0,1);var D=u.getNestedObjectProperty(C,["sap|app.dataSources","sap|app.dataSources"])||{};return D[d];};r.getChipConfigFromVizReference=function(v){return O.get(["vizConfig","sap.flp","chipConfig"],v);};return r;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/utilsCdm',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/utils/UrlParsing","sap/base/Log"],function(u,r,q,d,i,O,m,a,b,c,L){"use strict";var e={};e.getMember=function(o,A){return u.getMember(o,A);};e.getNestedObjectProperty=function(o,A,D){return u.getNestedObjectProperty(o,A,D);};e.mapOne=function(k,s,A,v,V,S){var I=false;s=d({},s);A=d({},A);v=d({},v);V=d({},V);v=v||{};V=V||{};var o={};o.semanticObject=this.getMember(s,"semanticObject");o.action=this.getMember(s,"action");var f=r.getConfig(v);o.title=r.getTitle([undefined,f,s,A]);o.info=r.getInfo([undefined,f,s,A]);o.icon=r.getIcon([undefined,f,s,A]);o.subTitle=r.getSubTitle([undefined,f,s,A]);o.shortTitle=r.getShortTitle([undefined,f,s,A]);o.keywords=r.getKeywords([undefined,f,s,A]);o.numberUnit=r.getNumberUnit([undefined,f,undefined,undefined]);o.deviceTypes=this.getMember(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(this.getMember(s,"deviceTypes")||{},M)){o.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(o.deviceTypes,M)){o.deviceTypes[M]=true;}o.deviceTypes[M]=!!o.deviceTypes[M];}.bind(this));o.signature=this.getMember(s,"signature")||{};o.signature.parameters=this.getMember(o,"signature.parameters")||{};o.signature.additionalParameters=this.getMember(s,"signature.additionalParameters")||"allowed";var g=this.getMember(A,"sap|platform|runtime");o.resolutionResult=q.extend(true,{},g);if(g){o.resolutionResult["sap.platform.runtime"]=q.extend(true,{},g);}if(this.getMember(A,"sap|ui.technology")==="GUI"){o.resolutionResult["sap.gui"]=this.getMember(A,"sap|gui");}if(this.getMember(A,"sap|ui.technology")==="WDA"){o.resolutionResult["sap.wda"]=this.getMember(A,"sap|wda");}if(this.getMember(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){o.resolutionResult["sap.platform.runtime"]=o.resolutionResult["sap.platform.runtime"]||{};o.resolutionResult.url=A["sap.url"].uri;o.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(g&&g.uri){o.resolutionResult["sap.platform.runtime"].url=g.uri;o.resolutionResult.url=g.uri;}}if(!o.resolutionResult["sap.ui"]){o.resolutionResult["sap.ui"]={};}o.resolutionResult["sap.ui"].technology=this.getMember(A,"sap|ui.technology");o.resolutionResult.applicationType=this._formatApplicationType(o.resolutionResult,A);o.resolutionResult.systemAlias=o.resolutionResult.systemAlias||this.getMember(s,"systemAlias");o.resolutionResult.systemAliasSemantics="apply";o.resolutionResult.text=o.title;o.resolutionResult.appId=this.getMember(A,"sap|app.id");var t,h;var j=this.getMember(v,"vizConfig.sap|flp.indicatorDataSource");var T={};if(!i(V)){var l=this.getMember(V,"sap|app.type");if(l==="card"){I=true;T=m({},V,v.vizConfig);}else{T.componentName=this.getMember(V,"sap|ui5.componentName");var C=this.getMember(V,"sap|platform|runtime.componentProperties");if(C){T.componentProperties=C;}if(this.getMember(V,"sap|platform|runtime.includeManifest")){T.componentProperties=T.componentProperties||{};T.componentProperties.manifest=m({},V,v.vizConfig);delete T.componentProperties.manifest["sap.platform.runtime"];}}}if(this.getMember(A,"sap|app.type")==="plugin"||this.getMember(A,"sap|flp.type")==="plugin"){return undefined;}var n=this.getNestedObjectProperty([f,A,V],"sap|flp.tileSize");var p=this.getNestedObjectProperty([f,A,V],"sap|app.description");if(this.getMember(A,"sap|ui.technology")==="GUI"&&this.getMember(A,"sap|gui.transaction")){t=this.getMember(A,"sap|gui.transaction");}if(this.getMember(A,"sap|ui.technology")==="WDA"&&this.getMember(A,"sap|wda.applicationId")){t=this.getMember(A,"sap|wda.applicationId");}var D=this.getNestedObjectProperty([f,A,V],"sap|app.dataSources");if(this.getMember(A,"sap|app.id")){h=this.getMember(A,"sap|app.id");}var w=b.getContentProviderId(A)||"";o.tileResolutionResult={appId:h,title:o.title,subTitle:o.subTitle,icon:o.icon,size:n,info:o.info,keywords:o.keywords,tileComponentLoadInfo:T,indicatorDataSource:j,dataSources:D,description:p,runtimeInformation:g,technicalInformation:t,deviceTypes:o.deviceTypes,isCard:I,contentProviderId:w,numberUnit:o.numberUnit};var x=this.getMember(A,"sap|integration.urlTemplateId");var y=this.getTemplatePayloadFromSite(x,S);if(y){o.templateContext={payload:y,site:S,siteAppSection:A};}return o;};e.getTemplatePayloadFromSite=function(t,s){if(!s||typeof t!=="string"){return null;}var T=t.replace(/[.]/g,"|");return this.getMember(s.urlTemplates,T+".payload");};e._formatApplicationType=function(R,A){var s=R.applicationType;if(s){return s;}var C=this.getMember(A,"sap|platform|runtime.componentProperties.self.name")||this.getMember(A,"sap|ui5.componentName");if(this.getMember(A,"sap|flp.appType")==="UI5"||this.getMember(A,"sap|ui.technology")==="UI5"){R.applicationType="SAPUI5";R.additionalInformation="SAPUI5.Component="+C;R.url=this.getMember(A,"sap|platform|runtime.componentProperties.url");R.applicationDependencies=this.getMember(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(this.getMember(A,"sap|ui.technology")==="GUI"){R.applicationType="TR";R["sap.gui"]=this.getMember(A,"sap|gui");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"TR";}if(this.getMember(A,"sap|ui.technology")==="WDA"){R.applicationType="WDA";R["sap.wda"]=this.getMember(A,"sap|wda");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"WDA";}if(this.getMember(A,"sap|ui.technology")==="URL"){R.applicationType="URL";R.systemAlias=this.getMember(A,"sap|app.destination.name");}return"URL";};e.formatSite=function(s){var t=this;if(!s){return[];}var I=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var f=this.getMember(o,"sap|app.crossNavigation.inbounds");if(f){var l=Object.keys(f).sort();l.forEach(function(h){var j=f[h];var R=t.mapOne(h,j,o,undefined,undefined,s);if(R){R.contentProviderId=b.getContentProviderId(o)||"";I.push(R);}});}}catch(g){L.error("Error in application "+A+": "+g,g.stack);}}.bind(this));}catch(E){L.error(E);L.error(E.stack);return[];}return I;};e.toHashFromInbound=function(I){var s,p,C;s={target:{semanticObject:I.semanticObject,action:I.action},params:{}};p=O.get("signature.parameters",I)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=c.constructShellHash(s);if(!C){return undefined;}return C;};e.toHashFromOutbound=function(o){var s,p,C;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=c.constructShellHash(s);if(!C){return undefined;}return C;};e.toHashFromVizData=function(v,A){var V,t;if(!v.target){return undefined;}V=v.target;if(V.type==="URL"){return V.url;}var s=V.appId;var I=V.inboundId;if(s&&I){var o=b.getInboundTarget(A,s,I);t={};if(o){t.semanticObject=o.semanticObject;t.action=o.action;t.parameters=V.parameters||{};t.parameters["sap-ui-app-id-hint"]={value:{value:s,format:"plain"}};t.appSpecificRoute=V.appSpecificRoute||"";}}else if(V.semanticObject&&V.action){t=V;}return e.toHashFromTarget(t);};e.toHashFromTarget=function(t){try{var p={};var R=O.get("parameters",t)||{};Object.keys(R).forEach(function(k){p[k]=Array.isArray(R[k].value.value)?R[k].value.value:[R[k].value.value];});var h={target:{semanticObject:t.semanticObject,action:t.action},params:p,appSpecificRoute:t.appSpecificRoute};return"#"+c.constructShellHash(h);}catch(E){return undefined;}};e.toTargetFromHash=function(h){var t=c.parseShellHash(h);if(t!==undefined){var p=t.params||{};if(Object.keys(p).length>0){t.parameters=[];Object.keys(p).forEach(function(k){var v=Array.isArray(p[k])?p[k]:[p[k]];v.forEach(function(V){var P={name:k,value:V};t.parameters.push(P);});});}delete t.params;}else{t={type:"URL",url:h};}return t;};e.isSameTarget=function(t,T){var R;if(t.type!==T.type){return false;}if(t.type==="URL"){R=t.url===T.url;}else{R=t.semanticObject===T.semanticObject&&t.action===T.action&&t.appSpecificRoute===T.appSpecificRoute&&a(t.parameters,T.parameters);}return R;};return e;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(v,O,q,L,u){"use strict";var N=function(U,p,a){var A=O.create("config.applications",a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var d=new q.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{L.info("Hash Fragment: "+h);i=h.indexOf("&/");if(i>=0){h=h.slice(0,i);}i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,d=new q.Deferred(),c;if(!s){setTimeout(function(){d.resolve([]);},0);}else{sap.ushell.Container.getServiceAsync("URLParsing").then(function(o){c=o.paramsToString(P);L.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf("-"))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){d.resolve(r);}else{d.reject("Could not get links for  '"+s+"'");}});}return d.promise();};this.isIntentSupported=function(I){var d=new q.Deferred(),s={},D=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new q.Deferred();D.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){q.when.apply(q,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;this._oContainerPromises={};};U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization");};U.prototype.saveParameterValue=function(p,v,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.deleteParameter=function(p,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.loadParameterValue=function(p,s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype.getStoredParameterNames=function(s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};U.prototype._getUDContainer=function(s){var S=s.id;if(S!==""){S="."+S;}if(!this._oContainerPromises[s.id]){var d=new q.Deferred();this._oContainerPromises[s.id]=d.promise();this._getPersonalizationService().then(function(p){p.getContainer("sap.ushell.UserDefaultParameter"+S,{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true}).done(d.resolve).fail(d.reject);});}return this._oContainerPromises[s.id];};return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["sap/ui/thirdparty/jquery","sap/ushell/services/Container","sap/ushell/services/Personalization","sap/base/util/ObjectPath","sap/base/Log"],function(q,C,P,O,L){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}];var e=O.get("config.themes",A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);L.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{text:"Browser Language",key:"default"},{text:"American English",key:"en-US"},{text:"British English",key:"en-GB"},{text:"English",key:"en"},{text:"German",key:"de"},{text:"Hebrew",key:"he"},{text:"Russian",key:"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/bootstrap/SchedulingAgent',["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(F,E,a,l,s,b){"use strict";var L={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var S={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var c={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){s.clear();l.clearHistory();s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var d=F.initializeSchedule();d.then(function(e){if(!e){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Configuration error!");return;}E.initializeStepDoneListener(this);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived();}.bind(this));},_processStepConfiguration:function(d){var o={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(d.oConfig.loadingMode===L.CONTINUE_ON_EVENT){o.sStepType=L.CONTINUE_ON_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.continueOnEvent&&d.oConfig.continueOnEvent.eventName;o.oData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName&&o.oData.stepName);}else if(d.oConfig.loadingMode===L.BY_EVENT){o.sStepType=L.BY_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.byEvent&&d.oConfig.byEvent.eventName;o.oData.eventData={};o.oData.eventData.data=d.oConfig.byEvent.eventData;o.oData.eventData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName);}else if(d.oConfig.loadingMode===L.BY_COMPONENT_CREATE){o.sStepType=L.BY_COMPONENT_CREATE;o.sStepName=d.oContent.LoadingStep;o.oData=d.oConfig.byComponentCreate&&d.oConfig.byComponentCreate.ui5ComponentOptions||{};o.bConfigOk=!!o.oData;}else if(d.oConfig.loadingMode===L.BY_REQUIRE){o.sStepType=L.BY_REQUIRE;o.sStepName=d.oContent.LoadingStep;o.oData={};o.oData.sPath=d.oConfig.byRequire.path;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!o.oData.sPath;}else if(d.oConfig.loadingMode===L.WAIT_IN_MS){o.sStepType=L.WAIT_IN_MS;o.sStepName=d.oContent.LoadingStep;o.oData.iWaitingTime=d.oConfig.waitInMs&&d.oConfig.waitInMs.waitingTime;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.iWaitingTime&&o.oData.sStepName);}return o;},dumpState:function(){s.dump();},dumpHistory:function(){l.dumpHistory();},dumpSchedule:function(){F.dumpSchedule();},dumpAll:function(){l.dumpHistory();F.dumpSchedule();s.dump();},eventReceived:function(){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=F.getNextLoadingStep();if(n.sStatus===S.ERROR){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.DONE){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Done,"Loading finished");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.BLOCKDONE){}if(n.sStatus===S.SKIPPED){}if(n.sStatus===S.STEP){var o=this._processStepConfiguration(n);if(!o.bConfigOk){s.setForLoadingStep(o.sStepName,s.id.loadingStep.Abort,"","Step configuration error");s.setForLoadingStep(o.sStepName,s.id.loadingStep.Skipped,"","Step configuration error");s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,o,"Step configuration error!");}else if(o.sStepType===L.CONTINUE_ON_EVENT){E.listenToEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.eventName,"continueOnEvent step sent to Event Processor");}else if(o.sStepType===L.BY_EVENT){a.loadComponentByEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byEvent step sent to FLP Loader");}else if(o.sStepType===L.WAIT_IN_MS){a.waitInMs(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader");}else if(o.sStepType===L.BY_REQUIRE){var p=a.loadComponentByRequire(o.oData.sPath);this.oPathsLoading[o.sStepName]=p;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.sPath,"byRequire step sent to FLP Loader");var d=o.sStepName;p.then(function(){s.setForLoadingStep(d,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[d];b.emit("StepDone",d);}.bind(this),function(){s.setForLoadingStep(d,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[d];b.emit("StepFailed",d);}.bind(this));}else if(o.sStepType===L.BY_COMPONENT_CREATE){var P=a.loadComponentByComponentCreate(o);this.oComponentsLoading[o.sStepName]=P;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byComponentCreate step sent to FLP Loader");P.then(function(e){s.setForLoadingStep(e,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];b.emit("StepDone",e);}.bind(this),function(e){s.setForLoadingStep(e,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];b.emit("StepFailed",e);}.bind(this));}}}while(n.sStatus!==S.WAIT);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Waiting,"Agent waits");}};return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/EventProcessor',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(I,E){"use strict";var a={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(b){this.SchedulingAgent=b;this.aDoableObjects=[E.on("StepDone").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this)),E.on("StepFailed").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this))];},listenToEvent:function(e){E.once(e.eventName).do(function(){I.setForLoadingStep(e.stepName,I.id.loadingStep.Done,e.eventName,"Event received");this.SchedulingAgent.eventReceived();}.bind(this));},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(d){d.off();});},setTimeOut:function(){}};return a;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPLoader',["sap/ushell/EventHub","sap/ui/core/Component"],function(E,C){"use strict";var F={loadComponentByEvent:function(c){E.emit(c.eventName,c.eventData);},loadComponentByComponentCreate:function(s){return C.create(s.oData).then(function(){return Promise.resolve(s.sStepName);},function(){return Promise.reject(s.sStepName);});},loadComponentByRequire:function(p){return new Promise(function(r,R){sap.ui.require([p],function(d){r(d);});});},waitInMs:function(w){setTimeout(function(){E.emit("StepDone",w.sStepName);},w.iWaitingTime);},directLoading:function(){}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(s,L,a,C){"use strict";var S={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var b="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var c="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";function g(){return C.last("/core/shell/model/currentState/stateName");}var F={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var p=L.loadResource(c,{async:true});var d=L.loadResource(b,{async:true});var P=Promise.all([p,d]).then(function(v){var o=v[0];var l=v[1];var e=this._validateConfig(l,o);if(e){this.oSchedule.oBlocks=l.LoadingBlocks;this.oSchedule.oSteps=o;this.oSchedule.aBlockOrder=l.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.Initialized,"Schedule validated");}else{s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.WrongConfiguration,"Configuration error");}return e;}.bind(this));return P;},getNextLoadingStep:function(){var o={sStatus:S.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var l=this._startLoadingBlock();if(l){o.sStatus=S.Done;return o;}}var d=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var e=this.oSchedule.aBlockOrder.indexOf(d);var n=this.oSchedule.aBlockOrder[e+1];if(this.oSchedule.oBlocks[d].bCanBeLoadedConcurrently&&n){this._startLoadingBlock();}var A=true;var f=false;var h,j,k,m,p,q,I,r,t;for(var i=0;i<this.oSchedule.aBlocksLoading.length;i++){h=this.oSchedule.aBlocksLoading[i];j=this.oSchedule.oBlocks[h];k=j.iStepIndex;m=j.LoadingSteps[k];p=k===j.LoadingSteps.length-1;q=this._checkAndUpdateAsyncQueue(j);t=s.isStepLoaded(m.LoadingStep)||s.isStepSkipped(m.LoadingStep);r=s.isStepLoading(m.LoadingStep);A=q.bAllStepsDone&&t;f=q.bAStepIsLoading||r;if((r&&!m.canBeLoadedAsync)||(f&&p)){o.sStatus=S.Wait;continue;}if(!p||!t&&!r){if(t||(m.canBeLoadedAsync&&r)){k+=1;}o=this._prepareStepForLoading(j,h,k);}if(A&&p){I=this.oSchedule.aBlocksLoading.indexOf(h);this.oSchedule.aBlocksLoading.splice(I,1);o.sStatus=S.BlockDone;s.setForLoadingBlock(h,s.id.loadingBlock.Done,"","Block removed from loading queue");}if(o.sStatus!==S.wait){break;}}return o;},dumpSchedule:function(){a.debug(JSON.stringify(this.oSchedule));},_loadingIsEnabled:function(d){var e;if(Array.isArray(d.oConfig.excludedFLPStates)){if(d.oConfig.excludedFLPStates.indexOf(g())>-1){return false;}}if(Array.isArray(d.oConfig.mandatoryFLPStates)&&d.oConfig.mandatoryFLPStates.length!==0){if(d.oConfig.mandatoryFLPStates.indexOf(g())===-1){return false;}}function f(o){return o.path&&C.last(o.path)!==o.assertionValue;}if(d.oConfig.configSwitch){e=[].concat(d.oConfig.configSwitch);if(e.some(f)){return false;}}return true;},_checkAndUpdateAsyncQueue:function(d){var t=[];var e,f,h;var A=true;var j=false;for(var i=0;i<d.aAsyncStepsLoading.length;i++){h=d.aAsyncStepsLoading[i];e=s.isStepLoaded(h)||s.isStepSkipped(h);f=s.isStepLoading(h);if(f){t.push(h);}A=A&&e;j=j||f;}d.aAsyncStepsLoading=t;return{bAllStepsDone:A,bAStepIsLoading:j};},_startLoadingBlock:function(){var l=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;s.setForLoadingBlock(n,s.id.loadingBlock.Prepared,"","Block added to the loading queue.");}else{l=true;}return l;},_prepareStepForLoading:function(d,e,f){var h;var o={sStatus:S.Step,oContent:d.LoadingSteps[f],oConfig:this.oSchedule.oSteps[d.LoadingSteps[f].LoadingStep]};if(!this._loadingIsEnabled(o)){o.sStatus=S.Skipped;d.iStepIndex=f;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Skipped,"","Step set to skipped");return o;}var D=this._checkDependencies(o,e);if(D.bMissing){o.sStatus=S.Error;}else if(D.bAllLoaded){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step prepared for control unit");h=o.oContent.canBeLoadedAsync;d.iStepIndex=f;if(h){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step set on the async loading queue");d.aAsyncStepsLoading.push(o.oContent.LoadingStep);}}else{o.sStatus=S.Wait;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.WaitingForDependencies,"","Step missing dependencies");}return o;},_checkDependencies:function(d,e){var D={bAllLoaded:true,bMissing:false};if(d.oConfig.Dependencies){for(var i=0;i<d.oConfig.Dependencies.length;i++){D.bAllLoaded=D.bAllLoaded&&s.isStepLoaded(d.oConfig.Dependencies[i]);if(!s.isStepLoaded(d.oConfig.Dependencies[i])&&!s.isStepLoading(d.oConfig.Dependencies[i])){s.setForLoadingStep(d.oContent.LoadingStep,s.id.loadingStep.Aborted,d.oConfig.Dependencies[i],"Missing a dependency");s.setForLoadingBlock(e,s.id.loadingBlock.Aborted,d.oConfig.Dependencies[i],"A step is missing a dependency");s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");D.bMissing=true;D.bAllLoaded=false;break;}}}return D;},_validateConfig:function(l,d){var e=l&&l.OrderOfLoadingBlocks&&l.LoadingBlocks&&l.OrderOfLoadingBlocks.length&&d;if(!e){return false;}var B=l.OrderOfLoadingBlocks.reduce(function(f,h){f=f&&l.LoadingBlocks[h];if(f){var o=l.LoadingBlocks[h];var i=true;if(o.LoadingSteps){var k;for(var j=0;j<o.LoadingSteps.length;j++){k=o.LoadingSteps[j].LoadingStep;i=i&&d[k];}}f=f&&i;}return!!f;},true);return B;}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/logger',["sap/base/Log"],function(B){"use strict";var h=[];var v=true;var C="FLPScheduler";return{getHistory:function(){return h;},verboseOn:function(){v=true;return(v===true);},verboseOff:function(){v=false;return(v===false);},isVerboseOn:function(){return(v===true);},clearHistory:function(){h.length=0;},dumpHistory:function(i){var _;if(i){_=h.filter(function(e){return e.id===i;});console.table(_);}else{console.table(h);}return _||h;},logError:function(e){B.error(this.stateToString(e),undefined,C);h.push(e);return true;},logWarning:function(w){if(v){B.warning(this.stateToString(w),C);h.push(w);}return v;},logStatus:function(s){if(v){B.info(this.stateToString(s),C);h.push(s);}return v;},stateToString:function(s){return"FLP Bootstrap Scheduling Agent :: "+s.type+" '"+s.id+"' /"+s.status+((s.remark)?"/ : "+s.remark:"/");}};});
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/state',["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,j){if(!o||!o.hasOwnProperty(j)){return{};}return o[j];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}function f(){var p="renderers/fiori2/componentData/config/enableBackGroundShapes";var E=!!a(G,p);if(E){E=!b("ushell/spaces/enabled",false);}d[p]=E;return E;}function h(){return b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true));}function i(){var j=b("renderers/fiori2/componentData/config/rootIntent","");if(j){j="#"+j;}return j;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),SupportTicket:b("services/SupportTicket/config/enabled",false)},services:{allMyApps:{enabled:b("services/AllMyApps/config/enabled",true),showHomePageApps:b("services/AllMyApps/config/showHomePageApps",true),showCatalogApps:b("services/AllMyApps/config/showCatalogApps",true)}},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+"),enableWdaCompatibilityMode:b("ushell/navigation/wdaCompatibilityMode",false)},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false),myHome:{userEnabled:true,enabled:b("startupConfig/spacesMyhome",false),myHomeSpaceId:b("startupConfig/spacesMyhomeSpaceid",null),myHomePageId:b("startupConfig/spacesMyhomePageid",null),presetSectionId:"3WO90XZ1DX1AS32M7ZM9NBXEF"},extendedChangeDetection:{enabled:b("ushell/spaces/extendedChangeDetection/enabled",true)},homeNavigationTarget:b("renderers/fiori2/componentData/config/homeNavigationTarget",undefined)},menu:{enabled:b("ushell/menu/enabled",false)||b("ushell/spaces/enabled",false),visibleInAllStates:b("ushell/menu/visibleInAllStates",false)},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},contentProviders:{providerInfo:{show:b("ushell/contentProviders/providerInfo/show",false)}},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,newDesignSwitchVisible:b("renderers/fiori2/componentData/config/sapHorizonEnabled",false)&&h(),newDesignSwitchActive:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),homeUri:i(),title:""},themePreview:{sapHorizonEnabled:b("renderers/fiori2/componentData/config/sapHorizonEnabled",false)},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:b("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:h(),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:b("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:b("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",true),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:f(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},currentSpaceAndPage:undefined}},home:{disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:h()||b("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:b("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:b("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:b("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)}}};return C;}function g(){return d;}return{createConfigContract:c,getDefaultConfiguration:g};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/Device","sap/base/util/extend"],function(C,J,D,E){"use strict";var _;function a(){var s=C.last("/core"),i={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:s.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:s.extension.enableHelp,enableTileActionsIcon:D.system.desktop?s.home.enableTileActionsIcon:false};i=E({},s.catalog,s.home,i);_=new J(i);_.setSizeLimit(10000);}function b(m){_.setProperty("/isPhoneWidth",!m.matches);}function c(){var m=window.matchMedia("(min-width: 800px)");if(m.addListener){m.addListener(b);b(m);}}return{getModel:function(){if(!_){a();c();}return _;},_resetModel:function(){if(_!=undefined){_.destroy();_=undefined;}}};},true);
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(B,T,e,u,d,g,m,H,r,q,M,L,C){"use strict";var c=B.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoableObjects:[],constructor:function(i,s){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;}.bind(this));this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.iInitialLoad=100;this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}var I=this.getInterface();sap.ushell.components.getCatalogsManager=function(){return I;};this.registerEvents();},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},getModel:function(){return this.oModel;},loadAllCatalogs:function(){var G=new q.Deferred();var t=this;var s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!C.last("/core/spaces/enabled")){G=this.oHomepageManager.loadPersonalizedGroups();}}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];M.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");M.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");M.pause("FLP:DashboardManager.getCatalogTiles");M.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(a){var i=a.slice(0,this.iInitialLoad);M.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=i.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=a.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this));}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,a)).then(s);}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg"));}else{s();}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups");var t,a,b,f,h;var i=this;G.forEach(function(o){["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(i.oLaunchPageService.getCatalogTileId(a[t].object));f=i.oTileCatalogToGroupsMap[b]||[];h=i.oLaunchPageService.getGroupId(o.object);if(f.indexOf(h)===-1&&(typeof(o.isGroupVisible)==="undefined"||o.isGroupVisible)&&!o.isGroupLocked){f.push(h);}i.oTileCatalogToGroupsMap[b]=f;}}});});},updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogs");var i,t,b,G,f,h,j,k,A,o;if(a){for(i=0;i<a.length;i++){h=a[i].appBoxes;if(h){for(k=0;k<h.length;k++){A=h[k];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);A.associatedGroups=b;}}f=a[i].customTiles;if(f){for(j=0;j<f.length;j++){o=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);o.associatedGroups=b;}}}}this.getModel().setProperty("/catalogs",a);},addCatalogToModel:function(o){var a={title:this.oLaunchPageService.getCatalogTitle(o),id:this.oLaunchPageService.getCatalogId(o),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};M.resume("FLP:DashboardManager.getCatalogTiles");return this.oLaunchPageService.getCatalogTiles(o).then(function(b){M.pause("FLP:DashboardManager.getCatalogTiles");return{oCatalogEntry:b,oCatalogModel:a};}).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},getTagList:function(f){var i={};var h=0;var t=[];var j,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(h=0;h<this.tagsPool.length;h++){o=this.tagsPool[h];if(i[o]){i[o]++;}else{i[o]=1;}}for(j in i){t.push({tag:j,occ:i[j]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(f){this.oModel.setProperty("/tagList",s.slice(0,f));}else{this.oModel.setProperty("/tagList",s);}},processPendingCatalogs:function(p){var a=this.oModel.getProperty("/catalogs");var P,o,b,E,i,f;var h=sap.ui.getCore().getEventBus();var A=this.oModel.getProperty("/masterCatalogs")||[{title:m.getLocalizedText("all")}];M.end("FLP:DashboardManager.getCatalogTiles");M.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(p.length>0){P=p.shift();o=P.oCatalogEntry;b=P.oCatalogModel;E=this.searchModelCatalogByTitle(b.title);if(E.result){f=this.oModel.getProperty("/catalogs")[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;f=b;}var j=function(k,l){var n;if(this._getIsIntentSupported(l)){if(this._getIsAppBox(l)){n=this.createCatalogAppBoxes(l,true);k.appBoxes.push(n);}else{var s=this.createCatalogTiles(l);k.customTiles.push(s);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this,f);o.forEach(j);if(f.appBoxes.length>0||f.customTiles.length>0){if(i){a.push(b);A.push({title:b.title});}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}this.oModel.setProperty("/masterCatalogs",A);this.oModel.setProperty("/catalogs",a);h.publish("launchpad","afterCatalogSegment");setTimeout(function(){u.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true});},0);M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty("/catalogs");var f=false;var i;var n=0;var G=false;q.each(b,function(h,t){if(t.title===r.i18n.getText("catalogsLoading")){G=true;}else if(a===t.title){i=h;n=t.numberOfTiles;f=true;return false;}return undefined;});return{result:f,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},createCatalogAppBoxes:function(o,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var b=this.oTileCatalogToGroupsMap[a]||[];var t=this.oLaunchPageService.getCatalogTileTags(o)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n;if(o.tileResolutionResult){n=o.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:o,title:this.oLaunchPageService.getCatalogTilePreviewTitle(o),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(o),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(o),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(o)};},onDoneLoadingCatalogs:function(a){var i;var b=[];var t=this;for(i=0;i<a.length;i++){b.push(this.oLaunchPageService.getCatalogTiles(a[i]));}Promise.all(b).then(function(R){var I;var n=true;for(I=0;I<R.length;I++){if(R[I].length!==0){n=false;break;}}if(n||!a.length){t.oModel.setProperty("/catalogsNoDataText",r.i18n.getText("noCatalogs"));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var l=a.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){L.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==a.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},createCatalogTiles:function(o){var t,a;var b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var f=this.oTileCatalogToGroupsMap[b]||[];var h=this.oLaunchPageService.getCatalogTileTags(o)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});var s=o.getChip&&o.getChip().getBaseChipId&&o.getChip().getBaseChipId();if(s&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(s)===-1){this.oLaunchPageService.getCatalogTileView(o);}a=this.oLaunchPageService.getCatalogTilePreviewTitle(o);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(o);}return{associatedGroups:f,src:o,catalog:o.title,catalogId:o.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","),id:b,size:this.oLaunchPageService.getCatalogTileSize(o),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(o),tileType:o.tileType};},createGroupAndSaveTile:function(D){var t=this;var o=D.catalogTileContext;var n=D.newGroupName;var a=new q.Deferred();var R={};if(u.validHash(n)&&o){this.createGroup(n).then(function(b){var p=t.createTile({catalogTileContext:o,groupContext:b});p.done(function(f){R={group:f.group,status:1,action:"addTileToNewGroup"};a.resolve(R);}).fail(function(f){R={group:f.group,status:0,action:"addTileToNewGroup"};a.resolve(R);});});}return a.promise();},createGroup:function(t){var a=this;var D=new q.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:"createNewGroup"});}var R=this.oLaunchPageService.addGroup(t);R.done(function(G){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});R.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var o={status:0,action:"createNewGroup"};D.resolve(o);});return D.promise();},createTile:function(D){var t=this;var o=D.catalogTileContext;var a=D.groupContext;var G=this.oModel.getProperty(a.getPath());var s=G.groupId;var R;var b=new q.Deferred();var f={};var E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:o,groupContext:a});if(!o){L.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);f={group:G,status:0,action:"add"};return Promise.resolve(f);}R=this.oLaunchPageService.addTile(o.getProperty("src"),a.getProperty("object"));R.done(function(h){var i=t.oModel.getProperty("/groups");var j=g.getModelPathOfGroup(i,s);var k=t.oLaunchPageService.getTileTitle(h);t.oHomepageManager.addTileToGroup(j,h);f={group:G,status:1,action:"add"};sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(U){U.logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,k]);});b.resolve(f);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");f={group:G,status:0,action:"add"};b.resolve(f);});return b.promise();},deleteCatalogTileFromGroup:function(D){var t=this;var s=decodeURIComponent(D.tileId);var G=D.groupIndex;var o=this.oModel.getProperty("/groups/"+G);var a=new q.Deferred();var b=[];var R=[];var p,f;["tiles","links"].forEach(function(A){o[A].forEach(function(h){var i=t.oLaunchPageService.getCatalogTileId(h.object);if(i===s){p=new q.Deferred();f=t.oLaunchPageService.removeTile(o.object,h.object);f.done((function(j){return function(){R.push(h.uuid);j.resolve({status:true});};})(p));f.fail((function(j){return function(){j.resolve({status:false});};})(p));b.push(p);}});});q.when.apply(q,b).done(function(h){var S=b.length===R.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,R);t.updateTilesAssociation();a.resolve({group:o,status:S,action:"remove"});});return a.promise();},calculateCatalogTileIndex:function(a,n,t){var b=parseInt(a*100000,10);b+=(n!==undefined?n:0)+t;return b;},notifyOnActionFailure:function(s,p){m.showLocalizedError(s,p);},resetAssociationOnFailure:function(s,p){this.notifyOnActionFailure(s,p);this.updateTilesAssociation();},_getIsIntentSupported:function(o){return!!(this.oLaunchPageService.isTileIntentSupported(o));},_getIsAppBox:function(o){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(o)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(o)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(o)));}return i;},destroy:function(){this.unregisterEvents();}});return c;});
sap.ui.predefine('sap/ushell/components/ComponentKeysHandler',["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model"],function(C,A,K,q,L,a,m){"use strict";var b=function(){};b._instance=undefined;b.getInstance=function(){if(b._instance===undefined){b._instance=new b();return b._instance._init().then(function(){return b._instance;});}return Promise.resolve(b._instance);};b.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),_init:function(){this.oModel=m.getModel();return new Promise(function(r){if(!this.oLaunchPageService){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;r();}.bind(this));}else{r();}}.bind(this));},goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var c=q(j.get(t));if(c.length){this._setTileContainerSelectiveFocus(c);}}},goToLastVisitedTile:function(j,l){var c,d,e=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var f=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||q(f.get(t));var h=g.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");c=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!c.length){c=e.filter(":visible").eq(0);}}else{c=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this.moveScrollDashboard(d);}else if(c.length){c.attr("tabindex","0");this.moveScrollDashboard(c);}else{a.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var c=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){c.push(g.oPlusTile);}c=c.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?c.length-1:p;var t=c[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this.moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",c=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",e=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(c==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(c===s){var g=q(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:c==="LineMode"?"links":"tiles",sFromItems:c==="LineMode"?"links":"tiles",sTileType:c==="LineMode"?"link":"tile"};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var c=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){c.moveScrollDashboard(q(t.oParent.getDomRef()));}else{c.moveScrollDashboard(t.$());}},0);},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}return undefined;},_findClosestTile:function(d,t,c){var o=this._getTileRect(d,c),n=this._getTileCenter(d,o,c);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(c)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&o.bottom+5>=j.bottom){continue;}if(d==="up"&&o.top-5<=j.top){continue;}if(e&&i!==j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,M,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var c;if(!i||(M&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(M){var t=i.oCurTile.getBindingContext().getObject().object;l=this.oLaunchPageService.isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(M&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,M,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;c=[];if(o){var j=o.getTiles(),k=o.getLinks();c=l?j.concat(k):j;if(c.length===0){c.push(o.oPlusTile);}}var J=(d==="down")?G.concat(c):c.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,c,M,l){var n,g=c.getParent().getGroups(),e=g.indexOf(c),f=e;if(d==="down"||d==="right"){n=1;}else{n=-1;}f+=n;while(g[f]){var N=g[f],h=N.getTiles(),i=N.getLinks();var j=l?h.concat(i):h;var I=N.getVisible()&&!(N.getIsGroupLocked()&&M)&&!(N.getIsGroupLocked()&&j.length===0)&&!(j.length===0&&!(M||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}f+=n;}return undefined;},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var c=j.control(0);c.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:c,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var c=j.closest(".sapUshellTileContainer"),e,f,g;e=j.closest(".sapUshellTileContainerBeforeContent");if(e.length){if(d==="up"||d==="left"){this._goToNextTileContainer(e,d);}else{g=c.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest(".sapUshellTileContainerHeader");if(e.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(c)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=c.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(c)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=c.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest(".sapUshellTileContainerAfterContent");if(e.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var c=j.closest(".sapUshellTileContainer");if(c.length===1){var e=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,f=q(e[e.index(c)+n]);if(f.length===1){var g=f.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var c=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=c.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var c=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=c.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),c=$.closest(".sapUshellTileContainer"),e=N.closest(".sapUshellTileContainer");if(i&&(c.get(0).id!==e.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(c)){this._setTabIndexOnTileContainerHeader(e.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(e);}}else if(d==="up"||d==="left"){var f=c.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this.moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var c=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);c.attr("tabindex",0);d.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var c=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===c.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var c=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<c.length;i++){c[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),c,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});c=p.find("[tabindex], a").addBack().filter("[tabindex], a");c.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(t){if(t.length){this.setTileFocus(t);}},_moveGroupFromDashboard:function(d,j){var c,t=q(".sapUshellDashboardGroupsContainerItem"),i,e;c=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(c);e=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var c=this;setTimeout(function(){var d=q(".sapUshellTileContainerHeader")[t];c._setTabIndexOnTileContainerHeader(q(d));q(d).focus();},100);},_getFocusOnTile:function(j){var c;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var d=j.closest(s);if(d.length){c=d;}});return c;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}if(j.is("#sapUshellAnchorBarOverflowButton")){this._handleAnchorNavigationOverflowButtonArrowKeys(d);return;}var c=this._getFocusOnTile(j),i=this.oModel.getProperty("/tileActionModeActive");if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest(".sapUshellTileContainerHeader");if(c){this._moveTile(d,c);}else if(f.length){var g=f.closest(".sapUshellTileContainerContent");if(!g.hasClass("sapUshellTileContainerDefault")||!g.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(c){this._goFromFocusedTile(d,c,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationOverflowButtonArrowKeys:function(d){var c;q("#sapUshellAnchorBarOverflowButton").attr("tabindex",-1);if(["left","up"].indexOf(d)>-1){c=q(".sapUshellAnchorItem").filter(":visible");this._setAnchorItemFocus(c.eq(c.length-1));}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var c=q(".sapUshellAnchorItem").filter(":visible"),n=c.index(j);if(d==="left"||d==="up"){if(n>0){this._setAnchorItemFocus(c.eq(n-1));return;}}if(d==="right"||d==="down"){if(n<c.length-1){this._setAnchorItemFocus(c.eq(n+1));}else if(n===c.length-1){this._setAnchorOverflowButtonFocus();}}},_setAnchorOverflowButtonFocus:function(){var B=q("#sapUshellAnchorBarOverflowButton");q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});B.attr("tabindex",0);B.focus();},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),c;if(v.length){if(d==="home"){c=q(v.get(0));}if(d==="end"){c=q(v.get(v.length-1));}}if(c){this._preventDefault(e);this._appFinderFocusAppBox(j,c);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var c=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();if(c.length){this.setTileFocus(c);}}else{var d=j.closest(".sapUshellTileContainer");if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var c=this._getFocusOnTile(j);if(c&&!c.hasClass("sapUshellLockedTile")&&!c.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var d=q(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e.moveScrollDashboard(i.oCurTile.$());}else{e.moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),c=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(c.length){var e=c.closest(".sapUshellTileContainerContent");if(!e.hasClass("sapUshellTileContainerDefault")||!e.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,c);}}},_spaceButtonHandler:function(e,j){var c=this._getFocusOnTile(j);if(!c||!c.length){j.click();return;}e.preventDefault();if(c.hasClass("sapFCard")){c.control(0).getCardHeader().firePress();return;}var d=j.find("[role=button]");if(d.length){var B=d.control(0);if(B){B.firePress();return;}}c.control(0).firePress();},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=b._instance;if(r){var c=r.getCurrentCoreView();if(c==="home"&&!C.last("/core/spaces/enabled")){var t=document.activeElement?document.activeElement.tagName:"";if(t==="INPUT"||t==="TEXTAREA"){if(e.keyCode===h.keyCodes.ENTER){var H=q(document.activeElement).closest(".sapUshellTileContainerHeader");if(H.length){setTimeout(function(){H=q("#"+H[0].id);h._setTabIndexOnTileContainerHeader(H);H.focus();},10);}}}else{h._dashboardKeydownHandler(e);}}if(c==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var c;if(j.hasClass("sapUshellTileContainerHeader")){c=j.find(".sapUshellContainerTitle");c.focus();}else if(j.closest(".sapUshellTileContainerHeader")){c=j.closest(".sapUshellTileContainerHeader");c.focus();}},_appFinderFocusAppBox:function(j,c){if(j&&c){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");c.attr("tabindex","0").focus();c.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var c;if(d==="down"||d==="right"){c=j.next();}else if(d==="up"||d==="left"){c=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(c.length>0){var n=c.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return c;}return this._getNextCatalog(d,c);}return undefined;},_getNextCatalogItem:function(d,j,p){var c=q(j.parents()[2]),e=c.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,c),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}return undefined;},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var c=q(this._getNextCatalogItem(d,j,p));if(c){this._appFinderFocusAppBox(j,c);}}},appFinderFocusMenuButtons:function(e){var c=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(c.length){c.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return;}var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,j);break;default:break;}return true;}};return b;});
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){"use strict";function d(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){if(t.content[i].destroy){t.content[i].destroy();}}}}function a(t){var i;if(t){for(i=0;i<t.length;i++){d(t[i]);}}}function b(A){if(A){a(A.tiles);}}function c(A){var i;if(A){for(i=0;i<A.length;i++){b(A[i]);}}}return{destroyFLPAggregationModel:b,destroyFLPAggregationModels:c,destroyTileModel:d,destroyTileModels:a};});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){"use strict";return{getIndexOfGroup:a,getModelPathOfGroup:g};function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s){return i;}}return-1;}});
sap.ui.predefine('sap/ushell/components/HeaderManager',["sap/base/util/ObjectPath","sap/ui/Device","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/ushell/components/StateHelper","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone","sap/ushell/ui/horizon/NewDesignSwitchItem"],function(O,D,_,S,C,E,u,a,N){"use strict";var h={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,newDesignSwitchVisible:C.last("/core/shellHeader/newDesignSwitchVisible"),newDesignSwitchActive:C.last("/core/shellHeader/newDesignSwitchActive"),showLogo:false,ShellAppTitleState:undefined,rootIntent:C.last("/core/shellHeader/rootIntent"),homeUri:C.last("/core/shellHeader/homeUri"),title:""};var H;var A;var o="endItemsOverflowBtn";var c;var B={blank:{},"blank-home":{},home:{headItems:[]},app:{headItems:["backBtn","homeBtn"]},minimal:{headItems:["homeBtn"]},standalone:{headItems:["backBtn"]},embedded:{headItems:["backBtn","homeBtn"]},"embedded-home":{headItems:[]},headerless:{headItems:["backBtn","homeBtn"],headerVisible:false},merged:{headItems:["backBtn","homeBtn"]},"headerless-home":{headerVisible:false},"merged-home":{},lean:{headItems:[]},"lean-home":{}};var d=[];function i(J,K){var L=J&&J.appState?J.appState:"home";H=w(J);A=K;c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;v();e();s(L);q();}function b(){f();}function e(){var J=E.on("setHeaderCentralAreaElement").do(function(P){n({propertyName:"centralAreaElement",value:P.id,aStates:S.getPassStates(P.states),bCurrentState:!!P.currentState,bDoNotPropagate:!!P.bDoNotPropagate});});d.push(J);d.push(E.on("updateHeaderOverflowState").do(g));D.media.attachHandler(g,this,D.media.RANGESETS.SAP_STANDARD);d.push(C.on("/core/shellHeader/headEndItems").do(k));d.push(C.on("/core/shell/model/currentSpaceAndPage").do(j));}function f(){if(d){d.forEach(function(J){J.off();});}D.media.detachHandler(g,this,D.media.RANGESETS.SAP_STANDARD);}function g(P){if(P&&P.name){c=P.name;}v();k();}function v(J){var K=C.last("/core/shell/model/currentState/stateName"),L=K==="merged"||K==="headerless",M=C.last("/core/shell/model/currentViewPortState")==="LeftCenter",P=true;if((J||c)==="Phone"&&!M||L){P=false;}n({propertyName:"showLogo",value:P,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true});}function j(J){if(C.last("/core/spaces/enabled")&&(C.last("/core/spaces/homeNavigationTarget")==="origin_page")){if(J){((this&&this.updateStates)||n)({propertyName:"homeUri",value:"#"+J.hash});}}}function k(P){var J=C.last("/core/shellHeader/headEndItems"),K=J.indexOf(o)>-1,L=P&&P.name||c,M;if(L==="Phone"&&!K&&J.length>2){if(C.last("/core/shellHeader/newDesignSwitchVisible")&&J.indexOf("newDesignSwitchItem")===-1){var Q=N.getSwitchItem();l([Q.getId()],false,["home","app"],true);}l([o],false,["home","app"]);}else if(L!=="Phone"&&K){M=sap.ui.getCore().byId("headEndItemsOverflow");if(M){M.destroy();}r([o],false,["home","app"]);}}function l(J,K,L,M){n({propertyName:"headEndItems",value:J,aStates:L,bCurrentState:!!K,bDoNotPropagate:!!M});}function r(J,K,L){n({propertyName:"headEndItems",value:J,aStates:L,bCurrentState:!!K,action:"remove",bDoNotPropagate:false});}function m(J,K){var L={};Object.keys(J).forEach(function(M){var P=J[M];L[M]=Object.keys(P).reduce(function(T,Q){T[Q]=P[Q];return T;},a(K));});return L;}function n(P){var J=P.propertyName,K=!P.bCurrentState?S.getAllStateToUpdate(P.aStates,P.bDoNotPropagate):[],L=C.last("/core/shellHeader"),M=C.last("/core/shell/model/currentState/stateName"),Q=P.value,R;if(J.charAt(0)==="/"){J=J.substring(1);}R=_(J,P.action);if(!R){return;}if(!P.bCurrentState){H=x(H,J,R,K,Q);}if(K.indexOf(M)>-1||P.bCurrentState){var T=O.get(J.split("/"),L),U=R.execute(T,Q);if(T!==U){O.set(J.split("/"),U,L);z(J,L);}}if(P.bCurrentState){y(J,R,Q);}}function p(J){var K;for(K in J){if(J.hasOwnProperty(K)){u.updateProperties(H[K],J[K]);}}}function s(J){var K=H[J];if(!K){throw new Error("the state ("+J+") does not exist");}K.newDesignSwitchActive=C.last("/core/shellHeader/newDesignSwitchActive");C.emit("/core/shellHeader",a(K));}function q(J){var K=C.last("/core/shellHeader"),L,M;if(A&&A.customShellState){L=A.customShellState.currentState;}if(J&&A.extendedShellStates[J]){M=A.extendedShellStates[J].customState.currentState;}C.emit("/core/shellHeader",t(K,L,M));}function t(J,K,L){var R={};Object.keys(J).forEach(function(P){var M=_(P);var Q=a(J[P]);if(M){if(L){Q=M.execute(Q,L[P]);}if(K){Q=M.execute(Q,K[P]);}}R[P]=Q;});R.ShellAppTitleState=C.last("/core/shellHeader/ShellAppTitleState");return R;}function w(J){if(J){h.rootIntent=J.rootIntent;h.homeUri="#"+J.rootIntent;}var K=m(B,h);function L(P,K){var Q,R;for(Q in K){if(Q==="blank"||Q==="blank-home"){continue;}if((P==="openCatalogBtn")&&(Q==="lean"||Q==="lean-home")){continue;}if(P==="ContactSupportBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(Q)===-1){continue;}}R=K[Q].headEndItems.indexOf(P);if(R===-1){K[Q].headEndItems.push(P);}}}function M(T,K){var P;for(P in K){K[P].title=T;}}if(J){if(J.moveContactSupportActionToShellHeader){L("ContactSupportBtn",K);}if(J.moveAppFinderActionToShellHeader){L("openCatalogBtn",K);}if(J.title){M(J.title,K);}}return K;}function x(J,P,K,L,M){if(L.length===0){return J;}var Q=a(J);L.forEach(function(R){var T=Q[R],U;if(T){U=K.execute(O.get(P.split("/"),T),M);O.set(P.split("/"),U,T);}});return Q;}function y(P,J,K){var L,M;if(!A){return;}L=A.customShellState.currentState;M=J.execute(O.get(P.split("/"),L),K);O.set(P.split("/"),M,L);}function z(P,J){var R=P.split("/").shift();C.emit("/core/shellHeader/"+R,J[R]);}function F(J){var K;try{K=H[J];}catch(L){K=undefined;}return K;}function G(J,P){var K;try{K=F(J)[P];}catch(L){K=undefined;}return K;}function I(T){H=T;}return{init:i,destroy:b,switchState:s,updateStates:n,recalculateState:q,extendStates:p,handleCurrentSpaceAndPage:j,handleEndItemsOverflow:k,validateShowLogo:v,_createInitialState:w,_generateBaseHeaderState:m,_getBaseState:F,_getBaseStateMember:G,_resetBaseStates:I};});
sap.ui.predefine('sap/ushell/components/HomepageManager',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement","sap/ushell/components/ComponentKeysHandler"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,c,f,h,l,C,M,L,n,o){"use strict";var p=l.GenericTileScope;var t={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var v=[];return B.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:t,constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var H=sap.ushell.components.getHomepageManager();if(!H.view){H.setDashboardView(j.view);}return H;}this.oServiceLoadingPromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(q){this.oPageBuilderService=q;this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));this.oPageOperationAdapter=c.getInstance(q);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported();}.bind(this));sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=(function(q){return function(){return q;};}(this));this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=new Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.bIsGroupsRequestPending=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",h.EQ,false);this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var k=this.oRouter.getTarget("home");k.attachDisplay(function(q){this.oDashboardView=q.getParameter("view");}.bind(this));}var E=s.last("/core/home/enableTransientMode");v.push(s.on("/core/home/enableTransientMode").do(function(N){if(E===N){return;}E=N;this._changeMode(N);}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined;},_addRequest:function(R){this._aRequestQueue.push(R);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false;}else{this._aRequestQueue.shift()();}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false;},isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){L.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){L.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,k=new S(i,{title:r.i18n.getText("moveTileDialog_title"),rememberSelections:false,search:function(E){var V=E.getParameter("value"),q=new F("title",h.Contains,V),w=E.getSource().getBinding("items");w.filter([q,j]);},contentWidth:"400px",contentHeight:"auto",confirm:function(E){var q=E.getParameter("selectedContexts");this.publishMoveActionEvents(q,i);}.bind(this),cancel:function(){var q=Q(".sapUshellTile[tabindex=\"0\"]")[0];if(q){q.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return k;},publishMoveActionEvents:function(i,j){var E=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles",q=i[0].getObject().groupId,w={sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:j};if(D.system.desktop){o.getInstance().then(function(x){w.callBack=x.callbackSetFocus.bind(x);E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",w);});}else{E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",w);}}},_changeLinksScope:function(E){var i=this;if(this.bLinkPersonalizationSupported){var I=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){i._changeGroupLinksScope(j,I?"Actions":"Display");}});}},_changeGroupLinksScope:function(i,j){var k=this;i.links.forEach(function(q,w){k._changeLinkScope(q.content[0],j);});},_changeLinkScope:function(i,j){var k;if(i.getScope){k=i;}else if(i.getContent){k=i.getContent()[0];}if(this.bLinkPersonalizationSupported&&k&&k.setScope){k.setScope(j);}},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);},_changeMode:function(i){var j=this.getModel().getProperty("/groups");if(i){this.oPageOperationAdapter=f.getInstance();var k=this.oPageOperationAdapter.transformGroupModel(j);this.getModel().setProperty("/groups",k);}else{this.oPageOperationAdapter=c.getInstance();d.destroyFLPAggregationModels(j);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups();}},_addFLPActionsToTile:function(i){var A=[];if(s.last("/core/shell/enablePersonalization")){var j=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(i);A.push(this._getMoveTileAction(i));if(j){A.push(this._getConvertTileAction(i));}}return A;},_getConvertTileAction:function(i){var E=sap.ui.getCore().getEventBus(),j=this,k=j.oPageOperationAdapter.getTileType(i);return{text:k==="link"?r.i18n.getText("ConvertToTile"):r.i18n.getText("ConvertToLink"),press:function(q){var w={tile:q};if(D.system.desktop){o.getInstance().then(function(x){w.callBack=x.callbackSetFocus.bind(x);E.publish("launchpad","convertTile",w);});}else{E.publish("launchpad","convertTile",w);}}};},_getMoveTileAction:function(i){var j=this;return{text:r.i18n.getText("moveTileDialog_action"),press:function(){j.tileType=j.oPageOperationAdapter.getTileType(i);j.tileUuid=j.getModelTileById(j.oPageOperationAdapter.getTileId(i),j.tileType==="link"?"links":"tiles").uuid;var k=j.tileType==="tile"?j.moveTileDialog:j.moveLinkDialog;if(j.tileType==="tile"||j.tileType==="link"){if(!k){k=j.createMoveActionDialog("move"+j.tileType+"Dialog");k.setModel(j.oModel);if(j.tileType==="tile"){j.moveTileDialog=k;}else{j.moveLinkDialog=k;}}else{k.getBinding("items").filter([j.oGroupNotLockedFilter]);}k.open();}}};},_handleTileAppearanceAnimation:function(j){if(!j){return;}var k=["webkit",""];function q(w,x){for(var i=0;i<k.length;i++){x=x.toLowerCase();j.attachBrowserEvent(k[i]+x,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}q(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);v.forEach(function(i){i.off();});c.destroy();f.destroy();sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},_sortableStart:function(){this.oSortableDeferred=new Q.Deferred();},_createBookmark:function(i,E,j){var k=j.group?j.group.object:"";delete j.group;function q(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(w){w.addBookmark(j,k).always(this._checkRequestQueue.bind(this)).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(x){L.error("Failed to add bookmark",x,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});}.bind(this));}this._addRequest(q.bind(this));},_addBookmarkToModel:function(i,E,j){var k=j.tile,q,w=j.group,x,y,z,N,I;if(!j||!k){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!w){q=this.getModel().getProperty("/groups");for(I=0;I<q.length;I++){if(q[I].isDefaultGroup===true){w=q[I].object;break;}}}y=this._getIndexOfGroupByObject(w);z=this.oModel.getProperty("/groups/"+y);x=this.oPageOperationAdapter.getPreparedTileModel(k,z.isGroupLocked);this.getTileView(x);z.tiles.push(x);z.visibilityModes=u.calcVisibilityModes(z,true);N=z.tiles.length;this._updateModelWithTileView(y,N);this.oModel.setProperty("/groups/"+y,z);},_refreshGroupInModel:function(i,E,j){var k=this;this.oPageOperationAdapter.refreshGroup(j).then(function(q){if(!q){return;}var w=k._getIndexOfGroupByObject(q.object);q.visibilityModes=u.calcVisibilityModes(q.object,true);k.oModel.setProperty("/groups/"+w,q);if(q.tiles){q.tiles.forEach(function(x){k.getTileView(x);});}});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},_createGroupAt:function(j,E,k){var q=parseInt(k.location,10),w=this.oModel.getProperty("/groups"),x=this.oPageOperationAdapter.getPreparedGroupModel(null,false,q===w.length,k),y=this.oModel,i;x.index=q;w.splice(q,0,x);for(i=0;i<w.length-1;i++){w[i].isLastGroup=false;}for(i=q+1;i<w.length;i++){w[i].index++;}y.setProperty("/groups",w);},_getIndexOfGroupByObject:function(i){var j=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(j,i);},getTileActions:function(i){return this.oPageOperationAdapter.getTileActions(i);},addTileToGroup:function(i,j){var k=i+"/tiles",q=this.oModel.getProperty(i),N=this.oModel.getProperty(k).length;var w=this.oModel.getProperty(i+"/isGroupLocked"),x=this.oModel.getProperty("/personalization");q.tiles[N]=this.oPageOperationAdapter.getPreparedTileModel(j,w);this.getTileView(q.tiles[N]);q.visibilityModes=u.calcVisibilityModes(q,x);this._updateModelWithTileView(q.index,N);this.oModel.setProperty(i,q);},addTilesToGroupByCatalogTileId:function(j,k){var q=j.getBindingContext();for(var i=0;i<k.length;i++){this.addTileToGroupByCatalogTileId(q.sPath,k[i]);}},addTileToGroupByCatalogTileId:function(i,j){var N,k,q;if(!s.last("/core/home/enableTransientMode")){return;}q=this.oPageOperationAdapter.getTileModelByCatalogTileId(j);if(!q){return;}this.oDashboardLoadingManager.setTileResolved(q);N=this.oModel.getProperty(i+"/tiles").length;k=this.oModel.getProperty(i);k.tiles[N]=q;this.oModel.setProperty(i,k);},_getPathOfTile:function(i){var j=this.oModel.getProperty("/groups"),k=null,q=null,w,E=function(x,y){if(y.uuid===i){q=x;return false;}return undefined;};Q.each(j,function(x,y){Q.each(y.tiles,E);if(q!==null){k=x;w="tiles";return false;}Q.each(y.links,E);if(q!==null){k=x;w="links";return false;}return undefined;});return k!==null?"/groups/"+k+"/"+w+"/"+q:null;},_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},_deleteGroup:function(i,E,j){var k=this,q=this.oModel,w=j.groupId,x=q.getProperty("/groups"),y=g.getIndexOfGroup(x,w),I=x.length-1===y,z=null,A,H;A=I?y-1:y;d.destroyFLPAggregationModel(q.getProperty("/groups/"+y));z=x.splice(y,1)[0];if(I){q.setProperty("/groups/"+A+"/isLastGroup",I);}q.setProperty("/groups",x);this._updateGroupIndices(x);if(A>=0){H=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(H.publish,H,"launchpad","scrollToGroup",{groupId:q.getProperty("/groups")[A].groupId}),200);}function J(){k.oPageOperationAdapter.deleteGroup(z).then(function(){m.showLocalizedMessage("group_deleted_msg",[z.title]);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_delete_group_msg");});}this._addRequest(J);},_resetGroup:function(i,E,j){var k=this,q=j.groupId,w=this.oModel,x=w.getProperty("/groups"),y=g.getIndexOfGroup(x,q),z=k.oModel.getProperty("/groups/indexOfDefaultGroup")===y,A=w.getProperty("/groups/"+y),H,I;w.setProperty("/groups/"+y+"/sortable",false);function J(){k.oPageOperationAdapter.resetGroup(A,z).then(function(R){k._handleAfterSortable(function(q,O,K){var x=k.oModel.getProperty("/groups"),y=g.getIndexOfGroup(x,q);k._loadGroup(y,K||O);m.showLocalizedMessage("group_reset_msg",[O.title]);k.oModel.setProperty("/groups/"+y+"/sortable",true);H=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(q);I=H.getBindingContext().getObject().links;if(I&&I.length&&!H.getIsGroupLocked()){k._changeGroupLinksScope(H.getBindingContext().getObject(),k.oModel.getProperty("/tileActionModeActive")?p.Actions:p.Display);}if(H){H.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}})(q,A,R);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_reset_group_msg");});}this._addRequest(J);},_moveGroup:function(j,E,k){if(isNaN(k.fromIndex)){return;}var q=k.fromIndex,w=k.toIndex,x=this.oModel,y=x.getProperty("/groups"),A=x.getProperty("/tileActionModeActive"),z,H,I=this,i,J;if(!A){q=this._adjustFromGroupIndex(q,y);}z=y[q];H=z.groupId;if(!A){w=this._adjustToGroupIndex(w,y,H);}J=y[w];this._moveInArray(y,q,w);this._updateGroupIndices(y);for(i=0;i<y.length-1;i++){y[i].isLastGroup=false;}y[y.length-1].isLastGroup=true;x.setProperty("/groups",y);function K(){y=x.getProperty("/groups");var z=x.getProperty(g.getModelPathOfGroup(y,H));if(!z.object){return;}I.oPageOperationAdapter.getOriginalGroupIndex(J,y).then(function(N){var O={iFromIndex:q,iToIndex:w};return I.oPageOperationAdapter.moveGroup(z,N,O);}).then(I._checkRequestQueue.bind(I),function(){I._resetGroupsOnFailure("fail_to_move_group_msg");});}this._addRequest(K);},_adjustToGroupIndex:function(j,k,q){var w=0,I=false,i=0;for(i=0;i<k.length&&w<j;i++){if(k[i].isGroupVisible){if(k[i].groupId===q){I=true;}else{w++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(j,k){var q=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){q++;}if(q===j+1){return i;}}return j;},_changeGroupTitle:function(i,E,j){var k=this,N=j.newTitle,q=this.oModel.getProperty("/groups"),w=j.groupId,x=g.getIndexOfGroup(q,w),y=k.oModel.getProperty("/groups/indexOfDefaultGroup")===x,z=this.oModel.getProperty("/groups/"+x),O=z.title;this.oModel.setProperty("/groups/"+x+"/title",N);function A(){var I;if(z.isLastGroup){I=k.oPageOperationAdapter.addGroupAt(z,undefined,y);}else{var J=k.oModel.getProperty("/groups")[x+1];I=k.oPageOperationAdapter.getOriginalGroupIndex(J,q).then(function(K){return k.oPageOperationAdapter.addGroupAt(z,K,y);});}I.then(function(K){k._handleAfterSortable(function(R,U){var V=k.oModel.getProperty("/groups");var W=g.getIndexOfGroup(V,R);var X=V[W];Object.keys(U).forEach(function(Y){if(Y==="tiles"||Y==="links"){return;}X[Y]=U[Y];});k.oModel.refresh();k._checkRequestQueue.call(k);})(w,K);},function(){k._resetGroupsOnFailure("fail_to_create_group_msg");});}function H(){this.oPageOperationAdapter.renameGroup(z,N,O).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_rename_group_msg");});}if(!z.object){this._checkRequestQueue.call(this);this._addRequest(A.bind(this));}else{this._addRequest(H.bind(this));}},addGroupToModel:function(i){var j=this.oPageOperationAdapter.getPreparedGroupModel(i,false,true,{isRendered:true}),k=this.oModel.getProperty("/groups"),q=k.length,w;if(q>0){k[q-1].isLastGroup=false;}j.index=q;k.push(j);this.oModel.setProperty("/groups/",k);w=new C(this.oModel,"/groups/"+q);return w;},_deleteTile:function(i,E,j){var k=this,q=j.tileId,w=this.oModel.getProperty("/groups"),I=j.items||"tiles";Q.each(w,function(x,y){var z=false;Q.each(y[I],function(A,H){if(H.uuid!==q){return true;}d.destroyTileModel(k.oModel.getProperty("/groups/"+x+"/"+I+"/"+A));var J=y[I].splice(A,1)[0],K=k.oModel.getProperty("/personalization");y.visibilityModes=u.calcVisibilityModes(y,K);k.oModel.setProperty("/groups/"+x,y);function N(){k.oPageOperationAdapter.removeTile(y,J).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_remove_tile_msg");});}k._addRequest.call(k,N);u.handleTilesVisibility();z=true;return false;});return!z;});},deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),q=this.oModel.getProperty("/groups/"+k),w=[];["tiles","links"].forEach(function(A){w=q[A].filter(function(x){if(R.indexOf(x.uuid)<0){return true;}return false;});q[A]=w;});q.visibilityModes=u.calcVisibilityModes(q,true);this.oModel.setProperty("/groups/"+k,q);},_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}return undefined;},_convertTile:function(i,E,j){var k=j.tile?j.tile:j,q=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,w=j.srcGroupId?this.oModel.getProperty("/groups/"+q):k.getParent().getBindingContext().getObject(),x=k.getBindingContext().sPath.split("/"),y=k.getBindingContext().getObject(),O=x[x.length-2],z=y.uuid,A=parseInt(x[x.length-1],10),H=j.toIndex!==undefined?j.toIndex:undefined,I=this.oModel.getProperty("/tileActionModeActive"),J=j.toGroupId?this._getGroupIndex(j.toGroupId):w.index,K=j.toGroupId?this.oModel.getProperty("/groups/"+J):w,N=this;var R=this._getIndexForConvert(O,A,H,w,K),U={"tileIndex":A,"groupIndex":q,"group":w};function V(){y.tileIsBeingMoved=true;var W=this.oPageOperationAdapter.moveTile(y,R,w,K,O==="links"?"tile":"link");W.then(function(X){N._showMoveTileMessage(y,w,K);N._handleAfterSortable(function(z,X){var Y=N._getPathOfTile(z),Z=X.content;if(Y){if(O==="tiles"){N._attachLinkPressHandlers(Z);N._changeLinkScope(Z,I?"Actions":"Display");}var $={"tileIndex":H,"groupIndex":J,"group":K},_={"tile":y,"view":Z,"type":O,"tileObj":X.object};y.tileIsBeingMoved=true;N.replaceTileViewAfterConvert(U,$,_);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(Z);}}})(z,X);N._checkRequestQueue.call(N);},function(){N._handleAfterSortable(N._resetGroupsOnFailure.bind(N))("fail_to_move_tile_msg");});}this._addRequest(V.bind(this));},replaceTileViewAfterConvert:function(i,j,k){var q=k.tile,w=q.content;q.tileIsBeingMoved=false;q.content=[k.view];q.object=k.tileObj;q.originalTileId=this.oPageOperationAdapter.getTileId(k.tileObj);i.group[k.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[k.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,q);}else{j.group[k.type==="tiles"?"links":"tiles"].push(q);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(k.type==="links"){this._handleTileAppearanceAnimation(q.content[0].getParent());}else{this._handleTileAppearanceAnimation(q.content[0]);}if(w&&w[0]){w[0].destroy();}},_getIndexForConvert:function(i,j,k,q,w){var x;if(i==="tiles"){if(k!==undefined){x=w[i].length+k;}else{x=w[i].length+w.links.length;}if(q.groupId===w.groupId){x--;}}else{x=k||q.tiles.length;j+=q.tiles.length;}return{"tileIndex":j,"newTileIndex":x};},_getIndexForMove:function(i,j,k,q,w){var x;if(i==="tiles"){x=k!==undefined?k:q[i].length;}else{if(k!==undefined){x=q.tiles.length+k;}else{x=q.tiles.length+q.links.length;}j+=w.tiles.length;}return{"tileIndex":j,"newTileIndex":x};},_getTileInfo:function(i,j,I){var k;Q.each(i,function(q,w){var x=false;Q.each(w[I],function(y,z){if(z.uuid===j){k={"oTile":z,"tileIndex":y,"oGroup":w,"groupIndex":q};x=true;return false;}return undefined;});return!x;});return k;},_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,q){if(q.groupId===N){j={"oNewGroup":q,"newGroupIndex":k};}});return j;},_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,q=j.sTileId,w=j.source,x=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",y=j.sToItems,z=j.sFromItems,A=this.oModel.getProperty("/tileActionModeActive"),H=this.oModel.getProperty("/groups"),I,J,K,O,R,U={},V=this;O=this._getTileInfo(H,q,z);R=this._getNewGroupInfo(H,N);if(O.oGroup.groupId===R.oNewGroup.groupId&&(w==="movetileDialog"||k===null||w==="movelinkDialog")){if(j.callBack&&O.oTile&&O.oTile.content&&O.oTile.content.length){j.callBack(O.oTile.content[0]);}return;}if(x==="link"){O.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(x==="tile"&&y==="tiles"){if(k&&k>R.oNewGroup[y].length){k=R.oNewGroup[y].length;}}if(O.oGroup.groupId===N&&y===z){if(k===null||k===undefined){O.oGroup[y].splice(O.tileIndex,1);k=O.oGroup[y].length;O.oGroup[y].push(O.oTile);}else{k=this._adjustTileIndex(k,O.oTile,O.oGroup,y);this._moveInArray(O.oGroup[y],O.tileIndex,k);}this.oModel.setProperty("/groups/"+O.groupIndex+"/"+y,O.oGroup[y]);}else{K=this.oModel.getProperty("/personalization");O.oGroup[z].splice(O.tileIndex,1);O.oGroup.visibilityModes=u.calcVisibilityModes(O.oGroup,K);this.oModel.setProperty("/groups/"+O.groupIndex+"/"+z,O.oGroup[z]);if(k===null||k===undefined){k=R.oNewGroup[y].length;R.oNewGroup[y].push(O.oTile);}else{k=this._adjustTileIndex(k,O.oTile,R.oNewGroup,y);R.oNewGroup[y].splice(k,0,O.oTile);}R.oNewGroup.visibilityModes=u.calcVisibilityModes(R.oNewGroup,K);this.oModel.setProperty("/groups/"+R.newGroupIndex+"/"+y,R.oNewGroup[y]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();function W(){I=this.oModel.getProperty("/groups/"+O.groupIndex);J=this.oModel.getProperty("/groups/"+R.newGroupIndex);U=this._getIndexForMove(z,O.tileIndex,k,R.oNewGroup,I);O.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(O.oTile,U,I,J,x).then(function(X){var Y=V._getPathOfTile(q);V._showMoveTileMessage(O.oTile,I,J);if(Y){V.oModel.setProperty(Y+"/object",X.object);V.oModel.setProperty(Y+"/originalTileId",X.originalTileId);var Z=V.oModel.getProperty(Y+"/content"),$=X.content;if(y==="links"){V._changeLinkScope($,A?"Actions":"Display");V._attachLinkPressHandlers($);V._handleTileAppearanceAnimation($);O.oTile.content=[$];V.oModel.setProperty(Y,Q.extend({},O.oTile));V.oModel.setProperty("/groups/"+R.newGroupIndex+"/"+y,V.oModel.getProperty("/groups/"+R.newGroupIndex+"/"+y));}else{V.oModel.setProperty(Y+"/content",[$]);}if(Z&&Z[0]){var _=$.onAfterRendering;$.onAfterRendering=function(){_.apply(this);Z[0].destroy();$.onAfterRendering=_;};}V.oModel.setProperty(Y+"/tileIsBeingMoved",false);if(j.callBack){j.callBack($);}}V._checkRequestQueue.call(V);},function(){V._resetGroupsOnFailure("fail_to_move_tile_msg");});}this._addRequest(W.bind(this));},_showMoveTileMessage:function(i,j,k){var q=this.oPageOperationAdapter.getTileTitle(i),w=k.title,x=r.i18n.getText("added_tile_to_group"),y=q+" "+x+" "+w;if(j.groupId!==k.groupId){M.show(y);}},_adjustTileIndex:function(j,k,q,I){var w=0,x=false,i=0;for(i=0;i<q[I].length&&w<j;i++){if(q[I][i].isTileIntentSupported){if(q[I][i]===k){x=true;}else{w++;}}}if(x){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},setDashboardView:function(i){this.oDashboardView=i;return this;},setTileVisible:function(i,V){this.oPageOperationAdapter.setTileVisible(i.object,V);},refreshTile:function(i){this.oPageOperationAdapter.refreshTile(i.object);},updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},_resetGroupsOnFailure:function(i,j){this._requestFailed();m.showLocalizedError(i,j);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(i,j){var k,q,w,x;for(k=0;k<j.length;k++){w=j[k];x=w.index;q=i[x];if(q){q.isRendered=true;q.tiles=q.tiles.concat(w.tiles);q.links=q.links.concat(w.links);}}return i;},createGroupsModelFrame:function(i,j){var k,q=[],O,w;w=function(x){var y=Q.extend({},x);y.tiles=[];y.pendingLinks=[];y.links=[];return y;};for(k=0;k<i.length;k++){O=i[k];q[k]=w(O);q[k].isRendered=false;q[k].visibilityModes=u.calcVisibilityModes(O,j);}return q;},_splitGroups:function(i,j){var k,q=[],w=0,I=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",E=this.oModel.getProperty("/personalization"),x=0,y;var z=500;for(k=0;k<i.length;k++){y=i[k];q.push(y);if(!this.segmentsStore.length){w+=this.PagingManager.getGroupHeight(y,j===k,E);}else{x+=y.tiles.length+y.links.length;}if(I&&!this.segmentsStore.length&&w>0){q.loadTilesView=true;this.segmentsStore.push(q);q=[];w=0;}if(w>=1||x>=z){this.segmentsStore.push(q);q=[];w=0;x=0;}}if(q.length){this.segmentsStore.push(q);}},_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},getSegmentContentViews:function(i){var j,k,q,w;for(j=0;j<i.length;j++){q=i[j];for(k=0;k<q.tiles.length;k++){w=q.tiles[k];if(w.isTileIntentSupported){this.getTileView(w);}}for(k=0;k<q.links.length;k++){w=q.links[k];if(w.isTileIntentSupported){this.getTileView(w,q.index);}}}this.bIsFirstSegmentViewLoaded=true;},getSegmentTabContentViews:function(i,E,j){var k,q,w=j.iSelectedGroup,x;x=this.oModel.getProperty("/groups/"+w);for(k=0;k<x.tiles.length;k++){q=x.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<x.links.length;k++){q=x.links[k];if(q.isTileIntentSupported){this.getTileView(q,w);}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},_setGroupModel:function(j){if(this.bIsGroupsModelLoading){L.info("Skip set the group model, because the group model is still loading");return;}var i=0,k,q=0,w=0,x=0,y,z,A=null,E,H,I=[];this.bIsGroupsModelLoading=true;try{q=this.oModel.getProperty("/groups").length;}catch(J){}for(i=j.length;i<q;++i){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+i));}if(!this.PagingManager){var K=Q("#dashboardGroups").width();if(!K){K=window.innerWidth;}var N=Q("#sapUshellDashboardPage-cont").height();if(N<100){N=window.innerHeight;}this.PagingManager=new P("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:N,containerWidth:K});}j.forEach(function(O){if(O.isGroupVisible){w+=O.tiles.length;}});this.bIsScrollModeAccordingKPI=w>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(j,this.oModel.getProperty("/personalization"));for(i=0;i<this.aGroupsFrame.length;i++){if(this.aGroupsFrame[i].isGroupVisible&&this.aGroupsFrame[i].visibilityModes[0]){if(A===null){A=i;this.aGroupsFrame[i].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",i);}x++;if(x>1){this.aGroupsFrame[A].showGroupHeader=false;break;}}}this._splitGroups(j,A);z=this.segmentsStore[0]?this.segmentsStore[0].length:0;y=this.aGroupsFrame.splice(0,z);n.start("FLP:DashboardManager._processSegment","_processSegment","FLP");I=this._processSegment(y);j.every(function(O,R){if(O.isDefaultGroup){k=R;return false;}return true;});I.indexOfDefaultGroup=k;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){E=this.getDashboardView();if(E){H=E.oDashboardGroupsBox;H.getBinding("groups").filter([E.oFilterSelectedGroup]);}}n.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",I);this.aGroupModel=I;if(this.oDashboardView){e.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true});}).do(this.handleFirstSegmentLoaded.bind(this));}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments();}.bind(this),0);}if(this.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}n.end("FLP:DashboardManager.loadGroupsFromArray");},getPreparedGroupModel:function(){return this.aGroupModel;},_loadGroup:function(i,N){var j=this,k="/groups/"+i,O=j.oModel.getProperty(k),I=O.isLastGroup,q=O.groupId;d.destroyFLPAggregationModel(O);if(q){N.groupId=q;}N.isLastGroup=I;N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},_hasPendingLinks:function(j){for(var i=0;i<j.length;i++){if(j[i].content[0]===undefined){return true;}}return false;},_addModelToTileViewUpdateQueue:function(i,j){this.tileViewUpdateQueue.push({uuid:i,view:j});},_updateModelWithTileView:function(i,j){var k=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){k.tileViewUpdateTimeoutID=undefined;k.oSortableDeferred.done(function(){k._updateModelWithTilesViews(i,j);});},50);},_updateGroupModelWithTilesViews:function(i,k,w,x){var y,U,z,A,E=k||0;for(var j=E;j<i.length;j=j+1){y=i[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(y.uuid===U.uuid){w.push(q);if(U.view){if(x){y.content=[U.view];}else{y.content[0].destroy();y.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(y);z=this.oPageOperationAdapter.getTileSize(y.object);A=((z!==null)&&(z==="1x2"))||false;if(y.long!==A){y.long=A;}}else{y.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(j,k){var q=this.oModel.getProperty("/groups"),w=j||0,x=[];if(!q||this.tileViewUpdateQueue.length===0){return;}for(var i=w;i<q.length;i=i+1){this._updateGroupModelWithTilesViews(q[i].tiles,k,x);if(q[i].links){this._updateGroupModelWithTilesViews(q[i].links,k,x,true);if(q[i].pendingLinks.length>0){if(!q[i].links){q[i].links=[];}q[i].links=q[i].links.concat(q[i].pendingLinks);q[i].pendingLinks=[];}}}var y=[],z;for(z=0;z<this.tileViewUpdateQueue.length;z++){if(x.indexOf(z)===-1){y.push(this.tileViewUpdateQueue[z]);}}this.tileViewUpdateQueue=y;this.oModel.setProperty("/groups",q);},getModelTileById:function(i,I){var j=this.oModel.getProperty("/groups"),k,q=false;j.every(function(w){w[I].every(function(x){if(x.uuid===i||x.originalTileId===i){k=x;q=true;}return!q;});return!q;});return k;},_attachLinkPressHandlers:function(V){var E=sap.ui.getCore().getEventBus(),i=V.attachPress?V:V.getContent()[0];i.attachPress(function(j){var k=V.getBindingContext().getObject().tileIsBeingMoved;if(!k&&this.getScope&&this.getScope()==="Actions"){switch(j.getParameters().action){case"Press":var q=V.getState?V.getState():"";if(q!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(j,V);}break;case"Remove":var w=V.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:w,items:"links"});break;default:break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),q,w,x,y=[],i,j;for(i=0;i<k.length;i++){q=k[i];w=q.tiles||[];for(j=0;j<w.length;j++){x=w[j];if(x.content.length===0){this.getTileView(x,i);}}y=q.links||[];for(j=0;j<y.length;j++){this.getTileView(y[j],i);}}this.oModel.refresh(false);var z=this.oModel.getProperty("/iSelectedGroup");if(z){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[z].groupId});},100);}},getTileViewsFromArray:function(R){var i=this;if(R.length===0){return;}R.forEach(function(j){i.getTileView(j.oTile,j.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},getTileView:function(i,j){var k=this.oPageOperationAdapter.getTileType(i.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(i)){return;}this.oDashboardLoadingManager.setTileInProgress(i);this.oPageOperationAdapter.setTileVisible(i.object,false);if(k==="card"){this._loadCardData(i);}else{this._loadTileData(i,j,k);}},_loadCardData:function(i){var j=sap.ui.getCore().byId(i.controlId);if(j&&j.setManifest&&this.isBlindLoading()){j.setManifest(i.manifest);}i.content=[i.manifest];this.oDashboardLoadingManager.setTileResolved(i);},getCurrentHiddenGroupIds:function(i){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(i);},_loadTileData:function(i,j,k){var q=this,w=this.oPageOperationAdapter.getTileView(i),x,y,z,U=this._addModelToTileViewUpdateQueue,A,N=false,E=i.uuid,H=false;if(w.state()==="resolved"){H=true;}w.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!i.isCustomTile){i.target=V.oController.navigationTargetUrl;}A=V;if(A.getComponentInstance){n.average("FLP:getComponentInstance","get info for navMode","FLP1");var I=A.getComponentInstance().getComponentData();if(I&&I.properties){i.navigationMode=I.properties.navigationMode;}n.end("FLP:getComponentInstance");}q.oDashboardLoadingManager.setTileResolved(i);x=V.getMode?V.getMode():"ContentMode";if(q.bLinkPersonalizationSupported&&x==="LineMode"){q._attachLinkPressHandlers(A);if(j>=0){y=q.oModel.getProperty("/groups");if(y[j]){i.content=[A];z=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",z);}}}else if(q.isBlindLoading()){if(i.content&&i.content.length>0){i.content[0].destroy();}i.content=[A];if(j>=0&&!H){q.oModel.refresh(false);}}if(q.isBlindLoading()){var J=q.oPageOperationAdapter.getTileSize(i.object);var K=J==="1x2";if(i.long!==K){i.long=K;}}else if(x==="LineMode"){i.content=[A];if(N){z=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",z);}}else if(i.content.length===0){i.content=[A];}else{U.apply(q,[E,A]);q._updateModelWithTileView(0,0);}});w.fail(function(){if(q.oPageOperationAdapter.getTileType(i.object)==="link"&&q.bLinkPersonalizationSupported){A=q.oPageOperationAdapter.getFailedLinkView(i);q._attachLinkPressHandlers(A);}else{A=new T({state:"Failed"});}i.content=[A];});if(!A){if(q.oPageOperationAdapter.getTileType(i.object)==="link"){N=true;A=new G({mode:"LineMode"});}else{A=new T();}i.content=[A];}},loadPersonalizedGroups:function(){var i=this;var j=new Q.Deferred();if(this.bIsGroupsRequestPending){L.info("loadPersonalizedGroups was skipped because there is already a pending request.");j.reject();return j.promise();}this.bIsGroupsRequestPending=true;this.oServiceLoadingPromise.then(function(){return i.oPageOperationAdapter.getPage();}).then(function(k){i._setGroupModel(k);i.bIsGroupsRequestPending=false;j.resolve();}).catch(function(){m.showLocalizedError("fail_to_load_groups_msg");i.bIsGroupsRequestPending=false;});n.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return j.promise();}});});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message","sap/ushell/resources"],function(M,r){"use strict";return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};function g(m,p){return r.i18n.getText(m,p);}function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("Message").then(function(o){o.show(t||M.Type.INFO,g(m,p),p);});}}function a(m,p){s(m,p,M.Type.ERROR);}function b(m,p){return function(){a(m,p);};}});
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(D,C,U,L,a,q){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(){if(D.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(b,A){b.getInstance().then(function(c){A.registerAppKeysHandler(c.handleFocusOnMe);});});}},getEffectiveHomepageSetting:function(c,b){var p,e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=Promise.resolve();}return p.then(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}return v;}).catch(function(){return C.last(c);});},_getPersonalization:function(i){return s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2")).then(function(p){return new Promise(function(r,R){p.getPersData().done(r).fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");R();});});});},getPersonalizer:function(i,c){return sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o=a.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}.bind(this));}};return s;});
sap.ui.predefine('sap/ushell/components/StateHelper',[],function(){"use strict";function g(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;}function a(s,d){var m=[];if(s==="app"&&!d){var A=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];m=m.concat(A);}else if(s==="home"&&!d){var h=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];m=m.concat(h);}else{m.push(s);}return m;}function b(s,d){var p=d?s:g(s);return p.reduce(function(r,S){var m=a(S,d);if(m){r=r.concat(m);}return r;},[]);}return{getAllStateToUpdate:b,getModelStates:a,getPassStates:g};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy',["sap/base/Log"],function(L){"use strict";function v(E,i){var a=0,b,I;if(!E||!i){return false;}var n=i.some(function(I){var N=!sap.ui.getCore().byId(I);if(N){L.warning("Failed to find control with id '{id}'".replace("{id}",I));}return N;});if(n){return false;}if(i.length===1&&i[0]==="endItemsOverflowBtn"){return true;}for(b=0;b<E.length;b++){I=E[b];if(I!=="endItemsOverflowBtn"){a++;}if(a+i.length>10){L.warning("maximum of six items has reached, cannot add more items.");return false;}if(i.indexOf(I)>-1){return false;}}return true;}function A(c,i){var n=c.concat(i);var s={"sf":-3,"newDesignSwitchItem":-2,"copilotBtn":-1,"NotificationsCountButton":1,"endItemsOverflowBtn":2,"meAreaHeaderButton":3,"productSwitchBtn":4};n.sort(function(a,b){var d=s[a]||0,B=s[b]||0;if(d===B){return a.localeCompare(b);}return d-B;});return n;}function e(c,V){var r=c;if(v(c,V)){r=A(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadItemsStrategy',[],function(){"use strict";function a(E,i){return E.indexOf(i)===-1?E.concat(i):E;}function A(E,i){return i.reduce(a,E);}function f(r){return function(i){return r.indexOf(i)===-1;};}function v(E,i){return A(E,i.filter(f(['backBtn','homeBtn']))).length<=3;}function b(c,I){var n=[],C=c.concat(I);if(c.indexOf("backBtn")>-1||I.indexOf("backBtn")>-1){n.push("backBtn");}if(c.indexOf("homeBtn")>-1||I.indexOf("homeBtn")>-1){n.push("homeBtn");}if(n.length<3){for(var i=0;i<C.length;i++){var s=C[i];if(n.indexOf(s)===-1){n.push(s);}if(n.length>=3){break;}}}return n;}function e(c,V){var r=c;if(v(c,V)){r=b(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ControlManager',["sap/m/Avatar","sap/m/library","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(A,m,D,E,r,S,a){"use strict";var b=m.AvatarSize;var c=[];function i(C,h,s){c.push(_(s));}function d(){c.forEach(function(I){var C=sap.ui.getCore().byId(I);if(C){if(C.destroyContent){C.destroyContent();}C.destroy();}});c=[];}function _(s){var I="meAreaHeaderButton",u=sap.ushell.Container.getUser(),t=r.i18n.getText("MeAreaToggleButtonAria",u.getFullName());var M=new A({id:I,src:"{/userImage/personPlaceHolder}",initials:u.getInitials(),customDisplaySize:"2.25rem",displaySize:b.Custom,tooltip:t,press:function(){E.emit("showMeArea",Date.now());}});if(D.system.desktop){M.addEventDelegate({onsapskipforward:function(e){a.bForwardNavigation=true;e.preventDefault();window.document.getElementById("sapUshellHeaderAccessibilityHelper").focus();}});}M.setModel(s);return I;}return{init:i,destroy:d};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy',["sap/ui/thirdparty/jquery"],function(q){"use strict";function e(c,v){if(!v){v={};}return q.extend(true,{},c,v);}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/PropertyStrategiesFactory',["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(A,a,E,R,S){"use strict";return function(p,s){var o;switch(p){case"headItems":if(s==="remove"){o=R;}else{o=A;}break;case"headEndItems":if(s==="remove"){o=R;}else{o=a;}break;case"homeUri":case"showLogo":case"headerVisible":case"centralAreaElement":case"title":o=S;break;case"application":o=E;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/showNavMenuTitle":case"application/title":o=S;break;default:o=null;break;}return o;};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/RemoveItemsStrategy',["sap/base/Log"],function(L){"use strict";function v(E,i){return i.some(function(I){return(E.indexOf(I)>=0);});}function r(c,i){return c.filter(function(I){return(i.indexOf(I)===-1);});}function e(c,V){var R=c;if(v(c,V)){R=r(c,V);}else{L.warning("You cannot remove item: "+V+", the item does not exists.");}return R;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy',[],function(){"use strict";function v(n){return n!==undefined;}function e(c,V){if(v(V)){return V;}return c;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ShellHeader.controller',["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/ui/shell/OverflowListItem"],function(m,C,D,J,A,a,E,O){"use strict";var L=m.ListType;var F=O.prototype.FloatingNumberType;return C.extend("sap.ushell.components._HeaderManager.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(E.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(E.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(E.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)));},shellUpdateAggItem:function(i,c){return sap.ui.getCore().byId(c.getObject());},pressNavBackButton:function(){E.emit("showMeArea",false);A.service().navigateBack();},pressEndItemsOverflow:function(s){var p=sap.ui.getCore().byId("headEndItemsOverflow"),S=sap.ui.getCore().byId(s),l=Promise.resolve(),M;if(!S){return;}if(!p){l=new Promise(function(r,b){sap.ui.require(["sap/ui/core/Fragment"],function(c){c.load({name:"sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",type:"XML",controller:this}).then(r).catch(b);}.bind(this),b);}.bind(this)).then(function(b){p=b;var P=sap.ui.getCore().byId("headEndItemsOverflowList");P.enhanceAccessibilityState=function(o,c){if(o.getFloatingNumberType()!==F.None){c.describedby=o._oAriaDescribedbyText.getId();}return c;};M=new J({headEndItems:a.last("/core/shellHeader/headEndItems")});p.setModel(M);});}l.then(function(){if(p.isOpen()){p.close();}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){E.emit("showNotifications",false);}p.openBy(S);}});},headEndItemsOverflowItemFactory:function(i,c){var s=sap.ui.getCore().byId(c.getObject());var f=s.getBindingPath("floatingNumber");var o=new O({id:i+"-"+s.getId(),icon:s.getIcon(),iconInset:true,title:s.getText(),type:L.Active,floatingNumber:(f?{path:f}:undefined),floatingNumberType:s.getFloatingNumberType(),press:function(){if(s){s.firePress();}var p=sap.ui.getCore().byId("headEndItemsOverflow");if(p.isOpen()){p.close();}}});if(s._oAriaLabel){o.addAriaLabelledBy(s._oAriaLabel);}if(f){o.setModel(s.getModel());}return o;},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy();},isHeadEndItemInOverflow:function(b){return b!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(b);},isHeadEndItemNotInOverflow:function(b){var o=this.isHeadEndItemOverflow();var s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(b==="ENDITEMSOVERFLOWBTN"){return o;}if(!o){return true;}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(b)>-1){return true;}if(s==="Phone"){return false;}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(b)>-1){return true;}if(s==="Desktop"&&b==="COPILOTBTN"){return true;}return false;},isHeadEndItemOverflow:function(){var n=0,e,b=a.last("/core/shellHeader/headEndItems");if(b.indexOf("endItemsOverflowBtn")===-1){return false;}var c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var d=3;if(c==="Phone"){d=1;}for(var i=0;i<b.length;i++){e=sap.ui.getCore().byId(b[i]);if(e&&e.getVisible()){n++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return n>d+1;}return n>d;},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){E.emit("centerViewPort",Date.now());window.hasher.setHash(i);}var s=sap.ui.getCore().byId("shellAppTitle");if(s){s.close();}},onExit:function(){this.aDoables.forEach(function(d){d.off();});}});});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(B,M,q){"use strict";var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refreshTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},manageDynamicTiles:function(){var v;M.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var k,V,t,a,n={},c=q.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;this.oDashboardManager.setTileVisible(t,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){this.oDashboardManager.setTileVisible(t,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;M.end("DashboardLoadingManagerActiveDynamicTile");},isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]===undefined&&this.oResolvedTiles[t.uuid]===undefined){return false;}return true;},manageBusyIndicatorTiles:function(){M.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}M.end("DashboardLoadingManagerBusyIndicators");},setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},_refreshTiles:function(){for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);this.oDashboardManager.setTileVisible(t,true);this.oDashboardManager.refreshTile(t);break;}}}}},_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){this.oDashboardManager.setTileVisible(t,false);}delete this.oActiveDynamicTiles[t.uuid];}},manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]===undefined&&this.oResolvedTiles[c.oTile.uuid]===undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}});return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=(function(v){return function(){return v;};}(this.getInterface()));this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.supportedElements=c;},_getTileHeight:function(i){return i?148:176;},_getTileWidth:function(i,I){if(i){return I?304:360;}return I?148:176;},getGroupHeight:function(g,f,e){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup||!e||D.system.phone){return 0;}return(a+b)/this.containerHeight;}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},resetCurrentPageIndex:function(){this.currentPageIndex=0;},getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},_calcElementMatrix:function(c){var e=document.createElement("div");e.classList.add(c);document.getElementsByTagName("body")[0].appendChild(e);var a=e.clientHeight;var b=e.clientWidth;var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize.default;}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},_calcElementsPerPage:function(){var s,b,a,m,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}});return P;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter',["sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(B,C,r,m,G,g,L,M,a,d){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var e={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function _(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(e.PERSONALIZATION,E,p);});}var P=B.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(l){B.call(this);this.oPageBuilderService=l;},_getIsAppBox:function(o){if(!sap.ushell.Container){return false;}var s=this.oPageBuilderService,i=!!(s.getCatalogTileTargetURL(o)&&(s.getCatalogTilePreviewTitle(o)||s.getCatalogTilePreviewSubtitle(o)));return i;},getCurrentHiddenGroupIds:function(o){var h=o.getProperty("/groups"),H=[],s,i,j;for(i=0;i<h.length;i++){j=h[i]?h[i].isGroupVisible:true;if(h[i].object){s=this.oPageBuilderService.getGroupId(h[i].object);}if(!j&&s!==undefined){H.push(s);}}return H;},getPreparedTileModel:function(t,i,T){var s=this.oPageBuilderService,h=g(),o,S=s.getTileSize(t),l=[],j;T=T||s.getTileType(t);if(T==="link"){l=[new G({mode:sap.m.GenericTileMode.LineMode})];}o={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":s.getTileId(t),"uuid":h,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":l,"long":S==="1x2","target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":s.isLinkPersonalizationSupported(t),"navigationMode":undefined};if(T==="card"){j=s.getCardManifest(t);o.isCard=true;if(j){o.manifest=j;}}return o;},getPreparedGroupModel:function(o,D,l,h){var s=this.oPageBuilderService,j=(o&&s.getGroupTiles(o))||[],k=[],n=[],i,p=C.last("/core/shell/model/personalization"),H=C.last("/core/extension/enableHelp");var I=!!(o&&s.isGroupLocked(o)),q=!!(o&&s.isGroupFeatured(o));for(i=0;i<j.length;++i){var t=j[i],T=s.getTileType(t).toLowerCase();if(T==="tile"||T==="card"){k.push(this.getPreparedTileModel(j[i],I,T));}else if(T==="link"){n.push(this.getPreparedTileModel(j[i],I,T));}else{L.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(o&&s.getGroupTitle(o))||(h&&h.title)||"",object:o,groupId:g(),helpId:(H&&o)?s.getGroupId(o):null,links:n,pendingLinks:[],tiles:k,isDefaultGroup:!!D,editMode:!o,isGroupLocked:I,isFeatured:q,visibilityModes:[true,true],removable:!o||s.isGroupRemovable(o),sortable:p,isGroupVisible:!o||s.isGroupVisible(o),isEnabled:!D,isLastGroup:l||false,isRendered:!!(h&&h.isRendered),isGroupSelected:false};},getPage:function(){M.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this));},_getGroupsFromServer:function(){var t=this;return new Promise(function(h,i){t.oPageBuilderService.getGroups().done(function(j){M.end("FLP:DashboardManager.loadPersonalizedGroups");h(j);}).fail(i);});},loadGroupsFromArray:function(h){var t=this;M.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");M.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(j,k){t.oPageBuilderService.getDefaultGroup().done(function(D){M.end("FLP:DashboardManager.getDefaultGroup");if(h.length===0&&D===undefined){j([]);return;}var i=0,n,N=[],l,o;h=t._sortGroups(D,h);o=h.findIndex(function(p){return d(p,D);});l=h.length;M.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<l;++i){n=t.getPreparedGroupModel(h[i],i===o,i===l-1);n.index=i;N.push(n);}M.end("FLP:DashboardManager._getGroupModel");M.end("FLP:DashboardManager.loadGroupsFromArray");j(N);}).fail(k);});},_sortGroups:function(D,h){var i=0,t=this,j=h.findIndex(function(o){return d(o,D);}),l=[],k,o,n;if(j>-1){h.splice(j,1);}while(i<h.length){o=h[i];n=this.oPageBuilderService.isGroupLocked(o);if(n){l.push(o);h.splice(i,1);}else{i++;}}if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){var p=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),q=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return p<q?-1:1;});}l.sort(function(x,y){var I=t.oPageBuilderService.isGroupFeatured(x),p=t.oPageBuilderService.isGroupFeatured(y);if(I===p){return 0;}else if(I>p){return-1;}return 1;});k=l;k.push(D);k.push.apply(k,h);return k;},addGroupAt:function(o,i,I){var t=this;return new Promise(function(h,j){try{if(i===undefined){t.oPageBuilderService.addGroup(o.title).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}else{t.oPageBuilderService.addGroupAt(o.title,i).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}}catch(k){j();}});},renameGroup:function(o,n,O){var t=this;return new Promise(function(h,i){try{t.oPageBuilderService.setGroupTitle(o.object,n).done(function(){var s=t.oPageBuilderService.getGroupId(o.object);_(e.RENAME_GROUP,[O,n,s]);h();}).fail(i);}catch(E){i();}});},deleteGroup:function(o){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),i=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(j,k){try{t.oPageBuilderService.removeGroup(s).done(function(){_(e.DELETE_GROUP,[i,h]);j();}).fail(k);}catch(l){k();}});},moveGroup:function(o,t,i){var h=this;return new Promise(function(j,k){try{h.oPageBuilderService.moveGroup(o.object,t).done(function(){var s=h.oPageBuilderService.getGroupId(o.object);_(e.MOVE_GROUP,[o.title,i.iFromIndex,i.iToIndex,s]);j();}).fail(k);}catch(l){k();}});},resetGroup:function(o,i){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),j=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(k,l){try{t.oPageBuilderService.resetGroup(s).done(function(R){_(e.RESET_GROUP,[j,h]);k(t.getPreparedGroupModel(R||s,i,o.isLastGroup,undefined));}).fail(l);}catch(n){l();}});},refreshGroup:function(s){var t=this,E="Failed to refresh group with id:"+s+" in the model";return new Promise(function(h){t.oPageBuilderService.getGroups().fail(function(){L.error(E,null,"sap.ushell.components.HomepageManager");h(null);}).done(function(j){var S=null;for(var i=0;i<j.length;i++){if(t.oPageBuilderService.getGroupId(j[i])===s){S=j[i];break;}}if(S){t.oPageBuilderService.getDefaultGroup().done(function(D){var I=s===D.getId(),o=t.getPreparedGroupModel(S,I,false,{isRendered:true});h(o);});}else{h(null);}});});},getIndexOfGroup:function(h,s){var n=-1,t=this,i=this.oPageBuilderService.getGroupId(s);h.every(function(o,j){var k=t.oPageBuilderService.getGroupId(o.object);if(k===i){n=j;return false;}return true;});return n;},getOriginalGroupIndex:function(o){var s=this.oPageBuilderService,S=o.object,h=this.oPageBuilderService.getGroups();return new Promise(function(j,k){h.done(function(l){var n;for(var i=0;i<l.length;i++){if(s.getGroupId(l[i])===s.getGroupId(S)){n=i;break;}}j(n);}).fail(k);});},moveTile:function(t,i,s,T,h){var j=this,S,p=new Promise(function(k,l){try{var R=j.oPageBuilderService.moveTile(t.object,i.tileIndex,i.newTileIndex,s.object,T.object,h);R.done(function(o){var u=[j.oPageBuilderService.getTileTitle(t.object),j.oPageBuilderService.getGroupTitle(s.object),j.oPageBuilderService.getGroupTitle(T.object),t.uuid];_(e.MOVE_TILE,u);S=o;k(o);});R.fail(l);}catch(n){l();}});return p.then(this._getTileViewAsPromise.bind(this)).then(function(v){return Promise.resolve({content:v,originalTileId:j.oPageBuilderService.getTileId(S),object:S});});},removeTile:function(o,t){var h=this,s=t.object,T=h.oPageBuilderService.getTileTitle(s),i=h.oPageBuilderService.getCatalogTileId(s),j=h.oPageBuilderService.getCatalogTileTitle(s),k=h.oPageBuilderService.getTileId(s),p;p=new Promise(function(l,n){try{h.oPageBuilderService.removeTile(o.object,s).done(function(){m.showLocalizedMessage("tile_deleted_msg",[T,o.title]);_(e.DELETE_TILE,[T||k,i,j,o.title]);l();}).fail(n);}catch(q){n();}});return p;},_getTileViewAsPromise:function(t){var h=this,p=new Promise(function(i,j){var k=h.oPageBuilderService.getTileView(t);k.done(i);k.fail(j);});return p;},refreshTile:function(s){this.oPageBuilderService.refreshTile(s);},setTileVisible:function(s,v){this.oPageBuilderService.setTileVisible(s,v);},getTileType:function(s){return this.oPageBuilderService.getTileType(s);},getTileSize:function(s){return this.oPageBuilderService.getTileSize(s);},getTileTitle:function(t){return this.oPageBuilderService.getTileTitle(t.object);},getTileId:function(s){return this.oPageBuilderService.getTileId(s);},isLinkPersonalizationSupported:function(s){return this.oPageBuilderService.isLinkPersonalizationSupported(s);},getTileTarget:function(t){return this.oPageBuilderService.getTileTarget(t.object);},getTileView:function(t){return this.oPageBuilderService.getTileView(t.object);},getTileActions:function(t){return this.oPageBuilderService.getTileActions(t);},getFailedLinkView:function(t){var s=this.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var h=this.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!h&&!s){h=r.i18n.getText("cannotLoadLinkInformation");}return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s){L.error("Cannot get tile with id "+s+": Method is not supported");},transformGroupModel:function(){return;}});var f=null;return{getInstance:function(l){if(!f){f=new P(l);}return f;},destroy:function(){f=null;}};});
sap.ui.predefine('sap/ushell/components/_HomepageManager/TransientPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(q,B,C,r,m,G,I,T,u,L,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var d=B.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(l){B.call(this);this.oPageBuilderService=l;this._createCatalogMap();},_createCatalogMap:function(){if(this.mCatalogTiles){return;}var s=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(f){for(var i=0;i<f.length;i++){for(var j=0;j<f[i].length;j++){t.mCatalogTiles[s.getCatalogTileId(f[i][j])]=f[i][j];}}});},getCurrentHiddenGroupIds:function(){return[];},getTileActions:function(t){t.isStub=function(){return true;};var R=this.oPageBuilderService.getTileActions(t);delete t.isStub;return R;},getPreparedTileModel:function(t,i,s){var f=u(),o,l=[];s=s||t.type;if(s==="link"){l=[new G({mode:b.LineMode})];}o={"isCustomTile":false,"object":t,"originalTileId":f,"uuid":f,"tileCatalogId":"","content":l,"long":false,"target":"","debugInfo":null,"isTileIntentSupported":true,"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":true,"navigationMode":undefined};if(s==="card"){o.isCard=true;o.manifest={};}return o;},getPreparedGroupModel:function(g,D,l,o){var f=u(),h=(g&&g.tiles)||[],M=[],j=[],i;for(i=0;i<h.length;++i){var t=h[i],s=t.type.toLowerCase();if(s==="tile"||s==="card"){M.push(this.getPreparedTileModel(h[i],false,s));}else if(s==="link"){j.push(this.getPreparedTileModel(h[i],false,s));}else{L.error("Unknown tile type: '"+s+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(g&&g.title)||(o&&o.title)||"",object:g,groupId:f,links:j,pendingLinks:[],tiles:M,isDefaultGroup:!!D,editMode:!g,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!D,isLastGroup:l||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false};},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)]);},addGroupAt:function(g,i,D){var f={title:g.title};return Promise.resolve(this.getPreparedGroupModel({},D,g.isLastGroup,f));},renameGroup:function(){return Promise.resolve();},deleteGroup:function(){return Promise.resolve();},moveGroup:function(){return Promise.resolve();},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode");},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode");},getIndexOfGroup:function(){return Promise.resolve(-1);},getOriginalGroupIndex:function(g,f){var h;for(var i=0;i<f.length;i++){if(f[i].groupId===g.groupId){h=i;break;}}return Promise.resolve(h);},moveTile:function(t,i,s,o,f){var g=this._findCatalogTile(t.tileCatalogId);return Promise.resolve({content:this._getTileView(g,f),originalTileId:t.uuid,object:{id:t.uuid,type:f,title:this.oPageBuilderService.getCatalogTileTitle(g)}});},removeTile:function(){return Promise.resolve();},_getTileView:function(o,t){if(t==="link"){return new G({mode:b.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o)});}return new G({header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o),tileContent:new T({content:new I({src:this.oPageBuilderService.getCatalogTilePreviewIcon(o)})})});},refreshTile:function(){return;},setTileVisible:function(){return;},getTileType:function(s){return s.type;},getTileSize:function(){return"1x1";},getTileId:function(s){return s.id;},isLinkPersonalizationSupported:function(){return true;},getTileTarget:function(t){var o=this._findCatalogTile(t.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(o);},getTileTitle:function(t){return t.object.title;},_getAllCatalogTiles:function(){var s=this.oPageBuilderService;function g(f){f.map(function(o){var h=s.getCatalogId(o)||"";return s.getCatalogTitle(o)||h.split(":").slice(1).join(":");});return Promise.all(f.map(function(o){return s.getCatalogTiles(o);}));}return Promise.resolve(s.getCatalogs()).then(g);},_findCatalogTile:function(s){return this.mCatalogTiles[s];},getTileView:function(t){var o=this._findCatalogTile(t.tileCatalogId),v=this._getTileView(o,t.object.type),D=new q.Deferred();D.resolve(v);return D.promise();},getFailedLinkView:function(t){var h=t.object.title||r.i18n.getText("cannotLoadLinkInformation"),s="";return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s,t){var o=this._findCatalogTile(s),f;t=t||"tile";f=this.getPreparedTileModel({},false,t);f.tileCatalogId=s;f.object={id:f.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(o)};var v=this._getTileView(o,t);f.content=[v];return f;},transformGroupModel:function(g){var t=this,o;for(var i=0;i<g.length;i++){o=g[i];o.object={};o.tiles.forEach(function(f){var s=f.object;f.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);f.object={id:f.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(s)};});o.links.forEach(function(l){var s=l.object;l.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);l.object={id:l.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(s)};});}return g;}});var e;return{getInstance:function(l){if(!e){e=new d(l);}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ApplicationType","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,S,B,a,A,R,b,c,d,u,D,C,f,U,q,L){"use strict";function g(){var v,h=["URL"],r,s,i,I={},j=false,o={},k={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},w,G=[],l={},m=false,K={FULL:"true",RESTRICTED:"restricted"};this.shellElements=function(){return b;};this.service=function(){return R;};this.isCurrentApp=function(e){return(o.appId===e);};this.isAppWithSimilarShellHashInCache=function(e,F){var p=S.get(e);if(p){if(p.shellHash===F){return true;}return false;}return false;};this.isAppInCache=function(e){return!!S.get(e);};this.normalizeAppId=function(e){var p="-component",t=e.endsWith(p);if(t){return e.substring(0,e.length-p.length);}return e;};this.onComponentCreated=function(e,p,t){var x=t.component,y=this.normalizeAppId(x.getId());if(this.isAppInCache(y)){S.get(y).app=x;this.active(y);}else{o.app=x;if(x.active){x.active();}}};this.onGetMe=function(e,p,t){t.AppLifeCycle=this;};this.store=function(e){var p=S.get(e);if(p){A.store(p);c.store(p.meta);}};this.destroy=function(e,F,p,t){var x=S.get(e),y;function z(){if(F&&F.getUrl){B.deleteStateFul(F.getUrl());}A.destroy(F);b.destroy(F);c.destroy(F);}if(t===undefined){t=false;}this.removeControl(e,t);if(x){y=B.getStateFul(F.getUrl());if(y&&B.isStatefulContainerSupported(y)&&t===false){var H=B.getHandler();H.destroy(y,e);}else{x.container.destroy();B.deleteStateFul(F.getUrl());}S.remove(e);if(p){p.resolve();}}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){z();if(p){p.resolve();}}else{P.then(function(){z();if(p){p.resolve();}},function(J){z();if(p){p.resolve();}L.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",J,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(e){var p=S.get(e);if(p){A.restore(p);R.restore(p.service);c.restore(p.meta);}};this.active=function(e){var p=S.get(e);if(p){A.active(p.app);}};this.handleExitStateful=function(F,e){var p,H=B.getHandler();if(S.get(F)){p=B.getStorageKey(e);if(p&&B.isKeepAliveSupported(e)){return H.store(e,p);}return Promise.resolve();}return H.destroy(e);};this.handleExitApplication=function(F,e,t,T,p){var x=this,y,P,z;if(t&&T&&T.getIframeReusedForApp&&T.getIframeReusedForApp()===true){T.setProperty("iframeReusedForApp",false,true);A.postMessageToIframeApp(T,"sap.ushell.sessionHandler","afterApplicationShow",{},false);}if(F&&e){if(e.getUrl()&&B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))){P=this.handleExitStateful(F,e);}else if(S.get(F)){if(R.isBackNavigation()===true&&!p){z=new q.Deferred();this.destroy(F,e,z);P=z.promise();}else{this.store(F);sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",e);}}else if(e.getIsStateful&&e.getIsStateful()){if(p){P=e.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{y=h.indexOf(e.getApplicationType)>=0;if(this.isAppOfTypeCached(F,y)===false){z=new q.Deferred();this.destroy(F,e,z);P=z.promise();}}if(p===true){if(P===undefined){this.closeKeepAliveApps(n);}else{P.then(function(){x.closeKeepAliveApps(n);});}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");};function n(e){return(e.value.keepAliveMode===K.RESTRICTED);}this.closeKeepAliveApps=function(F,p){try{var t=this,x=[];S.forEach(function(y){if(F.apply(this,[y])===true){x.push(y.value);}});x.forEach(function(y){var z;if(p){z=new q.Deferred();p.push(z.promise());}t.destroy(y.appId,y.container,z,true);});}catch(e){L.error("Error: sap.ushell.services.appLifeCycle.closeOtherKeepAliveRestrictedApps:"+e);}};this.onBeforeNavigate=function(F,e,t,T){if(F&&e){if(e.getUrl()&&(B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))||S.get(F)||(e.getIsStateful&&e.getIsStateful()))){A.postMessageToIframeApp(e,"sap.ushell.sessionHandler","beforeApplicationHide",{},false);}}};this.onAfterNavigate=function(F,e,t,T){var p=t.indexOf("Shell-appfinder-component")>0||t.indexOf("Shell-home-component")>0||t.indexOf("pages-component-container")>0;this.handleExitApplication(F,e,t,T,p);if(p===true){A.setActiveAppContainer(undefined);}if(t){if(S.get(t)){this.restore(t);}else{}}};this.storeApp=function(e,p,t,F,x){if(!this.isAppInCache(e)){if(p.setProperty){p.setProperty("isKeepAlive",true,true);}S.set(e,{service:{},shellHash:F,appId:e,stt:"loading",appRelatedElements:b.getAppRelatedElement(),container:p,meta:d.getMetadata(t),app:undefined,keepAliveMode:x&&(x.globalValue||x.paramValue),appTarget:t,ui5ComponentName:t&&t.ui5ComponentName});I[F]=e;B.setStorageKey(p,e);return true;}return false;};this.restoreApp=function(e){if(this.isAppInCache(e)){o=S.get(e);if(B.getStorageKey(o.container)){B.setStorageKey(o.container,e);}}};this.isAppOfTypeCached=function(e,p,t){var x;if(!j&&e.indexOf(r)!==-1){return true;}if(!j&&e.indexOf("Shell-appfinder")!==-1){return true;}x=new U(window.location.href).get("sap-keep-alive");if(x===K.FULL||x===K.RESTRICTED){if(t){t.globalValue=x;}return true;}return false;};this.isCachedEnabledAsAppParameter=function(e,t,p){var x;if(t&&t.appCapabilities&&t&&t.appCapabilities.appFrameworkId==="UI5"){return false;}x=e&&e.params&&e.params["sap-keep-alive"];if(x===K.FULL||x===K.RESTRICTED){if(p){p.paramValue=x;}return true;}if(t&&t.url){x=new U(t.url).get("sap-keep-alive");if(x===K.FULL||x===K.RESTRICTED){if(p){p.paramValue=x;}return true;}}return false;};this.calculateAppType=function(t){if(t.applicationType==="URL"&&t.additionalInformation&&t.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5";}return t.applicationType;};this.getStatefulCapabilities=function(t){if(t.appCapabilities&&t.appCapabilities&&t.appCapabilities.statefulContainer){return t.appCapabilities.statefulContainer;}return undefined;};this.isNotifyInnerAppRouteChangeEnabled=function(t){if(t.appCapabilities&&t.appCapabilities.notifyInnerAppRouteChange){return true;}return false;};this.isStatefulCapabilityEnabled=function(t){var e=this.getStatefulCapabilities(t);if(e&&(e.enabled===true||e===true)){return true;}return false;};this.isGUICapabilityEnabled=function(t){var e=this.getStatefulCapabilities(t);if(e&&e.protocol==="GUI"){return true;}return false;};this.isFLPCapabilityEnabled=function(t){return!this.isGUICapabilityEnabled(t)&&this.isStatefulCapabilityEnabled(t);};this.isGUIStatefulCapabilityEnabled=function(t){return this.isGUICapabilityEnabled(t)&&this.isStatefulCapabilityEnabled(t);};this.openApp=function(e,t,p,F){var x,y,z=h.indexOf(t.applicationType)>=0,T,H,J={globalValue:undefined,paramValue:undefined};var M="application"+e;x=B.getStateFul(t.url);if(x&&B.isStatefulContainerSupported(x)){if(this.isAppOfTypeCached(M,z,J)||this.isCachedEnabledAsAppParameter(p,t,J)){if(!this.isAppInCache(M)){this.storeApp(M,x,t,F,J);}this.restoreApp(M);}else{o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}}else if(this.isAppOfTypeCached(M,z,J)||this.isCachedEnabledAsAppParameter(p,t,J)){if(!this.isAppInCache(M)){x=this.createApplicationContainer(e,t);this.storeApp(M,x,t,F,J);B.set(t.url,x);}this.restoreApp(M);}else if(t.applicationType==="TR"||(t.appCapabilities&&t.appCapabilities.appFrameworkId==="GUI")){x=this.getWebGuiV1StatefulContainer(t.url);if(!x){x=this.createApplicationContainer(e,t);B.set(t.url,x);}o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}else{if(x){y=p.semanticObject+"-"+p.action;this.removeApplication(y);}else if(t.applicationType==="URL"||t.applicationType==="TR"){y=p.semanticObject+"-"+p.action;T=B.getById("application-"+y);if(T){H=T.getUrl();B.removeCapabilities(T);this.destroy("application-"+y,T);B.deleteStateFul(H);}}x=this.createApplicationContainer(e,t);B.set(t.url,x);if(B.isCapUT(x,"isFLP")){B.setCapabilities(x,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}]);}o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}};this.getAppMeta=function(){return c;};this.evict=function(e){var p,t=e.value,x=e.key;this.removeControl(x);if(t.container.getUrl&&t.container.getUrl()){p=B.getStateFul(t.container.getUrl());}if(p){var H=B.getHandler();H.destroy(p,x);}else{t.container.destroy();}};this.init=function(e,p,t,x,y,z,F){var H=this,J;if(D.system.phone){J=10;if(F&&F.limit&&F.limit.phone){J=F.limit.phone;}}else if(D.system.tablet){J=10;if(F&&F.limit&&F.limit.tablet){J=F.limit.tablet;}}else if(D.system.desktop){J=15;if(F&&F.limit&&F.limit.desktop){J=F.limit.desktop;}}else{J=10;}s=new a({scopeObject:y.ownerComponent,scopeType:"component"});i=e;v=p;r=t;c.init(r);j=x;B.init({oShellUIService:s},F,this);S.init(J,function(M){this.evict(M);}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{create:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.create:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.create:"+M);});}},destroy:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.destroy:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.destroy:"+M);});}},store:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.store:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.store:"+M);});}},restore:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.restore:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.restore:"+M);});}}},oServiceCalls:{subscribe:{executeServiceCallFn:function(M){B.mapCapabilities(M.oContainer,M.oMessageData.body);return new q.Deferred().resolve({}).promise();}},setup:{executeServiceCallFn:function(M){var N=M.oMessageData&&M.oMessageData.body,O=[],P=M.oContainer.getApplicationType(),Q=M.oContainer.getFrameworkId(),T=false;if(N){if(M.oContainer.getIsKeepAlive()===true&&(P==="GUI"||P==="TR"||P==="NWBC"||P==="WDA"||Q==="GUI"||Q==="WDA"||Q==="NWBC")){T=true;}if(N.isStateful===true&&!T){O.push({"action":"create","service":"sap.ushell.services.appLifeCycle"});O.push({"action":"destroy","service":"sap.ushell.services.appLifeCycle"});}if(N.session&&N.session.bLogoutSupport===true){O.push({"action":"logout","service":"sap.ushell.sessionHandler"});}if(O.length>0){B.mapCapabilities(M.oContainer,O);}}return new q.Deferred().resolve().promise();}}}},"sap.gui":{oServiceCalls:{loadFinished:{executeServiceCallFn:function(M){var N=M.oContainer.getApplicationType(),O=M.oContainer.getFrameworkId();if((N==="GUI"||N==="TR"||N==="NWBC"||O==="GUI"||O==="NWBC")&&M.oContainer.getIsKeepAlive()===false){H.setWebGuiV1StatefulContainer(M.oContainer);M.oContainer.setIsStateful(true);o={appId:M.oContainer.getId(),stt:"loading",container:M.oContainer,meta:undefined,app:undefined};}return new q.Deferred().resolve({}).promise();}}}}});sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);b.init(this.getElementsModel(),z);};this.addControl=function(e){v.addCenterViewPort(e);};this.removeControl=function(e,F){var p=B.getById(e),t=B.isStatefulContainerSupported(p);if(!t||F){v.removeCenterViewPort(e,true);}};this.removeApplication=function(e){var p=this.getControl(e);if(p){this.removeControl(p.getId());p.destroy();}};this.getControl=function(e){return v&&(v.getViewPortControl("centerViewPort","application-"+e)||v.getViewPortControl("centerViewPort","applicationShellPage-"+e));};this.getViewPortContainer=function(){return v;};this.navTo=function(e){v.navTo("centerViewPort",e,"show");};this.getCurrentApplication=function(){return o;};this.setApplicationFullWidth=function(e){var p=this.getCurrentApplication();if(p.container){p.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e);}};this.createComponent=function(e,p){function t(z){return(z.value.ui5ComponentName===e.ui5ComponentName);}var x=[],y=new q.Deferred();this.shellElements().setDangling(true);this.closeKeepAliveApps(t,x);Promise.all(x).then(function(){A.createComponent(e,p).done(y.resolve).fail(y.reject);});return y.promise();};this.getAppContainer=function(e,p,t,x,F){p.shellUIService=s.getInterface();p.targetNavigationMode=t?"explace":"inplace";this.openApp(e,p,x,F);if(G.length>0){o.container.registerShellCommunicationHandler(G);}if(l.UI5APP){o.container.setIframeHandlers(l.UI5APP);}return o.container;};this.getShellUIService=function(){return s;};this.initShellUIService=function(e){s._attachHierarchyChanged(c.onHierarchyChange.bind(this));s._attachTitleChanged(c.onTitleChange.bind(this));s._attachRelatedAppsChanged(c.onRelatedAppsChange.bind(this));s._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this));};this.getElementsModel=function(){return E;};this.activeContainer=function(p){var t=this.getWebGuiV1AllApplicationContainers();t.forEach(function(e){L.info("Deactivating container "+e.getId());e.setActive(false);});B.forEach(function(x){if(x&&x!==p){try{L.info("Deactivating container "+x.getId());x.setActive(false);}catch(e){}}});if(p){L.info("Activating container "+p.getId());p.setActive(true);}};this.showApplicationContainer=function(e){this.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}else{e.toggleStyleClass("hidden",false);}A.setActiveAppContainer(e);L.info("New application context opened successfully in an existing transaction UI session.");};this.reuseStateFulContainerAndRestore=function(e,t,H,F,T){var p=this,x=I[F];if(B.getStorageKey(e)){B.setStorageKey(e,x);}return H.restore(e,x,T).then(function(){p.showApplicationContainer(e);},function(y){L.error(y&&y.message||y);});};this.reuseStateFulContainer=function(e,p,t,H,F,T){var x=this;I[F]=t;if(B.getStorageKey(e)){B.setStorageKey(e,t);}this.initAppMetaParams();return H.create(e,p,t,T).then(function(){x.showApplicationContainer(e);},function(y){L.error(y&&y.message||y);});};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){s.setHierarchy();}if(!this.getAppMeta().getIsTitleChanged()){s.setTitle();}if(!this.getAppMeta().getIsRelatedAppsChanged()){s.setRelatedApps();}if(!m){s.setBackNavigation();}};this.reuseApplicationContainer=function(e,p,t){var x=this;e.setProperty("iframeReusedForApp",true,true);return e.setNewApplicationContext(p,t).then(function(){x.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}else{e.toggleStyleClass("hidden",false);}L.info("New application context opened successfully in an existing transaction UI session.");},function(y){L.error(y&&y.message||y);});};this.createApplicationContainer=function(e,p){return A.createApplicationContainer(e,p);};this.publishNavigationStateEvents=function(e,p,O){var t,x=e.getId?e.getId():"",y=this;var z=d.getMetadata(),F=z.icon,T=z.title;e.addEventDelegate({onAfterRendering:O});t=e.exit;e.exit=function(){if(t){t.apply(this,arguments);}y.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var H=q.extend(true,{},p);delete H.componentHandle;H.appId=x;H.usageIcon=F;H.usageTitle=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",H);L.info("app was closed");},0);var P=y._publicEventDataFromResolutionResult(p);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(e){var p={};if(!e){return e;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(P){p[P]=e[P];});Object.freeze(p);return p;};this.getInMemoryInstance=function(e,F,p,O){var t="application-"+e,x=S.get(t),y="",N=false,z;if(x){if(O!==null&&O!==undefined&&O!==""){y=O.toLowerCase();N=y.indexOf("shell-home")>=0||y.indexOf("launchpad-openflppage")>=0||y.indexOf("shell-appfinder")>=0;}z=(N&&(typeof p==="string"&&p.length>0));if(x.shellHash===F&&!z){return{isInstanceSupported:true,appId:x.appId,container:x.container};}return{isInstanceSupported:false,appId:x.appId,container:x.container};}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleOpenStateful=function(e,p,t,x,T,F,y){var H=B.getHandler();x.setProperty("iframeReusedForApp",true,true);if(S.get(t)&&e===false){this.reuseStateFulContainerAndRestore(x,t,H,F,T);}else{this.reuseStateFulContainer(x,T.url,t,H,F,T);if(p){if(!this.isAppInCache(t)){this.storeApp(t,x,T,F,y);}}}};this.leave=function(e,p){var t=B.isStatefulContainerSupported(e);var x=S.get(p);if(x){R.store(x.service);}if(t){return this.handleExitStateful(p,e);}return Promise.resolve();};this.open=function(e,p,t,T,W,F,M){var x=this,y,z=(this.getWebGuiV1StatefulContainer(T.url)!==undefined),H,J=h.indexOf(T.applicationType)>=0,N="application-"+e,O,P,Q,V=false,X,Y,Z,$=new q.Deferred(),_,a1={globalValue:undefined,paramValue:undefined};P=this.isAppOfTypeCached(N,J,a1)||this.isCachedEnabledAsAppParameter(t,T,a1);Q=this.calculateAppType(T);X=f.getDefaultFullWidthSetting(Q);y=B.getStateFul(T.url);H=B.isStatefulContainerSupported(y);if(!H){if(o&&N!==o.appId){y=undefined;}O=S.get("application"+p);if(O){y=O.container;if(!H&&P&&y!==undefined){Y=true;}}}var b1,c1;b1=T.appCapabilities&&T.appCapabilities.fullWidth;if(X===true){if(T.fullWidth===false||T.fullWidth==="false"||M.fullWidth===false||M.fullWidth==="false"||b1===false){c1=false;}}else if(T.fullWidth===true||T.fullWidth==="true"||M.fullWidth===true||M.fullWidth==="true"){c1=true;}if(c1===undefined){c1=X;}if(H){if(!y){y=W(e,M,t,T,p,c1,F);this.restoreApp(y.getId());this.navTo(y.getId());V=true;}}else if(!z&&y&&!P){Z=new q.Deferred();this.destroy(y.getId(),y,Z);Z.then(function(){y=W(e,M,t,T,p,c1,F);});}else if(!y){y=W(e,M,t,T,p,c1,F);}if(Z===undefined){Z=new q.Deferred().resolve();}if(y&&y.getDeffedControlCreation){_=y.getDeffedControlCreation();}else{_=Promise.resolve();}Z.then(function(){_.then(function(){if(!z&&!H){if(Y===true){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);}x.restoreApp(y.getId());x.navTo(y.getId());if(Y===true){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);}}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");x.activeContainer(y);if(H){x.handleOpenStateful(V,P,"application"+p,y,T,F,a1);}else if(z){x.reuseApplicationContainer(y,"TR",T.url);}$.resolve();});});return $.promise();};this.handleControl=function(e,p,t,T,W,F){var x=this,M=d.getMetadata(T),y=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined,z=sap.ui.getCore().byId(y);var P=x.leave(z,y).then(function(){x.open(e,p,t,T,W,F,M);},function(H){L.error(H&&H.message||H);});return P;};this.switchViewState=function(e,p,t){var x=e,y;if(k[e]&&k[e][i]){x=k[e][i];}var z=C.last("/core/shell/model/currentState/stateName")==="home";if(!z&&(!o.appId||!S.get(o.appId))){E.destroyManageQueue();}y=S.get("application"+t);if(y){b.restore(y);}else{b.assignNew(e);}E.switchState(x,p,t);this.shellElements().setDangling(false);this.shellElements().processDangling();if(e==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var F=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+F.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(F.getProperty("/uiFilter/dataSource").getJson()));}}};this.registerShellCommunicationHandler=function(e){A.registerShellCommunicationHandler(e);};this.registerIframeCommunicationHandler=function(H,t){l[t]=H;};this.postMessageToIframeApp=function(e,p,M,W){function t(J){if(e==="sap.ushell.sessionHandler"&&p==="logout"){if(J&&J.getApplicationType&&",WCF,GUI,TR,WDA,".indexOf(J.getApplicationType())>0){return false;}}return true;}var x,y=A.getActiveAppContainer(),z=false,F=[];if(B.hasIFrame(y)&&(B.isCapabilitySupported(y,e,p)||A.isAppTypeSupported(y,e,p))&&t(y)===true){F.push(A.postMessageToIframeApp(y,e,p,M,W));z=true;}if(!A.isActiveOnly(e,p)){B.forEach(function(O){if(z===true&&O===y){return;}if(B.hasIFrame(O)){if((B.isCapabilitySupported(O,e,p)||A.isAppTypeSupported(O,e,p))&&t(O)===true){F.push(A.postMessageToIframeApp(O,e,p,M,W));}}});}x=A.getResponseHandler(e,p);var H=Promise.all(F);if(x){x(H);}return H;};this.postMessageToIframeAppAccordingToPolicy=function(e,p,M,W,P){var t,x=A.getActiveAppContainer(),y=[];if(B.hasIFrame(x)&&A.isAppTypeSupportedByPolicy(x,P)){y.push(A.postMessageToIframeApp(x,e,p,M,W));}if(!P.isActiveOnly){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,e,p)||A.isAppTypeSupported(O,e,p)){y.push(A.postMessageToIframeApp(O,e,p,M,W));}}});}t=A.getResponseHandler(e,p);var z=Promise.all(y);if(t){t(z);}return z;};this.setBackNavigationChanged=function(e){m=e;};this.getBackNavigationChanged=function(){return m;};this.parseStatefulContainerConfiguration=function(){w={};};this.getWebGuiV1StatefulContainer=function(e){var p;if(e){p=B._getBlueBoxCacheKey(e);return w[p];}else{return undefined;}};this.setWebGuiV1StatefulContainer=function(e){var p=e.getUrl(),t;if(p){t=B._getBlueBoxCacheKey(p);w[t]=e;}};this.getWebGuiV1AllApplicationContainers=function(){return Object.keys(w).map(function(e){return w[e];}).filter(function(e){return!!e;});};}return new g();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";function S(){var c,e;function L(l){this.size=0;if(typeof l=="number"){this.limit=l;}else{this.limit=10;}this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else if(this.size>=this.limit){var E=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(E);}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};this.forEach=function(a){c.forEach(a);};this.length=function(){return c.size;};}return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/library","sap/base/Log","sap/base/util/ObjectPath"],function(A,P,u,q,U,a,L,O){"use strict";var o,B,b=A.getMetadata().getJSONKeys(),c=a.UI5ComponentType;function d(){var t=this;this.handleMessageEvent=function(C,m,M){var f=m.data;if(typeof f==="string"){try{f=JSON.parse(m.data);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,f,"sap.ushell.components.container.ApplicationContainer");return;}}if(f.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!A.prototype._isTrustedPostMessageSource(C,m)){L.warning("Received message from untrusted origin: "+m.origin,f,"sap.ushell.components.container.ApplicationContainer");return;}L.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+f.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(C.globalDirtyStorageKey,f.parameters.globalDirty,true);}else{t.handleServiceMessageEvent(C,m,f,M);}};this.handleServiceMessageEvent=function(C,m,M,f){var p=O.get("sap-ushell-config.services.PostMessage.config")||O.create("sap-ushell-config.services.PostMessage.config"),s=M&&M.service,S,g,h,i,I=false,j=P.getAPIs(),k;L.debug("Received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,"sap.ushell.components.container.ApplicationContainer");if(M.type!=="request"||!s){return;}for(var E in j){if(j.hasOwnProperty(E)){if(s.indexOf(E)!==-1){g=j[E];h=E;I=true;break;}}}if(I===false){f.bApiRegistered=false;return;}k=(s.indexOf("user.postapi.")===0);S=s.split(".")[3];if(p&&p.enabled===false){L.warning("Received message for "+S+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!A.prototype._isTrustedPostMessageSource(C,m)){L.warning("Received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function l(e,k){var y;if(k===true){y={oMessage:m,oMessageData:M};}else{y={matchesLocalSid:x,getLocalSystemInSidForma:w,storeSapSystemData:v,executeSetBackNavigationService:r,sendResponseMessage:n,oMessage:m,oMessageData:M,oContainer:C};}try{e(y).done(function(R){n("success",{result:R});}).fail(function(D){n("error",{message:D});});}catch(z){n("error",{message:z.message});}}function n(e,y){var R=JSON.stringify({type:"response",service:M.service,request_id:M.request_id,status:e,body:y});L.debug("Sending post message response to origin ' "+m.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}m.source.postMessage(R,m.origin);}function r(m,M){var D=new q.Deferred(),e;if(M.body&&M.body.callbackMessage&&M.body.callbackMessage.service){e=A.prototype._backButtonPressedCallback.bind(null,m.source,M.body.callbackMessage.service,m.origin);}D.resolve(C.getShellUIService().setBackNavigation(e));return D.promise();}function v(y,z){var K,D,F,G=[y.id];if(arguments.length>1){G.unshift(z);}try{F=JSON.stringify(y);}catch(e){L.error("Cannot stringify and store expanded system data: "+e);}if(F){D=u.getLocalStorage();K=u.generateLocalStorageKey("sap-system-data",G);D.setItem(K,F);}}function w(){var e=sap.ushell.Container.getLogonSystem();var y=e.getName();var z=e.getClient();return"sid("+y+"."+z+")";}function x(e){return w().toLowerCase()===e.toLowerCase();}i=g.oServiceCalls[M.service.replace(h+".","")];if(i&&i.executeServiceCallFn){l(i.executeServiceCallFn,k);}else{n("error",{message:"Unknown service name: '"+M.service+"'"});}};this.init=function(i){B=i;};this.restoreArray=function(e){var f=[],i=0;while(e[i]){f.push(e[i]);i++;}return f;};this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){L.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}p=new Promise(function(e,f){var g;g=function(){L.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(g);};r=sap.ushell.Container.getRenderer();if(r){L.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(g);}});return[p];};this.createComponent=function(r,p){var t=this,D=new q.Deferred();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){e.createComponent(r,p,t._createWaitForRendererCreatedPromise(),c.Application).then(D.resolve,D.reject);});return D.promise();};this.stripURL=function(s){var n=s.indexOf("?"),e=s.indexOf("#"),f;if(n>=0){f=s.substr(0,n);}else if(e>=0){f=s.substr(0,e);}else{f=s;}return f;};this.createApplicationContainer=function(s,r){var T={};this._cleanTargetResolution(r,T);o=new A("application"+s,r);this._restoreTargetResolution(r,T);if(r.appCapabilities){o.setProperty("frameworkId",r.appCapabilities.appFrameworkId,true);}o.setHandleMessageEvent(this.handleMessageEvent);B.setAppCapabilities(o,r);return o;};this.active=function(e){if(e){if(e.active){e.active();}}};this.restore=function(e){var D;if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveActivate",e.appTarget);if(e.app.getUrl){D=e.app.getUrl();o=B.get(this.stripURL(D));if(o){B.restoreApp(o.sApplication);}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.activate();}else{if(e.app.restore){e.app.restore();}if(e.app.getRouter&&e.app.getRouter()&&e.app.getRouter().initialize){e.app.getRouter().initialize();}if(e.app.setInitialConfiguration){e.app.setInitialConfiguration();}}o=e.app;}};this.store=function(e){var D;if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveDeactivate",e.appTarget);if(e.app.getUrl){D=e.app.getUrl();o=B.get(this.stripURL(D));if(o){B.storeApp(o.sApplication);}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.deactivate();}else{if(e.app.suspend){e.app.suspend();}if(e.app.getRouter&&e.app.getRouter()){e.app.getRouter().stop();}}}};this.destroy=function(e){var D,o,f=false;if(e){if(e.getUrl){D=e.getUrl();o=B.get(this.stripURL(D));if(B.isStatefulContainerSupported(o)){f=true;B.destroyApp(o.sApplication);}}if(e.destroy&&f===false){e.destroy();}}};this.setActiveAppContainer=function(C){o=C;};this.getActiveAppContainer=function(){return o;};}d.prototype._cleanTargetResolution=function(r,t){var k;if(r){for(k in r){if(b[k]===undefined){t[k]=r[k];delete r[k];}}}};d.prototype._restoreTargetResolution=function(r,t){var k;if(r){for(k in t){r[k]=t[k];}}};d.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};d.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};d.prototype.isAppTypeSupported=function(C,s,i){var e=P._getPostMesageInterface(s,i);return this.isAppTypeSupportedByPolicy(C,e);};d.prototype.isAppTypeSupportedByPolicy=function(C,p){if(C&&C.getAdditionalInformation&&C.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false;}var e=p;if(!e||!e.distributionType){return false;}if(e.distributionType.indexOf("all")>=0){return true;}if(e.distributionType.indexOf("URL")>=0){return false;}if(C.getApplicationType&&e.distributionType.indexOf(C.getApplicationType())>=0){return true;}return false;};d.prototype.postMessageToIframeApp=function(C,s,i,m,w){var S=s+"."+i,M=this.createPostMessageRequest(S,m);return this.postMessageToIframe(M,C,w);};d.prototype.createPostMessageRequest=function(s,m){var r=Date.now().toString();return{"type":"request","request_id":r,"service":s,"body":m};};d.prototype.postMessageToIframe=function(m,C,w){var r=m.request_id,i=C._getIFrame();return new Promise(function(n,N){function p(E){var g;try{g=JSON.parse(E.data);if(r!==g.request_id){return;}if(g.status==="success"){n(g);}else{N(g);}window.removeEventListener("message",p);}catch(e){n();L.warning("Obtained bad response from framework in response to message "+m.request_id);L.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}var M=JSON.stringify(m);L.debug("Sending postMessage "+M+" to application container '"+C.getId()+"'");var f,t;if(!i){n();}else if(w){window.addEventListener("message",p,false);f=new U(C._getIFrameUrl(i));t=f.protocol()+"://"+f.host();i.contentWindow.postMessage(M,t);}else{f=new U(C._getIFrameUrl(i));t=f.protocol()+"://"+f.host();i.contentWindow.postMessage(M,t);n();}});};d.prototype.registerShellCommunicationHandler=function(C){P.registerShellCommunicationHandler(C);};d.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};return new d();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxHandler',["sap/ushell/components/applicationIntegration/application/BlueBoxesCache","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/UriParameters","sap/base/security/encodeXML"],function(B,A,a,U,q,L,b,e){"use strict";function c(){var t=this,d,C={"isStateful":{handler:function(i,j){if(i&&(i.enabled===true||i===true)){return true;}return false;}},"isGUI":{handler:function(i,j){if(i&&i.protocol==="GUI"){return true;}return false;}},"isGUIStateful":{handler:function(i,j){return t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}},"isFLP":{handler:function(i,j){return!t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}}},o={},s={},h={setup:function(T,S){},create:function(i,u,S,T){var D=new q.Deferred(),F,p;function j(){if(F){F["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);F["system-alias"]=i.getSystemAlias();p["sap-flp-params"]=F;}o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",p,true).then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);D.resolve();});}u=a.prototype._checkNwbcUrlAdjustment(i,T.applicationType,u);u=a.prototype._adjustURLForIsolationOpeningWithoutURLTemplate(u);p={sCacheId:S,sUrl:u,sHash:window.hasher.getHash()};if(u.indexOf("sap-iframe-hint=GUI")>0||u.indexOf("sap-iframe-hint=WDA")>0){var I=[];var k=a.prototype._getParamKeys(u,I);if(k.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(l){l.getAppStateData(k).then(function(m){F={};I.forEach(function(n,r){if(m[r][0]){F[n]=m[r][0];}});j();},function(){j();});});}else{F={};j();}}else{j();}return D.promise();},destroy:function(i,S){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:S},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},store:function(i,S){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:S},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},restore:function(i,S,T){var p;o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:S,sUrl:T.url,sHash:window.hasher.getHash()},true);p.then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);});return p;}},f=[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}],g={APP_OPENED:"app_opened",APP_CLOSED:"app_closed"};this.init=function(S,i,j){B.init();A.init(this);d=j;if(i){s=q.extend(true,s,i.supportedTypes);}};this.isStatefulContainerSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","destroy");return I;};this.isKeepAliveSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","restore");return I;};this.mapCapabilities=function(i,j){this.setCapabilities(i,j);};this.getCapabilities=function(i){return o[i].oCapMap;};this.isCapabilitySupported=function(i,S,I){if(o[i]&&o[i].oCapMap&&o[i].oCapMap[S]){return!!o[i].oCapMap[S][I];}return false;};this.setCapabilities=function(i,j){var k;if(!o[i]){this.InitBlueBoxBD(i);}if(!o[i].oCapMap){o[i].oCapMap={};}k=o[i].oCapMap;Object.keys(j).forEach(function(l){var m=j[l],n;if(!k[m.service]){k[m.service]={};}n=k[m.service];n[m.action]=true;});if(!i.getIsStateful()&&this.isStatefulContainerSupported(i)){i.setIsStateful(true);}};this.removeCapabilities=function(i){if(o[i]){o[i].oCapMap={};i.setIsStateful(false);}};this.hasIFrame=function(i){if(i&&i._getIFrame){return true;}return false;};this.getStorageKey=function(i){return o[i].sStorageKey;};this.InitBlueBoxBD=function(i){o[i]={BlueBox:i,lastAction:undefined};};this.setAppCapabilities=function(i,T){if(!o[i]){this.InitBlueBoxBD(i);}o[i].currentAppTarget=T;o[i].appCapabilities=T.appCapabilities;if(T.appCapabilities&&T.appCapabilities.statefulContainer===true){this.setCapabilities(i,f);}};this.forEach=function(i){var k;for(k in o){if(o.hasOwnProperty(k)){i(o[k].BlueBox);}}};this.isCapByTarget=function(T,i){if(T.appCapabilities===undefined){return false;}if(C[i]&&T&&T.appCapabilities){return C[i].handler(T.appCapabilities);}return T.appCapabilities[i]||false;};this.isCapUT=function(i,j){var k=o[i];if(k===undefined||k.appCapabilities===undefined){return false;}if(C[j]&&k){return C[j].handler(k.appCapabilities,i);}return k.appCapabilities[j]||false;};this.setStorageKey=function(i,j){if(!o[i]){this.InitBlueBoxBD(i);}o[i].sStorageKey=j;};this.getStorageKey=function(i){if(!o[i]){return undefined;}return o[i].sStorageKey;};this.getHandler=function(){return h;};this._getBlueBoxCacheKey=function(u){return B.getBlueBoxCacheKey(u);};this.deleteStateFul=function(u){var i=this._getBlueBoxCacheKey(u);return this.delete(i);};this.getStateFul=function(u){return B.get(u);};this.destroyApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:i});};this.openApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:i,sHash:window.hasher.getHash()});};this.storeApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:i,sHash:window.hasher.getHash()});};this.restoreApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:i,sHash:window.hasher.getHash()});};this.delete=function(u){B.remove(u);};this.get=function(u){return B.get(u);};this.getById=function(i){return B.getById(i);};this.set=function(u,i){B.add(u,i);};}return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxesCache',["sap/ui/thirdparty/URI","sap/base/Log"],function(U,L){"use strict";var c={};function i(){c={};}function g(){return Object.keys(c).length;}function a(u,I){var k=e(u);c[k]=I;}function r(u){var k=e(u);if(c[k]){delete c[k];}}function b(u){if(u===undefined||g()===0){return undefined;}var k=e(u);return(k!==undefined?c[k]:undefined);}function d(I){for(var k in c){if(c.hasOwnProperty(k)){var E=c[k];if(E.sId===I){return E;}}}return undefined;}function e(u){var o,O,p,I="",s="",k="",B;if(u===undefined||u===""||u==="../"){return u;}try{o=new U(u);if(u.charAt(0)==="/"){O=window.location.origin;}else{O=o.origin();}if(O===undefined||O===""){O=o.path();if(O===undefined||O===""){O=u;}}p=o.query(true);if(p["sap-iframe-hint"]){I="@"+p["sap-iframe-hint"];}if(p["sap-ui-version"]){s="@"+p["sap-ui-version"];}if((I==="@GUI"||I==="@WDA"||I==="@WCF")&&p["sap-keep-alive"]){k="@"+p["sap-keep-alive"]+"-"+u.split("#")[0];}}catch(f){L.error("URL '"+u+"' can not be parsed: "+f,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");O=u;}B=O+I+s+k;return B;}return{init:i,getSize:g,add:a,remove:r,get:b,getById:d,getBlueBoxCacheKey:e};},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPI',["sap/ushell/utils","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ui/thirdparty/URI","sap/base/util/deepExtend","sap/ushell/Config","sap/ushell/utils/UrlParsing"],function(u,c,q,L,U,A,E,P,a,d,C,b){"use strict";var S="sap.ushell.";var D=new U();var o={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{hrefForExternal:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.hrefForExternalAsync(e.oMessageData.body.oArgs,undefined,true).then(i.resolve,i.reject);});return i.promise();}},getSemanticObjectLinks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents).then(i.resolve,i.reject);});return i.promise();}},isIntentSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.isIntentSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}},isNavigationSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.isNavigationSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}},backToPreviousApp:{executeServiceCallFn:function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.backToPreviousApp();});return new q.Deferred().resolve().promise();}},historyBack:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.historyBack(e.oMessageData.body.iSteps);});return new q.Deferred().resolve().promise();}},getAppStateData:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getAppStateData(e.oMessageData.body.sAppStateKey).then(i.resolve,i.reject);});return i.promise();}},toExternal:{executeServiceCallFn:function(e){var i=new q.Deferred(),j=d({},e.oMessageData.body.oArgs);u.storeSapSystemToLocalStorage(j);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(k){k.toExternal(j).then(i.resolve,i.reject);});return i.promise();}},registerBeforeAppCloseEvent:{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return new q.Deferred().resolve().promise();}},expandCompactHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.expandCompactHash(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.getDistinctSemanticObjects().then(e.resolve,e.reject);});return e.promise();}},getLinks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getLinks(e.oMessageData.body).then(i.resolve,i.reject);});return i.promise();}},getPrimaryIntent:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters).then(i.resolve,i.reject);});return i.promise();}},hrefForAppSpecificHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.hrefForAppSpecificHashAsync(e.oMessageData.body.sAppHash).then(i.resolve,i.reject);});return i.promise();}},isInitialNavigation:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.isInitialNavigationAsync().then(function(I){e.resolve(I);});});return e.promise();}},getAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getAppState(D,e.oMessageData.body.sAppStateKey).done(function(k){delete k._oServiceInstance;i.resolve(k);});});return i.promise();}},setInnerAppRoute:{executeServiceCallFn:function(e){var H=b.parseShellHash(window.hasher.getHash()),n;if(H.appSpecificRoute===e.oMessageData.body.appSpecificRoute){return new q.Deferred().resolve().promise();}H.appSpecificRoute=e.oMessageData.body.appSpecificRoute;n="#"+b.constructShellHash(H);window.hasher.changed.active=false;window.hasher.replaceHash(n);window.hasher.changed.active=true;return new q.Deferred().resolve().promise();}},setInnerAppStateData:{executeServiceCallFn:function(e){var i=new q.Deferred();f.prototype._createNewInnerAppState(e).then(i.resolve);return i.promise();}},resolveIntent:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.resolveIntent(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},setBackNavigation:{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},setHierarchy:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise();}},setRelatedApps:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise();}},setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},showShellUIBlocker:{executeServiceCallFn:function(e){s(e.oMessageData.body.bShow);return new q.Deferred().resolve().promise();}},getFLPUrl:{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},getShellGroupIDs:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getShellGroupIDs((e.oMessageData.body?e.oMessageData.body.bGetAll:undefined)).then(i.resolve,i.reject);});return i.promise();}},addBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},addBookmarkDialog:{executeServiceCallFn:function(e){sap.ui["require"](["sap/ushell/ui/footerbar/AddBookmarkButton"],function(i){var j=new i();j.firePress({});});return new q.Deferred().resolve().promise();}},getShellGroupTiles:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getTilesByGroupId(e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},sendUrlAsEmail:{executeServiceCallFn:function(e){var i=C.last("/core/shellHeader/application").title;var j=(i===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+i+"'";f.prototype._sendEmail("",j,document.URL,"","",document.URL,true);return new q.Deferred().resolve().promise();}},sendEmailWithFLPButton:{executeServiceCallFn:function(e){var i=C.last("/core/shellHeader/application").title;var j=(i===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+i+"'";f.prototype._sendEmail("",j,document.URL,"","",document.URL,e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},sendEmail:{executeServiceCallFn:function(e){f.prototype._sendEmail(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},processHotKey:{executeServiceCallFn:function(e){var i;try{i=new KeyboardEvent("keydown",e.oMessageData.body);}catch(j){var I=document.createEvent("KeyboardEvent"),k="";if(e.oMessageData.body.altKey){k+="Alt ";}if(e.oMessageData.body.ctrlKey){k+="Control ";}if(e.oMessageData.body.shiftKey){k+="Shift ";}I.initKeyboardEvent("keydown",false,false,null,e.oMessageData.body.key,e.oMessageData.body.keyCode,k,0,false);i=I;}document.dispatchEvent(i);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.Container":{oServiceCalls:{setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},getFLPUrl:{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},getFLPConfig:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getFLPConfig().then(function(F){i.resolve(F);});return i.promise();}},getFLPPlatform:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getFLPPlatform().then(i.resolve);return i.promise();}}}},"sap.ushell.services.AppState":{oServiceCalls:{getAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.getAppState(e.oMessageData.body.sKey).done(function(k){delete k._oServiceInstance;i.resolve(k);}).fail(function(k){delete k._oServiceInstance;i.resolve(k);});});return i.promise();}},_saveAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(i.resolve,i.reject);});return i.promise();}},_loadAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j._loadAppState(e.oMessageData.body.sKey).then(i.resolve,i.reject);});return i.promise();}},deleteAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.deleteAppState(e.oMessageData.body.sKey).then(i.resolve,i.reject);});return i.promise();}},makeStatePersistent:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(i.resolve,i.reject);});return i.promise();}}},"sap.ushell.services.Bookmark":{oServiceCalls:{addBookmarkUI5:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){f.prototype._stripBookmarkServiceUrlForLocalContentProvider(e.oMessageData.body.oParameters,k);sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.vContainer,k.id).then(i.resolve,i.reject);});});});return i.promise();}},addBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},getShellGroupIDs:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getShellGroupIDs().then(e.resolve,e.reject);});return e.promise();}},addCatalogTileToGroup:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData).then(i.resolve,i.reject);});return i.promise();}},countBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.countBookmarks(e.oMessageData.body.sUrl,k.id).then(i.resolve,i.reject);});});});return i.promise();}},deleteBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.deleteBookmarks(e.oMessageData.body.sUrl,k.id).then(i.resolve,i.reject);});});});return i.promise();}},updateBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters,k.id).then(i.resolve,i.reject);});});});return i.promise();}},getContentNodes:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getContentNodes().then(e.resolve,e.reject);});return e.promise();}},addCustomBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addCustomBookmark(e.oMessageData.body.sVizType,e.oMessageData.body.oConfig,e.oMessageData.body.vContentNodes,k.id).then(i.resolve,i.reject);});});});return i.promise();}},countCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.countCustomBookmarks(e.oMessageData.body.oIdentifier).then(i.resolve,i.reject);});});});return i.promise();}},updateCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.updateCustomBookmarks(e.oMessageData.body.oIdentifier,e.oMessageData.body.oConfig).then(i.resolve,i.reject);});});});return i.promise();}},deleteCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.deleteCustomBookmarks(e.oMessageData.body.oIdentifier).then(i.resolve,i.reject);});});});return i.promise();}},addBookmarkToPage:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkToPage(e.oMessageData.body.oParameters,e.oMessageData.body.sPageId,k.id).then(i.resolve,i.reject);});});});return i.promise();}}}},"sap.ushell.services.AppLifeCycle":{oServiceCalls:{getFullyQualifiedXhrUrl:{executeServiceCallFn:function(e){var r="",x="",i=new q.Deferred(),p=e.oMessageData.body.path;if(p!==""&&p!==undefined&&p!==null){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){x=k.getFullyQualifiedXhrUrl(p);var H="",l="",m="",F=sap.ushell.Container.getFLPUrl(true),n=new a(F);if(n.protocol()!==null&&n.protocol()!==undefined&&n.protocol()!==""){l=n.protocol()+"://";}if(n.hostname()!==null&&n.hostname()!==undefined&&n.hostname()!==""){H=n.hostname();}if(n.port()!==null&&n.port()!==undefined&&n.port()!==""){m=":"+n.port();}r=l+H+m+x;i.resolve(r);});});}return i.promise();}},getSystemAlias:{executeServiceCallFn:function(e){var i=e.oContainer.getSystemAlias();if(i===null||i===undefined){i="";}return new q.Deferred().resolve(i).promise();}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{setApplicationFullWidth:{executeServiceCallFn:function(e){A.setApplicationFullWidth(e.oMessageData.body.bValue);return new q.Deferred().resolve().promise();}}}},"sap.ushell.appRuntime":{oRequestCalls:{innerAppRouteChange:{isActiveOnly:true,distributionType:["all"]},hashChange:{isActiveOnly:true,distributionType:["URL"]},setDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},getDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},themeChange:{isActiveOnly:false,distributionType:["all"]},uiDensityChange:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{hashChange:{executeServiceCallFn:function(e){var i=new q.Deferred();window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(e.oMessageData.body.newHash);window.hasher.disableBlueBoxHashChangeTrigger=false;var j=e.oMessageData.body.direction;if(j){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.hashChanger.fireEvent("hashReplaced",{hash:k.hashChanger.getHash(),direction:j});L.debug("PostMessageAPI.hashChange :: Informed by the Iframe, to change the "+"History direction property in FLP to: "+j);i.resolve();});}else{i.resolve();}return i.promise();}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{getThemeList:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.getThemeList().then(i.resolve,i.reject);});return i.promise();}},getLanguageList:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.getLanguageList().then(i.resolve,i.reject);});return i.promise();}},updateUserPreferences:{executeServiceCallFn:function(e){var i=new q.Deferred();if(e.oMessageData.body.language){sap.ushell.Container.getUser().setLanguage(e.oMessageData.body.language);sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.updateUserPreferences().then(function(){sap.ushell.Container.getUser().resetChangedProperty("language");i.resolve();},i.reject);});}else{i.resolve();}return i.promise();}},openThemeManager:{executeServiceCallFn:function(e){E.emit("openThemeManager",Date.now());return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{toExternal:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(i){i.toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory);});return new q.Deferred().resolve().promise();}},toAppHash:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(i){i.toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory);});return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.getDistinctSemanticObjects().then(e.resolve,e.reject);});return e.promise();}},expandCompactHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.expandCompactHash(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},resolveHashFragment:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.resolveHashFragment(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},isNavigationSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.isNavigationSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}}}},"sap.ushell.services.Renderer":{oServiceCalls:{addHeaderItem:{executeServiceCallFn:function(e){h("addHeaderItem",e);return new q.Deferred().resolve().promise();}},addHeaderEndItem:{executeServiceCallFn:function(e){h("addHeaderEndItem",e);return new q.Deferred().resolve().promise();}},showHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},showHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},setHeaderTitle:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return new q.Deferred().resolve().promise();}},setHeaderVisibility:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},createShellHeadItem:{executeServiceCallFn:function(e){var p=e.oMessageData.body.params;p.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:p.id});};new sap.ushell.ui.shell.ShellHeadItem(p);return new q.Deferred().resolve().promise();}},showActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},addUserAction:{executeServiceCallFn:function(e){e.oMessageData.body.oParameters.oControlProperties.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.oParameters.oControlProperties.id});};sap.ushell.Container.getRenderer("fiori2").addUserAction(e.oMessageData.body.oParameters);return new q.Deferred().resolve().promise();}},addOptionsActionSheetButton:{executeServiceCallFn:function(e){var B=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];B.forEach(function(i){if(sap.ui.getCore().byId(i.id)){sap.ui.getCore().byId(i.id).destroy();}new sap.m.Button({id:i.id,text:i.text,icon:i.icon,tooltip:i.tooltip,press:function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:i.id});}});sap.ushell.Container.getRenderer("fiori2").showActionButton([i.id],true,i.aStates);});return new q.Deferred().resolve().promise();}},removeOptionsActionSheetButton:{executeServiceCallFn:function(e){var B=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];B.forEach(function(i){sap.ushell.Container.getRenderer("fiori2").hideActionButton(i.id,true,i.aStates);if(sap.ui.getCore().byId(i.id)){sap.ui.getCore().byId(i.id).destroy();}});return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{getGroupsForBookmarks:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getGroupsForBookmarks().then(e.resolve,e.reject);});return e.promise();}}}},"sap.ushell.services.Menu":{oServiceCalls:{getSpacesPagesHierarchy:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Menu").then(function(M){M.getSpacesPagesHierarchy().then(function(i){e.resolve(i);});});return e.promise();}}}},"sap.ushell.services.CommonDataModel":{oServiceCalls:{getAllPages:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(i){i.getAllPages().then(function(p){e.resolve(p);});});return e.promise();}}}}};function f(){this._getBrowserURL=function(){return document.URL;};Object.keys(o).forEach(function(k){if(k.indexOf(S)!==0){throw new Error("All Post Message APIs must start with '"+S+"' - "+k);}});P.init(true,f.prototype.registerShellCommunicationHandler.bind(this));}f.prototype.getAPIs=function(){return o;};function g(k,e){var i=o[k],n;if(i){if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(j){i.oServiceCalls[j]=e.oServiceCalls[j];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(j){i.oRequestCalls[j]=e.oRequestCalls[j];});}return;}n={oRequestCalls:{},oServiceCalls:{}};if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(j){n.oServiceCalls[j]=e.oServiceCalls[j];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(j){n.oRequestCalls[j]=e.oRequestCalls[j];});}o[k]=n;}f.prototype._getPostMesageInterface=function(e,i){var j,k=this.getAPIs();if(k[e]){j=k[e];if(j&&j.oRequestCalls&&j.oRequestCalls[i]){return j.oRequestCalls[i];}}return undefined;};f.prototype.registerShellCommunicationHandler=function(e){Object.keys(e).forEach(function(k){g(k,e[k]);});};f.prototype.isActiveOnly=function(e,i){var j=this._getPostMesageInterface(e,i);if(j){return j.isActiveOnly;}return undefined;};f.prototype.getResponseHandler=function(e,i){var j=this._getPostMesageInterface(e,i);if(j){return j.fnResponseHandler;}return undefined;};f.prototype._createNewInnerAppState=function(i){return new Promise(function(r){var n,H,j,N,v;sap.ushell.Container.getServiceAsync("AppState").then(function(k){n=k.createEmptyAppState(undefined,false);if(i.oMessageData.body.sData!==undefined){try{v=JSON.parse(i.oMessageData.body.sData);}catch(e){v=i.oMessageData.body.sData;}}else{v="";}n.setData(v);n.save();N=n.getKey();H=window.hasher.getHash();if(H.indexOf("&/")>0){if(H.indexOf("sap-iapp-state=")>0){j=/(?:sap-iapp-state=)([^&/]+)/.exec(H)[1];H=H.replace(j,N);}else{H=H+"/sap-iapp-state="+N;}}else{H=H+"&/sap-iapp-state="+N;}window.hasher.changed.active=false;window.hasher.replaceHash(H);window.hasher.changed.active=true;r(N);});});};function s(e){if(e===true){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(true);var H=q("#shell-header-blockedLayer");H.addClass("sapUshellShellBlocked");}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(true);var m=q("#menuBar-blockedLayer");m.addClass("sapUshellMenuBarBlocked");}}else if(e===false){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(false);}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(false);}}}function h(e,i){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:i.oMessageData.body.sId,tooltip:i.oMessageData.body.sTooltip,icon:i.oMessageData.body.sIcon,press:function(){i.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:i.oMessageData.body.sId});}},i.oMessageData.body.bVisible,i.oMessageData.body.bCurrentState||true,i.oMessageData.body.aStates);}f.prototype._sendEmail=function(t,e,B,i,j,I,k){var F=(this._getBrowserURL&&this._getBrowserURL())||document.URL;function r(l,m){if(l&&l.length>0&&((e&&e.includes(l))||(B&&B.includes(l)))){if(B&&B.includes(l)){B=B.replace(l,m);}if(e&&e.includes(l)){e=e.replace(l,m);}}}if(k){sap.ushell.Container.getServiceAsync("AppState").then(function(l){l.setAppStateToPublic(I).done(function(n,x,m,X,p){if(X!==undefined){F=F.replace(x,X);}if(p!==undefined){F=F.replace(m,p);}r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,i,j);}).fail(L.error);});}else{r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,i,j);}};f.prototype._stripBookmarkServiceUrlForLocalContentProvider=function(p,e){if(!p||!p.serviceUrl||!e){return;}if(e.id===""||e.id==="saas_approuter"){p.serviceUrl=undefined;L.warning("Dynamic data bookmarks tiles are not supported for local content providers",null,"sap/ushell/components/applicationIntegration/application/PostMessageAPI");}};return new f();});
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface',["sap/ui/thirdparty/jquery"],function(q){"use strict";var U="user.postapi.";function P(){var _,a;this.init=function(i,D){_=i;a=D;};this.getInterface=function(){var i={};i.registerPostMessageAPIs=r.bind(null,a);i[(_===true?"postMessageToApp":"postMessageToFlp")]=d.bind(null,_);i.createPostMessageResult=c;return i;};}function r(D,p){var R={status:"success",desc:""};var o={isActiveOnly:true,distributionType:["all"],fnResponseHandler:function(){}};if(p===undefined||Object.keys(p).length<=0){R.status="error";R.desc="no handler was found to register";return R;}Object.keys(p).forEach(function(s){if(typeof s!=="string"){R.status="error";R.desc="oPostMessageAPIs should contain only string keys";}else if(s.indexOf(U)!==0){R.status="error";R.desc="all user custom Message APIs must start with '"+U+"'";}else{Object.keys(p[s]).forEach(function(t){if(t=="inCalls"){p[s].oServiceCalls=p[s][t];delete p[s][t];}else if(t=="outCalls"){Object.keys(p[s][t]).forEach(function(m){p[s][t][m]=q.extend(true,{},o,p[s][t][m]);});p[s].oRequestCalls=p[s][t];delete p[s][t];}else{R.status="error";R.desc="api should contain either 'inCalls' or 'outCalls'";}});}});if(R.status==="success"){D(p);}return R;}function d(i,s,I,p){var D=new q.Deferred();if(p===undefined){p={};}if(i){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){A.postMessageToIframeApp(s,I,p,true).then(function(R){D.resolve(R&&R[0]&&R[0].body.result);});});}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){A.sendMessageToOuterShell(s+"."+I,p).done(function(R){D.resolve(R);});});}return D.promise();}function c(R){if(R===undefined){R={};}return new q.Deferred().resolve(R).promise();}return new P();});
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(A,E,D,C,u,r,a,R,q,M,b){"use strict";function c(){var i,t=this,d,s,e;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return e;};this.getHierarchyDefaultValue=function(){var h=[];var f=C.last("/core/shell/model/currentState/stateName");if(f&&((f==="app"||f==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];var T=C.last("/core/shell/model/currentSpaceAndPage");if(T!==undefined){h.splice(0,0,{icon:"sap-icon://circle-task-2",title:T.pageTitle,subtitle:T.pageTitle!==T.spaceTitle?T.spaceTitle:undefined,intent:"#"+T.hash});}}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return d;};this.onHierarchyChange=function(o){d=true;var h=o.getParameters().data,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}var H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=q.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(o){e=true;var f=o.getParameters().data,g=C.last("/core/shell/model/currentState/stateName");if(!f){f=[];}if(g==="home"){E.updateStateProperty("application/relatedApps",f,false,["home"]);}E.updateStateProperty("application/relatedApps",f,true);};this.resetShellUIServiceHandlers=function(){e=false;d=false;i=false;};this.onTitleChange=function(o){i=true;var T=o.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get("sapUiShellFavicon");if(f){var m=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var g=sap.ui.require.toUrl("sap/ushell");return g+"/themes/base/img/launchpad_favicon.ico";}return f;};this.getFavIconHref=function(){return q("link").filter("[rel=\"shortcut icon\"]").attr("href")||"";};this.getAppIcon=function(){var I="sap-icon://folder",f=A.getMetadata();if(f&&f.icon){I=f.icon;}return I;};this.setAppIcons=function(m){M.start("FLP:ShellController.setAppIcons","setValues","FLP");sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){if(sap.ui.getCore().isThemeApplied()){this.setValues(m,P);}else{sap.ui.getCore().attachThemeChanged(function(){this.setValues(m,P);}.bind(this));}}.bind(this));M.end("FLP:ShellController.setAppIcons");};this.setValues=function(m,P){var f=sap.ui.require.toUrl("sap/ushell"),l=(m&&m.homeScreenIconPhone)||(f+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png"),L=(m&&m["homeScreenIconPhone@2"])||(f+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png"),o=(m&&m.homeScreenIconTablet)||(f+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png"),g=(m&&m["homeScreenIconTablet@2"])||(f+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png"),F=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),h=this.getFavIconHref();if(D.os.ios){b.setIcons({"phone":l,"phone@2":L,"tablet":o,"tablet@2":g,"favicon":F,"precomposed":false});}else if(h!==F){b.setIcons({"phone":"","phone@2":"","tablet":"","tablet@2":"","favicon":F,"precomposed":true});}};this._applyContentDensityByPriority=function(f,g){var t=this;return new Promise(function(h){sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){var k;if(f===undefined){if(D.system.combi){var U=j.getUser(),l="autoDetect";if(U){l=U.getContentDensity();}switch(l){case"cozy":f=false;break;case"compact":f=true;break;default:k=A.getMetadata();if(k.compactContentDensity&&!k.cozyContentDensity){f=true;}else{f=false;}}}else{k=A.getMetadata();if(k.compactContentDensity&&!k.cozyContentDensity){f=true;}else if(!k.compactContentDensity&&k.cozyContentDensity){f=false;}else{f=t._isCompactContentDensityByDevice();}}}t._applyContentDensityClass(f,g).then(h);});});};this._applyContentDensityClass=function(f,g){var I=this._isCompactContentDensityByDevice();return new Promise(function(h,j){function k(l){q("body").toggleClass("sapUiSizeCompact",l).toggleClass("sapUiSizeCozy",!l);if(g===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(m){m.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{"isTouch":(l?"0":"1")});});}h();}if(f===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(l){var U=l.getUser?l.getUser():undefined;k(U&&U.getContentDensity()==="cozy"?false:I);});}else{k(!!f);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",f=A.getMetadata();if(f&&f.title){T=f.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/base/util/deepExtend","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing"],function(E,C,u,H,S,M,L,d,q,U){"use strict";var b;var c;function a(){return{home:{actions:["ContactSupportBtn"]},app:{actions:["ContactSupportBtn","aboutBtn"]},minimal:{actions:["ContactSupportBtn","aboutBtn"]},standalone:{actions:["ContactSupportBtn","aboutBtn"]},embedded:{actions:["ContactSupportBtn","aboutBtn"]},"embedded-home":{actions:["ContactSupportBtn","aboutBtn"]},lean:{actions:["ContactSupportBtn","aboutBtn"]}};}function e(){return{blank:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"blank-home":{stateName:"blank-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},home:{stateName:"home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,search:"",paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},app:{stateName:"app",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],search:"",actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},minimal:{stateName:"minimal",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},standalone:{stateName:"standalone",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},embedded:{stateName:"embedded",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"embedded-home":{stateName:"embedded-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},headerless:{stateName:"headerless",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},merged:{stateName:"merged",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"headerless-home":{stateName:"headerless-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"merged-home":{stateName:"merged-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},lean:{stateName:"lean",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},"lean-home":{stateName:"lean-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}};}function r(O,K){return Object.keys(O).reduce(function(o,s){if(!K[s]){o[s]=O[s];}return o;},{});}function v(i,j){return j!==undefined;}function n(){return true;}function g(o,m){var p=m.split("/");var i=o;p.shift();p.forEach(function(P){if(!i){return;}i=i[P];});return i;}function f(m,V,o){var p=m.split("/");var i=o;p.shift();var P=p.pop();p.forEach(function(s){i=i[s];});i[P]=V;}function h(){var o;var s;var l;var A;var m;var I;var p;var t;var T;var w;this.createDefaultTriggers=function(i){var R=function(B,D,F){if(F.sProperty==="actions"){var G=g(F.oModel,F.path);if(G&&G.length===0&&F.aIds&&F.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(B){function D(O,N){var G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,P=U.parseShellHash(J).appSpecificRoute;return K!==P;}var F=D(B.oldURL,B.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){b=e();c=a();s=C.last("/core/shell/model");o={};m={};I=false;t=false;T=[];w=true;A=j;p=undefined;if(i){M.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn");}if(i.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn");}M.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;w=undefined;t=undefined;p=undefined;b=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._removeCustomDataActionBtnFromMeArea=function(i){for(var j in c){var y=c[j];var z=y.actions;var B=z.indexOf(i);if(B!==-1){c[j].actions.splice(B,1);}}};this._removeActionFromMeArea=function(B){var i;for(i in b){var j=b[i];if(i==="blank"||i==="blank-home"){continue;}var y=j.actions;var z=y.indexOf(B);if(z!==-1){b[i].actions.splice(z,1);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=d({},b[i]);var y=r(j,{aTriggers:true});C.emit("/core/shell/model/currentState",y);H.switchState(i);l=A.customShellState;p=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){L.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this._createHeaderEventPayload=function(P,V,i,j,D,y){var z={propertyName:P,value:V,aStates:j,bCurrentState:i,action:y,bDoNotPropagate:D};return z;};this.setHeaderVisibility=function(V,i,j){var P=this._createHeaderEventPayload("headerVisible",V,i,j,false);H.updateStates(P);};this.showLogo=function(i,j){this.updateShowLogo(true,i,j,false);};this.updateShowLogo=function(V,i,j,D){var P=this._createHeaderEventPayload("showLogo",V,i,j,D);H.updateStates(P);};this.addHeaderItem=function(i,j,y){if(i.length){var P=this._createHeaderEventPayload("headItems",i,j,y,false);H.updateStates(P);}};this.removeHeaderItem=function(i,j,y){var P=this._createHeaderEventPayload("headItems",i,j,y,false,"remove");H.updateStates(P);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){var P=this._createHeaderEventPayload("headEndItems",i,j,y,D);H.updateStates(P);}};this.removeHeaderEndItem=function(i,j,y){var P=this._createHeaderEventPayload("headEndItems",i,j,y,false,"remove");H.updateStates(P);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y){this._addActionButton("actions",i,j,y);};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y,z){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y,z);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){if(P.startsWith("application")){var y=this._createHeaderEventPayload(P,V,i,j,false);H.updateStates(y);return;}this._setShellItem(P,V,i,j,v,f,D);};this._handleTriggers=function(N){var i,j,y=[],z={};w=false;while(T.length>0){i=T.pop();if(N[i.sName]){y.push(i);z[i.sName]=i;}else{i.fnUnRegister(this);}}for(var B in N){if(N.hasOwnProperty(B)){if(!z[B]){j=N[B];j.fnRegister(this);y.push(j);}}}T=y;w=true;};this._registerTriggers=function(i){w=false;i.forEach(function(j){j.fnRegister(this);T.push(j);});w=true;};function x(i,j){var y=[];if(!j.aTriggers){j.aTriggers=[];}i.forEach(function(z){var F={sName:z.sName,fnRegister:z.fnRegister,fnUnRegister:z.fnUnRegister};j.aTriggers.push(F);y.push(F);});return y;}this.createTriggersOnState=function(i){var j=x(i,b);if(!I){this._registerTriggers(j);}};this.createTriggersOnBaseStates=function(i,B,j){var y=[];B.forEach(function(D){var F=b[D];y=x(i,F);});var z=B.indexOf(j)>=0;if(z&&!I){this._registerTriggers(y);}};this.createTriggers=function(i,j,B){var y=s.currentState;if(j===true){this.createTriggersOnState(i,y);return;}this.createTriggersOnBaseStates(i,B,y.stateName);};this.showShellItem=function(P,j,V){var y=S.getModelStates(j),z="/currentState"+P,B;for(var i=0;i<y.length;i++){B=b[y[i]].stateName;b[B][P.split("/")[1]]=V;}if(s.currentState.stateName===j){f(z,V,s);if(!I){this._renderShellState();}}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.applyExtendedShellState=function(i){p=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var B,D;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var F=this._getStatesList();for(B=0;B<F.length;B++){D=F[B];b[D][i]=z[D];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),B,y=i.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}B=A.extendedShellStates;if(!B[j]){B[j]={managedObjects:[],customState:undefined};}B[j].managedObjects.push(y);var z=m[y];if(z){z.nRefCount++;}else{z={oItem:i,nRefCount:1};m[y]=z;}};this.updateNeededTriggersMap=function(i,j){var y;if(!j){return;}for(y=0;y<j.length;y++){i[j[y].sName]=j[y];}};this._renderShellState=function(){var B=C.last("/core/shell/model/currentState/stateName"),i,j,y=d({},b[B]),z=A,D,N={};if(I){return;}if(z&&z.customShellState){D=z.customShellState.currentState;}var F={currentState:d({},y)};s=F;I=true;if(p&&z.extendedShellStates&&z.extendedShellStates[p]){i=z.extendedShellStates[p].customState;j=i.currentState;this._addCustomShellStates(j);}if(D){this._addCustomShellStates(D);}s=C.last("/core/shell/model");if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(D&&D.aTriggers){this.updateNeededTriggersMap(N,D.aTriggers);}if(w){this._handleTriggers(N);}delete F.currentState.aTriggers;var G=r(F.currentState,{aTriggers:true});H.recalculateState(p);C.emit("/core/shell/model/currentState",G);I=false;};this._addCustomShellStates=function(i){this.addToolAreaItem(i.toolAreaItems,false,true);this.addSubHeader(i.subHeader,true);this.addRightFloatingContainerItem(i.RightFloatingContainerItems,true);this.addActionButton(i.actions,true,undefined,false);this.addLeftPaneContent(i.paneContent,true);this.addFloatingActionButton(i.floatingActions,true);this.showRightFloatingContainer(i.showRightFloatingContainer);};this._createCustomShellState=function(i){var j={currentState:{stateName:i,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}};var y=c[i];if(y){q.extend(j.currentState,y);}return j;};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,f);};this._addActionButton=function(P,j,y,z){function B(D,F,G){var J=g(G,D);var K=J.indexOf("logoutBtn");if(K>-1){J.splice.apply(J,[K,0].concat(F));}else{J=J.concat(F);}var N=u.removeDuplicatedActions(J);function O(J){var R=[],V=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","ContactSupportBtn"];for(var i=0;i<V.length;i++){var W=J.indexOf(V[i]);if(W>-1){R.push(J.splice(W,1)[0]);}}R=R.concat(J);return R;}var Q=O(N);f(D,Q,G);}this._setShellItem(P,j,y,z,n,B);};this.setFloatingContainerContent=function(P,i,j,y){function V(B,i,D){return i.length===1;}function z(B,i,D){f(B,i,D);}this._setShellItem(P,i,j,y,V,z);};this._addShellItem=function(P,i,j,y){function V(B,i,D){if(B.length>0){L.warning("You can only add one item. Replacing existing item: "+B[0]+" in state: "+D+", with the new item: "+i[0]+".");}return true;}function z(B,D,F){f(B,i.slice(0),F);}this._setShellItem(P,i,j,y,V,z);};this._addRightFloatingContainerItem=function(P,i,j,y){function z(B,D,F){var G=g(F,B);G=G.concat(D);f(B,G,F);}this._setShellItem(P,i,j,y,n,z);};this._addToolAreaItem=function(P,i,j,y,z){function B(G,i,J){var K=g(J,G),N,D;if(typeof i==="string"){i=[i];}for(D=0;D<i.length;D++){N=i[D];if(K.indexOf(N)<0){K.push(N);}}f(G,K,J);}if(j){var D,F=S.getPassStates(z);for(D=0;D<F.length;D++){this.showShellItem("/toolAreaVisible",F[D],true);}}this._setShellItem(P,i,y,z,n,B);};this._removeShellItem=function(P,i,j,y){function V(B,D){var F,i,G;for(G=0;G<D.length;G++){i=D[G];F=B.indexOf(i);if(F<0){L.warning("You cannot remove Item: "+i+", the Item does not exists.");return false;}}return true;}function z(B,D,F){var G=g(F,B),J,i,K;for(K=0;K<D.length;K++){i=D[K];J=G.indexOf(i);if(J>-1){G.splice(J,1);}}f(B,G,F);}this._setShellItem(P,i,j,y,V,z);};this._setShellItem=function(P,O,y,z,V,B,D){var F,G;var J=Array.isArray(O)?O.slice(0):O;if(y===true){F="/currentState/"+P;G=g(s,F);if(V(G,J,"currentState")===false){return;}if(!t&&!I){B(F,J,l);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:s,path:F,aIds:J,sProperty:P});this._renderShellState();}else{B(F,J,s);}}else{var K=D?z:S.getPassStates(z),i,N=s.currentState.stateName;for(i=0;i<K.length;i++){var Q=K[i],j;G=g(b[Q],"/"+P);if(V(G,J,Q)===false){continue;}var R=S.getModelStates(Q,D);for(j=0;j<R.length;j++){F="/"+R[j]+"/"+P;B(F,J,b);if(N===R[j]){if(!I){this._renderShellState();}}}}}};this._getStatesList=function(){return Object.keys(b);};this._destroyManageQueue=function(){var i,j,y,B,z,D;B=A.extendedShellStates;for(z in B){if(B.hasOwnProperty(z)){D=B[z].managedObjects;for(i=0;i<D.length;i++){j=D[i];y=m[j];y.nRefCount--;if(y.nRefCount===0){y.oItem.destroy();m[j]=null;}}delete B[z];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(i,j){t=j;s=i;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){u.updateProperties(b[j],i[j]);}}};this.getBaseStateMember=function(i,B){return b[i][B];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}var k=new h();return k;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";function R(){var d=false,c,b=false;this.resetBackNavigationFlag=function(){b=false;};sap.ui.getCore().getEventBus().subscribe("relatedServices","resetBackNavigation",this.resetBackNavigationFlag,this);this._defaultBackNavigation=function(){window.history.back();};this.isBackNavigation=function(){return b;};this.navigateBack=function(){var t=this;b=true;if(d===true){this._defaultBackNavigation();}else if(c){c();}else{sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(C){C.isInitialNavigationAsync().then(function(i){if(i){C.toExternal({target:{shellHash:"#"},writeHistory:false});return;}t._defaultBackNavigation();});});}};this.setNavigateBack=function(i){d=false;c=i;};this.resetNavigateBack=function(){d=true;c=undefined;};this.restore=function(i){d=i.bDefaultBrowserBack;c=i.fnCustomBackNavigation;};this.store=function(s){s.bDefaultBrowserBack=d;s.fnCustomBackNavigation=c;};}return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],b={"home":{"actions":[]},"app":{"actions":["aboutBtn"]},"minimal":{"actions":["aboutBtn"]},"standalone":{"actions":["aboutBtn"]},"embedded":{"actions":["aboutBtn"]},"embedded-home":{"actions":["aboutBtn"]},"lean":{"actions":["aboutBtn"]}},o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(e,f){E=e;if(f&&f.length>0){Object.keys(b).forEach(function(S){b[S].actions=f.concat(b[S].actions);});}};this.processDangling=function(){var D,e;for(D=0;D<d.length;D++){e=d.pop();e.func.apply(this,e.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,e,f,g){var N=o[n]?o[n]:o.default,h=N[g?undefined:e]?N[e]:N.default,j=h[f]?h[f]:h.default;return j;};this.createCustomShellState=function(S){var e={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},f=b[S];if(f){q.extend(e.currentState,f);}return e;};this.createExtendedShellState=function(S,f){var B,e=this.createCustomShellState(S);B=a.extendedShellStates;if(B[S]){return false;}s=e;f();if(B[S]){B[S].customState=e;}else{B[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(e,v){var f=e.split("/");var l=f.pop();var g=f.reduce(function(h,m){return h[m];},s.currentState);g[l]=v;E._renderShellState();};this._genericAddItems=function(e,I){var f=s.currentState[e];s.currentState[e]=f.concat(I);E._renderShellState();};this.genericSetItem=function(e,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(e,v);}};this.genericAddItems=function(e,I){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(e,I);}};this.setShellModelForApplications=function(e,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericSetItem(e,v);}else{L.error("Not a valid attribute:"+e);}};this.addShellModelForApplications=function(e,I){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericAddItems(e,I);}else{L.error("Not a valid attribute:"+e);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var e=S.appRelatedElements;a.aTriggers=e.aTriggers;a.extendedShellStates=e.extendedShellStates;a.oCheckPoints=e.oCheckPoints;a.customShellState=e.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}return new R();},true);
sap.ui.predefine('sap/ushell/components/cards/ManifestPropertyHelper',["sap/base/util/ObjectPath","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(O,u,a){"use strict";var M={PLACEHOLDERS:{TITLE:"<title>",SUBTITLE:"<subtitle>",ICON:"<icon>",SEARCH_KEYWORDS:"<keywords>",SEMANTIC_OBJECT:"<semantic object>",ACTION:"<action>",PARAMETERS:"<parameters>",TARGET_URL:"<target URL>"},extractCardData:function(m){var A=this._getNavigationAction(m),t,s,S,b,c,T,U,d=O.get(["sap.app","tags","keywords"],m),e;if(A){b=O.get(["parameters","intentSemanticObject"],A);c=O.get(["parameters","intentAction"],A);T=O.get(["parameters","url"],A);s=O.get(["parameters","intentParameters"],A);}if(s){S=u.urlParametersToString(s);}if(T){U=false;}else if(b&&c){U=true;T="#"+b+"-"+c;if(S){T+="?"+S;}}t=JSON.stringify({display_icon_url:O.get(["sap.card","header","icon","src"],m),navigation_semantic_object:b,navigation_semantic_action:c,navigation_semantic_parameters:S,navigation_use_semantic_object:U,navigation_target_url:T});if(t==="{}"){t=undefined;}if(d){e=d.join(",");}return{bagProperties:{display_title_text:O.get(["sap.card","header","title"],m),display_subtitle_text:O.get(["sap.card","header","subTitle"],m),display_search_keywords:e},tileConfiguration:t,manifest:this._replaceDataWithPlaceholders(m)};},mergeCardData:function(m,c){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o),s;if(c.display_title_text){O.set(["sap.card","header","title"],c.display_title_text,o);}if(c.display_subtitle_text){O.set(["sap.card","header","subTitle"],c.display_subtitle_text,o);}if(c.display_search_keywords){s=c.display_search_keywords.split(",");O.set(["sap.app","tags","keywords"],s,o);}if(c.display_icon_url){O.set(["sap.card","header","icon","src"],c.display_icon_url,o);}if(c.navigation_semantic_object){O.set(["parameters","intentSemanticObject"],c.navigation_semantic_object,n);}else if(c.navigation_target_url){O.set(["parameters","url"],c.navigation_target_url,n);}if(c.navigation_semantic_action){O.set(["parameters","intentAction"],c.navigation_semantic_action,n);}if(c.navigation_semantic_parameters_as_object){O.set(["parameters","intentParameters"],c.navigation_semantic_parameters_as_object,n);}return o;},getTranslatablePropertiesFromBag:function(b){var t={},T;if(b&&b.getText&&b.getTextNames){T=b.getTextNames();T.forEach(function(p){t[p]=b.getText(p);});}return t;},getCardData:function(c){var t,b,T,C;if(c.bag){t=c.bag.getBag("tileProperties");}else{t=c.getBag("tileProperties");}if(c.configuration){T=c.configuration.getParameterValueAsString("tileConfiguration");}else{T=c.getConfigurationParameter("tileConfiguration");}b=this.getTranslatablePropertiesFromBag(t);C=JSON.parse(T||"{}");if(C.navigation_semantic_parameters){C.navigation_semantic_parameters_as_object=this._parseParameters(C.navigation_semantic_parameters);}Object.keys(b).forEach(function(k){C[k]=b[k];});return C;},_parseParameters:function(p){var P=a.parseParameters("?"+p);Object.keys(P).forEach(function(k){P[k]=P[k][0];});return P;},_replaceDataWithPlaceholders:function(m){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o);if(O.get(["sap.card","header","title"],o)){O.set(["sap.card","header","title"],this.PLACEHOLDERS.TITLE,o);}if(O.get(["sap.card","header","subTitle"],o)){O.set(["sap.card","header","subTitle"],this.PLACEHOLDERS.SUBTITLE,o);}if(O.get(["sap.app","tags","keywords"],o)){O.set(["sap.app","tags","keywords"],this.PLACEHOLDERS.SEARCH_KEYWORDS,o);}if(O.get(["sap.card","header","icon","src"],o)){O.set(["sap.card","header","icon","src"],this.PLACEHOLDERS.ICON,o);}if(O.get(["parameters","intentSemanticObject"],n)){O.set(["parameters","intentSemanticObject"],this.PLACEHOLDERS.SEMANTIC_OBJECT,n);}if(O.get(["parameters","intentAction"],n)){O.set(["parameters","intentAction"],this.PLACEHOLDERS.ACTION,n);}if(O.get(["parameters","url"],n)){O.set(["parameters","url"],this.PLACEHOLDERS.TARGET_URL,n);}if(O.get(["parameters","intentParameters"],n)){O.set(["parameters","intentParameters"],this.PLACEHOLDERS.PARAMETERS,n);}return o;},_getNavigationAction:function(m){var A=O.get(["sap.card","header","actions"],m),o;if(A){for(var i=0;i<A.length;i++){o=A[i];if(o.type==="Navigation"){return o;}}}return null;}};return M;});
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/base/Log","sap/base/security/encodeXML","sap/base/util/deepEqual","sap/base/util/uid","sap/base/util/UriParameters","sap/m/MessagePopover","sap/m/Text","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/Device","sap/ui/thirdparty/URI","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing","sap/ui/core/routing/History"],function(L,a,d,g,U,M,T,C,b,c,I,D,f,A,h,E,u,r,S,j,k,q,o,H){"use strict";var P="sap.ushell.components.container.",s=P+"ApplicationContainer",l="sap.ushell.Container.dirtyState.",m="autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen;",n,t,v,w=false,K=false,x=[],y=0;var z=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-defaultedParameterNames","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];function B(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.isUrlSupported(e.url).done(function(){e.promise.resolve({allowed:true,id:e.id});}).fail(function(){e.promise.resolve({allowed:false,id:e.id});});});}function F(e){var i={asyncURLHandler:t1.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(i);}E.emit("StepDone",e.stepName);}E.once("initMessagePopover").do(F);n=new k.Map();function G(e){return n.get(e.getId());}function J(){return t;}function N(e){var p=new U(e).mParams,i=p["sap-xapp-state"],u1;delete p["sap-xapp-state"];u1={startupParameters:p};if(i){u1["sap-xapp-state"]=i;}return u1;}function O(e,i){return r.i18n.getText(e,i);}function Q(){return new I({size:"2rem",src:"sap-icon://error",tooltip:t1.prototype._getTranslatedText("an_error_has_occured")});}function R(e){var i=e.getAggregation("child"),p;if(i instanceof b){p=i.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");L.debug("unloading component "+p,null,s);}e.destroyAggregation("child");}function V(e,i,p){return new Promise(function(u1){var v1,w1,x1,y1,z1,A1={},B1,C1;function D1(H1){H1.setWidth(e.getWidth());H1.setHeight(e.getHeight());H1.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",H1,true);}v1=i.indexOf("?");if(v1>=0){y1=t1.prototype._getParameterMap(i);A1=y1.startupParameters;i=i.slice(0,v1);}if(i.slice(-1)!=="/"){i+="/";}if(/\.view\.(\w+)$/i.test(p)){x1=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(p);if(!x1){L.error("Invalid SAPUI5 URL",p,s);u1(t1.prototype._createErrorControl());return;}z1=x1[1];B1=x1[2];C1=x1[3].toUpperCase();if(z1){B1=z1+"."+B1;}else{w1=B1.lastIndexOf(".");if(w1<1){L.error("Missing namespace",p,s);return t1.prototype._createErrorControl();}z1=B1.slice(0,w1);}}else{z1=p.replace(/^SAPUI5=/,"");}var E1={};var F1=z1.replace(/\./g,"/");E1[z1]=i+F1;sap.ui.loader.config({paths:E1});t1.prototype._destroyChild(e);if(B1){if(e.getApplicationConfiguration()){A1.config=e.getApplicationConfiguration();}sap.ui.view({id:e.getId()+"-content",type:C1,viewData:A1||{},viewName:B1,async:true}).loaded().then(function(H1){e.fireEvent("applicationConfiguration");D1(H1);u1(H1);});}else{L.debug("loading component "+z1,null,s);var G1=y1?{startupParameters:y1.startupParameters}:{startupParameters:{}};if(y1&&y1["sap-xapp-state"]){G1["sap-xapp-state"]=y1["sap-xapp-state"];}if(e.getApplicationConfiguration()){G1.config=e.getApplicationConfiguration();}sap.ui.core.Component.create({id:e.getId()+"-component",componentData:G1,name:z1}).then(function(H1){e.fireEvent("applicationConfiguration",{"configuration":H1.getMetadata().getConfig()});var I1=new b({id:e.getId()+"-content",component:H1});D1(I1);u1(I1);});}});}function W(e,i){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,i);},0);}function X(e,i,p){var u1=this,v1,w1={oControl:undefined,oPromise:undefined},x1,y1,z1,A1={startupParameters:{}},B1,C1=e.getComponentHandle(),D1,E1;function F1(G1){e.fireEvent("applicationConfiguration",{configuration:G1.getMetadata().getConfig()});y1=new b({id:e.getId()+"-content",component:G1});y1.setHeight(e.getHeight());y1.setWidth(e.getWidth());y1.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=t1.prototype._disableRouter.bind(u1,G1);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",y1,true);sap.ushell.Container.getServiceAsync("PluginManager").then(function(J1){D1=J1.getPluginLoadingPromise("RendererExtensions");E1=D1&&D1.state();if(E1==="pending"){D1.done(function(){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});}).fail(function(){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});});}if(E1==="resolved"||E1==="rejected"){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});}});return y1;}x1=i.indexOf("?");if(x1>=0){z1=t1.prototype._getParameterMap(i);A1={startupParameters:z1.startupParameters};if(z1["sap-xapp-state"]){A1["sap-xapp-state"]=z1["sap-xapp-state"];}i=i.slice(0,x1);}if(e.getApplicationConfiguration()){A1.config=e.getApplicationConfiguration();}if(i.slice(-1)!=="/"){i+="/";}t1.prototype._destroyChild(e);B1={id:e.getId()+"-component",name:p,componentData:A1};L.debug("Creating component instance for "+p,JSON.stringify(B1),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:p});if(C1){var G1=C1.getInstance(B1);w1.oControl=F1(G1);}else{v1=new q.Deferred();var H1={};var I1=p.replace(/\./g,"/");H1[I1]=i;sap.ui.loader.config({paths:H1});L.error("No component handle available for '"+p+"'; fallback to component.load()",null,s);sap.ui.component({id:e.getId()+"-component",name:p,componentData:A1,async:true}).then(function(G1){v1.resolve(F1(G1));});w1.oPromise=v1.promise();}return w1;}function Y(e){var i;if((e instanceof C)&&(typeof e.getRouter==="function")){i=e.getRouter();if(i&&(typeof i.stop==="function")){L.info("router stopped for instance "+e.getId());i.stop();}}}function Z(e){var i=document.createElement("a"),p=new U(e).get("sap-client"),u1;i.href=e;u1=i.protocol+"//"+i.host;return new S({alias:p?u1+"?sap-client="+p:u1,baseUrl:u1,client:p||undefined,platform:"abap"});}function $(e,i){var p=false,u1=e.getDomRef(),v1,w1;if(e.getIframeWithPost()===true&&u1&&u1.getAttribute&&u1.getAttribute("sap-iframe-app")=="true"){u1=q("#"+u1.getAttribute("id")+"-iframe")[0];}if(u1){v1=f(e._getIFrameUrl(u1)||window.location&&window.location.href||"");w1=v1.protocol()+"://"+v1.host();p=(i.source===u1.contentWindow)||(i.origin===w1);}return p;}function _(e,i,p){var u1=JSON.stringify({type:"request",service:i,request_id:g(),body:{}});L.debug("Sending post message request to origin ' "+p+"': "+u1,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(u1,p);}function a1(){var i=this.getDomRef();if(!i||i.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&i&&i.getAttribute&&i.getAttribute("sap-iframe-app")=="true"){return q("#"+i.getAttribute("id")+"-iframe")[0];}return null;}return i;}function b1(i){var e;if(i===undefined){i=this._getIFrame();}if(this.getIframeWithPost()===true){e=q("#"+i.getAttribute("id").replace("-iframe","-form"))[0].action;if(e===undefined&&(new f()).query(true).hasOwnProperty("sap-isolation-enabled")){e=i.src;}}else{e=i.src;}return e;}function c1(e,i){if(e&&!e.getActive()){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(u1)+"' on inactive container '"+e.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var p=e.getUi5ComponentName&&e.getUi5ComponentName(),u1=i.data;if(typeof p==="string"){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(u1)+"' on container of UI5 application '"+p+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var v1={bApiRegistered:true};v(e,i,v1);t1.prototype._handlePostMessagesForPluginsPostLoading(e,i,v1);}function d1(e,p,u1){var v1,w1;if(u1.bApiRegistered!==false){return;}sap.ushell.Container.getServiceAsync("PluginManager").then(function(x1){if(w===false){w=true;v1=x1.getPluginLoadingPromise("RendererExtensions");w1=v1&&v1.state();if(w1==="pending"){K=true;v1.always(function(){var y1;K=false;L.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+x.length,null,"sap.ushell.components.container.ApplicationContainer");for(var i=0;i<x.length;i++){y1=x[i];try{t1.prototype._handleMessageEvent.call(y1.that,y1.oContainer,y1.oMessage);}catch(ex){L.error(ex.message||ex,null,"sap.ushell.components.container.ApplicationContainer");}}x=[];});}}if(K===true){x.push({index:y++,that:this,oContainer:e,oMessage:p});}});}function e1(){w=false;K=false;x=[];y=0;}function f1(e,i){var p=e._getIFrame(),u1=e.getApplicationType();if(k.isApplicationTypeEmbeddedInIframe(e.getApplicationType(u1))&&p){var v1=new f(e._getIFrameUrl(p));var w1=v1.protocol()+"://"+v1.host();p.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),w1);i.preventDefault();}}function g1(e,i,p){e.write("<div").writeControlData(i).writeAccessibilityState(i).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");if(p){e.renderControl(p);}e.write("</div>");}function h1(e,i,p){if(k.isApplicationTypeEmbeddedInIframe(i)){var u1=e.getTargetNavigationMode();p=t1.prototype._adjustNwbcUrl(p,i,u1,e.getIsStateful());k.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}return p;}function i1(e,i,p,u1){var v1,w1=function(){var E1=k.getParameterValueBoolean("sap-accessibility");if(E1!==undefined){return E1;}return sap.ushell.Container.getUser().getAccessibilityMode();},x1=function(){var E1=new U(e)||{mParams:{}};if(E1.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(j.prototype.constants.themeFormat.NWBC);}return undefined;},y1=function(){var E1=false,F1=new U(e)||{mParams:{}};E1=sap.ui.getCore().getConfiguration().getStatistics()&&F1.mParams["sap-statistics"]===undefined;return E1;},z1=function(){var E1=window.hasher&&window.hasher.getHash(),B1="",F1;if(E1&&E1.length>0&&E1.indexOf("sap-iapp-state=")>0){F1=/(?:sap-iapp-state=)([^&/]+)/.exec(E1);if(F1&&F1.length===2){B1=F1[1];}}return B1;},A1=function(){var E1="";var F1=(!!q("body.sapUiSizeCompact").length);var G1=(!!q("body.sapUiSizeCozy").length);if(F1===true){E1="0";}else if(G1){E1="1";}return E1;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";v1=x1();if(v1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(v1);}if(p){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(p);}if(w1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(y1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if(i==="TR"||i==="GUI"){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=2";}else if(u1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}var B1=z1();if(B1&&B1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+B1;}var C1=A1();if(C1&&C1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+C1;}var D1=0;if(h.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){D1=h.last("/core/shell/sessionTimeoutIntervalInMinutes");}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+D1;return k.appendSapShellParam(e,i);}function j1(e,i,p,u1){var v1=i.getAggregation("child"),w1,x1;if(!v1||i._bRecreateChild){x1=t1.prototype._createUi5Component(i,p,u1);if(x1.oControl!==undefined){i._bRecreateChild=false;t1.prototype._renderControlInDiv(e,i,x1.oControl);}else{i.oDeferredControlCreation=new q.Deferred();t1.prototype._renderControlInDiv(e,i);x1.oPromise.then(function(y1){i._bRecreateChild=false;w1=sap.ui.getCore().createRenderManager();w1.renderControl(y1);w1.flush(q("#"+i.getId())[0]);w1.destroy();i.oDeferredControlCreation.resolve();});}}else{t1.prototype._renderControlInDiv(e,i,v1);}}function k1(e,i,p){var u1=e.getProperty(i);if(d(u1,p)){return;}e.setProperty(i,p);e._bRecreateChild=true;}function l1(e,i,p,u1,v1){var w1,x1=true;localStorage.removeItem(i.globalDirtyStorageKey);i.oDeferredControlCreation=undefined;if(v1&&v1.indexOf("SAPUI5.Component=")===0&&p===A.URL.type){j1(e,i,u1,v1.replace(/^SAPUI5\.Component=/,""));return;}if(v1&&v1.indexOf("SAPUI5=")===0&&p===A.URL.type){t1.prototype._renderControlInDiv(e,i,undefined,"open");i.oDeferredControlCreation=new q.Deferred();t1.prototype._createUi5View(i,u1,v1).then(function(y1){var B1,C1=q("#"+i.getId());if(C1&&C1.length>0){B1=sap.ui.getCore().createRenderManager();B1.renderControl(y1);B1.flush(q("#"+i.getId())[0]);B1.destroy();}else{e.renderControl(y1);}i.oDeferredControlCreation.resolve();});t1.prototype._renderControlInDiv(e,i,undefined,"close");return;}L.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+v1);if(!i.getActive()){L.debug("Skipping rendering container iframe","Container '"+i.getId()+"' is inactive");return;}try{u1=i.getFrameSource(p,u1,v1);}catch(ex){L.error(ex.message||ex,null,s);i.fireEvent("applicationConfiguration");e.renderControl(t1.prototype._createErrorControl());return;}if(sap.ushell.Container){w1=t1.prototype._getLogoutHandler(i);if(!w1){if(k.isApplicationTypeEmbeddedInIframe(p)){w1=t1.prototype._logout.bind(null,i);n.put(i.getId(),w1);sap.ushell.Container.attachLogoutEvent(w1);sap.ushell.Container.addRemoteSystem(t1.prototype._createSystemForUrl(u1));}}else if(!k.isApplicationTypeEmbeddedInIframe(p)){sap.ushell.Container.detachLogoutEvent(w1);n.remove(i.getId());}}u1=t1.prototype._checkNwbcUrlAdjustment(i,p,u1);u1=i._adjustURLForIsolationOpeningWithoutURLTemplate(u1);if(p==="TR"){i.setProperty("iframePostAllParams",true,true);}if(new U(window.location.href).get("sap-post")==="false"){x1=false;}else if(window.QUnit!==undefined){x1=i.getIframeWithPost();}if(x1===true&&(p==="NWBC"||p==="TR"||p==="WDA")){i.setProperty("iframeWithPost",true,true);i.oDeferredRenderer=new q.Deferred();u1=t1.prototype._filterURLParams(u1);var z1=[];var A1=t1.prototype._getParamKeys(u1,z1);t1.prototype._generateRootElementForIFrame(e,i,true);if(A1.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(y1){y1.getAppStateData(A1).then(function(B1){var C1;var D1=q("#"+i.getId());if(D1.length>0){C1=sap.ui.getCore().createRenderManager();t1.prototype._buildHTMLElements(C1,i,B1,z1,u1);C1.flush(D1[0]);C1.destroy();}else{t1.prototype._buildHTMLElements(e,i,B1,z1,u1);}setTimeout(i.oDeferredRenderer.resolve,0);},function(B1){t1.prototype._buildHTMLElements(e,i,undefined,z1,u1);setTimeout(i.oDeferredRenderer.resolve,0);});});}else{t1.prototype._buildHTMLElements(e,i,undefined,z1,u1);setTimeout(i.oDeferredRenderer.resolve,0);}t1.prototype._generateRootElementForIFrame(e,i,false);return;}i.fireEvent("applicationConfiguration");e.write("<iframe").writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("src",u1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m);}e.write("></iframe>");}function m1(e){var i=new U(document.URL);if(i.get("sap-isolation-enabled")==="true"){var p=o,u1=p.getHash(document.URL),v1="",w1="&sap-plugins="+encodeURIComponent(sap.ushell.Container.getService("PluginManager")._getNamesOfPluginsWithAgents()),x1="&sap-history-dir="+(H.getInstance().getDirection()?H.getInstance().getDirection():"");if(e.indexOf("&/")>0){v1=e.substr(e.indexOf("&/"));}if(w1==="&sap-plugins="){w1="";}if(u1){var y1=p.parseShellHash("#"+u1),z1=p.paramsToString(y1.params);if(z1&&z1.length>=0){var A1=sap.ushell.Container.getService("AppState").createEmptyAppState(),B1=sap.ushell.Container.getService("AppState").createEmptyAppState(),C1="";if(z1.indexOf("sap-intent-param")>=0){C1=encodeURIComponent(z1);}else{A1.setData(z1);A1.save();C1=encodeURIComponent("sap-intent-param="+A1.getKey());}B1.setData("sap-startup-params="+C1);B1.save();e=e.split("#")[0]+"&sap-intent-param="+B1.getKey()+w1+x1+"#"+window.hasher.getHash();}else{e=e.split("#")[0]+w1+x1+"#"+window.hasher.getHash();}}else{e+="#"+window.hasher.getHash();}if(e.indexOf("&/")<0){e+=v1;}}if(i.has("sap-iframe-params")){var D1=i.get("sap-iframe-params")||"",E1=D1.split(",");E1.forEach(function(F1){if(F1&&F1.length>0){if(i.has(F1)){e=e.split("#")[0]+"&"+F1+"="+i.get(F1)+"#"+e.split("#")[1];}}});}return e;}function n1(e){var i=new f(e);i=i.removeSearch(z);return i.toString();}function o1(e,i){var p=[],u1;if(e.indexOf("sap-intent-param=")>0){u1=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-intent-param-data");}}if(e.indexOf("sap-xapp-state=")>0){u1=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-xapp-state-data");}}if(e.indexOf("sap-iapp-state=")>0){u1=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-iapp-state-data");}}return p;}function p1(e,i,p,u1,v1){var w1=i.getId()+"-form",x1="",y1="",z1=false;if(p===undefined){p=[];}p.push([sap.ushell.Container.getFLPUrl(true)]);u1.push("sap-flp-url");p.push([i.getSystemAlias()]);u1.push("system-alias");var A1="";var B1={};u1.forEach(function(F1,G1){if(p[G1][0]){B1[F1]=p[G1][0];}});var C1=v1;A1=JSON.stringify(B1);x1="<input name=\"sap-flp-params\" value=\""+a(A1)+"\">";if(i.getIframePostAllParams()===true){var D1=new U(v1);y1=q1(i,D1);if(y1!==""){v1=r1(v1,D1);}}i.fireEvent("applicationConfiguration");e.write("<form").writeAttributeEscaped("method","post").writeAttributeEscaped("id",w1).writeAttributeEscaped("name",w1).writeAttributeEscaped("target",i.getId()+"-iframe").writeAttributeEscaped("action",v1).addStyle("display","none").writeStyles().write(">").writeAttributeEscaped(x1+y1).write("</form>");var E1=i.sId;if(i.hasStyleClass("sapUShellApplicationContainerIframeHidden")){z1=true;i.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}i.sId+="-iframe";e.write("<iframe").writeAttributeEscaped("name",i.getId()).writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("sap-orig-src",C1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m.replaceAll(";"," "+(new f(v1).origin())+";"));}e.write("></iframe>");i.sId=E1;if(z1){i.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true);}}function q1(e,i){var u1="";var v1="",w1="";if(i.has("sap-iframe-hint")){u1=i.get("sap-iframe-hint");}var x1=i.mParams;if(e.getApplicationType()==="TR"||(u1==="GUI")){var p,y1;for(p in x1){if(p==="sap-iframe-hint"||p==="sap-keep-alive"){continue;}y1=x1[p][0];v1="<input name=\""+p+"\" value=\""+a(y1)+"\">";w1+=v1;}}return w1;}function r1(e,i){var p=i.get("sap-iframe-hint"),u1=i.get("sap-keep-alive"),v1=new f(e).query("");if(typeof p==="string"){v1.addSearch("sap-iframe-hint",p);}if(typeof u1==="string"){v1.addSearch("sap-keep-alive",u1);}return v1.toString();}function s1(e,i,p){if(p){e.write("<div").writeControlData(i).writeAttributeEscaped("sap-iframe-app","true").addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");}else{e.write("</div>");}}var t1=c.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:P+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"},extendedInfo:{type:"object"},systemAlias:{defaultValue:"",type:"string"},iframePostAllParams:{defaultValue:false,type:"boolean"},isKeepAlive:{defaultValue:false,type:"boolean"},frameworkId:{defaultValue:"",type:"string"},iframeReusedForApp:{defaultValue:false,type:"boolean"}},events:{applicationConfiguration:{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,i=this;if(sap.ushell.Container){e=t1.prototype._getLogoutHandler(i);if(e){sap.ushell.Container.detachLogoutEvent(e);n.remove(i.getId());}}localStorage.removeItem(i.globalDirtyStorageKey);if(i._unloadEventListener){removeEventListener("unload",i._unloadEventListener);}if(i._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",i._disableRouterEventHandler);}if(i._storageEventListener){removeEventListener("storage",i._storageEventListener);}if(i._messageEventListener){removeEventListener("message",i._messageEventListener);}t1.prototype._destroyChild(i);if(c.exit){c.exit.apply(i);}},setHandleMessageEvent:function(i){v=i;},init:function(){var e=this;e.globalDirtyStorageKey=l+g();e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(i){var p=e.getApplicationType();if(i.key===e.globalDirtyStorageKey&&i.newValue===sap.ushell.Container.DirtyState.PENDING&&k.isApplicationTypeEmbeddedInIframe(p)){var u1=e._getIFrame();if(u1){L.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var v1=new f(e._getIFrameUrl(u1));var w1=v1.protocol()+"://"+v1.host();u1.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),w1);}}};addEventListener("storage",e._storageEventListener);e._messageEventListener=t1.prototype._handleMessageEvent.bind(null,e);addEventListener("message",e._messageEventListener);},onAfterRendering:function(){var e=this;this.rerender=function(){};if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var i=document.getElementById(e.getId()+"-form");if(i){i.submit();}});}},renderer:function(e,i){var p=i.getApplication(),u1=i.launchpadData,v1;if(!i.getVisible()){t1.prototype._renderControlInDiv(e,i);return;}if(i.error){delete i.error;t1.prototype._renderControlInDiv(e,i,t1.prototype._createErrorControl());}else if(!p){t1.prototype._render(e,i,i.getApplicationType(),i.getUrl(),i.getAdditionalInformation());}else if(!p.isResolvable()){t1.prototype._render(e,i,p.getType(),p.getUrl(),"");}else if(u1){t1.prototype._render(e,i,u1.applicationType,u1.Absolute.url.replace(/\?$/,""),u1.applicationData);}else{L.debug("Resolving "+p.getUrl(),null,s);p.resolve(function(w1){L.debug("Resolved "+p.getUrl(),JSON.stringify(w1),s);i.launchpadData=w1;t1.prototype._destroyChild(i);},function(w1){var x1=p.getMenu().getDefaultErrorHandler();if(x1){x1(w1);}t1.prototype._destroyChild(i);i.error=w1;});v1=new T({text:t1.prototype._getTranslatedText("loading",[p.getText()])});t1.prototype._destroyChild(i);i.setAggregation("child",v1);t1.prototype._renderControlInDiv(e,i,v1);}}});t1.prototype.getFrameSource=function(e,i){if(!Object.prototype.hasOwnProperty.call(A.enum,e)){throw new Error("Illegal application type: "+e);}return i;};t1.prototype.setUrl=function(e){k1(this,"url",e);};t1.prototype.setAdditionalInformation=function(e){k1(this,"additionalInformation",e);};t1.prototype.setApplicationType=function(e){k1(this,"applicationType",e);};t1.prototype.createPostMessageRequest=function(e,i){var p=Date.now().toString();return{type:"request",request_id:p,service:e,body:i};};t1.prototype.setNewTRApplicationContext=function(e){var i=new q.Deferred(),p=this._getIFrame(),u1,v1,w1=this;if(!p){return i.promise().reject({message:"Expected an existing TR application application frame but found none."});}function x1(){if(v1){v1["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);v1["system-alias"]=w1.getSystemAlias();u1["sap-flp-params"]=v1;}var A1=w1.createPostMessageRequest("sap.its.startService",u1);w1.postMessageToIframe(A1,p,true).then(function(){i.resolve();},function(B1){i.reject({eventData:B1,message:"Failed to change application context."});});}e=k.appendSapShellParam(e);e=t1.prototype._filterURLParams(e);u1={url:e};if(this.getIframeWithPost&&this.getIframeWithPost()===true){var y1=[];var z1=t1.prototype._getParamKeys(e,y1);if(z1.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(A1){A1.getAppStateData(z1).then(function(B1){v1={};y1.forEach(function(C1,D1){if(B1[D1][0]){v1[C1]=B1[D1][0];}});x1();},function(B1){x1();});});}else{v1={};x1();}}else{x1();}return i.promise();};t1.prototype.postMessageToIframe=function(i,p,u1){var v1=this;var w1=i.request_id;return new Promise(function(x1,y1){function z1(D1){var E1;try{E1=JSON.parse(D1.data,v1);if(w1!==E1.request_id){return;}if(E1.status==="success"){x1(E1);}else{y1(E1);}window.removeEventListener("message",z1);}catch(e){x1();L.warning("Obtained bad response from framework in response to message "+i.request_id);L.debug("Underlying framework returned invalid response data: '"+D1.data+"'");}}var A1=JSON.stringify(i);L.debug("Sending postMessage "+A1+" to application container '"+v1.getId()+"'");var B1=new f(v1._getIFrameUrl(p));var C1=B1.protocol()+"://"+B1.host();if(u1){window.addEventListener("message",z1,false);p.contentWindow.postMessage(A1,C1);}else{p.contentWindow.postMessage(A1,C1);x1();}});};t1.prototype.postMessageToCurrentIframe=function(e,i){if(i===undefined){i=false;}var p=this._getIFrame();if(!p){if(i){return Promise.reject({message:"Expected opened iframe not found."});}return;}return this.postMessageToIframe(e,p,i);};t1.prototype.setNewApplicationContext=function(e,i){var p=this;var u1=this["setNew"+e+"ApplicationContext"];if(!u1){return Promise.reject({message:"Unsupported application type"});}var v1=this._getIFrame();if(!v1){return Promise.reject({message:"Expected an existing TR application application frame but found none."});}var w1=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(w1,v1,true).then(function(){return u1.call(p,i);},function(x1){return Promise.reject({eventData:x1,message:"Failed to change application context."});});};t1.prototype.onApplicationOpened=function(e){var i=this.getIsStateful();if(!i){return Promise.resolve();}var p=this.getApplicationType();if(p==="TR"&&e!=="TR"){var u1=this._getIFrame();if(!u1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var v1=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(v1,u1,false).catch(function(w1){return Promise.reject({eventData:w1,message:"Failed to change application context."});});}return Promise.resolve();};t1.prototype.postMessageRequest=function(e,i){var p=this._getIFrame();if(!p){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var u1=this.createPostMessageRequest(e,i||{});return this.postMessageToIframe(u1,p,false).catch(function(v1){return Promise.reject({eventData:v1,message:"Failed to post message."});});};t1.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),i;if(e&&e.enabled&&e.enabled===true){i=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(i,this._getIFrame(),true);}return undefined;};t1.prototype.getDeffedControlCreation=function(e){return this.oDeferredControlCreation?this.oDeferredControlCreation.promise():q.Deferred().resolve().promise();};t1.prototype._getCommunicationHandlers=J;t1.prototype._adaptIsUrlSupportedResultForMessagePopover=B;t1.prototype._getLogoutHandler=G;t1.prototype._getParameterMap=N;t1.prototype._getTranslatedText=O;t1.prototype._createErrorControl=Q;t1.prototype._destroyChild=R;t1.prototype._createUi5View=V;t1.prototype._publishExternalEvent=W;t1.prototype._createUi5Component=X;t1.prototype._disableRouter=Y;t1.prototype._createSystemForUrl=Z;t1.prototype._isTrustedPostMessageSource=$;t1.prototype._handleMessageEvent=c1;t1.prototype._logout=f1;t1.prototype._renderControlInDiv=g1;t1.prototype._checkNwbcUrlAdjustment=h1;t1.prototype._adjustNwbcUrl=i1;t1.prototype._render=l1;t1.prototype._getParamKeys=o1;t1.prototype._buildHTMLElements=p1;t1.prototype._buildHTMLForAllPostParams=q1;t1.prototype._generateRootElementForIFrame=s1;t1.prototype._backButtonPressedCallback=_;t1.prototype._getIFrame=a1;t1.prototype._getIFrameUrl=b1;t1.prototype._filterURLParams=n1;t1.prototype._adjustURLForIsolationOpeningWithoutURLTemplate=m1;t1.prototype._resetPluginsLoadIndications=e1;t1.prototype._handlePostMessagesForPluginsPostLoading=d1;return t1;},true);
sap.ui.predefine('sap/ushell/components/pages/controller/PagesAndSpaceId',["sap/ushell/resources","sap/ushell/Config"],function(r,C){"use strict";var P=function(){};P.prototype._getPageAndSpaceId=function(s){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(u){if(!s){s=window.hasher.getHash();}var h=u.parseShellHash(s);var i={semanticObject:h.semanticObject||"",action:h.action||""};var H=h.params||{};var p=H.pageId||[];var S=H.spaceId||[];return this._parsePageAndSpaceId(p,S,i);}.bind(this));};P.prototype._parsePageAndSpaceId=function(p,s,i){return new Promise(function(a,b){this.getUserMyHomeEnablement().then(function(){if(p.length<1&&s.length<1){if(i.semanticObject==="Shell"&&i.action==="home"){this._getUserDefaultPage().then(function(R){a(R);}).catch(function(e){b(e);});return;}b(r.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"));}if(p.length===1&&s.length===0){b(r.i18n.getText("PageRuntime.OnlyPageIdProvided"));}if(p.length===0&&s.length===1){b(r.i18n.getText("PageRuntime.OnlySpaceIdProvided"));}if(p.length>1||s.length>1){b(r.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"));}if(p[0]===""){b(r.i18n.getText("PageRuntime.InvalidPageId"));}if(s[0]===""){b(r.i18n.getText("PageRuntime.InvalidSpaceId"));}a({pageId:p[0],spaceId:s[0]});}.bind(this));}.bind(this));};P.prototype.getUserMyHomeEnablement=function(){return new Promise(function(a,b){var u=sap.ushell.Container.getUser().getShowMyHome();C.emit("/core/spaces/myHome/userEnabled",u);a(u);});};P.prototype._getUserDefaultPage=function(){return new Promise(function(a,b){Promise.all([sap.ushell.Container.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(R){var m=R[0];m.getSpacesPagesHierarchy().then(function(s){if(s.spaces.length===0){b(r.i18n.getText("PageRuntime.NoAssignedSpace"));}var S=s.spaces.find(function(o){return(!!(o.id&&o.pages&&o.pages[0]&&o.pages[0].id));});if(S){a({spaceId:S.id,pageId:S.pages[0].id});}else{b(r.i18n.getText("PageRuntime.NoAssignedPage"));}});});}.bind(this));};return new P();});
sap.ui.predefine('sap/ushell/iconfonts',["sap/ui/core/IconPool"],function(I){"use strict";var a={};a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","e0c3"],["F0019","e0c3"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","e129"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};a.registerFonts=function(){var o,i,j,b;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){b={};b.fontFamily=o.fontFamily;b.content=o.icons[j][1];b.overWrite=false;b.suppressMirroring=true;I.addIcon(o.icons[j][0],o.collectionName,b);}}};return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(C,c,m){"use strict";sap.ui.getCore().initLibrary({name:"sap.ushell",version:"1.96.0",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.UI5ComponentType","sap.ushell.VisualizationLoadState","sap.ushell.AppType"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent","sap.ushell.renderers.fiori2.search.controls.DivContainer","sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition","sap.ushell.renderers.fiori2.search.controls.SearchButton","sap.ushell.renderers.fiori2.search.controls.SearchFacet","sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog","sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter","sap.ushell.renderers.fiori2.search.controls.SearchFacetItem","sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar","sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup","sap.ushell.renderers.fiori2.search.controls.SearchFilterBar","sap.ushell.renderers.fiori2.search.controls.SearchInput","sap.ushell.renderers.fiori2.search.controls.SearchLabel","sap.ushell.renderers.fiori2.search.controls.SearchLayout","sap.ushell.renderers.fiori2.search.controls.SearchLink","sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl","sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen","sap.ushell.renderers.fiori2.search.controls.SearchObjectSuggestionImage","sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar","sap.ushell.renderers.fiori2.search.controls.SearchResultGrid","sap.ushell.renderers.fiori2.search.controls.SearchResultList","sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer","sap.ushell.renderers.fiori2.search.controls.SearchResultListItem","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote","sap.ushell.renderers.fiori2.search.controls.SearchResultMap","sap.ushell.renderers.fiori2.search.controls.SearchResultTable","sap.ushell.renderers.fiori2.search.controls.SearchSelect","sap.ushell.renderers.fiori2.search.controls.SearchText","sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer","sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelp","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpDialog","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpPage","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpWizard","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.bookmark.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GridContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellLayout","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});var u=sap.ushell;u.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};u.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};u.UI5ComponentType={Application:"Application",Plugin:"Plugin",Visualization:"Visualization"};u.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};u.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};u.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};u.NavigationState={InProgress:"InProgress",Finished:"Finished"};u.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};u.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};u.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};u.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};u.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};return u;});
sap.ui.predefine('sap/ushell/navigationMode',["sap/base/Log","sap/base/util/isPlainObject"],function(L,i){"use strict";var e={};var _=function(E){var I=true;if(E){if(typeof E!=="object"){I=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){I=false;}else if(typeof E[k]!=="boolean"){I=false;}});}}if(!I){L.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(i(E)){return E[a(A)];}return false;};e.compute=function(n,E,s,A,o){var I,l;_(o);var N={};if(["inplace","explace"].indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(["inplace","explace","frameless"].indexOf(s)>=0){I=e._getInternalNavigationMode(s,n);L.debug("Navigation mode was forced to "+I,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=I;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};e._getInternalNavigationMode=function(E,A){var I={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!I.hasOwnProperty(A)){L.error(A+" is not a valid application type","expected one of "+Object.keys(I).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"&&E!=="frameless"){L.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null;}if(A==="SAPUI5"&&E==="frameless"){L.error("'"+E+"' is not a valid external navigation mode for application type '"+A+"'","falling back to internal navigation mode '"+I.SAPUI5.frameless+"'","sap.ushell.navigationMode");}return I[A][E];};e.getExternalNavigationMode=function(I){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(I)){L.error(I+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[I];};var w=["NWBC","WDA","TR","WCF"];e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return"newWindowThenEmbedded";}if(r.appCapabilities&&r.appCapabilities.navigationMode){return r.appCapabilities.navigationMode;}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){L.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};e.computeNavigationModeForHomepageTiles=function(A,s,I){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&I){return"embedded";}return this.getNavigationMode(r);};return e;},true);
sap.ui.predefine('sap/ushell/override',["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(G,M,g,e){"use strict";var o={};o.updateAggregation=function(n){if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],s=A._sMutator+"Group",c=B.isGrouped()&&this[s],i=[],d=function(C){var I=this.getId()+"-"+g(),h=f(I,C);if(h.isA("sap.ui.integration.widgets.Card")){h.setBindingContext(C,"ushellCardModel");}else{h.setBindingContext(C,b.model);}this[A._sMutator](h);}.bind(this);if(c){M.prototype.updateAggregation.apply(this,arguments);}else{i=this[A._sGetter]();o._adaptCurrentGroup(a,i);o._updateCurrentGroup(a,i,b.model,d);i.length=a.length;}}};o._adaptCurrentGroup=function(b,I){var i,a,c;for(i=0;i<b.length;i++){a=!!(I[i]&&I[i].isA("sap.ui.integration.widgets.Card"));c=!!b[i].getProperty(b[i].sPath+"/isCard");if(a||c){var j=i;for(;j<I.length;j++){I[j].destroy();}break;}}};o._updateCurrentGroup=function(b,I,B,a){var i;for(i=0;i<b.length;i++){if(i<I.length&&!I[i].bIsDestroyed){I[i].setBindingContext(b[i],B);}else{a(b[i]);}}for(;i<I.length;++i){I[i].destroy();}};o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,a=null,s=null,t=this,I=t.getItems(),l=0,L=0,i,d,T=[];a=B.isGrouped()&&this.addItemGroup;e(B.getContexts(),function(h,C){if(a&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==s){var j,H;if(b.groupHeaderFactory){j=b.groupHeaderFactory(N);}H=j||new G({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",H,L,true);L=L+1;s=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===G){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){e(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{d=t.getId()+"-"+L;c=f(d,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){e(T,function(i,v){v.destroy();});},1);};o.updateAggregatesFactory=function(n){return function(){o.updateAggregation.bind(this)(n);};};return o;},true);
sap.ui.predefine('sap/ushell/performance/FesrEnhancer',["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/performance/ShellAnalytics"],function(L,d,F,S){"use strict";var a={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION"};var I={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};var f={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(F.getActive()){S.enable();this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},reset:function(){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;S.disable();this._setLastTrackedRecord(null);},_getPerformanceEntries:function(e){return performance.getEntriesByName(e);},_getLastTrackedApplicationId:function(){var c=S.getCurrentApplication();if(c){return c.id;}return null;},_getLastTrackedRecord:function(){return this._lastTrackedRecord;},_setLastTrackedRecord:function(n){this._lastTrackedRecord=n;},_onBeforeCreatedHandler:function(u,U){var D=this._detectScenario(u,U),A=this._getLastTrackedApplicationId();if(A){u.appNameShort=A;}if(!D.scenario){return u;}return this._enhanceRecord(D.scenario,u,D.relatedEvent);},_detectScenario:function(u,U){function c(s,e){var r={scenario:s};if(e){r.relatedEvent=e;}return r;}if(u.stepName==="undetermined_startup"){var l=S.getLastClosedRecord();this._setLastTrackedRecord(l);switch(u.appNameLong){case"sap.ushell.components.homepage":return c(a.HOME_INITIAL);case"sap.ushell.components.pages":return c(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return c(a.FINDER_INITIAL);default:return c(a.APP_INITIAL,l);}}var o=this._getLastTrackedRecord(),n=S.getNextNavigationRecords(o),s,N;if(n.length===1){N=n[0];if((N&&o&&!N.isEqual(o))||(!o&&N)){this._setLastTrackedRecord(N);s=N.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return c(s,N);}}else if(n.length>1){n.pop();N=n[0];this._setLastTrackedRecord(N);s=N.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return c(s,N);}return c(null);},_enhanceRecord:function(D,i,r){switch(D){case a.HOME_INITIAL:return this._enhanceInitialStart(i,D,"FLP-TTI-Homepage");case a.FINDER_INITIAL:return this._enhanceInitialStart(i,D,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(i,D,r||{});case a.NAVIGATION:case a.HOME_LOADING:return this._enhanceNavigationRecord(i,D,r||{});default:break;}L.warning("Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return i;},_enhanceInitialStart:function(i,s,p){var m,e=d({},i);e.stepName=s;e.interactionType=I.APP_START;if(p){m=this._getPerformanceEntries(p)[0];if(m){e.timeToInteractive=m.startTime;return e;}L.warning("Scenario '"+s+"' detected but expected performance mark '"+p+"' does not exist",null,"sap.ushell.performance.FesrEnhancer");}return e;},_enhanceNavigationRecord:function(i,D,r){var e=d({},i);if(D!=="FLP@DURING_LOAD"){e.stepName=r.step||i.stepName;}e.appNameShort=r.targetApplication||"";if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}if(/^FLP_BACK/.test(e.stepName)){var m=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(m){if(m.startTime>r.getTimeStart()){e.timeToInteractive=m.startTime-r.getTimeStart();}}}return e;},_enhanceInitialAppStart:function(i,s,r){var e=d({},i);e.stepName=s;e.appNameShort=i.appNameShort;if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}else{e.interactionType=I.STEP_IN_APP;}return e;}};return f;},true);
sap.ui.predefine('sap/ushell/performance/ShellAnalytics',["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord"],function(E,A,S){"use strict";var s=[],d=[],o,c,l,h=false,i=false;var T={"dashboardTileClick":"HOMEPAGE_TILE","dashboardTileLinkClick":"HOMEPAGE_LINK","catalogTileClick":"FINDER_TILE"};var N={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var F={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};var t=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];function _(){return sap.ui.getCore().getEventBus();}function a(D){return D&&(D==="FLP_HOME"||D==="FLP_PAGE");}function g(){return s;}function b(){var D=g().filter(function(R){return R.isClosed();});if(D.length>0){return D[D.length-1];}return null;}function e(L){if(!L){return g();}return g().filter(function(R){return L.getTimeStart()<R.getTimeStart()&&R.isClosed();});}function f(){return c;}function j(D){c=D;}function k(){l=performance.now();}function m(){if(!o){o=new S();s.push(o);}return o;}function n(D,G){m().setTrigger(T[G]);}function p(D){m().setTargetHash(D);m().setTimeStart(l||performance.now());}function q(D){var G="";var H=D&&D.componentInstance&&D.componentInstance.getManifest();if(H&&H["sap.app"]&&H["sap.app"].id){G=H["sap.app"].id;}return G;}function r(){return new Promise(function(D,G){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(H){var I=H.getCurrentApplication();if(!I){D({});return;}if(I.homePage){var J=F[q(I)]||"FLP_HOME";D({type:"UI5",id:J});return;}if(I.applicationType==="UI5"){I.getTechnicalParameter("sap-fiori-id").then(function(L){var M=L[0];if(!M){M=q(I);M=F[M]||M;}M=M.replace(/,/g,"");D({type:"UI5",id:M});});}else{var K=A.getMetadata().technicalName||A.getCurrentApplication().text||I.applicationType;K=K.replace(/,/g,"");D({type:I.applicationType,id:K});}});});}function u(D,G,H){if(o){var I=G?G.id:null;o.setSourceApplication(D);o.setTargetApplication(I);o.setApplicationType(G?G.type:null);o.setNavigationMode(H);if(!h&&a(I)){h=true;o.setHomepageLoading(true);}o.closeRecord();o=null;}}function v(){if(!o){return;}r().then(function(D){var G=f();j(D);u(G?G.id:undefined,D,N.INPLACE);});}function w(){var D=f();u(D?D.id:undefined,null,N.EXPLACE);}function x(){if(o){var D=f();o.setSourceApplication(D?D.id:undefined);o.closeRecordWithError();o=null;}}function y(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.attachEvent("hashChanged",k);D.hashChanger.attachEvent("shellHashChanged",k);});}function z(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.detachEvent("hashChanged",k);D.hashChanger.detachEvent("shellHashChanged",k);});}function B(){if(i){return;}i=true;t.forEach(function(G){_().subscribe("launchpad",G,n);});var D;D=E.once("ShellNavigationInitialized").do(y);d.push(D);D=E.on("trackHashChange").do(p);d.push(D);D=E.on("AppRendered").do(v);d.push(D);D=E.on("openedAppInNewWindow").do(w);d.push(D);D=E.on("firstSegmentCompleteLoaded").do(v);d.push(D);D=E.on("doHashChangeError").do(x);d.push(D);D=E.on("PagesRuntimeRendered").do(v);d.push(D);D=E.on("CloseFesrRecord").do(v);d.push(D);}function C(){if(!i){return;}t.forEach(function(D){_().unsubscribe("launchpad",D,n);});d.forEach(function(D){D.off();});z();j(null);s=[];o=null;i=false;}return{enable:B,disable:C,getAllRecords:g,getCurrentApplication:f,getLastClosedRecord:b,getNextNavigationRecords:e};},false);
sap.ui.predefine('sap/ushell/performance/StatisticalRecord',[],function(){"use strict";var S={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};function _(A){return A&&(A==="FLP_HOME"||A==="FLP_PAGE");}function a(){this.status=S.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;this.homepageLoading=false;this.applicationType=null;}a.prototype._calculateStep=function(){if(this.targetApplication===undefined&&this.sourceApplication===undefined){return"";}if(this.sourceApplication===undefined&&_(this.targetApplication)){return"FLP@DURING_LOAD";}if(this.sourceApplication===undefined&&!_(this.targetApplication)){return"FLP@DEEP_LINK";}if(this.sourceApplication&&!_(this.targetApplication)&&!_(this.sourceApplication)){return"A2A@"+this.sourceApplication;}if(this.sourceApplication&&_(this.targetApplication)&&!_(this.sourceApplication)){return"FLP_BACK@"+this.sourceApplication;}if(_(this.sourceApplication)){return"FLP@HOMEPAGE_TILE";}return"";};a.prototype.isEqual=function(o){return this.timeStart===o.timeStart;};a.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=S.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart;}};a.prototype.closeRecordWithError=function(){this.status=S.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart;};a.prototype.isClosed=function(){return this.status===S.CLOSED;};a.prototype.getStep=function(){return this.step;};a.prototype.setTrigger=function(t){this.trigger=t;};a.prototype.setTargetHash=function(t){this.targetHash=t;};a.prototype.setTimeStart=function(t){this.timeStart=t;};a.prototype.getTimeStart=function(){return this.timeStart;};a.prototype.getTimeEnd=function(){return this.timeEnd;};a.prototype.setSourceApplication=function(s){this.sourceApplication=s;};a.prototype.setTargetApplication=function(t){this.targetApplication=t;};a.prototype.setNavigationMode=function(n){this.navigationMode=n;};a.prototype.setHomepageLoading=function(h){this.homepageLoading=h;};a.prototype.setApplicationType=function(b){this.applicationType=b;};return a;},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(E,D,h,C,a,r){"use strict";var A=E.extend("sap.ushell.renderers.fiori2.AccessKeysHandler",{constructor:function(){E.apply(this,arguments);a.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[];}});A.prototype.init=function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExternalKeysHandler(e);}var c=C.last("/core/shell/model/currentState/stateName");if(c!=="headerless"&&c!=="headerless-home"){var b=(c==="home"||c==="app"||c==="minimal");this.handleShortcuts(e,b);}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);};A.prototype.appOpenedHandler=function(){var c=h.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;};A.prototype._focusItemInOverflowPopover=function(i,c){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o&&o.isOpen()){if(o.getContent().length){this._focusItemInPopover(i,o.getContent()[0].getItems());}}else if(c<10){var O=window.document.getElementById("endItemsOverflowBtn");if(O){O.click();var t=this;window.setTimeout(function(){t._focusItemInOverflowPopover(i,++c);},300);}}};A.prototype._focusItemInUserMenu=function(i,c){var u=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(u&&u.isOpen()){if(u.getContent().length){this._focusItemInPopover(i,u.getContent()[0].getItems());}}else if(c<10){var t=this;a.emit("showMeArea",Date.now());window.setTimeout(function(){t._focusItemInUserMenu(i,++c);},300);}};A.prototype._focusItemInPopover=function(I,b){for(var i=0;i<b.length;i++){var c=b[i].getId().split("-");if(c[c.length-1]===I){b[i].getDomRef().focus();return;}}};A.prototype._handleAccessOverviewKey=function(b){var s=this.oModel.getProperty("/searchAvailable"),p=this.oModel.getProperty("/personalization"),e=C.last("/core/catalog/enabled"),c=C.last("/core/shell/model/enableNotifications");if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}var S=[];S=S.concat(this.aShortcutsDescriptions);var d,f;if(D.os.macintosh){d=r.i18n.getText("OptionKey");f=r.i18n.getText("CommandKey");}else{d=r.i18n.getText("AltKey");f=r.i18n.getText("ControlKey");}if(window.document.getElementById("shell-header")){if(e&&b){S.push({text:d+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")});}if(s){S.push({text:d+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")});}S.push({text:d+" + H",description:r.i18n.getText("hotkeyHomePage")});S.push({text:d+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(c){S.push({text:d+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")});}if(b){S.push({text:d+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")});}if(p&&e){S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeyExitEditing")});}if(s){S.push({text:f+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")});}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(L,M,T,V){var v=new V();S.forEach(function(o){v.addItem(new L({text:o.description}));v.addItem(new T({text:o.text}).addStyleClass("sapUiSmallMarginBottom"));});M.show(v,{id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"});});};A.prototype._focusAppFinderButton=function(){if(!C.last("/core/catalog/enabled")){return;}if(this._isFocusInDialog()){return;}var o=window.document.getElementById("openCatalogBtn");if(o){o.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return;}this._focusItemInUserMenu("openCatalogBtn",0);};A.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return;}var s=window.document.getElementById("userSettingsBtn");if(s){s.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return;}this._focusItemInUserMenu("userSettingsBtn",0);};A.prototype._blockBrowserDefault=function(e){return new Promise(function(b){if(D.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");b();}},0);}}else{b();}e.preventDefault();});};A.prototype._handleAltShortcutKeys=function(e,b){var s=sap.ui.getCore().byId("shell-header"),u=sap.ui.getCore().byId("sapUshellMeAreaPopover"),n=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return;}if(s){if(b){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this));}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this));}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var S=window.document.getElementById("sf"),o=window.document.getElementById("searchFieldInShell-button");if(S){S.focus();}else if(o){o.focus();}else{this._focusItemInOverflowPopover("sf",0);}}.bind(this));}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var l=document.getElementById("shell-header-logo");if(l){l.focus();return;}var H=document.getElementById("homeBtn");if(H){H.focus();}}.bind(this));}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(u&&u.isOpen())){a.emit("showMeArea",Date.now());}}.bind(this));}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(n&&n.isOpen())){a.emit("showNotifications",Date.now());}}.bind(this));}}};A.prototype._handleCtrlShortcutKeys=function(e,b){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var s=sap.ui.getCore().byId("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}}}else if(e.keyCode===188&&b){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var S=sap.ui.getCore().byId("userSettingsBtn");if(S&&!this._isFocusInSmartTable()){S.firePress();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}this._handleAccessOverviewKey(b);}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var c=window.document.getElementById("appFinderSearch-I");if(c){c.focus();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}if(C.last("/core/spaces/enabled")){this.fireEvent("editModeDone");}else{var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d&&d.getDomRef()){d.firePress();e.preventDefault();e.stopPropagation();}}}};A.prototype.handleShortcuts=function(e,b){if(D.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}e.preventDefault();}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,b);}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,b);}};A.prototype.registerAppKeysHandler=function(H){this.fnExternalKeysHandler=H;this.sLastExternalKeysHandlerUrl=h.getHash();};A.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null;};A.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler;};A.prototype.registerAppShortcuts=function(H,s){this.fnExternalShortcuts=H;this.aShortcutsDescriptions=s;};A.prototype._handleFocusBackToMe=function(e,i){this.bFocusOnShell=true;var f;if(i){f=window.document.getElementById(i);}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6";}f=window.document.getElementById("sapUshellHeaderAccessibilityHelper");}if(f){f.focus();this.fromOutside=false;}this.bFocusPassedToExternalHandlerFirstTime=true;};A.prototype.setIsFocusHandledByAnotherHandler=function(H){this.isFocusHandledByAnotherHandler=H;};A.prototype.sendFocusBackToShell=function(p){var e,i;if(typeof p==="string"){i=p;}else if(typeof p==="object"){e=p;}this._handleFocusBackToMe(e,i);};A.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);};A.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);};A.prototype._isFocusInInput=function(){var t=(document.activeElement||{}).tagName;return t==="INPUT"||t==="TEXTAREA";};A.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true;}}return false;};A.prototype._isFocusInSmartTable=function(){var e=document.activeElement;var c;for(;e!==document.body;e=e.parentNode){c=e.classList;if(c.contains("sapUiCompSmartTable")||c.contains("sapUiMdcTable")){return true;}}return false;};return new A();});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};H.prototype.hashChange=function(n){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};H.prototype.getHistoryLength=function(){return this._history.length;};return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/LogonFrameProvider',["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(B,D,H,C,a,r){"use strict";function c(){d();var o=new D({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new H("SAMLDialogFrame",{content:"<iframe id=SAMLDialogFrame src=\"\"></iframe>"}),rightButton:new B({text:r.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(a.last("/core/extension/SupportTicket")){var b=new C();b.setWidth("150px");b.setIcon("");o.setLeftButton(b);}o.open();t(true);return document.getElementById("SAMLDialogFrame");}function t(h){var b=document.getElementById("sap-ui-blocklayer-popup");if(b){if(h){b.classList.add("sapUshellSamlDialogHidden");}else{b.classList.remove("sapUshellSamlDialogHidden");}}}function d(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.destroy();}}function s(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.removeStyleClass("sapUshellSamlDialogHidden");t(true);}}return{create:c,show:s,destroy:d};},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(U,T,C,e,u,A,D,J,s,a,r,b,q,L,O,c,d,V,S,N){"use strict";var f=c.mvc.ViewType;var g=d.AppType;var R=U.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.96.0",dependencies:{version:"1.96.0",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:C.last("/core/spaces/enabled")?"pages":"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:C.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:C.last("/core/spaces/enabled")?"pages":"home"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:C.last("/core/home/featuredGroup/enable")?["sap/fiori/flp-controls.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",componentData:{},options:{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}}}}},init:function(){U.prototype.init.apply(this,arguments);var t=this,o=this.getRouter();var p=function(E){e.emit("trackHashChange","Shell-home");if(a.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.setIsInitialNavigation(false);});}var i=window.hasher.getHash();if(!C.last("/core/spaces/enabled")&&i.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.replaceHashWithoutNavigation("Shell-home");});}var H=r.i18n.getText("homeBtn_tooltip");var j=t.getShellConfig().rootIntent;var I=!j||u.isFlpHomeIntent(j);A.switchViewState(I?"home":"app",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(H);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();s.initializeAccessKeys();};o.getRoute("home").attachMatched(p);o.getRoute("openFLPPage").attachMatched(p);o.getRoute("appfinder-legacy").attachMatched(function(E){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(E){if(!C.last("/core/catalog/enabled")){L.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return;}e.emit("trackHashChange","Shell-appFinder");var i=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component")),j=E.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){A.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var k=i.getRouter();i.getRootControl().loaded().then(function(){k.parse(j["innerHash*"]||"");});A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();s.initializeAccessKeys();});var h=new J(D);h.setDefaultBindingMode("OneWay");this.setModel(h,"device");this.setModel(r.i18nModel,"i18n");}});R.prototype.createContent=function(){var p=new b(window.location.href).get("appState")||new b(window.location.href).get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"};w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=q.extend(true,o,v.config);q.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config.enablePersonalization=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config.enablePersonalization=C.last("/core/shell/enablePersonalization");}if(!v.config.enablePersonalization){v.config.moveEditHomePageActionToShellHeader=false;v.config.moveAppFinderActionToShellHeader=false;}}if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(j){var k=v.config.customViews[j];sap.ui.view(j,{type:k.viewType,viewName:k.viewName,viewData:k.componentData});});}var h=C.createModel("/core/shell/model",J);v.shellModel=h;if(!this.getComponentData().async){var i=sap.ui.view("mainShell",{type:f.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});i.setModel(h);this._oShellView=i;this.oShellModel=A.getElementsModel();i.loaded().then(function(j){sap.ushell.renderers.fiori2.utils.init(j.getController());this.shellCtrl=j.oController;}.bind(this));return i;}return V.create({id:"mainShell",viewName:"module:sap/ushell/renderers/fiori2/ShellAsync.view",viewData:v}).then(function(j){j.setModel(h);this._oShellView=j;this.oShellModel=A.getElementsModel();sap.ushell.renderers.fiori2.utils.init(j.getController());this.shellCtrl=j.getController();return j;}.bind(this));};R.prototype.createExtendedShellState=function(h,i){return A.shellElements().createExtendedShellState(h,i);};R.prototype.applyExtendedShellState=function(h,i){this.oShellModel.applyExtendedShellState(h,i);};R.prototype.showLeftPaneContent=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("paneContent",I);}else{this.oShellModel.addLeftPaneContent(I,false,j);}};R.prototype.showHeaderItem=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("headItems",I);}else{this.oShellModel.addHeaderItem(I,false,j);}};R.prototype.showRightFloatingContainerItem=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",I);}else{this.oShellModel.addRightFloatingContainerItem(I,false,j);}};R.prototype.showRightFloatingContainer=function(h){A.shellElements().setShellModelForApplications("showRightFloatingContainer",h);};R.prototype.showToolAreaItem=function(i,h,j){this.oShellModel.addToolAreaItem(i,true,h,j);};R.prototype.showActionButton=function(i,h,j){var B=[],k=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});k=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,h,j);}if(k.length){if(h){A.shellElements().addShellModelForApplications("actions",i);}else{this.oShellModel.addActionButton(i,false,j);}}};R.prototype.showFloatingActionButton=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,j);}};R.prototype.showHeaderEndItem=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,j);}};R.prototype.setHeaderVisibility=function(v,h,i){if(h){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,i);}};R.prototype.showSubHeader=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,j);}};R.prototype.showSignOutItem=function(h,i){if(h){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(h,i);}};R.prototype.showSettingsItem=function(h,i){this.oShellModel.showSettingsButton(h,i);};R.prototype.setFooter=function(F){this.shellCtrl.setFooter(F);};R.prototype.setShellFooter=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(l){i=new l(k);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=i.getId();t.shellCtrl.setFooter(i);o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.setFooterControl=function(h,o){var i=h.replace(/\./g,"/"),j=sap.ui.require(i),k,l=false;if(j){l=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}k=this.createItem(o,undefined,function(p){if(h){if(l){return new j(p);}var m=O.get(h||"");return new m(p);}L.warning("You must specify control type in order to create it");return undefined;});if(this.lastFooterId){this.removeFooter();}this.lastFooterId=k.getId();this.shellCtrl.setFooter(k);return k;};R.prototype.hideHeaderItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],h,j);}else{this.oShellModel.removeHeaderItem(i,h,j);}};R.prototype.removeToolAreaItem=function(i,h,j){if(typeof i==="string"){i=[i];}this.oShellModel.removeToolAreaItem(i,h,j);};R.prototype.removeRightFloatingContainerItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],h,j);}else{this.oShellModel.removeRightFloatingContainerItem(i,h,j);}};R.prototype.hideActionButton=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeActionButton([i],h,j);}else{this.oShellModel.removeActionButton(i,h,j);}};R.prototype.hideLeftPaneContent=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],h,j);}else{this.oShellModel.removeLeftPaneContent(i,h,j);}};R.prototype.hideFloatingActionButton=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],h,j);}else{this.oShellModel.removeFloatingActionButton(i,h,j);}};R.prototype.hideHeaderEndItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],h,j);}else{this.oShellModel.removeHeaderEndItem(i,h,j);}};R.prototype.hideSubHeader=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],h,j);}else{this.oShellModel.removeSubHeader(i,h,j);}};R.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var F=sap.ui.getCore().byId(this.lastFooterId);if(F){F.destroy();}this.lastFooterId=undefined;}};R.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};R.prototype.addShellSubHeader=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(I){this.showSubHeader(i.getId(),l,m);}o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(n){i=new n(k);if(I){t.showSubHeader(i.getId(),l,m);t.oShellModel.addElementToManagedQueue(i);}o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addSubHeader=function(h,o,i,j,k){var l=h.replace(/\./g,"/"),m=sap.ui.require(l),n,p=false;if(m){p=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}n=this.createItem(o,j,function(P){if(h){if(p){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showSubHeader(n.getId(),j,k);}return n;};R.prototype.addUserAction=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=l?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),n=p.aStates,v;if(k){i=sap.ui.getCore().byId(k.id);}if(i){o.resolve(i);}if(j){if(j==="sap.m.Button"){j="sap.ushell.ui.launchpad.ActionItem";}h=j.replace(/\./g,"/");sap.ui.require([h],function(w){var x;if(l){x=A.shellElements().getStateModelToUpdate();A.shellElements().setStateModelToUpdate(m);}else{x=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);}i=i||new w(k);if(!i.getActionType){i=new w(k);}if(I){t.showActionButton(i.getId(),l,n);}if(l){A.shellElements().setStateModelToUpdate(x);}else{t.oShellModel.setModelToUpdate(x,false);}o.resolve(i);});}else{v="You must specify control type in order to create it";L.warning(v);o.reject(v);}return o.promise();};R.prototype.addActionButton=function(h,o,i,j,k){var l,m,n=false;if(h==="sap.m.Button"){h="sap.ushell.ui.launchpad.ActionItem";}l=h.replace(/\./g,"/");var p=sap.ui.require(l);if(p){n=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}m=this.createItem(o,j,function(P){if(h){if(n){return new p(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showActionButton(m.getId(),j,k);}return m;};R.prototype.addFloatingButton=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(I){t.showFloatingActionButton(i.getId(),l,m);t.oShellModel.addElementToManagedQueue(i);}o.resolve(i);}}if(j){h=j.replace(/\./g,"/");}else{h="sap/m/Button";}sap.ui.require([h],function(n){i=new n(k);if(I){this.showFloatingActionButton(i.getId(),l,m);}o.resolve(i);});return o.promise();};R.prototype.addFloatingActionButton=function(h,o,i,j,k){var l,m,n,p=false;if(!h){h="sap.m.Button";}l=h.replace(/\./g,"/");m=sap.ui.require(l);if(m){p=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}n=this.createItem(o,j,function(P){if(h){if(p){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showFloatingActionButton(n.getId(),j,k);}return n;};R.prototype.addSidePaneContent=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(n){i=new n(k);if(I){t.oShellModel.addElementToManagedQueue(i);t.showLeftPaneContent(i.getId(),l,m);}o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addLeftPaneContent=function(h,o,i,j,k){var l=h.replace(/\./g,"/"),m=sap.ui.require(l),n;if(m){n=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}var p=this.createItem(o,j,function(P){if(h){if(n){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showLeftPaneContent(p.getId(),j,k);}return p;};R.prototype.addHeaderItem=function(h,o,i,j,k){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];j=arguments[2];k=arguments[3];}else{L.error("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var I=this.createItem(o,j,function(p){return new S(p);});if(i){this.showHeaderItem(I.getId(),j,k);}return I;};R.prototype.addRightFloatingContainerItem=function(o,i,h,j){var I=this.createItem(o,h,function(p){return new N(p);});if(i){this.showRightFloatingContainerItem(I.getId(),h,j);}return I;};R.prototype.addToolAreaItem=function(o,i,h,j){o.visible=!!i;var k=function(p){return new T(p);},I=this.createItem(o,h,k);this.oShellModel.addToolAreaItem(I.getId(),!!i,h,j);return I;};R.prototype.addHeaderEndItem=function(h,o,i,j,k){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];j=arguments[2];k=arguments[3];}var I=this.createItem(o,j,function(p){return new S(p);});if(i){this.showHeaderEndItem(I.getId(),j,k);}return I;};R.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};R.prototype.addEndUserFeedbackCustomUI=function(o,h){if(o||h){L.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.");}};R.prototype.addUserPreferencesEntry=function(h){return this.shellCtrl.addUserPreferencesEntry(h);};R.prototype.setHeaderTitle=function(t){this.shellCtrl.setHeaderTitle(t);};R.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};R.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};R.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};R.prototype.setFloatingContainerContent=function(o,h,i){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[o.getId()],h,i);};R.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};R.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};R.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};R.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};R.prototype.setFloatingContainerDragSelector=function(E){this.shellCtrl.setFloatingContainerDragSelector(E);};R.prototype.makeEndUserFeedbackAnonymousByDefault=q.noop;R.prototype.showEndUserFeedbackLegalAgreement=q.noop;R.prototype.LaunchpadState={App:"app",Home:"home"};R.prototype.createTriggers=function(t,h,i){this.oShellModel.createTriggers(t,h,i);};R.prototype.convertButtonsToActions=function(i,h,j){var p={},B,t=this;i.forEach(function(I){B=sap.ui.getCore().byId(I);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,h,j);});};R.prototype.createItem=function(o,h,i){var I;if(o&&o.id){I=sap.ui.getCore().byId(o.id);}if(!I){I=i(o);if(h){this.oShellModel.addElementToManagedQueue(I);}}return I;};R.prototype.addEntryInShellStates=function(n,h,i,j,o){this.oShellModel.addEntryInShellStates(n,h,i,j,o);};R.prototype.removeCustomItems=function(h,i,j,k){if(typeof i==="string"){this.oShellModel.removeCustomItems(h,[i],j,k);}else{this.oShellModel.removeCustomItems(h,i,j,k);}};R.prototype.addCustomItems=function(h,i,j,k){if(typeof i==="string"){this.oShellModel.addCustomItems(h,[i],j,k);}else{this.oShellModel.addCustomItems(h,i,j,k);}};R.prototype.addRightViewPort=function(v){this.shellCtrl.getViewPortContainer().addRightViewPort(v,false);};R.prototype.addLeftViewPort=function(v){this.shellCtrl.getViewPortContainer().addLeftViewPort(v,false);};R.prototype.getShellController=function(){return this.shellCtrl;};R.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState();};R.prototype.ViewPortContainerNavTo=function(n,t,h){return this.shellCtrl.getViewPortContainer().navTo(n,t,h);};R.prototype.switchViewPortStateByControl=function(){};R.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};R.prototype.setMeAreaSelected=function(h){this.shellCtrl.setMeAreaSelected(h);};R.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};R.prototype.setNotificationsSelected=function(h){this.shellCtrl.setNotificationsSelected(h);};R.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};R.prototype.addShellDanglingControl=function(o){this.shellCtrl.getView().addDanglingControl(o);};R.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};R.prototype.getEndUserFeedbackConfiguration=function(){return{};};R.prototype.reorderUserPrefEntries=function(h){return this.shellCtrl._reorderUserPrefEntries(h);};R.prototype.addUserProfilingEntry=function(h){this.shellCtrl.addUserProfilingEntry(h);};R.prototype.logRecentActivity=function(o){if(!o.appType){o.appType=g.APP;}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};R.prototype.setCurrentCoreView=function(h){this.currentCoreView=h;};R.prototype.getCurrentCoreView=function(){return this.currentCoreView;};R.prototype._isBuiltInIntent=function(p){if(!R._aBuiltInRoutes){var h=R.getMetadata().getRoutes();R._aBuiltInRoutes=h.reduce(function(j,o){return j.concat(o.pattern);},[]);}if(!p||!p.semanticObject||!p.action){return false;}var i=p.semanticObject+"-"+p.action;return R._aBuiltInRoutes.indexOf(i)!==-1;};return R;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',["sap/ushell/EventHub","sap/base/Log"],function(E,L){"use strict";function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}function a(t,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",t,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[t,u]);}function c(B,t,u){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[t,u]);}function d(B,t,u){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[t,u]);}function e(C,t,u){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[t,u]);}function f(t,u){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[t,u]);}function g(I,t,u){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[t,u]);}function h(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[t,u]);}function i(I,t,u){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[t,u]);}function j(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[t,u]);}function k(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}function l(){L.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.");}function m(t){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(t);}function n(t){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(t);}function o(t,v){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(t,v);}function p(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}function q(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}function r(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}function R(){this.addHeaderItem=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[t,u]);};this.setHeaderItemVisibility=function(I,t,T,u){var v=sap.ui.getCore().byId(I);if(u){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(v.getId(),T,[t]);}};this.addSubHeader=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[t,u]);};this.removeSubHeader=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[t,u]);};this.addHeaderEndItem=i;this.removeHeaderItem=b;this.removeHeaderEndItem=j;this.addEndUserFeedbackCustomUI=l;this.addOptionsActionSheetButton=c;this.removeOptionsActionSheetButton=d;this.setFooter=q;this.removeFooter=r;this.addUserPreferencesEntry=m;this.setHeaderTitle=n;this.setHeaderHiding=p;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=g;this.removeFloatingActionButton=h;this.setLeftPaneContent=e;this.removeLeftPaneContent=f;this.setLeftPaneVisibility=o;this.getConfiguration=k;}var s=new R();return s;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ushell/library","sap/ui/Device","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/core/routing/History","sap/ui/core/routing/HashChanger","sap/ui/core/mvc/Controller","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/bootstrap/SchedulingAgent","sap/ui/core/library","sap/ushell/performance/FesrEnhancer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/util/Storage","sap/m/InstanceManager","sap/ushell/services/Message","sap/ui/thirdparty/hasher","sap/ushell/renderers/fiori2/LogonFrameProvider","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices"],function(u,D,A,H,a,b,c,W,r,U,E,C,d,f,g,h,j,k,S,l,F,L,q,M,m,n,o,I,p,s,t,R){"use strict";var v=l.routing.HistoryDirection;var w=u.AppType;var x=true,P=false,y,z=a.getElementsModel(),B,G={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},N={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},J={};F.init();return h.extend("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var i=e.getParameters();var K=i.control;var O=i.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;}K.navTo("centerViewPort",O.getId(),"show");},onInit:function(){var e=this;var i=d.getOwnerComponentFor(this.getView()).getRouter();i.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);i.oHashChanger=g.getInstance();i.initialize(true);this.bEnableHashChange=true;x=true;var V=this.getView();var K=window.matchMedia("(min-width: 600px)"),O;var J=(V.getViewData()?V.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(J.statefulApplicationContainer);var Q=a.shellElements().model();j.init(J,Q);this.initShellModel(J,Q);var T=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=T;sap.ui.getCore().byId("shell").updateAggregation=T;sap.ui.getCore().byId("right-floating-container").updateAggregation=T;sap.ui.getCore().byId("shell-split").updateAggregation=T;O=function(Z){C.emit("/core/shell/model/isPhoneWidth",!Z.matches);};if(K.addListener){K.addListener(O);O(K);}V.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();y.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var X=[];if(J&&!J.moveContactSupportActionToShellHeader){X.push("ContactSupportBtn");}this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(J.appState,this.oViewPortContainer,J.rootIntent,J.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},X,J.cacheConfiguration);var Y=function(Z,$){this.oShellNavigation=Z;this.oShellNavigation.registerPrivateFilters($);this.oShellNavigation.registerExtraRouter(i);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(_){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return;}if(_.mParameters&&e.oShellNavigation.hashChanger.isInnerAppNavigation(_.mParameters.newHash,_.mParameters.oldHash)){a.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:_.mParameters});}a.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:_.mParameters.fullHash});});E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(Z){this.oURLParsing=Z[0];var $=Z[1];this._oAppLifeCycleService=Z[2];Y($,this._oAppLifeCycleService);}.bind(this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(B);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER&&a.getCurrentApplication().container.getApplicationType()===sap.ushell.ApplicationType.NWBC.type)){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}return undefined;};if(C.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);this.initShellUIService();if(!J.disableSignOut&&(J.sessionTimeoutTileStopRefreshIntervalInMinutes>0||J.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(J);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer");},_registerAndCreateEventHubDoables:function(){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),E.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),E.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),E.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),E.on("centerViewPort").do(this._centerViewPort.bind(this))];return e;},initShellModel:function(J,e){y=z;y.init(J,e);B=this.getView().getViewData().shellModel;C.emit("/core/shell/model/personalization",C.last("/core/shell/enablePersonalization"));},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(J.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});}.bind(this));}},onBackNavigationChange:function(e){a.setBackNavigationChanged(true);var i=e.getParameters().data,K=C.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(K.stateName==="minimal"||K.stateName==="standalone"||K.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i,true);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var V=this.getView()?this.getView().getViewData():{};J=V.config||{};if(J.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(J.rootIntent){window.setTimeout(function(){window.hasher.setHash(J.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var V=this.getView().getViewData();if(V){J=V.config||{};}if(J){if(J.states){z.extendStates(J.states);j.extendStates(J.states);}if(J.enableSetTheme!==undefined){B.setProperty("/setTheme",J.enableSetTheme);}B.setProperty("/contentDensity",J.enableContentDensity===undefined?true:J.enableContentDensity);if(J.migrationConfig!==undefined){B.setProperty("/migrationConfig",J.migrationConfig);}if(J.enableUserDefaultParameters!==undefined){B.setProperty("/userDefaultParameters",J.enableUserDefaultParameters);}if(J.disableHomeAppCache!==undefined){B.setProperty("/disableHomeAppCache",J.disableHomeAppCache);}B.setProperty("/enableHelp",C.last("/core/extension/enableHelp"));B.setProperty("/searchAvailable",(J.enableSearch!==false));}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(i){if(i===undefined){i=true;}B.setProperty("/enableTrackingActivity",i);E.emit("StepDone",e.stepName);}).catch(function(i){E.emit("StepFailed",e.stepName);L.error("Failed to ltracking activities state state from the personalization",i,"sap.ushell.components.flp.settings.FlpSettings");});},_getPreviousPageDirty:function(){return P;},_setPreviousPageDirty:function(e){P=e;},getModelConfiguration:function(){var V=this.getView().getViewData(),e,i;if(V){e=V.config||{};i=q.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){return t;},onExit:function(){this._aDoableObjects.forEach(function(i){i.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);D.media.detachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls();}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy();}j.destroy();k.destroy();U.deactivate();y.destroy();a.shellElements().clean();a.destroy();y=undefined;},_getCurrentAppRouter:function(){var e=this._oAppLifeCycleService,i=e&&e.getCurrentApplication&&e.getCurrentApplication(),K=i&&i.componentInstance;if(K){return K.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue;}var K=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!K){var O=this._getCurrentAppRouter();if(O){O.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom;}var K=sap.ushell.Container.getDirtyFlag();P=K;if(this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}var O=this.oURLParsing.parseShellHash(e);var Q=sap.ushell.Container.getRenderer()._isBuiltInIntent(O);var T=O.params["sap-ushell-navmode"];var V=T&&T[0];if(!D.browser.msie&&!Q&&(this.bExplaceNavigation||V==="explace"||V==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}if(K&&D.browser.msie){if(this._handleDirtyStateUserConfirm()){return this.oShellNavigation.NavigationFilterStatus.Continue;}return this._restoreHashUsingAction(i,"undo");}if(K){var X=f.getInstance().getHistoryStateOffset()<0;Promise.all([this._waitForHash(i),sap.ushell.Container.getServiceAsync("NavTargetResolution")]).then(function(Y){var Z=Y[1];if(Q){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}else{var $="#"+e;Z.resolveHashFragment($).then(function(_){var a1=_.targetNavigationMode==="explace"||_.targetNavigationMode==="frameless";var b1=X&&_.navigationMode===N.newWindowThenEmbedded;if(a1&&(!b1)){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}.bind(this));}}.bind(this));return this._restoreHashUsingAction(i,"undo");}return this.oShellNavigation.NavigationFilterStatus.Continue;},_waitForHash:function(e){var i="#"+e;return new Promise(function(K){var O=function(){var Q=i===decodeURIComponent(window.location.hash);if(Q){window.removeEventListener("hashchange",O);K();}};window.addEventListener("hashchange",O);});},_handleDirtyStateUserConfirm:function(){if(window.confirm(r.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});if(R.isBackNavigation()===true){R.resetBackNavigationFlag();}P=true;return true;}return false;},_restoreHashUsingAction:function(e,i){var K=this.oShellNavigation.wasHistoryEntryReplaced();var O=this._getRestoreHashStrategy(K,i);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(O,e);},_getRestoreHashStrategy:function(e,i){if(e){return{strategy:"replaceHash",stepCount:0};}var K;var O=f.getInstance().getHistoryStateOffset();if(O===undefined||O>=0){O=1;}else if(O<0){O=-1;}if(i==="undo"){if(O<0){K="historyForward";}else{K="historyBack";}this.sLastUndoStrategy=K;}else{switch(this.sLastUndoStrategy){case"historyBack":K="historyForward";break;case"historyForward":K="historyBack";break;default:K="replaceHash";}}return{strategy:K,stepCount:1};},_restoreHash:function(e,i){var K={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;s.replaceHash(i);break;default:throw new Error("Cannot execute unknown navigation strategy");}return K;},_isColdStart:function(){var e=sap.ushell.Container.getRenderer("fiori2");var i=!e||!e.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&i){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(V){this.bEnableHashChange=V;},_logRecentActivity:function(e){if(!this.oInitialEnableTrackingPromise){if(C.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve();}else{this.oInitialEnableTrackingPromise=new Promise(function(i,K){C.once("/core/shell/model/enableTrackingActivity").do(i);});}}return this.oInitialEnableTrackingPromise.then(function(){if(C.last("/core/shell/model/enableTrackingActivity")){return new Promise(function(i,K){b.addActivity(e).done(i).fail(K);});}L.warning("Tracking is not enabled",null,"sap.ushell.renderers.fiori2.Shell.controller");});},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,K,Q){M.start("FLP:ShellController.doHashChange","doHashChange","FLP");E.emit("trackHashChange",e);var T=sap.ui.getCore().byId("sapUshellDashboardPage");if(T){T.setBlocked(true);T.setBusy(true);}return this._doHashChange(this,e,i,O,K,Q).then(function(){M.end("FLP:ShellController.doHashChange");},function(V){M.end("FLP:ShellController.doHashChange");E.emit("doHashChangeError",Date.now());if(T){T.setBlocked(false);T.setBusy(false);}});},_doHashChange:function(e,i,K,O,Q,T){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var V,X,Y,Z;if(!this.bEnableHashChange){this.bEnableHashChange=true;return q.when();}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;return q.when();}if(T){e.hashChangeFailure(e.history.getHistoryLength(),T.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return q.when();}Z=new q.Deferred();if(I&&x){I.closeAllDialogs();I.closeAllPopovers();}x=true;X=e.history.getHistoryLength();Y=e.fixShellHash(i);e.history.hashChange(Y,O);e.currentAppBeforeNav=b.getCurrentApplication();e._resolveHashFragment(Y).then(function($,_){var a1=_?_.semanticObject+"-"+_.action:"",J=e._getConfig(),b1=!!($&&$.componentHandle),c1=$&&$.ui5ComponentName;$=e._calculateNavigationMode(_,$);e._handleEarlyNavigation(Y,K,$).then(function(d1){if(d1!==true){if(J&&J.applications&&J.applications[a1]){$.applicationConfiguration=J.applications[a1];}V=a.getInMemoryInstance(a1,Y,K,O);if(V.isInstanceSupported){e._initiateApplication($,Y,_,X,K);Z.resolve();return;}if(b1||!c1){e._initiateApplication($,Y,_,X,K);Z.resolve();return;}a.destroy(V.appId,V.container);a.removeApplication(a1);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:c1});M.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent($,_).done(function(){M.end("FLP:ShellController.UI5createComponent");e._initiateApplication($,Y,_,X,K);}).fail(function(e1){var f1=r.i18n.getText("cannot_load_ui5_component_details",[Y]),g1="Failed to load UI5 component for navigation intent "+Y;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(X,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:g1},{info:f1,technicalMessage:e1.message+"\n"+e1.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});}Z.resolve();});},function($){var _=r.i18n.getText("cannot_resolve_navigation_target_details",[Y]),a1="Failed to resolve navigation target: "+Y+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(X,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:a1},{info:_,fixedShellHash:Y,technicalMessage:$},"sap.ushell.renderers.fiori2.Shell.controller",false);Z.reject(a1);});return Z.promise();},_handleEarlyNavigation:function(e,i,K){var O=this,Q;return new Promise(function(T){O._openAppViaNWBC(K).then(function(V){if(V===true){K.sFixedShellHash=e;O.logOpenAppAction(K,i);Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(false);Q.setBusy(false);}T(true);return;}else{var X=K&&K.navigationMode===N.newWindow;if(X){K.sFixedShellHash=e;O.logOpenAppAction(K,i);O._openAppInNewWindowAndRestore(K);Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(false);Q.setBusy(false);}T(true);return;}if(C.last("/core/shell/model/migrationConfig")){J.migrationConfig=false;O.getModel().setProperty("/migrationConfig",false);if(K&&e==="#"){J.rootIntent="";}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(J.rootIntent);},0);T(true);return;}}T(false);return;}});});},_initiateApplication:function(e,i,K,O){M.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var Q=b.getMetadata(e),T=C.last("/core/extension/SupportTicket"),V;if(Q.title){window.document.title=Q.title;}else{L.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(T){window.setTimeout(function(){U.activate();},0);}try{V=this.oShellNavigation.isInitialNavigation();this.navigate(K,i,Q,e);}catch(X){if(X.stack){L.error("Application initialization (Intent: \n"+i+"\n failed due to an Exception:\n"+X.stack);}this.oShellNavigation.setIsInitialNavigation(V);this.hashChangeFailure(O,X.name,X.message,Q?Q.title:"",false);}M.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){M.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var i,K,O=this.oURLParsing.parseShellHash(e),Q=new q.Deferred(),J=this._getConfig();K=O&&O.params||{};if(O&&O.contextRaw&&O.contextRaw==="navResCtx"&&K&&K.additionalInformation&&(K.additionalInformation[0]||K.additionalInformation[0]==="")&&K.applicationType&&K.applicationType[0]&&K.url&&K.url[0]&&K.navigationMode&&(K.navigationMode[0]||K.additionalInformation[0]==="")){K=O.params||{};i={additionalInformation:K.additionalInformation[0],applicationType:K.applicationType[0],url:K.url[0],navigationMode:K.navigationMode[0]};if(K.title){i.text=K.title[0];}Q.resolve(i,O);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(T){Q.resolve(T.resolvedHashFragment,O);delete window["sap-ushell-async-libs-promise-directstart"];},function(T){Q.reject(T);delete window["sap-ushell-async-libs-promise-directstart"];});return Q.promise();}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(T){T.resolveHashFragment(e).done(function(i){b.setCurrentApplication(i);if(O&&(O.semanticObject+"-"+O.action)===J.rootIntent){i.navigationMode="embedded";}M.end("FLP:ShellController._resolveHashFragment");Q.resolve(i,O);}).fail(function(V){Q.reject(V);});});}return Q.promise();},_calculateNavigationMode:function(e,i){if(!i){return undefined;}var K=i.navigationMode;if(K===N.newWindowThenEmbedded){if(this._isColdStart()||(e.contextRaw&&e.contextRaw==="navResCtx")||f.getInstance().getDirection()===v.Backwards){i.navigationMode=N.embedded;}else{i.navigationMode=N.newWindow;if(!c.isNativeWebGuiNavigation(i)){i.url=this._getCurrentLocationHash();}}return i;}if(K===N.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(i)&&i.appCapabilities.navigationMode===N.embedded){i.navigationMode=N.embedded;return i;}i.navigationMode=N.replace;return i;}if(K===N.newWindow&&this._hasAppCapabilitiesNavigationMode(i)&&i.appCapabilities.navigationMode===N.embedded){i.url=this._getCurrentLocationHash();}return i;},_hasAppCapabilitiesNavigationMode:function(e){return c.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode");},_usesNavigationRedirect:function(e){if(!e){return new q.Deferred().reject().promise();}var i=this,K=e.getInstance({});if(K&&typeof K.navigationRedirect==="function"){var O=new q.Deferred();var Q=K.navigationRedirect();if(Q&&typeof Q.then==="function"){Q.then(function(T){L.warning("Performing navigation redirect to hash "+T);K.destroy();i.history.pop();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(V){V.toExternal({target:{shellHash:T}},undefined,false);O.resolve(true);});},function(){O.reject();});return O.promise();}}return new q.Deferred().reject().promise();},navigate:function(e,i,K,O){M.start("FLP:ShellController.navigate","navigate","FLP");var Q=(m(O)?O.navigationMode:null),T=this;if(Q===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve();}O=this._calculateNavigationMode(e,O);Q=(m(O)?O.navigationMode:null);if(Q===N.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false);}var V=this._usesNavigationRedirect(O.componentHandle),X=new Promise(function(Y,Z){V.then(null,function(){T._handleEmbeddedNavMode(i,e,K,O).then(function(){E.emit("CloseFesrRecord",Date.now());Y();});if(e&&e.contextRaw==="navResCtx"){L.error(" This path will no longer be supported in 1.40");T.bEnableHashChange=false;if(e&&e.params&&e.params.original_intent&&e.params.original_intent[0]){window.hasher.replaceHash(e.params.original_intent[0]);T.history._history[0]=e.params.original_intent[0];}}});M.end("FLP:ShellController.navigate");});return X;}if(Q===N.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(O.url);return Promise.resolve();}if(Q===N.newWindow){this._openAppInNewWindowAndRestore(O);return Promise.resolve();}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve();},_openAppViaNWBC:function(i){var K=this;return new Promise(function(O){var Q;if(i&&(c.isNativeWebGuiNavigation(i)||i.nativeNWBCNavigation)){Q=true;}else{Q=false;}if(Q===false){O(false);return;}var T=c.getPrivateEpcm(),V=G[i.navigationMode],X,Y,Z;if(c.hasNavigationModeCapability()){Y=V||G[N.embedded];}Z=K._appendUserIdToUrl("sap-user",i.url).then(function($){X=c.appendSapShellParam($);return new Promise(function(_){try{var a1=i.applicationType,b1=(i.appCapabilities&&i.appCapabilities.appFrameworkId),c1={},d1=[],e1,f1=function(){c1["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);c1["system-alias"]=i.systemAlias;return[{name:"sap-flp-params",value:JSON.stringify(c1)}];},g1=function g1(h1,d1){var i1=[],j1,k1=function(l1,m1){if(h1.indexOf(l1+"=")>0){j1=new RegExp("(?:"+l1+"=)([^&/]+)").exec(h1);if(j1&&j1.length===2){i1.push([j1[1]]);d1.push(m1);}}};k1("sap-iapp-state","sap-iapp-state-data");k1("sap-xapp-state","sap-xapp-state-data");k1("sap-intent-param","sap-intent-param-data");return i1;};if(a1==="GUI"||a1==="TR"||a1==="NWBC"||a1==="WDA"||b1==="GUI"||b1==="WDA"||b1==="NWBC"){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(h1){e1=g1(X,d1);if(e1.length>0){h1.getAppStateData(e1).then(function(i1){d1.forEach(function(j1,k1){if(i1[k1][0]){c1[j1]=i1[k1][0];}});_(f1());},function(i1){_();});}else{_(f1());}});}else{_();}}catch(e){_();}});});Z.then(function($){try{sap.ui.getCore().getEventBus().publish("launchpad","appOpening",i);if(!T.doNavigate(X,Y,undefined,undefined,undefined,undefined,undefined,$)){O(false);return;}sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",i);K._restorePreviousHashAfterOpenNewWindow(i);if(sap.ushell.Container.getRenderer().getCurrentCoreView()==="home"){K._toggleMenu(true);}O(true);}catch(e){if(e.stack){L.error("Application initialization failed due to an Exception:\n"+e.stack);}K.hashChangeFailure(K.history.getHistoryLength(),e.name,e.message,i.text,false);O(false);}});});},_appendUserIdToUrl:function(e,i){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(K){var O=K.getUser().getId(),Q=i.indexOf("?")>=0?"&":"?";return i+Q+e+"="+O;});},_restorePreviousHashAfterOpenNewWindow:function(e){this.history.pop();var V=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(V){V.destroy();}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);E.emit("openedAppInNewWindow",Date.now());},_openAppInNewWindowAndRestore:function(e){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",e);this._openAppNewWindow(e.url);sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);this._restorePreviousHashAfterOpenNewWindow(e);},_handleEmbeddedNavMode:function(e,i,K,O){M.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var J=this._getConfig(),Q,T,V,X;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(K);Q="-"+i.semanticObject+"-"+i.action;V=e==="#"||(J.rootIntent&&c.getBasicHash(J.rootIntent)===i.semanticObject+"-"+i.action);X=i?i.semanticObject+"-"+i.action:"";a.switchViewState(a.shellElements().calculateElementsState(V?"home":"app",O.applicationType,J.appState,O.explicitNavMode),undefined,Q);if(V){a.getShellUIService().setBackNavigation();}T=a.handleControl(X,Q,i,O,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e);if(this.currentAppBeforeNav){var Y;Y=a.getWebGuiV1StatefulContainer(this.currentAppBeforeNav.url);if(Y){Y.onApplicationOpened(O.applicationType);}}M.end("FLP:ShellController._handleEmbeddedNavMode");return T;},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===J.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,K,O,Q,T,V){var X,Y,Z,$=this;window.setTimeout(function(){window.setTimeout(function(){var _;if(C.last("/core/shell/model/currentState/stateName")==="app"){_=sap.ui.getCore().byId("shellAppTitle").getFocusDomRef().getAttribute("id");}A.sendFocusBackToShell(_);window.setTimeout(function(){$.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",O);L.info("app is being opened");},0);if(J.applications){O.applicationConfiguration=J.applications[i];}X=a.getAppContainer(Q,O,this._isColdStart(),K,V);O.sFixedShellHash=V;a.publishNavigationStateEvents(X,O,this.onAppAfterRendering.bind(this,O));X.addStyleClass("sapUshellApplicationPage");Y=X.getApplicationType();Z=X.getFrameworkId();if(Y==="GUI"||Y==="TR"||Y==="WDA"||Y==="NWBC"||Z==="GUI"||Z==="WDA"||Z==="NWBC"){X.addStyleClass("sapUShellApplicationContainerShiftedIframe");}if(!T){X.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){X.addStyleClass("sapUShellDockingContainer");X.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){X.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}X.toggleStyleClass("sapUshellDefaultBackground",!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(X);c.setPerformanceMark("FLP - addAppContainer");M.end("FLP:ShellController.getWrappedApplication");return X;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();a.setBackNavigationChanged(false);},onAppAfterRendering:function(e){var i=a.getShellUIService();window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);L.info("app was opened");},0);var K=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",K,true);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",K);c.setPerformanceMark("FLP.appOpened");if(i){a.initAppMetaParams();}y.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);y.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var e=this,i="sap.ushell",K=function(O,Q,T){e.oHomeApp=T.component;sap.ui.getCore().getEventBus().unsubscribe(i,"appComponentLoaded",K);};sap.ui.getCore().getEventBus().subscribe(i,"appComponentLoaded",K);},hashChangeFailure:function(i,e,K,O,Q){var T=sap.ui.getCore().byId("sapUshellDashboardPage");if(T){T.setBlocked(false);T.setBusy(false);}if(c.isPlainObject(e)){this.reportError(e.technicalMessage,K.technicalMessage,O);sap.ushell.Container.getServiceAsync("Message").then(function(V){V.show(p.Type.ERROR,e.message,{title:e.title,details:K});});}else{this.reportError(e,K,O);this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}x=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if((new n(window.location.href)).get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=Q;sap.ushell.Container.setDirtyFlag(P);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:P});this._windowHistoryBack(1);}},reportError:function(e,i,K){L.error(e,i,K);},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getServiceAsync("Message").then(function(i){i.error(e);});}},0);},fixShellHash:function(e){if(!e){e="#";}else if(e.charAt(0)!=="#"){e="#"+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=W.openURL(e);if(!i&&(!(D.browser.msie||D.browser.edge)&&!this._checkWindowLocationSearch("workzone-mobile-app=true"))){var K=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(K);}}},_checkWindowLocationSearch:function(T){return window.location.search.indexOf(T)>-1;},_windowHistoryBack:function(i){window.history.go(-1*i);},_windowHistoryForward:function(i){window.history.go(i);},_changeWindowLocation:function(e){window.location.href=e;},_toggleMenu:function(V){var e=sap.ui.getCore().byId("menuBarComponentContainer");var i=e&&e.getComponentInstance&&e.getComponentInstance();if(i&&i.setVisible){i.setVisible(V);}},onAppOpened:function(e,i,K){if(K.targetNavigationMode!=="explace"&&K.targetNavigationMode!=="frameless"){this._toggleMenu(false);}var O=this.oShellNavigation.hashChanger.getAppHash(),Q=O?"&/"+O:null;this.logOpenAppAction(K,Q);},externalSearchTriggered:function(e,i,K){C.emit("/core/shell/model/searchTerm",K.searchTerm);K.query=K.searchTerm;},onBeforeNavigate:function(e){var T=e.getParameter("to"),O=this.getOwnerComponent(),i=O.byId("Shell-home-component-container"),K=O.byId("pages-component-container"),Q=T===i||T===K;a.onBeforeNavigate(e.getParameter("fromId"),e.getParameter("from"),e.getParameter("toId"),e.getParameter("to"));this._toggleMenu(Q);},onAfterNavigate:function(e){var T=e.mParameters?e.mParameters.toId:undefined;var i=sap.ui.getCore().byId("sapUshellDashboardPage");if(i){i.setBlocked(false);i.setBusy(false);}a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),T,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{});},logOpenAppAction:function(e,i){var K=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(!K){return;}var O={};var Q=b.getMetadata(e);var T=e.sFixedShellHash;var V=T;if(i){V+=i;}O.title=Q.title;O.appType=w.APP;O.url=V;var X=this.oURLParsing.parseShellHash(T);if(X){O.appId="#"+this.oURLParsing.constructShellHash({semanticObject:X.semanticObject,action:X.action});}else{O.appId=T;}if(T&&T.indexOf("#Action-search")===-1){window.setTimeout(function(){this._logRecentActivity(O);}.bind(this),1500);}},_logSearchActivity:function(){if(C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging")){var T="";try{T=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm();}catch(e){L.error("Shell: last search term is not available to log a recent activity");}this._logRecentActivity({appId:"#Action-search",appType:w.SEARCH,title:T,url:"#"+window.hasher.getHash()});}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},handleNavMenuTitleVisibility:function(e){this.bNavMenuTitleVisible=false;if(e.name!=="Desktop"){this.bNavMenuTitleVisible=true;}y.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt();}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));E.emit("StepDone",e.stepName);},function(){E.emit("StepFailed",e.stepName);});},_onCoreResourcesComplementLoaded:function(){c.setPerformanceMark("SchedulingAgent-StartOfFlow");var V=this.getView();if(V){V.createPostCoreExtControls();}S._initialize();E.emit("startScheduler");},_loadRendererExtensionPlugins:function(e){var i=new n(window.location.href),K=i.get("sap-ushell-xx-pluginmode")==="delayed";function O(Q){function T(){E.emit("StepDone",e.stepName);}function V(){Q.loadPlugins("RendererExtensions").always(T);}if(!J.inHeaderLessOpt){if(K){window.setTimeout(V,5000);}else{V();}}else{T();}}sap.ushell.Container.getServiceAsync("PluginManager").then(O.bind(this));},_loadWarmupPlugins:function(e){sap.ushell.Container.getServiceAsync("PluginManager").then(function(i){i.loadPlugins("AppWarmup").always(function(){L.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");E.emit("StepDone",e.stepName);c.setPerformanceMark("SchedulingAgent-EndOfFlow");c.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow");});});},_loadCoreExt:function(){M.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},getCurrentViewportState:function(){return C.last("/core/shell/model/currentViewPortState");},_activateFloatingUIActions:function(i){if(i<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){q(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:q.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=q(e);}this._activateFloatingUIActions(q(window).width());var K;q(window).bind("resize",function(){clearTimeout(K);K=window.setTimeout(this._activateFloatingUIActions(q(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){M.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var K=q(window).width();if(e){e.docked={};var O=e.docked;if(e.moveX>=K-64){O.dockPos="right";O.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){O.dockPos="left";O.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(q("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e);}}}}M.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var K=q("#sapUshellFloatingContainerWrapper");K.css("height","100%");q("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked");},_onResizeWithDocking:function(){this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){M.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");q(q(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e);}M.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i){var e="sapUshellContainerDockedLaunchpad";var K=q("#sapUshellFloatingContainerWrapper");if(i){q("#canvas, #shell-header").addClass(e);K.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();}else{q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");}},_openDockingArea:function(e){var i=e?e.docked:false;var K=i?i.setIsDockingAreaOpen:false;if(K&&q("#DockinaAreaDiv").length==0){var O=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!O)||(i.dockPos==="left"&&e.clone&&O)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaRight\">").appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!O)||(i.dockPos==="right"&&e.clone&&O)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaLeft\">").appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!K){this._closeDockingArea();}},_closeDockingArea:function(){window.setTimeout(function(){q(".sapUshellShellDisplayDockingAreaRight").remove();q(".sapUshellShellDisplayDockingAreaLeft").remove();},150);},_isDock:function(){return q(".sapUshellContainerDocked").length!==0;},_isDockingAreaOpen:function(){return q(".sapUshellShellDisplayDockingAreaRight").length!==0||q(".sapUshellShellDisplayDockingAreaLeft").length!==0;},_handleOpenCanvas:function(e){var i=q("#canvas");var K=q(".sapUshellShellHead");var O=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!O)||(e.dockPos==="left"&&O)){i.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");K.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");}if((e.dockPos==="left"&&!O)||(e.dockPos==="right"&&O)){i.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");K.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_handleCloseCanvas:function(e){var i=q("#canvas");var K=q(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass("sapUshellContainer-Narrow-Right")){i.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");K.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass("sapUshellContainer-Narrow-Left")){i.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");K.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_setFloatingContainerHeight:function(e){var i=q(window).width();var K=q("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=i-64||e.clientX<64)){K.addClass(" sapUshellContainerDocked");K.addClass("sapUshellContainerDockedMinimizeCoPilot");q(K).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true));}}else if(!this._isDock()){q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,K){M.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var O=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,Q=new o(o.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),T=q(window).width(),V=q(window).height(),X=K.deltaX/T,Y=K.deltaY/V,Z=i.style.visibility,$=i.style.display,_=parseFloat(i.style.left.replace("%","")),a1=parseFloat(i.style.top.replace("%",""));if(typeof(_)==="number"){X=_+100*K.deltaX/T;}if(typeof(a1)==="number"){Y=a1+100*K.deltaY/V;}if(this._isDockingAreaOpen()){Y=0;}i.style.left=X+"%";i.style.top=Y+"%";i.style.position="absolute";i.style.display="block";i.visibility=Z;i.display=$;Q.put("floatingContainerStyle",i.style.cssText);if(O){O.handleDrop();if(!!K.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(K.clone.oDockedProp);}}M.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,K){M.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var O=K;O.style.display="none";if(window.getSelection){var Q=window.getSelection();try{Q.removeAllRanges();}catch(e){}}M.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var i="floating";if(e!=null){i=e.get("lastState");if(i==null){i="floating";}}return i;},setFloatingContainerVisibility:function(V){var e=this.getFloatingContainerState();if(e){if(e=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}else if(e.indexOf("docked")!=-1){var i=sap.ui.getCore().byId("viewPortContainer");if(V==true){var K=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(K.name=="Desktop"){var O=q("#sapUshellFloatingContainerWrapper");O.addClass("sapUshellContainerDocked");q("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");O.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}}else if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);}else{new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}}else{this._handleAnimations(false);if(i){i._handleSizeChange();}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left");}q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(e,i,K,O){y.setFloatingContainerContent(e,i,K,O);},getRightFloatingContainerVisibility:function(){var e=this.getView().getOUnifiedShell().getRightFloatingContainer(),i=e&&e.getVisible();return i;},setHeaderTitle:function(T){j.updateStates({propertyName:"title",value:T||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false});},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){L.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(J){var e=this,i=20000;sap.ui.require(["sap/ushell/SessionHandler"],function(K){e.oSessionHandler=new K(a);e.oSessionHandler.initLogout();window.setTimeout(function(){e.oSessionHandler.init({sessionTimeoutReminderInMinutes:J.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:J.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:J.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:J.enableAutomaticSignout});},i);});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),K=C.last("/core/userPreferences/entries");K.push(i);K=this._reorderUserPrefEntries(K);C.emit("/core/userPreferences/entries",K);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),K=C.last("/core/userPreferences/profiling")||[];K.push(i);C.emit("/core/userPreferences/profiling",K);},_getModelEntryFromEntryObject:function(e){return{entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper};},_reorderUserPrefEntries:function(e){var K=[],O=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"],Q,T={};for(var i=e.length-1;i>=0;i--){if(O.indexOf(e[i].id)!==-1){Q=e.splice(i,1)[0];T[Q.id]=Q;}}O.forEach(function(V){var X=T[V];if(X){K.push(X);}});return K.concat(e);},getModel:function(){return B;},_getConfig:function(){return J||{};},_getPersData:function(e){var i=d.getOwnerComponentFor(this.getView());return new Promise(function(K,O){sap.ushell.Container.getServiceAsync("Personalization").then(function(Q){var T={keyCategory:Q.constants.keyCategory.FIXED_KEY,writeFrequency:Q.constants.writeFrequency.LOW,clientStorageAllowed:true};var V=Q.getPersonalizer(e,T,i);V.getPersData().then(K).fail(O);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit("showMeArea",e);},getMeAreaSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit("showNotifications",e);},getNotificationsSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="RightCenter";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',["sap/ui/core/library","sap/ushell/library","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ui/core/mvc/XMLView"],function(c,l,D,H,S,A,r,u,C,E,J,q,a,X){"use strict";function s(i,o){return sap.ui.getCore().byId(o.getObject());}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(o){this.oController=o;var v=this.getViewData()||{},b=v.config||{};this.oConfig=b;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(b);var U=sap.ui.xmlfragment("sap.ushell.ui.ShellLayout",o),d=this.createShellHeader(b,this.getViewData().shellModel);U.setHeader(d);d.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var e=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});e.updateAggregation=this.updateShellAggregation;e.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(e);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));u.setPerformanceMark("FLP - Shell.view rendering started!");return U;},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],b=0,P;for(var i=0;i<5;i++){P=p[i];if(b===3){o[P]=false;}else if(o[P]){b++;}}}},createShellHeader:function(o,b){var d=C.createModel("/core/shellHeader",J),h=new S(),e;h.onInit();e=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",h);H.init(o,h,b);if(D.system.desktop){e.setAccessKeyHandler(a);}if(o.appState==="embedded"){e.setNoLogo();}e.setModel(d);e.setModel(r.i18nModel,"i18n");e.createUIArea();return e;},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(F,b){var o=sap.ui.getCore().byId("shell");if(!o){return;}var d=new F({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){d.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));d.addEventDelegate({onsapskipforward:function(g){g.preventDefault();a.sendFocusBackToShell(g);}});}d.setModel(o.getModel());this.addDanglingControl(d);var e=new b({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});e.updateAggregation=this.updateShellAggregation;var f=this.getOUnifiedShell();f.setFloatingContainer(d);f.setFloatingActionsContainer(e);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var o=function(b){if(b.isEnabled()){this._initializeAllMyAppsView();}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},_initializeAllMyAppsView:function(){X.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(b){var m=this.getModel();b.setModel(m);b.setModel(r.i18nModel,"i18n");b.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(b);}.bind(this));},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],o=this.getMetadata().getJSONKeys()[n],d;q.each(this[o._sGetter](),function(i,v){this[o._sRemoveMutator](v);}.bind(this));q.each(b.binding.getContexts(),function(i,v){d=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[o._sMutator](d);}.bind(this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/ShellAsync.view',["sap/ui/core/library","sap/ushell/library","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ui/core/mvc/View","sap/ui/core/mvc/XMLView","sap/ui/core/Fragment"],function(c,l,D,H,S,A,r,u,C,E,J,q,a,V,X,F){"use strict";function s(i,o){return sap.ui.getCore().byId(o.getObject());}return V.extend("sap.ushell.renderers.fiori2.ShellAsync",{createContent:function(o){this.oController=o;var v=this.getViewData()||{},b=v.config||{};this.oConfig=b;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(b);return Promise.all([this.createShellLayout(o),this.createShellHeader(b,this.getViewData().shellModel)]).then(function(R){var U=R[0];var d=R[1];U.setHeader(d);d.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var e=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});e.updateAggregation=this.updateShellAggregation;e.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(e);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));u.setPerformanceMark("FLP - Shell.view rendering started!");return U;}.bind(this));},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],b=0,P;for(var i=0;i<5;i++){P=p[i];if(b===3){o[P]=false;}else if(o[P]){b++;}}}},createShellLayout:function(o){return F.load({name:"sap.ushell.ui.ShellLayout",controller:o});},createShellHeader:function(o,b){var d=C.createModel("/core/shellHeader",J),h=new S();h.onInit();return F.load({name:"sap.ushell.ui.ShellHeader",controller:h}).then(function(e){H.init(o,h,b);if(D.system.desktop){e.setAccessKeyHandler(a);}if(o.appState==="embedded"){e.setNoLogo();}e.setModel(d);e.setModel(r.i18nModel,"i18n");e.createUIArea();return e;});},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(b,d){var o=sap.ui.getCore().byId("shell");if(!o){return;}var e=new b({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){e.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));e.addEventDelegate({onsapskipforward:function(h){h.preventDefault();a.sendFocusBackToShell(h);}});}e.setModel(o.getModel());this.addDanglingControl(e);var f=new d({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});f.updateAggregation=this.updateShellAggregation;var g=this.getOUnifiedShell();g.setFloatingContainer(e);g.setFloatingActionsContainer(f);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var o=function(b){if(b.isEnabled()){this._initializeAllMyAppsView();}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},_initializeAllMyAppsView:function(){X.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(b){var m=this.getModel();b.setModel(m);b.setModel(r.i18nModel,"i18n");b.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(b);}.bind(this));},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],o=this.getMetadata().getJSONKeys()[n],d;q.each(this[o._sGetter](),function(i,v){this[o._sRemoveMutator](v);}.bind(this));q.each(b.binding.getContexts(),function(i,v){d=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[o._sMutator](d);}.bind(this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/resources',["sap/ui/model/resource/ResourceModel"],function(R){"use strict";var r={};r.getTranslationModel=function(l){var o;if(r._oResourceModel){o=r._oResourceModel;}else{o=new R({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources.properties"),bundleLocale:l});r._oResourceModel=o;}return o;};r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);
sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=!!((!S||(S.enabled!==false)));return e;};this.isHomePageAppsEnabled=function(){return!!((!S||(S.showHomePageApps!==false)));};this.isCatalogAppsEnabled=function(){return!!((!S||(S.showCatalogApps!==false)));};this.isExternalProviderAppsEnabled=function(){return!!((!S||(S.showExternalProviders!==false)));};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(U,u,E,L,M,q,O,R,r,I,m){"use strict";var B=m.ButtonType;function A(){var o={},a=true,c=null,b=[],d=[];E.on("AppRendered").do(e.bind(this));function e(){a=false;while(d.length>0){d.shift()();}}this.addActivity=function(g){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("UserRecents").then(function(h){h.addActivity(g).done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return d;};this.getCurrentApplication=function(){return c;};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(g){if(!g){g=c;}if(g){var h=hasher&&hasher.getHash?hasher.getHash():"";var k=this._getMemoizationKey(h);return this._getMetadata(g,k);}return{};};this._getMemoizationKey=function(C){var h=C.split("?");var i=h[0];var p=h[1];p=this._processParams(p);if(p){return i+p;}var P=U.parseShellHash(C);i=P?P.semanticObject+"-"+P.action:"";return i;};this._processParams=function(p){if(p){var P="";var g={};p.split("&").forEach(function(i){var C=i.split("=");g[C[0]]=C[1];});var s=Object.keys(g).sort();var h="";s.forEach(function(k,i){P=i?"&":"?";h+=P+k+"="+g[k];});return h;}return"";};this._getMetadata=function(g,k){if(!(o.hasOwnProperty(k))||!o[k].complete){this.addMetadata(g,k);}if(!o[k]){o[k]={complete:false};}if(!o[k].title){o[k].title=g.text||r.i18n.getText("default_app_title");}return o[k];};this.setCurrentApplication=function(g){c=g;d.splice(0);};this.setHeaderHiding=function(){L.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(g){if(a){d.push(function(){f(g);});}else{f(g);}};function f(g){var i,h=[],j=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<g.length;i++){var C=g[i];h.push(C.getId());C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(B.Unstyled);}if(sap.ushell.Container&&j){if(b.length){j.hideActionButton(b,true);}b=h;j.showActionButton(h,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){M.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new q.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",S=sap.ui.require(s);if(S){return new S();}L.warning("sap.ushell.services.AppConfiguration.getSettingsControl is deprecated. Use getSettingsControlasync instead.");L.error("sap.ushell.services.AppConfiguration.getSettingsControl: sap.ushell.ui.footerbar.SettingsButton must be loaded before use.");return undefined;};this.getApplicationName=function(g){var h,s=(g&&g.additionalInformation)||null;if(s){h=/^SAPUI5\.Component=(.+)$/i.exec(s);if(h){return h[1];}}return null;};this.getApplicationUrl=function(g){var s=(g&&g.url)||null,S="P_TCODE",i;if(s){if(g.applicationType==="NWBC"&&s.indexOf(S)){return s;}i=s.indexOf("?");if(i>=0){s=s.slice(0,i);}if(s.slice(-1)!=="/"){s+="/";}}return s;};this.getPropertyValueFromConfig=function(C,p,g){var v;if(g&&C.hasOwnProperty(p+"Resource")){v=g.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var s=p[P].manifestEntryKey,g=p[P].path,h=l.getManifestEntry(s);return O.get(g||"",h);};this.addMetadata=function(g,k){try{var C=this.getApplicationName(g),s=this.getApplicationUrl(g),l,h,p={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}},i,j,n,t,P,v,w,x=g&&g.componentHandle;if(k){if(!(o.hasOwnProperty(k))){o[k]={complete:false};}if(!o[k].complete){if(x){l=x.getMetadata();}else if(C){L.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){h=l.getConfig();t=(l.getManifest()!==undefined);o[k].complete=true;if(h){v=h.resourceBundle||"";if(v){if(v.slice(0,1)!=="/"){v=s+v;}w=R.create({url:v,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(t){o[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(h&&o[k][P]===undefined){o[k][P]=this.getPropertyValueFromConfig(h,P,w);}}}o[k].version=l.getVersion();o[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(g.applicationType)){var W="/~canvas;window=app/wda/",y=g.url.indexOf(W),z="/sap/bc/webdynpro/sap/",D="/bc/gui/sap/its/webgui",F=g.url.indexOf(D);if(y>=0){o[k].technicalName=g.url.substring((y+W.length),g.url.indexOf("/",(y+W.length)));}if(g.url.indexOf(z)>=0){o[k].technicalName=new RegExp(z+"(.*)[?]").exec(g.url)[1];}o[k].complete=true;if(F>=0){var G="etransaction=",H=g.url.indexOf(G,F+D.length),J=g.url.indexOf("&",H),K=(J>=0)?J:g.url.length;o[k].technicalName=decodeURIComponent(g.url.substring(H+G.length,K))+" (TCODE)";}}else{L.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}i=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];j=(s&&s[s.length-1]==="/")?s.substring(0,s.length-1):s;n=function(s){if(s.match(/^https?:\/\/.*/)){return false;}return s&&s[0]!=="/";};i.forEach(function(Q){var S=o[k][Q],T=null;if(S){T=n(S)?j+"/"+S:S;}o[k][Q]=T;});}}catch(N){L.warning("Application configuration could not be parsed");}};}return new A();},true);
sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters","sap/ushell/AppInfoParameters","sap/base/Log","sap/ushell/components/pages/controller/PagesAndSpaceId"],function(E,T,A,L,P){"use strict";var S="appLoaded";function a(o,c,p,C){var b,e,v;this.getCurrentApplication=function(){return b;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};this.prepareCurrentAppObject=function(d,f,h,g){s(d,f,h,g);};this.reloadCurrentApp=function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(d){try{d.hashChanger.treatHashChanged(window.hasher.getHash());}catch(f){L.error("Error when trying to re-load the current displayed application",f,"sap.ushell.services.AppLifeCycle");}});};e=new E();if(sap.ushell.Container.inAppRuntime()===false){r();}function r(){v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){L.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(d){var f,g,h,i,j,H=false;if(d.mParameters.toId.indexOf("applicationShellPage")===0){g=d.mParameters.to.getApp();}else if(d.mParameters.toId.indexOf("application")===0){g=d.mParameters.to;}if(g&&typeof g.getComponentHandle==="function"&&g.getComponentHandle()){i=g.getComponentHandle().getInstance();}else if(g){f=g.getAggregation("child");if(f){i=f.getComponentInstance();}}else{i=sap.ui.getCore().getComponent(d.mParameters.to.getComponent());}if(i){j=i.getId();H=j.indexOf("Shell-home-component")!==-1||j.indexOf("pages-component")!==-1||j.indexOf("Shell-appfinder-component")!==-1;}h=g&&typeof g.getApplicationType==="function"&&g.getApplicationType();if((!h||h==="URL")&&i){h="UI5";}s(h,i,H,g);});}function s(d,f,h,g){b={applicationType:d,componentInstance:f,homePage:h,getTechnicalParameter:function(i){return T.getParameterValue(i,f,g,d);},getIntent:function(){var H=hasher&&hasher.getHash();if(!H){return Promise.reject("Could not identify current application hash");}var i=sap.ushell.Container.getServiceAsync("URLParsing");return i.then(function(j){return j.parseShellHash(H);});},getInfo:function(i){return A.getInfo(i,b);},getSystemContext:function(){var i=sap.ushell.services.AppConfiguration.getCurrentApplication()||{};var j=i.contentProviderId||"";return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(k){return k.getSystemContext(j);});}};setTimeout(function(){e.fireEvent(S,b);},0);}}a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(W,S,A,a,b,u,q){"use strict";function g(C){return u.isDefined(C)&&u.isDefined(C.transient)?!!C.transient:true;}function c(o,C,p,e){this._oConfig=e&&e.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,e);}c.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};c.prototype.getAppState=function(k){var D=new q.Deferred(),t=this,o;this._loadAppState(k).done(function(k,s,p,P){o=new A(t,k,false,s,undefined,undefined,undefined,p,P);D.resolve(o);}).fail(function(){o=new A(t,k);D.resolve(o);});return D.promise();};c.prototype._getGeneratedKey=function(t){var k=u.generateRandomKey();if(t){k=("TAS"+k).substring(0,41);}else{k=("AS"+k).substring(0,40);}return k;};c.prototype.createEmptyAppState=function(C,t,p,P){var o,s="",e="",U=u.isDefined(t)?t:g(this._oConfig),k=this._getGeneratedKey(U);if(p!==undefined&&!this.isPersistencyMethodSupported(p)){p=undefined;P=undefined;}if(C){if(!(C instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getName==="function"){s=C.getMetadata().getName()||"";}if(!s&&C.getMetadata&&C.getMetadata().getComponentName){s=C.getMetadata().getComponentName();}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getManifest==="function"&&typeof C.getMetadata().getManifest()==="object"&&typeof C.getMetadata().getManifest()["sap.app"]==="object"){e=C.getMetadata().getManifest()["sap.app"].ach||"";}}if(U===true){p=P=undefined;}else if(p===undefined&&this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;P=undefined;}o=new A(this,k,true,undefined,s,e,U,p,P);return o;};c.prototype.createEmptyUnmodifiableAppState=function(){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};c.prototype._saveAppState=function(k,D,s,C,t,p,P){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);if(U){p=undefined;P=undefined;}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;}else{p=undefined;}P=undefined;}}return this._oAdapter.saveAppState(k,e,D,s,C,U,p,P);};c.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};c.prototype.deleteAppState=function(k){return this._oAdapter.deleteAppState(k);};c._getSequentializer=function(){return new a();};c.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods();}return[];};c.prototype.isPersistencyMethodSupported=function(p){var s=this.getSupportedPersistencyMethods();if(s.length>0&&p!==undefined){return(s.indexOf(p)>=0);}return false;};c.prototype.setAppStateToPublic=function(e){var x=d(e,"sap-xapp-state"),i=d(e,"sap-iapp-state"),X=new q.Deferred().resolve(),I=new q.Deferred().resolve(),D=new q.Deferred(),s=undefined,f=undefined;if(x!==undefined){X=this.makeStatePersistent(x,b.PublicState).done(function(n){if(x!==n){e=e.replace(x,n);s=n;}}).fail(D.reject);}if(i!==undefined){I=this.makeStatePersistent(i,b.PublicState).done(function(n){if(i!==n){e=e.replace(i,n);f=n;}}).fail(D.reject);}q.when(X,I).done(function(){D.resolve(e,x,i,s,f);});return D.promise();};function d(U,p){var r=new RegExp("(?:"+p+"=)([^&/]+)"),R=r.exec(U),v;if(R&&R.length===2){v=R[1];}return v;}c.prototype.makeStatePersistent=function(k,p,e){var D=new q.Deferred();if(this.getSupportedPersistencyMethods().length===0){return D.resolve(k);}if(this.isPersistencyMethodSupported(p)){this.getAppState(k).done(function(o){if(o._iPersistencyMethod!==p){o.bTransient=false;o._iPersistencyMethod=p;o._oPersistencySettings=e;if(k.startsWith("TAS")){k=k.substring(1,k.length);}this._saveAppState(k,o._sData,o._sAppName,o._sACHComponent,false,p,e).done(function(){D.resolve(k);}).fail(D.reject);}else{D.resolve(k);}}.bind(this)).fail(D.reject);}else{D.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+p);}return D.promise();};c.WindowAdapter=W;c.hasNoAdapter=false;return c;},true);
sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/navigationMode","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(L,i,O,E,A,C,N,_,a,b,c,d,f,g,h,j,k,l,m,T,U,n){"use strict";function p(o,e,P,s){this._init.apply(this,arguments);}p.prototype._init=function(o,e,P,s){this._iLogId=0;if(!this._implementsServiceInterface(o)){L.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new b(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=s;this._oAdapter=o;};p.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};p.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var s=n.parseShellHash(F);if(!s||!s.semanticObject||!s.action){return undefined;}return[{semanticObject:s.semanticObject,action:s.action}];};p.prototype.resolveHashFragment=function(H){var t=this,D=new jQuery.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),s=this._extractInboundFilter(H);this._oInboundProvider.getInbounds(s).then(function(I){t._resolveHashFragment(H,B,I).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype.resolveTileIntent=function(H){var t=this,D=new jQuery.Deferred(),s=this._extractInboundFilter(H);this._oInboundProvider.getInbounds(s).then(function(I){t._resolveTileIntent(H,undefined,I).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype.resolveTileIntentInContext=function(I,H){var o,D=new jQuery.Deferred();o=a.createIndex(I.concat(k.getInbounds()));this._resolveTileIntent(H,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};p.prototype._resolveHashFragment=function(H,B,I){var t=this,D=new jQuery.Deferred(),F=H.indexOf("#")===0?H:"#"+H,s=n.parseShellHash(F);if(s===undefined){L.error("Could not parse shell hash '"+H+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,I,{bExcludeTileInbounds:true}).fail(function(e){L.error("Could not resolve "+H,"_getMatchingInbounds promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");D.reject(e);}).done(function(M){var e;if(M.length===0){L.warning("Could not resolve "+H,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}M=t._applySapNavigationScopeFilter(M,s);e=M[0];if(L.getLevel()>=L.Level.DEBUG){var u=function(K,v){return(this[K]===undefined)?"<undefined>":v;};var r=function(o,v){return(o==="_original")?undefined:u.call(this,o,v);};var q=JSON.stringify(e,r,"   ");L.debug("The following target will now be resolved",q,"sap.ushell.services.ClientSideTargetResolution");}t._resolveSingleMatchingTarget(e,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};p.prototype._applySapNavigationScopeFilter=function(M,s){var S=s&&s.params&&s.params["sap-navigation-scope-filter"];if(!S){return M;}var F=M.filter(function(o){var e=O.get("inbound.signature.parameters",o);var q=e&&e["sap-navigation-scope"];if(q){return S[0]===q.defaultValue.value;}return undefined;});return F.length>0?F:M;};p.prototype._resolveSingleMatchingTarget=function(M,B,F){var t=this,D=new jQuery.Deferred(),I=n.parseShellHash(F),s=[I.semanticObject,I.action].join("-"),e=(M.inbound.resolutionResult||{}).applicationType;var o;if(this._oAdapter.resolveSystemAlias){o=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var H=!!M.inbound.templateContext;var q=A.getEasyAccessMenuResolver(s,e);if(q&&!H){q(I,M,o,A.WDA.enableWdaCompatibilityMode).then(function(R){var u=N.compute(O.get("inbound.resolutionResult.applicationType",M),(M.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(M.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(m.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));U.shallowMergeObject(R,u);R.inboundPermanentKey=M.inbound.permanentKey||M.inbound.id;D.resolve(R);},function(u){D.reject(u);});return D.promise();}var r=this._getReservedParameters(M);c.mapParameterNamesAndRemoveObjects(M);sap.ushell.Container.getServiceAsync("AppState").then(function(u){l.mixAppStateIntoResolutionResultAndRename(M,u).done(function(M){var R=function(){return t._constructFallbackResolutionResult.call(t,M,B,F);};if(A[e]){R=A[e].generateResolutionResult;}delete M.intentParamsPlusAllDefaults["sap-tag"];delete M.mappedIntentParamsPlusSimpleDefaults["sap-tag"];M.mappedDefaultedParamNames=M.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var v=O.get("inbound.resolutionResult.url",M);d.executePrelaunchOperations(M,r["sap-prelaunch-operations"]).then(function(){return R(M,v,o);}).then(function(w){w.reservedParameters=r;w.inboundPermanentKey=M.inbound.permanentKey||M.inbound.id;return w;}).then(function(w){L.debug("Intent was resolved to the following target",JSON.stringify(M.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");U.shallowMergeObject(M.resolutionResult,w);D.resolve(M.resolutionResult);},function(w){if(typeof w==="string"&&w.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,M,B,F).then(function(x){U.shallowMergeObject(M.resolutionResult,x);D.resolve(M.resolutionResult);},D.reject.bind(D));}else{D.reject(w);}});});});return D.promise();};p.prototype._getReservedParameters=function(M){var r=T.getParameters({injectFrom:"startupParameter"}).map(function(P){return P.name;});var R=j.extractParameters(r,M.intentParamsPlusAllDefaults);T.getParameters({injectFrom:"inboundParameter"}).forEach(function(P){var s=P.name;var S=M.inbound&&M.inbound.signature&&M.inbound.signature.parameters;if(S&&Object.keys(S).length>0){var o=S[s];var I=o&&o.defaultValue&&o.defaultValue.hasOwnProperty("value");var e=o&&o.filter&&o.filter.hasOwnProperty("value");if(o&&(e||I)){if(I){R[s]=o.defaultValue.value;}else{R[s]=o.filter.value;}}else{delete R[s];}delete M.intentParamsPlusAllDefaults[s];var q=M.defaultedParamNames.indexOf(s);if(q>=0){M.defaultedParamNames.splice(q,1);}}});return R;};p.prototype._resolveTileIntent=function(H,B,I){var t=this,D=new jQuery.Deferred(),F=H.indexOf("#")===0?H:"#"+H,s=n.parseShellHash(F);if(s===undefined){L.error("Could not parse shell hash '"+H+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,I,{bExcludeTileInbounds:false}).fail(function(e){L.error("Could not resolve "+H,"_getMatchingInbounds promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");D.reject(e);}).done(function(M){var o;if(M.length===0){L.warning("Could not resolve "+H,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}o=M[0];t._resolveSingleMatchingTileIntent(o,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};p.prototype._resolveSingleMatchingTileIntent=function(M,B,F){var D=new jQuery.Deferred(),s=(M.inbound.resolutionResult||{}).applicationType,t=this;var e;if(this._oAdapter.resolveSystemAlias){e=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}c.mapParameterNamesAndRemoveObjects(M);sap.ushell.Container.getServiceAsync("AppState").then(function(o){l.mixAppStateIntoResolutionResultAndRename(M,o).done(function(M){var r=function(){return t._constructFallbackResolutionResult.call(t,M,B,F);};if(A[s]){r=A[s].generateResolutionResult;}delete M.intentParamsPlusAllDefaults["sap-tag"];delete M.mappedIntentParamsPlusSimpleDefaults["sap-tag"];M.mappedDefaultedParamNames=M.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var q=O.get("inbound.resolutionResult.url",M);r(M,q,e).then(function(R){U.shallowMergeObject(M.resolutionResult,R);var u=E({},M.inbound.tileResolutionResult);u.startupParameters=M.effectiveParameters;u.navigationMode=M.resolutionResult.navigationMode;if(!u.navigationMode){u.navigationMode=N.getNavigationMode(M.resolutionResult);}D.resolve(u);L.debug("Tile Intent was resolved to the following target",JSON.stringify(u,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(u){D.reject(u);});});});return D.promise();};p.prototype._constructFallbackResolutionResult=function(M,B,F){var e={},D;Object.keys(M.intentParamsPlusAllDefaults).forEach(function(P){if(Array.isArray(M.intentParamsPlusAllDefaults[P])){e[P]=M.intentParamsPlusAllDefaults[P];}});D=M.mappedDefaultedParamNames||M.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){L.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}L.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,E({},M.inbound),e).done(function(o){var q={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(P){if(o.hasOwnProperty(P)){q[P]=o[P];}});r(q);}).fail(R.bind(null));});};p.prototype.getDistinctSemanticObjects=function(){var D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(I){var s={};I.getAllInbounds().forEach(function(o){if(typeof o.semanticObject==="string"&&o.semanticObject!=="*"&&!o.hideIntentLink&&o.semanticObject.length>0){s[o.semanticObject]=true;}});D.resolve(Object.keys(s).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype.getLinks=function(o){var e,t=this,s,P,I,D=new jQuery.Deferred(),q;if(arguments.length===1&&i(arguments[0])){e=arguments[0];q=E({},e);["action","semanticObject"].forEach(function(r){if(e.hasOwnProperty(r)){q[r]=e[r];}});if(q.appStateKey){q.params=q.params||{};q.params["sap-xapp-state"]=[q.appStateKey];delete q.appStateKey;}}else if(arguments.length<=3){L.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");s=arguments[0];P=arguments[1];I=arguments[2];q={semanticObject:s,params:P,ignoreFormFactor:I};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(r){t._getLinks(q,r).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype._validateGetSemanticObjectLinksArgs=function(o){var s=o.semanticObject,e=o.action,I=!o.hasOwnProperty("action");if(typeof s!=="undefined"||I){if(typeof s!=="string"){L.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(s)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(I&&s.match(/^\s+$/)){L.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!I&&s.length===0){L.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof e!=="undefined"){if(typeof e!=="string"){L.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(e.length===0){L.error("invalid input for _getLinks","the action must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};p.prototype._getLinks=function(o,I){var s=o.semanticObject,e=o.action,P=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,q=o.ignoreFormFactor,S=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){L.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported","getLinks results will be sorted by '"+S+"'","sap.ushell.services.ClientSideTargetResolution");}var r={bExcludeTileInbounds:true};var u=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){r.tags=o.tags;}if(u){return new jQuery.Deferred().reject(u).promise();}if(s==="*"){return jQuery.when([]);}function v(z){var B=n.paramsToString(z);return B?"?"+B:"";}var D=new jQuery.Deferred(),F=U.getFormFactor(),x=n.parseParameters(v(P)),y={semanticObject:(s===""?undefined:s),action:e,formFactor:(q?undefined:F),params:x};if(t){y.treatTechHintAsFilter=true;}this._getMatchingInbounds(y,I,r).done(function(M){var z={},R=M.map(function(G){var J=s||G.inbound.semanticObject,K="#"+J+"-"+G.inbound.action,Q;if(J==="*"){return undefined;}if(G.inbound.action==="*"){return undefined;}if(G.inbound&&G.inbound.hasOwnProperty("hideIntentLink")&&G.inbound.hideIntentLink===true){return undefined;}if(!z.hasOwnProperty(K)){z[K]={matchingInbound:G.inbound,count:1};if(G.inbound.signature.additionalParameters==="ignored"){Q=j.filterObjectKeys(x,function(Z){return(Z.indexOf("sap-")===0)||G.inbound.signature.parameters.hasOwnProperty(Z);},false);}else{Q=x;}if(w){var V=Object.keys(Q).some(function(Z){return Z.indexOf("sap-")!==0;});if(!V){z[K].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var W=j.inboundSignatureMeetsParameterOptions(G.inbound.signature.parameters,o.paramsOptions||[]);if(!W){z[K].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var X={intent:K+v(Q),text:G.inbound.title};if(G.inbound.icon){X.icon=G.inbound.icon;}if(G.inbound.subTitle){X.subTitle=G.inbound.subTitle;}if(G.inbound.shortTitle){X.shortTitle=G.inbound.shortTitle;}var Y=O.get("inbound.signature.parameters.sap-tag.defaultValue.value",G);if(Y){X.tags=[Y];}return X;}z[K].count++;return undefined;}).filter(function(G){return typeof G==="object";});if(S!=="priority"){R.sort(function(G,J){return G[S]<J[S]?-1:1;});}if(R.length===0){L.debug("_getLinks returned no results");}else if(L.getLevel()>=L.Level.DEBUG){if(L.getLevel()>=L.Level.TRACE){var B=[];var H=[];R.forEach(function(G){var J=G.intent.split("?")[0];if(z[J].hideReason){H.push(["-",J+"("+z[J].hideReason+")\n"," text:",G.text+"\n"," full intent:",G.intent].join(" "));}else{B.push(["-",J,z[J].count>1?"("+(z[J].count-1)+" others matched)\n":"\n","text:",G.text+"\n","full intent:",G.intent].join(" "));}});L.debug("_getLinks filtered to the following unique intents:","\n"+B.join("\n"),"sap.ushell.services.ClientSideTargetResolution");L.debug("_getLinks would have also returned the following unique intents, but something prevented this:",H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{L.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(z).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};p.prototype._getMatchingInbounds=function(s,I,o){var t=this,e,q,r,u,S,v,P,D=new jQuery.Deferred();if(o){e=o.tags;v=o.bExcludeTileInbounds;}if(L.getLevel()>=L.Level.DEBUG){r=++t._iLogId;}g.begin(function(){function w(M){var y=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var z=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return n.constructShellHash({semanticObject:z,action:y,params:M.params});}var x=w(s);return{logId:r,title:"Matching Intent '"+x+"' to inbounds (form factor: "+(s.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});S=s.semanticObject;q=s.action;this._oShellHash=s;u=e?I.getSegmentByTags(e):I.getSegment(S,q);if(v){P=u.filter(function(w){return!w.tileResolutionResult||!w.tileResolutionResult.isCustomTile;});}else{P=u;}var G=null;if(this._oAdapter.getContentProviderDataOriginsLookup){G=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter);}f.match(s,P,{},G,L.getLevel()>=L.Level.DEBUG).then(function(w){g.log(function(){return{logId:r,stage:1,prefix:"\u2718",lines:Object.keys(w.noMatchReasons||{}).map(function(z){return z+" "+w.noMatchReasons[z];})};});g.log(function(){var z=w.matchResults.map(function(B){return _.formatInbound(B.inbound);});return{logId:r,stage:1,prefix:z.length>0?"\u2705":"\u2718",lines:z.length>0?z:["No inbound was matched"]};});var M={};var x=false;var y=Object.keys(w.missingReferences);y.forEach(function(z){var B=Object.keys(w.missingReferences[z]);x=x||B.length>0;M[z]=B;});y=y.filter(function(z){if(M[z].length>0){return true;}delete M[z];return false;});if(!x){g.log(function(){return{logId:r,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new jQuery.Deferred().resolve({matchResults:w.matchResults,referencesToInclude:null}).promise();}y.forEach(function(z){g.log(function(){return{logId:r,stage:2,line:"@ Must resolve the following references with contentProviderId = \""+z+"\":",prefix:"\u2022",lines:M[z]};});});var R=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(z){var B=y.map(function(F){return this.getSystemContext(F);}.bind(this));return Promise.all(B).then(function(F){var H=y.map(function(J,K){return new Promise(function(Q,V){z.resolveReferences(M[J],F[K]).done(Q).fail(V);});});return Promise.all(H);});}.bind(this)).then(function(z){var B={matchResults:w.matchResults,referencesToInclude:{}};y.forEach(function(F,H){var J=z[H];B.referencesToInclude[F]=J;if(Object.keys(J).length>0){g.log(function(){return{logId:r,stage:2,line:"\u2705 resolved references with contentProviderId = \""+F+"\" to the following values:",prefix:"\u2022",lines:Object.keys(J).map(function(K){return K+": '"+J[K]+"'";})};});}});R.resolve(B);}).catch(function(z){g.log(function(){return{logId:r,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+z};});D.resolve([]);});return R.promise();}.bind(this)).then(function(w){var M,x,R=w.referencesToInclude;if(!R){g.log(function(){return{logId:r,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new jQuery.Deferred().resolve(w).promise();}x=w.matchResults;M=x.map(function(y){return y.inbound;});return f.match(s,M,R,G,0).then(function(F){g.log(function(){var x=F.matchResults||[];if(x.length>=1){return{logId:r,stage:3,line:"The following inbounds re-matched:",lines:x.map(function(y){return _.formatInbound(y.inbound);}),prefix:"\u2705"};}return{logId:r,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var M=F.matchResults||[];if(M.length<=1){g.log(function(){return{logId:r,stage:4,line:"Nothing to sort"};});D.resolve(M);return;}var w=f.sortMatchingResultsDeterministic(F.matchResults||[]);g.log(function(){var x=w.map(function(y){return _.formatInbound(y.inbound||{})+(y.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+y["sap-priority"]+"'"+"\n * 2 * Sort string: '"+y.priorityString+"\n * 3 * Deterministic blob: '"+f.serializeMatchingResult(y)+"'";});return{logId:r,stage:4,line:"Sorted inbounds as follows:",lines:x,prefix:".",number:true};});D.resolve(w);});return D.promise().then(function(M){g.end(function(){return{logId:r};});return M;});};p.prototype._isIntentSupportedOne=function(I,o){var D=new jQuery.Deferred(),s=n.parseShellHash(I);if(I==="#"){D.resolve(true);return D.promise();}if(s===undefined){return D.reject("Could not parse shell hash '"+I+"'").promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};p.prototype.isIntentSupported=function(I){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(I,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype._isIntentSupported=function(I,o){var t=this,D=new jQuery.Deferred(),s={};D.resolve();function e(q,S){s[q]={supported:S};}var r=[];I.forEach(function(q){var u=t._isIntentSupportedOne(q,o);u.fail(function(v){r.push(v);});u.done(function(v){e(q,v);});D=jQuery.when(D,u);});var R=new jQuery.Deferred();D.done(function(){R.resolve(s);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};p.prototype.getUserDefaultParameterNames=function(s){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(I){t._getUserDefaultParameterNames(I.getAllInbounds(),s).then(function(r){D.resolve(r);},function(e){D.reject("Cannot get user default parameters from inbounds: "+e);});},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype._getUserDefaultParameterNames=function(I,s){var r={simple:{},extended:{}};I=I.filter(function(o){if(o.contentProviderId===undefined&&s.id===""){return true;}return o.contentProviderId===s.id;});return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(R){I.forEach(function(t){var S=t.signature&&t.signature.parameters||[];Object.keys(S).forEach(function(P){var o=S[P],e,q,u;if(o){if(o.filter&&o.filter.format==="reference"){u=o.filter.value;}else if(o.defaultValue&&o.defaultValue.format==="reference"){u=o.defaultValue.value;}if(typeof u==="string"){e=R.extractUserDefaultReferenceName(u);if(typeof e==="string"){r.simple[e]={};}q=R.extractExtendedUserDefaultReferenceName(u);if(typeof q==="string"){r.extended[q]={};}}}});});return r;});};p.prototype.getEasyAccessSystems=function(M){var r={},o,v,D;M=M||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[M]){return this._oHaveEasyAccessSystemsDeferreds[M].promise();}this._oHaveEasyAccessSystemsDeferreds[M]=new jQuery.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[M];function e(I,s,v){if(!I){return false;}var q=[I.semanticObject,I.action].join("-");return v[M][q]&&I.deviceTypes&&s!==undefined&&I.deviceTypes[s];}o=A.getEasyAccessMenuDefinitions().reduce(function(R,q){var s=q.easyAccessMenu.intent.split("-")[1];R[s]={appType:q.type,priority:q.easyAccessMenu.systemSelectionPriority};return R;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(u,q){var s=q.easyAccessMenu.intent;u[s]=q.easyAccessMenu.showSystemSelectionInUserMenu;return u;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(s,q){var t=q.easyAccessMenu.intent;s[t]=q.easyAccessMenu.showSystemSelectionInSapMenu;return s;},{})};this._oInboundProvider.getInbounds().then(function(I){var q={};I.getAllInbounds().filter(function(s){return e(s,U.getFormFactor(),v);}).forEach(function(s){var S;if(i(s.signature.parameters["sap-system"])&&s.signature.parameters["sap-system"].hasOwnProperty("filter")){S=O.get("signature.parameters.sap-system.filter.value",s);}if(typeof S==="string"){var t=o[s.action].priority;var u=o[s.action].appType;if(!r[S]){q[S]=-1;r[S]={appType:{}};}if(q[S]<t){r[S].text=s.title;q[S]=t;}r[S].appType[u]=true;}else{L.warning("Cannot extract sap-system from easy access menu inbound: "+_.formatInbound(s),"This parameter is supposed to be a string. Got '"+S+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};p.prototype.getSystemContext=function(s){var S=s===undefined?"":s;return new Promise(function(r,e){var o;this._oAdapter.resolveSystemAlias(S).done(function(R){o=h.createSystemContextFromSystemAlias(R);r(o);}).fail(function(q){e(q);});}.bind(this));};p.hasNoAdapter=false;return p;},true);
sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log"],function(P,O,q,a,S,b,d,e,c,V,C,f,g,u,h,r,L){"use strict";var D=u.DisplayFormat;var j="sap.ushell.services.CommonDataModel",k={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};function l(A,o,p,s){this._oAdapter=A;this._oPersonalizationProcessor=new P();this._oSiteDeferred=new q.Deferred();this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new S();this._oPersonalizationDeltas={};this._bLoadPersonalization=h.isFlpHomeIntent();this._oGetSitePromise=A.getSite().then(function(i){this._oOriginalSite=c({},i);if(this._bLoadPersonalization){this._loadAndApplyPersonalization(i);}return i;}.bind(this)).fail(function(i){this._oSiteDeferred.reject(i);this._bLoadPersonalization=true;}.bind(this));}l.prototype._loadAndApplyPersonalization=function(s){var o=new V(s._version);if(o.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(o).then(function(p){if(p){this._oPersonalizationDeltas=d(p);}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"};}this._triggerMixinPersonalisationInSite(s,p);}.bind(this)).fail(this._oSiteDeferred.reject);}else{this._oPersonalizedPages={};this._oOriginalSite=this._ensureStandardVizTypesPresent(this._oOriginalSite);this._oOriginalSite=this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite);}};l.prototype._applyPagePersonalization=function(p,o){var s=p.identification.id;if(Object.keys(o).length){var i=o.classicHomePage;if(i&&i.version==="3.1.0"){Object.keys(i).forEach(function(t){if(!o[t]){o[t]=i[t];}});delete o.classicHomePage;o._version=o.version;}var v=new V(o._version||o.version);if(v.compareTo("3.1.0")<0){o={classicHomePage:o,_version:"3.1.0",version:"3.1.0"};}}this._oPersonalizationDeltas=o;var m=o[s]||{};var n=this._oSiteConverter.convertTo("3.0.0",d(p,20));return this._triggerMixinPersonalisationInSite(n,m).then(function(t){this._oPersonalizedPages[s]=this._oSiteConverter.convertTo("3.1.0",d(t,20));return this._oPersonalizedPages[s];}.bind(this));};l.prototype._triggerMixinPersonalisationInSite=function(s,p){return new Promise(function(i,m){this._oPersonalizationProcessor.mixinPersonalization(s,p).done(function(o){this._oPersonalizedSite=this._ensureCompleteSite(o);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureStandardVizTypesPresent(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureProperDisplayFormats(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);i(this._oPersonalizedSite);}.bind(this)).fail(function(M){this._oSiteDeferred.reject(M);m();}.bind(this));}.bind(this));};l.prototype.getHomepageGroups=function(){var o=new q.Deferred();this.getSite().then(function(s){var G=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];o.resolve(G);});return o.promise();};l.prototype.getGroups=function(){var o=new q.Deferred();this.getSite().then(function(s){var G=[];Object.keys(s.groups).forEach(function(K){G.push(s.groups[K]);});o.resolve(G);});return o.promise();};l.prototype.getGroup=function(i){var o=new q.Deferred();this.getSite().then(function(s){var G=s.groups[i];if(G){o.resolve(G);}else{o.reject("Group "+i+" not found");}});return o.promise();};l.prototype.getSite=function(){if(!this._bLoadPersonalization){this.getSiteWithoutPersonalization().then(this._loadAndApplyPersonalization.bind(this));this._bLoadPersonalization=true;}return this._oSiteDeferred.promise();};l.prototype.getSiteWithoutPersonalization=function(){return this._oGetSitePromise;};l.prototype.getPage=function(p){return new Promise(function(i,m){var E=C.last("/core/shell/enablePersonalization");var n=C.last("/core/spaces/myHome/enabled");var M=C.last("/core/spaces/myHome/myHomePageId");Promise.resolve(this._oGetSitePromise).then(function(){if(this._oPersonalizedPages[p]){i(this._oPersonalizedPages[p]);return;}if(E||(n&&p===M)){Promise.all([this._getPageFromAdapter(p),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).then(function(o){this._applyPagePersonalization(o[0],o[1]).then(i).catch(function(){m("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)).catch(function(){m("CommonDataModel Service: Cannot get page "+p);});return;}i(this._getPageFromAdapter(p));}.bind(this)).catch(m);}.bind(this));};l.prototype._getPageFromAdapter=function(p){if(!this._oAdapter.getPage){return Promise.resolve(d(this._oOriginalSite.pages[p],20));}return this._oAdapter.getPage(p).then(function(o){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(R){var v=R[0];var i=R[1];this._oOriginalSite.pages[p]=o;this._oOriginalSite.visualizations=v;this._oOriginalSite.vizTypes=i;return d(o,20);}.bind(this));}.bind(this));};l.prototype._filterForProperPages=function(p){return p.filter(function(o){return!!o;});};l.prototype.getPages=function(p){return new Promise(function(i,m){var E=C.last("/core/shell/enablePersonalization");var n=C.last("/core/spaces/myHome/enabled");var M=C.last("/core/spaces/myHome/myHomePageId");Promise.resolve(this._oGetSitePromise).then(function(){if(E||n){Promise.all([this._getPagesFromAdapter(p),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).then(function(o){var s=o[0];var t=Promise.all(Object.keys(s).map(function(v){if(this._oPersonalizedPages[v]){return Promise.resolve(this._oPersonalizedPages[v]);}if(!E&&v!==M){return Promise.resolve(s[v]);}return this._applyPagePersonalization(s[v],o[1]).catch(function(){m("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)));t.then(function(v){i(this._filterForProperPages(v));}.bind(this));}.bind(this)).catch(function(){m("CommonDataModel Service: Cannot get pages");});return;}this._getPagesFromAdapter(p).then(function(o){i(this._filterForProperPages(g(o)));}.bind(this));}.bind(this)).catch(m);}.bind(this));};l.prototype._getPagesFromAdapter=function(p){if(!this._oAdapter.getPages){var o={};for(var s in this._oOriginalSite.pages){if(f(p,this._oOriginalSite.pages[s].identification.id)){o[s]=this._oOriginalSite.pages[s];}}return Promise.resolve(d(o,20));}return this._oAdapter.getPages(p).then(function(i){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(R){var v=R[0];var m=R[1];this._oOriginalSite.visualizations=v;this._oOriginalSite.vizTypes=m;Object.keys(i).forEach(function(K){this._oOriginalSite.pages[K]=i[K];}.bind(this));return d(i,20);}.bind(this));}.bind(this));};l.prototype.getAllPages=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();}).then(function(H){var p=[];H.spaces.forEach(function(s){s.pages.forEach(function(o){if(p.indexOf(o.id)===-1){p.push(o.id);}});});return this.getPages(p);}.bind(this));};l.prototype.getApplications=function(){return new Promise(function(i,m){this.getSite().then(function(s){var A=s.applications;if(A){i(A);}else{m("CDM applications not found.");}}).fail(m);}.bind(this));};l.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(R){var s=R[0];var A=R[1];return e(s,A);});}return this.getCachedVizTypes();};l.prototype.getCachedVizTypes=function(){var o=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){o=this._oAdapter.getCachedVizTypes();}return Promise.all([this._getSiteProperty("vizTypes"),o]).then(function(R){var s=R[0];var i=R[1];return e(s,i);});};l.prototype.getVizType=function(v){var o=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){o=this._oAdapter.getVizType(v);}return Promise.all([this._getSiteProperty("vizTypes"),o]).then(function(R){var s=R[0];var i=R[1];if(i){s[v]=i;}return s[v];});};l.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(R){var s=R[0];var A=R[1];return e(s,A);});}return this.getCachedVisualizations();};l.prototype.getCachedVisualizations=function(){var o=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){o=this._oAdapter.getCachedVisualizations();}return Promise.all([this._getSiteProperty("visualizations"),o]).then(function(R){var s=R[0];var i=R[1];return e(s,i);});};l.prototype._getSiteProperty=function(o){return new Promise(function(i,m){this.getSite().then(function(s){var p=O.get(o,s);if(p){i(p);}else{var n=o.toString();m("CDM "+n+" not found.");}}).fail(m);}.bind(this));};l.prototype.getGroupFromOriginalSite=function(G){var o=new q.Deferred();if(typeof G==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[G]){o.resolve(q.extend(true,{},this._oOriginalSite.groups[G]));}else{o.reject("Group does not exist in original site.");}return o.promise();};l.prototype.getOriginalPage=function(p){return d(this._oOriginalSite.pages[p],20);};l.prototype.save=function(p){var o=new q.Deferred(),i,m;if(this._oOriginalSite._version==="3.1.0"){if(!p){return o.reject("No page id was provided").promise();}m=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[p]);i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[p]);}else{m=this._oOriginalSite;i=this._oPersonalizedSite;}this._oPersonalizationProcessor.extractPersonalization(d(i,20),d(m,20)).done(function(E){if(!b(E)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version;}if(p){this._oPersonalizationDeltas[p]=E;}else{this._oPersonalizationDeltas=E;}this._setPersonalization(this._oPersonalizationDeltas).then(o.resolve).catch(o.reject);}else{o.resolve();}}.bind(this)).fail(function(){o.reject("Personalization Processor: Cannot extract personalization.");});return o.promise();};l.prototype._setPersonalization=function(i,p){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]};}return new Promise(function(m,n){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,i,p);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:m,reject:n});}.bind(this));}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(i,p);return new Promise(function(m,n){this._oPendingPersonalizationDeferred.then(m).fail(n).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var N=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(N,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery;}}.bind(this));}.bind(this));};l.prototype._cleanupPersonalizationQueuePromises=function(n,i){i.forEach(function(p){n.then(p.resolve).catch(p.reject);});};l.prototype._getUnreferencedCatalogApplications=function(E){var U={};var A=Object.keys(E.applications).map(function(s){return E.applications[s]["sap.app"].id;}).reduce(function(i,s){i[s]=true;return i;},{});var o=E.catalogs;Object.keys(o).forEach(function(s){var i=o[s].payload.appDescriptors;i.map(function(m){return m.id;}).filter(function(m){return!A[m];}).forEach(function(B){if(!U.hasOwnProperty(s)){U[s]={};}U[s][B]=true;});});return U;};l.prototype._formatUnreferencedApplications=function(s,U){return"One or more apps from "+s+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(U).map(function(i){var B=Object.keys(U[i]).map(function(m){return"'"+m+"'";});return"From catalog '"+i+"': "+B.join(", ");}).join("; ");};l.prototype._removeUnreferencedApplications=function(E,U){Object.keys(E.catalogs).forEach(function(s){var o=E.catalogs[s].payload;var A=o.appDescriptors;o.appDescriptors=A.filter(function(i){return U[s]&&!U[s][i.id];});});};l.prototype.getExtensionSites=function(){var o=new q.Deferred();sap.ushell.Container.getServiceAsync("PluginManager").then(function(i){i.loadPlugins("ContentProvider").done(function(){var m=Object.keys(this._oContentProviderIndex),t=m.length;if(t===0){o.resolve([]);return;}var G=m.map(function(s){var n=this._oContentProviderIndex[s];var p;try{p=n.getSite();if(!p||typeof p.then!=="function"){p=Promise.reject("Call to getSite failed: getSite did not return a Promise");}}catch(E){p=Promise.reject("Call to getSite failed: "+E);}return p.then(function(s,v){var w=q.extend(true,{},v);var U=this._getUnreferencedCatalogApplications(v);if(Object.keys(U).length>0){var x=this._formatUnreferencedApplications(s,U);L.error(x,null,j);this._removeUnreferencedApplications(w,U);}var y={providerId:s,success:true,site:w};o.notify(y);return y;}.bind(this,s)).catch(function(s,v){return{providerId:s,success:false,error:v};}.bind(null,s));}.bind(this));Promise.all(G).then(o.resolve);}.bind(this));}.bind(this));return o.promise();};l.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){L.error("a content provider with ID '"+i+"' is already registered",null,j);return;}this._oContentProviderIndex[i]=s;L.debug("ContentProvider '"+i+"' was registered",null,j);};l.prototype._ensureCompleteSite=function(p){if(p.groups){var G=p.groups;Object.keys(G).forEach(function(K){if(!G[K]){delete G[K];}else{if(!G[K].payload){G[K].payload={};}if(!G[K].payload.links){G[K].payload.links=[];}if(!G[K].payload.tiles){G[K].payload.tiles=[];}if(!G[K].payload.groups){G[K].payload.groups=[];}}});}return p;};l.prototype._ensureGroupsOrder=function(s){var G=O.get("site.payload.groupsOrder",s),o=s.groups,m,i=0;if(!G){return s;}while(i<G.length){m=G[i];if(!o[m]){G.splice(i,1);}else{i++;}}return s;};l.prototype.getPlugins=(function(){var i,E,p;E=function(s,o){var m,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){L.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",j);return{};}if(n>1){L.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",j);}m=O.get("signature.parameters",o["Shell-plugin"])||{};return Object.keys(m).reduce(function(R,N){var t=O.get(N+".defaultValue.value",m);if(typeof t==="string"){R[N]=t;}return R;},{});};i=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=i(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return q.when(p);}p={};return this.getSiteWithoutPersonalization().then(function(s){var A=s.applications||{};Object.keys(A).filter(function(m){return O.get("type",this[m]["sap.flp"])==="plugin";},A).forEach(function(m){var n,t,v=this[m],w={};if(!a(v["sap.platform.runtime"])){L.error("Cannot find 'sap.platform.runtime' section for plugin '"+m+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!a(v["sap.platform.runtime"].componentProperties)){L.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+m+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{w=v["sap.platform.runtime"].componentProperties;}p[m]={url:w.url,component:v["sap.ui5"].componentName};var x=O.get("crossNavigation.inbounds",v["sap.app"])||{};t=E(m,x);n=q.extend(w.config||{},t);if(n){p[m].config=n;}if(w.asyncHints){p[m].asyncHints=w.asyncHints;}var y=O.get("deviceTypes",v["sap.ui"]);if(y){p[m].deviceTypes=y;}},A);return i(p);},function(v){return v;});};})();l.prototype._mapDisplayFormats=function(i){var o={tile:D.Standard,standard:D.Standard,link:D.Compact,compact:D.Compact,flat:D.Flat,flatWide:D.FlatWide,tileWide:D.StandardWide,standardWide:D.StandardWide};var s=Object.keys(o).filter(function(m){return i.indexOf(m)>-1;});return s.map(function(m){return o[m];});};l.prototype._ensureProperDisplayFormats=function(s){if(s.vizTypes){Object.keys(s.vizTypes).forEach(function(K){if(s.vizTypes[K]["sap.flp"]&&s.vizTypes[K]["sap.flp"].vizOptions){var v=s.vizTypes[K];var i=O.get("vizOptions.displayFormats.supported",v["sap.flp"]);var m=O.get("vizOptions.displayFormats.default",v["sap.flp"]);if(i){s.vizTypes[K]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(i);}if(m){s.vizTypes[K]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([m])[0];}}}.bind(this));}if(s.hasOwnProperty("pages")){Object.keys(s.pages).forEach(function(K){var p=s.pages[K];if(p.payload&&p.payload.sections){var o=p.payload.sections;Object.keys(o).forEach(function(i){var m=o[i];Object.keys(m.viz).forEach(function(v){var n=m.viz[v];if(n.displayFormatHint){var M=this._mapDisplayFormats([n.displayFormatHint])[0];n.displayFormatHint=M||n.displayFormatHint;}}.bind(this));}.bind(this));}}.bind(this));}else if(s.hasOwnProperty("groups")){Object.keys(s.groups).forEach(function(G){var o=s.groups[G];o.payload.tiles.forEach(function(t){if(t.displayFormatHint){var m=this._mapDisplayFormats([t.displayFormatHint])[0];t.displayFormatHint=m||t.displayFormatHint;}}.bind(this));}.bind(this));}return s;};l.prototype._ensureStandardVizTypesPresent=function(s){if(!(s._version&&s._version.startsWith("3."))){return s;}if(!s.vizTypes){s.vizTypes={};}if(!s.vizTypes[k.STATIC_LAUNCHER]){s.vizTypes[k.STATIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncher/manifest.json");}if(!s.vizTypes[k.DYNAMIC_LAUNCHER]){s.vizTypes[k.DYNAMIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json");}if(!s.vizTypes[k.CARD]){s.vizTypes[k.CARD]=q.sap.loadResource("sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json");}return s;};l.prototype.getMenuEntries=function(m){return new Promise(function(i,n){this.getSite().then(function(s){var M=O.get("menus."+m+".payload.menuEntries",s);i(d(M)||[]);});}.bind(this));};l.prototype.getContentProviderIds=function(){return new Promise(function(i,m){this.getSite().then(function(s){var n=Object.keys(s.systemAliases);var o={};g(s.applications).forEach(function(A){var p=r.getContentProviderId(A);if(f(n,p)){o[p]=true;}});i(Object.keys(o));});}.bind(this));};l.hasNoAdapter=false;return l;},true);
sap.ui.predefine('sap/ushell/services/ContentExtensionAdapterFactory',["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(C,a,q,O){"use strict";var b={};b.getAdapters=function(c){var d=b._getConfigAdapters(c);var A={};var e=d.map(function(o){var E=C.last(o.configSwitch);if(!E){return Promise.resolve();}var f=b._getAdapter(o);f.then(function(g){A[o.contentProviderName]=g;});return f;});return new Promise(function(r){q.when.apply(q,e).then(function(){r(A);});});};b._getConfigAdapters=function(c){if(!c){c=a._getConfigAdapters();}if(!Array.isArray(c)){c=[c];}return c;};b._getAdapter=function(c){var d=new q.Deferred();var A=c.configHandler?c.configHandler():{};var m=c.adapter.replace(/\./g,"/");sap.ui.require([m],function(){var i=b._getAdapterInstance(c.adapter,c.system,null,A);d.resolve(i);});return d.promise();};b._getAdapterInstance=function(A,s,p,c){var d=O.get(A);if(d){var D={config:c||{}};return new d(s,p,D);}return null;};return b;});
sap.ui.predefine('sap/ushell/services/CrossApplicationNavigation',["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/library","sap/base/Log","sap/ushell/utils/UrlParsing"],function(a,u,t,T,A,i,U,q,O,m,b,c,d,L,e){"use strict";var f=d.UI5ComponentType;function C(o,p,s){var S;if(s&&s.config){S=s.config;}function g(v,j){var r,k,n,l,w;if(typeof v!=="string"&&!i(v)&&v!==undefined){L.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}r=a.getCurrentApplication();if(j){if(typeof j.getComponentData!=="function"||!i(j.getComponentData())||!j.getComponentData().startupParameters||!i(j.getComponentData().startupParameters)){L.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation");}else{w=j.getComponentData().startupParameters;if(w.hasOwnProperty("sap-system")){k=w["sap-system"][0];}if(w.hasOwnProperty("sap-ushell-next-navmode")){n=w["sap-ushell-next-navmode"][0];}}}else{if(r&&r["sap-system"]){k=r["sap-system"];}else if(r&&r.url){k=new U(r.url).get("sap-system");}if(r&&r["sap-ushell-next-navmode"]){n=r["sap-ushell-next-navmode"];}else if(r&&r.url){n=new U(r.url).get("sap-ushell-next-navmode");}}if(r){l=r.contentProviderId;}var I=u._injectParameters({type:t,inject:{"sap-system":k,"sap-ushell-navmode":n,"sap-app-origin-hint":l},injectEmptyString:{"sap-app-origin-hint":true},args:v});return I;}function h(v){var j,k,l;if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return v;}if(!S||!S["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return v;}}if(typeof v!=="string"&&!i(v)&&v!==undefined){L.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}if(i(v)){k=q.extend(true,{},v);if(k.target&&k.target.shellHash){if(typeof k.target.shellHash==="string"){if(k.target.shellHash!=="#"&&k.target.shellHash!==""){k.target.shellHash=h(k.target.shellHash);}}return k;}k.params=k.params||{};k.params["sap-ushell-enc-test"]=["A B%20C"];return k;}l=v;if(!/[?&]sap-system=/.test(l)){j=(l.indexOf("?")>-1)?"&":"?";l+=j+"sap-ushell-enc-test="+encodeURIComponent("A B%20C");}return l;}this._extractInnerAppRoute=function(I){var j=this,P,k;if(typeof I==="string"){P=I.split("&/");k=P.shift();return{intent:k,innerAppRoute:P.length>0?"&/"+P.join("&/"):""};}if(Object.prototype.toString.apply(I)==="[object Object]"){var l=O.get("target.shellHash",I);if(typeof l==="string"){var r=j._extractInnerAppRoute(l);I.target.shellHash=r.intent;return{intent:I,innerAppRoute:r.innerAppRoute};}if(I.hasOwnProperty("appSpecificRoute")){var v=I.appSpecificRoute;delete I.appSpecificRoute;var n=typeof v==="string"&&v.indexOf("&/")!==0&&v.length>0;return{innerAppRoute:n?"&/"+v:v,intent:I};}return{intent:I,innerAppRoute:""};}L.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:I};};this._injectInnerAppRoute=function(I,j){var k,l=this;if(!j){return I;}if(typeof I==="string"){return I+j;}if(Object.prototype.toString.apply(I)==="[object Object]"){k=O.get("target.shellHash",I);if(typeof k==="string"){I.target.shellHash=l._injectInnerAppRoute(k,j);return I;}I.appSpecificRoute=j;}return I;};this.hrefForExternal=function(j,k,l){if(l){var D=new q.Deferred();this.hrefForExternalAsync(j,k).then(D.resolve).catch(D.reject);return D.promise();}L.warning("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var n=m({},j);var E=this._extractInnerAppRoute(n);var I=E.intent;u.addXAppStateFromParameter(I,"sap-xapp-state-data");n=g(I,k);n=u.injectStickyParameters({args:n,appLifeCycle:A,technicalParameters:T,type:t});n=h(n);n=this._injectInnerAppRoute(n,E.innerAppRoute);var r=sap.ushell.Container.getService("ShellNavigation");if(!r){L.debug("Shell not available, no Cross App Navigation");return"";}return r.hrefForExternal(n,undefined,k,l);};this.hrefForExternalAsync=function(j,k){var l=m({},j);var E=this._extractInnerAppRoute(l);var I=E.intent;return Promise.resolve().then(function(){return u.addXAppStateFromParameterAsync(I,"sap-xapp-state-data");}).then(function(){l=g(I,k);return u.injectStickyParametersAsync({args:l,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(n){l=n;l=h(l);l=this._injectInnerAppRoute(l,E.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation");}.bind(this)).then(function(n){return new Promise(function(r,v){n.hrefForExternal(l,undefined,k,true).done(r).fail(v);});}).catch(function(){L.debug("Shell not available, no Cross App Navigation");return"";});};this.expandCompactHash=function(H){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.expandCompactHash(H).done(D.resolve).fail(D.reject);});return D.promise();};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(I){if(I){return this.toExternal({target:{shellHash:"#"},writeHistory:false});}this.historyBack();}.bind(this));};this.historyBack=function(j){var k=-1;if(j&&typeof j==="number"){if(j<=0){L.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack");}k=j*-1;}window.history.go(k);};this.isInitialNavigation=function(){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var j=sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation");if(!j){L.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;}var I=j.isInitialNavigation();if(typeof I==="undefined"){return true;}return I;};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){var I=j.isInitialNavigation();if(typeof I==="undefined"){return true;}return I;}).catch(function(){L.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;});};this.toExternal=function(j,k){var w=j.writeHistory;var l=m({},j);this._processShellHashWithParams(l);var E=this._extractInnerAppRoute(l);var I=E.intent;return Promise.resolve().then(function(){return u.addXAppStateFromParameterAsync(I,"sap-xapp-state-data");}).then(function(){l=g(I,k);return u.injectStickyParametersAsync({args:l,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(n){l=n;l=h(l);delete l.writeHistory;l=this._injectInnerAppRoute(l,E.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation");}.bind(this)).then(function(n){return n.toExternal(l,k,w);}).catch(function(n){L.warning("Shell not available, no Cross App Navigation");});};this.hrefForAppSpecificHash=function(j){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(j);}L.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(j);};this.hrefForAppSpecificHashAsync=function(j){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){return k.hrefForAppSpecificHash(j);}).catch(function(){L.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(j);});};this.getPrimaryIntent=function(j,P){var Q={},k,r=/^#\w+-displayFactSheet(?:$|\?.)/;Q.tags=["primaryAction"];Q.semanticObject=j;if(P){Q.params=P;}return this.getLinks(Q).then(function(l){if(l.length===0){delete Q.tags;Q.action="displayFactSheet";k=function(n,v){var E;if(n.intent===v.intent){return 0;}E=r.test(n.intent)^r.test(v.intent);if(E){return r.test(n.intent)?-1:1;}return n.intent<v.intent?-1:1;};return this.getLinks(Q);}k=function(n,v){if(n.intent===v.intent){return 0;}return n.intent<v.intent?-1:1;};return l;}.bind(this)).then(function(l){return l.length===0?null:l.sort(k)[0];});};this.getSemanticObjectLinks=function(j,P,I,k,l,n){var D=new q.Deferred();Promise.resolve().then(function(){return u.injectStickyParametersAsync({args:{params:P},appLifeCycle:A,technicalParameters:T,type:t});}).then(function(r){r=g(r,k).params;r=h({params:r}).params;var v;if(Array.isArray(j)){v=[];j.forEach(function(w){v.push([{semanticObject:w[0],params:w[1],ignoreFormFactor:!!w[2],ui5Component:w[3],appStateKey:w[4],compactIntents:!!(w[5])}]);});}else{v={semanticObject:j,params:r,ignoreFormFactor:I,ui5Component:k,appStateKey:l,compactIntents:!!n};}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolution"),v]);}).then(function(r){var N=r[0];var v=r[1];b.invokeUnfoldingArrayArguments(N.getLinks.bind(N),[v]).done(D.resolve).fail(D.reject);});return D.promise();};this.getLinks=function(v){var E;E=b.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[v]);return E;};this._getLinks=function(n){var D=new q.Deferred();if(typeof n==="undefined"){n={};}var N=q.extend(true,{},n);N.compactIntents=!!N.compactIntents;N.action=N.action||undefined;N.paramsOptions=u.extractGetLinksParameterOptions(N.params);Promise.resolve().then(function(){return u.injectStickyParametersAsync({args:N,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(j){N=j;var P;if(N.params){P=u.extractGetLinksParameterDefinition(N.params);}else{P=N.params;}var k=g({params:P},N.ui5Component).params;k=h({params:k}).params;if(N.appStateKey){k["sap-xapp-state"]=[N.appStateKey];delete N.appStateKey;}N.params=k;return sap.ushell.Container.getServiceAsync("NavTargetResolution");}).then(function(j){j.getLinks(N).done(D.resolve).fail(D.reject);});return D.promise();};this.getDistinctSemanticObjects=function(){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.getDistinctSemanticObjects().done(D.resolve).fail(D.reject);});return D.promise();};this.isIntentSupported=function(I,j){var D=new q.Deferred(),k={},l=I.map(function(n){var r=g(n,j);k[r]=n;return r;});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.isIntentSupported(l).done(function(n){var r={};Object.keys(n).forEach(function(K){r[k[K]]=n[K];});D.resolve(r);}).fail(D.reject.bind(D));});return D.promise();};this.isNavigationSupported=function(I,j){var D=new q.Deferred();var k=I.map(function(l){return g(l,j);});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.isNavigationSupported(k).done(D.resolve).fail(D.reject);});return D.promise();};this.isUrlSupported=function(j){var D=new q.Deferred();if(typeof j!=="string"){D.reject();return D.promise();}if(e.isIntentUrl(j)){var H=e.getHash(j);this.isIntentSupported(["#"+H]).done(function(r){if(r["#"+H]&&r["#"+H].supported){D.resolve();}else{D.reject();}}).fail(function(){D.reject();});}else{D.resolve();}return D.promise();};this.createComponentInstance=function(I,j,k){var D=new q.Deferred(),l=sap.ushell.Container,M;this.createComponentData(I,j).then(function(n){l.getServiceAsync("Ui5ComponentLoader").then(function(r){return r.modifyComponentProperties(n,f.Application).then(function(v){M=v;return r;});}).then(function(r){if(k){k.runAsOwner(function(){v(M);});}else{v(M);}function v(w){w.loadDefaultDependencies=false;r.instantiateComponent(w).then(function(x){D.resolve(x.componentHandle.getInstance());},function(E){E=E||"";L.error("Cannot create UI5 component: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");D.reject(E);});}});},function(E){D.reject(E);});return D.promise();};this.createComponentData=function(I,j){return new Promise(function(r,R){var k=sap.ushell.Container,l,n;if(!j){j={};}else{n=Object.keys(j).length;if(n>1||(n===1&&!j.componentData)){R("`oConfig` argument should either be an empty object or contain only the `componentData` property.");return;}}if(j.componentData){delete j.componentData.startupParameters;delete j.componentData.config;delete j.componentData["sap-xapp-state"];}l=e.constructShellHash(e.parseShellHash(I));if(!l){R("Navigation intent invalid!");return;}k.getServiceAsync("NavTargetResolution").then(function(N){N.resolveHashFragment("#"+l).then(function(v){function w(y){y=q.extend(true,{},y,j);if(!y.ui5ComponentName){if(y.additionalInformation){y.ui5ComponentName=y.additionalInformation.replace(/^SAPUI5\.Component=/,"");}else if(y.name){y.ui5ComponentName=y.name;}}return y;}if(v.applicationType===c.URL.type&&v.appCapabilities&&v.appCapabilities.appFrameworkId==="UI5"&&sap.ushell.Container.inAppRuntime()){sap.ui["require"](["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"],function(y){y.getAppInfo(v.appCapabilities.technicalAppComponentId).then(function(z){z=w(z);x({ui5ComponentName:v.appCapabilities.technicalAppComponentId,applicationDependencies:z,url:z.url});});});}else if(v.applicationType!==c.URL.type&&!(/^SAPUI5\.Component=/.test(v.additionalInformation))){R("The resolved target mapping is not of type UI5 component.");}else{x(v);}function x(y){k.getServiceAsync("Ui5ComponentLoader").then(function(z){y=w(y);y.loadDefaultDependencies=false;z.createComponentData(y).then(function(B){r(B);},function(E){E=E||"";L.error("Cannot get UI5 component data: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");R(E);});});}});});});};this.createEmptyAppState=function(j,k,P,l){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var n=sap.ushell.Container.getService("AppState");if(!(j instanceof sap.ui.core.UIComponent)){throw new Error("The passed oAppComponent must be a UI5 Component.");}return n.createEmptyAppState(j,k,P,l);};this.createEmptyAppStateAsync=function(j,k,P,l){if(!(j instanceof sap.ui.core.UIComponent)){return Promise.reject("The passed oAppComponent must be a UI5 Component.");}return sap.ushell.Container.getServiceAsync("AppState").then(function(n){return n.createEmptyAppState(j,k,P,l);});};this.getStartupAppState=function(j){this._checkComponent(j);var k=j.getComponentData()&&j.getComponentData()["sap-xapp-state"]&&j.getComponentData()["sap-xapp-state"][0];return this.getAppState(j,k);};this._checkComponent=function(j){if(!(j instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}};this.getAppState=function(j,k){var l;var D=new q.Deferred();this._checkComponent(j);sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof k!=="string"){if(k!==undefined){L.error("Illegal Argument sAppStateKey ");}setTimeout(function(){l=n.createEmptyUnmodifiableAppState(j);D.resolve(l);},0);return;}n.getAppState(k).done(D.resolve).fail(D.reject);});return D.promise();};this.getAppStateData=function(j){return b.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[j]);};this._getAppStateData=function(j){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(k){if(typeof j!=="string"){if(j!==undefined){L.error("Illegal Argument sAppStateKey ");}setTimeout(function(){D.resolve(undefined);},0);}else{k.getAppState(j).done(function(l){D.resolve(l.getData());}).fail(D.resolve.bind(D,undefined));}});return D.promise();};this.saveMultipleAppStates=function(j){var r=[],D=new q.Deferred();j.forEach(function(k){r.push(k.save());});q.when.apply(this,r).done(function(){D.resolve(r);}).fail(function(){D.reject("save failed");});return D.promise();};this._processShellHashWithParams=function(j){if(j&&j.processParams===true&&j.target&&j.target.shellHash&&j.params){var H=e.parseShellHash(j.target.shellHash);j.target={semanticObject:H.semanticObject,action:H.action,contextRaw:H.contextRaw};j.appSpecificRoute=H.appSpecificRoute;j.params=Object.assign({},j.params,H.params);}};this.getSupportedAppStatePersistencyMethods=function(){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var j=sap.ushell.Cntainer.getService("AppState");return j.getSupportedPersistencyMethods();};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(j){return j.getSupportedPersistencyMethods();});};this.makeStatePersistent=function(k,P,j){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(l){l.makeStatePersistent(k,P,j).done(D.resolve).fail(D.reject);});return D.promise();};this.resolveIntent=function(H){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.resolveHashFragment(H).then(function(r){D.resolve({url:r.url});}).fail(function(M){D.reject(M);});});return D.promise();};}C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/DarkModeSupport',["sap/base/Log","sap/base/util/UriParameters","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub"],function(L,U,D,C,E){"use strict";var P="(prefers-color-scheme: dark)";function a(){this.channel=E.createChannel({mode:undefined});this.darkMediaQueryList=window.matchMedia(P);this.doables=[];this.themeChangedCallback=null;this.darkMediaQueryListListener=null;}a.Mode={LIGHT:"light",DARK:"dark"};a.prototype.setup=function(){if(this.initialized){return;}this.initialized=true;this.themeChangedCallback=function(){this.channel.emit("/mode",this.getCurrentThemeMode());}.bind(this);sap.ui.getCore().attachThemeChanged(this.themeChangedCallback);this.themeChangedCallback();if(this.canAutomaticallyToggleDarkMode()){this.enableDarkModeBasedOnSystem();}};a.prototype.destroy=function(){this.channel.emit("/mode",null);this.doables.forEach(function(d){d.off();});this.doables=[];if(this.initialized){sap.ui.getCore().detachThemeChanged(this.themeChangedCallback);this.themeChangedCallback=null;this.disableDarkModeBasedOnSystem();this.initialized=false;}};a.prototype.attachModeChanged=function(c){var d=this.channel.on("/mode").do(function(m){c(m);});this.doables.push(d);};a.prototype.canAutomaticallyToggleDarkMode=function(){var i=this.darkMediaQueryList.media===P;return i&&!U.fromURL(window.location.href).has("sap-theme");};a.prototype.isThemeSupportDarkMode=function(t){t=t||this._getCurrentTheme();return!!this._findSupportedThemePair(t);};a.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){var c=this._getCurrentTheme();if(this.darkMediaQueryList&&this.isThemeSupportDarkMode(c)){var s=this._findSupportedThemePair(c),i=this.darkMediaQueryList.matches;var t=i?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};a.prototype._applyDefaultUserTheme=function(){var u=sap.ushell.Container.getUser();if(u.constants&&u.constants.themeFormat){u.applyTheme(u.getTheme(u.constants.themeFormat.ORIGINAL_THEME));}};a.prototype.toggleModeChange=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){var t=c===s.light?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};a.prototype.enableDarkModeBasedOnSystem=function(){if(!this.initialized){L.warning("Automatic dark mode detection cannot be enabled, because the DarkModeSupport sevice was not setup.");return;}if(!this.canAutomaticallyToggleDarkMode()){L.warning("Automatic dark mode detection cannot be enabled, because your browser does not support dark mode detection");return;}if(this.darkMediaQueryListListener){L.warning("Automatic dark mode detection was already enabled");return;}if(D.support.matchmedialistener){this.darkMediaQueryListListener=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);this.darkMediaQueryList.addListener(this.darkMediaQueryListListener);}this._toggleDarkModeBasedOnSystemColorScheme();};a.prototype.disableDarkModeBasedOnSystem=function(){if(this.darkMediaQueryListListener){this.darkMediaQueryList.removeListener(this.darkMediaQueryListListener);this.darkMediaQueryListListener=null;}this._applyDefaultUserTheme();};a.prototype.getCurrentThemeMode=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){return c===s.light?a.Mode.LIGHT:a.Mode.DARK;}return null;};a.prototype._getCurrentTheme=function(){return sap.ui.getCore().getConfiguration().getTheme();};a.prototype._findSupportedThemePair=function(c){var s=C.last("/core/darkMode/supportedThemes");return s.filter(function(S){return S.dark===c||S.light===c;})[0];};a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/LaunchPage',["sap/base/Log","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config"],function(L,C,q,r,A,a){"use strict";function b(o){var t=this,T=[],c=C.getAdapters();this.oAdapters={default:o};c.then(function(d){q.extend(this.oAdapters,d);}.bind(this));this.getGroups=function(){if(a.last("/core/spaces/enabled")){return new q.Deferred().resolve([]).promise();}var d=new q.Deferred();c.then(function(){var G=Object.keys(t.oAdapters).map(function(s){return t._getAdapter(s).getGroups();});q.when.apply(q,G).done(function(){var e=[].concat.apply([],arguments);d.resolve(e);}).fail(function(){L.error("getGroups failed");});});return d.promise();};this.getGroupsForBookmarks=function(G){var d=q.Deferred();this.getGroups().then(function(e){this.getDefaultGroup().then(function(D){if(e.length>0){e=e.filter(function(f){if(G===true){return this.isGroupVisible(f);}return!this.isGroupLocked(f)&&this.isGroupVisible(f);}.bind(this));e=e.map(function(f){return{title:(f===D&&r.i18n.getText("my_group"))||this.getGroupTitle(f),object:f};}.bind(this));}d.resolve(e);}.bind(this),function(E){L.error("getGroupsForBookmarks - getDefaultGroup - failed: "+E.message);});}.bind(this),function(e){L.error("getGroupsForBookmarks - getGroups - failed: "+e.message);});return d.promise();};this.getDefaultGroup=function(){var p=this._getAdapter().getDefaultGroup();p.fail(function(){L.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(G){return this._getAdapter(G.contentProvider).getGroupTitle(G);};this.getGroupId=function(G){return this._getAdapter(G.contentProvider).getGroupId(G);};this.getGroupById=function(G){var D=q.Deferred(),t=this;this.getGroups().then(function(d){d=q.grep(d,function(e){return t.getGroupId(e)===G;});D.resolve((d&&d.length>0?d[0]:undefined));});return D.promise();};this.getGroupTiles=function(G){return this._getAdapter(G.contentProvider).getGroupTiles(G);};this.getTilesByGroupId=function(G){var D=q.Deferred(),t=this;this.getGroupById(G).then(function(d){if(d){var e=t._getAdapter(d.contentProvider).getGroupTiles(d);if(e){e=e.map(function(f){return{id:t.getTileId(f),title:t.getTileTitle(f),subtitle:t.getCatalogTilePreviewSubtitle(f),url:t.getCatalogTileTargetURL(f),icon:t.getCatalogTilePreviewIcon(f),groupId:G};});}else{e=[];}D.resolve(e);}else{D.resolve([]);}});return D.promise();};this.getLinkTiles=function(G){return this._getAdapter(G.contentProvider).getLinkTiles(G);};this.addGroupAt=function(s,i){var p,d=i,o=this._getAdapter();if(o.addGroupAt){p=o.addGroupAt(s,i);p.fail(function(){L.error("addGroup "+s+" failed");});}else{var D=new q.Deferred();p=o.addGroup(s);p.done(function(n){var m=this.moveGroup(n,d),e=n;m.done(function(){D.resolve(e);});m.fail(function(){D.reject();});}.bind(this));p.fail(function(){L.error("addGroup "+s+" failed");D.reject();});return D.promise();}return p;};this.addGroup=function(s){var p=this._getAdapter().addGroup(s);p.fail(function(){L.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(G,i){var p=this._getAdapter(G.contentProvider).removeGroup(G,i);p.fail(function(){L.error("Fail to removeGroup "+t.getGroupTitle(G));});return p;};this.resetGroup=function(G,i){var p=this._getAdapter(G.contentProvider).resetGroup(G,i);p.fail(function(){L.error("Fail to resetGroup "+t.getGroupTitle(G));});return p;};this.isGroupRemovable=function(G){return this._getAdapter(G.contentProvider).isGroupRemovable(G);};this.isGroupLocked=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupLocked==="function"){return o.isGroupLocked(G);}return false;};this.isGroupFeatured=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupFeatured==="function"){return o.isGroupFeatured(G);}return false;};this.moveGroup=function(G,n){var p=this._getAdapter(G.contentProvider).moveGroup(G,n);p.fail(function(){L.error("Fail to moveGroup "+t.getGroupTitle(G));});return p;};this.setGroupTitle=function(G,s){var p=this._getAdapter(G.contentProvider).setGroupTitle(G,s);p.fail(function(){L.error("Fail to set Group title: "+t.getGroupTitle(G));});return p;};this.hideGroups=function(h){var d=new q.Deferred(),o=this._getAdapter();if(typeof o.hideGroups!=="function"){d.reject("hideGroups() is not implemented in the Adapter.");}else{o.hideGroups(h).done(function(){d.resolve();}).fail(function(m){L.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupVisible==="function"){return o.isGroupVisible(G);}return true;};this.addTile=function(d,G){return this._getAdapter(G.contentProvider).addTile(d,G).fail(function(){L.error("Fail to add Tile: "+t.getCatalogTileId(d));});};this.removeTile=function(G,d,i){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(e){this._getAdapter(G.contentProvider).removeTile(G,d,i).done(function(){var s=this.getCatalogTileTargetURL(d);this.deleteURLStatesPersistentData(s,e);D.resolve();}.bind(this)).fail(function(f){L.error("Fail to remove Tile: "+this.getTileId(d));D.reject(f);}.bind(this));}.bind(this)).catch(D.reject);return D.promise();};this.moveTile=function(d,s,i,S,e,n){var p=this._getAdapter().moveTile(d,s,i,S,e,n);p.fail(function(){L.error("Fail to move Tile: "+t.getTileId(d));});return p;};this.isLinkPersonalizationSupported=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.isLinkPersonalizationSupported==="function"){return o.isLinkPersonalizationSupported(d);}return false;};this.getTileId=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileId(d);};this.getTileTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileTitle(d);};this.getTileType=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(o.getTileType){return o.getTileType(d);}return"tile";};this.getTileView=function(d){var s=d&&d.contentProvider,D=this._getAdapter(s).getTileView(d);if(!q.isFunction(D.promise)){D=new q.Deferred().resolve(D).promise();}return D;};this.getCardManifest=function(G){var s=G&&G.contentProvider;return this._getAdapter(s).getCardManifest(G);};this.getAppBoxPressHandler=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(o.getAppBoxPressHandler){return o.getAppBoxPressHandler(d);}return undefined;};this.getTileSize=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileSize(d);};this.getTileTarget=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileTarget(d);};this.getTileDebugInfo=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.getTileDebugInfo==="function"){return o.getTileDebugInfo(d);}return undefined;};this.isTileIntentSupported=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.isTileIntentSupported==="function"){return o.isTileIntentSupported(d);}return true;};this.refreshTile=function(d){var s=d&&d.contentProvider;this._getAdapter(s).refreshTile(d);};this.setTileVisible=function(d,n){var s=d&&d.contentProvider;return this._getAdapter(s).setTileVisible(d,n);};this.registerTileActionsProvider=function(p){if(typeof p!=="function"){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(d){var e=[],f,s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.getTileActions==="function"){f=o.getTileActions(d);if(f&&f.length&&f.length>0){e.push.apply(e,f);}}for(var i=0;i<T.length;i++){f=T[i](d);if(f&&f.length&&f.length>0){e.push.apply(e,f);}}return e;};this.getCatalogs=function(){return this._getAdapter().getCatalogs();};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid();};this.getCatalogData=function(d){var l=this._getAdapter();if(typeof l.getCatalogData!=="function"){L.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(d)};}return l.getCatalogData(d);};this.getCatalogError=function(d){return this._getAdapter().getCatalogError(d);};this.getCatalogId=function(d){return this._getAdapter().getCatalogId(d);};this.getCatalogTitle=function(d){return this._getAdapter().getCatalogTitle(d);};this.getCatalogTiles=function(d){var p=this._getAdapter().getCatalogTiles(d);p.fail(function(){L.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(d));});return p;};this.getCatalogTileId=function(d){return this._getAdapter(d.contentProvider).getCatalogTileId(d);};this.getCatalogTileTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileTitle(d);};this.getCatalogTileSize=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileSize(d);};this.getCatalogTileViewControl=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileViewControl==="function"){return l.getCatalogTileViewControl(d);}var D=new q.Deferred(),R=this.getCatalogTileView(d);D.resolve(R);return D.promise();};this.getCatalogTileView=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileView(d);};this.getCatalogTileTargetURL=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileTargetURL(d);};this.getCatalogTileTags=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileTags==="function"){return l.getCatalogTileTags(d);}return[];};this.getCatalogTileKeywords=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileKeywords(d);};this.getCatalogTilePreviewTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTilePreviewTitle(d);};this.getCatalogTilePreviewInfo=function(d){var s=d&&d.contentProvider;if(this._getAdapter(s).getCatalogTilePreviewInfo){return this._getAdapter(s).getCatalogTilePreviewInfo(d);}return"";};this.getCatalogTilePreviewSubtitle=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(l.getCatalogTilePreviewSubtitle){return l.getCatalogTilePreviewSubtitle(d);}};this.getCatalogTilePreviewIcon=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTilePreviewIcon(d);};this.addBookmark=function(p,G,s){var d=new q.Deferred();if(this._hasRequiredBookmarkParameters(p)){if(G&&this.isGroupLocked(G)){var m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";L.error(m);return d.reject(m);}this.changeURLStatesToPersistent(p.url).done(function(n){var e=G&&G.contentProvider;p.url=n;this._getAdapter(e).addBookmark(p,G,s).done(d.resolve).fail(function(){L.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);d.reject();});}.bind(this)).fail(function(M){L.error(M||"Fail to change url states to persistent: "+p.url);d.reject();});}return d.promise();};this.addCustomBookmark=function(B,G,s){var d=new q.Deferred();if(this._hasRequiredBookmarkParameters(B)){if(G&&this.isGroupLocked(G)){var m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";L.error(m);return d.reject(m);}this.changeURLStatesToPersistent(B.url).done(function(n){var e=G&&G.contentProvider;B.url=n;this._getAdapter(e).addCustomBookmark(B,G,s).done(d.resolve).fail(function(){L.error("Fail to add bookmark for URL: "+B.url+" and Title: "+B.title);d.reject();});}.bind(this)).fail(function(M){L.error(M||"Fail to change url states to persistent: "+B.url);d.reject();});}return d.promise();};this._hasRequiredBookmarkParameters=function(p){if(!p.title){L.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){L.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}return true;};this.countBookmarks=function(u,s){if(!u||typeof u!=="string"){L.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=this._getAdapter().countBookmarks(u,s);p.fail(function(){L.error("Fail to count bookmarks");});return p;};this.countCustomBookmarks=function(i){if(!i.url||!i.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().countCustomBookmarks(i);};this.deleteBookmarks=function(u,s){var d=new q.Deferred();if(!u||typeof u!=="string"){return d.reject(new Error("Missing URL")).promise();}sap.ushell.Container.getServiceAsync("AppState").then(function(e){this._getAdapter().deleteBookmarks(u,undefined,s).done(function(i){this.deleteURLStatesPersistentData(u,e);d.resolve(i);}.bind(this)).fail(function(f){L.error("Fail to delete bookmark for: "+u);d.reject(f);});}.bind(this)).catch(d.reject);return d.promise();};this.deleteCustomBookmarks=function(i){if(!i.url||!i.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().deleteCustomBookmarks(i);};this.updateBookmarks=function(u,p,s){if(!u||typeof u!=="string"){L.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){L.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=new q.Deferred();this.changeURLStatesToPersistent(p.url).done(function(n){p.url=n;this._getAdapter().updateBookmarks(u,p,undefined,s).done(P.resolve).fail(function(){L.error("Fail to update bookmark for: "+u);P.reject();});}.bind(this)).fail(function(m){L.error(m||"Fail to change url states to persistent: "+p.url);P.reject();});return P.promise();};this.updateCustomBookmarks=function(i,B){if(!i.url||!i.vizType||!B){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().updateCustomBookmarks(i,B);};this.onCatalogTileAdded=function(s){return this._getAdapter().onCatalogTileAdded(s);};this.changeURLStatesToPersistent=function(u){var d=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(f){if(f.getSupportedPersistencyMethods().length===0){d.resolve(u);return;}if(u&&u.length>0){try{f.setAppStateToPublic(u).done(d.resolve).fail(d.reject);}catch(e){L.error("error in converting transient state to personal persistent when bookmark is added",e,"sap.ushell.services.LaunchPage");d.reject();}}else{d.resolve(u);}});return d.promise();};this.deleteURLStatesPersistentData=function(u,d){if(d.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined||i!==undefined){this.countBookmarks(u).done(function(f){if(f===0){if(x!==undefined){d.deleteAppState(x);}if(i!==undefined){d.deleteAppState(i);}}});}}catch(e){L.error("error in deleting persistent state when bookmark is deleted",e,"sap.ushell.services.LaunchPage");}}};function g(u,p){var R=new RegExp("(?:"+p+"=)([^&/]+)"),s=R.exec(u),v=undefined;if(s&&s.length===2){v=s[1];}return v;}}b.prototype._getAdapter=function(s){return this.oAdapters[s]||this.oAdapters.default;};b.hasNoAdapter=false;return b;},true);
sap.ui.predefine('sap/ushell/services/Menu',["sap/ushell/Config","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/base/Log"],function(C,U,J,d,L){"use strict";function M(){this._init.apply(this,arguments);}M.prototype._init=function(a){this.oAdapter=a;this.oModel=new J();this._aBlockedList=[];};M.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled();};M.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(m){return m.map(function(o){o.uid=U.generateUniqueId([]);if(o.menuEntries){o.menuEntries.forEach(function(s){s.uid=U.generateUniqueId([]);});}return o;});});};M.prototype.getSpacesPagesHierarchy=function(){return this.getMenuEntries().then(function(m){return{spaces:m.reduce(function(s,o){var p;if(o.menuEntries&&o.menuEntries.length){p=this._getAccessiblePages(o.menuEntries);}else{p=this._getAccessiblePages([o]);}if(p.length){s.push({title:o.title,id:p[0].spaceId,pages:p.map(function(P){return{title:P.title,id:P.id};})});}return s;}.bind(this),[])};}.bind(this)).catch(function(){return{spaces:[]};});};M.prototype.getDefaultPage=function(){return this.getSpacesPagesHierarchy().then(function(s){var S=s.spaces.find(function(o){return(!!(o.id&&o.pages&&o.pages[0]&&o.pages[0].id));});return S.pages[0];});};M.prototype.getMyHomeSpace=function(){if(!C.last("/core/spaces/myHome/enabled")){return Promise.resolve(null);}var m=C.last("/core/spaces/myHome/myHomeSpaceId");return this.getSpacesPagesHierarchy().then(function(s){return s.spaces.find(function(S){return S.id===m;})||null;});};M.prototype._getAccessiblePages=function(m){return m.filter(function(o){return o&&o.type==="IBN"&&o.target&&o.target.semanticObject==="Launchpad"&&o.target.action==="openFLPPage";}).map(function(o){var s=o.target.parameters.find(function(P){return P.name==="spaceId";});var p=o.target.parameters.find(function(P){return P.name==="pageId";});return{title:o.title,id:p&&p.value,spaceId:s&&s.value};});};M.prototype.hasMultiplePages=function(s){return this.getSpacesPagesHierarchy().then(function(h){var S=h.spaces.find(function(a){return a.id===s;});return S&&S.pages.length>1;});};M.prototype.isSpacePageAssigned=function(s,p){return this.getSpacesPagesHierarchy().then(function(h){var S=h.spaces.find(function(a){return a.id===s;});if(!S){return false;}var P=S.pages.find(function(a){return a.id===p;});return!!P;});};M.prototype.getSpaceAndPageTitles=function(s,p){return this.getSpacesPagesHierarchy().then(function(h){var S,P;S=h.spaces.find(function(a){return a.id===s;});if(S){P=S.pages.find(function(a){return a.id===p;});}if(P){return{spaceTitle:S.title,pageTitle:P.title};}return null;});};M.prototype.getMenuModel=function(){return this.getMenuEntries().then(function(e){this.oModel.setData(e);return this.oModel;}.bind(this));};M.prototype._getNodeInfo=function(n,a,b,m){var N;for(var i=0;i<a.length;i++){if(!b){m=this._getManagerIdInNodeTree(n,a[i]);}if(a[i].id===n){return{node:a[i],isRootNode:!b,managerId:m||null};}if(a[i].menuEntries&&a[i].menuEntries.length>0){N=this._getNodeInfo(n,a[i].menuEntries,true,m);if(N.node){return N;}}}return{node:null,isRootNode:false,managerId:null};};M.prototype._nodeManagementPermitted=function(n,r,m){var N=this._getNodeInfo(n,r);if(!N.node){L.error("Node with id "+n+" cannot be found and will be skipped.");return false;}if(!!N.managerId&&N.managerId!==m){L.error("Node with id "+n+" cannot be managed by '"+m+"'"+" because it is already managed by '"+N.managerId+"'.");return false;}return true;};M.prototype._getManagerIdInNodeTree=function(n,a,m){if(a.id===n){return m||a.managerId;}if(a.managerId){m=a.managerId;}if(a.menuEntries&&a.menuEntries.length>0){for(var i=0;i<a.menuEntries.length;++i){m=this._getManagerIdInNodeTree(n,a.menuEntries[i],m);}return m;}return null;};M.prototype._updateNode=function(n,a,m){var t=d(m||{});function b(c){if(c){c.uid=c.uid||U.generateUniqueId([]);(c.menuEntries||[]).forEach(b);}}b(t);return a.map(function(c){if(c.id===n){return t;}if(c.menuEntries&&c.menuEntries.length>0){c.menuEntries=this._updateNode(n,c.menuEntries,t);}return c;}.bind(this));};M.prototype._createEntryProviders=function(m,n,a){var N=a.getData();var o={};var s;for(var i=0;i<n.length;++i){s=n[i];if(!this._nodeManagementPermitted(s,N,m)){continue;}o[s]={setData:function(b,c){var u=this._updateNode(b,N,c);a.setData(u);}.bind(this,s)};}return o;};M.prototype._isManagerBlocked=function(m){return this._aBlockedList.indexOf(m)>-1;};M.prototype._setManagerBlocked=function(m){this._aBlockedList.push(m);};M.prototype.getEntryProvider=function(p,n){if(this._isManagerBlocked(p)){L.error("ManagerId '"+p+"' is already listed as an entry manager.");return Promise.reject("ManagerId "+p+" is already listed as an entry manager.");}this._setManagerBlocked(p);return this.getMenuModel().then(function(m){return this._createEntryProviders(p,n,m);}.bind(this));};M.hasNoAdapter=false;return M;});
sap.ui.predefine('sap/ushell/services/Message',["sap/base/Log","sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/m/library","sap/ui/core/library"],function(L,M,C,r,D,T,a,B,V,F,m,c){"use strict";var b=m.ButtonType;var d=m.DialogType;var e=c.ValueState;var f=m.FlexRendertype;function g(){var s;this.init=function(S){s=S;return this;};this.show=function(t,h,p){if(!h){L.error("Message must not be empty.");return;}if(s&&typeof s==="function"){s(t,h,p||{});}else{this.buildMessage(t,h,p||{});}};this.buildMessage=function(t,h,p){var o={title:p.title,actions:p.actions,details:p.details,onClose:p.callback,emphasizedAction:p.emphasizedAction},i;switch(t){case g.Type.ERROR:this._createAndOpenErrorDialog(h,o);return;case g.Type.CONFIRM:if(!p.actions){i="confirm";}else if(p.actions.indexOf("DELETE")>-1){i="warning";o.emphasizedAction=M.Action.DELETE;}else{o.icon=M.Icon.QUESTION;i="show";}break;case g.Type.INFO:i="info";this.buildAndSendMessageToast(h,p.duration||3000);return;default:o={duration:p.duration||3000};i="show";break;}this.sendMessageBox(h,i,o);};this._copyToClipboard=function(h,i,j){var k=i.details;if(typeof i.details==="object"){k=JSON.stringify(i.details,null,"\t");}var l=["Title: "+(j||"-"),"Message: "+(h||"-"),"Details: "+(k||"-")];var E=document.activeElement,t=document.createElement("textarea"),n;try{t.contentEditable=true;t.readonly=false;t.innerText=l.join("\n");document.documentElement.appendChild(t);if(navigator.userAgent.match(/ipad|iphone/i)){var R=document.createRange();R.selectNodeContents(t);window.getSelection().removeAllRanges();window.getSelection().addRange(R);t.setSelectionRange(0,999999);}else{t.select();}var S=document.execCommand("copy");n=S?"CopyWasSuccessful":"CopyWasNotSuccessful";}catch(o){n="CopyWasNotSuccessful";}finally{this.buildAndSendMessageToast(r.i18n.getText(n));document.documentElement.removeChild(t);window.getSelection().removeAllRanges();E.focus();}};this._createAndOpenErrorDialog=function(h,i){var v=i.details;var o;if(v){o=new F({htmlText:typeof v==="object"?v.info:v});}var E=this.errorWithDetails(h,o,i.title);if(sap.ushell.Container&&C.last("/core/extension/SupportTicket")&&h!==r.i18n.getText("supportTicketCreationFailed")){E.addButton(new B({text:r.i18n.getText("contactSupportBtn"),tooltip:r.i18n.getText("contactSupportBtn_tooltip"),press:function(){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(j){var k=new j();if(k){k.showContactSupportDialog();k.destroy();}});E.close();}}));}if(document.queryCommandSupported("copy")){E.addButton(new B({text:r.i18n.getText("CopyToClipboardBtn"),tooltip:r.i18n.getText("CopyToClipboardBtn_tooltip"),press:this._copyToClipboard.bind(this,h,i,E.getTitle())}));}E.addButton(new B({text:r.i18n.getText("closeBtn"),type:b.Emphasized,press:E.close.bind(E)}));};this.buildAndSendMessageToast=function(h,i){sap.ui.require(["sap/m/MessageToast"],function(j){j.show(h,{duration:i});});};this.sendMessageBox=function(h,t,o){if(typeof M[t]==="function"){M[t](h,o);}else{L.error("Unknown Message type: "+t,null,"Message Service");}};this.info=function(h,i){this.show(g.Type.INFO,h,{duration:i||3000});};this.error=function(h,t){L.error(h);this.show(g.Type.ERROR,h,{title:t});};this.confirm=function(h,i,t,A){this.show(g.Type.CONFIRM,h,{title:t,callback:i,actions:A});};this.errorWithDetails=function(h,i,t,j){if(Array.isArray(i)){j=i;i=null;}if(typeof i==="string"){j=t;t=i;i=null;}var o=new T({text:h,visible:!!h});if(i){o.addStyleClass("sapUiSmallMarginBottom");}var E=new D({state:e.Error,type:d.Message,contentWidth:"30rem",title:t||r.i18n.getText("error"),content:[new V({renderType:f.Bare,items:[o,new a({text:r.i18n.getText("ViewDetails"),visible:!!i,press:function(){E.getContent()[0].addItem(i);this.destroy();}})]})],buttons:j,endButton:new B({text:r.i18n.getText("closeBtn"),type:b.Emphasized,press:function(){E.close();}}),afterClose:function(){this.destroy();}}).addStyleClass("sapContrastPlus");E.open();return E;};}g.Type={INFO:0,ERROR:1,CONFIRM:2};g.hasNoAdapter=true;return g;},true);
sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/base/Log"],function(b,u,U,c,n,q,M,d,e,f,L){"use strict";function N(A,C,p,s){var S=s&&s.config,r=function(h){var a=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return a;}.bind(this),l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],o;this._isClientSideTargetResolutionEnabled=function(){return!!(S&&S.enableClientSideTargetResolution);};this._nextResolveHashFragment=function(a,h){var g=a.pop();if(g.isApplicable(h)){L.info("NavTargetResolution: custom resolver "+g.name+" resolves "+h);var i=this._nextResolveHashFragment.bind(this,a);return g.resolveHashFragment(h,i);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),F;if(!H.success){return new q.Deferred().reject(h+" is not a valid hash fragment").promise();}F=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(F);};this._resolveHashFragmentClientSideAndFixApplicationType=function(F){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.resolveHashFragment(F).done(function(g){if(g&&g.applicationType==="SAPUI5"){g.applicationType="URL";}D.resolve(g);}).fail(D.reject);}).catch(D.reject);return D.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var P,D=new q.Deferred();P=U.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getServiceAsync("AppState").then(function(a){a.getAppState(P.params["sap-intent-param"][0]).done(function(g){var v=g.getData("sap-intent-param");var H=h;if(v){H=c.expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}D.resolve(H);}).fail(function(){D.resolve(h);});}).catch(D.reject);}else{D.resolve(h);}return D.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(a){var m,g;if(typeof a!=="object"){return;}delete a["sap.platform.runtime"];if(a&&a.applicationType&&a.applicationType==="SAPUI5"){a.applicationType="URL";}if(a.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(a.additionalInformation);g=m&&m[1];if(g){a.ui5ComponentName=g;}}};this._getSapSystem=function(h,a){var g;if(a&&a["sap-system"]){return a["sap-system"];}if(a&&a.url){g=(new f(a.url)).get("sap-system");if(g){return g;}}if(w.indexOf(a.applicationType)>=0&&h&&h.substring(1)){g=(new f(h.substring(1))).get("sap-system");if(g){return g;}}return undefined;};this.resolveTarget=function(a){var h;var g=d({},a);var D=new q.Deferred();M.average("sap.ushell.navigation.resolveTarget");u.storeSapSystemToLocalStorage(g);h=U.constructShellHash(g);sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(i){i.resolveHashFragment("#"+h).done(function(j){M.end("sap.ushell.navigation.resolveTarget");D.resolve({url:j.url,text:j.text,externalNavigationMode:j.externalNavigationMode});}).fail(D.reject);}).catch(D.reject);return D.promise();};this.resolveHashFragment=function(h){var D=new q.Deferred();M.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){var E=q.when();if(H.indexOf("sap-ushell-enc-test")>=0){var m=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(H);if(m){var a=m[1];if(a!=="A%20B%2520C"){E=new q.Deferred();sap.ushell.Container.getServiceAsync("Message").then(function(g){g.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");E.resolve();}).catch(E.reject);}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"");}}var P=this._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}q.when(P,E).done(function(g){this._adjustResolutionResultForUi5Components(g);if(e(g)){if(!g.hasOwnProperty("navigationMode")){g.navigationMode=n.getNavigationMode(g,b.getCurrentApplication());}g.targetNavigationMode=n.getExternalNavigationMode(g.navigationMode);}if(e(g)&&!g.hasOwnProperty("sap-system")){var i=this._getSapSystem(h,g);if(i){g["sap-system"]=i;}}M.end("sap.ushell.navigation.resolveHashFragment");D.resolve(g);}.bind(this)).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};this._invokeResolveHashChain=function(h){var g=R.map(function(a){return a;});return this._nextResolveHashFragment(g,h).done(function(a){o=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){L.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var g=a.semanticObject;var P=a.params;var i=a.ignoreFormFactor;var h=a.ui5Component;var j=a.appStateKey;var k=a.compactIntents;var D=new q.Deferred();if(/\?/.test(g)){throw new Error("Parameter must not be part of semantic object");}var m=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(j){m=m||{};m["sap-xapp-state"]=encodeURIComponent(j);}var t=this._getGetLinksResolver(a);if(t.warning){L.warning("A problem occurred while determining the resolver for getLinks",t.warning,"sap.ushell.services.NavTargetResolution");}var v=t.resolver;if(v){var H=function(y){if(k){this._shortenGetSemanticObjectLinksResults(y,h).done(D.resolve);}else{D.resolve(y);}}.bind(this);if(t.isGetSemanticObjectLinksCall){var x={target:{semanticObject:g,action:"dummyAction"},params:m};sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(y){y.hrefForExternal(x,true,h,true).done(function(z){var B=z.params||m;v(g,B,i).done(H).fail(D.reject);}).fail(D.reject);});}else{v(a).done(H).fail(D.reject);}}else{D.resolve([]);}return D.promise();};this.getDistinctSemanticObjects=function(){var D=new q.Deferred();if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.getDistinctSemanticObjects().done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}L.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return D.reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var D=new q.Deferred();var g=new q.Deferred();if((a.params||{}).hasOwnProperty("sap-intent-param")){var h="#"+a.semanticObject+"-dummyAction?"+U.paramsToString(a.params);this.expandCompactHash(h).done(function(E){var P=U.parseShellHash(E);g.resolve(P.params);}).fail(D.reject);}else{g.resolve(a.params);}g.done(function(){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(i){i.getLinks(a).done(D.resolve).fail(D.reject);}).catch(D.reject);});return D.promise();};this._shortenGetSemanticObjectLinksResults=function(g,a){var h=[];var i=0;var P=g.length;var D=new q.Deferred();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){g.forEach(function(I){var k=U.parseShellHash(I.intent);var m=j.compactParams(k.params,undefined,a);h.push(m);h[i].done(function(t,v){h[t]={text:I.text,intent:"#"+k.semanticObject+"-"+k.action+"?"+U.paramsToString(v)};}.bind(null,i)).fail(function(t,v){L.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+v+"; intent had title ''"+I.title+"'' and link ''"+I.intent+"'","sap.ushell.services.NavTargetResolution");h[t]={text:I.text,intent:I.intent};}.bind(null,i)).always(function(){P--;if(P===0){D.resolve(h);}});i++;});}).catch(D.reject);return D.promise();};this.isIntentSupported=function(i){var m={};var D=new q.Deferred();if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.isIntentSupported(i).done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(I){m[I]={supported:undefined};});return D.resolve(m).promise();};this.isNavigationSupported=function(i){var D=new q.Deferred(),I=[];I=i.map(function(a){if(typeof a==="string"){return a;}return"#"+U.constructShellHash(a);});this.isIntentSupported(I).done(function(a){var g=I.map(function(h){return a[h]||{supported:false};});D.resolve(g);}).fail(D.reject.bind(D));return D.promise();};this.registerCustomResolver=function(a){if(typeof a.name!=="string"){L.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof a.isApplicable!=="function"){L.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof a.resolveHashFragment!=="function"){L.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(a);return true;};if(S&&Array.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=U.parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(O){var h=this.cleanHash(O);return l.indexOf(h.substring(1));},isApplicable:function(O){return this._getIndex(O)>=0;},resolveHashFragment:function(h){var D,i=this._getIndex(h),a,g,j,k;D=new q.Deferred();a=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));g=U.parseShellHash(h);if(g&&g.params){k=U.paramsToString(g.params);if(k){j=a.url.indexOf("?")>=0;a.url=a.url+(j?"&":"?")+k;}}D.resolve(a);return D.promise();}});}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=U.parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear";},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement("a");}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var D=new q.Deferred(),a=null,g,i,j,P,k,t=this;h=this.cleanHash(h);if(!h){return false;}a={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},none:{applicationType:"URL",url:"",additionalInformation:""}};function m(K){if(localStorage){return localStorage[K];}return undefined;}function v(z){if(u.calculateOrigin(t.parseUrl(z))!==u.calculateOrigin(window.location)){return undefined;}return z;}function x(K){return(new f(window.location.href)).get(K);}function y(K,V){if(localStorage){localStorage[K]=V;}}if(a[h]){g=a[h];}else if(h==="#Test-clear"){y("sap.ushell.#Test-local1",undefined);y("sap.ushell.#Test-local2",undefined);L.info("NavTargetResolution: Local storage keys for #Test have been cleared");g=a["#Test-config"];}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){g=m("sap.ushell."+h);if(!g||g==="undefined"){i={applicationType:"URL"};}else{i=JSON.parse(g);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){P="sap-ushell-test-"+h.substring(6);j=x(P+"-additionalInformation");if(j){i.additionalInformation=j;}k=x(P+"-url");if(k){i.url=v(k);}}if(!i.url){L.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");L.info("NavTargetResolution: Defaulting to config app ...\n");D.reject("URL is not resolvable");return D.promise();}i.url=v(i.url);g=i;}if(g.url===undefined){D.reject("URL is not resolvable");return D.promise();}L.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((g&&g.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((g&&g.additionalInfo)||"")+"#Test-local1");L.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(g));D.resolve(g);return D.promise();}});this.getCurrentResolution=function(){return o;};}N.hasNoAdapter=false;return N;},true);
sap.ui.predefine('sap/ushell/services/NavigationDataProvider',["sap/ushell/resources"],function(r){"use strict";function N(){this.S_COMPONENT_NAME="sap.ushell.services.NavigationDataProvider";this._init.apply(this,arguments);}N.prototype._init=function(a,s){this.oAdapter=a;};N.prototype.getNavigationData=function(){return new Promise(function(a,b){var s=(this.oAdapter.getSystemAliases&&this.oAdapter.getSystemAliases())||{};this.oAdapter.getInbounds().then(function(i){a({systemAliases:s,inbounds:i});}).fail(function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("NavigationDataProvider.CannotLoadData"),detail:e};b(E);}.bind(this));}.bind(this));};N.hasNoAdapter=false;return N;});
sap.ui.predefine('sap/ushell/services/PageBuilding',["sap/ushell_abap/pbServices/ui2/Factory","sap/ushell_abap/pbServices/ui2/Page","sap/ui/thirdparty/jquery"],function(F,P,q){"use strict";function a(A,c){this.getFactory=function(){return A.getFactory();};this.getPage=function(p){return A.getFactory().createPage(p);};this.getPageSet=function(i){var d=new q.Deferred();A.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};}a.hasNoAdapter=false;return a;},true);
sap.ui.predefine('sap/ushell/services/PagePersistence',[],function(){"use strict";function P(){this._init.apply(this,arguments);}P.prototype._init=function(a,s){this._oServiceConfiguration=s;this.oAdapter=a;this._pagesCache=[];};P.prototype.getPage=function(i){if(!this._pagesCache[i]){this._pagesCache[i]=this.oAdapter.getPage(i);}return this._pagesCache[i];};P.prototype.getPages=function(i){return this.oAdapter.getPages(i);};P.hasNoAdapter=false;return P;});
sap.ui.predefine('sap/ushell/services/Pages',["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(L,R,d,e,a,r,u,C,b,c,f){"use strict";var P=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oURLParsingServicePromise=sap.ushell.Container.getServiceAsync("URLParsing");this._oCSTRServicePromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new R({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[];};P.prototype._generateId=function(p){var i=[];var o=this.getModel().getProperty(this.getPagePath(p));o.sections.forEach(function(s){i.push(s.id);s.visualizations.forEach(function(v){i.push(v.id);});});return u.generateUniqueId(i);};P.prototype.getModel=function(){return this._oPagesModel;};P.prototype.enableImplicitSave=function(E){this._bImplicitSaveEnabled=E;};P.prototype.getPageIndex=function(p){var g=this._oPagesModel.getProperty("/pages");for(var i=0;i<g.length;++i){if(g[i].id===p){return i;}}return undefined;};P.prototype.getPagePath=function(p){var i=this.getPageIndex(p);if(typeof i==="undefined"){return"";}return"/pages/"+i;};P.prototype.loadPage=function(p){var s=this.getPagePath(p);if(s){return Promise.resolve(s);}return this._oCdmServicePromise.catch(function(E){L.error("Pages - loadPage: Couldn't resolve CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([o.getPage(p),o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes()]);}).then(function(g){var o=g[0];var v=g[1];var A=g[2];var V=g[3];return this._getModelForPage(o,v,A,V);}.bind(this)).then(function(m){var i=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+i;this._oPagesModel._setProperty(n,m);return n;}.bind(this)).catch(function(E){L.error("Pages - loadPage: Failed to gather site data.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));};P.prototype.findVisualization=function(p,s,v,V){return this._oCdmServicePromise.catch(function(E){L.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([this.loadPage(p),o.getCachedVisualizations(),o.getApplications()]).then(function(g){var h=g[0];var i=this.getModel().getProperty(h+"/sections")||[];return i.reduce(function(j,k,l){if(s&&k.id!==s){return j;}var m=k.visualizations.reduce(function(n,q,t){if(v&&q.vizId===v||V&&q.id===V){n.push(t);}return n;},[]);if(m.length){j.push({pageId:p,sectionIndex:l,vizIndexes:m});}return j;},[]);}.bind(this)).catch(function(E){L.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));}.bind(this));};P.prototype.moveVisualization=function(p,s,S,t,T){if(s===t&&S===T){return Promise.resolve({visualizationIndex:T});}this.setPersonalizationActive(true);var o=this._oPagesModel.getProperty("/pages/"+p);var g=o.id;var h=o.sections[s];var i=o.sections[t];var j=h.id;var k=i.id;var m=h.visualizations[S];var M=m.id;h.visualizations.splice(S,1);if(T===-1){T=i.visualizations.length;}i.visualizations.splice(T,0,m);var l;if(i.visualizations[T]){l=T-1;}else{l=i.visualizations.length-2;}var n;if(i.visualizations[l]){n=i.visualizations[l].id;}if(h.default&&!h.visualizations.length){o.sections.splice(s,1);}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(q){return q.getPage(g);}).catch(function(E){L.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(q){var v=q.payload.sections[j];var w=v.layout.vizOrder;var x=v.viz;var y=q.payload.sections[k];var z=y.layout.vizOrder;var A=y.viz;var B=d(x[M]);var D=w.indexOf(M);w.splice(D,1);var E=n?z.indexOf(n)+1:0;z.splice(E,0,M);if(j!==k){delete x[M];A[M]=B;}if(v.default&&!Object.keys(x).length){delete q.payload.sections[j];q.payload.layout.sectionOrder.splice(s,1);}return this._conditionalSavePersonalization(g);}.bind(this)).then(function(){return{visualizationIndex:T};}).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.deleteVisualization=function(p,s,S){var o=this._oPagesModel.getProperty("/pages/"+p);var g=o.sections[s];if(g.default&&g.visualizations.length<2){return this.deleteSection(p,s);}this.setPersonalizationActive(true);var h=g.visualizations;var i=h[S];h.splice(S,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(j){return j.getPage(o.id);}).catch(function(E){L.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(j){var k=j.payload.sections[g.id].layout.vizOrder;var v=j.payload.sections[g.id].viz;var l=k.indexOf(i.id);delete v[i.id];if(l>-1){k.splice(l,1);}return this._conditionalSavePersonalization(j.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype._getSectionIndex=function(p,s){var S=this.getModel().getProperty(p+"/sections")||[],i=0;for(;i<S.length;i+=1){if(S[i].id===s){return i;}}};P.prototype._getVisualizationData=function(p,v,V,A,o,g,U,s){var h=A||{vizId:v};var S={applications:o,visualizations:V,vizTypes:g};var i=c.getVizData(S,h,U,s);if(!i.id){i.id=this._generateId(p);}return i;};P.prototype.addVisualization=function(p,s,v){return this._oCdmServicePromise.catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([this.loadPage(p),o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes(),this._oURLParsingServicePromise]).catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){var h=g[0],U=g[4],S=this._getSectionIndex(h,s),j=this.getModel().getProperty(h+"/sections")||[],V=this._getVisualizationData(p,v,g[1],null,g[2],g[3],U);var D;for(var i=0;i<j.length;i++){if(j[i].default){D=i;}}if(S!==undefined||D!==undefined){this.setPersonalizationActive(true);var k=S!==undefined?S:D||0,l=h+"/sections/"+k+"/visualizations";this.getModel().getProperty(l).push(V);this.getModel().refresh();return o.getPage(p).catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(n){var q=n.payload.sections[s||n.payload.layout.sectionOrder[0]];q.layout.vizOrder.push(V.id);q.viz[V.id]={id:V.id,vizId:v};return this._conditionalSavePersonalization(p);}.bind(this));}var m=parseInt(h.split("/")[2],10);return this.addSection(m,0,{title:r.i18n.getText("DefaultSection.Title"),default:true,visualizations:[V]});}.bind(this));}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.copyVisualization=function(p,s,v){var i=v.isBookmark;if(!i){return this.addVisualization(p,s,v.vizId);}return this.addBookmarkToPage(p,{title:v.title,subtitle:v.subtitle,url:v.targetURL,icon:v.icon,info:v.info,serviceUrl:v.indicatorDataSource?v.indicatorDataSource.path:"",serviceRefreshInterval:v.indicatorDataSource?v.indicatorDataSource.refresh:"",numberUnit:v.numberUnit,vizType:v.vizType,oVizConfig:v.vizConfig},s);};P.prototype.moveSection=function(p,s,t){if(s===t){return Promise.resolve();}this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections");var m=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s);var M=m.id;S.splice(s,1);if(s<t){t--;}S.splice(t,0,m);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(o){return o.getPage(g);}).catch(function(E){L.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){var h=o.payload.layout.sectionOrder;h.splice(h.indexOf(M),1);h.splice(t,0,M);return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.addSection=function(p,s,S){this.setPersonalizationActive(true);var o=S||{},g=this._oPagesModel.getProperty("/pages/"+p+"/sections"),h=this._oPagesModel.getProperty("/pages/"+p+"/id");var n={id:o.id!==undefined?o.id:this._generateId(h),title:o.title!==undefined?o.title:"",visible:o.visible!==undefined?o.visible:true,preset:o.preset!==undefined?o.preset:false,locked:o.locked!==undefined?o.locked:false,default:o.default!==undefined?o.default:false,visualizations:o.visualizations!==undefined?o.visualizations:[]};g.splice(s,0,n);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(i){return i.getPage(h);}).catch(function(E){L.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(j){var k={id:n.id,title:n.title,visible:n.visible,preset:n.preset,locked:n.locked,default:n.default,layout:{vizOrder:[]},viz:{}};if(n.visualizations){var i=0,v;for(;i<n.visualizations.length;i++){v=n.visualizations[i];k.layout.vizOrder.push(v.id);if(v.isBookmark){k.viz[v.id]=c.getVizRef(v);}else{k.viz[v.id]={id:v.id,vizId:v.vizId};}}}j.payload.layout.sectionOrder.splice(s,0,n.id);j.payload.sections[n.id]=k;return this._conditionalSavePersonalization(h);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.deleteSection=function(p,s){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections");var h=S[s].id;S.splice(s,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(o){return o.getPage(g);}).catch(function(E){L.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){delete o.payload.sections[h];o.payload.layout.sectionOrder.splice(s,1);return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.setSectionVisibility=function(p,s,v){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s+"/id");var o=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s);if(o.visible===v){return Promise.resolve();}o.visible=v;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(h){return h.getPage(g);}).catch(function(E){L.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(h){h.payload.sections[S].visible=v;return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.renameSection=function(p,s,n){this.setPersonalizationActive(true);var o=this._oPagesModel.getProperty("/pages/"+p);var S=o.sections[s];S.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(g){return g.getPage(o.id);}).catch(function(E){L.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){g.payload.sections[S.id].title=n;return this._conditionalSavePersonalization(g.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.resetSection=function(p,s){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s+"/id");return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getPage(g),o.getOriginalPage(g),o.getCachedVizTypes()]);}).catch(function(E){L.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(h){var v=h[0];var A=h[1];var o=h[2];var O=h[3];var V=h[4];return Promise.all([this._getModelForPage(O,v,A,V),o,O]);}.bind(this)).then(function(h){var o=h[0];var i=h[1];var O=h[2];var j=d(o.sections.find(function(m){return m.id===S;}),20);var k=j.visualizations.map(function(v){return v.id;});var l=this._oPagesModel.getProperty("/pages/"+p);l.sections.forEach(function(m){if(j.id!==m.id){m.visualizations.forEach(function(v){if(k.indexOf(v.id)!==-1){var n=this._generateId(g);var V=d(i.payload.sections[m.id].viz[v.id]);delete i.payload.sections[m.id].viz[v.id];var q=i.payload.sections[m.id].layout.vizOrder.indexOf(V.id);V.id=n;i.payload.sections[m.id].viz[n]=V;i.payload.sections[m.id].layout.vizOrder[q]=n;v.id=n;}}.bind(this));}}.bind(this));this._oPagesModel._setProperty("/pages/"+p+"/sections/"+s,j);i.payload.sections[j.id]=O.payload.sections[j.id];return this._conditionalSavePersonalization(i.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.resetPage=function(p){this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+p+"/id");return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getPage(s),o.getOriginalPage(s),o.getCachedVizTypes()]);}).catch(function(E){L.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){var v=g[0];var A=g[1];var o=g[2];var O=g[3];var V=g[4];return Promise.all([this._getModelForPage(O,v,A,V),o,O]);}.bind(this)).then(function(g){var o=g[0];var h=g[1];var O=g[2];this._oPagesModel._setProperty("/pages/"+p,o);h.payload=d(O.payload);return this._conditionalSavePersonalization(h.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype.setPersonalizationActive=function(s){if(!this._bDirtyState&&s===true){this._bDirtyState=true;this._oCopiedModelData=d(this._oPagesModel.getProperty("/"),20);}else if(this._bDirtyState&&s===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false;}};P.prototype.savePersonalization=function(p){var g;if(!p){g=d(this._aPagesToBeSaved);}else{g=[p];}return this._oCdmServicePromise.then(function(o){return Promise.all(g.map(function(s){var i=this._aPagesToBeSaved.indexOf(s);this._aPagesToBeSaved.splice(i,1);return new Promise(function(h,j){o.save(s).then(h,j);}).catch(function(E){if(this._aPagesToBeSaved.indexOf(s)===-1){this._aPagesToBeSaved.push(s);}return Promise.reject(E);}.bind(this));}.bind(this)));}.bind(this)).then(function(){this._bDirtyState=false;}.bind(this)).catch(function(E){L.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));};P.prototype._conditionalSavePersonalization=function(p){if(this._bImplicitSaveEnabled){return this.savePersonalization(p);}if(this._aPagesToBeSaved.indexOf(p)===-1){this._aPagesToBeSaved.push(p);}return Promise.resolve();};P.prototype._getModelForPage=function(p,v,g,h){return Promise.all([this._oCSTRServicePromise,this._oURLParsingServicePromise]).catch(function(E){return Promise.reject(E);}).then(function(i){var o=i[0];var U=i[1];var j={id:p.identification.id||"",title:p.identification.title||"",description:"",sections:[]};var E=C.last("/core/catalog/enableHideGroups");return Promise.all(p.payload.layout.sectionOrder.map(function(s){var k=p.payload.sections[s];var S={id:k.id||"",title:k.default?r.i18n.getText("DefaultSection.Title"):k.title||"",visualizations:[],visible:!E||(k.visible!==undefined?k.visible:true),locked:k.locked!==undefined?k.locked:false,preset:k.preset!==undefined?k.preset:true,default:k.default!==undefined?k.default:false};j.sections.push(S);return Promise.all(k.layout.vizOrder.map(function(l){var V=k.viz[l],m=V.vizId;return o.getSystemContext(V.contentProviderId).then(function(n){var q=this._getVisualizationData(p.identification.id,m,v,V,g,h,U,n);S.visualizations.push(q);return this._isIntentSupported(q,o).then(function(I){if(!I){var t=S.visualizations.findIndex(function(w){return w.id===q.id;});S.visualizations.splice(t,1);L.warning("The visualization "+q.vizId+" is filtered out, because it does not have a supported intent.");}});}.bind(this));}.bind(this)));}.bind(this))).then(function(){return j;});}.bind(this));};P.prototype.removeUnsupportedVisualizations=function(p,s){return this._oCSTRServicePromise.then(function(o){var v=this.getModel().getProperty("/pages/"+p+"/sections/"+s+"/visualizations/");var g=[];for(var i=v.length-1;i>=0;--i){g.push(this._isIntentSupported(v[i],o).then(function(h,I){if(!I){v.splice(h,1);}return I;}.bind(this,i)));}return Promise.all(g).then(function(h){if(h.indexOf(false)!==-1){this.getModel().refresh();}}.bind(this));}.bind(this));};P.prototype._isIntentSupported=function(v,o){if(v.target===undefined){return Promise.resolve(false);}if(v.target.type==="URL"){if(f.isStandardVizType(v.vizType)){return Promise.resolve(!!v.target.url);}return Promise.resolve(true);}return new Promise(function(g,h){o.isIntentSupported([v.targetURL]).then(function(s){g(s[v.targetURL].supported);}).fail(function(){g(false);});});};P.prototype.addBookmarkToPage=function(p,g,s,h){if(!p){return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.");}var v=c.getBookmarkVizTypeIds(g);this.setPersonalizationActive(true);return Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]).then(function(S){var o=S[0];var i=S[1];var V=v.map(function(j){return o.getVizType(j);});return Promise.all(V).then(function(j){var k={};j.forEach(function(l,I){k[v[I]]=l;return k;});return Promise.all([this.loadPage(p),this._oURLParsingServicePromise,k,i.getSystemContext(h)]);}.bind(this));}.bind(this)).catch(function(E){L.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(i){var j=i[0];var U=i[1];var V=i[2];var S=i[3];var o={id:this._generateId(p),vizType:g.vizType,title:g.title,subTitle:g.subtitle,icon:g.icon,info:g.info,numberUnit:g.numberUnit,target:b.toTargetFromHash(g.url,U),indicatorDataSource:{path:g.serviceUrl,refresh:g.serviceRefreshInterval},vizConfig:g.vizConfig,isBookmark:true};if(h){o.contentProviderId=h;}var k=this._getVisualizationData(p,undefined,{},o,{},V,U,S);var l=parseInt(/pages\/(\d+)/.exec(j)[1],10);var m=this._oPagesModel.getProperty(j);var n;if(s){n=m.sections.find(function(q){return q.id===s;});if(!n){L.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");}}else{n=m.sections.find(function(q){return q.default;});if(!n){return this.addSection(l,0,{title:r.i18n.getText("DefaultSection.Title"),default:true,visualizations:[k]});}}n.visualizations.push(k);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(q){return q.getPage(p);}).catch(function(E){L.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(q){var t=q.payload.sections[n.id];t.layout.vizOrder.push(k.id);t.viz[k.id]=c.getVizRef(k);return this._conditionalSavePersonalization(p);}.bind(this));}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype._visitPages=function(v){return this._oCdmServicePromise.then(function(o){return o.getAllPages();}).then(function(p){p=p||[];p.forEach(function(o){v(o);});});};P.prototype._visitSections=function(v){return this._visitPages(function(p){var s=p.payload&&p.payload.sections||{};Object.keys(s).forEach(function(k){v(s[k],p);});});};P.prototype._visitVizReferences=function(v){return this._visitSections(function(s,p){var V=s.viz||{};Object.keys(V).forEach(function(k){v(V[k],s,p);});});};P.prototype._findBookmarks=function(i){var v=[];return this._oURLParsingServicePromise.then(function(U){var t=b.toTargetFromHash(i.url,U);t=c.harmonizeTarget(t);return this._visitVizReferences(function(V,s,p){if(V.isBookmark&&i.vizType===V.vizType&&(V.contentProviderId||"")===(i.contentProviderId||"")&&b.isSameTarget(t,V.target)){v.push({vizRefId:V.id,sectionId:s.id,pageId:p.identification.id});}}).then(function(){return v;});}.bind(this));};P.prototype.countBookmarks=function(i){return this._findBookmarks(i).then(function(F){return F.length;});};P.prototype.deleteBookmarks=function(i,p,s){var D=0;return this._findBookmarks(i).then(function(v){return v.reduce(function(o,I){if(p&&I.pageId!==p){return o;}if(s&&I.sectionId!==s){return o;}return o.then(function(){return this.findVisualization(I.pageId,I.sectionId,null,I.vizRefId);}.bind(this)).then(function(l){var g=l[0];var h=this.getPageIndex(g.pageId);return this.deleteVisualization(h,g.sectionIndex,g.vizIndexes[0]);}.bind(this)).then(function(){D=D+1;}).catch(function(){});}.bind(this),Promise.resolve());}.bind(this)).then(function(){return D;});};P.prototype.updateBookmarks=function(i,p){if(!i||!i.url||typeof i.url!=="string"){L.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided");}if(!p||typeof p!=="object"){L.error("Fail to update bookmark. No valid parameters, URL is: "+i.url);return Promise.reject("Missing parameters");}var U=0;return Promise.all([this._oURLParsingServicePromise,this._findBookmarks(i)]).then(function(g){var o=g[0];var v=g[1];return v.reduce(function(h,I){return h.then(function(){return this.findVisualization(I.pageId,I.sectionId,null,I.vizRefId);}.bind(this)).then(function(l){var j=l[0];var k=this.getPageIndex(j.pageId);var V={subtitle:p.subtitle,icon:p.icon,info:p.info,numberUnit:p.numberUnit,indicatorDataSource:{path:p.serviceUrl,refresh:p.serviceRefreshInterval},vizConfig:p.vizConfig};if(p.title){V.title=p.title;}if(p.url){V.target=c.harmonizeTarget(b.toTargetFromHash(p.url,o));}return this.updateVisualization(k,j.sectionIndex,j.vizIndexes[0],V);}.bind(this)).then(function(){U=U+1;}).catch(function(){});}.bind(this),Promise.resolve());}.bind(this)).then(function(){return U;});};P.prototype.updateVisualization=function(p,s,S,v){return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes(),this._oURLParsingServicePromise]);}.bind(this)).then(function(g){var V=g[0];var A=g[1];var o=g[2];var U=g[3];var h=this._oPagesModel.getProperty("/pages/"+p);var i=h.sections[s];var j=i.visualizations;var k=j[S];var l={};this.setPersonalizationActive(true);if(this._isPropertyChanged(k.title,v.title)){l.title=v.title;}if(v.target&&!b.isSameTarget(k.target,v.target)){l.target=v.target;}if(this._isPropertyChanged(k.subtitle,v.subtitle)){l.subtitle=v.subtitle;}if(this._isPropertyChanged(k.icon,v.icon)){l.icon=v.icon;}if(this._isPropertyChanged(k.info,v.info)){l.info=v.info;}if(this._isPropertyChanged(k.numberUnit,v.numberUnit)){l.numberUnit=v.numberUnit;}if(this._isPropertyChanged(k.displayFormatHint,v.displayFormatHint)){l.displayFormatHint=v.displayFormatHint;}if(v.indicatorDataSource&&k.indicatorDataSource&&(this._isPropertyChanged(k.indicatorDataSource.path,v.indicatorDataSource.path)||this._isPropertyChanged(k.indicatorDataSource.refresh,v.indicatorDataSource.refresh))){l.indicatorDataSource=d(k.indicatorDataSource);e(l.indicatorDataSource,v.indicatorDataSource);}if(v.vizConfig){k.vizConfig=a({},k.vizConfig,v.vizConfig);l.vizConfig=k.vizConfig;}e(k,l);var m=c.getVizRef(k);k=this._getVisualizationData(h.id,m.vizId,V,m,A,o,U);j[S]=k;this._oPagesModel.refresh();return this._updateVisualizationCDMData(h.id,i.id,k.id,l);}.bind(this));};P.prototype._updateVisualizationCDMData=function(p,s,v,U){return this._oCdmServicePromise.then(function(o){return o.getPage(p);}).catch(function(E){L.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){var V=o.payload.sections[s].viz[v];var g=c.getVizRef(U);g.vizConfig=U.vizConfig;e(V,g);return this._conditionalSavePersonalization(o.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};P.prototype._isPropertyChanged=function(o,n){if((n||n==="")&&o!==n){return true;}return false;};P.hasNoAdapter=true;return P;},true);
sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,p,a,C,W,T,P,b,V,c,d,e,M,q,L){"use strict";function f(A,o,s,g){this._oConfig=(g&&g.config)||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();}f.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";f.prototype.constants=a;f.prototype._configureAppVariantStorage=function(A){var t=this,D="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:D}};}if(Object.keys(A).length===0||A.enabled===false){return;}var s=(A.adapter&&A.adapter.module)||D,g=s.split(".").join("/");var h=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new q.Deferred();try{sap.ui.require([g],R);}catch(r){o.reject(r);}function R(i){try{var j=new i();var w=new W(t,j);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:h};};f.prototype.getGeneratedKey=function(){return u.generateRandomKey();};f.prototype.getPersonalizer=function(o,s,g){g=g||this._getApplicationComponent();return new b(this,this._oAdapterWithBackendAdapter.instance,o,s,g);};f.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};f.prototype.getTransientPersonalizer=function(){return new T();};f.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};f.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};f.prototype._createContainer=function(s,S,g,o){var t=this,l,h,i,j,A,k,U,D=new q.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);k=p.addContainerPrefix(s);if(U){var m=o.getManifestObject();A.component=o;A.appVarId=m.getEntry("/sap.ui5/appVariantId");A.appVersion=m.getEntry("/sap.app/applicationVersion/version");k+="#"+m.getEntry("/sap.ui5/appVariantId");}i=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;h=t._oAdapterWindowOnly;j=p.pickAdapter(S,l,h,i);p.loadAdapter(j).then(function(n){var r,v=new C(t,n,k,A,o);var w=(n&&n.supportsGetWithoutSubsequentLoad===true);if(g&&w){r=new q.Deferred();r.resolve(v);}else{r=v.load();}r.fail(function(){D.reject();}).done(function(){if(g||v._isExpired()){v.clear();}D.resolve(v);});},function(E){D.reject(E);});return D.promise();};f.prototype.delContainer=function(s,S){var D={},o,g="",t=this;S=t._adjustScope(S,false);g=p.addContainerPrefix(s);D=new q.Deferred();o=t._pendingContainerOperations_cancelAddNext(s,null);o.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,D);D.reject();}).done(function(){var A;t._pendingContainerOperations_cancelAddNext(s,D);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(g,S).fail(function(){D.reject();}).done(function(){D.resolve();});},function(){D.reject();});});});return D.promise();};f.prototype._pendingContainerOperations_flushAddNext=function(s,D){var o,S;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;if(typeof o._sapFnSave==="function"){S=o._sapFnSave;o._sapFnSave=undefined;S();}return o;};f.prototype._pendingContainerOperations_cancelAddNext=function(s,D){var o;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}if(o._sapTimeoutId){clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;o.resolve(f.prototype.SAVE_DEFERRED_DROPPED);}return o;};f.prototype.getPersonalizationContainer=function(s){var g="",o={},D={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}g=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(g)){return this._oContainerMap.get(g).promise();}D=new q.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,g);o.done(function(h){D.resolve(h);}).fail(function(h){D.reject(h);});this._oContainerMap.put(g,D);return D.promise();};f.prototype.delPersonalizationContainer=function(s){var D={},g="",t=this;g=p.addContainerPrefix(s);D=new q.Deferred();this.getPersonalizationContainer(s).fail(function(){D.reject();}).done(function(){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(g).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(g);D.resolve();});});return D.promise();};f.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter;};f.prototype.resetEntirePersonalization=function(){var A=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(i){if(i){return A.resetEntirePersonalization();}return Promise.reject();});};f.prototype.isResetEntirePersonalizationSupported=function(){var A=this._getBackendAdapter();if(typeof A.resetEntirePersonalization!=="function"){return Promise.resolve(false);}if(typeof A.isResetEntirePersonalizationSupported==="function"){return A.isResetEntirePersonalizationSupported().then(function(i){return i;}).catch(function(E){L.error("isResetEntirePersonalizationSupported failed with error: "+E.toString());return Promise.reject(E);});}return Promise.resolve(true);};f.prototype._adjustScope=p.adjustScope;f.hasNoAdapter=false;f.ContextContainer=C;f.Variant=c;f.VariantSet=d;f.VariantSetAdapter=V;f.WindowAdapter=W;f.WindowAdapterContainer=e;return f;},true);
sap.ui.predefine('sap/ushell/services/PluginManager',["sap/ushell/services/_PluginManager/Extensions","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ushell/library"],function(g,L,q,U,u,P,a){"use strict";var S="sap.ushell.services.PluginManager",b="sap-ushell-plugin-type",c="RendererExtensions",d="sap.ushell.components.shell.defaults",s=[c,"EarlyLoading","UserDefaults","UserImage","ContentProvider","AppWarmup"],f=a.UI5ComponentType;function h(C,p,o){var t=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=(o&&o.config)||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false;}s.forEach(function(e){t._oPluginCollection[e]={};t._oCategoryLoadingProgress[e]=new q.Deferred();});this._handlePluginCreation=function(e,i,j,k){var t=this,l=(t._oPluginCollection[e])[i];u.setPerformanceMark("FLP -- PluginManager.loadPlugin["+e+"]["+i+"]");try{if(l.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(l.component)){t._mInitializedComponentPromise[l.component].then(function(){t._instantiateComponent(l,j,k);},function(){t._instantiateComponent(l,j,k);});}else{t._mInitializedComponentPromise[l.component]=t._instantiateComponent(l,j,k);}}else{L.error("Invalid plugin configuration. The plugin "+i+" must contain a <component> key",S);}}catch(E){L.error("Error while loading bootstrap plugin: "+l.component||"",S);if(j){j.reject(E);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,e){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!e){L.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return q.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){L.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",e,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(e,x);}}return q.ajax(e+"/"+this._getFileNameForXhrAuth());}return q.when();};this._instantiateComponent=function(e,i,j){var D=new q.Deferred(),k=JSON.parse(JSON.stringify(e)),A={ui5ComponentName:k.component,url:k.url,getExtensions:g.bind(null,e.component)};function m(E){return function(l){E=E||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+l+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";l=l||"";L.error(E,l.stack,S);if(i){i.reject.apply(this,arguments);}D.reject.apply(this,arguments);};}k.name=k.component;delete k.component;A.applicationDependencies=k;if(k.config){A.applicationConfiguration=k.config;delete k.config;}A.loadDefaultDependencies=false;if(j!==undefined){A.oPostMessageInterface=j;}sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(l){this._handleXhrAuthentication(A.applicationConfiguration,k.url).done(function(){l.createComponent(A,{},[],f.Plugin).done(function(n){if(i){i.resolve(n);}D.resolve.apply(this,arguments);}).fail(m());}).fail(m("XHR logon for FLP plugin failed"));}.bind(this)).catch(m());return D.promise();};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(s));};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection));};this.registerPlugins=function(i){var t=this,j,k,l,m=[],n,r;if(!i){return;}if(this._oConfig.isBlueBox===true){n=new U(window.location.href).get("sap-plugins");if(n&&n.length>0){n=","+n+",";}else{n=undefined;}}Object.keys(i).sort().forEach(function(v){j=i[v]||{};k=j.config||{};l=k[b]||"";if(j.enabled===false){return;}if(!t._isFormFactorSupported(j)){L.info("Plugin '"+v+"' filtered from result: form factor not supported");return;}if(t._oConfig.isBlueBox===true){if(j.config&&j.config["sap-plugin-agent"]===true){r=(j.config["sap-plugin-agent-id"]||v);if(n){if(n.indexOf(","+r+",")<0){return;}}else{return;}}}if(j.enabled===undefined){j.enabled=true;}if(j.hasOwnProperty("module")){var M=(j.module||"").replace(/\./g,"/");L.error("Plugin "+v+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);try{sap.ui.requireSync(M);}catch(e){L.error("Plugin module "+M+" is not found.");}return;}if(k&&k.hasOwnProperty(b)){if(s&&Array.prototype.indexOf.call(s,l)!==-1){if(m.indexOf(l)===-1){m.push(l);}t._oPluginCollection[l][v]=JSON.parse(JSON.stringify(j));}else{L.warning("Plugin "+v+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+l,S);}}else{t._oPluginCollection[c][v]=JSON.parse(JSON.stringify(j));if(m.indexOf(c)===-1){m.push(c);}}});try{if(t._oConfig.isBlueBox!==true){t._buildNamesOfPluginsWithAgents();}}catch(e){L.error("failed to build plugin agents names list",(e.message||e.toString()),"sap.ushell.services.PluginManager");}m.forEach(function(v){if(t._oCategoryLoadingProgress.hasOwnProperty(v)&&t._oCategoryLoadingProgress[v].state()==="resolved"){t.loadPlugins(v);}});};this._isFormFactorSupported=function(e){var D=e.deviceTypes,i=u.getFormFactor();if(D&&D[i]===false){return false;}return true;};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise();}};this.loadPlugins=function(e){var t=this,i,j,k,l;u.setPerformanceMark("FLP -- PluginManager.startLoadPlugins["+e+"]");if(e===c){l=P.getInterface();}if(s&&Array.prototype.indexOf.call(s,e)!==-1){if(t._oCategoryLoadingProgress[e].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[e].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[e]).length>0){i=[];k=Object.keys(t._oPluginCollection[e]);if(new U(window.location.href).get("sap-ushell-xx-pluginmode")==="discard"&&(e==="RendererExtensions"||e==="AppWarmup")){k=k.filter(function(I){return(t._oPluginCollection[e][I].component===d);});}k.forEach(function(m){var n=t._oPluginCollection[e][m];if(!n.loaded){n.loaded=true;j=new q.Deferred();i.push(j.promise());t._handlePluginCreation(e,m,j,l);}});if(i.length>0){q.when.apply(undefined,i).done(function(){u.setPerformanceMark("FLP -- PluginManager.endLoadPlugins["+e+"]");t._oCategoryLoadingProgress[e].resolve();}).fail(t._oCategoryLoadingProgress[e].reject.bind());}}else{t._oCategoryLoadingProgress[e].resolve();}}else{L.error("Plugins with category "+e+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[e].reject("Plugins with category "+e+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[e].promise();};this._buildNamesOfPluginsWithAgents=function(){var t=this,n="",e;Object.keys(t._oPluginCollection).forEach(function(i){Object.keys(t._oPluginCollection[i]).forEach(function(j){e=t._oPluginCollection[i][j];if(e&&e.enabled&&e.enabled===true){if(e.config&&e.config["sap-plugin-agent"]===true){n+=(e.config["sap-plugin-agent-id"]||j)+",";}}});});if(n.endsWith(",")){n=n.slice(0,-1);}this._sPluginAgentsNames=n;};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames;};}h.hasNoAdapter=true;return h;},true);
sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log"],function(U,O,q,i,L){"use strict";function a(){this.getValue=function(r){var d=new q.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?"X":undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({value:v});return d.promise();};}function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r,s){var t=this;var d=new q.Deferred();var b=[];var A=true;var D={};var o={};var u=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var e,S;if(!s){S=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(h){return h.getSystemContext();});}else{S=Promise.resolve(s);}var g=r.map(function(h){var j;if(h.indexOf("User.env.")===0){j=h;o[j]=1;}if(h.indexOf("UserDefault.")===0){j=t._extractAnyUserDefaultReferenceName(h);D[j]=1;}if(typeof j!=="string"){A=false;L.error("'"+h+"' is not a legal reference name",null,"sap.ushell.services.ReferenceResolver");}return{full:h,name:j};});if(!A){return d.reject("One or more references could not be resolved").promise();}Promise.all([S,u]).then(function(h){var j=h[0];var k=h[1];Object.keys(D).forEach(function(n){b.push(k.getValue(n,j));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});q.when.apply(q,b).done(function(){var K={};var I=0,l=arguments;Object.keys(D).forEach(function(n){D[n]=l[I];I=I+1;});Object.keys(o).forEach(function(n){o[n]=l[I];I=I+1;});g.forEach(function(m){var M;if(m.full.indexOf("UserDefault.extended.")===0){M=t.mergeSimpleAndExtended(D[m.name]);if(!i(M)){K[m.full]=M;}else{K[m.full]=undefined;}}else if(m.full.indexOf("UserDefault.")===0){K[m.full]=D[m.name].value;}else if(m.full.indexOf("User.env.")===0){K[m.full]=o[m.name].value;}});d.resolve(K);});});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=q.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!Array.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({Sign:"I",Option:"EQ",Low:v.value,High:null});}return m;};function f(u){var r=/{([^}%]*%%[^%]+%%)}?/g,b=/([^%]*)%%/,d=/%%([^%]+)%%/,o,e,g,F=[];o=r.exec(u);while(o){e=b.exec(o[1]);g=d.exec(o[1]);F.push({edmType:e[1],name:g[1]});o=r.exec(u);}return F;}this.resolveUserDefaultParameters=function(u,s){var d=new q.Deferred(),r,S,I=[],o;o=/[^(?]*/.exec(u);r=(o===null)?[]:f(o[0]);r.forEach(function(g){I.push(g.name);});o=/[(?][^]*/.exec(u);r=(o===null)?[]:f(o[0]);var b=[],e={};r.forEach(function(g){b.push(g.name);e[g.name]=g.edmType;});S=b.filter(function(g){if(/^UserDefault\.(?!extended\.).+/.test(g)){return true;}I.push(g);return false;});if(S.length>0){this.resolveReferences(S,s).done(function(g){var h=u,D=[];Object.keys(g).forEach(function(j){var k,l=false;while(k!=h){k=h;if(g[j]!==undefined){var F=O.formatValue(g[j],e[j]);h=h.replace("{"+e[j]+"%%"+j+"%%}",window.encodeURIComponent(F));}else{l=true;h=h.replace("{"+e[j]+"%%"+j+"%%}","");}}if(l){D.push(j);}});d.resolve({url:h,defaultsWithoutValue:D,ignoredReferences:I});});}else{d.resolve({url:u,defaultsWithoutValue:[],ignoredReferences:I});}return d.promise();};}R.hasNoAdapter=true;return R;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigation',["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(S,M,H){"use strict";var A=M.Action;var I=M.Icon;function a(c,p,s){function r(){sap.ui.require(["sap/m/MessageBox"],function(M){M.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:I.ERROR,title:"Client out of sync with server.",actions:[A.YES,A.NO],onClose:function(b){if(b===A.YES){window.setTimeout(function(){window.location.reload();},0);}}});});}var o=s&&s.config;this.hashChanger=new S(o);this._navigationFilterForForwardingToRegisteredRouters=function(b,h){var m=this._aRouters.some(function(R){return R.match(h);});if(m){var C=b.getCurrentApplication();var i=C&&C.componentInstance&&!C.homePage;if(i){var d=C.componentInstance.getRouter();if(d){d.stop();}}return this.NavigationFilterStatus.Keep;}return this.NavigationFilterStatus.Continue;};this.getNavigationContext=function(){var n=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(n.oldHash,n.newHash);return{status:n.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()};};this.isInitialNavigation=function(){return this._bIsInitialNavigation;};this.setIsInitialNavigation=function(i){this._bIsInitialNavigation=i;};this.hrefForExternal=function(b,v,C,d){return this.hashChanger.hrefForExternal(b,v,C,d);};this.hrefForAppSpecificHash=function(b){return this.hashChanger.hrefForAppSpecificHash(b);};this.compactParams=function(P,R,C,t){return this.hashChanger.compactParams(P,R,C,t);};this.toExternal=function(b,C,w){return this.hashChanger.toExternal(b,C,w);};this.toAppHash=function(b,w){this.hashChanger.toAppHash(b,w);};this.init=function(f){this._bIsInitialNavigation=true;hasher.prependHash="";H.replaceHashChanger(this.hashChanger);var b=sap.ui.getCore().getEventBus();b.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(f);this._enableHistoryEntryReplacedDetection();return this;};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments);}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments);}.bind(this);};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash";};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null;};this.replaceHashWithoutNavigation=function(n){hasher.changed.active=false;this._fnOriginalSetHash(n);hasher.changed.active=true;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};this._aRouters=[];this.registerExtraRouter=function(R){this._aRouters.push(R);};this.unregisterNavigationFilter=function(f){this.hashChanger.unregisterNavigationFilter(f);};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced();}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue;}.bind(this));this.registerPrivateFilters=function(b){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,b));};}a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigationHashChanger',["sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher","sap/ushell/TechnicalParameters","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepEqual"],function(l,U,a,H,h,T,b,c,q,L,d){"use strict";var N=l.NavigationState;var O={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};var S=H.extend("sap.ushell.services.ShellNavigatonHashChanger",{constructor:function(C){var u;this.oServiceConfig=C;this._oNavigationState={};if(new b(window.location.href).get("sap-ushell-reload")){if(new b(window.location.href).get("sap-ushell-reload")==="X"||new b(window.location.href).get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}H.apply(this);this._initializedByShellNav=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection;}).map(function(e){var E={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){E.updateHashOnly=e.updateHashOnly;}return E;});};}});S.prototype.privgetCurrentShellHash=function(){var r=this.privsplitHash(h.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};S.prototype.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash+=A;return o;};S.prototype.privconstructShellHash=function(s){return a.constructShellHash(s);};S.prototype.privsplitHash=function(s){var o,e,A;if(s===undefined||s===null||s===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}o=a.parseShellHash(s);if(o===undefined||o===null){return null;}e=(o.params&&!c(o.params))?o.params:null;A=o.appSpecificRoute;o.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(o))||null,appSpecificRoute:A||null,intent:(o.semanticObject&&o.action&&(o.semanticObject+"-"+o.action+(o.contextRaw||"")))||null,params:e};};S.prototype.privsetHash=function(F,A,w){h.prependHash="";F=this.privstripLeadingHash(F);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent(O.HASH_SET.name,{sHash:A});h.setHash(F);}else{this.fireEvent(O.HASH_REPLACED.name,{sHash:A});h.replaceHash(F);}};S.prototype.privstripLeadingHash=function(s){if(s[0]==="#"){return s.substring(1);}return s;};S.prototype.registerNavigationFilter=function(F){if(typeof F!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(F);};S.prototype.unregisterNavigationFilter=function(F){if(typeof F!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters=this.aNavigationFilters.filter(function(r){return r!==F;});};function f(A,C,t){this.oAppState=undefined;this.oPromise=(new q.Deferred()).resolve();this.getNextKey=function(){this.oAppState=A.createEmptyAppState(C,t);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=q.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}S.prototype.compactParams=function(p,r,C,t){var D=new q.Deferred();var s=a.constructShellHash({target:{semanticObject:"SO",action:"action"},params:p});if(p===undefined||Object.keys(p).length===0){return D.resolve(p).promise();}sap.ushell.Container.getServiceAsync("AppState").then(function(A){var o=new f(A,C,t);var R=U.compactHash(s,r,o);var e=a.parseParameters(R.hash.match(/\?.*/)[0]);var P=o.getPromise();P.done(function(){D.resolve(e);}).fail(function(m){D.reject(m);});});return D.promise();};S.prototype.hrefForExternal=function(A,v,C,e){var r=this.hrefForExternalNoEnc(A,v,C,e);function g(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!e){return g(r,v);}var D=new q.Deferred();r.then(function(R){D.resolve(g(R,v));}).catch(D.reject.bind(D));return D;};S.prototype.hrefForExternalNoEnc=function(A,v,C,e){if(e){var D=new q.Deferred();this.hrefForExternalNoEncAsync(A,v,C).then(D.resolve).catch(D.reject);return D.promise();}L.warning("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.ShellNavigationHashChanger");var r;var g=sap.ushell.Container.getService("AppState");var s=new f(g,C);var t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}return r;};S.prototype.hrefForExternalNoEncAsync=function(A,v,C){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var r;var s=new f(e,C);var t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}return new Promise(function(g,i){s.getPromise().done(function(){g(r);}).fail(i);});}.bind(this));};S.prototype.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return U.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};S.prototype.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=a.parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};S.prototype.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};S.prototype.toExternal=function(A,C,w){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var s=new f(e,C);var g=this.privhrefForExternalNoEnc(A,s).hash;var i=this.privgetAppHash(A);this.privsetHash(g,i,w);}.bind(this));};S.prototype.toAppHash=function(A,w){var s=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(s,A,w);};S.prototype.initShellNavigation=function(s){if(this._initializedByShellNav){L.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;h.changed.add(this.treatHashChanged,this);if(!h.isActive()){h.initialized.addOnce(this.treatHashChanged,this);h.init();}else{this.treatHashChanged(h.getHash());}this._initializedByShellNav=true;return true;};S.prototype.init=function(){if(this._initialized){L.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2),D=A?"&/":"",s=(n&&n.shellPart)||"";this.fireEvent(O.HASH_CHANGED.name,{newHash:A,fullHash:s+D+A});this._initialized=true;return true;};S.prototype._removeInnerAppSeparator=function(i){return(i||"").replace("&/","");};S.prototype._setNavigationStatus=function(n){this._oNavigationState.status=n;};S.prototype._trackNavigation=function(o,n){this._oNavigationState.oldHash=o;this._oNavigationState.newHash=n;};S.prototype.getCurrentNavigationState=function(){return this._oNavigationState;};S.prototype.treatHashChanged=function(n,o){this._trackNavigation(o,n);this._setNavigationStatus(N.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(N.Finished);return;}var A,s,g,j,k,m,E,i,F,p,r,t;n=U.expandHash(n);o=U.expandHash(o);g=this.privsplitHash(n);j=this.privsplitHash(o);if(!g){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:n,newAppSpecificRoute:null,fullHash:n,oldShellHash:(j?j.shellPart:o),error:E});this.privfnShellCallback(n,null,(j?j.shellPart:o),(j?j.appSpecificRoute:null),E);this._setNavigationStatus(N.Finished);return;}if(!j){j={shellPart:o,appSpecificRoute:null};}for(i=0;i<this.aNavigationFilters.length;i++){try{F=this.aNavigationFilters[i].call(undefined,n,o);p=F;if(typeof F!=="string"){p=F.status;r=F.hash;}if(p===this.NavigationFilterStatus.Custom){if(r&&r.length>0){this.inAbandonFlow=true;h.replaceHash(r);this.inAbandonFlow=false;}this._setNavigationStatus(N.Finished);return;}if(p===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;h.replaceHash(o);this.inAbandonFlow=false;this._setNavigationStatus(N.Finished);return;}if(p===this.NavigationFilterStatus.Keep){t=true;}}catch(e){L.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(t){this.fireEvent(O.HASH_CHANGED.name,{newHash:n,oldHash:o,fullHash:n});this._setNavigationStatus(N.Finished);return;}var u=this.isInnerAppNavigation(n,o);if(u){A=this._removeInnerAppSeparator(g.appSpecificRoute);s=this._removeInnerAppSeparator(j.appSpecificRoute);L.info("Inner App Hash changed from '"+s+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.HASH_CHANGED.name,{newHash:A,oldHash:s,fullHash:n});this._setNavigationStatus(N.Finished);return;}var v=this._haveSameIntent(n,o);if(v&&this.hasListeners(O.SHELL_HASH_PARAMETER_CHANGED.name)){k=a.paramsToString(g.params);m=a.paramsToString(j.params);L.info("Shell hash parameters changed from '"+m+"' to '"+k+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:g.params,oOldParameters:j.params});this._setNavigationStatus(N.Finished);return;}if(o!==undefined&&this.oServiceConfig&&this.oServiceConfig.reload){window.location.hash="#"+encodeURI(n);window.location.reload();}L.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:g.shellPart,newAppSpecificRoute:g.appSpecificRoute,fullHash:n,oldShellHash:j.shellPart,oldAppSpecificRoute:j.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(j.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(g.appSpecificRoute)});this.privfnShellCallback(g.shellPart,g.appSpecificRoute,j.shellPart,j.appSpecificRoute);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");this._setNavigationStatus(N.Finished);};S.prototype._parametersChanged=function(n,o){return!d(n,o);};S.prototype.setHash=function(s){this.toAppHash(s,true);};S.prototype.replaceHash=function(s){this.toAppHash(s,false);};S.prototype.getHash=function(){return this.getAppHash();};S.prototype.getAppHash=function(){var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2);return A;};S.prototype.destroy=function(){h.changed.remove(this.treatHashChanged,this);H.prototype.destroy.apply(this,arguments);};S.prototype._getAllEvents=function(){return Object.keys(O).map(function(e){return O[e];});};S.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false;}).map(function(e){return e.name;});};S.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true;}).map(function(e){return e.name;});};S.prototype.isInnerAppNavigation=function(n,o){var e=this.privsplitHash(n)||{};var g=this.privsplitHash(o)||{};var i=this._haveSameIntent(n,o);e.params=this._removeNonIntentParameters(e.params);g.params=this._removeNonIntentParameters(g.params);var j=!this._parametersChanged(e.params,g.params);return i&&j;};S.prototype._haveSameIntent=function(n,o){var e=this.privsplitHash(n)||{};var g=this.privsplitHash(o)||{};var s=e.intent;var i=g.intent;return s===i&&o!==undefined;};S.prototype._removeNonIntentParameters=function(o){var t=T.getParameters({isIntentParameter:false}),e;if(o){for(var i=0;i<t.length;i++){e=t[i];if(o[e.name]){delete o[e.name];}}}return o||{};};return S;},true);
sap.ui.predefine('sap/ushell/services/SupportTicket',["sap/ushell/Config"],function(C){"use strict";function S(a,c,p,s){this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return C.last("/core/extension/SupportTicket");};}S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/URLParsing',["sap/ushell/utils","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing","sap/base/Log"],function(u,U,a,L){"use strict";function b(){this.getShellHash=function(s){return a.getShellHash(s);};this.getHash=function(s){return a.getHash(s);};this.isIntentUrl=function(s){L.warning("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return a.isIntentUrl(s);};this.isIntentUrlAsync=function(s){return a.isIntentUrlAsync(s);};this.parseParameters=function(p){return a.parseParameters(p);};this.paramsToString=function(p){return a.paramsToString(p);};this.privparamsToString=function(p,d,A){return a.privparamsToString(p,d,A);};this.parseShellHash=function(h){return a.parseShellHash(h);};this.privstripLeadingHash=function(h){return a.privstripLeadingHash(h);};this.splitHash=function(h){return a.splitHash(h);};this.constructShellHash=function(s){return a.constructShellHash(s);};this.addSystemToServiceUrl=function(s,c){var r,C,S=c;if(!s||s.indexOf("/")!==0||s.indexOf("//")===0){throw new u.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(c instanceof sap.ui.core.Component){C=(typeof c.getComponentData==="function")&&c.getComponentData();S=C&&C.startupParameters&&C.startupParameters["sap-system"]&&C.startupParameters["sap-system"][0];}r=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!c&&r&&r.url){S=new U(r.url).get("sap-system");}if(/^[^?]*(;mo([/;?]|$))/.test(s)){}else if(/^[^?]*(;o=([/;?]|$))/.test(s)){s=s.replace(/;o=([/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};}b.hasNoAdapter=true;return b;},true);
sap.ui.require.preload({
	"sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json":'{"OrderOfLoadingBlocks":["AfterCoreExtLight","FLPComponents","FLPPlugins","WarmUpPlugins"],"LoadingBlocks":{"AfterCoreExtLight":{"LoadingSteps":[{"LoadingStep":"StartScheduler","canBeLoadedAsync":false},{"LoadingStep":"MessagePopoverInit","canBeLoadedAsync":true},{"LoadingStep":"UsageAnalytics","canBeLoadedAsync":true},{"LoadingStep":"MenuBar","canBeLoadedAsync":true}],"maxWaitInMs":0},"FLPComponents":{"LoadingSteps":[{"LoadingStep":"ConditionalWaitForAppLoading","canBeLoadedAsync":false},{"LoadingStep":"PostLoadingHeaderEnhancement","canBeLoadedAsync":true},{"LoadingStep":"TrackingActivitiesSetting","canBeLoadedAsync":true},{"LoadingStep":"MeArea","canBeLoadedAsync":false},{"LoadingStep":"UserImage","canBeLoadedAsync":false},{"LoadingStep":"Notifications","canBeLoadedAsync":false},{"LoadingStep":"Search","canBeLoadedAsync":false},{"LoadingStep":"ProductSwitch","canBeLoadedAsync":false},{"LoadingStep":"UserSettings","canBeLoadedAsync":false}],"maxWaitInMs":0},"FLPPlugins":{"LoadingSteps":[{"LoadingStep":"LoadPlugins","canBeLoadedAsync":true},{"LoadingStep":"FirstSegmentCompleteLoaded","canBeLoadedAsync":false}],"maxWaitInMs":0},"WarmUpPlugins":{"LoadingSteps":[{"LoadingStep":"WarmupPlugins","canBeLoadedAsync":true}],"maxWaitInMs":0}}}',
	"sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json":'{"StartScheduler":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"startScheduler"},"userCanTrigger":false,"canBeInterrupted":false},"LoadPlugins":{"loadingMode":"byEvent","byEvent":{"eventName":"loadRendererExtensions","eventData":""},"Dependencies":[]},"MessagePopoverInit":{"loadingMode":"byEvent","byEvent":{"eventName":"initMessagePopover","eventData":""},"Dependencies":[]},"TrackingActivitiesSetting":{"loadingMode":"byEvent","byEvent":{"eventName":"loadTrackingActivitiesSetting","eventData":""},"Dependencies":[]},"UsageAnalytics":{"loadingMode":"byEvent","byEvent":{"eventName":"loadUsageAnalytics","eventData":""},"Dependencies":[]},"MenuBar":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MenuBar","manifest":true},"url":"sap/ushell/components/shell/MenuBar"},"configSwitch":[{"path":"/core/menu/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"Notifications":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Notifications","manifest":false},"url":"sap/ushell/components/shell/Notifications"},"configSwitch":[{"path":"/core/shell/model/enableNotifications","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"PostLoadingHeaderEnhancement":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.PostLoadingHeaderEnhancement","manifest":false},"url":"sap/ushell/components/shell/PostLoadingHeaderEnhancement"},"userCanTrigger":false,"canBeInterrupted":false},"MeArea":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MeArea","manifest":false},"url":"sap/ushell/components/shell/MeArea"},"Dependencies":["TrackingActivitiesSetting"],"userCanTrigger":false,"canBeInterrupted":false},"ProductSwitch":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.ProductSwitch","manifest":false},"url":"sap/ushell/components/shell/ProductSwitch"},"configSwitch":[{"path":"/core/productSwitch/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"UserSettings":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Settings","manifest":false},"url":"sap/ushell/components/shell/Settings"},"userCanTrigger":false,"canBeInterrupted":false},"UserImage":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserImage","manifest":false},"url":"sap/ushell/components/shell/UserImage"},"userCanTrigger":false,"canBeInterrupted":false},"Search":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Search","manifest":false},"url":"sap/ushell/components/shell/Search"},"userCanTrigger":false,"canBeInterrupted":false},"FirstSegmentCompleteLoaded":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"firstSegmentCompleteLoaded"},"userCanTrigger":false,"canBeInterrupted":false},"WarmupPlugins":{"loadingMode":"byEvent","excludedFLPStates":["app"],"byEvent":{"eventName":"loadWarmupPlugins","eventData":""},"Dependencies":["FirstSegmentCompleteLoaded","LoadPlugins"]},"ConditionalWaitForAppLoading":{"loadingMode":"waitInMs","waitInMs":{"waitingTime":3000},"mandatoryFLPStates":["app"]}}',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui" xmlns:core="sap.ui.core" xmlns:shell="sap.ushell.ui.shell"><ShellHeader id="shell-header" showLogo="{/showLogo}" visible="{/headerVisible}" homeUri="{/homeUri}" headItems="{path:\'/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}" centralAreaElement="{/centralAreaElement}" title="{/title}"><appTitle><shell:ShellAppTitle id="shellAppTitle" text="{/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core" xmlns:ui="sap.ushell.ui"><ShellLayout id="shell" floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" enableCanvasShapes="{/enableBackGroundShapes}"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><core:ComponentContainer id="menuBarComponentContainer" async="true"/><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
/*!!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.2.0 (2013/11/11 03:18 PM)
 * Released under the MIT License
 */
	"sap/ui/thirdparty/hasher.js":function(){;(function(){var f=function(s){var h=(function(w){var P=25,d=w.document,a=w.history,S=s.Signal,h,_,b,c,g,i,j=/#(.*)$/,k=/(\?.*)|(\#.*)/,l=/^\#/,m=(!+"\v1"),n=('onhashchange'in w)&&d.documentMode!==7,o=m&&!n,p=(location.protocol==='file:');function q(e){return String(e||'').replace(/\W/g,"\\$&");}function r(e){if(!e)return'';var D=new RegExp('^'+q(h.prependHash)+'|'+q(h.appendHash)+'$','g');return e.replace(D,'');}function t(){var D=j.exec(h.getURL());var E=(D&&D[1])||'';try{return h.raw?E:decodeURIComponent(E);}catch(e){return E;}}function u(){return(g)?g.contentWindow.frameHash:null;}function v(){g=d.createElement('iframe');g.src='about:blank';g.style.display='none';d.body.appendChild(g);}function x(){if(g&&_!==u()){var e=g.contentWindow.document;e.open();e.write('<html><head><title>'+d.title+'</title><script type="text/javascript">var frameHash="'+_+'";</script></head><body>&nbsp;</body></html>');e.close();}}function y(e,D){if(_!==e){var E=_;_=e;if(o){if(!D){x();}else{g.contentWindow.frameHash=e;}}return function(){h.changed.dispatch(r(e),r(E));};}}if(o){i=function(){var e=t(),D=u(),E;if(D!==_&&D!==e){h.setHash(r(D));}else if(e!==_){E=y(e);E&&E();}};}else{i=function(){var e=t(),D;if(e!==_){D=y(e);D&&D();}};}function z(e,D,E){if(e.addEventListener){e.addEventListener(D,E,false);}else if(e.attachEvent){e.attachEvent('on'+D,E);}}function A(e,D,E){if(e.removeEventListener){e.removeEventListener(D,E,false);}else if(e.detachEvent){e.detachEvent('on'+D,E);}}function B(e){e=Array.prototype.slice.call(arguments);var D=e.join(h.separator);D=D?h.prependHash+D.replace(l,'')+h.appendHash:D;return D;}function C(e){e=encodeURI(e);if(m&&p){e=e.replace(/\?/,'%3F');}return e;}h={VERSION:'1.2.0',raw:false,appendHash:'',prependHash:'/',separator:'/',changed:new S(),stopped:new S(),initialized:new S(),init:function(){if(c)return;_=t();if(n){z(w,'hashchange',i);}else{if(o){if(!g){v();}x();}b=setInterval(i,P);}c=true;h.initialized.dispatch(r(_));},stop:function(){if(!c)return;if(n){A(w,'hashchange',i);}else{clearInterval(b);b=null;}c=false;h.stopped.dispatch(r(_));},isActive:function(){return c;},getURL:function(){return w.location.href;},getBaseURL:function(){return h.getURL().replace(k,'');},setHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.hash='#'+e;D&&D();}},replaceHash:function(e){var D,E=w.location.href,F=E.indexOf("#");e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}if(F!==-1){E=E.slice(0,F);}w.location.replace(E+'#'+e);D&&D();}},getHash:function(){return r(_);},getHashAsArray:function(){return h.getHash().split(h.separator);},dispose:function(){h.stop();h.initialized.dispose();h.stopped.dispose();h.changed.dispose();g=h=w.hasher=null;},toString:function(){return'[hasher version="'+h.VERSION+'" hash="'+h.getHash()+'"]';}};h.initialized.memorize=true;return h;}(window));return h;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else if(typeof exports==='object'){module.exports=f(require('signals'));}else{window['hasher']=f(window['signals']);}}());
},
/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
	"sap/ui/thirdparty/signals.js":function(){(function(g){function S(b,l,i,c,p){this._listener=l;this._isOnce=i;this.context=c;this._signal=b;this._priority=p||0;}S.prototype={active:true,params:null,execute:function(p){var h,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(p):p;h=this._listener.apply(this.context,b);if(this._isOnce){this.detach();}}return h;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function v(l,n){if(typeof l!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',n));}}function a(){this._bindings=[];this._prevParams=null;var b=this;this.dispatch=function(){a.prototype.dispatch.apply(b,arguments);};}a.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(l,i,b,p){var c=this._indexOfListener(l,b),d;if(c!==-1){d=this._bindings[c];if(d.isOnce()!==i){throw new Error('You cannot add'+(i?'':'Once')+'() then add'+(!i?'':'Once')+'() the same listener without removing the relationship first.');}}else{d=new S(this,l,i,b,p);this._addBinding(d);}if(this.memorize&&this._prevParams){d.execute(this._prevParams);}return d;},_addBinding:function(b){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&b._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,b);},_indexOfListener:function(l,c){var n=this._bindings.length,b;while(n--){b=this._bindings[n];if(b._listener===l&&b.context===c){return n;}}return-1;},has:function(l,c){return this._indexOfListener(l,c)!==-1;},add:function(l,b,p){v(l,'add');return this._registerListener(l,false,b,p);},addOnce:function(l,b,p){v(l,'addOnce');return this._registerListener(l,true,b,p);},remove:function(l,c){v(l,'remove');var i=this._indexOfListener(l,c);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return l;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(p){if(!this.active){return;}var b=Array.prototype.slice.call(arguments),n=this._bindings.length,c;if(this.memorize){this._prevParams=b;}if(!n){return;}c=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(c[n]&&this._shouldPropagate&&c[n].execute(b)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};var s=a;s.Signal=a;if(typeof define==='function'&&define.amd){define(function(){return s;});}else{g['signals']=s;}}(this));
},
/** @license
 * crossroads <http://millermedeiros.github.com/crossroads.js/>
 * Author: Miller Medeiros | MIT License
 * v0.12.0 (2013/01/21 13:47)
 */
	"sap/ui/thirdparty/crossroads.js":function(){(function(){var f=function(s){var c,_,U;_=(/t(.+)?/).exec('t')[1]==='';function a(i,v){if(i.indexOf){return i.indexOf(v);}else{var n=i.length;while(n--){if(i[n]===v){return n;}}return-1;}}function b(l,m){var i=a(l,m);if(i!==-1){l.splice(i,1);}}function d(v,i){return'[object '+i+']'===Object.prototype.toString.call(v);}function e(v){return d(v,'RegExp');}function g(v){return d(v,'Array');}function h(v){return typeof v==='function';}function t(v){var r;if(v===null||v==='null'){r=null;}else if(v==='true'){r=true;}else if(v==='false'){r=false;}else if(v===U||v==='undefined'){r=U;}else if(v===''||isNaN(v)){r=v;}else{r=parseFloat(v);}return r;}function j(v){var n=v.length,r=[];while(n--){r[n]=t(v[n]);}return r;}function k(i,l){var q=(i||'').replace('?','').split('&'),n=q.length,o={},m,v;while(n--){m=q[n].split('=');v=l?t(m[1]):m[1];o[m[0]]=(typeof v==='string')?decodeURIComponent(v):v;}return o;}function C(){this.bypassed=new s.Signal();this.routed=new s.Signal();this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState();}C.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null;},create:function(){return new C();},addRoute:function(p,i,l){var r=new R(p,i,l,this);this._sortedInsert(r);return r;},removeRoute:function(r){b(this._routes,r);r._destroy();},removeAllRoutes:function(){var n=this.getNumRoutes();while(n--){this._routes[n]._destroy();}this._routes.length=0;},parse:function(r,l){r=r||'';l=l||[];if(!this.ignoreState&&(r===this._prevMatchedRequest||r===this._prevBypassedRequest)){return;}var m=this._getMatchedRoutes(r),i=0,n=m.length,o;if(n){this._prevMatchedRequest=r;this._notifyPrevRoutes(m,r);this._prevRoutes=m;while(i<n){o=m[i];o.route.matched.dispatch.apply(o.route.matched,l.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,l.concat([r,o]));i+=1;}}else{this._prevBypassedRequest=r;this.bypassed.dispatch.apply(this.bypassed,l.concat([r]));}this._pipeParse(r,l);},_notifyPrevRoutes:function(m,r){var i=0,p;while(p=this._prevRoutes[i++]){if(p.route.switched&&this._didSwitch(p.route,m)){p.route.switched.dispatch(r);}}},_didSwitch:function(r,m){var l,i=0;while(l=m[i++]){if(l.route===r){return false;}}return true;},_pipeParse:function(r,l){var i=0,m;while(m=this._piped[i++]){m.parse(r,l);}},getNumRoutes:function(){return this._routes.length;},_sortedInsert:function(r){var i=this._routes,n=i.length;do{--n;}while(i[n]&&r._priority<=i[n]._priority);i.splice(n+1,0,r);},_getMatchedRoutes:function(r){var i=[],l=this._routes,n=l.length,m;while(m=l[--n]){if((!i.length||this.greedy||m.greedy)&&m.match(r)){i.push({route:m,params:m._getParamsArray(r)});}if(!this.greedyEnabled&&i.length){break;}}return i;},pipe:function(o){this._piped.push(o);},unpipe:function(o){b(this._piped,o);},toString:function(){return'[crossroads numRoutes:'+this.getNumRoutes()+']';}};c=new C();c.VERSION='0.12.0';c.NORM_AS_ARRAY=function(r,v){return[v.vals_];};c.NORM_AS_OBJECT=function(r,v){return[v];};function R(p,i,l,r){var m=e(p),n=r.patternLexer;this._router=r;this._pattern=p;this._paramsIds=m?null:n.getParamIds(p);this._optionalParamsIds=m?null:n.getOptionalParamsIds(p);this._matchRegexp=m?p:n.compilePattern(p,r.ignoreCase);this.matched=new s.Signal();this.switched=new s.Signal();if(i){this.matched.add(i);}this._priority=l||0;}R.prototype={greedy:false,rules:void(0),match:function(r){r=r||'';return this._matchRegexp.test(r)&&this._validateParams(r);},_validateParams:function(r){var i=this.rules,v=this._getParamsObject(r),l;for(l in i){if(l!=='normalize_'&&i.hasOwnProperty(l)&&!this._isValidParam(r,l,v)){return false;}}return true;},_isValidParam:function(r,p,v){var i=this.rules[p],l=v[p],m=false,n=(p.indexOf('?')===0);if(l==null&&this._optionalParamsIds&&a(this._optionalParamsIds,p)!==-1){m=true;}else if(e(i)){if(n){l=v[p+'_'];}m=i.test(l);}else if(g(i)){if(n){l=v[p+'_'];}m=this._isValidArrayRule(i,l);}else if(h(i)){m=i(l,r,v);}return m;},_isValidArrayRule:function(i,v){if(!this._router.ignoreCase){return a(i,v)!==-1;}if(typeof v==='string'){v=v.toLowerCase();}var n=i.length,l,m;while(n--){l=i[n];m=(typeof l==='string')?l.toLowerCase():l;if(m===v){return true;}}return false;},_getParamsObject:function(r){var i=this._router.shouldTypecast,v=this._router.patternLexer.getParamValues(r,this._matchRegexp,i),o={},n=v.length,p,l;while(n--){l=v[n];if(this._paramsIds){p=this._paramsIds[n];if(p.indexOf('?')===0&&l){o[p+'_']=l;l=k(l,i);v[n]=l;}if(_&&l===''&&a(this._optionalParamsIds,p)!==-1){l=void(0);v[n]=l;}o[p]=l;}o[n]=l;}o.request_=i?t(r):r;o.vals_=v;return o;},_getParamsArray:function(r){var n=this.rules?this.rules.normalize_:null,p;n=n||this._router.normalizeFn;if(n&&h(n)){p=n(r,this._getParamsObject(r));}else{p=this._getParamsObject(r).vals_;}return p;},interpolate:function(r){var i=this._router.patternLexer.interpolate(this._pattern,r);if(!this._validateParams(i)){throw new Error('Generated string doesn\'t validate against `Route.rules`.');}return i;},extrapolate:function(r){var i={};if(!r){return i;}var p=this._getParamsObject(r);this._paramsIds.forEach(function(l){if(p.hasOwnProperty(l)){i[l]=p[l];}});return i;},dispose:function(){this._router.removeRoute(this);},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null;},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+']';}};C.prototype.patternLexer=(function(){var E=/[\\.+*?\^$\[\](){}\/'#]/g,L=/^\/|\/$/g,i=/\/$/g,P=/(?:\{|:)([^}:]+)(?:\}|:)/g,r=function(z,A,B){var D=B.lastIndexOf("__CR_RS__"),F=B.indexOf("__CR_RQ__"),G=B.indexOf("__CR_OQ__"),H=B.indexOf("\\/",A),I=Math.min(G===-1?B.length:G,F===-1?B.length:F),J=A+z.length;if(J>=I||J<D||J<H){return T.OS.res_normal;}else{return T.OS.res_arsbq;}},T={'OS':{rgx:/([:})]|\w(?=\/))\/?(:|(?:\{\?))/g,save:'$1{{id}}$2',res:r,res_normal:'\\/?',res_arsbq:'(?:(?:\\/(?=(?:[^\\/?]+)?))|(?:\\/?(?=\\?))|^\\/?|\\/?$)'},'RS':{rgx:/([:}])\/?(\{)/g,save:'$1{{id}}$2',res:'\\/'},'RQ':{rgx:/\{\?([^}]+)\}/g,res:'\\?(.+)'},'OQ':{rgx:/:\?([^:]+):/g,res:'(?:\\?(.*))?'},'OR':{rgx:/:([^:]+)\*:/g,res:'(.*)?'},'RR':{rgx:/\{([^}]+)\*\}/g,res:'(.+)'},'RP':{rgx:/\{([^}]+)\}/g,res:'([^\\/?]+)'},'OP':{rgx:/:([^:]+):/g,res:'([^\\/?]+)?(?:\\/(?!\\/))?'}},l=1,S=2,m=3,n=l;function p(){var z,A;for(z in T){if(T.hasOwnProperty(z)){A=T[z];A.id='__CR_'+z+'__';A.save=('save'in A)?A.save.replace('{{id}}',A.id):A.id;A.rRestore=new RegExp(A.id,'g');}}}p();function o(z,A){var B=[],D;z.lastIndex=0;while(D=z.exec(A)){B.push(D[1]);}return B;}function q(z){return o(P,z);}function u(z){return o(T.OP.rgx,z);}function v(z,A){z=z||'';if(z){if(n===l){z=z.replace(L,'');}else if(n===m){z=z.replace(i,'');}z=w(z,'rgx','save');z=z.replace(E,'\\$&');z=w(z,'rRestore','res');if(n===l){z='\\/?'+z;}}if(n!==S){z+='\\/?';}return new RegExp('^'+z+'$',A?'i':'');}function w(z,A,B){var D,F;for(F in T){if(T.hasOwnProperty(F)){D=T[F];z=z.replace(D[A],D[B]);}}return z;}function x(z,A,B){var D=A.exec(z);if(D){D.shift();if(B){D=j(D);}}return D;}function y(z,A){if(typeof z!=='string'){throw new Error('Route pattern should be a string.');}var B=function(D,F){var G,H;if(F.charAt(0)==='?'){H=A[F]||A[F.substring(1)];}else{H=A[F];}if(H!=null){if(typeof H==='object'){var I=[];for(var J in H){I.push(encodeURI(J+'='+H[J]));}G='?'+I.join('&');}else{G=String(H);}if(D.indexOf('*')===-1&&G.indexOf('/')!==-1){throw new Error('Invalid value "'+G+'" for segment "'+D+'".');}}else if(D.indexOf('{')!==-1){throw new Error('The segment '+D+' is required.');}else{G='';}return G;};if(!T.OS.trail){T.OS.trail=new RegExp('(?:'+T.OS.id+')+$');}return z.replace(T.OS.rgx,T.OS.save).replace(P,B).replace(T.OS.trail,'').replace(T.OS.rRestore,'/');}return{strict:function(){n=S;},loose:function(){n=l;},legacy:function(){n=m;},getParamIds:q,getOptionalParamsIds:u,getParamValues:x,compilePattern:v,interpolate:y};}());return c;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else{window['crossroads']=f(window['signals']);}}());
}
},"sap/ushell/core-lib-preload"
);
//# sourceMappingURL=core-min-0.js.map