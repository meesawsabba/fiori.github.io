// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell_abap/pbServices/ui2/Utils","sap/ushell/System","sap/ushell/User","sap/ui/thirdparty/jquery","sap/base/Log"],function(U,S,a,q,L){"use strict";return function(s){var u;this.getSystem=function(){return s;};this.getUser=function(){return u;};this.logout=function(){var d=new q.Deferred();q.ajax({type:"HEAD",url:s.adjustUrl("/sap/hana/xs/formLogin/token.xsjs"),headers:{"X-CSRF-Token":"Fetch"},success:function(D,o,x){q.ajax({type:"POST",url:s.adjustUrl("/sap/hana/xs/formLogin/logout.xscfunc"),headers:{"X-CSRF-Token":x.getResponseHeader("X-CSRF-Token")},success:function(){L.info("HANA system logged out: "+s.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");d.resolve();},error:function(){L.error("Logging out HANA system failed: "+s.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");d.resolve();}});},error:function(){L.error("Fetching X-CSRF-Token failed: "+s.getAlias(),null,"sap.ushell_abap.adapters.hana.ContainerAdapter");d.resolve();}});return d.promise();};};},true);
