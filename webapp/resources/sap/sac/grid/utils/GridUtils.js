/*
 * SAPUI5
  (c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.define(["sap/base/Log","sap/ui/core/theming/Parameters","sap/sac/grid/utils/Utilities","sap/sac/grid/utils/TableEventHandlers","sap/sac/grid/Format","sap/sac/grid/utils/ModelHelper","sap/sac/grid/utils/CellStyle","sap/sac/grid/thirdparty/sac.internal.grid.vendor","sap/sac/grid/thirdparty/sac.internal.grid.main.2021.22"],function(L,T,U,a,F,M,C){"use strict";function G(){var t=this;function g(s,o,f,i,h){var d={style:{},styleUpdatedByUser:true};var e=o.getRow();var j=o.getColumn();var k=o.getCellType();var l=T.get("sapUiListHeaderBackground");var m=o.data();var n=h['isOverallResults'];if(s==F.ExcelStyle){var p=((e<f)||(j<i))&&k!='Title';d.style={"fillColor":(p||n)?l:'transparent',"wrap":false};}else if(s==F.BusinessStyle){var N=m['cellDimension']=="NonMeasureStructure";d.style=C.getStyleObjectForAlignmentAndBackGround(o,f);if(h['showStyleLinesForDataLevel']&&k!='Title'&&!N){d.style.lines=C.getStyleObjectForHierarchyLevel(h['level']);}var S=o.getSemanticClass();if(S&&o.getDisplayValue()){d.style.lines=C.getStyleObjectForBusinessScenario(S);}if(n){d.style.fillColor=l;}}return d;}function b(o,s){var f=o.getFixedColumns();var i=o.getFixedRows();var d=o.getCells();var r=false;var m=0;var e=0;var O={rows:[],columns:[]};var h=o.mergeNewDataWithExisitngData?o.gridCells:{};var R={};d.forEach(function(j){var k={};var l=parseInt(j.getRow());var n=parseInt(j.getColumn());var p=j.getDisplayValue();var I=j.getIcon();e=(l>e)?l:e;m=(n>m)?n:m;R[l]=(R[l])?R[l]:[];var H=U.getHierarchyInfo(s,j,R,f,i,O);k=Object.assign(k,H);var q=U.calculateColumnWidth({displayText:p,isBold:H['isInATotalsContext'],hierarchyPaddingLeft:H['hierarchyPaddingLeft']});k.ColumnWidth=q;k.type=U.cellTypeMapping(j.getCellType(),H['isInATotalsContext']);var u=g(s,j,i,f,H);k=Object.assign(k,u);R[l][n]=k;h[l]=(h[l])?h[l]:[];h[l][n]=U.extractUsefulInfoFromCell(j);if(!r){r=(I==='sap-icon://slim-arrow-up')?true:false;}});U.storePropertiesToControl(o,r,m,e,h);U.fillMissingIndexes(o,R);return R;}t.renderSACGrid=function(o){c(o);var d;if(o.mSacTable&&o.mSacTable.cachedData){d=o.mSacTable.cachedData;}else{d=M.fetchInitialTableModel(o.getId());}if(o.dataRequestedForExpandCollapse){o.dataRequestedForExpandCollapse=false;U.updateTableData(o,d);return;}if(o.getCells().length>0){if(o.getCells().length===1){var e=o.getCells()[0];U.showNoDataInSacTable(e.getDisplayValue(),o);return;}else{U.addRemoveCssClassToReactTable(false,"noDataInTable",o);}var s=o._getFormat();var S=b(o,s);U.addRowsAndColumnSettingsToTableModel(o,d,S);U.addDataRegionPropertiesToTableModel(o,d);d.showGrid=(s!=F.BusinessStyle);U.decideWidgetDimensions(o,d);if(o.mSacTable&&d.rows.length>0){U.updateTableData(o,d);}}};function c(o){if(!o.mSacTable){var d={onCellMouseUp:function(p){if(p.event&&p.event.button===0&&U.cellValueClicked(p)){a.onCellClicked(p,o);}},onDrillIconClicked:function(p){a.onDrillIconClicked(p,o);o.mSacTable.scrollPosition={scrollTop:o.mSacTable.getScrollTop(),scrollLeft:o.mSacTable.getScrollLeft()};},onReloadLimitReached:function(p){a.requestMoreRows(o,p);}};var e=M.fetchInitialTableModel(o.getId());o.mSacTable=new ReactTable.ReactTable(e,o.reactTableContainer,d);}}t.findAnchorElement=function(o){var A=o.getParent();while(A&&!(A instanceof sap.m.VBox)){A=A.getParent();}return A;};}return new G();});
