/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["./FilterBarAPI","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/ui/test/OpaBuilder","sap/fe/macros/filter/DraftEditState"],function(F,U,a,O,E){"use strict";var b=function(f,v){return F.call(this,f,v);};b.prototype=Object.create(F.prototype);b.prototype.constructor=b;b.prototype.isAction=false;b.prototype.iCheckState=function(f){var o=this.getBuilder(),d=this.getIdentifier();if(d){o.description(U.formatMessage("Checking filter bar '{0}' for state='{1}'",this.getIdentifier(),f));}return this.prepareResult(o.hasState(f).execute());};b.prototype.iCheckFilterField=function(f,c,o,s){var A=U.parseArguments([[String,Object],[String,Array,Object,Boolean],String,Object],arguments),d=F.createFilterFieldBuilder(this.getBuilder(),A[0],A[3]);if(!A[3]||A[3].visible!==false){d.hasValue(A[1],A[2]);}return this.prepareResult(d.description(U.formatMessage("Checking the field '{1}' of filter bar '{0}' for condition values='{2}' and operator='{3}' and state='{4}'",this.getIdentifier(),A[0],A[1],A[2],A[3])).execute());};b.prototype.iCheckSearchField=function(s,S){var A=U.parseArguments([String,Object],arguments),f=this.getBuilder();return this.prepareResult(f.hasSearchField(A[0],A[1]).description(U.formatMessage("Checking the search field on filter bar '{0}' having search text '{1}' and state='{2}'",this.getIdentifier(),A[0]||"",A[1])).execute());};b.prototype.iCheckEditingStatus=function(e,f){var A=U.parseArguments([String,Object],arguments),o=this.getBuilder();return this.prepareResult(o.hasEditingStatus(A[0]&&E[A[0]],A[1]).description(U.formatMessage("Checking the editing status of filter bar '{0}' for value='{1}' and state='{2}'",this.getIdentifier(),A[0]&&E[A[0]].display,A[1])).execute());};b.prototype.iCheckSearch=function(s){var f=this.getBuilder();return this.prepareResult(f.hasProperties({showGoButton:!s||s.visible===undefined?true:s.visible}).description(U.formatMessage("Checking search on filter bar '{0}' for state='{1}'",this.getIdentifier(),s)).execute());};b.prototype.iCheckFilterAdaptation=function(){var A=a.createPopoverBuilder(this.getOpaInstance(),O.Matchers.resourceBundle("title","sap.ui.mdc","filterbar.ADAPT_TITLE"));return this.prepareResult(A.description(U.formatMessage("Checking filter adaptation dialog for filter bar '{0}'",this.getIdentifier())).execute());};b.prototype.iCheckAdaptationFilterField=function(f,s){return this.filterFieldAdaptation(f,s,U.formatMessage("Checking adaptation filter field '{1}' on filter bar '{0}' for state='{2}'",this.getIdentifier(),f,s));};b.prototype.iCheckVisualFilterSelections=function(v,l){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var I=o.getItems()[1].getItems()[0];var s=(I.isA("sap.suite.ui.microchart.InteractiveLineChart")&&I.getSelectedPoints())||(I.isA("sap.suite.ui.microchart.InteractiveBarChart")&&I.getSelectedBars());var S=[];s.forEach(function(c){S.push(c.getLabel());});l.sort();S.sort();if(l.length!==S.length){return false;}for(var j=0;j<l.length;j++){if(l[j]!==S[j]){return false;}}return true;}).description("Checking Selections of "+v+" VisualFilter").execute());};b.prototype.iCheckVisualFilterTitleAndToolTip=function(v,t,T){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var m=o.getItems()[0].getItems()[0].getContent()[0];var s=o.getItems()[0].getItems()[0].getContent()[1];var S=s?s.getText():" | ";return(t===m.getText()+(S===" "||S===" | "?"":s.getText())&&T===m.getTooltip());}).description("Checking Title and Tooltip of "+v+" VisualFilter").execute());};b.prototype.iCheckVisualFilterValueHelp=function(v,c){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var s=o.getItems()[0].getItems()[0].getContent()[3];var d=s?s.getText():undefined;return s&&d===c;}).description("Checking Value Help and its count of "+v+" VisualFilter").execute());};b.prototype.iCheckVisualFilterCriticality=function(v,l,c){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var I=o.getItems()[1].getItems()[0];var d=(I.isA("sap.suite.ui.microchart.InteractiveLineChart")&&I.getPoints())||(I.isA("sap.suite.ui.microchart.InteractiveBarChart")&&I.getBars());for(var j=0;j<d.length;j++){if(d[j].getLabel()===l&&d[j].getColor()===c){return true;}}return false;}).description("Checking Criticality of "+l+" Item").execute());};b.prototype.iCheckVisualFilterValues=function(v,V){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(c){var o;for(var i=0;i<c.length;i++){if(c[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=c[i];break;}}var I=o.getItems()[1].getItems()[0];var d=(I.isA("sap.suite.ui.microchart.InteractiveLineChart")&&I.getPoints())||(I.isA("sap.suite.ui.microchart.InteractiveBarChart")&&I.getBars());if(d.length!==V.length){return false;}for(var j=0;j<d.length;j++){if(d[j].getDisplayedValue()!==V[j]){return false;}}return true;}).description("Checking Values of "+v+" VisualFilter").execute());};b.prototype.iCheckErrorMessageAndTitle=function(v,e,s){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var I=o.getItems()[1].getItems()[0];var t=I.getErrorMessage();var T=I.getErrorMessageTitle();return t===e&&T===s;}).description("Checking error message and title of "+v+" VisualFilter").execute());};b.prototype.iCheckIsVisualFilterRequired=function(v){return this.prepareResult(O.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").check(function(V){var o;for(var i=0;i<V.length;i++){if(V[i].getParent().getId().indexOf("FilterField::"+v)>-1){o=V[i];break;}}var l=o.getItems()[0].getItems()[0].getContent()[0];return l.isA("sap.m.Label")&&l.getVisible()&&l.getRequired();}).description("Checking Whether "+v+" VisualFilter is Mandatory").execute());};return b;});
