/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["./FilterBarAPI","sap/fe/test/Utils","sap/fe/macros/filter/DraftEditState","sap/fe/test/builder/FEBuilder","sap/ui/test/Opa5","sap/ui/test/OpaBuilder","sap/fe/test/builder/VMBuilder"],function(F,U,E,a,O,b,V){"use strict";var c=function(f,v){return F.call(this,f,v);};c.prototype=Object.create(F.prototype);c.prototype.constructor=c;c.prototype.isAction=true;c.prototype.iChangeFilterField=function(f,v,C){var A=U.parseArguments([[String,Object],String,Boolean],arguments),o=F.createFilterFieldBuilder(this.getBuilder(),A[0]);return this.prepareResult(o.doChangeValue(A[1],A[2]).description(U.formatMessage("Changing the filter field '{1}' of filter bar '{0}' by adding '{2}' (was cleared first: {3})",this.getIdentifier(),A[0],A[1],!!A[2])).execute());};c.prototype.iOpenValueHelp=function(f){var o=F.createFilterFieldBuilder(this.getBuilder(),f);return this.prepareResult(o.doOpenValueHelp().description(U.formatMessage("Opening the value help for filter field '{1}' of filter bar '{0}'",this.getIdentifier(),f)).execute());};c.prototype.iChangeSearchField=function(s){var f=this.getBuilder();return this.prepareResult(f.doChangeSearch(s).description(U.formatMessage("Changing the search text on filter bar '{0}' to '{1}'",this.getIdentifier(),s||"")).execute());};c.prototype.iResetSearchField=function(){var f=this.getBuilder();return this.prepareResult(f.doResetSearch().description(U.formatMessage("Resetting the search field on filter bar '{0}'",this.getIdentifier())).execute());};c.prototype.iChangeEditingStatus=function(e){var f=this.getBuilder();return this.prepareResult(f.doChangeEditingStatus(e&&E[e]).description(U.formatMessage("Changing the editing status on filter bar '{0}' to '{1}'",this.getIdentifier(),e&&E[e].display)).execute());};c.prototype.iExecuteSearch=function(){var f=this.getBuilder();return this.prepareResult(f.doSearch().description(U.formatMessage("Executing search on filter bar '{0}'",this.getIdentifier())).execute());};c.prototype.iAddAdaptationFilterField=function(f){return this.filterFieldAdaptation(f,{selected:false},b.Actions.press("selectMulti"),U.formatMessage("Adding field '{1}' to filter bar '{0}'",this.getIdentifier(),f));};c.prototype.iRemoveAdaptationFilterField=function(f){return this.filterFieldAdaptation(f,{selected:true},b.Actions.press("selectMulti"),U.formatMessage("Removing field '{1}' to filter bar '{0}'",this.getIdentifier(),f));};c.prototype.iExecuteKeyboardShortcut=function(s,f){var B=f?F.createFilterFieldBuilder(this.getBuilder(),f):this.getBuilder();return this.prepareResult(B.doPressKeyboardShortcut(s).description(U.formatMessage("Execute keyboard shortcut '{1}' on filter bar '{0}' on field '{2}'",this.getIdentifier(),s,f)).execute());};c.prototype.iSaveVariant=function(v){var s=U.isOfType(v,String)?function(f){return V.create(this).hasId(f.getId()+"::VariantManagement").doSaveAs(v).description(U.formatMessage("Saving variant for '{0}' as '{1}'",this.getIdentifier(),v)).execute();}:function(f){return V.create(this).hasId(f.getId()+"::VariantManagement").doSave().description(U.formatMessage("Saving current variant for '{0}'",this.getIdentifier())).execute();};return this.prepareResult(this.getBuilder().success(s.bind(this)).execute());};c.prototype.iSelectVisualFilter=function(v,l,i){return this.prepareResult(b.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").hasId(new RegExp(v,"i")).success(function(d){var o=d[0];var s;var I=o.getItems()[1].getItems()[0];var e=(I.isA("sap.suite.ui.microchart.InteractiveLineChart")&&I.getPoints())||(I.isA("sap.suite.ui.microchart.InteractiveBarChart")&&I.getBars());e.forEach(function(f){if(f.getLabel()==l){s=f;}});if(!s){s=e[0];}if(I.isA("sap.suite.ui.microchart.InteractiveLineChart")){var p=I.getSelectedPoints();return I.fireSelectionChanged({selectedPoints:p,point:s,selected:i});}else if(I.isA("sap.suite.ui.microchart.InteractiveBarChart")){var p=I.getSelectedBars();return I.fireSelectionChanged({selectedPoints:p,point:s,selected:i});}}).description("Selecting an item in "+v+" VisualFilter").execute());};c.prototype.iOpenVisualFilterValueHelp=function(v){return this.prepareResult(b.create(this).hasType("sap.fe.core.controls.filterbar.VisualFilter").hasId(new RegExp(v,"i")).success(function(d){var s=d[0].getId();b.create(this).hasType("sap.m.Button").hasId(s+"::VisualFilterValueHelpButton").doPress().execute();}).description("Open ValueHelp Dialog "+v+" VisualFilter").execute());};return c;});
