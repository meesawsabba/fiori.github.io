/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/macros/DelegateUtil","sap/ui/model/json/JSONModel","sap/fe/macros/CommonHelper"],function(D,J,C){"use strict";var a={createLayout:function(p){var m=p.modifier,M=p.appComponent&&p.appComponent.getModel().getMetaModel(),f=p.element,P,F,s,o,b,c;return Promise.resolve().then(D.getCustomData.bind(D,f,"entitySet",m)).then(function(e){if(!e){return D.getCustomData(f,"navigationPath",m);}return e;}).then(function(e){P="/"+e;F=p.parentSelector?p.modifier.bySelector(p.parentSelector,p.appComponent,p.view):undefined;return D.getCustomData(F,"navigationPath",m);}).then(function(n){s=n?P+"/"+n:P;o=M.getMetaContext(s);b=M.createBindingContext(s+"/"+p.bindingPath);c=p.element.sId||p.element.id;var d={sPropertyName:p.bindingPath,sBindingPath:P,sValueHelpType:"FormVH",oControl:f,oMetaModel:M,oModifier:m};var v=Promise.all([D.isValueHelpRequired(d),D.doesValueHelpExist(d)]).then(function(r){var V=r[0],e=r[1];if(V&&!e){return t("sap.fe.macros.flexibility.ValueHelpWrapper");}return Promise.resolve();});function t(e){var g=new J({id:c,idPrefix:p.fieldSelector.id}),h={bindingContexts:{"entitySet":o,"property":b,"this":g.createBindingContext("/")},models:{"this":g,"entitySet":M,metaModel:M,"property":M}};return D.templateControlFragment(e,h,{},m);}function T(e,V){var O;return Promise.resolve().then(D.getCustomData.bind(D,f,"onChange",m)).then(function(r){O=r;return D.getCustomData(f,"displayMode",m);}).then(function(g){var h=new J({_flexId:p.fieldSelector.id,onChange:C.removeEscapeCharacters(O),displayMode:C.removeEscapeCharacters(g)}),i={bindingContexts:{"entitySet":o,"dataField":b,"this":h.createBindingContext("/")},models:{"this":h,"entitySet":M,metaModel:M,"dataField":M}};return D.templateControlFragment(e,i,{view:V},m);});}return v.then(function(v){return T("sap.fe.macros.form.FormElement",p.view).then(function(e){return{control:e,valueHelp:v};});});});}};return a;});
