/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/Filter","sap/fe/macros/filter/FilterUtils","sap/ui/model/FilterOperator","sap/base/Log"],function(F,a,b,L){"use strict";var p=[];var c={getChartSelectionsExist:function(m,s){s=s||m;if(m){try{var C=m.getControlDelegate()._getChart(m);if(C){var d=c.getDimensionsFromDrillStack(C);var i=d.length>p.length;var I=d.length<p.length;var n=d.toString()===p.toString();var f;if(I&&d.length===1){f=c.getChartSelections(m,true);}else{f=c.getChartSelections(m);}if(i||I){p=d;return f.length>0;}else if(n&&s.isA("sap.ui.mdc.Table")){return f.length>0;}}}catch(e){return false;}}return false;},getChartSelections:function(m,C){if(C){c.getChartModel(m,"",{});}var v=c.getChartModel(m,"filters");return v||[];},getChartFilters:function(m){var f=c.getChartSelections(m)||[];return new F(f);},setChartFilters:function(m){var C=m.getControlDelegate()._getChart(m);var d=[];function e(s){for(var g in s){var h=[];for(var i in V){var j=V[i];var k=s[g].data[j];if(k!==undefined){h.push(new F({path:j,operator:b.EQ,value1:k}));}}if(h.length>0){d.push(new F(h,true));}}}if(C){var v=c.getVizSelection(C);var V=C.getVisibleDimensions();var D=c.getDimensionsFromDrillStack(C);if(D.length>0){var o=c.getChartModel(m,"drillStack")||{};c.getChartModel(m,"drillStack",{});o[D.toString()]=v;c.getChartModel(m,"drillStack",o);}if(v.length>0){e(v);}else{var f=Object.keys(o)||[];var P=o[f[f.length-2]]||[];e(P);}c.getChartModel(m,"filters",d);}},getFilterBarFilterInfo:function(C){return a.getFilterInfo(C.getFilter(),{targetControl:C});},getAllFilterInfo:function(C){var f=c.getFilterBarFilterInfo(C);var d=c.getChartFilters(C);if(d&&d.aFilters&&d.aFilters.length){f.filters.push(d);}return f;},getChartSelectedData:function(C){var s=[];switch(C.getSelectionBehavior()){case"DATAPOINT":s=C.getSelectedDataPoints().dataPoints;break;case"CATEGORY":s=C.getSelectedCategories().categories;break;case"SERIES":s=C.getSelectedSeries().series;break;}return s;},getChartModel:function(m,P,d){var i=m.getBindingContext("internal");if(!i){return false;}if(d){i.setProperty(P,d);}return i&&i.getObject(P);},getDimensionsFromDrillStack:function(C){var d=C.getDrillStack()||[];var e=d.pop()||{};var D=e.dimension||[];return D;},getVizSelection:function(C){return(C&&C._getVizFrame()&&C._getVizFrame().vizSelection())||[];}};return c;});
