/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/macros/CommonHelper","sap/ui/mdc/enum/ConditionValidated","sap/fe/core/CommonUtils","sap/fe/core/library","sap/fe/macros/field/FieldRuntime","sap/fe/macros/table/TableHelper"],function(C,a,b,F,c,T){"use strict";var d=F.CreationMode;var e={displayTableSettings:function(E){var p=E.getSource().getParent(),s=sap.ui.getCore().byId(p.getId()+"-settings");b.fireButtonPress(s);},executeConditionalActionShortcut:function(B,s){var m=s.getParent();if(B!==d.CreationRow){var o=m.getActions().reduce(function(A,g){return A.concat(g.getAction());},[]).find(function(A){return A.getId().endsWith(B);});b.fireButtonPress(o);}else{var f=m.getAggregation("creationRow");if(f&&f.getApplyEnabled()&&f.getVisible()){f.fireApply();}}},setContexts:function(t,D,o,s,n,A,u){var f=A?A.split(","):[];var g=JSON.parse(s);var N=n&&n!=="undefined"&&JSON.parse(n);var S=t.getSelectedContexts();var h=false;var j=[];var U=[];var k=[];var l=[];var m={};var I={};var L={};var M;var p=t.getBindingContext("internal");L.aUnsavedContexts=[];L.aLockedContexts=[];p.setProperty("",{selectedContexts:S,numberOfSelectedContexts:S.length,dynamicActions:m,ibn:I,deleteEnabled:true,deletableContexts:[],unSavedContexts:[],lockedContexts:[],updatableContexts:[]});for(var i=0;i<S.length;i++){var q=S[i];var r=q.getObject();for(var v in r){if(v.indexOf("#")===0){var w=v;w=w.substring(1,w.length);M=p.getObject();M.dynamicActions[w]={enabled:true};p.setProperty("",M);}}M=p.getObject();if(D!="undefined"){if(q&&q.getProperty(D)){if(o!=="undefined"&&r.IsActiveEntity===true&&r.HasDraftEntity===true){L=x(r,q);}else{j.push(q);L.isDeletable=true;}}M["deleteEnabled"]=L.isDeletable;}else if(o!=="undefined"&&r.IsActiveEntity===true&&r.HasDraftEntity===true){L=x(r,q);}else{j.push(q);}if(u!=="undefined"){if(q&&q.getProperty(u)){U.push(q);}}}function x(r,q){if(r.DraftAdministrativeData.InProcessByUser){l.push(q);}else{k.push(q);h=true;}return{aLockedContexts:l,aUnsavedContexts:k,isDeletable:h};}if(!t.data("enableAnalytics")){T.setIBNEnablement(p,N,S);}if(S.length>1){this.disableAction(f,m);}M["deletableContexts"]=j;M["updatableContexts"]=U;M["unSavedContexts"]=L.aUnsavedContexts;M["lockedContexts"]=L.aLockedContexts;M["controlId"]=t.getId();p.setProperty("",M);return b.setActionEnablement(p,g,S);},disableAction:function(A,D){A.forEach(function(s){D[s]={bEnabled:false};});},onFieldChangeInCreationRow:function(E,o){var f=c.getFieldStateOnChange(E),s=f.field,g=s.getId();var i=s.getBindingContext("internal"),m=i.getProperty("creationRowFieldValidity"),n=Object.assign({},m);n[g]=f.state;i.setProperty("creationRowFieldValidity",n);if(o){var h=i.getProperty("creationRowCustomValidity"),N=Object.assign({},h);N[s.getBinding("value").getPath()]={fieldId:s.getId()};i.setProperty("creationRowCustomValidity",N);var M=sap.ui.getCore().getMessageManager();var t=s.getBindingContext().getPath()+"/"+s.getBindingPath("value");M.getMessageModel().getData().forEach(function(j){if(j.target===t){M.removeMessages(j);}});}},getVBoxVisibility:function(){var i=this.getItems();var l=false;for(var f=i.length-1;f>=0;f--){if(!l){if(arguments[f]!==true){l=true;if(C._isRatingIndicator(i[f])){C._updateStyleClassForRatingIndicator(i[f],true);}else{i[f].removeStyleClass("sapUiTinyMarginBottom");}}}else{if(C._isRatingIndicator(i[f])){C._updateStyleClassForRatingIndicator(i[f],false);}else{i[f].addStyleClass("sapUiTinyMarginBottom");}}}return true;}};return e;},true);
