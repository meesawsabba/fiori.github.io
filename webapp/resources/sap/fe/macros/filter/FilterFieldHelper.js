/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/macros/CommonHelper","sap/fe/core/CommonUtils","sap/ui/model/odata/v4/AnnotationHelper"],function(C,a,A){"use strict";var F={isRequiredInFilter:function(p,d){var m=d.context.getModel(),P=d.context.getPath(),s=C.getLocationForPropertyPath(m,P),b,f,i=m.getObject(s+"/@com.sap.vocabularies.Common.v1.ResultContext");if(!i){if(typeof p==="string"){b=p;}else{b=m.getObject(P+"@sapui.name");}f=m.getObject(s+"@Org.OData.Capabilities.V1.FilterRestrictions");if(f&&f.RequiredProperties){i=f.RequiredProperties.some(function(c){return c.$PropertyPath===b;});}}return i;},maxConditions:function(p,d){var P,s,f,m=-1,M=d.context.getModel(),b=d.context.getPath();P=C.getLocationForPropertyPath(M,b);if(M.getObject(P+"/@com.sap.vocabularies.Common.v1.ResultContext")===true){return 1;}if(typeof p==="string"){s=p;}else{s=M.getObject(b+"@sapui.name");}f=a.getFilterRestrictionsByPath(P,M);var o=M.getObject(P+"/"+s);if(!o){o=M.getObject(b);}if(o.$Type==="Edm.Boolean"){m=1;}else if(f&&f.FilterAllowedExpressions&&f.FilterAllowedExpressions[s]){var c=a.getSpecificAllowedExpression(f.FilterAllowedExpressions[s]);if(c==="SingleValue"||c==="SingleRange"){m=1;}}return m;},getConditionsBinding:function(c,p,e){var P=c.getInterface(0),m=P.getModel(),f=P.getPath(),s="",E=c.getInterface(1).getPath(),b,i;if(e&&e["$kind"]==="EntityType"&&f.startsWith(E)){E=c.getInterface(1).getPath();var d=f.replace(E,"");b=d.split("/");}else{b=f.substring(1).split("/");E="/"+b.shift()+"/";}for(i=0;i<b.length;++i){p=m.getProperty(E+b.slice(0,i+1).join("/"));if(p.$kind==="NavigationProperty"&&p.$isCollection){s+=b[i]+"*/";}else if(typeof p!=="string"){s+=b[i]+"/";}}return"{$filters>/conditions/"+s.substring(0,s.length-1)+"}";},constraints:function(p,i){var v=A.format(p,i),m=v&&v.match(/constraints:.*?({.*?})/),c=m&&m[1];if(v.indexOf("sap.ui.model.odata.type.DateTimeOffset")>-1){if(c){c=c.substr(0,m[1].indexOf("}"))+", V4: true}";}else{c="{V4: true}";}}if(c&&c.indexOf("'nullable':false")>=0){c=c.replace(/,[ ]*'nullable':false/,"").replace(/'nullable':false[, ]*/,"");}return c||undefined;},formatOptions:function(p,i){if(p.$Type==="Edm.String"&&(!p.hasOwnProperty("$Nullable")||p.$Nullable===true)){i.arguments=[null,{parseKeepsEmptyString:false}];}var v=A.format(p,i),m=v&&v.match(/formatOptions:.*?({.*?})/);return(m&&m[1])||undefined;}};F.getConditionsBinding.requiresIContext=true;return F;});
