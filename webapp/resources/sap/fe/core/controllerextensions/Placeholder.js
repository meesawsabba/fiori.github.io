/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/base/util/UriParameters","sap/base/util/ObjectPath","sap/ui/core/Placeholder","sap/fe/placeholder/library"],function(C,U,O,P){"use strict";var E=C.extend("sap.fe.core.controllerextensions.Placeholder",{attachHideCallback:function(){if(this.isPlaceholderEnabled()){var v=this.base.getView();var p=v.getParent().oContainer;var n=p.getParent();var _={onAfterShow:function(e){if(e.isBackToPage){n.hidePlaceholder();}else if(U.fromQuery(window.location.hash.replace(/#.*\?/,"")).get("restoreHistory")==="true"){n.hidePlaceholder();}}};p.addEventDelegate(_);var o=v.getController().pageReady;var a=["pageReady"];if(v.getControllerName()==="sap.fe.templates.ObjectPage.ObjectPageController"){a.push("heroesBatchReceived");}a.forEach(function(e){o.attachEvent(e,null,function(){n.hidePlaceholder();},null);});}},attachRouteMatchers:function(){this._init();},_init:function(){this.oAppComponent=this.base.getAppComponent();this.oRouting=this.oAppComponent._oRouting;this.oRootContainer=this.oAppComponent.getRootContainer();this.oRouter=this.oAppComponent.getRouter();this.oPlaceholders={};if(this.isPlaceholderEnabled()){P.registerProvider(function(c){switch(c.name){case"sap.fe.templates.ListReport":return{html:"sap/fe/placeholder/view/PlaceholderLR.fragment.html",autoClose:false};case"sap.fe.templates.ObjectPage":return{html:"sap/fe/placeholder/view/PlaceholderOP.fragment.html",autoClose:false};default:return;}});}if(this.isPlaceholderDebugEnabled()){this.initPlaceholderDebug();}},initPlaceholderDebug:function(){this.resetPlaceholderDebugStats();var t=this;var h={apply:function(a,b,c){if(t.oRootContainer._placeholder&&t.oRootContainer._placeholder.placeholder){t.debugStats.iHidePlaceholderTimestamp=Date.now();}return a.bind(t.oRootContainer)();}};var p=new Proxy(this.oRootContainer.hidePlaceholder,h);this.oRootContainer.hidePlaceholder=p;},isPlaceholderDebugEnabled:function(){if(U.fromQuery(window.location.search).get("sap-ui-xx-placeholder-debug")==="true"){return true;}return false;},resetPlaceholderDebugStats:function(){this.debugStats={iHidePlaceholderTimestamp:0,iPageReadyEventTimestamp:0,iHeroesBatchReceivedEventTimestamp:0};},getPlaceholderDebugStats:function(){return this.debugStats;},isPlaceholderEnabled:function(){var p=O.get("sap-ushell-config.apps.placeholder.enabled");if(p===false){return false;}return sap.ui.getCore().getConfiguration().getPlaceholder();}});return E;});
