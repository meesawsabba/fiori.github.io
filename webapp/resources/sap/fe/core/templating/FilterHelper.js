/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated"],function(C,a){"use strict";var _={};var c=C.createCondition;function o(i,p){var q=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);if(p){s=s.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable;});}q.push.apply(q,s);}return q;}function b(t){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};if(i%2){o(Object(s),true).forEach(function(p){d(t,p,s[p]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(s));}else{o(Object(s)).forEach(function(p){Object.defineProperty(t,p,Object.getOwnPropertyDescriptor(s,p));});}}return t;}function d(i,p,q){if(p in i){Object.defineProperty(i,p,{value:q,enumerable:true,configurable:true,writable:true});}else{i[p]=q;}return i;}var v=["Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTime","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Float","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.String","Edm.Time","Edm.TimeOfDay"];var e={"Contains":"NotContains","StartsWith":"NotStartsWith","EndsWith":"NotEndsWith","Empty":"NotEmpty","NotEmpty":"Empty","LE":"NOTLE","GE":"NOTGE","LT":"NOTLT","GT":"NOTGT","BT":"NOTBT","NE":"EQ","EQ":"NE"};function g(V,t){var i;if(v.indexOf(t)>-1){i=V;if(t==="Edm.Boolean"){i=V==="true"||(V==="false"?false:undefined);}else if(t==="Edm.Double"||t==="Edm.Single"){i=isNaN(V)?undefined:parseFloat(V);}else if(t==="Edm.Byte"||t==="Edm.Int16"||t==="Edm.Int32"||t==="Edm.SByte"){i=isNaN(V)?undefined:parseInt(V,10);}else if(t==="Edm.Date"){i=V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/)?V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/)[0]:V.match(/^(\d{8})/)&&V.match(/^(\d{8})/)[0];}else if(t==="Edm.DateTimeOffset"){if(V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2}):(\d{1,2})\+(\d{1,4})/)){i=V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2}):(\d{1,2})\+(\d{1,4})/)[0];}else if(V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2}):(\d{1,2})/)){i=V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})T(\d{1,2}):(\d{1,2}):(\d{1,2})/)[0]+"+0000";}else if(V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/)){i=V.match(/^(\d{4})-(\d{1,2})-(\d{1,2})/)[0]+"T00:00:00+0000";}else if(V.indexOf("Z")===V.length-1){i=V.split("Z")[0]+"+0100";}else{i=undefined;}}else if(t==="Edm.TimeOfDay"){i=V.match(/(\d{1,2}):(\d{1,2}):(\d{1,2})/)?V.match(/(\d{1,2}):(\d{1,2}):(\d{1,2})/)[0]:undefined;}}return i;}_.getTypeCompliantValue=g;function r(O,V,i,s){var p=V,q,I;var t={};t.values=[];t.isEmpty=null;if(V===undefined||V===null){return;}switch(O){case"CP":I="Contains";if(p){var u=p.indexOf("*");var w=p.lastIndexOf("*");if(u>-1){if(u===0&&w!==p.length-1){I="EndsWith";p=p.substring(1,p.length);}else if(u!==0&&w===p.length-1){I="StartsWith";p=p.substring(0,p.length-1);}else{p=p.substring(1,p.length-1);}}else{return;}}break;case"EQ":I=V===""?"Empty":O;break;case"NE":I=V===""?"NotEmpty":O;break;case"BT":if(i===undefined||i===null){return;}q=i;I=O;break;case"LE":case"GE":case"GT":case"LT":I=O;break;default:return;}if(s==="E"){I=e[I];}t.operator=I;if(I!=="Empty"){t.values.push(p);if(q){t.values.push(q);}}return t;}_.resolveConditionValues=r;function f(O){return O.indexOf("/")>0?O.split("/")[1]:O;}_.getOperator=f;function h(i,s,p){var q={};if(s){var S=s.SelectOptions;var P=s.Parameters;var V=i;S===null||S===void 0?void 0:S.forEach(function(t){var u=t.PropertyName;var w=u.value||u.$PropertyPath;var R=t.Ranges;for(var x in V){if(w===x){(function(){var y=V[x];var z=[];R===null||R===void 0?void 0:R.forEach(function(A){var B=p?p(A,y,w):j(A,y);z.push(B);if(z.length){q[w]=(q[w]||[]).concat(z);}});})();}}});P===null||P===void 0?void 0:P.forEach(function(t){var u=t.PropertyName.value||t.PropertyName.$PropertyPath;var w=p?{operator:"EQ",value1:t.PropertyValue,value2:null,path:u,isParameter:true}:{operator:"EQ",values:[t.PropertyValue],isEmpty:null,validated:a.Validated,isParameter:true};q[u]=[w];});}return q;}_.getFiltersConditionsFromSelectionVariant=h;function j(R,V){var i;var s=R.Sign;var O=R.Option?f(R.Option):undefined;var p=g(R.Low,V.$Type);var q=R.High?g(R.High,V.$Type):undefined;var t=r(O,p,q,s);if(t){i=c(t.operator,t.values,null,null,a.Validated);}return i;}_.getConditions=j;var k=function(i,p){var q={};var s=i.getInterface(1).getPath(),M=i.getInterface(1).getModel();if(p){for(var t in p){var u=M.getObject(s+"/"+t+"@com.sap.vocabularies.Common.v1.FilterDefaultValue");if(u!==undefined){var P=t;q[P]=[c("EQ",[u],null,null,a.Validated)];}}}return q;};var l=function(i,p,q){var s={};if(p){for(var t in p){if(q[t]&&q[t][0]){s[t]=[c(q[t][0].operator,[],null,null,null)];}}}return s;};function m(){var i={};i["$editState"]=[c("DRAFT_EDIT_STATE",["ALL"],null,null,a.Validated)];return i;}function n(i,p){var q,s;var t;var u=i.getInterface(1).getPath(),M=i.getInterface(1).getModel(),w=M.getObject(u+"@"),x=M.getObject(u+"/");if(w["@com.sap.vocabularies.Common.v1.DraftRoot"]||w["@com.sap.vocabularies.Common.v1.DraftNode"]){t=m();}var y=(q=p)===null||q===void 0?void 0:q.selectionVariant;var z=((s=p)===null||s===void 0?void 0:s.defaultSemanticDates)||{};var A=k(i,x);var B=l(i,x,z);if(y){p=h(x,y);}else if(A){p=A;}if(B){p=b(b({},p),B);}if(t){p=b(b({},p),t);}return Object.keys(p).length>0?JSON.stringify(p):undefined;}_.getFilterConditions=n;n.requiresIContext=true;return _;},false);
