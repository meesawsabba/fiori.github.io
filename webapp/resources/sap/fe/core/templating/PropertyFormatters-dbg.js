/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["./PropertyHelper", "./UIFormatters", "sap/fe/core/converters/MetaModelConverter", "sap/fe/core/templating/DataModelPathHelper"], function (PropertyHelper, UIFormatters, MetaModelConverter, DataModelPathHelper) {
  "use strict";

  var _exports = {};
  var getTargetObjectPath = DataModelPathHelper.getTargetObjectPath;
  var enhanceDataModelPath = DataModelPathHelper.enhanceDataModelPath;
  var getInvolvedDataModelObjects = MetaModelConverter.getInvolvedDataModelObjects;
  var getConverterContext = UIFormatters.getConverterContext;

  var getProperty = function (oContext, oInterface) {
    var sPath = oInterface.context.getPath();

    if (!oContext) {
      throw new Error("Unresolved context path " + sPath);
    }

    var isPath = false;

    if (typeof oContext === "object" && oContext.hasOwnProperty("$Path")) {
      isPath = true;
    } else if (typeof oContext === "object" && oContext.hasOwnProperty("$kind") && oContext.$kind !== "Property") {
      throw new Error("Context does not resolve to a Property object but to a " + oContext.$kind);
    }

    var oConverterContext = getConverterContext(oContext, oInterface);

    if (isPath) {
      oConverterContext = oConverterContext.$target;
    }

    return oConverterContext;
  };

  _exports.getProperty = getProperty;

  var getPropertyObjectPath = function (oContext, oInterface) {
    var sPath = oInterface.context.getPath();

    if (!oContext) {
      throw new Error("Unresolved context path " + sPath);
    }

    if (typeof oContext === "object" && oContext.hasOwnProperty("$kind") && oContext.$kind !== "Property") {
      throw new Error("Context does not resolve to a Property object but to a " + oContext.$kind);
    }

    var involvedDataModelObjects = getInvolvedDataModelObjects(oInterface.context);

    if (involvedDataModelObjects.targetObject && involvedDataModelObjects.targetObject.type === "Path") {
      involvedDataModelObjects = enhanceDataModelPath(involvedDataModelObjects, involvedDataModelObjects.targetObject.path);
    }

    return involvedDataModelObjects;
  };

  _exports.getPropertyObjectPath = getPropertyObjectPath;

  var isKey = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.isKey(oProperty);
  };

  _exports.isKey = isKey;

  var hasValueHelp = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasValueHelp(oProperty);
  };

  _exports.hasValueHelp = hasValueHelp;

  var hasDateType = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasDateType(oProperty);
  };

  _exports.hasDateType = hasDateType;

  var hasValueHelpWithFixedValues = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasValueHelpWithFixedValues(oProperty);
  };

  _exports.hasValueHelpWithFixedValues = hasValueHelpWithFixedValues;

  var hasUnitOrCurrency = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.hasCurrency(oProperty) || PropertyHelper.hasUnit(oProperty);
  };

  _exports.hasUnitOrCurrency = hasUnitOrCurrency;

  var getName = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return oProperty.name;
  };

  _exports.getName = getName;

  var getLabel = function (oContext, oInterface) {
    var oProperty = getProperty(oContext, oInterface);
    return PropertyHelper.getLabel(oProperty);
  };

  _exports.getLabel = getLabel;

  var getPropertyPath = function (oContext, oInterface) {
    var propertyPath = getPropertyObjectPath(oContext, oInterface);
    return getTargetObjectPath(propertyPath);
  };

  _exports.getPropertyPath = getPropertyPath;

  var getRelativePropertyPath = function (oContext, oInterface) {
    var propertyPath = getPropertyObjectPath(oContext, oInterface);
    return getTargetObjectPath(propertyPath, true);
  };

  _exports.getRelativePropertyPath = getRelativePropertyPath;
  return _exports;
}, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb3BlcnR5Rm9ybWF0dGVycy50cyJdLCJuYW1lcyI6WyJnZXRQcm9wZXJ0eSIsIm9Db250ZXh0Iiwib0ludGVyZmFjZSIsInNQYXRoIiwiY29udGV4dCIsImdldFBhdGgiLCJFcnJvciIsImlzUGF0aCIsImhhc093blByb3BlcnR5IiwiJGtpbmQiLCJvQ29udmVydGVyQ29udGV4dCIsImdldENvbnZlcnRlckNvbnRleHQiLCIkdGFyZ2V0IiwiZ2V0UHJvcGVydHlPYmplY3RQYXRoIiwiaW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIiwiZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzIiwidGFyZ2V0T2JqZWN0IiwidHlwZSIsImVuaGFuY2VEYXRhTW9kZWxQYXRoIiwicGF0aCIsImlzS2V5Iiwib1Byb3BlcnR5IiwiUHJvcGVydHlIZWxwZXIiLCJoYXNWYWx1ZUhlbHAiLCJoYXNEYXRlVHlwZSIsImhhc1ZhbHVlSGVscFdpdGhGaXhlZFZhbHVlcyIsImhhc1VuaXRPckN1cnJlbmN5IiwiaGFzQ3VycmVuY3kiLCJoYXNVbml0IiwiZ2V0TmFtZSIsIm5hbWUiLCJnZXRMYWJlbCIsImdldFByb3BlcnR5UGF0aCIsInByb3BlcnR5UGF0aCIsImdldFRhcmdldE9iamVjdFBhdGgiLCJnZXRSZWxhdGl2ZVByb3BlcnR5UGF0aCJdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQUlPLE1BQU1BLFdBQVcsR0FBRyxVQUFTQyxRQUFULEVBQXFDQyxVQUFyQyxFQUF3RjtBQUNsSCxRQUFNQyxLQUFLLEdBQUdELFVBQVUsQ0FBQ0UsT0FBWCxDQUFtQkMsT0FBbkIsRUFBZDs7QUFDQSxRQUFJLENBQUNKLFFBQUwsRUFBZTtBQUNkLFlBQU0sSUFBSUssS0FBSixDQUFVLDZCQUE2QkgsS0FBdkMsQ0FBTjtBQUNBOztBQUNELFFBQUlJLE1BQU0sR0FBRyxLQUFiOztBQUNBLFFBQUksT0FBT04sUUFBUCxLQUFvQixRQUFwQixJQUFnQ0EsUUFBUSxDQUFD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QixTQUFtQixHQUFHckIsV0FBVyxDQUFDQyxRQUFELEVBQVdDLFVBQVgsQ0FBdkM7QUFDQSxXQUFPb0IsY0FBYyxDQUFDSyxXQUFmLENBQTJCTixTQUEzQixLQUF5Q0MsY0FBYyxDQUFDTSxPQUFmLENBQXVCUCxTQUF2QixDQUFoRDtBQUNBLEdBSE07Ozs7QUFLQSxNQUFNUSxPQUFPLEdBQUcsVUFBUzVCLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzVHLFFBQU1tQixTQUFtQixHQUFHckIsV0FBVyxDQUFDQyxRQUFELEVBQVdDLFVBQVgsQ0FBdkM7QUFDQSxXQUFPbUIsU0FBUyxDQUFDUyxJQUFqQjtBQUNBLEdBSE07Ozs7QUFLQSxNQUFNQyxRQUFRLEdBQUcsVUFBUzlCLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzdHLFFBQU1tQixTQUFtQixHQUFHckIsV0FBVyxDQUFDQyxRQUFELEVBQVdDLFVBQVgsQ0FBdkM7QUFDQSxXQUFPb0IsY0FBYyxDQUFDUyxRQUFmLENBQXdCVixTQUF4QixDQUFQO0FBQ0EsR0FITTs7OztBQUtBLE1BQU1XLGVBQWUsR0FBRyxVQUFTL0IsUUFBVCxFQUFxQ0MsVUFBckMsRUFBc0Y7QUFDcEgsUUFBTStCLFlBQVksR0FBR3BCLHFCQUFxQixDQUFDWixRQUFELEVBQVdDLFVBQVgsQ0FBMUM7QUFDQSxXQUFPZ0MsbUJBQW1CLENBQUNELFlBQUQsQ0FBMUI7QUFDQSxHQUhNOzs7O0FBS0EsTUFBTUUsdUJBQXVCLEdBQUcsVUFBU2xDLFFBQVQsRUFBcUNDLFVBQXJDLEVBQXNGO0FBQzVILFFBQU0rQixZQUFZLEdBQUdwQixxQkFBcUIsQ0FBQ1osUUFBRCxFQUFXQyxVQUFYLENBQTFDO0FBQ0EsV0FBT2dDLG1CQUFtQixDQUFDRCxZQUFELEVBQWUsSUFBZixDQUExQjtBQUNBLEdBSE0iLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFByb3BlcnR5SGVscGVyIGZyb20gXCIuL1Byb3BlcnR5SGVscGVyXCI7XG5pbXBvcnQgeyBnZXRDb252ZXJ0ZXJDb250ZXh0LCBNZXRhTW9kZWxDb250ZXh0LCBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UgfSBmcm9tIFwiLi9VSUZvcm1hdHRlcnNcIjtcbmltcG9ydCB7IFByb3BlcnR5IH0gZnJvbSBcIkBzYXAtdXgvdm9jYWJ1bGFyaWVzLXR5cGVzL2Rpc3QvQ29udmVydGVyXCI7XG5pbXBvcnQgeyBnZXRJbnZvbHZlZERhdGFNb2RlbE9iamVjdHMgfSBmcm9tIFwic2FwL2ZlL2NvcmUvY29udmVydGVycy9NZXRhTW9kZWxDb252ZXJ0ZXJcIjtcbmltcG9ydCB7IERhdGFNb2RlbE9iamVjdFBhdGgsIGVuaGFuY2VEYXRhTW9kZWxQYXRoLCBnZXRUYXJnZXRPYmplY3RQYXRoIH0gZnJvbSBcInNhcC9mZS9jb3JlL3RlbXBsYXRpbmcvRGF0YU1vZGVsUGF0aEhlbHBlclwiO1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHkgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogUHJvcGVydHkge1xuXHRjb25zdCBzUGF0aCA9IG9JbnRlcmZhY2UuY29udGV4dC5nZXRQYXRoKCk7XG5cdGlmICghb0NvbnRleHQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlc29sdmVkIGNvbnRleHQgcGF0aCBcIiArIHNQYXRoKTtcblx0fVxuXHRsZXQgaXNQYXRoID0gZmFsc2U7XG5cdGlmICh0eXBlb2Ygb0NvbnRleHQgPT09IFwib2JqZWN0XCIgJiYgb0NvbnRleHQuaGFzT3duUHJvcGVydHkoXCIkUGF0aFwiKSkge1xuXHRcdGlzUGF0aCA9IHRydWU7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9Db250ZXh0ID09PSBcIm9iamVjdFwiICYmIG9Db250ZXh0Lmhhc093blByb3BlcnR5KFwiJGtpbmRcIikgJiYgb0NvbnRleHQuJGtpbmQgIT09IFwiUHJvcGVydHlcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRleHQgZG9lcyBub3QgcmVzb2x2ZSB0byBhIFByb3BlcnR5IG9iamVjdCBidXQgdG8gYSBcIiArIG9Db250ZXh0LiRraW5kKTtcblx0fVxuXHRsZXQgb0NvbnZlcnRlckNvbnRleHQgPSBnZXRDb252ZXJ0ZXJDb250ZXh0KG9Db250ZXh0LCBvSW50ZXJmYWNlKSBhcyBQcm9wZXJ0eTtcblx0aWYgKGlzUGF0aCkge1xuXHRcdG9Db252ZXJ0ZXJDb250ZXh0ID0gKG9Db252ZXJ0ZXJDb250ZXh0IGFzIGFueSkuJHRhcmdldDtcblx0fVxuXHRyZXR1cm4gb0NvbnZlcnRlckNvbnRleHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHlPYmplY3RQYXRoID0gZnVuY3Rpb24oXG5cdG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0IHwgc3RyaW5nLFxuXHRvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2Vcbik6IERhdGFNb2RlbE9iamVjdFBhdGgge1xuXHRjb25zdCBzUGF0aCA9IG9JbnRlcmZhY2UuY29udGV4dC5nZXRQYXRoKCk7XG5cdGlmICghb0NvbnRleHQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlc29sdmVkIGNvbnRleHQgcGF0aCBcIiArIHNQYXRoKTtcblx0fVxuXHRpZiAodHlwZW9mIG9Db250ZXh0ID09PSBcIm9iamVjdFwiICYmIG9Db250ZXh0Lmhhc093blByb3BlcnR5KFwiJGtpbmRcIikgJiYgb0NvbnRleHQuJGtpbmQgIT09IFwiUHJvcGVydHlcIikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvbnRleHQgZG9lcyBub3QgcmVzb2x2ZSB0byBhIFByb3BlcnR5IG9iamVjdCBidXQgdG8gYSBcIiArIG9Db250ZXh0LiRraW5kKTtcblx0fVxuXHRsZXQgaW52b2x2ZWREYXRhTW9kZWxPYmplY3RzID0gZ2V0SW52b2x2ZWREYXRhTW9kZWxPYmplY3RzKG9JbnRlcmZhY2UuY29udGV4dCk7XG5cdGlmIChpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMudGFyZ2V0T2JqZWN0ICYmIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cy50YXJnZXRPYmplY3QudHlwZSA9PT0gXCJQYXRoXCIpIHtcblx0XHRpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMgPSBlbmhhbmNlRGF0YU1vZGVsUGF0aChpbnZvbHZlZERhdGFNb2RlbE9iamVjdHMsIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cy50YXJnZXRPYmplY3QucGF0aCk7XG5cdH1cblx0cmV0dXJuIGludm9sdmVkRGF0YU1vZGVsT2JqZWN0cztcbn07XG5cbmV4cG9ydCBjb25zdCBpc0tleSA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBib29sZWFuIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIFByb3BlcnR5SGVscGVyLmlzS2V5KG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFzVmFsdWVIZWxwID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IGJvb2xlYW4ge1xuXHRjb25zdCBvUHJvcGVydHk6IFByb3BlcnR5ID0gZ2V0UHJvcGVydHkob0NvbnRleHQsIG9JbnRlcmZhY2UpO1xuXHRyZXR1cm4gUHJvcGVydHlIZWxwZXIuaGFzVmFsdWVIZWxwKG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgaGFzRGF0ZVR5cGUgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogYm9vbGVhbiB7XG5cdGNvbnN0IG9Qcm9wZXJ0eTogUHJvcGVydHkgPSBnZXRQcm9wZXJ0eShvQ29udGV4dCwgb0ludGVyZmFjZSk7XG5cdHJldHVybiBQcm9wZXJ0eUhlbHBlci5oYXNEYXRlVHlwZShvUHJvcGVydHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhc1ZhbHVlSGVscFdpdGhGaXhlZFZhbHVlcyA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBib29sZWFuIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIFByb3BlcnR5SGVscGVyLmhhc1ZhbHVlSGVscFdpdGhGaXhlZFZhbHVlcyhvUHJvcGVydHkpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhc1VuaXRPckN1cnJlbmN5ID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IGJvb2xlYW4ge1xuXHRjb25zdCBvUHJvcGVydHk6IFByb3BlcnR5ID0gZ2V0UHJvcGVydHkob0NvbnRleHQsIG9JbnRlcmZhY2UpO1xuXHRyZXR1cm4gUHJvcGVydHlIZWxwZXIuaGFzQ3VycmVuY3kob1Byb3BlcnR5KSB8fCBQcm9wZXJ0eUhlbHBlci5oYXNVbml0KG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TmFtZSA9IGZ1bmN0aW9uKG9Db250ZXh0OiBNZXRhTW9kZWxDb250ZXh0LCBvSW50ZXJmYWNlOiBDb21wdXRlZEFubm90YXRpb25JbnRlcmZhY2UpOiBzdHJpbmcge1xuXHRjb25zdCBvUHJvcGVydHk6IFByb3BlcnR5ID0gZ2V0UHJvcGVydHkob0NvbnRleHQsIG9JbnRlcmZhY2UpO1xuXHRyZXR1cm4gb1Byb3BlcnR5Lm5hbWU7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0TGFiZWwgPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogc3RyaW5nIHtcblx0Y29uc3Qgb1Byb3BlcnR5OiBQcm9wZXJ0eSA9IGdldFByb3BlcnR5KG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIFByb3BlcnR5SGVscGVyLmdldExhYmVsKG9Qcm9wZXJ0eSk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UHJvcGVydHlQYXRoID0gZnVuY3Rpb24ob0NvbnRleHQ6IE1ldGFNb2RlbENvbnRleHQsIG9JbnRlcmZhY2U6IENvbXB1dGVkQW5ub3RhdGlvbkludGVyZmFjZSk6IHN0cmluZyB7XG5cdGNvbnN0IHByb3BlcnR5UGF0aCA9IGdldFByb3BlcnR5T2JqZWN0UGF0aChvQ29udGV4dCwgb0ludGVyZmFjZSk7XG5cdHJldHVybiBnZXRUYXJnZXRPYmplY3RQYXRoKHByb3BlcnR5UGF0aCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UmVsYXRpdmVQcm9wZXJ0eVBhdGggPSBmdW5jdGlvbihvQ29udGV4dDogTWV0YU1vZGVsQ29udGV4dCwgb0ludGVyZmFjZTogQ29tcHV0ZWRBbm5vdGF0aW9uSW50ZXJmYWNlKTogc3RyaW5nIHtcblx0Y29uc3QgcHJvcGVydHlQYXRoID0gZ2V0UHJvcGVydHlPYmplY3RQYXRoKG9Db250ZXh0LCBvSW50ZXJmYWNlKTtcblx0cmV0dXJuIGdldFRhcmdldE9iamVjdFBhdGgocHJvcGVydHlQYXRoLCB0cnVlKTtcbn07XG4iXX0=