/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/common/AnnotationConverter","../helpers/StableIdHelper"],function(A,S){"use strict";var _={};var g=S.generate;function c(o,a){var b=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!b){if(Array.isArray(o)||(b=j(o))||a&&o&&typeof o.length==="number"){if(b)o=b;var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function(e){throw e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var n=true,P=false,Q;return{s:function(){b=b.call(o);},n:function(){var e=b.next();n=e.done;return e;},e:function(e){P=true;Q=e;},f:function(){try{if(!n&&b.return!=null)b.return();}finally{if(P)throw Q;}}};}function d(o,a,b){if(a in o){Object.defineProperty(o,a,{value:b,enumerable:true,configurable:true,writable:true});}else{o[a]=b;}return o;}function f(a,i){return m(a)||l(a,i)||j(a,i)||h();}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function j(o,a){if(!o)return;if(typeof o==="string")return k(o,a);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(o,a);}function k(a,b){if(b==null||b>a.length)b=a.length;for(var i=0,e=new Array(b);i<b;i++){e[i]=a[i];}return e;}function l(a,i){var b=a==null?null:typeof Symbol!=="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(b==null)return;var e=[];var n=true;var o=false;var F,P;try{for(b=b.call(a);!(n=(F=b.next()).done);n=true){e.push(F.value);if(i&&e.length===i)break;}}catch(Q){o=true;P=Q;}finally{try{if(!n&&b["return"]!=null)b["return"]();}finally{if(o)throw P;}}return e;}function m(a){if(Array.isArray(a))return a;}var V={"Org.OData.Capabilities.V1":"Capabilities","Org.OData.Core.V1":"Core","Org.OData.Measures.V1":"Measures","com.sap.vocabularies.Common.v1":"Common","com.sap.vocabularies.UI.v1":"UI","com.sap.vocabularies.Session.v1":"Session","com.sap.vocabularies.Analytics.v1":"Analytics","com.sap.vocabularies.PersonalData.v1":"PersonalData","com.sap.vocabularies.Communication.v1":"Communication"};var D={Chart:true,MicroChart:true,UShell:true,IntentBasedNavigation:true};_.DefaultEnvironmentCapabilities=D;function p(a,b,e,i,o){var n;var F=e+"/"+b;var P=typeof a;if(a===null){n={type:"Null",Null:null};}else if(P==="string"){n={type:"String",String:a};}else if(P==="boolean"){n={type:"Bool",Bool:a};}else if(P==="number"){n={type:"Int",Int:a};}else if(Array.isArray(a)){n={type:"Collection",Collection:a.map(function(Q,R){return r(Q,F+"/"+R,i,o);})};if(a.length>0){if(a[0].hasOwnProperty("$PropertyPath")){n.Collection.type="PropertyPath";}else if(a[0].hasOwnProperty("$Path")){n.Collection.type="Path";}else if(a[0].hasOwnProperty("$NavigationPropertyPath")){n.Collection.type="NavigationPropertyPath";}else if(a[0].hasOwnProperty("$AnnotationPath")){n.Collection.type="AnnotationPath";}else if(a[0].hasOwnProperty("$Type")){n.Collection.type="Record";}else if(a[0].hasOwnProperty("$If")){n.Collection.type="If";}else if(a[0].hasOwnProperty("$Or")){n.Collection.type="Or";}else if(a[0].hasOwnProperty("$And")){n.Collection.type="And";}else if(a[0].hasOwnProperty("$Eq")){n.Collection.type="Eq";}else if(a[0].hasOwnProperty("$Ne")){n.Collection.type="Ne";}else if(a[0].hasOwnProperty("$Not")){n.Collection.type="Not";}else if(a[0].hasOwnProperty("$Gt")){n.Collection.type="Gt";}else if(a[0].hasOwnProperty("$Ge")){n.Collection.type="Ge";}else if(a[0].hasOwnProperty("$Lt")){n.Collection.type="Lt";}else if(a[0].hasOwnProperty("$Le")){n.Collection.type="Le";}else if(a[0].hasOwnProperty("$Apply")){n.Collection.type="Apply";}else if(typeof a[0]==="object"){n.Collection.type="Record";}else{n.Collection.type="String";}}}else if(a.$Path!==undefined){n={type:"Path",Path:a.$Path};}else if(a.$Decimal!==undefined){n={type:"Decimal",Decimal:parseFloat(a.$Decimal)};}else if(a.$PropertyPath!==undefined){n={type:"PropertyPath",PropertyPath:a.$PropertyPath};}else if(a.$NavigationPropertyPath!==undefined){n={type:"NavigationPropertyPath",NavigationPropertyPath:a.$NavigationPropertyPath};}else if(a.$If!==undefined){n={type:"If",If:a.$If};}else if(a.$And!==undefined){n={type:"And",And:a.$And};}else if(a.$Or!==undefined){n={type:"Or",Or:a.$Or};}else if(a.$Not!==undefined){n={type:"Not",Not:a.$Not};}else if(a.$Eq!==undefined){n={type:"Eq",Eq:a.$Eq};}else if(a.$Ne!==undefined){n={type:"Ne",Ne:a.$Ne};}else if(a.$Gt!==undefined){n={type:"Gt",Gt:a.$Gt};}else if(a.$Ge!==undefined){n={type:"Ge",Ge:a.$Ge};}else if(a.$Lt!==undefined){n={type:"Lt",Lt:a.$Lt};}else if(a.$Le!==undefined){n={type:"Le",Le:a.$Le};}else if(a.$Apply!==undefined){n={type:"Apply",Apply:a.$Apply,Function:a.$Function};}else if(a.$AnnotationPath!==undefined){n={type:"AnnotationPath",AnnotationPath:a.$AnnotationPath};}else if(a.$EnumMember!==undefined){n={type:"EnumMember",EnumMember:q(a.$EnumMember.split("/")[0])+"/"+a.$EnumMember.split("/")[1]};}else if(a.$Type){n={type:"Record",Record:r(a,e,i,o)};}else{n={type:"Record",Record:r(a,e,i,o)};}return{name:b,value:n};}function q(a){var b=a.split("@"),e=f(b,2),i=e[0],n=e[1];if(!n){n=i;i="";}else{i+="@";}var o=n.lastIndexOf(".");return i+V[n.substr(0,o)]+"."+n.substr(o+1);}function r(a,b,e,o){var i={};var n=typeof a;if(a===null){i={type:"Null",Null:null};}else if(n==="string"){i={type:"String",String:a};}else if(n==="boolean"){i={type:"Bool",Bool:a};}else if(n==="number"){i={type:"Int",Int:a};}else if(a.$AnnotationPath!==undefined){i={type:"AnnotationPath",AnnotationPath:a.$AnnotationPath};}else if(a.$Path!==undefined){i={type:"Path",Path:a.$Path};}else if(a.$Decimal!==undefined){i={type:"Decimal",Decimal:parseFloat(a.$Decimal)};}else if(a.$PropertyPath!==undefined){i={type:"PropertyPath",PropertyPath:a.$PropertyPath};}else if(a.$If!==undefined){i={type:"If",If:a.$If};}else if(a.$And!==undefined){i={type:"And",And:a.$And};}else if(a.$Or!==undefined){i={type:"Or",Or:a.$Or};}else if(a.$Not!==undefined){i={type:"Not",Not:a.$Not};}else if(a.$Eq!==undefined){i={type:"Eq",Eq:a.$Eq};}else if(a.$Ne!==undefined){i={type:"Ne",Ne:a.$Ne};}else if(a.$Gt!==undefined){i={type:"Gt",Gt:a.$Gt};}else if(a.$Ge!==undefined){i={type:"Ge",Ge:a.$Ge};}else if(a.$Lt!==undefined){i={type:"Lt",Lt:a.$Lt};}else if(a.$Le!==undefined){i={type:"Le",Le:a.$Le};}else if(a.$Apply!==undefined){i={type:"Apply",Apply:a.$Apply,Function:a.$Function};}else if(a.$NavigationPropertyPath!==undefined){i={type:"NavigationPropertyPath",NavigationPropertyPath:a.$NavigationPropertyPath};}else if(a.$EnumMember!==undefined){i={type:"EnumMember",EnumMember:q(a.$EnumMember.split("/")[0])+"/"+a.$EnumMember.split("/")[1]};}else if(Array.isArray(a)){var F=i;F.collection=a.map(function(R,T){return r(R,b+"/"+T,e,o);});if(a.length>0){if(a[0].hasOwnProperty("$PropertyPath")){F.collection.type="PropertyPath";}else if(a[0].hasOwnProperty("$Path")){F.collection.type="Path";}else if(a[0].hasOwnProperty("$NavigationPropertyPath")){F.collection.type="NavigationPropertyPath";}else if(a[0].hasOwnProperty("$AnnotationPath")){F.collection.type="AnnotationPath";}else if(a[0].hasOwnProperty("$Type")){F.collection.type="Record";}else if(a[0].hasOwnProperty("$If")){F.collection.type="If";}else if(a[0].hasOwnProperty("$And")){F.collection.type="And";}else if(a[0].hasOwnProperty("$Or")){F.collection.type="Or";}else if(a[0].hasOwnProperty("$Eq")){F.collection.type="Eq";}else if(a[0].hasOwnProperty("$Ne")){F.collection.type="Ne";}else if(a[0].hasOwnProperty("$Not")){F.collection.type="Not";}else if(a[0].hasOwnProperty("$Gt")){F.collection.type="Gt";}else if(a[0].hasOwnProperty("$Ge")){F.collection.type="Ge";}else if(a[0].hasOwnProperty("$Lt")){F.collection.type="Lt";}else if(a[0].hasOwnProperty("$Le")){F.collection.type="Le";}else if(a[0].hasOwnProperty("$Apply")){F.collection.type="Apply";}else if(typeof a[0]==="object"){F.collection.type="Record";}else{F.collection.type="String";}}}else{if(a.$Type){var P=a.$Type;i.type=P;}var Q=[];Object.keys(a).forEach(function(R){if(R!=="$Type"&&R!=="$If"&&R!=="$Apply"&&R!=="$And"&&R!=="$Or"&&R!=="$Ne"&&R!=="$Gt"&&R!=="$Ge"&&R!=="$Lt"&&R!=="$Le"&&R!=="$Not"&&R!=="$Eq"&&!R.startsWith("@")){Q.push(p(a[R],R,b,e,o));}else if(R.startsWith("@")){w(d({},R,a[R]),b,e,o);}});i.propertyValues=Q;}return i;}function s(a,b){if(!b.hasOwnProperty(a)){b[a]={target:a,annotations:[]};}return b[a];}function t(a){return a.filter(function(R){if(R.Target&&R.Target.$AnnotationPath){return R.Target.$AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.Chart")===-1;}else{return true;}});}function u(a){return a.filter(function(R){return R.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";});}function v(a){return a.filter(function(R){return R.$AnnotationPath!=="@com.sap.vocabularies.UI.v1.Chart";});}function w(a,b,e,o){if(Object.keys(a).length===0){return;}var i=s(b,e);if(!o.MicroChart){delete a["@com.sap.vocabularies.UI.v1.Chart"];}var n=function(P){var Q=a[P];switch(P){case"@com.sap.vocabularies.UI.v1.HeaderFacets":if(!o.MicroChart){Q=t(Q);a[P]=Q;}break;case"@com.sap.vocabularies.UI.v1.Identification":if(!o.IntentBasedNavigation){Q=u(Q);a[P]=Q;}break;case"@com.sap.vocabularies.UI.v1.LineItem":if(!o.IntentBasedNavigation){Q=u(Q);a[P]=Q;}if(!o.MicroChart){Q=t(Q);a[P]=Q;}break;case"@com.sap.vocabularies.UI.v1.FieldGroup":if(!o.IntentBasedNavigation){Q.Data=u(Q.Data);a[P]=Q;}if(!o.MicroChart){Q.Data=t(Q.Data);a[P]=Q;}break;case"@com.sap.vocabularies.UI.v1.PresentationVariant":if(!o.Chart&&Q.Visualizations){Q.Visualizations=v(Q.Visualizations);a[P]=Q;}break;default:break;}var R=i;var T=P.split("@");if(T.length>2){R=s(b+"@"+T[1],e);P=T[2];}else{P=T[1];}var U=P.split("#");var W=U[1];P=U[0];var X={term:"".concat(P),qualifier:W};var Y=b+"@"+X.term;if(W){Y+="#"+W;}var Z=false;var $=typeof Q;if(Q===null){X.value={type:"Bool",Bool:Q};}else if($==="string"){X.value={type:"String",String:Q};}else if($==="boolean"){X.value={type:"Bool",Bool:Q};}else if($==="number"){X.value={type:"Int",Int:Q};}else if(Q.$If!==undefined){X.value={type:"If",If:Q.$If};}else if(Q.$And!==undefined){X.value={type:"And",And:Q.$And};}else if(Q.$Or!==undefined){X.value={type:"Or",Or:Q.$Or};}else if(Q.$Not!==undefined){X.value={type:"Not",Not:Q.$Not};}else if(Q.$Eq!==undefined){X.value={type:"Eq",Eq:Q.$Eq};}else if(Q.$Ne!==undefined){X.value={type:"Ne",Ne:Q.$Ne};}else if(Q.$Gt!==undefined){X.value={type:"Gt",Gt:Q.$Gt};}else if(Q.$Ge!==undefined){X.value={type:"Ge",Ge:Q.$Ge};}else if(Q.$Lt!==undefined){X.value={type:"Lt",Lt:Q.$Lt};}else if(Q.$Le!==undefined){X.value={type:"Le",Le:Q.$Le};}else if(Q.$Apply!==undefined){X.value={type:"Apply",Apply:Q.$Apply,Function:Q.$Function};}else if(Q.$Path!==undefined){X.value={type:"Path",Path:Q.$Path};}else if(Q.$AnnotationPath!==undefined){X.value={type:"AnnotationPath",AnnotationPath:Q.$AnnotationPath};}else if(Q.$Decimal!==undefined){X.value={type:"Decimal",Decimal:parseFloat(Q.$Decimal)};}else if(Q.$EnumMember!==undefined){X.value={type:"EnumMember",EnumMember:q(Q.$EnumMember.split("/")[0])+"/"+Q.$EnumMember.split("/")[1]};}else if(Array.isArray(Q)){Z=true;X.collection=Q.map(function(e1,f1){return r(e1,Y+"/"+f1,e,o);});if(Q.length>0){if(Q[0].hasOwnProperty("$PropertyPath")){X.collection.type="PropertyPath";}else if(Q[0].hasOwnProperty("$Path")){X.collection.type="Path";}else if(Q[0].hasOwnProperty("$NavigationPropertyPath")){X.collection.type="NavigationPropertyPath";}else if(Q[0].hasOwnProperty("$AnnotationPath")){X.collection.type="AnnotationPath";}else if(Q[0].hasOwnProperty("$Type")){X.collection.type="Record";}else if(Q[0].hasOwnProperty("$If")){X.collection.type="If";}else if(Q[0].hasOwnProperty("$Or")){X.collection.type="Or";}else if(Q[0].hasOwnProperty("$Eq")){X.collection.type="Eq";}else if(Q[0].hasOwnProperty("$Ne")){X.collection.type="Ne";}else if(Q[0].hasOwnProperty("$Not")){X.collection.type="Not";}else if(Q[0].hasOwnProperty("$Gt")){X.collection.type="Gt";}else if(Q[0].hasOwnProperty("$Ge")){X.collection.type="Ge";}else if(Q[0].hasOwnProperty("$Lt")){X.collection.type="Lt";}else if(Q[0].hasOwnProperty("$Le")){X.collection.type="Le";}else if(Q[0].hasOwnProperty("$And")){X.collection.type="And";}else if(Q[0].hasOwnProperty("$Apply")){X.collection.type="Apply";}else if(typeof Q[0]==="object"){X.collection.type="Record";}else{X.collection.type="String";}}}else{var a1={propertyValues:[]};if(Q.$Type){var b1=Q.$Type;a1.type="".concat(b1);}var c1=[];for(var d1 in Q){if(d1!=="$Type"&&!d1.startsWith("@")){c1.push(p(Q[d1],d1,Y,e,o));}else if(d1.startsWith("@")){w(d({},d1,Q[d1]),Y,e,o);}}a1.propertyValues=c1;X.record=a1;}X.isCollection=Z;R.annotations.push(X);F=P;};for(var F in a){n(F);}}function x(a,e,b){var i={_type:"Property",name:b,fullyQualifiedName:"".concat(e.fullyQualifiedName,"/").concat(b),type:a.$Type,maxLength:a.$MaxLength,precision:a.$Precision,scale:a.$Scale,nullable:a.$Nullable};return i;}function y(n,e,a){var b=[];if(n.$ReferentialConstraint){b=Object.keys(n.$ReferentialConstraint).map(function(o){return{sourceTypeName:e.name,sourceProperty:o,targetTypeName:n.$Type,targetProperty:n.$ReferentialConstraint[o]};});}var i={_type:"NavigationProperty",name:a,fullyQualifiedName:"".concat(e.fullyQualifiedName,"/").concat(a),partner:n.$Partner,isCollection:n.$isCollection?n.$isCollection:false,containsTarget:n.$ContainsTarget,targetTypeName:n.$Type,referentialConstraint:b};return i;}function z(e,a,b){var i={_type:"EntitySet",name:a,navigationPropertyBinding:{},entityTypeName:e.$Type,fullyQualifiedName:"".concat(b,"/").concat(a)};return i;}function B(a,b,e){var i={_type:"Singleton",name:b,navigationPropertyBinding:{},typeName:a.$Type,fullyQualifiedName:"".concat(e,"/").concat(b),nullable:true};return i;}function C(e,i,n){var o={_type:"ComplexType",name:i.replace(n+".",""),fullyQualifiedName:i,properties:[],navigationProperties:[]};var F=Object.keys(e).filter(function(a){if(a!="$Key"&&a!="$kind"){return e[a].$kind==="Property";}}).sort(function(a,b){return a>b?1:-1;}).map(function(a){return x(e[a],o,a);});o.properties=F;var P=Object.keys(e).filter(function(a){if(a!="$Key"&&a!="$kind"){return e[a].$kind==="NavigationProperty";}}).sort(function(a,b){return a>b?1:-1;}).map(function(a){return y(e[a],o,a);});o.navigationProperties=P;return o;}function E(e,o){if(!e.$Key&&e.$BaseType){return E(o["".concat(e.$BaseType)],o);}return e.$Key||[];}function G(e,a,n,b){var i=E(e,b);var o={_type:"EntityType",name:a.replace(n+".",""),fullyQualifiedName:a,keys:[],entityProperties:[],navigationProperties:[]};var F=Object.keys(e).filter(function(Q){if(Q!="$Key"&&Q!="$kind"){return e[Q].$kind==="Property";}}).map(function(Q){return x(e[Q],o,Q);});var P=Object.keys(e).filter(function(Q){if(Q!="$Key"&&Q!="$kind"){return e[Q].$kind==="NavigationProperty";}}).map(function(Q){return y(e[Q],o,Q);});o.keys=i.map(function(Q){return F.find(function(R){return R.name===Q;});}).filter(function(Q){return Q!==undefined;});o.entityProperties=F;o.navigationProperties=P;return o;}function H(a,b,n,e){var i="";var o="".concat(a);var F=a.substr(n.length+1);if(b.$IsBound){var P=b.$Parameter[0];i=P.$Type;if(P.$isCollection===true){o="".concat(a,"(Collection(").concat(i,"))");}else{o="".concat(a,"(").concat(i,")");}}else{o="".concat(e,"/").concat(F);}var Q=b.$Parameter||[];return{_type:"Action",name:F,fullyQualifiedName:o,isBound:b.$IsBound,sourceType:i,returnType:b.$ReturnType?b.$ReturnType.$Type:"",parameters:Q.map(function(R){return{_type:"ActionParameter",isEntitySet:R.$Type===b.$EntitySetPath,fullyQualifiedName:"".concat(o,"/").concat(R.$Name),type:R.$Type};})};}function I(o){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:D;var i=o.getObject("/$");var n={};var F=[];var P=[];var Q=[];var R=[];var T=i.$EntityContainer;var U="";var W=Object.keys(i).filter(function(a){return i[a].$kind==="Schema";});if(W&&W.length>0){U=W[0].substr(0,W[0].length-1);}else if(F&&F.length){U=F[0].fullyQualifiedName.replace(F[0].name,"");U=U.substr(0,U.length-1);}Object.keys(i).forEach(function(a){if(a!=="$kind"){switch(i[a].$kind){case"EntityType":var b=G(i[a],a,U,i);if(i.$Annotations[b.fullyQualifiedName]&&i.$Annotations[b.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.FilterFacets"]){i.$Annotations[b.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.FilterFacets"].forEach(function(d1){d1.ID=d1.ID||g([{Facet:d1}]);});}b.entityProperties.forEach(function(d1){if(!i.$Annotations[d1.fullyQualifiedName]){i.$Annotations[d1.fullyQualifiedName]={};}if(!i.$Annotations[d1.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]){i.$Annotations[d1.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]={$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{$Path:d1.name}};}});F.push(b);break;case"ComplexType":var c1=C(i[a],a,U);R.push(c1);break;}}});var X=i[T];Object.keys(X).forEach(function(a){if(a!=="$kind"){switch(X[a].$kind){case"EntitySet":var b=z(X[a],a,T);P.push(b);break;case"Singleton":var c1=B(X[a],a,T);Q.push(c1);break;}}});var Y={};if(T){Y={name:T.replace(U+".",""),fullyQualifiedName:T};}P.forEach(function(a){var b=X[a.name].$NavigationPropertyBinding;if(b){Object.keys(b).forEach(function(c1){var d1=P.find(function(e1){return e1.name===b[c1];});if(d1){a.navigationPropertyBinding[c1]=d1;}});}});var Z=Object.keys(i).filter(function(a){return Array.isArray(i[a])&&i[a].length>0&&i[a][0].$kind==="Action";}).reduce(function(a,b){var Z=i[b];Z.forEach(function(c1){a.push(H(b,c1,U,T));});return a;},[]);for(var $ in i.$Annotations){w(i.$Annotations[$],$,n,e);}var a1=Object.keys(n).sort(function(a,b){return a.length>=b.length?1:-1;}).map(function(a){return n[a];});var b1=[];return{identification:"metamodelResult",version:"4.0",schema:{entityContainer:Y,entitySets:P,entityTypes:F,complexTypes:R,singletons:Q,associations:[],actions:Z,namespace:U,annotations:{"metamodelResult":a1}},references:b1};}_.prepareEntityTypes=I;var M={};function J(o,a){var b=o.id;if(!M.hasOwnProperty(b)){var e=I(o,a);M[b]=A.convertTypes(e);}return M[b];}_.convertTypes=J;function K(o){delete M[o.id];}_.deleteModelCacheData=K;function L(o){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var a=J(o.getModel());var P=o.getPath();var b=P.split("/");var e=a.entitySets.find(function(j1){return j1.name===b[1];});var n=b.slice(2).join("/");var F=[e];while(n&&n.length>0&&n.startsWith("$NavigationPropertyBinding")){var Q;var R=n.split("/");var T=0;var U=void 0,W=void 0;R=R.slice(1);while(!U&&R.length>T&&R[T]!=="$NavigationPropertyBinding"){W=R.slice(0,T+1).join("/");U=e&&e.navigationPropertyBinding[W];T++;}if(!U){W=R[0];}var X=((Q=W)===null||Q===void 0?void 0:Q.split("/"))||[];var Y=e&&e.entityType;var Z=c(X),$;try{var a1=function(){var j1=$.value;var k1=Y&&Y.navigationProperties.find(function(l1){return l1.name===j1;});if(k1){F.push(k1);Y=k1.targetType;}else{return"break";}};for(Z.s();!($=Z.n()).done;){var b1=a1();if(b1==="break")break;}}catch(c1){Z.e(c1);}finally{Z.f();}e=e&&U||e&&e.navigationPropertyBinding[R[0]];if(e){F.push(e);}n=R.slice(X.length||1).join("/");}if(n.startsWith("$Type")){n=b.slice(3).join("/");}if(e&&n.length){var d1=e.entityType.resolvePath(n,i);if(d1){if(i){d1.visitedObjects=F.concat(d1.visitedObjects);}}else if(e.entityType&&e.entityType.actions){var e1=e.entityType&&e.entityType.actions;var f1=n.split("/");if(e1[f1[0]]){var g1=e1[f1[0]];if(f1[1]&&g1.parameters){var h1=f1[1];var i1=g1.parameters.find(function(j1){return j1.fullyQualifiedName.endsWith("/"+h1);});return i1;}else if(n.length===1){return g1;}}}return d1;}else{if(i){return{target:e,visitedObjects:F};}return e;}}_.convertMetaModelContext=L;function N(o,e){var a=L(o,true);var b;if(e&&e.getPath()!=="/"){b=N(e);}return O(a,b);}_.getInvolvedDataModelObjects=N;function O(a,b){var e=a.visitedObjects.filter(function(X){return X&&X.hasOwnProperty("_type")&&X._type!=="EntityType";});if(a.target&&a.target.hasOwnProperty("_type")&&a.target._type!=="EntityType"){e.push(a.target);}var n=[];var o=e[0];var F=o;var P=o.entityType;var i=1;var Q;var R=[];while(i<e.length){Q=e[i++];if(Q._type==="NavigationProperty"){R.push(Q.name);n.push(Q);P=Q.targetType;if(F&&F.navigationPropertyBinding.hasOwnProperty(R.join("/"))){F=F.navigationPropertyBinding[Q.name];R=[];}else{F=undefined;}}if(Q._type==="EntitySet"){F=Q;P=F.entityType;}}if(b&&b.startingEntitySet!==o){var T=e.indexOf(b.startingEntitySet);if(T!==-1){var U=e.slice(0,T);b.startingEntitySet=o;b.navigationProperties=U.filter(function(X){return X._type==="NavigationProperty";}).concat(b.navigationProperties);}}var W={startingEntitySet:o,targetEntitySet:F,targetEntityType:P,targetObject:a.target,navigationProperties:n,contextLocation:b};if(!W.contextLocation){W.contextLocation=W;}return W;}_.getInvolvedDataModelObjectFromPath=O;return _;},false);
