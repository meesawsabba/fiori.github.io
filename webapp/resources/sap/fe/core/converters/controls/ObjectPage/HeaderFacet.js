/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/helpers/BindingExpression","sap/fe/core/converters/helpers/Key","../Common/Form","sap/fe/core/converters/annotations/DataField","../../../helpers/StableIdHelper"],function(C,I,B,K,F,D,S){"use strict";var _={};var g=S.generate;var a=D.getSemanticObjectPath;var b=F.getFormElementsFromManifest;var c=F.FormElementType;var d=K.KeyHelper;var n=B.not;var e=B.equal;var f=B.compileBinding;var h=B.annotationExpression;var H=I.HeaderFacetID;var j=I.HeaderFacetFormID;var k=I.HeaderFacetContainerID;var l=I.CustomHeaderFacetID;var P=C.Placement;var m=C.insertCustomElements;function o(i,Q){var R=Object.keys(i);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(i);if(Q){U=U.filter(function(V){return Object.getOwnPropertyDescriptor(i,V).enumerable;});}R.push.apply(R,U);}return R;}function p(Q){for(var i=1;i<arguments.length;i++){var R=arguments[i]!=null?arguments[i]:{};if(i%2){o(Object(R),true).forEach(function(U){q(Q,U,R[U]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(Q,Object.getOwnPropertyDescriptors(R));}else{o(Object(R)).forEach(function(U){Object.defineProperty(Q,U,Object.getOwnPropertyDescriptor(R,U));});}}return Q;}function q(i,Q,R){if(Q in i){Object.defineProperty(i,Q,{value:R,enumerable:true,configurable:true,writable:true});}else{i[Q]=R;}return i;}var r;(function(r){r["Annotation"]="Annotation";r["XMLFragment"]="XMLFragment";})(r||(r={}));_.HeaderFacetType=r;var s;(function(s){s["Reference"]="Reference";s["Collection"]="Collection";})(s||(s={}));_.FacetType=s;var t;(function(t){t["Default"]="Default";t["NotAdaptable"]="not-adaptable";t["NotAdaptableTree"]="not-adaptable-tree";t["NotAdaptableVisibility"]="not-adaptable-visibility";})(t||(t={}));_.FlexDesignTimeType=t;var u;(function(u){u["ProgressIndicator"]="ProgressIndicator";u["RatingIndicator"]="RatingIndicator";u["Content"]="Content";})(u||(u={}));var T;(function(T){T["None"]="None";T["DataPoint"]="DataPoint";T["Chart"]="Chart";T["Identification"]="Identification";T["Contact"]="Contact";T["Address"]="Address";T["FieldGroup"]="FieldGroup";})(T||(T={}));function v(i){var Q,R,U;var V=[];(Q=i.getEntityType().annotations)===null||Q===void 0?void 0:(R=Q.UI)===null||R===void 0?void 0:(U=R.HeaderFacets)===null||U===void 0?void 0:U.forEach(function(W){var X=M(W,i);if(X){V.push(X);}});return V;}_.getHeaderFacetsFromAnnotations=v;function w(i){var Q={};Object.keys(i).forEach(function(R){var U=i[R];Q[R]=O(U,R);});return Q;}_.getHeaderFacetsFromManifest=w;function x(i,Q,R){var U;if(i.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&Q.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){return false;}var V=g([{Facet:i}]);var W=R.getManifestWrapper().getHeaderFacets();var X=(U=W[V])===null||U===void 0?void 0:U.stashed;return X===true;}_.getStashedSettingsForHeaderFacet=x;function y(i,Q,R){var U=t.Default;var V=g([{Facet:i}]);if(i.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&Q.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){U=t.NotAdaptableTree;}else{var W=R.getManifestWrapper().getHeaderFacets();if(V){var X,Y;var Z=(X=W[V])===null||X===void 0?void 0:(Y=X.flexSettings)===null||Y===void 0?void 0:Y.designtime;switch(Z){case t.NotAdaptable:case t.NotAdaptableTree:case t.NotAdaptableVisibility:U=Z;}}}return U;}_.getDesignTimeMetadataSettingsForHeaderFacet=y;function z(i,Q,R){var U,V,W;if(i.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"&&!(((U=i.annotations)===null||U===void 0?void 0:(V=U.UI)===null||V===void 0?void 0:(W=V.Hidden)===null||W===void 0?void 0:W.valueOf())===true)){var X,Y;var Z=H({Facet:i}),$=function(i,f1){var g1,h1;return((g1=i.ID)===null||g1===void 0?void 0:g1.toString())||((h1=i.Label)===null||h1===void 0?void 0:h1.toString())||f1;},a1=i.Target.value,b1=E(i);var c1;var d1;switch(b1){case T.FieldGroup:c1=G(i,R);break;case T.DataPoint:d1=L(i);break;}var e1=i.annotations;return{type:r.Annotation,facetType:s.Reference,id:Z,containerId:k({Facet:i}),key:$(i,Z),flexSettings:{designtime:y(i,Q,R)},stashed:x(i,Q,R),visible:f(n(e(h(e1===null||e1===void 0?void 0:(X=e1.UI)===null||X===void 0?void 0:(Y=X.Hidden)===null||Y===void 0?void 0:Y.valueOf()),true))),annotationPath:R.getEntitySetBasedAnnotationPath(i.fullyQualifiedName)+"/",targetAnnotationValue:a1,targetAnnotationType:b1,headerFormData:c1,headerDataPointData:d1};}return undefined;}function A(i,Q){if(i.$Type==="com.sap.vocabularies.UI.v1.CollectionFacet"){var R,U,V;var W=[],X=H({Facet:i}),Y=function(Z,$){var a1,b1;return((a1=Z.ID)===null||a1===void 0?void 0:a1.toString())||((b1=Z.Label)===null||b1===void 0?void 0:b1.toString())||$;};i.Facets.forEach(function(Z){var $=z(Z,i,Q);if($){W.push($);}});return{type:r.Annotation,facetType:s.Collection,id:X,containerId:k({Facet:i}),key:Y(i,X),flexSettings:{designtime:y(i,i,Q)},stashed:x(i,i,Q),visible:f(n(e(h((R=i.annotations)===null||R===void 0?void 0:(U=R.UI)===null||U===void 0?void 0:(V=U.Hidden)===null||V===void 0?void 0:V.valueOf()),true))),annotationPath:Q.getEntitySetBasedAnnotationPath(i.fullyQualifiedName)+"/",facets:W};}return undefined;}function E(i){var Q=T.None;var R={"com.sap.vocabularies.UI.v1.DataPoint":T.DataPoint,"com.sap.vocabularies.UI.v1.Chart":T.Chart,"com.sap.vocabularies.UI.v1.Identification":T.Identification,"com.sap.vocabularies.Communication.v1.Contact":T.Contact,"com.sap.vocabularies.Communication.v1.Address":T.Address,"com.sap.vocabularies.UI.v1.FieldGroup":T.FieldGroup};if(i.$Type!=="com.sap.vocabularies.UI.v1.ReferenceURLFacet"&&i.$Type!=="com.sap.vocabularies.UI.v1.CollectionFacet"){var U,V;Q=R[(U=i.Target)===null||U===void 0?void 0:(V=U.$target)===null||V===void 0?void 0:V.term]||T.None;}return Q;}function G(i,Q){var R;if(!i){throw new Error("Cannot get FieldGroup form data without facet definition");}var U=m(J(i,Q),b(i,Q));return{id:j({Facet:i}),label:(R=i.Label)===null||R===void 0?void 0:R.toString(),formElements:U};}function J(i,Q){var R=[];if(i.$Type!=="com.sap.vocabularies.UI.v1.ReferenceURLFacet"&&i.$Type!=="com.sap.vocabularies.UI.v1.CollectionFacet"){var U,V;(U=i.Target)===null||U===void 0?void 0:(V=U.$target)===null||V===void 0?void 0:V.Data.forEach(function(W){var X,Y,Z;if(!(((X=W.annotations)===null||X===void 0?void 0:(Y=X.UI)===null||Y===void 0?void 0:(Z=Y.Hidden)===null||Z===void 0?void 0:Z.valueOf())===true)){var $=a(Q,W);if(W.$Type==="com.sap.vocabularies.UI.v1.DataField"||W.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"||W.$Type==="com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath"){var a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1;var l1=W.annotations;R.push({isValueMultilineText:((a1=W.Value)===null||a1===void 0?void 0:(b1=a1.$target)===null||b1===void 0?void 0:(c1=b1.annotations)===null||c1===void 0?void 0:(d1=c1.UI)===null||d1===void 0?void 0:(e1=d1.MultiLineText)===null||e1===void 0?void 0:e1.valueOf())===true,type:c.Annotation,key:d.generateKeyFromDataField(W),visible:f(n(e(h(l1===null||l1===void 0?void 0:(f1=l1.UI)===null||f1===void 0?void 0:(g1=f1.Hidden)===null||g1===void 0?void 0:g1.valueOf()),true))),label:((h1=W.Value)===null||h1===void 0?void 0:(i1=h1.$target)===null||i1===void 0?void 0:(j1=i1.annotations)===null||j1===void 0?void 0:(k1=j1.Common)===null||k1===void 0?void 0:k1.Label)||W.Label,idPrefix:j({Facet:i},W),annotationPath:Q.getEntitySetBasedAnnotationPath(W.fullyQualifiedName)+"/",semanticObjectPath:$});}else if(W.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){var m1,n1,o1,p1,q1,r1,s1,t1,u1,v1,w1,x1,y1;var z1=W.annotations;R.push({isValueMultilineText:((m1=W.Target)===null||m1===void 0?void 0:(n1=m1.$target)===null||n1===void 0?void 0:(o1=n1.annotations)===null||o1===void 0?void 0:(p1=o1.UI)===null||p1===void 0?void 0:(q1=p1.MultiLineText)===null||q1===void 0?void 0:q1.valueOf())===true,type:c.Annotation,key:d.generateKeyFromDataField(W),visible:f(n(e(h(z1===null||z1===void 0?void 0:(r1=z1.UI)===null||r1===void 0?void 0:(s1=r1.Hidden)===null||s1===void 0?void 0:s1.valueOf()),true))),label:((t1=W.Target)===null||t1===void 0?void 0:(u1=t1.$target)===null||u1===void 0?void 0:(v1=u1.annotations)===null||v1===void 0?void 0:(w1=v1.Common)===null||w1===void 0?void 0:(x1=w1.Label)===null||x1===void 0?void 0:x1.toString())||((y1=W.Label)===null||y1===void 0?void 0:y1.toString()),idPrefix:j({Facet:i},W),annotationPath:Q.getEntitySetBasedAnnotationPath(W.fullyQualifiedName)+"/",semanticObjectPath:$});}}});}return R;}function L(i){var Q=u.Content;if(i.$Type==="com.sap.vocabularies.UI.v1.ReferenceFacet"){var R,U,V,W;if(((R=i.Target)===null||R===void 0?void 0:(U=R.$target)===null||U===void 0?void 0:U.Visualization)==="UI.VisualizationType/Progress"){Q=u.ProgressIndicator;}else if(((V=i.Target)===null||V===void 0?void 0:(W=V.$target)===null||W===void 0?void 0:W.Visualization)==="UI.VisualizationType/Rating"){Q=u.RatingIndicator;}}return{type:Q};}function M(i,Q){var R;switch(i.$Type){case"com.sap.vocabularies.UI.v1.ReferenceFacet":R=z(i,i,Q);break;case"com.sap.vocabularies.UI.v1.CollectionFacet":R=A(i,Q);break;}return R;}function N(i){if(!i){return undefined;}var Q=["Heroes","Decoration","Workers","LongRunners"].indexOf(i)!==-1?"$auto."+i:i;return"{ path : '', parameters : { $$groupId : '"+Q+"' } }";}function O(i,Q){var R=l(Q);var U=i.position;if(!U){U={placement:P.After};}return{facetType:s.Reference,facets:[],type:i.type,id:R,containerId:R,key:Q,position:U,visible:i.visible,fragmentName:i.template||i.name,title:i.title,subTitle:i.subTitle,stashed:i.stashed||false,flexSettings:p(p({},{designtime:t.Default}),i.flexSettings),binding:N(i.requestGroupId),templateEdit:i.templateEdit};}return _;},false);
