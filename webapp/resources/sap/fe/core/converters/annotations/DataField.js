/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/templating/UIFormatters","sap/fe/core/templating/PropertyHelper"],function(U,P){"use strict";var _={};var i=P.isProperty;var g=P.getAssociatedUnitProperty;var a=P.getAssociatedCurrencyProperty;var b=U.getDisplayMode;function c(n){return n.hasOwnProperty("Action");}_.isDataFieldForActionAbstract=c;function d(n){return n.hasOwnProperty("Value");}_.isDataFieldTypes=d;function e(n){var o,p,q,r,s,t,u;return((o=n.annotations)===null||o===void 0?void 0:(p=o.UI)===null||p===void 0?void 0:(q=p.Hidden)===null||q===void 0?void 0:q.valueOf())===true||d(n)&&((r=n.Value)===null||r===void 0?void 0:(s=r.$target)===null||s===void 0?void 0:(t=s.annotations)===null||t===void 0?void 0:(u=t.UI)===null||u===void 0?void 0:u.Hidden)===true;}_.isDataFieldAlwaysHidden=e;function f(n,o){if(typeof o==="object"){var p;if(d(o)&&(p=o.Value)!==null&&p!==void 0&&p.$target){var q,r,s;var t=(q=o.Value)===null||q===void 0?void 0:q.$target;if((t===null||t===void 0?void 0:(r=t.annotations)===null||r===void 0?void 0:(s=r.Common)===null||s===void 0?void 0:s.SemanticObject)!==undefined){return n.getEntitySetBasedAnnotationPath(t===null||t===void 0?void 0:t.fullyQualifiedName);}}else if(i(o)){var u,v;if((o===null||o===void 0?void 0:(u=o.annotations)===null||u===void 0?void 0:(v=u.Common)===null||v===void 0?void 0:v.SemanticObject)!==undefined){return n.getEntitySetBasedAnnotationPath(o===null||o===void 0?void 0:o.fullyQualifiedName);}}}return undefined;}_.getSemanticObjectPath=f;function h(p){return p.indexOf("/")>-1?p.substring(0,p.lastIndexOf("/")+1):"";}function j(t,n,o,r){if(o==="AnalyticalTable"){var p,q,s;var u=(p=t.annotations)===null||p===void 0?void 0:(q=p.UI)===null||q===void 0?void 0:q.Hidden;if(u!==null&&u!==void 0&&u.path&&((s=u.$target)===null||s===void 0?void 0:s._type)==="Property"){var v=n+u.path;r.additionalProperties[v]=u.$target;}}return r;}function k(p,n,o,q,t){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{}};function s($,a1){if(!r.properties.hasOwnProperty($)){r.properties[$]=a1;}return Object.keys(r.properties).indexOf($);}function u($){r.exportSettingsTemplate=r.exportSettingsTemplate?"".concat(r.exportSettingsTemplate).concat($):"".concat($);}if(p&&n){var v,w;var x=h(p);var y=(v=n.annotations)===null||v===void 0?void 0:(w=v.Common)===null||w===void 0?void 0:w.Text;var z;var A;var B;if(r.exportSettingsTemplate){u("\n");r.exportSettingsWrapping=true;}if(y!==null&&y!==void 0&&y.path&&y!==null&&y!==void 0&&y.$target){var C=o.getDataModelObjectPath();var D=x+y.path;var E=b(n,C);var F;switch(E){case"Value":z=s(p,n);u("{".concat(z,"}"));r.visualSettingsToBeExcluded=D;break;case"Description":s(p,n);F=s(D,y.$target);u("{".concat(F,"}"));r.visualSettingsToBeExcluded=p;break;case"ValueDescription":z=s(p,n);F=s(D,y.$target);u("{".concat(z,"} ({").concat(F,"})"));break;case"DescriptionValue":z=s(p,n);F=s(D,y.$target);u("{".concat(F,"} ({").concat(z,"})"));break;}}else{var G,H,I,J,K,L,M,N,O,Q,R,S,T;var V=a(n)||g(n);var W=(n===null||n===void 0?void 0:(G=n.annotations)===null||G===void 0?void 0:(H=G.Measures)===null||H===void 0?void 0:H.ISOCurrency)||(n===null||n===void 0?void 0:(I=n.annotations)===null||I===void 0?void 0:(J=I.Measures)===null||J===void 0?void 0:J.Unit);if(V&&W!==null&&W!==void 0&&W.$target){z=s(p,n);B=s(V.name,W.$target);u("{".concat(z,"}  {").concat(B,"}"));}else if((K=n.Target)!==null&&K!==void 0&&(L=K.$target)!==null&&L!==void 0&&L.Visualization){var X=n.Target.$target.Value.$target;z=s(p,X);s(n.Target.value,n.Target.$target);A=(n.Target.$target.TargetValue||n.Target.$target.MaximumValue).toString();u("{".concat(z,"}/").concat(A));}else if(((M=n.annotations)===null||M===void 0?void 0:(N=M.UI)===null||N===void 0?void 0:(O=N.DataFieldDefault)===null||O===void 0?void 0:(Q=O.Target)===null||Q===void 0?void 0:(R=Q.$target)===null||R===void 0?void 0:R.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var Y=n.annotations.UI.DataFieldDefault;z=s(p,n);s(Y.Target.value,n);A=(Y.Target.$target.TargetValue||Y.Target.$target.TargetValue.MaximumValue).toString();u("{".concat(z,"}/").concat(A));}else if(((S=n.Target)===null||S===void 0?void 0:(T=S.$target)===null||T===void 0?void 0:T.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){var Z;r.exportSettingsContactProperty=n.Target.value.substring(0,n.Target.value.indexOf("/")+1)+((Z=n.Target.$target.fn)===null||Z===void 0?void 0:Z.path);z=s(p,n.Target.$target.fn.$target);u("{".concat(z,"}"));}else if(!q){z=s(p,n);u("{".concat(z,"}"));}}r=j(n,x,t,r);if(Object.keys(r.additionalProperties).length>0&&Object.keys(r.properties).length===0){z=s(p,n);u("{".concat(z,"}"));}}return r;}_.collectRelatedProperties=k;function l(n,o,t){var p,q,r;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{}};if(n.$Type==="com.sap.vocabularies.UI.v1.DataField"&&n.Value){var u=n.Value;s=k(u.path,u.$target,o,false,t,s);var v=h(u.path);s=j(n,v,t,s);}else if(n.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){switch((p=n.Target)===null||p===void 0?void 0:(q=p.$target)===null||q===void 0?void 0:q.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":(r=n.Target.$target.Data)===null||r===void 0?void 0:r.forEach(function(w){s=l(w,o,t,s);});break;case"com.sap.vocabularies.UI.v1.DataPointType":s=k(n.Target.$target.Value.path,n,o,false,t,s);break;case"com.sap.vocabularies.Communication.v1.ContactType":s=k(n.Target.value,n,o,false,t,s);break;}}return s;}_.collectRelatedPropertiesRecursively=l;var m=function(D){var n,o,p;var s=D.$Type;switch(s){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":s=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":s=D===null||D===void 0?void 0:(n=D.Value)===null||n===void 0?void 0:(o=n.$target)===null||o===void 0?void 0:o.type;break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:var q=(p=D.Target)===null||p===void 0?void 0:p.$target.$Type;if(q){var r,t;if(((r=D.Target)===null||r===void 0?void 0:r.$target.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){var u,v,w;s=(u=((v=D.Target)===null||v===void 0?void 0:(w=v.$target)===null||w===void 0?void 0:w.fn).$target)===null||u===void 0?void 0:u.type;}else if(((t=D.Target)===null||t===void 0?void 0:t.$target.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var x,y,z,A,B,C,E;s=((x=D.Target)===null||x===void 0?void 0:(y=x.$target)===null||y===void 0?void 0:(z=y.Value)===null||z===void 0?void 0:(A=z.$Path)===null||A===void 0?void 0:A.$Type)||((B=D.Target)===null||B===void 0?void 0:(C=B.$target)===null||C===void 0?void 0:(E=C.Value)===null||E===void 0?void 0:E.$target.type);}else{s=undefined;}}else{s=undefined;}break;}return s;};_.getDataFieldDataType=m;return _;},false);
