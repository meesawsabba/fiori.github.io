/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/core/helpers/SemanticDateOperators","sap/ui/core/routing/HashChanger","sap/fe/core/CommonUtils","sap/base/Log"],function(S,H,C,L){"use strict";function g(o){var t=o.getView().getContent()[0].data().singleTableId;if(!t){t=o.getView().byId("fe::TabMultipleMode").getSelectedKey();}var T=o.getView().byId(t);if(!T){return"";}var B=T.getRowBinding()||T.getBinding("items");var d=(B&&B.getDownloadUrl())||"";var s=d.split("?");var e=s[0]+"/$count?";var f=[];if(s.length>1){var u=s[1];u.split("&").forEach(function(h){var U=h.split("=");switch(U[0]){case"$apply":case"$search":case"$filter":f.push(h);}});}return e+f.join("&");}function a(){var s;var h=H.getInstance().getHash();var B=H.getInstance().hrefForAppSpecificHash?H.getInstance().hrefForAppSpecificHash(""):"";s=h?B+h:window.location.hash;return s;}function b(o){var f=o.getView().byId(o.getView().getContent()[0].data("filterBarId"));var d=f.getFilterConditions();var e=S.hasSemanticDateOperations(d);if(e){return g(o);}else{return"";}}function c(){var j;var h=H.getInstance().getHash();var B=H.getInstance().hrefForAppSpecificHash?H.getInstance().hrefForAppSpecificHash(""):"";j=h?B+h:window.location.hash;if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.runningInIframe&&sap.ushell.Container.runningInIframe()){sap.ushell.Container.getFLPUrl(true).then(function(u){return u.substr(0,u.indexOf("#"))+j;}).catch(function(e){L.error("Could not retrieve cFLP URL for the sharing dialog (dialog will not be opened)",e);});}else{return window.location.origin+window.location.pathname+j;}}return{adaptShareMetadata:function(s){var t=this;return Promise.resolve(c()).then(function(j){var A=C.getAppComponent(t.base.getView());var m=A.getMetadata();var u=m.getManifestEntry("sap.ui");var i=(u&&u.icons&&u.icons.icon)||"";var o=m.getManifestEntry("sap.app");var T=(o&&o.title)||"";s.tile={icon:i,title:T,queryUrl:b(t.base)};s.title=document.title;s.url=a();s.jam.url=j;return s;});}};});
