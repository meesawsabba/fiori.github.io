/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/core/PageController","sap/fe/core/controllerextensions/InternalRouting","./overrides/InternalRouting","sap/fe/core/controllerextensions/SideEffects","sap/fe/core/controllerextensions/EditFlow","sap/fe/core/controllerextensions/InternalEditFlow","sap/fe/core/controllerextensions/PageReady","sap/fe/core/controllerextensions/InternalIntentBasedNavigation","sap/fe/core/controllerextensions/IntentBasedNavigation","./overrides/IntentBasedNavigation","sap/base/Log","sap/base/util/merge","sap/fe/core/CommonUtils","sap/fe/navigation/SelectionVariant","sap/fe/macros/table/Utils","sap/m/MessageBox","sap/fe/core/BusyLocker","sap/m/Link","sap/fe/macros/chart/ChartRuntime","sap/fe/templates/ObjectPage/ExtensionAPI","sap/ui/core/mvc/OverrideExecution","sap/fe/core/controllerextensions/ViewState","./overrides/ViewState","sap/fe/templates/RootContainer/overrides/EditFlow","sap/fe/core/helpers/ModelHelper","sap/fe/core/controllerextensions/Routing","sap/m/InstanceManager","sap/fe/core/controllerextensions/MessageHandler","./overrides/MessageHandler","sap/fe/core/controllerextensions/Share","./overrides/Share","sap/fe/macros/DelegateUtil","sap/fe/macros/CommonHelper","sap/fe/templates/TableScroller","sap/ui/model/json/JSONModel","sap/fe/core/controllerextensions/Paginator","./overrides/Paginator","sap/fe/core/controllerextensions/Placeholder"],function(P,I,a,S,E,b,c,d,e,f,L,m,C,g,T,M,B,h,j,k,O,V,l,n,o,R,p,q,r,s,t,D,u,v,J,w,x,y){"use strict";return P.extend("sap.fe.templates.ObjectPage.ObjectPageController",{metadata:{methods:{getExtensionAPI:{"public":true,"final":true},onPageReady:{"public":true,"final":false,overrideExecution:O.After}}},placeholder:y,sideEffects:S,editFlow:E,share:s.override(t),_editFlow:b.override(n),_routing:I.override(a),paginator:w.override(x),messageHandler:q.override(r),intentBasedNavigation:e.override(f),_intentBasedNavigation:d.override({getNavigationMode:function(){var i=this._oView.getController().getStickyEditMode&&this._oView.getController().getStickyEditMode();return i?"explace":"inplace";}}),viewState:V.override(l),pageReady:c.override({isContextExpected:function(){return true;}}),getExtensionAPI:function(i){if(i){this.mCustomSectionExtensionAPIs=this.mCustomSectionExtensionAPIs||{};if(!this.mCustomSectionExtensionAPIs[i]){this.mCustomSectionExtensionAPIs[i]=new k(this,i);}return this.mCustomSectionExtensionAPIs[i];}else{if(!this.extensionAPI){this.extensionAPI=new k(this);}return this.extensionAPI;}},onInit:function(){P.prototype.onInit.apply(this);var i=this.byId("fe::ObjectPage");var z=this.getView().getBindingContext("internal");z.setProperty("externalNavigationContext",{"page":true});z.setProperty("relatedApps",{visibility:false,items:null});z.setProperty("batchGroups",this._getBatchGroupsForView());z.setProperty("errorNavigationSectionFlag",false);if(i.getEnableLazyLoading()){i.attachEvent("subSectionEnteredViewPort",this._handleSubSectionEnteredViewPort.bind(this));}},onExit:function(){var i=this;if(this.mCustomSectionExtensionAPIs){Object.keys(this.mCustomSectionExtensionAPIs).forEach(function(F){i.mCustomSectionExtensionAPIs[F]&&i.mCustomSectionExtensionAPIs[F].destroy();});delete this.mCustomSectionExtensionAPIs;}this.extensionAPI&&this.extensionAPI.destroy();delete this.extensionAPI;var z=this.getView().byId("fe::FooterBar::MessageButton"),A=z?z.oMessagePopover:null;if(A&&A.isOpen()){A.close();}},_getTableBinding:function(i){return i&&i.getRowBinding();},onBeforeRendering:function(){P.prototype.onBeforeRendering.apply(this);},onAfterRendering:function(i){var z=this;this.getView().getModel("sap.fe.i18n").getResourceBundle().then(function(A){z.oResourceBundle=A;}).catch(function(A){L.error("Error while retrieving the resource bundle",A);});},_onBeforeBinding:function(z,A){var F=this,G=this._findTables(),H,K=this.byId("fe::ObjectPage"),N=A.listBinding,Q=F.getView().getBindingContext("internal"),U=Q.getProperty("batchGroups"),W=this.getView().getViewData().viewLevel;U.push("$auto");if(A.bDraftNavigation!==true){this._closeSideContent();}if(K.getBindingContext()&&K.getBindingContext().hasPendingChanges()&&!U.some(K.getBindingContext().getModel().hasPendingChanges.bind(K.getBindingContext().getModel()))){K.getBindingContext().getBinding().resetChanges();}for(var i=0;i<G.length;i++){H=G[i].getCreationRow();if(H){H.setBindingContext(null);}}var X=function(k1){if(!K.isFirstRendering()&&!A.bPersistOPScroll){K.setSelectedSection(null);}};K.attachEventOnce("modelContextChange",X);var Y={onAfterRendering:X};K.addEventDelegate(Y,F);this.pageReady.attachEventOnce("pageReady",function(k1){K.removeEventDelegate(Y);});if(N&&W>1){if(N.isA("sap.ui.model.odata.v4.ODataListBinding")){this.paginator.initialize(N,z);}else{var Z=N.getPath().replace(/\([^\)]*\)*$/,"");var N=new sap.ui.model.odata.v4.ODataListBinding(N.oModel,"",N.oModel.createBindingContext(Z));N.getContexts(0);N.attachEvent("change",function k1(){if(N.getContexts().length>0){F.paginator.initialize(N,z);N.detachEvent("change",k1);}});}}if(K.getEnableLazyLoading()){var $=K.getSections(),_=K.getUseIconTabBar(),a1=2,b1=K.getModel("ui").getProperty("/editMode")==="Editable",c1=this.getView().getViewData().editableHeaderContent;for(var d1=0;d1<$.length;d1++){var e1=$[d1];var f1=e1.getSubSections();for(var g1=0;g1<f1.length;g1++,a1--){if(a1<1||(_&&(d1>1||(d1===1&&!c1&&!b1)))){var h1=f1[g1];h1.setBindingContext(null);}}}}if(this.placeholder.isPlaceholderEnabled()&&A.showPlaceholder){var i1=this.getView();var j1=i1.getParent().oContainer.getParent();if(j1){j1.showPlaceholder({});}}},_getFirstClickableElement:function(i){var F;var A=i.getHeaderTitle()&&i.getHeaderTitle().getActions();if(A&&A.length){F=A.find(function(z){return z.getVisible();});}return F;},_getFirstEmptyMandatoryFieldFromSubSection:function(i){for(var z=0;i&&z<i.length;z++){var A=i[z].getBlocks();for(var F=0;A&&F<A.length;F++){var G;if(A[F].isA("sap.ui.layout.form.Form")){G=A[F].getFormContainers();}else if(A[F].getContent&&A[F].getContent()&&A[F].getContent().isA("sap.ui.layout.form.Form")){G=A[F].getContent().getFormContainers();}for(var H=0;G&&H<G.length;H++){var K=G[H].getFormElements();for(var N=0;K&&N<K.length;N++){var Q=K[N].getFields();if(Q[0].getRequired()&&!Q[0].getValue()){return Q[0];}}}}}return undefined;},initialTab:{value:true},_handleSubSectionEnteredViewPort:function(i){var z=i.getParameter("subSection");var A=this.getView().getBindingContext("internal");z.setBindingContext(undefined);var F=this.byId("fe::ObjectPage");if(F.getModel("ui").getProperty("/editMode")!=="Display"){if(this.getView().getViewData().sectionLayout==="Tabs"&&this.initialTab.value===false&&A.getProperty("errorNavigationSectionFlag")===false){var G=this._getFirstEmptyMandatoryFieldFromSubSection([z]);if(G){G.content.getContentEdit()[0].focus();}else{var H=F._getFirstEditableInput();if(H){H.focus();}else{var K=this._getFirstClickableElement(F);if(K){K.focus();}}}}}},_onBackNavigationInDraft:function(i){C.fnProcessDataLossOrDraftDiscardConfirmation(function(){history.back();},Function.prototype,i,this.getView().getController(),false);},_onAfterBinding:function(i,z){var A=this.byId("fe::ObjectPage"),F=this,G=this._findTables();this.sideEffects.clearPropertiesStatus();i=A.getBindingContext();var H=[];A.getSections().forEach(function($){$.getSubSections().forEach(function(_){H=C.getIBNActions(_,H);});});G.forEach(function($){var _=$.getBindingContext("internal");_.setProperty("creationRowFieldValidity",{});_.setProperty("creationRowCustomValidity",{});H=C.getIBNActions($,H);var a1=$.getRowBinding();if(a1){if(o.isStickySessionSupported(a1.getModel().getMetaModel())){a1.removeCachesAndMessages("");}}var b1=JSON.parse(u.parseCustomData(D.getCustomData($,"operationAvailableMap"))),c1=$.getSelectedContexts();C.setActionEnablement(_,b1,c1);});C.getSemanticTargetsFromPageModel(F,"_pageModel");var K=A.getHeaderTitle();var N=[];N=C.getIBNActions(K,N);H=H.concat(N);C.updateDataFieldForIBNButtonsVisibility(H,this.getView());var Q,U;function W($,_){var a1=$.getCreationRow(),b1,c1;if(a1){U.then(function(){if(a1.getModel("ui").getProperty("/isEditable")){b1=Q.bindList(_.getPath(),_.getContext(),[],[],{$$updateGroupId:"doNotSubmit",$$groupId:"doNotSubmit"});b1.refreshInternal=function(){};c1=b1.create();a1.setBindingContext(c1);c1.created().catch(function(){L.trace("transient fast creation context deleted");});}}).catch(function(d1){L.error("Error while computing the final UI state",d1);});}}function X($){var Z=F._getTableBinding($),_=function(){W($,Z);};if(!Z){L.error("Expected binding missing for table: "+$.getId());return;}if(Z.oContext){_();}else{var a1=function(){if(Z.oContext){_();Z.detachChange(a1);}};Z.attachChange(a1);}}if(i){Q=i.getModel();U=this._editFlow.computeEditMode(i);if(i.getBinding().oCache){F._updateRelatedApps();}else{var Y=function(){F._updateRelatedApps();i.getBinding().detachDataReceived(Y);};i.getBinding().attachDataReceived(Y);}var Z=(i.getBinding&&i.getBinding())||i;Z.attachEvent("patchSent",this.editFlow.handlePatchSent,this);Z.attachEvent("patchCompleted",this.editFlow.handlePatchCompleted,this);G.forEach(function($){T.whenBound($).then(X).catch(function(_){L.error("Error while waiting for the table to be bound",_);});});A._triggerVisibleSubSectionsEvents();}},onPageReady:function(i){function z(W){var Z;var c1=W.getSections();if(c1&&c1.length){Z=c1.filter(function(d1){return d1.getVisible()===true;});}return Z;}var A=this;var F=this.getView();var G=F.getBindingContext("internal");var H=F.getBindingContext();if(H){var K=o.isStickySessionSupported(H.getModel().getMetaModel());if(!K){var N=C.getAppComponent(F);N.getShellServices().setBackNavigation(A._onBackNavigationInDraft.bind(A,H));}}this.getAppComponent().getAppStateHandler().applyAppState();var Q=i.lastFocusedControl;if(Q&&Q.controlId&&Q.focusInfo){var U=F.byId(Q.controlId);if(U){U.applyFocusInfo(Q.focusInfo);return;}}var W=this.byId("fe::ObjectPage");var X=W.getModel("ui").getProperty("/editMode")==="Display";var Y;var Z=z(W);if(X){W.setSelectedSection(Z[0].getId());Y=this._getFirstClickableElement(W);if(Y){Y.focus();}}else{W.setSelectedSection(Z[0].getId());if(F.getViewData().sectionLayout==="Page"||(F.getViewData().sectionLayout==="Tabs"&&this.initialTab.value===true)){var $;var _=[];for(var a1=0;a1<Z.length;a1++){_=Z[a1].getSubSections();$=this._getFirstEmptyMandatoryFieldFromSubSection(_);if($){$.content.getContentEdit()[0].focus();break;}}}if(!$){var b1=W._getFirstEditableInput();if(b1){b1.focus();}else{Y=this._getFirstClickableElement(W);if(Y){Y.focus();}}}this.initialTab.value=false;}G.setProperty("errorNavigationSectionFlag",false);this._checkDataPointTitleForExternalNavigation();},getStickyEditMode:function(){var i=this.oView.getBindingContext&&this.oView.getBindingContext(),z=false;if(i){var A=o.isStickySessionSupported(i.getModel().getMetaModel());if(A){z=this.oView.getModel("ui").getProperty("/isEditable");}}return z;},_getObjectPageLayoutControl:function(){return this.byId("fe::ObjectPage");},_getPageTitleInformation:function(){var i=this.byId("fe::ObjectPage");var z=i.getCustomData().find(function(F){return F.getKey()==="ObjectPageSubtitle";});var A={title:i.data("ObjectPageTitle")||"",subtitle:z&&z.getValue(),intent:"",icon:""};return Promise.resolve(A);},_executeHeaderShortcut:function(i){var z=this.getView().getId()+"--"+i,A=this.byId("fe::ObjectPage").getHeaderTitle().getActions().find(function(F){return F.getId()===z;});C.fireButtonPress(A);},_executeFooterShortcut:function(i){var z=this.getView().getId()+"--"+i,A=this.byId("fe::ObjectPage").getFooter().getContent().find(function(F){return F.getMetadata().getName()==="sap.m.Button"&&F.getId()===z;});C.fireButtonPress(A);},_executeTabShortCut:function(i){var z=this.byId("fe::ObjectPage"),A=z.indexOfSection(this.byId(z.getSelectedSection())),F=z.getSections(),G=F.length-1,H=i.oSource.getCommand(),K;if(A!==-1&&G>0){if(H==="NextTab"){if(A<=G-1){K=F[++A];}}else{if(A!==0){K=F[--A];}}if(K){z.setSelectedSection(K);K.focus();}}},_getFooterVisibility:function(i){var z=this.getView().getBindingContext("internal");var A=this.getView().getId();z.setProperty("messageFooterContainsErrors",false);sap.ui.getCore().getMessageManager().getMessageModel().getData().forEach(function(F){if(F.validation&&F.type==="Error"&&F.target.indexOf(A)>-1){z.setProperty("messageFooterContainsErrors",true);}});},_showMessagePopover:function(i,z){if(i){L.error(i);}var A=this;var F=A.getView().byId("fe::FooterBar::MessageButton"),G=F.oMessagePopover,H=G.getBinding("items");if(H.getLength()>0&&!G.isOpen()){F.setVisible(true);setTimeout(function(){G.openBy(F);},0);}return z;},_editDocument:function(i){var z=this.getView().getModel("ui"),A={prepareOnEdit:this.getView().getViewData().prepareOnEdit};B.lock(z);return this.editFlow.editDocument.apply(this.editFlow,[i,A]).finally(function(){B.unlock(z);});},_saveDocument:function(i){var z=this,A=this.getView().getModel("ui"),W=[];var F=false;B.lock(A);this._findTables().forEach(function(G){var H=z._getTableBinding(G);var K={creationMode:G.data("creationMode"),creationRow:G.getCreationRow(),createAtEnd:G.data("createAtEnd")==="true"};var N=K.creationRow&&K.creationRow.getBindingContext()&&Object.keys(K.creationRow.getBindingContext().getObject()).length>1;if(N){K.bSkipSideEffects=true;F=true;W.push(z.editFlow.createDocument(H,K).then(function(){return H;}));}});return Promise.all(W).then(function(G){var H={bExecuteSideEffectsOnError:F,bindings:G};return z.editFlow.saveDocument(i,H).catch(z._showMessagePopover.bind(z)).finally(function(){if(B.isLocked(A)){B.unlock(A);}});});},_cancelDocument:function(i,z){z.cancelButton=this.getView().byId(z.cancelButton);return this.editFlow.cancelDocument(i,z);},_applyDocument:function(i){var z=this;return this.editFlow.applyDocument(i).catch(z._showMessagePopover.bind(z));},_updateRelatedApps:function(){var i=this.byId("fe::ObjectPage");if(C.resolveStringtoBoolean(i.data("showRelatedApps"))){C.updateRelatedAppsDetails(i);}},_findTableInSubSection:function(i,z,A){var F=[];for(var G=0;G<i.length;G++){var H=i[G].getContent instanceof Function&&i[G].getContent();if(H&&H.isA&&H.isA("sap.ui.layout.DynamicSideContent")){H=H.getMainContent instanceof Function&&H.getMainContent();if(H&&H.length>0){H=H[0];}}if(H&&H.isA&&H.isA("sap.fe.macros.TableAPI")){H=H.getContent instanceof Function&&H.getContent();if(H&&H.length>0){H=H[0];}}if(H&&H.isA&&H.isA("sap.ui.mdc.Table")){A.push(H);F.push({"table":H,"gridTable":H.getType().isA("sap.ui.mdc.table.GridTableType")});}}if(F.length===1&&i.length===1&&F[0].gridTable&&!z.hasStyleClass("sapUxAPObjectPageSubSectionFitContainer")){z.addStyleClass("sapUxAPObjectPageSubSectionFitContainer");}else{if(F&&!z.hasStyleClass("sapUxAPObjectPageSubSectionFitContainer")){F.forEach(function(K){if(K.gridTable){K.table.getType().setRowCount(null);}});}}},_getAllSubSections:function(){var i=this.byId("fe::ObjectPage"),z=[];i.getSections().forEach(function(A){z=z.concat(A.getSubSections());});return z;},_getAllBlocks:function(){var i=[];this._getAllSubSections().forEach(function(z){i=i.concat(z.getBlocks());});return i;},_findTables:function(){var i=this._getAllSubSections(),z=[];for(var A=0;A<i.length;A++){this._findTableInSubSection(i[A].getBlocks(),i[A],z);this._findTableInSubSection(i[A].getMoreBlocks(),i[A],z);}return z;},_closeSideContent:function(){this._getAllBlocks().forEach(function(i){var z=i.getContent instanceof Function&&i.getContent();if(z&&z.isA&&z.isA("sap.ui.layout.DynamicSideContent")){if(z.setShowSideContent instanceof Function){z.setShowSideContent(false);}}});},_getChartContextData:function(i,z){var A=i.getObject(),F=[A];if(i&&z){if(A[z]){F=A[z];delete A[z];F.push(A);}}return F;},_scrollTablesToRow:function(z){if(this._findTables&&this._findTables().length>0){var A=this._findTables();for(var i=0;i<A.length;i++){v.scrollTableToRow(A[i],z);}}},_mergeMultipleContexts:function(i,z,A){var F=this;var G=[],H=[],K,N,Q,U,W,X,Y;Y=i.getPath();K=i&&i.getModel()&&i.getModel().getMetaModel();U=K&&K.getMetaPath(Y).replace(/^\/*/,"");if(z&&z.length){N=z[0];W=N.getPath();Q=K&&K.getMetaPath(W).replace(/^\/*/,"");z.map(function(Z){if(A){var $=F._getChartContextData(Z,A);if($){G=$.map(function($){return{contextData:$,entitySet:U+"/"+A};});}}else{G.push({contextData:Z.getObject(),entitySet:Q});}});}H.push({contextData:i.getObject(),entitySet:U});H=C.removeSensitiveData(H,K);X=C.addPageContextToSelectionVariant(new g(),H,F.getView());G=C.removeSensitiveData(G,K);return{selectionVariant:X,attributes:G};},_getBatchGroupsForView:function(){var i=this,z=i.getView().getViewData(),A=z.controlConfiguration,F=A&&Object.keys(A),G=["$auto.Heroes","$auto.Decoration","$auto.Workers"];if(F&&F.length>0){F.forEach(function(K){var H=A[K];if(H.requestGroupId==="LongRunners"){G.push("$auto.LongRunners");}});}return G;},_setBreadcrumbLinks:function(z){var A=z.getBindingContext();var F=this.getAppComponent();if(A){var N=A.getPath(),G=N.split("/"),H="",K=F.getMetaModel(),Q=0;G.shift();G.splice(-1,1);G.forEach(function(U,i){H+="/"+U;var W=F.getRootViewController();var X=W.getTitleHierarchyCache();var Y;var Z=K.getMetaPath(H);var $=K.getObject(Z+"/@com.sap.vocabularies.Common.v1.ResultContext");if($){Q=1;return;}if(!X[H]){Y=W.addNewEntryInCacheTitle(H,F);}else{Y=Promise.resolve(X[H]);}Y.then(function(_){var a1=i-Q,b1=z.getLinks()[a1]?z.getLinks()[a1]:new h();b1.setText(_.subtitle||_.title);b1.setHref(_.intent);if(!z.getLinks()[a1]){z.addLink(b1);}}).catch(function(_){L.error("Error while computing the title hierarchy",_);});});}},_checkDataPointTitleForExternalNavigation:function(){var i=this.getView();var z=i.getBindingContext("internal");var A=C.getHeaderFacetItemConfigForExternalNavigation(i.getViewData(),this.getAppComponent().getRoutingService().getOutbounds());var F=this.getAppComponent().getShellServices();var G=i&&i.getBindingContext();z.setProperty("isHeaderDPLinkVisible",{});if(G){G.requestObject().then(function(Q){N(A,Q);}).catch(function(Q){L.error("Cannot retrieve the links from the shell service",Q);});}function H(Q){L.error(Q);}function K(Q){var U=this.id;if(Q&&Q.length===1&&Q[0].supported){z.setProperty("isHeaderDPLinkVisible/"+U,true);}}function N(A,Q){for(var U in A){var W=A[U];var X={};var Y=i.byId(U);if(!Y){continue;}var Z=Y.getBindingContext();var $=Z&&Z.getObject();var _=m({},Q,$);if(W.semanticObjectMapping){var a1=W.semanticObjectMapping;for(var b1 in a1){var c1=a1[b1];var d1=c1["LocalProperty"]["$PropertyPath"];var e1=c1["SemanticObjectProperty"];if(d1!==e1){if(_.hasOwnProperty(d1)){var f1={};f1[e1]=_[d1];_=m({},_,f1);delete _[d1];}}}}if(_){for(var g1 in _){if(g1.indexOf("_")!==0&&g1.indexOf("odata.context")===-1){X[g1]=_[g1];}}}F.isNavigationSupported([{target:{semanticObject:W.semanticObject,action:W.action},params:X}]).then(K.bind({id:U})).catch(H);}}},handlers:{onTableContextChange:function(z){var A=this;var F=z.getSource();var G;this._findTables().some(function(_){if(_.getRowBinding()===F){G=_;return true;}return false;});var H=this._editFlow.getCurrentActionPromise();if(H){var K;if(G.getType().getMetadata().isA("sap.ui.mdc.table.GridTableType")){K=F.getContexts(0);}else{K=F.getCurrentContexts();}if(!K[0]){return;}H.then(function(Q){if(!Q||Q.controlId!==G.sId){return;}var U=Q.oData;var W=Q.keys;var X=-1;K.find(function($,i){var _=$.getObject();var a1=W.every(function(b1){return _[b1]===U[b1];});if(a1){X=i;}return a1;});if(X!==-1){var Y=p.getOpenDialogs();var Z=Y.length>0?Y[0]:null;if(Z){Z.attachEventOnce("afterClose",function(){G.focusRow(X,true);});}else{G.focusRow(X,true);}A._editFlow.deleteCurrentActionPromise();}}).catch(function(i){L.error("An error occurs while scrolling to the newly created Item: "+i);});}var N=A.getView().byId("fe::FooterBar::MessageButton");N.fireModelContextChange();},onCallAction:function(i,A,z){var F=i.getController();var G=F;return F.editFlow.invokeAction(A,z).then(G._showMessagePopover.bind(G,undefined)).catch(G._showMessagePopover.bind(G));},onDataPointTitlePressed:function(i,z,A,F,G){A=typeof A==="string"?JSON.parse(A):A;var H=A[F],K=C.getSemanticObjectMapping(H),N=z.getBindingContext(),Q=N.getModel().getMetaModel().getMetaPath(N.getPath()),U=i._getChartContextData(N,G),W;U=U.map(function(Y){return{data:Y,metaPath:Q+(G?"/"+G:"")};});if(H&&H.parameters){var X=H.parameters&&i._intentBasedNavigation.getOutboundParams(H.parameters);if(Object.keys(X).length>0){W=X;}}if(H&&H.semanticObject&&H.action){i._intentBasedNavigation.navigate(H.semanticObject,H.action,{navigationContexts:U,semanticObjectMapping:K,additionalNavigationParameters:W});}},onChevronPressNavigateOutBound:function(i,z,A,F){return i._intentBasedNavigation.onChevronPressNavigateOutBound(i,z,A,F);},onNavigateChange:function(i){this.getExtensionAPI().updateAppState();this.bSectionNavigated=true;},onVariantSelected:function(i){this.getExtensionAPI().updateAppState();},onVariantSaved:function(i){var z=this;setTimeout(function(){z.getExtensionAPI().updateAppState();},500);},navigateToSubSection:function(i,z){var A=typeof z==="string"?JSON.parse(z):z,F=i.getView().byId("fe::ObjectPage"),G,H;if(A.sectionId){G=i.getView().byId(A.sectionId);H=A.subSectionId?i.getView().byId(A.subSectionId):G&&G.getSubSections()&&G.getSubSections()[0];}else if(A.subSectionId){H=i.getView().byId(A.subSectionId);G=H&&H.getParent();}if(!G||!H||!G.getVisible()||!H.getVisible()){i.getView().getModel("sap.fe.i18n").getResourceBundle().then(function(K){var N=C.getTranslatedText("C_ROUTING_NAVIGATION_DISABLED_TITLE",K,null,i.getView().getViewData().entitySet);L.error(N);M.error(N);}).catch(function(K){L.error(K);});}else{F.scrollToSection(H.getId());F.fireNavigate({section:G,subSection:H});}},onChartSelectionChanged:function(i){j.fnUpdateChart(i);}}});});
