/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){
/** Copyright 2019 SAP SE or an SAP affiliate company. All rights reserved. */
var _=(this&&this.__extends)||(function(){var e=function(d,b){e=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return e(d,b);};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);function a(){this.constructor=d;}d.prototype=b===null?Object.create(b):(a.prototype=b.prototype,new a());};})();sap.ui.define(["require","exports"],function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.deserialize=e.FilterFunction=e.CustomFunction=e.DynamicView=e.Alias=e.PropertyAlias=e.SEARCH_DEFAULTS=e.ESOrderType=e.ComparisonOperator=e.SearchQueryComparisonOperator=e.Expression=e.SearchQueryPrefixOperator=e.SearchQueryLogicalOperator=e.LogicalOperator=e.Property=e.Near=e.Phrase=e.escapePhrase=e.Term=e.ScopeComparison=e.Comparison=e.RangeValues=e.GeometryCollectionValues=e.MultiPolygonValues=e.PolygonValues=e.MultiLineStringValues=e.CircularStringValues=e.LineStringValues=e.MultiPointValues=e.PointValues=e.IntersectsOperator=e.CoveredByOperator=e.WithinOperator=e.SpatialReferenceSystemsOperator=e.InList=e.InListOperator=e.NearOperator=e.HierarchyFacet=e.ViewParameter=e.StringValue=e.NumberValue=e.BooleanValue=e.NullValue=e.ListValues=e.NearOrdering=e.existValueInEnum=e.escapeQueryWithDefaultLength=e.escapeQueryWithCustomLength=e.escapeQuery=e.escapeDoubleQuoteAndBackslash=e.escapeSingleQuote=void 0;var a=["\\","-","(",")","~","^","?","\"",":","'","[","]"];var b=["AND","OR","NOT"];function c(i,k,h1){return i.split(k).join(h1);}var d=function(i){return i.replace(/'/g,"''");};e.escapeSingleQuote=d;var f=function(i){return i.replace(/\\/g,"\\\\").replace(/"/g,"\\\"");};e.escapeDoubleQuoteAndBackslash=f;function g(i){var k=i?i.trim():"";if(k!==""){for(var _i=0,h1=a;_i<h1.length;_i++){var i1=h1[_i];if(i1){if(i1==="'"){k=e.escapeSingleQuote(k);}else{k=c(k,i1,"\\"+i1);}}}for(var _a=0,k1=b;_a<k1.length;_a++){var l1=k1[_a];if(k===l1){k="\""+l1+"\"";}if(k.startsWith(l1+" ")){k="\""+l1+"\" "+k.substring(l1.length+1);}if(k.endsWith(" "+l1)){k=k.substring(0,k.length-(l1.length+1))+" \""+l1+"\"";}k=k.replace(new RegExp(" "+l1+" ",'g')," \""+l1+"\" ");}}return k;}e.escapeQuery=g;function h(i,k){return g(i).substring(0,k);}e.escapeQueryWithCustomLength=h;function j(i){return g(i).substring(0,1500);}e.escapeQueryWithDefaultLength=j;function l(i,h1){return Object.keys(i).filter(function(k){return isNaN(Number(k));}).filter(function(k){return i[k]===h1;}).length>0;}e.existValueInEnum=l;var N;(function(N){N["Ordered"]="O";N["Unordered"]="U";})(N=e.NearOrdering||(e.NearOrdering={}));var L=(function(){function L(i){this.clazz=this.constructor.name;this.values=i.values;}L.prototype.toStatement=function(){return"["+this.values.map(function(i){return typeof i==="string"?"'"+e.escapeSingleQuote(i)+"'":i.toStatement();}).join(",")+"]";};return L;}());e.ListValues=L;var m=(function(){function m(){this.clazz=this.constructor.name;};m.prototype.toStatement=function(){return"null";};return m;}());e.NullValue=m;var B=(function(){function B(i){this.clazz=this.constructor.name;this.value=i.value;};B.prototype.toStatement=function(){return this.value.toString();};return B;}());e.BooleanValue=B;var n=(function(){function n(i){this.clazz=this.constructor.name;this.value=i.value;};n.prototype.toStatement=function(){return String(this.value);};return n;}());e.NumberValue=n;var S=(function(){function S(i){this.clazz=this.constructor.name;this.value=i.value;this.isQuoted=i.isQuoted;this.isSingleQuoted=i.isSingleQuoted;this.withoutEnclosing=i.withoutEnclosing;};S.prototype.toStatement=function(){if(this.withoutEnclosing){return String(Number.parseFloat(this.value));}if(this.isQuoted){return"\""+e.escapeDoubleQuoteAndBackslash(this.value)+"\"";}if(this.isSingleQuoted){return"'"+e.escapeSingleQuote(this.value)+"'";}return this.value;};return S;}());e.StringValue=S;var V=(function(){function V(i){this.clazz=this.constructor.name;this.param=i.param;}V.prototype.toStatement=function(){return"param \""+e.escapeDoubleQuoteAndBackslash(this.param)+"\"";};return V;}());e.ViewParameter=V;var H=(function(){function H(i){this.clazz=this.constructor.name;this.facetColumn=i.facetColumn;this.rootIds=i.rootIds;this.levels=i.levels;}H.prototype.toStatement=function(){return"("+this.facetColumn+",("+this.rootIds.map(function(i){return i?"'"+i+"'":"null";}).join(",")+"),"+this.levels+")";};return H;}());e.HierarchyFacet=H;var o=(function(){function o(i){this.clazz=this.constructor.name;this.distance=i.distance;this.ordering=i.ordering;}o.prototype.toStatement=function(){return":NEAR("+this.distance+(this.ordering?","+this.ordering:"")+"):";};return o;}());e.NearOperator=o;var I;(function(I){I["AND"]="AND";I["OR"]="OR";})(I=e.InListOperator||(e.InListOperator={}));var p=(function(){function p(i){this.clazz=this.constructor.name;this.operator=i.operator;this.values=i.values;}p.prototype.toStatement=function(){return this.operator+"("+this.values.join(" ")+")";};return p;}());e.InList=p;var q=(function(){function q(i,k){this.clazz=this.constructor.name;this.functionName=i;this.id=k;}q.prototype.toStatement=function(){return":"+this.functionName+(this.id?"("+this.id+")":"")+":";};return q;}());var s=(function(){function s(i){this.clazz=this.constructor.name;this.id=i.id;}s.prototype.toStatement=function(){return":"+(this.id?"("+this.id+"):":"");};return s;}());e.SpatialReferenceSystemsOperator=s;var W=(function(i){_(W,i);function W(k){return i.call(this,"WITHIN",k.id)||this;}return W;}(q));e.WithinOperator=W;var C=(function(i){_(C,i);function C(k){return i.call(this,"COVERED_BY",k.id)||this;}return C;}(q));e.CoveredByOperator=C;var t=(function(i){_(t,i);function t(k){return i.call(this,"INTERSECTS",k.id)||this;}return t;}(q));e.IntersectsOperator=t;var u=function(i){return i.x+" "+i.y;};var P=(function(){function P(i){this.clazz=this.constructor.name;this.point=i;}P.prototype.toStatement=function(){return"POINT("+u(this.point)+")";};return P;}());e.PointValues=P;var M=(function(){function M(i){this.clazz=this.constructor.name;this.points=i;}M.prototype.toStatement=function(){return"MULTIPOINT("+this.points.map(function(i){return"("+u(i)+")";}).join(",")+")";};return M;}());e.MultiPointValues=M;var v=(function(){function v(i){this.clazz=this.constructor.name;this.points=i;}v.prototype.toStatement=function(){return"LINESTRING"+v.toLineStringArray(this.points);};v.toLineStringArray=function(i){return"("+i.map(function(k){return u(k);}).join(", ")+")";};return v;}());e.LineStringValues=v;var w=(function(i){_(w,i);function w(k){return i.call(this,k)||this;}w.prototype.toStatement=function(){return"CIRCULARSTRING"+v.toLineStringArray(this.points);};return w;}(v));e.CircularStringValues=w;var x=(function(){function x(i){this.clazz=this.constructor.name;this.lineStrings=i;}x.prototype.toStatement=function(){return"MULTILINESTRING("+this.lineStrings.map(function(i){return v.toLineStringArray(i);}).join(", ")+")";};return x;}());e.MultiLineStringValues=x;var y=(function(i){_(y,i);function y(k){return i.call(this,k)||this;}y.prototype.toStatement=function(){return"POLYGON"+y.toPolygonStringArray(this.lineStrings);};y.toPolygonStringArray=function(k){return"("+k.map(function(h1){return v.toLineStringArray(h1);}).join(", ")+")";};return y;}(x));e.PolygonValues=y;var z=(function(){function z(i){this.clazz=this.constructor.name;this.polygons=i;}z.prototype.toStatement=function(){return"MULTIPOLYGON("+this.polygons.map(function(i){return y.toPolygonStringArray(i);}).join(", ")+")";};return z;}());e.MultiPolygonValues=z;var G=(function(){function G(i){this.clazz=this.constructor.name;this.geometryCollection=i;}G.prototype.toStatement=function(){return"GEOMETRYCOLLECTION("+this.geometryCollection.map(function(i){return i.toStatement();}).join(", ")+")";};return G;}());e.GeometryCollectionValues=G;var R=(function(){function R(i){this.clazz=this.constructor.name;this.start=i.start;this.end=i.end;this.excludeStart=i.excludeStart;this.excludeEnd=i.excludeEnd;}R.prototype.toStatement=function(){return""+(this.excludeStart?"]":"[")+g(this.start.toString())+" "+g(this.end.toString())+(this.excludeEnd?"[":"]");};return R;}());e.RangeValues=R;var A=(function(){function A(i){this.clazz=this.constructor.name;this.property=i.property;this.operator=i.operator;this.value=i.value;this.valueAsReservedWord=i.valueAsReservedWord;this.searchOptions=i.searchOptions;}A.prototype.toStatement=function(){var i="";var k="";var h1=false;if(l($,this.operator)){h1=true;if(this.value&&((this.value instanceof m)||(this.value instanceof B)||(this.value instanceof n)||(this.value instanceof L)||(this.value instanceof V))){this.valueAsReservedWord=true;}if(this.valueAsReservedWord){i="";k="";}else{i="'";k="'";}}var i1=typeof(this.property)==="string"?this.property:this.property.toStatement();var j1="";if(this.value){if(typeof(this.value)==="string"){if(h1){j1=e.escapeSingleQuote(this.value);}else{j1=g(this.value.toString());}}else{j1=this.value.toStatement();}}var k1=typeof(this.operator)==="string"?this.operator:this.operator.toStatement();var l1=i1+k1+i+j1+k;return X(l1,this.searchOptions);};return A;}());e.Comparison=A;var D=(function(){function D(i){this.clazz=this.constructor.name;this.values=i.values;}D.prototype.toStatement=function(){if(this.values.length===0){throw new Error("ScopeComparison values cannot be empty");}return this.values.length>1?"SCOPE:("+this.values.join(" OR ")+")":"SCOPE:"+this.values[0];};return D;}());e.ScopeComparison=D;var T=(function(){function T(i){this.clazz=this.constructor.name;this.term=i.term;this.searchOptions=i.searchOptions;this.isQuoted=i.isQuoted;if(typeof(i.doEshEscaping)!='undefined'&&i.doEshEscaping!=null){this.doEshEscaping=i.doEshEscaping;}else{this.doEshEscaping=true;}}T.prototype.toStatement=function(){var i;if(this.doEshEscaping){i=this.isQuoted?'"'+e.escapePhrase(this.term)+'"':g(this.term);}else{i=this.isQuoted?'"'+this.term+'"':this.term;}return X(i,this.searchOptions);};return T;}());e.Term=T;var E=function(i){var k=i.replace(/\\/g,'\\\\');k=k.replace(/"/g,'\\"');k=k.replace(/\?/g,'\\?');k=k.replace(/\'/g,"''");return k;};e.escapePhrase=E;var F=(function(){function F(i){this.clazz=this.constructor.name;this.phrase=i.phrase;this.searchOptions=i.searchOptions;if(typeof(i.doEshEscaping)!='undefined'&&i.doEshEscaping!=null){this.doEshEscaping=i.doEshEscaping;}else{this.doEshEscaping=true;}}F.prototype.toStatement=function(){var i;if(this.doEshEscaping){i=e.escapePhrase(this.phrase);}else{i=this.phrase;}return X("\""+i+"\"",this.searchOptions);};return F;}());e.Phrase=F;var J=(function(){function J(i){this.clazz=this.constructor.name;this.terms=i.terms;this.distance=i.distance;this.ordering=i.ordering;this.searchOptions=i.searchOptions;}J.prototype.toStatement=function(){var i=[];this.terms.forEach(function(h1){i.push(typeof h1==="string"?h1:h1.toStatement());});var k="NEAR("+this.distance+(this.ordering?","+this.ordering:"")+"):("+i.join(" ")+")";return X(k,this.searchOptions);};return J;}());e.Near=J;var K=(function(){function K(i){this.clazz=this.constructor.name;this.property=i.property;this.prefixOperator=i.prefixOperator;}K.prototype.toStatement=function(){if(this.prefixOperator){return this.prefixOperator+" "+this.property;}return this.property;};return K;}());e.Property=K;var O;(function(O){O["and"]="and";O["or"]="or";O["not"]="not";})(O=e.LogicalOperator||(e.LogicalOperator={}));var Q;(function(Q){Q["AND"]="AND";Q["TIGHT_AND"]="";Q["OR"]="OR";Q["NOT"]="NOT";Q["ROW"]="ROW";Q["AUTH"]="AUTH";Q["FILTER"]="FILTER";Q["FILTERWF"]="FILTERWF";Q["BOOST"]="BOOST";})(Q=e.SearchQueryLogicalOperator||(e.SearchQueryLogicalOperator={}));var U;(function(U){U["AND"]="AND";U["OR"]="OR";U["NOT"]="NOT";U["AND_NOT"]="AND NOT";U["OR_NOT"]="OR NOT";})(U=e.SearchQueryPrefixOperator||(e.SearchQueryPrefixOperator={}));function X(i,k){var h1=i;if(k){if(k.fuzzinessThreshold){h1=h1+"~"+k.fuzzinessThreshold.toString();}if(k.fuzzySearchOptions){if(!k.fuzzinessThreshold){h1=h1+"~0.8";}h1=h1+"["+k.fuzzySearchOptions+"]";}if(k.weight!==undefined){h1=h1+"^"+k.weight;}}return h1;}var Y=(function(){function Y(i){this.clazz=this.constructor.name;this.operator=i.operator;this.items=i.items;this.searchOptions=i.searchOptions;}Y.prototype.toStatement=function(){var k="";switch(this.operator){case Q.ROW:case Q.AUTH:case Q.FILTER:case Q.FILTERWF:case Q.BOOST:var i1=this.items.map(function(i){return i.toStatement();}).join(" "+this.operator+" ");if(!i1.startsWith("(")){i1="("+i1+")";}k=this.operator+":"+i1;break;case Q.NOT:if(this.items.length>1){throw new Error("Invalid operator. NOT operator is allowed only on a single item.");}k="(NOT "+this.items[0].toStatement()+")";break;case O.not:if(this.items.length>1){throw new Error("Invalid operator. 'not' operator is allowed only on a single item.");}k="not "+this.items[0].toStatement();break;default:if(!this.items||this.items.length==0){return"";}else if(this.items.length>1){var h1=this.items.filter(function(i){return(i instanceof D);});if(h1.length>0){k=this.items.map(function(i){return i.toStatement();}).join(""+(this.operator===""?" ":" "+this.operator+" "));}else{k="("+this.items.map(function(i){return i.toStatement();}).join(""+(this.operator===""?" ":" "+this.operator+" "))+")";}}else{k=this.items[0].toStatement();}break;}return X(k,this.searchOptions);};return Y;}());e.Expression=Y;var Z;(function(Z){Z["Search"]=":";Z["EqualCaseInsensitive"]=":EQ:";Z["NotEqualCaseInsensitive"]=":NE:";Z["LessThanCaseInsensitive"]=":LT:";Z["LessThanOrEqualCaseInsensitive"]=":LE:";Z["GreaterThanCaseInsensitive"]=":GT:";Z["GreaterThanOrEqualCaseInsensitive"]=":GE:";Z["EqualCaseSensitive"]=":EQ(S):";Z["NotEqualCaseSensitive"]=":NE(S):";Z["LessThanCaseSensitive"]=":LT(S):";Z["LessThanOrEqualCaseSensitive"]=":LE(S):";Z["GreaterThanCaseSensitive"]=":GT(S):";Z["GreaterThanOrEqualCaseSensitive"]=":GE(S):";Z["IsNull"]=":IS:NULL";Z["BetweenCaseInsensitive"]=":BT:";Z["BetweenCaseSensitive"]=":BT(S):";Z["DescendantOf"]=":DESCENDANT_OF:";Z["ChildOf"]=":CHILD_OF:";})(Z=e.SearchQueryComparisonOperator||(e.SearchQueryComparisonOperator={}));var $;(function($){$["Equal"]=" eq ";$["NotEqual"]=" ne ";$["GreaterThan"]=" gt ";$["LessThan"]=" lt ";$["GreaterThanOrEqualTo"]=" ge ";$["LessThanOrEqualTo"]=" le ";$["Is"]=" is ";$["In"]=" in ";$["IsNot"]=" is not ";})($=e.ComparisonOperator||(e.ComparisonOperator={}));var a1;(function(a1){a1["Ascending"]="ASC";a1["Descending"]="DESC";})(a1=e.ESOrderType||(e.ESOrderType={}));e.SEARCH_DEFAULTS={query:"",scope:"",};var b1=(function(){function b1(i){this.clazz=this.constructor.name;this.path=i.path;this.alias=i.alias;}b1.prototype.toStatement=function(){return this.path.join(".")+" "+this.alias;};return b1;}());e.PropertyAlias=b1;var c1=(function(){function c1(i){this.clazz=this.constructor.name;this.type=i.type;this.alias=i.alias;}c1.prototype.toStatement=function(){return this.type+" "+this.alias;};return c1;}());e.Alias=c1;var d1=(function(){function d1(i){this.clazz=this.constructor.name;this.name=i.name;this.select=i.select;this.aliases=i.aliases;this.properties=i.properties;this.paths=i.paths;this.conditions=i.conditions;}d1.prototype.toStatement=function(){var i={name:this.name,select:this.select.join(", "),};var k=[];if(this.aliases){i.aliases=this.aliases.map(function(h1){return h1.toStatement();}).join(", ");k=this.aliases.map(function(h1){return h1.alias;});}i.properties=this.properties.map(function(h1){return h1.toStatement();}).join(", ");i.paths=this.paths.map(function(h1){return h1.map(function(i1){return(typeof(i1)==='string')?i1:i1.join(".");}).join('/');}).join(", ");if(this.conditions){i.conditions=this.conditions.map(function(h1){return h1.toStatement();}).join(", ");}return Object.keys(i).map(function(h1){return h1+": "+i[h1];}).join("; ")+";";};return d1;}());e.DynamicView=d1;var e1=(function(){function e1(i){this.clazz=this.constructor.name;this.name=i.name;this.arguments=i.arguments;}e1.prototype.toStatement=function(){var i=this;var k='';if(this.arguments){k=Object.keys(this.arguments).map(function(h1){var i1=h1+"=";if(i.arguments&&typeof(i.arguments[h1])==='string'){i1="'"+e.escapeSingleQuote(i.arguments[h1])+"'";}else if(i.arguments&&i.arguments[h1]&&typeof(i.arguments[h1])==='object'){if(typeof(i.arguments[h1].toStatement)==="function"){if(i.arguments[h1]instanceof e1||i.arguments[h1]instanceof f1){i1=i.arguments[h1].toStatement();}else{if(i.arguments[h1]instanceof n){i1=i.arguments[h1].toStatement();}else{i1="'"+i.arguments[h1].toStatement()+"'";}}}else if(Array.isArray(i.arguments[h1])){i1="["+i.arguments[h1].map(function(j1){if(j1 instanceof n){return j1.toStatement();}else if(typeof(j1)==='string'){return"'"+e.escapeSingleQuote(j1)+"'";}else{return String(j1);}}).join(",")+"]";}else{throw new Error("Unexpected object: "+i.arguments[h1]);}}else{i1=String(i.arguments?String(i.arguments[h1]):'');}return h1+"="+i1;}).join(",");}return(typeof(this.name)==="string"?this.name:this.name.join("."))+"("+k+")";};return e1;}());e.CustomFunction=e1;var f1=(function(){function f1(i){this.clazz=this.constructor.name;this.customFunction=i.customFunction;this.oDataFilter=i.oDataFilter;}f1.prototype.toStatement=function(){var i;if(this.customFunction instanceof Y){var k="Search.search(query='"+this.customFunction.toStatement()+"')";if(this.oDataFilter){k+=" and "+this.oDataFilter.toStatement();}i="filter("+k+")";}else{i="filter("+this.customFunction.toStatement();if(this.oDataFilter){i+=" and "+this.oDataFilter.toStatement();}i+=")";}return i;};return f1;}());e.FilterFunction=f1;var g1=function(i){if(typeof i==="object"){switch(i.clazz){case"Property":return new K(i);case"Near":i.terms=i.terms.map(function(m1){return e.deserialize(m1);});return new J(i);case"Phrase":return new F(i);case"RangeValues":return new R(i);case"GeometryCollectionValues":return new G(i.geometryCollection.map(function(m1){return e.deserialize(m1);}));case"MultiPolygonValues":return new z(i.polygons);case"MultiLineStringValues":return new x(i.lineStrings);case"CircularStringValues":return new w(i.points);case"LineStringValues":return new v(i.points);case"MultiPointValues":return new M(i.points);case"PointValues":return new P(i.point);case"SpatialReferenceSystemsOperator":return new s(i);case"SpatialReferenceSystemsOperatorBase":return new q(i);case"InList":return new p(i);case"NearOperator":return new o(i);case"Term":return new T(i);case"HierarchyFacet":return new H(i);case"Comparison":var k=new A(i);if(typeof k.property==="object"){k.property=e.deserialize(k.property);}if(k.operator&&typeof k.operator==="object"){k.operator=e.deserialize(k.operator);}if(k.value&&typeof k.value==="object"){k.value=e.deserialize(k.value);}return k;case"ScopeComparison":return new D(i);case"WithinOperator":return new W(i);case"PolygonValues":return new y(i.lineStrings);case"CoveredByOperator":return new C(i);case"IntersectsOperator":return new t(i);case"Expression":var h1=new Y(i);h1.items=h1.items.map(function(m1){return e.deserialize(m1);});return h1;case"DynamicView":var i1=new d1(i);i1.properties=i1.properties.map(function(m1){return e.deserialize(m1);});if(i1.aliases){i1.aliases=i1.aliases.map(function(m1){return e.deserialize(m1);});}if(i1.conditions){if(Array.isArray(i1.conditions)){i1.conditions=i1.conditions.map(function(m1){return e.deserialize(m1);});}else{i1.conditions=e.deserialize(i1.conditions);}}return i1;case"Alias":return new c1(i);case"PropertyAlias":return new b1(i);case"ListValues":var j1=new L(i);j1.values=j1.values.map(function(m1){return e.deserialize(m1);});return j1;case"ViewParameter":return new V(i);case"NullValue":return new m();case"BooleanValue":return new B(i);case"NumberValue":return new n(i);case"StringValue":return new S(i);case"CustomFunction":var k1=new e1(i);if(k1.arguments){Object.keys(k1.arguments).map(function(m1){if(k1.arguments&&typeof(k1.arguments[m1])==='object'&&typeof(k1.arguments[m1].clazz)==="string"){if(["CustomFunction","FilterFunction"].includes(k1.arguments[m1].clazz)){k1.arguments[m1]=e.deserialize(k1.arguments[m1]);}else{throw new Error("Invalid statement in: "+m1+" = "+k1.arguments[m1]);}}});}return k1;case"FilterFunction":var l1=new f1(i);l1.customFunction=e.deserialize(l1.customFunction);if(l1.oDataFilter){l1.oDataFilter=e.deserialize(l1.oDataFilter);}return l1;default:throw new Error("not implemented: "+JSON.stringify(i));}}return i;};e.deserialize=g1;});})();
