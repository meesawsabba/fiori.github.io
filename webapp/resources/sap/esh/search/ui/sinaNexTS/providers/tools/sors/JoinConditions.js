/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){var _=(this&&this.__extends)||(function(){var e=function(d,b){e=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return e(d,b);};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);function a(){this.constructor=d;}d.prototype=b===null?Object.create(b):(a.prototype=b.prototype,new a());};})();sap.ui.define(["require","exports","./NavigationTargetTemplate","../../../sina/SinaObject"],function(r,e,N,S){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.JoinConditions=void 0;var J=(function(a){_(J,a);function J(p){var b=a.call(this,p)||this;b.navigationTargetGenerator=p.navigationTargetGenerator;b.sourceObjectType=p.sourceObjectType;b.targetObjectType=p.targetObjectType;b.conditions=[];return b;}J.prototype.add=function(c){this.conditions.push(c);};J.prototype.hasDuplicateSemanticObject=function(){var m={};for(var i=0;i<this.conditions.length;++i){var c=this.conditions[i];if(m[c.semanticObjectType]){return true;}m[c.semanticObjectType]=true;}return false;};J.prototype.hasDistinctValue=function(s,p){var v;for(var i=0;i<this.conditions.length;++i){var c=this.conditions[i];if(c.semanticObjectType!==s){continue;}if(!v){v=c[p];continue;}if(v!==c[p]){return false;}}return true;};J.prototype.generateNavigationTargetTemplates=function(){if(this.hasDuplicateSemanticObject()){return this.createSingleConditionsTemplates();}return this.createMultipleConditionsTemplates();};J.prototype.createSingleConditionsTemplates=function(){var n=[];for(var i=0;i<this.conditions.length;++i){var c=this.conditions[i];var s=this.hasDistinctValue(c.semanticObjectType,"sourcePropertyName");var t=this.hasDistinctValue(c.semanticObjectType,"targetPropertyName");if(!s&&!t){continue;}var b=new N.NavigationTargetTemplate({sina:this.sina,navigationTargetGenerator:this.navigationTargetGenerator,label:"dummy",sourceObjectType:this.sourceObjectType,targetObjectType:this.targetObjectType,conditions:[c],});b._condition=c;n.push(b);}this.assembleSingleConditionTemplateLabels(n);return n;};J.prototype.createMultipleConditionsTemplates=function(){return[new N.NavigationTargetTemplate({sina:this.sina,navigationTargetGenerator:this.navigationTargetGenerator,label:this.navigationTargetGenerator.objectTypeMap[this.targetObjectType].label,sourceObjectType:this.sourceObjectType,targetObjectType:this.targetObjectType,conditions:this.conditions,}),];};J.prototype.assembleSingleConditionTemplateLabels=function(n){var t={};var b,l,c,m;for(var i=0;i<n.length;++i){c=n[i];m=this.navigationTargetGenerator.objectTypeMap[this.targetObjectType];l=m.label+" to:"+m.propertyMap[c._condition.targetPropertyName].label;c.label=l;b=t[l];if(!b){b=[];t[l]=b;}b.push(c);}m=this.navigationTargetGenerator.objectTypeMap[this.sourceObjectType];for(l in t){b=t[l];if(b.length>1){for(var j=0;j<b.length;++j){c=b[j];c.label+=" from:"+m.propertyMap[c._condition.sourcePropertyName].label;}}}};return J;}(S.SinaObject));e.JoinConditions=J;});})();
