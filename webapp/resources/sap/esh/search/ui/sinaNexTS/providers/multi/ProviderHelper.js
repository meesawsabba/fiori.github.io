/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["require","exports"],function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ProviderHelper=void 0;var P=(function(){function P(p){this.provider=p;this.sina=p.sina;}P.prototype.calculateMultiDataSourceLabel=function(l,p){if(p.label){var i=p.label||p.id;return l+" - "+i;}return l;};P.prototype.calculateMultiDataSourceId=function(i,a){return a+"_"+i;};P.prototype.updateProviderId=function(c){var i=0;for(;;){if(i!==0){c.provider.id=c.provider.id+"_"+i;}var d=this.findSinaById(c.provider.id);if(d){i++;continue;}else{break;}}};P.prototype.createMultiDataSource=function(i,d){return this.sina._createDataSource({id:i,label:this.calculateMultiDataSourceLabel(d.label,d.sina.provider),labelPlural:this.calculateMultiDataSourceLabel(d.labelPlural,d.sina.provider),type:d.type,hidden:d.hidden,attributesMetadata:d.attributesMetadata,});};P.prototype.findSinaById=function(p){for(var i=0;i<this.provider.multiSina.length;i++){var c=this.provider.multiSina[i];if(p===c.provider.id){return c;}}return undefined;};P.prototype.updateAttributesMetadata=function(d,a){a.attributesMetadata=d.attributesMetadata;a.attributeMetadataMap=d.attributeMetadataMap;};P.prototype.updateSuggestionDataSource=function(a){for(var i=0;i<a.items.length;i++){var b=a.items[i];if(b.childSuggestions){for(var j=0;j<b.childSuggestions.length;j++){var c=b.childSuggestions[j];var d=this.calculateMultiDataSourceId(c.dataSource.id,c.sina.provider.id);c.dataSource=this.sina.dataSourceMap[d];c.filter.dataSource=this.sina.dataSourceMap[d];}}if(b.dataSource){b.label=this.calculateMultiDataSourceLabel(b.label,b.sina.provider);var m=this.calculateMultiDataSourceId(b.dataSource.id,b.sina.provider.id);var f=this.sina.dataSourceMap[m];b.dataSource=f;b.sina=this.sina;}}return a;};P.prototype.createMultiChartResultSet=function(c){var t=this;var m=t.sina._createChartResultSet({id:c.id,items:[],query:c.query,title:c.title,});for(var i=0;i<c.items.length;i++){var a=c.items[i];var b=t.sina.parseConditionFromJson(a.filterCondition.toJson());m.items.push(t.sina._createChartResultSetItem({filterCondition:b,dimensionValueFormatted:a.dimensionValueFormatted,measureValue:a.measureValue,measureValueFormatted:a.measureValueFormatted,}));}return m;};P.prototype.updateDataSourceFacets=function(a){for(var j=0;j<a[0].items.length;j++){var f=a[0].items[j];if(f.dataSource){var b=this.calculateMultiDataSourceId(f.dataSource.id,f.sina.provider.id);if(!this.provider.multiDataSourceMap[b]){this.createMultiDataSource(b,f.dataSource);this.provider.multiDataSourceMap[b]=f.dataSource;}f.dataSource=this.sina.dataSourceMap[b];}}return a;};P.prototype.updateRootCondition=function(a,c){a.sina=c;if(a.conditions&&a.conditions.length>0){for(var i=0;i<a.conditions.length;i++){this.updateRootCondition(a.conditions[i],c);}}};return P;}());e.ProviderHelper=P;});})();
