/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["require","exports","../../core/core"],function(r,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parse=e.ResultSetParser=void 0;var R=(function(){function R(o){this.resultSet=o.resultSet;}R.prototype.parseNamedValue=function(n){var v;var a;var b;for(var d in n){switch(d){case"Name":a=n[d];break;case"Value":v=n[d];break;default:if(!b){b={};}b[d]=n[d];}}if(b){b.Value=v;return{name:a,value:b,};}return{name:a,value:v,};};R.prototype.formatItem=function(a){var l;if(a.NamedValues){l=a.NamedValues;}if(!l){return a;}var o={};for(var i=0;i<l.length;++i){var n=l[i];var b=this.parseNamedValue(n);o[b.name]=this.formatItem(b.value);}return o;};R.prototype.formatItems=function(a){var b={};for(var i=0;i<a.length;++i){var d=a[i];var f=this.formatItem(d);c.extend(b,f);}return b;};R.prototype.parse=function(){if(!this.resultSet.Grids||!this.resultSet.Grids[0]||!this.resultSet.Grids[0].Axes){return{cells:[],axes:[],};}this.enhance(this.resultSet);var g=this.resultSet.Grids[0];if(g.Cells.length>0){return this.parseWithCells(g);}return this.parseWithoutCells(g);};R.prototype.parseWithCells=function(g){var a={axes:[],cells:[],};for(var i=0;i<g.Cells.length;i++){var b=g.Cells[i];var d=[];for(var j=0;j<b.Index.length;j++){var f=b.Index[j];var h=g.Axes[j];var k=this.resolve(h,f);d.push.apply(d,k);}var m=c.extend({},b);delete m.Index;d.push(m);a.cells.push(this.formatItems(d));}return a;};R.prototype.parseWithoutCells=function(g){var a={axes:[],cells:[],};for(var i=0;i<g.Axes.length;++i){var b=g.Axes[i];var d=[];a.axes.push(d);for(var j=0;j<b.Tuples.length;++j){var f=this.resolve(b,j);d.push(this.formatItems(f));}}return a;};R.prototype.resolve=function(a,b){var d=[];if(a.Tuples.length===0){return d;}var t=a.Tuples[b];for(var i=0;i<t.length;++i){var f=t[i];var g=a.Dimensions[i].ItemList.Items[f];d.push(g);}return d;};R.prototype.enhance=function(a){var b={};for(var i=0;i<a.ItemLists.length;++i){var d=a.ItemLists[i];b[d.Name]=d;}for(var h=0;h<a.Grids.length;++h){var g=a.Grids[h];for(var j=0;j<g.Axes.length;++j){var f=g.Axes[j];for(var k=0;k<f.Dimensions.length;++k){var l=f.Dimensions[k];l.ItemList=b[l.ItemListName];}}}};return R;}());e.ResultSetParser=R;function p(a){var b=new R({resultSet:a,});return b.parse();}e.parse=p;});})();
