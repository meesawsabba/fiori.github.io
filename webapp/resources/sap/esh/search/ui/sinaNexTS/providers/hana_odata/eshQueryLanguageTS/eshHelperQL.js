/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["require","exports","../eshObjects/src/index"],function(r,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.createEshSearchQueryUrl=void 0;function c(o){var s=o.resourcePath||"/$all";if(o.metadataCall===true){if(o.metadataObjects){if(o.metadataObjects.entitySets){s+="/EntitySets("+o.metadataObjects.entitySets+")";}}return s;}if(o.suggestTerm){s=s+("/"+encodeURIComponent("GetSuggestion(term='"+o.suggestTerm.replace(/'/g,"''")+"')"));}var n=new a.Expression({operator:a.LogicalOperator.and,items:[],});if(!o){o={query:a.SEARCH_DEFAULTS.query,scope:a.SEARCH_DEFAULTS.scope,$select:[],facets:[],};}else{if(!o.query){o.query=a.SEARCH_DEFAULTS.query;}if(!o.scope){o.scope=a.SEARCH_DEFAULTS.scope;}if(!o.$select){o.$select=[];}if(!o.facets){o.facets=[];}}if(o.oDataFilter){n.items.push(o.oDataFilter);}if(n.items.length>0){o.oDataFilter=n;}var u=s;var q="SCOPE:"+o.scope;if(o.searchQueryFilter){var b=o.searchQueryFilter.toStatement().trim();if(b.length>0){if(q!==""){q+=" ";}q+=b;}}if(o.freeStyleText){if(q!==""){q+=" ";}var f=a.parseFreeStyleText(o.freeStyleText);q+=f.toStatement();}var p={};for(var _=0,d=Object.keys(o);_<d.length;_++){var g=d[_];switch(g){case"query":if(o.$apply){break;}var h=q===""?"":"filter(Search.search(query='"+q+"')";if(o.oDataFilter&&o.oDataFilter.items.length>0){h+=" and "+o.oDataFilter.toStatement();}if(q!==""){h+=")";}if(o.groupby&&o.groupby.properties&&o.groupby.properties.length>0){h+="/groupby(("+o.groupby.properties.join(",")+")";if(o.groupby.aggregateCountAlias&&o.groupby.aggregateCountAlias!==""){h+=",aggregate($count as "+o.groupby.aggregateCountAlias+")";}h+=")";}if(h!==""){p.$apply=h;}break;case"$orderby":if(o.$orderby){p.$orderby=o.$orderby.map(function(i){return i.key+" "+i.order;}).join(",");}break;case"facets":case"$select":if(o[g].length>0){p[g]=o[g].join(",");}break;case"$top":case"$skip":case"$count":case"whyfound":case"estimate":case"wherefound":case"language":case"facetlimit":p[g]=o[g];break;case"resourcePath":default:break;}}var j=Object.keys(p).map(function(i){return encodeURIComponent(i)+"="+encodeURIComponent(p[i]);}).join("&");return j===""?u:u+"?"+j;}e.createEshSearchQueryUrl=c;});})();
