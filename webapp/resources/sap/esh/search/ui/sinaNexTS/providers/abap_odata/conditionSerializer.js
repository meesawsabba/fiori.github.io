/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["require","exports","../../sina/ComparisonOperator","./typeConverter","../../sina/ComplexCondition","../../sina/SimpleCondition","../../core/errors","./ComparisonOperator","../../sina/LogicalOperator"],function(r,e,C,t,a,S,b,c,L){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.serialize=void 0;var d=(function(){function d(f){this.dataSource=f;}d.prototype.convertSinaToOdataOperator=function(f){switch(f){case C.ComparisonOperator.Eq:return"EQ";case C.ComparisonOperator.Lt:return"LT";case C.ComparisonOperator.Gt:return"GT";case C.ComparisonOperator.Le:return"LE";case C.ComparisonOperator.Ge:return"GE";case C.ComparisonOperator.Co:return"EQ";case C.ComparisonOperator.Bw:return"EQ";case C.ComparisonOperator.Ew:return"EQ";case L.LogicalOperator.And:return"AND";case L.LogicalOperator.Or:return"OR";default:throw new b.UnknownComparisonOperatorError("Unknown comparison operator "+f);}};d.prototype.serializeComplexCondition=function(f){var g={ActAsQueryPart:false,Id:1,OperatorType:this.convertSinaToOdataOperator(f.operator),SubFilters:[],};var h="Schema[Namespace=ESH_SEARCH_SRV]>EntityType[Name=SearchFilter]>Property[Name=ActAsQueryPart]";if(f.sina.provider.isQueryPropertySupported(h)){g.ActAsQueryPart=true;}var j=f.conditions;for(var i=0;i<j.length;++i){var k=j[i];g.SubFilters.push(this.serialize(k));}return g;};d.prototype.serializeSimpleCondition=function(f){var m=this.dataSource.getAttributeMetadata(f.attribute);var g=m.type;var h={ConditionAttribute:f.attribute,ConditionOperator:this.convertSinaToOdataOperator(f.operator),ConditionValue:t.sina2Odata(g,f.value,{operator:f.operator,}),SubFilters:[],};return h;};d.prototype.serializeBetweenCondition=function(f){var v;var g;var h=f.conditions[0];var i=f.conditions[1];if(h instanceof S.SimpleCondition&&i instanceof S.SimpleCondition){var m=this.dataSource.getAttributeMetadata(h.attribute);var j=m.type;if(h.operator===C.ComparisonOperator.Ge){v=h.value;g=i.value;}else{v=i.value;g=h.value;}var k={ConditionAttribute:h.attribute,ConditionOperator:c.ABAPODataComparisonOperator.Bt,ConditionValue:t.sina2Odata(j,v),ConditionValueHigh:t.sina2Odata(j,g),SubFilters:[],};return k;}throw new b.InBetweenConditionInConsistent();};d.prototype.serialize=function(f){if(f instanceof a.ComplexCondition){if(f.operator===L.LogicalOperator.And&&f.conditions[0]&&(f.conditions[0].operator===C.ComparisonOperator.Ge||f.conditions[0].operator===C.ComparisonOperator.Gt||f.conditions[0].operator===C.ComparisonOperator.Le||f.conditions[0].operator===C.ComparisonOperator.Lt)){if(f.conditions.length===1){return this.serializeSimpleCondition(f.conditions[0]);}return this.serializeBetweenCondition(f);}return this.serializeComplexCondition(f);}if(f instanceof S.SimpleCondition){return this.serializeSimpleCondition(f);}};return d;}());function s(f,g){var h=new d(f);return h.serialize(g);}e.serialize=s;});})();
