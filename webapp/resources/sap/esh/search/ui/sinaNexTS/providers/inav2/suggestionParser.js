/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){sap.ui.define(["require","exports","../../sina/SuggestionCalculationMode","./pivotTableParser"],function(r,e,S,p){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.parse=void 0;var a=(function(){function a(c){this.provider=c;this.sina=c.sina;}a.prototype.parseSuggestions=function(q,d){d=p.parse(d);var s=[];var c;var f;for(var i=0;i<d.cells.length;i++){c=null;var g=d.cells[i];if(g.$$Attribute$$!=="$$AllAttributes$$"){continue;}switch(g.$$Term$$.Scope){case"SearchHistory":if(g.$$DataSource$$==="$$AllDataSources$$"){c=this.parseSearchTermSuggestion(q,g);}break;case"ObjectData":if(g.$$DataSource$$==="$$AllDataSources$$"){c=this.parseSearchTermSuggestion(q,g);f=c;}else{c=this.parseSearchTermAndDataSourceSuggestion(q,g);if(c&&c.filter.dataSource!==f.filter.dataSource){f.childSuggestions.push(c);}c=null;}break;case"DataSources":if(g.$$DataSource$$==="$$AllDataSources$$"){c=this.parseDataSourceSuggestion(q,g);}break;}if(c){s.push(c);}}return s;};a.prototype.parseDataSourceSuggestion=function(q,c){var d=this.sina.getDataSource(c.$$Term$$.Value);if(!d){return null;}var f=q.filter.clone();f.setDataSource(d);return this.sina._createDataSourceSuggestion({calculationMode:S.SuggestionCalculationMode.Data,dataSource:d,label:c.$$Term$$.ValueFormatted,});};a.prototype.parseSearchTermSuggestion=function(q,c){var d=this.parseCalculationMode(c.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(c.$$Term$$.Value);return this.sina._createSearchTermSuggestion({searchTerm:c.$$Term$$.Value,calculationMode:d,filter:f,label:c.$$Term$$.ValueFormatted,});};a.prototype.parseSearchTermAndDataSourceSuggestion=function(q,c){var d=this.parseCalculationMode(c.$$Term$$.Scope);var f=q.filter.clone();f.setSearchTerm(c.$$Term$$.Value);var g=this.sina.getDataSource(c.$$DataSource$$);if(!g){return null;}f.setDataSource(g);return this.sina._createSearchTermAndDataSourceSuggestion({searchTerm:c.$$Term$$.Value,dataSource:g,calculationMode:d,filter:f,label:c.$$Term$$.ValueFormatted,});};a.prototype.parseCalculationMode=function(s){switch(s){case"SearchHistory":return S.SuggestionCalculationMode.History;case"ObjectData":return S.SuggestionCalculationMode.Data;}};return a;}());function b(c,s,d){var f=new a(c);return f.parseSuggestions(s,d);}e.parse=b;});})();
