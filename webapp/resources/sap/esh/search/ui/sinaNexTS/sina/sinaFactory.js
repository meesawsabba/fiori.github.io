/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){var a=(this&&this.__awaiter)||function(t,_,P,g){function c(v){return v instanceof P?v:new P(function(r){r(v);});}return new(P||(P=Promise))(function(r,d){function f(v){try{s(g.next(v));}catch(e){d(e);}}function h(v){try{s(g["throw"](v));}catch(e){d(e);}}function s(e){e.done?r(e.value):c(e.value).then(f,h);}s((g=g.apply(t,_||[])).next());});};var b=(this&&this.__generator)||function(c,d){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:h(0),"throw":h(1),"return":h(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this;}),g;function h(n){return function(v){return s([n,v]);};}function s(o){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=o[0]&2?y["return"]:o[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,o[1])).done)return t;if(y=0,t)o=[o[0]&2,t.value];switch(o[0]){case 0:case 1:t=o;break;case 4:_.label++;return{value:o[1],done:false};case 5:_.label++;y=o[1];o=[0];continue;case 7:o=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(o[0]===6||o[0]===2)){_=0;continue;}if(o[0]===3&&(!t||(o[1]>t[0]&&o[1]<t[3]))){_.label=o[1];break;}if(o[0]===6&&_.label<t[1]){_.label=t[1];t=o;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(o);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}o=d.call(c,_);}catch(e){o=[6,e];y=0;}finally{f=t=0;}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true};}};sap.ui.define(["require","exports","../core/util","../core/core","./Sina","../providers/abap_odata/Provider","../providers/hana_odata/Provider","../providers/sample/Provider","../providers/inav2/Provider","../providers/dummy/Provider","../providers/multi/Provider","../core/Log","../core/errors","./SinaConfiguration"],function(r,e,u,c,S,P,d,f,g,h,j,s,k,l){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.createByTrialAsync=e.createAsync=void 0;if(typeof process!=="undefined"&&process.env&&process.env.NODE_ENV&&process.env.NODE_ENV==="debug"){var m=new s.Log();s.Log.level=s.Severity.DEBUG;m.debug("SINA log level set to debug!");}function n(i){return a(this,void 0,void 0,function(){var v,w,x,y;return b(this,function(z){switch(z.label){case 0:if(i.logTarget){s.Log.persistency=i.logTarget;}if(typeof i.logLevel!=="undefined"){s.Log.level=i.logLevel;}v=new s.Log("sinaFactory");v.debug("Creating new eshclient instance using provider "+i.provider);return[4,l._normalizeConfiguration(i)];case 1:w=z.sent();switch(w.provider){case l.AvailableProviders.HANA_ODATA:{x=new d.Provider();break;}case l.AvailableProviders.ABAP_ODATA:{x=new P.Provider();break;}case l.AvailableProviders.INAV2:{x=new g.Provider();break;}case l.AvailableProviders.MULTI:{x=new j.MultiProvider();break;}case l.AvailableProviders.SAMPLE:{x=new f.Provider();break;}case l.AvailableProviders.DUMMY:{x=new h.Provider();break;}default:{throw new Error("Unknown Provider: '"+i.provider+"' - Available Providers: "+l.AvailableProviders.HANA_ODATA+", "+l.AvailableProviders.ABAP_ODATA+", "+l.AvailableProviders.INAV2+", "+l.AvailableProviders.MULTI+", "+l.AvailableProviders.SAMPLE+", "+l.AvailableProviders.DUMMY);}}y=new S.Sina(x);return[4,y._initAsync(w)];case 2:z.sent();return[2,y];}});});}e.createAsync=n;function o(i,v){var w;return Promise.all(c.map(i,l._normalizeConfiguration.bind(this),this)).then(function(x){w=x;return q(w);}.bind(this)).then(function(){return p(w,v);}.bind(this));}e.createByTrialAsync=o;function _(){return a(this,void 0,void 0,function(){var i,v;return b(this,function(w){i=u.getUrlParameter("sinaConfiguration");if(i){return[2,l._normalizeConfiguration(i)];}v=u.getUrlParameter("sinaProvider");if(v){return[2,l._normalizeConfiguration(v)];}return[2,Promise.resolve()];});});}function p(i,v){return a(this,void 0,void 0,function(){var w,x,y;return b(this,function(z){w=new s.Log("sinaFactory");v=v||function(){return true;};x=[];y=function(A){if(A>=i.length){return Promise.reject(new k.NoValidEnterpriseSearchAPIConfigurationFoundError(x.join(", ")));}var B=i[A];x.push(B.provider);return n(B).then(function(C){if(v(C)){return C;}return y(A+1);},function(C){w.info(C);return y(A+1);});}.bind(this);return[2,y(0)];});});}function q(v){return a(this,void 0,void 0,function(){var w,x,i,y;return b(this,function(z){switch(z.label){case 0:return[4,_()];case 1:w=z.sent();if(!w){return[2];}x=false;for(i=0;i<v.length;++i){y=v[i];if(y.provider.indexOf("/dummy/Provider")<0&&y.provider!==w.provider){v.splice(i,1);i--;continue;}if(y.provider===w.provider){x=true;t(y,w);}}if(!x){v.splice(0,0,w);}return[2];}});});}function t(i,v){for(var w in v){i[w]=v[w];}}});})();
