/*! 
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	 
 */
(function(){var _=(this&&this.__extends)||(function(){var e=function(d,b){e=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return e(d,b);};return function(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");e(d,b);function a(){this.constructor=d;}d.prototype=b===null?Object.create(b):(a.prototype=b.prototype,new a());};})();sap.ui.define(["require","exports","./Formatter","../AttributeType"],function(r,e,F,A){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.ResultValueFormatter=void 0;var R=(function(a){_(R,a);function R(){return a!==null&&a.apply(this,arguments)||this;}R.prototype.initAsync=function(){return Promise.resolve();};R.prototype.format=function(b){return this._formatDataInUI5Form(b);};R.prototype.formatAsync=function(b){b=this._formatDataInUI5Form(b);return Promise.resolve(b);};R.prototype._formatDataInUI5Form=function(b){if(typeof window==="undefined"||typeof window.sap==="undefined"||typeof window.sap.ui==="undefined"||typeof window.sap.ui.core==="undefined"||typeof window.sap.ui.core.format==="undefined"){return b;}var t=this;t.sina=b.sina;b.items.forEach(function(i){if(t.sina.getDataSource(i.dataSource.id)===undefined){return;}if(jQuery.isEmptyObject(t.sina.getDataSource(i.dataSource.id).attributeMetadataMap)){return;}t.attributeMap=t.sina.getDataSource(i.dataSource.id).attributeMetadataMap;i.titleAttributes.forEach(function(c){t._formatHybridAttribute(c);});i.titleDescriptionAttributes.forEach(function(c){t._formatHybridAttribute(c);});i.detailAttributes.forEach(function(c){t._formatHybridAttribute(c);});});return b;};R.prototype._formatHybridAttribute=function(b){var t=this;if(b.metadata.type&&b.metadata.type===A.AttributeType.Group){for(var i=0;i<b.attributes.length;i++){t._formatHybridAttribute(b.attributes[i].attribute);}}else{t._formatSingleAttribute(b);}};R.prototype._formatSingleAttribute=function(b){var t=this;b.valueFormatted=t._getFormattedValue(b);if(b.valueHighlighted===undefined||b.valueHighlighted.length===0){b.valueHighlighted=b.valueFormatted;if(b.isHighlighted){b.valueHighlighted="<b>"+b.valueHighlighted+"</b>";}}};R.prototype._getFormattedValue=function(b){if(this.attributeMap[b.id]===undefined){return b.valueFormatted;}var t=A.AttributeType;var u=undefined;var v;var c=b.valueFormatted||b.value;switch(this.attributeMap[b.id].type){case t.Integer:u=window.sap.ui.core.format.NumberFormat.getIntegerInstance();break;case t.Double:u=window.sap.ui.core.format.NumberFormat.getFloatInstance({});break;case t.Timestamp:if(isNaN(Date.parse(b.value))===false){u=window.sap.ui.core.format.DateFormat.getDateTimeInstance();v=new Date(b.value);}break;case t.Date:if(isNaN(Date.parse(b.value))===false){u=window.sap.ui.core.format.DateFormat.getDateInstance();v=new Date(b.value);}break;case t.Time:if(isNaN(Date.parse("1970/01/01 "+b.value))===false){u=window.sap.ui.core.format.DateFormat.getTimeInstance();v=new Date("1970/01/01 "+b.value);}break;}if(v&&u&&u.format(v)!==undefined){c=u.format(v);}return c;};return R;}(F.Formatter));e.ResultValueFormatter=R;});})();
