/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["../i18n","sap/esh/search/ui/controls/SearchResultListItem","sap/esh/search/ui/controls/SearchText","sap/esh/search/ui/SearchHelper","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ui/core/format/DateFormat",],function(a,S,b,c,I,d,D){"use strict";var n="\u2013";return S.extend("sap.esh.search.ui.controls.SearchResultListItemDocument",{renderer:function(r,C){C._renderer(r);},_renderContentContainer:function(r){r.write('<div class="sapUshellSearchResultListItem-Content">');this._renderTitleContainer(r);this._renderAttributesContainer(r);r.write("</div>");},_renderTitleContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItem-TitleAndImageContainer">');r.write('<div class="sapUshellSearchResultListItem-TitleContainer">');t._renderCheckbox(r);var e=t.getAdditionalParameters().titleUrl;var f=t.getAggregation("_titleLink");f.setHref(e);f.setText(t.getTitle());if(e.length===0){f.setEnabled(false);}r.renderControl(f);var g=t.getAggregation("_typeText");g.setText(t.getType());r.renderControl(g);r.write("</div>");t._renderImageForPhone(r);r.write("</div>");},_renderAttributesContainer:function(r){var t=this;r.write('<div class="sapUshellSearchResultListItemDoc-AttributesExpandContainer');var e=t.getProperty("expanded");if(e){r.write(" sapUshellSearchResultListItem-AttributesExpanded");}r.write('">');r.write('<div class="sapUshellSearchResultListItem-AttributesAndActions">');r.write('<ul class="sapUshellSearchResultListItem-Attributes">');this._renderThumbnailSnippetContainer(r);this._renderDocAttributesContainer(r);r.write('<div class="sapUshellSearchResultListItem-ExpandSpacerAttribute" aria-hidden="true"></div>');r.write("</ul>");t._renderRelatedObjectsToolbar(r);r.write("</div>");r.write("</div>");},_renderThumbnailContainer:function(r){var t=this;if(!t.getImageUrl()){return;}if(t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer">');r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainerInner">');var z=new I({src:d.getIconURI("search"),useIconTooltip:false,});if(t.getContainsSuvFile()===true){var p=function(){window.open(t.getSuvlink(),"_blank","noopener,noreferrer");};z.attachPress(p);}z.addStyleClass("sapUshellSearchResultListItemDoc-ThumbnailZoomIcon");r.renderControl(z);if(t.getContainsSuvFile()===true){r.write('<a target="_blank" href="'+t.getSuvlink()+'" rel="noopener noreferrer">');}else{r.write('<a target="_blank" rel="noopener noreferrer">');}r.write('<img class="sapUshellSearchResultListItemDoc-Thumbnail" src="');r.write(t.getImageUrl());r.write("</a>");r.write("</div>");r.write("</div>");}else{r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailContainer-hidden">');r.write("</div>");}},_renderImageForPhone:function(r){var t=this;if(t.getImageUrl()&&t.getContainsThumbnail()===true){r.write('<div class="sapUshellSearchResultListItem-TitleImage">');r.write('<div class="sapUshellSearchResultListItem-ImageContainerAlignmentHelper"></div>');r.write('<img class="sapUshellSearchResultListItem-Image" src="');r.write(t.getImageUrl());r.write('">');r.write("</div>");}},_renderDocAttributesContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-AttributesContainer">');var i=this.getAttributes();this._renderAllAttributes(r,i);r.write("</div>");},_renderThumbnailSnippetContainer:function(r){r.write('<div class="sapUshellSearchResultListItemDoc-ThumbnailSnippetContainer">');this._renderThumbnailContainer(r);this._renderSnippetContainer(r);r.write("</div>");},_renderSnippetContainer:function(r){var e=this.getAttributes();for(var i=0;i<e.length;i++){var f=e[i];if(f.longtext){var v=new b();v.setText(f.value);v.addStyleClass("sapUshellSearchResultListItemDoc-Snippet");r.renderControl(v);}}},_renderAllAttributes:function(r,e){var t=this;var f;var l;var v;var g;var p;var i=0,j=0,k=0;var h=8;if(t.getImageUrl()){h--;}var m=function(s){var u;for(var i=0;i<s.length;i++){u=s[i];if(u.key==="FILE_PROPERTY"&&u.value){return true;}}return false;};var C=m(e);t.destroyAggregation("_attributeValues");for(;j<h&&i<e.length;i++){f=e[i];if(f.isTitle||f.longtext){continue;}if(C===true&&f.key!=="FILE_PROPERTY"){continue;}if(!f.value){continue;}if(C===true){var F=JSON.parse(f.value);for(;k<F.length&&k<10;k++){p=F[k];switch(p.type){case"date-time":var o=new Date(p.value);var q=D.getDateTimeInstance({style:"medium",},sap.ui.getCore().getConfiguration().getLocale());v=q.format(o);break;case"byte":v=c.formatFileSize(Number(p.value));break;case"integer":v=c.formatInteger(Number(p.value));break;default:v=p.value;}l=p.category+": "+p.name;if(v===undefined){continue;}if(!v||v===""){v=n;}g=new b();g.setText(v);g.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");g.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(g);t.addAggregation("_attributeValues",g,true);}}else{l=f.name;v=f.value;if(l===undefined||v===undefined){continue;}if(!v||v===""){v=n;}g=new b();g.setText(v);g.addStyleClass("sapUshellSearchResultListItemDoc-AttributeValue");g.addStyleClass("sapUshellSearchResultListItem-MightOverflow");r.renderControl(g);t.addAggregation("_attributeValues",g,true);}j++;}},_getExpandAreaObjectInfo:function(){var t=this;var r=$(t.getDomRef());var e=r.find(".sapUshellSearchResultListItemDoc-AttributesExpandContainer");var f=r.find(".sapUshellSearchResultListItem-RelatedObjectsToolbar");var g=false;if(f.css("display")==="none"){f.css("display","block");g=true;}var h=e.height();var i=r.find(".sapUshellSearchResultListItem-AttributesAndActions").height();if(g){f.css("display","");}var j=[];r.find(".sapUshellSearchResultListItem-GenericAttribute").each(function(){var o=$(this);if(o.css("order")>2){j.push(this);}});var k=200;var l=k/10;var m={resultListItem:r,attributesExpandContainer:e,currentHeight:h,expandedHeight:i,elementsToFadeInOrOut:j,expandAnimationDuration:k,fadeInOrOutAnimationDuration:l,relatedObjectsToolbar:f,};return m;},hideDetails:function(){var t=this;var r=$(t.getDomRef());if(!t.isShowingDetails()){return;}var e=this._getExpandAreaObjectInfo();var f=r.find(".sapUshellSearchResultListItem-Attributes").outerHeight(true);var s=false;var g=e.attributesExpandContainer.animate({height:f,},{duration:e.expandAnimationDuration,progress:function(h,p,i){if(!s&&i<=e.fadeInOrOutAnimationDuration){s=true;var j=$(e.elementsToFadeInOrOut).animate({opacity:0,},e.fadeInOrOutAnimationDuration).promise();jQuery.when(g,j).done(function(){t.setProperty("expanded",false,true);e.attributesExpandContainer.removeClass("sapUshellSearchResultListItem-AttributesExpanded");$(e.elementsToFadeInOrOut).css("opacity","");var k=d.getIconURI("slim-arrow-down");var l=t.getAggregation("_expandButton");l.setTooltip(a.getText("showDetailBtn_tooltip"));l.setIcon(k);l.rerender();});}},}).promise();},});});
