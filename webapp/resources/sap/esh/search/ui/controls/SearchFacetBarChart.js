/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["../i18n","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/ComparisonMicroChartData","sap/m/ValueColor","sap/ui/core/Control",],function(a,C,b,V,c){"use strict";return c.extend("sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart",{metadata:{properties:{lastUpdated:{type:"string",},aItems:{type:"object",},},aggregations:{items:{type:"sap.suite.ui.microchart.ComparisonMicroChartData",multiple:true,},},},constructor:function(o){var t=this;t.options=o;c.prototype.constructor.apply(this);this.bindAggregation("items","items",function(){var d=new b({title:"{label}",value:"{value}",color:{path:"selected",formatter:function(v){var r=V.Good;if(!v){r=V.Neutral;}return r;},},displayValue:"{valueLabel}",press:function(e){var f=e.getSource().getBindingContext();var m=f.getModel();var g=f.getObject();var i=g.selected;var h=g.filterCondition;if(i){if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.removeFilterCondition(h,true);}}else if(t.options.oSearchFacetDialog){t.options.oSearchFacetDialog.onDetailPageSelectionChangeCharts(e);}else{m.addFilterCondition(h,true);}},});return d;});},renderer:function(r,o){r.write("<div");r.writeControlData(o);r.writeClasses();r.write(">");var d=new C({width:"90%",colorPalette:"",press:function(){},tooltip:"",shrinkable:true,});if(o.options.oSearchFacetDialog){d.setWidth("95%");d.addStyleClass("sapUshellSearchFacetBarChartLarge");}else{d.addStyleClass("sapUshellSearchFacetBarChart");}d.addEventDelegate({onAfterRendering:function(){$("#"+this.sId).has(".Good").addClass("sapUshellSearchFacetBarChartSelected");},});var e=o.getItems();var f=o.getAItems();if(e.length===0&&f){e=f;}var m=0;for(var i=0;i<e.length;++i){var g=e[i];if(!o.options.oSearchFacetDialog){if(g.mProperties&&g.mProperties.value){d.addData(g);}else if(g.mProperties&&!g.mProperties.value){m++;}}else{d.addData(g);}}o.iMissingCnt=m;r.renderControl(d);r.write("</div>");},onAfterRendering:function(){var t=this;var d=$(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];var I=sap.ui.getCore().byId(d.id);if(t.iMissingCnt>0){I.setVisible(true);var m=a.getText("infoZeileNumberMoreSelected",[t.iMissingCnt]);I.setText(m);I.rerender();}else{I.setVisible(false);}var A=$(".sapSuiteUiMicroChartPointer");for(var i=0;i<A.length;i++){var e=A[i];var s=e.title;if(s&&s.indexOf(":")===-1){e.title=s.replace(/( \d+) *$/,":$1");}}},setEshRole:function(){},});});
