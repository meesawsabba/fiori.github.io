/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/m/List","sap/m/StandardListItem","sap/m/GroupHeaderListItem","sap/m/CustomListItem","sap/m/Tree","sap/m/StandardTreeItem","sap/m/CustomTreeItem","sap/m/Label","sap/m/CheckBox","sap/m/ListSeparators","sap/m/ListMode","sap/ui/model/BindingMode",],function(L,S,G,C,T,a,b,c,d,e,f,B){"use strict";return L.extend("sap.esh.search.ui.controls.SearchFacetHierarchy",{constructor:function(i,s){if(typeof i==="object"){s=i;i=undefined;}jQuery.extend(s,{showSeparators:e.None,mode:f.SingleSelectMaster,items:[],});return L.prototype.constructor.apply(this,[i,s]);},init:function(){this.addItem(new G({title:"{title}"}));this.tree=new T({mode:f.None,includeItemInSelection:true,selectionChange:function(h){var t=h.getParameter("listItem").getBindingContext().getObject();t.toggleFilter(h.getParameter("selected"));},items:{path:"node/childNodes",factory:function(i,o){var t=o.getObject();var l=new c({text:{parts:["label","count"],formatter:function(l,h){return h?l+" ("+h+")":l;},},});l.attachBrowserEvent("click",function(){t.toggleFilter();});return new b({content:[new d({selected:{path:"selected",mode:B.OneWay,},partiallySelected:{path:"partiallySelected",mode:B.OneWay,},select:function(h){var t=h.getSource().getBindingContext().getObject();t.toggleFilter();},}),l,],});},},toggleOpenState:function(h){h.getParameter("itemContext").getObject().toggleExpand(h.getParameter("expanded"));},});this.addItem(new C({content:this.tree,}));var g={onAfterRendering:function(){this.expandTreeNodes();}.bind(this),};this.addEventDelegate(g,this);},expandTreeNodes:function(){var g=this.getBindingContext().getObject();var r=g.node;this.expandTreeNodeRecursively(r,true);},expandTreeNodeRecursively:function(n,g){if(n.expanded&&!g){this.doExpand(n);}if(!n.childNodes){return;}for(var i=0;i<n.childNodes.length;++i){var h=n.childNodes[i];this.expandTreeNodeRecursively(h);}},doExpand:function(n){var g=this.tree.getItems();for(var i=0;i<g.length;++i){var h=g[i];var j=h.getBindingContext().getObject();if(j===n){this.tree.expand(i);return;}}},renderer:"sap.m.ListRenderer",});});
