/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/core/mvc/View","../i18n","sap/m/Button","sap/m/CheckBox","sap/m/FlexBox","sap/m/FlexItemData","sap/m/Label","sap/m/List","sap/m/ListMode","sap/m/MessageBox","sap/m/StandardListItem","sap/m/Title","sap/m/VBox","sap/ui/model/BindingMode",],function(V,i,B,C,F,a,L,b,c,M,S,T,d,e){"use strict";return V.extend("sap.esh.search.ui.userpref.SearchPrefsDialog",{createContent:function(){var t=this;var f;this.firstTimeBeforeRendering=true;var o=new T({text:i.getText("sp.personalizedSearch"),});var p=new C({id:"personalizedSearchCheckbox",selected:{path:"/personalizedSearch",mode:e.TwoWay,},text:i.getText("sp.trackPersonalizedSearch"),enabled:"{/isPersonalizedSearchEditable}",layoutData:new a({growFactor:1}),});var r=new B({text:i.getText("sp.deleteSearchTracks"),press:this.resetHistory.bind(this),enabled:{parts:["/isPersonalizedSearchEditable","/resetButtonWasClicked"],formatter:function(q,u){return q&&!u;},},});var P=new F({items:[p,r],});var g=new d({items:[o,P],});var h=new T({text:i.getText("sp.defaultSearchScope"),});var j=new C({id:"defaultSearchScopeCheckbox",selected:{path:"/favActive",mode:e.TwoWay,},text:i.getText("sp.usePersSearchScope"),});var l=new L({id:"connectorListLabel",text:i.getText("sp.connectorList"),visible:"{/favActive}",layoutData:new a({growFactor:1}),}).addStyleClass("sapUiSmallMarginTop");var k=new L({text:{parts:["/selectedDataSourceCount","/dataSourceCount"],formatter:function(q,u){return i.getText("sp.connectorListCount",[q,u,]);},},visible:"{/favActive}",}).addStyleClass("sapUiSmallMarginTop");var m=new F({items:[l,k],});var n=new b({id:"connectorListId",mode:c.MultiSelect,visible:"{/favActive}",selectionChange:function(E){t.onListItemSelectionChange(E);},growing:true,growingThreshold:50,growingScrollToLoad:true,}).addStyleClass("sapUiTinyMarginTop");n.bindAggregation("items","/subDataSources",function(){var q=new S({title:"{label}",selected:"{selected}",});return q;});var D=new d({items:[h,j,m,n],visible:"{/userDefinedDatasources}",}).addStyleClass("sapUiSmallMarginTop");var s=new d({items:[g,D],});f=[s];return f;},onBeforeRendering:function(){if(this.firstTimeBeforeRendering){this.firstTimeBeforeRendering=false;return;}this.getModel().reload();},resetHistory:function(){this.getModel().resetProfile().then(function(){},function(r){var f=i.getText("sp.resetFailed");f+="\n"+r;M.show(f,{title:i.getText("sp.resetFailedTitle"),icon:M.Icon.ERROR,actions:[M.Action.OK],});});},onListItemSelectionChange:function(E){this.getModel().setProperty("/selectedDataSourceCount",E.getSource().getSelectedItems().length);},});});
