// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/core/mvc/JSView","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters"],function(U,J,h,C,r,a,m,s,b){"use strict";return U.extend("sap.ushell.components.appfinder.Component",{metadata:{manifest:"json",library:"sap.ushell"},parseOldCatalogParams:function(u){var p=new b(u).mParams;var v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf("/")!==-1?encodeURIComponent(v):v;}}return p;},createContent:function(){this.oModel=m.getModel();this.setModel(this.oModel);var H,p,c;var P=a.last("/core/shell/enablePersonalization");if(P){s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");}this.oCatalogsManager=new C("dashboardMgr",{model:this.oModel});this.setModel(r.i18nModel,"i18n");s.toggleUserActivityLog();H=h.getHash();Promise.all([sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(S){var o=S[0];var u=S[1];var d=u.parseShellHash(H);if(d&&d.semanticObject==="shell"&&d.action==="catalog"){p=this.parseOldCatalogParams(H);c=this.getMetadata().getConfig();o.toExternal({target:{semanticObject:c.semanticObject,action:c.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}}.bind(this));return sap.ui.view({id:"appFinderView",viewName:"sap.ushell.components.appfinder.AppFinder",type:"JS",async:true});},destroy:function(){U.prototype.destroy.apply(this);this.oCatalogsManager.destroy();}});});
