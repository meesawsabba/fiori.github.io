// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(u,m,r,C,J,X){"use strict";return C.extend("sap.ushell.components.cards.Card",{onInit:function(){var v=this.getView(),c=this.getView().getViewData().chip,t=c.bag.getBag("tileProperties"),M,o;o=m.getTranslatablePropertiesFromBag(t);M=new J({data:o});v.setModel(M);v.setModel(r.i18nModel,"i18n");this._implementConfigurationUiContract(c,v);this._implementPreviewContract(c,o);},onPress:function(){var v=this.getView(),c=v.getViewData().chip,s=c.configuration.getParameterValueAsString("tileConfiguration"),o;if(c.configurationUi.isEnabled()){c.configurationUi.display();}else if(s){o=JSON.parse(s);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(a){a.toExternal({target:{semanticObject:o.navigation_semantic_object,action:o.navigation_semantic_action},params:o.navigation_semantic_parameters_as_object});});}},_implementPreviewContract:function(c,a){if(c.preview){c.preview.setPreviewTitle(a.display_title_text);if(c.preview.setPreviewSubtitle&&typeof c.preview.setPreviewSubtitle==="function"){c.preview.setPreviewSubtitle(a.display_subtitle_text);}}},_implementConfigurationUiContract:function(c,v){if(c.configurationUi&&c.configurationUi.isEnabled()){c.configurationUi.setUiProvider(function(){var o=this._getConfigurationUi(c);o.setModel(v.getModel(),"tileModel");return o;}.bind(this));v.getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}},_getConfigurationUi:function(c){var o=new X({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:c}});return o;}});});
