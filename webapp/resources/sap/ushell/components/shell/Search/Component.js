// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/resources","sap/ui/core/UIComponent","sap/ui/core/IconPool","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery"],function(r,U,I,H,q){"use strict";return U.extend("sap.ushell.components.shell.Search.Component",{metadata:{manifest:"json",library:"sap.ushell"},createContent:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{};var t=this;var b=(o.enableSearch!==false);if(b){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=new q.Deferred();sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/SearchShellHelperAndModuleLoader","sap/esh/search/ui/SearchShellHelper"],function(d,e){if(i){e.init();}t._searchShellHelperDeferred.resolve(e);});});}return t._searchShellHelperDeferred;};var a={id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:I.getIconURI("search"),visible:true,showSeparator:false,press:function(e){_(false).done(function(d){d.onShellSearchButtonPressed(e);});}};var c=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",a,true,false);c.setModel(r.i18nModel,"i18n");if(o.openSearchAsDefault){_(true).done(function(d){d.setDefaultOpen(true);});}t.oHashChanger=H.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(d){var h=d.mParameters;setTimeout(function(){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/HashChangeHandler"],function(e){e.handle(h);});});},6000);});c.addEventDelegate({onsapskipforward:function(e){e.preventDefault();q("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){e.preventDefault();q("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){q("#sf").attr("aria-pressed",false);}});}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});},exit:function(){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem("sf");var s=sap.ui.getCore().byId("sf");if(s){s.destroy();}}});});
