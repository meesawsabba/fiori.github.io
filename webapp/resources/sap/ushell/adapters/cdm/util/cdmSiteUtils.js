// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(A,L,u){"use strict";var c={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};c.getVisualizations=function(v,a){var V={};Object.keys(v).forEach(function(b){var o=v[b];var s;if(o.isCustomTile){s=o.vizType;}else if(o.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var d={vizType:s,vizConfig:{"sap.app":{title:o.title,subTitle:o.subTitle,info:o.info,tags:{keywords:o.keywords}},"sap.ui":{icons:{icon:o.icon}},"sap.flp":{tileSize:o.size,indicatorDataSource:o.indicatorDataSource,numberUnit:o.numberUnit,target:u.toTargetFromHash(o.url,a)}}};if(o.isCustomTile){d.vizConfig["sap.flp"]._instantiationData=o._instantiationData;}V[b]=d;}.bind(this));return V;};c.getApplications=function(n){return Object.keys(n).reduce(function(a,b){var i=n[b],I=i.permanentKey||i.id;try{a[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");a[b]={};}return a;},{});};c.getVizTypes=function(v){return Object.keys(v).reduce(function(V,s){var a=v[s].id;if(!V[a]){V[a]={"sap.app":{id:a,type:"chipVizType"},"sap.flp":{vizOptions:v[s].vizOptions,tileSize:v[s].tileSize}};}return V;},{});};return c;});
