//@ui5-bundle sap/ushell/library-preload.js
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/cache',[],function(){"use strict";var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};},true);
sap.ui.predefine('sap/ushell/ui/launchpad/ViewPortState',function(){"use strict";},false);
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/AppInfoParameters',["sap/base/Log","sap/ushell/services/AppConfiguration","sap/base/util/restricted/_curry","sap/base/util/restricted/_zipObject","sap/ui/VersionInfo","sap/ushell/Config"],function(L,a,_,b,V,C){"use strict";
function g(p){var A=p.applicationType;if(A==="TR"){A="GUI";}return A;}
function c(){return a.getCurrentApplication().appCapabilities||{};}
function d(p){function q(v){return(v.version||"")+(" ("+(v.buildTimestamp||"")+")")||"";}if(g(p)==="UI5"){return V.load().then(q).catch(function(){L.error("VersionInfo could not be loaded");});}return undefined;}
function e(p){return Promise.resolve().then(function(){var q=p.componentInstance;if(q){var A=q.getManifestEntry("/sap.app/applicationVersion/version");return A;}return undefined;});}
function f(p){var t=p.getTechnicalParameter("sap-ach");return t.then(function(A){var s=A&&A[0];if(s){return s;}return c().appSupportInfo;});}
function h(p){function q(){var M=a.getMetadata();return M.technicalName;}var E={UI5:function(){var r=p.componentInstance;if(r){var s=r.getMetadata().getManifestEntry("/sap.ui5/componentName");if(!s){s=r.getMetadata().getComponentName();}return s;}return q();},TR:function(){return(q()||"").replace(/\s[(]TCODE[)]$/,"");},WDA:q,NWBC:q,URL:function(){return Promise.resolve().then(function(){var r=a.getCurrentApplication();if(r.appCapabilities.technicalAppComponentId){return r.appCapabilities.technicalAppComponentId;}return undefined;});}};var A=p.applicationType;if(E.hasOwnProperty(A)){return E[A]();}return undefined;}
function i(p){return p.getTechnicalParameter("sap-fiori-id").then(function(F){if(F&&typeof F[0]==="string"){return F[0];}if(p.homePage){return"LAUNCHPAD";}return c().appId||p.inboundPermanentKey;});}
function j(u){return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(r){return new Promise(function(R,p){r.resolveReferences([u]).then(function(q){R(q[u]);}).catch(p);});});}
function k(p){return Promise.resolve().then(function(){var q=a.getCurrentApplication();var A=g(p);if(A&&A!=="URL"){return A;}return q.appCapabilities&&q.appCapabilities.appFrameworkId;}).then(function(A){var q={NWBC:"WDA",TR:"GUI"};return q[A]||A;});}
function l(p,q){return q.getSystemContext().then(function(s){return s.getProperty(p);});}
function m(){var s=window.hasher&&window.hasher.getHash();if(!s){return Promise.reject("Could not identify current application hash");}return Promise.resolve().then(function(){return s;});}
var H={theme:j.bind(null,"User.env.sap-theme-NWBC"),languageTag:j.bind(null,"User.env.sap-languagebcp47"),appIntent:m,appFrameworkId:k,appFrameworkVersion:d,appSupportInfo:f,technicalAppComponentId:h,appId:i,appVersion:e,productName:_(l)("productName")};
function n(p){return!H[p]&&/[.]/.test(p);}
function o(p,q){var P=p.map(function(s){if(n(s)){H[s]=_(l)(s);}if(!H[s]){L.error(s+" is not a valid app info parameter");return undefined;}return H[s](q);});return Promise.all(P).then(function(v){return b(p,v);});}
return{getInfo:function(p,q){if(!q){return Promise.reject("Parameter application missing");}return o(["appFrameworkId"],q).then(function(){return o(p,q);});}};},false);
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config","sap/base/util/deepExtend","sap/ui/core/routing/History"],function(U,L,u,a,A,s,w,g,p,C,d,H){"use strict";
function b(J,K,N){var O=J.inbound,R=O&&O.resolutionResult,P;if(!(!O||!R||!(R["sap.wda"]))){P=w.constructFullWDAResolutionResult(J,K,N);}else if(!(!O||!R)){P=w.constructWDAResolutionResult(J,K,N);}if(P){P.then(function(Q){r(Q,(Q.url&&Q.url.indexOf("/ui2/nwbc/")>=0)?"NWBC":"WDA");});}return P;}
function c(J,K,N){return g.generateTRResolutionResult(J,K,N).then(function(R){r(R,"GUI");return R;});}
function e(J,K,N){var O=new U(K),P=J.inbound,Q=P&&P.resolutionResult,R=d({},J.mappedIntentParamsPlusSimpleDefaults),S,T;if(R["sap-system"]){S=R["sap-system"][0];delete R["sap-system"];}if(R["sap-system-src"]){T=R["sap-system-src"][0];delete R["sap-system-src"];}return new Promise(function(V,W){s.spliceSapSystemIntoURI(O,Q.systemAlias,S,T,"WCF",Q.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,N).done(function(X){var Y=A.getURLParsing().paramsToString(R),Z=A.appendParametersToUrl(Y,X.toString());var $={url:Z,text:Q.text||"",additionalInformation:Q.additionalInformation||"",applicationType:"WCF",fullWidth:true};r($,"WCF");V($);}).fail(function(X){W(X);});});}
function f(J,K,N){var O=J.inbound,P,S,Q,R,T={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(W){if(O.resolutionResult.hasOwnProperty(W)){T[W]=O.resolutionResult[W];}});T.url=K;if(T.applicationDependencies&&typeof T.url==="undefined"){T.url="";}if(typeof T.url==="undefined"){T.url="";L.warning("The component url is undefined. We set it to empty string avoid rejection of the promise");}R=d({},J.mappedIntentParamsPlusSimpleDefaults);T.reservedParameters={};var V={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(V).forEach(function(W){var X=R[W];if(X){delete R[W];T.reservedParameters[W]=X;}});J.mappedDefaultedParamNames=J.mappedDefaultedParamNames.filter(function(W){return!V[W];});if(J.mappedDefaultedParamNames.length>0){R["sap-ushell-defaultedParameterNames"]=[JSON.stringify(J.mappedDefaultedParamNames)];}S=R["sap-system"]&&R["sap-system"][0];Q=R["sap-system-src"]&&R["sap-system-src"][0];T["sap-system"]=S;if(typeof Q==="string"){T["sap-system-src"]=Q;}J.effectiveParameters=R;P=A.getURLParsing().paramsToString(R);if(P){T.url=T.url+((T.url.indexOf("?")<0)?"?":"&")+P;}if(typeof O.resolutionResult.ui5ComponentName!=="undefined"){T.ui5ComponentName=O.resolutionResult.ui5ComponentName;}T.text=O.title;return Promise.resolve(T);}
function h(T){var J=new U().fragment();var K=J.lastIndexOf("&/");var O=1;if(K>0){if(T&&T.capabilities&&T.capabilities.appFrameworkId==="UI5"){O=2;}return J.substr(K+O);}return undefined;}
function i(J){var K=J.targetNavigationMode;if(K===undefined||K===""){K="inplace";}return K;}
function j(){var J=window.hasher&&window.hasher.getHash(),K="",P;if(J&&J.length>0&&J.indexOf("sap-iapp-state=")>0){P=/(?:sap-iapp-state=)([^&/\\]+)/.exec(J);if(P&&P.length===2){K=P[1];}}return K;}
function k(){return new Promise(function(R){Promise.all([sap.ushell.Container.getServiceAsync("UserInfo"),sap.ushell.Container.getServiceAsync("PluginManager")]).then(function(J){var K=J[0],P=J[1];var N=K.getUser();var O=sap.ui.getCore().getConfiguration();var Q=u.getUi5Version();var S=N.getContentDensity();var T=N.getTheme();if(T.indexOf("sap_")!==0){var V=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=N.getTheme(V);}var W;var X;if(O){X=O.getLanguage&&O.getLanguage();W=O.getSAPLogonLanguage&&O.getSAPLogonLanguage();}var Y=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var Z=0;if(C.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){Z=C.last("/core/shell/sessionTimeoutIntervalInMinutes");}R({language:X,logonLanguage:W,theme:T,themeServiceRoot:Y,isDebugMode:!!window["sap-ui-debug"],ui5Version:Q,contentDensity:S,sapPlugins:P._getNamesOfPluginsWithAgents(),innerAppState:j(),sessionTimeout:Z,historyDirection:H.getInstance().getDirection()||""});});});}
function l(J){var K;switch(J){case"inplace":K="embedded";break;case"explace":K="newWindow";break;default:K=J||"newWindow";}return K;}
function m(T,S){var J=l(T);var K=u.getMember(S,"sap|integration.navMode");switch(K){case"inplace":return"embedded";case"explace":if(J==="embedded"){return"newWindowThenEmbedded";}if(["newWindowThenEmbedded","newWindow"].indexOf(J)>=0){return J;}L.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return J;}}
function n(T,S,J){var K=u.clone(T);K.navigationMode=m(T.navigationMode,S);K.appId=J(T.appId||"");K.technicalAppComponentId=J(T.technicalAppComponentId||"");K.appSupportInfo=S["sap.app"]&&S["sap.app"].ach;K.appFrameworkId=T.appFrameworkId;delete K.urlTransformation;return K;}
function o(S,J,K){var N={appParams:{},system:undefined},O;if(K.mappedIntentParamsPlusSimpleDefaults){N.appParams=JSON.parse(JSON.stringify(K.mappedIntentParamsPlusSimpleDefaults));}O=u.getMember(J,"sap|app.destination");if(typeof O==="string"&&O.length>0){N.system=S.systemAliases[O]&&JSON.parse(JSON.stringify(S.systemAliases[O]));if(typeof N.system==="object"){N.system.alias=O;}}return N;}
function q(J,T){return new Promise(function(R,K){var N=new U(J);var P=N.query(true);var O=true;if(T==="explace"){O=false;}sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(S){S.compactParams(P,["sap-language","sap-theme","sap-shell","sap-ui-app-id","transaction","sap-iframe-hint","sap-keep-alive","sap-ui-versionedLibCss","sap-wd-configId"],undefined,O).done(function(Q){if(!Q.hasOwnProperty("sap-intent-param")){R(J);return;}var V;if(Q["sap-theme"]){var W="sap-theme="+Q["sap-theme"];Q["sap-theme"]="sap-theme-temp-placeholder";N.query(Q);V=N.toString();V=V.replace("sap-theme=sap-theme-temp-placeholder",W);}else{N.query(Q);V=N.toString();}R(V);}).fail(function(Q){K(Q);});});});}
function r(R,J){if(J){y(R,"sap-iframe-hint",J);}}
function t(R){var K=R.extendedInfo.appParams["sap-keep-alive"];if(K!==undefined){y(R,"sap-keep-alive",K[0]);}}
function v(R){var S=C.last("/core/spaces/enabled");if(S===true){y(R,"sap-spaces",S);}}
function x(R,S,J){var T=u.getMember(S,"sap|integration.urlTemplateId");if(T==="urltemplate.url-dynamic"&&R.url.indexOf("sap-language=")===-1){y(R,"sap-language",J.env.language);}}
function y(R,N,V){if(R.url){var J=R.url.indexOf("#"),K=R.url,O="";if(J>0){K=R.url.slice(0,J);O=R.url.slice(J);}R.url=K+(K.indexOf("?")>=0?"&":"?")+N+"="+V+O;}}
function z(J,K,N){return new Promise(function(R){var O=J.inbound,T=O.templateContext,P=T.payload.capabilities||{};if(J.mappedIntentParamsPlusSimpleDefaults&&J.mappedIntentParamsPlusSimpleDefaults.hasOwnProperty("sap-ushell-innerAppRoute")){var Q=window.hasher.getHash();if(J.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"].length>0&&Q.indexOf("&/")===-1){Q+="&/"+J.mappedIntentParamsPlusSimpleDefaults["sap-ushell-innerAppRoute"];window.hasher.replaceHash(Q);}}var S={innerAppRoute:h(T.payload)||J.parsedIntent.appSpecificRoute,targetNavMode:i(J),defaultParameterNames:J.mappedDefaultedParamNames,startupParameter:J.mappedIntentParamsPlusSimpleDefaults};k().then(function(V){S.env=V;if(P.appFrameworkId==="UI5"&&S.startupParameter){for(var W in S.startupParameter){if(W!=="sap-ushell-innerAppRoute"){S.startupParameter[W][0]=encodeURIComponent(S.startupParameter[W][0]);}}}var X=a.expand(T.payload,T.site,S,T.siteAppSection,"startupParameter");var Y=function(_){var a1=u.clone(T.payload);a1.urlTemplate=_;return a.expand(a1,T.site,S,T.siteAppSection,"startupParameter");};var Z={applicationType:"URL",text:O.title,appCapabilities:n(P,T.siteAppSection,Y),url:X,extendedInfo:o(T.site,T.siteAppSection,J),contentProviderId:O.contentProviderId||"",systemAlias:(T.siteAppSection["sap.app"]&&T.siteAppSection["sap.app"].destination)||T.siteAppSection.destination||""};r(Z,Z.appCapabilities.appFrameworkId);t(Z);v(Z);x(Z,T.siteAppSection,S);var $=new Promise(function(_){sap.ushell.Container.getServiceAsync("URLTemplate").then(function(a1){sap.ui.require(["sap/ushell/components/applicationIntegration/application/BlueBoxesCache"],function(b1){var c1=(b1.get(Z.url)===undefined);a1.handlePostTemplateProcessing(Z.url,T.siteAppSection,c1).then(_);});});});$.then(function(_){Z.url=_;B(Z.url,P,T).then(function(a1){Z.url=a1;q(Z.url,S.targetNavMode).then(function(b1){Z.url=b1;R(Z);},function(){R(Z);});});});});});}
function B(J,K,T){return new Promise(function(R){var N=K.urlTransformation||{enabled:false},S,O,P;if(N.enabled===true){P=new U(J);S=N.transformations[0].service.uri;var Q=a.prepareExpandData({urlTemplate:"",parameters:{names:S.queryOptions}},{},{urlComponent:{query:P.query()}},T.siteAppSection,"");O=U.expand("{+rootPath}/{+resourcePath}{?queryParams*}",{rootPath:S.rootPath,resourcePath:S.resourcePath,queryParams:Q.oResolvedParameters}).toString();sap.ui.require(["sap/ui/thirdparty/datajs"],function(V){V.read({requestUri:O,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}},function(W){L.info("URL Transformation Succeeded",JSON.stringify({URLBeforeTransformation:J,TransformationResult:W.transformAppLaunchQueryString.queryString}),"sap.ushell.ApplicationType");J=P.query(W.transformAppLaunchQueryString.queryString).toString();R(J);},function(W){L.error("URL Transformation Failed",JSON.stringify(W),"sap.ushell.ApplicationType");R(J);});});}else{R(J);}});}
function D(J,K,N){var O=J.inbound,P=O&&O.resolutionResult,R={};var Q=new U(K);var S=d({},J.mappedIntentParamsPlusSimpleDefaults);if(J.inbound&&J.inbound.action==="launchURL"&&J.inbound.semanticObject==="Shell"){delete S["sap-external-url"];}var T=S["sap-system"]&&S["sap-system"][0];var V=S["sap-system-src"]&&S["sap-system-src"][0];R["sap-system"]=T;delete S["sap-system"];if(typeof V==="string"){R["sap-system-src"]=V;delete S["sap-system-src"];}return(new Promise(function(W,X){if(A.absoluteUrlDefinedByUser(Q,P.systemAlias,P.systemAliasSemantics)){W(K);}else{s.spliceSapSystemIntoURI(Q,P.systemAlias,T,V,"URL",P.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,N).fail(X).done(function(Y){var Z=Y.toString();W(Z);});}})).then(function(W){var X=false,Y,Z=C.last("/core/navigation/flpURLDetectionPattern"),$=new RegExp(Z);if(S&&S.hasOwnProperty("sap-params-append")){delete S["sap-params-append"];X=true;}Y=A.getURLParsing().paramsToString(S);return $.test(W)||(X===true)?A.appendParametersToIntentURL(S,W):A.appendParametersToUrl(Y,W);},Promise.reject.bind(Promise)).then(function(W){["additionalInformation","applicationDependencies","systemAlias"].forEach(function(X){if(O.resolutionResult.hasOwnProperty(X)){R[X]=O.resolutionResult[X];}});R.url=W;R.text=O.title;R.applicationType="URL";return Promise.resolve(R);},Promise.reject.bind(Promise));}
var E={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(J){var K=J.inbound.hasOwnProperty("templateContext");return K?z.apply(null,arguments):D.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,enableWdaCompatibilityMode:C.last("/core/navigation/enableWdaCompatibilityMode"),generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:c,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:e,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:f,defaultFullWidthSetting:false}};
function F(){return Object.keys(E).map(function(J){return E[J];}).filter(function(J){return typeof J.easyAccessMenu==="object";});}
function G(){var J={};F().forEach(function(K){J[K.easyAccessMenu.intent]=K.easyAccessMenu.resolver;});return function(K,R){if(J[K]&&(!R||R!=="SAPUI5")){return J[K];}return null;};}
function I(J){if(!E[J]){return false;}return E[J].defaultFullWidthSetting;}
Object.defineProperty(E,"enum",{value:Object.keys(E).reduce(function(J,K){if(E[K].type){J[K]=E[K].type;}return J;},{})});var M={getEasyAccessMenuResolver:G(),getEasyAccessMenuDefinitions:F,getDefaultFullWidthSetting:I};Object.keys(M).forEach(function(J){Object.defineProperty(E,J,{value:M[J]});});return E;},true);
sap.ui.predefine('sap/ushell/CanvasShapesManager',["sap/ui/Device","sap/ui/core/theming/Parameters"],function(D,T){"use strict";var P=function(x,y){this.x=x||0;this.y=y||0;};
P.prototype.getDistance=function(p){var x=this.x-p.x,y=this.y-p.y;return Math.floor(Math.sqrt(x*x+y*y));};
P.prototype.getSegment=function(o){if(this.x<=o.x&&this.y<=o.y){return 1;}if(this.x<=o.x&&this.y>=o.y){return 2;}if(this.x>=o.x&&this.y>=o.y){return 3;}if(this.x>=o.x&&this.y<=o.y){return 4;}};
P.prototype.offset=function(o,O){this.x=this.x+o;this.y=this.y+O;};
var R=function(x,X,y,Y){this.x={min:x,max:X};this.y={min:y,max:Y};};var c=(window.innerWidth>0)?window.innerWidth:screen.width,a=(window.innerHeight>0)?window.innerHeight:screen.height,b={cpr1:new R(0,c/4,0,a/4),cpr2:new R(c/2,c,0,a/4),cpr3:new R(c/4,3*c/4,a*3/4,a)},m=function(){this.init();};m.prototype={radiusRange:{min:800,max:900},init:function(){this.Id="shell-shapes";var d={cpr1:b.cpr1,cpr2:b.cpr2,cpr3:b.cpr3},r,e,s,f,g;this.shapes=[];this.bIsDirty=true;for(g in d){r=Math.random(this.radiusRange.max-this.radiusRange.min)+this.radiusRange.min;e=this.getRandomPoint(d[g]);s=this._getSquarePoints(r,e);f=this._calculatebezierCurves(r,s);this.shapes.push({bezierCurves:f,centerPoint:e});}for(var h in this.shapes){var v=this._generateRandomAmorphousShapeValues();this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge0.edgeNum,v.edge0.xOffSet,v.edge0.yOffSet,v.edge0.xStretch);this.shapes[h]=this.makeAmorphousShape(this.shapes[h],v.edge1.edgeNum,v.edge1.xOffSet,v.edge1.yOffSet,v.edge1.xStretch);}sap.ui.getCore().attachThemeChanged(this.onThemeChanged.bind(this));D.resize.attachHandler(this.resizeHandler,this);},_generateRandomAmorphousShapeValues:function(){var v={edge0:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0},edge1:{edgeNum:0,xOffSet:0,yOffSet:0,xStretch:0}};var n=this._getRandomInt(0,3);for(var e in v){v[e].edgeNum=n;v[e].xOffSet=this._getRandomInt(200,400);v[e].yOffSet=this._getRandomInt(-200,-400);n+=this._getRandomInt(0,1)<0.5?-1:1;if(n===-1){n=3;}if(n===4){n=0;}}n=this._getRandomInt(0,1);if(n<0.5){n=n<0.25?0:1;v["edge"+n].xStretch=this._getRandomInt(0,200);}return v;},getPoint:function(x,y){return new P(x,y);},getRandomPoint:function(r){var x=Math.floor(Math.random()*(r.x.max-r.x.min)+r.x.min),y=Math.floor(Math.random()*(r.y.max-r.y.min)+r.y.min);return new P(x,y);},onThemeChanged:function(){var s=T.get("sapUshellShellBackgroundShapesColor");if(s&&s!=="transparent"){this.sShapesColor=s;this.bIsDirty=true;this.drawShapes();}},resizeHandler:function(){var d=document.getElementById(this.Id);if(d){d.width=window.innerWidth;d.height=window.innerHeight;this.bIsDirty=true;this.onThemeChanged();}},enableAnimationDrawing:function(e){this._enableDrawing=e;},makeAmorphousShape:function(s,d,x,y){var e,f,g;switch(d){case 0:e=s.bezierCurves[0].controlPoint1;f=s.bezierCurves[3].controlPoint2;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint1=g[0];s.bezierCurves[3].controlPoint2=g[1];break;case 1:e=s.bezierCurves[0].controlPoint2;f=s.bezierCurves[1].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[0].controlPoint2=g[0];s.bezierCurves[1].controlPoint1=g[1];break;case 2:e=s.bezierCurves[1].controlPoint2;f=s.bezierCurves[2].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[1].controlPoint2=g[0];s.bezierCurves[2].controlPoint1=g[1];break;case 3:e=s.bezierCurves[2].controlPoint2;f=s.bezierCurves[3].controlPoint1;g=this._rotatePoints(x,y,e,f);s.bezierCurves[2].controlPoint2=g[0];s.bezierCurves[3].controlPoint1=g[1];break;}return s;},_rotatePoints:function(d,e,f,g){var x,y,h=[];x=f.x+d;y=f.y+e;h.push(new P(x,y));x=g.x-d;y=g.y-e;h.push(new P(x,y));return h;},_getSquarePoints:function(r,d){var s=[];s[0]=new P(d.x+r,d.y);s[1]=new P(d.x,d.y-r);s[2]=new P(d.x-r,d.y);s[3]=new P(d.x,d.y+r);return s;},_getRandomInt:function(d,e){if(d==0&&e==1){return Math.random();}return Math.floor(Math.random()*(e-d+1))+d;},_calculatebezierCurves:function(r,s){var d=[],e,f,g,h;h=s[0];g=s[1];e=new P(h.x,h.y-r/2);f=new P(h.x-r/2,h.y-r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[1];g=s[2];e=new P(h.x-r/2,h.y);f=new P(h.x-r,h.y+r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[2];g=s[3];e=new P(h.x,h.y+r/2);f=new P(h.x+r/2,h.y+r);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});h=s[3];g=s[0];e=new P(h.x+r/2,h.y);f=new P(h.x+r,h.y-r/2);d.push({startPoint:h,endPoint:g,controlPoint1:e,controlPoint2:f});return d;},drawShapes:function(){var d=document.getElementById(this.Id);if(this.bIsDirty&&d&&d.getContext){var e=d.getContext("2d"),s,f,g,h;e.clearRect(0,0,c*2,a*2);if(!this.sShapesColor){this.sShapesColor=T.get("sapUshellShellBackgroundShapesColor");}if(this.sShapesColor&&this.sShapesColor!=="transparent"){for(var j=0;j<this.shapes.length;j++){e.beginPath();s=this.shapes[j].bezierCurves[0].startPoint;e.moveTo(s.x,s.y);for(var i=0;i<this.shapes[j].bezierCurves.length;i++){f=this.shapes[j].bezierCurves[i].endPoint;g=this.shapes[j].bezierCurves[i].controlPoint1;h=this.shapes[j].bezierCurves[i].controlPoint2;e.bezierCurveTo(Math.floor(g.x),Math.floor(g.y),Math.floor(h.x),Math.floor(h.y),Math.floor(f.x),Math.floor(f.y));}e.closePath();e.fillStyle=this.sShapesColor;e.fill();}}this.bIsDirty=false;}}};var C=new m();return C;},true);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher","sap/base/util/extend"],function(B,C,U,R,S,h,e){"use strict";var u;
U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};
var A=B.extend("AppInfo",{
constructor:function(c){B.call(this);this._oComponent=c;},
getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},
_getLocalized:function(t,r){var m=new R({bundleUrl:sap.ui.require.toUrl(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},
_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}
});
var H=B.extend("HeaderInfo",{
constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},
registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},
_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},
_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var E=this._aHierarchy[i],k=(E.id===this._oCurrentViewInfo.sViewId),K=(E.intent===s);if(k||K){n=false;E=this._updateHierarchyEntry(E);this._aHierarchy[i]=E;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){E.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},
_createHierarchyEntry:function(){var s="#"+h.getHash(),E={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return E;},
_updateHierarchyEntry:function(E){E.id=this._oCurrentViewInfo.sViewId;E.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;E.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return E;},
_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=="title"){delete O[p];}}});return o;}
});
var F=B.extend("sap.ushell.Fiori20Adapter",{
constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},
init:function(){if(!S){return;}var c=e({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);},
destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},
_onViewChange:function(E){this._oHeaderInfo.registerView(E.getParameters());}
});
F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};
return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry","sap/base/Log","sap/base/util/Version","sap/base/util/isEmptyObject"],function(U,a,F,c,S,L,V,b){"use strict";var d={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_ALLOWLIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(C){var o=this._getURLParamConfiguration();if(!o){o=this._getMetadataConfiguration(C);}if(!o){o=this._getDefaultConfiguration(C);}o.iSearchDepth=o.iSearchDepth||d.I_DEFAULT_SEARCH_DEPTH;if((typeof o.iSearchDepth==="string")&&!isNaN(o.iSearchDepth)){o.iSearchDepth=parseInt(o.iSearchDepth,10);}return o;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(d.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),e,s;if(typeof(u)==="boolean"){e=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(e===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:e,bMoveTitle:s?s.indexOf("title")>-1:e,bHideBackButton:s?s.indexOf("back")>-1:e,bCollapseHeader:s?s.indexOf("collapse")>-1:e,bHierarchy:s?s.indexOf("hierarchy")>-1:e};},_getMetadataConfiguration:function(C){var A=C.getMetadata("config").getConfig(d.S_FIORI20ADAPTER_METADATA_PARAM_NAME),e,f;if(typeof(A)==="boolean"){e=A;}else if((typeof A==="object")&&!b(A)){f=A;}if(!f&&(e===undefined)){return;}return{bStylePage:f?this._isSgnTrue(f.style):e,bMoveTitle:f?this._isSgnTrue(f.title):e,bHideBackButton:f?this._isSgnTrue(f.back):e,bCollapseHeader:f?this._isSgnTrue(f.collapse):e,bHierarchy:f?this._isSgnTrue(f.hierarchy):e,bLateAdaptation:f?this._isSgnTrue(f.lateAdaptation):d.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(C){var e=this._hasMinVersionSmallerThan(C,"1.42")&&this._isAllowed(C);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var u=new U(window.location.href),A=u.mParams&&u.mParams[p];return A&&(A.length>0);},_isAllowed:function(C){var s=C.getMetadata().getName();for(var i=0;i<d.A_ALLOWLIST.length;i++){var n=d.A_ALLOWLIST[i].substring(0,d.A_ALLOWLIST[i].length-2);if(this._isPrefixedString(s,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(C,v){var i=C.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new V(i.dependencies.minUI5Version);m=M.compareTo(new V(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};
a._fnOnInstanceInitialized=function(C){var o=C.getAggregation("rootControl");if(!o||o.getId()==="navContainerFlp"||C.getId().indexOf("application-")!==0){return;}var e=d.getConfiguration(C);if(!d._isAdaptationRequired(e)){return;}if(!c.service||!S||typeof S.get!=="function"){L.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var D={onBeforeRendering:function(){o.removeEventDelegate(D);var s=S.get("sap.ushell.ui5service.ShellUIService"),f=s&&s.createInstance();if(!s||!f){L.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}f.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(o,C,e,s);}},function(E){L.warning("Fiori20Adapter not loaded as ShellUIService is not available",E,"sap.ushell.Fiori20AdapterTest");});}};o.addEventDelegate(D);};
});
sap.ui.predefine('sap/ushell/Layout',["sap/ushell/Config","sap/ui/Device","sap/ui/thirdparty/jquery"],function(C,D,q){"use strict";var a=function(s){this.init(s);};a.prototype={settings:null,tileWidth:0,tileHeight:0,tileMargin:0,curTouchMatrixCords:null,tilesInRow:null,groupsList:null,item:null,matrix:null,tiles:null,collisionLeft:false,startGroup:null,currentGroup:null,endGroup:null,init:function(s){this.curTouchMatrixCords={column:null,row:null};this.endGroup=null;this.groupSwitched=false;this.item=null;this.matrix=null;this.tiles=null;this.collisionLeft=false;this.startArea=null;this.currentArea=null;this.endArea=undefined;this.startGroup=null;this.draggedTileDomRef=null;this.sDragStartGroupModelId=undefined;this.sDragTargetGroupModelId=undefined;this.currentGroup=null;this.groupsList=null;this.allGroups=null;this.settings=this.settings||s;q.extend(this,this.settings);this.tileWidth=this.thisLayout.styleInfo.tileWidth;this.tileHeight=this.thisLayout.styleInfo.tileHeight;this.tileMargin=this.thisLayout.styleInfo.tileMarginWidth;this.aExcludedControlClass=this.aExcludedControlClass||[];this.reorderElementsCallback=this.reorderElementsCallback||function(){};this.rightToLeft=sap.ui.getCore().getConfiguration().getRTL();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;this.collidedLinkAreas=[];this.intersectedLink=null;this.aLinksBoundingRects=[];this.intersectedLinkPlaceHolder=undefined;this.isLinkPersonalizationSupported=this.thisLayout.oLaunchPageService?this.thisLayout.oLaunchPageService.isLinkPersonalizationSupported():null;this.isLinkMarkerShown=false;this.bIsTabBarCollision=false;},moveDraggable:function(m,c,t){var o=this.getCollisionObject(m,c,t),n;if(o){this._toggleAnchorItemHighlighting(false);if(o.collidedObjectType!=="TabBar"){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();this.bIsTabBarCollision=false;}else{this.bIsTabBarCollision=true;this._toggleTabBarOverflowArrows(true);this.removePlaceHolders();this._handleTabBarCollision(m,t);}if(this.isLinkPersonalizationSupported&&o.collidedObjectType==="Group-link"){n=this._handleLinkAreaIntersection(o.collidedObject,m,c);}else if(o.collidedObjectType==="Group-tile"){n=this._handleTileAreaIntersection(o.collidedObject,m,c);this._toggleTileCloneHoverOpacity(false);}if(n||this.endAreaChanged){this.handlePlaceHolder(o.collidedObject);}}else{this._removeEmptyLinkAreaMark();}},_toggleAnchorItemHighlighting:function(h){if(this.targetGroup){this.targetGroup.classList.toggle("sapUshellAnchorItemDropCollision",h);this.targetGroup.firstElementChild.classList.toggle("sapUshellAnchorInnerMarker",h);}},removePlaceHolders:function(){this._removeLinkDropMarker();this._removeEmptyLinkAreaMark();this._handleChangedGroup(this.currentGroup);},handlePlaceHolder:function(c){if(this.endArea==="tiles"){if(this.endAreaChanged){this._removeLinkDropMarker();}this.handlePlaceholderChange();}else if(this.endArea==="links"&&this.intersectedLink){this._changeLinkPlaceholder(this.intersectedLink,c);if(this.endAreaChanged){this.handlePlaceholderChange();}}},switchLinkWithClone:function(i){if(i){this.intersectedLinkPlaceHolder=i.getDomRef().cloneNode(true);this.intersectedLinkPlaceHolder.id="sapUshellIntersectedLinkPlaceHolder";q(i.getDomRef()).replaceWith(this.intersectedLinkPlaceHolder);}},_removeLinkDropMarker:function(){q("#sapUshellLinkDropMarker").remove();this.isLinkMarkerShown=false;},saveLinkBoundingRects:function(e){var l=sap.ui.getCore().byId(e.id);this.draggedLinkBoundingRects=l.getBoundingRects();},_getMarkerOffset:function(r,c){var n=q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().left,d=q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().top,e=this.rightToLeft?20:-1,f=this.rightToLeft?42:21,g=r[r.length-1].offset.x-n+r[r.length-1].width-e,l=r[this.rightToLeft?r.length-1:0].offset.x-n-f,t=r[this.rightToLeft?r.length-1:0].offset.y-d,h=r[this.rightToLeft?0:r.length-1].offset.y-d;if(q("body.sapUiSizeCompact").length){t-=6;h-=6;}if(this.rightToLeft){if(q(c.getDomRef()).find(".sapUshellLineModeContainer")[0].getBoundingClientRect().right-r[r.length-1].offset.x-r[r.length-1].width<16){g=g-8;}}else if(l<16){l=0;}return{right:g,left:l,topLeft:t,topRight:h};},_changeLinkPlaceholder:function(l,c){var o=this.aLinksBoundingRects[l.link.getId()],d=o.left,t=o.topLeft,e=o.topRight,r=o.right;if(q(c.getDomRef()).find("#sapUshellLinkDropMarker").length===0){this._removeLinkDropMarker();q(c.getDomRef()).find(".sapUshellLinksInnerContainer").prepend(this.LinkDropMarker);}q(this.LinkDropMarker).css({left:l.leftSide?d:r,top:l.leftSide?t:e});this.isLinkMarkerShown=true;},showTilePlaceholder:function(c,t,T){var d,r=this.curTouchMatrixCords.row,e=this.curTouchMatrixCords.column;this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;q(this.domRef).show();this.removeExcludedElementsFromMatrix(this.aExcludedControlClass);d=this.tiles||this.thisLayout.getGroupTiles(this.endGroup).slice(0);if(this.matrix[r]&&typeof this.matrix[r][e]==="object"){this.handleMatrixCollision(d,c,t,T);return;}this._handleMoveOutOfBorders(d,c);},removeTilePlaceholder:function(){this.domRef=this.item.getDomRef()?this.item.getDomRef():this.domRef;var c=this.thisLayout.getGroupTiles(this.currentGroup);c=c.slice(0);if(this.startArea!=="links"&&c.indexOf(this.item)>-1){c.splice(c.indexOf(this.item),1);}if(!q(this.domRef.parentNode).hasClass("sapUshellLinksInnerContainer")){q(this.domRef).hide();}this.thisLayout.initGroupDragMode(this.endGroup);var d=this.thisLayout.organizeGroup(c);this.thisLayout.renderLayoutGroup(this.currentGroup,d);},handlePlaceholderChange:function(){var c=this.currentGroup,t=(this.endGroup!==this.currentGroup),T=this.endAreaChanged&&this.endArea==="links",i=this.thisLayout.isTabBarActive()&&this.groupSwitched;this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);this.matrix=this.thisLayout.organizeGroup(this.tiles);if(i){this.handleTabBarSwitch(c);}if(t){this._handleChangedGroup(c);}else if(T){this.removeTilePlaceholder();}if(!T){this.showTilePlaceholder(c,t,T);}},handleMatrixCollision:function(t,c,T,d){var r,e,f,n;r=this.matrix[this.curTouchMatrixCords.row][this.curTouchMatrixCords.column];e=t.indexOf(r);f=t.indexOf(this.item);if(this.rightToLeft){this.collisionLeft=!this.collisionLeft;}if(f>-1&&f<e){r=t[e+1];}if(r===this.item){if(T||d){t.splice(t.indexOf(this.item),1);}this._handleTileReplace(t,c);return;}n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n&&!this.isLinkMarkerShown){this._handleTileReplace(n,c);}},handleTabBarSwitch:function(c){this._appendTargetGroupDomRefWithDraggedTile();if(!this.item.getDomRef()){this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainersDomRefs()[0].appendChild(this.item.getDomRef());}this.currentGroup=this.endGroup;var d=this.thisLayout.getGroupTiles(c);this.thisLayout.initGroupDragMode(this.endGroup);var e=this.thisLayout.organizeGroup(d);this.thisLayout.renderLayoutGroup(c,e);},_handleMoveOutOfBorders:function(t,c){var m=this.findTileToPlaceAfter(this.matrix,t),r;if(t[m+1]==this.item){return;}if(t[m+1]){r=t[m+1];}else if(this.currentGroup.getShowPlaceholder()){r=t[0];}var n=this.changeTilesOrder(this.item,r,t,this.matrix);if(n){this._handleTileReplace(n,c);}},_handleChangedGroup:function(c){var d=this.thisLayout.getGroupTiles(this.currentGroup),i;if(this.currentGroup===this.startGroup&&(this.startArea==="tiles"||this.intersectedLinkPlaceHolder)){d=d.slice(0);if(d.indexOf(this.item)>-1){d.splice(d.indexOf(this.item),1);}}if(this.startGroup===this.endGroup&&this.startArea==="tiles"){this.tiles.splice(this.tiles.indexOf(this.item),1);}i=this.item.getDomRef()||this.domRef;if(this.startArea==="links"&&!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea==="tiles"){this.endGroup.getInnerContainersDomRefs()[0].appendChild(i);}if(!q(i.parentNode).hasClass("sapUshellLinksInnerContainer")){q(i).hide();}this.currentGroup=this.endGroup;this.thisLayout.initGroupDragMode(this.endGroup);var e=this.thisLayout.organizeGroup(d);this.thisLayout.renderLayoutGroup(c,e);},_handleTileReplace:function(t,c){this.reorderElementsCallback({currentGroup:c,endGroup:this.endGroup,tiles:t,item:this.item});this.reorderTilesView(t,this.endGroup);this.reorderTilesInDom();this.thisLayout.renderLayoutGroup(this.endGroup,this.matrix);},_getIntersectedLink:function(c,m,d){var e=q(".sapUshellLinkTile")[0];if(!e){return;}var f=c.getDomRef().querySelector(".sapUshellLineModeContainer").getBoundingClientRect(),g=!q("body.sapUiSizeCompact").length,r=Math.floor((d-f.top)/(g?45:31)),h=this.collidedLinkAreas[c.getId()],i;if(this.rightToLeft){i=Math.floor((f.right-m)/20);}else{i=Math.floor((m-f.left)/20);}if(r<h.length&&h[r]&&i<h[r].length){return h[r][i];}else if(h.length){var l=h.length;if(r>=l){r=l-1;}if(!this.collidedLinkAreas[c.getId()][r]){return;}i=this.collidedLinkAreas[c.getId()][r].length;return this.collidedLinkAreas[c.getId()][r][i-1];}},_mapGroupLinks:function(c){var g=c.getId(),l,r,R=0;if(!this.collidedLinkAreas[g]||this.bElapseGroupLinksMap){this.bElapseGroupLinksMap=false;var d=c.getLinks(),e=[];this.collidedLinkAreas.push(c.getId());d.forEach(function(i){r=this._getLinkBoundingRects(i,c);r.forEach(function(o){if(o.offset.y>l){R++;}l=o.offset.y;this._addLinkToHashMap(e,c,o,R,i);}.bind(this));}.bind(this));this.collidedLinkAreas[g]=e;}},_getLinkBoundingRects:function(l,c){var r=l.getBoundingRects();if(this.item&&this.item.getId()===l.getId()){r=this.draggedLinkBoundingRects;}if(r.length){this.aLinksBoundingRects[l.getId()]=this._getMarkerOffset(r,c);}return r;},_addLinkToHashMap:function(c,d,r,e,l){if(!c[e]){c[e]=[];}for(var i=0;i<=(r.width+20)/20;i++){var f={link:l,leftSide:!this.rightToLeft};if(i>((r.width+20)/20)/2){f.leftSide=this.rightToLeft;}c[e].push(f);}},_isLinkAreaIntersection:function(c,m,d){var i=c.getInnerContainersDomRefs();if(i[1]){return this._isElementCollideByGivenCordinates(i[1],m,d);}return false;},_isLinksEquals:function(l,o){if(!l||!o){return false;}if(l.link.getId()!==o.link.getId()){return false;}return l.link.leftSide===o.link.leftSide;},_toggleTileCloneHoverOpacity:function(v){q(".sapUshellTile-clone").toggleClass("sapUshellTileDragOpacity",v);},_handleLinkAreaIntersection:function(c,m,d){var i,e=false;if(this.isLinkPersonalizationSupported){this._toggleTileCloneHoverOpacity(true);}this._mapGroupLinks(c);this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));i=this._getIntersectedLink(c,m,d);if(i){e=this._isLinksEquals(this.intersectedLink,i);this.intersectedLink=i;}else{this.removeTilePlaceholder();}this._markEmptyLinkArea(c);return e;},_markEmptyLinkArea:function(c){if(!c.getLinks().length){q(c.getDomRef()).find(".sapUshellLineModeContainer").addClass("sapUshellEmptyLinkAreaHover");}},_removeEmptyLinkAreaMark:function(){q(".sapUshellLineModeContainer").removeClass("sapUshellEmptyLinkAreaHover");},reorderTilesInDom:function(){var j=this.item.getDomRef()?this.item.getDomRef():this.domRef,s=q(j).index(),c=q(j).closest(".sapUshellTilesContainer-sortable"),d=this.calcDestIndexInGroup(),e=q(this.endGroup.getDomRef()).find(".sapUshellTilesContainer-sortable"),f=e.find(".sapUshellTile");if(this.startArea==="tiles"){c.find(f[s]).remove();}else if(!this.intersectedLinkPlaceHolder){this.switchLinkWithClone(this.item);}if(this.endArea!=="links"){f=e.find(".sapUshellTile");if(C.last("/core/home/gridContainer")){if(e[0].firstElementChild.children.length){e[0].firstElementChild.insertBefore(j,f[d]);}else{e[0].firstElementChild.appendChild(j);}}else{e[0].insertBefore(j,f[d]);}}},isLinkIntersected:function(){return this.intersectedLink!==undefined;},calcDestIndexInGroup:function(){var l,t=0,i,j,I=false;for(i=0;i<this.matrix.length&&!I;i++){for(j=0;j<this.matrix[i].length;j++){if(this.matrix[i][j]!==undefined){if(this.item.sId!==this.matrix[i][j].sId){if(l!==this.matrix[i][j].sId){l=this.matrix[i][j].sId;t++;}}else{I=true;break;}}}}return t;},layoutStartCallback:function(e){this.init();this.item=sap.ui.getCore().byId(e.id);this.tilesInRow=this.thisLayout.getTilesInRow();this.groupsList=this.thisLayout.getGroups();this.allGroups=this.thisLayout.getAllGroups();this.startGroup=this.currentGroup=this.item.getParent();if(C.last("/core/home/gridContainer")&&this.startGroup.getParent().getId()!=="dashboardGroups"){this.startGroup=this.currentGroup=this.startGroup.getParent();}this.groupSwitched=false;this.startArea=this.isLinkPersonalizationSupported&&this.item.getMode&&this.item.getMode()==="LineMode"?"links":"tiles";this.currentArea=this.startArea;this.thisLayout.initDragMode();if(this.isLinkPersonalizationSupported){this.LinkDropMarker=this._getLinkDropMarkerElement();}},_getLinkDropMarkerElement:function(){var e=document.createElement("DIV"),c=document.createElement("DIV"),d=document.createElement("DIV");e.setAttribute("id","sapUshellLinkDropMarker");c.setAttribute("id","sapUshellLinkDropMarkerDot");d.setAttribute("id","sapUshellLinkDropMarkerLine");e.appendChild(c);e.appendChild(d);return e;},isAreaChanged:function(){return(this.currentArea&&this.endArea)?this.currentArea!==this.endArea:false;},isOriginalAreaChanged:function(){return(this.startArea&&this.endArea)?this.startArea!==this.endArea:false;},_getDestinationIndex:function(t){if(t==="links"){if(this.intersectedLink){var i=this.endGroup.getLinks().indexOf(this.intersectedLink.link),d=this.endGroup.getLinks().indexOf(this.item);if(this.intersectedLink.leftSide){i=this.rightToLeft?i+1:i-1;}if(d<0||d>i){i=this.rightToLeft?i:i+1;}return i;}return this.endGroup.getLinks().length;}return this._getDestinationTileIndex();},layoutEndCallback:function(){var r,s,d;this._removeLinkDropMarker();if(this.endArea!=="links"&&!this.tiles){return{tile:this.item};}s=this._getDragSourceGroup();if(!b.isTabBarActive()||!this.bIsTabBarCollision){this.targetGroup="";}d=this._getDestGroupObject(this.targetGroup);r={srcGroup:s,dstGroup:d,dstGroupData:this._getDropTargetGroup(),tile:this.item,dstTileIndex:this._getDestinationIndex(this.endArea),tileMovedFlag:true,srcArea:this.startArea,dstArea:this.bIsTabBarCollision?undefined:this.endArea};return r;},_getDestGroupObject:function($){return $?sap.ui.getCore().byId(($.getAttribute("id"))):this.endGroup;},_getDragSourceGroup:function(){var s;s=this.startGroup;if(this.thisLayout.isTabBarActive()&&(this.groupSwitched===true)){s={groupId:this.sDragStartGroupModelId};}return s;},_getDropTargetGroup:function(){var d;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d={groupId:this.sDragTargetGroupModelId};}else{d=this.endGroup;}return d;},_getDestinationTileIndex:function(){var d,m;if(this.thisLayout.isTabBarActive()&&this.thisLayout.isOnTabBarElement()){d=this._getDropTargetGroup().groupId;m=this._getModelGroupById(d);return m.tiles.length;}return this.tiles.indexOf(this.item);},compareArrays:function(c,d){if(c.length!==d.length){return false;}for(var i=0;i<c.length;i++){if(c[i]!==d[i]){return false;}}return true;},reorderTilesView:function(t){this.tiles=t;this.matrix=this.thisLayout.organizeGroup(t);},changeTilesOrder:function(i,r,t,m){var n=t.slice(0),d=n.indexOf(i),c,e,f;if(d>-1){n.splice(d,1);}if(r){n.splice(n.indexOf(r),0,this.item);}else{n.push(i);}if(this.currentGroup==this.endGroup){if(this.compareArrays(t,n)){return false;}c=this.thisLayout.organizeGroup(n);e=this.thisLayout.getTilePositionInMatrix(i,m);f=this.thisLayout.getTilePositionInMatrix(i,c);if((e.row==f.row)&&(e.col==f.col)){return false;}}this.tiles=n;this.currentGroup=this.endGroup;return n;},setMatrix:function(n){this.matrix=n;},findTileToPlaceAfter:function(c,t){var x=(this.thisLayout.rightToLeft)?0:this.curTouchMatrixCords.column,I=(this.thisLayout.rightToLeft)?1:-1,m=0,i,j,d,r=c[0].length;for(i=this.curTouchMatrixCords.row;i>=0;i--){for(j=x;j>=0&&j<r;j+=I){if(!c[i]||typeof c[i][j]!=="object"){continue;}d=t.indexOf(c[i][j]);m=d>m?d:m;}x=c[0].length-1;}return m||(t.length-1);},_isElementCollideByGivenCordinates:function(e,m,c){var t=e.getBoundingClientRect(),i=false,d=false;if(t.height===0&&!e.classList.contains("sapUshellNoLinksAreaPresent")){t=e.parentNode.getBoundingClientRect();}i=t.right>=m&&t.left<=m;d=t.bottom>=c&&t.top<=c;return i&&d;},_getMatrixCordinatesOfTouchedTile:function(c,m,d){var e=q.extend({},this.curTouchMatrixCords),t=c.getInnerContainersDomRefs()[0].getBoundingClientRect();this.matrix=this.matrix||this.thisLayout.organizeGroup(this.thisLayout.getGroupTiles(c));var o=this.rightToLeft?(t.right+(-1)*m):(t.left*(-1)+m),f=(t.top*(-1)+d)/(this.tileHeight+this.tileMargin),g=o/(this.tileWidth+this.tileMargin);e={row:Math.floor(f),column:Math.floor(g)};return e;},_getCollidedGroup:function(m,c){for(var i=0;i<this.groupsList.length;i++){var g=this.groupsList[i],d=g.getInnerContainersDomRefs();if(!d){continue;}for(var j=0;j<d.length;j++){if(d[j]&&this._isElementCollideByGivenCordinates(d[j],m,c)){var e=!g.groupHasTiles();for(var f=this.groupsList.length-1;f>=i;f--){if(e){break;}if(!this.groupsList[f].groupHasTiles()){var Q=this.groupsList[f].$();if(!Q.hasClass("sapUshellInDragMode")){continue;}Q.find(".sapUshellInner").removeAttr("style");}}return g;}}}},_handleTileAreaIntersection:function(c,m,d){var e=this._getMatrixCordinatesOfTouchedTile(c,m,d);if((c===this.endGroup)&&(e.column===this.curTouchMatrixCords.column)&&(e.row===this.curTouchMatrixCords.row)){return false;}if(this.rightToLeft){this.collisionLeft=(this.curTouchMatrixCords.column-e.column)>0;}else{this.collisionLeft=(e.column-this.curTouchMatrixCords.column)>0;}if(e.column===this.curTouchMatrixCords.column){this.collisionLeft=false;}q.extend(this.curTouchMatrixCords,e);return true;},_getGroupCollisionObject:function(m,c){var d,l;d=this._getCollidedGroup(m,c);if(!d||d.getIsGroupLocked()){return undefined;}l=this._isLinkAreaIntersection(d,m,c);this.endGroup=d;if(!this.tiles){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}this.endArea=l?"links":"tiles";this.endAreaChanged=this.isAreaChanged();this.currentArea=this.endArea;return{collidedObjectType:l?"Group-link":"Group-tile",collidedObject:d};},getCollisionObject:function(m,c){if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}if(this.thisLayout.isTabBarActive()&&this._isTabBarCollision(c)){return{collidedObjectType:"TabBar"};}return this._getGroupCollisionObject(m,c);},_isTabBarScrollArea:function(m){var A=q("#anchorNavigationBar").height()||0,o=q("#anchorNavigationBar").offset(),i=o?o.top:0,y=A+i;return A>0&&(m>y)&&(m<y+30);},_cancelLongDropTimmer:function(){clearTimeout(this.thisLayout.oTabBarItemClickTimer);},_isTabBarCollision:function(m){var A=q("#anchorNavigationBar").height()||0,o=q("#anchorNavigationBar").offset(),i=o?o.top:0;return(m<A+i&&m>i);},_handleTabBarCollision:function(m,t){var c=this,h=this._getTabBarHoverItem(m,t),T,H,i,d,o;if(b.isTabBarActive()){this._toggleTileCloneHoverOpacity(true);}this.lastHighlitedTabItem=h;this.thisLayout.setOnTabBarElement(true);i=this._handleOverflowCollision(m);if(i){return;}if(!h){return;}this.targetGroup=h;this.sDragTargetGroupModelId=h.getAttribute("modelGroupId");T=this._getTabBarGroupIndexByModelId(this.sDragTargetGroupModelId);if(this.thisLayout.oTabBarItemClickTimer){clearTimeout(this.thisLayout.oTabBarItemClickTimer);}o=this._getModelGroupById(this._getDropTargetGroup().groupId);if(o.isGroupLocked){this._toggleTabBarOverflowArrows(false);this.thisLayout.setOnTabBarElement(false);this._resetOverFlowButtonElements();return;}this._toggleAnchorItemHighlighting(true);if(!this.sDragStartGroupModelId){this.sDragStartGroupModelId=this.startGroup.getGroupId();}this.thisLayout.oTabBarItemClickTimer=setTimeout(function(){var e=c._getSelectedTabBarItem();if(c.lastHighlitedTabItem===e){return;}c.draggedTileModelPath=c.item.getBindingContext().getPath();c._prepareDomForDragAndDrop();c.startGroup.removeAggregation("tiles",c.item,true);d=c.sDragStartGroupModelId===c.sDragTargetGroupModelId;c.item.getBindingContext().oModel.setProperty(c.draggedTileModelPath+"/draggedInTabBarToSourceGroup",d);c.groupSwitched=true;sap.ui.getCore().getEventBus().publish("launchpad","switchTabBarItem",{iGroupIndex:T});var f=c.thisLayout.getGroups();c.endGroup=f[0];c.bElapseGroupLinksMap=true;},800);if((this.tiles===null)&&(this.endGroup)){this.tiles=this.thisLayout.getGroupTiles(this.endGroup).slice(0);}H=q(".sapUshellTabBarHoverOn");H.removeClass("sapUshellTabBarHoverOn");h.classList.add("sapUshellTabBarHoverOn");return true;},_prepareDomForDragAndDrop:function(){if(D.system.tablet){var c=this.item.$().clone();var $=this.item.$();var d=$.parent();this.origItemId=$.attr("id");this.origItemDataSapUi=$.attr("data-sap-ui");$.removeAttr("id").removeAttr("data-sap-ui");$.hide();c.hide();q("#dashboardGroups").parent().append($);d.append(c);this.draggedTileDomRef=$.get(0);}else if(!this.draggedTileDomRef){this.draggedTileDomRef=this.item.getDomRef();}},_appendTargetGroupDomRefWithDraggedTile:function(){if(!this.item.getDomRef()){if(D.system.tablet){q(this.draggedTileDomRef).attr("id",this.origItemId);q(this.draggedTileDomRef).attr("data-sap-ui",this.origItemDataSapUi);q(this.draggedTileDomRef).show();}this.endGroup.getInnerContainerDomRef().appendChild(this.draggedTileDomRef);}else{this.endGroup.getInnerContainerDomRef().appendChild(this.item.getDomRef());if(D.system.tablet){q(this.item.getDomRef()).show();}}},_getSelectedTabBarItem:function(){return q(".sapUshellAnchorItemSelected")[0];},_getTabBarGroupIndexByModelId:function(g){var i,t;for(i=0;i<this.allGroups.length;i++){t=this.allGroups[i].groupId;if(g===t){return i;}}},_getModelGroupById:function(g){var m=this.thisLayout.getAllGroups(),i,t,T;for(i=0;i<m.length;i++){t=m[i];T=t.groupId;if(T===g){return t;}}},_handleOverflowCollision:function(m){var A=sap.ui.getCore().byId("anchorNavigationBar"),o=this._calculateOverflowButtonSideCollision(m);if(o=="right"){if(!this.tabBarArrowCollisionRight){A._scrollToGroupByGroupIndex(A.anchorItems.length-1,5000);this.tabBarArrowCollisionRight=true;}return true;}else if(o=="left"){if(!this.tabBarArrowCollisionLeft){A._scrollToGroupByGroupIndex(0,5000);this.tabBarArrowCollisionLeft=true;}return true;}this._resetOverFlowButtonElements();return false;},_calculateOverflowButtonSideCollision:function(m){var c=q(".sapUshellAnchorRightOverFlowButton"),d=c.offset().left,e=q(".sapUshellAnchorItemOverFlow"),f=e.offset().left,g=q(".sapUshellAnchorLeftOverFlowButton"),h=g.offset().left,i=32,j=q("#anchorNavigationBar"),k=j.offset().left;if(m>d&&m<f){return"right";}if(m>k&&(m<h+i)){return"left";}},_resetOverFlowButtonElements:function(){var t=D.system.tablet,c=q(t?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems");c.stop();this.tabBarArrowCollisionRight=false;this.tabBarArrowCollisionLeft=false;},_toggleTabBarOverflowArrows:function(s){var c=q(".sapUshellAnchorRightOverFlowButton"),d=q(".sapUshellAnchorLeftOverFlowButton");d.toggleClass("sapUshellTabBarOverflowButton",s);c.toggleClass("sapUshellTabBarOverflowButton",s);},_getTabBarHoverItem:function(m,t){var n,l,h,T,H;l=q(".sapUshellAnchorItem:not(.sapUshellShellHidden)").eq(0).offset().left;if(m-l<=0){return;}n=Math.round((m-l)/10);if(n>=t.length){n=t.length-1;}h=t[n];T=q(".sapUshellAnchorItem");H=T[h];return H;},removeExcludedElementsFromMatrix:function(e){if(!e.length){return;}if(!this.matrix){return;}var n=this.matrix.map(function(r){return r.map(function(i){var c=e.some(function(d){return i instanceof d;});return(c)?undefined:i;});});this.setMatrix(n);},setExcludedControl:function(c){if(c){this.aExcludedControlClass.push(c);}},setReorderTilesCallback:function(f){if(typeof f==="function"){this.reorderElementsCallback=f;}}};var L=function(){};L.prototype={_initDeferred:q.Deferred(),init:function(c){var t=function(){if(this.container&&this.container.id&&this.container.id.includes("destroyed")){return;}var s=this.getStyleInfo(this.container);if(s.tileWidth>0){this.isInited=true;this.reRenderGroupsLayout();this.layoutEngine=new a({thisLayout:this});this._initDeferred.resolve();return;}setTimeout(t,100);}.bind(this);this.cfg=c||this.cfg;this.minTilesinRow=2;this.container=this.cfg.container||document.getElementById("dashboardGroups");this.oTabBarItemClickTimer=new Date();this.bTabBarModeActive=false;this.bOnTabBarElement=false;if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;t();}.bind(this));}else{t();}sap.ui.getCore().getEventBus().subscribe("launchpad","tabBarChange",this._onTabBarChange,this);return this.getInitPromise();},setOnTabBarElement:function(o){this.bOnTabBarElement=o;},isOnTabBarElement:function(){return this.bOnTabBarElement;},_onTabBarChange:function(c,e,d){if(d==="tabs"){this.bTabBarModeActive=true;}else{this.bTabBarModeActive=false;}},tabBarTileDropped:function(){if(this.oTabBarItemClickTimer){clearTimeout(this.oTabBarItemClickTimer);}},getInitPromise:function(){return this._initDeferred.promise();},getLayoutEngine:function(){return this.layoutEngine;},getStyleInfo:function(c){var t=document.createElement("div"),d=c.getAttribute("id");c=d?document.getElementById(d):c;t.className="sapUshellTile";var s=C.last("/core/home/sizeBehavior");if(s==="Small"){t.classList.add("sapUshellSmall");}t.style.position="absolute";t.style.visibility="hidden";c.appendChild(t);var e=window.getComputedStyle(t);var f=window.getComputedStyle(c);var i={tileMarginHeight:parseFloat(e.marginBottom,10)+parseFloat(e.marginTop,10),tileMarginWidth:parseFloat(e.marginLeft,10)+parseFloat(e.marginRight,10),tileWidth:t.offsetWidth,tileHeight:t.offsetHeight,containerWidth:(f.width?parseInt(f.width,10):c.offsetWidth)};c.removeChild(t);return i;},getGroups:function(){return this.cfg.getGroups();},getAllGroups:function(){return this.cfg.getAllGroups?this.cfg.getAllGroups():[];},isTabBarActive:function(){return this.cfg.isTabBarActive?this.cfg.isTabBarActive():false;},getTilesInRow:function(){return this.tilesInRow;},setTilesInRow:function(t){this.tilesInRow=t;},checkPlaceForTile:function(t,m,c,l,i){if(typeof m[c.y]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y+1]==="undefined"){m.push(new Array(m[0].length));}if(typeof m[c.y][c.x]!=="undefined"){return false;}var p=q.extend({},c);if(i||(t&&t.getLong&&!t.getLong())){return[p];}var d=[p];if(t&&t.getLong&&t.getLong()){if((c.x+1)>=m[0].length||(typeof m[p.y][p.x+1]!=="undefined")){return false;}d.push({y:p.y,x:p.x+1});}return d;},placeTile:function(t,m,c){for(var i=0;i<c.length;i++){m[c[i].y][c[i].x]=t;}},getTilePositionInMatrix:function(t,m){for(var r=0;r<m.length;r++){for(var c=0;c<m[0].length;c++){if(m[r][c]===t){return{row:r,col:c};}}}return false;},fillRowsInLine:function(m,t,r,i){if(!t.length){return 0;}var c;for(var j=0;j<m[0].length&&t.length;j++){c=this.checkPlaceForTile(t[0],m,{x:j,y:r},i);if(c){this.placeTile(t[0],m,c);t.shift();}}},organizeGroup:function(t,I){var c=t.slice(0);var d=[];var e=0;d.push(new Array(I?Math.floor(this.tilesInRow/2):this.tilesInRow));while(c.length){this.fillRowsInLine(d,c,e,I);e++;}if(this.rightToLeft){for(var i=0;i<d.length;i++){d[i].reverse();}}d=this.cleanRows(d);return d;},cleanRows:function(t){var d=false;for(var r=t.length-1;r>0&&!d;r--){for(var c=0;c<t[r].length&&!d;c++){if(typeof t[r][c]==="object"){d=true;}}if(!d){t.pop();}}return t;},setGroupsLayout:function(g,m){if(g.getIsGroupLocked()&&m.length>0){var p=g.getDomRef().parentElement;g.getDomRef().style.width="";p.style.width="";p.style.display="";}},calcTilesInRow:function(c,t,d){var e=Math.floor(c/(t+d));e=(e<this.minTilesinRow?this.minTilesinRow:e);return e;},getGroupTiles:function(g){var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return t;},reRenderGroupsLayout:function(g){if(!this.isInited){return;}var s=this.getStyleInfo(this.container);if(!s.tileWidth){return;}this.styleInfo=s;this.tilesInRow=this.calcTilesInRow(s.containerWidth,s.tileWidth,s.tileMarginWidth);g=g||this.getGroups();for(var i=0;i<g.length;i++){if(g[i].getDomRef&&!g[i].getDomRef()){continue;}var t=this.getGroupTiles(g[i]);var c=this.organizeGroup(t);this.setGroupsLayout(g[i],c);}},initDragMode:function(){this.initGroupDragMode(this.layoutEngine.currentGroup);},endDragMode:function(){var g=this.getGroups();for(var i=0;i<g.length;i++){var c=g[i].$();if(!c.hasClass("sapUshellInDragMode")){continue;}c.removeClass("sapUshellInDragMode");var t=this.getGroupTiles(g[i]);for(var j=0;j<t.length;j++){t[j].$().removeAttr("style");}c.find(".sapUshellInner").removeAttr("style");}},initGroupDragMode:function(g){if(g.$().hasClass("sapUshellInDragMode")){return;}var t=this.getGroupTiles(g);var c=this.organizeGroup(t);g.$().addClass("sapUshellInDragMode");this.renderLayoutGroup(g,c);},calcTranslate:function(r,c){var t=c*(this.styleInfo.tileWidth+this.styleInfo.tileMarginWidth);var d=r*(this.styleInfo.tileHeight+this.styleInfo.tileMarginHeight);if(this.layoutEngine.rightToLeft){t=-t;}return{x:t,y:d};},renderLayoutGroup:function(g,c){var d;this.styleInfo=this.getStyleInfo(this.container);for(var i=0;i<c.length;i++){for(var j=0;j<c[i].length;j++){if(d===c[i][j]){continue;}else{d=c[i][j];}if(typeof d==="undefined"){break;}}}}};var b=new L();return b;},true);
sap.ui.predefine('sap/ushell/NWBCInterface',["sap/ushell/EventHub","sap/ushell/Config"],function(E,C){"use strict";var N={};
N.notifyUserActivity=function(){E.emit("nwbcUserIsActive",Date.now());};
N.getSessionTimeoutMinutes=function(){var s=0;if(C.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){s=C.last("/core/shell/sessionTimeoutIntervalInMinutes");}return s;};
return N;});
sap.ui.predefine('sap/ushell/SessionHandler',["sap/ushell/resources","sap/ushell/Config","sap/m/Dialog","sap/m/Button","sap/m/Text","sap/ui/model/json/JSONModel","sap/m/VBox","sap/ui/core/library","sap/m/library","sap/ushell/ui/launchpad/LoadingDialog","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/base/Log","sap/ushell/EventHub"],function(r,C,D,B,T,J,V,c,m,L,q,S,a,E){"use strict";var b=m.ButtonType;var d=c.ValueState;var e=function(A){var t=this,i=false,l=false;this.init=function(o){a.debug("SessionHandler.oConfig.sessionTimeoutIntervalInMinutes: "+o.sessionTimeoutIntervalInMinutes,"","SessionHandler");a.debug("SessionHandler.oConfig.sessionTimeoutReminderInMinutes: "+o.sessionTimeoutReminderInMinutes,"","SessionHandler");a.debug("SessionHandler.oConfig.enableAutomaticSignout: "+o.enableAutomaticSignout,"","SessionHandler");this.oConfig=o;this.oModel=new J();this.putTimestampInStorage(this._getCurrentDate());this.initLogout();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(f){this.oAppLifeCycleService=f;this.attachUserEvents();}.bind(this));if(o.sessionTimeoutIntervalInMinutes>0){this.initSessionTimeout();}if(o.sessionTimeoutTileStopRefreshIntervalInMinutes>0){this.initTileRequestTimeout();}E.on("nwbcUserIsActive").do(this.userActivityHandler.bind(this));i=true;};this.initLogout=function(){if(l===false){sap.ushell.Container.registerLogout(this.logout);this.registerCommHandlers();l=true;}};this.initSessionTimeout=function(){if(this.oConfig.enableAutomaticSignout===undefined){this.oConfig.enableAutomaticSignout=false;}if(this.oConfig.sessionTimeoutReminderInMinutes===undefined){this.oConfig.sessionTimeoutReminderInMinutes=0;}this.oModel.setProperty("/SessionRemainingTimeInSeconds",this.oConfig.sessionTimeoutReminderInMinutes*60);this.counter=0;this.oKeepAliveDialog=undefined;this.notifyServer();this.monitorUserIsInactive();};this.registerCommHandlers=function(){A.registerShellCommunicationHandler({"sap.ushell.sessionHandler":{oRequestCalls:{logout:{isActiveOnly:false,distributionType:["URL"]},extendSessionEvent:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{notifyUserActive:{executeServiceCallFn:function(){if(i===true){t.userActivityHandler();}return new q.Deferred().resolve().promise();}}}}});};this.monitorUserIsInactive=function(){a.debug("SessionHandler.monitorInactiveUser : Check started","*****","SessionHandler");var f=this.timeLastInteraction(),g=this.timePopup(),h=this.timeNow(),j=this.timeOver(),R=g-h,k=h-f,M;a.debug("SessionHandler.monitorUserIsInactive :: time since last interaction : "+k,"","SessionHandler");a.debug("SessionHandler.monitorUserIsInactive :: remaining time until dialog : "+R,"","SessionHandler");if(h<g){M=setTimeout(this.monitorUserIsInactive.bind(this),R*1000);this.oMonitorUserIsInactiveTimer=this.oMonitorUserIsInactiveTimer||M;return;}if(h>=g&&h<j&&this.oConfig.sessionTimeoutReminderInMinutes>0){this.detachUserEvents();this.oContinueWorkingDialog=this.createContinueWorkingDialog();this.oContinueWorkingDialog.open();a.debug("SessionHandler.monitorUserIsInactive :: Dialog opened","","SessionHandler");this.monitorCountdown(true);this._createSystemNotification();}if(h>=j){a.debug("SessionHandler.monitorUserIsInactive :: Session over detected","","SessionHandler");this.handleSessionOver();return;}a.debug("SessionHandler.monitorInactiveUser :: Check done","*****","SessionHandler");};this.handleSessionOver=function(){clearTimeout(this.notifyServerTimer);sap.ui.getCore().getEventBus().publish("launchpad","sessionTimeout");if(this.oConfig.enableAutomaticSignout===true){a.debug("SessionHandler.handleSessionOver :: Automatic signout gets initiated","","SessionHandler");this.logout();}else{a.debug("SessionHandler.handleSessionOver :: Session expired dialog gets opened","","SessionHandler");this.createSessionExpiredDialog().open();}};this.notifyServer=function(){var f=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),g=f/(1000*60);if(g<=this.oConfig.sessionTimeoutIntervalInMinutes){sap.ushell.Container.sessionKeepAlive();A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});}else{}this.notifyServerTimer=setTimeout(this.notifyServer.bind(this),this.oConfig.sessionTimeoutIntervalInMinutes*60*1000);};this.monitorCountdown=function(I){if(I){a.debug("SessionHandler.monitorCountdown :: Initiated from outside","*****","SessionHandler");}else{a.debug("SessionHandler.monitorCountdown :: Initiated from internal call","**","SessionHandler");}var f=this.timeLastInteraction(),g=this.timePopup(),h=this.timeNow(),j=this.timeOver(),k=h-f;a.debug("SessionHandler.monitorCountdown :: timeNow : "+h,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: iTimeLastInteraction : "+f,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: timeSinceLastInteraction : "+k,"","SessionHandler");a.debug("SessionHandler.monitorCountdown :: iTimeOver : "+j,"","SessionHandler");if(h<g){a.debug("SessionHandler.monitorCountdown :: Auto-click","<=","SessionHandler");this.continueWorkingButtonPressHandler(true);return;}var R=j-h;if(R>0){a.debug("SessionHandler.monitorCountdown :: Remaining seconds : "+R+" - iTimeOver : "+j,"","SessionHandler");this.oModel.setProperty("/SessionRemainingTimeInSeconds",R);this.remainingTimer=setTimeout(this.monitorCountdown.bind(this,false),500);return;}if(R<=0){if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}this.handleSessionOver();}};this.initTileRequestTimeout=function(){this.checkStopBackendRequestRemainingTime();this.bBackendRequestsActive=true;};this.checkStopBackendRequestRemainingTime=function(){var s=this._getCurrentDate()-new Date(this.getTimestampFromStorage()),f=s/(1000*60),R=this.oConfig.sessionTimeoutTileStopRefreshIntervalInMinutes,g=(R-f)*60*1000;if(f<R){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),g);}else if(R>0){this._setConnectionActive(false);}};this._setConnectionActive=function(f){if(f){setTimeout(this.checkStopBackendRequestRemainingTime.bind(this),0);}if(this.bBackendRequestsActive===f){return;}sap.ui.getCore().getEventBus().publish("launchpad","setConnectionToServer",{active:f});if(!C.last("/core/spaces/enabled")){if(f){this._setTilesVisibleOnHomepage();}else{this._setTilesInvisibleOnHomepage();}}this.bBackendRequestsActive=f;};this._setTilesVisibleOnHomepage=function(){sap.ui.require(["sap/ushell/utils"],function(u){u.handleTilesVisibility();});};this._setTilesInvisibleOnHomepage=function(){return new Promise(function(f,g){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(h){h.getGroups().then(function(G){var o=sap.ui.getCore().getEventBus();G.forEach(function(j){h.getGroupTiles(j).forEach(function(k){h.setTileVisible(k,false);});});o.publish("launchpad","visibleTilesChanged",[]);f();});});});};this.getLocalStorage=function(){if(this.oLocalStorage===undefined){var s=new S(this.oConfig&&this.oConfig.sessionType||S.Type.local);if(this._isLocalStorageSupported(s)){this.oLocalStorage=s;}else{this.oLocalStorage=false;}}return this.oLocalStorage;};this._isLocalStorageSupported=function(s){var I;try{I=s.isSupported();}catch(f){I=false;}if(!I){a.warning("SessionHandler._isLocalStorageSupported :: Failed to instantiate local storage handler: "+"Might be disabled by the browser!","","SessionHandler");}return I;};this._createSystemNotification=function(){var f=function(){var s=this.oModel.getProperty("/SessionRemainingTimeInSeconds");var n=new Notification(r.i18n.getText("sessionTimeoutMessage_title"),{body:this.continueWorkingFormatter(s)});n.onclick=function(o){window.focus();};}.bind(this);if(!("Notification"in window)){return;}else if(Notification.permission==="granted"){f();}else if(Notification.permission!=="denied"){Notification.requestPermission().then(function(p){if(p==="granted"){f();}});}};this.continueWorkingFormatter=function(s){var I=s>60,f,g,M;f=I?r.i18n.getText("sessionTimeoutMessage_units_minutes"):r.i18n.getText("sessionTimeoutMessage_units_seconds");g=I?Math.ceil(s/60):s;if(t.oConfig.enableAutomaticSignout){M=r.i18n.getText("sessionTimeoutMessage_kioskMode_main",[g,f]);}else{M=r.i18n.getText("sessionTimeoutMessage_main",[g,f]);}return M;};this.createContinueWorkingDialog=function(){a.debug("SessionHandler.createContinueWorkingDialog :: Continue working dialog being created","","SessionHandler");this.oMessageVBox=new V();this.oSessionKeepAliveLabel=new T({text:{parts:["/SessionRemainingTimeInSeconds"],formatter:this.continueWorkingFormatter}});this.oMessageVBox.addItem(this.oSessionKeepAliveLabel);if(this.oConfig.enableAutomaticSignout===false){this.oLostDataReminder=new T({text:r.i18n.getText("sessionTimeoutMessage_unsavedData")});this.oMessageVBox.addItem(this.oLostDataReminder);}this.oSessionKeepAliveLabel.setModel(this.oModel);this.oSessionKeepAliveDialog=new D("sapUshellKeepAliveDialog",{title:r.i18n.getText("sessionTimeoutMessage_title"),type:"Message",state:d.Warning,content:this.oMessageVBox,beginButton:this.createContinueWorkingButton(),afterClose:function(){this.oSessionKeepAliveDialog.destroy();}.bind(this)}).addStyleClass("sapContrastPlus");if(this.oConfig.enableAutomaticSignout===true){this.oSignOutButton=new B({text:r.i18n.getText("logoutBtn_title"),tooltip:r.i18n.getText("logoutBtn_tooltip"),press:this.logout.bind(this)});this.oSessionKeepAliveDialog.setEndButton(this.oSignOutButton);}return this.oSessionKeepAliveDialog;};this.createContinueWorkingButton=function(){return new B({text:r.i18n.getText("sessionTimeoutMessage_continue_button_title"),type:b.Emphasized,press:t.continueWorkingButtonPressHandler.bind(t,false)});};this.continueWorkingButtonPressHandler=function(f){a.debug("SessionHandler.continueWorkingButtonPressHandler :: Session was extended"+f?"automatically":"by user","","SessionHandler");if(this.oSessionKeepAliveDialog){this.oSessionKeepAliveDialog.close();}clearTimeout(this.remainingTimer);if(!f){this.putTimestampInStorage(this._getCurrentDate());}this.monitorUserIsInactive();this.attachUserEvents();A.postMessageToIframeApp("sap.ushell.sessionHandler","extendSessionEvent",{});};this.createSessionExpiredDialog=function(){this.oSessionExpiredDialog=new D("sapUshellSessionTimedOutDialog",{title:r.i18n.getText("sessionExpiredMessage_title"),type:"Message",state:d.Warning,content:new T({text:r.i18n.getText("sessionExpiredMessage_main")}),beginButton:this.createReloadButton(),afterClose:function(){this.oSessionExpiredDialog.destroy();}.bind(this)}).addStyleClass("sapContrastPlus");return this.oSessionExpiredDialog;};this.createReloadButton=function(){return new B({text:r.i18n.getText("sessionExpiredMessage_reloadPage_button_title"),press:function(){t.oSessionExpiredDialog.close();location.reload();}});};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));this.oAppLifeCycleService.attachAppLoaded({},this.userActivityHandler,this);};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");this.oAppLifeCycleService.detachAppLoaded(this.userActivityHandler,this);};this.putTimestampInStorage=function(f){a.debug("SessionHandler.putTimestampInStorage :: Timestamp is "+f,"","SessionHandler");var o=this.getLocalStorage();if(o){o.put("lastActivityTime",f);if(this.bBackendRequestsActive===false){this._setConnectionActive(true);}}};this.getTimestampFromStorage=function(){var o=this.getLocalStorage();if(o){return o.get("lastActivityTime");}return null;};this.timeNow=function(){return Math.floor(Date.now()/1000);};this.timeLastInteraction=function(){return Math.floor(new Date(this.getTimestampFromStorage()).getTime()/1000);};this.timeOver=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60);};this.timePopup=function(){return Math.floor(this.timeLastInteraction()+this.oConfig.sessionTimeoutIntervalInMinutes*60-this.oConfig.sessionTimeoutReminderInMinutes*60);};this.userActivityHandler=function(){if(this.oUserActivityTimer!==undefined){return;}this.oUserActivityTimer=setTimeout(function(){a.debug("SessionHandler.userActivityHandler :: Timed time stamp update","","SessionHandler");t.putTimestampInStorage(t._getCurrentDate());t.oUserActivityTimer=undefined;},1000);};this._getCurrentDate=function(){return new Date();};this.logout=function(){a.debug("SessionHandler.logout :: Logout initiated","","SessionHandler");var o=new L({text:""});A.postMessageToIframeApp("sap.ushell.sessionHandler","logout",{},true).then(function(){if(i===true){t.detachUserEvents();}if(t.oUserActivityTimer){clearTimeout(t.oUserActivityTimer);}if(t.remainingTimer){clearTimeout(t.remainingTimer);}if(t.notifyServerTimer){clearTimeout(t.notifyServerTimer);}o.openLoadingScreen();o.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.setDirtyFlag(false);sap.ushell.Container.defaultLogout();});};};return e;},true);
sap.ui.predefine('sap/ushell/System',[],function(){"use strict";var S=function(d){this._oData=d;};
S.prototype.getAlias=function(){return this._oData.alias;};
S.prototype.getBaseUrl=function(){return this._oData.baseUrl;};
S.prototype.getClient=function(){return this._oData.client;};
S.prototype.getClientRole=function(){return this._oData.clientRole;};
S.prototype.getName=function(){return this._oData.system;};
S.prototype.getPlatform=function(){return this._oData.platform;};
S.prototype.getProductVersion=function(){return this._oData.productVersion;};
S.prototype.getProductName=function(){return this._oData.productName;};
S.prototype.getSystemName=function(){return this._oData.systemName;};
S.prototype.getSystemRole=function(){return this._oData.systemRole;};
S.prototype.getTenantRole=function(){return this._oData.tenantRole;};
S.prototype.isTrial=function(){return!!this._oData.isTrialSystem;};
S.prototype.adjustUrl=function(u){if(u.indexOf("/")!==0||u==="/"){throw new Error("Invalid URL: "+u);}if(this._oData.baseUrl===";o="){if(this._oData.alias){u=u+";o="+this._oData.alias;}}else if(this._oData.baseUrl){u=this._oData.baseUrl.replace(/\/$/,"")+u;}if(this._oData.client){u+=(u.indexOf("?")>=0?"&":"?")+"sap-client="+this._oData.client;}return u;};
S.prototype.toString=function(){return JSON.stringify(this._oData);};
return S;},true);
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d},"sap-app-origin-hint":{injectFrom:"startupParameter",isIntentParameter:false,getValue:d},"sap-app-origin":{injectFrom:"startupParameter",isIntentParameter:false,getValue:d}};
function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}
function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}
function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}
function b(p,A){var r=A.getReservedParameters();return r&&r[p];}
function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}
function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}
function f(){return Object.keys(T);}
function i(p){return T.hasOwnProperty(p);}
function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}
return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/UIActions',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function i(){var t=document.activeElement?document.activeElement.tagName:"";return t==="INPUT"||t==="TEXTAREA";}
var U=function(c){if(!c||!c.rootSelector||!c.containerSelector||!c.draggableSelector){throw new Error("No configuration object to initialize User Interaction module.");}this.captureStart=null;this.captureMove=null;this.captureEnd=null;this.clickCallback=null;this.clickEvent=null;this.clickHandler=null;this.clone=null;this.cloneClass=null;this.container=null;this.contextMenuEvent=null;this.debug=null;this.defaultDragStartEvent=null;this.defaultMouseMoveEvent=null;this.deltaTop=0;this.disabledDraggableSelector=null;this.dragAndScrollCallback=null;this.dragAndScrollDuration=null;this.dragAndScrollTimer=null;this.draggable=null;this.placeHolderClass=null;this.draggableSelector=null;this.draggableSelectorExclude=null;this.doubleTapCallback=null;this.doubleTapDelay=null;this.element=null;this.endDragAndScrollCallback=null;this.endX=null;this.endY=null;this.isLayoutEngine=null;this.isTouch=null;this.isCombi=null;this.lastElement=null;this.lastTapTime=null;this.lockMode=null;this.log=null;this.mode=null;this.mouseDownEvent=null;this.mouseMoveEvent=null;this.mouseUpEvent=null;this.moveTolerance=null;this.moveX=null;this.moveY=null;this.noop=null;this.onDragStartUIHandler=null;this.onDragEndUIHandler=null;this.preventClickFlag=null;this.preventClickTimeoutId=null;this.scrollContainer=null;this.scrollContainerSelector=null;this.scrollEvent=null;this.scrollTimer=null;this.startX=null;this.startY=null;this.switchModeDelay=null;this.tapsNumber=null;this.timer=null;this.scrollHandler=null;this.touchCancelEvent=null;this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.touchEndEvent=null;this.touchMoveEvent=null;this.startCallback=null;this.touchStartEvent=null;this.wrapper=null;this.wrapperRect=null;this.scrollCallback=null;this.draggableElement=null;this.offsetLeft=0;this.elementsToCapture=null;this.init=function(c){this.startX=-1;this.startY=-1;this.moveX=-1;this.moveY=-1;this.endX=-1;this.endY=-1;this.noop=function(){};this.isLayoutEngine=c.isLayoutEngine||false;if(this.isLayoutEngine){this.moveDraggable=this.noop;}this.isTouch=c.isTouch?!!c.isTouch:false;this.isCombi=c.isCombi?!!c.isCombi:false;this.container=document.querySelector(c.containerSelector);this.scrollContainerSelector=c.scrollContainerSelector||c.containerSelector;this.switchModeDelay=c.switchModeDelay||1500;this.dragAndScrollDuration=c.dragAndScrollDuration||160;this.moveTolerance=c.moveTolerance===0?0:c.moveTolerance||16;this.draggableSelector=c.draggableSelector;this.draggableSelectorBlocker=c.draggableSelectorBlocker||c.rootSelector;this.draggableSelectorExclude=c.draggableSelectorExclude;this.mode="normal";this.debug=c.debug||false;this.root=document.querySelector(c.rootSelector)||document.querySelector("#canvas");this.tapsNumber=0;this.lastTapTime=0;this.log=this.debug?this.logToConsole:this.noop;this.lockMode=false;this.placeHolderClass=c.placeHolderClass||"";this.cloneClass=c.cloneClass||"";this.deltaTop=c.deltaTop||0;this.wrapper=c.wrapperSelector?document.querySelector(c.wrapperSelector):this.container.parentNode;this.clickCallback=typeof c.clickCallback==="function"?c.clickCallback:this.noop;this.startCallback=typeof c.startCallback==="function"?c.startCallback:this.noop;this.doubleTapCallback=typeof c.doubleTapCallback==="function"?c.doubleTapCallback:this.noop;this.endCallback=typeof c.endCallback==="function"?c.endCallback:this.noop;this.dragCallback=typeof c.dragCallback==="function"?c.dragCallback:this.noop;this.onBeforeCreateClone=typeof c.onBeforeCreateClone==="function"?c.onBeforeCreateClone:this.noop;this.dragAndScrollCallback=typeof c.dragAndScrollCallback==="function"?c.dragAndScrollCallback:this.noop;this.endDragAndScrollCallback=typeof c.endDragAndScrollCallback==="function"?c.endDragAndScrollCallback:this.noop;this.scrollCallback=typeof c.scrollCallback==="function"?c.scrollCallback:this.noop;this.doubleTapDelay=c.doubleTapDelay||500;this.wrapperRect=this.wrapper.getBoundingClientRect();this.scrollEvent="scroll";this.touchStartEvent="touchstart";this.touchMoveEvent="touchmove";this.touchEndEvent="touchend";this.mouseDownEvent="mousedown";this.mouseMoveEvent="mousemove";this.mouseUpEvent="mouseup";this.contextMenuEvent="contextmenu";this.touchCancelEvent="touchcancel";this.defaultDragStartEvent="dragstart";this.defaultMouseMoveEvent="mousemove";this.clickEvent="click";this.isVerticalDragOnly=c.isVerticalDragOnly||false;this.draggableElement=c.draggableElement;this.offsetLeft=c.offsetLeft;this.elementsToCapture=c.elementToCapture?q(c.elementToCapture):this.root;this.disabledDraggableSelector=c.disabledDraggableSelector;this.onDragStartUIHandler=typeof c.onDragStartUIHandler==="function"?c.onDragStartUIHandler:this.noop;this.onDragEndUIHandler=typeof c.onDragEndUIHandler==="function"?c.onDragEndUIHandler:this.noop;this.defaultMouseMoveHandler=c.defaultMouseMoveHandler||function(e){if(i()){return;}e.preventDefault();};};this.forEach=function(s,a){return Array.prototype.forEach.call(s,a);};this.indexOf=function(s,a){return Array.prototype.indexOf.call(s,a);};this.insertBefore=function(s,a,r){var b,d,e;e=Array.prototype.splice;b=this.indexOf(s,a);d=this.indexOf(s,r);e.call(s,d-(b<d?1:0),0,e.call(s,b,1)[0]);};this.logToConsole=function(){window.console.log.apply(console,arguments);};this.getDraggableElement=function(a){var e,I=false,b=false;this.draggable=q(this.draggableSelector,this.container);while(typeof e==="undefined"&&a!==this.root&&!q(a).is(this.draggableSelectorBlocker)){I=I||q(a).is(this.draggableElement)||this.draggableElement===undefined;if(!(q(a).not(this.draggableSelectorExclude).length>0)){b=true;}if(!b&&I&&this.indexOf(this.draggable,a)>=0){e=a;}a=a.parentNode;}return e;};this.captureStart=function(e){var a;if(e.type==="touchstart"&&e.touches.length===1){a=e.touches[0];}else if(e.type==="mousedown"){a=e;if(e.which!==1){return;}}if(a){this.element=this.getDraggableElement(a.target);this.startX=this.moveX=a.pageX;this.startY=this.moveY=a.pageY;this.lastMoveX=0;this.lastMoveY=0;if(this.lastTapTime&&this.lastElement&&this.element&&(this.lastElement===this.element)&&Math.abs(Date.now()-this.lastTapTime)<this.doubleTapDelay){this.lastTapTime=0;this.tapsNumber=2;}else{this.lastTapTime=Date.now();this.tapsNumber=1;this.lastElement=this.element;}this.log("captureStart("+this.startX+", "+this.startY+")");}};this.startHandler=function(e){this.log("startHandler");if(this.isCombi&&!(e instanceof MouseEvent)){this.isTouchEvent=true;}clearTimeout(this.timer);delete this.timer;this.captureStart(e);if(this.element){this.startCallback(e,this.element);if(this.lockMode===false){if(this.tapsNumber===2){this.mode="double-tap";return;}if(this.isTouch||this.isTouchEvent){this.timer=setTimeout(function(){if(!q(this.element).hasClass(this.disabledDraggableSelector)){this.log("mode switched to drag");this.mode="drag";this.onBeforeCreateClone(e,this.element);this.createClone();this.dragCallback(e,this.element);}else{this.onDragStartUIHandler();}this.isTouchEvent=false;}.bind(this),this.switchModeDelay);}}}}.bind(this);this.captureMove=function(e){var a;if(e.type==="touchmove"&&e.touches.length===1){a=e.touches[0];}else if(e.type==="mousemove"){a=e;}if(a){this.moveX=a.pageX;this.moveY=a.pageY;this.log("captureMove("+this.moveX+", "+this.moveY+")");}};this.moveHandler=function(e){if(i()){return;}var a;this.log("moveHandler");this.captureMove(e);if(this.element&&e.type==="mousemove"&&e.buttons===0){return this.endHandler(e);}switch(this.mode){case"normal":if((Math.abs(this.startX-this.moveX)>this.moveTolerance||Math.abs(this.startY-this.moveY)>this.moveTolerance)){if(this.isTouch||this.isTouchEvent){this.log("-> normal");clearTimeout(this.timer);delete this.timer;}else if(this.element){this.onDragStartUIHandler();if(!q(this.element).hasClass(this.disabledDraggableSelector)){this.log("mode switched to drag");this.mode="drag";this.onBeforeCreateClone(e,this.element);this.createClone();}else{this.preventClick();this.element=null;}}}break;case"drag":e.preventDefault();this.onDragStartUIHandler();this.log("-> drag");if(this.isVerticalDragOnly){this.mode="vertical-drag";}else{this.mode="drag-and-scroll";}window.addEventListener(this.mouseUpEvent,this.endHandler,true);this.translateClone();this.scrollContainer=document.querySelector(this.scrollContainerSelector);this.dragAndScroll();if(!this.isTouch){this.dragCallback(e,this.element);}break;case"drag-and-scroll":e.stopPropagation();e.preventDefault();this.log("-> drag-and-scroll");a=this.dragAndScroll();this.translateClone();if(!a){this.moveDraggable();}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:a,moveX:this.moveX,moveY:this.moveY});break;case"vertical-drag":e.stopPropagation();e.preventDefault();a=this.dragAndScroll();this.translateClone();if(!a){this.moveDraggableVerticalOnly(this.moveX,this.moveY);}this.dragAndScrollCallback({evt:e,clone:this.clone,isScrolling:a,moveX:this.moveX,moveY:this.moveY});break;default:break;}}.bind(this);this.captureEnd=function(e){var a;if((e.type==="touchend"||e.type==="touchcancel")&&(e.changedTouches.length===1)){a=e.changedTouches[0];}else if(e.type==="mouseup"){a=e;}if(a){this.endX=a.pageX;this.endY=a.pageY;this.log("captureEnd("+this.endX+", "+this.endY+")");}};this.contextMenuHandler=function(e){if(this.isTouch){e.preventDefault();}}.bind(this);this.clickHandler=function(e){if(this.preventClickFlag){this.preventClickFlag=false;e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();clearTimeout(this.preventClickTimeoutId);}this.clickCallback();}.bind(this);this.preventClick=function(){this.preventClickFlag=true;this.preventClickTimeoutId=setTimeout(function(){this.preventClickFlag=false;}.bind(this),100);};this.endCallbackAdapter=function(e,a,o){var b=this.endCallback.apply(null,arguments);q.when(b).then(function(){this.removeClone(a,o.clone);this.onDragEndUIHandler(e);}.bind(this));this.preventClick();};this.endHandler=function(e){this.log("endHandler");this.captureEnd(e);switch(this.mode){case"normal":this.onDragEndUIHandler(e);this.log("-> normal");break;case"drag":this.log("-> drag");this.endCallbackAdapter(e,this.element,{clone:this.clone});break;case"drag-and-scroll":this.log("-> drag-and-scroll");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{deltaX:this.moveX-this.startX,deltaY:this.moveY-this.startY,clone:this.clone});e.stopPropagation();e.preventDefault();break;case"vertical-drag":this.log("-> vertical-drag");window.removeEventListener(this.mouseUpEvent,this.endHandler,true);this.endCallbackAdapter(e,this.element,{clone:this.clone});e.stopPropagation();e.preventDefault();break;case"double-tap":this.log("-> double-tap");this.doubleTapCallback(e,this.element);break;default:break;}clearTimeout(this.timer);delete this.timer;this.lastMoveX=0;this.lastMoveY=0;this.element=null;this.clone=null;this.mode="normal";}.bind(this);this.defaultDragStartHandler=function(e){e.preventDefault();};this.scrollHandler=function(){clearTimeout(this.scrollTimer);this.lockMode=true;this.scrollTimer=setTimeout(function(){this.lockMode=false;}.bind(this),500);}.bind(this);this.createClone=function(){var s,r;this.preventClickFlag=true;if(sap.ui.getCore().byId(this.element.id)&&sap.ui.getCore().byId(this.element.id).getBoundingRects){r=sap.ui.getCore().byId(this.element.id).getBoundingRects()[0];r.top=r.offset.y;r.left=r.offset.x;r.width+=5;}else{r=this.element.getBoundingClientRect();}this.clone=this.element.cloneNode(true);this.clone.removeAttribute("id");this.clone.removeAttribute("data-sap-ui");this.clone.className+=(" "+this.cloneClass);this.element.className+=(" "+this.placeHolderClass);s=this.clone.style;s.position="fixed";s.display="block";s.top=(r.top+this.deltaTop)+"px";s.left=r.left+"px";s.width=r.width+"px";s.zIndex="100";this.root.appendChild(this.clone);this.log("createClone");};this.removeClone=function(e,a){this.preventClick();e.className=e.className.split(" "+this.placeHolderClass).join("");a.parentElement.removeChild(a);this.log("removeClone");};this.translateClone=function(){var d,a;d=this.moveX-this.startX;a=this.moveY-this.startY;this.clone.style.webkitTransform="translate3d("+d+"px, "+a+"px, 0px)";this.clone.style.mozTransform="translate3d("+d+"px, "+a+"px, 0px)";this.clone.style.msTransform="translate("+d+"px, "+a+"px)";this.clone.style.transform="translate3d("+d+"px, "+a+"px, 0px)";this.log("translateClone ("+d+", "+a+")");};this.dragAndScroll=function(){var d,a,t=this;function g(){var r,e;if(t.clone){r=t.clone.getBoundingClientRect();e=t.wrapperRect.top-r.top;if(e>0){return e;}e=t.wrapper.offsetTop+t.wrapper.offsetHeight-(r.top+t.clone.offsetHeight);if(e<0){return e;}}return 0;}function b(){if(t.endDragAndScrollCallback(t.moveY)){return false;}if(d<0){return t.wrapper.getBoundingClientRect().top-(t.container.getBoundingClientRect().top+t.container.offsetHeight)+t.wrapper.offsetHeight<0;}return t.container.getBoundingClientRect().top-(t.wrapper.getBoundingClientRect().top+t.container.offsetTop)<0;}function s(){t.dragAndScrollTimer=setTimeout(function(){t.wrapper.scrollTop-=d;t.dragAndScrollTimer=undefined;if((d=g())!==0&&b()){s();}t.scrollCallback();},a);}d=g();if(d!==0&&!this.dragAndScrollTimer&&b()){a=this.dragAndScrollDuration;this.scrollContainer=this.scrollContainer||document.querySelector(this.scrollContainerSelector);s();}this.log("dragAndScroll ("+d+")");return(d!=0)&&b();};this.moveDraggableVerticalOnly=function(){var h,a,r,m=true;this.forEach(this.draggable,function(b,d){if(!h){r=b.getBoundingClientRect();a=!(r.bottom<this.moveY||r.top>this.moveY);if(a){h=b;if(r.top+r.height/2<this.moveY){m=false;}}}}.bind(this));if(h&&this.element!==h){if(m){this.insertBefore(this.draggable,this.element,h);h.parentNode.insertBefore(this.element,h);}else{this.insertBefore(this.draggable,this.element,h.nextSibling);h.parentNode.insertBefore(this.element,h.nextSibling);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}this.log("moveDraggableVerticalonly");};this.moveDraggable=function(m,a){var e,h,b,d,f,r;this.forEach(this.draggable,function(g,j){if(!h){r=g.getBoundingClientRect();d=!(r.right<this.moveX||r.left>this.moveX);f=!(r.bottom<this.moveY||r.top>this.moveY);if(d&&f){h=g;b=j;}}}.bind(this));if(h&&this.element!==h){e=this.indexOf(this.draggable,this.element);if(Math.abs(this.lastMoveX-this.moveX)>=this.moveTolerance||Math.abs(this.lastMoveY-this.moveY)>=this.moveTolerance){if(b<=e){h.parentNode.insertBefore(this.element,h);this.insertBefore(this.draggable,this.element,h);}else if(b>e){h.parentNode.insertBefore(this.element,h.nextSibling);this.insertBefore(this.draggable,this.element,this.draggable[b+1]);}this.lastMoveX=this.moveX;this.lastMoveY=this.moveY;}}this.log("moveDraggable");};this.enable=function(){this.log("enable");this.root.addEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.addEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.addEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.addEventListener(this.clickEvent,this.clickHandler,true);this.root.addEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.addEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.addEventListener(this.scrollEvent,this.scrollHandler,false);if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.addEventListener(t.touchStartEvent,t.startHandler,false);this.addEventListener(t.touchEndEvent,t.endHandler,false);this.addEventListener(t.touchCancelEvent,t.endHandler,false);this.addEventListener(t.mouseDownEvent,t.startHandler,false);this.addEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.addEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.addEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.addEventListener(this.mouseUpEvent,this.endHandler,false);}return this;};this.delete=function(){this.log("delete");this.disable();this.dragCallback=null;this.onBeforeCreateClone=null;this.endCallback=null;this.startCallback=null;this.scrollCallback=null;this.doubleTapCallback=null;this.clickCallback=null;this.dragAndScrollCallback=null;delete this;};this.disable=function(){this.log("disable");if(this.elementsToCapture.length){var t=this;this.elementsToCapture.each(function(){this.removeEventListener(t.touchStartEvent,t.startHandler,false);this.removeEventListener(t.touchEndEvent,t.endHandler,false);this.removeEventListener(t.touchCancelEvent,t.endHandler,false);this.removeEventListener(t.mouseDownEvent,t.startHandler,false);this.removeEventListener(t.mouseUpEvent,t.endHandler,false);});}else{this.elementsToCapture.removeEventListener(this.touchStartEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.touchEndEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.touchCancelEvent,this.endHandler,false);this.elementsToCapture.removeEventListener(this.mouseDownEvent,this.startHandler,false);this.elementsToCapture.removeEventListener(this.mouseUpEvent,this.endHandler,false);}this.root.removeEventListener(this.touchMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.mouseMoveEvent,this.moveHandler,true);this.root.removeEventListener(this.contextMenuEvent,this.contextMenuHandler,false);this.root.removeEventListener(this.clickEvent,this.clickHandler,true);this.root.removeEventListener(this.defaultDragStartEvent,this.defaultDragStartHandler,true);this.root.removeEventListener(this.defaultMouseMoveEvent,this.defaultMouseMoveHandler,true);this.wrapper.removeEventListener(this.scrollEvent,this.scrollHandler,false);return this;};this.init(c);this.getMove=function(){return{x:this.moveX,y:this.moveY};};};return U;},true);
sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/base/Log","sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/utils"],function(L,U,a,_,b,c,d,e){"use strict";
function l(s){L.debug(s,"sap.ushell.URLTemplateProcessor");}
function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}
function g(P){var j=Object.keys(P).filter(function(s){return typeof P[s]==="object"&&P[s].hasOwnProperty("renameTo");});var o=[];j.forEach(function(s){var k=P[s];if(k.hasOwnProperty("renameTo")){o.push(function(u,m){var r=m;r=m.replace(new RegExp(s+"=","g"),k.renameTo+"=");return r;});}});return o;}
function h(t,s,r,A,D){var E=p(t,s,r,A,D);return i(t,E);}
function p(t,s,r,A,D){l("[TEMPLATE EXPANSION] "+t.urlTemplate);var o=_.buildDefinitionParameterSet(t.parameters,s,D)||{};var R=e.removeArrayParameterNotation(r[D]||{});var j=d.parseTemplateParameterSet(o,D);var k=d.parseTemplateParameterSetAsLiterals(R);var P=e.mergeObject(k,j);l("- parsed template parameters: "+JSON.stringify(P,null,3));var G=b.buildDependencyGraph(P);l("- created dependency graph: "+JSON.stringify(G,null,3));var m=b.getDependencyResolutionOrder(G);l("- resolving in order: "+m.join(" > "));var n=c.resolveAllParameters(P,m,s,r,A,D);Object.keys(n).forEach(function(q){var u=n[q];l(q+" --> "+f(u));});return{oDefinitionParamsSet:o,oResolvedParameters:n};}
function i(t,E){var P=g(E.oDefinitionParamsSet||{});var u=t.urlTemplate;var s=U.expand(u,E.oResolvedParameters).toString();l("- created URL: "+s);P.forEach(function(o){s=o(u,s);});if(P.length>0){l("- created URL (post expansion): "+s);}return s;}
return{prepareExpandData:p,expand:h};});
sap.ui.predefine('sap/ushell/Ui5NativeServiceFactory',["sap/ui/core/service/ServiceFactory"],function(S){"use strict";var u={_servicePromises:{},createServiceFactory:function(s){var o=this._servicePromises;var U=S.extend("sap.ushell.ui5Service."+s+"Factory",{createInstance:function(){var a=o[s];if(!a){a=new Promise(function(r,b){sap.ui.require(["sap/ushell/ui5service/"+s],function(c){var d;if(!c){b();}d=new c();r(d);});});o[s]=a;}return a;}});return new U();}};return u;});
sap.ui.predefine('sap/ushell/Ui5ServiceFactory',["sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/base/Log","sap/base/util/ObjectPath","sap/base/util/isPlainObject"],function(S,a,L,O,b){"use strict";var A;
function s(i){A=i;}
function g(){return A;}
function c(m){return!!/^[^_].+/.test(m);}
function d(o){var p,P=[];for(p in o){P.push(p);}return P;}
function e(p,P,m){var o=P[m];P[m]=function(){var i,n,C=g();if(!p||p.scopeObject.getId()!==C){L.warning("Call to "+m+" is not allowed","This may be caused by an app component other than the active '"+C+"' that tries to call the method","sap.ushell.Ui5ServiceFactory");return undefined;}n=new Array(arguments.length);for(i=0;i<n.length;++i){n[i]=arguments[i];}return o.apply(P,n);};}
function f(u,p,P,i){d(u).filter(c).filter(function(n){var v=u[n];p[n]=v;return typeof v==="function";}).forEach(function(F){p[F]=p[F].bind(u);if(i){e(P,p,F);}});}
function h(C){var G;if(typeof C==="undefined"){return true;}if(!b(C)){return false;}if(!C.scopeType){return false;}G=O.get("scopeObject.getId",C);if(typeof G!=="function"){return false;}return true;}
function j(p,u,i){var P={};if(i){i=typeof p==="object";}f(u,P,p,i);if(i&&p.scopeType==="component"&&p.scopeObject&&p.scopeObject.getId){s(p.scopeObject.getId());}return P;}
function k(u){return sap.ushell.Container.getServiceAsync(u);}
function l(u,i){var U=S.extend("sap.ushell.ui5service."+u+"Factory",{createInstance:function(p){return new Promise(function(r,R){k(u).then(function(o){var m,n,q;if(!h(p)){L.error("Invalid context for "+u+" service interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.Ui5ServiceFactory");R("Invalid Context for "+u+" service");return;}n=j(p,o,i);q=a.extend("sap.ushell.ui5service."+u,{getInterface:function(){return n;}});m=new q(p);r(m);},function(G){R(G);});});}});return new U();}
return{createServiceFactory:l};});
sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData","sap/base/Log","sap/base/util/deepExtend"],function(U,E,L,a,d){"use strict";
function c(o){if(o===undefined){return undefined;}return d({},o);}
function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}
function b(t){return t.indexOf("sap_")===0;}
var e=function(C){var f=[],B,s,o,S,h=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getTimeZone=function(){return C.timeZone;};this.getInitials=function(){var F=C.fullName||"",I="",n=true;for(var i=0,l=F.length;i<l;++i){if(F[i]===" "){n=true;}else if(n){n=false;I+=F[i];}}return I;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),i=new L(l),j=sap.ui.getCore().getConfiguration().getLanguageTag();j=j.replace("-","_");var k=i.getLanguages(),m=k[j]||this.getLanguage().toUpperCase();return m;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;h.fireEvent("onSetImage",u);};this.attachOnSetImage=function(F,D){h.attachEvent("onSetImage",F,D);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===e.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===e.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===e.prototype.constants.themeFormat.NWBC){if(b(o.theme)){return o.theme;}return this.getTheme(e.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var i="setTheme not permitted";a.error(i);throw new Error(i);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(e.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{currentThemeId:N,themeServiceRoute:window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var i="setAccessibilityMode not permitted";a.error(i);throw new Error(i);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(i){if(this.isSetContentDensityPermitted()===false){var j="setContentDensity not permitted";a.error(j);throw new Error(j);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,i);C.contentDensity=i;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return d([],f);};this.setChangedProperties=function(p,i,n){f.push({propertyName:p.propertyName,name:p.name,oldValue:i,newValue:n});};this.resetChangedProperties=function(){f=[];};this.resetChangedProperty=function(p){f=f.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(i){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,i);C.isImageConsent=i;};this.getImageConsent=function(){return C.isImageConsent;};this.getImportBookmarksFlag=function(){return C.importBookmarks||null;};this.setImportBookmarksFlag=function(i){this.setChangedProperties({propertyName:"importBookmarks",name:"MYHOME_IMPORT_FROM_CLASSIC"},this.getImportBookmarksFlag()||"",i);C.importBookmarks=i;};this.getShowMyHome=function(){return C.showMyHome!==false;};this.setShowMyHome=function(i){i=!!i;this.setChangedProperties({propertyName:"showMyHome",name:"MYHOME_ENABLEMENT"},C.showMyHome,i);C.showMyHome=i;};s={locationPathUi5:(new U(sap.ui.require.toUrl(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){a.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){a.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){a.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};
e.prototype._amendTheme=function(t,s){var T={},f,r;function h(R,o){var u,O,p={};u=new U(R);O=g(u);if(O){p.locationOrigin=O;p.locationPath=u.path();}else{p.locationOrigin=o.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){f=T.originalTheme.theme.split("@",2);T.theme=f[0];T.suppliedRoot=f[1];r=h(f[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=h(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(b(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};
e.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"},NEW_DESIGN:"sap_horizon"};return e;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub","sap/base/Log","sap/base/util/extend"],function(u,a,T,E,L,b){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:50,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(d,i,f){e.subscribe("launchpad",d,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(d,i,f){e.subscribe(d,t._handleAction,t);});this._observedEventHubEvents.forEach(function(d,i,f){t._aDoableObjects.push(E.on(d).do(t._handleActionEventHub.bind(t)));});L.addLogListener(this);t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(d,i,f){e.unsubscribe("launchpad",d,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(d,i,f){e.unsubscribe(d,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});L.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,d){if(this._isActive){this._addMessageInternal(t,m,d);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){if(d.level<=2){var e=d.message;if(typeof d.details!=="undefined"&&(d.details!=="")){e=e+", "+d.details;}this.addMessage(this.messageType.ERROR,e);}},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,d,e,f,g;return function(){var h=this.getMetadata().getName();if(h==="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(h==="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var i=a.parseShellHash(n);n="#"+a.constructShellHash({target:{semanticObject:i.semanticObject,action:i.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();d=sap.ui.getCore().byId(this.getId());e=d.getModel();f=this.getBindingContext();g=f.getPath();l.tileTitle=f.getModel().getProperty(g).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+e.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,d){var l=this._getLoggingQueueFromStorage(),e={type:null},p;for(p in this.messageType){if(t===this.messageType[p]){e.type=p;break;}}if(e.type===null){return;}b(e,{messageID:d,messageText:m,time:new Date(),toString:function(){var f=[this.type,this.time];if(typeof this.messageID!=="undefined"){f.push(this.messageID);}f.push(this.messageText);return f.join(" :: ");}});l.push(e);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(C,e,d){var m;switch(e){case"deleteTile":m="Delete Tile "+(d.tileId||"");break;case"moveTile":m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case"createGroupAt":m="Create Group";break;case"changeGroupTitle":m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case"deleteGroup":m="Delete Group "+(d.groupId||"");break;case"addTile":var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,f=this._findInModel(s,t),g=f.id,h=d.groupContext.getObject(),i=h.groupId;m="Add Tile "+(g||"")+" to Group "+(i||"");break;case"moveGroup":m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case"appOpened":m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case"addBookmarkTile":m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case"showCatalog":m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var d,f=m,i,g;try{d=p.split("/");for(i=0;i<d.length;i=i+1){if(g!==d[i]){continue;}f=f[g];}}catch(e){return undefined;}return f;},_getUserDetails:function(){var d=sap.ushell.Container.getUser();return{fullName:d.getFullName()||"",userId:d.getId()||"",eMail:d.getEmail()||"",Language:d.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(d,e){if((!d)||(!e)){return false;}return(this._getHashSegment(d)===this._getHashSegment(e));},_getHashSegment:function(d){var i=d.indexOf("~"),e;if(i>-1){return d.substring(0,i);}e=d.indexOf("?");if(e>-1){return d.substring(0,e);}return d;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var c=new U();return c;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery","sap/base/Log"],function(U,a,S,c,p,q,L){"use strict";
function r(O,K){K.forEach(function(s){delete O[s];});}
function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}
function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]===D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}
function b(P){var B=c.filterObject(P,d);return B;}
function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}
function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}
function f(T,s,y,E){var z,A;T=encodeURIComponent(T);z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}
function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}
function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);C(R);});});}
function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;a.setSystemAlias(F,I.resolutionResult);R(F);}).fail(C);});}
function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);C(R);});});}
function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";a.setSystemAlias(R,I.resolutionResult);D(R);});});}
function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}
function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{L.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";a.setSystemAlias(R,I.resolutionResult);return R;}
function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}
function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}
function w(T,P){var s=v(T);if(s.error){L.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(C){return C.name.toUpperCase()+"%3d"+C.value;});var D,A=true;if(P.hasOwnProperty("DYNP_SKIP_SEL_SCREEN")){D=P["DYNP_SKIP_SEL_SCREEN"];delete P["DYNP_SKIP_SEL_SCREEN"];if(D[0]===""||D[0]===" "||D[0]==="0"||D[0]===0||(D[0]&&D[0].toLowerCase()==="false")){A=false;}}var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var B=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(B){y.push(B);}var H=y.length>0;return s.transactionParamName+"="+(H&&A?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}
function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}
return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/Log"],function(U,u,q,i,L){"use strict";var S="";var O={apply:"apply",applied:"applied"};
function a(o){return(o.protocol()||"").length>0;}
function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var p=u.getLocalStorage();var t=p.getItem(K);var w={};if(t){try{w=JSON.parse(t);}catch(x){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+t);}return new q.Deferred().resolve(w).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}
function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,w,x;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(y){D.reject(y);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){w=R.language;}else{x=sap.ushell.Container.getUser();if(!x){L.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");w="en";}else{w=x.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+w;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}
function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}
function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}
function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){L.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}
function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}
function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}
function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}L.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}
function h(V){L.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}
function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}
function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}
function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var w=R[n].pathPrefix;var P=p===w;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(w);}else{m(p);}});return D.promise();}
return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ushell/utils/UrlParsing","sap/ushell/_ApplicationType/systemAlias"],function(u,s){"use strict";
function g(){return u;}
function a(U,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(U)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(U);}throw new Error("Invalid system alias semantics: '"+e+"'");}
function b(p,U){var S,f;if(p){var e=U.match(/#.*/);if(e){f=e;S=U.replace(e,"");}else{S=U;f="";}U=S+((U.indexOf("?")<0)?"?":"&")+p+f;}return U;}
function c(p,U){var e=U.match(/#.*/);var f=e&&e[0];if(!f){var P=u.paramsToString(p);return b(P,U);}var h=u.parseShellHash(f);Object.keys(p).forEach(function(l){var m=p[l];h.params[l]=[m];});var i=Object.keys(h.params).reduce(function(o,K){var v=h.params[K];var V=v.map(function(l){return encodeURIComponent(l);});o[encodeURIComponent(K)]=V;return o;},{});h.params=i;var j=U.replace(f,"");var k=u.constructShellHash(h);return j+"#"+k;}
function d(r,e){if(r["sap-system"]&&r["sap-system"]!=null&&r["sap-system"]!=undefined&&r["sap-system"]!=""){r.systemAlias=r["sap-system"];}else{r.systemAlias=e.systemAlias;}if(r.systemAlias===undefined){delete r.systemAlias;}}
return{getURLParsing:g,appendParametersToUrl:b,appendParametersToIntentURL:c,absoluteUrlDefinedByUser:a,setSystemAlias:d};});
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";
function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(S){S.compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params","sap-iframe-hint","sap-keep-alive","sap-wd-configId"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});}).catch(function(k){j(k);});});}
function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}
function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}
function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}
function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}
function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}a.setSystemAlias(R,I.resolutionResult);["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}
function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}
function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}
function r(I,m,E,j){var A=I.params["sap-ui2-wd-app-id"][0];var C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];var o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}
return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";
function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}
function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}
function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}
function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}
function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}
function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}
function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}
return{createModel:d};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DefinitionParameterSetBuilder',["sap/ushell/_URLTemplateProcessor/TemplateParameterParser","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(t,r,u,T){"use strict";var S="/payload/parameters/names";
function b(p,s,d){if(!p||!p.names){return{};}if(!p.hasOwnProperty("mergeWith")){return p.names;}var m=p&&p.mergeWith;if(Array.isArray(m)===false&&typeof m!=="string"){throw new Error("The value of 'mergeWith' can only be a string or an array");}var P=p&&p.names;var D=f(p.mergeWith,s,d,{});var M=D.map(function(a){var o=t.parsePath(d,a);v(o);var c=r.resolvePath(o,{},s,{},{});if(!T.isPlainObject(c)){throw new Error("Cannot merge parameters from '"+a+"'. The path must point to an object");}return c;}).reduce(function(o,a){o=u.mergeObject(o,a);return o;},{});return u.mergeObject(M,P);}
function v(p){if(p.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}p.value.forEach(function(P){if(P.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});}
function f(m,s,d,V){if(Array.isArray(m)){return m.slice().reverse();}if(typeof m==="string"){if(V[m]){throw new Error("Detected circular dependency of templates caused by mergeWith statements: ensure the template merges its parameters with a base template.");}V[m]=true;var p=t.parsePath(d,m);v(p);var a=r.resolvePath(p,{},s,{},{});if(!a){throw new Error("The specified mergeWith path does cannot be resolved: '"+m+"'");}var h=S.split("/").slice(1).reduce(function(o,c){if(o.result&&o.obj&&o.obj.hasOwnProperty(c)){o.obj=o.obj[c];}else{o.result=false;}return o;},{obj:a,result:true}).result;if(!h){throw new Error(m+" does not contain "+S+". Please make sure "+m+" points to the root of a URL template.");}return f(a.payload.parameters.mergeWith,s,d,V).concat([m+S]);}return[];}
return{buildDefinitionParameterSet:b};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/base/util/deepExtend"],function(d){"use strict";
function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}
function a(n){return n.type==="reference"&&!n.namespace;}
function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}
function c(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}
function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}
function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}
function g(D){var o=d({},D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}
return{buildDependencyGraph:c,getDependencyResolutionOrder:g};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/base/util/deepExtend","sap/ui/thirdparty/URI","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/utils/type"],function(d,U,_,u){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var j=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(j.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+j.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var j=V.every(_.hasValue);return j?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(_.hasValue(P)){return P;}return _.hasValue(n)?n:undefined;});}},replace:{args:["strRegExp","strReplace","flags?"],minValues:1,maxValues:1,fn:function(A,v){var j=new RegExp(A.strRegExp,A.flags);var R=A.strReplace||"";if(typeof v===undefined||v===null){return v;}if(u.isArray(v)){if(v.length===1){return O.replace.fn.call(this,A,v[0]);}return v.map(function(V){return O.replace.fn.call(this,A,V);});}if(u.isPlainObject(v)){return Object.keys(v).reduce(function(o,k){var V=v[k];o[k]=O.replace.fn.call(this,A,V);return o;},{});}if(typeof v==="string"){return v.replace(j,R);}return O.replace.fn.call(this,A,v+"");}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!u.isPlainObject(s)&&!u.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=_.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var j=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(j.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var j=new RegExp(s);var m=v.filter(function(V){var I;if(u.isPlainObject(V)){I=Object.keys(V);}else if(u.isArray(V)){I=V;}else{I=[""+V];}return I.some(j.exec.bind(j));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},stringify:{args:[],minValues:1,fn:function(A,v){if(u.isArray(v)){if(v.length===0){return"";}if(v.length===1){v=v[0];}}if(typeof v==="string"){return v;}return JSON.stringify(v);}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var V=v[0];if(typeof V!=="string"){return V;}return encodeURIComponent(V);}}};
function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}
function g(v){var V;if(u.isArray(v)){V=v;}else if(u.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}
function a(F,o,v){if(v!==undefined&&!u.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}
function b(F,o,v){if(v!==undefined&&!u.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=u.isArray(v)?v.length:0;if(_.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(_.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}
function c(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}
function e(A){return A.charAt(A.length-1)!=="?";}
function r(A){return A.substr(0,A.length-1);}
function p(F,A){var j=d([],O[F].args);if(c(j)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=j.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=j.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}
function f(P,F,j,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,j);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}
function t(s){return s.split("").map(function(j){if(j==="["){return"[\\[]";}return"["+j+"]";}).join("");}
function h(){var A=Object.keys(O);return A.map(t).join("|");}
return{getPossibleFunctionsRegExpString:h,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/base/util/deepExtend","sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/_URLTemplateProcessor/utils"],function(d,_,a){"use strict";var O={literal:r,expression:g,reference:h,function:e,path:b,pipe:c};
function f(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}
function r(p){return p.value;}
function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return f(l,k,R);}
function c(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return _.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},d({},o[D]||{}));}
function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return _.applyFunctionInValueContext(F,k,v);}
function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}
function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}
function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}
function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}
return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:c,resolveParameterValue:i,resolveAllParameters:j};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/_URLTemplateProcessor/Functions"],function(_){"use strict";
function p(D,E){var s=k();var t=s.exec(E);if(t===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+_.getPossibleFunctionsRegExpString()+")[^a-z]";var u=new RegExp(A);if(u.exec(S)){return g(D,S);}return d(D,S);}
function a(D,P){var s=h(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(g.bind(null,D)))};}
function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var t=s.split(":");N=t[0];s=t[1];}var u={type:"reference",value:s};if(N){u.namespace=N;}return u;}
function c(D,P){var s=P.split("/");var t="relative";if(s[0]===""){t="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:t,value:s.map(e.bind(null,D))};}
function d(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return d(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return c(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return f(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}
function e(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return d(D,r(P));}return{type:"literal",value:P};}
function f(L){return{type:"literal",value:L};}
function g(D,F){var t=F.split(/[(\s]/)[0];var R=m(F,t);R=R.replace(/^\s+/,"");var u="";if(R.charAt(0)==="("){var v=R.search(/([)]\s)|([)]$)/);if(v===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}u=R.substr(1,v-1);R=m(R,"("+u+")");R=R.replace(/^\s+/,"");}var w=R;return{type:"function",name:t,args:h(D,u,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(d.bind(null,D)),params:h(D,w,",").map(d.bind(null,D))};}
function h(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var t=A.length-1;var P=A[t];var M=P.length>0&&P.charAt(P.length-1)==="\\";var u="";if(M){u=A.pop();u=u.substr(0,u.length-1)+s;}A.push(u+N);return A;},[]);return S;}
function i(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=n(s);if(I){return f(s);}var t="expression";var u=p(D,s);var v={type:t,value:u};if(R){u.renameTo=R;}return v;}
function j(s){var E=s.indexOf("{")===0;var t=k();var G=t.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}
function k(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var u="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+u+"|"+V+")";var t="("+F+"(,"+F+")*)";var w="("+"[(]"+t+"[)]"+")?";var A=_.getPossibleFunctionsRegExpString();var x="("+"("+A+")"+"("+w+")"+")";var W="([*]([|]"+x+")*)";var E="^{("+W+"|"+"(("+x+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var y=new RegExp(E);return y;}
function l(s){return j(s)!==null;}
function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}
function m(t,P){if(t.indexOf(P)===0){return t.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}
function n(s){return typeof s==="string"&&!l(s);}
function o(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=i(D,v);return s;},{});}
function q(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=f(v);return s;},{});}
return{parseTemplateParameterSet:o,parseTemplateParameterSetAsLiterals:q,parsePath:c,_isExpression:l,_parseList:h,_parseParameterValue:i};});
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/base/util/deepExtend"],function(d){"use strict";
function h(v){return v!==null&&typeof v!=="undefined";}
function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}
function m(a,b){var c=d({},a);var e=d({},b);return Object.keys(e).reduce(function(o,O){o[O]=e[O];return o;},c);}
return{mergeObject:m,hasValue:h,removeArrayParameterNotation:r};});
sap.ui.predefine('sap/ushell/adapters/AppVariantPersonalizationAdapter',["sap/ushell/services/_Personalization/constants","sap/ui/fl/apply/api/UI2PersonalizationApplyAPI","sap/base/Log","sap/ui/thirdparty/jquery"],function(c,U,L,q){"use strict";
function r(C){var s="sap.ushell.personalization#";if(C.substring(0,s.length)!==s){L.error("Unexpected ContainerKey "+C);return C;}var k=C.substring(s.length);k=k.split("#")[0];return k;}
A.prototype._determineCategory=function(s){if(!s){return"U";}if(s.keyCategory&&s.keyCategory===c.keyCategory.FIXED_KEY&&s.writeFrequency&&s.writeFrequency===c.writeFrequency.LOW&&s.clientStorageAllowed&&s.clientStorageAllowed===true){return"P";}return"U";};
A.prototype.getMap=function(){return{category:this._category,service:this._oService,changedKeys:this._oChangedKeys,component:this._oComponent,deletedKeys:this._oDeletedKeys,container:this._aJSONContainer,scope:this._oScope,appName:this._sAppName,appVarId:this._sAppVarId,appVersion:this._sAppVersion,containerKey:this._sContainerKey};};
function A(C,s,S,b){this._oService=s;this._oScope=S;this._sAppVarId=S.appVarId;this._sAppVersion=S.appVersion;this._oComponent=S.component;this._sContainerKey=r(C);this._sAppName=b||"";this._category=this._determineCategory(S);this._aJSONContainer=[];this._oChangedKeys={};this._oDeletedKeys={};}
A.prototype._reset=function(){this._aJSONContainer=[];};
A.prototype.load=function(){var d=new q.Deferred();sap.ui.getCore().loadLibraries(["sap/ui/fl"]).then(function(){return U.load({selector:this._oComponent,containerKey:this._sContainerKey});}.bind(this)).then(function(C){this._aJSONContainer=C||[];d.resolve(C);}.bind(this)).catch(function(e){L.warning(e);this._reset();d.reject(e);}.bind(this));return d.promise();};
A.prototype.save=function(){var p=[];var d=new q.Deferred();sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(b){Object.keys(this._oChangedKeys).forEach(function(i){var I=this._oChangedKeys[i];var P=Object.assign({selector:this._oComponent},I);p.push(b.create(P));},this);Object.keys(this._oDeletedKeys).forEach(function(i){p.push(b.deletePersonalization({selector:this._oComponent,containerKey:this._sContainerKey,itemName:i}));},this);Promise.all(p).then(function(R){this._oChangedKeys={};this._oDeletedKeys={};d.resolve();}.bind(this),function(e){d.reject(e);});}.bind(this));return d.promise();};
A.prototype.del=function(){var d=new q.Deferred();sap.ui.require(["sap/ui/fl/write/api/UI2PersonalizationWriteAPI"],function(b){this.load().then(function(){var p=[];this._aJSONContainer.forEach(function(i){p.push(b.deletePersonalization({selector:this._oComponent,containerKey:this._sContainerKey,itemName:i.itemName}));},this);Promise.all(p).then(function(R){d.resolve();},function(e){d.reject(e);});}.bind(this));}.bind(this));return d.promise();};
A.prototype.getItemKeys=function(){var b=[];this._aJSONContainer.forEach(function(m){if(m.category==="V"){b.push("VARIANTSET#"+m.itemName);}else if(m.category==="I"){b.push("ITEM#"+m.itemName);}});return b;};
A.prototype.containsItem=function(i){return this.getItemKeys().indexOf(i)>=0;};
A.prototype._findItemIndex=function(I,C){var i;for(i=0;i<this._aJSONContainer.length;i=i+1){if(this._aJSONContainer[i].itemName===I&&this._aJSONContainer[i].category===C){return i;}}return undefined;};
A.prototype._locateItem=function(i){var b={index:-1};if(i.indexOf("ITEM#")===0){b.trueItemKey=i.substring("ITEM#".length,"ITEM#".length+40);b.category="I";}else if(i.indexOf("VARIANTSET#")===0){b.trueItemKey=i.substring("VARIANTSET#".length,"VARIANTSET#".length+40);b.category="V";}else if(i.indexOf("ADMIN#")!==0){L.error("Unknown itemkey prefix"+i);}b.index=this._findItemIndex(b.trueItemKey,b.category);return b;};
A.prototype.getItemValue=function(i){var I="",o,b=this._locateItem(i);if(b.index>=0){I=this._aJSONContainer[b.index].content;o=I;}return o;};
A.prototype.setItemValue=function(i,I){var o=this._locateItem(i);var b;if(o.index>=0){b=this._aJSONContainer[o.index];b.content=I;}else{b={reference:this._sAppVarId,content:I,itemName:o.trueItemKey,category:o.category,containerKey:this._sContainerKey,containerCategory:this._category};this._aJSONContainer.push(b);}this._oChangedKeys[o.trueItemKey]=b;delete this._oDeletedKeys[o.trueItemKey];};
A.prototype.delItem=function(i){var I=this._locateItem(i);if(I.index>=0){this._aJSONContainer.splice(I.index,1);this._oDeletedKeys[I.trueItemKey]=true;return;}};
var a=function(){};
a.prototype.getAdapterContainer=function(C,s,b){return new A(C,this,s,b);};
a.prototype.delAdapterContainer=function(C,s){return this.getAdapterContainer(C,s).del();};
return a;});
sap.ui.predefine('sap/ushell/adapters/cdm/ClientSideTargetResolutionAdapter',["sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/Log"],function(V,q,d,L){"use strict";var C=function(s,p,a){this._oAdapterConfig=a&&a.config;var c=sap.ushell.Container,P="";if(c){P=c.getLogonSystem().getProductName()||"";}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:P}};this.getInbounds=function(){var t=this;if(!this._getInboundsDeferred){this._getInboundsDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSiteWithoutPersonalization();}).then(function(S){var u=(S._version&&V(S._version).getMajor()===3)?"sap/ushell/adapters/cdm/v3/utilsCdm":"sap/ushell/utils/utilsCdm";sap.ui.require([u],function(U){var i=U.formatSite(S)||[];t._getInboundsDeferred.resolve(i);});},function(e){t._getInboundsDeferred.reject(e);});}return this._getInboundsDeferred.promise();};this._createSIDMap=function(A){return Object.keys(A).sort().reduce(function(S,i){var o=A[i];var b="SID("+o.systemId+"."+o.client+")";if(!S.hasOwnProperty(b)&&o.hasOwnProperty("systemId")&&o.hasOwnProperty("client")){S[b]=i;}return S;},{});};this._getSystemAliases=function(){var t=this;if(!this.oSystemAliasesDeferred){this.oSystemAliasesDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSiteWithoutPersonalization();}).then(function(S){var o=d({},S.systemAliases||{});Object.keys(o).forEach(function(i){o[i].id=i;});t.oSystemAliasesDeferred.resolve(o);},function(e){t.oSystemAliasesDeferred.reject(e);});}return this.oSystemAliasesDeferred.promise();};this.resolveSystemAlias=function(S){var D=new q.Deferred(),t=this;this._getSystemAliases().done(function(o){var m,b;if(o.hasOwnProperty(S)){b=o[S];if(S===""){b.properties=d({},t._oLocalSystemAlias.properties,b.properties||{});}D.resolve(b);return;}if(S===""){D.resolve(t._oLocalSystemAlias);return;}S=S.toUpperCase(S);if(!t._oSIDMap){t._oSIDMap=t._createSIDMap(o);}if(t._oSIDMap.hasOwnProperty(S)){var M=o[t._oSIDMap[S]];D.resolve(M);return;}m="Cannot resolve system alias "+S;L.warning(m,"The system alias cannot be found in the site response","sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter");D.reject(m);}).fail(function(e){D.reject(e);});return D.promise();};this.getContentProviderDataOriginsLookup=function(){var t=this;if(!this.oContentProviderDataOriginsDeferred){this.oContentProviderDataOriginsDeferred=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(S){return S.getSiteWithoutPersonalization();}).then(function(S){var l=null;if(S.contentProviderDataOrigins){l=d({},S.contentProviderDataOrigins);}t.oContentProviderDataOriginsDeferred.resolve(l);},function(e){t.oContentProviderDataOriginsDeferred.reject(e);});}return this.oContentProviderDataOriginsDeferred.promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/CommonDataModelAdapter',["sap/ui/thirdparty/URI","sap/base/Log","sap/base/util/Version","sap/base/util/UriParameters","sap/ui/thirdparty/jquery"],function(U,L,V,a,q){"use strict";var C=function(u,p,A){this.oAdapterConfiguration=A;if(A&&A.config&&A.config.siteData){this.oCdmSiteDataRequestPromise=new q.Deferred().resolve(A.config.siteData);}else if(A&&A.config&&A.config.siteDataPromise){this.oCdmSiteDataRequestPromise=A.config.siteDataPromise;}else{var s=this._identifySiteUrlFromConfig(A);var b=this._normalizeUrl(s,location.href);this.oCdmSiteDataRequestPromise=this._requestSiteData(b);}};
C.prototype._requestSiteData=function(u){var s=new q.Deferred();if(!u){return s.reject("Cannot load site: configuration property 'siteDataUrl' is missing for CommonDataModelAdapter.");}q.ajax({type:"GET",dataType:"json",url:u}).done(function(r){s.resolve(r);}).fail(function(e){L.error(e.responseText);s.reject("CDM Site was requested but could not be loaded.");});return s.promise();};
C.prototype._normalizeUrl=function(u,c){if(typeof u!=="string"){return u;}if(u.indexOf("http")===0){return u;}var b=document.getElementsByTagName("base")[0];return(new U(u,b).absoluteTo(c)).toString();};
C.prototype.getSite=function(){var d=new q.Deferred();this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s);delete S.personalization;d.resolve(S);}).fail(function(m){d.reject(m);});return d.promise();};
C.prototype.getPersonalization=function(){var d=new q.Deferred(),t=this;this.oCdmSiteDataRequestPromise.done(function(s){var S=q.extend({},s),b=S._version,p;if(t.oAdapterConfiguration&&t.oAdapterConfiguration.config&&t.oAdapterConfiguration.config.ignoreSiteDataPersonalization){delete S.personalization;}if(S.personalization){p=S.personalization._version;if(Object.keys(S.personalization).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(S.personalization);}else{t._readPersonalizationDataFromStorage(b).done(function(P){p=P._version;if(Object.keys(P).length>0&&!t._isPersonalizationVersionValid(b,p)){L.error("Personalization version is not compatible to the site version and will not be loaded."+" Please proceed to personalize the homepage again if needed. Personalization version: "+p+"; Site version: "+b);d.resolve();return;}d.resolve(P);}).fail(function(m){d.reject(m);});}}).fail(function(m){d.reject(m);});return d.promise();};
C.prototype._isPersonalizationVersionValid=function(s,p){if(!s){return false;}var S=new V(s).getMajor(),P=new V(p);if(S>=3){return P.getMajor()===S;}return P.getMajor()<3;};
C.prototype.setPersonalization=function(p){var P=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var c,s={keyCategory:o.constants.keyCategory.FIXED_KEY,writeFrequency:o.constants.writeFrequency.LOW,clientStorageAllowed:true},b={container:"sap.ushell.cdm.personalization",item:"data"},d=new V(p.version);if(d.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var e=o.getPersonalizer(b,s,c);e.setPersData(p).done(function(){L.info("Personalization data has been stored successfully.");P.resolve();}).fail(function(){P.reject("Writing personalization data failed.");});});return P.promise();};
C.prototype._readPersonalizationDataFromStorage=function(c){var p=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(P){var s={keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.LOW,clientStorageAllowed:true};var o={container:"sap.ushell.cdm.personalization",item:"data"};if(c){var v=new V(c);if(v&&v.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}}P.getPersonalizer(o,s).getPersData().done(function(b){p.resolve(b||{});}).fail(function(){p.reject("Fetching personalization data failed.");});});return p.promise();};
C.prototype._identifySiteUrlFromConfig=function(A){var p=new a(window.location.href);var s=p.get("sap-ushell-cdm-site-url");var c=A&&A.config;if((c&&!c.allowSiteSourceFromURLParameter)&&s){s=null;}if(c&&!s){s=c.siteDataUrl||c.cdmSiteUrl;}this.sCdmSiteUrl=s;return s;};
return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ConfigurationDefaultsAdapter',["sap/ushell/bootstrap/cdm/cdm.constants","sap/base/util/deepClone"],function(c,d){"use strict";return function(){this.getDefaultConfig=function(){return Promise.resolve(d(c.defaultConfig));};};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/ContainerAdapter',["sap/ushell/utils","sap/ushell/User","sap/ushell/System","sap/ui/thirdparty/URI","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,S,a,L,q){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/ContainerAdapter",L.Level.INFO);var C=function(i,p,P){var b="/sap/public/bc/icf/logoff",s=g(P.config,b),o=e(P.config),c=f(i,P.config),d=k(P.config);function g(m,D){if(m.systemProperties&&m.systemProperties.logoutUrl){return m.systemProperties.logoutUrl;}return D;}function e(m){var n,r=m.userProfile;if(r){n=h(r.defaults,m.userProfilePersonalization,r.metadata);}return new U(n||j());}function f(O,m){var n=m.systemProperties,A=O.getAlias(),r=O.getPlatform(),B=O.getBaseUrl(),t,v,w,x,y,z,T;if(n){A=n.alias||A;r=n.platform||r;t=n.SID;v=n.client;w=n.productName;x=n.productVersion;y=n.systemName;z=n.systemRole;T=n.tenantRole;}return new S({alias:A,platform:r,baseUrl:B,system:t,client:v,productName:w,productVersion:x,systemName:y,systemRole:z,tenantRole:T});}function h(D,m,n){var r=q.extend(j(),D,m);r.bootTheme=r.bootTheme||{theme:r.theme,root:""};delete r.theme;if(n){if(n.editablePropterties){r.setThemePermitted=n.editablePropterties.indexOf("theme")>-1;r.setAccessibilityPermitted=n.editablePropterties.indexOf("accessibility")>-1;r.setContentDensityPermitted=n.editablePropterties.indexOf("contentDensity")>-1;}if(n.ranges){r.ranges=n.ranges;}}return r;}function j(){return{setThemePermitted:false,setAccessibilityPermitted:false,setContentDensityPermitted:false};}function k(A){var m=A&&A.systemProperties&&A.systemProperties.sessionKeepAlive;if(!m){return null;}if(!m.url){l.error("Mandatory parameter 'url' missing in 'sessionKeepAlive' configuration.");return null;}if(m.method!=="HEAD"&&m.method!=="GET"){m.method="HEAD";}return m;}this._getLogoutUrl=function(){return s;};this._setDocumentLocation=function(m){document.location=m;};this.getSystem=function(){return c;};this.getUser=function(){return o;};this.load=function(){return q.when();};this.getCurrentUrl=function(){return window.location.href;};this.logout=function(m){var F;if(!m){throw new Error("Not implemented");}if(u.hasNativeLogoutCapability()){F=(new a(this._getLogoutUrl())).absoluteTo(this.getCurrentUrl()).search("").toString();u.getPrivateEpcm().doLogOff(F);}else{this.logoutRedirect();}return q.when();};this.logoutRedirect=function(){var m=c.adjustUrl(this._getLogoutUrl());this._setDocumentLocation(m);};this.sessionKeepAlive=function(){if(!d){return;}var x=new XMLHttpRequest();x.open(d.method,d.url,true);x.onreadystatechange=function(){if(this.readyState===4){l.debug("Server session was extended");}};x.send();};this._getSessionKeepAliveConfig=function(){return d;};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/LaunchPageAdapter',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/_LaunchPage/readCatalogs","sap/m/GenericTile","sap/m/library","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/utilsCdm","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/components/tiles/utilsRT","sap/base/util/Version","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log","sap/ushell/library"],function(r,m,R,G,M,C,u,a,E,n,o,U,b,W,c,d,V,J,q,f,i,g,O,L,h){"use strict";var j=M.GenericTileMode;var k=h.UI5ComponentType;var l=L.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter"),p=L.Level;
function s(t,P,A){var _,S="sap.ushell.components.tiles.cdm.applauncher",D="sap.ushell.components.tiles.cdm.applauncherdynamic";this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(e){this.oURLParsingService=e[0];this.oCDMService=e[1];}.bind(this));this.getCdmVersionsSupported=function(){return{min:V("0"),max:V("2.0.0")};};this.isSiteSupported=function(e){if(!!e._version&&V(e._version).compareTo(this.getCdmVersionsSupported().max)>0){L.fatal("Invalid CDM site version: Only sites up to version 2.0.0 are supported");return false;}return true;};this.TileType={Tile:"tile",Link:"link"};this.getGroups=function(){var e=new q.Deferred();this._assureLoaded().done(function(N){U.setPerformanceMark("FLP - homepage groups processed");e.resolve(N);}).fail(function(){e.resolve([]);});return e.promise();};this._getTileFromHashInContextOfSite=function(e,N,Q){var T=new q.Deferred(),X=N[Q];if(!X){X=e(Q);N[Q]=X;}X.done(function(Y){var Z={tileIntent:Q,tileResolutionResult:Y};T.resolve(Z);}).fail(function(Y){T.reject("Hash '"+Q+"' could not be resolved to a tile. "+Y);});return T.promise();};this._getTileFromHash=function(e){var N=new q.Deferred();sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(Q){var T=Q.resolveTileIntent.bind(Q);this._getTileFromHashInContextOfSite(T,this._mCatalogTilePromises,e).done(N.resolve).fail(N.reject);}.bind(this));return N.promise();};this._getTileForUrl=function(T){var e=T.indicatorDataSource?"#Shell-dynamicTile":"#Shell-staticTile";return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._assureGroupItemsResolved=function(e,N){var Q=[],T,X;if(e.payload&&e.payload.tiles){T=this._assureGroupTilesResolved(e.payload.tiles,N);Array.prototype.push.apply(Q,T);}if(e.payload&&e.payload.links){X=this._assureGroupLinksResolved(e.payload.links,N);Array.prototype.push.apply(Q,X);}return Q;};this._assureGroupTilesResolved=function(e,N){return(e||[]).map(function(T,Q){return this._resolveGroupTile(T,N).then(function(X){X.isLink=false;return X;});},this);};this._assureGroupLinksResolved=function(e,N){return(e||[]).map(function(Q){return this._resolveGroupTile(Q,N).then(function(T){T.isLink=true;return T;});},this);};this._resolveGroupTile=function(T,e){var N=this._mResolvedTiles;var Q=this._mFailedResolvedTiles;var X;function Y($){N[T.id]=$;if(Q[T.id]){delete Q[T.id];}return $;}function Z(T){var $=T.target;return $&&$.semanticObject==="Shell"&&$.action==="launchURL";}if(N[T.id]){return(new q.Deferred()).resolve(N[T.id]).promise();}if(T.target&&T.target.url){X=q.when(this._getTileForUrl(T));}else if(T.isBookmark){X=this._resolveTileByIntent(T,e);}else if(Z(T)){X=this._resolveTileByIntent(T,e);}else{X=this._resolveTileByAppId(T,e);}X.done(function($){Y($);}).fail(function($){Q[T.id]=$;});return X;};this._resolveTileByAppId=function(T,e){var N,Q,X,Y,Z;function $(f1,g1){return new q.Deferred().reject({logLevel:f1,message:g1}).promise();}if(!i(T)){return $(p.ERROR,"Cannot resolve tile: oTile must be an object");}if(!i(e)){return $(p.ERROR,"Cannot resolve tile: oSite must be an object");}N=T.appId||T.appIDHint;if(!N){return $(p.ERROR,["Cannot resolve tile '",T.id,"': either appId or appIDHint must be specified"].join(""));}Q=e.applications&&e.applications[N];if(!Q){return $(p.INFO,["Tile '",T.id,"' filtered from result: no app found for appId '",N,"' (dangling app reference)"].join(""));}X=this._getFirstInbound(Q);if(!X){return $(p.ERROR,["Cannot resolve tile '",T.id,"': app '",N,"' has no navigation inbound"].join(""));}var a1=b.mapOne(X.key,X.inbound,Q),b1=a1.resolutionResult.applicationType,c1=a1.resolutionResult.additionalInformation,d1=a.last("/core/navigation/enableInPlaceForClassicUIs"),e1=d1?d1[b1]:false;Y=a1.tileResolutionResult;Y.navigationMode=n.computeNavigationModeForHomepageTiles(b1,c1,e1);Y.isLink=false;if(!this._isFormFactorSupported(Y)){return $(p.INFO,["Tile '",T.id,"' filtered from result: form factor not supported"].join(""));}Z=this._toHashFromInbound(X.inbound);return q.when({tileResolutionResult:Y,tileIntent:Z});};this._isFormFactorSupported=function(e){var N=U.getFormFactor();return r.supportsFormFactor(e,N);};this._getFirstInbound=function(e){var N=Object.keys(e["sap.app"].crossNavigation.inbounds).shift(),Q=e["sap.app"].crossNavigation.inbounds[N];return{key:N,inbound:Q};};this._resolveTileByIntent=function(T,e){var N=this._prepareTileHash(T);return this._getTileFromHash(N);};this._prepareTileHash=function(T){var e={},N,Q;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){Q=T.target.parameters||[];Q.forEach(function(X){if(X.name&&X.value){e[X.name]=[X.value];}});N={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:e,appSpecificRoute:T.target.appSpecificRoute};return"#"+c.constructShellHash(N);}return undefined;};this._allPromisesDone=function(e){var N=new q.Deferred(),Q;if(e.length===0){N.resolve([]);}else{var T=e.map(function(X){Q=new q.Deferred();X.always(Q.resolve.bind(Q));return Q.promise();});q.when.apply(this,T).done(function(){var X=Array.prototype.slice.call(arguments);N.resolve(X);});}return N.promise();};this._assureLoaded=function(){var e=this,N;if(this._assureLoadedDeferred){return this._assureLoadedDeferred.promise();}N=new q.Deferred();this._assureLoadedDeferred=N;sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(Q){Q.getSite().done(function(T){if(!e.isSiteSupported(T)){throw new Error("Invalid CDM site version: Check configuration of launchpage adapter and version of FLP site");}var X=[];var Y=r.getGroupsArrayFromSite(T);var Z=r.getDefaultGroup(Y);if(!Z){Z=m.createDefaultGroup(U.generateUniqueId(r.getGroupIdsFromSite(T)));T=m.addGroupToSite(T,Z,0);Y=r.getGroupsArrayFromSite(T);}_=Z;Y.forEach(function($){X=e._assureGroupItemsResolved($,T).concat(X);});e._allPromisesDone(X).done(function(){e._assureLoadedDeferred.resolve(Y);delete e._assureLoadedDeferred;e._logTileResolutionFailures(e._mFailedResolvedTiles);});}).fail(function(T){L.error("Delivering hompage groups failed - "+T);e._assureLoadedDeferred.resolve([]);delete e._assureLoadedDeferred;});});return N.promise();};this._logTileResolutionFailures=function(e){var N={};if(!e){return;}Object.keys(p).filter(function(Q){var T=p[Q];return T>=p.FATAL&&T<=p.ALL;}).forEach(function(Q){N[p[Q]]="";});Object.keys(e).forEach(function(Q){var T=e[Q];if(T.logLevel){N[T.logLevel]=N[T.logLevel].concat(T.message).concat("\n");}});if(N[p.FATAL]){l.fatal(N[p.FATAL]);}if(N[p.ERROR]){l.error(N[p.ERROR]);}if(N[p.WARNING]){l.warning(N[p.WARNING]);}if(N[p.INFO]){l.info(N[p.INFO]);}if(N[p.DEBUG]){l.debug(N[p.DEBUG]);}if(N[p.TRACE]){l.trace(N[p.TRACE]);}};this.getDefaultGroup=function(){var e=new q.Deferred(),N;if(!_){N=this._assureLoaded();}if(N){N.done(function(){e.resolve(_);}).fail(function(Q){e.reject("Failed to access default group. "+Q);});}else{e.resolve(_);}return e.promise();};this._isValidTitle=function(T){if(typeof T!=="string"||!T){return false;}return true;};this._isGroupPreset=function(e){return r.isGroupPreset(e);};this._isGroupLocked=function(e){return r.isGroupLocked(e);};this.addGroup=function(T){var e=new q.Deferred(),N=this.oCDMService,Q,X,Y=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}X="Failed to add the group with title '"+T+"' to the homepage. ";N.getSite().done(function(Z){Q=U.generateUniqueId(r.getGroupIdsFromSite(Z));m.addGroupToSite(Z,m.createEmptyGroup(Q,T));N.save().done(function(){delete Y._assureLoadedDeferred;e.resolve(Z.groups[Q],Q);}).fail(function($){e.reject($);});}).fail(function(Z){e.reject(X+Z);});return e.promise();};this.getGroupTitle=function(e){return r.getGroupTitle(e);};this.setGroupTitle=function(e,N){var Q=this,T=new q.Deferred(),X=this.oCDMService,Y,Z;if(typeof e!=="object"||!r.getGroupId(e)){return T.reject("Unexpected group value").promise();}if(!Q._isValidTitle(N)){return T.reject("Unexpected oGroup title value").promise();}Z="Failed to set new title for group with id '"+r.getGroupId(e)+"'. ";Y=r.getGroupTitle(e);X.getSite().done(function($){if(e){m.setGroupTitle(e,N);}X.save().done(function(){T.resolve();}).fail(function(a1){L.error(a1);T.reject(Y);});}).fail(function($){T.reject(Y,Z+$);});return T.promise();};this.getGroupId=function(e){return r.getGroupId(e);};this.hideGroups=function(e){var N=new q.Deferred(),Q=this.oCDMService,T;if(e&&Array.isArray(e)){T="Failed to hide group. ";Q.getSite().done(function(X){r.getGroupsArrayFromSite(X).forEach(function(Y){m.setGroupVisibility(Y,e&&Array.prototype.indexOf.call(e,r.getGroupId(Y))===-1);});Q.save().done(function(){N.resolve();}).fail(function(Y){N.reject("Hiding of groups did not work as expected - "+Y);});}).fail(function(X){N.reject(T+X);});}else{N.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return N.promise();};this.isGroupVisible=function(e){return r.isGroupVisible(e);};this.moveGroup=function(e,N){var Q=new q.Deferred(),T=this.oCDMService,X,Y;if(!e||!r.getGroupId(e)||N<0){return Q.reject("Unable to move groups - invalid parameters").promise();}Y="Failed to move group with id '"+e.identification.id+"'. ";T.getSite().done(function(Z){var $=r.getGroupIdsFromSite(Z),a1=r.getGroupId(e);if(!$){return Q.reject("groupsOrder not found - abort operation of adding a group.");}else if($.indexOf(a1)===N){return Q.resolve();}X=U.moveElementInsideOfArray($,$.indexOf(a1),N);if(!X){return Q.reject("invalid move group operation - abort.");}m.setGroupsOrder(Z,X);T.save().done(function(){Q.resolve();}).fail(function(b1){Q.reject(b1);});return undefined;}).fail(function(Z){Q.reject(Y+Z);});return Q.promise();};this.removeGroup=function(e){var N=new q.Deferred(),Q=this.oCDMService,T,X;if(typeof e!=="object"){return N.reject("invalid group parameter").promise();}X=r.getGroupId(e);if(!X){return N.reject("group without id given").promise();}T="Failed to remove group with id '"+X+"'. ";Q.getSite().done(function(Y){m.removeGroupFromSite(Y,e);Q.save().done(function(){N.resolve();}).fail(function(Z){N.reject(Z);});}).fail(function(Y){N.reject(T+Y);});return N.promise();};this.resetGroup=function(e){var N=new q.Deferred(),Q=this.oCDMService,T=[],X=this,Y,Z;if(typeof e==="object"&&r.getGroupId(e)){Z=r.getGroupId(e);Y="Failed to reset group with id '"+Z+"'. ";Q.getSite().done(function($){q.extend(true,T,r.getGroupsArrayFromSite($));if(X.isGroupRemovable(e)===false){Q.getGroupFromOriginalSite(Z).done(function(a1){if(typeof $==="object"&&r.getGroupFromSite($,Z)){m.overwriteGroup($,a1,Z);}Q.save().done(function(){N.resolve(a1);}).fail(function(b1){N.reject("Group could not be reset - "+b1,T);});}).fail(function(a1){N.reject("Group could not be reset - "+a1,T);});}else{N.reject("Group could not be reset as it was created by the user",T);}}).fail(function($){N.reject(Y+$,[]);});}return N.promise();};this.getTileTitle=function(T){return r.getTileTitle(this._mResolvedTiles,T);};this.getTileSubtitle=function(T){return r.getTileSubtitle(this._mResolvedTiles,T);};this.getTileIcon=function(T){return r.getTileIcon(this._mResolvedTiles,T);};this.getTileInfo=function(T){return r.getTileInfo(this._mResolvedTiles,T);};this.getTileIndicatorDataSource=function(T){var e=this._mResolvedTiles[T.id],N={},Q;if(T.indicatorDataSource){N.indicatorDataSource=f({},T.indicatorDataSource);if(T.dataSource){N.dataSource=f({},T.dataSource);}return N;}if(!e){return N;}Q=e.tileResolutionResult;if(Q.indicatorDataSource){N.indicatorDataSource=f({},Q.indicatorDataSource);if(Q.indicatorDataSource.hasOwnProperty("dataSource")){var X=Q.indicatorDataSource.dataSource,Y=Q.dataSources;if(Y&&Y.hasOwnProperty(X)){N.dataSource=f({},Y[X]);}else{L.warning("datasource referenced but not found for tile: "+e.tileIntent);}}if(U.getMember(Q,"runtimeInformation.componentProperties.url")){var Z=U.getMember(N,"indicatorDataSource.path");var $=U.getMember(N,"dataSource.uri");var a1=U.getMember(Q,"runtimeInformation.componentProperties.url");var b1=u(Z,$,a1,this.getWindowLocationHref());if(!b1.error){if(Z){N.indicatorDataSource.path=b1.uri;}if($){N.dataSource.uri=b1.uriParent;}}}}return N;};this.getWindowLocationHref=function(){return window.location.href;};this.isGroupRemovable=function(e){return!this._isGroupPreset(e);};this.isGroupLocked=function(e){return this._isGroupLocked(e);};this.getGroupTiles=function(e){return r.getGroupTiles(e).concat(r.getGroupLinks(e));};this.getLinkTiles=function(e){return r.getGroupLinks(e);};this.getTileType=function(T){if(r.isLink(this._mResolvedTiles,T)){return this.TileType.Link;}return this.TileType.Tile;};this.getTileId=function(T){return r.getTileId(T);};this.getTileSize=function(T){return r.getTileSize(this._mResolvedTiles,T)||"1x1";};this.getTileTarget=function(T){var e,N=r.getTileId(T),Q=this._mResolvedTiles[N],X;if(T.target&&T.target.url){return T.target.url;}if(Q&&Q.tileResolutionResult){e=Q.tileResolutionResult;if(e.isCustomTile!==true){return Q.tileIntent;}if(e&&typeof e.targetOutbound==="object"){X=this._toHashFromOutbound(e.targetOutbound);if(X){return X;}}}L.warning("Could not find a target for Tile with id '"+N+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};this.isLinkPersonalizationSupported=function(T){return true;};this.isTileIntentSupported=function(T){return(this._mFailedResolvedTiles[T.id]===undefined);};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.setTileVisible=function(T,N){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutVisibility(e.tileComponent,N,e.visibility);}e.visibility=N;}};this.getTileView=function(e){var N=this;return new q.Deferred(function(Q){return N._getTileView(e,false).then(function(T){Q.resolve(T);},function(T){var X="Tile with ID '"+e.id+"' could not be initialized"+(T?":\n"+T:".");L.error(X,null,e.tileType);Q.reject(X);});}).promise();};this._getTileUiComponentContainerSync=function(T,e,N){var Q=this,X,Y,Z,$,a1={};if(N===true){Y=Q._createTileComponentData(T,true,e);}else{Y=Q._createTileComponentData(T,false,e);}X=e.tileResolutionResult;if(e.isLink){Z=X.navigationMode;return Q._createLinkInstance(T,N,Z,G,o);}if(typeof X.tileComponentLoadInfo==="string"){if(Y.properties.indicatorDataSource&&Y.properties.indicatorDataSource.path){a1.name="sap.ushell.components.tiles.cdm.applauncherdynamic";}else{a1.name="sap.ushell.components.tiles.cdm.applauncher";}}else if(typeof X.tileComponentLoadInfo==="object"&&X.tileComponentLoadInfo!==null){a1=X.tileComponentLoadInfo.componentProperties||{};a1.name=X.tileComponentLoadInfo.componentName;}a1.componentData=Y;if(a1.manifest){a1.componentData.properties=a1.componentData.properties||{};a1.componentData.properties.manifest=a1.manifest;}if(a1.name){a1.async=false;var b1;try{$=sap.ui.component(a1);}catch(c1){L.error(c1.message+"\n-- An error occurred while instantiating "+"the tile component for "+a1.name,c1.stack?c1.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}b1=new C({component:$,height:"100%"});if(!N){Q._mResolvedTiles[T.id].tileComponent=$;}return b1;}return null;};this._getTileUiComponentContainer=function(T,e,N){var Q=this,X,Y,Z,$,a1,b1,c1=new q.Deferred();if(N===true){Y=Q._createTileComponentData(T,true,e);}else{Y=Q._createTileComponentData(T,false,e);}X=e.tileResolutionResult;if(e.isLink){Z=X.navigationMode;c1.resolve(Q._createLinkInstance(T,N,Z,G,o));return c1.promise();}var d1=this._createTileComponentProperties(Y,X.tileComponentLoadInfo);if(!d1.name){return c1.reject("Cannot find name of tile component for tile with id: '"+T.id+"'").promise();}if(d1.manifest){Y.properties=Y.properties||{};Y.properties.manifest=d1.manifest;}b1=this.isCustomTile(d1.name);var e1=function(i1){var e;$=i1.componentHandle.getInstance();a1=new C({component:$,height:"100%"});if(!N){e=Q._mResolvedTiles[T.id];e.tileComponent=$;if(typeof e.visibility==="boolean"){Q._notifyTileAboutVisibility($,e.visibility);}}return a1;};var f1=function(i1){return i1.createComponent({loadCoreExt:b1,loadDefaultDependencies:false,componentData:Y,url:d1.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:d1,ui5ComponentName:d1.name},{},[],k.Visualization).then(e1);};var g1=function(){var i1={componentData:Y,url:d1.url,name:d1.name,async:false};$=sap.ui.component(i1);var j1={componentHandle:{getInstance:function(){return $;}}};return e1(j1);};if(b1){E.once("CoreResourcesComplementLoaded").do(function(){sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(i1){f1(i1).then(function(a1){c1.resolve(a1);}).fail(function(j1){c1.reject(j1);});});});}else{var h1=g1();c1.resolve(h1);}return c1.promise();};this._createTileComponentProperties=function(T,e){var N={};if(typeof e==="string"){if(T.properties.indicatorDataSource&&T.properties.indicatorDataSource.path){N.name=D;}else{N.name=S;}return N;}if(typeof e==="object"&&e!==null){N=e.componentProperties||{};N.name=e.componentName;}return N;};this._getTileView=function(e){var N,Q,T=new q.Deferred();if(typeof e!=="object"||!e.id){Q="Invalid input parameter passed to _getTileView: "+e;L.error(Q);return T.reject(Q).promise();}N=this._mResolvedTiles[e.id];if(N){return this._getTileUiComponentContainer(e,N,false);}Q="No resolved tile found for tile ID: "+e.id;L.error(Q);return T.reject(Q).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}return this._getTileUiComponentContainerSync(e,e,true);};this._getCatalogTileViewControl=function(e){var N=new q.Deferred();if(typeof e!=="object"){var Q="Invalid input parameter passed to _getCatalogTileView: "+e;L.error(Q);return N.reject(Q).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createTileComponentData=function(T,e,N){var Q=e?this.getCatalogTileTitle(T):this.getTileTitle(T),X=e?this.getCatalogTilePreviewSubtitle(T):this.getTileSubtitle(T),Y=e?this.getCatalogTilePreviewIcon(T):this.getTileIcon(T),Z=e?this.getCatalogTilePreviewInfo(T):this.getTileInfo(T),$=e?this.getCatalogTileTargetURL(T):this.getTileTarget(T),a1=this.getTileIndicatorDataSource(T),b1={properties:{},startupParameters:{}};if(N.tileResolutionResult.isCustomTile===true&&N.tileResolutionResult.startupParameters){b1.startupParameters=N.tileResolutionResult.startupParameters;}if(Q){b1.properties.title=Q;}if(Z){b1.properties.info=Z;}if(X){b1.properties.subtitle=X;}if(Y){b1.properties.icon=Y;}if($){b1.properties.targetURL=$;}if(a1.indicatorDataSource){b1.properties.indicatorDataSource=a1.indicatorDataSource;if(a1.dataSource){b1.properties.dataSource=a1.dataSource;}}if(N.tileResolutionResult){b1.properties.navigationMode=N.tileResolutionResult.navigationMode;}return b1;};this._createLinkInstance=function(T,e,N,Q,o){var X,Y,Z,$=this.getTileSubtitle(T);var G=Q;if(e===true){X=this.getCatalogTileTitle(T);}else{X=this.getTileTitle(T);}Y=new G({mode:j.LineMode,subheader:$,header:X,url:W.getLeanURL(this.getTileTarget(T)),press:function(a1){this._genericTilePressHandler(T,a1);}.bind(this)});if(N){Z=o.i18n.getText(N+"NavigationMode");Y.setAriaLabel(Z+" "+X+" "+$);}this._mResolvedTiles[T.id].linkTileControl=Y;return Y;};this._genericTilePressHandler=function(T,e){var N;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){N=this.getTileTarget(T);if(N){if(N[0]==="#"){hasher.setHash(N);}else{W.openURL(N,"_blank");}}}};this._addTileToSite=function(e,N,Q,T){var X=this,Y=new q.Deferred(),Z=c.parseShellHash(Q.properties.targetURL),$={id:X.getTileId(Q),target:{semanticObject:Z.semanticObject,action:Z.action,parameters:K(Z.params)}};e.groups[N.identification.id].payload.tiles.push($);T.save().done(function(){Y.resolve($);}).fail(function(a1){Y.reject(a1);});return Y.promise();};this.addTile=function(e,N){var Q=new q.Deferred(),T,X=this.oCDMService,Y;if(!N){N=_;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),N);}return Q.reject("Extension Tile without URL").promise();}Y=x();Y.appId=e.tileResolutionResult.appId;this._mResolvedTiles[Y.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};X.getSite().done(function(Z){Z.groups[N.identification.id].payload.tiles.push(Y);X.save().done(function(){Q.resolve(Y);}).fail(function($){Q.reject($);});}).fail(function(Z){T="Failed to add tile with id '"+Y.id+"' to group with id '"+N.identification.id+"'. ";Q.reject(T+Z);});return Q.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var N={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){N.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;N.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return N;};this.removeTile=function(N,T,Q){var X=this.oCDMService,Y,Z=new q.Deferred(),$=this;if(!N||typeof N!=="object"||!N.identification||!N.identification.id||!T||typeof T!=="object"||!T.id){return Z.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}Y="Failed to remove tile with id '"+T.id+"' from group with id '"+N.identification.id+"'. ";X.getSite().done(function(a1){var b1,c1;Q=+Q;try{b1=a1.groups[N.identification.id].payload;}catch(e){Z.reject(a1.groups[N.identification.id],Y);}c1=$.getTileType(T)===$.TileType.Link?"links":"tiles";if($.getTileType(T)===$.TileType.Link){Q-=b1.tiles.length;}if(Q>=0){b1[c1].splice(Q,1);}else{b1[c1]=b1[c1].filter(function(d1){return d1.id!==T.id;});}X.save().done(function(){Z.resolve();}).fail(function(d1){L.error(d1);Z.reject(a1.groups[N.identification.id],d1);});}).fail(function(e){Z.reject({},Y+e);});return Z.promise();};this.moveTile=function(T,e,N,Q,X,Y){var Z=new q.Deferred(),$=this.oCDMService,a1=this,b1;if(!T||g(T)||e===undefined||e<0||N===undefined||N<0||!Q||!Q.identification||!Q.identification.id||!X||!X.identification||!X.identification.id){return Z.reject("Invalid input parameters").promise();}b1="Failed to move tile with id '"+T.id+"'. ";$.getSite().done(function(c1){var d1,e1,f1=a1.getTileType(T)===a1.TileType.Link?"links":"tiles";if(!Y){Y=a1._mResolvedTiles[T.id].isLink?"link":"tile";}d1=Y==="link"?"links":"tiles";if(f1!==d1&&a1._mResolvedTiles[T.id]){a1._mResolvedTiles[T.id].isLink=Y==="link";}if(d1==="links"){N-=c1.groups[X.identification.id].payload.tiles.length;}if(f1==="links"){e-=c1.groups[Q.identification.id].payload.tiles.length;}if(Q.identification.id===X.identification.id){if(e!==N||f1!==d1){e1=c1.groups[X.identification.id].payload;e1[f1].splice(e,1);e1[d1].splice(N,0,T);}else{return Z.resolve(T).promise();}}else{c1.groups[Q.identification.id].payload[f1].splice(e,1);c1.groups[X.identification.id].payload[d1].splice(N,0,T);}$.save().done(function(){Z.resolve(T);}).fail(function(g1){L.error(b1+g1);Z.reject(b1+g1);});return undefined;}).fail(function(c1){L.error(b1+c1);Z.reject(b1+c1);});return Z.promise();};this._compareCatalogs=function(e,N){if(e.identification.id>N.identification.id){return 1;}return-1;};this.getCatalogs=function(){var e=this,N=new q.Deferred(),Q=[];function T(X,Y,Q,Z,$,a1){var b1=X.catalogs[Y];if($&&a1){b1.contentProviderId=$;a1.catalogsMap[Y]=b1;}Q.push(b1);Z.notify(b1);}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(X){X.getSite().done(function(Y){Object.keys(Y.catalogs).forEach(function(Z){T(Y,Z,Q,N);});X.getExtensionSites().progress(function(Z){var $=Z.providerId;var a1=Z.site;var b1=Promise.resolve(a1);var c1={sitePromise:b1,site:a1,catalogsMap:{}};Object.keys(a1.catalogs).forEach(function(d1){e._mContentProviders[$]=c1;T(a1,d1,Q,N,$,c1);});}).done(function(Z){Z.filter(function($){return!$.success;}).forEach(function($,a1){Q.push({identification:{id:$.providerId},contentProviderId:$.providerId,error:"The following content providers could not provide catalogs: "+$.providerId+($.error?" -> "+$.error:"")});});N.resolve(Q.sort(e._compareCatalogs));});});},0);return N.promise();};this._isStartableInbound=function(e){var N=["Shell-plugin","Shell-bootConfig"],Q;if(!e.semanticObject||!e.action){return false;}if(N.indexOf(e.semanticObject+"-"+e.action)>-1){return false;}if(!O.get("signature.parameters",e)){return true;}Q=Object.keys(e.signature.parameters).every(function(P){return!e.signature.parameters[P].filter||(!!e.signature.parameters[P].launcherValue||P==="sap-external-url");});return Q;};this._isHiddenInbound=function(e){return!!e.hideLauncher;};this._toHashFromInbound=function(e){var N=b.toHashFromInbound(e);if(!N){return undefined;}return"#"+N;};this._getExternalUrlFromInbound=function(e){return O.get("signature.parameters.sap-external-url.launcherValue.value",e)||null;};this._toHashFromOutbound=function(e){var N=b.toHashFromOutbound(e);if(!N){return undefined;}return"#"+N;};this._isCustomTile=function(e){if(U.getMember(e,"sap|flp.type")==="tile"){return true;}return false;};this.getCatalogTiles=function(e){var N=this,Q=new q.Deferred();if(typeof e!=="object"||e===null){return Q.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(T){v.call(N,e,T).done(Q.resolve).fail(Q.reject);},function(T){Q.reject("Failed to get site: "+T);});}else{N.oCDMService.getSite().done(function(T){v.call(N,e,T).done(Q.resolve).fail(Q.reject);}).fail(function(T){Q.reject("Failed to get site: "+T);});}return Q.promise();};this.isCustomTile=function(e){return!(e===S||e===D);};function v(e,N){var Q=this,T=new q.Deferred();setTimeout(function(){var X=((e.payload&&e.payload.appDescriptors)||[]).reduce(function(Y,Z){var $=N.applications[Z.id],a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1;if(!$){return Y;}a1=Q._getMember($,"sap|app.crossNavigation.inbounds");if(!a1||Object.keys(a1).length===0){return Y;}c1=Object.keys(a1)[0];d1=a1[c1];if(Q._isStartableInbound(d1)&&!Q._isHiddenInbound(d1)){e1=b.mapOne(c1,d1,$);if(!e1||!e1.tileResolutionResult){return Y;}i1=e1.resolutionResult.applicationType;l1=a.last("/core/navigation/enableInPlaceForClassicUIs");k1=l1?l1[i1]:false;j1=e1.resolutionResult.additionalInformation;e1.tileResolutionResult.navigationMode=n.computeNavigationModeForHomepageTiles(i1,j1,k1);f1=e1.tileResolutionResult;b1=Q._toHashFromInbound(d1);if(e.contentProviderId){h1=Q._getMember($,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}g1={id:h1||b1,tileIntent:h1||b1,tileResolutionResult:f1,isCatalogTile:true};if(e.contentProviderId&&h1){g1.contentProviderId=e.contentProviderId;g1.externalUrl=h1;}Y.push(g1);}return Y;},[]);T.resolve(X);},0);return T.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getCatalogId(e);};this.getCatalogTitle=function(e){return R.getCatalogTitle(e);};this._isGroupTile=function(T){return r.isGroupTile(T);};this._isCatalogTile=function(T){return!!(T&&T.isCatalogTile);};this._isFailedGroupTile=function(T){return!!(T&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(T)]);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileId=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return undefined;}if(e.isBookmark&&O.get("target.url",e)){return e.target.url;}return(this._mResolvedTiles[r.getTileId(e)]||{}).tileIntent;}if(this._isCatalogTile(e)){return e.id;}return undefined;};this.getCatalogTileTitle=function(e){if(this._isGroupTile(e)){if(this._isFailedGroupTile(e)){return"";}return this._mResolvedTiles[e.id].tileResolutionResult.title;}if(this._isCatalogTile(e)){if(this._isFailedCatalogTile(e)){return undefined;}return e.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1";};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTileTargetURL=function(e){if(!e){throw new Error("The given tile is falsy");}if(this._isCatalogTile(e)){if(e.tileResolutionResult&&e.tileResolutionResult.isCustomTile){if(!e.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(e.tileResolutionResult.targetOutbound);}return e.tileIntent||"";}return this.getTileTarget(e);};this.getCatalogTilePreviewTitle=function(e){if(this._isGroupTile(e)){return this.getTileTitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.title)||"";};this.getCatalogTilePreviewSubtitle=function(e){if(this._isGroupTile(e)){return this.getTileSubtitle(e);}return(e.tileResolutionResult&&e.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(e){if(this._isGroupTile(e)){return this.getTileIcon(e);}return(e.tileResolutionResult&&e.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(e){if(this._isGroupTile(e)){return this.getTileInfo(e);}return(e.tileResolutionResult&&e.tileResolutionResult.info)||"";};this.getCatalogTileKeywords=function(e){var N=[],Q=e;if(!Q){L.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return N;}if(this._mResolvedTiles&&this._mResolvedTiles[e.id]){Q=this._mResolvedTiles[e.id];}if(Q&&Q.tileResolutionResult&&Q.tileResolutionResult.title){N.push(Q.tileResolutionResult.title);}if(Q&&Q.tileResolutionResult&&Q.tileResolutionResult.subTitle){N.push(Q.tileResolutionResult.subTitle);}return N;};this._visitBookmarks=function(e,N){var Q=this.oCDMService;var T;var X=c.parseShellHash(e);if(X){T=I(X);}else{T=H(e);}return Q.getSite().then(function(Y){var Z=Y.groups;var $=Object.keys(Z).filter(function(a1){return!Z[a1].payload.locked;}).map(function(a1){return Z[a1].payload.tiles.filter(function(b1){return b1.isBookmark&&z(T,b1.target);});}).reduce(function(a1,b1){Array.prototype.push.apply(a1,b1);return a1;},[]);if(!N){return $.length;}return q.when($.map(N)).then(function(){return $.length;});});};this.addBookmark=function(e,N){var Q=this;return new q.Deferred(function(T){var X=Q.oCDMService;q.when(N||Q.getDefaultGroup(),X.getSite()).done(function(N,Y){var Z,$,a1=c.parseShellHash(e.url),b1,c1=false;if(!a1){$=H(e.url);c1=true;}else{$=I(a1);}Z=w(e,$);if(c1){b1=new q.Deferred();b1.resolve(Q._getTileForUrl(Z));}else{b1=Q._getTileFromHash(e.url);}b1.done(function(d1){d1.isLink=false;Q._mResolvedTiles[Z.id]=d1;Y.groups[N.identification.id].payload.tiles.push(Z);X.save().done(function(){T.resolve(Z);}).fail(function(e1){T.reject(e1);});}).fail(function(d1){T.reject("Bookmark creation failed because: "+d1);});}).fail(function(Y){T.reject(Y);});}).promise();};this.countBookmarks=function(e){return this._visitBookmarks(e);};this.updateBookmarks=function(e,N){var Q=this.oCDMService;var T=this._mResolvedTiles;function X(Y){return new q.Deferred(function(Z){var $,a1;var b1;var c1=false;var d1={};if(N.url||N.url===""){$=c.parseShellHash(N.url);if(!$){a1=H(N.url);}else{a1=I($);}}if(Y.icon!==N.icon){d1.icon=N.icon;c1=true;}if(Y.title!==N.title){d1.title=N.title;c1=true;}if(Y.subTitle!==N.subtitle){d1.subtitle=N.subtitle;c1=true;}if(N.url&&e!==N.url){d1.targetURL=N.url;c1=true;}if(Y.info!==N.info){d1.info=N.info;c1=true;}y(Y,N,a1);if(c1&&T[Y.id]){b1=T[Y.id].tileComponent;if(b1){b1.tileSetVisualProperties(d1);}}Z.resolve(Y);}).promise();}return this._visitBookmarks(e,X).then(function(Y){return Q.save().then(function(){return Y;});});};this.deleteBookmarks=function(e){var N=this.oCDMService;var Q=c.parseShellHash(e);var T;if(Q){T=I(Q);}else{T=H(e);}return N.getSite().then(function(X){var Y=X.groups;var Z=Object.keys(Y).map(function($){var a1=Y[$].payload;var b1=0;a1.tiles=a1.tiles.filter(function(c1){if(c1.isBookmark&&z(T,c1.target)){++b1;return false;}return true;});return b1;}).reduce(function($,a1){$+=a1;return $;},0);return N.save().then(function(){return Z;});});};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,e){var N=new q.Deferred(),Q,X,Y,Z,$,a1,b1;if(!T||!T.id||!e){return N.reject().promise();}X=e.oTitleInput.getValue();Z=e.oSubTitleInput.getValue();Y=e.oInfoInput.getValue();$=this.getTileTitle(T);a1=this.getTileInfo(T);b1=this.getTileSubtitle(T);if($===X&&b1===Z&&a1===Y){return N.resolve().promise();}Q={};if($!==X){Q.title=X;T.title=X;}if(b1!==Z){Q.subtitle=Z;T.subTitle=Z;}if(a1!==Y){Q.info=Y;T.info=Y;}if(this._mResolvedTiles[T.id].tileComponent){this._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(Q);}else if(this._mResolvedTiles[T.id].linkTileControl){if(Q.title){this._mResolvedTiles[T.id].linkTileControl.setHeader(Q.title);}if(Q.subtitle){this._mResolvedTiles[T.id].linkTileControl.setSubheader(Q.subtitle);}if((Q.title)||(Q.subtitle)){this._mResolvedTiles[T.id].linkTileControl.rerender();}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c1){c1.save().fail(function(d1){L.error(d1);N.reject("Could not save personalization changes: "+d1);}).done(function(){N.resolve();});});return N.promise();};this.getTileActions=function(T){var e=[],N,Q;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){Q=new J({config:{display_title_text:this.getTileTitle(T),display_subtitle_text:this.getTileSubtitle(T),display_info_text:this.getTileInfo(T)}});N=d.getTileSettingsAction(Q,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(N);}return e;};function w(e,T){var N=x(e,T);N.isBookmark=true;return N;}function x(e,T){var N={id:U.generateUniqueId([])};y(N,e,T);return N;}function y(T,e,N){e=q.extend(true,{},e);if(N){T.target=N;}if(e.title||e.title===""){T.title=e.title;}if(e.icon||e.icon===""){T.icon=e.icon;}if(e.subtitle||e.subtitle===""){T.subTitle=e.subtitle;}if(e.info||e.info===""){T.info=e.info;}if(e.dataSource){T.dataSource={};q.extend(true,T.dataSource,e.dataSource);delete e.serviceUrl;}else if(e.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete e.serviceUrl;}if((e.dataSource||T.dataSource)&&e.serviceUrlPath){T.indicatorDataSource={path:e.serviceUrlPath};}if(e.serviceUrl||e.serviceUrl===""){if(T.dataSource){L.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:e.serviceUrl};}else if(e.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(e.serviceRefreshInterval||e.serviceRefreshInterval===0){T.indicatorDataSource.refresh=e.serviceRefreshInterval;}}function z(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&B(T.parameters,e.parameters)&&T.appSpecificRoute===e.appSpecificRoute;}return T===e;}function B(e,N){var Q,T;e=e||[];N=N||[];if(e.length===N.length){Q=F(e);T=F(N);return Q===T;}return false;}function F(e){return e.map(function(N){return N.name+N.value;}).sort().join();}function H(e){return{url:e};}function I(e){var T={semanticObject:e.semanticObject,action:e.action,parameters:K(e.params)};if(e.appSpecificRoute){T.appSpecificRoute=e.appSpecificRoute;}return T;}function K(e){return Object.keys(e).map(function(N){var Q=e[N]&&e[N][0];return{name:N,value:Q||""};});}}
s.prototype._getMember=function(e,A){return U.getMember(e,A);};
return s;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/MenuAdapter',[],function(){"use strict";var M=function(){};
M.prototype.isMenuEnabled=function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c){return c.getMenuEntries("main").then(function(m){return m.length>0;});});};
M.prototype.getMenuEntries=function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c){return c.getMenuEntries("main");});};
return M;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PagesCommonDataModelAdapter',["sap/base/Log","sap/base/util/deepExtend","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/ushell/utils/clone","sap/base/util/extend","sap/base/util/Version","sap/ui/thirdparty/jquery"],function(L,d,c,a,e,V,q){"use strict";var P=function(){this._oCDMPagesRequests={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(r,b){this.fnSiteResolve=r;this.fnSiteReject=b;}.bind(this));};
P.prototype.getSite=function(){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavigationDataProvider").then(function(n){return n.getNavigationData();}).then(function(n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var s=I[i].permanentKey||I[i].id;N[s]=I[i];}var S={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:{},applications:c.getApplications(N),vizTypes:{},systemAliases:d({},n.systemAliases),pages:{}};this.fnSiteResolve(S);return S;}.bind(this)).then(D.resolve).catch(function(b){D.reject(b);this.fnSiteReject(b);}.bind(this));return D.promise();};
P.prototype.getPage=function(p){if(!p){var E="PagesCommonDataModelAdapter: getPage was called without a pageId";L.fatal(E,null,this._sComponent);return Promise.reject(E);}return this.oSitePromise.then(function(s){if(s.pages[p]){return s.pages[p];}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPage(p),n.getNavigationData(),sap.ushell.Container.getServiceAsync("URLParsing")]);}).then(function(r){var o=r[0];var n=r[1];var u=r[2];this._addVisualizationsToSite(s,o.visualizations,u);this._addVizTypesToSite(s,o);this._addPageToSite(s,o.page,n);return s.pages[o.page.id];}.bind(this)).catch(function(v){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",v,this._sComponent);return Promise.reject(v);}.bind(this));}.bind(this));};
P.prototype._addVizTypesToSite=function(s,D){var v={};Object.keys(D.vizTypes).forEach(function(b){if(!s.vizTypes[b]){v[b]=D.vizTypes[b];}});e(s.vizTypes,c.getVizTypes(v));};
P.prototype._addVisualizationsToSite=function(s,v,u,C){var o;if(C){o={};Object.keys(v).forEach(function(b){if(!s.visualizations[b]){o[b]=v[b];}});}else{o=v;}e(s.visualizations,c.getVisualizations(o,u));};
P.prototype._addPageToSite=function(s,p,n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var b=I[i].permanentKey||I[i].id;N[b]=I[i];}var o=s.pages[p.id]={identification:{id:p.id,title:p.title},payload:{layout:{sectionOrder:p.sections.map(function(l){return l.id;})},sections:{}}};var S;var f;for(var j=0;j<p.sections.length;j++){S=p.sections[j];f=o.payload.sections[S.id]={id:S.id,title:S.title,layout:{vizOrder:S.viz.map(function(v){return v.id;})},viz:{}};var v,g,t;for(var k=0;k<S.viz.length;k++){v=S.viz[k];g=!s.visualizations[v.vizId];t=v.targetMappingId&&!N[v.targetMappingId];if(g||t){var h=f.layout.vizOrder;h.splice(h.indexOf(v.id),1);if(g){L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.");}if(t){L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching target with id "+v.targetMappingId+". As the tile cannot be used to start an app it is removed from the page.");}continue;}f.viz[v.id]={id:v.id,vizId:v.vizId,displayFormatHint:v.displayFormatHint};}}};
P.prototype.getPages=function(p){if(!(p&&Array.isArray(p)&&p.length!==0)){var E="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";L.fatal(E,null,this._sComponent);return Promise.reject(E);}return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([v.getVisualizationData(),sap.ushell.Container.getServiceAsync("URLParsing"),this.oSitePromise]).then(function(r){var o=r[0];var u=r[1];var s=r[2];this._addVisualizationsToSite(s,o.visualizations,u);this._addVizTypesToSite(s,o);var b=[],f;for(var i=0;i<p.length;i++){f=p[i];if(!s.pages[f]){b.push(p[i]);}}if(b.length===0){return s.pages;}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var g=S[0];var n=S[1];return Promise.all([g.getPages(b),n.getNavigationData()]);}).then(function(R){var g=R[0];var n=R[1];for(var j=0;j<g.length;j++){this._addVisualizationsToSite(s,g[j].visualizations,u,true);this._addVizTypesToSite(s,g[j]);this._addPageToSite(s,g[j].page,n);}return s.pages;}.bind(this)).catch(function(g){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",g,this._sComponent);return Promise.reject(g);}.bind(this));}.bind(this));}.bind(this));};
P.prototype.getPersonalization=function(C){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o;var b=new V(C);o={container:"sap.ushell.cdm.personalization",item:"data"};if(b.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false};p.getPersonalizer(o,s).getPersData().done(function(f){D.resolve(f||{});}).fail(function(E){D.reject(E);});}).catch(function(){D.reject("Personalization Service could not be loaded");});return D.promise();};
P.prototype.setPersonalization=function(p){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var b;var C=new V(p.version);b={container:"sap.ushell.cdm.personalization",item:"data"};if(C.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false};o.getPersonalizer(b,s).setPersData(p).done(function(){D.resolve(p);}).fail(D.reject);}).catch(function(){D.reject("Personalization Service could not be loaded");});return D.promise();};
P.prototype.getVisualizations=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),v.getVisualizationData(),this.oSitePromise]).then(function(r){var u=r[0];var o=r[1];var s=r[2];this._addVisualizationsToSite(s,o.visualizations,u);return s.visualizations;}.bind(this));}.bind(this));};
P.prototype.getVizTypes=function(){return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(v){return Promise.all([v.getVisualizationData(),this.oSitePromise]).then(function(r){var o=r[0];var s=r[1];this._addVizTypesToSite(s,o);return s.vizTypes;}.bind(this));}.bind(this));};
P.prototype.getVizType=function(v){return this.oSitePromise.then(function(s){var o=s.vizTypes[v];if(o){return o;}if(!v.startsWith("X-SAP-UI2-CHIP:")){return;}return sap.ushell.Container.getServiceAsync("VisualizationDataProvider").then(function(b){return b.loadVizType(v);}).then(function(l){if(!l){return;}var b={};b[v]=l;e(s.vizTypes,c.getVizTypes(b));return s.vizTypes[v];});});};
P.prototype.getCachedVisualizations=function(){return this.oSitePromise.then(function(s){return s.visualizations;});};
P.prototype.getCachedVizTypes=function(){return this.oSitePromise.then(function(s){return s.vizTypes;});};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/PersonalizationAdapter',["sap/ushell/adapters/cdm/_Personalization/internals","sap/ushell/utils/HttpClient"],function(a,H){"use strict";return a.PersonalizationAdapter.bind(null,H,null);},true);
sap.ui.predefine('sap/ushell/adapters/cdm/Ui5ComponentLoaderAdapter',[],function(){"use strict";
function U(){}
return U;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/modifyHome',["sap/ushell/adapters/cdm/_LaunchPage/readHome","sap/ui/thirdparty/jquery"],function(r,q){"use strict";
function c(u){return a(u,"Home",true);}
function a(u,t,D){var g={identification:{id:u,namespace:"",title:t},payload:{isPreset:false,locked:false,tiles:[],links:[],groups:[]}};if(D){g.payload.isDefaultGroup=true;}return g;}
function b(S,g,i){var G=r.getGroupId(g);S.groups[G]=g;if(i!==undefined){S.site.payload.groupsOrder.splice(i,0,G);}else{S.site.payload.groupsOrder.push(G);}return S;}
function o(S,g,G){if(S&&S.groups&&S.groups[G]){S.groups[G]=g;}return S;}
function d(S,g){if(S&&S.groups&&S.groups[g.identification.id]){delete S.groups[g.identification.id];}if(S&&S.site&&S.site.payload&&S.site.payload.groupsOrder){S.site.payload.groupsOrder=q.grep(S.site.payload.groupsOrder,function(G){return G!==g.identification.id;});}return S;}
function s(S,n){S.site.payload.groupsOrder=n;return S;}
function e(g,n){g.identification.title=n;}
function f(g,n){if(n){delete g.identification.isVisible;}else{g.identification.isVisible=false;}}
return{createDefaultGroup:c,createEmptyGroup:a,addGroupToSite:b,overwriteGroup:o,removeGroupFromSite:d,setGroupsOrder:s,setGroupTitle:e,setGroupVisibility:f};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readCatalogs',[],function(){"use strict";
function g(c){return c.identification.id;}
function a(c){return c.identification.title;}
return{getCatalogId:g,getCatalogTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/readHome',["sap/ushell/utils/type"],function(t){"use strict";
function g(S){var L=[];S.site.payload.groupsOrder.forEach(function(G,I){var x=S.groups[G];if(x){x.payload=x.payload||{};L.push(x);}});return L;}
function a(S){return S.groups;}
function b(S){return S.site.payload.groupsOrder;}
function c(S,G){return S.groups[G];}
function d(G){var D=G.filter(function(x){return x.payload.hasOwnProperty("isDefaultGroup");});if(D.length>0){return D[0];}return undefined;}
function e(G){return G.identification&&G.identification.id;}
function f(G){return G.identification.title;}
function i(G){if(!G.payload.hasOwnProperty("isPreset")){return true;}return!!G.payload.isPreset;}
function h(G){return!!G.payload.locked;}
function j(G){return!!(G.identification.isVisible===undefined||G.identification.isVisible===true);}
function k(G){if(G.payload.tiles&&t.isArray(G.payload.tiles)&&G.payload.tiles.length>0){return G.payload.tiles;}return[];}
function l(G){if(G.payload.links&&t.isArray(G.payload.links)&&G.payload.links.length>0){return G.payload.links;}return[];}
function m(T){return T.id;}
function n(R,T){var x;if(T&&T.isBookmark){return T.title;}x=R[T.id];if(x){return T.title||x.tileResolutionResult.title;}return undefined;}
function o(R,T){var x;if(T.isBookmark){return T.subTitle;}x=R[T.id];if(x){return T.subTitle||x.tileResolutionResult.subTitle;}return undefined;}
function p(R,T){var x;if(T.isBookmark){return T.info;}x=R[T.id];return T.info||x.tileResolutionResult.info;}
function q(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}return undefined;}
function r(R,T){var x;if(T.isBookmark){return T.icon;}x=R[T.id];if(x){return T.icon||x.tileResolutionResult.icon;}return undefined;}
function s(R,T){var x=R[T.id];if(x&&x.tileResolutionResult&&x.tileResolutionResult.size){return x.tileResolutionResult.size;}}
function u(R,T){var x=R[T.id];if(x){return!!x.isLink;}return false;}
function v(T){return!!(T&&T.id&&!T.isCatalogTile);}
function w(A,F){return A.deviceTypes&&A.deviceTypes[F];}
return{getGroupsArrayFromSite:g,getGroupsMapFromSite:a,getGroupIdsFromSite:b,getGroupFromSite:c,getDefaultGroup:d,getGroupId:e,getGroupTitle:f,isGroupPreset:i,isGroupLocked:h,isGroupVisible:j,getGroupTiles:k,getGroupLinks:l,getTileId:m,getTileTitle:n,getTileSubtitle:o,getTileInfo:p,getTileIcon:q,getTileIndicatorDataSource:r,getTileSize:s,isLink:u,isGroupTile:v,supportsFormFactor:w};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_LaunchPage/uri.transform',["sap/ui/thirdparty/URI"],function(U){"use strict";
function t(u,s,f,g){var o=(e(u))?new U(u):null;if(!o){return{error:'Error: Parameter sUri is empty or not a string, use case not supported.'};}if(!b(o)){return r(u,null,null,null,u);}var h=(e(s))?new U(s):null;if(h&&!b(h)){return r(u,s,null,null,o.absoluteTo(h));}var i=new U().search("");if(i.toString()==""){i=new U('https://x.y.z:8443/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/shells/cdm/fioriCDM.html?params');}var k=(e(f))?new U(m(f)):i;if(!b(k)&&!g){return r(u,s,U.joinPaths(h,o),c(k),U.joinPaths(h,o).absoluteTo(k));}var l=(e(g))?new U(g):i;if(!k||!l.toString()){return{error:'Error: Parameter sUriNewBase is empty or not a string, use case not supported.'};}if(b(l)){return{error:'Error: Parameter sUriNewBase is a relative uri, but must be absolute.'};}if(b(k)&&!b(l)){k=k.absoluteTo(l);}if(!b(k)&&!b(l)){if(k.host()&&l.host()&&k.host()!=l.host()){return{error:'Error: Hosts of the parameters sUriBase and sUriNewBase are given but do not match.'};}var n=d(k).relativeTo(d(l));var p;if(e(s)){p=o.absoluteTo(h.absoluteTo(n.absoluteTo(l)));var q=j(n,h);var v=j(q,o);return r(o,q,v,c(l),p);}else{p=o.absoluteTo(n.absoluteTo(l));var w=j(n,o);w.query(o.query());return r(w,null,w,c(l),p);}}return{error:'Error: Parameter combination not supported.'};}
function r(u,o,f,g,h){var r={};if(u){r.uri=u.toString();}if(o){r.uriParent=o.toString();}if(f){r.uriRelative=f.toString();}if(g){r.uriBase=g.toString();}if(h){r.uriAbsolute=h.toString();}return r;}
function a(u){if(!u.is("relative")){return false;}return u.toString()[0]=='/';}
function b(u){return!u.is("absolute")&&!a(u);}
function c(u){return u.filename("").search("").fragment("");}
function j(){var l=new U("/1/2/3/4/5/6/7/8/9/");var r=l;for(var i=0;i<arguments.length;i++){r=U.joinPaths(r,arguments[i]);}return r.relativeTo(l);}
function d(u){return U.joinPaths(u.directory(),'/');}
function m(u){var s=u;if(u){var o=new U(u);if(o.filename()&&o.filename().indexOf(".")==-1&&o.filename().slice(-1)!='/'){s+='/';}}return s;}
function e(f){return(f&&typeof f==='string');}
return t;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/_Personalization/internals',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(s,i,q,L){"use strict";return{PersonalizationAdapter:P,getStorageResourceRoot:g,getContainerPath:c,delAdapterContainer:e,createContainerData:f,getAdapterContainer:A,getContainerCategory:h,isCategoryPContainer:k,trimContainerKey:t,save:l,load:m,del:n,clearContainerData:o,getItemKeys:u,containsItem:v,setItemValue:w,getItemValue:x,delItem:y,addPrefixToItemKey:p,stripPrefixFromItemKey:r,getHttpHeaderValue:z};
function P(H,C,S,B,D){var E,F;var G={cache:{},headers:{"sap-client":S.getClient()}};D=D&&D.config;if(!D){throw new Error("PersonalizationAdapter: missing configuration.");}if(!C){C={};}E=g(D);F=new H(E,G);return{getAdapterContainer:A.bind(null,D,C,F),delAdapterContainer:e.bind(null,D,C,F)};}
function g(C){var I=!C||!C.storageResourceRoot;if(I){throw new Error("Configuration error: storage resource root is not defined.");}return C.storageResourceRoot;}
function a(C){var I=!C||!C.relativeUrlReadOptimized;if(I){throw new Error("Configuration error: relative URL for read optimization is not defined.");}return C.relativeUrlReadOptimized;}
function b(C){var I=!C||!C.relativeUrlWriteOptimized;if(I){throw new Error("Configuration error: relative URL for write optimization is not defined.");}return C.relativeUrlWriteOptimized;}
function c(C,S,B){return j(C,S)+"/"+encodeURIComponent(t(B))+".json";}
function t(C){var B=i.S_CONTAINER_PREFIX,D,R;if(q.type(C)!=="string"||C.length===0){throw new Error("Personalization container key must be a non-empty string");}if(C.substring(0,B.length)===B){D=C.substring(B.length);}else{L.error("Unexpected personalization container key: "+C,"should always be prefixed with "+B,"sap.ushell.adapters.cdm.PersonalizationAdapter");D=C;}if(D.length<=40){R=D;}else{R=D.substring(0,40);L.error("Invalid personalization container key: '"+D+"'"+" exceeds maximum key length (40 characters) and is shortened to '"+R+"'",undefined,"sap.ushell.adapters.cdm.PersonalizationAdapter");}return R;}
function d(){return{validity:Infinity,keyCategory:s.keyCategory.GENERATED_KEY,writeFrequency:s.writeFrequency.HIGH,clientStorageAllowed:false};}
function e(C,B,H,D,S){var E=c(C,S,D);var F=B&&B[E];if(F){delete B[E];}return n(H,E);}
function f(S,B){var C;if((!B&&B!=="")||B.constructor!==String){L.warning("Personalization container has an invalid app name; must be a non-empty string",null,"sap.ushell.adapters.cdm.PersonalizationAdapter");}if(!S){S=d();}C={items:{},__metadata:{appName:B,expiry:Date.now()+S.validity*60*1000,validity:S.validity,category:h(S)}};return C;}
function A(C,B,H,D,S,E){var F,G,I=c(C,S,D);if(B&&B[I]){return B[I];}G=f(S,E);F=G.items;return{save:l.bind(null,H,G,I),load:m.bind(null,H,G,I),del:n.bind(null,H,G,I),setItemValue:w.bind(null,F),getItemValue:x.bind(null,F),getItemKeys:u.bind(null,F),containsItem:v.bind(null,F),delItem:y.bind(null,F)};}
function h(S){return k(S)?"p":"u";}
function j(C,S){return k(S)?a(C):b(C);}
function k(S){return S&&S.keyCategory===s.keyCategory.FIXED_KEY&&S.writeFrequency===s.writeFrequency.LOW&&S.clientStorageAllowed;}
function l(H,C,B){return new q.Deferred(function(D){H.put(B,{data:C}).then(function(R){D.resolve();}).catch(function(R){L.error("Failed to save personalization container; response: "+(typeof R==="object"?JSON.stringify(R):R),R.stack?R.stack:null,"sap.ushell.adapters.cdm.PersonalizationAdapter");D.reject(R);});}).promise();}
function m(H,C,B){function D(C){o(C.items);}return new q.Deferred(function(E){H.get(B).then(function(R){var F,G;if(R.status===200&&z(R.responseHeaders,"content-length")==="0"&&z(R.responseHeaders,"content-type").indexOf("text/plain")===0){D(C);}else{F=JSON.parse(R.responseText);if(F.data){F.items=F.data;delete F.data;F.__metadata=C.__metadata;}G=F.items;o(C.items);Object.keys(G).forEach(function(I){C.items[I]=G[I];});C.__metadata=F.__metadata;}E.resolve();}).catch(function(R){if(R.status===404){D(C);E.resolve();}else{o(C.items);E.reject(R);}});}).promise();}
function n(H,B){return new q.Deferred(function(D){H.delete(B).then(function(){D.resolve();}).catch(function(R){D.reject(R);});}).promise();}
function o(C){Object.keys(C).forEach(function(K){delete C[K];});}
function p(K){if(K==="__metadata"){return undefined;}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}return i.S_ITEM_PREFIX+K;}
function r(K){if(K.indexOf(i.S_ITEM_PREFIX)===0){return K.substring(i.S_ITEM_PREFIX.length);}else if(K.indexOf(i.S_VARIANT_PREFIX)===0||K.indexOf(i.S_ADMIN_PREFIX)===0){return K;}throw new Error("Illegal item key for personalization container: '"+K+"'; must be prefixed with one of the following: ["+i.S_ITEM_PREFIX+", "+i.S_VARIANT_PREFIX+", "+i.S_ADMIN_PREFIX+"] ");}
function u(C){return Object.keys(C).map(p).filter(function(K){return!!K;});}
function v(C,K){return C.hasOwnProperty(r(K));}
function w(C,K,V){C[r(K)]=V;}
function x(C,K){return C[r(K)];}
function y(C,K){delete C[r(K)];}
function z(H,N){var M=H&&H.filter(function(B){return B.name.toLowerCase()===N;});return M&&M[0]&&M[0].value;}
});
sap.ui.predefine('sap/ushell/adapters/cdm/util/AppForInbound',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};
A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};
A._getURLApp=function(i,a){return{"sap.app":{id:i,crossNavigation:{inbounds:{"Shell-launchURL":{semanticObject:"Shell",action:"launchURL",signature:{parameters:{"sap-external-url":{required:true,filter:{value:a.resolutionResult.url,format:"plain"}}}}}}}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};
A._getUI5App=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui5":{componentName:a.resolutionResult.ui5ComponentName},"sap.ui":{technology:"UI5",deviceTypes:a.deviceTypes},"sap.platform.runtime":{componentProperties:{url:a.resolutionResult.url}}};};
A._getApplicationInbound=function(i){var a={};a[i.id]={semanticObject:i.semanticObject,action:i.action,signature:i.signature};return a;};
A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"GUI",deviceTypes:a.deviceTypes},"sap.flp":{type:"application"},"sap.gui":{transaction:t}};};
A._getWDAApp=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};
A._getWCFApp=function(i,a){return{"sap.app":{id:i,title:a.resolutionResult.text,subTitle:a.resolutionResult.information,crossNavigation:{inbounds:this._getApplicationInbound(a)}},"sap.ui":{technology:"URL",deviceTypes:a.deviceTypes},"sap.url":{uri:a.resolutionResult.url}};};
return A;});
sap.ui.predefine('sap/ushell/adapters/cdm/util/cdmSiteUtils',["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(A,L,u){"use strict";var c={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher"}};
c.getVisualizations=function(v,a){var V={};Object.keys(v).forEach(function(b){var o=v[b];var s;if(o.isCustomTile){s=o.vizType;}else if(o.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var d={vizType:s,vizConfig:{"sap.app":{title:o.title,subTitle:o.subTitle,info:o.info,tags:{keywords:o.keywords}},"sap.ui":{icons:{icon:o.icon}},"sap.flp":{tileSize:o.size,indicatorDataSource:o.indicatorDataSource,numberUnit:o.numberUnit,target:u.toTargetFromHash(o.url,a)}}};if(o.isCustomTile){d.vizConfig["sap.flp"]._instantiationData=o._instantiationData;}V[b]=d;}.bind(this));return V;};
c.getApplications=function(n){return Object.keys(n).reduce(function(a,b){var i=n[b],I=i.permanentKey||i.id;try{a[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");a[b]={};}return a;},{});};
c.getVizTypes=function(v){return Object.keys(v).reduce(function(V,s){var a=v[s].id;if(!V[a]){V[a]={"sap.app":{id:a,type:"chipVizType"},"sap.flp":{vizOptions:v[s].vizOptions,tileSize:v[s].tileSize}};}return V;},{});};
return c;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/AdapterBase',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/m/GenericTile","sap/ui/core/ComponentContainer","sap/ushell/adapters/cdm/_LaunchPage/uri.transform","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/navigationMode","sap/ushell/resources","sap/ushell/utils","sap/ushell/adapters/cdm/v3/utilsCdm","sap/base/util/Version","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/deepClone","sap/base/Log","sap/ushell/library"],function(r,R,a,G,C,u,b,e,n,o,U,c,V,q,i,d,O,f,g,L,h){"use strict";var l=L.getLogger("sap/ushell/adapters/cdm/LaunchPageAdapter");var j=L.Level;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";var k=h.UI5ComponentType;
function A(m,p,s){this.oAdapterConfiguration=s;this._mResolvedTiles={};this._mCatalogTilePromises={};this._mFailedResolvedCatalogTiles={};this._mFailedResolvedTiles={};this._mContentProviders={};this.TileType={Tile:"tile",Link:"link",Card:"card"};}
A.prototype.getGroups=function(){var m=new q.Deferred();this._ensureLoaded().done(function(p){U.setPerformanceMark("FLP - homepage groups processed");m.resolve(p);}).fail(function(){m.resolve([]);});return m.promise();};
A.prototype._ensureLoaded=function(){var t=this,m;if(this._ensureLoadedDeferred){return this._ensureLoadedDeferred.promise();}m=new q.Deferred();this._ensureLoadedDeferred=m;this._getSiteData().done(function(s){if(!t.isSiteSupported(s)){throw new Error("Invalid CDM site version: Check the configuration of the launchpage adapter and the version of the FLP site");}var I=[];var p=r.getGroupsArrayFromSite(s);p=t._addDefaultGroup(p,s);p.forEach(function(v){I=t._ensureGroupItemsResolved(v,s).concat(I);});t._allPromisesDone(I).done(function(){t._ensureLoadedDeferred.resolve(p);delete t._ensureLoadedDeferred;t._logTileResolutionFailures(t._mFailedResolvedTiles);});}).fail(function(E){l.error("Delivering hompage groups failed - "+E);t._ensureLoadedDeferred.resolve([]);delete t._ensureLoadedDeferred;});return m.promise();};
A.prototype._ensureGroupItemsResolved=function(m,s){var p=[],t,v;if(m.payload&&m.payload.tiles){t=this._ensureGroupTilesResolved(m.payload.tiles,s);Array.prototype.push.apply(p,t);}if(m.payload&&m.payload.links){v=this._ensureGroupLinksResolved(m.payload.links,s);Array.prototype.push.apply(p,v);}return p;};
A.prototype._ensureGroupTilesResolved=function(m,s){return(m||[]).map(function(t,I){return this._resolveGroupTile(t,s).then(function(p){p.isLink=false;return p;});},this);};
A.prototype._ensureGroupLinksResolved=function(m,s){return(m||[]).map(function(p){return this._resolveGroupTile(p,s).then(function(t){t.isLink=true;return t;});},this);};
A.prototype._resolveGroupTile=function(t,s){var m=this._mResolvedTiles;var F=this._mFailedResolvedTiles;var p;function v(y){m[t.id]=y;if(F[t.id]){delete F[t.id];}return y;}function w(t){var T=t.target;return T&&T.semanticObject==="Shell"&&T.action==="launchURL";}if(m[t.id]){return(new q.Deferred()).resolve(m[t.id]).promise();}if(t.target&&t.target.url){p=q.when(this._getTileForUrl(t));}else if(t.isBookmark&&t.vizType===undefined){p=this._resolveTileByIntent(t,s);}else if(w(t)){p=this._resolveTileByIntent(t,s);}else{p=this._resolveTileByVizId(t,s);}var x=new q.Deferred();p.done(function(y){x.resolve(v(y));}).fail(function(y){F[t.id]=y;x.reject(y);});return x.promise();};
A.prototype._resolveTileByVizId=function(t,s){var v,m,p,w,x,y,I,M,N,z,H,B,E;function F(W,X){return new q.Deferred().reject({logLevel:W,message:X}).promise();}var J=new q.Deferred();if(!i(s)){return F(j.ERROR,"Cannot resolve tile: oSite must be an object");}if(!i(t)){return F(j.ERROR,"Cannot resolve tile: oTile must be an object");}m=t.vizId;v=g(R.get(s,m||"")||{});w=t.vizType||R.getTypeId(v);p=R.getType(s,w);if(!p){return F(j.ERROR,"Cannot resolve tile '"+t.id+"': no visualization type found for vizTypeId '"+w+"'");}x=R.getAppId(v);if(x){y=R.getAppDescriptor(s,x);if(!y){return F(j.INFO,"Tile '"+t.id+"' filtered from result: no app descriptor found for appId '"+x+"' (dangling app reference)");}I=r.getInbound(y,R.getTarget(v).inboundId);if(!I){return F(j.ERROR,"Cannot resolve tile '"+t.id+"': app '"+x+"' has no navigation inbound");}M=c.mapOne(I.key,I.inbound,y,v,p,s);var K=M.resolutionResult.applicationType,P=M.resolutionResult.additionalInformation,Q=b.last("/core/navigation/enableInPlaceForClassicUIs"),T=Q?Q[K]:false;N=n.computeNavigationModeForHomepageTiles(K,P,T);B=R.getOutbound(v,I.inbound);H=this._toHashFromOutbound(B);}else{v.vizConfig=f({},v.vizConfig,t.vizConfig);M=c.mapOne(undefined,undefined,undefined,v,p,s);if(R.startsExternalUrl(v)){E=U.getMember(v.vizConfig,"sap|flp.target.url");}}z=M.tileResolutionResult;z.navigationMode=N;z.isLink=false;if(!this._isFormFactorSupported(z)){return F(j.INFO,"Tile '"+t.id+"' filtered from result: form factor not supported");}if(E||H){J.resolve({tileResolutionResult:z,tileIntent:E||H});}else{if(!this._oUrlParsingPromise){this._oUrlParsingPromise=sap.ushell.Container.getServiceAsync("URLParsing");}this._oUrlParsingPromise.then(function(W){if(t.target){var X=g(t.target);H=c.toHashFromTarget(a.harmonizeTarget(X),W);}J.resolve({tileResolutionResult:z,tileIntent:H});});}return J.promise();};
A.prototype._isFormFactorSupported=function(m){var s=U.getFormFactor();return r.supportsFormFactor(m,s);};
A.prototype._getFirstInbound=function(m){var F=Object.keys(m["sap.app"].crossNavigation.inbounds).shift(),I=m["sap.app"].crossNavigation.inbounds[F];return{key:F,inbound:I};};
A.prototype._resolveTileByIntent=function(t){var H=this._prepareTileHash(t);return this._getTileFromHash(H);};
A.prototype._allPromisesDone=function(p){var m=new q.Deferred(),s;if(p.length===0){m.resolve([]);}else{var N=p.map(function(P){s=new q.Deferred();P.always(s.resolve.bind(s));return s.promise();});q.when.apply(this,N).done(function(){var t=Array.prototype.slice.call(arguments);m.resolve(t);});}return m.promise();};
A.prototype._logTileResolutionFailures=function(F){var m={};if(!F){return;}Object.keys(j).filter(function(s){var p=j[s];return p>=j.FATAL&&p<=j.ALL;}).forEach(function(s){m[j[s]]="";});Object.keys(F).forEach(function(s){var p=F[s];if(p.logLevel){m[p.logLevel]=m[p.logLevel].concat(p.message).concat("\n");}});if(m[j.FATAL]){l.fatal(m[j.FATAL]);}if(m[j.ERROR]){l.error(m[j.ERROR]);}if(m[j.WARNING]){l.warning(m[j.WARNING]);}if(m[j.INFO]){l.info(m[j.INFO]);}if(m[j.DEBUG]){l.debug(m[j.DEBUG]);}if(m[j.TRACE]){l.trace(m[j.TRACE]);}};
A.prototype._isValidTitle=function(t){return typeof t==="string"&&t;};
A.prototype._isGroupPreset=function(m){return r.isGroupPreset(m);};
A.prototype._isGroupLocked=function(m){return r.isGroupLocked(m);};
A.prototype.getGroupTitle=function(m){return r.getGroupTitle(m);};
A.prototype.getGroupId=function(m){return r.getGroupId(m);};
A.prototype.isGroupVisible=function(m){return r.isGroupVisible(m);};
A.prototype.getTileTitle=function(t){return r.getTileTitle(this._mResolvedTiles,t);};
A.prototype.getTileContentProviderId=function(t){return r.getContentProviderId(t);};
A.prototype.getTileSubtitle=function(t){return r.getTileSubtitle(this._mResolvedTiles,t);};
A.prototype.getTileIcon=function(t){return r.getTileIcon(this._mResolvedTiles,t);};
A.prototype.getTileInfo=function(t){return r.getTileInfo(this._mResolvedTiles,t);};
A.prototype.getTileIndicatorDataSource=function(t){var m=this._mResolvedTiles[t.id],p={},s;if(t.indicatorDataSource){p.indicatorDataSource=f({},t.indicatorDataSource);if(t.dataSource){p.dataSource=f({},t.dataSource);}return p;}if(!m){return p;}s=m.tileResolutionResult;if(s.indicatorDataSource){p.indicatorDataSource=f({},s.indicatorDataSource);if(s.indicatorDataSource.hasOwnProperty("dataSource")){var v=s.indicatorDataSource.dataSource,w=s.dataSources;if(w&&w.hasOwnProperty(v)){p.dataSource=f({},w[v]);}else{L.warning("datasource referenced but not found for tile: "+m.tileIntent);}}if(U.getMember(s,"runtimeInformation.componentProperties.url")){var P=U.getMember(p,"indicatorDataSource.path");var x=U.getMember(p,"dataSource.uri");var y=U.getMember(s,"runtimeInformation.componentProperties.url");var T=u(P,x,y,this.getWindowLocationHref());if(!T.error){if(P){p.indicatorDataSource.path=T.uri;}if(x){p.dataSource.uri=T.uriParent;}}}}return p;};
A.prototype.getWindowLocationHref=function(){return window.location.href;};
A.prototype.isGroupRemovable=function(m){return!this._isGroupPreset(m);};
A.prototype.isGroupLocked=function(m){return this._isGroupLocked(m);};
A.prototype.getGroupTiles=function(m){return r.getGroupTiles(m).concat(r.getGroupLinks(m));};
A.prototype.getTileType=function(I){if(r.isLink(this._mResolvedTiles,I)){return this.TileType.Link;}if(r.isCard(this._mResolvedTiles,I)){return this.TileType.Card;}return this.TileType.Tile;};
A.prototype.getTileId=function(t){return r.getTileId(t);};
A.prototype.getTileSize=function(t){return r.getTileSize(this._mResolvedTiles,t)||"1x1";};
A.prototype.getTileTarget=function(t){var T=r.getTileId(t),m=this._mResolvedTiles[T];if(t.target&&t.target.url){return t.target.url;}if(m){return m.tileIntent;}L.warning("Could not find a target for Tile with id '"+T+"'","sap.ushell.adapters.cdm.LaunchPageAdapter");return"";};
A.prototype.isTileIntentSupported=function(t){return(this._mFailedResolvedTiles[t.id]===undefined);};
A.prototype.setTileVisible=function(t,N){var m=this._mResolvedTiles[t.id];if(m){if(m.tileComponent){this._notifyTileAboutVisibility(m.tileComponent,N,m.visibility);}m.visibility=N;}};
A.prototype.getCardManifest=function(m){var p,s=this._mResolvedTiles[m.id];p=s.tileResolutionResult;return p.tileComponentLoadInfo;};
A.prototype._getTileUiComponentContainerSync=function(t,m,I){var p=this,s,T,N,v,w={};T=p._createTileComponentData(t,I,m);s=m.tileResolutionResult;if(m.isLink){N=s.navigationMode;return p._createLinkInstance(t,I,N,G,o);}if(typeof s.tileComponentLoadInfo==="object"&&s.tileComponentLoadInfo!==null){w=s.tileComponentLoadInfo.componentProperties||{};w.name=s.tileComponentLoadInfo.componentName;}w.componentData=T;if(w.manifest){w.componentData.properties=w.componentData.properties||{};w.componentData.properties.manifest=w.manifest;}if(w.name){w.async=false;var x;try{v=sap.ui.component(w);}catch(E){L.error(E.message+"\n-- An error occurred while instantiating "+"the tile component for "+w.name,E.stack?E.stack:"","sap.ushell.adapters.cdm.LaunchPageAdapter");return null;}x=new sap.ui.core.ComponentContainer({component:v,height:"100%"});if(!I){p._mResolvedTiles[t.id].tileComponent=v;}return x;}return null;};
A.prototype._getTileUiComponentContainer=function(t,m,I){var p=this,s,v,N,T,w,x,y=new q.Deferred();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(z){v=z;var B=this._createTileComponentData(t,I,m);return B;}.bind(this)).then(function(z){return this._enhanceTileComponentData(t,z);}.bind(this)).then(function(z){s=m.tileResolutionResult;if(m.isLink){N=s.navigationMode;y.resolve(p._createLinkInstance(t,I,N,G,o));return;}var B=this._createTileComponentProperties(z,s.tileComponentLoadInfo);if(!B.name){return Promise.reject("Cannot find name of tile component for tile with id: '"+t.id+"'");}if(B.manifest){z.properties=z.properties||{};z.properties.manifest=B.manifest;}x=this._isCustomTileComponent(B.name);var E=function(F){var m;T=F.componentHandle.getInstance();w=new C({component:T,height:"100%"});if(!I){m=p._mResolvedTiles[t.id];m.tileComponent=T;if(typeof m.visibility==="boolean"){p._notifyTileAboutVisibility(T,m.visibility);}}return w;};var _=function(){return v.createComponent({loadCoreExt:x,loadDefaultDependencies:false,componentData:z,url:B.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:B,ui5ComponentName:B.name},{},[],k.Visualization).then(E);};if(x){e.once("CoreResourcesComplementLoaded").do(function(){_().then(function(w){y.resolve(w);}).fail(function(F){y.reject(F);});});}else{_().then(function(w){y.resolve(w);}).fail(function(F){y.reject(F);});}}.bind(this)).catch(function(E){y.reject(E);});return y.promise();};
A.prototype._createTileComponentProperties=function(t,T){var m={};if(!T||d(T)){if(t.properties.indicatorDataSource&&t.properties.indicatorDataSource.path){m.name=D;}else{m.name=S;}}else{m=T.componentProperties||{};m.name=T.componentName;}return m;};
A.prototype.getTileView=function(m){var t=this;return new q.Deferred(function(p){return t._getTileView(m,false).then(function(T){p.resolve(T);},function(s){var E="Tile with ID '"+m.id+"' could not be initialized"+(s?":\n"+s:".");L.error(E,null,m.tileType);p.reject(E);});}).promise();};
A.prototype._getTileView=function(m){var p,E,s=new q.Deferred();if(typeof m!=="object"||!m.id){E="Invalid input parameter passed to _getTileView: "+m;L.error(E);return s.reject(E).promise();}p=this._mResolvedTiles[m.id];if(!p){E="No resolved tile found for tile ID: "+m.id;L.error(E);return s.reject(E).promise();}return this._getTileUiComponentContainer(m,p,false);};
A.prototype._createTileComponentData=function(t,I,m){var T=I?this.getCatalogTileTitle(t):this.getTileTitle(t),s=I?this.getCatalogTilePreviewSubtitle(t):this.getTileSubtitle(t),p=I?this.getCatalogTilePreviewIcon(t):this.getTileIcon(t),v=I?this.getCatalogTilePreviewInfo(t):this.getTileInfo(t),w=I?this.getCatalogTileTargetURL(t):this.getTileTarget(t),x=this.getTileIndicatorDataSource(t),N=t.numberUnit||m.tileResolutionResult.numberUnit,y={properties:{},startupParameters:{}};if(m.tileResolutionResult.isCustomTile===true&&m.tileResolutionResult.startupParameters){y.startupParameters=m.tileResolutionResult.startupParameters;}if(T){y.properties.title=T;}if(v){y.properties.info=v;}if(s){y.properties.subtitle=s;}if(p){y.properties.icon=p;}if(w){y.properties.targetURL=w;}if(N){y.properties.numberUnit=N;}if(x.indicatorDataSource){y.properties.indicatorDataSource=x.indicatorDataSource;if(x.dataSource){y.properties.dataSource=x.dataSource;}}if(m.tileResolutionResult){y.properties.navigationMode=m.tileResolutionResult.navigationMode;y.properties.contentProviderId=m.tileResolutionResult.contentProviderId||"";}return y;};
A.prototype._enhanceTileComponentData=function(t,m){var p=Promise.resolve();var s=this.getTileContentProviderId(t);if(s){p=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(v){return v.getSystemContext(s);}).then(function(v){m.properties.indicatorDataSource.path=v.getFullyQualifiedXhrUrl(m.properties.indicatorDataSource.path);}).catch(function(){L.error("System Context not available");});}return p.then(function(){return m;});};
A.prototype._isGroupTile=function(t){return r.isGroupTile(t);};
A.prototype._isCatalogTile=function(t){return!!(t&&t.isCatalogTile);};
A.prototype._isFailedGroupTile=function(t){return!!(t&&this._mFailedResolvedTiles&&this._mFailedResolvedTiles[r.getTileId(t)]);};
A.prototype.getCatalogTileId=function(m){if(this._isGroupTile(m)){if(this._isFailedGroupTile(m)){return undefined;}if(m.isBookmark&&O.get("target.url",m)){return m.target.url;}return m.vizId||(m.target&&m.target.url);}if(this._isCatalogTile(m)){return m.id;}return undefined;};
A.prototype.getCatalogTilePreviewTitle=function(m){if(this._isGroupTile(m)){return this.getTileTitle(m);}return(m.tileResolutionResult&&m.tileResolutionResult.title)||"";};
A.prototype.getCatalogTileTargetURL=function(m){if(!m){throw new Error("The given tile is falsy");}if(this._isCatalogTile(m)){if(m.tileResolutionResult&&m.tileResolutionResult.isCustomTile){if(!m.tileResolutionResult.targetOutbound){return"";}return this._toHashFromOutbound(m.tileResolutionResult.targetOutbound);}return m.tileIntent||"";}return this.getTileTarget(m);};
A.prototype.isGroupFeatured=function(m){return!!m.isFeatured;};
A.prototype._getMember=function(m,s){return U.getMember(m,s);};
A.prototype.getCdmVersionsSupported=function(){return{min:V("3.0.0"),max:V("3.1.0")};};
A.prototype.isSiteSupported=function(s){if(!s._version||V(s._version).compareTo(this.getCdmVersionsSupported().min)<0||V(s._version).compareTo(this.getCdmVersionsSupported().max)>0){L.fatal("Invalid CDM site version: Only version 3.0.0 is supported");return false;}return true;};
A.prototype._isCustomTileComponent=function(s){return!(s===S||s===D);};
return A;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/LaunchPageAdapter',["sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/_LaunchPage/modifyHome","sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs","sap/m/library","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/components/tiles/utilsRT","sap/ushell/adapters/cdm/v3/AdapterBase","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/navigationMode","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/Log"],function(r,m,R,M,u,W,a,U,o,A,b,n,C,J,q,i,O,L){"use strict";var g=M.GenericTileMode;var S="sap.ushell.components.tiles.cdm.applauncher";var D="sap.ushell.components.tiles.cdm.applauncherdynamic";
function c(d,p,f){A.call(this,d,p,f);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(e){this.oURLParsingService=e[0];this.oCDMService=e[1];}.bind(this));this._getTileFromHashInContextOfSite=function(e,z,I){var B=new q.Deferred(),E=z[I];if(!E){E=e(I);z[I]=E;}E.done(function(T){var F={tileIntent:I,tileResolutionResult:T};B.resolve(F);}).fail(function(F){B.reject("Hash '"+I+"' could not be resolved to a tile. "+F);});return B.promise();};this._getTileFromHash=function(I){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(z){var B=z.resolveTileIntent.bind(z);this._getTileFromHashInContextOfSite(B,this._mCatalogTilePromises,I).done(e.resolve).fail(e.reject);}.bind(this));return e.promise();};this._getTileForUrl=function(T){var e={componentName:T.indicatorDataSource?D:S};return{tileIntent:"#",tileResolutionResult:{tileComponentLoadInfo:e,isCustomTile:false}};};this._prepareTileHash=function(T){var P={},e,z;if(this._isCatalogTile(T)){return T.tileIntent;}if(this._isGroupTile(T)&&T.target){z=T.target.parameters||[];z.forEach(function(B){if(B.name&&B.value){P[B.name]=[B.value];}});e={target:{semanticObject:T.target.semanticObject,action:T.target.action},params:P,appSpecificRoute:T.target.appSpecificRoute};return"#"+a.constructShellHash(e);}return undefined;};this.getDefaultGroup=function(){var e=new q.Deferred(),z;var B=this;if(!this._oDefaultGroup){z=this._ensureLoaded();}if(z){z.done(function(){e.resolve(B._oDefaultGroup);}).fail(function(E){e.reject("Failed to access default group. "+E);});}else{e.resolve(B._oDefaultGroup);}return e.promise();};this.addGroup=function(T){var e=new q.Deferred(),G,z,B=this;if(!this._isValidTitle(T)){return e.reject("No valid group title").promise();}z="Failed to add the group with title '"+T+"' to the homepage. ";this.oCDMService.getSite().done(function(E){G=u.generateUniqueId(r.getGroupIdsFromSite(E));m.addGroupToSite(E,m.createEmptyGroup(G,T));B.oCDMService.save().done(function(){delete B._ensureLoadedDeferred;e.resolve(E.groups[G],G);}).fail(function(F){e.reject(F);});}).fail(function(E){e.reject(z+E);});return e.promise();};this.setGroupTitle=function(G,N){var e=this,z=new q.Deferred(),B,E;if(typeof G!=="object"||!r.getGroupId(G)){return z.reject("Unexpected group value").promise();}if(!e._isValidTitle(N)){return z.reject("Unexpected oGroup title value").promise();}E="Failed to set new title for group with id '"+r.getGroupId(G)+"'. ";B=r.getGroupTitle(G);this.oCDMService.getSite().done(function(F){if(G){m.setGroupTitle(G,N);}e.oCDMService.save().done(function(){z.resolve();}).fail(function(H){L.error(H);z.reject(B);});}).fail(function(F){z.reject(B,E+F);});return z.promise();};this.hideGroups=function(H){var e=new q.Deferred(),z=this.oCDMService,G;if(H&&Array.isArray(H)){G="Failed to hide group. ";z.getSite().done(function(B){r.getGroupsArrayFromSite(B).forEach(function(E){var I=Array.prototype.indexOf.call(H,r.getGroupId(E))===-1;m.setGroupVisibility(E,I);});z.save().done(function(){e.resolve();}).fail(function(E){e.reject("Hiding of groups did not work as expected - "+E);});}).fail(function(E){e.reject(G+E);});}else{e.reject("Invalid input parameter aHiddenGroupIds. Please pass a valid input parameter.");}return e.promise();};this.moveGroup=function(G,e){var z=new q.Deferred(),B=this.oCDMService,E,F;if(!G||!r.getGroupId(G)||e<0){return z.reject("Unable to move groups - invalid parameters").promise();}F="Failed to move group with id '"+G.identification.id+"'. ";B.getSite().done(function(H){var I=r.getGroupIdsFromSite(H),K=r.getGroupId(G);if(!I){return z.reject("groupsOrder not found - abort operation of adding a group.");}else if(I.indexOf(K)===e){return z.resolve();}E=u.moveElementInsideOfArray(I,I.indexOf(K),e);if(!E){return z.reject("invalid move group operation - abort.");}m.setGroupsOrder(H,E);B.save().done(function(){z.resolve();}).fail(function(N){z.reject(N);});return undefined;}).fail(function(H){z.reject(F+H);});return z.promise();};this.removeGroup=function(G){var e=new q.Deferred(),z=this.oCDMService,B,E;if(typeof G!=="object"){return e.reject("invalid group parameter").promise();}E=r.getGroupId(G);if(!E){return e.reject("group without id given").promise();}B="Failed to remove group with id '"+E+"'. ";z.getSite().done(function(F){m.removeGroupFromSite(F,G);z.save().done(function(){e.resolve();}).fail(function(H){e.reject(H);});}).fail(function(F){e.reject(B+F);});return e.promise();};this.resetGroup=function(G){var e=new q.Deferred(),z=this.oCDMService,B=[],E=this,F,H;if(typeof G==="object"&&r.getGroupId(G)){H=r.getGroupId(G);F="Failed to reset group with id '"+H+"'. ";z.getSite().done(function(I){q.extend(true,B,r.getGroupsArrayFromSite(I));if(E.isGroupRemovable(G)===false){z.getGroupFromOriginalSite(H).done(function(K){if(typeof I==="object"&&r.getGroupFromSite(I,H)){m.overwriteGroup(I,K,H);}z.save().done(function(){e.resolve(K);}).fail(function(N){e.reject("Group could not be reset - "+N,B);});}).fail(function(K){e.reject("Group could not be reset - "+K,B);});}else{e.reject("Group could not be reset as it was created by the user",B);}}).fail(function(I){e.reject(F+I,[]);});}return e.promise();};this.getLinkTiles=function(G){return r.getGroupLinks(G);};this.isLinkPersonalizationSupported=function(){return true;};this._notifyTileAboutRefresh=function(T){if(typeof T.tileRefresh==="function"){T.tileRefresh();}};this.refreshTile=function(T){var e=this._mResolvedTiles[T.id];if(e){if(e.tileComponent){this._notifyTileAboutRefresh(e.tileComponent);}}};this._notifyTileAboutVisibility=function(T,N,e){if(typeof T.tileSetVisible==="function"&&e!==N){T.tileSetVisible(N);}};this.getTileView=function(G){var e=this;return new q.Deferred(function(z){return e._getTileView(G,false).then(function(T){z.resolve(T);},function(B){var E="Tile with ID '"+G.id+"' could not be initialized"+(B?":\n"+B:".");L.error(E,null,G.tileType);z.reject(E);});}).promise();};this._getCatalogTileView=function(e){if(typeof e!=="object"){throw new Error(e);}var z;if(typeof e.tileResolutionResult!=="object"){z=this._mResolvedTiles[e.id];}else{z=e;}return this._getTileUiComponentContainerSync(e,z,true);};this._getCatalogTileViewControl=function(e){var z=new q.Deferred();if(typeof e!=="object"){var E="Invalid input parameter passed to _getCatalogTileView: "+e;L.error(E);return z.reject(E).promise();}return this._getTileUiComponentContainer(e,e,true);};this._createLinkInstance=function(T,I,N,G,e){var z,B,E,F=this.getTileSubtitle(T);var H=G;if(I===true){z=this.getCatalogTileTitle(T);}else{z=this.getTileTitle(T);}B=new H({mode:g.LineMode,subheader:F,header:z,url:W.getLeanURL(this.getTileTarget(T)),press:function(K){this._genericTilePressHandler(T,K);}.bind(this)});if(N){E=e.i18n.getText(N+"NavigationMode");B.setAriaLabel(E+" "+z+" "+F);}this._mResolvedTiles[T.id].linkTileControl=B;return B;};this._genericTilePressHandler=function(T,e){var z;if(e.getSource().getScope&&e.getSource().getScope()==="Display"){z=this.getTileTarget(T);if(z){if(z[0]==="#"){hasher.setHash(z);}else{W.openURL(z,"_blank");}}}};this.addTile=function(e,G){var z=new q.Deferred(),B,E=this.oCDMService,F;if(!G){G=this._oDefaultGroup;}if(e.contentProviderId){if(e.externalUrl){return this.addBookmark(this._getBookmarkDataForExtensionCatalogTile(e),G);}return z.reject("Extension Tile without URL").promise();}F=k();F.vizId=e.vizId;this._mResolvedTiles[F.id]={tileIntent:e.tileIntent,tileResolutionResult:e.tileResolutionResult,isLink:false};E.getSite().done(function(H){H.groups[G.identification.id].payload.tiles.push(F);E.save().done(function(){z.resolve(F);}).fail(function(I){z.reject(I);});}).fail(function(H){B="Failed to add tile with id '"+F.id+"' to group with id '"+G.identification.id+"'. ";z.reject(B+H);});return z.promise();};this._getBookmarkDataForExtensionCatalogTile=function(e){var B={title:e.tileResolutionResult.title,subtitle:e.tileResolutionResult.subTitle,icon:e.tileResolutionResult.icon,info:e.tileResolutionResult.info,url:e.externalUrl};if(e.tileResolutionResult.indicatorDataSource&&e.tileResolutionResult.indicatorDataSource.path){B.serviceUrl=e.tileResolutionResult.indicatorDataSource.path;B.serviceRefreshInterval=e.tileResolutionResult.indicatorDataSource.refresh;}return B;};this.removeTile=function(G,T,I){var z=this.oCDMService,B,E=new q.Deferred(),F=this;if(!G||typeof G!=="object"||!G.identification||!G.identification.id||!T||typeof T!=="object"||!T.id){return E.reject({},"Failed to remove tile. No valid input parameters passed to removeTile method.").promise();}B="Failed to remove tile with id '"+T.id+"' from group with id '"+G.identification.id+"'. ";z.getSite().done(function(H){var P,K;I=+I;try{P=H.groups[G.identification.id].payload;}catch(e){E.reject(H.groups[G.identification.id],B);}K=F.getTileType(T)===F.TileType.Link?"links":"tiles";if(F.getTileType(T)===F.TileType.Link){I-=P.tiles.length;}if(I>=0){P[K].splice(I,1);}else{P[K]=P[K].filter(function(N){return N.id!==T.id;});}z.save().done(function(){E.resolve();}).fail(function(N){L.error(N);E.reject(H.groups[G.identification.id],N);});}).fail(function(e){E.reject({},B+e);});return E.promise();};this.moveTile=function(T,e,z,B,E,F){var G=new q.Deferred(),H=this.oCDMService,I=this,K;if(!T||i(T)||e===undefined||e<0||z===undefined||z<0||!B||!B.identification||!B.identification.id||!E||!E.identification||!E.identification.id){return G.reject("Invalid input parameters").promise();}K="Failed to move tile with id '"+T.id+"'. ";H.getSite().done(function(N){var P,Q,V=I.getTileType(T)===I.TileType.Link?"links":"tiles";if(!F){F=I._mResolvedTiles[T.id].isLink?"link":"tile";}P=F==="link"?"links":"tiles";if(V!==P&&I._mResolvedTiles[T.id]){I._mResolvedTiles[T.id].isLink=F==="link";}if(P==="links"){z-=N.groups[E.identification.id].payload.tiles.length;}if(V==="links"){e-=N.groups[B.identification.id].payload.tiles.length;}if(B.identification.id===E.identification.id){if(e!==z||V!==P){Q=N.groups[E.identification.id].payload;Q[V].splice(e,1);Q[P].splice(z,0,T);}else{return G.resolve(T).promise();}}else{N.groups[B.identification.id].payload[V].splice(e,1);N.groups[E.identification.id].payload[P].splice(z,0,T);}H.save().done(function(){G.resolve(T);}).fail(function(X){L.error(K+X);G.reject(K+X);});return undefined;}).fail(function(N){L.error(K+N);G.reject(K+N);});return G.promise();};this._compareCatalogs=function(e,B){return(e.identification.title||"").toLowerCase()>(B.identification.title||"").toLowerCase()?1:-1;};this.getCatalogs=function(){var e=this,z=new q.Deferred(),B=[];function E(F,G,B,H,P,I){var K=F.catalogs[G];if(P&&I){K.contentProviderId=P;I.catalogsMap[G]=K;}B.push(K);H.notify(K);}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(F){F.getSite().done(function(G){Object.keys(G.catalogs).forEach(function(H){E(G,H,B,z);});F.getExtensionSites().progress(function(H){var P=H.providerId;var I=H.site;var K=Promise.resolve(I);var N={sitePromise:K,site:I,catalogsMap:{}};Object.keys(I.catalogs).forEach(function(Q){e._mContentProviders[P]=N;E(I,Q,B,z,P,N);});}).done(function(H){H.filter(function(I){return!I.success;}).forEach(function(I){B.push({identification:{id:I.providerId},contentProviderId:I.providerId,error:"The following content providers could not provide catalogs: "+I.providerId+(I.error?" -> "+I.error:"")});});z.resolve(B.sort(e._compareCatalogs));});});});return z.promise();};this._isStartableInbound=function(I){if(!I.semanticObject||!I.action){return false;}var N=["Shell-plugin","Shell-bootConfig"];if(N.indexOf(I.semanticObject+"-"+I.action)>-1){return false;}return true;};this._isStartableVisualization=function(V,I){var e=O.get("signature.parameters",I);if(!e){return true;}var z=O.get("parameters",b.getTarget(V));return Object.keys(e).every(function(B){var E=e[B];if(B==="sap-external-url"){return true;}if(!E.filter||E.filter.format!=="plain"){return true;}var F=E.filter.value;var G=O.get([B,"value","value"],z);if(F!==G){return false;}return true;});};this._isHiddenInbound=function(I){return!!I.hideLauncher;};this._toHashFromInbound=function(I){var e=U.toHashFromInbound(I);if(!e){return undefined;}return"#"+e;};this._getExternalUrlFromInbound=function(I){return O.get("signature.parameters.sap-external-url.launcherValue.value",I)||null;};this._toHashFromOutbound=function(e){var z=U.toHashFromOutbound(e);if(!z){return undefined;}return"#"+z;};this.getCatalogTiles=function(e){var z=this,B=new q.Deferred();if(typeof e!=="object"||e===null){return B.reject("Invalid input parameter '"+e+"' passed to getCatalogTiles.").promise();}if(e.contentProviderId&&this._mContentProviders[e.contentProviderId]){this._mContentProviders[e.contentProviderId].sitePromise.then(function(E){h.call(z,e,E).done(B.resolve).fail(B.reject);},function(E){B.reject("Failed to get site: "+E);});}else{this.oCDMService.getSite().done(function(E){h.call(z,e,E).done(B.resolve).fail(B.reject);}).fail(function(E){B.reject("Failed to get site: "+E);});}return B.promise();};function h(e,z){var B=this,E=new q.Deferred();setTimeout(function(){var F=((e.payload&&e.payload.viz)||[]).reduce(function(G,V){var H,I,K,N,P,Q,T,X,Y,Z,$,_,a1,b1,c1,d1,e1;if(!V){return G;}I=b.get(z,V);if(!I){return G;}K=b.getTypeId(I);N=b.getType(z,K);H=b.getAppId(I);if(H){P=b.getAppDescriptor(z,H);if(!P){return G;}Q=r.getInbound(P,b.getTarget(I).inboundId);if(!Q){return G;}if(!B._isStartableInbound(Q.inbound)||!B._isStartableVisualization(I,Q.inbound)||B._isHiddenInbound(Q.inbound)){return G;}X=U.mapOne(Q.key,Q.inbound,P,I,N,z);if(!X||!X.tileResolutionResult){return G;}b1=X.resolutionResult.applicationType;c1=X.resolutionResult.additionalInformation;e1=C.last("/core/navigation/enableInPlaceForClassicUIs");d1=e1?e1[b1]:false;Y=n.computeNavigationModeForHomepageTiles(b1,c1,d1);Z=b.getOutbound(I,Q.inbound);T=B._toHashFromOutbound(Z);}else{var f1=b.getConfig(I);if(f1===undefined){return G;}X=U.mapOne(undefined,undefined,undefined,I,N,z);if(u.getMember(f1,"sap|flp.target.type")==="URL"){a1=u.getMember(f1,"sap|flp.target.url");}}$=X.tileResolutionResult;$.navigationMode=Y;if(!B._isFormFactorSupported($)){return G;}if(e.contentProviderId){a1=B._getMember(P,"sap|app.crossNavigation.inbounds.Shell-launchURL.signature.parameters.sap-external-url.launcherValue.value");}_={id:V,vizId:V,tileIntent:a1||T,tileResolutionResult:$,isCatalogTile:true};if(e.contentProviderId&&a1){_.contentProviderId=e.contentProviderId;_.externalUrl=a1;}G.push(_);return G;},[]);E.resolve(F);},0);return E.promise();}this.getCatalogError=function(e){if(e.error){return e.error;}return undefined;};this.getCatalogId=function(e){return R.getId(e);};this.getCatalogTitle=function(e){return R.getTitle(e);};this._isFailedCatalogTile=function(T){return!!(T&&this._mFailedResolvedCatalogTiles&&this._mFailedResolvedCatalogTiles[r.getTileId(T)]);};this.getCatalogTileTitle=function(G){if(this._isGroupTile(G)){if(this._isFailedGroupTile(G)){return"";}return this._mResolvedTiles[G.id].tileResolutionResult.title;}if(this._isCatalogTile(G)){if(this._isFailedCatalogTile(G)){return undefined;}return G.tileResolutionResult.title;}return undefined;};this.getCatalogTileSize=function(e){return e.tileResolutionResult.size||"1x1";};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewControl(e);};this.getCatalogTilePreviewSubtitle=function(G){if(this._isGroupTile(G)){return this.getTileSubtitle(G);}return(G.tileResolutionResult&&G.tileResolutionResult.subTitle)||"";};this.getCatalogTilePreviewIcon=function(G){if(this._isGroupTile(G)){return this.getTileIcon(G);}return(G.tileResolutionResult&&G.tileResolutionResult.icon)||"";};this.getCatalogTilePreviewInfo=function(G){if(this._isGroupTile(G)){return this.getTileInfo(G);}return(G.tileResolutionResult&&G.tileResolutionResult.info)||"";};this.getCatalogTilePreviewIndicatorDataSource=function(G){return G.tileResolutionResult&&G.tileResolutionResult.indicatorDataSource;};this.getCatalogTileKeywords=function(G){var K=[],e=G;if(!e){L.error("Could not find the Tile","sap.ushell.adapters.cdm.LaunchPageAdapter");return K;}if(this._mResolvedTiles&&this._mResolvedTiles[G.id]){e=this._mResolvedTiles[G.id];}if(e&&e.tileResolutionResult&&Array.isArray(e.tileResolutionResult.keywords)){Array.prototype.push.apply(K,e.tileResolutionResult.keywords);}if(e&&e.tileResolutionResult&&e.tileResolutionResult.title){K.push(e.tileResolutionResult.title);}if(e&&e.tileResolutionResult&&e.tileResolutionResult.subTitle){K.push(e.tileResolutionResult.subTitle);}return K;};this._visitBookmarks=function(e,V,z,B){var E;var I=a.parseShellHash(e);if(I){E=x(I);}else{E=w(e);}return this.oCDMService.getSite().then(function(F){var G=F.groups;var T=Object.keys(G).filter(function(K){return!G[K].payload.locked;}).map(function(K){return G[K].payload.tiles.filter(function(H){return H.isBookmark&&H.vizType===z&&(H.contentProvider||"")===(B||"")&&s(E,H.target);});}).reduce(function(H,K){Array.prototype.push.apply(H,K);return H;},[]);if(!V){return T.length;}return q.when(T.map(V)).then(function(){return T.length;});});};this.addBookmark=function(P,G,e){var z=this;return new q.Deferred(function(B){var E=z.oCDMService;q.when(G||z.getDefaultGroup(),E.getSite()).done(function(G,F){var T,H,I=a.parseShellHash(P.url),K,N=false;if(!I){H=w(P.url);N=true;}else{H=x(I);}T=j(P,H,e);if(N){K=new q.Deferred();K.resolve(z._getTileForUrl(T));}else{K=z._getTileFromHash(P.url);}K.done(function(Q){Q.isLink=false;z._mResolvedTiles[T.id]=Q;F.groups[G.identification.id].payload.tiles.push(T);E.save().done(function(){B.resolve(T);}).fail(function(V){B.reject(V);});}).fail(function(Q){B.reject("Bookmark creation failed because: "+Q);});}).fail(function(F){B.reject(F);});}).promise();};this.addCustomBookmark=function(B,T,e){var z=new q.Deferred();Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(E){var F=E[0];var G=E[1];q.when(T||this.getDefaultGroup(),G.getSite()).done(function(H,I){var K,N=F.parseShellHash(B.url),P=(N===undefined);K=P?w(B.url):x(N);var Q={id:u.generateUniqueId([]),vizType:B.vizType,title:B.title,subTitle:B.subtitle,icon:B.icon,info:B.info,numberUnit:B.numberUnit,target:K,indicatorDataSource:{path:B.serviceUrl,refresh:B.serviceRefreshInterval},vizConfig:B.vizConfig,isBookmark:true};if(e){Q.contentProvider=e;}this._resolveTileByVizId(Q,I).done(function(V){V.isLink=false;this._mResolvedTiles[Q.id]=V;I.groups[H.identification.id].payload.tiles.push(Q);G.save().done(function(){z.resolve(Q);}).fail(z.reject);}.bind(this)).fail(function(V){z.reject("Bookmark creation failed because: "+V);});}.bind(this)).fail(z.reject);}.bind(this));return z.promise();};this.countBookmarks=function(e,z){return this._visitBookmarks(e,undefined,undefined,z);};this.countCustomBookmarks=function(I){if(!I.vizType){return Promise.reject("countCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}return new Promise(function(e,z){this._visitBookmarks(I.url,undefined,I.vizType,I.contentProviderId).done(e).fail(z);}.bind(this));};this.updateBookmarks=function(e,P,V,z){var B=this.oCDMService;var E=this._mResolvedTiles;function F(T){return new q.Deferred(function(G){var I,N;var H;var K=false;var Q={};if(P.url||P.url===""){I=a.parseShellHash(P.url);if(!I){N=w(P.url);}else{N=x(I);}}if(T.icon!==P.icon){Q.icon=P.icon;K=true;}if(T.title!==P.title){Q.title=P.title;K=true;}if(T.subTitle!==P.subtitle){Q.subtitle=P.subtitle;K=true;}if(P.url&&e!==P.url){Q.targetURL=P.url;K=true;}if(T.info!==P.info){Q.info=P.info;K=true;}l(T,P,N);if(K&&E[T.id]){H=E[T.id].tileComponent;if(H){H.tileSetVisualProperties(Q);}}G.resolve(T);}).promise();}return this._visitBookmarks(e,F,V,z).then(function(G){return B.save().then(function(){return G;});});};this.updateCustomBookmarks=function(I,B){if(!I.vizType){return Promise.reject("updateCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}if(B.title===""){return Promise.reject("updateCustomBookmarks: The bookmark title cannot be an empty string");}if(B.url===""){return Promise.reject("updateCustomBookmarks: The bookmark url cannot be an empty string");}return new Promise(function(e,z){this.updateBookmarks(I.url,B,I.vizType,I.contentProviderId).done(e).fail(z);}.bind(this));};this.deleteBookmarks=function(e,V,z){var B=this.oCDMService;var I=a.parseShellHash(e);var E;if(I){E=x(I);}else{E=w(e);}return B.getSite().then(function(F){var G=F.groups;var H=Object.keys(G).map(function(K){var P=G[K].payload;var N=0;P.tiles=P.tiles.filter(function(T){if(T.isBookmark&&T.vizType===V&&(T.contentProvider||"")===(z||"")&&s(E,T.target)){++N;return false;}return true;});return N;}).reduce(function(K,N){K+=N;return K;},0);return B.save().then(function(){return H;});});};this.deleteCustomBookmarks=function(I){if(!I.vizType){return Promise.reject("deleteCustomBookmarks: Required parameter is missing: oIdentifier.vizType");}return new Promise(function(e,z){this.deleteBookmarks(I.url,I.vizType,I.contentProviderId).done(e).fail(z);}.bind(this));};this.onCatalogTileAdded=function(T){};this._onTileSettingsSave=function(T,e){var z=new q.Deferred(),B,N,E,F,G,H,I;if(!T||!T.id||!e){return z.reject().promise();}N=e.oTitleInput.getValue();F=e.oSubTitleInput.getValue();E=e.oInfoInput.getValue();G=this.getTileTitle(T);H=this.getTileInfo(T);I=this.getTileSubtitle(T);if(G===N&&I===F&&H===E){return z.resolve().promise();}B={};if(G!==N){B.title=N;T.title=N;}if(I!==F){B.subtitle=F;T.subTitle=F;}if(H!==E){B.info=E;T.info=E;}if(this._mResolvedTiles[T.id].tileComponent){this._mResolvedTiles[T.id].tileComponent.tileSetVisualProperties(B);}else if(this._mResolvedTiles[T.id].linkTileControl){if(B.title){this._mResolvedTiles[T.id].linkTileControl.setHeader(B.title);}if(B.subtitle){this._mResolvedTiles[T.id].linkTileControl.setSubheader(B.subtitle);}if((B.title)||(B.subtitle)){this._mResolvedTiles[T.id].linkTileControl.rerender();}}sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(K){K.save().fail(function(P){L.error(P);z.reject("Could not save personalization changes: "+P);}).done(function(){z.resolve();});});return z.promise();};this.getTileActions=function(T){var e=[],z,B;if(this._isGroupTile(T)&&!this._isFailedGroupTile(T)){B=new J({config:{display_title_text:this.getTileTitle(T),display_subtitle_text:this.getTileSubtitle(T),display_info_text:this.getTileInfo(T)}});z=o.getTileSettingsAction(B,this._onTileSettingsSave.bind(this,T),this.getTileType(T));e.push(z);}return e;};function j(P,T,e){var z=k(P,T);z.isBookmark=true;if(e){z.contentProvider=e;}return z;}function k(P,T){var e={id:u.generateUniqueId([])};l(e,P,T);return e;}function l(T,P,e){P=q.extend(true,{},P);if(e){T.target=e;}if(P.title||P.title===""){T.title=P.title;}if(P.icon||P.icon===""){T.icon=P.icon;}if(P.subtitle||P.subtitle===""){T.subTitle=P.subtitle;}if(P.info||P.info===""){T.info=P.info;}if(P.numberUnit||P.numberUnit===""){T.numberUnit=P.numberUnit;}if(P.dataSource){T.dataSource={};q.extend(true,T.dataSource,P.dataSource);delete P.serviceUrl;}else if(P.dataSource===null){delete T.dataSource;delete T.indicatorDataSource;delete P.serviceUrl;}if((P.dataSource||T.dataSource)&&P.serviceUrlPath){T.indicatorDataSource={path:P.serviceUrlPath};}if(P.serviceUrl||P.serviceUrl===""){if(T.dataSource){L.warning("`serviceUrl` is marked for deprecation in the future."+"It is not the preferred means for defining a dynamic "+"tile's data source. Please use `oParameter.dataSource`");delete T.dataSource;}T.indicatorDataSource={path:P.serviceUrl};}else if(P.serviceUrl===null&&!T.dataSource){delete T.indicatorDataSource;}if(P.serviceRefreshInterval||P.serviceRefreshInterval===0){T.indicatorDataSource.refresh=P.serviceRefreshInterval;}if(P.vizConfig){T.vizConfig=P.vizConfig;}}function s(T,e){if(T&&e){if(T.url){return T.url===e.url;}return T.semanticObject===e.semanticObject&&T.action===e.action&&t(T.parameters,e.parameters)&&T.appSpecificRoute===e.appSpecificRoute;}return T===e;}function t(P,e){var F,z;P=P||[];e=e||[];if(P.length===e.length){F=v(P);z=v(e);return F===z;}return false;}function v(e){return e.map(function(P){return P.name+P.value;}).sort().join();}function w(e){return{url:e};}function x(I){var T={semanticObject:I.semanticObject,action:I.action,parameters:y(I.params)};if(I.appSpecificRoute){T.appSpecificRoute=I.appSpecificRoute;}return T;}function y(I){return Object.keys(I).map(function(K){var V=I[K]&&I[K][0];return{name:K,value:V||""};});}this._getSiteData=function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(z){z.getSite().done(e.resolve).fail(e.reject);});return e.promise();};this._addDefaultGroup=function(G,e){var z=r.getDefaultGroup(G);if(!z){z=m.createDefaultGroup(u.generateUniqueId(r.getGroupIdsFromSite(e)));e=m.addGroupToSite(e,z,0);G=r.getGroupsArrayFromSite(e);}this._oDefaultGroup=z;return G;};}
c.prototype=A.prototype;return c;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/StaticGroupsAdapter',["sap/ushell/adapters/cdm/v3/AdapterBase","sap/ui/thirdparty/jquery"],function(A,q){"use strict";
function S(s,p,a){A.call(this,s,p,a);}
S.prototype=A.prototype;
S.prototype._addDefaultGroup=function(g,s){return g;};
S.prototype._getSiteData=function(){var d=new q.Deferred();return d.resolve(this.oAdapterConfiguration.config);};
return S;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications',["sap/base/util/ObjectPath"],function(O){"use strict";var r={};
r.getId=function(a){return O.get(["sap.app","id"],a);};
r.getTitle=function(a){return O.get(["sap.app","title"],a);};
r.getSubTitle=function(a){return O.get(["sap.app","subTitle"],a);};
r.getIcon=function(a){return O.get(["sap.ui","icons","icon"],a);};
r.getInfo=function(a){return O.get(["sap.app","info"],a);};
r.getKeywords=function(a){return O.get(["sap.app","tags","keywords"],a);};
r.getContentProviderId=function(a){return O.get(["sap.app","contentProviderId"],a);};
r.getInbounds=function(a){return O.get(["sap.app","crossNavigation","inbounds"],a);};
r.getInbound=function(a,i){return O.get(["sap.app","crossNavigation","inbounds",i],a);};
r.getInboundTarget=function(a,A,i){var o=O.get([A],a)||{};var I=this.getInbound(o,i);if(!o||!I){return;}return{semanticObject:I.semanticObject,action:I.action};};
return r;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readCatalogs',[],function(){"use strict";
function g(c){return c.identification.id;}
function a(c){return c.identification.title;}
return{getId:g,getTitle:a};},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readHome',["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(t,r){"use strict";var a={};
a.getGroupsArrayFromSite=function(s){var l=[];s.site.payload.groupsOrder.forEach(function(g,i){var G=s.groups[g];if(G){G.payload=G.payload||{};l.push(G);}});return l;};
a.getGroupsMapFromSite=function(s){return s.groups;};
a.getGroupIdsFromSite=function(s){return s.site.payload.groupsOrder;};
a.getGroupFromSite=function(s,g){return s.groups[g];};
a.getDefaultGroup=function(g){var d=g.filter(function(G){return G.payload.hasOwnProperty("isDefaultGroup");});if(d.length>0){return d[0];}};
a.getGroupId=function(g){return g.identification&&g.identification.id;};
a.getGroupTitle=function(g){return g.identification.title;};
a.isGroupPreset=function(g){if(!g.payload.hasOwnProperty("isPreset")){return true;}return!!g.payload.isPreset;};
a.isGroupLocked=function(g){return!!g.payload.locked;};
a.isGroupVisible=function(g){return!!(g.identification.isVisible===undefined||g.identification.isVisible===true);};
a.getGroupTiles=function(g){if(g.payload.tiles&&t.isArray(g.payload.tiles)&&g.payload.tiles.length>0){return g.payload.tiles;}return[];};
a.getGroupLinks=function(g){if(g.payload.links&&t.isArray(g.payload.links)&&g.payload.links.length>0){return g.payload.links;}return[];};
a.getTileId=function(T){return T.id;};
a.getTileVizId=function(T){return T.vizId;};
a.getTileTitle=function(R,T){var o;if(T&&T.isBookmark){return T.title;}o=R[T.id];if(o){return T.title||o.tileResolutionResult.title;}};
a.getContentProviderId=function(T){return T.contentProvider||undefined;};
a.getTileSubtitle=function(R,T){var o;if(T.isBookmark){return T.subTitle;}o=R[T.id];if(o){return T.subTitle||o.tileResolutionResult.subTitle;}};
a.getTileInfo=function(R,T){var o;if(T.isBookmark){return T.info;}o=R[T.id];if(o){return T.info||o.tileResolutionResult.info;}};
a.getTileIcon=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};
a.getTileIndicatorDataSource=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};
a.getTileSize=function(R,T){var o=R[T.id];if(o&&o.tileResolutionResult&&o.tileResolutionResult.size){return o.tileResolutionResult.size;}};
a.isLink=function(R,T){var o=R[T.id];if(o){return!!o.isLink;}return false;};
a.isCard=function(R,i){var o=R[i.id];if(o){return!!o.tileResolutionResult.isCard;}return false;};
a.isGroupTile=function(T){return!!(T&&T.id&&!T.isCatalogTile);};
a.supportsFormFactor=function(A,f){return A.deviceTypes&&A.deviceTypes[f];};
a.getInbound=function(A,i){var I=r.getInbound(A,i);return I&&{key:i,inbound:I};};
return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readPages',["sap/base/util/ObjectPath","sap/base/util/values"],function(O,o){"use strict";var r={};
r.getVisualizationReferences=function(p){var v;var V=[];var s=O.get("payload.sections",p)||{};o(s).forEach(function(S){v=O.get("layout.vizOrder",S)||[];v.forEach(function(a){if(S.viz[a]){V.push(S.viz[a]);}});});return V;};
return r;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils',["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/ushell/library"],function(r,a,b,u,C,d,i,O,c,e,f){"use strict";var g={};var D=f.DisplayFormat;
g.getVizData=function(s,v,U,S){if(v.isBookmark&&v.url){v=d(v);v.subTitle=v.subtitle;v.target=u.toTargetFromHash(v.url);}var h=this.getCdmParts(s,v);var V=h&&h[1]||{};var A=h&&h[3]||{};var o=r.get(s,b.getTileVizId(v))||{};var j={id:b.getTileId(v),vizId:b.getTileVizId(v)||"",vizType:v.vizType||r.getTypeId(o)||"",vizConfig:c({},V,v.vizConfig),title:r.getTitle(h)||"",subtitle:r.getSubTitle(h)||"",icon:r.getIcon(h)||"",keywords:r.getKeywords(h)||[],info:r.getInfo(h)||"",target:v.target||r.getTarget(o)||{},indicatorDataSource:this._getIndicatorDataSource(v,o,S),isBookmark:v.isBookmark||false,contentProviderId:v.contentProviderId||a.getContentProviderId(A)||"",displayFormatHint:v.displayFormatHint,numberUnit:r.getNumberUnit(h),_instantiationData:r.getInstantiationData(o)};j.target=this.harmonizeTarget(j.target);j.targetURL=u.toHashFromVizData(j,s.applications);if(j.indicatorDataSource&&j.indicatorDataSource.dataSource){j.dataSource=r.getDataSource(h,j.indicatorDataSource.dataSource);}if(v.isBookmark){this._addBookmarkInstantiationData(j,s);}if(!j._instantiationData||!Object.keys(j._instantiationData)){j._instantiationData={platform:"CDM",vizType:r.getType(s,j.vizType)};}this._evaluateDisplayFormat(j,s);return j;};
g._getIndicatorDataSource=function(v,V,s){if(v.indicatorDataSource&&v.indicatorDataSource.path){if(v.contentProviderId&&s){v.indicatorDataSource.path=s.getFullyQualifiedXhrUrl(v.indicatorDataSource.path);}return v.indicatorDataSource;}return r.getIndicatorDataSource(V);};
g.getVizRef=function(v){var V={id:v.id,vizId:v.vizId,title:v.title,subTitle:v.subtitle,icon:v.icon,keywords:v.keywords,info:v.info,target:v.target,indicatorDataSource:v.indicatorDataSource,contentProviderId:v.contentProviderId,displayFormatHint:v.displayFormatHint,numberUnit:v.numberUnit};if(V.indicatorDataSource&&V.indicatorDataSource.originalPath){V.indicatorDataSource.path=V.indicatorDataSource.originalPath;delete V.indicatorDataSource.originalPath;}if(v.isBookmark){V.isBookmark=v.isBookmark;if(v.vizConfig!==undefined&&!e(v.vizConfig)){V.vizType=v.vizType;if(v.cdmVizType){V.vizType=v.cdmVizType;}V.vizConfig=v.vizConfig;}}return V;};
g.getCdmParts=function(s,t){var v=r.get(s,b.getTileVizId(t))||{};var V=r.getConfig(v);var A=r.getAppDescriptor(s,r.getAppId(v));var I=a.getInbound(A,r.getInboundId(v));return[t,V,I,A];};
g.harmonizeTarget=function(t){var p=t.parameters;if(!p||i(p)){return t;}var P={};p.forEach(function(o){if(P[o.name]){if(!Array.isArray(P[o.name].value.value)){P[o.name].value.value=[P[o.name].value.value];}P[o.name].value.value.push(o.value);}else{P[o.name]={value:{value:o.value,format:"plain"}};}});t.parameters=P;return t;};
g._evaluateDisplayFormat=function(v,s){var h=v.displayFormatHint;var V=r.getType(s,v.vizType);var t=r.getTileSize(V);var S=t==="1x2"?D.StandardWide:D.Standard;var j=[S,D.Compact];v.supportedDisplayFormats=r.getSupportedDisplayFormats(V)||j;var k=r.getDefaultDisplayFormat(V)||S;if(v.supportedDisplayFormats.indexOf(h)===-1){v.displayFormatHint=k;}};
g._addBookmarkInstantiationData=function(v,s){if(v.vizType){var V=r.getType(s,v.vizType);var h=O.get(["sap.app","type"],V||{});if(V&&h!=="chipVizType"){v._instantiationData={platform:"CDM",vizType:V};}else{var o=r.getChipConfigFromVizReference(v);v._instantiationData={platform:"ABAP",chip:d(o),simplifiedChipFormat:true};v.cdmVizType=v.vizType;v.vizType=o.chipId;}}else if(v.indicatorDataSource&&v.indicatorDataSource.path){v.vizType="sap.ushell.DynamicAppLauncher";}else{v.vizType="sap.ushell.StaticAppLauncher";}};
g.getBookmarkVizTypeIds=function(B){var I=["sap.ushell.StaticAppLauncher","sap.ushell.DynamicAppLauncher"];var s=B.vizType;if(s&&!I.includes(s)){I.push(s);}var o=r.getChipConfigFromVizReference(B);var h=o&&o.chipId;if(h&&!I.includes(h)){I.push(h);}return I;};
return g;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations',["sap/ushell/utils","sap/base/util/ObjectPath"],function(u,O){"use strict";var r={};
r.getMap=function(s){return s.visualizations;};
r.get=function(s,i){return O.get(["visualizations",i],s);};
r.getTypeMap=function(s){return s.vizTypes;};
r.getType=function(s,i){return O.get(["vizTypes",i],s);};
r.getTypeId=function(v){return O.get("vizType",v||{});};
r.isStandardVizType=function(v){return v==="sap.ushell.StaticAppLauncher"||v==="sap.ushell.DynamicAppLauncher";};
r.getSupportedDisplayFormats=function(v){return O.get(["sap.flp","vizOptions","displayFormats","supported"],v||{});};
r.getDefaultDisplayFormat=function(v){return O.get(["sap.flp","vizOptions","displayFormats","default"],v||{});};
r.getTileSize=function(v){return O.get(["sap.flp","tileSize"],v||{});};
r.getConfig=function(v){return O.get("vizConfig",v||{});};
r.getTarget=function(v){var V=this.getConfig(v);return O.get(["sap.flp","target"],V||{});};
r.getAppId=function(v){var t=this.getTarget(v);return O.get("appId",t||{});};
r.getInboundId=function(v){var t=this.getTarget(v);return O.get("inboundId",t||{});};
r.getOutbound=function(v,i){var o={semanticObject:i.semanticObject,action:i.action,parameters:this.getTarget(v).parameters||{}};o.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(v)}};return o;};
r.startsExternalUrl=function(v){var t=this.getTarget(v);return t&&t.type==="URL";};
r.getAppDescriptor=function(s,i){return O.get(["applications",i],s);};
r.getKeywords=function(c){var C=u.clone(c);C.splice(2,1);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.tags.keywords","sap|app.tags.keywords"]);};
r.getTitle=function(c){return u.getNestedObjectProperty(c,["title","sap|app.title","title","sap|app.title"]);};
r.getSubTitle=function(c){return u.getNestedObjectProperty(c,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"]);};
r.getIcon=function(c){return u.getNestedObjectProperty(c,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"]);};
r.getNumberUnit=function(c){var C=u.clone(c);C.splice(2,2);return u.getNestedObjectProperty(C,["numberUnit","sap|flp.numberUnit"]);};
r.getInfo=function(c){return u.getNestedObjectProperty(c,["info","sap|app.info","info","sap|app.info"]);};
r.getShortTitle=function(c){var C=u.clone(c);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"]);};
r.getInstantiationData=function(v){return O.get(["vizConfig","sap.flp","_instantiationData"],v);};
r.getIndicatorDataSource=function(v){return O.get(["vizConfig","sap.flp","indicatorDataSource"],v);};
r.getDataSource=function(c,d){var C=u.clone(c);C.splice(2,1);C.splice(0,1);var D=u.getNestedObjectProperty(C,["sap|app.dataSources","sap|app.dataSources"])||{};return D[d];};
r.getChipConfigFromVizReference=function(v){return O.get(["vizConfig","sap.flp","chipConfig"],v);};
return r;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/utilsCdm',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/deepExtend","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/base/util/merge","sap/base/util/deepEqual","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/utils/UrlParsing","sap/base/Log"],function(u,r,q,d,i,O,m,a,b,c,L){"use strict";var e={};
e.getMember=function(o,A){return u.getMember(o,A);};
e.getNestedObjectProperty=function(o,A,D){return u.getNestedObjectProperty(o,A,D);};
e.mapOne=function(k,s,A,v,V,S){var I=false;s=d({},s);A=d({},A);v=d({},v);V=d({},V);v=v||{};V=V||{};var o={};o.semanticObject=this.getMember(s,"semanticObject");o.action=this.getMember(s,"action");var f=r.getConfig(v);o.title=r.getTitle([undefined,f,s,A]);o.info=r.getInfo([undefined,f,s,A]);o.icon=r.getIcon([undefined,f,s,A]);o.subTitle=r.getSubTitle([undefined,f,s,A]);o.shortTitle=r.getShortTitle([undefined,f,s,A]);o.keywords=r.getKeywords([undefined,f,s,A]);o.numberUnit=r.getNumberUnit([undefined,f,undefined,undefined]);o.deviceTypes=this.getMember(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(this.getMember(s,"deviceTypes")||{},M)){o.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(o.deviceTypes,M)){o.deviceTypes[M]=true;}o.deviceTypes[M]=!!o.deviceTypes[M];}.bind(this));o.signature=this.getMember(s,"signature")||{};o.signature.parameters=this.getMember(o,"signature.parameters")||{};o.signature.additionalParameters=this.getMember(s,"signature.additionalParameters")||"allowed";var g=this.getMember(A,"sap|platform|runtime");o.resolutionResult=q.extend(true,{},g);if(g){o.resolutionResult["sap.platform.runtime"]=q.extend(true,{},g);}if(this.getMember(A,"sap|ui.technology")==="GUI"){o.resolutionResult["sap.gui"]=this.getMember(A,"sap|gui");}if(this.getMember(A,"sap|ui.technology")==="WDA"){o.resolutionResult["sap.wda"]=this.getMember(A,"sap|wda");}if(this.getMember(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){o.resolutionResult["sap.platform.runtime"]=o.resolutionResult["sap.platform.runtime"]||{};o.resolutionResult.url=A["sap.url"].uri;o.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(g&&g.uri){o.resolutionResult["sap.platform.runtime"].url=g.uri;o.resolutionResult.url=g.uri;}}if(!o.resolutionResult["sap.ui"]){o.resolutionResult["sap.ui"]={};}o.resolutionResult["sap.ui"].technology=this.getMember(A,"sap|ui.technology");o.resolutionResult.applicationType=this._formatApplicationType(o.resolutionResult,A);o.resolutionResult.systemAlias=o.resolutionResult.systemAlias||this.getMember(s,"systemAlias");o.resolutionResult.systemAliasSemantics="apply";o.resolutionResult.text=o.title;o.resolutionResult.appId=this.getMember(A,"sap|app.id");var t,h;var j=this.getMember(v,"vizConfig.sap|flp.indicatorDataSource");var T={};if(!i(V)){var l=this.getMember(V,"sap|app.type");if(l==="card"){I=true;T=m({},V,v.vizConfig);}else{T.componentName=this.getMember(V,"sap|ui5.componentName");var C=this.getMember(V,"sap|platform|runtime.componentProperties");if(C){T.componentProperties=C;}if(this.getMember(V,"sap|platform|runtime.includeManifest")){T.componentProperties=T.componentProperties||{};T.componentProperties.manifest=m({},V,v.vizConfig);delete T.componentProperties.manifest["sap.platform.runtime"];}}}if(this.getMember(A,"sap|app.type")==="plugin"||this.getMember(A,"sap|flp.type")==="plugin"){return undefined;}var n=this.getNestedObjectProperty([f,A,V],"sap|flp.tileSize");var p=this.getNestedObjectProperty([f,A,V],"sap|app.description");if(this.getMember(A,"sap|ui.technology")==="GUI"&&this.getMember(A,"sap|gui.transaction")){t=this.getMember(A,"sap|gui.transaction");}if(this.getMember(A,"sap|ui.technology")==="WDA"&&this.getMember(A,"sap|wda.applicationId")){t=this.getMember(A,"sap|wda.applicationId");}var D=this.getNestedObjectProperty([f,A,V],"sap|app.dataSources");if(this.getMember(A,"sap|app.id")){h=this.getMember(A,"sap|app.id");}var w=b.getContentProviderId(A)||"";o.tileResolutionResult={appId:h,title:o.title,subTitle:o.subTitle,icon:o.icon,size:n,info:o.info,keywords:o.keywords,tileComponentLoadInfo:T,indicatorDataSource:j,dataSources:D,description:p,runtimeInformation:g,technicalInformation:t,deviceTypes:o.deviceTypes,isCard:I,contentProviderId:w,numberUnit:o.numberUnit};var x=this.getMember(A,"sap|integration.urlTemplateId");var y=this.getTemplatePayloadFromSite(x,S);if(y){o.templateContext={payload:y,site:S,siteAppSection:A};}return o;};
e.getTemplatePayloadFromSite=function(t,s){if(!s||typeof t!=="string"){return null;}var T=t.replace(/[.]/g,"|");return this.getMember(s.urlTemplates,T+".payload");};
e._formatApplicationType=function(R,A){var s=R.applicationType;if(s){return s;}var C=this.getMember(A,"sap|platform|runtime.componentProperties.self.name")||this.getMember(A,"sap|ui5.componentName");if(this.getMember(A,"sap|flp.appType")==="UI5"||this.getMember(A,"sap|ui.technology")==="UI5"){R.applicationType="SAPUI5";R.additionalInformation="SAPUI5.Component="+C;R.url=this.getMember(A,"sap|platform|runtime.componentProperties.url");R.applicationDependencies=this.getMember(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(this.getMember(A,"sap|ui.technology")==="GUI"){R.applicationType="TR";R["sap.gui"]=this.getMember(A,"sap|gui");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"TR";}if(this.getMember(A,"sap|ui.technology")==="WDA"){R.applicationType="WDA";R["sap.wda"]=this.getMember(A,"sap|wda");R.systemAlias=this.getMember(A,"sap|app.destination.name");return"WDA";}if(this.getMember(A,"sap|ui.technology")==="URL"){R.applicationType="URL";R.systemAlias=this.getMember(A,"sap|app.destination.name");}return"URL";};
e.formatSite=function(s){var t=this;if(!s){return[];}var I=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var f=this.getMember(o,"sap|app.crossNavigation.inbounds");if(f){var l=Object.keys(f).sort();l.forEach(function(h){var j=f[h];var R=t.mapOne(h,j,o,undefined,undefined,s);if(R){R.contentProviderId=b.getContentProviderId(o)||"";I.push(R);}});}}catch(g){L.error("Error in application "+A+": "+g,g.stack);}}.bind(this));}catch(E){L.error(E);L.error(E.stack);return[];}return I;};
e.toHashFromInbound=function(I){var s,p,C;s={target:{semanticObject:I.semanticObject,action:I.action},params:{}};p=O.get("signature.parameters",I)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=c.constructShellHash(s);if(!C){return undefined;}return C;};
e.toHashFromOutbound=function(o){var s,p,C;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=c.constructShellHash(s);if(!C){return undefined;}return C;};
e.toHashFromVizData=function(v,A){var V,t;if(!v.target){return undefined;}V=v.target;if(V.type==="URL"){return V.url;}var s=V.appId;var I=V.inboundId;if(s&&I){var o=b.getInboundTarget(A,s,I);t={};if(o){t.semanticObject=o.semanticObject;t.action=o.action;t.parameters=V.parameters||{};t.parameters["sap-ui-app-id-hint"]={value:{value:s,format:"plain"}};t.appSpecificRoute=V.appSpecificRoute||"";}}else if(V.semanticObject&&V.action){t=V;}return e.toHashFromTarget(t);};
e.toHashFromTarget=function(t){try{var p={};var R=O.get("parameters",t)||{};Object.keys(R).forEach(function(k){p[k]=Array.isArray(R[k].value.value)?R[k].value.value:[R[k].value.value];});var h={target:{semanticObject:t.semanticObject,action:t.action},params:p,appSpecificRoute:t.appSpecificRoute};return"#"+c.constructShellHash(h);}catch(E){return undefined;}};
e.toTargetFromHash=function(h){var t=c.parseShellHash(h);if(t!==undefined){var p=t.params||{};if(Object.keys(p).length>0){t.parameters=[];Object.keys(p).forEach(function(k){var v=Array.isArray(p[k])?p[k]:[p[k]];v.forEach(function(V){var P={name:k,value:V};t.parameters.push(P);});});}delete t.params;}else{t={type:"URL",url:h};}return t;};
e.isSameTarget=function(t,T){var R;if(t.type!==T.type){return false;}if(t.type==="URL"){R=t.url===T.url;}else{R=t.semanticObject===T.semanticObject&&t.action===T.action&&t.appSpecificRoute===T.appSpecificRoute&&a(t.parameters,T.parameters);}return R;};
return e;},true);
sap.ui.predefine('sap/ushell/adapters/cflp/UserDefaultParameterPersistenceAdapter',["sap/ushell/utils/HttpClient","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath"],function(H,q,L,O){"use strict";var U=function(s,p,c){this.sBaseServicePath="/sap/opu/odata/UI2/INTEROP/";this.oConfig={};if(c&&c.userBaseServicePath!==undefined){this.oConfig.sBaseServicePath=c.userBaseServicePath;}else{this.oConfig.sBaseServicePath=this.sBaseServicePath;}this.oConfig.oHttpClientConfig={"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient(),"sap-statistics":true,headers:{Accept:"application/json"},data:{}};this._mSystems={};};
U.prototype.loadParameterValue=function(p,s){var d=new q.Deferred();var i=this._isValidParameterName(p);if(i){this._getUserDefaultParameterContainer(s).done(function(c){var I=c.find(function(I){return I.id===p;});if(I!==undefined){var r=JSON.parse(I.value);d.resolve(r);}else{d.reject("Parameter does not exist: "+p);}}).fail(function(r){d.reject(r);});}else{d.reject("Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}return d.promise();};
U.prototype._createRequest=function(c){return{data:{PersContainerItems:c,appName:"",category:"P",component:"",id:"sap.ushell.UserDefaultParameter"},headers:{"content-type":"application/json",accept:"application/json"}};};
U.prototype.saveParameterValue=function(p,v,s){var d=new q.Deferred();var i=this._isValidParameterName(p);if(i){var h=this._getXHttpWrapper(s);this._getUserDefaultParameterContainer(s).done(function(c){var I=c.findIndex(function(e){return e.id===p;});if(I>-1){c[I].value=JSON.stringify(v);}else{var u={category:"I",containerCategory:"P",containerId:"sap.ushell.UserDefaultParameter",id:p,value:JSON.stringify(v)};c.push(u);}h.post("PersContainers",this._createRequest(c)).then(d.resolve).catch(d.reject);}.bind(this)).fail(d.reject);}else{d.reject("Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}return d.promise();};
U.prototype.deleteParameter=function(p,s){var d=new q.Deferred();var i=this._isValidParameterName(p);if(i){var h=this._getXHttpWrapper(s);this._getUserDefaultParameterContainer(s).done(function(c){var I=c.findIndex(function(e){return e.id===p;});if(I>-1){c.splice(I,1);h.post("PersContainers",this._createRequest(c)).then(d.resolve).catch(d.reject);}else{d.resolve();}}.bind(this)).fail(d.reject);}else{d.reject("Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}return d.promise();};
U.prototype.getStoredParameterNames=function(s){var d=new q.Deferred();this._getUserDefaultParameterContainer(s).done(function(c){var k=c.map(function(i){return i.id;});k.sort();d.resolve(k);}).fail(function(e){d.reject(e);});return d.promise();};
U.prototype._getXHttpWrapper=function(s){if(!this._mSystems[s.id]){this._mSystems[s.id]={};}if(!this._mSystems[s.id].oHttpWrapper){var b=s.getFullyQualifiedXhrUrl(this.oConfig.sBaseServicePath);this._mSystems[s.id].oHttpWrapper=new H(b,this.oConfig.oHttpClientConfig);}return this._mSystems[s.id].oHttpWrapper;};
U.prototype._isValidParameterName=function(p){var i=!!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p));if(!i){L.error("Illegal Parameter Key. Parameter must be less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}return i;};
U.prototype._getUserDefaultParameterContainer=function(s){var d=new q.Deferred();var h;try{h=this._getXHttpWrapper(s);}catch(e){d.reject(e.message);return d.promise();}var S=this._mSystems[s.id];if(!S.oContainerCache){S.oContainerCache=d;var r=h.get("PersContainers(category='P',id='sap.ushell.UserDefaultParameter')?$expand=PersContainerItems");r.then(function(R){S.bDataReceived=true;var o=R.responseText?JSON.parse(R.responseText):{};var c=O.get("d.PersContainerItems.results",o)||[];S.oContainerCache.resolve(c);}).catch(function(R){if(R.status===404){S.oContainerCache.resolve([]);}else{var E="Server error: "+R.statusText;S.oContainerCache.reject(E);}});}return S.oContainerCache.promise();};
return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/AppStateAdapter',["sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ui/thirdparty/jquery","sap/base/Log"],function(A,q,L){"use strict";var a=function(s,p,c){this._oConfig=c&&c.config;};
a.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization");};
a.prototype.saveAppState=function(k,s,v,b,c,p,P){var d=new q.Deferred();this._getPersonalizationService().then(function(o){o.createEmptyContainer(k,{keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(C){C.setItemValue("appStateData",v);C.setItemValue("persistencyMethod",p);C.setItemValue("persistencySettings",P);C.setItemValue("createdBy",sap.ushell.Container&&sap.ushell.Container.getUser&&sap.ushell.Container.getUser().getId());C.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);L.error(m);});}).fail(function(m){L.error(m);d.reject(m);});});return d.promise();};
a.prototype.loadAppState=function(k){var d=new q.Deferred(),t=this;this._getPersonalizationService().then(function(p){p.getContainer(k,{keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false}).done(function(c){var v=c.getItemValue("appStateData"),P=c.getItemValue("persistencyMethod"),o=c.getItemValue("persistencySettings"),C=c.getItemValue("createdBy");if(P===undefined){d.resolve(k,v);}else if(P===A.PersonalState){if(t.getCurrentUserForTesting()===""||t.getCurrentUserForTesting()===C){d.resolve(k,v,P,o);}else{d.reject("Unauthorized User ID");}}}).fail(function(m){L.error(m);d.reject(m);});});return d.promise();};
a.prototype.deleteAppState=function(k){var d=new q.Deferred();this._getPersonalizationService().then(function(p){p.delContainer(k).done(function(){d.resolve();}).fail(function(m){L.error(m);d.reject(m);});});return d.promise();};
a.prototype.getCurrentUserForTesting=function(){return"";};
a.prototype.getSupportedPersistencyMethods=function(){return[];};
return a;},true);
sap.ui.predefine('sap/ushell/adapters/local/ClientSideTargetResolutionAdapter',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var C=function(s,p,c){this._oConfig=c&&c.config;this._aInbounds=[];if(!this._oConfig){this._oSystemAliases={};L.warning("No configuration supplied!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}else{if(this._oConfig.inbounds){this._aInbounds=this._transformInboundsObjectToInboundsArray(this._oConfig.inbounds);}if(this._oConfig.applications){Array.prototype.push.apply(this._aInbounds,this._transformApplicationsToInbounds(this._oConfig.applications));}if(this._aInbounds.length===0){L.warning("Adapter got no inbounds via configuration!","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}this._oSystemAliases=this._oConfig.systemAliases||{};L.debug("Adapter got no system aliases via configuration","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");}var o=sap.ushell.Container,P="";if(o){P=o.getLogonSystem().getProductName()||"";}this._oLocalSystemAlias={http:{host:"",port:0,pathPrefix:"/sap/bc/"},https:{host:"",port:0,pathPrefix:"/sap/bc/"},rfc:{systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",label:"local",client:"",language:"",properties:{productName:P}};};
C.prototype.getInbounds=function(){var d=new q.Deferred(),t=this;setTimeout(function(){d.resolve(t._aInbounds);},0);return d.promise();};
C.prototype.resolveSystemAlias=function(s){var d=new q.Deferred();setTimeout(function(){if(this._oSystemAliases.hasOwnProperty(s)){d.resolve(this._oSystemAliases[s]);}else if(s===""){d.resolve(this._oLocalSystemAlias);}else{d.reject("No system alias value available");}}.bind(this),0);return d.promise();};
C.prototype._transformApplicationsToInbounds=function(a){var i,I=[],A,o,b;function c(s,u){if(s==="NWBC"&&u){if(u.indexOf("/~canvas;window=app/wda")>=0){return"WDA";}return"TR";}return s;}for(i in a){if(a.hasOwnProperty(i)&&i.indexOf("_")!==0){o={};if(i.indexOf("-")>-1){b=i.split("-",2);o.semanticObject=b[0];o.action=b[1];}else if(i===""){o.semanticObject="";o.action="";}else{L.warning("Excluded syntactically incorrect intent '"+i+"' from inbounds array","","sap.ushell.adapters.local.ClientSideTargetResolutionAdapter");continue;}A=a[i];o.title=A.description||"";o.signature={parameters:{}};o.signature.additionalParameters="allowed";o.resolutionResult={};o.resolutionResult.applicationType=c(A.applicationType,A.url);o.resolutionResult.additionalInformation=A.additionalInformation||"";if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.applicationType="SAPUI5";o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(A.applicationDependencies){o.resolutionResult.applicationDependencies=A.applicationDependencies;}else{o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}}o.resolutionResult.url=A.url;I.push(o);}}return I;};
C.prototype._transformInboundsObjectToInboundsArray=function(i){var I,a=[],o;for(I in i){if(i.hasOwnProperty(I)){o=i[I];if(o.resolutionResult.additionalInformation&&o.resolutionResult.additionalInformation.indexOf("SAPUI5.Component=")!==-1){o.resolutionResult.ui5ComponentName=o.resolutionResult.additionalInformation.split("SAPUI5.Component=",2)[1];if(!o.resolutionResult.hasOwnProperty("applicationDependencies")){o.resolutionResult.applicationDependencies={self:{name:o.resolutionResult.ui5ComponentName},asyncHints:{libs:[{name:"sap.ui.core"},{name:"sap.ui.unified"}]}};}}a.push(i[I]);}}return a;};
return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/ContainerAdapter',["sap/ushell/User","sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/System","sap/base/Log"],function(U,u,O,q,S,L){"use strict";var C=function(s,p,a){var A,o,b,k;A=O.create("config",a);o={id:"DEFAULT_USER",firstName:"Default",lastName:"User",fullName:"Default User",accessibility:false,isJamActive:false,language:sap.ui.getCore().getConfiguration().getLanguage()||"en",bootTheme:{theme:"sap_fiori_3",root:""},themeRoot:"/sap/public/bc/themes/",setAccessibilityPermitted:true,setThemePermitted:true,isLanguagePersonalized:false,setContentDensityPermitted:true,trackUsageAnalytics:null};for(k in A){if(A.hasOwnProperty(k)){o[k]=A[k];}}s=new S({alias:s.getAlias(),platform:s.getPlatform(),productName:O.get("systemProperties.productName",A),productVersion:O.get("systemProperties.productVersion",A),systemName:O.get("systemProperties.systemName",A),systemRole:O.get("systemProperties.systemRole",A),tenantRole:O.get("systemProperties.tenantRole",A)});this.getSystem=function(){return s;};this.getUser=function(){return b;};this.sessionKeepAlive=function(){console.warn("Demo container adapter sessionKeepAlive called");};this.load=function(){var c,d,e,D,f=new q.Deferred();if(A&&typeof A.setUserCallback==="string"){D=new q.Deferred();c=A.setUserCallback.split(".");d=c.pop();if(c.length===0){e=window;}else{e=O.get(c.join("."));}if(e&&typeof e[d]==="function"){e[d](D);}else{throw new u.Error("ContainerAdapter local platform: Cannot execute setUserCallback - "+A.setUserCallback);}D.done(function(g){["id","firstName","lastName","fullName"].forEach(function(v){if(g[v]&&typeof A.setUserCallback!=="function"){o[v]=g[v];}});b=new U(o);f.resolve();});}else{b=new U(o);f.resolve();}return f.promise();};this.logout=function(l){L.info("Demo system logged out: "+s.getAlias(),null,"sap.ushell.adapters.local.ContainerAdapter");u.reload();return(new q.Deferred()).resolve().promise();};};return C;},true);
sap.ui.predefine('sap/ushell/adapters/local/LaunchPageAdapter',["sap/ushell/resources","sap/ui/model/resource/ResourceModel","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/m/NumericContent","sap/m/library","sap/ui/core/ComponentContainer","sap/ui/thirdparty/datajs","sap/ui/core/library","sap/ushell/library","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/base/Log","sap/ushell/utils/WindowUtils","sap/base/util/ObjectPath"],function(r,R,G,I,T,N,m,C,O,c,u,q,a,L,W,b){"use strict";var V=c.mvc.ViewType;var d=m.GenericTileMode;var A=u.AppType;
function _(t){var p={};p[t.namespace.replace(/\./g,"/")]=t.path||".";sap.ui.loader.config({paths:p});}
var f=function(U,p,o){var g=q.extend(true,[],o.config.groups),h=o.config.catalogs||[],F=0,j=10,M=10,k=10,l,s,t,v;var w={};for(t=0;t<g.length;t++){if(g[t].isDefaultGroup===true){v=g[t];break;}}if(!v&&g.length>0){v=g[0];v.isDefaultGroup=true;}this.translationBundle=r.i18n;this.TileType={Tile:"tile",Link:"link",Card:"card"};if(!l&&o.config.pathToLocalizedContentResources){l=new R({bundleUrl:o.config.pathToLocalizedContentResources,bundleLocale:sap.ui.getCore().getConfiguration().getLanguage()});s=l.getResourceBundle();}function x(K){if(s){return s.getText(K);}return K;}q.each(h,function(i,e){if(s){e.title=x(e.title);}q.each(e.tiles,function(i,n){n.getTitle=function(){return n.title;};n.getChip=function(){return{getBaseChipId:function(){return n.chipId;}};};});});q.each(g,function(i,e){if(s){e.title=x(e.title);}q.each(e.tiles,function(i,n){J(n,true);});});function y(){return(100*Math.random())<F;}function z(){return(100*Math.random())<j;}function B(){return M+k*Math.random();}function D(e,i){var n;for(n=0;n<e.tiles.length;n=n+1){if(i.id===e.tiles[n].id){return n;}}return-1;}function E(e,i){var n;for(n=0;n<e.length;n=n+1){if(i.id===e[n].id){return n;}}return-1;}function H(e){var i=q.Deferred();window.setTimeout(function(){i.resolve(e);},B());return i.promise();}function J(e,n){if(e.tileType!=="sap.ushell.ui.tile.DynamicTile"||!e.properties||!e.properties.serviceUrl){return;}if(e.intervalTimer){window.clearInterval(e.intervalTimer);e.intervalTimer=undefined;}if(n){var i=e.serviceRefreshInterval;if(i){i=i*1000;}else{i=10000;}e.intervalTimer=window.setInterval(function(){O.read(e.properties.serviceUrl+"?id="+e.id+"&t="+new Date().getTime(),function(){L.debug("Dynamic tile service call succeed for tile "+e.id);},function(K){L.debug("Dynamic tile service call failed for tile "+e.id+", error message:"+K);});},i);}}this.getGroups=function(){var e=q.Deferred();window.setTimeout(function(){e.resolve(g.slice(0));},B());return e.promise();};this.getDefaultGroup=function(){var e=new q.Deferred();e.resolve(v);return e.promise();};this.addGroup=function(e){var i=q.Deferred(),n=y(),K=this;window.setTimeout(function(){if(!n){var P={id:"group_"+g.length,title:e,tiles:[]};g.push(P);i.resolve(P);}else{K.getGroups().done(function(Q){i.reject(Q);}).fail(function(){i.reject();});}},B());return i.promise();};this.getGroupTitle=function(e){return e.title;};this.setGroupTitle=function(e,n){var i=q.Deferred(),K=y();window.setTimeout(function(){if(!K){e.title=n;i.resolve();}else{H(e).done(function(P){i.reject(P.title);}).fail(function(){i.reject();});}},B());return i.promise();};this.getGroupId=function(e){return e.id;};this.hideGroups=function(e){if(e&&g){for(var i=0;i<g.length;i++){if(e.indexOf(g[i].id)!==-1){g[i].isVisible=false;}else{g[i].isVisible=true;}}}return q.Deferred().resolve();};this.isGroupVisible=function(e){return e&&(e.isVisible===undefined?true:e.isVisible);};this.moveGroup=function(e,n){var i=q.Deferred(),K=y(),P=this;window.setTimeout(function(){if(!K){g.splice(n,0,g.splice(E(g,e),1)[0]);i.resolve();}else{P.getGroups().done(function(Q){i.reject(Q);}).fail(function(){i.reject();});}},B());return i.promise();};this.removeGroup=function(e){var i=q.Deferred(),n=y(),K=this;window.setTimeout(function(){if(!n){g.splice(E(g,e),1);q.each(e.tiles,function(P,Q){J(Q,false);});i.resolve();}else{K.getGroups().done(function(P){i.reject(P);}).fail(function(){i.reject();});}},B());return i.promise();};this.resetGroup=function(e){var i=q.Deferred(),n=y(),K=this;window.setTimeout(function(){if(!n){q.each(e.tiles,function(P,Q){J(Q,false);});e=q.extend(true,{},o.config.groups[E(o.config.groups,e)]);g.splice(E(g,e),1,e);q.each(e.tiles,function(P,Q){J(Q,true);});i.resolve(e);}else{K.getGroups().done(function(P){i.reject(P);}).fail(function(){i.reject();});}},B());return i.promise();};this.isGroupRemovable=function(e){return e&&!e.isPreset;};this.isGroupLocked=function(e){return e.isGroupLocked;};this.isGroupFeatured=function(e){return e.isFeatured;};this.getGroupTiles=function(e){return e.tiles;};this.getLinkTiles=function(e){return e.links;};this.getTileTitle=function(e){return e.title;};this.getTileType=function(e){if(e.isLink){return this.TileType.Link;}if(e.isCard){return this.TileType.Card;}return this.TileType.Tile;};this.getTileId=function(e){return e.id;};this.getTileSize=function(e){return e.size;};this.getTileTarget=function(e){var i;if(e.properties){i=e.properties.href||e.properties.targetURL;}return e.target_url||i||"";};this.isTileIntentSupported=function(e){if(e&&e.formFactor){var i=e.formFactor;var S=sap.ui.Device.system;var n;if(S.desktop){n="Desktop";}else if(S.tablet){n="Tablet";}else if(S.phone){n="Phone";}if(i.indexOf(n)===-1){return false;}}return true;};this.isLinkPersonalizationSupported=function(e){if(e){return e.isLinkPersonalizationSupported;}return true;};this.getTileView=function(e){var i=q.Deferred(),n=y(),K=this;if(z()){window.setTimeout(function(){if(!n){K._getTileView(e).done(function(P){i.resolve(P);});}else{i.reject();}},B());}else if(!n){K._getTileView(e).done(function(P){i.resolve(P);});}else{i.reject();}return i.promise();};this._getTileView=function(i){var n="unknown error",K,P,Q=this.getTileType(i)==="link",S=q.Deferred(),X=this;this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){K=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{K=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}S.resolve(K);return S.promise();}else if(i.tileType){P=Q?"Link":i.tileType;if(P){try{this._createTileInstance(i,P).done(function(Y){K=Y;X._handleTilePress(K);X._applyDynamicTileIfoState(K);S.resolve(K);});return S.promise();}catch(e){S.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return S.promise();}}else{n="TileType: "+i.tileType+" not found!";}}else{n="No TileType defined!";}S.resolve(new G({header:n,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return S.promise();};this._getCatalogTileViewAsync=function(i){var n=new q.Deferred(),K=this,P,Q="unknown error",S,X,Y=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){S=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{S=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}n.resolve(S);return n.promise();}else if(i.tileType){X=Y?"Link":i.tileType;if(X){try{P=this._createCatalogTileInstanceAsync(i,X);P.done(function(Z){K._handleTilePress(Z);K._applyDynamicTileIfoState(Z);n.resolve(Z);});}catch(e){n.resolve(new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)}));}}else{Q="TileType: "+i.tileType+" not found!";}return n.promise();}Q="No TileType defined!";n.resolve(new G({header:Q,frameType:this._parseTileSizeToGenericTileFormat(i.size)}));return n.promise();};this._getCatalogTileView=function(i){var n="unknown error",K,P,Q=this.getTileType(i)==="link";this._translateTileProperties(i);if(i.namespace&&i.path&&i.moduleType){_(i);if(i.moduleType==="UIComponent"){K=new C({component:sap.ui.getCore().createComponent({componentData:{properties:i.properties},name:i.moduleName}),height:"100%",width:"100%"});}else{K=sap.ui.view({viewName:i.moduleName,type:V[i.moduleType],viewData:{properties:i.properties},height:"100%"});}return K;}else if(i.tileType){P=Q?"Link":i.tileType;if(P){try{K=this._createCatalogTileInstance(i,P);this._handleTilePress(K);this._applyDynamicTileIfoState(K);return K;}catch(e){return new G({header:e&&(e.name+": "+e.message)||this.translationBundle.getText("failedTileCreationMsg"),frameType:this._parseTileSizeToGenericTileFormat(i.size)});}}else{n="TileType: "+i.tileType+" not found!";}}else{n="No TileType defined!";}return new G({header:n,frameType:this._parseTileSizeToGenericTileFormat(i.size)});};this._createTileInstance=function(e,i){var n,K=q.Deferred(),P=this._getImageContent({src:e.properties.icon});P.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:this._genericTilePressHandler.bind(this,e)});w[e.id]=n;K.resolve(n);break;case"sap.ushell.ui.tile.StaticTile":n=new G({mode:e.mode||(e.properties.icon?d.ContentMode:d.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:P}),press:this._genericTilePressHandler.bind(this,e)});w[e.id]=n;K.resolve(n);break;case"Link":n=new G({mode:d.LineMode,subheader:e.properties.subtitle,header:e.properties.title,url:W.getLeanURL(e.properties.targetURL,e.properties.href),press:function(S){this._genericTilePressHandler(e,S);}.bind(this)});w[e.id]=n;K.resolve(n);break;default:var Q=e.tileType.replace(/\./g,"/");sap.ui.require([Q],function(){var S=b.get(e.tileType);n=new S(e.properties||{});w[e.id]=n;K.resolve(n);});}return K.promise();};this.getCardManifest=function(e){var i=JSON.parse(JSON.stringify(e.manifest));return i;};this._createCatalogTileInstanceAsync=function(e,i){var n=new q.Deferred(),K,P=this._getImageContent({src:e.properties.icon});P.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":K=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":K=new G({mode:e.mode||(e.properties.icon?d.ContentMode:d.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:P}),press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;case"Link":K=new G({mode:d.LineMode,subheader:e.properties.subtitle,header:e.properties.title,url:W.getLeanURL(e.properties.targetURL,e.properties.href),press:function(Q){this._genericTilePressHandler(e,Q);}.bind(this)});break;default:i=e.tileType&&e.tileType.replace(/\./g,"/");sap.ui.require([i],function(Q){K=new Q(e.properties||{});n.resolve(K);});}n.resolve(K);return n.promise();};this._createCatalogTileInstance=function(e,i){var n,K,P,Q=this._getImageContent({src:e.properties.icon});Q.addStyleClass("sapUshellFullWidth");switch(i){case"sap.ushell.ui.tile.DynamicTile":n=new G({header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,unit:e.properties.numberUnit,content:new N({scale:e.properties.numberFactor,value:e.properties.numberValue,truncateValueTo:5,indicator:e.properties.stateArrow,valueColor:this._parseTileValueColor(e.properties.numberState),icon:e.properties.icon,width:"100%"})}),press:function(S){this._genericTilePressHandler(e,S);}.bind(this)});break;case"sap.ushell.ui.tile.StaticTile":n=new G({mode:e.mode||(e.properties.icon?d.ContentMode:d.HeaderMode),header:e.properties.title,subheader:e.properties.subtitle,frameType:this._parseTileSizeToGenericTileFormat(e.size),url:W.getLeanURL(e.properties.targetURL),tileContent:new T({frameType:this._parseTileSizeToGenericTileFormat(e.size),footer:e.properties.info,content:Q}),press:function(S){this._genericTilePressHandler(e,S);}.bind(this)});break;case"Link":n=new G({mode:d.LineMode,subheader:e.properties.subtitle,header:e.properties.title,url:W.getLeanURL(e.properties.targetURL,e.properties.href),press:function(S){this._genericTilePressHandler(e,S);}.bind(this)});break;default:K=e.tileType.replace(/\./g,"/");P=sap.ui.require(K);if(!P){if(!b.get(e.tileType)){L.error("FLP: local LaunchPageAdapter. The resource is used before being loaded: "+K);sap.ui.requireSync(K);}P=b.get(e.tileType);}n=new P(e.properties||{});}return n;};this._genericTilePressHandler=function(e,i){if(i.getSource().getScope&&i.getSource().getScope()==="Display"){if(e.properties.targetURL){if(e.properties.targetURL[0]==="#"){hasher.setHash(e.properties.targetURL);}else{var n=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(n){var K={title:e.properties.title,appType:A.URL,url:e.properties.targetURL,appId:e.properties.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(K);}W.openURL(e.properties.targetURL,"_blank");}}}};this._parseTileSizeToGenericTileFormat=function(e){return e==="1x2"?"TwoByOne":"OneByOne";};this._parseTileValueColor=function(e){var i=e;switch(e){case"Positive":i="Good";break;case"Negative":i="Critical";break;}return i;};this._applyDynamicTileIfoState=function(e){var i=e.onAfterRendering;e.onAfterRendering=function(){if(i){i.apply(this,arguments);}var n=this.getModel(),K,P,Q;if(!n){return;}K=n.getProperty("/data/display_info_state");P=this.getDomRef();Q=P.getElementsByClassName("sapMTileCntFtrTxt")[0];switch(K){case"Negative":Q.classList.add("sapUshellTileFooterInfoNegative");break;case"Neutral":Q.classList.add("sapUshellTileFooterInfoNeutral");break;case"Positive":Q.classList.add("sapUshellTileFooterInfoPositive");break;case"Critical":Q.classList.add("sapUshellTileFooterInfoCritical");break;default:return;}};};this._handleTilePress=function(e){if(typeof e.attachPress==="function"){e.attachPress(function(){if(typeof e.getTargetURL==="function"){var i=e.getTargetURL();if(i){if(i[0]==="#"){hasher.setHash(i);}else{W.openURL(i,"_blank");}}}});}};this._translateTileProperties=function(e){if(this.translationBundle&&s&&!e._isTranslated){var i=e.properties,n=e.keywords;i.title=x(i.title);i.subtitle=x(i.subtitle);i.info=x(i.info);if(n){for(var K=0;K<n.length;K++){n[K]=x(n[K]);}}e._isTranslated=true;}};this.refreshTile=function(){};this.setTileVisible=function(e,n){J(e,n);};this.addTile=function(e,i){if(!i){i=v;}var n=q.Deferred(),K=y(),P=this;window.setTimeout(function(){if(!K){var Q=q.extend(true,{title:"A new tile was added",size:"1x1"},e,{id:"tile_0"+e.chipId});i.tiles.push(Q);J(Q,true);n.resolve(Q);}else{P.getGroups().done(function(S){n.reject(S);}).fail(function(){n.reject();});}},B());return n.promise();};this.removeTile=function(e,i){var n=q.Deferred(),K=y(),P=this;window.setTimeout(function(){if(!K){e.tiles.splice(D(e,i),1);J(i,false);n.resolve();}else{P.getGroups().done(function(Q){n.reject(Q);}).fail(function(){n.reject();});}},B());return n.promise();};this.moveTile=function(e,i,n,S,K,P){var Q=q.Deferred(),X=y(),Y=this;window.setTimeout(function(){if(!X){if(K===undefined){K=S;}e.isLink=P?(P===Y.TileType.Link):e.isLink;S.tiles.splice(i,1);K.tiles.splice(n,0,e);Q.resolve(e);}else{Y.getGroups().done(function(Z){Q.reject(Z);}).fail(function(){Q.reject();});}},B());return Q.promise();};this.getTile=function(){var e=q.Deferred();return e.promise();};this.getCatalogs=function(){var e=q.Deferred();h.forEach(function(i){window.setTimeout(function(){e.notify(i);},300);});window.setTimeout(function(){e.resolve(h);},1500);return e.promise();};this.isCatalogsValid=function(){return true;};this.getCatalogError=function(){return;};this.getCatalogId=function(e){return e.id;};this.getCatalogTitle=function(e){return e.title;};this.getCatalogTiles=function(e){var i=q.Deferred();window.setTimeout(function(){i.resolve(e.tiles);},B());return i.promise();};this.getCatalogTileId=function(e){if(e.chipId){return e.chipId;}return"UnknownCatalogTileId";};this.getCatalogTileTitle=function(e){return e.title;};this.getCatalogTileSize=function(e){return e.size;};this.getCatalogTileViewControl=function(e){return this._getCatalogTileViewAsync(e);};this.getCatalogTileView=function(e){return this._getCatalogTileView(e);};this.getCatalogTileTargetURL=function(e){return(e.properties&&e.properties.targetURL)||null;};this.getCatalogTilePreviewTitle=function(e){return(e.properties&&e.properties.title)||null;};this.getCatalogTilePreviewInfo=function(e){return(e.properties&&e.properties.info)||null;};this.getCatalogTilePreviewIndicatorDataSource=function(e){var i;if(e.properties&&e.properties.serviceUrl){i={path:e.properties.serviceUrl,refresh:e.properties.serviceRefreshInterval};}return i;};this.getCatalogTilePreviewSubtitle=function(e){return(e.properties&&e.properties.subtitle)||null;};this.getCatalogTilePreviewIcon=function(e){return(e.properties&&e.properties.icon)||null;};this.getCatalogTileKeywords=function(e){return q.merge([],q.grep(q.merge([e.title,e.properties&&e.properties.subtitle,e.properties&&e.properties.info],(e&&e.keywords)||[]),function(n){return n!==""&&n;}));};this.getCatalogTileTags=function(e){return(e&&e.tags)||[];};this.addBookmark=function(P,e){var i=e||v,n=q.Deferred(),K=y(),Q=this,S=P.title,X=P.subtitle,Y=P.info,Z=P.url,$=this.isLinkPersonalizationSupported();window.setTimeout(function(){if(!K){var a1={title:S,size:"1x1",chipId:"tile_0"+i.tiles.length,tileType:"sap.ushell.ui.tile.StaticTile",id:"tile_0"+i.tiles.length,isLinkPersonalizationSupported:$,keywords:[],properties:{icon:"sap-icon://time-entry-request",info:Y,subtitle:X,title:S,targetURL:Z}};i.tiles.push(a1);J(a1,true);n.resolve(a1);}else{Q.getGroups().done(function(b1){n.reject(b1);}).fail(function(){n.reject();});}},B());return n.promise();};this.updateBookmarks=function(e,P){var i=new q.Deferred(),n=0,K=this.getGroups();K.done(function(Q){Q.forEach(function(S){S.tiles.forEach(function(X){if(X.properties&&X.properties.targetURL===e){for(var Y in P){if(P.hasOwnProperty(Y)){X.properties[Y]=P[Y];}}var Z=w[X.id];if(Z!==undefined){Z.setHeader(X.properties.title);Z.setSubheader(X.properties.subtitle);}n++;}});});i.resolve(n);});K.fail(function(){i.reject();});return i.promise();};this.deleteBookmarks=function(e){var i=q.Deferred();var n=0;var K,P,Q,S;for(Q=0;Q<g.length;Q++){K=g[Q];for(S=K.tiles.length-1;S>=0;S--){P=K.tiles[S];if(P.properties.targetURL===e){K.tiles.splice(S,1);n++;}}}i.resolve(n);return i.promise();};this.countBookmarks=function(e){var i=q.Deferred();var n=0;var K,P,Q,S;for(Q=0;Q<g.length;Q++){K=g[Q];for(S=0;S<K.tiles.length;S++){P=K.tiles[S];if(P.properties.targetURL===e){n++;}}}i.resolve(n);return i.promise();};this._getImageContent=function(e){return new I(e);};this.onCatalogTileAdded=function(){};this.getTileActions=function(e){return(e&&e.actions)||null;};f.prototype._getCatalogTileIndex=function(){var e={};return Promise.resolve(e);};this.getCatalogTileNumberUnit=function(e){return(e.properties?e.properties.numberUnit:undefined);};};return f;},true);
sap.ui.predefine('sap/ushell/adapters/local/MenuAdapter',["sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/jquery"],function(O,L,q){"use strict";var M=function(s,p,a){this._oAdapterConfig=O.get("config",a);};
M.prototype.isMenuEnabled=function(){return Promise.resolve(!!this._oAdapterConfig.enabled);};
M.prototype.getMenuEntries=function(){var m=this._oAdapterConfig.menuData;return new Promise(function(r,a){if(!m){L.error("No menuData specified in the adapter configuration.",null,"sap.ushell.adapters.local.MenuAdapter");a("No menuData specified in the adapter configuration.");return;}if(typeof m==="string"){q.ajax({type:"GET",dataType:"json",url:m}).done(function(R){r(R);}).fail(function(e){L.error(e.responseText);a("Menu entries were requested but could not be loaded from JSON file: "+m);});}else{r(m);}});};
return M;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(v,O,q,L,u){"use strict";var N=function(U,p,a){var A=O.create("config.applications",a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var d=new q.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{L.info("Hash Fragment: "+h);i=h.indexOf("&/");if(i>=0){h=h.slice(0,i);}i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,d=new q.Deferred(),c;if(!s){setTimeout(function(){d.resolve([]);},0);}else{sap.ushell.Container.getServiceAsync("URLParsing").then(function(o){c=o.paramsToString(P);L.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf("-"))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){d.resolve(r);}else{d.reject("Could not get links for  '"+s+"'");}});}return d.promise();};this.isIntentSupported=function(I){var d=new q.Deferred(),s={},D=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new q.Deferred();D.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){q.when.apply(q,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/PageBuildingAdapter',[],function(){"use strict";var P=function(s,p,c){this.oCache=(c&&c.config&&c.config.tiles)||{};};
P.prototype.getFactory=function(){return this;};
P.prototype.createChipInstance=function(c){var i=this.oCache[c.chipId];var s=c;s.configuration=s.configuration?JSON.parse(s.configuration):{};s.bags=s.bags?s.bags:{};var S=function(){};var C={types:{setType:function(v){S(v);},attachSetType:function(h){S=h;}},visible:{setVisible:function(){}},url:{getApplicationSystem:function(){}},configurationUi:{isEnabled:function(){return false;}},configuration:{getParameterValueAsString:function(p){return s.configuration[p];}},bag:{getBag:function(b){var B=s.bags[b];if(!B){B={};s.bags[b]=B;}B.properties=B.properties?B.properties:{};B.texts=B.texts?B.texts:{};return{getPropertyNames:function(){return Object.keys(B.properties);},getProperty:function(p){return B.properties[p];},setProperty:function(p,v){B.properties[p]=v;},getTextNames:function(){return Object.keys(B.texts);},getText:function(t){return B.texts[t];},setText:function(t,v){B.texts[t]=v;}};}}};return{load:function(r,a){r();},isStub:function(){return false;},refresh:function(){},getBag:C.bag.getBag,getContract:function(a){return C[a]||{};},configurationUi:C.configurationUi,configuration:C.configuration,bag:C.bag,url:C.url,types:C.types,getImplementationAsSapui5:function(){var d={chip:this};return new sap.ui.core.ComponentContainer({component:sap.ui.getCore().createComponent({componentData:d,name:i.componentName})});}};};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/PagePersistenceAdapter',["sap/ushell/utils","sap/ui/util/Storage","sap/base/util/ObjectPath"],function(u,S,O){"use strict";var P=function(s,p,a){var b=O.get("config.storageType",a)||S.Type.local;if(b!==S.Type.local&&b!==S.Type.session){throw new u.Error("PagePersistence Adapter Local Platform: unsupported storage type: '"+b+"'");}this._oAdapterConfiguration=a;};
P.prototype.getPage=function(i){var t=this;return new Promise(function(r,a){var d=t._oAdapterConfiguration.config.dataLoad[i]||{};if(d.page.id===i){r(d);}a({error:"No page with id '"+i+"' was found."});});};
P.prototype.getPages=function(i){var p=this._oAdapterConfiguration.config.dataLoad||{};return Promise.resolve(i.map(function(a){return p[a];}).filter(function(a){return!!a;}));};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/PersonalizationAdapter',["sap/ushell/utils","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ui/util/Storage"],function(u,O,q,S){"use strict";var m;var P=function(U,a,A){this._sStorageType=O.get("config.storageType",A)||P.prototype.constants.storage.LOCAL_STORAGE;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:break;case P.prototype.constants.storage.MEMORY:m=O.get("config.personalizationData",A)||{};break;default:throw new u.Error("Personalization Adapter Local Platform: unsupported storage type '"+this._sStorageType+"'");}};P.prototype.constants={storage:{MEMORY:"MEMORY",LOCAL_STORAGE:"LOCAL_STORAGE"}};
P.prototype.getAdapterContainer=function(C){return new sap.ushell.adapters.local.AdapterContainer(C,this._sStorageType);};
P.prototype.resetEntirePersonalization=function(){return new Promise(function(r,a){var l=this._getLocalStorage();setTimeout(function(){var d=l.removeAll();if(d){r();}else{a("could not delete personalization");}},0);}.bind(this));};
P.prototype.isResetEntirePersonalizationSupported=function(){return new Promise(function(r,a){setTimeout(function(){r(true);},0);});};
P.prototype.delAdapterContainer=function(C){return this.getAdapterContainer(C).del();};
sap.ushell.adapters.local.AdapterContainer=function(C,a){this._sContainerKey=C;this._sStorageType=a;this._oItemMap=new u.Map();};
P.prototype._getLocalStorage=g;
function g(){return new S(S.Type.local,"com.sap.ushell.adapters.sandbox.Personalization");}
function p(j){try{return JSON.parse(j);}catch(e){return undefined;}}
function s(j){return JSON.stringify(j);}
function c(j){if(j===undefined){return undefined;}try{return JSON.parse(JSON.stringify(j));}catch(e){return undefined;}}
sap.ushell.adapters.local.AdapterContainer.prototype.load=function(){var d=new q.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=l.get(t._sContainerKey);t._oItemMap.entries=p(i)||{};d.resolve(t);},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){t._oItemMap.entries=c(m[t._sContainerKey])||{};d.resolve(t);},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.save=function(){var d=new q.Deferred(),l,i,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){i=s(t._oItemMap.entries);l.put(t._sContainerKey,i);d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){m[t._sContainerKey]=c(t._oItemMap.entries);d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.del=function(){var d=new q.Deferred(),l,t=this;switch(this._sStorageType){case P.prototype.constants.storage.LOCAL_STORAGE:l=g();setTimeout(function(){l.remove(t._sContainerKey);t._oItemMap.entries={};d.resolve();},0);break;case P.prototype.constants.storage.MEMORY:setTimeout(function(){if(m&&m[t._sContainerKey]){delete m[t._sContainerKey];}t._oItemMap.entries={};d.resolve();},0);break;default:setTimeout(function(){d.reject("unknown storage type");},0);}return d.promise();};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemKeys=function(){return this._oItemMap.keys();};
sap.ushell.adapters.local.AdapterContainer.prototype.containsItem=function(i){return this._oItemMap.containsKey(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
sap.ushell.adapters.local.AdapterContainer.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);};
sap.ushell.adapters.local.AdapterContainer.prototype.delItem=function(i){this._oItemMap.remove(i);};
return P;},true);
sap.ui.predefine('sap/ushell/adapters/local/SearchAdapter',["sap/ui/thirdparty/jquery"],function(q,s){"use strict";var S=function(o,p,a){this.isSearchAvailable=function(){var d=q.Deferred();d.resolve(true);return d.promise();};this.getSina=function(){return{};};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/SupportTicketAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var S=function(s,p,a){this.createTicket=function(o){var d=new q.Deferred(),t="1234567";d.resolve(t);return d.promise();};};return S;},true);
sap.ui.predefine('sap/ushell/adapters/local/Ui5ComponentLoaderAdapter',[],function(){"use strict";
function U(){}
return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;this._oContainerPromises={};};
U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getServiceAsync("Personalization");};
U.prototype.saveParameterValue=function(p,v,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
U.prototype.deleteParameter=function(p,s){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){L.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer(s).done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
U.prototype.loadParameterValue=function(p,s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
U.prototype.getStoredParameterNames=function(s){var d=new q.Deferred();this._getUDContainer(s).done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){L.error(m);d.reject(m);});return d.promise();};
U.prototype._getUDContainer=function(s){var S=s.id;if(S!==""){S="."+S;}if(!this._oContainerPromises[s.id]){var d=new q.Deferred();this._oContainerPromises[s.id]=d.promise();this._getPersonalizationService().then(function(p){p.getContainer("sap.ushell.UserDefaultParameter"+S,{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true}).done(d.resolve).fail(d.reject);});}return this._oContainerPromises[s.id];};
return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["sap/ui/thirdparty/jquery","sap/ushell/services/Container","sap/ushell/services/Personalization","sap/base/util/ObjectPath","sap/base/Log"],function(q,C,P,O,L){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}];var e=O.get("config.themes",A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);L.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{text:"Browser Language",key:"default"},{text:"American English",key:"en-US"},{text:"British English",key:"en-GB"},{text:"English",key:"en"},{text:"German",key:"de"},{text:"Hebrew",key:"he"},{text:"Russian",key:"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppCommunicationMgr',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/URI"],function(A,q,O,L,U){"use strict";var C="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var s,a=[],p=0;
function b(){this.init=function(){var t=this;s=A.getHandlers();t.handleMessageEvent=b.prototype._handleMessageEvent.bind(t,t);addEventListener("message",t.handleMessageEvent);};this.destroy=function(){removeEventListener("message",this.handleMessageEvent);};this._handleMessageResponse=function(m){if(m.request_id&&a[m.request_id]){var r=a[m.request_id];if(m.status==="success"){r.resolve(m.body.result);}else{r.reject();}}};this._handleMessageRequest=function(c,m,M){var t=this,P=O.create("sap-ushell-config.services.PostMessage.config"),S=M&&M.service,d,e,f,o,g;L.debug("App Runtime received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,C);if(!S){return;}if(P&&P.enabled===false){L.warning("App Runtime received message for "+e+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,C);return;}if(!this._isTrustedPostMessageSource(c,m)){L.warning("App Runtime received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,C);return;}if(S.indexOf(".")>0){d=S.split(".");f=d[d.length-1];e=S.substr(0,S.length-f.length-1);}else{L.warning("App Runtime received message with invalid service name ("+S+") :"+JSON.stringify(m.data),null,C);return;}var h={oMessage:m,oMessageData:M,oContainer:c};try{o=s[e];g=o&&o.oServiceCalls[f];if(g&&g.executeServiceCallFn){g.executeServiceCallFn(h).done(function(r){t.sendResponseMessage(m,M,"success",{result:r});}).fail(function(i){t.sendResponseMessage(m,M,"error",{message:i});});}else{L.warning("App Runtime received message with unknown service name ("+M.service+") :"+JSON.stringify(m.data),null,C);}}catch(E){L.warning("Error in processing message: "+E.message+") :"+JSON.stringify(m.data),null,C);}};this._getCFLPWindow=function(){return window.parent;};this._isTrustedPostMessageSource=function(c,m){var t=false,P=c._getCFLPWindow();if(P){t=(m.source===P);}return t;};this.sendResponseMessage=function(m,M,S,B){var r=JSON.stringify({type:"response",service:M.service,request_id:M.request_id,status:S,body:B});L.debug("Sending post message response to origin ' "+m.origin+"': "+r,null,C);if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object",C);return;}m.source.postMessage(r,m.origin);};this._getTargetWindow=function(){return window.parent;};this.postMessage=function(m){var c,t=this._getTargetWindow();if(m){try{if(m.type==="request"&&!m.request_id){m.request_id=this.getId();}c=JSON.stringify(m);t.postMessage(c,"*");}catch(e){L.error("Message '"+m+"' cannot be posted: "+e,"sap.ui5Isolation.AppCommunicationMgr");}}};this.sendMessageToOuterShell=function(m,P,r){var d=new q.Deferred(),M={type:"request",service:m,body:(P||{}),request_id:r};this.postMessage(M);a[M.request_id]=d;return d.promise();};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+(++p);};}
b.prototype._handleMessageEvent=function(c,m){if(m===undefined){return;}var M=m.data;if(typeof M==="string"){try{M=JSON.parse(m.data,this);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,C);return;}}if(M.type==="request"){return c._handleMessageRequest(c,m,M);}else if(M.type==="response"){return c._handleMessageResponse(M);}};
return new b();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessage',["sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface"],function(q,P){"use strict";var a={};
function A(){this.getHandlers=function(){return a;};this.registerCommHandlers=function(c){var i=[];Object.keys(c).forEach(function(k){var C=c[k];if(C.oServiceCalls){Object.keys(C.oServiceCalls).forEach(function(b){i.push({action:b,service:k});});}});q.extend(true,a,c);return i;};this.registerCommunicationHandler=function(k,c){var C=a[k],i=[];if(!C){C=a[k]={oServiceCalls:{}};}if(c.oServiceCalls){Object.keys(c.oServiceCalls).forEach(function(b){C.oServiceCalls[b]=c.oServiceCalls[b];i.push({action:b,service:k});});}return i;};this.registerCommunicationHandlers=function(c){var t=this;Object.keys(c).forEach(function(k){t.registerCommunicationHandler(k,c[k]);});};this._getPostMesageInterface=function(s,i){var c=a[s],I;if(c&&c.oRequestCalls&&c.oRequestCalls[i]){I=c.oRequestCalls[i];}return I;};}
var o=new A();P.init(false,o.registerCommunicationHandlers.bind(o));return o;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A,a){"use strict";
function b(){this.getHandlers=function(){return A.getHandlers();};this.registerCommHandlers=function(c){var i=A.registerCommHandlers(c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this.registerCommunicationHandler=function(k,c){var i=A.registerCommunicationHandler(k,c);a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.subscribe",i);};this._getPostMesageInterface=function(s,i){return A._getPostMesageInterface(s,i);};}
return new b();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimeService',["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(A){"use strict";
function a(){this.sendMessageToOuterShell=function(m,p,r){return A.sendMessageToOuterShell(m,p,r);};}
return new a();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/SessionHandlerAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/base/Log","sap/ui/thirdparty/jquery"],function(A,a,U,L,q){"use strict";
function S(){this.init=function(){var t=this;A.registerCommunicationHandler("sap.ushell.sessionHandler",{oServiceCalls:{logout:{executeServiceCallFn:function(m){return t.handleLogoutEvent(m);}},extendSessionEvent:{executeServiceCallFn:function(m){return t.handleExtendSessionEvent(m);}}}});this.attachUserEvents();this.userActivityHandler();};this.handleLogoutEvent=function(){var d=new q.Deferred(),t=this;this.detachUserEvents();sap.ushell.Container.getFLPUrl(true).then(function(f){if(t.isSameDomain(f,document.URL)===false){sap.ushell.Container.logout().then(d.resolve,d.resolve);}else{d.resolve();}});return d.promise();};this.isSameDomain=function(u,b){var o,c,d=false;try{o=new U(u);c=new U(b);if(o.origin()===c.origin()){d=true;}}catch(e){L.error("Check for same domain of iframe and FLP failed: "+u+" "+b,e,"sap.ushell.appRuntime.ui5.SessionHandlerAgent");}return d;};this.handleExtendSessionEvent=function(){sap.ushell.Container.sessionKeepAlive();return new q.Deferred().resolve().promise();};this.attachUserEvents=function(){q(document).on("mousedown.sessionTimeout mousemove.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("keyup.sessionTimeout",this.userActivityHandler.bind(this));q(document).on("touchstart.sessionTimeout",this.userActivityHandler.bind(this));};this.detachUserEvents=function(){q(document).off("mousedown.sessionTimeout mousemove.sessionTimeout");q(document).off("keydown.sessionTimeout");q(document).off("touchstart.sessionTimeout");};this.userActivityHandler=function(e){if(this.oUserActivityTimer!==undefined){return;}var t=this;this.oUserActivityTimer=setTimeout(function(){a.sendMessageToOuterShell("sap.ushell.sessionHandler.notifyUserActive",{});t.oUserActivityTimer=undefined;},1000);};}
var s=new S();return s;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/performance/FesrEnhancer',["sap/ui/performance/trace/FESR","sap/ui/performance/trace/Interaction","sap/ushell/utils/type"],function(F,I,t){"use strict";var f={_fnOriginalOnBeforeCreated:undefined,_currentAppShortId:undefined,init:function(){if(F.getActive()){this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},_onBeforeCreatedHandler:function(u,U){if(this._currentAppShortId){u.appNameShort=this._currentAppShortId;}if(u.interactionType===1&&(u.stepName==="undetermined_startup"||u.stepName==="undetermined_appruntime_app_startup")){u.stepName="APPRT@APP_START";}return u;},reset:function(){if(F.getActive()){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;this.setAppShortId();}},startInteraction:function(){if(F.getActive()){I.start("appruntime_app_startup");}},setAppShortId:function(c){function g(m,p){var v=m.getManifestEntry(p)||[];if(!t.isArray(v)){v=[v];}return(typeof v[0]==="string"?v[0]:undefined);}if(F.getActive()){try{if(c){var C=c.getInstance().getComponentData().technicalParameters||{},m=c.getMetadata();this._currentAppShortId=C["sap-fiori-id"]||g(m,"/sap.fiori/registrationIds");}else{this._currentAppShortId=undefined;}}catch(e){this._currentAppShortId=undefined;}}}};return f;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils',["sap/base/util/ObjectPath"],function(O){"use strict";var A={getAppLifeCycleService:function(){var c=A.getContainer();return c.getServiceAsync("AppLifeCycle").catch(function(e){var E="Error getting AppLifeCycle service from ushell container: "+e;throw new Error(E);});},getContainer:function(){var c=O.get("sap.ushell.Container");if(!c){throw new Error("Illegal state: shell container not available; this component must be executed in a unified shell runtime context.");}return c;},getCurrentRunningApplication:function(){return A.getAppLifeCycleService().then(function(a){return a.getCurrentApplication();});}};return A;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/baseRta/BaseRTAPluginStatus',function(){"use strict";return{STATUS_STARTING:"starting",STATUS_STARTED:"started",STATUS_STOPPING:"stopping",STATUS_STOPPED:"stopped"};},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions',["sap/base/util/UriParameters","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(U,A){"use strict";var C={_getAppDescriptor:function(c){if(c&&c.getMetadata){var o=c.getMetadata();if(o&&o.getManifest){return o.getManifest();}}return{};},checkRestartRTA:function(l){var u=new U(window.location.href);var s=u.get("sap-ui-layer");l=s||l;var r=!!window.sessionStorage.getItem("sap.ui.rta.restart."+l);if(r){window.sessionStorage.removeItem("sap.ui.rta.restart."+l);}return r;},checkFlexEnabledOnStart:function(){return A.getCurrentRunningApplication().then(function(c){var r=c.componentInstance;var a=this._getAppDescriptor(r);var f=a["sap.ui5"]&&a["sap.ui5"].flexEnabled;return f!==false;}.bind(this));},checkUI5App:function(){return A.getCurrentRunningApplication().then(function(c){var i=c&&c.applicationType==="UI5";return i;});}};return C;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer',["sap/base/Log","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(L,A){"use strict";var R={getRenderer:function(c){var C=A.getContainer();return new Promise(function(r,a){var o=C.getRenderer();if(o){c.oRenderer=o;r(o);}else{c._onRendererCreated=function(e){o=e.getParameter("renderer");if(o){c.oRenderer=o;r(o);}else{a("Illegal state: shell renderer not available after recieving 'rendererCreated' event.");}};C.attachRendererCreatedEvent(c._onRendererCreated,c);}});},createActionButton:function(c,o,i){return this.getRenderer(c).then(function(r){r.addActionButton("sap.ushell.ui.launchpad.ActionItem",{id:c.mConfig.id,text:c.mConfig.i18n.getText(c.mConfig.text),icon:c.mConfig.icon,press:o,visible:i},true,false,[r.LaunchpadState.App]);}).catch(function(e){L.error(e,undefined,c.mConfig.sComponentName);});},exit:function(){}};return R;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger',["sap/ui/thirdparty/hasher","sap/ui/core/BusyIndicator","sap/ushell/appRuntime/ui5/plugins/baseRta/BaseRTAPluginStatus","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils"],function(h,B,P,A){"use strict";var S=P.STATUS_STARTING;var a=P.STATUS_STARTED;var b=P.STATUS_STOPPING;var c=P.STATUS_STOPPED;
function r(){return new Promise(function(d,e){sap.ui.require(["sap/ui/rta/api/startAdaptation"],d,e);});}
var T=function(C){this.mConfig=C;this.sStatus=P.STATUS_STOPPED;this.oStartingPromise=null;this.oStoppingPromise=null;var o=A.getContainer();o.registerDirtyStateProvider(this._dirtyStateProvider.bind(this));this.oInitPromise=o.getServiceAsync("URLParsing").then(function(u){this.oURLParsingService=u;}.bind(this)).catch(function(e){throw new Error("Error during retrieval of URLParsing ushell service: "+e);});};
T.prototype.getInitPromise=function(){return this.oInitPromise;};
T.prototype.errorHandler=function(e){B.hide();if(e==="Reload triggered"){this.sStatus=c;}};
function g(){return A.getCurrentRunningApplication().then(function(C){return C.componentInstance;});}
T.prototype._startRta=function(){this.sStatus=S;sap.ui.getCore().getEventBus().subscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appKeepAliveDeactivate",this._onAppClosed,this);B.show(0);var R;return g().then(function(o){R=o;return sap.ui.getCore().loadLibraries(["sap.ui.rta"],{async:true});}).then(r.bind(this)).then(function(s){this.sOldHash=h.getHash();var o={rootControl:R,flexSettings:{layer:this.mConfig.layer,developerMode:this.mConfig.developerMode}};return s(o,this.mConfig.loadPlugins,this.mConfig.onStartHandler,this.mConfig.onErrorHandler,this.mConfig.onStopHandler);}.bind(this)).then(function(o){B.hide();this._oRTA=o;this.sStatus=a;}.bind(this)).catch(this.mConfig.onErrorHandler);};
T.prototype._stopRta=function(){this.sStatus=b;return this._oRTA.stop.apply(this._oRTA,arguments).then(function(){this.exitRta();}.bind(this));};
T.prototype.triggerStartRta=function(){var s=this.sStatus;switch(s){case S:break;case a:this.oStartingPromise=Promise.resolve();break;case b:this.oStartingPromise=this.oStoppingPromise.then(function(){return this._startRta();}.bind(this));break;case c:this.oStartingPromise=this._startRta();break;default:}if(s!==S){this.oStartingPromise.then(function(){this.oStartingPromise=null;}.bind(this));}return this.oStartingPromise;};
T.prototype.triggerStopRta=function(){var s=this.sStatus;switch(s){case S:this.oStoppingPromise=this.oStartingPromise.then(function(){return this._stopRta.apply(this,arguments);}.bind(this));break;case a:this.oStoppingPromise=this._stopRta.apply(this,arguments);break;case b:break;case c:this.oStoppingPromise=Promise.resolve();break;default:}if(s!==b){this.oStoppingPromise.then(function(){this.oStoppingPromise=null;}.bind(this));}return this.oStoppingPromise;};
T.prototype.handleFlexDisabledOnStart=function(){sap.ui.require(["sap/ui/rta/util/showMessageBox","sap/m/MessageBox"],function(s,M){s(this.mConfig.i18n.getText("MSG_FLEX_DISABLED"),{icon:M.Icon.INFORMATION,title:this.mConfig.i18n.getText("HEADER_FLEX_DISABLED"),actions:[M.Action.OK],initialFocus:null,isCustomAction:false});}.bind(this));};
T.prototype._dirtyStateProvider=function(){if(this._oRTA&&this.sStatus===a){var H=h.getHash();var p=this.oURLParsingService.parseShellHash(H);var o=this.oURLParsingService.parseShellHash(this.sOldHash);this.sOldHash=H;if(p.semanticObject===o.semanticObject&&p.action===o.action&&p.appSpecificRoute!==o.appSpecificRoute){return false;}return this._oRTA.canUndo();}return false;};
T.prototype.exitRta=function(){if(this._oRTA){this._oRTA.destroy();this.sStatus=c;this.oStartingPromise=null;this.oStoppingPromise=null;this._oRTA=null;}sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.renderers.fiori2.Renderer","appClosed",this._onAppClosed,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appKeepAliveDeactivate",this._onAppClosed,this);};
T.prototype._onAppClosed=function(){this.triggerStopRta(true,true);};
return T;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/rtaAgent/Component',["sap/ui/core/Component","sap/ui/fl/write/api/FeaturesAPI","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger","sap/base/Log"],function(C,F,a,A,T,L){"use strict";var p;
function g(){return{sComponentName:"sap.ushell.appRuntime.ui5.plugins.rtaAgent",layer:"CUSTOMER",developerMode:false};}
function b(v){return new Promise(function(r,e){p.postMessageToFlp("user.postapi.rtaPlugin","switchToolbarVisibility",{visible:v}).done(r).fail(e);});}
function c(){return new Promise(function(r,e){p.postMessageToFlp("user.postapi.rtaPlugin","activatePlugin").done(r).fail(e);});}
function d(){return a.checkUI5App().then(function(i){if(i){p.postMessageToFlp("user.postapi.rtaPlugin","showAdaptUI").fail(function(e){throw new Error(e);});}});}
return C.extend("sap.ushell.appRuntime.ui5.plugins.rtaAgent.Component",{metadata:{manifest:"json"},init:function(){this.mConfig=g();this._oPluginPromise=Promise.resolve();p=this.getComponentData().oPostMessageInterface;return F.isKeyUser().then(function(i){if(i){return c();}return Promise.reject();}).then(function(){this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new T(this.mConfig);return this.oTrigger.getInitPromise();}.bind(this)).then(function(){this._registerPostMessages();return this._restartRtaIfRequired();}.bind(this)).then(function(){return A.getAppLifeCycleService();}).then(function(o){o.attachAppLoaded(this._onAppLoaded,this);}.bind(this)).then(d).catch(function(e){if(e){L.error(e);}});},getPluginPromise:function(){return this._oPluginPromise;},_registerPostMessages:function(){p.registerPostMessageAPIs({"user.postapi.rtaPlugin":{inCalls:{startUIAdaptation:{executeServiceCallFn:function(){this.oTrigger.triggerStartRta(this);return p.createPostMessageResult();}.bind(this)}},outCalls:{activatePlugin:{},showAdaptUI:{}}}});},_restartRtaIfRequired:function(){return a.checkUI5App().then(function(i){if(i){if(a.checkRestartRTA(this.mConfig.layer)){return b(false).then(function(){return this.oTrigger.triggerStartRta(this);}.bind(this));}}return undefined;}.bind(this));},_onAppLoaded:function(){a.checkUI5App().then(function(i){if(i){this._restartRtaIfRequired().then(function(){return d();});}}.bind(this));},_onStopHandler:function(){this._exitAdaptation();},_onStartHandler:function(){},_onErrorHandler:function(e){this.oTrigger.errorHandler(e);if(e!=="Reload triggered"){this._exitAdaptation();var E;var m;if(e instanceof Error){E=e.stack;m=this.mConfig.i18n.getText("TECHNICAL_ERROR");}else if(typeof e==="string"){E=m=e;}L.error("Cannot start UI Adaptation: ",E);sap.ui.require(["sap/ui/rta/Utils","sap/m/MessageBox"],function(U,M){M.error(m,{title:this.mConfig.i18n.getText("ERROR_TITLE"),onClose:null,styleClass:U.getRtaStyleClassName()});}.bind(this));}},_exitAdaptation:function(){b(true);this.oTrigger.exitRta();},exit:function(){b(true);this._oPluginPromise=this._oPluginPromise.then(A.getAppLifeCycleService.bind(A)).then(function(o){o.detachAppLoaded(this._onAppLoaded,this);}.bind(this));}});});
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/rtaShell/Component',["sap/ui/core/Component","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ui/thirdparty/jquery"],function(C,R,A,q){"use strict";var p;var F="sapUiRtaFioriHeaderInvisible";
function g(){return{sComponentName:"sap.ushell.appRuntime.ui5.plugins.rtaShell",layer:"CUSTOMER",id:"RTA_AppRuntime_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:false};}
function s(f,v){if(f){if(v){f.removeStyleClass(F);}else{f.addStyleClass(F);}}}
function a(f){return new Promise(function(r,b){s(f,false);p.postMessageToApp("user.postapi.rtaPlugin","startUIAdaptation").done(r).fail(b);});}
return C.extend("sap.ushell.appRuntime.ui5.plugins.rtaShell.Component",{metadata:{manifest:"json"},init:function(){this.mConfig=g();p=this.getComponentData().oPostMessageInterface;this._registerPostMessages();},_registerPostMessages:function(){p.registerPostMessageAPIs({"user.postapi.rtaPlugin":{inCalls:{activatePlugin:{executeServiceCallFn:function(){return p.createPostMessageResult(this._initPlugin());}.bind(this)},showAdaptUI:{executeServiceCallFn:function(){this._changeActionButtonVisibility(true);return p.createPostMessageResult();}.bind(this)},switchToolbarVisibility:{executeServiceCallFn:function(S){var v=S.oMessageData.body.visible;s(this._oFioriHeader,v);return p.createPostMessageResult();}.bind(this)}},outCalls:{startUIAdaptation:{}}}});},_initPlugin:function(){if(this.bIsInitialized){return new q.Deferred().resolve();}this.bIsInitialized=true;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();return new q.Deferred(function(d){R.getRenderer(this).then(function(r){this.oRenderer=r;this._oFioriHeader=this.oRenderer&&this.oRenderer.getRootControl&&this.oRenderer.getRootControl().getOUnifiedShell().getHeader();}.bind(this)).then(function(){return R.createActionButton(this,a.bind(undefined,this._oFioriHeader),this.mConfig.visible);}.bind(this)).then(function(){return A.getAppLifeCycleService();}).then(function(o){o.attachAppLoaded(this._onAppLoaded,this);}.bind(this)).catch(function(e){this.bIsInitialized=false;return Promise.reject(e);}.bind(this)).then(d.resolve,d.reject);}.bind(this)).promise();},_changeActionButtonVisibility:function(v){var c=sap.ui.getCore().byId(this.mConfig.id);if(c){c.setVisible(v);}},_onAppLoaded:function(){this._changeActionButtonVisibility(false);},exit:function(){if(this._oFioriHeader){this._oFioriHeader.removeStyleClass(F);}return A.getAppLifeCycleService().then(function(o){o.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){var c=A.getContainer();c.detachRendererCreatedEvent(this._onRendererCreated,this);}}.bind(this));}});});
sap.ui.predefine('sap/ushell/appRuntime/ui5/plugins/scriptAgent/Component',["sap/ui/core/Component","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,q,L){"use strict";return C.extend("sap.ushell.appRuntime.ui5.plugins.scriptAgent.Component",{init:function(){var c=this.getComponentData();q.ajaxSetup({cache:true});try{q.getScript(c.config.url);}catch(e){L.error(e);}q.ajaxSetup({cache:false});}});});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/AccessKeysAgent',["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){"use strict";var a=function(){this.init=function(){document.addEventListener("keydown",function(e){var d=false,p;if(e.altKey&&!e.ctrlKey&&!e.shiftKey){if(e.keyCode===65||e.keyCode===70||e.keyCode===72||e.keyCode===77||e.keyCode===78||e.keyCode===83){d=true;}}else if(e.ctrlKey&&!e.altKey&&!e.shiftKey){if(e.keyCode===188||e.keyCode===112||e.keyCode===83){d=true;}}else if(e.ctrlKey&&e.shiftKey&&!e.altKey){if(e.keyCode===70){d=true;}}if(d){p={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,keyCode:e.keyCode,key:e.key};if(e.keyCode===188){p.key=",";}A.sendMessageToOuterShell("sap.ushell.services.ShellUIService.processHotKey",p);}}.bind(this),true);};};return new a();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer',["sap/base/util/ObjectPath","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/Log","sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions"],function(O,A,L){"use strict";var b=[];
function R(){var t=this;O.set("sap.ushell.renderers.fiori2.Renderer",t);["init","createContent","createExtendedShellState","applyExtendedShellState","showLeftPaneContent","showHeaderItem","showRightFloatingContainerItem","showRightFloatingContainer","showToolAreaItem","showFloatingActionButton","showHeaderEndItem","setHeaderVisibility","showSubHeader","showSignOutItem","showSettingsItem","setFooter","setShellFooter","setFooterControl","hideHeaderItem","removeToolAreaItem","removeRightFloatingContainerItem","hideLeftPaneContent","hideFloatingActionButton","hideSubHeader","removeFooter","getCurrentViewportState","addShellSubHeader","addSubHeader","addUserAction","addActionButton","addFloatingButton","addFloatingActionButton","addSidePaneContent","addLeftPaneContent","addHeaderItem","addRightFloatingContainerItem","addToolAreaItem","getModelConfiguration","addUserPreferencesEntry","setHeaderTitle","setLeftPaneVisibility","showToolArea","setHeaderHiding","setFloatingContainerContent","setFloatingContainerVisibility","getFloatingContainerVisiblity","getRightFloatingContainerVisibility","setFloatingContainerDragSelector","createTriggers","convertButtonsToActions","createItem","addEntryInShellStates","removeCustomItems","addCustomItems","addRightViewPort","addLeftViewPort","getShellController","getViewPortContainerCurrentState","ViewPortContainerNavTo","switchViewPortStateByControl","setMeAreaSelected","getMeAreaSelected","setNotificationsSelected","getNotificationsSelected","addShellDanglingControl","getShellConfig","reorderUserPrefEntries","addUserProfilingEntry","logRecentActivity","setCurrentCoreView","getCurrentCoreView"].forEach(function(m){t[m]=function(){L.error("'Renderer' api '"+m+"' is not supported when UI5 application is running inside an iframe (sap.ushell.appRuntime.ui5.renderers.fiori2.Renderer)");};});this.LaunchpadState={App:"app",Home:"home"};this._addButtonHandler=function(i,h){b[i]=h;};this.handleHeaderButtonClick=function(B){if(b[B]!==undefined){b[B]();}};this.addHeaderItem=function(c,C,i,a,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];a=arguments[2];s=arguments[3];}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderItem",C,i,a,s);};this.addHeaderEndItem=function(c,C,i,a,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];a=arguments[2];s=arguments[3];}this._addHeaderItem("sap.ushell.services.Renderer.addHeaderEndItem",C,i,a,s);};this.showHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderItem",{aIds:i,bCurrentState:true,aStates:""});};this.showHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showHeaderEndItem",{aIds:i,bCurrentState:true,aStates:""});};this.hideHeaderItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderItem",{aIds:i,bCurrentState:true,aStates:""});};this.hideHeaderEndItem=function(i){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideHeaderEndItem",{aIds:i,bCurrentState:true,aStates:""});};this._addHeaderItem=function(a,c,i){if(c.click!==undefined){this._addButtonHandler(c.id,c.click);}else if(c.press!==undefined){this._addButtonHandler(c.id,c.press);}A.sendMessageToOuterShell(a,{sId:c.id,sTooltip:c.tooltip,sIcon:c.icon,bVisible:i,bCurrentState:true});};this.setHeaderTitle=function(T){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderTitle",{sTitle:T});};this.setHeaderVisibility=function(v,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.setHeaderVisibility",{bVisible:v,bCurrentState:c,aStates:s});};this.createShellHeadItem=function(p){if(p.press!==undefined){this._addButtonHandler(p.id,p.press);delete p.press;}A.sendMessageToOuterShell("sap.ushell.services.Renderer.createShellHeadItem",{params:p});};this.showActionButton=function(i,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.showActionButton",{aIds:i,bCurrentState:c,aStates:s});};this.hideActionButton=function(i,c,s){A.sendMessageToOuterShell("sap.ushell.services.Renderer.hideActionButton",{aIds:i,bCurrentState:c,aStates:s});};this.addUserAction=function(p){if(p.oControlProperties.press!==undefined){this._addButtonHandler(p.oControlProperties.id,p.oControlProperties.press);delete p.oControlProperties.press;}A.sendMessageToOuterShell("sap.ushell.services.Renderer.addUserAction",{oParameters:p});};}
return new R();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/renderers/fiori2/RendererExtensions',["sap/base/util/ObjectPath","sap/base/util/uid","sap/ushell/EventHub","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(O,g,E,A){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(y,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",y,D);},0);}
function b(I,L,y){}
function c(I,L,y){}
function d(I,L,y){}
function e(I,L,y){}
function f(B,L,y){var z=Array.isArray(B)?B:[B],S=[L],C=[];if(y!==undefined){S.push(y);}z.forEach(function(D){var F=g()+"-apprt";D.idAppRuntime=F;sap.ushell.renderers.fiori2.Renderer._addButtonHandler(F,function(){D.firePress();});C.push({id:F,text:D.getText(),icon:D.getIcon(),tooltip:D.getTooltip(),aStates:S});});return A.sendMessageToOuterShell("sap.ushell.services.Renderer.addOptionsActionSheetButton",C);}
function h(B,L,y){var z=Array.isArray(B)?B:[B],S=[L],C=[];if(y!==undefined){S.push(y);}z.forEach(function(D){C.push({id:D.idAppRuntime,aStates:S});});return A.sendMessageToOuterShell("sap.ushell.services.Renderer.removeOptionsActionSheetButton",C);}
function i(C,L,y){}
function j(L,y){}
function k(I,L,y){}
function l(I,L,y){}
function m(I,L,y){}
function n(I,L,y){}
function o(){return{};}
function p(I,L,T,y){}
function q(C,S){}
function r(y){}
function s(T){}
function t(L,V){}
function u(H){}
function v(F){}
function w(){}
function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=p;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=m;this.removeHeaderItem=e;this.removeHeaderEndItem=n;this.addEndUserFeedbackCustomUI=q;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=h;this.setFooter=v;this.removeFooter=w;this.addUserPreferencesEntry=r;this.setHeaderTitle=s;this.setHeaderHiding=u;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=k;this.removeFloatingActionButton=l;this.setLeftPaneContent=i;this.removeLeftPaneContent=j;this.setLeftPaneVisibility=t;this.getConfiguration=o;}
var x=new R();var U={publishExternalEvent:a,init:_};O.set("sap.ushell.renderers.fiori2.utils",U);O.set("sap.ushell.renderers.fiori2.RendererExtensions",x);return x;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppConfiguration',["sap/ushell/services/AppConfiguration","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/core/IconPool","sap/ushell/resources","sap/m/library"],function(A,a,I,r,m){"use strict";
function b(){var c=[];sap.ushell.services.AppConfiguration=this;A.constructor.call(this);this.setApplicationFullWidth=function(v){a.sendMessageToOuterShell("sap.ushell.services.AppConfiguration.setApplicationFullWidth",{bValue:v});};this.addApplicationSettingsButtons=function(B){var i;for(i=0;i<B.length;i++){var C=B[i];C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(m.ButtonType.Unstyled);}sap.ushell.renderers.fiori2.RendererExtensions.removeOptionsActionSheetButton(c,"app").done(function(){c=B;sap.ushell.renderers.fiori2.RendererExtensions.addOptionsActionSheetButton(c,"app");});};}
return new b();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent',["sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/base/util/UriParameters","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/ui/Device","sap/ui/core/BusyIndicator","sap/ushell/appRuntime/ui5/performance/FesrEnhancer"],function(A,a,U,b,q,D,B,F){"use strict";
function c(){var t=this,s,o,e=true,d={},C,f={},r,R;this.init=function(m,g,h,E,i,j){s=m;C=g;R=h;if(E!==undefined){e=E;}this.addAppInfoToCache(i,j);A.registerCommHandlers({"sap.ushell.services.appLifeCycle":{oServiceCalls:{create:{executeServiceCallFn:function(M){F.startInteraction();var k=JSON.parse(M.oMessage.data),i=new U(k.body.sUrl).get("sap-ui-app-id");t.create(i,k.body.sUrl);window.hasher.disableCFLPUpdate=true;window.hasher.replaceHash(k.body.sHash);window.hasher.disableCFLPUpdate=false;return new q.Deferred().resolve().promise();}},destroy:{executeServiceCallFn:function(M){var k=JSON.parse(M.oMessage.data);t.destroy(k.body.sCacheId);return new q.Deferred().resolve().promise();}},store:{executeServiceCallFn:function(M){var k=JSON.parse(M.oMessage.data);t.store(k.body.sCacheId);return new q.Deferred().resolve().promise();}},restore:{executeServiceCallFn:function(M){var k=JSON.parse(M.oMessage.data);t.restore(k.body.sCacheId);window.hasher.disableCFLPUpdate=true;window.hasher.replaceHash(k.body.sHash);window.hasher.disableCFLPUpdate=false;return new q.Deferred().resolve().promise();}}}}});this.initialSetup();};this.initialSetup=function(){a.sendMessageToOuterShell("sap.ushell.services.appLifeCycle.setup",{isStateful:true,isKeepAlive:true,lifecycle:{bActive:true,bSwitch:true,bStorageIdentifier:true},settings:{bTheme:true,bLocal:true},session:{bSignOffSupport:true,bExtendSessionSupport:true}});};this.restore=function(S){var g=f[S],h=g.getComponentInstance();g.setVisible(true);if(h){if(h.isKeepAliveSupported&&h.isKeepAliveSupported()===true){h.activate();}else{if(h.restore){h.restore();}if(h.getRouter&&h.getRouter()&&h.getRouter().initialize){h.getRouter().initialize();}}r=g;}};this.store=function(S){var g=r,h;f[S]=g;h=g.getComponentInstance();g.setVisible(false);if(h){if(h.isKeepAliveSupported&&h.isKeepAliveSupported()===true){h.deactivate();}else{if(h.suspend){h.suspend();}if(h.getRouter&&h.getRouter()){h.getRouter().stop();}}}};this.getURLParameters=function(u){return new Promise(function(g,h){if(u.hasOwnProperty("sap-intent-param")){var i=u["sap-intent-param"];a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{sAppStateKey:i}).then(function(p){delete u["sap-intent-param"];var j=q.extend({},u,(new b("?"+p)).query(true),true);g(j);},function(E){g(u);});}else{g(u);}});};this.getAppInfo=function(g,u){return new Promise(function(h){function G(){o.getAppInfo(g,u).then(function(i){t.addAppInfoToCache(g,i);h(i);});}if(e===true&&d[g]){h(JSON.parse(JSON.stringify(d[g])));}else if(o){G();}else{sap.ui.require([s.replace(/\./g,"/")],function(O){o=O;G();});}});};this.addAppInfoToCache=function(g,h){if(g&&h&&e===true&&d[g]===undefined){d[g]=JSON.parse(JSON.stringify(h));}};this.create=function(g,u){if(D.browser.chrome){B.show(0);}var h=new Promise(function(i){t.getAppInfo(g,u).then(function(j){i(j);});}).then(function(i){t.getURLParameters(new b(u).query(true)).then(function(j){C(g,j,i).then(function(k){R(k);});});});return h;};this.setComponent=function(g){r=g;};this.destroy=function(S){if(S){if(f[S]===r){r=undefined;}f[S].destroy();delete f[S];}else if(r){r.destroy();r=undefined;}F.setAppShortId();};}
return new c();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/AppState',["sap/ushell/services/AppState","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(A,a,b,u,q){"use strict";
function c(o,C,p,d){A.call(this,o,C,p,d);this.getAppState=function(k){var D=new q.Deferred();a.sendMessageToOuterShell("sap.ushell.services.AppState.getAppState",{sKey:k}).done(function(s){sap.ushell.Container.getServiceAsync("AppState").then(function(e){var f=new b(e,s._sKey,s._bModifiable,s._sData,s._sAppName,s._sACHComponent,s._bTransient,s._iPersistencyMethod,s._oPersistencySettings);D.resolve(f);});});return D.promise();};this._saveAppState=function(k,D,s,e,t,P,f){return a.sendMessageToOuterShell("sap.ushell.services.AppState._saveAppState",{sKey:k,sData:D,sAppName:s,sComponent:e,bTransient:t,iPersistencyMethod:P,oPersistencySettings:f});};this._loadAppState=function(k){return a.sendMessageToOuterShell("sap.ushell.services.AppState._loadAppState",{sKey:k});};A.prototype.deleteAppState=function(k){return a.sendMessageToOuterShell("sap.ushell.services.AppState.deleteAppState",{sKey:k});};this.getAppStateData=function(k){return a.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{sAppStateKey:k});};this.createNewInAppState=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.createNewInAppState",{sData:D});};this.updateInAppStateData=function(D){return a.sendMessageToOuterShell("sap.ushell.services.AppState.updateInAppState",{sData:D});};this.getInAppStateData=function(){return a.sendMessageToOuterShell("sap.ushell.services.AppState.getInAppStateData");};this.makeStatePersistent=function(k,P,e){return a.sendMessageToOuterShell("sap.ushell.services.AppState.makeStatePersistent",{sKey:k,iPersistencyMethod:P,oPersistencySettings:e});};}
c.prototype=A.prototype;c.hasNoAdapter=A.hasNoAdapter;c.WindowAdapter=A.WindowAdapter;return c;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Bookmark',["sap/ushell/services/Bookmark","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(B,A){"use strict";
function a(c,p,s){B.call(this,c,p,s);this.addBookmark=function(P,C){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkUI5",{oParameters:P,vContainer:C});};this.getShellGroupIDs=function(){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.getShellGroupIDs");};this.addBookmarkByGroupId=function(P,g){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmark",{oParameters:P,groupId:g});};this.addCatalogTileToGroup=function(C,g,o){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCatalogTileToGroup",{sCatalogTileId:C,sGroupId:g,oCatalogData:o});};this.countBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.countBookmarks",{sUrl:u});};this.deleteBookmarks=function(u){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteBookmarks",{sUrl:u});};this.updateBookmarks=function(u,P){return A.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateBookmarks",{sUrl:u,oParameters:P});};this.getContentNodes=function(){var d=A.sendMessageToOuterShell("sap.ushell.services.Bookmark.getContentNodes");return new Promise(function(r,R){d.done(function(v){r(v);}).fail(function(e){R(e);});});};this.addCustomBookmark=function(v,C,b){var d=A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addCustomBookmark",{sVizType:v,oConfig:C,vContentNodes:b});return new Promise(function(r,R){d.done(function(e){r(e);}).fail(function(e){R(e);});});};this.countCustomBookmarks=function(i){var d=A.sendMessageToOuterShell("sap.ushell.services.Bookmark.countCustomBookmarks",{oIdentifier:i});return new Promise(function(r,R){d.done(function(v){r(v);}).fail(function(e){R(e);});});};this.updateCustomBookmarks=function(i,C){var d=A.sendMessageToOuterShell("sap.ushell.services.Bookmark.updateCustomBookmarks",{oIdentifier:i,oConfig:C});return new Promise(function(r,R){d.done(function(v){r(v);}).fail(function(e){R(e);});});};this.deleteCustomBookmarks=function(i){var d=A.sendMessageToOuterShell("sap.ushell.services.Bookmark.deleteCustomBookmarks",{oIdentifier:i});return new Promise(function(r,R){d.done(function(v){r(v);}).fail(function(e){R(e);});});};this.addBookmarkToPage=function(P,b){return new Promise(function(r,R){A.sendMessageToOuterShell("sap.ushell.services.Bookmark.addBookmarkToPage",{oParameters:P,sPageId:b}).done(r).fail(R);});};}
a.prototype=B.prototype;a.hasNoAdapter=B.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/CommonDataModel',["sap/ushell/services/CommonDataModel","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(C,A){"use strict";
function a(o,c,p,s){C.call(this,o,c,p,s);this.getAllPages=function(){return new Promise(function(r){A.sendMessageToOuterShell("sap.ushell.services.CommonDataModel.getAllPages").done(r);});};}
a.prototype=C.prototype;a.hasNoAdapter=C.hasNoAdapter;return a;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Container',["sap/ushell/services/Container","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/ushell/appRuntime/ui5/ui/UIProxy","sap/ushell/appRuntime/ui5/SessionHandlerAgent"],function(c,A,R,U,S){"use strict";
function C(){var a;this.bootstrap=function(p,m){return sap.ushell.bootstrap(p,m).then(function(b){a=sap.ushell.Container._getAdapter();sap.ushell.Container.inAppRuntime=function(){return true;};sap.ushell.Container.runningInIframe=sap.ushell.Container.inAppRuntime;sap.ushell.Container.getFLPUrl=function(i){return A.sendMessageToOuterShell("sap.ushell.services.Container.getFLPUrl",{"bIncludeHash":i});};sap.ushell.Container.getFLPUrlAsync=function(i){return sap.ushell.Container.getFLPUrl(i);};sap.ushell.Container.getRenderer=function(){return R;};sap.ushell.Container.logout=function(){return a.logout();};sap.ushell.Container.getFLPPlatform=function(){return A.sendMessageToOuterShell("sap.ushell.services.Container.getFLPPlatform");};sap.ushell.Container.extendSession=function(){S.userActivityHandler();};});};}
return new C();},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/CrossApplicationNavigation',["sap/ushell/services/CrossApplicationNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ushell/services/_AppState/AppState","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,A,a,q,L){"use strict";
function b(c,p,s){C.call(this,c,p,s);this.backToPreviousApp=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.backToPreviousApp");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.expandCompactHash",{sHashFragment:h});};this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getDistinctSemanticObjects");};this.getLinks=function(v){if(Array.isArray(v)){v.forEach(function(e){if(e[0]){delete e[0].ui5Component;}});}else{delete v.ui5Component;}return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getLinks",v);};this.getPrimaryIntent=function(S,P){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getPrimaryIntent",{sSemanticObject:S,mParameters:P});};this.getSemanticObjectLinks=function(S,P,i,o,d,e){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getSemanticObjectLinks",{sSemanticObject:S,mParameters:P,bIgnoreFormFactor:i,sAppStateKey:d,bCompactIntents:e});};this.historyBack=function(S){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.historyBack",{iSteps:S});};this.isIntentSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isIntentSupported",{aIntents:i});};this.isNavigationSupported=function(i,o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isNavigationSupported",{aIntents:i});};this.toExternal=function(o,d){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.toExternal",{oArgs:o});};this.getAppState=function(o,d){var D=new q.Deferred();A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppState",{sAppStateKey:d}).done(function(S){sap.ushell.Container.getServiceAsync("AppState").then(function(e){var f=new a(e,S._sKey,S._bModifiable,S._sData,S._sAppName,S._sACHComponent,S._bTransient);D.resolve(f);});});return D.promise();};this.resolveIntent=function(h){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.resolveIntent",{sHashFragment:h});};this.hrefForExternalAsync=function(o){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForExternal",{oArgs:o});};this.hrefForAppSpecificHashAsync=function(d){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.hrefForAppSpecificHash",{sAppHash:d});};this.isInitialNavigation=function(){L.error("'AppRuntime' does not support the 'CrossApplicationNavigation.isInitialNavigation' api. Please use 'isInitialNavigationAsync' instead");};this.isInitialNavigationAsync=function(){return A.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.isInitialNavigation",{});};}
b.prototype=C.prototype;b.hasNoAdapter=C.hasNoAdapter;return b;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/LaunchPage',["sap/ushell/services/LaunchPage","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(L,A){"use strict";
function a(c,p,s){L.call(this,c,p,s);this.getGroupsForBookmarks=function(){return A.sendMessageToOuterShell("sap.ushell.services.LaunchPage.getGroupsForBookmarks");};}
a.prototype=L.prototype;a.hasNoAdapter=L.hasNoAdapter;return a;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/Menu',["sap/ushell/services/Menu","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(M,A){"use strict";
function a(){M.call(this,arguments);this.getSpacesPagesHierarchy=function(){return new Promise(function(r){A.sendMessageToOuterShell("sap.ushell.services.Menu.getSpacesPagesHierarchy").done(r);});};}
a.prototype=M.prototype;a.hasNoAdapter=M.hasNoAdapter;return a;});
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/NavTargetResolution',["sap/ushell/services/NavTargetResolution","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(N,A){"use strict";
function a(o,c,p,s){N.call(this,o,c,p,s);this.getDistinctSemanticObjects=function(){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.getDistinctSemanticObjects");};this.expandCompactHash=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.expandCompactHash",{sHashFragment:h});};this.resolveHashFragment=function(h){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.resolveHashFragment",{sHashFragment:h});};this.isNavigationSupported=function(i){return A.sendMessageToOuterShell("sap.ushell.services.NavTargetResolution.isNavigationSupported",{aIntents:i});};}
a.prototype=N.prototype;a.hasNoAdapter=N.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellNavigation',["sap/ushell/services/ShellNavigation","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,A){"use strict";
function a(c,p,s){S.call(this,c,p,s);this.toExternal=function(o,C,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{oArgs:o,bWriteHistory:w});};this.toAppHash=function(b,w){A.sendMessageToOuterShell("sap.ushell.services.ShellNavigation.toExternal",{sAppHash:b,bWriteHistory:w});};}
a.prototype=S.prototype;a.hasNoAdapter=S.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","../../../ui5service/_ShellUIService/shelluiservice.class.factory","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppRuntimeService"],function(S,a,b,d,A,c){"use strict";var s=d({serviceRegistry:S,serviceFactory:a,service:b});var l,r=false,B;
var e=s.extend("sap.ushell.appRuntime.services.ShellUIService",{
setTitle:function(t){l=t;return c.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setTitle",{sTitle:t});},
getTitle:function(){return l;},
setHierarchy:function(h){return c.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setHierarchy",{aHierarchyLevels:h});},
setRelatedApps:function(R){return c.sendMessageToOuterShell("sap.ushell.services.ShellUIService.setRelatedApps",{aRelatedApps:R});},
setBackNavigation:function(C){if(!r){r=true;A.registerCommHandlers({"sap.ushell.appRuntime":{oServiceCalls:{handleBackNavigation:{executeServiceCallFn:function(o){if(B){B();}else{window.history.back();}}}}}});}B=C;c.sendMessageToOuterShell("sap.ushell.ui5service.ShellUIService.setBackNavigation",{callbackMessage:{service:"sap.ushell.appRuntime.handleBackNavigation"}});}
});
return e;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/UserInfo',["sap/ushell/services/UserInfo","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath"],function(U,A,q,L,O){"use strict";
function a(o,c){U.call(this,o,c);this.getThemeList=function(){return A.sendMessageToOuterShell("sap.ushell.services.UserInfo.getThemeList");};this.updateUserPreferences=function(){return A.sendMessageToOuterShell("sap.ushell.services.UserInfo.updateUserPreferences",{language:sap.ushell.Container.getUser().getLanguage()});};this.getLanguageList=function(){return A.sendMessageToOuterShell("sap.ushell.services.UserInfo.getLanguageList");};}
O.set("sap.ushell.services.UserInfo",a);a.prototype=U.prototype;a.hasNoAdapter=U.hasNoAdapter;return a;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/ContainerAdapter',["sap/base/Log","sap/ushell/User","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(L,U,q,O){"use strict";var C=function(s,p,c){var u,l,k,K;this.load=function(){var b;l=O.get("config.systemProperties.logoutUrl",c);k=O.get("config.systemProperties.sessionKeepAlive.url",c);K=O.get("config.systemProperties.sessionKeepAlive.method",c);b=q.extend(true,{id:""},O.get("config.userProfile.defaults",c));u=new U(b);a(b);return new q.Deferred().resolve().promise();};this.getSystem=function(){return s;};this.getUser=function(){return u;};this.logout=function(){var d=new q.Deferred();try{if(typeof l==="string"&&l.length>0){this._logoutViaHiddenIFrame(d,l);setTimeout(d.resolve,4000);}else{d.resolve();}}catch(e){L.error("logout from iframe "+document.URL+" failed",e,"sap.ushell.appRuntime.ui5.SessionHandlerAgent");d.resolve();}return d.promise();};this._logoutViaHiddenIFrame=function(d,b){var f=document.createElement("iframe"),S=b.replace(/"/g,"\\\"");window.addEventListener("message",function(e){if((e.data&&e.data.url)===b){d.resolve();}});f.style.visibility="hidden";f.setAttribute("src",b);function o(){this.contentWindow.parent.postMessage({url:S,request_id:"dummy-logout-id"},"*");}f.addEventListener("load",o);f.addEventListener("error",o);document.body.appendChild(f);};this.sessionKeepAlive=function(){if(typeof k==="string"&&k.length>0&&typeof K==="string"&&K.length>0){var x=new XMLHttpRequest();x.open(K,k,true);x.onreadystatechange=function(){if(this.readyState===4){L.debug("Server session was extended");}};x.send();}};function a(S){var o=sap.ui.getCore(),b=o.getConfiguration(),f=b.getFormatSettings();if(S.sapDateFormat){f.setLegacyDateFormat(S.sapDateFormat);}if(S.sapDateCalendarCustomizing){f.setLegacyDateCalendarCustomizing(S.sapDateCalendarCustomizing);}if(S.sapNumberFormat){f.setLegacyNumberFormat(S.sapNumberFormat);}if(S.sapTimeFormat){f.setLegacyTimeFormat(S.sapTimeFormat);}if(typeof S.currencyFormats==="object"){f.addCustomCurrencies(S.currencyFormats);}}};return C;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/EmptyAdapter',[],function(){"use strict";var E=function(){this.getSite=function(){return new jQuery.Deferred().resolve({}).promise();};};return E;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/services/adapters/Ui5ComponentLoaderAdapter',[],function(){"use strict";
function U(){}
return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/ui/UIProxy',["sap/ushell/appRuntime/ui5/renderers/fiori2/Renderer","sap/m/Button","sap/base/util/ObjectPath"],function(R,B,O){"use strict";
function U(){O.set("sap.ushell.ui.shell.ShellHeadItem",function(p){var t=this;Object.keys(p).forEach(function(P){t[P]=p[P];t["get"+P[0].toUpperCase()+P.slice(1)]=function(){return p[P];};});R.createShellHeadItem(p);});}
return new U();});
sap.ui.predefine('sap/ushell/bootstrap/SchedulingAgent',["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(F,E,a,l,s,b){"use strict";var L={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var S={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var c={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){s.clear();l.clearHistory();s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var d=F.initializeSchedule();d.then(function(e){if(!e){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Configuration error!");return;}E.initializeStepDoneListener(this);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived();}.bind(this));},_processStepConfiguration:function(d){var o={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(d.oConfig.loadingMode===L.CONTINUE_ON_EVENT){o.sStepType=L.CONTINUE_ON_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.continueOnEvent&&d.oConfig.continueOnEvent.eventName;o.oData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName&&o.oData.stepName);}else if(d.oConfig.loadingMode===L.BY_EVENT){o.sStepType=L.BY_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.byEvent&&d.oConfig.byEvent.eventName;o.oData.eventData={};o.oData.eventData.data=d.oConfig.byEvent.eventData;o.oData.eventData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName);}else if(d.oConfig.loadingMode===L.BY_COMPONENT_CREATE){o.sStepType=L.BY_COMPONENT_CREATE;o.sStepName=d.oContent.LoadingStep;o.oData=d.oConfig.byComponentCreate&&d.oConfig.byComponentCreate.ui5ComponentOptions||{};o.bConfigOk=!!o.oData;}else if(d.oConfig.loadingMode===L.BY_REQUIRE){o.sStepType=L.BY_REQUIRE;o.sStepName=d.oContent.LoadingStep;o.oData={};o.oData.sPath=d.oConfig.byRequire.path;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!o.oData.sPath;}else if(d.oConfig.loadingMode===L.WAIT_IN_MS){o.sStepType=L.WAIT_IN_MS;o.sStepName=d.oContent.LoadingStep;o.oData.iWaitingTime=d.oConfig.waitInMs&&d.oConfig.waitInMs.waitingTime;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.iWaitingTime&&o.oData.sStepName);}return o;},dumpState:function(){s.dump();},dumpHistory:function(){l.dumpHistory();},dumpSchedule:function(){F.dumpSchedule();},dumpAll:function(){l.dumpHistory();F.dumpSchedule();s.dump();},eventReceived:function(){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=F.getNextLoadingStep();if(n.sStatus===S.ERROR){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.DONE){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Done,"Loading finished");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.BLOCKDONE){}if(n.sStatus===S.SKIPPED){}if(n.sStatus===S.STEP){var o=this._processStepConfiguration(n);if(!o.bConfigOk){s.setForLoadingStep(o.sStepName,s.id.loadingStep.Abort,"","Step configuration error");s.setForLoadingStep(o.sStepName,s.id.loadingStep.Skipped,"","Step configuration error");s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,o,"Step configuration error!");}else if(o.sStepType===L.CONTINUE_ON_EVENT){E.listenToEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.eventName,"continueOnEvent step sent to Event Processor");}else if(o.sStepType===L.BY_EVENT){a.loadComponentByEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byEvent step sent to FLP Loader");}else if(o.sStepType===L.WAIT_IN_MS){a.waitInMs(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader");}else if(o.sStepType===L.BY_REQUIRE){var p=a.loadComponentByRequire(o.oData.sPath);this.oPathsLoading[o.sStepName]=p;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.sPath,"byRequire step sent to FLP Loader");var d=o.sStepName;p.then(function(){s.setForLoadingStep(d,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[d];b.emit("StepDone",d);}.bind(this),function(){s.setForLoadingStep(d,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[d];b.emit("StepFailed",d);}.bind(this));}else if(o.sStepType===L.BY_COMPONENT_CREATE){var P=a.loadComponentByComponentCreate(o);this.oComponentsLoading[o.sStepName]=P;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byComponentCreate step sent to FLP Loader");P.then(function(e){s.setForLoadingStep(e,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[e];b.emit("StepDone",e);}.bind(this),function(e){s.setForLoadingStep(e,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[e];b.emit("StepFailed",e);}.bind(this));}}}while(n.sStatus!==S.WAIT);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Waiting,"Agent waits");}};return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/EventProcessor',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(I,E){"use strict";var a={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(b){this.SchedulingAgent=b;this.aDoableObjects=[E.on("StepDone").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this)),E.on("StepFailed").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this))];},listenToEvent:function(e){E.once(e.eventName).do(function(){I.setForLoadingStep(e.stepName,I.id.loadingStep.Done,e.eventName,"Event received");this.SchedulingAgent.eventReceived();}.bind(this));},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(d){d.off();});},setTimeOut:function(){}};return a;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPLoader',["sap/ushell/EventHub","sap/ui/core/Component"],function(E,C){"use strict";var F={loadComponentByEvent:function(c){E.emit(c.eventName,c.eventData);},loadComponentByComponentCreate:function(s){return C.create(s.oData).then(function(){return Promise.resolve(s.sStepName);},function(){return Promise.reject(s.sStepName);});},loadComponentByRequire:function(p){return new Promise(function(r,R){sap.ui.require([p],function(d){r(d);});});},waitInMs:function(w){setTimeout(function(){E.emit("StepDone",w.sStepName);},w.iWaitingTime);},directLoading:function(){}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(s,L,a,C){"use strict";var S={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var b="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var c="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";
function g(){return C.last("/core/shell/model/currentState/stateName");}
var F={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var p=L.loadResource(c,{async:true});var d=L.loadResource(b,{async:true});var P=Promise.all([p,d]).then(function(v){var o=v[0];var l=v[1];var e=this._validateConfig(l,o);if(e){this.oSchedule.oBlocks=l.LoadingBlocks;this.oSchedule.oSteps=o;this.oSchedule.aBlockOrder=l.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.Initialized,"Schedule validated");}else{s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.WrongConfiguration,"Configuration error");}return e;}.bind(this));return P;},getNextLoadingStep:function(){var o={sStatus:S.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var l=this._startLoadingBlock();if(l){o.sStatus=S.Done;return o;}}var d=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var e=this.oSchedule.aBlockOrder.indexOf(d);var n=this.oSchedule.aBlockOrder[e+1];if(this.oSchedule.oBlocks[d].bCanBeLoadedConcurrently&&n){this._startLoadingBlock();}var A=true;var f=false;var h,j,k,m,p,q,I,r,t;for(var i=0;i<this.oSchedule.aBlocksLoading.length;i++){h=this.oSchedule.aBlocksLoading[i];j=this.oSchedule.oBlocks[h];k=j.iStepIndex;m=j.LoadingSteps[k];p=k===j.LoadingSteps.length-1;q=this._checkAndUpdateAsyncQueue(j);t=s.isStepLoaded(m.LoadingStep)||s.isStepSkipped(m.LoadingStep);r=s.isStepLoading(m.LoadingStep);A=q.bAllStepsDone&&t;f=q.bAStepIsLoading||r;if((r&&!m.canBeLoadedAsync)||(f&&p)){o.sStatus=S.Wait;continue;}if(!p||!t&&!r){if(t||(m.canBeLoadedAsync&&r)){k+=1;}o=this._prepareStepForLoading(j,h,k);}if(A&&p){I=this.oSchedule.aBlocksLoading.indexOf(h);this.oSchedule.aBlocksLoading.splice(I,1);o.sStatus=S.BlockDone;s.setForLoadingBlock(h,s.id.loadingBlock.Done,"","Block removed from loading queue");}if(o.sStatus!==S.wait){break;}}return o;},dumpSchedule:function(){a.debug(JSON.stringify(this.oSchedule));},_loadingIsEnabled:function(d){var e;if(Array.isArray(d.oConfig.excludedFLPStates)){if(d.oConfig.excludedFLPStates.indexOf(g())>-1){return false;}}if(Array.isArray(d.oConfig.mandatoryFLPStates)&&d.oConfig.mandatoryFLPStates.length!==0){if(d.oConfig.mandatoryFLPStates.indexOf(g())===-1){return false;}}function f(o){return o.path&&C.last(o.path)!==o.assertionValue;}if(d.oConfig.configSwitch){e=[].concat(d.oConfig.configSwitch);if(e.some(f)){return false;}}return true;},_checkAndUpdateAsyncQueue:function(d){var t=[];var e,f,h;var A=true;var j=false;for(var i=0;i<d.aAsyncStepsLoading.length;i++){h=d.aAsyncStepsLoading[i];e=s.isStepLoaded(h)||s.isStepSkipped(h);f=s.isStepLoading(h);if(f){t.push(h);}A=A&&e;j=j||f;}d.aAsyncStepsLoading=t;return{bAllStepsDone:A,bAStepIsLoading:j};},_startLoadingBlock:function(){var l=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;s.setForLoadingBlock(n,s.id.loadingBlock.Prepared,"","Block added to the loading queue.");}else{l=true;}return l;},_prepareStepForLoading:function(d,e,f){var h;var o={sStatus:S.Step,oContent:d.LoadingSteps[f],oConfig:this.oSchedule.oSteps[d.LoadingSteps[f].LoadingStep]};if(!this._loadingIsEnabled(o)){o.sStatus=S.Skipped;d.iStepIndex=f;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Skipped,"","Step set to skipped");return o;}var D=this._checkDependencies(o,e);if(D.bMissing){o.sStatus=S.Error;}else if(D.bAllLoaded){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step prepared for control unit");h=o.oContent.canBeLoadedAsync;d.iStepIndex=f;if(h){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step set on the async loading queue");d.aAsyncStepsLoading.push(o.oContent.LoadingStep);}}else{o.sStatus=S.Wait;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.WaitingForDependencies,"","Step missing dependencies");}return o;},_checkDependencies:function(d,e){var D={bAllLoaded:true,bMissing:false};if(d.oConfig.Dependencies){for(var i=0;i<d.oConfig.Dependencies.length;i++){D.bAllLoaded=D.bAllLoaded&&s.isStepLoaded(d.oConfig.Dependencies[i]);if(!s.isStepLoaded(d.oConfig.Dependencies[i])&&!s.isStepLoading(d.oConfig.Dependencies[i])){s.setForLoadingStep(d.oContent.LoadingStep,s.id.loadingStep.Aborted,d.oConfig.Dependencies[i],"Missing a dependency");s.setForLoadingBlock(e,s.id.loadingBlock.Aborted,d.oConfig.Dependencies[i],"A step is missing a dependency");s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");D.bMissing=true;D.bAllLoaded=false;break;}}}return D;},_validateConfig:function(l,d){var e=l&&l.OrderOfLoadingBlocks&&l.LoadingBlocks&&l.OrderOfLoadingBlocks.length&&d;if(!e){return false;}var B=l.OrderOfLoadingBlocks.reduce(function(f,h){f=f&&l.LoadingBlocks[h];if(f){var o=l.LoadingBlocks[h];var i=true;if(o.LoadingSteps){var k;for(var j=0;j<o.LoadingSteps.length;j++){k=o.LoadingSteps[j].LoadingStep;i=i&&d[k];}}f=f&&i;}return!!f;},true);return B;}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/logger',["sap/base/Log"],function(B){"use strict";var h=[];var v=true;var C="FLPScheduler";return{getHistory:function(){return h;},verboseOn:function(){v=true;return(v===true);},verboseOff:function(){v=false;return(v===false);},isVerboseOn:function(){return(v===true);},clearHistory:function(){h.length=0;},dumpHistory:function(i){var _;if(i){_=h.filter(function(e){return e.id===i;});console.table(_);}else{console.table(h);}return _||h;},logError:function(e){B.error(this.stateToString(e),undefined,C);h.push(e);return true;},logWarning:function(w){if(v){B.warning(this.stateToString(w),C);h.push(w);}return v;},logStatus:function(s){if(v){B.info(this.stateToString(s),C);h.push(s);}return v;},stateToString:function(s){return"FLP Bootstrap Scheduling Agent :: "+s.type+" '"+s.id+"' /"+s.status+((s.remark)?"/ : "+s.remark:"/");}};});
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/state',["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def-dev',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.configure.ui5.extractLibs","../common/common.load.bootstrapExtension"],function(c,C,f,o,e,l){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();l(u);});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm-def',["./cdm.constants","../common/common.configure.ui5","../common/common.configure.ushell","../common/common.override.registermodulepath","../common/common.load.core-min","../common/common.configure.ui5.extractLibs","../common/common.load.bootstrapExtension"],function(c,C,f,o,l,e,L){"use strict";if(performance&&performance.mark){performance.mark("FLP first paint!");}var u=f({defaultUshellConfig:c.defaultConfig});C({ushellConfig:u,libs:e(u),platform:"cdm"});o();l("sap.ushell.bootstrap");L(u);});
sap.ui.predefine('sap/ushell/bootstrap/cdm/cdm.constants',["../common/common.util"],function(c){"use strict";return c.deepFreeze({defaultConfig:{defaultRenderer:"fiori2",ushell:{home:{tilesWrappingType:"Hyphenated"}},renderers:{fiori2:{componentData:{config:{sessionTimeoutReminderInMinutes:5,sessionTimeoutIntervalInMinutes:-1,sessionTimeoutTileStopRefreshIntervalInMinutes:15,enableAutomaticSignout:true,enableHideGroups:true,enablePersonalization:true,enableAbout:true,enableTagFiltering:false,enableSearch:false,enableSetTheme:true,enableAccessibility:true,enableHelp:false,enableUserDefaultParameters:true,enableRecentActivity:true,enableRecentActivityLogging:true,preloadLibrariesForRootIntent:false,applications:{"Shell-home":{enableEasyAccess:false,enableTileActionsIcon:false,enableHideGroups:false}},rootIntent:"Shell-home"}}}},services:{Container:{adapter:{config:{userProfile:{metadata:{ranges:{theme:{sap_fiori_3:{displayName:"SAP Quartz Light",themeRoot:""},sap_fiori_3_dark:{displayName:"SAP Quartz Dark",themeRoot:""},sap_fiori_3_hcb:{displayName:"SAP Quartz HCB",themeRoot:""},sap_fiori_3_hcw:{displayName:"SAP Quartz HCW",themeRoot:""}}}},defaults:{theme:"sap_belize"}}}}},Personalization:{adapter:{module:"sap.ushell.adapters.local.PersonalizationAdapter"}},AppState:{adapter:{module:"sap.ushell.adapters.local.AppStateAdapter"},config:{transient:true}},NavTargetResolution:{config:{allowTestUrlComponentConfig:false,enableClientSideTargetResolution:true},adapter:{module:"sap.ushell.adapters.local.NavTargetResolutionAdapter"}},SupportTicket:{config:{enabled:false},adapter:{module:"sap.ushell.adapters.local.SupportTicketAdapter"}},UserInfo:{adapter:{module:"sap.ushell.adapters.local.UserInfoAdapter"}},UserDefaultParameterPersistence:{adapter:{module:"sap.ushell.adapters.local.UserDefaultParameterPersistenceAdapter"}},NavigationDataProvider:{adapter:{module:"sap.ushell.adapters.cdm.ClientSideTargetResolutionAdapter"}},VisualizationDataProvider:{adapter:{module:"sap.ushell.adapters.cdm.v3.LaunchPageAdapter"}}},ui5:{libs:{"sap.ui.core":true,"sap.m":true,"sap.ushell":true}}}});});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.path',[],function(){"use strict";return sap.ui.require.toUrl("");});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.script',["./common.constants"],function(c){"use strict";var b=document.getElementById(c.bootScriptId);if(!b){b=document.getElementById(c.bwcBootScriptId);}return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.boot.task',["./common.constants","../common/common.configure.ui5language","../common/common.configure.ui5theme","../common/common.configure.ui5datetimeformat","../common/common.configure.xhrlogon","../common/common.load.ui5theme","../common/common.load.xhrlogon","sap/base/util/UriParameters","sap/base/util/ObjectPath","sap/ushell/services/Container"],function(c,C,f,a,o,l,x,U,O){"use strict";
function b(u,d){var e,g=window[c.ushellConfigNamespace];C(g);f(g);a(g);if(new U(window.location.href).get("sap-ushell-cdm-loadFioriTheme")===true){e=O.get("services.Container.adapter.config.userProfile.defaults.bootTheme",g);l(e);}window.sap.ushell.bootstrap(u).then(function(){o.start(sap.ushell.Container,x);}).then(d);}
return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5.extractLibs',["sap/base/Log","sap/base/util/isPlainObject"],function(L,i){"use strict";return function r(u){if(!u||!u.ui5||!u.ui5.libs){return[];}if(!i(u.ui5.libs)){L.error("Invalid ushell configuration: /ui5/libs must be an object");return[];}return Object.keys(u.ui5.libs).filter(function(k){return this[k];},u.ui5.libs);};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5',["sap/base/Log","./common.boot.task","./common.load.launchpad","./common.read.ui5theme.from.config"],function(L,b,l,g){"use strict";return c;
function c(s){if(!s||!s.libs||!Array.isArray(s.libs)){L.error("Mandatory settings object not provided",null,"sap/ushell/bootstap/common/common.configure.ui5");return{};}var S=window["sap-ui-config"]||(window["sap-ui-config"]={}),u=s&&s.platform,U=s.ushellConfig,a=s.theme?s.theme:g(U).theme;if(U&&U.modulePaths){var m=Object.keys(U.modulePaths).reduce(function(r,M){r[M.replace(/\./g,"/")]=U.modulePaths[M];return r;},{});sap.ui.loader.config({paths:m});}S.bindingsyntax="complex";S.preload="async";S.compatversion="1.16";S.libs=s.libs.join();S.theme=a;S["xx-boottask"]=s.bootTask||b.bind(null,u);S.oninit=s.onInitCallback||l;return S;}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5datetimeformat',["sap/base/Log"],function(L){"use strict";return c;
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var m="Date Format is incorrectly set for the User";var M="Time Format is incorrectly set for the User";try{var s=U&&U.defaults&&U.defaults.sapDateFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyDateFormat(s);}catch(e){L.error(m,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}try{var S=U&&U.defaults&&U.defaults.sapTimeFormat;sap.ui.getCore().getConfiguration().getFormatSettings().setLegacyTimeFormat(S);}catch(e){L.error(M,e.stack,"sap/ushell/bootstrap/common/common.configure.ui5datetimeformat");}}
},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5language',[],function(){"use strict";
function c(u){var U=u&&u.services&&u.services.Container&&u.services.Container.adapter&&u.services.Container.adapter.config&&u.services.Container.adapter.config.userProfile;var l=U&&U.defaults&&U.defaults.languageBcp47;var s=U&&U.defaults&&U.defaults.language;if(l){sap.ui.getCore().getConfiguration().setLanguage(l,s);}}
return c;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ui5theme',["./common.read.ui5theme.from.config","sap/base/util/ObjectPath","sap/base/Log"],function(g,O,L){"use strict";
function s(u){var t=O.get("services.Container.adapter.config.userProfile.metadata.ranges.theme",u);if(!t){return;}O.create("services.UserInfo.adapter.config.themes",u);u.services.UserInfo.adapter.config.themes=Object.keys(t).map(function(k){return{"id":k,"name":t[k].displayName,"root":t[k].themeRoot};});}
function c(u){var C=O.get("services.Container.adapter.config",u),v=g(u);s(u);if(v.theme){C.userProfile.defaults.bootTheme=v;}else{var d=O.get("userProfile.defaults.theme",C),p=O.get("userProfilePersonalization.theme",C);L.error("No valid boot theme could be determined: personalizedTheme = '"+p+"' default theme = '"+d+"'",null,"common.configure.ui5theme");}}
return c;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.ushell',["./common.constants","./common.debug.mode","./common.read.metatags","./common.util","./common.read.ushell.config.from.url","sap/base/util/ObjectPath","sap/base/Log","sap/base/util/extend"],function(c,d,m,u,C,O,L,e){"use strict";var S="sap/ushell/bootstrap/common/common.boot.script";
function f(U,g){var p;if(!U||!g){return;}p=O.get(g,U);if(p&&p.items){e(p,p.items);delete p.items;delete p.__metadata;}}
function a(M,D,g,h){var i=c.ushellConfigNamespace,j=M,U,o;h=h||[];if(!window[i]){window[i]={};}U=window[i];if(D){j=[D].concat(M);}j.forEach(function(k){u.mergeConfig(U,k,true);});h.forEach(function(k){u.mergeConfig(U,k,true);});o=C.getConfig();if(o){u.mergeConfig(U,o,true);}U["sap-ui-debug"]=g;L.info("finally applied sap-ushell-config",JSON.stringify(U),S);}
function s(g){var h=O.get("ushell.spaces.configurable",g);if(h){var i=O.get("services.Container.adapter.config.userProfilePersonalization.spacesEnabled",g);if(i===true){O.set("ushell.spaces.enabled",true,g);}else if(i===false){O.set("ushell.spaces.enabled",false,g);}}}
function b(o){var U;var D=o&&o.defaultUshellConfig;var M=m.readMetaTags(c.configMetaPrefix);a(M,D,d,null);U=window[c.ushellConfigNamespace];f(U,"services.Container.adapter.config.userProfilePersonalization");s(U);return U;}
return b;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.configure.xhrlogon',["sap/ushell/bootstrap/common/common.util","sap/base/Log"],function(u,L){"use strict";var m={start:s,initXhrLogonIgnoreList:i,createUi5ConnectedXhrLogger:c};return m;
function c(){return["error","warning","info","debug"].reduce(function(x,l){x[l]=function(M){return L[l](M);};return x;},{});}
function i(x){var o=u.getLocationOrigin(),U=sap.ui.require.toUrl("");if(U&&U.indexOf(o+"/")===-1){x.ignore.add(U);}}
function s(S,x){x.start();m.initXhrLogonIgnoreList(x.XHRLogonManager.getInstance());XMLHttpRequest.logger=c();S.oFrameLogonManager=x.FrameLogonManager.getInstance();}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.constants',[],function(){"use strict";return{uiDebugKey:"sap-ui-debug",bootScriptId:"sap-ui-bootstrap",bwcBootScriptId:"sap-ushell-bootstrap",configMetaPrefix:"sap.ushellConfig",ushellConfigNamespace:"sap-ushell-config"};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};
function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,j){if(!o||!o.hasOwnProperty(j)){return{};}return o[j];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}function f(){var p="renderers/fiori2/componentData/config/enableBackGroundShapes";var E=!!a(G,p);if(E){E=!b("ushell/spaces/enabled",false);}d[p]=E;return E;}function h(){return b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true));}function i(){var j=b("renderers/fiori2/componentData/config/rootIntent","");if(j){j="#"+j;}return j;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),SupportTicket:b("services/SupportTicket/config/enabled",false)},services:{allMyApps:{enabled:b("services/AllMyApps/config/enabled",true),showHomePageApps:b("services/AllMyApps/config/showHomePageApps",true),showCatalogApps:b("services/AllMyApps/config/showCatalogApps",true)}},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+"),enableWdaCompatibilityMode:b("ushell/navigation/wdaCompatibilityMode",false)},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false),myHome:{userEnabled:true,enabled:b("startupConfig/spacesMyhome",false),myHomeSpaceId:b("startupConfig/spacesMyhomeSpaceid",null),myHomePageId:b("startupConfig/spacesMyhomePageid",null),presetSectionId:"3WO90XZ1DX1AS32M7ZM9NBXEF"},extendedChangeDetection:{enabled:b("ushell/spaces/extendedChangeDetection/enabled",true)},homeNavigationTarget:b("renderers/fiori2/componentData/config/homeNavigationTarget",undefined)},menu:{enabled:b("ushell/menu/enabled",false)||b("ushell/spaces/enabled",false),visibleInAllStates:b("ushell/menu/visibleInAllStates",false)},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},contentProviders:{providerInfo:{show:b("ushell/contentProviders/providerInfo/show",false)}},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,newDesignSwitchVisible:b("renderers/fiori2/componentData/config/sapHorizonEnabled",false)&&h(),newDesignSwitchActive:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),homeUri:i(),title:""},themePreview:{sapHorizonEnabled:b("renderers/fiori2/componentData/config/sapHorizonEnabled",false)},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:b("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:h(),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:b("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),enableFeaturePolicyInIframes:b("renderers/fiori2/componentData/config/enableFeaturePolicyInIframes",true),model:{enableSAPCopilotWindowDocking:undefined,enableBackGroundShapes:f(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:null,account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},currentSpaceAndPage:undefined}},home:{disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:h()||b("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/applications/Shell-home/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:b("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:b("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:b("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)}}};return C;}
function g(){return d;}
return{createConfigContract:c,getDefaultConfiguration:g};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.debug.mode',["./common.constants"],function(c){"use strict";var s;var d=/[?&]sap-ui-debug=(true|x|X)(&|$)/.test(window.location.search);if(!d){try{s=window.localStorage.getItem(c.uiDebugKey);d=!!s&&/^(true|x|X)$/.test(s);}catch(e){}}return d;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.appruntime-min',["./common.debug.mode","./common.load.script"],function(d,l){"use strict";
function a(p){var u=sap.ui.require.toUrl((p).replace(/\./g,"/")),i;if(d){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});}else{for(i=0;i<4;i++){l(u+"/appruntime-min-"+i+".js");}}}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.bootstrapExtension',["sap/base/util/ObjectPath"],function(O){"use strict";
function l(u){var p=O.get("bootstrap.extensionModule",u);if(!p||typeof p!=="string"){return;}p=p.replace(/\./g,"/");sap.ui.require([p],function(e){if(e&&typeof e==="function"){e();}});}
return l;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.core-min',["./common.debug.mode","./common.load.script"],function(d,l){"use strict";
function a(p){var u=sap.ui.require.toUrl((p).replace(/\./g,"/")),i;if(d){sap.ui.require(["sap/ui/core/Core"],function(c){c.boot();});}else{for(i=0;i<4;i++){l(u+"/core-min-"+i+".js");}}}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.launchpad',[],function(){"use strict";return l;
function l(d){sap.ui.require(["sap/ushell/iconfonts","sap/ushell/services/AppConfiguration"],function(I,C){window.sap.ushell.Container.createRenderer(null,true).then(function(c){c.placeAt(d||"canvas","only");});I.registerFiori2IconFont();});}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/Device","sap/base/util/extend"],function(C,J,D,E){"use strict";var _;
function a(){var s=C.last("/core"),i={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:s.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:s.extension.enableHelp,enableTileActionsIcon:D.system.desktop?s.home.enableTileActionsIcon:false};i=E({},s.catalog,s.home,i);_=new J(i);_.setSizeLimit(10000);}
function b(m){_.setProperty("/isPhoneWidth",!m.matches);}
function c(){var m=window.matchMedia("(min-width: 800px)");if(m.addListener){m.addListener(b);b(m);}}
return{getModel:function(){if(!_){a();c();}return _;},_resetModel:function(){if(_!=undefined){_.destroy();_=undefined;}}};},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.script',[],function(){"use strict";
function l(f,i,I,a){return new Promise(function(r,b){function c(e){e.target.removeEventListener("load",c);e.target.removeEventListener("error",c);if(e.type==="error"){b();}r();}var s=document.createElement("script");s.src=f;s.async=!!a;s.addEventListener("load",c);s.addEventListener("error",c);if(i){s.id=i;}if(I){s.defer=I;}document.head.appendChild(s);});}
return l;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.ui5theme',["sap/ushell/bootstrap/common/common.boot.path","sap/base/Log","sap/ui/dom/includeStylesheet"],function(b,L,i){"use strict";
function a(B){if(!B||!B.theme){L.error("No boot theme could be applied",null,"common.load.ui5theme");return;}var S=window["sap-ui-config"]||{},A=c(B.root),t=B.theme,h=S.theme!==t;d(t,A||(b+"/"));if(A||h){var C=sap.ui.getCore();var f=[t,A].filter(function(s){return s;});C.applyTheme.apply(C,f);}L.debug("Boot theme applied: theme = '"+B.theme+"' theme root = '"+B.root+"'",null,"common.load.ui5theme");}
function c(t){if(t){return t+"/UI5/";}return undefined;}
function d(t,T){var l=sap.ui.getCore().getConfiguration().getLanguage(),s=T+"sap/fiori/themes/"+t,I=e(l),f=I?"library-RTL.css":"library.css";i(s+"/"+f,"sap-ui-theme-sap.fiori");}
function e(l){var A=["ar","fa","he","iw"];l=l.toLowerCase().substring(0,2);return A.indexOf(l)>=0;}
return a;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.override.registermodulepath',["jquery.sap.global","sap/ui/thirdparty/URI"],function(q,U){"use strict";
function o(){var R=q.sap.registerModulePath;q.sap.registerModulePath=function(m,u){if(typeof u==="object"){u.url=r(u.url);}else if(typeof u==="string"){u=r(u);}R(m,u);};}
function r(u){var m,s,c,a;if(typeof u!=="string"||u===""||b(u)){return u;}function b(e){var f=new U(e),p=f.path();if(f.is("absolute")){return false;}if(p&&p.charAt(0)==="/"){return false;}return true;}m=u.match(/(.*)(\/~[\w-]+~[A-Z0-9]?)(.*)/);if(m){s=m[1];c=m[2];a=m[3];}function n(e){return new U(e).normalizePathname().toString();}function d(p){var S=new U(p).segment(),i,P=0;for(i=0;i<S.length&&P>=0;i+=1){if(S[i]===".."){P=P-1;}else{P=P+1;}}return P<0;}if(c){if(a&&d(a)){u=s+a;}}return n(u);}
return o;});
sap.ui.predefine('sap/ushell/bootstrap/common/common.preload.module',["sap/ushell/bootstrap/common/common.load.script"],function(l){"use strict";
function p(r){l(r+"/sap/ushell/components/flp/Component-preload.js",null,null,true);}
function P(r){l(r+"/sap/fiori/flp-controls.js",null,null,true).then(function(){sap.ui.predefine("sap/fiori/flp-controls",function(){},false);});}
function f(r){P(r);p(r);}
return{fnPreloadFlpComponent:p,fnPreloadFlpControls:P,fnPreloadHomeBundle:f};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.metatags',["sap/base/Log"],function(L){"use strict";
function r(m,p){var s="meta[name^='"+m+"']:not([name=''])";var M=document.querySelectorAll(s);var S="sap/ushell/bootstrap/common/common.read.metatags";var i=[];p=p||JSON.parse;Array.prototype.forEach.call(M,function(o){try{i.push(p(o.content));}catch(e){L.error(e.message,e.stack,S);}});return i;}
return{readMetaTags:r};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.ui5theme.from.config',["sap/base/util/ObjectPath"],function(O){"use strict";return g;
function e(u){var c=O.get("services.Container.adapter.config",u);return{sDefaultTheme:O.get("userProfile.defaults.theme",c),sPersonalizedTheme:O.get("userProfilePersonalization.theme",c),oRangeTheme:O.get("userProfile.metadata.ranges.theme",c)};}
function g(u){var t=e(u),p=t.sPersonalizedTheme,r=t.oRangeTheme,d=t.sDefaultTheme;if(t.oRangeTheme){if(Object.keys(r).indexOf(p)>-1){var P=r[p]||{};return{theme:p,root:P.themeRoot};}var D=r[d]||{};return{theme:d,root:D.themeRoot};}var a=p||d;return{theme:a,root:""};}
});
sap.ui.predefine('sap/ushell/bootstrap/common/common.read.ushell.config.from.url',["sap/base/util/ObjectPath"],function(O){"use strict";var b={"renderers/fiori2/componentData/config/enablePersonalization":[true],"renderers/fiori2/componentData/config/sessionTimeoutReminderInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes":[],"renderers/fiori2/componentData/config/sessionTimeoutTileStopRefreshIntervalInMinutes":[],"renderers/fiori2/componentData/config/enableAutomaticSignout":[false],"services/Container/adapter/config/id":[],"services/Container/adapter/config/firstName":[],"services/Container/adapter/config/lastName":[],"services/Container/adapter/config/fullName":[],"services/Container/adapter/config/userProfile/defaults/id":[],"services/Container/adapter/config/userProfile/defaults/firstName":[],"services/Container/adapter/config/userProfile/defaults/lastName":[],"services/Container/adapter/config/userProfile/defaults/fullName":[]};
function a(c,e){var f="",B,i;if(e.namespace){f=e.namespace+"/";}f+=e.propertyName;B=c[f];if(!B){return false;}if(Array.isArray(B)){if(B.length===0){return true;}for(i=0;i<B.length;i+=1){if(B[i]===e.value){return true;}}return false;}throw new Error("Black list entry '"+f+"'has an unknown type");}
function p(v){var n;if(v==="false"){return false;}if(v==="true"){return true;}n=Number.parseFloat(v);if(!Number.isNaN(n)){return n;}return v;}
function g(w){var P,o,c=[],f={},s=w.search.replace("+"," ");P=/[?&]sap-ushell-xx-overwrite-config=([^&$]*)(&|$)/.exec(s);if(P===null){return{};}o=P[1].split(",");o.forEach(function(C){var d=decodeURIComponent(C).split(":");var n=/^\/?(.*)\/([^/]*)$/.exec(d[0]);var e;if(n===null){return;}e={namespace:n[1],propertyName:n[2],value:p(decodeURIComponent(d[1]))};if(a(b,e)){return;}c.push(e);});c.forEach(function(d){var v=d.value;var n=d.namespace.replace(/\//g,".");var N=O.get(n,f);if(N===undefined){O.set(n,{},f);N=O.get(n,f);}N[d.propertyName]=v;});return f;}
return{getConfig:g.bind(null,window.location),_getConfigFromWindowLocation:g,_isBlacklisted:a};});
sap.ui.predefine('sap/ushell/bootstrap/common/common.util',[],function(){"use strict";
function d(o){Object.keys(o).filter(function(p){return typeof o[p]==="object";}).forEach(function(p){o[p]=d(o[p]);});return Object.freeze(o);}
function g(){return location.protocol+"//"+location.host;}
function e(p){if((typeof p==="string")&&p.charAt(p.length-1)!=="/"){return p+"/";}return p;}
function m(M,c,C){var a;if(!c){return;}a=C?JSON.parse(JSON.stringify(c)):c;Object.keys(a).forEach(function(k){if(typeof M[k]==="object"&&typeof a[k]==="object"){m(M[k],a[k],false);return;}M[k]=a[k];});}
return{deepFreeze:d,getLocationOrigin:g,ensureTrailingSlash:e,mergeConfig:m};});
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log","sap/ushell/Config"],function(B,T,e,u,d,g,m,H,r,q,M,L,C){"use strict";
var c=B.extend("sap.ushell.components.CatalogsManager",{
metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},
analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},
_aDoableObjects:[],
constructor:function(i,s){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;}.bind(this));this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.iInitialLoad=100;this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}var I=this.getInterface();sap.ushell.components.getCatalogsManager=function(){return I;};this.registerEvents();},
registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},
unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},
getModel:function(){return this.oModel;},
loadAllCatalogs:function(){var G=new q.Deferred();var t=this;var s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){if(!C.last("/core/spaces/enabled")){G=this.oHomepageManager.loadPersonalizedGroups();}}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];M.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");M.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");M.pause("FLP:DashboardManager.getCatalogTiles");M.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(a){var i=a.slice(0,this.iInitialLoad);M.end("FLP:DashboardManager.GetCatalogsRequest");this.aPromises=i.map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this)).then(function(){this.aPromises=a.slice(this.iInitialLoad).map(this.addCatalogToModel.bind(this));Promise.all(this.aPromises).then(this.processPendingCatalogs.bind(this));}.bind(this)).then(this.onDoneLoadingCatalogs.bind(this,a)).then(s);}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg"));}else{s();}},
updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},
mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups");var t,a,b,f,h;var i=this;G.forEach(function(o){["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(i.oLaunchPageService.getCatalogTileId(a[t].object));f=i.oTileCatalogToGroupsMap[b]||[];h=i.oLaunchPageService.getGroupId(o.object);if(f.indexOf(h)===-1&&(typeof(o.isGroupVisible)==="undefined"||o.isGroupVisible)&&!o.isGroupLocked){f.push(h);}i.oTileCatalogToGroupsMap[b]=f;}}});});},
updateCatalogTilesToGroupsMap:function(){var a=this.getModel().getProperty("/catalogs");var i,t,b,G,f,h,j,k,A,o;if(a){for(i=0;i<a.length;i++){h=a[i].appBoxes;if(h){for(k=0;k<h.length;k++){A=h[k];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);A.associatedGroups=b;}}f=a[i].customTiles;if(f){for(j=0;j<f.length;j++){o=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];b=(G||[]);o.associatedGroups=b;}}}}this.getModel().setProperty("/catalogs",a);},
addCatalogToModel:function(o){var a={title:this.oLaunchPageService.getCatalogTitle(o),id:this.oLaunchPageService.getCatalogId(o),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]};M.resume("FLP:DashboardManager.getCatalogTiles");return this.oLaunchPageService.getCatalogTiles(o).then(function(b){M.pause("FLP:DashboardManager.getCatalogTiles");return{oCatalogEntry:b,oCatalogModel:a};}).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},
getTagList:function(f){var i={};var h=0;var t=[];var j,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(h=0;h<this.tagsPool.length;h++){o=this.tagsPool[h];if(i[o]){i[o]++;}else{i[o]=1;}}for(j in i){t.push({tag:j,occ:i[j]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(f){this.oModel.setProperty("/tagList",s.slice(0,f));}else{this.oModel.setProperty("/tagList",s);}},
processPendingCatalogs:function(p){var a=this.oModel.getProperty("/catalogs");var P,o,b,E,i,f;var h=sap.ui.getCore().getEventBus();var A=this.oModel.getProperty("/masterCatalogs")||[{title:m.getLocalizedText("all")}];M.end("FLP:DashboardManager.getCatalogTiles");M.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(p.length>0){P=p.shift();o=P.oCatalogEntry;b=P.oCatalogModel;E=this.searchModelCatalogByTitle(b.title);if(E.result){f=this.oModel.getProperty("/catalogs")[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;f=b;}var j=function(k,l){var n;if(this._getIsIntentSupported(l)){if(this._getIsAppBox(l)){n=this.createCatalogAppBoxes(l,true);k.appBoxes.push(n);}else{var s=this.createCatalogTiles(l);k.customTiles.push(s);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this,f);o.forEach(j);if(f.appBoxes.length>0||f.customTiles.length>0){if(i){a.push(b);A.push({title:b.title});}}if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}this.oModel.setProperty("/masterCatalogs",A);this.oModel.setProperty("/catalogs",a);h.publish("launchpad","afterCatalogSegment");setTimeout(function(){u.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true});},0);M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},
loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},
searchModelCatalogByTitle:function(a){var b=this.oModel.getProperty("/catalogs");var f=false;var i;var n=0;var G=false;q.each(b,function(h,t){if(t.title===r.i18n.getText("catalogsLoading")){G=true;}else if(a===t.title){i=h;n=t.numberOfTiles;f=true;return false;}return undefined;});return{result:f,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},
createCatalogAppBoxes:function(o,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var b=this.oTileCatalogToGroupsMap[a]||[];var t=this.oLaunchPageService.getCatalogTileTags(o)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n;if(o.tileResolutionResult){n=o.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:o,title:this.oLaunchPageService.getCatalogTilePreviewTitle(o),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(o),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(o),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(o)};},
onDoneLoadingCatalogs:function(a){var i;var b=[];var t=this;for(i=0;i<a.length;i++){b.push(this.oLaunchPageService.getCatalogTiles(a[i]));}Promise.all(b).then(function(R){var I;var n=true;for(I=0;I<R.length;I++){if(R[I].length!==0){n=false;break;}}if(n||!a.length){t.oModel.setProperty("/catalogsNoDataText",r.i18n.getText("noCatalogs"));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var l=a.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){L.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==a.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},
createCatalogTiles:function(o){var t,a;var b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o));var f=this.oTileCatalogToGroupsMap[b]||[];var h=this.oLaunchPageService.getCatalogTileTags(o)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});var s=o.getChip&&o.getChip().getBaseChipId&&o.getChip().getBaseChipId();if(s&&["X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER"].indexOf(s)===-1){this.oLaunchPageService.getCatalogTileView(o);}a=this.oLaunchPageService.getCatalogTilePreviewTitle(o);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(o);}return{associatedGroups:f,src:o,catalog:o.title,catalogId:o.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(o)||[]).join(","),id:b,size:this.oLaunchPageService.getCatalogTileSize(o),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(o),tileType:o.tileType};},
createGroupAndSaveTile:function(D){var t=this;var o=D.catalogTileContext;var n=D.newGroupName;var a=new q.Deferred();var R={};if(u.validHash(n)&&o){this.createGroup(n).then(function(b){var p=t.createTile({catalogTileContext:o,groupContext:b});p.done(function(f){R={group:f.group,status:1,action:"addTileToNewGroup"};a.resolve(R);}).fail(function(f){R={group:f.group,status:0,action:"addTileToNewGroup"};a.resolve(R);});});}return a.promise();},
createGroup:function(t){var a=this;var D=new q.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:"createNewGroup"});}var R=this.oLaunchPageService.addGroup(t);R.done(function(G){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});R.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var o={status:0,action:"createNewGroup"};D.resolve(o);});return D.promise();},
createTile:function(D){var t=this;var o=D.catalogTileContext;var a=D.groupContext;var G=this.oModel.getProperty(a.getPath());var s=G.groupId;var R;var b=new q.Deferred();var f={};var E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:o,groupContext:a});if(!o){L.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);f={group:G,status:0,action:"add"};return Promise.resolve(f);}R=this.oLaunchPageService.addTile(o.getProperty("src"),a.getProperty("object"));R.done(function(h){var i=t.oModel.getProperty("/groups");var j=g.getModelPathOfGroup(i,s);var k=t.oLaunchPageService.getTileTitle(h);t.oHomepageManager.addTileToGroup(j,h);f={group:G,status:1,action:"add"};sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(U){U.logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,k]);});b.resolve(f);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");f={group:G,status:0,action:"add"};b.resolve(f);});return b.promise();},
deleteCatalogTileFromGroup:function(D){var t=this;var s=decodeURIComponent(D.tileId);var G=D.groupIndex;var o=this.oModel.getProperty("/groups/"+G);var a=new q.Deferred();var b=[];var R=[];var p,f;["tiles","links"].forEach(function(A){o[A].forEach(function(h){var i=t.oLaunchPageService.getCatalogTileId(h.object);if(i===s){p=new q.Deferred();f=t.oLaunchPageService.removeTile(o.object,h.object);f.done((function(j){return function(){R.push(h.uuid);j.resolve({status:true});};})(p));f.fail((function(j){return function(){j.resolve({status:false});};})(p));b.push(p);}});});q.when.apply(q,b).done(function(h){var S=b.length===R.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,R);t.updateTilesAssociation();a.resolve({group:o,status:S,action:"remove"});});return a.promise();},
calculateCatalogTileIndex:function(a,n,t){var b=parseInt(a*100000,10);b+=(n!==undefined?n:0)+t;return b;},
notifyOnActionFailure:function(s,p){m.showLocalizedError(s,p);},
resetAssociationOnFailure:function(s,p){this.notifyOnActionFailure(s,p);this.updateTilesAssociation();},
_getIsIntentSupported:function(o){return!!(this.oLaunchPageService.isTileIntentSupported(o));},
_getIsAppBox:function(o){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(o)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(o)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(o)));}return i;},
destroy:function(){this.unregisterEvents();}
});
return c;});
sap.ui.predefine('sap/ushell/components/ComponentKeysHandler',["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/bootstrap/common/common.load.model"],function(C,A,K,q,L,a,m){"use strict";var b=function(){};b._instance=undefined;
b.getInstance=function(){if(b._instance===undefined){b._instance=new b();return b._instance._init().then(function(){return b._instance;});}return Promise.resolve(b._instance);};
b.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),_init:function(){this.oModel=m.getModel();return new Promise(function(r){if(!this.oLaunchPageService){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;r();}.bind(this));}else{r();}}.bind(this));},goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var c=q(j.get(t));if(c.length){this._setTileContainerSelectiveFocus(c);}}},goToLastVisitedTile:function(j,l){var c,d,e=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var f=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||q(f.get(t));var h=g.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");c=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!c.length){c=e.filter(":visible").eq(0);}}else{c=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this.moveScrollDashboard(d);}else if(c.length){c.attr("tabindex","0");this.moveScrollDashboard(c);}else{a.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var c=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){c.push(g.oPlusTile);}c=c.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?c.length-1:p;var t=c[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this.moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",c=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",e=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(c==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(c===s){var g=q(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:c==="LineMode"?"links":"tiles",sFromItems:c==="LineMode"?"links":"tiles",sTileType:c==="LineMode"?"link":"tile"};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var c=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){c.moveScrollDashboard(q(t.oParent.getDomRef()));}else{c.moveScrollDashboard(t.$());}},0);},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}return undefined;},_findClosestTile:function(d,t,c){var o=this._getTileRect(d,c),n=this._getTileCenter(d,o,c);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(c)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&o.bottom+5>=j.bottom){continue;}if(d==="up"&&o.top-5<=j.top){continue;}if(e&&i!==j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,M,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var c;if(!i||(M&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(M){var t=i.oCurTile.getBindingContext().getObject().object;l=this.oLaunchPageService.isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(M&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,M,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;c=[];if(o){var j=o.getTiles(),k=o.getLinks();c=l?j.concat(k):j;if(c.length===0){c.push(o.oPlusTile);}}var J=(d==="down")?G.concat(c):c.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,c,M,l){var n,g=c.getParent().getGroups(),e=g.indexOf(c),f=e;if(d==="down"||d==="right"){n=1;}else{n=-1;}f+=n;while(g[f]){var N=g[f],h=N.getTiles(),i=N.getLinks();var j=l?h.concat(i):h;var I=N.getVisible()&&!(N.getIsGroupLocked()&&M)&&!(N.getIsGroupLocked()&&j.length===0)&&!(j.length===0&&!(M||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}f+=n;}return undefined;},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var c=j.control(0);c.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:c,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var c=j.closest(".sapUshellTileContainer"),e,f,g;e=j.closest(".sapUshellTileContainerBeforeContent");if(e.length){if(d==="up"||d==="left"){this._goToNextTileContainer(e,d);}else{g=c.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest(".sapUshellTileContainerHeader");if(e.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(c)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=c.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(c)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=c.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest(".sapUshellTileContainerAfterContent");if(e.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var c=j.closest(".sapUshellTileContainer");if(c.length===1){var e=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,f=q(e[e.index(c)+n]);if(f.length===1){var g=f.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var c=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=c.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var c=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=c.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),c=$.closest(".sapUshellTileContainer"),e=N.closest(".sapUshellTileContainer");if(i&&(c.get(0).id!==e.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(c)){this._setTabIndexOnTileContainerHeader(e.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(e);}}else if(d==="up"||d==="left"){var f=c.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this.moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var c=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);c.attr("tabindex",0);d.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var c=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===c.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var c=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<c.length;i++){c[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),c,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});c=p.find("[tabindex], a").addBack().filter("[tabindex], a");c.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(t){if(t.length){this.setTileFocus(t);}},_moveGroupFromDashboard:function(d,j){var c,t=q(".sapUshellDashboardGroupsContainerItem"),i,e;c=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(c);e=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var c=this;setTimeout(function(){var d=q(".sapUshellTileContainerHeader")[t];c._setTabIndexOnTileContainerHeader(q(d));q(d).focus();},100);},_getFocusOnTile:function(j){var c;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var d=j.closest(s);if(d.length){c=d;}});return c;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}if(j.is("#sapUshellAnchorBarOverflowButton")){this._handleAnchorNavigationOverflowButtonArrowKeys(d);return;}var c=this._getFocusOnTile(j),i=this.oModel.getProperty("/tileActionModeActive");if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest(".sapUshellTileContainerHeader");if(c){this._moveTile(d,c);}else if(f.length){var g=f.closest(".sapUshellTileContainerContent");if(!g.hasClass("sapUshellTileContainerDefault")||!g.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(c){this._goFromFocusedTile(d,c,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationOverflowButtonArrowKeys:function(d){var c;q("#sapUshellAnchorBarOverflowButton").attr("tabindex",-1);if(["left","up"].indexOf(d)>-1){c=q(".sapUshellAnchorItem").filter(":visible");this._setAnchorItemFocus(c.eq(c.length-1));}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var c=q(".sapUshellAnchorItem").filter(":visible"),n=c.index(j);if(d==="left"||d==="up"){if(n>0){this._setAnchorItemFocus(c.eq(n-1));return;}}if(d==="right"||d==="down"){if(n<c.length-1){this._setAnchorItemFocus(c.eq(n+1));}else if(n===c.length-1){this._setAnchorOverflowButtonFocus();}}},_setAnchorOverflowButtonFocus:function(){var B=q("#sapUshellAnchorBarOverflowButton");q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});B.attr("tabindex",0);B.focus();},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),c;if(v.length){if(d==="home"){c=q(v.get(0));}if(d==="end"){c=q(v.get(v.length-1));}}if(c){this._preventDefault(e);this._appFinderFocusAppBox(j,c);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var c=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();if(c.length){this.setTileFocus(c);}}else{var d=j.closest(".sapUshellTileContainer");if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var c=this._getFocusOnTile(j);if(c&&!c.hasClass("sapUshellLockedTile")&&!c.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var d=q(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e.moveScrollDashboard(i.oCurTile.$());}else{e.moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),c=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(c.length){var e=c.closest(".sapUshellTileContainerContent");if(!e.hasClass("sapUshellTileContainerDefault")||!e.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,c);}}},_spaceButtonHandler:function(e,j){var c=this._getFocusOnTile(j);if(!c||!c.length){j.click();return;}e.preventDefault();if(c.hasClass("sapFCard")){c.control(0).getCardHeader().firePress();return;}var d=j.find("[role=button]");if(d.length){var B=d.control(0);if(B){B.firePress();return;}}c.control(0).firePress();},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=b._instance;if(r){var c=r.getCurrentCoreView();if(c==="home"&&!C.last("/core/spaces/enabled")){var t=document.activeElement?document.activeElement.tagName:"";if(t==="INPUT"||t==="TEXTAREA"){if(e.keyCode===h.keyCodes.ENTER){var H=q(document.activeElement).closest(".sapUshellTileContainerHeader");if(H.length){setTimeout(function(){H=q("#"+H[0].id);h._setTabIndexOnTileContainerHeader(H);H.focus();},10);}}}else{h._dashboardKeydownHandler(e);}}if(c==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var c;if(j.hasClass("sapUshellTileContainerHeader")){c=j.find(".sapUshellContainerTitle");c.focus();}else if(j.closest(".sapUshellTileContainerHeader")){c=j.closest(".sapUshellTileContainerHeader");c.focus();}},_appFinderFocusAppBox:function(j,c){if(j&&c){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");c.attr("tabindex","0").focus();c.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var c;if(d==="down"||d==="right"){c=j.next();}else if(d==="up"||d==="left"){c=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(c.length>0){var n=c.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return c;}return this._getNextCatalog(d,c);}return undefined;},_getNextCatalogItem:function(d,j,p){var c=q(j.parents()[2]),e=c.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,c),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}return undefined;},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var c=q(this._getNextCatalogItem(d,j,p));if(c){this._appFinderFocusAppBox(j,c);}}},appFinderFocusMenuButtons:function(e){var c=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(c.length){c.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var t=document.activeElement&&document.activeElement.tagName;if(t==="INPUT"||t==="TEXTAREA"){return;}var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,j);break;default:break;}return true;}};return b;});
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){"use strict";
function d(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){if(t.content[i].destroy){t.content[i].destroy();}}}}
function a(t){var i;if(t){for(i=0;i<t.length;i++){d(t[i]);}}}
function b(A){if(A){a(A.tiles);}}
function c(A){var i;if(A){for(i=0;i<A.length;i++){b(A[i]);}}}
return{destroyFLPAggregationModel:b,destroyFLPAggregationModels:c,destroyTileModel:d,destroyTileModels:a};});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){"use strict";return{getIndexOfGroup:a,getModelPathOfGroup:g};
function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}
function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s){return i;}}return-1;}
});
sap.ui.predefine('sap/ushell/components/HeaderManager',["sap/base/util/ObjectPath","sap/ui/Device","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/ushell/components/StateHelper","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone","sap/ushell/ui/horizon/NewDesignSwitchItem"],function(O,D,_,S,C,E,u,a,N){"use strict";var h={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,newDesignSwitchVisible:C.last("/core/shellHeader/newDesignSwitchVisible"),newDesignSwitchActive:C.last("/core/shellHeader/newDesignSwitchActive"),showLogo:false,ShellAppTitleState:undefined,rootIntent:C.last("/core/shellHeader/rootIntent"),homeUri:C.last("/core/shellHeader/homeUri"),title:""};var H;var A;var o="endItemsOverflowBtn";var c;var B={blank:{},"blank-home":{},home:{headItems:[]},app:{headItems:["backBtn","homeBtn"]},minimal:{headItems:["homeBtn"]},standalone:{headItems:["backBtn"]},embedded:{headItems:["backBtn","homeBtn"]},"embedded-home":{headItems:[]},headerless:{headItems:["backBtn","homeBtn"],headerVisible:false},merged:{headItems:["backBtn","homeBtn"]},"headerless-home":{headerVisible:false},"merged-home":{},lean:{headItems:[]},"lean-home":{}};var d=[];
function i(J,K){var L=J&&J.appState?J.appState:"home";H=w(J);A=K;c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;v();e();s(L);q();}
function b(){f();}
function e(){var J=E.on("setHeaderCentralAreaElement").do(function(P){n({propertyName:"centralAreaElement",value:P.id,aStates:S.getPassStates(P.states),bCurrentState:!!P.currentState,bDoNotPropagate:!!P.bDoNotPropagate});});d.push(J);d.push(E.on("updateHeaderOverflowState").do(g));D.media.attachHandler(g,this,D.media.RANGESETS.SAP_STANDARD);d.push(C.on("/core/shellHeader/headEndItems").do(k));d.push(C.on("/core/shell/model/currentSpaceAndPage").do(j));}
function f(){if(d){d.forEach(function(J){J.off();});}D.media.detachHandler(g,this,D.media.RANGESETS.SAP_STANDARD);}
function g(P){if(P&&P.name){c=P.name;}v();k();}
function v(J){var K=C.last("/core/shell/model/currentState/stateName"),L=K==="merged"||K==="headerless",M=C.last("/core/shell/model/currentViewPortState")==="LeftCenter",P=true;if((J||c)==="Phone"&&!M||L){P=false;}n({propertyName:"showLogo",value:P,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true});}
function j(J){if(C.last("/core/spaces/enabled")&&(C.last("/core/spaces/homeNavigationTarget")==="origin_page")){if(J){((this&&this.updateStates)||n)({propertyName:"homeUri",value:"#"+J.hash});}}}
function k(P){var J=C.last("/core/shellHeader/headEndItems"),K=J.indexOf(o)>-1,L=P&&P.name||c,M;if(L==="Phone"&&!K&&J.length>2){if(C.last("/core/shellHeader/newDesignSwitchVisible")&&J.indexOf("newDesignSwitchItem")===-1){var Q=N.getSwitchItem();l([Q.getId()],false,["home","app"],true);}l([o],false,["home","app"]);}else if(L!=="Phone"&&K){M=sap.ui.getCore().byId("headEndItemsOverflow");if(M){M.destroy();}r([o],false,["home","app"]);}}
function l(J,K,L,M){n({propertyName:"headEndItems",value:J,aStates:L,bCurrentState:!!K,bDoNotPropagate:!!M});}
function r(J,K,L){n({propertyName:"headEndItems",value:J,aStates:L,bCurrentState:!!K,action:"remove",bDoNotPropagate:false});}
function m(J,K){var L={};Object.keys(J).forEach(function(M){var P=J[M];L[M]=Object.keys(P).reduce(function(T,Q){T[Q]=P[Q];return T;},a(K));});return L;}
function n(P){var J=P.propertyName,K=!P.bCurrentState?S.getAllStateToUpdate(P.aStates,P.bDoNotPropagate):[],L=C.last("/core/shellHeader"),M=C.last("/core/shell/model/currentState/stateName"),Q=P.value,R;if(J.charAt(0)==="/"){J=J.substring(1);}R=_(J,P.action);if(!R){return;}if(!P.bCurrentState){H=x(H,J,R,K,Q);}if(K.indexOf(M)>-1||P.bCurrentState){var T=O.get(J.split("/"),L),U=R.execute(T,Q);if(T!==U){O.set(J.split("/"),U,L);z(J,L);}}if(P.bCurrentState){y(J,R,Q);}}
function p(J){var K;for(K in J){if(J.hasOwnProperty(K)){u.updateProperties(H[K],J[K]);}}}
function s(J){var K=H[J];if(!K){throw new Error("the state ("+J+") does not exist");}K.newDesignSwitchActive=C.last("/core/shellHeader/newDesignSwitchActive");C.emit("/core/shellHeader",a(K));}
function q(J){var K=C.last("/core/shellHeader"),L,M;if(A&&A.customShellState){L=A.customShellState.currentState;}if(J&&A.extendedShellStates[J]){M=A.extendedShellStates[J].customState.currentState;}C.emit("/core/shellHeader",t(K,L,M));}
function t(J,K,L){var R={};Object.keys(J).forEach(function(P){var M=_(P);var Q=a(J[P]);if(M){if(L){Q=M.execute(Q,L[P]);}if(K){Q=M.execute(Q,K[P]);}}R[P]=Q;});R.ShellAppTitleState=C.last("/core/shellHeader/ShellAppTitleState");return R;}
function w(J){if(J){h.rootIntent=J.rootIntent;h.homeUri="#"+J.rootIntent;}var K=m(B,h);function L(P,K){var Q,R;for(Q in K){if(Q==="blank"||Q==="blank-home"){continue;}if((P==="openCatalogBtn")&&(Q==="lean"||Q==="lean-home")){continue;}if(P==="ContactSupportBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(Q)===-1){continue;}}R=K[Q].headEndItems.indexOf(P);if(R===-1){K[Q].headEndItems.push(P);}}}function M(T,K){var P;for(P in K){K[P].title=T;}}if(J){if(J.moveContactSupportActionToShellHeader){L("ContactSupportBtn",K);}if(J.moveAppFinderActionToShellHeader){L("openCatalogBtn",K);}if(J.title){M(J.title,K);}}return K;}
function x(J,P,K,L,M){if(L.length===0){return J;}var Q=a(J);L.forEach(function(R){var T=Q[R],U;if(T){U=K.execute(O.get(P.split("/"),T),M);O.set(P.split("/"),U,T);}});return Q;}
function y(P,J,K){var L,M;if(!A){return;}L=A.customShellState.currentState;M=J.execute(O.get(P.split("/"),L),K);O.set(P.split("/"),M,L);}
function z(P,J){var R=P.split("/").shift();C.emit("/core/shellHeader/"+R,J[R]);}
function F(J){var K;try{K=H[J];}catch(L){K=undefined;}return K;}
function G(J,P){var K;try{K=F(J)[P];}catch(L){K=undefined;}return K;}
function I(T){H=T;}
return{init:i,destroy:b,switchState:s,updateStates:n,recalculateState:q,extendStates:p,handleCurrentSpaceAndPage:j,handleEndItemsOverflow:k,validateShowLogo:v,_createInitialState:w,_generateBaseHeaderState:m,_getBaseState:F,_getBaseStateMember:G,_resetBaseStates:I};});
sap.ui.predefine('sap/ushell/components/HomepageManager',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement","sap/ushell/components/ComponentKeysHandler"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,c,f,h,l,C,M,L,n,o){"use strict";var p=l.GenericTileScope;var t={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var v=[];return B.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:t,constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var H=sap.ushell.components.getHomepageManager();if(!H.view){H.setDashboardView(j.view);}return H;}this.oServiceLoadingPromise=sap.ushell.Container.getServiceAsync("LaunchPage").then(function(q){this.oPageBuilderService=q;this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));this.oPageOperationAdapter=c.getInstance(q);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported();}.bind(this));sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=(function(q){return function(){return q;};}(this));this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=new Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.bIsGroupsRequestPending=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",h.EQ,false);this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var k=this.oRouter.getTarget("home");k.attachDisplay(function(q){this.oDashboardView=q.getParameter("view");}.bind(this));}var E=s.last("/core/home/enableTransientMode");v.push(s.on("/core/home/enableTransientMode").do(function(N){if(E===N){return;}E=N;this._changeMode(N);}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));this._aRequestQueue=[];this._bRequestRunning=false;return undefined;},_addRequest:function(R){this._aRequestQueue.push(R);if(!this._bRequestRunning){this._bRequestRunning=true;this._aRequestQueue.shift()();}},_checkRequestQueue:function(){if(this._aRequestQueue.length===0){this._bRequestRunning=false;}else{this._aRequestQueue.shift()();}},_requestFailed:function(){this._aRequestQueue=[];this._bRequestRunning=false;},isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){L.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){L.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,k=new S(i,{title:r.i18n.getText("moveTileDialog_title"),rememberSelections:false,search:function(E){var V=E.getParameter("value"),q=new F("title",h.Contains,V),w=E.getSource().getBinding("items");w.filter([q,j]);},contentWidth:"400px",contentHeight:"auto",confirm:function(E){var q=E.getParameter("selectedContexts");this.publishMoveActionEvents(q,i);}.bind(this),cancel:function(){var q=Q(".sapUshellTile[tabindex=\"0\"]")[0];if(q){q.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return k;},publishMoveActionEvents:function(i,j){var E=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles",q=i[0].getObject().groupId,w={sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:j};if(D.system.desktop){o.getInstance().then(function(x){w.callBack=x.callbackSetFocus.bind(x);E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",w);});}else{E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",w);}}},_changeLinksScope:function(E){var i=this;if(this.bLinkPersonalizationSupported){var I=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){i._changeGroupLinksScope(j,I?"Actions":"Display");}});}},_changeGroupLinksScope:function(i,j){var k=this;i.links.forEach(function(q,w){k._changeLinkScope(q.content[0],j);});},_changeLinkScope:function(i,j){var k;if(i.getScope){k=i;}else if(i.getContent){k=i.getContent()[0];}if(this.bLinkPersonalizationSupported&&k&&k.setScope){k.setScope(j);}},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);},_changeMode:function(i){var j=this.getModel().getProperty("/groups");if(i){this.oPageOperationAdapter=f.getInstance();var k=this.oPageOperationAdapter.transformGroupModel(j);this.getModel().setProperty("/groups",k);}else{this.oPageOperationAdapter=c.getInstance();d.destroyFLPAggregationModels(j);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups();}},_addFLPActionsToTile:function(i){var A=[];if(s.last("/core/shell/enablePersonalization")){var j=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(i);A.push(this._getMoveTileAction(i));if(j){A.push(this._getConvertTileAction(i));}}return A;},_getConvertTileAction:function(i){var E=sap.ui.getCore().getEventBus(),j=this,k=j.oPageOperationAdapter.getTileType(i);return{text:k==="link"?r.i18n.getText("ConvertToTile"):r.i18n.getText("ConvertToLink"),press:function(q){var w={tile:q};if(D.system.desktop){o.getInstance().then(function(x){w.callBack=x.callbackSetFocus.bind(x);E.publish("launchpad","convertTile",w);});}else{E.publish("launchpad","convertTile",w);}}};},_getMoveTileAction:function(i){var j=this;return{text:r.i18n.getText("moveTileDialog_action"),press:function(){j.tileType=j.oPageOperationAdapter.getTileType(i);j.tileUuid=j.getModelTileById(j.oPageOperationAdapter.getTileId(i),j.tileType==="link"?"links":"tiles").uuid;var k=j.tileType==="tile"?j.moveTileDialog:j.moveLinkDialog;if(j.tileType==="tile"||j.tileType==="link"){if(!k){k=j.createMoveActionDialog("move"+j.tileType+"Dialog");k.setModel(j.oModel);if(j.tileType==="tile"){j.moveTileDialog=k;}else{j.moveLinkDialog=k;}}else{k.getBinding("items").filter([j.oGroupNotLockedFilter]);}k.open();}}};},_handleTileAppearanceAnimation:function(j){if(!j){return;}var k=["webkit",""];function q(w,x){for(var i=0;i<k.length;i++){x=x.toLowerCase();j.attachBrowserEvent(k[i]+x,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}q(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);v.forEach(function(i){i.off();});c.destroy();f.destroy();sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},_sortableStart:function(){this.oSortableDeferred=new Q.Deferred();},_createBookmark:function(i,E,j){var k=j.group?j.group.object:"";delete j.group;function q(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(w){w.addBookmark(j,k).always(this._checkRequestQueue.bind(this)).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(x){L.error("Failed to add bookmark",x,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});}.bind(this));}this._addRequest(q.bind(this));},_addBookmarkToModel:function(i,E,j){var k=j.tile,q,w=j.group,x,y,z,N,I;if(!j||!k){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!w){q=this.getModel().getProperty("/groups");for(I=0;I<q.length;I++){if(q[I].isDefaultGroup===true){w=q[I].object;break;}}}y=this._getIndexOfGroupByObject(w);z=this.oModel.getProperty("/groups/"+y);x=this.oPageOperationAdapter.getPreparedTileModel(k,z.isGroupLocked);this.getTileView(x);z.tiles.push(x);z.visibilityModes=u.calcVisibilityModes(z,true);N=z.tiles.length;this._updateModelWithTileView(y,N);this.oModel.setProperty("/groups/"+y,z);},_refreshGroupInModel:function(i,E,j){var k=this;this.oPageOperationAdapter.refreshGroup(j).then(function(q){if(!q){return;}var w=k._getIndexOfGroupByObject(q.object);q.visibilityModes=u.calcVisibilityModes(q.object,true);k.oModel.setProperty("/groups/"+w,q);if(q.tiles){q.tiles.forEach(function(x){k.getTileView(x);});}});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},_createGroupAt:function(j,E,k){var q=parseInt(k.location,10),w=this.oModel.getProperty("/groups"),x=this.oPageOperationAdapter.getPreparedGroupModel(null,false,q===w.length,k),y=this.oModel,i;x.index=q;w.splice(q,0,x);for(i=0;i<w.length-1;i++){w[i].isLastGroup=false;}for(i=q+1;i<w.length;i++){w[i].index++;}y.setProperty("/groups",w);},_getIndexOfGroupByObject:function(i){var j=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(j,i);},getTileActions:function(i){return this.oPageOperationAdapter.getTileActions(i);},addTileToGroup:function(i,j){var k=i+"/tiles",q=this.oModel.getProperty(i),N=this.oModel.getProperty(k).length;var w=this.oModel.getProperty(i+"/isGroupLocked"),x=this.oModel.getProperty("/personalization");q.tiles[N]=this.oPageOperationAdapter.getPreparedTileModel(j,w);this.getTileView(q.tiles[N]);q.visibilityModes=u.calcVisibilityModes(q,x);this._updateModelWithTileView(q.index,N);this.oModel.setProperty(i,q);},addTilesToGroupByCatalogTileId:function(j,k){var q=j.getBindingContext();for(var i=0;i<k.length;i++){this.addTileToGroupByCatalogTileId(q.sPath,k[i]);}},addTileToGroupByCatalogTileId:function(i,j){var N,k,q;if(!s.last("/core/home/enableTransientMode")){return;}q=this.oPageOperationAdapter.getTileModelByCatalogTileId(j);if(!q){return;}this.oDashboardLoadingManager.setTileResolved(q);N=this.oModel.getProperty(i+"/tiles").length;k=this.oModel.getProperty(i);k.tiles[N]=q;this.oModel.setProperty(i,k);},_getPathOfTile:function(i){var j=this.oModel.getProperty("/groups"),k=null,q=null,w,E=function(x,y){if(y.uuid===i){q=x;return false;}return undefined;};Q.each(j,function(x,y){Q.each(y.tiles,E);if(q!==null){k=x;w="tiles";return false;}Q.each(y.links,E);if(q!==null){k=x;w="links";return false;}return undefined;});return k!==null?"/groups/"+k+"/"+w+"/"+q:null;},_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},_deleteGroup:function(i,E,j){var k=this,q=this.oModel,w=j.groupId,x=q.getProperty("/groups"),y=g.getIndexOfGroup(x,w),I=x.length-1===y,z=null,A,H;A=I?y-1:y;d.destroyFLPAggregationModel(q.getProperty("/groups/"+y));z=x.splice(y,1)[0];if(I){q.setProperty("/groups/"+A+"/isLastGroup",I);}q.setProperty("/groups",x);this._updateGroupIndices(x);if(A>=0){H=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(H.publish,H,"launchpad","scrollToGroup",{groupId:q.getProperty("/groups")[A].groupId}),200);}function J(){k.oPageOperationAdapter.deleteGroup(z).then(function(){m.showLocalizedMessage("group_deleted_msg",[z.title]);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_delete_group_msg");});}this._addRequest(J);},_resetGroup:function(i,E,j){var k=this,q=j.groupId,w=this.oModel,x=w.getProperty("/groups"),y=g.getIndexOfGroup(x,q),z=k.oModel.getProperty("/groups/indexOfDefaultGroup")===y,A=w.getProperty("/groups/"+y),H,I;w.setProperty("/groups/"+y+"/sortable",false);function J(){k.oPageOperationAdapter.resetGroup(A,z).then(function(R){k._handleAfterSortable(function(q,O,K){var x=k.oModel.getProperty("/groups"),y=g.getIndexOfGroup(x,q);k._loadGroup(y,K||O);m.showLocalizedMessage("group_reset_msg",[O.title]);k.oModel.setProperty("/groups/"+y+"/sortable",true);H=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(q);I=H.getBindingContext().getObject().links;if(I&&I.length&&!H.getIsGroupLocked()){k._changeGroupLinksScope(H.getBindingContext().getObject(),k.oModel.getProperty("/tileActionModeActive")?p.Actions:p.Display);}if(H){H.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}})(q,A,R);k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_reset_group_msg");});}this._addRequest(J);},_moveGroup:function(j,E,k){if(isNaN(k.fromIndex)){return;}var q=k.fromIndex,w=k.toIndex,x=this.oModel,y=x.getProperty("/groups"),A=x.getProperty("/tileActionModeActive"),z,H,I=this,i,J;if(!A){q=this._adjustFromGroupIndex(q,y);}z=y[q];H=z.groupId;if(!A){w=this._adjustToGroupIndex(w,y,H);}J=y[w];this._moveInArray(y,q,w);this._updateGroupIndices(y);for(i=0;i<y.length-1;i++){y[i].isLastGroup=false;}y[y.length-1].isLastGroup=true;x.setProperty("/groups",y);function K(){y=x.getProperty("/groups");var z=x.getProperty(g.getModelPathOfGroup(y,H));if(!z.object){return;}I.oPageOperationAdapter.getOriginalGroupIndex(J,y).then(function(N){var O={iFromIndex:q,iToIndex:w};return I.oPageOperationAdapter.moveGroup(z,N,O);}).then(I._checkRequestQueue.bind(I),function(){I._resetGroupsOnFailure("fail_to_move_group_msg");});}this._addRequest(K);},_adjustToGroupIndex:function(j,k,q){var w=0,I=false,i=0;for(i=0;i<k.length&&w<j;i++){if(k[i].isGroupVisible){if(k[i].groupId===q){I=true;}else{w++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(j,k){var q=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){q++;}if(q===j+1){return i;}}return j;},_changeGroupTitle:function(i,E,j){var k=this,N=j.newTitle,q=this.oModel.getProperty("/groups"),w=j.groupId,x=g.getIndexOfGroup(q,w),y=k.oModel.getProperty("/groups/indexOfDefaultGroup")===x,z=this.oModel.getProperty("/groups/"+x),O=z.title;this.oModel.setProperty("/groups/"+x+"/title",N);function A(){var I;if(z.isLastGroup){I=k.oPageOperationAdapter.addGroupAt(z,undefined,y);}else{var J=k.oModel.getProperty("/groups")[x+1];I=k.oPageOperationAdapter.getOriginalGroupIndex(J,q).then(function(K){return k.oPageOperationAdapter.addGroupAt(z,K,y);});}I.then(function(K){k._handleAfterSortable(function(R,U){var V=k.oModel.getProperty("/groups");var W=g.getIndexOfGroup(V,R);var X=V[W];Object.keys(U).forEach(function(Y){if(Y==="tiles"||Y==="links"){return;}X[Y]=U[Y];});k.oModel.refresh();k._checkRequestQueue.call(k);})(w,K);},function(){k._resetGroupsOnFailure("fail_to_create_group_msg");});}function H(){this.oPageOperationAdapter.renameGroup(z,N,O).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_rename_group_msg");});}if(!z.object){this._checkRequestQueue.call(this);this._addRequest(A.bind(this));}else{this._addRequest(H.bind(this));}},addGroupToModel:function(i){var j=this.oPageOperationAdapter.getPreparedGroupModel(i,false,true,{isRendered:true}),k=this.oModel.getProperty("/groups"),q=k.length,w;if(q>0){k[q-1].isLastGroup=false;}j.index=q;k.push(j);this.oModel.setProperty("/groups/",k);w=new C(this.oModel,"/groups/"+q);return w;},_deleteTile:function(i,E,j){var k=this,q=j.tileId,w=this.oModel.getProperty("/groups"),I=j.items||"tiles";Q.each(w,function(x,y){var z=false;Q.each(y[I],function(A,H){if(H.uuid!==q){return true;}d.destroyTileModel(k.oModel.getProperty("/groups/"+x+"/"+I+"/"+A));var J=y[I].splice(A,1)[0],K=k.oModel.getProperty("/personalization");y.visibilityModes=u.calcVisibilityModes(y,K);k.oModel.setProperty("/groups/"+x,y);function N(){k.oPageOperationAdapter.removeTile(y,J).then(function(){k._checkRequestQueue.call(k);},function(){k._resetGroupsOnFailure("fail_to_remove_tile_msg");});}k._addRequest.call(k,N);u.handleTilesVisibility();z=true;return false;});return!z;});},deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),q=this.oModel.getProperty("/groups/"+k),w=[];["tiles","links"].forEach(function(A){w=q[A].filter(function(x){if(R.indexOf(x.uuid)<0){return true;}return false;});q[A]=w;});q.visibilityModes=u.calcVisibilityModes(q,true);this.oModel.setProperty("/groups/"+k,q);},_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}return undefined;},_convertTile:function(i,E,j){var k=j.tile?j.tile:j,q=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,w=j.srcGroupId?this.oModel.getProperty("/groups/"+q):k.getParent().getBindingContext().getObject(),x=k.getBindingContext().sPath.split("/"),y=k.getBindingContext().getObject(),O=x[x.length-2],z=y.uuid,A=parseInt(x[x.length-1],10),H=j.toIndex!==undefined?j.toIndex:undefined,I=this.oModel.getProperty("/tileActionModeActive"),J=j.toGroupId?this._getGroupIndex(j.toGroupId):w.index,K=j.toGroupId?this.oModel.getProperty("/groups/"+J):w,N=this;var R=this._getIndexForConvert(O,A,H,w,K),U={"tileIndex":A,"groupIndex":q,"group":w};function V(){y.tileIsBeingMoved=true;var W=this.oPageOperationAdapter.moveTile(y,R,w,K,O==="links"?"tile":"link");W.then(function(X){N._showMoveTileMessage(y,w,K);N._handleAfterSortable(function(z,X){var Y=N._getPathOfTile(z),Z=X.content;if(Y){if(O==="tiles"){N._attachLinkPressHandlers(Z);N._changeLinkScope(Z,I?"Actions":"Display");}var $={"tileIndex":H,"groupIndex":J,"group":K},_={"tile":y,"view":Z,"type":O,"tileObj":X.object};y.tileIsBeingMoved=true;N.replaceTileViewAfterConvert(U,$,_);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(Z);}}})(z,X);N._checkRequestQueue.call(N);},function(){N._handleAfterSortable(N._resetGroupsOnFailure.bind(N))("fail_to_move_tile_msg");});}this._addRequest(V.bind(this));},replaceTileViewAfterConvert:function(i,j,k){var q=k.tile,w=q.content;q.tileIsBeingMoved=false;q.content=[k.view];q.object=k.tileObj;q.originalTileId=this.oPageOperationAdapter.getTileId(k.tileObj);i.group[k.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[k.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,q);}else{j.group[k.type==="tiles"?"links":"tiles"].push(q);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(k.type==="links"){this._handleTileAppearanceAnimation(q.content[0].getParent());}else{this._handleTileAppearanceAnimation(q.content[0]);}if(w&&w[0]){w[0].destroy();}},_getIndexForConvert:function(i,j,k,q,w){var x;if(i==="tiles"){if(k!==undefined){x=w[i].length+k;}else{x=w[i].length+w.links.length;}if(q.groupId===w.groupId){x--;}}else{x=k||q.tiles.length;j+=q.tiles.length;}return{"tileIndex":j,"newTileIndex":x};},_getIndexForMove:function(i,j,k,q,w){var x;if(i==="tiles"){x=k!==undefined?k:q[i].length;}else{if(k!==undefined){x=q.tiles.length+k;}else{x=q.tiles.length+q.links.length;}j+=w.tiles.length;}return{"tileIndex":j,"newTileIndex":x};},_getTileInfo:function(i,j,I){var k;Q.each(i,function(q,w){var x=false;Q.each(w[I],function(y,z){if(z.uuid===j){k={"oTile":z,"tileIndex":y,"oGroup":w,"groupIndex":q};x=true;return false;}return undefined;});return!x;});return k;},_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,q){if(q.groupId===N){j={"oNewGroup":q,"newGroupIndex":k};}});return j;},_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,q=j.sTileId,w=j.source,x=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",y=j.sToItems,z=j.sFromItems,A=this.oModel.getProperty("/tileActionModeActive"),H=this.oModel.getProperty("/groups"),I,J,K,O,R,U={},V=this;O=this._getTileInfo(H,q,z);R=this._getNewGroupInfo(H,N);if(O.oGroup.groupId===R.oNewGroup.groupId&&(w==="movetileDialog"||k===null||w==="movelinkDialog")){if(j.callBack&&O.oTile&&O.oTile.content&&O.oTile.content.length){j.callBack(O.oTile.content[0]);}return;}if(x==="link"){O.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(x==="tile"&&y==="tiles"){if(k&&k>R.oNewGroup[y].length){k=R.oNewGroup[y].length;}}if(O.oGroup.groupId===N&&y===z){if(k===null||k===undefined){O.oGroup[y].splice(O.tileIndex,1);k=O.oGroup[y].length;O.oGroup[y].push(O.oTile);}else{k=this._adjustTileIndex(k,O.oTile,O.oGroup,y);this._moveInArray(O.oGroup[y],O.tileIndex,k);}this.oModel.setProperty("/groups/"+O.groupIndex+"/"+y,O.oGroup[y]);}else{K=this.oModel.getProperty("/personalization");O.oGroup[z].splice(O.tileIndex,1);O.oGroup.visibilityModes=u.calcVisibilityModes(O.oGroup,K);this.oModel.setProperty("/groups/"+O.groupIndex+"/"+z,O.oGroup[z]);if(k===null||k===undefined){k=R.oNewGroup[y].length;R.oNewGroup[y].push(O.oTile);}else{k=this._adjustTileIndex(k,O.oTile,R.oNewGroup,y);R.oNewGroup[y].splice(k,0,O.oTile);}R.oNewGroup.visibilityModes=u.calcVisibilityModes(R.oNewGroup,K);this.oModel.setProperty("/groups/"+R.newGroupIndex+"/"+y,R.oNewGroup[y]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();function W(){I=this.oModel.getProperty("/groups/"+O.groupIndex);J=this.oModel.getProperty("/groups/"+R.newGroupIndex);U=this._getIndexForMove(z,O.tileIndex,k,R.oNewGroup,I);O.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(O.oTile,U,I,J,x).then(function(X){var Y=V._getPathOfTile(q);V._showMoveTileMessage(O.oTile,I,J);if(Y){V.oModel.setProperty(Y+"/object",X.object);V.oModel.setProperty(Y+"/originalTileId",X.originalTileId);var Z=V.oModel.getProperty(Y+"/content"),$=X.content;if(y==="links"){V._changeLinkScope($,A?"Actions":"Display");V._attachLinkPressHandlers($);V._handleTileAppearanceAnimation($);O.oTile.content=[$];V.oModel.setProperty(Y,Q.extend({},O.oTile));V.oModel.setProperty("/groups/"+R.newGroupIndex+"/"+y,V.oModel.getProperty("/groups/"+R.newGroupIndex+"/"+y));}else{V.oModel.setProperty(Y+"/content",[$]);}if(Z&&Z[0]){var _=$.onAfterRendering;$.onAfterRendering=function(){_.apply(this);Z[0].destroy();$.onAfterRendering=_;};}V.oModel.setProperty(Y+"/tileIsBeingMoved",false);if(j.callBack){j.callBack($);}}V._checkRequestQueue.call(V);},function(){V._resetGroupsOnFailure("fail_to_move_tile_msg");});}this._addRequest(W.bind(this));},_showMoveTileMessage:function(i,j,k){var q=this.oPageOperationAdapter.getTileTitle(i),w=k.title,x=r.i18n.getText("added_tile_to_group"),y=q+" "+x+" "+w;if(j.groupId!==k.groupId){M.show(y);}},_adjustTileIndex:function(j,k,q,I){var w=0,x=false,i=0;for(i=0;i<q[I].length&&w<j;i++){if(q[I][i].isTileIntentSupported){if(q[I][i]===k){x=true;}else{w++;}}}if(x){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},setDashboardView:function(i){this.oDashboardView=i;return this;},setTileVisible:function(i,V){this.oPageOperationAdapter.setTileVisible(i.object,V);},refreshTile:function(i){this.oPageOperationAdapter.refreshTile(i.object);},updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},_resetGroupsOnFailure:function(i,j){this._requestFailed();m.showLocalizedError(i,j);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(i,j){var k,q,w,x;for(k=0;k<j.length;k++){w=j[k];x=w.index;q=i[x];if(q){q.isRendered=true;q.tiles=q.tiles.concat(w.tiles);q.links=q.links.concat(w.links);}}return i;},createGroupsModelFrame:function(i,j){var k,q=[],O,w;w=function(x){var y=Q.extend({},x);y.tiles=[];y.pendingLinks=[];y.links=[];return y;};for(k=0;k<i.length;k++){O=i[k];q[k]=w(O);q[k].isRendered=false;q[k].visibilityModes=u.calcVisibilityModes(O,j);}return q;},_splitGroups:function(i,j){var k,q=[],w=0,I=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",E=this.oModel.getProperty("/personalization"),x=0,y;var z=500;for(k=0;k<i.length;k++){y=i[k];q.push(y);if(!this.segmentsStore.length){w+=this.PagingManager.getGroupHeight(y,j===k,E);}else{x+=y.tiles.length+y.links.length;}if(I&&!this.segmentsStore.length&&w>0){q.loadTilesView=true;this.segmentsStore.push(q);q=[];w=0;}if(w>=1||x>=z){this.segmentsStore.push(q);q=[];w=0;x=0;}}if(q.length){this.segmentsStore.push(q);}},_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},getSegmentContentViews:function(i){var j,k,q,w;for(j=0;j<i.length;j++){q=i[j];for(k=0;k<q.tiles.length;k++){w=q.tiles[k];if(w.isTileIntentSupported){this.getTileView(w);}}for(k=0;k<q.links.length;k++){w=q.links[k];if(w.isTileIntentSupported){this.getTileView(w,q.index);}}}this.bIsFirstSegmentViewLoaded=true;},getSegmentTabContentViews:function(i,E,j){var k,q,w=j.iSelectedGroup,x;x=this.oModel.getProperty("/groups/"+w);for(k=0;k<x.tiles.length;k++){q=x.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<x.links.length;k++){q=x.links[k];if(q.isTileIntentSupported){this.getTileView(q,w);}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},_setGroupModel:function(j){if(this.bIsGroupsModelLoading){L.info("Skip set the group model, because the group model is still loading");return;}var i=0,k,q=0,w=0,x=0,y,z,A=null,E,H,I=[];this.bIsGroupsModelLoading=true;try{q=this.oModel.getProperty("/groups").length;}catch(J){}for(i=j.length;i<q;++i){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+i));}if(!this.PagingManager){var K=Q("#dashboardGroups").width();if(!K){K=window.innerWidth;}var N=Q("#sapUshellDashboardPage-cont").height();if(N<100){N=window.innerHeight;}this.PagingManager=new P("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:N,containerWidth:K});}j.forEach(function(O){if(O.isGroupVisible){w+=O.tiles.length;}});this.bIsScrollModeAccordingKPI=w>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(j,this.oModel.getProperty("/personalization"));for(i=0;i<this.aGroupsFrame.length;i++){if(this.aGroupsFrame[i].isGroupVisible&&this.aGroupsFrame[i].visibilityModes[0]){if(A===null){A=i;this.aGroupsFrame[i].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",i);}x++;if(x>1){this.aGroupsFrame[A].showGroupHeader=false;break;}}}this._splitGroups(j,A);z=this.segmentsStore[0]?this.segmentsStore[0].length:0;y=this.aGroupsFrame.splice(0,z);n.start("FLP:DashboardManager._processSegment","_processSegment","FLP");I=this._processSegment(y);j.every(function(O,R){if(O.isDefaultGroup){k=R;return false;}return true;});I.indexOfDefaultGroup=k;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){E=this.getDashboardView();if(E){H=E.oDashboardGroupsBox;H.getBinding("groups").filter([E.oFilterSelectedGroup]);}}n.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",I);this.aGroupModel=I;if(this.oDashboardView){e.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true});}).do(this.handleFirstSegmentLoaded.bind(this));}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments();}.bind(this),0);}if(this.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}n.end("FLP:DashboardManager.loadGroupsFromArray");},getPreparedGroupModel:function(){return this.aGroupModel;},_loadGroup:function(i,N){var j=this,k="/groups/"+i,O=j.oModel.getProperty(k),I=O.isLastGroup,q=O.groupId;d.destroyFLPAggregationModel(O);if(q){N.groupId=q;}N.isLastGroup=I;N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},_hasPendingLinks:function(j){for(var i=0;i<j.length;i++){if(j[i].content[0]===undefined){return true;}}return false;},_addModelToTileViewUpdateQueue:function(i,j){this.tileViewUpdateQueue.push({uuid:i,view:j});},_updateModelWithTileView:function(i,j){var k=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){k.tileViewUpdateTimeoutID=undefined;k.oSortableDeferred.done(function(){k._updateModelWithTilesViews(i,j);});},50);},_updateGroupModelWithTilesViews:function(i,k,w,x){var y,U,z,A,E=k||0;for(var j=E;j<i.length;j=j+1){y=i[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(y.uuid===U.uuid){w.push(q);if(U.view){if(x){y.content=[U.view];}else{y.content[0].destroy();y.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(y);z=this.oPageOperationAdapter.getTileSize(y.object);A=((z!==null)&&(z==="1x2"))||false;if(y.long!==A){y.long=A;}}else{y.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(j,k){var q=this.oModel.getProperty("/groups"),w=j||0,x=[];if(!q||this.tileViewUpdateQueue.length===0){return;}for(var i=w;i<q.length;i=i+1){this._updateGroupModelWithTilesViews(q[i].tiles,k,x);if(q[i].links){this._updateGroupModelWithTilesViews(q[i].links,k,x,true);if(q[i].pendingLinks.length>0){if(!q[i].links){q[i].links=[];}q[i].links=q[i].links.concat(q[i].pendingLinks);q[i].pendingLinks=[];}}}var y=[],z;for(z=0;z<this.tileViewUpdateQueue.length;z++){if(x.indexOf(z)===-1){y.push(this.tileViewUpdateQueue[z]);}}this.tileViewUpdateQueue=y;this.oModel.setProperty("/groups",q);},getModelTileById:function(i,I){var j=this.oModel.getProperty("/groups"),k,q=false;j.every(function(w){w[I].every(function(x){if(x.uuid===i||x.originalTileId===i){k=x;q=true;}return!q;});return!q;});return k;},_attachLinkPressHandlers:function(V){var E=sap.ui.getCore().getEventBus(),i=V.attachPress?V:V.getContent()[0];i.attachPress(function(j){var k=V.getBindingContext().getObject().tileIsBeingMoved;if(!k&&this.getScope&&this.getScope()==="Actions"){switch(j.getParameters().action){case"Press":var q=V.getState?V.getState():"";if(q!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(j,V);}break;case"Remove":var w=V.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:w,items:"links"});break;default:break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),q,w,x,y=[],i,j;for(i=0;i<k.length;i++){q=k[i];w=q.tiles||[];for(j=0;j<w.length;j++){x=w[j];if(x.content.length===0){this.getTileView(x,i);}}y=q.links||[];for(j=0;j<y.length;j++){this.getTileView(y[j],i);}}this.oModel.refresh(false);var z=this.oModel.getProperty("/iSelectedGroup");if(z){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[z].groupId});},100);}},getTileViewsFromArray:function(R){var i=this;if(R.length===0){return;}R.forEach(function(j){i.getTileView(j.oTile,j.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},getTileView:function(i,j){var k=this.oPageOperationAdapter.getTileType(i.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(i)){return;}this.oDashboardLoadingManager.setTileInProgress(i);this.oPageOperationAdapter.setTileVisible(i.object,false);if(k==="card"){this._loadCardData(i);}else{this._loadTileData(i,j,k);}},_loadCardData:function(i){var j=sap.ui.getCore().byId(i.controlId);if(j&&j.setManifest&&this.isBlindLoading()){j.setManifest(i.manifest);}i.content=[i.manifest];this.oDashboardLoadingManager.setTileResolved(i);},getCurrentHiddenGroupIds:function(i){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(i);},_loadTileData:function(i,j,k){var q=this,w=this.oPageOperationAdapter.getTileView(i),x,y,z,U=this._addModelToTileViewUpdateQueue,A,N=false,E=i.uuid,H=false;if(w.state()==="resolved"){H=true;}w.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!i.isCustomTile){i.target=V.oController.navigationTargetUrl;}A=V;if(A.getComponentInstance){n.average("FLP:getComponentInstance","get info for navMode","FLP1");var I=A.getComponentInstance().getComponentData();if(I&&I.properties){i.navigationMode=I.properties.navigationMode;}n.end("FLP:getComponentInstance");}q.oDashboardLoadingManager.setTileResolved(i);x=V.getMode?V.getMode():"ContentMode";if(q.bLinkPersonalizationSupported&&x==="LineMode"){q._attachLinkPressHandlers(A);if(j>=0){y=q.oModel.getProperty("/groups");if(y[j]){i.content=[A];z=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",z);}}}else if(q.isBlindLoading()){if(i.content&&i.content.length>0){i.content[0].destroy();}i.content=[A];if(j>=0&&!H){q.oModel.refresh(false);}}if(q.isBlindLoading()){var J=q.oPageOperationAdapter.getTileSize(i.object);var K=J==="1x2";if(i.long!==K){i.long=K;}}else if(x==="LineMode"){i.content=[A];if(N){z=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",z);}}else if(i.content.length===0){i.content=[A];}else{U.apply(q,[E,A]);q._updateModelWithTileView(0,0);}});w.fail(function(){if(q.oPageOperationAdapter.getTileType(i.object)==="link"&&q.bLinkPersonalizationSupported){A=q.oPageOperationAdapter.getFailedLinkView(i);q._attachLinkPressHandlers(A);}else{A=new T({state:"Failed"});}i.content=[A];});if(!A){if(q.oPageOperationAdapter.getTileType(i.object)==="link"){N=true;A=new G({mode:"LineMode"});}else{A=new T();}i.content=[A];}},loadPersonalizedGroups:function(){var i=this;var j=new Q.Deferred();if(this.bIsGroupsRequestPending){L.info("loadPersonalizedGroups was skipped because there is already a pending request.");j.reject();return j.promise();}this.bIsGroupsRequestPending=true;this.oServiceLoadingPromise.then(function(){return i.oPageOperationAdapter.getPage();}).then(function(k){i._setGroupModel(k);i.bIsGroupsRequestPending=false;j.resolve();}).catch(function(){m.showLocalizedError("fail_to_load_groups_msg");i.bIsGroupsRequestPending=false;});n.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return j.promise();}});});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message","sap/ushell/resources"],function(M,r){"use strict";return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};
function g(m,p){return r.i18n.getText(m,p);}
function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("Message").then(function(o){o.show(t||M.Type.INFO,g(m,p),p);});}}
function a(m,p){s(m,p,M.Type.ERROR);}
function b(m,p){return function(){a(m,p);};}
});
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(D,C,U,L,a,q){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(){if(D.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(b,A){b.getInstance().then(function(c){A.registerAppKeysHandler(c.handleFocusOnMe);});});}},getEffectiveHomepageSetting:function(c,b){var p,e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=Promise.resolve();}return p.then(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}return v;}).catch(function(){return C.last(c);});},_getPersonalization:function(i){return s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2")).then(function(p){return new Promise(function(r,R){p.getPersData().done(r).fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");R();});});});},getPersonalizer:function(i,c){return sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o=a.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}.bind(this));}};return s;});
sap.ui.predefine('sap/ushell/components/StateHelper',[],function(){"use strict";
function g(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;}
function a(s,d){var m=[];if(s==="app"&&!d){var A=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];m=m.concat(A);}else if(s==="home"&&!d){var h=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];m=m.concat(h);}else{m.push(s);}return m;}
function b(s,d){var p=d?s:g(s);return p.reduce(function(r,S){var m=a(S,d);if(m){r=r.concat(m);}return r;},[]);}
return{getAllStateToUpdate:b,getModelStates:a,getPassStates:g};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy',["sap/base/Log"],function(L){"use strict";
function v(E,i){var a=0,b,I;if(!E||!i){return false;}var n=i.some(function(I){var N=!sap.ui.getCore().byId(I);if(N){L.warning("Failed to find control with id '{id}'".replace("{id}",I));}return N;});if(n){return false;}if(i.length===1&&i[0]==="endItemsOverflowBtn"){return true;}for(b=0;b<E.length;b++){I=E[b];if(I!=="endItemsOverflowBtn"){a++;}if(a+i.length>10){L.warning("maximum of six items has reached, cannot add more items.");return false;}if(i.indexOf(I)>-1){return false;}}return true;}
function A(c,i){var n=c.concat(i);var s={"sf":-3,"newDesignSwitchItem":-2,"copilotBtn":-1,"NotificationsCountButton":1,"endItemsOverflowBtn":2,"meAreaHeaderButton":3,"productSwitchBtn":4};n.sort(function(a,b){var d=s[a]||0,B=s[b]||0;if(d===B){return a.localeCompare(b);}return d-B;});return n;}
function e(c,V){var r=c;if(v(c,V)){r=A(c,V);}return r;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadItemsStrategy',[],function(){"use strict";
function a(E,i){return E.indexOf(i)===-1?E.concat(i):E;}
function A(E,i){return i.reduce(a,E);}
function f(r){return function(i){return r.indexOf(i)===-1;};}
function v(E,i){return A(E,i.filter(f(['backBtn','homeBtn']))).length<=3;}
function b(c,I){var n=[],C=c.concat(I);if(c.indexOf("backBtn")>-1||I.indexOf("backBtn")>-1){n.push("backBtn");}if(c.indexOf("homeBtn")>-1||I.indexOf("homeBtn")>-1){n.push("homeBtn");}if(n.length<3){for(var i=0;i<C.length;i++){var s=C[i];if(n.indexOf(s)===-1){n.push(s);}if(n.length>=3){break;}}}return n;}
function e(c,V){var r=c;if(v(c,V)){r=b(c,V);}return r;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ControlManager',["sap/m/Avatar","sap/m/library","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(A,m,D,E,r,S,a){"use strict";var b=m.AvatarSize;var c=[];
function i(C,h,s){c.push(_(s));}
function d(){c.forEach(function(I){var C=sap.ui.getCore().byId(I);if(C){if(C.destroyContent){C.destroyContent();}C.destroy();}});c=[];}
function _(s){var I="meAreaHeaderButton",u=sap.ushell.Container.getUser(),t=r.i18n.getText("MeAreaToggleButtonAria",u.getFullName());var M=new A({id:I,src:"{/userImage/personPlaceHolder}",initials:u.getInitials(),customDisplaySize:"2.25rem",displaySize:b.Custom,tooltip:t,press:function(){E.emit("showMeArea",Date.now());}});if(D.system.desktop){M.addEventDelegate({onsapskipforward:function(e){a.bForwardNavigation=true;e.preventDefault();window.document.getElementById("sapUshellHeaderAccessibilityHelper").focus();}});}M.setModel(s);return I;}
return{init:i,destroy:d};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function e(c,v){if(!v){v={};}return q.extend(true,{},c,v);}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/PropertyStrategiesFactory',["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(A,a,E,R,S){"use strict";return function(p,s){var o;switch(p){case"headItems":if(s==="remove"){o=R;}else{o=A;}break;case"headEndItems":if(s==="remove"){o=R;}else{o=a;}break;case"homeUri":case"showLogo":case"headerVisible":case"centralAreaElement":case"title":o=S;break;case"application":o=E;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/showNavMenuTitle":case"application/title":o=S;break;default:o=null;break;}return o;};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/RemoveItemsStrategy',["sap/base/Log"],function(L){"use strict";
function v(E,i){return i.some(function(I){return(E.indexOf(I)>=0);});}
function r(c,i){return c.filter(function(I){return(i.indexOf(I)===-1);});}
function e(c,V){var R=c;if(v(c,V)){R=r(c,V);}else{L.warning("You cannot remove item: "+V+", the item does not exists.");}return R;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy',[],function(){"use strict";
function v(n){return n!==undefined;}
function e(c,V){if(v(V)){return V;}return c;}
return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ShellHeader.controller',["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/ui/shell/OverflowListItem"],function(m,C,D,J,A,a,E,O){"use strict";var L=m.ListType;var F=O.prototype.FloatingNumberType;return C.extend("sap.ushell.components._HeaderManager.ShellHeader",{onInit:function(){this.aDoables=[];this.aDoables.push(E.on("navigateBack").do(this.pressNavBackButton.bind(this)));this.aDoables.push(E.on("showEndItemOverflow").do(this.pressEndItemsOverflow.bind(this)));this.aDoables.push(E.on("navigateFromShellApplicationNavigationMenu").do(this.navigateFromShellApplicationNavigationMenu.bind(this)));},shellUpdateAggItem:function(i,c){return sap.ui.getCore().byId(c.getObject());},pressNavBackButton:function(){E.emit("showMeArea",false);A.service().navigateBack();},pressEndItemsOverflow:function(s){var p=sap.ui.getCore().byId("headEndItemsOverflow"),S=sap.ui.getCore().byId(s),l=Promise.resolve(),M;if(!S){return;}if(!p){l=new Promise(function(r,b){sap.ui.require(["sap/ui/core/Fragment"],function(c){c.load({name:"sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",type:"XML",controller:this}).then(r).catch(b);}.bind(this),b);}.bind(this)).then(function(b){p=b;var P=sap.ui.getCore().byId("headEndItemsOverflowList");P.enhanceAccessibilityState=function(o,c){if(o.getFloatingNumberType()!==F.None){c.describedby=o._oAriaDescribedbyText.getId();}return c;};M=new J({headEndItems:a.last("/core/shellHeader/headEndItems")});p.setModel(M);});}l.then(function(){if(p.isOpen()){p.close();}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){E.emit("showNotifications",false);}p.openBy(S);}});},headEndItemsOverflowItemFactory:function(i,c){var s=sap.ui.getCore().byId(c.getObject());var f=s.getBindingPath("floatingNumber");var o=new O({id:i+"-"+s.getId(),icon:s.getIcon(),iconInset:true,title:s.getText(),type:L.Active,floatingNumber:(f?{path:f}:undefined),floatingNumberType:s.getFloatingNumberType(),press:function(){if(s){s.firePress();}var p=sap.ui.getCore().byId("headEndItemsOverflow");if(p.isOpen()){p.close();}}});if(s._oAriaLabel){o.addAriaLabelledBy(s._oAriaLabel);}if(f){o.setModel(s.getModel());}return o;},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy();},isHeadEndItemInOverflow:function(b){return b!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(b);},isHeadEndItemNotInOverflow:function(b){var o=this.isHeadEndItemOverflow();var s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(b==="ENDITEMSOVERFLOWBTN"){return o;}if(!o){return true;}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(b)>-1){return true;}if(s==="Phone"){return false;}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(b)>-1){return true;}if(s==="Desktop"&&b==="COPILOTBTN"){return true;}return false;},isHeadEndItemOverflow:function(){var n=0,e,b=a.last("/core/shellHeader/headEndItems");if(b.indexOf("endItemsOverflowBtn")===-1){return false;}var c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var d=3;if(c==="Phone"){d=1;}for(var i=0;i<b.length;i++){e=sap.ui.getCore().byId(b[i]);if(e&&e.getVisible()){n++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return n>d+1;}return n>d;},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){E.emit("centerViewPort",Date.now());window.hasher.setHash(i);}var s=sap.ui.getCore().byId("shellAppTitle");if(s){s.close();}},onExit:function(){this.aDoables.forEach(function(d){d.off();});}});});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(B,M,q){"use strict";
var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{
metadata:{},
constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refreshTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},
_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},
manageDynamicTiles:function(){var v;M.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var k,V,t,a,n={},c=q.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;this.oDashboardManager.setTileVisible(t,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){this.oDashboardManager.setTileVisible(t,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;M.end("DashboardLoadingManagerActiveDynamicTile");},
isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]===undefined&&this.oResolvedTiles[t.uuid]===undefined){return false;}return true;},
manageBusyIndicatorTiles:function(){M.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}M.end("DashboardLoadingManagerBusyIndicators");},
setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},
setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},
_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},
_refreshTiles:function(){for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);this.oDashboardManager.setTileVisible(t,true);this.oDashboardManager.refreshTile(t);break;}}}}},
_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){this.oDashboardManager.setTileVisible(t,false);}delete this.oActiveDynamicTiles[t.uuid];}},
manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]===undefined&&this.oResolvedTiles[c.oTile.uuid]===undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}
});
return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;
var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{
metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},
constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=(function(v){return function(){return v;};}(this.getInterface()));this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},
getTileHeight:function(){return this.tileHeight;},
setElementClass:function(c){this.supportedElements=c;},
_getTileHeight:function(i){return i?148:176;},
_getTileWidth:function(i,I){if(i){return I?304:360;}return I?148:176;},
getGroupHeight:function(g,f,e){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup||!e||D.system.phone){return 0;}return(a+b)/this.containerHeight;}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},
setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},
getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},
_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},
moveToNextPage:function(){this.currentPageIndex++;},
resetCurrentPageIndex:function(){this.currentPageIndex=0;},
getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},
_calcElementMatrix:function(c){var e=document.createElement("div");e.classList.add(c);document.getElementsByTagName("body")[0].appendChild(e);var a=e.clientHeight;var b=e.clientWidth;var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize.default;}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},
_calcElementsPerPage:function(){var s,b,a,m,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}
});
return P;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter',["sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library","sap/base/util/deepEqual"],function(B,C,r,m,G,g,L,M,a,d){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var e={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};
function _(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(e.PERSONALIZATION,E,p);});}
var P=B.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{
constructor:function(l){B.call(this);this.oPageBuilderService=l;},
_getIsAppBox:function(o){if(!sap.ushell.Container){return false;}var s=this.oPageBuilderService,i=!!(s.getCatalogTileTargetURL(o)&&(s.getCatalogTilePreviewTitle(o)||s.getCatalogTilePreviewSubtitle(o)));return i;},
getCurrentHiddenGroupIds:function(o){var h=o.getProperty("/groups"),H=[],s,i,j;for(i=0;i<h.length;i++){j=h[i]?h[i].isGroupVisible:true;if(h[i].object){s=this.oPageBuilderService.getGroupId(h[i].object);}if(!j&&s!==undefined){H.push(s);}}return H;},
getPreparedTileModel:function(t,i,T){var s=this.oPageBuilderService,h=g(),o,S=s.getTileSize(t),l=[],j;T=T||s.getTileType(t);if(T==="link"){l=[new G({mode:sap.m.GenericTileMode.LineMode})];}o={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":s.getTileId(t),"uuid":h,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":l,"long":S==="1x2","target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":s.isLinkPersonalizationSupported(t),"navigationMode":undefined};if(T==="card"){j=s.getCardManifest(t);o.isCard=true;if(j){o.manifest=j;}}return o;},
getPreparedGroupModel:function(o,D,l,h){var s=this.oPageBuilderService,j=(o&&s.getGroupTiles(o))||[],k=[],n=[],i,p=C.last("/core/shell/model/personalization"),H=C.last("/core/extension/enableHelp");var I=!!(o&&s.isGroupLocked(o)),q=!!(o&&s.isGroupFeatured(o));for(i=0;i<j.length;++i){var t=j[i],T=s.getTileType(t).toLowerCase();if(T==="tile"||T==="card"){k.push(this.getPreparedTileModel(j[i],I,T));}else if(T==="link"){n.push(this.getPreparedTileModel(j[i],I,T));}else{L.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(o&&s.getGroupTitle(o))||(h&&h.title)||"",object:o,groupId:g(),helpId:(H&&o)?s.getGroupId(o):null,links:n,pendingLinks:[],tiles:k,isDefaultGroup:!!D,editMode:!o,isGroupLocked:I,isFeatured:q,visibilityModes:[true,true],removable:!o||s.isGroupRemovable(o),sortable:p,isGroupVisible:!o||s.isGroupVisible(o),isEnabled:!D,isLastGroup:l||false,isRendered:!!(h&&h.isRendered),isGroupSelected:false};},
getPage:function(){M.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this));},
_getGroupsFromServer:function(){var t=this;return new Promise(function(h,i){t.oPageBuilderService.getGroups().done(function(j){M.end("FLP:DashboardManager.loadPersonalizedGroups");h(j);}).fail(i);});},
loadGroupsFromArray:function(h){var t=this;M.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");M.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(j,k){t.oPageBuilderService.getDefaultGroup().done(function(D){M.end("FLP:DashboardManager.getDefaultGroup");if(h.length===0&&D===undefined){j([]);return;}var i=0,n,N=[],l,o;h=t._sortGroups(D,h);o=h.findIndex(function(p){return d(p,D);});l=h.length;M.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<l;++i){n=t.getPreparedGroupModel(h[i],i===o,i===l-1);n.index=i;N.push(n);}M.end("FLP:DashboardManager._getGroupModel");M.end("FLP:DashboardManager.loadGroupsFromArray");j(N);}).fail(k);});},
_sortGroups:function(D,h){var i=0,t=this,j=h.findIndex(function(o){return d(o,D);}),l=[],k,o,n;if(j>-1){h.splice(j,1);}while(i<h.length){o=h[i];n=this.oPageBuilderService.isGroupLocked(o);if(n){l.push(o);h.splice(i,1);}else{i++;}}if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){var p=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),q=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return p<q?-1:1;});}l.sort(function(x,y){var I=t.oPageBuilderService.isGroupFeatured(x),p=t.oPageBuilderService.isGroupFeatured(y);if(I===p){return 0;}else if(I>p){return-1;}return 1;});k=l;k.push(D);k.push.apply(k,h);return k;},
addGroupAt:function(o,i,I){var t=this;return new Promise(function(h,j){try{if(i===undefined){t.oPageBuilderService.addGroup(o.title).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}else{t.oPageBuilderService.addGroupAt(o.title,i).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(e.RENAME_GROUP,[null,o.title,s]);h(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(j);}}catch(k){j();}});},
renameGroup:function(o,n,O){var t=this;return new Promise(function(h,i){try{t.oPageBuilderService.setGroupTitle(o.object,n).done(function(){var s=t.oPageBuilderService.getGroupId(o.object);_(e.RENAME_GROUP,[O,n,s]);h();}).fail(i);}catch(E){i();}});},
deleteGroup:function(o){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),i=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(j,k){try{t.oPageBuilderService.removeGroup(s).done(function(){_(e.DELETE_GROUP,[i,h]);j();}).fail(k);}catch(l){k();}});},
moveGroup:function(o,t,i){var h=this;return new Promise(function(j,k){try{h.oPageBuilderService.moveGroup(o.object,t).done(function(){var s=h.oPageBuilderService.getGroupId(o.object);_(e.MOVE_GROUP,[o.title,i.iFromIndex,i.iToIndex,s]);j();}).fail(k);}catch(l){k();}});},
resetGroup:function(o,i){var t=this,s=o.object,h=this.oPageBuilderService.getGroupId(s),j=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(k,l){try{t.oPageBuilderService.resetGroup(s).done(function(R){_(e.RESET_GROUP,[j,h]);k(t.getPreparedGroupModel(R||s,i,o.isLastGroup,undefined));}).fail(l);}catch(n){l();}});},
refreshGroup:function(s){var t=this,E="Failed to refresh group with id:"+s+" in the model";return new Promise(function(h){t.oPageBuilderService.getGroups().fail(function(){L.error(E,null,"sap.ushell.components.HomepageManager");h(null);}).done(function(j){var S=null;for(var i=0;i<j.length;i++){if(t.oPageBuilderService.getGroupId(j[i])===s){S=j[i];break;}}if(S){t.oPageBuilderService.getDefaultGroup().done(function(D){var I=s===D.getId(),o=t.getPreparedGroupModel(S,I,false,{isRendered:true});h(o);});}else{h(null);}});});},
getIndexOfGroup:function(h,s){var n=-1,t=this,i=this.oPageBuilderService.getGroupId(s);h.every(function(o,j){var k=t.oPageBuilderService.getGroupId(o.object);if(k===i){n=j;return false;}return true;});return n;},
getOriginalGroupIndex:function(o){var s=this.oPageBuilderService,S=o.object,h=this.oPageBuilderService.getGroups();return new Promise(function(j,k){h.done(function(l){var n;for(var i=0;i<l.length;i++){if(s.getGroupId(l[i])===s.getGroupId(S)){n=i;break;}}j(n);}).fail(k);});},
moveTile:function(t,i,s,T,h){var j=this,S,p=new Promise(function(k,l){try{var R=j.oPageBuilderService.moveTile(t.object,i.tileIndex,i.newTileIndex,s.object,T.object,h);R.done(function(o){var u=[j.oPageBuilderService.getTileTitle(t.object),j.oPageBuilderService.getGroupTitle(s.object),j.oPageBuilderService.getGroupTitle(T.object),t.uuid];_(e.MOVE_TILE,u);S=o;k(o);});R.fail(l);}catch(n){l();}});return p.then(this._getTileViewAsPromise.bind(this)).then(function(v){return Promise.resolve({content:v,originalTileId:j.oPageBuilderService.getTileId(S),object:S});});},
removeTile:function(o,t){var h=this,s=t.object,T=h.oPageBuilderService.getTileTitle(s),i=h.oPageBuilderService.getCatalogTileId(s),j=h.oPageBuilderService.getCatalogTileTitle(s),k=h.oPageBuilderService.getTileId(s),p;p=new Promise(function(l,n){try{h.oPageBuilderService.removeTile(o.object,s).done(function(){m.showLocalizedMessage("tile_deleted_msg",[T,o.title]);_(e.DELETE_TILE,[T||k,i,j,o.title]);l();}).fail(n);}catch(q){n();}});return p;},
_getTileViewAsPromise:function(t){var h=this,p=new Promise(function(i,j){var k=h.oPageBuilderService.getTileView(t);k.done(i);k.fail(j);});return p;},
refreshTile:function(s){this.oPageBuilderService.refreshTile(s);},
setTileVisible:function(s,v){this.oPageBuilderService.setTileVisible(s,v);},
getTileType:function(s){return this.oPageBuilderService.getTileType(s);},
getTileSize:function(s){return this.oPageBuilderService.getTileSize(s);},
getTileTitle:function(t){return this.oPageBuilderService.getTileTitle(t.object);},
getTileId:function(s){return this.oPageBuilderService.getTileId(s);},
isLinkPersonalizationSupported:function(s){return this.oPageBuilderService.isLinkPersonalizationSupported(s);},
getTileTarget:function(t){return this.oPageBuilderService.getTileTarget(t.object);},
getTileView:function(t){return this.oPageBuilderService.getTileView(t.object);},
getTileActions:function(t){return this.oPageBuilderService.getTileActions(t);},
getFailedLinkView:function(t){var s=this.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var h=this.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!h&&!s){h=r.i18n.getText("cannotLoadLinkInformation");}return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},
getTileModelByCatalogTileId:function(s){L.error("Cannot get tile with id "+s+": Method is not supported");},
transformGroupModel:function(){return;}
});
var f=null;return{getInstance:function(l){if(!f){f=new P(l);}return f;},destroy:function(){f=null;}};});
sap.ui.predefine('sap/ushell/components/_HomepageManager/TransientPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(q,B,C,r,m,G,I,T,u,L,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;
var d=B.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{
constructor:function(l){B.call(this);this.oPageBuilderService=l;this._createCatalogMap();},
_createCatalogMap:function(){if(this.mCatalogTiles){return;}var s=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(f){for(var i=0;i<f.length;i++){for(var j=0;j<f[i].length;j++){t.mCatalogTiles[s.getCatalogTileId(f[i][j])]=f[i][j];}}});},
getCurrentHiddenGroupIds:function(){return[];},
getTileActions:function(t){t.isStub=function(){return true;};var R=this.oPageBuilderService.getTileActions(t);delete t.isStub;return R;},
getPreparedTileModel:function(t,i,s){var f=u(),o,l=[];s=s||t.type;if(s==="link"){l=[new G({mode:b.LineMode})];}o={"isCustomTile":false,"object":t,"originalTileId":f,"uuid":f,"tileCatalogId":"","content":l,"long":false,"target":"","debugInfo":null,"isTileIntentSupported":true,"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":true,"navigationMode":undefined};if(s==="card"){o.isCard=true;o.manifest={};}return o;},
getPreparedGroupModel:function(g,D,l,o){var f=u(),h=(g&&g.tiles)||[],M=[],j=[],i;for(i=0;i<h.length;++i){var t=h[i],s=t.type.toLowerCase();if(s==="tile"||s==="card"){M.push(this.getPreparedTileModel(h[i],false,s));}else if(s==="link"){j.push(this.getPreparedTileModel(h[i],false,s));}else{L.error("Unknown tile type: '"+s+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(g&&g.title)||(o&&o.title)||"",object:g,groupId:f,links:j,pendingLinks:[],tiles:M,isDefaultGroup:!!D,editMode:!g,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!D,isLastGroup:l||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false};},
getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)]);},
addGroupAt:function(g,i,D){var f={title:g.title};return Promise.resolve(this.getPreparedGroupModel({},D,g.isLastGroup,f));},
renameGroup:function(){return Promise.resolve();},
deleteGroup:function(){return Promise.resolve();},
moveGroup:function(){return Promise.resolve();},
resetGroup:function(){return Promise.reject("Reset group not supported in transient mode");},
refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode");},
getIndexOfGroup:function(){return Promise.resolve(-1);},
getOriginalGroupIndex:function(g,f){var h;for(var i=0;i<f.length;i++){if(f[i].groupId===g.groupId){h=i;break;}}return Promise.resolve(h);},
moveTile:function(t,i,s,o,f){var g=this._findCatalogTile(t.tileCatalogId);return Promise.resolve({content:this._getTileView(g,f),originalTileId:t.uuid,object:{id:t.uuid,type:f,title:this.oPageBuilderService.getCatalogTileTitle(g)}});},
removeTile:function(){return Promise.resolve();},
_getTileView:function(o,t){if(t==="link"){return new G({mode:b.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o)});}return new G({header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o),tileContent:new T({content:new I({src:this.oPageBuilderService.getCatalogTilePreviewIcon(o)})})});},
refreshTile:function(){return;},
setTileVisible:function(){return;},
getTileType:function(s){return s.type;},
getTileSize:function(){return"1x1";},
getTileId:function(s){return s.id;},
isLinkPersonalizationSupported:function(){return true;},
getTileTarget:function(t){var o=this._findCatalogTile(t.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(o);},
getTileTitle:function(t){return t.object.title;},
_getAllCatalogTiles:function(){var s=this.oPageBuilderService;function g(f){f.map(function(o){var h=s.getCatalogId(o)||"";return s.getCatalogTitle(o)||h.split(":").slice(1).join(":");});return Promise.all(f.map(function(o){return s.getCatalogTiles(o);}));}return Promise.resolve(s.getCatalogs()).then(g);},
_findCatalogTile:function(s){return this.mCatalogTiles[s];},
getTileView:function(t){var o=this._findCatalogTile(t.tileCatalogId),v=this._getTileView(o,t.object.type),D=new q.Deferred();D.resolve(v);return D.promise();},
getFailedLinkView:function(t){var h=t.object.title||r.i18n.getText("cannotLoadLinkInformation"),s="";return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},
getTileModelByCatalogTileId:function(s,t){var o=this._findCatalogTile(s),f;t=t||"tile";f=this.getPreparedTileModel({},false,t);f.tileCatalogId=s;f.object={id:f.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(o)};var v=this._getTileView(o,t);f.content=[v];return f;},
transformGroupModel:function(g){var t=this,o;for(var i=0;i<g.length;i++){o=g[i];o.object={};o.tiles.forEach(function(f){var s=f.object;f.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);f.object={id:f.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(s)};});o.links.forEach(function(l){var s=l.object;l.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);l.object={id:l.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(s)};});}return g;}
});
var e;return{getInstance:function(l){if(!e){e=new d(l);}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.controller',["sap/ui/core/library","sap/ui/core/mvc/Controller","sap/ui/core/Component","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui5service/ShellUIService","sap/ushell/EventHub","sap/ushell/components/CatalogsManager","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/Device"],function(c,C,a,A,S,E,b,V,H,q,J,D){"use strict";var d=c.mvc.ViewType;return C.extend("sap.ushell.components.appfinder.AppFinder",{onInit:function(){var o=a.getOwnerComponentFor(this.getView());this.oRouter=o.getRouter();var v=this.getView();var m=o.getModel();v.setModel(m);this.bEnableEasyAccessSAPMenu=m.getProperty("/enableEasyAccessSAPMenu");this.bEnableEasyAccessUserMenu=m.getProperty("/enableEasyAccessUserMenu");this.bShowEasyAccessMenu=(this.bEnableEasyAccessSAPMenu||this.bEnableEasyAccessUserMenu)&&(!D.system.phone&&!D.system.tablet||D.system.combi);sap.ushell.Container.getRenderer("fiori2").createExtendedShellState("appFinderExtendedShellState",function(){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);sap.ushell.Container.getRenderer("fiori2").showHeaderItem("homeBtn",true);});this.oCatalogsManager=new b("catalogsMgr",{model:m});this.oVisualizationOrganizerHelper=V.getInstance();this.getView().setModel(this._getSubHeaderModel(),"subHeaderModel");this.oConfig=o.getComponentData().config;this.oCatalogView=sap.ui.view("catalogView",{type:d.JS,viewName:"sap.ushell.components.appfinder.Catalog",height:"100%",viewData:{parentComponent:o,subHeaderModel:this._getSubHeaderModel()}}).addStyleClass("sapUiGlobalBackgroundColor sapUiGlobalBackgroundColorForce");this.oRouter.attachRouteMatched(this._handleAppFinderNavigation.bind(this));v.createSubHeader();if(!this.bShowEasyAccessMenu){v.oPage.addContent(this.oCatalogView);setTimeout(function(){q("#catalogSelect").focus();},0);}D.resize.attachHandler(this._resizeHandler.bind(this));this.oRouter.oHashChanger=H.getInstance();},onExit:function(){this.oCatalogView.destroy();},_resizeHandler:function(){var s=this._showOpenCloseSplitAppButton();var e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");if(s!==e){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",s);if(s){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}}this._toggleViewWithToggleButtonClass(s);},_handleAppFinderNavigation:function(e){var v=this.getView();this._preloadAppHandler();this._getPathAndHandleGroupContext(e);this._toggleViewWithToggleButtonClass(this._showOpenCloseSplitAppButton());if(this.bShowEasyAccessMenu){this.onShow(e);}else if(v._showSearch("catalog")){v.updateSubHeader("catalog",false);this._toggleViewWithSearchAndTagsClasses("catalog");}sap.ui.getCore().getEventBus().publish("showCatalog");E.emit("CenterViewPointContentRendered","appFinder");E.emit("showCatalog",{sId:"showCatalog",oData:Date.now()});sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");},_showOpenCloseSplitAppButton:function(){return!D.orientation.landscape||D.system.phone||this.oView.getModel().getProperty("/isPhoneWidth");},_resetSubHeaderModel:function(){this.oSubHeaderModel.setProperty("/activeMenu",null);this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:null});this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",this._showOpenCloseSplitAppButton());this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);},_getSubHeaderModel:function(){if(this.oSubHeaderModel){return this.oSubHeaderModel;}this.oSubHeaderModel=new J();this._resetSubHeaderModel();return this.oSubHeaderModel;},onTagsFilter:function(e){var t=e.getSource(),s=t.getModel("subHeaderModel"),f=e.getSource().getSelectedItems(),T=f.length>0,o={tagMode:T,selectedTags:[]};f.forEach(function(g){o.selectedTags.push(g.getText());});s.setProperty("/activeMenu",this.getCurrentMenuName());s.setProperty("/tag",o);this.oCatalogView.getController().onTag(o);},searchHandler:function(e){var o=sap.ushell.components.getCatalogsManager();o.loadCustomTilesKeyWords();var s=e.getSource().getValue(),f=false;if(s===null){return;}var g=this.oSubHeaderModel.getProperty("/search");var h=this.oSubHeaderModel.getProperty("/activeMenu");if(this.getCurrentMenuName()!==h){h=this.getCurrentMenuName();}if(!g.searchMode&&!e.getParameter("clearButtonPressed")){g.searchMode=true;}if(g.searchMode&&D.system.phone){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}if(s!==g.searchTerm){if(this.containsOnlyWhitepaces(s)){s="*";}g.searchTerm=s;f=true;}this.oSubHeaderModel.setProperty("/search",g);this.oSubHeaderModel.setProperty("/activeMenu",h);this.oSubHeaderModel.refresh(true);if(f){this.oCatalogView.getController().onSearch(g);}},_preloadAppHandler:function(){setTimeout(function(){if(sap.ushell.Container){sap.ushell.Container.getRenderer("fiori2").applyExtendedShellState("appFinderExtendedShellState");}this._updateShellHeader(this.oView.oPage.getTitle());}.bind(this),0);},getCurrentMenuName:function(){return this.currentMenu;},_navigateTo:function(n){var s=this.oVisualizationOrganizerHelper.getNavigationContextAsText.apply(this);if(s){this.oRouter.navTo(n,{filters:s},true);}else{this.oRouter.navTo(n,{},true);}},getGroupNavigationContext:function(){var g=this.oView.getModel().getProperty("/groupContext");var G=g?g.path:null;if(G){return JSON.stringify({targetGroup:encodeURIComponent(G)});}return null;},getSystemsModels:function(){var t=this;if(this.getSystemsPromise){return this.getSystemsPromise;}var g=new q.Deferred();this.getSystemsPromise=g.promise();var m=["userMenu","sapMenu"].map(function(e){var s=new J();s.setProperty("/systemSelected",null);s.setProperty("/systemsList",[]);return t.getSystems(e).then(function(r){s.setProperty("/systemsList",r);return s;});});q.when.apply(q,m).then(function(u,s){g.resolve(u,s);});return this.getSystemsPromise;},onSegmentButtonClick:function(e){this.oSubHeaderModel.setProperty("/search/searchMode",false);this.oSubHeaderModel.setProperty("/search/searchTerm","");var n=e.getParameter("id");this._navigateTo(n);},onShow:function(e){var p=e.getParameter("name");if(p===this.getCurrentMenuName()){return;}var v=this.getView();v._updateSearchWithPlaceHolder(p);this._updateCurrentMenuName(p);this.getSystemsModels().then(function(u,s){var f=s.getProperty("/systemsList");var g=u.getProperty("/systemsList");v.oPage.removeAllContent();var h=(this.currentMenu==="sapMenu"?f:g);if(h&&h.length){v.updateSubHeader(this.currentMenu,true);}else if(v._showSearch(this.currentMenu)){v.updateSubHeader(this.currentMenu,false);}if(this.currentMenu==="catalog"){v.oPage.addContent(this.oCatalogView);}else if(this.currentMenu==="userMenu"){if(!this.userMenuView){this.userMenuView=new sap.ui.view("userMenuView",{type:d.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"USER_MENU",easyAccessSystemsModel:u,parentComponent:a.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("userMenu")}});}v.oPage.addContent(this.userMenuView);}else if(this.currentMenu==="sapMenu"){if(!this.sapMenuView){this.sapMenuView=new sap.ui.view("sapMenuView",{type:d.JS,viewName:"sap.ushell.components.appfinder.EasyAccess",height:"100%",viewData:{menuName:"SAP_MENU",easyAccessSystemsModel:s,parentComponent:a.getOwnerComponentFor(this.getView()),subHeaderModel:this._getSubHeaderModel(),enableSearch:this.getView()._showSearch("sapMenu")}});}v.oPage.addContent(this.sapMenuView);}this._setFocusToSegmentedButton(h);this.oSubHeaderModel.setProperty("/activeMenu",this.currentMenu);if(this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible")){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",false);}this.oSubHeaderModel.refresh(true);}.bind(this));},_updateCurrentMenuName:function(m){if(!this.bShowEasyAccessMenu||(m==="sapMenu"&&!this.bEnableEasyAccessSAPMenu)||(m==="userMenu"&&!this.bEnableEasyAccessUserMenu)){this.currentMenu="catalog";}else{this.currentMenu=m;}this._toggleViewWithSearchAndTagsClasses(m);},_toggleViewWithSearchAndTagsClasses:function(m){var v=this.getView();if(v._showSearch(m)){v.oPage.addStyleClass("sapUshellAppFinderSearch");}else{v.oPage.removeStyleClass("sapUshellAppFinderSearch");}if(v._showSearchTag(m)){v.oPage.addStyleClass("sapUshellAppFinderTags");}else{v.oPage.removeStyleClass("sapUshellAppFinderTags");}},_toggleViewWithToggleButtonClass:function(B){var v=this.getView();if(B){v.oPage.addStyleClass("sapUshellAppFinderToggleButton");}else{v.oPage.removeStyleClass("sapUshellAppFinderToggleButton");}},_setFocusToSegmentedButton:function(s){var v=this.getView();if(s&&s.length){var B=v.segmentedButton.getSelectedButton();setTimeout(function(){q("#"+B).focus();},0);}else{setTimeout(function(){q("#catalogSelect").focus();},0);}},_getPathAndHandleGroupContext:function(o){var p=o.getParameter("arguments");var s=p.filters;var f;try{f=JSON.parse(s);}catch(e){f=s;}this.oVisualizationOrganizerHelper.updateModelWithContext.apply(this,[f]);},_updateModelWithGroupContext:function(o){var m=this.oView.getModel(),p=(o&&decodeURIComponent(o.targetGroup))||"";var g,G;p=p==="undefined"?undefined:p;G={path:p,id:"",title:""};if(p&&p!==""){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){var t=function(){var M=m.getProperty("/groups");if(M.length){g=m.getProperty(p);G.id=l.getGroupId(g.object);G.title=g.title||l.getGroupTitle(g.object);return;}setTimeout(t,100);};t();});}m.setProperty("/groupContext",G);},getSystems:function(m){var o=new q.Deferred();sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(e){e.getEasyAccessSystems(m).done(function(s){var f=[];var g=Object.keys(s);for(var i=0;i<g.length;i++){var h=g[i];f[i]={systemName:s[h].text,systemId:h};}o.resolve(f);}).fail(function(s){o.reject("An error occurred while retrieving the systems: "+s);});}).catch(function(){o.reject("cannot get ClientSideTargetResolution service");});return o.promise();},_initializeShellUIService:function(){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});},_updateShellHeader:function(t){if(!this.oShellUIService){this._initializeShellUIService();}this.oShellUIService.setTitle(t);this.oShellUIService.setHierarchy();},containsOnlyWhitepaces:function(t){if(!t||t===""){return false;}return(!t.replace(/\s/g,"").length);}});});
sap.ui.predefine('sap/ushell/components/appfinder/AppFinder.view',["sap/ui/thirdparty/jquery","sap/ui/core/ListItem","sap/ui/model/Sorter","sap/m/MultiComboBox","sap/ui/model/BindingMode","sap/m/SearchField","sap/m/FlexBox","sap/m/SegmentedButton","sap/m/SegmentedButtonItem","sap/m/ToggleButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Toolbar","sap/m/Page","sap/ushell/resources","sap/ui/Device","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/components/ComponentKeysHandler"],function(q,L,S,M,B,a,F,b,c,T,A,d,P,r,D,e,C){"use strict";sap.ui.jsview("sap.ushell.components.appfinder.AppFinder",{createContent:function(){var R=r.i18n;this.oPage=new P("appFinderPage",{showHeader:false,showSubHeader:false,showFooter:false,showNavButton:false,enableScrolling:false,title:{parts:["/groupContext/title"],formatter:function(t){return!t?R.getText("appFinderTitle"):R.getText("appFinder_group_context_title",t);}}});return this.oPage;},_showSearch:function(m){var s="enableCatalogSearch";if(m==="userMenu"){s="enableEasyAccessUserMenuSearch";}else if(m==="sapMenu"){s="enableEasyAccessSAPMenuSearch";}return this.getModel().getProperty("/"+s);},_showSearchTag:function(m){if(m==="userMenu"||m==="sapMenu"){return false;}return this.getModel().getProperty("/enableCatalogTagFilter");},createSubHeader:function(){this.oToolbar=new d("appFinderSubHeader",{});if(D.system.desktop){C.getInstance().then(function(f){this.oToolbar.addEventDelegate({onsapskipback:function(E){E.preventDefault();e.setIsFocusHandledByAnotherHandler(true);e.sendFocusBackToShell(E);},onsapskipforward:function(E){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){E.preventDefault();f.setFocusOnCatalogTile();}},onAfterRendering:function(){q("#catalog-button").attr("accesskey","a");}});}.bind(this));}this.oToolbar.addStyleClass("sapUshellAppFinderHeader");this.oPage.setSubHeader(this.oToolbar);this.oPage.setShowSubHeader(true);if(!this.openCloseSplitAppButton){this.openCloseSplitAppButton=new T("openCloseButtonAppFinderSubheader",{icon:"sap-icon://menu2",visible:"{/openCloseSplitAppButtonVisible}",pressed:"{/openCloseSplitAppButtonToggled}",press:function(E){this.getController().oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",E.getSource().getPressed());this.openCloseSplitAppButton.setTooltip(E.getParameter("pressed")?r.i18n.getText("ToggleButtonHide"):r.i18n.getText("ToggleButtonShow"));}.bind(this),tooltip:r.i18n.getText("ToggleButtonShow")});if(D.system.desktop){this.openCloseSplitAppButton.addEventDelegate({onsaptabprevious:function(E){E.preventDefault();e.setIsFocusHandledByAnotherHandler(true);e.sendFocusBackToShell(E);}});}this.openCloseSplitAppButton.setModel(this.getController().oSubHeaderModel);this.oToolbar.addContent(this.openCloseSplitAppButton);}},updateSubHeader:function(m,E){var s,o;this.oToolbar.removeAllContent();this.oToolbar.addContent(this.openCloseSplitAppButton);if(E){s=this.createSegmentedButtons(m);this.oPage.addStyleClass("sapUshellAppFinderWithEasyAccess");this.oToolbar.addContent(s);}if(this._showSearch(m)){o=this.createSearchControl(m);this.oToolbar.addContent(o);}this.getController()._updateCurrentMenuName(m);},createSegmentedButtons:function(m){var o,R,s,f,g,i;if(this.segmentedButton){this.segmentedButton.setSelectedKey(m);return this.segmentedButton;}o=this.getController();R=r.i18n;s=[];s.push(new c("catalog",{text:R.getText("appFinderCatalogTitle"),key:"catalog",press:function(E){o.onSegmentButtonClick(E);}}));if(o.bEnableEasyAccessUserMenu){s.push(new c("userMenu",{text:R.getText("appFinderUserMenuTitle"),key:"userMenu",press:function(E){o.onSegmentButtonClick(E);}}));}if(o.bEnableEasyAccessSAPMenu){s.push(new c("sapMenu",{text:R.getText("appFinderSapMenuTitle"),key:"sapMenu",press:function(E){o.onSegmentButtonClick(E);}}));}this.segmentedButton=new b("appFinderSegmentedButtons",{items:s});if(D.system.desktop){this.segmentedButton.addEventDelegate({onsaptabprevious:function(E){var h=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(!h.getVisible()){E.preventDefault();e.setIsFocusHandledByAnotherHandler(true);e.sendFocusBackToShell(E);}}});}this.segmentedButton.setSelectedKey(m);f=this.segmentedButton.getItems();for(i=0;i<f.length;i++){g=f[i];g.addCustomData(new A({key:"aria-controls",value:g.getId()+"View",writeToDom:true}));}return this.segmentedButton;},_handleSearch:function(){this.getController().searchHandler.apply(this.getController(),arguments);q("#appFinderSearch input").select();},createSearchControl:function(m){if(!this.oAppFinderSearchContainer){this.oAppFinderSearchContainer=new F("appFinderSearchContainer");}this.oAppFinderSearchContainer.removeAllItems();if(m==="catalog"&&this._showSearchTag("catalog")){this.oAppFinderSearchContainer.addItem(this.createTagControl());}if(!this.oAppFinderSearchControl){this.oAppFinderSearchControl=new a("appFinderSearch",{search:this._handleSearch.bind(this),value:{path:"subHeaderModel>/search/searchTerm",mode:B.OneWay}}).addStyleClass("help-id-catalogSearch");this.oAppFinderSearchControl.addCustomData(new A({key:"aria-controls",value:"",writeToDom:true}));if(D.system.desktop){C.getInstance().then(function(f){this.oAppFinderSearchControl.addEventDelegate({onsaptabnext:function(E){var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o.getVisible()&&!o.getPressed()){E.preventDefault();e.setIsFocusHandledByAnotherHandler(true);f.setFocusOnCatalogTile();}}});}.bind(this));}}this.oAppFinderSearchContainer.addItem(this.oAppFinderSearchControl);this._updateSearchWithPlaceHolder(m);return this.oAppFinderSearchContainer;},_updateSearchWithPlaceHolder:function(m){var s="";if(m==="catalog"){s="EasyAccessMenu_SearchPlaceHolder_Catalog";}else if(m==="userMenu"){s="EasyAccessMenu_SearchPlaceHolder_UserMenu";}else if(m==="sapMenu"){s="EasyAccessMenu_SearchPlaceHolder_SAPMenu";}if(s&&this.oAppFinderSearchControl){this.oAppFinderSearchControl.setPlaceholder(r.i18n.getText(s));this.oAppFinderSearchControl.setTooltip(r.i18n.getText(s));}},createTagControl:function(){if(this.oAppFinderTagFilter){return this.oAppFinderTagFilter;}var o=this.getController();this.oAppFinderTagFilter=new M("appFinderTagFilter",{selectedKeys:{path:"subHeaderModel>/tag/selectedTags"},tooltip:"{i18n>catalogTilesTagfilter_tooltip}",placeholder:"{i18n>catalogTilesTagfilter_HintText}",visible:{path:"/tagList",formatter:function(t){return t.length>0;}},items:{path:"/tagList",sorter:new S("tag",false,false),template:new L({text:"{tag}",key:"{tag}"})},selectionChange:[o.onTagsFilter,o]}).addStyleClass("help-id-catalogTagFilter");return this.oAppFinderTagFilter;},getControllerName:function(){return"sap.ushell.components.appfinder.AppFinder";}});});
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.controller',["sap/ushell/library","sap/ushell/components/_HomepageManager/PagingManager","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/Device","sap/ui/core/library","sap/ui/model/Context","sap/m/MessageToast","sap/ushell/Config","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/utils/WindowUtils"],function(u,P,U,q,r,F,a,m,D,c,C,M,b,V,W){"use strict";var d=c.mvc.ViewType;var S=m.SplitAppMode;var A=u.AppType;sap.ui.controller("sap.ushell.components.appfinder.Catalog",{oPopover:null,onInit:function(){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this.oLaunchPageService=l;}.bind(this));this.categoryFilter="";this.preCategoryFilter="";var v=this.getView();this.oMainModel=v.getModel();this.oSubHeaderModel=v.getModel("subHeaderModel");this.resetPage=false;this.bIsInProcess=false;this.oVisualizationOrganizerHelper=v.oVisualizationOrganizerHelper;this.oCatalogsContainer=v.oCatalogsContainer;sap.ui.getCore().byId("catalogSelect").addEventDelegate({onBeforeRendering:this.onBeforeSelectRendering},this);var R=U.getRouterFor(this);R.attachRouteMatched(this.onShow,this);this.timeoutId=0;document.subHeaderModel=this.oSubHeaderModel;document.mainModel=this.oMainModel;var t=this.oSubHeaderModel.bindProperty("/openCloseSplitAppButtonToggled");t.attachChange(this.handleToggleButtonModelChanged,this);v.oCatalogsContainer.setHandleSearchCallback(this.handleSearchModelChanged.bind(this));},onBeforeRendering:function(){sap.ui.getCore().getEventBus().publish("renderCatalog");},onAfterRendering:function(){this.wasRendered=true;if(!this.PagingManager){this._setPagingManager();}if(this.PagingManager.currentPageIndex===0){this.allocateNextPage();}q(window).resize(function(){var w=q(window).width();var e=q(window).height();this.PagingManager.setContainerSize(w,e);}.bind(this));this._handleAppFinderWithDocking();sap.ui.getCore().getEventBus().subscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);},_setPagingManager:function(){this.lastCatalogId=0;this.PagingManager=new P("catalogPaging",{supportedElements:{tile:{className:"sapUshellTile"}},containerHeight:window.innerHeight,containerWidth:window.innerWidth});this.oCatalogsContainer.setPagingManager(this.PagingManager);},_decodeUrlFilteringParameters:function(s){var o;try{o=JSON.parse(s);}catch(e){o=s;}var h=(o&&o.tagFilter&&o.tagFilter)||[];if(h){try{this.tagFilter=JSON.parse(h);}catch(e){this.tagFilter=[];}}else{this.tagFilter=[];}this.categoryFilter=(o&&o.catalogSelector&&o.catalogSelector)||this.categoryFilter;if(this.categoryFilter){this.categoryFilter=window.decodeURIComponent(this.categoryFilter);}this.searchFilter=(o&&o.tileFilter&&o.tileFilter)||null;if(this.searchFilter){this.searchFilter=window.decodeURIComponent(this.searchFilter);}},_applyFilters:function(w){var s=false;if(this.categoryFilter){this.categoryFilter=r.i18n.getText("all")===this.categoryFilter?"":this.categoryFilter;if(this.categoryFilter!==this.preCategoryFilter){s=true;}this.oView.setCategoryFilterSelection(this.categoryFilter,s);}else{s=true;this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;if(this.searchFilter&&this.searchFilter.length){this.searchFilter=this.searchFilter.replace(/\*/g,"");this.searchFilter=this.searchFilter.trim();this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:this.searchFilter});}else if(w){this.oSubHeaderModel.setProperty("/search",{searchMode:false,searchTerm:""});this.resetPage=true;}if(this.tagFilter&&this.tagFilter.length){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:this.tagFilter});}else if(w){this.oSubHeaderModel.setProperty("/tag",{tagMode:false,selectedTags:[]});this.resetPage=true;}this.handleSearchModelChanged();},_handleAppFinderAfterNavigate:function(){this.clearFilters();},clearFilters:function(){var s=false;if(this.categoryFilter!==this.preCategoryFilter){s=true;}var e=this.oSubHeaderModel.getProperty("/search/searchMode");var t=this.oSubHeaderModel.getProperty("/tag/tagMode");if(e){this.oSubHeaderModel.setProperty("/search",{searchMode:true,searchTerm:""});}if(t){this.oSubHeaderModel.setProperty("/tag",{tagMode:true,selectedTags:[]});}if(this.categoryFilter&&this.categoryFilter!==""){this.selectedCategoryId=undefined;this.categoryFilter=undefined;this.getView().getModel().setProperty("/categoryFilter","");this.oView.setCategoryFilterSelection("",s);}this.preCategoryFilter=this.categoryFilter;this.handleSearchModelChanged();},onShow:function(e){var s=e.getParameter("arguments").filters;q.extend(this.getView().getViewData(),e);this._decodeUrlFilteringParameters(s);if(this.wasRendered&&!s){this.clearFilters();}else{this._applyFilters(this.wasRendered);}},allocateNextPage:function(){if(!this.oCatalogsContainer.nAllocatedUnits||this.oCatalogsContainer.nAllocatedUnits===0){this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oCatalogsContainer.applyPagingCategoryFilters(this.allocateTiles,this.categoryFilter);}},onBeforeSelectRendering:function(){var s=sap.ui.getCore().byId("catalogSelect");var i=q.grep(s.getItems(),function(I){return I.getBindingContext().getObject().title===this.categoryFilter;}.bind(this));if(!i.length&&s.getItems()[0]){i.push(s.getItems()[0]);}},setTagsFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:(this.searchFilter&&this.searchFilter.length)?encodeURIComponent(this.searchFilter):"",tagFilter:f.length?JSON.stringify(f):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setCategoryFilter:function(f){var p={catalogSelector:f,tileFilter:this.searchFilter?encodeURIComponent(this.searchFilter):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},setSearchFilter:function(f){var p={catalogSelector:this.categoryFilter?this.categoryFilter:"All",tileFilter:f?encodeURIComponent(f):"",tagFilter:this.tagFilter.length?JSON.stringify(this.tagFilter):[]};this._addNavigationContextToFilter(p);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(p)});},_addNavigationContextToFilter:function(f){var o=this.oVisualizationOrganizerHelper.getNavigationContext.apply(this);if(o){Object.keys(o).forEach(function(k){f[k]=o[k];});}return f;},onSearch:function(s){var e=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(e)!==-1){var f=s.searchTerm?s.searchTerm:"";this.setSearchFilter(f);}else{this._restoreSelectedMasterItem();}},onTag:function(t){var s=this.oSubHeaderModel.getProperty("/activeMenu");if(this.oView.getId().indexOf(s)!==-1){var e=t.selectedTags?t.selectedTags:[];this.setTagsFilter(e);}else{this._restoreSelectedMasterItem();}},getGroupContext:function(){var o=this.getView().getModel();var g=o.getProperty("/groupContext/path");return{targetGroup:encodeURIComponent(g||"")};},_isTagFilteringChanged:function(s){var e=s.length===this.tagFilter.length;var i=e;if(!i){return true;}s.some(function(t){i=this.tagFilter&&Array.prototype.indexOf.call(this.tagFilter,t)!==-1;return!i;}.bind(this));return i;},_setUrlWithTagsAndSearchTerm:function(s,e){var o={tileFilter:s&&s.length?encodeURIComponent(s):"",tagFilter:e.length?JSON.stringify(e):[]};this._addNavigationContextToFilter(o);this.getView().parentComponent.getRouter().navTo("catalog",{filters:JSON.stringify(o)});},handleSearchModelChanged:function(){var s=this.oSubHeaderModel.getProperty("/search/searchMode");var t=this.oSubHeaderModel.getProperty("/tag/tagMode");var e=this.oSubHeaderModel.getProperty("/search/searchTerm");var f=this.oSubHeaderModel.getProperty("/tag/selectedTags");var g=[];var T,o,h,p,i;if(!this.PagingManager){this._setPagingManager();}this.PagingManager.resetCurrentPageIndex();this.nAllocatedTiles=0;this.PagingManager.moveToNextPage();this.allocateTiles=this.PagingManager._calcElementsPerPage();this.oView.oCatalogsContainer.updateAllocatedUnits(this.allocateTiles);this.oView.oCatalogsContainer.resetCatalogPagination();var j=sap.ui.getCore().byId("catalogTilesDetailedPage");if(j){j.scrollTo(0,0);}if(s||t||this.resetPage){if(f&&f.length>0){T=new F("tags","EQ","v");T.fnTest=function(y){var z,B;if(f.length===0){return true;}for(z=0;z<f.length;z++){B=f[z];if(y.indexOf(B)===-1){return false;}}return true;};o=new F([T],true);}e=e?e.replace(/\*/g,""):e;if(e){var k=e.split(/[\s,]+/);var l=new F(q.map(k,function(y){return(y&&new F("keywords",a.Contains,y));}),true);var n=new F(q.map(k,function(y){return(y&&new F("title",a.Contains,y));}),true);var v=new F(q.map(k,function(y){return(y&&new F("subtitle",a.Contains,y));}),true);g.push(l);g.push(n);g.push(v);h=new F(g,false);}var w=this.oView.oCatalogsContainer.getCatalogs();this.oSearchResultsTotal=[];var x=this;if(o&&o.aFilters.length>0&&h){i=new F([h].concat([o]),true);}else if(o&&o.aFilters.length>0){i=new F([o],true);}else if(h&&h.aFilters.length>0){i=new F([h],true);}w.forEach(function(y){y.getBinding("customTilesContainer").filter(i);y.getBinding("appBoxesContainer").filter(i);});this.oView.oCatalogsContainer.bSearchResults=false;this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);this.bSearchResults=this.oView.oCatalogsContainer.bSearchResults;this.oView.splitApp.toDetail(x.getView()._calculateDetailPageId());this.resetPage=false;}else{this.oView.oCatalogsContainer.applyPagingCategoryFilters(this.oView.oCatalogsContainer.nAllocatedUnits,this.categoryFilter);}p=this.getView()._calculateDetailPageId();this.oView.splitApp.toDetail(p);},_handleAppFinderWithDocking:function(){if(q(".sapUshellContainerDocked").length>0){if(q("#mainShell").width()<710){if(window.innerWidth<1024){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}else{this.oView.splitApp.setMode(S.HideMode);this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",true);}}else{this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonVisible",false);this.oView.splitApp.setMode(S.ShowHideMode);}}},_restoreSelectedMasterItem:function(){var o=this.oView.splitApp.getMasterPage("catalogSelect");var O=sap.ui.getCore().byId(this.selectedCategoryId);if(O){this.categoryFilter=O.getTitle();}o.setSelectedItem(O);},handleToggleButtonModelChanged:function(){var B=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonVisible");var e=this.oSubHeaderModel.getProperty("/openCloseSplitAppButtonToggled");if((e!==this.bCurrentButtonToggled)&&B){if(!D.system.phone){if(e&&!this.oView.splitApp.isMasterShown()){this.oView.splitApp.showMaster();}else if(this.oView.splitApp.isMasterShown()){this.oView.splitApp.hideMaster();}}else if(this.oView.splitApp.isMasterShown()){var o=sap.ui.getCore().byId(this.getView()._calculateDetailPageId());this.oView.splitApp.toDetail(o);}else if(e){var f=sap.ui.getCore().byId("catalogSelect");this.oView.splitApp.toMaster(f,"show");}}this.bCurrentButtonToggled=e;},_handleCatalogListItemPress:function(e){this.onCategoryFilter(e);if(this.oSubHeaderModel.getProperty("/search/searchTerm")!==""){this.oSubHeaderModel.setProperty("/search/searchMode",true);}if(D.system.phone||D.system.tablet){this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled",!this.oSubHeaderModel.setProperty("/openCloseSplitAppButtonToggled"));}},onCategoryFilter:function(e){var o=e.getSource();var s=o.getSelectedItem();var f=s.getBindingContext();var g=f.getModel();if(g.getProperty("static",f)){g.setProperty("/showCatalogHeaders",true);this.setCategoryFilter();this.selectedCategoryId=undefined;this.categoryFilter=undefined;}else{g.setProperty("/showCatalogHeaders",false);this.setCategoryFilter(window.encodeURIComponent(s.getBindingContext().getObject().title));this.categoryFilter=s.getTitle();this.selectedCategoryId=s.getId();}},onTileAfterRendering:function(e){var j=q(e.oSource.getDomRef());var f=j.find(".sapMGT");f.attr("tabindex","-1");},catalogTilePress:function(){sap.ui.getCore().getEventBus().publish("launchpad","catalogTileClick");},onAppBoxPressed:function(e){var o=e.getSource();var t=o.getBindingContext().getObject();var p;if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}p=this.oLaunchPageService.getAppBoxPressHandler(t);if(p){p(t);}else{var s=o.getProperty("url");if(s&&s.indexOf("#")===0){hasher.setHash(s);}else{var l=b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging");if(l){var R={title:o.getProperty("title"),appType:A.URL,url:s,appId:s};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}W.openURL(s,"_blank");}}},onTilePinButtonClick:function(e){var l=this.oLaunchPageService;var o=l.getDefaultGroup();o.done(function(f){var B=e.getSource();var s=B.getBindingContext();var g=this.getView().getModel();var G=g.getProperty("/groupContext/path");if(G){this._handleTileFooterClickInGroupContext(s,G);}else{var h=g.getProperty("/groups");var i=this.getCatalogTileDataFromModel(s);var t=i.tileData.associatedGroups;var j=[];var R=h.map(function(k){var n,v;n=l.getGroupId(k.object);v=!((t&&Array.prototype.indexOf.call(t,n)===-1));j.push({id:n,title:this._getGroupTitle(f,k.object),selected:v});return{selected:v,initiallySelected:v,oGroup:k};}.bind(this));var p=sap.ui.getCore().byId("sapUshellGroupsPopover");var T;if(!p){T=l.getCatalogTilePreviewTitle(g.getProperty(s.sPath).src);if(!T){T=l.getCatalogTileTitle(g.getProperty(s.sPath).src);}p=new sap.ui.view("sapUshellGroupsPopover",{type:d.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:R,title:T,enableHideGroups:g.getProperty("/enableHideGroups"),enableHelp:g.getProperty("/enableHelp"),sourceContext:s,catalogModel:this.getView().getModel(),catalogController:this}});}p.open(B).then(this._handlePopoverResponse.bind(this,s,i));}}.bind(this));},_getGroupTitle:function(o,g){var l=this.oLaunchPageService;var t;if(o&&(l.getGroupId(o)===l.getGroupId(g))){t=r.i18n.getText("my_group");}else{t=l.getGroupTitle(g);}return t;},_handlePopoverResponse:function(s,e,f){if(!f.addToGroups.length&&!f.newGroups.length&&!f.removeFromGroups.length){return;}var o=this.getView().getModel();var g=o.getProperty("/groups");var p=[];f.addToGroups.forEach(function(h){var i=g.indexOf(h);var G=new C(o,"/groups/"+i);p.push(this._addTile(s,G));}.bind(this));f.removeFromGroups.forEach(function(h){var t=s.getModel().getProperty(s.getPath()).id;var i=g.indexOf(h);p.push(this._removeTile(t,i));}.bind(this));f.newGroups.forEach(function(h){var n=(h.length>0)?h:r.i18n.getText("new_group_name");p.push(this._createGroupAndSaveTile(s,n));}.bind(this));q.when.apply(q,p).then(function(){var R=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(e,f,R);}.bind(this));},_handlePopoverGroupsActionPromises:function(e,p,f){var E=f.filter(function(w){return!w.status;});if(E.length){var o=this.prepareErrorMessage(E,e.tileData.title);var g=sap.ushell.components.getCatalogsManager();g.resetAssociationOnFailure(o.messageId,o.parameters);return;}var t=[];var l=this.oLaunchPageService;p.allGroups.forEach(function(w){if(w.selected){var G=l.getGroupId(w.oGroup.object);t.push(G);}});var h=this.getView().getModel();if(p.newGroups.length){var i=h.getProperty("/groups");var n=i.slice(i.length-p.newGroups.length);n.forEach(function(w){var G=l.getGroupId(w.object);t.push(G);});}h.setProperty(e.bindingContextPath+"/associatedGroups",t);var s=p.addToGroups[0]?p.addToGroups[0].title:"";if(s.length===0&&p.newGroups.length){s=p.newGroups[0];}var j=p.removeFromGroups[0]?p.removeFromGroups[0].title:"";var k=p.addToGroups.length+p.newGroups.length;var R=p.removeFromGroups.length;var v=this.prepareDetailedMessage(e.tileData.title,k,R,s,j);M.show(v,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_getCatalogTileIndexInModel:function(s){var t=s.sPath;var T=t.split("/");var i=T[T.length-1];return i;},_handleTileFooterClickInGroupContext:function(s,g){var l=this.oLaunchPageService;var o=this.getView().getModel();var e=this.getCatalogTileDataFromModel(s);var f=e.tileData.associatedGroups;var G=o.getProperty(g);var h=l.getGroupId(G.object);var i=f?Array.prototype.indexOf.call(f,h):-1;var t=e.bindingContextPath;if(e.isBeingProcessed){return;}o.setProperty(t+"/isBeingProcessed",true);var T;var j;if(i===-1){var k=new C(s.getModel(),g);T=this._addTile(s,k);j=true;}else{var n=s.getModel().getProperty(s.getPath("id"));var p=parseInt(g.split("/")[2],10);T=this._removeTile(n,p);j=false;}T.done(function(v){if(v.status){this._groupContextOperationSucceeded(s,e,G,j);}else{this._groupContextOperationFailed(e,G,j);}}.bind(this));T.always(function(){o.setProperty(t+"/isBeingProcessed",false);});},_groupContextOperationSucceeded:function(s,o,g,t){var l=this.oLaunchPageService;var G=l.getGroupId(g.object);var e=o.tileData.associatedGroups;var f;if(t){e.push(G);s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",e);f=this.prepareDetailedMessage(o.tileData.title,1,0,g.title,"");}else{for(var i=0;i<e.length;i++){if(e[i]===G){e.splice(i,1);break;}}s.getModel().setProperty(o.bindingContextPath+"/associatedGroups",e);f=this.prepareDetailedMessage(o.tileData.title,0,1,"",g.title);}M.show(f,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});},_groupContextOperationFailed:function(o,g,t){var e=sap.ushell.components.getCatalogsManager();var E;if(t){E=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[o.tileData.title,g.title]});}else{E=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[o.tileData.title,g.title]});}e.notifyOnActionFailure(E.messageId,E.parameters);},prepareErrorMessage:function(e,t){var g,s,f,h,i;var n=0;var N=0;var j=false;for(var k in e){g=e[k].group;s=e[k].action;if(s==="add"){n++;if(n===1){f=g.title;}}else if(s==="remove"){N++;if(N===1){h=g.title;}}else if(s==="addTileToNewGroup"){n++;if(n===1){f=g.title;}}else{j=true;}}if(j){if(e.length===1){i=r.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length===1){if(n){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_group",parameters:[t,f]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_group",parameters:[t,h]});}}else if(N===0){i=r.i18n.getText({messageId:"fail_tile_operation_add_to_several_groups",parameters:[t]});}else if(n===0){i=r.i18n.getText({messageId:"fail_tile_operation_remove_from_several_groups",parameters:[t]});}else{i=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}return i;},prepareDetailedMessage:function(t,n,e,f,g){var s;if(n===0){if(e===1){s=r.i18n.getText("tileRemovedFromSingleGroup",[t,g]);}else if(e>1){s=r.i18n.getText("tileRemovedFromSeveralGroups",[t,e]);}}else if(n===1){if(e===0){s=r.i18n.getText("tileAddedToSingleGroup",[t,f]);}else if(e===1){s=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSingleGroup",[t,f,g]);}else if(e>1){s=r.i18n.getText("tileAddedToSingleGroupAndRemovedFromSeveralGroups",[t,f,e]);}}else if(n>1){if(e===0){s=r.i18n.getText("tileAddedToSeveralGroups",[t,n]);}else if(e===1){s=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSingleGroup",[t,n,g]);}else if(e>1){s=r.i18n.getText("tileAddedToSeveralGroupsAndRemovedFromSeveralGroups",[t,n,e]);}}return s;},getCatalogTileDataFromModel:function(s){var B=s.getPath();var o=s.getModel();var t=o.getProperty(B);return{tileData:t,bindingContextPath:B,isBeingProcessed:t.isBeingProcessed};},_addTile:function(t,g){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.createTile({catalogTileContext:t,groupContext:g});p.done(function(f){e.resolve(f);});return e;},_removeTile:function(t,i){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.deleteCatalogTileFromGroup({tileId:t,groupIndex:i});p.done(function(f){e.resolve(f);});return e;},_createGroupAndSaveTile:function(t,n){var o=sap.ushell.components.getCatalogsManager();var e=q.Deferred();var p=o.createGroupAndSaveTile({catalogTileContext:t,newGroupName:n});p.done(function(f){e.resolve(f);});return e;},onExit:function(){V.destroy();sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderWithDocking",this._handleAppFinderWithDocking,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","appFinderAfterNavigate",this._handleAppFinderAfterNavigate,this);}});});
sap.ui.predefine('sap/ushell/components/appfinder/Catalog.view',["sap/ui/core/library","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/ui/launchpad/CatalogEntryContainer","sap/ushell/ui/launchpad/CatalogsContainer","sap/ushell/ui/launchpad/Tile","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/List","sap/m/StandardListItem","sap/ui/Device","sap/m/MessagePage","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/BusyIndicator","sap/m/SplitApp","sap/ushell/Config","sap/ushell/components/appfinder/VisualizationOrganizerHelper","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/components/ComponentKeysHandler"],function(c,A,P,C,a,T,q,M,r,b,L,S,D,d,f,g,B,h,i,V,j,k){"use strict";var l=c.AccessibleLandmarkRole;sap.ui.jsview("sap.ushell.components.appfinder.Catalog",{oController:null,oVisualizationOrganizerHelper:V.getInstance(),formatPinButtonTooltip:function(G,o){var t;if(o.path){var e=G?Array.prototype.indexOf.call(G,o.id):-1;t=e!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";return r.i18n.getText(t,o.title);}t=G&&G.length?"EasyAccessMenu_PinButton_Toggled_Tooltip":"EasyAccessMenu_PinButton_UnToggled_Tooltip";return r.i18n.getText(t);},formatPinButtonSelectState:function(e,m,G,s){if(G){var n=e?Array.prototype.indexOf.call(e,s):-1;return n!==-1;}return!!m;},createContent:function(o){var t=this;this.oViewData=this.getViewData();this.parentComponent=this.oViewData.parentComponent;var m=this.parentComponent.getModel();this.setModel(m);this.setModel(this.oViewData.subHeaderModel,"subHeaderModel");this.oVisualizationOrganizerHelper.setModel(m);this.oController=o;function n(e){return((e!==null)&&(e==="1x2"||e==="2x2"))||false;}var p=new P({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});var s=new P({icon:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonIcon},type:{path:"id",formatter:this.oVisualizationOrganizerHelper.formatPinButtonType},selected:{parts:["associatedGroups","associatedGroups/length","/groupContext/path","/groupContext/id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","/groupContext","id"],formatter:this.oVisualizationOrganizerHelper.formatPinButtonTooltip.bind(this)},press:[this.oVisualizationOrganizerHelper.onTilePinButtonClick,this],visible:false});this.oAppBoxesTemplate=new A({title:"{title}",icon:"{icon}",subtitle:"{subtitle}",url:"{url}",navigationMode:"{navigationMode}",pinButton:s,press:[o.onAppBoxPressed,o]});this.oVisualizationOrganizerHelper.shouldPinButtonBeVisible().then(function(e){s.setVisible(e);p.setVisible(e);});s.addCustomData(new b({key:"tabindex",value:"-1",writeToDom:true}));s.addStyleClass("sapUshellPinButton");p.addCustomData(new b({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oTileTemplate=new T({tileViews:{path:"content",factory:function(I,e){return e.getObject();}},long:{path:"size",formatter:n},tileCatalogId:"{id}",pinButton:p,press:[o.catalogTilePress,o],afterRendering:o.onTileAfterRendering});this.oCatalogSelect=new L("catalogSelect",{visible:"{/enableCatalogSelection}",rememberSelections:true,mode:"SingleSelectMaster",items:{path:"/masterCatalogs",template:new S({type:"Active",title:"{title}"})},showNoData:false,itemPress:[o._handleCatalogListItemPress,o],selectionChange:[o._handleCatalogListItemPress,o]});this.getCatalogSelect=function(){return this.oCatalogSelect;};var u=this.oCatalogSelect.onAfterRendering;if(D.system.desktop){k.getInstance().then(function(G){this.oCatalogSelect.addEventDelegate({onsaptabnext:function(H){try{H.preventDefault();j.setIsFocusHandledByAnotherHandler(true);G.setFocusOnCatalogTile();}catch(e){}},onsapskipforward:function(H){try{H.preventDefault();j.setIsFocusHandledByAnotherHandler(true);G.setFocusOnCatalogTile();}catch(e){}},onsapskipback:function(H){try{H.preventDefault();j.setIsFocusHandledByAnotherHandler(true);var I=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(I.getVisible()){I.focus();}else{G.appFinderFocusMenuButtons(H);}}catch(e){}}});}.bind(this));}if(m.getProperty("/enableHelp")){this.oCatalogSelect.addStyleClass("help-id-catalogCategorySelect");}this.setCategoryFilterSelection=function(e,G){var H=t.getCatalogSelect();var I=H.getItems();var J=e;var K=0;if(!J||J===""){J=r.i18n.getText("all");}I.forEach(function(N,O){if(N.getTitle()===J){K=O;H.setSelectedItem(N);}});if(I.length!==0&&G){I[K].focus();}};this.oCatalogSelect.onAfterRendering=function(){var e=t.oController.categoryFilter||r.i18n.getText("all");t.setCategoryFilterSelection(e);if(u){u.apply(this,arguments);}if(!this.getSelectedItem()){this.setSelectedItem(this.getItems()[0]);}setTimeout(function(){var G=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(G.length){G.eq(0).focus();}else{q("#catalog-button").focus();}},0);};var v=this.oCatalogSelect._onAfterRenderingPopover;this.oCatalogSelect._onAfterRenderingPopover=function(){if(this._oPopover){this._oPopover.setFollowOf(false);}if(v){v.apply(this,arguments);}};var E=sap.ui.getCore().getEventBus();var w;var U=function(){this.splitApp.toMaster("catalogSelect","show");if(!D.system.phone){w=this._calculateDetailPageId();if(w!==this.splitApp.getCurrentDetailPage().getId()){this.splitApp.toDetail(w);}}}.bind(this);E.subscribe("launchpad","catalogContentLoaded",function(){setTimeout(U,500);},this);E.subscribe("launchpad","afterCatalogSegment",U,this);var x=new C({header:"{title}",customTilesContainer:{path:"customTiles",template:this.oTileTemplate,templateShareable:true},appBoxesContainer:{path:"appBoxes",template:this.oAppBoxesTemplate,templateShareable:true}});this.oMessagePage=new d({visible:true,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});this.oCatalogsContainer=new a("catalogTiles",{categoryFilter:"{/categoryFilter}",catalogs:{path:"/catalogs",templateShareable:true,template:x},busy:true}).addStyleClass("sapUiTinyMarginTop");this.oCatalogsContainer.addStyleClass("sapUshellCatalogTileContainer");this.oCatalogsContainer.addEventDelegate({onsaptabprevious:function(e){var G=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");var H=q(e.srcControl.getDomRef());if(G.getVisible()&&!G.getPressed()&&!H.hasClass("sapUshellPinButton")){e.preventDefault();var I=sap.ui.getCore().byId("appFinderSearch");I.focus();}},onsapskipback:function(e){var G=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(G.getVisible()&&!G.getPressed()){e.preventDefault();G.focus();}}});this.oCatalogsContainer.onAfterRendering=function(){var e=sap.ui.getCore().byId("catalogTilesDetailedPage");if(!this.getBusy()){e.setBusy(false);M.end("FLP:AppFinderLoadingStartToEnd");}else{e.setBusy(true);}q("#catalogTilesDetailedPage-cont").scroll(function(){var G=sap.ui.getCore().byId("catalogTilesDetailedPage");var H=G.getScrollDelegate();var I=H.getScrollTop();var J=H.getMaxScrollTop();if(J-I<=30+3*t.oController.PagingManager.getTileHeight()&&t.oController.bIsInProcess===false){t.oController.bIsInProcess=true;t.oController.allocateNextPage();setTimeout(function(){t.oController.bIsInProcess=false;},0);}});};var y=new f("catalogTilesDetailedPage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oCatalogsContainer.addStyleClass("sapUshellCatalogPage")],landmarkInfo:new g({contentLabel:r.i18n.getText("appFinderCatalogTitle"),contentRole:l.None,rootRole:l.None})});var z=new f("catalogMessagePage",{showHeader:false,showFooter:false,showNavButton:false,content:[this.oMessagePage]});var F=new B("catalogSelectBusyIndicator",{size:"1rem"});this.splitApp=new h("catalogViewMasterDetail",{masterPages:[F,this.oCatalogSelect],detailPages:[y,z],mode:"{= ${/isPhoneWidth} ? 'HideMode' : 'ShowHideMode'}"});return this.splitApp;},_calculateDetailPageId:function(){var s=this.getModel("subHeaderModel");var e=s.getProperty("/search/searchMode");var t=s.getProperty("/tag/tagMode");var n=!!this.getModel().getProperty("/catalogsNoDataText");var I;if(e||t){I=this.getController().bSearchResults?"catalogTilesDetailedPage":"catalogMessagePage";}else if(n){I="catalogMessagePage";}else{I="catalogTilesDetailedPage";}return I;},getControllerName:function(){return"sap.ushell.components.appfinder.Catalog";}});});
sap.ui.predefine('sap/ushell/components/appfinder/Component',["sap/ui/core/UIComponent","sap/ui/core/mvc/JSView","sap/ui/thirdparty/hasher","sap/ushell/components/CatalogsManager","sap/ushell/resources","sap/ushell/Config","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/SharedComponentUtils","sap/base/util/UriParameters"],function(U,J,h,C,r,a,m,s,b){"use strict";return U.extend("sap.ushell.components.appfinder.Component",{metadata:{manifest:"json",library:"sap.ushell"},parseOldCatalogParams:function(u){var p=new b(u).mParams;var v,k;for(k in p){if(p.hasOwnProperty(k)){v=p[k][0];p[k]=v.indexOf("/")!==-1?encodeURIComponent(v):v;}}return p;},createContent:function(){this.oModel=m.getModel();this.setModel(this.oModel);var H,p,c;var P=a.last("/core/shell/enablePersonalization");if(P){s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");}this.oCatalogsManager=new C("dashboardMgr",{model:this.oModel});this.setModel(r.i18nModel,"i18n");s.toggleUserActivityLog();H=h.getHash();Promise.all([sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(S){var o=S[0];var u=S[1];var d=u.parseShellHash(H);if(d&&d.semanticObject==="shell"&&d.action==="catalog"){p=this.parseOldCatalogParams(H);c=this.getMetadata().getConfig();o.toExternal({target:{semanticObject:c.semanticObject,action:c.action}});this.getRouter().navTo("catalog",{filters:JSON.stringify(p)});}}.bind(this));return sap.ui.view({id:"appFinderView",viewName:"sap.ushell.components.appfinder.AppFinder",type:"JS",async:true});},destroy:function(){U.prototype.destroy.apply(this);this.oCatalogsManager.destroy();}});});
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.controller',["sap/base/Log","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData"],function(L,O,a,q,r,J,c,A){"use strict";var V=c.mvc.ViewType;sap.ui.controller("sap.ushell.components.appfinder.EasyAccess",{DEFAULT_URL:"/sap/opu/odata/UI2",DEFAULT_NUMBER_OF_LEVELS:3,SEARCH_RESULTS_PER_REQUEST:100,onInit:function(){var t=this;this.translationBundle=r.i18n;this.oView=this.getView();var e=this.oView.getModel("easyAccessSystemsModel");var s=e.bindProperty("/systemSelected");s.attachChange(t.adjustUiOnSystemChange.bind(this));this.menuName=this.oView.getViewData().menuName;this.systemId=null;this.easyAccessCache={};this.easyAccessModel=new J();this.oView.hierarchyFolders.setModel(this.easyAccessModel,"easyAccess");this.oView.hierarchyApps.setModel(this.easyAccessModel,"easyAccess");var m=this.getView().getModel();if(!m.getProperty("/catalogs")){if(!m.getProperty("/groups")||m.getProperty("/groups").length===0){if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();this.oHomepageManager.loadPersonalizedGroups();}else{L.error("The homepage manager was not initialised. Tiles in user and sap menu cannot be added to groups.");}}}var S=this.oView.getModel("subHeaderModel");var T=S.bindProperty("/openCloseSplitAppButtonToggled");T.attachChange(t.handleToggleButtonModelChanged.bind(this));if(this.oView.getViewData().enableSearch){var o=S.bindProperty("/search");o.attachChange(t.handleSearchModelChanged.bind(this));}this.checkIfSystemSelectedAndLoadData();},onAfterRendering:function(){setTimeout(function(){this.oView.hierarchyApps.getController()._updateAppBoxedWithPinStatuses();}.bind(this),0);},checkIfSystemSelectedAndLoadData:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;this.loadMenuItemsFirstTime(this.oView.getViewData().menuName,s);}},navigateHierarchy:function(p,f){this.oView.hierarchyFolders.setBusy(false);var e=this.easyAccessModel.getProperty(p||"/");if(typeof e.folders!=="undefined"){this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);return;}this.oView.hierarchyFolders.setBusy(true);this.getMenuItems(this.menuName,this.systemId,e.id,e.level).then(function(p,b){this.easyAccessModel.setProperty(p+"/folders",b.folders);this.easyAccessModel.setProperty(p+"/apps",b.apps);this.oView.hierarchyFolders.updatePageBindings(p,f);this.oView.hierarchyApps.getController().updatePageBindings(p);this.oView.hierarchyFolders.setBusy(false);}.bind(this,p),function(b){this.handleGetMenuItemsError(b);}.bind(this));},handleSearch:function(s){var i=!this.hierarchyAppsSearchResults;if(i){this.hierarchyAppsSearchResults=new sap.ui.view(this.getView().getId()+"hierarchyAppsSearchResults",{type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{easyAccessSystemsModel:this.oView.getModel("easyAccessSystemsModel"),getMoreSearchResults:this.getMoreSearchResults.bind(this)}});this.easyAccessSearchResultsModel=new J();this.easyAccessSearchResultsModel.setSizeLimit(10000);this.hierarchyAppsSearchResults.setModel(this.easyAccessSearchResultsModel,"easyAccess");this.hierarchyAppsSearchResults.setBusyIndicatorDelay(this.getView().BUSY_INDICATOR_DELAY);this.hierarchyAppsSearchResults.addStyleClass(" sapUshellAppsView sapMShellGlobalInnerBackground");this.hierarchyAppsSearchResults.addCustomData(new A({key:"role",value:"region",writeToDom:true}));this.hierarchyAppsSearchResults.addCustomData(new A({key:"aria-label",value:this.oView.oResourceBundle.getText("easyAccessTileContainer"),writeToDom:true}));}this.searchResultFrom=0;this.oView.splitApp.getCurrentDetailPage().setBusy(true);this.easyAccessSearchResultsModel.setProperty("/apps",[]);this.easyAccessSearchResultsModel.setProperty("/total",0);this._getSearchResults(s,this.searchResultFrom).then(function(b){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){b.results.forEach(function(e){B.countBookmarks(e.url).then(function(d){e.bookmarkCount=d;});});this.easyAccessSearchResultsModel.setProperty("/apps",b.results);this.easyAccessSearchResultsModel.setProperty("/total",b.count);this.searchResultFrom=b.results.length;if(i){this.oView.splitApp.addDetailPage(this.hierarchyAppsSearchResults);}this.hierarchyAppsSearchResults.updateResultSetMessage(parseInt(b.count,10),true);this.oView.splitApp.getCurrentDetailPage().setBusy(false);if(this.oView.splitApp.getCurrentDetailPage()!==this.hierarchyAppsSearchResults){this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyAppsSearchResults");}}.bind(this));}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.splitApp.getCurrentDetailPage().setBusy(false);}.bind(this));},getMoreSearchResults:function(){if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}var s=this.oView.getModel("subHeaderModel");var S=s.getProperty("/search/searchTerm");this._getSearchResults(S,this.searchResultFrom).then(function(b){var C=this.easyAccessSearchResultsModel.getProperty("/apps");var n=C.slice();Array.prototype.push.apply(n,b.results);this.easyAccessSearchResultsModel.setProperty("/apps",n);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(false);}this.searchResultFrom=n.length;}.bind(this),function(e){this.handleGetMenuItemsError(e);if(this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy){this.oView.splitApp.getCurrentDetailPage().setShowMoreResultsBusy(true);}}.bind(this));},_getSearchResults:function(s,f){var d=new q.Deferred();var S=this._getODataRequestForSearchUrl(this.menuName,this.systemId,s,f);var R={requestUri:S};var C=this._callODataService(R,this.handleSuccessOnReadFilterResults);C.done(function(b){d.resolve(b);});C.fail(function(e){d.reject(e);});return d.promise();},getSystemNameOrId:function(){var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){return s.name||s.id;}},adjustUiOnSystemChange:function(){var C=this.easyAccessModel.getData();if(this.systemId&&C&&C.id){this.easyAccessCache[this.systemId]=C;}var s=this.oView.getModel("easyAccessSystemsModel").getProperty("/systemSelected");if(s){this.systemId=s.systemId;var n=this.easyAccessCache[this.systemId];if(n){this.easyAccessModel.setData(n);this.navigateHierarchy("",false);}else{this.oView.hierarchyFolders.setBusy(true);this.oView.hierarchyApps.setBusy(true);this.loadMenuItemsFirstTime(this.menuName,s);}}},handleToggleButtonModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/openCloseSplitAppButtonVisible");var B=s.getProperty("/openCloseSplitAppButtonToggled");var S=this.getView().splitApp;if(b){if(B&&!S.isMasterShown()){S.showMaster();}else if(S.isMasterShown()){S.hideMaster();}}},handleSearchModelChanged:function(){var s=this.oView.getModel("subHeaderModel");var b=s.getProperty("/activeMenu");if(this.getView().getId().indexOf(b)===-1){return;}var S=s.getProperty("/search/searchTerm");var d=s.getProperty("/search/searchMode");if(d){sap.ui.getCore().byId("appFinderSearch").getCustomData()[0].setValue(this.getView().getId()+"hierarchyAppsSearchResults");if(S){this.handleSearch(S);}}else{sap.ui.getCore().byId("appFinderSearch").getCustomData()[0].setValue("");this.oView.splitApp.toDetail(this.getView().getId()+"hierarchyApps");}},loadMenuItemsFirstTime:function(m,s){return this.getMenuItems(m,s.systemId,"",0).then(function(b){b.text=s.systemName||s.systemId;this.easyAccessModel.setData(b);this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);this.navigateHierarchy("",false);}.bind(this),function(e){this.handleGetMenuItemsError(e);this.oView.hierarchyFolders.updatePageBindings("/",false);this.oView.hierarchyApps.getController().updatePageBindings("/");}.bind(this));},handleGetMenuItemsError:function(e){var E=this.getErrorMessage(e);sap.ui.require(["sap/m/MessageBox"],function(M){M.error(E);});this.easyAccessModel.setData("");this.oView.hierarchyFolders.setBusy(false);this.oView.hierarchyApps.setBusy(false);},getErrorMessage:function(e){var m="";if(this.menuName==="SAP_MENU"){m=this.translationBundle.getText("easyAccessSapMenuNameParameter");}else if(this.menuName==="USER_MENU"){m=this.translationBundle.getText("easyAccessUserMenuNameParameter");}if(e){if(e.message){return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e.message]);}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsg",[m,e]);}return this.translationBundle.getText("easyAccessErrorGetDataErrorMsgNoReason",m);},getMenuItems:function(m,s,e,b,n){var d=new q.Deferred();if(m!=="SAP_MENU"&&m!=="USER_MENU"){d.reject("Invalid menuType parameter");return d.promise();}if(typeof s!=="string"||s===""){d.reject("Invalid systemId parameter");return d.promise();}if(typeof e!=="string"){d.reject("Invalid entityId parameter");return d.promise();}if(typeof b!=="number"){d.reject("Invalid entityLevel parameter");return d.promise();}if(n&&typeof n!=="number"){d.reject("Invalid numberOfNextLevels parameter");return d.promise();}if(e===""){b=0;}var N;var M=this.getView().getModel();var C=M.getProperty("/easyAccessNumbersOfLevels");if(C){N=C;}else if(n){N=n;}else{N=this.DEFAULT_NUMBER_OF_LEVELS;}var l=b+N+1;var S=this._getODataRequestUrl(m,s,e,l);var R={requestUri:S};var o=this._callODataService(R,this.handleSuccessOnReadMenuItems,{systemId:s,entityId:e,iLevelFilter:l});o.done(function(f){d.resolve(f);});o.fail(function(f){d.reject(f);});return d.promise();},_callODataService:function(R,s,S){var l,i;var t=this;var d=new q.Deferred();if(!S){S={};}if(sap.ushell.Container){l=sap.ushell.Container&&sap.ushell.Container.getUser().getLanguage();if((l)&&(R.requestUri.indexOf("sap-language=")===-1)){R.requestUri=R.requestUri+(R.requestUri.indexOf("?")>=0?"&":"?")+"sap-language="+l;}i=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";}sap.ui.require(["sap/ui/thirdparty/datajs"],function(){a.read({requestUri:R.requestUri,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"","sap-client":(i||""),"sap-language":(l||"")}},function(o,b){if(o&&o.results&&b&&b.statusCode===200){var e=s.bind(t,o,S)();d.resolve(e);}},function(m){d.reject(m);});});return d.promise();},handleSuccessOnReadMenuItems:function(R,p){var o=this._oDataResultFormatter(R.results,p.systemId,p.entityId,p.iLevelFilter);return o;},handleSuccessOnReadFilterResults:function(R){var u;R.results.forEach(function(o,i){u=this._appendSystemToUrl(o,this.systemId);o.url=u;}.bind(this));return{results:R.results,count:R.__count};},_appendSystemToUrl:function(d,s){if(d.url){return d.url+(d.url.indexOf("?")>0?"&":"?")+"sap-system="+s;}},_oDataResultFormatter:function(R,s,e,l){var f={};var o={};if(e===""){o={id:"root",text:"root",level:0,folders:[],apps:[]};f.root=o;}else{o={id:e,folders:[],apps:[]};f[e]=o;}var b;for(var i=0;i<R.length;i++){b=R[i];var p;if(b.level==="01"){p=f.root;}else{p=f[b.parentId];}var m={id:b.Id,text:b.text,subtitle:b.subtitle,icon:b.icon,level:parseInt(b.level,10)};if(b.type==="FL"){m.folders=[];m.apps=[];if(b.level==l-1){m.folders=undefined;m.apps=undefined;}if(p&&p.folders){p.folders.push(m);}f[b.Id]=m;}else{m.url=this._appendSystemToUrl(b,s);if(p&&p.apps){p.apps.push(m);}}}return o;},_getODataRequestUrl:function(m,s,e,l){var S=this._getServiceUrl(m);var b;if(l<10){b="0"+l;}else{b=l.toString();}var d="";if(e){if(decodeURIComponent(e)===e){e=encodeURIComponent(e);}d="('"+e+"')/AllChildren";}S=S+";o="+s+"/MenuItems"+d+"?$filter=level lt '"+b+"'&$orderby=level,text";return S;},_getODataRequestForSearchUrl:function(m,s,t,f){var S=this._getServiceUrl(m);var n=this.SEARCH_RESULTS_PER_REQUEST;t=this._removeWildCards(t);t=encodeURIComponent(t);f=!f?0:f;t=O.formatValue(t,"Edm.String");S=S+";o="+s+"/MenuItems?$filter=type ne 'FL' and ("+"substringof("+t+", text) or "+"substringof("+t+", subtitle) or "+"substringof("+t+", url)"+")"+"&$orderby=text,subtitle,url&$inlinecount=allpages&$skip="+f+"&$top="+n;return S;},_getServiceUrl:function(m){var s;var M=this.getView().getModel();if(m==="SAP_MENU"){var S=M.getProperty("/sapMenuServiceUrl");if(S){s=S;}else{s=this.DEFAULT_URL+"/EASY_ACCESS_MENU";}}else if(m==="USER_MENU"){var u=M.getProperty("/userMenuServiceUrl");if(u){s=u;}else{s=this.DEFAULT_URL+"/USER_MENU";}}return s;},_removeWildCards:function(t){return t.replace(/\*/g,"");}});});
sap.ui.predefine('sap/ushell/components/appfinder/EasyAccess.view',["sap/ui/core/library","sap/m/SplitApp","sap/ushell/resources"],function(c,S,r){"use strict";var V=c.mvc.ViewType;sap.ui.jsview("sap.ushell.components.appfinder.EasyAccess",{BUSY_INDICATOR_DELAY:1000,createContent:function(C){this.oResourceBundle=r.i18n;this.setModel(this.getViewData().easyAccessSystemsModel,"easyAccessSystemsModel");this.setModel(this.getViewData().subHeaderModel,"subHeaderModel");this.setModel(this.getViewData().parentComponent.getModel());this.hierarchyFolders=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyFolders",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(C),easyAccessSystemsModel:this.getModel("easyAccessSystemsModel"),subHeaderModel:this.getModel("subHeaderModel")}});this.hierarchyFolders.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.hierarchyFolders.addStyleClass("sapUshellHierarchyFolders");var v=this.getViewData();this.hierarchyApps=new sap.ui.view(this.getId()+"hierarchyApps",{type:V.JS,viewName:"sap.ushell.components.appfinder.HierarchyApps",height:"100%",viewData:{navigateHierarchy:this.oController.navigateHierarchy.bind(C),menuName:v.menuName}});this.hierarchyApps.setBusyIndicatorDelay(this.BUSY_INDICATOR_DELAY);this.splitApp=new S({masterPages:this.hierarchyFolders,detailPages:this.hierarchyApps});this.splitApp.setInitialMaster(this.hierarchyFolders);this.splitApp.setInitialDetail(this.hierarchyApps);return this.splitApp;},getControllerName:function(){return"sap.ushell.components.appfinder.EasyAccess";}});});
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.controller',["sap/ui/core/mvc/Controller","sap/m/library","sap/ushell/resources","sap/ui/Device","sap/ui/model/json/JSONModel"],function(C,m,r,D,J){"use strict";var L=m.ListMode;return C.extend("sap.ushell.components.appfinder.GroupListPopover",{onInit:function(){var v=this.getView();this.oPopoverModel=new J({userGroupList:v.getViewData().groupData});this.oPopoverModel.setSizeLimit(9999);v.oPopover.setModel(this.oPopoverModel);},onExit:function(){var v=this.getView();if(v._oListContainer){v._oListContainer.destroy();}if(v._oNewGroupItem){v._oNewGroupItem.destroy();}if(v._oNewGroupNameInput){v._oNewGroupNameInput.destroy();}if(v._oNewGroupHeader){v._oNewGroupHeader.destroy();}},_cancelButtonPress:function(){this.getView().oPopover.close();},_groupListItemClickHandler:function(e){var l=e.getParameter("listItem");if(l.data("newGroupItem")){this._navigateToCreateNewGroupPane();return;}var o=e.getSource();if(o.getMode()===L.SingleSelectMaster){var v=this.getView();v.oPopover.close();}else{l.setSelected(!l.getSelected());}},_okayCancelButtonPress:function(){var v=this.getView();var n=v._getNewGroupInput();var N=n.getValue();if(N.length>0){this.sNewGroupId=N;}v.oPopover.close();},_navigateToCreateNewGroupPane:function(){var v=this.getView();var n=v._getNewGroupHeader();var N=v._getNewGroupInput();v.oPopover.removeAllContent();v.oPopover.addContent(N);v.oPopover.setCustomHeader(n);v.oPopover.setContentHeight("");var e=v.oPopover.getEndButton();if(e){e.setVisible(true);}else{e=v._getCancelButton();v.oPopover.setEndButton(e);}v.oPopover.getBeginButton().setText(r.i18n.getText("okDialogBtn"));e.setText(r.i18n.getText("cancelBtn"));if(v.getViewData().singleGroupSelection){this._setFooterVisibility(true);}setTimeout(function(){N.focus();},0);},_afterCloseHandler:function(){var u=this.oPopoverModel.getProperty("/userGroupList");var c={addToGroups:[],removeFromGroups:[],newGroups:this.sNewGroupId?[this.sNewGroupId]:[],allGroups:u};var g;for(var i=0,l=u.length;i<l;++i){g=u[i];if(g.selected===g.initiallySelected){continue;}if(g.selected){c.addToGroups.push(g.oGroup);}else{c.removeFromGroups.push(g.oGroup);}}var v=this.getView();v.deferred.resolve(c);v.destroy();},_backButtonHandler:function(){var v=this.getView();v.oPopover.removeAllContent();if(v.getViewData().singleGroupSelection){this._setFooterVisibility(false);}if(!D.system.phone){v.oPopover.setContentHeight("192px");}else{v.oPopover.setContentHeight("100%");}v.oPopover.setVerticalScrolling(true);v.oPopover.setHorizontalScrolling(false);v.oPopover.addContent(v._getListContainer());v.oPopover.setTitle(r.i18n.getText("addTileToGroups_popoverTitle"));v.oPopover.setCustomHeader();v._getNewGroupInput().setValue("");v.oPopover.getEndButton().setVisible(false);v.oPopover.getBeginButton().setText(r.i18n.getText("close"));},_setFooterVisibility:function(v){var f=sap.ui.getCore().byId("groupsPopover-footer");if(f){f.setVisible(v);}}});});
sap.ui.predefine('sap/ushell/components/appfinder/GroupListPopover.view',["sap/ui/thirdparty/jquery","sap/m/ResponsivePopover","sap/ushell/resources","sap/m/ScrollContainer","sap/ui/Device","sap/m/StandardListItem","sap/m/List","sap/m/Input","sap/m/Button","sap/ui/core/IconPool","sap/m/Bar","sap/m/Label","sap/m/DisplayListItem","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(q,R,r,S,D,a,L,I,B,b,c,d,e,m,F,f){"use strict";var g=m.ListMode;var h=m.ListType;sap.ui.jsview("sap.ushell.components.appfinder.GroupListPopover",{getControllerName:function(){return"sap.ushell.components.appfinder.GroupListPopover";},createContent:function(i){this.oPopover=new R({id:"groupsPopover",placement:"Auto",title:r.i18n.getText("addTileToGroups_popoverTitle"),contentWidth:"20rem",beginButton:this._getCloseButton(),content:this._getListContainer(),afterClose:[i._afterCloseHandler,i]}).addStyleClass("sapContrastPlus");this.addDependent(this.oPopover);this.oPopover.setInitialFocus(this._getNewGroupListItem());},open:function(o){if(document.body.clientHeight-o.getDomRef().getBoundingClientRect().bottom>=310){this.oPopover.setPlacement("Bottom");}this.oPopover.openBy(o);if(this.getViewData().singleGroupSelection){this.getController()._setFooterVisibility(false);}this.deferred=q.Deferred();return this.deferred.promise();},_getListContainer:function(){if(!this._oListContainer){var G=this._getGroupList();this._oListContainer=new S({id:"popoverContainer",horizontal:false,vertical:true,content:[G],height:D.system.phone?"100%":"190px"});}return this._oListContainer;},_getNewGroupInput:function(){if(!this._oNewGroupNameInput){this._oNewGroupNameInput=new I("newGroupNameInput",{type:"Text",placeholder:r.i18n.getText("new_group_name")});}return this._oNewGroupNameInput;},_getNewGroupHeader:function(){if(!this._oNewGroupHeader){var C=this.getController();var o=new B({icon:b.getIconURI("nav-back"),press:[C._backButtonHandler,C],tooltip:r.i18n.getText("newGroupGoBackBtn_tooltip")});o.addStyleClass("sapUshellCatalogNewGroupBackButton");this._oNewGroupHeader=new c("oHeadBar",{contentLeft:[o],contentMiddle:[new d({text:r.i18n.getText("newGroup_popoverTitle")})]});}return this._oNewGroupHeader;},_getGroupList:function(){if(!this._oGroupList){var C=this.getController();var l=new e({label:"{oGroup/title}",selected:"{selected}",tooltip:"{oGroup/title}",type:h.Active});var u=[new F("oGroup/isGroupLocked",f.EQ,false)];var v=this.getViewData();if(v.enableHideGroups){u.push(new F("oGroup/isGroupVisible",f.EQ,true));}this._oGroupList=new L({mode:v.singleGroupSelection?g.SingleSelectMaster:g.MultiSelect,items:{path:"/userGroupList",template:l,filters:u,templateShareable:false},itemPress:[C._groupListItemClickHandler,C]});var n=this._getNewGroupListItem();this._oGroupList.addEventDelegate({onBeforeRendering:function(){this._oGroupList.insertAggregation("items",n,0,true);}.bind(this),onAfterRendering:function(){this._oGroupList.removeAggregation("items",n,true);}.bind(this)});}return this._oGroupList;},_getNewGroupListItem:function(){if(!this._oNewGroupItem){this._oNewGroupItem=new a("newGroupItem",{title:r.i18n.getText("newGroup_listItemText"),type:h.Navigation});this._oNewGroupItem.data("newGroupItem",true);this._oNewGroupItem.getList=function(){return this._oGroupList;}.bind(this);this._oNewGroupItem.getModeControl=function(){return null;};this._oNewGroupItem.onsapspace=function(i){i.preventDefault();i.isMarked();};this._oNewGroupItem.addEventDelegate({onsaptabnext:function(E){E.preventDefault();E._bIsStopHandlers=true;this._getCloseButton().focus();}});}return this._oNewGroupItem;},_getCancelButton:function(){if(!this._oCancelButton){var C=this.getController();this._oCancelButton=new B("cancelButton",{press:[C._cancelButtonPress,C],text:r.i18n.getText("cancelBtn")});}return this._oCancelButton;},_getCloseButton:function(){if(!this._oCloseButton){var C=this.getController();this._oCloseButton=new B("closeButton",{press:[C._okayCancelButtonPress,C],text:r.i18n.getText("closeBtn")});}return this._oCloseButton;}});});
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.controller',["sap/ui/thirdparty/jquery","sap/ui/core/library","sap/m/MessageToast","sap/ushell/resources"],function(q,c,M,r){"use strict";var V=c.mvc.ViewType;sap.ui.controller("sap.ushell.components.appfinder.HierarchyApps",{onInit:function(){var e=this.getView().getViewData().easyAccessSystemsModel;if(e){this.getView().setModel(e,"easyAccessSystems");}},getCrumbsData:function(p,m){var a=p.split("/");a.splice(a.length-2,2);var n=[];while(a.length){var P=a.join("/");var t=m.getProperty(P+"/text");n.unshift({text:t,path:P});a.splice(a.length-2,2);}return n;},_updateAppBoxedWithPinStatuses:function(p){var v=this.getView();if(!p){p=v.layout.getBinding("items").getPath();}var e=v.getModel("easyAccess");var a=e.getProperty(p)?e.getProperty(p):[];this.getView().oVisualizationOrganizerHelper.updateBookmarkCount.call(this,a).then(function(u){e.setProperty(p,u);});},updateBookmarkCount:function(a){return sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){var b=a.map(function(d){return B.countBookmarks(d.url).then(function(e){d.bookmarkCount=e;return d;});});return new Promise(function(R){q.when.apply(q,b).then(function(){var u=Array.prototype.slice.call(arguments);R(u);});});});},updatePageBindings:function(p){this.getView().layout.bindAggregation("items","easyAccess>"+p+"/apps",this.getView().oItemTemplate);this._updateAppBoxedWithPinStatuses(p+"/apps");this.getView().breadcrumbs.bindProperty("currentLocationText","easyAccess>"+p+"/text");var a=this.getCrumbsData(p,this.getView().getModel("easyAccess"));this.getView().crumbsModel.setProperty("/crumbs",a);var n=this.getView().getModel("easyAccess").getProperty(p+"/apps");this.getView().updateResultSetMessage(n.length,false);},onAppBoxPressed:function(e){if(e.mParameters.srcControl.$().closest(".sapUshellPinButton").length){return;}var u=e.getSource().getProperty("url");if(u&&u.indexOf("#")===0){hasher.setHash(u);}},_handleSuccessMessage:function(a,p){var m;var n=p.addToGroups?p.addToGroups.length:0;var b=p.newGroups?p.newGroups.length:0;var t=n+b;if(t===1){var g;if(n===1){g=p.addToGroups[0].title;}else{g=p.newGroups[0];}m=r.i18n.getText("appAddedToSingleGroup",[a.text,g]);}else{m=r.i18n.getText("appAddedToSeveralGroups",[a.text,t]);}if(t>0){M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});}return m;},_prepareErrorMessage:function(e,a){var g,A,f,n=0,C=false,m;for(var i in e){g=e[i].group;A=e[i].action;if(A==="addBookmark_ToExistingGroup"){n++;if(n===1){f=g.title;}}else if(A==="addBookmark_ToNewGroup"){n++;if(n===1){f=g;}}else{C=true;}}if(C){if(e.length===1){m=r.i18n.getText({messageId:"fail_tile_operation_create_new_group"});}else{m=r.i18n.getText({messageId:"fail_tile_operation_some_actions"});}}else if(e.length===1){m=r.i18n.getText({messageId:"fail_app_operation_add_to_group",parameters:[a,f]});}else{m=r.i18n.getText({messageId:"fail_app_operation_add_to_several_groups",parameters:[a]});}return m;},_handleBookmarkAppPopoverResponse:function(a,p){var b=[];p.newGroups.forEach(function(g){b.push(this._createGroupAndAddBookmark(g,a));}.bind(this));p.addToGroups.forEach(function(g){b.push(this._addBookmark(g,a));}.bind(this));return q.when.apply(q,b).then(function(){var d=Array.prototype.slice.call(arguments);this._handlePopoverGroupsActionPromises(a,p,d);}.bind(this));},_handlePopoverGroupsActionPromises:function(a,p,b){var e=b.filter(function(f,i,b){return!f.status;});if(e.length){var E=this._prepareErrorMessage(e,a.text);var d=sap.ushell.components.getCatalogsManager();d.notifyOnActionFailure(E.messageId,E.parameters);return;}this._updateAppBoxedWithPinStatuses();this._handleSuccessMessage(a,p);},_createGroupAndAddBookmark:function(n,a){var b=sap.ushell.components.getCatalogsManager();var d=q.Deferred(),R={};var e=b.createGroup(n);e.done(function(f){var g=this._addBookmark(f.getObject(),a,true);g.done(function(h){d.resolve(h);}).fail(function(){R={group:n,status:0,action:"addBookmark_ToNewGroup"};d.resolve(R);});}.bind(this)).fail(function(){R={group:n,status:0,action:"addBookmark_NewGroupCreation"};d.resolve(R);});return d.promise();},_addBookmark:function(g,a,i){var d=q.Deferred(),R={};sap.ushell.Container.getServiceAsync("Bookmark").then(function(b){var e=b.addBookmark({url:a.url,title:a.text,subtitle:a.subtitle,icon:a.icon},g.object);var f=i?"addBookmark_ToNewGroup":"addBookmark_ToExistingGroup";e.done(function(){R={group:g,status:1,action:f};d.resolve(R);}).fail(function(){R={group:g,status:0,action:f};d.resolve(R);});});return d.promise();},showSaveAppPopover:function(e){this.getView().oVisualizationOrganizerHelper.onHierarchyAppsPinButtonClick.call(this,e).then(function(u){if(u){this._updateAppBoxedWithPinStatuses();}}.bind(this));},showGroupListPopover:function(e){var m=this.getView().getModel();var a=e.oSource.getParent().getBinding("title").getContext().getObject();if(m.getProperty("/groupContext").path){var g=m.getProperty("/groupContext").path;var G=m.getProperty(g);var b={newGroups:[],addToGroups:[G]};this._handleBookmarkAppPopoverResponse(a,b);return;}var d=m.getProperty("/groups").map(function(h){return{selected:false,initiallySelected:false,oGroup:h};});var p=new sap.ui.view({type:V.JS,viewName:"sap.ushell.components.appfinder.GroupListPopover",viewData:{groupData:d,enableHideGroups:m.getProperty("/enableHideGroups"),enableHelp:m.getProperty("/enableHelp"),singleGroupSelection:true}});var f=p.open(e.oSource);f.then(this._handleBookmarkAppPopoverResponse.bind(this,a));},resultTextFormatter:function(s,t){var R=r.i18n;if(s){var S=s.systemName?s.systemName:s.systemId;var a="";if(t){a=R.getText("search_easy_access_results",[t,S]);}return a;}return"";},showMoreResultsVisibilityFormatter:function(a,t){if(a&&a.length<t){return true;}return false;},showMoreResultsTextFormatter:function(a,t){if(!a||!t){return"";}var b=a.length;return r.i18n.getText("EasyAccessSearchResults_ShowMoreResults",[b,t]);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyApps.view',["sap/ui/core/library","sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/Page","sap/m/PageAccessibleLandmarkInfo","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Title","sap/m/Button","sap/ushell/components/appfinder/VisualizationOrganizerHelper"],function(c,A,P,r,a,F,m,b,d,M,J,L,B,T,f,g,V){"use strict";var h=m.ButtonType;var i=m.FlexWrap;var j=c.TitleLevel;var k=c.AccessibleLandmarkRole;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{oVisualizationOrganizerHelper:V.getInstance(),createContent:function(C){this.oController=C;var p=new P({icon:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonIcon},type:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonType},selected:{path:"easyAccess>bookmarkCount",formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonSelectState.bind(this)},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:this.oVisualizationOrganizerHelper.formatBookmarkPinButtonTooltip.bind(this)},press:C.showSaveAppPopover.bind(C)});p.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[C.onAppBoxPressed,C]});this.oItemTemplate.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new F(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:i.Wrap});this.layout.addDelegate({onAfterRendering:function(){var e=this.getItems();var u=function(l){if(l.getKey()==="tabindex"){l.setValue("0");}};if(e.length){e[0].getCustomData().forEach(u);e[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new M({visible:false,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var v=this.getViewData();var s=v.menuName==="USER_MENU"?"appFinderUserMenuTitle":"appFinderSapMenuTitle";var o=new b({showHeader:false,landmarkInfo:new d({contentLabel:r.i18n.getText(s),contentRole:k.Region})}).addStyleClass("sapUshellAppsView sapUiContentPadding");if(v&&v.navigateHierarchy){this.crumbsModel=new J({crumbs:[]});this.linkTemplate=new L({text:"{crumbs>text}",press:function(e){var l=e.oSource.getBinding("text").getContext().getObject();v.navigateHierarchy(l.path,false);}});this.breadcrumbs=new B({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");o.addContent(this.breadcrumbs);}else{this.resultText=new f({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:C.resultTextFormatter.bind(C)},level:j.H3}).addStyleClass("sapUiTinyMarginTop sapUiSmallMarginBottom sapUshellEasyAccessSearchResultText");o.addContent(this.resultText);this.showMoreResultsLink=new g({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsTextFormatter.bind(C)},press:v.getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsVisibilityFormatter.bind(C)},type:h.Transparent});}o.addContent(this.oMessagePage);o.addContent(this.layout);if(this.showMoreResultsLink){o.addContent(this.showMoreResultsLink);}return o;},formatPinButtonTooltip:function(G,e,s,l,n){var R=r.i18n,t;if(s){var C=G?Array.prototype.indexOf.call(G,l):-1;var o=C!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=R.getText(o,n);}else{t=e?R.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):R.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;},updateResultSetMessage:function(I,e){var E;if(e){E="noFilteredItems";}else{E="EasyAccessMenu_NoAppsToDisplayMessagePage_Text";}if(I){if(e){this.resultText.updateProperty("text");this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(e){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var s=r.i18n.getText(E);this.oMessagePage.setText(s);}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.controller',["sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/m/StandardListItem","sap/m/SelectDialog","sap/ui/core/Component"],function(L,q,F,a,S,b,C){"use strict";sap.ui.controller("sap.ushell.components.appfinder.HierarchyFolders",{onInit:function(){this.oDialog=null;this.getView().setModel(this.getView().getViewData().easyAccessSystemsModel,"easyAccessSystems");this.getView().setModel(this.getView().getViewData().subHeaderModel,"subHeaderModel");this.getSelectedSystem().then(function(s){if(s){this.setSystemSelected(s);}else{this.setSystemSelected(undefined);this.onSystemSelectionPress();}}.bind(this),function(){this.setSystemSelected(undefined);this.onSystemSelectionPress();});},onExit:function(){if(this.oDialog){this.destroyDialog();}},onAfterRendering:function(){var j=q("#"+this.getView().getId());j.on("click",function(){this.exitSearchMode();}.bind(this));},getPersonalizer:function(){if(!this.oPersonalizerPromise){this.oPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var c=C.getOwnerComponentFor(this),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"appfinder.HierarchyFolders",item:"lastSelectedSystem"};return p.getPersonalizer(P,s,c);}.bind(this));}return this.oPersonalizerPromise;},getSelectedSystem:function(){var d=new q.Deferred(),s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length===1){var e=s[0];this.setSystemSelectedInPersonalization(e);d.resolve(e);}else{this.getSelectedSystemInPersonalization().then(function(p){if(p){var c=false;for(var i=0;i<s.length;i++){if((s[i].systemName&&s[i].systemName===p.systemName)||(s[i].systemId===p.systemId)){c=true;d.resolve(p);}}if(!c){d.resolve();this.setSystemSelectedInPersonalization();}}else{d.resolve();}}.bind(this));}return d.promise();},setSystemSelected:function(s){this.getView().getModel("easyAccessSystems").setProperty("/systemSelected",s);this.setSystemSelectedInPersonalization(s);},getSelectedSystemInPersonalization:function(){var d=new q.Deferred();this.getPersonalizer().then(function(p){p.getPersData().then(function(c){if(c){d.resolve(c);}else{d.resolve();}},function(e){L.error("Failed to get selected system from the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");d.reject();});});return d.promise();},setSystemSelectedInPersonalization:function(s){this.getPersonalizer().then(function(p){p.setPersData(s).fail(function(e){L.error("Failed to save selected system in the personalization",e,"sap.ushell.components.appfinder.HierarchyFolders");});});},onSystemSelectionPress:function(){var s=this.getView().getModel("easyAccessSystems").getProperty("/systemsList");if(s&&s.length&&s.length<=1){return;}var d=this.createDialog();d.open();},createDialog:function(){var t=this;if(!this.oDialog){this.oDialog=new b({id:"systemSelectionDialog",title:t.getView().translationBundle.getText("easyAccessSelectSystemDialogTitle"),multiSelect:false,contentHeight:"20rem",items:{path:"/systemsList",template:new S({adaptTitleSize:false,title:{parts:["systemName","systemId"],formatter:t.titleFormatter},description:{parts:["systemName","systemId"],formatter:t.descriptionFormatter},selected:{parts:["systemName","systemId"],formatter:t.selectedFormatter.bind(this)}})},confirm:t.systemConfirmHandler.bind(t),search:t.systemSearchHandler.bind(t),cancel:t.destroyDialog.bind(t)});this.oDialog.setModel(this.getView().getModel("easyAccessSystems"));}return this.oDialog;},destroyDialog:function(){this.oDialog.destroyItems();this.oDialog.destroy();this.oDialog=null;},systemConfirmHandler:function(e){var i=e.getParameters().selectedItem,s=i.getBindingContext().getObject();this.setSystemSelected(s);this.destroyDialog();},systemSearchHandler:function(e){var v=e.getParameter("value"),f=new sap.ui.model.Filter("systemName",F.Contains,v),o=new sap.ui.model.Filter("systemId",F.Contains,v),s=new a({filters:[o,f],and:false}),B=e.getSource().getBinding("items");B.filter(s);},titleFormatter:function(s,c){return s||c;},descriptionFormatter:function(s,c){if(s){return c;}return null;},selectedFormatter:function(s,c){var u=this.getView().getModel("easyAccessSystems").getProperty("/systemSelected");if(!u){return false;}if(s){return(u.systemName===s&&u.systemId===c);}return(u.systemId===c);},systemSelectorTextFormatter:function(s){if(s){if(s.systemName){return s.systemName;}return s.systemId;}return this.getView().translationBundle.getText("easyAccessSelectSystemTextWithoutSystem");},exitSearchMode:function(){var s=this.getView().getModel("subHeaderModel");s.setProperty("/search/searchMode",false);s.refresh(true);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/HierarchyFolders.view',["sap/m/Button","sap/m/Label","sap/m/Bar","sap/m/Page","sap/m/library","sap/m/List","sap/m/StandardListItem","sap/m/Text","sap/ushell/resources"],function(B,L,a,P,m,b,S,T,r){"use strict";var c=m.ButtonType;var d=m.ListSeparators;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyFolders",{createContent:function(C){var t=this;this.translationBundle=r.i18n;this.treePath="";this.lastFocusID=document.URL.substring(document.URL.lastIndexOf("&/")+2)+"-button";this.systemSelectorText=new T({text:{path:"easyAccessSystemsModel>/systemSelected",formatter:C.systemSelectorTextFormatter.bind(C)}});this.oItemTemplate=new S({title:"{easyAccess>text}",type:"Navigation",press:function(){var e=t.pageMenu.$().find(".sapMBarLeft button");if(!e.length){t.lastFocusID=document.activeElement.getAttribute("id");}var p=this.getBindingContextPath();t.getViewData().navigateHierarchy(p,true);}});this.oList=new b({showSeparators:d.None,items:{path:"easyAccess>"+this.treePath+"/folders",template:this.oItemTemplate},updateFinished:function(){var l=this.getItems();t.finishEasyAccessAnimation(true);l.forEach(function(o){o.onsapspace=o.onsapenter;});},noDataText:{path:"easyAccessSystemsModel>/systemSelected",formatter:function(s){if(s){return t.translationBundle.getText("easyAccessFolderWithNoItems");}}}});this._navBackButton=new B({tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PAGE_NAVBUTTON_TEXT"),type:c.Back,visible:false,press:function(){var p=this.treePath.split("/");var n=p.slice(0,p.length-2);this.getViewData().navigateHierarchy(n.join("/"),false);}.bind(this)});this.pageMenu=new P({enableScrolling:true,headerContent:new a({contentLeft:[this._navBackButton,new L({text:{parts:["easyAccessSystemsModel>/systemSelected"],formatter:C.systemSelectorTextFormatter.bind(C)}})],contentRight:[new B({text:this.translationBundle.getText("easyAccessSelectSystemDialogTitle"),type:c.Transparent,visible:{path:"easyAccessSystemsModel>/systemsList",formatter:function(s){return s.length>1;}},press:[C.onSystemSelectionPress,C]})]}).addStyleClass("sapUshellEasyAccessMasterPageHeader"),content:this.oList});return this.pageMenu;},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyFolders";},finishEasyAccessAnimation:function(){if(!this.jqFolderClone){return;}if(this.forwardAnimation){this.pageMenu.$().addClass("forwardToViewAnimation");this.jqFolderClone.addClass("forwardOutOfViewAnimation");}else{this.pageMenu.$().addClass("backToViewAnimation");this.jqFolderClone.addClass("backOutOfViewAnimation");}this.jqFolderClone.on("animationend",function(){this.pageMenu.$().removeClass("forwardToViewAnimation backToViewAnimation");var e=this.pageMenu.$().find(".sapMBarLeft button");if(e.length){e.focus();}else{setTimeout(function(){document.querySelector("#"+this.lastFocusID).focus();}.bind(this));}if(this.jqFolderClone){this.jqFolderClone.remove();}}.bind(this));},prepareEasyAccessAnimation:function(f){this.forwardAnimation=f;this.jqFolderClone=this.pageMenu.$().clone().removeAttr("data-sap-ui").css("z-index","1");this.jqFolderClone.find("*").removeAttr("id");this.pageMenu.$().parent().append(this.jqFolderClone);},updatePageBindings:function(p,f){var s=p.split("/").length>2;this.treePath=p;this._navBackButton.setVisible(s);this.pageMenu.setShowSubHeader(!s);this.prepareEasyAccessAnimation(f);this.oList.bindItems("easyAccess>"+p+"/folders",this.oItemTemplate);}});},true);
sap.ui.predefine('sap/ushell/components/appfinder/VisualizationOrganizerHelper',["sap/m/library","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(m,C,E,r){"use strict";var B=m.ButtonType;var i;
function g(){return sap.ui.getCore().byId("catalogView");}
function a(){return sap.ui.getCore().byId("appFinderView");}
function V(){var v,o,s=null;function b(){return C.last("/core/spaces/enabled");}function l(){if(v){return Promise.resolve(v);}o=o||new Promise(function(c){sap.ui.require(["sap/ushell/components/visualizationOrganizer/Component"],function(d){v=new d();c(v);});});return o;}if(b()){this.oDoable=E.on("trackHashChange").do(function(h){if(b()&&(h==="Shell-appFinder")){var c=g();if(!c){return;}c.setBusy(true);l().then(function(d){return d.requestData();}).then(function(){if(this.oModel){this.oModel.updateBindings(true);}var A=a();if(v.getPersonalizablePages().length===1&&A){var t=r.i18n.getText("VisualizationOrganizer.PageContextTitle",v.getPersonalizablePages()[0].title);A.getController()._updateShellHeader(t);}}.bind(this)).finally(function(){c.setBusy(false);});}}.bind(this));}this.setModel=function(c){this.oModel=c;};this.formatPinButtonTooltip=function(G,c,d){if(!b()){return this.formatPinButtonTooltip(G,c);}return v.formatPinButtonTooltip(d,s);};this.formatPinButtonSelectState=function(){if(!b()){return this.formatPinButtonSelectState.apply(this,arguments);}return false;};this.formatPinButtonIcon=function(c){if(!b()){return"sap-icon://pushpin-off";}return v.formatPinButtonIcon(c,!!s);};this.formatPinButtonType=function(c){if(!b()){return B.Default;}return v.formatPinButtonType(c,!!s);};this.onTilePinButtonClick=function(e){if(!b()){this.getController().onTilePinButtonClick(e);return;}v.onTilePinButtonClick(e,s);};this.getNavigationContext=function(){if(!b()){return this.getGroupContext.apply(this,arguments);}if(s){return{pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)};}return null;};this.getNavigationContextAsText=function(){if(!b()){return this.getGroupNavigationContext.apply(this,arguments);}if(s){return JSON.stringify({pageID:encodeURIComponent(s.pageID),sectionID:encodeURIComponent(s.sectionID)});}return null;};this.updateModelWithContext=function(d){if(!b()){this._updateModelWithGroupContext.apply(this,arguments);return Promise.resolve();}return l().then(function(){return v.loadSectionContext(d);}).then(function(c){s=c;this.oView.getModel().updateBindings(true);if(s){var t=s.sectionTitle?r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitle",s.sectionTitle):r.i18n.getText("VisualizationOrganizer.AppFinderSectionContextTitleUnnamed");this.oView.oPage.setTitle(t);if(this._updateShellHeader){return new Promise(function(e){setTimeout(function(){this._updateShellHeader(t);e();}.bind(this),0);}.bind(this));}}return Promise.resolve();}.bind(this));};this._loadVisualizationOrganizer=l;this._setSectionContext=function(c){s=c;};this.exit=function(){if(this.oDoable){this.oDoable.off();this.oDoable=null;}};this.onHierarchyAppsPinButtonClick=function(e){if(!b()){this.showGroupListPopover(e);return Promise.resolve(false);}return v.onHierarchyAppsPinButtonClick(e,s);};this.formatBookmarkPinButtonTooltip=function(G,c,d,e,f){if(!b()){return this.formatPinButtonTooltip(G,c,d,e,f);}return v.formatBookmarkPinButtonTooltip(c,s);};this.formatBookmarkPinButtonSelectState=function(c){if(!b()){return!!c;}return false;};this.formatBookmarkPinButtonIcon=function(c){if(!b()){return"sap-icon://pushpin-off";}return c>0?"sap-icon://accept":"sap-icon://add";};this.formatBookmarkPinButtonType=function(c){if(!b()){return B.Default;}return c>0?B.Emphasized:B.Default;};this.updateBookmarkCount=function(A){if(!b()){return this.updateBookmarkCount(A);}return v.updateBookmarkCount(A,s);};this.shouldPinButtonBeVisible=function(){return new Promise(function(c){var p=C.last("/core/shell/enablePersonalization");if(!b()||p){c(p);}else if(!C.last("/core/spaces/myHome/enabled")){c(false);}else{sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){c(u.getUser().getShowMyHome());});}});};}
return{getInstance:function(){if(!i){i=new V();}return i;},destroy:function(){if(i){i.exit();}i=null;}};});
sap.ui.predefine('sap/ushell/components/applicationIntegration/API',["sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","sap/ushell/ui/shell/ToolAreaItem"],function(U,q,L,O,A,S,N,T){"use strict";
var a=U.extend("sap.ushell.components.applicationIntegration.API",{metadata:{version:"1.96.0",dependencies:{version:"1.96.0",libs:["sap.ui.core","sap.m"],components:[]}}});
a.prototype.createContent=function(){this.oShellModel=A;};
a.prototype.createExtendedShellState=function(s,c){return this.oShellModel.createExtendedShellState(s,c);};
a.prototype.applyExtendedShellState=function(s,c){this.oShellModel.applyExtendedShellState(s,c);};
a.prototype.showLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.addLeftPaneContent([i],c,s);}else{this.oShellModel.addLeftPaneContent(i,c,s);}};
a.prototype.showHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderItem([i],c,s);}else{this.oShellModel.addHeaderItem(i,c,s);}};
a.prototype.showRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addRightFloatingContainerItem([i],c,s);}else{this.oShellModel.addRightFloatingContainerItem(i,c,s);}};
a.prototype.showRightFloatingContainer=function(s){this.oShellModel.showRightFloatingContainer(s);};
a.prototype.showToolAreaItem=function(i,c,s){this.oShellModel.addToolAreaItem(i,c,s);};
a.prototype.showActionButton=function(i,c,s){var b=[],d=[],B;if(typeof i==="string"){i=[i];}b=i.filter(function(I){B=sap.ui.getCore().byId(I);return B instanceof sap.m.Button&&!(B instanceof sap.ushell.ui.launchpad.ActionItem);});d=i.filter(function(I){B=sap.ui.getCore().byId(I);return B instanceof sap.ushell.ui.launchpad.ActionItem;});if(b.length){this.convertButtonsToActions(b,c,s);}if(d.length){this.oShellModel.addActionButton(d,c,s);}};
a.prototype.showFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.addFloatingActionButton([i],c,s);}else{this.oShellModel.addFloatingActionButton(i,c,s);}};
a.prototype.showHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.addHeaderEndItem([i],c,s);}else{this.oShellModel.addHeaderEndItem(i,c,s);}};
a.prototype.setHeaderVisibility=function(v,c,s){this.oShellModel.setHeaderVisibility(v,c,s);};
a.prototype.showSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.addSubHeader([i],c,s);}else{this.oShellModel.addSubHeader(i,c,s);}};
a.prototype.showSignOutItem=function(c,s){this.oShellModel.showSignOutButton(c,s);};
a.prototype.showSettingsItem=function(c,s){this.oShellModel.showSettingsButton(c,s);};
a.prototype.hideHeaderItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],c,s);}else{this.oShellModel.removeHeaderItem(i,c,s);}};
a.prototype.removeToolAreaItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeToolAreaItem([i],c,s);}else{this.oShellModel.removeToolAreaItem(i,c,s);}};
a.prototype.removeRightFloatingContainerItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],c,s);}else{this.oShellModel.removeRightFloatingContainerItem(i,c,s);}};
a.prototype.hideActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeActionButton([i],c,s);}else{this.oShellModel.removeActionButton(i,c,s);}};
a.prototype.hideLeftPaneContent=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],c,s);}else{this.oShellModel.removeLeftPaneContent(i,c,s);}};
a.prototype.hideFloatingActionButton=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],c,s);}else{this.oShellModel.removeFloatingActionButton(i,c,s);}};
a.prototype.hideHeaderEndItem=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],c,s);}else{this.oShellModel.removeHeaderEndItem(i,c,s);}};
a.prototype.hideSubHeader=function(i,c,s){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],c,s);}else{this.oShellModel.removeSubHeader(i,c,s);}};
a.prototype.addShellSubHeader=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){this.showSubHeader(C.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(f){C=new f(o);if(i){t.showSubHeader(C.getId(),e,s);t.oShellModel.addElementToManagedQueue(C);}d.resolve(C);});}else{L.warning("You must specify control type in order to create it");}return d.promise();};
a.prototype.addSubHeader=function(c,C,i,b,s){var d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,r=false;if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showSubHeader(e.getId(),b,s);}return e;};
a.prototype.addUserAction=function(p){var d=new q.Deferred(),t=this,m=this.oShellModel.getModelToUpdate(),c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates,n;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(b){if(b==="sap.m.Button"){b="sap.ushell.ui.launchpad.ActionItem";}c=b.replace(/\./g,"/");sap.ui.require([c],function(f){var g=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);var h;if(o){if(o.id){h=o.id;}}C=sap.ui.getCore().byId(h)||new f(o);if(!C.getActionType){C=new f(o);}if(i){t.showActionButton(C.getId(),e,s);t.oShellModel.addElementToManagedQueue(C);}t.oShellModel.setModelToUpdate(g,false);d.resolve(C);});}else{n="You must specify control type in order to create it";L.warning(n);d.reject(n);}return d.promise();};
a.prototype.addActionButton=function(c,C,i,b,s){var d,o,e,f,r=false;if(c==="sap.m.Button"){c="sap.ushell.ui.launchpad.ActionItem";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showActionButton(e.getId(),b,s);}return e;};
a.prototype.addFloatingButton=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){if(i){t.oShellModel.addElementToManagedQueue(C);t.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);}}if(b){c=b.replace(/\./g,"/");}else{c="sap/m/Button";}sap.ui.require([c],function(f){C=new f(o);if(i){this.showFloatingActionButton(oItem.getId(),e,s);}d.resolve(C);});return d.promise();};
a.prototype.addFloatingActionButton=function(c,C,i,b,s){var d,o,e,f,r=false;if(!c){c="sap.m.Button";}d=c.replace(/\./g,"/");o=sap.ui.require(d);if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showFloatingActionButton(e.getId(),b,s);}return e;};
a.prototype.addSidePaneContent=function(p){var d=new q.Deferred(),t=this,c,C,b=p.controlType,o=p.oControlProperties,i=p.bIsVisible,e=p.bCurrentState,s=p.aStates;if(o&&o.id&&sap.ui.getCore().byId(o.id)){C=sap.ui.getCore().byId(o.id);if(C){d.resolve(C);}}if(b){c=b.replace(/\./g,"/");sap.ui.require([c],function(f){C=new f(o);if(i){t.oShellModel.addElementToManagedQueue(C);t.showLeftPaneContent(oItem.getId(),e,s);}d.resolve(C);});}else{L.warning("You must specify control type in order to create it");}return d.promise();};
a.prototype.addLeftPaneContent=function(c,C,i,b,s){var d=c.replace(/\./g,"/"),o=sap.ui.require(d),e,f,r;if(o){r=true;}else if(!O.get(c)){q.sap.require(c);}f=function(C){if(c){if(r){return new o(C);}var g=O.get(c);return new g(C);}L.warning("You must specify control type in order to create it");};e=this.createItem(C,b,s,f);if(i){this.showLeftPaneContent(e.getId(),b,s);}return e;};
a.prototype.addHeaderItem=function(c,C,i,b,s){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){C=arguments[0];i=arguments[1];b=arguments[2];s=arguments[3];}else{L.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var p=C;p.showSeparator=false;var f=function(C){return new S(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderItem(I.getId(),b,s);}return I;};
a.prototype.addRightFloatingContainerItem=function(c,i,C,s){var f=function(c){return new N(c);},I=this.createItem(c,C,s,f);if(i){this.showRightFloatingContainerItem(I.getId(),C,s);}return I;};
a.prototype.addToolAreaItem=function(c,i,C,s){var f=function(c){return new T(c);},I=this.createItem(c,C,s,f);if(i){this.showToolAreaItem(I.getId(),C,s);}return I;};
a.prototype.addHeaderEndItem=function(c,C,i,b,s){var p=C;p.showSeparator=false;var f=function(C){return new S(C);},I=this.createItem(p,b,s,f);if(i){this.showHeaderEndItem(I.getId(),b,s);}return I;};
a.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
a.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
a.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
a.prototype.LaunchpadState={App:"app",Home:"home"};
a.prototype.createInspection=function(s,c,C,b){this.oShellModel.createInspection(s,c,C,b);};
a.prototype.createTriggers=function(t,c,s){this.oShellModel.createTriggers(t,c,s);};
a.prototype.convertButtonsToActions=function(i,c,s){var p={},b,t=this;i.forEach(function(I){b=sap.ui.getCore().byId(I);p.id=b.getId();p.text=b.getText();p.icon=b.getIcon();p.tooltip=b.getTooltip();p.enabled=b.getEnabled();p.visible=b.getVisible();if(b.mEventRegistry&&b.mEventRegistry.press){p.press=b.mEventRegistry.press[0].fFunction;}b.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,c,s);});};
a.prototype.createItem=function(c,C,s,f){var i;if(c&&c.id){i=sap.ui.getCore().byId(c.id);}if(!i){i=f(c);if(C){this.oShellModel.addElementToManagedQueue(i);}}return i;};
a.prototype.addEntryInShellStates=function(n,e,f,r,s){this.oShellModel.addEntryInShellStates(n,e,f,r,s);};
a.prototype.removeCustomItems=function(s,i,c,b){if(typeof i==="string"){this.oShellModel.removeCustomItems(s,[i],c,b);}else{this.oShellModel.removeCustomItems(s,i,c,b);}};
a.prototype.addCustomItems=function(s,i,c,b){if(typeof i==="string"){this.oShellModel.addCustomItems(s,[i],c,b);}else{this.oShellModel.addCustomItems(s,i,c,b);}};
return a;});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ApplicationType","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,S,B,a,A,R,b,c,d,u,D,C,f,U,q,L){"use strict";
function g(){var v,h=["URL"],r,s,i,I={},j=false,o={},k={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},w,G=[],l={},m=false,K={FULL:"true",RESTRICTED:"restricted"};this.shellElements=function(){return b;};this.service=function(){return R;};this.isCurrentApp=function(e){return(o.appId===e);};this.isAppWithSimilarShellHashInCache=function(e,F){var p=S.get(e);if(p){if(p.shellHash===F){return true;}return false;}return false;};this.isAppInCache=function(e){return!!S.get(e);};this.normalizeAppId=function(e){var p="-component",t=e.endsWith(p);if(t){return e.substring(0,e.length-p.length);}return e;};this.onComponentCreated=function(e,p,t){var x=t.component,y=this.normalizeAppId(x.getId());if(this.isAppInCache(y)){S.get(y).app=x;this.active(y);}else{o.app=x;if(x.active){x.active();}}};this.onGetMe=function(e,p,t){t.AppLifeCycle=this;};this.store=function(e){var p=S.get(e);if(p){A.store(p);c.store(p.meta);}};this.destroy=function(e,F,p,t){var x=S.get(e),y;function z(){if(F&&F.getUrl){B.deleteStateFul(F.getUrl());}A.destroy(F);b.destroy(F);c.destroy(F);}if(t===undefined){t=false;}this.removeControl(e,t);if(x){y=B.getStateFul(F.getUrl());if(y&&B.isStatefulContainerSupported(y)&&t===false){var H=B.getHandler();H.destroy(y,e);}else{x.container.destroy();B.deleteStateFul(F.getUrl());}S.remove(e);if(p){p.resolve();}}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){z();if(p){p.resolve();}}else{P.then(function(){z();if(p){p.resolve();}},function(J){z();if(p){p.resolve();}L.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",J,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(e){var p=S.get(e);if(p){A.restore(p);R.restore(p.service);c.restore(p.meta);}};this.active=function(e){var p=S.get(e);if(p){A.active(p.app);}};this.handleExitStateful=function(F,e){var p,H=B.getHandler();if(S.get(F)){p=B.getStorageKey(e);if(p&&B.isKeepAliveSupported(e)){return H.store(e,p);}return Promise.resolve();}return H.destroy(e);};this.handleExitApplication=function(F,e,t,T,p){var x=this,y,P,z;if(t&&T&&T.getIframeReusedForApp&&T.getIframeReusedForApp()===true){T.setProperty("iframeReusedForApp",false,true);A.postMessageToIframeApp(T,"sap.ushell.sessionHandler","afterApplicationShow",{},false);}if(F&&e){if(e.getUrl()&&B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))){P=this.handleExitStateful(F,e);}else if(S.get(F)){if(R.isBackNavigation()===true&&!p){z=new q.Deferred();this.destroy(F,e,z);P=z.promise();}else{this.store(F);sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",e);}}else if(e.getIsStateful&&e.getIsStateful()){if(p){P=e.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{y=h.indexOf(e.getApplicationType)>=0;if(this.isAppOfTypeCached(F,y)===false){z=new q.Deferred();this.destroy(F,e,z);P=z.promise();}}if(p===true){if(P===undefined){this.closeKeepAliveApps(n);}else{P.then(function(){x.closeKeepAliveApps(n);});}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");};function n(e){return(e.value.keepAliveMode===K.RESTRICTED);}this.closeKeepAliveApps=function(F,p){try{var t=this,x=[];S.forEach(function(y){if(F.apply(this,[y])===true){x.push(y.value);}});x.forEach(function(y){var z;if(p){z=new q.Deferred();p.push(z.promise());}t.destroy(y.appId,y.container,z,true);});}catch(e){L.error("Error: sap.ushell.services.appLifeCycle.closeOtherKeepAliveRestrictedApps:"+e);}};this.onBeforeNavigate=function(F,e,t,T){if(F&&e){if(e.getUrl()&&(B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))||S.get(F)||(e.getIsStateful&&e.getIsStateful()))){A.postMessageToIframeApp(e,"sap.ushell.sessionHandler","beforeApplicationHide",{},false);}}};this.onAfterNavigate=function(F,e,t,T){var p=t.indexOf("Shell-appfinder-component")>0||t.indexOf("Shell-home-component")>0||t.indexOf("pages-component-container")>0;this.handleExitApplication(F,e,t,T,p);if(p===true){A.setActiveAppContainer(undefined);}if(t){if(S.get(t)){this.restore(t);}else{}}};this.storeApp=function(e,p,t,F,x){if(!this.isAppInCache(e)){if(p.setProperty){p.setProperty("isKeepAlive",true,true);}S.set(e,{service:{},shellHash:F,appId:e,stt:"loading",appRelatedElements:b.getAppRelatedElement(),container:p,meta:d.getMetadata(t),app:undefined,keepAliveMode:x&&(x.globalValue||x.paramValue),appTarget:t,ui5ComponentName:t&&t.ui5ComponentName});I[F]=e;B.setStorageKey(p,e);return true;}return false;};this.restoreApp=function(e){if(this.isAppInCache(e)){o=S.get(e);if(B.getStorageKey(o.container)){B.setStorageKey(o.container,e);}}};this.isAppOfTypeCached=function(e,p,t){var x;if(!j&&e.indexOf(r)!==-1){return true;}if(!j&&e.indexOf("Shell-appfinder")!==-1){return true;}x=new U(window.location.href).get("sap-keep-alive");if(x===K.FULL||x===K.RESTRICTED){if(t){t.globalValue=x;}return true;}return false;};this.isCachedEnabledAsAppParameter=function(e,t,p){var x;if(t&&t.appCapabilities&&t&&t.appCapabilities.appFrameworkId==="UI5"){return false;}x=e&&e.params&&e.params["sap-keep-alive"];if(x===K.FULL||x===K.RESTRICTED){if(p){p.paramValue=x;}return true;}if(t&&t.url){x=new U(t.url).get("sap-keep-alive");if(x===K.FULL||x===K.RESTRICTED){if(p){p.paramValue=x;}return true;}}return false;};this.calculateAppType=function(t){if(t.applicationType==="URL"&&t.additionalInformation&&t.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5";}return t.applicationType;};this.getStatefulCapabilities=function(t){if(t.appCapabilities&&t.appCapabilities&&t.appCapabilities.statefulContainer){return t.appCapabilities.statefulContainer;}return undefined;};this.isNotifyInnerAppRouteChangeEnabled=function(t){if(t.appCapabilities&&t.appCapabilities.notifyInnerAppRouteChange){return true;}return false;};this.isStatefulCapabilityEnabled=function(t){var e=this.getStatefulCapabilities(t);if(e&&(e.enabled===true||e===true)){return true;}return false;};this.isGUICapabilityEnabled=function(t){var e=this.getStatefulCapabilities(t);if(e&&e.protocol==="GUI"){return true;}return false;};this.isFLPCapabilityEnabled=function(t){return!this.isGUICapabilityEnabled(t)&&this.isStatefulCapabilityEnabled(t);};this.isGUIStatefulCapabilityEnabled=function(t){return this.isGUICapabilityEnabled(t)&&this.isStatefulCapabilityEnabled(t);};this.openApp=function(e,t,p,F){var x,y,z=h.indexOf(t.applicationType)>=0,T,H,J={globalValue:undefined,paramValue:undefined};var M="application"+e;x=B.getStateFul(t.url);if(x&&B.isStatefulContainerSupported(x)){if(this.isAppOfTypeCached(M,z,J)||this.isCachedEnabledAsAppParameter(p,t,J)){if(!this.isAppInCache(M)){this.storeApp(M,x,t,F,J);}this.restoreApp(M);}else{o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}}else if(this.isAppOfTypeCached(M,z,J)||this.isCachedEnabledAsAppParameter(p,t,J)){if(!this.isAppInCache(M)){x=this.createApplicationContainer(e,t);this.storeApp(M,x,t,F,J);B.set(t.url,x);}this.restoreApp(M);}else if(t.applicationType==="TR"||(t.appCapabilities&&t.appCapabilities.appFrameworkId==="GUI")){x=this.getWebGuiV1StatefulContainer(t.url);if(!x){x=this.createApplicationContainer(e,t);B.set(t.url,x);}o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}else{if(x){y=p.semanticObject+"-"+p.action;this.removeApplication(y);}else if(t.applicationType==="URL"||t.applicationType==="TR"){y=p.semanticObject+"-"+p.action;T=B.getById("application-"+y);if(T){H=T.getUrl();B.removeCapabilities(T);this.destroy("application-"+y,T);B.deleteStateFul(H);}}x=this.createApplicationContainer(e,t);B.set(t.url,x);if(B.isCapUT(x,"isFLP")){B.setCapabilities(x,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}]);}o={appId:M,stt:"loading",container:x,meta:d.getMetadata(t),app:undefined};}};this.getAppMeta=function(){return c;};this.evict=function(e){var p,t=e.value,x=e.key;this.removeControl(x);if(t.container.getUrl&&t.container.getUrl()){p=B.getStateFul(t.container.getUrl());}if(p){var H=B.getHandler();H.destroy(p,x);}else{t.container.destroy();}};this.init=function(e,p,t,x,y,z,F){var H=this,J;if(D.system.phone){J=10;if(F&&F.limit&&F.limit.phone){J=F.limit.phone;}}else if(D.system.tablet){J=10;if(F&&F.limit&&F.limit.tablet){J=F.limit.tablet;}}else if(D.system.desktop){J=15;if(F&&F.limit&&F.limit.desktop){J=F.limit.desktop;}}else{J=10;}s=new a({scopeObject:y.ownerComponent,scopeType:"component"});i=e;v=p;r=t;c.init(r);j=x;B.init({oShellUIService:s},F,this);S.init(J,function(M){this.evict(M);}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{create:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.create:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.create:"+M);});}},destroy:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.destroy:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.destroy:"+M);});}},store:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.store:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.store:"+M);});}},restore:{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(M){L.info("sap.ushell.services.appLifeCycle.restore:"+M);}).catch(function(M){L.error("Error: sap.ushell.services.appLifeCycle.restore:"+M);});}}},oServiceCalls:{subscribe:{executeServiceCallFn:function(M){B.mapCapabilities(M.oContainer,M.oMessageData.body);return new q.Deferred().resolve({}).promise();}},setup:{executeServiceCallFn:function(M){var N=M.oMessageData&&M.oMessageData.body,O=[],P=M.oContainer.getApplicationType(),Q=M.oContainer.getFrameworkId(),T=false;if(N){if(M.oContainer.getIsKeepAlive()===true&&(P==="GUI"||P==="TR"||P==="NWBC"||P==="WDA"||Q==="GUI"||Q==="WDA"||Q==="NWBC")){T=true;}if(N.isStateful===true&&!T){O.push({"action":"create","service":"sap.ushell.services.appLifeCycle"});O.push({"action":"destroy","service":"sap.ushell.services.appLifeCycle"});}if(N.session&&N.session.bLogoutSupport===true){O.push({"action":"logout","service":"sap.ushell.sessionHandler"});}if(O.length>0){B.mapCapabilities(M.oContainer,O);}}return new q.Deferred().resolve().promise();}}}},"sap.gui":{oServiceCalls:{loadFinished:{executeServiceCallFn:function(M){var N=M.oContainer.getApplicationType(),O=M.oContainer.getFrameworkId();if((N==="GUI"||N==="TR"||N==="NWBC"||O==="GUI"||O==="NWBC")&&M.oContainer.getIsKeepAlive()===false){H.setWebGuiV1StatefulContainer(M.oContainer);M.oContainer.setIsStateful(true);o={appId:M.oContainer.getId(),stt:"loading",container:M.oContainer,meta:undefined,app:undefined};}return new q.Deferred().resolve({}).promise();}}}}});sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);b.init(this.getElementsModel(),z);};this.addControl=function(e){v.addCenterViewPort(e);};this.removeControl=function(e,F){var p=B.getById(e),t=B.isStatefulContainerSupported(p);if(!t||F){v.removeCenterViewPort(e,true);}};this.removeApplication=function(e){var p=this.getControl(e);if(p){this.removeControl(p.getId());p.destroy();}};this.getControl=function(e){return v&&(v.getViewPortControl("centerViewPort","application-"+e)||v.getViewPortControl("centerViewPort","applicationShellPage-"+e));};this.getViewPortContainer=function(){return v;};this.navTo=function(e){v.navTo("centerViewPort",e,"show");};this.getCurrentApplication=function(){return o;};this.setApplicationFullWidth=function(e){var p=this.getCurrentApplication();if(p.container){p.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e);}};this.createComponent=function(e,p){function t(z){return(z.value.ui5ComponentName===e.ui5ComponentName);}var x=[],y=new q.Deferred();this.shellElements().setDangling(true);this.closeKeepAliveApps(t,x);Promise.all(x).then(function(){A.createComponent(e,p).done(y.resolve).fail(y.reject);});return y.promise();};this.getAppContainer=function(e,p,t,x,F){p.shellUIService=s.getInterface();p.targetNavigationMode=t?"explace":"inplace";this.openApp(e,p,x,F);if(G.length>0){o.container.registerShellCommunicationHandler(G);}if(l.UI5APP){o.container.setIframeHandlers(l.UI5APP);}return o.container;};this.getShellUIService=function(){return s;};this.initShellUIService=function(e){s._attachHierarchyChanged(c.onHierarchyChange.bind(this));s._attachTitleChanged(c.onTitleChange.bind(this));s._attachRelatedAppsChanged(c.onRelatedAppsChange.bind(this));s._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this));};this.getElementsModel=function(){return E;};this.activeContainer=function(p){var t=this.getWebGuiV1AllApplicationContainers();t.forEach(function(e){L.info("Deactivating container "+e.getId());e.setActive(false);});B.forEach(function(x){if(x&&x!==p){try{L.info("Deactivating container "+x.getId());x.setActive(false);}catch(e){}}});if(p){L.info("Activating container "+p.getId());p.setActive(true);}};this.showApplicationContainer=function(e){this.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}else{e.toggleStyleClass("hidden",false);}A.setActiveAppContainer(e);L.info("New application context opened successfully in an existing transaction UI session.");};this.reuseStateFulContainerAndRestore=function(e,t,H,F,T){var p=this,x=I[F];if(B.getStorageKey(e)){B.setStorageKey(e,x);}return H.restore(e,x,T).then(function(){p.showApplicationContainer(e);},function(y){L.error(y&&y.message||y);});};this.reuseStateFulContainer=function(e,p,t,H,F,T){var x=this;I[F]=t;if(B.getStorageKey(e)){B.setStorageKey(e,t);}this.initAppMetaParams();return H.create(e,p,t,T).then(function(){x.showApplicationContainer(e);},function(y){L.error(y&&y.message||y);});};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){s.setHierarchy();}if(!this.getAppMeta().getIsTitleChanged()){s.setTitle();}if(!this.getAppMeta().getIsRelatedAppsChanged()){s.setRelatedApps();}if(!m){s.setBackNavigation();}};this.reuseApplicationContainer=function(e,p,t){var x=this;e.setProperty("iframeReusedForApp",true,true);return e.setNewApplicationContext(p,t).then(function(){x.navTo(e.getId());if(e.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){e.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}else{e.toggleStyleClass("hidden",false);}L.info("New application context opened successfully in an existing transaction UI session.");},function(y){L.error(y&&y.message||y);});};this.createApplicationContainer=function(e,p){return A.createApplicationContainer(e,p);};this.publishNavigationStateEvents=function(e,p,O){var t,x=e.getId?e.getId():"",y=this;var z=d.getMetadata(),F=z.icon,T=z.title;e.addEventDelegate({onAfterRendering:O});t=e.exit;e.exit=function(){if(t){t.apply(this,arguments);}y.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var H=q.extend(true,{},p);delete H.componentHandle;H.appId=x;H.usageIcon=F;H.usageTitle=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",H);L.info("app was closed");},0);var P=y._publicEventDataFromResolutionResult(p);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(e){var p={};if(!e){return e;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(P){p[P]=e[P];});Object.freeze(p);return p;};this.getInMemoryInstance=function(e,F,p,O){var t="application-"+e,x=S.get(t),y="",N=false,z;if(x){if(O!==null&&O!==undefined&&O!==""){y=O.toLowerCase();N=y.indexOf("shell-home")>=0||y.indexOf("launchpad-openflppage")>=0||y.indexOf("shell-appfinder")>=0;}z=(N&&(typeof p==="string"&&p.length>0));if(x.shellHash===F&&!z){return{isInstanceSupported:true,appId:x.appId,container:x.container};}return{isInstanceSupported:false,appId:x.appId,container:x.container};}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleOpenStateful=function(e,p,t,x,T,F,y){var H=B.getHandler();x.setProperty("iframeReusedForApp",true,true);if(S.get(t)&&e===false){this.reuseStateFulContainerAndRestore(x,t,H,F,T);}else{this.reuseStateFulContainer(x,T.url,t,H,F,T);if(p){if(!this.isAppInCache(t)){this.storeApp(t,x,T,F,y);}}}};this.leave=function(e,p){var t=B.isStatefulContainerSupported(e);var x=S.get(p);if(x){R.store(x.service);}if(t){return this.handleExitStateful(p,e);}return Promise.resolve();};this.open=function(e,p,t,T,W,F,M){var x=this,y,z=(this.getWebGuiV1StatefulContainer(T.url)!==undefined),H,J=h.indexOf(T.applicationType)>=0,N="application-"+e,O,P,Q,V=false,X,Y,Z,$=new q.Deferred(),_,a1={globalValue:undefined,paramValue:undefined};P=this.isAppOfTypeCached(N,J,a1)||this.isCachedEnabledAsAppParameter(t,T,a1);Q=this.calculateAppType(T);X=f.getDefaultFullWidthSetting(Q);y=B.getStateFul(T.url);H=B.isStatefulContainerSupported(y);if(!H){if(o&&N!==o.appId){y=undefined;}O=S.get("application"+p);if(O){y=O.container;if(!H&&P&&y!==undefined){Y=true;}}}var b1,c1;b1=T.appCapabilities&&T.appCapabilities.fullWidth;if(X===true){if(T.fullWidth===false||T.fullWidth==="false"||M.fullWidth===false||M.fullWidth==="false"||b1===false){c1=false;}}else if(T.fullWidth===true||T.fullWidth==="true"||M.fullWidth===true||M.fullWidth==="true"){c1=true;}if(c1===undefined){c1=X;}if(H){if(!y){y=W(e,M,t,T,p,c1,F);this.restoreApp(y.getId());this.navTo(y.getId());V=true;}}else if(!z&&y&&!P){Z=new q.Deferred();this.destroy(y.getId(),y,Z);Z.then(function(){y=W(e,M,t,T,p,c1,F);});}else if(!y){y=W(e,M,t,T,p,c1,F);}if(Z===undefined){Z=new q.Deferred().resolve();}if(y&&y.getDeffedControlCreation){_=y.getDeffedControlCreation();}else{_=Promise.resolve();}Z.then(function(){_.then(function(){if(!z&&!H){if(Y===true){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);}x.restoreApp(y.getId());x.navTo(y.getId());if(Y===true){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);}}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");x.activeContainer(y);if(H){x.handleOpenStateful(V,P,"application"+p,y,T,F,a1);}else if(z){x.reuseApplicationContainer(y,"TR",T.url);}$.resolve();});});return $.promise();};this.handleControl=function(e,p,t,T,W,F){var x=this,M=d.getMetadata(T),y=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined,z=sap.ui.getCore().byId(y);var P=x.leave(z,y).then(function(){x.open(e,p,t,T,W,F,M);},function(H){L.error(H&&H.message||H);});return P;};this.switchViewState=function(e,p,t){var x=e,y;if(k[e]&&k[e][i]){x=k[e][i];}var z=C.last("/core/shell/model/currentState/stateName")==="home";if(!z&&(!o.appId||!S.get(o.appId))){E.destroyManageQueue();}y=S.get("application"+t);if(y){b.restore(y);}else{b.assignNew(e);}E.switchState(x,p,t);this.shellElements().setDangling(false);this.shellElements().processDangling();if(e==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var F=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+F.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(F.getProperty("/uiFilter/dataSource").getJson()));}}};this.registerShellCommunicationHandler=function(e){A.registerShellCommunicationHandler(e);};this.registerIframeCommunicationHandler=function(H,t){l[t]=H;};this.postMessageToIframeApp=function(e,p,M,W){function t(J){if(e==="sap.ushell.sessionHandler"&&p==="logout"){if(J&&J.getApplicationType&&",WCF,GUI,TR,WDA,".indexOf(J.getApplicationType())>0){return false;}}return true;}var x,y=A.getActiveAppContainer(),z=false,F=[];if(B.hasIFrame(y)&&(B.isCapabilitySupported(y,e,p)||A.isAppTypeSupported(y,e,p))&&t(y)===true){F.push(A.postMessageToIframeApp(y,e,p,M,W));z=true;}if(!A.isActiveOnly(e,p)){B.forEach(function(O){if(z===true&&O===y){return;}if(B.hasIFrame(O)){if((B.isCapabilitySupported(O,e,p)||A.isAppTypeSupported(O,e,p))&&t(O)===true){F.push(A.postMessageToIframeApp(O,e,p,M,W));}}});}x=A.getResponseHandler(e,p);var H=Promise.all(F);if(x){x(H);}return H;};this.postMessageToIframeAppAccordingToPolicy=function(e,p,M,W,P){var t,x=A.getActiveAppContainer(),y=[];if(B.hasIFrame(x)&&A.isAppTypeSupportedByPolicy(x,P)){y.push(A.postMessageToIframeApp(x,e,p,M,W));}if(!P.isActiveOnly){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,e,p)||A.isAppTypeSupported(O,e,p)){y.push(A.postMessageToIframeApp(O,e,p,M,W));}}});}t=A.getResponseHandler(e,p);var z=Promise.all(y);if(t){t(z);}return z;};this.setBackNavigationChanged=function(e){m=e;};this.getBackNavigationChanged=function(){return m;};this.parseStatefulContainerConfiguration=function(){w={};};this.getWebGuiV1StatefulContainer=function(e){var p;if(e){p=B._getBlueBoxCacheKey(e);return w[p];}else{return undefined;}};this.setWebGuiV1StatefulContainer=function(e){var p=e.getUrl(),t;if(p){t=B._getBlueBoxCacheKey(p);w[t]=e;}};this.getWebGuiV1AllApplicationContainers=function(){return Object.keys(w).map(function(e){return w[e];}).filter(function(e){return!!e;});};}
return new g();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";
function S(){var c,e;function L(l){this.size=0;if(typeof l=="number"){this.limit=l;}else{this.limit=10;}this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else if(this.size>=this.limit){var E=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(E);}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};this.forEach=function(a){c.forEach(a);};this.length=function(){return c.size;};}
return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/library","sap/base/Log","sap/base/util/ObjectPath"],function(A,P,u,q,U,a,L,O){"use strict";var o,B,b=A.getMetadata().getJSONKeys(),c=a.UI5ComponentType;
function d(){var t=this;this.handleMessageEvent=function(C,m,M){var f=m.data;if(typeof f==="string"){try{f=JSON.parse(m.data);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,f,"sap.ushell.components.container.ApplicationContainer");return;}}if(f.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!A.prototype._isTrustedPostMessageSource(C,m)){L.warning("Received message from untrusted origin: "+m.origin,f,"sap.ushell.components.container.ApplicationContainer");return;}L.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+f.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(C.globalDirtyStorageKey,f.parameters.globalDirty,true);}else{t.handleServiceMessageEvent(C,m,f,M);}};this.handleServiceMessageEvent=function(C,m,M,f){var p=O.get("sap-ushell-config.services.PostMessage.config")||O.create("sap-ushell-config.services.PostMessage.config"),s=M&&M.service,S,g,h,i,I=false,j=P.getAPIs(),k;L.debug("Received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,"sap.ushell.components.container.ApplicationContainer");if(M.type!=="request"||!s){return;}for(var E in j){if(j.hasOwnProperty(E)){if(s.indexOf(E)!==-1){g=j[E];h=E;I=true;break;}}}if(I===false){f.bApiRegistered=false;return;}k=(s.indexOf("user.postapi.")===0);S=s.split(".")[3];if(p&&p.enabled===false){L.warning("Received message for "+S+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!A.prototype._isTrustedPostMessageSource(C,m)){L.warning("Received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function l(e,k){var y;if(k===true){y={oMessage:m,oMessageData:M};}else{y={matchesLocalSid:x,getLocalSystemInSidForma:w,storeSapSystemData:v,executeSetBackNavigationService:r,sendResponseMessage:n,oMessage:m,oMessageData:M,oContainer:C};}try{e(y).done(function(R){n("success",{result:R});}).fail(function(D){n("error",{message:D});});}catch(z){n("error",{message:z.message});}}function n(e,y){var R=JSON.stringify({type:"response",service:M.service,request_id:M.request_id,status:e,body:y});L.debug("Sending post message response to origin ' "+m.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}m.source.postMessage(R,m.origin);}function r(m,M){var D=new q.Deferred(),e;if(M.body&&M.body.callbackMessage&&M.body.callbackMessage.service){e=A.prototype._backButtonPressedCallback.bind(null,m.source,M.body.callbackMessage.service,m.origin);}D.resolve(C.getShellUIService().setBackNavigation(e));return D.promise();}function v(y,z){var K,D,F,G=[y.id];if(arguments.length>1){G.unshift(z);}try{F=JSON.stringify(y);}catch(e){L.error("Cannot stringify and store expanded system data: "+e);}if(F){D=u.getLocalStorage();K=u.generateLocalStorageKey("sap-system-data",G);D.setItem(K,F);}}function w(){var e=sap.ushell.Container.getLogonSystem();var y=e.getName();var z=e.getClient();return"sid("+y+"."+z+")";}function x(e){return w().toLowerCase()===e.toLowerCase();}i=g.oServiceCalls[M.service.replace(h+".","")];if(i&&i.executeServiceCallFn){l(i.executeServiceCallFn,k);}else{n("error",{message:"Unknown service name: '"+M.service+"'"});}};this.init=function(i){B=i;};this.restoreArray=function(e){var f=[],i=0;while(e[i]){f.push(e[i]);i++;}return f;};this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){L.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}p=new Promise(function(e,f){var g;g=function(){L.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(g);};r=sap.ushell.Container.getRenderer();if(r){L.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(g);}});return[p];};this.createComponent=function(r,p){var t=this,D=new q.Deferred();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(e){e.createComponent(r,p,t._createWaitForRendererCreatedPromise(),c.Application).then(D.resolve,D.reject);});return D.promise();};this.stripURL=function(s){var n=s.indexOf("?"),e=s.indexOf("#"),f;if(n>=0){f=s.substr(0,n);}else if(e>=0){f=s.substr(0,e);}else{f=s;}return f;};this.createApplicationContainer=function(s,r){var T={};this._cleanTargetResolution(r,T);o=new A("application"+s,r);this._restoreTargetResolution(r,T);if(r.appCapabilities){o.setProperty("frameworkId",r.appCapabilities.appFrameworkId,true);}o.setHandleMessageEvent(this.handleMessageEvent);B.setAppCapabilities(o,r);return o;};this.active=function(e){if(e){if(e.active){e.active();}}};this.restore=function(e){var D;if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveActivate",e.appTarget);if(e.app.getUrl){D=e.app.getUrl();o=B.get(this.stripURL(D));if(o){B.restoreApp(o.sApplication);}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.activate();}else{if(e.app.restore){e.app.restore();}if(e.app.getRouter&&e.app.getRouter()&&e.app.getRouter().initialize){e.app.getRouter().initialize();}if(e.app.setInitialConfiguration){e.app.setInitialConfiguration();}}o=e.app;}};this.store=function(e){var D;if(e.app){sap.ui.getCore().getEventBus().publish("sap.ushell","appKeepAliveDeactivate",e.appTarget);if(e.app.getUrl){D=e.app.getUrl();o=B.get(this.stripURL(D));if(o){B.storeApp(o.sApplication);}}if(e.app.isKeepAliveSupported&&e.app.isKeepAliveSupported()===true){e.app.deactivate();}else{if(e.app.suspend){e.app.suspend();}if(e.app.getRouter&&e.app.getRouter()){e.app.getRouter().stop();}}}};this.destroy=function(e){var D,o,f=false;if(e){if(e.getUrl){D=e.getUrl();o=B.get(this.stripURL(D));if(B.isStatefulContainerSupported(o)){f=true;B.destroyApp(o.sApplication);}}if(e.destroy&&f===false){e.destroy();}}};this.setActiveAppContainer=function(C){o=C;};this.getActiveAppContainer=function(){return o;};}
d.prototype._cleanTargetResolution=function(r,t){var k;if(r){for(k in r){if(b[k]===undefined){t[k]=r[k];delete r[k];}}}};
d.prototype._restoreTargetResolution=function(r,t){var k;if(r){for(k in t){r[k]=t[k];}}};
d.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};
d.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};
d.prototype.isAppTypeSupported=function(C,s,i){var e=P._getPostMesageInterface(s,i);return this.isAppTypeSupportedByPolicy(C,e);};
d.prototype.isAppTypeSupportedByPolicy=function(C,p){if(C&&C.getAdditionalInformation&&C.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false;}var e=p;if(!e||!e.distributionType){return false;}if(e.distributionType.indexOf("all")>=0){return true;}if(e.distributionType.indexOf("URL")>=0){return false;}if(C.getApplicationType&&e.distributionType.indexOf(C.getApplicationType())>=0){return true;}return false;};
d.prototype.postMessageToIframeApp=function(C,s,i,m,w){var S=s+"."+i,M=this.createPostMessageRequest(S,m);return this.postMessageToIframe(M,C,w);};
d.prototype.createPostMessageRequest=function(s,m){var r=Date.now().toString();return{"type":"request","request_id":r,"service":s,"body":m};};
d.prototype.postMessageToIframe=function(m,C,w){var r=m.request_id,i=C._getIFrame();return new Promise(function(n,N){function p(E){var g;try{g=JSON.parse(E.data);if(r!==g.request_id){return;}if(g.status==="success"){n(g);}else{N(g);}window.removeEventListener("message",p);}catch(e){n();L.warning("Obtained bad response from framework in response to message "+m.request_id);L.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}var M=JSON.stringify(m);L.debug("Sending postMessage "+M+" to application container '"+C.getId()+"'");var f,t;if(!i){n();}else if(w){window.addEventListener("message",p,false);f=new U(C._getIFrameUrl(i));t=f.protocol()+"://"+f.host();i.contentWindow.postMessage(M,t);}else{f=new U(C._getIFrameUrl(i));t=f.protocol()+"://"+f.host();i.contentWindow.postMessage(M,t);n();}});};
d.prototype.registerShellCommunicationHandler=function(C){P.registerShellCommunicationHandler(C);};
d.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};
return new d();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxHandler',["sap/ushell/components/applicationIntegration/application/BlueBoxesCache","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/UriParameters","sap/base/security/encodeXML"],function(B,A,a,U,q,L,b,e){"use strict";
function c(){var t=this,d,C={"isStateful":{handler:function(i,j){if(i&&(i.enabled===true||i===true)){return true;}return false;}},"isGUI":{handler:function(i,j){if(i&&i.protocol==="GUI"){return true;}return false;}},"isGUIStateful":{handler:function(i,j){return t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}},"isFLP":{handler:function(i,j){return!t.isCapUT(j,"isGUI")&&t.isCapUT(j,"isStateful");}}},o={},s={},h={setup:function(T,S){},create:function(i,u,S,T){var D=new q.Deferred(),F,p;function j(){if(F){F["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);F["system-alias"]=i.getSystemAlias();p["sap-flp-params"]=F;}o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",p,true).then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);D.resolve();});}u=a.prototype._checkNwbcUrlAdjustment(i,T.applicationType,u);u=a.prototype._adjustURLForIsolationOpeningWithoutURLTemplate(u);p={sCacheId:S,sUrl:u,sHash:window.hasher.getHash()};if(u.indexOf("sap-iframe-hint=GUI")>0||u.indexOf("sap-iframe-hint=WDA")>0){var I=[];var k=a.prototype._getParamKeys(u,I);if(k.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(l){l.getAppStateData(k).then(function(m){F={};I.forEach(function(n,r){if(m[r][0]){F[n]=m[r][0];}});j();},function(){j();});});}else{F={};j();}}else{j();}return D.promise();},destroy:function(i,S){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:S},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},store:function(i,S){var p;if(o[i].lastAction===g.APP_CLOSED){return Promise.resolve();}o[i].lastAction=g.APP_CLOSED;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:S},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},restore:function(i,S,T){var p;o[i].lastAction=g.APP_OPENED;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:S,sUrl:T.url,sHash:window.hasher.getHash()},true);p.then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);});return p;}},f=[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}],g={APP_OPENED:"app_opened",APP_CLOSED:"app_closed"};this.init=function(S,i,j){B.init();A.init(this);d=j;if(i){s=q.extend(true,s,i.supportedTypes);}};this.isStatefulContainerSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","destroy");return I;};this.isKeepAliveSupported=function(i){var I=this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(i,"sap.ushell.services.appLifeCycle","restore");return I;};this.mapCapabilities=function(i,j){this.setCapabilities(i,j);};this.getCapabilities=function(i){return o[i].oCapMap;};this.isCapabilitySupported=function(i,S,I){if(o[i]&&o[i].oCapMap&&o[i].oCapMap[S]){return!!o[i].oCapMap[S][I];}return false;};this.setCapabilities=function(i,j){var k;if(!o[i]){this.InitBlueBoxBD(i);}if(!o[i].oCapMap){o[i].oCapMap={};}k=o[i].oCapMap;Object.keys(j).forEach(function(l){var m=j[l],n;if(!k[m.service]){k[m.service]={};}n=k[m.service];n[m.action]=true;});if(!i.getIsStateful()&&this.isStatefulContainerSupported(i)){i.setIsStateful(true);}};this.removeCapabilities=function(i){if(o[i]){o[i].oCapMap={};i.setIsStateful(false);}};this.hasIFrame=function(i){if(i&&i._getIFrame){return true;}return false;};this.getStorageKey=function(i){return o[i].sStorageKey;};this.InitBlueBoxBD=function(i){o[i]={BlueBox:i,lastAction:undefined};};this.setAppCapabilities=function(i,T){if(!o[i]){this.InitBlueBoxBD(i);}o[i].currentAppTarget=T;o[i].appCapabilities=T.appCapabilities;if(T.appCapabilities&&T.appCapabilities.statefulContainer===true){this.setCapabilities(i,f);}};this.forEach=function(i){var k;for(k in o){if(o.hasOwnProperty(k)){i(o[k].BlueBox);}}};this.isCapByTarget=function(T,i){if(T.appCapabilities===undefined){return false;}if(C[i]&&T&&T.appCapabilities){return C[i].handler(T.appCapabilities);}return T.appCapabilities[i]||false;};this.isCapUT=function(i,j){var k=o[i];if(k===undefined||k.appCapabilities===undefined){return false;}if(C[j]&&k){return C[j].handler(k.appCapabilities,i);}return k.appCapabilities[j]||false;};this.setStorageKey=function(i,j){if(!o[i]){this.InitBlueBoxBD(i);}o[i].sStorageKey=j;};this.getStorageKey=function(i){if(!o[i]){return undefined;}return o[i].sStorageKey;};this.getHandler=function(){return h;};this._getBlueBoxCacheKey=function(u){return B.getBlueBoxCacheKey(u);};this.deleteStateFul=function(u){var i=this._getBlueBoxCacheKey(u);return this.delete(i);};this.getStateFul=function(u){return B.get(u);};this.destroyApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:i});};this.openApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:i,sHash:window.hasher.getHash()});};this.storeApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:i,sHash:window.hasher.getHash()});};this.restoreApp=function(i){d.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:i,sHash:window.hasher.getHash()});};this.delete=function(u){B.remove(u);};this.get=function(u){return B.get(u);};this.getById=function(i){return B.getById(i);};this.set=function(u,i){B.add(u,i);};}
return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxesCache',["sap/ui/thirdparty/URI","sap/base/Log"],function(U,L){"use strict";var c={};
function i(){c={};}
function g(){return Object.keys(c).length;}
function a(u,I){var k=e(u);c[k]=I;}
function r(u){var k=e(u);if(c[k]){delete c[k];}}
function b(u){if(u===undefined||g()===0){return undefined;}var k=e(u);return(k!==undefined?c[k]:undefined);}
function d(I){for(var k in c){if(c.hasOwnProperty(k)){var E=c[k];if(E.sId===I){return E;}}}return undefined;}
function e(u){var o,O,p,I="",s="",k="",B;if(u===undefined||u===""||u==="../"){return u;}try{o=new U(u);if(u.charAt(0)==="/"){O=window.location.origin;}else{O=o.origin();}if(O===undefined||O===""){O=o.path();if(O===undefined||O===""){O=u;}}p=o.query(true);if(p["sap-iframe-hint"]){I="@"+p["sap-iframe-hint"];}if(p["sap-ui-version"]){s="@"+p["sap-ui-version"];}if((I==="@GUI"||I==="@WDA"||I==="@WCF")&&p["sap-keep-alive"]){k="@"+p["sap-keep-alive"]+"-"+u.split("#")[0];}}catch(f){L.error("URL '"+u+"' can not be parsed: "+f,"sap.ushell.components.applicationIntegration.application.BlueBoxHandler");O=u;}B=O+I+s+k;return B;}
return{init:i,getSize:g,add:a,remove:r,get:b,getById:d,getBlueBoxCacheKey:e};},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPI',["sap/ushell/utils","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ui/thirdparty/URI","sap/base/util/deepExtend","sap/ushell/Config","sap/ushell/utils/UrlParsing"],function(u,c,q,L,U,A,E,P,a,d,C,b){"use strict";var S="sap.ushell.";var D=new U();var o={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{hrefForExternal:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.hrefForExternalAsync(e.oMessageData.body.oArgs,undefined,true).then(i.resolve,i.reject);});return i.promise();}},getSemanticObjectLinks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents).then(i.resolve,i.reject);});return i.promise();}},isIntentSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.isIntentSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}},isNavigationSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.isNavigationSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}},backToPreviousApp:{executeServiceCallFn:function(){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(e){e.backToPreviousApp();});return new q.Deferred().resolve().promise();}},historyBack:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.historyBack(e.oMessageData.body.iSteps);});return new q.Deferred().resolve().promise();}},getAppStateData:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getAppStateData(e.oMessageData.body.sAppStateKey).then(i.resolve,i.reject);});return i.promise();}},toExternal:{executeServiceCallFn:function(e){var i=new q.Deferred(),j=d({},e.oMessageData.body.oArgs);u.storeSapSystemToLocalStorage(j);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(k){k.toExternal(j).then(i.resolve,i.reject);});return i.promise();}},registerBeforeAppCloseEvent:{executeServiceCallFn:function(e){e.oContainer.setProperty("beforeAppCloseEvent",{enabled:true,params:e.oMessageData.body},true);return new q.Deferred().resolve().promise();}},expandCompactHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.expandCompactHash(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.getDistinctSemanticObjects().then(e.resolve,e.reject);});return e.promise();}},getLinks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getLinks(e.oMessageData.body).then(i.resolve,i.reject);});return i.promise();}},getPrimaryIntent:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters).then(i.resolve,i.reject);});return i.promise();}},hrefForAppSpecificHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.hrefForAppSpecificHashAsync(e.oMessageData.body.sAppHash).then(i.resolve,i.reject);});return i.promise();}},isInitialNavigation:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.isInitialNavigationAsync().then(function(I){e.resolve(I);});});return e.promise();}},getAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.getAppState(D,e.oMessageData.body.sAppStateKey).done(function(k){delete k._oServiceInstance;i.resolve(k);});});return i.promise();}},setInnerAppRoute:{executeServiceCallFn:function(e){var H=b.parseShellHash(window.hasher.getHash()),n;if(H.appSpecificRoute===e.oMessageData.body.appSpecificRoute){return new q.Deferred().resolve().promise();}H.appSpecificRoute=e.oMessageData.body.appSpecificRoute;n="#"+b.constructShellHash(H);window.hasher.changed.active=false;window.hasher.replaceHash(n);window.hasher.changed.active=true;return new q.Deferred().resolve().promise();}},setInnerAppStateData:{executeServiceCallFn:function(e){var i=new q.Deferred();f.prototype._createNewInnerAppState(e).then(i.resolve);return i.promise();}},resolveIntent:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(j){j.resolveIntent(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},setBackNavigation:{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{setTitle:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},setHierarchy:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise();}},setRelatedApps:{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise();}},setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},showShellUIBlocker:{executeServiceCallFn:function(e){s(e.oMessageData.body.bShow);return new q.Deferred().resolve().promise();}},getFLPUrl:{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},getShellGroupIDs:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getShellGroupIDs((e.oMessageData.body?e.oMessageData.body.bGetAll:undefined)).then(i.resolve,i.reject);});return i.promise();}},addBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},addBookmarkDialog:{executeServiceCallFn:function(e){sap.ui["require"](["sap/ushell/ui/footerbar/AddBookmarkButton"],function(i){var j=new i();j.firePress({});});return new q.Deferred().resolve().promise();}},getShellGroupTiles:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getTilesByGroupId(e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},sendUrlAsEmail:{executeServiceCallFn:function(e){var i=C.last("/core/shellHeader/application").title;var j=(i===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+i+"'";f.prototype._sendEmail("",j,document.URL,"","",document.URL,true);return new q.Deferred().resolve().promise();}},sendEmailWithFLPButton:{executeServiceCallFn:function(e){var i=C.last("/core/shellHeader/application").title;var j=(i===undefined)?sap.ushell.resources.i18n.getText("linkToApplication"):sap.ushell.resources.i18n.getText("linkTo")+" '"+i+"'";f.prototype._sendEmail("",j,document.URL,"","",document.URL,e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},sendEmail:{executeServiceCallFn:function(e){f.prototype._sendEmail(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},processHotKey:{executeServiceCallFn:function(e){var i;try{i=new KeyboardEvent("keydown",e.oMessageData.body);}catch(j){var I=document.createEvent("KeyboardEvent"),k="";if(e.oMessageData.body.altKey){k+="Alt ";}if(e.oMessageData.body.ctrlKey){k+="Control ";}if(e.oMessageData.body.shiftKey){k+="Shift ";}I.initKeyboardEvent("keydown",false,false,null,e.oMessageData.body.key,e.oMessageData.body.keyCode,k,0,false);i=I;}document.dispatchEvent(i);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.Container":{oServiceCalls:{setDirtyFlag:{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},getFLPUrl:{executeServiceCallFn:function(e){var i=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){i=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(i)).promise();}},getFLPConfig:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getFLPConfig().then(function(F){i.resolve(F);});return i.promise();}},getFLPPlatform:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getFLPPlatform().then(i.resolve);return i.promise();}}}},"sap.ushell.services.AppState":{oServiceCalls:{getAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.getAppState(e.oMessageData.body.sKey).done(function(k){delete k._oServiceInstance;i.resolve(k);}).fail(function(k){delete k._oServiceInstance;i.resolve(k);});});return i.promise();}},_saveAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(i.resolve,i.reject);});return i.promise();}},_loadAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j._loadAppState(e.oMessageData.body.sKey).then(i.resolve,i.reject);});return i.promise();}},deleteAppState:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.deleteAppState(e.oMessageData.body.sKey).then(i.resolve,i.reject);});return i.promise();}},makeStatePersistent:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(j){j.makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings).then(i.resolve,i.reject);});return i.promise();}}},"sap.ushell.services.Bookmark":{oServiceCalls:{addBookmarkUI5:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){f.prototype._stripBookmarkServiceUrlForLocalContentProvider(e.oMessageData.body.oParameters,k);sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.vContainer,k.id).then(i.resolve,i.reject);});});});return i.promise();}},addBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId).then(i.resolve,i.reject);});return i.promise();}},getShellGroupIDs:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getShellGroupIDs().then(e.resolve,e.reject);});return e.promise();}},addCatalogTileToGroup:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData).then(i.resolve,i.reject);});return i.promise();}},countBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.countBookmarks(e.oMessageData.body.sUrl,k.id).then(i.resolve,i.reject);});});});return i.promise();}},deleteBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.deleteBookmarks(e.oMessageData.body.sUrl,k.id).then(i.resolve,i.reject);});});});return i.promise();}},updateBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters,k.id).then(i.resolve,i.reject);});});});return i.promise();}},getContentNodes:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.getContentNodes().then(e.resolve,e.reject);});return e.promise();}},addCustomBookmark:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addCustomBookmark(e.oMessageData.body.sVizType,e.oMessageData.body.oConfig,e.oMessageData.body.vContentNodes,k.id).then(i.resolve,i.reject);});});});return i.promise();}},countCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.countCustomBookmarks(e.oMessageData.body.oIdentifier).then(i.resolve,i.reject);});});});return i.promise();}},updateCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.updateCustomBookmarks(e.oMessageData.body.oIdentifier,e.oMessageData.body.oConfig).then(i.resolve,i.reject);});});});return i.promise();}},deleteCustomBookmarks:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){e.oMessageData.body.oIdentifier.contentProviderId=k.id;sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.deleteCustomBookmarks(e.oMessageData.body.oIdentifier).then(i.resolve,i.reject);});});});return i.promise();}},addBookmarkToPage:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){B.addBookmarkToPage(e.oMessageData.body.oParameters,e.oMessageData.body.sPageId,k.id).then(i.resolve,i.reject);});});});return i.promise();}}}},"sap.ushell.services.AppLifeCycle":{oServiceCalls:{getFullyQualifiedXhrUrl:{executeServiceCallFn:function(e){var r="",x="",i=new q.Deferred(),p=e.oMessageData.body.path;if(p!==""&&p!==undefined&&p!==null){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(j){j.getCurrentApplication().getSystemContext().then(function(k){x=k.getFullyQualifiedXhrUrl(p);var H="",l="",m="",F=sap.ushell.Container.getFLPUrl(true),n=new a(F);if(n.protocol()!==null&&n.protocol()!==undefined&&n.protocol()!==""){l=n.protocol()+"://";}if(n.hostname()!==null&&n.hostname()!==undefined&&n.hostname()!==""){H=n.hostname();}if(n.port()!==null&&n.port()!==undefined&&n.port()!==""){m=":"+n.port();}r=l+H+m+x;i.resolve(r);});});}return i.promise();}},getSystemAlias:{executeServiceCallFn:function(e){var i=e.oContainer.getSystemAlias();if(i===null||i===undefined){i="";}return new q.Deferred().resolve(i).promise();}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{setApplicationFullWidth:{executeServiceCallFn:function(e){A.setApplicationFullWidth(e.oMessageData.body.bValue);return new q.Deferred().resolve().promise();}}}},"sap.ushell.appRuntime":{oRequestCalls:{innerAppRouteChange:{isActiveOnly:true,distributionType:["all"]},hashChange:{isActiveOnly:true,distributionType:["URL"]},setDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},getDirtyFlag:{isActiveOnly:true,distributionType:["URL"]},themeChange:{isActiveOnly:false,distributionType:["all"]},uiDensityChange:{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{hashChange:{executeServiceCallFn:function(e){var i=new q.Deferred();window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(e.oMessageData.body.newHash);window.hasher.disableBlueBoxHashChangeTrigger=false;var j=e.oMessageData.body.direction;if(j){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.hashChanger.fireEvent("hashReplaced",{hash:k.hashChanger.getHash(),direction:j});L.debug("PostMessageAPI.hashChange :: Informed by the Iframe, to change the "+"History direction property in FLP to: "+j);i.resolve();});}else{i.resolve();}return i.promise();}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{getThemeList:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.getThemeList().then(i.resolve,i.reject);});return i.promise();}},getLanguageList:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.getLanguageList().then(i.resolve,i.reject);});return i.promise();}},updateUserPreferences:{executeServiceCallFn:function(e){var i=new q.Deferred();if(e.oMessageData.body.language){sap.ushell.Container.getUser().setLanguage(e.oMessageData.body.language);sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){j.updateUserPreferences().then(function(){sap.ushell.Container.getUser().resetChangedProperty("language");i.resolve();},i.reject);});}else{i.resolve();}return i.promise();}},openThemeManager:{executeServiceCallFn:function(e){E.emit("openThemeManager",Date.now());return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{toExternal:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(i){i.toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory);});return new q.Deferred().resolve().promise();}},toAppHash:{executeServiceCallFn:function(e){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(i){i.toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory);});return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{getDistinctSemanticObjects:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.getDistinctSemanticObjects().then(e.resolve,e.reject);});return e.promise();}},expandCompactHash:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.expandCompactHash(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},resolveHashFragment:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.resolveHashFragment(e.oMessageData.body.sHashFragment).then(i.resolve,i.reject);});return i.promise();}},isNavigationSupported:{executeServiceCallFn:function(e){var i=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(n){n.isNavigationSupported(e.oMessageData.body.aIntents).then(i.resolve,i.reject);});return i.promise();}}}},"sap.ushell.services.Renderer":{oServiceCalls:{addHeaderItem:{executeServiceCallFn:function(e){h("addHeaderItem",e);return new q.Deferred().resolve().promise();}},addHeaderEndItem:{executeServiceCallFn:function(e){h("addHeaderEndItem",e);return new q.Deferred().resolve().promise();}},showHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},showHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideHeaderItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideHeaderEndItem:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},setHeaderTitle:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return new q.Deferred().resolve().promise();}},setHeaderVisibility:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},createShellHeadItem:{executeServiceCallFn:function(e){var p=e.oMessageData.body.params;p.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:p.id});};new sap.ushell.ui.shell.ShellHeadItem(p);return new q.Deferred().resolve().promise();}},showActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},hideActionButton:{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideActionButton(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},addUserAction:{executeServiceCallFn:function(e){e.oMessageData.body.oParameters.oControlProperties.press=function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:e.oMessageData.body.oParameters.oControlProperties.id});};sap.ushell.Container.getRenderer("fiori2").addUserAction(e.oMessageData.body.oParameters);return new q.Deferred().resolve().promise();}},addOptionsActionSheetButton:{executeServiceCallFn:function(e){var B=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];B.forEach(function(i){if(sap.ui.getCore().byId(i.id)){sap.ui.getCore().byId(i.id).destroy();}new sap.m.Button({id:i.id,text:i.text,icon:i.icon,tooltip:i.tooltip,press:function(){e.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:i.id});}});sap.ushell.Container.getRenderer("fiori2").showActionButton([i.id],true,i.aStates);});return new q.Deferred().resolve().promise();}},removeOptionsActionSheetButton:{executeServiceCallFn:function(e){var B=Array.isArray(e.oMessageData.body)?e.oMessageData.body:[e.oMessageData.body];B.forEach(function(i){sap.ushell.Container.getRenderer("fiori2").hideActionButton(i.id,true,i.aStates);if(sap.ui.getCore().byId(i.id)){sap.ui.getCore().byId(i.id).destroy();}});return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{getGroupsForBookmarks:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getGroupsForBookmarks().then(e.resolve,e.reject);});return e.promise();}}}},"sap.ushell.services.Menu":{oServiceCalls:{getSpacesPagesHierarchy:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("Menu").then(function(M){M.getSpacesPagesHierarchy().then(function(i){e.resolve(i);});});return e.promise();}}}},"sap.ushell.services.CommonDataModel":{oServiceCalls:{getAllPages:{executeServiceCallFn:function(){var e=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(i){i.getAllPages().then(function(p){e.resolve(p);});});return e.promise();}}}}};
function f(){this._getBrowserURL=function(){return document.URL;};Object.keys(o).forEach(function(k){if(k.indexOf(S)!==0){throw new Error("All Post Message APIs must start with '"+S+"' - "+k);}});P.init(true,f.prototype.registerShellCommunicationHandler.bind(this));}
f.prototype.getAPIs=function(){return o;};
function g(k,e){var i=o[k],n;if(i){if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(j){i.oServiceCalls[j]=e.oServiceCalls[j];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(j){i.oRequestCalls[j]=e.oRequestCalls[j];});}return;}n={oRequestCalls:{},oServiceCalls:{}};if(e.oServiceCalls){Object.keys(e.oServiceCalls).forEach(function(j){n.oServiceCalls[j]=e.oServiceCalls[j];});}if(e.oRequestCalls){Object.keys(e.oRequestCalls).forEach(function(j){n.oRequestCalls[j]=e.oRequestCalls[j];});}o[k]=n;}
f.prototype._getPostMesageInterface=function(e,i){var j,k=this.getAPIs();if(k[e]){j=k[e];if(j&&j.oRequestCalls&&j.oRequestCalls[i]){return j.oRequestCalls[i];}}return undefined;};
f.prototype.registerShellCommunicationHandler=function(e){Object.keys(e).forEach(function(k){g(k,e[k]);});};
f.prototype.isActiveOnly=function(e,i){var j=this._getPostMesageInterface(e,i);if(j){return j.isActiveOnly;}return undefined;};
f.prototype.getResponseHandler=function(e,i){var j=this._getPostMesageInterface(e,i);if(j){return j.fnResponseHandler;}return undefined;};
f.prototype._createNewInnerAppState=function(i){return new Promise(function(r){var n,H,j,N,v;sap.ushell.Container.getServiceAsync("AppState").then(function(k){n=k.createEmptyAppState(undefined,false);if(i.oMessageData.body.sData!==undefined){try{v=JSON.parse(i.oMessageData.body.sData);}catch(e){v=i.oMessageData.body.sData;}}else{v="";}n.setData(v);n.save();N=n.getKey();H=window.hasher.getHash();if(H.indexOf("&/")>0){if(H.indexOf("sap-iapp-state=")>0){j=/(?:sap-iapp-state=)([^&/]+)/.exec(H)[1];H=H.replace(j,N);}else{H=H+"/sap-iapp-state="+N;}}else{H=H+"&/sap-iapp-state="+N;}window.hasher.changed.active=false;window.hasher.replaceHash(H);window.hasher.changed.active=true;r(N);});});};
function s(e){if(e===true){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(true);var H=q("#shell-header-blockedLayer");H.addClass("sapUshellShellBlocked");}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(true);var m=q("#menuBar-blockedLayer");m.addClass("sapUshellMenuBarBlocked");}}else if(e===false){if(sap.ui.getCore().byId("shell-header")){sap.ui.getCore().byId("shell-header").setBlocked(false);}if(sap.ui.getCore().byId("menuBar")){sap.ui.getCore().byId("menuBar").setBlocked(false);}}}
function h(e,i){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:i.oMessageData.body.sId,tooltip:i.oMessageData.body.sTooltip,icon:i.oMessageData.body.sIcon,press:function(){i.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:i.oMessageData.body.sId});}},i.oMessageData.body.bVisible,i.oMessageData.body.bCurrentState||true,i.oMessageData.body.aStates);}
f.prototype._sendEmail=function(t,e,B,i,j,I,k){var F=(this._getBrowserURL&&this._getBrowserURL())||document.URL;function r(l,m){if(l&&l.length>0&&((e&&e.includes(l))||(B&&B.includes(l)))){if(B&&B.includes(l)){B=B.replace(l,m);}if(e&&e.includes(l)){e=e.replace(l,m);}}}if(k){sap.ushell.Container.getServiceAsync("AppState").then(function(l){l.setAppStateToPublic(I).done(function(n,x,m,X,p){if(X!==undefined){F=F.replace(x,X);}if(p!==undefined){F=F.replace(m,p);}r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,i,j);}).fail(L.error);});}else{r(I,F);sap.m.URLHelper.triggerEmail(t,e,B,i,j);}};
f.prototype._stripBookmarkServiceUrlForLocalContentProvider=function(p,e){if(!p||!p.serviceUrl||!e){return;}if(e.id===""||e.id==="saas_approuter"){p.serviceUrl=undefined;L.warning("Dynamic data bookmarks tiles are not supported for local content providers",null,"sap/ushell/components/applicationIntegration/application/PostMessageAPI");}};
return new f();});
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface',["sap/ui/thirdparty/jquery"],function(q){"use strict";var U="user.postapi.";
function P(){var _,a;this.init=function(i,D){_=i;a=D;};this.getInterface=function(){var i={};i.registerPostMessageAPIs=r.bind(null,a);i[(_===true?"postMessageToApp":"postMessageToFlp")]=d.bind(null,_);i.createPostMessageResult=c;return i;};}
function r(D,p){var R={status:"success",desc:""};var o={isActiveOnly:true,distributionType:["all"],fnResponseHandler:function(){}};if(p===undefined||Object.keys(p).length<=0){R.status="error";R.desc="no handler was found to register";return R;}Object.keys(p).forEach(function(s){if(typeof s!=="string"){R.status="error";R.desc="oPostMessageAPIs should contain only string keys";}else if(s.indexOf(U)!==0){R.status="error";R.desc="all user custom Message APIs must start with '"+U+"'";}else{Object.keys(p[s]).forEach(function(t){if(t=="inCalls"){p[s].oServiceCalls=p[s][t];delete p[s][t];}else if(t=="outCalls"){Object.keys(p[s][t]).forEach(function(m){p[s][t][m]=q.extend(true,{},o,p[s][t][m]);});p[s].oRequestCalls=p[s][t];delete p[s][t];}else{R.status="error";R.desc="api should contain either 'inCalls' or 'outCalls'";}});}});if(R.status==="success"){D(p);}return R;}
function d(i,s,I,p){var D=new q.Deferred();if(p===undefined){p={};}if(i){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){A.postMessageToIframeApp(s,I,p,true).then(function(R){D.resolve(R&&R[0]&&R[0].body.result);});});}else{sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(A){A.sendMessageToOuterShell(s+"."+I,p).done(function(R){D.resolve(R);});});}return D.promise();}
function c(R){if(R===undefined){R={};}return new q.Deferred().resolve(R).promise();}
return new P();});
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(A,E,D,C,u,r,a,R,q,M,b){"use strict";
function c(){var i,t=this,d,s,e;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return e;};this.getHierarchyDefaultValue=function(){var h=[];var f=C.last("/core/shell/model/currentState/stateName");if(f&&((f==="app"||f==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];var T=C.last("/core/shell/model/currentSpaceAndPage");if(T!==undefined){h.splice(0,0,{icon:"sap-icon://circle-task-2",title:T.pageTitle,subtitle:T.pageTitle!==T.spaceTitle?T.spaceTitle:undefined,intent:"#"+T.hash});}}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return d;};this.onHierarchyChange=function(o){d=true;var h=o.getParameters().data,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}var H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=q.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(o){e=true;var f=o.getParameters().data,g=C.last("/core/shell/model/currentState/stateName");if(!f){f=[];}if(g==="home"){E.updateStateProperty("application/relatedApps",f,false,["home"]);}E.updateStateProperty("application/relatedApps",f,true);};this.resetShellUIServiceHandlers=function(){e=false;d=false;i=false;};this.onTitleChange=function(o){i=true;var T=o.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get("sapUiShellFavicon");if(f){var m=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var g=sap.ui.require.toUrl("sap/ushell");return g+"/themes/base/img/launchpad_favicon.ico";}return f;};this.getFavIconHref=function(){return q("link").filter("[rel=\"shortcut icon\"]").attr("href")||"";};this.getAppIcon=function(){var I="sap-icon://folder",f=A.getMetadata();if(f&&f.icon){I=f.icon;}return I;};this.setAppIcons=function(m){M.start("FLP:ShellController.setAppIcons","setValues","FLP");sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){if(sap.ui.getCore().isThemeApplied()){this.setValues(m,P);}else{sap.ui.getCore().attachThemeChanged(function(){this.setValues(m,P);}.bind(this));}}.bind(this));M.end("FLP:ShellController.setAppIcons");};this.setValues=function(m,P){var f=sap.ui.require.toUrl("sap/ushell"),l=(m&&m.homeScreenIconPhone)||(f+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png"),L=(m&&m["homeScreenIconPhone@2"])||(f+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png"),o=(m&&m.homeScreenIconTablet)||(f+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png"),g=(m&&m["homeScreenIconTablet@2"])||(f+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png"),F=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),h=this.getFavIconHref();if(D.os.ios){b.setIcons({"phone":l,"phone@2":L,"tablet":o,"tablet@2":g,"favicon":F,"precomposed":false});}else if(h!==F){b.setIcons({"phone":"","phone@2":"","tablet":"","tablet@2":"","favicon":F,"precomposed":true});}};this._applyContentDensityByPriority=function(f,g){var t=this;return new Promise(function(h){sap.ushell.Container.getServiceAsync("UserInfo").then(function(j){var k;if(f===undefined){if(D.system.combi){var U=j.getUser(),l="autoDetect";if(U){l=U.getContentDensity();}switch(l){case"cozy":f=false;break;case"compact":f=true;break;default:k=A.getMetadata();if(k.compactContentDensity&&!k.cozyContentDensity){f=true;}else{f=false;}}}else{k=A.getMetadata();if(k.compactContentDensity&&!k.cozyContentDensity){f=true;}else if(!k.compactContentDensity&&k.cozyContentDensity){f=false;}else{f=t._isCompactContentDensityByDevice();}}}t._applyContentDensityClass(f,g).then(h);});});};this._applyContentDensityClass=function(f,g){var I=this._isCompactContentDensityByDevice();return new Promise(function(h,j){function k(l){q("body").toggleClass("sapUiSizeCompact",l).toggleClass("sapUiSizeCozy",!l);if(g===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(m){m.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{"isTouch":(l?"0":"1")});});}h();}if(f===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(l){var U=l.getUser?l.getUser():undefined;k(U&&U.getContentDensity()==="cozy"?false:I);});}else{k(!!f);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",f=A.getMetadata();if(f&&f.title){T=f.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}
return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/base/util/deepExtend","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing"],function(E,C,u,H,S,M,L,d,q,U){"use strict";var b;var c;
function a(){return{home:{actions:["ContactSupportBtn"]},app:{actions:["ContactSupportBtn","aboutBtn"]},minimal:{actions:["ContactSupportBtn","aboutBtn"]},standalone:{actions:["ContactSupportBtn","aboutBtn"]},embedded:{actions:["ContactSupportBtn","aboutBtn"]},"embedded-home":{actions:["ContactSupportBtn","aboutBtn"]},lean:{actions:["ContactSupportBtn","aboutBtn"]}};}
function e(){return{blank:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"blank-home":{stateName:"blank-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},home:{stateName:"home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,search:"",paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},app:{stateName:"app",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],search:"",actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},minimal:{stateName:"minimal",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:["openCatalogBtn","userSettingsBtn"],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},standalone:{stateName:"standalone",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},embedded:{stateName:"embedded",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"embedded-home":{stateName:"embedded-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},headerless:{stateName:"headerless",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},merged:{stateName:"merged",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"headerless-home":{stateName:"headerless-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},"merged-home":{stateName:"merged-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:true,paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[],search:""},lean:{stateName:"lean",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]},"lean-home":{stateName:"lean-home",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:true,showRecentActivity:false,paneContent:[],search:"",actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}};}
function r(O,K){return Object.keys(O).reduce(function(o,s){if(!K[s]){o[s]=O[s];}return o;},{});}
function v(i,j){return j!==undefined;}
function n(){return true;}
function g(o,m){var p=m.split("/");var i=o;p.shift();p.forEach(function(P){if(!i){return;}i=i[P];});return i;}
function f(m,V,o){var p=m.split("/");var i=o;p.shift();var P=p.pop();p.forEach(function(s){i=i[s];});i[P]=V;}
function h(){var o;var s;var l;var A;var m;var I;var p;var t;var T;var w;this.createDefaultTriggers=function(i){var R=function(B,D,F){if(F.sProperty==="actions"){var G=g(F.oModel,F.path);if(G&&G.length===0&&F.aIds&&F.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(B){function D(O,N){var G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,P=U.parseShellHash(J).appSpecificRoute;return K!==P;}var F=D(B.oldURL,B.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){b=e();c=a();s=C.last("/core/shell/model");o={};m={};I=false;t=false;T=[];w=true;A=j;p=undefined;if(i){M.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn");}if(i.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn");}M.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;w=undefined;t=undefined;p=undefined;b=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._removeCustomDataActionBtnFromMeArea=function(i){for(var j in c){var y=c[j];var z=y.actions;var B=z.indexOf(i);if(B!==-1){c[j].actions.splice(B,1);}}};this._removeActionFromMeArea=function(B){var i;for(i in b){var j=b[i];if(i==="blank"||i==="blank-home"){continue;}var y=j.actions;var z=y.indexOf(B);if(z!==-1){b[i].actions.splice(z,1);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=d({},b[i]);var y=r(j,{aTriggers:true});C.emit("/core/shell/model/currentState",y);H.switchState(i);l=A.customShellState;p=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){L.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this._createHeaderEventPayload=function(P,V,i,j,D,y){var z={propertyName:P,value:V,aStates:j,bCurrentState:i,action:y,bDoNotPropagate:D};return z;};this.setHeaderVisibility=function(V,i,j){var P=this._createHeaderEventPayload("headerVisible",V,i,j,false);H.updateStates(P);};this.showLogo=function(i,j){this.updateShowLogo(true,i,j,false);};this.updateShowLogo=function(V,i,j,D){var P=this._createHeaderEventPayload("showLogo",V,i,j,D);H.updateStates(P);};this.addHeaderItem=function(i,j,y){if(i.length){var P=this._createHeaderEventPayload("headItems",i,j,y,false);H.updateStates(P);}};this.removeHeaderItem=function(i,j,y){var P=this._createHeaderEventPayload("headItems",i,j,y,false,"remove");H.updateStates(P);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){var P=this._createHeaderEventPayload("headEndItems",i,j,y,D);H.updateStates(P);}};this.removeHeaderEndItem=function(i,j,y){var P=this._createHeaderEventPayload("headEndItems",i,j,y,false,"remove");H.updateStates(P);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y){this._addActionButton("actions",i,j,y);};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y,z){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y,z);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){if(P.startsWith("application")){var y=this._createHeaderEventPayload(P,V,i,j,false);H.updateStates(y);return;}this._setShellItem(P,V,i,j,v,f,D);};this._handleTriggers=function(N){var i,j,y=[],z={};w=false;while(T.length>0){i=T.pop();if(N[i.sName]){y.push(i);z[i.sName]=i;}else{i.fnUnRegister(this);}}for(var B in N){if(N.hasOwnProperty(B)){if(!z[B]){j=N[B];j.fnRegister(this);y.push(j);}}}T=y;w=true;};this._registerTriggers=function(i){w=false;i.forEach(function(j){j.fnRegister(this);T.push(j);});w=true;};function x(i,j){var y=[];if(!j.aTriggers){j.aTriggers=[];}i.forEach(function(z){var F={sName:z.sName,fnRegister:z.fnRegister,fnUnRegister:z.fnUnRegister};j.aTriggers.push(F);y.push(F);});return y;}this.createTriggersOnState=function(i){var j=x(i,b);if(!I){this._registerTriggers(j);}};this.createTriggersOnBaseStates=function(i,B,j){var y=[];B.forEach(function(D){var F=b[D];y=x(i,F);});var z=B.indexOf(j)>=0;if(z&&!I){this._registerTriggers(y);}};this.createTriggers=function(i,j,B){var y=s.currentState;if(j===true){this.createTriggersOnState(i,y);return;}this.createTriggersOnBaseStates(i,B,y.stateName);};this.showShellItem=function(P,j,V){var y=S.getModelStates(j),z="/currentState"+P,B;for(var i=0;i<y.length;i++){B=b[y[i]].stateName;b[B][P.split("/")[1]]=V;}if(s.currentState.stateName===j){f(z,V,s);if(!I){this._renderShellState();}}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.applyExtendedShellState=function(i){p=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var B,D;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var F=this._getStatesList();for(B=0;B<F.length;B++){D=F[B];b[D][i]=z[D];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),B,y=i.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}B=A.extendedShellStates;if(!B[j]){B[j]={managedObjects:[],customState:undefined};}B[j].managedObjects.push(y);var z=m[y];if(z){z.nRefCount++;}else{z={oItem:i,nRefCount:1};m[y]=z;}};this.updateNeededTriggersMap=function(i,j){var y;if(!j){return;}for(y=0;y<j.length;y++){i[j[y].sName]=j[y];}};this._renderShellState=function(){var B=C.last("/core/shell/model/currentState/stateName"),i,j,y=d({},b[B]),z=A,D,N={};if(I){return;}if(z&&z.customShellState){D=z.customShellState.currentState;}var F={currentState:d({},y)};s=F;I=true;if(p&&z.extendedShellStates&&z.extendedShellStates[p]){i=z.extendedShellStates[p].customState;j=i.currentState;this._addCustomShellStates(j);}if(D){this._addCustomShellStates(D);}s=C.last("/core/shell/model");if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(D&&D.aTriggers){this.updateNeededTriggersMap(N,D.aTriggers);}if(w){this._handleTriggers(N);}delete F.currentState.aTriggers;var G=r(F.currentState,{aTriggers:true});H.recalculateState(p);C.emit("/core/shell/model/currentState",G);I=false;};this._addCustomShellStates=function(i){this.addToolAreaItem(i.toolAreaItems,false,true);this.addSubHeader(i.subHeader,true);this.addRightFloatingContainerItem(i.RightFloatingContainerItems,true);this.addActionButton(i.actions,true,undefined,false);this.addLeftPaneContent(i.paneContent,true);this.addFloatingActionButton(i.floatingActions,true);this.showRightFloatingContainer(i.showRightFloatingContainer);};this._createCustomShellState=function(i){var j={currentState:{stateName:i,headEndItems:[],paneContent:[],headItems:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],application:{},showRightFloatingContainer:undefined,headerHeading:undefined}};var y=c[i];if(y){q.extend(j.currentState,y);}return j;};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,f);};this._addActionButton=function(P,j,y,z){function B(D,F,G){var J=g(G,D);var K=J.indexOf("logoutBtn");if(K>-1){J.splice.apply(J,[K,0].concat(F));}else{J=J.concat(F);}var N=u.removeDuplicatedActions(J);function O(J){var R=[],V=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","ContactSupportBtn"];for(var i=0;i<V.length;i++){var W=J.indexOf(V[i]);if(W>-1){R.push(J.splice(W,1)[0]);}}R=R.concat(J);return R;}var Q=O(N);f(D,Q,G);}this._setShellItem(P,j,y,z,n,B);};this.setFloatingContainerContent=function(P,i,j,y){function V(B,i,D){return i.length===1;}function z(B,i,D){f(B,i,D);}this._setShellItem(P,i,j,y,V,z);};this._addShellItem=function(P,i,j,y){function V(B,i,D){if(B.length>0){L.warning("You can only add one item. Replacing existing item: "+B[0]+" in state: "+D+", with the new item: "+i[0]+".");}return true;}function z(B,D,F){f(B,i.slice(0),F);}this._setShellItem(P,i,j,y,V,z);};this._addRightFloatingContainerItem=function(P,i,j,y){function z(B,D,F){var G=g(F,B);G=G.concat(D);f(B,G,F);}this._setShellItem(P,i,j,y,n,z);};this._addToolAreaItem=function(P,i,j,y,z){function B(G,i,J){var K=g(J,G),N,D;if(typeof i==="string"){i=[i];}for(D=0;D<i.length;D++){N=i[D];if(K.indexOf(N)<0){K.push(N);}}f(G,K,J);}if(j){var D,F=S.getPassStates(z);for(D=0;D<F.length;D++){this.showShellItem("/toolAreaVisible",F[D],true);}}this._setShellItem(P,i,y,z,n,B);};this._removeShellItem=function(P,i,j,y){function V(B,D){var F,i,G;for(G=0;G<D.length;G++){i=D[G];F=B.indexOf(i);if(F<0){L.warning("You cannot remove Item: "+i+", the Item does not exists.");return false;}}return true;}function z(B,D,F){var G=g(F,B),J,i,K;for(K=0;K<D.length;K++){i=D[K];J=G.indexOf(i);if(J>-1){G.splice(J,1);}}f(B,G,F);}this._setShellItem(P,i,j,y,V,z);};this._setShellItem=function(P,O,y,z,V,B,D){var F,G;var J=Array.isArray(O)?O.slice(0):O;if(y===true){F="/currentState/"+P;G=g(s,F);if(V(G,J,"currentState")===false){return;}if(!t&&!I){B(F,J,l);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:s,path:F,aIds:J,sProperty:P});this._renderShellState();}else{B(F,J,s);}}else{var K=D?z:S.getPassStates(z),i,N=s.currentState.stateName;for(i=0;i<K.length;i++){var Q=K[i],j;G=g(b[Q],"/"+P);if(V(G,J,Q)===false){continue;}var R=S.getModelStates(Q,D);for(j=0;j<R.length;j++){F="/"+R[j]+"/"+P;B(F,J,b);if(N===R[j]){if(!I){this._renderShellState();}}}}}};this._getStatesList=function(){return Object.keys(b);};this._destroyManageQueue=function(){var i,j,y,B,z,D;B=A.extendedShellStates;for(z in B){if(B.hasOwnProperty(z)){D=B[z].managedObjects;for(i=0;i<D.length;i++){j=D[i];y=m[j];y.nRefCount--;if(y.nRefCount===0){y.oItem.destroy();m[j]=null;}}delete B[z];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(i,j){t=j;s=i;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){u.updateProperties(b[j],i[j]);}}};this.getBaseStateMember=function(i,B){return b[i][B];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}
var k=new h();return k;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";
function R(){var d=false,c,b=false;this.resetBackNavigationFlag=function(){b=false;};sap.ui.getCore().getEventBus().subscribe("relatedServices","resetBackNavigation",this.resetBackNavigationFlag,this);this._defaultBackNavigation=function(){window.history.back();};this.isBackNavigation=function(){return b;};this.navigateBack=function(){var t=this;b=true;if(d===true){this._defaultBackNavigation();}else if(c){c();}else{sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(C){C.isInitialNavigationAsync().then(function(i){if(i){C.toExternal({target:{shellHash:"#"},writeHistory:false});return;}t._defaultBackNavigation();});});}};this.setNavigateBack=function(i){d=false;c=i;};this.resetNavigateBack=function(){d=true;c=undefined;};this.restore=function(i){d=i.bDefaultBrowserBack;c=i.fnCustomBackNavigation;};this.store=function(s){s.bDefaultBrowserBack=d;s.fnCustomBackNavigation=c;};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";
function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],b={"home":{"actions":[]},"app":{"actions":["aboutBtn"]},"minimal":{"actions":["aboutBtn"]},"standalone":{"actions":["aboutBtn"]},"embedded":{"actions":["aboutBtn"]},"embedded-home":{"actions":["aboutBtn"]},"lean":{"actions":["aboutBtn"]}},o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(e,f){E=e;if(f&&f.length>0){Object.keys(b).forEach(function(S){b[S].actions=f.concat(b[S].actions);});}};this.processDangling=function(){var D,e;for(D=0;D<d.length;D++){e=d.pop();e.func.apply(this,e.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,e,f,g){var N=o[n]?o[n]:o.default,h=N[g?undefined:e]?N[e]:N.default,j=h[f]?h[f]:h.default;return j;};this.createCustomShellState=function(S){var e={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},f=b[S];if(f){q.extend(e.currentState,f);}return e;};this.createExtendedShellState=function(S,f){var B,e=this.createCustomShellState(S);B=a.extendedShellStates;if(B[S]){return false;}s=e;f();if(B[S]){B[S].customState=e;}else{B[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(e,v){var f=e.split("/");var l=f.pop();var g=f.reduce(function(h,m){return h[m];},s.currentState);g[l]=v;E._renderShellState();};this._genericAddItems=function(e,I){var f=s.currentState[e];s.currentState[e]=f.concat(I);E._renderShellState();};this.genericSetItem=function(e,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(e,v);}};this.genericAddItems=function(e,I){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(e,I);}};this.setShellModelForApplications=function(e,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericSetItem(e,v);}else{L.error("Not a valid attribute:"+e);}};this.addShellModelForApplications=function(e,I){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericAddItems(e,I);}else{L.error("Not a valid attribute:"+e);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var e=S.appRelatedElements;a.aTriggers=e.aTriggers;a.extendedShellStates=e.extendedShellStates;a.oCheckPoints=e.oCheckPoints;a.customShellState=e.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}
return new R();},true);
sap.ui.predefine('sap/ushell/components/cards/Card.controller',["sap/ushell/components/tiles/utils","sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],function(u,m,r,C,J,X){"use strict";return C.extend("sap.ushell.components.cards.Card",{onInit:function(){var v=this.getView(),c=this.getView().getViewData().chip,t=c.bag.getBag("tileProperties"),M,o;o=m.getTranslatablePropertiesFromBag(t);M=new J({data:o});v.setModel(M);v.setModel(r.i18nModel,"i18n");this._implementConfigurationUiContract(c,v);this._implementPreviewContract(c,o);},onPress:function(){var v=this.getView(),c=v.getViewData().chip,s=c.configuration.getParameterValueAsString("tileConfiguration"),o;if(c.configurationUi.isEnabled()){c.configurationUi.display();}else if(s){o=JSON.parse(s);sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(a){a.toExternal({target:{semanticObject:o.navigation_semantic_object,action:o.navigation_semantic_action},params:o.navigation_semantic_parameters_as_object});});}},_implementPreviewContract:function(c,a){if(c.preview){c.preview.setPreviewTitle(a.display_title_text);if(c.preview.setPreviewSubtitle&&typeof c.preview.setPreviewSubtitle==="function"){c.preview.setPreviewSubtitle(a.display_subtitle_text);}}},_implementConfigurationUiContract:function(c,v){if(c.configurationUi&&c.configurationUi.isEnabled()){c.configurationUi.setUiProvider(function(){var o=this._getConfigurationUi(c);o.setModel(v.getModel(),"tileModel");return o;}.bind(this));v.getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}},_getConfigurationUi:function(c){var o=new X({viewName:"sap.ushell.components.cards.Configuration",viewData:{chipInstance:c}});return o;}});});
sap.ui.predefine('sap/ushell/components/cards/Configuration.controller',["sap/ushell/components/cards/ManifestPropertyHelper","sap/ushell/resources","sap/ui/core/mvc/Controller","sap/base/strings/formatMessage","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(m,r,C,f,J,q,L){"use strict";return C.extend("sap.ushell.components.cards.Configuration",{formatter:f,onInit:function(){var v=this.getView(),V=v.getViewData(),c=V.chipInstance,M,s=c.configuration.getParameterValueAsString("cardManifest"),o;if(s){o=this._prepareManifest(s,c);}M=new J({data:{editorValue:JSON.stringify(o,null,4)||""},config:{originalLanguage:"",sapLogonLanguage:"",displayOriginalLanguageWarning:false,manifestEditorEditable:true}});v.setModel(M);v.setModel(r.i18nModel,"i18n");v.setViewName("sap.ushell.components.cards.Configuration");c.configurationUi.attachSave(this.onSaveConfiguration.bind(this));this._checkOriginalLanguage();},onSaveConfiguration:function(){var d=new q.Deferred(),M=this.getView().getModel(),s=M.getProperty("/data/editorValue"),o,E;try{o=JSON.parse(s);}catch(e){this._logErrorAndReject({error:r.i18n.getText("configuration.invalidJSONProvided")},d);return d;}E=m.extractCardData(o);this._saveManifestAndTileConfig(E.manifest,E.tileConfiguration).then(this._saveTilePropertiesBag.bind(this,E)).then(this._saveTitle.bind(this,E.bagProperties.display_title_text)).then(this._updateTileModel.bind(this,E)).then(d.resolve).catch(function(a){this._logErrorAndReject(a,d);}.bind(this));return d.promise();},_saveManifestAndTileConfig:function(a,t){var c=this.getView().getViewData().chipInstance;var p=new Promise(function(b,d){c.writeConfiguration.setParameterValues({cardManifest:JSON.stringify(a),tileConfiguration:t},b,function(e,E){d({error:e,errorInfo:E});});});return p;},_saveTilePropertiesBag:function(c){var o=this.getView().getViewData().chipInstance;var t=o.bag.getBag("tileProperties");this._fillCardBag(c,t);var p=new Promise(function(a,b){t.save(a,function(e,E){b({error:e,errorInfo:E});});});return p;},_saveTitle:function(t){var c=this.getView().getViewData().chipInstance;var p=new Promise(function(a,b){if(c.title){c.title.setTitle(t,a,function(e,E){b({error:e,errorInfo:E});});}else{a();}});return p;},_updateTileModel:function(c){var t=this.getView().getModel("tileModel");t.setProperty("/data/display_title_text",c.bagProperties.display_title_text);t.setProperty("/data/display_subtitle_text",c.bagProperties.display_subtitle_text);},_logErrorAndReject:function(e,d){L.error(e.error,null,"card.Configuration.controller");d.reject(e.error,e.errorInfo);},_fillCardBag:function(e,t){Object.keys(e.bagProperties).forEach(function(p){if(e.bagProperties[p]){t.setText(p,e.bagProperties[p]);}else{t.resetProperty(p);}});},_prepareManifest:function(a,c){var M=JSON.parse(a),o=m.getCardData(c);return m.mergeCardData(M,o);},_checkOriginalLanguage:function(){var M,l;if(!this._isOriginalLanguage()){M=this.getView().getModel();l=this._getLanguages();M.setProperty("/config/originalLanguage",l.originalLanguage.toUpperCase());M.setProperty("/config/sapLogonLanguage",l.logonLanguage.toUpperCase());M.setProperty("/config/displayOriginalLanguageWarning",true);M.setProperty("/config/manifestEditorEditable",false);}},_isOriginalLanguage:function(){var l=this._getLanguages(),o=l.originalLanguage.toLowerCase(),s=l.logonLanguage.toLowerCase(),a=l.ui5CoreLanguage.toLowerCase();return o===""||o===s||o===a;},_getLanguages:function(){var c=this.oView.getViewData().chipInstance;return{originalLanguage:c.bag.getOriginalLanguage(),logonLanguage:sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage(),ui5CoreLanguage:sap.ui.getCore().getConfiguration().getLanguage()};}});});
sap.ui.predefine('sap/ushell/components/cards/ManifestPropertyHelper',["sap/base/util/ObjectPath","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(O,u,a){"use strict";var M={PLACEHOLDERS:{TITLE:"<title>",SUBTITLE:"<subtitle>",ICON:"<icon>",SEARCH_KEYWORDS:"<keywords>",SEMANTIC_OBJECT:"<semantic object>",ACTION:"<action>",PARAMETERS:"<parameters>",TARGET_URL:"<target URL>"},extractCardData:function(m){var A=this._getNavigationAction(m),t,s,S,b,c,T,U,d=O.get(["sap.app","tags","keywords"],m),e;if(A){b=O.get(["parameters","intentSemanticObject"],A);c=O.get(["parameters","intentAction"],A);T=O.get(["parameters","url"],A);s=O.get(["parameters","intentParameters"],A);}if(s){S=u.urlParametersToString(s);}if(T){U=false;}else if(b&&c){U=true;T="#"+b+"-"+c;if(S){T+="?"+S;}}t=JSON.stringify({display_icon_url:O.get(["sap.card","header","icon","src"],m),navigation_semantic_object:b,navigation_semantic_action:c,navigation_semantic_parameters:S,navigation_use_semantic_object:U,navigation_target_url:T});if(t==="{}"){t=undefined;}if(d){e=d.join(",");}return{bagProperties:{display_title_text:O.get(["sap.card","header","title"],m),display_subtitle_text:O.get(["sap.card","header","subTitle"],m),display_search_keywords:e},tileConfiguration:t,manifest:this._replaceDataWithPlaceholders(m)};},mergeCardData:function(m,c){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o),s;if(c.display_title_text){O.set(["sap.card","header","title"],c.display_title_text,o);}if(c.display_subtitle_text){O.set(["sap.card","header","subTitle"],c.display_subtitle_text,o);}if(c.display_search_keywords){s=c.display_search_keywords.split(",");O.set(["sap.app","tags","keywords"],s,o);}if(c.display_icon_url){O.set(["sap.card","header","icon","src"],c.display_icon_url,o);}if(c.navigation_semantic_object){O.set(["parameters","intentSemanticObject"],c.navigation_semantic_object,n);}else if(c.navigation_target_url){O.set(["parameters","url"],c.navigation_target_url,n);}if(c.navigation_semantic_action){O.set(["parameters","intentAction"],c.navigation_semantic_action,n);}if(c.navigation_semantic_parameters_as_object){O.set(["parameters","intentParameters"],c.navigation_semantic_parameters_as_object,n);}return o;},getTranslatablePropertiesFromBag:function(b){var t={},T;if(b&&b.getText&&b.getTextNames){T=b.getTextNames();T.forEach(function(p){t[p]=b.getText(p);});}return t;},getCardData:function(c){var t,b,T,C;if(c.bag){t=c.bag.getBag("tileProperties");}else{t=c.getBag("tileProperties");}if(c.configuration){T=c.configuration.getParameterValueAsString("tileConfiguration");}else{T=c.getConfigurationParameter("tileConfiguration");}b=this.getTranslatablePropertiesFromBag(t);C=JSON.parse(T||"{}");if(C.navigation_semantic_parameters){C.navigation_semantic_parameters_as_object=this._parseParameters(C.navigation_semantic_parameters);}Object.keys(b).forEach(function(k){C[k]=b[k];});return C;},_parseParameters:function(p){var P=a.parseParameters("?"+p);Object.keys(P).forEach(function(k){P[k]=P[k][0];});return P;},_replaceDataWithPlaceholders:function(m){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o);if(O.get(["sap.card","header","title"],o)){O.set(["sap.card","header","title"],this.PLACEHOLDERS.TITLE,o);}if(O.get(["sap.card","header","subTitle"],o)){O.set(["sap.card","header","subTitle"],this.PLACEHOLDERS.SUBTITLE,o);}if(O.get(["sap.app","tags","keywords"],o)){O.set(["sap.app","tags","keywords"],this.PLACEHOLDERS.SEARCH_KEYWORDS,o);}if(O.get(["sap.card","header","icon","src"],o)){O.set(["sap.card","header","icon","src"],this.PLACEHOLDERS.ICON,o);}if(O.get(["parameters","intentSemanticObject"],n)){O.set(["parameters","intentSemanticObject"],this.PLACEHOLDERS.SEMANTIC_OBJECT,n);}if(O.get(["parameters","intentAction"],n)){O.set(["parameters","intentAction"],this.PLACEHOLDERS.ACTION,n);}if(O.get(["parameters","url"],n)){O.set(["parameters","url"],this.PLACEHOLDERS.TARGET_URL,n);}if(O.get(["parameters","intentParameters"],n)){O.set(["parameters","intentParameters"],this.PLACEHOLDERS.PARAMETERS,n);}return o;},_getNavigationAction:function(m){var A=O.get(["sap.card","header","actions"],m),o;if(A){for(var i=0;i<A.length;i++){o=A[i];if(o.type==="Navigation"){return o;}}}return null;}};return M;});
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/base/Log","sap/base/security/encodeXML","sap/base/util/deepEqual","sap/base/util/uid","sap/base/util/UriParameters","sap/m/MessagePopover","sap/m/Text","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/Device","sap/ui/thirdparty/URI","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing","sap/ui/core/routing/History"],function(L,a,d,g,U,M,T,C,b,c,I,D,f,A,h,E,u,r,S,j,k,q,o,H){"use strict";var P="sap.ushell.components.container.",s=P+"ApplicationContainer",l="sap.ushell.Container.dirtyState.",m="autoplay;battery;camera;display-capture;geolocation;gyroscope;magnetometer;microphone;midi;clipboard-write;clipboard-read;fullscreen;",n,t,v,w=false,K=false,x=[],y=0;var z=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-defaultedParameterNames","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url","sap-app-origin-hint"];
function B(e){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(i){i.isUrlSupported(e.url).done(function(){e.promise.resolve({allowed:true,id:e.id});}).fail(function(){e.promise.resolve({allowed:false,id:e.id});});});}
function F(e){var i={asyncURLHandler:t1.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(i);}E.emit("StepDone",e.stepName);}
E.once("initMessagePopover").do(F);n=new k.Map();
function G(e){return n.get(e.getId());}
function J(){return t;}
function N(e){var p=new U(e).mParams,i=p["sap-xapp-state"],u1;delete p["sap-xapp-state"];u1={startupParameters:p};if(i){u1["sap-xapp-state"]=i;}return u1;}
function O(e,i){return r.i18n.getText(e,i);}
function Q(){return new I({size:"2rem",src:"sap-icon://error",tooltip:t1.prototype._getTranslatedText("an_error_has_occured")});}
function R(e){var i=e.getAggregation("child"),p;if(i instanceof b){p=i.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");L.debug("unloading component "+p,null,s);}e.destroyAggregation("child");}
function V(e,i,p){return new Promise(function(u1){var v1,w1,x1,y1,z1,A1={},B1,C1;function D1(H1){H1.setWidth(e.getWidth());H1.setHeight(e.getHeight());H1.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",H1,true);}v1=i.indexOf("?");if(v1>=0){y1=t1.prototype._getParameterMap(i);A1=y1.startupParameters;i=i.slice(0,v1);}if(i.slice(-1)!=="/"){i+="/";}if(/\.view\.(\w+)$/i.test(p)){x1=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(p);if(!x1){L.error("Invalid SAPUI5 URL",p,s);u1(t1.prototype._createErrorControl());return;}z1=x1[1];B1=x1[2];C1=x1[3].toUpperCase();if(z1){B1=z1+"."+B1;}else{w1=B1.lastIndexOf(".");if(w1<1){L.error("Missing namespace",p,s);return t1.prototype._createErrorControl();}z1=B1.slice(0,w1);}}else{z1=p.replace(/^SAPUI5=/,"");}var E1={};var F1=z1.replace(/\./g,"/");E1[z1]=i+F1;sap.ui.loader.config({paths:E1});t1.prototype._destroyChild(e);if(B1){if(e.getApplicationConfiguration()){A1.config=e.getApplicationConfiguration();}sap.ui.view({id:e.getId()+"-content",type:C1,viewData:A1||{},viewName:B1,async:true}).loaded().then(function(H1){e.fireEvent("applicationConfiguration");D1(H1);u1(H1);});}else{L.debug("loading component "+z1,null,s);var G1=y1?{startupParameters:y1.startupParameters}:{startupParameters:{}};if(y1&&y1["sap-xapp-state"]){G1["sap-xapp-state"]=y1["sap-xapp-state"];}if(e.getApplicationConfiguration()){G1.config=e.getApplicationConfiguration();}sap.ui.core.Component.create({id:e.getId()+"-component",componentData:G1,name:z1}).then(function(H1){e.fireEvent("applicationConfiguration",{"configuration":H1.getMetadata().getConfig()});var I1=new b({id:e.getId()+"-content",component:H1});D1(I1);u1(I1);});}});}
function W(e,i){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,i);},0);}
function X(e,i,p){var u1=this,v1,w1={oControl:undefined,oPromise:undefined},x1,y1,z1,A1={startupParameters:{}},B1,C1=e.getComponentHandle(),D1,E1;function F1(G1){e.fireEvent("applicationConfiguration",{configuration:G1.getMetadata().getConfig()});y1=new b({id:e.getId()+"-content",component:G1});y1.setHeight(e.getHeight());y1.setWidth(e.getWidth());y1.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=t1.prototype._disableRouter.bind(u1,G1);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",y1,true);sap.ushell.Container.getServiceAsync("PluginManager").then(function(J1){D1=J1.getPluginLoadingPromise("RendererExtensions");E1=D1&&D1.state();if(E1==="pending"){D1.done(function(){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});}).fail(function(){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});});}if(E1==="resolved"||E1==="rejected"){t1.prototype._publishExternalEvent("appComponentLoaded",{component:G1});}});return y1;}x1=i.indexOf("?");if(x1>=0){z1=t1.prototype._getParameterMap(i);A1={startupParameters:z1.startupParameters};if(z1["sap-xapp-state"]){A1["sap-xapp-state"]=z1["sap-xapp-state"];}i=i.slice(0,x1);}if(e.getApplicationConfiguration()){A1.config=e.getApplicationConfiguration();}if(i.slice(-1)!=="/"){i+="/";}t1.prototype._destroyChild(e);B1={id:e.getId()+"-component",name:p,componentData:A1};L.debug("Creating component instance for "+p,JSON.stringify(B1),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:p});if(C1){var G1=C1.getInstance(B1);w1.oControl=F1(G1);}else{v1=new q.Deferred();var H1={};var I1=p.replace(/\./g,"/");H1[I1]=i;sap.ui.loader.config({paths:H1});L.error("No component handle available for '"+p+"'; fallback to component.load()",null,s);sap.ui.component({id:e.getId()+"-component",name:p,componentData:A1,async:true}).then(function(G1){v1.resolve(F1(G1));});w1.oPromise=v1.promise();}return w1;}
function Y(e){var i;if((e instanceof C)&&(typeof e.getRouter==="function")){i=e.getRouter();if(i&&(typeof i.stop==="function")){L.info("router stopped for instance "+e.getId());i.stop();}}}
function Z(e){var i=document.createElement("a"),p=new U(e).get("sap-client"),u1;i.href=e;u1=i.protocol+"//"+i.host;return new S({alias:p?u1+"?sap-client="+p:u1,baseUrl:u1,client:p||undefined,platform:"abap"});}
function $(e,i){var p=false,u1=e.getDomRef(),v1,w1;if(e.getIframeWithPost()===true&&u1&&u1.getAttribute&&u1.getAttribute("sap-iframe-app")=="true"){u1=q("#"+u1.getAttribute("id")+"-iframe")[0];}if(u1){v1=f(e._getIFrameUrl(u1)||window.location&&window.location.href||"");w1=v1.protocol()+"://"+v1.host();p=(i.source===u1.contentWindow)||(i.origin===w1);}return p;}
function _(e,i,p){var u1=JSON.stringify({type:"request",service:i,request_id:g(),body:{}});L.debug("Sending post message request to origin ' "+p+"': "+u1,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(u1,p);}
function a1(){var i=this.getDomRef();if(!i||i.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&i&&i.getAttribute&&i.getAttribute("sap-iframe-app")=="true"){return q("#"+i.getAttribute("id")+"-iframe")[0];}return null;}return i;}
function b1(i){var e;if(i===undefined){i=this._getIFrame();}if(this.getIframeWithPost()===true){e=q("#"+i.getAttribute("id").replace("-iframe","-form"))[0].action;if(e===undefined&&(new f()).query(true).hasOwnProperty("sap-isolation-enabled")){e=i.src;}}else{e=i.src;}return e;}
function c1(e,i){if(e&&!e.getActive()){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(u1)+"' on inactive container '"+e.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var p=e.getUi5ComponentName&&e.getUi5ComponentName(),u1=i.data;if(typeof p==="string"){L.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(u1)+"' on container of UI5 application '"+p+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var v1={bApiRegistered:true};v(e,i,v1);t1.prototype._handlePostMessagesForPluginsPostLoading(e,i,v1);}
function d1(e,p,u1){var v1,w1;if(u1.bApiRegistered!==false){return;}sap.ushell.Container.getServiceAsync("PluginManager").then(function(x1){if(w===false){w=true;v1=x1.getPluginLoadingPromise("RendererExtensions");w1=v1&&v1.state();if(w1==="pending"){K=true;v1.always(function(){var y1;K=false;L.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+x.length,null,"sap.ushell.components.container.ApplicationContainer");for(var i=0;i<x.length;i++){y1=x[i];try{t1.prototype._handleMessageEvent.call(y1.that,y1.oContainer,y1.oMessage);}catch(ex){L.error(ex.message||ex,null,"sap.ushell.components.container.ApplicationContainer");}}x=[];});}}if(K===true){x.push({index:y++,that:this,oContainer:e,oMessage:p});}});}
function e1(){w=false;K=false;x=[];y=0;}
function f1(e,i){var p=e._getIFrame(),u1=e.getApplicationType();if(k.isApplicationTypeEmbeddedInIframe(e.getApplicationType(u1))&&p){var v1=new f(e._getIFrameUrl(p));var w1=v1.protocol()+"://"+v1.host();p.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),w1);i.preventDefault();}}
function g1(e,i,p){e.write("<div").writeControlData(i).writeAccessibilityState(i).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");if(p){e.renderControl(p);}e.write("</div>");}
function h1(e,i,p){if(k.isApplicationTypeEmbeddedInIframe(i)){var u1=e.getTargetNavigationMode();p=t1.prototype._adjustNwbcUrl(p,i,u1,e.getIsStateful());k.localStorageSetItem(e.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}return p;}
function i1(e,i,p,u1){var v1,w1=function(){var E1=k.getParameterValueBoolean("sap-accessibility");if(E1!==undefined){return E1;}return sap.ushell.Container.getUser().getAccessibilityMode();},x1=function(){var E1=new U(e)||{mParams:{}};if(E1.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(j.prototype.constants.themeFormat.NWBC);}return undefined;},y1=function(){var E1=false,F1=new U(e)||{mParams:{}};E1=sap.ui.getCore().getConfiguration().getStatistics()&&F1.mParams["sap-statistics"]===undefined;return E1;},z1=function(){var E1=window.hasher&&window.hasher.getHash(),B1="",F1;if(E1&&E1.length>0&&E1.indexOf("sap-iapp-state=")>0){F1=/(?:sap-iapp-state=)([^&/]+)/.exec(E1);if(F1&&F1.length===2){B1=F1[1];}}return B1;},A1=function(){var E1="";var F1=(!!q("body.sapUiSizeCompact").length);var G1=(!!q("body.sapUiSizeCozy").length);if(F1===true){E1="0";}else if(G1){E1="1";}return E1;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";v1=x1();if(v1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(v1);}if(p){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(p);}if(w1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(y1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if(i==="TR"||i==="GUI"){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=2";}else if(u1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}var B1=z1();if(B1&&B1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+B1;}var C1=A1();if(C1&&C1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+C1;}var D1=0;if(h.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){D1=h.last("/core/shell/sessionTimeoutIntervalInMinutes");}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+D1;return k.appendSapShellParam(e,i);}
function j1(e,i,p,u1){var v1=i.getAggregation("child"),w1,x1;if(!v1||i._bRecreateChild){x1=t1.prototype._createUi5Component(i,p,u1);if(x1.oControl!==undefined){i._bRecreateChild=false;t1.prototype._renderControlInDiv(e,i,x1.oControl);}else{i.oDeferredControlCreation=new q.Deferred();t1.prototype._renderControlInDiv(e,i);x1.oPromise.then(function(y1){i._bRecreateChild=false;w1=sap.ui.getCore().createRenderManager();w1.renderControl(y1);w1.flush(q("#"+i.getId())[0]);w1.destroy();i.oDeferredControlCreation.resolve();});}}else{t1.prototype._renderControlInDiv(e,i,v1);}}
function k1(e,i,p){var u1=e.getProperty(i);if(d(u1,p)){return;}e.setProperty(i,p);e._bRecreateChild=true;}
function l1(e,i,p,u1,v1){var w1,x1=true;localStorage.removeItem(i.globalDirtyStorageKey);i.oDeferredControlCreation=undefined;if(v1&&v1.indexOf("SAPUI5.Component=")===0&&p===A.URL.type){j1(e,i,u1,v1.replace(/^SAPUI5\.Component=/,""));return;}if(v1&&v1.indexOf("SAPUI5=")===0&&p===A.URL.type){t1.prototype._renderControlInDiv(e,i,undefined,"open");i.oDeferredControlCreation=new q.Deferred();t1.prototype._createUi5View(i,u1,v1).then(function(y1){var B1,C1=q("#"+i.getId());if(C1&&C1.length>0){B1=sap.ui.getCore().createRenderManager();B1.renderControl(y1);B1.flush(q("#"+i.getId())[0]);B1.destroy();}else{e.renderControl(y1);}i.oDeferredControlCreation.resolve();});t1.prototype._renderControlInDiv(e,i,undefined,"close");return;}L.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+v1);if(!i.getActive()){L.debug("Skipping rendering container iframe","Container '"+i.getId()+"' is inactive");return;}try{u1=i.getFrameSource(p,u1,v1);}catch(ex){L.error(ex.message||ex,null,s);i.fireEvent("applicationConfiguration");e.renderControl(t1.prototype._createErrorControl());return;}if(sap.ushell.Container){w1=t1.prototype._getLogoutHandler(i);if(!w1){if(k.isApplicationTypeEmbeddedInIframe(p)){w1=t1.prototype._logout.bind(null,i);n.put(i.getId(),w1);sap.ushell.Container.attachLogoutEvent(w1);sap.ushell.Container.addRemoteSystem(t1.prototype._createSystemForUrl(u1));}}else if(!k.isApplicationTypeEmbeddedInIframe(p)){sap.ushell.Container.detachLogoutEvent(w1);n.remove(i.getId());}}u1=t1.prototype._checkNwbcUrlAdjustment(i,p,u1);u1=i._adjustURLForIsolationOpeningWithoutURLTemplate(u1);if(p==="TR"){i.setProperty("iframePostAllParams",true,true);}if(new U(window.location.href).get("sap-post")==="false"){x1=false;}else if(window.QUnit!==undefined){x1=i.getIframeWithPost();}if(x1===true&&(p==="NWBC"||p==="TR"||p==="WDA")){i.setProperty("iframeWithPost",true,true);i.oDeferredRenderer=new q.Deferred();u1=t1.prototype._filterURLParams(u1);var z1=[];var A1=t1.prototype._getParamKeys(u1,z1);t1.prototype._generateRootElementForIFrame(e,i,true);if(A1.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(y1){y1.getAppStateData(A1).then(function(B1){var C1;var D1=q("#"+i.getId());if(D1.length>0){C1=sap.ui.getCore().createRenderManager();t1.prototype._buildHTMLElements(C1,i,B1,z1,u1);C1.flush(D1[0]);C1.destroy();}else{t1.prototype._buildHTMLElements(e,i,B1,z1,u1);}setTimeout(i.oDeferredRenderer.resolve,0);},function(B1){t1.prototype._buildHTMLElements(e,i,undefined,z1,u1);setTimeout(i.oDeferredRenderer.resolve,0);});});}else{t1.prototype._buildHTMLElements(e,i,undefined,z1,u1);setTimeout(i.oDeferredRenderer.resolve,0);}t1.prototype._generateRootElementForIFrame(e,i,false);return;}i.fireEvent("applicationConfiguration");e.write("<iframe").writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("src",u1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m);}e.write("></iframe>");}
function m1(e){var i=new U(document.URL);if(i.get("sap-isolation-enabled")==="true"){var p=o,u1=p.getHash(document.URL),v1="",w1="&sap-plugins="+encodeURIComponent(sap.ushell.Container.getService("PluginManager")._getNamesOfPluginsWithAgents()),x1="&sap-history-dir="+(H.getInstance().getDirection()?H.getInstance().getDirection():"");if(e.indexOf("&/")>0){v1=e.substr(e.indexOf("&/"));}if(w1==="&sap-plugins="){w1="";}if(u1){var y1=p.parseShellHash("#"+u1),z1=p.paramsToString(y1.params);if(z1&&z1.length>=0){var A1=sap.ushell.Container.getService("AppState").createEmptyAppState(),B1=sap.ushell.Container.getService("AppState").createEmptyAppState(),C1="";if(z1.indexOf("sap-intent-param")>=0){C1=encodeURIComponent(z1);}else{A1.setData(z1);A1.save();C1=encodeURIComponent("sap-intent-param="+A1.getKey());}B1.setData("sap-startup-params="+C1);B1.save();e=e.split("#")[0]+"&sap-intent-param="+B1.getKey()+w1+x1+"#"+window.hasher.getHash();}else{e=e.split("#")[0]+w1+x1+"#"+window.hasher.getHash();}}else{e+="#"+window.hasher.getHash();}if(e.indexOf("&/")<0){e+=v1;}}if(i.has("sap-iframe-params")){var D1=i.get("sap-iframe-params")||"",E1=D1.split(",");E1.forEach(function(F1){if(F1&&F1.length>0){if(i.has(F1)){e=e.split("#")[0]+"&"+F1+"="+i.get(F1)+"#"+e.split("#")[1];}}});}return e;}
function n1(e){var i=new f(e);i=i.removeSearch(z);return i.toString();}
function o1(e,i){var p=[],u1;if(e.indexOf("sap-intent-param=")>0){u1=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-intent-param-data");}}if(e.indexOf("sap-xapp-state=")>0){u1=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-xapp-state-data");}}if(e.indexOf("sap-iapp-state=")>0){u1=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(u1&&u1.length===2){p.push([u1[1]]);i.push("sap-iapp-state-data");}}return p;}
function p1(e,i,p,u1,v1){var w1=i.getId()+"-form",x1="",y1="",z1=false;if(p===undefined){p=[];}p.push([sap.ushell.Container.getFLPUrl(true)]);u1.push("sap-flp-url");p.push([i.getSystemAlias()]);u1.push("system-alias");var A1="";var B1={};u1.forEach(function(F1,G1){if(p[G1][0]){B1[F1]=p[G1][0];}});var C1=v1;A1=JSON.stringify(B1);x1="<input name=\"sap-flp-params\" value=\""+a(A1)+"\">";if(i.getIframePostAllParams()===true){var D1=new U(v1);y1=q1(i,D1);if(y1!==""){v1=r1(v1,D1);}}i.fireEvent("applicationConfiguration");e.write("<form").writeAttributeEscaped("method","post").writeAttributeEscaped("id",w1).writeAttributeEscaped("name",w1).writeAttributeEscaped("target",i.getId()+"-iframe").writeAttributeEscaped("action",v1).addStyle("display","none").writeStyles().write(">").writeAttributeEscaped(x1+y1).write("</form>");var E1=i.sId;if(i.hasStyleClass("sapUShellApplicationContainerIframeHidden")){z1=true;i.toggleStyleClass("sapUShellApplicationContainerIframeHidden",false);}i.sId+="-iframe";e.write("<iframe").writeAttributeEscaped("name",i.getId()).writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("sap-orig-src",C1).writeAttributeEscaped("title",r.i18n.getText("AppilcationContainer.IframeTitle")).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles();if(h.last("/core/shell/enableFeaturePolicyInIframes")===true){e.writeAttribute("allow",m.replaceAll(";"," "+(new f(v1).origin())+";"));}e.write("></iframe>");i.sId=E1;if(z1){i.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true);}}
function q1(e,i){var u1="";var v1="",w1="";if(i.has("sap-iframe-hint")){u1=i.get("sap-iframe-hint");}var x1=i.mParams;if(e.getApplicationType()==="TR"||(u1==="GUI")){var p,y1;for(p in x1){if(p==="sap-iframe-hint"||p==="sap-keep-alive"){continue;}y1=x1[p][0];v1="<input name=\""+p+"\" value=\""+a(y1)+"\">";w1+=v1;}}return w1;}
function r1(e,i){var p=i.get("sap-iframe-hint"),u1=i.get("sap-keep-alive"),v1=new f(e).query("");if(typeof p==="string"){v1.addSearch("sap-iframe-hint",p);}if(typeof u1==="string"){v1.addSearch("sap-keep-alive",u1);}return v1.toString();}
function s1(e,i,p){if(p){e.write("<div").writeControlData(i).writeAttributeEscaped("sap-iframe-app","true").addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");}else{e.write("</div>");}}
var t1=c.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:P+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"},extendedInfo:{type:"object"},systemAlias:{defaultValue:"",type:"string"},iframePostAllParams:{defaultValue:false,type:"boolean"},isKeepAlive:{defaultValue:false,type:"boolean"},frameworkId:{defaultValue:"",type:"string"},iframeReusedForApp:{defaultValue:false,type:"boolean"}},events:{applicationConfiguration:{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,i=this;if(sap.ushell.Container){e=t1.prototype._getLogoutHandler(i);if(e){sap.ushell.Container.detachLogoutEvent(e);n.remove(i.getId());}}localStorage.removeItem(i.globalDirtyStorageKey);if(i._unloadEventListener){removeEventListener("unload",i._unloadEventListener);}if(i._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",i._disableRouterEventHandler);}if(i._storageEventListener){removeEventListener("storage",i._storageEventListener);}if(i._messageEventListener){removeEventListener("message",i._messageEventListener);}t1.prototype._destroyChild(i);if(c.exit){c.exit.apply(i);}},setHandleMessageEvent:function(i){v=i;},init:function(){var e=this;e.globalDirtyStorageKey=l+g();e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(i){var p=e.getApplicationType();if(i.key===e.globalDirtyStorageKey&&i.newValue===sap.ushell.Container.DirtyState.PENDING&&k.isApplicationTypeEmbeddedInIframe(p)){var u1=e._getIFrame();if(u1){L.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var v1=new f(e._getIFrameUrl(u1));var w1=v1.protocol()+"://"+v1.host();u1.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),w1);}}};addEventListener("storage",e._storageEventListener);e._messageEventListener=t1.prototype._handleMessageEvent.bind(null,e);addEventListener("message",e._messageEventListener);},onAfterRendering:function(){var e=this;this.rerender=function(){};if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var i=document.getElementById(e.getId()+"-form");if(i){i.submit();}});}},renderer:function(e,i){var p=i.getApplication(),u1=i.launchpadData,v1;if(!i.getVisible()){t1.prototype._renderControlInDiv(e,i);return;}if(i.error){delete i.error;t1.prototype._renderControlInDiv(e,i,t1.prototype._createErrorControl());}else if(!p){t1.prototype._render(e,i,i.getApplicationType(),i.getUrl(),i.getAdditionalInformation());}else if(!p.isResolvable()){t1.prototype._render(e,i,p.getType(),p.getUrl(),"");}else if(u1){t1.prototype._render(e,i,u1.applicationType,u1.Absolute.url.replace(/\?$/,""),u1.applicationData);}else{L.debug("Resolving "+p.getUrl(),null,s);p.resolve(function(w1){L.debug("Resolved "+p.getUrl(),JSON.stringify(w1),s);i.launchpadData=w1;t1.prototype._destroyChild(i);},function(w1){var x1=p.getMenu().getDefaultErrorHandler();if(x1){x1(w1);}t1.prototype._destroyChild(i);i.error=w1;});v1=new T({text:t1.prototype._getTranslatedText("loading",[p.getText()])});t1.prototype._destroyChild(i);i.setAggregation("child",v1);t1.prototype._renderControlInDiv(e,i,v1);}}});
t1.prototype.getFrameSource=function(e,i){if(!Object.prototype.hasOwnProperty.call(A.enum,e)){throw new Error("Illegal application type: "+e);}return i;};
t1.prototype.setUrl=function(e){k1(this,"url",e);};
t1.prototype.setAdditionalInformation=function(e){k1(this,"additionalInformation",e);};
t1.prototype.setApplicationType=function(e){k1(this,"applicationType",e);};
t1.prototype.createPostMessageRequest=function(e,i){var p=Date.now().toString();return{type:"request",request_id:p,service:e,body:i};};
t1.prototype.setNewTRApplicationContext=function(e){var i=new q.Deferred(),p=this._getIFrame(),u1,v1,w1=this;if(!p){return i.promise().reject({message:"Expected an existing TR application application frame but found none."});}function x1(){if(v1){v1["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);v1["system-alias"]=w1.getSystemAlias();u1["sap-flp-params"]=v1;}var A1=w1.createPostMessageRequest("sap.its.startService",u1);w1.postMessageToIframe(A1,p,true).then(function(){i.resolve();},function(B1){i.reject({eventData:B1,message:"Failed to change application context."});});}e=k.appendSapShellParam(e);e=t1.prototype._filterURLParams(e);u1={url:e};if(this.getIframeWithPost&&this.getIframeWithPost()===true){var y1=[];var z1=t1.prototype._getParamKeys(e,y1);if(z1.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(A1){A1.getAppStateData(z1).then(function(B1){v1={};y1.forEach(function(C1,D1){if(B1[D1][0]){v1[C1]=B1[D1][0];}});x1();},function(B1){x1();});});}else{v1={};x1();}}else{x1();}return i.promise();};
t1.prototype.postMessageToIframe=function(i,p,u1){var v1=this;var w1=i.request_id;return new Promise(function(x1,y1){function z1(D1){var E1;try{E1=JSON.parse(D1.data,v1);if(w1!==E1.request_id){return;}if(E1.status==="success"){x1(E1);}else{y1(E1);}window.removeEventListener("message",z1);}catch(e){x1();L.warning("Obtained bad response from framework in response to message "+i.request_id);L.debug("Underlying framework returned invalid response data: '"+D1.data+"'");}}var A1=JSON.stringify(i);L.debug("Sending postMessage "+A1+" to application container '"+v1.getId()+"'");var B1=new f(v1._getIFrameUrl(p));var C1=B1.protocol()+"://"+B1.host();if(u1){window.addEventListener("message",z1,false);p.contentWindow.postMessage(A1,C1);}else{p.contentWindow.postMessage(A1,C1);x1();}});};
t1.prototype.postMessageToCurrentIframe=function(e,i){if(i===undefined){i=false;}var p=this._getIFrame();if(!p){if(i){return Promise.reject({message:"Expected opened iframe not found."});}return;}return this.postMessageToIframe(e,p,i);};
t1.prototype.setNewApplicationContext=function(e,i){var p=this;var u1=this["setNew"+e+"ApplicationContext"];if(!u1){return Promise.reject({message:"Unsupported application type"});}var v1=this._getIFrame();if(!v1){return Promise.reject({message:"Expected an existing TR application application frame but found none."});}var w1=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(w1,v1,true).then(function(){return u1.call(p,i);},function(x1){return Promise.reject({eventData:x1,message:"Failed to change application context."});});};
t1.prototype.onApplicationOpened=function(e){var i=this.getIsStateful();if(!i){return Promise.resolve();}var p=this.getApplicationType();if(p==="TR"&&e!=="TR"){var u1=this._getIFrame();if(!u1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var v1=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(v1,u1,false).catch(function(w1){return Promise.reject({eventData:w1,message:"Failed to change application context."});});}return Promise.resolve();};
t1.prototype.postMessageRequest=function(e,i){var p=this._getIFrame();if(!p){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var u1=this.createPostMessageRequest(e,i||{});return this.postMessageToIframe(u1,p,false).catch(function(v1){return Promise.reject({eventData:v1,message:"Failed to post message."});});};
t1.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),i;if(e&&e.enabled&&e.enabled===true){i=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(i,this._getIFrame(),true);}return undefined;};
t1.prototype.getDeffedControlCreation=function(e){return this.oDeferredControlCreation?this.oDeferredControlCreation.promise():q.Deferred().resolve().promise();};
t1.prototype._getCommunicationHandlers=J;t1.prototype._adaptIsUrlSupportedResultForMessagePopover=B;t1.prototype._getLogoutHandler=G;t1.prototype._getParameterMap=N;t1.prototype._getTranslatedText=O;t1.prototype._createErrorControl=Q;t1.prototype._destroyChild=R;t1.prototype._createUi5View=V;t1.prototype._publishExternalEvent=W;t1.prototype._createUi5Component=X;t1.prototype._disableRouter=Y;t1.prototype._createSystemForUrl=Z;t1.prototype._isTrustedPostMessageSource=$;t1.prototype._handleMessageEvent=c1;t1.prototype._logout=f1;t1.prototype._renderControlInDiv=g1;t1.prototype._checkNwbcUrlAdjustment=h1;t1.prototype._adjustNwbcUrl=i1;t1.prototype._render=l1;t1.prototype._getParamKeys=o1;t1.prototype._buildHTMLElements=p1;t1.prototype._buildHTMLForAllPostParams=q1;t1.prototype._generateRootElementForIFrame=s1;t1.prototype._backButtonPressedCallback=_;t1.prototype._getIFrame=a1;t1.prototype._getIFrameUrl=b1;t1.prototype._filterURLParams=n1;t1.prototype._adjustURLForIsolationOpeningWithoutURLTemplate=m1;t1.prototype._resetPluginsLoadIndications=e1;t1.prototype._handlePostMessagesForPluginsPostLoading=d1;return t1;},true);
sap.ui.predefine('sap/ushell/components/factsheet/Component',["sap/ui/core/UIComponent","sap/ui/core/library"],function(U,c){"use strict";var V=c.mvc.ViewType;
var C=U.extend("sap.ushell.components.factsheet.Component",{
oMainView:null,
metadata:{version:"1.96.0",library:"sap.ushell",dependencies:{libs:["sap.m","sap.ui.vbm","sap.suite.ui.commons","sap.ui.layout","sap.viz"],components:[]}},
createContent:function(){var o=this.getComponentData();var s=(o&&o.startupParameters)||{};this.oMainView=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.factsheet.views.ThingViewer",viewData:s,height:"100%"}).addStyleClass("ThingViewer");return this.oMainView;},
exit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());},
onExit:function(){window.console.log("On Exit of factsheet Component.js called : this.getView().getId()"+this.getId());}
});
jQuery.sap.setObject("factsheet.Component",C);return C;});
sap.ui.predefine('sap/ushell/components/factsheet/annotation/Mapping',["sap/ui/Device"],function(D){"use strict";var M={};M.initialized=[];
M.parse=function(m,a){var x={},A={},s={},o={},b={},c="",i,j,d,e,f,g,r,h,n,q,t,u,v,w,T,y,z,B,C,E,F,G,H,I,J,K,L,N,O,P,Q,R,S,U,V,W,X,Y;if(D.browser.internet_explorer){x={setNameSpace:function(k){k.setProperty("SelectionNamespaces","xmlns:edmx=\"http://docs.oasis-open.org/odata/ns/edmx\" xmlns:d=\"http://docs.oasis-open.org/odata/ns/edm\"");k.setProperty("SelectionLanguage","XPath");return k;},selectNodes:function(k,x,l){return l.selectNodes(x);},nextNode:function(k){return k.nextNode();},getNodeText:function(k){return k.text;}};}else{x={setNameSpace:function(k){return k;},nsResolver:function(p){var k={edmx:"http://docs.oasis-open.org/odata/ns/edmx",d:"http://docs.oasis-open.org/odata/ns/edm"};return k[p]||null;},selectNodes:function(k,p,l){var i1=k.evaluate(p,l,this.nsResolver,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);i1.length=i1.snapshotLength;return i1;},nextNode:function(k,l){return k.snapshotItem(l);},getNodeText:function(k){return k.textContent;}};}var Z=function(k){var l;if(D.browser.internet_explorer){l=new ActiveXObject("Microsoft.XMLHTTP");l.open("GET",k,false);l.send(null);return l.responseXML;}l=jQuery.sap.sjax({url:k,dataType:"xml"});if(l.success){return l.data;}};var $=function(m){var i1={},j1={},k1={},l1=false,i,m1,n1,o1,p1={},j,q1={},r1={},s1=false,t1,l,k,u1,v1,w1,x1,p,y1;for(i=m.dataServices.schema.length-1;i>=0;i-=1){i1=m.dataServices.schema[i];if(i1.entityType){m1=i1.namespace;n1=i1.entityType;o1=i1.complexType;for(j in n1){if(n1.hasOwnProperty(j)){p1=n1[j];r1={};if(p1.hasStream&&p1.hasStream==="true"){continue;}q1={};for(k in p1.property){t1=p1.property[k];if(t1.type.substring(0,m1.length)===m1){for(l in o1){if(o1[l].name===t1.type.substring(m1.length+1)){for(k in o1[l].property){u1=o1[l].property[k];q1[o1[l].name+"/"+u1.name]=u1.type;}}}}else{v1=t1.name;w1=t1.type;for(p in t1.extensions){x1=t1.extensions[p];if((x1.name==="display-format")&&(x1.value==="Date")){w1="Edm.Date";}else{s1=true;if(!r1[v1]){r1[v1]={};}if(x1.namespace&&!r1[v1][x1.namespace]){r1[v1][x1.namespace]={};}r1[v1][x1.namespace][x1.name]=x1.value;}}q1[v1]=w1;}}if(!j1[m1+"."+p1.name]){j1[m1+"."+p1.name]={};}j1[m1+"."+p1.name]=q1;if(s1){if(!k1[m1+"."+p1.name]){l1=true;}k1[m1+"."+p1.name]={};k1[m1+"."+p1.name]=r1;}}}}}if(l1){y1={types:j1,extensions:k1};}else{y1={types:j1};}return y1;};var _=function(p,k,l,s){var i1,j1,k1="";for(i1 in p){if(p.hasOwnProperty(i1)){if(p[i1]){j1=p[i1];if(j1.Value&&j1.Value.Path){k1=a1(j1.Value.Path,k,l,s);if(k1){p[i1].EdmType=k1;}continue;}if(j1.Path){k1=a1(j1.Path,k,l,s);if(k1){p[i1].EdmType=k1;}continue;}if(j1.Facets){p[i1].Facets=_(j1.Facets,k,l,s);continue;}if(j1.Data){p[i1].Data=_(j1.Data,k,l,s);continue;}if(i1==="Data"){p.Data=_(j1,k,l,s);continue;}if(j1.Value&&j1.Value.Apply){p[i1].Value.Apply.Parameters=_(j1.Value.Apply.Parameters,k,l,s);continue;}if(j1.Value&&j1.Type&&(j1.Type==="Path")){k1=a1(j1.Value,k,l,s);if(k1){p[i1].EdmType=k1;}}}}}return p;};var a1=function(p,k,l,s){var i1;if((p.charAt(0)==="@")&&(p.indexOf(s.Alias)===1)){p=p.slice(s.Alias.length+2);}if(p.indexOf("/")>=0){if(k[p.slice(0,p.indexOf("/"))]){l=p.slice(0,p.indexOf("/"));p=p.slice(p.indexOf("/")+1);}}for(i1 in k[l]){if(k[l].hasOwnProperty(i1)){if(p===i1){return k[l][i1];}}}};var b1=function(k){var l="",p="",i,i1={};for(i=0;i<k.attributes.length;i+=1){if((k.attributes[i].name!=="Property")&&(k.attributes[i].name!=="Term")){l=k.attributes[i].name;p=k.attributes[i].value;}}if(l.length>0){i1[l]=h1(p);}return i1;};var c1=function(d,k){var l={},p,i1,j1,k1,l1,m1;if(k.hasChildNodes()){p=x.selectNodes(d,"./d:String",k);if(p.length>0){i1=x.nextNode(p,0);l.String=x.getNodeText(i1);}else{j1=x.selectNodes(d,"./d:Path",k);if(j1.length>0){k1=x.nextNode(j1,0);l.Path=x.getNodeText(k1);}else{l1=x.selectNodes(d,"./d:Apply",k);if(l1.length>0){m1=x.nextNode(l1,0);l.Apply=f1(d,m1);}}}}return l;};var d1=function(d,k,l){var p={},i1,j1,y,k1,l1,m1,n1,o1,p1={},E,C,K,q1,r1;if(k.hasChildNodes()){i1=x.selectNodes(d,"./d:Record | ./d:Collection/d:Record | ./d:Collection/d:If/d:Record",k);if(i1.length){j1=0;for(y=0;y<i1.length;y+=1){k1=x.nextNode(i1,y);l1=e1(d,k1,l);if(k1.getAttribute("Type")){l1.RecordType=h1(k1.getAttribute("Type"));}if(j1===0){if(k1.nextElementSibling||(k1.parentNode.nodeName==="Collection")||(k1.parentNode.nodeName==="If")){p=[];p.push(l1);}else{p=l1;}}else{p.push(l1);}j1+=1;}}else{m1=x.selectNodes(d,"./d:UrlRef",k);if(m1.length>0){for(y=0;y<m1.length;y+=1){n1=x.nextNode(m1,y);p.UrlRef=c1(d,n1);}}else{m1=x.selectNodes(d,"./d:Url",k);if(m1.length>0){for(y=0;y<m1.length;y+=1){n1=x.nextNode(m1,y);p.Url=c1(d,n1);}}else{r1=x.selectNodes(d,"./d:Collection/d:AnnotationPath | ./d:Collection/d:PropertyPath",k);if(r1.length>0){p=[];for(y=0;y<r1.length;y+=1){o1=x.nextNode(r1,y);p1={};p1[o1.nodeName]=x.getNodeText(o1);p.push(p1);}}else{p=b1(k);E=x.selectNodes(d,"./d:Annotation",k);C={};for(K=0;K<E.length;K+=1){C=x.nextNode(E,K);if(C.hasChildNodes()===false){q1=h1(C.getAttribute("Term"));p[q1]=b1(C);}}}}}}}else{p=b1(k);}return p;};var e1=function(d,k,l){var p={},C={},E,K,i1,j1,y,k1,l1,m1,n1,o1;E=x.selectNodes(d,"./d:Annotation",k);for(K=0;K<E.length;K+=1){C=x.nextNode(E,K);if(C.hasChildNodes()===false){i1=h1(C.getAttribute("Term"));p[i1]=b1(C);}}j1=x.selectNodes(d,"./d:PropertyValue",k);if(j1.length>0){for(y=0;y<j1.length;y+=1){k1=x.nextNode(j1,y);l1=k1.getAttribute("Property");p[l1]=d1(d,k1,l);m1=x.selectNodes(d,"./d:Apply",k1);n1=null;for(o1=0;o1<m1.length;o1+=1){n1=x.nextNode(m1,o1);if(n1){p[l1]={};p[l1].Apply=f1(d,n1);}}}}else{p=d1(d,k,l);}return p;};var f1=function(d,k){var l={},p,i1=null,j1=[],i;p=x.selectNodes(d,"./d:*",k);for(i=0;i<p.length;i+=1){i1=x.nextNode(p,i);switch(i1.nodeName){case"Apply":j1.push({Type:"Apply",Value:f1(d,i1)});break;case"LabeledElement":j1.push({Name:i1.getAttribute("Name"),Value:c1(d,i1)});break;default:j1.push({Type:i1.nodeName,Value:x.getNodeText(i1)});break;}}l.Name=k.getAttribute("Function");l.Parameters=j1;return l;};var g1=function(l,p){var i1,i,j1,k1,j,k;for(i=m.dataServices.schema.length-1;i>=0;i-=1){i1=m.dataServices.schema[i];if(i1.entityType){j1=i1.namespace+".";k1=i1.entityType;for(k=k1.length-1;k>=0;k-=1){if(j1+k1[k].name===l&&k1[k].navigationProperty){for(j=0;j<k1[k].navigationProperty.length;j+=1){if(k1[k].navigationProperty[j].name===p){return true;}}}}}}return false;};var h1=function(k){for(f in A){if(A.hasOwnProperty(f)){if(k.indexOf(f+".")>=0){k=k.replace(f+".",A[f]+".");return k;}}}return k;};if(this.initialized[a]){return this.initialized[a];}d=Z(a);d=x.setNameSpace(d);e=x.selectNodes(d,"//d:Schema",d);for(i=0;i<e.length;i+=1){g=x.nextNode(e,i);s.Alias=g.getAttribute("Alias");s.Namespace=g.getAttribute("Namespace");}h=x.selectNodes(d,"//edmx:Reference",d);for(i=0;i<h.length;i+=1){r=x.nextNode(h,i);q=x.selectNodes(d,"./edmx:Include",r);if(q&&q.length>0){n=x.nextNode(q,0);if(n.getAttribute("Alias")){A[n.getAttribute("Alias")]=n.getAttribute("Namespace");}else{A[n.getAttribute("Namespace")]=n.getAttribute("Namespace");}}u=x.selectNodes(d,"./edmx:IncludeAnnotations",r);if(u.length>0){for(j=0;j<u.length;j+=1){t=x.nextNode(u,j);if(t.getAttribute("TargetNamespace")){c=t.getAttribute("TargetNamespace");if(!o[c]){o[c]={};}o[c][t.getAttribute("TermNamespace")]=r.getAttribute("Uri");}else{o[t.getAttribute("TermNamespace")]=r.getAttribute("Uri");}}}}if(o){b.annotationReferences=o;}b.aliasDefinitions=A;w=x.selectNodes(d,"//d:Term",d);if(w.length>0){T={};for(y=0;y<w.length;y+=1){v=x.nextNode(w,y);z=h1(v.getAttribute("Type"));T["@"+s.Alias+"."+v.getAttribute("Name")]=z;}b.termDefinitions=T;}B=$(m);if(B.extensions){b.propertyExtensions=B.extensions;}E=x.selectNodes(d,"//d:Annotations ",d);for(y=0;y<E.length;y+=1){C=x.nextNode(E,y);if(C.hasChildNodes()===false){continue;}F=C.getAttribute("Target");G=F.split(".")[0];if(G&&A[G]){F=F.replace(new RegExp(G,""),A[G]);}H=F;I=null;if(F.indexOf("/")>0){H=F.split("/")[0];I=F.replace(H+"/","");}if(!b[H]){b[H]={};}if(I){if(!b.propertyAnnotations){b.propertyAnnotations={};}if(!b.propertyAnnotations[H]){b.propertyAnnotations[H]={};}b.propertyAnnotations[H][I]={};J=x.selectNodes(d,"./d:Annotation",C);for(K=0;K<J.length;K+=1){L=x.nextNode(J,K);if(L.hasChildNodes()===false){N=h1(L.getAttribute("Term"));b.propertyAnnotations[H][I][N]=b1(L);}}}else{O=H.replace(A[G],G);J=x.selectNodes(d,"./d:Annotation",C);for(P=0;P<J.length;P+=1){L=x.nextNode(J,P);Q=L.getAttribute("Qualifier");R=h1(L.getAttribute("Term"));if(Q){R+="#"+Q;}S=d1(d,L,O);S=_(S,B.types,H,s);b[H][R]=S;}V=x.selectNodes(d,"//d:Annotations[contains(@Target, '"+O+"')]//d:PropertyValue[contains(@Path, '/')]//@Path",d);for(i=0;i<V.length;i+=1){U=x.nextNode(V,i);X=U.value;if(b.propertyAnnotations){if(b.propertyAnnotations[H]){if(b.propertyAnnotations[H][X]){continue;}}}W=X.split("/");if(g1(H,W[0],m)){if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}b.expand[H][W[0]]=W[0];}}Y=x.selectNodes(d,"//d:Annotations[contains(@Target, '"+O+"')]//d:Path[contains(., '/')]",d);for(i=0;i<Y.length;i+=1){U=x.nextNode(Y,i);X=x.getNodeText(U);if(b.propertyAnnotations[H]){if(b.propertyAnnotations[H][X]){continue;}}if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}W=X.split("/");if(g1(H,W[0],m)){if(!b.expand){b.expand={};}if(!b.expand[H]){b.expand[H]={};}b.expand[H][W[0]]=W[0];}}}this.initialized[a]=b;}return b;};
return M;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTile',["sap/m/CustomTile","sap/m/Button","sap/m/library","sap/ui/Device","sap/ushell/library","./PictureTileRenderer"],function(C,B,m,D){"use strict";var a=m.ButtonType;
var P=C.extend("sap.ushell.components.factsheet.controls.PictureTile",{metadata:{deprecated:true,library:"sap.ushell",properties:{height:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"32px"}},associations:{tileContent:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:false}},events:{pictureDelete:{}}}});
P.prototype.init=function(){this._oDeletePictureButton=new B({icon:"sap-icon://sys-cancel",press:this._deletePictureRequestHandler.bind(this),type:a.Transparent}).addStyleClass("sapCaUiPTDeleteButton");if(!D.system.desktop){this.attachPress(this._tilePressedHandler);this.attachBrowserEvent("swipe",this._tileSwipedHandler.bind(this));this._oDeletePictureButton.addStyleClass("hide");}};
P.prototype.setTileContent=function(t){this.setContent(null);if(t){var i=t.getImage();this.setContent(i);}else{this.setContent(null);}this.setAssociation("tileContent",t);};
P.prototype.setSize=function(w,h){this._width=w;this._height=h;var $=this.$();if($){$.css({width:w+"px",height:h+"px"});jQuery.sap.byId(this.getId()+"-wrapper").addClass("sapCaUiPTWrapper");}};
P.prototype._tilePressedHandler=function(){this.switchVisibility();};
P.prototype.switchVisibility=function(v){var $=this._oDeletePictureButton.$();if(v===undefined){$.toggleClass("hide");}else{$.toggleClass("hide",!v);}};
P.prototype._tileSwipedHandler=function(){var $=this._oDeletePictureButton.$();if($&&!$.hasClass("hide")){$.addClass("hide");}};
P.prototype._deletePictureRequestHandler=function(){this.firePictureDelete();};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureTileRenderer',["jquery.sap.global","sap/m/CustomTileRenderer","sap/ui/core/Renderer"],function(q,C,R){"use strict";var P=R.extend(C);
P.render=function(r,c){q.sap.log.debug("PictureTileRenderer :: begin rendering");r.write("<div ");r.writeControlData(c);r.addClass("sapCaUiPictureTile");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapCaUiPictureTileContent");r.writeClasses();r.write(">");r.write("<div id='"+c.getId()+"-wrapper'>");r.renderControl(c._oDeletePictureButton);this._renderContent(r,c);r.write("</div>");r.write("</div></div>");};
P._renderContent=function(r,t){r.renderControl(t.getContent());};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewer',["sap/m/TileContainer","sap/ui/Device","sap/ushell/components/factsheet/controls/PictureTile","sap/ushell/library","./PictureViewerRenderer"],function(T,D,P){"use strict";
var a=T.extend("sap.ushell.components.factsheet.controls.PictureViewer",{metadata:{deprecated:true,library:"sap.ushell",properties:{tileScaling:{type:"float",group:"Misc",defaultValue:0.95},removable:{type:"boolean",group:"Misc",defaultValue:false}},defaultAggregation:"items",aggregations:{items:{type:"sap.ushell.components.factsheet.controls.PictureViewerItem",multiple:true,singularName:"item"}},events:{pictureDeleted:{}}}});
a.prototype.init=function(){T.prototype.init.apply(this);this.setEditable(false);if(sap.ui.getCore().isMobile()){jQuery(window).bind("tap",this._reset.bind(this));var s=sap.ui.getCore().getStaticAreaRef();this.$blocker=jQuery("<div class='sapCaPVBly sapUiBLy'></div>").css("visibility","hidden");jQuery(s).append(this.$blocker);}if(!sap.ui.getCore().isMobile()){jQuery(window).bind("resize",this._resize.bind(this));}this.addStyleClass("sapCaPW");this.addStyleClass("sapCaPWRendering");};
a.prototype._resize=function(){if(this._oDragSession){return;}setTimeout(function(){this._applyDimension();this._update(false);delete this._iInitialResizeTimeout;}.bind(this),this._iInitialResizeTimeout);this._iInitialResizeTimeout=0;};
a.prototype.exit=function(){this.$blocker.remove();if(!sap.ui.getCore().isMobile()){jQuery(window).unbind("resize",this._resize.bind(this));}T.prototype.exit.apply(this);if(!D.system.desktop){jQuery(window).unbind("tap",this._reset.bind(this));}};
a.prototype.setTileScaling=function(t){if(t<0||t>1){t=0.75;jQuery.sap.log.error("Tile Scaling should be a float value between 0 and 1 and not "+t+". Setting it to 0.75 by default.");}this.setProperty("tileScaling",t);};
a.prototype.addItem=function(i){this.insertItem(i,this.getItems().length);};
a.prototype.insertItem=function(i,I){var t=new P({tileContent:i});t.attachPictureDelete(this._deletePictureRequestHandler.bind(this));this.insertTile(t,I);this.insertAggregation("items",i,I);return this;};
a.prototype.insertTile=function(t){t.attachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));T.prototype.insertTile.apply(this,arguments);};
a.prototype.deleteTile=function(t){T.prototype.deleteTile.apply(this,arguments);t.destroy();};
a.prototype.deletePicture=function(i){var p,b,n;n=this.getTiles().length;if(typeof i!=="number"||i<0||i>=n){p=this.getPageFirstTileIndex();}else{p=i;}if(p>-1){b=this.getTiles()[p];b.detachPictureDelete(jQuery.proxy(this._deletePictureRequestHandler,this));this.deleteTile(b);this.removeAggregation("items",p,true);}else{jQuery.sap.log.warning("Cannot find and delete a picture at index : "+i);}return this;};
a.prototype.selectPicture=function(i){var n=this.getTiles().length;if(typeof i!=="number"){i=0;}else if(i<0){i=0;}else if(i>=n){i=n-1;}if(this._bRendered){this.addStyleClass("sapCaPWRendering");}this._selectedIndex=i;return this;};
a.prototype.setSelectedIndex=function(i){this.selectPicture(i);};
a.prototype.getCurrentPictureIndex=function(){return this.getPageFirstTileIndex();};
a.prototype._deletePictureRequestHandler=function(e){var p=this.indexOfTile(e.getSource());this.deleteTile(e.getSource());this.firePictureDeleted({index:p});};
a.prototype._reset=function(e){var i=this.getCurrentPictureIndex();var t=this.getTiles();if(i>-1&&t&&t.length>i){var o=t[i];if(o){var $=jQuery(e.target);var b=this.$();if(b.length>0&&$.length>0){var c=$.closest(this.$());if(c.length===0){o.switchVisibility(false);}}}}};
a.prototype.setRemovable=function(v){this.setProperty("removable",v,true);this.toggleStyleClass("sapCaPWEditable",v);};
a.prototype.setEditable=function(){T.prototype.setEditable.call(this,false);};
a.prototype._getTileDimension=function(){if(!this._bRendered){return;}var $=jQuery.sap.byId(this.getId()+"-scrl");var t={width:$.width(),height:$.height()};return t;};
a.prototype.onBeforeRendering=function(){this.addStyleClass("sapCaPWRendering");};
a.prototype.onAfterRendering=function(){var t=this;this._bRendered=true;this._applyDimension();this.$().toggleClass("sapCaPWEditable",this.getRemovable()===true);this._sInitialResizeTimeoutId=setTimeout(function(){t.addStyleClass("sapCaPWRendering");t._applyPageStartIndex(t._selectedIndex);t._update(false);},this._iInitialResizeTimeout);if(D.system.desktop){var f=this.getTiles()[0],i=this._iInitialResizeTimeout;if(f){setTimeout(function(){this._findTile(f.$()).focus();}.bind(this),i);}}};
a.prototype._update=function(){T.prototype._update.apply(this,arguments);this.removeStyleClass("sapCaPWRendering");if(sap.ui.getCore().isMobile()){var t=this;var b=this.$blocker;setTimeout(function(){b.fadeOut(200,function(){t.css("visibility","hidden").css("z-index",0);});},250);}};
a.prototype._applyDimension=function(){var d=this._getContainerDimension(),i=this.getId(),$=this.$(),t,o=10,b=60,c=jQuery.sap.byId(i+"-cnt"),e,f,p=jQuery.sap.byId(i+"-pager").outerHeight();jQuery.sap.byId(i+"-scrl").css({width:d.outerwidth+"px",height:(d.outerheight-p)+"px"});c.css({height:(d.outerheight-p)+"px",visibility:"visible"});$.css("visibility","visible");t=$.position();e=c.position();f=c.outerHeight();if(jQuery.device.is.phone){o=2;}else if(D.system.desktop){o=0;}jQuery.sap.byId(i+"-blind").css({top:(e.top+o)+"px",left:(e.left+o)+"px",width:(c.outerWidth()-o)+"px",height:(f-o)+"px"});jQuery.sap.byId(i+"-rightedge").css({top:(t.top+o+b)+"px",right:o+"px",height:(f-o-b)+"px"});jQuery.sap.byId(i+"-leftedge").css({top:(t.top+o+b)+"px",left:(t.left+o)+"px",height:(f-o-b)+"px"});};
a.prototype.showBlockerLayer=function(c){if(sap.ui.getCore().isMobile()){var b=20;jQuery(sap.ui.getCore().getStaticAreaRef()).children().each(function(i,v){var z=parseInt(jQuery(v).css("z-index"),10);if(!isNaN(z)){b=Math.max(b,z);}});jQuery.sap.log.debug("blocker layer z-index calculated : "+b+1);this.$blocker.css("z-index",b+1).css("visibility","visible").fadeIn(200,function(){if(c){c.call();}});}else if(c){c.call();}};
return a;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerItem',["sap/ui/core/Control","sap/m/Image"],function(C,I){"use strict";
var P=C.extend("sap.ushell.components.factsheet.controls.PictureViewerItem",{metadata:{deprecated:true,library:"sap.ushell",properties:{src:{type:"string",group:"Misc",defaultValue:null}},aggregations:{image:{type:"sap.m.Image",multiple:false}}}});
P.prototype.setSrc=function(s){this.setProperty("src",s);var i=this.getImage();if(i==null){i=new I();}i.setSrc(s);this.setImage(i);return this;};
P.prototype.exit=function(){var i=this.getImage();if(i){i.destroy();}};
return P;});
sap.ui.predefine('sap/ushell/components/factsheet/controls/PictureViewerRenderer',["jquery.sap.global","sap/m/TileContainerRenderer"],function(q,T){"use strict";var P={};
P.render=function(r,c){q.sap.log.debug("PictureViewerRenderer :: begin rendering");T.render(r,c);q.sap.log.debug("PictureViewerRenderer :: end rendering");};
return P;},true);
sap.ui.predefine('sap/ushell/components/factsheet/factory/ThingInspector',["jquery.sap.global","sap/suite/ui/commons/UnifiedThingInspector","sap/ui/core/format/NumberFormat","sap/viz/ui5/data/FlattenedDataset","sap/ui/core/Locale","sap/ui/model/type/DateTime","sap/ui/model/type/Time","sap/ui/model/type/Date","sap/ui/model/type/Float","sap/ui/model/type/Integer","sap/ui/model/json/JSONModel","sap/ui/core/Control","sap/m/Image","sap/m/Link","sap/m/Text","sap/ui/core/library","sap/ui/layout/VerticalLayout","sap/m/Label","sap/ui/layout/form/SimpleForm","sap/suite/ui/commons/UnifiedThingGroup","sap/ui/ux3/ThingGroup","sap/ui/core/HTML","sap/m/Column","sap/m/ColumnListItem","sap/m/library","sap/m/Table","sap/m/Page","sap/m/VBox","sap/m/Input","sap/m/List","sap/m/StandardListItem","sap/ui/model/FilterOperator","sap/m/DateTimeInput","sap/ui/model/Filter","sap/m/ViewSettingsItem","sap/m/ViewSettingsCustomItem","sap/ui/core/CustomData","sap/m/ViewSettingsDialog","sap/ui/model/Sorter","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/viz/ui5/Area","sap/viz/ui5/Bar","sap/viz/ui5/Bubble","sap/viz/ui5/Column","sap/viz/ui5/StackedColumn","sap/viz/ui5/StackedColumn100","sap/viz/ui5/Donut","sap/viz/ui5/Heatmap","sap/viz/ui5/HorizontalArea","sap/viz/ui5/Line","sap/viz/ui5/Pie","sap/viz/ui5/Scatter","sap/viz/ui5/Treemap","sap/viz/ui5/types/Title","sap/suite/ui/commons/KpiTile","sap/ui/model/odata/ODataModel","sap/suite/ui/commons/FacetOverview","sap/suite/ui/commons/library","sap/ui/layout/Grid","sap/ui/vbm/VBI","sap/ui/layout/HorizontalLayout","sap/ui/core/Icon","sap/m/Carousel","sap/ui/core/IconPool","sap/ushell/resources","sap/ushell/ui/footerbar/AddBookmarkButton","sap/suite/ui/commons/LinkActionSheet","sap/ushell/services/AppConfiguration","sap/m/ActionSheet","sap/ushell/ui/footerbar/JamDiscussButton","sap/ushell/ui/footerbar/JamShareButton"],function($,U,N,F,L,D,T,c,d,I,J,C,f,g,h,q,V,r,S,s,t,H,u,v,w,x,P,y,z,A,B,E,G,K,M,O,Q,R,W,X,Y,Z,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1,m1,n1,o1,p1,q1,r1,s1,t1,u1,v1,w1,x1,y1,z1,A1,B1,C1,D1){"use strict";var E1=w.URLHelper;var F1=w.PlacementType;var G1=q1.FacetOverviewHeight;var H1=w.DateTimeInputType;var I1=w.ListMode;var J1=w.ListSeparators;var K1=w.BackgroundDesign;var L1=w.ListType;var M1=q.TextAlign;var N1={},O1=[],P1={},Q1={},R1="displayFactSheet",S1,T1;S1=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();if(sap.ui.getCore().getConfiguration().getLanguage()==="ZH"){S1=new L("zh_CN");}
function U1(a){return a<0;}
function V1(a){var b=Number(a).toFixed(0);if(U1(a)){b=Number(b)*-1;}return b;}
function W1(a,b){var e,o,i,n;if(!a){return"";}o=new RegExp(N.oDefaultFloatFormat.groupingSeparator,"g");if(b>=0){b=parseInt(b,10);n=N.getFloatInstance({minFractionDigits:b,maxFractionDigits:b},S1);}else{n=N.getFloatInstance({minFractionDigits:0,maxFractionDigits:99},S1);}e=n.format(a);i=e.replace(/[\D]/g,"");if(i&&i.length>6){a=a.replace(o,"");if(V1(a)<1000){return N.getIntegerInstance().format(a);}n=N.getFloatInstance({minFractionDigits:1,maxFractionDigits:1,style:"short"},S1);return n.format(a);}return e;}
function X1(){var o="",i,j,p,a,b,m,e,k,n,l,D2;b=this.getElementBinding().sPath.split("/")[1];m=this.getModel();e=this.mBindingInfos.value.parameters;k=this.mBindingInfos.value.parts;for(i=0;i<e.length;i+=1){o=o+e[i].string;}for(j=0;j<k.length;j+=1){p=k[j].path;l="{"+p+"}";a=m.oData[b][p];o=o.replace(l,a);}n=k2(o);if($.isNumeric(n)){D2=this.mBindingInfos.value.parts.filter(function(E2){return(E2.path===p);});n=W1(n,D2[0].type.oFormatOptions.maxFractionDigits);this.setDoubleFontSize(true);}this.setValue(n);this.getElementBinding().detachChange(X1);}
var Y1=function(){var a="";if(T1.getName()&&T1.getDescription()){a=T1.getName()+", "+T1.getDescription();}else if(T1.getName()&&!T1.getDescription()){a=T1.getName();}else if(!T1.getName()&&T1.getDescription()){a=T1.getDescription();}return a;};var Z1=function(a){var b,e,i;b=a.slice(1).split("/");e="/";for(i=0;i<b.length;i+=1){if((b[i].indexOf("(")>0)&&(b[i].indexOf("sid(")<0)){break;}else{e+=b[i]+"/";}}return e;};var $1=function(a,m){var e,b,i,n;b=a.slice(m.sServiceUrl.length+1);if(b.indexOf("/")>=0){i=b.split("/");n=i[i.length];e=i[i.length-1];if(e.indexOf("(")>=0){e=e.slice(e.indexOf("("));}e=this.getNavEntitySet(e,n,m.getMetadata());}else if(b.indexOf("(")>=0){e=b.slice(0,b.indexOf("("));}else if(b.indexOf("?")>=0){e=b.slice(0,b.indexOf("?"));}else{e=b;}return e;};var _1=function(a,m){var e,k="",o,b;e=a.slice(m.sServiceUrl.length+1);if(e.indexOf("(")>=0){k=e.slice(e.indexOf("(")+1,e.indexOf(")"));if(k.indexOf("=")<=0){o=m.getServiceMetadata();b=c2($1(a,m),o);k=a2(b,o)+"="+k;}}return k;};var a2=function(e,m){var i,j,a;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.namespace===e.slice(0,e.lastIndexOf("."))){for(j=0;j<a.entityType.length;j+=1){if(a.entityType[j].name===e.slice(e.lastIndexOf(".")+1)){return a.entityType[j].key.propertyRef[0].name;}}}}};var b2=function(e,m){var i,j,a,b;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){b=a.entityContainer[0].entitySet;for(j=b.length-1;j>=0;j-=1){if(b[j].entityType===e){return b[j].name;}}}}};var c2=function(e,m,b){var i,j,a,k,l;for(i=m.dataServices.schema.length-1;i>=0;i-=1){a=m.dataServices.schema[i];if(a.entityContainer){k=a.entityContainer[0].entitySet;for(j=k.length-1;j>=0;j-=1){if(k[j].name===e){if(b){l=k[j].entityType.slice(a.namespace.length+1);}else{l=k[j].entityType;}return l;}}}}};var d2=function(e,n,m){var i,j,k,a,b,l,o;a=e.split(".");for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];l=a[0];if(a.length>2){for(k=1;k<a.length-1;k+=1){l+="."+a[k];}}if(b.namespace===l){for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===a[a.length-1]){if(b.entityType[j].navigationProperty){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){o=b.entityType[j].navigationProperty[k];return{name:o.relationship,toRole:o.toRole};}}}}}}}};var e2=function(e,n,m){var a,b,o,i,l,j,p,k;a=c2(e,m);if(n.charAt(0)==="@"){if(N1.termDefinitions&&N1.termDefinitions[n]){b=N1.termDefinitions[n];if(b.indexOf("Collection")>=0){b=b.slice(b.indexOf("(")+1,b.indexOf(")"));}return b2(b,m);}}else{o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){l=m.dataServices.schema[i];if(l.entityContainer&&l.entityContainer[0].associationSet){for(j=l.entityContainer[0].associationSet.length-1;j>=0;j-=1){p=l.entityContainer[0].associationSet[j];if(p.association===o.name){for(k=0;k<p.end.length;k+=1){if(p.end[k].role===o.toRole){return p.end[k].entitySet;}}}}}}}}};var f2=function(e,n,m){var i,j,k,a,o,b,l,p,D2;a=c2(e,m);p=a.split(".")[a.split(".").length-1];o=d2(a,n,m);if(o){for(i=m.dataServices.schema.length-1;i>=0;i-=1){b=m.dataServices.schema[i];for(j=0;j<b.entityType.length&&!D2;j+=1){if(b.entityType[j].name===p){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===n){D2=b.entityType[j].navigationProperty[k].toRole;break;}}}}for(j=b.association.length-1;j>=0;j-=1){l=b.association[j];if(b.namespace+"."+l.name===o.name){for(k=0;k<l.end.length;k+=1){if(l.end[k].role===D2){return l.end[k].multiplicity;}}}}}}else{jQuery.sap.log.error("\""+n+"\" wasn't found in the metadata document. Check whether the corresponding search connector is active.");return 0;}};var g2=function(e,m){var o,a,b,i;o={};if(N1.expand){if(N1.expand[c2(e,m)]){a=N1.expand[c2(e,m)];b=[];for(i in a){if(a.hasOwnProperty(i)){b.push(a[i]);}}o.expand=b.join(", ");}}return o;};var h2=function(a,e,o){var m,b,j,k,l,n;for(m=o.dataServices.schema.length-1;m>=0;m-=1){b=o.dataServices.schema[m];for(j=0;j<b.entityType.length;j+=1){if(b.entityType[j].name===e.split(".")[e.split(".").length-1]){for(k=0;k<b.entityType[j].navigationProperty.length;k+=1){if(b.entityType[j].navigationProperty[k].name===a){for(l=0;l<b.association.length;l+=1){for(n=b.association[l].end.length-1;n>=0;n-=1){if(b.association[l].end[n].role===b.entityType[j].navigationProperty[k].toRole){return(b.association[l].end[n].type);}}}}}}}}};var i2=function(p,o){var b={},j;b.parts=[];b.parameters=[];for(j=p.length-1;j>=0;j-=1){if(p[j].Type==="Path"){if(p[j].EdmType){switch(p[j].EdmType){case"Edm.DateTimeOffset":case"Edm.DateTime":b.parts.push({path:p[j].Value,type:new D({"UTC":true})});break;case"Edm.Time":b.parts.push({path:p[j].Value+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})});break;case"Edm.Date":b.parts.push({path:p[j].Value,type:new c({"UTC":true})});break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":b.parts.push({path:p[j].Value,type:new d()});break;case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":b.parts.push({path:p[j].Value,type:new I()});break;default:b.parts.push({path:p[j].Value});break;}}else{b.parts.push({path:p[j].Value});}}else if(p[j].Type==="String"){b.parameters.unshift({string:p[j].Value});}}b.formatter=function(){var a="",e,k,l,i,m="",n=false,D2=0,E2=0;if(arguments&&arguments.length>=1){e=arguments.length-1;l="";i=0;if(p&&p[0]&&(p[0].Type==="String")&&(p[0].Value.substr(0,1)==="#")){n=true;}for(k=0;k<p.length;k+=1){if(p[k].Type==="Path"){l=arguments[e];if(!l||(l.length===0)){if(a.length>i){if(a.indexOf("(")>i){a=a.substr(0,i);}else{a=a.substr(0,i);l=a;}}}else{if(n){l=encodeURIComponent(l);}a+=l;D2+=1;}e-=1;i=a.length;}else{i=a.length;m=p[k].Value;if(m.indexOf("(")!==-1){E2+=1;}if((l&&l.length>0)||(m.indexOf("(")!==-1)||(m&&(m.substr(0,1)==="#"))){a+=p[k].Value;}else{m="";}}}if(o){a=o(a);}a=a.trim();if((D2===1)&&(E2>0)&&(a.substr(0,1)==="(")&&(a.substr(-1)===")")){a=a.substr(1,a.length-2);}return a.trim();}};return b;};var j2=function(o,p){var k;for(k in o){if(o.hasOwnProperty(k)){if(k==="__metadata"){continue;}else if(k===p){return o[k];}else if(typeof o[k]==="object"){return j2(o[k],p);}}}};var k2=function(a){var l,n,b,e={},i;l=a.lastIndexOf("/");n=a.slice(0,l);b=a.slice(l+1);if(!Q1[a]){e=new J();e.loadData(n,null,false);Q1[a]=e.getData();}else{e=Q1[a];}if(Q1[a]&&Q1[a].d){if(!Q1[a].d[b]){i=j2(Q1[a].d,b);}else{i=Q1[a].d[b];}}return i;};var l2=function(o,e,m,a){var b,i,n,j,k,l,p,D2;b=new C();i=n2(o.Value,o.EdmType,e);if(o.Value&&o.Value["com.sap.vocabularies.UI.v1.IsImageURL"]){b=new f({height:"50px"});if(i.BindingInfo){b.bindProperty("src",i.BindingInfo);}else{b.setProperty("src",i.String);}}else{if(o.UrlRef||o.Url||(o.Target&&o.Target.Path)){b=new g({wrapping:true});}else{b=new h();if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){b.setTextAlign(M1.End);}}b.addStyleClass("sapFactsheetUtiDataField");if(i.BindingInfo){b.bindProperty("text",i.BindingInfo);}else{b.setProperty("text",i.String);}}if((o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithNavigation")&&m){n=o.Target.Path;if(N1[e][n.slice(1)]){if(n.charAt(0)==="@"){if(n.indexOf("/")<0){j=N1[e][n.slice(1)].UrlRef;}else{j=N1[e][n.slice(1,n.indexOf("/"))].UrlRef;}b.bindProperty("href",o2(j));}}b.attachPress(function(E2){return false;});}if(o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url.String){b.setHref(o.Url.String);}else{b.bindProperty("href",o2(o.Url));k=new h({wrapping:true});if(i.BindingInfo){k.bindProperty("text",jQuery.extend({},i.BindingInfo));}else{k.setProperty("text",i.String);}b.setVisible(false);l=new V();l.addContent(b);l.addContent(k);if(!O1[O1.indexOf(a)].Links){O1[O1.indexOf(a)].Links=[];}if(o.Url.Apply){p=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));D2=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("?"));}O1[O1.indexOf(a)].Links.push({sSemanticObject:p,sIntend:D2,oVL:l});}}if(l){return l;}return b;};var m2=function(o,l,p,b){var a,e="",i="",m,j,k,n;a=new r(l);a.addStyleClass("sapFactsheetUtiLabel");if(b){e=":";}if(o.Label){if(o.Label.String){a.setText(o.Label.String.trim()+e);a.setTooltip(o.Label.String.trim());}else if(o.Label.Path){a.bindProperty("text",o.Label.Path);a.bindProperty("tooltip",o.Label.Path);}}else if(o.Value){if(o.Value.Path&&p){m=p[o.Value.Path];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}}else if(o.Value.Apply&&(o.Value.Apply.Name==="odata.concat")){for(k in o.Value.Apply.Parameters){if(o.Value.Apply.Parameters.hasOwnProperty(k)){n=o.Value.Apply.Parameters[k];if(n.Type==="Path"){m=p[n.Value];for(j in m){if(m.hasOwnProperty(j)){if(j==="http://www.sap.com/Protocols/SAPData"){if(m[j].label){i=m[j].label;break;}}}}break;}}}}a.setText(i+e);a.setTooltip(i);}return a;};var n2=function(o,e,a){var b={},p=[],k=[],l=[],i,j,m,n,D2,E2,F2,G2,H2,I2,J2,K2;var L2=function(a,M2,N2){var m,O2={};m=N1.propertyAnnotations[a];if(m&&m[M2]&&m[M2][N2]){if(m[M2][N2].Path){O2.Type="Path";O2.Value=m[M2][N2].Path;}else{O2.Type="String";O2.Value=m[M2][N2].String;}}return O2;};if(!o){return false;}if(o.Apply){if(o.Apply.Name==="odata.concat"){if(a&&N1.propertyAnnotations&&N1.propertyAnnotations[a]){n=o.Apply.Parameters;for(j=0;j<n.length;j+=1){p.push(n[j]);if(n[j].Type==="Path"){m=L2(a,n[j].Value,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}m=L2(a,n[j].Value,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){p.push({Type:"String",Value:" "});p.push({Type:m.Type,Value:m.Value});}}}b.BindingInfo=i2(p);}else{b.BindingInfo=i2(o.Apply.Parameters);}}}else if(o.Path){if(o.Path.charAt(0)==="@"){D2=N1[a][o.Path.slice(1,o.Path.indexOf("/"))].UrlRef;E2=o.Path.slice(o.Path.indexOf("/")+1);if(D2&&D2.Apply){F2=D2.Apply.Parameters;switch(D2.Apply.Name){case"odata.concat":k=F2;k.push({Type:"String",Value:"/"+E2});break;case"odata.fillUriTemplate":G2=F2[0].Value.split("{");for(i in G2){if(G2.hasOwnProperty(i)){if(G2[i].indexOf("}")<0){k.push({Type:"String",Value:G2[i]});}else{H2=G2[i].split("}");for(j=1;j<F2.length;j+=1){if(F2[j].Name===H2[0]){I2=F2[j].Value;if(I2.Path){k.push({Type:"Path",Value:I2.Path});}else if(I2.Apply&&I2.Apply.Name&&(I2.Apply.Name.toLowerCase()==="odata.uriencode")){J2=I2.Apply.Parameters[0];k.push({Type:J2.Type,Value:encodeURIComponent(J2.Value)});k.push({Type:"String",Value:"{"+encodeURIComponent(J2.Value)+"}"});}}}k.push({Type:"String",Value:H2[1]});}}}k.push({Type:"String",Value:"/"+E2});b.fnChange=X1;break;default:break;}b.BindingInfo=i2(k,k2);}else if(D2&&D2.Path){k.push({Type:"Path",Value:D2.Path},{Type:"String",Value:"/"+E2});b.BindingInfo=i2(k,k2);}else if(D2&&D2.String){b.String=k2(D2.String+"/"+E2);}}else{b.BindingInfo={};switch(e){case"Edm.DateTimeOffset":case"Edm.DateTime":b.BindingInfo={path:o.Path,type:new D({"UTC":true})};break;case"Edm.Time":b.BindingInfo={path:o.Path+"/ms",type:new T({source:{pattern:"timestamp"},UTC:true})};break;case"Edm.Date":b.BindingInfo={path:o.Path,type:new c({"UTC":true})};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":if((e==="Edm.Decimal")||(e==="Edm.Double")||(e==="Edm.Single")){K2=new d();}else if((e==="Edm.Int16")||(e==="Edm.Int32")||(e==="Edm.Int64")){K2=new I();}if(N1.propertyAnnotations){l.push({Type:"Path",Value:o.Path,EdmType:e},{Type:"String",Value:" "});m=L2(a,o.Path,"Org.OData.Measures.V1.ISOCurrency");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}m=L2(a,o.Path,"Org.OData.Measures.V1.Unit");if(!$.isEmptyObject(m)){l.push({Type:m.Type,Value:m.Value});}b.BindingInfo=i2(l);}else{b.BindingInfo={path:o.Path,type:K2};}break;default:b.BindingInfo={path:o.Path};break;}}}else if(o.String){b.String=o.String;}return b;};var o2=function(o){var a=[],p,b,j,e,i={},k,l,m;if(o&&o.Apply){p=o.Apply.Parameters;switch(o.Apply.Name){case"odata.fillUriTemplate":p[0].Value=p[0].Value.trim();b=p[0].Value.split("{");for(j=0;j<b.length;j+=1){if(b[j].indexOf("}")<0){a.push({"Value":b[j],"Type":"String"});}else{e=b[j].split("}");i={};i.Value=e[0];i.Type="Path";for(j=1;j<p.length;j+=1){if(p[j].Name===i.Value){k=p[j].Value;if(k.Path){i.Value=k.Path;}else if(k.Apply&&k.Apply.Name&&k.Apply.Name.toLowerCase()==="odata.uriencode"){i.Value=k.Apply.Parameters[0].Value;}break;}}a.push(i);a.push({"Value":e[1],"Type":"String"});}}l=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(l&&l.url){m=jQuery.sap.getUriParameters(l.url).get("sap-system");if(m){a.push({Type:"String",Value:"&sap-system="+m});}}break;default:break;}}return i2(a);};var p2=function(o){var a=M1.Begin;if(o.EdmType==="Edm.Decimal"||o.EdmType==="Edm.Double"||o.EdmType==="Edm.Single"||o.EdmType==="Edm.Int16"||o.EdmType==="Edm.Int32"||o.EdmType==="Edm.Int64"){a=M1.End;}return a;};var q2=function(m,e,a,o,b,k){var i,j=0,l=0,n=0,p=0,D2,E2,F2,G2,H2,I2;if(!b){b=m.getServiceMetadata();}if(!a){a=[];}D2=c2(e,b);I2=new S({labelMinWidth:150,maxContainerCols:2});E2=(N1.propertyExtensions)?N1.propertyExtensions[D2]:[];if(o&&o.High){l=o.High;}if(o&&o.Medium){n=o.Medium;}if(o&&o.Low){p=o.Low;}for(i=0;i<a.length;i+=1){F2=x2(a[i]);if(o&&(F2==="High")){if(l){l-=1;}else{continue;}}else if(o&&(F2==="Medium")){if(n){n-=1;}else{continue;}}else if(o&&(F2==="Low")){if(p){p-=1;}else{continue;}}if(o&&o.Total&&(j>=o.Total)){break;}j+=1;G2=new C().setModel(m);H2=m2(a[i],{textAlign:M1.End},E2,false);H2.addStyleClass("sapFactsheetUtiFormPadding");G2=l2(a[i],D2,b,k);G2.addStyleClass("sapFactsheetUtiFormPadding");if(G2.setTextAlign){G2.setTextAlign(M1.Begin);}I2.addContent(H2);I2.addContent(G2);}I2.addStyleClass("sapFactsheetUtiFormLayout");return I2;};var r2=function(m,e,o,b,a){var j="",k=[],i,l,n,p,D2,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2;l=m.getServiceMetadata();switch(o.RecordType){case"com.sap.vocabularies.UI.v1.ReferenceFacet":n=new s();if(o.Label&&o.Label.String){n.setTitle(o.Label.String);}p=o.Target.AnnotationPath;D2=p.substring(p.lastIndexOf("@")+1);p=p.substring(0,p.lastIndexOf("@")-1);if(p){j=f2(e,p,l);}E2=D2.split("#");switch(E2[0]){case"com.sap.vocabularies.UI.v1.LineItem":case"com.sap.vocabularies.UI.v1.Chart":case"com.sap.vocabularies.UI.v1.Badge":case"com.sap.vocabularies.UI.v1.Identification":if(p){F2=e2(e,p,l);L2=c2(F2,l);}else{L2=c2(e,l);}if(E2[0]==="com.sap.vocabularies.UI.v1.Chart"){D2="com.sap.vocabularies.UI.v1.LineItem";}M2=N1[L2][D2];if(N1.propertyExtensions){N2=N1.propertyExtensions[L2];}if(j==="*"&&E2[0]!=="com.sap.vocabularies.UI.v1.Identification"){G2=t2(m,M2,L2,l,b+"/"+p,o,N2,a);n.setContent(G2);}if(E2[0]==="com.sap.vocabularies.UI.v1.Identification"){H2=N1[L2]["com.sap.vocabularies.UI.v1.Identification"];I2=new V({width:"100%"}).setModel(m);if(p){I2.addContent(q2(m,F2,H2,null,null,a)).addStyleClass("sapFactsheetUtiPanel");I2.bindElement(b+"/"+p);}else{I2.addContent(q2(m,e,H2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}n.setContent(I2);}break;case"com.sap.vocabularies.UI.v1.StatusInfo":if(p){F2=e2(e,p,l);J2=N1[c2(F2,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,F2,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{J2=N1[c2(e,l)]["com.sap.vocabularies.UI.v1.StatusInfo"];n.setContent(q2(m,e,J2,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}break;case"com.sap.vocabularies.UI.v1.FieldGroup":K2=N1[c2(e,l)][D2];if(K2){if(!n.getTitle()||(n.getTitle()==="")){if(K2.Label){if(K2.Label.String){n.setTitle(K2.Label.String);}else if(K2.Label.Path){n.bindProperty("title",K2.Label.Path);}}}if(p){F2=e2(e,p,l);n.setContent(q2(m,F2,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel").bindElement(b+"/"+p));}else{n.setContent(q2(m,e,K2.Data,null,null,a).addStyleClass("sapFactsheetUtiPanel"));}}break;default:break;}return n;case"com.sap.vocabularies.UI.v1.ReferenceURLFacet":n=new t({title:o.Label.String});n.setContent(s2(o));return n;case"com.sap.vocabularies.UI.v1.CollectionFacet":for(i=0;i<o.Facets.length;i+=1){k.push(r2(m,e,o.Facets[i],b,a));}return k;default:break;}};var s2=function(o){var i,a,b;switch(o.UrlContentType.String){case"image/png":case"image/jpeg":case"image/gif":i=new f({width:"100%"});if(o.Url.String){i.setSrc(o.Url.String);}return i;default:a=new H();if(o.Url.String){a.setContent("<iframe src = '"+o.Url.String+"' width='100%' height='250px' frameborder='0'></iframe>");}else if(o.Url.Path){a.bindProperty("content",{path:o.Url.Path,formatter:function(){b="<iframe src = '"+o.Url.Path+"' width='100%' height='250px' frameborder='0'></iframe>";return b;}});}return a;}};var t2=function(m,a,e,o,b,l,n,D2){var E2=[],F2=[],G2=[],H2=[],I2=[],J2=[],K2=false,i,k,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3;_2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");if(!o){o=m.getServiceMetadata();}L2=(N1.propertyExtensions)?N1.propertyExtensions[e]:[];M2=6;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){M2=5;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){M2=4;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){M2=3;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){M2=2;}N2=0;O2=0;for(i=0;i<a.length;i+=1){P2=x2(a[i]);if(P2==="High"){N2+=1;}}if(M2>N2){O2=M2-N2;}else if(M2<N2){N2=M2;}H2.push(new u({visible:false}));G2.push(new h().bindText("__metadata/uri"));for(i=0;i<a.length;i+=1){b3="";S2=new C();P2=x2(a[i]);S2=l2(a[i],e,o,D2);Q2=m2(a[i],null,L2);if(a[i].Value.Path){Y2=a[i].Value.Path;if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){Q2.data("IsSortable",n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="true"){K2=true;}}else{Q2.data("IsSortable","true");K2=true;}if(n&&n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable){Q2.data("IsFilterable",n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable);if(n[Y2]["http://www.sap.com/Protocols/SAPData"].filterable==="true"){K2=true;}}else{Q2.data("IsFilterable","true");K2=true;}}else{a3=true;for(k=0;k<a[i].Value.Apply.Parameters.length;k+=1){if(a[i].Value.Apply.Parameters[k].Type==="Path"){Y2=a[i].Value.Apply.Parameters[k].Value;if(n[Y2]&&n[Y2]["http://www.sap.com/Protocols/SAPData"]&&n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable){if(n[Y2]["http://www.sap.com/Protocols/SAPData"].sortable==="false"){a3=false;b3="";break;}}if(b3){b3+=";";}b3+=Y2;}}Y2=b3;if(a3===false){Q2.data("IsSortable","false");}else{Q2.data("IsSortable","true");K2=true;}Q2.data("IsFilterable","false");}if(a[i].EdmType){Q2.data("EdmType",a[i].EdmType);}Q2.data("ColumnName",Y2);E2.push(Q2);F2.push(S2);if(P2==="High"){if(N2>0){R2=true;N2-=1;}else{R2=false;}}else if(P2==="Medium"){if(O2>0){R2=true;O2-=1;}else{R2=false;}}else{R2=false;}H2.push(new u({header:Q2,hAlign:p2(a[i]),visible:R2}));G2.push(S2);}T2=new v({type:L1.Navigation,unread:false,cells:G2});if(l){U2=l.Label.String;}T2.attachPress({aColumns:a,aLabels:E2,aControls:F2,sTitle:U2},function(j,p){var i,i3,j3,Q2,k3,l3,m3;i3=j.getSource().getCells()[0].getText().substr(j.getSource().getCells()[0].getText().lastIndexOf("/"));j3=new x({backgroundDesign:K1.Transparent,showSeparators:J1.None,columns:[new u({hAlign:M1.End}),new u()]});j3.addStyleClass("sapFactsheetUtiPanel");j3.addStyleClass("sapFactsheetUtiTilePadding");j3.addStyleClass("sapFactsheetUtiTableNoTopBorder");j3.bindElement(i3);for(i=0;i<a.length;i+=1){Q2=E2[i].clone();Q2.setText(Q2.getText()+":");m3=F2[i].clone();Q2.setLabelFor(m3);j3.addItem(new v({cells:[Q2,m3]}));}k3=new s({content:j3,title:U2,description:Y1()});l3=new P({title:T1.getTitle(),showNavButton:true,content:[k3]});T1.navigateToPage(l3,true);T1.attachAfterNavigate(j3,function(j){if(j.getParameters().getParameters().toId.indexOf("__page")>=0){var n3;n3=j3.getItems();if(n3.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=n3;B2(O1.indexOf(D2));}}});});V2=new x({growing:true,columns:H2});V2.setModel(m);V2.bindItems({path:b,template:T2});var c3=new y({items:[new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if(j3[i]instanceof O&&j3[i].getKey()===this.oParent.data("ColumnName")){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var d3=new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_GREATER_THEN")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_EQUALS")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_LESS_THEN")}).data("FilterOperator",E.LT)]}),new z({placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if(k3){if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}}).addStyleClass("sapFactsheetUtiFilterInput")]});new y({items:[new A({mode:I1.SingleSelectLeft,includeItemInSelection:true,items:[new B({title:_2.getText("USHELL_FACTSHEET_AFTER")}).data("FilterOperator",E.GT),new B({title:_2.getText("USHELL_FACTSHEET_AT")}).data("FilterOperator",E.EQ),new B({title:_2.getText("USHELL_FACTSHEET_BEFORE")}).data("FilterOperator",E.LT)]}),new G({type:H1.Date,valueFormat:new D({pattern:"yyyy/MM/dd HH:mm:ss UTC+00:00"}).getOutputPattern(),placeholder:_2.getText("USHELL_FACTSHEET_ENTER_YOUR_FILTER"),change:function(j){var p,i3,j3,k3,i;p=j.getSource().getParent().getParent().getId();i3=sap.ui.getCore().byId(p.substr(0,p.indexOf("-")));j3=i3.getFilterItems();for(i=0;i<j3.length;i+=1){if((j3[i]instanceof O)&&(j3[i].getKey()===this.oParent.data("ColumnName"))){k3=j3[i];break;}}if((j.getParameter("newValue")===undefined)||(j.getParameter("newValue")==="")){k3.setSelected(false);k3.setFilterCount(0);}else{k3.setSelected(true);k3.setFilterCount(1);}}}).addStyleClass("sapFactsheetUtiFilterInput")]});var e3=function(S2){var j=[],p=S2.getItems(),i,i3,j3;if(p[0].getParent().data("EdmType")==="Edm.String"&&p[0].getValue()){j.push(new K(p[0].getParent().data("ColumnName"),E.Contains,p[0].getValue()));}else if(p[0].getParent().data("EdmType")==="Edm.Decimal"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j3=p[1].getValue();for(i=j3.length-1;i>0;i-=1){if(j3[i]===","){j3=j3.replace(j3[i],".");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,j3));}else if(p[0].getParent().data("EdmType")==="Edm.Date"&&p[1].getValue()){for(i=0;i<p[0].getItems().length;i+=1){if(p[0].getItems()[i].getSelected()===true){i3=p[0].getItems()[i].data("FilterOperator");break;}}j.push(new K(p[1].getParent().data("ColumnName"),i3,p[1].getValue()));}else{j.push(new K(p[0].getParent().data("ColumnName"),E.EQ,p[0].getValue()));}return j;};var f3=function(p){var i3=p.getSource(),j3=i3.getFilterItems(),i,j,k3;for(i=0;i<j3.length;i+=1){if(j3[i]&&j3[i]instanceof O){j3[i].setSelected(false);j3[i].setFilterCount(0);k3=j3[i].getCustomControl().getItems();for(j=0;j<k3.length;j+=1){if((k3[j]instanceof z)||(k3[j]instanceof G)){k3[j].setValue("");}if((k3[j]instanceof A)&&(k3[j].getSelectedItem()!==null)){k3[j].removeSelections();}}}}};var g3=f3;for(i=0;i<H2.length;i+=1){if(H2[i+1]){Q2=E2[i].clone();if(Q2.getText()&&(Q2.data("IsSortable")==="true")&&H2[i+1].getVisible()){W2=new M({text:Q2.getText(),key:Q2.data("ColumnName")});if(i===0){W2.setSelected(true);}W2.Sort=Q2.Sort;I2.push(W2);}if(Q2.getText()&&(Q2.data("IsFilterable")==="true")){if(Q2.data("EdmType")==="Edm.String"){$2=c3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}else if(Q2.data("EdmType")==="Edm.Decimal"){$2=d3.clone().data("ColumnName",Q2.data("ColumnName")).data("EdmType",Q2.data("EdmType"));}if((Q2.data("EdmType")==="Edm.String")||(Q2.data("EdmType")==="Edm.Decimal")){Z2=new O({key:Q2.data("ColumnName"),text:Q2.getText(),customControl:$2,customData:new Q({key:"callback",value:e3})});J2.push(Z2);}}}}X2=new R({sortItems:I2,filterItems:J2,cancel:g3,resetFilters:f3,confirm:function(j){var i3=[],j3=[],k3=[],l3=[],i,p,m3,n3,o3,p3,q3;m3=j.getParameters();n3=V2.getBinding("items");if(m3.sortItem){o3=m3.sortItem.getKey();p3=m3.sortDescending;if(o3.indexOf(";")>0){j3=o3.split(";");for(i=0;i<j3.length;i+=1){i3.push(new W(j3[i],p3));}}else if(o3){i3.push(new W(o3,p3));}n3.sort(i3);}p=m3;for(i=0;i<p.filterItems.length;i+=1){if(p.filterItems[i]instanceof O){q3=p.filterItems[i].getCustomData()[0].getValue();k3=q3.apply(this,[p.filterItems[i].getCustomControl()]);if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}else if(p.filterItems[i]instanceof M){k3=p.filterItems[i].getCustomData()[0].getValue();if(k3){if(!Array.isArray(k3)){k3=[k3];}l3=l3.concat(k3);}}}n3.filter(l3);}});if(K2===true&&(I2.length>0||J2.length>0)){V2.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){X2.open();},tooltip:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("P13NDIALOG_VIEW_SETTINGS")})]}));}V2.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));var h3=(function(D2){return function(j){var p=this.getItems();if(p.length===0){this.setNoDataText(_2.getText("FACETOVERVIEW_NO_CONTENT_TEXT"));}else{this.setNoDataText(sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PULL2REFRESH_LOADING_LONG"));}if(p.length>0&&O1.indexOf(D2)>=0){O1[O1.indexOf(D2)].bLoaded=true;O1[O1.indexOf(D2)].bProcessed=false;O1[O1.indexOf(D2)].bIsTable=true;O1[O1.indexOf(D2)].oTableItems=p;}B2(O1.indexOf(D2));};}(D2));V2.attachUpdateFinished(h3);return V2;};var u2=function(a,o,b,e){var i;switch(a){case"com.sap.vocabularies.UI.v1.ChartType/Area":i=new _({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bar":i=new a1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Bubble":i=new b1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Column":i=new c1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked":i=new d1({});break;case"com.sap.vocabularies.UI.v1.ChartType/ColumnStacked100":i=new e1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Donut":i=new f1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HeatMap":i=new g1({});break;case"com.sap.vocabularies.UI.v1.ChartType/HorizontalArea":i=new h1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Line":i=new i1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Pie":i=new j1({});break;case"com.sap.vocabularies.UI.v1.ChartType/Scatter":i=new k1({});break;case"com.sap.vocabularies.UI.v1.ChartType/TreeMap":i=new l1({});break;case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/AreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked":case"com.sap.vocabularies.UI.v1.ChartType/BarStacked100":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked":case"com.sap.vocabularies.UI.v1.ChartType/HorizontalAreaStacked100":case"com.sap.vocabularies.UI.v1.ChartType/Radar":case"com.sap.vocabularies.UI.v1.ChartType/Waterfall":break;}if(i){if(o&&o.String){i.setTitle(new m1({visible:true,text:o.String}));}if(b&&b.String){i.setTooltip(b.String);}i.setWidth("100%");i.setHeight("17rem");i.setDataset(e);}else{i=new h({});}return i;};var v2=function(i){var a;i=i||1;if(jQuery.device.is.phone){a=(7*i)+"rem";}else{a=(11*i-1)+"rem";}return a;};var w2=function(a){var b=0,e=0,j=0,i,o;for(i=0;i<a.length;i+=1){o=x2(a[i]);if(o){switch(o){case"High":b+=1;break;case"Medium":e+=1;break;case"Low":j+=1;break;}}}return{High:b,Medium:e,Low:j};};var x2=function(o){var e="";if(o.Importance){e=o.Importance.EnumMember;}else if(o["com.sap.vocabularies.UI.v1.Importance"]){e=o["com.sap.vocabularies.UI.v1.Importance"].EnumMember;}return e.substr(e.indexOf("/")+1);};var y2=function(m,a,e,b){var i=false,o,j,k,l;o=new n1({doubleFontSize:false});if(a.ValueFormat){j=a.ValueFormat.NumberOfFractionalDigits.Int;}if(a.Title&&a.Title.String){o.setDescription(a.Title.String);}else if(a.Title&&a.Title.Path){o.bindProperty("description",{path:a.Title.Path});}if(a.Value&&a.Value.String){o.setValue(a.Value.String);}else if(a.Value&&a.Value.Path){k=n2(a.Value,a.Value.EdmType,e);if(k.fnChange){o.setModel(m);o.bindElement(b);o.getElementBinding().attachChange(k.fnChange,o);}if(k.String){if($.isNumeric(k.String)){i=true;o.setValue(W1(k.String,j));}else{o.setValue(k.String);}}else if(k.BindingInfo){l=k.BindingInfo;if(l.parts&&l.parts.length===2){o.bindProperty("valueUnit",l.parts[0]);l.parts[1].type=undefined;l.parts[1].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l.parts[1]);}else if(l.parts&&l.parts.length===1){l.parts[0].type=undefined;l.parts[0].formatter=(function(){return function(n){return W1(n,j);};}(j));o.bindProperty("value",l);}else{o.bindProperty("value",l);}}}if(a.Value.EdmType==="Edm.Decimal"||a.Value.EdmType==="Edm.Double"||a.Value.EdmType==="Edm.Single"||a.Value.EdmType==="Edm.Int16"||a.Value.EdmType==="Edm.Int32"||a.Value.EdmType==="Edm.Int64"||i===true){o.setDoubleFontSize(true);}return o;};var z2=function(m){var a=[],b=[],e,i,k;var j=function(o){if(l(o)===false){if(Array.isArray(o)){for(i=0;i<o.length;i+=1){l(o[i]);}}else if(typeof o==="object"){for(k in o){if(o.hasOwnProperty(k)){if(o[k].constructor!==String){j(o[k]);}}}}}};var l=function(o){if(o.RecordType&&o.RecordType==="com.sap.vocabularies.UI.v1.DataFieldWithUrl"){if(o.Url&&o.Url.Apply){e=o.Url.Apply.Parameters[0].Value.slice(o.Url.Apply.Parameters[0].Value.indexOf("#")+1,o.Url.Apply.Parameters[0].Value.indexOf("-"));if(a.indexOf(e)<0){a.push(e);}return true;}}else{return false;}};for(k in N1){if(N1.hasOwnProperty(k)){if(k.indexOf(m.dataServices.schema[0].namespace)>=0){j(N1[k]);}}}for(i=0;i<a.length;i+=1){if(!P1.hasOwnProperty(a[i])){b.push(a[i]);}}return b;};var A2=function(a){var i,o,l,b;if(a.length>0){o=new J();l="/sap/opu/odata/UI2/INTEROP/SemanticObjects?$expand=Links&$format=json";b="&$filter=id%20eq%20%27";for(i=0;i<a.length;i+=1){if(b.length>22){b+="%20or%20id%20eq%20%27"+a[i]+"%27";}else{b+=a[i]+"%27";}}l+=l+b;o.loadData(l);o.attachRequestCompleted(function(){var e=[],i,j,k;if(this.getData().d&&this.getData().d.results){k=this.getData().d.results;for(i=0;i<k.length;i+=1){P1[k[i].id]="";e=k[i].Links.results;for(j=0;j<e.length;j+=1){P1[e[j].id.slice(0,e[j].id.indexOf("~"))]="";}}}P1.InteropCompleted=true;B2();});}else{P1.InteropCompleted=true;}};var B2=function(a){var i,j,k,n,b,e,l;if(P1.InteropCompleted===true){for(i=0;i<O1.length;i+=1){if(O1[i].bLoaded&&!O1[i].bProcessed&&O1[i].Links){l=O1[i].Links;for(j=0;j<l.length;j+=1){if(P1.hasOwnProperty(l[j].sIntend)===true){if(O1[i].bIsTable===true){if(O1[i].oTableItems){b=O1[i].oTableItems;for(k=0;k<b.length;k+=1){e=b[k].getCells();for(n=0;n<e.length;n+=1){if(e[n]instanceof V&&e[n].getContent()[0].getBindingInfo("href").parts===l[j].oVL.getContent()[0].getBindingInfo("href").parts&&e[n].getContent()[1].getBindingInfo("text").parts===l[j].oVL.getContent()[1].getBindingInfo("text").parts){e[n].getContent()[0].setVisible(true);e[n].getContent()[1].setVisible(false);}}}}}else{l[j].oVL.getContent()[0].setVisible(true);l[j].oVL.getContent()[1].setVisible(false);}}else if(O1[i].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}O1[i].bProcessed=true;}}}}if(a>=0){if(O1[a].bLoaded&&!O1[a].bProcessed&&O1[a].Links){l=O1[a].Links;for(j=0;j<l.length;j+=1){if(O1[a].bIsTable===false){l[j].oVL.getContent()[1].setText(l[j].oVL.getContent()[0].getText());}}}}};var C2=function(e,l,T1){var m={},n=[],p=0,D2=0,E2=0,i,j,F2,G2,H2,I2,J2,K2,L2,M2,N2,O2,P2,Q2,R2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,_2,a3,b3,c3,d3,e3,f3,g3,h3,i3,j3,k3,l3,m3,n3,o3,p3,q3,r3,s3,t3,u3,v3;F2=Z1(e);U2=l.substring(0,l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));V2=l.substring(l.substring(0,l.lastIndexOf("/")).lastIndexOf("/"));if(window.location.search.indexOf("cbn_keep_anno_case%3Dtrue")===-1){V2=V2.toLowerCase();}G2=new o1(F2,{annotationURI:U2+V2,loadAnnotationsJoined:true,loadMetadataAsync:false,json:true});G2.setCountSupported(false);T1.setModel(G2);H2=$1(e,G2);I2="/"+e.slice(F2.length);J2=G2.getServiceMetadata();N1=G2.getServiceAnnotations();K2=c2(H2,J2);L2=N1[K2]["com.sap.vocabularies.UI.v1.HeaderInfo"];M2=N1[K2]["com.sap.vocabularies.UI.v1.Facets"];T1.bindElement(I2,g2(H2,J2));W2=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");P1.InteropCompleted=false;A2(z2(J2));T1.addStyleClass("sapFactsheetUtiThingType"+H2.replace(/\s/g,""));if(L2.TypeName.String){T1.setTitle(L2.TypeName.String);}else if(L2.TypeName.Path){T1.bindProperty("title",{path:L2.TypeName.Path});}if(L2.ImageUrl&&L2.ImageUrl.String){T1.setIcon(L2.ImageUrl.String);}else if(L2.ImageUrl&&L2.ImageUrl.Path){T1.bindProperty("icon",{path:L2.ImageUrl.Path});}else if(L2.TypeImageUrl&&L2.TypeImageUrl.String){T1.setIcon(L2.TypeImageUrl.String);}else if(L2.TypeImageUrl&&L2.TypeImageUrl.Path){T1.bindProperty("icon",{path:L2.TypeImageUrl.Path});}if(L2.Title.Value.String){T1.setName(L2.Title.Value.String);}else{T1.bindProperty("name",n2(L2.Title.Value,L2.Title.EdmType,K2).BindingInfo);}if(L2.Description&&L2.Description.Value){if(L2.Description.Value.String){T1.setDescription(L2.Description.Value.String);}else{T1.bindProperty("description",n2(L2.Description.Value,L2.Description.EdmType,K2).BindingInfo);}}for(s3 in N1[K2]){if(N1[K2].hasOwnProperty(s3)){if(s3.search("com.sap.vocabularies.UI.v1.DataPoint")!==-1){t3=N1[K2][s3];if(t3){T1.addKpi(y2(G2,t3,K2,I2));E2+=1;}}if(E2>=3){break;}}}for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.IsSummary"]){Q2=M2[i];break;}}if(Q2){X2=15;for(j=0;j<Q2.Facets.length;j+=1){Y2=Q2.Facets[j].Target.AnnotationPath.substring(Q2.Facets[j].Target.AnnotationPath.lastIndexOf("@")+1);N2=Q2.Facets[j].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);Q2.Facets[j].NavPath=N2;Z2=e2(H2,N2,J2);Q2.Facets[j].NavEntitySet=Z2;if(Z2){$2=Z2;}else{$2=H2;}Q2.Facets[j].EntitySet=$2;_2=c2(Z2,J2);if(_2){a3=_2;}else{a3=K2;}Q2.Facets[j].EntityType=a3;b3=[];if(N1[a3][Y2].length){b3=N1[a3][Y2];}else if(N1[a3][Y2].Data.length){b3=N1[a3][Y2].Data;}Q2.Facets[j].Content=b3;for(i=0;i<b3.length;i+=1){c3=x2(b3[i]);if(c3==="High"){p+=1;}else if(c3==="Medium"){D2+=1;}}}if(p>=X2){p=X2;D2=0;}else if((p+D2)>X2){D2=X2-p;if(D2<0){D2=0;}}if(jQuery.device.is.phone){D2=0;}e3=X2-p-D2;m3=new p1({title:W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT")});O1=[];O1.push(m3);O1[0].bLoaded=false;O1[0].bProcessed=false;O1[0].bIsTable=false;f3=[];h3=D2+p;for(j=0;j<Q2.Facets.length;j+=1){i3=q2(G2,Q2.Facets[j].EntitySet,Q2.Facets[j].Content,{High:p,Medium:D2,Low:0},null,m3).addStyleClass("sapFactsheetUtiTilePadding");if(j>0){i3.addStyleClass("sapFactsheetUtiPaddingTop");}if(Q2.Facets[j].NavPath){i3.bindElement(I2+"/"+Q2.Facets[j].NavPath);}g3=w2(Q2.Facets[j].Content);p-=g3.High;D2-=g3.Medium;if(((g3.High>0)&&((p+g3.High)>0))||((g3.Medium>0)&&((D2+g3.Medium)>0))){f3.push(i3);if(j>0){if(e3>0){e3-=1;}else if(D2>0){D2-=1;}else if(p>0){p-=1;}}}if((p<1)&&(D2<1)){break;}}if(p<0){p=0;}if(D2<0){D2=0;}m=new V({content:f3,width:"100%"});j3=v2();l3=1;if((h3>3)&&(h3<=9)){j3=v2(2);l3=2;}else if(h3>9){j3=v2(3);l3=3;}m3.setContent(m);m3.setRowSpan(l3);if(jQuery.device.is.phone){m3.setHeightType(G1.Auto);}else{m3.setHeight(j3);}m3.addStyleClass("sapFactsheetUtiGeneralInformationOverviewFacet");m3.attachPress({facets:Q2},function(o,a){var b,k,D3,E3,m;T1.removeAllFacetContent();D3=new s();D3.setDescription(Y1());D3.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));D3.addStyleClass("sapFactsheetUtiGeneralInformationUtg");if(a.facets.Facets.length>1){b="L6 M12 S12";}else{b="L12 M12 S12";}O1[0].Links=[];E3=new V({width:"100%"});for(i=0;i<a.facets.Facets.length;i+=1){if(i%2===0){k=new r1({hSpacing:1,vSpacing:1,defaultSpan:b});}m=r2(G2,H2,a.facets.Facets[i],I2,this);m.addStyleClass("sapFactsheetUtiGeneralInformationUtgContent");if((i===0)&&(a.facets.Facets.length>1)&&(m.getTitle().trim()==="")){m.setTitle(W2.getText("UNIFIEDTHINGINSPECTOR_GENERAL_INFORMATION_HEADER_TEXT"));}k.addContent(m);if(i%2!==0){E3.addContent(k);}}O1[0].bLoaded=true;O1[0].bProcessed=false;O1[0].bIsTable=false;B2(0);if(i%2!==0){E3.addContent(k);}D3.setContent(E3);T1.addFacetContent(D3);T1.navigateToDetail();});T1.addFacet(m3);}var w3=function(O2){return function(a){var i,o,b,k,D3,E3,I2,F3,G3,H3,I3,J3,K3,L3,M3;if((O2.cardinality==="*"&&a.results&&a.results.length&&a.results.length!==0)||(O2.cardinality==="1"&&a)){E3=new J();if(O2.cardinality==="*"){if(a.results&&a.results.length){E3.setData(a);}}else{E3.setData({result:a});I2="/result";}o=new o1("/sap/opu/odata/sap/VBI_APPL_DEF_SRV",false);b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.GeoLocation"];G3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.HeaderInfo"];H3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Identification"];if(b.Longitude&&b.Latitude){D3={"Data":{"Set":{"N":[{"name":"Spots","E":[]}]}}};if(O2.cardinality==="1"){if(b.Longitude.Path&&b.Latitude.Path){k=a[b.Longitude.Path]+";"+a[b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}else{for(i=0;i<a.results.length;i+=1){if(b.Longitude.Path&&b.Latitude.Path){k=a.results[i][b.Longitude.Path]+";"+a.results[i][b.Latitude.Path]+";0";}D3.Data.Set.N[0].E.push({"A":k,"I":"pin_blue.png"});}if(a.results.length!==0){k=a.results[0][b.Longitude.Path]+";"+a.results[0][b.Latitude.Path]+";0";}}}M3=parseInt(a.__count,10);if(Number(M3)){O2.facet.setQuantity(M3);}var N3=function(S3){var T3,U3,V3,W3,X3;T3=$.parseJSON(S3.getParameters().data);if(T3.Action.name==="DETAIL_REQUEST"&&T3.Action.instance){U3=T3.Action.instance;if(E3.oData.results){I2="/results/"+U3.split(".")[1];}L3=G3.TypeName.String.substring(0,17);W3=parseFloat(v2(0.7))*16;X3=parseFloat(v2(1.5))*16;V3={"SAPVB":{"version":"2.0","xmlns:VB":"VB","Windows":{"Remove":{"name":"Detail1"},"Set":{"name":"Detail1","Window":{"id":"Detail1","type":"callout","refParent":"Main","refScene":"","offsetX":"16","offsetY":"-27","modal":"false","width":X3,"height":W3,"caption":L3,"pos.bind":U3+".GeoPosition"}}},"Scenes":{"Set":{"name":"Details","Scene":{"id":"Details","navControlVisible":"false"}}}}};this.load(V3);}};var O3=function(S3){var s3,T3,Z2,U3;if(!I3){I3=l2(G3.Title,O2.navigationType,J2,O2.facet);I3.setModel(E3);I3.bindElement(I2);J3=l2(G3.Description,O2.navigationType,J2,O2.facet);J3.setModel(E3);J3.bindElement(I2);for(s3 in b.Address){if(s3==="label"){F3=l2({Value:b.Address[s3]},O2.navigationType,J2,O2.facet);F3.setModel(E3);F3.bindElement(I2);break;}}U3=7;if(jQuery.device.is.tablet&&jQuery.device.is.landscape){U3=4;}else if(jQuery.device.is.tablet&&jQuery.device.is.portrait){U3=5;}else if(jQuery.device.is.phone&&jQuery.device.is.landscape){U3=2;}else if(jQuery.device.is.phone&&jQuery.device.is.portrait){U3=3;}K3=new V({width:"100%"}).setModel(G2);if(O2.navigationPath){Z2=e2(O2.entitySet,O2.navigationPath,J2);K3.addContent(q2(G2,Z2,H3,{High:U3},null,O2.facet));K3.setModel(E3).bindElement(I2);}else{K3.addContent(q2(G2,O2.entitySet,H3,{High:U3},null,O2.facet)).setModel(E3).bindElement(I2);}}else{I3.bindElement(I2);if(J3){J3.bindElement(I2);}if(F3){F3.bindElement(I2);}if(K3){K3.bindElement(I2);}}T3=parseFloat(v2(1.5))*16*0.95+"px";if(I3){I3.placeAt(S3.getParameter("contentarea").id);I3.addStyleClass("sapFactsheetUtiGeoPopupHead");if(jQuery.device.is.phone){I3.addStyleClass("sapFactsheetUtiGeoPopupHeadFontPhone");}I3.setWidth(T3);}if(J3){J3.placeAt(S3.getParameter("contentarea").id);J3.addStyleClass("sapFactsheetUtiGeoPopupDescr");if(jQuery.device.is.phone){J3.addStyleClass("sapFactsheetUtiGeoPopupDescrFontPhone");}J3.setWidth(T3);}if(F3){F3.placeAt(S3.getParameter("contentarea").id);F3.addStyleClass("sapFactsheetUtiGeoPopupText");F3.setWidth(T3);}if(K3&&K3.getContent()[0]&&K3.getContent()[0].getContent&&K3.getContent()[0].getContent().length>0){K3.placeAt(S3.getParameter("contentarea").id);K3.addStyleClass("sapFactsheetUtiGeoPopupText");K3.setWidth(T3);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));};var P3=function(S3){if(I3){I3.destroy();I3=undefined;}if(J3){J3.destroy();J3=undefined;}if(F3){F3.destroy();F3=undefined;}if(K3){K3.destroy();K3=undefined;}$(S3.getParameter("contentarea").id).empty();};var Q3=function(O2){return function(a){var S3,T3,U3,V3,i;V3=a.ProjectJSON;V3=V3.indexOf("{")?V3.substr(V3.indexOf("{")):V3;S3=$.parseJSON(V3);S3.SAPVB.Scenes.Set.SceneGeo.initialStartPosition=k;S3.SAPVB.Scenes.Set.SceneGeo.initialZoom=12;S3.SAPVB.Actions.Set.Action.push({id:"200",name:"TAP_ON_MAP",refEvent:"Click",refScene:"MainScene",refVO:"Map"});if(D3){S3.SAPVB.Data=D3.Data;}for(i=0;i<S3.SAPVB.Scenes.Set.SceneGeo.VO.length;i+=1){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].datasource==="Spots"){if(S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale&&S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale.split(";").length!==3){S3.SAPVB.Scenes.Set.SceneGeo.VO[i].scale="1.0;1.0;1.0";break;}}}O2.facet.getContent().attachSubmit(function(){if(jQuery.device.is.tablet||jQuery.device.is.phone){O2.facet.firePress();}});O2.facet.getContent().load(S3);O2.facet.attachPress("",function(){var W3=[],X3=[],i,Y3;if(!T3){T3=new s1({width:"100%",height:"100%",plugin:false,config:null});T3.addStyleClass("sapFactsheetUtiGeoPopup");}S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.move="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.zoom="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.pitch="false";S3.SAPVB.Scenes.Set.SceneGeo.NavigationDisablement.yaw="false";S3.SAPVB.Scenes.Set.SceneGeo.SuppressedNavControlVisibility="false";T3.load(S3);if(O2.cardinality==="*"){for(i=0;i<E3.oData.results.length;i+=1){W3.push(E3.oData.results[i][b.Longitude.Path]);X3.push(E3.oData.results[i][b.Latitude.Path]);}}T3.attachSubmit(N3);T3.attachOpenWindow(O3);T3.attachCloseWindow(P3);U3=new s({content:T3,title:O2.facetContent.Label.String,description:Y1()});T1.removeAllFacetContent();T1.addFacetContent(U3);T1.navigateToDetail();T1.attachAfterNavigate(W3,function(Z3){if(Z3.getParameters().getParameters().toId.indexOf("-detail-page")!==-1){if(jQuery.device.is.phone){Y3="300px";}else{Y3=Math.floor($("#"+Z3.getParameters().getParameters().toId+"-cont").height()-128)+"px";}T3.setHeight(Y3);if(W3.length>1){T3.zoomToGeoPosition(W3,X3);}}});});};};var R3=function(S3){return function(){T1.removeFacet(S3);};};o.read("VBIApplicationSet('ZFACTSHEETS')","","",false,Q3(O2),R3(O2.facet));}else{O2.facet.setQuantity(undefined);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);O2.facet.setContent(undefined);O2.facet.setTitle(undefined);}};};var x3=function(O2){return function(a){var b="",i,j,o,k,D3,E3,F3,G3,m,H3,I3,J3,K3,L3,M3,N3,O3,P3,Q3,R3,S3,T3,U3,V3,W3,X3,Y3,Z3,$3,_3,a4;o=new J();if(O2.facetContent.Target&&O2.facetContent.Target.AnnotationPath&&O2.facetContent.Target.AnnotationPath.split("#")[1]&&N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]]){k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge#"+O2.facetContent.Target.AnnotationPath.split("#")[1]];}else{k=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Badge"];}if(O2.cardinality==="*"){if(a.results&&a.results.length){X3=O2.facetContent.Target.AnnotationPath;u3=X3.substring(X3.lastIndexOf("@")+1);if(u3==="com.sap.vocabularies.UI.v1.Chart"){Y3=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.Chart"];Z3=N1.propertyExtensions[O2.navigationType];$3=[];for(i=0;i<Y3.Dimensions.length;i+=1){$3.push({axis:1,name:Z3[Y3.Dimensions[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Dimensions[i].PropertyPath+"}"});}_3=[];for(i=0;i<Y3.Measures.length;i+=1){_3.push({name:Z3[Y3.Measures[i].PropertyPath]["http://www.sap.com/Protocols/SAPData"].label,value:"{"+Y3.Measures[i].PropertyPath+"}"});}a4=new F({dimensions:$3,measures:_3,data:{path:"/results"}});m=u2(Y3.ChartType.EnumMember,Y3.Title,Y3.Description,a4);m.setModel(o);O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.XL);}else{m=new V({width:"100%"}).addStyleClass("sapFactsheetUtiVLayoutPadding");for(i=0;i<a.results.length;i+=1){F3=new t1().addStyleClass("sapFactsheetUtiHLayoutPadding");D3=l2(k.Title,O2.navigationType,J2,O2.facet);if(D3.setWrapping){D3.setWrapping(false);}sap.ui.getCore().byId(T1.getId()+"-master-page").addDelegate({onAfterShow:(function(F3){return function(){var b4,c4;b4=F3.getParent().getDomRef().clientWidth;c4=b4;if(F3.getContent()[0]){c4-=F3.getContent()[0].getDomRef().clientWidth;if(b4<F3.getContent()[0].getDomRef().clientWidth){F3.getContent()[0].getDomRef().setAttribute("style","width:"+b4+"px");return;}}if(F3.getContent()[1]){c4-=F3.getContent()[1].getDomRef().clientWidth;}if(c4<10){c4=0;}if(F3.getContent()[2]){F3.getContent()[2].getDomRef().setAttribute("style","width:"+c4+"px");}};}(F3))});o=new J();o.setData({result:a.results[i]});D3.setModel(o);D3.bindElement("/result");G3=false;if(a.results[i][k.Title.Value.Path]){G3=true;}if(k.Title.Value.Apply){for(j=0;j<k.Title.Value.Apply.Parameters.length;j+=1){if(k.Title.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.Title.Value.Apply.Parameters[j].Value]){G3=true;break;}}}}b="";if(G3){F3.addContent(D3);if(k.MainInfo&&((k.MainInfo.EdmType&&k.MainInfo.EdmType==="Edm.Decimal")||(k.MainInfo.Value&&k.MainInfo.Value.Apply&&k.MainInfo.Value.Apply.Parameters[0]&&k.MainInfo.Value.Apply.Parameters[0].EdmType&&k.MainInfo.Value.Apply.Parameters[0].EdmType==="Edm.Decimal"))){b="comma";}else if(k.MainInfo&&k.MainInfo.Value.Path&&a.results[i][k.MainInfo.Value.Path]){b="dash";}else if(k.MainInfo&&k.MainInfo.Value.Apply){for(j=0;j<k.MainInfo.Value.Apply.Parameters.length;j+=1){if(k.MainInfo.Value.Apply.Parameters[j].Type==="Path"){if(a.results[i][k.MainInfo.Value.Apply.Parameters[j].Value]){b="dash";break;}}}}if(b==="dash"){F3.addContent(new H({content:"<span class=\"sapFactsheetUtiSeparatorPadding sapMText\"> &ndash; </span>"}));}if(b==="comma"){F3.addContent(new h({text:", "}).addStyleClass("sapFactsheetUtiSeparatorPaddingForDecimal"));}}if(k.MainInfo){E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);if(E3.setWrapping){E3.setWrapping(false);}E3.setModel(o);E3.bindElement("/result");F3.addContent(E3);}m.addContent(F3);}}H3=parseInt(a.__count,10);if(Number(H3)){O2.facet.setQuantity(H3);}O2.facet.setContent(m);O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=false;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=true;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}else{o.setData({result:a});for(V3 in a){if(a.hasOwnProperty(V3)){if(V3!=="__metadata"){if(typeof a[V3]==="string"&&a[V3]){if(parseInt(a[V3],10)!==0){W3=true;break;}}else if(typeof a[V3]==="number"&&parseInt(a[V3],10)!==0){W3=true;break;}}}}if(W3){I3=new V();J3=(N1.propertyExtensions)?N1.propertyExtensions[O2.navigationType]:[];K3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");L3=m2(k.Title,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");D3=l2(k.Title,O2.navigationType,J2,O2.facet);D3.setModel(o);D3.bindElement("/result");K3.addContent(L3);K3.addContent(D3);I3.addContent(K3);if(k.MainInfo){M3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");N3=m2(k.MainInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");E3=l2(k.MainInfo,O2.navigationType,J2,O2.facet);E3.setModel(o);E3.bindElement("/result");M3.addContent(N3);M3.addContent(E3);I3.addContent(M3);}if(k.SecondaryInfo){O3=new t1().addStyleClass("sapFactsheetUtiHLayoutLabelValue");P3=m2(k.SecondaryInfo,{},J3,true).addStyleClass("sapFactsheetUtiLabelMargin");Q3=l2(k.SecondaryInfo,O2.navigationType,J2,O2.facet);Q3.setModel(o);Q3.bindElement("/result");O3.addContent(P3);O3.addContent(Q3);I3.addContent(O3);}if(k.TypeImageUrl||k.ImageUrl){if(k.ImageUrl){R3=k.ImageUrl;}else{R3=k.TypeImageUrl;}S3=new t1();T3="64px";if(jQuery.device.is.phone){T3="48px";}if(R3.String&&(R3.String.substr(0,11)==="sap-icon://")){U3=new u1({size:T3,width:T3});}else{U3=new f({width:T3});}U3.addStyleClass("sapFactsheetUtiRelIcon");if(R3&&R3.String){U3.setSrc(R3.String);}else if(R3&&R3.Path){U3.bindProperty("src",R3.Path);}S3.addContent(U3);S3.addContent(I3);O2.facet.setContent(S3);}else{O2.facet.setContent(I3);}O2.facet.attachPress({facet:O2.facetContent},function(b4,c4){var m;T1.removeAllFacetContent();O1[O1.indexOf(O2.facet)].Links=[];m=r2(G2,O2.entitySet,c4.facet,O2.bindingPath,this);m.setDescription(Y1());T1.addFacetContent(m);if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));T1.navigateToDetail();});}else{O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}if(O1.indexOf(O2.facet)>=0){O1[O1.indexOf(O2.facet)].bLoaded=true;O1[O1.indexOf(O2.facet)].bProcessed=false;O1[O1.indexOf(O2.facet)].bIsTable=false;}B2(O1.indexOf(O2.facet));}};};var y3=function(O2){return function(){T1.removeFacet(O2.facet);};};var z3=function(O2){return function(a){var o,b,i,k,D3;b=N1[O2.navigationType]["com.sap.vocabularies.UI.v1.MediaResource"];if(O2.cardinality==="*"){if(a.results&&a.results.length){o=new t1().addStyleClass("sapFactsheetUtiPictureViewerOverview");for(i=0;i<a.results.length;i+=1){o.addContent(new f({src:a.results[i][b.Thumbnail.Url.Path],height:"85px"}));if(i===3){break;}}k=parseInt(a.__count,10);if(Number(k)){O2.facet.setQuantity(k);}O2.facet.setContent(o);O2.facet.attachPress({facet:O2.facetContent,data:a},function(E3,F3){var G3,v3,H3;T1.removeAllFacetContent();D3=new s();if(F3.facet.Label&&F3.facet.Label.String){D3.setTitle(F3.facet.Label.String);}D3.setDescription(Y1());if(jQuery.device.is.phone){v3="350px";}else{v3="550px";}G3=new v1({height:v3});for(i=0;i<F3.data.results.length;i+=1){H3=new f({src:F3.data.results[i][b.Url.Path]});if(jQuery.device.is.phone){H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeightPhone");}else{H3.addStyleClass("sapFactsheetUtiCarouselMaxImageHeight");}G3.addPage(H3);}D3.setContent(G3);T1.addFacetContent(D3);T1.navigateToDetail();});}else{O2.facet.setQuantity(0);O2.facet.addStyleClass("sapFactsheetUtiEmptyTile");O2.facet.setHeightType(jQuery.device.is.phone?G1.Auto:G1.S);}}};};var A3=function(o,D3){var E3=[],F3={},i,j,k,G3,H3,I3,J3,K3,L3,M3;var N3=function(J2,a){var i,b="";if(J2){if(J2.Path){return a[J2.Path];}else if(J2.String){return J2.String;}else if(J2.Apply.Name==="odata.concat"){for(i=0;i<J2.Apply.Parameters.length;i+=1){if(J2.Apply.Parameters[i].Type==="Path"){b=b+a[J2.Apply.Parameters[i].Value];}else if(J2.Apply.Parameters[i].Type==="String"){b=b+J2.Apply.Parameters[i].Value;}}return b;}}};F3.iCount=0;F3.aContacts=[];for(i=0;i<o.__batchResponses.length;i+=1){if(!o.__batchResponses[i].data){continue;}E3=o.__batchResponses[i].data.results;if(!E3){E3=[];E3.push(o.__batchResponses[i].data);}if(E3.length>0){G3=N1[E3[0].__metadata.type]["com.sap.vocabularies.Communication.v1.Contact"];if(G3){for(j=0;j<E3.length;j+=1){H3=I3=J3="";if(G3.tel){for(k=0;k<G3.tel.length;k+=1){if(G3.tel[k].type&&G3.tel[k].type.EnumMember){K3=N3(G3.tel[k].uri,E3[j]);switch(G3.tel[k].type.EnumMember){case"com.sap.vocabularies.Communication.v1.PhoneType/voice":H3=K3?K3.replace("tel:",""):"";H3=H3?H3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/cell":I3=K3?K3.replace("tel:",""):"";I3=I3?I3.replace(";ext=",""):"";break;case"com.sap.vocabularies.Communication.v1.PhoneType/fax":J3=K3?K3.replace("tel:",""):"";J3=J3?J3.replace(";ext=",""):"";break;}}}}M3=G3.email&&G3.email.address?G3.email.address:"";L3=N3(G3.photo,E3[j]);F3.iCount+=1;F3.aContacts.push({fn:N3(G3.fn,E3[j]),title:N3(G3.title,E3[j]),org:N3(G3.org,E3[j]),phone:H3,mobile:I3,fax:J3,photo:L3,email:N3(M3,E3[j]),sEntity:E3[0].__metadata.type,bExistsPhoto:!!L3,bUseIcon:!L3,sOrder:F3.iCount});}}}}if(D3){F3.aContacts.sort(function(a,b){return a[D3]>b[D3]?1:-1;});}return F3;};var B3=function(){return function(o){var i,a,b,k,D3,E3,F3,G3;a=A3(o,"sOrder");b=new r1({defaultSpan:"L6 M6 S12",hSpacing:0,vSpacing:0}).addStyleClass("sapFactsheetUtiContactsGrid");for(i=0;i<a.aContacts.length&&i<4;i+=1){E3=new V();if(a.aContacts[i].photo){F3=new f({height:"55px",src:a.aContacts[i].photo});}else{F3=new u1({size:"50px",src:w1.getIconURI("person-placeholder")}).addStyleClass("sapFactsheetUtiRelIcon");}E3.addContent(F3);E3.addStyleClass("sapFactsheetUtiContactsImage");D3=new V({content:[new h({text:a.aContacts[i].fn}).addStyleClass("sapFactsheetUtiTextName"),new h({text:a.aContacts[i].title}).addStyleClass("sapFactsheetUtiTextValue")]});k=new t1({content:[E3,D3]}).addStyleClass("sapFactsheetUtiContactsBox");b.addContent(k);}m3=sap.ui.getCore().byId(T1.data("contactFacetId"));m3.setQuantity(a.iCount);if(i>0){m3.setContent(b);if(i<=2){G3=G1.M;}else{G3=G1.L;}m3.attachPress(function(){var i,n=[],d3;G2.clearBatch();for(i=0;i<N1[K2]["com.sap.vocabularies.UI.v1.Contacts"].length;i+=1){N2=N1[K2]["com.sap.vocabularies.UI.v1.Contacts"][i].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){d3=I2+"/"+N2;}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(function(o){var a,H3,I3,J3,K3,L3,M3;M3=jQuery.sap.resources({url:jQuery.sap.getModulePath("sap.ushell.components.container.")+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});a=A3(o,"sEntity");H3=new J();H3.setData(a);I3=new v({type:w.Inactive,unread:false,cells:[new V({content:[new f({src:"{photo}",width:"74px",visible:"{bExistsPhoto}"}),new u1({size:"76px",src:w1.getIconURI("person-placeholder"),visible:"{bUseIcon}"}).addStyleClass("sapFactsheetUtiRelIcon")]}),new V({content:[new h({text:"{fn}"}).addStyleClass("sapFactsheetUtiContactsName"),new r({text:"{title}"}),new r({text:"{org}"})]}),new g({text:"{phone}",href:"tel:{phone}"}),new g({text:"{mobile}",href:"tel:{mobile}"}),new g({text:"{fax}",href:"tel:{fax}"}),new g({text:"{email}",href:"mailto:{email}"})]});J3=new x({threshold:2,inset:false,showUnread:true,scrollToLoad:true,columns:[new u({hAlign:M1.Center,width:"12%",header:new h({text:""})}),new u({hAlign:M1.Begin,header:new h({text:M3.getText("USHELL_FACTSHEET_NAME")})}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:M3.getText("USHELL_FACTSHEET_PHONE")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("mobile")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"12%",header:new h({text:x1.i18n.getText("fax")}),minScreenWidth:"Tablet",demandPopin:true}),new u({hAlign:M1.Begin,width:"26%",header:new h({text:M3.getText("USHELL_FACTSHEET_EMAIL")}),minScreenWidth:"Tablet",demandPopin:true})],items:{path:"/aContacts",template:I3}});K3=new R({sortItems:[new M({key:"fn",text:M3.getText("USHELL_FACTSHEET_NAME")}),new M({key:"phone",text:M3.getText("USHELL_FACTSHEET_PHONE")}),new M({key:"mobile",text:x1.i18n.getText("mobile")}),new M({key:"fax",text:x1.i18n.getText("fax")}),new M({key:"email",text:M3.getText("USHELL_FACTSHEET_EMAIL")})],confirm:function(N3){var O3,P3,Q3=[];O3=N3.getParameters();P3=J3.getBinding("items");if(O3.sortItem){Q3.push(new W(O3.sortItem.getKey(),O3.sortDescending));P3.sort(Q3);}}});J3.setHeaderToolbar(new X({content:[new r(),new Y(),new Z({icon:"sap-icon://drop-down-list",press:function(){K3.open();}})]}));J3.setModel(H3);L3=new s({title:m3.getTitle(),description:Y1(),content:J3});T1.removeAllFacetContent();T1.addFacetContent(L3);T1.navigateToDetail();});});}else{G3=G1.S;m3.addStyleClass("sapFactsheetUtiEmptyTile");m3.setQuantity(0);}m3.setHeightType(jQuery.device.is.phone?G1.Auto:G3);};};for(i=0;i<M2.length;i+=1){if(M2[i]["com.sap.vocabularies.UI.v1.Map"]){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);p3="1";o3=K2;if(N2){o3=h2(N2,K2,J2);p3=f2(H2,N2,J2);}v3="100%";if(jQuery.device.is.phone){v3="150px";}n3=new s1({width:"100%",height:v3,plugin:false,config:null});m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.L,content:n3});O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(p3==="*"){q3=["$inlinecount=allpages","$top=1000"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,w3(O2));T1.addFacet(m3);}else if(M2[i].Target){N2=M2[i].Target.AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);u3=M2[i].Target.AnnotationPath.substring(M2[i].Target.AnnotationPath.lastIndexOf("@")+1);if(N2){o3=h2(N2,K2,J2);m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});p3=f2(H2,N2,J2);if(p3!==0){O2={cardinality:p3,navigationPath:N2,facet:m3,facetContent:M2[i],navigationType:o3,metadata:J2,bindingPath:I2,entitySet:H2};if(M2[i]["com.sap.vocabularies.UI.v1.Gallery"]){if(p3==="*"){q3=["$inlinecount=allpages"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,z3(O2));}else{O1.push(m3);O1[O1.length-1].bLoaded=false;O1[O1.length-1].bProcessed=false;O1[O1.length-1].bIsTable=false;if(p3==="*"){q3=["$inlinecount=allpages","$top=3"];}else{q3=[];}G2.read(I2+"/"+N2,"",q3,true,x3(O2),y3(O2));}T1.addFacet(m3);}}else if(u3==="com.sap.vocabularies.UI.v1.Contacts"){m3=new p1({title:M2[i].Label.String.trim(),heightType:jQuery.device.is.phone?G1.Auto:G1.M});T1.data("contactFacetId",m3.sId);O2={facet:m3};G2.clearBatch();for(j=0;j<N1[K2][u3].length;j+=1){N2=N1[K2][u3][j].AnnotationPath;N2=N2.substring(0,N2.lastIndexOf("@")-1);if(N2!==""){p3=f2(H2,N2,J2);if(p3==="*"){d3=I2+"/"+N2+"?$top=4&$inlinecount=allpages";}else{d3=I2+"/"+N2;}}else{d3=I2;}n.push(G2.createBatchOperation(d3,"GET"));}G2.addBatchReadOperations(n);G2.submitBatch(B3(O2));T1.addFacet(m3);}}}k3=new y1();var C3=function(){var b={},i,o,s3,a,k,u3,D3,E3,F3,G3,H3,I3,J3,K3;k3.setAppData({title:T1.getTitle(),subtitle:T1.getName()+" - "+T1.getDescription()});k3.setEnabled(true);I3=sap.ushell.Container.getService("URLParsing");J3=I3.getShellHash(window.location.href);K3=I3.parseShellHash(J3);F3=K3.semanticObject;S2=new z1({showCancelButton:true,placement:F1.Top});P2=_1(e,G2);k=P2.split(",");for(i=0;i<k.length;i+=1){k[i]=k[i].replace("='","=","g");if(k[i].lastIndexOf("'")===k[i].length-1){k[i]=k[i].slice(0,-1);}}for(u3 in N1[K2]){if(N1[K2].hasOwnProperty(u3)){if(u3.indexOf("com.sap.vocabularies.Common.v1.SecondaryKey")===0){D3=N1[K2][u3];for(i=0;i<D3.length;i+=1){E3=this.getBoundContext().getProperty(D3[i].PropertyPath);if(E3){k.push(D3[i].PropertyPath+"="+E3);}}}}}for(i=0;i<k.length;i+=1){s3=k[i].substr(0,k[i].indexOf("="));a=k[i].substr(k[i].indexOf("=")+1,k[i].length);b[decodeURIComponent(s3)]=decodeURIComponent(a);}R2=sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(F3,b);R2.done(function(L3){var i,M3,N3;for(i=0;i<L3.length;i+=1){N3=L3[i].intent;if(N3.indexOf(R1)<0&&N3.indexOf("-analyzeKPIDetails~")<0&&N3.indexOf("-analyzeSBKPIDetails~")<0&&N3.indexOf("-NavigateToMaintainCusProj~")<0&&N3.indexOf("CostCenter-manageCostCenter~")<0&&N3.indexOf("AccountingDocument-analyzeDocumentJournal~")<0&&N3.indexOf("AccountingDocument-analyzeGLLineItem~")<0&&N3.indexOf("ControllingDocument-analyzeCostCenters~")<0&&N3.indexOf("ControllingDocument-analyzeInternalOrders~")<0&&N3.indexOf("ControllingDocument-analyzeMarketSegment~")<0&&N3.indexOf("ControllingDocument-analyzeProfitCentersActuals~")<0&&N3.indexOf("ControllingDocument-analyzeProfitLoss~")<0&&N3.indexOf("ControllingDocument-analyzeProjectsActuals~")<0&&N3.indexOf("PurchaseOrder-create~")<0){M3=sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{shellHash:N3}});S2.addItem(new g({text:L3[i].text,href:M3}));T1.setTransactionsVisible(true);}}});T1.attachTransactionsButtonPress(function(L3){S2.openBy(L3.getParameter("caller"));});this.detachChange(C3);A1.setWindowTitle(T1.getTitle().trim()+": "+T1.getName().trim()+" ("+T1.getDescription().trim()+")");T1.setActionsVisible(true);r3=new Z({text:W2.getText("UNIFIEDTHINGINSPECTOR_FOOTER_BUTTON_EMAIL_LINK"),icon:"sap-icon://email",press:function(){E1.triggerEmail("",T1.getName(),window.location.href);}});T2=new B1({placement:F1.Top});G3=e.substr(0,e.lastIndexOf("/")+1);for(o in G2.oData){if(G2.oData.hasOwnProperty(o)){G3=G3+o;H3=o.substring(o.indexOf("(")+1,o.indexOf(")"));break;}}T2.addButton(new C1({jamData:{businessObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle(),ui_url:window.location.href}}}));T2.addButton(new D1({jamData:{object:{id:window.location.href,display:new h({text:T1.getTitle()}),share:""},externalObject:{appContext:"CB",odataServicePath:e.substr(0,e.lastIndexOf("/")+1),collection:H2,key:H3,name:T1.getTitle()}}}));T2.addButton(k3);T2.addButton(r3);T1.attachActionsButtonPress(function(L3){T2.openBy(L3.getParameter("caller"));});O1[0].bLoaded=true;O1[0].bProcessed=false;B2(0);};T1.getElementBinding().attachChange(C3);T1.attachBackAction(function(){history.back();});T1.addDelegate({onAfterRendering:function(){T1._adjustFacetLayout();}});return T1;};return function(a,b){try{T1=C2(a,b,new U({configurationVisible:false}));}catch(e){throw e;}return T1;};},true);
sap.ui.predefine('sap/ushell/components/factsheet/tools/ODataUrlTemplating',function(){"use strict";
function P(p,t,u){this.parameter=p;this.template=t;this.semiConvertedUrl=u;this.message=" is a missing key parameter for constructing the entity url";this.toString=function(){return this.parameter+this.message;};}
var O={ParameterException:P,resolve:function(t,d){var e,v,p,i,b=t.match(/{\s*[\w.]+\s*}/g);e=t;for(i=b.length-1;i>=0;i-=1){p=b[i];v=d[p.replace(/[{}]/g,"")];if(v!==undefined){if(typeof v!=="string"){v=v[0];}v=encodeURIComponent(decodeURIComponent(v));e=e.replace(p,v);}}p=e.match(/{\s*[\w.]+\s*}/g);if(p){jQuery.sap.log.error(" "+e);throw new this.ParameterException(p,t,e);}return e;}};return O;},true);
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.controller',["sap/ui/model/odata/ODataModel"],function(O){"use strict";sap.ui.controller("sap.ushell.components.factsheet.views.ThingViewer",{setService:function(u){this.getView().setModel(new O(u));}});});
sap.ui.predefine('sap/ushell/components/factsheet/views/ThingViewer.view',["sap/ushell/components/factsheet/tools/ODataUrlTemplating","sap/ushell/components/factsheet/factory/ThingInspector","sap/ui/model/odata/ODataUtils","sap/ui/core/Component"],function(O,T,a,C){"use strict";sap.ui.jsview("sap.ushell.components.factsheet.views.ThingViewer",{getControllerName:function(){return"sap.ushell.components.factsheet.views.ThingViewer";},createContent:function(){var e,A,E,t,v,s;v=this.getViewData();e=v.entity||v.service;if(!e){E=v.entityTemplateURI||v.template;if(E){if(typeof E!=="string"){E=E[0];}E=E.replace(/%25/g,"%");E=E.replace(/%28/g,"(");E=E.replace(/%29/g,")");E=E.replace(/%27/g,"'");E=E.replace(/%3D/g,"=");E=E.replace(/%7B/g,"{");E=E.replace(/%7D/g,"}");e=O.resolve(E,v);}}A=v.annotationURI||v.annotation;if(typeof e!=="string"){e=e[0];}if(typeof A!=="string"){A=A[0];}s=e.substr(0,e.lastIndexOf("/"));function b(c,s){var S;if(sap.ui.model.odata&&a&&typeof a.setOrigin==="function"){if(!(c&&c.getComponentData())){throw new Error("no component passed");}if(c&&c.getComponentData()&&c.getComponentData().startupParameters&&c.getComponentData().startupParameters["sap-system"]){S=c.getComponentData().startupParameters["sap-system"][0];s=a.setOrigin(s,{alias:S});}}return s;}s=b(C.getOwnerComponentFor(this),s);s=s+e.substr(e.lastIndexOf("/"));t=T(s,A);t.addStyleClass("ThingInspector");return t;}});});
sap.ui.predefine('sap/ushell/components/homepage/ActionMode',["sap/ushell/resources","sap/m/library","sap/m/Button","sap/ui/thirdparty/jquery","sap/ushell/utils/WindowUtils"],function(r,m,B,q,W){"use strict";var P=m.PlacementType;var A=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.init=function(M){this.oModel=M;};};
A.prototype._activate=function(){this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=this.getHomepageManager().getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();var t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(r.i18n.getText("exitEditMode"));t.setText(r.i18n.getText("exitEditMode"));if(t.setSelected){t.setSelected(true);}}this.oEventBus.publish("launchpad","actionModeActive");};
A.prototype._deactivate=function(){this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);var t=sap.ui.getCore().byId("TileActions");if(t!==undefined){t.destroy();}sap.ui.require(["sap/m/MessageToast"],function(M){M.show(r.i18n.getText("savedChanges"),{duration:4000});});var T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(r.i18n.getText("activateEditMode"));T.setText(r.i18n.getText("activateEditMode"));if(T.setSelected){T.setSelected(false);}}};
A.prototype.toggleActionMode=function(M,s,d){d=d||[];var v=d.filter(function(g){return g.getVisible();});var D={group:v[M.getProperty("/topGroupInViewPortIndex")],restoreLastFocusedTile:true};if(M.getProperty("/tileActionModeActive")){this._deactivate();var j=q(".sapUshellTileContainerHeader[tabindex=0]");if(j.length){var a=q(j[0]).closest(".sapUshellTileContainer");if(a.length){D.restoreLastFocusedTileContainerById=a[0].id;}}}else{this._activate();}this.oEventBus.publish("launchpad","scrollToGroup",D);};
A.prototype.activateGroupEditMode=function(g){var j=q(g.getDomRef()).find(".sapUshellTileContainerContent");j.addClass("sapUshellTileContainerEditMode");};
A.prototype.getHomepageManager=function(){if(!this.oHomepageManager){this.oHomepageManager=sap.ushell.components.getHomepageManager();}return this.oHomepageManager;};
A.prototype._openActionsMenu=function(e,v){var t=this,T=v||e.getSource(),a=[],o=sap.ui.getCore().byId("TileActions"),b,c,d=[],n,f,g,h,H,j;if(T){h=T.getBindingContext().getObject().object;a=this.getHomepageManager().getTileActions(h);}t.oTileControl=T;q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");j=q(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");j.addClass("sapUshellTileActionLayerDivSelected");var k=T.getModel();var G=T.getParent().getBindingContext().getPath();if(a.length&&k.getProperty(G+"/isGroupLocked")){["tileSettingsBtn","linkSettingsBtn","ConvertToTile","ConvertToLink","moveTileDialog_action"].forEach(function(s){var l=r.i18n.getText(s);for(var i=0;i<a.length;i++){if(a[i].text===l){a.splice(i,1);break;}}});}if(a.length===0){n=new B({text:r.i18n.getText("tileHasNoActions"),enabled:false});d.push(n);}else{for(c=0;c<a.length;c++){g=a[c];H=(function(g){return function(){t._handleActionPress(g,T);};}(g));f=new B({text:g.text,icon:g.icon,press:H});d.push(f);}}b=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(!b){var M=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(M){b=M;}else{b=e.getSource();}}if(!o){sap.ui.require(["sap/m/ActionSheet"],function(i){o=new i("TileActions",{placement:P.Bottom,afterClose:function(){q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});t._openActionSheet(o,d,b);});}else{t._openActionSheet(o,d,b);}};
A.prototype._openActionSheet=function(a,b,t){b=b||[];a.destroyButtons();b.forEach(function(o){a.addButton(o);});a.openBy(t);};
A.prototype._handleActionPress=function(a,t){if(a.press){a.press.call(a,t);}else if(a.targetURL){if(a.targetURL.indexOf("#")===0){hasher.setHash(a.targetURL);}else{W.openURL(a.targetURL,"_blank");}}else{sap.ui.require(["sap/m/MessageToast"],function(M){M.show("No Action");});}};
return new A();},true);
sap.ui.predefine('sap/ushell/components/homepage/Component',["sap/ui/core/UIComponent","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/HomepageManager","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(U,m,H,s,C,r){"use strict";return U.extend("sap.ushell.components.homepage.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){this.oModel=m.getModel();this.setModel(this.oModel);U.prototype.init.apply(this,arguments);var d={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new H("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"]);});s.toggleUserActivityLog();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");C.on("/core/home/homePageGroupDisplay").do(function(n){this.oHomepageManager.handleDisplayModeChange(n);}.bind(this));s.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");C.on("/core/home/sizeBehavior").do(function(S){var M=this.oHomepageManager.getModel();M.setProperty("/sizeBehavior",S);}.bind(this));},createContent:function(){this.oDashboardView=sap.ui.view({viewName:"sap.ushell.components.homepage.DashboardContent",type:"JS",async:true});return this.oDashboardView;},exit:function(){this.oHomepageManager.destroy();}});});
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.controller',["sap/ui/thirdparty/jquery","./DashboardUIActions","sap/ushell/utils","sap/ushell/EventHub","sap/ui/Device","sap/ushell/resources","sap/ushell/Layout","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log","sap/ui/core/mvc/Controller","sap/ushell/components/ComponentKeysHandler"],function(q,D,u,E,a,r,L,F,b,c,C,d){"use strict";return C.extend("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=function(){window.setTimeout(this._handleDashboardScroll.bind(this),0);}.bind(this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.destroy();delete this.oDashboardUIActionsModule;}window.removeEventListener("resize",this._resizeHandler.bind(this));},onAfterRendering:function(){u.setPerformanceMark("FLP - dashboard after rendering");var h=sap.ushell.components.getHomepageManager();if(!h.getPreparedGroupModel()){h.loadPersonalizedGroups();}else{E.once("firstSegmentCompleteLoaded").do(h.handleFirstSegmentLoaded.bind(h));}var e=sap.ui.getCore().getEventBus(),m,t,g,i;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);a.orientation.attachHandler(function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(j.length){m=this.getView().getModel();t=m.getProperty("/topGroupInViewPortIndex");if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);window.addEventListener("resize",this._resizeHandler.bind(this));this._updateTopGroupInModel();},_resizeHandler:function(){clearTimeout(this._resizeTimer);this._resizeTimer=setTimeout(this.resizeHandler.bind(this),300);},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject(),o={tileId:T.uuid};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",o,this);},dashboardTilePress:function(e){var t=e.getSource();if(!t){return;}var p;if(a.system.desktop){var s=document.activeElement.id.indexOf("feedTile")!==-1;if(document.activeElement.tagName!=="INPUT"&&s!==true){if(sap.ui.getCore().byId(t.getId())){p=d.getInstance().then(function(f){f.setTileFocus(t.$());});}}}else{p=Promise.resolve();}p.then(function(){sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:t.getUuid()});});},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var s=this._getModelGroupFromVisibleIndex(t);m.setProperty("/iSelectedGroup",s);m.setProperty("/topGroupInViewPortIndex",t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView().getDomRef(),s=v.getElementsByTagName("section")[0],j=q(s).find(".sapUshellTileContainer").not(".sapUshellHidden");if(!j){return 0;}for(var i=0;i<j.length;i++){var g=j[i].parentElement;if(s.scrollTop<=(g.offsetTop+g.offsetHeight)){return i;}}return(j.length?(j.length-1):0);},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!a.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){sap.ui.require(["sap/m/MessageBox"],function(M){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,f=G.groupId,R=r.i18n,A=M.Action,m=(i?A.DELETE:R.getText("ResetGroupBtn"));sap.ushell.Container.getServiceAsync("Message").then(function(o){o.confirm(R.getText(i?"delete_group_msg":"reset_group_msg",s),function(h){if(h===m){e.publish("launchpad",i?"deleteGroup":"resetGroup",{groupId:f});}},R.getText(i?"delete_group":"reset_group"),[m,A.CANCEL]);});});},_modelLoaded:function(){this.bModelInitialized=true;L.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){if(!this.oDashboardUIActionsModule){this.oDashboardUIActionsModule=new D();}this.oDashboardUIActionsModule.initializeUIActions(this);},resizeHandler:function(){u.recalculateBottomSpace();u.handleTilesVisibility();if(E.last("AppRendered")!==undefined){E.emit("AppRendered",undefined);}if(L&&q("#dashboardGroups").is(":visible")&&this.bModelInitialized){L.reRenderGroupsLayout(null);this._initializeUIActions();}},_appOpenedHandler:function(s,e,o){var p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(o.additionalInformation&&o.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();}if(m.getProperty("/tileActionModeActive")&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_scrollToGroupByName:function(s,e,o){var g=this.getView().getModel().getProperty("/groups"),G=o.groupName;sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){g.forEach(function(f){if(l.getGroupTitle(f.object)===G){this._scrollToGroup(s,e,{groupId:f.groupId});}}.bind(this));}.bind(this));},_scrollToGroup:function(s,e,o){var g=o.group?o.group.getGroupId():o.groupId;var G;if(this.oView.oDashboardGroupsBox.getGroups()){G=this.oView.oDashboardGroupsBox.getGroups().reduce(function(i,j){return j&&j.getGroupId()===g?j:i;},null);}var f=G&&G.getDomRef();if(!f){return;}var h=f.querySelector(".sapUshellTileContainerContent");if(!h){return;}h.scrollIntoView();var p;if(a.system.desktop){p=d.getInstance().then(function(i){var j=G.$();if(o.restoreLastFocusedTile){var l=false;if(o.restoreLastFocusedTileContainerById){j=q("#"+o.restoreLastFocusedTileContainerById);l=true;}i.goToLastVisitedTile(j,l);}else if(o.groupChanged){var k=j.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(k.length){i.moveScrollDashboard(k);}}});}else{p=Promise.resolve();}p.then(function(){if(o.isInEditTitle){G.setEditMode(true);}u.handleTilesVisibility();});},_handleDrop:function(e,f){var l=L.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,o=sap.ui.getCore().getEventBus(),n,g,T,h=q.Deferred(),v=this.getView(),m=v.getModel(),j=m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs",k=m.getProperty("/tileActionModeActive"),I=true,p;if(!t.tile){o.publish("launchpad","sortableStop");return null;}L.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var s=t.dstGroup.getBindingContext(),w=s.getProperty(s.sPath).isGroupLocked;I=i&&w;}p=t.tile.getBindingContext().getObject().isLinkPersonalizationSupported;if(!t.tileMovedFlag||I||(!p&&t.dstArea==="links")){o.publish("launchpad","sortableStop");return null;}if(!k&&!j&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){o.publish("launchpad","sortableStop");return null;}n=true;g=true;if((t.srcGroup!==t.dstGroup)){n=g=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){g=false;}T=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation("tiles",t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,g);h=this._handleSameTypeDrop(t,T,S);}else if(i){h=this._handleShortDrop(t,T,S);}else{h=this._handleConvertDrop(t,S,f);}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true);}o.publish("launchpad","sortableStop");return h.promise();},_handleSameTypeDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),o=q.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+"/draggedInTabBarToSourceGroup",false);e.publish("launchpad","movetile",{sTileId:T,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){o.resolve();}});return o.promise();},_handleShortDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),o=q.Deferred();e.publish("launchpad","movetile",{sTileId:T,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){o.resolve();}});return o.promise();},_handleConvertDrop:function(t,s,e){var o=sap.ui.getCore().getEventBus(),f=q.Deferred();o.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(e.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){f.resolve();}});return f.promise();},_getTileUuid:function(t){if(t.getUuid){return t.getUuid();}var T=t.getBindingContext().getObject();if(T.getParent){return T.getParent().getUuid();}return T.uuid;},_handleDrag:function(e,f){var t=L.getLayoutEngine().layoutEndCallback(),T=t.tile.getBindingContext().getObject(),m=this.getView().getModel();if(m){m.setProperty("/draggedTileLinkPersonalizationSupported",T.isLinkPersonalizationSupported);}},_handleTabBarItemPressEventHandler:function(s,e,o){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=o.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(s,e,G);},_handleTabBarItemPress:function(s,e,g,o){var v=this.getView(),f,h;if(o){f=o.getParameter("group").getIndex();}else{f=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:f});h=this._getVisibleGroupIndex(f);v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(h);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){u.handleTilesVisibility();},0);},_getVisibleGroupIndex:function(s){var g=this.getView().getModel().getProperty("/groups");var h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}return s-h;},_getModelGroupFromVisibleIndex:function(s){var g=this.getView().getModel().getProperty("/groups"),v=0;for(var i=0;i<g.length;i++){if(g[i].isGroupVisible&&g[i].visibilityModes[0]){v++;if(v>s){return i;}}}return 0;},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups");if(a.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}for(var i=0;i<g.length;i++){if(m.getProperty("/groups/"+i+"/isGroupSelected")===true){m.setProperty("/groups/"+i+"/isGroupSelected",false);}}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new F("isGroupVisible",b.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(o){var i,p=o.getSource().getBindingContext().getPath(),e=p.split("/");i=window.parseInt(e[e.length-1],10);if(o.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true});},_publishAsync:function(s,e,o){var B=sap.ui.getCore().getEventBus();window.setTimeout(q.proxy(B.publish,B,s,e,o),1);},_changeGroupVisibility:function(g){var B=g.getPath(),m=g.getModel(),G=m.getProperty(B+"/isGroupVisible");if(m.getProperty(B+"/isDefaultGroup")||m.getProperty(B+"/isGroupLocked")){return;}m.setProperty(B+"/isGroupVisible",!G);},_handleGroupVisibilityChanges:function(s,e,o){var m=this.getView().getModel(),h=sap.ushell.components.getHomepageManager(),f=h.getCurrentHiddenGroupIds(m),S=f.length===o.length,i=S,p;f.some(function(H,I){if(!i){return true;}i=o&&Array.prototype.indexOf.call(o,H)!==-1;return!i;});if(!i){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){p=l.hideGroups(f);p.done(function(){m.updateBindings("groups");});p.fail(function(){sap.ushell.Container.getServiceAsync("Message").then(function(g){g.error(r.i18n.getText("hideGroups_error"));});});});}window.setTimeout(function(){u.recalculateBottomSpace();},0);},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel(),i;var g=m.getProperty("/groups");for(i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.adjustItemSelection();m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();var G=m.getProperty("/homePageGroupDisplay");if(G&&G==="tabs"){v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);var n=v.oDashboardGroupsBox.getGroups&&v.oDashboardGroupsBox.getGroups();var o=Array.isArray(n)&&n[0];if(o&&o.updateLinks){o.updateLinks();}}},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});});
sap.ui.predefine('sap/ushell/components/homepage/DashboardContent.view',["sap/ui/thirdparty/jquery","sap/m/library","sap/m/Page","sap/ui/core/AccessibleLandmarkRole","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/Filter","sap/ushell/components/homepage/DashboardGroupsBox","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/AnchorItem","sap/ushell/ui/launchpad/AnchorNavigationBar","sap/ushell/utils","sap/ui/core/Component","sap/ui/model/FilterOperator","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/m/MessageStrip","sap/ushell/components/ComponentKeysHandler"],function(q,m,P,A,V,D,F,a,C,E,r,b,c,u,d,e,f,M,g){"use strict";sap.ui.jsview("sap.ushell.components.homepage.DashboardContent",{createContent:function(o){this.oModel=this.getModel();var h=this.oModel.getProperty("/personalization"),i=this.oModel.getProperty("/enableTileActionsIcon");this.isCombi=D.system.combi;this.isTouch=this.isCombi?false:(D.system.phone||D.system.tablet);this.parentComponent=d.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.bIsHomeIntentRootIntent=u.isFlpHomeIntent(this.oRenderer.getShellConfig().rootIntent);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRefresh",this._onDashboardShown,this);sap.ui.getCore().getEventBus().subscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this);this.oDoable=E.once("CoreResourcesComplementLoaded").do(function(){this.oAnchorNavigationBar.setOverflowEnabled(true);if(h||i){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(l){l.init(this.oModel);}.bind(this));}if(h){this._createFooter();this._createActionModeButton();}}.bind(this));this.oFilterSelectedGroup=new F("isGroupSelected",e.EQ,true);this.oRenderer.getRouter().getRoute("home").attachMatched(this._onHomeNavigation,this);this.oAnchorNavigationBar=this._getAnchorNavigationBar(o);var p=[];if(C.last("/core/home/gridContainer")){var j=new M({type:"Warning",text:r.i18n.getText("gridModeWarning"),showIcon:true,showCloseButton:true});j.addStyleClass("sapUiMediumMarginBeginEnd");j.addStyleClass("sapUiMediumMarginTopBottom");p.push(j);}var k=new a();this.oDashboardGroupsBox=k.createGroupsBox(o,this.oModel);p.push(this.oDashboardGroupsBox);this.oPage=new P("sapUshellDashboardPage",{customHeader:this.oAnchorNavigationBar,landmarkInfo:{headerRole:A.Navigation,headerLabel:r.i18n.getText("Dashboard.Page.Header.AriaLabel"),contentRole:sap.ui.core.AccessibleLandmarkRole.Region,contentLabel:r.i18n.getText("Dashboard.Page.Content.AriaLabel"),rootRole:A.None},floatingFooter:true,content:p});this.oPage.addEventDelegate({onAfterRendering:function(){var l=this.getDomRef(),s=l.getElementsByTagName("section");q(s[0]).off("scrollstop",o.handleDashboardScroll);q(s[0]).on("scrollstop",o.handleDashboardScroll);}.bind(this)});return this.oPage;},getAnchorItemTemplate:function(){var t=this;var o=new b({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",helpId:"{helpId}",selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(h,i,v){if(!v[h?1:0]){return false;}return i||h;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:["isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(i,I,s){return i&&I&&s==="tabs";}},press:function(h){t.oAnchorNavigationBar.handleAnchorItemPress(h);}});o.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility();}.bind(this.oAnchorNavigationBar));return o;},_getAnchorNavigationBar:function(o){var h=new c("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(i){this._handleAnchorItemPress(i);},o],overflowEnabled:false});if(D.system.desktop){g.getInstance().then(function(i){h.addEventDelegate({onBeforeFastNavigationFocus:function(j){if(q(".sapUshellAnchorItem").is(":visible")){j.preventDefault();i.goToSelectedAnchorNavigationItem();}},onsapenter:function(j){j.srcControl.getDomRef().click();},onsapspace:function(j){j.srcControl.getDomRef().click();}});});}h.addStyleClass("sapContrastPlus");return h;},_actionModeButtonPress:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var h=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",h);this._updateAnchorNavigationBarVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){var G=this.oModel.getProperty("/groups"),s;for(var i=0;i<G.length;i++){if(G[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return G[s].groupId;}},groupChanged:false,focus:true});}else{this.getController()._deactivateActionModeInTabsState();}}},_createActionModeButton:function(){var o={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),tooltip:r.i18n.getText("activateEditMode"),icon:"sap-icon://edit",press:this._actionModeButtonPress.bind(this)};var h=this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader;if(h){this._createActionModeButtonInHeader(o);}else{this._createActionModeButtonInUserMenu(o);}},_createActionModeButtonInHeader:function(o){sap.ui.require(["sap/ushell/ui/shell/ShellHeadItem"],function(S){this.oTileActionsButton=new S(o);if(C.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn");}if(!this.bIsHomeIntentRootIntent){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true);}else{this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),false,["home"]);}}.bind(this));},_createActionModeButtonInUserMenu:function(o){var h={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:o,bIsVisible:true,aStates:["home"]};if(!this.bIsHomeIntentRootIntent){h.aStates=null;h.bCurrentState=true;}this.oRenderer.addUserAction(h).done(function(i){this.oTileActionsButton=i;if(C.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn");}}.bind(this));},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass("sapUshellAcionItemActive");}},_createFooter:function(){sap.ui.require(["sap/m/Bar","sap/m/Button","sap/m/ToolbarSpacer"],function(B,h,T){var o=new B("sapUshellDashboardFooter",{visible:"{/tileActionModeActive}",contentRight:[new T()]});var i=new h("sapUshellDashboardFooterDoneBtn",{type:m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),tooltip:r.i18n.getText("exitEditMode"),press:this._actionModeButtonPress.bind(this)});if(D.system.desktop){g.getInstance().then(function(j){i.addEventDelegate({onsapskipforward:function(k){k.preventDefault();f.setIsFocusHandledByAnotherHandler(true);f.sendFocusBackToShell(k);},onsapskipback:function(k){k.preventDefault();f.setIsFocusHandledByAnotherHandler(true);j.goToFirstVisibleTileContainer();},onsaptabprevious:function(k){k.preventDefault();f.setIsFocusHandledByAnotherHandler(true);j.goToFirstVisibleTileContainer();},onsaptabnext:function(k){k.preventDefault();f.setIsFocusHandledByAnotherHandler(true);f.sendFocusBackToShell(k);}});});}o.addContentRight(i);this.oPage.setFooter(o);}.bind(this));},_onDashboardShown:function(){var i=this.oRenderer&&this.oRenderer.getCurrentCoreView()==="home";if(i){if(!D.system.phone){this.oRenderer.showRightFloatingContainer(false);}this._updateAnchorNavigationBarVisibility();this.getController().resizeHandler();u.refreshTiles();if(D.system.desktop){g.getInstance().then(function(h){h.goToTileContainer();});}if(E.last("firstSegmentCompleteLoaded")){E.emit("CloseFesrRecord",Date.now());}}},_onHomeNavigation:function(){this._onDashboardShown();if(!this.bIsHomeIntentRootIntent){if(this.oRenderer.getShellConfig().moveEditHomePageActionToShellHeader){this.oRenderer.showHeaderEndItem(this.oTileActionsButton.getId(),true);}else{this.oRenderer.showActionButton(this.oTileActionsButton.getId(),true);}}},_updateAnchorNavigationBarVisibility:function(){var o=this.oPage.getShowHeader(),h=this.getModel().getObject("/tileActionModeActive"),v=this.getModel().getProperty("/groups").filter(function(k){if(h){return k.isGroupVisible&&k.visibilityModes[1];}else{return k.isGroupVisible&&k.visibilityModes[0];}}),j=v.length>1;this.oPage.setShowHeader(j);if(j&&!o){var G=this.getModel().getProperty("/groups"),s=this.getModel().getProperty("/iSelectedGroup");for(var i=0;i<v.length;i++){if(v[i].getGroupId&&v[i].getGroupId()===G[s].groupId){this.oAnchorNavigationBar.setSelectedItemIndex(i);break;}}}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent";},exit:function(){V.prototype.exit.apply(this,arguments);if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();this.oAnchorNavigationBar.destroy();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}if(this.oDoable){this.oDoable.off();}if(this.oDoneBtnLabel){this.oDoneBtnLabel.destroy();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._onDashboardShown,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","dashboardModelContentLoaded",this._onDashboardShown,this);}});},false);
sap.ui.predefine('sap/ushell/components/homepage/DashboardGroupsBox',["sap/ushell/Layout","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/Config","sap/ushell/EventHub","sap/ui/core/Component","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/m/GenericTile","sap/ui/Device","sap/ushell/ui/launchpad/PlusTile","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainer","sap/ushell/ui/launchpad/LinkTileWrapper","sap/m/Button","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/GroupHeaderActions","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/base/util/restricted/_zipObject","sap/ushell/components/ComponentKeysHandler"],function(L,b,F,a,c,D,C,E,d,I,e,G,f,P,r,T,g,B,A,h,j,q,M,k,_,l){"use strict";var m=e.InvisibleMessageMode;
var n=b.extend("sap.ushell.components.homepage.DashboardGroupsBox",{
metadata:{publicMethods:["createGroupsBox"]},
constructor:function(){if(sap.ushell.components.homepage.getDashboardGroupsBox&&sap.ushell.components.homepage.getDashboardGroupsBox()){return sap.ushell.components.homepage.getDashboardGroupsBox();}sap.ushell.components.homepage.getDashboardGroupsBox=(function(v){return function(){return v;};}(this.getInterface()));this.oController=undefined;this.oGroupsContainer=undefined;this._oInvisibleMessageInstance=I.getInstance();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);return undefined;},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);if(this.oGroupsContainer){this.oGroupsContainer.destroy();}sap.ushell.components.homepage.getDashboardGroupsBox=undefined;},
calculateFilter:function(){var i=[];var o;var s=this.oModel.getProperty("/homePageGroupDisplay"),p=this.oModel.getProperty("/tileActionModeActive");if(!p){if(s&&s==="tabs"){o=new F("isGroupSelected",a.EQ,true);}else{o=new F("isGroupVisible",a.EQ,true);}i.push(o);}return i;},
zipPromiseAll:function(p,i){return Promise.all(i).then(function(R){return _(p,R);});},
loadCardModuleIfNeeded:function(){var t=this;if(C.last("/core/home/featuredGroup/enable")){return sap.ui.getCore().loadLibrary("sap.ui.integration",{async:true}).then(function(){return new Promise(function(i){sap.ui.require(["sap/ui/integration/widgets/Card"],function(o){t.Card=o;i();});});});}return Promise.resolve();},
createGroupsBox:function(o,i){this.oController=o;var t=this,p,s,u=function(x){var y,z;if(x&&(y=x.getDomRef())){z=y.querySelector(".sapUshellPlusTile");if(z){return z;}}return null;},v=function(x){var y=u(x.currentGroup),z=u(x.endGroup),H=(x.tiles[x.tiles.length-2]===x.item)||(x.endGroup.getTiles().length===0);if(H){t._hidePlusTile(z);}else{t._showPlusTile(z);}if(x.currentGroup!==x.endGroup){t._showPlusTile(y);}};p=function(){L.getLayoutEngine().setExcludedControl(P);L.getLayoutEngine().setReorderTilesCallback.call(L.layoutEngine,v);};s=function(){if(!L.isInited){L.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t)}).done(p);f.media.attachHandler(function(){if(!this.bIsDestroyed){L.reRenderGroupsLayout(null);}},this,f.media.RANGESETS.SAP_STANDARD);var x=this.getDomRef();o.getView().sDashboardGroupsWrapperId=!j(x)&&x.parentNode?x.parentNode.id:"";}E.emit("CenterViewPointContentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");if(this.getBinding("groups")){this.getBinding("groups").filter(t.calculateFilter());}};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oModel=i;var w=this.calculateFilter(),U=C.last("/core/home/gridContainer");this.oGroupsContainer=new D("dashboardGroups",{displayMode:"{/homePageGroupDisplay}",afterRendering:s});this.zipPromiseAll(["launchpadService",""],[sap.ushell.Container.getServiceAsync("LaunchPage"),t.loadCardModuleIfNeeded()]).then(function(R){this.isLinkPersonalizationSupported=R.launchpadService.isLinkPersonalizationSupported();if(U){sap.ui.require(["sap/ushell/ui/launchpad/GridContainer"],function(){t.oGroupsContainer.bindAggregation("groups",{filters:w,path:"/groups",factory:function(){var S=C.last("/core/home/sizeBehavior");var x=t._createGridContainer(o,i);x.setTileSizeBehavior(S);return x;}});});C.on("/core/home/sizeBehavior").do(function(x){t.oGroupsContainer.getAggregation("groups").forEach(function(y){y.setTileSizeBehavior(x);});});}else{this.oGroupsContainer.bindAggregation("groups",{filters:w,path:"/groups",factory:function(){return t._createTileContainer(o,i);}});}}.bind(this));if(f.system.desktop){l.getInstance().then(function(x){this.ComponentKeysHandlerInstance=x;this.oGroupsContainer.addEventDelegate({onBeforeFastNavigationFocus:this._handleBeforeFastNavigationFocus.bind(this),onsapskipback:this._handleSkip.bind(this,false),onsapskipforward:this._handleSkip.bind(this,true),onsaptabnext:function(y){if(t.oModel.getProperty("/tileActionModeActive")){if(q(document.activeElement).closest(".sapUshellTileContainerHeader").length){var z=q(document.activeElement).closest(".sapUshellTileContainer");var H=q(document.activeElement).hasClass("sapUshellContainerTitle");var J=z.find(".sapUshellHeaderActionButton");if(H&&!J.length||document.activeElement.id===J.last()[0].id){if(z.find(".sapUshellTile, .sapUshellLink, .sapFCard").is(":visible")){y.preventDefault();x.goToLastVisitedTile(z,true);return;}}if(J.length&&document.activeElement.id!==J.last()[0].id){return;}}var K=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(K){y.preventDefault();K.focus();return;}}y.preventDefault();if(q("#sapUshellFloatingContainerWrapper").is(":visible")&&(y.originalEvent.srcElement.id)!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{k.setIsFocusHandledByAnotherHandler(true);k.sendFocusBackToShell(y);}},onsaptabprevious:function(y){k.setIsFocusHandledByAnotherHandler(true);var z=q(":focus");if(t.oModel.getProperty("/tileActionModeActive")&&!z.hasClass("sapUshellTileContainerHeader")){var H=q(document.activeElement);if(H.hasClass("sapUshellTile")||H.hasClass("sapFCard")){y.preventDefault();var J=H.closest(".sapUshellTileContainer");var K=J.find(".sapUshellHeaderActionButton").filter(":visible").last();if(K.length>0){K.focus();}else{J.find(".sapUshellContainerTitle").focus();}}}}});}.bind(this));}return this.oGroupsContainer;},
_handleSkip:function(i,o){var p=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(p){if(p===document.activeElement&&!i){o.preventDefault();this.ComponentKeysHandlerInstance.goToTileContainer();}else if(p!==document.activeElement&&i){o.preventDefault();p.focus();}}},
_handleBeforeFastNavigationFocus:function(o){o.preventDefault();var i=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(i&&!o.forward){i.focus();}else{this.ComponentKeysHandlerInstance.goToTileContainer();}},
getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},
_createTileContainer:function(o){var t=this,i=new F("isTileIntentSupported",a.EQ,true),p=new T({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(s,u,v,w,x){if(u){return true;}else if(v){return false;}return s||w&&x==="tabs";}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(s){return s&&!this.getDefaultGroup();}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(s,u){return(this.getIsGroupLocked()&&(s||u));}},deluminate:{parts:["/isInDrag"],formatter:function(s){return this.getIsGroupLocked()&&s;}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(s,u){return s&&!u;}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",enableHelp:C.last("/core/extension/enableHelp"),groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(s){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:s.getSource().getGroupId(),newTitle:s.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(s,u,v){return u&&v==="tabs"&&!s;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(s){return s&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(s,u,v){if(!v[s?1:0]){return false;}return u||s;}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(s,u){return s&&!u;}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(s){t._handleAddTileToGroup(s);}});return p;},
_createGridContainer:function(o){var i=sap.ui.require("sap/ushell/ui/launchpad/GridContainer"),p=new F("isTileIntentSupported",a.EQ,true);return new i({groupId:"{groupId}",showHeader:true,defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",headerText:"{title}",showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,s,v){if(!v[t?1:0]){return false;}return s||t;}},isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",editMode:"{editMode}",showBackground:"{/tileActionModeActive}",showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(s,t){return(this.getIsGroupLocked()&&(s||t));}},tileActionModeActive:"{/tileActionModeActive}",supportLinkPersonalization:this.isLinkPersonalizationSupported,enableHelp:C.last("/core/extension/enableHelp"),showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(s,t,u){return t&&u==="tabs"&&!s;}},showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(t,s,u,v,w){if(s){return true;}else if(u){return false;}return t||v&&w==="tabs";}},titleChange:function(s){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:s.getSource().getGroupId(),newTitle:s.getParameter("newTitle")});},tooltip:"{title}",links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[p]}});},
_getLinkTemplate:function(){var o=new F("isTileIntentSupported",a.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new g({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(i,p){return p.getObject();}},afterRendering:function(i){var p=q(this.getDomRef().getElementsByTagName("a"));p.attr("tabindex",-1);}}),filters:[o]};}return{path:"links",factory:function(i,p){var s=p.getObject().content[0];if(s&&s.bIsDestroyed){s=s.clone();p.getModel().setProperty(p.getPath()+"/content/0",s);}return s;},filters:[o]};},
_createCard:function(o){return new this.Card({manifest:o});},
_itemFactory:function(i,o){var t=o.getProperty(o.sPath),p,s,u,v;if(t){if(t.isCard){p=t&&t.content;s=p&&p.length&&p[0];if(s&&s["sap.card"]){v=s;}else if(t.manifest){v={"sap.flp":t.manifest&&t.manifest["sap.flp"],"sap.card":{"type":"List"}};}else{return this._createErrorTile();}u=this._createCard(v);}else{u=this._createTile();}t.controlId=u&&u.getId&&u.getId();}return u;},
_createErrorTile:function(){return new c({tileViews:{path:"content",factory:function(){return new G({state:"Failed"});}}});},
_createTile:function(){var t=new c({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",debugInfo:"{debugInfo}",tileViews:{path:"content",factory:function(i,o){return o.getObject();}},coverDivPress:function(o){if(!o.oSource.getBindingContext().getObject().tileIsBeingMoved&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},showActions:function(o){if(sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},deletePress:[this.oController._dashboardDeleteTileHandler,this.oController],press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(){M.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");M.start("FLP:OpenApplicationonClick","Open Application","FLP");function i(){M.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(i);}v.attachAfterNavigate(i);}});return t;},
_updateGroupHeaderVisibility:function(){var o=this.oGroupsContainer.getGroups(),p=this.oModel.getProperty("/tileActionModeActive"),s=this.oController.getView().oPage.getShowHeader(),t,v=0;for(var i=0;i<o.length;i++){if(o[i].getProperty("visible")){v++;if(t===undefined){t=i;}else{o[i].setShowGroupHeader(true);}}}if(t!==undefined){var V=p||(v===1&&!s);o[t].setShowGroupHeader(V);}},
_handleActionModeChange:function(){var i=this.oModel.getProperty("/tileActionModeActive");if(i){this._addTileContainersContent();}else{L.reRenderGroupsLayout(null);}},
_addTileContainersContent:function(){var o=this.oGroupsContainer.getGroups();for(var i=0;i<o.length;i++){var p=o[i];if(!p.getBeforeContent().length){p.addBeforeContent(this._getBeforeContent());}if(!p.getAfterContent().length){p.addAfterContent(this._getAfterContent());}if(!p.getHeaderActions().length){p.addHeaderAction(this._getGroupHeaderAction());}}},
_handleAddGroupButtonPress:function(o){this.oController._addGroupHandler(o);this._addTileContainersContent();},
_getBeforeContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]});o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));return o;},
_getAfterContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));return o;},
_getGroupHeaderAction:function(){return new h({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel");},
_getHeaderActions:function(){var H=[];if(C.last("/core/home/gridContainer")){var o=new B({text:r.i18n.getText("AddTileBtn"),visible:"{= !${isGroupLocked}}",enabled:"{= !${/editTitle}}",press:this._handleAddTileToGroup.bind(this)}).addStyleClass("sapUshellHeaderActionButton");if(f.system.phone){o.setIcon("sap-icon://add");}H.push(o);}H.push(new B({text:{path:"isGroupVisible",formatter:function(i){return r.i18n.getText(i?"HideGroupBtn":"ShowGroupBtn");}},icon:{path:"isGroupVisible",formatter:function(i){if(f.system.phone){return i?"sap-icon://hide":"sap-icon://show";}return"";}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),p=s.getBindingContext(),t=p.getModel(),u=p.getPath(),v=t.getProperty(u+"/isGroupVisible");var w=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([r.i18n.getText(v?"Group.nowBeingHidden":"Group.nowBeingShown"),r.i18n.getText("Section.ButtonLabelChanged"),r.i18n.getText(v?"ShowGroupBtn":"HideGroupBtn"),w.getText("ACC_CTR_TYPE_BUTTON")].join(" "),m.Polite);this.oController._changeGroupVisibility(p);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));H.push(new B({text:{path:"removable",formatter:function(i){return r.i18n.getText(i?"DeleteGroupBtn":"ResetGroupBtn");}},icon:{path:"removable",formatter:function(i){if(f.system.phone){return i?"sap-icon://delete":"sap-icon://refresh";}return"";}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),p=s.getBindingContext();this.oController._handleGroupDeletion(p);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return H;},
_handleAddTileToGroup:function(o){if(document.toDetail){document.toDetail();}d.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(o.getSource().getBindingContext().sPath)})});},
_hidePlusTile:function(p){if(p){p.classList.add("sapUshellHidePlusTile");}},
_showPlusTile:function(p){if(p){p.classList.remove("sapUshellHidePlusTile");}}
});
return n;});
sap.ui.predefine('sap/ushell/components/homepage/DashboardUIActions',["sap/ui/base/Object","sap/ushell/Layout","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/Log"],function(b,L,D,q,a){"use strict";
var c=b.extend("sap.ushell.components.homepage.DashboardUIActions",{
metadata:{publicMethods:["initializeUIActions"]},
constructor:function(){this.aTabBarItemsLocation=[];if(sap.ushell.components.homepage.getDashboardUIActions&&sap.ushell.components.homepage.getDashboardUIActions()){return sap.ushell.components.homepage.getDashboardUIActions();}sap.ushell.components.homepage.getDashboardUIActions=(function(v){return function(){return v;};}(this.getInterface()));this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);},
destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);sap.ushell.components.homepage.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},
initializeUIActions:function(C){this.oController=C;if(C.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var p=q("#sapUshellDashboardPage").width();var d=C.getView().sDashboardGroupsWrapperId,A,r=sap.ui.getCore().getConfiguration().getRTL(),o={containerSelector:"#dashboardGroups",wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},e=q.extend(true,{},o,{switchModeDelay:1000,isTouch:C.getView().isTouch,isCombi:C.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"};if(C.getView().oDashboardGroupsBox.getGroups().length){if(C.getView().getModel().getProperty("/personalization")){sap.ui.require(["sap/ushell/UIActions"],function(U){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(f){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(q.extend(true,{},e,t)).enable();this.oGroupUIActions=new U(q.extend(true,{},e,g));if(f.isLinkPersonalizationSupported()){this.oLinkUIActions=new U(q.extend(true,{},e,l)).enable();}A=C.getView().getModel().getProperty("/tileActionModeActive");if(A){this.oGroupUIActions.enable();}}.bind(this));}.bind(this));}}},
_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},
disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},
_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},
_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},
_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},
_handleTileDragMove:function(d){if(!d.isScrolling){L.getLayoutEngine().moveDraggable(d.moveX,d.moveY,this.aTabBarItemsLocation);}},
_handleTileDragAndScrollContinuation:function(m){var A=q("#anchorNavigationBar").offset(),i=A?A.top:0;if(m<i){L.getLayoutEngine()._cancelLongDropTimmer();}return L.getLayoutEngine()._isTabBarCollision(m);},
_fillTabBarItemsArray:function(){var i=q(".sapUshellAnchorItem"),l=i.length,d,B=10,t=0,T,e=[],I,o,f,n;for(d=0;d<l;d++){I=i[d];o=I.getBoundingClientRect();e[d]=o.width;}for(d=0;d<l;d++){f=e[d];if(f===0){continue;}n=Math.round(f/B);for(T=t;T<t+n;T++){this.aTabBarItemsLocation[T]=d;}t=T;}},
_handleTileUIStart:function(e,u){if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},
_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},
_handleStartDragTile:function(e,t){this._preventTextSelection();L.getLayoutEngine().layoutStartCallback(t);L.initDragMode();q(t).find("a").removeAttr("href");this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},
_onBeforeCreateLinkClone:function(e,d){L.getLayoutEngine().saveLinkBoundingRects(d);},
_handleLinkDrop:function(e,t,A){var d=q.Deferred(),p;if(L.isTabBarActive()){L.tabBarTileDropped();}if(A&&A.clone){q(A.clone).css({opacity:0});}if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}if(L.getLayoutEngine().isLinkIntersected()||L.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");setTimeout(function(){d.resolve();},0);});}else{setTimeout(function(){d.resolve();},0);}return d.promise();},
_handleTileDrop:function(e,t,A){if(L.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,A);}return this._handleTileToTileDrop(e,t,A);},
_handleTileToLinkDrop:function(e,t,A){return this._handleLinkDrop(e,t,A);},
_handleTileToTileDrop:function(e,t,A){var C,h,T,d=function(e,t){L.endDragMode();q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}};h=q(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=q(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(L.isTabBarActive()){L.tabBarTileDropped();}var o;if(L.isTabBarActive()&&L.isOnTabBarElement()){if(A&&A.clone){o=q.Deferred();C=q(A.clone);C.css("display","none");setTimeout(function(){o.resolve();d.call(this,e,t);}.bind(this),0);return o.promise();}d.apply(this,arguments);}if(A&&A.clone){o=q.Deferred();C=q(A.clone);setTimeout(function(){o.resolve();d.call(this,e,t);}.bind(this),0);return o.promise();}setTimeout(function(){d.call(this,e,t);}.bind(this),0);},
_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},
_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",true);}},
_endUIHandler:function(){L.endDragMode();if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",false);}},
_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=q(".sapUshellDashboardGroupsContainerItem-clone"),d=g.find(".sapUshellContainerTitle"),t=d.height(),f=d.width(),h,i,j,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!D.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?q("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+f:this.oGroupUIActions.getMove().x-(f/2)});q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{q(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}q(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");q(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty("/isInDrag",true);q(u).attr("startPos",q(u).index());a.info("startPos - "+q(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);h=q("#dashboardGroups").offset().top;i=q(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;j=q(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=i-h-j;q(".sapUshellDashboardView section").css({scrollTop:s});},
_handleGroupsUIStart:function(e,u){q(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},
_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),Q=q(u),f=q(Q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=Q.index();Q.startPos=window.parseInt(Q.attr("startPos"),10);d.removeAggregation("groups",g,true);d.insertAggregation("groups",g,n,true);this._handleGroupMoved(e,{item:Q});Q.removeAttr("startPos");sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){q(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(q.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},
_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty("/isInDrag",false);},100);}},
_setController:function(C){this.oController=C;}
});
return c;});
sap.ui.predefine('sap/ushell/components/homepage/FLPAnalytics',["sap/ushell/services/AppConfiguration","sap/base/Log","sap/ui/thirdparty/jquery"],function(A,L,q){"use strict";var o=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};
function _(c,d,f){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(c,d,f);});}
function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}
function a(c){try{var d=(new Date()-l[c].startTime)/1000;var f=l[c].title;_("FLP: Time in Application (sec)",d,[f]);}catch(e){L.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics");}}
function h(c,d,D){var f=hasher.getHash(),g;window.swa.custom1={ref:f};switch(d){case"appOpened":s(f);_("FLP: Application Opened","Direct Launch",[l[f].title]);E.unsubscribe("sap.ushell","appOpened",h);break;case"bookmarkTileAdded":g=window.document.title;_("FLP: Personalization","Save as Tile",[g,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:g]);break;case"actionModeActive":_("FLP: Personalization","Enter Action Mode",[D.source]);break;case"catalogTileClick":_("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":_("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":_("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}
function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};_("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}
q(window).on("unload",function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId("viewPortContainer").attachAfterNavigate(b,t);}catch(e){L.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(i){E.subscribe("launchpad",i,h,t);});E.subscribe("sap.ushell","appOpened",h,t);});
sap.ui.predefine('sap/ushell/components/pages/ActionMode',["sap/ui/core/library","sap/m/MessageBox","sap/m/MessageToast","sap/ushell/resources","sap/ushell/EventHub","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(c,M,a,r,E,L,A){"use strict";var b={};
b.start=function(C){this.oController=C;C.getView().getModel("viewSettings").setProperty("/actionModeActive",true);C.handleMyHomeActionMode(true).catch(C._onError.bind(C));E.emit("enableMenuBarNavigation",false);var o=sap.ui.getCore().byId("ActionModeBtn");this.sActionButtonActivateText=o.getText();var s=r.i18n.getText("PageRuntime.EditMode.Exit");o.setTooltip(s);o.setText(s);A.attachEvent("editModeDone",this.save,this);};
b.cancel=function(){this._cleanup();};
b.save=function(){L.info("store actions in pages service");this._cleanup();};
b._cleanup=function(){this.oController.getView().getModel("viewSettings").setProperty("/actionModeActive",false);this.oController.handleMyHomeActionMode(false).catch(this.oController._onError.bind(this.oController));E.emit("enableMenuBarNavigation",true);var o=sap.ui.getCore().byId("ActionModeBtn");o.setTooltip(this.sActionButtonActivateText);o.setText(this.sActionButtonActivateText);A.detachEvent("editModeDone",this.save,this);};
b.addVisualization=function(e,s){var m=s.getBindingContext().getModel();var p=s.getBindingContext().getPath();var P=p.split("/");var i=parseInt(P[2],10);var d=m.getProperty("/pages/"+i+"/id");var S=m.getProperty(p+"/id");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(C){var f="Shell-appfinder?&/catalog/"+JSON.stringify({pageID:encodeURIComponent(d),sectionID:encodeURIComponent(S)});C.toExternal({target:{shellHash:f}});});};
b.addSection=function(e,s,p){var S=p.index;var P=s.getBindingContext().getPath();var d=P.split("/");var i=parseInt(d[2],10);return this.oController.getOwnerComponent().getPagesService().then(function(o){o.addSection(i,S);var D={onAfterRendering:function(){setTimeout(function(){s.getSections()[S].byId("title-edit").focus();},0);s.removeEventDelegate(D);}};s.addEventDelegate(D);});};
b.deleteSection=function(e,s){return sap.ushell.Container.getServiceAsync("Message").then(function(m){var t=s.getTitle();var d=t?r.i18n.getText("PageRuntime.Message.Section.Delete",t):r.i18n.getText("PageRuntime.Message.Section.DeleteNoTitle");var f=r.i18n.getText("PageRuntime.Dialog.Title.Delete");function C(o){if(o===M.Action.DELETE){this.oController.getOwnerComponent().getPagesService().then(function(p){var P=s.getBindingContext().getPath(),g=s.getParent(),h=P.split("/"),i=parseInt(h[2],10),S=parseInt(h[4],10);p.deleteSection(i,S);a.show(r.i18n.getText("PageRuntime.MessageToast.SectionDeleted"));var j=g.getSections();if(j.length){var k=j[S!==0?S-1:S];k.focus();var l={onAfterRendering:function(){k.focus();k.removeEventDelegate(l);}};k.addEventDelegate(l);}else{var n={onAfterRendering:function(){g.focus();g.removeEventDelegate(n);}};g.addEventDelegate(n);}});}}m.confirm(d,C.bind(this),f,[M.Action.DELETE,M.Action.CANCEL]);}.bind(this));};
b.resetSection=function(e,s){var p=s.getBindingContext().getPath();var P=p.split("/");var i=parseInt(P[2],10);var S=parseInt(P[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(o){o.resetSection(i,S);a.show(r.i18n.getText("PageRuntime.MessageToast.SectionReset"));});};
b.changeSectionTitle=function(e,s,p){var P=s.getBindingContext().getPath();var n=s.getProperty("title");var d=P.split("/");var i=parseInt(d[2],10);var S=parseInt(d[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(o){o.renameSection(i,S,n);});};
b.moveSection=function(e,s,p){var S=p.draggedControl.getBindingContext().getPath();var t=p.droppedControl.getBindingContext().getPath();var d=p.dropPosition;var T=t.split("/");var f=S.split("/");var P=parseInt(f[2],10);var i=parseInt(f[4],10);var g=parseInt(T[4],10);if(i===g-1&&d==="Before"||i===g+1&&d==="After"){return Promise.resolve();}if(d==="After"){g=g+1;}var C=this.oController.getOwnerComponent();return C.getPagesService().then(function(o){return o.moveSection(P,i,g);}).then(function(){s.announceMove();});};
b.changeSectionVisibility=function(e,s,p){if(this.oController===undefined||p.visible===undefined){return Promise.resolve();}var P=s.getBindingContext().getPath();var v=p.visible;var d=P.split("/");var i=parseInt(d[2],10);var S=parseInt(d[4],10);return this.oController.getOwnerComponent().getPagesService().then(function(o){o.setSectionVisibility(i,S,v);});};
return b;});
sap.ui.predefine('sap/ushell/components/pages/Component',["sap/ui/core/InvisibleMessage","sap/ui/core/UIComponent","sap/ushell/components/SharedComponentUtils","sap/ushell/resources"],function(I,U,S,r){"use strict";return U.extend("sap.ushell.components.pages.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){U.prototype.init.apply(this,arguments);S.toggleUserActivityLog();S.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");this.setModel(r.i18nModel,"i18n");this._oPagesService=sap.ushell.Container.getServiceAsync("Pages");this._oInvisibleMessageInstance=I.getInstance();},getPagesService:function(){return this._oPagesService;},getInvisibleMessageInstance:function(){return this._oInvisibleMessageInstance;},getComponentData:function(){return{};}});});
sap.ui.predefine('sap/ushell/components/pages/MyHomeImport',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils/HttpClient","sap/base/util/ObjectPath"],function(E,C,H,O){"use strict";var M={};var d="/UI2/Fiori2LaunchpadHome";
M.getData=function(){if(!this.oPageSetPromise){this.oPageSetPromise=new Promise(function(r,a){var R="PageSets('%2FUI2%2FFiori2LaunchpadHome')"+"?$expand=Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties"+"&$format=json";var h={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"",Accept:"application/json, text/plain"};var s=sap.ushell.Container.getUser().getLanguage();if(s){h["sap-language"]=s;}var S=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";if(S){h["sap-client"]=S;}var o=(window["sap-ushell-config"].services&&window["sap-ushell-config"].services.PageBuilding)||{};var b=(O.get("config.services.pageBuilding.baseUrl",o.adapter)||"").replace(/\/?$/,"/");var c=new H(b,{headers:h});c.get(R).then(function(e){r(this.parseData.bind(this)(e));}.bind(this)).catch(a);}.bind(this));}return this.oPageSetPromise;};
M.isImportEnabled=function(){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){var U=u.getUser();var i=U.getImportBookmarksFlag();switch(i){case"done":case"dismissed":case"not_required":return false;case null:return this.getData().then(function(g){var I=!!(g.length);var s=I?"pending":"not_required";U.setImportBookmarksFlag(s);u.updateUserPreferences();U.resetChangedProperty("importBookmarks");return I;});default:return true;}}.bind(this));};
M.parseData=function(r){try{var p=JSON.parse(r.responseText);if(p&&p.d){p=p.d;}var c=p.configuration&&JSON.parse(p.configuration)||{};var h=c.hiddenGroups||[];var P=p.Pages.results.filter(function(a){var i=a.scope==="PERSONALIZATION";var b=a.PageChipInstances.results.length>0;var I=h.indexOf(a.id)===-1;return i&&b&&I;});var g=c.order||[];P.sort(function(x,y){if(g.indexOf(x.id)>g.indexOf(y.id)){return 1;}if(g.indexOf(x.id)<g.indexOf(y.id)){return-1;}return 0;});var l=[];var D;var n=[];P.forEach(function(a){var L;if(a.layout){L=JSON.parse(a.layout);}var m={id:a.id,title:a.title,isLocked:a.isPersLocked==="X",isDefault:a.id===d,tileOrder:L&&L.order||[],linkOrder:L&&L.linkOrder||[],chips:a.PageChipInstances.results};if(m.isLocked){l.push(m);}else if(m.isDefault){D=m;}else{n.push(m);}});if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){return x.title.toLowerCase()<y.title.toLowerCase()?-1:1;});}if(D){l=l.concat(D);}return l.concat(n);}catch(e){return null;}};
M.setImportEnabled=function(e){E.emit("importBookmarksFlag",!!e);sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){var U=u.getUser();var i=e?null:"dismissed";U.setImportBookmarksFlag(i);u.updateUserPreferences();U.resetChangedProperty("importBookmarks");});};
return M;});
sap.ui.predefine('sap/ushell/components/pages/StateManager',["sap/ushell/utils","sap/ushell/EventHub"],function(S,E){"use strict";var a={};
a.init=function(p,b){this.oPagesVisibility={};this.oPagesRuntimeNavContainer=p;this.oPagesNavContainer=b;this._oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this.oPagesRuntimeNavContainer.attachNavigate(this._onErrorPageNavigated,this);this.oPagesNavContainer.attachNavigate(this._onPageNavigated,this);this._onTabNavigatedBind=this._onTabNavigated.bind(this);document.addEventListener("visibilitychange",this._onTabNavigatedBind);this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);this.oEventBus.subscribe("sap.ushell","navigated",this._onShellNavigated,this);this.oEventHubListener=E.once("PagesRuntimeRendered").do(function(){this._setCurrentPageVisibility(true);}.bind(this));};
a._onEnableRequests=function(c,e,d){if(!d||d.active===undefined){return;}this._setCurrentPageVisibility(d.active);};
a._setCurrentPageVisibility=function(v,r,n){if(this.oPagesRuntimeNavContainer.getCurrentPage().isA("sap.m.MessagePage")&&!n){return;}var c=this.oPagesNavContainer.getCurrentPage();if(c){this._setPageVisibility(c,v,r);}};
a._setPageVisibility=function(p,v,r){if(!p){return;}if(p.getContent()[0].isA("sap.ushell.ui.launchpad.Page")){var P=p.getBindingContext().getPath();this.oPagesVisibility[P]=v;this._visitVisualizations(p,function(b){b.setActive(v,r);});}};
a._visitVisualizations=function(p,v){if(!v){return;}p.getContent()[0].getSections().forEach(function(s){s.getVisualizations().forEach(v);});};
a._onShellNavigated=function(){return this._oURLParsingService.then(function(u){var h=window.hasher.getHash();var H=u.parseShellHash(h);if(h==="Shell-home"||(H.semanticObject==="Launchpad"&&H.action==="openFLPPage")){this._setCurrentPageVisibility(true,true);}else{this._setCurrentPageVisibility(false,false);}}.bind(this));};
a._onTabNavigated=function(){return this._oURLParsingService.then(function(u){var h=window.hasher.getHash();var H=u.parseShellHash(h);if(h==="Shell-home"||(H.semanticObject==="Launchpad"&&H.action==="openFLPPage")){this._setCurrentPageVisibility(!document.hidden);}}.bind(this));};
a._onPageNavigated=function(e){var p=e.getParameters();this._setPageVisibility(p.from,false,false);this._setPageVisibility(p.to,true,true);};
a._onErrorPageNavigated=function(e){var t=e.getParameter("to");this._setCurrentPageVisibility(!t.isA("sap.m.MessagePage"),undefined,true);};
a.getPageVisibility=function(p){return this.oPagesVisibility[p];};
a.exit=function(){this.oEventBus.unsubscribe("sap.ushell","navigated",this._onPageNavigated,this);document.removeEventListener("visibilitychange",this._onTabNavigatedBind);this.oPagesNavContainer.detachNavigate(this._onPageNavigated,this);this.oPagesRuntimeNavContainer.detachNavigate(this._onErrorPageNavigated,this);this.oEventBus.unsubscribe("launchpad","setConnectionToServer",this._onEnableRequests,this);this.oEventHubListener.off();};
return a;});
sap.ui.predefine('sap/ushell/components/pages/controller/ImportDialog.controller',["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/components/pages/MyHomeImport","sap/ushell/Config","sap/ushell/library","sap/ushell/resources","sap/ushell/utils/WindowUtils"],function(C,F,J,M,a,u,r,W){"use strict";var D=u.DisplayFormat;var c={"X-SAP-UI2-CHIP:SSB_NUMERIC":"ssuite/smartbusiness/tiles/numeric","X-SAP-UI2-CHIP:SSB_CONTRIBUTION":"ssuite/smartbusiness/tiles/contribution","X-SAP-UI2-CHIP:SSB_TREND":"ssuite/smartbusiness/tiles/trend","X-SAP-UI2-CHIP:SSB_DEVIATION":"ssuite/smartbusiness/tiles/deviation","X-SAP-UI2-CHIP:SSB_COMPARISON":"ssuite/smartbusiness/tiles/comparison","X-SAP-UI2-CHIP:SSB_BLANK":"ssuite/smartbusiness/tiles/blank","X-SAP-UI2-CHIP:SSB_DUAL":"ssuite/smartbusiness/tiles/dual"};return C.extend("sap.ushell.components.pages.controller.ImportDialog",{open:function(){if(!this._pFragmentLoad){this._pFragmentLoad=F.load({name:"sap.ushell.components.pages.view.ImportDialog",controller:this}).then(function(f){this._oDialog=f;this._oDialog.setModel(r.i18nModel,"i18n");this._oDialog.setModel(new J({busy:true,groups:[],PersonalizedGroups:[]}));M.getData().then(function(g){f.getModel().setData({busy:false,groups:g,PersonalizedGroups:g.map(function(b){return{title:b.isDefault?r.i18n.getText("my_group"):b.title,description:b.id,selected:true};})});}).catch(function(e){return sap.ushell.Container.getServiceAsync("Message").then(function(m){m.error(e);});});return this._oDialog;}.bind(this));}return this._pFragmentLoad.then(function(){this._oDialog.open();return this._oDialog;}.bind(this));},close:function(){if(this._oDialog){this._oDialog.close();}},doImport:function(){var m=this._oDialog.getModel();var s=[];m.getProperty("/PersonalizedGroups").forEach(function(b){if(b.selected){s.push(b.description);}});var g=this._prepareImport(s);this._saveImport(g);},_moveVisualization:function(p,g,i,t,d){var T=this._getSectionIndex(p,g,i,d);var b=this._getDefaultSectionIndex(p);var o=this._getDefaultSection(p);var s=0;if(o&&o.visualizations&&o.visualizations.length){s=o.visualizations.length-1;}return p.moveVisualization(this.iPageIndex,b,s,T,t);},_updateVisualization:function(p,g,t,i,v,d){if(t.bUpdateNeeded){var s=this._getSectionIndex(p,g,i,d);return p.updateVisualization(this.iPageIndex,s,v,t);}return Promise.resolve();},_addVisualization:function(g,t,v,i,s,b,d){if(t.isABookmark){if(t.isCustomBookmark){this.aPromiseChain.push(function(){return s.bookmark.addCustomBookmark(t.vizType,t,b).then(this._moveVisualization.bind(this,s.pages,g,i,v,d)).then(this._updateVisualization.bind(this,s.pages,g,t,i,v,d));}.bind(this));}else{this.aPromiseChain.push(function(){return s.bookmark.addBookmark(t,b).then(this._moveVisualization.bind(this,s.pages,g,i,v,d)).then(this._updateVisualization.bind(this,s.pages,g,t,i,v,d));}.bind(this));}}else{this.aPromiseChain.push(function(){var S=this._getSectionIndex(s.pages,g,i,d);var e=s.pages.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/"+S+"/id");return s.pages.addVisualization(this.sPageId,e,t.vizId).then(this._updateVisualization.bind(this,s.pages,g,t,i,v,d));}.bind(this));}},_addToPresetSection:function(g,b,s,d,e){var p=this._getPresetSection(s.pages);var E=p.visualizations.filter(function(v){return v.displayFormatHint!=="compact";}).length;var f=p.visualizations.filter(function(v){return v.displayFormatHint==="compact";}).length;for(var i=0;i<g.tiles.length;++i){this._addVisualization(g,g.tiles[i],i+E,b,s,d,e);}for(var j=0;j<g.links.length;++j){this._addVisualization(g,g.links[j],j+f+E+g.tiles.length,b,s,d,e);}},_addSection:function(g,b,s,d,e){this.aPromiseChain.push(function(){var U=this._getSectionIndex(s.pages,g,b,e);return s.pages.addSection(this.iPageIndex,U,{title:g.title});}.bind(this));for(var i=0,l=g.tiles.length;i<l;++i){this._addVisualization(g,g.tiles[i],i,b,s,d,e);}for(var j=0,f=g.links.length;j<f;++j){this._addVisualization(g,g.links[j],j+g.tiles.length,b,s,d,e);}},_getMyHomeContentNode:function(b){var s=a.last("/core/spaces/myHome/myHomeSpaceId");return b.getContentNodes().then(function(d){var m=d.find(function(e){return e.id===s;});if(!m){return null;}return m.children.find(function(e){return e.id===this.sPageId;}.bind(this));}.bind(this));},_saveImport:function(g){this._oDialog.setBusy(true);var s;this.sPageId=a.last("/core/spaces/myHome/myHomePageId");this.aTilesUpdateNeeded=[];this.aTilesMoveNeeded=[];this.aPromiseChain=[];return Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Message"),sap.ushell.Container.getServiceAsync("Pages"),sap.ushell.Container.getServiceAsync("UserInfo")]).then(function(S){s={bookmark:S[0],message:S[1],pages:S[2],userInfo:S[3]};return this._getMyHomeContentNode(s.bookmark);}.bind(this)).then(function(m){this.iPageIndex=s.pages.getPageIndex(this.sPageId);s.pages.enableImplicitSave(false);this._performImportOperations(g,s,m);return this._executeSequentially(this.aPromiseChain);}.bind(this)).then(function(){return this._savePersonalizations(s.pages);}.bind(this)).then(function(){s.message.info(r.i18n.getText("MyHome.InitialPage.Message.ImportSuccessful"));s.userInfo.getUser().setImportBookmarksFlag("done");return s.userInfo.updateUserPreferences();}).then(function(){W.refreshBrowser();}).catch(function(e){s.message.error(e);}).finally(function(){this._oDialog.setBusy(false);this.close();}.bind(this));},_performImportOperations:function(g,s,m){var G;var d=false;for(var i=0,l=g.length;i<l;++i){G=g[i];if(G.isDefault){this._addToPresetSection(G,i,s,m,d);d=true;}else{this._addSection(G,i,s,m,d);}}},_executeSequentially:function(p){return p.reduce(function(b,d){return b.then(function(){return d();});},Promise.resolve());},_getSectionIndex:function(p,g,b,d){var o=this._getPresetSectionIndex(p);if(!g.isDefault&&!g.isLocked&&!d){return o+b+1;}return o+b;},_getPresetSectionIndex:function(p){var s=p.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return s.findIndex(function(b){return b.id===a.last("/core/spaces/myHome/presetSectionId");});},_getDefaultSectionIndex:function(p){var s=p.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return s.findIndex(function(b){return b.default;});},_getPresetSection:function(p){var s=p.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return s.find(function(b){return b.id===a.last("/core/spaces/myHome/presetSectionId");});},_getDefaultSection:function(p){var s=p.getModel().getProperty("/pages/"+this.iPageIndex+"/sections/");return s.find(function(b){return b.default;});},_gatherVizDataObjectFromChipInstance:function(o){var b;var d;var v={vizId:o.chipId,isABookmark:!!o.configuration};if(v.isABookmark){v.isCustomBookmark=["X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER","X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER"].indexOf(o.chipId)===-1;b=JSON.parse(JSON.parse(o.configuration).tileConfiguration);v.title=b.display_title_text;v.url=b.navigation_target_url;v.icon=b.display_icon_url;v.info=b.display_info_text;v.subtitle=b.display_subtitle_text;v.serviceUrl=b.service_url;v.serviceRefreshInterval=b.service_refresh_interval;v.numberUnit=b.display_number_unit;v.vizConfig=o.configuration;}d=o.ChipInstanceBags.results;if(d.length){v.bUpdateNeeded=!v.isABookmark;if(v.isCustomBookmark){v.vizConfig={};v.loadManifest=true;v.vizType=c[o.chipId];v.chipConfig={chipId:o.chipId,bags:{},configuration:JSON.parse(o.configuration)};d.forEach(function(B){v.chipConfig.bags[B.id]={properties:{},texts:{}};B.ChipInstanceProperties.results.forEach(function(p){if(p.translatable==="X"){v.chipConfig.bags[B.id].texts[p.name]=p.value;}else{v.chipConfig.bags[B.id].properties[p.name]=p.value;}});});}d.filter(function f(e){return e.id==="tileProperties";}).forEach(function(B){B.ChipInstanceProperties.results.forEach(function(t){switch(t.name){case"display_title_text":v.title=t.value;break;case"display_subtitle_text":v.subtitle=t.value;break;case"display_info_text":v.info=t.value;break;case"display_search_keywords":v.searchKeyword=t.value;break;default:break;}});});d.filter(function f(e){return e.id==="sb_tileProperties";}).forEach(function(B){B.ChipInstanceProperties.results.forEach(function(t){switch(t.name){case"title":v.title=t.value;break;case"description":v.subtitle=t.value;break;default:break;}});});}return v;},_savePersonalizations:function(p){p.enableImplicitSave(true);return p.savePersonalization(this.sPageId).then(function(){p.enableImplicitSave(false);});},_prepareImport:function(g){var G={};var m=this._oDialog.getModel();var b=m.getProperty("/groups");var v;var V;b.forEach(function(o){if(g.indexOf(o.id)===-1){return;}v={};o.chips.forEach(function(e){V=this._gatherVizDataObjectFromChipInstance(e);v[e.instanceId]=V;}.bind(this));o.tiles=[];o.tileOrder.forEach(function(t){V=v[t];if(V){delete v[t];o.tiles.push(V);}});o.links=[];o.linkOrder.forEach(function(t){V=v[t];if(V){delete v[t];V.displayFormatHint=D.Compact;V.bUpdateNeeded=true;o.links.push(V);}});Object.keys(v).map(function(k){o.tiles.push(v[k]);});G[o.id]=o;}.bind(this));var d=[];var o;g.forEach(function(s){o=G[s];if(o){d.push(o);}});return d;}});});
sap.ui.predefine('sap/ushell/components/pages/controller/MyHome.controller',["sap/ushell/components/pages/MyHomeImport","sap/ui/model/json/JSONModel","sap/ui/core/mvc/Controller","sap/ushell/resources","sap/ushell/EventHub","sap/base/Log"],function(m,J,C,r,E,L){"use strict";return C.extend("sap.ushell.components.pages.controller.MyHome",{onInit:function(){this.oViewModel=new J({personalizationAvailable:false});var s=function(f){this.oViewModel.setProperty("/personalizationAvailable",!!f);}.bind(this);this.getView().setModel(r.i18nModel,"i18n");this.getView().setModel(this.oViewModel,"view");m.isImportEnabled().then(s);this.oImportBookmarksFlagListener=E.on("importBookmarksFlag").do(s);},onExit:function(){this.oImportBookmarksFlagListener.off();},connect:function(c){this.fnOnEdit=c.onEdit;this.fnOnOpenDialog=c.onOpenDialog;},onEditPress:function(){if(this.fnOnEdit){this.fnOnEdit();}},onImportDialogPress:function(){if(this.fnOnOpenDialog){this.fnOnOpenDialog();}},onMessageStripClose:function(){this.oViewModel.setProperty("/personalizationAvailable",false);m.setImportEnabled(false);sap.ui.require(["sap/m/MessageBox"],function(M){M.information(r.i18n.getText("MyHome.InitialPage.MessageStrip.Popup"));});}});});
sap.ui.predefine('sap/ushell/components/pages/controller/PageRuntime.controller',["sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/Controller","sap/ui/events/KeyCodes","sap/m/GenericTile","sap/ushell/resources","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/m/library","sap/m/MessageToast","sap/ushell/components/pages/StateManager","sap/ushell/EventHub","sap/ushell/utils","sap/m/Button","sap/base/strings/capitalize","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/components/pages/controller/PagesAndSpaceId","sap/ushell/components/pages/MyHomeImport","sap/ui/thirdparty/hasher","sap/base/Log"],function(c,u,C,K,G,r,J,a,l,M,s,E,U,B,b,F,d,P,e,h,L){"use strict";var I=c.InvisibleMessageMode;var f=l.LoadState;var D=u.DisplayFormat;return C.extend("sap.ushell.components.pages.controller.Pages",{onInit:function(){this._oVisualizationInstantiationServicePromise=sap.ushell.Container.getServiceAsync("VisualizationInstantiation");this._oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this._oViewSettingsModel=new J({sizeBehavior:a.last("/core/home/sizeBehavior"),actionModeActive:false,showHideButton:a.last("/core/catalog/enableHideGroups"),showAddButton:a.last("/core/catalog/enabled"),personalizationEnabled:a.last("/core/shell/enablePersonalization"),showPageTitle:false});this.getView().setModel(this._oViewSettingsModel,"viewSettings");this._sMyHomePageId=a.last("/core/spaces/myHome/myHomePageId");this._aConfigListeners=a.on("/core/home/sizeBehavior").do(function(S){this._oViewSettingsModel.setProperty("/sizeBehavior",S);}.bind(this));this._oErrorPageModel=new J({icon:"sap-icon://documents",text:"",description:"",details:""});this.getView().setModel(this._oErrorPageModel,"errorPage");this.oInitFinishedPromise=Promise.all([this._oVisualizationInstantiationServicePromise,this.getOwnerComponent().getPagesService()]).then(function(S){this._oVisualizationInstantiationService=S[0];this.getView().setModel(S[1].getModel());}.bind(this));E.emit("S4MyHomePlugin",this.byId("pagesNavContainer").getId());this.sCurrentTargetPageId="";var R=sap.ushell.Container.getRenderer();this._openFLPPage().then(function(){this.oContainerRouter=R.getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._onPageComponentNavigation,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._onPageComponentNavigation,this);}.bind(this));this.bIsHomeIntentRootIntent=U.isFlpHomeIntent(R.getShellConfig().rootIntent);this.oErrorPage=this.byId("errorPage");this.oPagesNavContainer=this.byId("pagesNavContainer");this.oPagesRuntimeNavContainer=this.byId("pagesRuntimeNavContainer");s.init(this.oPagesRuntimeNavContainer,this.oPagesNavContainer);this.oEventHubListener=E.once("PagesRuntimeRendered").do(this._onFirstPageRendering.bind(this));this._oEventBus=sap.ui.getCore().getEventBus();this._oEventBus.subscribe("launchpad","shellFloatingContainerIsDocked",this._handleUshellContainerDocked,this);this._oEventBus.subscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleUshellContainerDocked,this);this.oVisualizationInstantiationListener=E.on("VizInstanceLoaded").do(function(){this._setPerformanceMark();if(!this.oVisualizationInstantiationListenerTimeout){this.oVisualizationInstantiationListenerTimeout=setTimeout(function(){this.oVisualizationInstantiationListener.off();}.bind(this),5000);}}.bind(this));},_onFirstPageRendering:function(){var p=a.last("/core/shell/enablePersonalization");var m=a.last("/core/spaces/myHome/userEnabled")&&a.last("/core/spaces/myHome/enabled");if(p){this._createActionModeButton();}else if(m){sap.ushell.Container.getServiceAsync("Menu").then(function(o){return o.getMyHomeSpace();}).then(function(H){if(!H||!H.pages.length){return;}var g=H.pages[0].title;this._createActionModeButton(g);}.bind(this));}E.emit("firstSegmentCompleteLoaded",true);},_onPageComponentNavigation:function(){this._removeMyHomePage();this._openFLPPage();var A=sap.ui.getCore().byId("ActionModeBtn");if(A&&!this.bIsHomeIntentRootIntent){var R=sap.ushell.Container.getRenderer("fiori2");if(R.getShellConfig().moveEditHomePageActionToShellHeader){R.showHeaderEndItem(A.getId(),true);}else{R.showActionButton(A.getId(),true);}}},_setPerformanceMark:function(){U.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true,bUseLastMark:true});},_openFLPPage:function(){var p,S;return P._getPageAndSpaceId().then(function(i){p=i.pageId;S=i.spaceId;this.sCurrentTargetPageId=p;this.sCurrentTargetSpaceId=S;return Promise.all([this.oInitFinishedPromise,sap.ushell.Container.getServiceAsync("Menu")]).then(function(R){var m=R[1];return m.isSpacePageAssigned(S,p);}).then(function(A){if(!A){return Promise.reject("The combination of space and page is not assgined to the user.");}return this.getOwnerComponent().getPagesService();}.bind(this)).then(function(g){return g.loadPage(p);}).then(function(){this._showActionModeButton();if(this.sCurrentTargetPageId===p){if(this._isMyHomeRouteActive()){this._oViewSettingsModel.setProperty("/personalizationEnabled",true);if(this._isMyHomePageEmpty()){return this._navigateToInitialMyHome();}}else{this._oViewSettingsModel.setProperty("/personalizationEnabled",a.last("/core/shell/enablePersonalization"));}return this._navigate(p,S);}return Promise.resolve();}.bind(this)).then(this._notifyOnPageRuntimeRendered.bind(this)).catch(function(g){if(g instanceof Error){this._oErrorPageModel.setProperty("/text",r.i18n.getText("PageRuntime.GeneralError.Text"));}else{var j=r.i18n.getText("PageRuntime.CannotLoadPage.Description")+JSON.stringify(g);this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",r.i18n.getText("PageRuntime.CannotLoadPage.Text",[p,S]));this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details",j);}this.oPagesRuntimeNavContainer.to(this.oErrorPage);this._hideActionModeButton();this._cancelActionMode();this._notifyOnPageRuntimeRendered();}.bind(this));}.bind(this)).catch(this._onError.bind(this));},_onError:function(g){this._oErrorPageModel.setProperty("/icon","sap-icon://documents");this._oErrorPageModel.setProperty("/text",g||"");this._oErrorPageModel.setProperty("/description","");this._oErrorPageModel.setProperty("/details","");this.oPagesRuntimeNavContainer.to(this.oErrorPage);this._hideActionModeButton();this._cancelActionMode();this._notifyOnPageRuntimeRendered();},_navigate:function(t,g,k){var p=this.oPagesNavContainer.getPages().find(function(o){return t===o.data("pageId");});if(!p){return Promise.reject();}var m;return sap.ushell.Container.getServiceAsync("Menu").then(function(S){m=S;return m.hasMultiplePages(g);}).then(function(H){var S=this.oPagesNavContainer.getCurrentPage()===p;this._oViewSettingsModel.setProperty("/showPageTitle",H);this.oPagesNavContainer.to(p);this.oPagesRuntimeNavContainer.to(this.oPagesNavContainer);if(!S&&!k){this._cancelActionMode();}m.getSpaceAndPageTitles(g,t).then(function(T){var o={pageTitle:T.pageTitle,spaceTitle:T.spaceTitle,hash:h.getHash()};a.emit("/core/shell/model/currentSpaceAndPage",o);});}.bind(this));},_navigateToInitialMyHome:function(){if(!this._pLoadMyHomeView){this._pLoadMyHomeView=new Promise(function(g,i){sap.ui.require(["sap/ui/core/mvc/XMLView"],function(X){X.create({id:"sapUshellMyHomePage",viewName:"sap.ushell.components.pages.view.MyHomeStart"}).then(function(p){p.getController().connect({onEdit:this.pressActionModeButton.bind(this),onOpenDialog:this.openMyHomeImportDialog.bind(this)});g(p);}.bind(this)).catch(i);}.bind(this),i);}.bind(this));}return this._pLoadMyHomeView.then(function(p){this._cancelActionMode();this.oPagesNavContainer.insertPage(p,0);this.oPagesNavContainer.to(p);}.bind(this));},_notifyOnPageRuntimeRendered:function(){try{var p;var o=this.oPagesNavContainer.getCurrentPage();p=o&&o.getId();E.emit("S4Plugin_PagesRuntimeRendered",p);}catch(g){L.error("Error while trying to trigger the PagesRuntimeRendered event for the S/4 My Home plugin");}E.emit("PagesRuntimeRendered");if(E.last("AppRendered")!==undefined){E.emit("AppRendered",undefined);}},_pressViewDetailsButton:function(){var g=this._oErrorPageModel.getProperty("/details")||"";this._oErrorPageModel.setProperty("/description",g);},_copyToClipboard:function(){var t=document.createElement("textarea");try{t.contentEditable=true;t.readonly=false;t.textContent=this._oErrorPageModel.getProperty("/description");document.documentElement.appendChild(t);t.select();document.execCommand("copy");M.show(r.i18n.getText("PageRuntime.CannotLoadPage.CopySuccess"),{closeOnBrowserNavigation:false});}catch(o){M.show(r.i18n.getText("PageRuntime.CannotLoadPage.CopyFail"),{closeOnBrowserNavigation:false});}finally{t.parentNode.removeChild(t);}},_visualizationFactory:function(i,g){if(this._oVisualizationInstantiationService){var o=g.getObject();var p=g.getPath();var S=p.replace(/\/visualizations\/\d*\/?$/,"");var j=S.replace(/\/sections\/\d*\/?$/,"");var k=g.getModel().getProperty(S);var m=g.getModel().getProperty(j);var v=this._oVisualizationInstantiationService.instantiateVisualization(o);v.attachPress(this.onVisualizationPress,this);v.bindEditable("viewSettings>/actionModeActive");if(!k.default){this._addTileActions(v,m.id);}var n=g.getPath().split("/")[2];var A=!!s.getPageVisibility("/pages/"+n);v.setActive(A);return v;}return new G({state:f.Failed});},_addTileActions:function(v,p){var A=v.getAvailableDisplayFormats(),m=a.last("/core/spaces/myHome/userEnabled")&&a.last("/core/spaces/myHome/enabled"),g=p===this._sMyHomePageId;for(var i=0;i<A.length;i++){v.addTileAction(new B({text:"{i18n>VisualizationInstance.ConvertTo"+b(A[i])+"Action}",press:[A[i],this._updateVisualizationDisplayFormat,this]}));}v.addTileAction(new B({text:"{i18n>moveTileDialog_action}",press:[v,this._openMoveVisualizationDialog,this]}));if(m&&!g){v.addTileAction(new B({text:"{i18n>addToMyHome_action}",press:[v,this._addToMyHome,this]}));}},_openMoveVisualizationDialog:function(o,v){this._oVizInstanceToBeMoved=v;var V=v.getBindingContext().getPath();var g=V.split("/");var i="/pages/"+g[2]+"/sections";if(!this._oMoveVisualizationDialog){sap.ui.require(["sap/ui/core/Fragment"],function(j){j.load({name:"sap.ushell.components.pages.MoveVisualization",controller:this}).then(function(k){this._oMoveVisualizationDialog=k;this.getView().addDependent(k);k.bindObject({path:i});k.open();}.bind(this));}.bind(this));}else{this._oMoveVisualizationDialog.bindObject({path:i});this._oMoveVisualizationDialog.open();}},_addToMyHome:function(o,v){var V=v.getBindingContext().getObject();return this.getOwnerComponent().getPagesService().then(function(p){return p.copyVisualization(this._sMyHomePageId,null,V);}.bind(this)).then(function(){M.show(r.i18n.getText("PageRuntime.MessageToast.TileAddedToMyHome"));});},_confirmSelect:function(o){var g=new F("default",d.EQ,false);var i=o.getSource().getBinding("items");i.filter([g]);var v=this._oVizInstanceToBeMoved.getBindingContext().getPath();var V=v.split("/");var p=V[2];var j=V[4];var k=V[6];var t=o.getParameter("selectedItem").getBindingContext().getPath();var T=t.split("/");var m=T[4];var S=this._getAncestorControl(this._oVizInstanceToBeMoved,"sap.ushell.ui.launchpad.Section");var n=this._getAncestorControl(this._oVizInstanceToBeMoved,"sap.ushell.ui.launchpad.Page");var q=n.getSections();var w=q[m];var A=S.getItemPosition(this._oVizInstanceToBeMoved).area;this._oVizInstanceToBeMoved=null;var x=this.getOwnerComponent();return x.getPagesService().then(function(y){return y.moveVisualization(p,j,k,m,-1);}).then(function(R){var y=w.getVisualizations()[R.visualizationIndex];if(y){w.focusVisualization(y);}var z=this._getVizMoveAnnouncement(A,A);x.getInvisibleMessageInstance().announce(z,I.Polite);}.bind(this));},_onMoveTileSearch:function(o){var v=o.getParameter("value");var g=new F("title",d.Contains,v);var i=new F("default",d.EQ,false);var j=o.getParameter("itemsBinding");j.filter([g,i]);},_onMoveTileDialogClose:function(o){this._oVizInstanceToBeMoved=null;var g=new F("default",d.EQ,false);o.getSource().getBinding("items").filter([g]);},_updateVisualizationDisplayFormat:function(o,n){var g=o.getSource().getBindingContext();var p=g.getPath();var i=p.split("/");var O;var j=this.getOwnerComponent();return j.getPagesService().then(function(k){O=k.getModel().getProperty(p).displayFormatHint;var v={displayFormatHint:n};return k.updateVisualization(i[2],i[4],i[6],v);}).then(function(){var k=this._getVizMoveAnnouncement(O,n);j.getInvisibleMessageInstance().announce(k,I.Polite);}.bind(this));},onVisualizationPress:function(o){var S=o.getParameter("scope");var A=o.getParameter("action");var v=o.getSource();var g=v.getBindingContext();var p=g.getPath();var i=p.split("/");var j=this._getAncestorControl(v,"sap.ushell.ui.launchpad.Section");if(S==="Actions"&&A==="Remove"){return this.getOwnerComponent().getPagesService().then(function(k){var O=j.getItemPosition(v);k.deleteVisualization(i[2],i[4],i[6]);M.show(r.i18n.getText("PageRuntime.MessageToast.TileRemoved"));j._focusItem(O);});}return Promise.resolve();},onExit:function(){this.oContainerRouter.getRoute("home").detachMatched(this._onPageComponentNavigation,this);this.oContainerRouter.getRoute("openFLPPage").detachMatched(this._onPageComponentNavigation,this);this._aConfigListeners.off();this.oEventHubListener.off();this._oEventBus.unsubscribe("launchpad","shellFloatingContainerIsDocked",this._handleUshellContainerDocked,this);this._oEventBus.unsubscribe("launchpad","shellFloatingContainerIsUnDocked",this._handleUshellContainerDocked,this);s.exit();var A=sap.ui.getCore().byId("ActionModeBtn");if(A){A.destroy();}},_hideActionModeButton:function(){var A=sap.ui.getCore().byId("ActionModeBtn");if(A){A.setVisible(false);}},_showActionModeButton:function(){var A=sap.ui.getCore().byId("ActionModeBtn");if(A){A.setVisible(true);}},_createActionModeButton:function(p){var g=p?r.i18n.getText("PageRuntime.EditModeForPage.Activate",p):r.i18n.getText("PageRuntime.EditMode.Activate");var A={id:"ActionModeBtn",text:g,tooltip:g,icon:"sap-icon://edit",press:[this.pressActionModeButton,this]};var R=sap.ushell.Container.getRenderer("fiori2");var m=R.getShellConfig().moveEditHomePageActionToShellHeader;if(m){this._createHeaderActionModeButton(A);}else{this._createUserActionModeButton(A);}},_createHeaderActionModeButton:function(A){sap.ui.require(["sap/ushell/ui/shell/ShellHeadItem"],function(S){var o=new S(A);if(a.last("/core/extension/enableHelp")){o.addStyleClass("help-id-ActionModeBtn");}var R=sap.ushell.Container.getRenderer("fiori2");if(this.bIsHomeIntentRootIntent){R.showHeaderEndItem(o.getId(),false,["home"]);}else{R.showHeaderEndItem(o.getId(),true);}}.bind(this));},_createUserActionModeButton:function(A){var o={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:A,bIsVisible:true,aStates:["home"]};if(!this.bIsHomeIntentRootIntent){o.aStates=null;o.bCurrentState=true;}sap.ushell.Container.getRenderer("fiori2").addUserAction(o).done(function(g){if(a.last("/core/extension/enableHelp")){g.addStyleClass("help-id-ActionModeBtn");}});},pressActionModeButton:function(){var v=this.getView().getModel("viewSettings");var A=v.getProperty("/actionModeActive");var p=v.getProperty("/personalizationEnabled");sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(g){if(A){g.cancel();return;}else if(p||this._isMyHomeRouteActive()){g.start(this);}else{this.oPagesNavContainer.attachEventOnce("afterNavigate",function(){g.start(this);}.bind(this));this.oContainerRouter.navTo("home");}}.bind(this));},_cancelActionMode:function(){var A=this.getView().getModel("viewSettings").getProperty("/actionModeActive");if(A){sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(g){g.cancel();});}},handleEditModeAction:function(H,o,S,p){sap.ui.require(["sap/ushell/components/pages/ActionMode"],function(A){A[H](o,S,p);});},_getAncestorControl:function(g,i){if(g&&g.isA&&g.isA(i)){return g;}else if(g&&g.getParent){return this._getAncestorControl(g.getParent(),i);}return null;},moveVisualization:function(o){var g=o.getParameter("draggedControl"),i=o.getParameter("droppedControl"),j=o.getParameter("dropPosition"),k=o.getParameter("browserEvent"),m=k&&k.keyCode,p=this._getAncestorControl(g,"sap.ushell.ui.launchpad.Page"),n=parseInt(g.getBindingContext().getPath().split("/")[2],10),q=this._getAncestorControl(g,"sap.ushell.ui.launchpad.Section"),t=p.indexOfSection(q),v=q.indexOfVisualization(g),w=q.getVisualizations()[v],x=q.getItemPosition(w),T,y,z,A,H;if(!i){var N=o.mParameters.browserEvent.keyCode===K.ARROW_UP,S=p.getSections();y=t;while(true){y=N?--y:++y;T=S[y];if(!T||T.getDefault()){w.invalidate();return Promise.resolve();}if(T.getShowSection()||T.getEditable()){z=T.getClosestCompactItemIndex(g.getDomRef(),N);A=T.getVisualizations()[z];H=T.getItemPosition(A);if(H.area!==x.area){H=x;}break;}}}else{if(i.isA("sap.ushell.ui.launchpad.section.CompactArea")){var O=i.getItems();if(O.length){i=O[O.length-1];j="After";}}T=this._getAncestorControl(i,"sap.ushell.ui.launchpad.Section");y=p.indexOfSection(T);if(T.getDefault()&&!q.getDefault()){w.invalidate();return Promise.resolve();}z=T.indexOfVisualization(i);A=T.getVisualizations()[z];H=T.getItemPosition(A);if(H.index===-1){H.area=x.area;}if(t===y){if(j==="Before"&&v<z){z--;}else if(j==="After"&&v>z){z++;}if(v===z&&H.area===x.area){w.invalidate();return Promise.resolve();}}else if(j==="After"){z++;}}if((t!==y)&&(m===K.ARROW_UP||m===K.ARROW_DOWN)&&(x.index>H.index)){z++;}var Q;var R=this.getOwnerComponent();return R.getPagesService().then(function(V){Q=V;Q.enableImplicitSave(false);return Q.moveVisualization(n,t,v,y,z);}).then(function(V){z=V.visualizationIndex;if(x.area!==H.area){var W={displayFormatHint:H.area};return Q.updateVisualization(n,y,z,W);}return Promise.resolve();}).then(function(){return Q.savePersonalization();}).then(function(){var V=T.getVisualizations()[z];if(V){T.focusVisualization(V);V.invalidate();}var W=this._getVizMoveAnnouncement(x.area,H.area);R.getInvisibleMessageInstance().announce(W,I.Polite);}.bind(this)).finally(function(){Q.enableImplicitSave(true);});},_getVizMoveAnnouncement:function(g,t){if(g===t){if(t===D.Compact){return r.i18n.getText("PageRuntime.Message.LinkMoved");}return r.i18n.getText("PageRuntime.Message.TileMoved");}else if(g===D.Compact){return r.i18n.getText("PageRuntime.Message.LinkConverted");}return r.i18n.getText("PageRuntime.Message.TileConverted");},onDragEnter:function(o){var t=o.getParameter("dragSession").getDropControl();if(t.getDefault()){o.preventDefault();}},onAreaDragEnter:function(o){var S=o.getParameter("sourceArea");var t=o.getParameter("targetArea");if(S===t){return;}var v=o.getParameter("dragControl");var A=v.getAvailableDisplayFormats();if(A.indexOf(t)===-1){if(t===D.Standard&&A.indexOf(D.StandardWide)>-1){return;}if(t===D.Flat&&A.indexOf(D.FlatWide)>-1){return;}o.getParameter("originalEvent").preventDefault();}},_handleUshellContainerDocked:function(g,i){this._oViewSettingsModel.setProperty("/ushellContainerDocked",i==="shellFloatingContainerIsDocked");},_isMyHomeRouteActive:function(){return a.last("/core/spaces/myHome/enabled")&&a.last("/core/spaces/myHome/userEnabled")&&a.last("/core/spaces/myHome/myHomeSpaceId")===this.sCurrentTargetSpaceId;},_getMyHomePageData:function(){var p=this.getView().getModel().getProperty("/pages")||[];for(var i=0;i<p.length;i++){if(p[i]&&p[i].id==="SAP_BASIS_PG_UI_MYHOME"){return p[i];}}return null;},_isMyHomePageEmpty:function(){var p=this._getMyHomePageData();if(p&&p.sections){return p.sections.every(function(S){var v=S.visualizations;return!(v&&v.length);});}return false;},handleMyHomeActionMode:function(g){if(this._isMyHomeRouteActive()){if(g){return this._enterMyHomeActionMode();}else if(this._isMyHomePageEmpty()){return this._navigateToInitialMyHome();}}return Promise.resolve();},_enterMyHomeActionMode:function(){return Promise.all([this._navigate(this.sCurrentTargetPageId,this.sCurrentTargetSpaceId,true),e.isImportEnabled()]).then(function(R){if(!R[1]){if(this._pMessageStrip){this._pMessageStrip.then(function(m){m.setVisible(false);});}return Promise.resolve();}if(!this._pMessageStrip){this._pMessageStrip=new Promise(function(g,i){sap.ui.require(["sap/ui/core/Fragment"],function(j){j.load({name:"sap.ushell.components.pages.view.MessageStrip",controller:this}).then(function(m){E.on("importBookmarksFlag").do(function(v){m.setVisible(!!v);});m.addStyleClass("sapUiSmallMarginBottom");g(m);}).catch(i);}.bind(this),i);}.bind(this));}return this._pMessageStrip.then(function(m){this.oPagesNavContainer.getCurrentPage().getContent()[0].setMessageStrip(m);}.bind(this));}.bind(this));},openMyHomeImportDialog:function(){if(!this._pLoadImportDialog){this._pLoadImportDialog=new Promise(function(g,i){sap.ui.require(["sap/ushell/components/pages/controller/ImportDialog.controller"],function(j){g(new j());},i);});}return this._pLoadImportDialog.then(function(i){return i.open();});},onImportDialogPress:function(){this.openMyHomeImportDialog();},onMessageStripClose:function(){e.setImportEnabled(false);sap.ui.require(["sap/m/MessageBox"],function(g){g.information(r.i18n.getText("MyHome.InitialPage.MessageStrip.Popup"));});},_removeMyHomePage:function(){this.oPagesNavContainer.removePage("sapUshellMyHomePage");},_sectionEnableReset:function(g,p){if(g===a.last("/core/spaces/myHome/presetSectionId")){return false;}return p;},_sectionEnableDelete:function(g,p){if(g===a.last("/core/spaces/myHome/presetSectionId")){return false;}return!p;}});});
sap.ui.predefine('sap/ushell/components/pages/controller/PagesAndSpaceId',["sap/ushell/resources","sap/ushell/Config"],function(r,C){"use strict";var P=function(){};
P.prototype._getPageAndSpaceId=function(s){return sap.ushell.Container.getServiceAsync("URLParsing").then(function(u){if(!s){s=window.hasher.getHash();}var h=u.parseShellHash(s);var i={semanticObject:h.semanticObject||"",action:h.action||""};var H=h.params||{};var p=H.pageId||[];var S=H.spaceId||[];return this._parsePageAndSpaceId(p,S,i);}.bind(this));};
P.prototype._parsePageAndSpaceId=function(p,s,i){return new Promise(function(a,b){this.getUserMyHomeEnablement().then(function(){if(p.length<1&&s.length<1){if(i.semanticObject==="Shell"&&i.action==="home"){this._getUserDefaultPage().then(function(R){a(R);}).catch(function(e){b(e);});return;}b(r.i18n.getText("PageRuntime.NoPageIdAndSpaceIdProvided"));}if(p.length===1&&s.length===0){b(r.i18n.getText("PageRuntime.OnlyPageIdProvided"));}if(p.length===0&&s.length===1){b(r.i18n.getText("PageRuntime.OnlySpaceIdProvided"));}if(p.length>1||s.length>1){b(r.i18n.getText("PageRuntime.MultiplePageOrSpaceIdProvided"));}if(p[0]===""){b(r.i18n.getText("PageRuntime.InvalidPageId"));}if(s[0]===""){b(r.i18n.getText("PageRuntime.InvalidSpaceId"));}a({pageId:p[0],spaceId:s[0]});}.bind(this));}.bind(this));};
P.prototype.getUserMyHomeEnablement=function(){return new Promise(function(a,b){var u=sap.ushell.Container.getUser().getShowMyHome();C.emit("/core/spaces/myHome/userEnabled",u);a(u);});};
P.prototype._getUserDefaultPage=function(){return new Promise(function(a,b){Promise.all([sap.ushell.Container.getServiceAsync("Menu"),this.getUserMyHomeEnablement()]).then(function(R){var m=R[0];m.getSpacesPagesHierarchy().then(function(s){if(s.spaces.length===0){b(r.i18n.getText("PageRuntime.NoAssignedSpace"));}var S=s.spaces.find(function(o){return(!!(o.id&&o.pages&&o.pages[0]&&o.pages[0].id));});if(S){a({spaceId:S.id,pageId:S.pages[0].id});}else{b(r.i18n.getText("PageRuntime.NoAssignedPage"));}});});}.bind(this));};
return new P();});
sap.ui.predefine('sap/ushell/components/shell/MeArea/Component',["sap/ui/core/UIComponent","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/components/shell/MeArea/MeArea.controller"],function(U,A,C,M){"use strict";var _;
function a(){if(!_){_=sap.ushell.Container.getRenderer("fiori2");}return _;}
return U.extend("sap.ushell.components.shell.MeArea.Component",{metadata:{version:"1.96.0",library:"sap.ushell",dependencies:{libs:["sap.m"]}},createContent:function(){this._bIsMeAreaCreated=false;this.oMeAreaController=new M();this.oMeAreaController.onInit();var t=this;A.getElementsModel().createTriggers([{fnRegister:function(){if(!t.oActionsDoable){t.oActionsDoable=C.on("/core/shell/model/currentState/actions").do(function(b){if(b&&b.length>0){a().showHeaderEndItem(["meAreaHeaderButton"],true);}else{a().hideHeaderEndItem(["meAreaHeaderButton"],true);}});}},fnUnRegister:function(){if(!t.oActionsDoable){t.oActionsDoable.off();t.oActionsDoable=null;}}}],false,["blank-home","blank"]);sap.ui.getCore().getEventBus().publish("shell","meAreaCompLoaded",{delay:0});},exit:function(){if(this.oActionsDoable){this.oActionsDoable.off();}this.oEventListener.off();this.oMeAreaController.onExit();}});});
sap.ui.predefine('sap/ushell/components/shell/MeArea/MeArea.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/StandardListItem","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/resources","sap/ushell/ui/footerbar/AboutButton","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/QuickAccess","sap/ushell/EventHub","sap/m/library","sap/base/Log","sap/ui/performance/Measurement","sap/ui/core/ElementMetadata","sap/ui/core/Fragment"],function(C,J,S,A,a,r,b,c,d,Q,E,l,L,M,e,F){"use strict";var f=l.ListType;var B=l.ButtonType;
function i(s){if(!sap.ui.getCore().byId(s)){L.debug("Could not render ActionItem because it was not created: "+s);return false;}return true;}
return C.extend("sap.ushell.components.shell.MeArea.MeArea",{_aDanglingControl:[],_aDoables:[],onInit:function(){var o=this.getShellConfig();this._createActionButtons(o);var u=sap.ushell.Container.getUser();var g=a.last("/core/shell/model/currentState/actions").filter(i);this.oModel=new J({actions:g,userName:u.getFullName()||u.getId()});this._aDoables.push(a.on("/core/shell/model/currentState/actions").do(function(h){var j=h.filter(i);this.getModel().setProperty("/actions",j);}.bind(this)));this._aDoables.push(E.on("showMeArea").do(function(s){var p=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(p&&p.isOpen()||!s){this._toggleMeAreaPopover(false);}else{this._toggleMeAreaPopover(true);}}.bind(this)));},onExit:function(){this._destroyDanglingControls();this._aDoables.forEach(function(D){D.off();});this._aDanglingControl=[];this._aDoables=[];var p=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(p){p.destroy();}},getModel:function(){return this.oModel;},_createActionButtons:function(o){var g=a.last("/core/extension/enableHelp");var h=a.last("/core/shell/enableAbout");if(h){this._createAboutButton(g);}if(!o.moveAppFinderActionToShellHeader&&a.last("/core/catalog/enabled")){this._createAppFinderButton(o,g);}if(!o.moveUserSettingsActionToShellHeader){this._createSettingsButton(g);}if(!o.moveContactSupportActionToShellHeader){this._createSupportTicketButton(g);}if(o.enableRecentActivity&&a.last("/core/shell/model/currentState/showRecentActivity")){this._createRecentActivitiesButton();this._createFrequentActivitiesButton();}if(!o.disableSignOut){this._createLogoutButton();}},_createAppFinderButton:function(o,g){if(sap.ui.getCore().byId("openCatalogBtn")){return;}var O=new d("openCatalogBtn",{text:r.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",visible:!o.disableAppFinder,actionType:"action",press:function(){M.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(h){h.toExternal({target:{semanticObject:"Shell",action:"appfinder"}});});}});if(g){O.addStyleClass("help-id-openCatalogActionItem");}this._addDanglingControl(O);},_createAboutButton:function(g){var I="aboutBtn";if(!sap.ui.getCore().byId(I)){var o=new b(I);if(g){o.addStyleClass("help-id-"+I);}this._addDanglingControl(o);this.getRenderer().showActionButton(I,false);}},_createSettingsButton:function(g){var I="userSettingsBtn";if(!sap.ui.getCore().byId(I)){var u=new d(I,{tooltip:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),text:r.i18n.getText("userSettings"),icon:"sap-icon://action-settings",press:function(){E.emit("openUserSettings",Date.now());}});if(g){u.addStyleClass("help-id-loginDetails");}this._addDanglingControl(u);}},_createSupportTicketButton:function(g){a.on("/core/extension/SupportTicket").do(function(h){var I="ContactSupportBtn";var o=sap.ui.getCore().byId(I);if(h&&!o){o=new c(I);this._addDanglingControl(o);if(g){o.addStyleClass("help-id-contactSupportBtn");}}if(h){this.getRenderer().showActionButton(I);}else{this.getRenderer().hideActionButton(I);}}.bind(this));},_createRecentActivitiesButton:function(){var I="recentActivitiesBtn";a.on("/core/shell/model/enableTrackingActivity").do(function(g){if(g){var R=sap.ui.getCore().byId(I);if(!R){R=new d(I,{text:r.i18n.getText("recentActivities"),icon:"sap-icon://customer-history",press:function(){Q.openQuickAccessDialog("recentActivityFilter","meAreaHeaderButton");}});this._addDanglingControl(R);}this.getRenderer().showActionButton(I,false);}else{this.getRenderer().hideActionButton(I,false);}}.bind(this));},_createFrequentActivitiesButton:function(){var I="frequentActivitiesBtn";a.on("/core/shell/model/enableTrackingActivity").do(function(g){if(g){var o=sap.ui.getCore().byId(I);if(!o){o=new d(I,{text:r.i18n.getText("frequentActivities"),icon:"sap-icon://activity-individual",tooltip:r.i18n.getText("frequentActivitiesTooltip"),press:function(){Q.openQuickAccessDialog("frequentlyUsedFilter","meAreaHeaderButton");}});this._addDanglingControl(o);}this.getRenderer().showActionButton(I,false);}else{this.getRenderer().hideActionButton(I,false);}}.bind(this));},_createLogoutButton:function(){var I="logoutBtn";if(sap.ui.getCore().byId(I)){return;}var o=new d(I,{visible:true,type:B.Transparent,icon:"sap-icon://log",text:r.i18n.getText("signoutBtn_title"),press:this.logout});this._addDanglingControl(o);this.getRenderer().showActionButton(I,false);},logout:function(){sap.ui.require(["sap/m/MessageBox","sap/ushell/ui/launchpad/LoadingDialog"],function(g,h){var o=new h({text:""}),s=true,I=false,j={};sap.ushell.Container.getGlobalDirty().done(function(k){s=false;if(I===true){o.exit();o=new h({text:""});}var _=function(){var R=r.i18n;if(k===sap.ushell.Container.DirtyState.DIRTY){j.message=R.getText("unsaved_data_warning_popup_message");j.icon=g.Icon.WARNING;j.messageTitle=R.getText("unsaved_data_warning_popup_title");}else{j.message=R.getText("signoutConfirmationMsg");j.icon=g.Icon.QUESTION;j.messageTitle=R.getText("signoutMsgTitle");}return j;};j=_(k);g.show(j.message,j.icon,j.messageTitle,[g.Action.OK,g.Action.CANCEL],function(m){if(m===g.Action.OK){o.openLoadingScreen();o.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout();}else if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}},e.uid("confirm"));});if(s===true){o.openLoadingScreen();I=true;}});},_addDanglingControl:function(o){this._aDanglingControl.push(o);},_destroyDanglingControls:function(){if(this._aDanglingControl){this._aDanglingControl.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}},_toggleMeAreaPopover:function(s){if(!this.oPopover){F.load({name:"sap.ushell.components.shell.MeArea.MeAreaPopover",controller:this}).then(function(p){this.oPopover=p;this.oPopover.setModel(this.getModel());this._toggleMeAreaPopover(s);}.bind(this));}else if(s){this.oPopover.getModel().refresh(true);this.oPopover.openBy(sap.ui.getCore().byId("meAreaHeaderButton"));}else{this.oPopover.close();}},meAreaPopoverItemFactory:function(I,o){var g=sap.ui.getCore().byId(o.getObject()),h;var j=function(){if(g){g.firePress();E.emit("showMeArea",false);}};h=new S({id:I+"-"+g.getId(),icon:g.getIcon(),tooltip:g.getTooltip(),iconInset:true,title:g.getText(),visible:g.getVisible(),type:f.Active,customData:[{key:"actionItemId",value:g.getId()}],press:j});h.addStyleClass("sapUshellMeAreaActionItem");h.addEventDelegate({onkeyup:function(k){if(k.keyCode===32){j();}}});return h;},getRenderer:function(){if(!this._oRenderer){this._oRenderer=sap.ushell.Container.getRenderer("fiori2");}return this._oRenderer;},getShellConfig:function(){return this.getRenderer().getShellConfig();}});});
sap.ui.predefine('sap/ushell/components/shell/MenuBar/Component',["sap/ui/core/UIComponent","sap/ushell/Config"],function(U,C){"use strict";return U.extend("sap.ushell.components.shell.MenuBar.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){U.prototype.init.apply(this,arguments);this.oInitPromise=new Promise(function(r,a){this.fnResolve=r;}.bind(this));C.on("/core/spaces/myHome/userEnabled").do(function(){sap.ushell.Container.getServiceAsync("Menu").then(function(m){return Promise.all([m.isMenuEnabled(),m.getMenuModel()]);}).then(function(r){var c;var i=r[0];var m=r[1];this.setModel(m,"menu");if(i){c=sap.ui.getCore().byId("menuBarComponentContainer");}if(c){c.setComponent(this);}this.fnResolve();}.bind(this));}.bind(this));if(sap.ushell.Container.getRenderer().getCurrentCoreView()!=="home"){this.setVisible(false);}},setVisible:function(v){v=v||C.last("/core/menu/visibleInAllStates");sap.ui.getCore().byId("menuBarComponentContainer").setVisible(!!v);}});});
sap.ui.predefine('sap/ushell/components/shell/MenuBar/controller/MenuBar.controller',["sap/ui/core/CustomData","sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/m/IconTabFilter","sap/ushell/utils"],function(C,a,J,O,E,r,W,I,S){"use strict";return a.extend("sap.ushell.components.shell.MenuBar.controller.MenuBar",{onInit:function(){this.oContainerRouter=sap.ushell.Container.getRenderer().getRouter();this.oContainerRouter.getRoute("home").attachMatched(this._selectIndexAfterRouteChange,this);this.oContainerRouter.getRoute("openFLPPage").attachMatched(this._selectIndexAfterRouteChange,this);this.oEventHubListener=E.on("enableMenuBarNavigation").do(function(e){this.getView().getModel("viewConfiguration").setProperty("/enableMenuBarNavigation",e);}.bind(this));var v=new J({selectedKey:"None Existing Key",enableMenuBarNavigation:true,ariaTexts:{headerLabel:r.i18n.getText("SpacePageNavgiationRegion")}});this.getView().setModel(v,"viewConfiguration");this.oURLParsingService=sap.ushell.Container.getServiceAsync("URLParsing");this.oSpacesPagesHierarchy=sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();});this._selectIndexAfterRouteChange();},onMenuItemSelection:function(e){var s=e.getParameter("key");var m=this.getView().getModel("menu");var M=m.getProperty("/");var d=this._getNestedMenuEntryByUid(M,s);if(d.type==="IBN"){this._performCrossApplicationNavigation(d.target);}if(d.type==="URL"){this._openURL(d.target);}},_getNestedMenuEntry:function(m,c){return m.reduce(function(s,M){if(s){return s;}if(c(M)){return M;}if(M.menuEntries){return this._getNestedMenuEntry(M.menuEntries,c);}}.bind(this),undefined);},_getNestedMenuEntryByUid:function(m,u){function c(M){return M.uid===u;}return this._getNestedMenuEntry(m,c);},_performCrossApplicationNavigation:function(d){return sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){var p={};d.parameters.forEach(function(P){if(P.name&&P.value){p[P.name]=[P.value];}});c.toExternal({target:{semanticObject:d.semanticObject,action:d.action},params:p});});},_openURL:function(d){W.openURL(d.url,"_blank");},_selectIndexAfterRouteChange:function(){var v=this.getView().getModel("viewConfiguration");return Promise.all([this.oURLParsingService,this.oSpacesPagesHierarchy,this.getOwnerComponent().oInitPromise]).then(function(R){var u=R[0];var s=R[1];var b;var h=window.hasher.getHash();var H=u.parseShellHash(h);var m=this.getView().getModel("menu").getProperty("/");if(H.semanticObject==="Shell"&&H.action==="home"){var o=s.spaces.find(function(e){return(!!(e.id&&e.pages&&e.pages[0]&&e.pages[0].id));});b=(o)?this._getMenuUID(m,o.id,o.pages[0].id)||"":"";v.setProperty("/selectedKey",b);}else{var c=O.get("params.spaceId.0",H);var p=O.get("params.pageId.0",H);var d=v.getProperty("/selectedKey");var M=this._getNestedMenuEntryByUid(m,d);if(this._hasSpaceIdAndPageId(M,c,p)){b=M.uid;}else{b=this._getMenuUID(m,c,p);}if(b){v.setProperty("/selectedKey",b);}else{v.setProperty("/selectedKey","None Existing Key");}}}.bind(this));},_getMenuUID:function(m,s,p){function c(o){return this._hasSpaceIdAndPageId(o,s,p);}var M=this._getNestedMenuEntry(m,c.bind(this));return M&&M.uid;},_hasSpaceIdAndPageId:function(m,s,p){var P=O.get("target.parameters",m)||[];var o=P.find(function(c){return c.name==="spaceId"&&c.value===s;});var b=P.find(function(c){return c.name==="pageId"&&c.value===p;});return o!==undefined&&b!==undefined;},_menuFactory:function(i,c){return new I(i,{key:"{menu>uid}",text:"{menu>title}",enabled:"{viewConfiguration>/enableMenuBarNavigation}",items:{path:"menu>menuEntries",factory:this._menuFactory.bind(this)}}).addCustomData(new C({key:"help-id",value:"{= 'MenuEntry-' + ${menu>help-id}}",writeToDom:"{= !!${menu>help-id}}"}));},onExit:function(){this.oEventHubListener.off();}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Component',["sap/base/Log","sap/m/library","sap/m/Popover","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/ui/shell/ShellHeadItem"],function(L,m,P,I,a,U,q,E,r,u,S){"use strict";var b=m.PlacementType;var F=S.prototype.FloatingNumberType;
function g(){return sap.ui.getCore().byId("NotificationsCountButton");}
return U.extend("sap.ushell.components.shell.Notifications.Component",{metadata:{version:"1.96.0",library:"sap.ushell.components.shell.Notifications",dependencies:{libs:["sap.m"]}},createContent:function(){this._aTimeouts=[];this.oRenderer=sap.ushell.Container.getRenderer("fiori2");this.oShellModel=this.oRenderer.shellCtrl.getModel();sap.ushell.Container.getServiceAsync("Notifications").then(function(n){this.oNotificationsService=n;if(this.oNotificationsService.isEnabled()===true){sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);this.oShellModel.setProperty("/enableNotifications",true);this.oNotificationsService.init();if(this.oRenderer.getShellConfig().enableNotificationsUI===true){this.oShellModel.setProperty("/enableNotificationsUI",true);this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this._updateCount.bind(this),true);}this._createNotificationButton(this.oShellModel);this.oRenderer.oShellModel.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);E.on("showNotifications").do(this._toggleNotifications.bind(this));}}.bind(this));},_createNotificationButton:function(s){var i="NotificationsCountButton";var n=new S({id:i,tooltip:r.i18n.getText("notificationsBtn_title"),icon:I.getIconURI("bell"),text:r.i18n.getText("notificationsBtn_title"),ariaLabel:r.i18n.getText("notificationsBtn_title"),ariaHaspopup:"dialog",enabled:true,selected:false,visible:"{/enableNotifications}",floatingNumber:"{/notificationsCount}",floatingNumberType:F.Notifications,press:function(){E.emit("showNotifications",Date.now());}});n.setModel(s);n.setModel(r.i18nModel,"i18n");},_handleAlerts:function(c,e,n){(n||[]).forEach(this.handleNotification.bind(this));},handleNotification:function(n){var A=this.oRenderer.addRightFloatingContainerItem({press:function(){this.oPopover.close();if(window.hasher.getHash()!==n.NavigationTargetObject+"-"+n.NavigationTargetAction){u.toExternalWithParameters(n.NavigationTargetObject,n.NavigationTargetAction,n.NavigationTargetParams);}this.oNotificationsService.markRead(n.Id);},datetime:r.i18n.getText("notification_arrival_time_now"),title:n.SensitiveText?n.SensitiveText:n.Text,description:n.SubTitle,unread:n.IsRead,priority:"High",hideShowMoreButton:true},true,true);this.oRenderer.showRightFloatingContainer(true);var t=setTimeout(function(){this.oRenderer.removeRightFloatingContainerItem(A.getId(),true);}.bind(this),3500);this._aTimeouts.push(t);},_updateCount:function(){this.oNotificationsService.getUnseenNotificationsCount().done(function(n){this.oShellModel.setProperty("/notificationsCount",parseInt(n,10));}.bind(this)).fail(function(d){L.error("Notifications - call to notificationsService.getCount failed: ",d);});},_getPopover:function(){if(!this.oPopover){var n=sap.ui.view("notificationsView",{viewName:"sap.ushell.components.shell.Notifications.Notifications",type:"XML",viewData:{}});var N=n.byId("notificationIconTabBar");N.enhanceAccessibilityState=function(o,A){if(o.isA("sap.m.IconTabHeader")){A.role="";A.label=r.i18n.getText("Notifications.Popover.IconTabBar.Header.AriaLabel");}return A;};this.oPopover=new P("shellNotificationsPopover",{showHeader:false,placement:b.Bottom,showArrow:true,content:n,beforeClose:function(e){e.getSource().getContent()[0].invalidate();this._resetCount();}.bind(this)});this.oPopover._oAriaLabelledByText=new a(this.oPopover.getId()+"-labelledBy",{text:r.i18n.getText("NotificationToggleButton.NoNewNotifications")}).toStatic();this.oPopover.addDependent(this.oPopover._oAriaLabelledByText);this.oPopover.addAriaLabelledBy(this.oPopover._oAriaLabelledByText);this.oPopover.addStyleClass("sapUshellNotificationsPopup");this.oPopover.addStyleClass("sapContrastPlus");}return this.oPopover;},_toggleNotifications:function(s){var p=this._getPopover();var o=g();if(!o.$().width()){o=sap.ui.getCore().byId("endItemsOverflowBtn");}if(p.isOpen()){p.close();}else if(s!==false){this._resetCount();p.setContentWidth(q("body").width()>=600?"31.1rem":undefined);p.openBy(o);}},_resetCount:function(){this.oShellModel.setProperty("/notificationsCount",0);this.oNotificationsService.notificationsSeen();},exit:function(){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.services.Notifications","onNewNotifications",this._handleAlerts,this);if(this.oNotificationsService&&this.oNotificationsService.isEnabled()===true){this.oNotificationsService.destroy();}this.oNotificationsService=null;var n=g();if(n){this.oRenderer.hideHeaderEndItem(n,false);n.destroy();}this.oRenderer=null;if(this.oPopover){this.oPopover.destroy();this.oPopover=null;}this._aTimeouts.forEach(window.clearTimeout);}});});
sap.ui.predefine('sap/ushell/components/shell/Notifications/Notifications.controller',["sap/ui/Device","sap/ushell/utils","sap/ushell/resources","sap/m/Text","sap/m/VBox","sap/m/CustomListItem","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/base/Log","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/library","sap/ui/core/library"],function(D,u,r,T,V,C,q,K,L,J,M,m,c){"use strict";var P=c.Priority;var a=m.ListType;var F=m.FlexAlignItems;
function _(t){sap.ushell.Container.getServiceAsync("Message").then(function(o){o.error(t);});}
sap.ui.controller("sap.ushell.components.shell.Notifications.Notifications",{oPagingConfiguration:{MAX_NOTIFICATION_ITEMS_DESKTOP:400,MAX_NOTIFICATION_ITEMS_MOBILE:100,MIN_NOTIFICATION_ITEMS_PER_BUFFER:15,NOTIFICATION_ITEM_HEIGHT:(D.system.phone||D.system.tablet)?130:100,TAB_BAR_HEIGHT:100},onInit:function(){var i={};if(D.system.desktop){this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_DESKTOP;}else{this.iMaxNotificationItemsForDevice=this.oPagingConfiguration.MAX_NOTIFICATION_ITEMS_MOBILE;}this.oNotificationsService=sap.ushell.Container.getService("Notifications");this.oSortingType=this.oNotificationsService.getOperationEnum();i[this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING]=this.getInitialSortingModelStructure();i[this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING]={};this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.oPreviousByDateSorting=this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this.oPreviousTabKey="sapUshellNotificationIconTabByDate";this.sCurrentExpandedType=undefined;var o=new J(i);o.setSizeLimit(1500);this.getView().setModel(o);this.getView().setModel(r.i18nModel,"i18n");this.getNextBuffer();this._oTopNotificationData=undefined;},onAfterRendering:function(){this.removeTabIndexFromList(this.sCurrentSorting);var t=this.getView().byId("notificationIconTabBar--header");if(t){t.getDomRef().classList.remove("sapContrastPlus");}if(this.sCurrentSorting!==this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){if(this._oTopNotificationData){this.scrollToItem(this._oTopNotificationData);}}this.getView().$("-sapUshellNotificationIconTabByDate-text").attr("aria-label",r.i18n.getText("Notifications.ByDateDescending.AriaLabel"));this.getView().$("-sapUshellNotificationIconTabByType-text").attr("aria-label",r.i18n.getText("Notifications.ByType.AriaLabel"));this.getView().$("-sapUshellNotificationIconTabByPrio-text").attr("aria-label",r.i18n.getText("Notifications.ByPriority.AriaLabel"));},shouldFetchMoreNotifications:function(){var h=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/hasMoreItemsInBackend"),l=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/listMaxReached");return h&&!l;},getNextBuffer:function(){var s=this.sCurrentSorting,b=this.getItemsFromModel(s),n,p,N;if(!this.shouldFetchMoreNotifications()){return;}N=this.getNumberOfItemsToFetchOnScroll(s);if(N===0){this.getView().getModel().setProperty("/"+s+"/hasMoreItems",false);return;}if(b!==undefined){n=b.length;}if(n===0){this.addBusyIndicatorToTabFilter(s);}this.getView().getModel().setProperty("/"+s+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferBySortingType(s,n,N);p.done(function(R){var d=this.oNotificationsService._getNotificationSettingsAvalability();if(d.state()==="pending"){this.oNotificationsService._userSettingInitialization();}this.addBufferToModel(s,R);}.bind(this));p.fail(function(){if(n===0){this.removeBusyIndicatorToTabFilter(s);this.handleError();}}.bind(this));},getNextBufferForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),b=g?g.aNotifications:undefined,n=0,p,h=g?g.hasMoreItems:true;if(!h){return;}if(b!==undefined){n=b.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);p=this.oNotificationsService.getNotificationsBufferInGroup(s,n,this.iMaxNotificationItemsForDevice);p.done(function(R){this.addTypeBufferToModel(s,R,false);}.bind(this));p.fail(function(){this.getNextBufferFailHandler(S);}.bind(this));},addBufferToModel:function(s,R){var b=this.getItemsFromModel(s),i=b.length,d,h=R.length>=this.getNumberOfItemsToFetchOnScroll(s);this._oTopNotificationData=undefined;if(!R){this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",false);return;}this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",h);d=b.concat(R);this.getView().getModel().setProperty("/"+s+"/aNotifications",d);this.getView().getModel().setProperty("/"+s+"/inUpdate",false);if(d.length>=this.iMaxNotificationItemsForDevice){this.handleMaxReached(s);}if(i===0){this.removeBusyIndicatorToTabFilter(s);}},addTypeBufferToModel:function(t,R,o){var g=this.getGroupFromModel(t),G=this.getGroupIndexFromModel(t),b=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),d;if(!R){return;}if(R.length<this.getBasicBufferSize()){g.hasMoreItems=false;}if(!g.aNotifications||o){g.aNotifications=[];}d=g.aNotifications.concat(R);b[G].aNotifications=d;b[G].Busy=false;this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,b);this.getView().getModel().setProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING+"/inUpdate",false);},keydownHandler:function(k){var j,n,b;if(k.keyCode===K.DELETE){j=q(document.activeElement);if(j.hasClass("sapUshellNotificationsListItem")){n=j.next();b=j.find(".sapMNLB-CloseButton")[0];sap.ui.getCore().byId(b.id).firePress();if(n){n.focus();}}}},notificationsUpdateCallback:function(d){var t=this,s=this.sCurrentSorting,b,n,N;if(s===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){this.notificationsUpdateCallbackForType();d.resolve();return;}b=this.getItemsFromModel(s);if(b!==undefined){n=b.length;}this.cleanModel();N=this.getNumberOfItemsToFetchOnUpdate(n);this.oNotificationsService.getNotificationsBufferBySortingType(s,0,N).done(function(e){if(!e){return;}d.resolve();t.replaceItemsInModel(s,e,N);}).fail(function(e){L.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",e,"sap.ushell.components.shell.Notifications.Notifications");});},isMoreCircleExist:function(s){var S=this.getNotificationList(s),i=S.getItems().length,l=S.getItems()[i-1];return!!i&&l.getMetadata().getName()==="sap.m.CustomListItem";},handleMaxReached:function(s){var S=this.getNotificationList(s),n=Math.floor(this.oNotificationsService.getNotificationsCount()),i=n-this.iMaxNotificationItemsForDevice,I=this.isMoreCircleExist(s);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/moreNotificationCount",i);this.getView().getModel().setProperty("/"+this.sCurrentSorting+"/listMaxReached",i>=0);if(i>0&&!I){S.addItem(this.getMoreCircle(this.sCurrentSorting));}else if(i<=0&&I){S.removeItem(this.oMoreListItem);}},reAddFailedGroup:function(g){var o=this.getView().getModel(),G=o.getProperty("/notificationsByTypeDescending");G.splice(g.removedGroupIndex,0,g.oGroup);o.setProperty("/notificationsByTypeDescending",G);},removeGroupFromModel:function(g){var o=this.getView().getModel(),G=o.getProperty("/notificationsByTypeDescending"),R={oGroup:g,removedGroupIndex:undefined};G.some(function(b,i){if(b.Id===g.Id){R.removedGroupIndex=i;G.splice(i,1);o.setProperty("/notificationsByTypeDescending",G);return true;}return false;});this.sCurrentExpandedType=undefined;return R;},updateGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this,g=t.getView().getModel().getProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);p.fail(function(d){L.error("Notifications control - call to notificationsService.updateGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");});p.done(function(n){var j=JSON.parse(n),b=j.value;b.forEach(function(i){var f=false;g.forEach(function(d,I){if(d.Id===i.Id){g[I].GroupHeaderText=i.GroupHeaderText;g[I].CreatedAt=i.CreatedAt;f=true;}});if(!f){g.unshift(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g);});},updateNotificationsByDate:function(){var t=this.getNumberOfItemsToFetchOnScroll(this.sCurrentSorting);var b=this.getView().getModel().getProperty("/"+this.sCurrentSorting);this.oNotificationsService.getNotificationsBufferBySortingType(this.sCurrentSorting,0,t).done(function(n){n.forEach(function(d){for(var i=0;i<b.length;i++){if(b[i].Id===d.Id){b.unshift(d);break;}}});this.getView().getModel().setProperty("/"+this.sCurrentSorting,b);this.removeBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING);}.bind(this)).fail(function(e){L.error("Notifications control - call to notificationsService.getNotificationsBufferBySortingType failed: ",e,"sap.ushell.components.shell.Notifications.Notifications");this.removeBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING);}.bind(this));},reloadGroupHeaders:function(){var p=this.oNotificationsService.getNotificationsGroupHeaders(),t=this;p.fail(function(d){L.error("Notifications control - call to notificationsService.getNotificationsGroupHeaders failed: ",d,"sap.ushell.components.shell.Notifications.Notifications");t.removeBusyIndicatorToTabFilter(t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);});p.done(function(n){var j=JSON.parse(n),b=j.value,d=[];b.forEach(function(i){if(i.IsGroupHeader){i.Collapsed=true;d.push(i);}});t.getView().getModel().setProperty("/"+t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,d);t.removeBusyIndicatorToTabFilter(t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);});},markRead:function(n){var p=this.oNotificationsService.markRead(n),t=this;p.fail(function(){_(r.i18n.getText("notificationsFailedMarkRead"));t.setMarkReadOnModel(n,false);});this.setMarkReadOnModel(n,true);},onExit:function(){},onBeforeRendering:function(){if(!this._bDependencyCallbackRegistered){this._bDependencyCallbackRegistered=true;this.oNotificationsService.registerDependencyNotificationsUpdateCallback(this.notificationsUpdateCallback.bind(this),false);}},executeAction:function(n,A){return this.oNotificationsService.executeAction(n,A);},executeBulkAction:function(A,s,g,p){var t=g,o=this.oNotificationsService.executeBulkAction(g.Id,A),b,G=s,n=this.getView().getModel().getProperty(p+"/NotificationTypeDesc"),d=this;if(n===""){n=this.getView().getModel().getProperty(p+"/NotificationTypeKey");}o.fail(function(R){this.getView().getModel().setProperty(p+"/Busy",false);if(R&&R.succededNotifications&&R.succededNotifications.length){R.succededNotifications.forEach(function(N){this.removeNotificationFromModel(N);}.bind(this));d.cleanModel();}if(R.succededNotifications.length===1){b=r.i18n.getText("notificationsPartialSuccessExecuteBulkAction",[G,R.succededNotifications.length,R.failedNotifications.length+R.succededNotifications.length,n,R.failedNotifications.length]);M.show(b,{duration:4000});}else if(R.succededNotifications.length>1){b=r.i18n.getText("notificationsSingleSuccessExecuteBulkAction",[G,R.succededNotifications.length,R.failedNotifications.length+R.succededNotifications.length,n,R.failedNotifications.length]);M.show(b,{duration:4000});}else{b=r.i18n.getText("notificationsFailedExecuteBulkAction");_(b);}}.bind(this));o.done(function(){b=r.i18n.getText("notificationsSuccessExecuteBulkAction",[G,n]);M.show(b,{duration:4000});this.removeGroupFromModel(t);this.cleanModel();}.bind(this));},dismissNotification:function(n){var t=this,R=this.removeNotificationFromModel(n),p=this.oNotificationsService.dismissNotification(n);this.cleanModel();p.fail(function(){_(r.i18n.getText("notificationsFailedDismiss"));t.addNotificationToModel(R.obj,R.index);});},dismissBulkNotifications:function(g){var R=this.removeGroupFromModel(g),p=this.oNotificationsService.dismissBulkNotifications(g.Id);this.cleanModel();p.fail(function(){_(r.i18n.getText("notificationsFailedExecuteBulkAction"));this.reAddFailedGroup(R);}.bind(this));},onListItemPress:function(n,s,A,p){var v=sap.ui.getCore().byId("viewPortContainer");if(v){v.switchState("Center");}u.toExternalWithParameters(s,A,p);this.markRead(n);},scrollToItem:function(t){var j=this._getJqNotificationObjects(),b=j[0],d=j[1],e=j[2],f=j[3],i,n,g,h,k;if(b.length>0&&d.length>0&&e.length>0&&f.length>0){i=f.outerHeight(true)-window.parseInt(f.css("margin-top").replace("px",""));n=this.getIndexInModelByItemId(t.topItemId);n=n||0;g=n*i+window.parseInt(f.css("margin-top").replace("px",""));h=window.parseInt(d.css("padding-top").replace("px",""))+window.parseInt(e.css("padding-top").replace("px",""));k=b.offset().top;b.scrollTop(g+h+k-t.offSetTop);}this._oTopNotificationData=undefined;},_getJqNotificationObjects:function(){var j=q("#notificationIconTabBar-containerContent"),b=j.children(),d=b.children(),e=j.find("li").eq(0);return[j,b,d,e];},getTopOffSet:function(){var t=0,j=this._getJqNotificationObjects()[0];if(j.children().length>0&&j.children().children().length>0){t+=j.children().outerHeight()-j.children().height();t+=j.children().children().outerHeight()-j.children().children().height();}return t;},getTopItemOnTheScreen:function(){var j=this._getJqNotificationObjects()[0],t=0,i,b=0,d=this;t=this.getTopOffSet();j.find("li").each(function(){b=q(this).offset().top;if(b>=t){i=d.getItemNotificationId(this);return false;}});return{topItemId:i,offSetTop:b};},handleError:function(){_(r.i18n.getText("errorOccurredMsg"));},addBusyIndicatorToTabFilter:function(s){var l=this.getNotificationList(s);l.setBusy(true);l.setShowNoData(false);},removeBusyIndicatorToTabFilter:function(s){var l=this.getNotificationList(s);l.setBusy(false);l.setShowNoData(true);},addNotificationToModel:function(n,i){var o=this.getView().getModel(),b=o.getProperty("/"+this.sCurrentSorting+"/aNotifications");b.splice(i,0,n);o.setProperty("/"+this.sCurrentSorting+"/aNotifications",b);},removeNotificationFromModel:function(n){var o=this.getView().getModel(),g,b,N,R={};if(this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING||this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){N="/"+this.sCurrentSorting+"/aNotifications";b=o.getProperty(N);b.some(function(d,i,e){if(d.Id&&d.Id===n){R.obj=e.splice(i,1)[0];R.index=i;return true;}return false;});o.setProperty(N,b);return R;}g=o.getProperty("/notificationsByTypeDescending");for(var i=0;i<g.length;i++){b=g[i].aNotifications;if(b){if(b.length===1&&b[0].Id===n){g.splice(i,1);}else{b.some(function(d,i,e){if(d.Id&&d.Id===n){R.obj=e.splice(i,1)[0];R.index=i;return true;}return false;});g[i].aNotifications=b;}}}this.updateGroupHeaders();o.setProperty("/notificationsByTypeDescending",g);return R;},getIndexInModelByItemId:function(n){var N,i;if(this.notificationsByTypeDescending===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){N=this.getView().getModel().getProperty("/"+this.sCurrentExpandedType+"/aNotifications");}else{N=this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/aNotifications");}if(N===undefined||N.length===0){return 0;}for(i=0;i<N.length;i++){if(N[i].Id===n){return i;}}},cleanModel:function(){var t=this,s=this.getView().getModel().getProperty("/");Object.keys(s).forEach(function(S){if(S!==t.sCurrentSorting&&S!==t.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING){s[S]=t.getInitialSortingModelStructure();}});this.getView().getModel().setProperty("/",s);},replaceItemsInModel:function(s,R,n){var b=this.getItemsFromModel(s),i=b.length,h=R.length>=n;if(i){this._oTopNotificationData=this.getTopItemOnTheScreen();}this.getView().getModel().setProperty("/"+s+"/hasMoreItemsInBackend",h);this.getView().getModel().setProperty("/"+s+"/aNotifications",R);this.getView().getModel().setProperty("/"+s+"/inUpdate",false);this.handleMaxReached(s);},setMarkReadOnModel:function(n,I){var o=this.getView().getModel(),p="/"+this.sCurrentSorting,N,d,g,i;d=o.getProperty(p);if(this.sCurrentSorting==="notificationsByTypeDescending"){for(i=0;i<d.length;i++){if(d[i].Id===this.sCurrentExpandedType){p=p+"/"+i;g=true;break;}}if(!g){return;}}p=p+"/aNotifications";N=o.getProperty(p);N.some(function(b){if(b.Id===n){b.IsRead=I;return true;}return false;});o.setProperty(p,N);},onTabSelected:function(e){var k=e.getParameter("key");if(k==="sapUshellNotificationIconTabByDate"){var b;if(this.oPreviousTabKey==="sapUshellNotificationIconTabByDate"){b=this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING?this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING:this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING;this._changeDateListBinding(b,e.getParameter("item"));this.oPreviousByDateSorting=b;}else{b=this.oPreviousByDateSorting;}this.sCurrentSorting=b;this.updateNotificationsByDate();}else if(k==="sapUshellNotificationIconTabByType"&&this.oPreviousTabKey!=="sapUshellNotificationIconTabByType"){this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING;this.addBusyIndicatorToTabFilter(this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);this.reloadGroupHeaders();this.getView().byId("notificationIconTabBar").addStyleClass("sapUshellNotificationIconTabByTypeWithBusyIndicator");}else{this.sCurrentSorting=this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING;if(this.getItemsFromModel(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING).length===0){this.getNextBuffer(this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING);}}this.oPreviousTabKey=k;},_changeDateListBinding:function(s,t){var l=new Promise(function(b,d){sap.ui.require(["sap/ui/core/Fragment"],function(e){e.load({name:"sap.ushell.components.shell.Notifications.NotificationsListItem",type:"XML",controller:this}).then(b).catch(d);}.bind(this),d);}.bind(this));if(s===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING){t.$("text").attr("aria-label",r.i18n.getText("Notifications.ByDateDescending.AriaLabel"));l.then(function(f){this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateDescending/aNotifications",f);}.bind(this));}else{t.$("text").attr("aria-label",r.i18n.getText("Notifications.ByDateAscending.AriaLabel"));l.then(function(f){this.getView().byId("sapUshellNotificationsListDate").bindItems("/notificationsByDateAscending/aNotifications",f);}.bind(this));}},onNotificationItemPress:function(e){var o=e.getSource().getBindingContextPath(),b=this.getView().getModel().getProperty(o),s=b.NavigationTargetObject,A=b.NavigationTargetAction,p=b.NavigationTargetParams,n=b.Id;this.onListItemPress(n,s,A,p);},onNotificationItemClose:function(e){this._retainFocus();var n=e.getSource().getBindingContextPath(),N=this.getView().getModel().getProperty(n),s=N.Id;this.dismissNotification(s);},onNotificationItemButtonPress:function(e){this._retainFocus();var n=e.getSource().getBindingContext().getPath(),o=this.getView().getModel(),N=o.getProperty(n),p=n.split("/"),t=this.sCurrentSorting===this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,s=t?"/"+p[1]+"/"+p[2]+"/"+p[3]+"/"+p[4]:"/"+p[1]+"/"+p[2]+"/"+p[3],b=o.getProperty(s),d=b.Id;o.setProperty(s+"/Busy",true);this.executeAction(d,N.ActionId).done(function(f){if(f&&f.isSucessfull){sap.ui.require(["sap/m/MessageToast"],function(M){if(f.message&&f.message.length){M.show(f.message,{duration:4000});}else{var A=N.ActionText;M.show(r.i18n.getText("ActionAppliedToNotification",A),{duration:4000});}});if(f.DeleteOnReturn!==false){this.removeNotificationFromModel(d);this.oNotificationsService._addDismissNotifications(d);this.cleanModel();}}else if(f){_(f.message);}else{_(r.i18n.getText("notificationsFailedExecuteAction"));}o.setProperty(s+"/Busy",false);}.bind(this)).fail(function(){o.setProperty(s+"/Busy",false);_(r.i18n.getText("notificationsFailedExecuteAction"));});},onNotificationGroupItemClose:function(e){var n=e.getSource().getBindingContext().getPath(),p=n.split("/"),s="/"+p[1]+"/"+p[2],N=this.getView().getModel().getProperty(s);this.dismissBulkNotifications(N);},onNotificationGroupItemCollapse:function(e){var g=e.getSource(),p=g.getBindingContext().getPath();if(!g.getCollapsed()){this.getView().getModel().setProperty(p+"/Busy",true);this.expandedGroupIndex=p.substring(p.lastIndexOf("/")+1);this.onExpandGroup(g);}},onNotificationGroupItemButtonPress:function(e){var o=this.getView().getModel(),n=e.getSource().getBindingContext().getPath(),N=o.getProperty(n),p=n.split("/"),s="/"+p[1]+"/"+p[2],b=o.getProperty(s);this._retainFocus();o.setProperty(s+"/Busy",true);this.executeBulkAction(N.ActionId,e.getSource().getProperty("text"),b,s);},onListUpdateStarted:function(e){if(e.getParameter("reason")==="Growing"){if(!this.getView().getModel().getProperty("/"+this.sCurrentSorting+"/inUpdate")){this.getNextBuffer();}}},getNumberOfItemsInScreen:function(){var i,h=this.getWindowSize();i=(h-this.oPagingConfiguration.TAB_BAR_HEIGHT)/this.oPagingConfiguration.NOTIFICATION_ITEM_HEIGHT;return Math.ceil(i);},getBasicBufferSize:function(){return Math.max(this.getNumberOfItemsInScreen()*3,this.oPagingConfiguration.MIN_NOTIFICATION_ITEMS_PER_BUFFER);},getWindowSize:function(){return q(window).height();},getNumberOfItemsToFetchOnScroll:function(s){var i=this.getItemsFromModel(s).length,b=this.getBasicBufferSize();if(i>=this.iMaxNotificationItemsForDevice){return 0;}if(i+b>this.iMaxNotificationItemsForDevice){return this.iMaxNotificationItemsForDevice-i;}return b;},getNumberOfItemsToFetchOnUpdate:function(n){var b=this.getBasicBufferSize(),N=Math.ceil(n/b),R;R=N>0?N*b:b;return R>this.iMaxNotificationItemsForDevice?this.iMaxNotificationItemsForDevice:R;},getItemsFromModel:function(s){if(s===undefined){s=this.sCurrentSorting;}return this.getView().getModel().getProperty("/"+s+"/aNotifications");},getItemsOfTypeFromModel:function(t){var g=this.getGroupFromModel(t);if(g){return g.aNotifications?g.aNotifications:[];}return[];},getGroupFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING);return g.find(function(b){return b.Id===t;});},getGroupIndexFromModel:function(t){var g=this.getView().getModel().getProperty("/"+this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING),i;g.forEach(function(b,d){if(b.Id===t){i=d;return true;}});return i;},getItemNotificationId:function(e){var i,I;i=sap.ui.getCore().byId(e.getAttribute("Id")).getBindingContext().sPath;I=this.getView().getModel().getProperty(i+"/Id");return I;},getInitialSortingModelStructure:function(){return{hasMoreItemsInBackend:true,listMaxReached:false,aNotifications:[],inUpdate:false,moreNotificationCount:""};},onExpandGroup:function(g){var l=this.getView().byId("sapUshellNotificationsListType").getItems(),b=g.getId(),G=this.getView().getModel().getProperty(g.getBindingContextPath()),t=this;t.sCurrentExpandedType=G.Id;t.getView().getModel().setProperty(g.getBindingContextPath()+"/aNotifications",[]);t.getView().getModel().setProperty(g.getBindingContextPath()+"/hasMoreItems",true);l.forEach(function(i,d){if(i.getId()===b){t.getNextBufferForType();}else if(i.getId()!==b&&!i.getCollapsed()){i.setCollapsed(true);t.getView().getModel().setProperty(i.getBindingContextPath()+"/hasMoreItems",true);}});},notificationsUpdateCallbackForType:function(){var s=this.sCurrentExpandedType,S=this.oSortingType.NOTIFICATIONS_BY_TYPE_DESCENDING,g=this.getGroupFromModel(s),b=g?g.aNotifications:undefined,n=0,p;if(b!==undefined){n=b.length;}this.getView().getModel().setProperty("/"+S+"/inUpdate",true);this.updateGroupHeaders();if(s){p=this.oNotificationsService.getNotificationsBufferInGroup(s,0,this.getNumberOfItemsToFetchOnUpdate(n));p.done(function(R){this.addTypeBufferToModel(s,R,true);}.bind(this));p.fail(function(R){this.getNextBufferFailHandler(R);}.bind(this));}},getNotificationList:function(s){var l;if(s===this.oSortingType.NOTIFICATIONS_BY_DATE_DESCENDING||s===this.oSortingType.NOTIFICATIONS_BY_DATE_ASCENDING){l=this.getView().byId("sapUshellNotificationsListDate");}else if(s===this.oSortingType.NOTIFICATIONS_BY_PRIORITY_DESCENDING){l=this.getView().byId("sapUshellNotificationsListPriority");}else{l=this.getView().byId("sapUshellNotificationsListType");}return l;},removeTabIndexFromList:function(s){var l=this.getNotificationList(s);var o=l.$().children().get(1);if(o){o.removeAttribute("tabindex");}},getMoreCircle:function(t){var o=new T({text:r.i18n.getText("moreNotifications")}),n=new T({text:""}).addStyleClass("sapUshellNotificationsMoreCircleCount"),b=new V({items:[n,o],alignItems:F.Center}).addStyleClass("sapUshellNotificationsMoreCircle"),B=new T({text:r.i18n.getText("moreNotificationsAvailable_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),d=new T({text:r.i18n.getText("processNotifications_message"),textAlign:"Center"}).addStyleClass("sapUshellNotificationsMoreHelpingText"),v=new V({items:[b,B,d]}).addStyleClass("sapUshellNotificationsMoreVBox"),l=new C({type:a.Inactive,content:v}).addStyleClass("sapUshellNotificationsMoreListItem");n.setModel(this.getView().getModel());n.bindText("/"+t+"/moreNotificationCount");this.oMoreListItem=l;return l;},_retainFocus:function(){var i=this.getView().byId("notificationIconTabBar"),k=i.getSelectedKey(),I=i.getItems(),s=0;I.forEach(function(o,b){if(o.getKey()===k){s=b;}});I[s].focus();},priorityFormatter:function(p){if(p){p=p.charAt(0)+p.substr(1).toLowerCase();return P[p];}}});});
sap.ui.predefine('sap/ushell/components/shell/PostLoadingHeaderEnhancement/Component',["sap/ui/Device","sap/ui/core/Component","sap/ui/core/CustomData","sap/ui/core/IconPool","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/shell/ShellHeadItem"],function(D,C,a,I,b,E,u,r,A,c,S){"use strict";var F=S.prototype.FloatingNumberType;var d=u.AppTitleState;var e=[];return C.extend("sap.ushell.components.shell.PostLoadingHeaderEnhancement.Component",{metadata:{library:"sap.ushell"},init:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellConfig();e.push(this._createHomeButton(s));e.push(this._createBackButton());e.push(this._createOverflowButton());if(s.moveAppFinderActionToShellHeader&&b.last("/core/catalog/enabled")&&!s.disableAppFinder){e.push(this._createAppFinderButton());}if(s.moveContactSupportActionToShellHeader){this._createSupportButton().then(function(B){e.push(B);});}this._createShellNavigationMenu(s);var o=sap.ui.getCore().byId("shell-header");o.updateAggregation("headItems");o.updateAggregation("headEndItems");},_createHomeButton:function(s){var h=new S({id:"homeBtn",tooltip:r.i18n.getText("homeBtn_tooltip"),ariaLabel:r.i18n.getText("homeBtn_tooltip"),icon:I.getIconURI("home"),target:"{/homeUri}"});if(b.last("/core/extension/enableHelp")){h.addStyleClass("help-id-homeBtn",true);}h.addCustomData(new c({key:"aria-disabled",value:"false",writeToDom:true}));if(D.system.desktop){h.addEventDelegate({onsapskipback:function(o){if(A.getAppKeysHandler()){o.preventDefault();A.bFocusOnShell=false;}},onsapskipforward:function(o){if(A.getAppKeysHandler()){o.preventDefault();A.bFocusOnShell=false;}}});}return h.getId();},_createBackButton:function(){var B=sap.ui.getCore().getConfiguration().getRTL()?"feeder-arrow":"nav-back";var o=new S({id:"backBtn",tooltip:r.i18n.getText("backBtn_tooltip"),ariaLabel:r.i18n.getText("backBtn_tooltip"),icon:I.getIconURI(B),press:function(){E.emit("navigateBack",Date.now());}});return o.getId();},_createOverflowButton:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController().getModel();var o=new S({id:"endItemsOverflowBtn",tooltip:{path:"/notificationsCount",formatter:function(n){return this.tooltipFormatter(n);}},ariaLabel:r.i18n.getText("shellHeaderOverflowBtn_tooltip"),ariaHaspopup:"dialog",icon:"sap-icon://overflow",floatingNumber:"{/notificationsCount}",floatingNumberType:F.OverflowButton,press:function(f){E.emit("showEndItemOverflow",f.getSource().getId(),true);}});o.setModel(s);return o.getId();},_createAppFinderButton:function(){var o=new S({id:"openCatalogBtn",text:r.i18n.getText("open_appFinderBtn"),tooltip:r.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",target:"#Shell-appfinder"});if(b.last("/core/extension/enableHelp")){o.addStyleClass("help-id-openCatalogActionItem");}return o.getId();},_createSupportButton:function(){return new Promise(function(R){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(f){var B="ContactSupportBtn";var s=sap.ui.getCore().byId(B);if(!s){var t=new f("tempContactSupportBtn",{visible:true});var i=t.getIcon();var T=t.getText();s=new S({id:B,icon:i,tooltip:T,text:T,ariaHaspopup:"dialog",press:function(){t.firePress();}});}R(B);});});},_createShellNavigationMenu:function(s){sap.ui.require(["sap/m/StandardListItem","sap/ushell/ui/shell/NavigationMiniTile","sap/ushell/ui/shell/ShellNavigationMenu"],function(f,N,g){var m="shellNavigationMenu";var h=function(k,l){var n=l.getProperty("icon")||"sap-icon://circle-task-2",t=l.getProperty("title"),p=l.getProperty("subtitle"),q=l.getProperty("intent");var L=(new f({type:"Active",title:t,description:p,icon:n,wrapping:true,customData:[new a({key:"intent",value:q})],press:function(){if(q&&q[0]==="#"){E.emit("navigateFromShellApplicationNavigationMenu",q,true);}}})).addStyleClass("sapUshellNavigationMenuListItems");return L;};var R=function(k,l){var n=l.getProperty("icon"),t=l.getProperty("title"),p=l.getProperty("subtitle"),q=l.getProperty("intent");return new N({title:t,subtitle:p,icon:n,intent:q,press:function(){var T=this.getIntent();if(T&&T[0]==="#"){E.emit("navigateFromShellApplicationNavigationMenu",T,true);}}});};var o=new g(m,{title:"{/application/title}",icon:"{/application/icon}",showTitle:"{/application/showNavMenuTitle}",showRelatedApps:s.appState!=="lean",items:{path:"/application/hierarchy",factory:h.bind(this)},miniTiles:{path:"/application/relatedApps",factory:R.bind(this)},visible:{path:"/ShellAppTitleState",formatter:function(k){return k===d.ShellNavMenu;}}});sap.ushell.Container.getRenderer("fiori2").getShellController().handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));var i=sap.ui.getCore().byId("shell-header");o.setModel(i.getModel());var j=sap.ui.getCore().byId("shellAppTitle");if(j){j.setNavigationMenu(o);}e.push(m);return m;}.bind(this));},exit:function(){e.forEach(function(s){var o=sap.ui.getCore().byId(s);if(o){o.destroy();}});e=[];}});});
sap.ui.predefine('sap/ushell/components/shell/ProductSwitch/Component',["sap/base/Log","sap/ui/Device","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/shell/ShellHeadItem"],function(L,D,U,J,C,r,W,S){"use strict";
function g(){return sap.ui.getCore().byId("productSwitchBtn");}
function a(){return sap.ui.getCore().byId("sapUshellProductSwitchPopover");}
return U.extend("sap.ushell.components.shell.ProductSwitch.Component",{metadata:{version:"1.96.0",library:"sap.ushell.components.shell.ProductSwitch",dependencies:{libs:{"sap.m":{},"sap.f":{lazy:true}}}},createContent:function(){this.oModel=this._getModel();},_getModel:function(){var t=this,m=new J();m.loadData(C.last("/core/productSwitch/url")).then(function(){var p=m.getData();if(p.length===0){L.debug("There are no other profucts configured for your user. ProductSwitch button will be hidden.");}else{t._addProductSwitchButtonToHeader();}}).catch(function(e){L.debug(e);});return m;},_openProductSwitch:function(){var p=a(),l=Promise.resolve();if(!p){l=new Promise(function(b,c){sap.ui.require(["sap/ui/core/Fragment"],function(F){F.load({name:"sap.ushell.components.shell.ProductSwitch.ProductSwitch",type:"XML",controller:this}).then(b).catch(c);}.bind(this),c);}.bind(this)).then(function(b){p=b;p.setModel(this.oModel);p.setModel(r.i18nModel,"i18n");if(D.system.phone){p.setShowHeader(true);}}.bind(this));}l.then(function(){var s=g();if(!s||!s.$().width()){s=sap.ui.getCore().byId("endItemsOverflowBtn");}p.openBy(s);});return l;},onProductItemPress:function(e){var t=e.getParameter("itemPressed").getTargetSrc();a().close();W.openURL(t,"_blank");},_addProductSwitchButtonToHeader:function(){var p=new S({id:"productSwitchBtn",icon:"sap-icon://grid",visible:true,tooltip:r.i18n.getText("productSwitch_tooltip"),text:r.i18n.getText("productSwitch"),ariaHaspopup:"dialog",press:this._openProductSwitch.bind(this)});sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem([p.getId()],false);},exit:function(){var p=a();if(!p){p.destroy();}var h=g();if(h){h.destroy();}}});});
sap.ui.predefine('sap/ushell/components/shell/Search/Component',["sap/ushell/resources","sap/ui/core/UIComponent","sap/ui/core/IconPool","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/jquery"],function(r,U,I,H,q){"use strict";return U.extend("sap.ushell.components.shell.Search.Component",{metadata:{manifest:"json",library:"sap.ushell"},createContent:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellController(),S=s.getView(),o=(S.getViewData()?S.getViewData().config:{})||{};var t=this;var b=(o.enableSearch!==false);if(b){var _=function(i){if(!t._searchShellHelperDeferred){t._searchShellHelperDeferred=new q.Deferred();sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/SearchShellHelperAndModuleLoader","sap/esh/search/ui/SearchShellHelper"],function(d,e){if(i){e.init();}t._searchShellHelperDeferred.resolve(e);});});}return t._searchShellHelperDeferred;};var a={id:"sf",tooltip:"{i18n>searchbox_tooltip}",text:"{i18n>searchBtn}",ariaLabel:"{i18n>searchbox_tooltip}",icon:I.getIconURI("search"),visible:true,showSeparator:false,press:function(e){_(false).done(function(d){d.onShellSearchButtonPressed(e);});}};var c=sap.ushell.Container.getRenderer("fiori2").addHeaderEndItem("sap.ushell.ui.shell.ShellHeadItem",a,true,false);c.setModel(r.i18nModel,"i18n");if(o.openSearchAsDefault){_(true).done(function(d){d.setDefaultOpen(true);});}t.oHashChanger=H.getInstance();t.oHashChanger.attachEvent("shellHashChanged",function(d){var h=d.mParameters;setTimeout(function(){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/HashChangeHandler"],function(e){e.handle(h);});});},6000);});c.addEventDelegate({onsapskipforward:function(e){e.preventDefault();q("#sapUshellHeaderAccessibilityHelper").focus();},onsapskipback:function(e){e.preventDefault();q("#sapUshellHeaderAccessibilityHelper").focus();},onAfterRendering:function(){q("#sf").attr("aria-pressed",false);}});}sap.ui.getCore().getEventBus().publish("shell","searchCompLoaded",{delay:0});},exit:function(){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem("sf");var s=sap.ui.getCore().byId("sf");if(s){s.destroy();}}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/Component',["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/components/shell/Settings/ProfilingLoader","sap/ushell/components/shell/Settings/userAccount/UserAccountEntry","sap/ushell/components/shell/Settings/appearance/AppearanceEntry","sap/ushell/components/shell/Settings/homepage/HomepageEntry","sap/ushell/components/shell/Settings/spaces/SpacesEntry","sap/ushell/components/shell/Settings/userActivities/UserActivitiesEntry","sap/ushell/components/shell/Settings/userProfiling/UserProfilingEntry","sap/ushell/components/shell/Settings/notifications/NotificationsEntry","sap/ushell/components/shell/Settings/userDefaults/UserDefaultsEntry","sap/ushell/components/shell/Settings/userLanguageRegion/UserLanguageRegionEntry","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/components/shell/Settings/search/SearchEntry"],function(X,U,J,C,E,r,l,a,A,H,S,b,c,N,d,e,f,g){"use strict";var D=[];return U.extend("sap.ushell.components.shell.Settings.Component",{metadata:{version:"1.96.0",library:"sap.ushell",dependencies:{libs:{"sap.m":{},"sap.ui.layout":{lazy:true}}}},init:function(){U.prototype.init.apply(this,arguments);var s=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(s.moveUserSettingsActionToShellHeader){this.oSettingsBtn=this._addUserSettingsButton();}this._addStandardEntityToConfig();l();this._addNotificationSettings().then(function(o){if(o.notificationsAvailable&&this.oSettingsView){this.oSettingsView.setModel(C.createModel("/core/userPreferences",J));}}.bind(this));D.push(E.on("openUserSettings").do(this._openUserSettings.bind(this)));},_addStandardEntityToConfig:function(){var h=C.last("/core/userPreferences/entries");h.push(a.getEntry());h.push(A.getEntry());if(C.last("/core/spaces/configurable")){h.push(S.getEntry());}h.push(e.getEntry());if(C.last("/core/shell/enableRecentActivity")){h.push(b.getEntry());}h.push(c.getEntry());if(C.last("/core/shell/model/searchAvailable")){g.getEntry().then(function(s){s.isActive().then(function(i){if(!i){return;}h=C.last("/core/userPreferences/entries");h.push(s);C.emit("/core/userPreferences/entries",h);});});}if(C.last("/core/home/enableHomePageSettings")&&!C.last("/core/spaces/enabled")){h.push(H.getEntry());}if(C.last("/core/shell/model/userDefaultParameters")){h.push(d.getEntry());}h=sap.ushell.Container.getRenderer("fiori2").reorderUserPrefEntries(h);C.emit("/core/userPreferences/entries",h);},_addNotificationSettings:function(){var R={notificationsAvailable:false};if(C.last("/core/shell/model/enableNotifications")){sap.ushell.Container.getServiceAsync("Notifications").then(function(s){s._userSettingInitialization();s._getNotificationSettingsAvalability().done(function(h){if(h.settingsAvailable){var i=C.last("/core/userPreferences/entries");i.push(N.getEntry());C.emit("/core/userPreferences/entries",i);R.notificationsAvailable=true;return Promise.resolve(R);}return Promise.resolve(R);});});}return Promise.resolve(R);},_openUserSettings:function(o){if(!this.oDialog){X.create({id:"settingsView",viewName:"sap.ushell.components.shell.Settings.UserSettings"}).then(function(s){this.oSettingsView=s;var m=C.createModel("/core/userPreferences",J);s.setModel(m);s.setModel(r.i18nModel,"i18n");this.oDialog=s.byId("userSettingsDialog");var h=o.controlId||"shell-header";sap.ui.getCore().byId(h).addDependent(s);this.oDialog.open();}.bind(this));}else{this.oDialog.open();}},_addUserSettingsButton:function(){var u=new f({id:"userSettingsBtn",icon:"sap-icon://action-settings",tooltip:r.i18n.getText("userSettings"),text:r.i18n.getText("userSettings"),ariaHaspopup:"dialog",press:this._openUserSettings.bind(this)});sap.ushell.Container.getRenderer("fiori2").oShellModel.addHeaderEndItem([u.getId()],false,["home","app","minimal","standalone","embedded","embedded-home","merged","merged-home"],true);return u;},exit:function(){for(var i=0;i<D.length;i++){D[i].off();}if(this.oSettingsView){this.oSettingsView.destroy();this.oSettingsView=null;this.oDialog=null;}if(this.oSettingsBtn){this.oSettingsBtn.destroy();this.oSettingsBtn=null;}}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/ErrorMessageHelper',[],function(){"use strict";var u="sapUshellSettingsDialog/";var m=sap.ui.getCore().getMessageManager();return{addMessage:a,filterMessagesToDisplay:f,removeErrorMessages:r};
function a(b){b.setTargets([u]);m.addMessages(b);}
function f(){return m.getMessageModel().getData().filter(function(M){return M.getTarget()&&M.getTarget().indexOf(u)===0;});}
function r(){m.getMessageModel().getData().forEach(function(M){if(M.getTarget()&&M.getTarget().indexOf(u)===0){m.removeMessages(M);}});}
});
sap.ui.predefine('sap/ushell/components/shell/Settings/ProfilingLoader',["sap/ushell/Config"],function(C){"use strict";
function _(){return new Promise(function(r){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(U){if(U.systemEnabled()&&U.isSetUsageAnalyticsPermitted()){sap.ui.require(["sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsProfiling"],function(a){var p=C.last("/core/userPreferences/profiling");p.push(a.getProfiling());C.emit("/core/userPreferences/profiling",p);r();});}else{r();}});});}
return function l(){return Promise.all([_()]);};});
sap.ui.predefine('sap/ushell/components/shell/Settings/UserSettings.controller',["sap/base/Log","sap/base/util/UriParameters","sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/components/shell/Settings/ErrorMessageHelper","sap/ui/core/message/Message","sap/ushell/components/shell/Settings/UserSettingsErrorMessagePopover","sap/ui/core/MessageType"],function(L,U,C,F,J,D,E,r,u,w,a,M,b,c){"use strict";return C.extend("sap.ushell.components.shell.Settings.UserSettings",{onInit:function(){this.getView().byId("userSettingEntryList").addEventDelegate({onAfterRendering:this._listAfterRendering.bind(this)});this.getView().byId("userSettingsDialog").addEventDelegate({onkeydown:this._keyDown.bind(this)});D.orientation.attachHandler(function(){var s=this.getView().byId("settingsApp");this._updateHeaderButtonVisibility(s.isMasterShown());}.bind(this));},_afterClose:function(){if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}},_keyDown:function(e){if(e.keyCode===27){this._handleCancelButtonPress();}},_listAfterRendering:function(){var m=this.getView().byId("userSettingEntryList");var e=m.getItems();for(var i=0;i<e.length;i++){var p=e[i].getBindingContextPath();this._setEntryValueResult(p);}if(!D.system.phone){var f=m.getItems()[0];if(f){m.setSelectedItem(f);this._toDetail(f);f.getDomRef().focus();}}},_setEntryValueResult:function(e){var m=this.getView().getModel(),v=m.getProperty(e+"/valueArgument"),V=m.getProperty(e+"/valueResult");if(typeof v==="function"){m.setProperty(e+"/valueResult",r.i18n.getText("genericLoading"));try{v().then(function(f){if(f&&f.value!==undefined){m.setProperty(e+"/visible",!!f.value);}var s;if(typeof(f)==="object"){s=f.displayText||"";}else{s=f||"";}m.setProperty(e+"/valueResult",s);},function(){m.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));});}catch(d){L.error("Can not load value for "+m.getProperty(e+"/title")+" entry",d);m.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));}}else if(V===null||V===undefined){m.setProperty(e+"/valueResult",v||"");}},_navBackButtonPressHandler:function(){var s=this.getView().byId("settingsApp");s.backDetail();this._updateHeaderButtonVisibility(true);},_navToggleButtonPressHandler:function(){var s=this.getView().byId("settingsApp"),i=s.isMasterShown();if(i){s.hideMaster();}else{s.showMaster();}this._updateHeaderButtonVisibility(!i);},_updateHeaderButtonVisibility:function(i){if(D.system.phone){var B=this.getView().byId("userSettingsNavBackButton");B.setVisible(!i);}else{var m=this.getView().byId("userSettingsMenuButton");if(D.orientation.portrait){m.setVisible(true);m.setPressed(i);m.setTooltip(r.i18n.getText(i?"ToggleButtonHide":"ToggleButtonShow"));}else{m.setVisible(false);}}},_itemPress:function(e){this._toDetail(e.getSource().getSelectedItem());},_toDetail:function(s){var m=this.getView().getModel(),e=s.getBindingContextPath(),d=m.getProperty(e+"/contentResult");if(D.system.phone){s.setSelected(false);}if(d){this._navToDetail(d,e);return Promise.resolve();}var o=m.getProperty(e);return this._createEntryContent(o).then(function(n){m.setProperty(e+"/contentResult",n);this._navToDetail(n,e);}.bind(this));},_createEntryContent:function(e){var t=this;var o=this._addContentWrapper(e);if(typeof e.contentFunc==="function"){e.contentFunc().then(function(d){if(d instanceof sap.ui.core.Control){o=o.then(function(p){p.addContent(d);p.setBusy(false);return p;});}else{o=o.then(t._addErrorContentToWrapper.bind(null,r.i18n.getText("loadingErrorMessage")));}},function(d){L.error("Can not load content for "+e.title+" entry",d);o=o.then(t._addErrorContentToWrapper.bind(null,r.i18n.getText("loadingErrorMessage")));});}else{o=o.then(this._addErrorContentToWrapper.bind(null,r.i18n.getText("userSettings.noContent")));}return o.then(function(p){return p.getId();});},_addContentWrapper:function(e){var t=this;return F.load({name:"sap.ushell.components.shell.Settings.ContentWrapper"}).then(function(p){var m=new J({title:e.title,showHeader:!e.provideEmptyWrapper});p.setModel(m,"entryInfo");t.getView().byId("settingsApp").addDetailPage(p);return p;});},_addErrorContentToWrapper:function(m,p){return F.load({name:"sap.ushell.components.shell.Settings.ErrorContent"}).then(function(e){p.setBusy(false);p.getModel("entryInfo").setProperty("/errorMessage",m);p.addContent(e);return p;});},_navToDetail:function(i,e){var s=this.getView().byId("settingsApp");s.toDetail(i);if(s.getMode()==="ShowHideMode"){s.hideMaster();this._updateHeaderButtonVisibility(false);}this._emitEntryOpened(e);},_emitEntryOpened:function(e){var d=E.last("UserSettingsOpened")||{},o=this.getView().getModel().getProperty(e),i=o.id;if(!i){i=u._getUid();this.getView().getModel().setProperty(e+"/id",i);}d[i]=true;E.emit("UserSettingsOpened",d);},_createMessagePopover:function(){if(!this.oMessagePopover){return b.create().then(function(m){m.setModel(this.getView().getModel("i18n"),"i18n");this.oMessagePopover=m;}.bind(this));}return Promise.resolve();},_handleMessagePopoverPress:function(e){this.oMessagePopover.toggle(e.getSource());},_handleSaveButtonPress:function(){a.removeErrorMessages();var t=this,d=this.getView().byId("userSettingsDialog"),e=this.getView().getModel().getProperty("/entries"),o=E.last("UserSettingsOpened")||{},s;if(Object.keys(o).length===0){this._handleSettingsDialogClose();this._showSuccessMessageToast();return Promise.resolve();}d.setBusy(true);s=e.reduce(function(R,f){if(o[f.id]){R.push(this._executeEntrySave(f));}return R;}.bind(this),[]);return Promise.all(s).then(function(R){var f=a.filterMessagesToDisplay();d.setBusy(false);if(f.length>0){var m=t.getView().byId("userSettingsMessagePopoverBtn");m.setText(f.length);m.setVisible(true);var O=new Promise(function(j){var k={onAfterRendering:function(){m.removeEventDelegate(k);j();}};m.invalidate();m.addEventDelegate(k);});var g="";f.forEach(function(j){g+="Entry: "+j.getAdditionalText()+" - Error message: "+j.getDescription()+"\n";});L.error("Failed to save the following entries",g);return Promise.all([O,t._createMessagePopover()]).then(function(){t.oMessagePopover.setModel(new J(f),"errorMessages");t.oMessagePopover.openBy(m);});}t._handleSettingsDialogClose();t._showSuccessMessageToast();E.emit("UserSettingsOpened",null);var h=false,n=false;var i=[];R.forEach(function(j){if(j&&j.refresh){h=true;}if(j&&j.noHash){n=true;}if(j&&j.urlParams&&j.urlParams.length>0){i=i.concat(j.urlParams);}});if(h&&!n){w.refreshBrowser(i);}else if(h&&n){window.location=window.location.href.replace(window.location.hash,"");}return Promise.resolve();});},_executeEntrySave:function(e){var o,R;function d(p){return p||{};}function f(h){var m;var s=e.id;var i=e.title;if(!h){m=r.i18n.getText("userSettings.SavingError.Undefined");}else if(typeof(h)==="string"){m=h;}else if(Array.isArray(h)){h.forEach(function(j){j.setAdditionalText(i);j.setTechnicalDetails({pluginId:s});a.addMessage(j);});return;}else if(h instanceof sap.ui.core.message.Message){h.setAdditionalText(i);h.setTechnicalDetails({pluginId:s});a.addMessage(h);return;}else{m=r.i18n.getText("userSettings.SavingError.WithMessage",h.message);}a.addMessage(new M({type:c.Error,additionalText:i,technicalDetails:{pluginId:s},description:m,message:m}));}try{sap.ushell.Container.getUser().resetChangedProperties();o=e.onSave();}catch(g){return f(g);}if(o&&o.promise){L.warning("jQuery.promise is used to save "+e.title+" settings entry.\n"+"The using of jQuery.promise for onSave is deprecated. Please use the native promise instead.");R=new Promise(function(h){o.done(function(p){h(d(p));}).fail(function(s){h(f(s));});});}else{R=o.then(d,f);}return R;},_showSuccessMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(d){var m=r.i18n.getText("savedChanges");d.show(m,{offset:"0 -50"});});},_handleCancelButtonPress:function(){var e=this.getView().getModel().getProperty("/entries");var i=E.last("UserSettingsOpened")||{};if(i){e.forEach(function(o){if(i[o.id]&&o.onCancel){try{o.onCancel();}catch(d){L.error("Failed to cancel the following entries",d);}}});}E.emit("UserSettingsOpened",null);this._handleSettingsDialogClose();},_handleSettingsDialogClose:function(){sap.ushell.Container.getUser().resetChangedProperties();if(D.system.phone){this.getView().byId("settingsApp").toMaster("settingsView--userSettingMaster");}this.getView().byId("userSettingsMessagePopoverBtn").setVisible(false);this.getView().byId("userSettingsDialog").close();}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/UserSettingsErrorMessagePopover',["sap/ui/core/Fragment","sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ushell/ui/footerbar/ContactSupportButton"],function(F,C,J,a){"use strict";var c={handleContactSupportButtonPress:function(){var o=new a();o.showContactSupportDialog();o.destroy();}};
function b(){var B=new J({contactSupportBtnEnable:sap.ushell.Container&&C.last("/core/extension/SupportTicket")});return F.load({name:"sap.ushell.components.shell.Settings.UserSettingsErrorMessagePopover",controller:c}).then(function(m){m.setModel(B,"buttonStates");return m;});}
return{create:b};});
sap.ui.predefine('sap/ushell/components/shell/Settings/appearance/Appearance.controller',["sap/base/Log","sap/ui/core/mvc/Controller","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ushell/resources","sap/ui/core/message/Message","sap/ui/core/MessageType","sap/ushell/services/DarkModeSupport"],function(L,C,E,a,b,q,J,P,D,r,M,c){"use strict";
function g(n,d){var l=Math.min(n.length,(d||"").length);var i=0;while(i<l&&n[i]===d[i]){i++;}return i?n.slice(0,i).trim():n;}
var S={base:"sapUshellBaseIconStyle",sap_bluecrystal:"sapUshellBlueCrystalIconStyle",sap_belize_hcb:"sapUshellHCBIconStyle sapUshellHCBIconStyleOnHCB",sap_belize_hcw:"sapUshellHCWIconStyle sapUshellHCWIconStyleOnHCW",sap_belize:"sapUshellBelizeIconStyle",sap_belize_plus:"sapUshellPlusIconStyle",sap_fiori_3_hcb:"sapUshellHCBIconStyle sapUshellHCBIconStyleOnHCB",sap_fiori_3_hcw:"sapUshellHCWIconStyle sapUshellHCWIconStyleOnHCW",sap_fiori_3:"sapUshellQuartzLightIconStyle",sap_fiori_3_dark:"sapUshellQuartzDarkIconStyle"};return C.extend("sap.ushell.components.shell.Settings.appearance.Appearance",{TILE_SIZE:{Small:0,Responsive:1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oUser=sap.ushell.Container.getUser();this.aThemeListFromServer=this.getView().getViewData().themeList||[];this.oPersonalizers={};var R=r.getTranslationModel();this.getView().setModel(R,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");this._oDarkModeModel=this.getDarkModeModel(this.aThemeListFromServer);this.getView().setModel(this._oDarkModeModel,"darkMode");var u=this.oUser.getTheme();this.getView().setModel(new J({options:this._getThemeListData(this.aThemeListFromServer,u)}));sap.ui.getCore().attachThemeChanged(this._handleThemeApplied,this);},onExit:function(){sap.ui.getCore().detachThemeChanged(this._handleThemeApplied,this);},_getThemeListData:function(t,s){if(this.oUser.isSetThemePermitted()===false){var n=s;for(var i=0;i<t.length;i++){if(t[i].id===s){n=t[i].name||s;break;}}return[{id:s,name:n}];}var d=this.getView().getModel("darkMode").getData(),e=this._isDarkModeActive();return t.reduce(function(l,T){var o={id:T.id,name:T.name||T.id||"",isVisible:true,isSelected:T.id===s,isSapTheme:!!S[T.id]};if(e&&d.supportedThemes[T.id]){var f=d.supportedThemes[T.id];if(f.complementaryTheme===s||T.id===s){o.isVisible=T.id===s;}else{o.isVisible=f.mode===sap.ushell.services.DarkModeSupport.Mode.LIGHT;}o.combineName=f.combineName;}l.push(o);return l;},[]).sort(function(f,h){var o=f.name.localeCompare(h.name);if(o===0){o=f.id.localeCompare(h.id);}return o;});},getConfigurationModel:function(){var o=new J({});o.setData({themeConfigurable:a.last("/core/shell/model/setTheme"),sizeBehaviorConfigurable:a.last("/core/home/sizeBehaviorConfigurable"),tileSize:this.TILE_SIZE[a.last("/core/home/sizeBehavior")],contentDensityConfigurable:a.last("/core/shell/model/contentDensity")&&!D.system.phone,isCozyContentMode:this.oUser.getContentDensity()==="cozy",sapUiContentIconColor:P.get("sapUiContentIconColor"),textAlign:D.system.phone?"Left":"Right"});return o;},getDarkModeModel:function(t){var d=new J({}),o={enabled:false,detectionSupported:false,detectionEnabled:true,isDarkThemeApplied:false,supportedThemes:{}};if(a.last("/core/darkMode/enabled")){o.enabled=true;var e=sap.ushell.Container.getService("DarkModeSupport");o.detectionSupported=e.canAutomaticallyToggleDarkMode();e.attachModeChanged(function(m){d.setProperty("/isDarkThemeApplied",m===sap.ushell.services.DarkModeSupport.Mode.DARK);});o.supportedThemes=this._getSupportedDarkModeThemes(t,a.last("/core/darkMode/supportedThemes")||[]);}d.setData(o);return d;},_getSupportedDarkModeThemes:function(t,s){var T=t.reduce(function(R,o){R[o.id]=o.name;return R;},{});return s.reduce(function(R,p){var l=p.light,d=p.dark,e=T[l],f=T[d];if(e&&f&&!R[l]&&!R[d]){var h=g(e,f);R[l]={mode:sap.ushell.services.DarkModeSupport.Mode.LIGHT,complementaryTheme:d,combineName:h};R[d]={mode:sap.ushell.services.DarkModeSupport.Mode.DARK,complementaryTheme:l,combineName:h};}return R;},{});},onAfterRendering:function(){var d=this._isDarkModeActive(),i=this.getView().getModel("config").getProperty("/themeConfigurable");var l=this.getView().byId("themeList"),e=l.getItems(),I,t;l.toggleStyleClass("sapUshellThemeListDisabled",!i);e.forEach(function(o,f){t=o.getCustomData()[0].getValue();I=o.getContent()[0].getItems()[0].getItems()[0];if(S[t]){I.addStyleClass(S[t]);}I.toggleStyleClass("sapUshellDarkMode",d);});},_handleThemeApplied:function(){var o=this.getView().getModel("config");if(o){o.setProperty("/sapUiContentIconColor",P.get("sapUiContentIconColor"));}},onCancel:function(){var o=this.getView().getModel("config");if(o.getProperty("/themeConfigurable")){var u=this.oUser.getTheme(),t=this.getView().getModel().getProperty("/options");t.forEach(function(T){T.isSelected=u===T.id;});this.getView().getModel().setProperty("/options",t);}if(o.getProperty("/contentDensityConfigurable")){o.setProperty("/isCozyContentMode",this.oUser.getContentDensity()==="cozy");}if(o.getProperty("/sizeBehaviorConfigurable")){o.setProperty("/tileSize",this.TILE_SIZE[a.last("/core/home/sizeBehavior")]);}},onSave:function(){var o=this.getView().getModel("config"),s=[];if(o.getProperty("/themeConfigurable")){s.push(this.onSaveThemes());}if(o.getProperty("/contentDensityConfigurable")){s.push(this.onSaveContentDensity());}if(o.getProperty("/sizeBehaviorConfigurable")){s.push(this.onSaveTileSize());}return Promise.all(s).then(function(R){var m=[];R.forEach(function(d){if(d&&d instanceof sap.ui.core.message.Message){m.push(d);}});return m.length>0?Promise.reject(m):Promise.resolve();});},onSaveThemes:function(){var o=this.getView().getModel("config"),t=this.getView().byId("themeList"),s=t.getSelectedItem(),n=s?s.getBindingContext().getProperty("id"):null,u=this.oUser,O=u.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(n&&n!==O&&o.getProperty("/themeConfigurable")){var p;u.setTheme(n);if(a.last("/core/shellHeader/newDesignSwitchVisible")){var i=n===sap.ushell.User.prototype.constants.NEW_DESIGN;p=Promise.all([this._updateUserPreferences(u),this._updateNewDesignSettings(O,i)]);}else{p=this._updateUserPreferences(u);}return p.then(function(){u.resetChangedProperty("theme");this._applyDarkMode();}.bind(this)).catch(function(e,d){u.setTheme(O);u.resetChangedProperty("theme");L.error("Can not save selected theme",e);return new M({type:c.Error,description:e,message:d.message.value,date:d.innererror.timestamp,httpStatus:d.httpStatus});});}return Promise.resolve();},onSaveContentDensity:function(){var o=this.getView().getModel("config"),u=this.oUser,n=o.getProperty("/isCozyContentMode")?"cozy":"compact",U=u.getContentDensity();if(n!==U&&o.getProperty("/contentDensityConfigurable")){u.setContentDensity(n);return this._updateUserPreferences(this.oUser).then(function(){u.resetChangedProperty("contentDensity");sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:n});E.emit("toggleContentDensity",{contentDensity:n});return new Promise(function(d){E.once("toggleContentDensity").do(function(){d();});});}).catch(function(e,p){u.setContentDensity(U);u.resetChangedProperty("contentDensity");L.error("Can not save content density configuration",e);return new M({type:c.Error,description:e,message:p.message.value,date:p.innererror.timestamp,httpStatus:p.httpStatus});});}return Promise.resolve();},onSaveTileSize:function(){var o=this.getView().getModel("config"),n=this.TILE_SIZE.getName(o.getProperty("/tileSize")),s=a.last("/core/home/sizeBehavior");if(n&&n!==s&&o.getProperty("/sizeBehaviorConfigurable")){return new Promise(function(d){this.writeToPersonalization("flp.settings.FlpSettings","sizeBehavior",n).done(function(){a.emit("/core/home/sizeBehavior",n);if(n==="Responsive"){q(".sapUshellTile").removeClass("sapUshellSmall");}else{q(".sapUshellTile").addClass("sapUshellSmall");}d();}).fail(function(e,p){L.error("Can not save tile size configuration",e);d(new M({type:c.Error,description:e,message:p.message.value,date:p.innererror.timestamp,httpStatus:p.httpStatus}));});}.bind(this));}return Promise.resolve();},writeToPersonalization:function(s,i,v){var p;try{p=this.getPersonalizer(s,i).setPersData(v);}catch(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);p=q.when(Promise.reject(e));}return p;},getPersonalizer:function(s,i){var k=s+"-"+i;if(this.oPersonalizers[k]){return this.oPersonalizers[k];}var p=sap.ushell.Container.getService("Personalization");var o=b.getOwnerComponentFor(this);var d={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};if(!this.oPersonalizers[k]){this.oPersonalizers[k]=p.getPersonalizer({container:s,item:i},d,o);}return this.oPersonalizers[k];},_updateUserPreferences:function(u){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(U){return new Promise(function(d,e){U.updateUserPreferences(u).done(d).fail(e);});});},_updateNewDesignSettings:function(o,i){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){return Promise.all([u.updateNewDesignSetting(i),u.updateThemeHistory(o)]);});},_applyDarkMode:function(){var m=this._oDarkModeModel;if(m.getProperty("/enabled")&&m.getProperty("/detectionSupported")&&m.getProperty("/detectionEnabled")){sap.ushell.Container.getService("DarkModeSupport")._toggleDarkModeBasedOnSystemColorScheme();}},_isDarkModeActive:function(){var m=this._oDarkModeModel;if(m.getProperty("/enabled")){return m.getProperty("/detectionSupported")?m.getProperty("/detectionEnabled"):true;}return false;},changeThemeMode:function(e){sap.ushell.Container.getService("DarkModeSupport").toggleModeChange();},changeSystemModeDetection:function(e){var s=e.getSource().getState();if(s){sap.ushell.Container.getService("DarkModeSupport").enableDarkModeBasedOnSystem();}else{sap.ushell.Container.getService("DarkModeSupport").disableDarkModeBasedOnSystem();}var u=this.oUser.getTheme();this.getView().getModel().setProperty("/options",this._getThemeListData(this.aThemeListFromServer,u));this.getView().invalidate();}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/appearance/AppearanceEntry',["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/resources"],function(X,L,r){"use strict";var t;
function _(){if(t){return Promise.resolve(t);}return sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){return new Promise(function(R){u.getThemeList().done(function(d){t=d.options||[];R(t);}).fail(function(){L.error("Failed to load theme list.");R([]);});});});}
function g(){var v;var e={id:"themes",entryHelpID:"themes",title:r.i18n.getText("Appearance"),valueResult:null,contentResult:null,icon:"sap-icon://palette",valueArgument:function(){return _().then(function(T){var u=sap.ushell.Container.getUser().getTheme(),s="";for(var i=0;i<T.length;i++){if(T[i].id===u){s=T[i].name||"";break;}}return s;});},contentFunc:function(){return _().then(function(T){return X.create({id:"userPrefThemeSelector",viewName:"sap.ushell.components.shell.Settings.appearance.Appearance",viewData:{themeList:T}});}).then(function(V){v=V;return V;});},onSave:function(){if(v){return v.getController().onSave();}L.warning("Save operation for appearance settings was not executed, because the userPrefThemeSelector view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}L.warning("Cancel operation for appearance settings was not executed, because the userPrefThemeSelector view was not initialized");}};return e;}
return{getEntry:g};});
sap.ui.predefine('sap/ushell/components/shell/Settings/homepage/HomepageEntry',["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(L,X,J,S,C,r){"use strict";var d={"scroll":0,"tabs":1,getName:function(v){return Object.keys(this)[v];}};return{getEntry:function(){var v;return{id:"homepageEntry",entryHelpID:"homepageEntry",title:r.i18n.getText("FlpSettings_entry_title"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:null,contentFunc:function(){var D;return S.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(s){D=s;return X.create({id:"UserSettingsHomepageSettingsView",viewName:"sap.ushell.components.shell.Settings.homepage.HomepageSetting"});}).then(function(V){v=V;v.setModel(new J({displayMode:d[D]||d.scroll,personalisationEnabled:C.last("/core/shell/enablePersonalization")}));v.setModel(r.getTranslationModel(),"i18n");return v;}).catch(function(e){L.error("Failed to get effective hompage setting.",e,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");return Promise.reject();});},onSave:function(){if(v){var c=v.getModel().getProperty("/displayMode"),D=d.getName(c),R=sap.ushell.Container.getRenderer("fiori2");return S.getPersonalizer("homePageGroupDisplay",R).then(function(p){return new Promise(function(f,a){p.setPersData(D).done(function(){C.emit("/core/home/homePageGroupDisplay",D);f();}).fail(function(e){L.error("Failed to save the anchor bar mode in personalization",e,"sap.ushell.components.ushell.settings.homepage.HomepageEntry");a();});});});}L.warning("Save operation for user account settings was not executed, because the homepage view was not initialized");return Promise.resolve();},onCancel:function(){if(v){return;}L.warning("Cancel operation for user account settings was not executed, because the homepage view was not initialized");},provideEmptyWrapper:false};}};});
sap.ui.predefine('sap/ushell/components/shell/Settings/notifications/NotificationsEntry',["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/Config","sap/ushell/resources"],function(X,L,C,r){"use strict";
function g(){var v="notificationsSetting",c="sap.ushell.components.shell.Settings.notifications.NotificationsSetting",V;return{id:"notificationsEntry",entryHelpID:"notificationsEntry",title:r.i18n.getText("notificationSettingsEntry_title"),valueResult:null,contentResult:null,icon:"sap-icon://bell",valueArgument:null,contentFunc:function(){return X.create({id:v,viewName:c}).then(function(o){V=o;return o;});},onSave:function(){if(V){return V.getController().onSave();}L.warning("Save operation for user account settings was not executed, because the notifications view was not initialized");return Promise.resolve();},onCancel:function(){if(V){V.getController().onCancel();return;}L.warning("Cancel operation for user account settings was not executed, because the notifications view was not initialized");}};}
return{getEntry:g};});
sap.ui.predefine('sap/ushell/components/shell/Settings/notifications/NotificationsSetting.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/base/Log","sap/ushell/resources","sap/base/util/deepClone"],function(C,J,a,L,r,d){"use strict";return C.extend("sap.ushell.components.shell.Settings.notifications.NotificationsSetting",{onInit:function(){this._oModel=new J({"rows":[],"originalRows":[]});var v=this.getView(),R;v.setBusy(true);v.setModel(r.getTranslationModel(),"i18n");sap.ushell.Container.getServiceAsync("Notifications").then(function(S){this._oNotificationService=S;this._initializeFlags();S.readSettings().done(function(o){R=JSON.parse(o);this._oModel.setProperty("/rows",R.value);this._oModel.setProperty("/originalRows",d(R.value));}.bind(this)).always(function(){v.setBusy(false);v.setModel(this._oModel);}.bind(this));}.bind(this));},onAfterRendering:function(){var f=this._oModel.getProperty("/flags"),R=this._oModel.getProperty("/rows");if(R!==undefined){this._oModel.setProperty("/originalRows",d(R));}if(f!==undefined){this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",f.highPriorityBannerEnabled);}},onCancel:function(){var o=this._oModel.getProperty("/originalFlags"),O=this._oModel.getProperty("/originalRows");this._oModel.setProperty("/flags/highPriorityBannerEnabled",o.highPriorityBannerEnabled);this._oModel.setProperty("/rows",d(O));this._oModel.setProperty("/originalFlags",{});this._oModel.setProperty("/originalRows",[]);},onSave:function(){var R=this._oModel.getProperty("/rows"),o=this._oModel.getProperty("/originalRows"),b,O,s=[],S=[];for(var i=0;i<R.length;i++){b=R[i];O=o[i];if(this._notficationSettingsDiffer(b,O)){s.push(b);}}if(this._flagsHaveChanged()){this._handleFlagsSave();}if(s.length){s.forEach(function(c){S.push(this._oNotificationService.saveSettingsEntry(c));}.bind(this));return new Promise(function(c,e){jQuery.when.apply(jQuery,S).done(function(){c();}).fail(function(f){L.error("Failed to save the notification settings in the notifivation service.",f,"sap.ushell.components.ushell.settings.notifications.NotificationsSetting");e(f);});});}return Promise.resolve();},_flagsHaveChanged:function(){return this._oModel.getProperty("/flags/highPriorityBannerEnabled")!==this._oModel.getProperty("/originalFlags/highPriorityBannerEnabled");},_handleFlagsSave:function(){var h=this._oModel.getProperty("/flags/highPriorityBannerEnabled");this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",h);this._oNotificationService.setUserSettingsFlags({highPriorityBannerEnabled:h});},_notficationSettingsDiffer:function(s,b){return(s.NotificationTypeId!==b.NotificationTypeId)||(s.PriorityDefault!==b.PriorityDefault)||(s.DoNotDeliver!==b.DoNotDeliver)||(s.DoNotDeliverMob!==b.DoNotDeliverMob)||(s.DoNotDeliverEmail!==b.DoNotDeliverEmail);},onSelectMobile:function(e){var p=e.getSource().getBindingContext().getPath();this._oModel.setProperty(p+"/DoNotDeliverMob",!e.getParameter("selected"));},onSelectEmail:function(e){var p=e.getSource().getBindingContext().getPath();this._oModel.setProperty(p+"/DoNotDeliverEmail",!e.getParameter("selected"));},onSelectHighPriority:function(e){var p=e.getSource().getBindingContext().getPath();if(e.getParameter("selected")){this._oModel.setProperty(p+"/PriorityDefault","HIGH");}else{this._oModel.setProperty(p+"/PriorityDefault","");}},onEnableSwitchChange:function(e){var n=e.getParameter("state"),p=e.getSource().getBindingContext().getPath();this._oModel.setProperty(p+"/DoNotDeliver",!n);},_initializeFlags:function(){var s=this._oNotificationService.getUserSettingsFlags(),m=this._oNotificationService._getNotificationSettingsMobileSupport(),e=this._oNotificationService._getNotificationSettingsEmailSupport();s.done(function(S){this._oModel.setProperty("/flags",{});this._oModel.setProperty("/flags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);this._oModel.setProperty("/flags/mobileNotificationsEnabled",m);this._oModel.setProperty("/flags/emailNotificationsEnabled",e);this._oModel.setProperty("/originalFlags",{});this._oModel.setProperty("/originalFlags/highPriorityBannerEnabled",S.highPriorityBannerEnabled);}.bind(this));}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/search/Search.controller',["sap/ui/core/mvc/View","sap/ui/core/mvc/Controller"],function(V,C){"use strict";return C.extend("sap.ushell.components.shell.Settings.search.Search",{onInit:function(){this._loadContent();},_loadContent:function(){var v=this.getView().byId("searchContent");V.create({id:"searchPrefsDialogView",viewName:"module:sap/esh/search/ui/userpref/SearchPrefsDialog.view"}).then(function(o){v.addItem(o);});},onCancel:function(){this.oView.getModel().cancelPreferences();},onSave:function(){return this.oView.getModel().savePreferences();}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/search/SearchEntry',["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/resources"],function(L,X,r){"use strict";var s=null;
function g(){if(s){return s;}s=sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){return new Promise(function(b,c){sap.ui.require(["sap/esh/search/ui/userpref/SearchPrefsModel","sap/esh/search/ui/SearchShellHelperAndModuleLoader"],function(S,d){b(new S());});});});return s;}
function a(){return g().then(function(m){var v;var e={id:"search",entryHelpID:"search",title:r.i18n.getText("searchSetting"),valueResult:null,contentResult:null,icon:"sap-icon://search",isActive:m.isSearchPrefsActive.bind(m),valueArgument:function(){return m.isPersonalizedSearchActive().then(function(b){return m.isMultiProvider().then(function(i){if(i){return{value:1,displayText:""};}return{value:1,displayText:b?r.i18n.getText("sp.persSearchOn"):r.i18n.getText("sp.persSearchOff")};});});},contentFunc:function(){return m.asyncInit().then(function(){return X.create({id:"searchView",viewName:"sap.ushell.components.shell.Settings.search.Search"});}).then(function(V){V.setModel(m);v=V;return V;});},onSave:function(){if(v){return v.getController().onSave();}L.warning("Save operation for search settings was not executed, because the search view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}L.warning("Cancel operation for search settings was not executed, because the search view was not initialized");},provideEmptyWrapper:false};return e;});}
return{getEntry:a};});
sap.ui.predefine('sap/ushell/components/shell/Settings/spaces/SpacesEntry',["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/resources","sap/ushell/Config"],function(L,X,r,C){"use strict";
function _(){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){var s=u.getUser().getShowMyHome();return r.i18n.getText(s?"settingsMyHomeShown":"settingsMyHomeHidden");});}
function a(){var s=C.last("/core/spaces/enabled")&&C.last("/core/spaces/myHome/enabled");return s?_:null;}
return{getEntry:function(){var v;return{id:"spacesEntry",entryHelpID:"spaces",title:r.i18n.getText("spaces"),valueResult:null,contentResult:null,icon:"sap-icon://home",valueArgument:a(),contentFunc:function(){return X.create({id:"UserSettingsSpacesSettingsView",viewName:"sap.ushell.components.shell.Settings.spaces.SpacesSetting"}).then(function(V){v=V;return v;});},onSave:function(){if(v){return v.getController().onSave();}L.warning("Save operation for user account settings was not executed, because the spaces view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}L.warning("Cancel operation for user account settings was not executed, because the spaces view was not initialized");},provideEmptyWrapper:false};}};});
sap.ui.predefine('sap/ushell/components/shell/Settings/spaces/SpacesSetting.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/resources"],function(C,J,E,a,r){"use strict";return C.extend("sap.ushell.components.shell.Settings.spaces.SpacesSetting",{onInit:function(){this.oUserInfoService=sap.ushell.Container.getService("UserInfo");var u=this.oUserInfoService.getUser();var i=u.getImportBookmarksFlag();var I=a.last("/core/spaces/enabled");var s=I&&a.last("/core/spaces/myHome/enabled");var S=u.getShowMyHome();var m=i!=="done"&&i!=="not_required";var v=new J({isSpacesEnabled:I,isShowMyHomeVisible:s,isShowMyHomeSelected:S,isMyHomeImportVisible:s&&S&&m,isMyHomeImportSelected:i==="pending"});this.getView().setModel(v);this.getView().setModel(r.getTranslationModel(),"i18n");function b(c){v.setProperty("/isMyHomeImportSelected",!!c);}this.oImportBookmarksFlagListener=E.on("importBookmarksFlag").do(b);},onExit:function(){this.oImportBookmarksFlagListener.off();},onSave:function(){var m=this.getView().getModel(),u=this.oUserInfoService,U=u.getUser(),o=a.last("/core/spaces/enabled"),n=m.getProperty("/isSpacesEnabled"),O=U.getShowMyHome(),N=m.getProperty("/isShowMyHomeSelected"),b=U.getImportBookmarksFlag()==="pending",c=m.getProperty("/isMyHomeImportSelected");var R=false;var d=false;if(o!==n){U.setChangedProperties({propertyName:"spacesEnabled",name:"SPACES_ENABLEMENT"},o,n);d=true;R=true;}if(O!==N){U.setShowMyHome(N);d=true;R=true;}if(b!==c){var i=c?"pending":"dismissed";U.setImportBookmarksFlag(i);d=true;if(!R){E.emit("importBookmarksFlag",c);}}if(!d){return Promise.resolve();}return new Promise(function(e,f){u.updateUserPreferences().done(function(){U.resetChangedProperty("spacesEnabled");U.resetChangedProperty("showMyHome");U.resetChangedProperty("importBookmarks");e({refresh:R,noHash:true});}).fail(function(s){m.setProperty("/isSpacesEnabled",o);m.setProperty("/showMyHome",O);U.resetChangedProperty("spacesEnabled");U.resetChangedProperty("showMyHome");U.resetChangedProperty("importBookmarks");f(s);});});},onCancel:function(){var m=this.getView().getModel();m.setProperty("/isSpacesEnabled",a.last("/core/spaces/enabled"));m.setProperty("/showMyHome",this.oUserInfoService.getUser().getShowMyHome());}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userAccount/UserAccountEntry',["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/Config","sap/ushell/resources"],function(X,L,C,r){"use strict";
function g(){var s=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),u=s.enableUserImgConsent;var v=u?"userAccountSelector":"userAccountSetting";var c=u?"sap.ushell.components.shell.Settings.userAccount.UserAccountSelector":"sap.ushell.components.shell.Settings.userAccount.UserAccountSetting";var i=C.last("/core/shell/model/userImage/account")||"sap-icon://account";var V;var e={id:"userAccountEntry",entryHelpID:"userAccountEntry",title:r.i18n.getText("UserAccountFld"),valueResult:null,contentResult:null,icon:i,valueArgument:sap.ushell.Container.getUser().getFullName(),contentFunc:function(){return X.create({id:v,viewName:c}).then(function(o){V=o;return o;});},onSave:function(){if(V){return V.getController().onSave();}L.warning("Save operation for user account settings was not executed, because the userAccount view was not initialized");return Promise.resolve();},onCancel:function(){if(V){V.getController().onCancel();return;}L.warning("Cancel operation for user account settings was not executed, because the userAccount view was not initialized");},provideEmptyWrapper:true};return e;}
return{getEntry:g};});
sap.ui.predefine('sap/ushell/components/shell/Settings/userAccount/UserAccountSelector.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/m/MessageBox","sap/m/MessageToast","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(C,J,L,a,r,M,b,u,w){"use strict";return C.extend("sap.ushell.components.shell.Settings.userAccount.UserAccountSelector",{onInit:function(){var s=sap.ushell.Container.getRenderer("fiori2").getShellConfig(),e=s.enableUserImgConsent;this.imgConsentEnabled=e||false;this.oUser=sap.ushell.Container.getUser();var R=r.getTranslationModel();var c=this.getConfigurationModel();this.getView().setModel(R,"i18n");this.getView().setModel(c,"config");this.oUser.attachOnSetImage(function(){c.setProperty("/icon",a.last("/core/shell/model/userImage/personPlaceHolder"));});sap.ushell.Container.getServiceAsync("Personalization").then(function(p){return p.isResetEntirePersonalizationSupported().then(function(i){if(!i){c.setProperty("/isResetPersonalizationVisible",false);}});}.bind(this)).catch(function(E){L.error("The personalization service could not be loaded because of: ."+E.toString());});},getConfigurationModel:function(){var m=new J({}),U=sap.ushell.Container.getUser(),i=a.last("/core/shell/model/userImage/personPlaceHolder")||"sap-icon://person-placeholder";m.setData({icon:i,name:U.getFullName(),mail:U.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsentForUser:U.getImageConsent(),isResetPersonalizationVisible:this.isResetPersonalizationVisible||true});return m;},onCancel:function(){if(this.imgConsentEnabled){this.getView().getModel("config").setProperty("/isImageConsentForUser",this.oUser.getImageConsent());}},onSave:function(){if(this.imgConsentEnabled){return this.onSaveUserImgConsent();}return Promise.resolve();},onSaveUserImgConsent:function(){var U=this.oUser,o=U.getImageConsent(),m=this.getView().getModel("config"),c=m.getProperty("/isImageConsentForUser"),d;if(o!==c){U.setImageConsent(c);return new Promise(function(e,f){d=sap.ushell.Container.getService("UserInfo").updateUserPreferences(U);d.done(function(){U.resetChangedProperty("isImageConsent");e();});d.fail(function(E){U.setImageConsent(o);U.resetChangedProperty("isImageConsent");m.setProperty("/isImageConsentForUser",o);L.error(E);f(E);});});}return Promise.resolve();},termsOfUserPress:function(){var t=this.getView().byId("termsOfUseTextFlexBox"),c=this.getView().byId("termsOfUseLink"),i=t.getVisible();t.setVisible(!i);c.setText(r.i18n.getText(i?"userImageConsentDialogShowTermsOfUse":"userImageConsentDialogHideTermsOfUse"));},showMessageBoxWarningDeletePersonalization:function(){M.warning(r.i18n.getText("userAccountResetPersonalizationWarningDialogDescription"),{onClose:this.resetEntirePersonalization.bind(this),actions:[M.Action.OK,M.Action.CANCEL],contentWidth:"600px"});},resetEntirePersonalization:function(A){if(A===M.Action.OK){this.getView().setBusy(true);sap.ushell.Container.getServiceAsync("Personalization").then(function(p){return p.resetEntirePersonalization().then(function(){b.show(r.i18n.getText("userAccountResetPersonalizationWarningDialogSuccessToast"),{onClose:w.refreshBrowser});}).catch(this.showErrorMessageBox.bind(this));}.bind(this)).catch(this.showErrorMessageBox.bind(this)).finally(function(){this.getView().setBusy(false);}.bind(this));}},showErrorMessageBox:function(){M.error(r.i18n.getText("userAccountResetPersonalizationWarningDialogErrorDialog"),{actions:M.Action.CLOSE,contentWidth:"600px"});}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userActivities/UserActivitiesEntry',["sap/ui/core/mvc/XMLView","sap/base/Log","sap/ushell/Config","sap/ushell/resources"],function(X,L,C,r){"use strict";
function g(){var v="userActivitiesSetting",c="sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting",V;return{id:"userActivitiesEntry",entryHelpID:"userActivitiesEntry",title:r.i18n.getText("userActivities"),valueResult:null,contentResult:null,icon:"sap-icon://laptop",valueArgument:null,contentFunc:function(){return X.create({id:v,viewName:c}).then(function(o){V=o;return o;});},onSave:function(){if(V){return V.getController().onSave();}L.warning("Save operation for user account settings was not executed, because the userActivities view was not initialized");return Promise.resolve();},onCancel:function(){if(V){V.getController().onCancel();return;}L.warning("Cancel operation for user account settings was not executed, because the userActivities view was not initialized");}};}
return{getEntry:g};});
sap.ui.predefine('sap/ushell/components/shell/Settings/userActivities/UserActivitiesSetting.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/base/Log","sap/ushell/resources"],function(C,J,S,a,L,r){"use strict";return C.extend("sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting",{onInit:function(){var t=a.last("/core/shell/model/enableTrackingActivity")!==undefined?a.last("/core/shell/model/enableTrackingActivity"):true;this.oModel=new J({checkboxIsChecked:t});this.getView().setModel(this.oModel);this.getView().setModel(r.getTranslationModel(),"i18n");},onCancel:function(){var t=a.last("/core/shell/model/enableTrackingActivity")!==undefined?a.last("/core/shell/model/enableTrackingActivity"):true;this.oModel.setProperty("/checkboxIsChecked",t);},onSave:function(){if(a.last("/core/shell/model/enableTrackingActivity")!==this.oModel.getProperty("/checkboxIsChecked")){return this._setTrackingToEnabled(this.oModel.getProperty("/checkboxIsChecked"));}return Promise.resolve();},_setTrackingToEnabled:function(e){return S.getPersonalizer("userActivitesTracking",sap.ushell.Container.getRenderer("fiori2")).then(function(p){return new Promise(function(b,c){p.setPersData(e).done(function(){a.emit("/core/shell/model/enableTrackingActivity",e);b();}).fail(function(d){L.error("Failed to save the user activities tracking in personalization",d,"sap.ushell.components.ushell.settings.userActivities.UserActivitiesSetting");c();});});});},onClearHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(s){s.clearRecentActivities();this._showClearHistoryMessageToast();}.bind(this));},_showClearHistoryMessageToast:function(){sap.ui.require(["sap/m/MessageToast"],function(M){var m=r.i18n.getText("historyCleared");M.show(m,{width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userDefaults/Component',["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(X,U){"use strict";return U.extend("sap.ushell.components.shell.Settings.userDefaults.Component",{metadata:{manifest:"json"},init:function(){U.prototype.init.apply(this,arguments);},onSave:function(){return this.getRootControl().getController().onSave();},onCancel:function(){this.getRootControl().getController().onCancel();},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userDefaults/UserDefaultsEntry',["sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/resources","sap/base/util/includes"],function(L,C,r,i){"use strict";return{getEntry:function(){var c;return{id:"userDefaultEntry",entryHelpID:"defaultParameters",title:r.i18n.getText("defaultsValuesEntry"),valueArgument:function(){var u=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var o=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");var a=sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(b){return b.getContentProviderIds();}).catch(function(){return[""];});return Promise.all([u,o,a]).then(function(R){var U=R[0];var b=R[1];var d=R[2].length>0?R[2]:[""];return Promise.all(d.map(function(s){return b.getSystemContext(s).then(function(S){return U.hasRelevantMaintainableParameters(S);});}));}).then(function(R){return{value:i(R,true)};});},contentFunc:function(){return new Promise(function(a,b){c=new C("defaultParametersSelector",{name:"sap.ushell.components.shell.Settings.userDefaults",manifest:true,async:true});a(c);});},onSave:function(){if(c&&c.getComponentInstance()){return c.getComponentInstance().onSave();}L.warning("Save operation for user defaults settings was not executed, because the user default component was not initialized");return Promise.resolve();},onCancel:function(){if(c&&c.getComponentInstance()){c.getComponentInstance().onCancel();return;}L.warning("Cancel operation for user defaults settings was not executed, because the user default component was not initialized");},defaultVisibility:false};}};});
sap.ui.predefine('sap/ushell/components/shell/Settings/userDefaults/UserDefaultsForm',["sap/ui/core/Control","sap/base/util/deepExtend","sap/ui/comp/smartform/SmartForm"],function(C,d,S){"use strict";var a=["sap.ui.comp.smartfield.SmartField","sap.m.Input"];
var U=C.extend("sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm",{
metadata:{properties:{persistencyKey:{type:"string"}},aggregations:{_smartForm:{type:"sap.ui.comp.smartform.SmartForm",multiple:false,visibility:"hidden"}},events:{}},
renderer:function(r,c){r.openStart("div",c);r.openEnd();r.renderControl(c.getAggregation("_smartForm"));r.close("div");}
});
U.prototype.init=function(){this.setAggregation("_smartForm",new S({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm"));};
U.prototype.fetchVariant=function(){var m=this.getAggregation("_smartForm").getModel("MdlParameter"),i,A;return this._getFieldControls().reduce(function(r,b){i=b.getName();r[i]={value:b.getValue()};A=m.getProperty("/"+i+"/valueObject/extendedValue/");if(A){r[i].additionalValues=A;}return r;},{});};
U.prototype.applyVariant=function(v){if(v){var m=this.getAggregation("_smartForm").getModel("MdlParameter"),u=this._getFieldControls(),I,V;for(var i=0;i<u.length;i++){I=u[i].getName();if(v[I]!==undefined){u[i].setValue(v[I].value);V=m.getProperty("/"+I+"/valueObject/");V.extendedValue=null;if(v[I].additionalValues){V=d(V,{extendedValue:v[I].additionalValues});}m.setProperty("/"+I+"/valueObject",V);}}}};
U.prototype._getFieldControls=function(){return this.getControlsByFieldGroupId("UserDefaults").filter(function(f){var F=f.getMetadata().getName();return a.indexOf(F)!==-1;});};
U.prototype.addGroup=function(g){this.getAggregation("_smartForm").addGroup(g);};
U.prototype.getGroups=function(){return this.getAggregation("_smartForm").getGroups();};
U.prototype.removeGroup=function(i){this.getAggregation("_smartForm").removeGroup(i);};
U.prototype.removeAllGroups=function(){this.getAggregation("_smartForm").removeAllGroups();};
return U;});
sap.ui.predefine('sap/ushell/components/shell/Settings/userDefaults/controller/ExtendedValueDialog.controller',["sap/m/Token","sap/ui/comp/library","sap/ui/model/json/JSONModel","sap/ui/core/Fragment"],function(T,c,J,F){"use strict";var V=c.valuehelpdialog.ValueHelpRangeOperation;var E=function(){};
E.prototype.openDialog=function(r,o){F.load({id:"ExtendedValueDialogFragment",name:"sap.ushell.components.shell.Settings.userDefaults.view.ExtendedValueDialog",controller:this}).then(function(v){var p="/"+r.parameterName+"/valueObject/extendedValue/Ranges",e=r.modelBind.extendedModel,R=e.getProperty(p)||[],l,n;if(r.modelBind.isOdata){n=this._getMetadataNameSpace(r.editorMetadata.editorInfo.odataURL);var a=r.modelBind.model.getMetaModel().getODataEntityType(n+"."+r.editorMetadata.editorInfo.entityName);if(a){l=r.modelBind.model.getMetaModel().getODataProperty(a,r.editorMetadata.editorInfo.propertyName)["sap:label"];}}var m={label:r.editorMetadata.displayText||l||r.parameterName,key:r.modelBind.sPropertyName,parameterName:r.parameterName};v.setModel(new J(m));v.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());v.setTokens(this.getTokensToValueHelpDialog(R,r.parameterName));v.setRangeKeyFields([{label:m.label,key:r.parameterName}]);v.attachOk(function(b){o(b);b.getSource().close();});v.open();}.bind(this));};
E.prototype.closeValueHelp=function(C){C.getSource().close(C);};
E.prototype.afterCloseValueHelp=function(C){C.getSource().destroy();};
E.prototype._getMetadataNameSpace=function(s){var S=s.split("/"),n;n=S[S.length-1];return n;};
E.prototype.getListOfSupportedRangeOperations=function(){var s=Object.keys(V);return s.filter(function(o){return o!=="StartsWith"&&o!=="EndsWith"&&o!=="Initial";});};
E.prototype.getTokensToValueHelpDialog=function(r,p){var t=[],f;r.forEach(function(R){if(R){f={};f.exclude=R.Sign==="E";f.keyField=p;f.operation=R.Option!=="CP"?R.Option:"Contains";f.value1=R.Low;f.value2=R.High;t.push(new T({}).data("range",f));}});return t;};
return new E();});
sap.ui.predefine('sap/ushell/components/shell/Settings/userDefaults/controller/UserDefaultsSetting.controller',["sap/base/Log","sap/base/util/deepExtend","sap/base/util/extend","sap/base/util/deepEqual","sap/m/Button","sap/m/FlexBox","sap/m/FlexItemData","sap/m/Input","sap/m/library","sap/ui/core/mvc/Controller","sap/ui/comp/smartfield/SmartField","sap/ui/comp/smartfield/SmartLabel","sap/ui/comp/smartform/Group","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartvariants/PersonalizableInfo","sap/ui/Device","sap/ui/layout/GridData","sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataModel","sap/ushell/resources","sap/m/MessageBox","./ExtendedValueDialog.controller"],function(L,d,e,D,B,F,a,I,m,C,S,b,G,c,P,f,g,J,O,r,M,E){"use strict";var h=m.ButtonType;
function j(o,i){if(!(i.editorMetadata&&i.editorMetadata.groupId)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.groupId)){return 1;}if(o.editorMetadata.groupId<i.editorMetadata.groupId){return-1;}if(o.editorMetadata.groupId>i.editorMetadata.groupId){return 1;}return 0;}
function k(o,i){if(!(i.editorMetadata&&i.editorMetadata.parameterIndex)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.parameterIndex)){return 1;}return o.editorMetadata.parameterIndex-i.editorMetadata.parameterIndex;}
function l(o,i){var n=j(o,i);if(n===0){return k(o,i);}return n;}
return C.extend("sap.ushell.components.shell.Settings.userDefaults.controller.UserDefaultsSetting",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.oDirtyStateModel=new J({isDirty:false,selectedVariant:null});this.getView().setModel(this.oDirtyStateModel,"DirtyState");this.oOriginalParameters={};this.oCurrentParameters={};var v=this.getView();v.setBusy(true);v.setModel(r.getTranslationModel(),"i18n");this.getSystemContextsModel().then(function(s){v.setModel(s,"systemContexts");return this._fillGroups();}.bind(this)).then(this._saveIsSupportedPlatform.bind(this)).then(this._initializeSmartVariantManagement.bind(this)).then(function(){v.setBusy(false);}).catch(function(i){L.error("Error during UserDefaultsSetting controller initialization",i,"sap.ushell.components.shell.Settings.userDefaults.UserDefaultsSetting");v.setBusy(false);});},getSystemContextsModel:function(){var s=new J({systemContexts:[],selectedKey:""});var o=this._getContentProviderIds();var i=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");var u=sap.ushell.Container.getServiceAsync("UserDefaultParameters");return Promise.all([o,i,u]).then(function(R){var n=R[0];var p=R[1];var U=R[2];if(n.length===0){n.push("");}return Promise.all(n.map(function(q){return p.getSystemContext(q).then(function(t){var v=s.getProperty("/systemContexts");return U.hasRelevantMaintainableParameters(t).then(function(w){if(w){v.push(t);}});});})).then(function(){var q=s.getProperty("/systemContexts");if(q.length>0){s.setProperty("/selectedKey",q[0].id);}return s;});});},_getContentProviderIds:function(){return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(o){return o.getContentProviderIds();}).catch(function(){return[""];});},handleSystemContextChanged:function(){if(this.oDirtyStateModel.getProperty("/isDirty")){var u=r.i18n.getText("userDefaultsSave");var U=r.i18n.getText("userDefaultsDiscard");M.show(r.i18n.getText("userDefaultsUnsavedChangesMessage"),{title:r.i18n.getText("userDefaultsUnsavedChangesTitle"),actions:[u,U,M.Action.CANCEL],emphasizedAction:u,icon:M.Icon.QUESTION,onClose:function(A){if(A===U){this._fillGroups();this._setDirtyState(false);}else if(A===u){this.onSave();this._fillGroups();this._setDirtyState(false);}else{this.getView().getModel("systemContexts").setProperty("/selectedKey",this.sLastSelectedKey);}}.bind(this)});}else{this._fillGroups();}},_fillGroups:function(){var u=this.getView().byId("userDefaultsForm");u.removeAllGroups();var K=this.getView().getModel("systemContexts").getProperty("/selectedKey");var s=this.getView().getModel("systemContexts").getProperty("/systemContexts").find(function(o){return o.id===K;});return new Promise(function(i,n){sap.ushell.Container.getServiceAsync("UserDefaultParameters").then(function(U){U.editorGetParameters(s).done(function(p){this.oOriginalParameters=d({},p);this.oCurrentParameters=d({},p);this.oModel=new J(p);this.oModel.setDefaultBindingMode("TwoWay");this.getView().setModel(this.oModel,"MdlParameter");return this._getFormattedParameters(p,this.oModel).then(function(o){var q=this._getContent(o);q.forEach(function(t){u.addGroup(t);});}.bind(this)).then(i);}.bind(this));}.bind(this));}.bind(this));},_getFormattedParameters:function(o,i){var p=Object.keys(o).map(function(s,n){var q=d({},o[s]);q.parameterName=s;q.editorMetadata=q.editorMetadata||{};q.valueObject=d({value:""},q.valueObject);if(q.editorMetadata.editorInfo&&q.editorMetadata.editorInfo.propertyName){return this._createOdataModelBinding(q,i).then(function(t){q.modelBind=t;return q;}).catch(function(){L.error("Metadata loading for parameter "+q.parameterName+" failed"+JSON.stringify(q.editorMetadata));q.modelBind=this._createPlainModelBinding(q,i);this.oBlockedParameters[q.parameterName]=false;return Promise.resolve(q);}.bind(this));}q.modelBind=this._createPlainModelBinding(q,i);return Promise.resolve(q);}.bind(this));return Promise.all(p).then(function(n){n.sort(l);this.aDisplayedUserDefaults=n;n.forEach(function(q){q.modelBind.model.setProperty(q.modelBind.sFullPropertyPath,q.valueObject.value);q.modelBind.model.bindTree(q.modelBind.sFullPropertyPath).attachChange(this.storeChangedData.bind(this));}.bind(this));return n;}.bind(this));},_createPlainModelBinding:function(p,o){var s="/"+p.parameterName+"/valueObject/value";if(!o.getProperty("/"+p.parameterName+"/valueObject")){o.setProperty("/"+p.parameterName+"/valueObject",{});}var i={isOdata:false,model:o,extendedModel:o,sFullPropertyPath:s,sPropertyName:"{"+s+"}"};return i;},_createOdataModelBinding:function(p,o){var i=p.editorMetadata.editorInfo,n=this._getODataServiceData(i.odataURL,p);return n.metadata.then(function(){var q={isOdata:true,model:n.model,extendedModel:o,sPropertyName:"{"+i.propertyName+"}",sFullPropertyPath:i.bindingPath+"/"+i.propertyName};return q;});},_getODataServiceData:function(u,o){if(!this.oModelRecords[u]){var i=new O(u,{metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"},json:true});i.setDefaultCountMode("None");i.setDefaultBindingMode("TwoWay");this.oModelRecords[u]={attachedListeners:[],model:i,metadata:new Promise(function(n,p){i.attachMetadataLoaded(n);i.attachMetadataFailed(p);})};}if(this.oModelRecords[u].attachedListeners.indexOf(o.parameterName)===-1){this.oModelRecords[u].attachedListeners.push(o.parameterName);this.oModelRecords[u].model.attachRequestCompleted(this._overrideOdataModelValue.bind(this,o));this.oBlockedParameters[o.parameterName]=true;}return this.oModelRecords[u];},_overrideOdataModelValue:function(p,o){var i=o.getSource(),u=o.getParameter("url").replace(/\?.*/,""),s=p.editorMetadata.editorInfo.bindingPath+"/"+p.editorMetadata.editorInfo.propertyName,n=p.editorMetadata.editorInfo.odataURL+p.editorMetadata.editorInfo.bindingPath;if(n!==u){return;}if(i.getProperty(s)!==p.valueObject.value){i.setProperty(s,p.valueObject.value);}this.oBlockedParameters[p.parameterName]=false;},_getContent:function(n){var s="nevermore";var o;var p={};var q=[];for(var i=0;i<n.length;++i){var t=n[i],u=t.modelBind;if(s!==t.editorMetadata.groupId){o=new G({label:t.editorMetadata.groupTitle||undefined,layoutData:new g({linebreak:false})});s=t.editorMetadata.groupId;q.push(o);}var v=new c({});v.setModel(u.model);if(u.isOdata){var U=t.editorMetadata.editorInfo.odataURL;if(!p[U]){var w=t.editorMetadata.editorInfo.bindingPath;v.bindElement(w);p[U]=t.modelBind.model.getContext(w);}else{v.setBindingContext(p[U]);}}v.addElement(this._createControl(t));o.addGroupElement(v);}return q;},_createControl:function(o){var i,n,p;if(o.editorMetadata.extendedUsage){p=new B({text:r.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:r.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:["MdlParameter>/"+o.parameterName+"/valueObject/extendedValue/Ranges"],formatter:function(R){return R&&R.length?h.Emphasized:h.Transparent;}},press:function(s){E.openDialog(o,this.saveExtendedValue.bind(this));}.bind(this)}).addStyleClass("sapUshellExtendedDefaultParamsButton");}n=new b({width:f.system.phone?"auto":"12rem",textAlign:f.system.phone?"Left":"Right"});if(o.modelBind.isOdata&&o.editorMetadata.editorInfo){i=new S({value:o.modelBind.sPropertyName,name:o.parameterName,fieldGroupIds:["UserDefaults"]});n.setLabelFor(i);}else{i=new I({name:o.parameterName,value:o.modelBind.sPropertyName,fieldGroupIds:["UserDefaults"],type:"Text"});i.addAriaLabelledBy(n);n.setText((o.editorMetadata.displayText||o.parameterName)+":");n.setTooltip(o.editorMetadata.description||o.parameterName);}i.attachChange(this.storeChangedData.bind(this));i.attachChange(this._setDirtyState.bind(this,true),this);i.addStyleClass("sapUshellDefaultValuesSmartField");i.setLayoutData(new a({shrinkFactor:0}));var q=new F({width:f.system.phone?"100%":"auto",alignItems:f.system.phone?"Start":"Center",direction:(f.system.phone&&!p)?"Column":"Row",items:[n,i,p],wrap:"Wrap"});return q;},saveExtendedValue:function(o){var p=o.getSource().getModel().getProperty("/parameterName"),i=this.oModel,t=o.getParameters().tokens||[],s="/"+p+"/valueObject/extendedValue/Ranges",n,v={extendedValue:{Ranges:[]}};d(this.oCurrentParameters[p].valueObject,v);n=t.map(function(T){var q=T.data("range");return{Sign:q.exclude?"E":"I",Option:q.operation!=="Contains"?q.operation:"CP",Low:q.value1,High:q.value2||null};});if(!i.getProperty("/"+p+"/valueObject/extendedValue")){i.setProperty("/"+p+"/valueObject/extendedValue",{});}i.setProperty(s,n);this.oChangedParameters[p]=true;if(o.getParameter("_tokensHaveChanged")){this._setDirtyState(true);}},_setDirtyState:function(i){this.oDirtyStateModel.setProperty("/isDirty",i);this._setSmartVariantModified(i);if(i){this.sLastSelectedKey=this.getView().getModel("systemContexts").getProperty("/selectedKey");}},_setSelectedVariant:function(s){this.oDirtyStateModel.setProperty("/selectedVariant",s);this.storeChangedData();},storeChangedData:function(){var n=this.aDisplayedUserDefaults,p,v,o;for(var i=0;i<n.length;++i){p=n[i].parameterName;v=this.oCurrentParameters[p].valueObject;o=n[i].modelBind;if(!this.oBlockedParameters[p]){var q={value:v&&v.value,extendedValue:v&&v.extendedValue};if(o&&o.model){var s=o.model;var t=o.extendedModel;var u=o.sFullPropertyPath;var A=s.getProperty(u)!==""?s.getProperty(u):undefined;var N={value:A,extendedValue:t.getProperty("/"+p+"/valueObject/extendedValue")};if(!D(N,q)){v.value=A;if(N.extendedValue){v.extendedValue={};d(v.extendedValue,N.extendedValue);}this.oChangedParameters[p]=true;}}}}},onCancel:function(){this._setDirtyState(false);var n=Object.keys(this.oChangedParameters),o=this.aDisplayedUserDefaults,p,q,s;if(n.length>0){for(var i=0;i<o.length&&n.length>0;i++){p=o[i].parameterName;if(n.indexOf(p)>-1){s=this.oOriginalParameters[p];q=o[i].modelBind;q.model.setProperty(q.sFullPropertyPath,s.valueObject.value||"");if(s.editorMetadata&&s.editorMetadata.extendedUsage){q.extendedModel.setProperty("/"+p+"/valueObject/extendedValue",s.valueObject.extendedValue||{});}}}this.oCurrentParameters=d({},this.oOriginalParameters);this.oChangedParameters={};}this._setDefaultVariant();},onSave:function(){this._setDirtyState(false);var i=Object.keys(this.oChangedParameters||{}).sort();var p;if(i.length===0){p=Promise.resolve();}else{p=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(o){return o.getSystemContext(this.sLastSelectedKey);}.bind(this)).then(function(s){this.oChangedParameters={};return this._saveParameterValues(i,s);}.bind(this));}return p.then(this._resetSmartVariantManagement.bind(this)).then(this._setDefaultVariant.bind(this));},_saveParameterValues:function(n,s){var p=[];var o;var q;var v;var t;for(var i=0;i<n.length;i++){o=n[i];v=this.oCurrentParameters[o].valueObject;t=this.oOriginalParameters[o].valueObject;if(!D(t,v)){if(v&&v.value===null||v&&v.value===""){v.value=undefined;}if(v&&v.extendedValue&&Array.isArray(v.extendedValue.Ranges)&&v.extendedValue.Ranges.length===0){v.extendedValue=undefined;}q=this._saveParameterValue(o,v,t,s);p.push(q);}}return Promise.all(p);},_saveParameterValue:function(n,v,o,s){return sap.ushell.Container.getServiceAsync("UserDefaultParameters").then(function(u){return new Promise(function(i,p){u.editorSetValue(n,v,s).done(function(){o.value=v.value;i();}).fail(p);});});},_setSmartVariantModified:function(i){if(!this._bIsSupportedPlatform){return;}this.getView().byId("defaultSettingsVariantManagement").currentVariantSetModified(i);},_setDefaultVariant:function(){if(!this._bIsSupportedPlatform){return;}var s=this.getView().byId("defaultSettingsVariantManagement");s.setCurrentVariantId(s.getDefaultVariantKey());this._setSelectedVariant(s.getDefaultVariantKey());},_resetSmartVariantManagement:function(){if(!this._bIsSupportedPlatform){return Promise.resolve();}this.getView().byId("defaultSettingsVariantManagement").removeAllPersonalizableControls();return this._initializeSmartVariantManagement();},_initializeSmartVariantManagement:function(){if(!this._bIsSupportedPlatform){return Promise.resolve();}var s=this.getView().byId("defaultSettingsVariantManagement"),i=function(){this._setSelectedVariant(s.getSelectionKey());}.bind(this);return new Promise(function(n){var u=this.getView().byId("userDefaultsForm"),p=new P({type:"wrapper",keyName:"persistencyKey",dataSource:"none",control:u});s.detachSelect(i).detachAfterSave(i).addPersonalizableControl(p).attachSelect(i).attachAfterSave(i).initialise(function(){s.setVisible(true);n();},u);}.bind(this)).then(i);},_saveIsSupportedPlatform:function(){var p=sap.ushell.Container.getLogonSystem().getPlatform();this._bIsSupportedPlatform=(p!=="cdm");return Promise.resolve(this._bIsSupportedPlatform);},displayDiffText:function(){if(!this._bIsSupportedPlatform){return false;}var s=this.getView().byId("defaultSettingsVariantManagement"),u=this.getView().byId("userDefaultsForm"),i=s.getStandardVariantKey(),n=s.getSelectionKey(),o,v;if(n===i){return false;}o=s.getVariantContent(u,i);v=s.getVariantContent(u,n);delete v.executeOnSelection;return!D(o,v);}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userLanguageRegion/LanguageRegionSelector.controller',["sap/ui/core/mvc/Controller","sap/ui/performance/Measurement","sap/base/util/UriParameters","sap/base/Log","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/ui/model/json/JSONModel","sap/ui/core/message/Message","sap/ui/core/MessageType"],function(C,M,U,L,a,b,J,c,d){"use strict";return C.extend("sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector",{onInit:function(){this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=sap.ushell.Container.getUser();var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=b.getInstance(l);var D,t,T,n;var i=sap.ushell.Container.getRenderer("fiori2").getShellConfig().enableSetLanguage||false;var I=this.oUser.isLanguagePersonalized();var e=this.userInfoService.getUserSettingListEditSupported();var u=[];if(e){var f=sap.ui.getCore().getConfiguration().getFormatSettings();D=f.getLegacyDateFormat();T=f.getLegacyTimeFormat();n=this._getLegacyNumberFormat(f);u.push(this._loadUserSettingList());}else{D=o.getDatePattern("medium");t=o.getTimePattern("medium");T=(t.indexOf("H")===-1)?"12h":"24h";}var m=new J({languageList:null,DateFormatList:null,TimeFormatList:null,NumberFormatList:null,TimeZoneList:null,selectedLanguage:this.oUser.getLanguage(),selectedLanguageText:this.oUser.getLanguageText(),selectedDatePattern:D,selectedTimeFormat:T,selectedNumberFormat:n,selectedTimeZone:this.oUser.getTimeZone(),isSettingsLoaded:true,isLanguagePersonalized:I,isEnableSetLanguage:i,isEnableUserProfileSetting:e});m.setSizeLimit(200);if(i){u.push(this._loadLanguagesList());}if(u.length>0){this.getView().setBusy(true);Promise.all(u).then(function(r){var g=e?r[0]:null;var h=null;if(i){h=r.length===1?r[0]:r[1];}if(h&&h.length>1){m.setProperty("/languageList",h);var H=h.some(function(j){return j.key==="default";});if(!I&&H){m.setProperty("/selectedLanguage","default");}}if(g&&g.TIME_FORMAT&&g.TIME_FORMAT.length>0){m.setProperty("/TimeFormatList",g.TIME_FORMAT);}if(g&&g.DATE_FORMAT&&g.DATE_FORMAT.length>0){m.setProperty("/DateFormatList",g.DATE_FORMAT);}if(g&&g.TIME_ZONE&&g.TIME_ZONE.length>0){m.setProperty("/TimeZoneList",g.TIME_ZONE);}if(g&&g.NUMBER_FORMAT&&g.NUMBER_FORMAT.length>0){m.setProperty("/NumberFormatList",g.NUMBER_FORMAT);}this.oView.setModel(m);this.getView().setBusy(false);}.bind(this));}else{this.oView.setModel(m);}},_loadLanguagesList:function(){M.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");return new Promise(function(r){M.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");this.userInfoService.getLanguageList().done(function(D){M.end("FLP:LanguageRegionSelector._getLanguagesList");r(D);}).fail(function(e){M.end("FLP:LanguageRegionSelector._getLanguagesList");L.error("Failed to load language list.",e,"sap.ushell.components.ushell.settings.userLanguageRegion.LanguageRegionSelector.controller");r(null);});}.bind(this));},_loadUserSettingList:function(){M.start("FLP:LanguageRegionSelector._loadUserSettingList","_loadUserSettingList","FLP");return new Promise(function(r){M.start("FLP:LanguageRegionSelector._loadUserSettingList","_loadUserSettingList","FLP");this.userInfoService.getUserSettingList().then(function(D){M.end("FLP:LanguageRegionSelector._loadUserSettingList");r(D);});}.bind(this));},onCancel:function(){var m=this.getView().getModel(),o=m.getData(),l=o.languageList,i=o.isEnableSetLanguage;if(i&&l){var u=this.oUser.getLanguage();var s=o.isLanguagePersonalized?u:"default";m.setProperty("/selectedLanguage",s);this._updateTextFields(u);}if(o.isEnableUserProfileSetting){this._restoreUserSettingPreferenceValues();}},onSave:function(){var u=this.oUser,m=this.getView().getModel().getData(),s=m.selectedLanguage,o=u.getLanguage(),l=s!==(m.isLanguagePersonalized?o:"default"),i=m.isEnableUserProfileSetting,e=m.isEnableSetLanguage&&m.languageList&&l;if(e||i){return new Promise(function(r,f){if(e){u.setLanguage(s);}if(i){var F=sap.ui.getCore().getConfiguration().getFormatSettings();if(F.getLegacyDateFormat()!==m.selectedDatePattern){u.setChangedProperties({propertyName:"dateFormat",name:"DATE_FORMAT"},F.getLegacyDateFormat(),m.selectedDatePattern);}if(F.getLegacyTimeFormat()!==m.selectedTimeFormat){u.setChangedProperties({propertyName:"timeFormat",name:"TIME_FORMAT"},F.getLegacyTimeFormat(),m.selectedTimeFormat);}if(this._getLegacyNumberFormat(F)!==m.selectedNumberFormat){u.setChangedProperties({propertyName:"numberFormat",name:"NUMBER_FORMAT"},this._getLegacyNumberFormat(F),m.selectedNumberFormat);}if(this.oUser.getTimeZone()!==m.selectedTimeZone){u.setChangedProperties({propertyName:"timeZone",name:"TIME_ZONE"},this.oUser.getTimeZone(),m.selectedTimeZone);}}this.userInfoService.updateUserPreferences(u).done(function(){var R={refresh:true};if(e){u.resetChangedProperty("language");var g=U.fromQuery(window.location.search).get("sap-language");if(g&&s!=="default"){R.urlParams=[{"sap-language":s}];}this._removeLanguageFromUserContextCookie();}r(R);}.bind(this)).fail(function(g,p){if(e){u.setLanguage(o);u.resetChangedProperty("language");this._updateTextFields(o);}if(m.isEnableUserProfileSetting){this._restoreUserSettingPreferenceValues();}L.error("Failed to save Language and Region Settings",g,"sap.ushell.components.ushell.settings.userLanguageRegion.LanguageRegionSelector.controller");f(new c({type:d.Error,description:g,message:p.message.value,date:p.innererror.timestamp,httpStatus:p.httpStatus}));}.bind(this));}.bind(this));}return Promise.resolve();},_restoreUserSettingPreferenceValues:function(){var m=this.getView().getModel();var f=sap.ui.getCore().getConfiguration().getFormatSettings();m.setProperty("/selectedDatePattern",f.getLegacyDateFormat());m.setProperty("/selectedTimeFormat",f.getLegacyTimeFormat());m.setProperty("/selectedNumberFormat",this._getLegacyNumberFormat(f));m.setProperty("/selectedTimeZone",this.oUser.getTimeZone());},_removeLanguageFromUserContextCookie:function(){var u=document.cookie.split(";").find(function(f){return f.indexOf("sap-usercontext")!==-1;});if(!u){return;}var e=u.replace("sap-usercontext=","").split("&");e=e.filter(function(v){return v.indexOf("sap-language")===-1;});document.cookie="sap-usercontext="+e.join("&")+";path=/";},_handleSelectChange:function(e){var s=e.getParameters().selectedItem.getKey();this._updateTextFields(s);},_updateTextFields:function(l){var o;if(l===this.oUser.getLanguage()){o=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();}else{o=new a(l);}var m=this.getView().getModel(),e=b.getInstance(o),D=e.getDatePattern("medium"),t=e.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";if(!m.getData().isEnableUserProfileSetting){m.setProperty("/selectedDatePattern",D);m.setProperty("/selectedTimeFormat",T);}},_getLegacyNumberFormat:function(f){var l=f.getLegacyNumberFormat();if(l){return l.trim();}return undefined;}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userLanguageRegion/UserLanguageRegionEntry',["sap/ui/core/mvc/XMLView","sap/ui/core/Locale","sap/ui/core/LocaleData","sap/base/Log","sap/ushell/resources"],function(X,L,a,b,r){"use strict";
function g(){var v;var e={id:"language",entryHelpID:"language",title:r.i18n.getText("languageRegionTit"),valueResult:null,contentResult:null,icon:"sap-icon://globe",valueArgument:function(){var u=sap.ushell.Container.getUser().getLanguageText();if(u.indexOf("-")>-1){u=u.replace("-"," (").concat(")");}return Promise.resolve(u);},contentFunc:function(){return X.create({id:"languageRegionSelector",viewName:"sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector"}).then(function(V){v=V;return V;});},onSave:function(){if(v){return v.getController().onSave();}b.warning("Save operation for language settings was not executed, because the languageRegionSelector view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}b.warning("Cancel operation for language settings was not executed, because the languageRegionSelector view was not initialized");}};return e;}
return{getEntry:g};});
sap.ui.predefine('sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsProfiling',["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/resources"],function(L,X,r){"use strict";return{getProfiling:function(){var v;return{id:"usageAnalytics",entryHelpID:"usageAnalytics",title:r.i18n.getText("usageAnalytics"),contentFunc:function(){return X.create({id:"userPrefUsageAnalyticsSelector",viewName:"sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector"}).then(function(V){v=V;return V;});},onSave:function(){if(v){return v.getController().onSave();}L.warning("Save operation for user profiling was not executed, because the userProfiling view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}L.warning("Cancel operation for user profiling was not executed, because the userProfiling view was not initialized");}};}};});
sap.ui.predefine('sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsSelector.controller',["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(C,J,r){"use strict";return C.extend("sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.getView().setModel(r.getTranslationModel(),"i18n");sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(s){this.oUsageAnalyticsService=s;this.getView().setModel(new J({isTrackingUsageAnalytics:this.oUser.getTrackUsageAnalytics(),legalText:this.oUsageAnalyticsService.getLegalText()}));}.bind(this));},onSave:function(){var c=this.getView().getModel().getProperty("/isTrackingUsageAnalytics");return this.oUsageAnalyticsService.setTrackUsageAnalytics(c);},onCancel:function(){this.getView().getModel().setProperty("/isTrackingUsageAnalytics",this.oUser.getTrackUsageAnalytics());}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userProfiling/UserProfiling.controller',["sap/ui/core/mvc/Controller","sap/base/Log","sap/m/Title","sap/ushell/Config"],function(C,L,T,a){"use strict";return C.extend("sap.ushell.components.shell.Settings.userProfiling.UserProfiling",{onInit:function(){this._loadContent();},_loadContent:function(){var v=this.getView().byId("profilingContent"),p=a.last("/core/userPreferences/profiling");p.forEach(function(P){var c=P.contentFunc();c.then(function(r){var t=new T({text:P.title||""}).addStyleClass("sapUiSmallMarginTop");v.addItem(t);v.addItem(r);},function(e){L.warning("Failed to load "+P.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");});});},onCancel:function(){var p=a.last("/core/userPreferences/profiling");p.forEach(function(P){if(P.onCancel){P.onCancel();}});},onSave:function(){var p=a.last("/core/userPreferences/profiling")||[],s=p.map(this._saveProfileEntry);return Promise.all(s).then(function(r){var h=r.some(function(R){return R&&R.error;});return h?Promise.reject("Can not save user profiling settings"):Promise.resolve();});},_saveProfileEntry:function(p){return new Promise(function(r){p.onSave().then(r,function(e){L.error("Failed to save "+p.title+" profiling",e,"sap.ushell.components.shell.Settings.userProfiling.UserProfiling");r({error:true});});});}});});
sap.ui.predefine('sap/ushell/components/shell/Settings/userProfiling/UserProfilingEntry',["sap/base/Log","sap/ui/core/mvc/XMLView","sap/ushell/Config","sap/ushell/resources"],function(L,X,C,r){"use strict";return{getEntry:function(){var v;return{id:"userProfiling",entryHelpID:"userProfiling",title:r.i18n.getText("userProfiling"),valueResult:null,contentResult:null,icon:"sap-icon://user-settings",valueArgument:function(){var p=C.last("/core/userPreferences/profiling"),R={value:p&&p.length>0?1:0,displayText:""};return Promise.resolve(R);},contentFunc:function(){return X.create({id:"userProfilingView",viewName:"sap.ushell.components.shell.Settings.userProfiling.UserProfiling"}).then(function(V){v=V;return V;});},onSave:function(){if(v){return v.getController().onSave();}L.warning("Save operation for user profiling was not executed, because the userProfiling view was not initialized");return Promise.resolve();},onCancel:function(){if(v){v.getController().onCancel();return;}L.warning("Cancel operation for user profiling was not executed, because the userProfiling view was not initialized");},provideEmptyWrapper:false,visible:false};}};});
sap.ui.predefine('sap/ushell/components/shell/UserImage/Component',["sap/ushell/resources","sap/ui/core/UIComponent","sap/ui/core/IconPool","sap/ui/Device","sap/m/Button","sap/m/ButtonType","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery"],function(r,U,I,D,B,a,l,i,q){"use strict";var s;return U.extend("sap.ushell.components.shell.UserImage.Component",{metadata:{version:"1.96.0",library:"sap.ushell.components.shell.UserImage",dependencies:{libs:{"sap.m":{},"sap.ui.layout":{lazy:true}}}},createContent:function(){var S;s=sap.ushell.Container.getRenderer("fiori2")._oShellView;S=(s.getViewData()?s.getViewData().config:{})||{};this.loadUserImage();var u=sap.ushell.Container.getUser();if(S.enableUserImgConsent===true&&u.getImageConsent()===undefined){this._showUserConsentPopup();}},_showUserConsentPopup:function(){var t=this;var T=sap.ui.getCore().getConfiguration().getRTL()?"Right":"Left";var d,f,b,c;var y=new B("yesButton",{text:r.i18n.getText("DisplayImg"),type:a.Emphasized,press:function(){t.updateUserImage(true);d.close();}});var n=new B("noButton",{text:r.i18n.getText("DontDisplayImg"),press:function(){t.updateUserImage(false);d.close();}});sap.ui.require(["sap/ui/layout/form/VerticalLayout","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/FlexBox"],function(V,e,g,L,F){d=new e("userConsentDialog",{title:r.i18n.getText("userImageConsentDialogTitle"),modal:true,stretch:D.system.phone,buttons:[y,n],afterClose:function(){d.destroy();}}).addStyleClass("sapUshellUserConsentDialog").addStyleClass("sapContrastPlus");var u=new g({text:r.i18n.getText("userImageConsentDialogTermsOfUse")}).addStyleClass("sapUshellUserConsentDialogTerms");var h=new g({text:r.i18n.getText("userImageConsentText"),textAlign:T}).addStyleClass("sapUshellUserConsentDialogText");var j=new L({text:r.i18n.getText("userImageConsentDialogShowTermsOfUse"),textAlign:T,press:function(){var m=c.getVisible();if(m){c.setVisible(false);j.setText(r.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{j.setText(r.i18n.getText("userImageConsentDialogHideTermsOfUse"));c.setVisible(true);}}}).addAriaLabelledBy(h);f=new F({alignItems:"Center",direction:"Row",items:[h]}).addStyleClass("sapUshellUserConsentDialogBox");b=new F({alignItems:"Center",direction:"Row",items:[j]}).addStyleClass("sapUshellUserConsentDialogBox").addStyleClass("sapUshellUserConsentDialogLink");c=new F({alignItems:"Center",direction:"Row",items:[u]}).addStyleClass("ushellUserImgConsentTermsOfUseFlexBox");c.setVisible(false);var k=new V("userConsentDialogLayout",{content:[f,b,c]});d.addContent(k);d.open();});},loadUserImage:function(){var u=sap.ushell.Container.getUser(),b=u.getImage();if(b){this._setUserImage(b);}u.attachOnSetImage(this._setUserImage.bind(this));},_setUserImage:function(p){var u=typeof p==="string"?p:p.mParameters;if(u&&typeof u==="string"||!i(u)){q.ajax({url:u,headers:{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"},success:function(){s.getModel().setProperty("/userImage/personPlaceHolder",u);s.getModel().setProperty("/userImage/account",u);},error:function(){l.error("Could not load user image from: "+u,"","sap.ushell.renderers.fiori2.Shell.view");sap.ushell.Container.getUser().setImage("");}});}else{s.getModel().setProperty("/userImage/personPlaceHolder",null);s.getModel().setProperty("/userImage/account",I.getIconURI("account"));}},updateUserImage:function(b){var u=sap.ushell.Container.getUser(),d=new q.Deferred(),o;this.userInfoService=sap.ushell.Container.getService("UserInfo");if(b!==undefined){u.setImageConsent(b);o=this.userInfoService.updateUserPreferences(u);o.done(function(){u.resetChangedProperty("isImageConsent");d.resolve();});}else{d.reject(b+"is undefined");}},exit:function(){}});});
sap.ui.predefine('sap/ushell/components/tiles/action/ActionTile.controller',["sap/ushell/components/tiles/utils","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,J,q,L){"use strict";sap.ui.controller("sap.ushell.components.tiles.action.ActionTile",{onInit:function(){var v=this.getView();var V=v.getViewData();var r=u.getResourceBundleModel();var t=V.chip;var c=u.getActionConfiguration(t);var m;var a=this;function f(s,S){var b=r.getResourceBundle(),R=b.getText("configuration.semantic_object")+":\n"+s+"\n\n"+b.getText("configuration.semantic_action")+":\n"+S;return R;}v.setModel(r,"i18n");m=new J({config:c,displayText:f(c.semantic_object,c.semantic_action)});v.setModel(m);if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var C=u.getConfigurationUi(a.getView(),"sap.ushell.components.tiles.action.Configuration");t.configurationUi.attachCancel(this.onCancelConfiguration.bind(null,C));t.configurationUi.attachSave(this.onSaveConfiguration.bind(this,C,f));return C;}.bind(this));v.byId("actionTile").setTooltip(r.getResourceBundle().getText("edit_configuration.tooltip"));}},onPress:function(e){var t=this.getView().getViewData().chip;if(t.configurationUi.isEnabled()){t.configurationUi.display();}},onSaveConfiguration:function(c,f){var d=q.Deferred(),m=c.getModel(),t=m.getProperty("/tileModel"),T=c.getViewData().chip;function l(E){L.warning(E,null,"sap.ushell.components.tiles.action.ActionTile.controller");d.reject(E);}var r=u.checkTMInputOnSaveConfig(c);if(r){d.reject("mandatory_fields_missing");return d.promise();}var b=u.getResourceBundleModel().getResourceBundle();if(u.tableHasDuplicateParameterNames(m.getProperty("/config/rows"))){d.reject(b.getText("configuration.signature.uniqueParamMessage.text"));}else if(!u.tableHasInvalidSapPrelaunchOperationValue(m.getProperty("/config/rows"))){var s=JSON.stringify([{"type":"split","source":"p1","target":["p2","p3"]},{"type":"merge","source":["p4","p5"],"target":"p6"}]);d.reject(b.getText("configuration.signature.invalidSapPrelaunchOperationsMessage.text",[s]));}else{var F=m.getProperty("/config/formFactorConfigDefault")?undefined:u.buildFormFactorsObject(m);var M=u.getMappingSignatureString(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var o=u.getMappingSignature(m.getProperty("/config/rows"),m.getProperty("/config/isUnknownAllowed"));var a={semantic_object:q.trim(m.getProperty("/config/semantic_object"))||"",semantic_action:q.trim(m.getProperty("/config/semantic_action"))||"",display_title_text:q.trim(m.getProperty("/config/display_title_text"))||"",url:q.trim(m.getProperty("/config/url"))||"",ui5_component:q.trim(m.getProperty("/config/ui5_component"))||"",navigation_provider:q.trim(m.getProperty("/config/navigation_provider")),navigation_provider_role:q.trim(m.getProperty("/config/navigation_provider_role"))||"",navigation_provider_instance:q.trim(m.getProperty("/config/navigation_provider_instance"))||"",target_application_id:q.trim(m.getProperty("/config/target_application_id"))||"",target_application_alias:q.trim(m.getProperty("/config/target_application_alias"))||"",transaction:{code:q.trim(m.getProperty("/config/transaction/code"))},web_dynpro:{application:q.trim(m.getProperty("/config/web_dynpro/application")),configuration:q.trim(m.getProperty("/config/web_dynpro/configuration"))},target_system_alias:q.trim(m.getProperty("/config/target_system_alias")),display_info_text:q.trim(m.getProperty("/config/display_info_text")),form_factors:F,mapping_signature:M,signature:o};var e=T.bag.getBag("tileProperties");e.setText("display_title_text",a.display_title_text);T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(a)},function(){var C=u.getActionConfiguration(T,false);var g=u.getActionConfiguration(T,true);m=new J({config:C,tileModel:t});c.setModel(m);t.setData({config:g,displayText:f(g.semantic_object,g.semantic_action)},false);e.save(function(){L.debug("property bag 'tileProperties' saved successfully");d.resolve();},l);},l);}return d.promise();},onCancelConfiguration:function(c){var v=c.getViewData();var m=c.getModel();var t=m.getProperty("/tileModel");var T=v.chip;var C=u.getActionConfiguration(T,false);c.getModel().setData({config:C,tileModel:t},false);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/action/Configuration.controller',["sap/ushell/components/tiles/utils","sap/ui/core/library","sap/m/MessageBox"],function(u,c,M){"use strict";var V=c.ValueState;sap.ui.controller("sap.ushell.components.tiles.action.Configuration",{sEnterValuePlaceHolder:"",sDuplicateErrorMsg:"",sDuplicateErrorTitle:"",sInvalidParmMsg:"",aDefaultObjects:[{obj:"",name:""},{obj:"*",name:"*"}],onConfigurationInputChange:function(C){u.checkTMInput(this.getView(),C);},onInit:function(){var v=this.getView();var s=v.byId("semantic_objectInput");var r=v.byId("navigation_provider_roleInput");var i=v.byId("navigation_provider_instanceInput");var a=v.byId("target_application_aliasInput");var A=v.byId("semantic_actionInput");var t=v.byId("targetTypeInput");var R=u.getResourceBundleModel();v.setModel(R,"i18n");v.setViewName("sap.ushell.components.tiles.action.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createRoleModel(this,r,i);u.createAliasModel(this,a);u.createActionModel(this,A);u.createNavigationProviderModel(this,t);s.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/semantic_object",d);});r.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_role",d);u.updateAliasModel(v,a);});i.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/navigation_provider_instance",d);});a.attachChange(function(C){var d=C.getSource().getValue();v.getModel().setProperty("/config/target_application_alias",d);});var b=R.getResourceBundle();this.sEnterValuePlaceHolder=b.getText("configuration.signature.table.valueFieldLbl");this.sDuplicateErrorMsg=b.getText("configuration.signature.uniqueParamMessage.text");this.sDuplicateErrorTitle=b.getText("configuration.signature.uniqueParamMessage.title");this.sInvalidParmMsg=b.getText("configuration.signature.invalidParamMessage.text");},handleMandatoryChange:function(m){var i=m.getParameter("id");var p=sap.ui.getCore().byId(i).getParent().getCells();var I=m.getParameter("checked");if(I){p[2].setEnabled(true);p[2].setPlaceholder(this.sEnterValuePlaceHolder);p[4].setEnabled(false);p[4].setValue("");p[4].setPlaceholder("");p[3].setEnabled(true);}else{p[2].setEnabled(false);p[2].setValue("");p[2].setPlaceholder("");p[4].setEnabled(true);p[4].setPlaceholder(this.sEnterValuePlaceHolder);p[3].setEnabled(false);p[3].setChecked(false);}},addRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty("/config/rows");var n=u.getEmptyRowObj();r.push(n);m.setProperty("/config/rows",r);},deleteRow:function(){var v=this.getView();var m=v.getModel();var r=m.getProperty("/config/rows");var t=v.byId("mappingSignatureTable");var s=t.getSelectedIndices();var S=s.sort(function(a,b){return b-a;}).slice();for(var i=0;i<S.length;i++){t.removeSelectionInterval(S[i],S[i]);r.splice(S[i],1);}m.setProperty("/config/rows",r);},checkDuplicateNames:function(a){var m=this.getView().getModel();var r=m.getProperty("/config/rows");var n=sap.ui.getCore().byId(a.getParameter("id"));var N=a.getParameter("newValue");if(N!=""&&!(/^[\w-/]+$/.test(N))){n.setValueState(V.Error);M.alert(this.sInvalidParmMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}if(u.tableHasDuplicateParameterNames(r)){n.setValueState(V.Error);M.alert(this.sDuplicateErrorMsg,this.focusNameField.bind(n),this.sDuplicateErrorTitle);}else{n.setValueState(V.None);}},focusNameField:function(){this.focus();},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e);},onRoleValueHelpRequest:function(e){u.roleSelectOnValueHelpRequest(this,e);},onInstanceValueHelpRequest:function(e){u.instanceSelectOnValueHelpRequest(this,e);},instanceSuggest:function(e){u.instanceSuggest(this,e);},aliasSuggest:function(e){u.aliasSuggest(this,e);},onAliasValueHelpRequest:function(e){u.applicationAliasSelectOnValueHelpRequest(this,e);},onFormFactorChange:function(){var m=this.getView().getModel();m.setProperty("/config/formFactorConfigDefault",false);},onApplicationTypeChange:function(e){var p=e.getParameters();if(p.selectedItem){u.displayApplicationTypeFields(p.selectedItem.getKey(),this.getView());}}});},true);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/Configuration.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(C,u,L){"use strict";return C.extend("sap.ushell.components.tiles.applauncher.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),t=v.byId("targetUrl"),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncher.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a);s.attachChange(function(o){var V=o.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});function c(U){return!U;}t.bindProperty("enabled",{formatter:c,path:"/config/navigation_use_semantic_object"});var i=new L({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new L({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});});
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ushell/library","sap/ui/model/json/JSONModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/ushell/utils/UrlParsing"],function(C,u,a,A,b,W,m,c,J,L,q,U){"use strict";var G=m.GenericTileScope;var d=m.GenericTileMode;var e=c.AppType;
C.extend("sap.ushell.components.tiles.applauncher.StaticTile",{
_aDoableObject:{},
onInit:function(){var s=this.getView(),v=s.getViewData(),t=v.chip,o=a.getConfiguration(t,t.configurationUi.isEnabled(),false),M,k,K,f=this,N=o.navigation_target_url,S,h;this.oShellModel=A.getElementsModel();S=t.url.getApplicationSystem();if(S){if(U.isIntentUrl(N)){h=U.parseShellHash(N);if(!h.params){h.params={};}h.params["sap-system"]=S;N="#"+U.constructShellHash(h);}else{N+=((N.indexOf("?")<0)?"?":"&")+"sap-system="+S;}}this.navigationTargetUrl=N;M=new J({sizeBehavior:b.last("/core/home/sizeBehavior"),wrappingType:b.last("/core/home/wrappingType"),mode:o.display_mode,config:o,nav:{navigation_target_url:(t.configurationUi&&t.configurationUi.isEnabled()?"":N)},search:{display_highlight_terms:[]}});s.setModel(M);this._aDoableObject=b.on("/core/home/sizeBehavior").do(function(j){M.setProperty("/sizeBehavior",j);});if(t.types){t.types.attachSetType(function(T){if(f.tileType!==T){if(T==="link"){M.setProperty("/mode",d.LineMode);}else{M.setProperty("/mode",M.getProperty("/config/display_mode"));}f.tileType=T;}});}if(!this.tileType){this.tileType="tile";}if(t.search){k=s.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n){return n&&n!=="";});if(o.display_title_text&&o.display_title_text!==""&&K.indexOf(o.display_title_text)===-1){K.push(o.display_title_text);}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&K.indexOf(o.display_subtitle_text)===-1){K.push(o.display_subtitle_text);}if(o.display_info_text&&o.display_info_text!==""&&K.indexOf(o.display_info_text)===-1){K.push(o.display_info_text);}t.search.setKeywords(K);t.search.attachHighlight(function(H){s.getModel().setProperty("/search/display_highlight_terms",H);});}if(t.bag&&t.bag.attachBagsUpdated){t.bag.attachBagsUpdated(function(j){if(j.indexOf("tileProperties")>-1){u._updateTilePropertiesTexts(s,t.bag.getBag("tileProperties"));}});}if(t.configuration&&t.configuration.attachConfigurationUpdated){t.configuration.attachConfigurationUpdated(function(j){if(j.indexOf("tileConfiguration")>-1){u._updateTileConfiguration(s,t.configuration.getParameterValueAsString("tileConfiguration"));}});}if(t.preview){t.preview.setTargetUrl(N);t.preview.setPreviewIcon(o.display_icon_url);t.preview.setPreviewTitle(o.display_title_text);if(t.preview.setPreviewSubtitle&&typeof t.preview.setPreviewSubtitle==="function"){t.preview.setPreviewSubtitle(o.display_subtitle_text);}}if(t.configurationUi.isEnabled()){t.configurationUi.setUiProvider(function(){var j=u.getConfigurationUi(s,"sap.ushell.components.tiles.applauncher.Configuration");t.configurationUi.attachCancel(f.onCancelConfiguration.bind(null,j));t.configurationUi.attachSave(f.onSaveConfiguration.bind(null,j));return j;});this.getView().getContent()[0].setTooltip(u.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}if(t.actions){var g=o.actions,E;if(g){E=g.slice();}else{E=[];}if(b.last("/core/shell/enablePersonalization")){var T=M.getProperty("/mode")===d.LineMode?"link":"tile",i=a.getTileSettingsAction(M,this.onSaveRuntimeSettings.bind(this),T);E.push(i);}t.actions.setActionsProvider(function(){return E;});}},
onExit:function(){this._aDoableObject.off();},
onPress:function(E){var s=this.getView(),v=s.getViewData(),t=v.chip,T=s.getModel().getProperty("/config");if(E.getSource().getScope&&E.getSource().getScope()===G.Display){if(t.configurationUi.isEnabled()){t.configurationUi.display();}else if(this.navigationTargetUrl){if(this.navigationTargetUrl[0]==="#"){hasher.setHash(this.navigationTargetUrl);}else{var l=b.last("/core/shell/enableRecentActivity")&&b.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:T.display_title_text,appType:e.URL,url:T.navigation_target_url,appId:T.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(this.navigationTargetUrl,"_blank");}}}},
onSaveRuntimeSettings:function(s){var v=s.getModel(),t=this.getView().getViewData().chip,o=this.getView().getModel().getProperty("/config");o.display_title_text=v.getProperty("/title")||"";o.display_subtitle_text=v.getProperty("/subtitle")||"";o.display_info_text=v.getProperty("/info")||"";o.display_search_keywords=v.getProperty("/keywords")||"";var f=t.bag.getBag("tileProperties");f.setText("display_title_text",o.display_title_text);f.setText("display_subtitle_text",o.display_subtitle_text);f.setText("display_info_text",o.display_info_text);f.setText("display_search_keywords",o.display_search_keywords);function l(E){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");}f.save(function(){L.debug("property bag 'tileProperties' saved successfully");this.getView().getModel().setProperty("/config/display_title_text",o.display_title_text);this.getView().getModel().setProperty("/config/display_subtitle_text",o.display_subtitle_text);this.getView().getModel().setProperty("/config/display_info_text",o.display_info_text);this.getView().getModel().setProperty("/config/display_search_keywords",o.display_search_keywords);this.getView().getModel().refresh();}.bind(this),l);},
onSaveConfiguration:function(o){var D=new q.Deferred();var M=o.getModel();var t=M.getProperty("/tileModel");var T=o.getViewData().chip;var f=u.tileActionsRows2TileActionsArray(M.getProperty("/config/tile_actions_rows"));var g={display_icon_url:M.getProperty("/config/display_icon_url"),navigation_use_semantic_object:M.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:M.getProperty("/config/navigation_target_url"),navigation_semantic_object:q.trim(M.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:q.trim(M.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:q.trim(M.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:M.getProperty("/config/display_search_keywords")};var r=u.checkInputOnSaveConfig(o);if(!r){r=u.checkTileActions(o);}if(r){D.reject("mandatory_fields_missing");return D.promise();}if(g.navigation_use_semantic_object){g.navigation_target_url=a.getSemanticNavigationUrl(g);M.setProperty("/config/navigation_target_url",g.navigation_target_url);}var h=T.bag.getBag("tileProperties");h.setText("display_title_text",M.getProperty("/config/display_title_text"));h.setText("display_subtitle_text",M.getProperty("/config/display_subtitle_text"));h.setText("display_info_text",M.getProperty("/config/display_info_text"));h.setText("display_search_keywords",g.display_search_keywords);var i=T.bag.getBag("tileNavigationActions");u.populateTileNavigationActionsBag(i,f);function l(E,j){L.error(E,null,"sap.ushell.components.tiles.applauncher.StaticTile.controller");D.reject(E,j);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(g)},function(){var j=a.getConfiguration(T,false,false),k=a.getConfiguration(T,true,false),M=new J({config:j,nav:{navigation_target_url:""},tileModel:t});o.setModel(M);t.setData({config:k,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(j.navigation_target_url);T.preview.setPreviewIcon(j.display_icon_url);T.preview.setPreviewTitle(j.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(j.display_subtitle_text);}}h.save(function(){L.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(j.display_title_text,function(){D.resolve();},l);}else{D.resolve();}},l);i.save(function(){L.debug("property bag 'navigationProperties' saved successfully");},l);},l);return D.promise();},
onCancelConfiguration:function(o){var v=o.getViewData(),M=o.getModel(),t=M.getProperty("/tileModel"),T=v.chip,f=a.getConfiguration(T,T.configurationUi.isEnabled(),false);o.getModel().setData({config:f,nav:{navigation_target_url:""},tileModel:t},false);},
formatters:{leanURL:W.getLeanURL.bind(W)}
});
},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent"],function(G,I,T){"use strict";sap.ui.jsview("sap.ushell.components.tiles.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncher.StaticTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl();},getTileControl:function(){var c=this.getController();if(this.getContent().length===1){return this.getContent()[0];}return new G({mode:"{= ${/mode} || (${/config/display_icon_url} ? 'ContentMode' : 'HeaderMode') }",header:"{/config/display_title_text}",subheader:"{/config/display_subtitle_text}",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:c.formatters.leanURL},size:"Auto",tileContent:new T({size:"Auto",footer:"{/config/display_info_text}",content:new I({src:"{/config/display_icon_url}"})}),press:[c.onPress,c]});},getMode:function(){return this.getModel().getProperty("/mode")||(this.getModel().getProperty("/config/display_icon_url")?"ContentMode":"HeaderMode");}});});
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/Configuration.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/ListItem"],function(C,u,L){"use strict";return C.extend("sap.ushell.components.tiles.applauncherdynamic.Configuration",{onConfigurationInputChange:function(c){u.checkInput(this.getView(),c);},aDefaultObjects:[{obj:"",name:""}],onInit:function(){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),a=v.byId("navigation_semantic_actionInput"),r=u.getResourceBundleModel();v.setModel(r,"i18n");var b=r.getResourceBundle();v.setViewName("sap.ushell.components.tiles.applauncherdynamic.Configuration");u.createSemanticObjectModel(this,s,this.aDefaultObjects);u.createActionModel(this,a,this.aDefaultObjects);s.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_object",V);});a.attachChange(function(c){var V=c.getSource().getValue();v.getModel().setProperty("/config/navigation_semantic_action",V);});v.byId("targetUrl").bindProperty("enabled",{formatter:function(U){return!U;},path:"/config/navigation_use_semantic_object"});var i=new L({key:"URL",text:b.getText("configuration.tile_actions.table.target_type.url")});v.byId("targetTypeCB").addItem(i);i=new L({key:"INT",text:b.getText("configuration.tile_actions.table.target_type.intent")});v.byId("targetTypeCB").addItem(i);},onAfterRendering:function(){u.updateMessageStripForOriginalLanguage(this.getView());},onValueHelpRequest:function(e){u.objectSelectOnValueHelpRequest(this,e,false);},onActionValueHelpRequest:function(e){u.actionSelectOnValueHelpRequest(this,e,false);},onCheckBoxChange:function(e){var v=this.getView(),s=v.byId("navigation_semantic_objectInput"),m=s.getModel(),a=e.getSource().getSelected();m.setProperty("/enabled",a);u.checkInput(this.getView(),e);},onIconValueHelpRequest:function(e){u.iconSelectOnValueHelpRequest(this,e,false);},onSelectIconClose:function(){u.onSelectIconClose(this.getView());},onSelectIconOk:function(){u.onSelectIconOk(this.getView());},handleTargetTypeChange:function(t){u.onTargetTypeChange(t);},onTileActionValueHelp:function(e){u.objectSelectOnValueHelpRequest(this,e,true);},onTileActionIconValueHelp:function(e){u.iconSelectOnValueHelpRequest(this,e,true);},addRow:function(){u.addTileActionsRow(this.getView());},deleteRow:function(){u.deleteTileActionsRow(this.getView());}});});
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.controller',["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ushell/components/tiles/utilsRT","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils/UrlParsing"],function(u,C,a,b,A,c,W,s,J,q,L,D,U){"use strict";var G=s.GenericTileScope;var d=s.GenericTileMode;var e=u.AppType;var f="sap.ushell.components.tiles.applauncherdynamic.DynamicTile";return C.extend(f,{_aDoableObject:{},oDataRequest:null,sConfigNavigationTargetUrlOld:"",REFRESH_INTERVAL_MIN:10,constructTargetUrlWithSapSystem:function(n,S){var h;if(S){if(U.isIntentUrl(n)){h=U.parseShellHash(n);if(!h.params){h.params={};}h.params["sap-system"]=S;n="#"+U.constructShellHash(h);}else{n+=((n.indexOf("?")<0)?"?":"&")+"sap-system="+S;}}return n;},onInit:function(){var t=this;var k;var K;var v=this.getView();var V=v.getViewData();var T=V.chip;var o=b.getConfiguration(T,T.configurationUi.isEnabled(),false);var N=o.navigation_target_url;var S=T.url.getApplicationSystem();this.sConfigNavigationTargetUrlOld=o.navigation_target_url;L.setLevel(2,f);this.bIsRequestCompleted=false;this.oShellModel=A.getElementsModel();this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(N,S);var m=new J({sizeBehavior:c.last("/core/home/sizeBehavior"),wrappingType:c.last("/core/home/wrappingType"),config:o,mode:o.display_mode||d.ContentMode,data:b.getDataToDisplay(o,{number:((T.preview&&T.preview.isEnabled())?1234:"...")}),nav:{navigation_target_url:(T.configurationUi&&T.configurationUi.isEnabled()?"":this.navigationTargetUrl)},search:{display_highlight_terms:[]}});v.setModel(m);this._aDoableObject=c.on("/core/home/sizeBehavior").do(function(i){m.setProperty("/sizeBehavior",i);});if(T.types){T.types.attachSetType(function(h){if(t.tileType!==h){var m=t.getView().getModel();if(h==="link"){m.setProperty("/mode",d.LineMode);}else{m.setProperty("/mode",m.getProperty("/config/display_mode")||d.ContentMode);}t.tileType=h;}});}if(!this.tileType){this.tileType="tile";}if(T.search){k=v.getModel().getProperty("/config/display_search_keywords");K=k.split(/[, ]+/).filter(function(n,i){return n&&n!=="";});if(o.display_title_text&&o.display_title_text!==""&&K.indexOf(o.display_title_text)===-1){K.push(o.display_title_text);}if(o.display_subtitle_text&&o.display_subtitle_text!==""&&K.indexOf(o.display_subtitle_text)===-1){K.push(o.display_subtitle_text);}if(o.display_info_text&&o.display_info_text!==""&&K.indexOf(o.display_info_text)===-1){K.push(o.display_info_text);}if(o.display_number_unit&&o.display_number_unit!==""&&K.indexOf(o.display_number_unit)===-1){K.push(o.display_number_unit);}T.search.setKeywords(K);T.search.attachHighlight(function(H){v.getModel().setProperty("/search/display_highlight_terms",H);});}if(T.bag&&T.bag.attachBagsUpdated){T.bag.attachBagsUpdated(function(i){if(i.indexOf("tileProperties")>-1){a._updateTilePropertiesTexts(v,T.bag.getBag("tileProperties"));}});}if(T.configuration&&T.configuration.attachConfigurationUpdated){T.configuration.attachConfigurationUpdated(function(i){if(i.indexOf("tileConfiguration")>-1){a._updateTileConfiguration(v,T.configuration.getParameterValueAsString("tileConfiguration"));}});}if(T.preview){T.preview.setTargetUrl(this.navigationTargetUrl);T.preview.setPreviewIcon(o.display_icon_url);T.preview.setPreviewTitle(o.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(o.display_subtitle_text);}}if(T.configurationUi.isEnabled()){T.configurationUi.setUiProvider(function(){var i=a.getConfigurationUi(v,"sap.ushell.components.tiles.applauncherdynamic.Configuration");T.configurationUi.attachCancel(t.onCancelConfiguration.bind(null,i));T.configurationUi.attachSave(t.onSaveConfiguration.bind(null,i));return i;});this.getView().getContent()[0].setTooltip(a.getResourceBundleModel().getResourceBundle().getText("edit_configuration.tooltip"));}else if(!T.preview||!T.preview.isEnabled()){if(!S){sap.ushell.Container.addRemoteSystemForServiceUrl(o.service_url);}this.bNeedsRefresh=true;this.iNrOfTimerRunning=0;}if(T.refresh){T.refresh.attachRefresh(this.refreshHandler.bind(this));}if(T.visible){T.visible.attachVisible(this.visibleHandler.bind(this));}if(T.actions){var g=o.actions,E;if(g){E=g.slice();}else{E=[];}if(c.last("/core/shell/enablePersonalization")){var h=m.getProperty("/mode")===d.LineMode?"link":"tile",j=b.getTileSettingsAction(m,this.onSaveRuntimeSettings.bind(this),h);E.push(j);}T.actions.setActionsProvider(function(){return E;});}sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this._clearRequest,this);},stopRequests:function(){if(this.oDataRequest){if(this.oDataRequest.abort()){this.bNeedsRefresh=true;}}},_clearRequest:function(){this.stopRequests();clearTimeout(this.timer);},onExit:function(){if(this.oDataRequest){this._clearRequest();this.oDataRequest.destroy();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this._clearRequest,this);this._aDoableObject.off();},onPress:function(E){var v=this.getView(),V=v.getViewData(),m=v.getModel(),t=m.getProperty("/nav/navigation_target_url"),T=V.chip,o=m.getProperty("/config");if(E.getSource().getScope&&E.getSource().getScope()===G.Display){if(T.configurationUi.isEnabled()){T.configurationUi.display();}else if(t){if(t[0]==="#"){hasher.setHash(t);}else{var l=c.last("/core/shell/enableRecentActivity")&&c.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:o.display_title_text,appType:e.URL,url:o.navigation_target_url,appId:o.navigation_target_url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(t,"_blank");}}}},onSaveRuntimeSettings:function(S){var v=this.getView(),V=v.getModel(),t=v.getViewData().chip,o=V.getProperty("/config"),g=S.getModel();o.display_title_text=g.getProperty("/title")||"";o.display_subtitle_text=g.getProperty("/subtitle")||"";o.display_info_text=g.getProperty("/info")||"";o.display_search_keywords=g.getProperty("/keywords")||"";var h=t.bag.getBag("tileProperties");h.setText("display_title_text",o.display_title_text);h.setText("display_subtitle_text",o.display_subtitle_text);h.setText("display_info_text",o.display_info_text);h.setText("display_search_keywords",o.display_search_keywords);function l(E){L.error(E,null,f);}h.save(function(){L.debug("property bag 'tileProperties' saved successfully");V.setProperty("/config",o);V.setProperty("/data/display_title_text",o.display_title_text);V.setProperty("/data/display_subtitle_text",o.display_subtitle_text);V.setProperty("/data/display_info_text",o.display_info_text);V.refresh();},l);},onSaveConfiguration:function(o){var g=new q.Deferred(),m=o.getModel(),t=m.getProperty("/tileModel"),T=o.getViewData().chip,h=a.tileActionsRows2TileActionsArray(m.getProperty("/config/tile_actions_rows")),i={display_icon_url:m.getProperty("/config/display_icon_url"),display_number_unit:m.getProperty("/config/display_number_unit"),service_url:m.getProperty("/config/service_url"),service_refresh_interval:m.getProperty("/config/service_refresh_interval"),navigation_use_semantic_object:m.getProperty("/config/navigation_use_semantic_object"),navigation_target_url:m.getProperty("/config/navigation_target_url"),navigation_semantic_object:q.trim(m.getProperty("/config/navigation_semantic_object"))||"",navigation_semantic_action:q.trim(m.getProperty("/config/navigation_semantic_action"))||"",navigation_semantic_parameters:q.trim(m.getProperty("/config/navigation_semantic_parameters")),display_search_keywords:m.getProperty("/config/display_search_keywords")};var r=a.checkInputOnSaveConfig(o);if(!r){r=a.checkTileActions(o);}if(r){g.reject("mandatory_fields_missing");return g.promise();}if(i.navigation_use_semantic_object){i.navigation_target_url=b.getSemanticNavigationUrl(i);m.setProperty("/config/navigation_target_url",i.navigation_target_url);}var j=T.bag.getBag("tileProperties");j.setText("display_title_text",m.getProperty("/config/display_title_text"));j.setText("display_subtitle_text",m.getProperty("/config/display_subtitle_text"));j.setText("display_info_text",m.getProperty("/config/display_info_text"));j.setText("display_search_keywords",i.display_search_keywords);var k=T.bag.getBag("tileNavigationActions");a.populateTileNavigationActionsBag(k,h);function l(E,n){L.error(E,null,f);g.reject(E,n);}T.writeConfiguration.setParameterValues({tileConfiguration:JSON.stringify(i)},function(){var n=b.getConfiguration(T,false,false),p=b.getConfiguration(T,true,false),m=new J({config:n,tileModel:t});o.setModel(m);t.setData({data:p,nav:{navigation_target_url:""}},false);if(T.preview){T.preview.setTargetUrl(n.navigation_target_url);T.preview.setPreviewIcon(n.display_icon_url);T.preview.setPreviewTitle(n.display_title_text);if(T.preview.setPreviewSubtitle&&typeof T.preview.setPreviewSubtitle==="function"){T.preview.setPreviewSubtitle(n.display_subtitle_text);}}j.save(function(){L.debug("property bag 'tileProperties' saved successfully");if(T.title){T.title.setTitle(n.display_title_text,function(){g.resolve();},l);}else{g.resolve();}},l);k.save(function(){L.debug("property bag 'navigationProperties' saved successfully");},l);},l);return g.promise();},successHandlerFn:function(r){var v=this.getView();var m=v.getModel();var o=m.getProperty("/config");var n=m.getProperty("/config/navigation_target_url");var R=m.getProperty("/config/service_refresh_interval");var S=m.getProperty("/config/service_url");var V=v.getViewData();var t=V.chip;var g=t.url.getApplicationSystem();if(V.properties&&V.properties.info){if(typeof r==="object"){r.info=V.properties.info;}}var h=b.getDataToDisplay(o,r);m.setProperty("/data",h);if(this.sConfigNavigationTargetUrlOld!==n){this.navigationTargetUrl=this.constructTargetUrlWithSapSystem(n,g);this.sConfigNavigationTargetUrlOld=this.navigationTargetUrl;}m.setProperty("/nav/navigation_target_url",b.addParamsToUrl(this.navigationTargetUrl,h));if(R>0){R=Math.max(R,this.REFRESH_INTERVAL_MIN);L.info("Wait "+R+" seconds before calling "+S+" again",null,f);this.refeshAfterInterval(R);}},errorHandlerFn:function(m,i){var v=this.getView();var M=v.getModel();var S=M.getProperty("/config/service_url");var g=m&&m.message?m.message:m;if(m.statusText==="Abort"||m.aborted===true){L.info("Data request from service "+S+" was aborted",null,f);}else{if(m.response){g+=" - "+m.response.statusCode+" "+m.response.statusText;}var l=i?L.warning:L.error;l("Failed to update data via service\n service URL: "+S+"\n "+g,null,f);this._setTileIntoErrorState();}},_setTileIntoErrorState:function(){var r=a.getResourceBundleModel().getResourceBundle();var m=this.getView().getModel();var o=m.getProperty("/config");m.setProperty("/data",b.getDataToDisplay(o,{number:"???",info:r.getText("dynamic_data.error"),infoState:"Critical"}));},onCancelConfiguration:function(o){var v=o.getViewData(),m=o.getModel(),t=m.getProperty("/tileModel"),T=v.chip,g=b.getConfiguration(T,false,false);m.setData({config:g,tileModel:t},false);},loadData:function(){var v=this.getView();var t=v.getViewData().chip;var m=v.getModel();var g=m.getProperty("/config/service_url");if(/;o=([;/?]|$)/.test(g)){g=t.url.addSystemToServiceUrl(g);}if(!g){L.error("No service URL given!",f);this._setTileIntoErrorState();return;}if(!this.oDataRequest||this.oDataRequest.sUrl!==g){if(this.oDataRequest){this.oDataRequest.destroy();}this.sRequestUrl=g;this.oDataRequest=new D(g,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this));}else if(this.oDataRequest){this.oDataRequest.refresh();}},refreshTile:function(){var v=this.getView(),V=v.getViewData(),i=V.chip.visible.isVisible();if(i&&this.bNeedsRefresh){this.bNeedsRefresh=false;this.loadData();}},refeshAfterInterval:function(r){this.iNrOfTimerRunning++;this.timer=window.setTimeout(function(){this.iNrOfTimerRunning--;if(this.iNrOfTimerRunning===0){this.bNeedsRefresh=true;this.refreshTile();}}.bind(this),r*1000);},refreshHandler:function(){this.bNeedsRefresh=true;this.refreshTile();},visibleHandler:function(i){if(i){this.refreshTile();}else{this.stopRequests();}},formatters:{leanURL:W.getLeanURL.bind(W)}});},false);
sap.ui.predefine('sap/ushell/components/tiles/applauncherdynamic/DynamicTile.view',["sap/m/GenericTile","sap/m/TileContent","sap/m/library","sap/m/NumericContent"],function(G,T,m,N){"use strict";var V=m.ValueColor;sap.ui.jsview("sap.ushell.components.tiles.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.applauncherdynamic.DynamicTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");return this.getTileControl();},getTileControl:function(){var c=this.getController();if(this.getContent().length===1){return this.getContent()[0];}return new G({mode:"{/mode}",header:"{/data/display_title_text}",subheader:"{/data/display_subtitle_text}",size:"Auto",sizeBehavior:"{/sizeBehavior}",wrappingType:"{/wrappingType}",url:{parts:["/targetURL","/nav/navigation_target_url"],formatter:c.formatters.leanURL},tileContent:[new T({size:"Auto",footer:"{/data/display_info_text}",footerColor:{path:"/data/display_info_state",formatter:function(f){if(f==="Positive"){f=V.Good;}if(f==="Negative"){f=V.Error;}if(!V[f]){f=V.Neutral;}return f;}},unit:"{/data/display_number_unit}",content:[new N({scale:"{/data/display_number_factor}",value:"{/data/display_number_value}",truncateValueTo:5,indicator:"{/data/display_state_arrow}",valueColor:{path:"/data/display_number_state",formatter:function(s){if(!s||s==="Neutral"||!V[s]){return V.None;}return s;}},icon:"{/data/display_icon_url}",width:"100%",withMargin:false})]})],press:[c.onPress,c]});},getMode:function(){return this.getModel().getProperty("/mode");}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/Component',["sap/ui/core/mvc/XMLView","sap/ui/core/UIComponent"],function(X,U){"use strict";return U.extend("sap.ushell.components.tiles.cdm.applauncher.Component",{metadata:{interfaces:["sap.ui.core.IAsyncContentCreation"]},createContent:function(){var c=this.getComponentData();var p=c.properties.tilePersonalization||{};var s=c.startupParameters;if(s&&s["sap-system"]){p["sap-system"]=s["sap-system"][0];}return X.create({viewName:"sap.ushell.components.tiles.cdm.applauncher.StaticTile",viewData:{properties:c.properties,configuration:p}}).then(function(v){this._oController=v.getController();v.getContent()[0].bindTileContent({path:"/properties",factory:this._oController._getTileContent.bind(this._oController)});return v;}.bind(this));},tileSetVisualProperties:function(n){if(this._oController){this._oController.updatePropertiesHandler(n);}},tileRefresh:function(){},tileSetVisible:function(i){},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.controller',["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/base/Log","sap/ushell/utils/UrlParsing"],function(u,C,a,W,J,m,L,U){"use strict";var G=m.GenericTileScope;var b=m.GenericTileMode;var D=u.DisplayFormat;var A=u.AppType;return C.extend("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{_aDoableObject:{},_getConfiguration:function(){var c=this.getView().getViewData();c.properties.sizeBehavior=a.last("/core/home/sizeBehavior");c.properties.wrappingType=a.last("/core/home/wrappingType");return c;},onInit:function(){var v=this.getView();var M=new J();M.setData(this._getConfiguration());v.setModel(M);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(s){M.setProperty("/properties/sizeBehavior",s);});var V=this.getView().getViewData();var o=V.properties;var c=V.properties.contentProviderId;o.mode=o.mode||(o.icon?"ContentMode":"HeaderMode");if(o.displayFormat===D.Compact&&o.title&&o.targetURL){M.setProperty("/properties/mode",b.LineMode);}switch(o.displayFormat){case D.Flat:M.setProperty("/properties/frameType","OneByHalf");break;case D.FlatWide:M.setProperty("/properties/frameType","TwoByHalf");break;case D.StandardWide:M.setProperty("/properties/frameType","TwoByOne");break;default:{M.setProperty("/properties/frameType","OneByOne");}}if(a.last("/core/contentProviders/providerInfo/show")){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(d){return d.getSystemContext(c);}).then(function(s){M.setProperty("/properties/contentProviderLabel",s.label);}).catch(function(e){L.error("StaticTile.controller threw an error:",e);});}},onExit:function(){this._aDoableObject.off();},onPress:function(e){var t=this.getView().getViewData().properties;if(e.getSource().getScope&&e.getSource().getScope()===G.Display){var T=this._createTargetUrl();if(!T){return;}if(T[0]==="#"){hasher.setHash(T);}else{var l=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:t.title,appType:A.URL,url:t.targetURL,appId:t.targetURL};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(T,"_blank");}}},updatePropertiesHandler:function(n){var t=this.getView().getContent()[0],T=t.getTileContent()[0];if(typeof n.title!=="undefined"){t.setHeader(n.title);}if(typeof n.subtitle!=="undefined"){t.setSubheader(n.subtitle);}if(typeof n.icon!=="undefined"){T.getContent().setSrc(n.icon);}if(typeof n.info!=="undefined"){T.setFooter(n.info);}},_createTargetUrl:function(){var t=this.getView().getViewData().properties.targetURL;var s=this.getView().getViewData().configuration["sap-system"];var h;if(t&&s){if(U.isIntentUrl(t)){h=U.parseShellHash(t);if(!h.params){h.params={};}h.params["sap-system"]=s;t="#"+U.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}}return t;},_getLeanUrl:function(){return W.getLeanURL(this._createTargetUrl());},_getTileContent:function(i,B){var p=B.getPath().split("/");p.pop();var o=B.getProperty(p.join("/"));if(o!==this.oLastBindingObject||this.oTileContent&&this.oTileContent.bIsDestroyed){this.oLastBindingObject=o;this.oTileContent=this.getView().byId(o.icon?"imageTileContent":"standardTileContent").clone();}return this.oTileContent;},_getCurrentProperties:function(){var t=this.getView().getContent()[0],T=t.getTileContent()[0],s=a.last("/core/home/sizeBehavior");return{title:t.getHeader(),subtitle:t.getSubheader(),info:T.getFooter(),icon:T.getContent().getSrc(),mode:t.getMode(),sizeBehavior:s};}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncher/StaticTile.view',["sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/ui/core/mvc/JSView"],function(G,I,T){"use strict";sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncher.StaticTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncher.StaticTile";},createContent:function(c){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0];}return new G({mode:"{/properties/mode}",header:"{/properties/title}",subheader:"{/properties/subtitle}",size:"Auto",sizeBehavior:"{/properties/sizeBehavior}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{path:"/properties/targetURL",formatter:c._getLeanUrl.bind(c)},tileContent:new T({size:"Auto",footer:"{/properties/info}",content:new I({src:"{/properties/icon}"})}),press:[c.onPress,c],additionalTooltip:"{/properties/contentProviderLabel}"});}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/Component',["sap/ui/core/UIComponent","sap/ui/core/library"],function(U,c){"use strict";var V=c.mvc.ViewType;return U.extend("sap.ushell.components.tiles.cdm.applauncherdynamic.Component",{metadata:{},createContent:function(){var C=this.getComponentData();var p=C.properties||{};var P=p.tilePersonalization||{};var i=p.indicatorDataSource;if(i&&i.path){P.serviceUrl=i.path;P.serviceRefreshInterval=i.refresh;}var s=C.startupParameters;if(s&&s["sap-system"]&&s["sap-system"][0]){P["sap-system"]=s["sap-system"][0];}if(P.serviceUrl&&P.serviceUrl.charAt(0)!=="/"&&p.dataSource&&p.dataSource.uri){var S=p.dataSource.uri;if(P["sap-system"]){if(S.charAt(S.length-1)==="/"){S=S.slice(0,S.length-1);}S+=";o="+P["sap-system"];}if(S.charAt(S.length-1)!=="/"){S+="/";}S+=P.serviceUrl;P.serviceUrl=S;}var t=sap.ui.view({type:V.JS,viewName:"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",viewData:{properties:p,configuration:P},async:true});this.oPromise=t.loaded().then(function(v){this._oController=v.getController();this._oController.visibleHandler(this.bIsVisible);return v;}.bind(this));return t;},tileSetVisualProperties:function(n){if(this._oController){this._oController.updateVisualPropertiesHandler(n);}},tileRefresh:function(){if(this._oController){this._oController.refreshHandler();}},tileSetVisible:function(i){if(this._oController){this._oController.visibleHandler(i);}else{this.bIsVisible=i;}},exit:function(){this._oController=null;}});});
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.controller',["sap/ui/core/mvc/Controller","sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/ui/model/json/JSONModel","sap/m/library","sap/ushell/library","sap/base/Log","sap/base/util/merge","sap/ushell/utils/DynamicTileRequest","sap/ushell/utils/UrlParsing"],function(C,u,N,a,W,J,m,b,L,c,D,U){"use strict";var G=m.GenericTileScope;var d=b.DisplayFormat;var A=b.AppType;var e="sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";return C.extend(e,{timer:null,_aDoableObject:{},oDataRequest:null,_getConfiguration:function(v){var o={};var h;o.configuration=v.configuration;o.properties=v.properties;o.properties.info=o.properties.info||"";o.properties.number_value="...";o.properties.number_value_state="Neutral";o.properties.number_state_arrow="None";o.properties.number_factor="";o.properties.number_unit=o.properties.numberUnit||"";var s=o.configuration["sap-system"];var t=o.properties.targetURL;if(t&&s){if(U.isIntentUrl(t)){h=U.parseShellHash(t);if(!h.params){h.params={};}h.params["sap-system"]=s;t="#"+U.constructShellHash(h);}else{t+=((t.indexOf("?")<0)?"?":"&")+"sap-system="+s;}o.properties.targetURL=t;}o.properties.sizeBehavior=a.last("/core/home/sizeBehavior");o.properties.wrappingType=a.last("/core/home/wrappingType");return o;},onInit:function(){var v=this.getView();var M=new J();var V=v.getViewData();var o=V.properties;M.setData(this._getConfiguration(V));var s=o.contentProviderId;if(a.last("/core/contentProviders/providerInfo/show")){this.oSystemContextPromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(f){return f.getSystemContext(s);}).then(function(S){M.setProperty("/properties/contentProviderLabel",S.label);}).catch(function(E){L.error("DynamicTile.controller threw an error:",E);});}switch(o.displayFormat){case d.Flat:M.setProperty("/properties/frameType","OneByHalf");break;case d.FlatWide:M.setProperty("/properties/frameType","TwoByHalf");break;case d.StandardWide:M.setProperty("/properties/frameType","TwoByOne");break;default:{M.setProperty("/properties/frameType","OneByOne");}}v.setModel(M);this._aDoableObject=a.on("/core/home/sizeBehavior").do(function(S){M.setProperty("/properties/sizeBehavior",S);});},refreshHandler:function(){this.loadData(0);},visibleHandler:function(i){if(i){if(!this.oDataRequest||this.timer===null){this.initUpdateDynamicData();}}else{this.stopRequests();}},updateVisualPropertiesHandler:function(n){var p=this.getView().getModel().getProperty("/properties");var f=false;if(typeof n.title!=="undefined"){p.title=n.title;f=true;}if(typeof n.subtitle!=="undefined"){p.subtitle=n.subtitle;f=true;}if(typeof n.icon!=="undefined"){p.icon=n.icon;f=true;}if(typeof n.targetURL!=="undefined"){p.targetURL=n.targetURL;f=true;}if(typeof n.info!=="undefined"){p.info=n.info;f=true;}if(f){this.getView().getModel().setProperty("/properties",p);}},stopRequests:function(){if(this.timer){clearTimeout(this.timer);this.timer=null;}if(this.oDataRequest){this.oDataRequest.abort();}},onPress:function(E){if(E.getSource().getScope&&E.getSource().getScope()===G.Display){var t=this.getView().getModel().getProperty("/properties/targetURL"),T=this.getView().getModel().getProperty("/properties/title");if(!t){return;}else if(t[0]==="#"){hasher.setHash(t);}else{var l=a.last("/core/shell/enableRecentActivity")&&a.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:T,appType:A.URL,url:t,appId:t};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(t,"_blank");}}},initUpdateDynamicData:function(){var M=this.getView().getModel();var s=M.getProperty("/configuration/serviceUrl");var S=M.getProperty("/configuration/serviceRefreshInterval");if(!S){S=0;}else if(S<10){L.warning("Refresh Interval "+S+" seconds for service URL "+s+" is less than 10 seconds, which is not supported. Increased to 10 seconds automatically.",null,e);S=10;}if(s){this.loadData(S);}},successHandlerFn:function(r){this.updatePropertiesHandler(r);},errorHandlerFn:function(M){var s=M&&M.message?M.message:M;var f=this.getView().getModel().getProperty("/configuration/serviceUrl");if(M.statusText==="Abort"||M.aborted===true){L.info("Data request from service "+f+" was aborted",null,e);}else{if(M.response){s+=" - "+M.response.statusCode+" "+M.response.statusText;}L.error("Failed to update data via service "+f+": "+s,null,e);this._setTileIntoErrorState();}},_setTileIntoErrorState:function(){var r=u.getResourceBundleModel().getResourceBundle();this.updatePropertiesHandler({number:"???",info:r.getText("dynamic_data.error")});},loadData:function(s){var M=this.getView().getModel();var f=M.getProperty("/configuration/serviceUrl");var g=M.getProperty("/properties/contentProviderId");if(!f){L.error("No service URL given!",e);this._setTileIntoErrorState();return;}if(!this.oDataRequest||this.oDataRequest.sUrl!==f){if(this.oDataRequest){this.oDataRequest.destroy();}this.sRequestUrl=f;this.oDataRequest=new D(f,this.successHandlerFn.bind(this),this.errorHandlerFn.bind(this),g);}else if(this.oDataRequest){this.oDataRequest.refresh();}if(s>0){L.info("Wait "+s+" seconds before calling "+f+" again",null,e);this.timer=setTimeout(this.loadData.bind(this,s),(s*1000));}},onExit:function(){if(this.oDataRequest){this.stopRequests();this.oDataRequest.destroy();}this._aDoableObject.off();},addParamsToUrl:function(s,t){var p="",f=s.indexOf("?")!==-1,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!f){s+="?";}else{s+="&";}s+=p;}return s;},_normalizeNumber:function(n,f,g,i){var h;if(isNaN(n)){h=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!g){var j=Math.abs(n);if(j>=1000000000){g="B";n/=1000000000;}else if(j>=1000000){g="M";n/=1000000;}else if(j>=1000){g="K";n/=1000;}}h=o.format(n);}var k=h;var l=k[f-1];f-=(l==="."||l===",")?1:0;k=k.substring(0,f);return{displayNumber:k,numberFactor:g};},updatePropertiesHandler:function(o){var f=u.getResourceBundleModel().getResourceBundle().getText("dynamic_data.error");var p=this.getView().getModel().getProperty("/properties");var g={title:o.title||p.title||"",subtitle:o.subtitle||p.subtitle||"",icon:o.icon||p.icon||"",targetURL:o.targetURL||p.targetURL||"",number_value:!isNaN(o.number)?o.number:"...",number_digits:o.numberDigits>=0?o.numberDigits:4,info:p.info===f?o.info||"":o.info||p.info||"",infoState:o.infoState,number_unit:o.numberUnit||p.number_unit||"",number_state_arrow:o.stateArrow||p.number_state_arrow||"None",number_value_state:o.numberState||p.number_value_state||"Neutral",number_factor:o.numberFactor||p.number_factor||""};var t=[];if(o.targetParams){t.push(o.targetParams);}if(o.results){var s,h,i,n;var j=0;for(i=0,n=o.results.length;i<n;i=i+1){h=o.results[i].number||0;if(typeof h==="string"){h=parseInt(h,10);}j=j+h;s=o.results[i].targetParams;if(s){t.push(s);}}g.number_value=j;}if(t.length>0){g.targetURL=this.addParamsToUrl(g.targetURL,t);}if(!isNaN(o.number)){if(typeof o.number==="string"){o.number=o.number.trim();}var S=this._shouldProcessDigits(o.number,o.numberDigits),k=g.icon?4:5;if(o.number&&o.number.toString().length>=k||S){var l=this._normalizeNumber(o.number,k,o.numberFactor,o.numberDigits);g.number_factor=l.numberFactor;g.number_value=l.displayNumber;}else{var q=N.getFloatInstance({maxFractionDigits:k});g.number_value=q.format(o.number);}}if(g.number_value_state){switch(g.number_value_state){case"Positive":g.number_value_state="Good";break;case"Negative":g.number_value_state="Error";break;default:}}g.sizeBehavior=a.last("/core/home/sizeBehavior");c(p,g);this.getView().getModel().refresh();},_shouldProcessDigits:function(s,i){var n;s=typeof(s)!=="string"?s.toString():s;if(s.indexOf(".")!==-1){n=s.split(".")[1].length;if(n>i){return true;}}return false;},formatters:{leanURL:W.getLeanURL.bind(W)}});},true);
sap.ui.predefine('sap/ushell/components/tiles/cdm/applauncherdynamic/DynamicTile.view',["sap/m/GenericTile","sap/m/TileContent","sap/m/NumericContent","sap/m/library"],function(G,T,N,m){"use strict";var V=m.ValueColor;sap.ui.jsview("sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile",{getControllerName:function(){return"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile";},createContent:function(c){this.setHeight("100%");this.setWidth("100%");if(this.getContent().length===1){return this.getContent()[0];}return new G({size:"Auto",header:"{/properties/title}",subheader:"{/properties/subtitle}",sizeBehavior:"{/properties/sizeBehavior}",frameType:"{/properties/frameType}",wrappingType:"{/properties/wrappingType}",url:{parts:["/properties/targetURL"],formatter:c.formatters&&c.formatters.leanURL},tileContent:new T({size:"Auto",footer:"{/properties/info}",footerColor:{path:"/properties/infoState",formatter:function(f){if(f==="Positive"){f=V.Good;}if(f==="Negative"){f=V.Error;}if(!V[f]){f=V.Neutral;}return f;}},unit:"{/properties/number_unit}",content:new N({truncateValueTo:5,scale:"{/properties/number_factor}",value:"{/properties/number_value}",indicator:"{/properties/number_state_arrow}",valueColor:{path:"/properties/number_value_state",formatter:function(s){if(!s||s==="Neutral"||!V[s]){return V.None;}return s;}},icon:"{/properties/icon}",withMargin:false,width:"100%"})}),additionalTooltip:"{/properties/contentProviderLabel}",press:[c.onPress,c]});}});});
sap.ui.predefine('sap/ushell/components/tiles/generic',["sap/ui/core/mvc/Controller","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/library","sap/ui/core/format/DateFormat","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,o,s,a,m,D,M,J,q,L){"use strict";var b=m.DeviationIndicator;var V=m.ValueColor;var F=m.FrameType;var c=m.LoadState;
var g=C.extend("sap.ushell.components.tiles.generic",{
getTile:function(){return this.oKpiTileView.oGenericTile;},
_updateTileModel:function(n){var d=this.getTile().getModel().getData();q.extend(d,n);this.getTile().getModel().setData(d);},
logError:function(e){this._updateTileModel({value:"",scale:"",unit:""});L.error(e);if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}else{this.oKpiTileView.oGenericTile.setState(c.Failed);}},
getKeyForCallCheck:function(){if(this.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){return this.oConfig.TILE_PROPERTIES.id+"left";}return this.oConfig.TILE_PROPERTIES.id+"right";},
getRelativeTime:function(){var d=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate(),t;if(q.type(this.cacheTime)=="date"){t=this.cacheTime;}else{t=new Date(parseInt(this.cacheTime.substr(6),10));}var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(d-t),e,f;switch(r.unit){case"minutes":f=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");d=d-f;e=new Date(d);break;case"hours":f=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");d=d-f;e=new Date(d);break;case"days":f=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");d=d-f;e=new Date(d);break;}return e;},
setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var f=D.getDateTimeInstance({relative:true,relativeSource:"auto",style:"short"});var t=f.format(this.getRelativeTime());this.oKpiTileView.oNVConfS.setRefreshOption(true);this.oKpiTileView.oNVConfS.setTimestamp(t);this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},
isACurrencyMeasure:function(d){var e=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;return sap.ushell.components.tiles.indicatorTileUtils.util.getFormattingMetadata(this.oRunTimeODataModel,e,d)._hasCurrency;},
isCurrencyMeasure:function(d){var t=this;var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(e&&e.Data){var k=e.Data&&JSON.parse(e.Data);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){k=k.leftData;}else{k=k.rightData;}}if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile"||t.oConfig.TILE_PROPERTIES.tileType==="CM"){if(k&&k.data&&k.data.length){for(var i=0;i<k.data.length;i++){if(k.data[i]&&k.data[i].measure==d){if(q.type(k.data[i].isCurM)=="boolean"){return k.data[i].isCurM;}return t.isACurrencyMeasure(d);}return t.isACurrencyMeasure(d);}}else{return t.isACurrencyMeasure(d);}}if(k&&q.type(k.isCurM)=="boolean"){return k.isCurM;}return t.isACurrencyMeasure(d);}return t.isACurrencyMeasure(d);},
formSelectStatement:function(d){var t=Object.keys(d);var f="";for(var i=0;i<t.length;i++){if((d[t[i]]!==undefined)&&(d.fullyFormedMeasure)){f=f+","+d[t[i]];}}return f;},
setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var d=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);T.criticalHighValue=Number(d.Data.ch);T.warningHighValue=Number(d.Data.wh);d.Data=JSON.stringify(d.Data);}break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.criticalLowValue=Number(d.Data.cl);T.warningLowValue=Number(d.Data.wl);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);d.Data=JSON.stringify(d.Data);}break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);if(d&&d.Data&&d.Data.length){d.Data=JSON.parse(d.Data);T.criticalLowValue=Number(d.Data.cl);T.warningLowValue=Number(d.Data.wl);T.trendValue=Number(d.Data.trend);T.targetValue=Number(d.Data.target);T.criticalHighValue=Number(d.Data.ch);T.warningHighValue=Number(d.Data.wh);d.Data=JSON.stringify(d.Data);}break;}}else if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},
setNoData:function(){var v=this.getView().getViewData();if(v.parentController){v.parentController.setNoData();if(v.deferredObj){v.deferredObj.resolve();}}else{try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(c.Loaded);}catch(e){}}},
getLocalCache:function(d){var l={};l.ChipId=d.ChipId;l.Data=d.Data;l.CacheMaxAge=d.CacheMaxAgeUnit;l.CacheMaxAgeUnit=d.CacheMaxAgeUnit;l.CacheType=d.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},
fetchKpiValue:function(d,E,r,A){var t=this;var k=0;try{var f=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var h=T.fullyFormedMeasure;var i=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);var j=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var l=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,j,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var p=this.getKeyForCallCheck();var u=true;if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){u=sap.ushell.components.tiles.indicatorTileUtils.util.isCallInProgress(p);if(u==undefined){u=true;}}if(u){if((!i||(!l&&t.oTileApi.visible.isVisible())||n||(A&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh)){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(p,false);if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,f,h,null,v);if(Q){this.QUERY_SERVICE_MODEL=Q.model;this.queryUriForKpiValue=Q.uri;this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(x){t.backEndCallMade=true;t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(p,true);if(x&&x.results&&x.results.length&&x.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]!=null){k=x.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var y={};if(Q.unit[0]){t._updateTileModel({unit:x.results[0][Q.unit[0].name]});y.uom=x.results[0][Q.unit[0].name];}if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){y.numericValue=k;}else{y.value=k;}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=x.results[0][T.sCriticalHigh];T.criticalLowValue=x.results[0][T.sCriticalLow];T.warningHighValue=x.results[0][T.sWarningHigh];T.warningLowValue=x.results[0][T.sWarningLow];T.targetValue=x.results[0][T.sTarget];T.trendValue=x.results[0][T.sTrend];}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(x.results[0][T.sTarget]);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(x.results[0][T.sTrend]);}y.cl=T.criticalLowValue;y.ch=T.criticalHighValue;y.wl=T.warningLowValue;y.wh=T.warningHighValue;y.trend=T.trendValue;y.target=T.targetValue;y.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var z={};z.ChipId=t.oConfig.TILE_PROPERTIES.id;z.Data=JSON.stringify(y);z.CacheMaxAge=Number(t.chipCacheTime);z.CacheMaxAgeUnit=t.chipCacheTimeUnit;z.CacheType=1;var B=t.getLocalCache(z);if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);var U=false;if(i){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,z,U,function(x){if(x){t.cacheTime=x&&x.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,x);t.setTimeStamp(t.cacheTime);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var G=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),H;if(G){if(!G.CachedTime){G.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}H=G.Data;if(H){H=JSON.parse(H);if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){H.leftData=y;}else{H.rightData=y;}}G.Data=JSON.stringify(H);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,G);}else{H={};if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){H.leftData=y;}else{H.rightData=y;}B.Data=JSON.stringify(H);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);}t.cacheWriteData=y;}t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();t.updateDatajobScheduled=false;var I=t.oConfig.TILE_PROPERTIES.id+"data";var K=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(I);if(K){clearTimeout(K);K=undefined;}d.call(t,k,T);}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(x){t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(p,true);if(x&&x.response){L.error(x.message+" : "+x.request.requestUri);E.call(t,x);}});}else{t.kpiValueFetchDeferred=true;sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(p,true);t.logError("Error Preparing Query Service URI");}}}else if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==F.OneByOne){var w;if(i&&i.Data){w=i.Data&&JSON.parse(i.Data);k=w.value;if(w.uom){t._updateTileModel({unit:w.uom});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=w.ch;T.criticalLowValue=w.cl;T.warningHighValue=w.wh;T.warningLowValue=w.wl;T.targetValue=w.target;T.trendValue=w.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(w.target);T.criticalHighValue=T.targetValue*T.ch/100;T.criticalLowValue=T.targetValue*T.cl/100;T.warningHighValue=T.targetValue*T.wh/100;T.warningLowValue=T.targetValue*T.wl/100;T.trendValue=Number(w.trend);}t.cacheTime=i.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(i.CachedTime),t);}d.call(t,k,T);}else{t.setNoData();}}else if(i&&i.Data){w=i.Data&&JSON.parse(i.Data);if(t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"){w=w.leftData;}else{w=w.rightData;}k=w.numericValue;if(w.unit){t._updateTileModel({unit:w.unit});}if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=w.ch;T.criticalLowValue=w.cl;T.warningHighValue=w.wh;T.warningLowValue=w.wl;T.targetValue=w.target;T.trendValue=w.trend;}else if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="RELATIVE"){T.targetValue=Number(w.target);T.criticalHighValue=T.targetValue*T.criticalHighValue/100;T.criticalLowValue=T.targetValue*T.criticalLowValue/100;T.warningHighValue=T.targetValue*T.warningHighValue/100;T.warningLowValue=T.targetValue*T.warningLowValue/100;T.trendValue=Number(w.trend);}t.cacheTime=i.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(i.CachedTime),t);}d.call(t,k,T);}else{t.setNoData();}}}catch(e){t.logError(e);}},
getRunTimeODataModel:function(u,S){if(window["sap-ushell-config"].cacheBusting){u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);}if(!this.oRunTimeODataModel){this.oRunTimeODataModel=sap.ushell.components.tiles.indicatorTileUtils.util.getODataModelByServiceUri(u);}if(this.oRunTimeODataModel.getServiceMetadata()){S();}else{this.oRunTimeODataModel.attachMetadataLoaded(S);}},
parse_sapclient:function(){var i,S,r,f,d;S="P_SAPClient";r="$$$";f=this.oConfig.EVALUATION_FILTERS;if(f.constructor!==Array){return;}if(f.length<1){return;}for(i in f){d=f[i];if(d.NAME===S&&d.VALUE_1===r){break;}d=null;}if(d){q.when(sap.ushell.components.tiles.indicatorTileUtils.util.getHanaClient()).done(function(e){d.VALUE_1=e;});}},
fetchEvaluation:function(d,f,r,i){var t=this;var p=this.oConfig.TILE_PROPERTIES.sb_metadata||"HANA";t.DEFINITION_DATA=d;t._updateTileModel(this.DEFINITION_DATA);var h=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((t.oTileApi.visible.isVisible()&&!t.firstTimeVisible)||h||i){q.when(sap.ushell.components.tiles.indicatorTileUtils.util.getFrontendCache(d,t.oTileApi)).done(function(j){t.firstTimeVisible=true;j=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(j||Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){f.call();}else{try{if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)||!t.dataCallInProgress){t.dataCallInProgress=true;var k=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(k){t.oConfig.EVALUATION_FILTERS=k.EVALUATION_FILTERS;f.call();}else if(t.evaluationFetchDeferred){t.evaluationFetchDeferred=false;sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(l){t.evaluationFetchDeferred=true;t.oConfig.EVALUATION_FILTERS=l;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);f.call();});}}}catch(e){t.evaluationFetchDeferred=true;t.logError("no evaluation data");}}}).fail(function(){t.firstTimeVisible=true;if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){f.call();}else{try{var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(t.oConfig.TILE_PROPERTIES.id);if(j){t.oConfig.EVALUATION_FILTERS=j.EVALUATION_FILTERS;f.call();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(t.oConfig,t.oTileApi,function(k){t.oConfig.EVALUATION_FILTERS=k;if(p.toUpperCase()==="HANA"){t.parse_sapclient();}sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);f.call();});}}catch(e){t.logError("no evaluation data");}}});}},
refreshHandler:function(r,A){var t=this;var i=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var d=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(A);if(!t.firstTimeVisible||i||d){t.fetchEvaluation(t.oConfig,function(){var u;if(t.oConfig.TILE_PROPERTIES.tileType=="NT"||t.oConfig.TILE_PROPERTIES.tileType=="AT"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatornumeric.NumericTile"||t.oKpiTileView.getViewName()=="sap.ushell.components.tiles.indicatordeviation.DeviationTile"){u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError,r,d);}else{t.doProcess();}});}else{u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.doProcess(t.KPIVALUE,t.setThresholdValues());}else{t.doProcess(i,d);}});}},r,d);}},
visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},
getChipConfiguration:function(d){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(f){t.oConfig=f;var h=sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig);var i=sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig);if(t.oTileApi.search){t.oTileApi.search.setKeywords([h,i]);}if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}d.call();});}catch(e){t.logError(e.message);}},
onAfterTileRendering:function(){var t=this;this.firstTimeVisible=false;this.oKpiTileView=this.getView();this.updateDatajobScheduled=false;this.updateTimeStampjobScheduled=false;this.oViewData=this.oKpiTileView.getViewData();this.tilePressed=false;this.kpiValueFetchDeferred=true;this.evaluationFetchDeferred=true;this.backEndCallMade=false;if(!sap.ushell.components.tiles.utils){sap.ui.require("sap.ushell.components.tiles.utils");}this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.oTileApi=this.oViewData.chip;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(c.Loading);this.getChipConfiguration(function(){var n;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);if(t.oTileApi.preview.isEnabled()){t.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){M.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else if(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile){t.doDummyProcess();n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});}else{if(t.oTileApi.visible&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oTileApi.visible.attachVisible(t.visibleHandler.bind(t));}n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"></a>").style="display:block;";t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){t.oKpiTileView.oNVConfS.attachRefresh(function(){t.oKpiTileView.oGenericTile.setState(c.Loading);q.proxy(t.refreshHandler(true),t);});}t.fetchEvaluation(t.oConfig,function(){t.DEFINITION_DATA=t.oConfig;var u=t.oTileApi.url.addSystemToServiceUrl(t.oConfig.EVALUATION.ODATA_URL);var d=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var i=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,d,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if(!i||t.getView().getViewData().refresh){t.getRunTimeODataModel(u,function(){if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}else if(t.KPI_VALUE_REQUIRED){t.fetchKpiValue(function(k,T){this.KPIVALUE=k;t.doProcess(k,T);},t.logError);}else{t.doProcess();}});}});},
onAfterRendering:function(){this.onAfterTileRendering();},
_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},
autoFormatter:function(n,i){i=i||false;if(!n){return"";}return sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,i);},
setToolTip:function(d,e,t){var f=this,h,T=this.setThresholdValues(),i=this.oConfig.EVALUATION.COLUMN_NAME,j=this.isCurrencyMeasure(i),v;if(t=="CONT"||t=="COMP"){if(this.oKpiTileView.getContent()[0].getTileContent().length){h=f.oKpiTileView.getContent()[0].getTileContent()[0].getContent();var k,l,n,p,r,u,w,x,y;if(e&&e[0]){k=e[0].title;p=this.autoFormatter(e[0].value,j);w=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[0].color);}if(e&&e[1]){l=e[1].title;r=this.autoFormatter(e[1].value,j);x=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[1].color);}if(e&&e[2]){n=e[2].title;u=this.autoFormatter(e[2].value,j);y=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(e[2].color);}var z={};z["0"]=this.oConfig.EVALUATION.COLUMN_NAME+",asc";z["1"]=this.oConfig.EVALUATION.COLUMN_NAME+",desc";z["2"]=this.oConfig.TILE_PROPERTIES.dimension+",asc";z["3"]=this.oConfig.TILE_PROPERTIES.dimension+",desc";var A=z[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");v={measure:this.oConfig.EVALUATION.COLUMN_NAME,contributionTile:A,m1:k,v1:p,c1:w,m2:l,v2:r,c2:x,m3:n,v3:u,c3:y};sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(h,t,v);}}else{var B="";if(d=="Error"){B="sb.error";}if(d=="Neutral"){B="sb.neutral";}if(d=="Critical"){B="sb.critical";}if(d=="Good"){B="sb.good";}v={status:B,actual:this.autoFormatter(e,j),target:this.autoFormatter(T.targetValue,j),cH:this.autoFormatter(T.criticalHighValue,j),wH:this.autoFormatter(T.warningHighValue,j),wL:this.autoFormatter(T.warningLowValue,j),cL:this.autoFormatter(T.criticalLowValue,j)};h=f.oKpiTileView.getContent()[0].getTileContent()[0]&&f.oKpiTileView.getContent()[0].getTileContent()[0].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(h,t,v);}},
getTrendColor:function(t){var d=this,w,f,h,i;try{var j=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(j==="MI"){if(t.criticalHighValue&&t.warningHighValue){i=Number(t.criticalHighValue);h=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<h){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=i){r=V.Critical;}else{r=V.Error;}}}else if(j==="MA"){if(t.criticalLowValue&&t.warningLowValue){f=Number(t.criticalLowValue);w=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<f){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){i=Number(t.criticalHighValue);h=Number(t.warningHighValue);w=Number(t.warningLowValue);f=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<f||this.CALCULATED_KPI_VALUE>i){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=f&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=h&&this.CALCULATED_KPI_VALUE<=i)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){d.logError(e);}},
getTrendIndicator:function(t){var d=this;t=Number(t);try{var f=b.None;if(t>this.CALCULATED_KPI_VALUE){f=b.Down;}else if(t<this.CALCULATED_KPI_VALUE){f=b.Up;}return f;}catch(e){d.logError(e);}},
setTextInTile:function(){var t=this;var d=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:d.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:d.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},
_getEvaluationThresholdMeasures:function(){var t=[];t.push(this.oConfig.EVALUATION.COLUMN_NAME);if(this.oConfig.EVALUATION.VALUES_SOURCE==="MEASURE"){var d=this.oConfig.EVALUATION_VALUES;if(d&&d.length){for(var i=0;i<d.length;i++){if((d[i]).COLUMN_NAME&&!((d[i]).FIXED)){t.push((d[i]).COLUMN_NAME);}}}}return t;},
onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}
});
return g;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.controller',["sap/ushell/components/tiles/generic","sap/m/library","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/ui/thirdparty/jquery"],function(g,m,A,d,q){"use strict";var F=m.FrameType;var L=m.LoadState;
var f=g.extend("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
doProcess:function(r,i){this.onAfterFinalEvaluation(r,i);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({footer:"",description:"",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oKpiTileView.oGenericTile.setState(L.Loaded);},
scheduleJob:function(a){if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},
onAfterFinalEvaluation:function(r,h){var t=this;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var M=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var j=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(j==undefined){this.logError();return;}var k=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var l=this.DEFINITION_DATA.EVALUATION_VALUES;var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(n){var o=n.Data&&JSON.parse(n.Data);}}var p=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var s=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,p,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);var u=M;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(k){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){u+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){u+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){u+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}}var w=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);if((o&&!o.rightData)||!n||(!s&&t.oTileApi.visible.isVisible())||w||(h&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,E,u,j,v);if(Q){this.queryUriForTrendChart=Q.uri;var x={};try{this.trendChartODataReadRef=Q.model.read(Q.uri,null,null,true,function(a){t.kpiValueFetchDeferred=true;if(a&&a.results&&a.results.length){if(Q.unit[0]){t.unit=a.results[0][Q.unit[0].name];t.CURRENCY_CODE=t.unit;x.unit=Q.unit[0];x.unit.name=Q.unit[0].name;}t.queryUriResponseForTrendChart=a;j=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,E,j);a.results.splice(10);a.firstXlabel=a.results[0][j];a.lastXlabel=a.results[a.results.length-1][j];x.data=a;if(x&&x.data&&x.data.results&&x.data.results.length){for(var i=0;i<x.data.results.length;i++){delete x.data.results[i].__metadata;}}x.isCurM=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);x.dimensionName=j;_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);var c={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();c.ChipId=t.oConfig.TILE_PROPERTIES.id;c.Data=JSON.stringify(x);c.CacheMaxAge=Number(t.chipCacheTime);c.CacheMaxAgeUnit=t.chipCacheTimeUnit;c.CacheType=1;var b=t.getLocalCache(c);if(t.DEFINITION_DATA.TILE_PROPERTIES.frameType==F.TwoByOne){var B=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),C;if(B){if(!B.CachedTime){B.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}C=B.Data;if(C){C=JSON.parse(C);C.rightData=x;}B.Data=JSON.stringify(C);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);}else{C={};C.rightData=x;b.Data=JSON.stringify(C);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);}t.cacheWriteData=x;t.getView().getViewData().deferredObj.resolve();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,b);var U=false;if(n){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,c,U,function(a){if(a){t.cacheTime=a&&a.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,a);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}t.oKpiTileView.oGenericTile.setState(L.Loaded);t.updateDatajobScheduled=false;var D=t.oConfig.TILE_PROPERTIES.id+"data";var G=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(D);if(G){clearTimeout(G);G=undefined;}q.proxy(t.scheduleJob(t.cacheTime),t);}}else{t.setNoData();}},function(a){t.kpiValueFetchDeferred=true;if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.kpiValueFetchDeferred=true;t.logError(e);}}else{t.kpiValueFetchDeferred=true;t.logError();}}}else if(n&&n.Data){try{var y;var z=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(z.indexOf("DT-")==-1){y=n.Data&&JSON.parse(n.Data);}else{y=n.Data&&JSON.parse(n.Data);y=y.rightData;}if(y.unit){t.unit=y.data.results[0][y.unit.name];t.CURRENCY_CODE=t.unit;}t.cacheTime=n.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}t.queryUriResponseForTrendChart=y.data;j=y.dimensionName;_(y.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);if(t.oConfig.TILE_PROPERTIES.frameType==F.OneByOne){t.oKpiTileView.oGenericTile.setState(L.Loaded);}else{t.getView().getViewData().deferredObj.resolve();}q.proxy(t.scheduleJob(t.cacheTime),t);}catch(e){t.logError(e);}}else{t.setNoData();}function _(B,C){var D=[];var G=[];var H=[];var I=[];var J=[];var K=[];var N=B.firstXlabel;var O,P,R,S,T;var U=B.lastXlabel;var V=Number(B.results[0][M]);var W=Number(B.results[B.results.length-1][M]);var i;for(i in B.results){B.results[i][j]=Number(i);B.results[i][M]=Number(B.results[i][M]);if(t.sWarningHigh){B.results[i][t.sWarningHigh]=Number(B.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){B.results[i][t.sCriticalHigh]=Number(B.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){B.results[i][t.sCriticalLow]=Number(B.results[i][t.sCriticalLow]);}if(t.sWarningLow){B.results[i][t.sWarningLow]=Number(B.results[i][t.sWarningLow]);}if(t.sTarget){B.results[i][t.sTarget]=Number(B.results[i][t.sTarget]);}if(t.sWarningHigh){H.push(B.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){I.push(B.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){J.push(B.results[i][t.sCriticalLow]);}if(t.sWarningLow){K.push(B.results[i][t.sWarningLow]);}D.push(B.results[i][j]);G.push(B.results[i][M]);}try{N=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(N);U=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(U);}catch(e){t.logError(e);}var X=Number(V);if(t.oConfig.EVALUATION.SCALING==-2){X*=100;}var Y=Math.min.apply(Math,G);var c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var Z=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(X,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){Z+=" %";}var $=Z.toString();var a1=Number(W);if(t.oConfig.EVALUATION.SCALING==-2){a1*=100;}var b1=Math.max.apply(Math,G);c=t.isCurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var c1=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(a1,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION,c,t.CURRENCY_CODE);if(t.oConfig.EVALUATION.SCALING==-2){c1+=" %";}var d1=c1.toString();try{var e1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,D));var f1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,D));}catch(e){t.logError(e);}if(C=="MEASURE"){if(H.length!=0){t.firstwH=H[e1];t.lastwH=H[f1];}if(I.length!=0){t.firstcH=I[e1];t.lastcH=I[f1];}if(J.length!=0){t.firstcL=J[e1];t.lastcL=J[f1];}if(K.length!=0){t.firstwL=K[e1];t.lastwL=K[f1];}}var g1={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:B.results},size:"Auto",minXValue:e1,maxXValue:f1,minYValue:Y,maxYValue:b1,firstXLabel:{label:N+"",color:"Neutral"},lastXLabel:{label:U+"",color:"Neutral"},firstYLabel:{label:$+"",color:"Neutral"},lastYLabel:{label:d1+"",color:"Neutral"},minLabel:{},maxLabel:{}};var h1;switch(k){case"MA":for(i in l){if(l[i].TYPE=="CL"){g1.minThreshold={color:"Error"};h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.cl=Number(l[i].FIXED);g1.minThreshold.data=(C=="MEASURE")?B.results:[h1];O=(C=="MEASURE")?t.sCriticalLow:M;}else if(l[i].TYPE=="WL"){g1.maxThreshold={color:"Good"};h1={};h1[j]="";h1[M]=Number(l[i].FIXED);g1.maxThreshold.data=(C=="MEASURE")?B.results:[h1];P=(C=="MEASURE")?t.sWarningLow:M;t.wl=Number(l[i].FIXED);}else if(l[i].TYPE=="TA"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);g1.target={color:"Neutral"};g1.target.data=(C=="MEASURE")?B.results:[h1];T=(C=="MEASURE")?t.sTarget:M;}}g1.innerMinThreshold={data:[]};g1.innerMaxThreshold={data:[]};if(C=="FIXED"){g1.firstYLabel.color=V<t.cl?"Error":((t.cl<=V)&&(V<=t.wl))?"Critical":(V>t.wl)?"Good":"Neutral";g1.lastYLabel.color=W<t.cl?"Error":((t.cl<=W)&&(W<=t.wl))?"Critical":(W>t.wl)?"Good":"Neutral";}else if(C=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){g1.firstYLabel.color=V<t.firstcL?"Error":((t.firstcL<=V)&&(V<=t.firstwL))?"Critical":(V>t.firstwL)?"Good":"Neutral";g1.lastYLabel.color=W<t.lastcL?"Error":((t.lastcL<=W)&&(W<=t.lastwL))?"Critical":(W>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in l){if(l[i].TYPE=="CH"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.ch=Number(l[i].FIXED);g1.maxThreshold={color:"Error"};g1.maxThreshold.data=(C=="MEASURE")?B.results:[h1];P=(C=="MEASURE")?t.sCriticalHigh:M;}else if(l[i].TYPE=="WH"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.wh=Number(l[i].FIXED);g1.minThreshold={color:"Good"};g1.minThreshold.data=(C=="MEASURE")?B.results:[h1];O=(C=="MEASURE")?t.sWarningHigh:M;}else if(l[i].TYPE=="TA"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);g1.target={color:"Neutral"};g1.target.data=(C=="MEASURE")?B.results:[h1];T=(C=="MEASURE")?t.sTarget:M;}}if(C=="FIXED"){g1.firstYLabel.color=V>t.ch?"Error":((t.wh<=V)&&(V<=t.ch))?"Critical":(V<t.wh)?"Good":"Neutral";g1.lastYLabel.color=W>t.ch?"Error":((t.wh<=W)&&(W<=t.ch))?"Critical":(W<t.wh)?"Good":"Neutral";}else if(C=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){g1.firstYLabel.color=V>t.firstcH?"Error":((t.firstwH<=V)&&(V<=t.firstcH))?"Critical":(V<t.firstwH)?"Good":"Neutral";g1.lastYLabel.color=W>t.lastcH?"Error":((t.lastwH<=W)&&(W<=t.lastcH))?"Critical":(W<t.lastwH)?"Good":"Neutral";}g1.innerMaxThreshold={data:[]};g1.innerMinThreshold={data:[]};break;case"RA":for(i in l){if(l[i].TYPE=="CH"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.ch=Number(l[i].FIXED);g1.maxThreshold={color:"Error"};g1.maxThreshold.data=(C=="MEASURE")?B.results:[h1];P=(C=="MEASURE")?t.sCriticalHigh:M;}else if(l[i].TYPE=="WH"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.wh=Number(l[i].FIXED);g1.innerMaxThreshold={color:"Good"};g1.innerMaxThreshold.data=(C=="MEASURE")?B.results:[h1];S=(C=="MEASURE")?t.sWarningHigh:M;}else if(l[i].TYPE=="WL"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.wl=Number(l[i].FIXED);g1.innerMinThreshold={color:"Good"};g1.innerMinThreshold.data=(C=="MEASURE")?B.results:[h1];R=(C=="MEASURE")?t.sWarningLow:M;}else if(l[i].TYPE=="CL"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);t.cl=Number(l[i].FIXED);g1.minThreshold={color:"Error"};g1.minThreshold.data=(C=="MEASURE")?B.results:[h1];O=(C=="MEASURE")?t.sCriticalLow:M;}else if(l[i].TYPE=="TA"){h1={};h1[j]="";h1[M]=Number(l[i].FIXED);g1.target={color:"Neutral"};g1.target.data=(C=="MEASURE")?B.results:[h1];T=(C=="MEASURE")?t.sTarget:M;}}if(C=="FIXED"){g1.firstYLabel.color=(V>t.ch||V<t.cl)?"Error":((t.wh<=V)&&(V<=t.ch))||((t.cl<=V)&&(V<=t.wl))?"Critical":((V>=t.wl)&&(V<=t.wh))?"Good":"Neutral";g1.lastYLabel.color=(W>t.ch||W<t.cl)?"Error":((t.wh<=W)&&(W<=t.ch))||((t.cl<=W)&&(W<=t.wl))?"Critical":((W>=t.wl)&&(W<=t.wh))?"Good":"Neutral";}else if(C=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){g1.firstYLabel.color=(V>t.firstcH||V<t.firstcL)?"Error":((t.firstwH<=V)&&(V<=t.firstcH))||((t.firstcL<=V)&&(V<=t.firstwL))?"Critical":((V>=t.firstwL)&&(V<=t.firstwH))?"Good":"Neutral";g1.lastYLabel.color=(W>t.lastcH||W<t.lastcL)?"Error":((t.lastwH<=W)&&(W<=t.lastcH))||((t.lastcL<=W)&&(W<=t.lastwL))?"Critical":((W>=t.lastwL)&&(W<=t.lastwH))?"Good":"Neutral";}break;}var i1=function(k1,a,b,C){return new A({color:"{/"+k1+"/color}",points:{path:"/"+k1+"/data",template:new d({x:"{"+a+"}",y:"{"+b+"}"})}});};var j1=t.getView().oNVConfContS;j1.setTarget(i1("target",j,T));j1.setInnerMinThreshold(i1("innerMinThreshold",j,R));j1.setInnerMaxThreshold(i1("innerMaxThreshold",j,S));j1.setMinThreshold(i1("minThreshold",j,O));j1.setMaxThreshold(i1("maxThreshold",j,P));j1.setChart(i1("chart",j,M));t.setTextInTile();if(t.getView().getViewData().parentController){t.getView().getViewData().parentController._updateTileModel(g1);}else{t._updateTileModel(g1);}}}
});
return f;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorArea/AreaChartTile.view',["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/m/library","sap/suite/ui/microchart/AreaMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,o,s,A,a,b,M,c,G,d){"use strict";var L=M.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorArea.AreaChartTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorArea.AreaChartTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var e="Lorem ipsum";var S=M.Size;var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;e=t.subTitle;}var f=function(n){return new A({color:"Good",points:{path:"/"+n+"/data",template:new a({x:"{day}",y:"{balance}"})}});};var g=function(n){return new b({label:"{/"+n+"/label}",color:"{/"+n+"/color}"});};var i={subheader:e,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:8888,size:"Auto",frameType:"OneByOne",state:L.Loading};this.oNVConfContS=new c({width:"{/width}",height:"{/height}",size:S.Responsive,target:f("target"),innerMinThreshold:f("innerMinThreshold"),innerMaxThreshold:f("innerMaxThreshold"),minThreshold:f("minThreshold"),maxThreshold:f("maxThreshold"),chart:f("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:g("firstXLabel"),lastXLabel:g("lastXLabel"),firstYLabel:g("firstYLabel"),lastYLabel:g("lastYLabel"),minLabel:g("minLabel"),maxLabel:g("maxLabel")});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var j=new d();j.setData(i);this.oGenericTile.setModel(j);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.controller',["sap/m/MessageToast","sap/m/library","sap/ui/core/library","sap/ui/core/format/DateFormat","sap/ui/thirdparty/jquery"],function(M,m,c,D,q){"use strict";var a=m.DeviationIndicator;var V=m.ValueColor;var F=m.FrameType;var S=m.Size;var L=m.LoadState;var b=c.mvc.ViewType;sap.ui.controller("sap.ushell.components.tiles.indicatorDual.DualTile",{getRelativeTime:function(){var d=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();this.cacheTime=(q.type(this.cacheTime)=="date")?this.cacheTime:new Date(parseInt(this.cacheTime.substr(6),10));var r=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(d-this.cacheTime),e,o;switch(r.unit){case"minutes":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"minutes");d=d-o;e=new Date(d);break;case"hours":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"hours");d=d-o;e=new Date(d);break;case"days":o=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(r.time,"days");d=d-o;e=new Date(d);break;}return e;},getTile:function(){return this.oKpiTileView.oGenericTile;},setTimeStamp:function(){this.updateTimeStampjobScheduled=false;var f=D.getDateTimeInstance({relative:true,relativeSource:"auto"});var t=f.format(this.getRelativeTime());var l=this.getView().oGenericTile.getTileContent()[0];if(l){if(l.setRefreshOption){l.setRefreshOption(true);}if(l.setTimestamp){l.setTimestamp(t);}}this.updateTimeStampjobScheduled=false;var k=this.oConfig.TILE_PROPERTIES.id+"time";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}sap.ushell.components.tiles.indicatorTileUtils.util.scheduleTimeStampJob.call(this,this.oTileApi.visible.isVisible());},getLocalCache:function(d){var l={};l.ChipId=d.ChipId;l.Data=d.Data;l.CacheMaxAge=d.CacheMaxAgeUnit;l.CacheMaxAgeUnit=d.CacheMaxAgeUnit;l.CacheType=d.CacheType;l.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();return l;},refreshPress:function(){this.initProcess(true);},_getView:function(v,d,r){var e=this.oKpiTileView.getViewData();var f=sap.ui.view({type:b.JS,viewName:v,viewData:q.extend(true,{},e,{parentController:this},{deferredObj:d},{refresh:r})});return f;},logError:function(){this._updateTileModel({value:"",scale:"",unit:""});if(this.getView().getViewData().deferredObj){this.getView().getViewData().deferredObj.reject();}},doProcess:function(r){sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedLeft",this.deferred_left);sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(this.oKpiTileView.oConfig.TILE_PROPERTIES.id+"defferedRight",this.deferred_right);var t=this;this.getView().oGenericTile.removeAllTileContent();var s=this.getView().oGenericTile;this.system=this.oTileApi.url.getApplicationSystem();this.oKpiTileView.oGenericTile.setState(L.Loading);var d=t.tileType.split("-")[1];try{var v;v="sap.ushell.components.tiles.indicatornumeric.NumericTile";this.leftView=t._getView(v,this.deferred_left,r);this.leftView.getController().dataCallInProgress=false;s.addTileContent(this.leftView.oGenericTile.getTileContent()[0]);switch(d){case"CM":v="sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"CT":v="sap.ushell.components.tiles.indicatorcontribution.ContributionTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"AT":v="sap.ushell.components.tiles.indicatordeviation.DeviationTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;case"TT":v="sap.ushell.components.tiles.indicatorArea.AreaChartTile";this.rightView=t._getView(v,this.deferred_right,r);this.rightView.getController().dataCallInProgress=false;s.addTileContent(this.rightView.oGenericTile.getTileContent()[0]);break;}this.leftView.getController().onAfterTileRendering();this.rightView.getController().onAfterTileRendering();var l=this.getView().oGenericTile.getTileContent()[0];if(l&&l.attachRefresh){l.attachRefresh(this.refreshPress.bind(t));}}catch(e){this.logError(e);}},_updateTileModel:function(n){var d=this.getTile().getModel().getData();q.extend(d,n);this.getTile().getModel().setData(d);},setTextInTile:function(){var t=this;var d=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:d.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:d.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},doDummyProcess:function(){var t=this;try{t.setTextInTile();switch(t.tileType){case"DT-CM":t._updateTileModel({value:1,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Good,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});break;case"DT-AT":t._updateTileModel({valueColor:"Good",value:100,frameType:F.TwoByOne,unit:"USD",actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});break;case"DT-CT":t._updateTileModel({value:8888,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Error,indicator:a.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});break;case"DT-TT":this._updateTileModel({value:8888,size:S.Auto,frameType:F.TwoByOne,state:L.Loading,valueColor:V.Error,indicator:a.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});break;}}catch(e){}},visibleHandler:function(i){if(!i){if(this.leftView){this.leftView.getController().firstTimeVisible=false;}if(this.rightView){this.rightView.getController().firstTimeVisible=false;}sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){if(this.leftView){this.leftView.getController().refreshHandler();}if(this.rightView){this.rightView.getController().refreshHandler();}}},initProcess:function(r){var t=this;this.oKpiTileView=this.getView();this.oResourceBundle=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();this.viewData={};t.viewData=this.oKpiTileView.getViewData();this.oTileApi=this.viewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.deferred_left=new q.Deferred();this.deferred_right=new q.Deferred();q.when(this.deferred_left,this.deferred_right).done(function(){t.setTextInTile();t.oConfig=t.oKpiTileView.oConfig;t.chipCacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(t.oConfig);t.chipCacheTimeUnit=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(t.oConfig);var l=t.leftView.getController().cacheWriteData;var d=t.rightView.getController().cacheWriteData;t.oKpiTileView.oGenericTile.setState(L.Loaded);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oKpiTileView.oConfig,t.system);t.oKpiTileView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");t.oKpiTileView.oGenericTile.attachPress(function(){t.tilePressed=true;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oKpiTileView.oConfig.TILE_PROPERTIES.id,null);window.location.hash=n;});var e={};var w={};w.leftData=l;w.rightData=d;e.ChipId=t.oConfig.TILE_PROPERTIES.id;e.Data=JSON.stringify(w);e.CacheMaxAge=Number(t.chipCacheTime);e.CacheMaxAgeUnit=t.chipCacheTimeUnit;e.CacheType=1;var f=t.getLocalCache(e);if(w.leftData&&w.rightData){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,f);}var g=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(t.chipCacheTime&&w.leftData&&w.rightData){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,e,false,function(h){if(h){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,h);t.cacheTime=h.CachedTime;t.setTimeStamp.call(t);}});}if(t.chipCacheTime){if(!t.cacheTime){t.cacheTime=g.CachedTime;}t.setTimeStamp.call(t);sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(t,t.oTileApi.visible.isVisible());}}).fail(function(){t.oKpiTileView.oGenericTile.setState(L.Failed);});t.tileType=t.oKpiTileView.oConfig.TILE_PROPERTIES.tileType;this.oTileApi=t.viewData.chip;if(this.oTileApi.preview.isEnabled()){this.doDummyProcess();t.oKpiTileView.oGenericTile.attachPress(function(){M.show(t.oResourceBundle.getText("sb.NavigationHelp"));});}else{this.doProcess(r);}},onAfterRendering:function(){this.initProcess();},setNoData:function(){try{this._updateTileModel({value:"",scale:"",unit:"",footerNum:this.oResourceBundle.getText("sb.noDataAvailable"),footerComp:this.oResourceBundle.getText("sb.noDataAvailable")});this.oKpiTileView.oGenericTile.setState(L.Loaded);}catch(e){}},getChipConfiguration:function(d){var t=this;try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(f){t.oConfig=f;d.call();});}catch(e){t.logError(e.message);}}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDual/DualTile.view',["sap/ui/core/mvc/JSView","sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/ushell/components/tiles/sbtilecontent","sap/m/NumericContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/library","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,d,s,a,N,C,b,A,c,e,f,B,g,m,G,h){"use strict";var S=m.Size;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorDual.DualTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorDual.DualTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.getViewData().chip.configuration.getParameterValueAsString("tileConfiguration"),t.getViewData().chip.preview.isEnabled(),function(p){t.oConfig=p;});t.tileType=t.oConfig.TILE_PROPERTIES.tileType;t.oNumericContent=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:"{/isFormatterValue}",truncateValueTo:5,valueColor:"{/valueColor}",nullifyValue:false});t.oLeftTileContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var o;switch(t.tileType){case"DT-CM":o=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oComparisionContent=new b({size:"{/size}",scale:"{/scale}",data:{template:o,path:"/data"}});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oComparisionContent});break;case"DT-CT":o=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oContributionContent=new b({size:"{/size}",scale:"{/scale}",data:{template:o,path:"/data"}});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oContributionContent});break;case"DT-TT":var i=function(p){return new A({color:"Good",points:{path:"/"+p+"/data",template:new c({x:"{day}",y:"{balance}"})}});};var j=function(p){return new e({label:"{/"+p+"/label}",color:"{/"+p+"/color}"});};var k=new f({width:"{/width}",height:"{/height}",size:"{/size}",target:i("target"),innerMinThreshold:i("innerMinThreshold"),innerMaxThreshold:i("innerMaxThreshold"),minThreshold:i("minThreshold"),maxThreshold:i("maxThreshold"),chart:i("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:j("firstXLabel"),lastXLabel:j("lastXLabel"),firstYLabel:j("firstYLabel"),lastYLabel:j("lastYLabel"),minLabel:j("minLabel"),maxLabel:j("maxLabel")});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",content:k});break;case"DT-AT":var l=new B({value:"{value}",color:"{color}"});var n=new g({size:S.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:l,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});t.oRightContent=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:n});break;}t.oGenericTile=new G({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[t.oLeftTileContent,t.oRightContent]});t.oGenericTileModel=new h();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.controller',["sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,m,q,L){"use strict";var S=m.Size;var D=m.DeviationIndicator;var V=m.ValueColor;var a=m.LoadState;sap.ui.controller("tiles.indicatorDualComparison.DualComparison",{getTile:function(){return this.oDualComparisonView.oGenericTile;},_updateTileModel:function(n){var b=this.getTile().getModel().getData();q.extend(b,n);this.getTile().getModel().setData(b);},setTitle:function(){var t=this;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:b.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:b.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},logError:function(e){this.oDualComparisonView.oGenericTile.setState(a.Failed);this.oDualComparisonView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendColor:function(t){var b=this;var c,w,d,f;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<w){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=c){r=V.Critical;}else{r=V.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){d=Number(t.criticalLowValue);f=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<d){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=f){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){c=Number(t.criticalHighValue);w=Number(t.warningHighValue);f=Number(t.warningLowValue);d=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<d||this.CALCULATED_KPI_VALUE>c){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=d&&this.CALCULATED_KPI_VALUE<=f)||(this.CALCULATED_KPI_VALUE>=w&&this.CALCULATED_KPI_VALUE<=c)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){b.logError(e);}},_processDataForComparisonChart:function(d,b,c){var f=[],e={},i,t,l;var g;var T=[];var h=this;for(i=0;i<d.results.length;i++){var j=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oConfig.EVALUATION.ODATA_URL,this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];e[t.key]=t.value;}var k=h.oConfig.TILE_PROPERTIES.COLUMN_NAMES||h.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<k.length;i++){var n={};var o=k[i];n.value=Number(j[o.COLUMN_NAME]);var p=Number(j[o.COLUMN_NAME]);if(h.oConfig.EVALUATION.SCALING==-2){p*=100;}g=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(p,h.oConfig.EVALUATION.SCALING,h.oConfig.EVALUATION.DECIMAL_PRECISION);if(h.oConfig.EVALUATION.SCALING==-2){g+=" %";}n.displayValue=g.toString();if(c[i]&&j[c[i].name]){n.displayValue+=" "+j[c[i].name];}n.color=o.semanticColor;n.title=e[o.COLUMN_NAME]||o.COLUMN_NAME;f.push(n);}return f;},getTrendIndicator:function(t,v){var b=this;t=Number(t);try{var c=D.None;if(t>v){c=D.Down;}else if(t<v){c=D.Up;}return c;}catch(e){b.logError(e);}},fetchKpiValue:function(s,E){var t=this;try{var U=this.oConfig.EVALUATION.ODATA_URL,b=this.oConfig.EVALUATION.ODATA_ENTITYSET,c;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){c=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{c=this.oConfig.EVALUATION.COLUMN_NAME;var d=c;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(var j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){d=d+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}}var f=this.oConfig.EVALUATION_VALUES;var g=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!g){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=c+",asc";o["1"]=c+",desc";var h=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var k=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(U),b,d,null,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){k.uri+="&$orderby="+h[0]+" "+h[2];}else{k.uri+="&$orderby="+h[0]+" "+h[1];}this.writeData={};this.comparisionChartODataRef=k.model.read(k.uri,null,null,true,function(f){if(f&&f.results&&f.results.length){if(k.unit){t.writeData.unit=k.unit;}t.oConfig.TILE_PROPERTIES.FINALVALUE=f;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d.split(",")[0],k.unit);t.writeData.data=f;var n;for(var i=0;i<t.oConfig.TILE_PROPERTIES.FINALVALUE.length;i++){if(t.oConfig.TILE_PROPERTIES.FINALVALUE[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){t.writeData.numericData=t.oConfig.TILE_PROPERTIES.FINALVALUE[i];calculatedValueforScaling=t.oConfig.TILE_PROPERTIES.FINALVALUE[i].value;t.getTrendIndicator(t.setThresholdValues().trendValue,calculatedValueforScaling);t._updateTileModel({valueColor:t.oConfig.TILE_PROPERTIES.FINALVALUE[i].color,value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString()});break;}}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(f.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=f;t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}},function(i){if(i&&i.response){L.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});if(!t.writeData.numericData){var l=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(U),b,c,null,l);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(f){if(f&&f.results&&f.results.length){if(Q.unit){t._updateTileModel({unitNumeric:f.results[0][Q.unit.name]});t.writeData.unitNumeric=Q.unit;t.writeData.unitNumeric.name=Q.unit.name;}t.writeData.numericData=f.results[0];t.DEFINITION_DATA.value=t.writeData.numericData[t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData.color=t.getTrendColor(t.setThresholdValues());t.DEFINITION_DATA.valueColor=t.writeData.numericData.color;var i="";var n=f.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var p=t.getTrendIndicator(t.setThresholdValues().trendValue,n);if(t.oConfig.EVALUATION.SCALING==-2){n*=100;t.getView().oNumericContent.setFormatterValue(false);}i=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(n),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:i.toString(),valueColor:t.writeData.numericData.color,indicator:p});}else{E.call(t,"no Response from QueryServiceUri");}});}}}else{if(g.unit){t._updateTileModel({unit:g.data.results[0][g.unit.name]});}if(g.data&&g.data.results&&g.data.results.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;t._updateTileModel({value:g.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]});t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,d,t.writeData.unit);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(f.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k){this.CALCULATED_KPI_VALUE=k;t.oDualComparisonView.oGenericTile.setFrameType("TwoByOne");t.oDualComparisonView.oGenericTile.removeAllTileContent();t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oNumericTile);t.oDualComparisonView.oGenericTile.addTileContent(t.oDualComparisonView.oComparisonTile);var c=this.CALCULATED_KPI_VALUE;var b,d;for(var i=0;i<c.length;i++){if(c[i].title==t.DEFINITION_DATA.EVALUATION.COLUMN_NAME){d=c[i].value;b=c[i].color||"Neutral";t._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),valueColor:b});break;}}if(!b&&!d){b=t.DEFINITION_DATA.valueColor;d=t.DEFINITION_DATA.value;}this._updateTileModel({value:sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION).toString(),data:this.CALCULATED_KPI_VALUE});var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualComparisonView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");this.oDualComparisonView.oGenericTile.setState(a.Loaded);var s="";if(b=="Error"){s="sb.error";}if(b=="Neutral"){s="sb.neutral";}if(b=="Critical"){s="sb.critical";}if(b=="Good"){s="sb.good";}var T=t.setThresholdValues();var e,f,g,v,h,j,l,o,p;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){e=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){f=this.CALCULATED_KPI_VALUE[1].title;h=this.CALCULATED_KPI_VALUE[1].value;o=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){g=this.CALCULATED_KPI_VALUE[2].title;j=this.CALCULATED_KPI_VALUE[2].value;p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var r={status:s,actual:d,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var w={m1:e,v1:v,c1:l,m2:f,v2:h,c2:o,m3:g,v3:j,c3:p};var C=t.oDualComparisonView.oGenericTile.getTileContent()[0].getContent();var x=t.oDualComparisonView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",r);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(x,"COMP",w);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var b=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualComparisonView=this.getView();this.oChip=this.oDualComparisonView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualComparisonView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:1,size:S.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:V.Good,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1,color:"Good"},{title:"Measure 2",value:2,color:"Good"},{title:"Measure 3",value:3,color:"Good"}]});t.oDualComparisonView.oGenericTile.setState(a.Loaded);}else{t.setTitle();t.oDualComparisonView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualComparison/DualComparison.view',["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,N,o,s,a,T,C,b,G,c){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualComparison.DualComparison",{getControllerName:function(){return"tiles.indicatorDualComparison.DualComparison";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};t.oNumericContent=new a({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new b({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new c();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.controller',["sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(m,q,L){"use strict";var V=m.ValueColor;var S=m.Size;var D=m.DeviationIndicator;var a=m.LoadState;sap.ui.controller("tiles.indicatorDualContribution.DualContribution",{getTile:function(){return this.oDualContributionView.oGenericTile;},_updateTileModel:function(n){var b=this.getTile().getModel().getData();q.extend(b,n);this.getTile().getModel().setData(b);this.getTile().getModel().updateBindings();},setTitle:function(){var t=this;var b=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oChip);this._updateTileModel({header:b.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:b.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},logError:function(e){this.oDualContributionView.oGenericTile.setState(a.Failed);this.oDualContributionView.oGenericTile.setState(a.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var b=this;t=Number(t);try{var c=D.None;if(t>v){c=D.Down;}else if(t<v){c=D.Up;}return c;}catch(e){b.logError(e);}},_processDataForComparisonChart:function(d,b,c){var s=this.oConfig.TILE_PROPERTIES.semanticMeasure;var f=[];var t;for(var i=0;i<d.results.length;i++){var g=d.results[i];var h={};try{h.title=g[c].toString();}catch(e){h.title="";}h.value=Number(g[b]);var j=Number(g[b]);if(this.oConfig.EVALUATION.SCALING==-2){j*=100;}t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(j,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);h.displayValue=t.toString();if(typeof s==="undefined"){h.color="Neutral";}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MA"){if(h.value>g[s]){h.color="Good";}else{h.color="Error";}}else if(this.oConfig.EVALUATION.GOAL_TYPE==="MI"){if(h.value<g[s]){h.color="Good";}else{h.color="Error";}}else{h.color="Neutral";}f.push(h);}return f;},fetchKpiValue:function(s,E){var t=this;try{var u=this.oConfig.EVALUATION.ODATA_URL,b=this.oConfig.EVALUATION.ODATA_ENTITYSET,c;if(this.oConfig.TILE_PROPERTIES.semanticMeasure){c=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{c=this.oConfig.EVALUATION.COLUMN_NAME;}var d=this.oConfig.TILE_PROPERTIES.dimension;var f=this.oConfig.EVALUATION_VALUES;var g=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!g){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=c+",asc";o["1"]=c+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var h=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var i=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,c,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){i.uri+="&$top=3&$orderby="+h[0]+" "+h[2];}else{i.uri+="&$top=3&$orderby="+h[0]+" "+h[1];}this.comparisionChartODataRef=i.model.read(i.uri,null,null,true,function(f){if(i.unit[0]){t._updateTileModel({unitContribution:f.results[0][i.unit[0].name]});t.writeData.unitContribution=i.unit[0];t.writeData.unitContribution.name=i.unit[0].name;}if(f&&f.results&&f.results.length){d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oChip.url.addSystemToServiceUrl(u),b,d);t.writeData.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=f;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,c.split(",")[0],d);t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(f.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=f;t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);}else{E.call(t,"no Response from QueryServiceUri");}},function(p){if(p&&p.response){L.error(p.message+" : "+p.request.requestUri);E.call(t,p);}});var j=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oChip.url.addSystemToServiceUrl(u),b,c,null,j);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(f){if(f&&f.results&&f.results.length){if(Q.unit){t._updateTileModel({unitNumeric:f.results[0][Q.unit.name]});t.writeData.unitNumeric=Q.unit;t.writeData.unitNumeric.name=Q.unit.name;}t.writeData.numericData=f;var l="";var k=f.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var n=t.getTrendIndicator(t.setThresholdValues().trendValue,k);if(t.oConfig.EVALUATION.SCALING==-2){k*=100;t.getView().oNumericContent.setFormatterValue(false);}t.DEFINITION_DATA.value=k;l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(k),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:l.toString(),valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution,indicator:n});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,k);}else{E.call(t,"no Response from QueryServiceUri");}});}}else{var T=t.setThresholdValues();var k;if(g.unitContribution){t._updateTileModel({unitContribution:g.data.results[0][g.unitContribution.name]});}if(g.unitNumeric){t._updateTileModel({unitNumeric:g.numericData.results[0][g.unitNumeric.name]});}if(g.data&&g.data.results&&g.data.results.length){d=g.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,c.split(",")[0],d);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(f.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=g.data;}else{E.call(t,"no Response from QueryServiceUri");}if(g.numericData&&g.numericData.results&&g.numericData.results.length){k=g.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){k*=100;t.getView().oNumericContent.setFormatterValue(false);}var l=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(k),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var n=t.getTrendIndicator(T.trendValue,k);t._updateTileModel({value:l.toString(),indicator:n,valueColor:t.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution});s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE,k);}else{E.call(t,"no Response from QueryServiceUri");}}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oChip.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,c){this.CALCULATED_KPI_VALUE=k;if(t.oConfig.TILE_PROPERTIES.frameType=="TwoByOne"){t.oDualContributionView.oGenericTile.setFrameType("TwoByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oNumericTile);t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}else{t.oDualContributionView.oGenericTile.setFrameType("OneByOne");t.oDualContributionView.oGenericTile.removeAllTileContent();t.oDualContributionView.oGenericTile.addTileContent(t.oDualContributionView.oComparisonTile);}var d=this.CALCULATED_KPI_VALUE;var b=this.DEFINITION_DATA.TILE_PROPERTIES.semanticColorContribution;for(var i=0;i<this.CALCULATED_KPI_VALUE.length;i++){d[i].color=b;}this._updateTileModel({data:d});var T=t.setThresholdValues();var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualContributionView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");this.oDualContributionView.oGenericTile.setState(a.Loaded);var s="";if(b=="Error"){s="sb.error";}if(b=="Neutral"){s="sb.neutral";}if(b=="Critical"){s="sb.critical";}if(b=="Good"){s="sb.good";}T=t.setThresholdValues();var e,f,g,v,h,j,l,o,p;if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[0]){e=this.CALCULATED_KPI_VALUE[0].title;v=this.CALCULATED_KPI_VALUE[0].value;l=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[0].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[1]){f=this.CALCULATED_KPI_VALUE[1].title;h=this.CALCULATED_KPI_VALUE[1].value;o=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[1].color);}if(this.CALCULATED_KPI_VALUE&&this.CALCULATED_KPI_VALUE[2]){g=this.CALCULATED_KPI_VALUE[2].title;j=this.CALCULATED_KPI_VALUE[2].value;p=sap.ushell.components.tiles.indicatorTileUtils.util.getSemanticColorName(this.CALCULATED_KPI_VALUE[2].color);}var r={status:s,actual:c,target:T.targetValue,cH:T.criticalHighValue,wH:T.warningHighValue,wL:T.warningLowValue,cL:T.criticalLowValue};var u={m1:e,v1:v,c1:l,m2:f,v2:h,c2:o,m3:g,v3:j,c3:p};var C=t.oDualContributionView.oGenericTile.getTileContent()[0].getContent();var w=t.oDualContributionView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",r);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(w,"CONT",u);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var b=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(b){t.oConfig.EVALUATION_FILTERS=b.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oChip.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}if(i){this.refreshHandler(this);}},onInit:function(){var t=this;t.writeData={};this.firstTimeVisible=false;this.oDualContributionView=this.getView();this.oChip=this.oDualContributionView.getViewData().chip;if(this.oChip.visible){this.oChip.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oChip.url.getApplicationSystem();this.oDualContributionView.oGenericTile.setState(a.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oChip.configuration.getParameterValueAsString("tileConfiguration"),this.oChip.preview.isEnabled(),function(c){t.oConfig=c;if(t.oChip.preview){t.oChip.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oChip.preview.isEnabled()){t.setTitle();t._updateTileModel({value:8888,size:S.Auto,frameType:"TwoByOne",state:a.Loading,valueColor:V.Error,indicator:D.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral",displayValue:""},{title:"EMEA",value:50,color:"Neutral",displayValue:""},{title:"APAC",value:-20,color:"Neutral",displayValue:""}]});t.oDualContributionView.oGenericTile.setState(a.Loaded);}else{t.setTitle();t.oDualContributionView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.comparisionChartODataRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oChip.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.comparisionChartODataRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualContribution/DualContribution.view',["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,N,o,s,a,T,C,b,G,c){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualContribution.DualContribution",{getControllerName:function(){return"tiles.indicatorDualContribution.DualContribution";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var t=this;t.oGenericTileData={};t.oNumericContent=new a({value:"{/value}",scale:"{/scale}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unitNumeric}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new b({size:"{/size}",scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oComparisonTile=new T({unit:"{/unitContribution}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,t.oComparisonTile]});t.oGenericTileModel=new c();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.controller',["sap/ui/model/json/JSONModel","sap/m/library","sap/ui/thirdparty/jquery"],function(J,m,q){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;sap.ui.controller("tiles.indicatorDualDeviation.DualDeviation",{logError:function(e){this.oDualDeviationView.oGenericTile.setState(L.Failed);this.oDualDeviationView.oGenericTile.setState(L.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=V.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=V.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=V.Critical;}else{T.returnColor=V.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:V.Error});T.arrObj.push({value:w,color:V.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});T.arrObj.push({value:w,color:V.Critical});T.arrObj.push({value:c,color:V.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=V.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}return T;}catch(e){this.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=D.None;if(t>v){b=D.Down;}else if(t<v){b=D.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualDeviationView.oGenericTile;},_updateTileModel:function(n){var a=this.getTile().getModel().getData();q.extend(a,n);this.getTile().getModel().setData(a);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;},fetchKpiValue:function(s,E){var t=this;var k=0;try{var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var a=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var T=this.setThresholdValues();var M=T.fullyFormedMeasure;var c=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!c){var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),a,M,null,v);if(Q){this.QUERY_SERVICE_MODEL=Q.model;this.queryUriForKpiValue=Q.uri;try{this.queryServiceUriODataReadRef=this.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(f){t.writeData={};if(f&&f.results&&f.results.length){k=f.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(Q.unit[0]){t._updateTileModel({unit:f.results[0][Q.unit[0].name]});t.writeData.unit=Q.unit[0];t.writeData.unit.name=Q.unit[0].name;}t.writeData.numericData=f;var S="",d;var b=k;if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(false);}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}t._updateTileModel({value:S.toString(),indicator:d,valueColor:t.getThresholdsObjAndColor(T).returnColor});t.writeData.data=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=f.results[0][T.sCriticalHigh];T.criticalLowValue=f.results[0][T.sCriticalLow];T.warningHighValue=f.results[0][T.sWarningHigh];T.warningLowValue=f.results[0][T.sWarningLow];T.targetValue=f.results[0][T.sTarget];T.trendValue=f.results[0][T.sTrend];}s.call(t,k,T);}else{E.call(t,"no Response from QueryServiceUri");}},function(f){if(f&&f.response){E.call(t,f.message);}});}catch(e){t.logError("Error in Query Service URI");}}}else if(c.data&&c.data.results&&c.data.results.length){var b,S,d;T=t.setThresholdValues();b=c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];if(t.oConfig.EVALUATION.SCALING==-2){b*=100;t.getView().oNumericContent.setFormatterValue(true);}if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}S=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(b),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);d=t.getTrendIndicator(T.trendValue,b);if(c.unit){t._updateTileModel({unit:c.data.results[0][c.unit.name]});}t._updateTileModel({indicator:d,value:S.toString()});if(t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){T.criticalHighValue=c.data.results[0][T.sCriticalHigh];T.criticalLowValue=c.data.results[0][T.sCriticalLow];T.warningHighValue=c.data.results[0][T.sWarningHigh];T.warningLowValue=c.data.results[0][T.sWarningLow];T.targetValue=c.data.results[0][T.sTarget];T.trendValue=c.data.results[0][T.sTrend];}s.call(t,c.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME],T);}else{E.call(t,"no Response from QueryServiceUri");}}catch(e){E.call(t,e);}},flowWithoutDesignTimeCall:function(){var t=this;var f,a;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;this.fetchKpiValue(function(k,b){var c=Number(k);if(this.oConfig.EVALUATION.SCALING==-2){c*=100;}f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(c),this.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);this.CALCULATED_KPI_VALUE=Number(k);var d={};var e=this.getThresholdsObjAndColor(b);var g={value:Number(k),color:e.returnColor};d.valueColor=g.color;d.actualValueLabel=f.toString();d.actual=g;var h=this.DEFINITION_DATA.EVALUATION_VALUES,i;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){i=Number(b.targetValue);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION);d.targetValue=Number(b.targetValue);d.targetValueLabel=a.toString();}else{for(var j=0;j<h.length;j++){if(h[j].TYPE==="TA"){i=Number(h[j].FIXED);if(this.oConfig.EVALUATION.SCALING==-2){i*=100;}a=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(i);d.targetValue=Number(h[j].FIXED);d.targetValueLabel=a.toString();}}}this._updateTileModel(d);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualDeviationView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");this.oDualDeviationView.oGenericTile.setState(L.Loaded);var s="";if(d.valueColor=="Error"){s="sb.error";}if(d.valueColor=="Neutral"){s="sb.neutral";}if(d.valueColor=="Critical"){s="sb.critical";}if(d.valueColor=="Good"){s="sb.good";}var v={status:s,actual:c,target:b.targetValue,cH:b.criticalHighValue,wH:b.warningHighValue,wL:b.warningLowValue,cL:b.criticalLowValue};var l=v;var C=t.oDualDeviationView.oGenericTile.getTileContent()[0].getContent();var o=t.oDualDeviationView.oGenericTile.getTileContent()[1].getContent();sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(C,"NT",v);sap.ushell.components.tiles.indicatorTileUtils.util.setTooltipInTile(o,"DT",l);},this.logError);}},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(c){if(!c.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){c.flowWithoutDesignTimeCall();}else{c.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;var a=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.oTileApi);this._updateTileModel({header:a.title||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:a.subTitle||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualDeviationView=this.getView();this.oViewData=this.oDualDeviationView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualDeviationView.oGenericTile.setState(L.Loading);try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(t.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),t.oTileApi.preview.isEnabled(),function(c){t.oConfig=c;t.setTextInTile();if(t.oTileApi.preview){t.oTileApi.preview.setTargetUrl(sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system));}if(t.oTileApi.preview.isEnabled()){t._updateTileModel({valueColor:"Good",value:100,frameType:"TwoByOne",unit:"USD",actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});t.oDualDeviationView.oGenericTile.setState(L.Loaded);}else{t.oDualDeviationView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.queryServiceUriODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}}});}catch(e){this.logError(e);}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.queryServiceUriODataReadRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualDeviation/DualDeviation.view',["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/TileContent","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,N,o,s,m,a,T,B,b,G,c){"use strict";var S=m.Size;var L=m.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualDeviation.DualDeviation",{getControllerName:function(){return"tiles.indicatorDualDeviation.DualDeviation";},createContent:function(){var t=this;this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var d="Lorem ipsum";var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(e.title&&e.subTitle){h=e.title;d=e.subTitle;}var f={subheader:d,header:h,footerNum:"",footerComp:"",frameType:"TwoByOne",state:L.Loading,scale:""};t.oNumericContent=new a({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});t.oNumericTile=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oNumericContent});var g=new B({value:"{value}",color:"{color}"});t.oBCTmpl=new b({size:S.Auto,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:g,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});var n=new T({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:t.oBCTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNumericTile,n]});var i=new c();i.setData(f);t.oGenericTile.setModel(i);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.controller',["sap/ui/model/json/JSONModel","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartItem","sap/m/library","sap/ui/thirdparty/jquery"],function(J,A,c,m,q){"use strict";var S=m.Size;var V=m.ValueColor;var D=m.DeviationIndicator;var L=m.LoadState;sap.ui.controller("tiles.indicatorDualTrend.DualTrend",{logError:function(e){this.oDualTrendView.oGenericTile.setState(L.Failed);this.oDualTrendView.oGenericTile.setState(L.Failed);sap.ushell.components.tiles.indicatorTileUtils.util.logError(e);},formSelectStatement:function(o){var t=Object.keys(o);var f="";for(var i=0;i<t.length;i++){if((o[t[i]]!==undefined)&&(o.fullyFormedMeasure)){f+=","+o[t[i]];}}return f;},setThresholdValues:function(){var t=this;try{var T={};T.fullyFormedMeasure=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){switch(this.DEFINITION_DATA.EVALUATION.GOAL_TYPE){case"MI":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"MA":T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;case"RA":T.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");T.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");T.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");T.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");T.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");T.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");T.fullyFormedMeasure+=t.formSelectStatement(T);break;}}else{T.criticalHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","FIXED");T.criticalLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","FIXED");T.warningHighValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","FIXED");T.warningLowValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","FIXED");T.targetValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","FIXED");T.trendValue=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","FIXED");}return T;}catch(e){t.logError(e);}},getTrendIndicator:function(t,v){var a=this;t=Number(t);try{var b=D.None;if(t>v){b=D.Down;}else if(t<v){b=D.Up;}return b;}catch(e){a.logError(e);}},getTile:function(){return this.oDualTrendView.oGenericTile;},getTrendColor:function(t){var a=this;try{var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var r=V.Neutral;if(i==="MI"){if(t.criticalHighValue&&t.warningHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);if(this.CALCULATED_KPI_VALUE<t.warningHighValue){r=V.Good;}else if(this.CALCULATED_KPI_VALUE<=t.criticalHighValue){r=V.Critical;}else{r=V.Error;}}}else if(i==="MA"){if(t.criticalLowValue&&t.warningLowValue){t.criticalLowValue=Number(t.criticalLowValue);t.warningLowValue=Number(t.warningLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue){r=V.Error;}else if(this.CALCULATED_KPI_VALUE<=t.warningLowValue){r=V.Critical;}else{r=V.Good;}}}else if(t.warningLowValue&&t.warningHighValue&&t.criticalLowValue&&t.criticalHighValue){t.criticalHighValue=Number(t.criticalHighValue);t.warningHighValue=Number(t.warningHighValue);t.warningLowValue=Number(t.warningLowValue);t.criticalLowValue=Number(t.criticalLowValue);if(this.CALCULATED_KPI_VALUE<t.criticalLowValue||this.CALCULATED_KPI_VALUE>t.criticalHighValue){r=V.Error;}else if((this.CALCULATED_KPI_VALUE>=t.criticalLowValue&&this.CALCULATED_KPI_VALUE<=t.warningLowValue)||(this.CALCULATED_KPI_VALUE>=t.warningHighValue&&this.CALCULATED_KPI_VALUE<=t.criticalHighValue)){r=V.Critical;}else{r=V.Good;}}return r;}catch(e){a.logError(e);}},_updateTileModel:function(n){var a=this.getTile().getModel().getData();q.extend(a,n);this.getTile().getModel().setData(a);},onAfterFinalEvaluation:function(){var t=this;var u=this.DEFINITION_DATA.EVALUATION.ODATA_URL;var E=this.DEFINITION_DATA.EVALUATION.ODATA_ENTITYSET;var M=this.DEFINITION_DATA.EVALUATION.COLUMN_NAME;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.DEFINITION_DATA.EVALUATION_FILTERS,this.DEFINITION_DATA.ADDITIONAL_FILTERS);var d=this.DEFINITION_DATA.TILE_PROPERTIES.dimension;if(d==undefined){this.logError();return;}var g=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE,f=this.DEFINITION_DATA.EVALUATION_VALUES,Q;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){var h=M;switch(g){case"MI":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningHigh&&t.sCriticalHigh&&t.sTarget){h+=","+t.sWarningHigh+","+t.sCriticalHigh+","+t.sTarget;}break;case"MA":t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget){h+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget;}break;case"RA":t.sWarningHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WH","MEASURE");t.sCriticalHigh=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CH","MEASURE");t.sTarget=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TA","MEASURE");t.sTrend=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"TC","MEASURE");t.sWarningLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"WL","MEASURE");t.sCriticalLow=sap.ushell.components.tiles.indicatorTileUtils.util.getEvalValueMeasureName(t.oConfig,"CL","MEASURE");if(t.sWarningLow&&t.sCriticalLow&&t.sTarget&&t.sWarningHigh&&t.sCriticalHigh){h+=","+t.sWarningLow+","+t.sCriticalLow+","+t.sTarget+","+t.sWarningHigh+","+t.sCriticalHigh;}break;}Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,h,d,v);}else{Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,M,d,v);}var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(!j){if(Q){this.queryUriForTrendChart=Q.uri;t.writeData={};try{this.trendChartODataReadRef=Q.model.read(Q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){if(Q.unit[0]){t.unit=a.results[0][Q.unit[0].name];t.writeData.unit=Q.unit[0];t.writeData.unit.name=Q.unit[0].name;}t.queryUriResponseForTrendChart=a;d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oTileApi.url.addSystemToServiceUrl(u),E,d);a.firstXlabel=a.results[0][d];a.lastXlabel=a.results[a.results.length-1][d];t.writeData.data=a;t.writeData.dimensionName=d;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,t.writeData);var n=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);t.oDualTrendView.oGenericTile.$().wrap("<a href ='"+n+"'></a>");t.oDualTrendView.oGenericTile.setState(L.Loaded);_(a,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);}else{t.logError("no Response from QueryServiceUri");}},function(a){if(a&&a.response){t.logError("Data call failed");}});}catch(e){t.logError(e);}}else{t.logError();}v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(t.DEFINITION_DATA.EVALUATION_FILTERS,t.DEFINITION_DATA.ADDITIONAL_FILTERS);Q=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oTileApi.url.addSystemToServiceUrl(u),E,M,null,v);if(Q){t.QUERY_SERVICE_MODEL=Q.model;t.queryUriForKpiValue=Q.uri;t.numericODataReadRef=t.QUERY_SERVICE_MODEL.read(Q.uri,null,null,true,function(a){if(a&&a.results&&a.results.length){var s="";var k=a.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];t.writeData.numericData=a;if(t.oConfig.EVALUATION.SCALING==-2){k*=100;}s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(k),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){t._updateTileModel({scale:"%"});}var l=t.getTrendIndicator(t.setThresholdValues().trendValue,k);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:l});}else{fnError.call(t,"no Response from QueryServiceUri");}});}}else{try{if(j.unit!==undefined){t.unit=j.data.results[0][j.unit.name];}t.queryUriResponseForTrendChart=j.data;d=j.dimensionName;var k=j.numericData.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME];var l=t.getTrendIndicator(t.setThresholdValues().trendValue,j.data.results[0][t.DEFINITION_DATA.EVALUATION.COLUMN_NAME]);var s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(k),t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);t.oDualTrendView.oGenericTile.setState(L.Loaded);_(j.data,t.DEFINITION_DATA.EVALUATION.VALUES_SOURCE);t._updateTileModel({value:s.toString(),valueColor:t.getTrendColor(t.setThresholdValues()),indicator:l});}catch(e){t.logError(e);}}function _(n,o){var p=[];var r=[];var w=[];var x=[];var y=[];var z=[];var B=n.firstXlabel;var C,F,G,H,I;var K=n.lastXlabel;var N=Number(n.results[0][M]);var O=Number(n.results[n.results.length-1][M]);var i;for(i in n.results){n.results[i][d]=Number(i);n.results[i][M]=Number(n.results[i][M]);if(t.sWarningHigh){n.results[i][t.sWarningHigh]=Number(n.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){n.results[i][t.sCriticalHigh]=Number(n.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){n.results[i][t.sCriticalLow]=Number(n.results[i][t.sCriticalLow]);}if(t.sWarningLow){n.results[i][t.sWarningLow]=Number(n.results[i][t.sWarningLow]);}if(t.sTarget){n.results[i][t.sTarget]=Number(n.results[i][t.sTarget]);}if(t.sWarningHigh){w.push(n.results[i][t.sWarningHigh]);}if(t.sCriticalHigh){x.push(n.results[i][t.sCriticalHigh]);}if(t.sCriticalLow){y.push(n.results[i][t.sCriticalLow]);}if(t.sWarningLow){z.push(n.results[i][t.sWarningLow]);}p.push(n.results[i][d]);r.push(n.results[i][M]);}try{B=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(B);K=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(K);}catch(e){t.logError(e);}var P=Number(N);if(t.oConfig.EVALUATION.SCALING==-2){P*=100;}var R=Math.min.apply(Math,r);var T=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(P,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){T+=" %";}var U=T.toString();var W=Number(O);if(t.oConfig.EVALUATION.SCALING==-2){W*=100;}var X=Math.max.apply(Math,r);var Y=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(W,t.oConfig.EVALUATION.SCALING,t.oConfig.EVALUATION.DECIMAL_PRECISION);if(t.oConfig.EVALUATION.SCALING==-2){Y+=" %";}var Z=Y.toString();try{var $=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.min.apply(Math,p));var a1=sap.ushell.components.tiles.indicatorTileUtils.util.formatOdataObjectToString(Math.max.apply(Math,p));}catch(e){t.logError(e);}if(o=="MEASURE"){if(w.length!=0){t.firstwH=w[$];t.lastwH=w[a1];}if(x.length!=0){t.firstcH=x[$];t.lastcH=x[a1];}if(y.length!=0){t.firstcL=y[$];t.lastcL=y[a1];}if(z.length!=0){t.firstwL=z[$];t.lastwL=z[a1];}}var b1={width:"100%",height:"100%",unit:t.unit||"",chart:{color:"Neutral",data:n.results},size:"Auto",minXValue:$,maxXValue:a1,minYValue:R,maxYValue:X,firstXLabel:{label:B+"",color:"Neutral"},lastXLabel:{label:K+"",color:"Neutral"},firstYLabel:{label:U+"",color:"Neutral"},lastYLabel:{label:Z+"",color:"Neutral"},minLabel:{},maxLabel:{}},c1;switch(g){case"MA":for(i in f){if(f[i].TYPE=="CL"){b1.minThreshold={color:"Error"};c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.cl=Number(f[i].FIXED);b1.minThreshold.data=(o=="MEASURE")?n.results:[c1];C=(o=="MEASURE")?t.sCriticalLow:M;}else if(f[i].TYPE=="WL"){b1.maxThreshold={color:"Good"};c1={};c1[d]="";c1[M]=Number(f[i].FIXED);b1.maxThreshold.data=(o=="MEASURE")?n.results:[c1];F=(o=="MEASURE")?t.sWarningLow:M;t.wl=Number(f[i].FIXED);}else if(f[i].TYPE=="TA"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(o=="MEASURE")?n.results:[c1];I=(o=="MEASURE")?t.sTarget:M;}}b1.innerMinThreshold={data:[]};b1.innerMaxThreshold={data:[]};if(o=="FIXED"){b1.firstYLabel.color=N<t.cl?"Error":((t.cl<=N)&&(N<=t.wl))?"Critical":(N>t.wl)?"Good":"Neutral";b1.lastYLabel.color=O<t.cl?"Error":((t.cl<=O)&&(O<=t.wl))?"Critical":(O>t.wl)?"Good":"Neutral";}else if(o=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL){b1.firstYLabel.color=N<t.firstcL?"Error":((t.firstcL<=N)&&(N<=t.firstwL))?"Critical":(N>t.firstwL)?"Good":"Neutral";b1.lastYLabel.color=O<t.lastcL?"Error":((t.lastcL<=O)&&(O<=t.lastwL))?"Critical":(O>t.lastwL)?"Good":"Neutral";}break;case"MI":for(i in f){if(f[i].TYPE=="CH"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.ch=Number(f[i].FIXED);b1.maxThreshold={color:"Error"};b1.maxThreshold.data=(o=="MEASURE")?n.results:[c1];F=(o=="MEASURE")?t.sCriticalHigh:M;}else if(f[i].TYPE=="WH"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.wh=Number(f[i].FIXED);b1.minThreshold={color:"Good"};b1.minThreshold.data=(o=="MEASURE")?n.results:[c1];C=(o=="MEASURE")?t.sWarningHigh:M;}else if(f[i].TYPE=="TA"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(o=="MEASURE")?n.results:[c1];I=(o=="MEASURE")?t.sTarget:M;}}if(o=="FIXED"){b1.firstYLabel.color=N>t.ch?"Error":((t.wh<=N)&&(N<=t.ch))?"Critical":(N<t.wh)?"Good":"Neutral";b1.lastYLabel.color=O>t.ch?"Error":((t.wh<=O)&&(O<=t.ch))?"Critical":(O<t.wh)?"Good":"Neutral";}else if(o=="MEASURE"&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){b1.firstYLabel.color=N>t.firstcH?"Error":((t.firstwH<=N)&&(N<=t.firstcH))?"Critical":(N<t.firstwH)?"Good":"Neutral";b1.lastYLabel.color=O>t.lastcH?"Error":((t.lastwH<=O)&&(O<=t.lastcH))?"Critical":(O<t.lastwH)?"Good":"Neutral";}b1.innerMaxThreshold={data:[]};b1.innerMinThreshold={data:[]};break;case"RA":for(i in f){if(f[i].TYPE=="CH"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.ch=Number(f[i].FIXED);b1.maxThreshold={color:"Error"};b1.maxThreshold.data=(o=="MEASURE")?n.results:[c1];F=(o=="MEASURE")?t.sCriticalHigh:M;}else if(f[i].TYPE=="WH"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.wh=Number(f[i].FIXED);b1.innerMaxThreshold={color:"Good"};b1.innerMaxThreshold.data=(o=="MEASURE")?n.results:[c1];H=(o=="MEASURE")?t.sWarningHigh:M;}else if(f[i].TYPE=="WL"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.wl=Number(f[i].FIXED);b1.innerMinThreshold={color:"Good"};b1.innerMinThreshold.data=(o=="MEASURE")?n.results:[c1];G=(o=="MEASURE")?t.sWarningLow:M;}else if(f[i].TYPE=="CL"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);t.cl=Number(f[i].FIXED);b1.minThreshold={color:"Error"};b1.minThreshold.data=(o=="MEASURE")?n.results:[c1];C=(o=="MEASURE")?t.sCriticalLow:M;}else if(f[i].TYPE=="TA"){c1={};c1[d]="";c1[M]=Number(f[i].FIXED);b1.target={color:"Neutral"};b1.target.data=(o=="MEASURE")?n.results:[c1];I=(o=="MEASURE")?t.sTarget:M;}}if(o=="FIXED"){b1.firstYLabel.color=(N>t.ch||N<t.cl)?"Error":((t.wh<=N)&&(N<=t.ch))||((t.cl<=N)&&(N<=t.wl))?"Critical":((N>=t.wl)&&(N<=t.wh))?"Good":"Neutral";b1.lastYLabel.color=(O>t.ch||O<t.cl)?"Error":((t.wh<=O)&&(O<=t.ch))||((t.cl<=O)&&(O<=t.wl))?"Critical":((O>=t.wl)&&(O<=t.wh))?"Good":"Neutral";}else if(o=="MEASURE"&&t.firstwL&&t.lastwL&&t.firstcL&&t.lastcL&&t.firstwH&&t.lastwH&&t.firstcH&&t.lastcH){b1.firstYLabel.color=(N>t.firstcH||N<t.firstcL)?"Error":((t.firstwH<=N)&&(N<=t.firstcH))||((t.firstcL<=N)&&(N<=t.firstwL))?"Critical":((N>=t.firstwL)&&(N<=t.firstwH))?"Good":"Neutral";b1.lastYLabel.color=(O>t.lastcH||O<t.lastcL)?"Error":((t.lastwH<=O)&&(O<=t.lastcH))||((t.lastcL<=O)&&(O<=t.lastwL))?"Critical":((O>=t.lastwL)&&(O<=t.lastwH))?"Good":"Neutral";}break;}var d1=function(e1,a,b){return new c({color:"{/"+e1+"/color}",points:{path:"/"+e1+"/data",template:new A({x:"{"+a+"}",y:"{"+b+"}"})}});};t.getTile().getTileContent()[1].getContent().setTarget(d1("target",d,I));t.getTile().getTileContent()[1].getContent().setInnerMinThreshold(d1("innerMinThreshold",d,G));t.getTile().getTileContent()[1].getContent().setInnerMaxThreshold(d1("innerMaxThreshold",d,H));t.getTile().getTileContent()[1].getContent().setMinThreshold(d1("minThreshold",d,C));t.getTile().getTileContent()[1].getContent().setMaxThreshold(d1("maxThreshold",d,F));t.getTile().getTileContent()[1].getContent().setChart(d1("chart",d,M));t._updateTileModel(b1);}},flowWithoutDesignTimeCall:function(){this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);if(this.oTileApi.visible.isVisible()&&!this.firstTimeVisible){this.firstTimeVisible=true;}this.onAfterFinalEvaluation();},flowWithDesignTimeCall:function(){var t=this;try{var a=sap.ushell.components.tiles.indicatorTileUtils.cache.getEvaluationById(this.oConfig.EVALUATION.ID);if(a){t.oConfig.EVALUATION_FILTERS=a.EVALUATION_FILTERS;t.flowWithoutDesignTimeCall();}else{sap.ushell.components.tiles.indicatorTileUtils.util.getFilterFromRunTimeService(this.oConfig,function(f){t.oConfig.EVALUATION_FILTERS=f;sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();});}}catch(e){this.logError(e);}},refreshHandler:function(C){if(!C.firstTimeVisible){if(Number(this.oTileApi.configuration.getParameterValueAsString("isSufficient"))){C.flowWithoutDesignTimeCall();}else{C.flowWithDesignTimeCall();}}},visibleHandler:function(i){if(!i){this.firstTimeVisible=false;sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}if(i){this.refreshHandler(this);}},setTextInTile:function(){var t=this;this._updateTileModel({header:t.oTileApi.preview.getTitle()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipTitle(t.oConfig),subheader:t.oTileApi.preview.getDescription()||sap.ushell.components.tiles.indicatorTileUtils.util.getChipSubTitle(t.oConfig)});},onInit:function(){var t=this;this.firstTimeVisible=false;this.oDualTrendView=this.getView();this.oViewData=this.oDualTrendView.getViewData();this.oTileApi=this.oViewData.chip;if(this.oTileApi.visible){this.oTileApi.visible.attachVisible(this.visibleHandler.bind(this));}this.system=this.oTileApi.url.getApplicationSystem();this.oDualTrendView.oGenericTile.setState(L.Loading);if(this.oTileApi.preview.isEnabled()){this.setTextInTile();this._updateTileModel({value:8888,size:S.Auto,frameType:"TwoByOne",state:L.Loading,valueColor:V.Error,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",width:"100%",height:"100%",chart:{color:"Good",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:20},{day:100,balance:80}]},target:{color:"Error",data:[{day:0,balance:0},{day:30,balance:30},{day:60,balance:40},{day:100,balance:90}]},maxThreshold:{color:"Good",data:[{day:0,balance:0},{day:30,balance:40},{day:60,balance:50},{day:100,balance:100}]},innerMaxThreshold:{color:"Error",data:[]},innerMinThreshold:{color:"Neutral",data:[]},minThreshold:{color:"Error",data:[{day:0,balance:0},{day:30,balance:20},{day:60,balance:30},{day:100,balance:70}]},minXValue:0,maxXValue:100,minYValue:0,maxYValue:100,firstXLabel:{label:"June 123",color:"Error"},lastXLabel:{label:"June 30",color:"Error"},firstYLabel:{label:"0M",color:"Good"},lastYLabel:{label:"80M",color:"Critical"},minLabel:{},maxLabel:{}});this.oDualTrendView.oGenericTile.setState(L.Loaded);}else{try{sap.ushell.components.tiles.indicatorTileUtils.util.getParsedChip(this.oTileApi.configuration.getParameterValueAsString("tileConfiguration"),function(a){t.oConfig=a;t.setTextInTile();t.oDualTrendView.oGenericTile.attachPress(function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(t.trendChartODataReadRef);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,null);window.location.hash=sap.ushell.components.tiles.indicatorTileUtils.util.getNavigationTarget(t.oConfig,t.system);});if(Number(t.oTileApi.configuration.getParameterValueAsString("isSufficient"))){sap.ushell.components.tiles.indicatorTileUtils.cache.setEvaluationById(t.oConfig.TILE_PROPERTIES.id,t.oConfig);t.flowWithoutDesignTimeCall();}else{t.flowWithDesignTimeCall();}});}catch(e){this.logError(e);}}},_setLocalModelToTile:function(){if(!this.getTile().getModel()){this.getTile().setModel(new J({}));}},onExit:function(){sap.ushell.components.tiles.indicatorTileUtils.util.abortPendingODataCalls(this.trendChartODataReadRef);}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorDualTrend/DualTrend.view',["sap/ui/core/mvc/JSView","sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/AreaMicroChartItem","sap/suite/ui/microchart/AreaMicroChartPoint","sap/suite/ui/microchart/AreaMicroChartLabel","sap/suite/ui/microchart/AreaMicroChart","sap/m/TileContent","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,N,o,s,A,a,b,c,T,d,G,e){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("tiles.indicatorDualTrend.DualTrend",{getControllerName:function(){return"tiles.indicatorDualTrend.DualTrend";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var f=function(m){return new A({color:"Good",points:{path:"/"+m+"/data",template:new a({x:"{day}",y:"{balance}"})}});};var g=function(m){return new b({label:"{/"+m+"/label}",color:"{/"+m+"/color}"});};var h={footer:"",header:"",subheader:""};var n=new c({width:"{/width}",height:"{/height}",size:"{/size}",target:f("target"),innerMinThreshold:f("innerMinThreshold"),innerMaxThreshold:f("innerMaxThreshold"),minThreshold:f("minThreshold"),maxThreshold:f("maxThreshold"),chart:f("chart"),minXValue:"{/minXValue}",maxXValue:"{/maxXValue}",minYValue:"{/minYValue}",maxYValue:"{/maxYValue}",firstXLabel:g("firstXLabel"),lastXLabel:g("lastXLabel"),firstYLabel:g("firstYLabel"),lastYLabel:g("lastYLabel"),minLabel:g("minLabel"),maxLabel:g("maxLabel")});var i=new T({unit:"{/unit}",size:"{/size}",content:n});var j=new d({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",size:"{/size}",formatterValue:true,truncateValueTo:6,valueColor:"{/valueColor}"});var k=new T({unit:"{/unit}",size:"{/size}",content:j});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"TwoByOne",size:"{/size}",header:"{/header}",tileContent:[k,i]});var l=new e();l.setData(h);this.oGenericTile.setModel(l);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.controller',["sap/ui/model/json/JSONModel","sap/suite/ui/commons/library"],function(J,a){"use strict";var I=a.InfoTileValueColor;var b=a.InfoTileSize;var L=a.LoadState;sap.ui.controller("tiles.indicatorHarveyBall.HarveyBallTile",{onInit:function(){this.getView().setModel(new J());this.initializeVariables();this.attachHandlers();this.getVariable("tile").setState(L.Loading);this.readChipConfiguration();},attachHandlers:function(){var t=this;var c=this.getVariable("chip");if(c.visible){c.visible.attachVisible(function(v){if(v){t.onVisible();}else{t.abortAllOpenODataRequests();}});}this.getVariable("tile").attachPress(function(){t.abortAllOpenODataRequests();var i=t.getVariable("indicatorUtils");t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),null);window.location.hash=i.getNavigationTarget(t.getVariable("evalData"),t.getVariable("system"));});},initializeVariables:function(){this._variables={};this._oDataRequests={};var v=this.getView();var V=v.getViewData();var t=v.oTile;var c=V.chip;this.setVariable("indicatorUtils",sap.ushell.components.tiles.indicatorTileUtils.util);this.setVariable("cache",sap.ushell.components.tiles.indicatorTileUtils.cache);this.setVariable("hasAppeared",false);this.setVariable("chip",c);this.setVariable("tile",t);this.setVariable("tileControl",t.getTileContent()[0].getContent());this.setVariable("configurationString",c.configuration.getParameterValueAsString("tileConfiguration"));this.setVariable("system",c.url.getApplicationSystem());},getVariable:function(k){return this._variables[k];},setVariable:function(k,v){this._variables[k]=v;},readChipConfiguration:function(){var t=this;var c=this.getVariable("chip");var u=this.getVariable("indicatorUtils");u.getParsedChip(this.getVariable("configurationString"),function(e){t.setVariable("evalData",e);t.setVariable("chipId",e.TILE_PROPERTIES.id);t.setVariable("tileProperties",e.TILE_PROPERTIES);if(c.preview){c.preview.setTargetUrl(u.getNavigationTarget(e,t.getVariable("system")));t.loadPreviewData();if(c.preview.isEnabled()){t.getVariable("tile").setState(L.Loaded);}else{t.loadActualData();}}});},loadPreviewData:function(){var t=this.getVariable("indicatorUtils").getTileTitleSubtitle(this.getVariable("chip"));this.getView().getModel().setData({fractionValue:34,value:100,size:b.Auto,frameType:"OneByOne",color:"Good",state:L.Loading,header:t.title||this.getVariable("indicatorUtils").getChipTitle(this.getVariable("evalData")),subheader:t.subTitle||this.getVariable("indicatorUtils").getChipSubTitle(this.getVariable("evalData"))});},loadActualData:function(){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.getVariable("cache").setEvaluationById(this.getVariable("chipId"),this.getVariable("evalData"));this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}},registerOpenODataRequest:function(k,r){this._oDataRequests[k]=r;},deregisterOpenODataRequest:function(k){delete this._oDataRequests[k];},abortAllOpenODataRequests:function(){for(var c in this._oDataRequests){try{this.getVariable("indicatorUtils").abortPendingODataCalls(this._oDataRequests[c]);delete this._oDataRequests[c];}catch(e){}}},fetchKpiValue:function(p){function m(o,u,C,S,j){var D=o.read(u,null,null,true,function(l){t.deregisterOpenODataRequest(C.type);if(l&&l.results&&l.results.length){try{if(C.thresholds&&C.thresholds.length){t._setThresholdValues(l.results[0]);}k[C.type]=l.results[0][C.measure];k.unit=k.unit||l.results[0][C.unit]||"";if(--h==0){t.getVariable("cache").setKpivalueById(t.getVariable("chipId"),k);S.call(t,k);}}catch(e){t.logError(e);}}else{j.call(t,"no data");}},function(e){t.deregisterOpenODataRequest(C.type);if(e&&e.response){j.call(t,e.message);}});t.registerOpenODataRequest(C.type,D);}var t=this;var i=this.getVariable("indicatorUtils");var c=this.getVariable("cache").getKpivalueById(this.getVariable("chipId"));if(c){p.fnS.call(t,c);}else{var M=p.measure1,s=p.measure2;var u=p.url,E=p.entitySet;var v=p.filters;var f=p.fractionFilters.concat(v);var q,Q;var d,g,k;var h=2;f.forEach(function(e){e.value=e.value+"";e.valueTo=e.valueTo+"";});if(p.thresholds&&p.thresholds.length){q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M+","+p.thresholds,null,v);}else{q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,M,null,v);}Q=i.prepareQueryServiceUri(this.getVariable("chip").url.addSystemToServiceUrl(u),E,s,null,f);d=q.unit[0];g=Q.unit[0];k={kpiValue:null,fractionValue:null,unit:""};if(q){m(q.model,q.uri,{measure:M,type:"kpiValue",unit:d,thresholds:p.thresholds},p.fnS,p.fnE);}if(Q){m(Q.model,Q.uri,{measure:s,type:"fractionValue",unit:g},p.fnS,p.fnE);}if(!(q&&Q)){p.fnE.call(t,"Error Preparing Query Service URI");}}},_setThresholdValues:function(d){var t=this.getVariable("oThreshold"),e;if(t){if(this.getVariable("evalData").EVALUATION.VALUES_SOURCE=="RELATIVE"){if(t.TA.COLUMN_NAME){t.TA.VALUE=parseFloat(d[t.TA.COLUMN_NAME]);for(e in t){if(!t[e].COLUMN_NAME){t[e].VALUE=t.TA.VALUE*t[e].VALUE/100;}}}}else{for(e in t){if(t[e].COLUMN_NAME){t[e].VALUE=parseFloat(d[t[e].COLUMN_NAME]);}}}}this.setVariable("oThreshold",t);},getThresholdObject:function(){var t=this.getVariable("oThreshold");if(!t){var T=this.getVariable("evalData").EVALUATION_VALUES;t={};for(var i=0,l=T.length;i<l;i++){t[T[i].TYPE]={VALUE:parseFloat(T[i].FIXED),COLUMN_NAME:T[i].COLUMN_NAME};}this.setVariable("oThreshold",t);}return t;},hasSomeValue:function(){var f=true;if(arguments.length){for(var i=0,l=arguments.length;i<l;i++){if(!(arguments[i]||arguments[i]=="0")){f=false;break;}}}else{f=false;}return f;},getTrendColor:function(k){var c="Neutral";var t,g,W,d,C,e;if(this.getVariable("tileProperties").isFractionMeasure){t=this.getThresholdObject();g=this.getVariable("evalData").EVALUATION.GOAL_TYPE;if(g=="MA"){W=t.WL;C=t.CL;if(this.hasSomeValue(W,C)){c="Good";if(k<C.VALUE){c="Error";}else if(k<=W.VALUE){c="Critical";}}}else if(g=="MI"){d=t.WH;e=t.CH;if(this.hasSomeValue(d,e)){c="Error";if(k<d.VALUE){c="Good";}else if(k<=e.VALUE){c="Critical";}}}else{W=t.WL;C=t.CL;d=t.WH;e=t.CH;if(this.hasSomeValue(d,e,C,W)){if(k<=C.VALUE||k>=d.VALUE){c="Error";}else if((W.VALUE>=k&&k>=C.VALUE)||(e.VALUE>=k&&k>=d.VALUE)){c="Critical";}else{c="Good";}}}}return I[c];},_getThresholdMeasures:function(){var t=[];var T=this.getThresholdObject();for(var e in T){if(T[e].COLUMN_NAME){t.push(T[e].COLUMN_NAME);}}return t;},onEvalFiltersFetched:function(){var t=this;if(this.getVariable("chip").visible.isVisible()&&!this.getVariable("hasAppeared")){try{var k=this.getVariable("evalData");var u=k.EVALUATION.ODATA_URL;var E=k.EVALUATION.ODATA_ENTITYSET;var c=this.getVariable("tileProperties");var h=[];var v=this.getVariable("indicatorUtils").prepareFilterStructure(k.EVALUATION_FILTERS,k.ADDITIONAL_FILTERS);var f=k.EVALUATION.COLUMN_NAME;var d=f;var g=[];if(c.isFractionMeasure){d=c.harveyTotalMeasure;g=this._getThresholdMeasures();}else{h=this.getVariable("indicatorUtils").prepareFilterStructure(c.harveyFilters||h);}this.setVariable("totalMeasure",d);this.setVariable("fractionMeasure",f);this.fetchKpiValue({measure1:d,measure2:f,entitySet:E,thresholds:g,url:u,filters:v,fractionFilters:h,fnS:function(i){i.kpiValue=Number(i.kpiValue);i.fractionValue=Number(i.fractionValue);t.setVariable("kpiValue",i.kpiValue);t.setVariable("fractionValue",i.fractionValue);t.onKpiValueFetched(i.kpiValue,i.unit,i.fractionValue);},fnE:this.logError});t.setVariable("hasAppeared",true);}catch(e){this.logError(e);}}},fetchEvalFilters:function(s){var t=this;try{var c=this.getVariable("cache").getEvaluationById(this.getVariable("chipId"));if(c){this.getVariable("evalData").EVALUATION_FILTERS=c.EVALUATION_FILTERS;s();}else{var d=this.getVariable("indicatorUtils").getFilterFromRunTimeService(this.getVariable("evalData"),function(f){t.deregisterOpenODataRequest("kpiFilterRequest");t.getVariable("evalData").EVALUATION_FILTERS=f;t.getVariable("cache").setEvaluationById(t.getVariable("chipId"),t.getVariable("evalData"));s.call(t);},function(e){this.logError(e);t.deregisterOpenODataRequest("kpiFilterRequest");});this.registerOpenODataRequest("kpiFilterRequest",d);}}catch(e){this.logError(e);}},onKpiValueFetched:function(k,d,f,e){var i=this.getVariable("indicatorUtils");var s=k;var g=f;var h=this.getVariable("evalData");var j=h.EVALUATION.SCALING;if(j==-2){s*=100;g*=100;}var c=this.isACurrencyMeasure(this.getVariable("totalMeasure"));s=i.getLocaleFormattedValue(Number(s),j,null,c,d);c=this.isACurrencyMeasure(this.getVariable("fractionMeasure"));g=i.getLocaleFormattedValue(Number(g),j,null,c,d);this.getView().getModel().setProperty("/totalLabel",s+" "+d);this.getView().getModel().setProperty("/fractionLabel",g+" "+e);this.getView().getModel().setProperty("/color",this.getTrendColor(f));this.getView().getModel().setProperty("/value",k);this.getView().getModel().setProperty("/fractionValue",f);var n=i.getNavigationTarget(this.getVariable("evalData"),this.getVariable("system"));this.getVariable("tile").$().wrap("<a href ='"+n+"'></a>");this.getVariable("tile").setState(L.Loaded);},logError:function(e){this.getVariable("tile").setState(L.Failed);this.getVariable("indicatorUtils").logError(e,this.getVariable("tile"));},onVisible:function(){if(!this.getVariable("hasAppeared")){if(Number(this.getVariable("chip").configuration.getParameterValueAsString("isSufficient"))){this.onEvalFiltersFetched();}else{this.fetchEvalFilters(this.onEvalFiltersFetched);}}},onExit:function(){this.abortAllOpenODataRequests();}});});
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/oData4Analytics',["sap/ui/model/odata/ODataModel","sap/ui/model/FilterOperator","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/core/Core"],function(O,F,c,S){"use strict";sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics||{};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants={};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE="http://www.sap.com/Protocols/SAPData";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.VERSION="0.7";sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper={renderPropertyKeyValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case"Edm.String":return"'"+f+"'";case"Edm.DateTime":return"datetime'"+f+"'";case"Edm.Guid":return"guid'"+f+"'";case"Edm.Time":return"time'"+f+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+f+"'";default:return f;}},renderPropertyFilterValue:function(f,p){if(f.charAt(0)=="'"){throw"Illegal property value starting with a quote";}switch(p){case"Edm.String":return"'"+f+"'";case"Edm.DateTime":return"datetime'"+f+"'";case"Edm.Guid":return"guid'"+f+"'";case"Edm.Time":return"time'"+f+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+f+"'";default:return f;}},tokenizeNametoLabelText:function(n){var l="";l=n.replace(/([^A-Z0-9_]+)([A-Z0-9_])/g,"$1 $2");l=l.replace(/([A-Z0-9_]{2,})([A-Z0-9_])([^A-Z0-9_]+)/g,"$1 $2$3");l=l.replace(/(.*) _E$/,"$1");l=l.replace(/(.*) _(.*)/g,"$1 $2");return l;}};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model=function(m,a){this._init(m,a);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByURI=function(u){return{sServiceURI:u};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceByModel=function(m){return{oModel:m};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.ReferenceWithWorkaround=function(m,w){return{oModelReference:m,aWorkaroundID:w};};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Model.prototype={_init:function(m,a){this._oActivatedWorkarounds={};if(m&&m.aWorkaroundID){var w=m.aWorkaroundID;for(var i=0;i<w.length;i++){this._oActivatedWorkarounds[w[i]]=true;}m=m.oModelReference;}if(!m||(!m.sServiceURI&&!m.oModel)){throw"Usage with oModelReference being an instance of Model.ReferenceByURI or Model.ReferenceByModel";}if(m.oModel){this._oModel=m.oModel;}else{this._oModel=new O(m.sServiceURI);}if(this._oModel.getServiceMetadata().dataServices==undefined){throw"Model could not be loaded";}this.mergeV2Annotations(a);this._oQueryResultSet={};this._oParameterizationSet={};this._oEntityTypeSet={};this._oEntitySetSet={};this._oEntityTypeNameToEntitySetMap={};var s=this._oModel.getServiceMetadata().dataServices.schema[0];var C;for(i=-1,C;C=s.entityContainer[++i];){if(C.isDefaultEntityContainer=="true"){this._oDefaultEntityContainer=C;break;}}var e=s.entityType;var q=[],p=[],u=[];var j;for(i=-1,t;t=e[++i];){var P=false;if(t.extensions!=undefined){var E;for(j=-1;E=t.extensions[++j];){if(E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE&&E.name=="semantics"){P=true;switch(E.value){case"aggregate":q.push(t);break;case"parameters":p.push(t);break;default:u.push(t);}}if(P){continue;}}if(!P){u.push(t);}}else{u.push(t);}}for(i=-1,t;t=u[++i];){var o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;}var f={};for(i=-1,t;t=p[++i];){o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;b=this._getEntitySetsOfType(s,o.getQName());if(b.length==0){throw"Invalid consumption model: No entity set for entity type annotated with parameters semantics";}if(b.length>1){throw"Unsupported consumption model: More than one entity set for entity type annotated with parameters semantics";}d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var g=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization(o,d);this._oParameterizationSet[g.getName()]=g;f[o.getQName()]=g;var h=o.getQName();if(s.association!=undefined){var A;for(j=-1;A=s.association[++j];){if(A.referentialConstraint==undefined){continue;}var k=null;if(A.end[0].type==h&&A.end[0].multiplicity=="*"&&A.end[1].multiplicity=="1"){k=A.end[1].type;}else if(A.end[1].type==h&&A.end[1].multiplicity=="*"&&A.end[0].multiplicity=="1"){k=A.end[0].type;}if(!k){continue;}if(A.referentialConstraint.dependent.propertyRef.length!=1){continue;}var l=g.findParameterByName(A.referentialConstraint.dependent.propertyRef[0].name);if(l==null){continue;}var v=this._oEntityTypeSet[k];var V=this._oEntityTypeNameToEntitySetMap[k];l.setValueSetEntity(v,V);}}}var t;for(i=-1,t;t=q[++i];){o=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType(this._oModel.getServiceMetadata(),s,t);this._oEntityTypeSet[o.getQName()]=o;var Q=o.getQName();g=null;var n=null;if(s.association!=undefined){for(j=-1,A;A=s.association[++j];){var r=null;if(A.end[0].type==Q){r=A.end[1].type;}else if(A.end[1].type==Q){r=A.end[0].type;}else{continue;}var M=null;M=f[r];if(M!=null){if(g!=null){throw"RESTRICTION: Unable to handle multiple parameter entity types of query entity "+o.name;}else{g=M;n=A;}}}}b=this._getEntitySetsOfType(s,o.getQName());if(b.length!=1){throw"Invalid consumption model: There must be exactly one entity set for an entity type annotated with aggregating semantics";}d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet(this._oModel.getServiceMetadata(),s,b[0][0],b[0][1]);this._oEntitySetSet[d.getQName()]=d;this._oEntityTypeNameToEntitySetMap[o.getQName()]=d;var x=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult(this,o,d,g);this._oQueryResultSet[x.getName()]=x;if(g){g.setTargetQueryResult(x,n);}}},oUI5ODataModelAnnotatableObject:{objectName:"schema",keyPropName:"namespace",extensions:true,aSubObject:[{objectName:"entityType",keyPropName:"name",extensions:true,aSubObject:[{objectName:"property",keyPropName:"name",aSubObject:[],extensions:true}]},{objectName:"entityContainer",keyPropName:"name",extensions:false,aSubObject:[{objectName:"entitySet",keyPropName:"name",extensions:true,aSubObject:[]}]}]},mergeV2Annotations:function(a){try{var A=JSON.parse(a);}catch(e){return;}var m;try{m=this._oModel.getServiceMetadata().dataServices;}catch(e){return;}for(var p in A){if(!(this.oUI5ODataModelAnnotatableObject.objectName===p)){continue;}if(!(A[p]instanceof Array)){continue;}this.mergeV2AnnotationLevel(m[this.oUI5ODataModelAnnotatableObject.objectName],A[this.oUI5ODataModelAnnotatableObject.objectName],this.oUI5ODataModelAnnotatableObject);break;}return;},mergeV2AnnotationLevel:function(M,a,u){for(var i=-1,A;A=a[++i];){for(var j=-1,o;o=M[++j];){if(!(A[u.keyPropName]==o[u.keyPropName])){continue;}if(A.extensions!=undefined){if(o.extensions==undefined){o.extensions=[];}for(var l=-1,b;b=A.extensions[++l];){var f=false;for(var m=-1,d;d=o.extensions[++m];){if(b.name==d.name&&b.namespace==d.namespace){d.value=b.value;f=true;break;}}if(!f){o.extensions.push(b);}}}for(var k=-1,U;U=u.aSubObject[++k];){for(var p in A){if(!(U.objectName==p)){continue;}if(!(A[U.objectName]instanceof Array)){continue;}if((o[U.objectName]==undefined)||(!(o[U.objectName]instanceof Array))){continue;}this.mergeV2AnnotationLevel(o[U.objectName],A[U.objectName],U);break;}}}}return;},findQueryResultByName:function(n){var q=this._oQueryResultSet[n];if(!q&&this._oDefaultEntityContainer){var Q=this._oDefaultEntityContainer.name+"."+n;q=this._oQueryResultSet[Q];}return q;},getAllQueryResultNames:function(){if(this._aQueryResultNames){return this._aQueryResultNames;}this._aQueryResultNames=new Array(0);for(var n in this._oQueryResultSet){this._aQueryResultNames.push(this._oQueryResultSet[n].getName());}return this._aQueryResultNames;},getAllQueryResults:function(){return this._oQueryResultSet;},getODataModel:function(){return this._oModel;},_getEntitySetsOfType:function(s,q){var e=[];for(var i=-1,E;E=s.entityContainer[++i];){for(var j=-1,o;o=E.entitySet[++j];){if(o.entityType==q){e.push([E,o]);}}}return e;},_oModel:null,_oDefaultEntityContainer:null,_aQueryResultNames:null,_oQueryResultSet:null,_oParameterizationSet:null,_oEntityTypeSet:null,_oEntitySetSet:null,_oEntityTypeNameToEntitySetMap:null,_oActivatedWorkarounds:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult=function(m,e,E,p){this._init(m,e,E,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResult.prototype={_init:function(m,e,E,p,a){this._oModel=m;this._oEntityType=e;this._oEntitySet=E;this._oParameterization=p;this._oDimensionSet={};this._oMeasureSet={};var P=e.getTypeDescription().property;var A={};for(var i=-1,o;o=P[++i];){if(o.extensions==undefined){continue;}for(var j=-1,b;b=o.extensions[++j];){if(!b.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(b.name){case"aggregation-role":switch(b.value){case"dimension":var d=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension(this,o);this._oDimensionSet[d.getName()]=d;break;case"measure":var M=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure(this,o);this._oMeasureSet[M.getName()]=M;break;case"totaled-properties-list":this._oTotaledPropertyListProperty=o;break;}break;case"attribute-for":var D=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute(this,o);A[D.getKeyProperty()]=D;break;}}}for(var s in A){D=A[s];D.getDimension().addAttribute(D);}if(m._oActivatedWorkarounds.IdentifyTextPropertiesByName){var f=[];for(var g in this._oDimensionSet){d=this._oDimensionSet[g];if(!d.getTextProperty()){var t=null;t=e.findPropertyByName(g+"Name");if(!t){t=e.findPropertyByName(g+"Text");}if(!t){t=e.findPropertyByName(g+"Desc");}if(!t){t=e.findPropertyByName(g+"Description");}if(t){d.setTextProperty(t);f.push(t.name);}}}var h;for(i=-1,h;h=f[++i];){delete this._oDimensionSet[h];}}},getName:function(){return this.getEntitySet().getQName();},getParameterization:function(){return this._oParameterization;},getAllDimensionNames:function(){if(this._aDimensionNames){return this._aDimensionNames;}this._aDimensionNames=[];for(var n in this._oDimensionSet){this._aDimensionNames.push(this._oDimensionSet[n].getName());}return this._aDimensionNames;},getAllDimensions:function(){return this._oDimensionSet;},getAllMeasureNames:function(){if(this._aMeasureNames){return this._aMeasureNames;}this._aMeasureNames=[];for(var n in this._oMeasureSet){this._aMeasureNames.push(this._oMeasureSet[n].getName());}return this._aMeasureNames;},getAllMeasures:function(){return this._oMeasureSet;},findDimensionByName:function(n){return this._oDimensionSet[n];},getTotaledPropertiesListProperty:function(){return this._oTotaledPropertyListProperty;},findMeasureByName:function(n){return this._oMeasureSet[n];},getModel:function(){return this._oModel;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oModel:null,_oEntityType:null,_oEntitySet:null,_oParameterization:null,_aDimensionNames:null,_oDimensionSet:null,_aMeasureNames:null,_oMeasureSet:null,_oTotaledPropertyListProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization=function(e,E){this._init(e,E);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameterization.prototype={_init:function(e,E){this._oEntityType=e;this._oEntitySet=E;this._oParameterSet={};var p=e.getTypeDescription().property;for(var i=-1,P;P=p[++i];){if(P.extensions==undefined){continue;}for(var j=-1,o;o=P.extensions[++j];){if(!o.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(o.name){case"parameter":var a=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter(this,P);this._oParameterSet[a.getName()]=a;break;}}}},setTargetQueryResult:function(q,a){this._oQueryResult=q;var Q=this._oEntityType.getSchema().namespace+"."+a.name;var n=this._oEntityType.getTypeDescription().navigationProperty;if(!n){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}for(var i=-1,N;N=n[++i];){if(N.relationship==Q){this._oNavPropToQueryResult=N.name;}}if(!this._oNavPropToQueryResult){throw"Invalid consumption model: Parameters entity type lacks navigation property for association to query result entity type";}},getName:function(){return this.getEntitySet().getQName();},getAllParameterNames:function(){if(this._aParameterNames){return this._aParameterNames;}this._aParameterNames=[];for(var n in this._oParameterSet){this._aParameterNames.push(this._oParameterSet[n].getName());}return this._aParameterNames;},getAllParameters:function(){return this._oParameterSet;},findParameterByName:function(n){return this._oParameterSet[n];},getNavigationPropertyToQueryResult:function(){return this._oNavPropToQueryResult;},getEntityType:function(){return this._oEntityType;},getEntitySet:function(){return this._oEntitySet;},_oEntityType:null,_oEntitySet:null,_oQueryResult:null,_oNavPropToQueryResult:null,_aParameterNames:null,_oParameterSet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter=function(p,P){this._init(p,P);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Parameter.prototype={_init:function(p,P){this._oParameterization=p;this._oProperty=P;var e=p.getEntityType();if(P.extensions!=undefined){for(var i=-1,E;E=P.extensions[++i];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"parameter":switch(E.value){case"mandatory":this._bRequired=true;break;case"optional":this._bRequired=false;break;default:throw"Invalid annotation value for parameter property";}break;case"label":this._sLabelText=E.value;break;case"text":this._oTextProperty=e.findPropertyByName(E.value);break;case"upper-boundary":this._bIntervalBoundaryParameter=true;this._oUpperIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;case"lower-boundary":this._bIntervalBoundaryParameter=true;this._oLowerIntervalBoundaryParameterProperty=e.findPropertyByName(E.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},setValueSetEntity:function(e,E){this._oValueSetEntityType=e;this._oValueSetEntitySet=E;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},isOptional:function(){return(!this._bRequired);},isIntervalBoundary:function(){return this._bIntervalBoundaryParameter;},isLowerIntervalBoundary:function(){return(!!this._oUpperIntervalBoundaryParameterProperty);},getPeerIntervalBoundaryParameter:function(){var p=null;if(this._oLowerIntervalBoundaryParameterProperty){p=this._oLowerIntervalBoundaryParameterProperty.name;}else{p=this._oUpperIntervalBoundaryParameterProperty.name;}if(!p){throw"Parameter is not an interval boundary";}return this._oParameterization.findParameterByName(p);},isValueSetAvailable:function(){return(!!this._oValueSetEntityType);},getName:function(){return this._oProperty.name;},getProperty:function(){return this._oProperty;},getContainingParameterization:function(){return this._oParameterization;},getURIToValueEntitySet:function(s){var u=null;u=(s||"")+"/"+this._oValueSetEntitySet.getQName();return u;},_oParameterization:null,_oProperty:null,_sLabelText:null,_oTextProperty:null,_bRequired:false,_bIntervalBoundaryParameter:false,_oLowerIntervalBoundaryParameterProperty:null,_oUpperIntervalBoundaryParameterProperty:null,_oValueSetEntityType:null,_oValueSetEntitySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Dimension.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;this._oAttributeSet={};if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"super-ordinate":this._sSuperOrdinatePropertyName=e.value;break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},setTextProperty:function(t){this._oTextProperty=t;},getLabelText:function(){if(!this._sLabelText&&this._oQueryResult._oModel._oActivatedWorkarounds.CreateLabelsFromTechnicalNames){this._sLabelText=sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.tokenizeNametoLabelText(this.getName());}return this._sLabelText;},getSuperOrdinateDimension:function(){if(!this._sSuperOrdinatePropertyName){return null;}return this._oQueryResult.findDimensionByName(this._sSuperOrdinatePropertyName);},getHierarchy:function(){if(!this._oHierarchy){this._oHierarchy=this._oQueryResult.getEntityType().getHierarchy(this._oProperty.name);}return this._oHierarchy;},getAllAttributeNames:function(){if(this._aAttributeNames){return this._aAttributeNames;}this._aAttributeNames=[];for(var n in this._oAttributeSet){this._aAttributeNames.push(this._oAttributeSet[n].getName());}return this._aAttributeNames;},getAllAttributes:function(){return this._oAttributeSet;},findAttributeByName:function(n){return this._oAttributeSet[n];},addAttribute:function(d){this._oAttributeSet[d.getName()]=d;},getContainingQueryResult:function(){return this._oQueryResult;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sSuperOrdinatePropertyName:null,_aAttributeNames:null,_oAttributeSet:null,_oHierarchy:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionAttribute.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"attribute-for":this._sDimensionName=e.value;break;case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;}}}},getName:function(){return this._oProperty.name;},getKeyProperty:function(){return this._oProperty;},getTextProperty:function(){return this._oTextProperty;},getLabelText:function(){return this._sLabelText;},getDimension:function(){return this._oQueryResult.findDimensionByName(this._sDimensionName);},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_sDimensionName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure=function(q,p){this._init(q,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.Measure.prototype={_init:function(q,p){this._oQueryResult=q;this._oProperty=p;if(p.extensions!=undefined){for(var i=-1,e;e=p.extensions[++i];){if(!e.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(e.name){case"label":this._sLabelText=e.value;break;case"text":this._oTextProperty=q.getEntityType().findPropertyByName(e.value);break;case"unit":this._oUnitProperty=q.getEntityType().findPropertyByName(e.value);break;}}}if(!this._sLabelText){this._sLabelText="";}},getName:function(){return this._oProperty.name;},getRawValueProperty:function(){return this._oProperty;},getFormattedValueProperty:function(){return this._oTextProperty;},getUnitProperty:function(){return this._oUnitProperty;},getLabelText:function(){return this._sLabelText;},_oQueryResult:null,_oProperty:null,_oTextProperty:null,_sLabelText:null,_oUnitProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet=function(m,s,C,e){this._init(m,s,C,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntitySet.prototype={_init:function(m,s,C,e){this._oEntitySet=e;this._oContainer=C;this._oSchema=s;this._oModel=m;if(s.entityContainer.length>1){this._sQName=C.name+"."+e.name;}else{this._sQName=e.name;}},getQName:function(){return this._sQName;},getSetDescription:function(){return this._oEntitySet;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntitySet:null,_oContainer:null,_oSchema:null,_oModel:null,_sQName:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.EntityType.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._oPropertySet={};this._aFilterablePropertyNames=[];this._aSortablePropertyNames=[];this._aRequiredFilterPropertyNames=[];this._sQName=s.namespace+"."+e.name;var r={};var R=null;for(var i=-1,p;p=e.property[++i];){this._aFilterablePropertyNames.push(p.name);this._aSortablePropertyNames.push(p.name);if(p.extensions==undefined){continue;}for(var j=-1,E;E=p.extensions[++j];){if(!E.namespace==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.constants.SAP_NAMESPACE){continue;}switch(E.name){case"filterable":if(E.value=="false"){this._aFilterablePropertyNames.pop(p.name);}break;case"sortable":if(E.value=="false"){this._aSortablePropertyNames.pop(p.name);}break;case"required-filter":if(E.value=="true"){this._aRequiredFilterPropertyNames.push(p.name);}break;case"hierarchy-node-for":if(!(R=r[p.name])){R=r[p.name]={};}R.dimensionName=E.value;break;case"hierarchy-parent-node-for":case"hierarchy-parent-nod":if(!(R=r[E.value])){R=r[E.value]={};}R.parentNodeIDProperty=p;break;case"hierarchy-level-for":if(!(R=r[E.value])){R=r[E.value]={};}R.levelProperty=p;break;case"hierarchy-drill-state-for":case"hierarchy-drill-stat":if(!(R=r[E.value])){R=r[E.value]={};}R.drillStateProperty=p;break;}}this._oPropertySet[p.name]=p;}this._oRecursiveHierarchySet={};for(var h in r){var H=r[h];var o=this._oPropertySet[h];var d=this._oPropertySet[H.dimensionName];if(d==null){d=o;}this._oRecursiveHierarchySet[d.name]=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy(e,o,H.parentNodeIDProperty,H.levelProperty,d);}},findPropertyByName:function(n){return this._oPropertySet[n];},getFilterablePropertyNames:function(){return this._aFilterablePropertyNames;},getSortablePropertyNames:function(){return this._aSortablePropertyNames;},getRequiredFilterPropertyNames:function(){return this._aRequiredFilterPropertyNames;},getAllHierarchyPropertyNames:function(){if(this._aHierarchyPropertyNames){return this._aHierarchyPropertyNames;}this._aHierarchyPropertyNames=[];for(var n in this._oRecursiveHierarchySet){this._aHierarchyPropertyNames.push(this._oRecursiveHierarchySet[n].getNodeValueProperty().name);}return this._aHierarchyPropertyNames;},getHierarchy:function(n){if(this._oRecursiveHierarchySet[n]==undefined){return null;}return this._oRecursiveHierarchySet[n];},getQName:function(){return this._sQName;},getTypeDescription:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_sQName:null,_oPropertySet:null,_aFilterablePropertyNames:null,_aRequiredFilterPropertyNames:null,_aHierarchyPropertyNames:null,_oRecursiveHierarchySet:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy=function(e,n,p,N,o){this._init(e,n,p,N,o);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.RecursiveHierarchy.prototype={_init:function(e,n,p,N,o){this._oEntityType=e;this._oNodeIDProperty=n;this._oParentNodeIDProperty=p;this._oNodeLevelProperty=N;this._oNodeValueProperty=o;},isRecursiveHierarchy:function(){return true;},isLeveledHierarchy:function(){return false;},getNodeIDProperty:function(){return this._oNodeIDProperty;},getParentNodeIDProperty:function(){return this._oParentNodeIDProperty;},getNodeLevelProperty:function(){return this._oNodeLevelProperty;},getNodeValueProperty:function(){return this._oNodeValueProperty;},_oNodeIDProperty:null,_oParentNodeIDProperty:null,_oNodeLevelProperty:null,_oNodeValueProperty:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aFilterCondition=[];},clear:function(){this._aFilterCondition=[];},addCondition:function(p,o,v,V){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}this._aFilterCondition.push({property:P,op:o,val1:v,val2:V});return this._aFilterablePropertyNames;},addSetCondition:function(p,v){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add filter condition for unknown property name "+p;}var f=this._oEntityType.getFilterablePropertyNames();if(f.indexOf(p)===-1){throw"Cannot add filter condition for not filterable property name "+p;}for(var i=-1,V;V=v[++i];){this._aFilterCondition.push({property:P,op:F.EQ,val1:V});}return this._aFilterablePropertyNames;},getExpressionAsUI5FilterArray:function(){var f=[];for(var i=-1,C;C=this._aFilterCondition[++i];){f.push(new c(C.property.name,C.op,C.val1,C.val2));}return f;},getURIFilterOptionValue:function(){if(this._aFilterCondition.length==0){return"";}this._aFilterCondition.sort(function(a,b){if(a.property.name==b.property.name){return 0;}if(a.property.name>b.property.name){return 1;}return-1;});var p=this._aFilterCondition[0].property.name;var o="";var s="";for(var i=-1,C;C=this._aFilterCondition[++i];){if(p!=C.property.name){o+=(o==""?"":" and ")+"("+s+")";s="";p=C.property.name;}switch(C.op){case F.BT:s+=(s==""?"":" or ")+"("+C.property.name+" "+F.GE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val1,C.property.type)+" and "+C.property.name+" "+F.LE.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val2,C.property.type)+")";break;default:s+=(s==""?"":" or ")+"("+C.property.name+" "+C.op.toLowerCase()+" "+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyFilterValue(C.val1,C.property.type)+")";}}o+=(o==""?"":" and ")+"("+s+")";return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aFilterCondition:null};sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder={Ascending:"asc",Descending:"desc"};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression=function(m,s,e){this._init(m,s,e);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression.prototype={_init:function(m,s,e){this._oEntityType=e;this._oSchema=s;this._oModel=m;this._aSortCondition=[];},_containsSorter:function(p){var r=null;for(var i=-1,C;C=this._aSortCondition[++i];){if(C.property.name===p){r={sorter:C,index:i};break;}}return r;},_removeFromArray:function(a,f,t){var r=a.slice((t||f)+1||a.length);a.length=f<0?a.length+f:f;return a.push.apply(a,r);},clear:function(){this._aSortCondition=[];},addSorter:function(p,s){var P=this._oEntityType.findPropertyByName(p);if(P==null){throw"Cannot add sort condition for unknown property name "+p;}if(this._containsSorter(p)!=null){throw"Sort condition for this property name is already defined "+p;}var a=this._oEntityType.getSortablePropertyNames();if(a.indexOf(p)===-1){throw"Cannot add sort condition for not sortable property name "+p;}this._aSortCondition.push({property:P,order:s});return this;},removeSorter:function(p){if(!p){return;}var s=this._containsSorter(p);if(s){this._removeFromArray(this._aSortCondition,s.index);}},getExpressionsAsUI5SorterArray:function(){var s=[];for(var i=-1,C;C=this._aSortCondition[++i];){s.push(new S(C.property.name,C.order==sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortOrder.Descending));}return s;},getExpressionAsUI5Sorter:function(){var s=this.getExpressionsAsUI5SorterArray();if(s.length==0){return null;}return s[0];},getURIOrderByOptionValue:function(){if(this._aSortCondition.length==0){return"";}var o="";for(var i=-1,C;C=this._aSortCondition[++i];){o+=C.property.name+" "+C.order;if(i<this._aSortCondition.length-1){o+=", ";}}return o;},getEntityType:function(){return this._oEntityType;},getSchema:function(){return this._oSchema;},getModel:function(){return this._oModel;},_oEntityType:null,_oSchema:null,_oModel:null,_aSortCondition:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterizationRequest.prototype={_init:function(p){if(!p){throw"No parameterization given";}this._oParameterization=p;this._oParameterValueAssignment=[];},getParameterization:function(){return this._oParameterization;},setParameterValue:function(p,v,t){var P=this._oParameterization.findParameterByName(p);if(!P){throw"Invalid parameter name "+p;}if(t!=null){if(!P.isIntervalBoundary()){throw"Range value cannot be applied to parameter "+p+" accepting only single values";}if(!P.isLowerIntervalBoundary()){throw"Range value given, but parameter "+p+" does not hold the lower boundary";}}if(!P.isIntervalBoundary()){if(v==null){delete this._oParameterValueAssignment[p];}else{this._oParameterValueAssignment[p]=v;}}else{if(v==null&&t!=null){throw"Parameter "+p+": An upper boundary cannot be given without the lower boundary";}if(v==null){delete this._oParameterValueAssignment[p];t=null;}else{this._oParameterValueAssignment[p]=v;}var u=P.getPeerIntervalBoundaryParameter();if(t==null){t=v;}if(v==null){delete this._oParameterValueAssignment[u.getName()];}else{this._oParameterValueAssignment[u.getName()]=t;}}return;},getURIToParameterizationEntitySet:function(s){return(s||"")+"/"+this._oParameterization.getEntitySet().getQName();},getURIToParameterizationEntry:function(s){var d=this._oParameterization.getAllParameters();for(var D in d){if(this._oParameterValueAssignment[D]==undefined){throw"Parameter "+D+" has no value assigned";}}var k="",f=true;for(var p in this._oParameterValueAssignment){k+=(f?"":",")+p+"="+sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.helper.renderPropertyKeyValue(this._oParameterValueAssignment[p],d[p].getProperty().type);f=false;}return(s||"")+"/"+this._oParameterization.getEntitySet().getQName()+"("+k+")";},_oParameterization:null,_oParameterValueAssignment:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest=function(q){this._init(q);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.QueryResultRequest.prototype={_init:function(q,p){this._oQueryResult=q;this._oParameterizationRequest=p;this._oAggregationLevel={};this._oMeasures={};this._bIncludeEntityKey=false;this._oFilterExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},getQueryResult:function(){return this._oQueryResult;},setAggregationLevel:function(d){this._oAggregationLevel={};if(!d){d=this._oQueryResult.getAllDimensionNames();}this.addToAggregationLevel(d);},addToAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}this._oAggregationLevel[D]={key:true,text:false,attributes:null};}},removeFromAggregationLevel:function(d){if(!d){return;}for(var i=-1,D;D=d[++i];){if(!this._oQueryResult.findDimensionByName(D)){throw D+" is not a valid dimension name";}if(this._oAggregationLevel[D]!=undefined){delete this._oAggregationLevel[D];this.getSortExpression().removeSorter(D);}}},getAggregationLevel:function(){var d=[];for(var D in this._oAggregationLevel){d.push(D);}return d;},getAggregationLevelDetails:function(d){if(this._oAggregationLevel[d]==undefined){throw"Aggregation level does not include dimension "+d;}return this._oAggregationLevel[d];},setMeasures:function(m){if(!m){m=this._oQueryResult.getAllMeasureNames();}this._oMeasures={};for(var i=-1,M;M=m[++i];){if(!this._oQueryResult.findMeasureByName(M)){throw M+" is not a valid measure name";}this._oMeasures[M]={value:true,text:false,unit:false};}},getMeasureNames:function(){var m=[];for(var M in this._oMeasures){m.push(M);}return m;},includeDimensionKeyTextAttributes:function(d,I,b,a){var D=[];if(d){if(this._oAggregationLevel[d]==undefined){throw d+" is not included in the aggregation level";}D.push(d);}else{for(var n in this._oAggregationLevel){D.push(n);}a=null;}for(var i=-1,s;s=D[++i];){if(I!=null){this._oAggregationLevel[s].key=I;}if(b!=null){this._oAggregationLevel[s].text=b;}if(a!=null){this._oAggregationLevel[s].attributes=a;}}},includeMeasureRawFormattedValueUnit:function(m,I,b,a){var M=[];if(m){if(this._oMeasures[m]==undefined){throw m+" is not part of the query result";}M.push(m);}else{for(var n in this._oMeasures){M.push(n);}}for(var i=-1,s;s=M[++i];){if(I!=null){this._oMeasures[s].value=I;}if(b!=null){this._oMeasures[s].text=b;}if(a!=null){this._oMeasures[s].unit=a;}}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oQueryResult.getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},setRequestOptions:function(i,I){if(i){this._bIncludeEntityKey=i;}if(I){this._bIncludeCount=I;}},setResultPageBoundaries:function(s,e){if(s!=null&&typeof s!=="number"){throw"Start value must be null or numeric";}if(e!==null&&typeof e!=="number"){throw"End value must be null or numeric";}if(s==null){s=1;}if(s<1||s>(e==null?s:e)){throw"Invalid values for requested page boundaries";}this._iSkipRequestOption=(s>1)?s:null;this._iTopRequestOption=(e!=null)?(e-s+1):null;},getResultPageBoundaries:function(){var s,e;if(this._iSkipRequestOption==null){s=1;e=1;}else{s=this._iSkipRequestOption;e=this._iSkipRequestOption+this._iTopRequestOption;}return{start:s,end:(this._iTopRequestOption!=null)?e:null};},getURIToQueryResultEntitySet:function(s){var u=null;if(this._oQueryResult.getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{u=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oQueryResult.getParameterization().getNavigationPropertyToQueryResult();}}else{u=(s||"")+"/"+this._oQueryResult.getEntitySet().getQName();}return u;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="",i;for(var d in this._oAggregationLevel){var D=this._oQueryResult.findDimensionByName(d);var o=this._oAggregationLevel[d];if(o.key==true){s+=(s==""?"":",")+D.getKeyProperty().name;}if(o.text==true&&D.getTextProperty()){s+=(s==""?"":",")+D.getTextProperty().name;}if(o.attributes){var a;for(i=-1;a=o.attributes[++i];){s+=(s==""?"":",")+D.findAttributeByName(a).getName();}}}for(var m in this._oMeasures){var M=this._oQueryResult.findMeasureByName(m);var b=this._oMeasures[m];if(b.value==true){s+=(s==""?"":",")+M.getRawValueProperty().name;}if(b.text==true&&M.getFormattedValueProperty()){s+=(s==""?"":",")+M.getFormattedValueProperty().name;}if(b.unit==true&&M.getUnitProperty()){s+=(s==""?"":",")+M.getUnitProperty().name;}}if(this._bIncludeEntityKey){var k=this._oQueryResult.getEntityType().getTypeDescription().key.propertyRef,K;for(i=-1;K=k[++i];){s+=(s==""?"":",")+K.name;}}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var e=null;if(this._oSortExpression){e=this._oSortExpression.getURIOrderByOptionValue();}Q=(e||null);break;}case"$top":{if(this._iTopRequestOption!==null){Q=this._iTopRequestOption;}break;}case"$skip":{Q=this._iSkipRequestOption;break;}default:break;}return Q;},getURIToQueryResultEntries:function(s){var r=this.getURIToQueryResultEntitySet(s);var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var t=this.getURIQueryOptionValue("$top");var d=this.getURIQueryOptionValue("$skip");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}if(this._iTopRequestOption&&t){if(!q){u+="?";q=true;}else{u+="&";}u+="$top="+t;}if(this._iSkipRequestOption&&d){if(!q){u+="?";q=true;}else{u+="&";}u+="$skip="+d;}if(this._bIncludeCount){if(!q){u+="?";q=true;}else{u+="&";}u+="$inlinecount=allpages";}return u;},_oQueryResult:null,_oParameterizationRequest:null,_oAggregationLevel:null,_oMeasures:null,_bIncludeEntityKey:null,_bIncludeCount:null,_oFilterExpression:null,_oSortExpression:null,_iSkipRequestOption:0,_iTopRequestOption:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest=function(p){this._init(p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.ParameterValueSetRequest.prototype={_init:function(p){this._oParameter=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},includeParameterText:function(i){if(i!=null){this._oValueSetResult.text=i;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oParameter.getContainingParameterization().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oParameter.getProperty().name;if(this._oValueSetResult.text==true&&this._oParameter.getTextProperty()){s+=(s==""?"":",")+this._oParameter.getTextProperty().name;}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var a=null;if(this._oSortExpression){a=this._oSortExpression.getURIOrderByOptionValue();}Q=(a||null);break;}default:break;}return Q;},getURIToParameterValueSetEntries:function(s){var r=null;r=(s||"")+"/"+this._oParameter.getContainingParameterization().getEntitySet().getQName();var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}return u;},_oParameter:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest=function(d,p){this._init(d,p);};
sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.DimensionMemberSetRequest.prototype={_init:function(d,p){this._oDimension=d;this._oParameterizationRequest=p;this._oValueSetResult={};this._oFilterExpression=null;this._oSortExpression=null;},setParameterizationRequest:function(p){this._oParameterizationRequest=p;},includeDimensionTextAttributes:function(i,a){if(i!=null){this._oValueSetResult.text=i;}if(a!=null){this._oValueSetResult.attributes=a;}},getFilterExpression:function(){if(this._oFilterExpression==null){var e=this._oDimension.getContainingQueryResult().getEntityType();this._oFilterExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.FilterExpression(e.getModel(),e.getSchema(),e);}return this._oFilterExpression;},setFilterExpression:function(f){this._oFilterExpression=f;},getSortExpression:function(){if(this._oSortExpression==null){var e=this._oQueryResult.getEntityType();this._oSortExpression=new sap.ushell.components.tiles.indicatorTileUtils.odata4analytics.SortExpression(e.getModel(),e.getSchema(),e);}return this._oSortExpression;},setSortExpression:function(s){this._oSortExpression=s;},hasMasterDataAvailable:function(){return false;},getURIQueryOptionValue:function(q){var Q=null;switch(q){case"$select":{var s="";s+=(s==""?"":",")+this._oDimension.getKeyProperty().name;if(this._oValueSetResult.text==true&&this._oDimension.getTextProperty()){s+=(s==""?"":",")+this._oDimension.getTextProperty().name;}if(this._oValueSetResult.attributes){for(var i=-1,a;a=this._oValueSetResult.attributes[++i];){s+=(s==""?"":",")+this._oDimension.findAttributeByName(a).getName();}}Q=(s||null);break;}case"$filter":{var f=null;if(this._oFilterExpression){f=this._oFilterExpression.getURIFilterOptionValue();}Q=(f||null);break;}case"$orderby":{var b=null;if(this._oSortExpression){b=this._oSortExpression.getURIOrderByOptionValue();}Q=(b||null);break;}default:break;}return Q;},getURIToDimensionMemberEntries:function(s){var r=null;if(this._oDimension.getContainingQueryResult().getParameterization()){if(!this._oParameterizationRequest){throw"Missing parameterization request";}else{r=this._oParameterizationRequest.getURIToParameterizationEntry(s)+"/"+this._oDimension.getContainingQueryResult().getParameterization().getNavigationPropertyToQueryResult();}}else{r=(s||"")+"/"+this._oDimension.getContainingQueryResult().getEntitySet().getQName();}var a=this.getURIQueryOptionValue("$select");var f=this.getURIQueryOptionValue("$filter");var b=this.getURIQueryOptionValue("$orderby");var u=r;var q=false;if(a){u+="?$select="+a;q=true;}if(this._oFilterExpression&&f){if(!q){u+="?";q=true;}else{u+="&";}u+="$filter="+f;}if(this._oSortExpression&&b){if(!q){u+="?";q=true;}else{u+="&";}u+="$orderby="+b;}return u;},_oDimension:null,_oParameterizationRequest:null,_oFilterExpression:null,_oSortExpression:null,_oValueSetResult:null};return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil',["sap/ui/model/FilterOperator","sap/ui/model/analytics/odata4analytics","sap/ui/core/format/NumberFormat","sap/ui/model/odata/ODataModel","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing"],function(F,o,N,O,L,q,U,a){"use strict";var P=o.ParameterizationRequest;var Q=o.QueryResultRequest;var R=o.Model.ReferenceByModel;var M=o.Model;sap=sap||{};sap.ushell=sap.ushell||{};sap.ushell.components=sap.ushell.components||{};sap.ushell.components.tiles.indicatorTileUtils=sap.ushell.components.tiles.indicatorTileUtils||{};sap.ushell.components.tiles.indicatorTileUtils.util=sap.ushell.components.tiles.indicatorTileUtils.util||{};sap.ushell.components.tiles.indicatorTileUtils.util=(function(g,$){var c={},t={"ANN":"years","WEE":"weeks","DAY":"days","HUR":"hours","MIN":"minutes"},b={},f={};return{getScheduledJob:function(k){return b[k];},setScheduledJob:function(k,d){b[k]=d;},isCallInProgress:function(k){return f[k];},setUnsetCallInProgress:function(k,v){f[k]=v;},getTimeUnitMap:function(){return t;},getHanaUser:function(){return authObject.userName;},addSystemToServiceUrl:function(u,s){L.info("Hana Adapter --> Add System to Service Url");if(sap.ushell&&sap.ushell.Container){if(s){u=new a("URLParsing").addSystemToServiceUrl(u,s);}else{u=new a("URLParsing").addSystemToServiceUrl(u);}}return u;},getODataModelByServiceUri:function(s){s=this.addSystemToServiceUrl(s);if(!c[s]){var m=new O(s,{loadMetadataAsync:true,json:true});c[s]=m;}return c[s];},getEdmType:function(u,p){var d=null;if(u instanceof O){d=u;}else{d=this.getODataModelByServiceUri(u);}if(d&&d.getServiceMetadata()){var s=d.getServiceMetadata();var e=s.dataServices.schema[0].entityType;if(e){for(var i=0;i<e.length;i++){var h=e[i];var k=h.property;for(var j=0;j<k.length;j++){var l=k[j];if(l.name==p){return l.type;}}}}}return null;},getMillisecond:function(d,u){var r;switch(u){case"seconds":r=d*1000;break;case"minutes":r=d*60*1000;break;case"hours":r=d*60*60*1000;break;case"days":r=d*24*60*60*1000;break;case"weeks":r=d*7*24*60*60*1000;break;case"months":r=d*4*7*24*60*60*1000;break;case"years":r=d*12*4*7*24*60*60*1000;break;}return r;},getUTCDate:function(){var n=new Date();return n;},isCacheValid:function(d,e,h,i,j){var k=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(d);if(!k){return false;}else if(!(h&&Number(h))){return true;}var l=this.getMillisecond(h,t[i]),m;if(q.type(k.CachedTime)=="date"){m=k.CachedTime&&k.CachedTime.getTime();}else{m=k.CachedTime&&parseInt(k.CachedTime.substr(6),10);}var n=this.getUTCDate();return(m>=e&&l>=(n-m)&&!j);},getMantissaLength:function(n){var s=n.toString();var i=0;if(n<0){i=1;}if(s.indexOf(".")===-1){return(n<0?s.length-1:s.length);}return s.substring(i,s.indexOf(".")).length;},getLocaleFormattedValue:function(n,s,d,i,e){sap.ui.require("sap.ui.core.format.NumberFormat");i=i||false;e=e||null;if(i){return N.getCurrencyInstance({style:"short",showMeasure:false}).format(n,e);}var D=2;var h={style:"short"};var j;if(!(d==-1||d==null)){h.shortDecimals=Number(d);h.minFractionDigits=Number(d);h.maxFractionDigits=Number(d);}var v=N.getInstance(h);if(s==-2){if(n>9999){j="????";}else if((n>-0.001&&n<0)||(n<0.001&&n>0)){j="0";}else{if(n.toString().indexOf(".")!=-1){j=Number(n).toFixed(4-n.toString().indexOf("."));}else{j=Number(n);}j=v.format(j);}}else if(d==-1||d==null){var m=this.getMantissaLength(n);if(!(m%3)){D=1;}if(m%3===1){D=3;}if(m%3===2){D=2;}if(Math.abs(n)%Math.pow(10,m-1)==0){D=0;}else if((Math.abs(n)%Math.pow(10,m-1))<6*Math.pow(10,m-4)){D=0;}v=N.getInstance({style:"short",shortDecimals:D});j=v.format(n);}else{j=v.format(n);}return j;},getPlatform:function(p){return(new U(window.location.href).get("sb_metadata")||p||"HANA").toUpperCase();},getTileTitleSubtitle:function(C){var d={};if(C.bag&&C.bag.getBagIds()&&C.bag.getBagIds().length){d.title=C.bag.getBag("sb_tileProperties").getText("title")||C.bag.getBag("sb_tileProperties").getProperty("title")||C.preview.getTitle();d.subTitle=C.bag.getBag("sb_tileProperties").getText("description")||C.bag.getBag("sb_tileProperties").getProperty("description")||C.preview.getDescription();}else{d.title=C.preview.getTitle();d.subTitle=C.preview.getDescription();}return d;},scheduleFetchDataJob:function(i){var d;if(this.getView().getViewName().indexOf("DualTile")!==-1){d=this.oKpiTileView.oConfig;}else{d=this.oConfig;}var k=d.TILE_PROPERTIES.id+"data";var r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k);if(r){clearTimeout(r);r=undefined;}var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeUnitMap(),e=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTime(d),h=sap.ushell.components.tiles.indicatorTileUtils.util.getCachingTimeUnit(d),j=sap.ushell.components.tiles.indicatorTileUtils.util.getMillisecond(e,t[h]),l;if(q.type(this.cacheTime)=="date"){l=this.cacheTime;}else{l=new Date(parseInt(this.cacheTime.substr(6),10));}var m=j-(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-l);if(m<=0){m=0;}else if(m>2147483646){m=2147483646;}if(!i){m=300000;}if(this.getView().getViewName().indexOf("DualTile")!==-1){r=setTimeout(this.refreshPress.bind(this),m);}else{r=setTimeout(this.refreshHandler.bind(this,false,true),m);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);}this.updateDatajobScheduled=true;},scheduleTimeStampJob:function(){var k=this.oConfig.TILE_PROPERTIES.id+"time",r=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(k),d;if(r){clearTimeout(r);r=undefined;}if(q.type(this.cacheTime)=="date"){d=this.cacheTime;}else{d=new Date(parseInt(this.cacheTime.substr(6),10),13);}var e=sap.ushell.components.tiles.indicatorTileUtils.util.getTimeDifference(sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate()-d);r=setTimeout(this.setTimeStamp.bind(this,this.cacheTime),e.timer);sap.ushell.components.tiles.indicatorTileUtils.util.setScheduledJob(k,r);this.updateTimeStampjobScheduled=true;},getBoolValue:function(v){var r=false;if(typeof v==="boolean"&&v){r=true;}return r;},getSeconds:function(d){return(d/1000);},getMinutes:function(d){return(this.getSeconds(d)/60);},getHours:function(d){return(this.getMinutes(d)/60);},getDays:function(d){return(this.getHours(d)/24);},getWeeks:function(d){return(this.getDays(d)/7);},getMonths:function(d){return(this.getWeeks(d)/4);},getYears:function(d){return(this.getMonths(d)/12);},getTimeDifference:function(d){var r={};if(d){var m=this.getMinutes(d);var h=this.getHours(d);var e=this.getDays(d);if(m<5){r.time=0;r.unit="minutes";r.timer=Math.round(this.getMillisecond(5-m,"minutes"));}else if(m>=5&&m<60){if(m<10){r.time=5;}else{r.time=(m-(m%10));}r.unit="minutes";r.timer=Math.round(this.getMillisecond(10-(m%10),"minutes"));}else if(h>=1&&h<24){r.unit="hours";r.time=(h-(h%1));r.timer=Math.round(this.getMillisecond(1-(h%1),"hours"));}else if(e>=1&&e<2){r.unit="days";r.time=(e-(e%1));r.timer=Math.round(this.getMillisecond(1-(e%1),"days"));}else{r.unit="days";r.time=(e-(e%1));r.timer=this.getMillisecond(2,"days");}}else{r.timer=6000;r.unit="days";r.timer=2000;}return r;},getCachingTime:function(C){return((C.CACHINGTIME&&Number(C.CACHINGTIME))||(C.TILE_PROPERTIES.cachingTime&&Number(C.TILE_PROPERTIES.cachingTime)));},getCachingTimeUnit:function(C){return(C.CACHINGUNIT||C.TILE_PROPERTIES.cachingTimeUnit);},getFrontendCacheQuery:function(d,u,p,T){var e;try{var h=T.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV");h=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(h);e=this.getODataModelByServiceUri(h);h="/CacheParameters(P_CacheType=1)/Results";return{oModel:e,uri:h};}catch(i){L.error("FrontEnd cache Metadata failed");return null;}},isDualTile:function(C){var d=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType;if(d.indexOf("DT-")==-1){return false;}return true;},writeFrontendCacheByChipAndUserId:function(T,d,e,u,h){var s=function(e){L.info("cache write successFully");h(e);};var i=function(){L.error("cache update failed");h(null);};try{var j=T.url.addSystemToServiceUrl("/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV/");j=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(j);var k=this.getODataModelByServiceUri(j);var l="/CacheData";k.create(l,e,{async:true,success:s,error:i});}catch(m){L.error(m);}},getKpiChipsOnPage:function(d,e){var h=[];sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getGroups().done(function(G){if(G&&G instanceof Array&&G.length){L.info("Group Chip fetch");}e(d,h);});});},getFrontendCache:function(C,T){var d=this;var e=sap.ushell.components.tiles.indicatorTileUtils.cache.getFrontEndCacheDeferredObject(T.url.getApplicationSystem());var h;if(e){h=e;}else{h=q.Deferred();}var i=C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.id;var j=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(i);if(j){e.resolve(true);}else if(e){return e.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setFrontEndCacheDefferedObject(T.url.getApplicationSystem(),h);e=h;this.getKpiChipsOnPage(i,function(i,p){if(p){var k=d.getFrontendCacheQuery(p,sap.ushell.Container.getUser().getId(),p,T);if(k){var l=k.oModel;var m=k.uri;var n=false;l.read(m,null,null,true,function(r){if(r&&r.results&&r.results instanceof Array&&r.results.length){q.each(r.results,function(s,u){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(u.ChipId,u);});}if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(i)){n=true;}e.resolve(n);},function(r){if(r&&r.response){L.error(r.message+" : "+r.request.requestUri);}e.reject();});}else{e.reject();}}else{e.resolve(false);}});}return e.promise();},getModelerRuntimeServiceModel:function(){var u="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);return this.getODataModelByServiceUri(u);},getSapFontErrorCode:function(){return String.fromCharCode(0xe0b1);},getSapFontBusyCode:function(){return String.fromCharCode(0xe1f2);},prepareFilterStructure:function(d,e){var v=[];if(e){d=d.concat(e);}for(var i=0;i<d.length;i++){var p={};p.comparator=d[i].OPERATOR;p.filterPropertyName=d[i].NAME;if(d[i].ID){p.id=d[i].ID;}p.type=d[i].TYPE;p.value=d[i].VALUE_1;p.valueTo=d[i].VALUE_2;v.push(p);}return v;},getODataModelByServiceUriFromChipAPI:function(s,T){s=T.url.addSystemToServiceUrl(s);if(!c[s]){var m=new O(s,true);c[s]=m;}return c[s];},cacheBustingMechanism:function(u){if(window["sap-ushell-config"].cacheBusting.cacheBusterToken){var d=window["sap-ushell-config"].cacheBusting&&window["sap-ushell-config"].cacheBusting.cacheBusterToken;u=u+"?_="+d;}return u;},getRunTimeUri:function(p){var u="/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata";var d="/sap/opu/odata/SSB/SMART_BUSINESS_RUNTIME_SRV";if(p.toUpperCase()=="HANA"){if(window["sap-ushell-config"].cacheBusting){u=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(u);}return u;}if(window["sap-ushell-config"].cacheBusting){d=sap.ushell.components.tiles.indicatorTileUtils.util.cacheBustingMechanism(d);}return d;},getFilterFromRunTimeService:function(C,T,s,e){var p=C.TILE_PROPERTIES.sb_metadata;var K=this.getODataModelByServiceUriFromChipAPI(this.getRunTimeUri(p),T);var d="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",C.EVALUATION.ID);var k=K.read("/EVALUATION_FILTERS",null,{"$filter":d},true,function(h){var i=[];if(h.results.length){i=h.results;}s.call(this,i);},e);return k;},_getOData4AnalyticsObject:function(u){var m=null;if(u instanceof O){m=u;}else if(typeof u==="string"){m=this.getODataModelByServiceUri(u);}else{throw new Error("Invalid Input to Create ODataModel Object : "+u);}var d=new M(R(m));return d;},findTextPropertyForDimension:function(u,d,h){try{var i=this._getOData4AnalyticsObject(u);var j=i.findQueryResultByName(d);var D=j.findDimensionByName(h);if(D.getTextProperty()){return D.getTextProperty().name;}return h;}catch(e){L.error("Error Fetching Text Property for "+h+" : "+e.toString());}},getEvalValueMeasureName:function(C,d,r){var e=C.EVALUATION_VALUES;for(var i=0;i<e.length;i++){if(e[i].TYPE==d){if(r==="FIXED"){return e[i].FIXED;}return e[i].COLUMN_NAME;}}},getSemanticColorName:function(d){var s="";if(d=="Error"){s="sb.error";}if(d=="Neutral"){s="sb.neutral";}if(d=="Critical"){s="sb.critical";}if(d=="Good"){s="sb.good";}return s;},setTooltipInTile:function(C,d,v){var e="";var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();if(d=="NT"||d=="DT"){if(v.status){e+=r.getText("sb.status")+": "+r.getText(v.status)+"\n";}if(v.actual){e+=r.getText("sb.actual")+": "+v.actual+"\n";}if(v.target){e+=r.getText("sb.target")+": "+v.target+"\n";}if(v.cH){e+=r.getText("sb.ch")+": "+v.cH+"\n";}if(v.wH){e+=r.getText("sb.wh")+": "+v.wH+"\n";}if(v.wL){e+=r.getText("sb.wl")+": "+v.wL+"\n";}if(v.cL){e+=r.getText("sb.cl")+": "+v.cL+"\n";}}if(d=="CONT"||d=="COMP"){if(v.measure&&d=="CONT"){if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile[1]==="asc"){e+=r.getText("sb.bottomn")+": "+v.contributionTile[0]+"\n";}else if(v&&v.contributionTile.contributionTile&&v.contributionTile.contributionTile.length){e+=r.getText("sb.topn")+": "+v.contributionTile[0]+"\n";}}if(v.m1&&((v.v1==undefined||v.v1==null)?false:v.v1.toString())&&v.c1){e+=v.m1+": "+v.v1+" "+r.getText(v.c1)+"\n";}if(v.m2&&((v.v2==undefined||v.v2==null)?false:v.v2.toString())&&v.c2){e+=v.m2+": "+v.v2+" "+r.getText(v.c2)+"\n";}if(v.m3&&((v.v3==undefined||v.v3==null)?false:v.v3.toString())&&v.c3){e+=v.m3+": "+v.v3+" "+r.getText(v.c3)+"\n";}}if(C&&C.setTooltip){C.setTooltip(e);}},_getFormattedTileProperties:function(d){d=d||{};var p=["sb_metadata","sb_navigation","sb_catalog"];var e=false;for(var i=0;!e&&i<p.length;i++){e=e||new U(window.location.href).get(p[i])||d[p[i]];}d.sb_metadata=(new U(window.location.href).get("sb_metadata")||d.sb_metadata||"HANA").toLowerCase();d.sb_navigation=(new U(window.location.href).get("sb_navigation")||d.sb_navigation||"abap").toLowerCase();d.sb_catalog=(new U(window.location.href).get("sb_catalog")||d.sb_catalog||"HANA").toLowerCase();d.isPlatformInfoPresent=e;return d;},getEvaluationDetailsFromRunTimeService:function(e,p,i,d){var K=this.getODataModelByServiceUri(this.getRunTimeUri(p));var h="ID eq '#EVALUATIONID'".replace("#EVALUATIONID",i);K.read(e,null,{"$filter":h},true,function(j){var k=[];if(j.results.length){k=j.results;}d.call(this,k);});},getParsedChip:function(C,i,d){try{var p={};var e=JSON.parse(C);var h=JSON.parse(e.TILE_PROPERTIES).evaluationId||"";if(e.TILE_PROPERTIES){var j=JSON.parse(e.TILE_PROPERTIES);if(j&&(j.instanceId||j.catalogId)){return false;}}var k=this;if(e.blankTile){p.BLANKTILE=e.blankTile;}if(e.cachingTime){p.CACHINGTIME=e.cachingTime;}if(e.cachingTimeUnit){p.CACHINGUNIT=e.cachingTimeUnit;}if(e.TAGS){p.TAGS=JSON.parse(e.TAGS);}if(e.ADDITIONAL_FILTERS){p.ADDITIONAL_FILTERS=JSON.parse(e.ADDITIONAL_FILTERS);}if(e.ADDITIONAL_APP_PARAMETERS){p.ADDITIONAL_APP_PARAMETERS=JSON.parse(e.ADDITIONAL_APP_PARAMETERS);}p.TILE_PROPERTIES=this._getFormattedTileProperties(JSON.parse(e.TILE_PROPERTIES));var s=p.TILE_PROPERTIES.sb_metadata;if(e.EVALUATION_FILTERS){p.EVALUATION_FILTERS=JSON.parse(e.EVALUATION_FILTERS);if(e.EVALUATION_VALUES){p.EVALUATION_VALUES=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else if(!i){k.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,h,function(m){p.EVALUATION=m;if(d){d(p);}else{return p;}});}else if(d){d(p);}else{return p;}}else if(!i){k.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",s,h,function(m){p.EVALUATION_VALUES=m;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{k.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,h,function(m){p.EVALUATION=m;if(d){d(p);}else{return p;}});}});}else if(d){d(p);}else{return p;}}else if(i){if(d){d(p);}else{return p;}}else{k.getEvaluationDetailsFromRunTimeService("/EVALUATION_FILTERS",s,h,function(m){p.EVALUATION_FILTERS=m;if(e.EVALUATION_VALUES){p.EVALUATION_VALUES=JSON.parse(e.EVALUATION_VALUES);if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{k.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,h,function(m){p.EVALUATION=m;if(d){d(p);}else{return p;}});}}else{k.getEvaluationDetailsFromRunTimeService("/EVALUATION_VALUES",s,h,function(m){p.EVALUATION_VALUES=m;if(e.EVALUATION){p.EVALUATION=JSON.parse(e.EVALUATION);if(d){d(p);}else{return p;}}else{k.getEvaluationDetailsFromRunTimeService("/EVALUATIONS",s,h,function(m){p.EVALUATION=m;if(d){d(p);}else{return p;}});}});}});}}catch(l){return false;}},getNavigationTarget:function(C,s){var d=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getServiceAsync;var e=d&&d("CrossApplicationNavigation").then(function(){var h;var p={};p.evaluationId=C.EVALUATION.ID;p.chipId=C.TILE_PROPERTIES.id;if(s){p["sap-system"]=s;}p.tileType=C.TILE_PROPERTIES.tileType;if(C.TILE_PROPERTIES.dimension){p.dimension=C.TILE_PROPERTIES.dimension;}if(C.TILE_PROPERTIES.storyId){p.storyId=C.TILE_PROPERTIES.storyId;}if(C.TILE_PROPERTIES.apfConfId){p["sap-apf-configuration-id"]=C.TILE_PROPERTIES.apfConfId;}if(C.TILE_PROPERTIES.isPlatformInfoPresent){p.sb_metadata=C.TILE_PROPERTIES.sb_metadata;p.sb_navigation=C.TILE_PROPERTIES.sb_navigation;p.sb_catalog=C.TILE_PROPERTIES.sb_catalog;}if(C.ADDITIONAL_APP_PARAMETERS){for(h in C.ADDITIONAL_APP_PARAMETERS){if(C.ADDITIONAL_APP_PARAMETERS.hasOwnProperty(h)){if(C.ADDITIONAL_APP_PARAMETERS[h].constructor==Array){var k=C.ADDITIONAL_APP_PARAMETERS[h];for(var i=0;i<k.length;i++){p[h]=k[i];}}else{p[h]=C.ADDITIONAL_APP_PARAMETERS[h];}}}}var l=e&&e.hrefForExternal({target:{semanticObject:C.TILE_PROPERTIES.semanticObject,action:C.TILE_PROPERTIES.semanticAction},params:p})||"";if(C.ADDITIONAL_FILTERS){var m=C.ADDITIONAL_FILTERS;var n="&";for(var j=0;j<m.length;j++){if(m[j].OPERATOR==="EQ"){n=n+"/"+m[j].NAME+"="+m[j].VALUE_1;}}l+=n;}return l;});},getChipTitle:function(C){var d="";if(C){var e=C.EVALUATION||{};d=e.INDICATOR_TITLE||"";}return d;},getstringifyTileConfig:function(C){var s={};s.EVALUATION=JSON.stringify(C.EVALUATION);s.EVALUATION_FILTERS=JSON.stringify(C.EVALUATION_FILTERS);s.EVALUATION_VALUES=JSON.stringify(C.EVALUATION_VALUES);s.TILE_PROPERTIES=JSON.stringify(C.TILE_PROPERTIES);return JSON.stringify(s);},getChipSubTitle:function(C){var T="";if(C){var d=C.EVALUATION||{};T=d.TITLE||"";}return T;},getAllMeasures:function(u,d){var m=[];try{var h=this._getOData4AnalyticsObject(u);var i=h.findQueryResultByName(d);m=i.getAllMeasureNames();}catch(e){L.error("Error Fetching All Measures : "+e.toString());}return m;},getFormattingMetadata:function(u,e,p){var d={};d._hasCurrency=false;d._hasSapText=false;var m=null;if(u instanceof O){m=R(u);}else{var h=this.getODataModelByServiceUri(u);m=R(h);}var j=new M(m);var k=j.findQueryResultByName(e);var l=k.getAllMeasures();if(l[p]){var s=(l[p]._oTextProperty&&l[p]._oTextProperty.name)?l[p]._oTextProperty.name:"";if(s!=""){d._hasSapText=true;d._sapTextColumn=s;}else if(l[p].hasOwnProperty("_oUnitProperty")){var n=l[p]._oUnitProperty.extensions;for(var i=0;i<l[p]._oUnitProperty.extensions.length;i++){if(n[i].name==="semantics"&&n[i].value==="currency-code"){d._hasCurrency=true;d._currencyColumn=l[p]._oUnitProperty.name;}}}}return d;},getAllDimensions:function(u,d){function i(n,p){var r=0,s=0;var v=[];while(r<n.length&&s<p.length){if(n[r]<p[s]){r++;}else if(n[r]>p[s]){s++;}else{v.push(n[r]);r++;s++;}}return v;}var h=[];var j=[];try{var k=this._getOData4AnalyticsObject(u);var l=k.findQueryResultByName(d);var m=l.getEntityType();j=m.getFilterablePropertyNames();h=l.getAllDimensionNames();if(j&&j.length){h=i(j.sort(),h.sort());}}catch(e){L.error("Error Fetching All Dimesions : "+e.toString());}return h;},prepareQueryServiceUri:function(u,d,m,h,v,n,p){function _(e1){return e1.replace(/'/g,"''");}var r=null;var s=function(){};var w=function(){};try{var x=null;if(u instanceof O){x=R(u);}else{var A=this.getODataModelByServiceUri(u);x=R(A);}var B=new M(x);var C=B.findQueryResultByName(d);var D=new Q(C);if(m){D.setMeasures(m.split(","));D.includeMeasureRawFormattedValueUnit(null,true,true,true);}if(h){if(typeof h==="string"){r=h;r=r.split(",");}for(var i=0;i<r.length;i++){D.addToAggregationLevel([r[i]]);var E=C.getAllDimensions();if(E[r[i]].getTextProperty()!=null){D.includeDimensionKeyTextAttributes([r[i]],true,true,null);}}}if(v&&v.length){var G=[];var H=[];var l;for(i=0,l=v.length;i<l;i++){var I=v[i];if(I.type==="PA"){H.push(I);}else if(I.type==="FI"){G.push(I);}}s=function(e1){var f1=e1.toJSON();var g1=f1.charAt(f1.length-1).toUpperCase();if(g1.charCodeAt(0)>=65&&g1.charCodeAt(0)<=90){f1=f1.slice(0,-1);}return f1;};w=function(e1){if(e1){try{if(e1==+e1){e1=window.parseInt(e1);}var f1=new Date(e1);var g1=f1.getTime();if(isNaN(g1)){return e1;}return s(f1);}catch(e){}}return e1;};if(G.length){var J=D.getFilterExpression();for(i=0,l=G.length;i<l;i++){I=G[i];if(this.getEdmType(u,I.filterPropertyName)=="Edm.DateTime"){I.value=w(I.value);I.valueTo=w(I.valueTo);}if(I.comparator==F.BT){J.addCondition(I.filterPropertyName,I.comparator,_(I.value),I.valueTo);}else{var K=I.value.split(",");for(var j=0,k=K.length;j<k;j++){J.addCondition(I.filterPropertyName,I.comparator,_(K[j].replace(/\^\|/g,",")),null);}}}}if(H.length){if(C.getParameterization()){var S=new P(C.getParameterization());var T=C.getParameterization();var V,W,X,Y,Z;for(var y=0,z=H.length;y<z;y++){V=H[y];W=T.findParameterByName(V.filterPropertyName);if(W.isIntervalBoundary()===true&&W.isLowerIntervalBoundary()===true){Z=W.getPeerIntervalBoundaryParameter();for(i=0,l=H.length;i<l;i++){if(H[i].filterPropertyName===Z.getName()){Y=_(H[i].value);break;}}X=_(V.value);if(Y){S.setParameterValue(V.filterPropertyName,X,Y);}}else if(W.isIntervalBoundary()===true&&W.isLowerIntervalBoundary()===false){L.info("Future development");}else{S.setParameterValue(V.filterPropertyName,_(V.value));}}D.setParameterizationRequest(S);}}}var a1=D.getURIToQueryResultEntries();if(n&&n.length){a1=a1+"&$orderby=";for(y=0,z=n.length;y<z;y++){var b1=n[y].sortOrder||"asc";if(b1){a1+=n[y].element+" "+b1+",";}}a1=a1.slice(0,a1.length-1);}if(p){a1=a1+"&$top="+p;}var c1=C.getAllMeasures();var d1=[];for(i=0;i<m.split(",").length;i++){d1.push(c1[m.split(",")[i]].getUnitProperty());}return{uri:a1,model:B.getODataModel(),unit:d1};}catch(e){L.error("Error Preparing Query Service Uri using OData4Analytics Library : "+e.toString());if(arguments.length){L.error("Arguments Passed to this function");L.error(arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]);}else{L.error("NO Arguments passed to this function");}return null;}},getAllEntitySet:function(u){var d=[];try{var h=this._getOData4AnalyticsObject(u);d=h.getAllQueryResultNames();}catch(e){L.error("Error fetching Enity Set : "+e.toString());}return d;},getAllMeasuresWithLabelText:function(u,d){var m=[];try{var h=this._getOData4AnalyticsObject(u);var j=h.findQueryResultByName(d);var k=j.getAllMeasureNames();for(var i=0;i<k.length;i++){var l=k[i];g.oMeasure=j.findMeasureByName(l);m.push({key:l,value:oMeasure.getLabelText()});}}catch(e){L.error("Error Fetching All Measures : "+e.toString());}return m;},getAllDimensionsWithLabelText:function(u,d){var h=[];try{var j=this._getOData4AnalyticsObject(u);var k=j.findQueryResultByName(d);var l=k.getAllDimensionNames();for(var i=0;i<l.length;i++){var m=l[i];var D=k.findDimensionByName(m);var n=null;if(D.getTextProperty()!=null){n=D.getTextProperty().name;}h.push({key:m,value:D.getLabelText(),textProperty:n});}}catch(e){L.error("Error Fetching All Dimesions : "+e.toString());}return h;},getAllInputParams:function(u,d){var i=[];try{var h=this._getOData4AnalyticsObject(u);var j=h.findQueryResultByName(d);if(j.getParameterization()){var p=j.getParameterization();i=p.getAllParameterNames();}}catch(e){L.error("Error Fetching Input Params : "+e.toString());}return i;},getAllInputParamsWithFlag:function(u,d){var h=[];try{var j=this._getOData4AnalyticsObject(u);var k=j.findQueryResultByName(d);if(k.getParameterization()){var p=k.getParameterization();var l=p.getAllParameterNames();for(var i=0;i<l.length;i++){var m=l[i];var n=p.findParameterByName(m);h.push({name:m,optional:n.isOptional()});}}}catch(e){L.error("Error Fetching Input Params : "+e.toString());}return h;},formatOdataObjectToString:function(v){if(v&&v.constructor==Object){if(v.__edmType=="Edm.Time"){var m=v.ms;var s=Math.floor((m/1000)%60);var d=Math.floor((m/60000)%60);var h=Math.floor((m/3600000)%24);return h+"H"+d+"M"+s+"S";}}return v;},generateCombinations:function(d){function e(j,s){while(s.length<j){s="0"+s;}return s;}var m=Math.pow(2,d.length);var r=[];var h=0;while(m>1){var s=(m-1).toString(2);s=e(d.length,s);r[h]=[];for(var i=0;i<s.length;i++){if(Number(s[i])){r[h].push(d[i]);}}m--;h++;}return r;},logError:function(e,C){if(e=="no data"&&C){var r=sap.ushell.components.tiles.utils.getResourceBundleModel().getResourceBundle();C.setFailedText(r.getText("sb.noData"));}L.error(e.toString());},numberOfLeadingZeros:function(n){n=String(n);var d=0;var e=n.indexOf(".");if(e==-1){return 0;}if(Number(n.split(".")[0])!=0){return 0;}var i=e+1;while(n[i++]=="0"){++d;}return d;},formatValue:function(v,s,d){d=d||3;var u={3:"K",6:"M",9:"B",12:"T",0:""};u["-3"]="m";u["-6"]="u";u["-9"]="n";u["-12"]="t";u["-2"]="%";var e,p,h;e=Number(v).toPrecision(d);var z=this.numberOfLeadingZeros(e);if(z>0&&s<0){p=e*Math.pow(10,z+d);h=-(z+d);}else{p=Number(e.split("e")[0]);h=Number(e.split("e")[1])||0;}if(!v&&v!=0){return{value:"",unitPrefix:""};}if(s>=0){if(h%3!=0){if(h%3==2){if(h+1==s){h=h+1;p=p/10;}else{h=h-2;p=p*100;}}else if(h+2==s){h=h+2;p=p/100;}else{h--;p=p*10;}}else if(h==15){p=p*1000;h=12;}}else if(s=="-2"){var x=this.formatValue((v*100),0);}else if(h>=0&&v<10&&s=="-3"){p=v*Math.pow(10,3);h=-3;}else if(h>=0){return this.formatValue(v,0);}else{h=Math.abs(h);s=Math.abs(s);if(s>h){p=p/(Math.pow(10,h%3));h=h-(h%3);}else{var i=h-s;p=p/(Math.pow(10,i));h=h-i;}h=0-h;}p+="";if(s=="-2"){var j=(x.unitPrefix=="")?Number(x.value+"").toFixed(4-(x.value+"").indexOf(".")):Number(x.value+"").toFixed(3-(x.value+"").indexOf("."));return{value:Number(j),unitPrefix:(x.unitPrefix)+u[-2]};}p=Number(p).toFixed(4-p.indexOf("."));return{value:Number(p),unitPrefix:u[h]};},isSmartbusinessChipAndCachable:function(d){var C=this.getParsedChip(d&&d.getConfigurationParameter("tileConfiguration"));return(C&&C.TILE_PROPERTIES&&C.TILE_PROPERTIES.tileType&&this.getCachingTime(C));},getHanaClient:function(){var e;var h=function(d,s,x){e=d.sessionClient;sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(e);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);};var i=function(d,l,m){L.error(d.responseText);L.error("session client call failed");sap.ushell.components.tiles.indicatorTileUtils.cache.setCacheHanaClient(null);sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.reject();};var j=sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED||q.Deferred();var k=sap.ushell.components.tiles.indicatorTileUtils.cache.getCacheHanaClient();if(k!=undefined){e=k;sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.resolve(e);}else if(sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED){return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();}else{sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED=j;q.ajax({type:"GET",async:false,dataType:"json",url:"/sap/hba/r/sb/core/logic/GetSessionClient.xsjs",success:h,error:i});}return sap.ushell.components.tiles.indicatorTileUtils.util.HANA_CLIENT_DEFERRED.promise();},abortPendingODataCalls:function(d){try{if(d){d.abort();}}catch(e){this.logError(e);}}};})(window,q);sap.ushell.components.tiles.indicatorTileUtils.cache=(function(){var B={};var K={};var s="HANA_CLIENT";return{getCacheHanaClient:function(){return B[s];},setCacheHanaClient:function(d){B[s]=d;},getEvaluationByChipId:function(k){if(B[k]){return B[k];}return null;},getEvaluationById:function(k){return this.getEvaluationByChipId(k);},setEvaluationById:function(k,d){B[k]=d;},getFrontEndCacheDeferredObject:function(k){if(B[k]){return B[k];}return null;},setFrontEndCacheDefferedObject:function(k,d){B[k]=d;},getKpivalueById:function(k){if(K[k]){return K[k];}return null;},setKpivalueById:function(k,d){K[k]=d;}};})();return{};},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.controller',["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(g,m,q,L){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var S=m.Size;var a=m.LoadState;var F=m.FrameType;
var C=g.extend("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,b,u){var f=[],e={},i,t,l;var h;var T=[];var j=this;var k=null;for(i=0;i<d.results.length;i++){var n=d.results[i];}T=sap.ushell.components.tiles.indicatorTileUtils.util.getAllMeasuresWithLabelText(this.oTileApi.url.addSystemToServiceUrl(this.oConfig.EVALUATION.ODATA_URL),this.oConfig.EVALUATION.ODATA_ENTITYSET);for(i=0,l=T.length;i<l;i++){t=T[i];e[t.key]=t.value;}var o=j.oConfig.TILE_PROPERTIES.COLUMN_NAMES||j.oConfig.EVALUATION.COLUMN_NAMES;for(i=0;i<o.length;i++){var p={};var r=o[i];p.value=Number(n[r.COLUMN_NAME]);var s=Number(n[r.COLUMN_NAME]);var v=false;var w=0;var x=j._getEvaluationThresholdMeasures();var I=x?Array.prototype.indexOf.call(x,r.COLUMN_NAME):-1;if(I>-1){v=true;w=j.oConfig.EVALUATION.SCALING;}if(j.oConfig.EVALUATION.SCALING==-2&&v){s*=100;}var c=j.isCurrencyMeasure(r.COLUMN_NAME);if(u&&u[i]&&n[u[i].name]){k=n[u[i].name];}h=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(s,w,j.oConfig.EVALUATION.SCALING,j.oConfig.EVALUATION.DECIMAL_PRECISION,c,k);if(j.oConfig.EVALUATION.SCALING==-2&&v){h+=" %";}p.displayValue=h.toString();if(u){if(u[i]&&n[u[i].name]){p.displayValue+=" "+n[u[i].name];}}p.color=r.semanticColor;p.title=e[r.COLUMN_NAME]||r.COLUMN_NAME;p.measure=r.COLUMN_NAME;p.isCurM=c;f.push(p);}return f;},
fetchChartData:function(r,b,s,E){function c(z,A){var B=false;if(z&&z.results&&z.results.length){for(var i=0,l=A.length;i<l&&!B;i++){B=z.results[0][A[i].COLUMN_NAME]!==null;}}return B;}var t=this;try{var d=this.oConfig.EVALUATION.ODATA_ENTITYSET;var f=this.oConfig.EVALUATION.COLUMN_NAME;var h=f,j;if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES){for(j=0;j<this.oConfig.TILE_PROPERTIES.COLUMN_NAMES.length;j++){if(this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){h=h+","+this.oConfig.TILE_PROPERTIES.COLUMN_NAMES[j].COLUMN_NAME;}}}else{for(j=0;j<this.oConfig.EVALUATION.COLUMN_NAMES.length;j++){if(this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME!=this.oConfig.EVALUATION.COLUMN_NAME){h=h+","+this.oConfig.EVALUATION.COLUMN_NAMES[j].COLUMN_NAME;}}}var k=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var n=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(n){var o=n.Data&&JSON.parse(n.Data);}}var p=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var u=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,p,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((o&&!o.rightData)||!n||(!u&&t.oTileApi.visible.isVisible())||k||(b&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var w=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,d,h,null,v,3);this.comparisionChartODataRef=w.model.read(w.uri,null,null,true,function(i){t.kpiValueFetchDeferred=true;var l={};if(w.unit){l.unit=w.unit;}if(c(i,t.oConfig.TILE_PROPERTIES.COLUMN_NAMES||t.oConfig.EVALUATION.COLUMN_NAMES)){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,h.split(",")[0],w.unit);l.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;var z={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();z.ChipId=t.oConfig.TILE_PROPERTIES.id;z.Data=JSON.stringify(l);z.CacheMaxAge=Number(t.chipCacheTime);z.CacheMaxAgeUnit=t.chipCacheTimeUnit;z.CacheType=1;var A=t.getLocalCache(z);t.updateDatajobScheduled=false;var B=t.oConfig.TILE_PROPERTIES.id+"data";var G=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(B);if(G){clearTimeout(G);G=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,A);var U=false;if(n){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,z,U,function(i){if(i){t.cacheTime=i&&i.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,i);t.setTimeStamp();}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var H=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),I;if(H){if(!H.CachedTime){H.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}I=H.Data;if(I){I=JSON.parse(I);I.rightData=l;}H.Data=JSON.stringify(I);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,H);}else{I={};I.rightData=l;A.Data=JSON.stringify(I);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,A);}t.cacheWriteData=l;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(i.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=i;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){l=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);l.data=i;}else{l.data=i;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,l);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(i){t.kpiValueFetchDeferred=true;if(i&&i.response){L.error(i.message+" : "+i.request.requestUri);E.call(t,i);}});}}else if(n&&n.Data){var x;var y=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(y.indexOf("DT-")==-1){x=n.Data&&JSON.parse(n.Data);}else{x=n.Data&&JSON.parse(n.Data);x=x.rightData;}t.cacheTime=n.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}if(x.data&&x.data.length){t.oConfig.TILE_PROPERTIES.FINALVALUE=x.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else{t.oConfig.TILE_PROPERTIES.FINALVALUE=x.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}}else{t.setNoData();}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==F.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(F.TwoByOne);t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());var c={};c.data=this.CALCULATED_KPI_VALUE;t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(F.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(a.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"COMP");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({value:8888,size:S.Auto,frameType:F.OneByOne,state:a.Loading,valueColor:V.Error,indicator:D.None,title:"Liquidity Structure",footer:"Current Quarter",description:"Apr 1st 2013 (B$)",data:[{title:"Measure 1",value:1.2,color:"Good"},{title:"Measure 2",value:0.78,color:"Good"},{title:"Measure 3",value:1.4,color:"Error"}]});this.oKpiTileView.oGenericTile.setState(a.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorcomparison/ComparisonTile.view',["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(J,o,s,C,a,G,b,M){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcomparison.ComparisonTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcomparison.ComparisonTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var S=M.Size;var t=this;t.oGenericTileData={};t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:S.Responsive,scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new b();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.controller',["sap/ushell/components/tiles/generic","sap/m/library","sap/ui/thirdparty/jquery","sap/base/Log"],function(g,m,q,L){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var S=m.Size;var a=m.LoadState;var F=m.FrameType;
var C=g.extend("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=false;},
_processDataForComparisonChart:function(d,b,f,u){var s=this.oConfig.TILE_PROPERTIES.semanticColorContribution;var h=[];var t;var j;for(var i=0;i<d.results.length;i++){var k=d.results[i];var l={};try{l.title=k[f].toString();}catch(e){l.title="";}l.value=Number(k[b]);var n=Number(k[b]);if(this.oConfig.EVALUATION.SCALING==-2){n*=100;}var c=this.isCurrencyMeasure(b);j=k[u];t=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(n,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,j);l.displayValue=t.toString();if(typeof s==="undefined"){l.color="Neutral";}else{l.color=s;}if(l&&u){l[u]=j;}h.push(l);}return h;},
fetchChartData:function(r,i,s,E){var t=this;try{var b=this.oConfig.EVALUATION.ODATA_ENTITYSET,c;t.setThresholdValues();if(this.oConfig.TILE_PROPERTIES.semanticMeasure){c=this.oConfig.EVALUATION.COLUMN_NAME+","+this.oConfig.TILE_PROPERTIES.semanticMeasure;}else{c=this.oConfig.EVALUATION.COLUMN_NAME;}var u=null;var d=this.oConfig.TILE_PROPERTIES.dimension;var f=sap.ushell.components.tiles.indicatorTileUtils.util.getBoolValue(r);var h=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);if(sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){if(h){var j=h.Data&&JSON.parse(h.Data);}}var k=t.oTileApi.configuration.getParameterValueAsString("timeStamp");var l=sap.ushell.components.tiles.indicatorTileUtils.util.isCacheValid(t.oConfig.TILE_PROPERTIES.id,k,t.chipCacheTime,t.chipCacheTimeUnit,t.tilePressed);if((j&&!j.rightData)||!h||(!l&&t.oTileApi.visible.isVisible())||f||(i&&t.oTileApi.visible.isVisible())||t.getView().getViewData().refresh){if(t.kpiValueFetchDeferred){t.kpiValueFetchDeferred=false;var v=sap.ushell.components.tiles.indicatorTileUtils.util.prepareFilterStructure(this.oConfig.EVALUATION_FILTERS,this.oConfig.ADDITIONAL_FILTERS);var o={};o["0"]=c+",asc";o["1"]=c+",desc";o["2"]=d+",asc";o["3"]=d+",desc";var n=o[this.oConfig.TILE_PROPERTIES.sortOrder||"0"].split(",");var p=sap.ushell.components.tiles.indicatorTileUtils.util.prepareQueryServiceUri(t.oRunTimeODataModel,b,c,d,v,3);if(this.oConfig.TILE_PROPERTIES.semanticMeasure){p.uri+="&$top=3&$orderby="+n[0]+" "+n[2];}else{p.uri+="&$top=3&$orderby="+n[0]+" "+n[1];}this.comparisionChartODataRef=p.model.read(p.uri,null,null,true,function(y){t.kpiValueFetchDeferred=true;var z={};if(y&&y.results&&y.results.length){if(p.unit[0]){t._updateTileModel({unit:y.results[0][p.unit[0].name]});u=p.unit[0].name;z.unit=p.unit[0];z.unit.name=p.unit[0].name;}d=sap.ushell.components.tiles.indicatorTileUtils.util.findTextPropertyForDimension(t.oRunTimeODataModel,b,d);z.dimension=d;t.oConfig.TILE_PROPERTIES.FINALVALUE=y;t.oConfig.TILE_PROPERTIES.FINALVALUE=t._processDataForComparisonChart(t.oConfig.TILE_PROPERTIES.FINALVALUE,c.split(",")[0],d,u);z.data=t.oConfig.TILE_PROPERTIES.FINALVALUE;z.isCurM=t.isACurrencyMeasure(t.oConfig.EVALUATION.COLUMN_NAME);var A={};t.cacheTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();A.ChipId=t.oConfig.TILE_PROPERTIES.id;A.Data=JSON.stringify(z);A.CacheMaxAge=Number(t.chipCacheTime);A.CacheMaxAgeUnit=t.chipCacheTimeUnit;A.CacheType=1;var B=t.getLocalCache(A);t.updateDatajobScheduled=false;var G=t.oConfig.TILE_PROPERTIES.id+"data";var H=sap.ushell.components.tiles.indicatorTileUtils.util.getScheduledJob(G);if(H){clearTimeout(H);H=undefined;}if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);var U=false;if(h){U=true;}if(t.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.writeFrontendCacheByChipAndUserId(t.oTileApi,t.oConfig.TILE_PROPERTIES.id,A,U,function(y){if(y){t.cacheTime=y&&y.CachedTime;sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,y);}if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}});}}else{var I=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id),J;if(I){if(!I.CachedTime){I.CachedTime=sap.ushell.components.tiles.indicatorTileUtils.util.getUTCDate();}J=I.Data;if(J){J=JSON.parse(J);if(t.oKpiTileView.getViewName()=="tiles.indicatornumeric.NumericTile"){J.leftData=z;}else{J.rightData=z;}}I.Data=JSON.stringify(J);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,I);}else{J={};J.rightData=z;B.Data=JSON.stringify(J);sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,B);}t.cacheWriteData=z;}s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(y.results.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=y;if(sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id)){z=sap.ushell.components.tiles.indicatorTileUtils.cache.getKpivalueById(t.oConfig.TILE_PROPERTIES.id);z.data=y;}else{z.data=y;}sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,z);s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{sap.ushell.components.tiles.indicatorTileUtils.cache.setKpivalueById(t.oConfig.TILE_PROPERTIES.id,{empty:"empty"});t.setNoData();}},function(y){t.kpiValueFetchDeferred=true;if(y&&y.response){L.error(y.message+" : "+y.request.requestUri);E.call(t,y);}});}}else if(h&&h.Data){var w;var x=t.oConfig&&t.oConfig.TILE_PROPERTIES&&t.oConfig.TILE_PROPERTIES.tileType;if(x.indexOf("DT-")==-1){w=h.Data&&JSON.parse(h.Data);}else{w=h.Data&&JSON.parse(h.Data);w=w.rightData;}t.cacheTime=h.CachedTime;if(t.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(t.oConfig)){q.proxy(t.setTimeStamp(t.cacheTime),t);}if(w.data&&w.data.length){if(w.unit){t._updateTileModel({unit:w.data[0][w.unit.name]});}d=w.dimension;t.oConfig.TILE_PROPERTIES.FINALVALUE=w.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);}else if(w&&w.data&&w.data instanceof Array&&w.data.length==0){t.oConfig.TILE_PROPERTIES.FINALVALUE=w.data;s.call(t,t.oConfig.TILE_PROPERTIES.FINALVALUE);t.setNoData();}else{t.setNoData();}}else{t.setNoData();}}catch(e){t.kpiValueFetchDeferred=true;E.call(t,e);}},
doProcess:function(r,i){var t=this;this.DEFINITION_DATA=this.oConfig;this._updateTileModel(this.DEFINITION_DATA);this.setTextInTile();this.fetchChartData(r,i,function(k){this.CALCULATED_KPI_VALUE=k;this._updateTileModel({data:this.CALCULATED_KPI_VALUE});if(t.oConfig.TILE_PROPERTIES.frameType==F.TwoByOne){t.oKpiTileView.oGenericTile.setFrameType(F.TwoByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());t.getView().getViewData().deferredObj.resolve();}else{t.oKpiTileView.oGenericTile.setFrameType(F.OneByOne);t.oKpiTileView.oGenericTile.removeAllTileContent();t.oKpiTileView.oGenericTile.addTileContent(t.oKpiTileView.oNVConfS);this.oKpiTileView.oGenericTile.setState(a.Loaded);}this.setToolTip(null,this.CALCULATED_KPI_VALUE,"CONT");if(this.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}},this.logError);},
doDummyProcess:function(){var t=this;t.setTextInTile();t._updateTileModel({value:8888,size:S.Auto,frameType:F.OneByOne,state:a.Loading,valueColor:V.Error,indicator:D.None,title:"US Profit Margin",footer:"Current Quarter",description:"Maximum deviation",data:[{title:"Americas",value:10,color:"Neutral"},{title:"EMEA",value:50,color:"Neutral"},{title:"APAC",value:-20,color:"Neutral"}]});this.oKpiTileView.oGenericTile.setState(a.Loaded);}
});
return C;});
sap.ui.predefine('sap/ushell/components/tiles/indicatorcontribution/ContributionTile.view',["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/microchart/ComparisonMicroChartData","sap/suite/ui/microchart/ComparisonMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel","sap/m/library"],function(J,o,s,C,a,G,b,M){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatorcontribution.ContributionTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatorcontribution.ContributionTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var S=M.Size;var t=this;t.oGenericTileData={};t.oCmprsDataTmpl=new C({title:"{title}",value:"{value}",color:"{color}",displayValue:"{displayValue}"});t.oCmprsChrtTmpl=new a({size:S.Responsive,scale:"{/scale}",data:{template:t.oCmprsDataTmpl,path:"/data"}});t.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerComp}",content:t.oCmprsChrtTmpl});t.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t.oNVConfS]});t.oGenericTileModel=new b();t.oGenericTileModel.setData(t.oGenericTileData);t.oGenericTile.setModel(t.oGenericTileModel);return t.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.controller',["sap/ushell/components/tiles/generic","sap/m/library"],function(g,m){"use strict";var V=m.ValueColor;var L=m.LoadState;var F=m.FrameType;
var D=g.extend("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;var f,b;f=t.targetValue;var d=Number(k);this.setThresholdValues();if(this.oConfig.EVALUATION.SCALING==-2){d*=100;}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);b=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(d),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);this.CALCULATED_KPI_VALUE=Number(k);var e={};var h=this.getThresholdsObjAndColor(t).returnColor;var i={value:Number(k),color:h};e.actualValueLabel=b.toString();e.actual=i;e.thresholds=[];e.thresholds=this.getThresholdsObjAndColor(t).arrObj;var j=this.DEFINITION_DATA.EVALUATION_VALUES,l;if(this.DEFINITION_DATA.EVALUATION.VALUES_SOURCE=="MEASURE"){l=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);e.targetValue=Number(l);e.targetValueLabel=f.toString();}else{for(var n=0;n<j.length;n++){if(j[n].TYPE==="TA"){l=Number(f);if(this.oConfig.EVALUATION.SCALING==-2){l*=100;}c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);f=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(l,this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);e.targetValue=Number(l);e.targetValueLabel=f.toString();}}}if(this.oConfig.EVALUATION.SCALING==-2){e.scale="%";}this._updateTileModel(e);if(this.DEFINITION_DATA.TILE_PROPERTIES.frameType==F.TwoByOne){a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedRight",false);}else{this.oKpiTileView.oGenericTile.setState(L.Loaded);}this.setToolTip(h,d,"DT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime&&!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,this.oTileApi.visible.isVisible());}}},
getThresholdsObjAndColor:function(t){try{var T={};T.arrObj=[];T.returnColor=V.Neutral;var i=this.DEFINITION_DATA.EVALUATION.GOAL_TYPE;var w,c,a,b;if(i==="MI"){a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;if(a&&b){a=window.parseFloat(a);b=window.parseFloat(b);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});if(this.CALCULATED_KPI_VALUE<b){T.returnColor=V.Good;}else if(this.CALCULATED_KPI_VALUE<=a){T.returnColor=V.Critical;}else{T.returnColor=V.Error;}}}else if(i==="MA"){c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(c&&w){c=window.parseFloat(c);w=window.parseFloat(w);T.arrObj.push({value:c,color:V.Error});T.arrObj.push({value:w,color:V.Critical});if(this.CALCULATED_KPI_VALUE<c){T.returnColor=V.Error;}else if(this.CALCULATED_KPI_VALUE<=w){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}else{a=Number(t.criticalHighValue)||0;b=Number(t.warningHighValue)||0;c=Number(t.criticalLowValue)||0;w=Number(t.warningLowValue)||0;if(w&&b&&c&&c){a=window.parseFloat(a);b=window.parseFloat(b);w=window.parseFloat(w);c=window.parseFloat(c);T.arrObj.push({value:a,color:V.Error});T.arrObj.push({value:b,color:V.Critical});T.arrObj.push({value:w,color:V.Critical});T.arrObj.push({value:c,color:V.Error});if(this.CALCULATED_KPI_VALUE<c||this.CALCULATED_KPI_VALUE>a){T.returnColor=V.Error;}else if((this.CALCULATED_KPI_VALUE>=c&&this.CALCULATED_KPI_VALUE<=w)||(this.CALCULATED_KPI_VALUE>=b&&this.CALCULATED_KPI_VALUE<=a)){T.returnColor=V.Critical;}else{T.returnColor=V.Good;}}}return T;}catch(e){this.logError(e);}},
doDummyProcess:function(){var t=this;this.setTextInTile();t._updateTileModel({actual:{value:120,color:V.Good},targetValue:100,thresholds:[{value:0,color:V.Error},{value:50,color:V.Critical},{value:150,color:V.Critical},{value:200,color:V.Error}],showActualValue:true,showTargetValue:true});this.oKpiTileView.oGenericTile.setState(L.Loaded);}
});
return D;});
sap.ui.predefine('sap/ushell/components/tiles/indicatordeviation/DeviationTile.view',["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/suite/ui/microchart/BulletMicroChartData","sap/suite/ui/microchart/BulletMicroChart","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,o,s,M,B,a,G,b){"use strict";var S=M.Size;var L=M.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.microchart");sap.ui.jsview("sap.ushell.components.tiles.indicatordeviation.DeviationTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatordeviation.DeviationTile";},createContent:function(){this.setHeight("100%");this.setWidth("100%");var h="Lorem ipsum";var c="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;c=t.subTitle;}var d={subheader:c,header:h,footerNum:"",footerComp:"",frameType:"OneByOne",state:L.Loading,scale:""};var e=new B({value:"{value}",color:"{color}"});this.oBCTmpl=new a({size:S.Responsive,scale:"{/scale}",actual:{value:"{/actual/value}",color:"{/actual/color}"},targetValue:"{/targetValue}",actualValueLabel:"{/actualValueLabel}",targetValueLabel:"{/targetValueLabel}",thresholds:{template:e,path:"/thresholds"},state:"{/state}",showActualValue:"{/showActualValue}",showTargetValue:"{/showTargetValue}"});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oBCTmpl});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var g=new b();g.setData(d);this.oGenericTile.setModel(g);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.controller',["sap/ushell/components/tiles/generic","sap/m/library"],function(g,m){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;var F=m.FrameType;
var N=g.extend("sap.ushell.components.tiles.indicatornumeric.NumericTile",{
onInit:function(){this.KPI_VALUE_REQUIRED=true;},
doProcess:function(k,t){var a=this;this.CALCULATED_KPI_VALUE=k;var b=this.getTrendColor(t);var d=this.getTrendIndicator(t.trendValue);var s="";var e=this.CALCULATED_KPI_VALUE;if(this.oConfig.EVALUATION.SCALING==-2){e*=100;this.getView().oNVConfContS.setFormatterValue(false);}var c=this.isCurrencyMeasure(this.oConfig.EVALUATION.COLUMN_NAME);s=sap.ushell.components.tiles.indicatorTileUtils.util.getLocaleFormattedValue(Number(e),this.oConfig.EVALUATION.SCALING,this.oConfig.EVALUATION.DECIMAL_PRECISION,c,this.CURRENCY_CODE);if(this.oConfig.EVALUATION.SCALING==-2){this._updateTileModel({scale:"%"});}this._updateTileModel({value:s.toString(),valueColor:b,indicator:d});if(a.oConfig.TILE_PROPERTIES.frameType==F.OneByOne){this.oKpiTileView.oGenericTile.setState(L.Loaded);this.setToolTip(b,e,"NT");}else{a.getView().getViewData().parentController._updateTileModel(this.getTile().getModel().getData());a.getView().getViewData().deferredObj.resolve();sap.ushell.components.tiles.indicatorTileUtils.util.setUnsetCallInProgress(a.oConfig.TILE_PROPERTIES.id+"defferedLeft",false);}this.setToolTip(b,e,"NT");if(!sap.ushell.components.tiles.indicatorTileUtils.util.isDualTile(this.oConfig)){if(a.chipCacheTime){sap.ushell.components.tiles.indicatorTileUtils.util.scheduleFetchDataJob.call(this,a.oTileApi.visible.isVisible());}}},
doDummyProcess:function(){var t=this;this.setTextInTile();if(!(t.oConfig.BLANKTILE||t.oConfig.TILE_PROPERTIES.blankTile)){t._updateTileModel({value:"10.34",scale:"M",valueColor:V.Neutral,indicator:D.None});}else{this.oKpiTileView.oNVConfContS.setIcon("sap-icon://BusinessSuiteInAppSymbols/icon-multiple-charts");}this.oKpiTileView.oGenericTile.setState(L.Loaded);}
});
return N;});
sap.ui.predefine('sap/ushell/components/tiles/indicatornumeric/NumericTile.view',["sap/ui/core/mvc/JSView","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/m/library","sap/m/NumericContent","sap/m/GenericTile","sap/ui/model/json/JSONModel"],function(J,o,s,m,N,G,a){"use strict";var D=m.DeviationIndicator;var V=m.ValueColor;var L=m.LoadState;sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("sap.ushell.components.tiles.indicatornumeric.NumericTile",{getControllerName:function(){return"sap.ushell.components.tiles.indicatornumeric.NumericTile";},createContent:function(){var h="Lorem ipsum";var b="Lorem ipsum";var t=sap.ushell.components.tiles.indicatorTileUtils.util.getTileTitleSubtitle(this.getViewData().chip);if(t.title&&t.subTitle){h=t.title;b=t.subTitle;}var g={subheader:b,header:h,footerNum:"",footerComp:"",scale:"",unit:"",value:"",size:"Auto",frameType:"OneByOne",state:L.Loading,valueColor:V.Neutral,indicator:D.None,title:"",footer:"",description:""};this.oNVConfContS=new N({value:"{/value}",scale:"{/scale}",unit:"{/unit}",indicator:"{/indicator}",valueColor:"{/valueColor}",size:"{/size}",formatterValue:true,truncateValueTo:5,nullifyValue:false});this.oNVConfS=new sap.ushell.components.tiles.sbtilecontent({unit:"{/unit}",size:"{/size}",footer:"{/footerNum}",content:this.oNVConfContS});this.oGenericTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[this.oNVConfS]});var c=new a();c.setData(g);this.oGenericTile.setModel(c);return this.oGenericTile;}});},true);
sap.ui.predefine('sap/ushell/components/tiles/sbtilecontent',["sap/m/TileContent","sap/m/TileContentRenderer","sap/ui/core/Control"],function(T,R,C){"use strict";
var t=C.extend("numeric.TileContent_Timestamp",{
ontap:function(e){if(this.getParent().getRefreshOption()){e.preventDefault();e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}this.getParent().fireRefresh();}},
renderer:function(r,c){r.write("<div");r.writeElementData(c);r.addClass("sapMTileCntFtrTxt");if(c.getParent().getRefreshOption()){r.addClass("sapMLnk");}r.writeClasses();r.addStyle("position","absolute");r.addStyle("z-index","2");r.addStyle(r.getConfiguration().getRTL()?"left":"right","auto");r.writeStyles();r.write(">");var a=c.getParent().getTimestamp();if(a){if(!c.getParent().getRefreshOption()){r.writeEscaped(a);}else if(r.getConfiguration().getRTL()){r.writeEscaped(a+"\u2009");r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");}else{r.writeIcon("sap-icon://refresh","sapMCmpTileUnitInner");r.writeEscaped("\u2009"+a);}}r.write("</div>");}
});
return T.extend("sap.ushell.components.tiles.sbtilecontent",{metadata:{properties:{timestamp:{type:"string"},refreshOption:{type:"boolean"}},events:{refresh:{}}},init:function(){this.addDependent(this._oTimestamp=new t());},getAltText:function(){var a=T.prototype.getAltText.apply(this,arguments);if(this.getTimestamp()){a+=(a===""?"":"\n")+this.getTimestamp();}return a;},renderer:{_renderFooter:function(r,c){R._renderFooter.apply(this,arguments);r.renderControl(c._oTimestamp);}}});},true);
sap.ui.predefine('sap/ushell/components/tiles/utils',["sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/components/tiles/utilsRT"],function(P,r,O,J,c,F,d,I,e,S,f,T,C,g,L,h,q,k,u){"use strict";var M=c.MessageType;var V=c.ValueState;var l=c.mvc.ViewType;var U={};
U.isInitial=function(s){return s==="App Launcher  Static"||s==="App Launcher  Dynamic"||s==="Target Mapping";};
U.getResourceBundleModel=function(){return r.i18nModel;};
U.getEmptyRowObj=function(E){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!E,defValEnabled:true,editable:E};};
U.getEmptyTileActionsRowObj=function(E){var R=U.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:R.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:E};};
U.getTileNavigationActionsRows=function(a,E){var b=[],j=[];j=this.getTileNavigationActions(a);if(j.length){for(var i=0;i<j.length;i++){b.push(t(j[i],E));}}else{b=[this.getEmptyTileActionsRowObj(E)];}return b;};
U.getTileNavigationActions=function(a){var b=[],s="";var j=a.bag.getBag("tileNavigationActions");if(j.getPropertyNames().indexOf("tile_navigation_actions")>=0){b=JSON.parse(j.getProperty("tile_navigation_actions"));for(var i=0;i<b.length;i++){if(b[i].text){if(j.getTextNames().indexOf("action_tile_"+(i+1))>=0){s=j.getText("action_tile_"+(i+1));}b[i].text=s;}}}return b;};
var t=function(a,E){var b={},R=U.getResourceBundleModel().getResourceBundle();b.menu_title=a.text;b.icon=a.icon;if((a.targetURL).charAt(0)==="#"){b.target_type=R.getText("configuration.tile_actions.table.target_type.intent");var N=a.targetURL.split("-");b.navigation_target=N[0].substring(1,N[0].length);b.action=N[1];b.isTargetTypeIntent=true;}else{b.target_type=R.getText("configuration.tile_actions.table.target_type.url");b.navigation_target=a.targetURL;b.action="";b.isTargetTypeIntent=false;}b.editable=E;return b;};
U.tileActionsRows2TileActionsArray=function(a){var b=[];for(var i=0;i<a.length;i++){if(a[i].menu_title){b.push(m(a[i]));}}return b;};
var m=function(a){var b={};b.text=a.menu_title;b.icon=a.icon;if(a.action){b.targetURL="#"+a.navigation_target+"-"+a.action;}else{b.targetURL=a.navigation_target;}return b;};
U.populateTileNavigationActionsBag=function(a,N){a.setProperty("tile_navigation_actions",JSON.stringify(N));for(var i=0;i<N.length;i++){var A=N[i].text;a.setText("action_tile_"+(i+1),A);}};
U.getDefaultFormFactors=function(){return{"appDefault":false,"manual":{"desktop":true,"tablet":true,"phone":true},"defaultParam":true};};
U.buildFormFactorsObject=function(a){return{"appDefault":a.getProperty("/config/appFormFactor"),"manual":{"desktop":a.getProperty("/config/desktopChecked"),"tablet":a.getProperty("/config/tabletChecked"),"phone":a.getProperty("/config/phoneChecked")}};};
U.tableHasDuplicateParameterNames=function(a){var p={};for(var i=0;i<a.length;i++){var b=a[i].name;if(b!==""){if(p[b]){return true;}p[b]=true;}}return false;};
U.tableHasInvalidSapPrelaunchOperationValue=function(a){for(var i=0;i<a.length;i++){if(a[i].name==="sap-prelaunch-operations"){if(P.parseAndValidateOperations(a[i].defaultValue)===null){return false;}break;}}return true;};
U.getMappingSignatureString=function(a,b){var j="";for(var i=0;i<a.length;i++){if(a[i].name){j+=(n(a[i])+"&");}}return b?j+"*=*":j.substring(0,j.length-1);};
var n=function(a){var p="";if(a.mandatory){if(a.isRegularExpression){p="{"+a.name+"="+encodeURIComponent(a.value)+"}";}else{p=a.name+"="+encodeURIComponent(a.value);}}else{p="["+a.name+"="+encodeURIComponent(a.defaultValue)+"]";}return p;};
U.getMappingSignatureTableData=function(a,E){var p=[];var b=a.split("&");for(var i=0;i<b.length;i++){var j=b[i];if(j!=="*=*"){p.push(o(b[i],E));}}return p;};
var o=function(p,E){var a={};if(p.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";p=p.substring(1,p.length-1);a.name=p.substring(0,p.indexOf("="));a.defaultValue=decodeURIComponent(p.substring(p.indexOf("=")+1));}else{a.mandatory=true;a.defaultValue="";if(p.charAt(0)==="{"){a.isRegularExpression=true;p=p.substring(1,p.length-1);}else{a.isRegularExpression=false;}a.name=p.substring(0,p.indexOf("="));a.value=decodeURIComponent(p.substring(p.indexOf("=")+1));}a.editable=E;if(E){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory;}else{a.valEnabled=true;a.defValEnabled=true;}return a;};
U.getAllowUnknownParametersValue=function(a){if(a&&(a.substring(a.length-3,a.length)==="*=*")){return true;}return false;};
U.getMappingSignature=function(R,a){var A=a?"allowed":"ignored";var b=new RegExp("%%UserDefault[.].+%%");var i=[];var j={"parameters":{},"additional_parameters":A};R.forEach(function(p){j.parameters[p.name]={"required":p.mandatory,"rename_to":p.rename_to};if(p.defaultValue){i=b.exec(p.defaultValue);if(i){p.defaultValue=i[0];}j.parameters[p.name].defaultValue={"value":p.defaultValue};}if(p.value){i=b.exec(p.value);if(i){p.value=i[0];}j.parameters[p.name].filter={"value":p.value};if(p.isRegularExpression){j.parameters[p.name].filter.format="regexp";}}});return j;};
U.getSignatureTableData=function(s,E){var p=[];var R={};var a={};var b=s.parameters;for(var i in b){a=b[i];R={};R.editable=E;R.name=i;R.mandatory=a.required;if(a.rename_to){R.rename_to=a.rename_to;}else{R.rename_to=a.renameTo;}if(E){R.valEnabled=R.mandatory;R.defValEnabled=!R.mandatory;}else{R.valEnabled=true;R.defValEnabled=true;}if(a.filter){R.value=a.filter.value;if(a.filter.format&&a.filter.format==="regexp"){R.isRegularExpression=true;}}if(a.defaultValue){R.defaultValue=a.defaultValue.value;}p.push(R);}return p;};
U.getTranslatedTitle=function(a){if(a.bag){var b=a.bag.getBag("tileProperties");if(b.getTextNames().indexOf("display_title_text")>=0){return b.getText("display_title_text");}}if(a.title){return a.title.getTitle();}if(a.preview){return a.preview.getTitle();}return"";};
U.getTranslatedSubtitle=function(a,b){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf("display_subtitle_text")>=0){return i.getText("display_subtitle_text");}}if(typeof b.display_subtitle_text==="string"){return b.display_subtitle_text;}if(a.preview&&a.preview.getDescription&&a.preview.getDescription()){return a.preview.getDescription();}return"";};
U.getTranslatedProperty=function(a,b,p){if(a.bag){var i=a.bag.getBag("tileProperties");if(i.getTextNames().indexOf(p)>=0){return i.getText(p);}}return b[p];};
U.getActionConfiguration=function(a,A){var s=a.configuration.getParameterValueAsString("tileConfiguration");var b=JSON.parse(s||"{}"),R;if(typeof A==="undefined"){A=a.configurationUi.isEnabled();}if(A){R=U.getResourceBundleModel().getResourceBundle();}b.semantic_object=b.semantic_object||(A?"["+R.getText("configuration.semantic_object")+"]":"");b.semantic_action=b.semantic_action||(A?"["+R.getText("configuration.semantic_action")+"]":"");b.navigation_provider=b.navigation_provider||"";b.navigation_provider_role=b.navigation_provider_role||"";b.navigation_provider_instance=b.navigation_provider_instance||"";b.target_application_id=b.target_application_id||"";b.target_application_alias=b.target_application_alias||"";b.display_info_text=b.display_info_text||"";b.editable=true;if(a.configurationUi&&a.configurationUi.isReadOnly){if(a.configurationUi.isReadOnly()){b.editable=false;}}return b;};
U.getConfiguration=function(v){var a=v.getViewData();var b=a.chip;var i=u.getConfiguration(b,true,true);return i;};
U.getConfigurationUi=function(v,s){var a,b,R,i,A,j;var p=v.getViewData();var w=U.getConfiguration(v);var x=new J({config:w,tileModel:v.getModel()});a=new sap.ui.view({type:l.XML,viewData:p,viewName:s});a.setModel(x);b=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput");if(b){b.getModel().setProperty("/enabled",w.navigation_use_semantic_object);b.getModel().setProperty("/value",w.semantic_object||w.navigation_semantic_object);}R=a.byId("navigation_provider_roleInput");if(R){R.getModel().setProperty("/value",w.navigation_provider_role);}i=a.byId("navigation_provider_instanceInput");if(i){i.getModel().setProperty("/value",w.navigation_provider_instance);}A=a.byId("target_application_aliasInput");if(A){A.getModel().setProperty("/value",w.target_application_alias);}j=a.byId("targetTypeInput");if(j){if(!a.getModel().getProperty("/config/transaction")){a.getModel().setProperty("/config/transaction",{});}if(!a.getModel().getProperty("/config/web_dynpro")){a.getModel().setProperty("/config/web_dynpro",{});}if(v.getModel().getProperty("/config/navigation_provider")==="LPD"){U.displayLpdCustApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WCF"){j.setSelectedKey("WCF");U.displayWCFApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||v.getModel().getProperty("/config/navigation_provider")===""){j.setSelectedKey("SAPUI5");U.displaySapui5ApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="TR"){U.displayTransactionApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="WDA"){U.displayWebDynproApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="URL"){U.displayURLApplicationTypeFields(a);}else if(v.getModel().getProperty("/config/navigation_provider")==="URLT"){U.displayURLTApplicationTypeFields(a);x.setProperty("/config/editable",false);x.setProperty("/config/manualFormFactor",false);}}return a;};
U._updateTilePropertiesTexts=function(v,a){var b=a.getTextNames(),i=v.getModel();b.forEach(function(p){i.setProperty("/data/"+p,a.getText(p));i.setProperty("/config/"+p,a.getText(p));});};
U._updateTileConfiguration=function(v,a){var b=v.getModel();q.each(JSON.parse(a),function(p,s){b.setProperty("/data/"+p,s);b.setProperty("/config/"+p,s);if(p==="navigation_target_url"){b.setProperty("/nav/"+p,s);}});};
U.aData=[];U.aActionData=[];U.aRoleData=[];U.aAliasData=[];
U.objectSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("name",d.Contains,v);b=new F("obj",d.Contains,v);a.push(b);a.push(s);i.filter(new F(a,false));}};
U.actionSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("text",d.Contains,v);a.push(s);i.filter(new F(a,false));}};
U.roleSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),i,s,b;if(v!==undefined){i=E.getParameter("itemsBinding");s=new F("role",d.Contains,v);b=new F("instance",d.Contains,v);a.push(s);a.push(b);i.filter(new F(a,false));}};
U.instanceSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,R,i,s,j;b=E.getSource().getCustomData();R=b[0].getValue();if(v!==undefined){i=E.getParameter("itemsBinding");if(v!==""){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){s=new F("role",d.EQ,R);a.push(s);}if(a.length>0){i.filter(new F(a,true));}}};
U.instanceSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),R,i,j,p,w;R=v.byId("navigation_provider_roleInput");i=R.getValue();s=E.getParameter("suggestValue");if(s!==""){w=new F("instance",d.Contains,s);b.push(w);}if(i!==""){p=new F("role",d.EQ,i);b.push(p);}if(b.length>0){j=E.oSource.getBinding("suggestionItems");j.filter(new F(b,true));}};
U.aliasSuggest=function(a,E){var v=a.getView(),b=[],s=E.getParameter("value"),i,j,p,w,x;i=v.byId("navigation_provider_instanceInput");j=i.getValue();s=E.getParameter("suggestValue");if(s!==""){x=new F("alias",d.Contains,s);b.push(x);}if(j!==""){w=new F("instance",d.EQ,j);b.push(w);}if(b.length>0){p=E.oSource.getBinding("suggestionItems");p.filter(new F(b,true));}};
U.aliasSelectDoSearch=function(E){var a=[],v=E.getParameter("value"),b,i,j,s,p;b=E.getSource().getCustomData();i=b[0].getValue();if(v!==undefined){j=E.getParameter("itemsBinding");s=new F("instance",d.EQ,i);if(v!==""){p=new F("alias",d.Contains,v);a.push(p);}a.push(s);j.filter(new F(a,true));}};
U.objectSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("name",d.Contains,v);a.push(b);i.filter(a);}};
U.actionSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("text",d.Contains,v);a.push(b);i.filter(a);}};
U.roleSelectUpdateDialog=function(s,v){var a=[],i=s.getBinding("items"),b;if(v!==undefined){b=new F("role",d.Contains,v);a.push(b);i.filter(a);}};
U.instanceSelectUpdateDialog=function(s,v){var a=[],b,i=s.getBinding("items"),j,R,p;b=s.getCustomData();R=b[0].getValue();if(v!==undefined){j=new F("instance",d.Contains,v);a.push(j);}if(R!==""){p=new F("role",d.EQ,R);a.push(p);}if(a.length>0){i.filter(a,true);}};
U.aliasSelectUpdateDialog=function(s,v){var a=[],b,i,j=s.getBinding("items"),p,w;b=s.getCustomData();i=b[0].getValue();if(v!==undefined){w=new F("alias",d.Contains,v);a.push(w);}if(i!==""){p=new F("instance",d.EQ,i);a.push(p);}if(a.length>0){j.filter(a,true);}};
U.sSelectedColor=(q(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");U.sDeselectedColor=(q(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");
U.iconSelect=function(i,s){i.setColor(s?U.sSelectedColor:U.sDeselectedColor);i.setActiveColor(s?U.sDeselectedColor:U.sSelectedColor);};
U.onSelectIcon=function(a,i,b,j){var p=a.getView().getModel(),s;if(i){s=p.getProperty("/config/tile_actions_selected_icon");}else{s=p.getProperty("/config/selected_icon");}if(s){U.iconSelect(s,false);}s=j.getSource();U.iconSelect(s,true);p.setProperty("/config/ok.enabled",true);if(i){p.setProperty("/config/tile_actions_selected_icon",s);}else{p.setProperty("/config/selected_icon",s);}a.byId("selectIconDialog").setTitle(s.getSrc());};
U.onSelectIconClose=function(v){v.byId("selectIconDialog").close();};
U.onSelectIconOk=function(v,a){var s=v.getModel().getProperty("/config/selected_icon");if(!a){v.getModel().setProperty("/config/display_icon_url",s.getSrc());v.byId("iconInput").setValueState(V.None);}else{s=v.getModel().getProperty("/config/tile_actions_selected_icon");if(s){a.setValue(s.getSrc());a.setValueState(V.None);}}U.onSelectIconClose(v);};
U.iconSelectOnValueHelpRequest=function(a,E,b){var p=a.getView().getModel();var R=a.getView().byId("icons");var s=I.getIconCollectionNames();var D=a.getView().byId("selectIconDialog");var v=a.getView().byId("ok");var w,x,y,z,i,j,A,B=false;R.destroyContent();if(b){y=sap.ui.getCore().byId(E.getParameter("id"));x=y.getValue();}else{x=p.getProperty("/config/display_icon_url");}v.attachEventOnce("press",function(){U.onSelectIconOk(a.getView(),y);});s.sort();s=q.grep(s,function(G){if(G==="BusinessSuiteInAppSymbols"){B=true;return false;}return true;});if(B){s.push("BusinessSuiteInAppSymbols");}for(i=0;i<s.length;i+=1){z=I.getIconNames(s[i]);z.sort();for(j=0;j<z.length;j+=1){A=I.getIconURI(z[j],s[i]);R.addContent(new e({height:"38px",press:U.onSelectIcon.bind(null,a,b,y),size:"2rem",src:A,tooltip:A,width:"38px"}));}}w=R.getContent();p.setProperty("/config/ok.enabled",false);D.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(i=0;i<w.length;i+=1){if(w[i].getSrc()===x){if(b){p.setProperty("/config/tile_actions_selected_icon",w[i]);}else{p.setProperty("/config/selected_icon",w[i]);}U.iconSelect(w[i],true);p.setProperty("/config/ok.enabled",true);D.setTitle(x);}else{U.iconSelect(w[i],false);}}D.open();};
U.objectSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object"),b,j,p=new J(),w=new S("semantic_object_select_dialog",{title:s,search:U.objectSelectDoSearch,liveChange:U.objectSelectDoSearch}),x=new f({title:"{obj}"});if(i){b=sap.ui.getCore().byId(E.getParameter("id"));}else{b=v.byId("semantic_objectInput")||v.byId("navigation_semantic_objectInput");}j=b.getValue();w.open(j);p.setData(a.aDefaultObjects.concat(U.aData));w.bindAggregation("items","/",x);w.setModel(p);U.objectSelectUpdateDialog(w,j);w.attachCancel(function(y){b.setValue(j);if(!i){b.fireChange();}w.destroy();w=null;});w.attachConfirm(function(y){var z=y.getParameter("selectedItem");if(z){b.setValue(z.getTitle());if(!i){b.fireChange();}}w.destroy();w=null;});};
U.actionSelectOnValueHelpRequest=function(a,E,i){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action"),A,b,j=new J(),p=new S("semantic_action_select_dialog",{title:s,search:U.actionSelectDoSearch,liveChange:U.actionSelectDoSearch}),w=new f({title:"{text}"});if(i){A=sap.ui.getCore().byId(E.getParameter("id"));}else{A=v.byId("semantic_actionInput")||v.byId("navigation_semantic_actionInput");}b=A.getValue();p.open(b);j.setData(U.aActionData);p.bindAggregation("items","/items",w);p.setModel(j);U.actionSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);if(!i){A.fireChange();}p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());if(!i){A.fireChange();A.fireLiveChange({"newValue":y.getTitle()});}}p.destroy();p=null;});};
U.roleSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),R,i,b,j=new J(),p=new sap.m.TableSelectDialog("role_select_dialog",{title:s,search:U.roleSelectDoSearch,liveChange:U.roleSelectDoSearch,columns:[new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new sap.m.Column({header:[new T({text:U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),w=new sap.m.ColumnListItem({cells:[new T({text:"{role}"}),new T({text:"{instance}"})]});R=v.byId("navigation_provider_roleInput");i=v.byId("navigation_provider_instanceInput");b=R.getValue();p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.roleSelectUpdateDialog(p,b);p.attachCancel(function(x){R.setValue(b);R.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){R.setValue(y.getCells()[0].getText());i.setValue(y.getCells()[1].getText());R.fireChange();i.fireChange();}p.destroy();p=null;});};
U.instanceSelectOnValueHelpRequest=function(a){var v=a.getView(),R,s=U.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance"),i,b,j=new J(),p=new S("instance_select_dialog",{title:s,search:U.instanceSelectDoSearch,liveChange:U.instanceSelectDoSearch}),w=new f({title:"{instance}"});i=v.byId("navigation_provider_instanceInput");b=i.getValue();R=v.byId("navigation_provider_roleInput").getValue();p.addCustomData(new C({key:"role",value:R}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aRoleData));p.bindAggregation("items","/",w);p.setModel(j);U.instanceSelectUpdateDialog(p,b);p.attachCancel(function(x){i.setValue(b);i.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){i.setValue(y.getTitle());i.fireChange();}p.destroy();p=null;});};
U.applicationAliasSelectOnValueHelpRequest=function(a){var v=a.getView(),s=U.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias"),A,b,i,j=new J(),p=new S("alias_select_dialog",{title:s,search:U.aliasSelectDoSearch,liveChange:U.aliasSelectDoSearch}),w=new f({title:"{alias}"});A=v.byId("target_application_aliasInput");b=A.getValue();i=v.byId("navigation_provider_instanceInput").getValue();p.addCustomData(new C({key:"instance",value:i}));p.open(b);j.setData(a.aDefaultObjects.concat(U.aAliasData));p.bindAggregation("items","/",w);p.setModel(j);U.aliasSelectUpdateDialog(p,b);p.attachCancel(function(x){A.setValue(b);A.fireChange();p.destroy();p=null;});p.attachConfirm(function(x){var y=x.getParameter("selectedItem");if(y){A.setValue(y.getTitle());A.fireChange();}p.destroy();p=null;});};
U.onTargetTypeChange=function(a){var i=a.getParameter("id");var p=sap.ui.getCore().byId(i).getParent().getCells();var s=a.getSource().getSelectedKey();if(s==="INT"){p[3].setEnabled(true);p[2].setShowValueHelp(true);p[2].setValue("");}else{p[2].setShowValueHelp(false);p[2].setValue("");p[3].setEnabled(false);p[3].setValue("");}};
U.addTileActionsRow=function(a){var b=a.getModel();var i=b.getProperty("/config/tile_actions_rows");var j=this.getEmptyTileActionsRowObj();i.push(j);b.setProperty("/config/tile_actions_rows",i);};
U.deleteTileActionsRow=function(j){var p=j.getModel();var s=p.getProperty("/config/tile_actions_rows");var v=j.byId("tileActions");var w=v.getSelectedIndices();var x=w.sort(function(a,b){return b-a;}).slice();for(var i=0;i<x.length;i++){v.removeSelectionInterval(x[i],x[i]);s.splice(x[i],1);}p.setProperty("/config/tile_actions_rows",s);};
U.checkInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),j=a.byId("iconInput"),p=a.byId("useLpdCheckbox"),s=a.byId("navigation_semantic_objectInput")||a.byId("semantic_objectInput"),v=a.byId("navigation_semantic_actionInput")||a.byId("semantic_actionInput"),w=V.None,x=null,N=q.trim(b.getParameter("newValue"));switch(b.getSource()){case j:if(N!==""&&N.substring(0,11)!=="sap-icon://"){w=V.Error;x=i.getText("configuration.display_icon_url.warning");}break;case p:if(!p.getSelected()){v.setValueState(V.None);s.setValueState(V.None);}break;case s:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_object.error_invalid_chars");}else if(N===""){w=V.Error;}break;case v:if(/[-#&? ]/.test(N)){w=V.Error;x=i.getText("configuration.semantic_action.error_invalid_chars");}else if(N===""){w=V.Error;}break;default:break;}if(w){b.getSource().setValueState(w);if(x!==null){b.getSource().setValueStateText(x||"");}}};
U.checkInputOnSaveConfig=function(a){var i=a.byId("iconInput");var s=a.byId("navigation_semantic_objectInput");var b=a.byId("navigation_semantic_actionInput");var j=a.byId("useLpdCheckbox");var p=U.getResourceBundleModel().getResourceBundle();var R=false;if(i.getValue()!==""&&!U.isIconURIValid(i.getValue())){i.setValueState(V.Error);i.setValueStateText(p.getText("configuration.display_icon_url.warning"));R=true;}if(j.getSelected()&&/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(p.getText("configuration.semantic_object.error_invalid_chars"));R=true;}else if(j.getSelected()&&s.getValue()===""){s.setValueState(V.Error);R=true;}if(/[-#&? ]/.test(b.getValue())){b.setValueState(V.Error);b.setValueStateText(p.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(j.getSelected()&&b.getValue()===""){b.setValueState(V.Error);R=true;}return R;};
U.checkTileActions=function(a){var b=a.getModel().getProperty("/config/tile_actions_rows");var j=U.getResourceBundleModel().getResourceBundle();var R=false;for(var i=0;i<b.length;i++){if(!b[i].menu_title&&(b[i].navigation_target||b.length>1)){b[i].valueState=V.Error;R=true;}else{b[i].valueState=V.None;}if(b[i].icon){if(!U.isIconURIValid(b[i].icon)){b[i].iconValueState=V.Error;b[i].iconValueStateText=j.getText("configuration.display_icon_url.warning");R=true;}}}a.getModel().setProperty("/config/tile_actions_rows",b);return R;};
U.isIconURIValid=function(i){var R=[];var s="";var a="";var v="";R=/sap-icon:\/\/(.+)\//.exec(i);if(R){s=R[1];R=/\/\/.+\/(.+)/.exec(i);if(R){a=R[1];}else{a="";}v=I.getIconURI(a,s);if(v!==i){return false;}}else{R=/sap-icon:\/\/(.+)/.exec(i);if(R){a=R[1];if(!I.getIconInfo(a)){return false;}}else{return false;}}return true;};
U.checkTMInput=function(a,b){var i=U.getResourceBundleModel().getResourceBundle(),s=a.byId("semantic_objectInput"),j=a.byId("semantic_actionInput"),p=a.byId("target_application_descriptionInput"),v=a.byId("target_application_urlInput"),w=a.byId("target_application_componentInput"),N=a.byId("navigation_provider_roleInput"),x=a.byId("navigation_provider_instanceInput"),y=a.byId("target_application_aliasInput"),z=a.byId("target_application_idInput"),A=q.trim(b.getParameter("newValue")),B=V.None,D=null;switch(b.getSource()){case s:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_object.error_invalid_chars");}if(j.getValue()===""){j.setValueState(V.Error);}break;case j:if(/[-#&? ]/.test(A)){B=V.Error;D=i.getText("configuration.semantic_action.error_invalid_chars");}else if(A===""){B=V.Error;}break;case p:if(A===""){B=V.Error;}break;case v:if(A!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.url.error_invalid_chars");}break;case w:if(A===""){B=V.Error;}else if(A.substring(0,17)==="SAPUI5.Component="){B=V.Error;D=i.getText("configuration.target_application.component.error_invalid_input");}break;case N:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.role.error_invalid_chars");}break;case x:if(A===""){B=V.Error;}else if(!(/^[\w/]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.instance.error_invalid_chars");}break;case y:if(A===""&&z.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&z.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");z.setValueState(B);z.setValueStateText(D);}else{z.setValueState(V.None);}break;case z:if(A===""&&y.getValue()===""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");}else if(A!==""&&y.getValue()!==""){B=V.Error;D=i.getText("configuration.target_application.alias_id.warning");y.setValueState(B);y.setValueStateText(D);}else if(A!==""&&!(/^[A-Fa-f0-9]+$/.test(A))){B=V.Error;D=i.getText("configuration.target_application.alias_id.error_invalid_chars");}else{y.setValueState(V.None);}break;default:break;}if(B){b.getSource().setValueState(B);if(D!==null){b.getSource().setValueStateText(D||"");}}};
U.checkTMInputOnSaveConfig=function(a){var b=U.getResourceBundleModel().getResourceBundle();var s=a.byId("semantic_objectInput");var i=a.byId("semantic_actionInput");var j=a.byId("target_application_descriptionInput");var p=a.byId("target_application_urlInput");var v=a.byId("target_application_componentInput");var N=a.byId("navigation_provider_roleInput");var w=a.byId("navigation_provider_instanceInput");var x=a.byId("target_application_aliasInput");var y=a.byId("target_application_idInput");var z=a.byId("targetTypeInput");var A=a.byId("target_transactionInput");var W=a.byId("target_web_dynpro_applicationInput");var B=a.byId("target_wcf_application_idInput");var D=a.byId("desktopCB");var E=a.byId("tabletCB");var G=a.byId("phoneCB");var R=false;s.setValue(s.getValue().trim());if(/[-#&? ]/.test(s.getValue())){s.setValueState(V.Error);s.setValueStateText(b.getText("configuration.semantic_object.error_invalid_chars"));R=true;}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(V.Error);i.setValueStateText(b.getText("configuration.semantic_action.error_invalid_chars"));R=true;}else if(i.getValue()===""){i.setValueState(V.Error);R=true;}var H=a.getModel().getProperty("/config/navigation_provider"),K;if(H==="SAPUI5"){if(j.getValue()===""){j.setValueState(V.Error);R=true;}if(p.getValue()!==""&&!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}if(v.getValue()===""){v.setValueState(V.Error);R=true;}else if(v.getValue().substring(0,17)==="SAPUI5.Component="){v.setValueState(V.Error);v.setValueStateText(b.getText("configuration.target_application.component.error_invalid_input"));R=true;}}else if(H==="LPD"){if(N.getValue()===""){N.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(N.getValue()))){N.setValueState(V.Error);K=b.getText("configuration.target_application.role.error_invalid_chars");N.setValueStateText(K);R=true;}if(w.getValue()===""){w.setValueState(V.Error);R=true;}if(!(/^[\w]+$/.test(w.getValue()))){w.setValueState(V.Error);K=b.getText("configuration.target_application.instance.error_invalid_chars");w.setValueStateText(K);R=true;}if(x.getValue()===""&&y.getValue()===""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(x.getValue()!==""&&y.getValue()!==""){K=b.getText("configuration.target_application.alias_id.warning");x.setValueState(V.Error);x.setValueStateText(K);y.setValueState(V.Error);y.setValueStateText(K);R=true;}if(y.getValue()!==""&&!(/^[A-Fa-f0-9]+$/.test(y.getValue()))){y.setValueState(V.Error);y.setValueStateText(b.getText("configuration.target_application.alias_id.error_invalid_chars"));R=true;}}else if(H==="TR"){if(A.getValue()===""){A.setValueState(V.Error);R=true;}}else if(H==="WDA"){if(W.getValue()===""){W.setValueState(V.Error);R=true;}}else if(H==="WCF"){if(B.getValue()===""){B.setValueState(V.Error);R=true;}}else if(H==="URL"){if(p.getValue()===""){p.setValueState(V.Error);R=true;}else if(!(/^[-~+,;:?%&#=/.\w]+$/.test(p.getValue()))){p.setValueState(V.Error);p.setValueStateText(b.getText("configuration.target_application.url.error_invalid_chars"));R=true;}}else{z.setValueState(V.Error);z.setValueStateText(b.getText("configuration.navigation_provider.error_invalid_provider"));R=true;}if(!D.getSelected()&&!E.getSelected()&&!G.getSelected()){K=b.getText("configuration.form_factor.warning");D.setValueState(V.Error);D.setValueStateText(K);E.setValueState(V.Error);E.setValueStateText(K);G.setValueState(V.Error);G.setValueStateText(K);R=true;}return R;};
U.updateTooltipForDisabledProperties=function(a){var b=a.getModel();var i=b.getProperty("/config/isLocaleSuitable");if(!i){var j=U.getResourceBundleModel().getResourceBundle();var p=j.getText("edit_configuration.original_locale_not_fit_tooltip",[b.getProperty("/config/userLocale"),b.getProperty("/config/orgLocale")]);a.byId("titleInput").setTooltip(p);a.byId("subtitleInput").setTooltip(p);a.byId("keywordsInput").setTooltip(p);a.byId("infoInput").setTooltip(p);}};
U.updateMessageStripForOriginalLanguage=function(a){var b=a.getModel();if(b.getProperty("/config/isLocaleSuitable")===false){var s=U.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[b.getProperty("/config/orgLocale").toUpperCase(),b.getProperty("/config/userLocale").toUpperCase()]);var i=a.byId("messageStrip");i.setVisible(true);i.setText(s);i.setType(M.Warning);}};
U.createSemanticObjectModel=function(a,s,D){var v=a.getView(),b="/sap/opu/odata/UI2/INTEROP/SemanticObjects",j=[{obj:"",name:""},{obj:"*",name:"*"}],p=(D||j).slice(0),w=new J();w.setSizeLimit(999999);w.setProperty("/value","");w.setProperty("/enabled",true);s.bindAggregation("suggestionItems","suggest>/items",new g({text:"{suggest>obj}"}));s.setModel(w,"suggest");if(U.aData.length>0){setTimeout(function(){w.setData({items:p.concat(U.aData)},true);},0);return;}O.read({requestUri:b,headers:{"Accept":"application/json"}},function(x){var y,z,i;for(i=0;i<x.results.length;i=i+1){y=x.results[i].id;z=x.results[i].text;U.aData.push({obj:y,name:z||y});}w.setData({items:p.concat(U.aData)},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+b+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createRoleModel=function(a,R,b){var v=a.getView(),s="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",j=new J(),p=new J();j.setSizeLimit(999999);p.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);p.setProperty("/value","");p.setProperty("/enabled",true);var w=new sap.m.ColumnListItem({cells:[new L({text:"{role}"}),new L({text:"{instance}"})]});R.bindAggregation("suggestionRows","/items",w);b.bindAggregation("suggestionItems","/items",new g({text:"{instance}"}));b.setModel(p);R.setModel(j);R.attachSuggestionItemSelected(function(i){b.setValue(i.getParameter("selectedRow").getCells()[1].getText());b.fireChange();});if(U.aRoleData.length>0){j.setData({items:U.aRoleData},false);p.setData({items:U.aRoleData},false);return;}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var x,y,i;for(i=0;i<D.results.length;i=i+1){x=D.results[i].lpdRole;y=D.results[i].instance;U.aRoleData.push({role:x,instance:y});}j.setData({items:U.aRoleData},true);p.setData({items:U.aRoleData},true);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createAliasModel=function(a,A){var v=a.getView(),b,s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",j=new J();j.setSizeLimit(999999);j.setProperty("/value","");j.setProperty("/enabled",true);A.bindAggregation("suggestionItems","/items",new g({text:"{alias}"}));A.setModel(j);b=u.getConfiguration(v.oViewData.chip,true,true);if(b&&b.navigation_provider_role&&b.navigation_provider_instance){if(b.navigation_provider_role!==""&&b.navigation_provider_instance!==""){s=s+"?role='"+b.navigation_provider_role+"'&instance='"+b.navigation_provider_instance+"'";}}O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var p,R,w,i,x;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){p=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;w=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:w,alias:p});}x=j.getData();if(x){x.items=U.aAliasData;}else{x={items:U.aAliasData};}j.setData(x,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.updateAliasModel=function(v,a){var s,b,R,j=a.getModel();b=v.byId("navigation_provider_instanceInput").getValue();R=v.byId("navigation_provider_roleInput").getValue();s="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+R+"'&instance='"+b+"'";O.read({requestUri:s,headers:{"Accept":"application/json"}},function(D){var A,R,b,i,p;U.aAliasData=[];for(i=0;i<D.results.length;i=i+1){A=D.results[i].lpdApplicationAlias;R=D.results[i].lpdRole;b=D.results[i].lpdInstance;U.aAliasData.push({role:R,instance:b,alias:A});}p=j.getData();if(p){p.items=U.aAliasData;}else{p={items:U.aAliasData};}j.setData(p,false);},function(E){var i=E&&E.message?E.message:E;if(E.response){i+=" - "+E.response.statusCode+" "+E.response.statusText;}k.error("Could not fetch data: "+s+": "+i,null,(v.getViewName()||"sap.ushell.components.tiles.utils"));});};
U.createActionModel=function(a,A){var i=new J();var v=a.getView(),b,s;i.setData({"items":[{"text":"display"},{"text":"approve"},{"text":"displayFactSheet"},{"text":"manage"},{"text":"create"},{"text":"monitor"},{"text":"track"},{"text":"change"},{"text":"register"},{"text":"release"},{"text":"analyzeKPIDetails"},{"text":"lookup"},{"text":"manageLineItems"}]});U.aActionData=i.getData();b=u.getConfiguration(v.oViewData.chip,true,true);s=b.navigation_semantic_action||b.semantic_action;if(s){if(!i.getData().items.some(function(j){return j.text===s;})){i.getData().items.push({"text":s});}}A.bindAggregation("suggestionItems","items>/items",new g({text:"{items>text}"}));A.setModel(i,"items");A.getBinding("suggestionItems").sort(new h("text",false));};
U.createNavigationProviderModel=function(a,b){var i=new J();var R=U.getResourceBundleModel().getResourceBundle();var j=[{"key":"SAPUI5","text":R.getText("configuration.target_application.sapui5")},{"key":"LPD","text":R.getText("configuration.target_application.lpd_cust")},{"key":"TR","text":R.getText("configuration.target_application.transaction")},{"key":"WDA","text":R.getText("configuration.target_application.web_dynpro")},{"key":"URL","text":R.getText("configuration.target_application.url")}];var N=U.getConfiguration(a.getView()).navigation_provider;if(N==="WCF"){j.push({"key":"WCF","text":R.getText("configuration.target_application.wcf")});}else if(N==="URLT"){j.push({"key":"URLT","text":R.getText("configuration.target_application.urlt")});}i.setData({"items":j});b.bindItems("items>/items",new g({key:"{items>key}",text:"{items>text}"}));b.setModel(i,"items");b.getBinding("items").sort(new h("text",false));};
U.displayApplicationTypeFields=function(a,b){switch(a){case"LPD":U.displayLpdCustApplicationTypeFields(b);break;case"SAPUI5":U.displaySapui5ApplicationTypeFields(b);break;case"TR":U.displayTransactionApplicationTypeFields(b);break;case"WDA":U.displayWebDynproApplicationTypeFields(b);break;case"URL":U.displayURLApplicationTypeFields(b);break;case"WCF":U.displayWCFApplicationTypeFields(b);break;case"URLT":U.displayURLTApplicationTypeFields(b);break;}};
U.displayWCFApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(true);a.byId("target_wcf_application_idInput").setVisible(true);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displaySapui5ApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(true);a.byId("target_application_componentInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displayLpdCustApplicationTypeFields=function(a){a.byId("application_description").setVisible(false);a.byId("target_application_descriptionInput").setVisible(false);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(true);a.byId("navigation_provider_roleInput").setVisible(true);a.byId("navigation_provider_instance").setVisible(true);a.byId("navigation_provider_instanceInput").setVisible(true);a.byId("target_application_alias").setVisible(true);a.byId("target_application_aliasInput").setVisible(true);a.byId("target_application_id").setVisible(true);a.byId("target_application_idInput").setVisible(true);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(true);};
U.displayTransactionApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(true);a.byId("target_transactionInput").setVisible(true);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displayWebDynproApplicationTypeFields=function(a){a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(true);a.byId("target_web_dynpro_applicationInput").setVisible(true);a.byId("target_web_dynpro_configuration").setVisible(true);a.byId("target_web_dynpro_configurationInput").setVisible(true);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displayURLApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(true);a.byId("target_application_urlInput").setVisible(true);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(true);a.byId("target_system_aliasInput").setVisible(true);a.byId("urlt_application_component").setVisible(false);a.byId("urlt_application_componentInput").setVisible(false);a.byId("target_urlt_system_alias").setVisible(false);a.byId("target_urlt_system_aliasInput").setVisible(false);a.byId("application_type_deprecated").setVisible(false);};
U.displayURLTApplicationTypeFields=function(a){a.byId("navigation_provider_role").setVisible(false);a.byId("navigation_provider_roleInput").setVisible(false);a.byId("navigation_provider_instance").setVisible(false);a.byId("navigation_provider_instanceInput").setVisible(false);a.byId("target_application_alias").setVisible(false);a.byId("target_application_aliasInput").setVisible(false);a.byId("target_application_id").setVisible(false);a.byId("target_application_idInput").setVisible(false);a.byId("application_description").setVisible(true);a.byId("target_application_descriptionInput").setVisible(true);a.byId("application_url").setVisible(false);a.byId("target_application_urlInput").setVisible(false);a.byId("application_component").setVisible(false);a.byId("target_application_componentInput").setVisible(false);a.byId("target_transaction").setVisible(false);a.byId("target_transactionInput").setVisible(false);a.byId("target_wcf_application_id").setVisible(false);a.byId("target_wcf_application_idInput").setVisible(false);a.byId("target_web_dynpro_application").setVisible(false);a.byId("target_web_dynpro_applicationInput").setVisible(false);a.byId("target_web_dynpro_configuration").setVisible(false);a.byId("target_web_dynpro_configurationInput").setVisible(false);a.byId("target_system_alias").setVisible(false);a.byId("target_system_aliasInput").setVisible(false);a.byId("urlt_application_component").setVisible(true);a.byId("urlt_application_componentInput").setVisible(true);a.byId("target_urlt_system_alias").setVisible(true);a.byId("target_urlt_system_aliasInput").setVisible(true);a.byId("application_type_deprecated").setVisible(false);};
return U;},true);
sap.ui.predefine('sap/ushell/components/tiles/utilsRT',["sap/ushell/components/tiles/utils","sap/ui/core/format/NumberFormat","sap/m/library","sap/base/Log","sap/ui/model/json/JSONModel"],function(u,N,m,L,J){"use strict";var B=m.ButtonType;var a={};
a.getConfiguration=function(t,A,E){var r;var c=t.configuration.getParameterValueAsString("tileConfiguration");var C;try{C=JSON.parse(c||"{}");}catch(e){L.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utilsRT");return{};}var U=sap.ui.require("sap/ushell/components/tiles/utils");C.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){C.editable=false;}}var T=U.getTranslatedTitle(t);var s=U.getTranslatedSubtitle(t,C);var i=U.getTranslatedProperty(t,C,"display_info_text");var k=U.getTranslatedProperty(t,C,"display_search_keywords");if(A){r=U.getResourceBundleModel().getResourceBundle();if(E&&t.bag){var o=t.bag.getOriginalLanguage();var l=sap.ui.getCore().getConfiguration().getLocale().getSAPLogonLanguage();var b=sap.ui.getCore().getConfiguration().getLanguage();C.isLocaleSuitable=o===""||o.toLowerCase()===l.toLowerCase()||o.toLowerCase()===b.toLowerCase();C.orgLocale=o;C.userLocale=l;}}C.display_icon_url=C.display_icon_url||"";if(i!==undefined){C.display_info_text=i;}else if(C.display_info_text===undefined){if(A&&!E){C.display_info_text="["+r.getText("configuration.display_info_text")+"]";}else{C.display_info_text="";}}C.navigation_semantic_object=C.navigation_semantic_object||"";C.navigation_semantic_action=C.navigation_semantic_action||"";C.navigation_semantic_parameters=C.navigation_semantic_parameters||"";C.display_number_unit=C.display_number_unit||"";C.display_number_factor=C.display_number_factor||"";C.service_refresh_interval=C.service_refresh_interval?parseInt(C.service_refresh_interval,10):0;C.service_url=C.service_url||"";C.navigation_target_url=C.navigation_target_url||"";if(A&&U.isInitial(T)){C.display_title_text=E?"":"["+r.getText("configuration.display_title_text")+"]";C.display_subtitle_text=E?"":"["+r.getText("configuration.display_subtitle_text")+"]";}else{C.display_title_text=T||C.display_title_text||"";if(s!==undefined){C.display_subtitle_text=s;}else if(C.display_subtitle_text===undefined){C.display_subtitle_text="";}}C.navigation_use_semantic_object=(C.navigation_use_semantic_object!==false);C.display_search_keywords=k||C.display_search_keywords||"";if(A){C.display_number_value=C.display_number_value||1234;}C.form_factors=C.form_factors?C.form_factors:U.getDefaultFormFactors();C.desktopChecked=C.form_factors.manual.desktop;C.tabletChecked=C.form_factors.manual.tablet;C.phoneChecked=C.form_factors.manual.phone;C.manualFormFactor=!(C.form_factors.appDefault)&&C.editable;C.appFormFactor=C.form_factors.appDefault;C.formFactorConfigDefault=!!C.form_factors.defaultParam;if(C.signature){C.rows=U.getSignatureTableData(C.signature,E&&C.editable);}else{C.rows=(C.mapping_signature&&C.mapping_signature!=="*=*")?U.getMappingSignatureTableData(C.mapping_signature,E&&C.editable):[U.getEmptyRowObj(C.editable)];}if(C.signature){C.isUnknownAllowed=(C.signature.additional_parameters==="allowed"||C.signature.additionalParameters==="allowed");}else{C.isUnknownAllowed=(C.mapping_signature!==undefined)?U.getAllowUnknownParametersValue(C.mapping_signature):true;}if(A){C.tile_actions_rows=U.getTileNavigationActionsRows(t,C.editable);}else if(!C.actions){C.actions=U.getTileNavigationActions(t);}if(A){var d=t.bag.getBag("deprecationProperties"),D=d.getProperty("deprecation"),f=null;if(D){f=r.getText(D==="D"?"configuration.app_deprecated":"configuration.app_archived",[d.getProperty("successor")]);}C.deprecation_text=f;}return C;};
a.getDataToDisplay=function(c,d){var b=0,i,n,C,s,D={display_icon_url:d.icon||c.display_icon_url||"",display_title_text:d.title||c.display_title_text||"",display_number_value:!isNaN(d.number)?d.number:"...",display_number_unit:d.numberUnit||c.display_number_unit||"",display_info_text:d.info||c.display_info_text||"",display_info_state:d.infoState||"Neutral",display_subtitle_text:d.subtitle||c.display_subtitle_text||"",display_state_arrow:d.stateArrow||"None",display_number_state:d.numberState||"None",display_number_digits:d.numberDigits>=0?d.numberDigits:4,display_number_factor:d.numberFactor||"",display_search_keyword:d.keywords||c.display_search_keyword||"",targetParams:[]};if(d.infoStatus){D.display_info_state=d.infoStatus;}if(d.targetParams){D.targetParams.push(d.targetParams);}if(d.results){for(i=0,n=d.results.length;i<n;i=i+1){C=d.results[i].number||0;if(typeof C==="string"){C=parseFloat(C,10);}b=b+C;s=d.results[i].targetParams;if(s){D.targetParams.push(s);}}D.display_number_value=b;}if(!isNaN(d.number)){if(typeof d.number==="string"){d.number=d.number.trim();}if(d.number===""){D.display_number_value="...";}else{var S=this._shouldProcessDigits(d.number,d.numberDigits),e=D.display_icon_url?4:5;if(d.number&&d.number.toString().length>=e||S){var o=this._normalizeNumber(d.number,e,d.numberFactor,d.numberDigits);D.display_number_factor=o.numberFactor;D.display_number_value=o.displayNumber;}else{var f=N.getFloatInstance({maxFractionDigits:e});D.display_number_value=f.format(d.number);}}}if(D&&D.display_number_state){switch(D.display_number_state){case"Positive":D.display_number_state="Good";break;case"Negative":D.display_number_state="Error";break;}}return D;};
a.getTileSettingsAction=function(M,s,t){var U=sap.ui.require("sap/ushell/components/tiles/utils");var r=U.getResourceBundleModel().getResourceBundle();return{text:(!t||t==="tile")?r.getText("tileSettingsBtn"):r.getText("linkSettingsBtn"),press:function(){return new Promise(function(b){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout"],function(c,D,V,S,d){var A={showGroupSelection:false,title:M.getProperty("/config/display_title_text"),subtitle:M.getProperty("/config/display_subtitle_text")};if(!t||t==="tile"){A.info=M.getProperty("/config/display_info_text");A.icon=M.getProperty("/config/display_icon_url");A.keywords=M.getProperty("/config/display_search_keywords");}else if(t==="link"){A.showInfo=false;A.showIcon=false;A.showPreview=false;}V.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(o){var e=new J(A);o.setModel(e);var f=new S({id:"tileSettings",layout:d.GridLayout,content:[o]}).addStyleClass("sapUshellAddBookmarkForm");var g=new c("bookmarkOkBtn",{text:r.getText("okBtn"),type:B.Emphasized,press:function(){s(o);j.close();},enabled:true});var h=new c("bookmarkCancelBtn",{text:r.getText("cancelBtn"),press:function(){j.close();}});var i=function(k){g.setEnabled(!!k.trim());};o.getTitleInput().attachLiveChange(function(){i(this.getValue());});var j=new D({id:"settingsDialog",title:(!t||t==="tile")?r.getText("tileSettingsDialogTitle"):r.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:f,beginButton:g,endButton:h,horizontalScrolling:false,afterClose:function(){j.destroy();}}).addStyleClass("sapContrastPlus");j.open();b(j);});});});}};};
a.getSemanticNavigationUrl=function(c){var U="#"+jQuery.trim(c.navigation_semantic_object);U+="-"+jQuery.trim(c.navigation_semantic_action);if(c.navigation_semantic_parameters&&jQuery.trim(c.navigation_semantic_parameters).length>0){U+="?"+jQuery.trim(c.navigation_semantic_parameters);}return U;};
a.addParamsToUrl=function(U,d){var p="",b=U.indexOf("?")!==-1,t=d.targetParams,i;if(t&&t.length>0){for(i=0;i<t.length;i=i+1){p+=t[i];if(i<t.length-1){p+="&";}}}if(p.length>0){if(!b){U+="?";}else{U+="&";}U+=p;}return U;};
a._normalizeNumber=function(n,b,c,i){var d;if(isNaN(n)){d=n;}else{var o=N.getFloatInstance({maxFractionDigits:i});if(!c){var e=Math.abs(n);if(e>=1000000000){c="B";n/=1000000000;}else if(e>=1000000){c="M";n/=1000000;}else if(e>=1000){c="K";n/=1000;}}d=o.format(n);}var f=d;var g=f[b-1];b-=(g==="."||g===",")?1:0;f=f.substring(0,b);return{displayNumber:f,numberFactor:c};};
a._shouldProcessDigits=function(d,D){var n;d=typeof(d)!=="string"?d.toString():d;if(d.indexOf(".")!==-1){n=d.split(".")[1].length;if(n>D){return true;}}return false;};
return a;},true);
sap.ui.predefine('sap/ushell/components/visualizationOrganizer/Component',["sap/m/library","sap/m/GroupHeaderListItem","sap/ushell/library","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/m/MessageBox"],function(m,G,u,U,F,c,J,L,C,r,M){"use strict";var B=m.ButtonType;return U.extend("sap.ushell.components.visualizationOrganizer.Component",{metadata:{version:"1.96.0",library:"sap.ushell",dependencies:{libs:["sap.m"]},properties:{pressed:{type:"boolean",group:"Misc",defaultValue:false}}},init:function(){U.prototype.init.apply(this,arguments);this.aPersonalizablePages=[];this.mVizIdInPages=new Map();this.stVizIdInSection=new Set();},requestData:function(){var o=!C.last("/core/shell/enablePersonalization")&&C.last("/core/spaces/myHome/enabled");var s=C.last("/core/spaces/myHome/myHomePageId");return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(a){return a.getAllPages();}).then(function(p){if(o){p=p.filter(function(P){return P.identification.id===s;});}this.aPersonalizablePages=p.map(function(P){return{id:P.identification.id,title:P.identification.title};});this._fillVizIdMaps(p);return this.aPersonalizablePages;}.bind(this));},_fillVizIdMaps:function(p){this.mVizIdInPages=new Map();p.forEach(function(P){Object.keys(P.payload.sections).forEach(function(i){Object.keys(P.payload.sections[i].viz).forEach(function(I){var v=P.payload.sections[i].viz[I].vizId;if(this.mVizIdInPages.has(v)){this.mVizIdInPages.get(v).add(P.identification.id);}else{this.mVizIdInPages.set(v,new Set([P.identification.id]));}}.bind(this));}.bind(this));}.bind(this));},isVizIdPresent:function(v,s){if(s){return this.stVizIdInSection.has(v);}var a=this.mVizIdInPages.get(v);return!!(a&&a.size);},formatPinButtonIcon:function(v,s){return(this.isVizIdPresent(decodeURIComponent(v),s)?"sap-icon://accept":"sap-icon://add");},formatPinButtonType:function(v,s){return(this.isVizIdPresent(decodeURIComponent(v),s)?B.Emphasized:B.Default);},formatPinButtonTooltip:function(v,s){var i=this.isVizIdPresent(decodeURIComponent(v),!!s),t,S;if(s){S=s.sectionTitle;if(i){t="VisualizationOrganizer.Button.Tooltip.RemoveFromSection";}else{t="VisualizationOrganizer.Button.Tooltip.AddToSection";}}else if(i){t="EasyAccessMenu_PinButton_Toggled_Tooltip";}else{t="EasyAccessMenu_PinButton_UnToggled_Tooltip";}return r.i18n.getText(t,S);},onTilePinButtonClick:function(e,s){var S=e.getSource();var t=S.getBindingContext().getProperty();if(S.getBusy()){return Promise.resolve();}if(s){S.setBusy(true);return this._applyOrganizationChangeToSection(S,t,s).then(function(){S.setBusy(false);});}if(this.aPersonalizablePages.length===1){S.setBusy(true);return this._applyChangeToPage(S,t,this.aPersonalizablePages[0]).then(function(){S.setBusy(false);});}return this.toggle(S,t);},open:function(o,v){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),l=Promise.resolve();if(!p){l=new Promise(function(a,b){sap.ui.require(["sap/ui/core/Fragment"],function(d){d.load({name:"sap.ushell.components.visualizationOrganizer.VisualizationOrganizerPopover",type:"XML",controller:this}).then(a).catch(b);}.bind(this));}.bind(this)).then(function(a){p=a;p.setModel(new J({pages:[],searchTerm:""}));p.setModel(r.i18nModel,"i18n");});}return l.then(function(){this.oOpenBy=o;this.sVisualizationId=decodeURIComponent(v.id);this.sVisualizationTitle=v.title;this.oVizInfo=v;this.fnResetPopup=this._resetPopup.bind(this);p.attachAfterClose(this.fnResetPopup);return Promise.all([sap.ushell.Container.getServiceAsync("Menu"),sap.ushell.Container.getServiceAsync("CommonDataModel"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(R){var P;if(v.isBookmark){P=R[2]._findBookmarks({url:v.url}).then(function(a){var b=a.map(function(f){return f.pageId;});return Promise.resolve(new Set(b));});}else{P=this.mVizIdInPages.get(this.sVisualizationId);}return Promise.all([R[0].getSpacesPagesHierarchy(),R[1].getAllPages(),P]);}.bind(this)).then(function(R){var s=R[0].spaces,a=R[1],P=R[2],b={};a.forEach(function(g){b[g.identification.id]=g.identification.title;});var O=!C.last("/core/shell/enablePersonalization")&&C.last("/core/spaces/myHome/enabled");var d=C.last("/core/spaces/myHome/myHomeSpaceId");var e=[];s.forEach(function(g){if(O&&g.id!==d){return;}g.pages.forEach(function(h){var i=b[h.id];if(!i){return;}e.push({id:h.id,title:b[h.id],space:g.title,spaceId:g.id,selected:P&&P.has(h.id)});});});var f=p.getModel();f.setProperty("/pages",e);f.setProperty("/pinnedPages",P);this._updatePagesList();p.openBy(o);}.bind(this));}.bind(this));},cancel:function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),o=this._retrieveChangedPageIds();if(p&&o.deleteFromPageIds.length===0&&o.addToPageIds.length===0){p.close();}else{M.show(r.i18n.getText("VisualizationOrganizer.MessageBox.Description"),{id:"sapUshellVisualizationOrganizerDiscardDialog",title:r.i18n.getText("VisualizationOrganizer.MessageBox.Title"),actions:[r.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),M.Action.CANCEL],emphasizedAction:r.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard"),onClose:function(a){if(a===r.i18n.getText("VisualizationOrganizer.MessageBox.ActionDiscard")){p.close();}}});}},toggle:function(o,v){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(p&&p.isOpen()&&p._oOpenBy&&p._oOpenBy.getId()===o.getId()){this.cancel();return Promise.resolve();}return this.open(o,v);},_applyOrganizationChangeToSection:function(o,v,s){var V=decodeURIComponent(v.id),d=v.title,p=s.pageID,S=s.sectionID,P=sap.ushell.Container.getService("Pages"),e,f;if(this.stVizIdInSection.has(V)){f=r.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[d||V,s.sectionTitle,s.pageTitle]);e=P.findVisualization(p,S,V).then(function(g){if(g.length===0){return Promise.resolve();}var h=g[0],i=P.getPageIndex(p),j=h.sectionIndex,k;var l=h.vizIndexes.sort(function(a,b){return b-a;});l.forEach(function(a){if(!k){k=P.deleteVisualization(i,j,a);}else{k=k.then(function(){return P.deleteVisualization(i,j,a);});}});return k;}).then(function(){this.stVizIdInSection.delete(V);}.bind(this));}else{f=r.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[d||V,s.sectionTitle,s.pageTitle]);e=P.addVisualization(p,S,V).then(function(){this.stVizIdInSection.add(V);}.bind(this));}return e.then(function(){o.getBinding("icon").refresh(true);o.getBinding("type").refresh(true);o.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(a){a.show(f,{offset:"0 -50"});});});},_organizeVisualizations:function(){var o=this._retrieveChangedPageIds();if(this.oVizInfo.isBookmark){return this._applyBookmarkOrganizationChange(o,true);}return this._applyOrganizationChange(o,true);},_applyOrganizationChange:function(v,s){var i=(v.addToPageIds.length+v.deleteFromPageIds.length);if(!i){return Promise.resolve();}var V=this.sVisualizationId;var o=this.oOpenBy;var a=new Set();var p;var b=sap.ushell.Container.getServiceAsync("Pages").then(function(P){p=P;});v.deleteFromPageIds.forEach(function(P){if(!a.has(P)){a.add(P);b=b.then(function(){return p.findVisualization(P,null,V).then(function(d){var e=[],f,g,h;for(var n=d.length-1;n>=0;n--){g=d[n];f=p.getPageIndex(g.pageId);for(var N=g.vizIndexes.length-1;N>=0;N--){h=g.vizIndexes[N];e.push(p.deleteVisualization(f,g.sectionIndex,h));}}return Promise.all(e);});});}this.mVizIdInPages.get(V).delete(P);}.bind(this));v.addToPageIds.forEach(function(P){b=b.then(function(){return p.addVisualization(P,null,V);});if(this.mVizIdInPages.has(V)){this.mVizIdInPages.get(V).add(P);}else{this.mVizIdInPages.set(V,new Set([P]));}}.bind(this));return b.then(function(){if(o){o.getBinding("icon").refresh(true);o.getBinding("type").refresh(true);o.getBinding("tooltip").refresh(true);}if(s){sap.ui.require(["sap/m/MessageToast"],function(d){d.show(r.i18n.getText("VisualizationOrganizer.MessageToast"));});}});},_resetPopup:function(e){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover"),P=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList"),s=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch"),t=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");p.detachAfterClose(this.fnResetPopup);s.setValue("");t.setType(B.Default);P.getBinding("items").filter(null);P.removeSelections();delete this.fnResetPopup;delete this.sVisualizationId;delete this.sVisualizationTitle;},pagePressed:function(e){this._changeSelectionForAllPagesWithTheSamePageId(e.getSource());},onSelectionChange:function(e){var s=e.getParameter("listItem"),S=e.getParameter("selected");this._changeSelectionForAllPagesWithTheSamePageId(s,S);},_changeSelectionForAllPagesWithTheSamePageId:function(i,s){var o=i.getModel(),a=i.getBindingContext(),I=a.getProperty("id"),S=(s!==undefined)?s:!a.getProperty("selected");var p=o.getProperty("/pages");for(var b=0;b<p.length;b++){var P=p[b];if(P.id===I){P.selected=S;}}o.setProperty("/pages",p);},_onSearch:function(e){var s=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSelectedPages");var p=this.getPressed();if(e.sId==="press"){p=!p;this.setPressed(p);s.setPressed(p);}this._updatePagesList();},_updatePagesList:function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList");var s=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch");var b=p.getBinding("items");var S=s.getValue();var t=this.getPressed();if(t){b.filter(new F({filters:[new F({filters:[new F({path:"title",operator:c.Contains,value1:S}),new F({path:"selected",operator:c.EQ,value1:t})],and:true}),new F({filters:[new F({path:"space",operator:c.Contains,value1:S}),new F({path:"selected",operator:c.EQ,value1:t})],and:true})],and:false}));}else{b.filter(new F({filters:[new F({path:"title",operator:c.Contains,value1:S}),new F({path:"space",operator:c.Contains,value1:S})],and:false}));}if(b.getLength()===0){p.setNoDataText(r.i18n.getText(S?"VisualizationOrganizer.PagesList.NoResultsText":"VisualizationOrganizer.PagesList.NoDataText"));}},loadSectionContext:function(o){this.stVizIdInSection.clear();if(!o||!o.pageID||!o.sectionID){return Promise.resolve(null);}return sap.ushell.Container.getServiceAsync("Pages").then(function(p){var P=decodeURIComponent(o.pageID),s=decodeURIComponent(o.sectionID);return p.loadPage(P).then(function(a){var b=p.getModel().getProperty(a),S,d;for(var i=0;i<b.sections.length;i++){if(b.sections[i].id===s){S=b.sections[i];break;}}if(!S){return Promise.resolve(null);}S.visualizations.forEach(function(v){this.stVizIdInSection.add(v.vizId);}.bind(this));d={pageID:P,sectionID:s,pageTitle:b.title,sectionTitle:S.title};return Promise.resolve(d);}.bind(this)).catch(function(){L.warning(P+" cannot be loaded. Please, check the id of the page.");return Promise.resolve(null);});}.bind(this));},getPersonalizablePages:function(){return this.aPersonalizablePages;},_retrieveChangedPageIds:function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSpacesList"),s=sap.ui.getCore().byId("sapUshellVisualizationOrganizerSearch"),P=p.getModel(),a=P.getProperty("/pinnedPages")||new Set();p.getBinding("items").filter(null);var i=p.getItems().filter(function(I){return I.isA("sap.m.StandardListItem");});s.fireSearch();var A={},b=[],d=[];i.forEach(function(I){var e=I.getBindingContext().getProperty("id");if(!A[e]){A[e]=true;if(I.getSelected()&&!a.has(e)){b.push(e);}else if(!I.getSelected()&&a.has(e)){d.push(e);}}});return{addToPageIds:b,deleteFromPageIds:d};},okay:function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(p.getBusy()){return;}p.setBusy(true);this._organizeVisualizations().then(function(){p.setBusy(false);p.close();}).catch(function(){L.error("Could not save the selected pages on the VisualizationOrganizerPopover");});},onHierarchyAppsPinButtonClick:function(e,s){var S=e.getSource();var a=S.getParent().getBinding("title").getContext().getObject();if(S.getBusy()){return Promise.resolve(false);}a.isBookmark=true;a.title=a.text;if(s){S.setBusy(true);return this._applyBookmarkTileChangeToSection(a,s).then(function(){S.setBusy(false);return Promise.resolve(true);});}if(this.aPersonalizablePages.length===1){S.setBusy(true);return this._applyChangeToPage(S,a,this.aPersonalizablePages[0]).then(function(){S.setBusy(false);return Promise.resolve(true);});}return new Promise(function(R){this.toggle(S,a).then(function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(p&&p.isOpen()){p.attachEventOnce("afterClose",function(){R(true);});}else{R(false);}});}.bind(this));},_applyBookmarkOrganizationChange:function(v,s){var i=(v.addToPageIds.length+v.deleteFromPageIds.length);if(!i){return Promise.resolve();}var V=this.oVizInfo;var a=new Set();var b,p;var o=Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Pages")]).then(function(S){b=S[0];p=S[1];return Promise.resolve();});v.deleteFromPageIds.forEach(function(P){if(!a.has(P)){a.add(P);o=o.then(function(){return p.deleteBookmarks({url:V.url},P);});}});v.addToPageIds.forEach(function(P){o=o.then(function(){return new Promise(function(R,f){var d={url:V.url,title:V.text,subtitle:V.subtitle,icon:V.icon};var e={type:u.ContentNodeType.Page,id:P,isContainer:true};b.addBookmark(d,e).done(R).fail(f);});});});return o.then(function(){if(s){sap.ui.require(["sap/m/MessageToast"],function(d){d.show(r.i18n.getText("VisualizationOrganizer.MessageToast"));});}});},_applyBookmarkTileChangeToSection:function(v,s){var a=v.url,V=v.title,p=s.pageID,S=s.sectionID,P=sap.ushell.Container.getService("Pages"),o,b;if(v.bookmarkCount>0){b=r.i18n.getText("VisualizationOrganizer.MessageToastSectionContextRemove",[V,s.sectionTitle,s.pageTitle]);o=P.deleteBookmarks({url:a},p,S);}else{var d={url:a,title:v.text,subtitle:v.subtitle,icon:v.icon};b=r.i18n.getText("VisualizationOrganizer.MessageToastSectionContextAdd",[V,s.sectionTitle,s.pageTitle]);o=P.addBookmarkToPage(p,d,S);}return o.then(function(){sap.ui.require(["sap/m/MessageToast"],function(e){e.show(b,{offset:"0 -50"});});});},updateBookmarkCount:function(a,s){return sap.ushell.Container.getServiceAsync("Pages").then(function(P){var b=a.map(function(A){return P._findBookmarks({url:A.url}).then(function(f){if(s){f=f.filter(function(o){return s.pageID===o.pageId&&s.sectionID===o.sectionId;});}A.bookmarkCount=f.length;return A;});});return Promise.all(b);});},formatBookmarkPinButtonTooltip:function(b,s){var t,S;if(s){S=s.sectionTitle;if(b>0){t="VisualizationOrganizer.Button.Tooltip.RemoveFromSection";}else{t="VisualizationOrganizer.Button.Tooltip.AddToSection";}}else if(b>0){t="EasyAccessMenu_PinButton_Toggled_Tooltip";}else{t="EasyAccessMenu_PinButton_UnToggled_Tooltip";}return r.i18n.getText(t,S);},_applyChangeToPage:function(o,v,p){var V=decodeURIComponent(v.id);var s=v.title;var P=p.id;var i=v.isBookmark?v.bookmarkCount>0:this.isVizIdPresent(V);var a={addToPageIds:i?[]:[P],deleteFromPageIds:i?[P]:[]};var b=r.i18n.getText(i?"VisualizationOrganizer.MessageToastPageRemove":"VisualizationOrganizer.MessageToastPageAdd",[s||V,p.title]);this.oVizInfo=v;this.sVisualizationId=V;var d;if(v.isBookmark){d=this._applyBookmarkOrganizationChange(a,false);}else{d=this._applyOrganizationChange(a,false);}return d.then(function(){o.getBinding("icon").refresh(true);o.getBinding("type").refresh(true);o.getBinding("tooltip").refresh(true);sap.ui.require(["sap/m/MessageToast"],function(e){e.show(b,{offset:"0 -50"});});});},groupBySpace:function(b){return{key:b.getProperty("spaceId"),title:b.getProperty("space")};},getGroupHeader:function(s){return new G({title:s.title});},exit:function(){var p=sap.ui.getCore().byId("sapUshellVisualizationOrganizerPopover");if(p){p.destroy();}}});});
sap.ui.predefine('sap/ushell/functionBindPrototype',["sap/base/Log"],function(L){"use strict";L.error("The application uses an obsolete sap.ushell.functionBindPrototype module.","The reference to this module has to be removed.");},false);
sap.ui.predefine('sap/ushell/iconfonts',["sap/ui/core/IconPool"],function(I){"use strict";var a={};
a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});I.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts"),lazy:true});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0020","e0c3"],["F0021","e10d"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0018","e0c3"],["F0019","e0c3"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0366","e129"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E214"],["F0429","E2A6"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2EA"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E384"],["F0718","E383"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1520","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1562","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"],["partner-enablement","E40A"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};
a.registerFonts=function(){var o,i,j,b;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){b={};b.fontFamily=o.fontFamily;b.content=o.icons[j][1];b.overWrite=false;b.suppressMirroring=true;I.addIcon(o.icons[j][0],o.collectionName,b);}}};
return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/Core","sap/ui/core/library","sap/m/library"],function(C,c,m){"use strict";sap.ui.getCore().initLibrary({name:"sap.ushell",version:"1.96.0",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.UI5ComponentType","sap.ushell.VisualizationLoadState","sap.ushell.AppType"],interfaces:[],controls:["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent","sap.ushell.renderers.fiori2.search.controls.DivContainer","sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition","sap.ushell.renderers.fiori2.search.controls.SearchButton","sap.ushell.renderers.fiori2.search.controls.SearchFacet","sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog","sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter","sap.ushell.renderers.fiori2.search.controls.SearchFacetItem","sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar","sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup","sap.ushell.renderers.fiori2.search.controls.SearchFilterBar","sap.ushell.renderers.fiori2.search.controls.SearchInput","sap.ushell.renderers.fiori2.search.controls.SearchLabel","sap.ushell.renderers.fiori2.search.controls.SearchLayout","sap.ushell.renderers.fiori2.search.controls.SearchLink","sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl","sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen","sap.ushell.renderers.fiori2.search.controls.SearchObjectSuggestionImage","sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar","sap.ushell.renderers.fiori2.search.controls.SearchResultGrid","sap.ushell.renderers.fiori2.search.controls.SearchResultList","sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer","sap.ushell.renderers.fiori2.search.controls.SearchResultListItem","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote","sap.ushell.renderers.fiori2.search.controls.SearchResultMap","sap.ushell.renderers.fiori2.search.controls.SearchResultTable","sap.ushell.renderers.fiori2.search.controls.SearchSelect","sap.ushell.renderers.fiori2.search.controls.SearchText","sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer","sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelp","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpDialog","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpPage","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpWizard","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.bookmark.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GridContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellLayout","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:["sap.ushell.ui.launchpad.AccessibilityCustomData"],extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});var u=sap.ushell;u.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};u.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};u.UI5ComponentType={Application:"Application",Plugin:"Plugin",Visualization:"Visualization"};u.ContentNodeType={HomepageGroup:"HomepageGroup",Space:"Space",Page:"Page"};u.components.container.ApplicationType={NWBC:"NWBC",SAPUI5:"SAPUI5",TR:"TR",URL:"URL",WCF:"WCF",WDA:"WDA"};u.DisplayFormat={Standard:"standard",Compact:"compact",Flat:"flat",FlatWide:"flatWide",StandardWide:"standardWide"};u.NavigationState={InProgress:"InProgress",Finished:"Finished"};u.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};u.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};u.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};u.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficientRoles:"InsufficientRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};u.AppType={OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application"};return u;});
sap.ui.predefine('sap/ushell/navigationMode',["sap/base/Log","sap/base/util/isPlainObject"],function(L,i){"use strict";var e={};var _=function(E){var I=true;if(E){if(typeof E!=="object"){I=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){I=false;}else if(typeof E[k]!=="boolean"){I=false;}});}}if(!I){L.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};
e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};
var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(i(E)){return E[a(A)];}return false;};
e.compute=function(n,E,s,A,o){var I,l;_(o);var N={};if(["inplace","explace"].indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(["inplace","explace","frameless"].indexOf(s)>=0){I=e._getInternalNavigationMode(s,n);L.debug("Navigation mode was forced to "+I,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=I;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};
e._getInternalNavigationMode=function(E,A){var I={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"},URL:{inplace:"embedded",explace:"newWindow",frameless:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded",frameless:"newWindow"}};if(!I.hasOwnProperty(A)){L.error(A+" is not a valid application type","expected one of "+Object.keys(I).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"&&E!=="frameless"){L.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace' or 'frameless'","sap.ushell.navigationMode");return null;}if(A==="SAPUI5"&&E==="frameless"){L.error("'"+E+"' is not a valid external navigation mode for application type '"+A+"'","falling back to internal navigation mode '"+I.SAPUI5.frameless+"'","sap.ushell.navigationMode");}return I[A][E];};
e.getExternalNavigationMode=function(I){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(I)){L.error(I+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[I];};
var w=["NWBC","WDA","TR","WCF"];
e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return"newWindowThenEmbedded";}if(r.appCapabilities&&r.appCapabilities.navigationMode){return r.appCapabilities.navigationMode;}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){L.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};
e.computeNavigationModeForHomepageTiles=function(A,s,I){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&I){return"embedded";}return this.getNavigationMode(r);};
return e;},true);
sap.ui.predefine('sap/ushell/override',["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid","sap/base/util/each"],function(G,M,g,e){"use strict";var o={};
o.updateAggregation=function(n){if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],s=A._sMutator+"Group",c=B.isGrouped()&&this[s],i=[],d=function(C){var I=this.getId()+"-"+g(),h=f(I,C);if(h.isA("sap.ui.integration.widgets.Card")){h.setBindingContext(C,"ushellCardModel");}else{h.setBindingContext(C,b.model);}this[A._sMutator](h);}.bind(this);if(c){M.prototype.updateAggregation.apply(this,arguments);}else{i=this[A._sGetter]();o._adaptCurrentGroup(a,i);o._updateCurrentGroup(a,i,b.model,d);i.length=a.length;}}};
o._adaptCurrentGroup=function(b,I){var i,a,c;for(i=0;i<b.length;i++){a=!!(I[i]&&I[i].isA("sap.ui.integration.widgets.Card"));c=!!b[i].getProperty(b[i].sPath+"/isCard");if(a||c){var j=i;for(;j<I.length;j++){I[j].destroy();}break;}}};
o._updateCurrentGroup=function(b,I,B,a){var i;for(i=0;i<b.length;i++){if(i<I.length&&!I[i].bIsDestroyed){I[i].setBindingContext(b[i],B);}else{a(b[i]);}}for(;i<I.length;++i){I[i].destroy();}};
o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,a=null,s=null,t=this,I=t.getItems(),l=0,L=0,i,d,T=[];a=B.isGrouped()&&this.addItemGroup;e(B.getContexts(),function(h,C){if(a&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==s){var j,H;if(b.groupHeaderFactory){j=b.groupHeaderFactory(N);}H=j||new G({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",H,L,true);L=L+1;s=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===G){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){e(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{d=t.getId()+"-"+L;c=f(d,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){e(T,function(i,v){v.destroy();});},1);};
o.updateAggregatesFactory=function(n){return function(){o.updateAggregation.bind(this)(n);};};
return o;},true);
sap.ui.predefine('sap/ushell/performance/FesrEnhancer',["sap/base/Log","sap/base/util/deepExtend","sap/ui/performance/trace/FESR","sap/ushell/performance/ShellAnalytics"],function(L,d,F,S){"use strict";var a={HOME_INITIAL:"FLP@LOAD",HOME_LOADING:"FLP@DURING_LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION"};var I={APP_START:1,STEP_IN_APP:2,UNKNOWN:3};var f={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(F.getActive()){S.enable();this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},reset:function(){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;S.disable();this._setLastTrackedRecord(null);},_getPerformanceEntries:function(e){return performance.getEntriesByName(e);},_getLastTrackedApplicationId:function(){var c=S.getCurrentApplication();if(c){return c.id;}return null;},_getLastTrackedRecord:function(){return this._lastTrackedRecord;},_setLastTrackedRecord:function(n){this._lastTrackedRecord=n;},_onBeforeCreatedHandler:function(u,U){var D=this._detectScenario(u,U),A=this._getLastTrackedApplicationId();if(A){u.appNameShort=A;}if(!D.scenario){return u;}return this._enhanceRecord(D.scenario,u,D.relatedEvent);},_detectScenario:function(u,U){function c(s,e){var r={scenario:s};if(e){r.relatedEvent=e;}return r;}if(u.stepName==="undetermined_startup"){var l=S.getLastClosedRecord();this._setLastTrackedRecord(l);switch(u.appNameLong){case"sap.ushell.components.homepage":return c(a.HOME_INITIAL);case"sap.ushell.components.pages":return c(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return c(a.FINDER_INITIAL);default:return c(a.APP_INITIAL,l);}}var o=this._getLastTrackedRecord(),n=S.getNextNavigationRecords(o),s,N;if(n.length===1){N=n[0];if((N&&o&&!N.isEqual(o))||(!o&&N)){this._setLastTrackedRecord(N);s=N.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return c(s,N);}}else if(n.length>1){n.pop();N=n[0];this._setLastTrackedRecord(N);s=N.step===a.HOME_LOADING?a.HOME_LOADING:a.NAVIGATION;return c(s,N);}return c(null);},_enhanceRecord:function(D,i,r){switch(D){case a.HOME_INITIAL:return this._enhanceInitialStart(i,D,"FLP-TTI-Homepage");case a.FINDER_INITIAL:return this._enhanceInitialStart(i,D,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(i,D,r||{});case a.NAVIGATION:case a.HOME_LOADING:return this._enhanceNavigationRecord(i,D,r||{});default:break;}L.warning("Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return i;},_enhanceInitialStart:function(i,s,p){var m,e=d({},i);e.stepName=s;e.interactionType=I.APP_START;if(p){m=this._getPerformanceEntries(p)[0];if(m){e.timeToInteractive=m.startTime;return e;}L.warning("Scenario '"+s+"' detected but expected performance mark '"+p+"' does not exist",null,"sap.ushell.performance.FesrEnhancer");}return e;},_enhanceNavigationRecord:function(i,D,r){var e=d({},i);if(D!=="FLP@DURING_LOAD"){e.stepName=r.step||i.stepName;}e.appNameShort=r.targetApplication||"";if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}if(/^FLP_BACK/.test(e.stepName)){var m=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(m){if(m.startTime>r.getTimeStart()){e.timeToInteractive=m.startTime-r.getTimeStart();}}}return e;},_enhanceInitialAppStart:function(i,s,r){var e=d({},i);e.stepName=s;e.appNameShort=i.appNameShort;if(r.applicationType==="UI5"){e.interactionType=I.APP_START;}else{e.interactionType=I.STEP_IN_APP;}return e;}};return f;},true);
sap.ui.predefine('sap/ushell/performance/ShellAnalytics',["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord"],function(E,A,S){"use strict";var s=[],d=[],o,c,l,h=false,i=false;var T={"dashboardTileClick":"HOMEPAGE_TILE","dashboardTileLinkClick":"HOMEPAGE_LINK","catalogTileClick":"FINDER_TILE"};var N={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var F={"sap.ushell.components.appfinder":"FLP_FINDER","sap.ushell.components.pages":"FLP_PAGE","sap.ushell.components.homepage":"FLP_HOME"};var t=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];
function _(){return sap.ui.getCore().getEventBus();}
function a(D){return D&&(D==="FLP_HOME"||D==="FLP_PAGE");}
function g(){return s;}
function b(){var D=g().filter(function(R){return R.isClosed();});if(D.length>0){return D[D.length-1];}return null;}
function e(L){if(!L){return g();}return g().filter(function(R){return L.getTimeStart()<R.getTimeStart()&&R.isClosed();});}
function f(){return c;}
function j(D){c=D;}
function k(){l=performance.now();}
function m(){if(!o){o=new S();s.push(o);}return o;}
function n(D,G){m().setTrigger(T[G]);}
function p(D){m().setTargetHash(D);m().setTimeStart(l||performance.now());}
function q(D){var G="";var H=D&&D.componentInstance&&D.componentInstance.getManifest();if(H&&H["sap.app"]&&H["sap.app"].id){G=H["sap.app"].id;}return G;}
function r(){return new Promise(function(D,G){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(H){var I=H.getCurrentApplication();if(!I){D({});return;}if(I.homePage){var J=F[q(I)]||"FLP_HOME";D({type:"UI5",id:J});return;}if(I.applicationType==="UI5"){I.getTechnicalParameter("sap-fiori-id").then(function(L){var M=L[0];if(!M){M=q(I);M=F[M]||M;}M=M.replace(/,/g,"");D({type:"UI5",id:M});});}else{var K=A.getMetadata().technicalName||A.getCurrentApplication().text||I.applicationType;K=K.replace(/,/g,"");D({type:I.applicationType,id:K});}});});}
function u(D,G,H){if(o){var I=G?G.id:null;o.setSourceApplication(D);o.setTargetApplication(I);o.setApplicationType(G?G.type:null);o.setNavigationMode(H);if(!h&&a(I)){h=true;o.setHomepageLoading(true);}o.closeRecord();o=null;}}
function v(){if(!o){return;}r().then(function(D){var G=f();j(D);u(G?G.id:undefined,D,N.INPLACE);});}
function w(){var D=f();u(D?D.id:undefined,null,N.EXPLACE);}
function x(){if(o){var D=f();o.setSourceApplication(D?D.id:undefined);o.closeRecordWithError();o=null;}}
function y(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.attachEvent("hashChanged",k);D.hashChanger.attachEvent("shellHashChanged",k);});}
function z(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(D){D.hashChanger.detachEvent("hashChanged",k);D.hashChanger.detachEvent("shellHashChanged",k);});}
function B(){if(i){return;}i=true;t.forEach(function(G){_().subscribe("launchpad",G,n);});var D;D=E.once("ShellNavigationInitialized").do(y);d.push(D);D=E.on("trackHashChange").do(p);d.push(D);D=E.on("AppRendered").do(v);d.push(D);D=E.on("openedAppInNewWindow").do(w);d.push(D);D=E.on("firstSegmentCompleteLoaded").do(v);d.push(D);D=E.on("doHashChangeError").do(x);d.push(D);D=E.on("PagesRuntimeRendered").do(v);d.push(D);D=E.on("CloseFesrRecord").do(v);d.push(D);}
function C(){if(!i){return;}t.forEach(function(D){_().unsubscribe("launchpad",D,n);});d.forEach(function(D){D.off();});z();j(null);s=[];o=null;i=false;}
return{enable:B,disable:C,getAllRecords:g,getCurrentApplication:f,getLastClosedRecord:b,getNextNavigationRecords:e};},false);
sap.ui.predefine('sap/ushell/performance/StatisticalRecord',[],function(){"use strict";var S={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};
function _(A){return A&&(A==="FLP_HOME"||A==="FLP_PAGE");}
function a(){this.status=S.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;this.homepageLoading=false;this.applicationType=null;}
a.prototype._calculateStep=function(){if(this.targetApplication===undefined&&this.sourceApplication===undefined){return"";}if(this.sourceApplication===undefined&&_(this.targetApplication)){return"FLP@DURING_LOAD";}if(this.sourceApplication===undefined&&!_(this.targetApplication)){return"FLP@DEEP_LINK";}if(this.sourceApplication&&!_(this.targetApplication)&&!_(this.sourceApplication)){return"A2A@"+this.sourceApplication;}if(this.sourceApplication&&_(this.targetApplication)&&!_(this.sourceApplication)){return"FLP_BACK@"+this.sourceApplication;}if(_(this.sourceApplication)){return"FLP@HOMEPAGE_TILE";}return"";};
a.prototype.isEqual=function(o){return this.timeStart===o.timeStart;};
a.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=S.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart;}};
a.prototype.closeRecordWithError=function(){this.status=S.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart;};
a.prototype.isClosed=function(){return this.status===S.CLOSED;};
a.prototype.getStep=function(){return this.step;};
a.prototype.setTrigger=function(t){this.trigger=t;};
a.prototype.setTargetHash=function(t){this.targetHash=t;};
a.prototype.setTimeStart=function(t){this.timeStart=t;};
a.prototype.getTimeStart=function(){return this.timeStart;};
a.prototype.getTimeEnd=function(){return this.timeEnd;};
a.prototype.setSourceApplication=function(s){this.sourceApplication=s;};
a.prototype.setTargetApplication=function(t){this.targetApplication=t;};
a.prototype.setNavigationMode=function(n){this.navigationMode=n;};
a.prototype.setHomepageLoading=function(h){this.homepageLoading=h;};
a.prototype.setApplicationType=function(b){this.applicationType=b;};
return a;},false);
sap.ui.predefine('sap/ushell/plugins/BaseRTAPlugin',["sap/ui/core/Component","sap/ushell/appRuntime/ui5/plugins/baseRta/AppLifeCycleUtils","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Trigger","sap/base/Log"],function(C,A,a,T,L){"use strict";
var B=C.extend("sap.ushell.plugins.BaseRTAPlugin",{
sType:null,
init:function(c){this.mConfig=c;this.mConfig.i18n=this.getModel("i18n").getResourceBundle();this.mConfig.loadPlugins=this._loadPlugins.bind(this);this.mConfig.onStartHandler=this._onStartHandler.bind(this);this.mConfig.onErrorHandler=this._onErrorHandler.bind(this);this.mConfig.onStopHandler=this._onStopHandler.bind(this);this.oTrigger=new T(this.mConfig);this._oPluginPromise=this.oTrigger.getInitPromise().then(a.checkUI5App.bind(a)).then(function(i){if(this.mConfig.checkRestartRTA&&i&&a.checkRestartRTA(this.mConfig.layer)){return this.oTrigger.triggerStartRta(this);}return undefined;}.bind(this)).then(function(){return A.getAppLifeCycleService();}).then(function(o){o.attachAppLoaded(this._onAppLoaded,this);}.bind(this));},
getPluginPromise:function(){return this._oPluginPromise;},
exit:function(){this._oPluginPromise=this._oPluginPromise.then(A.getAppLifeCycleService).then(function(o){o.detachAppLoaded(this._onAppLoaded,this);if(this._onRendererCreated){var c=A.getContainer();c.detachRendererCreatedEvent(this._onRendererCreated,this);}}.bind(this));},
_onAppLoaded:function(){return a.checkUI5App().then(function(i){if(i){if(a.checkRestartRTA(this.mConfig.layer)){this.oTrigger.triggerStartRta(this);}this._adaptButtonVisibility(this.mConfig.id,true);}else{this._adaptButtonVisibility(this.mConfig.id,false);}}.bind(this));},
_onAdapt:function(){return a.checkFlexEnabledOnStart(this).then(function(f){if(!f){return this.oTrigger.handleFlexDisabledOnStart();}return this.oTrigger.triggerStartRta(this);}.bind(this));},
_adaptButtonVisibility:function(c,v){if(typeof c==="string"){c=sap.ui.getCore().byId(c);}if(!c){return;}c.setVisible(v);},
_exitAdaptation:function(){if(this._switchToDefaultMode){this._switchToDefaultMode();}this.oTrigger.exitRta();},
_onStartHandler:function(){},
_onErrorHandler:function(e){this.oTrigger.errorHandler(e);if(e!=="Reload triggered"){this._exitAdaptation();var E;var m;if(e instanceof Error){E=e.stack;m=this.mConfig.i18n.getText("TECHNICAL_ERROR");}else if(typeof e==="string"){E=m=e;}L.error("Cannot start UI Adaptation: ",E);sap.ui.require(["sap/ui/rta/Utils","sap/m/MessageBox"],function(U,M){M.error(m,{title:this.mConfig.i18n.getText("ERROR_TITLE"),onClose:null,styleClass:U.getRtaStyleClassName()});}.bind(this));}},
_onStopHandler:function(){this._exitAdaptation();},
_loadPlugins:function(){return Promise.resolve();}
});
return B;},true);
sap.ui.predefine('sap/ushell/plugins/appwarmup/Component',["sap/ui/core/Component","sap/ui/core/service/ServiceFactory","sap/ui/core/service/ServiceFactoryRegistry","./ShellUIService","sap/base/Log"],function(C,S,a,b,L){"use strict";var g=sap.ui.require.toUrl("sap/ushell/plugins/ghostapp");var p={name:"sap.ushell.plugins.ghostapp",manifest:true,asyncHints:{libs:[{name:"sap.m"},{name:"sap.ui.core"},{name:"sap.f"},{name:"sap.suite.ui.generic.template"},{name:"sap.ui.comp"},{name:"sap.ui.fl"},{name:"sap.ui.generic.app"},{name:"sap.ui.generic.template"},{name:"sap.ui.table"},{name:"sap.ui.unified"},{name:"sap.uxap"},{name:"sap.ui.layout"}],cacheTokens:{dataSources:{"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/":"20180613155243"}},requests:[{name:"sap.ui.fl.changes",reference:"sap.ushell.plugins.ghostapp.Component"}],waitFor:{}},id:"sap.ushell.plugins.ghostapp",componentData:{startupParameters:{},technicalParameters:{}},async:true};var c="sap.ushell.plugins.appwarmup.Component";return C.extend(c,{metadata:{version:"1.96.0",library:"sap.ushell"},doWarmUp:function(){var P=[];P.push(new Promise(function(r,d){sap.ui.require(["sap/ui/model/odata/ODataMetadata"],function(O){var o=O.prototype._loadMetadata;O.prototype._loadMetadata=function(u,s){if(this.sUrl&&this.sUrl.startsWith("/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/$metadata")){this.sUrl=g+"/metadata.xml";O.prototype._loadMetadata=o;}return o.call(this,u,s);};r();},d);}));Promise.all(P).then(function(){a.register("sap.ushell.plugins.appwarmup.ShellUIService",new S(b));return C.create(p);}).then(function(d){var h=document.createElement("div");h.style.visibility="hidden";document.body.appendChild(h);sap.ui.require(["sap/ui/core/ComponentContainer"],function(e){var f=new e();f.setComponent(d);f.placeAt(h);f.addEventDelegate({onAfterRendering:function(){setTimeout(function(){f.destroy();},5000);}});});}).catch(function(){L.error("GhostApp component could not be created",null,this);});},init:function(){this.doWarmUp();}});});
sap.ui.predefine('sap/ushell/plugins/appwarmup/ShellUIService',["sap/ui/core/service/Service"],function(S){"use strict";return S.extend("sap.ushell.plugins.appwarmup.ShellUIService",{setTitle:function(){return;},setHierarchy:function(){return;},setBackNavigation:function(){return;},getTitle:function(){return;},setRelatedApps:function(){return;},getUxdVersion:function(){return 1;}});});
sap.ui.predefine('sap/ushell/plugins/ghostapp/Component',["sap/ui/generic/app/AppComponent"],function(A){"use strict";return A.extend("sap.ushell.plugins.ghostapp.Component",{metadata:{manifest:"json",library:"sap.ushell"}});});
sap.ui.predefine('sap/ushell/plugins/ghostapp/FakeModel',["sap/ui/model/odata/v2/ODataModel"],function(O){"use strict";
var F=O.extend("sap.ushell.plugins.ghostapp.FakeModel",{
constructor:function(s,p){O.apply(this,arguments);this.setDeferredGroups(["undefined",this.sDefaultChangeGroup]);},
setDeferredGroups:function(){O.prototype.setDeferredGroups.apply(this,arguments);this.mDeferredGroups.undefined="undefined";}
});
F.getMetadata().getName=function(){return"sap.ui.model.odata.v2.ODataModel";};
return F;});
sap.ui.predefine('sap/ushell/plugins/rta-personalize/Component',["sap/base/util/UriParameters","sap/m/MessageBox","sap/m/MessageToast","sap/ui/core/Component","sap/ui/fl/Utils","sap/ui/fl/EventHistory","sap/ushell/plugins/BaseRTAPlugin","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer"],function(U,M,a,C,F,E,B,b,R){"use strict";var s="PERSONALIZE_Plugin_ActionButton";
var c=B.extend("sap.ushell.plugins.rta-personalize.Component",{
sType:"rta-personalize",
metadata:{manifest:"json",library:"sap.ushell"},
init:function(){var o={sComponentName:"sap.ushell.plugins.rta-personalize",layer:"USER",developerMode:false,id:s,text:"PERSONALIZE_BUTTON_TEXT",icon:"sap-icon://edit",visible:false,checkRestartRTA:false};B.prototype.init.call(this,o);b.checkUI5App().then(function(i){var d=this.mConfig.visible&&i;return R.createActionButton(this,this._onAdapt.bind(this),d);}.bind(this)).then(this._checkForEnabledControls.bind(this));},
removePersonalizableControl:function(o){var i=this._aPersonalizableControls.indexOf(o);this._aPersonalizableControls.splice(i,1);this._aOriginalFooterVisibility.splice(i,1);if(this._aPersonalizableControls.length===0){this._oObserver.disconnect();delete this._oObserver;this._adaptButtonVisibility(s,false);}},
_checkForEnabledControls:function(){this._aPersonalizableControls=[];this._aOriginalFooterVisibility=[];function d(f){if(this._aPersonalizableControls.indexOf(f)===-1){this._aPersonalizableControls.push(f);b.checkUI5App().then(function(i){this._adaptButtonVisibility(s,i);}.bind(this));}}function o(f,g,v){if(F.checkControlId(v)){var h=this._getControlInstance(v);d.call(this,h);if(!this._oObserver){this._oObserver=new MutationObserver(function(m){this._aPersonalizableControls.forEach(function(p){if(!p.getDomRef()){this.removePersonalizableControl(p);}}.bind(this));}.bind(this));var O={attributes:true,childList:true,characterData:false,subtree:true,attributeFilter:["style","class"]};this._oObserver.observe(window.document,O);}}}sap.ui.getCore().getEventBus().subscribe("sap.ui","ControlForPersonalizationRendered",o,this);var e=E.getHistoryAndStop("ControlForPersonalizationRendered");e.forEach(function(f){o.call(this,f.channelId,f.eventId,f.parameters);}.bind(this));},
_getControlInstance:function(e){if(typeof e==="string"){var o=sap.ui.getCore().byId(e);return o||C.get(e);}return e;},
_onAppLoaded:function(){var l=this._aPersonalizableControls.length;for(var i=l;i>0;i--){this.removePersonalizableControl(this._aPersonalizableControls[i-1]);}},
_onStartHandler:function(e){var i=e.getParameter("editablePluginsCount");if(i!==undefined&&i<=0){M.information(this.mConfig.i18n.getText("MSG_STARTUP_NO_OVERLAYS"),{onClose:function(){this.oTrigger.triggerStopRta(true,true);}.bind(this)});}},
_loadPlugins:function(r){var p=new Promise(function(d){sap.ui.require(["sap/ui/rta/plugin/EasyAdd","sap/ui/rta/plugin/EasyRemove"],function(e,f){var P=r.getDefaultPlugins(),o=P.remove;P.remove=new f({commandFactory:o.getCommandFactory()});var A=P.additionalElements;P.additionalElements=new e({commandFactory:A.getCommandFactory()});P.contextMenu.setOpenOnClick(false);r.setPlugins(P);d();});});return p;},
_onAdapt:function(e){return Promise.resolve(e.getSource()).then(function(S){return b.checkFlexEnabledOnStart(this).then(function(f){return{source:S,flexEnabled:f};});}.bind(this)).then(function(p){if(!p.flexEnabled){this.oTrigger.handleFlexDisabledOnStart();}else if(p.source.getText()===this.mConfig.i18n.getText("PERSONALIZE_BUTTON_TEXT")){var u=U.fromURL(window.location.href),S=u.mParams["sap-ui-layer"]&&u.mParams["sap-ui-layer"][0];if(!S||S==="USER"){p.source.setText(this.mConfig.i18n.getText("END_PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",false);this._aPersonalizableControls.forEach(function(d){if(d.setShowFooter){this._aOriginalFooterVisibility.push(d.getShowFooter());}else{this._aOriginalFooterVisibility.push(undefined);}}.bind(this));this._adaptFooterVisibility(false);var o=this._getFlpSearchButton();this._bOriginalSearchButtonVisibility=o&&o.getVisible();if(this._bOriginalSearchButtonVisibility){this._adaptButtonVisibility(o,false);}B.prototype._onAdapt.call(this);}else{M.information(this.mConfig.i18n.getText("MSG_STARTUP_WRONG_LAYER"));}}else{this.oTrigger.triggerStopRta(false,true);}}.bind(this));},
_switchToDefaultMode:function(){sap.ui.getCore().byId(s).setText(this.mConfig.i18n.getText("PERSONALIZE_BUTTON_TEXT"));this._adaptButtonVisibility("RTA_Plugin_ActionButton",true);this._adaptFooterVisibility(true);if(this._bOriginalSearchButtonVisibility!==undefined){this._adaptButtonVisibility(this._getFlpSearchButton(),this._bOriginalSearchButtonVisibility);delete this._bOriginalSearchButtonVisibility;}a.show(this.mConfig.i18n.getText("SAVE_SUCCESSFUL"),{duration:4000,offset:"0 -50"});},
_adaptFooterVisibility:function(v){this._aPersonalizableControls.forEach(function(o,i){if(this._aOriginalFooterVisibility[i]){o.setShowFooter(v);}}.bind(this));},
_getFlpSearchButton:function(){return this.oRenderer.getRootControl().getOUnifiedShell().getHeader().getHeadEndItems()[0];},
_getFLPViewPort:function(){return sap.ui.getCore().byId("viewPortContainer");}
});
return c;});
sap.ui.predefine('sap/ushell/plugins/rta/Component',["sap/ushell/plugins/BaseRTAPlugin","sap/ushell/appRuntime/ui5/plugins/baseRta/CheckConditions","sap/ushell/appRuntime/ui5/plugins/baseRta/Renderer"],function(B,C,R){"use strict";
var a=B.extend("sap.ushell.plugins.rta.Component",{
sType:"rta",
metadata:{manifest:"json",library:"sap.ushell"},
init:function(){var c={sComponentName:"sap.ushell.plugins.rta",layer:"CUSTOMER",developerMode:false,id:"RTA_Plugin_ActionButton",text:"RTA_BUTTON_TEXT",icon:"sap-icon://wrench",visible:true,checkRestartRTA:true};B.prototype.init.call(this,c);C.checkUI5App().then(function(i){var b=this.mConfig.visible&&i;return R.createActionButton(this,this._onAdapt.bind(this),b);}.bind(this));}
});
return a;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',["sap/ui/base/EventProvider","sap/ui/Device","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources"],function(E,D,h,C,a,r){"use strict";
var A=E.extend("sap.ushell.renderers.fiori2.AccessKeysHandler",{constructor:function(){E.apply(this,arguments);a.on("AppRendered").do(this.appOpenedHandler.bind(this));this.bFocusOnShell=true;this.bFocusPassedToExternalHandlerFirstTime=true;this.isFocusHandledByAnotherHandler=false;this.fnExternalKeysHandler=null;this.sLastExternalKeysHandlerUrl=null;this.fnExternalShortcuts=null;this.bForwardNavigation=true;this.aShortcutsDescriptions=[];}});
A.prototype.init=function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExternalKeysHandler(e);}var c=C.last("/core/shell/model/currentState/stateName");if(c!=="headerless"&&c!=="headerless-home"){var b=(c==="home"||c==="app"||c==="minimal");this.handleShortcuts(e,b);}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);};
A.prototype.appOpenedHandler=function(){var c=h.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;};
A.prototype._focusItemInOverflowPopover=function(i,c){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o&&o.isOpen()){if(o.getContent().length){this._focusItemInPopover(i,o.getContent()[0].getItems());}}else if(c<10){var O=window.document.getElementById("endItemsOverflowBtn");if(O){O.click();var t=this;window.setTimeout(function(){t._focusItemInOverflowPopover(i,++c);},300);}}};
A.prototype._focusItemInUserMenu=function(i,c){var u=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(u&&u.isOpen()){if(u.getContent().length){this._focusItemInPopover(i,u.getContent()[0].getItems());}}else if(c<10){var t=this;a.emit("showMeArea",Date.now());window.setTimeout(function(){t._focusItemInUserMenu(i,++c);},300);}};
A.prototype._focusItemInPopover=function(I,b){for(var i=0;i<b.length;i++){var c=b[i].getId().split("-");if(c[c.length-1]===I){b[i].getDomRef().focus();return;}}};
A.prototype._handleAccessOverviewKey=function(b){var s=this.oModel.getProperty("/searchAvailable"),p=this.oModel.getProperty("/personalization"),e=C.last("/core/catalog/enabled"),c=C.last("/core/shell/model/enableNotifications");if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}var S=[];S=S.concat(this.aShortcutsDescriptions);var d,f;if(D.os.macintosh){d=r.i18n.getText("OptionKey");f=r.i18n.getText("CommandKey");}else{d=r.i18n.getText("AltKey");f=r.i18n.getText("ControlKey");}if(window.document.getElementById("shell-header")){if(e&&b){S.push({text:d+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")});}if(s){S.push({text:d+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")});}S.push({text:d+" + H",description:r.i18n.getText("hotkeyHomePage")});S.push({text:d+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(c){S.push({text:d+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")});}if(b){S.push({text:d+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")});}if(p&&e){S.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeyExitEditing")});}if(s){S.push({text:f+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")});}}sap.ui.require(["sap/m/Label","sap/m/MessageBox","sap/m/Text","sap/m/VBox"],function(L,M,T,V){var v=new V();S.forEach(function(o){v.addItem(new L({text:o.description}));v.addItem(new T({text:o.text}).addStyleClass("sapUiSmallMarginBottom"));});M.show(v,{id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),styleClass:"sapContrastPlus"});});};
A.prototype._focusAppFinderButton=function(){if(!C.last("/core/catalog/enabled")){return;}if(this._isFocusInDialog()){return;}var o=window.document.getElementById("openCatalogBtn");if(o){o.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return;}this._focusItemInUserMenu("openCatalogBtn",0);};
A.prototype._focusSettingsButton=function(){if(this._isFocusInDialog()){return;}var s=window.document.getElementById("userSettingsBtn");if(s){s.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return;}this._focusItemInUserMenu("userSettingsBtn",0);};
A.prototype._blockBrowserDefault=function(e){return new Promise(function(b){if(D.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");b();}},0);}}else{b();}e.preventDefault();});};
A.prototype._handleAltShortcutKeys=function(e,b){var s=sap.ui.getCore().byId("shell-header"),u=sap.ui.getCore().byId("sapUshellMeAreaPopover"),n=sap.ui.getCore().byId("shellNotificationsPopover");if(this._isFocusInInput()){return;}if(s){if(b){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this));}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this));}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var S=window.document.getElementById("sf"),o=window.document.getElementById("searchFieldInShell-button");if(S){S.focus();}else if(o){o.focus();}else{this._focusItemInOverflowPopover("sf",0);}}.bind(this));}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var l=document.getElementById("shell-header-logo");if(l){l.focus();return;}var H=document.getElementById("homeBtn");if(H){H.focus();}}.bind(this));}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(u&&u.isOpen())){a.emit("showMeArea",Date.now());}}.bind(this));}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(n&&n.isOpen())){a.emit("showNotifications",Date.now());}}.bind(this));}}};
A.prototype._handleCtrlShortcutKeys=function(e,b){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var s=sap.ui.getCore().byId("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}}}else if(e.keyCode===188&&b){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var S=sap.ui.getCore().byId("userSettingsBtn");if(S&&!this._isFocusInSmartTable()){S.firePress();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}this._handleAccessOverviewKey(b);}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var c=window.document.getElementById("appFinderSearch-I");if(c){c.focus();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}if(C.last("/core/spaces/enabled")){this.fireEvent("editModeDone");}else{var d=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(d&&d.getDomRef()){d.firePress();e.preventDefault();e.stopPropagation();}}}};
A.prototype.handleShortcuts=function(e,b){if(D.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}e.preventDefault();}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,b);}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,b);}};
A.prototype.registerAppKeysHandler=function(H){this.fnExternalKeysHandler=H;this.sLastExternalKeysHandlerUrl=h.getHash();};
A.prototype.resetAppKeysHandler=function(){this.fnExternalKeysHandler=null;};
A.prototype.getAppKeysHandler=function(){return this.fnExternalKeysHandler;};
A.prototype.registerAppShortcuts=function(H,s){this.fnExternalShortcuts=H;this.aShortcutsDescriptions=s;};
A.prototype._handleFocusBackToMe=function(e,i){this.bFocusOnShell=true;var f;if(i){f=window.document.getElementById(i);}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6";}f=window.document.getElementById("sapUshellHeaderAccessibilityHelper");}if(f){f.focus();this.fromOutside=false;}this.bFocusPassedToExternalHandlerFirstTime=true;};
A.prototype.setIsFocusHandledByAnotherHandler=function(H){this.isFocusHandledByAnotherHandler=H;};
A.prototype.sendFocusBackToShell=function(p){var e,i;if(typeof p==="string"){i=p;}else if(typeof p==="object"){e=p;}this._handleFocusBackToMe(e,i);};
A.prototype._handleEventUsingExternalKeysHandler=function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(typeof this.fnExternalKeysHandler==="function"){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);};
A.prototype._cancelHelpEvent=function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);};
A.prototype._isFocusInInput=function(){var t=(document.activeElement||{}).tagName;return t==="INPUT"||t==="TEXTAREA";};
A.prototype._isFocusInDialog=function(){var e=document.activeElement;for(;e!==document.body;e=e.parentNode){if(e.classList.contains("sapMDialog")){return true;}}return false;};
A.prototype._isFocusInSmartTable=function(){var e=document.activeElement;var c;for(;e!==document.body;e=e.parentNode){c=e.classList;if(c.contains("sapUiCompSmartTable")||c.contains("sapUiMdcTable")){return true;}}return false;};
return new A();});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};
H.prototype.hashChange=function(n){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};
H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};
H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};
H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};
H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};
H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};
H.prototype.getHistoryLength=function(){return this._history.length;};
return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/LogonFrameProvider',["sap/m/Button","sap/m/Dialog","sap/ui/core/HTML","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/Config","sap/ushell/resources"],function(B,D,H,C,a,r){"use strict";
function c(){d();var o=new D({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",content:new H("SAMLDialogFrame",{content:"<iframe id=SAMLDialogFrame src=\"\"></iframe>"}),rightButton:new B({text:r.i18n.getText("samlCloseBtn"),press:sap.ushell.Container.cancelLogon.bind(sap.ushell.Container)})}).addStyleClass("sapUshellIframeDialog sapContrastPlus sapUshellSamlDialogHidden");if(a.last("/core/extension/SupportTicket")){var b=new C();b.setWidth("150px");b.setIcon("");o.setLeftButton(b);}o.open();t(true);return document.getElementById("SAMLDialogFrame");}
function t(h){var b=document.getElementById("sap-ui-blocklayer-popup");if(b){if(h){b.classList.add("sapUshellSamlDialogHidden");}else{b.classList.remove("sapUshellSamlDialogHidden");}}}
function d(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.destroy();}}
function s(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.removeStyleClass("sapUshellSamlDialogHidden");t(true);}}
return{create:c,show:s,destroy:d};},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/library","sap/ui/core/mvc/View","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(U,T,C,e,u,A,D,J,s,a,r,b,q,L,O,c,d,V,S,N){"use strict";var f=c.mvc.ViewType;var g=d.AppType;
var R=U.extend("sap.ushell.renderers.fiori2.Renderer",{
metadata:{version:"1.96.0",dependencies:{version:"1.96.0",libs:["sap.ui.core","sap.m"],components:[]},interfaces:["sap.ui.core.IAsyncContentCreation"],routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:C.last("/core/spaces/enabled")?"pages":"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:C.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:C.last("/core/spaces/enabled")?"pages":"home"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:C.last("/core/home/featuredGroup/enable")?["sap/fiori/flp-controls.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",componentData:{},options:{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}}}}},
init:function(){U.prototype.init.apply(this,arguments);var t=this,o=this.getRouter();var p=function(E){e.emit("trackHashChange","Shell-home");if(a.getCurrentApplication()){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.setIsInitialNavigation(false);});}var i=window.hasher.getHash();if(!C.last("/core/spaces/enabled")&&i.indexOf("Launchpad-openFLPPage")===0){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){k.replaceHashWithoutNavigation("Shell-home");});}var H=r.i18n.getText("homeBtn_tooltip");var j=t.getShellConfig().rootIntent;var I=!j||u.isFlpHomeIntent(j);A.switchViewState(I?"home":"app",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(H);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();s.initializeAccessKeys();};o.getRoute("home").attachMatched(p);o.getRoute("openFLPPage").attachMatched(p);o.getRoute("appfinder-legacy").attachMatched(function(E){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(E){if(!C.last("/core/catalog/enabled")){L.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return;}e.emit("trackHashChange","Shell-appFinder");var i=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component")),j=E.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){A.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var k=i.getRouter();i.getRootControl().loaded().then(function(){k.parse(j["innerHash*"]||"");});A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();s.initializeAccessKeys();});var h=new J(D);h.setDefaultBindingMode("OneWay");this.setModel(h,"device");this.setModel(r.i18nModel,"i18n");}
});
R.prototype.createContent=function(){var p=new b(window.location.href).get("appState")||new b(window.location.href).get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"};w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=q.extend(true,o,v.config);q.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config.enablePersonalization=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config.enablePersonalization=C.last("/core/shell/enablePersonalization");}if(!v.config.enablePersonalization){v.config.moveEditHomePageActionToShellHeader=false;v.config.moveAppFinderActionToShellHeader=false;}}if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(j){var k=v.config.customViews[j];sap.ui.view(j,{type:k.viewType,viewName:k.viewName,viewData:k.componentData});});}var h=C.createModel("/core/shell/model",J);v.shellModel=h;if(!this.getComponentData().async){var i=sap.ui.view("mainShell",{type:f.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});i.setModel(h);this._oShellView=i;this.oShellModel=A.getElementsModel();i.loaded().then(function(j){sap.ushell.renderers.fiori2.utils.init(j.getController());this.shellCtrl=j.oController;}.bind(this));return i;}return V.create({id:"mainShell",viewName:"module:sap/ushell/renderers/fiori2/ShellAsync.view",viewData:v}).then(function(j){j.setModel(h);this._oShellView=j;this.oShellModel=A.getElementsModel();sap.ushell.renderers.fiori2.utils.init(j.getController());this.shellCtrl=j.getController();return j;}.bind(this));};
R.prototype.createExtendedShellState=function(h,i){return A.shellElements().createExtendedShellState(h,i);};
R.prototype.applyExtendedShellState=function(h,i){this.oShellModel.applyExtendedShellState(h,i);};
R.prototype.showLeftPaneContent=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("paneContent",I);}else{this.oShellModel.addLeftPaneContent(I,false,j);}};
R.prototype.showHeaderItem=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("headItems",I);}else{this.oShellModel.addHeaderItem(I,false,j);}};
R.prototype.showRightFloatingContainerItem=function(i,h,j){var I=typeof i==="string"?[i]:i;if(h){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",I);}else{this.oShellModel.addRightFloatingContainerItem(I,false,j);}};
R.prototype.showRightFloatingContainer=function(h){A.shellElements().setShellModelForApplications("showRightFloatingContainer",h);};
R.prototype.showToolAreaItem=function(i,h,j){this.oShellModel.addToolAreaItem(i,true,h,j);};
R.prototype.showActionButton=function(i,h,j){var B=[],k=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});k=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,h,j);}if(k.length){if(h){A.shellElements().addShellModelForApplications("actions",i);}else{this.oShellModel.addActionButton(i,false,j);}}};
R.prototype.showFloatingActionButton=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,j);}};
R.prototype.showHeaderEndItem=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,j);}};
R.prototype.setHeaderVisibility=function(v,h,i){if(h){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,i);}};
R.prototype.showSubHeader=function(i,h,j){if(h){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,j);}};
R.prototype.showSignOutItem=function(h,i){if(h){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(h,i);}};
R.prototype.showSettingsItem=function(h,i){this.oShellModel.showSettingsButton(h,i);};
R.prototype.setFooter=function(F){this.shellCtrl.setFooter(F);};
R.prototype.setShellFooter=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=i.getId();this.shellCtrl.setFooter(i);o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(l){i=new l(k);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=i.getId();t.shellCtrl.setFooter(i);o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.setFooterControl=function(h,o){var i=h.replace(/\./g,"/"),j=sap.ui.require(i),k,l=false;if(j){l=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}k=this.createItem(o,undefined,function(p){if(h){if(l){return new j(p);}var m=O.get(h||"");return new m(p);}L.warning("You must specify control type in order to create it");return undefined;});if(this.lastFooterId){this.removeFooter();}this.lastFooterId=k.getId();this.shellCtrl.setFooter(k);return k;};
R.prototype.hideHeaderItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],h,j);}else{this.oShellModel.removeHeaderItem(i,h,j);}};
R.prototype.removeToolAreaItem=function(i,h,j){if(typeof i==="string"){i=[i];}this.oShellModel.removeToolAreaItem(i,h,j);};
R.prototype.removeRightFloatingContainerItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],h,j);}else{this.oShellModel.removeRightFloatingContainerItem(i,h,j);}};
R.prototype.hideActionButton=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeActionButton([i],h,j);}else{this.oShellModel.removeActionButton(i,h,j);}};
R.prototype.hideLeftPaneContent=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],h,j);}else{this.oShellModel.removeLeftPaneContent(i,h,j);}};
R.prototype.hideFloatingActionButton=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],h,j);}else{this.oShellModel.removeFloatingActionButton(i,h,j);}};
R.prototype.hideHeaderEndItem=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],h,j);}else{this.oShellModel.removeHeaderEndItem(i,h,j);}};
R.prototype.hideSubHeader=function(i,h,j){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],h,j);}else{this.oShellModel.removeSubHeader(i,h,j);}};
R.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var F=sap.ui.getCore().byId(this.lastFooterId);if(F){F.destroy();}this.lastFooterId=undefined;}};
R.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};
R.prototype.addShellSubHeader=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(I){this.showSubHeader(i.getId(),l,m);}o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(n){i=new n(k);if(I){t.showSubHeader(i.getId(),l,m);t.oShellModel.addElementToManagedQueue(i);}o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.addSubHeader=function(h,o,i,j,k){var l=h.replace(/\./g,"/"),m=sap.ui.require(l),n,p=false;if(m){p=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}n=this.createItem(o,j,function(P){if(h){if(p){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showSubHeader(n.getId(),j,k);}return n;};
R.prototype.addUserAction=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=l?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),n=p.aStates,v;if(k){i=sap.ui.getCore().byId(k.id);}if(i){o.resolve(i);}if(j){if(j==="sap.m.Button"){j="sap.ushell.ui.launchpad.ActionItem";}h=j.replace(/\./g,"/");sap.ui.require([h],function(w){var x;if(l){x=A.shellElements().getStateModelToUpdate();A.shellElements().setStateModelToUpdate(m);}else{x=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);}i=i||new w(k);if(!i.getActionType){i=new w(k);}if(I){t.showActionButton(i.getId(),l,n);}if(l){A.shellElements().setStateModelToUpdate(x);}else{t.oShellModel.setModelToUpdate(x,false);}o.resolve(i);});}else{v="You must specify control type in order to create it";L.warning(v);o.reject(v);}return o.promise();};
R.prototype.addActionButton=function(h,o,i,j,k){var l,m,n=false;if(h==="sap.m.Button"){h="sap.ushell.ui.launchpad.ActionItem";}l=h.replace(/\./g,"/");var p=sap.ui.require(l);if(p){n=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}m=this.createItem(o,j,function(P){if(h){if(n){return new p(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showActionButton(m.getId(),j,k);}return m;};
R.prototype.addFloatingButton=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){if(I){t.showFloatingActionButton(i.getId(),l,m);t.oShellModel.addElementToManagedQueue(i);}o.resolve(i);}}if(j){h=j.replace(/\./g,"/");}else{h="sap/m/Button";}sap.ui.require([h],function(n){i=new n(k);if(I){this.showFloatingActionButton(i.getId(),l,m);}o.resolve(i);});return o.promise();};
R.prototype.addFloatingActionButton=function(h,o,i,j,k){var l,m,n,p=false;if(!h){h="sap.m.Button";}l=h.replace(/\./g,"/");m=sap.ui.require(l);if(m){p=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}n=this.createItem(o,j,function(P){if(h){if(p){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showFloatingActionButton(n.getId(),j,k);}return n;};
R.prototype.addSidePaneContent=function(p){var o=new q.Deferred(),t=this,h,i,j=p.controlType,k=p.oControlProperties,I=p.bIsVisible,l=p.bCurrentState,m=p.aStates;if(k&&k.id&&sap.ui.getCore().byId(k.id)){i=sap.ui.getCore().byId(k.id);if(i){o.resolve(i);}}if(j){h=j.replace(/\./g,"/");sap.ui.require([h],function(n){i=new n(k);if(I){t.oShellModel.addElementToManagedQueue(i);t.showLeftPaneContent(i.getId(),l,m);}o.resolve(i);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};
R.prototype.addLeftPaneContent=function(h,o,i,j,k){var l=h.replace(/\./g,"/"),m=sap.ui.require(l),n;if(m){n=true;}else if(!O.get(h||"")){L.error("Renderer.setFooterControl: the referenced control resourse "+h+" is not available.",undefined,"sap.ushell.renderers.fiori2.Renderer");return undefined;}var p=this.createItem(o,j,function(P){if(h){if(n){return new m(P);}var t=O.get(h||"");return new t(P);}L.warning("You must specify control type in order to create it");return undefined;});if(i){this.showLeftPaneContent(p.getId(),j,k);}return p;};
R.prototype.addHeaderItem=function(h,o,i,j,k){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];j=arguments[2];k=arguments[3];}else{L.error("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var I=this.createItem(o,j,function(p){return new S(p);});if(i){this.showHeaderItem(I.getId(),j,k);}return I;};
R.prototype.addRightFloatingContainerItem=function(o,i,h,j){var I=this.createItem(o,h,function(p){return new N(p);});if(i){this.showRightFloatingContainerItem(I.getId(),h,j);}return I;};
R.prototype.addToolAreaItem=function(o,i,h,j){o.visible=!!i;var k=function(p){return new T(p);},I=this.createItem(o,h,k);this.oShellModel.addToolAreaItem(I.getId(),!!i,h,j);return I;};
R.prototype.addHeaderEndItem=function(h,o,i,j,k){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];j=arguments[2];k=arguments[3];}var I=this.createItem(o,j,function(p){return new S(p);});if(i){this.showHeaderEndItem(I.getId(),j,k);}return I;};
R.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};
R.prototype.addEndUserFeedbackCustomUI=function(o,h){if(o||h){L.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.");}};
R.prototype.addUserPreferencesEntry=function(h){return this.shellCtrl.addUserPreferencesEntry(h);};
R.prototype.setHeaderTitle=function(t){this.shellCtrl.setHeaderTitle(t);};
R.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};
R.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};
R.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};
R.prototype.setFloatingContainerContent=function(o,h,i){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[o.getId()],h,i);};
R.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};
R.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};
R.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};
R.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};
R.prototype.setFloatingContainerDragSelector=function(E){this.shellCtrl.setFloatingContainerDragSelector(E);};
R.prototype.makeEndUserFeedbackAnonymousByDefault=q.noop;R.prototype.showEndUserFeedbackLegalAgreement=q.noop;R.prototype.LaunchpadState={App:"app",Home:"home"};
R.prototype.createTriggers=function(t,h,i){this.oShellModel.createTriggers(t,h,i);};
R.prototype.convertButtonsToActions=function(i,h,j){var p={},B,t=this;i.forEach(function(I){B=sap.ui.getCore().byId(I);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,h,j);});};
R.prototype.createItem=function(o,h,i){var I;if(o&&o.id){I=sap.ui.getCore().byId(o.id);}if(!I){I=i(o);if(h){this.oShellModel.addElementToManagedQueue(I);}}return I;};
R.prototype.addEntryInShellStates=function(n,h,i,j,o){this.oShellModel.addEntryInShellStates(n,h,i,j,o);};
R.prototype.removeCustomItems=function(h,i,j,k){if(typeof i==="string"){this.oShellModel.removeCustomItems(h,[i],j,k);}else{this.oShellModel.removeCustomItems(h,i,j,k);}};
R.prototype.addCustomItems=function(h,i,j,k){if(typeof i==="string"){this.oShellModel.addCustomItems(h,[i],j,k);}else{this.oShellModel.addCustomItems(h,i,j,k);}};
R.prototype.addRightViewPort=function(v){this.shellCtrl.getViewPortContainer().addRightViewPort(v,false);};
R.prototype.addLeftViewPort=function(v){this.shellCtrl.getViewPortContainer().addLeftViewPort(v,false);};
R.prototype.getShellController=function(){return this.shellCtrl;};
R.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState();};
R.prototype.ViewPortContainerNavTo=function(n,t,h){return this.shellCtrl.getViewPortContainer().navTo(n,t,h);};
R.prototype.switchViewPortStateByControl=function(){};
R.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=function(){};
R.prototype.setMeAreaSelected=function(h){this.shellCtrl.setMeAreaSelected(h);};
R.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};
R.prototype.setNotificationsSelected=function(h){this.shellCtrl.setNotificationsSelected(h);};
R.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};
R.prototype.addShellDanglingControl=function(o){this.shellCtrl.getView().addDanglingControl(o);};
R.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};
R.prototype.getEndUserFeedbackConfiguration=function(){return{};};
R.prototype.reorderUserPrefEntries=function(h){return this.shellCtrl._reorderUserPrefEntries(h);};
R.prototype.addUserProfilingEntry=function(h){this.shellCtrl.addUserProfilingEntry(h);};
R.prototype.logRecentActivity=function(o){if(!o.appType){o.appType=g.APP;}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};
R.prototype.setCurrentCoreView=function(h){this.currentCoreView=h;};
R.prototype.getCurrentCoreView=function(){return this.currentCoreView;};
R.prototype._isBuiltInIntent=function(p){if(!R._aBuiltInRoutes){var h=R.getMetadata().getRoutes();R._aBuiltInRoutes=h.reduce(function(j,o){return j.concat(o.pattern);},[]);}if(!p||!p.semanticObject||!p.action){return false;}var i=p.semanticObject+"-"+p.action;return R._aBuiltInRoutes.indexOf(i)!==-1;};
return R;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',["sap/ushell/EventHub","sap/base/Log"],function(E,L){"use strict";
function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}
function a(t,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",t,D);},0);}
sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;
function b(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[t,u]);}
function c(B,t,u){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[t,u]);}
function d(B,t,u){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[t,u]);}
function e(C,t,u){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[t,u]);}
function f(t,u){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[t,u]);}
function g(I,t,u){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[t,u]);}
function h(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[t,u]);}
function i(I,t,u){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[t,u]);}
function j(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[t,u]);}
function k(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}
function l(){L.info("Application calls sap.ushell.Rederer.addEndUserFeedbackCustomUI. This funciton is deprecated. The call has no effect.");}
function m(t){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(t);}
function n(t){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(t);}
function o(t,v){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(t,v);}
function p(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}
function q(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}
function r(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}
function R(){this.addHeaderItem=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[t,u]);};this.setHeaderItemVisibility=function(I,t,T,u){var v=sap.ui.getCore().byId(I);if(u){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(v.getId(),T,[t]);}};this.addSubHeader=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[t,u]);};this.removeSubHeader=function(I,t,u){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[t,u]);};this.addHeaderEndItem=i;this.removeHeaderItem=b;this.removeHeaderEndItem=j;this.addEndUserFeedbackCustomUI=l;this.addOptionsActionSheetButton=c;this.removeOptionsActionSheetButton=d;this.setFooter=q;this.removeFooter=r;this.addUserPreferencesEntry=m;this.setHeaderTitle=n;this.setHeaderHiding=p;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=g;this.removeFloatingActionButton=h;this.setLeftPaneContent=e;this.removeLeftPaneContent=f;this.setLeftPaneVisibility=o;this.getConfiguration=k;}
var s=new R();return s;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ushell/library","sap/ui/Device","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/core/routing/History","sap/ui/core/routing/HashChanger","sap/ui/core/mvc/Controller","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/bootstrap/SchedulingAgent","sap/ui/core/library","sap/ushell/performance/FesrEnhancer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/util/Storage","sap/m/InstanceManager","sap/ushell/services/Message","sap/ui/thirdparty/hasher","sap/ushell/renderers/fiori2/LogonFrameProvider","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices"],function(u,D,A,H,a,b,c,W,r,U,E,C,d,f,g,h,j,k,S,l,F,L,q,M,m,n,o,I,p,s,t,R){"use strict";var v=l.routing.HistoryDirection;var w=u.AppType;var x=true,P=false,y,z=a.getElementsModel(),B,G={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},N={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},J={};F.init();return h.extend("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var i=e.getParameters();var K=i.control;var O=i.object;if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;}K.navTo("centerViewPort",O.getId(),"show");},onInit:function(){var e=this;var i=d.getOwnerComponentFor(this.getView()).getRouter();i.getTarget("home").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay,this);i.getTarget("pages").attachDisplay(this.onComponentTargetDisplay,this);i.oHashChanger=g.getInstance();i.initialize(true);this.bEnableHashChange=true;x=true;var V=this.getView();var K=window.matchMedia("(min-width: 600px)"),O;var J=(V.getViewData()?V.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(J.statefulApplicationContainer);var Q=a.shellElements().model();j.init(J,Q);this.initShellModel(J,Q);var T=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=T;sap.ui.getCore().byId("shell").updateAggregation=T;sap.ui.getCore().byId("right-floating-container").updateAggregation=T;sap.ui.getCore().byId("shell-split").updateAggregation=T;O=function(Z){C.emit("/core/shell/model/isPhoneWidth",!Z.matches);};if(K.addListener){K.addListener(O);O(K);}V.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();y.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var X=[];if(J&&!J.moveContactSupportActionToShellHeader){X.push("ContactSupportBtn");}this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(J.appState,this.oViewPortContainer,J.rootIntent,J.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},X,J.cacheConfiguration);var Y=function(Z,$){this.oShellNavigation=Z;this.oShellNavigation.registerPrivateFilters($);this.oShellNavigation.registerExtraRouter(i);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(_){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return;}if(_.mParameters&&e.oShellNavigation.hashChanger.isInnerAppNavigation(_.mParameters.newHash,_.mParameters.oldHash)){a.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:_.mParameters});}a.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:_.mParameters.fullHash});});E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ShellNavigation"),sap.ushell.Container.getServiceAsync("AppLifeCycle")]).then(function(Z){this.oURLParsing=Z[0];var $=Z[1];this._oAppLifeCycleService=Z[2];Y($,this._oAppLifeCycleService);}.bind(this));sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(B);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER&&a.getCurrentApplication().container.getApplicationType()===sap.ushell.ApplicationType.NWBC.type)){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}return undefined;};if(C.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);this.initShellUIService();if(!J.disableSignOut&&(J.sessionTimeoutTileStopRefreshIntervalInMinutes>0||J.sessionTimeoutReminderInMinutes>0)){this._createSessionHandler(J);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer");},_registerAndCreateEventHubDoables:function(){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),E.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),E.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),E.once("loadTrackingActivitiesSetting").do(this._loadTrackingActivitiesSetting.bind(this)),E.on("centerViewPort").do(this._centerViewPort.bind(this))];return e;},initShellModel:function(J,e){y=z;y.init(J,e);B=this.getView().getViewData().shellModel;C.emit("/core/shell/model/personalization",C.last("/core/shell/enablePersonalization"));},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(J.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});}.bind(this));}},onBackNavigationChange:function(e){a.setBackNavigationChanged(true);var i=e.getParameters().data,K=C.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(K.stateName==="minimal"||K.stateName==="standalone"||K.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i,true);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var V=this.getView()?this.getView().getViewData():{};J=V.config||{};if(J.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(J.rootIntent){window.setTimeout(function(){window.hasher.setHash(J.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var V=this.getView().getViewData();if(V){J=V.config||{};}if(J){if(J.states){z.extendStates(J.states);j.extendStates(J.states);}if(J.enableSetTheme!==undefined){B.setProperty("/setTheme",J.enableSetTheme);}B.setProperty("/contentDensity",J.enableContentDensity===undefined?true:J.enableContentDensity);if(J.migrationConfig!==undefined){B.setProperty("/migrationConfig",J.migrationConfig);}if(J.enableUserDefaultParameters!==undefined){B.setProperty("/userDefaultParameters",J.enableUserDefaultParameters);}if(J.disableHomeAppCache!==undefined){B.setProperty("/disableHomeAppCache",J.disableHomeAppCache);}B.setProperty("/enableHelp",C.last("/core/extension/enableHelp"));B.setProperty("/searchAvailable",(J.enableSearch!==false));}},_loadTrackingActivitiesSetting:function(e){this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(i){if(i===undefined){i=true;}B.setProperty("/enableTrackingActivity",i);E.emit("StepDone",e.stepName);}).catch(function(i){E.emit("StepFailed",e.stepName);L.error("Failed to ltracking activities state state from the personalization",i,"sap.ushell.components.flp.settings.FlpSettings");});},_getPreviousPageDirty:function(){return P;},_setPreviousPageDirty:function(e){P=e;},getModelConfiguration:function(){var V=this.getView().getViewData(),e,i;if(V){e=V.config||{};i=q.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){return t;},onExit:function(){this._aDoableObjects.forEach(function(i){i.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);D.media.detachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls();}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy();}j.destroy();k.destroy();U.deactivate();y.destroy();a.shellElements().clean();a.destroy();y=undefined;},_getCurrentAppRouter:function(){var e=this._oAppLifeCycleService,i=e&&e.getCurrentApplication&&e.getCurrentApplication(),K=i&&i.componentInstance;if(K){return K.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange||this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue;}var K=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!K){var O=this._getCurrentAppRouter();if(O){O.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange&&!this.bRedoNavigation){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom;}var K=sap.ushell.Container.getDirtyFlag();P=K;if(this.bRestorePreviousHash){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(this.bRedoNavigation){this.bRedoNavigation=false;this.bEnableHashChange=true;this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}var O=this.oURLParsing.parseShellHash(e);var Q=sap.ushell.Container.getRenderer()._isBuiltInIntent(O);var T=O.params["sap-ushell-navmode"];var V=T&&T[0];if(!D.browser.msie&&!Q&&(this.bExplaceNavigation||V==="explace"||V==="frameless")){this.bExplaceNavigation=false;return this.oShellNavigation.NavigationFilterStatus.Continue;}if(K&&D.browser.msie){if(this._handleDirtyStateUserConfirm()){return this.oShellNavigation.NavigationFilterStatus.Continue;}return this._restoreHashUsingAction(i,"undo");}if(K){var X=f.getInstance().getHistoryStateOffset()<0;Promise.all([this._waitForHash(i),sap.ushell.Container.getServiceAsync("NavTargetResolution")]).then(function(Y){var Z=Y[1];if(Q){if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}else{var $="#"+e;Z.resolveHashFragment($).then(function(_){var a1=_.targetNavigationMode==="explace"||_.targetNavigationMode==="frameless";var b1=X&&_.navigationMode===N.newWindowThenEmbedded;if(a1&&(!b1)){this.bExplaceNavigation=true;this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}else if(this._handleDirtyStateUserConfirm()){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}}.bind(this)).catch(function(){this.bRedoNavigation=true;this._restoreHashUsingAction(e,"redo");}.bind(this));}}.bind(this));return this._restoreHashUsingAction(i,"undo");}return this.oShellNavigation.NavigationFilterStatus.Continue;},_waitForHash:function(e){var i="#"+e;return new Promise(function(K){var O=function(){var Q=i===decodeURIComponent(window.location.hash);if(Q){window.removeEventListener("hashchange",O);K();}};window.addEventListener("hashchange",O);});},_handleDirtyStateUserConfirm:function(){if(window.confirm(r.i18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});if(R.isBackNavigation()===true){R.resetBackNavigationFlag();}P=true;return true;}return false;},_restoreHashUsingAction:function(e,i){var K=this.oShellNavigation.wasHistoryEntryReplaced();var O=this._getRestoreHashStrategy(K,i);this._resumeAppRouterIgnoringCurrentHash();return this._restoreHash(O,e);},_getRestoreHashStrategy:function(e,i){if(e){return{strategy:"replaceHash",stepCount:0};}var K;var O=f.getInstance().getHistoryStateOffset();if(O===undefined||O>=0){O=1;}else if(O<0){O=-1;}if(i==="undo"){if(O<0){K="historyForward";}else{K="historyBack";}this.sLastUndoStrategy=K;}else{switch(this.sLastUndoStrategy){case"historyBack":K="historyForward";break;case"historyForward":K="historyBack";break;default:K="replaceHash";}}return{strategy:K,stepCount:1};},_restoreHash:function(e,i){var K={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:""};switch(e.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(e.stepCount);break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(e.stepCount);break;case"replaceHash":this.bEnableHashChange=false;s.replaceHash(i);break;default:throw new Error("Cannot execute unknown navigation strategy");}return K;},_isColdStart:function(){var e=sap.ushell.Container.getRenderer("fiori2");var i=!e||!e.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&i){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(V){this.bEnableHashChange=V;},_logRecentActivity:function(e){if(!this.oInitialEnableTrackingPromise){if(C.last("/core/shell/model/enableTrackingActivity")!==undefined){this.oInitialEnableTrackingPromise=Promise.resolve();}else{this.oInitialEnableTrackingPromise=new Promise(function(i,K){C.once("/core/shell/model/enableTrackingActivity").do(i);});}}return this.oInitialEnableTrackingPromise.then(function(){if(C.last("/core/shell/model/enableTrackingActivity")){return new Promise(function(i,K){b.addActivity(e).done(i).fail(K);});}L.warning("Tracking is not enabled",null,"sap.ushell.renderers.fiori2.Shell.controller");});},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,K,Q){M.start("FLP:ShellController.doHashChange","doHashChange","FLP");E.emit("trackHashChange",e);var T=sap.ui.getCore().byId("sapUshellDashboardPage");if(T){T.setBlocked(true);T.setBusy(true);}return this._doHashChange(this,e,i,O,K,Q).then(function(){M.end("FLP:ShellController.doHashChange");},function(V){M.end("FLP:ShellController.doHashChange");E.emit("doHashChangeError",Date.now());if(T){T.setBlocked(false);T.setBusy(false);}});},_doHashChange:function(e,i,K,O,Q,T){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var V,X,Y,Z;if(!this.bEnableHashChange){this.bEnableHashChange=true;return q.when();}if(this.bRestorePreviousHash){this.bRestorePreviousHash=false;return q.when();}if(T){e.hashChangeFailure(e.history.getHistoryLength(),T.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return q.when();}Z=new q.Deferred();if(I&&x){I.closeAllDialogs();I.closeAllPopovers();}x=true;X=e.history.getHistoryLength();Y=e.fixShellHash(i);e.history.hashChange(Y,O);e.currentAppBeforeNav=b.getCurrentApplication();e._resolveHashFragment(Y).then(function($,_){var a1=_?_.semanticObject+"-"+_.action:"",J=e._getConfig(),b1=!!($&&$.componentHandle),c1=$&&$.ui5ComponentName;$=e._calculateNavigationMode(_,$);e._handleEarlyNavigation(Y,K,$).then(function(d1){if(d1!==true){if(J&&J.applications&&J.applications[a1]){$.applicationConfiguration=J.applications[a1];}V=a.getInMemoryInstance(a1,Y,K,O);if(V.isInstanceSupported){e._initiateApplication($,Y,_,X,K);Z.resolve();return;}if(b1||!c1){e._initiateApplication($,Y,_,X,K);Z.resolve();return;}a.destroy(V.appId,V.container);a.removeApplication(a1);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:c1});M.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent($,_).done(function(){M.end("FLP:ShellController.UI5createComponent");e._initiateApplication($,Y,_,X,K);}).fail(function(e1){var f1=r.i18n.getText("cannot_load_ui5_component_details",[Y]),g1="Failed to load UI5 component for navigation intent "+Y;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(X,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:g1},{info:f1,technicalMessage:e1.message+"\n"+e1.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});}Z.resolve();});},function($){var _=r.i18n.getText("cannot_resolve_navigation_target_details",[Y]),a1="Failed to resolve navigation target: "+Y+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(X,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:a1},{info:_,fixedShellHash:Y,technicalMessage:$},"sap.ushell.renderers.fiori2.Shell.controller",false);Z.reject(a1);});return Z.promise();},_handleEarlyNavigation:function(e,i,K){var O=this,Q;return new Promise(function(T){O._openAppViaNWBC(K).then(function(V){if(V===true){K.sFixedShellHash=e;O.logOpenAppAction(K,i);Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(false);Q.setBusy(false);}T(true);return;}else{var X=K&&K.navigationMode===N.newWindow;if(X){K.sFixedShellHash=e;O.logOpenAppAction(K,i);O._openAppInNewWindowAndRestore(K);Q=sap.ui.getCore().byId("sapUshellDashboardPage");if(Q){Q.setBlocked(false);Q.setBusy(false);}T(true);return;}if(C.last("/core/shell/model/migrationConfig")){J.migrationConfig=false;O.getModel().setProperty("/migrationConfig",false);if(K&&e==="#"){J.rootIntent="";}else if(e==="#"){window.setTimeout(function(){window.hasher.setHash(J.rootIntent);},0);T(true);return;}}T(false);return;}});});},_initiateApplication:function(e,i,K,O){M.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var Q=b.getMetadata(e),T=C.last("/core/extension/SupportTicket"),V;if(Q.title){window.document.title=Q.title;}else{L.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(T){window.setTimeout(function(){U.activate();},0);}try{V=this.oShellNavigation.isInitialNavigation();this.navigate(K,i,Q,e);}catch(X){if(X.stack){L.error("Application initialization (Intent: \n"+i+"\n failed due to an Exception:\n"+X.stack);}this.oShellNavigation.setIsInitialNavigation(V);this.hashChangeFailure(O,X.name,X.message,Q?Q.title:"",false);}M.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){M.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var i,K,O=this.oURLParsing.parseShellHash(e),Q=new q.Deferred(),J=this._getConfig();K=O&&O.params||{};if(O&&O.contextRaw&&O.contextRaw==="navResCtx"&&K&&K.additionalInformation&&(K.additionalInformation[0]||K.additionalInformation[0]==="")&&K.applicationType&&K.applicationType[0]&&K.url&&K.url[0]&&K.navigationMode&&(K.navigationMode[0]||K.additionalInformation[0]==="")){K=O.params||{};i={additionalInformation:K.additionalInformation[0],applicationType:K.applicationType[0],url:K.url[0],navigationMode:K.navigationMode[0]};if(K.title){i.text=K.title[0];}Q.resolve(i,O);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(T){Q.resolve(T.resolvedHashFragment,O);delete window["sap-ushell-async-libs-promise-directstart"];},function(T){Q.reject(T);delete window["sap-ushell-async-libs-promise-directstart"];});return Q.promise();}sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(T){T.resolveHashFragment(e).done(function(i){b.setCurrentApplication(i);if(O&&(O.semanticObject+"-"+O.action)===J.rootIntent){i.navigationMode="embedded";}M.end("FLP:ShellController._resolveHashFragment");Q.resolve(i,O);}).fail(function(V){Q.reject(V);});});}return Q.promise();},_calculateNavigationMode:function(e,i){if(!i){return undefined;}var K=i.navigationMode;if(K===N.newWindowThenEmbedded){if(this._isColdStart()||(e.contextRaw&&e.contextRaw==="navResCtx")||f.getInstance().getDirection()===v.Backwards){i.navigationMode=N.embedded;}else{i.navigationMode=N.newWindow;if(!c.isNativeWebGuiNavigation(i)){i.url=this._getCurrentLocationHash();}}return i;}if(K===N.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(i)&&i.appCapabilities.navigationMode===N.embedded){i.navigationMode=N.embedded;return i;}i.navigationMode=N.replace;return i;}if(K===N.newWindow&&this._hasAppCapabilitiesNavigationMode(i)&&i.appCapabilities.navigationMode===N.embedded){i.url=this._getCurrentLocationHash();}return i;},_hasAppCapabilitiesNavigationMode:function(e){return c.isPlainObject(e.appCapabilities)&&e.appCapabilities.hasOwnProperty("navigationMode");},_usesNavigationRedirect:function(e){if(!e){return new q.Deferred().reject().promise();}var i=this,K=e.getInstance({});if(K&&typeof K.navigationRedirect==="function"){var O=new q.Deferred();var Q=K.navigationRedirect();if(Q&&typeof Q.then==="function"){Q.then(function(T){L.warning("Performing navigation redirect to hash "+T);K.destroy();i.history.pop();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(V){V.toExternal({target:{shellHash:T}},undefined,false);O.resolve(true);});},function(){O.reject();});return O.promise();}}return new q.Deferred().reject().promise();},navigate:function(e,i,K,O){M.start("FLP:ShellController.navigate","navigate","FLP");var Q=(m(O)?O.navigationMode:null),T=this;if(Q===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve();}O=this._calculateNavigationMode(e,O);Q=(m(O)?O.navigationMode:null);if(Q===N.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false);}var V=this._usesNavigationRedirect(O.componentHandle),X=new Promise(function(Y,Z){V.then(null,function(){T._handleEmbeddedNavMode(i,e,K,O).then(function(){E.emit("CloseFesrRecord",Date.now());Y();});if(e&&e.contextRaw==="navResCtx"){L.error(" This path will no longer be supported in 1.40");T.bEnableHashChange=false;if(e&&e.params&&e.params.original_intent&&e.params.original_intent[0]){window.hasher.replaceHash(e.params.original_intent[0]);T.history._history[0]=e.params.original_intent[0];}}});M.end("FLP:ShellController.navigate");});return X;}if(Q===N.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(O.url);return Promise.resolve();}if(Q===N.newWindow){this._openAppInNewWindowAndRestore(O);return Promise.resolve();}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve();},_openAppViaNWBC:function(i){var K=this;return new Promise(function(O){var Q;if(i&&(c.isNativeWebGuiNavigation(i)||i.nativeNWBCNavigation)){Q=true;}else{Q=false;}if(Q===false){O(false);return;}var T=c.getPrivateEpcm(),V=G[i.navigationMode],X,Y,Z;if(c.hasNavigationModeCapability()){Y=V||G[N.embedded];}Z=K._appendUserIdToUrl("sap-user",i.url).then(function($){X=c.appendSapShellParam($);return new Promise(function(_){try{var a1=i.applicationType,b1=(i.appCapabilities&&i.appCapabilities.appFrameworkId),c1={},d1=[],e1,f1=function(){c1["sap-flp-url"]=sap.ushell.Container.getFLPUrl(true);c1["system-alias"]=i.systemAlias;return[{name:"sap-flp-params",value:JSON.stringify(c1)}];},g1=function g1(h1,d1){var i1=[],j1,k1=function(l1,m1){if(h1.indexOf(l1+"=")>0){j1=new RegExp("(?:"+l1+"=)([^&/]+)").exec(h1);if(j1&&j1.length===2){i1.push([j1[1]]);d1.push(m1);}}};k1("sap-iapp-state","sap-iapp-state-data");k1("sap-xapp-state","sap-xapp-state-data");k1("sap-intent-param","sap-intent-param-data");return i1;};if(a1==="GUI"||a1==="TR"||a1==="NWBC"||a1==="WDA"||b1==="GUI"||b1==="WDA"||b1==="NWBC"){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(h1){e1=g1(X,d1);if(e1.length>0){h1.getAppStateData(e1).then(function(i1){d1.forEach(function(j1,k1){if(i1[k1][0]){c1[j1]=i1[k1][0];}});_(f1());},function(i1){_();});}else{_(f1());}});}else{_();}}catch(e){_();}});});Z.then(function($){try{sap.ui.getCore().getEventBus().publish("launchpad","appOpening",i);if(!T.doNavigate(X,Y,undefined,undefined,undefined,undefined,undefined,$)){O(false);return;}sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",i);K._restorePreviousHashAfterOpenNewWindow(i);if(sap.ushell.Container.getRenderer().getCurrentCoreView()==="home"){K._toggleMenu(true);}O(true);}catch(e){if(e.stack){L.error("Application initialization failed due to an Exception:\n"+e.stack);}K.hashChangeFailure(K.history.getHistoryLength(),e.name,e.message,i.text,false);O(false);}});});},_appendUserIdToUrl:function(e,i){return sap.ushell.Container.getServiceAsync("UserInfo").then(function(K){var O=K.getUser().getId(),Q=i.indexOf("?")>=0?"&":"?";return i+Q+e+"="+O;});},_restorePreviousHashAfterOpenNewWindow:function(e){this.history.pop();var V=e.componentHandle&&e.componentHandle.getInstance&&e.componentHandle.getInstance({});if(V){V.destroy();}this._resumeAppRouterIgnoringCurrentHash();this.bRestorePreviousHash=true;this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);E.emit("openedAppInNewWindow",Date.now());},_openAppInNewWindowAndRestore:function(e){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",e);this._openAppNewWindow(e.url);sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);this._restorePreviousHashAfterOpenNewWindow(e);},_handleEmbeddedNavMode:function(e,i,K,O){M.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var J=this._getConfig(),Q,T,V,X;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(K);Q="-"+i.semanticObject+"-"+i.action;V=e==="#"||(J.rootIntent&&c.getBasicHash(J.rootIntent)===i.semanticObject+"-"+i.action);X=i?i.semanticObject+"-"+i.action:"";a.switchViewState(a.shellElements().calculateElementsState(V?"home":"app",O.applicationType,J.appState,O.explicitNavMode),undefined,Q);if(V){a.getShellUIService().setBackNavigation();}T=a.handleControl(X,Q,i,O,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e);if(this.currentAppBeforeNav){var Y;Y=a.getWebGuiV1StatefulContainer(this.currentAppBeforeNav.url);if(Y){Y.onApplicationOpened(O.applicationType);}}M.end("FLP:ShellController._handleEmbeddedNavMode");return T;},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===J.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,K,O,Q,T,V){var X,Y,Z,$=this;window.setTimeout(function(){window.setTimeout(function(){var _;if(C.last("/core/shell/model/currentState/stateName")==="app"){_=sap.ui.getCore().byId("shellAppTitle").getFocusDomRef().getAttribute("id");}A.sendFocusBackToShell(_);window.setTimeout(function(){$.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",O);L.info("app is being opened");},0);if(J.applications){O.applicationConfiguration=J.applications[i];}X=a.getAppContainer(Q,O,this._isColdStart(),K,V);O.sFixedShellHash=V;a.publishNavigationStateEvents(X,O,this.onAppAfterRendering.bind(this,O));X.addStyleClass("sapUshellApplicationPage");Y=X.getApplicationType();Z=X.getFrameworkId();if(Y==="GUI"||Y==="TR"||Y==="WDA"||Y==="NWBC"||Z==="GUI"||Z==="WDA"||Z==="NWBC"){X.addStyleClass("sapUShellApplicationContainerShiftedIframe");}if(!T){X.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){X.addStyleClass("sapUShellDockingContainer");X.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){X.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}X.toggleStyleClass("sapUshellDefaultBackground",!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(X);c.setPerformanceMark("FLP - addAppContainer");M.end("FLP:ShellController.getWrappedApplication");return X;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();a.setBackNavigationChanged(false);},onAppAfterRendering:function(e){var i=a.getShellUIService();window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);L.info("app was opened");},0);var K=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",K,true);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",K);c.setPerformanceMark("FLP.appOpened");if(i){a.initAppMetaParams();}y.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);y.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var e=this,i="sap.ushell",K=function(O,Q,T){e.oHomeApp=T.component;sap.ui.getCore().getEventBus().unsubscribe(i,"appComponentLoaded",K);};sap.ui.getCore().getEventBus().subscribe(i,"appComponentLoaded",K);},hashChangeFailure:function(i,e,K,O,Q){var T=sap.ui.getCore().byId("sapUshellDashboardPage");if(T){T.setBlocked(false);T.setBusy(false);}if(c.isPlainObject(e)){this.reportError(e.technicalMessage,K.technicalMessage,O);sap.ushell.Container.getServiceAsync("Message").then(function(V){V.show(p.Type.ERROR,e.message,{title:e.title,details:K});});}else{this.reportError(e,K,O);this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}x=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if((new n(window.location.href)).get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=Q;sap.ushell.Container.setDirtyFlag(P);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:P});this._windowHistoryBack(1);}},reportError:function(e,i,K){L.error(e,i,K);},delayedMessageError:function(e){window.setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getServiceAsync("Message").then(function(i){i.error(e);});}},0);},fixShellHash:function(e){if(!e){e="#";}else if(e.charAt(0)!=="#"){e="#"+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=W.openURL(e);if(!i&&(!(D.browser.msie||D.browser.edge)&&!this._checkWindowLocationSearch("workzone-mobile-app=true"))){var K=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(K);}}},_checkWindowLocationSearch:function(T){return window.location.search.indexOf(T)>-1;},_windowHistoryBack:function(i){window.history.go(-1*i);},_windowHistoryForward:function(i){window.history.go(i);},_changeWindowLocation:function(e){window.location.href=e;},_toggleMenu:function(V){var e=sap.ui.getCore().byId("menuBarComponentContainer");var i=e&&e.getComponentInstance&&e.getComponentInstance();if(i&&i.setVisible){i.setVisible(V);}},onAppOpened:function(e,i,K){if(K.targetNavigationMode!=="explace"&&K.targetNavigationMode!=="frameless"){this._toggleMenu(false);}var O=this.oShellNavigation.hashChanger.getAppHash(),Q=O?"&/"+O:null;this.logOpenAppAction(K,Q);},externalSearchTriggered:function(e,i,K){C.emit("/core/shell/model/searchTerm",K.searchTerm);K.query=K.searchTerm;},onBeforeNavigate:function(e){var T=e.getParameter("to"),O=this.getOwnerComponent(),i=O.byId("Shell-home-component-container"),K=O.byId("pages-component-container"),Q=T===i||T===K;a.onBeforeNavigate(e.getParameter("fromId"),e.getParameter("from"),e.getParameter("toId"),e.getParameter("to"));this._toggleMenu(Q);},onAfterNavigate:function(e){var T=e.mParameters?e.mParameters.toId:undefined;var i=sap.ui.getCore().byId("sapUshellDashboardPage");if(i){i.setBlocked(false);i.setBusy(false);}a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),T,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{});},logOpenAppAction:function(e,i){var K=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(!K){return;}var O={};var Q=b.getMetadata(e);var T=e.sFixedShellHash;var V=T;if(i){V+=i;}O.title=Q.title;O.appType=w.APP;O.url=V;var X=this.oURLParsing.parseShellHash(T);if(X){O.appId="#"+this.oURLParsing.constructShellHash({semanticObject:X.semanticObject,action:X.action});}else{O.appId=T;}if(T&&T.indexOf("#Action-search")===-1){window.setTimeout(function(){this._logRecentActivity(O);}.bind(this),1500);}},_logSearchActivity:function(){if(C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging")){var T="";try{T=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm();}catch(e){L.error("Shell: last search term is not available to log a recent activity");}this._logRecentActivity({appId:"#Action-search",appType:w.SEARCH,title:T,url:"#"+window.hasher.getHash()});}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");window.setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},handleNavMenuTitleVisibility:function(e){this.bNavMenuTitleVisible=false;if(e.name!=="Desktop"){this.bNavMenuTitleVisible=true;}y.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt();}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));E.emit("StepDone",e.stepName);},function(){E.emit("StepFailed",e.stepName);});},_onCoreResourcesComplementLoaded:function(){c.setPerformanceMark("SchedulingAgent-StartOfFlow");var V=this.getView();if(V){V.createPostCoreExtControls();}S._initialize();E.emit("startScheduler");},_loadRendererExtensionPlugins:function(e){var i=new n(window.location.href),K=i.get("sap-ushell-xx-pluginmode")==="delayed";function O(Q){function T(){E.emit("StepDone",e.stepName);}function V(){Q.loadPlugins("RendererExtensions").always(T);}if(!J.inHeaderLessOpt){if(K){window.setTimeout(V,5000);}else{V();}}else{T();}}sap.ushell.Container.getServiceAsync("PluginManager").then(O.bind(this));},_loadWarmupPlugins:function(e){sap.ushell.Container.getServiceAsync("PluginManager").then(function(i){i.loadPlugins("AppWarmup").always(function(){L.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");E.emit("StepDone",e.stepName);c.setPerformanceMark("SchedulingAgent-EndOfFlow");c.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow");});});},_loadCoreExt:function(){M.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},getCurrentViewportState:function(){return C.last("/core/shell/model/currentViewPortState");},_activateFloatingUIActions:function(i){if(i<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){q(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:q.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=q(e);}this._activateFloatingUIActions(q(window).width());var K;q(window).bind("resize",function(){clearTimeout(K);K=window.setTimeout(this._activateFloatingUIActions(q(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){M.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var K=q(window).width();if(e){e.docked={};var O=e.docked;if(e.moveX>=K-64){O.dockPos="right";O.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){O.dockPos="left";O.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(q("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e);}}}}M.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var K=q("#sapUshellFloatingContainerWrapper");K.css("height","100%");q("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked");},_onResizeWithDocking:function(){this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));window.setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){M.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");q(q(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e);}M.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i){var e="sapUshellContainerDockedLaunchpad";var K=q("#sapUshellFloatingContainerWrapper");if(i){q("#canvas, #shell-header").addClass(e);K.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();}else{q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");}},_openDockingArea:function(e){var i=e?e.docked:false;var K=i?i.setIsDockingAreaOpen:false;if(K&&q("#DockinaAreaDiv").length==0){var O=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!O)||(i.dockPos==="left"&&e.clone&&O)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaRight\">").appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!O)||(i.dockPos==="right"&&e.clone&&O)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaLeft\">").appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!K){this._closeDockingArea();}},_closeDockingArea:function(){window.setTimeout(function(){q(".sapUshellShellDisplayDockingAreaRight").remove();q(".sapUshellShellDisplayDockingAreaLeft").remove();},150);},_isDock:function(){return q(".sapUshellContainerDocked").length!==0;},_isDockingAreaOpen:function(){return q(".sapUshellShellDisplayDockingAreaRight").length!==0||q(".sapUshellShellDisplayDockingAreaLeft").length!==0;},_handleOpenCanvas:function(e){var i=q("#canvas");var K=q(".sapUshellShellHead");var O=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!O)||(e.dockPos==="left"&&O)){i.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");K.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");}if((e.dockPos==="left"&&!O)||(e.dockPos==="right"&&O)){i.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");K.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_handleCloseCanvas:function(e){var i=q("#canvas");var K=q(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass("sapUshellContainer-Narrow-Right")){i.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");K.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass("sapUshellContainer-Narrow-Left")){i.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");K.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_setFloatingContainerHeight:function(e){var i=q(window).width();var K=q("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=i-64||e.clientX<64)){K.addClass(" sapUshellContainerDocked");K.addClass("sapUshellContainerDockedMinimizeCoPilot");q(K).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true));}}else if(!this._isDock()){q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,K){M.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var O=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,Q=new o(o.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),T=q(window).width(),V=q(window).height(),X=K.deltaX/T,Y=K.deltaY/V,Z=i.style.visibility,$=i.style.display,_=parseFloat(i.style.left.replace("%","")),a1=parseFloat(i.style.top.replace("%",""));if(typeof(_)==="number"){X=_+100*K.deltaX/T;}if(typeof(a1)==="number"){Y=a1+100*K.deltaY/V;}if(this._isDockingAreaOpen()){Y=0;}i.style.left=X+"%";i.style.top=Y+"%";i.style.position="absolute";i.style.display="block";i.visibility=Z;i.display=$;Q.put("floatingContainerStyle",i.style.cssText);if(O){O.handleDrop();if(!!K.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(K.clone.oDockedProp);}}M.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,K){M.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var O=K;O.style.display="none";if(window.getSelection){var Q=window.getSelection();try{Q.removeAllRanges();}catch(e){}}M.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var i="floating";if(e!=null){i=e.get("lastState");if(i==null){i="floating";}}return i;},setFloatingContainerVisibility:function(V){var e=this.getFloatingContainerState();if(e){if(e=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}else if(e.indexOf("docked")!=-1){var i=sap.ui.getCore().byId("viewPortContainer");if(V==true){var K=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(K.name=="Desktop"){var O=q("#sapUshellFloatingContainerWrapper");O.addClass("sapUshellContainerDocked");q("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");O.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}}else if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);}else{new o(o.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}}else{this._handleAnimations(false);if(i){i._handleSizeChange();}window.setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left");}q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(e,i,K,O){y.setFloatingContainerContent(e,i,K,O);},getRightFloatingContainerVisibility:function(){var e=this.getView().getOUnifiedShell().getRightFloatingContainer(),i=e&&e.getVisible();return i;},setHeaderTitle:function(T){j.updateStates({propertyName:"title",value:T||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false});},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){L.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(J){var e=this,i=20000;sap.ui.require(["sap/ushell/SessionHandler"],function(K){e.oSessionHandler=new K(a);e.oSessionHandler.initLogout();window.setTimeout(function(){e.oSessionHandler.init({sessionTimeoutReminderInMinutes:J.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:J.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:J.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:J.enableAutomaticSignout});},i);});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),K=C.last("/core/userPreferences/entries");K.push(i);K=this._reorderUserPrefEntries(K);C.emit("/core/userPreferences/entries",K);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),K=C.last("/core/userPreferences/profiling")||[];K.push(i);C.emit("/core/userPreferences/profiling",K);},_getModelEntryFromEntryObject:function(e){return{entryHelpID:e.entryHelpID,title:e.title,valueArgument:e.value,valueResult:null,onSave:e.onSave,onCancel:e.onCancel,contentFunc:e.content,contentResult:null,icon:e.icon,provideEmptyWrapper:e.provideEmptyWrapper};},_reorderUserPrefEntries:function(e){var K=[],O=["userAccountEntry","themes","homepageEntry","spacesEntry","userActivitiesEntry","userProfiling","language","notificationsEntry","userDefaultEntry"],Q,T={};for(var i=e.length-1;i>=0;i--){if(O.indexOf(e[i].id)!==-1){Q=e.splice(i,1)[0];T[Q.id]=Q;}}O.forEach(function(V){var X=T[V];if(X){K.push(X);}});return K.concat(e);},getModel:function(){return B;},_getConfig:function(){return J||{};},_getPersData:function(e){var i=d.getOwnerComponentFor(this.getView());return new Promise(function(K,O){sap.ushell.Container.getServiceAsync("Personalization").then(function(Q){var T={keyCategory:Q.constants.keyCategory.FIXED_KEY,writeFrequency:Q.constants.writeFrequency.LOW,clientStorageAllowed:true};var V=Q.getPersonalizer(e,T,i);V.getPersData().then(K).fail(O);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit("showMeArea",e);},getMeAreaSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit("showNotifications",e);},getNotificationsSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="RightCenter";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',["sap/ui/core/library","sap/ushell/library","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ui/core/mvc/XMLView"],function(c,l,D,H,S,A,r,u,C,E,J,q,a,X){"use strict";
function s(i,o){return sap.ui.getCore().byId(o.getObject());}
sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(o){this.oController=o;var v=this.getViewData()||{},b=v.config||{};this.oConfig=b;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(b);var U=sap.ui.xmlfragment("sap.ushell.ui.ShellLayout",o),d=this.createShellHeader(b,this.getViewData().shellModel);U.setHeader(d);d.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var e=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});e.updateAggregation=this.updateShellAggregation;e.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(e);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));u.setPerformanceMark("FLP - Shell.view rendering started!");return U;},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],b=0,P;for(var i=0;i<5;i++){P=p[i];if(b===3){o[P]=false;}else if(o[P]){b++;}}}},createShellHeader:function(o,b){var d=C.createModel("/core/shellHeader",J),h=new S(),e;h.onInit();e=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",h);H.init(o,h,b);if(D.system.desktop){e.setAccessKeyHandler(a);}if(o.appState==="embedded"){e.setNoLogo();}e.setModel(d);e.setModel(r.i18nModel,"i18n");e.createUIArea();return e;},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(F,b){var o=sap.ui.getCore().byId("shell");if(!o){return;}var d=new F({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){d.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));d.addEventDelegate({onsapskipforward:function(g){g.preventDefault();a.sendFocusBackToShell(g);}});}d.setModel(o.getModel());this.addDanglingControl(d);var e=new b({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});e.updateAggregation=this.updateShellAggregation;var f=this.getOUnifiedShell();f.setFloatingContainer(d);f.setFloatingActionsContainer(e);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var o=function(b){if(b.isEnabled()){this._initializeAllMyAppsView();}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},_initializeAllMyAppsView:function(){X.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(b){var m=this.getModel();b.setModel(m);b.setModel(r.i18nModel,"i18n");b.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(b);}.bind(this));},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],o=this.getMetadata().getJSONKeys()[n],d;q.each(this[o._sGetter](),function(i,v){this[o._sRemoveMutator](v);}.bind(this));q.each(b.binding.getContexts(),function(i,v){d=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[o._sMutator](d);}.bind(this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/ShellAsync.view',["sap/ui/core/library","sap/ushell/library","sap/ui/Device","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ui/core/mvc/View","sap/ui/core/mvc/XMLView","sap/ui/core/Fragment"],function(c,l,D,H,S,A,r,u,C,E,J,q,a,V,X,F){"use strict";
function s(i,o){return sap.ui.getCore().byId(o.getObject());}
return V.extend("sap.ushell.renderers.fiori2.ShellAsync",{createContent:function(o){this.oController=o;var v=this.getViewData()||{},b=v.config||{};this.oConfig=b;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(b);return Promise.all([this.createShellLayout(o),this.createShellHeader(b,this.getViewData().shellModel)]).then(function(R){var U=R[0];var d=R[1];U.setHeader(d);d.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var e=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});e.updateAggregation=this.updateShellAggregation;e.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(e);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));u.setPerformanceMark("FLP - Shell.view rendering started!");return U;}.bind(this));},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],b=0,P;for(var i=0;i<5;i++){P=p[i];if(b===3){o[P]=false;}else if(o[P]){b++;}}}},createShellLayout:function(o){return F.load({name:"sap.ushell.ui.ShellLayout",controller:o});},createShellHeader:function(o,b){var d=C.createModel("/core/shellHeader",J),h=new S();h.onInit();return F.load({name:"sap.ushell.ui.ShellHeader",controller:h}).then(function(e){H.init(o,h,b);if(D.system.desktop){e.setAccessKeyHandler(a);}if(o.appState==="embedded"){e.setNoLogo();}e.setModel(d);e.setModel(r.i18nModel,"i18n");e.createUIArea();return e;});},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(b,d){var o=sap.ui.getCore().byId("shell");if(!o){return;}var e=new b({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){e.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));e.addEventDelegate({onsapskipforward:function(h){h.preventDefault();a.sendFocusBackToShell(h);}});}e.setModel(o.getModel());this.addDanglingControl(e);var f=new d({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});f.updateAggregation=this.updateShellAggregation;var g=this.getOUnifiedShell();g.setFloatingContainer(e);g.setFloatingActionsContainer(f);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var o=function(b){if(b.isEnabled()){this._initializeAllMyAppsView();}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},_initializeAllMyAppsView:function(){X.create({id:"allMyAppsView",viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps"}).then(function(b){var m=this.getModel();b.setModel(m);b.setModel(r.i18nModel,"i18n");b.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(b);}.bind(this));},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var b=this.mBindingInfos[n],o=this.getMetadata().getJSONKeys()[n],d;q.each(this[o._sGetter](),function(i,v){this[o._sRemoveMutator](v);}.bind(this));q.each(b.binding.getContexts(),function(i,v){d=b.factory(this.getId()+"-"+i,v)?b.factory(this.getId()+"-"+i,v).setBindingContext(v,b.model):"";this[o._sMutator](d);}.bind(this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyApps.controller',["sap/ushell/library","sap/ui/core/mvc/Controller","sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager","sap/ushell/Config","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/model/json/JSONModel","sap/ushell/resources","sap/ushell/utils/WindowUtils","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/library","sap/m/StandardListItem","sap/ushell/renderers/fiori2/allMyApps/AllMyAppsKeyboardHandler"],function(l,C,A,a,D,M,J,r,W,b,m,S,K){"use strict";var L=m.ListType;var s=false;var c=l.AllMyAppsState;var d=l.AppTitleState;return C.extend("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{iNumberOfProviders:0,onInit:function(){sap.ushell.Container.getServiceAsync("AllMyApps");this.bFirstLoadOfAllMyApps=true;var o=new J(),v=this.getView(),e=sap.ui.getCore().getEventBus();o.setSizeLimit(10000);o.setProperty("/AppsData",[]);o.setProperty("/catalogEnabled",a.last("/core/catalog/enabled"));v.setModel(r.getTranslationModel(),"i18n");v.setModel(o,"allMyAppsModel");e.subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext,this);e.subscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);e.subscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);e.subscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.updateMasterFocusAndDetailsContext);e.unsubscribe("launchpad","allMyAppsFirstCatalogLoaded",this.onDetailLoad,this);e.unsubscribe("launchpad","allMyAppsMasterLoaded",this.onMasterLoad,this);e.unsubscribe("launchpad","allMyAppsNoCatalogsLoaded",this.onNoCatalogsLoaded,this);},onAfterRendering:function(){var t=this,v=this.getView(),o=v.getModel("allMyAppsModel"),e=this._getSplitApp(),f=v.byId("sapUshellAllMyAppsMasterPage"),g=v.byId("sapUshellAllMyAppsDetailsPage");if(!this.bAfterInitialLoading){if(f){f.setBusy(true);}if(g){g.setBusy(true);}e.toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show");if(!D.system.phone){e.toDetail("sapUshellAllMyAppsDetailsPage","show");}}if(this.bFirstLoadOfAllMyApps){o.setProperty("/AppsData",[]);}else{var h=o.getProperty("/AppsData");o.setProperty("/AppsData",h);}setTimeout(function(){t._getAllMyAppsManager().loadAppsData(o,t._getPopoverObject(),t.bFirstLoadOfAllMyApps);s=t._isSingleDataSource();t.switchToInitialState();t.bFirstLoadOfAllMyApps=false;},0);},switchToInitialState:function(){var o=this._getDataSourceList();if(this._isSingleDataSource()){a.emit("/core/shell/model/allMyAppsMasterLevel",c.FirstLevelSpread);o.bindItems("allMyAppsModel>/AppsData/0/groups",this._getMasterListItemTemplate);}else{a.emit("/core/shell/model/allMyAppsMasterLevel",c.FirstLevel);o.bindItems("allMyAppsModel>/AppsData",this._getMasterListItemTemplate());}if(D.system.phone){this._getSplitApp().toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show");}o.rerender();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:true});this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_headerTitle"));this.updateHeaderButtonsState();},handleSwitchToMasterAreaOnPhone:function(){var e=this._getDataSourcesSelectedPath(),p=e.split("/");this._getSplitApp().toMaster(this.createId("sapUshellAllMyAppsMasterPage"),"show");if(this._isSingleDataSource()){a.emit("/core/shell/model/allMyAppsMasterLevel",c.FirstLevelSpread);}else if(p.length===3){a.emit("/core/shell/model/allMyAppsMasterLevel",c.FirstLevel);}else{a.emit("/core/shell/model/allMyAppsMasterLevel",c.SecondLevel);}this.updateHeaderButtonsState();},handleMasterListItemPress:function(e){var f=this._getClickedDataSourceItemPath(e),v=this.getView(),o=v.getModel("allMyAppsModel"),g=o.getProperty(f+"/type"),h=a.last("/core/shell/model/allMyAppsMasterLevel"),i=(g===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG),j=this._getCustomPanel(),k=this._getCustomPanelLabel(),n=this._getCustomPanelLink(),B;this.lastPressedMasterItem=e.getParameter("listItem");if(i||(h===c.FirstLevelSpread)||(h===c.SecondLevel)){B=this.handleMasterListItemPressToDetails(e);}else{B=this.handleMasterListItemPressToSecondLevel(e);}j.setBindingContext(B,"allMyAppsModel");k.setBindingContext(B,"allMyAppsModel");if(n&&n.getVisible&&n.getVisible()){n.setBindingContext(B,"allMyAppsModel");}},handleMasterListItemPressToSecondLevel:function(o){var e=this._getClickedDataSourceItemPath(o),v=this.getView(),f=v.getModel("allMyAppsModel"),g=f.getProperty(e+"/type"),h=f.getProperty(e+"/title"),i=this._getSplitApp(),j=this._getDataSourceList(),B,k;if(!D.system.phone){i.toDetail(this.createId("sapUshellAllMyAppsDetailsPage"));}j.bindItems("allMyAppsModel>"+e+"/groups",this._getMasterListItemTemplate());a.emit("/core/shell/model/allMyAppsMasterLevel",c.SecondLevel);B=this._setBindingContext(e+"/groups/0",v.byId("oItemsContainerlist"));j.rerender();j.setSelectedItem(j.getItems()[0]);k=j.getSelectedItem();if(k){k.focus();}if(g===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME){this._getPopoverHeaderLabel().setText(r.i18n.getText("allMyApps_homeEntryTitle"));}else if(g===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL){this._getPopoverHeaderLabel().setText(h);}this._getDetailsHeaderLabel().setText(f.getProperty(e+"/groups/0/title"));this.updateHeaderButtonsState();return B;},handleMasterListItemPressToDetails:function(e){var f=this._getClickedDataSourceItemPath(e),v=this.getView(),o=v.getModel("allMyAppsModel"),B=this._setBindingContext(f,v.byId("oItemsContainerlist"));this._getDetailsHeaderLabel().setText(o.getProperty(f+"/title"));if(D.system.phone){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"));a.emit("/core/shell/model/allMyAppsMasterLevel",c.Details);}this.updateHeaderButtonsState();return B;},onMasterLoad:function(){var v=this.getView(),B=this._getPopoverHeaderBackButton();this.bAfterInitialLoading=true;v.byId("sapUshellAllMyAppsMasterPage").setBusy(false);B.focus();s=this._isSingleDataSource();this.updateMasterFocusAndDetailsContext(undefined,undefined,{bFirstCatalogLoadedEvent:false});},onDetailLoad:function(){var v=this.getView(),o=v.byId("sapUshellAllMyAppsDetailsPage");o.setBusy(false);this.bAfterInitialLoading=true;if(!D.system.phone){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"),"show");}},onNoCatalogsLoaded:function(){var v=this.getView(),o=v.byId("sapUshellAllMyAppsDetailsPage");o.setBusy(false);this.bAfterInitialLoading=true;if((!D.system.phone)&&(!s)){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsEmptyDetailsPage"),"show");}else if((!D.system.phone)&&s){this._getSplitApp().toDetail(this.createId("sapUshellAllMyAppsDetailsPage"));}},updateMasterFocusAndDetailsContext:function(e,E,o){var v=this.getView(),f=v.getModel("allMyAppsModel"),F=this._getInitialFirstLevelSelectionIndex(),g=this._getDataSourceList(),h=this._getCustomPanelLabel(),i=this._getCustomPanelLink(),B,j,k;if(s===true){B=f.createBindingContext("/AppsData/0/groups/0");j=f.getProperty(B.getPath());}else{B=f.createBindingContext("/AppsData/"+F);j=f.getProperty(B.getPath());}v.byId("oItemsContainerlist").setBindingContext(B,"allMyAppsModel");h.setBindingContext(B,"allMyAppsModel");v.byId("sapUshellAllMyAppsCustomPanel").setBindingContext(B,"allMyAppsModel");if(i.getVisible()){i.setBindingContext(B,"allMyAppsModel");}if(j!==undefined){this._getDetailsHeaderLabel().setText(j.title);}if(o.bFirstCatalogLoadedEvent===true){g.rerender();}if(o.bFirstCatalogLoadedEvent===false&&F===0){this.onNoCatalogsLoaded();}g.setSelectedItem(g.getItems()[F]);k=g.getSelectedItem();if(k){setTimeout(function(){k.focus();},0);}if(o.bFirstCatalogLoadedEvent){M.end("FLP:ShellAppTitle.onClick");M.end("FLP:ShellNavMenu.footerClick");}},handleCustomPanelLinkPress:function(e){var v=this.getView(),o=v.byId("sapUshellAllMyAppsCustomPanelLink"),f=o.getVisible()?o.getBindingContext("allMyAppsModel").getObject():{};if(f.handlePress){f.handlePress(e.getSource(),f);}},updateHeaderButtonsState:function(){this._getShellAppTitleToggleListButton().setVisible(this.getToggleListButtonVisible());this._getPopoverHeaderBackButton().setVisible(this.getBackButtonVisible());},getToggleListButtonVisible:function(){var o=this.getCurrentState(),i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name==="Phone",v=(i||D.system.phone)&&(o===c.Details);return v;},getBackButtonVisible:function(){var o=a.last("/core/shellHeader/ShellAppTitleState");if(o!==d.AllMyAppsOnly){return true;}var e=this.getCurrentState();return e===c.SecondLevel||e===c.Details;},onAppItemClick:function(p){var o=this.getView().getModel("allMyAppsModel"),e=p.getSource().getBindingContext("allMyAppsModel").getPath(),u=o.getProperty(e+"/url");if(u){if(u[0]==="#"){hasher.setHash(u);setTimeout(function(){this.getView().getParent().close();}.bind(this),50);}else{W.openURL(u,"_blank");}}},getCurrentState:function(){return a.last("/core/shell/model/allMyAppsMasterLevel");},_isSingleDataSource:function(){var o=sap.ushell.Container.getService("AllMyApps");if(o.isCatalogAppsEnabled()){return false;}if(!o.isExternalProviderAppsEnabled()&&o.isHomePageAppsEnabled()){return true;}return o.isExternalProviderAppsEnabled()&&Object.keys(o.getDataProviders()).length===1&&!o.isHomePageAppsEnabled();},_getInitialFirstLevelSelectionIndex:function(){var v=this.getView(),o=v.getModel("allMyAppsModel"),e=o.getProperty("/AppsData"),i,t;for(i=0;i<e.length;i++){t=e[i];if(t.type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG){return i;}}return 0;},_getPopoverHeaderBackButton:function(){if(!this._oPopoverHeaderBackButton){this._oPopoverHeaderBackButton=this._getPopoverHeaderContent(0);}return this._oPopoverHeaderBackButton;},_getShellAppTitleToggleListButton:function(){if(!this._oShellAppTitleToggleListButton){this._oShellAppTitleToggleListButton=this._getPopoverHeaderContent(1);}return this._oShellAppTitleToggleListButton;},_getPopoverHeaderContent:function(i){var o,h,e;o=this._getPopoverObject().getCustomHeader();h=o.getContentLeft();e=h[i];return e;},_getPopoverHeaderLabel:function(){var o,e;o=this._getPopoverObject().getCustomHeader();e=o.getContentMiddle();return e[0];},_getPopoverObject:function(){return this.getView().getParent();},_getDetailsHeaderLabel:function(){return this.getView().byId("sapUshellAllMyAppsDetailsHeaderLabel");},_setBindingContext:function(B,o){var e=this.getView().getModel("allMyAppsModel"),f=e.createBindingContext(B);o.setBindingContext(f,"allMyAppsModel");return f;},_getClickedDataSourceItemPath:function(e){var o=e.getParameter("listItem");return o.getBindingContext("allMyAppsModel").getPath();},_getAllMyAppsManager:function(){return A;},_getDataSourcesSelectedPath:function(){return this.lastPressedMasterItem.getBindingContextPath();},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps";},formatListItemType:function(t,e){var f=D.system.phone||(e===c.FirstLevel&&t!==sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG);return f?L.Navigation:L.Active;},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(D.system.desktop){K.init(this.getView());}}},_getMasterListItemTemplate:function(){if(!this.oTemplate){this.oTemplate=new S({type:{parts:["allMyAppsModel>type","/allMyAppsMasterLevel"],formatter:this.formatListItemType},title:"{allMyAppsModel>title}"});}return this.oTemplate;},_getSplitApp:function(){return this.getView().byId("sapUshellAllMyAppsMasterDetail");},_getDataSourceList:function(){return this.getView().byId("sapUshellAllMyAppsDataSourcesList");},_getCustomPanel:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanel");},_getCustomPanelLabel:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanelLabel");},_getCustomPanelLink:function(){return this.getView().byId("sapUshellAllMyAppsCustomPanelLink");}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyAppsKeyboardHandler',["sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery"],function(K,q){"use strict";var a=function(){};
a.prototype.init=function(v){v.byId("sapUshellAllMyAppsDataSourcesList").addEventDelegate({onsaptabnext:function(e){var d=q(".sapUshellAllMyAppsListItem");this.jqDetailAreaElement=v.byId("oItemsContainerlist").$();this.jqDetailAreaElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));this._setItemFocus(e,d[0]);}.bind(this)});v.byId("oItemsContainerlist").addEventDelegate({onsaptabprevious:function(){var c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];q(c).attr("tabindex",-1);},onsaptabnext:function(){var c=q(".sapUshellAllMyAppsCustomPanel"),C=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];if(c.length===0){q(C).attr("tabindex",-1);}}});v.byId("sapUshellAllMyAppsCustomPanel").addEventDelegate({onsaptabnext:function(e){var c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0];q(c).attr("tabindex",-1);}});};
a.prototype.keydownHandler=function(e){switch(e.keyCode){case K.ARROW_UP:this.arrowKeyHandler(e,-2);break;case K.ARROW_DOWN:this.arrowKeyHandler(e,2);break;case K.ARROW_LEFT:this.arrowKeyHandler(e,-1);break;case K.ARROW_RIGHT:this.arrowKeyHandler(e,1);break;default:break;}};
a.prototype.arrowKeyHandler=function(e,d){var D=q(".sapUshellAllMyAppsListItem").toArray(),c=q(".sapUshellAllMyAppsListItem[tabindex=\"0\"]")[0],C=D.indexOf(c),E=D[C+d];if(E){q(c).attr("tabindex",-1);this._setItemFocus(e,E);}};
a.prototype._setItemFocus=function(e,E){if(E){e.preventDefault();e.stopImmediatePropagation();q(E).attr("tabindex",0);E.focus();}};
a.prototype.destroy=function(){if(this.jqDetailAreaElement){this.jqDetailAreaElement.off(".keyboardNavigation");}delete this.jqDetailAreaElement;};
return new a();},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/allMyApps/AllMyAppsManager',["sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/Message"],function(q,r,M){"use strict";var A=function(){};
A.prototype.loadAppsData=function(m,p,l){var a=sap.ushell.Container.getService("AllMyApps");this.oPopover=p;if(!a.isEnabled()){return;}this.iNumberOfProviders=0;this.oModel=m;if(a.isHomePageAppsEnabled()){this._handleGroupsData();}if(a.isExternalProviderAppsEnabled()){this._handleExternalProvidersData(m);}if(a.isCatalogAppsEnabled()){this._handleCatalogs(l);}if(!a.isCatalogAppsEnabled()||(a.isCatalogAppsEnabled()&&l)){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","allMyAppsMasterLoaded");}};
A.prototype._handleGroupsData=function(){var t=this,g=this._getGroupsData(),h={title:r.i18n.getText("allMyApps_homeEntryTitle")},p;g.done(function(G){h.groups=G;h.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().HOME;if(G.length===0){return;}p=t.oModel.getProperty("/AppsData");if(p){var i=t._getIndexByType(p,h.type);if(i!==undefined){p[i]=h;}else{p.unshift(h);}}t.oModel.setProperty("/AppsData",p);t.iNumberOfProviders+=1;});};
A.prototype._getIndexByType=function(p,a){if(p.length<=0){return 0;}for(var i=0;i<p.length;i++){if(p[i].type===a){return i;}}};
A.prototype._getGroupsData=function(){var t=this,l=sap.ushell.Container.getService("LaunchPage"),d=new q.Deferred(),g=l.getGroups(),D=l.getDefaultGroup(),p=[],G=[],i,T,o,s,a,b,c,e,n;t.oDefaultGroup=undefined;p.push(D);p.push(g);q.when(p).then(function(){p[0].done(function(f){t.oDefaultGroup=f;});p[1].done(function(f){for(i=0;i<f.length;i++){n=0;T=f[i];if(l.isGroupVisible(T)===false){continue;}if(l.getGroupId(T)===l.getGroupId(t.oDefaultGroup)){s=r.i18n.getText("my_group");}else{s=l.getGroupTitle(T);}o={};o.title=s;o.apps=[];a=l.getGroupTiles(T);for(b=0;b<a.length;b++){c=a[b];if(l.isTileIntentSupported(c)){e=t._getAppEntityFromTile(c);if(e){o.apps.push(e);}else{n++;}}}o.numberCustomTiles=n;if(n===1){o.sCustomLabel=r.i18n.getText("allMyApps_customStringSingle");o.sCustomLink=r.i18n.getText("allMyApps_customLinkHomePageSingle");}else{o.sCustomLabel=r.i18n.getText("allMyApps_customString",[n]);o.sCustomLink=r.i18n.getText("allMyApps_customLinkHomePage");}o.handlePress=function(h,j){window.hasher.setHash("#Shell-home");this.oPopover.close();var B=sap.ui.getCore().getEventBus();B.subscribe("launchpad","dashboardModelContentLoaded",function(){B.publish("launchpad","scrollToGroupByName",{groupName:j.title,isInEditTitle:false});},this);B.publish("launchpad","scrollToGroupByName",{groupName:j.title,isInEditTitle:false});}.bind(t);if(o.apps.length>0||o.numberCustomTiles>0){G.push(o);}}d.resolve(G);});});return d.promise();};
A.prototype._handleExternalProvidersData=function(){var t=this,e=sap.ushell.Container.getService("AllMyApps").getDataProviders(),E=Object.keys(e),s,o,a,b,i,c;if(E.length>0){for(i=0;i<E.length;i++){s=E[i];o=e[s];a=o.getTitle();b={};b.title=a;c=o.getData();c.done(function(p){if(p&&(p.length>0)){b.groups=p;b.type=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().EXTERNAL;t.oModel.setProperty("/AppsData/"+t.iNumberOfProviders,b);t.iNumberOfProviders+=1;var d=sap.ui.getCore().getEventBus();d.publish("launchpad","allMyAppsMasterLoaded");}});}}};
A.prototype._handleNotFirstCatalogsLoad=function(){var m=this.oModel.getProperty("/AppsData"),c=sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG;if(m.length&&m[m.length-1].type===c){this.bFirstCatalogLoaded=true;sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});}};
A.prototype._handleCatalogs=function(l){if(!l){this._handleNotFirstCatalogsLoad();}else{this.bFirstCatalogLoaded=false;this.aPromises=[];sap.ushell.Container.getService("LaunchPage").getCatalogs().done(function(){q.when.apply(q,this.aPromises).then(this._onDoneLoadingCatalogs.bind(this));}.bind(this)).fail(function(){this._onGetCatalogsFail(r.i18n.getText("fail_to_load_catalog_msg"));}.bind(this)).progress(this._addCatalogToModel.bind(this));}};
A.prototype._addCatalogToModel=function(c){var p={apps:[],numberCustomTiles:0,type:sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG},t=this,P,i,a,o,l=sap.ushell.Container.getService("LaunchPage"),C=l.getCatalogTiles(c);this.aPromises.push(C);C.done(function(b){if(b.length===0){return;}var s=l.getCatalogTitle(c);P=t.oModel.getProperty("/AppsData");for(i=0;i<P.length;i++){if((P[i].type===sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG)&&(P[i].title===s)){p=P[i];break;}}p.title=l.getCatalogTitle(c);for(a=0;a<b.length;a++){if(l.isTileIntentSupported(b[a])){o=t._getAppEntityFromTile(b[a]);if(o){p.apps.push(o);}else{p.numberCustomTiles++;}}}if(p.numberCustomTiles===1){p.sCustomLabel=r.i18n.getText("allMyApps_customStringSingle");p.sCustomLink=r.i18n.getText("allMyApps_customLinkAppFinderSingle");}else{p.sCustomLabel=r.i18n.getText("allMyApps_customString",[p.numberCustomTiles]);p.sCustomLink=r.i18n.getText("allMyApps_customLinkAppFinder");}p.handlePress=function(e,d){this.oPopover.close();window.hasher.setHash("#Shell-home&/appFinder/catalog/"+JSON.stringify({catalogSelector:d.title,tileFilter:"",tagFilter:"[]",targetGroup:""}));}.bind(t);if(p.apps.length>0||p.numberCustomTiles>0){t.oModel.setProperty("/AppsData/"+i,p);if(t.bFirstCatalogLoaded===false){sap.ui.getCore().getEventBus().publish("launchpad","allMyAppsFirstCatalogLoaded",{bFirstCatalogLoadedEvent:true});t.bFirstCatalogLoaded=true;}t.iNumberOfProviders+=1;}});};
A.prototype._onGetCatalogsFail=function(m){sap.ushell.Container.getService("Message").info(m);};
A.prototype._onDoneLoadingCatalogs=function(){var m=this.oModel.getProperty("/AppsData");m.sort(function(a,b){var n=a.title.toUpperCase();var c=b.title.toUpperCase();if(n<c){return-1;}if(n>c){return 1;}return 0;});this.oModel.setProperty("/AppsData",m);var e=sap.ui.getCore().getEventBus();if(!this.bFirstCatalogLoaded){e.publish("launchpad","allMyAppsNoCatalogsLoaded");}};
A.prototype._getAppEntityFromTile=function(c){var a,l=sap.ushell.Container.getService("LaunchPage"),t=l.getCatalogTilePreviewTitle(c),T=l.getCatalogTilePreviewSubtitle(c),s=l.getCatalogTileTargetURL(c);if(s&&(t||T)){a={};a.url=s;if(t){a.title=t;a.subTitle=T;}else{a.title=T;}return a;}};
return new A();},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/search/searchComponent/Component',["sap/ui/core/UIComponent","sap/ui/core/mvc/View","sap/esh/search/ui/i18n"],function(U,V,i){"use strict";return U.extend("sap/ushell/renderers/fiori2/search/searchComponent",{metadata:{manifest:"json",library:"sap.ushell",interfaces:["sap.ui.core.IAsyncContentCreation"],config:{title:i.getText("searchAppTitle"),compactContentDensity:true,cozyContentDensity:true}},init:function(){U.prototype.init.apply(this,arguments);},createContent:function(){return V.create({id:"searchContainerApp",viewName:"module:sap/ushell/renderers/fiori2/search/searchComponent/view/SearchApp.view"});}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/searchComponent/controller/SearchApp.controller',["sap/ui/core/mvc/Controller","sap/esh/search/ui/SearchShellHelper","sap/esh/search/ui/SearchShellHelperAndModuleLoader"],function(C,S){"use strict";return C.extend("sap/ushell/renderers/fiori2/search/searchComponent/SearchApp",{onInit:function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(s){this.oShellNavigation=s;this.oShellNavigation.hashChanger.attachEvent("hashChanged",this.hashChanged);}.bind(this));if(S.oSearchFieldGroup===undefined){S.init();}S.setSearchState("EXP_S");},hashChanged:function(){var m=sap.esh.search.ui.getModelSingleton({},"flp");m.parseURL();},onExit:function(){this.oShellNavigation.hashChanger.detachEvent("hashChanged",this.hashChanged);var t=this.oView.getContent()[0].oTablePersoController;if(t&&t.getTablePersoDialog&&t.getTablePersoDialog()){t.getTablePersoDialog().destroy();}if(S.getDefaultOpen()!==true){S.setSearchStateSync("COL");}else{S.setSearchState("EXP");}if(this.oView.getContent()[0].oSearchPage.oFacetDialog){this.oView.getContent()[0].oSearchPage.oFacetDialog.destroy();}}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/search/searchComponent/view/SearchApp.view',["sap/ui/core/mvc/View","sap/m/Label","sap/esh/search/ui/SearchCompositeControl"],function(V,L,S){"use strict";return V.extend("sap.ushell.renderers.fiori2.search.searchComponent.view.SearchApp",{getControllerName:function(){return"sap.ushell.renderers.fiori2.search.searchComponent.controller.SearchApp";},createContent:function(){var m=sap.esh.search.ui.getModelSingleton({},"flp");return new S({model:m});}});});
sap.ui.predefine('sap/ushell/resources',["sap/ui/model/resource/ResourceModel"],function(R){"use strict";var r={};
r.getTranslationModel=function(l){var o;if(r._oResourceModel){o=r._oResourceModel;}else{o=new R({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources.properties"),bundleLocale:l});r._oResourceModel=o;}return o;};
r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);
sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";
function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=!!((!S||(S.enabled!==false)));return e;};this.isHomePageAppsEnabled=function(){return!!((!S||(S.showHomePageApps!==false)));};this.isCatalogAppsEnabled=function(){return!!((!S||(S.showCatalogApps!==false)));};this.isExternalProviderAppsEnabled=function(){return!!((!S||(S.showExternalProviders!==false)));};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}
A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(U,u,E,L,M,q,O,R,r,I,m){"use strict";var B=m.ButtonType;
function A(){var o={},a=true,c=null,b=[],d=[];E.on("AppRendered").do(e.bind(this));function e(){a=false;while(d.length>0){d.shift()();}}this.addActivity=function(g){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("UserRecents").then(function(h){h.addActivity(g).done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return d;};this.getCurrentApplication=function(){return c;};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(g){if(!g){g=c;}if(g){var h=hasher&&hasher.getHash?hasher.getHash():"";var k=this._getMemoizationKey(h);return this._getMetadata(g,k);}return{};};this._getMemoizationKey=function(C){var h=C.split("?");var i=h[0];var p=h[1];p=this._processParams(p);if(p){return i+p;}var P=U.parseShellHash(C);i=P?P.semanticObject+"-"+P.action:"";return i;};this._processParams=function(p){if(p){var P="";var g={};p.split("&").forEach(function(i){var C=i.split("=");g[C[0]]=C[1];});var s=Object.keys(g).sort();var h="";s.forEach(function(k,i){P=i?"&":"?";h+=P+k+"="+g[k];});return h;}return"";};this._getMetadata=function(g,k){if(!(o.hasOwnProperty(k))||!o[k].complete){this.addMetadata(g,k);}if(!o[k]){o[k]={complete:false};}if(!o[k].title){o[k].title=g.text||r.i18n.getText("default_app_title");}return o[k];};this.setCurrentApplication=function(g){c=g;d.splice(0);};this.setHeaderHiding=function(){L.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(g){if(a){d.push(function(){f(g);});}else{f(g);}};function f(g){var i,h=[],j=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<g.length;i++){var C=g[i];h.push(C.getId());C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(B.Unstyled);}if(sap.ushell.Container&&j){if(b.length){j.hideActionButton(b,true);}b=h;j.showActionButton(h,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){M.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new q.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",S=sap.ui.require(s);if(S){return new S();}L.warning("sap.ushell.services.AppConfiguration.getSettingsControl is deprecated. Use getSettingsControlasync instead.");L.error("sap.ushell.services.AppConfiguration.getSettingsControl: sap.ushell.ui.footerbar.SettingsButton must be loaded before use.");return undefined;};this.getApplicationName=function(g){var h,s=(g&&g.additionalInformation)||null;if(s){h=/^SAPUI5\.Component=(.+)$/i.exec(s);if(h){return h[1];}}return null;};this.getApplicationUrl=function(g){var s=(g&&g.url)||null,S="P_TCODE",i;if(s){if(g.applicationType==="NWBC"&&s.indexOf(S)){return s;}i=s.indexOf("?");if(i>=0){s=s.slice(0,i);}if(s.slice(-1)!=="/"){s+="/";}}return s;};this.getPropertyValueFromConfig=function(C,p,g){var v;if(g&&C.hasOwnProperty(p+"Resource")){v=g.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var s=p[P].manifestEntryKey,g=p[P].path,h=l.getManifestEntry(s);return O.get(g||"",h);};this.addMetadata=function(g,k){try{var C=this.getApplicationName(g),s=this.getApplicationUrl(g),l,h,p={fullWidth:{manifestEntryKey:"sap.ui",path:"fullWidth"},hideLightBackground:{manifestEntryKey:"sap.ui",path:"hideLightBackground"},title:{manifestEntryKey:"sap.app",path:"title"},icon:{manifestEntryKey:"sap.ui",path:"icons.icon"},favIcon:{manifestEntryKey:"sap.ui",path:"icons.favIcon"},homeScreenIconPhone:{manifestEntryKey:"sap.ui",path:"icons.phone"},"homeScreenIconPhone@2":{manifestEntryKey:"sap.ui",path:"icons.phone@2"},homeScreenIconTablet:{manifestEntryKey:"sap.ui",path:"icons.tablet"},"homeScreenIconTablet@2":{manifestEntryKey:"sap.ui",path:"icons.tablet@2"},startupImage320x460:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x920:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x920"},startupImage640x1096:{manifestEntryKey:"sap.ui",path:"icons.startupImage640x1096"},startupImage768x1004:{manifestEntryKey:"sap.ui",path:"icons.startupImage768x1004"},startupImage748x1024:{manifestEntryKey:"sap.ui",path:"icons.startupImage748x1024"},startupImage1536x2008:{manifestEntryKey:"sap.ui",path:"icons.startupImage1536x2008"},startupImage1496x2048:{manifestEntryKey:"sap.ui",path:"icons.startupImage1496x2048"},compactContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.compact"},cozyContentDensity:{manifestEntryKey:"sap.ui5",path:"contentDensities.cozy"}},i,j,n,t,P,v,w,x=g&&g.componentHandle;if(k){if(!(o.hasOwnProperty(k))){o[k]={complete:false};}if(!o[k].complete){if(x){l=x.getMetadata();}else if(C){L.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){h=l.getConfig();t=(l.getManifest()!==undefined);o[k].complete=true;if(h){v=h.resourceBundle||"";if(v){if(v.slice(0,1)!=="/"){v=s+v;}w=R.create({url:v,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(t){o[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(h&&o[k][P]===undefined){o[k][P]=this.getPropertyValueFromConfig(h,P,w);}}}o[k].version=l.getVersion();o[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(g.applicationType)){var W="/~canvas;window=app/wda/",y=g.url.indexOf(W),z="/sap/bc/webdynpro/sap/",D="/bc/gui/sap/its/webgui",F=g.url.indexOf(D);if(y>=0){o[k].technicalName=g.url.substring((y+W.length),g.url.indexOf("/",(y+W.length)));}if(g.url.indexOf(z)>=0){o[k].technicalName=new RegExp(z+"(.*)[?]").exec(g.url)[1];}o[k].complete=true;if(F>=0){var G="etransaction=",H=g.url.indexOf(G,F+D.length),J=g.url.indexOf("&",H),K=(J>=0)?J:g.url.length;o[k].technicalName=decodeURIComponent(g.url.substring(H+G.length,K))+" (TCODE)";}}else{L.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}i=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];j=(s&&s[s.length-1]==="/")?s.substring(0,s.length-1):s;n=function(s){if(s.match(/^https?:\/\/.*/)){return false;}return s&&s[0]!=="/";};i.forEach(function(Q){var S=o[k][Q],T=null;if(S){T=n(S)?j+"/"+S:S;}o[k][Q]=T;});}}catch(N){L.warning("Application configuration could not be parsed");}};}
return new A();},true);
sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters","sap/ushell/AppInfoParameters","sap/base/Log","sap/ushell/components/pages/controller/PagesAndSpaceId"],function(E,T,A,L,P){"use strict";var S="appLoaded";
function a(o,c,p,C){var b,e,v;this.getCurrentApplication=function(){return b;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};this.prepareCurrentAppObject=function(d,f,h,g){s(d,f,h,g);};this.reloadCurrentApp=function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(d){try{d.hashChanger.treatHashChanged(window.hasher.getHash());}catch(f){L.error("Error when trying to re-load the current displayed application",f,"sap.ushell.services.AppLifeCycle");}});};e=new E();if(sap.ushell.Container.inAppRuntime()===false){r();}function r(){v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){L.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(d){var f,g,h,i,j,H=false;if(d.mParameters.toId.indexOf("applicationShellPage")===0){g=d.mParameters.to.getApp();}else if(d.mParameters.toId.indexOf("application")===0){g=d.mParameters.to;}if(g&&typeof g.getComponentHandle==="function"&&g.getComponentHandle()){i=g.getComponentHandle().getInstance();}else if(g){f=g.getAggregation("child");if(f){i=f.getComponentInstance();}}else{i=sap.ui.getCore().getComponent(d.mParameters.to.getComponent());}if(i){j=i.getId();H=j.indexOf("Shell-home-component")!==-1||j.indexOf("pages-component")!==-1||j.indexOf("Shell-appfinder-component")!==-1;}h=g&&typeof g.getApplicationType==="function"&&g.getApplicationType();if((!h||h==="URL")&&i){h="UI5";}s(h,i,H,g);});}function s(d,f,h,g){b={applicationType:d,componentInstance:f,homePage:h,getTechnicalParameter:function(i){return T.getParameterValue(i,f,g,d);},getIntent:function(){var H=hasher&&hasher.getHash();if(!H){return Promise.reject("Could not identify current application hash");}var i=sap.ushell.Container.getServiceAsync("URLParsing");return i.then(function(j){return j.parseShellHash(H);});},getInfo:function(i){return A.getInfo(i,b);},getSystemContext:function(){var i=sap.ushell.services.AppConfiguration.getCurrentApplication()||{};var j=i.contentProviderId||"";return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(k){return k.getSystemContext(j);});}};setTimeout(function(){e.fireEvent(S,b);},0);}}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(W,S,A,a,b,u,q){"use strict";
function g(C){return u.isDefined(C)&&u.isDefined(C.transient)?!!C.transient:true;}
function c(o,C,p,e){this._oConfig=e&&e.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,e);}
c.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};
c.prototype.getAppState=function(k){var D=new q.Deferred(),t=this,o;this._loadAppState(k).done(function(k,s,p,P){o=new A(t,k,false,s,undefined,undefined,undefined,p,P);D.resolve(o);}).fail(function(){o=new A(t,k);D.resolve(o);});return D.promise();};
c.prototype._getGeneratedKey=function(t){var k=u.generateRandomKey();if(t){k=("TAS"+k).substring(0,41);}else{k=("AS"+k).substring(0,40);}return k;};
c.prototype.createEmptyAppState=function(C,t,p,P){var o,s="",e="",U=u.isDefined(t)?t:g(this._oConfig),k=this._getGeneratedKey(U);if(p!==undefined&&!this.isPersistencyMethodSupported(p)){p=undefined;P=undefined;}if(C){if(!(C instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getName==="function"){s=C.getMetadata().getName()||"";}if(!s&&C.getMetadata&&C.getMetadata().getComponentName){s=C.getMetadata().getComponentName();}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getManifest==="function"&&typeof C.getMetadata().getManifest()==="object"&&typeof C.getMetadata().getManifest()["sap.app"]==="object"){e=C.getMetadata().getManifest()["sap.app"].ach||"";}}if(U===true){p=P=undefined;}else if(p===undefined&&this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;P=undefined;}o=new A(this,k,true,undefined,s,e,U,p,P);return o;};
c.prototype.createEmptyUnmodifiableAppState=function(){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};
c.prototype._saveAppState=function(k,D,s,C,t,p,P){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);if(U){p=undefined;P=undefined;}else if(p!==undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;}else{p=undefined;}P=undefined;}}return this._oAdapter.saveAppState(k,e,D,s,C,U,p,P);};
c.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};
c.prototype.deleteAppState=function(k){return this._oAdapter.deleteAppState(k);};
c._getSequentializer=function(){return new a();};
c.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods();}return[];};
c.prototype.isPersistencyMethodSupported=function(p){var s=this.getSupportedPersistencyMethods();if(s.length>0&&p!==undefined){return(s.indexOf(p)>=0);}return false;};
c.prototype.setAppStateToPublic=function(e){var x=d(e,"sap-xapp-state"),i=d(e,"sap-iapp-state"),X=new q.Deferred().resolve(),I=new q.Deferred().resolve(),D=new q.Deferred(),s=undefined,f=undefined;if(x!==undefined){X=this.makeStatePersistent(x,b.PublicState).done(function(n){if(x!==n){e=e.replace(x,n);s=n;}}).fail(D.reject);}if(i!==undefined){I=this.makeStatePersistent(i,b.PublicState).done(function(n){if(i!==n){e=e.replace(i,n);f=n;}}).fail(D.reject);}q.when(X,I).done(function(){D.resolve(e,x,i,s,f);});return D.promise();};
function d(U,p){var r=new RegExp("(?:"+p+"=)([^&/]+)"),R=r.exec(U),v;if(R&&R.length===2){v=R[1];}return v;}
c.prototype.makeStatePersistent=function(k,p,e){var D=new q.Deferred();if(this.getSupportedPersistencyMethods().length===0){return D.resolve(k);}if(this.isPersistencyMethodSupported(p)){this.getAppState(k).done(function(o){if(o._iPersistencyMethod!==p){o.bTransient=false;o._iPersistencyMethod=p;o._oPersistencySettings=e;if(k.startsWith("TAS")){k=k.substring(1,k.length);}this._saveAppState(k,o._sData,o._sAppName,o._sACHComponent,false,p,e).done(function(){D.resolve(k);}).fail(D.reject);}else{D.resolve(k);}}.bind(this)).fail(D.reject);}else{D.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+p);}return D.promise();};
c.WindowAdapter=W;c.hasNoAdapter=false;return c;},true);
sap.ui.predefine('sap/ushell/services/AppType',["sap/ushell/library","sap/ushell/utils/AppType"],function(l,A){"use strict";var a=JSON.parse(JSON.stringify(l.AppType));a.getDisplayName=A.getDisplayName;return a;});
sap.ui.predefine('sap/ushell/services/Bookmark',["sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/library","sap/base/util/deepClone","sap/base/util/deepExtend","sap/base/Log"],function(q,C,l,d,a,L){"use strict";var b="X-SAP-UI2-HANA:hana?remoteId=HANA_CATALOG";
function B(){this._oLaunchPageServicePromise=sap.ushell.Container.getServiceAsync("LaunchPage");if(C.last("/core/spaces/enabled")){this._oPagesServicePromise=sap.ushell.Container.getServiceAsync("Pages");}this._addBookmarkToContentNodes=function(o,c,e,s){var f=l.ContentNodeType;var p=c.map(function(g){if(g&&g.hasOwnProperty("type")&&g.isContainer){switch(g.type){case f.Page:return this.addBookmarkToPage(o,g.id,s);case f.HomepageGroup:return new Promise(function(r,h){this._oLaunchPageServicePromise.then(function(i){i.getGroupById(g.id).done(r).fail(h);});}.bind(this)).then(function(G){return this.addBookmarkToHomepageGroup(o,G,e,s);}.bind(this));default:return Promise.reject("Bookmark Service: The API needs to be called with a valid content node type. '"+g.type+"' is not supported.");}}return Promise.reject("Bookmark Service: Not a valid content node.");}.bind(this));return Promise.all(p);};this.addBookmark=function(p,c,s){var D=new q.Deferred();var e=C.last("/core/shell/enablePersonalization");var E=C.last("/core/spaces/enabled");var f=C.last("/core/spaces/myHome/enabled");if(!e&&(!E||!f)){return D.resolve().promise();}if(typeof c==="undefined"&&E){sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getDefaultPage();}).then(function(P){return{id:P.id,label:P.title,type:l.ContentNodeType.Page,isContainer:true};}).then(function(o){this._addBookmarkToContentNodes(p,[o],false,s).then(D.resolve).catch(D.reject);}.bind(this));return D.promise();}if((typeof c==="undefined"||!c.hasOwnProperty("type"))&&!Array.isArray(c)){this.addBookmarkToHomepageGroup(p,c,false,s).then(D.resolve).catch(D.reject);return D.promise();}var g=[].concat(c);this._addBookmarkToContentNodes(p,g,false,s).then(D.resolve).catch(D.reject);return D.promise();};this.addCustomBookmark=function(v,c,e,s){var o=d(c);var f=a(o,{vizType:v,vizConfig:{"sap.flp":{chipConfig:o.chipConfig},"sap.platform.runtime":{includeManifest:!o.loadManifest}}});delete f.chipConfig;delete f.loadManifest;var g=[].concat(e);return this._addBookmarkToContentNodes(f,g,true,s);};this.addBookmarkToHomepageGroup=function(p,g,c,s){if(C.last("/core/spaces/enabled")){var e="Bookmark Service: The API is not available in spaces mode.";return Promise.reject(e);}return new Promise(function(r,f){this._oLaunchPageServicePromise.then(function(h){var D;if(c){D=h.addCustomBookmark(p,g,s);}else{D=h.addBookmark(p,g,s);}D.done(function(t){var o={tile:t,group:g};sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileAdded",o);r();}).fail(f);});}.bind(this));};this.addBookmarkToPage=function(p,P,c){if(!C.last("/core/spaces/enabled")){return Promise.reject("Bookmark Service: 'addBookmarkToPage' is not valid in launchpad homepage mode, use 'addBookmark' instead.");}var e=C.last("/core/shell/enablePersonalization");var E=C.last("/core/spaces/myHome/enabled");var m=C.last("/core/spaces/myHome/myHomePageId");if(!e&&(!E||(E&&P!==m))){return Promise.reject("Bookmark Service: Add bookmark is not allowed as the personalization functionality is not enabled.");}if(p&&(typeof p.title!=="string"||typeof p.url!=="string")){return Promise.reject("Bookmark Service - Invalid bookmark data.");}return this._oPagesServicePromise.then(function(o){return o.addBookmarkToPage(P,p,undefined,c);});};this.addBookmarkByGroupId=function(p,g,c){var D=new q.Deferred();if(C.last("/core/spaces/enabled")){var e="Bookmark Service: The API 'addBookmarkByGroupId' is not supported in launchpad spaces mode.";return D.reject(e).promise();}this._oLaunchPageServicePromise.then(function(f){f.getGroups().done(function(G){G=q.grep(G,function(h){return h.id===g;});var o=null;if(G.length>0){o=G[0];}this.addBookmark(p,o,c).done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);}.bind(this)).catch(D.reject);return D.promise();};this.getShellGroupIDs=function(g){var D=new q.Deferred();if(C.last("/core/spaces/enabled")){var e="Bookmark Service: The API 'getShellGroupIDs' is not supported in launchpad spaces mode.";return D.reject(e).promise();}this._oLaunchPageServicePromise.then(function(c){c.getGroupsForBookmarks(g).done(function(G){G=G.map(function(f){return{id:c.getGroupId(f.object),title:f.title};});D.resolve(G);}).fail(D.reject);});return D.promise();};this._doAddCatalogTileToGroup=function(D,c,o,g){this._oLaunchPageServicePromise.then(function(e){if(g){e.getGroups().fail(D.reject).done(function(G){var f=G.some(function(h){if(e.getGroupId(h)===g){this._addToGroup(o,D,c,h);return true;}}.bind(this));if(!f){var E="Group '"+g+"' is unknown";L.error(E,null,"sap.ushell.services.Bookmark");D.reject(E);}}.bind(this));}else{e.getDefaultGroup().fail(D.reject).done(function(G){this._addToGroup(o,D,c,G);}.bind(this));}}.bind(this));return D.promise();};this._isSameCatalogTile=function(c,o,e){var i=e.getCatalogTileId(o);if(i===undefined){return false;}return i.indexOf(c)===0;};this._addToGroup=function(c,D,s,g){return this._oLaunchPageServicePromise.then(function(e){e.getCatalogTiles(c).fail(D.reject).done(function(f){var G=e.getGroupId(g);var t=f.some(function(o){if(this._isSameCatalogTile(s,o,e)){e.addTile(o,g).fail(D.reject).done(function(){D.resolve();sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","catalogTileAdded",G);});return true;}}.bind(this));if(!t){var E="No tile '"+s+"' in catalog '"+e.getCatalogId(c)+"'";L.error(E,null,"sap.ushell.services.Bookmark");D.reject(E);}}.bind(this));}.bind(this));};this.addCatalogTileToGroup=function(c,g,o){var D=new q.Deferred();var e;if(C.last("/core/spaces/enabled")){e="Bookmark Service: The API 'addCatalogTileToGroup' is not supported in launchpad spaces mode.";return D.reject(e).promise();}this._oLaunchPageServicePromise.then(function(f){var m=o?this._isMatchingRemoteCatalog:this._isLegacyHANACatalog;o=o||{id:b};f.onCatalogTileAdded(c);f.getCatalogs().fail(D.reject).done(function(h){var s;h.forEach(function(i){if(m(i,o,f)){if(!s){s=i;}else{L.warning("More than one matching catalog: "+JSON.stringify(o),null,"sap.ushell.services.Bookmark");}}});if(s){this._doAddCatalogTileToGroup(D,c,s,g);}else{e="No matching catalog found: "+JSON.stringify(o);L.error(e,null,"sap.ushell.services.Bookmark");D.reject(e);}}.bind(this));}.bind(this));return D.promise();};this._isMatchingRemoteCatalog=function(c,r,e){var o=e.getCatalogData(c);return o.remoteId===r.remoteId&&o.baseUrl.replace(/\/$/,"")===r.baseUrl.replace(/\/$/,"");};this._isLegacyHANACatalog=function(c,r,e){return e.getCatalogId(c)===b;};this.countBookmarks=function(u,c){var D=new q.Deferred();if(C.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(p){return p.countBookmarks({url:u,contentProviderId:c});}).then(D.resolve,D.reject);}else{this._oLaunchPageServicePromise.then(function(e){e.countBookmarks(u,c).done(D.resolve).fail(D.reject);});}return D.promise();};this.countCustomBookmarks=function(i){if(!i||!i.url||!i.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.");}if(C.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(p){return p.countBookmarks(i);});}return this._oLaunchPageServicePromise.then(function(c){return c.countCustomBookmarks(i);});};this.deleteBookmarks=function(u,c){var D=new q.Deferred();if(C.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(p){return p.deleteBookmarks({url:u,contentProviderId:c});}).then(D.resolve,D.reject);}else{this._oLaunchPageServicePromise.then(function(e){e.deleteBookmarks(u,c).done(function(r){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",u);D.resolve(r);}).fail(D.reject);});}return D.promise();};this.deleteCustomBookmarks=function(i){if(!i||!i.url||!i.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.");}if(C.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(p){return p.deleteBookmarks(i);});}return this._oLaunchPageServicePromise.then(function(c){return c.deleteCustomBookmarks(i);}).then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Bookmark","bookmarkTileDeleted",i.url);});};this.updateBookmarks=function(u,p,c){var D=new q.Deferred();if(C.last("/core/spaces/enabled")){this._oPagesServicePromise.then(function(P){return P.updateBookmarks({url:u,contentProviderId:c},p);}).then(D.resolve,D.reject);}else{this._oLaunchPageServicePromise.then(function(e){e.updateBookmarks(u,p,c).done(D.resolve).fail(D.reject);});}return D.promise();};this.updateCustomBookmarks=function(i,c){if(!i||!i.url||!i.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.");}var o=a({},c,{vizConfig:{"sap.flp":{chipConfig:c.chipConfig},"sap.platform.runtime":{includeManifest:!c.loadManifest}}});delete o.chipConfig;delete o.loadManifest;if(C.last("/core/spaces/enabled")){return this._oPagesServicePromise.then(function(p){return p.updateBookmarks(i,o);});}return this._oLaunchPageServicePromise.then(function(e){return e.updateCustomBookmarks(i,o);});};this.getContentNodes=function(){var c=l.ContentNodeType;if(C.last("/core/spaces/enabled")){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();}).then(function(s){return s.spaces.map(function(S){return{id:S.id,label:S.title,type:c.Space,isContainer:false,children:S.pages.map(function(p){return{id:p.id,label:p.title,type:c.Page,isContainer:true};})};});});}return new Promise(function(r,e){this._oLaunchPageServicePromise.then(function(f){f.getGroupsForBookmarks().done(function(h){var R=h.map(function(o){return{id:f.getGroupId(o.object),label:o.title,type:c.HomepageGroup,isContainer:true};});r(R);}).fail(e);});}.bind(this));};}
B.hasNoAdapter=true;return B;},true);
sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/base/Log","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/extend","sap/ushell/ApplicationType","sap/ushell/Config","sap/ushell/navigationMode","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/services/AppConfiguration","sap/ushell/TechnicalParameters","sap/ushell/utils","sap/ushell/utils/UrlParsing"],function(L,i,O,E,A,C,N,_,a,b,c,d,f,g,h,j,k,l,m,T,U,n){"use strict";
function p(o,e,P,s){this._init.apply(this,arguments);}
p.prototype._init=function(o,e,P,s){this._iLogId=0;if(!this._implementsServiceInterface(o)){L.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new b(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=s;this._oAdapter=o;};
p.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};
p.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var s=n.parseShellHash(F);if(!s||!s.semanticObject||!s.action){return undefined;}return[{semanticObject:s.semanticObject,action:s.action}];};
p.prototype.resolveHashFragment=function(H){var t=this,D=new jQuery.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),s=this._extractInboundFilter(H);this._oInboundProvider.getInbounds(s).then(function(I){t._resolveHashFragment(H,B,I).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype.resolveTileIntent=function(H){var t=this,D=new jQuery.Deferred(),s=this._extractInboundFilter(H);this._oInboundProvider.getInbounds(s).then(function(I){t._resolveTileIntent(H,undefined,I).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype.resolveTileIntentInContext=function(I,H){var o,D=new jQuery.Deferred();o=a.createIndex(I.concat(k.getInbounds()));this._resolveTileIntent(H,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};
p.prototype._resolveHashFragment=function(H,B,I){var t=this,D=new jQuery.Deferred(),F=H.indexOf("#")===0?H:"#"+H,s=n.parseShellHash(F);if(s===undefined){L.error("Could not parse shell hash '"+H+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,I,{bExcludeTileInbounds:true}).fail(function(e){L.error("Could not resolve "+H,"_getMatchingInbounds promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");D.reject(e);}).done(function(M){var e;if(M.length===0){L.warning("Could not resolve "+H,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}M=t._applySapNavigationScopeFilter(M,s);e=M[0];if(L.getLevel()>=L.Level.DEBUG){var u=function(K,v){return(this[K]===undefined)?"<undefined>":v;};var r=function(o,v){return(o==="_original")?undefined:u.call(this,o,v);};var q=JSON.stringify(e,r,"   ");L.debug("The following target will now be resolved",q,"sap.ushell.services.ClientSideTargetResolution");}t._resolveSingleMatchingTarget(e,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};
p.prototype._applySapNavigationScopeFilter=function(M,s){var S=s&&s.params&&s.params["sap-navigation-scope-filter"];if(!S){return M;}var F=M.filter(function(o){var e=O.get("inbound.signature.parameters",o);var q=e&&e["sap-navigation-scope"];if(q){return S[0]===q.defaultValue.value;}return undefined;});return F.length>0?F:M;};
p.prototype._resolveSingleMatchingTarget=function(M,B,F){var t=this,D=new jQuery.Deferred(),I=n.parseShellHash(F),s=[I.semanticObject,I.action].join("-"),e=(M.inbound.resolutionResult||{}).applicationType;var o;if(this._oAdapter.resolveSystemAlias){o=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var H=!!M.inbound.templateContext;var q=A.getEasyAccessMenuResolver(s,e);if(q&&!H){q(I,M,o,A.WDA.enableWdaCompatibilityMode).then(function(R){var u=N.compute(O.get("inbound.resolutionResult.applicationType",M),(M.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(M.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(m.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));U.shallowMergeObject(R,u);R.inboundPermanentKey=M.inbound.permanentKey||M.inbound.id;D.resolve(R);},function(u){D.reject(u);});return D.promise();}var r=this._getReservedParameters(M);c.mapParameterNamesAndRemoveObjects(M);sap.ushell.Container.getServiceAsync("AppState").then(function(u){l.mixAppStateIntoResolutionResultAndRename(M,u).done(function(M){var R=function(){return t._constructFallbackResolutionResult.call(t,M,B,F);};if(A[e]){R=A[e].generateResolutionResult;}delete M.intentParamsPlusAllDefaults["sap-tag"];delete M.mappedIntentParamsPlusSimpleDefaults["sap-tag"];M.mappedDefaultedParamNames=M.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var v=O.get("inbound.resolutionResult.url",M);d.executePrelaunchOperations(M,r["sap-prelaunch-operations"]).then(function(){return R(M,v,o);}).then(function(w){w.reservedParameters=r;w.inboundPermanentKey=M.inbound.permanentKey||M.inbound.id;return w;}).then(function(w){L.debug("Intent was resolved to the following target",JSON.stringify(M.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");U.shallowMergeObject(M.resolutionResult,w);D.resolve(M.resolutionResult);},function(w){if(typeof w==="string"&&w.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,M,B,F).then(function(x){U.shallowMergeObject(M.resolutionResult,x);D.resolve(M.resolutionResult);},D.reject.bind(D));}else{D.reject(w);}});});});return D.promise();};
p.prototype._getReservedParameters=function(M){var r=T.getParameters({injectFrom:"startupParameter"}).map(function(P){return P.name;});var R=j.extractParameters(r,M.intentParamsPlusAllDefaults);T.getParameters({injectFrom:"inboundParameter"}).forEach(function(P){var s=P.name;var S=M.inbound&&M.inbound.signature&&M.inbound.signature.parameters;if(S&&Object.keys(S).length>0){var o=S[s];var I=o&&o.defaultValue&&o.defaultValue.hasOwnProperty("value");var e=o&&o.filter&&o.filter.hasOwnProperty("value");if(o&&(e||I)){if(I){R[s]=o.defaultValue.value;}else{R[s]=o.filter.value;}}else{delete R[s];}delete M.intentParamsPlusAllDefaults[s];var q=M.defaultedParamNames.indexOf(s);if(q>=0){M.defaultedParamNames.splice(q,1);}}});return R;};
p.prototype._resolveTileIntent=function(H,B,I){var t=this,D=new jQuery.Deferred(),F=H.indexOf("#")===0?H:"#"+H,s=n.parseShellHash(F);if(s===undefined){L.error("Could not parse shell hash '"+H+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,I,{bExcludeTileInbounds:false}).fail(function(e){L.error("Could not resolve "+H,"_getMatchingInbounds promise rejected with: "+e,"sap.ushell.services.ClientSideTargetResolution");D.reject(e);}).done(function(M){var o;if(M.length===0){L.warning("Could not resolve "+H,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}o=M[0];t._resolveSingleMatchingTileIntent(o,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};
p.prototype._resolveSingleMatchingTileIntent=function(M,B,F){var D=new jQuery.Deferred(),s=(M.inbound.resolutionResult||{}).applicationType,t=this;var e;if(this._oAdapter.resolveSystemAlias){e=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}c.mapParameterNamesAndRemoveObjects(M);sap.ushell.Container.getServiceAsync("AppState").then(function(o){l.mixAppStateIntoResolutionResultAndRename(M,o).done(function(M){var r=function(){return t._constructFallbackResolutionResult.call(t,M,B,F);};if(A[s]){r=A[s].generateResolutionResult;}delete M.intentParamsPlusAllDefaults["sap-tag"];delete M.mappedIntentParamsPlusSimpleDefaults["sap-tag"];M.mappedDefaultedParamNames=M.mappedDefaultedParamNames.filter(function(P){return P!=="sap-tag";});var q=O.get("inbound.resolutionResult.url",M);r(M,q,e).then(function(R){U.shallowMergeObject(M.resolutionResult,R);var u=E({},M.inbound.tileResolutionResult);u.startupParameters=M.effectiveParameters;u.navigationMode=M.resolutionResult.navigationMode;if(!u.navigationMode){u.navigationMode=N.getNavigationMode(M.resolutionResult);}D.resolve(u);L.debug("Tile Intent was resolved to the following target",JSON.stringify(u,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(u){D.reject(u);});});});return D.promise();};
p.prototype._constructFallbackResolutionResult=function(M,B,F){var e={},D;Object.keys(M.intentParamsPlusAllDefaults).forEach(function(P){if(Array.isArray(M.intentParamsPlusAllDefaults[P])){e[P]=M.intentParamsPlusAllDefaults[P];}});D=M.mappedDefaultedParamNames||M.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){L.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}L.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,E({},M.inbound),e).done(function(o){var q={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(P){if(o.hasOwnProperty(P)){q[P]=o[P];}});r(q);}).fail(R.bind(null));});};
p.prototype.getDistinctSemanticObjects=function(){var D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(I){var s={};I.getAllInbounds().forEach(function(o){if(typeof o.semanticObject==="string"&&o.semanticObject!=="*"&&!o.hideIntentLink&&o.semanticObject.length>0){s[o.semanticObject]=true;}});D.resolve(Object.keys(s).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype.getLinks=function(o){var e,t=this,s,P,I,D=new jQuery.Deferred(),q;if(arguments.length===1&&i(arguments[0])){e=arguments[0];q=E({},e);["action","semanticObject"].forEach(function(r){if(e.hasOwnProperty(r)){q[r]=e[r];}});if(q.appStateKey){q.params=q.params||{};q.params["sap-xapp-state"]=[q.appStateKey];delete q.appStateKey;}}else if(arguments.length<=3){L.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");s=arguments[0];P=arguments[1];I=arguments[2];q={semanticObject:s,params:P,ignoreFormFactor:I};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(r){t._getLinks(q,r).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype._validateGetSemanticObjectLinksArgs=function(o){var s=o.semanticObject,e=o.action,I=!o.hasOwnProperty("action");if(typeof s!=="undefined"||I){if(typeof s!=="string"){L.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(s)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(I&&s.match(/^\s+$/)){L.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!I&&s.length===0){L.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+s+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof e!=="undefined"){if(typeof e!=="string"){L.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(e.length===0){L.error("invalid input for _getLinks","the action must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};
p.prototype._getLinks=function(o,I){var s=o.semanticObject,e=o.action,P=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,q=o.ignoreFormFactor,S=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){L.warning("the parameter 'sortResultOnTexts' was experimental and is no longer supported","getLinks results will be sorted by '"+S+"'","sap.ushell.services.ClientSideTargetResolution");}var r={bExcludeTileInbounds:true};var u=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){r.tags=o.tags;}if(u){return new jQuery.Deferred().reject(u).promise();}if(s==="*"){return jQuery.when([]);}function v(z){var B=n.paramsToString(z);return B?"?"+B:"";}var D=new jQuery.Deferred(),F=U.getFormFactor(),x=n.parseParameters(v(P)),y={semanticObject:(s===""?undefined:s),action:e,formFactor:(q?undefined:F),params:x};if(t){y.treatTechHintAsFilter=true;}this._getMatchingInbounds(y,I,r).done(function(M){var z={},R=M.map(function(G){var J=s||G.inbound.semanticObject,K="#"+J+"-"+G.inbound.action,Q;if(J==="*"){return undefined;}if(G.inbound.action==="*"){return undefined;}if(G.inbound&&G.inbound.hasOwnProperty("hideIntentLink")&&G.inbound.hideIntentLink===true){return undefined;}if(!z.hasOwnProperty(K)){z[K]={matchingInbound:G.inbound,count:1};if(G.inbound.signature.additionalParameters==="ignored"){Q=j.filterObjectKeys(x,function(Z){return(Z.indexOf("sap-")===0)||G.inbound.signature.parameters.hasOwnProperty(Z);},false);}else{Q=x;}if(w){var V=Object.keys(Q).some(function(Z){return Z.indexOf("sap-")!==0;});if(!V){z[K].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var W=j.inboundSignatureMeetsParameterOptions(G.inbound.signature.parameters,o.paramsOptions||[]);if(!W){z[K].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var X={intent:K+v(Q),text:G.inbound.title};if(G.inbound.icon){X.icon=G.inbound.icon;}if(G.inbound.subTitle){X.subTitle=G.inbound.subTitle;}if(G.inbound.shortTitle){X.shortTitle=G.inbound.shortTitle;}var Y=O.get("inbound.signature.parameters.sap-tag.defaultValue.value",G);if(Y){X.tags=[Y];}return X;}z[K].count++;return undefined;}).filter(function(G){return typeof G==="object";});if(S!=="priority"){R.sort(function(G,J){return G[S]<J[S]?-1:1;});}if(R.length===0){L.debug("_getLinks returned no results");}else if(L.getLevel()>=L.Level.DEBUG){if(L.getLevel()>=L.Level.TRACE){var B=[];var H=[];R.forEach(function(G){var J=G.intent.split("?")[0];if(z[J].hideReason){H.push(["-",J+"("+z[J].hideReason+")\n"," text:",G.text+"\n"," full intent:",G.intent].join(" "));}else{B.push(["-",J,z[J].count>1?"("+(z[J].count-1)+" others matched)\n":"\n","text:",G.text+"\n","full intent:",G.intent].join(" "));}});L.debug("_getLinks filtered to the following unique intents:","\n"+B.join("\n"),"sap.ushell.services.ClientSideTargetResolution");L.debug("_getLinks would have also returned the following unique intents, but something prevented this:",H.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{L.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(z).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};
p.prototype._getMatchingInbounds=function(s,I,o){var t=this,e,q,r,u,S,v,P,D=new jQuery.Deferred();if(o){e=o.tags;v=o.bExcludeTileInbounds;}if(L.getLevel()>=L.Level.DEBUG){r=++t._iLogId;}g.begin(function(){function w(M){var y=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var z=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return n.constructShellHash({semanticObject:z,action:y,params:M.params});}var x=w(s);return{logId:r,title:"Matching Intent '"+x+"' to inbounds (form factor: "+(s.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});S=s.semanticObject;q=s.action;this._oShellHash=s;u=e?I.getSegmentByTags(e):I.getSegment(S,q);if(v){P=u.filter(function(w){return!w.tileResolutionResult||!w.tileResolutionResult.isCustomTile;});}else{P=u;}var G=null;if(this._oAdapter.getContentProviderDataOriginsLookup){G=this._oAdapter.getContentProviderDataOriginsLookup.bind(this._oAdapter);}f.match(s,P,{},G,L.getLevel()>=L.Level.DEBUG).then(function(w){g.log(function(){return{logId:r,stage:1,prefix:"\u2718",lines:Object.keys(w.noMatchReasons||{}).map(function(z){return z+" "+w.noMatchReasons[z];})};});g.log(function(){var z=w.matchResults.map(function(B){return _.formatInbound(B.inbound);});return{logId:r,stage:1,prefix:z.length>0?"\u2705":"\u2718",lines:z.length>0?z:["No inbound was matched"]};});var M={};var x=false;var y=Object.keys(w.missingReferences);y.forEach(function(z){var B=Object.keys(w.missingReferences[z]);x=x||B.length>0;M[z]=B;});y=y.filter(function(z){if(M[z].length>0){return true;}delete M[z];return false;});if(!x){g.log(function(){return{logId:r,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new jQuery.Deferred().resolve({matchResults:w.matchResults,referencesToInclude:null}).promise();}y.forEach(function(z){g.log(function(){return{logId:r,stage:2,line:"@ Must resolve the following references with contentProviderId = \""+z+"\":",prefix:"\u2022",lines:M[z]};});});var R=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(z){var B=y.map(function(F){return this.getSystemContext(F);}.bind(this));return Promise.all(B).then(function(F){var H=y.map(function(J,K){return new Promise(function(Q,V){z.resolveReferences(M[J],F[K]).done(Q).fail(V);});});return Promise.all(H);});}.bind(this)).then(function(z){var B={matchResults:w.matchResults,referencesToInclude:{}};y.forEach(function(F,H){var J=z[H];B.referencesToInclude[F]=J;if(Object.keys(J).length>0){g.log(function(){return{logId:r,stage:2,line:"\u2705 resolved references with contentProviderId = \""+F+"\" to the following values:",prefix:"\u2022",lines:Object.keys(J).map(function(K){return K+": '"+J[K]+"'";})};});}});R.resolve(B);}).catch(function(z){g.log(function(){return{logId:r,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+z};});D.resolve([]);});return R.promise();}.bind(this)).then(function(w){var M,x,R=w.referencesToInclude;if(!R){g.log(function(){return{logId:r,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new jQuery.Deferred().resolve(w).promise();}x=w.matchResults;M=x.map(function(y){return y.inbound;});return f.match(s,M,R,G,0).then(function(F){g.log(function(){var x=F.matchResults||[];if(x.length>=1){return{logId:r,stage:3,line:"The following inbounds re-matched:",lines:x.map(function(y){return _.formatInbound(y.inbound);}),prefix:"\u2705"};}return{logId:r,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var M=F.matchResults||[];if(M.length<=1){g.log(function(){return{logId:r,stage:4,line:"Nothing to sort"};});D.resolve(M);return;}var w=f.sortMatchingResultsDeterministic(F.matchResults||[]);g.log(function(){var x=w.map(function(y){return _.formatInbound(y.inbound||{})+(y.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+y["sap-priority"]+"'"+"\n * 2 * Sort string: '"+y.priorityString+"\n * 3 * Deterministic blob: '"+f.serializeMatchingResult(y)+"'";});return{logId:r,stage:4,line:"Sorted inbounds as follows:",lines:x,prefix:".",number:true};});D.resolve(w);});return D.promise().then(function(M){g.end(function(){return{logId:r};});return M;});};
p.prototype._isIntentSupportedOne=function(I,o){var D=new jQuery.Deferred(),s=n.parseShellHash(I);if(I==="#"){D.resolve(true);return D.promise();}if(s===undefined){return D.reject("Could not parse shell hash '"+I+"'").promise();}s.formFactor=U.getFormFactor();this._getMatchingInbounds(s,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};
p.prototype.isIntentSupported=function(I){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(I,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype._isIntentSupported=function(I,o){var t=this,D=new jQuery.Deferred(),s={};D.resolve();function e(q,S){s[q]={supported:S};}var r=[];I.forEach(function(q){var u=t._isIntentSupportedOne(q,o);u.fail(function(v){r.push(v);});u.done(function(v){e(q,v);});D=jQuery.when(D,u);});var R=new jQuery.Deferred();D.done(function(){R.resolve(s);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};
p.prototype.getUserDefaultParameterNames=function(s){var t=this,D=new jQuery.Deferred();this._oInboundProvider.getInbounds().then(function(I){t._getUserDefaultParameterNames(I.getAllInbounds(),s).then(function(r){D.resolve(r);},function(e){D.reject("Cannot get user default parameters from inbounds: "+e);});},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype._getUserDefaultParameterNames=function(I,s){var r={simple:{},extended:{}};I=I.filter(function(o){if(o.contentProviderId===undefined&&s.id===""){return true;}return o.contentProviderId===s.id;});return sap.ushell.Container.getServiceAsync("ReferenceResolver").then(function(R){I.forEach(function(t){var S=t.signature&&t.signature.parameters||[];Object.keys(S).forEach(function(P){var o=S[P],e,q,u;if(o){if(o.filter&&o.filter.format==="reference"){u=o.filter.value;}else if(o.defaultValue&&o.defaultValue.format==="reference"){u=o.defaultValue.value;}if(typeof u==="string"){e=R.extractUserDefaultReferenceName(u);if(typeof e==="string"){r.simple[e]={};}q=R.extractExtendedUserDefaultReferenceName(u);if(typeof q==="string"){r.extended[q]={};}}}});});return r;});};
p.prototype.getEasyAccessSystems=function(M){var r={},o,v,D;M=M||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[M]){return this._oHaveEasyAccessSystemsDeferreds[M].promise();}this._oHaveEasyAccessSystemsDeferreds[M]=new jQuery.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[M];function e(I,s,v){if(!I){return false;}var q=[I.semanticObject,I.action].join("-");return v[M][q]&&I.deviceTypes&&s!==undefined&&I.deviceTypes[s];}o=A.getEasyAccessMenuDefinitions().reduce(function(R,q){var s=q.easyAccessMenu.intent.split("-")[1];R[s]={appType:q.type,priority:q.easyAccessMenu.systemSelectionPriority};return R;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(u,q){var s=q.easyAccessMenu.intent;u[s]=q.easyAccessMenu.showSystemSelectionInUserMenu;return u;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(s,q){var t=q.easyAccessMenu.intent;s[t]=q.easyAccessMenu.showSystemSelectionInSapMenu;return s;},{})};this._oInboundProvider.getInbounds().then(function(I){var q={};I.getAllInbounds().filter(function(s){return e(s,U.getFormFactor(),v);}).forEach(function(s){var S;if(i(s.signature.parameters["sap-system"])&&s.signature.parameters["sap-system"].hasOwnProperty("filter")){S=O.get("signature.parameters.sap-system.filter.value",s);}if(typeof S==="string"){var t=o[s.action].priority;var u=o[s.action].appType;if(!r[S]){q[S]=-1;r[S]={appType:{}};}if(q[S]<t){r[S].text=s.title;q[S]=t;}r[S].appType[u]=true;}else{L.warning("Cannot extract sap-system from easy access menu inbound: "+_.formatInbound(s),"This parameter is supposed to be a string. Got '"+S+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};
p.prototype.getSystemContext=function(s){var S=s===undefined?"":s;return new Promise(function(r,e){var o;this._oAdapter.resolveSystemAlias(S).done(function(R){o=h.createSystemContextFromSystemAlias(R);r(o);}).fail(function(q){e(q);});}.bind(this));};
p.hasNoAdapter=false;return p;},true);
sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values","sap/ushell/library","sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/base/Log"],function(P,O,q,a,S,b,d,e,c,V,C,f,g,u,h,r,L){"use strict";var D=u.DisplayFormat;var j="sap.ushell.services.CommonDataModel",k={STATIC_LAUNCHER:"sap.ushell.StaticAppLauncher",DYNAMIC_LAUNCHER:"sap.ushell.DynamicAppLauncher",CARD:"sap.ushell.Card"};
function l(A,o,p,s){this._oAdapter=A;this._oPersonalizationProcessor=new P();this._oSiteDeferred=new q.Deferred();this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new S();this._oPersonalizationDeltas={};this._bLoadPersonalization=h.isFlpHomeIntent();this._oGetSitePromise=A.getSite().then(function(i){this._oOriginalSite=c({},i);if(this._bLoadPersonalization){this._loadAndApplyPersonalization(i);}return i;}.bind(this)).fail(function(i){this._oSiteDeferred.reject(i);this._bLoadPersonalization=true;}.bind(this));}
l.prototype._loadAndApplyPersonalization=function(s){var o=new V(s._version);if(o.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(o).then(function(p){if(p){this._oPersonalizationDeltas=d(p);}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"};}this._triggerMixinPersonalisationInSite(s,p);}.bind(this)).fail(this._oSiteDeferred.reject);}else{this._oPersonalizedPages={};this._oOriginalSite=this._ensureStandardVizTypesPresent(this._oOriginalSite);this._oOriginalSite=this._ensureProperDisplayFormats(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite);}};
l.prototype._applyPagePersonalization=function(p,o){var s=p.identification.id;if(Object.keys(o).length){var i=o.classicHomePage;if(i&&i.version==="3.1.0"){Object.keys(i).forEach(function(t){if(!o[t]){o[t]=i[t];}});delete o.classicHomePage;o._version=o.version;}var v=new V(o._version||o.version);if(v.compareTo("3.1.0")<0){o={classicHomePage:o,_version:"3.1.0",version:"3.1.0"};}}this._oPersonalizationDeltas=o;var m=o[s]||{};var n=this._oSiteConverter.convertTo("3.0.0",d(p,20));return this._triggerMixinPersonalisationInSite(n,m).then(function(t){this._oPersonalizedPages[s]=this._oSiteConverter.convertTo("3.1.0",d(t,20));return this._oPersonalizedPages[s];}.bind(this));};
l.prototype._triggerMixinPersonalisationInSite=function(s,p){return new Promise(function(i,m){this._oPersonalizationProcessor.mixinPersonalization(s,p).done(function(o){this._oPersonalizedSite=this._ensureCompleteSite(o);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureStandardVizTypesPresent(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureProperDisplayFormats(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);i(this._oPersonalizedSite);}.bind(this)).fail(function(M){this._oSiteDeferred.reject(M);m();}.bind(this));}.bind(this));};
l.prototype.getHomepageGroups=function(){var o=new q.Deferred();this.getSite().then(function(s){var G=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];o.resolve(G);});return o.promise();};
l.prototype.getGroups=function(){var o=new q.Deferred();this.getSite().then(function(s){var G=[];Object.keys(s.groups).forEach(function(K){G.push(s.groups[K]);});o.resolve(G);});return o.promise();};
l.prototype.getGroup=function(i){var o=new q.Deferred();this.getSite().then(function(s){var G=s.groups[i];if(G){o.resolve(G);}else{o.reject("Group "+i+" not found");}});return o.promise();};
l.prototype.getSite=function(){if(!this._bLoadPersonalization){this.getSiteWithoutPersonalization().then(this._loadAndApplyPersonalization.bind(this));this._bLoadPersonalization=true;}return this._oSiteDeferred.promise();};
l.prototype.getSiteWithoutPersonalization=function(){return this._oGetSitePromise;};
l.prototype.getPage=function(p){return new Promise(function(i,m){var E=C.last("/core/shell/enablePersonalization");var n=C.last("/core/spaces/myHome/enabled");var M=C.last("/core/spaces/myHome/myHomePageId");Promise.resolve(this._oGetSitePromise).then(function(){if(this._oPersonalizedPages[p]){i(this._oPersonalizedPages[p]);return;}if(E||(n&&p===M)){Promise.all([this._getPageFromAdapter(p),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).then(function(o){this._applyPagePersonalization(o[0],o[1]).then(i).catch(function(){m("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)).catch(function(){m("CommonDataModel Service: Cannot get page "+p);});return;}i(this._getPageFromAdapter(p));}.bind(this)).catch(m);}.bind(this));};
l.prototype._getPageFromAdapter=function(p){if(!this._oAdapter.getPage){return Promise.resolve(d(this._oOriginalSite.pages[p],20));}return this._oAdapter.getPage(p).then(function(o){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(R){var v=R[0];var i=R[1];this._oOriginalSite.pages[p]=o;this._oOriginalSite.visualizations=v;this._oOriginalSite.vizTypes=i;return d(o,20);}.bind(this));}.bind(this));};
l.prototype._filterForProperPages=function(p){return p.filter(function(o){return!!o;});};
l.prototype.getPages=function(p){return new Promise(function(i,m){var E=C.last("/core/shell/enablePersonalization");var n=C.last("/core/spaces/myHome/enabled");var M=C.last("/core/spaces/myHome/myHomePageId");Promise.resolve(this._oGetSitePromise).then(function(){if(E||n){Promise.all([this._getPagesFromAdapter(p),this._oAdapter.getPersonalization(this._oOriginalSite._version)]).then(function(o){var s=o[0];var t=Promise.all(Object.keys(s).map(function(v){if(this._oPersonalizedPages[v]){return Promise.resolve(this._oPersonalizedPages[v]);}if(!E&&v!==M){return Promise.resolve(s[v]);}return this._applyPagePersonalization(s[v],o[1]).catch(function(){m("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)));t.then(function(v){i(this._filterForProperPages(v));}.bind(this));}.bind(this)).catch(function(){m("CommonDataModel Service: Cannot get pages");});return;}this._getPagesFromAdapter(p).then(function(o){i(this._filterForProperPages(g(o)));}.bind(this));}.bind(this)).catch(m);}.bind(this));};
l.prototype._getPagesFromAdapter=function(p){if(!this._oAdapter.getPages){var o={};for(var s in this._oOriginalSite.pages){if(f(p,this._oOriginalSite.pages[s].identification.id)){o[s]=this._oOriginalSite.pages[s];}}return Promise.resolve(d(o,20));}return this._oAdapter.getPages(p).then(function(i){return Promise.all([this.getCachedVisualizations(),this.getCachedVizTypes()]).then(function(R){var v=R[0];var m=R[1];this._oOriginalSite.visualizations=v;this._oOriginalSite.vizTypes=m;Object.keys(i).forEach(function(K){this._oOriginalSite.pages[K]=i[K];}.bind(this));return d(i,20);}.bind(this));}.bind(this));};
l.prototype.getAllPages=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();}).then(function(H){var p=[];H.spaces.forEach(function(s){s.pages.forEach(function(o){if(p.indexOf(o.id)===-1){p.push(o.id);}});});return this.getPages(p);}.bind(this));};
l.prototype.getApplications=function(){return new Promise(function(i,m){this.getSite().then(function(s){var A=s.applications;if(A){i(A);}else{m("CDM applications not found.");}}).fail(m);}.bind(this));};
l.prototype.getVizTypes=function(){if(typeof this._oAdapter.getVizTypes==="function"){return Promise.all([this._getSiteProperty("vizTypes"),this._oAdapter.getVizTypes()]).then(function(R){var s=R[0];var A=R[1];return e(s,A);});}return this.getCachedVizTypes();};
l.prototype.getCachedVizTypes=function(){var o=Promise.resolve();if(typeof this._oAdapter.getCachedVizTypes==="function"){o=this._oAdapter.getCachedVizTypes();}return Promise.all([this._getSiteProperty("vizTypes"),o]).then(function(R){var s=R[0];var i=R[1];return e(s,i);});};
l.prototype.getVizType=function(v){var o=Promise.resolve();if(typeof this._oAdapter.getVizType==="function"){o=this._oAdapter.getVizType(v);}return Promise.all([this._getSiteProperty("vizTypes"),o]).then(function(R){var s=R[0];var i=R[1];if(i){s[v]=i;}return s[v];});};
l.prototype.getVisualizations=function(){if(typeof this._oAdapter.getVisualizations==="function"){return Promise.all([this._getSiteProperty("visualizations"),this._oAdapter.getVisualizations()]).then(function(R){var s=R[0];var A=R[1];return e(s,A);});}return this.getCachedVisualizations();};
l.prototype.getCachedVisualizations=function(){var o=Promise.resolve();if(typeof this._oAdapter.getCachedVisualizations==="function"){o=this._oAdapter.getCachedVisualizations();}return Promise.all([this._getSiteProperty("visualizations"),o]).then(function(R){var s=R[0];var i=R[1];return e(s,i);});};
l.prototype._getSiteProperty=function(o){return new Promise(function(i,m){this.getSite().then(function(s){var p=O.get(o,s);if(p){i(p);}else{var n=o.toString();m("CDM "+n+" not found.");}}).fail(m);}.bind(this));};
l.prototype.getGroupFromOriginalSite=function(G){var o=new q.Deferred();if(typeof G==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[G]){o.resolve(q.extend(true,{},this._oOriginalSite.groups[G]));}else{o.reject("Group does not exist in original site.");}return o.promise();};
l.prototype.getOriginalPage=function(p){return d(this._oOriginalSite.pages[p],20);};
l.prototype.save=function(p){var o=new q.Deferred(),i,m;if(this._oOriginalSite._version==="3.1.0"){if(!p){return o.reject("No page id was provided").promise();}m=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[p]);i=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[p]);}else{m=this._oOriginalSite;i=this._oPersonalizedSite;}this._oPersonalizationProcessor.extractPersonalization(d(i,20),d(m,20)).done(function(E){if(!b(E)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version;}if(p){this._oPersonalizationDeltas[p]=E;}else{this._oPersonalizationDeltas=E;}this._setPersonalization(this._oPersonalizationDeltas).then(o.resolve).catch(o.reject);}else{o.resolve();}}.bind(this)).fail(function(){o.reject("Personalization Processor: Cannot extract personalization.");});return o.promise();};
l.prototype._setPersonalization=function(i,p){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]};}return new Promise(function(m,n){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,i,p);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:m,reject:n});}.bind(this));}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(i,p);return new Promise(function(m,n){this._oPendingPersonalizationDeferred.then(m).fail(n).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var N=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(N,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery;}}.bind(this));}.bind(this));};
l.prototype._cleanupPersonalizationQueuePromises=function(n,i){i.forEach(function(p){n.then(p.resolve).catch(p.reject);});};
l.prototype._getUnreferencedCatalogApplications=function(E){var U={};var A=Object.keys(E.applications).map(function(s){return E.applications[s]["sap.app"].id;}).reduce(function(i,s){i[s]=true;return i;},{});var o=E.catalogs;Object.keys(o).forEach(function(s){var i=o[s].payload.appDescriptors;i.map(function(m){return m.id;}).filter(function(m){return!A[m];}).forEach(function(B){if(!U.hasOwnProperty(s)){U[s]={};}U[s][B]=true;});});return U;};
l.prototype._formatUnreferencedApplications=function(s,U){return"One or more apps from "+s+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(U).map(function(i){var B=Object.keys(U[i]).map(function(m){return"'"+m+"'";});return"From catalog '"+i+"': "+B.join(", ");}).join("; ");};
l.prototype._removeUnreferencedApplications=function(E,U){Object.keys(E.catalogs).forEach(function(s){var o=E.catalogs[s].payload;var A=o.appDescriptors;o.appDescriptors=A.filter(function(i){return U[s]&&!U[s][i.id];});});};
l.prototype.getExtensionSites=function(){var o=new q.Deferred();sap.ushell.Container.getServiceAsync("PluginManager").then(function(i){i.loadPlugins("ContentProvider").done(function(){var m=Object.keys(this._oContentProviderIndex),t=m.length;if(t===0){o.resolve([]);return;}var G=m.map(function(s){var n=this._oContentProviderIndex[s];var p;try{p=n.getSite();if(!p||typeof p.then!=="function"){p=Promise.reject("Call to getSite failed: getSite did not return a Promise");}}catch(E){p=Promise.reject("Call to getSite failed: "+E);}return p.then(function(s,v){var w=q.extend(true,{},v);var U=this._getUnreferencedCatalogApplications(v);if(Object.keys(U).length>0){var x=this._formatUnreferencedApplications(s,U);L.error(x,null,j);this._removeUnreferencedApplications(w,U);}var y={providerId:s,success:true,site:w};o.notify(y);return y;}.bind(this,s)).catch(function(s,v){return{providerId:s,success:false,error:v};}.bind(null,s));}.bind(this));Promise.all(G).then(o.resolve);}.bind(this));}.bind(this));return o.promise();};
l.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){L.error("a content provider with ID '"+i+"' is already registered",null,j);return;}this._oContentProviderIndex[i]=s;L.debug("ContentProvider '"+i+"' was registered",null,j);};
l.prototype._ensureCompleteSite=function(p){if(p.groups){var G=p.groups;Object.keys(G).forEach(function(K){if(!G[K]){delete G[K];}else{if(!G[K].payload){G[K].payload={};}if(!G[K].payload.links){G[K].payload.links=[];}if(!G[K].payload.tiles){G[K].payload.tiles=[];}if(!G[K].payload.groups){G[K].payload.groups=[];}}});}return p;};
l.prototype._ensureGroupsOrder=function(s){var G=O.get("site.payload.groupsOrder",s),o=s.groups,m,i=0;if(!G){return s;}while(i<G.length){m=G[i];if(!o[m]){G.splice(i,1);}else{i++;}}return s;};
l.prototype.getPlugins=(function(){var i,E,p;E=function(s,o){var m,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){L.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",j);return{};}if(n>1){L.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",j);}m=O.get("signature.parameters",o["Shell-plugin"])||{};return Object.keys(m).reduce(function(R,N){var t=O.get(N+".defaultValue.value",m);if(typeof t==="string"){R[N]=t;}return R;},{});};i=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=i(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return q.when(p);}p={};return this.getSiteWithoutPersonalization().then(function(s){var A=s.applications||{};Object.keys(A).filter(function(m){return O.get("type",this[m]["sap.flp"])==="plugin";},A).forEach(function(m){var n,t,v=this[m],w={};if(!a(v["sap.platform.runtime"])){L.error("Cannot find 'sap.platform.runtime' section for plugin '"+m+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!a(v["sap.platform.runtime"].componentProperties)){L.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+m+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{w=v["sap.platform.runtime"].componentProperties;}p[m]={url:w.url,component:v["sap.ui5"].componentName};var x=O.get("crossNavigation.inbounds",v["sap.app"])||{};t=E(m,x);n=q.extend(w.config||{},t);if(n){p[m].config=n;}if(w.asyncHints){p[m].asyncHints=w.asyncHints;}var y=O.get("deviceTypes",v["sap.ui"]);if(y){p[m].deviceTypes=y;}},A);return i(p);},function(v){return v;});};})();
l.prototype._mapDisplayFormats=function(i){var o={tile:D.Standard,standard:D.Standard,link:D.Compact,compact:D.Compact,flat:D.Flat,flatWide:D.FlatWide,tileWide:D.StandardWide,standardWide:D.StandardWide};var s=Object.keys(o).filter(function(m){return i.indexOf(m)>-1;});return s.map(function(m){return o[m];});};
l.prototype._ensureProperDisplayFormats=function(s){if(s.vizTypes){Object.keys(s.vizTypes).forEach(function(K){if(s.vizTypes[K]["sap.flp"]&&s.vizTypes[K]["sap.flp"].vizOptions){var v=s.vizTypes[K];var i=O.get("vizOptions.displayFormats.supported",v["sap.flp"]);var m=O.get("vizOptions.displayFormats.default",v["sap.flp"]);if(i){s.vizTypes[K]["sap.flp"].vizOptions.displayFormats.supported=this._mapDisplayFormats(i);}if(m){s.vizTypes[K]["sap.flp"].vizOptions.displayFormats.default=this._mapDisplayFormats([m])[0];}}}.bind(this));}if(s.hasOwnProperty("pages")){Object.keys(s.pages).forEach(function(K){var p=s.pages[K];if(p.payload&&p.payload.sections){var o=p.payload.sections;Object.keys(o).forEach(function(i){var m=o[i];Object.keys(m.viz).forEach(function(v){var n=m.viz[v];if(n.displayFormatHint){var M=this._mapDisplayFormats([n.displayFormatHint])[0];n.displayFormatHint=M||n.displayFormatHint;}}.bind(this));}.bind(this));}}.bind(this));}else if(s.hasOwnProperty("groups")){Object.keys(s.groups).forEach(function(G){var o=s.groups[G];o.payload.tiles.forEach(function(t){if(t.displayFormatHint){var m=this._mapDisplayFormats([t.displayFormatHint])[0];t.displayFormatHint=m||t.displayFormatHint;}}.bind(this));}.bind(this));}return s;};
l.prototype._ensureStandardVizTypesPresent=function(s){if(!(s._version&&s._version.startsWith("3."))){return s;}if(!s.vizTypes){s.vizTypes={};}if(!s.vizTypes[k.STATIC_LAUNCHER]){s.vizTypes[k.STATIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncher/manifest.json");}if(!s.vizTypes[k.DYNAMIC_LAUNCHER]){s.vizTypes[k.DYNAMIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json");}if(!s.vizTypes[k.CARD]){s.vizTypes[k.CARD]=q.sap.loadResource("sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json");}return s;};
l.prototype.getMenuEntries=function(m){return new Promise(function(i,n){this.getSite().then(function(s){var M=O.get("menus."+m+".payload.menuEntries",s);i(d(M)||[]);});}.bind(this));};
l.prototype.getContentProviderIds=function(){return new Promise(function(i,m){this.getSite().then(function(s){var n=Object.keys(s.systemAliases);var o={};g(s.applications).forEach(function(A){var p=r.getContentProviderId(A);if(f(n,p)){o[p]=true;}});i(Object.keys(o));});}.bind(this));};
l.hasNoAdapter=false;return l;},true);
sap.ui.predefine('sap/ushell/services/Configuration',["sap/ushell/Config","sap/ui/thirdparty/jquery"],function(C,q){"use strict";
function a(){this.attachSizeBehaviorUpdate=function(c){var d=C.on("/core/home/sizeBehavior");d.do(c);return{detach:d.off};};this.getAppsSystems=function(){var d=new q.Deferred();sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(c){c.getSiteWithoutPersonalization().done(function(s){var A;A=(s&&s.systemAliases&&JSON.parse(JSON.stringify(s.systemAliases)))||{};d.resolve(A);}).catch(function(){d.resolve({});});}).catch(function(){d.resolve({});});return d.promise();};}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/ConfigurationDefaults',["sap/base/Log","sap/ushell/bootstrap/common/common.create.configcontract.core"],function(L,C){"use strict";
function a(A){var d=C.getDefaultConfiguration();this.getDefaults=function(c){var t=this;return A.getDefaultConfig().then(function(D){var r=c.reduce(function(o,p){var R;if(t._isValidConfigPath(p)){var P=p.split("/"),s=P.pop(),O=D;for(var i=0;i<P.length&&O;i++){O=O[P[i]];}if(O&&O.hasOwnProperty(s)){R={defaultValue:O[s]};}else if(d.hasOwnProperty(p)){R={defaultValue:d[p]};}}if(R&&R.hasOwnProperty("defaultValue")&&typeof R.defaultValue==="undefined"){R.defaultValue=null;}o[p]=R;return o;},{});return Promise.resolve(r);});};}
a.prototype._isValidConfigPath=function(p){if(!p||typeof p!=="string"){L.warning("Configuration path should be string");return false;}if(p.length===0){L.warning("Configuration path can not be empty string");return false;}if(p.charAt(0)==="/"){L.warning("Configuration path should not start with '/': "+p);return false;}return true;};
a.hasNoAdapter=false;return a;});
sap.ui.predefine('sap/ushell/services/Container',["sap/ushell/utils/UrlParsing","sap/ushell/utils","sap/ushell/System","sap/ushell/Ui5ServiceFactory","sap/ushell/Ui5NativeServiceFactory","sap/ui/base/EventProvider","sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ui/thirdparty/URI","sap/ui/util/Mobile","sap/base/util/uid","sap/base/assert","sap/base/Log","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/EventHub"],function(U,u,S,o,a,E,b,C,M,c,d,f,g,L,O,q,h){"use strict";var j="sap.ushell.services.Container",k="sap.ushell.Container.dirtyState.",l={},m,p,F,A=[];
function n(){close();}
function r(){document.location="about:blank";}
function s(P){if(p&&p[P]){return p[P];}return"sap.ushell.adapters."+P;}
function t(e){return(m.services&&m.services[e])||{};}
function v(N,e,P,i,y){var z=t(N).adapter||{},B;function D(){return new(O.get(B))(e,P,{config:z.config||{}});}if(y===true){B=z.module;if(B===undefined){return(i?Promise.resolve():undefined);}}else{B=z.module||s(e.getPlatform())+"."+N+"Adapter";}var G=B.replace(/\./g,"/");if(i){return new Promise(function(H,I){sap.ui.require([G],function(){try{H(D());}catch(J){I(J);}},I);});}if(!sap.ui.require(G)){L.error("sap.ushell.Container.createAdapter. The adapter "+G+" must be loaded before use!");sap.ui.requireSync(G);}return D();}
function w(y){var z=new E(),B=false,R=[],D={},G="sap.ushell.Container."+y.getSystem().getPlatform()+".remoteSystem.",H={},I,J,K=u.getLocalStorage(),N=new u.Map(),P=new u.Map(),Q="sap.ushell.Container."+y.getSystem().getPlatform()+".sessionTermination",T=this;this.cancelLogon=function(){if(this.oFrameLogonManager){this.oFrameLogonManager.cancelLogon();}};this.createRenderer=function(e,i){var X={async:!!i},Y,Z;M.start("FLP:Container.InitLoading","Initial Loading","FLP");u.setPerformanceMark("FLP - renderer created");e=e||m.defaultRenderer;if(!e){throw new Error("Missing renderer name");}Z=(m.renderers&&m.renderers[e])||{};Y=Z.module||(e.indexOf(".")<0?"sap.ushell.renderers."+e+".Renderer":e);if(Z.componentData&&Z.componentData.config){X.config=Z.componentData.config;}function $(){var b1=new(O.get(Y))({componentData:X}),c1=b1 instanceof sap.ui.core.UIComponent?new sap.ui.core.ComponentContainer({component:b1,height:"100%",width:"100%"}):b1;if(!(c1 instanceof C)){throw new Error("Unsupported renderer type for name "+e);}c1.placeAt=function(d1,e1){var f1=d1,g1="canvas",h1=document.body;if(d1===h1.id){f1=document.createElement("div");f1.setAttribute("id",g1);f1.classList.add("sapUShellFullHeight");switch(e1){case"first":if(h1.firstChild){h1.insertBefore(f1,h1.firstChild);break;}case"only":h1.innerHTML="";default:h1.appendChild(f1);}d1=g1;e1="";}C.prototype.placeAt.call(this,d1,e1);};D[e]=b1;if(i&&b1 instanceof sap.ui.core.UIComponent){return b1.rootControlLoaded().then(function(){z.fireEvent("rendererCreated",{renderer:b1});return c1;});}z.fireEvent("rendererCreated",{renderer:b1});return c1;}var a1=Y.replace(/\./g,"/");if(i){return new Promise(function(b1,c1){sap.ui.require([a1],function(){try{b1($());}catch(d1){c1(d1);}});});}L.error("sap.ushelContainer.createRenderer() should always be called with bAsync:true.");sap.ui.requireSync(a1);return $();};this.getRenderer=function(e){var i,X;e=e||m.defaultRenderer;if(e){i=D[e];}else{X=Object.keys(D);if(X.length===1){i=D[X[0]];}else{L.warning("getRenderer() - cannot determine renderer, because no default renderer is configured and multiple instances exist.",null,j);}}if(i&&i.isA("sap.ui.core.ComponentContainer")){return i.getComponentInstance();}return i;};this.DirtyState={CLEAN:"CLEAN",DIRTY:"DIRTY",MAYBE_DIRTY:"MAYBE_DIRTY",PENDING:"PENDING",INITIAL:"INITIAL"};this.getGlobalDirty=function(){var i,X=new q.Deferred(),Y=f(),Z,$=0,a1=this.DirtyState.CLEAN;function b1(){if($===0||a1===T.DirtyState.DIRTY){X.resolve(a1);L.debug("getGlobalDirty() Resolving: "+a1,null,"sap.ushell.Container");}}function c1(d1){if(d1.key.indexOf(k)===0&&d1.newValue!==T.DirtyState.INITIAL&&d1.newValue!==T.DirtyState.PENDING){L.debug("getGlobalDirty() Receiving event key: "+d1.key+" value: "+d1.newValue,null,"sap.ushell.Container");if(d1.newValue===T.DirtyState.DIRTY||d1.newValue===T.DirtyState.MAYBE_DIRTY){a1=d1.newValue;}$-=1;b1();}}try{K.setItem(Y,"CHECK");K.removeItem(Y);}catch(e){L.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.Container");return X.resolve(this.DirtyState.MAYBE_DIRTY).promise();}if(I){throw new Error("getGlobalDirty already called!");}I=X;window.addEventListener("storage",c1);X.always(function(){window.removeEventListener("storage",c1);I=undefined;});for(i=K.length-1;i>=0;i-=1){Z=K.key(i);if(Z.indexOf(k)===0){if(K.getItem(Z)==="PENDING"){K.removeItem(Z);L.debug("getGlobalDirty() Cleanup of unresolved 'PENDINGS':"+Z,null,"sap.ushell.Container");}else{$+=1;u.localStorageSetItem(Z,this.DirtyState.PENDING,true);L.debug("getGlobalDirty() Requesting status for: "+Z,null,"sap.ushell.Container");}}}b1();setTimeout(function(){if(X.state()!=="resolved"){X.resolve("MAYBE_DIRTY");L.debug("getGlobalDirty() Timeout reached, - resolved 'MAYBE_DIRTY'",null,"sap.ushell.Container");}},$*2000);return X.promise();};this.getLogonSystem=function(){return y.getSystem();};this.getUser=function(){return y.getUser();};this.getDirtyFlag=function(){var e=B;var X=this._oShellNavigationService.getNavigationContext();for(var i=0;i<R.length;i++){e=e||R[i](X);}return e;};this.setDirtyFlag=function(i){B=i;};this.sessionKeepAlive=function(){if(y.sessionKeepAlive){y.sessionKeepAlive();}};this.extendSession=function(){h.emit("nwbcUserIsActive",Date.now());};this.registerDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function");}R.push(e);};this.deregisterDirtyStateProvider=function(e){if(typeof e!=="function"){throw new Error("fnDirty must be a function");}var X=-1;for(var i=R.length-1;i>=0;i--){if(R[i]===e){X=i;break;}}if(X===-1){return;}R.splice(X,1);};this.getService=function(e,i,X){return T._getService.apply(T,arguments);};this.getServiceAsync=function(e,i){return T._getService(e,i,true);};this._getService=function(e,i,X){var Y={},Z,$,a1,b1,c1,d1;function e1(i1){var j1=new q.Deferred();if(!i1){throw new Error("Missing system");}j1.resolve(v(e,i1,i));sap.ushell.Container.addRemoteSystem(i1);return j1.promise();}if(!e){throw new Error("Missing service name");}if(e.indexOf(".")>=0){throw new Error("Unsupported service name");}c1=t(e);Z=c1.module||"sap.ushell.services."+e;$=Z+"/"+(i||"");d1={config:c1.config||{}};function f1(i1,b1){Y.createAdapter=e1;return new i1(b1,Y,i,d1);}function g1(a1,X){var i1;if(N.containsKey($)){i1=N.get($);}else if(a1.hasNoAdapter){i1=new a1(Y,i,d1);}else{b1=v(e,y.getSystem(),i,X,a1.useConfigAdapterOnly);if(X){return b1.then(function(j1){var i1=f1(a1,j1);N.put($,i1);return i1;});}i1=f1(a1,b1);}N.put($,i1);return X?Promise.resolve(i1):i1;}if(!N.containsKey($)){if(X){if(!P.containsKey($)){var h1=new Promise(function(i1,j1){sap.ui.require([Z.replace(/[.]/g,"/")],function(k1){i1(g1(k1,true));},j1);});P.put($,h1);return h1;}return P.get($);}L.warning("Deprecated API call of 'sap.ushell.Container.getService'. Please use 'getServiceAsync' instead",null,"sap.ushell.services.Container");a1=sap.ui.requireSync(Z.replace(/[.]/g,"/"));return g1(a1);}if(X){return Promise.resolve(N.get($));}return N.get($);};function V(){var X,Y,i,Z;for(i=K.length-1;i>=0;i-=1){Z=K.key(i);if(Z.indexOf(G)===0){try{X=Z.substring(G.length);Y=JSON.parse(K.getItem(Z));H[X]=new S(Y);}catch(e){K.removeItem(Z);}}}return H;}function W(){if(typeof OData==="undefined"){return;}function e(i,X,Y){L.warning(i,null,"sap.ushell.Container");if(Y){setTimeout(Y.bind(null,i),5000);}return{abort:function(){return;}};}OData.read=function(i,X,Y){return e("OData.read('"+(i&&i.Uri?i.requestUri:i)+"') disabled during logout processing",X,Y);};OData.request=function(i,X,Y){return e("OData.request('"+(i?i.requestUri:"")+"') disabled during logout processing",X,Y);};}this.addRemoteSystem=function(e){var i=e.getAlias(),X=H[i];if(this._isLocalSystem(e)){return;}if(X){if(X.toString()===e.toString()){return;}L.warning("Replacing "+X+" by "+e,null,"sap.ushell.Container");}else{L.debug("Added "+e,null,"sap.ushell.Container");}H[i]=e;u.localStorageSetItem(G+i,e);};this._isLocalSystem=function(e){var i=e.getAlias();if(i&&i.toUpperCase()==="LOCAL"){return true;}var X=new c(u.getLocationHref()),Y=this.getLogonSystem().getClient()||"";if(e.getBaseUrl()===X.origin()&&e.getClient()===Y){return true;}return false;};this.addRemoteSystemForServiceUrl=function(e){var i,X={baseUrl:";o="};if(!e||e.charAt(0)!=="/"||e.indexOf("//")===0){return;}i=/^[^?]*;o=([^\/;?]*)/.exec(e);if(i&&i.length>=2){X.alias=i[1];}e=e.replace(/;[^\/?]*/g,"");if(/^\/sap\/(bi|hana|hba)\//.test(e)){X.platform="hana";X.alias=X.alias||"hana";}else if(/^\/sap\/opu\//.test(e)){X.platform="abap";}if(X.alias&&X.platform){this.addRemoteSystem(new S(X));}};this.attachLogoutEvent=function(e,X){var Y=false;if(X===true){g(typeof(e)==="function","Container.attachLogoutEvent: fnFunction must be a function");for(var i=0;i<A.length;i++){if(A[i]===e){Y=true;break;}}if(!Y){A.push(e);}}else{z.attachEvent("Logout",e);}};this.detachLogoutEvent=function(e){z.detachEvent("Logout",e);for(var i=0;i<A.length;i++){if(A[i]===e){A.splice(i,1);break;}}};this.attachRendererCreatedEvent=function(e){z.attachEvent("rendererCreated",e);};this.detachRendererCreatedEvent=function(e){z.detachEvent("rendererCreated",e);};this.defaultLogout=function(){var X=new q.Deferred();function Y(){y.logout(true).always(function(){K.removeItem(Q);X.resolve();});}function Z(){var e=new q.Deferred(),a1=e.promise(),b1=[];if(A.length>0){for(var i=0;i<A.length;i++){b1.push(A[i]());}Promise.all(b1).then(e.resolve);setTimeout(e.resolve,4000);}else{e.resolve();}a1.done(function(){if(z.fireEvent("Logout",true)){Y();}else{setTimeout(Y,1000);}});}function $(){var H,i=[];if(J){window.removeEventListener("storage",J);}u.localStorageSetItem(Q,"pending");T._suppressOData();H=T._getRemoteSystems();Object.keys(H).forEach(function(a1){try{i.push(v("Container",H[a1]).logout(false));}catch(e){L.warning("Could not create adapter for "+a1,e.toString(),"sap.ushell.Container");}K.removeItem(G+a1);});q.when.apply(q,i).done(Z);}if(typeof y.addFurtherRemoteSystems==="function"){y.addFurtherRemoteSystems().always($);}else{$();}return X.promise();};this.logout=this.defaultLogout;this.registerLogout=function(e){this.logout=e;};this.setLogonFrameProvider=function(e){if(this.oFrameLogonManager){this.oFrameLogonManager.logonFrameProvider=e;}};this.setXhrLogonTimeout=function(e,i){if(this.oFrameLogonManager){this.oFrameLogonManager.setTimeout(e,i);}};this.getFLPConfig=function(){var T=this,e=new Promise(function(i,X){var Y={URL:T.getFLPUrl()};if(l.CDMPromise){l.CDMPromise.then(function(Z){Z.getSiteWithoutPersonalization().then(function($){Y.scopeId=$.site.identification.id;i(Y);});});}else{i(Y);}});return e;};this.getFLPUrl=function(i){var e=u.getLocationHref(),X=e.indexOf(U.getShellHash(e));if(X===-1||i===true){return e;}return e.substr(0,X-1);};this.getFLPUrlAsync=function(i){return new q.Deferred().resolve(T.getFLPUrl(i)).promise();};this.inAppRuntime=function(){return false;};this.runningInIframe=this.inAppRuntime;this._getAdapter=function(){return y;};this.getFLPPlatform=function(){return Promise.resolve(m.flpPlatform);};this._closeWindow=n;this._redirectWindow=r;this._getRemoteSystems=V;this._suppressOData=W;sap.ui.getCore().getEventBus().subscribe("sap.ushell.Container","addRemoteSystemForServiceUrl",function(e,i,X){T.addRemoteSystemForServiceUrl(X);});if(typeof y.logoutRedirect==="function"){J=function(e){function i(){T._closeWindow();T._redirectWindow();}if(sap.ushell.Container!==T){return;}if(e.key.indexOf(G)===0&&e.newValue&&e.newValue!==K.getItem(e.key)){u.localStorageSetItem(e.key,e.newValue);}if(e.key===Q){if(e.newValue==="pending"){T._suppressOData();if(z.fireEvent("Logout",true)){i();}else{setTimeout(i,1000);}}}};window.addEventListener("storage",J);}this._getFunctionsForUnitTest=function(){return{createAdapter:v};};}
function x(e,i){e.forEach(function(y){var z=o.createServiceFactory(y,i);b.register("sap.ushell.ui5service."+y,z);});}
function _(e){e.forEach(function(i){var y=a.createServiceFactory(i);b.register("sap.ushell.ui5service."+i,y);});}
sap.ushell.bootstrap=function(P,e){var i,D=new q.Deferred();d.init();if(sap.ushell.Container!==undefined){i=new Error("Unified shell container is already initialized - cannot initialize twice.\nStacktrace of first initialization:"+F);L.error(i,i.stack,j);throw i;}F=(new Error()).stack;m=q.extend({},true,window["sap-ushell-config"]||{});p=e;if(typeof window["sap.ushell.bootstrap.callback"]==="function"){setTimeout(window["sap.ushell.bootstrap.callback"]);}x(["Personalization","URLParsing","CrossApplicationNavigation"],true);x(["Configuration"],false);_(["CardNavigation","CardUserRecents","CardUserFrequents"]);var y=new S({alias:"",platform:m.platform||P});v("Container",y,null,true).then(function(z){z.load().then(function(){function B(){var J,K;var N=window["sap-ushell-config"];if(!N||!N.services){return false;}J=N.services.PluginManager;K=J&&J.config;return K&&K.loadPluginsFromSite;}sap.ushell.Container=new w(z);var G=[sap.ushell.Container.getServiceAsync("PluginManager")];if(B()){l.CDMPromise=sap.ushell.Container.getServiceAsync("CommonDataModel");G.push(l.CDMPromise);}Promise.all(G).then(function(J){var K=J[0];var N=J[1];var Q=N?N.getPlugins():q.when({});Q.then(function(R){var T=q.extend(true,{},m.bootstrapPlugins,R);K.registerPlugins(T);try{K.loadPlugins("EarlyLoading").catch(function(i){L.error("Error loading S/4's my home plugin");});}catch(i){L.error("Error loading S/4's my home plugin");}});}).then(function(){if(u.hasFLPReady2NotificationCapability()){sap.ui.require(["sap/ushell/NWBCInterface"],function(N){u.getPrivateEpcm().doEventFlpReady2(N);});}else if(u.hasFLPReadyNotificationCapability()){u.getPrivateEpcm().doEventFlpReady();}sap.ui.require(["sap/ushell/Config"],function(J){if(J.last("/core/darkMode/enabled")){sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(N){N.setup();});}if(J.last("/core/shellHeader/newDesignSwitchVisible")){var K=sap.ushell.Container.getUser().getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(K===sap.ushell.User.prototype.constants.NEW_DESIGN){J.emit("/core/shellHeader/newDesignSwitchActive",true);}}});});var H=[];if(m.preloadServices!==undefined&&Array.isArray(m.preloadServices)){m.preloadServices.forEach(function(J){H.push(sap.ushell.Container.getServiceAsync(J));});L.error("Ushell Config's preloadServices should not be used!");}var I=sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(J){sap.ushell.Container._oShellNavigationService=J;});H.push(I);Promise.all(H).then(function(){D.resolve();});});});return D.promise();};
});
sap.ui.predefine('sap/ushell/services/ContentExtension',["sap/base/Log"],function(L){"use strict";var S="sap.ushell.services.ContentExtension";
function C(a,c,p,s){}
C.Type={SITE:"site"};
C.prototype.registerContentProvider=function(p){function l(e){L.error("An error occurred when calling #registerContentProvider",e,S);}if(p===null||typeof p!=="object"||Object.keys(p).length===0){l("parameters must be provided and must be a non-empty object");}else if(typeof p.id!=="string"||p.id.length===0){l("id parameter should be a non-empty string");}else if(typeof p.provider!=="object"||p.provider===null){l("provider member must be of type 'object' and not null");}else if(p.type===C.Type.SITE){if(typeof p.provider.getSite!=="function"){l("Provider must expose a getSite member of type 'function', got '"+(typeof p.provider.getSite)+"' instead");}else{return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(a){a.registerContentProvider(p.id,p.provider);}).catch(function(e){l(e+"");return Promise.reject(e);});}}else{l("Unknown type parameter. It should be one should be one of ["+Object.keys(C.Type).map(function(t){return"ContentExtension."+t;}).join(", ")+"] but '"+p.type+"' was provided");}return Promise.reject();};
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/ContentExtensionAdapterFactory',["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(C,a,q,O){"use strict";var b={};
b.getAdapters=function(c){var d=b._getConfigAdapters(c);var A={};var e=d.map(function(o){var E=C.last(o.configSwitch);if(!E){return Promise.resolve();}var f=b._getAdapter(o);f.then(function(g){A[o.contentProviderName]=g;});return f;});return new Promise(function(r){q.when.apply(q,e).then(function(){r(A);});});};
b._getConfigAdapters=function(c){if(!c){c=a._getConfigAdapters();}if(!Array.isArray(c)){c=[c];}return c;};
b._getAdapter=function(c){var d=new q.Deferred();var A=c.configHandler?c.configHandler():{};var m=c.adapter.replace(/\./g,"/");sap.ui.require([m],function(){var i=b._getAdapterInstance(c.adapter,c.system,null,A);d.resolve(i);});return d.promise();};
b._getAdapterInstance=function(A,s,p,c){var d=O.get(A);if(d){var D={config:c||{}};return new d(s,p,D);}return null;};
return b;});
sap.ui.predefine('sap/ushell/services/CrossApplicationNavigation',["sap/ushell/services/AppConfiguration","sap/ushell/services/_CrossApplicationNavigation/utils","sap/ushell/utils/type","sap/ushell/TechnicalParameters","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/merge","sap/ushell/utils","sap/ushell/ApplicationType","sap/ushell/library","sap/base/Log","sap/ushell/utils/UrlParsing"],function(a,u,t,T,A,i,U,q,O,m,b,c,d,L,e){"use strict";var f=d.UI5ComponentType;
function C(o,p,s){var S;if(s&&s.config){S=s.config;}function g(v,j){var r,k,n,l,w;if(typeof v!=="string"&&!i(v)&&v!==undefined){L.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}r=a.getCurrentApplication();if(j){if(typeof j.getComponentData!=="function"||!i(j.getComponentData())||!j.getComponentData().startupParameters||!i(j.getComponentData().startupParameters)){L.error("Cannot call getComponentData on component","the component should be an application root component","sap.ushell.services.CrossApplicationNavigation");}else{w=j.getComponentData().startupParameters;if(w.hasOwnProperty("sap-system")){k=w["sap-system"][0];}if(w.hasOwnProperty("sap-ushell-next-navmode")){n=w["sap-ushell-next-navmode"][0];}}}else{if(r&&r["sap-system"]){k=r["sap-system"];}else if(r&&r.url){k=new U(r.url).get("sap-system");}if(r&&r["sap-ushell-next-navmode"]){n=r["sap-ushell-next-navmode"];}else if(r&&r.url){n=new U(r.url).get("sap-ushell-next-navmode");}}if(r){l=r.contentProviderId;}var I=u._injectParameters({type:t,inject:{"sap-system":k,"sap-ushell-navmode":n,"sap-app-origin-hint":l},injectEmptyString:{"sap-app-origin-hint":true},args:v});return I;}function h(v){var j,k,l;if(localStorage&&localStorage["sap-ushell-enc-test"]==="false"){return v;}if(!S||!S["sap-ushell-enc-test"]){if(localStorage&&localStorage["sap-ushell-enc-test"]!=="true"){return v;}}if(typeof v!=="string"&&!i(v)&&v!==undefined){L.error("Unexpected input type",null,"sap.ushell.services.CrossApplicationNavigation");return undefined;}if(v===undefined){return undefined;}if(i(v)){k=q.extend(true,{},v);if(k.target&&k.target.shellHash){if(typeof k.target.shellHash==="string"){if(k.target.shellHash!=="#"&&k.target.shellHash!==""){k.target.shellHash=h(k.target.shellHash);}}return k;}k.params=k.params||{};k.params["sap-ushell-enc-test"]=["A B%20C"];return k;}l=v;if(!/[?&]sap-system=/.test(l)){j=(l.indexOf("?")>-1)?"&":"?";l+=j+"sap-ushell-enc-test="+encodeURIComponent("A B%20C");}return l;}this._extractInnerAppRoute=function(I){var j=this,P,k;if(typeof I==="string"){P=I.split("&/");k=P.shift();return{intent:k,innerAppRoute:P.length>0?"&/"+P.join("&/"):""};}if(Object.prototype.toString.apply(I)==="[object Object]"){var l=O.get("target.shellHash",I);if(typeof l==="string"){var r=j._extractInnerAppRoute(l);I.target.shellHash=r.intent;return{intent:I,innerAppRoute:r.innerAppRoute};}if(I.hasOwnProperty("appSpecificRoute")){var v=I.appSpecificRoute;delete I.appSpecificRoute;var n=typeof v==="string"&&v.indexOf("&/")!==0&&v.length>0;return{innerAppRoute:n?"&/"+v:v,intent:I};}return{intent:I,innerAppRoute:""};}L.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:I};};this._injectInnerAppRoute=function(I,j){var k,l=this;if(!j){return I;}if(typeof I==="string"){return I+j;}if(Object.prototype.toString.apply(I)==="[object Object]"){k=O.get("target.shellHash",I);if(typeof k==="string"){I.target.shellHash=l._injectInnerAppRoute(k,j);return I;}I.appSpecificRoute=j;}return I;};this.hrefForExternal=function(j,k,l){if(l){var D=new q.Deferred();this.hrefForExternalAsync(j,k).then(D.resolve).catch(D.reject);return D.promise();}L.warning("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.CrossApplicationNavigation");var n=m({},j);var E=this._extractInnerAppRoute(n);var I=E.intent;u.addXAppStateFromParameter(I,"sap-xapp-state-data");n=g(I,k);n=u.injectStickyParameters({args:n,appLifeCycle:A,technicalParameters:T,type:t});n=h(n);n=this._injectInnerAppRoute(n,E.innerAppRoute);var r=sap.ushell.Container.getService("ShellNavigation");if(!r){L.debug("Shell not available, no Cross App Navigation");return"";}return r.hrefForExternal(n,undefined,k,l);};this.hrefForExternalAsync=function(j,k){var l=m({},j);var E=this._extractInnerAppRoute(l);var I=E.intent;return Promise.resolve().then(function(){return u.addXAppStateFromParameterAsync(I,"sap-xapp-state-data");}).then(function(){l=g(I,k);return u.injectStickyParametersAsync({args:l,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(n){l=n;l=h(l);l=this._injectInnerAppRoute(l,E.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation");}.bind(this)).then(function(n){return new Promise(function(r,v){n.hrefForExternal(l,undefined,k,true).done(r).fail(v);});}).catch(function(){L.debug("Shell not available, no Cross App Navigation");return"";});};this.expandCompactHash=function(H){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.expandCompactHash(H).done(D.resolve).fail(D.reject);});return D.promise();};this.backToPreviousApp=function(){return this.isInitialNavigationAsync().then(function(I){if(I){return this.toExternal({target:{shellHash:"#"},writeHistory:false});}this.historyBack();}.bind(this));};this.historyBack=function(j){var k=-1;if(j&&typeof j==="number"){if(j<=0){L.warning("historyBack called with an argument <= 0 and will result in a forward navigation or refresh","expected was an argument > 0","sap.ushell.services.CrossApplicationNavigation#historyBack");}k=j*-1;}window.history.go(k);};this.isInitialNavigation=function(){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.isInitialNavigation'. Please use 'isInitialNavigationAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var j=sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation");if(!j){L.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;}var I=j.isInitialNavigation();if(typeof I==="undefined"){return true;}return I;};this.isInitialNavigationAsync=function(){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){var I=j.isInitialNavigation();if(typeof I==="undefined"){return true;}return I;}).catch(function(){L.debug("ShellNavigation service not available","This will be treated as the initial navigation","sap.ushell.services.CrossApplicationNavigation");return true;});};this.toExternal=function(j,k){var w=j.writeHistory;var l=m({},j);this._processShellHashWithParams(l);var E=this._extractInnerAppRoute(l);var I=E.intent;return Promise.resolve().then(function(){return u.addXAppStateFromParameterAsync(I,"sap-xapp-state-data");}).then(function(){l=g(I,k);return u.injectStickyParametersAsync({args:l,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(n){l=n;l=h(l);delete l.writeHistory;l=this._injectInnerAppRoute(l,E.innerAppRoute);return sap.ushell.Container.getServiceAsync("ShellNavigation");}.bind(this)).then(function(n){return n.toExternal(l,k,w);}).catch(function(n){L.warning("Shell not available, no Cross App Navigation");});};this.hrefForAppSpecificHash=function(j){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.hrefForAppSpecificHash'. Please use 'hrefForAppSpecificHashAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");if(sap.ushell&&sap.ushell.Container&&typeof sap.ushell.Container.getService==="function"&&sap.ushell.Container.getService("ShellNavigation")){return sap.ushell.Container.getService("ShellNavigation").hrefForAppSpecificHash(j);}L.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(j);};this.hrefForAppSpecificHashAsync=function(j){return sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(k){return k.hrefForAppSpecificHash(j);}).catch(function(){L.debug("Shell not available, no Cross App Navigation; fallback to app-specific part only");return"#"+encodeURI(j);});};this.getPrimaryIntent=function(j,P){var Q={},k,r=/^#\w+-displayFactSheet(?:$|\?.)/;Q.tags=["primaryAction"];Q.semanticObject=j;if(P){Q.params=P;}return this.getLinks(Q).then(function(l){if(l.length===0){delete Q.tags;Q.action="displayFactSheet";k=function(n,v){var E;if(n.intent===v.intent){return 0;}E=r.test(n.intent)^r.test(v.intent);if(E){return r.test(n.intent)?-1:1;}return n.intent<v.intent?-1:1;};return this.getLinks(Q);}k=function(n,v){if(n.intent===v.intent){return 0;}return n.intent<v.intent?-1:1;};return l;}.bind(this)).then(function(l){return l.length===0?null:l.sort(k)[0];});};this.getSemanticObjectLinks=function(j,P,I,k,l,n){var D=new q.Deferred();Promise.resolve().then(function(){return u.injectStickyParametersAsync({args:{params:P},appLifeCycle:A,technicalParameters:T,type:t});}).then(function(r){r=g(r,k).params;r=h({params:r}).params;var v;if(Array.isArray(j)){v=[];j.forEach(function(w){v.push([{semanticObject:w[0],params:w[1],ignoreFormFactor:!!w[2],ui5Component:w[3],appStateKey:w[4],compactIntents:!!(w[5])}]);});}else{v={semanticObject:j,params:r,ignoreFormFactor:I,ui5Component:k,appStateKey:l,compactIntents:!!n};}return Promise.all([sap.ushell.Container.getServiceAsync("NavTargetResolution"),v]);}).then(function(r){var N=r[0];var v=r[1];b.invokeUnfoldingArrayArguments(N.getLinks.bind(N),[v]).done(D.resolve).fail(D.reject);});return D.promise();};this.getLinks=function(v){var E;E=b.invokeUnfoldingArrayArguments(this._getLinks.bind(this),[v]);return E;};this._getLinks=function(n){var D=new q.Deferred();if(typeof n==="undefined"){n={};}var N=q.extend(true,{},n);N.compactIntents=!!N.compactIntents;N.action=N.action||undefined;N.paramsOptions=u.extractGetLinksParameterOptions(N.params);Promise.resolve().then(function(){return u.injectStickyParametersAsync({args:N,appLifeCycle:A,technicalParameters:T,type:t});}).then(function(j){N=j;var P;if(N.params){P=u.extractGetLinksParameterDefinition(N.params);}else{P=N.params;}var k=g({params:P},N.ui5Component).params;k=h({params:k}).params;if(N.appStateKey){k["sap-xapp-state"]=[N.appStateKey];delete N.appStateKey;}N.params=k;return sap.ushell.Container.getServiceAsync("NavTargetResolution");}).then(function(j){j.getLinks(N).done(D.resolve).fail(D.reject);});return D.promise();};this.getDistinctSemanticObjects=function(){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.getDistinctSemanticObjects().done(D.resolve).fail(D.reject);});return D.promise();};this.isIntentSupported=function(I,j){var D=new q.Deferred(),k={},l=I.map(function(n){var r=g(n,j);k[r]=n;return r;});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.isIntentSupported(l).done(function(n){var r={};Object.keys(n).forEach(function(K){r[k[K]]=n[K];});D.resolve(r);}).fail(D.reject.bind(D));});return D.promise();};this.isNavigationSupported=function(I,j){var D=new q.Deferred();var k=I.map(function(l){return g(l,j);});sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.isNavigationSupported(k).done(D.resolve).fail(D.reject);});return D.promise();};this.isUrlSupported=function(j){var D=new q.Deferred();if(typeof j!=="string"){D.reject();return D.promise();}if(e.isIntentUrl(j)){var H=e.getHash(j);this.isIntentSupported(["#"+H]).done(function(r){if(r["#"+H]&&r["#"+H].supported){D.resolve();}else{D.reject();}}).fail(function(){D.reject();});}else{D.resolve();}return D.promise();};this.createComponentInstance=function(I,j,k){var D=new q.Deferred(),l=sap.ushell.Container,M;this.createComponentData(I,j).then(function(n){l.getServiceAsync("Ui5ComponentLoader").then(function(r){return r.modifyComponentProperties(n,f.Application).then(function(v){M=v;return r;});}).then(function(r){if(k){k.runAsOwner(function(){v(M);});}else{v(M);}function v(w){w.loadDefaultDependencies=false;r.instantiateComponent(w).then(function(x){D.resolve(x.componentHandle.getInstance());},function(E){E=E||"";L.error("Cannot create UI5 component: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");D.reject(E);});}});},function(E){D.reject(E);});return D.promise();};this.createComponentData=function(I,j){return new Promise(function(r,R){var k=sap.ushell.Container,l,n;if(!j){j={};}else{n=Object.keys(j).length;if(n>1||(n===1&&!j.componentData)){R("`oConfig` argument should either be an empty object or contain only the `componentData` property.");return;}}if(j.componentData){delete j.componentData.startupParameters;delete j.componentData.config;delete j.componentData["sap-xapp-state"];}l=e.constructShellHash(e.parseShellHash(I));if(!l){R("Navigation intent invalid!");return;}k.getServiceAsync("NavTargetResolution").then(function(N){N.resolveHashFragment("#"+l).then(function(v){function w(y){y=q.extend(true,{},y,j);if(!y.ui5ComponentName){if(y.additionalInformation){y.ui5ComponentName=y.additionalInformation.replace(/^SAPUI5\.Component=/,"");}else if(y.name){y.ui5ComponentName=y.name;}}return y;}if(v.applicationType===c.URL.type&&v.appCapabilities&&v.appCapabilities.appFrameworkId==="UI5"&&sap.ushell.Container.inAppRuntime()){sap.ui["require"](["sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent"],function(y){y.getAppInfo(v.appCapabilities.technicalAppComponentId).then(function(z){z=w(z);x({ui5ComponentName:v.appCapabilities.technicalAppComponentId,applicationDependencies:z,url:z.url});});});}else if(v.applicationType!==c.URL.type&&!(/^SAPUI5\.Component=/.test(v.additionalInformation))){R("The resolved target mapping is not of type UI5 component.");}else{x(v);}function x(y){k.getServiceAsync("Ui5ComponentLoader").then(function(z){y=w(y);y.loadDefaultDependencies=false;z.createComponentData(y).then(function(B){r(B);},function(E){E=E||"";L.error("Cannot get UI5 component data: "+E,E.stack,"sap.ushell.services.CrossApplicationNavigation");R(E);});});}});});});};this.createEmptyAppState=function(j,k,P,l){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.createEmptyAppState'. Please use 'createEmptyAppStateAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var n=sap.ushell.Container.getService("AppState");if(!(j instanceof sap.ui.core.UIComponent)){throw new Error("The passed oAppComponent must be a UI5 Component.");}return n.createEmptyAppState(j,k,P,l);};this.createEmptyAppStateAsync=function(j,k,P,l){if(!(j instanceof sap.ui.core.UIComponent)){return Promise.reject("The passed oAppComponent must be a UI5 Component.");}return sap.ushell.Container.getServiceAsync("AppState").then(function(n){return n.createEmptyAppState(j,k,P,l);});};this.getStartupAppState=function(j){this._checkComponent(j);var k=j.getComponentData()&&j.getComponentData()["sap-xapp-state"]&&j.getComponentData()["sap-xapp-state"][0];return this.getAppState(j,k);};this._checkComponent=function(j){if(!(j instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}};this.getAppState=function(j,k){var l;var D=new q.Deferred();this._checkComponent(j);sap.ushell.Container.getServiceAsync("AppState").then(function(n){if(typeof k!=="string"){if(k!==undefined){L.error("Illegal Argument sAppStateKey ");}setTimeout(function(){l=n.createEmptyUnmodifiableAppState(j);D.resolve(l);},0);return;}n.getAppState(k).done(D.resolve).fail(D.reject);});return D.promise();};this.getAppStateData=function(j){return b.invokeUnfoldingArrayArguments(this._getAppStateData.bind(this),[j]);};this._getAppStateData=function(j){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(k){if(typeof j!=="string"){if(j!==undefined){L.error("Illegal Argument sAppStateKey ");}setTimeout(function(){D.resolve(undefined);},0);}else{k.getAppState(j).done(function(l){D.resolve(l.getData());}).fail(D.resolve.bind(D,undefined));}});return D.promise();};this.saveMultipleAppStates=function(j){var r=[],D=new q.Deferred();j.forEach(function(k){r.push(k.save());});q.when.apply(this,r).done(function(){D.resolve(r);}).fail(function(){D.reject("save failed");});return D.promise();};this._processShellHashWithParams=function(j){if(j&&j.processParams===true&&j.target&&j.target.shellHash&&j.params){var H=e.parseShellHash(j.target.shellHash);j.target={semanticObject:H.semanticObject,action:H.action,contextRaw:H.contextRaw};j.appSpecificRoute=H.appSpecificRoute;j.params=Object.assign({},j.params,H.params);}};this.getSupportedAppStatePersistencyMethods=function(){L.warning("Deprecated API call of 'sap.ushell.CrossApplicationNavigation.getSupportedAppStatePersistencyMethods'. Please use 'getSupportedAppStatePersistencyMethodsAsync' instead",null,"sap.ushell.services.CrossApplicationNavigation");var j=sap.ushell.Cntainer.getService("AppState");return j.getSupportedPersistencyMethods();};this.getSupportedAppStatePersistencyMethodsAsync=function(){return sap.ushell.Container.getServiceAsync("AppState").then(function(j){return j.getSupportedPersistencyMethods();});};this.makeStatePersistent=function(k,P,j){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(l){l.makeStatePersistent(k,P,j).done(D.resolve).fail(D.reject);});return D.promise();};this.resolveIntent=function(H){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(N){N.resolveHashFragment(H).then(function(r){D.resolve({url:r.url});}).fail(function(M){D.reject(M);});});return D.promise();};}
C.hasNoAdapter=true;return C;},true);
sap.ui.predefine('sap/ushell/services/DarkModeSupport',["sap/base/Log","sap/base/util/UriParameters","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub"],function(L,U,D,C,E){"use strict";var P="(prefers-color-scheme: dark)";
function a(){this.channel=E.createChannel({mode:undefined});this.darkMediaQueryList=window.matchMedia(P);this.doables=[];this.themeChangedCallback=null;this.darkMediaQueryListListener=null;}
a.Mode={LIGHT:"light",DARK:"dark"};
a.prototype.setup=function(){if(this.initialized){return;}this.initialized=true;this.themeChangedCallback=function(){this.channel.emit("/mode",this.getCurrentThemeMode());}.bind(this);sap.ui.getCore().attachThemeChanged(this.themeChangedCallback);this.themeChangedCallback();if(this.canAutomaticallyToggleDarkMode()){this.enableDarkModeBasedOnSystem();}};
a.prototype.destroy=function(){this.channel.emit("/mode",null);this.doables.forEach(function(d){d.off();});this.doables=[];if(this.initialized){sap.ui.getCore().detachThemeChanged(this.themeChangedCallback);this.themeChangedCallback=null;this.disableDarkModeBasedOnSystem();this.initialized=false;}};
a.prototype.attachModeChanged=function(c){var d=this.channel.on("/mode").do(function(m){c(m);});this.doables.push(d);};
a.prototype.canAutomaticallyToggleDarkMode=function(){var i=this.darkMediaQueryList.media===P;return i&&!U.fromURL(window.location.href).has("sap-theme");};
a.prototype.isThemeSupportDarkMode=function(t){t=t||this._getCurrentTheme();return!!this._findSupportedThemePair(t);};
a.prototype._toggleDarkModeBasedOnSystemColorScheme=function(){var c=this._getCurrentTheme();if(this.darkMediaQueryList&&this.isThemeSupportDarkMode(c)){var s=this._findSupportedThemePair(c),i=this.darkMediaQueryList.matches;var t=i?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};
a.prototype._applyDefaultUserTheme=function(){var u=sap.ushell.Container.getUser();if(u.constants&&u.constants.themeFormat){u.applyTheme(u.getTheme(u.constants.themeFormat.ORIGINAL_THEME));}};
a.prototype.toggleModeChange=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){var t=c===s.light?s.dark:s.light;sap.ushell.Container.getUser().applyTheme(t);}};
a.prototype.enableDarkModeBasedOnSystem=function(){if(!this.initialized){L.warning("Automatic dark mode detection cannot be enabled, because the DarkModeSupport sevice was not setup.");return;}if(!this.canAutomaticallyToggleDarkMode()){L.warning("Automatic dark mode detection cannot be enabled, because your browser does not support dark mode detection");return;}if(this.darkMediaQueryListListener){L.warning("Automatic dark mode detection was already enabled");return;}if(D.support.matchmedialistener){this.darkMediaQueryListListener=this._toggleDarkModeBasedOnSystemColorScheme.bind(this);this.darkMediaQueryList.addListener(this.darkMediaQueryListListener);}this._toggleDarkModeBasedOnSystemColorScheme();};
a.prototype.disableDarkModeBasedOnSystem=function(){if(this.darkMediaQueryListListener){this.darkMediaQueryList.removeListener(this.darkMediaQueryListListener);this.darkMediaQueryListListener=null;}this._applyDefaultUserTheme();};
a.prototype.getCurrentThemeMode=function(){var c=this._getCurrentTheme(),s=this._findSupportedThemePair(c);if(s){return c===s.light?a.Mode.LIGHT:a.Mode.DARK;}return null;};
a.prototype._getCurrentTheme=function(){return sap.ui.getCore().getConfiguration().getTheme();};
a.prototype._findSupportedThemePair=function(c){var s=C.last("/core/darkMode/supportedThemes");return s.filter(function(S){return S.dark===c||S.light===c;})[0];};
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/EndUserFeedback',["sap/ui/thirdparty/URI","sap/base/util/ObjectPath"],function(U,O){"use strict";
function E(){this.sendFeedback=function(){return Promise.resolve();};this.getLegalText=function(){return"";};this.isEnabled=function(){return Promise.reject();};this.getPathOfURL=function(u){var o=new U(u);return o.pathname();};}
E.hasNoAdapter=true;return E;},true);
sap.ui.predefine('sap/ushell/services/LaunchPage',["sap/base/Log","sap/ushell/services/ContentExtensionAdapterFactory","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/Config"],function(L,C,q,r,A,a){"use strict";
function b(o){var t=this,T=[],c=C.getAdapters();this.oAdapters={default:o};c.then(function(d){q.extend(this.oAdapters,d);}.bind(this));this.getGroups=function(){if(a.last("/core/spaces/enabled")){return new q.Deferred().resolve([]).promise();}var d=new q.Deferred();c.then(function(){var G=Object.keys(t.oAdapters).map(function(s){return t._getAdapter(s).getGroups();});q.when.apply(q,G).done(function(){var e=[].concat.apply([],arguments);d.resolve(e);}).fail(function(){L.error("getGroups failed");});});return d.promise();};this.getGroupsForBookmarks=function(G){var d=q.Deferred();this.getGroups().then(function(e){this.getDefaultGroup().then(function(D){if(e.length>0){e=e.filter(function(f){if(G===true){return this.isGroupVisible(f);}return!this.isGroupLocked(f)&&this.isGroupVisible(f);}.bind(this));e=e.map(function(f){return{title:(f===D&&r.i18n.getText("my_group"))||this.getGroupTitle(f),object:f};}.bind(this));}d.resolve(e);}.bind(this),function(E){L.error("getGroupsForBookmarks - getDefaultGroup - failed: "+E.message);});}.bind(this),function(e){L.error("getGroupsForBookmarks - getGroups - failed: "+e.message);});return d.promise();};this.getDefaultGroup=function(){var p=this._getAdapter().getDefaultGroup();p.fail(function(){L.error("getDefaultGroup failed");});return p;};this.getGroupTitle=function(G){return this._getAdapter(G.contentProvider).getGroupTitle(G);};this.getGroupId=function(G){return this._getAdapter(G.contentProvider).getGroupId(G);};this.getGroupById=function(G){var D=q.Deferred(),t=this;this.getGroups().then(function(d){d=q.grep(d,function(e){return t.getGroupId(e)===G;});D.resolve((d&&d.length>0?d[0]:undefined));});return D.promise();};this.getGroupTiles=function(G){return this._getAdapter(G.contentProvider).getGroupTiles(G);};this.getTilesByGroupId=function(G){var D=q.Deferred(),t=this;this.getGroupById(G).then(function(d){if(d){var e=t._getAdapter(d.contentProvider).getGroupTiles(d);if(e){e=e.map(function(f){return{id:t.getTileId(f),title:t.getTileTitle(f),subtitle:t.getCatalogTilePreviewSubtitle(f),url:t.getCatalogTileTargetURL(f),icon:t.getCatalogTilePreviewIcon(f),groupId:G};});}else{e=[];}D.resolve(e);}else{D.resolve([]);}});return D.promise();};this.getLinkTiles=function(G){return this._getAdapter(G.contentProvider).getLinkTiles(G);};this.addGroupAt=function(s,i){var p,d=i,o=this._getAdapter();if(o.addGroupAt){p=o.addGroupAt(s,i);p.fail(function(){L.error("addGroup "+s+" failed");});}else{var D=new q.Deferred();p=o.addGroup(s);p.done(function(n){var m=this.moveGroup(n,d),e=n;m.done(function(){D.resolve(e);});m.fail(function(){D.reject();});}.bind(this));p.fail(function(){L.error("addGroup "+s+" failed");D.reject();});return D.promise();}return p;};this.addGroup=function(s){var p=this._getAdapter().addGroup(s);p.fail(function(){L.error("addGroup "+s+" failed");});return p;};this.removeGroup=function(G,i){var p=this._getAdapter(G.contentProvider).removeGroup(G,i);p.fail(function(){L.error("Fail to removeGroup "+t.getGroupTitle(G));});return p;};this.resetGroup=function(G,i){var p=this._getAdapter(G.contentProvider).resetGroup(G,i);p.fail(function(){L.error("Fail to resetGroup "+t.getGroupTitle(G));});return p;};this.isGroupRemovable=function(G){return this._getAdapter(G.contentProvider).isGroupRemovable(G);};this.isGroupLocked=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupLocked==="function"){return o.isGroupLocked(G);}return false;};this.isGroupFeatured=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupFeatured==="function"){return o.isGroupFeatured(G);}return false;};this.moveGroup=function(G,n){var p=this._getAdapter(G.contentProvider).moveGroup(G,n);p.fail(function(){L.error("Fail to moveGroup "+t.getGroupTitle(G));});return p;};this.setGroupTitle=function(G,s){var p=this._getAdapter(G.contentProvider).setGroupTitle(G,s);p.fail(function(){L.error("Fail to set Group title: "+t.getGroupTitle(G));});return p;};this.hideGroups=function(h){var d=new q.Deferred(),o=this._getAdapter();if(typeof o.hideGroups!=="function"){d.reject("hideGroups() is not implemented in the Adapter.");}else{o.hideGroups(h).done(function(){d.resolve();}).fail(function(m){L.error("Fail to store groups visibility."+m);d.reject();});}return d.promise();};this.isGroupVisible=function(G){var o=this._getAdapter(G.contentProvider);if(typeof o.isGroupVisible==="function"){return o.isGroupVisible(G);}return true;};this.addTile=function(d,G){return this._getAdapter(G.contentProvider).addTile(d,G).fail(function(){L.error("Fail to add Tile: "+t.getCatalogTileId(d));});};this.removeTile=function(G,d,i){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(e){this._getAdapter(G.contentProvider).removeTile(G,d,i).done(function(){var s=this.getCatalogTileTargetURL(d);this.deleteURLStatesPersistentData(s,e);D.resolve();}.bind(this)).fail(function(f){L.error("Fail to remove Tile: "+this.getTileId(d));D.reject(f);}.bind(this));}.bind(this)).catch(D.reject);return D.promise();};this.moveTile=function(d,s,i,S,e,n){var p=this._getAdapter().moveTile(d,s,i,S,e,n);p.fail(function(){L.error("Fail to move Tile: "+t.getTileId(d));});return p;};this.isLinkPersonalizationSupported=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.isLinkPersonalizationSupported==="function"){return o.isLinkPersonalizationSupported(d);}return false;};this.getTileId=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileId(d);};this.getTileTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileTitle(d);};this.getTileType=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(o.getTileType){return o.getTileType(d);}return"tile";};this.getTileView=function(d){var s=d&&d.contentProvider,D=this._getAdapter(s).getTileView(d);if(!q.isFunction(D.promise)){D=new q.Deferred().resolve(D).promise();}return D;};this.getCardManifest=function(G){var s=G&&G.contentProvider;return this._getAdapter(s).getCardManifest(G);};this.getAppBoxPressHandler=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(o.getAppBoxPressHandler){return o.getAppBoxPressHandler(d);}return undefined;};this.getTileSize=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileSize(d);};this.getTileTarget=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getTileTarget(d);};this.getTileDebugInfo=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.getTileDebugInfo==="function"){return o.getTileDebugInfo(d);}return undefined;};this.isTileIntentSupported=function(d){var s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.isTileIntentSupported==="function"){return o.isTileIntentSupported(d);}return true;};this.refreshTile=function(d){var s=d&&d.contentProvider;this._getAdapter(s).refreshTile(d);};this.setTileVisible=function(d,n){var s=d&&d.contentProvider;return this._getAdapter(s).setTileVisible(d,n);};this.registerTileActionsProvider=function(p){if(typeof p!=="function"){throw new Error("Tile actions Provider is not a function");}T.push(p);};this.getTileActions=function(d){var e=[],f,s=d&&d.contentProvider,o=this._getAdapter(s);if(typeof o.getTileActions==="function"){f=o.getTileActions(d);if(f&&f.length&&f.length>0){e.push.apply(e,f);}}for(var i=0;i<T.length;i++){f=T[i](d);if(f&&f.length&&f.length>0){e.push.apply(e,f);}}return e;};this.getCatalogs=function(){return this._getAdapter().getCatalogs();};this.isCatalogsValid=function(){return this._getAdapter().isCatalogsValid();};this.getCatalogData=function(d){var l=this._getAdapter();if(typeof l.getCatalogData!=="function"){L.warning("getCatalogData not implemented in adapter",null,"sap.ushell.services.LaunchPage");return{id:this.getCatalogId(d)};}return l.getCatalogData(d);};this.getCatalogError=function(d){return this._getAdapter().getCatalogError(d);};this.getCatalogId=function(d){return this._getAdapter().getCatalogId(d);};this.getCatalogTitle=function(d){return this._getAdapter().getCatalogTitle(d);};this.getCatalogTiles=function(d){var p=this._getAdapter().getCatalogTiles(d);p.fail(function(){L.error("Fail to get Tiles of Catalog: "+t.getCatalogTitle(d));});return p;};this.getCatalogTileId=function(d){return this._getAdapter(d.contentProvider).getCatalogTileId(d);};this.getCatalogTileTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileTitle(d);};this.getCatalogTileSize=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileSize(d);};this.getCatalogTileViewControl=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileViewControl==="function"){return l.getCatalogTileViewControl(d);}var D=new q.Deferred(),R=this.getCatalogTileView(d);D.resolve(R);return D.promise();};this.getCatalogTileView=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileView(d);};this.getCatalogTileTargetURL=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileTargetURL(d);};this.getCatalogTileTags=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(typeof l.getCatalogTileTags==="function"){return l.getCatalogTileTags(d);}return[];};this.getCatalogTileKeywords=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTileKeywords(d);};this.getCatalogTilePreviewTitle=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTilePreviewTitle(d);};this.getCatalogTilePreviewInfo=function(d){var s=d&&d.contentProvider;if(this._getAdapter(s).getCatalogTilePreviewInfo){return this._getAdapter(s).getCatalogTilePreviewInfo(d);}return"";};this.getCatalogTilePreviewSubtitle=function(d){var s=d&&d.contentProvider;var l=this._getAdapter(s);if(l.getCatalogTilePreviewSubtitle){return l.getCatalogTilePreviewSubtitle(d);}};this.getCatalogTilePreviewIcon=function(d){var s=d&&d.contentProvider;return this._getAdapter(s).getCatalogTilePreviewIcon(d);};this.addBookmark=function(p,G,s){var d=new q.Deferred();if(this._hasRequiredBookmarkParameters(p)){if(G&&this.isGroupLocked(G)){var m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";L.error(m);return d.reject(m);}this.changeURLStatesToPersistent(p.url).done(function(n){var e=G&&G.contentProvider;p.url=n;this._getAdapter(e).addBookmark(p,G,s).done(d.resolve).fail(function(){L.error("Fail to add bookmark for URL: "+p.url+" and Title: "+p.title);d.reject();});}.bind(this)).fail(function(M){L.error(M||"Fail to change url states to persistent: "+p.url);d.reject();});}return d.promise();};this.addCustomBookmark=function(B,G,s){var d=new q.Deferred();if(this._hasRequiredBookmarkParameters(B)){if(G&&this.isGroupLocked(G)){var m="Tile cannot be added, target group ("+this.getGroupTitle(G)+")is locked!";L.error(m);return d.reject(m);}this.changeURLStatesToPersistent(B.url).done(function(n){var e=G&&G.contentProvider;B.url=n;this._getAdapter(e).addCustomBookmark(B,G,s).done(d.resolve).fail(function(){L.error("Fail to add bookmark for URL: "+B.url+" and Title: "+B.title);d.reject();});}.bind(this)).fail(function(M){L.error(M||"Fail to change url states to persistent: "+B.url);d.reject();});}return d.promise();};this._hasRequiredBookmarkParameters=function(p){if(!p.title){L.error("Add Bookmark - Missing title");throw new Error("Title missing in bookmark configuration");}if(!p.url){L.error("Add Bookmark - Missing URL");throw new Error("URL missing in bookmark configuration");}return true;};this.countBookmarks=function(u,s){if(!u||typeof u!=="string"){L.error("Fail to count bookmarks. No valid URL");throw new Error("Missing URL");}var p=this._getAdapter().countBookmarks(u,s);p.fail(function(){L.error("Fail to count bookmarks");});return p;};this.countCustomBookmarks=function(i){if(!i.url||!i.vizType){return Promise.reject("countCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().countCustomBookmarks(i);};this.deleteBookmarks=function(u,s){var d=new q.Deferred();if(!u||typeof u!=="string"){return d.reject(new Error("Missing URL")).promise();}sap.ushell.Container.getServiceAsync("AppState").then(function(e){this._getAdapter().deleteBookmarks(u,undefined,s).done(function(i){this.deleteURLStatesPersistentData(u,e);d.resolve(i);}.bind(this)).fail(function(f){L.error("Fail to delete bookmark for: "+u);d.reject(f);});}.bind(this)).catch(d.reject);return d.promise();};this.deleteCustomBookmarks=function(i){if(!i.url||!i.vizType){return Promise.reject("deleteCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().deleteCustomBookmarks(i);};this.updateBookmarks=function(u,p,s){if(!u||typeof u!=="string"){L.error("Fail to update bookmark. No valid URL");throw new Error("Missing URL");}if(!p||typeof p!=="object"){L.error("Fail to update bookmark. No valid parameters, URL is: "+u);throw new Error("Missing parameters");}var P=new q.Deferred();this.changeURLStatesToPersistent(p.url).done(function(n){p.url=n;this._getAdapter().updateBookmarks(u,p,undefined,s).done(P.resolve).fail(function(){L.error("Fail to update bookmark for: "+u);P.reject();});}.bind(this)).fail(function(m){L.error(m||"Fail to change url states to persistent: "+p.url);P.reject();});return P.promise();};this.updateCustomBookmarks=function(i,B){if(!i.url||!i.vizType||!B){return Promise.reject("updateCustomBookmarks: Some required parameters are missing.");}return this._getAdapter().updateCustomBookmarks(i,B);};this.onCatalogTileAdded=function(s){return this._getAdapter().onCatalogTileAdded(s);};this.changeURLStatesToPersistent=function(u){var d=new q.Deferred();sap.ushell.Container.getServiceAsync("AppState").then(function(f){if(f.getSupportedPersistencyMethods().length===0){d.resolve(u);return;}if(u&&u.length>0){try{f.setAppStateToPublic(u).done(d.resolve).fail(d.reject);}catch(e){L.error("error in converting transient state to personal persistent when bookmark is added",e,"sap.ushell.services.LaunchPage");d.reject();}}else{d.resolve(u);}});return d.promise();};this.deleteURLStatesPersistentData=function(u,d){if(d.getSupportedPersistencyMethods().length===0){return;}if(u&&u.length>0){try{var x=g(u,"sap-xapp-state"),i=g(u,"sap-iapp-state");if(x!==undefined||i!==undefined){this.countBookmarks(u).done(function(f){if(f===0){if(x!==undefined){d.deleteAppState(x);}if(i!==undefined){d.deleteAppState(i);}}});}}catch(e){L.error("error in deleting persistent state when bookmark is deleted",e,"sap.ushell.services.LaunchPage");}}};function g(u,p){var R=new RegExp("(?:"+p+"=)([^&/]+)"),s=R.exec(u),v=undefined;if(s&&s.length===2){v=s[1];}return v;}}
b.prototype._getAdapter=function(s){return this.oAdapters[s]||this.oAdapters.default;};
b.hasNoAdapter=false;return b;},true);
sap.ui.predefine('sap/ushell/services/Menu',["sap/ushell/Config","sap/ushell/utils","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/base/Log"],function(C,U,J,d,L){"use strict";
function M(){this._init.apply(this,arguments);}
M.prototype._init=function(a){this.oAdapter=a;this.oModel=new J();this._aBlockedList=[];};
M.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled();};
M.prototype.getMenuEntries=function(){return this.oAdapter.getMenuEntries().then(function(m){return m.map(function(o){o.uid=U.generateUniqueId([]);if(o.menuEntries){o.menuEntries.forEach(function(s){s.uid=U.generateUniqueId([]);});}return o;});});};
M.prototype.getSpacesPagesHierarchy=function(){return this.getMenuEntries().then(function(m){return{spaces:m.reduce(function(s,o){var p;if(o.menuEntries&&o.menuEntries.length){p=this._getAccessiblePages(o.menuEntries);}else{p=this._getAccessiblePages([o]);}if(p.length){s.push({title:o.title,id:p[0].spaceId,pages:p.map(function(P){return{title:P.title,id:P.id};})});}return s;}.bind(this),[])};}.bind(this)).catch(function(){return{spaces:[]};});};
M.prototype.getDefaultPage=function(){return this.getSpacesPagesHierarchy().then(function(s){var S=s.spaces.find(function(o){return(!!(o.id&&o.pages&&o.pages[0]&&o.pages[0].id));});return S.pages[0];});};
M.prototype.getMyHomeSpace=function(){if(!C.last("/core/spaces/myHome/enabled")){return Promise.resolve(null);}var m=C.last("/core/spaces/myHome/myHomeSpaceId");return this.getSpacesPagesHierarchy().then(function(s){return s.spaces.find(function(S){return S.id===m;})||null;});};
M.prototype._getAccessiblePages=function(m){return m.filter(function(o){return o&&o.type==="IBN"&&o.target&&o.target.semanticObject==="Launchpad"&&o.target.action==="openFLPPage";}).map(function(o){var s=o.target.parameters.find(function(P){return P.name==="spaceId";});var p=o.target.parameters.find(function(P){return P.name==="pageId";});return{title:o.title,id:p&&p.value,spaceId:s&&s.value};});};
M.prototype.hasMultiplePages=function(s){return this.getSpacesPagesHierarchy().then(function(h){var S=h.spaces.find(function(a){return a.id===s;});return S&&S.pages.length>1;});};
M.prototype.isSpacePageAssigned=function(s,p){return this.getSpacesPagesHierarchy().then(function(h){var S=h.spaces.find(function(a){return a.id===s;});if(!S){return false;}var P=S.pages.find(function(a){return a.id===p;});return!!P;});};
M.prototype.getSpaceAndPageTitles=function(s,p){return this.getSpacesPagesHierarchy().then(function(h){var S,P;S=h.spaces.find(function(a){return a.id===s;});if(S){P=S.pages.find(function(a){return a.id===p;});}if(P){return{spaceTitle:S.title,pageTitle:P.title};}return null;});};
M.prototype.getMenuModel=function(){return this.getMenuEntries().then(function(e){this.oModel.setData(e);return this.oModel;}.bind(this));};
M.prototype._getNodeInfo=function(n,a,b,m){var N;for(var i=0;i<a.length;i++){if(!b){m=this._getManagerIdInNodeTree(n,a[i]);}if(a[i].id===n){return{node:a[i],isRootNode:!b,managerId:m||null};}if(a[i].menuEntries&&a[i].menuEntries.length>0){N=this._getNodeInfo(n,a[i].menuEntries,true,m);if(N.node){return N;}}}return{node:null,isRootNode:false,managerId:null};};
M.prototype._nodeManagementPermitted=function(n,r,m){var N=this._getNodeInfo(n,r);if(!N.node){L.error("Node with id "+n+" cannot be found and will be skipped.");return false;}if(!!N.managerId&&N.managerId!==m){L.error("Node with id "+n+" cannot be managed by '"+m+"'"+" because it is already managed by '"+N.managerId+"'.");return false;}return true;};
M.prototype._getManagerIdInNodeTree=function(n,a,m){if(a.id===n){return m||a.managerId;}if(a.managerId){m=a.managerId;}if(a.menuEntries&&a.menuEntries.length>0){for(var i=0;i<a.menuEntries.length;++i){m=this._getManagerIdInNodeTree(n,a.menuEntries[i],m);}return m;}return null;};
M.prototype._updateNode=function(n,a,m){var t=d(m||{});function b(c){if(c){c.uid=c.uid||U.generateUniqueId([]);(c.menuEntries||[]).forEach(b);}}b(t);return a.map(function(c){if(c.id===n){return t;}if(c.menuEntries&&c.menuEntries.length>0){c.menuEntries=this._updateNode(n,c.menuEntries,t);}return c;}.bind(this));};
M.prototype._createEntryProviders=function(m,n,a){var N=a.getData();var o={};var s;for(var i=0;i<n.length;++i){s=n[i];if(!this._nodeManagementPermitted(s,N,m)){continue;}o[s]={setData:function(b,c){var u=this._updateNode(b,N,c);a.setData(u);}.bind(this,s)};}return o;};
M.prototype._isManagerBlocked=function(m){return this._aBlockedList.indexOf(m)>-1;};
M.prototype._setManagerBlocked=function(m){this._aBlockedList.push(m);};
M.prototype.getEntryProvider=function(p,n){if(this._isManagerBlocked(p)){L.error("ManagerId '"+p+"' is already listed as an entry manager.");return Promise.reject("ManagerId "+p+" is already listed as an entry manager.");}this._setManagerBlocked(p);return this.getMenuModel().then(function(m){return this._createEntryProviders(p,n,m);}.bind(this));};
M.hasNoAdapter=false;return M;});
sap.ui.predefine('sap/ushell/services/Message',["sap/base/Log","sap/m/MessageBox","sap/ushell/Config","sap/ushell/resources","sap/m/Dialog","sap/m/Text","sap/m/Link","sap/m/Button","sap/m/VBox","sap/m/FormattedText","sap/m/library","sap/ui/core/library"],function(L,M,C,r,D,T,a,B,V,F,m,c){"use strict";var b=m.ButtonType;var d=m.DialogType;var e=c.ValueState;var f=m.FlexRendertype;
function g(){var s;this.init=function(S){s=S;return this;};this.show=function(t,h,p){if(!h){L.error("Message must not be empty.");return;}if(s&&typeof s==="function"){s(t,h,p||{});}else{this.buildMessage(t,h,p||{});}};this.buildMessage=function(t,h,p){var o={title:p.title,actions:p.actions,details:p.details,onClose:p.callback,emphasizedAction:p.emphasizedAction},i;switch(t){case g.Type.ERROR:this._createAndOpenErrorDialog(h,o);return;case g.Type.CONFIRM:if(!p.actions){i="confirm";}else if(p.actions.indexOf("DELETE")>-1){i="warning";o.emphasizedAction=M.Action.DELETE;}else{o.icon=M.Icon.QUESTION;i="show";}break;case g.Type.INFO:i="info";this.buildAndSendMessageToast(h,p.duration||3000);return;default:o={duration:p.duration||3000};i="show";break;}this.sendMessageBox(h,i,o);};this._copyToClipboard=function(h,i,j){var k=i.details;if(typeof i.details==="object"){k=JSON.stringify(i.details,null,"\t");}var l=["Title: "+(j||"-"),"Message: "+(h||"-"),"Details: "+(k||"-")];var E=document.activeElement,t=document.createElement("textarea"),n;try{t.contentEditable=true;t.readonly=false;t.innerText=l.join("\n");document.documentElement.appendChild(t);if(navigator.userAgent.match(/ipad|iphone/i)){var R=document.createRange();R.selectNodeContents(t);window.getSelection().removeAllRanges();window.getSelection().addRange(R);t.setSelectionRange(0,999999);}else{t.select();}var S=document.execCommand("copy");n=S?"CopyWasSuccessful":"CopyWasNotSuccessful";}catch(o){n="CopyWasNotSuccessful";}finally{this.buildAndSendMessageToast(r.i18n.getText(n));document.documentElement.removeChild(t);window.getSelection().removeAllRanges();E.focus();}};this._createAndOpenErrorDialog=function(h,i){var v=i.details;var o;if(v){o=new F({htmlText:typeof v==="object"?v.info:v});}var E=this.errorWithDetails(h,o,i.title);if(sap.ushell.Container&&C.last("/core/extension/SupportTicket")&&h!==r.i18n.getText("supportTicketCreationFailed")){E.addButton(new B({text:r.i18n.getText("contactSupportBtn"),tooltip:r.i18n.getText("contactSupportBtn_tooltip"),press:function(){sap.ui.require(["sap/ushell/ui/footerbar/ContactSupportButton"],function(j){var k=new j();if(k){k.showContactSupportDialog();k.destroy();}});E.close();}}));}if(document.queryCommandSupported("copy")){E.addButton(new B({text:r.i18n.getText("CopyToClipboardBtn"),tooltip:r.i18n.getText("CopyToClipboardBtn_tooltip"),press:this._copyToClipboard.bind(this,h,i,E.getTitle())}));}E.addButton(new B({text:r.i18n.getText("closeBtn"),type:b.Emphasized,press:E.close.bind(E)}));};this.buildAndSendMessageToast=function(h,i){sap.ui.require(["sap/m/MessageToast"],function(j){j.show(h,{duration:i});});};this.sendMessageBox=function(h,t,o){if(typeof M[t]==="function"){M[t](h,o);}else{L.error("Unknown Message type: "+t,null,"Message Service");}};this.info=function(h,i){this.show(g.Type.INFO,h,{duration:i||3000});};this.error=function(h,t){L.error(h);this.show(g.Type.ERROR,h,{title:t});};this.confirm=function(h,i,t,A){this.show(g.Type.CONFIRM,h,{title:t,callback:i,actions:A});};this.errorWithDetails=function(h,i,t,j){if(Array.isArray(i)){j=i;i=null;}if(typeof i==="string"){j=t;t=i;i=null;}var o=new T({text:h,visible:!!h});if(i){o.addStyleClass("sapUiSmallMarginBottom");}var E=new D({state:e.Error,type:d.Message,contentWidth:"30rem",title:t||r.i18n.getText("error"),content:[new V({renderType:f.Bare,items:[o,new a({text:r.i18n.getText("ViewDetails"),visible:!!i,press:function(){E.getContent()[0].addItem(i);this.destroy();}})]})],buttons:j,endButton:new B({text:r.i18n.getText("closeBtn"),type:b.Emphasized,press:function(){E.close();}}),afterClose:function(){this.destroy();}}).addStyleClass("sapContrastPlus");E.open();return E;};}
g.Type={INFO:0,ERROR:1,CONFIRM:2};g.hasNoAdapter=true;return g;},true);
sap.ui.predefine('sap/ushell/services/NavTargetResolution',["sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ushell/utils/UrlParsing","sap/ushell/utils/UrlShortening","sap/ushell/navigationMode","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/deepExtend","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/base/Log"],function(b,u,U,c,n,q,M,d,e,f,L){"use strict";
function N(A,C,p,s){var S=s&&s.config,r=function(h){var a=this._isClientSideTargetResolutionEnabled()?this._resolveHashFragmentClientSide(h):A.resolveHashFragment(h);return a;}.bind(this),l,R=[{name:"DefaultAdapter",isApplicable:function(){return true;},resolveHashFragment:r.bind(this)}],o;this._isClientSideTargetResolutionEnabled=function(){return!!(S&&S.enableClientSideTargetResolution);};this._nextResolveHashFragment=function(a,h){var g=a.pop();if(g.isApplicable(h)){L.info("NavTargetResolution: custom resolver "+g.name+" resolves "+h);var i=this._nextResolveHashFragment.bind(this,a);return g.resolveHashFragment(h,i);}return this._nextResolveHashFragment(a,h);};this._resolveHashFragmentClientSide=function(h){var H=this._validateHashFragment(h),F;if(!H.success){return new q.Deferred().reject(h+" is not a valid hash fragment").promise();}F=H.hashFragmentWithoutHash;return this._resolveHashFragmentClientSideAndFixApplicationType(F);};this._resolveHashFragmentClientSideAndFixApplicationType=function(F){var D=new q.Deferred();sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.resolveHashFragment(F).done(function(g){if(g&&g.applicationType==="SAPUI5"){g.applicationType="URL";}D.resolve(g);}).fail(D.reject);}).catch(D.reject);return D.promise();};this._validateHashFragment=function(h){var H="",v={success:false};if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected in _validateHashFragment","sap.ushell.services.NavTargetResolution");}H=h.substring(1);if(H){v.success=true;}v.hashFragmentWithoutHash=H;return v;};this.expandCompactHash=function(h){var P,D=new q.Deferred();P=U.parseShellHash(h);if(P&&P.params&&P.params["sap-intent-param"]){sap.ushell.Container.getServiceAsync("AppState").then(function(a){a.getAppState(P.params["sap-intent-param"][0]).done(function(g){var v=g.getData("sap-intent-param");var H=h;if(v){H=c.expandParamGivenRetrievalFunction(h,"sap-intent-param",function(){return v;});}D.resolve(H);}).fail(function(){D.resolve(h);});}).catch(D.reject);}else{D.resolve(h);}return D.promise();};var w=["NWBC","WDA","TR"];this._adjustResolutionResultForUi5Components=function(a){var m,g;if(typeof a!=="object"){return;}delete a["sap.platform.runtime"];if(a&&a.applicationType&&a.applicationType==="SAPUI5"){a.applicationType="URL";}if(a.applicationType==="URL"){m=/^SAPUI5\.Component=(.*)/.exec(a.additionalInformation);g=m&&m[1];if(g){a.ui5ComponentName=g;}}};this._getSapSystem=function(h,a){var g;if(a&&a["sap-system"]){return a["sap-system"];}if(a&&a.url){g=(new f(a.url)).get("sap-system");if(g){return g;}}if(w.indexOf(a.applicationType)>=0&&h&&h.substring(1)){g=(new f(h.substring(1))).get("sap-system");if(g){return g;}}return undefined;};this.resolveTarget=function(a){var h;var g=d({},a);var D=new q.Deferred();M.average("sap.ushell.navigation.resolveTarget");u.storeSapSystemToLocalStorage(g);h=U.constructShellHash(g);sap.ushell.Container.getServiceAsync("NavTargetResolution").then(function(i){i.resolveHashFragment("#"+h).done(function(j){M.end("sap.ushell.navigation.resolveTarget");D.resolve({url:j.url,text:j.text,externalNavigationMode:j.externalNavigationMode});}).fail(D.reject);}).catch(D.reject);return D.promise();};this.resolveHashFragment=function(h){var D=new q.Deferred();M.average("sap.ushell.navigation.resolveHashFragment");this.expandCompactHash(h).done(function(H){var E=q.when();if(H.indexOf("sap-ushell-enc-test")>=0){var m=/sap-ushell-enc-test=([^&]*)(&.*)?$/.exec(H);if(m){var a=m[1];if(a!=="A%20B%2520C"){E=new q.Deferred();sap.ushell.Container.getServiceAsync("Message").then(function(g){g.error("This navigation is flagged as erroneous because"+" (likely the calling procedure) generated a wrong encoded hash."+" Please track down the encoding error and make sure to use the CrossApplicationNavigation service for navigation.","Navigation encoding wrong");E.resolve();}).catch(E.reject);}H=H.replace(/sap-ushell-enc-test=([^&]*)&/,"");H=H.replace(/[&?]sap-ushell-enc-test=([^&]*)$/,"");}}var P=this._invokeResolveHashChain(H);if(typeof A.processPostResolution==="function"){P=A.processPostResolution(H,P);}q.when(P,E).done(function(g){this._adjustResolutionResultForUi5Components(g);if(e(g)){if(!g.hasOwnProperty("navigationMode")){g.navigationMode=n.getNavigationMode(g,b.getCurrentApplication());}g.targetNavigationMode=n.getExternalNavigationMode(g.navigationMode);}if(e(g)&&!g.hasOwnProperty("sap-system")){var i=this._getSapSystem(h,g);if(i){g["sap-system"]=i;}}M.end("sap.ushell.navigation.resolveHashFragment");D.resolve(g);}.bind(this)).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};this._invokeResolveHashChain=function(h){var g=R.map(function(a){return a;});return this._nextResolveHashFragment(g,h).done(function(a){o=a;});};this.baseResolveHashFragment=r.bind(this);this._getGetLinksResolver=function(a){var g;if(this._isClientSideTargetResolutionEnabled()){g=this._getLinksClientSide.bind(this);return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}if(Object.prototype.toString.apply(a.paramsOptions)==="[object Array]"&&a.paramsOptions.length>0){L.warning("Parameter options supplied to #getLinks will be ignored because FLP is not configured to use sap.ushell.services.ClientSideTargetResolution for target resolution","provided parameters options: "+JSON.stringify(a.paramsOptions,null,4),"sap.ushell.services.NavTargetResolution");}g=A&&A.getLinks&&A.getLinks.bind(A);if(g){return{resolver:g,warning:undefined,isGetSemanticObjectLinksCall:false};}g=A&&A.getSemanticObjectLinks&&A.getSemanticObjectLinks.bind(A);if(g){return{resolver:g,warning:a.hasOwnProperty("action")?"the action argument was given, however, NavTargetResolutionAdapter does not implement getLinks method. Action will be ignored.":undefined,isGetSemanticObjectLinksCall:true};}return{resolver:undefined,warning:"Cannot determine resolver for getLinks method",isGetSemanticObjectLinksCall:undefined};};this.getLinks=function(a){var g=a.semanticObject;var P=a.params;var i=a.ignoreFormFactor;var h=a.ui5Component;var j=a.appStateKey;var k=a.compactIntents;var D=new q.Deferred();if(/\?/.test(g)){throw new Error("Parameter must not be part of semantic object");}var m=(P===undefined)?undefined:JSON.parse(JSON.stringify(P));if(j){m=m||{};m["sap-xapp-state"]=encodeURIComponent(j);}var t=this._getGetLinksResolver(a);if(t.warning){L.warning("A problem occurred while determining the resolver for getLinks",t.warning,"sap.ushell.services.NavTargetResolution");}var v=t.resolver;if(v){var H=function(y){if(k){this._shortenGetSemanticObjectLinksResults(y,h).done(D.resolve);}else{D.resolve(y);}}.bind(this);if(t.isGetSemanticObjectLinksCall){var x={target:{semanticObject:g,action:"dummyAction"},params:m};sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(y){y.hrefForExternal(x,true,h,true).done(function(z){var B=z.params||m;v(g,B,i).done(H).fail(D.reject);}).fail(D.reject);});}else{v(a).done(H).fail(D.reject);}}else{D.resolve([]);}return D.promise();};this.getDistinctSemanticObjects=function(){var D=new q.Deferred();if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.getDistinctSemanticObjects().done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();}if(A&&A.getDistinctSemanticObjects){return A.getDistinctSemanticObjects.call(A);}L.error("Cannot execute getDistinctSemanticObjects method","ClientSideTargetResolution must be enabled or NavTargetResolutionAdapter must implement getDistinctSemanticObjects method","sap.ushell.services.NavTargetResolution");return D.reject("Cannot execute getDistinctSemanticObjects").promise();};this._getLinksClientSide=function(a){var D=new q.Deferred();var g=new q.Deferred();if((a.params||{}).hasOwnProperty("sap-intent-param")){var h="#"+a.semanticObject+"-dummyAction?"+U.paramsToString(a.params);this.expandCompactHash(h).done(function(E){var P=U.parseShellHash(E);g.resolve(P.params);}).fail(D.reject);}else{g.resolve(a.params);}g.done(function(){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(i){i.getLinks(a).done(D.resolve).fail(D.reject);}).catch(D.reject);});return D.promise();};this._shortenGetSemanticObjectLinksResults=function(g,a){var h=[];var i=0;var P=g.length;var D=new q.Deferred();sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(j){g.forEach(function(I){var k=U.parseShellHash(I.intent);var m=j.compactParams(k.params,undefined,a);h.push(m);h[i].done(function(t,v){h[t]={text:I.text,intent:"#"+k.semanticObject+"-"+k.action+"?"+U.paramsToString(v)};}.bind(null,i)).fail(function(t,v){L.warning("Cannot shorten GetSemanticObjectLinks result, using expanded form","Failure message: "+v+"; intent had title ''"+I.title+"'' and link ''"+I.intent+"'","sap.ushell.services.NavTargetResolution");h[t]={text:I.text,intent:I.intent};}.bind(null,i)).always(function(){P--;if(P===0){D.resolve(h);}});i++;});}).catch(D.reject);return D.promise();};this.isIntentSupported=function(i){var m={};var D=new q.Deferred();if(this._isClientSideTargetResolutionEnabled()){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(a){a.isIntentSupported(i).done(D.resolve).fail(D.reject);}).catch(D.reject);return D.promise();}if(A.isIntentSupported){return A.isIntentSupported(i);}i.forEach(function(I){m[I]={supported:undefined};});return D.resolve(m).promise();};this.isNavigationSupported=function(i){var D=new q.Deferred(),I=[];I=i.map(function(a){if(typeof a==="string"){return a;}return"#"+U.constructShellHash(a);});this.isIntentSupported(I).done(function(a){var g=I.map(function(h){return a[h]||{supported:false};});D.resolve(g);}).fail(D.reject.bind(D));return D.promise();};this.registerCustomResolver=function(a){if(typeof a.name!=="string"){L.error("NavTargetResolution: Custom Resolver must have name {string} member");return false;}if(typeof a.isApplicable!=="function"){L.error("NavTargetResolution: Custom Resolver must have isApplicable member");return false;}if(typeof a.resolveHashFragment!=="function"){L.error("NavTargetResolution: Custom Resolver must have \"resolveHashFragment\" member");return false;}R.push(a);return true;};if(S&&Array.isArray(S.resolveLocal)){l=S.resolveLocal.map(function(a){return a.linkId;});this.registerCustomResolver({name:"localResolveNavigationResolver",cleanHash:function(h){if(h===""){return"#";}var a=U.parseShellHash(h.substring(1));if(!a){return"#";}h="#"+a.semanticObject+"-"+a.action;return h;},_getIndex:function(O){var h=this.cleanHash(O);return l.indexOf(h.substring(1));},isApplicable:function(O){return this._getIndex(O)>=0;},resolveHashFragment:function(h){var D,i=this._getIndex(h),a,g,j,k;D=new q.Deferred();a=JSON.parse(JSON.stringify(S.resolveLocal[i].resolveTo));g=U.parseShellHash(h);if(g&&g.params){k=U.paramsToString(g.params);if(k){j=a.url.indexOf("?")>=0;a.url=a.url+(j?"&":"?")+k;}}D.resolve(a);return D.promise();}});}this.registerCustomResolver({name:"LocalResolver",aElement:undefined,cleanHash:function(h){if(h===""){return undefined;}var a=U.parseShellHash(h.substring(1));if(!a){return undefined;}h="#"+a.semanticObject+"-"+a.action;return h;},isApplicable:function(h){h=this.cleanHash(h);if(!h){return false;}return h==="#Test-url"||h==="#Test-local1"||h==="#Test-local2"||h==="#Test-config"||h==="#Test-clear";},parseUrl:function(a){if(!this.aElement){this.aElement=window.document.createElement("a");}this.aElement.href=a;return this.aElement;},resolveHashFragment:function(h){var D=new q.Deferred(),a=null,g,i,j,P,k,t=this;h=this.cleanHash(h);if(!h){return false;}a={"#Test-config":{applicationType:"URL",url:"/sap/bc/ui5_ui5/ui2/ushell/test-resources/sap/ushell/demoapps/FioriSandboxConfigApp",additionalInformation:"SAPUI5.Component=sap.ushell.demoapps.FioriSandboxConfigApp"},none:{applicationType:"URL",url:"",additionalInformation:""}};function m(K){if(localStorage){return localStorage[K];}return undefined;}function v(z){if(u.calculateOrigin(t.parseUrl(z))!==u.calculateOrigin(window.location)){return undefined;}return z;}function x(K){return(new f(window.location.href)).get(K);}function y(K,V){if(localStorage){localStorage[K]=V;}}if(a[h]){g=a[h];}else if(h==="#Test-clear"){y("sap.ushell.#Test-local1",undefined);y("sap.ushell.#Test-local2",undefined);L.info("NavTargetResolution: Local storage keys for #Test have been cleared");g=a["#Test-config"];}else if(h==="#Test-local1"||h==="#Test-local2"||h==="#Test-url"){g=m("sap.ushell."+h);if(!g||g==="undefined"){i={applicationType:"URL"};}else{i=JSON.parse(g);}if((window.location.hostname==="localhost")||(S&&S.allowTestUrlComponentConfig)){P="sap-ushell-test-"+h.substring(6);j=x(P+"-additionalInformation");if(j){i.additionalInformation=j;}k=x(P+"-url");if(k){i.url=v(k);}}if(!i.url){L.info("NavTargetResolution: No configured app for "+h+" found ( local storage or url params sap-ushell-test-local1-url  sap-ushell-test-local1-additionalInfo  not supplied? ");L.info("NavTargetResolution: Defaulting to config app ...\n");D.reject("URL is not resolvable");return D.promise();}i.url=v(i.url);g=i;}if(g.url===undefined){D.reject("URL is not resolvable");return D.promise();}L.info("NavTargetResolution: As URL:  http://localhost:8080/sap/bc/ui5_ui5/ui2/ushell/shells/abap/FioriLaunchpad.html?sap-ushell-test-local1-url="+encodeURIComponent((g&&g.url)||"")+"&sap-ushell-test-local1-additionalInformation="+encodeURIComponent((g&&g.additionalInfo)||"")+"#Test-local1");L.info("NavTargetResolution: Resolving "+h+" to "+JSON.stringify(g));D.resolve(g);return D.promise();}});this.getCurrentResolution=function(){return o;};}
N.hasNoAdapter=false;return N;},true);
sap.ui.predefine('sap/ushell/services/NavigationDataProvider',["sap/ushell/resources"],function(r){"use strict";
function N(){this.S_COMPONENT_NAME="sap.ushell.services.NavigationDataProvider";this._init.apply(this,arguments);}
N.prototype._init=function(a,s){this.oAdapter=a;};
N.prototype.getNavigationData=function(){return new Promise(function(a,b){var s=(this.oAdapter.getSystemAliases&&this.oAdapter.getSystemAliases())||{};this.oAdapter.getInbounds().then(function(i){a({systemAliases:s,inbounds:i});}).fail(function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("NavigationDataProvider.CannotLoadData"),detail:e};b(E);}.bind(this));}.bind(this));};
N.hasNoAdapter=false;return N;});
sap.ui.predefine('sap/ushell/services/Notifications',["sap/ui/thirdparty/datajs","sap/ui/core/ws/SapPcpWebSocket","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/model/json/JSONModel","sap/ushell/utils"],function(O,S,q,L,J,u){"use strict";var a="/sap/bc/apc/iwngw/notification_push_apc";var I=60;
function N(c,p,s){var m=new J(),t=new Date(),o=s&&s.config,r={getNotifications:{},getNotificationsByType:{},getNotificationsInGroup:{},getBadgeNumber:{},resetBadgeNumber:{},getNotificationTypesSettings:{},getNotificationsGroupHeaders:{},getMobileSupportSettings:{},getEmailSupportSettings:{},getWebSocketValidity:{},getNotificationCount:{}},w,i,b,d,U=[],f=[],g=[],h=false,C=[],j=false,k=false,E=true,H,D,l=5000,n=6000,W=false,v={NOTIFICATIONS:0,NOTIFICATIONS_BY_TYPE:1,GET_BADGE_NUMBER:2,RESET_BADGE_NUMBER:3,GET_SETTINGS:4,GET_MOBILE_SUPPORT_SETTINGS:5,NOTIFICATIONS_GROUP_HEADERS:6,NOTIFICATIONS_IN_GROUP:7,GET_NOTIFICATIONS_COUNT:8,VALIDATE_WEBSOCKET_CHANNEL:9,GET_EMAIL_SUPPORT_SETTINGS:10,NOTIFICATIONS_BY_DATE_DESCENDING:"notificationsByDateDescending",NOTIFICATIONS_BY_DATE_ASCENDING:"notificationsByDateAscending",NOTIFICATIONS_BY_PRIORITY_DESCENDING:"notificationsByPriorityDescending",NOTIFICATIONS_BY_TYPE_DESCENDING:"notificationsByTypeDescending"},M={PACKAGED_APP:0,FIORI_CLIENT:1,WEB_SOCKET:2,POLLING:3},z,F=false,A=true,B=false,G=new q.Deferred(),K=new q.Deferred(),P,Q,R=G.promise(),T=false,V={},X=10,Y=false,Z=false,$=[];this.isEnabled=function(){if(!o.enabled||!o.serviceUrl){E=false;if(o.enabled&&!o.serviceUrl){L.warning("No serviceUrl was found in the service configuration");}}else{E=true;}return E;};this.init=function(){if(!j&&this.isEnabled()){sap.ui.getCore().getEventBus().subscribe("launchpad","sessionTimeout",this.destroy,this);this.lastNotificationDate=new Date();this._setWorkingMode();j=true;this.bUpdateDependencyInitiatorExists=false;this._userSettingInitialization();}sap.ui.getCore().getEventBus().subscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this);};this._onSetConnectionToServer=function(e,x,y){if(y.active){this._resumeConnection();}else{this._closeConnection();}};this.getUnseenNotificationsCount=function(){var e=new q.Deferred();e.resolve(m.getProperty("/UnseenCount"));return e.promise();};this.getNotificationsCount=function(){return m.getProperty("/NotificationsCount")?m.getProperty("/NotificationsCount"):"0";};this.getNotificationsByTypeWithGroupHeaders=function(){var e={"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()},x,y=new q.Deferred(),_=this._getRequestURI(v.NOTIFICATIONS_BY_TYPE);x={requestUri:_};if(!this._getHeaderXcsrfToken()){e["X-CSRF-Token"]="fetch";}x.headers=e;O.request(x,function(a1){y.resolve(a1);},function(a1){if(a1.response&&a1.response.statusCode===200&&a1.response.body){y.resolve(a1.response.body);}else{y.reject(a1);L.error("Notification service - oData executeAction failed: ",a1,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsGroupHeaders=function(){var e={"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()},x,y=new q.Deferred(),_=this._getRequestURI(v.NOTIFICATIONS_GROUP_HEADERS);x={requestUri:_};if(!this._getHeaderXcsrfToken()){e["X-CSRF-Token"]="fetch";}x.headers=e;O.request(x,function(a1){y.resolve(a1);},function(a1){if(a1.response&&a1.response.statusCode===200&&a1.response.body){y.resolve(a1.response.body);}else{y.reject();L.error("Notification service - oData executeAction failed: ",a1,"sap.ushell.services.Notifications");}});return y.promise();};this.getNotificationsBufferInGroup=function(e,x,y){var _=this,a1={"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()},b1,c1=new q.Deferred(),d1={group:e,skip:x,top:y},e1,f1,g1=this._getRequestURI(v.NOTIFICATIONS_IN_GROUP,d1);if(T===true){e1=V[v.NOTIFICATIONS_IN_GROUP].slice(x,x+y);f1=JSON.stringify({"@odata.context":"$metadata#Notifications",value:e1});setTimeout(function(){c1.resolve(f1);},1000);}else{b1={requestUri:g1};if(!this._getHeaderXcsrfToken()){a1["X-CSRF-Token"]="fetch";}b1.headers=a1;O.request(b1,function(h1){_._updateCSRF(h1.response);c1.resolve(h1.value);},function(h1){if(h1.response&&h1.response.statusCode===200&&h1.response.body){_._updateCSRF(h1.response);c1.resolve(JSON.parse(h1.response.body).value);}else{c1.reject();L.error("Notification service - oData executeAction failed: ",h1,"sap.ushell.services.Notifications");}});}return c1.promise();};this.getNotificationsBufferBySortingType=function(e,x,y){var _=this,a1={"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()},b1,c1=new q.Deferred(),d1={skip:x,top:y},e1,f1,g1=this._getRequestURI(e,d1);if(T===true){e1=V[e].slice(x,x+y);f1=JSON.stringify({"@odata.context":"$metadata#Notifications",value:e1});setTimeout(function(){c1.resolve(f1);},1000);}else{b1={requestUri:g1};if(!this._getHeaderXcsrfToken()){a1["X-CSRF-Token"]="fetch";}b1.headers=a1;O.request(b1,function(h1){_._updateCSRF(h1.response);c1.resolve(h1.value);},function(h1){if(h1.response&&h1.response.statusCode===200&&h1.response.body){_._updateCSRF(h1.response);c1.resolve(JSON.parse(h1.response.body).value);}else{c1.reject();L.error("Notification service - oData executeAction failed: ",h1,"sap.ushell.services.Notifications");}});}return c1.promise();};this.getNotifications=function(){var e,x=new q.Deferred();if((z===M.FIORI_CLIENT)||(z===M.PACKAGED_APP)){e=this._readNotificationsData(false);e.done(function(){x.resolve(m.getProperty("/Notifications"));}).fail(function(){x.reject();});}else{x.resolve(m.getProperty("/Notifications"));}return x.promise();};this.executeBulkAction=function(e,x){var y=new q.Deferred(),_=[],a1=[],b1={succededNotifications:_,failedNotifications:a1},c1=this;c1.sendBulkAction(e,x).done(function(d1){d1.forEach(function(e1,f1){var g1=e1.NotificationId,h1=e1.Success;if(h1){_.push(g1);}else{a1.push(g1);}});if(a1.length){y.reject(b1);}else{y.resolve(b1);}}).fail(function(){y.reject(b1);});return y.promise();};this.dismissBulkNotifications=function(e){var x=new q.Deferred(),y=this;y.sendBulkDismiss(e).done(function(){x.resolve();}).fail(function(){x.reject();});return x.promise();};this.executeAction=function(e,x){var y=this,_=o.serviceUrl+"/ExecuteAction",a1={NotificationId:e,ActionId:x},b1={requestUri:_,method:"POST",data:a1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}},c1=new q.Deferred();O.request(b1,function(d1){var e1,f1={isSucessfull:true,message:""};if(d1&&d1.response&&d1.response.statusCode===200&&d1.response.body){e1=JSON.parse(d1.response.body);f1.isSucessfull=e1.Success;f1.message=e1.MessageText;}c1.resolve(f1);},function(d1){var e1,f1={isSucessfull:false,message:""};if(d1.response&&d1.response.statusCode===200&&d1.response.body){e1=JSON.parse(d1.response.body);f1.isSucessfull=e1.Success;f1.message=e1.MessageText;c1.resolve(f1);}else if(y._csrfTokenInvalid(d1)&&(Y===false)){y._invalidCsrfTokenRecovery(c1,y.executeAction,[e,x]);}else{c1.reject(d1);L.error("Notification service - oData executeAction failed: ",d1,"sap.ushell.services.Notifications");}});return c1.promise();};this.sendBulkAction=function(e,x){var y=this,_=o.serviceUrl+"/BulkActionByHeader",a1={ParentId:e,ActionId:x},b1={requestUri:_,method:"POST",data:a1,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}},c1=new q.Deferred();O.request(b1,function(d1){var e1,f1;if(d1&&d1.response&&d1.response.statusCode===200&&d1.response.body){e1=JSON.parse(d1.response.body);f1=e1.value;}c1.resolve(f1);},function(d1){var e1,f1;if(d1.response&&d1.response.statusCode===200&&d1.response.body){e1=JSON.parse(d1.response.body);f1=e1.value;c1.resolve(f1);}else if(y._csrfTokenInvalid(d1)&&(Y===false)){y._invalidCsrfTokenRecovery(c1,y.sendBulkAction,[e,x]);}else{c1.reject();L.error("Notification service - oData executeBulkAction failed: ",d1.message,"sap.ushell.services.Notifications");}});return c1.promise();};this.sendBulkDismiss=function(e){var x=this,y=o.serviceUrl+"/DismissAll",_={ParentId:e},a1={requestUri:y,method:"POST",data:_,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}},b1=new q.Deferred();O.request(a1,function(){b1.resolve();},function(c1){if(c1.response&&c1.response.statusCode===200){b1.resolve();}else if(x._csrfTokenInvalid(c1)&&(Y===false)){x._invalidCsrfTokenRecovery(b1,x.sendBulkDismiss,[e]);}else{b1.reject();var d1=c1?c1.message:"";L.error("Notification service - oData executeBulkAction failed: ",d1,"sap.ushell.services.Notifications");}});return b1.promise();};this.markRead=function(e){var x=this,y=o.serviceUrl+"/MarkRead",_={NotificationId:e},a1={requestUri:y,method:"POST",data:_,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}},b1=new q.Deferred();O.request(a1,function(){b1.resolve();},function(c1){if(x._csrfTokenInvalid(c1)&&(Y===false)){x._invalidCsrfTokenRecovery(b1,x.markRead,[e]);}else{L.error("Notification service - oData reset badge number failed: ",c1,"sap.ushell.services.Notifications");b1.reject(c1);}});return b1.promise();};this.dismissNotification=function(e){var x=o.serviceUrl+"/Dismiss",y=this,_={NotificationId:e},a1={requestUri:x,method:"POST",data:_,headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}},b1=new q.Deferred();O.request(a1,function(){y._addDismissNotifications(e);b1.resolve();},function(c1){if(y._csrfTokenInvalid(c1)&&(Y===false)){y._invalidCsrfTokenRecovery(b1,y.dismissNotification,[e]);}else{b1.reject(c1);L.error("Notification service - oData dismiss notification failed: ",c1,"sap.ushell.services.Notifications");}});return b1.promise();};this.registerNotificationsUpdateCallback=function(e){U.push(e);};this.registerDependencyNotificationsUpdateCallback=function(e,x){if(x===false){this.bUpdateDependencyInitiatorExists=true;}f.push({callback:e,dependent:x});};this.registerNotificationCountUpdateCallback=function(e){g.push(e);};this.notificationsSeen=function(){this._setNotificationsAsSeen();};this.isFirstDataLoaded=function(){return F;};this.readSettings=function(){var e;e=this._readSettingsFromServer();return e;};this.saveSettingsEntry=function(e){var x=this._writeSettingsEntryToServer(e);return x;};this.getUserSettingsFlags=function(){var e=new q.Deferred();if(B===true){e.resolve({highPriorityBannerEnabled:A});}else{R.done(function(){e.resolve({highPriorityBannerEnabled:A});});}return e.promise();};this.setUserSettingsFlags=function(e){A=e.highPriorityBannerEnabled;this._writeUserSettingsFlagsToPersonalization(e);};this._getNotificationSettingsMobileSupport=function(){return P;};this._getDismissNotifications=function(){return $;};this.filterDismisssedItems=function(e,$){return e.filter(function(x){return!$.some(function(y){return y===x.originalItemId;});});};this._addDismissNotifications=function(e){if($.indexOf(e)===-1){$.push(e);}};this._initializeDismissNotifications=function(){$=[];};this._getNotificationSettingsEmailSupport=function(){return Q;};this.destroy=function(){k=true;if(i){clearTimeout(i);}else if(b){clearTimeout(b);}else if(d){clearTimeout(d);}if((z===M.WEB_SOCKET)&&w){w.close();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","sessionTimeout",this.destroy,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","setConnectionToServer",this._onSetConnectionToServer,this);};this._readUnseenNotificationsCount=function(e){var x=this,y=new q.Deferred(),_=this._getRequestURI(v.GET_BADGE_NUMBER),a1={requestUri:_,headers:{"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()}};O.read(a1,function(b1,c1){m.setProperty("/UnseenCount",c1.data.GetBadgeNumber.Number);x._setNativeIconBadge(c1.data.GetBadgeNumber.Number);y.resolve(c1.data.GetBadgeNumber.Number);},function(b1){if(b1.response&&b1.response.statusCode===200&&b1.response.body){var c1=JSON.parse(b1.response.body);m.setProperty("/UnseenCount",c1.value);x._setNativeIconBadge(c1.value);y.resolve(c1.value);}else{L.error("Notification service - oData read unseen notifications count failed: ",b1.message,"sap.ushell.services.Notifications");y.reject(b1);}});return y.promise();};this.readNotificationsCount=function(){var e=new q.Deferred(),x=this._getRequestURI(v.GET_NOTIFICATIONS_COUNT),y={requestUri:x,headers:{"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()}};O.read(y,function(_,a1){e.resolve(a1.data);},function(_){if(_.response&&_.response.statusCode===200&&_.response.body){var a1=JSON.parse(_.response.body);e.resolve(a1.value);}else{L.error("Notification service - oData read notifications count failed: ",_.message,"sap.ushell.services.Notifications");e.reject(_);}});return e.promise();};this._getNotificationSettingsAvalability=function(){return K.promise();};this._setNotificationsAsSeen=function(){var e=this,x=new q.Deferred(),y=this._getRequestURI(v.RESET_BADGE_NUMBER),_={requestUri:y,method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}};if(this._isFioriClientMode()===true||this._isPackagedMode()===true){this._setNativeIconBadge(0);}O.request(_,function(){x.resolve();},function(a1){if(e._csrfTokenInvalid(a1)&&(Y===false)){e._invalidCsrfTokenRecovery(x,e._setNotificationsAsSeen);}else{L.error("Notification service - oData reset badge number failed: ",a1,"sap.ushell.services.Notifications");x.reject(a1);}});return x.promise();};this._readNotificationsData=function(e){var x=this,y,_,a1,b1=new q.Deferred(),c1=[];y=this._readUnseenNotificationsCount(e);c1.push(y);a1=this.readNotificationsCount();a1.done(function(d1){m.setProperty("/NotificationsCount",d1);});_=this.getNotificationsBufferBySortingType(v.NOTIFICATIONS_BY_DATE_DESCENDING,0,X);c1.push(_);q.when.apply(q,c1).then(function(){c1[0].done(function(){if(e===true){x._updateNotificationsCountConsumers();}});c1[1].done(function(d1){m.setProperty("/Notifications",d1);x._notificationAlert(d1);if(e===true){x._updateNotificationsConsumers();x._updateDependentNotificationsConsumers();}b1.resolve();});});return b1.promise();};this._getHeaderXcsrfToken=function(){return H;};this._getDataServiceVersion=function(){return D;};this._getRequestURI=function(e,x){var y,_=encodeURI(this._getConsumedIntents(e));switch(e){case v.NOTIFICATIONS:if(r.getNotifications.basic===undefined){r.getNotifications.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20false";}if(this._isIntentBasedConsumption()){if(r.getNotifications.byIntents===undefined){r.getNotifications.byIntents=r.getNotifications.basic.concat("&intents%20eq%20"+_);}return r.getNotifications.byIntents;}return r.getNotifications.basic;case v.NOTIFICATIONS_BY_TYPE:if(r.getNotificationsByType.basic===undefined){r.getNotificationsByType.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams";}if(this._isIntentBasedConsumption()){if(r.getNotificationsByType.byIntents===undefined){r.getNotificationsByType.byIntents=r.getNotificationsByType.basic.concat("&$filter=intents%20eq%20"+_);}return r.getNotificationsByType.byIntents;}return r.getNotificationsByType.basic;case v.NOTIFICATIONS_GROUP_HEADERS:if(r.getNotificationsGroupHeaders.basic===undefined){r.getNotificationsGroupHeaders.basic=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$filter=IsGroupHeader%20eq%20true";}if(this._isIntentBasedConsumption()){if(r.getNotificationsGroupHeaders.byIntents===undefined){r.getNotificationsGroupHeaders.byIntents=r.getNotificationsGroupHeaders.basic.concat("&intents%20eq%20"+_);}return r.getNotificationsGroupHeaders.byIntents;}return r.getNotificationsGroupHeaders.basic;case v.NOTIFICATIONS_IN_GROUP:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt desc&$filter=IsGroupHeader eq false and ParentId eq "+x.group+"&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+_);}break;case v.GET_BADGE_NUMBER:if(r.getBadgeNumber.basic===undefined){r.getBadgeNumber.basic=o.serviceUrl+"/GetBadgeNumber()";}if(this._isIntentBasedConsumption()){if(r.getBadgeNumber.byIntents===undefined){r.getBadgeNumber.byIntents=o.serviceUrl+"/GetBadgeCountByIntent("+_+")";}return r.getBadgeNumber.byIntents;}return r.getBadgeNumber.basic;case v.GET_NOTIFICATIONS_COUNT:if(r.getNotificationCount.basic===undefined){r.getNotificationCount.basic=o.serviceUrl+"/Notifications/$count";}return r.getNotificationCount.basic;case v.RESET_BADGE_NUMBER:if(r.resetBadgeNumber.basic===undefined){r.resetBadgeNumber.basic=o.serviceUrl+"/ResetBadgeNumber";}return r.resetBadgeNumber.basic;case v.GET_SETTINGS:if(r.getNotificationTypesSettings.basic===undefined){r.getNotificationTypesSettings.basic=o.serviceUrl+"/NotificationTypePersonalizationSet";}return r.getNotificationTypesSettings.basic;case v.GET_MOBILE_SUPPORT_SETTINGS:if(r.getMobileSupportSettings.basic===undefined){r.getMobileSupportSettings.basic=o.serviceUrl+"/Channels(ChannelId='SAP_SMP')";}return r.getMobileSupportSettings.basic;case v.GET_EMAIL_SUPPORT_SETTINGS:if(r.getEmailSupportSettings.basic===undefined){r.getEmailSupportSettings.basic=o.serviceUrl+"/Channels(ChannelId='SAP_EMAIL')";}return r.getEmailSupportSettings.basic;case v.VALIDATE_WEBSOCKET_CHANNEL:if(r.getWebSocketValidity.basic===undefined){r.getWebSocketValidity.basic=o.serviceUrl+"/Channels('SAP_WEBSOCKET')";}return r.getWebSocketValidity.basic;case v.NOTIFICATIONS_BY_DATE_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+_);}break;case v.NOTIFICATIONS_BY_DATE_ASCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=CreatedAt%20asc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+_);}break;case v.NOTIFICATIONS_BY_PRIORITY_DESCENDING:y=o.serviceUrl+"/Notifications?$expand=Actions,NavigationTargetParams&$orderby=Priority%20desc&$filter=IsGroupHeader%20eq%20false&$skip="+x.skip+"&$top="+x.top;if(this._isIntentBasedConsumption()===true){y=y.concat("&intents%20eq%20"+_);}break;default:y="";}return y;};this._readSettingsFromServer=function(){var e=this._getRequestURI(v.GET_SETTINGS),x={requestUri:e,headers:{"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()}},y=new q.Deferred();O.request(x,function(_){y.resolve(_.results);},function(_){if(_.response&&_.response.statusCode===200&&_.response.body){y.resolve(_.response.body);}else{y.reject(_);L.error("Notification service - oData get settings failed: ",_,"sap.ushell.services.Notifications");}});return y.promise();};this._readMobileSettingsFromServer=function(){return this._readChannelSettingsFromServer(v.GET_MOBILE_SUPPORT_SETTINGS);};this._readEmailSettingsFromServer=function(){return this._readChannelSettingsFromServer(v.GET_EMAIL_SUPPORT_SETTINGS);};this._readChannelSettingsFromServer=function(e){var x=this._getRequestURI(e),y={requestUri:x,headers:{"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()}},_=new q.Deferred(),a1,b1;O.request(y,function(c1){if(typeof(c1.results)==="string"){a1=JSON.parse(c1.results);a1.successStatus=true;b1=JSON.stringify(a1);_.resolve(b1);}else{c1.results.successStatus=true;_.resolve(c1.results);}},function(c1){if(c1.response&&c1.response.statusCode===200&&c1.response.body){a1=JSON.parse(c1.response.body);a1.successStatus=true;b1=JSON.stringify(a1);_.resolve(b1);}else{_.resolve(JSON.stringify({successStatus:false}));L.error("Notification service - oData get settings failed: ",c1,"sap.ushell.services.Notifications");}});return _.promise();};this._checkWebSocketActivity=function(){var e=this._getRequestURI(v.VALIDATE_WEBSOCKET_CHANNEL),x={requestUri:e,headers:{"Accept-Language":sap.ui.getCore().getConfiguration().getLanguageTag()}},y=new q.Deferred(),_;O.request(x,function(a1){if(typeof(a1.results)==="string"){_=JSON.parse(a1.results);y.resolve(_.IsActive);}else{y.resolve(false);}},function(a1){if(a1.response&&a1.response.statusCode===200&&a1.response.body){_=JSON.parse(a1.response.body);y.resolve(_.IsActive);}else{y.resolve(false);L.error("Notification service - oData get settings failed: ",a1,"sap.ushell.services.Notifications");}});return y.promise();};this._writeSettingsEntryToServer=function(e){var x=this,y,_=this._getRequestURI(v.GET_SETTINGS)+"(NotificationTypeId="+e.NotificationTypeId+")",a1={requestUri:_,method:"PUT",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",DataServiceVersion:D,"X-CSRF-Token":H}};a1.data=JSON.parse(JSON.stringify(e));a1.data["@odata.context"]="$metadata#NotificationTypePersonalizationSet/$entity";y=new q.Deferred();O.request(a1,function(b1){y.resolve(b1);},function(b1){if(b1.response&&b1.response.statusCode===200&&b1.response.body){y.resolve(b1.response.body);}else if(x._csrfTokenInvalid(b1)&&(Y===false)){x._invalidCsrfTokenRecovery(y,x._writeSettingsEntryToServer,[e]);}else{y.reject(b1);L.error("Notification service - oData set settings entry failed: ",b1,"sap.ushell.services.Notifications");}});return y.promise();};this._updateNotificationsConsumers=function(){U.forEach(function(e){e();});};this._updateDependentNotificationsConsumers=function(){var e=this,x=new q.Deferred();f.forEach(function(y){if(e.bUpdateDependencyInitiatorExists===false){y.callback();}else if(y.dependent===true){y.callback(x.promise());}else{y.callback(x);}});};this._updateNotificationsCountConsumers=function(){g.forEach(function(e){e();});};this._updateAllConsumers=function(){this._updateNotificationsConsumers();this._updateNotificationsCountConsumers();this._updateDependentNotificationsConsumers();};this._getModel=function(){return m;};this._getMode=function(){return z;};this._setWorkingMode=function(){var e;if(o.intentBasedConsumption===true){C=this._getIntentsFromConfiguration(o.consumedIntents);if(C.length>0){h=true;}}if(this._isPackagedMode()){z=M.PACKAGED_APP;e=this._getIntentsFromConfiguration(window.fiori_client_appConfig.applications);if(e.length>0){C=e;}if(C.length>0){h=true;}this._registerForPush();this._readNotificationsData(true);this._setNativeIconBadgeWithDelay();return;}this._performFirstRead();};this._performFirstRead=function(){var e=this,x,y=this._readNotificationsData(true);y.done(function(){x=e._getFioriClientRemainingDelay();if(x<=0){e._fioriClientStep();}else{i=setTimeout(function(){e._fioriClientStep();},x);}F=true;}).fail(function(_){L.error("Notifications oData read failed. Error: "+_);return;});};this._fioriClientStep=function(){var e=this,x;if(this._isFioriClientMode()){z=M.FIORI_CLIENT;this._addPushNotificationHandler();x=this.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y,function(){});}).fail(function(){});}else{this._webSocketStep();}};this._webSocketStep=function(){z=M.WEB_SOCKET;this._establishWebSocketConnection();};this._webSocketRecoveryStep=function(){if(W===false){W=true;b=setTimeout(function(){this._webSocketStep();}.bind(this),l);}else{this._activatePollingAfterInterval();}};this._activatePollingAfterInterval=function(){var e=o.pollingIntervalInSeconds||I;clearTimeout(d);d=setTimeout(this._activatePolling.bind(this),e*1000);};this._activatePolling=function(){var e=o.pollingIntervalInSeconds||I;z=M.POLLING;this._readNotificationsData(true);clearTimeout(d);d=setTimeout(this._activatePolling.bind(this,e,false),(e*1000));};this._formatAsDate=function(e){return new Date(e);};this._notificationAlert=function(e){if(A===false){return;}var x,y=[],_=0;for(x in e){if(this.lastNotificationDate&&this._formatAsDate(e[x].CreatedAt)>this.lastNotificationDate){if(e[x].Priority==="HIGH"){y.push(e[x]);}}if(_<this._formatAsDate(e[x].CreatedAt)){_=this._formatAsDate(e[x].CreatedAt);}}if(this.lastNotificationDate&&y&&y.length>0){sap.ui.getCore().getEventBus().publish("sap.ushell.services.Notifications","onNewNotifications",y);}this.lastNotificationDate=_;};this._getFioriClientRemainingDelay=function(){return n-(new Date()-t);};this._establishWebSocketConnection=function(){var x=this,y=false,_;try{w=this._getWebSocketObjectObject(o.webSocketUrl||a,[S.SUPPORTED_PROTOCOLS.v10]);w.attachMessage(this,function(a1){_=a1.getParameter("pcpFields");if((_)&&(_.Command)&&(_.Command==="Notification")){x._readNotificationsData(true);}});w.attachOpen(this,function(){x._checkWebSocketActivity().done(function(a1){if(!a1){y=true;w.close();x._activatePollingAfterInterval();}});L.info("Notifications UShell service WebSocket: webSocket connection opened");});w.attachClose(this,function(a1){L.warning("Notifications UShell service WebSocket: attachClose called with code: "+a1.mParameters.code+" and reason: "+a1.mParameters.reason);if((!k)&&(!y)){x._webSocketRecoveryStep();}});w.attachError(this,function(){L.warning("Notifications UShell service WebSocket: attachError called!");});}catch(e){L.error("Exception occurred while creating new sap.ui.core.ws.SapPcpWebSocket. Message: "+e.message);}};this._isFioriClientMode=function(){return!(sap.FioriClient===undefined);};this._isPackagedMode=function(){return(window.fiori_client_appConfig&&window.fiori_client_appConfig.prepackaged===true);};this._setNativeIconBadge=function(e){if((sap.Push!==undefined)&&(sap.Push.setBadgeNumber!==undefined)){sap.Push.setBadgeNumber(e,function(){});}};this._setNativeIconBadgeWithDelay=function(){var e=this,x;setTimeout(function(){x=e.getUnseenNotificationsCount();x.done(function(y){e._setNativeIconBadge(y);}).fail(function(){});},4000);};this._getIntentsFromConfiguration=function(e){var x=[],y,_;if(e&&e.length>0){for(_=0;_<e.length;_++){y=e[_].intent;x.push(y);}}return x;};this._handlePushedNotification=function(e){var x,y,_,a1,b1=[],c1;if(e!==undefined){if((e.additionalData===undefined)||(e.additionalData.foreground===true)){this._readNotificationsData(true);}else{if(e.additionalData&&e.additionalData.NavigationTargetObject){y=e.additionalData.NavigationTargetObject;}else{y=e.NavigationTargetObject;}if(e.additionalData&&e.additionalData.NavigationTargetAction){_=e.additionalData.NavigationTargetAction;}else{_=e.NavigationTargetAction;}if(e.additionalData&&e.additionalData.NavigationTargetParam){a1=e.additionalData.NavigationTargetParam;}else{a1=e.NavigationTargetParam;}if(a1){if(typeof a1==="string"||a1 instanceof String){b1[0]=a1;}else if(Array.isArray(a1)===true){b1=a1;}}x=e.NotificationId;if((typeof hasher!=="undefined")&&(hasher.getHash()===y+"-"+_)){c1=sap.ui.getCore().byId("viewPortContainer");if(c1){c1.switchState("Center");}}u.toExternalWithParameters(y,_,b1);this.markRead(x);this._readNotificationsData(true);}}};this._registerForPush=function(){sap.Push.initPush(this._handlePushedNotification.bind(this));};this._addPushNotificationHandler=function(){document.addEventListener("deviceready",this._registerForPush.bind(this),false);};this._isIntentBasedConsumption=function(){return h;};this._getConsumedIntents=function(e){var x="",y;if(!this._isIntentBasedConsumption()){return x;}if(C.length>0){if(e!==v.GET_BADGE_NUMBER){x="&";}for(y=0;y<C.length;y++){if(e===v.GET_BADGE_NUMBER){if(y===0){x=C[y];}else{x=x+","+C[y];}}else{x=x+"NavigationIntent%20eq%20%27"+C[y]+"%27";}}}return x;};this._revalidateCsrfToken=function(){var e;H=undefined;Z=false;e=this.getNotificationsBufferBySortingType(v.NOTIFICATIONS_BY_DATE_DESCENDING,0,1);return e.promise();};this._csrfTokenInvalid=function(e){return(e.response&&(e.response.statusCode===403)&&(e.response.headers["x-csrf-token"]==="Required"));};this._invalidCsrfTokenRecovery=function(x,y,_){var a1=this,b1=this._revalidateCsrfToken(),c1;Y=true;b1.done(function(){c1=y.apply(a1,_);c1.done(function(e){Y=false;x.resolve(e);});c1.fail(function(e){Y=false;if(e.response&&e.response.statusCode===200&&e.response.body){x.resolve(e.response.body);}else{x.reject(e);}});});b1.fail(function(e){Y=false;x.reject(e);L.error("Notification service - oData markRead failed: ",e.message,"sap.ushell.services.Notifications");});};this._notificationsAscendingSortBy=function(e,_){e.sort(function(x,y){var a1=x[_],b1=y[_];if(a1===b1){a1=x.id;b1=y.id;}return b1>a1?-1:1;});return e;};this._getWebSocketObjectObject=function(e,x){return new S(e,x);};this.getOperationEnum=function(){return v;};this._readUserSettingsFlagsFromPersonalization=function(){this._getUserSettingsPersonalizer().then(function(e){e.getPersData().done(function(x){if(x===undefined){this._writeUserSettingsFlagsToPersonalization({highPriorityBannerEnabled:A});}else{A=x.highPriorityBannerEnabled;}B=true;G.resolve();}.bind(this)).fail(function(){L.error("Reading User Settings flags from Personalization service failed");});}.bind(this)).catch(function(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);L.error("Reading User Settings flags from Personalization service failed");});};this._writeUserSettingsFlagsToPersonalization=function(e){var x=new q.Deferred();this._getUserSettingsPersonalizer().then(function(y){y.setPersData(e).done(x.resolve).fail(x.reject);}).catch(function(y){L.error("Personalization service does not work:");L.error(y.name+": "+y.message);x.reject(y);});return x.promise();};this._getUserSettingsPersonalizer=function(){if(!this.oUserSettingsPersonalizerPromise){this.oUserSettingsPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(e){var x={keyCategory:e.constants.keyCategory.FIXED_KEY,writeFrequency:e.constants.writeFrequency.LOW,clientStorageAllowed:true};var y={container:"sap.ushell.services.Notifications",item:"userSettingsData"};return e.getPersonalizer(y,x);});}return this.oUserSettingsPersonalizerPromise;};this._updateCSRF=function(e){if((Z===true)||(e.headers===undefined)){return;}if(!this._getHeaderXcsrfToken()){H=e.headers["x-csrf-token"]||e.headers["X-CSRF-Token"]||e.headers["X-Csrf-Token"];}if(!this._getDataServiceVersion()){D=e.headers.DataServiceVersion||e.headers["odata-version"];}Z=true;};this._userSettingInitialization=function(){var e,x,y,_={settingsAvailable:false,mobileAvailable:false,emailAvailable:false},a1,b1,c1,d1;this._readUserSettingsFlagsFromPersonalization();e=this._readSettingsFromServer();x=this._readMobileSettingsFromServer();y=this._readEmailSettingsFromServer();a1=[e,x,y];e.done(function(){_.settingsAvailable=true;});x.done(function(e1){b1=JSON.parse(e1);c1=b1.successStatus;if(c1){P=e1?b1.IsActive:false;_.mobileAvailable=P;}else{P=false;_.mobileAvailable=false;}});y.done(function(e1){b1=JSON.parse(e1);d1=b1.successStatus;if(d1){Q=e1?b1.IsActive:false;_.emailAvailable=Q;}else{Q=false;_.emailAvailable=false;}});q.when.apply(q,a1).then(function(){K.resolve(_);});};this._closeConnection=function(){if(!k){if(z===M.WEB_SOCKET&&w){w.close();k=true;}if(z===M.POLLING&&d){clearTimeout(d);k=true;}}};this._resumeConnection=function(){if(k){k=false;this._webSocketStep();}};}
N.hasNoAdapter=true;return N;},true);
sap.ui.predefine('sap/ushell/services/PageBuilding',["sap/ushell_abap/pbServices/ui2/Factory","sap/ushell_abap/pbServices/ui2/Page","sap/ui/thirdparty/jquery"],function(F,P,q){"use strict";
function a(A,c){this.getFactory=function(){return A.getFactory();};this.getPage=function(p){return A.getFactory().createPage(p);};this.getPageSet=function(i){var d=new q.Deferred();A.getFactory().createPageSet(i,d.resolve.bind(d),d.reject.bind(d));return d.promise();};}
a.hasNoAdapter=false;return a;},true);
sap.ui.predefine('sap/ushell/services/PagePersistence',[],function(){"use strict";
function P(){this._init.apply(this,arguments);}
P.prototype._init=function(a,s){this._oServiceConfiguration=s;this.oAdapter=a;this._pagesCache=[];};
P.prototype.getPage=function(i){if(!this._pagesCache[i]){this._pagesCache[i]=this.oAdapter.getPage(i);}return this._pagesCache[i];};
P.prototype.getPages=function(i){return this.oAdapter.getPages(i);};
P.hasNoAdapter=false;return P;});
sap.ui.predefine('sap/ushell/services/PageReferencing',["sap/ushell/services/_PageReferencing/PageReferencer"],function(P){"use strict";
function a(){}
a.prototype.createReferencePage=function(p){return P.createReferencePage(p);};
a.hasNoAdapter=true;return a;});
sap.ui.predefine('sap/ushell/services/Pages',["sap/base/Log","sap/ushell/utils/RestrictedJSONModel","sap/base/util/deepClone","sap/base/util/extend","sap/base/util/deepExtend","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(L,R,d,e,a,r,u,C,b,c,f){"use strict";var P=function(){this.COMPONENT_NAME="sap/ushell/services/Pages";this._oCdmServicePromise=sap.ushell.Container.getServiceAsync("CommonDataModel");this._oURLParsingServicePromise=sap.ushell.Container.getServiceAsync("URLParsing");this._oCSTRServicePromise=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution");this._oPagesModel=new R({pages:[]});this._bImplicitSaveEnabled=true;this._aPagesToBeSaved=[];};
P.prototype._generateId=function(p){var i=[];var o=this.getModel().getProperty(this.getPagePath(p));o.sections.forEach(function(s){i.push(s.id);s.visualizations.forEach(function(v){i.push(v.id);});});return u.generateUniqueId(i);};
P.prototype.getModel=function(){return this._oPagesModel;};
P.prototype.enableImplicitSave=function(E){this._bImplicitSaveEnabled=E;};
P.prototype.getPageIndex=function(p){var g=this._oPagesModel.getProperty("/pages");for(var i=0;i<g.length;++i){if(g[i].id===p){return i;}}return undefined;};
P.prototype.getPagePath=function(p){var i=this.getPageIndex(p);if(typeof i==="undefined"){return"";}return"/pages/"+i;};
P.prototype.loadPage=function(p){var s=this.getPagePath(p);if(s){return Promise.resolve(s);}return this._oCdmServicePromise.catch(function(E){L.error("Pages - loadPage: Couldn't resolve CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([o.getPage(p),o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes()]);}).then(function(g){var o=g[0];var v=g[1];var A=g[2];var V=g[3];return this._getModelForPage(o,v,A,V);}.bind(this)).then(function(m){var i=this._oPagesModel.getProperty("/pages/").length;var n="/pages/"+i;this._oPagesModel._setProperty(n,m);return n;}.bind(this)).catch(function(E){L.error("Pages - loadPage: Failed to gather site data.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));};
P.prototype.findVisualization=function(p,s,v,V){return this._oCdmServicePromise.catch(function(E){L.error("Pages - findVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([this.loadPage(p),o.getCachedVisualizations(),o.getApplications()]).then(function(g){var h=g[0];var i=this.getModel().getProperty(h+"/sections")||[];return i.reduce(function(j,k,l){if(s&&k.id!==s){return j;}var m=k.visualizations.reduce(function(n,q,t){if(v&&q.vizId===v||V&&q.id===V){n.push(t);}return n;},[]);if(m.length){j.push({pageId:p,sectionIndex:l,vizIndexes:m});}return j;},[]);}.bind(this)).catch(function(E){L.error("Pages - findVisualization: Couldn't load page, get visualizations or applications.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));}.bind(this));};
P.prototype.moveVisualization=function(p,s,S,t,T){if(s===t&&S===T){return Promise.resolve({visualizationIndex:T});}this.setPersonalizationActive(true);var o=this._oPagesModel.getProperty("/pages/"+p);var g=o.id;var h=o.sections[s];var i=o.sections[t];var j=h.id;var k=i.id;var m=h.visualizations[S];var M=m.id;h.visualizations.splice(S,1);if(T===-1){T=i.visualizations.length;}i.visualizations.splice(T,0,m);var l;if(i.visualizations[T]){l=T-1;}else{l=i.visualizations.length-2;}var n;if(i.visualizations[l]){n=i.visualizations[l].id;}if(h.default&&!h.visualizations.length){o.sections.splice(s,1);}this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(q){return q.getPage(g);}).catch(function(E){L.error("Pages - moveVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(q){var v=q.payload.sections[j];var w=v.layout.vizOrder;var x=v.viz;var y=q.payload.sections[k];var z=y.layout.vizOrder;var A=y.viz;var B=d(x[M]);var D=w.indexOf(M);w.splice(D,1);var E=n?z.indexOf(n)+1:0;z.splice(E,0,M);if(j!==k){delete x[M];A[M]=B;}if(v.default&&!Object.keys(x).length){delete q.payload.sections[j];q.payload.layout.sectionOrder.splice(s,1);}return this._conditionalSavePersonalization(g);}.bind(this)).then(function(){return{visualizationIndex:T};}).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.deleteVisualization=function(p,s,S){var o=this._oPagesModel.getProperty("/pages/"+p);var g=o.sections[s];if(g.default&&g.visualizations.length<2){return this.deleteSection(p,s);}this.setPersonalizationActive(true);var h=g.visualizations;var i=h[S];h.splice(S,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(j){return j.getPage(o.id);}).catch(function(E){L.error("Pages - deleteVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(j){var k=j.payload.sections[g.id].layout.vizOrder;var v=j.payload.sections[g.id].viz;var l=k.indexOf(i.id);delete v[i.id];if(l>-1){k.splice(l,1);}return this._conditionalSavePersonalization(j.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype._getSectionIndex=function(p,s){var S=this.getModel().getProperty(p+"/sections")||[],i=0;for(;i<S.length;i+=1){if(S[i].id===s){return i;}}};
P.prototype._getVisualizationData=function(p,v,V,A,o,g,U,s){var h=A||{vizId:v};var S={applications:o,visualizations:V,vizTypes:g};var i=c.getVizData(S,h,U,s);if(!i.id){i.id=this._generateId(p);}return i;};
P.prototype.addVisualization=function(p,s,v){return this._oCdmServicePromise.catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: CDM Service cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){return Promise.all([this.loadPage(p),o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes(),this._oURLParsingServicePromise]).catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: Failed to load page, get visualizations or get applications.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){var h=g[0],U=g[4],S=this._getSectionIndex(h,s),j=this.getModel().getProperty(h+"/sections")||[],V=this._getVisualizationData(p,v,g[1],null,g[2],g[3],U);var D;for(var i=0;i<j.length;i++){if(j[i].default){D=i;}}if(S!==undefined||D!==undefined){this.setPersonalizationActive(true);var k=S!==undefined?S:D||0,l=h+"/sections/"+k+"/visualizations";this.getModel().getProperty(l).push(V);this.getModel().refresh();return o.getPage(p).catch(function(E){L.error("Pages - addVisualization: Personalization cannot be saved: Failed to get page.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(n){var q=n.payload.sections[s||n.payload.layout.sectionOrder[0]];q.layout.vizOrder.push(V.id);q.viz[V.id]={id:V.id,vizId:v};return this._conditionalSavePersonalization(p);}.bind(this));}var m=parseInt(h.split("/")[2],10);return this.addSection(m,0,{title:r.i18n.getText("DefaultSection.Title"),default:true,visualizations:[V]});}.bind(this));}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.copyVisualization=function(p,s,v){var i=v.isBookmark;if(!i){return this.addVisualization(p,s,v.vizId);}return this.addBookmarkToPage(p,{title:v.title,subtitle:v.subtitle,url:v.targetURL,icon:v.icon,info:v.info,serviceUrl:v.indicatorDataSource?v.indicatorDataSource.path:"",serviceRefreshInterval:v.indicatorDataSource?v.indicatorDataSource.refresh:"",numberUnit:v.numberUnit,vizType:v.vizType,oVizConfig:v.vizConfig},s);};
P.prototype.moveSection=function(p,s,t){if(s===t){return Promise.resolve();}this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections");var m=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s);var M=m.id;S.splice(s,1);if(s<t){t--;}S.splice(t,0,m);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(o){return o.getPage(g);}).catch(function(E){L.error("Pages - moveSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){var h=o.payload.layout.sectionOrder;h.splice(h.indexOf(M),1);h.splice(t,0,M);return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.addSection=function(p,s,S){this.setPersonalizationActive(true);var o=S||{},g=this._oPagesModel.getProperty("/pages/"+p+"/sections"),h=this._oPagesModel.getProperty("/pages/"+p+"/id");var n={id:o.id!==undefined?o.id:this._generateId(h),title:o.title!==undefined?o.title:"",visible:o.visible!==undefined?o.visible:true,preset:o.preset!==undefined?o.preset:false,locked:o.locked!==undefined?o.locked:false,default:o.default!==undefined?o.default:false,visualizations:o.visualizations!==undefined?o.visualizations:[]};g.splice(s,0,n);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(i){return i.getPage(h);}).catch(function(E){L.error("Pages - addSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(j){var k={id:n.id,title:n.title,visible:n.visible,preset:n.preset,locked:n.locked,default:n.default,layout:{vizOrder:[]},viz:{}};if(n.visualizations){var i=0,v;for(;i<n.visualizations.length;i++){v=n.visualizations[i];k.layout.vizOrder.push(v.id);if(v.isBookmark){k.viz[v.id]=c.getVizRef(v);}else{k.viz[v.id]={id:v.id,vizId:v.vizId};}}}j.payload.layout.sectionOrder.splice(s,0,n.id);j.payload.sections[n.id]=k;return this._conditionalSavePersonalization(h);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.deleteSection=function(p,s){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections");var h=S[s].id;S.splice(s,1);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(o){return o.getPage(g);}).catch(function(E){L.error("Pages - deleteSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){delete o.payload.sections[h];o.payload.layout.sectionOrder.splice(s,1);return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.setSectionVisibility=function(p,s,v){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s+"/id");var o=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s);if(o.visible===v){return Promise.resolve();}o.visible=v;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(h){return h.getPage(g);}).catch(function(E){L.error("Pages - setSectionVisibility: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(h){h.payload.sections[S].visible=v;return this._conditionalSavePersonalization(g);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.renameSection=function(p,s,n){this.setPersonalizationActive(true);var o=this._oPagesModel.getProperty("/pages/"+p);var S=o.sections[s];S.title=n;this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(g){return g.getPage(o.id);}).catch(function(E){L.error("Pages - renameSection: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){g.payload.sections[S.id].title=n;return this._conditionalSavePersonalization(g.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.resetSection=function(p,s){this.setPersonalizationActive(true);var g=this._oPagesModel.getProperty("/pages/"+p+"/id");var S=this._oPagesModel.getProperty("/pages/"+p+"/sections/"+s+"/id");return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getPage(g),o.getOriginalPage(g),o.getCachedVizTypes()]);}).catch(function(E){L.error("Pages - resetSection: Personalization cannot be saved: Failed to gather data from CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(h){var v=h[0];var A=h[1];var o=h[2];var O=h[3];var V=h[4];return Promise.all([this._getModelForPage(O,v,A,V),o,O]);}.bind(this)).then(function(h){var o=h[0];var i=h[1];var O=h[2];var j=d(o.sections.find(function(m){return m.id===S;}),20);var k=j.visualizations.map(function(v){return v.id;});var l=this._oPagesModel.getProperty("/pages/"+p);l.sections.forEach(function(m){if(j.id!==m.id){m.visualizations.forEach(function(v){if(k.indexOf(v.id)!==-1){var n=this._generateId(g);var V=d(i.payload.sections[m.id].viz[v.id]);delete i.payload.sections[m.id].viz[v.id];var q=i.payload.sections[m.id].layout.vizOrder.indexOf(V.id);V.id=n;i.payload.sections[m.id].viz[n]=V;i.payload.sections[m.id].layout.vizOrder[q]=n;v.id=n;}}.bind(this));}}.bind(this));this._oPagesModel._setProperty("/pages/"+p+"/sections/"+s,j);i.payload.sections[j.id]=O.payload.sections[j.id];return this._conditionalSavePersonalization(i.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.resetPage=function(p){this.setPersonalizationActive(true);var s=this._oPagesModel.getProperty("/pages/"+p+"/id");return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getPage(s),o.getOriginalPage(s),o.getCachedVizTypes()]);}).catch(function(E){L.error("Pages - resetPage: Personalization cannot be saved: Failed to gather data from CDM Service.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(g){var v=g[0];var A=g[1];var o=g[2];var O=g[3];var V=g[4];return Promise.all([this._getModelForPage(O,v,A,V),o,O]);}.bind(this)).then(function(g){var o=g[0];var h=g[1];var O=g[2];this._oPagesModel._setProperty("/pages/"+p,o);h.payload=d(O.payload);return this._conditionalSavePersonalization(h.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype.setPersonalizationActive=function(s){if(!this._bDirtyState&&s===true){this._bDirtyState=true;this._oCopiedModelData=d(this._oPagesModel.getProperty("/"),20);}else if(this._bDirtyState&&s===false){this._oPagesModel._setData(this._oCopiedModelData);this._bDirtyState=false;}};
P.prototype.savePersonalization=function(p){var g;if(!p){g=d(this._aPagesToBeSaved);}else{g=[p];}return this._oCdmServicePromise.then(function(o){return Promise.all(g.map(function(s){var i=this._aPagesToBeSaved.indexOf(s);this._aPagesToBeSaved.splice(i,1);return new Promise(function(h,j){o.save(s).then(h,j);}).catch(function(E){if(this._aPagesToBeSaved.indexOf(s)===-1){this._aPagesToBeSaved.push(s);}return Promise.reject(E);}.bind(this));}.bind(this)));}.bind(this)).then(function(){this._bDirtyState=false;}.bind(this)).catch(function(E){L.error("Pages - savePersonalization: Personalization cannot be saved: CDM Service cannot be retrieved or the save process encountered an error.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this));};
P.prototype._conditionalSavePersonalization=function(p){if(this._bImplicitSaveEnabled){return this.savePersonalization(p);}if(this._aPagesToBeSaved.indexOf(p)===-1){this._aPagesToBeSaved.push(p);}return Promise.resolve();};
P.prototype._getModelForPage=function(p,v,g,h){return Promise.all([this._oCSTRServicePromise,this._oURLParsingServicePromise]).catch(function(E){return Promise.reject(E);}).then(function(i){var o=i[0];var U=i[1];var j={id:p.identification.id||"",title:p.identification.title||"",description:"",sections:[]};var E=C.last("/core/catalog/enableHideGroups");return Promise.all(p.payload.layout.sectionOrder.map(function(s){var k=p.payload.sections[s];var S={id:k.id||"",title:k.default?r.i18n.getText("DefaultSection.Title"):k.title||"",visualizations:[],visible:!E||(k.visible!==undefined?k.visible:true),locked:k.locked!==undefined?k.locked:false,preset:k.preset!==undefined?k.preset:true,default:k.default!==undefined?k.default:false};j.sections.push(S);return Promise.all(k.layout.vizOrder.map(function(l){var V=k.viz[l],m=V.vizId;return o.getSystemContext(V.contentProviderId).then(function(n){var q=this._getVisualizationData(p.identification.id,m,v,V,g,h,U,n);S.visualizations.push(q);return this._isIntentSupported(q,o).then(function(I){if(!I){var t=S.visualizations.findIndex(function(w){return w.id===q.id;});S.visualizations.splice(t,1);L.warning("The visualization "+q.vizId+" is filtered out, because it does not have a supported intent.");}});}.bind(this));}.bind(this)));}.bind(this))).then(function(){return j;});}.bind(this));};
P.prototype.removeUnsupportedVisualizations=function(p,s){return this._oCSTRServicePromise.then(function(o){var v=this.getModel().getProperty("/pages/"+p+"/sections/"+s+"/visualizations/");var g=[];for(var i=v.length-1;i>=0;--i){g.push(this._isIntentSupported(v[i],o).then(function(h,I){if(!I){v.splice(h,1);}return I;}.bind(this,i)));}return Promise.all(g).then(function(h){if(h.indexOf(false)!==-1){this.getModel().refresh();}}.bind(this));}.bind(this));};
P.prototype._isIntentSupported=function(v,o){if(v.target===undefined){return Promise.resolve(false);}if(v.target.type==="URL"){if(f.isStandardVizType(v.vizType)){return Promise.resolve(!!v.target.url);}return Promise.resolve(true);}return new Promise(function(g,h){o.isIntentSupported([v.targetURL]).then(function(s){g(s[v.targetURL].supported);}).fail(function(){g(false);});});};
P.prototype.addBookmarkToPage=function(p,g,s,h){if(!p){return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: No page id is provided.");}var v=c.getBookmarkVizTypeIds(g);this.setPersonalizationActive(true);return Promise.all([this._oCdmServicePromise,this._oCSTRServicePromise]).then(function(S){var o=S[0];var i=S[1];var V=v.map(function(j){return o.getVizType(j);});return Promise.all(V).then(function(j){var k={};j.forEach(function(l,I){k[v[I]]=l;return k;});return Promise.all([this.loadPage(p),this._oURLParsingServicePromise,k,i.getSystemContext(h)]);}.bind(this));}.bind(this)).catch(function(E){L.error("Pages - addBookmarkToPage: Personalization cannot be saved: Could not load page.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(i){var j=i[0];var U=i[1];var V=i[2];var S=i[3];var o={id:this._generateId(p),vizType:g.vizType,title:g.title,subTitle:g.subtitle,icon:g.icon,info:g.info,numberUnit:g.numberUnit,target:b.toTargetFromHash(g.url,U),indicatorDataSource:{path:g.serviceUrl,refresh:g.serviceRefreshInterval},vizConfig:g.vizConfig,isBookmark:true};if(h){o.contentProviderId=h;}var k=this._getVisualizationData(p,undefined,{},o,{},V,U,S);var l=parseInt(/pages\/(\d+)/.exec(j)[1],10);var m=this._oPagesModel.getProperty(j);var n;if(s){n=m.sections.find(function(q){return q.id===s;});if(!n){L.error("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");return Promise.reject("Pages - addBookmarkToPage: Adding bookmark tile failed: specified section was not found in the page.");}}else{n=m.sections.find(function(q){return q.default;});if(!n){return this.addSection(l,0,{title:r.i18n.getText("DefaultSection.Title"),default:true,visualizations:[k]});}}n.visualizations.push(k);this._oPagesModel.refresh();return this._oCdmServicePromise.then(function(q){return q.getPage(p);}).catch(function(E){L.error("Pages - addBookmarkToPage: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(q){var t=q.payload.sections[n.id];t.layout.vizOrder.push(k.id);t.viz[k.id]=c.getVizRef(k);return this._conditionalSavePersonalization(p);}.bind(this));}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype._visitPages=function(v){return this._oCdmServicePromise.then(function(o){return o.getAllPages();}).then(function(p){p=p||[];p.forEach(function(o){v(o);});});};
P.prototype._visitSections=function(v){return this._visitPages(function(p){var s=p.payload&&p.payload.sections||{};Object.keys(s).forEach(function(k){v(s[k],p);});});};
P.prototype._visitVizReferences=function(v){return this._visitSections(function(s,p){var V=s.viz||{};Object.keys(V).forEach(function(k){v(V[k],s,p);});});};
P.prototype._findBookmarks=function(i){var v=[];return this._oURLParsingServicePromise.then(function(U){var t=b.toTargetFromHash(i.url,U);t=c.harmonizeTarget(t);return this._visitVizReferences(function(V,s,p){if(V.isBookmark&&i.vizType===V.vizType&&(V.contentProviderId||"")===(i.contentProviderId||"")&&b.isSameTarget(t,V.target)){v.push({vizRefId:V.id,sectionId:s.id,pageId:p.identification.id});}}).then(function(){return v;});}.bind(this));};
P.prototype.countBookmarks=function(i){return this._findBookmarks(i).then(function(F){return F.length;});};
P.prototype.deleteBookmarks=function(i,p,s){var D=0;return this._findBookmarks(i).then(function(v){return v.reduce(function(o,I){if(p&&I.pageId!==p){return o;}if(s&&I.sectionId!==s){return o;}return o.then(function(){return this.findVisualization(I.pageId,I.sectionId,null,I.vizRefId);}.bind(this)).then(function(l){var g=l[0];var h=this.getPageIndex(g.pageId);return this.deleteVisualization(h,g.sectionIndex,g.vizIndexes[0]);}.bind(this)).then(function(){D=D+1;}).catch(function(){});}.bind(this),Promise.resolve());}.bind(this)).then(function(){return D;});};
P.prototype.updateBookmarks=function(i,p){if(!i||!i.url||typeof i.url!=="string"){L.error("Fail to update bookmark. No valid URL");return Promise.reject("Invalid URL provided");}if(!p||typeof p!=="object"){L.error("Fail to update bookmark. No valid parameters, URL is: "+i.url);return Promise.reject("Missing parameters");}var U=0;return Promise.all([this._oURLParsingServicePromise,this._findBookmarks(i)]).then(function(g){var o=g[0];var v=g[1];return v.reduce(function(h,I){return h.then(function(){return this.findVisualization(I.pageId,I.sectionId,null,I.vizRefId);}.bind(this)).then(function(l){var j=l[0];var k=this.getPageIndex(j.pageId);var V={subtitle:p.subtitle,icon:p.icon,info:p.info,numberUnit:p.numberUnit,indicatorDataSource:{path:p.serviceUrl,refresh:p.serviceRefreshInterval},vizConfig:p.vizConfig};if(p.title){V.title=p.title;}if(p.url){V.target=c.harmonizeTarget(b.toTargetFromHash(p.url,o));}return this.updateVisualization(k,j.sectionIndex,j.vizIndexes[0],V);}.bind(this)).then(function(){U=U+1;}).catch(function(){});}.bind(this),Promise.resolve());}.bind(this)).then(function(){return U;});};
P.prototype.updateVisualization=function(p,s,S,v){return this._oCdmServicePromise.then(function(o){return Promise.all([o.getCachedVisualizations(),o.getApplications(),o.getCachedVizTypes(),this._oURLParsingServicePromise]);}.bind(this)).then(function(g){var V=g[0];var A=g[1];var o=g[2];var U=g[3];var h=this._oPagesModel.getProperty("/pages/"+p);var i=h.sections[s];var j=i.visualizations;var k=j[S];var l={};this.setPersonalizationActive(true);if(this._isPropertyChanged(k.title,v.title)){l.title=v.title;}if(v.target&&!b.isSameTarget(k.target,v.target)){l.target=v.target;}if(this._isPropertyChanged(k.subtitle,v.subtitle)){l.subtitle=v.subtitle;}if(this._isPropertyChanged(k.icon,v.icon)){l.icon=v.icon;}if(this._isPropertyChanged(k.info,v.info)){l.info=v.info;}if(this._isPropertyChanged(k.numberUnit,v.numberUnit)){l.numberUnit=v.numberUnit;}if(this._isPropertyChanged(k.displayFormatHint,v.displayFormatHint)){l.displayFormatHint=v.displayFormatHint;}if(v.indicatorDataSource&&k.indicatorDataSource&&(this._isPropertyChanged(k.indicatorDataSource.path,v.indicatorDataSource.path)||this._isPropertyChanged(k.indicatorDataSource.refresh,v.indicatorDataSource.refresh))){l.indicatorDataSource=d(k.indicatorDataSource);e(l.indicatorDataSource,v.indicatorDataSource);}if(v.vizConfig){k.vizConfig=a({},k.vizConfig,v.vizConfig);l.vizConfig=k.vizConfig;}e(k,l);var m=c.getVizRef(k);k=this._getVisualizationData(h.id,m.vizId,V,m,A,o,U);j[S]=k;this._oPagesModel.refresh();return this._updateVisualizationCDMData(h.id,i.id,k.id,l);}.bind(this));};
P.prototype._updateVisualizationCDMData=function(p,s,v,U){return this._oCdmServicePromise.then(function(o){return o.getPage(p);}).catch(function(E){L.error("Pages - updateVisualization: Personalization cannot be saved: CDM Service or Page cannot be retrieved.",E,this.COMPONENT_NAME);return Promise.reject(E);}.bind(this)).then(function(o){var V=o.payload.sections[s].viz[v];var g=c.getVizRef(U);g.vizConfig=U.vizConfig;e(V,g);return this._conditionalSavePersonalization(o.identification.id);}.bind(this)).catch(function(E){this.setPersonalizationActive(false);return Promise.reject(E);}.bind(this));};
P.prototype._isPropertyChanged=function(o,n){if((n||n==="")&&o!==n){return true;}return false;};
P.hasNoAdapter=true;return P;},true);
sap.ui.predefine('sap/ushell/services/Personalization',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/ContextContainer","sap/ushell/services/_Personalization/WindowAdapter","sap/ushell/services/_Personalization/TransientPersonalizer","sap/ushell/services/_Personalization/PersonalizationContainer","sap/ushell/services/_Personalization/Personalizer","sap/ushell/services/_Personalization/VariantSetAdapter","sap/ushell/services/_Personalization/Variant","sap/ushell/services/_Personalization/VariantSet","sap/ushell/services/_Personalization/WindowAdapterContainer","sap/ui/base/ManagedObject","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,p,a,C,W,T,P,b,V,c,d,e,M,q,L){"use strict";
function f(A,o,s,g){this._oConfig=(g&&g.config)||{};this._oAppVariantAdapterWithBackendAdapter=this._configureAppVariantStorage(this._oConfig.appVariantStorage);this._oAdapterWithBackendAdapter={lazy:false,instance:new W(this,A)};this._oAdapterWindowOnly={lazy:false,instance:new W(this,undefined)};this._oContainerMap=new u.Map();this._oPendingOperationsMap=new u.Map();}
f.prototype.SAVE_DEFERRED_DROPPED="Deferred save dropped (OK) - Data superseeded by subsequent save";f.prototype.constants=a;
f.prototype._configureAppVariantStorage=function(A){var t=this,D="sap.ushell.adapters.AppVariantPersonalizationAdapter";if(!A){A={adapter:{module:D}};}if(Object.keys(A).length===0||A.enabled===false){return;}var s=(A.adapter&&A.adapter.module)||D,g=s.split(".").join("/");var h=function(){t._oAppVariantAdapterLoadPromise=t._oAppVariantAdapterLoadPromise||(function(){var o=new q.Deferred();try{sap.ui.require([g],R);}catch(r){o.reject(r);}function R(i){try{var j=new i();var w=new W(t,j);o.resolve(w);}catch(E){o.reject(E);}}return o.promise();})();return t._oAppVariantAdapterLoadPromise;};return{lazy:true,create:h};};
f.prototype.getGeneratedKey=function(){return u.generateRandomKey();};
f.prototype.getPersonalizer=function(o,s,g){g=g||this._getApplicationComponent();return new b(this,this._oAdapterWithBackendAdapter.instance,o,s,g);};
f.prototype._getApplicationComponent=function(){var o;var O=M._sOwnerId;if(O){o=sap.ui.getCore().getComponent(O);if(o instanceof sap.ui.core.UIComponent){return o;}}return undefined;};
f.prototype.getTransientPersonalizer=function(){return new T();};
f.prototype.getContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,false,o);};
f.prototype.createEmptyContainer=function(s,S,o){o=o||this._getApplicationComponent();return this._createContainer(s,S,true,o);};
f.prototype._createContainer=function(s,S,g,o){var t=this,l,h,i,j,A,k,U,D=new q.Deferred();if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}l=p.isLaunchpadReload();U=!!(p.isAppVariant(o)&&(!S||!S.shared)&&this._oAppVariantAdapterWithBackendAdapter);A=p.adjustScope(S,l);k=p.addContainerPrefix(s);if(U){var m=o.getManifestObject();A.component=o;A.appVarId=m.getEntry("/sap.ui5/appVariantId");A.appVersion=m.getEntry("/sap.app/applicationVersion/version");k+="#"+m.getEntry("/sap.ui5/appVariantId");}i=U?this._oAppVariantAdapterWithBackendAdapter:this._oAdapterWithBackendAdapter;h=t._oAdapterWindowOnly;j=p.pickAdapter(S,l,h,i);p.loadAdapter(j).then(function(n){var r,v=new C(t,n,k,A,o);var w=(n&&n.supportsGetWithoutSubsequentLoad===true);if(g&&w){r=new q.Deferred();r.resolve(v);}else{r=v.load();}r.fail(function(){D.reject();}).done(function(){if(g||v._isExpired()){v.clear();}D.resolve(v);});},function(E){D.reject(E);});return D.promise();};
f.prototype.delContainer=function(s,S){var D={},o,g="",t=this;S=t._adjustScope(S,false);g=p.addContainerPrefix(s);D=new q.Deferred();o=t._pendingContainerOperations_cancelAddNext(s,null);o.always(function(){t.getContainer(s,S).fail(function(){t._pendingContainerOperations_cancelAddNext(s,D);D.reject();}).done(function(){var A;t._pendingContainerOperations_cancelAddNext(s,D);A=S.validity===0?t._oAdapterWindowOnly:t._oAdapterWithBackendAdapter;p.loadAdapter(A).then(function(l){l.delAdapterContainer(g,S).fail(function(){D.reject();}).done(function(){D.resolve();});},function(){D.reject();});});});return D.promise();};
f.prototype._pendingContainerOperations_flushAddNext=function(s,D){var o,S;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;if(typeof o._sapFnSave==="function"){S=o._sapFnSave;o._sapFnSave=undefined;S();}return o;};
f.prototype._pendingContainerOperations_cancelAddNext=function(s,D){var o;o=this._oPendingOperationsMap.get(s);if(!o){o=new q.Deferred();o.resolve();}if(D!==null){this._oPendingOperationsMap.put(s,D);}if(!o||o.state()!=="pending"){return o;}if(o._sapTimeoutId){clearTimeout(o._sapTimeoutId);o._sapTimeoutId=undefined;o.resolve(f.prototype.SAVE_DEFERRED_DROPPED);}return o;};
f.prototype.getPersonalizationContainer=function(s){var g="",o={},D={};if(typeof s!=="string"){throw new u.Error("sContainerKey is not a string: sap.ushell.services.Personalization"," ");}g=p.addContainerPrefix(s);if(this._oContainerMap.containsKey(g)){return this._oContainerMap.get(g).promise();}D=new q.Deferred();o=new P(this._oAdapterWithBackendAdapter.instance,g);o.done(function(h){D.resolve(h);}).fail(function(h){D.reject(h);});this._oContainerMap.put(g,D);return D.promise();};
f.prototype.delPersonalizationContainer=function(s){var D={},g="",t=this;g=p.addContainerPrefix(s);D=new q.Deferred();this.getPersonalizationContainer(s).fail(function(){D.reject();}).done(function(){t._oAdapterWithBackendAdapter.instance.delAdapterContainer(g).fail(function(){D.reject();}).done(function(){t._oContainerMap.remove(g);D.resolve();});});return D.promise();};
f.prototype._getBackendAdapter=function(){return this._oAdapterWithBackendAdapter.instance._oBackendAdapter;};
f.prototype.resetEntirePersonalization=function(){var A=this._getBackendAdapter();return this.isResetEntirePersonalizationSupported().then(function(i){if(i){return A.resetEntirePersonalization();}return Promise.reject();});};
f.prototype.isResetEntirePersonalizationSupported=function(){var A=this._getBackendAdapter();if(typeof A.resetEntirePersonalization!=="function"){return Promise.resolve(false);}if(typeof A.isResetEntirePersonalizationSupported==="function"){return A.isResetEntirePersonalizationSupported().then(function(i){return i;}).catch(function(E){L.error("isResetEntirePersonalizationSupported failed with error: "+E.toString());return Promise.reject(E);});}return Promise.resolve(true);};
f.prototype._adjustScope=p.adjustScope;f.hasNoAdapter=false;f.ContextContainer=C;f.Variant=c;f.VariantSet=d;f.VariantSetAdapter=V;f.WindowAdapter=W;f.WindowAdapterContainer=e;return f;},true);
sap.ui.predefine('sap/ushell/services/PluginManager',["sap/ushell/services/_PluginManager/Extensions","sap/base/Log","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ushell/utils","sap/ushell/components/applicationIntegration/application/PostMessageAPIInterface","sap/ushell/library"],function(g,L,q,U,u,P,a){"use strict";var S="sap.ushell.services.PluginManager",b="sap-ushell-plugin-type",c="RendererExtensions",d="sap.ushell.components.shell.defaults",s=[c,"EarlyLoading","UserDefaults","UserImage","ContentProvider","AppWarmup"],f=a.UI5ComponentType;
function h(C,p,o){var t=this;this._oPluginCollection={};this._oCategoryLoadingProgress={};this._mInitializedComponentPromise={};this._sPluginAgentsNames="";this._oConfig=(o&&o.config)||{};if(this._oConfig.isBlueBox===undefined){this._oConfig.isBlueBox=false;}s.forEach(function(e){t._oPluginCollection[e]={};t._oCategoryLoadingProgress[e]=new q.Deferred();});this._handlePluginCreation=function(e,i,j,k){var t=this,l=(t._oPluginCollection[e])[i];u.setPerformanceMark("FLP -- PluginManager.loadPlugin["+e+"]["+i+"]");try{if(l.hasOwnProperty("component")){if(t._mInitializedComponentPromise.hasOwnProperty(l.component)){t._mInitializedComponentPromise[l.component].then(function(){t._instantiateComponent(l,j,k);},function(){t._instantiateComponent(l,j,k);});}else{t._mInitializedComponentPromise[l.component]=t._instantiateComponent(l,j,k);}}else{L.error("Invalid plugin configuration. The plugin "+i+" must contain a <component> key",S);}}catch(E){L.error("Error while loading bootstrap plugin: "+l.component||"",S);if(j){j.reject(E);}}};this._getFileNameForXhrAuth=function(){return"Component-preload.js";};this._handleXhrAuthentication=function(A,e){var x;if(A&&["true",true,"X"].indexOf(A["sap-ushell-xhr-authentication"])>-1){if(!e){L.error(["Illegal state: configuration parameter 'sap-ushell-xhr-authentication-timeout' set, but no component URL specified.","XHR authentication request will not be sent. Please check the target mapping definitions for plug-ins","and the application index."].join(" "),undefined,S);return q.when();}if(A.hasOwnProperty("sap-ushell-xhr-authentication-timeout")){x=parseInt(A["sap-ushell-xhr-authentication-timeout"],10);if(isNaN(x)){L.error(["Invalid value for configuration parameter 'sap-ushell-xhr-authentication-timeout' for plug-in component with URL '",e,"': '",A["sap-ushell-xhr-authentication-timeout"],"' is not a number. Timeout will be ignored."].join(""),undefined,S);}else{sap.ushell.Container.setXhrLogonTimeout(e,x);}}return q.ajax(e+"/"+this._getFileNameForXhrAuth());}return q.when();};this._instantiateComponent=function(e,i,j){var D=new q.Deferred(),k=JSON.parse(JSON.stringify(e)),A={ui5ComponentName:k.component,url:k.url,getExtensions:g.bind(null,e.component)};function m(E){return function(l){E=E||"Cannot create UI5 plugin component: (componentId/appdescrId :"+A.ui5ComponentName+")\n"+l+" properties "+JSON.stringify(A)+"\n This indicates a plugin misconfiguration, see e.g. Note 2316443.";l=l||"";L.error(E,l.stack,S);if(i){i.reject.apply(this,arguments);}D.reject.apply(this,arguments);};}k.name=k.component;delete k.component;A.applicationDependencies=k;if(k.config){A.applicationConfiguration=k.config;delete k.config;}A.loadDefaultDependencies=false;if(j!==undefined){A.oPostMessageInterface=j;}sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(l){this._handleXhrAuthentication(A.applicationConfiguration,k.url).done(function(){l.createComponent(A,{},[],f.Plugin).done(function(n){if(i){i.resolve(n);}D.resolve.apply(this,arguments);}).fail(m());}).fail(m("XHR logon for FLP plugin failed"));}.bind(this)).catch(m());return D.promise();};this.getSupportedPluginCategories=function(){return JSON.parse(JSON.stringify(s));};this.getRegisteredPlugins=function(){return JSON.parse(JSON.stringify(this._oPluginCollection));};this.registerPlugins=function(i){var t=this,j,k,l,m=[],n,r;if(!i){return;}if(this._oConfig.isBlueBox===true){n=new U(window.location.href).get("sap-plugins");if(n&&n.length>0){n=","+n+",";}else{n=undefined;}}Object.keys(i).sort().forEach(function(v){j=i[v]||{};k=j.config||{};l=k[b]||"";if(j.enabled===false){return;}if(!t._isFormFactorSupported(j)){L.info("Plugin '"+v+"' filtered from result: form factor not supported");return;}if(t._oConfig.isBlueBox===true){if(j.config&&j.config["sap-plugin-agent"]===true){r=(j.config["sap-plugin-agent-id"]||v);if(n){if(n.indexOf(","+r+",")<0){return;}}else{return;}}}if(j.enabled===undefined){j.enabled=true;}if(j.hasOwnProperty("module")){var M=(j.module||"").replace(/\./g,"/");L.error("Plugin "+v+" cannot get registered, because the module mechanism for plugins is not valid anymore. Plugins need to be defined as SAPUI5 components.",S);try{sap.ui.requireSync(M);}catch(e){L.error("Plugin module "+M+" is not found.");}return;}if(k&&k.hasOwnProperty(b)){if(s&&Array.prototype.indexOf.call(s,l)!==-1){if(m.indexOf(l)===-1){m.push(l);}t._oPluginCollection[l][v]=JSON.parse(JSON.stringify(j));}else{L.warning("Plugin "+v+" will not be inserted into the plugin collection of the PluginManager, because of unsupported category "+l,S);}}else{t._oPluginCollection[c][v]=JSON.parse(JSON.stringify(j));if(m.indexOf(c)===-1){m.push(c);}}});try{if(t._oConfig.isBlueBox!==true){t._buildNamesOfPluginsWithAgents();}}catch(e){L.error("failed to build plugin agents names list",(e.message||e.toString()),"sap.ushell.services.PluginManager");}m.forEach(function(v){if(t._oCategoryLoadingProgress.hasOwnProperty(v)&&t._oCategoryLoadingProgress[v].state()==="resolved"){t.loadPlugins(v);}});};this._isFormFactorSupported=function(e){var D=e.deviceTypes,i=u.getFormFactor();if(D&&D[i]===false){return false;}return true;};this.getPluginLoadingPromise=function(e){if(this._oCategoryLoadingProgress.hasOwnProperty(e)){return this._oCategoryLoadingProgress[e].promise();}};this.loadPlugins=function(e){var t=this,i,j,k,l;u.setPerformanceMark("FLP -- PluginManager.startLoadPlugins["+e+"]");if(e===c){l=P.getInterface();}if(s&&Array.prototype.indexOf.call(s,e)!==-1){if(t._oCategoryLoadingProgress[e].pluginLoadingTriggered===undefined){t._oCategoryLoadingProgress[e].pluginLoadingTriggered=true;}if(Object.keys(t._oPluginCollection[e]).length>0){i=[];k=Object.keys(t._oPluginCollection[e]);if(new U(window.location.href).get("sap-ushell-xx-pluginmode")==="discard"&&(e==="RendererExtensions"||e==="AppWarmup")){k=k.filter(function(I){return(t._oPluginCollection[e][I].component===d);});}k.forEach(function(m){var n=t._oPluginCollection[e][m];if(!n.loaded){n.loaded=true;j=new q.Deferred();i.push(j.promise());t._handlePluginCreation(e,m,j,l);}});if(i.length>0){q.when.apply(undefined,i).done(function(){u.setPerformanceMark("FLP -- PluginManager.endLoadPlugins["+e+"]");t._oCategoryLoadingProgress[e].resolve();}).fail(t._oCategoryLoadingProgress[e].reject.bind());}}else{t._oCategoryLoadingProgress[e].resolve();}}else{L.error("Plugins with category "+e+" cannot be loaded by the PluginManager",S);t._oCategoryLoadingProgress[e].reject("Plugins with category "+e+" cannot be loaded by the PluginManager");}return t._oCategoryLoadingProgress[e].promise();};this._buildNamesOfPluginsWithAgents=function(){var t=this,n="",e;Object.keys(t._oPluginCollection).forEach(function(i){Object.keys(t._oPluginCollection[i]).forEach(function(j){e=t._oPluginCollection[i][j];if(e&&e.enabled&&e.enabled===true){if(e.config&&e.config["sap-plugin-agent"]===true){n+=(e.config["sap-plugin-agent-id"]||j)+",";}}});});if(n.endsWith(",")){n=n.slice(0,-1);}this._sPluginAgentsNames=n;};this._getNamesOfPluginsWithAgents=function(){return this._sPluginAgentsNames;};}
h.hasNoAdapter=true;return h;},true);
sap.ui.predefine('sap/ushell/services/ReferenceResolver',["sap/ushell/User","sap/ui/model/odata/ODataUtils","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log"],function(U,O,q,i,L){"use strict";
function a(){this.getValue=function(r){var d=new q.Deferred();var v;if(r==="User.env.sap-ui-legacy-date-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyDateFormat();}if(r==="User.env.sap-ui-legacy-number-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyNumberFormat();}if(r==="User.env.sap-ui-legacy-time-format"){v=sap.ui.getCore().getConfiguration().getFormatSettings().getLegacyTimeFormat();}if(r==="User.env.sap-language"){v=sap.ushell.Container.getUser().getLanguage();}if(r==="User.env.sap-languagebcp47"){v=sap.ushell.Container.getUser().getLanguageBcp47();}if(r==="User.env.sap-accessibility"){v=(sap.ushell.Container.getUser().getAccessibilityMode())?"X":undefined;}if(r==="User.env.sap-statistics"){v=(sap.ui.getCore().getConfiguration().getStatistics())?"true":undefined;}if(r==="User.env.sap-theme"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}if(r==="User.env.sap-theme-name"){v=sap.ushell.Container.getUser().getTheme();}if(r==="User.env.sap-theme-NWBC"){v=sap.ushell.Container.getUser().getTheme(U.prototype.constants.themeFormat.NWBC);}d.resolve({value:v});return d.promise();};}
function R(c,p,C){this._getUserEnvReferenceResolver=function(){if(!this.oUserEnvReferenceResolver){this.oUserEnvReferenceResolver=new a();}return this.oUserEnvReferenceResolver;};this.resolveReferences=function(r,s){var t=this;var d=new q.Deferred();var b=[];var A=true;var D={};var o={};var u=sap.ushell.Container.getServiceAsync("UserDefaultParameters");var e,S;if(!s){S=sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(h){return h.getSystemContext();});}else{S=Promise.resolve(s);}var g=r.map(function(h){var j;if(h.indexOf("User.env.")===0){j=h;o[j]=1;}if(h.indexOf("UserDefault.")===0){j=t._extractAnyUserDefaultReferenceName(h);D[j]=1;}if(typeof j!=="string"){A=false;L.error("'"+h+"' is not a legal reference name",null,"sap.ushell.services.ReferenceResolver");}return{full:h,name:j};});if(!A){return d.reject("One or more references could not be resolved").promise();}Promise.all([S,u]).then(function(h){var j=h[0];var k=h[1];Object.keys(D).forEach(function(n){b.push(k.getValue(n,j));});Object.keys(o).forEach(function(n){e=e||t._getUserEnvReferenceResolver();b.push(e.getValue(n));});q.when.apply(q,b).done(function(){var K={};var I=0,l=arguments;Object.keys(D).forEach(function(n){D[n]=l[I];I=I+1;});Object.keys(o).forEach(function(n){o[n]=l[I];I=I+1;});g.forEach(function(m){var M;if(m.full.indexOf("UserDefault.extended.")===0){M=t.mergeSimpleAndExtended(D[m.name]);if(!i(M)){K[m.full]=M;}else{K[m.full]=undefined;}}else if(m.full.indexOf("UserDefault.")===0){K[m.full]=D[m.name].value;}else if(m.full.indexOf("User.env.")===0){K[m.full]=o[m.name].value;}});d.resolve(K);});});return d.promise();};this._extractAnyUserDefaultReferenceName=function(r){var P=this.extractExtendedUserDefaultReferenceName(r);if(typeof P==="string"){return P;}return this.extractUserDefaultReferenceName(r);};this.extractExtendedUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.extended.")!==0){return undefined;}return r.replace(/^UserDefault[.]extended[.]/,"");};this.extractUserDefaultReferenceName=function(r){if(typeof r!=="string"||r.indexOf("UserDefault.")!==0||r.indexOf("UserDefault.extended.")===0){return undefined;}return r.replace(/^UserDefault[.]/,"");};this.mergeSimpleAndExtended=function(v){var m=q.extend(true,{},v.extendedValue);if(typeof v.value==="string"){if(!Array.isArray(m.Ranges)){m.Ranges=[];}m.Ranges.push({Sign:"I",Option:"EQ",Low:v.value,High:null});}return m;};function f(u){var r=/{([^}%]*%%[^%]+%%)}?/g,b=/([^%]*)%%/,d=/%%([^%]+)%%/,o,e,g,F=[];o=r.exec(u);while(o){e=b.exec(o[1]);g=d.exec(o[1]);F.push({edmType:e[1],name:g[1]});o=r.exec(u);}return F;}this.resolveUserDefaultParameters=function(u,s){var d=new q.Deferred(),r,S,I=[],o;o=/[^(?]*/.exec(u);r=(o===null)?[]:f(o[0]);r.forEach(function(g){I.push(g.name);});o=/[(?][^]*/.exec(u);r=(o===null)?[]:f(o[0]);var b=[],e={};r.forEach(function(g){b.push(g.name);e[g.name]=g.edmType;});S=b.filter(function(g){if(/^UserDefault\.(?!extended\.).+/.test(g)){return true;}I.push(g);return false;});if(S.length>0){this.resolveReferences(S,s).done(function(g){var h=u,D=[];Object.keys(g).forEach(function(j){var k,l=false;while(k!=h){k=h;if(g[j]!==undefined){var F=O.formatValue(g[j],e[j]);h=h.replace("{"+e[j]+"%%"+j+"%%}",window.encodeURIComponent(F));}else{l=true;h=h.replace("{"+e[j]+"%%"+j+"%%}","");}}if(l){D.push(j);}});d.resolve({url:h,defaultsWithoutValue:D,ignoredReferences:I});});}else{d.resolve({url:u,defaultsWithoutValue:[],ignoredReferences:I});}return d.promise();};}
R.hasNoAdapter=true;return R;},true);
sap.ui.predefine('sap/ushell/services/Search',[],function(){"use strict";
function S(a,c){this.init.apply(this,arguments);}
S.prototype={init:function(a,c,p,s){this.oAdapter=a;this.oContainerInterface=c;this.appSearchDeferred=null;},getAppSearch:function(){if(this.appSearchPromise){return this.appSearchPromise;}this.appSearchPromise=new Promise(function(r){sap.ui.getCore().loadLibrary("sap.esh.search.ui",{async:true}).then(function(){sap.ui.require(["sap/esh/search/ui/appsearch/AppSearch"],function(A){r(new A({}));});});});return this.appSearchPromise;},isSearchAvailable:function(){return this.oAdapter.isSearchAvailable();},getSina:function(){return this.oAdapter.getSina();},prefetch:function(){if(!sap||!sap.uhsell||!sap.ushell.Container){return;}return this.getAppSearch().then(function(a){return a.prefetch();});},queryApplications:function(q){q.top=q.top||10;q.skip=q.skip||0;return this.getAppSearch().then(function(a){return a.search(q).then(function(s){return{totalResults:s.totalCount,searchTerm:q.searchTerm,getElements:function(){return s.tiles;}};});});}};S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/SearchableContent',["sap/ushell/Config","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readPages","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/base/util/values","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(C,r,a,b,o,q,u,c){"use strict";var D=u.DisplayFormat;var S=function(){};S.COMPONENT_NAME="sap/ushell/services/SearchableContent";
S.prototype.getApps=function(){if(C.last("/core/spaces/enabled")){return this._getPagesAppData().then(this._filterGetApps);}return this._getLaunchPageAppData().then(this._filterGetApps);};
S.prototype._filterGetApps=function(A){A.forEach(function(d){var v=d.visualizations;var U=[];d.visualizations=[];v.forEach(function(V){var s=JSON.stringify({title:V.title,subtitle:V.subtitle,icon:V.icon,vizTypeId:V.vizTypeId});if(U.indexOf(s)===-1){d.visualizations.push(V);U.push(s);}});});return A.filter(function(d){return d.visualizations.length>0;});};
S.prototype._getLaunchPageAppData=function(){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){this._oLaunchPageService=l;return this._collectLaunchPageTiles();}.bind(this)).then(function(l){var A={};var v=l.map(this._buildVizDataFromLaunchPageTile.bind(this)).filter(function(V){return V;});v.forEach(function(V){var t=V.targetURL;if(t){if(A[t]){A[t].visualizations.push(V);}else{A[t]=this._buildAppDataFromViz(V);}}}.bind(this));return o(A);}.bind(this));};
S.prototype._collectLaunchPageTiles=function(){return new Promise(function(d,e){this._oLaunchPageService.getCatalogs().then(function(f){var g=[];f.forEach(function(h){g.push(this._oLaunchPageService.getCatalogTiles(h));}.bind(this));var G=this._oLaunchPageService.getGroups().then(function(h){var t=[];h.forEach(function(i){Array.prototype.push.apply(t,this._oLaunchPageService.getGroupTiles(i)||[]);}.bind(this));return t;}.bind(this));g.push(G);return q.when.apply(q,g).then(function(){var t=[];var h=Array.prototype.slice.call(arguments);h.forEach(function(i){Array.prototype.push.apply(t,i);});d(t);});}.bind(this));}.bind(this));};
S.prototype._getPagesAppData=function(){var A,s;return sap.ushell.Container.getServiceAsync("CommonDataModel").then(function(d){return Promise.all([d.getAllPages(),d.getApplications(),d.getVisualizations(),d.getVizTypes(),sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("ClientSideTargetResolution")]);}).then(function(R){var p=R[0];var d=R[1];var v=R[2];var V=R[3];var U=R[4];var e=R[5];s={applications:d,visualizations:v,vizTypes:V};A={};this._applyCdmVisualizations(s,A,U);this._applyCdmPages(s,p,A,U);return this._filterAppDataByIntent(A,U,e);}.bind(this)).then(function(){this._applyCdmApplications(s,A);return o(A);}.bind(this));};
S.prototype._filterAppDataByIntent=function(A,U,d){var i=Object.keys(A).filter(U.isIntentUrl.bind(U));if(i.length===0){return Promise.resolve();}return new Promise(function(e,f){d.isIntentSupported(i).then(function(s){Object.keys(s).forEach(function(t){if(!s[t].supported&&A[t]){delete A[t];}});}).always(e);});};
S.prototype._applyCdmApplications=function(s,A){Object.keys(A).forEach(function(k){var v=A[k].visualizations;var V=v.find(function(e){return e.target.appId&&e.target.inboundId;});if(V){var d=s.applications[V.target.appId];var i=r.getInbound(d,V.target.inboundId);A[k]=this._buildAppDataFromAppAndInbound(d,i);A[k].visualizations=v;A[k].target=v[0].target;}else{A[k]=this._buildAppDataFromViz(v[0]);A[k].visualizations=v;A[k].target=v[0].target;}}.bind(this));};
S.prototype._applyCdmVisualizations=function(s,A,U){Object.keys(s.visualizations).forEach(function(k){var v={vizId:k,displayFormatHint:D.Standard};var V=b.getVizData(s,v,U);var t=V.targetURL;this._changeVizType(V);V.preview=true;if(t){if(A[t]){A[t].visualizations.push(V);}else{A[t]={visualizations:[V]};}}}.bind(this));};
S.prototype._applyCdmPages=function(s,p,A,U){p.forEach(function(P){var v=a.getVisualizationReferences(P);v.forEach(function(V){if(V.displayFormatHint&&V.displayFormatHint!==D.Standard){V=Object.assign({},V);V.displayFormatHint=D.Standard;}var d=b.getVizData(s,V,U);var t=d.targetURL;this._changeVizType(d);d.preview=true;if(t){if(A[t]){A[t].visualizations.push(d);}else{A[t]={visualizations:[d]};}}}.bind(this));}.bind(this));};
S.prototype._changeVizType=function(v){if(v._instantiationData.platform==="CDM"&&!c.isStandardVizType(v.vizType)){v.vizType="sap.ushell.StaticAppLauncher";v._instantiationData.vizType={"sap.ui5":{componentName:"sap.ushell.components.tiles.cdm.applauncher"}};}};
S.prototype._buildAppDataFromAppAndInbound=function(A,i){return{id:r.getId(A),title:i.title||r.getTitle(A),subtitle:i.subTitle||r.getSubTitle(A),icon:i.icon||r.getIcon(A),info:i.info||r.getInfo(A),keywords:i.keywords||r.getKeywords(A),visualizations:[]};};
S.prototype._buildAppDataFromViz=function(v){return{id:v.vizId,title:v.title,subtitle:v.subtitle,icon:v.icon,info:v.info,keywords:v.keywords,target:v.target,visualizations:[v]};};
S.prototype._buildVizDataFromLaunchPageTile=function(l){var t;var v;if(!this._oLaunchPageService.getCatalogTilePreviewTitle(l)){try{t=this._oLaunchPageService.getCatalogTileView(l);}catch(n){}}if(this._oLaunchPageService.getCatalogTileTargetURL(l)&&this._oLaunchPageService.isTileIntentSupported(l)){v={id:this._oLaunchPageService.getTileId(l)||this._oLaunchPageService.getCatalogTileId(l),vizId:this._oLaunchPageService.getCatalogTileId(l)||this._oLaunchPageService.getTileId(l)||"",vizTypeId:"",title:this._oLaunchPageService.getCatalogTilePreviewTitle(l)||this._oLaunchPageService.getCatalogTileTitle(l)||this._oLaunchPageService.getTileTitle(l)||"",subtitle:this._oLaunchPageService.getCatalogTilePreviewSubtitle(l)||"",icon:this._oLaunchPageService.getCatalogTilePreviewIcon(l)||"sap-icon://business-objects-experience",info:this._oLaunchPageService.getCatalogTilePreviewInfo(l)||"",keywords:this._oLaunchPageService.getCatalogTileKeywords(l)||[],target:{type:"URL",url:this._oLaunchPageService.getCatalogTileTargetURL(l)},targetURL:this._oLaunchPageService.getCatalogTileTargetURL(l)};if(l.getChip){v._instantiationData={platform:"LAUNCHPAGE",launchPageTile:l};}else{v._instantiationData={platform:"CDM",vizType:{"sap.ui5":{componentName:"sap.ushell.components.tiles.cdm.applauncher"}}};}}if(t){if(!t.destroy){var e=new Error("The tileview \""+v.title+"\" with target url \""+v.target.url+"\" does not implement mandatory function destroy!");throw e;}t.destroy();}return v;};
S.hasNoAdapter=true;return S;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigation',["sap/ushell/services/ShellNavigationHashChanger","sap/m/MessageBox","sap/ui/core/routing/HashChanger"],function(S,M,H){"use strict";var A=M.Action;var I=M.Icon;
function a(c,p,s){function r(){sap.ui.require(["sap/m/MessageBox"],function(M){M.show("Due to a configuration change on the server,\nclient and server are out of sync.\n We strongly recommend to reload the page soon.\nReload page now?",{icon:I.ERROR,title:"Client out of sync with server.",actions:[A.YES,A.NO],onClose:function(b){if(b===A.YES){window.setTimeout(function(){window.location.reload();},0);}}});});}var o=s&&s.config;this.hashChanger=new S(o);this._navigationFilterForForwardingToRegisteredRouters=function(b,h){var m=this._aRouters.some(function(R){return R.match(h);});if(m){var C=b.getCurrentApplication();var i=C&&C.componentInstance&&!C.homePage;if(i){var d=C.componentInstance.getRouter();if(d){d.stop();}}return this.NavigationFilterStatus.Keep;}return this.NavigationFilterStatus.Continue;};this.getNavigationContext=function(){var n=this.hashChanger.getCurrentNavigationState();var i=!this.hashChanger.isInnerAppNavigation(n.oldHash,n.newHash);return{status:n.status,isCrossAppNavigation:i,innerAppRoute:this.hashChanger.getHash()};};this.isInitialNavigation=function(){return this._bIsInitialNavigation;};this.setIsInitialNavigation=function(i){this._bIsInitialNavigation=i;};this.hrefForExternal=function(b,v,C,d){return this.hashChanger.hrefForExternal(b,v,C,d);};this.hrefForAppSpecificHash=function(b){return this.hashChanger.hrefForAppSpecificHash(b);};this.compactParams=function(P,R,C,t){return this.hashChanger.compactParams(P,R,C,t);};this.toExternal=function(b,C,w){return this.hashChanger.toExternal(b,C,w);};this.toAppHash=function(b,w){this.hashChanger.toAppHash(b,w);};this.init=function(f){this._bIsInitialNavigation=true;hasher.prependHash="";H.replaceHashChanger(this.hashChanger);var b=sap.ui.getCore().getEventBus();b.subscribe("sap.ui.core.UnrecoverableClientStateCorruption","RequestReload",r);this.hashChanger.initShellNavigation(f);this._enableHistoryEntryReplacedDetection();return this;};this._enableHistoryEntryReplacedDetection=function(){this._lastHashChangeMode=null;this._fnOriginalSetHash=hasher.setHash;this._fnOriginalReplaceHash=hasher.replaceHash;hasher.setHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="setHash";return this._fnOriginalSetHash.apply(hasher,arguments);}.bind(this);hasher.replaceHash=function(){this._hashChangedByApp=true;this._lastHashChangeMode="replaceHash";return this._fnOriginalReplaceHash.apply(hasher,arguments);}.bind(this);};this.wasHistoryEntryReplaced=function(){return this._lastHashChangeMode==="replaceHash";};this.resetHistoryEntryReplaced=function(){this._lastHashChangeMode=null;};this.replaceHashWithoutNavigation=function(n){hasher.changed.active=false;this._fnOriginalSetHash(n);hasher.changed.active=true;};this.NavigationFilterStatus=this.hashChanger.NavigationFilterStatus;this.registerNavigationFilter=function(f){this.hashChanger.registerNavigationFilter(f);};this._aRouters=[];this.registerExtraRouter=function(R){this._aRouters.push(R);};this.unregisterNavigationFilter=function(f){this.hashChanger.unregisterNavigationFilter(f);};this.registerNavigationFilter(function(){if(!this._hashChangedByApp){this.resetHistoryEntryReplaced();}this._hashChangedByApp=undefined;return this.NavigationFilterStatus.Continue;}.bind(this));this.registerPrivateFilters=function(b){this.registerNavigationFilter(this._navigationFilterForForwardingToRegisteredRouters.bind(this,b));};}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/ShellNavigationHashChanger',["sap/ushell/library","sap/ushell/utils/UrlShortening","sap/ushell/utils/UrlParsing","sap/ui/core/routing/HashChanger","sap/ui/thirdparty/hasher","sap/ushell/TechnicalParameters","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/deepEqual"],function(l,U,a,H,h,T,b,c,q,L,d){"use strict";var N=l.NavigationState;var O={HASH_SET:{name:"hashSet",historyEntry:true},HASH_REPLACED:{name:"hashReplaced",historyEntry:false},SHELL_HASH_CHANGED:{name:"shellHashChanged",historyEntry:true,usedByUi5HistoryDetection:true,ui5EventParameterNames:{oldHash:"oldAppSpecificRouteNoSeparator",newHash:"newAppSpecificRouteNoSeparator"},updateHashOnly:true},SHELL_HASH_PARAMETER_CHANGED:{name:"shellHashParameterChanged",historyEntry:null},HASH_CHANGED:{name:"hashChanged",historyEntry:false,usedByUi5HistoryDetection:true,ui5EventParameterNames:{newHash:"newHash",fullHash:"fullHash"}}};
var S=H.extend("sap.ushell.services.ShellNavigatonHashChanger",{constructor:function(C){var u;this.oServiceConfig=C;this._oNavigationState={};if(new b(window.location.href).get("sap-ushell-reload")){if(new b(window.location.href).get("sap-ushell-reload")==="X"||new b(window.location.href).get("sap-ushell-reload")==="true"){u=true;}else{u=false;}}if(u!==undefined){if(typeof this.oServiceConfig!=="object"){this.oServiceConfig={};}this.oServiceConfig.reload=u;}H.apply(this);this._initializedByShellNav=false;this.privfnShellCallback=null;this.privappHashPrefix="&/";this.privhashPrefix="#";this.aNavigationFilters=[];this.NavigationFilterStatus={Continue:"Continue",Custom:"Custom",Abandon:"Abandon",Keep:"Keep"};this.getRelevantEventsInfo=function(){return this._getAllEvents().filter(function(e){return e.usedByUi5HistoryDetection;}).map(function(e){var E={name:e.name,paramMapping:e.ui5EventParameterNames};if(e.updateHashOnly!==undefined){E.updateHashOnly=e.updateHashOnly;}return E;});};}});
S.prototype.privgetCurrentShellHash=function(){var r=this.privsplitHash(h.getHash());return{hash:"#"+((r&&r.shellPart)?r.shellPart:"")};};
S.prototype.privconstructHash=function(A){var o=this.privgetCurrentShellHash();o.hash+=A;return o;};
S.prototype.privconstructShellHash=function(s){return a.constructShellHash(s);};
S.prototype.privsplitHash=function(s){var o,e,A;if(s===undefined||s===null||s===""){return{shellPart:null,appSpecificRoute:null,intent:null,params:null};}o=a.parseShellHash(s);if(o===undefined||o===null){return null;}e=(o.params&&!c(o.params))?o.params:null;A=o.appSpecificRoute;o.appSpecificRoute=undefined;return{shellPart:this.privstripLeadingHash(this.privconstructShellHash(o))||null,appSpecificRoute:A||null,intent:(o.semanticObject&&o.action&&(o.semanticObject+"-"+o.action+(o.contextRaw||"")))||null,params:e};};
S.prototype.privsetHash=function(F,A,w){h.prependHash="";F=this.privstripLeadingHash(F);A=A||"";if(w===undefined){w=true;}if(w){this.fireEvent(O.HASH_SET.name,{sHash:A});h.setHash(F);}else{this.fireEvent(O.HASH_REPLACED.name,{sHash:A});h.replaceHash(F);}};
S.prototype.privstripLeadingHash=function(s){if(s[0]==="#"){return s.substring(1);}return s;};
S.prototype.registerNavigationFilter=function(F){if(typeof F!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters.push(F);};
S.prototype.unregisterNavigationFilter=function(F){if(typeof F!=="function"){throw new Error("fnFilter must be a function");}this.aNavigationFilters=this.aNavigationFilters.filter(function(r){return r!==F;});};
function f(A,C,t){this.oAppState=undefined;this.oPromise=(new q.Deferred()).resolve();this.getNextKey=function(){this.oAppState=A.createEmptyAppState(C,t);return this.oAppState.getKey();};this.store=function(v){var n;this.oAppState.setData(v);n=this.oAppState.save();this.oPromise=q.when(this.oPromise,n);};this.getPromise=function(){return this.oPromise;};}
S.prototype.compactParams=function(p,r,C,t){var D=new q.Deferred();var s=a.constructShellHash({target:{semanticObject:"SO",action:"action"},params:p});if(p===undefined||Object.keys(p).length===0){return D.resolve(p).promise();}sap.ushell.Container.getServiceAsync("AppState").then(function(A){var o=new f(A,C,t);var R=U.compactHash(s,r,o);var e=a.parseParameters(R.hash.match(/\?.*/)[0]);var P=o.getPromise();P.done(function(){D.resolve(e);}).fail(function(m){D.reject(m);});});return D.promise();};
S.prototype.hrefForExternal=function(A,v,C,e){var r=this.hrefForExternalNoEnc(A,v,C,e);function g(R,v){if(v===true){R.hash=encodeURI(R.hash);}else{R=encodeURI(R);}return R;}if(!e){return g(r,v);}var D=new q.Deferred();r.then(function(R){D.resolve(g(R,v));}).catch(D.reject.bind(D));return D;};
S.prototype.hrefForExternalNoEnc=function(A,v,C,e){if(e){var D=new q.Deferred();this.hrefForExternalNoEncAsync(A,v,C).then(D.resolve).catch(D.reject);return D.promise();}L.warning("Deprecated option 'bAsync=false'. Please use 'bAsync=true' instead",null,"sap.ushell.services.ShellNavigationHashChanger");var r;var g=sap.ushell.Container.getService("AppState");var s=new f(g,C);var t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}return r;};
S.prototype.hrefForExternalNoEncAsync=function(A,v,C){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var r;var s=new f(e,C);var t=this.privhrefForExternalNoEnc(A,s);if(v===true){r={hash:t.hash,params:t.params,skippedParams:t.skippedParams};}else{r=t.hash;}return new Promise(function(g,i){s.getPromise().done(function(){g(r);}).fail(i);});}.bind(this));};
S.prototype.privhrefForExternalNoEnc=function(A,s){var r;if(A===undefined){return this.privgetCurrentShellHash();}if(A&&A.target&&(typeof A.target.semanticObject==="string"||typeof A.target.shellHash==="string")){r="#"+this.privconstructShellHash(A);return U.compactHash(r,undefined,s);}return this.privgetCurrentShellHash();};
S.prototype.privgetAppHash=function(A){var s,o;if(A&&A.target&&(typeof A.target.shellHash==="string")){o=a.parseShellHash(A.target.shellHash);s=o&&o.appSpecificRoute;s=s&&s.substring(2);}return s;};
S.prototype.hrefForAppSpecificHash=function(A){return encodeURI(this.privconstructHash(this.privappHashPrefix+A).hash);};
S.prototype.toExternal=function(A,C,w){return sap.ushell.Container.getServiceAsync("AppState").then(function(e){var s=new f(e,C);var g=this.privhrefForExternalNoEnc(A,s).hash;var i=this.privgetAppHash(A);this.privsetHash(g,i,w);}.bind(this));};
S.prototype.toAppHash=function(A,w){var s=this.privconstructHash(this.privappHashPrefix+A).hash;this.privsetHash(s,A,w);};
S.prototype.initShellNavigation=function(s){if(this._initializedByShellNav){L.info("initShellNavigation already called on this ShellNavigationHashChanger instance.");return false;}this.privfnShellCallback=s;h.changed.add(this.treatHashChanged,this);if(!h.isActive()){h.initialized.addOnce(this.treatHashChanged,this);h.init();}else{this.treatHashChanged(h.getHash());}this._initializedByShellNav=true;return true;};
S.prototype.init=function(){if(this._initialized){L.info("init already called on this ShellNavigationHashChanger instance.");return false;}var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2),D=A?"&/":"",s=(n&&n.shellPart)||"";this.fireEvent(O.HASH_CHANGED.name,{newHash:A,fullHash:s+D+A});this._initialized=true;return true;};
S.prototype._removeInnerAppSeparator=function(i){return(i||"").replace("&/","");};
S.prototype._setNavigationStatus=function(n){this._oNavigationState.status=n;};
S.prototype._trackNavigation=function(o,n){this._oNavigationState.oldHash=o;this._oNavigationState.newHash=n;};
S.prototype.getCurrentNavigationState=function(){return this._oNavigationState;};
S.prototype.treatHashChanged=function(n,o){this._trackNavigation(o,n);this._setNavigationStatus(N.InProgress);if(this.inAbandonFlow){this._setNavigationStatus(N.Finished);return;}var A,s,g,j,k,m,E,i,F,p,r,t;n=U.expandHash(n);o=U.expandHash(o);g=this.privsplitHash(n);j=this.privsplitHash(o);if(!g){E=new Error("Illegal new hash - cannot be parsed: '"+n+"'");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:n,newAppSpecificRoute:null,fullHash:n,oldShellHash:(j?j.shellPart:o),error:E});this.privfnShellCallback(n,null,(j?j.shellPart:o),(j?j.appSpecificRoute:null),E);this._setNavigationStatus(N.Finished);return;}if(!j){j={shellPart:o,appSpecificRoute:null};}for(i=0;i<this.aNavigationFilters.length;i++){try{F=this.aNavigationFilters[i].call(undefined,n,o);p=F;if(typeof F!=="string"){p=F.status;r=F.hash;}if(p===this.NavigationFilterStatus.Custom){if(r&&r.length>0){this.inAbandonFlow=true;h.replaceHash(r);this.inAbandonFlow=false;}this._setNavigationStatus(N.Finished);return;}if(p===this.NavigationFilterStatus.Abandon){this.inAbandonFlow=true;h.replaceHash(o);this.inAbandonFlow=false;this._setNavigationStatus(N.Finished);return;}if(p===this.NavigationFilterStatus.Keep){t=true;}}catch(e){L.error("Error while calling Navigation filter! ignoring filter...",e.message,"sap.ushell.services.ShellNavigation");}}if(t){this.fireEvent(O.HASH_CHANGED.name,{newHash:n,oldHash:o,fullHash:n});this._setNavigationStatus(N.Finished);return;}var u=this.isInnerAppNavigation(n,o);if(u){A=this._removeInnerAppSeparator(g.appSpecificRoute);s=this._removeInnerAppSeparator(j.appSpecificRoute);L.info("Inner App Hash changed from '"+s+"' to '"+A+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.HASH_CHANGED.name,{newHash:A,oldHash:s,fullHash:n});this._setNavigationStatus(N.Finished);return;}var v=this._haveSameIntent(n,o);if(v&&this.hasListeners(O.SHELL_HASH_PARAMETER_CHANGED.name)){k=a.paramsToString(g.params);m=a.paramsToString(j.params);L.info("Shell hash parameters changed from '"+m+"' to '"+k+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_PARAMETER_CHANGED.name,{oNewParameters:g.params,oOldParameters:j.params});this._setNavigationStatus(N.Finished);return;}if(o!==undefined&&this.oServiceConfig&&this.oServiceConfig.reload){window.location.hash="#"+encodeURI(n);window.location.reload();}L.info("Outer shell hash changed from '"+o+"' to '"+n+"'",null,"sap.ushell.services.ShellNavigation");this.fireEvent(O.SHELL_HASH_CHANGED.name,{newShellHash:g.shellPart,newAppSpecificRoute:g.appSpecificRoute,fullHash:n,oldShellHash:j.shellPart,oldAppSpecificRoute:j.appSpecificRoute,error:"",oldAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(j.appSpecificRoute),newAppSpecificRouteNoSeparator:this._removeInnerAppSeparator(g.appSpecificRoute)});this.privfnShellCallback(g.shellPart,g.appSpecificRoute,j.shellPart,j.appSpecificRoute);sap.ui.getCore().getEventBus().publish("relatedServices","resetBackNavigation");this._setNavigationStatus(N.Finished);};
S.prototype._parametersChanged=function(n,o){return!d(n,o);};
S.prototype.setHash=function(s){this.toAppHash(s,true);};
S.prototype.replaceHash=function(s){this.toAppHash(s,false);};
S.prototype.getHash=function(){return this.getAppHash();};
S.prototype.getAppHash=function(){var n=this.privsplitHash(h.getHash()),A=((n&&n.appSpecificRoute)||"  ").substring(2);return A;};
S.prototype.destroy=function(){h.changed.remove(this.treatHashChanged,this);H.prototype.destroy.apply(this,arguments);};
S.prototype._getAllEvents=function(){return Object.keys(O).map(function(e){return O[e];});};
S.prototype.getReplaceHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===false;}).map(function(e){return e.name;});};
S.prototype.getSetHashEvents=function(){return this._getAllEvents().filter(function(e){return e.historyEntry===true;}).map(function(e){return e.name;});};
S.prototype.isInnerAppNavigation=function(n,o){var e=this.privsplitHash(n)||{};var g=this.privsplitHash(o)||{};var i=this._haveSameIntent(n,o);e.params=this._removeNonIntentParameters(e.params);g.params=this._removeNonIntentParameters(g.params);var j=!this._parametersChanged(e.params,g.params);return i&&j;};
S.prototype._haveSameIntent=function(n,o){var e=this.privsplitHash(n)||{};var g=this.privsplitHash(o)||{};var s=e.intent;var i=g.intent;return s===i&&o!==undefined;};
S.prototype._removeNonIntentParameters=function(o){var t=T.getParameters({isIntentParameter:false}),e;if(o){for(var i=0;i<t.length;i++){e=t[i];if(o[e.name]){delete o[e.name];}}}return o||{};};
return S;},true);
sap.ui.predefine('sap/ushell/services/SmartNavigation',["sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ushell/services/AppConfiguration","sap/base/Log","sap/ushell/utils/UrlParsing"],function(q,u,A,L,U){"use strict";
function S(c,p,s){this._oServiceConfig=s;this._oCrossAppNavigationServicePromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation");this._oPersonalizationServicePromise=sap.ushell.Container.getServiceAsync("Personalization");this._oHashCodeCache={"":0};}
S.STATISTIC_COLLECTION_WINDOW_DAYS=90;S.PERS_CONTAINER_KEY_PREFIX="ushell.smartnav.";S.ONE_DAY_IN_MILLISECOND=24*60*60*1000;
S.prototype.getLinks=function(a){var d=new q.Deferred();this._oCrossAppNavigationServicePromise.then(function(C){var o=C.getLinks(a);if(!this._isTrackingEnabled(this._oServiceConfig)){o.done(d.resolve).fail(d.reject);return;}var c=A.getCurrentApplication();var f=c.sShellHash;var b=c.componentHandle;if(c.componentHandle){b=c.componentHandle.getInstance();}if(!f){L.warning("Call to SmartNavigation#getLinks() simply delegated to CrossApplicationNavigation#getLinks()"+" because AppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");o.done(d.resolve).fail(d.reject);return;}var n=this._getNavigationOccurrences(f,b);q.when(o,n).done(function(l,N){if(N.length===0){d.resolve(l);return;}var p=this._prepareLinksForSorting(l,N);l=p.sort(function(e,O){return O.clickCount-e.clickCount;});d.resolve(l);}.bind(this)).fail(d.reject);}.bind(this)).catch(d.reject);return d.promise();};
S.prototype.toExternal=function(a){var b=arguments;this._oCrossAppNavigationServicePromise.then(function(C){if(!this._isTrackingEnabled(this._oServiceConfig)){C.toExternal.apply(C,b);return;}var c=A.getCurrentApplication();var f=c.sShellHash;var o=c.componentHandle;if(c.componentHandle){o=c.componentHandle.getInstance();}if(!f){L.warning("Current shell hash could not be identified. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");C.toExternal.apply(C,b);return;}var d=this._getHashFromOArgs(a.target);if(!d){L.warning("Destination hash does not conform with the ushell guidelines. Navigation will not be tracked.",null,"sap.ushell.services.SmartNavigation");C.toExternal.apply(C,b);return;}this._recordNavigationOccurrences(f,d,o).then(function(){C.toExternal.apply(C,b);});}.bind(this));};
S.prototype.hrefForExternal=function(){L.warning("Deprecated API call of 'sap.ushell.services.SmartNavigation.hrefForExternal'. Please use 'hrefForExternalAsync' instead.",null,"sap.ushell.services.SmartNavigation");var C=sap.ushell.Container.getService("CrossApplicationNavigation");return C.hrefForExternal.apply(C,arguments);};
S.prototype.hrefForExternalAsync=function(){var a=arguments;return this._oCrossAppNavigationServicePromise.then(function(C){return C.hrefForExternalAsync.apply(C,a);});};
S.prototype.getPrimaryIntent=function(){var d=new q.Deferred();var a=arguments;this._oCrossAppNavigationServicePromise.then(function(C){C.getPrimaryIntent.apply(C,a).done(d.resolve).fail(d.reject);}).catch(d.reject);return d.promise();};
S.prototype.trackNavigation=function(a){if(!this._isTrackingEnabled(this._oServiceConfig)){L.debug("Call to SmartNavigation#trackNavigation() ignored because Service is not enabled via Configuration",null,"sap.ushell.services.SmartNavigation");return q.when(null);}var t=a.target;var c=A.getCurrentApplication();var f=c.sShellHash;var d;if(!f){L.warning("Call to SmartNavigation#trackNavigation() simply ignored"+" because AppConfiguration#getCurrentApplication()#sShellHash evaluates to undefined.");return q.when(null);}d=this._getHashFromOArgs(t);if(!d){L.warning("Navigation not tracked - no valid destination provided",null,"sap.ushell.services.SmartNavigation");return q.when(null);}L.debug("Navigation to "+d+" was tracked out of "+f,null,"sap.ushell.services.SmartNavigation");return this._recordNavigationOccurrences(f,d,c.componentHandle.getInstance());};
S.prototype._isTrackingEnabled=function(c){return u.isDefined(c)&&u.isDefined(c.config)&&u.isDefined(c.config.isTrackingEnabled)?c.config.isTrackingEnabled:false;};
S.prototype._getHashCode=function(a){var s=a+"";if(this._oHashCodeCache[s]){return this._oHashCodeCache[s];}var h=0;var l=s.length;while(l--){h=(h<<5)-h+(s.charCodeAt(l)|0);h|=0;}this._oHashCodeCache[s]=h;return h;};
S.prototype._getBaseHashPart=function(i){var t=U.parseShellHash(i);if(t&&t.semanticObject&&t.action){return t.semanticObject+"-"+t.action;}throw"Invalid intent `"+i+"`";};
S.prototype._getHashFromOArgs=function(a){if(!a){return null;}if(a.shellHash&&U.parseShellHash(a.shellHash)){return this._getBaseHashPart(a.shellHash);}if(a.semanticObject&&a.action){return a.semanticObject+"-"+a.action;}return null;};
S.prototype._getPersContainerKey=function(s){return S.PERS_CONTAINER_KEY_PREFIX+this._getHashCode(s);};
S.prototype._getNavigationOccurrences=function(f,c){var d=new q.Deferred();var p=this._getPersContainerKey(f);this._oPersonalizationServicePromise.then(function(P){var C=P.getContainer(p,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},c);C.done(function(o){var i=o.getItemKeys();var I=i.map(function(s){var a=o.getItemValue(s);var b=Object.keys(a.actions);return b.map(function(e){var g=a.actions[e];var h=g.dailyFrequency.reduce(function(j,k){return j+k;},0);return{intent:s+"-"+e,clickCount:h};});});var F=I.reduce(function(e,s){Array.prototype.push.apply(e,s);return e;},[]);d.resolve(F);});}).catch(d.reject);return d.promise();};
S.prototype._prepareLinksForSorting=function(l,n){var N={};n.forEach(function(o){N[o.intent]=o;});l.forEach(function(o){var b=this._getBaseHashPart(o.intent);var a=N[b];o.clickCount=a?a.clickCount:0;}.bind(this));return l;};
S.prototype._recordNavigationOccurrences=function(f,t,c){var T=U.parseShellHash(t);var p=this._getPersContainerKey(f);var s=T.semanticObject;var d=new q.Deferred();this._oPersonalizationServicePromise.then(function(P){var C=P.getContainer(p,{keyCategory:P.constants.keyCategory.FIXED_KEY,writeFrequency:P.constants.writeFrequency.HIGH,clientStorageAllowed:true},c);C.done(function(o){var a=o.getItemValue(s);var b=T.action;if(!a){a={actions:{},latestVisit:Date.now(),dailyFrequency:[0]};}var e=a.actions[b];if(!e){e={latestVisit:Date.now(),dailyFrequency:[0]};a.actions[b]=e;}this._updateHistoryEntryWithCurrentUsage(a);this._updateHistoryEntryWithCurrentUsage(e);o.setItemValue(s,a);o.save().done(d.resolve).fail(d.reject);}.bind(this)).fail(d.reject);}.bind(this)).catch(d.reject);return d.promise();};
S.prototype._updateHistoryEntryWithCurrentUsage=function(h){var n=Date.now();var t=n-h.latestVisit;var d=Math.floor(t/S.ONE_DAY_IN_MILLISECOND);while(d--){h.dailyFrequency.unshift(0);if(h.dailyFrequency.length>S.STATISTIC_COLLECTION_WINDOW_DAYS){h.dailyFrequency.pop();}}++h.dailyFrequency[0];h.latestVisit=n;return h;};
S.hasNoAdapter=true;return S;});
sap.ui.predefine('sap/ushell/services/SupportTicket',["sap/ushell/Config"],function(C){"use strict";
function S(a,c,p,s){this.createTicket=function(o){return a.createTicket(o);};this.isEnabled=function(){return C.last("/core/extension/SupportTicket");};}
S.hasNoAdapter=false;return S;},true);
sap.ui.predefine('sap/ushell/services/URLParsing',["sap/ushell/utils","sap/base/util/UriParameters","sap/ushell/utils/UrlParsing","sap/base/Log"],function(u,U,a,L){"use strict";
function b(){this.getShellHash=function(s){return a.getShellHash(s);};this.getHash=function(s){return a.getHash(s);};this.isIntentUrl=function(s){L.warning("Deprecated API call of 'sap.ushell.URLParsing.isIntentUrl'. Please use 'isIntentUrlAsync' instead",null,"sap.ushell.services.URLParsing");return a.isIntentUrl(s);};this.isIntentUrlAsync=function(s){return a.isIntentUrlAsync(s);};this.parseParameters=function(p){return a.parseParameters(p);};this.paramsToString=function(p){return a.paramsToString(p);};this.privparamsToString=function(p,d,A){return a.privparamsToString(p,d,A);};this.parseShellHash=function(h){return a.parseShellHash(h);};this.privstripLeadingHash=function(h){return a.privstripLeadingHash(h);};this.splitHash=function(h){return a.splitHash(h);};this.constructShellHash=function(s){return a.constructShellHash(s);};this.addSystemToServiceUrl=function(s,c){var r,C,S=c;if(!s||s.indexOf("/")!==0||s.indexOf("//")===0){throw new u.Error("Invalid URL: "+s,"sap.ushell.services.URLParsing");}if(c instanceof sap.ui.core.Component){C=(typeof c.getComponentData==="function")&&c.getComponentData();S=C&&C.startupParameters&&C.startupParameters["sap-system"]&&C.startupParameters["sap-system"][0];}r=sap.ushell.Container.getService("NavTargetResolution").getCurrentResolution();if(!S&&!c&&r&&r.url){S=new U(r.url).get("sap-system");}if(/^[^?]*(;mo([/;?]|$))/.test(s)){}else if(/^[^?]*(;o=([/;?]|$))/.test(s)){s=s.replace(/;o=([/;?]|$)/,(S?";o="+S:"")+"$1");}else if(!/^[^?]*;o=/.test(s)&&S){s=s.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+S+"$2");}sap.ushell.Container.addRemoteSystemForServiceUrl(s);return s;};}
b.hasNoAdapter=true;return b;},true);
sap.ui.predefine('sap/ushell/services/URLShortening',["sap/ushell/utils/UrlShortening"],function(U){"use strict";
function a(){this.compactHash=U.compactHash.bind(U);this.checkHashLength=U.checkHashLength.bind(U);this.expandHash=U.expandHash.bind(U);this.expandParamGivenRetrievalFunction=U.expandParamGivenRetrievalFunction.bind(U);}
a.hasNoAdapter=true;return a;},true);
sap.ui.predefine('sap/ushell/services/URLTemplate',["sap/ushell/utils","sap/base/Log"],function(u,L){"use strict";
function U(){this._init.apply(this,arguments);}
U.prototype._init=function(a){this.oAdapter=a;};
U.prototype.handlePostTemplateProcessing=function(s,S,f){if(this.oAdapter&&this.oAdapter.handlePostTemplateProcessing){return this.oAdapter.handlePostTemplateProcessing(s,S,f);}else{return Promise.resolve(s);}};
U.hasNoAdapter=false;U.useConfigAdapterOnly=true;return U;});
sap.ui.predefine('sap/ushell/services/Ui5ComponentHandle',function(){"use strict";var U=function(c){this._oComponent=c;};
U.onBeforeApplicationInstanceCreated=function(){sap.ui.require(["sap/ushell/Fiori20AdapterTest"],function(){});};
U.prototype.getInstance=function(){return this._oComponent;};
U.prototype.getMetadata=function(){return this._oComponent.getMetadata();};
return U;});
sap.ui.predefine('sap/ushell/services/Ui5ComponentLoader',["sap/ushell/utils","sap/ushell/services/Ui5ComponentHandle","sap/ushell/services/_Ui5ComponentLoader/utils","sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(u,U,o,e,q){"use strict";
function a(A,c,p,C){this._oConfig=(C&&C.config)||{};this._oAdapter=A;this._logStackTrace=function(b,E){var s=JSON.stringify(b,null,4);o.logInstantiateComponentError(b.name,E+"",E.status,E.stack,s);return Promise.reject(E);};this.modifyComponentProperties=function(d,s){if(!this._oAdapter.modifyComponentProperties){return Promise.resolve(d);}return this._oAdapter.modifyComponentProperties(d.componentProperties,s).then(function(b){d.componentProperties=b;return d;});};this.createComponent=function(b,P,w,s){var d=new q.Deferred(),t=this;this.createComponentData(b,P,w).then(function(f){return t.modifyComponentProperties(f,s);}).then(function(D){t.instantiateComponent(D).then(d.resolve,d.reject);},function(){d.resolve(b);});return d.promise();};this.createComponentData=function(b,P,w){var t=this;return new Promise(function(r,R){var d={},f=b||{},l=o.shouldLoadCoreExt(f),g=o.shouldUseAmendedLoading(t._oConfig),L=o.shouldLoadDefaultDependencies(f,t._oConfig,g),n=u.getParameterValueBoolean("sap-ushell-nocb"),h=f.applicationDependencies||{};o.logAnyApplicationDependenciesMessages(h.name,h.messages);if(!f.ui5ComponentName){R();return;}delete f.loadCoreExt;delete f.loadDefaultDependencies;var i=o.createComponentData(f.componentData||{},f.url,f.applicationConfiguration,f.reservedParameters);if(f.getExtensions){i.getExtensions=f.getExtensions;delete f.getExtensions;}if(f.oPostMessageInterface){i.oPostMessageInterface=f.oPostMessageInterface;delete f.oPostMessageInterface;}var s=o.constructAppComponentId(P||{}),j=l&&g,k=o.prepareBundle(t._oConfig.coreResourcesComplement),m=o.createComponentProperties(j,L,n,w,f.applicationDependencies||{},f.ui5ComponentName,f.url,s,k);d.componentData=i;d.componentProperties=m;d.appPropertiesSafe=f;d.loadCoreExt=l;r(d);});};this.instantiateComponent=function(d){var b=d.componentProperties,f=d.componentData,g=d.appPropertiesSafe,l=d.loadCoreExt;U.onBeforeApplicationInstanceCreated.call(null,b);var D=new q.Deferred();o.createUi5Component(b,f).then(function(h){var i=new U(h);g.componentHandle=i;var j=l;if(j){g.coreResourcesFullyLoaded=j;e.emit("CoreResourcesComplementLoaded",{status:"success"});}D.resolve(g);}).fail(this._logStackTrace.bind(this,b)).catch(D.reject);return D.promise();};this.loadCoreResourcesComplement=function(){if(this.loadCoreResourcesComplementPromise){return this.loadCoreResourcesComplementPromise.promise();}var b=o.prepareBundle(this._oConfig.coreResourcesComplement),d=new q.Deferred();o.loadBundle(b).done(function(){e.emit("CoreResourcesComplementLoaded",{status:"success"});this.loadCoreResourcesComplementPromise=d;d.resolve();}.bind(this)).fail(function(){e.emit("CoreResourcesComplementLoaded",{status:"failed"});d.reject();});return d.promise();};e.once("loadCoreResourcesComplement").do(function(){this.loadCoreResourcesComplement();}.bind(this));}
a.hasNoAdapter=false;return a;},true);
sap.ui.predefine('sap/ushell/services/UsageAnalytics',["sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device"],function(q,L,D){"use strict";
function U(c,p,S){var o=(S&&S.config)||{},a=[],A=false,i=false,l,I;window.oCustomProperties={};this.setLegalText=function(t){l=t;if(I){this.init(I.usageAnalyticsTitle,I.iAgree,I.iDisagree,I.remindMeLater);}};this.getLegalText=function(){return l;};this.setTrackUsageAnalytics=function(s){var d=q.Deferred();var u=sap.ushell.Container.getUser();var O=u.getTrackUsageAnalytics();sap.ushell.Container.getServiceAsync("UserInfo").then(function(b){if(O!==s){u.setTrackUsageAnalytics(s);var e=b.updateUserPreferences(u);e.done(function(){u.resetChangedProperty("trackUsageAnalytics");if(!i&&s){this.start();}else if(i&&s===false){window.swa.disable();}else if(i&&s){window.swa.enable();}d.resolve();}.bind(this));e.fail(function(E){u.setTrackUsageAnalytics(O);u.resetChangedProperty("trackUsageAnalytics");L.error(E);d.reject(E);});}else{d.resolve();}}.bind(this)).catch(function(){L.error("Getting UserInfo service failed.");d.reject("Getting UserInfo service failed.");});return d.promise();};this.showLegalPopup=function(){sap.ui.require(["sap/m/Text","sap/m/Dialog","sap/m/Button","sap/m/library"],function(T,b,B,m){var d=m.ButtonType;var e=new b("agreementMessageBox",{title:I.usageAnalyticsTitle,type:"Message",stretch:D.system.phone,buttons:[new B("remindMeLaterButton",{text:I.remindMeLater,press:function(){e.close();}}),new B("iAgreeButton",{text:I.iAgree,type:d.Emphasized,press:function(){this.setTrackUsageAnalytics(true);e.close();}.bind(this)}),new B("iDisagreeButton",{text:I.iDisagree,press:function(){this.setTrackUsageAnalytics(false);e.close();}.bind(this)})],afterClose:function(){e.destroy();},content:new T({text:l})}).addStyleClass("sapUshellUsageAnalyticsPopUp").addStyleClass("sapContrastPlus");e.open();}.bind(this));};this.systemEnabled=function(){if(!o.enabled||!o.pubToken||(this.isSetUsageAnalyticsPermitted()&&!l)){if(!o.pubToken){L.warning("No valid pubToken was found in the service configuration");}if(!l){L.warning("No Legal text message found.");}return false;}return true;};this.userEnabled=function(){var u=sap.ushell.Container.getUser();if(!this.systemEnabled()){return false;}return u.getTrackUsageAnalytics();};this.start=function(){sap.ui.getCore().getEventBus().publish("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted");this._initUsageAnalyticsLogging();i=true;window.swa.custom2={ref:sap.ui.getCore().getConfiguration().getLanguage()};};this.init=function(u,s,b,r){I={usageAnalyticsTitle:u,iAgree:s,iDisagree:b,remindMeLater:r};if(this.systemEnabled()&&!i){if(!this.isSetUsageAnalyticsPermitted()){this.start();}else if(l){if(this.userEnabled()===true){this.start();}else if(this.userEnabled()===null||this.userEnabled()===undefined){this.showLegalPopup();}}}};this.setCustomAttributes=function(C){var b,P="attribute",s,d="custom",e,f,F="customFunction";if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}for(b=1;b<6;b++){e=d.concat(b+4);if(window.swa[e]!==undefined){continue;}s=P+b;if(C[s]===undefined){continue;}if(q.isFunction(C[s])){f=F+b;window[f]=C[s];window.swa[e]={ref:f};}else{window.swa[e]={ref:C[s]};}}};this.logCustomEvent=function(e,b,d){if(!this.userEnabled()&&this.isSetUsageAnalyticsPermitted()){return;}if(!this._isAnalyticsScriptLoaded()){this._addDelayedEvent(e,b,d);return;}if(d){d.unshift(b);d.unshift(e);window.swa.trackCustomEvent.apply(window.swa.trackCustomEvent,d);}else{window.swa.trackCustomEvent(e,b);}};window._trackingScriptsLoaded=function(){var b,t;A=true;for(b=0;b<a.length;b++){t=a[b];this.logCustomEvent(t.eventType,t.customEventValue,t.aAdditionalValues);}a=null;};this._initUsageAnalyticsLogging=function(){if(window.swa===undefined){window.swa={};}window.swa.pubToken=o.pubToken;window.swa.baseUrl=o.baseUrl;window.swa.bannerEnabled=false;window.swa.loggingEnabled=true;window.swa.visitorCookieTimeout=63113852;window.swa.dntLevel=1;window.swa.trackerReadyCallback=window._trackingScriptsLoaded.bind(this);window.swa.clicksEnabled=(o.logClickEvents!==false);window.swa.pageLoadEnabled=(o.logPageLoadEvents!==false);this._handlingTrackingScripts();};this._handlingTrackingScripts=function(){var d=document,g=d.createElement("script"),s=d.getElementsByTagName("script")[0];g.onerror=function(){L.warning("SWA scripts not loaded!");};g.type="text/javascript";g.defer=true;g.async=true;g.src=window.swa.baseUrl+"js/privacy.js";s.parentNode.insertBefore(g,s);};this._isAnalyticsScriptLoaded=function(){return A;};this.isSetUsageAnalyticsPermitted=function(){if(o.setUsageAnalyticsPermitted===undefined){return true;}return o.setUsageAnalyticsPermitted;};this._addDelayedEvent=function(e,b,d){var f={eventType:e,customEventValue:b,aAdditionalValues:d};a.push(f);};}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameterPersistence',["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log"],function(q,O,L){"use strict";var v=["value","extendedValue","noEdit","alwaysAskPlugin","_shellData","pluginData"];
function U(a){this._oAdapter=a;this._oData={};}
U.prototype._cleanseValue=function(V){var r=q.extend(true,{},V);for(var a in r){if(r.hasOwnProperty(a)&&v.indexOf(a)<0){delete r[a];}}return r;};
U.prototype._getSystemContextPromise=function(s){if(!s){L.warning("UserDefaultParameterPersistence: The systemContext was not provided, using defaultSystemContext as fallback");return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(c){return c.getSystemContext();});}return Promise.resolve(s);};
U.prototype.loadParameterValue=function(p,s){var d=new q.Deferred();this._getSystemContextPromise(s).then(function(s){var V=O.get([s.id,p],this._oData);if(V!==undefined){d.resolve(V);}else{this._oAdapter.loadParameterValue(p,s).done(function(o){var c=this._cleanseValue(o);d.resolve(c);}.bind(this)).fail(d.reject.bind(this));}}.bind(this));return d.promise();};
U.prototype.saveParameterValue=function(p,V,s){var d=new q.Deferred();var c;this._getSystemContextPromise(s).then(function(s){if(!V){return this.deleteParameter(p,s).done(d.resolve).fail(d.reject);}c=this._cleanseValue(V);if(V&&V.noStore===true){return d.resolve();}O.set([s.id,p],c,this._oData);return this._oAdapter.saveParameterValue(p,c,s).done(d.resolve).fail(d.reject);}.bind(this));return d.promise();};
U.prototype.deleteParameter=function(p,s){var d=new q.Deferred();this._getSystemContextPromise(s).then(function(s){if(this._oData[s.id]){delete this._oData[s.id][p];}return this._oAdapter.deleteParameter(p,s).done(d.resolve).fail(d.reject);}.bind(this));return d.promise();};
U.prototype.getStoredParameterNames=function(s){var d=new q.Deferred();this._getSystemContextPromise(s).then(function(s){this._oAdapter.getStoredParameterNames(s).done(function(r){r.sort();d.resolve(r);}).fail(d.reject.bind(d));}.bind(this));return d.promise();};
U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserDefaultParameters',["sap/ui/base/EventProvider","sap/base/Log","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/deepEqual","sap/base/util/isEmptyObject"],function(E,L,u,q,d,a){"use strict";var e="valueStored";var s=["value","noEdit","noStore","extendedValue","alwaysAskPlugin"];
function U(A,c,p,C){this._aPlugins=[];this._oUserDefaultParametersNames={};this._oWasParameterPersisted={};var t=this;var S=new E();function g(P){var v=(typeof P.getComponentData==="function"&&P.getComponentData()&&P.getComponentData().config&&P.getComponentData().config["sap-priority"])||0;if(typeof v!=="number"||isNaN(v)){return 0;}return v;}this._insertPluginOrdered=function(P,o){var b=g(o),i,f;for(i=0;(i<P.length)&&o;++i){f=g(P[i]);if(o&&(b>f)){P.splice(i,0,o);o=undefined;}}if(o){P.push(o);}return P;};this.registerPlugin=function(P){this._aPlugins=this._insertPluginOrdered(this._aPlugins,P);};this._getUserDefaultValueFromPlugin=function(P,b,o,v){var r;if(typeof P.getUserDefault==="function"){r=new Promise(function(f,h){P.getUserDefault(b,v,o).done(function(n){var R=n||v;f(R);}).fail(function(){L.error("invocation of getUserDefault(\""+b+"\") for plugin "+t._getComponentNameOfPlugin(P)+" rejected.",null,"sap.ushell.services.UserDefaultParameters");f(v);});});}else{r=Promise.resolve(v);}return r;};this._iterateOverPluginsToGetDefaultValue=function(P,o,b,f){return new Promise(function(r,h){f.loadPlugins("UserDefaults").done(function(){var i=this._aPlugins.reduce(function(j,k){var l=j.then(this._getUserDefaultValueFromPlugin.bind(null,k,P,b));return l;}.bind(this),Promise.resolve(o));i.then(r);}.bind(this)).fail(function(){L.error("Cannot get value for "+P+". One or more plugins could not be loaded.");h("Initialization of plugins failed");});}.bind(this));};this._getStoreDate=function(){return new Date().toString();};this._storeValue=function(P,v,f,o){if(f&&v.extendedValue){return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(b){return new Promise(function(r){b.getUserDefaultParameterNames(o).done(function(h){var i=this._extractKeyArrays(h);var R=i.extended.indexOf(P)<0;this._saveParameterValue(P,v,f,R,o).then(r);}.bind(this)).fail(function(){this._saveParameterValue(P,v,f,false,o).then(r);}.bind(this));}.bind(this));}.bind(this));}return this._saveParameterValue(P,v,f,false,o);};this._saveParameterValue=function(P,v,f,r,o){if(r){v.extendedValue=undefined;}if(f&&this._valueIsEmpty(v)){v=undefined;this._oWasParameterPersisted[P]=false;}else{v._shellData=q.extend(true,{storeDate:this._getStoreDate()},v._shellData);}return sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(b){return new Promise(function(h){b.saveParameterValue(P,v,o).always(function(){var i={parameterName:P,parameterValue:u.clone(v||{}),systemContext:o};S.fireEvent(e,i);h(P);});});});};this._getPersistedValue=function(P,o){return new Promise(function(r,b){sap.ushell.Container.getServiceAsync("UserDefaultParameterPersistence").then(function(f){f.loadParameterValue(P,o).done(r).fail(b);});});};this._valueIsEmpty=function(v){return!v||(!v.value&&!v.extendedValue);};this._haveSameMembersValue=function(o,O,m){return m.every(function(r){return o[r]===O[r]||d(o[r],O[r]);});};this._getUserDefaultParameterNames=function(b){if(!this._oUserDefaultParametersNames[b.id]){this._oUserDefaultParametersNames[b.id]=new Promise(function(r){sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(f){f.getUserDefaultParameterNames(b).done(function(P){var o=this._extractKeyArrays(P);var h=o.extended;var i=o.allParameters;var m=this._arrayToObject(i);r({aAllParameterNames:i,aExtendedParameterNames:h,oMetadataObject:m});}.bind(this));}.bind(this));}.bind(this));}return this._oUserDefaultParametersNames[b.id];};this._isRelevantParameter=function(P,o){return this._getUserDefaultParameterNames(o).then(function(r){if(!r.aAllParameterNames||r.aAllParameterNames.indexOf(P)===-1){throw new Error("The given parameter \""+P+"\" is not part of the list of parameters for the given system context.");}});};this.hasRelevantMaintainableParameters=function(b){var h=false;var G=[];return new Promise(function(r){this._getUserDefaultParameterNames(b).then(function(P){if(!a(P)&&P.aAllParameterNames){P.aAllParameterNames.forEach(function(f){var o=this.getValue(f,b);G.push(o);o.done(function(v){if(v&&!v.hasOwnProperty("noEdit")){h=true;}});}.bind(this));q.when.apply(undefined,G).done(function(){r(h);}).fail(function(){r();});}else{r();}}.bind(this));}.bind(this));};this.getValue=function(P,o){var D=new q.Deferred();this._isRelevantParameter(P,o).then(function(){return this._getPersistedValue(P,o).then(function(b){this._oWasParameterPersisted[P]=true;return b||{};}.bind(this)).catch(function(){return{value:undefined};});}.bind(this)).then(function(b){var v=u.clone(b);var f=(!b._shellData&&this._valueIsEmpty(b))||b.noStore||b.alwaysAskPlugin;if(!f){D.resolve(b);return;}return Promise.all([v,b,sap.ushell.Container.getServiceAsync("PluginManager")]);}.bind(this)).then(function(v){var V=v[0];var b=v[1];var f=v[2];return this._iterateOverPluginsToGetDefaultValue(P,b,o,f).then(function(n){if(!this._oWasParameterPersisted[P]||!this._haveSameMembersValue(V,n,s)){this._oWasParameterPersisted[P]=true;this._storeValue(P,n,false,o).then(function(){D.resolve(n);});}else{D.resolve(n);}}.bind(this)).catch(D.reject);}.bind(this)).catch(function(){D.resolve({value:undefined});});return D.promise();};this._addParameterValuesToParameters=function(P,b,o){var D=new q.Deferred();var f=[];b.forEach(function(h){var G=this.getValue(h,o);f.push(G);G.done(function(v){P[h].valueObject=v;});}.bind(this));q.when.apply(q,f).done(D.resolve.bind(D,P)).fail(D.reject.bind(D,P));return D.promise();};this._arrayToObject=function(P){var r={};P.forEach(function(b){r[b]={};});return r;};this._getComponentNameOfPlugin=function(P){try{return P.getMetadata().getComponentName()||"";}catch(b){return"'name of plugin could not be determined'";}};this._getEditorDataAndValue=function(D,b,f,m,o){var t=this;var h=[];var r=[];this._aPlugins.forEach(function(P){if(typeof P.getEditorMetadata==="function"){var i=new q.Deferred();h.push(i);try{var j=h.length-1;P.getEditorMetadata(m,o).done(function(R){r[j]=R;}).always(i.resolve).fail(function(){L.error("EditorMetadata for plugin "+t._getComponentNameOfPlugin(P)+"cannot be invoked.",null,"sap.ushell.services.UserDefaultParameters");i.resolve();});}catch(k){L.error("Error invoking getEditorMetaData on plugin: "+k+k.stack,null,"sap.ushell.services.UserDefaultParameters");i.resolve();}}});q.when.apply(q,h).done(function(){var P=[];var i=r.reverse().reduce(function(j,n){b.forEach(function(k){if(n[k]&&n[k].editorMetadata){j[k].editorMetadata=n[k].editorMetadata;}});return j;},m);b.forEach(function(j){if(!(i[j]&&i[j].editorMetadata)){P.push(j);}});t._addParameterValuesToParameters(i,b,o).done(function(j){var k=q.extend(true,{},j),K;f.forEach(function(l){if(k[l]){k[l].editorMetadata=k[l].editorMetadata||{};k[l].editorMetadata.extendedUsage=true;}});K=Object.keys(k).splice(0);K.forEach(function(l){var n;if(k[l].valueObject&&k[l].valueObject.noEdit===true){delete k[l];n=P.indexOf(l);if(n>=0){P.splice(n,1);}}});if(P.length>0){L.error("The following parameter names have no editor metadata and thus likely no configured plugin:\n\""+P.join("\",\n\"")+"\".");}D.resolve(k);}).fail(D.reject.bind(D));});};this.editorGetParameters=function(o){var D=new q.Deferred();Promise.all([sap.ushell.Container.getServiceAsync("PluginManager"),this._getUserDefaultParameterNames(o)]).then(function(r){var P=r[0];var b=r[1];if(b.oMetadataObject.length===0){D.resolve({});}else{P.loadPlugins("UserDefaults").done(function(){this._getEditorDataAndValue(D,b.aAllParameterNames,b.aExtendedParameterNames,b.oMetadataObject,o);}.bind(this)).fail(function(){L.error("One or more plugins could not be loaded");D.reject("Initialization of plugins failed");});}}.bind(this));return D.promise();};this._extractKeyArrays=function(P){var r={simple:P&&P.simple&&Object.keys(P.simple).sort()||[],extended:P&&P.extended&&Object.keys(P.extended).sort()||[]};var o=r.extended.filter(function(b){return r.simple.indexOf(b)<0;});r.allParameters=r.simple.concat(o).sort();return r;};this.editorSetValue=function(P,v,o){var D=new q.Deferred();this._storeValue(P,v,true,o).then(D.resolve);return D.promise();};this.attachValueStored=function(f){S.attachEvent(e,f);};this.detachValueStored=function(f){S.detachEvent(e,f);};}
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/UserInfo',["sap/base/Log","sap/ushell/Config","sap/base/util/ObjectPath"],function(L,C,O){"use strict";
function U(a,c){this.getId=function(){return sap.ushell.Container.getUser().getId();};this.getFirstName=function(){return sap.ushell.Container.getUser().getFirstName();};this.getLastName=function(){return sap.ushell.Container.getUser().getLastName();};this.getFullName=function(){return sap.ushell.Container.getUser().getFullName();};this.getEmail=function(){return sap.ushell.Container.getUser().getEmail();};this.getUser=function(){return sap.ushell.Container.getUser();};function f(t){return t.id!==sap.ushell.User.prototype.constants.NEW_DESIGN||C.last("/core/themePreview/sapHorizonEnabled");}this.getThemeList=function(){var d=new jQuery.Deferred();a.getThemeList().then(function(t){t.options=(t.options||[]).filter(f);return d.resolve(t);}).fail(function(t){L.error("getThemeList failed");});return d.promise();};this.updateUserPreferences=function(){var p=a.updateUserPreferences(sap.ushell.Container.getUser());p.fail(function(){L.error("updateAttributes: ");});return p;};this.getLanguageList=function(){var p=a.getLanguageList();p.fail(function(){L.error("getLanguageList failed");});return p;};this.getUserSettingList=function(){var p=a.getUserProfilePropertyValueLists();p.fail(function(){L.error("getUserProfilePropertyValueLists failed");});return p;};this.getUserSettingListEditSupported=function(){if(typeof a.getUserProfilePropertyValueLists!=="undefined"){return true;}return false;};this.getStateNewDesignSwitch=function(){return this._getNewDesignSetting().then(function(n){return n.stateNewDesignSwitch;});};this.activateNewDesign=function(){if(!C.last("/core/shellHeader/newDesignSwitchVisible")){L.warning("Warning while activating new design: The new design feature is not enabled.");return Promise.resolve();}var u=this.getUser(),o=u.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(o===sap.ushell.User.prototype.constants.NEW_DESIGN){L.warning("Warning while activating new design: The current theme is already the new design theme.");return Promise.resolve();}return Promise.all([this.updateThemeHistory(o),this.setTheme(sap.ushell.User.prototype.constants.NEW_DESIGN),this.updateNewDesignSetting(true)]);};this.deactivateNewDesign=function(){var u=this.getUser(),o=u.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(o!==sap.ushell.User.prototype.constants.NEW_DESIGN){L.warning("Cannot disable new design: New design theme is not the current theme.");return Promise.resolve();}return this._getThemeHistory().then(function(t){var r;if(t&&t.previousTheme){if(t.previousTheme===sap.ushell.User.prototype.constants.NEW_DESIGN){L.warning("Warning while disabling new design: Previous theme is same as the new design theme. Falling back to default theme.");r=O.get("services.Container.adapter.config.theme",window["sap-ushell-config"]);}else{r=t.previousTheme;}}else{L.warning("Warning while disabling new design: Previous theme is empty. Falling back to default theme.");r=O.get("services.Container.adapter.config.theme",window["sap-ushell-config"]);}return Promise.all([this.setTheme(r),this.updateThemeHistory(o),this.updateNewDesignSetting(false)]);}.bind(this));};this._getPersonalizer=function(n){return sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};try{return p.getPersonalizer({container:n,item:"1"},s);}catch(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);return Promise.reject(e);}});};this._getThemeHistory=function(){return this._getPersonalizer("themeHistory").then(function(p){return p.getPersData().then(function(t){return t||{previousTheme:false};});});};this.updateThemeHistory=function(o){return this._getPersonalizer("themeHistory").then(function(p){return p.setPersData({previousTheme:o});});};this._getNewDesignSetting=function(){return this._getPersonalizer("newDesignSetting").then(function(p){return p.getPersData().then(function(n){return n||{stateNewDesignSwitch:false};});});};this.updateNewDesignSetting=function(s){return this._getPersonalizer("newDesignSetting").then(function(p){C.emit("/core/shellHeader/newDesignSwitchActive",s);return p.setPersData({stateNewDesignSwitch:s});});};this._applyDarkMode=function(){return sap.ushell.Container.getServiceAsync("DarkModeSupport").then(function(d){if(C.last("/core/darkMode/enabled")&&d.canAutomaticallyToggleDarkMode()){d._toggleDarkModeBasedOnSystemColorScheme();}});};this._onThemeSwitchError=function(o,u,e,p){var i=o===sap.ushell.User.prototype.constants.NEW_DESIGN;u.setTheme(o);u.resetChangedProperty("theme");this.updateNewDesignSetting(i);L.error("Can not update selected theme",e);L.error("Error details",p);};this.setTheme=function(t){var n=t||"sap_fiori_3",u=this.getUser(),o=u.getTheme(sap.ushell.User.prototype.constants.themeFormat.ORIGINAL_THEME);if(n&&n!==o){u.setTheme(n);return this.updateUserPreferences(u).then(this._applyDarkMode.bind(this)).catch(this._onThemeSwitchError.bind(this,o,u));}return Promise.resolve();};}
U.hasNoAdapter=false;return U;},true);
sap.ui.predefine('sap/ushell/services/UserRecents',["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/base/util/ObjectPath","./_UserRecents/RecentsList","./_UserRecents/RecentActivity","./_UserRecents/RecentAppsUsage"],function(B,q,u,O,R,c,d){"use strict";
var U=B.extend("sap.ushell.services.UserRecents",{constructor:function(){this.oRecentSearches=new R("RecentSearches",10,U._compareSearchItems);this.oRecentDataSources=new R("RecentDataSources",6,U._compareDataSources);this.oRecentApps=new R("RecentApps",6,U._compareApps);this.oRecentActivity=new c(500);this.oAppsUsage=new d();}});
U._compareSearchItems=function(a,b){var r=false;if(a.oDataSource&&b.oDataSource){if(a.oDataSource.objectName&&b.oDataSource.objectName){r=((a.sTerm===b.sTerm)&&(a.oDataSource.objectName.value===b.oDataSource.objectName.value));}if(!a.oDataSource.objectName&&!b.oDataSource.objectName){r=(a.sTerm===b.sTerm);}}if(!a.oDataSource&&!b.oDataSource){r=(a.sTerm===b.sTerm);}return r;};
U._compareDataSources=function(a,b){if(a.objectName&&b.objectName){return a.objectName.value===b.objectName.value;}return false;};
U._compareApps=function(a,b){return a.semanticObject===b.semanticObject&&a.action===b.action;};
U.prototype.addActivity=function(a){var D=new q.Deferred();this.oRecentActivity.newItem(a).done(function(){this.oRecentActivity.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};
U.prototype.clearRecentActivities=function(){return this.oRecentActivity.clearAllActivities();};
U.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems();};
U.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems();};
U.prototype.noticeDataSource=function(D){var o=O.get("objectName.value",D)||"";var s=O.get("objectName",D)||"";var v=o.toLowerCase()==="$$all$$";var b=s.toLowerCase()==="$$all$$";if(!v&&!b){var a=new q.Deferred();this.oRecentDataSources.newItem(D).done(function(){this.oRecentDataSources.getRecentItems().done(a.resolve).fail(a.reject);}.bind(this)).fail(a.reject);return a.promise();}return this.oRecentDataSources.getRecentItems();};
U.prototype.addDataSourceActivity=U.prototype.noticeDataSource;
U.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems();};
U.prototype.noticeSearch=function(s){var D=new q.Deferred();this.oRecentSearches.newItem(s).done(function(){this.oRecentSearches.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};
U.prototype.addSearchActivity=U.prototype.noticeSearch;
U.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems();};
U.prototype.noticeApp=function(a){var D=new q.Deferred();this.oRecentApps.newItem(a).done(function(){this.oRecentApps.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};
U.prototype.addAppActivity=U.prototype.noticeApp;
U.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems();};
U.prototype.addAppUsage=function(h){var r=u.getBasicHash(h);this.oAppsUsage.addAppUsage(r);};
U.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage();};
U.hasNoAdapter=true;return U;},true);
sap.ui.predefine('sap/ushell/services/VisualizationDataProvider',["sap/ushell/resources","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/base/Log"],function(r,O,q,u,c,L){"use strict";var D=u.DisplayFormat;
function V(){this.S_COMPONENT_NAME="sap.ushell.services.VisualizationDataProvider";this._init.apply(this,arguments);}
V.prototype._init=function(l){this.oLaunchPageAdapter=l;this.oCatalogTilePromise=null;};
V.prototype._getCatalogTileIndex=function(){if(this._oCatalogTileIndexPromise){return this._oCatalogTileIndexPromise;}var l=this.oLaunchPageAdapter;return l._getCatalogTileIndex();};
V.prototype._getCatalogTiles=function(){if(this.oCatalogTilePromise){return this.oCatalogTilePromise;}var l=this.oLaunchPageAdapter;this.oCatalogTilePromise=new Promise(function(a,b){l.getCatalogs().then(function(d){var e=[];var C=[];var f=[];var o={};for(var i=0;i<d.length;i++){if(typeof d[i].ui2catalog==="undefined"||d[i].ui2catalog.getType()!=="REMOTE"){e.push(l.getCatalogTiles(d[i]).then(function(g){C.push(g);}));}}q.when.apply(null,e).done(function(){f=[].concat.apply([],C);for(var y=0;y<f.length;y++){o[l.getCatalogTileId(f[y])]=f[y];}a(o);}).fail(b);}).fail(b);});return this.oCatalogTilePromise;};
V.prototype.getVisualizationData=function(){var l=this.oLaunchPageAdapter,C;return Promise.all([this._getCatalogTiles(),this._getCatalogTileIndex()]).then(function(R){var o=R[0];var a=R[1];return Object.keys(o).reduce(function(d,i){C=o[i];var I=l.isTileIntentSupported(C);if(!I){return d;}var v=C.getChip().getBaseChipId();var t;if(!l.getCatalogTilePreviewTitle(C)){t=l.getCatalogTileView(C);}d.visualizations[i]={vizType:v,title:l.getCatalogTilePreviewTitle(C),subTitle:l.getCatalogTilePreviewSubtitle(C),icon:l.getCatalogTilePreviewIcon(C),info:l.getCatalogTilePreviewInfo(C),keywords:l.getCatalogTileKeywords(C),size:l.getCatalogTileSize(C),indicatorDataSource:l.getCatalogTilePreviewIndicatorDataSource(C),url:l.getCatalogTileTargetURL(C),numberUnit:l.getCatalogTileNumberUnit(C),isCustomTile:l.isCustomTile&&l.isCustomTile(C)};if(t){t.destroy();}if(a[i]){d.visualizations[i]._instantiationData={platform:"ABAP",simplifiedChipFormat:false,chip:a[i]};}if(d.visualizations[i].isCustomTile&&!d.vizTypes[v]){d.vizTypes[v]={id:v,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(C,d.visualizations[i].size)},tileSize:d.visualizations[i].size};}return d;}.bind(this),{visualizations:{},vizTypes:{},page:{}});}.bind(this)).catch(function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("VisualizationDataProvider.CannotLoadData"),detail:e};return Promise.reject(E);}.bind(this));};
V.prototype._getDisplayFormats=function(C,t){var a=["tile"];var d="tile";var T=C.getContract("types");if(T){a=T.getAvailableTypes();d=T.getDefaultType();}return{supported:this._mapDisplayFormats(a,t),default:this._mapDisplayFormats([d],t)[0]};};
V.prototype._mapDisplayFormats=function(d,t){var o={tile:D.Standard,tilewide:D.StandardWide,link:D.Compact,flat:D.Flat,flatwide:D.FlatWide};return d.map(function(s){s=o[s];if(s===D.Standard&&t==="1x2"){return D.StandardWide;}return s;});};
V.prototype.loadVizType=function(b){var s={chipId:b};return c.loadChipInstanceFromSimplifiedChip(s).then(function(C){var S=c.getTileSize(C);return{id:b,url:undefined,vizOptions:{displayFormats:this._getDisplayFormats(C,S)},tileSize:S};}.bind(this)).catch(function(e){L.error("The chipInstance '"+b+"' could not be loaded: ",e);});};
V.hasNoAdapter=false;return V;});
sap.ui.predefine('sap/ushell/services/VisualizationInstantiation',["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap","sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm","sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage","sap/ushell/services/_VisualizationInstantiation/VizInstanceLink","sap/m/library","sap/ushell/library","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(V,a,b,c,d,M,u,O,E,r){"use strict";var L=M.LoadState;var D=u.DisplayFormat;
function e(){}
e.prototype.instantiateVisualization=function(v){var o;var p=O.get("_instantiationData.platform",v);var f={title:v.title,subtitle:v.subtitle,icon:v.icon,keywords:v.keywords,instantiationData:v._instantiationData,indicatorDataSource:v.indicatorDataSource,dataSource:v.dataSource,contentProviderId:v.contentProviderId,vizConfig:v.vizConfig,supportedDisplayFormats:v.supportedDisplayFormats,displayFormat:v.displayFormatHint,numberUnit:v.numberUnit,dataHelpId:v.vizId,preview:v.preview};if(f.indicatorDataSource){f.indicatorDataSource.ui5object=true;}if((p==="ABAP"||p==="CDM")&&f.displayFormat===D.Compact){this._cleanInstantiationDataForLink(f);p="LINK";}switch(p){case"ABAP":o=new a(f);break;case"CDM":o=new b(f);break;case"LINK":o=new d(f);break;case"LAUNCHPAGE":o=new c(f);break;default:return new V({state:L.Failed});}o.setTargetURL(v.targetURL);if(p!=="LINK"){o.setInfo(v.info);}if(r.isStandardVizType(v.vizType)){try{o.load().then(function(){E.emit("VizInstanceLoaded",v.id);});}catch(g){o.setState(L.Failed);E.emit("VizInstanceLoaded",v.id);}}else{o.setState(L.Loading);E.once("CoreResourcesComplementLoaded").do(function(){try{o.load(true).then(function(){o.setState(L.Loaded);});}catch(g){o.setState(L.Failed);}});}return o;};
e.prototype._cleanInstantiationDataForLink=function(v){delete v.info;delete v.icon;delete v.keywords;delete v.instantiationData;delete v.dataSource;delete v.contentProviderId;delete v.vizConfig;delete v.numberUnit;delete v.indicatorDataSource;delete v.preview;};
e.hasNoAdapter=true;return e;});
sap.ui.predefine('sap/ushell/services/_AppState/AppState',["sap/base/Log","sap/ui/thirdparty/jquery"],function(L,q){"use strict";
function A(S,k,m,D,a,b,t,p,P){this._oServiceInstance=S;this._sKey=k;this._sData=D;this._sAppName=a;this._sACHComponent=b;this._bTransient=t;this._bModifiable=m;this._sPersistencyMethod=p;this._oPersistencySettings=P;if(this._bModifiable){this.setData=function(o){try{this._sData=JSON.stringify(o);}catch(e){L.error("Data can not be serialized","sap.ushell.services.AppState.AppState");this._sData=undefined;}};this.save=s.bind(this);this.delete=d.bind(this);}}
function s(){var D=new q.Deferred();this._oServiceInstance._saveAppState(this._sKey,this._sData,this._sAppName,this._sACHComponent,this._bTransient,this._sPersistencyMethod,this._oPersistencySettings).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}
function d(){var D=new q.Deferred();this._oServiceInstance._deleteAppState(this._sKey).done(function(){D.resolve();}).fail(function(m){D.reject(m);});return D.promise();}
A.prototype.getData=function(){var o;if(this._sData===undefined||this._sData===""){return undefined;}try{o=JSON.parse(this._sData);}catch(e){L.error("Could not parse ["+this._sData+"]"+e);}return o;};
A.prototype.getPersistencyMethod=function(){return this._sPersistencyMethod;};
A.prototype.getPersistencySettings=function(){return this._oPersistencySettings;};
A.prototype.getKey=function(){return this._sKey;};
return A;});
sap.ui.predefine('sap/ushell/services/_AppState/AppStatePersistencyMethod',[],function(){"use strict";
function A(){this.PersonalState="PersonalState";this.ACLProtectedState="ACLProtectedState";this.PublicState="PublicState";this.AuthorizationProtectedState="AuthorizationProtectedState";}
return new A();});
sap.ui.predefine('sap/ushell/services/_AppState/AppStatePersistencySettings',[],function(){"use strict";
function A(c,s,r,t){this.CreatorUserID=c;this.SelectedUserIDs=s;this.RetrievalMapping=r;this.Expiration=t;}
return A;});
sap.ui.predefine('sap/ushell/services/_AppState/LimitedBuffer',[],function(){"use strict";
function L(c){this.index=-1;this.capacity=c;this.array=[];}
L.prototype._clear=function(){this.array=[];this.index=-1;};
L.prototype.addAsHead=function(k,v,p,P){this.index=(this.index+1)%this.capacity;this.array[this.index]={key:k,value:v,persistencyMethod:p,persistencySettings:P};};
L.prototype.getByKey=function(k){var i,e;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){return this.array[e];}}return undefined;};
L.prototype.deleteByKey=function(k){var i,e,r=false;for(i=0;i<=this.capacity-1;i=i+1){e=(this.capacity+this.index-i)%this.capacity;if(this.array[e]&&this.array[e].key===k){delete this.array[e];r=true;}}return r;};
return L;});
sap.ui.predefine('sap/ushell/services/_AppState/Sequentializer',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function S(){this.oLastPromise=new q.Deferred();this.oLastPromise.resolve();}
S.prototype.addToQueue=function(f){var n=new q.Deferred();this.oLastPromise.always(function(){var r=f();r.done(function(){n.resolve.apply(n,arguments);}).fail(function(){n.reject.apply(n,arguments);});});this.oLastPromise=n;return n.promise();};
return S;});
sap.ui.predefine('sap/ushell/services/_AppState/SequentializingAdapter',["sap/ushell/services/_AppState/Sequentializer"],function(S){"use strict";
function a(u){this._oSequentializer=new S();this._oUnderlyingAdapter=u;}
a.prototype.saveAppState=function(k,s,d,A,c,p,P){var f;f=this._oUnderlyingAdapter.saveAppState.bind(this._oUnderlyingAdapter,k,s,d,A,c,p,P);return this._oSequentializer.addToQueue(f);};
a.prototype.loadAppState=function(k){return this._oUnderlyingAdapter.loadAppState(k);};
a.prototype.deleteAppState=function(k){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.deleteAppState){return this._oUnderlyingAdapter.deleteAppState(k);}};
a.prototype.getSupportedPersistencyMethods=function(){if(this._oUnderlyingAdapter&&this._oUnderlyingAdapter.getSupportedPersistencyMethods){return this._oUnderlyingAdapter.getSupportedPersistencyMethods();}return[];};
return a;});
sap.ui.predefine('sap/ushell/services/_AppState/WindowAdapter',["sap/ushell/services/_AppState/LimitedBuffer","sap/base/Log","sap/ui/thirdparty/jquery"],function(L,a,q){"use strict";var W=500;var C=18;
function b(){this._init.apply(this,arguments);}
b.prototype._init=function(s,B,c){var i=c&&c.config&&c.config.initialAppStates||{};var I=c&&c.config&&c.config.initialAppStatesPromise;this._oServiceInstance=s;this._oBackendAdapter=B;if(!b.prototype.data){b.prototype.data=new L(W);}if(I){I.then(function(i){if(typeof i==="object"){Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});}});}Object.keys(i).forEach(function(k){b.prototype.data.addAsHead(k,i[k]);});};
b.prototype.saveAppState=function(k,s,d,A,c,t,p,P){this.sComponent=c;var D=new q.Deferred();b.prototype.data.addAsHead(k,d,p,P);if(this._oBackendAdapter&&!t){return this._oBackendAdapter.saveAppState(k,s,d,A,c,p,P);}D.resolve();return D.promise();};
b.prototype._checkIfTransient=function(k){return k.startsWith("TAS");};
b.prototype.loadAppState=function(k){var d=new q.Deferred(),c=b.prototype.data.getByKey(k);if(c){setTimeout(function(){d.resolve(k,c.value,c.persistencyMethod,c.persistencySettings);},0);return d.promise();}try{if(window.opener&&window.opener.sap&&window.opener.sap.ushell){var A=window.opener.sap.ui.require("sap/ushell/services/AppState").WindowAdapter.prototype.data.getByKey(k);if(A){d.resolve(k,A.value);return d.promise();}}}catch(e){if(e.code===C){a.warning("AppState.js - loadAppState: Opener is not of the same origin and cannot be used for AppState resolving.");}else{a.warning("AppState.js - loadAppState: Opener is a FLP but AppState could not get resolved from there.");}}if(this._oBackendAdapter&&!this._checkIfTransient(k)){this._oBackendAdapter.loadAppState(k).done(function(k,D,p,f){b.prototype.data.addAsHead(k,D);d.resolve(k,D,p,f);}).fail(d.reject.bind(d));return d.promise();}d.reject("AppState.js - loadAppState: Application State could not be loaded");return d.promise();};
b.prototype.deleteAppState=function(k){var d=new q.Deferred();b.prototype.data.deleteByKey(k);if(this._oBackendAdapter&&this._oBackendAdapter.deleteAppState&&!this._checkIfTransient(k)){return this._oBackendAdapter.deleteAppState(k);}d.resolve();return d.promise();};
b.prototype.getSupportedPersistencyMethods=function(){if(this._oBackendAdapter&&this._oBackendAdapter.getSupportedPersistencyMethods){return this._oBackendAdapter.getSupportedPersistencyMethods();}return[];};
return b;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Formatter',[],function(){"use strict";
function f(i){return"#"+i.semanticObject+"-"+i.action+"{"+a(i.signature)+"}";}
function p(i){var m=i.match(/^#(.+?)-(.+?)({(.+)})?$/);if(!m){throw"Cannot parse inbound";}var r={semanticObject:m[1],action:m[2],signature:{parameters:{}}};if(!m[3]){return r;}r.signature=b(m[4]);return r;}
function a(i){var I=i||{},P=I.parameters||{},t={optional:"[FORMAT]",required:"FORMAT"},F={regexp:"/VALUE/",reference:"@VALUE@",value:"VALUE",plain:"VALUE",_unknown:"?VALUE?"},A={allowed:"<+>",notallowed:"<->",ignored:"<o>",_unknown:"<?>"};var h=P&&Object.prototype.toString.apply(P)==="[object Object]"&&Object.keys(P).length>0;if(!h){return"<no params>"+(A[I.additionalParameters]||A._unknown);}var r=[];Object.keys(P).forEach(function(s){var o=P[s],c=o.required?"required":"optional",d=o.filter&&o.filter.value,e=o.defaultValue&&o.defaultValue.value,g=(o.filter&&o.filter.format)||"plain",j=(o.defaultValue&&o.defaultValue.format)||"plain";var v=[],k=F[g]||F._unknown,l=F[j]||F._unknown;if(d){v.push(t["required"].replace("FORMAT",k.replace("VALUE",d)));}if(e){v.push(t["optional"].replace("FORMAT",l.replace("VALUE",e)));}r.push(t[c].replace("FORMAT",s+":"+v.join("")));});return r.join(",")+(A[I.additionalParameters]||A._unknown);}
function b(c){function d(v){var V=[{re:new RegExp(/^[/](.+)[/]$/),format:"regexp"},{re:new RegExp(/^[@](.+)[@]$/),format:"reference"},{re:new RegExp(/^[?](.+)[?]$/),format:"???"}].reduce(function(r,D){var m=v.match(D.re);if(r){return r;}if(!m){return null;}return{format:D.format,value:m[1]};},null);if(V){return V;}return{value:v};}function e(j){var n,k,l,m,o,w,M,q,t,O,R,N;N="<no params>";n="[^\\]\\[]";R="("+n+"+?):("+n+"*)(.*)";O="\\["+R+"\\]";t=N+"|"+O+"|"+R;q=new RegExp("^"+t+"$");o={success:false,name:null,value:{}};M=j.match(q);if(!M){return o;}w=M.shift();while(M.length>0){m=M.shift();l=M.shift();k=M.shift();if(m){o.name=m;if(l){o.value.filter=d(l);}if(k){o.value.defaultValue=d(k.replace(/\[(.+)\]/,"$1"));}o.value.required=(w.charAt(0)!=="[");}}o.success=true;return o;}function g(j){return[{"<+>":"allowed"},{"<->":"notallowed"},{"<o>":"ignored"}].reduce(function(R,o,I,k){if(R){return R;}var l=Object.keys(o)[0];if(j===l){return o[l];}return null;},null);}function s(P){var I=[];P.split(":").reduce(function(j,n,k,l){var v,N,V;if(k===0){return n;}if(k<l.length-1){V=n.split(",");if(V.length>1){N=V.pop();v=V.join(",");}else{return j+":"+n;}}else{v=n;}I.push([j,v].join(":"));return N;},"");return I;}var r={parameters:{}};var A=c.substr(c.length-3,3);var h=!!A.match(/<[?o+-]>/);var P=c;if(h){P=c.substr(0,c.length-3);}var S=s(P);S.forEach(function(j){var o=e(j);if(!o.success){throw new Error("Cannot parse parameters from "+c);}if(o.name){r.parameters[o.name]=o.value;}});if(h){var i=g(A);if(i){r.additionalParameters=g(A);}}else{r.additionalParameters="ignored";}return r;}
return{formatInboundSignature:a,parseInboundSignature:b,parseInbound:p,formatInbound:f};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundIndex',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";
function g(){return this.index.all;}
function a(S){if(S==="*"||S===undefined){return this.index.all;}return(this.index.segment[S]||[]).concat(this.index.always);}
function b(T){return T.map(function(d){return this.index.tag[d]||[];},this).reduce(function(u,I){Array.prototype.push.apply(u,I.filter(function(o){return o.isAlreadyInUnion?false:(o.isAlreadyInUnion=true);}));return u;},[]).map(function(I){delete I.isAlreadyInUnion;return I;});}
var i={getSegment:a,getAllInbounds:g,getSegmentByTags:b};
function t(I,o){var T=O.get("signature.parameters.sap-tag.defaultValue.value",I);if(!T){return;}if(!o.tag[T]){o.tag[T]=[];}o.tag[T].push(I);}
function s(I,o){var S=I.semanticObject;if(S==="*"){o.always.push(I);}else{if(!o.segment[S]){o.segment[S]=[];}o.segment[S].push(I);}}
function c(I){var o={all:I,segment:{},always:[],tag:{}};I.forEach(function(d,e){if(!d){L.warning("Void inbound provided to indexer","the inbound will be skipped");return;}t(d,o);s(d,o);});i.index=o;return i;}
return{createIndex:c,private:{tagInbound:t,createIndex:c,segmentInbound:s}};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/InboundProvider',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/InboundIndex"],function(v,i){"use strict";
function I(){this._init.apply(this,arguments);}
;
I.prototype._init=function(r){this._fnRetrieveInbounds=r;this._oInboundsRetrievalPromise=null;};
I.prototype.getInbounds=function(s){if(s){return this._getSomeInbounds(s);}return this._getAllInbounds();};
I.prototype._getSomeInbounds=function(s){var t=this;return new Promise(function(r,R){t._fnRetrieveInbounds(s).done(function(a){r(i.createIndex(a.concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});};
I.prototype._getAllInbounds=function(){var t=this;if(this._oInboundsRetrievalPromise){return this._oInboundsRetrievalPromise;}this._oInboundsRetrievalPromise=new Promise(function(r,R){t._fnRetrieveInbounds().done(function(a){r(i.createIndex((a||[]).concat(v.getInbounds())));}).fail(function(){R.apply(null,arguments);});});return this._oInboundsRetrievalPromise;};
return I;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/ParameterMapping',["sap/base/Log"],function(L){"use strict";
function m(M){var n={},o=M.intentParamsPlusAllDefaults;Object.keys(o).sort().forEach(function(p){var r=g(p,M.inbound.signature,o[p]);if(Array.isArray(M.intentParamsPlusAllDefaults[p])){if(n[r]){L.error("collision of values during parameter mapping : \""+p+"\" -> \""+r+"\"");}else{n[r]=M.intentParamsPlusAllDefaults[p];}}});M.mappedIntentParamsPlusSimpleDefaults=n;}
function g(p,s,P){if(!P||!Array.isArray(P)){return p;}if(s&&s.parameters&&s.parameters[p]&&s.parameters[p].renameTo){return s.parameters[p].renameTo;}return p;}
return{mapParameterNamesAndRemoveObjects:m,getRenameParameterName:g};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations',["sap/base/Log","sap/base/util/deepExtend","sap/ui/generic/app/navigation/service/SelectionVariant"],function(L,d,S){"use strict";var a="sap.ushell.services.ClientSideTargetResolution.PrelaunchOperations";
function _(A){if(!A){return Promise.resolve(null);}return sap.ushell.Container.getServiceAsync("AppState").then(function(i){return new Promise(function(r,R){i.getAppState(A).done(function(s){r(s);}).fail(function(E){R(E);});});});}
function b(P,M,s,i,D){if(P.startupParametersModified){M.mappedIntentParamsPlusSimpleDefaults=i;}if(P.defaultedParameterNamesModified){M.mappedDefaultedParamNames=D;}if(P.selectionVariantModified){return sap.ushell.Container.getServiceAsync("AppState").then(function(A){var N=A.createEmptyAppState(undefined,true);N.setData({selectionVariant:s.toJSONObject()});return new Promise(function(r,R){N.save().done(function(){M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];r(M);}).fail(function(t){R(t);});});});}return Promise.resolve(M);}
function c(O){var s=O.type;switch(s){case"merge":case"split":return s+" - source: "+O.source+" & target: "+O.target;case"delete":return s+" - target: "+O.target;default:return"";}}
function e(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].Low;}return undefined;}
function f(P,s){if(s.getSelectOption(P)){return s.getSelectOption(P)[0].High;}return undefined;}
function g(P,s){if(s[P]){return s[P][0];}return undefined;}
function h(O,s,i){var r=O.source[0],t=O.source[1],u=e(r,s),v=e(t,s),w=g(r,i),x=g(t,i),y,z,T=O.target;function A(V,B){if(B===undefined||V===B){return V;}return undefined;}if(u&&v){y=A(u,w);z=A(v,x);}else if(w&&x){y=A(w,u);z=A(x,v);}if(y&&z&&!s.getSelectOption(T)&&!i.hasOwnProperty(T)){s.addSelectOption(T,"I","BT",y,z);return{selectionVariantModified:true,startupParametersModified:false,defaultedParameterNamesModified:false};}return{};}
function j(O,s,i){var t=O.target,r=O.source;if(!s.getSelectOption(r)){L.error("Invalid split operation: "+r+" does not exist in selection variant");return false;}if(s.getSelectOption(t[0])){L.error("Invalid split operation: "+t[0]+" already exists in selection variant");return false;}if(s.getSelectOption(t[1])){L.error("Invalid split operation: "+t[1]+" already exists in selection variant");return false;}if(i[t[0]]){L.error("Invalid split operation: "+t[0]+" already exists in startup parameters");return false;}if(i[t[1]]){L.error("Invalid split operation: "+t[1]+" already exists in startup parameters");return false;}return true;}
function k(O,s,i){var t=O.target,r=O.source,C=j(O,s,i);if(C){var u=e(r,s),v=f(r,s);s.addSelectOption(t[0],"I","EQ",u,null);i[t[0]]=[u];s.addSelectOption(t[1],"I","EQ",v||u,null);i[t[1]]=[v||u];return{selectionVariantModified:true,startupParametersModified:true,defaultedParameterNamesModified:false};}return{};}
function l(O,s,r,D){var t=O.target,u={selectionVariantModified:false,startupParametersModified:false,defaultedParameterNamesModified:false};for(var i=0;i<t.length;i++){var T=t[i];if(T==="sap-xapp-state"){L.warning("Cannot execute delete: 'sap-xapp-state' is not allowed to be deleted");continue;}if(s.getParameter(T)){s.removeParameter(T);u.selectionVariantModified=true;}if(s.getSelectOption(T)){s.removeSelectOption(T);u.selectionVariantModified=true;}if(r[T]){delete r[T];u.startupParametersModified=true;}var v=D.indexOf(T);if(v>-1){D.splice(v,1);u.defaultedParameterNamesModified=true;}}return u;}
function m(P){var i;if(P===""){return[];}try{i=JSON.parse(P);}catch(r){L.error("Cannot parse operation array: sap-prelaunch-operations should be in json format.");return[];}if(!Array.isArray(i)){L.error("Invalid operation array: sap-prelaunch-operations should be an array.");return[];}return i;}
function n(P){if(P.length===0){return null;}var v={split:true,merge:true,delete:true};var i=P.filter(function(O){return!v[O.type];});if(i.length>0){L.error("Invalid operation: the following sap-prelaunch-operations are invalid: "+i.join(", "));return null;}var s=P.some(function(O){return O.type==="split"&&O.target[0]===O.target[1];});if(s){L.error("Invalid operation: split operation contains the same target value. Use two different target values instead.");return null;}var I=P.some(function(O){if(O.type==="split"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.source!=="string"||!Array.isArray(O.target)||Object.keys(O).length!==3||Object.keys(O.target).length!==2;}if(O.type==="merge"){return!O.hasOwnProperty("source")||!O.hasOwnProperty("target")||typeof O.target!=="string"||!Array.isArray(O.source)||Object.keys(O).length!==3||Object.keys(O.source).length!==2;}if(O.type==="delete"){return!O.hasOwnProperty("target")||!Array.isArray(O.target)||Object.keys(O).length!==2;}});if(I){L.error("Invalid operation: one or more operations are specified in an incorrect format.");return null;}return P;}
function p(P){var i=m(P);return n(i);}
function o(s,P,i,D){var r=(L.getLevel()>=L.Level.DEBUG)?[]:null,t={selectionVariantModified:false,startupParametersModified:false};P.forEach(function(O){var E={};switch(O.type){case"split":E=k(O,s,i);break;case"merge":E=h(O,s,i);break;case"delete":E=l(O,s,i,D);break;default:L.error("Invalid operation: "+O.type+" prelaunch operation type is not supported");}if(r){var I=Object.keys(E).length!==0?"\u2705":"\u274c";r.push(I+" "+c(O));}if(Object.keys(E).length===0){L.warning("Cannot execute "+c(O));}t.selectionVariantModified=t.selectionVariantModified||E.selectionVariantModified;t.startupParametersModified=t.startupParametersModified||E.startupParametersModified;t.defaultedParameterNamesModified=t.defaultedParameterNamesModified||E.defaultedParameterNamesModified;});if(r){L.debug(a+"\n"+r.join("\n"));}return t;}
function q(M,P){if(!P){return Promise.resolve(M);}var s=M.mappedIntentParamsPlusSimpleDefaults,D=M.mappedDefaultedParamNames,i=s["sap-xapp-state"]&&s["sap-xapp-state"][0],r=p(P);if(!r||r.length===0){return Promise.resolve(M);}return _(i).then(function(A){var t=A?A.getData():{},C=d({},s),u=d([],D),v;if(t.selectionVariant){v=new S(JSON.stringify(t.selectionVariant));}else{v=new S();}var w=o(v,r,C,u);return b(w,M,v,C,u);});}
return{executePrelaunchOperations:q,parseAndValidateOperations:p};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Search',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/TechnicalParameters","sap/base/Log","sap/ui/thirdparty/jquery"],function(u,U,v,f,t,L,q){"use strict";var A=[undefined,"GUI","WDA","UI5"];
function a(M,I){var R=M.inbound.resolutionResult;if(!R){return"";}return["applicationType","ui5ComponentName","url","additionalInformation","text"].map(function(K){if(I){return R.hasOwnProperty(K)?K+":"+R[K]:"";}return R.hasOwnProperty(K)?R[K]:"";}).join("");}
function b(M){return M.sort(function(s,y){if((s["sap-priority"]||0)-(y["sap-priority"]||0)!==0){return-((s["sap-priority"]||0)-(y["sap-priority"]||0));}if(s.priorityString<y.priorityString){return 1;}if(s.priorityString>y.priorityString){return-1;}var S=a(s);var z=a(y);if(S<z){return 1;}else if(S>z){return-1;}return 0;});}
function e(I,M){var s;if(I&&I["sap-priority"]&&I["sap-priority"][0]){s=parseInt(I["sap-priority"][0],10);if(!isNaN(s)){M["sap-priority"]=s;}}return;}
function m(V,F,K,M){var s;if(!F){return true;}if(!V&&V!==""){return false;}s=F.value;if(F.format==="reference"){if(/UserDefault\.extended\./.test(s)){L.error("Illegal inbound: extended user default '"+s+"' used as filter");return false;}if(K.hasOwnProperty(s)){return V===K[s];}M[s]=true;return true;}if(F.format==="value"||F.format==="plain"||F.format===undefined){return V===F.value;}else if(F.format==="regexp"){return!!V.match("^"+F.value+"$");}L.error("Illegal oFilter format");return false;}
function g(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.ui"]&&M.inbound.resolutionResult["sap.ui"].technology;}
function c(M){return M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult.appId;}
function d(I,s,K,M,D){var y={},z={};Object.keys(I).forEach(function(P){if(P!=="sap-ushell-defaultedParameterNames"){y[P]=I[P];}});if(!s){return y;}Object.keys(s).forEach(function(P){var T=s[P],B,V=false;if(!y[P]&&T.hasOwnProperty("defaultValue")){if(T.defaultValue.format&&T.defaultValue.format==="reference"){B=T.defaultValue.value;if(K.hasOwnProperty(B)){if(typeof K[B]==="string"){y[P]=[K[B]];V=true;}else if(typeof K[B]==="object"){y[P]=K[B];V=true;}}else{y[P]=[T.defaultValue];M.push(T.defaultValue.value);}}else{y[P]=[T.defaultValue.value];V=true;}if(V){z[P]=true;}}});Object.keys(z).sort().forEach(function(P){D.push(P);});return y;}
function h(M,I){M.resolutionResult={contentProviderId:I.contentProviderId};if(I&&I.resolutionResult&&I.resolutionResult.hasOwnProperty("sap.platform.runtime")){M.resolutionResult["sap.platform.runtime"]=I.resolutionResult["sap.platform.runtime"];}Object.keys(M.intentParamsPlusAllDefaults).slice(0).forEach(function(N){if(!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!M.resolutionResult.oNewAppStateMembers){M.resolutionResult.oNewAppStateMembers={};}M.resolutionResult.oNewAppStateMembers[N]=M.intentParamsPlusAllDefaults[N];}});}
function i(R,M){R.forEach(function(s){M[s]=true;});}
function j(M){var T=M.intentParamsPlusAllDefaults["sap-ui-tech-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-tech-hint"][0];var I=M.defaultedParamNames&&(M.defaultedParamNames.indexOf("sap-ui-tech-hint")>=0);if(T&&g(M)===T){return I?1:2;}return 0;}
function k(M){var s=M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"]&&M.intentParamsPlusAllDefaults["sap-ui-app-id-hint"][0];if(s&&(s===c(M))){return 1;}return 0;}
function l(M,y){function z(N){var s="000"+N;return s.substr(s.length-3);}return["AIDM="+k(M),"CURCP="+(y.isCurrentContentProvider?"1":"0"),M.genericSO?"g":"x","TECM="+j(M),"MTCH="+z(y.countMatchingParams),"MREQ="+z(y.countMatchingRequiredParams),"NFIL="+z(y.countMatchingFilterParams),"NDEF="+z(y.countDefaultedParams),"POT="+z(y.countPotentiallyMatchingParams),"RFRE="+z(999-y.countFreeInboundParams),"TECP="+n(M)].join(" ");}
function n(M){var T=g(M);var P=A.indexOf(T);return Math.max(0,P);}
function o(I,s){var y=false;if(I.signature.additionalParameters==="allowed"||I.signature.additionalParameters==="ignored"){return true;}if(I.signature.additionalParameters==="notallowed"||I.signature.additionalParameters===undefined){y=Object.keys(s).every(function(P){return!((!I.signature.parameters[P]&&P.indexOf("sap-")!==0));});}else{L.error("Unexpected value of inbound for signature.additionalParameters");}return y;}
function p(I,s,K,C,D){function y(N,M,B){var E=f.formatInbound(B);N[E]=M.noMatchReason+(M.noMatchDebug?"| DEBUG: "+M.noMatchDebug:"");}var z=C?C():new q.Deferred().resolve(null).promise();return z.then(function(B){var M=s.reduce(function(R,E){var F=E.contentProviderId||"";var G=K[F]||{};if(!R.missingReferences[F]){R.missingReferences[F]={};}var H=x(I,E,G,R.missingReferences[F],B?B[F]:null);if(H.matches){R.matchResults.push(H);}else if(D){y(R.noMatchReasons,H,E);}return R;},{matchResults:[],noMatchReasons:{},missingReferences:{}});return q.when(M);});}
function r(I,s,y,D,K,M){var S=Object.keys(I).every(function(P){var V=s[P],z=V&&V[0],B=I[P];if(B.required&&(z===null||z===undefined)){return false;}if(B.filter){if(!m(z,B.filter,K,M)){return false;}}return true;});return S;}
function w(I,s,y,D,z){var B=I.signature.parameters,C=0,E=0,F=0,G=0,H=false,S={};function J(P){return!t.isTechnicalParameter(P);}var K=Object.keys(y).filter(J);var M=D.filter(J);Object.keys(B).filter(J).forEach(function(P){var V=s[P],O=V&&V[0],Q=B[P],R=y.hasOwnProperty(P);if(R){++C;if(Q.filter){++F;}if(Q.required){++E;}}else if(O===null||O===undefined){++G;}});if(z){S.countPotentiallyMatchingParams=K.filter(function(O){return B.hasOwnProperty(O);}).length;}else{S.countPotentiallyMatchingParams=K.length;}if(y&&y["sap-app-origin-hint"]&&(y["sap-app-origin-hint"][0]||y["sap-app-origin-hint"][0]==="")){var N=y["sap-app-origin-hint"][0];H=N===I.contentProviderId;}S.countDefaultedParams=M.length;S.countMatchingParams=C;S.countMatchingRequiredParams=E;S.countMatchingFilterParams=F;S.countFreeInboundParams=G;S.isCurrentContentProvider=H;return S;}
function x(I,s,K,M,S){var y={inbound:s};function N(a1,b1,c1){a1.matches=false;a1.noMatchReason=b1;a1.noMatchDebug=c1;return a1;}function z(a1){a1.matches=true;a1.matchesVirtualInbound=v.isVirtualInbound(s);a1.parsedIntent=I;return a1;}var B=s.semanticObject==="*";y.genericSO=B;var C=I.semanticObject===undefined||I.semanticObject===s.semanticObject||B;if(!C){return N(y,"Semantic object \""+I.semanticObject+"\" did not match");}var D=I.action===undefined||I.action===s.action;if(!D){return N(y,"Action \""+I.action+"\" did not match");}var F=!s.deviceTypes||I.formFactor===undefined||s.deviceTypes[I.formFactor];if(!F){return N(y,"Form factor \""+I.formFactor+"\" did not match","Inbound: ["+Object.keys(s.deviceTypes).filter(function(a1){return!!s.deviceTypes[a1];}).join(", ")+"]");}var T=I.params&&I.params["sap-ui-tech-hint"]&&I.params["sap-ui-tech-hint"][0];if(I.treatTechHintAsFilter&&T){var E=g({inbound:s});if(E!==T){return N(y,"Tech Hint as filter \""+T+"\" did not match","Inbound: ["+E+"]");}}var R=[],G=[],H=I.params||{};var J=d(H,s.signature&&s.signature.parameters,K,R,G);var O=J["sap-system"]&&J["sap-system"][0],P=J["sap-app-origin"]&&J["sap-app-origin"][0],Q=s.contentProviderId;if(P&&P!==Q){return N(y,"Contetn provider as filter \""+P+"\" did not match","Inbound: ["+Q+"]");}if(O&&typeof Q==="string"&&S&&!S[O]){return N(y,"Data origin \""+O+"\" is not compatible with the content provider \""+Q+"\"","Inbound: ["+Object.keys(S).join(", ")+"]");}y.intentParamsPlusAllDefaults=J;y.defaultedParamNames=G;e(J,y);var V=r(s.signature.parameters,J,H,G,K,M);if(!V){return N(y,"Inbound parameter signature did not match",f.formatInboundSignature(s.signature));}var W=U.constructParameterDominatorMap(s.signature.parameters);var X=U.findDominatedDefaultParameters(J,G,W);var Y=G.filter(function(a1){return!X[a1];});var Z=U.filterObjectKeys(J,function(a1){return!X[a1];});if(!o(s,Z)){return N(y,"Additional parameters not allowed",f.formatInboundSignature(s.signature));}var $=s.signature.additionalParameters==="ignored";if($){U.filterObjectKeys(Z,function(a1){if(a1.indexOf("sap-")===0){return true;}if(s.signature.parameters.hasOwnProperty(a1)){return true;}return false;},true);}var _=w(s,J,H,G,$);h(y,s);y.intentParamsPlusAllDefaults=Z;y.defaultedParamNames=Y;y.priorityString=l(y,_);i(R,M);return z(y);}
return{match:p,matchOne:x,sortMatchingResultsDeterministic:b,matchesFilter:m,checkAdditionalParameters:o,addDefaultParameterValues:d,extractSapPriority:e,serializeMatchingResult:a};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/StagedLogger',["sap/base/Log","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(L,_){"use strict";var a={};
function b(g){var s;var o;var S=g();if(!S.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}s=S.logId;if(a[s]){throw new Error("'cannot call #begin twice with same log id: '"+s+"'");}else{a[s]={};}o=a[s];o.title=S.title||null;o.moduleName=S.moduleName||null;var r=function(C,n){if(n===1){return C;}return r(C,n-1)+C;};o.stages=S.stages.map(function(d){return[d,r("-",d.length)];});return s;}
function l(g){var s,d,f,h,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;S=A.stage;p=A.prefix;h=A.lines;f=A.line;n=A.number;if(!h&&f&&p){f=p+" "+f;}d=a[s].stages[S-1];if(f){d.push(f);}if(h){if(p){p=(f?" ":"")+p;}var i=h.map(function(f,I){return(n?(I+1):"")+(p?p+" ":"")+f;});d.push.apply(d,i);}}
function e(g){var A,o,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;o=a[s];if(typeof o!=="object"){throw new Error("Logger .end was called on an already ended logger");}var d=o.stages.map(function(S){return S.join("\n");}).join("\n\n");L.debug("[REPORT #"+s+"] "+o.title,"\n"+d+"\n",o.moduleName);delete a[s];}
function c(){return a;}
return{begin:function(){if(L.getLevel()>=L.Level.DEBUG){b.apply(null,arguments);}},log:function(){if(L.getLevel()>=L.Level.DEBUG){l.apply(null,arguments);}},end:function(){if(L.getLevel()>=L.Level.DEBUG){e.apply(null,arguments);}},_getLogs:c};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/SystemContext',["sap/base/util/ObjectPath","sap/ui/thirdparty/URI"],function(O,U){"use strict";var S={};
S._getProtocol=function(){return new U(window.location.toString()).protocol();};
S.createSystemContextFromSystemAlias=function(s){return{id:s.id,label:s.label||s.id,getFullyQualifiedXhrUrl:function(p){var P=new U(p).protocol();if(P==="http"||P==="https"){return p;}var a=this._getProtocol();var b="";if(a==="https"){b=O.get("https.xhr.pathPrefix",s)||"";}else if(a==="http"){b=O.get("http.xhr.pathPrefix",s)||"";}if(b){if(p.indexOf("dynamic_dest")>-1){return p;}return U.joinPaths(b,p).path();}return p;}.bind(this),getProperty:function(p){var a=O.get("properties",s)||{};return a[p];}};};
return S;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/Utils',["sap/base/util/deepExtend"],function(d){"use strict";
function f(I,D,p){var o={};D.forEach(function(s){var g=p[s].dominatedBy;var h=g.some(function(j){var k=!!I[j];var l=j!==s;var m=D.indexOf(j)===-1;return k&&m&&l;});if(h){o[s]=true;}});return o;}
function c(p){var D={},r={};Object.keys(p).forEach(function(k){var R=p[k].renameTo||k;r[R]=r[R]||{renameTo:R,dominatedBy:[]};r[R].dominatedBy.push(k);r[R].dominatedBy=r[R].dominatedBy.sort();D[k]=r[R];});return D;}
function a(o,F,I){var O=I?o:d({},o);Object.keys(O).forEach(function(k){if(F(k)===false){delete O[k];}});return O;}
function b(o,F){var g;g=Object.keys(o).reduce(function(g,k){var v=o[k];if(F(k,v)){g[k]=v;}return g;},{});return g;}
function i(I,p){return p.every(function(P){var o,O,s;s=P.name;O=P.options;o=I[s];return Object.keys(O).every(function(g){var v=O[g];if(g==="required"){return!!(o||{}).required===v;}return false;});});}
function e(p,w){var E={};p.forEach(function(P){if(w[P]){E[P]=w[P];delete w[P];}});return E;}
return{inboundSignatureMeetsParameterOptions:i,filterObjectKeys:a,filterObject:b,constructParameterDominatorMap:c,findDominatedDefaultParameters:f,extractParameters:e};});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds',[],function(){"use strict";var v={};var A=[{hideIntentLink:true,semanticObject:"Action",action:"search",deviceTypes:{desktop:true,tablet:true,phone:true},signature:{parameters:{},additionalParameters:"notallowed"},resolutionResult:{applicationType:"SAPUI5",ui5ComponentName:"sap.ushell.renderers.fiori2.search.searchComponent",additionalInformation:"SAPUI5.Component=sap.ushell.renderers.fiori2.search.searchComponent",url:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/search/searchComponent"),loadCoreExt:true,loadDefaultDependencies:false}},{hideIntentLink:true,semanticObject:"FLPPageTemplate",action:"manage",deviceTypes:{desktop:true,tablet:false,phone:false},signature:{parameters:{pageId:{required:false,defaultValue:{value:""}},mode:{required:false,defaultValue:{value:"view"}}},additionalParameters:"notallowed"},resolutionResult:{applicationType:"URL",ui5ComponentName:"nw.core.flp.pagecomposer.conf",additionalInformation:"SAPUI5.Component=nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man",applicationDependencies:{manifest:"/sap/bc/lrep/content/apps/nw.core.flp.pagecomposer.conf/app/sap/sui_paget_man/manifest.appdescr",name:"nw.core.flp.pagecomposer.conf",self:{name:"nw.core.flp.pagecomposer.conf",url:"/sap/bc/ui5_ui5/sap/sui_paget_man"},asyncHints:{libs:[{name:"nw.core.flp.transport.cust",url:{final:false,url:"/sap/bc/ui5_ui5/sap/sui_tr_cust"}}]}},async:true,loadDefaultDependencies:false}}];
v.isVirtualInbound=function(i){return A.some(function(V){return V===i;});};
v.getInbounds=function(){return A;};
return v;});
sap.ui.predefine('sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/navigationMode","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/ui/generic/app/navigation/service/SelectionVariant","sap/base/Log"],function(u,c,n,a,C,q,O,i,b,S,L){"use strict";
function m(M,A){var D=new q.Deferred(),N,R=M.resolutionResult,t=M.inbound&&(M.inbound.signature||{}),v=h(R)||t.additionalParameters==="ignored"||k(M);if(!v){e(D,M);return D.promise();}var w=M.intentParamsPlusAllDefaults["sap-xapp-state"]&&M.intentParamsPlusAllDefaults["sap-xapp-state"][0];if(w){s(A,w).then(p).then(function(V){if(h(R)){var P=c.constructParameterDominatorMap(t.parameters);Object.keys(R.oNewAppStateMembers).forEach(function(x){var y=P[x].dominatedBy;if(g(V,y)){delete R.oNewAppStateMembers[x];}});}var I=t.additionalParameters==="ignored";if(!h(R)&&!k(M)&&!I){e(D,M);return;}N=A.createEmptyAppState(undefined,true);if(N){N.setData(V);d(N,M,D);}},function(){delete R.oNewAppStateMembers;e(D,M);return;});return D.promise();}if(h(R)){var E=A.createEmptyAppState(undefined,true);d(E,M,D);return D.promise();}e(D,M);return D.promise();}
function d(N,M,D){var t=N.getData()||{},v,w={},x=M.inbound.signature,R=M.resolutionResult;if(t.selectionVariant){v=new S(JSON.stringify(t.selectionVariant));}else{v=new S();}if(h(R)){Object.keys(R.oNewAppStateMembers).forEach(function(y){v.massAddSelectOption(y,R.oNewAppStateMembers[y].Ranges);});}var I=x.additionalParameters==="ignored";v=r(v,w,x.parameters,I);if(v.getParameterNames().length!==0||v.getSelectOptionsPropertyNames().length!==0||w.deleted){t.selectionVariant=v.toJSONObject();}if(!w.changed&&!w.deleted&&!h(R)){e(D,M);return;}N.setData(t);N.save().done(function(){M.intentParamsPlusAllDefaults["sap-xapp-state"]=[N.getKey()];M.mappedIntentParamsPlusSimpleDefaults["sap-xapp-state"]=[N.getKey()];e(D,M);});}
function e(D,M){var N;l(M);o(M);N=n.compute(O.get("inbound.resolutionResult.applicationType",M),(M.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(M.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(M.resolutionResult,N);delete M.resolutionResult.oNewAppStateMembers;D.resolve(M);}
function h(R){return R.oNewAppStateMembers&&!i(R.oNewAppStateMembers);}
function f(t,P){return Array.isArray(t)&&t.some(function(M){return(P.indexOf(M)!==-1);});}
function g(A,P){if(A&&A.selectionVariant){var t=new S(JSON.stringify(A.selectionVariant)),v=(t.getSelectOptionsPropertyNames()||[]),w=(t.getParameterNames()||[]);if(f(v,P)||f(w,P)){return true;}}return false;}
function r(t,R,P,I){var v=new S(),w=(t.getParameterNames()||[]),x=(t.getSelectOptionsPropertyNames()||[]),y,z;w.forEach(function(A){y=t.getParameter(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getParameter(P[A].renameTo)===undefined)&&(v.getSelectOption(P[A].renameTo)===undefined)){v.addParameter(P[A].renameTo,y);R.changed=true;}else{L.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getParameter(A)===undefined)&&(v.getSelectOption(A)===undefined)){v.addParameter(A,y);}});x.forEach(function(A){z=t.getSelectOption(A);if(I&&!P[A]){R.deleted=true;return;}if(P[A]&&P[A].renameTo){if((v.getSelectOption(P[A].renameTo)===undefined)&&(v.getParameter(P[A].renameTo)===undefined)){v.massAddSelectOption(P[A].renameTo,z);R.changed=true;}else{L.error("renaming of appstate creates duplicates "+A+"->"+P[A].renameTo);}}else if((v.getSelectOption(A)===undefined)&&(v.getParameter(A)===undefined)){v.massAddSelectOption(A,z);}});w.forEach(function(A){t.removeParameter(A);});x.forEach(function(A){t.removeSelectOption(A);});v.getParameterNames().forEach(function(A){t.addParameter(A,v.getParameter(A));});v.getSelectOptionsPropertyNames().forEach(function(A){t.massAddSelectOption(A,v.getSelectOption(A));});return t;}
function j(D){if(D===undefined||b(D)){return false;}return true;}
function k(M){return M.inbound&&M.inbound.signature&&M.inbound.signature.parameters&&Object.keys(M.inbound.signature.parameters).some(function(K){return!!(M.inbound.signature.parameters[K].renameTo);});}
function l(M){M.defaultedParamNames=M.defaultedParamNames.filter(function(N){if(M.intentParamsPlusAllDefaults[N]&&!Array.isArray(M.intentParamsPlusAllDefaults[N])){if(!(M.resolutionResult.oNewAppStateMembers&&M.resolutionResult.oNewAppStateMembers[N])){return false;}}return true;});}
function o(M){var P=(O.get("inbound.signature.parameters",M)||{}),t={};M.defaultedParamNames.forEach(function(N){var v=(P[N]&&P[N].renameTo)||N;if(t[v]){L.error("renaming of defaultedParamNames creates duplicates"+N+"->"+v);}else{t[v]=true;}});M.mappedDefaultedParamNames=Object.keys(t).sort();}
function p(A){if(j(A)){return Promise.reject();}return Promise.resolve(A);}
function s(A,t){return new Promise(function(R,v){A.getAppState(t).done(function(w){R(w.getData());}).fail(function(E){v(E);});});}
return{mixAppStateIntoResolutionResultAndRename:m,_hasRenameTo:k};});
sap.ui.predefine('sap/ushell/services/_CommonDataModel/PersonalizationProcessor',["sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/base/util/ObjectPath"],function(q,i,L,O){"use strict";
function P(){}
P.prototype._getItemIndex=function(I,s){var r;for(r=0;r<I.length;r++){if(I[r].id===s){break;}}r=(r>=I.length)?-1:r;return r;};
P.prototype._applyRenameGroup=function(g,n,o){var G,b=false;if(!n){return false;}if(g&&o&&o.groups&&o.groups[g]){G=o.groups[g];if(G.identification&&G.identification.title){o.groups[g].identification.title=n;b=true;}}return b;};
P.prototype._applyGroupVisibility=function(g,G,o){var b=false;if(G===undefined){return false;}if(g&&o&&o.groups&&o.groups[g]){o.groups[g].identification.isVisible=G;b=true;}return b;};
P.prototype.mixinPersonalization=function(o,p){var d=new q.Deferred(),t=this;if(!p||i(p)){return d.resolve(o).promise();}if(p.groups){Object.keys(p.groups).forEach(function(g){var G=p.groups[g];if(o.groups[g]){if(G.identification){if(G.identification.title){t._applyRenameGroup(g,G.identification.title,o);}if(G.identification.hasOwnProperty("isVisible")&&G.identification.isVisible===false){t._applyGroupVisibility(g,false,o);}}}});}this._applyAddGroups(o,p);if(p.removedGroups&&Array.isArray(p.removedGroups)){p.removedGroups.forEach(function(g){t._applyRemoveGroup(o,g);});}this._applyMoveGroup(o,p);this._applyItemChanges(o,p);this._applyTileSettings(o,p);return d.resolve(o).promise();};
P.prototype._applyAddGroups=function(o,p){var n=[];o.site=o.site||{};o.site.payload=o.site.payload||{};o.site.payload.groupsOrder=o.site.payload.groupsOrder||[];o.groups=o.groups||{};if(Array.isArray(p.groupOrder)){o.site.payload.groupsOrder.forEach(function(g){if(p.groupOrder.indexOf(g)===-1){if((p.removedGroups&&p.removedGroups.indexOf(g)===-1)||!p.removedGroups){n.push(g);}}});}if(Array.isArray(p.groupOrder)&&p.addedGroups&&Object.keys(p.addedGroups).length>0){Object.keys(p.addedGroups).forEach(function(g){o.groups[g]=p.addedGroups[g];o.groups[g].payload.isPreset=false;});o.site.payload.groupsOrder=p.groupOrder;}n.forEach(function(N){o.site.payload.groupsOrder.push(N);});};
P.prototype._checkRenameGroup=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.title!==o[g].identification.title){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.title=p[g].identification.title;}}}return a;};
P.prototype._applyTileSettings=function(s,p){var g,m;if(!p.modifiedTiles){return;}g=Object.keys(s.groups).map(function(k){return this[k];},s.groups);m=Object.keys(p.modifiedTiles).map(function(k){return this[k];},p.modifiedTiles);g.some(function(G){["tiles","links"].forEach(function(t){if(G.payload[t]){G.payload[t].some(function(T){var a;m.some(function(u,I){if(u.id===T.id){if(u.title!==undefined){T.title=u.title;}if(u.subTitle!==undefined){T.subTitle=u.subTitle;}if(u.info!==undefined){T.info=u.info;}if(u.displayFormatHint!==undefined){T.displayFormatHint=u.displayFormatHint;}a=I;return true;}return false;});if(a!==undefined){m.splice(a,1);}return m.length===0;});}});return m.length===0;});};
P.prototype._checkGroupVisibility=function(g,p,o,a){if(g&&p&&o){if(o[g]){if(p[g].identification.isVisible!==o[g].identification.isVisible&&typeof p[g].identification.isVisible==="boolean"){a=a||{};a.groups=a.groups||{};a.groups[g]=a.groups[g]||{};a.groups[g].identification=a.groups[g].identification||{};a.groups[g].identification.isVisible=p[g].identification.isVisible;}}}return a;};
P.prototype._addGroupToPersonalizationDelta=function(p,o,g){var s=false,G,n;if(p&&p.site&&p.site.payload&&p.site.payload.groupsOrder&&p.groups&&g&&p.groups[g]&&o){G=p.site.payload.groupsOrder;n=p.groups[g];o.addedGroups=o.addedGroups||{};o.addedGroups[g]={};o.addedGroups[g].identification=q.extend({},n.identification);o.addedGroups[g].payload=q.extend({},n.payload);o.addedGroups[g].payload.tiles=[];o.addedGroups[g].payload.links=[];o.groupOrder=G;s=true;}return s;};
P.prototype.extractPersonalization=function(p,o){var d=new q.Deferred(),a,b={},c,e,t=this;if(p&&p.groups&&o&&o.groups){a=p.groups;c=o.groups;e=this._getExtractHelperObject(o,p,b);Object.keys(c).forEach(function(g){t._checkRemoveGroup(p,b,g);t._extractFromOriginalSiteOneGroup(o,e,g,"tiles");t._extractFromOriginalSiteOneGroup(o,e,g,"links");});Object.keys(a).forEach(function(g){if(c[g]){t._checkRenameGroup(g,a,c,b);t._checkGroupVisibility(g,a,c,b);}else{t._addGroupToPersonalizationDelta(p,b,g);}t._extractFromPersonalizedSiteOneGroup(p,e,g,"tiles");t._extractFromPersonalizedSiteOneGroup(p,e,g,"links");});this._checkMoveGroup(p,o,b);this._cleanupRemovedGroups(o,b);if(e.oPersonalizationDelta.movedTiles&&i(e.oPersonalizationDelta.movedTiles)){delete(e.oPersonalizationDelta.movedTiles);}if(e.oPersonalizationDelta.movedLinks&&i(e.oPersonalizationDelta.movedLinks)){delete(e.oPersonalizationDelta.movedLinks);}}if(o._version){b._version=o._version;}return d.resolve(b).promise();};
P.prototype._checkRemoveGroup=function(p,o,s){var S=false;if(p&&p.groups&&o&&s){if(!p.groups[s]){o.removedGroups=o.removedGroups||[];o.groupOrder=o.groupOrder||[];if(o.removedGroups.indexOf(s)===-1){o.removedGroups.push(s);}if(p.site&&p.site.payload&&p.site.payload.groupsOrder&&Array.isArray(p.site.payload.groupsOrder)){o.groupOrder=p.site.payload.groupsOrder.slice(0);}}S=true;}return S;};
P.prototype._applyRemoveGroup=function(o,g){var a,G,b;if(o&&o.groups&&o.site&&o.site.payload&&o.site.payload.groupsOrder&&g){a=o.groups;G=o.site.payload.groupsOrder;b=G.indexOf(g);if(!(b===-1)){G.splice(b,1);delete(a[g]);return true;}}return false;};
P.prototype._checkMoveGroup=function(p,o,a){var b,c,d=false,s=false;if(p.site&&p.site.payload&&Array.isArray(p.site.payload.groupsOrder)&&o.site&&o.site.payload&&Array.isArray(o.site.payload.groupsOrder)){b=p.site.payload.groupsOrder;c=o.site.payload.groupsOrder;if(b.length===c.length){d=(function(){var S=false,I;for(I=0;I<c.length;I++){if(c[I]!==b[I]){S=true;break;}}return S;})();if(d){a.groupOrder=b;s=true;}}}return s;};
P.prototype._applyMoveGroup=function(o,p){var s=false;if(Array.isArray(p.groupOrder)){o.site=o.site||{};o.site.payload=o.site.payload||{};if(!Array.isArray(o.site.payload.groupsOrder)){o.site.payload.groupsOrder=[];}if(o.site.payload.groupsOrder.length===p.groupOrder.length){o.site.payload.groupsOrder=p.groupOrder;s=true;}}return s;};
P.prototype._getHashedItemsFromSite=function(s){var r=null;if(s&&s.groups){if(Object.keys(s.groups).length>0){r={};Object.keys(s.groups).forEach(function(g){var G=s.groups[g],a;r[g]={};if(G.payload){["tiles","links"].forEach(function(t){r[g][t]={};if(Array.isArray(G.payload[t])){a=G.payload[t];a.forEach(function(I,b){var c;if(I&&I.id){c=I.id;r[g][t][c]={iIndex:b,sItemId:I};}});}});}});}}return r;};
P.prototype._getExtractHelperObject=function(o,p,a){var r=null;r={};r.oHashedItemsOriginal=this._getHashedItemsFromSite(o)||{};r.oHashedItemsPersonalized=this._getHashedItemsFromSite(p);r.oPersonalizationDelta=a;return r;};
P.prototype._extractFromOriginalSiteOneGroup=function(o,e,g,I){var s=false,a,m,M,p="movedTiles";I=I||"tiles";if(I!=="tiles"){p="movedLinks";}M=function(b,f){m[b]=m[b]?m[b]:{};m[b].fromGroup=f;m[b].toGroup=null;};if(e&&e.oHashedItemsPersonalized&&e.oPersonalizationDelta&&o&&o.groups&&o.groups[g]&&o.groups[g].payload&&Array.isArray(o.groups[g].payload[I])){a=o.groups[g].payload[I];e.oPersonalizationDelta[p]=e.oPersonalizationDelta[p]?e.oPersonalizationDelta[p]:{};m=e.oPersonalizationDelta[p];if(e.oHashedItemsPersonalized[g]){a.forEach(function(b){if(!e.oHashedItemsPersonalized[g][I][b.id]){M(b.id,g);}});s=true;}else{a.forEach(function(b){M(b.id,g);});s=true;}}return s;};
P.prototype._extractPersonalizationDeltaForTile=function(p,e,g,I){var o=O.get(["oHashedItemsOriginal",g,I,p.id,"sItemId"],e);if(!o){return false;}var m={};if(p.title!==o.title){m.title=p.title;}if(p.subTitle!==o.subTitle){m.subTitle=p.subTitle;}if(p.info!==o.info){m.info=p.info;}if(p.displayFormatHint!==o.displayFormatHint&&!(p.displayFormatHint==="default"&&!o.displayFormatHint)){m.displayFormatHint=p.displayFormatHint;}if(i(m)){return false;}if(!e.oPersonalizationDelta.modifiedTiles){e.oPersonalizationDelta.modifiedTiles={};}var M=e.oPersonalizationDelta.modifiedTiles;m.id=p.id;M[p.id]=m;return true;};
P.prototype._extractFromPersonalizedSiteOneGroup=function(p,e,g,I){var s=false,m,t,T=false,a,b=this,c="movedTiles";I=I||"tiles";if((I!=="tiles")&&(I!=="links")){return s;}if(I!=="tiles"){c="movedLinks";}if(e&&e.oPersonalizationDelta&&p&&p.groups&&p.groups[g]&&p.groups[g].payload&&Array.isArray(p.groups[g].payload[I])){a=p.groups[g].payload[I];e.oPersonalizationDelta[c]=e.oPersonalizationDelta[c]?e.oPersonalizationDelta[c]:{};m=e.oPersonalizationDelta[c];t=[];a.forEach(function(o,d){if(!o){return;}t.push(o.id);if(e.oHashedItemsOriginal[g]&&e.oHashedItemsOriginal[g][I][o.id]){if(m[o.id]){L.error("Extract personalization failed","The Tile ID "+o.id+" is not unique in the site","PersonalizationProcessor");delete(m[o.id]);}if(e.oHashedItemsOriginal[g][I][o.id].iIndex!==d){T=true;}b._extractPersonalizationDeltaForTile(o,e,g,I);}else{T=true;if(m[o.id]){if(m[o.id].fromGroup&&(m[o.id].fromGroup!==g)){if(!m[o.id].toGroup){m[o.id].toGroup=g;b._extractPersonalizationDeltaForTile(o,e,m[o.id].fromGroup,I);}}}else{m[o.id]={};m[o.id].fromGroup=null;m[o.id].toGroup=g;m[o.id].item=o;}}});if(T){e.oPersonalizationDelta.groups=e.oPersonalizationDelta.groups||{};e.oPersonalizationDelta.groups[g]=e.oPersonalizationDelta.groups[g]||{};e.oPersonalizationDelta.groups[g].payload=e.oPersonalizationDelta.groups[g].payload||{};if(I==="tiles"){e.oPersonalizationDelta.groups[g].payload.tileOrder=t;}else{e.oPersonalizationDelta.groups[g].payload.linkOrder=t;}}s=true;}return s;};
P.prototype._cleanupRemovedGroups=function(o,p){var I,m;if(p.removedGroups&&p&&Array.isArray(p.removedGroups)&&(p.removedGroups.length>0)){p.removedGroups.forEach(function(g){if(o&&o.groups&&o.groups[g]&&o.groups[g].payload){[{sType:"tiles",sPersonalizationDeltaType:"movedTiles"},{sType:"links",sPersonalizationDeltaType:"movedLinks"}].forEach(function(t){if(Array.isArray(o.groups[g].payload[t.sType])){I=o.groups[g].payload[t.sType];I.forEach(function(a){if(p[t.sPersonalizationDeltaType]){m=p[t.sPersonalizationDeltaType][a.id];if(m&&m.fromGroup&&(m.fromGroup===g)&&!m.toGroup){delete(p[t.sPersonalizationDeltaType][a.id]);}}});}});}});}};
P.prototype._setItemOrderOnSiteCollection=function(o,I){var s=true,S=o.length,a,b={},c,C,d,f;if(!Array.isArray(o)||!Array.isArray(o)||(o.length!==I.length)){return false;}a=o.splice(0,o.length);for(c=0;c<I.length;c++){d=I[c];C=a.shift();if(C&&d===C.id){o.push(C);}else if(b[d]){o.push(b[d]);delete(b[d]);if(C){b[C.id]=C;}}else if(C){b[C.id]=C;f=false;while(a.length>0){C=a.shift();if(d===C.id){o.push(C);f=true;break;}else{b[C.id]=C;}}if(!f){s=false;}}}if(o.length!==S){s=false;}return s;};
P.prototype._setItemOrderOnSiteGroupForItemType=function(o,d,I){var s=true,t,a;if((I==="tiles")||(I==="links")){a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(d.payload&&Array.isArray(d.payload[a])&&(d.payload[a].length>0)){if(o.payload&&Array.isArray(o.payload[I])&&(o.payload[I].length>0)){t=this._setItemOrderOnSiteCollection(o.payload[I],d.payload[a]);if(!t){s=false;}}else{s=false;}}return s;};
P.prototype._setItemOrderOnSite=function(o,p){var s=true,t,a=this;if(o.groups&&p.groups){Object.keys(p.groups).forEach(function(g){if(p.groups[g]&&o.groups[g]){t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"tiles");if(!t){s=false;}t=a._setItemOrderOnSiteGroupForItemType(o.groups[g],p.groups[g],"links");if(!t){s=false;}}});}return s;};
P.prototype._applyMoveItemsWithoutOrder=function(o,p,I){var s=true,t,T,a="tileOrder",d,b,c,e=[],f=this;function g(C,G){var s=true;if(o.groups[G]&&o.groups[G].payload&&p.groups&&p.groups[G]&&p.groups[G].payload&&Array.isArray(p.groups[G].payload[a])&&(p.groups[G].payload[a].length>0)){if(!Array.isArray(o.groups[G].payload[I])){o.groups[G].payload[I]=[];}o.groups[G].payload[I].push(C);}else{s=false;}return s;}if((I==="tiles")||(I==="links")){T=(I==="tiles")?"movedTiles":"movedLinks";a=(I==="tiles")?"tileOrder":"linkOrder";}else{return false;}if(!o||!o.groups||!o.site||!o.site.payload||!Array.isArray(o.site.payload.groupsOrder)||!p){return false;}if(p[T]){Object.keys(p[T]).forEach(function(h){d=p[T][h];if(d.fromGroup){if(d.toGroup){if(d.fromGroup!==d.toGroup){if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){e=o.groups[d.fromGroup].payload[I];b=f._getItemIndex(e,h);if(b>=0){c=e.splice(b,1);t=g(c[0],d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}}else{s=false;}}else if(o.groups[d.fromGroup]&&o.groups[d.fromGroup].payload&&Array.isArray(o.groups[d.fromGroup].payload[I])){e=o.groups[d.fromGroup].payload[I];b=f._getItemIndex(e,h);if(b>=0){e.splice(b,1);}else{s=false;}}else{s=false;}}else if(d.toGroup){if(d.item&&!i(d.item)){t=g(d.item,d.toGroup);if(!t){s=false;}}else{s=false;}}else{s=false;}});}return s;};
P.prototype._applyItemChanges=function(o,p){var s=true,S;S=this._applyMoveItemsWithoutOrder(o,p,"tiles");if(!S){s=false;}S=this._applyMoveItemsWithoutOrder(o,p,"links");if(!S){s=false;}if(p.groups){S=this._setItemOrderOnSite(o,p);if(!S){s=false;}}return s;};
return P;});
sap.ui.predefine('sap/ushell/services/_CommonDataModel/SiteConverter',["sap/base/Log"],function(L){"use strict";var S=function(){};
S.prototype.convertTo=function(v,c){if(c._version==="3.0.0"||(c.identification&&c.payload)){switch(v){case"3.0.0":return this._convertPageToSite(c);case"3.1.0":return this._convertSiteToPage(c);default:L.error("The received version for the site/page conversion is not supported");return{};}}else{L.error("The site converter did not receive a correct page/site object.");return{};}};
S.prototype._convertPageToSite=function(p){var c={groups:{},_version:"3.0.0",site:{identification:p.identification,payload:{groupsOrder:p.payload.layout.sectionOrder}}};var s=p.payload.sections;for(var i=0;i<Object.keys(s).length;i++){var a=Object.keys(s)[i];var o=p.payload.sections[a];c.groups[a]={identification:{id:o.id,title:o.title},payload:{tiles:this._convertVizPayloadObjectToArray(o)}};if("visible"in o){c.groups[a].identification.isVisible=o.visible;}if("preset"in o){c.groups[a].payload.isPreset=o.preset;}if("locked"in o){c.groups[a].payload.locked=o.locked;}if("default"in o){c.groups[a].payload.isDefaultGroup=o.default;}}return c;};
S.prototype._convertSiteToPage=function(s){var c={identification:s.site.identification,payload:{layout:{sectionOrder:s.site.payload.groupsOrder},sections:{}}};var g=s.groups;var G;var o;var v;for(var i=0;i<Object.keys(g).length;i++){G=Object.keys(g)[i];o=s.groups[G];v=this._createVizPayloadObject(o.payload.tiles);c.payload.sections[G]={id:o.identification.id,title:o.identification.title,layout:v.layout,viz:v.viz};var a=c.payload.sections[G];if("isVisible"in o.identification){a.visible=o.identification.isVisible;}if("isPreset"in o.payload){a.preset=o.payload.isPreset;}if("locked"in o.payload){a.locked=o.payload.locked;}if("isDefaultGroup"in o.payload){a.default=o.payload.isDefaultGroup;}}return c;};
S.prototype._createVizPayloadObject=function(t){var v=[];var p={};var V=t.reduce(function(r,T){v.push(T.id);r[T.id]=T;return r;},{});p.layout={vizOrder:v};p.viz=V;return p;};
S.prototype._convertVizPayloadObjectToArray=function(s){return s.layout.vizOrder.reduce(function(t,v){t.push(s.viz[v]);return t;},[]);};
return S;});
sap.ui.predefine('sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig',["sap/ushell/Config","sap/ushell/System","sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig"],function(C,S,F){"use strict";var a={};var c=[{contentProviderName:"featured",adapter:"sap.ushell.adapters.cdm.v3.StaticGroupsAdapter",configSwitch:"/core/home/featuredGroup/enable",system:{alias:"",platform:"cdm"},configHandler:function(){var r=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/model/currentState/showRecentActivity"),e=r&&C.last("/core/home/featuredGroup/frequentCard"),E=r&&C.last("/core/home/featuredGroup/recentCard");return F.getMockAdapterConfig(e,E);}}];
a._getConfigAdapters=function(){c.forEach(function(o){o.system=new S(o.system);});return c;};
return a;});
sap.ui.predefine('sap/ushell/services/_ContentExtensionAdapterFactory/FeaturedGroupConfig',["sap/ushell/resources"],function(r){"use strict";var f={},g=r.i18n.getText("featuredGroup.title"),R=r.i18n.getText("recentActivities"),F=r.i18n.getText("frequentActivities"),t=r.i18n.getText("top",4),o={"_version":"3.0.0","site":{"identification":{"version":"3.0","id":"c9dcc1f3-dec0-4db4-91d3-639bf38d91ce","title":"Featured Group","description":"Sample site for featured group cards"},"payload":{"groupsOrder":["FeaturedGroupCards"]}},"catalogs":{},"vizTypes":{"sap.ushell.Card":{"sap.app":{"id":"sap.ushell.Card","type":"card","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"deviceTypes":{"desktop":true,"tablet":true,"phone":true}}}},"visualizations":{"FrequentCard":{"vizType":"sap.ushell.Card","businessApp":"fin.cash.bankmaster.manage.BusinessApp","target":{"appId":"fin.cash.bankmaster.manage","inboundId":"Bank-manage","parameters":{}},"vizConfig":{"sap.flp":{"columns":"4","rows":"4"},"sap.app":{"id":"FrequentCard","type":"card"},"sap.ui5":{"services":{"CardNavigationService":{"factoryName":"sap.ushell.ui5service.CardNavigation"},"CardUserFrequentsService":{"factoryName":"sap.ushell.ui5service.CardUserFrequents"}}},"sap.card":{"type":"List","header":{"title":F,"status":{"text":t},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"openUI":"FrequentActivities"}}]},"content":{"maxItems":4,"data":{"service":{"name":"CardUserFrequentsService"}},"item":{"title":{"value":"{Name}"},"description":{"value":"{Description}"},"highlight":"{Highlight}","icon":{"src":"{Icon}","label":"icon"},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"title":"{Name}","url":"{Url}","intentSemanticObject":"{Intent/SemanticObject}","intentAction":"{Intent/Action}","intentAppRoute":"{Intent/AppSpecificRoute}","intentParameters":"{Intent/Parameters}"}}]}}}}},"RecentCard":{"vizType":"sap.ushell.Card","businessApp":"fin.cash.bankmaster.manage.BusinessApp","target":{"appId":"fin.cash.bankmaster.manage","inboundId":"Bank-manage","parameters":{}},"vizConfig":{"sap.flp":{"columns":"4","rows":"4"},"sap.app":{"id":"RecentCard","type":"card"},"sap.ui5":{"services":{"CardNavigationService":{"factoryName":"sap.ushell.ui5service.CardNavigation"},"CardUserRecentsService":{"factoryName":"sap.ushell.ui5service.CardUserRecents"}}},"sap.card":{"type":"List","header":{"title":R,"status":{"text":t},"actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"openUI":"RecentActivities"}}]},"content":{"maxItems":4,"data":{"service":{"name":"CardUserRecentsService"}},"item":{"title":{"label":"{{title_label}}","value":"{Name}"},"description":{"label":"{{description_label}}","value":"{Description}"},"icon":{"src":"{Icon}","label":"icon"},"highlight":"{Highlight}","actions":[{"type":"Navigation","service":"CardNavigationService","parameters":{"title":"{Name}","url":"{Url}","intentSemanticObject":"{Intent/SemanticObject}","intentAction":"{Intent/Action}","intentAppRoute":"{Intent/AppSpecificRoute}","intentParameters":"{Intent/Parameters}"}}]}}}}}},"applications":{},"groups":{"FeaturedGroupCards":{"identification":{"id":"FeaturedGroupCards","title":g},"contentProvider":"featured","isFeatured":true,"payload":{"locked":true,"tiles":[{"id":"frequentCard","vizId":"FrequentCard","contentProvider":"featured"},{"id":"recentCard","vizId":"RecentCard","contentProvider":"featured"}],"links":[],"groups":[]}}},"systemAliases":{}};
f.getMockAdapterConfig=function(e,E){var T=o.groups.FeaturedGroupCards.payload.tiles,v=o.visualizations;for(var i=0;i<T.length;i++){var a=T[i],s=!e&&a.vizId==="FrequentCard",S=!E&&a.vizId==="RecentCard";if(s||S){delete v[a.vizId];T.splice(i,1);i--;}}return o;};
return f;},true);
sap.ui.predefine('sap/ushell/services/_CrossApplicationNavigation/utils',["sap/base/util/ObjectPath","sap/base/Log","sap/ushell/utils/UrlParsing"],function(O,L,U){"use strict";var a={};
a.extractGetLinksParameterOptions=function(g){return a.parseGetLinksParameters(g).filter(function(p){return Object.keys(p.options).length>0;}).map(function(p){return{name:p.name,options:p.options};});};
a.extractGetLinksParameterDefinition=function(g){return a.parseGetLinksParameters(g).reduce(function(r,p){r[p.name]=p.value;return r;},{});};
a.parseGetLinksParameters=function(g){if(Object.prototype.toString.apply(g)!=="[object Object]"){return[];}var p=JSON.parse(JSON.stringify(g));return Object.keys(p).map(function(P){var v=p[P];var o={};if(Object.prototype.toString.apply(v)==="[object Object]"){v=v.value;delete p[P].value;o=p[P];}return{name:P,value:v,options:o};});};
a.safeParseToObject=function(o){try{return JSON.parse(o);}catch(e){L.error("Cannot parse the given string to object",o,"sap.ushell.services.CrossApplicationNavigation");}return null;};
a.createAppStateFromData=function(d){L.warning("Deprecated API call of '_CrossApplicationNavigation.utils.createAppStateFromData'. Please use 'createAppStateFromDataAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var A=sap.ushell.Container.getService("AppState");var o=A.createEmptyAppState(null);o.setData(d);o.save();return o.getKey();};
a.createAppStateFromDataAsync=function(d){return sap.ushell.Container.getServiceAsync("AppState").then(function(A){var o=A.createEmptyAppState(null);o.setData(d);o.save();return o.getKey();});};
a.extractParameter=function(i,p){var I;var P=null;if(typeof i==="string"){if(i.indexOf(p+"=")===-1){return{intent:i,data:null};}var o=U.parseShellHash(i);if(!o){return{intent:i,data:null};}P=o.params[p];delete o.params[p];I=U.constructShellHash(o);return{intent:I,data:P};}if(Object.prototype.toString.apply(i)==="[object Object]"){var s=O.get("target.shellHash",i);if(typeof s==="string"){var r=a.extractParameter(s,p);i.target.shellHash=r.intent;return{intent:i,data:r.data};}var b=i.params;if(b&&b[p]){P=typeof b[p]==="string"?[b[p]]:b[p];delete b[p];}return{intent:i,data:P};}L.error("Invalid input parameter","expected string or object","sap.ushell.services.CrossApplicationNavigation");return{intent:i};};
a.addXAppStateFromParameter=function(i,s){var x=a.extractParameter(i,s);var I=x.intent;var X=x.data&&x.data[0];if(!X){return;}var A=a.safeParseToObject(X);if(!A){return;}var b=a.createAppStateFromData(A);a.injectParameter(I,"sap-xapp-state",b);};
a.addXAppStateFromParameterAsync=function(i,s){var x=a.extractParameter(i,s);var I=x.intent;var X=x.data&&x.data[0];if(!X){return Promise.resolve();}var A=a.safeParseToObject(X);if(!A){return Promise.resolve();}return a.createAppStateFromDataAsync(A).then(function(b){a.injectParameter(I,"sap-xapp-state",b);});};
a.injectParameter=function(i,p,P){if(typeof i==="string"){var o=U.parseShellHash(i);o.params[p]=P;return U.constructShellHash(o);}if(Object.prototype.toString.apply(i)==="[object Object]"){var s=O.get("target.shellHash",i);if(typeof s==="string"){i.target.shellHash=a.injectParameter(s,p,P);return i;}if(!i.params){i.params={};}i.params[p]=P;}return i;};
a._injectParameters=function(p){var P=p.inject,i=(p.injectEmptyString||{}),t=p.type,A=p.args;function s(v,I){return(v||(v===""&&I));}if(t.isPlainObject(A)){if(A.target&&A.target.shellHash){if(typeof A.target.shellHash==="string"){A.target.shellHash=a._injectParameters({inject:P,injectEmptyString:i,type:p.type,args:A.target.shellHash});}return A;}var n=Object.keys(P).reduce(function(I,b){var v=P[b],c=(i[b]===true);if(s(v,c)&&typeof I==="string"){var r=new RegExp("[&]"+b);var h=!r.test(I);if(h){var d=I?"&":"";I+=d+b+"="+v;}}else if(s(v,c)&&!I.hasOwnProperty(b)){I[b]=v;}return I;},A.params||{});if(n&&Object.keys(n).length>0){A.params=n;}return A;}var S=A;if(S){Object.keys(P).forEach(function(b){var v=P[b];var I=(i[b]===true);var r=new RegExp("[?&]"+b);var h=!r.test(S);if(s(v,I)&&h){var c=S.indexOf("?")>-1?"&":"?";S+=c+b+"="+v;}});}return S;};
a.injectStickyParameters=function(p){L.warning("Deprecated API call of '_CrossApplicationNavigation.utils.injectStickyParameters'. Please use 'injectStickyParametersAsync' instead",null,"sap.ushell.services._CrossApplicationNavigation.utils");var A=sap.ushell.Container.getService("AppLifeCycle");return a._injectStickyParameters(p,A);};
a.injectStickyParametersAsync=function(p){return sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(A){return a._injectStickyParameters(p,A);});};
a._injectStickyParameters=function(p,A){if(!A||Object.keys(A).length<=0){return p.args;}var c=A.getCurrentApplication();if(!c||Object.keys(c).length<=0){return p.args;}var o=p.appLifeCycle;var t=p.technicalParameters;var s=t.getParameters({sticky:true}).reduce(function(S,n){var N=n.name;var C=c.componentInstance;var d=c.applicationType;var e;if(d==="UI5"){e={};}else{e=o.getCurrentApplication().container;}var f=t.getParameterValueSync(N,C,e,d);var g=n.stickyName||N;S[g]=f;return S;},{});var b={type:p.type,inject:s,args:p.args};return a._injectParameters(b);};
return a;});
sap.ui.predefine('sap/ushell/services/_PageReferencing/PageReferencer',["sap/base/util/deepExtend","sap/ui/thirdparty/jquery"],function(d,q){"use strict";var P={};
function g(p,N){var r={};p.forEach(function(s){s.viz.forEach(function(t){var T=t.target;if(T&&!r[T]){r[T]=N.resolveHashFragment(T);}});});return new Promise(function(R,f){var b=[];Object.keys(r).forEach(function(h){b.push(r[h]);});q.when.apply(null,b).then(function(){var c=arguments;Object.keys(r).forEach(function(h,i){r[h]=c[i].inboundPermanentKey;});R(r);},f);});}
function _(p,t){return{inboundPermanentKey:p[t.target],vizId:t.tileCatalogId};}
function a(p,s){return{id:s.id,title:s.title,visualizations:s.viz.map(_.bind(null,p))};}
P.createReferencePage=function(p,b){b=b||[];return sap.ushell.Container.getServiceAsync("NavTargetResolution").then(g.bind(null,b)).then(function(o){var r=d({},p);r.sections=b.map(a.bind(null,o));return Promise.resolve(r);});};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/ContextContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ui/core/format/DateFormat","sap/ui/core/UIComponent","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,p,c,D,U,q,L){"use strict";
function C(){this._init.apply(this,arguments);}
C.prototype._init=function(s,a,b,S,o){this._oService=s;this._sContainerKey=b;this._oAdapterContainer={};this._oScope=S||p.adjustScope(S);this._aLoadedKeys=[];this._oUnmodifiableContainer=undefined;var A;if(!(o instanceof U)&&o!==undefined){throw new Error("oComponent passed must be a UI5 Component or must be undefined");}if(o&&o.getMetadata&&o.getMetadata().getComponentName){A=o.getMetadata().getComponentName();}this.clear();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=a.getAdapterContainer(this._sContainerKey,this._oScope,A);return this;};
C.prototype.getValidity=function(){return this._oScope.validity;};
C.prototype.clear=function(){this._oItemMap={};this._aLoadedItemKeys=[];this._clear=true;this._oItemMap=new u.Map();};
C.prototype.load=function(){var d={},P,t=this;d=new q.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this.clear();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,d);P.always(function(){t._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){t._copyFromAdapter();if(t._isExpired()){t.clear();}d.resolve();});});return d.promise();};
C.prototype._copyFromAdapter=function(){var t=this,a;a=t._oAdapterContainer.getItemKeys().splice(0);a.forEach(function(i){t._oItemMap.put(i,JSON.stringify(t._oAdapterContainer.getItemValue(i)));});this._aLoadedItemKeys=t._oItemMap.keys().splice(0);};
C.prototype._isExpired=function(){var f,t,T;if(this.getValidity()===Infinity||this.getValidity()===0){return false;}t=this._getItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});T=f.format(this._getNow(),true);return t&&T>t;};
C.prototype._getNow=function(){return new Date();};
C.prototype._copyToAdapterUpdatingValidity=function(){var i=[],d=[],t=this,n,f,T,s;if(this._clear){i=this._oAdapterContainer.getItemKeys().splice(0);i.forEach(function(I){t._oAdapterContainer.delItem(I);});this._clear=false;}if(this.getValidity()===Infinity||this.getValidity()===0){this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE);this._delItemInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE);}else{f=D.getDateInstance({pattern:c.S_ABAPTIMESTAMPFORMAT});n=this._getNow();s=f.format(n,true);T=f.format(new Date(n.getTime()+this.getValidity()*60000),true);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_SCOPE,this._oScope);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_EXPIRE,T);this._setItemValueInternal(c.S_ADMIN_PREFIX,c.S_ITEMKEY_STORAGE,s);}i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.cloneToObject(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
C.prototype.save=function(){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});return s.promise();};
C.prototype.saveDeferred=function(n){var s,P,t=this;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_cancelAddNext(this._sContainerKey,s);function d(){P.always(function(){try{t._oAdapterContainer.save().fail(function(){s.reject();}).done(function(){s.resolve();});}catch(e){s.reject();}});}s._sapFnSave=d;s._sapTimeoutId=setTimeout(d,n);return s.promise();};
C.prototype.flush=function(){var s,P;this._copyToAdapterUpdatingValidity();s=new q.Deferred();P=this._oService._pendingContainerOperations_flushAddNext(this._sContainerKey,s);P.fail(function(){s.reject();}).done(function(){s.resolve();});return s.promise();};
C.prototype.getItemKeys=function(){var f=this._oItemMap.keys().filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});return f.map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
C.prototype._getInternalKeys=function(){return this._oItemMap.keys().splice(0);};
C.prototype.getItemValue=function(i){return this._getItemValueInternal(c.S_ITEM_PREFIX,i);};
C.prototype._getItemValueInternal=function(P,i){if(typeof i!=="string"||typeof P!=="string"){return undefined;}return p.cloneToObject(this._oItemMap.get(P+i));};
C.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
C.prototype.setItemValue=function(i,I){this._setItemValueInternal(c.S_ITEM_PREFIX,i,I);};
C.prototype._setItemValueInternal=function(i,I,o){if(typeof I!=="string"||typeof i!=="string"){throw new u.Error("Parameter value of sItemKey or sItemValue is not a string: sap.ushell.services.Personalization"," ");}if(I.length>40){L.error("Personalization Service item key/variant set name (\""+I+"\") should be less than 40 characters [current :"+I.length+"]");}this._oItemMap.put(i+I,JSON.stringify(o));};
C.prototype.delItem=function(i){this._delItemInternal(c.S_ITEM_PREFIX,i);};
C.prototype._delItemInternal=function(P,i){if(typeof i!=="string"){return undefined;}if(typeof P!=="string"){return undefined;}this._oItemMap.remove(P+i);};
C.prototype.getKey=function(){return this._sContainerKey.substring(c.S_CONTAINER_PREFIX.length);};
C.prototype.getUnmodifiableContainer=function(){var t=this;if(!this._oUnmodifiableContainer){this._oUnmodifiableContainer=(function(){var o={};["clear","delItem","flush","load","save","saveDeferred","setItemValue"].forEach(function(f){o[f]=function(n){throw new u.Error("Function "+n+" can't be called on unmodifiable container","ContextContainer"," ");}.bind(undefined,f);});["containsItem","getItemKeys","getItemValue","getUnmodifiableContainer","getValidity"].forEach(function(f){if(t[f]){o[f]=t[f].bind(t);}});return o;}());}return this._oUnmodifiableContainer;};
return C;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariantSet","sap/ui/thirdparty/jquery"],function(u,p,c,P,q){"use strict";
function a(A,C){this._sContainerKey=C;this._oAdapterContainer={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];var d={},t=this;this._init();d=new q.Deferred();if(!this._sContainerKey||typeof this._sContainerKey!=="string"){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._oAdapterContainer=A.getAdapterContainer(this._sContainerKey);this.load().fail(function(){d.reject();}).done(function(){d.resolve(t);});return d.promise();}
a.prototype._init=function(){this._oVariantSetMap={};this._oItemMap={};this._aLoadedVariantSetKeys=[];this._aLoadedItemKeys=[];this._oVariantSetMap=new u.Map();this._oItemMap=new u.Map();};
a.prototype.load=function(){var d={},i=[],v=[],I=[],m=[],t=this;function b(I){var n=[],e=[];n=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)!==0;});if(n.length===0){return I;}e=I.filter(function(s){return s.indexOf(c.S_ITEM_PREFIX)===0;});n.forEach(function(s){var o={},f="";f=c.S_ITEM_PREFIX+s;o=p.clone(t._oAdapterContainer.getItemValue(s));t._oAdapterContainer.setItemValue(f,o);t._oAdapterContainer.delItem(s);if(e&&Array.prototype.indexOf.call(e,f)===-1){e.push(f);}});return e;}d=new q.Deferred();if(!this._sContainerKey){throw new u.Error("Invalid container key: sap.ushell.services.Personalization"," ");}this._init();this._oAdapterContainer.load().fail(function(){d.reject();}).done(function(){i=t._oAdapterContainer.getItemKeys().splice(0);v=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)===0;});v.forEach(function(V){var o={};o=new P(V,t._oAdapterContainer);t._oVariantSetMap.put(V,o);});I=i.filter(function(s){return s.indexOf(c.S_VARIANT_PREFIX)!==0;});m=b(I);m.forEach(function(s){t._oItemMap.put(s,p.clone(t._oAdapterContainer.getItemValue(s)));});t._aLoadedVariantSetKeys=t._oVariantSetMap.keys().splice(0);t._aLoadedItemKeys=t._oItemMap.keys().splice(0);d.resolve();});return d.promise();};
a.prototype.save=function(){var s,i;this._serializeVariantSets();this._serializeItems();s=new q.Deferred();function S(){s.resolve();}function f(){s.reject();}try{i=this._oAdapterContainer.save();i.fail(f);i.done(S);}catch(e){s.reject();}return s.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys().map(function(e){return e.replace(c.S_ITEM_PREFIX,"","");});};
a.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(c.S_ITEM_PREFIX+i);};
a.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(c.S_ITEM_PREFIX+i);};
a.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}this._oItemMap.put(c.S_ITEM_PREFIX+i,I);};
a.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}if(this.containsItem(i)){this._oItemMap.remove(c.S_ITEM_PREFIX+i);}};
a.prototype._serializeItems=function(){var i=[],d=[],t=this;i=this._oItemMap.keys();i.forEach(function(I){t._oAdapterContainer.setItemValue(I,p.clone(t._oItemMap.get(I)));});d=this._aLoadedItemKeys.filter(function(I){return!(i.indexOf(I)>-1);});d.forEach(function(I){t._oAdapterContainer.delItem(I);});};
a.prototype.getVariantSetKeys=function(){var v=[],b=[];b=this._oVariantSetMap.keys();v=b.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this._oVariantSetMap.containsKey(c.S_VARIANT_PREFIX+v);};
a.prototype.getVariantSet=function(v){var s,V={};s=c.S_VARIANT_PREFIX+v;V=this._oVariantSetMap.get(s);return V;};
a.prototype.addVariantSet=function(v){var e={},V={},s="";if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}s=c.S_VARIANT_PREFIX+v;e={currentVariant:null,variants:{}};this._oAdapterContainer.setItemValue(s,e);V=new P(s,this._oAdapterContainer);this._oVariantSetMap.put(s,V);return V;};
a.prototype._serializeVariantSets=function(){var v=[],d=[],t=this;v=this._oVariantSetMap.keys();v.forEach(function(V){var o={},b={};o=t._oVariantSetMap.get(V);b=o._serialize();t._oAdapterContainer.setItemValue(V,p.clone(b));});d=this._aLoadedVariantSetKeys.filter(function(V){return!(v.indexOf(V)>-1);});d.forEach(function(V){t._oAdapterContainer.delItem(V);});};
a.prototype.delVariantSet=function(v){var s="";s=c.S_VARIANT_PREFIX+v;this._oVariantSetMap.remove(s);return this._oAdapterContainer.delItem(s);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariant',["sap/ushell/utils"],function(u){"use strict";
function P(v,V,o){if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof V!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(o&&typeof o!=="object"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantKey=v;this._oVariantName=V;this._oItemMap=new u.Map();this._oItemMap.entries=o||{};}
;
P.prototype.getVariantKey=function(){return this._oVariantKey;};
P.prototype.getVariantName=function(){return this._oVariantName;};
P.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.get(i);};
P.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}return this._oItemMap.put(i,I);};
P.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.containsKey(i);};
P.prototype.getItemKeys=function(){return this._oItemMap.keys();};
P.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}return this._oItemMap.remove(i);};
P.prototype._serialize=function(){var i=[],v={},I={},t=this;v.name=this.getVariantName();i=this._oItemMap.keys();i.forEach(function(s){I[s]=t.getItemValue(s);});v.variantData=I;return v;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/PersonalizationContainerVariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/PersonalizationContainerVariant"],function(u,p,P){"use strict";
function c(v,a){var V,s,b,o,d;this._sVariantSetKey=v;this._oAdapterContainer=a;this._oVariantNameMap=new u.Map();this._oVariantMap=new u.Map();V=p.clone(this._oAdapterContainer.getItemValue(v));if(V.hasOwnProperty("currentVariant")){this._sCurrentVariantKey=V.currentVariant;}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(V.hasOwnProperty("variants")){for(s in V.variants){if(V.variants.hasOwnProperty(s)){b=V.variants[s].name;o=V.variants[s].variantData;if(this._oVariantNameMap.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{this._oVariantNameMap.put(b,s);d=new P(s,b,o);this._oVariantMap.put(s,d);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
;
c.prototype.getCurrentVariantKey=function(){return this._sCurrentVariantKey;};
c.prototype.setCurrentVariantKey=function(v){this._sCurrentVariantKey=v;};
c.prototype.getVariantKeys=function(){return this._oVariantMap.keys();};
c.prototype.getVariantNamesAndKeys=function(){return JSON.parse(JSON.stringify(this._oVariantNameMap.entries));};
c.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.get(v);};
c.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantNameMap.get(v);};
c.prototype.containsVariant=function(v){if(typeof v!=="string"){return undefined;}return this._oVariantMap.containsKey(v);};
c.prototype.addVariant=function(v){var m=0,V="",o={};m=parseInt(this._oVariantMap.keys().sort(function(a,b){return a-b;}).reverse()[0],10);V=isNaN(m)?"0":(m+1).toString();if(this._oVariantMap.containsKey(V)){throw new u.Error("Variant key '"+V+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantNameMap.containsKey(v)){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this._oVariantNameMap.get(v)+"' New key: '"+V+"') ': sap.ushell.services.Personalization"," ");}o=new P(V,v);this._oVariantMap.put(V,o);this._oVariantNameMap.put(v,V);return o;};
c.prototype._serialize=function(){var v=[],V={},o={},t=this;V.currentVariant=this._sCurrentVariantKey;v=this.getVariantKeys();v.forEach(function(s){var a={};a=t._oVariantMap.get(s);o[s]=a._serialize();});V.variants=o;return V;};
c.prototype.delVariant=function(v){var V=this._oVariantMap.get(v);if(V){this._oVariantNameMap.remove(V.getVariantName());this._oVariantMap.remove(v);}};
return c;});
sap.ui.predefine('sap/ushell/services/_Personalization/Personalizer',["sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/Log"],function(u,q,L){"use strict";
function P(s,a,p,S,c){this._sPersContainer="";this._sPersItem="";this._sPersVariant=null;this._oAdapter=a;this._oService=s;this._oScope=S;this._oComponent=c;if(!p||!p.container||!p.item||typeof p.container!=="string"||typeof p.item!=="string"){throw new u.Error("Invalid input for oPersId: sap.ushell.services.Personalization"," ");}this._sPersContainer=p.container;this._sPersItem=p.item;}
P.prototype._getContainer=function(p){if(!this._oGetContainerPromise){this._oGetContainerPromise=this._oService.getContainer(p,this._oScope,this._oComponent);}return this._oGetContainerPromise;};
P.prototype.getPersData=function(){var d={},t=this;d=new q.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){d.resolve(c.getItemValue(t._sPersItem));});d.fail(function(){L.error("Fail to get Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.setPersData=function(v){var d={},t=this;d=new q.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.setItemValue(t._sPersItem,v);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});d.fail(function(){L.error("Fail to set Personalization data for Personalizer container: "+t._sPersContainer);});return d.promise();};
P.prototype.delPersData=function(){var d={},t=this,m;d=new q.Deferred();this._getContainer(this._sPersContainer).fail(function(){d.reject();}).done(function(c){c.delItem(t._sPersItem);c.save().fail(function(){d.reject();}).done(function(){d.resolve();});});m=d.promise();m.fail(function(){L.error("Fail to delete Personalization data for Personalizer container: "+this._sPersContainer);});return m;};
return P;});
sap.ui.predefine('sap/ushell/services/_Personalization/TransientPersonalizer',["sap/ui/thirdparty/jquery"],function(q){"use strict";
function T(){this._oValue=undefined;}
T.prototype.getPersData=function(){var d;d=new q.Deferred();d.resolve(this._oValue);return d.promise();};
T.prototype.setPersData=function(v){var d;d=new q.Deferred();this._oValue=v;d.resolve();return d.promise();};
T.prototype.delPersData=function(){var d;d=new q.Deferred();this._oValue=undefined;d.resolve();return d.promise();};
T.prototype.setValue=function(v){this._oValue=v;};
T.prototype.getValue=function(){return this._oValue;};
return T;});
sap.ui.predefine('sap/ushell/services/_Personalization/Variant',["sap/ushell/utils","sap/ushell/services/_Personalization/utils"],function(u,p){"use strict";
function V(v,s,a){if(typeof s!=="string"){throw new u.Error("Parameter value of sVariantKey is not a string: sap.ushell.services.Personalization"," ");}if(typeof a!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}this._oVariantSet=v;this._sVariantKey=s;this._sVariantName=a;}
V.prototype.getVariantKey=function(){return this._sVariantKey;};
V.prototype.getVariantName=function(){return this._sVariantName;};
V.prototype.setVariantName=function(v){var o=this._oVariantSet._getVariantSet(),a;if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this._oVariantSet.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant with name '"+v+"' already exists in variant set '"+this._oVariantSet._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,this._sVariantKey)){a=o.variants[this._sVariantKey];a.name=v;this._sVariantName=v;this._oVariantSet._serialize();}else{throw new u.Error("Variant does not longer exist"," ");}};
V.prototype.getItemValue=function(i){if(typeof i!=="string"){return undefined;}var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i)&&p.clone(v[i]);};
V.prototype.setItemValue=function(i,I){if(typeof i!=="string"){throw new u.Error("Parameter value of sItemKey is not a string: sap.ushell.services.Personalization"," ");}var v,a=this._oVariantSet._getVariantSet().variants&&this._oVariantSet._getVariantSet().variants[this._sVariantKey];if(!a){throw new u.Error("Variant does not longer exist"," ");}if(!a.variantData){a.variantData={};}v=a.variantData;v[i]=p.clone(I);this._oVariantSet._serialize();};
V.prototype.containsItem=function(i){if(typeof i!=="string"){return undefined;}var v=this.oAccess.variantSet._getVariantSet().variants[this._sVariantKey].variantData;return Object.prototype.hasOwnProperty.call(v,i);};
V.prototype.getItemKeys=function(){var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData,i,I=[];for(i in v){if(Object.prototype.hasOwnProperty.call(v,i)){I.push(i);}}I.sort();return I;};
V.prototype.delItem=function(i){if(typeof i!=="string"){return undefined;}var v=this._oVariantSet._getVariantSet().variants[this._sVariantKey].variantData;delete v[i];this._oVariantSet._serialize();};
return V;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSet',["sap/ushell/utils","sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/PersonalizationContainerVariant","sap/ushell/services/_Personalization/Variant"],function(u,c,P,V){"use strict";
function d(v,C){var s,a,o=new u.Map(),b=new u.Map(),e,f;this._oContextContainer=C;this._sVariantSetKey=v;this._oVariantSetData=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey);if(!Object.prototype.hasOwnProperty.call(this._oVariantSetData,"currentVariant")){throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}if(Object.prototype.hasOwnProperty.call(this._oVariantSetData,"variants")){for(s in this._oVariantSetData.variants){if(Object.prototype.hasOwnProperty.call(this._oVariantSetData.variants,s)){a=this._oVariantSetData.variants[s].name;e=this._oVariantSetData.variants[s].variantData;if(o.containsKey(a)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{o.put(a,s);f=new P(s,a,e);b.put(s,f);}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return this;}
d.prototype._getVariantSet=function(){return this._oVariantSetData;};
d.prototype._serialize=function(){this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,this._sVariantSetKey,this._oVariantSetData);};
d.prototype.getCurrentVariantKey=function(){return this._getVariantSet().currentVariant;};
d.prototype.setCurrentVariantKey=function(v){this._getVariantSet().currentVariant=v;this._serialize();};
d.prototype.getVariantKeys=function(){var v=new u.Map(),o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){v.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.keys();};
d.prototype.getVariantNamesAndKeys=function(){var v=new u.Map(),o=new u.Map(),a=this._getVariantSet(this._sVariantSetKey),s,b;if(Object.prototype.hasOwnProperty.call(a,"variants")){for(s in a.variants){if(Object.prototype.hasOwnProperty.call(a.variants,s)){b=a.variants[s].name;if(v.containsKey(b)){throw new u.Error("Variant name already exists: sap.ushell.services.Personalization"," ");}else{v.put(b,s);}o.put(s,"dummy");}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return v.entries;};
d.prototype.getVariant=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s,a,b;if(Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v)){s=o.variants[v].name;b=o.variants[v].variantData;a=new V(this,v,s,b);return a;}return undefined;};
d.prototype.getVariantKeyByName=function(v){if(typeof v!=="string"){return undefined;}var o=this._getVariantSet(this._sVariantSetKey),s;if(Object.prototype.hasOwnProperty.call(o,"variants")){for(s in o.variants){if(Object.prototype.hasOwnProperty.call(o.variants,s)){if(v===o.variants[s].name){return s;}}}}else{throw new u.Error("Corrupt variant set data: sap.ushell.services.Personalization"," ");}return undefined;};
d.prototype.containsVariant=function(v){var o=this._getVariantSet();if(typeof v!=="string"){return undefined;}return Object.prototype.hasOwnProperty.call(o,"variants")&&Object.prototype.hasOwnProperty.call(o.variants,v);};
d.prototype.addVariant=function(v){var k=[],m=0,s="",o={};k=this.getVariantKeys();m=parseInt(k.sort(function(a,b){return a-b;}).reverse()[0],10);s=isNaN(m)?"0":(m+1).toString();if(k.indexOf(s)>=0){throw new u.Error("Variant key '"+s+"' already exists in variant set"+this._sVariantSetKey+"': sap.ushell.services.Personalization"," ");}if(typeof v!=="string"){throw new u.Error("Parameter value of sVariantName is not a string: sap.ushell.services.Personalization"," ");}if(this.getVariantKeyByName(v)!==undefined){throw new u.Error("Variant name '"+v+"' already exists in variant set '"+this._sVariantSetKey+"' (Old key: '"+this.getVariantKeyByName(v)+"' New key: '"+s+"') ': sap.ushell.services.Personalization"," ");}o=new V(this,s,v);this._getVariantSet(this._sVariantSetKey).variants[s]={name:v,variantData:{}};this._serialize();return o;};
d.prototype.delVariant=function(v){var o;if(typeof v!=="string"){return undefined;}o=this._getVariantSet();if(o&&o.variants){delete this._oVariantSetData.variants[v];}this._serialize();};
return d;});
sap.ui.predefine('sap/ushell/services/_Personalization/VariantSetAdapter',["sap/ushell/services/_Personalization/constants.private","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/VariantSet"],function(c,u,V){"use strict";
function a(C){this._oContextContainer=C;}
;
a.prototype.save=function(){return this._oContextContainer.save();};
a.prototype.getVariantSetKeys=function(){var p=this._oContextContainer._getInternalKeys(),v=[];v=p.map(function(e){return e.replace(c.S_VARIANT_PREFIX,"","");});return v;};
a.prototype.containsVariantSet=function(v){return this.getVariantSetKeys().indexOf(v)>=0;};
a.prototype.getVariantSet=function(v){var o=this._oContextContainer._getItemValueInternal(c.S_VARIANT_PREFIX,v);if(!o){return undefined;}return new V(v,this._oContextContainer);};
a.prototype.addVariantSet=function(v){var e={},o={};if(this.containsVariantSet(v)){throw new u.Error("Container already contains a variant set with key '"+v+"': sap.ushell.services.Personalization"," ");}e={currentVariant:null,variants:{}};this._oContextContainer._setItemValueInternal(c.S_VARIANT_PREFIX,v,e);o=new V(v,this._oContextContainer);return o;};
a.prototype.delVariantSet=function(v){this._oContextContainer._delItemInternal(c.S_VARIANT_PREFIX,v);};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var W=function(p,b){this._oBackendAdapter=b;if(b){this.supportsGetWithoutSubsequentLoad=b.supportsGetWithoutSubsequentLoad;}};W.prototype.data={};
W.prototype.getAdapterContainer=function(c,s,a){var b=this._oBackendAdapter&&this._oBackendAdapter.getAdapterContainer(c,s,a);var d=sap.ui.require("sap/ushell/services/_Personalization/WindowAdapterContainer");return new d(c,s,b);};
W.prototype.delAdapterContainer=function(c,s){var d=new q.Deferred();delete W.prototype.data[c];if(this._oBackendAdapter){this._oBackendAdapter.delAdapterContainer(c,s).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
return W;});
sap.ui.predefine('sap/ushell/services/_Personalization/WindowAdapterContainer',["sap/ushell/utils","sap/ushell/services/_Personalization/utils","sap/ushell/services/_Personalization/WindowAdapter","sap/ui/thirdparty/jquery"],function(u,p,W,q){"use strict";
function a(C,s,b){this._oBackendContainer=b;this._oItemMap=new u.Map();this._sContainerKey=C;}
function c(C){var i,k=C.getItemKeys();for(i=0;i<k.length;i=i+1){C.delItem(k[i]);}}
a.prototype.load=function(){var d=new q.Deferred(),i,k,t=this;if(W.prototype.data[this._sContainerKey]){this._oItemMap.entries=p.clone(W.prototype.data[this._sContainerKey]);if(this._oBackendContainer){c(this._oBackendContainer);k=this.getItemKeys();for(i=0;i<k.length;i=i+1){this._oBackendContainer.setItemValue(k[i],this._oItemMap.get(k[i]));}}d.resolve();}else if(this._oBackendContainer){this._oBackendContainer.load().done(function(){k=t._oBackendContainer.getItemKeys();for(i=0;i<k.length;i=i+1){t.setItemValue(k[i],t._oBackendContainer.getItemValue(k[i]));}W.prototype.data[t._sContainerKey]=p.clone(t._oItemMap.entries);d.resolve();}).fail(function(m){d.reject(m);});}else{W.prototype.data[this._sContainerKey]={};d.resolve();}return d.promise();};
a.prototype.save=function(){var d=new q.Deferred();W.prototype.data[this._sContainerKey]=p.clone(this._oItemMap.entries);if(this._oBackendContainer){this._oBackendContainer.save().done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}return d.promise();};
a.prototype.getItemKeys=function(){return this._oItemMap.keys();};
a.prototype.containsItem=function(i){this._oItemMap.containsKey(i);};
a.prototype.getItemValue=function(i){return this._oItemMap.get(i);};
a.prototype.setItemValue=function(i,I){this._oItemMap.put(i,I);if(this._oBackendContainer){this._oBackendContainer.setItemValue(i,I);}};
a.prototype.delItem=function(i){this._oItemMap.remove(i);if(this._oBackendContainer){this._oBackendContainer.delItem(i);}};
return a;});
sap.ui.predefine('sap/ushell/services/_Personalization/constants',[],function(){"use strict";return{keyCategory:{"FIXED_KEY":"FIXED_KEY","GENERATED_KEY":"GENERATED_KEY"},writeFrequency:{"HIGH":"HIGH","LOW":"LOW"}};});
sap.ui.predefine('sap/ushell/services/_Personalization/constants.private',[],function(){"use strict";return{S_CONTAINER_PREFIX:"sap.ushell.personalization#",S_ITEM_PREFIX:"ITEM#",S_VARIANT_PREFIX:"VARIANTSET#",S_ABAPTIMESTAMPFORMAT:"yyyyMMddHHmmss",S_ADMIN_PREFIX:"ADMIN#",S_ITEMKEY_SCOPE:"sap-ushell-container-scope",S_ITEMKEY_STORAGE:"sap-ushell-container-storageUTCTimestamp",S_ITEMKEY_EXPIRE:"sap-ushell-container-expireUTCTimestamp"};});
sap.ui.predefine('sap/ushell/services/_Personalization/utils',["sap/ushell/services/_Personalization/constants","sap/ushell/services/_Personalization/constants.private","sap/ui/thirdparty/jquery","sap/base/Log"],function(c,p,q,L){"use strict";
function a(e,k){var m;for(m in k){if(typeof k[m]!=="function"){if(k.hasOwnProperty(m)){if(m===e){return true;}}}}return false;}
function b(C){if(C.length>40){L.error("Personalization Service container key (\""+C+"\") should be less than 40 characters [current :"+C.length+"]");}return p.S_CONTAINER_PREFIX+C;}
function d(o,e,t,P){if(o&&o.validity===0&&!e){return t;}return P;}
function i(){var r=window["sap-ushell-config"]&&window["sap-ushell-config"].services&&window["sap-ushell-config"].services.ShellNavigation&&window["sap-ushell-config"].services.ShellNavigation.config&&window["sap-ushell-config"].services.ShellNavigation.config.reload;return r;}
function f(s,e){var A={validity:Infinity,keyCategory:c.keyCategory.GENERATED_KEY,writeFrequency:c.writeFrequency.HIGH,clientStorageAllowed:false};if(s){A.validity=s.validity;if(A.validity===null||A.validity===undefined||typeof A.validity!=="number"){A.validity=Infinity;}if(!(typeof A.validity==="number"&&((A.validity>=0&&A.validity<1000)||A.validity===Infinity))){A.liftime=Infinity;}A.keyCategory=a(s.keyCategory,c.keyCategory)?s.keyCategory:A.keyCategory;A.writeFrequency=a(s.writeFrequency,c.writeFrequency)?s.writeFrequency:A.writeFrequency;if(typeof s.clientStorageAllowed==="boolean"&&(s.clientStorageAllowed===true||s.clientStorageAllowed===false)){A.clientStorageAllowed=s.clientStorageAllowed;}}if(A.validity===0&&e){A.validity=1440;}return A;}
function l(A){if(!A.lazy){return q.when(A.instance);}try{return A.create.call(null);}catch(e){return new q.Deferred().reject(e).promise();}}
function g(C){if(!C){return false;}var A=C.getManifestObject();if(!A){return false;}var s=A.getEntry("/sap.ui5/appVariantId");if(!s){return false;}var e=A.getComponentName();if(s===e){return false;}return true;}
function h(o){if(o===undefined){return undefined;}try{return JSON.parse(o);}catch(e){return undefined;}}
function j(o){if(o===undefined){return undefined;}try{return JSON.parse(JSON.stringify(o));}catch(e){return undefined;}}
return{adjustScope:f,cloneToObject:h,clone:j,addContainerPrefix:b,pickAdapter:d,isAppVariant:g,loadAdapter:l,isLaunchpadReload:i};});
sap.ui.predefine('sap/ushell/services/_PluginManager/Extensions',["sap/ushell/services/_PluginManager/HeaderExtensions","sap/ushell/services/_PluginManager/MenuExtensions"],function(H,m){"use strict";var O={Header:a,Menu:g};
function g(p){return Promise.resolve(m(p));}
function a(){return Promise.resolve(H);}
function b(p,e){var E=O[e];if(!E){return Promise.reject("Unsupported extension: '"+e+"'");}return E(p);}
return b;});
sap.ui.predefine('sap/ushell/services/_PluginManager/HeaderExtensions',["sap/ushell/EventHub"],function(E){"use strict";
function s(i,c,a){E.emit("setHeaderCentralAreaElement",{id:i,currentState:c,states:a});}
return{setHeaderCentralAreaElement:s};});
sap.ui.predefine('sap/ushell/services/_PluginManager/MenuExtensions',[],function(){"use strict";
function c(p){return function g(n){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getEntryProvider(p,n);});};}
return function(p){return{getMenuEntryProvider:c(p)};};});
sap.ui.predefine('sap/ushell/services/_Ui5ComponentLoader/utils',["sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/ui/core/util/AsyncHintsHelper","sap/base/Log","sap/ui/core/Component"],function(q,U,a,L,C){"use strict";var i=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getLogonSystem().getPlatform()==="abap";var O={name:"core-ext-light",count:4,debugName:"core-ext-light",path:i?"sap/ushell_abap/bootstrap/evo/":"sap/fiori/"};
function c(t,w){var D=new q.Deferred();t.componentData=w;if(t.manifest===undefined){t.manifest=false;}C.create(t).then(function(x){D.resolve(x);},function(E){D.reject(E);});return D.promise();}
function s(S){var A=(S&&S.hasOwnProperty("amendedLoading"))?S.amendedLoading:true;return A;}
function b(A){var t=true;if(A.hasOwnProperty("loadCoreExt")){t=A.loadCoreExt;}return t;}
function d(A,S,t){var w=true;if(A.hasOwnProperty("loadDefaultDependencies")){w=A.loadDefaultDependencies;}if(S&&S.hasOwnProperty("loadDefaultDependencies")){w=w&&S.loadDefaultDependencies;}w=w&&t;return w;}
function e(P){var S=P.semanticObject||null;var A=P.action||null;if(!S||!A){return null;}return"application-"+S+"-"+A+"-component";}
function u(t){return t&&t.indexOf("?")>=0;}
function r(t){var w=new RegExp("[/]~[\\w-]+~[A-Z0-9]?");return t.replace(w,"");}
function f(t){if(!t){return t;}var I=t.indexOf("?");if(I>=0){return t.slice(0,I);}return t;}
function g(){return q.sap.isDeclared("sap.fiori.core",true)||q.sap.isDeclared("sap.fiori.core-ext-light",true);}
function l(A,E,t,w,x){var y="The issue is most likely caused by application "+A,z="Failed to load UI5 component with properties: '"+x+"'.";if(w){z+=" Error likely caused by:\n"+w;}else{z+=" Error: '"+E+"'";}if(t==="parsererror"){y+=", as one or more of its resources could not be parsed";}y+=". Please create a support incident and assign it to the support component of the respective application.";L.error(y,z,A);}
function h(t){var P=new U(t||window.location.href).mParams,x=P["sap-xapp-state"],R;delete P["sap-xapp-state"];R={startupParameters:P};if(x){R["sap-xapp-state"]=x;}return R;}
function j(A,M){if(!Array.isArray(M)){return;}M.forEach(function(t){var S=String.prototype.toLowerCase.call(t.severity||"");S=["trace","debug","info","warning","error","fatal"].indexOf(S)!==-1?S:"error";L[S](t.text,t.details,A);});}
function p(t){var B,w={name:"CoreResourcesComplement"};if(v(t)){B=t;}else{B=O;}if(window["sap-ui-debug"]===true){w.aResources=[B.path+B.debugName+".js"];}else{w.aResources=k(B.name,B.path,B.count);}return w;}
function k(B,P,R){var t=arguments[3]||[],w=P;if(typeof B!=="string"||typeof w!=="string"||typeof R!=="number"){L.error("Ui5ComponentLoader: _buildBundleResourcesArray called with invalid arguments");return null;}if(w.substr(-1)!=="/"){w+="/";}if(R===1){t.push(w+B+".js");}if(t.length>=R){return t;}t.push(w+B+"-"+t.length+".js");return k(B,w,R,t);}
function v(t){var w=true;if(!t){return false;}if(!t.name||typeof t.name!=="string"){L.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'name' property");w=false;}if(!t.count||typeof t.count!=="number"){L.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'count' property");w=false;}if(!t.debugName||typeof t.debugName!=="string"){L.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'debugName' property");w=false;}if(!t.path||typeof t.path!=="string"){L.error("Ui5ComponentLoader: Configured CoreResourcesComplement Bundle has incorrect 'path' property");w=false;}return w;}
function m(B){if(!B||!Array.isArray(B.aResources)||!B.name){L.error("Ui5ComponentLoader: loadBundle called with invalid arguments");return null;}var P=[],D=new q.Deferred();B.aResources.forEach(function(R){P.push(q.sap._loadJSResourceAsync(R));});Promise.all(P).then(function(){D.resolve();}).catch(function(){L.error("Ui5ComponentLoader: failed to load bundle: "+B.name);D.reject();});return D.promise();}
function n(A,t,N,w,x,y,z,B,D){var E=q.extend(true,{},x);if(!E.asyncHints){E.asyncHints=t?{libs:["sap.ca.scfld.md","sap.ca.ui","sap.me","sap.ui.unified"]}:{};}if(A){E.asyncHints.preloadBundles=E.asyncHints.preloadBundles||[];E.asyncHints.preloadBundles=E.asyncHints.preloadBundles.concat(D.aResources);}if(w){E.asyncHints.waitFor=w;}if(!E.name){E.name=y;}if(z){E.url=f(z);}if(B){E.id=B;}if(N&&E.asyncHints){a.modifyUrls(E.asyncHints,r);}return E;}
function o(B,t,A,T){var w=q.extend(true,{startupParameters:{}},B);if(A){w.config=A;}if(T){w.technicalParameters=T;}if(u(t)){var x=h(t);w.startupParameters=x.startupParameters;if(x["sap-xapp-state"]){w["sap-xapp-state"]=x["sap-xapp-state"];}}return w;}
return{constructAppComponentId:e,getParameterMap:h,isCoreExtAlreadyLoaded:g,logAnyApplicationDependenciesMessages:j,logInstantiateComponentError:l,shouldLoadCoreExt:b,shouldLoadDefaultDependencies:d,shouldUseAmendedLoading:s,urlHasParameters:u,removeParametersFromUrl:f,createUi5Component:c,prepareBundle:p,loadBundle:m,createComponentProperties:n,createComponentData:o,buildBundleResourcesArray:k};},false);
sap.ui.predefine('sap/ushell/services/_UserRecents/RecentActivity',["./UserRecentsBase","sap/ushell/library","sap/ushell/EventHub","sap/ui/Device","sap/base/Log"],function(U,u,E,D,L){"use strict";var A=u.AppType;
var R=U.extend("sap.ushell.services.RecentActivity",{constructor:function(m){U.call(this,"RecentActivity",m,R._compareItems);}});
R.MAX_DAYS=30;R.ITEM_COUNT=30;
R._compareItems=function(a,b){if(a.appType===b.appType){if(a.appType!==A.APP){return a.url===b.url;}return a.appId===b.appId;}else if(a.appType===A.APP||b.appType===A.APP){return(a.appId===b.appId)&&(a.url===b.url);}return false;};
R.prototype._updateIfAlreadyIn=function(i,t){return this.oRecentActivities.recentUsageArray.some(function(r){var f;if(R._compareItems(r.oItem,i)){if((i.appType===r.oItem.appType)||(i.appType!==A.APP)){jQuery.extend(r.oItem,i);r.iTimestamp=t;r.oItem.timestamp=t;r.mobile=undefined;r.tablet=undefined;r.desktop=undefined;if((i.appType===r.oItem.appType)||(i.appType!==A.APP&&r.oItem.appType!==A.APP)){r.aUsageArray[r.aUsageArray.length-1]+=1;r.iCount+=1;}this.oRecentActivities.recentUsageArray.sort(U._itemSorter);}f=true;}else{f=false;}return f;}.bind(this));};
R.prototype._insertNew=function(i,t,I){i.timestamp=t;if(I){i.icon=I;}var n={oItem:i,iTimestamp:t,aUsageArray:[1],iCount:1,mobile:undefined,tablet:undefined,desktop:undefined};if(this.oRecentActivities.recentUsageArray.length===this.iMaxItems){this.oRecentActivities.recentUsageArray.pop();}this.oRecentActivities.recentUsageArray.unshift(n);};
R.prototype.newItem=function(i){var d=new jQuery.Deferred();var t=Date.now();var I=this.getActivityIcon(i.appType,i.icon);var a;var c=this.getDayFromDateObj(new Date());this._load().done(function(l){this.oRecentActivities=this.getRecentActivitiesFromLoadedData(l);if(c!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=c;}a=this._updateIfAlreadyIn(i,t);if(!a){this._insertNew(i,t,I);}this._save(this.oRecentActivities).done(function(){E.emit("newUserRecentsItem",this.oRecentActivities);d.resolve();}.bind(this)).fail(function(){d.reject();});}.bind(this));return d.promise();};
R.prototype.getActivityIcon=function(a,i){switch(a){case A.SEARCH:return i||"sap-icon://search";case A.COPILOT:return i||"sap-icon://co";case A.URL:return i||"sap-icon://internet-browser";default:return i||"sap-icon://product";}};
R.prototype.clearAllActivities=function(){var d=new jQuery.Deferred();this._save([]).done(function(){E.emit("userRecentsCleared",Date.now());d.resolve();}).fail(function(){d.reject();});return d.promise();};
R.prototype.getRecentItemsHelper=function(m){var d=new jQuery.Deferred();var a;var o;var c;var i=false;var I=[];var b=[];var e=this.getDayFromDateObj(new Date());if(D.system.desktop){c="desktop";}else if(D.system.tablet){c="tablet";}else{c="mobile";}this._load().done(function(l){this.oRecentActivities=this.getRecentActivitiesFromLoadedData(l);var n=false;var M;if(e!==this.oRecentActivities.recentDay){this.addNewDay();this.oRecentActivities.recentDay=e;n=true;}for(a=0;a<this.oRecentActivities.recentUsageArray.length&&!i;a++){o=this.oRecentActivities.recentUsageArray[a];if(o[c]===undefined){if(!(o.oItem.url[0]==="#")){b.push(o.oItem.url);}else if(o.oItem.url.indexOf("?")>-1){M=o.oItem.url.substring(o.oItem.url.indexOf("?"));if(M.indexOf("&/")>-1){M=M.substring(0,M.indexOf("&/"));}I.push(o.oItem.appId+M);}else{I.push(o.oItem.appId);}}else{i=true;}}if(b.length>0){var f;for(a=0;a<this.oRecentActivities.recentUsageArray.length;a++){if(!(this.oRecentActivities.recentUsageArray[a].oItem.url[0]==="#")){f=this.oRecentActivities.recentUsageArray[a];f[c]=true;}}if(I.length<=0){this._save(this.oRecentActivities).done(function(){var g=this._getRecentItemsForDevice(c,this.oRecentActivities,m);d.resolve(g);}.bind(this)).fail(function(){d.reject();});}}if(I.length>0){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(C){C.isIntentSupported(I).done(function(r){i=false;for(a=0;a<this.oRecentActivities.recentUsageArray.length&&!i;a++){o=this.oRecentActivities.recentUsageArray[a];if(o[c]===undefined){M="";if(o.oItem.url.indexOf("?")>-1){M=o.oItem.url.substring(o.oItem.url.indexOf("?"));if(M.indexOf("&/")>-1){M=M.substring(0,M.indexOf("&/"));}}var h=r[o.oItem.appId+M];o[c]=!!(h&&h.supported);}else if(o.oItem.url[0]==="#"){i=true;}}this._save(this.oRecentActivities).done(function(){var g=this._getRecentItemsForDevice(c,this.oRecentActivities,m);d.resolve(g);}.bind(this)).fail(function(){d.reject();});}.bind(this)).fail(function(s){d.reject(s);});}.bind(this));}else if((I.length<=0)&&(b.length<=0)){if(n){this._save(this.oRecentActivities).done(function(){var g=this._getRecentItemsForDevice(c,this.oRecentActivities,m);d.resolve(g);}.bind(this)).fail(function(){d.reject();});}else{var g=this._getRecentItemsForDevice(c,this.oRecentActivities,m);d.resolve(g);}}}.bind(this)).fail(function(){d.reject();});return d.promise();};
R.prototype._getRecentItemsForDevice=function(d,r,m){var a=[];var i=0;var o;for(var b=0;b<r.recentUsageArray.length&&(!m||i<m);b++){o=r.recentUsageArray[b];if(o[d]){a.push(o);i++;}}return a;};
R.prototype.getRecentItems=function(){var d=new jQuery.Deferred();this.getRecentItemsHelper(R.ITEM_COUNT).done(function(r){d.resolve(jQuery.map(r,function(o){return o.oItem;}));}).fail(function(){d.reject();});return d.promise();};
R.prototype.getFrequentItems=function(){var d=new jQuery.Deferred();this.getRecentItemsHelper().done(function(r){var c;var w=0;var f=[];var o;var p=r[0]?new Date(r[0].iTimestamp):undefined;var e;for(c=0;c<r.length&&w<R.MAX_DAYS;c++){o=r[c];if(o.iCount>1){f.push(o);}e=new Date(o.iTimestamp);if(p.toDateString()!==e.toDateString()){w++;p=e;}}f.sort(function(a,b){return b.iCount-a.iCount;});f=f.slice(0,R.ITEM_COUNT);d.resolve(jQuery.map(f,function(a){return a.oItem;}));}).fail(function(){d.reject();});return d.promise();};
R.prototype.addNewDay=function(){var a,c;for(a=0;a<this.oRecentActivities.recentUsageArray.length;a++){if(this.oRecentActivities.recentUsageArray[a].aUsageArray){c=this.oRecentActivities.recentUsageArray[a].aUsageArray;}else{c=[];this.oRecentActivities.recentUsageArray[a].aUsageArray=c;this.oRecentActivities.recentUsageArray[a].iCount=0;}c[c.length]=0;if(c.length>R.MAX_DAYS){this.oRecentActivities.recentUsageArray[a].iCount-=c[0];c.shift();}}};
R.prototype.getDayFromDateObj=function(d){return(d.getUTCFullYear()+"/"+(d.getUTCMonth()+1)+"/"+d.getUTCDate());};
R.prototype.getRecentActivitiesFromLoadedData=function(l){var r;if(Array.isArray(l)){r={recentDay:null,recentUsageArray:l};}else{r=l||{recentDay:null,recentUsageArray:[]};}r.recentUsageArray=(r.recentUsageArray||[]).filter(function(a){var i=a&&a.oItem&&a.oItem.url;if(!i){L.error("FLP Recent Activity",a,"is not valid. The activity is removed from the list.");}return i;});return r;};
return R;});
sap.ui.predefine('sap/ushell/services/_UserRecents/RecentAppsUsage',["./UserRecentsBase","sap/base/Log","sap/ushell/utils"],function(U,L,u){"use strict";
var R=U.extend("sap.ushell.services.RecentAppsUsage",{constructor:function(){U.call(this,"AppsUsage");}});
R.MAX_DAYS=30;
R.prototype.init=function(){var c=this.getDayFromDateObj(new Date());var d=false;if(this._oInitDeferred===undefined){this._oInitDeferred=new jQuery.Deferred();}if(!d||c!==this.oAppsUsageData.recentDay){d=true;this._load().done(function(a){this.oAppsUsageData=a||{recentDay:null,recentAppsUsageMap:{}};this.calculateInitialUsage(c);this._oInitDeferred.resolve(this.oAppsUsageData);}.bind(this)).fail(function(){L.error("UShell-lib ; RecentAppsUsage ; Load data in Init failed");this._oInitDeferred.reject();}.bind(this));}return this._oInitDeferred.promise();};
R.prototype.calculateInitialUsage=function(c){if(c!==this.oAppsUsageData.recentDay){this.addNewDay();this.oAppsUsageData.recentDay=c;setTimeout(function(){this.cleanUnusedHashes();}.bind(this),3000);this.saveAppsUsage(this.oAppsUsageData);}};
R.prototype.addAppUsage=function(h){if(!u.validHash(h)){return(new jQuery.Deferred()).reject("Non valid hash").promise();}return this.init().done(function(){var a=this.oAppsUsageData.recentAppsUsageMap[h]||[];if(a.length===0){a[0]=1;}else{a[a.length-1]+=1;}this.oAppsUsageData.recentAppsUsageMap[h]=a;this.saveAppsUsage(this.oAppsUsageData);}.bind(this)).fail(function(){L.error("Ushell-lib ; addAppUsage ; Initialization falied!");});};
R.prototype.getAppsUsage=function(){var r;var d=new jQuery.Deferred();this.init().done(function(){r=this.summarizeUsage();d.resolve(r);}.bind(this)).fail(function(){d.reject("Not initialized yet");});return d.promise();};
R.prototype.summarizeUsage=function(){var a={};var m,b;var f=true;for(var h in this.oAppsUsageData.recentAppsUsageMap){a[h]=this.getHashUsageSum(h);if(f){m=b=a[h];f=false;}else if(a[h]<b){b=a[h];}else if(a[h]>m){m=a[h];}}return{usageMap:a,maxUsage:m,minUsage:b};};
R.prototype.addNewDay=function(){var a;for(var h in this.oAppsUsageData.recentAppsUsageMap){a=this.oAppsUsageData.recentAppsUsageMap[h];a[a.length]=0;if(a.length>R.MAX_DAYS){a=a.shift();}}};
R.prototype.cleanUnusedHashes=function(){var i;for(var h in this.oAppsUsageData.recentAppsUsageMap){i=this.getHashUsageSum(h);if(i===0){delete(this.oAppsUsageData.recentAppsUsageMap[h]);}}};
R.prototype.getHashUsageSum=function(h){var s=0;var d;var a=this.oAppsUsageData.recentAppsUsageMap[h];var l=a.length;for(d=0;d<l;d++){s+=a[d];}return s;};
R.prototype.saveAppsUsage=function(o){return this._save(o).fail(function(){L.error("Ushell-lib ; saveAppsUsage ; Save action failed");});};
R.prototype.getDayFromDateObj=function(d){return(d.getUTCFullYear()+"/"+(d.getUTCMonth()+1)+"/"+d.getUTCDate());};
return R;});
sap.ui.predefine('sap/ushell/services/_UserRecents/RecentsList',["./UserRecentsBase"],function(U){"use strict";
var R=U.extend("sap.ushell.services.RecentsList");
R.prototype._updateIfAlreadyIn=function(i,t){return this.aRecents.some(function(r){var f;if(this._compareItems(r.oItem,i)){r.oItem=i;r.iTimestamp=t;r.iCount=r.iCount+1;f=true;}else{f=false;}return f;}.bind(this));};
R.prototype._insertNew=function(i,t){var n={oItem:i,iTimestamp:t,iCount:1};if(this.aRecents.length===this.iMaxItems){this.aRecents.sort(U._itemSorter);this.aRecents.pop();}this.aRecents.push(n);};
R.prototype.clearAllActivities=function(){return this._save([]);};
R.prototype.newItem=function(i){var d=new jQuery.Deferred();var t=Date.now();var a;this._load().done(function(l){this.aRecents=l||[];a=this._updateIfAlreadyIn(i,t);if(!a){this._insertNew(i,t);}this._save(this.aRecents).done(function(){d.resolve();}).fail(function(){d.reject();});}.bind(this));return d.promise();};
R.prototype.getRecentItems=function(){var d=new jQuery.Deferred();this._load().done(function(l){l=l||[];l.sort(U._itemSorter);this.aRecents=l.slice(0,this.iMaxItems);d.resolve(jQuery.map(this.aRecents,function(r){return r.oItem;}));}.bind(this));return d.promise();};
return R;});
sap.ui.predefine('sap/ushell/services/_UserRecents/UserRecentsBase',["sap/ui/base/Object","sap/base/Log"],function(B,L){"use strict";var P="sap.ushell.services.UserRecents";
var U=B.extend("sap.ushell.services.UserRecentsBase",{constructor:function(p,m,c){this.aRecents=[];this.iMaxItems=m;this._oPersonalizerPromise=sap.ushell.Container.getServiceAsync("Personalization").then(function(a){return a.getPersonalizer({container:P,item:p});});this._compareItems=c;}});
U.prototype._load=function(){var d=new jQuery.Deferred();this._oPersonalizerPromise.then(function(p){p.getPersData().done(d.resolve).fail(d.reject);}).catch(function(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);d.reject(e);});return d.promise();};
U.prototype._save=function(l){var d=new jQuery.Deferred();this._oPersonalizerPromise.then(function(p){p.setPersData(l).done(d.resolve).fail(d.reject);}).catch(function(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);d.reject(e);});return d.promise();};
U._itemSorter=function(i,I){return I.iTimestamp-i.iTimestamp;};
return U;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstance',["sap/m/ActionSheet","sap/m/library","sap/ui/events/PseudoEvents","sap/ushell/library","sap/ui/core/Control","sap/m/GenericTile","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer","sap/ushell/resources","sap/m/VBox","sap/ui/core/Icon"],function(A,m,P,u,C,G,V,r,a,I){"use strict";var L=m.LoadState;var F=m.FrameType;var T=m.TileSizeBehavior;var D=u.DisplayFormat;
var b=C.extend("sap.ushell.ui.launchpad.VizInstance",{
metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",bindable:true},subtitle:{type:"string",defaultValue:"",bindable:true},height:{type:"int",defaultValue:2},width:{type:"int",defaultValue:2},info:{type:"string",defaultValue:"",bindable:true},icon:{type:"sap.ui.core.URI",defaultValue:"",bindable:true},numberUnit:{type:"string",defaultValue:"",bindable:true},state:{type:"sap.m.LoadState",defaultValue:L.Loaded,bindable:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",defaultValue:T.Responsive,bindable:true},editable:{type:"boolean",defaultValue:false,bindable:true},active:{type:"boolean",defaultValue:false},targetURL:{type:"string"},indicatorDataSource:{type:"object",defaultValue:undefined},dataSource:{type:"object",defaultValue:undefined},keywords:{type:"string[]",defaultValue:[]},instantiationData:{type:"object",defaultValue:{}},contentProviderId:{type:"string",defaultValue:""},vizConfig:{type:"object"},supportedDisplayFormats:{type:"string[]",defaultValue:[D.Standard]},dataHelpId:{type:"string",defaultValue:""},displayFormat:{type:"string",defaultValue:D.Standard},preview:{type:"boolean",defaultValue:false}},defaultAggregation:"tileActions",aggregations:{content:{type:"sap.ui.core.Control",multiple:false},tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}},events:{press:{parameters:{scope:{type:"sap.m.GenericTileScope"},action:{type:"string"}}}}},
renderer:V
});
b.prototype.init=function(){this._oContent=new G({frameType:this._formatPlaceholderFrameType(this.getDisplayFormat()),state:this.getState()});this.setAggregation("content",this._oContent);};
b.prototype.setDisplayFormat=function(d){this.setProperty("displayFormat",d);this._setSize();if(this._oContent.isA("sap.m.GenericTile")){this._oContent.setFrameType(this._formatPlaceholderFrameType(d));}return this;};
b.prototype.setState=function(s){this.setProperty("state",s);if(this._oContent.isA("sap.m.GenericTile")){this._oContent.setState(s);}return this;};
b.prototype._formatPlaceholderFrameType=function(d){this._setSize();switch(d){case D.Flat:return F.OneByHalf;case D.FlatWide:return F.TwoByHalf;case D.StandardWide:return F.TwoByOne;default:return F.OneByOne;}};
b.prototype.exit=function(){if(this._oActionModeButtonIconVBox){this._oActionModeButtonIconVBox.destroy();}if(this._oActionDivCenter){this._oActionDivCenter.destroy();}if(this._oActionSheet){this._oActionSheet.destroy();}if(this._oRemoveIconVBox){this._oRemoveIconVBox.destroy();}};
b.prototype.getLayout=function(){return{columns:this.getWidth(),rows:this.getHeight()};};
b.prototype._setContent=function(c){var g=this.getLayoutData();if(g&&g.isA("sap.f.GridContainerItemLayoutData")){g.setRows(this.getHeight());g.setColumns(this.getWidth());this.getParent().invalidate();}if(this.getDataHelpId()){c.data("help-id",this.getDataHelpId(),true);}this._oContent=c;this.invalidate();};
b.prototype._updateContent=function(){var c=this._oContent;if(this._oContent.getItems){this.setAggregation("content",c.getItems()[0]);}else{this.setAggregation("content",c);}};
b.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new A();}return this._oActionSheet;};
b.prototype._onActionMenuIconPressed=function(){if(this._oActionModeIcon){this._getTileActionSheet().openBy(this._oActionModeIcon);}};
b.prototype.getFocusDomRef=function(){if(this.getEditable()){return this._oActionModeIcon&&this._oActionModeIcon.getFocusDomRef();}var p=this._oContent.findAggregatedObjects(true,function(c){return c.isA("sap.m.GenericTile")||c.isA("sap.f.Card");});if(p.length){return p[0].getFocusDomRef();}return this._oContent.getFocusDomRef();};
b.prototype.onclick=function(e){if(this._preventDefault(e)){this.firePress({scope:"Display",action:"Press"});}else if(this._oRemoveIconVBox&&this._oRemoveIconVBox.getDomRef().contains(e.target)){this.firePress({scope:"Actions",action:"Remove"});}else{this._onActionMenuIconPressed();}};
b.prototype.onBeforeRendering=function(){this._updateContent();var d=this.getDomRef();if(d){d.removeEventListener("keyup",this._fnKeyupHandler);d.removeEventListener("touchend",this._fnTouchendHandler);}};
b.prototype.onAfterRendering=function(){var d=this.getDomRef();this._fnKeyupHandler=this.onkeyup.bind(this);this._fnTouchendHandler=this.onclick.bind(this);d.addEventListener("keyup",this._fnKeyupHandler,true);d.addEventListener("touchend",this._fnTouchendHandler,true);};
b.prototype.onkeyup=function(e){if(this.getEditable()){if((P.events.sapdelete.fnCheck(e)||P.events.sapbackspace.fnCheck(e))){this.firePress({scope:"Actions",action:"Remove"});}if(P.events.sapspace.fnCheck(e)||P.events.sapenter.fnCheck(e)){this._preventDefault(e);}}};
b.prototype._preventDefault=function(e){if(this.getEditable()){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return false;}return true;};
b.prototype.load=function(){return Promise.resolve();};
b.prototype._setSize=function(){var s={};switch(this.getDisplayFormat()){case D.Flat:s.width=2;s.height=1;break;case D.FlatWide:s.width=4;s.height=1;break;case D.StandardWide:s.width=4;s.height=2;break;default:s.width=2;s.height=2;break;}this.setWidth(s.width);this.setHeight(s.height);};
b.prototype.getAvailableDisplayFormats=function(){var c,s=this.getSupportedDisplayFormats(),d=this.getDisplayFormat();c=s.filter(function(f){return f!==d;});var i=c.indexOf("compact");var t=this.getTitle();var e=this.getTargetURL();if(i>-1&&(!t||!e)){c.splice(i,1);}return c;};
b.prototype._getRemoveIconVBox=function(){if(!this._oRemoveIconVBox){var M=sap.ui.getCore().getLibraryResourceBundle("sap.m");var R=new I({id:this.getId()+"-action-remove",alt:M.getText("GENERICTILE_ACTIONS_ARIA_TEXT"),decorative:false,noTabStop:true,src:"sap-icon://decline",tooltip:r.i18n.getText("removeButtonTitle")}).addStyleClass("sapUshellTileDeleteIconInnerClass sapMPointer");this._oRemoveIconVBox=new a({items:[R]}).addStyleClass("sapUshellTileDeleteIconOuterClass sapUshellTileDeleteClickArea sapMPointer");this._oRemoveIconVBox.setParent(this);}return this._oRemoveIconVBox;};
b.prototype._getActionDivCenter=function(){if(!this._oActionDivCenter){this._oActionDivCenter=new a().addStyleClass("sapUshellTileActionDivCenter");this._oActionDivCenter.attachBrowserEvent("click",this._onActionMenuIconPressed,this);this._oActionDivCenter.setParent(this);}return this._oActionDivCenter;};
b.prototype._getActionModeButtonIconVBox=function(){if(!this._oActionModeButtonIconVBox){var M=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._oActionModeIcon=new I({id:this.getId()+"-action-more",decorative:false,alt:M.getText("LIST_ITEM_NAVIGATION"),noTabStop:true,press:[this._onActionMenuIconPressed,this],src:"sap-icon://overflow",tooltip:r.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner sapMPointer");this._oActionModeButtonIconVBox=new a({items:[this._oActionModeIcon]}).addStyleClass("sapUshellTileActionIconDivBottom sapMPointer");this._oActionModeButtonIconVBox.setParent(this);}return this._oActionModeButtonIconVBox;};
return b;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstanceAbap',["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/base/Log","sap/ushell/library","sap/ushell/utils/chipsUtils","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(V,m,L,u,c,a){"use strict";var b=m.LoadState;var D=u.DisplayFormat;
var d=V.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{
metadata:{library:"sap.ushell"},
renderer:a
});
d.prototype.init=function(){V.prototype.init.apply(this,arguments);this._oChipInstancePromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(p){var f=p.getFactory();var i=this.getInstantiationData();var r;var B;if(!i.simplifiedChipFormat){r={chipId:i.chip.id,chip:i.chip};}else{var s=i.chip||{};B=s.bags;r={chipId:s.chipId,configuration:s.configuration?JSON.stringify(s.configuration):"{}"};}var C=f.createChipInstance(r);c.addBagDataToChipInstance(C,B);return C;}.bind(this));};
d.prototype.load=function(i){return this._oChipInstancePromise.then(function(r){this._oChipInstance=r;return new Promise(this._oChipInstance.load);}.bind(this)).then(function(){if(this.getPreview()){var p=this._oChipInstance.getContract("preview");if(p){p.setEnabled(true);}}var v=this._oChipInstance.getImplementationAsSapui5();this._setChipInstanceType();this._setContent(v);return Promise.resolve();}.bind(this)).catch(function(e){this.setState(b.Failed);return Promise.reject(e);}.bind(this));};
d.prototype._setChipInstanceType=function(){var t=this._oChipInstance.getContract("types");if(t){t.setType(this._mapDisplayFormatToChip(this.getDisplayFormat()));}};
d.prototype._mapDisplayFormatToChip=function(s){var o={};o[D.Standard]="tile";o[D.StandardWide]="tile";o[D.Compact]="link";o[D.Flat]="flat";o[D.FlatWide]="flatwide";return o[s];};
d.prototype._setVisible=function(v){var o=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(o){o.setVisible(v);}};
d.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh();}};
d.prototype.setActive=function(e,r){this._setVisible(e);if(r){this.refresh();}return this.setProperty("active",e,false);};
return d;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstanceCdm',["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library","sap/ui/core/Component","sap/base/util/ObjectPath","sap/base/util/deepExtend","sap/ui/core/ComponentContainer","sap/ushell/library","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(V,m,C,O,d,a,u,b){"use strict";var L=m.LoadState;
var c=V.extend("sap.ushell.ui.launchpad.VizInstanceCdm",{
metadata:{library:"sap.ushell"},
renderer:b
});
c.prototype.load=function(i){var o;if(i===true){o=this._loadCustomVizType();}else{o=this._loadStandardVizType();}return o.then(function(e){this._oComponent=e;var f=new a({component:e});e.setParent(this);this._setContent(f);this._setComponentTileVisible(this.getActive());}.bind(this)).catch(function(e){this.setState(L.Failed);return Promise.reject(e);}.bind(this));};
c.prototype._loadStandardVizType=function(){var o=this._getComponentConfiguration();return C.create(o);};
c.prototype._loadCustomVizType=function(){var A=this._getCustomComponentConfiguration();var p={};var w=[];return sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(o){var U=o.createComponent(A,p,w,u.UI5ComponentType.Visualization);return new Promise(function(r,e){U.done(function(f){r(f);});});}).then(function(U){if(U&&U.componentHandle&&U.componentHandle.getInstance){return U.componentHandle.getInstance();}throw new Error("Create component failed: no instance found in the component handle.");});};
c.prototype._getComponentConfiguration=function(){var v=this.getInstantiationData().vizType;var o=this.getVizConfig();var e=O.get(["sap.platform.runtime","componentProperties"],v);e=d({},this._getComponentProperties(),e);var f={name:v["sap.ui5"].componentName,componentData:{properties:e},url:O.get(["sap.platform.runtime","componentProperties","url"],v),manifest:O.get(["sap.platform.runtime","componentProperties","manifest"],v),asyncHints:O.get(["sap.platform.runtime","componentProperties","asyncHints"],v)};var i=O.get(["sap.platform.runtime","includeManifest"],v);var I=O.get(["sap.platform.runtime","includeManifest"],o);if(i||I){f.manifest=d({},v,o);}if(typeof f.manifest==="object"){e.manifest=f.manifest;}return f;};
c.prototype._getCustomComponentConfiguration=function(){var o=this._getComponentConfiguration();var A={loadCoreExt:true,loadDefaultDependencies:false,componentData:o.componentData,url:o.url,applicationConfiguration:{},reservedParameters:{},applicationDependencies:o,ui5ComponentName:o.name};return A;};
c.prototype._getComponentProperties=function(){return{title:this.getTitle(),subtitle:this.getSubtitle(),icon:this.getIcon(),info:this.getInfo(),indicatorDataSource:this.getIndicatorDataSource(),dataSource:this.getDataSource(),contentProviderId:this.getContentProviderId(),targetURL:this.getTargetURL(),displayFormat:this.getDisplayFormat(),numberUnit:this.getNumberUnit()};};
c.prototype._setComponentTileVisible=function(v){if(this._oComponent&&typeof this._oComponent.tileSetVisible==="function"){this._oComponent.tileSetVisible(v);}};
c.prototype.setActive=function(e,r){this._setComponentTileVisible(e);if(r){this.refresh();}return this.setProperty("active",e,false);};
c.prototype.refresh=function(){if(this._oComponent&&typeof this._oComponent.tileRefresh==="function"){this._oComponent.tileRefresh();}};
return c;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstanceLaunchPage',["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ushell/library","sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer"],function(V,u,a){"use strict";var D=u.DisplayFormat;
var b=V.extend("sap.ushell.ui.launchpad.VizInstanceLaunchPage",{
metadata:{library:"sap.ushell"},
renderer:a
});
b.prototype.load=function(){var t=this.getInstantiationData().launchPageTile;return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){return new Promise(function(r,c){l.getCatalogTileViewControl(t).done(r).fail(function(){l.getTileView(t).done(r).fail(c);});}).then(function(T){this._setDisplayFormatFromTileSize(t,l);this._setContent(T);}.bind(this));}.bind(this));};
b.prototype._setDisplayFormatFromTileSize=function(t,l){var T=l.getTileSize(t);if(T==="1x2"){this.setDisplayFormat(D.StandardWide);}else{this.setDisplayFormat(D.Standard);}};
return b;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstanceLink',["sap/m/library","sap/ushell/library","sap/m/GenericTile","sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/ui/thirdparty/hasher","sap/ushell/Config","sap/ushell/utils/WindowUtils","sap/m/ActionSheet"],function(m,u,G,V,h,C,W,A){"use strict";var a=m.GenericTileMode;var b=m.GenericTileScope;var D=u.DisplayFormat;var c=u.AppType;
var d=G.extend("sap.ushell.ui.launchpad.VizInstanceLink",{
metadata:{library:"sap.ushell",properties:{title:{type:"string",defaultValue:"",group:"Appearance",bindable:true},subtitle:{type:"string",defaultValue:"",group:"Appearance",bindable:true},editable:{type:"boolean",defaultValue:false,group:"Behavior",bindable:true},active:{type:"boolean",group:"Misc",defaultValue:false},targetURL:{type:"string",group:"Misc"},mode:{type:"sap.m.GenericTileMode",group:"Appearance",defaultValue:a.LineMode},displayFormat:{type:"string",defaultValue:D.Compact},supportedDisplayFormats:{type:"string[]",defaultValue:[D.Compact]},dataHelpId:{type:"string",defaultValue:""}},defaultAggregation:"tileActions",aggregations:{tileActions:{type:"sap.m.Button",forwarding:{getter:"_getTileActionSheet",aggregation:"buttons"}}}},
renderer:G.getMetadata().getRenderer()
});
d.prototype.init=function(){G.prototype.init.apply(this,arguments);this.attachPress(this._handlePress,this);};
d.prototype.exit=function(){if(this._oActionSheet){this._oActionSheet.destroy();}};
d.prototype._getTileActionSheet=function(){if(!this._oActionSheet){this._oActionSheet=new A();}return this._oActionSheet;};
d.prototype._handlePress=function(){if(this.getEditable()){this._getTileActionSheet().openBy(this);return;}var t=this.getTargetURL();if(!t){return;}if(t[0]==="#"){h.setHash(t);}else{var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:this.getTitle(),appType:c.URL,url:this.getTargetURL(),appId:this.getTargetURL()};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(t,"_blank");}};
d.prototype.load=V.prototype.load;
d.prototype.setDataHelpId=function(v){this.data("help-id",v,true);return this.setProperty("dataHelpId",v);};
d.prototype.setTitle=function(v){this.setHeader(v);return this.setProperty("title",v);};
d.prototype.setSubtitle=function(v){this.setSubheader(v);return this.setProperty("subtitle",v);};
d.prototype.setTargetURL=function(v){this.setUrl(v);return this.setProperty("targetURL",v);};
d.prototype.setProperty=function(p,v,s){if(p==="title"){this.setProperty("header",v,s);}if(p==="subtitle"){this.setProperty("subheader",v,s);}if(p==="targetURL"){this.setProperty("url",v,s);}if(p==="editable"){if(v){this.setProperty("scope",b.Actions,s);}else{this.setProperty("scope",b.Display,s);}}return G.prototype.setProperty.apply(this,arguments);};
d.prototype.getAvailableDisplayFormats=V.prototype.getAvailableDisplayFormats;return d;});
sap.ui.predefine('sap/ushell/services/_VisualizationInstantiation/VizInstanceRenderer',[],function(){"use strict";var V={apiVersion:2};
V.render=function(r,v){var c=this._prepareControlsToBeRendered(v);r.openStart("div",v);r.openEnd();c.forEach(function(C){r.renderControl(C);});r.close("div");};
V._prepareControlsToBeRendered=function(v){var c=[v.getAggregation("content")];if(v.getEditable()){var t=v.getTileActions();var r=v._getRemoveIconVBox();c.unshift(r);if(t.length>0){var a=v._getActionDivCenter();var A=v._getActionModeButtonIconVBox();c.push(a);c.push(A);}}return c;};
return V;});
sap.ui.predefine('sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin',["sap/ui/core/support/Plugin","sap/ui/model/json/JSONModel","sap/m/Button","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/Label","sap/m/Text","sap/m/MessageStrip","sap/m/FlexBox","sap/ui/model/resource/ResourceModel","sap/m/SearchField","sap/m/MessageBox","sap/base/util/isEmptyObject"],function(P,J,B,I,a,L,T,M,F,R,S,b,c){"use strict";var t=this,o,f=P.extend("sap.ushell.support.plugins.flpConfig.FlpConfigurationPlugin",{constructor:function(s){o=new R({bundleName:"sap/ushell/support/plugins/flpConfig/i18n/FlpConfigurationPlugin"});P.apply(this,["sapUiFlpConfigurationPlugin",o.getResourceBundle().getText("PLUGIN_NAME"),s]);this._oSupportStub=s;if(this.runsAsToolPlugin()){t=this;this._aEventIds=[this.getId()+"ReceiveData"];}else{this._aEventIds=[this.getId()+"RequestData"];}}});
f.prototype.isToolPlugin=function(){return true;};
f.prototype.isAppPlugin=function(){return true;};
f.prototype.init=function(s){P.prototype.init.apply(this,arguments);if(this.runsAsToolPlugin()){var r;setTimeout(function(){t.requestData();},500);r=sap.ui.getCore().createRenderManager();r.write("<div id='"+this.getId()+"'</div>").flush(this.$().get(0));r.destroy();}else{}};
f.prototype.exit=function(){P.prototype.exit.apply(this,arguments);};
f.prototype.requestData=function(){this._oSupportStub.sendEvent(this.getId()+"RequestData",{eventData:{data:{}}});};
f.prototype.onsapUiFlpConfigurationPluginRequestData=function(E){var i={};this.prepareForSending(window["sap-ushell-config"],i);this._oSupportStub.sendEvent(this.getId()+"ReceiveData",{eventData:{data:i}});};
f.prototype.onsapUiFlpConfigurationPluginReceiveData=function(E){var t=this;this.flpConfig=E.getParameter("eventData").data;sap.ui.getCore().loadLibraries(["sap.ui.table"],{async:true}).then(function(){sap.ui.require(["sap/ui/table/TreeTable","sap/ui/table/Column","sap/ui/table/library"],function(i,C,j){var k=j.SelectionMode;t.getFlpConfigurationPluginUI(null,i,C,k);});});};
function _(){var H=0,s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey(),i=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();if(Array.isArray(i[s])){i[s].forEach(function(j,k){var q=e(i[s][k],s);if(H<q){H=q;}});if(H>0){sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).expandToLevel(H-1);}else{b.error(new L({text:sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("i18n").getResourceBundle().getText("MISSING_HIERARCHY_LEVEL")}));}}}
function d(){var s=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getSelectedKey();sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+s).collapseAll();}
f.prototype.onPressSearchNewModel=function(E){var q,r,s,A,u,v,w,x,V,y=[],z={},C="",D={},G={},H=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel("Full"),K=E.getParameter("query");if(!H){H=sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").getModel().getData();}else{H=H.getData();}Object.keys(H).forEach(function(N){z[N]=0;});if(K){for(var N in H){C=N;q=[];n(H[N],N,C,q,K);G[N]=q;}Object.keys(G).forEach(function(N){A=G[N];for(var i=0;i<A.length;i++){u=A[i].split(".");v=[];for(var j=0;j<u.length;j++){if(!isNaN(parseInt(u[j],10))){v.push(parseInt(u[j],10));}else{v.push(u[j]);}}for(var k=0;k<v.length;k+=2){w={"property":""};w[v[0]]=[];if(isNaN(parseInt(v[k],10))){r=v.slice(0,k+1);if(!g(D,r)&&typeof g(D,v.slice(0,v.length-2))!=="object"){m(D,r,[w],v[0],r.length);}V=g(H,v.slice(0,k+2));if(V&&g(D,v.slice(0,k+2))){l(D,V.property,v.slice(0,k+2).toString()+",property");}else if(k!==v.length-2){y.push(v.slice(0,k+2).toString());}}}s=v.slice(0);m(D,v,{"property":"","value":""},v[0],r.length);V=g(H,s);if(V){l(D,V.value,s.toString()+",value");l(D,V.property,s.toString()+",property");}}y.forEach(function(C){V=g(H,C.split(","));if(V&&g(D,C.split(","))){l(D,V.property,C+",property");}});y=[];if(D[N]&&Array.isArray(D[N][0][N])&&D[N][0][N].length===0){D[N]=D[N].splice(1);}});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(D));sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(H),"Full");var O=0;Object.keys(z).forEach(function(N){x=N;if(D[x]&&Array.isArray(D[x])){D[x].forEach(function(i,j){var k=e(D[x][j],x);if(O<k){O=k;}});}sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TreeTable"+N).expandToLevel(O-1);sap.ui.getCore().byId(N).setCount(h(D[N],N,0));});}else{Object.keys(z).forEach(function(N){sap.ui.getCore().byId(N).setCount(h(H[N],N,0));});sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar").setModel(new J(H));}};
function e(C,s){var H=0;if(C[s]){C[s].forEach(function(i){var j=e(i,s);if(j>H){H=j;}});}return H+1;}
function g(j,k){for(var i=0;i<k.length;i++){if(j){j=j[k[i]];}}return j;}
function h(C,s,i){if(Array.isArray(C)){C.forEach(function(j){if(j[s]){i=h(j[s],s,i);}else{i+=1;}});return i;}return undefined;}
function l(j,v,s){var k=s.split(",");for(var i=0;i<k.length-1;i++){j=j[k[i]];}j[k[k.length-1]]=v;}
function m(i,j,v,s,k){if(j.length===1){i[j[0]]=v;}else{var q=j.shift();i[q]=m(typeof i[q]==="undefined"?{}:i[q],j,v,s,k);}if(i[s]&&i.property&&i.value){delete i.value;i.property="";}return i;}
function n(C,s,i,j,k){C.forEach(function(q,r){if(q[s]){i=i+"."+r+"."+s;i=n(q[s],s,i,j,k);}else if(q.property.indexOf(k)>-1){i=i+"."+r;j.push(i);i=i.substring(0,i.lastIndexOf("."));}});i=i.substring(0,i.lastIndexOf("."));if(isNaN(parseInt(i.substr(i.lastIndexOf(".")+1),10))){return i;}return i.substring(0,i.lastIndexOf("."));}
function p(C,s){if(typeof C!=="object"){return[{property:s,value:C}];}return Object.keys(C).map(function(i){var r={property:i};if(typeof(C[i])==="object"&&Object.keys(C[i]).length!==0){r[s]=p(C[i],s);return r;}if(!c(C[i])||typeof(C[i])!=="object"){r.value=C[i];}else{r.value="";}return r;});}
f.prototype.prepareForSending=function(i,j){Object.keys(i).forEach(function(k){var C=i[k];switch(typeof C){case"object":if(C===null){j[k]=C;return;}else if(Array.isArray(C)){j[k]=[];}else{j[k]={};}this.prepareForSending(i[k],j[k]);break;case"undefined":j[k]="undefined";return;case"function":return;default:j[k]=i[k];return;}}.bind(this));};
f.prototype.getNewConfigJSON=function(i){var N={};Object.keys(i).forEach(function(s){N[s]=p(i[s],s);});return N;};
f.prototype.getFlpConfigurationPluginUI=function(i,j,C,k){var q,r,s,u={};s=this.getNewConfigJSON(this.flpConfig);q=new J(s);for(var v in s){u[v]=h(s[v],v,0);}if(!sap.ui.getCore().byId("sap-ui-support-flpConfigurationPlugin-TabBar")){if(!s||c(s)){new M({text:o.getResourceBundle().getText("ERROR_MESSAGE"),type:"Warning",showIcon:true,showCloseButton:false}).placeAt(this.getId());}else{r=new I("sap-ui-support-flpConfigurationPlugin-TabBar",{headerMode:"Inline"});Object.keys(this.flpConfig).forEach(function(x,y){r.insertItem(new a(x,{key:x,text:x,count:u[x],content:[new j("sap-ui-support-flpConfigurationPlugin-TreeTable"+x,{rows:"{/"+x+"/}",selectionMode:k.None,enableCellFilter:true,extension:[new F({items:[new B({icon:"sap-icon://expand",text:"{i18n>EXPAND_BUTTON}",press:_}),new B({icon:"sap-icon://collapse",text:"{i18n>COLLAPSE_BUTTON}",press:d})]})],columns:[new C({label:new L({text:"{i18n>COLUMN_PROPERTY}"}),template:new T({text:"{property}"})}),new C({label:new L({text:"{i18n>COLUMN_VALUE}"}),template:new T({text:"{value}"})})]})]}),y);});var w=new S({search:this.onPressSearchNewModel});w.placeAt(this.getId());r.setModel(q);r.setModel(o,"i18n");r.placeAt(this.getId());}}};
return f;});
sap.ui.predefine('sap/ushell/ui/AppContainer',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/Device","sap/base/Log","sap/ushell/renderers/fiori2/AccessKeysHandler","./AppContainerRenderer"],function(q,C,D,L,A){"use strict";
var a=C.extend("sap.ushell.ui.AppContainer",{metadata:{library:"sap.ushell",properties:{visible:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{pages:{type:"sap.ui.core.Control",multiple:true,singularName:"pages"}},events:{beforeNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}},afterNavigate:{parameters:{fromId:{type:"string"},from:{type:"sap.ui.core.Control"},toId:{type:"string"},to:{type:"sap.ui.core.Control"}}}}}});
a.prototype.addPages=function(c){if(this.getPages().indexOf(c)>-1){return;}if(c.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){c.toggleStyleClass("sapUShellApplicationContainerIframeHidden",true);}else{c.toggleStyleClass("hidden",true);}this.addAggregation("pages",c,true);var r,d=this.getDomRef();if(d){r=sap.ui.getCore().createRenderManager();r.render(c,d);r.destroy();}};
a.prototype.addCenterViewPort=a.prototype.addPages;
a.prototype.removeCenterViewPort=function(i){this.removeAggregation("pages",i,true);};
a.prototype.getCurrentCenterPage=function(){return this.getPages().reduce(function(c,p){if(p&&p.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){return(!p.hasStyleClass("sapUShellApplicationContainerIframeHidden"))?p.getId():c;}else{return(p&&!p.hasStyleClass("hidden"))?p.getId():c;}},null);};
a.prototype.navTo=function(v,p){var t=sap.ui.getCore().byId(p),c=this.getCurrentCenterPage(),o=sap.ui.getCore().byId(c)||null,h=sap.ushell.Container.getRenderer("fiori2").byId("Shell-home-component-container"),H=h&&h.getId(),N=c&&(H===c),b=H===p;if(v!=="centerViewPort"){L.error("Navigation to "+v+" is not allowed in Fiori3");return;}if(this.getPages().indexOf(t)===-1){L.error("AppContainer: invalid navigation target");return;}if(D.system.desktop&&N){this._saveFocus();}if(c!==p){this.fireBeforeNavigate({toId:p,to:t,fromId:c,from:o});}this.getPages().forEach(function(P){if(P){if(P.hasStyleClass("sapUShellApplicationContainerShiftedIframe")){P.toggleStyleClass("sapUShellApplicationContainerIframeHidden",P.getId()!==p);}else{P.toggleStyleClass("hidden",P.getId()!==p);}}});if(D.system.desktop&&b){this._restoreFocus();}if(c!==p){this.fireAfterNavigate({toId:p,to:t,fromId:c,from:o});}};
a.prototype._restoreFocus=function(){var c;if(this.sLastFocusId){A.registerAppKeysHandler(this.fnLastAppKeyHandler);c=sap.ui.getCore().byId(this.sLastFocusId);if(c){c.focus();}}};
a.prototype._saveFocus=function(){var o=q(document.activeElement).control(0);this.sLastFocusId=o?o.getId():null;this.fnLastAppKeyHandler=A.getAppKeysHandler();};
a.prototype.getViewPortControl=function(v,c){return this.getPages().reduce(function(o,p){return(v==="centerViewPort"&&p&&p.getId()===c)?p:o;},null);};
var n=function(){};a.prototype.switchState=n;a.prototype._handleSizeChange=n;a.prototype.shiftCenterTransitionEnabled=n;a.prototype.shiftCenterTransition=n;a.prototype.addLeftViewPort=n;a.prototype.addRightViewPort=n;a.prototype.attachAfterSwitchState=n;a.prototype.detachAfterSwitchState=n;a.prototype.attachAfterSwitchStateAnimationFinished=n;a.prototype.detachAfterSwitchStateAnimationFinished=n;
a.prototype.getCurrentState=function(){return"Center";};
return a;});
sap.ui.predefine('sap/ushell/ui/AppContainerRenderer',[],function(){"use strict";var A={};
A.render=function(r,c){if(!c.getVisible()){return;}r.write("<div");r.writeControlData(c);r.write(">");c.getPages().forEach(function(p){r.renderControl(p);});r.write("</div>");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/ContentNodeSelector',["sap/ushell/library","sap/base/util/deepClone","sap/ui/core/XMLComposite","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/ui/Device","sap/m/Token","sap/ushell/resources","sap/ushell/Config"],function(l,d,X,J,F,a,b,D,T,r,C){"use strict";var c=l.ContentNodeType;
var e=X.extend("sap.ushell.ui.ContentNodeSelector",{metadata:{library:"sap.ushell",associations:{labelId:{type:"sap.ui.core.Control",multiple:false}},events:{selectionChanged:{}}}});
e.prototype.init=function(){this._oModel=new J({items:[],suggestions:[],isSpaces:C.last("/core/spaces/enabled")});this._oDeviceModel=new J(D);this.setModel(this._oModel,"_internal");this.setModel(this._oDeviceModel,"_device");this.setModel(r.getTranslationModel(),"_i18n");var m=this.getAggregation("_content");m.addValidator(this._validateItem.bind(this));this.setBusyIndicatorDelay(0);this._loadContentNodes().then(this._overwriteLabel.bind(this));};
e.prototype._overwriteLabel=function(){var L=this.getLabelId();var o=sap.ui.getCore().byId(L);if(o&&typeof o.setText==="function"){if(this._oModel.getProperty("/isSpaces")){o.setText(r.i18n.getText("contentNodeSelectorHomepagePages"));}else{o.setText(r.i18n.getText("contentNodeSelectorHomepageGroups"));}}if(o&&typeof o.setRequired==="function"&&o.isPropertyInitial("required")){o.setRequired(true);}if(o&&typeof o.setLabelFor==="function"){o.setLabelFor(this);}};
e.prototype.exit=function(){this._oModel.destroy();this._oDeviceModel.destroy();};
e.prototype.getSelectedContentNodes=function(){var m=this.getAggregation("_content");var t=m.getTokens();return t.map(function(o){var f=o.getBindingContext("_internal").getObject();var g=d(f);delete g.selected;delete g.spaceTitles;return g;});};
e.prototype._loadContentNodes=function(){this.setBusy(true);return sap.ushell.Container.getServiceAsync("Bookmark").then(function(B){return B.getContentNodes();}).then(function(f){f=d(f);e._normalizeContentNodes(f);this._oModel.setProperty("/items",f);var s=e._getSuggestions(f);for(var i=0;i<s.length;i++){s[i].selected=false;}this._oModel.setProperty("/suggestions",s);this.setBusy(false);}.bind(this));};
e.prototype._showValueHelp=function(f){var m=f.getSource();var t=m.getValue();if(!this._oValueHelpDialog){b.load({id:this.getId()+"-ValueHelpDialog",name:"sap.ushell.ui.ContentNodeSelectorValueHelp",controller:this}).then(function(o){this.addDependent(o);this._oValueHelpDialog=o;this._openValueHelpDialog(t);}.bind(this));}else{this._openValueHelpDialog(t);}};
e.prototype._openValueHelpDialog=function(f){var t=b.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");t.expandToLevel(1);this._oValueHelpDialog.open();var s=b.byId(this.getId()+"-ValueHelpDialog","ContentNodesSearch");s.setValue(f);this._onValueHelpSearch();};
e.prototype._onValueHelpSearch=function(){var s=b.byId(this.getId()+"-ValueHelpDialog","ContentNodesSearch");var f=s.getValue();var t=b.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");var i=t.getBinding("items");i.filter(new F({path:"label",operator:a.Contains,value1:f}));};
e.prototype._onValueHelpBeginButtonPressed=function(){var t=b.byId(this.getId()+"-ValueHelpDialog","ContentNodesTree");var s=t.getSelectedContextPaths();var m=this.getAggregation("_content");m.destroyTokens();var o;var p;for(var i=0;i<s.length;i++){p=s[i];var M=this.getModel("_internal");var f=m.getAggregation("tokens").map(function(I){return I.getProperty("key");}).indexOf(M.getProperty(p).id);if(f<0){o=this._createToken(p);m.addValidateToken({token:o});}}m.setValue("");this._oValueHelpDialog.close();};
e.prototype._onValueHelpEndButtonPressed=function(){this._oValueHelpDialog.close();};
e.prototype._onTokenUpdate=function(f){var A=f.getParameter("addedTokens");var R=f.getParameter("removedTokens");this._setTokensSelected(A,true);this._setTokensSelected(R,false);setTimeout(this.fireSelectionChanged.bind(this),0);};
e.prototype._setTokensSelected=function(t,s){var o;for(var i=0;i<t.length;i++){o=t[i].getBindingContext("_internal");o.getModel().setProperty(o.getPath("selected"),s);}};
e.prototype._validateItem=function(i){if(i.suggestedToken){return i.suggestedToken;}var I=i.suggestionObject;if(!I){return null;}var o=I.getBindingContext("_internal");return this._createToken(o.getPath());};
e.prototype._createToken=function(p){var t=new T({key:"{_internal>id}",text:"{_internal>label}"});t.bindObject({path:p,model:"_internal"});return t;};
e._getSuggestions=function(i){var s=[];e._getChildren(i,s);return s;};
e._getChildren=function(f,g){var I;for(var i=0;i<f.length;i++){I=f[i];if(I.isContainer&&g.indexOf(I)===-1){g.push(I);}if(I.children){e._getChildren(I.children,g);}}};
e._normalizeContentNodes=function(f){var p={};e._visitPages(f,function(s,P){P.spaceTitles=P.spaceTitles||[];if(p[P.id]){p[P.id].spaceTitles.push(s.label);return p[P.id];}P.spaceTitles.push(s.label);p[P.id]=P;return P;});};
e._visitPages=function(f,g){var o,p;if(f===undefined||f===null){return;}for(var i=0;i<f.length;i++){o=f[i];if(o.type!==c.Space){return;}else if(o.children){for(var k=0;k<o.children.length;k++){p=o.children[k];o.children[k]=g(o,p);}}}};
e.prototype.clearSelection=function(){var m=this.getAggregation("_content");var t=m.getTokens();t.forEach(function(o){var f=o.getBindingContext("_internal");this._oModel.setProperty(f.getPath("selected"),false);}.bind(this));m.destroyTokens();};
e.prototype.setValueState=function(v){var m=this.getAggregation("_content");m.setValueState(v);};
e.prototype.setValueStateText=function(v){var m=this.getAggregation("_content");m.setValueStateText(v);};
return e;});
sap.ui.predefine('sap/ushell/ui/ContentNodeTreeItem',["sap/m/StandardTreeItem"],function(S){"use strict";
var C=S.extend("sap.ushell.ui.bookmark.ContentNodeTreeItem",{
metadata:{library:"sap.ushell",properties:{selectable:{type:"boolean",defaultValue:true,group:"Behavior"}}},
renderer:S.getMetadata().getRenderer()
});
C.prototype.setSelected=function(s){this._bSelected=s;return S.prototype.setSelected.apply(this,arguments);};
C.prototype.setSelectable=function(s){this.setProperty("selectable",s,false);if(s){S.prototype.setSelected.call(this,this._bSelected);}return this;};
C.prototype.isSelectable=function(){return this.getSelectable();};
C.prototype.getModeControl=function(){if(!this.getSelectable()){return null;}return S.prototype.getModeControl.apply(this,arguments);};
return C;});
sap.ui.predefine('sap/ushell/ui/CustomGroupHeaderListItem',["sap/m/GroupHeaderListItem","sap/m/Text"],function(G,T){"use strict";
var C=G.extend("sap.ushell.ui.CustomGroupHeaderListItem",{metadata:{library:"sap.ushell",properties:{description:{type:"string",group:"Data",defaultValue:null}},aggregations:{_titleText:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_descriptionText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}}}});
C.prototype.setTitle=function(t){this.setProperty("title",t);var o=this.getAggregation("_titleText");if(o){o.setText(t);}else{this.setAggregation("_titleText",new T({text:t}),true);}};
C.prototype.setDescription=function(d){this.setProperty("description",d);var D=this.getAggregation("_descriptionText");if(D){D.setText(d);}else{this.setAggregation("_descriptionText",new T({text:d}),true);}};
C.prototype.getContentAnnouncement=function(){return this.getTitle()+", "+this.getDescription();};
C.prototype.setCount=function(){return this;};
return C;});
sap.ui.predefine('sap/ushell/ui/CustomGroupHeaderListItemRenderer',["sap/ui/core/library","sap/ui/core/Renderer","sap/m/GroupHeaderListItemRenderer","sap/ushell/library"],function(c,R,G,u){"use strict";var T=c.TextDirection;var C=R.extend(G);
C.renderLIAttributes=function(r,l){G.renderLIAttributes(r,l);r.addClass("sapUshellCGHLIContent");};
C.renderLIContent=function(r,l){var t=l.getTitleTextDirection();r.write("<span");r.writeAttributeEscaped("class","sapMGHLITitle");if(t!==T.Inherit){r.writeAttribute("dir",t.toLowerCase());}r.write(">");r.renderControl(l.getAggregation("_titleText"));if(l.getDescription()){r.write("</br>");r.write("<span class='sapUshellCGHLIDescription'>");r.renderControl(l.getAggregation("_descriptionText"));r.write("</span>");}r.write("</span>");};
return C;});
sap.ui.predefine('sap/ushell/ui/QuickAccess',["sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/library","sap/ushell/Config","sap/ushell/resources","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/components/ComponentKeysHandler","sap/ushell/utils/AppType"],function(F,J,u,C,r,a,W,b,A){"use strict";var c=u.AppType;var q={oModel:new J({recentActivities:[],frequentActivities:[]}),_createQuickAccessDialog:function(f){return F.load({name:"sap.ushell.ui.QuickAccess",type:"XML",controller:this}).then(function(o){this.oQuickAccessDialog=o;this.oQuickAccessDialog.setModel(this.oModel);this.oQuickAccessDialog.attachAfterClose(function(){this.oQuickAccessDialog.destroy();var d=sap.ui.getCore().byId(f);if(d){d.focus();}else{b.getInstance().then(function(e){e.goToTileContainer();});}}.bind(this));sap.ui.getCore().byId("shell").addDependent(this.oQuickAccessDialog);return this.oQuickAccessDialog;}.bind(this));},_updateQuickAccessDialog:function(d){var i=d.getContent()[0];i.setBusy(true);return sap.ushell.Container.getServiceAsync("UserRecents").then(function(U){return Promise.all([new Promise(function(e){U.getRecentActivity().then(function(f){e(f.map(function(o){o.timestamp=a.formatDate(o.timestamp);return o;}));},function(){e([]);});}),new Promise(function(e){U.getFrequentActivity().then(function(f){e(f);},function(){e([]);});})]);}).then(function(R){var e=R[0];var f=R[1];this.oModel.setData({recentActivities:e,frequentActivities:f});this._setDialogContentHeight(d,Math.max(e.length,f.length));i.setBusy(false);}.bind(this));},_setDialogContentHeight:function(d,i){var h=(i+0.5)*4+2.75;if(h<18){h=18;}else if(h>42){h=42;}d.setContentHeight(h+"rem");},_closeDialog:function(){this.oQuickAccessDialog.close();},_titleFormatter:function(t,s){if(s===c.SEARCH){t="\""+t+"\"";}return t;},_descriptionFormatter:function(s){if(s===c.SEARCH){return r.i18n.getText("recentActivitiesSearchDescription");}return A.getDisplayName(s);},_itemPress:function(e){var p=e.getParameter("listItem").getBindingContextPath();var i=this.oModel.getProperty(p);if(i.url[0]==="#"){window.hasher.setHash(i.url);this._closeDialog();}else{var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var R={title:i.title,appType:c.URL,url:i.url,appId:i.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(R);}W.openURL(i.url,"_blank");}}};return{openQuickAccessDialog:function(f,s){return q._createQuickAccessDialog(s).then(function(d){var i=d.getContent()[0];q._updateQuickAccessDialog(d);i.setSelectedKey(f);d.open();});},_getQuickAccess:function(){return q;}};});
sap.ui.predefine('sap/ushell/ui/ShellHeader',["sap/ui/core/Control","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ui/dom/units/Rem","sap/base/Log","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/ui/horizon/NewDesignSwitch","sap/ushell/library","sap/ushell/ui/shell/ShellAppTitle","sap/ushell/ui/ShellHeaderRenderer","sap/ushell/utils","sap/ushell/utils/WindowUtils"],function(C,T,D,R,L,E,a,N,u,S,b,c,W){"use strict";var s="sapUshellShellShowSearchOverlay";var _=0;var d;var f="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";var g=sap.ui.require.toUrl("sap/ushell")+"/themes/base/img/SAPLogo.svg";
var h=C.extend("sap.ushell.ui.ShellHeader",{metadata:{library:"sap.ushell",properties:{logo:{type:"sap.ui.core.URI",defaultValue:""},showLogo:{type:"boolean",defaultValue:true},homeUri:{type:"sap.ui.core.URI",defaultValue:"#"},searchState:{type:"string",defaultValue:"COL"},ariaLabel:{type:"string"},centralAreaElement:{type:"string",defaultValue:null},title:{type:"string",defaultValue:""}},aggregations:{headItems:{type:"sap.ushell.ui.shell.ShellHeadItem",multiple:true},headEndItems:{type:"sap.ui.core.Control",multiple:true},search:{type:"sap.ui.core.Control",multiple:false},appTitle:{type:"sap.ushell.ui.shell.ShellAppTitle",multiple:false}},associations:{shellLayout:{type:"sap.ui.base.ManagedObject",multiple:false}},events:{searchSizeChanged:{}}}});
h.prototype.setHomeUri=function(H){if(W.hasInvalidProtocol(H)){L.fatal("Tried to set a URL with an invalid protocol as the home uri. Setting to an empty string instead.",null,"sap/ushell/ui/ShellHeader");H="";}return this.setProperty("homeUri",H);};
h.prototype.getShellLayoutControl=function(){return sap.ui.getCore().byId(this.getShellLayout());};
h.prototype.createUIArea=function(){var e=window.document.getElementById("shell-hdr");if(!e){window.document.body.insertAdjacentHTML("afterbegin","<div id=\"shell-hdr\" class=\"sapContrastPlus sapUshellShellHead\"></div>");this.placeAt("shell-hdr");}};
h.prototype.SearchState={COL:"COL",EXP:"EXP",EXP_S:"EXP_S"};
h.prototype.init=function(){D.media.attachHandler(this.refreshLayout,this,D.media.RANGESETS.SAP_STANDARD);D.resize.attachHandler(this.refreshLayout,this);this._fnFocusListener=this._handleFocus.bind(this);this.addDelegate({onBeforeFastNavigationFocus:function(e){e.preventDefault();this._accessKeyHandler.sendFocusBackToShell(e);}.bind(this)});E.once("ShellNavigationInitialized").do(function(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(o){this._rerenderLogoNavigationFilterBound=this._rerenderLogoNavigationFilter.bind(this,o);o.registerNavigationFilter(this._rerenderLogoNavigationFilterBound);this._rerenderLogoNavigationFilterBound.detach=function(){o.unregisterNavigationFilter(this._rerenderLogoNavigationFilterBound);};}.bind(this));}.bind(this));if(a.last("/core/shellHeader/newDesignSwitchVisible")){this._oNewDesignSwitch=new N("newDesignSwitch");this._oNewDesignSwitch.setParent(this);}};
h.prototype.exit=function(){D.media.detachHandler(this.refreshLayout,this,D.media.RANGESETS.SAP_STANDARD);D.resize.detachHandler(this.refreshLayout,this);var o=window.document.getElementById("shell-hdr");if(o){o.parentElement.removeChild(o);}if(this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter){this._rerenderLogoNavigationFilterfnRerenderLogoNavigationFilter.detach();}if(this._oNewDesignSwitch){this._oNewDesignSwitch.destroy();this._oNewDesignSwitch=null;}};
h.prototype._toggleFocusListener=function(t){var A=window.document.getElementById("sapUshellHeaderAccessibilityHelper");if(A){A[t?"addEventListener":"removeEventListener"]("focus",this._fnFocusListener);}};
h.prototype.setAccessKeyHandler=function(A){this._accessKeyHandler=A;};
h.prototype._handleFocus=function(e){var t=this;function j(){if(t._accessKeyHandler.bForwardNavigation){var H=t.getHeadItems();if(H.length>0){H[0].focus();}else{t.getAppTitle().focus();}}else{var l=t.getHeadEndItems();if(l.length>0){l[l.length-1].focus();}else{t.getAppTitle().focus();}}t._accessKeyHandler.fromOutside=false;}if(this._accessKeyHandler){if(this._accessKeyHandler.fromOutside||this._accessKeyHandler.bForwardNavigation){j();}else{this._accessKeyHandler._handleEventUsingExternalKeysHandler(e);var A=window.document.getElementById("sapUshellHeaderAccessibilityHelper");if(window.document.activeElement===A){var k=window.document.querySelectorAll("#canvas [tabindex='0']");var F;for(var i=k.length-1;i>=0;i--){if(k[i].offsetWidth>0&&k[i].offsetHeight>0){F=k[i];break;}}if(F){F.focus();}else{j();return;}}this._accessKeyHandler.bFocusOnShell=false;}}};
h.prototype.onsapspace=function(e){if(e.target===this.getDomRef("logo")){this._setLocationHref(e.target.href);}};
h.prototype._setLocationHref=function(H){if(W.hasInvalidProtocol(H)){L.fatal("Tried to navigate to URL with an invalid protocol. Preventing navigation.",null,"sap/ushell/ui/ShellHeader");return;}window.location.href=H;};
h.prototype.onBeforeRendering=function(){this._toggleFocusListener(false);};
h.prototype.onAfterRendering=function(){var H=this.getDomRef();if(!d&&H.parentElement.getBoundingClientRect().height>0){H.style.visibility="hidden";H.style.height="2.75rem";return;}this.refreshLayout();this._toggleFocusListener(true);};
h.prototype.onThemeChanged=function(e){d=e.theme;this.invalidate();};
h.prototype.getLogo=function(){return this.getProperty("logo")||(sap.ui.getCore().isThemeApplied()?T._getThemeImage()||g:f);};
h.prototype.refreshLayout=function(){if(!this.getDomRef()){return;}this._setAppTitleFontSize();if(this.getSearchVisible()){var o=this.getDomRef("hdr-search");o.style.display="none";this._hideElementsForSearch();o.style.display="";o.style["max-width"]=_+"rem";this.fireSearchSizeChanged({remSize:R.fromPx(o.getBoundingClientRect().width),isFullWidth:this.isPhoneState()||this.getDomRef("hdr-end").style.display==="none"});}else{var n=document.getElementById("newDesignSwitch");var e=document.getElementById("newDesignSwitch-lbl");if(n&&e&&n.parentElement){e.style.display="";if(n.getBoundingClientRect().left<n.parentElement.getBoundingClientRect().left){e.style.display="none";}}}};
h.prototype._setAppTitleFontSize=function(){var B=this.getDomRef("hdr-begin"),A=window.document.getElementById("shellAppTitle"),e="sapUshellHeadTitleWithSmallerFontSize";if(B&&A){A.classList.remove(e);A.style.overflow="visible";var o=B.getBoundingClientRect(),i=o.x+o.width,j=A.getBoundingClientRect(),k=j.x+j.width;if(k>i){A.classList.add(e);A.style.overflow="hidden";}}};
h.prototype.removeHeadItem=function(i){if(typeof i==="number"){i=this.getHeadItems()[i];}this.removeAggregation("headItems",i);};
h.prototype.addHeadItem=function(i){this.addAggregation("headItems",i);};
h.prototype.isPhoneState=function(){var e=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var i=this.getDomRef().getBoundingClientRect().width>_;return(D.system.phone||e==="Phone"||!i);};
h.prototype.setSearchState=function(e,m,w){if(this.SearchState[e]&&this.getSearchState()!==e){if(typeof m==="boolean"){w=m;m=undefined;}this.setProperty("searchState",e,false);var i=(e!=="COL");var j=this.getShellLayoutControl();if(j){j.toggleStyleClass(s,i&&w);}_=i?m||35:0;}};
h.prototype._hideElementsForSearch=function(){var n,o=this.getDomRef("hdr-search-container"),B=this.getDomRef("hdr-begin"),j=this.getDomRef("hdr-center"),k=this.getDomRef("hdr-end"),l=document.getElementById("newDesignSwitch");if(this.getSearchState()==="EXP"||this.isPhoneState()){n=R.toPx(_+3);}else{n=R.toPx(9+0.5);}var m=[B];Array.prototype.forEach.call(B.childNodes,function(e){m.unshift(e);});if(j){m.unshift(j);}if(l){m.push(l);}B.style.flexBasis="";k.style.display="";m.forEach(function(e){if(e.getAttribute("id")==="shellAppTitle"){e.classList.remove("sapUiPseudoInvisibleText");}else{e.style.display="";}});if(l){var p=l.getBoundingClientRect().width||0;n=n+p;}var q;for(var i=0;i<m.length;i++){q=m[i];if(n>o.getBoundingClientRect().width){if(q.getAttribute("id")==="shellAppTitle"){q.classList.add("sapUiPseudoInvisibleText");}else{q.style.display="none";if(j&&i===0){B.style.flexBasis="auto";}}}else{return;}}if(R.toPx(_)>o.getBoundingClientRect().width){k.style.display="none";}};
h.prototype.getSearchWidth=function(){return _;};
h.prototype.isHomepage=function(){var H=(window.hasher&&"#"+window.hasher.getHash())||"";var r=new RegExp("[?]"+"(?:"+"(?!&[/])."+")*");var e=H.replace(r,"");return c.isRootIntent(e)||e==="#Launchpad-openFLPPage";};
h.prototype._rerenderLogoNavigationFilter=function(o,n,O){var A=o.hashChanger.isInnerAppNavigation(n,O);if(A){this.invalidate();}return o.NavigationFilterStatus.Continue;};
h.prototype.getSearchVisible=function(){return this.getSearchState()!==this.SearchState.COL;};
h.prototype.getCentralControl=function(){return sap.ui.getCore().byId(this.getCentralAreaElement());};
h.prototype.setNoLogo=function(){this.setLogo(f);};
h.prototype._getLeanMode=function(){return(window.location.search||"").indexOf("appState=lean")>=0;};
return h;},true);
sap.ui.predefine('sap/ushell/ui/ShellHeaderRenderer',["sap/ushell/resources","sap/ui/Device"],function(r,D){"use strict";var S={apiVersion:2};
S.render=function(a,s){var i=s.getId();var c=s.getCentralControl();a.openStart("header",s);if(!s.getVisible()){a.style("display","none");}a.class("sapUshellShellHeader");a.class("sapUshellShellCntnt");a.attr("aria-label",r.i18n.getText("Shell_Header_AriaLabel"));a.attr("data-sap-ui-customfastnavgroup","true");a.openEnd();a.openStart("div");a.attr("id","sapUshellHeaderAccessibilityHelper");a.attr("tabindex","0");a.openEnd();a.close("div");a.openStart("div");a.attr("id",i+"-hdr-begin");a.class("sapUshellShellHeadBegin");if(c){a.class("sapUshellHeadWithCenter");}a.openEnd();this.renderHeaderItems(a,s);this.renderLogo(a,s);this.renderTitle(a,s);a.close("div");if(c){a.openStart("div",c);a.attr("id",i+"-hdr-center");a.class("sapUshellShellHeadCenter");a.openEnd();a.renderControl(c);a.close("div");}a.openStart("div");a.attr("id",i+"-hdr-search-container");a.class("sapUshellShellHeadSearchContainer");a.openEnd();this.renderSearch(a,s);var C=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var n=s._oNewDesignSwitch;if(n&&C!=="Phone"){a.renderControl(n);}a.close("div");a.openStart("div");a.attr("id",i+"-hdr-end");a.class("sapUshellShellHeadEnd");a.openEnd();this.renderHeaderEndItems(a,s);a.close("div");a.close("header");};
S.renderSearch=function(a,s){var o=s.getSearch();a.openStart("div");a.attr("id",s.getId()+"-hdr-search");a.class("sapUshellShellSearch");a.style("max-width",s.getSearchWidth()+"rem");if(s.getSearchState()==="COL"){a.style("display","none");}a.openEnd();if(o){a.renderControl(o);}a.close("div");};
S.renderTitle=function(a,s){var t=s.getTitle();a.renderControl(s.getAppTitle());if(t){a.openStart("div");a.attr("id",s.getId()+"-hdr-shell-title");a.class(s.getAppTitle()?"sapUshellShellHeadSubtitle":"sapUshellShellHeadTitle");a.openEnd();a.openStart("h2");a.class("sapUshellHeadTitle");a.attr("aria-level","2");a.openEnd();a.text(t);a.close("h2");a.close("div");}};
S.renderHeaderItems=function(a,h){var i=h.getHeadItems();i.forEach(function(I){if((I.getId()==="homeBtn")&&h.getShowLogo()){return;}a.renderControl(I);});};
S.renderHeaderEndItems=function(a,h){h.getHeadEndItems().forEach(function(i){if(i&&i.getId()!=="newDesignSwitchItem"){a.renderControl(i);}});};
S.renderLogo=function(a,h){if(!h.getShowLogo()){return;}var l=h._getLeanMode();var A=r.i18n.getText("homeBtn_tooltip"),t=r.i18n.getText("homeBtn_tooltip_text"),i=h.getLogo();a.openStart(l?"div":"a");a.attr("id",h.getId()+"-logo");a.class("sapUshellShellIco");if(l){a.class("sapUshellLean");}else{a.attr("href",h.getHomeUri());a.attr("title",t);a.attr("aria-label",A);}a.openEnd();a.voidStart("img");a.attr("id",h.getId()+"-icon");a.attr("alt",r.i18n.getText("SHELL_LOGO_TOOLTIP"));a.attr("src",i);a.voidEnd();a.close(l?"div":"a");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/appfinder/AppBox',["sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/IconPool","sap/ushell/library","sap/ushell/resources"],function(C,I,a,u,r){"use strict";
var A=C.extend("sap.ushell.ui.appfinder.AppBox",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"string",group:"Misc",defaultValue:null},url:{type:"string",group:"Misc",defaultValue:null},navigationMode:{type:"string",group:"Misc",defaultValue:null}},aggregations:{pinButton:{type:"sap.m.Button",multiple:false}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){this._oIcon=new I().addStyleClass("sapUshellAppBoxIcon");};
A.prototype.destroy=function(){C.prototype.destroy.apply(this,arguments);this._oIcon.destroy();};
A.prototype.onAfterRendering=function(){var j=this.$("title"),b=this.$("subTitle");var t=parseInt(j.css("lineHeight"),10),T=j.height();if((T/t)>1){j.addClass("sapUshellAppBoxHeaderElementTwoLines");b.addClass("sapUshellAppBoxHeaderElementOneLine");}else{j.addClass("sapUshellAppBoxHeaderElementOneLine");b.addClass("sapUshellAppBoxHeaderElementTwoLines");}this.fireAfterRendering();};
A.prototype.setIcon=function(i){this.setProperty("icon",i);this._oIcon.setSrc(a.isIconURI(i)?i:null);};
A.prototype._getAriaLabel=function(){var s=this.getTitle(),S=this.getSubtitle(),n=this.getNavigationMode();if(S){s+=" "+S;}if(n){s+=" "+r.i18n.getText(n+"NavigationMode");}return s;};
A.prototype.onclick=A.prototype.firePress;
A.prototype.onsapspace=function(e){e.preventDefault();this.firePress(e);};
A.prototype.onsapenter=A.prototype.onsapspace;return A;});
sap.ui.predefine('sap/ushell/ui/appfinder/AppBoxRenderer',["sap/ushell/resources"],function(r){"use strict";var A={apiVersion:2};
A.render=function(a,o){var c=o.getParent(),b=[];if(c&&c.getAppBoxesContainer&&c.getCustomTilesContainer){b=c.getAppBoxesContainer().concat(c.getCustomTilesContainer());}var v=b.filter(function(d){return d.getVisible();}),C=v.indexOf(o)>-1?v.indexOf(o)+1:"";a.openStart("li",o);a.class("sapUshellAppBox");a.attr("aria-posinset",C);a.attr("aria-setsize",v.length);a.attr("aria-label",o._getAriaLabel());a.attr("aria-roledescription",r.i18n.getText("tile"));a.attr("aria-describedby",o.getId());a.openEnd();a.openStart("div");a.class("sapUshellAppBoxInner");a.openEnd();var h=o.getIcon();if(h){a.renderControl(o._oIcon);}a.openStart("div");if(h){a.class("sapUshellAppBoxHeader");}else{a.class("sapUshellAppBoxHeaderNoIcon");}a.openEnd();a.openStart("div",o.getId()+"-title");a.class("sapUshellAppBoxTitle");a.openEnd();a.text(o.getTitle());a.close("div");if(o.getSubtitle()){a.openStart("div",o.getId()+"-subTitle");a.class("sapUshellAppBoxSubtitle");a.openEnd();a.text(o.getSubtitle());a.close("div");}a.close("div");a.close("div");a.openStart("div");a.class("sapUshellAppBoxActionsArea");if(o.getTitle){a.attr("role","toolbar");a.attr("aria-label",o.getTitle());}a.openEnd();a.renderControl(o.getPinButton());a.close("div");a.close("li");};
return A;},true);
sap.ui.predefine('sap/ushell/ui/appfinder/PinButton',["sap/m/Button","sap/ushell/library"],function(B,u){"use strict";
var P=B.extend("sap.ushell.ui.appfinder.PinButton",{metadata:{library:"sap.ushell",properties:{selected:{type:"boolean",group:"Appearance",defaultValue:false}}}});
P.prototype.onAfterRendering=function(){this.$("inner").toggleClass("sapUshellPinSelected",this.getSelected());};
return P;});
sap.ui.predefine('sap/ushell/ui/appfinder/PinButtonRenderer',["sap/m/ButtonRenderer","sap/ui/core/Renderer"],function(B,R){"use strict";var P=R.extend(B);P.apiVersion=2;
P.renderAccessibilityAttributes=function(r,p,a){a.pressed=p.getSelected();};
return P;});
sap.ui.predefine('sap/ushell/ui/bookmark/SaveOnPage.controller',["sap/ui/core/mvc/Controller","sap/base/Log","sap/ushell/Config","sap/ushell/resources","sap/ui/thirdparty/hasher","sap/ui/core/library"],function(C,L,a,r,h,c){"use strict";var V=c.ValueState;return C.extend("sap.ushell.ui.bookmark.SaveOnPage",{onInit:function(){var v=this.getView();v.setModel(r.i18nModel,"i18n");this.byId("bookmarkTitleInput").attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));this.setValueState(V.Error);}else{this.setValueState(V.None);}});this.byId("pageSelect").attachSelectionFinish(function(){if(this.getSelectedKeys().length===0){this.setValueStateText(r.i18n.getText("bookmarkPageSelectError"));this.setValueState(V.Error);}else{this.setValueState(V.None);}});},loadPagesIntoModel:function(s,p){if(s&&!p){var P=a.last("/core/shell/enablePersonalization");var m=a.last("/core/spaces/myHome/enabled");if(!P&&!m){var M=this.getView().getModel();M.setProperty("/pages",[]);M.setProperty("/cannotLoadPages",true);L.error("SaveOnPage controller: Unable to determine or use targets for bookmark placement, because personalization is disabled");return Promise.resolve();}var S=!P&&m;var b=a.last("/core/spaces/myHome/myHomeSpaceId");return Promise.all([sap.ushell.Container.getServiceAsync("Menu"),sap.ushell.Container.getServiceAsync("CommonDataModel")]).then(function(d){return Promise.all([d[0].getSpacesPagesHierarchy(),d[1].getAllPages()]);}).then(function(R){var d=R[0].spaces;var A=R[1];var e={};A.forEach(function(o){e[o.identification.id]=o.identification.title;});return d.reduce(function(t,o){if(S&&b!==o.id){return t;}o.pages.map(function(f){if(e[f.id]){t.push({id:f.id,title:e[f.id],spaceTitle:o.title});}});return t;},[]);}).then(function(t){if(t.length<1){return Promise.reject();}this.getView().getModel().setProperty("/pages",t);}.bind(this)).catch(function(){var M=this.getView().getModel();M.setProperty("/pages",[]);M.setProperty("/cannotLoadPages",true);L.error("SaveOnPage controller: Unable to determine or use targets for bookmark placement.");}.bind(this));}return Promise.resolve();},removeFocusFromTile:function(){this.getView().getDomRef().querySelector(".sapMGT").removeAttribute("tabindex");},getBookmarkTileData:function(){var v=this.getView();var m=v.getModel();var o=v.getViewData();var u;if(o.customUrl){if(typeof(o.customUrl)==="function"){u=o.customUrl();}else{u=o.customUrl;}}else{u=h.getHash()?("#"+h.getHash()):window.location.href;}var p=this.byId("pageSelect");var d={title:m.getProperty("/title")||"",subtitle:m.getProperty("/subtitle")||"",url:u,icon:m.getProperty("/icon"),info:m.getProperty("/info")||"",numberUnit:m.getProperty("/numberUnit"),serviceUrl:typeof(o.serviceUrl)==="function"?o.serviceUrl():o.serviceUrl,serviceRefreshInterval:m.getProperty("/serviceRefreshInterval"),pages:p?p.getSelectedKeys():[],keywords:m.getProperty("/keywords")};d.title=d.title.substring(0,256).trim();d.subtitle=d.subtitle.substring(0,256).trim();d.info=d.info.substring(0,256).trim();return d;},groupBySpace:function(b){return b.getObject().spaceTitle;},sortPages:function(p,b){if(a.last("/core/spaces/myHome/enabled")){var m=a.last("/core/spaces/myHome/myHomePageId");if(p.id===m){return-1;}if(b.id===m){return 1;}}if(p.spaceTitle.toUpperCase()>b.spaceTitle.toUpperCase()){return 1;}if(p.spaceTitle.toUpperCase()<b.spaceTitle.toUpperCase()){return-1;}return 0;}});});
sap.ui.predefine('sap/ushell/ui/fiori3/AppContainer',["../AppContainer"],function(A){"use strict";return A;});
sap.ui.predefine('sap/ushell/ui/footerbar/AboutButton',["sap/m/ButtonRenderer","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem"],function(B,r,A){"use strict";
var a=A.extend("sap.ushell.ui.footerbar.AboutButton",{
metadata:{library:"sap.ushell"},
renderer:"sap.m.ButtonRenderer"
});
a.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://hint");this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);};
a.prototype.showAboutDialog=function(){return new Promise(function(b,c){sap.ui.require(["sap/ushell/ui/footerbar/AboutDialog.controller","sap/ui/core/Fragment"],function(d,F){F.load({id:"aboutDialogFragment",name:"sap.ushell.ui.footerbar.AboutDialog",type:"XML",controller:new d()}).then(function(e){e.setModel(r.getTranslationModel(),"i18n");e.open();b();}).catch(c);});});};
return a;});
sap.ui.predefine('sap/ushell/ui/footerbar/AboutDialog.controller',["sap/ui/core/mvc/Controller","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/ushell/services/AppConfiguration","sap/ushell/Config","sap/ushell/resources","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/Device"],function(C,F,J,A,a,r,L,b,D){"use strict";return C.extend("sap.ushell.ui.footerbar.AboutDialog.controller",{onBeforeOpen:function(){this._setupAboutDialogModel();},onClose:function(){this._getDialog().close();},onAfterClose:function(){this._getDialog().destroy();},_getDialog:function(){if(!this.oAboutDialog){this.oAboutDialog=F.byId("aboutDialogFragment","aboutDialog");}return this.oAboutDialog;},_setupAboutDialogModel:function(){this._setupAppInfoModel().catch(function(e){L.error("Failed to setup application info model.",e);});var o=this._getDialog(),s=this._getSystemInformation(),u=this._getUserEnvironmentInformation(),S=new J(s),U=new J(u);o.setModel(S,"SysInfo");o.setModel(U,"UserEnvInfo");},_setupAppInfoModel:function(){var c=["appId","appVersion","appSupportInfo","technicalAppComponentId","appFrameworkId","appFrameworkVersion"],o=this._getDialog();return new Promise(function(d,e){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(f){var g=f.getCurrentApplication();return Promise.all([g.getInfo(c),this._getContentProviderLabel(g)]);}.bind(this)).then(function(R){var m=A.getMetadata(),i=R[0]||{},p=R[1];c=c.concat(["appTitle","contentProviderLabel"]);i.appTitle=m.title;i.contentProviderLabel=p;var f=this._buildApplicationInformationObject(c,i);o.setModel(new J(f),"AppInfo");d();}.bind(this)).catch(function(f){e(f);});}.bind(this));},_buildApplicationInformationObject:function(c,p){var o={},P;for(var i=0;i<c.length;i++){P=c[i];if(p[P]){o[P]={label:r.i18n.getText(P),text:p[P]};}}return o;},_getSystemInformation:function(){var l=sap.ushell.Container.getLogonSystem(),p=l.getProductName(),P=l.getProductVersion(),s=l.getSystemName(),S=l.getSystemRole(),t=l.getTenantRole(),o={};if(p){o.productName={label:r.i18n.getText("productName"),text:p};}if(P){o.productVersion={label:r.i18n.getText("productVersionFld"),text:P};}if(s){o.systemName={label:r.i18n.getText("systemName"),text:s};}if(S){o.systemRole={label:r.i18n.getText("systemRole"),text:S};}if(t){o.tenantRole={label:r.i18n.getText("tenantRole"),text:t};}return o;},_getUserEnvironmentInformation:function(){var u={};u.userAgentFld={label:r.i18n.getText("userAgentFld"),text:navigator.userAgent};var d=this._getDeviceType(),t=this._isTouchSupported(),U=sap.ushell.Container.getUser(),T=U.getTheme(),o=U.getContentDensity()==="cozy";if(d){u.deviceType={label:r.i18n.getText("deviceType"),text:d};}u.touchSupported={label:r.i18n.getText("touchSupported"),text:t?r.i18n.getText("yes"):r.i18n.getText("no")};u.activeTheme={label:r.i18n.getText("activeTheme"),text:T};u.optimizedForTouch={label:r.i18n.getText("AppearanceContentDensityLabel"),text:o?r.i18n.getText("yes"):r.i18n.getText("no")};return u;},_getContentProviderLabel:function(o){if(a.last("/core/contentProviders/providerInfo/show")){return o.getSystemContext().then(function(s){return s.label;});}return Promise.resolve(undefined);},_getDeviceType:function(){var d;if(D.system.combi){d=r.i18n.getText("configuration.form_factor_combi");}else if(D.system.desktop){d=r.i18n.getText("configuration.form_factor_desktop");}else if(D.system.tablet){d=r.i18n.getText("configuration.form_factor_tablet");}else if(D.system.phone){d=r.i18n.getText("configuration.form_factor_phone");}return d;},_isTouchSupported:function(){return D.support.touch&&(D.system.tablet||D.system.phone||D.system.combi);},calculateNumberOfColumns:function(m){if(!this.isFormVisible(m)){return 1;}return Object.keys(m).length>1?2:1;},isFormVisible:function(m){return!!m&&!b(m);}});});
sap.ui.predefine('sap/ushell/ui/footerbar/AddBookmarkButton',["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/m/Dialog","sap/m/library","sap/m/MessageBox","sap/m/Text","sap/m/VBox","sap/ui/core/library","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/library","sap/ushell/resources"],function(L,B,a,D,m,M,T,V,c,b,d,J,C,u,r){"use strict";var e=m.ButtonType;var f=c.ValueState;var g=c.mvc.ViewType;
var A=B.extend("sap.ushell.ui.footerbar.AddBookmarkButton",{
metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"function",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},info:{type:"string",group:"Misc",defaultValue:null},tileIcon:{type:"string",group:"Appearance",defaultValue:null},numberUnit:{type:"string",group:"Appearance",defaultValue:null},keywords:{type:"string",group:"Misc",defaultValue:null},customUrl:{type:"any",group:"Misc",defaultValue:null},serviceUrl:{type:"any",group:"Misc",defaultValue:null},serviceRefreshInterval:{type:"string",group:"Misc",defaultValue:null},showGroupSelection:{type:"boolean",group:"Misc",defaultValue:true},showPageSelection:{type:"boolean",group:"Misc",defaultValue:true},appData:{type:"object",group:"Misc",defaultValue:null}}},
renderer:"sap.m.ButtonRenderer"
});
A.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.bSpaceEnabled=C.last("/core/spaces/enabled");this.bMyHomeEnabled=C.last("/core/spaces/myHome/enabled");this.setIcon("sap-icon://add-favorite");this.setText(r.i18n.getText("addToHomePageBtn"));this.setEnabled();this.oModel=new J({showGroupSelection:true,showPageSelection:true,title:"",subtitle:"",numberValue:0,info:"",icon:"",numberUnit:"",keywords:""});this.attachPress(function(){var h=this.getBeforePressHandler();if(h){h();}this.showAddBookmarkDialog();}.bind(this));};
A.prototype.exit=function(){if(this.oDialog){this.oDialog.destroy();}if(this.oModel){this.oModel.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
A.prototype.setBookmarkTileView=function(v){this.bookmarkTileView=v;};
A.prototype.getBookmarkTileView=function(){return this.bookmarkTileView;};
A.prototype.showAddBookmarkDialog=function(){var o=this.getAppData()||{};var v={serviceUrl:this.getServiceUrl()||o.serviceUrl,customUrl:this.getCustomUrl()||o.customUrl};this.oModel.setProperty("/serviceUrl",!!v.serviceUrl);var h;if(this.bSpaceEnabled){h=b.create({type:g.XML,viewName:"sap.ushell.ui.bookmark.SaveOnPage",viewData:v});}else{h=b.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view",viewData:v});}return h.then(function(i){this.setBookmarkTileView(i);i.setModel(this.oModel);return new Promise(function(j,k){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout"],function(S,l){this.oSimpleForm=new S({id:"bookmarkFormId",layout:l.ResponsiveGridLayout,content:[i],editable:true}).addStyleClass("sapUshellAddBookmarkForm");j(this._openDialog(this.oSimpleForm));}.bind(this));}.bind(this));}.bind(this));};
A.prototype._openDialog=function(o){this.oDialog=new D({id:"bookmarkDialog",title:r.i18n.getText("addToHomePageBtn"),contentWidth:"25rem",content:o,beginButton:new B("bookmarkOkBtn",{text:r.i18n.getText("okBtn"),type:e.Emphasized,press:[this._handleOKButtonPress,this]}),endButton:new B("bookmarkCancelBtn",{text:r.i18n.getText("cancelBtn"),press:[this._handleCancelButtonPress,this]}),stretch:d.system.phone,horizontalScrolling:false,afterClose:function(){var h=this.getAfterPressHandler();if(h){h();}this._restoreDialogEditableValuesToDefault();this.oDialog.destroy();delete this.oDialog;}.bind(this)}).addStyleClass("sapContrastPlus");this.oDialog.open();return this.oDialog;};
A.prototype._handleOKButtonPress=function(){if(this.bSpaceEnabled){this._handleOKButtonPressSpacesMode();}else{this._handleOKButtonPressClassicMode();}};
A.prototype._handleCancelButtonPress=function(){if(this.bSpaceEnabled){this._handleCancelButtonPressSpacesMode();}else{this._handleCancelButtonPressClassicMode();}};
A.prototype.setTitle=function(t){this.setProperty("title",t,true);this.oModel.setProperty("/title",t);return this;};
A.prototype.setSubtitle=function(s){this.setProperty("subtitle",s,true);this.oModel.setProperty("/subtitle",s);return this;};
A.prototype.setInfo=function(i){this.setProperty("info",i,true);this.oModel.setProperty("/info",i);return this;};
A.prototype.setTileIcon=function(i){this.setProperty("tileIcon",i,true);this.oModel.setProperty("/icon",i);return this;};
A.prototype.setShowGroupSelection=function(s){this.setProperty("showGroupSelection",s,true);this.oModel.setProperty("/showGroupSelection",s);return this;};
A.prototype.setNumberUnit=function(n){this.setProperty("numberUnit",n,true);this.oModel.setProperty("/numberUnit",n);return this;};
A.prototype.setServiceRefreshInterval=function(s){this.setProperty("serviceRefreshInterval",s,true);this.oModel.setProperty("/serviceRefreshInterval",s);return this;};
A.prototype.setKeywords=function(k){this.setProperty("keywords",k,true);this.oModel.setProperty("/keywords",k);return this;};
A.prototype.setAppData=function(o){this.setProperty("appData",o,true);var h=["showGroupSelection","title","subtitle","info","icon","numberUnit","keywords","serviceRefreshInterval"];var i=["showInfo","showPreview"];Object.keys(o).forEach(function(k){if(h.indexOf(k)>-1){var p=k==="icon"?"tileIcon":k;this.setProperty(p,o[k],true);}if(h.indexOf(k)>-1||i.indexOf(k)>-1){this.oModel.setProperty("/"+k,o[k]);}}.bind(this));return this;};
A.prototype._restoreDialogEditableValuesToDefault=function(){if(this.oModel){this.oModel.setProperty("/title",this.getTitle());this.oModel.setProperty("/subtitle",this.getSubtitle());this.oModel.setProperty("/info",this.getInfo());}};
A.prototype._handleCancelButtonPressSpacesMode=function(){var o=this.getBookmarkTileView().getController();var h=o.getBookmarkTileData();if(h.title||h.subtitle||h.info||h.pages.length){var s=r.i18n.getText("SaveAsTileDialog.MessageBox.Action.Discard");var i=r.i18n.getText("SaveAsTileDialog.MessageBox.Message.Discard");var t=r.i18n.getText("SaveAsTileDialog.MessageBox.Title.Discard");M.show(i,{title:t,actions:[s,M.Action.CANCEL],emphasizedAction:s,onClose:function(R){if(R===s){this.oDialog.close();}}.bind(this)});}else{this.oDialog.close();}};
A.prototype._handleOKButtonPressSpacesMode=function(){var o=this.getBookmarkTileView().getController();var h=o.getBookmarkTileData();var v=true;if(h.pages.length===0){var p=o.byId("pageSelect");if(p){p.setValueState(f.Error);p.setValueStateText(r.i18n.getText("bookmarkPageSelectError"));v=false;}}if(!h.title||h.title.length<1){var t=o.byId("bookmarkTitleInput");if(t){t.setValueState(f.Error);t.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));v=false;}}if(!v){return;}this.oDialog.setBusy(true);var i=h.pages;delete h.pages;var j=sap.ushell.Container.getServiceAsync("Bookmark");var k=i.map(function(P){return j.then(function(l){return l.addBookmarkToPage(h,P);}).then(function(){return{pageId:P,status:"resolved"};}).catch(function(s){L.error("Failed to add one a bookmark: ",s,"sap.ushell.ui.footerbar.AddBookmarkButton");return{pageId:P,error:s,status:"failed"};});});Promise.all(k).then(function(R){sap.ushell.Container.getServiceAsync("Message").then(function(l){var s=R.filter(function(n){return n.status==="resolved";}).length;var F=R.filter(function(n){return n.status==="failed";});if(s===1){l.info(r.i18n.getText("SaveAsTileDialog.MessageToast.TileCreatedInPage"));}else if(s>1){l.info(r.i18n.getText("SaveAsTileDialog.MessageToast.TileCreatedInPages"));}if(F.length){this._showErrorDialog(F,s,h.title);}this.oDialog.setBusy(false);this.oDialog.close();}.bind(this));}.bind(this));};
A.prototype._showErrorDialog=function(h,n,i){sap.ushell.Container.getServiceAsync("Message").then(function(o){var E,s;if(h.length===1){if(n===0){E=r.i18n.getText("SaveAsTileDialog.MessageBox.SinglePageError");}else{E=r.i18n.getText("SaveAsTileDialog.MessageBox.OnePageError");}s=r.i18n.getText("SaveAsTileDialog.MessageBox.PageErrorDetail",[i,h[0].pageId]);}else if(h.length>1){if(n===0){E=r.i18n.getText("SaveAsTileDialog.MessageBox.AllPagesError");}else{E=r.i18n.getText("SaveAsTileDialog.MessageBox.SomePagesError");}var p=h.map(function(F){return F.pageId;}).join("\n");s=r.i18n.getText("SaveAsTileDialog.MessageBox.PagesErrorDetail",[i,p]);}var j=new V({items:[new T({text:s}).addStyleClass("sapUiSmallMarginBottom"),new T({text:h.map(function(F){return F.error;}).join("\n")}).addStyleClass("sapUiSmallMarginBottom"),new T({text:r.i18n.getText("SaveAsTileDialog.MessageBox.PageErrorSolution")})]});o.errorWithDetails(E,j);});};
A.prototype._handleCancelButtonPressClassicMode=function(){this.oDialog.close();};
A.prototype._handleOKButtonPressClassicMode=function(){var o=this.getBookmarkTileView();var h=o.getController();var i=h.getBookmarkTileData();if(!i.title||i.title.length<1){var t=o.getTitleInput();if(t){t.setValueState(f.Error);t.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));return Promise.reject();}}this.oDialog.setBusy(true);var s=i.group?i.group.object:"";delete i.group;return Promise.all([sap.ushell.Container.getServiceAsync("Bookmark"),sap.ushell.Container.getServiceAsync("Message")]).then(function(R){var j=R[0];var k=R[1];return new Promise(function(l,n){j.addBookmark(i,s).done(l).fail(n);}).then(function(){k.info(r.i18n.getText("tile_created_msg"));}).catch(function(l){L.error("Failed to add bookmark",l,"sap.ushell.ui.footerbar.AddBookmarkButton");k.error(r.i18n.getText("fail_to_add_tile_msg"));});}).finally(function(){this.oDialog.setBusy(false);this.oDialog.close();}.bind(this));};
A.prototype.setEnabled=function(E){var s="",p=true,S;if(sap.ushell.renderers&&sap.ushell.renderers.fiori2&&sap.ushell.renderers.fiori2.RendererExtensions){S=sap.ushell.renderers.fiori2.RendererExtensions.getConfiguration();if(S.appState){s=S.appState;}if(S.enablePersonalization!==undefined){p=S.enablePersonalization;}if(!p&&this.bSpaceEnabled&&this.bMyHomeEnabled){p=true;}}if(s==="headerless"||s==="standalone"||s==="embedded"||s==="merged"||!p){E=false;}if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Save as Tile' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.AddBookmarkButton");}E=false;}B.prototype.setEnabled.call(this,E);if(!E){this.addStyleClass("sapUshellAddBookmarkButton");}};
return A;});
sap.ui.predefine('sap/ushell/ui/footerbar/ContactSupportButton',["sap/base/Log","sap/m/ButtonRenderer","sap/m/library","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem"],function(L,B,m,D,q,u,r,A,a){"use strict";var b=m.ButtonType;
var C=a.extend("sap.ushell.ui.footerbar.ContactSupportButton",{
metadata:{library:"sap.ushell"},
renderer:"sap.m.ButtonRenderer"
});
C.prototype.init=function(){if(a.prototype.init){a.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://email");this.setText(r.i18n.getText("contactSupportBtn"));this.attachPress(this.showContactSupportDialog);this.setEnabled();};
C.prototype.showContactSupportDialog=function(){sap.ui.require(["sap/ui/layout/form/SimpleForm","sap/ui/layout/form/SimpleFormLayout","sap/m/TextArea","sap/m/Link","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button","sap/ushell/UserActivityLog"],function(S,c,T,d,e,f,g,h,U){var i="",j="",k="",l=[],o,n;n=function(){this.oDialog.removeContent(this.oBottomSimpleForm.getId());this.oBottomSimpleForm.destroy();if(this.oClientContext.navigationData.applicationInformation){i=this.oClientContext.navigationData.applicationInformation.applicationType;j=this.oClientContext.navigationData.applicationInformation.url;k=this.oClientContext.navigationData.applicationInformation.additionalInformation;}l.push(new f({text:this.translationBundle.getText("loginDetails")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));l.push(new e({text:this.translationBundle.getText("userFld")}));l.push(new f({text:this.oClientContext.userDetails.fullName||""}));l.push(new e({text:this.translationBundle.getText("serverFld")}));l.push(new f({text:window.location.host}));if(this.oClientContext.userDetails.eMail&&this.oClientContext.userDetails.eMail!==""){l.push(new e({text:this.translationBundle.getText("eMailFld")}));l.push(new f({text:this.oClientContext.userDetails.eMail||""}));}l.push(new e({text:this.translationBundle.getText("languageFld")}));l.push(new f({text:this.oClientContext.userDetails.Language||""}));if(this.oClientContext.shellState==="app"||this.oClientContext.shellState==="standalone"){l.push(new f({text:""}));l.push(new f({text:this.translationBundle.getText("navigationDataFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));l.push(new e({text:this.translationBundle.getText("hashFld")}));l.push(new f({text:this.oClientContext.navigationData.navigationHash||""}));l.push(new f({text:""}));l.push(new f({text:this.translationBundle.getText("applicationInformationFld")}).addStyleClass("sapUshellContactSupportHeaderInfoText"));l.push(new e({text:this.translationBundle.getText("applicationTypeFld")}));l.push(new f({text:i}));l.push(new e({text:this.translationBundle.getText("urlFld")}));l.push(new f({text:j}));l.push(new e({text:this.translationBundle.getText("additionalInfoFld")}));l.push(new f({text:k}));}this.oBottomSimpleForm=new S("technicalInfoBox",{layout:c.ResponsiveLayout,content:l}).addStyleClass("sapUshellTechnicalInfoBox");if(D.os.ios&&D.system.phone){this.oBottomSimpleForm.addStyleClass("sapUshellContactSupportFixWidth");}o=this.oBottomSimpleForm.onAfterRendering;this.oBottomSimpleForm.onAfterRendering=function(){o.apply(this,arguments);var p=q(this.getDomRef());p.attr("tabIndex",0);setTimeout(function(){this.focus();}.bind(p),700);};this.oDialog.addContent(this.oBottomSimpleForm);}.bind(this);this._embedLoginDetailsInBottomForm=n;this.translationBundle=r.i18n;this.oClientContext=U.getMessageInfo();this.oLink=new d({text:this.translationBundle.getText("technicalDataLink")});this.oBottomSimpleForm=new S("bottomForm",{editable:false,content:[this.oLink]});this.sendButton=new h("contactSupportSendBtn",{text:this.translationBundle.getText("sendBtn"),type:b.Emphasized,enabled:false,press:function(){sap.ushell.Container.getServiceAsync("SupportTicket").then(function(s){var t=this.oTextArea.getValue();s.createTicket({text:t,clientContext:this.oClientContext}).done(function(){sap.ushell.Container.getServiceAsync("Message").then(function(M){M.info(this.translationBundle.getText("supportTicketCreationSuccess"));}.bind(this));}.bind(this)).fail(function(){sap.ushell.Container.getServiceAsync("Message").then(function(M){M.error(this.translationBundle.getText("supportTicketCreationFailed"));}.bind(this));}.bind(this));this.oDialog.close();}.bind(this));}.bind(this)});this.cancelButton=new h("contactSupportCancelBtn",{text:this.translationBundle.getText("cancelBtn"),press:function(){this.oDialog.close();}.bind(this)});this.oTextArea=new T("textArea",{rows:7,liveChange:function(){if(/\S/.test(this.oTextArea.getValue())){this.sendButton.setEnabled(true);}else{this.sendButton.setEnabled(false);this.oTextArea.setValue("");}}.bind(this)});this.oTopSimpleForm=new S("topForm",{editable:false,content:[this.oTextArea],layout:c.ResponsiveGridLayout});this.oDialog=new g({id:"ContactSupportDialog",title:this.translationBundle.getText("contactSupportBtn"),contentWidth:"29.6rem",leftButton:this.sendButton,rightButton:this.cancelButton,initialFocus:"textArea",afterOpen:function(){q("#textArea").on("focusout",function(){window.scrollTo(0,0);});},afterClose:function(){this.oDialog.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}.bind(this)}).addStyleClass("sapUshellContactSupportDialog").addStyleClass("sapContrastPlus");this.oTextArea.setPlaceholder(this.translationBundle.getText("txtAreaPlaceHolderHeader"));this.oLink.attachPress(n.bind(this));this.oDialog.addCustomData(new A({key:"aria-label",value:this.translationBundle.getText("ContactSupportArialLabel"),writeToDom:true}));this.oDialog.addContent(this.oTopSimpleForm);this.oDialog.addContent(this.oBottomSimpleForm);this.oDialog.open();}.bind(this));};
C.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Contact Support' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.ContactSupportButton");}e=false;}a.prototype.setEnabled.call(this,e);};
return C;});
sap.ui.predefine('sap/ushell/ui/footerbar/JamDiscussButton',["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/ushell/resources"],function(L,B,a,r){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamDiscussButton",{
metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}},
renderer:"sap.m.ButtonRenderer"
});
J.prototype.init=function(){var t=this;if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.setEnabled();this.setIcon("sap-icon://discussion-2");this.setText(r.i18n.getText("discussBtn"));this.attachPress(function(){if(t.getBeforePressHandler()){t.getBeforePressHandler()();}this.showDiscussDialog(t.getAfterPressHandler());});};
J.prototype.showDiscussDialog=function(c){if(!this.discussComponent){this.discussComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.feed.dialog"});}this.discussComponent.setSettings(this.getJamData());this.discussComponent.open();if(c){c();}};
J.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling JamDiscussButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;}else{var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(this.getEnabled()){L.info("Disabling JamDiscussButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamDiscussButton");}e=false;this.setVisible(false);}}B.prototype.setEnabled.call(this,e);};
return J;});
sap.ui.predefine('sap/ushell/ui/footerbar/JamShareButton',["sap/base/Log","sap/collaboration/components/fiori/sharing/dialog/Component","sap/m/Button","sap/m/ButtonRenderer","sap/ushell/library","sap/ushell/resources"],function(L,C,B,a,l,r){"use strict";
var J=B.extend("sap.ushell.ui.footerbar.JamShareButton",{
metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null},jamData:{type:"object",group:"Misc",defaultValue:null}}},
renderer:"sap.m.ButtonRenderer"
});
J.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.setEnabled();this.setIcon("sap-icon://share-2");this.setText(r.i18n.getText("shareBtn"));this.attachPress(function(){if(this.getBeforePressHandler()){this.getBeforePressHandler()();}this.showShareDialog(this.getAfterPressHandler());}.bind(this));};
J.prototype.showShareDialog=function(c){function o(){this.shareComponent.setSettings(this.getJamData());this.shareComponent.open();if(c){c();}}if(!this.shareComponent){this.shareComponent=sap.ui.getCore().createComponent({name:"sap.collaboration.components.fiori.sharing.dialog"});}if(sap.ushell.Container&&sap.ushell.Container.inAppRuntime()){this.adjustFLPUrl(this.getJamData()).then(function(){o.call(this);}.bind(this),function(e){L.error("Could not retrieve FLP URL",e,"sap.ushell.ui.footerbar.JamShareButton");});}else{o.call(this);}};
J.prototype.exit=function(){if(this.shareComponent){this.shareComponent.destroy();}if(B.prototype.exit){B.prototype.exit.apply(this,arguments);}};
J.prototype.setEnabled=function(e){if(sap.ushell.Container){var u=sap.ushell.Container.getUser();if(!(u&&u.isJamActive())){if(!e){L.info("Disabling JamShareButton: user not logged in or Jam not active",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;this.setVisible(false);}}else{if(!e){L.warning("Disabling JamShareButton: unified shell container not initialized",null,"sap.ushell.ui.footerbar.JamShareButton");}e=false;}B.prototype.setEnabled.call(this,e);};
J.prototype.adjustFLPUrl=function(j){if(j&&j.object&&j.object.id&&typeof j.object.id==="string"&&j.object.id===document.URL){return sap.ushell.Container.getFLPUrl(true).then(function(u){j.object.id=u;});}return Promise.resolve();};
return J;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/LogoutButton',["sap/base/Log","sap/m/ButtonRenderer","sap/m/MessageBox","sap/ui/core/ElementMetadata","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/launchpad/LoadingDialog"],function(L,B,M,E,r,A,a){"use strict";var b=M.Action;var I=M.Icon;
var c=A.extend("sap.ushell.ui.footerbar.LogoutButton",{
metadata:{library:"sap.ushell"},
renderer:"sap.m.ButtonRenderer"
});
c.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://log");this.setTooltip(r.i18n.getText("signoutBtn_tooltip"));this.setText(r.i18n.getText("signoutBtn_title"));this.attachPress(this.logout);this.setEnabled();};
c.prototype.logout=function(){var s=true,i=false,l=new a({text:""});sap.ushell.Container.getGlobalDirty().done(function(d){s=false;if(i===true){l.exit();l=new a({text:""});}var R=r.i18n,o;if(d===sap.ushell.Container.DirtyState.DIRTY){o={message:R.getText("unsaved_data_warning_popup_message"),icon:I.WARNING,messageTitle:R.getText("unsaved_data_warning_popup_title")};}else{o={message:R.getText("signoutConfirmationMsg"),icon:I.QUESTION,messageTitle:R.getText("signoutMsgTitle")};}M.show(o.message,o.icon,o.messageTitle,[b.OK,b.CANCEL],function(e){if(e===b.OK){l.openLoadingScreen();l.showAppInfo(r.i18n.getText("beforeLogoutMsg"),null);sap.ushell.Container.logout();}},E.uid("confirm"));});if(s===true){l.openLoadingScreen();i=true;}};
c.prototype.setEnabled=function(e){if(!sap.ushell.Container){if(this.getEnabled()){L.warning("Disabling 'Logout' button: unified shell container not initialized",null,"sap.ushell.ui.footerbar.LogoutButton");}e=false;}A.prototype.setEnabled.call(this,e);};
return c;});
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.controller',["sap/ui/core/mvc/Controller","sap/base/Log","sap/ushell/resources","sap/ui/core/library","sap/ui/thirdparty/hasher"],function(C,L,r,c,h){"use strict";var V=c.ValueState;return C.extend("sap.ushell.ui.footerbar.SaveAsTile",{onInit:function(){var v=this.getView();v.getTitleInput().attachLiveChange(function(){if(this.getValue()===""){this.setValueStateText(r.i18n.getText("bookmarkTitleInputError"));this.setValueState(V.Error);}else{this.setValueState(V.None);}});},loadPersonalizedGroups:function(){return sap.ushell.Container.getServiceAsync("LaunchPage").then(function(a){return new Promise(function(b,d){a.getGroupsForBookmarks().done(b).fail(d);});}).then(function(b){var m=this.getView().getModel();m.setProperty("/groups",b);m.setProperty("/groups/length",b.length);}.bind(this)).catch(function(){L.error("SaveAsTile controller: Unable to determine targets for bookmark placement.");});},getLocalizedText:function(m,p){return p?r.i18n.getText(m,p):r.i18n.getText(m);},getBookmarkTileData:function(){var v=this.getView();var m=v.getModel();var o=v.getViewData();var s;if(v.oGroupsSelect&&v.oGroupsSelect.getSelectedItem()){s=v.oGroupsSelect.getSelectedItem().getBindingContext().getObject();}var u;if(o.customUrl){if(typeof(o.customUrl)==="function"){u=o.customUrl();}else{u=o.customUrl;}}else{u=h.getHash()?("#"+h.getHash()):window.location.href;}var d={title:m.getProperty("/title")||"",subtitle:m.getProperty("/subtitle")||"",url:u,icon:m.getProperty("/icon")||"",info:m.getProperty("/info")||"",numberUnit:m.getProperty("/numberUnit")||"",serviceUrl:typeof(o.serviceUrl)==="function"?o.serviceUrl():o.serviceUrl,serviceRefreshInterval:m.getProperty("/serviceRefreshInterval"),group:s,keywords:m.getProperty("/keywords")||""};d.title=d.title.substring(0,256).trim();d.subtitle=d.subtitle.substring(0,256).trim();d.info=d.info.substring(0,256).trim();return d;},onExit:function(){var v=this.getView();var t=v.getTileView();t.destroy();}});});
sap.ui.predefine('sap/ushell/ui/footerbar/SaveAsTile.view',["sap/m/FlexBox","sap/m/GenericTile","sap/m/Input","sap/m/Label","sap/m/library","sap/m/NumericContent","sap/m/Select","sap/m/TileContent","sap/ui/core/HTML","sap/ui/core/ListItem","sap/ui/core/mvc/View","sap/ui/model/BindingMode","sap/ui/thirdparty/jquery","sap/ushell/resources","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/footerbar/SaveAsTile.controller"],function(F,G,I,L,m,N,S,T,H,a,V,B,q,r,b){"use strict";var c=m.FlexJustifyContent;var d=m.FlexRendertype;var e=m.FlexAlignItems;return V.extend("sap.ushell.ui.footerbar.SaveAsTile",{getControllerName:function(){return"sap.ushell.ui.footerbar.SaveAsTile";},createContent:function(){this.oResourceBundle=r.i18n;this.viewData=this.getViewData()||{};this.appData=this.viewData.appData||{};this.oTitleInput=new I("bookmarkTitleInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoTitle_tooltip"),value:{path:"/title",mode:B.TwoWay}}).addStyleClass("sapUshellInputField");this.oTitleInput.addAriaLabelledBy("titleLbl");this.oSubTitleInput=new I("bookmarkSubTitleInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoSubTitle_tooltip"),value:{path:"/subtitle",mode:B.TwoWay}}).addStyleClass("sapUshellInputField");this.oSubTitleInput.addAriaLabelledBy("subtitleLbl");this.oInfoInput=new I("bookmarkInfoInput",{placeholder:this.oResourceBundle.getText("bookmarkDialogoDescription_tooltip"),value:{path:"/info",mode:B.TwoWay},visible:"{/showInfo}"}).addStyleClass("sapUshellInputField");this.oInfoInput.addAriaLabelledBy("infoLbl");var t;if(this.viewData.serviceUrl){t=new G({header:"{/title}",subheader:"{/subtitle}",size:"Auto",tileContent:[new T({size:"Auto",footer:"{/info}",unit:"{/numberUnit}",content:[new N({value:"{/numberValue}",truncateValueTo:5,icon:"{/icon}",withMargin:false,width:"100%"})]})]});}else{t=new G({header:"{/title}",subheader:"{/subtitle}",size:"Auto",tileContent:[new T({size:"Auto",footer:"{/info}",content:new N({icon:"{/icon}",value:" ",width:"100%",withMargin:false})})]});}this.setTileView(t);var f=new b({long:false,tileViews:[t],afterRendering:function(){var k=q(this.getDomRef()),l=k.find(".sapMGT");l.removeAttr("tabindex");}}).addStyleClass("sapUshellBookmarkFormPreviewTileMargin");var p=new H("previewBackgroundElement",{content:"<div class='sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor'></div>"});var h=new F("saveAsTileHBox",{items:[p,f],alignItems:e.Center,justifyContent:c.Center,renderType:d.Bare,visible:"{/showPreview}"}).addStyleClass("sapUshellShellBG").addStyleClass("sapUshellBookmarkFormPreviewBoxBottomMargin");this.oGroupsSelect=new S("groupsSelect",{items:{path:"/groups",template:new a({text:"{title}"})},width:"100%",visible:{parts:["/showGroupSelection","/groups"],formatter:function(k,l){if(k&&!(l&&l.length)){this.oController.loadPersonalizedGroups();}return k;}.bind(this)}});this.oGroupsSelect.addAriaLabelledBy("groupLbl");var P=new L("previewLbl",{text:this.oResourceBundle.getText("previewFld"),labelFor:h,visible:"{/showPreview}"});var o=new L("titleLbl",{required:true,text:" "+this.oResourceBundle.getText("titleFld"),labelFor:this.oTitleInput}).setLabelFor("bookmarkTitleInput");var s=new L("subtitleLbl",{text:this.oResourceBundle.getText("subtitleFld"),labelFor:this.oSubTitleInput}).setLabelFor("bookmarkSubTitleInput");var i=new L("infoLbl",{text:this.oResourceBundle.getText("tileSettingsDialog_informationField"),labelFor:this.oInfoInput,visible:"{/showInfo}"}).setLabelFor("bookmarkInfoInput");var g=this.oResourceBundle.getText("GroupListItem_label");var j=new L("groupLbl",{text:g,labelFor:this.oGroupsSelect,visible:"{/showGroupSelection}"}).setLabelFor("groupsSelect");return[P,h,o,this.oTitleInput,s,this.oSubTitleInput,i,this.oInfoInput,j,this.oGroupsSelect];},getTitleInput:function(){return this.oTitleInput;},getTileView:function(){return this.tileView;},setTileView:function(t){this.tileView=t;}});});
sap.ui.predefine('sap/ushell/ui/footerbar/SendAsEmailButton',["sap/base/Log","sap/m/Button","sap/m/ButtonRenderer","sap/ushell/Config","sap/ushell/resources"],function(L,B,a,C,r){"use strict";
var S=B.extend("sap.ushell.ui.footerbar.SendAsEmailButton",{
metadata:{library:"sap.ushell",properties:{beforePressHandler:{type:"any",group:"Misc",defaultValue:null},afterPressHandler:{type:"any",group:"Misc",defaultValue:null}}},
renderer:"sap.m.ButtonRenderer"
});
S.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://email");this.setText(r.i18n.getText("sendEmailBtn"));this.setTooltip(r.i18n.getText("sendEmailBtn_tooltip"));this.attachPress(function(){if(this.getBeforePressHandler()){this.getBeforePressHandler()();}this.sendAsEmailPressed(this.getAfterPressHandler());}.bind(this));};
S.prototype.sendAsEmailPressed=function(c){if(sap.ushell.Container.inAppRuntime()){sap.ui.require(["sap/ushell/appRuntime/ui5/AppRuntimeService"],function(b){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmailWithFLPButton",{bSetAppStateToPublic:true});});}else{var u=document.URL;var A=C.last("/core/shellHeader/application").title;var s=(A===undefined)?r.i18n.getText("linkToApplication"):r.i18n.getText("linkTo")+" '"+A+"'";sap.ushell.Container.getServiceAsync("AppState").then(function(o){o.setAppStateToPublic(u).done(function(n){sap.m.URLHelper.triggerEmail(null,s,n);}).fail(L.error);});}if(c){c();}};
return S;},true);
sap.ui.predefine('sap/ushell/ui/footerbar/SettingsButton',["sap/m/Button","sap/m/ButtonRenderer","sap/m/library","sap/ushell/resources","sap/ushell/ui/footerbar/AboutButton","sap/ushell/ui/footerbar/LogoutButton","sap/ushell/ui/footerbar/UserPreferencesButton"],function(B,a,m,r,A,L,U){"use strict";var P=m.PlacementType;
var S=B.extend("sap.ushell.ui.footerbar.SettingsButton",{
metadata:{library:"sap.ushell"},
renderer:"sap.m.ButtonRenderer"
});
S.prototype.init=function(){if(B.prototype.init){B.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://action-settings");this.setTooltip(r.i18n.getText("helpBtn_tooltip"));this.attachPress(this.showSettingsMenu);this.defaultMenuItems=[new A(),new U(),new L()];};
S.prototype.setMenuItems=function(b){this.menuItems=b;};
S.prototype.showSettingsMenu=function(){sap.ui.require(["sap/m/ActionSheet"],function(b){var o=new b({id:"settingsMenu",showHeader:false,buttons:(this.menuItems||[]).concat(this.defaultMenuItems)});o.setPlacement(P.Vertical);o.openBy(this);o.attachAfterClose(function(){o.removeAllButtons();o.destroy();});}.bind(this));};
return S;});
sap.ui.predefine('sap/ushell/ui/footerbar/UserPreferencesButton',["sap/base/Log","sap/m/Bar","sap/m/Button","sap/m/ButtonRenderer","sap/m/Dialog","sap/m/DisplayListItem","sap/m/library","sap/m/List","sap/m/Text","sap/m/ObjectIdentifier","sap/ui/core/IconPool","sap/ui/Device","sap/ui/layout/VerticalLayout","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/ActionItem","sap/ushell/ui/utils"],function(L,B,a,b,D,c,m,d,T,O,I,f,V,J,q,C,E,u,r,A,g,U){"use strict";var h=m.ButtonType;
var j=g.extend("sap.ushell.ui.footerbar.UserPreferencesButton",{
metadata:{library:"sap.ushell"},
renderer:"sap.m.ButtonRenderer"
});
j.prototype.init=function(){if(g.prototype.init){g.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://person-placeholder");this.translationBundle=r.i18n;this.setText(this.translationBundle.getText("userSettings"));this.setTooltip(this.translationBundle.getText("settings_tooltip"));this.attachPress(this.showUserPreferencesDialog);this.oModel=C.createModel("/core/userPreferences",J);this.setModel(this.oModel);};
j.prototype.createDialog=function(){var t=this;this.saveButton=this._createSaveButton();this.cancelButton=this._createCancelButton();this.oDialog=new D({id:"userPreferencesDialog",title:"{/dialogTitle}",contentWidth:"29.6rem",content:null,contentHeight:"17rem",buttons:[this.saveButton,this.cancelButton],afterClose:function(){this._destroyDialog();this.oUser.resetChangedProperties();}.bind(t),stretch:f.system.phone}).addStyleClass("sapUshellUserPreferencesDialog").addStyleClass("sapContrastPlus");this._addDialogBackButton();this.oDialog.setModel(this.getModel());this.oDialog.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_Dialog_Main_label"),writeToDom:true}));this.oDialog.addContent(this._getOriginalDialogContent());};
j.prototype._getOriginalDialogContent=function(){if(!this.oInitialContent){var o,e;o=this._getUserDetailsControl();e=this._getEntryListControl();this.oInitialContent=new V("userPreferencesLayout",{content:[o,e],width:"100%"});}return this.oInitialContent;};
j.prototype._getEntryListControl=function(){var e=this._getUserPrefEntriesTemplate(),x=this.getModel()&&this.getModel().getProperty("/enableHelp"),t=this,i,s=this.oUser.getFullName(),o,k=new d("userPrefEnteryList",{items:{path:"/entries",template:e}});k.addCustomData(new A({key:"aria-label",value:t.translationBundle.getText("Settings_EntryList_label")+s,writeToDom:true}));o=k.onAfterRendering;k.onAfterRendering=function(){var l=this.getItems(),n;o.apply(this,arguments);for(i=0;i<l.length;i++){n=l[i].getBindingContext().getPath();if(!t.getModel().getProperty(n+"/valueResult")){t._setEntryValueResult(n);}if(x){t._addXRayHelpId(n,l[i]);}}};return k;};
j.prototype._addXRayHelpId=function(e,l){var i=this.getModel().getProperty(e+"/entryHelpID");if(i){l.addStyleClass("help-id-"+i);}};
j.prototype._setEntryValueResult=function(e){var t=this,i=this.getModel().getProperty(e+"/editable"),v=this.getModel().getProperty(e+"/valueArgument");if(typeof v==="function"){this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("genericLoading"));this.getModel().setProperty(e+"/editable",false);var o=v();o.done(function(k){t.getModel().setProperty(e+"/editable",i);t.getModel().setProperty(e+"/visible",typeof(k)==="object"?!!k.value:true);t.getModel().setProperty(e+"/valueResult",typeof(k)==="object"?k.displayText:k);});o.fail(function(){t.getModel().setProperty(e+"/valueResult",t.translationBundle.getText("loadingErrorMessage"));});}else if(v){this.getModel().setProperty(e+"/valueResult",v);this.getModel().setProperty(e+"/editable",i);}else{this.getModel().setProperty(e+"/valueResult",this.translationBundle.getText("loadingErrorMessage"));}};
j.prototype._emitEntryOpened=function(e){var o=E.last("UserSettingsOpened")||{},p=e.split("/").pop();o[p]=true;E.emit("UserSettingsOpened",o);};
j.prototype._getUserPrefEntriesTemplate=function(){var t=this,i,p=function(e){var o={};o=q.extend(true,{},{},e);sap.ui.require(["sap/m/FlexBox","sap/m/FlexAlignItems","sap/m/FlexJustifyContent","sap/m/BusyIndicator"],function(F,k,l,n){var s=true,v,w,x=o.getSource().getLabel(),y=o.getSource().getBindingContext().getPath();t.getModel().setProperty("/activeEntryPath",y);t._setDetailedEntryModeMode(true,y,x,y);t.oDialog.removeAllContent();w=t.getModel().getProperty(y+"/contentResult");if(w){v=sap.ui.getCore().byId(w);t.oDialog.addContent(v);t._emitEntryOpened(y);}else{var z=null,G,S=true,H=false,K=t.getModel().getProperty(y+"/contentFunc");if(typeof K==="function"){t._emitEntryOpened(y);G=K();G.done(function(M){S=false;if(H===true){t.oDialog.removeAllContent();z.destroy();}if(M instanceof sap.ui.core.Control){t.getModel().setProperty(y+"/contentResult",M.getId());t.oDialog.addContent(M);}else{s=false;}});G.fail(function(){S=false;if(H===true){t.oDialog.removeAllContent();z.destroy();}s=false;});G.always(function(){if(s===false){var M=new F("userPrefErrorFlexBox",{height:"5rem",alignItems:k.Center,justifyContent:l.Center,items:[new T("userPrefErrorText",{text:t.translationBundle.getText("loadingErrorMessage")})]});t.getModel().setProperty(y+"/contentResult",M.getId());t.oDialog.addContent(M);}});if(S===true){z=new n("userPrefLoadingBusyIndicator",{size:"2rem"});t.oDialog.addContent(z);H=true;}}}});};i=new c({label:"{title}",value:"{valueResult}",tooltip:{path:"valueResult",formatter:function(v){return typeof(v)==="string"?v:"";}},type:{path:"editable",formatter:function(e){return(e===true)?"Navigation":"Inactive";}},visible:{path:"visible",formatter:function(v){return(v!==undefined)?v:true;}},press:p,customData:new A({key:"aria-label",value:{parts:[{path:"title"},{path:"valueResult"}],formatter:function(s,v){v=v||"";return s+" "+v;}},writeToDom:true})});return i;};
j.prototype._getUserDetailsControl=function(){return new O({title:this.oUser.getFullName(),text:this.oUser.getEmail()}).addStyleClass("sapUshellUserPrefUserIdentifier");};
j.prototype._createCancelButton=function(){var t=this;return new a({id:"cancelButton",text:{parts:["/entries"],formatter:function(e){if(!e){return"";}var i=e.some(function(o){return o.editable;});return i>0?t.translationBundle.getText("cancelBtn"):t.translationBundle.getText("close");}},press:t._dialogCancelButtonHandler.bind(t),visible:true});};
j.prototype._createSaveButton=function(){var t=this;return new a({id:"saveButton",text:this.translationBundle.getText("saveBtn"),type:h.Emphasized,press:t._dialogSaveButtonHandler.bind(t),visible:{parts:["/entries"],formatter:function(e){if(!e){return false;}return e.some(function(o){return o.editable;});}}});};
j.prototype._setDetailedEntryModeMode=function(i,e,k,l){this.getModel().setProperty("/isDetailedEntryMode",!!i);this.getModel().setProperty("/dialogTitle",k);};
j.prototype.showUserPreferencesDialog=function(){this.oUser=sap.ushell.Container.getUser();this.createDialog();this.oDialog.open();};
j.prototype._dialogBackButtonHandler=function(){var t=this;t.getModel().setProperty("/isDetailedEntryMode",false);t.getModel().setProperty("/dialogTitle",t.translationBundle.getText("userSettings"));t.oDialog.removeAllContent();t.oDialog.addContent(t._getOriginalDialogContent());t._setEntryValueResult(t.getModel().getProperty("/activeEntryPath"));t.getModel().setProperty("/activeEntryPath",null);};
j.prototype._destroyDialog=function(){this.oHeadBar.destroy();this.oInitialContent.destroy();this.oInitialContent=null;this._modelCleanUpToInitial();this._entriesCleanUp();this.oDialog.destroy();this.saveButton.destroy();this.cancelButton.destroy();};
j.prototype._entriesCleanUp=function(){var i,e=this.getModel().getProperty("/entries"),s,o;for(i=0;i<e.length;i++){s=e[i].contentResult;delete e[i].contentResult;if(s){o=sap.ui.getCore().byId(s);o.destroy();o=null;}e[i].valueResult=null;}this.getModel().setProperty("/entries",e);};
j.prototype._modelCleanUpToInitial=function(){this.getModel().setProperty("/isDetailedEntryMode",false);this.getModel().setProperty("/dialogTitle",this.translationBundle.getText("userSettings"));};
j.prototype._dialogSaveButtonHandler=function(){var t=this,i,e=this.getModel().getProperty("/entries"),s=U.saveUserPreferenceEntries(e);i=this.getModel().getProperty("/isDetailedEntryMode");if(i){this.getModel().setProperty("/activeEntryPath",null);}s.done(function(){t._showSaveMessageToast();});s.fail(function(k){var l,n="";if(k.length===1){l=t.translationBundle.getText("savingEntryError")+" ";}else{l=t.translationBundle.getText("savingEntriesError")+"\n";}k.forEach(function(o){l+=o.entry+"\n";n+="Entry: "+o.entry+" - Error message: "+o.message+"\n";});sap.ushell.Container.getServiceAsync("Message").then(function(M){M.error(l,t.translationBundle.getText("Error"));});L.error("Failed to save the following entries",n,"sap.ushell.ui.footerbar.UserPreferencesButton");});this.oDialog.close();this._destroyDialog();};
j.prototype._dialogCancelButtonHandler=function(){var i,e=this.getModel().getProperty("/entries");for(i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this.oDialog.close();this._destroyDialog();};
j.prototype._addDialogBackButton=function(){var t=this,o=new a("userPrefBackBtn",{visible:"{/isDetailedEntryMode}",icon:I.getIconURI("nav-back"),press:t._dialogBackButtonHandler.bind(t),tooltip:this.translationBundle.getText("feedbackGoBackBtn_tooltip")}),e=new T("userPrefTitle",{text:"{/dialogTitle}"});this.oHeadBar=new B({contentLeft:[o],contentMiddle:[e]});this.oDialog.setCustomHeader(this.oHeadBar);};
j.prototype._showSaveMessageToast=function(){var t=this;sap.ui.require(["sap/m/MessageToast"],function(M){var e=t.translationBundle.getText("savedChanges");M.show(e,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});};
return j;});
sap.ui.predefine('sap/ushell/ui/horizon/NewDesignSwitch',["sap/ui/core/Control","sap/ushell/Config","sap/m/Label","sap/m/Switch","sap/ushell/resources","sap/ushell/ui/horizon/utils"],function(C,a,L,S,r,u){"use strict";var c="/core/shellHeader/newDesignSwitchActive";
var N=C.extend("sap.ushell.ui.horizon.NewDesignSwitch",{metadata:{library:"sap.ushell",properties:{state:{type:"boolean",defaultValue:false}}}});
N.prototype.getLabelControl=function(){if(!this._oLabel){this._oLabel=new L(this.getId()+"-lbl",{text:r.i18n.getText("NewDesignSwitch.Label")});this._oLabel.addStyleClass("sapUshellNDSLabel");this._oLabel.setLabelFor(this.getSwitchControl().getId());this._oLabel.setParent(this);}return this._oLabel;};
N.prototype.getSwitchControl=function(){var i=this.getId()+"-switch";if(!this._oSwitch){if(sap.ui.getCore().byId(i)){sap.ui.getCore().byId(i).destroy();}this._oSwitch=new S(i,{state:false,customTextOn:" ",customTextOff:" ",tooltip:r.i18n.getText("NewDesignSwitch.Label"),change:this.onChange.bind(this)});this._oSwitch.addStyleClass("sapUshellNDSSwitch");this._oSwitch.setParent(this);}return this._oSwitch;};
N.prototype.setState=function(s){this.getSwitchControl().setState(!!s);this.setProperty("state",!!s,true);};
N.prototype.init=function(){this.getSwitchControl();this.getLabelControl();var A=a.last(c);this.setState(!!A);a.on(c).do(this.setState.bind(this));};
N.prototype.exit=function(){if(this._oLabel){this._oLabel.destroy();this._oLabel=null;}if(this._oSwitch){this._oSwitch.destroy();this._oSwitch=null;}};
N.prototype.onChange=function(e){var s=!!e.getParameter("state");this.setProperty("state",s);a.emit(c,s);u.toggleNewDesign(s);};
return N;},true);
sap.ui.predefine('sap/ushell/ui/horizon/NewDesignSwitchItem',["sap/ushell/resources","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/Config","sap/ushell/ui/horizon/utils","sap/ui/core/InvisibleText"],function(r,S,C,u,I){"use strict";var n;var i=false;var c="/core/shellHeader/newDesignSwitchActive";
function _(A){i=!!A;if(n){n.setIcon(b());n.setAriaLabel(d());n._oAriaLabel.setText(d());}}
function a(){i=!i;C.emit(c,i);u.toggleNewDesign(i);}
function b(){return i?"sap-icon://accept":"sap-icon://decline";}
function d(){var t=i?"NewDesignSwitch.activated":"NewDesignSwitch.deactivated";return r.i18n.getText(t);}
function g(){if(!n){n=new S({id:"newDesignSwitchItem",text:r.i18n.getText("NewDesignSwitch.Label"),press:a});n._oAriaLabel=new I("newDesignSwitchItem-ariaLabel").toStatic();_(C.last(c));C.on(c).do(_);}return n;}
return{getSwitchItem:g};},true);
sap.ui.predefine('sap/ushell/ui/horizon/NewDesignSwitchRenderer',["sap/ushell/resources","sap/ui/Device"],function(r,D){"use strict";var N={apiVersion:2};
N.render=function(a,c){a.openStart("div",c);if(!c.getVisible()){a.style("display","none");}a.class("sapUshellNDS");a.class("sapUiSizeCompact");a.openEnd();a.renderControl(c.getLabelControl());a.renderControl(c.getSwitchControl());a.close("div");};
return N;},true);
sap.ui.predefine('sap/ushell/ui/horizon/utils',["sap/m/MessageToast","sap/ushell/resources"],function(M,r){"use strict";
function t(a){sap.ushell.Container.getServiceAsync("UserInfo").then(function(u){if(a){u.activateNewDesign().then(function(){M.show(r.i18n.getText("NewDesignSwitch.activated"));});}else{u.deactivateNewDesign().then(function(){M.show(r.i18n.getText("NewDesignSwitch.deactivated"));});}});}
return{toggleNewDesign:t};},true);
sap.ui.predefine('sap/ushell/ui/launchpad/AccessibilityCustomData',["sap/ui/core/CustomData"],function(C){"use strict";
var A=C.extend("sap.ushell.ui.launchpad.AccessibilityCustomData",{metadata:{library:"sap.ushell"}});
A.prototype._checkWriteToDom=function(){var i=sap.ui.getCore().getConfiguration().getAccessibility();if(!i){return null;}var k=this.getKey();var c=C.prototype._checkWriteToDom.apply(this,arguments);if(c&&(k.indexOf("aria-")===0||k==="role"||k==="tabindex")){c.key=c.key.replace(/^data-/,"");}return c;};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/ActionItem',["sap/m/Button","sap/m/ButtonRenderer","sap/m/library"],function(B,a,m){"use strict";var b=m.ButtonType;
var A=B.extend("sap.ushell.ui.launchpad.ActionItem",{
metadata:{library:"sap.ushell",properties:{actionType:{type:"string",group:"Appearance",defaultValue:"standard"}},events:{press:{},afterRendering:{}}},
renderer:"sap.m.ButtonRenderer"
});
A.prototype.setActionType=function(t){if(!this.sOrigType){this.sOrigType=this.getType();}this.setType(t==="action"?b.Unstyled:this.sOrigType||b.Standard);this.setProperty("actionType",t,true);};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItem',["sap/ui/core/Control","sap/ushell/library","sap/ushell/ui/launchpad/AnchorItemRenderer"],function(C){"use strict";
var A=C.extend("sap.ushell.ui.launchpad.AnchorItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},selected:{type:"boolean",group:"Misc",defaultValue:false},groupId:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},helpId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true},isGroupRendered:{type:"boolean",group:"Misc",defaultValue:false},isGroupDisabled:{type:"boolean",group:"Misc",defaultValue:false},locked:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{},afterRendering:{}}}});
A.prototype.init=function(){this.addDelegate({onAfterRendering:this.fireAfterRendering.bind(this),onclick:this.firePress.bind(this),onsapenter:this.firePress.bind(this),onsapspace:function(e){e.preventDefault();this.firePress();}.bind(this)});};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorItemRenderer',function(){"use strict";var A={apiVersion:2,render:function(r,a){var g=a.getGroupId(),s=a.getSelected();r.openStart("li",a);r.attr("modelGroupId",g);r.attr("role","tab");r.attr("aria-selected",s);r.class("sapUshellAnchorItem");if(a.getHelpId()){if(a.getDefaultGroup()){r.class("help-id-homeAnchorNavigationBarItem");}else{r.class("help-id-anchorNavigationBarItem");}r.attr("data-help-id",a.getHelpId());}if(s){r.attr("tabindex","0");r.class("sapUshellAnchorItemSelected");}if(!a.getVisible()||!a.getIsGroupVisible()){r.class("sapUshellShellHidden");}r.openEnd();r.openStart("div",a.getId()+"-inner");r.class("sapUshellAnchorItemInner");if(a.getIsGroupDisabled()){r.class("sapUshellAnchorItemDisabled");}r.openEnd();r.text(a.getTitle());r.close("div");r.close("li");}};return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBar',["sap/m/Bar","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/m/Button","sap/ushell/resources","sap/ushell/library","./AnchorNavigationBarRenderer"],function(B,D,q,a,b,r){"use strict";
var A=B.extend("sap.ushell.ui.launchpad.AnchorNavigationBar",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},selectedItemIndex:{type:"int",group:"Misc",defaultValue:0},overflowEnabled:{type:"boolean",group:"Misc",defaultValue:true}},aggregations:{groups:{type:"sap.ushell.ui.launchpad.AnchorItem",multiple:true,singularName:"group"}},events:{afterRendering:{},itemPress:{}}}});
A.prototype.init=function(){D.resize.attachHandler(this.reArrangeNavigationBarElements,this);this.bGroupWasPressed=false;this.bIsRtl=sap.ui.getCore().getConfiguration().getRTL();this._bIsRenderedCompletely=false;};
A.prototype.handleExit=function(){if(this.oPopover){this.oPopover.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}};
A.prototype.onAfterRendering=function(){if(this._bIsRenderedCompletely){this.reArrangeNavigationBarElements();q(".sapUshellAnchorNavigationBarItemsScroll").scroll(this.setNavigationBarItemsVisibility.bind(this));}};
A.prototype.openOverflowPopup=function(){var o=q(".sapUshellAnchorItemOverFlow").hasClass("sapUshellAnchorItemOverFlowOpen");if(this.oOverflowButton&&!o){this.oOverflowButton.firePress();}};
A.prototype.closeOverflowPopup=function(){if(this.oPopover){this.oPopover.close();}};
A.prototype.reArrangeNavigationBarElements=function(){this.anchorItems=this.getVisibleGroups();var s=this.getSelectedItemIndex()||0;if(this.anchorItems.length){this.adjustItemSelection(s);}if(D.system.phone&&this.anchorItems.length){this.anchorItems.forEach(function(i){i.setIsGroupVisible(false);});this.anchorItems[this.getSelectedItemIndex()].setIsGroupVisible(true);}else{setTimeout(function(){this.setNavigationBarItemsVisibility();}.bind(this),200);}this._adjustAnchorBarAriaProperties(this.anchorItems);};
A.prototype._scrollToGroupByGroupIndex=function(g,s){var S=D.system.tablet?".sapUshellAnchorNavigationBarItemsScroll":".sapUshellAnchorNavigationBarItems";var c=document.documentElement.querySelector(S);var o=this.anchorItems[g].getDomRef();if(c&&o){var C=c.getBoundingClientRect();var i=o.getBoundingClientRect();var $=q(c);var d=this.bIsRtl?$.scrollLeftRTL():c.scrollLeft;var x;if(i.left<C.left){x=i.left-C.left-16;}else if(i.right>C.right){x=i.right-C.right+16;}if(x){if(this.bIsRtl){$.scrollLeftRTL(d+x);}else{c.scrollLeft=d+x;}}this.setNavigationBarItemsVisibility();}};
A.prototype.setNavigationBarItemsVisibility=function(){if(!D.system.phone){this.setNavigationBarItemsVisibilityOnDesktop();}else if(this.anchorItems&&this.anchorItems.length>0){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");var s=this.getSelectedItemIndex()||0;if(this.oPopover){this.oPopover.setTitle(this.anchorItems[s].getTitle());}}};
A.prototype.setNavigationBarItemsVisibilityOnDesktop=function(){if(this.anchorItems.length&&(!this.isMostRightAnchorItemVisible()||!this.isMostLeftAnchorItemVisible())){this.oOverflowButton.removeStyleClass("sapUshellShellHidden");q(".sapUshellAnchorItemOverFlow").removeClass("sapUshellShellHidden");}else if(this.oOverflowButton){this.oOverflowButton.addStyleClass("sapUshellShellHidden");q(".sapUshellAnchorItemOverFlow").addClass("sapUshellShellHidden");}if(this.bIsRtl){if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}}else{if(this.anchorItems.length&&!this.isMostLeftAnchorItemVisible()){this.oOverflowLeftButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowLeftButton){this.oOverflowLeftButton.addStyleClass("sapUshellShellHidden");}if(this.anchorItems.length&&!this.isMostRightAnchorItemVisible()){this.oOverflowRightButton.removeStyleClass("sapUshellShellHidden");}else if(this.oOverflowRightButton){this.oOverflowRightButton.addStyleClass("sapUshellShellHidden");}}q(".sapUshellAnchorItem.firstItem").removeClass("firstItem");var j=q(".sapUshellAnchorItem").filter(":visible").eq(0);j.addClass("firstItem");};
A.prototype.adjustItemSelection=function(s){setTimeout(function(){if(this.anchorItems&&this.anchorItems.length){this.anchorItems.forEach(function(i){i.setSelected(false);});if(s>=0&&s<this.anchorItems.length){this.anchorItems[s].setSelected(true);this._scrollToGroupByGroupIndex(s);}}}.bind(this),200);};
A.prototype.isMostRightAnchorItemVisible=function(){var j=q(".sapUshellAnchorNavigationBarInner"),n=!a(j)?j.width():0,c=!a(j)&&j.offset()?j.offset().left:0,l=this.bIsRtl?this.anchorItems[0].getDomRef():this.anchorItems[this.anchorItems.length-1].getDomRef(),d=!a(l)?q(l).width():0,e;if(d<0){d=80;}e=l&&q(l).offset()?q(l).offset().left:0;return Math.ceil(e)+d<=c+n;};
A.prototype.isMostLeftAnchorItemVisible=function(){var j=q(".sapUshellAnchorNavigationBarInner"),n=!a(j)&&j.offset()&&j.offset().left||0,f=this.bIsRtl?this.anchorItems[this.anchorItems.length-1].getDomRef():this.anchorItems[0].getDomRef(),c=!a(f)&&q(f).offset()?q(f).offset().left:0;return Math.ceil(c)>=n;};
A.prototype.setSelectedItemIndex=function(s){if(s!==undefined){this.setProperty("selectedItemIndex",s,true);}};
A.prototype.setOverflowEnabled=function(e){this.setProperty("overflowEnabled",e);if(this.oOverflowButton){this.oOverflowButton.setEnabled(e);}};
A.prototype._getOverflowLeftArrowButton=function(){if(!this.oOverflowLeftButton){this.oOverflowLeftButton=new b({icon:"sap-icon://slim-arrow-left",tooltip:r.i18n.getText("scrollToTop"),press:function(){this._scrollToGroupByGroupIndex(0);}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowLeftButton._bExcludeFromTabChain=true;}return this.oOverflowLeftButton;};
A.prototype._getOverflowRightArrowButton=function(){if(!this.oOverflowRightButton){this.oOverflowRightButton=new b({icon:"sap-icon://slim-arrow-right",tooltip:r.i18n.getText("scrollToEnd"),press:function(){this._scrollToGroupByGroupIndex(this.anchorItems.length-1);}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowRightButton._bExcludeFromTabChain=true;}return this.oOverflowRightButton;};
A.prototype._getOverflowButton=function(){if(!this.oOverflowButton){this.oOverflowButton=new b("sapUshellAnchorBarOverflowButton",{icon:"sap-icon://slim-arrow-down",tooltip:r.i18n.getText("more_groups"),enabled:this.getOverflowEnabled(),press:function(){this._togglePopover();}.bind(this)}).addStyleClass("sapUshellShellHidden");this.oOverflowButton._bExcludeFromTabChain=true;}return this.oOverflowButton;};
A.prototype._togglePopover=function(){sap.ui.require(["sap/m/Popover","sap/ui/model/Filter","sap/ushell/ui/launchpad/GroupListItem","sap/m/List","sap/m/library"],function(P,F,G,L,m){var c=m.ListMode;if(!this.oPopover){this.oList=new L({mode:c.SingleSelectMaster,rememberSelections:false,selectionChange:function(e){this.fireItemPress({group:e.getParameter("listItem")});this.oPopover.close();}.bind(this)});this.oPopover=new P("sapUshellAnchorBarOverflowPopover",{showArrow:false,showHeader:false,placement:"Left",content:[this.oList],horizontalScrolling:false,beforeOpen:function(){var j=q(".sapUshellAnchorItemOverFlow"),i=sap.ui.getCore().getConfiguration().getRTL(),o=i?-1*j.outerWidth():j.outerWidth();this.setOffsetX(o);},afterClose:function(){q(".sapUshellAnchorItemOverFlow").removeClass("sapUshellAnchorItemOverFlowOpen");q(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",false);}}).addStyleClass("sapUshellAnchorItemsPopover").addStyleClass("sapContrastPlus");}if(this.oPopover.isOpen()){this.oPopover.close();}else{this.anchorItems=this.getVisibleGroups();this.oList.setModel(this.getModel());var d=this.getModel().getProperty("/tileActionModeActive");var v=new F("","EQ","a");v.fnTest=function(i){if(!i.visibilityModes[d?1:0]){return false;}return i.isGroupVisible||d;};this.oList.bindItems({path:"/groups",template:new G({title:"{title}",groupId:"{groupId}",index:"{index}"}),filters:[v]});var s=q(".sapUshellAnchorItemSelected").attr("id");var S=sap.ui.getCore().byId(s);this.oList.getItems().forEach(function(i){if(S.mProperties.groupId===i.mProperties.groupId){i.addStyleClass("sapUshellAnchorPopoverItemSelected");}else{i.addStyleClass("sapUshellAnchorPopoverItemNonSelected");}});q(".sapUshellAnchorItemOverFlow").toggleClass("sapUshellAnchorItemOverFlowPressed",true);this.oPopover.openBy(this.oOverflowButton);}}.bind(this));};
A.prototype.getVisibleGroups=function(){return this.getGroups().filter(function(g){return g.getVisible();});};
A.prototype._adjustAnchorBarAriaProperties=function(g){var i;for(i=0;i<g.length;i++){var j=q(g[i].getDomRef());j.attr("aria-posinset",i+1);j.attr("aria-setsize",g.length);}};
A.prototype._setRenderedCompletely=function(R){this._bIsRenderedCompletely=R;};
A.prototype.handleAnchorItemPress=function(e){this.bGroupWasPressed=true;this.fireItemPress({group:e.getSource(),manualPress:true});};
A.prototype.exit=function(){if(this.oOverflowLeftButton){this.oOverflowLeftButton.destroy();}if(this.oOverflowRightButton){this.oOverflowRightButton.destroy();}if(this.oOverflowButton){this.oOverflowButton.destroy();}if(this.oPopover){this.oPopover.destroy();}};
return A;});
sap.ui.predefine('sap/ushell/ui/launchpad/AnchorNavigationBarRenderer',["sap/ui/thirdparty/jquery","sap/ushell/resources"],function(q,r){"use strict";var A={};
A.render=function(R,c){R.write("<div");R.writeAttribute("data-sap-ui-customfastnavgroup","true");R.addClass("sapUshellAnchorNavigationBar");R.writeClasses();R.writeControlData(c);R.write(">");R.write("<div");R.addClass("sapUshellAnchorNavigationBarInner");R.writeClasses();R.write(">");if(c.getGroups().length>0){c._setRenderedCompletely(true);R.write("<div");R.addClass("sapUshellAnchorLeftOverFlowButton");R.writeClasses();R.writeAccessibilityState(c._getOverflowLeftArrowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowLeftArrowButton());R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorNavigationBarItems");R.writeClasses();R.write(">");R.write("<ul");R.addClass("sapUshellAnchorNavigationBarItemsScroll");R.writeClasses();R.writeAccessibilityState(c,{role:"tablist",label:r.i18n.getText("AnchorNavigationBar_AriaLabel")});R.write(">");this.renderAnchorNavigationItems(R,c);R.write("</ul>");R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorRightOverFlowButton");R.writeClasses();R.writeAccessibilityState(c._getOverflowRightArrowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowRightArrowButton());R.write("</div>");R.write("<div");R.addClass("sapUshellAnchorItemOverFlow");R.writeClasses();R.writeAccessibilityState(c._getOverflowButton(),{"hidden":true});R.write(">");R.renderControl(c._getOverflowButton());R.write("</div>");}R.write("</div>");R.write("</div>");};
A.renderAnchorNavigationItems=function(R,c){var g=c.getGroups();q.each(g,function(){R.renderControl(this);});};
A.shouldAddIBarContext=function(){return false;};
return A;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogEntryContainer',["sap/base/Log","sap/ui/core/Control","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/TileContainerUtils"],function(L,C,u,r,T){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.CatalogEntryContainer",{
metadata:{library:"sap.ushell",properties:{header:{type:"string",group:"Appearance",defaultValue:null},catalogSearchTerm:{type:"string",group:"Appearance",defaultValue:null},catalogTagSelector:{type:"object",group:"Appearance",defaultValue:null}},aggregations:{appBoxesContainer:{type:"sap.ushell.ui.appfinder.AppBox",multiple:true},customTilesContainer:{type:"sap.ushell.ui.launchpad.Tile",multiple:true}}},
renderer:{apiVersion:2,render:function(b,c){b.openStart("div",c);b.attr("aria-labeledby",c.getId()+"-title");b.attr("role","group");b.class("sapUshellTileContainer");b.class("sapUshellCatalogTileContainer");b.openEnd();b.openStart("div");b.class("sapUshellTileContainerContent");b.attr("tabindex","-1");b.openEnd();var h=c.getHeader();if(h){if(r.i18n.hasText(h)){h=r.i18n.getText(h);}b.openStart("div");b.class("sapUshellTileContainerHeader");b.class("sapUshellCatalogTileContainerHeader");b.attr("id",c.getId()+"-groupheader");b.openEnd();b.openStart("div");b.class("sapUshellCatalogTileContainerHeaderInner");b.attr("id",c.getId()+"-title");b.openEnd();b.openStart("h2");b.class("sapUshellContainerTitle");b.class("sapUshellCatalogContainerTitle");b.attr("title",h);b.attr("aria-level","2");b.openEnd();b.text(h);b.close("h2");b.close("div");b.close("div");}var A=c.getAppBoxesContainer();var i;var d=c.getCustomTilesContainer();if(A.length>0||d.length>0){b.openStart("ul");b.class("sapUshellInner");b.openEnd();for(i=0;i<A.length;i++){b.renderControl(A[i]);}if(A.length&&d.length){b.voidStart("br");b.voidEnd();}for(i=0;i<d.length;i++){b.renderControl(d[i]);}b.close("ul");}b.close("div");b.close("div");}}
});
a.prototype.setAfterHandleElements=function(c){this.onAfterHandleElements=c;};
a.prototype.onAfterUpdate=function(c){this.fnCallback=c;};
a.prototype.updateAggregation=function(R){L.debug("Updating CatalogEntryContainer. Reason: ",R);};
a.prototype.addNewItem=function(e,n){if(this.catalogState[n]!=="full"&&this.getAllocatedUnits&&!this.getAllocatedUnits()){this.catalogState[n]="partial";return false;}if(n==="customTilesContainer"){var b=e.getObject&&e.getObject().src;if(b!==undefined){var c;if(b.Chip!==undefined&&b.Chip.getContract!==undefined){c=b.Chip.getContract("preview");}else if(b.getContract!==undefined){c=b.getContract("preview");}if(c!==undefined){c.setEnabled(true);}}sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){l.getCatalogTileViewControl(e.getProperty("src")).done(function(d){e.getProperty("content")[0]=d;});});}var N=T.createNewItem.bind(this)(e,n);T.addNewItem.bind(this)(N,n);var i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer(),p=e.getPath();this.indexingMaps[n].onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
a.prototype.getNumberResults=function(){return{nAppboxes:this.nNumberOfVisibileElements.appBoxesContainer,nCustom:this.nNumberOfVisibileElements.customTilesContainer};};
a.prototype.handleElements=function(R){var n=R,b=this.mBindingInfos[n].binding,B=b.getContexts(),i,s,c;if(!this.catalogState){this.catalogState={};}if(!this.catalogState[R]){this.catalogState[R]="start";}if(!this.indexingMaps){this.indexingMaps={};}if(!this.nNumberOfVisibileElements){this.nNumberOfVisibileElements=[];}if(!this.nNumberOfVisibileElements.customTilesContainer){this.nNumberOfVisibileElements.customTilesContainer=0;}if(!this.nNumberOfVisibileElements.appBoxesContainer){this.nNumberOfVisibileElements.appBoxesContainer=0;}if(!this.filters){this.filters={};}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();this.indexingMaps[n]=T.indexOnScreenElements(i,false);c=T.markVisibleOnScreenElementsSearchCatalog(B,this.indexingMaps[n],true);if(T.createMissingElementsInOnScreenElementsSearchCatalog(this.indexingMaps[n],B,c,this.addNewItem.bind(this),i,this.filters[n],n,this.processFiltering.bind(this))){if(this.getAllocatedUnits&&this.getAllocatedUnits()){this.catalogState[R]="full";}}i=(n==="appBoxesContainer")?this.getAppBoxesContainer():this.getCustomTilesContainer();s=T.showHideTilesAndHeaders(this.indexingMaps[n],i);this.nNumberOfVisibileElements[n]=s.nCountVisibElelemnts;if(this.fnCallback){this.fnCallback(this);}if(this.onAfterHandleElements){this.onAfterHandleElements(this);}};
a.prototype.processFiltering=function(e,n){var p=e.getPath();if(n){var i=this.indexingMaps[n].onScreenPathIndexMap[p];if(i.isVisible&&this.currElementVisible){this.currElementVisible();}}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/CatalogsContainer',["sap/base/Log","sap/ui/core/Control","sap/ui/performance/Measurement","sap/ushell/library","sap/ushell/ui/launchpad/TileContainerUtils"],function(L,C,M,u,T){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.CatalogsContainer",{
metadata:{library:"sap.ushell",properties:{categoryFilter:{type:"string",defaultValue:"ALL"},categoryAllocateTiles:{type:"int",defaultValue:"0"}},aggregations:{catalogs:{type:"sap.ushell.ui.launchpad.CatalogEntryContainer",multiple:true}}},
renderer:{apiVersion:2,render:function(r,c){var b=c.getCatalogs();r.openStart("div",c);r.class("sapUshellCatalogsContainer");r.openEnd();for(var i=0,l=b.length;i<l;++i){r.renderControl(b[i]);}r.close("div");}}
});
a.prototype.onBeforeRendering=function(){if(this.getCatalogs().length){this.setBusy(false);}};
a.prototype.setPagingManager=function(p){M.start("FLP:DashboardManager.CatalogsRendering","CatalogsRendering","FLP");M.pause("FLP:DashboardManager.CatalogsRendering");this.oPagingManager=p;};
a.prototype.updateAllocatedUnits=function(n){this.nAllocatedUnits=n;};
a.prototype.applyPagingCategoryFilters=function(n,c){var i=this.getCatalogs();this.nAllocatedUnits=n;if(c&&c!=="All"){this.sCatalogTerm=c;}else{this.sCatalogTerm="";}if(!this.filters){this.filters={};}if(!this.filters.catalogEntry){this.filters.catalogEntry=function(e){var p=e.getPath(),I=e.getProperty("title")===this.sCatalogTerm,b;if(!this.sCatalogTerm){return;}b=this.indexingMaps.onScreenPathIndexMap[p];if(b){b.isVisible=I;}}.bind(this);}if(!this.filters.pagination){this.filters.pagination=function(e){var p=e.getPath(),b;b=this.indexingMaps.onScreenPathIndexMap[p];if(!this.nAllocatedUnits){b.isVisible=false;}}.bind(this);}if(!this.indexingMaps){return;}this.indexingMaps=T.indexOnScreenElements(i);T.applyFilterOnAllItems(this.mBindingInfos.catalogs,this.filters,this.processFiltering.bind(this));if(this.indexingMaps){T.showHideTilesAndHeaders(this.indexingMaps,this.getCatalogs());}};
a.prototype.processFiltering=function(e){var c=this.getCatalogs(),p=e.getPath(),i=this.indexingMaps.onScreenPathIndexMap[p],o=c[i.aItemsRefrenceIndex],b;if(i.isVisible&&(!this.catalogPagination[p]||this.catalogPagination[p]==="start")){if(this.catalogPagination[p]===undefined){this.catalogPagination[p]="start";o.catalogState={};}else if(this.catalogPagination[p]==="start"){var n=o.nNumberOfVisibileElements;this.nAllocatedUnits+=(n.appBoxesContainer+n.customTilesContainer);}b=this.nAllocatedUnits;o.handleElements("appBoxesContainer");o.handleElements("customTilesContainer");if(o.catalogState.appBoxesContainer==="full"&&o.catalogState.customTilesContainer==="full"){this.catalogPagination[p]="full";}if(b-this.nAllocatedUnits>0){this.bSearchResults=true;}else{i.isVisible=false;}}else if(i.isVisible&&this.catalogPagination[p]==="full"){var d=o.nNumberOfVisibileElements;var f=d.appBoxesContainer+d.customTilesContainer;if(f===0){i.isVisible=false;}}};
a.prototype.resetCatalogPagination=function(){this.catalogPagination={};};
a.prototype.updateAggregation=function(r){L.debug("Updating TileContainer. Reason: ",r);try{M.resume("FLP:DashboardManager.CatalogsRendering");this.filterElements();M.pause("FLP:DashboardManager.CatalogsRendering");}catch(e){C.prototype.updateAggregation.apply(this,arguments);}};
a.prototype.addNewItem=function(e,n){var N,b,i,p=e.getPath();N=T.createNewItem.bind(this)(e,n);if(!N.filters){N.filters={};N.filters.appBoxesContainer={};N.filters.customTilesContainer={};N.filters.appBoxesContainer.pagination=function(c){var d=this.indexingMaps.appBoxesContainer.onScreenPathIndexMap[c.getPath()];if(this.getAllocatedUnits){d.isVisible=!!this.getAllocatedUnits();}}.bind(N);N.filters.customTilesContainer.pagination=function(c){var d=this.indexingMaps.customTilesContainer.onScreenPathIndexMap[c.getPath()];if(this.getAllocatedUnits){d.isVisible=!!this.getAllocatedUnits();}}.bind(N);}N.nAllocatedUnits=this.nAllocatedUnits;N.getAllocatedUnits=function(){return this.nAllocatedUnits;}.bind(this);N.elementFiltered=function(c){b=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits+=c*b;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.elementsVisible=function(c){b=this.oPagingManager.getSizeofSupportedElementInUnits("tile");this.nAllocatedUnits-=c*b;if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.newElementCreated=function(E,c){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);N.currElementVisible=function(){this.nAllocatedUnits-=this.oPagingManager.getSizeofSupportedElementInUnits("tile");if(this.nAllocatedUnits<=0){this.nAllocatedUnits=0;}}.bind(this);T.addNewItem.bind(this)(N,n);i=this.getCatalogs();this.indexingMaps.onScreenPathIndexMap[p]={aItemsRefrenceIndex:i.length-1,isVisible:true};return true;};
a.prototype.handleFilters=function(){if(!this.catalogPagination){this.catalogPagination={};}if(!this.catalogsElementsMap){this.catalogsElementsMap={};}if(!this.filters){this.filters={};}};
a.prototype.setHandleSearchCallback=function(h){this.handleSearchCallback=h;};
a.prototype.filterElements=function(){var n="catalogs",b=this.mBindingInfos[n].binding,B=b.getContexts(),i=this.getCatalogs(),c;if(!this.indexingMaps){this.indexingMaps=T.indexOnScreenElements(i);}this.handleFilters();c=T.markVisibleOnScreenElements(B,this.indexingMaps,false);if(!T.validateOrder(B,i,c)){throw true;}T.createMissingElementsInOnScreenElements(this.indexingMaps,B,c,this.addNewItem.bind(this),i,this.filters,n);i=this.getCatalogs();T.showHideTilesAndHeaders(this.indexingMaps,i);if(this.handleSearchCallback){this.handleSearchCallback();}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainer',["sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ushell/Config","sap/ushell/library","sap/ushell/override","sap/ushell/resources","sap/ushell/utils","./DashboardGroupsContainerRenderer"],function(M,C,I,u,a,b,c,d){"use strict";
var D=C.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null},_gridEnabled:{type:"boolean",defaultValue:false}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}}});
D.prototype.init=function(){if(u.last("/core/home/gridContainer")){this.setProperty("_gridEnabled",true);}else{this.setProperty("_gridEnabled",false);}this.addInvisibleAccessabilityTexts();};
D.prototype.exit=function(){if(this.oTileText){this.oTileText.destroy();}if(this.oTileEditModeText){this.oTileEditModeText.destroy();}C.prototype.exit.apply(this,arguments);};
D.prototype.updateGroups=b.updateAggregatesFactory("groups");
D.prototype.onAfterRendering=function(){var t=this,o={bUseUniqueMark:true};d.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",o);t.fireAfterRendering();};
D.prototype.getGroupControlByGroupId=function(g){try{var f=this.getGroups();for(var i=0,l=f.length;i<l;++i){if(f[i].getGroupId()===g){return f[i];}}}catch(e){}return null;};
D.prototype.addLinksToUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,i){if(!G.getIsGroupSelected()){M.prototype.updateAggregation.call(G,"links");}});};
D.prototype.removeLinksFromAllGroups=function(){var g=this.getGroups();g.forEach(function(G,e){var l=G.getLinks();if(l.length){if(l[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<l.length;i++){l[i].destroy();}}}});};
D.prototype.removeLinksFromUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,e){var l=G.getLinks();if(l.length&&!G.getIsGroupSelected()){if(l[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<l.length;i++){l[i].destroy();}}}});};
D.prototype.addInvisibleAccessabilityTexts=function(){this.oTileText=new I("sapUshellDashboardAccessibilityTileText",{text:c.i18n.getText("tile")}).toStatic();var B=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(B){this.oTileEditModeText=new I("sapUshellDashboardAccessibilityTileEditModeText",{text:B.getText("LIST_ITEM_NAVIGATION")}).toStatic();}};
return D;});
sap.ui.predefine('sap/ushell/ui/launchpad/DashboardGroupsContainerRenderer',["sap/ushell/utils"],function(u){"use strict";var D={};
D.render=function(r,c){r.write("<div");r.writeAttribute("data-sap-ui-customfastnavgroup","true");r.writeControlData(c);r.addClass("sapUshellDashboardGroupsContainer");if(c.getProperty("_gridEnabled")){r.addClass("sapUshellDashboardGroupsContainerGrid");}r.writeClasses();if(c.getAccessibilityLabel()){r.writeAccessibilityState(c,{role:"navigation",label:c.getAccessibilityLabel()});}r.write(">");var g=c.getGroups();var G;for(var i=0;i<g.length;i++){G=g[i];r.write("<div");r.addClass("sapUshellDashboardGroupsContainerItem");if(G.getIsGroupLocked()||G.getDefaultGroup()){r.addClass("sapUshellDisableDragAndDrop");}r.writeClasses();r.write(">");r.renderControl(G);r.write("</div>");}u.setPerformanceMark("FLP -- dashboardgroupscontainer renderer");};
return D;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/ExtendedChangeDetection',["sap/ui/base/ManagedObject","sap/ushell/Config"],function(M,C){"use strict";
var E=M.extend("sap.ushell.ui.launchpad.ExtendedChangeDetection",{
metadata:{library:"sap.ushell",events:{itemDeleted:{},itemAdded:{},itemsReordered:{}}},
constructor:function(a,c,s){M.call(this);this._oAggregation=c.getMetadata().getAggregation(a);this._oControl=c;this._sAggregationName=a;this._aSiblingAggregationNames=s;var e=C.last("/core/spaces/extendedChangeDetection/enabled");if(e){this._oControl[this._oAggregation._sUpdater]=this._updateAggregation.bind(this);this._oControl.bUseExtendedChangeDetection=true;}}
});
E.oUpdateFromSiblingCache={};
E.prototype._updateAggregation=function(){var b=this._oControl.getBindingInfo(this._sAggregationName);var B=b.binding;var u=this._isUpdateFromSibiling();var l=B.aLastContextData||[];var L=l.map(function(s){try{var h=JSON.parse(s);return h[b.key];}catch(j){return s;}});var c=B.getContexts();var a=c.map(function(h){return h.getProperty(b.key);});var d=c.diff;var D;var i;var I=[];var r=[];var R={};var e=false;var f=false;if(d){for(i=0;i<d.length;i++){D=d[i];if(D.type==="insert"){I.push({item:a[D.index],index:D.index});}if(D.type==="delete"){r.push({item:L[D.index-I.length],index:D.index-I.length});L.splice(D.index-I.length,1);}}for(i=0;i<r.length;i++){R[r[i].item]=this._oControl.removeAggregation(this._sAggregationName,r[i].index,true);}var o;var g;for(i=0;i<I.length;i++){o=I[i];g=R[o.item];if(g&&!(d.length>=2&&d[0].index===d[1].index)){this._oControl.insertAggregation(this._sAggregationName,g,o.index,true);delete R[o.item];}else{this._createAndInsertItem(c[o.index],b,o.index);f=true;}}e=!!Object.keys(R).length;for(var k in R){R[k].destroy();delete R[k];}}else if(!(u&&a.length===0&&L.length===0)){this._createAndInsertItems(c,b);f=true;}else{return;}this._updateBindingContexts(c);if(c.length===0){this._oControl.invalidate();}if(e){this.fireItemDeleted();}if(f){this.fireItemAdded();}if(!e&&!f&&d){this.fireItemsReordered();}if(d&&d.length&&!u){this._refreshSiblingBindings();}};
E.prototype._isUpdateFromSibiling=function(){var i=this._oControl.getId()+":"+this._sAggregationName;if(E.oUpdateFromSiblingCache[i]){delete E.oUpdateFromSiblingCache[i];return true;}return false;};
E.prototype._refreshSiblingBindings=function(){if(this._aSiblingAggregationNames){for(var i=0;i<this._aSiblingAggregationNames.length;++i){var s=this._aSiblingAggregationNames[i];var S=this._oControl.getId()+":"+s;var o=this._oControl.getBinding(s);E.oUpdateFromSiblingCache[S]=true;o.refresh(true);}}};
E.prototype._createAndInsertItems=function(c,b){this._oAggregation.destroy(this._oControl);for(var i=0;i<c.length;i++){this._createAndInsertItem(c[i],b,i);}};
E.prototype._createAndInsertItem=function(c,b,i){var I=b.factory(null,c);this._oControl.insertAggregation(this._sAggregationName,I,i,true);};
E.prototype._updateBindingContexts=function(c){var I=this._oAggregation.get(this._oControl);for(var i=0;i<I.length;i++){I[i].setBindingContext(c[i]);}};
return E;});
sap.ui.predefine('sap/ushell/ui/launchpad/FailedTileDialog',["sap/ui/core/Fragment","sap/ui/model/json/JSONModel"],function(F,J){"use strict";return function(){function _(s){if(!s){throw new Error("Could not find the Tile of the given control");}if(s.isA(["sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.LinkTileWrapper"])){return s;}return _(s.getParent());}function a(s){if(!s){throw new Error("Could not find the Group of the given control");}if(s.isA("sap.ushell.ui.launchpad.TileContainer")){return s;}return a(s.getParent());}function b(s){var d={};var t=_(s);if(t.getDebugInfo){var D=t.getDebugInfo();if(D){d=JSON.parse(D);d.debugInfo=D;}}if(t.getTileCatalogId){var T=t.getTileCatalogId();if(T){d.chipId=decodeURIComponent(T);}}var g=a(s);var G=g.getBindingContext();if(G){var o=G.getProperty("object");if(o){d.groupId=o.getId();}}return d;}this.openFor=function(s){function g(c){if(!c){throw new Error("Could not find the View of the given control");}return(c.isA("sap.ui.core.mvc.View")?c:g(c.getParent()));}var v=g(s);if(!v.oFailedTileDialog){return F.load({id:v.createId("failedTileDialogFragment"),name:"sap.ushell.ui.launchpad.FailedTileDialog",controller:this}).then(function(f){f.setModel(new J({}));f.bindObject({path:"/"});v.oFailedTileDialog=f;v.addDependent(v.oFailedTileDialog);this.openFor(s);}.bind(this));}var d=v.oFailedTileDialog.getModel();d.setProperty("/",b(s));d.setProperty("/showDetails",false);v.oFailedTileDialog.open();return Promise.resolve();};this.onShowDetails=function(e){e.getSource().getModel().setProperty("/showDetails",true);};this.onClose=function(e){e.getSource().getParent().close();};};});
sap.ui.predefine('sap/ushell/ui/launchpad/GridContainer',["sap/f/dnd/GridDropInfo","sap/ui/core/dnd/DragInfo","sap/ui/core/Control","sap/ui/core/Icon","sap/m/Input","sap/m/Text","sap/ushell/resources","sap/f/GridContainer","sap/f/GridContainerSettings","sap/f/GridContainerItemLayoutData","sap/ushell/utils","sap/m/library","sap/ushell/ui/launchpad/Tile","sap/ushell/library","sap/ushell/ui/launchpad/GridContainerRenderer"],function(G,D,C,I,a,T,r,U,b,c,d,m){"use strict";var H=m.HeaderLevel;var e={RESPONSIVE:"Responsive",SMALL:"Small"};
var f=C.extend("sap.ushell.ui.launchpad.GridContainer",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false},tileSizeBehavior:{type:"string",group:"Misc",defaultValue:e.RESPONSIVE}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile",forwarding:{getter:"_getInternalGrid",aggregation:"items"},dnd:true},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},_grid:{type:"sap.f.GridContainer",multiple:false,visibility:"hidden"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},footerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},titleChange:{},tileDragStart:{},tileDragEnter:{},tileDrop:{},layoutChange:{}},dnd:{draggable:true,droppable:true}}});
f.prototype.init=function(){var u=new U({snapToRow:true,layoutChange:this.fireLayoutChange.bind(this),containerQuery:true});this.setAggregation("_grid",u);this.oNoLinksText=new T({text:r.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new T({text:r.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new I({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new I({src:this.getIcon()});this.oIcon.addStyleClass("sapUshellContainerIcon");this.oEditInputField=new a({placeholder:r.i18n.getText("new_group_name"),value:this.getHeaderText(),maxLength:100}).addStyleClass("sapUshellTileContainerTitleInput");this.oEditInputField.addEventDelegate({onfocusout:this.setEditMode.bind(this,false),onsapenter:this.setEditMode.bind(this,false)});this._setGridLayout();};
f.prototype.exit=function(){if(this.oNoLinksText){this.oNoLinksText.destroy();}if(this.oTransformationErrorText){this.oTransformationErrorText.destroy();}if(this.oTransformationErrorIcon){this.oTransformationErrorIcon.destroy();}if(this.oIcon){this.oIcon.destroy();}if(this.oEditInputField){this.oEditInputField.destroy();}C.prototype.exit.apply(this,arguments);};
f.prototype.onAfterRendering=function(){var t=window.document.getElementById(this.getId()+"-titleText");if(t){t.addEventListener("click",function(){var g=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),h=(g||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(h);}.bind(this));}var E=this.oEditInputField.getDomRef();if(E){setTimeout(function(){E.querySelector("input").focus();this.oEditInputField.selectText(0,this.oEditInputField.getValue().length);}.bind(this),0);}var o=sap.ui.getCore().getEventBus();o.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering();};
f.prototype.getShowPlaceholder=function(){return false;};
f.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);return this;};
f.prototype.groupHasTiles=function(){var t=this.getTiles();if(this.getBindingContext()){var p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return d.groupHasVisibleTiles(t,[]);};
f.prototype.getInnerContainersDomRefs=function(){var o=this.getDomRef();if(!o){return null;}var i=o.querySelector(".sapUshellTilesContainer-sortable"),l=o.querySelector(".sapUshellLineModeContainer");return[i,l];};
f.prototype.setTileActionModeActive=function(v){if(this.getTileActionModeActive()===v){return;}this.setProperty("tileActionModeActive",v);var g=this.getAggregation("_grid");if(v){g.addDragDropConfig(new D({groupName:"GridContainer",sourceAggregation:"items",dragStart:function(){this.fireTileDragStart();}.bind(this)}));g.addDragDropConfig(new G({groupName:"GridContainer",dropLayout:sap.ui.core.dnd.DropLayout.Horizontal,dropPosition:sap.ui.core.dnd.DropPosition.Between,targetAggregation:"items",dropIndicatorSize:function(i){return this._getItemLayoutData(i);}.bind(this),drop:function(i){this.fireTileDrop(i.getParameters());}.bind(this),dragEnter:function(){this.fireTileDragEnter();}.bind(this)}));}else{g.destroyDragDropConfig();}};
f.prototype.setEditMode=function(v,n){if(this.getEditMode()===v){return;}this.setProperty("editMode",v,false);this.getModel().setProperty("/editTitle",v,false);if(v){this.addStyleClass("sapUshellEditing");this.oEditInputField.setValue(n?"":this.getHeaderText());var E=sap.ui.getCore().getEventBus();E.publish("launchpad","scrollToGroup",{group:this,groupChanged:false,focus:false});}else{this.removeStyleClass("sapUshellEditing");var N=this.oEditInputField.getValue();N=N.substring(0,256).trim()||this.oEditInputField.getPlaceholder();if(N&&N!==this.getHeaderText()){this.fireTitleChange({newTitle:N});this.setHeaderText(N);}}};
f.prototype.setShowEmptyLinksArea=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellLinksAreaHidden",!v);};
f.prototype.setShowEmptyLinksAreaPlaceHolder=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellTileContainerEditMode",v);this.toggleStyleClass("sapUshellTileContainerTabsModeEmptyLinksArea",v);this.toggleStyleClass("sapUshellEmptyLinksAreaPlaceHolder",!v);};
f.prototype.setTileSizeBehavior=function(t){this.setProperty("tileSizeBehavior",t);this._setGridLayout();};
f._generateSetting=function(s,i){return new b({columns:i,rowSize:s,columnSize:s,gap:"0.5rem"});};
f.prototype._setGridLayout=function(){var t=this.getProperty("tileSizeBehavior"),u=this._getInternalGrid(),l;l=t==="Small"?{oBreakpoints:{S:4,M:6,L:12,XL:16},sSize:"4.375rem"}:{oBreakpoints:{S:4,M:6,L:10,XL:14},sSize:"5.25rem"};u.setLayout(new b({rowSize:l.sSize,columnSize:l.sSize,gap:"0.5rem"}));u.setLayoutXS(f._generateSetting("4.375rem",4));u.setLayoutS(f._generateSetting(l.sSize,l.oBreakpoints.S));u.setLayoutM(f._generateSetting(l.sSize,l.oBreakpoints.M));u.setLayoutL(f._generateSetting(l.sSize,l.oBreakpoints.L));u.setLayoutXL(f._generateSetting(l.sSize,l.oBreakpoints.XL));return this;};
f.prototype._getInternalGrid=function(){return this.getAggregation("_grid");};
f.prototype.addAggregation=function(A,o){C.prototype.addAggregation.apply(this,arguments);if(A==="tiles"){this._addItemLayoutData(o);}return this;};
f.prototype.insertAggregation=function(A,o,i){C.prototype.insertAggregation.apply(this,arguments);if(A==="tiles"){this._addItemLayoutData(o);}return this;};
f.prototype._getItemLayoutData=function(i){var l={rows:2,columns:2};if(i.isA("sap.ushell.ui.launchpad.Tile")){l={rows:2,columns:{path:"long",formatter:f._getItemLayoutColumn}};}else if(i.isA("sap.m.GenericTile")){l={rows:2,columns:2};}else if(i.isA("sap.ui.integration.widgets.Card")){var o=i.getManifest(),s=d.getMember(o,"sap|flp.rows")||3,g=d.getMember(o,"sap|flp.columns")||3;l={rows:parseInt(s,10),columns:parseInt(g,10)};}return l;};
f.prototype._addItemLayoutData=function(i){var l=this._getItemLayoutData(i),o=new c(l);i.setLayoutData(o);};
f._getItemLayoutColumn=function(l){return l?4:2;};
f.prototype.getMaximumItemNumber=function(){return this._getInternalGrid().getActiveLayoutSettings().getColumns()/2;};
f.prototype.getActiveGapSize=function(){return this._getInternalGrid().getActiveLayoutSettings().getGapInPx();};
return f;});
sap.ui.predefine('sap/ushell/ui/launchpad/GridContainerRenderer',["sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/utils","sap/ushell/Config"],function(r,A,u,C){"use strict";var G={};
G.render=function(R,c){var h=c.getHeaderActions(),b=c.getBeforeContent(),a=c.getAfterContent(),f=c.getFooterContent()||[],g=c.getAggregation("_grid"),l=c.getLinks(),i;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");R.writeClasses();R.write(">");b.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");R.addClass("sapUshellGridContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();var s;if(c.getDefaultGroup()){s=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){s=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{s=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:s});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.addClass("sapUshellContainerTitleFlex");R.writeClasses();R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass("sapUshellContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass("sapUshellContainerIconHidden");}else{c.oIcon.addStyleClass("sapUshellContainerIconHidden");}R.renderControl(c.oEditInputField);if(c.getIsGroupLocked()){R.renderControl(c.oIcon);}else if(c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellContainerHeaderActions");R.writeClasses();R.write(">");for(i=0;i<h.length;i++){R.renderControl(h[i]);}R.write("</div>");}R.write("</div>");R.write("</div>");}R.write("<ul");R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.write(">");var v=[];c.getTiles().forEach(function(T){if(T.getVisible()){v.push(T);}});v.forEach(function(k,p){k.addCustomData(new A({key:"aria-posinset",value:(p+1).toString(),writeToDom:true}));k.addCustomData(new A({key:"aria-setsize",value:v.length.toString(),writeToDom:true}));if(this._isUserActivityCard(k)){this._updateUserActivityCardVisibility(k);}}.bind(this));R.renderControl(g);R.write("</ul>");var L=c.getSupportLinkPersonalization();if(l.length>0||L){R.write("<div aria-hidden='true'");var d="sapUshellLineModeContainer";R.addClass(d);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.oNoLinksText);R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.style("display","none");R.writeStyles();}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.oTransformationErrorIcon);R.renderControl(c.oTransformationErrorText);R.write("</div>");R.write("</div>");R.write("<div class='sapUshellLinksInnerContainer'>");for(i=0;i<l.length;i++){var o=l[i],e=o.getCustomData(),t="-1";for(var j=0;j<e.length;j++){if(e[j].getKey()==="tabindex"){t=e[j].getValue();}o.removeCustomData(e[j]);}o.addCustomData(new A({key:"aria-posinset",value:(i+1).toString(),writeToDom:true}));o.addCustomData(new A({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));o.addCustomData(new A({key:"tabindex",value:t,writeToDom:true}));o.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){o.addStyleClass("sapUshellLockedTile");}R.renderControl(o);}R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass("sapUshellTilesContainerFtr");R.writeClasses();R.write(">");f.forEach(function(c){R.renderControl(c);});R.write("</footer>");}R.write("</div>");if(a.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");R.writeClasses();R.write(">");a.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};
G._updateUserActivityCardVisibility=function(c){c.setVisible(C.last("/core/shell/model/enableTrackingActivity"));C.on("/core/shell/model/enableTrackingActivity").do(function(e){c.setVisible(e);});};
G._isUserActivityCard=function(c){if(typeof c.getManifest!=="function"){return false;}var m=c.getManifest();var s=m&&m["sap.card"]&&m["sap.card"].header&&m["sap.card"].header.title;return s===r.i18n.getText("recentActivities")||s===r.i18n.getText("frequentActivities");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/GroupHeaderActions',["sap/m/Button","sap/m/library","sap/ui/core/Control","sap/ushell/library"],function(B,m,C){"use strict";var a=m.ButtonType;var P=m.PlacementType;
var G=C.extend("sap.ushell.ui.launchpad.GroupHeaderActions",{
metadata:{library:"sap.ushell",properties:{isOverflow:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}}},
renderer:{apiVersion:2,render:function(r,g){r.openStart("div",g);r.openEnd();var c=g.getContent();if(g.getTileActionModeActive()){if(g.getIsOverflow()){var h=c.some(function(o){return o.getVisible();});if(h){r.renderControl(g._getOverflowButton());}}else{c.forEach(function(o){r.renderControl(o);});}}r.close("div");}}
});
G.prototype.exit=function(){if(this._oOverflowButton){this._oOverflowButton.destroy();}if(this._oActionSheet){this._oActionSheet.destroy();}};
G.prototype._getOverflowButton=function(){if(!this._oOverflowButton){this._oOverflowButton=new B({icon:"sap-icon://overflow",type:a.Transparent,enabled:{parts:["/editTitle"],formatter:function(i){return!i;}},press:function(){sap.ui.require(["sap/m/ActionSheet"],function(A){if(!this._oActionSheet){this._oActionSheet=new A({placement:P.Auto});}this._oActionSheet.destroyButtons();this.getContent().forEach(function(b){var c=b.clone();c.setModel(b.getModel());c.setBindingContext(b.getBindingContext());this._oActionSheet.addButton(c);}.bind(this));this._oActionSheet.openBy(this._oOverflowButton);}.bind(this));}.bind(this)}).addStyleClass("sapUshellHeaderActionButton");this._oOverflowButton.setParent(this);}return this._oOverflowButton;};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItem',["sap/m/ListItemBase","sap/ushell/library","sap/ushell/utils","./GroupListItemRenderer"],function(L,l,u){"use strict";
var G=L.extend("sap.ushell.ui.launchpad.GroupListItem",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},show:{type:"boolean",group:"Misc",defaultValue:true},groupId:{type:"string",group:"Misc",defaultValue:null},index:{type:"int",group:"Misc",defaultValue:null},numberOfTiles:{type:"int",group:"Misc",defaultValue:0},isGroupVisible:{type:"boolean",group:"Misc",defaultValue:true}},events:{press:{},afterRendering:{}}}});
G.prototype.exit=function(){L.prototype.exit.apply(this,arguments);};
G.prototype.onAfterRendering=function(){this.fireAfterRendering();};
G.prototype.groupHasVisibleTiles=function(){var g=this.getModel().getProperty("/groups/"+this.getIndex()+"/tiles");var a=this.getModel().getProperty("/groups/"+this.getIndex()+"/links");return u.groupHasVisibleTiles(g,a);};
G.prototype.onclick=function(){this.firePress({id:this.getId()});};
G.prototype.setGroupId=function(g){this.setProperty("groupId",g,true);return this;};
G.prototype.setTitle=function(t){this.setProperty("title",t);this.$().find(".sapMSLITitleOnly").text(t);return this;};
return G;});
sap.ui.predefine('sap/ushell/ui/launchpad/GroupListItemRenderer',["sap/m/ListItemBaseRenderer","sap/ui/core/Renderer"],function(L,R){"use strict";var G=R.extend(L);
G.renderLIAttributes=function(r){r.addClass("sapUshellGroupLI");r.addClass("sapUshellGroupListItem");};
G.renderLIContent=function(r,l){r.write("<div");r.addClass("sapMSLIDiv");r.addClass("sapMSLITitleDiv");r.writeClasses();if(!l.getVisible()){r.addStyle("display","none");r.writeStyles();}r.write(">");r.write("<div");r.addClass("sapMSLITitleOnly");r.writeClasses();r.write(">");r.writeEscaped(l.getTitle());r.write("</div>");r.write("</div>");};
return G;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapper',["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/ui/launchpad/AccessibilityCustomData","./LinkTileWrapperRenderer"],function(L,M,C,q,u,A){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.LinkTileWrapper",{metadata:{library:"sap.ushell",properties:{uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},target:{type:"string",group:"Misc",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},debugInfo:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},footItems:{type:"sap.ui.core.Control",multiple:true,singularName:"footItem"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{}}}});
a.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
a.prototype.addTileView=function(o,s){o.setParent(null);o.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));M.prototype.addAggregation.call(this,"tileViews",o,s);};
a.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0;}};
a.prototype.onAfterRendering=function(){this.fireAfterRendering();};
a.prototype.onclick=a.prototype._onPress;a.prototype.onsapenter=a.prototype._launchTileViaKeyboard;a.prototype.onsapspace=a.prototype._launchTileViaKeyboard;
a.prototype._launchTileViaKeyboard=function(e){L.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(this.getTileActionModeActive()){return;}else if(this._getTileState()==="Failed"){this._onFailedStatePress();}else if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false;if(t.firePress){t.firePress();}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress();p=true;}}}}};
a.prototype._onPress=function(e){L.info("Tile pressed:",this.getDebugInfo(),"sap.ushell.ui.launchpad.LinkTileWrapper");sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileLinkClick");if(!this.getTileActionModeActive()&&(this._getTileState()==="Failed")){this._onFailedStatePress();}};
a.prototype._onFailedStatePress=function(){if(!this.getTileActionModeActive()&&(this._getTileState()==="Failed")){if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(F){this.FailedTileDialog=new F();this._onFailedStatePress();}.bind(this));}else{this.FailedTileDialog.openFor(this);}return;}};
a.prototype._getTileState=function(){var t=this.getTileViews();var T;for(var i=0;(i<t.length)&&!T;++i){if(t[i].isA("sap.m.GenericTile")){T=t[i];}}if(!T){throw new Error("Could not find the wrapped Tile");}return T.getState();};
a.prototype.setVisible=function(v){this.setProperty("visible",v,true);return this.toggleStyleClass("sapUshellHidden",!v);};
a.prototype.setAnimationRendered=function(v){this.setProperty("animationRendered",v,true);};
a.prototype._handleTileShadow=function(j,b){if(j.length){j.unbind("mouseenter mouseleave");var c,t=j.css("border").split("px")[0],m=this.getModel();if(t>0){c=j.css("border-color");}else{c=this.getRgba();}j.hover(function(){if(!m.getProperty("/tileActionModeActive")){var o=q(j).css("box-shadow"),T=o?o.split(") ")[1]:null,U;if(T){U=T+" "+c;q(this).css("box-shadow",U);}}},function(){q(this).css("box-shadow","");});}};
a.prototype.setUuid=function(U){this.setProperty("uuid",U,true);return this;};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/LinkTileWrapperRenderer',["sap/base/Log","sap/m/GenericTile","sap/m/library","sap/ushell/resources"],function(L,G,m,u){"use strict";var a=m.GenericTileMode;var b=m.LoadState;var c={};
c.render=function(r,C){var t=null;var M=C.getModel();function d(){t=new G({header:u.i18n.getText("cannotLoadTile"),mode:a.LineMode,state:b.Failed});}try{t=C.getTileViews()[0];}catch(e){L.warning("Failed to load tile view: ",e.message);d();}if(!t){L.warning("Failed to load tile view: the control has no tileViews");d();}r.write("<div");if(M&&M.getProperty("/enableHelp")){r.writeAttribute("data-help-id",C.getTileCatalogId());}r.writeControlData(C);r.addClass("sapUshellLinkTile");if(!C.getVisible()){r.addClass("sapUshellHidden");}if(C.getIsLocked()){r.addClass("sapUshellLockedTile");}r.writeClasses();r.writeAttributeEscaped("tabindex","-1");r.write(">");r.renderControl(t);r.write("</div>");};
return c;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialog',["sap/m/Label","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/core/Popup","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./LoadingDialogRenderer"],function(L,C,I,P,u,r,A){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.LoadingDialog",{metadata:{library:"sap.ushell",properties:{iconUri:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},text:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},loadAnimationWithInterval:{type:"boolean",group:"Appearance",defaultValue:true}}}});
a.prototype.init=function(){this._oPopup=new P();this._oPopup.restoreFocus=false;this._oPopup.setShadow(false);this._oPopup.setModal(true,"sapUshellLoadingDialog");this.oIcon=new I();this._oLabel=new L(this.getId()+"loadingLabel").addStyleClass("sapUshellLoadingDialogLabel");this.sState="idle";this.sLoadingString=r.i18n.getText("genericLoading").replace("..."," ");};
a.prototype.exit=function(){this._oPopup.close();this._oPopup.destroy();this.oIcon.destroy();this._oLabel.destroy();};
a.prototype.isOpen=function(){return this._oPopup.isOpen();};
a.prototype.openLoadingScreen=function(){if(this.sState==="idle"){this.sState="busy";}if(this.getLoadAnimationWithInterval()){this.addStyleClass("sapUshellVisibilityHidden");this._iTimeoutId=setTimeout(function(){this.removeStyleClass("sapUshellVisibilityHidden");this.focus();}.bind(this),3000);}else{this.removeStyleClass("sapUshellVisibilityHidden");this.focus();}if(!this.getVisible()){this.setVisible(true);this.$().show();}if(!this.isOpen()){this._oPopup.setContent(this);this._oPopup.setPosition("center center","center center",document,"0 0","fit");this._oPopup.open();}};
a.prototype.showAppInfo=function(s,i,b){this.setText(s);this.setIconUri(i);this.oIcon.setSrc(i);this._oLabel.setText(s);this._oLabel.addCustomData(new A({key:"aria-hidden",value:"true",writeToDom:true}));var o=this.getDomRef("accessibility-helper");if(o&&b){o.innerText=this.sLoadingString;}};
a.prototype.closeLoadingScreen=function(){if(this._iTimeoutId){clearTimeout(this._iTimeoutId);}if(this.getVisible()){this.sState="idle";this.setVisible(false);this.$().hide();this._oPopup.close();}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/LoadingDialogRenderer',["sap/ui/thirdparty/jquery"],function(q){"use strict";var L={apiVersion:2,render:function(r,l){var t=l.getTooltip_AsString();r.openStart("div",l);r.class("sapUshellLoadingDialogControl");if(t){r.attr("title",t);}r.openEnd();if(q.os.ios||!l._isPlatformDependent){this.renderAppInfo(r,l);this.renderFioriFlower(r);}else{this.renderFioriFlower(r);this.renderAppInfo(r,l);}r.close("div");},renderAppInfo:function(r,l){r.openStart("div");r.class("sapUshellLoadingDialogAppData");r.openEnd();if(l.getIconUri()){r.renderControl(l.oIcon);}r.openStart("span",l.getId()+"-accessibility-helper");r.class("sapUshellAccessibilityHelper");r.attr("aria-live","rude");r.attr("aria-relevant","additions text");r.openEnd();r.close("span");r.renderControl(l._oLabel);r.close("div");},renderFioriFlower:function(r){var u=/Android\s4\.2.+GT-I9505.+Chrome\/18/,R=navigator.userAgent&&u.test(navigator.userAgent);if(q.support.cssAnimations&&!R){r.openStart("div","fiori2-loader");r.openEnd();r.openStart("div");r.class("fiori2-blossom");r.openEnd();for(var i=1;i<6;++i){r.openStart("div");r.class("fiori2-leafContainer");r.class("fiori2-leafContainer"+i);r.openEnd();r.openStart("div");r.class("fiori2-leaf");r.class("fiori2-leaf"+i);r.openEnd();r.close("div");r.close("div");}r.close("div");r.close("div");}}};return L;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Page',["sap/m/Button","sap/m/library","sap/m/Text","sap/ui/core/Control","sap/ui/core/dnd/DragDropInfo","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection","./PageRenderer"],function(B,l,T,C,D,I,c,u,r,E,P){"use strict";var a=l.ButtonType;var b=c.TextAlign;var d=c.InvisibleMessageMode;var e=u.DisplayFormat;
var f=C.extend("sap.ushell.ui.launchpad.Page",{
metadata:{library:"sap.ushell",properties:{edit:{type:"boolean",group:"Misc",defaultValue:false},enableSectionReordering:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},noSectionsText:{type:"string",group:"Misc",defaultValue:""},showNoSectionsText:{type:"boolean",group:"Misc",defaultValue:true},showTitle:{type:"boolean",group:"Misc",defaultValue:false},title:{type:"string",group:"Misc",defaultValue:""}},defaultAggregation:"sections",aggregations:{sections:{type:"sap.ushell.ui.launchpad.Section",multiple:true,dnd:true},messageStrip:{type:"sap.m.MessageStrip",multiple:false},_addSectionButtons:{type:"sap.m.Button",multiple:true,visibility:"hidden"},_noSectionText:{type:"sap.m.Text",multiple:false,visibility:"hidden"}},events:{addSectionButtonPressed:{parameters:{index:{type:"int"}}},sectionDrop:{parameters:{draggedControl:{type:"sap.ushell.ui.launchpad.Section"},droppedControl:{type:"sap.ushell.ui.launchpad.Section"},dropPosition:{type:"string"}}}}},
renderer:P
});
f.prototype.enhanceAccessibilityState=function(o,A){delete A.readonly;};
f.prototype.init=function(){this.setAggregation("_noSectionText",new T({text:r.i18n.getText("Page.NoSectionText"),width:"100%",textAlign:b.Center}));this._oDragDropInfo=new D({sourceAggregation:"sections",targetAggregation:"sections",dropPosition:"Between",dragStart:function(o){if(o.getParameter("target").getDefault()){o.preventDefault();}},dragEnter:function(o){if(o.getParameter("target").getDefault()){o.preventDefault();}},drop:function(i){this.fireSectionDrop(i.getParameters());}.bind(this)});this.addDelegate({onsappageup:this._handleKeyboardPageNavigation.bind(this),onsappagedown:this._handleKeyboardPageNavigation.bind(this),onsapdown:this._handleKeyboardArrowNavigation.bind(this,false),onsapdownmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsapup:this._handleKeyboardArrowNavigation.bind(this,false),onsapupmodifiers:this._handleKeyboardArrowNavigation.bind(this,true),onsaphome:this._handleKeyboardHomeEndNavigation.bind(this),onsaphomemodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onsapend:this._handleKeyboardHomeEndNavigation.bind(this),onsapendmodifiers:this._handleKeyboardHomeEndNavigation.bind(this),onfocusin:this._saveFocus.bind(this),onsapskipback:this._handleSkipBack.bind(this),onsapskipforward:this._handleSkipForward.bind(this),onBeforeFastNavigationFocus:this._handleBeforeFastNavigationFocus.bind(this)});this._oSectionsChangeDetection=new E("sections",this);this._oSectionsChangeDetection.attachItemDeleted(this.invalidate,this);this._oSectionsChangeDetection.attachItemsReordered(this.invalidate,this);this._oInvisibleMessageInstance=I.getInstance();};
f.prototype._saveFocus=function(o){var s=o.srcControl;if(s.isA("sap.m.VBox")){var S=s.getParent();if(S){if(S.indexOfVisualization(this._oLastFocusedViz)===-1){this._oLastFocusedViz=S.getVisualizations()[0];this._oLastFocusedSection=this._oLastFocusedViz?undefined:S;}}else{this._oLastFocusedViz=undefined;this._oLastFocusedSection=undefined;}}else if(s.isA("sap.f.GridContainer")){var g=s.getItems();this._oLastFocusedViz=g.find(function(h){var i=h.getDomRef();return i&&i.parentNode===o.target;});}else if(s.isA("sap.ushell.ui.launchpad.VizInstanceLink")){this._oLastFocusedViz=s;}};
f.prototype._handleSkipBack=function(o){if(this.getEdit()){var t;var s=o.srcControl;if(s.isA("sap.f.GridContainer")||s.isA("sap.ushell.ui.launchpad.VizInstanceLink")){t=this._getAncestorSection(s);}if(t){o.preventDefault();t.focus();}}};
f.prototype._handleSkipForward=function(o){var t,s;var S=o.srcControl;if(S.isA("sap.m.VBox")){s=S.getParent();}if(s){if(s.indexOfVisualization(this._oLastFocusedViz)!==-1){t=this._oLastFocusedViz;}else{t=s.getAllItems()[0];}}if(t){o.preventDefault();this._focusVisualization(t);}};
f.prototype._handleBeforeFastNavigationFocus=function(o){var s=this.getSections();var g=this.getEdit();if(g&&this._oLastFocusedSection){this._oLastFocusedSection.focus();}else if(g&&o.forward&&this._oLastFocusedViz){this._getAncestorSection(this._oLastFocusedViz).focus();}else if(this._oLastFocusedViz&&this._oLastFocusedViz.getDomRef()){this._focusVisualization(this._oLastFocusedViz);}else if(g&&o.forward&&s.length>0){this._getFirstVisibleSection().focus();}else if(g&&!o.forward&&s.length>0){var F=s[0];if(F.getAllItems().length===0){F.focus();}else{this._focusVisualization(F.getAllItems()[0]);}}else{var S=s.find(function(h){return h.getDomRef()&&h.getAllItems().length>0;});this._focusVisualization(S.getAllItems()[0]);}o.preventDefault();};
f.prototype._getAncestorSection=function(o){if(!o){return null;}if(o.isA("sap.ushell.ui.launchpad.Section")){return o;}else if(o.getParent){return this._getAncestorSection(o.getParent());}return null;};
f.prototype.exit=function(){this._oDragDropInfo.destroy();this._oSectionsChangeDetection.destroy();};
f.prototype.onBeforeRendering=function(){var n=this.getSections().length;var A=this.getAggregation("_addSectionButtons")||[];var o;for(var i=A.length;i<n+1;i++){o=new B({type:a.Transparent,icon:"sap-icon://add",text:r.i18n.getText("Page.Button.AddSection"),press:this.fireAddSectionButtonPressed.bind(this,{index:i})});o.addStyleClass("sapUshellPageAddSectionButton");this.addAggregation("_addSectionButtons",o);}};
f.prototype.getFocusDomRef=function(){var A=this.getAggregation("_addSectionButtons")||[];if(!this.getSections().length&&A.length&&this.getEdit()){return A[0].getFocusDomRef();}return this.getDomRef();};
f.prototype.setEnableSectionReordering=function(v){if(v===undefined||this.getEnableSectionReordering()===v){return this;}this.setProperty("enableSectionReordering",!!v,true);if(v){this.addDragDropConfig(this._oDragDropInfo);}else{this.removeDragDropConfig(this._oDragDropInfo);}return this;};
f.prototype.setNoSectionsText=function(t){if(t===undefined||this.getNoSectionsText()===t){return this;}this.setProperty("noSectionsText",t,true);var n=this.getAggregation("_noSectionText");n.setText(t||r.i18n.getText("Page.NoSectionText"));return this;};
f.prototype._focusVisualization=function(v){if(!v){return;}else if(v.isA("sap.ushell.ui.launchpad.VizInstanceLink")){v.focus();}else{v.getDomRef().parentElement.focus();}};
f.prototype._focusNextVisualization=function(i){var s=this.getSections();var S=this.indexOfSection(i.section);var o=i.event.getParameter?i.event.getParameter("event"):i.event;var g=o.target.firstElementChild;var h,F;while(true){if(i.direction==="up"){S--;}else{S++;}h=s[S];if(!h){return;}F=h.focusVisualization({keycode:o.keyCode,ref:g});if(F){o.preventDefault();return;}}};
f.prototype._handleKeyboardPageNavigation=function(o){if(this._isFocusInInput()){return;}var s=this.getSections();for(var i=0;i<s.length;i++){var S=s[i].getDomRef();if(S.contains(window.document.activeElement)){this._focusNextVisualization({event:o,section:s[i],direction:o.type==="sappagedown"?"down":"up",prefIndex:0});return;}}};
f.prototype._handleKeyboardArrowNavigation=function(m,o){if((m&&!this.getEnableSectionReordering())||(m&&!o.ctrlKey)){return;}var s=this.getSections();var p,S,n;for(var i=0;i<s.length;i++){p=s[i-1];S=s[i];n=s[i+1];if(window.document.activeElement===S.getFocusDomRef()){if(o.type==="sapup"&&p){p.focus();}else if(o.type==="sapdown"&&n){n.focus();}else if(o.type==="sapupmodifiers"&&p){if(p.getDefault()){return;}this.fireSectionDrop({draggedControl:S,droppedControl:p,dropPosition:"Before"});o.preventDefault();o.stopPropagation();p.focus();}else if(o.type==="sapdownmodifiers"&&n){if(S.getDefault()){return;}this.fireSectionDrop({draggedControl:S,droppedControl:n,dropPosition:"After"});o.preventDefault();o.stopPropagation();n.focus();}return;}}};
f.prototype._isFocusInInput=function(){var t=(document.activeElement||{}).tagName;return t==="INPUT"||t==="TEXTAREA";};
f.prototype._handleKeyboardHomeEndNavigation=function(o){if(this._isFocusInInput()){return;}var s,i;var L=false;if(o.type==="saphome"){i=this._getSectionAreaItems(o.srcControl);}else if(o.type==="saphomemodifiers"){s=this._getFirstVisibleSection(true);}else if(o.type==="sapend"){i=this._getSectionAreaItems(o.srcControl);L=true;}else if(o.type==="sapendmodifiers"){s=this._getLastVisibleSection(true);L=true;}if(s){i=s.getAllItems();}if(L){this._focusVisualization(i[i.length-1]);}else{this._focusVisualization(i[0]);}o.preventDefault();o.stopPropagation();};
f.prototype._getFirstVisibleSection=function(A){var s=this.getSections();return s.find(function(S){return this._isSectionVisible(S,A);}.bind(this));};
f.prototype._getLastVisibleSection=function(A){var s=this.getSections().reverse();return s.find(function(S){return this._isSectionVisible(S,A);}.bind(this));};
f.prototype._isSectionVisible=function(s,A){var g=A?false:this.getEdit();return g||s.getVisualizations().length>0&&s.getDomRef()&&s.getShowSection();};
f.prototype._getSectionAreaItems=function(o){var i,s;var g=o.getBindingContext();if(g){s=g.getProperty("displayFormatHint");}var S=this.getSections();var t=S.find(function(h){var j=h.getDomRef();return j&&j.contains(o.getDomRef());});if(t){switch(s){case e.Compact:return t.getCompactItems();case e.Standard:case e.StandardWide:return t.getDefaultItems();case e.Flat:case e.FlatWide:return t.getFlatItems();default:i=t.getDefaultItems();if(i.length>0){return i;}i=t.getFlatItems();if(i.length>0){return i;}i=t.getCompactItems();return i;}}return[];};
f.prototype._getCurrentlyFocusedSection=function(){var s=this.getSections();var o=window.document.activeElement;return s.find(function(S){return S.getDomRef().contains(o);});};
f.prototype._handleSectionBorderReached=function(i){this._focusNextVisualization(i.getParameters());};
f.prototype.addAggregation=function(A,o){C.prototype.addAggregation.apply(this,arguments);if(A==="sections"){o.attachEvent("borderReached",this._handleSectionBorderReached.bind(this));}return this;};
f.prototype.insertAggregation=function(A,o){C.prototype.insertAggregation.apply(this,arguments);if(A==="sections"){o.attachEvent("borderReached",this._handleSectionBorderReached.bind(this));}return this;};
f.prototype.announceMove=function(){var s=r.i18n.getText("PageRuntime.Message.SectionMoved");this._oInvisibleMessageInstance.announce(s,d.Polite);};
return f;});
sap.ui.predefine('sap/ushell/ui/launchpad/PageRenderer',[],function(){"use strict";var P={apiVersion:2};
P.render=function(r,p){var s=p.getSections(),n=s.length,d=p.getDataHelpId(),S,i;r.openStart("div",p);r.class("sapUshellPage");r.class("sapContrastPlus");r.attr("data-sap-ui-customfastnavgroup","true");if(d){r.attr("data-help-id",d);}r.openEnd();if(p.getEdit()&&p.getAggregation("messageStrip")){r.renderControl(p.getAggregation("messageStrip"));}r.openStart("h2",p.getId()+"-title");r.class("sapMTitle");r.class("sapUshellPageTitle");if(!p.getShowTitle()){r.class("sapUiPseudoInvisibleText");}r.attr("aria-level","2");r.openEnd();r.text(p.getTitle());r.close("h2");if(p.getEdit()&&!n){r.renderControl(p.getAggregation("_addSectionButtons")[0]);}if(!n&&p.getShowNoSectionsText()){r.renderControl(p.getAggregation("_noSectionText"));}for(i=0;i<n;i++){S=s[i];if(p.getEdit()||(S.getShowSection()&&S.getVisible())){r.openStart("div");r.class("sapUshellPageSection");r.openEnd();r.renderControl(S);if(p.getEdit()){r.renderControl(p.getAggregation("_addSectionButtons")[i+1]);}r.close("div");}}r.close("div");};
return P;});
sap.ui.predefine('sap/ushell/ui/launchpad/Panel',["sap/m/Panel","sap/ushell/library","sap/ushell/override","./PanelRenderer"],function(P,l,o){"use strict";
var p=P.extend("sap.ushell.ui.launchpad.Panel",{metadata:{library:"sap.ushell",properties:{translucent:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{headerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent"},headerBar:{type:"sap.m.Bar",multiple:false}}}});
p.prototype.updateAggregation=o.updateAggregation;return p;});
sap.ui.predefine('sap/ushell/ui/launchpad/PanelRenderer',function(){"use strict";var P={render:function(r,c){if(!c.getVisible()){return;}r.write("<section");r.writeControlData(c);r.addClass("sapMPanel");r.addClass("sapUshellPanel");if(!c.getTranslucent()){r.addClass("sapMPanelBG");}r.addStyle("width",c.getWidth());r.addStyle("height",c.getHeight());r.writeClasses();r.writeStyles();r.write(">");var h=c.getHeaderContent();var l=h.length;if(c.getHeaderText()||l>0||c.getHeaderBar()){r.write("<header");r.addClass("sapMPanelHdr");r.addClass("sapUshellCatalogHeader");r.writeClasses();r.write(">");if(c.getHeaderText()||l>0){r.write("<");r.write(c.getHeaderLevel().toLowerCase());r.write(">");if(c.getHeaderText()){r.writeEscaped(c.getHeaderText());}for(var j=0;j<l;j++){r.renderControl(h[j]);}r.write("</");r.write(c.getHeaderLevel().toLowerCase());r.write(">");}if(c.getHeaderBar()){r.renderControl(c.getHeaderBar());}r.write("</header>");}r.write("<div");r.addClass("sapMPanelContent");r.addClass("sapUshellPanelContent");r.writeClasses();r.write(">");var C=c.getContent();var L=C.length;for(var i=0;i<L;i++){r.renderControl(C[i]);}r.write("</div>");r.write("</section>");}};return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTile',["sap/ui/core/Icon","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTileRenderer","sap/ushell/ui/launchpad/Tile"],function(I,u,r,P,T){"use strict";
var a=T.extend("sap.ushell.ui.launchpad.PlusTile",{metadata:{library:"sap.ushell",properties:{groupId:{type:"string",group:"Misc",defaultValue:""},enableHelp:{type:"boolean",group:"Misc",defaultValue:false}},events:{press:{}}}});
a.prototype.init=function(){this.oIcon=new I({src:"sap-icon://add",tooltip:r.i18n.getText("openAppFinder_tooltip")});};
a.prototype.exit=function(){if(this.oIcon){this.oIcon.destroy();}};
a.prototype.onclick=function(){var g=this.getParent().getBindingContext().getObject();if(!g.object){return;}this.firePress();};
a.prototype.onsapspace=a.onclick;a.prototype.onsapenter=a.onclick;return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/PlusTileRenderer',["sap/ushell/resources","sap/ushell/Config"],function(r,C){"use strict";var P={apiVersion:2,render:function(a,p){a.openStart("li",p);a.attr("tabindex","-1");a.class("sapUshellTile");a.class("sapUshellPlusTile");a.class("sapContrastPlus");a.class("sapMGT");if(C.last("/core/home/sizeBehavior")==="Small"){a.class("sapUshellSmall");}if(p.getEnableHelp()){a.class("help-id-plusTile");}a.attr("aria-label",r.i18n.getText("TilePlus_label"));a.openEnd();a.renderControl(p.oIcon);a.close("li");}};return P;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/Section',["sap/base/Log","sap/base/util/deepClone","sap/f/GridContainerItemLayoutData","sap/m/library","sap/ui/core/InvisibleMessage","sap/ui/core/library","sap/ui/core/XMLComposite","sap/ui/events/KeyCodes","sap/ui/model/Filter","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/ExtendedChangeDetection"],function(L,d,G,m,I,c,X,K,F,q,u,r,E){"use strict";var T=m.TileSizeBehavior;var a=c.InvisibleMessageMode;var D=u.DisplayFormat;
function _(R,v,A){if(!Array.isArray(v)||!v.length){return null;}if(R&&R.getDomRef){R=R.getDomRef();}if(!R){return v[A?v.length-1:0];}function h(t,w){var x=t.left+t.right-w.left-w.right;var y=t.top+t.bottom-w.top-w.bottom;return x*x+y*y;}function j(t){var w=t.querySelector(".sapMGTLineStyleHelper");return(w||t).getBoundingClientRect();}var o=j(R);var n=null;var k=0;var l;var p;var s;for(var i=v.length-1;i>=0;i--){p=v[i].getDomRef();if(p){l=j(p);if(!l.width&&!l.height){continue;}if(A&&l.top>=o.top||!A&&l.bottom<=o.bottom){continue;}s=h(l,o);if(!n||s<k){n=v[i];k=s;}}}return n;}
var S=X.extend("sap.ushell.ui.launchpad.Section",{
metadata:{library:"sap.ushell",properties:{editable:{type:"boolean",group:"Misc",defaultValue:false},dataHelpId:{type:"string",group:"Misc",defaultValue:""},default:{type:"boolean",group:"Misc",defaultValue:false},enableAddButton:{type:"boolean",group:"Behavior",defaultValue:true},enableDeleteButton:{type:"boolean",group:"Behavior",defaultValue:true},enableGridBreakpoints:{type:"boolean",group:"Appearance",defaultValue:false},enableGridContainerQuery:{type:"boolean",group:"Appearance",defaultValue:false},enableResetButton:{type:"boolean",group:"Behavior",defaultValue:true},enableShowHideButton:{type:"boolean",group:"Behavior",defaultValue:true},enableVisualizationReordering:{type:"boolean",group:"Behavior",defaultValue:false},noVisualizationsText:{type:"string",group:"Appearance",defaultValue:r.i18n.getText("Section.NoVisualizationsText")},title:{type:"string",group:"Appearance",defaultValue:""},showNoVisualizationsText:{type:"boolean",group:"Behavior",defaultValue:false},showSection:{type:"boolean",group:"Misc",defaultValue:true},showLinks:{type:"boolean",group:"Behavior",defaultValue:true},sizeBehavior:{type:"sap.m.TileSizeBehavior",group:"Misc",defaultValue:T.Responsive},_duringDrag:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"visualizations",aggregations:{visualizations:{type:"sap.ui.core.Control",bindable:"bindable",multiple:true},defaultItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--defaultArea",aggregation:"items",forwardBinding:false},dnd:true},flatItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--flatArea",aggregation:"items",forwardBinding:false},dnd:true},compactItems:{type:"sap.ui.core.Control",multiple:true,forwarding:{idSuffix:"--compactArea",aggregation:"items",forwardBinding:false},dnd:true}},events:{add:{},delete:{},reset:{},titleChange:{},visualizationDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}},areaDragEnter:{parameters:{originalEvent:{type:"sap.ui.base.Event"},dragControl:{type:"sap.ui.core.Control"},sourceArea:{type:"string"},targetArea:{type:"string"}}},sectionVisibilityChange:{parameters:{visible:{type:"boolean"}}},borderReached:{parameters:{event:{type:"jQuery.Event"}}}}},
resourceModel:r.i18nModel
});
function g(C){for(var s in D){if(C.displayFormatHint===D[s]){return D[s];}}if(C.displayFormatHint&&C.displayFormatHint!=="tile"){L.error("DisplayFormat '"+C.displayFormatHint+"' not valid - 'standard' is used");}return D.Standard;}
function b(){return new F({path:"",caseSensitive:true,test:function(C){var s=g(C);return s===D.Standard||s===D.StandardWide;}});}
function e(){return new F({path:"",caseSensitive:true,test:function(C){var s=g(C);return s===D.Flat||s===D.FlatWide;}});}
function f(){return new F({path:"",caseSensitive:true,test:function(C){return g(C)===D.Compact;}});}
S.prototype.bindAggregation=function(A,B){if(A==="visualizations"){if(B.filters){L.error("bind visualizations with pre-existing filters is not implemented.");}var o=d(B);o.filters=b();X.prototype.bindAggregation.call(this,"defaultItems",o);var h=d(B);h.filters=e();X.prototype.bindAggregation.call(this,"flatItems",h);var l=d(B);l.filters=f();X.prototype.bindAggregation.call(this,"compactItems",l);}else{X.prototype.bindAggregation.call(this,A,B);}return this;};
S.prototype.getAllItems=function(){return this.getDefaultItems().concat(this.getFlatItems(),this.getCompactItems());};
S.prototype.getVisualizations=function(){var v=this.getAllItems();v.sort(function(V,o){var p=V.getBindingContext().getPath();var i=parseInt(p.split("/").pop(),10);p=o.getBindingContext().getPath();var h=parseInt(p.split("/").pop(),10);return i<h?-1:1;});return v;};
S.prototype.filterVisualizations=function(o){var h=o?new F({filters:[b(),o],and:true}):b();var i=o?new F({filters:[e(),o],and:true}):e();var C=o?new F({filters:[f(),o],and:true}):f();this.getBinding("defaultItems").filter(h);this.getBinding("flatItems").filter(i);this.getBinding("compactItems").filter(C);};
S.prototype.indexOfVisualization=function(v){return this.getVisualizations().indexOf(v);};
S.prototype.addVisualization=function(v,s){L.error("Section.prototype.addVisualization should not be called");return this.addAggregation("visualizations",v,s);};
S.prototype.insertVisualization=function(v,i,s){L.error("Section.prototype.insertVisualization should not be called");return this.insertAggregation("visualizations",v,i,s);};
S.prototype.removeVisualization=function(v,s){L.error("Section.prototype.removeVisualization should not be called");return this.removeAggregation("visualizations",v,s);};
S.prototype.onBorderReached=function(o){var O=o.getParameter("event"),k=O.keyCode,t=O.type,i=q(O.target.firstElementChild).control(0),v;switch(k){case K.ARROW_UP:v=this.getClosestVizualization(i,true);break;case K.ARROW_DOWN:v=this.getClosestVizualization(i,false);break;case K.ARROW_LEFT:v=this._getPreviousViz(i);break;case K.ARROW_RIGHT:v=this._getNextViz(i);break;default:break;}if(v){this._focusItem(this.getItemPosition(v));O.preventDefault();}else{this.fireBorderReached({event:o,section:this,direction:t==="sapnext"?"down":"up"});}};
S.prototype._getNextViz=function(v){var V=this.getAllItems();var i=V.indexOf(v);return i===-1?V[0]:V[i+1];};
S.prototype._getPreviousViz=function(v){var V=this.getAllItems();var i=V.indexOf(v);return i===-1?V[V.length-1]:V[i-1];};
S.prototype.handleEmptyContentAreas=function(){var h=!!this.getDefaultItems().length,i=!!this.getFlatItems().length,C=!!this.getCompactItems().length,s=!h&&!C&&!i;this.oVBox.toggleStyleClass("sapUshellSectionNoVisualizations",s);this.oDefaultArea.toggleStyleClass("sapUshellSectionDefaultArea",h);this.oFlatArea.toggleStyleClass("sapUshellSectionFlatArea",i);var v=this.oVBox.getDomRef&&this.oVBox.getDomRef();if(v&&this.getEditable()&&this.getShowNoVisualizationsText()&&s){v.setAttribute("aria-describedBy",this.byId("noVisualizationsText").getId());}else if(v){v.removeAttribute("aria-describedBy");}};
S.prototype.init=function(){this.oVBox=this.byId("content");this.oDefaultArea=this.byId("defaultArea");this.oFlatArea=this.byId("flatArea");this.oCompactArea=this.byId("compactArea");this.oNoVisualizationsText=this.byId("noVisualizationsText");this.oCompactArea.setVisible(true);var A=function(){var v=this.oVBox.getDomRef();if(v){var s;if(this.getTitle().trim()){s=r.i18n.getText("Section.Description",this.getTitle());}else{s=r.i18n.getText("Section.Description.EmptySectionTitle");}v.setAttribute("aria-label",s);}}.bind(this);this.oVBox.addEventDelegate({onBeforeRendering:function(){this.byId("title-edit").detachChange(A);}.bind(this),onAfterRendering:function(){var v=this.oVBox.getDomRef();if(this.getEditable()){v.setAttribute("tabindex","0");}A();v.setAttribute("role","group");this.byId("title-edit").attachChange(A);}.bind(this)});this.oDefaultArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oFlatArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oCompactArea.addEventDelegate({onAfterRendering:this.handleEmptyContentAreas.bind(this)});this.oDefaultArea.attachBorderReached(this.onBorderReached.bind(this));this.oFlatArea.attachBorderReached(this.onBorderReached.bind(this));this.oCompactArea.attachBorderReached(this.onBorderReached.bind(this));this._oInvisibleMessageInstance=I.getInstance();this._oDefaultItemsChangeDetection=new E("defaultItems",this,["flatItems","compactItems"]);this._oFlatItemsChangeDetection=new E("flatItems",this,["defaultItems","compactItems"]);this._oCompactItemsChangeDetection=new E("compactItems",this,["defaultItems","flatItems"]);this._fnGlobalDragStart=function(){this.setProperty("_duringDrag",true);}.bind(this);this._fnGlobalDragEnd=function(){this.setProperty("_duringDrag",false);}.bind(this);document.addEventListener("dragstart",this._fnGlobalDragStart,false);document.addEventListener("dragend",this._fnGlobalDragEnd,false);};
S.prototype.destroy=function(){X.prototype.destroy.apply(this,arguments);this._oDefaultItemsChangeDetection.destroy();this._oFlatItemsChangeDetection.destroy();this._oCompactItemsChangeDetection.destroy();document.removeEventListener("dragstart",this._fnGlobalDragStart,false);document.removeEventListener("dragend",this._fnGlobalDragEnd,false);if(this.oCompactItemsNavigation){this.oCompactArea.removeDelegate(this.oCompactItemsNavigation);this.oCompactItemsNavigation.destroy();this.oCompactItemsNavigation=null;}if(this._oInvisibleMessageInstance){this._oInvisibleMessageInstance.destroy();}X.prototype.destroy.apply(this,arguments);};
S.prototype.setEditable=function(v){if(v===undefined||this.getEditable()===v){return this;}else{this.setProperty("editable",!!v,true);this.oVBox.toggleStyleClass("sapUshellSectionEdit",!!v);return this;}};
S.prototype._showHidePressed=function(v){var M=sap.ui.getCore().getLibraryResourceBundle("sap.m");this._oInvisibleMessageInstance.announce([r.i18n.getText(v?"Section.nowBeingShown":"Section.nowBeingHidden"),r.i18n.getText("Section.ButtonLabelChanged"),r.i18n.getText(v?"Section.Button.Hide":"Section.Button.Show"),M.getText("ACC_CTR_TYPE_BUTTON")].join(" "),a.Polite);this.setShowSection(v);};
S.prototype.setShowSection=function(v){if(v===undefined||this.getShowSection()===v){return this;}else{this.setProperty("showSection",v,true);this.oVBox.toggleStyleClass("sapUshellSectionHidden",!v);this.fireSectionVisibilityChange({visible:v});return this;}};
S.prototype._reorderVisualizations=function(i){this.fireVisualizationDrop(i.getParameters());};
S.prototype.getClosestVizualization=function(R,A){var v=this.getAllItems();return _(R,v,A);};
S.prototype.getClosestVizIndex=function(o,A){var v=this.getClosestVizualization(o,A);return v?this.indexOfVisualization(v):-1;};
S.prototype.getClosestCompactItemIndex=function(o,A){var n=_(o,this.getCompactItems(),A);if(n){return this.indexOfVisualization(n);}return A?this.getVisualizations().length:0;};
S.prototype._onDragEnter=function(o){var h=o.getParameter("dragSession");var i=h.getDragControl();var s=i.getParent();var t=h.getDropControl&&h.getDropControl();if(!t){return;}if(!t.data("area")){t=t.getParent();}if(t.data("default")&&!s.data("default")){o.preventDefault();}this.fireAreaDragEnter({originalEvent:o,dragControl:i,sourceArea:s.data("area"),targetArea:t.data("area")});};
S.prototype.addAggregation=function(A,o){if(A==="defaultItems"||A==="flatItems"){this._addVisualizationLayoutData(o);}X.prototype.addAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this;};
S.prototype.insertAggregation=function(A,o){if(A==="defaultItems"||A==="flatItems"){this._addVisualizationLayoutData(o,A);}X.prototype.insertAggregation.apply(this,arguments);this.handleEmptyContentAreas();return this;};
S.prototype._getVisualizationLayoutData=function(v){if(v.getLayout){return v.getLayout();}return{rows:2,columns:2};};
S.prototype._getFlatVisualizationLayoutData=function(v){if(v.getLayout){return v.getLayout();}return{rows:1,columns:2};};
S.prototype._addVisualizationLayoutData=function(v,A){if(!v.getLayoutData()){var l=A==="defaultItems"?this._getVisualizationLayoutData(v):this._getFlatVisualizationLayoutData(v);v.setLayoutData(new G(l));}};
S.prototype._getDefaultDropIndicatorSize=function(v){return this._getDropIndicatorSize(v,D.Standard);};
S.prototype._getFlatDropIndicatorSize=function(v){return this._getDropIndicatorSize(v,D.Flat);};
S.prototype._getDropIndicatorSize=function(v,t){var p=v.getParent();var s=p&&p.data("area");if(t===s&&v.getLayoutData){var l=v.getLayoutData();return{rows:l.getRows(),columns:l.getColumns()};}var o={};var h=[];if(v.getSupportedDisplayFormats){h=v.getSupportedDisplayFormats();}if(t===D.Flat){o.rows=1;o.columns=2;if(!h.includes(D.Flat)&&h.includes(D.FlatWide)){o.columns=4;}}else{o.rows=2;o.columns=2;if(!h.includes(D.Standard)&&h.includes(D.StandardWide)){o.columns=4;}}return o;};
S.prototype.getItemPosition=function(v){if(isFinite(v)){v=this.getVisualizations()[v];}var i=this.oDefaultArea.getItems().indexOf(v);if(i>=0){return{index:i,area:D.Standard};}i=this.oFlatArea.getItems().indexOf(v);if(i>=0){return{index:i,area:D.Flat};}i=this.oCompactArea.getItems().indexOf(v);if(i>=0){return{index:i,area:D.Compact};}return{index:-1,area:D.Standard};};
S.prototype._focusItem=function(p){window.setTimeout(function(){var h=p&&p.area?p.area:D.Standard;var i=p&&p.index?p.index:p;var n=this.oDefaultArea.getItems().length;var j=this.oFlatArea.getItems().length;var k=this.oCompactArea.getItems().length;if(isNaN(i)||i<0){i=0;}if(h===D.Standard&&n===0){h=D.Flat;}if(h===D.Flat&&j===0){h=D.Compact;}if(h===D.Compact&&k===0){h=D.Standard;}if(n+j+k===0){h="section";}switch(h){case"section":this.focus();break;case D.Flat:if(i>=j){i=j-1;}this.oFlatArea.focusItem(i);break;case D.Compact:this.oCompactArea.focusItem(i);break;default:if(i>=n){i=n-1;}this.oDefaultArea.focusItem(i);break;}}.bind(this),0);};
S.prototype.focusVisualization=function(i){var v;if(!this.getShowSection()&&!this.getEditable()){return false;}var V=this.getAllItems();if(!V.length){return false;}if(i&&i.area){this._focusItem(i);return true;}if(i&&i.getMetadata){v=i;}if(!v&&i&&i.keycode){switch(i.keycode){case K.ARROW_UP:v=this.getClosestVizualization(i.ref,true);break;case K.ARROW_DOWN:v=this.getClosestVizualization(i.ref,false);break;case K.ARROW_LEFT:i=-1;break;default:break;}}if(!v&&i===-1){v=V[V.length-1];}if(!v){v=V[0];}this._focusItem(this.getItemPosition(v));return true;};
return S;});
sap.ui.predefine('sap/ushell/ui/launchpad/Tile',["sap/base/Log","sap/m/Text","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","./TileRenderer"],function(L,T,M,C,I,q,u,r,A){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.Tile",{metadata:{library:"sap.ushell",properties:{long:{type:"boolean",group:"Misc",defaultValue:false},uuid:{type:"string",group:"Misc",defaultValue:null},tileCatalogId:{type:"string",group:"Misc",defaultValue:null},isCustomTile:{type:"boolean",group:"Misc",defaultValue:false},target:{type:"string",group:"Misc",defaultValue:null},debugInfo:{type:"string",group:"Misc",defaultValue:null},rgba:{type:"string",group:"Misc",defaultValue:null},animationRendered:{type:"boolean",group:"Misc",defaultValue:false},isLocked:{type:"boolean",group:"Misc",defaultValue:false},showActionsIcon:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},navigationMode:{type:"string",group:"Misc",defaultValue:null},isDraggedInTabBarToSourceGroup:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tileViews:{type:"sap.ui.core.Control",multiple:true,singularName:"tileView"},pinButton:{type:"sap.ui.core.Control",multiple:true,singularName:"pinButton"}},events:{press:{},coverDivPress:{},afterRendering:{},showActions:{},deletePress:{}}}});
a.prototype.init=function(){this.addDelegate({onsapenter:this._launchTileViaKeyboard,onsapspace:this._launchTileViaKeyboard},this);};
a.prototype.exit=function(){if(this.actionSheetIcon){this.actionSheetIcon.destroy();}if(this.actionIcon){this.actionIcon.destroy();}if(this.failedToLoadViewText){this.failedToLoadViewText.destroy();}};
a.prototype.getFailedtoLoadViewText=function(){if(!this.failedToLoadViewText){this.failedToLoadViewText=new T({text:r.i18n.getText("Tile.failedToLoadView")});}return this.failedToLoadViewText;};
a.prototype.getActionSheetIcon=function(){if(!this.getTileActionModeActive()){return undefined;}if(!this.actionSheetIcon){this.actionSheetIcon=new I({src:"sap-icon://overflow",tooltip:r.i18n.getText("configuration.category.tile_actions")}).addStyleClass("sapUshellTileActionIconDivBottomInner");}return this.actionSheetIcon;};
a.prototype.ontap=function(){L.info("Tile clicked:",this.getDebugInfo(),"sap.ushell.ui.launchpad.Tile");this.firePress();};
a.prototype.destroy=function(s){this.destroyTileViews();C.prototype.destroy.call(this,s);};
a.prototype.addTileView=function(o,s){o.setParent(null);M.prototype.addAggregation.call(this,"tileViews",o,s);};
a.prototype.destroyTileViews=function(){if(this.mAggregations.tileViews){this.mAggregations.tileViews.length=0;}};
a.prototype.onBeforeRendering=function(){var d=this.getDomRef();if(d){var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=null;}}};
a.prototype.onAfterRendering=function(){if(this.getIsDraggedInTabBarToSourceGroup()){var t=this.getParent();t.removeAggregation("tiles",this,false);}this._redrawRGBA();this._disableInnerLink();this.fireAfterRendering();};
a.prototype._disableInnerLink=function(){var d=this.getDomRef();var i=d.querySelector("a.sapUshellTileInner");if(i){i.onclick=function(e){e.preventDefault();};}};
a.prototype._launchTileViaKeyboard=function(e){if(this.getTileActionModeActive()){this.fireCoverDivPress({id:this.getId()});}else{this._announceLoadingApplication();if(e.target.tagName!=="BUTTON"){var t=this.getTileViews()[0],p=false,c,o;if(t.firePress){t.firePress({id:this.getId()});}else if(t.getComponentInstance){c=t.getComponentInstance();if(c._oController&&c._oController.oView.getContent()){o=c._oController.oView.getContent()[0];if(o&&o.firePress){o.firePress({id:this.getId()});}}}else{while(t.getContent&&!p){t=t.getContent()[0];if(t.firePress){t.firePress({id:this.getId()});p=true;}}}}}};
a.prototype.onfocusin=function(){var t=this.getDomRef();if(!t.classList.contains("sapUshellPlusTile")){var j=this.$().prevUntil("h3"),c;if(j.length>0){c=j[j.length-1].previousSibling;}else{c=t.previousSibling;}var o=t.querySelector(".sapUshellTileInner");if(o&&o.children&&o.children[0]){var l=[];if(c){l.push("sapUshellCatalogAccessibilityTileText");}else{l.push("sapUshellDashboardAccessibilityTileText");}var n=this.getNavigationMode();if(n){var N=r.i18n.getText(n+"NavigationMode");if(N){var s=this.getId()+"-navigationMode";if(!document.getElementById(s)){var b=document.createElement("div");b.setAttribute("id",s);b.style.display="none";b.innerText=N;o.appendChild(b);}l.push(s);}else{L.warning("The navigation mode is of a unkown mode, it can not be read!");}}l.push(o.children[0].getAttribute("id"));var d=t.querySelector(".sapUshellTileDeleteClickArea .sapUiIcon");if(d){l.push(d.id);}if(c){l.push(c.getAttribute("id"));}if(this.getTileActionModeActive()){l.push("sapUshellDashboardAccessibilityTileEditModeText");}t.setAttribute("aria-labelledby",l.join(" "));}}};
a.prototype.onclick=function(e){if(this.getTileActionModeActive()){var s=e.originalEvent.srcElement;if(q(s).closest(".sapUshellTileDeleteClickArea").length>0){this.fireDeletePress();}else{this.fireCoverDivPress({id:this.getId()});}}else{this._announceLoadingApplication();}};
a.prototype._announceLoadingApplication=function(){var o=document.getElementById("sapUshellLoadingAccessibilityHelper-appInfo"),l=r.i18n.getText("screenReaderNavigationLoading");if(o){o.setAttribute("role","alert");o.innerText=l;setTimeout(function(){o.removeAttribute("role");o.innerText="";},0);}};
a.prototype._initDeleteAction=function(){var t=this;if(!this.deleteIcon){this.deleteIcon=new I({src:"sap-icon://decline",tooltip:r.i18n.getText("removeButtonTitle")});this.deleteIcon.addEventDelegate({onclick:function(e){t.fireDeletePress();e.stopPropagation();}});this.deleteIcon.addStyleClass("sapUshellTileDeleteIconInnerClass");this.deleteIcon.addCustomData(new A({key:"aria-label",value:r.i18n.getText("removeButtonLabel"),writeToDom:true}));}return this.deleteIcon;};
a.prototype.setShowActionsIcon=function(s){if(s){if(!this.actionIcon){this.actionIcon=new I({size:"1rem",src:"sap-icon://overflow",press:function(){this.fireShowActions();this.addStyleClass("showTileActionsIcon");var e=sap.ui.getCore().getEventBus(),b=function(n,c,t){t.removeStyleClass("showTileActionsIcon");e.unsubscribe("dashboard","actionSheetClose",b);};e.subscribe("dashboard","actionSheetClose",b);}.bind(this)}).addStyleClass("sapUshellTileActionsIconClass");}}this.setProperty("showActionsIcon",s);};
a.prototype.setIsDraggedInTabBarToSourceGroup=function(d){this.setProperty("isDraggedInTabBarToSourceGroup",d);this.setVisible(!d);};
a.prototype.setRgba=function(v){this.setProperty("rgba",v);this._redrawRGBA();};
a.prototype._redrawRGBA=function(){var R=this.getRgba(),j=this.$();if(R&&j){var m=this.getModel();j.css("background-color",R);j.unbind("mouseenter mouseleave");var b,t=j.css("border").split("px")[0];if(t>0){b=j.css("border-color");}else{b=R;}j.hover(function(){if(m&&!m.getProperty("/tileActionModeActive")){var o=j.css("box-shadow"),s=o?o.split(") ")[1]:null;if(s){j.css("box-shadow",s+" "+b);}}},function(){j.css("box-shadow","");});}};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainer',["sap/base/Log","sap/m/Text","sap/m/library","sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ushell/override","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/PlusTile","sap/ushell/utils","sap/ushell/ui/launchpad/TileContainerRenderer"],function(L,T,M,a,C,I,D,q,o,u,r,P,b){"use strict";var H=M.HeaderLevel;
var c=C.extend("sap.ushell.ui.launchpad.TileContainer",{metadata:{library:"sap.ushell",properties:{scrollType:{type:"string",group:"Misc",defaultValue:"item"},animationSpeed:{type:"int",group:"Misc",defaultValue:500},groupId:{type:"string",group:"Misc",defaultValue:null},showHeader:{type:"boolean",group:"Misc",defaultValue:true},showPlaceholder:{type:"boolean",group:"Misc",defaultValue:true},defaultGroup:{type:"boolean",group:"Misc",defaultValue:false},isLastGroup:{type:"boolean",group:"Misc",defaultValue:false},headerText:{type:"string",group:"Misc",defaultValue:null},headerLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H2},groupHeaderLevel:{type:"sap.m.HeaderLevel",group:"Misc",defaultValue:H.H4},showGroupHeader:{type:"boolean",group:"Misc",defaultValue:true},homePageGroupDisplay:{type:"string",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},sortable:{type:"boolean",group:"Misc",defaultValue:true},showNoData:{type:"boolean",group:"Misc",defaultValue:false},noDataText:{type:"string",group:"Misc",defaultValue:null},isGroupLocked:{type:"boolean",group:"Misc",defaultValue:null},isGroupSelected:{type:"boolean",group:"Misc",defaultValue:false},editMode:{type:"boolean",group:"Misc",defaultValue:false},showBackground:{type:"boolean",group:"Misc",defaultValue:false},icon:{type:"string",group:"Misc",defaultValue:"sap-icon://locked"},showIcon:{type:"boolean",group:"Misc",defaultValue:false},deluminate:{type:"boolean",group:"Misc",defaultValue:false},showMobileActions:{type:"boolean",group:"Misc",defaultValue:false},enableHelp:{type:"boolean",group:"Misc",defaultValue:false},tileActionModeActive:{type:"boolean",group:"Misc",defaultValue:false},ieHtml5DnD:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},hidden:{type:"boolean",group:"Misc",defaultValue:false},transformationError:{type:"boolean",group:"Misc",defaultValue:false},supportLinkPersonalization:{type:"boolean",group:"Misc",defaultValue:false}},aggregations:{tiles:{type:"sap.ui.core.Control",multiple:true,singularName:"tile"},links:{type:"sap.ui.core.Control",multiple:true,singularName:"link"},beforeContent:{type:"sap.ui.core.Control",multiple:true,singularName:"beforeContent"},afterContent:{type:"sap.ui.core.Control",multiple:true,singularName:"afterContent"},footerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"footerContent"},headerActions:{type:"sap.ui.core.Control",multiple:true,singularName:"headerAction"}},events:{afterRendering:{},add:{},titleChange:{}}}});
c.prototype.init=function(){this.bIsFirstTitleChange=true;this._sDefaultValue=r.i18n.getText("new_group_name");this._sOldTitle="";this.oNoLinksText=new T({text:r.i18n.getText("emptyLinkContainerInEditMode")}).addStyleClass("sapUshellNoLinksAreaPresentTextInner");this.oTransformationErrorText=new T({text:r.i18n.getText("transformationErrorText")}).addStyleClass("sapUshellTransformationErrorText");this.oTransformationErrorIcon=new I({src:"sap-icon://message-error"}).addStyleClass("sapUshellTransformationErrorIcon");this.oIcon=new I({src:this.getIcon()});this.oIcon.addStyleClass("sapUshellContainerIcon");this.oPlusTile=new P({groupId:this.getGroupId(),enableHelp:this.getEnableHelp(),press:[this.fireAdd,this]});this.oPlusTile.setParent(this);if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("LaunchPage").then(function(l){if(l.isLinkPersonalizationSupported()){c.prototype.isLinkPersonalizationOveride();}});}};
c.prototype.onAfterRendering=function(){var t=window.document.getElementById(this.getId()+"-titleText");if(t){t.addEventListener("click",function(){var E=this.getModel()&&this.getModel().getProperty("/enableRenameLockedGroup"),f=(E||!this.getIsGroupLocked())&&!this.getDefaultGroup()&&this.getTileActionModeActive();this.setEditMode(f);}.bind(this));}var d=this.getTiles().filter(function(f){return f.isA("sap.ui.integration.widgets.Card");});this._resizeCards(d);var e=sap.ui.getCore().getEventBus();e.publish("launchpad","GroupHeaderVisibility");this.fireAfterRendering();};
c.prototype.getTransformationErrorText=function(){return this.oTransformationErrorText;};
c.prototype.getTransformationErrorIcon=function(){return this.oTransformationErrorIcon;};
c.prototype.getNoLinksText=function(){return this.oNoLinksText;};
c.prototype.setTransformationError=function(t){this.setProperty("transformationError",t,true);if(t){this.$().find(".sapUshellTransformationError").show();}else{this.$().find(".sapUshellTransformationError").hide();}this.$().find(".sapUshellNoLinksAreaPresent").toggleClass("sapUshellNoLinksAreaPresentError",t);return this;};
c.prototype.updateAggregation=o.updateAggregation;
c.prototype.setNoDataText=function(n){this.setProperty("noDataText",n,true);if(this.getShowNoData()){this.$().find(".sapUshellNoFilteredItems").text(n);}return this;};
c.prototype.setGroupId=function(v){this.setProperty("groupId",v,true);if(this.oPlusTile){this.oPlusTile.setGroupId(v);}return this;};
c.prototype.setHeaderText=function(h){this.setProperty("headerText",h,true);this.$().find(".sapUshellContainerTitle").text(h);return this;};
c.prototype.setVisible=function(v){this.setProperty("visible",v,true);this.toggleStyleClass("sapUshellHidden",!v);return this;};
c.prototype.setShowMobileActions=function(s){var S=true;if(this.oHeaderButton){this.oHeaderButton.setVisible(s);}else if(s){S=false;}this.setProperty("showMobileActions",s,S);};
c.prototype.setShowIcon=function(s){this.setProperty("showIcon",s,true);this.$().find(".sapUshellContainerIcon").toggleClass("sapUshellContainerIconHidden",!s);};
c.prototype.setDeluminate=function(d){this.setProperty("deluminate",d,true);this.toggleStyleClass("sapUshellDisableLockedGroupDuringDrag",d);return this;};
c.prototype.setHidden=function(h){this.setProperty("hidden",!!h,true);this.toggleStyleClass("sapUshellTileContainerEditModeHidden",!!h);return this;};
c.prototype.groupHasTiles=function(){var p="",t=this.getTiles(),l=[];if(this.getBindingContext()){p=this.getBindingContext().sPath;t=this.getModel().getProperty(p).tiles;}return b.groupHasVisibleTiles(t,l);};
c.prototype.getInnerContainerDomRef=function(){return this.$().find(".sapUshellTilesContainer-sortable")[0];};
c.prototype.getInnerContainersDomRefs=function(){var d=this.getDomRef();if(!d){return null;}return[d.querySelector(".sapUshellTilesContainer-sortable"),d.querySelector(".sapUshellLineModeContainer")];};
c.prototype.setEditMode=function(v){if(v){this.addStyleClass("sapUshellEditing");this._startEdit();}else{this.setProperty("editMode",v,false);this.removeStyleClass("sapUshellEditing");}};
c.prototype.isLinkPersonalizationOveride=function(){c.prototype.updateLinks=function(R){var g=this.getParent(),t=g&&g.getDisplayMode&&g.getDisplayMode()==="tabs";if(t&&!this.getTileActionModeActive()){g.removeLinksFromUnselectedGroups();}if(this.getLinks().length>0){this.removeAllLinks();}a.prototype.updateAggregation.call(this,"links");};c.prototype.destroyLinks=function(R){L.debug("link is destroyed because: "+R,null,"sap.ushell.ui.launchpad.TileContainer");};};
c.prototype.setShowEmptyLinksArea=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellLinksAreaHidden",!v);};
c.prototype.setShowEmptyLinksAreaPlaceHolder=function(v){this.setProperty("showEmptyLinksArea",v,true);this.toggleStyleClass("sapUshellTileContainerEditMode",v);this.toggleStyleClass("sapUshellTileContainerTabsModeEmptyLinksArea",v);this.toggleStyleClass("sapUshellEmptyLinksAreaPlaceHolder",!v);};
c.prototype._resizeCards=function(d){var e,m,s=5.5,t=0.4375,f,g,h,j;for(var i=0;i<d.length;i++){e=d[i];m=e.getManifest();f=m["sap.flp"].rows;g=m["sap.flp"].columns;h=g*s+(g-3)*t+"rem";j=f*s+(f-1)*t+"rem";e.setHeight(j);e.setWidth(h);}};
c.prototype._startEdit=function(){var t=this;if(this.getModel()&&!this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",true,false);}if(!this.oEditInputField){sap.ui.require(["sap/m/Input"],function(d){t.setProperty("editMode",true,false);t.oEditInputField=new d({placeholder:t._sDefaultValue,value:t.getHeaderText()}).addStyleClass("sapUshellTileContainerTitleInput");t.oEditInputField.addEventDelegate({onAfterRendering:function(){setTimeout(function(){if(t.oEditInputField.$().is(":visible")){setTimeout(function(){t.oEditInputField.$().find("input").focus();},100);var w=q(window).height(),j=t.getDomRef(),g=j.offsetHeight,e=j.getBoundingClientRect().top,f=j.offsetTop;if(g+e>w){q(".sapUshellDashboardView section").stop().animate({scrollTop:f},0);}}},100);},onfocusout:function(){t._stopEdit();q.proxy(t.setEditMode,t,false)();},onsapenter:function(e){t._stopEdit();q.proxy(t.setEditMode,t,false)();setTimeout(function(){var f=e.srcControl,j=f.$().prev();j.focus();},0);}});t.oEditInputField.setValue(t.getHeaderText());});}else{this.oEditInputField.setValue(this.getHeaderText());t.setProperty("editMode",true,false);}this._sOldTitle=this._sDefaultValue;if(D.system.phone){setTimeout(function(){var e=sap.ui.getCore().getEventBus();e.publish("launchpad","scrollToGroup",{group:t,groupChanged:false,focus:false});},100);}};
c.prototype._stopEdit=function(){var s=this.getHeaderText();var n=this.oEditInputField.getValue(),h;n=n.substring(0,256).trim()||this._sDefaultValue;h=n!==s;if(this.bIsFirstTitleChange&&n===this.oEditInputField.getPlaceholder()){h=true;}this.bIsFirstTitleChange=false;if(this.getModel()&&this.getModel().getProperty("/editTitle")){this.getModel().setProperty("/editTitle",false,false);}if(!this._sOldTitle){this._sOldTitle=s;this.setHeaderText(s);}else if(h){this.fireTitleChange({newTitle:n});this.setHeaderText(n);}};
c.prototype.exit=function(){if(this.oPlusTile){this.oPlusTile.destroy();}if(this.oHeaderButton){this.oHeaderButton.destroy();}if(this.oActionSheet){this.oActionSheet.destroy();}if(C.prototype.exit){C.prototype.exit.apply(this,arguments);}};
return c;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerRenderer',["sap/ushell/resources","sap/ushell/utils","sap/ushell/bootstrap/common/common.load.model","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/core/CustomData"],function(r,u,m,C,A,a){"use strict";var T={};T.oModel=m.getModel();
T.render=function(R,c){var h=c.getHeaderActions(),b=c.getBeforeContent(),d=c.getAfterContent(),f=c.getFooterContent()||[],l=c.getLinks(),t=this;R.write("<div");R.writeControlData(c);R.addClass("sapUshellTileContainer");R.writeClasses();R.write(">");if(b.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerBeforeContent");R.addClass("sapContrastPlus");R.writeClasses();R.write(">");b.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("<div");R.addClass("sapUshellTileContainerContent");if(c.getIsGroupLocked()){R.addClass("sapUshellTileContainerLocked");}if(c.getDefaultGroup()){R.addClass("sapUshellTileContainerDefault");}if(c.getShowBackground()){R.addClass("sapUshellTileContainerEditMode");}R.writeClasses();R.writeAttribute("tabindex","-1");R.write(">");if(c.getShowBackground()){R.write("<div");R.addClass("sapUshellGroupBackgroundContainer sapContrastPlus");R.writeClasses();R.write(">");R.write("</div>");}if(c.getShowHeader()){R.write("<div");R.addClass("sapUshellTileContainerHeader sapContrastPlus");if(!c.getShowGroupHeader()){R.addClass("sapUshellFirstGroupHeaderHidden sapUiPseudoInvisibleText");}R.writeAttribute("id",c.getId()+"-groupheader");R.writeClasses();var s;if(c.getDefaultGroup()){s=r.i18n.getText("ariaLabelEditModeGroupDefault",c.getHeaderText());}else if(c.getIsGroupLocked()){s=r.i18n.getText("ariaLabelEditModeGroupLocked",c.getHeaderText());}else{s=r.i18n.getText("ariaLabelEditModeGroup",c.getHeaderText());}R.writeAccessibilityState(c,{label:s});R.write(">");R.write("<div");R.writeAttribute("id",c.getId()+"-title");R.addClass("sapUshellContainerTitleFlex");R.writeClasses();R.write(">");R.write("<");R.write(c.getHeaderLevel().toLowerCase());R.addClass("sapUshellContainerTitle");R.writeClasses();R.writeAttributeEscaped("title",c.getHeaderText());R.writeAttribute("id",c.getId()+"-titleText");R.writeAttribute("data-role","group");R.write(">");R.writeEscaped(c.getHeaderText());R.write("</");R.write(c.getHeaderLevel().toLowerCase());R.writeAttribute("id",c.getId()+"-groupheader");R.write(">");if(c.getShowIcon()){c.oIcon.removeStyleClass("sapUshellContainerIconHidden");}else{c.oIcon.addStyleClass("sapUshellContainerIconHidden");}R.renderControl(c.oEditInputField);if(c.getIsGroupLocked()){R.renderControl(c.oIcon);}else if(c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellContainerHeaderActions");R.writeClasses();R.write(">");h.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");R.write("</div>");}R.write("<ul");R.addClass("sapUshellTilesContainer-sortable");R.addClass("sapUshellInner");R.writeClasses();R.write(">");var v=[];c.getTiles().forEach(function(o){if(o.getVisible()){v.push(o);}});v.forEach(function(o,p){o.addCustomData(new A({key:"aria-posinset",value:(p+1).toString(),writeToDom:true}));o.addCustomData(new A({key:"aria-setsize",value:v.length.toString(),writeToDom:true}));if(t._isUserActivityCard(o)){t._updateUserActivityCardVisibility(o);}R.renderControl(o);});if(c.getShowPlaceholder()){R.renderControl(c.oPlusTile);}if(c.getShowNoData()){this.renderNoData(R,c,!v.length);}R.write("</ul>");var L=c.getSupportLinkPersonalization();if(l.length>0||L){R.write("<div aria-hidden='true'");var e="sapUshellLineModeContainer";R.addClass(e);if(!l.length&&L){R.addClass("sapUshellNoLinksAreaPresent");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellNoLinksAreaPresentText");R.writeClasses();R.write(">");R.renderControl(c.getNoLinksText());R.write("</div>");}else{R.writeClasses();R.write(">");}if(L){R.write("<div");R.addClass("sapUshellTransformationError");R.writeClasses();if(!c.transformationError){R.style("display","none");R.writeStyles();}R.write(">");R.write("<div");R.addClass("sapUshellTransformationErrorInnerWrapper");R.writeClasses();R.write(">");R.renderControl(c.getTransformationErrorIcon());R.renderControl(c.getTransformationErrorText());R.write("</div>");R.write("</div>");}if(L){R.write("<div class='sapUshellLinksInnerContainer'>");}l.map(function(g,i,l){if(L){var j=new A({key:"tabindex",value:"-1",writeToDom:true});g.getCustomData().map(function(k){if(k.getKey()=="tabindex"&&k.getValue("0")){j=k;}g.removeCustomData(k);});g.addCustomData(new A({key:"aria-posinset",value:(i+1).toString(),writeToDom:true}));g.addCustomData(new A({key:"aria-setsize",value:l.length.toString(),writeToDom:true}));g.addCustomData(j);if(g.getModel()&&g.getModel().getProperty("/enableHelp")){g.addCustomData(new a({key:"help-id",value:g.getBindingContext()&&g.getBindingContext().getProperty("tileCatalogId"),writeToDom:true}));}g.addStyleClass("sapUshellLinkTile");if(c.getIsGroupLocked()){g.addStyleClass("sapUshellLockedTile");}}R.renderControl(g);});if(L){R.write("</div>");}R.write("</div>");}if(f.length>0){R.write("<footer");R.addClass("sapUshellTilesContainerFtr");R.writeClasses();R.write(">");f.forEach(function(c){R.renderControl(c);});R.write("</footer>");}R.write("</div>");if(d.length&&c.getTileActionModeActive()){R.write("<div");R.addClass("sapUshellTileContainerAfterContent");R.addClass("sapContrastPlus ");R.writeClasses();R.write(">");d.forEach(function(c){R.renderControl(c);});R.write("</div>");}R.write("</div>");u.setPerformanceMark("FLP -- tile container renderer");};
T.renderNoData=function(R,c,d){R.write("<div id='"+c.getId()+"-listNoData' class='sapUshellNoFilteredItems sapUiStrongBackgroundTextColor'>");if(d){if(c.getNoDataText()){R.writeEscaped(c.getNoDataText());}else{R.writeEscaped(c.getNoDataText(r.i18n.getText("noFilteredItems")));}}else{R.writeEscaped("");}R.write("</div>");};
T._isUserActivityCard=function(c){if(typeof c.getManifest!=="function"){return false;}var M=c.getManifest();var s=M&&M["sap.card"]&&M["sap.card"].header&&M["sap.card"].header.title;return s===r.i18n.getText("recentActivities")||s===r.i18n.getText("frequentActivities");};
T._updateUserActivityCardVisibility=function(c){c.setVisible(C.last("/core/shell/model/enableTrackingActivity"));C.on("/core/shell/model/enableTrackingActivity").do(function(e){c.setVisible(e);});};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileContainerUtils',["sap/base/util/uid"],function(u){"use strict";var T={};
T.showHideTilesAndHeaders=function(i,o){var s,r,e,n=0,a=0;for(s in i.onScreenPathIndexMap){if(i.onScreenPathIndexMap.hasOwnProperty(s)){e=i.onScreenPathIndexMap[s];r=o[e.aItemsRefrenceIndex];if(r.getVisible()&&!e.isVisible){a++;}r.setVisible(e.isVisible);if(e.isVisible){n++;}}}return{nCountVisibElelemnts:n,nCountFilteredElement:a};};
T.applyFilterOnItem=function(e,f,p,n){var a;for(a in f){if(f.hasOwnProperty(a)){f[a](e);}}if(p){p(e,n);}};
T.createNewItem=function(e,n){var b=this.mBindingInfos[n],f=b.factory,a=function(c){var i=this.getId()+"-"+u(),C=f(i,c);C.setBindingContext(c,b.model);return C;}.bind(this);return a(e);};
T.addNewItem=function(c,n){var a=this.getMetadata().getJSONKeys()[n];this[a._sMutator](c);return true;};
T.createMissingElementsInOnScreenElements=function(i,e,a,f,I,b,n){var p,j,c=e.length;for(j=a;j<c;j++){p=e[j].getPath();if(!i.onScreenPathIndexMap[p]){if(f(e[j],n)==false){return false;}T.applyFilterOnItem(e[j],b);}else{throw true;}}return true;};
T.createMissingElementsInOnScreenElementsSearchCatalog=function(i,e,a,f,I,b,n,p){var c,j,d=e.length;for(j=0;j<d;j++){c=e[j].getPath();if(!i.onScreenPathIndexMap[c]){if(f(e[j],n)==false){return false;}}T.applyFilterOnItem(e[j],b,p,n);}return true;};
T.applyFilterOnAllItems=function(b,f,p){var B;var o=b.binding,a;if(!o){return;}a=o.getContexts();for(B=0;B<a.length;B++){T.applyFilterOnItem(a[B],f,p);}};
T.validateOrder=function(b,i,a){var l,f,p,L,F,n,s,c;if(b[a]&&i.length>0){l=i[i.length-1].getBindingContext().getPath();f=b[a].getPath();L=l.split("/");F=f.split("/");for(n=0;n<L.length&&n<F.length;n++){s=L[n];c=F[n];if(!!parseInt(s,10)&&!!parseInt(c,10)){if(parseInt(s,10)>parseInt(c,10)){return false;}else if(parseInt(s,10)<parseInt(c,10)){return true;}}else{for(p=0;p<c.length&&p<s.length;p++){if(s[p].charCodeAt()>c[p].charCodeAt()){return false;}else if(s[p].charCodeAt()<c[p].charCodeAt()){return true;}}}}}return true;};
T.markVisibleOnScreenElements=function(e,i,U){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(U){i.onScreenPathIndexMap[p].isVisible=true;}}else{return a;}}return a;};
T.markVisibleOnScreenElementsSearchCatalog=function(e,i,U){var a=0,p,b=e.length;for(a=0;a<b;a++){p=e[a].getPath();if(i.onScreenPathIndexMap[p]){if(U){i.onScreenPathIndexMap[p].isVisible=true;}}}return a;};
T.indexOnScreenElements=function(o,i){var p,a,b={onScreenPathIndexMap:{}},c=o.length,d,v=true;if(i===false){v=false;}for(a=0;a<c;a++){d=o[a];if(d.getBindingContext()){p=d.getBindingContext().getPath();if(!b.onScreenPathIndexMap[p]){b.onScreenPathIndexMap[p]={aItemsRefrenceIndex:a,isVisible:v};}}}return b;};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileRenderer',["sap/ushell/Config","sap/base/Log","sap/m/Text"],function(C,L,T){"use strict";var a={apiVersion:2};
a.render=function(r,t){var o=null,c;try{o=t.getTileViews()[0];}catch(e){L.warning("Failed to load tile view: ",e.message);o=t.getFailedtoLoadViewText();}var b=C.last("/core/home/gridContainer")&&t.getParent().getParent()||t.getParent(),d=[];if(b&&b.getTiles){d=b.getTiles();}else if(b&&b.getAppBoxesContainer&&b.getCustomTilesContainer){d=b.getAppBoxesContainer().concat(b.getCustomTilesContainer());}var v=d.filter(function(g){return g.getVisible();});var i=v.indexOf(t)>-1?v.indexOf(t)+1:"";if(!b){return;}r.openStart("li",t);if(C.last("/core/shell/model/enableHelp")){r.attr("data-help-id",t.getTileCatalogId());}r.class("sapUshellTile");if(t.getTileActionModeActive()){r.class("sapUshellTileWrapper");}if(o&&o.getContent){c=o.getContent();c.forEach(function(I){if(I.isA("sap.suite.ui.commons.FeedTile")){r.class("sapUshellFeedTileBG");}});}if(t.getLong()){r.class("sapUshellLong");}if(!t.getVisible()){r.class("sapUshellHidden");}if(t.getIsLocked()){r.class("sapUshellLockedTile");}if(C.last("/core/home/sizeBehavior")==="Small"){r.class("sapUshellSmall");}r.attr("aria-posinset",i);r.attr("aria-setsize",v.length);var f=b.getId()+"-titleText";r.attr("aria-describedby",f);r.attr("tabindex","-1");r.openEnd();if(t.getTileActionModeActive()){this.renderTileActionMode(r,t);this.renderTileView(r,t,o);}else{r.openStart("div");r.class("sapUshellTileWrapper");r.openEnd();this.renderTileView(r,t,o);if(t.getShowActionsIcon()){r.renderControl(t.actionIcon);}r.close("div");this.renderTileActionsContainer(r,o,t.getPinButton());}r.close("li");};
a.renderTileActionsContainer=function(r,t,p){p=p.length?p[0]:undefined;if(p){p.addStyleClass("sapUshellActionButton");r.openStart("div");r.class("sapUshellTilePinButtonOverlay");if(t.getHeader){r.attr("role","toolbar");r.attr("aria-label",t.getHeader());}r.openEnd();r.renderControl(p);r.close("div");}};
a.renderTileView=function(r,t,o){r.openStart("div");r.class("sapUshellTileInner");if(t.getTileActionModeActive()){r.class("sapUshellTileActionBG");}r.openEnd();r.renderControl(o);r.close("div");};
a.renderTileActionMode=function(r,t){r.openStart("div");r.class("sapUshellTileActionLayerDiv");r.openEnd();if(!t.getIsLocked()){r.openStart("div");r.class("sapUshellTileDeleteClickArea");r.openEnd();r.openStart("div");r.class("sapUshellTileDeleteIconOuterClass");r.openEnd();r.renderControl(t._initDeleteAction());r.close("div");r.close("div");}r.openStart("div");r.class("sapUshellTileActionDivCenter");r.openEnd();r.close("div");r.openStart("div");r.class("sapUshellTileActionIconDivBottom");r.openEnd();r.openStart("div");r.class("sapUshellTileActionIconDivBottomInnerDiv");r.openEnd();r.renderControl(t.getActionSheetIcon());r.close("div");r.close("div");r.close("div");};
return a;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/TileState',["sap/ui/core/Control","sap/ui/core/Icon","sap/ushell/resources","sap/ushell/library","./TileStateRenderer"],function(C,I,r){"use strict";
var T=C.extend("sap.ushell.ui.launchpad.TileState",{metadata:{library:"sap.ushell",properties:{state:{type:"string",group:"Misc",defaultValue:"Loaded"}},events:{press:{}}}});
T.prototype.init=function(){this._rb=r.i18n;this._sFailedToLoad=this._rb.getText("cannotLoadTile");this._oWarningIcon=new I(this.getId()+"-warn-icon",{src:"sap-icon://notification",size:"1.37rem"}).addStyleClass("sapSuiteGTFtrFldIcnMrk");this.attachPress(this._onPress);};
T.prototype.onclick=function(){this.firePress();};
T.prototype._onPress=function(e){if(this.getState()!=="Failed"){return;}if(!this.FailedTileDialog){sap.ui.require(["sap/ushell/ui/launchpad/FailedTileDialog"],function(F){this.FailedTileDialog=new F();this._onPress(e);}.bind(this));}else{this.FailedTileDialog.openFor(this);}};
T.prototype.exit=function(){this._oWarningIcon.destroy();};
T.prototype.setState=function(s,i){this.setProperty("state",s,i);return this;};
return T;});
sap.ui.predefine('sap/ushell/ui/launchpad/TileStateRenderer',["sap/ui/core/HTML"],function(H){"use strict";var T={};
T.render=function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellGT");r.writeClasses();r.write(">");var s=c.getState();r.write("<div");r.addClass("sapUshellOverlay");r.writeClasses();r.writeAttribute("id",c.getId()+"-overlay");if(s==="Failed"){r.writeAttribute("title",c._sFailedToLoad);}r.write(">");switch(s){case"Loading":var b=new H({content:"<div class='sapUshellTileStateLoading'><div>"});b.setBusyIndicatorDelay(0);b.setBusy(true);r.renderControl(b);break;case"Failed":r.write("<div");r.writeAttribute("id",c.getId()+"-failed-ftr");r.addClass("sapUshellTileStateFtrFld");r.writeClasses();r.write(">");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-icon");r.addClass("sapUshellTileStateFtrFldIcn");r.writeClasses();r.write(">");r.renderControl(c._oWarningIcon);r.write("</div>");r.write("<div");r.writeAttribute("id",c.getId()+"-failed-text");r.addClass("sapUshellTileStateFtrFldTxt");r.writeClasses();r.write(">");r.writeEscaped(c._sFailedToLoad);r.write("</div>");r.write("</div>");break;default:}r.write("</div>");r.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/launchpad/section/CompactArea',["sap/ui/core/Control","sap/ui/events/KeyCodes","sap/ushell/library","./CompactAreaRenderer"],function(C,K,u){"use strict";
var a=C.extend("sap.ushell.ui.launchpad.section.CompactArea",{metadata:{library:"sap.ushell",properties:{showEmptyLinksArea:{type:"boolean",group:"Misc",defaultValue:false},showEmptyLinksAreaPlaceHolder:{type:"boolean",group:"Misc",defaultValue:false},enableLinkReordering:{type:"boolean",group:"Behavior",defaultValue:false}},dnd:{draggable:false,droppable:true},aggregations:{items:{type:"sap.ui.core.Control",singularName:"item",multiple:true,dnd:true}},events:{borderReached:{parameters:{event:{type:"jQuery.Event"}}},itemDrop:{parameters:{draggedControl:{type:"sap.ui.core.Control"},droppedControl:{type:"sap.ui.core.Control"},dropPosition:{type:"string"}}}}}});
a.prototype.onBorderReached=this.fireBorderReached;
a.prototype.onsapnext=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_RIGHT){var i=this.getFocusedItemIndex();if(i>=0&&i<this.getItems().length-1){this.focusItem(i+1);return;}}this.fireBorderReached({event:e});};
a.prototype.onsapprevious=function(e){e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_LEFT){var i=this.getFocusedItemIndex();if(i>0){this.focusItem(i-1);return;}}this.fireBorderReached({event:e});};
a.prototype.onsapnextmodifiers=function(e){if(!this.getEnableLinkReordering()){return;}var i=this.getFocusedItemIndex();var I=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_RIGHT&&i>-1&&i<I.length-1){this.fireItemDrop({draggedControl:I[i],droppedControl:I[i+1],dropPosition:"After",browserEvent:e});}if(e.keyCode===K.ARROW_DOWN&&i>-1){this.fireItemDrop({draggedControl:I[i],droppedControl:null,dropPosition:"After",browserEvent:e});}};
a.prototype.onsappreviousmodifiers=function(e){if(!this.getEnableLinkReordering()){return;}var i=this.getFocusedItemIndex();var I=this.getItems();e.stopImmediatePropagation(true);e.preventDefault();if(e.keyCode===K.ARROW_LEFT&&i>0){this.fireItemDrop({draggedControl:I[i],droppedControl:I[i-1],dropPosition:"Before",browserEvent:e});}if(e.keyCode===K.ARROW_UP&&i>-1){this.fireItemDrop({draggedControl:I[i],droppedControl:null,dropPosition:"Before",browserEvent:e});}};
a.prototype.focusItem=function(i){i=i||0;var I=this.getItems();if(i===-1||i>=I.length){i=I.length-1;}if(i>=0){var f=I[i].getFocusDomRef()||I[i].getDomRef();(f.querySelector("a")||f).focus();}else{this.focus();}};
a.prototype.onmousedown=function(e){var i=this.getDOMItemIndex(e.srcControl.getDomRef());var f=this.getFocusedItemIndex();if(f<0){f=0;}if(i<0){window.setTimeout(function(){this.focusItem(f);}.bind(this),0);}};
a.prototype.getDOMItemIndex=function(e){var i=-1;this.getItems().forEach(function(I,b){var d=I.getDomRef();if(d&&d.contains(e)){i=b;}});return i;};
a.prototype.onfocusin=function(e){if(document.activeElement===this.getDomRef()){this.focusItem(0);}};
a.prototype.getFocusedItemIndex=function(){return this.getDOMItemIndex(document.activeElement);};
return a;});
sap.ui.predefine('sap/ushell/ui/launchpad/section/CompactAreaRenderer',["sap/ushell/resources"],function(r){"use strict";var C={apiVersion:2};
C.render=function(a,c){a.openStart("div",c);if(!c.getVisible()){a.style("display","none");}a.attr("role","group");a.attr("aria-label",r.i18n.getText("Section.CompactArea.Description"));a.style("width","100%");a.class("sapUshellSectionCompactArea");a.openEnd();c.getItems().forEach(a.renderControl);a.close("div");};
return C;},true);
sap.ui.predefine('sap/ushell/ui/shell/ContentRenderer',["sap/ui/base/Object"],function(B){"use strict";
var C=B.extend("sap.ushell.ui.shell.ContentRenderer",{
constructor:function(c,s,o,a){B.apply(this);this._id=s;this._cntnt=o;this._ctrl=c;this._rm=sap.ui.getCore().createRenderManager();this._cb=a||function(){};},
destroy:function(){this._rm.destroy();delete this._rm;delete this._id;delete this._cntnt;delete this._cb;delete this._ctrl;if(this._rerenderTimer){clearTimeout(this._rerenderTimer);delete this._rerenderTimer;}B.prototype.destroy.apply(this,arguments);},
render:function(){if(!this._rm){return;}if(this._rerenderTimer){clearTimeout(this._rerenderTimer);}this._rerenderTimer=setTimeout(function(){var $=document.getElementById(this._id);var d=$!=null;if(d){if(typeof(this._cntnt)==="string"){var c=this._ctrl.getAggregation(this._cntnt,[]);for(var i=0;i<c.length;i++){this._rm.renderControl(c[i]);}}else{this._cntnt(this._rm);}this._rm.flush($);}this._cb(d);}.bind(this),0);}
});
return C;});
sap.ui.predefine('sap/ushell/ui/shell/FloatingContainer',["sap/ui/core/Control","sap/ui/Device","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/EventHub","sap/ushell/library"],function(C,D,M,q,S,E){"use strict";
var F=C.extend("sap.ushell.ui.shell.FloatingContainer",{
metadata:{library:"sap.ushell",properties:{},aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},
renderer:{render:function(r,c){r.write("<div");r.writeControlData(c);r.addClass("sapUshellFloatingContainer");r.writeClasses();r.write(">");if(c.getContent()&&c.getContent().length){r.renderControl(c.getContent()[0]);}r.write("</div>");}}
});
F.prototype.init=function(){D.resize.attachHandler(F.prototype._handleResize,this);};
F.prototype._getWindowHeight=function(){return q(window).height();};
F.prototype._setContainerHeight=function(c,f){c.css("max-height",f);};
F.prototype._handleResize=function(e){M.start("FLP:FloatingContainer_handleResize","resizing floating container","FLP");if(q(".sapUshellFloatingContainer").parent()[0]&&(q(".sapUshellContainerDocked").length===0)){this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];this.oWrapper.style.cssText=this.oStorage.get("floatingContainerStyle");var i=window.matchMedia?window.matchMedia("(max-width: 417px)").matches:false;this.adjustPosition(e,i);}else if(q(".sapUshellFloatingContainer").parent()[0]&&q(".sapUshellContainerDocked").length){if(q("#canvas").hasClass("sapUshellContainer-Narrow-Right")){var u;if(sap.ui.getCore().getConfiguration().getRTL()){q("#sapUshellFloatingContainerWrapper").css("left",(416/q(window).width()*100)+"%");u=416/q(window).width()*100+"%;";}else{q("#sapUshellFloatingContainerWrapper").css("left",100-416/q(window).width()*100+"%");u=100-416/q(window).width()*100+"%;";}this.oWrapper.style.cssText="left:"+u+this.oWrapper.style.cssText.substring(this.oWrapper.style.cssText.indexOf("top"));this.oStorage.put("floatingContainerStyle",this.oWrapper.style.cssText);}}if(q(".sapUshellContainerDocked").length>0){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerDockedIsResize");E.emit("ShellFloatingContainerDockedIsResized",Date.now());}var d=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(d.name!=="Desktop"&&(q(".sapUiMedia-Std-Desktop").width()-416<d.from)&&(q(".sapUshellContainerDocked").length)){q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked");if(q("#canvas").hasClass("sapUshellContainer-Narrow-Right")){q("#canvas").removeClass("sapUshellContainer-Narrow-Right sapUshellMoveCanvasRight");}else{q("#canvas").removeClass("sapUshellContainer-Narrow-Left sapUshellMoveCanvasLeft");}q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().byId("mainShell").getController()._handleAnimations(false);var s=new S(S.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");if(s){s.put("lastState","floating");}sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDockedOnResize");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");var v=sap.ui.getCore().byId("viewPortContainer");if(v){v._handleSizeChange();}}M.end("FLP:FloatingContainer_handleResize");};
F.prototype.adjustPosition=function(e,i){var w=e?e.width:q(window).width(),W=e?e.height:q(window).height(),c=this.oContainer.width(),a=this.oContainer.height(),b,d,l,t,f=sap.ui.getCore().getConfiguration().getRTL();i=i!==undefined?i:false;if(this.oWrapper){l=this.oWrapper.style.left.replace("%","");l=w*l/100;t=this.oWrapper.style.top.replace("%","");t=W*t/100;if(!isNaN(l)&&!isNaN(t)&&!i){if(f){b=(l<c)||(l>w);if(b){l=l<c?c:w;}}else{b=(l<0)||(w<(l+c));if(b){l=l<0?0:(w-c);}}d=(t<0)||(W<(t+a));if(d){t=t<0?0:(W-a);}if(!b&&!d){this.oWrapper.style.left=l*100/w+"%";this.oWrapper.style.top=t*100/W+"%";this.oWrapper.style.position="absolute";return;}this.oWrapper.style.left=l*100/w+"%";this.oWrapper.style.top=t*100/W+"%";this.oWrapper.style.position="absolute";}}};
F.prototype.handleDrop=function(){if(this.oWrapper){this.adjustPosition();this.oStorage.put("floatingContainerStyle",this.oWrapper.style.cssText);}};
F.prototype.setContent=function(c){if(this.getDomRef()){var r=sap.ui.getCore().createRenderManager();r.renderControl(c);r.flush(this.getDomRef());r.destroy();}this.setAggregation("content",c,true);};
F.prototype.onAfterRendering=function(){this.oStorage=this.oStorage||new S(S.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");this.oContainer=q(".sapUshellFloatingContainer");this.oWrapper=q(".sapUshellFloatingContainer").parent()[0];};
F.prototype.exit=function(){D.resize.detachHandler(F.prototype._resizeHandler,this);};
return F;});
sap.ui.predefine('sap/ushell/ui/shell/NavigationMiniTile',["sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(C,I){"use strict";
var N=C.extend("sap.ushell.ui.shell.NavigationMiniTile",{
metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},subtitle:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},intent:{type:"string",group:"Misc",defaultValue:null}},aggregations:{},events:{press:{}}},
renderer:{render:function(r,c){var t=c.getTitle();var s=c.getSubtitle();var i=c.getIcon();var o=I.createControlByURI(i);r.write("<div tabindex=\"-1\" class=\"sapUshellNavMiniTile\" ");r.writeControlData(c);r.writeAttributeEscaped("role","listitem");r.writeAttributeEscaped("aria-label",s?t+" "+s:t);r.write(">");r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileTitle\" >");if(t){r.writeEscaped(t);}r.write("</span>");r.write("</div>");if(o){r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileIcon\">");r.renderControl(o);r.write("</span>");r.write("</div>");}else{r.write("<div>");r.write("<span class=\"sapUshellNavMiniTileSubtitle\" >");if(s){r.writeEscaped(s);}r.write("</span>");r.write("</div>");}r.write("</div>");}}
});
N.prototype.ontap=function(){this.firePress({});};
N.prototype.onsapenter=function(){this.firePress({});};
N.prototype.onsapspace=function(){this.firePress({});};
return N;});
sap.ui.predefine('sap/ushell/ui/shell/OverflowListItem',["sap/m/StandardListItem","sap/ui/core/CustomData","sap/ushell/library","sap/ushell/ui/shell/ShellHeadItem"],function(S,C,u,a){"use strict";var s=a.getMetadata().getProperties();
var O=S.extend("sap.ushell.ui.shell.OverflowListItem",{
metadata:{library:"sap.ushell",properties:{floatingNumber:{type:s.floatingNumber.type,group:s.floatingNumber.group,defaultValue:s.floatingNumber.defaultValue},floatingNumberMaxValue:{type:s.floatingNumberMaxValue.type,group:s.floatingNumberMaxValue.group,defaultValue:s.floatingNumberMaxValue.defaultValue},floatingNumberType:{type:s.floatingNumberType.type,group:s.floatingNumberType.group,defaultValue:s.floatingNumberType.defaultValue}}},
renderer:{}
});
O.prototype.FloatingNumberType=a.prototype.FloatingNumberType;O.prototype.init=a.prototype.init;O.prototype.onBeforeRendering=a.prototype.onBeforeRendering;O.prototype.tooltipFormatter=a.prototype.tooltipFormatter;O.prototype.floatingNumberFormatter=a.prototype.floatingNumberFormatter;
O.prototype._getImage=function(){var i=this._oImage;if(!i){i=S.prototype._getImage.call(this);}if(this.getFloatingNumber()>0){i.addStyleClass("sapUshellShellHeadItmCounter");i.addCustomData(new C({key:"counter-content",value:this.floatingNumberFormatter(),writeToDom:true}));}else{i.removeStyleClass("sapUshellShellHeadItmCounter");}this._oImage=i;return this._oImage;};
return O;},true);
sap.ui.predefine('sap/ushell/ui/shell/RightFloatingContainer',["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library"],function(C,q){"use strict";
var R=C.extend("sap.ushell.ui.shell.RightFloatingContainer",{
metadata:{library:"sap.ushell",properties:{size:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"56px"},top:{type:"string",group:"Appearance",defaultValue:"0"},right:{type:"string",group:"Appearance",defaultValue:"0"},textVisible:{type:"boolean",group:"Appearance",defaultValue:true},insertItemsWithAnimation:{type:"boolean",group:"Appearance",defaultValue:true},hideItemsAfterPresentation:{type:"boolean",group:"Appearance",defaultValue:false},enableBounceAnimations:{type:"boolean",group:"Appearance",defaultValue:false},actAsPreviewContainer:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{floatingContainerItems:{type:"sap.ui.core.Control",multiple:true}},events:{afterRendering:{}}},
renderer:{render:function(r,o){var i=sap.ui.getCore().getConfiguration().getRTL();r.write("<div");r.writeControlData(o);r.addClass("sapUshellRightFloatingContainer");r.writeClasses();r.addStyle("top",o.getTop()+"rem");r.addStyle(i?"left":"right",o.getRight());r.writeStyles();r.writeAttribute("data-role","alert");r.write(">");r.write("<ul");r.addClass("sapUshellNotificationListContainer");r.writeClasses();r.writeAttribute("role","list");r.write(">");this.renderFloatingContainerItems(r,o);r.write("</ul>");r.write("</div>");},renderFloatingContainerItems:function(r,o){var I=o.getInsertItemsWithAnimation(),a=o.getActAsPreviewContainer(),b=o.getFloatingContainerItems(),i;for(i=0;i<b.length;i++){if(a&&!I){b[i].addStyleClass("sapUshellNonAnimatedNotificationListItem");}else if(b[i].hasStyleClass("sapUshellNonAnimatedNotificationListItem")){b[i].addStyleClass("sapUshellNotificationsListItem");b[i].addStyleClass("sapUshellRightFloatingContainerItemBackToViewport");b[i].addStyleClass("sapUshellRightFloatingContainerItemHidden");b[i].addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");b[i].removeStyleClass("sapUshellNonAnimatedNotificationListItem");}r.renderControl(b[i]);}}}
});
R.prototype.init=function(){var t;q(window).bind("resize",function(){clearTimeout(t);t=setTimeout(this._handleResize.bind(this),100);}.bind(this));this.iRequiredItemsNumber=5;};
R.prototype.onBeforeRendering=function(){};
R.prototype._setSize=function(){};
R.prototype._handleResize=function(){if(this.getDomRef()&&this.getFloatingContainerItems().length){var n=this.iRequiredItemsNumber,a=window.innerHeight,d=this.getDomRef(),b=d.getBoundingClientRect().top,c=q(".sapUiSizeCompact").length>0?56:64,j=this.$().find("li").eq(0),e,I;if(!j.length){return;}e=j[0].clientHeight;var f=q("#sapUshellDashboardFooter").outerHeight();this.iRequiredItemsNumber=Math.min(parseInt((a-b-c-f)/e,10),5);if(n!==this.iRequiredItemsNumber){I=this.getFloatingContainerItems();for(var i=0;i<I.length;i++){if(i<this.iRequiredItemsNumber||isNaN(this.iRequiredItemsNumber)){I[i].removeStyleClass("sapUshellShellHidden");}else{I[i].addStyleClass("sapUshellShellHidden");}}}}};
R.prototype.onAfterRendering=function(){this.fireAfterRendering();setTimeout(function(){this._handleResize();}.bind(this),500);this.addStyleClass("sapContrastPlus");this.addStyleClass("sapContrast");this.addStyleClass("sapUshellNotificationsListItem");};
R.prototype.setVisible=function(v){this.setProperty("visible",v,true);if(v){q(this.getDomRef()).css("visibility","visible");}else{q(this.getDomRef()).css("visibility","hidden");}};
R.prototype.setFloatingContainerItemsVisiblity=function(v){var a=this.getFloatingContainerItems(),t=v?300:0,I=this.getInsertItemsWithAnimation(),_=function(b){if(v){a[b].removeStyleClass("sapUshellRightFloatingContainerItemBounceOut").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");}else{a[b].removeStyleClass("sapUshellRightFloatingContainerItemBounceIn").addStyleClass("sapUshellRightFloatingContainerItemBounceOut");}};for(var i=0;i<a.length;i++){(function(b){return function(){if(I){setTimeout(function(){_(b);},t+b*100);}else{a[b].setVisible(v);}};})(i)();}};
R.prototype._animationBouncer=function a(n){var _=function(){if(!a._animationQueue.length){a._itemTimeoutId=undefined;return;}var i=a._animationQueue.shift();i.addStyleClass("sapUshellRightFloatingContainerItmHeightVisible").addStyleClass("sapUshellRightFloatingContainerItemBounceIn");a._itemTimeoutId=setTimeout(_,100);};if(!a._animationQueue){a._animationQueue=[];}a._animationQueue.push(n);if(a._mainTimeoutId||a._itemTimeoutId){return;}a._mainTimeoutId=setTimeout(function(){a._mainTimeoutId=undefined;_();},500);};
R.prototype.addFloatingContainerItem=function(n){this.addAggregation("floatingContainerItems",n);n.addStyleClass("sapContrastPlus");if(this.getInsertItemsWithAnimation()){n.addStyleClass("sapUshellNotificationsListItem");n.addStyleClass("sapUshellRightFloatingContainerItemHidden");if(this.getEnableBounceAnimations()){R.prototype._animationBouncer(n);}else{setTimeout(function(){var i=this.getFloatingContainerItems();if(i.length>5){var l=i[i.length-1];l.addStyleClass("sapUshellRightFloatingContainerHideLastItem");}n.addStyleClass("sapUshellRightFloatingContainerItemBackToViewport").addStyleClass("sapUshellRightFloatingContainerItmHeightVisible");}.bind(this),500);}}else if(this.getActAsPreviewContainer()){n.addStyleClass("sapUshellNonAnimatedNotificationListItem");}if(this.getHideItemsAfterPresentation()){setTimeout(function(){n.removeStyleClass("sapUshellRightFloatingContainerItemBackToViewport");},3200);}};
return R;});
sap.ui.predefine('sap/ushell/ui/shell/ShellAppTitle',["sap/ushell/library","sap/m/Bar","sap/m/Button","sap/m/Label","sap/m/library","sap/m/Popover","sap/m/ResponsivePopover","sap/m/ToggleButton","sap/ui/core/IconPool","sap/ui/Device","sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ui/performance/Measurement","sap/ushell/services/AllMyApps"],function(l,B,a,L,m,P,R,T,I,D,C,A,r,M){"use strict";var b=l.AppTitleState;var c=l.AllMyAppsState;var d=m.PlacementType;
var S=a.extend("sap.ushell.ui.shell.ShellAppTitle",{
metadata:{library:"sap.ushell",associations:{navigationMenu:{type:"sap.ushell.ui.shell.ShellNavigationMenu"},allMyApps:{type:"sap.ui.core.mvc.ViewType.JS"}},events:{textChanged:{deprecated:true}}},
renderer:{apiVersion:2,render:function(o,e){var v=e._getControlVisibilityAndState(),t=e.getText(),f=e.getModel();o.openStart("h1",e);o.class("sapUshellHeadTitle");o.attr("aria-level","1");o.openEnd();o.openStart("span",e.getId()+"-button");o.class("sapUshellAppTitle");if(v||D.system.phone){o.class("sapUshellAppTitleClickable");o.attr("tabindex","0");}if(e.getTooltip_AsString()){o.attr("title",e.getTooltip_AsString());}if(v){o.attr("role","button");o.attr("aria-haspopup","dialog");if(f&&S._getCurrentState()===b.AllMyAppsOnly){o.attr("aria-label",r.i18n.getText("ShowAllMyApps_AriaLabel",[t]));}else{o.attr("aria-label",r.i18n.getText("ShellNavigationMenu_AriaLabel",[t]));}}o.openEnd();o.text(t||"");if(v&&t){o.openStart("span");o.class("sapUshellShellHeadAction");o.openEnd();o.openStart("span");o.class("sapUshellShellHeadActionImg");o.openEnd();o.renderControl(e.oIcon);o.close("span");o.close("span");}o.close("span");o.close("h1");}}
});
S.prototype.init=function(){a.prototype.init.apply(this,arguments);this.oIcon=I.createControlByURI(I.getIconURI("megamenu"));this.oIcon.addStyleClass("sapUshellAppTitleMenuIcon");if(D.system.desktop){this.addEventDelegate({onkeydown:function(e){if(e.altKey&&e.keyCode===40){this.onclick(e);}}.bind(this)});}};
S.prototype.getFocusDomRef=function(){return this.getDomRef("button");};
S._getCurrentState=function(){return C.last("/core/shellHeader/ShellAppTitleState");};
S.prototype.onclick=function(e){e.preventDefault();this.firePress();if(!this._getControlVisibilityAndState()){if(D.system.phone){window.hasher.setHash(C.last("/core/shellHeader/rootIntent"));}return;}if(S._getCurrentState()===b.AllMyAppsOnly){M.start("FLP:ShellAppTitle.onClick","Click ShellAppTitle in HOME state, Launching AllMyApps","FLP");this._openCloseAllMyAppsPopover();return;}this._openCloseNavMenuPopover();};
S.prototype._openCloseAllMyAppsPopover=function(){if(!this.oAllMyAppsPopover){this.oAllMyAppsPopover=this._createAllMyAppsPopover();}if(this.oAllMyAppsPopover){if(this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close();}else{this.oAllMyAppsPopover.openBy(this);}}};
S.prototype._openCloseNavMenuPopover=function(){if(!this.oNavMenuPopover){this.oNavMenuPopover=this._createNavMenuPopover();}this.getModel().setProperty("/ShellAppTitleState",b.ShellNavMenu);if(this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close();}else{this.oNavMenuPopover.openBy(this);}if(this.oNavMenuPopover.getFooter()){var s=C.last("/core/shell/model/currentState/stateName");this.oNavMenuPopover.getFooter().setVisible(s==="home"||s==="app");}};
S.prototype._getControlVisibilityAndState=function(){M.start("FLP:ShellAppTitle.getControlVisibilityAndState","Check AllMyApps and NavShellMenu visibility","FLP");var o=this.getModel(),s=C.last("/core/shell/model/currentState/stateName"),n=this._isNavMenuEnabled(),v=n;if(!o){return false;}if(s==="app"||s==="home"){var e=C.last("/core/services/allMyApps/enabled");v=e||n;if(e&&n){o.setProperty("/ShellAppTitleState",b.ShellNavMenu);}else if(!e&&n){o.setProperty("/ShellAppTitleState",b.ShellNavMenuOnly);}else if(e&&!n){o.setProperty("/ShellAppTitleState",b.AllMyAppsOnly);}}else{o.setProperty("/ShellAppTitleState",b.ShellNavMenuOnly);}M.end("FLP:ShellAppTitle.getControlVisibilityAndState");return v;};
S.prototype._createAllMyAppsPopover=function(){var o=sap.ui.getCore().byId(this.getAllMyApps());if(!o){return null;}var e=new R("sapUshellAllMyAppsPopover",{placement:d.Bottom,title:"",showArrow:true,customHeader:this._getPopoverHeader(),showHeader:{path:"/ShellAppTitleState",formatter:function(f){return f!==b.ShellNavMenu;}},content:[o]}).addStyleClass("sapContrastPlus");e.setModel(this.getModel());e.addStyleClass("sapUshellAppTitleAllMyAppsPopover");e.attachAfterOpen(function(){o.getController()._afterOpen();var h=e.getCustomHeader(),f=h.getContentLeft()[0],t=h.getContentLeft()[1];if(t.getVisible()){t.firePress();t.setPressed(true);}f.focus();});e.attachAfterClose(function(){this._bPressedSpace=false;}.bind(this));return e;};
S.prototype._createNavMenuPopover=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu());var N=new P("sapUshellAppTitlePopover",{placement:d.Bottom,title:"",showArrow:true,showHeader:{path:"/ShellAppTitleState",formatter:function(o){return o!==b.ShellNavMenu;}},contentWidth:"20rem",content:n}).addStyleClass("sapContrastPlus");if(C.last("/core/services/allMyApps/enabled")){N.setFooter(this._getPopoverFooterContent());}N.addStyleClass("sapUshellAppTitleNavigationMenuPopover");N.setModel(this.getModel());C.emit("/core/shell/model/allMyAppsMasterLevel",c.FirstLevel);N.attachBeforeOpen(function(){n._beforeOpen();});N.attachAfterOpen(function(){n.$().on("touchmove.scrollFix",function(e){e.stopPropagation();});n._afterOpen();});N.attachAfterClose(function(){this._bPressedSpace=false;}.bind(this));return N;};
S.prototype._getPopoverHeader=function(){var o=new L({text:r.i18n.getText("allMyApps_headerTitle")});this.addCustomData(o,"role","heading");this.addCustomData(o,"aria-level","2");var p=new B("sapUshellShellAppPopoverHeader",{contentLeft:[this._createPopoverBackButton(),this._createPopoverToggleButton()],contentMiddle:[o]});return p;};
S.prototype.onAfterRendering=function(){var s=sap.ui.getCore().byId("shell-header");if(s){s.refreshLayout();}};
S.prototype._createPopoverBackButton=function(){var o=new a("sapUshellAppTitleBackButton",{icon:I.getIconURI("nav-back"),press:[this._popoverBackButtonPressHandler,this],tooltip:r.i18n.getText("backBtn_tooltip"),visible:this.getAllMyAppsController().getBackButtonVisible()});o.addStyleClass("sapUshellCatalogNewGroupBackButton");return o;};
S.prototype._popoverBackButtonPressHandler=function(){var o=this.getAllMyAppsController(),e=o.getCurrentState();if((e===c.FirstLevel)||(e===c.FirstLevelSpread)){if(S._getCurrentState()!==b.AllMyAppsOnly){this.getModel().setProperty("/ShellAppTitleState",b.ShellNavMenu);this.oAllMyAppsPopover.close();this.oNavMenuPopover.openBy(this);}}else if(e===c.SecondLevel){o.switchToInitialState();}else{o.handleSwitchToMasterAreaOnPhone();}o.updateHeaderButtonsState();};
S.prototype._createPopoverToggleButton=function(){var o=this.getAllMyAppsController();var t=new T("sapUshellAllMyAppsToggleListButton",{icon:I.getIconURI("sap-icon://menu2"),press:function(e){o.switchToInitialState();this.setTooltip(e.getParameter("pressed")?r.i18n.getText("ToggleButtonHide"):r.i18n.getText("ToggleButtonShow"));},tooltip:r.i18n.getText("ToggleButtonShow"),visible:o.getToggleListButtonVisible()});D.media.attachHandler(function(){t.setVisible(o.getToggleListButtonVisible());},this,D.media.RANGESETS.SAP_STANDARD);t.addStyleClass("sapUshellAllMyAppsToggleListButton");return t;};
S.prototype._getPopoverFooterContent=function(){var t=this,o;o=new a("allMyAppsButton",{text:r.i18n.getText("allMyApps_launchingButtonTitle"),press:function(){t._openCloseAllMyAppsPopover();if(t.oAllMyAppsPopover){M.start("FLP:ShellNavMenu.footerClick","Click the footer of ShellNavMenu, Launching AllMyApps","FLP");t.getModel().setProperty("/ShellAppTitleState",b.AllMyApps);t.oNavMenuPopover.close();}},visible:{path:"/ShellAppTitleState",formatter:function(e){return e===b.ShellNavMenu;}}});var p=new B("shellpopoverFooter",{contentMiddle:[o]});this.addCustomData(o,"role","button");this.addCustomData(o,"aria-label",r.i18n.getText("allMyApps_launchingButtonTitle"));return p;};
S.prototype._isNavMenuEnabled=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu());return n?n.getItems()&&n.getItems().length>0:false;};
S.prototype.addCustomData=function(i,k,v){i.addCustomData(new A({key:k,value:v,writeToDom:true}));};
S.prototype.close=function(){if(this.oNavMenuPopover&&this.oNavMenuPopover.isOpen()){this.oNavMenuPopover.close();}if(this.oAllMyAppsPopover&&this.oAllMyAppsPopover.isOpen()){this.oAllMyAppsPopover.close();}};
S.prototype.setTooltip=function(t){this.setAggregation("tooltip",t);this.oIcon.setTooltip(t);};
S.prototype.getAllMyAppsController=function(){var o=sap.ui.getCore().byId(this.getAllMyApps());return o.getController();};
S.prototype.onkeyup=function(e){if(e.keyCode===32){this.onclick(e);}};
S.prototype.onsapenter=S.prototype.onclick;
S.prototype.exit=function(){var n=sap.ui.getCore().byId(this.getNavigationMenu()),o=sap.ui.getCore().byId(this.getAllMyApps());if(n){n.destroy();}if(o){o.destroy();}if(this.oAllMyAppsPopover){this.oAllMyAppsPopover.destroy();}if(this.oNavMenuPopover){this.oNavMenuPopover.destroy();}if(this.oIcon){this.oIcon.destroy();}};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingAction',["sap/ui/thirdparty/jquery","sap/m/Button","sap/ushell/library","./ShellFloatingActionRenderer"],function(q,B){"use strict";
var S=B.extend("sap.ushell.ui.shell.ShellFloatingAction",{metadata:{library:"sap.ushell"}});
S.prototype.init=function(){this.addStyleClass("sapUshellShellFloatingAction");if(B.prototype.init){B.prototype.init.apply(this,arguments);}};
S.prototype.exit=function(){B.prototype.exit.apply(this,arguments);};
S.prototype.onAfterRendering=function(){if(this.data("transformY")){this.removeStyleClass("sapUshellShellFloatingActionTransition");q(this.getDomRef()).css("transform","translateY("+this.data("transformY")+")");}else{this.addStyleClass("sapUshellShellFloatingActionTransition");}};
return S;});
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActionRenderer',['sap/ui/core/Renderer','sap/m/ButtonRenderer'],function(R,B){"use strict";var S=R.extend(B);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellFloatingActions',["sap/ui/core/Control","sap/ui/thirdparty/jquery","sap/ushell/library","sap/ushell/resources","./ShellFloatingAction"],function(C,q,u,r,S){"use strict";
var a=C.extend("sap.ushell.ui.shell.ShellFloatingActions",{
metadata:{library:"sap.ushell",properties:{isFooterVisible:{type:"boolean",defaultValue:false}},aggregations:{floatingActions:{type:"sap.ushell.ui.shell.ShellFloatingAction",multiple:true,singularName:"floatingAction"}}},
renderer:{render:function(R,A){var f=A.getFloatingActions();R.write("<div");R.writeControlData(A);R.addClass("sapUshellShellFloatingActions");R.writeClasses();R.write(">");if(f.length){var F;if(f.length===1){F=f[0];}else{F=A._createMultipleFloatingActionsButton(f);q.each(f,function(){this.setVisible(false);R.renderControl(this);});}R.renderControl(F);}R.write("</div>");}}
});
a.prototype._createMultipleFloatingActionsButton=function(f){var F;var t=this;return new S({id:this.getId()+"-multipleFloatingActions",icon:"sap-icon://add",visible:true,press:function(){if(!this.hasStyleClass("sapUshellShellFloatingActionRotate")){this.addStyleClass("sapUshellShellFloatingActionRotate");if(!F){F=parseInt(this.$().outerHeight(),10)+parseInt(t.$().css("bottom"),10);}f.forEach(function(o){o.setVisible(true);});setTimeout(function(){f.forEach(function(o,i){var b=F*(i+1);o.$().css("transform","translateY(-"+b+"px)");o.data("transformY","-"+b+"px");});},0);}else{this.removeStyleClass("sapUshellShellFloatingActionRotate");f.forEach(function(o){o.$().css("transform","translateY(0)");});setTimeout(function(){f.forEach(function(o){o.setVisible(false);o.data("transformY",undefined);});},150);}},tooltip:r.i18n.getText("XXX")});};
a.prototype.addFloatingAction=function(A){this.addAggregation("floatingActions",A,true);if(this.getDomRef()){var b=sap.ui.getCore().createRenderManager();b.renderControl(A);b.flush(this.getDomRef());b.destroy();}return this;};
a.prototype.removeFloatingAction=function(A){if(typeof A==="number"){A=this.getAggregation("floatingActions")[A];}this.removeAggregation("floatingActions",A,true);var i=A.getId();q("#"+i).remove();return this;};
return a;});
sap.ui.predefine('sap/ushell/ui/shell/ShellHeadItem',["sap/base/util/ObjectPath","sap/ui/core/Control","sap/ui/core/IconPool","sap/ui/core/InvisibleText","sap/ui/events/KeyCodes","sap/ushell/library","sap/ushell/resources"],function(O,C,I,a,K,u,r){"use strict";
var S=C.extend("sap.ushell.ui.shell.ShellHeadItem",{
metadata:{library:"sap.ushell",properties:{startsSection:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},showSeparator:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},enabled:{type:"boolean",group:"Appearance",defaultValue:true},selected:{type:"boolean",group:"Appearance",defaultValue:false},showMarker:{type:"boolean",group:"Appearance",defaultValue:false,deprecated:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},target:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Accessibility",defaultValue:null},ariaHidden:{type:"boolean",group:"Accessibility",defaultValue:false},ariaHaspopup:{type:"string",group:"Accessibility",defaultValue:""},text:{type:"string",group:"Appearance",defaultValue:null},floatingNumber:{type:"int",group:"Appearance",defaultValue:null},floatingNumberMaxValue:{type:"int",group:"Appearance",defaultValue:999},floatingNumberType:{type:"string",group:"Appearance",defaultValue:"None"}},events:{press:{}}},
renderer:{apiVersion:2,render:function(b,s){var t=s.getTarget()||"";b.openStart("a",s);b.attr("tabindex","0");if(t!==""){b.attr("href",s.getTarget());}b.accessibilityState({role:t?"link":"button",label:s.getAriaLabel()||undefined,hidden:s.getAriaHidden()||undefined,haspopup:s.getAriaHaspopup()||undefined,describedby:{value:s._oAriaDescribedbyText.getId(),append:true}});if(s.getFloatingNumber()>0){b.class("sapUshellShellHeadItmCounter");b.attr("data-counter-content",s.floatingNumberFormatter());}b.class("sapUshellShellHeadItm");if(!s.getEnabled()){b.class("sapUshellShellHeadItmDisabled");}if(!s.getVisible()){b.class("sapUshellShellHidden");}if(s.getSelected()){b.class("sapUshellShellHeadItmSel");}if(s.getTooltip_AsString()){b.attr("title",s.getTooltip_AsString());}b.openEnd();b.openStart("span");b.class("sapUshellShellHeadItmCntnt");var i=s.getIcon();var o=I.isIconURI(i)&&I.getIconInfo(i);if(o){b.style("font-family",o.fontFamily);b.openEnd();b.text(o.content);}else{b.openEnd();b.voidStart("img");b.attr("id",s.getId()+"-img-inner");b.attr("src",i);b.voidEnd();}b.close("span");b.close("a");}}
});
S.prototype.FloatingNumberType={None:"None",Notifications:"Notifications",OverflowButton:"OverflowButton"};
S.prototype.init=function(){this._oAriaDescribedbyText=new a(this.getId()+"-describedby").toStatic();this.addDependent(this._oAriaDescribedbyText);};
S.prototype.onBeforeRendering=function(){switch(this.getFloatingNumberType()){case this.FloatingNumberType.None:this._oAriaDescribedbyText.setText("");break;default:var c=this.getFloatingNumber();if(!c){this._oAriaDescribedbyText.setText("");}else{var m=this.getFloatingNumberMaxValue();this._oAriaDescribedbyText.setText((c>m)?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c));}break;}};
S.prototype.tooltipFormatter=function(f){var c=((typeof f!=="undefined")?f:this.getFloatingNumber());var m=this.getFloatingNumberMaxValue();switch(this.getFloatingNumberType()){default:case this.FloatingNumberType.None:return"";case this.FloatingNumberType.Notifications:if(!c){return r.i18n.getText("NotificationToggleButton.NoNewNotifications");}return(c>m?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c));case this.FloatingNumberType.OverflowButton:var t=r.i18n.getText("shellHeaderOverflowBtn_tooltip");if(!c){return t;}t+=" ("+(c>m?r.i18n.getText("NotificationToggleButton.NewNotifications.MaxExceeded",m):r.i18n.getText("NotificationToggleButton.NewNotifications",c))+")";return t;}};
S.prototype.floatingNumberFormatter=function(f){var c=((typeof f!=="undefined")?f:this.getFloatingNumber());var m=this.getFloatingNumberMaxValue();return(c>m?m+"+":c.toString());};
S.prototype.onclick=function(e){if(this.getEnabled()){this.firePress();if(!this.getTarget()){e.preventDefault();}}};
S.prototype.onkeyup=function(e){var o=e.originalEvent;var k=o.keyCode;var s=o.shiftKey;if([K.SPACE,K.ENTER].indexOf(k)!==-1&&!s){this.onclick(e);}};
O.set("sap.ui.unified.ShellHeadItem",S);return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayout',["sap/base/Log","sap/ui/core/Control","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/util/Storage","sap/ushell/Config","sap/ushell/library","sap/ushell/ui/shell/ToolArea","sap/ushell/ui/shell/ShellLayoutRenderer"],function(L,C,D,q,S,a){"use strict";
var b=C.extend("sap.ushell.ui.shell.ShellLayout",{metadata:{library:"sap.ushell",properties:{headerHiding:{type:"boolean",group:"Appearance",defaultValue:false},headerVisible:{type:"boolean",group:"Appearance",defaultValue:true},toolAreaVisible:{type:"boolean",group:"Appearance",defaultValue:false},floatingContainerVisible:{type:"boolean",group:"Appearance",defaultValue:false},backgroundColorForce:{type:"boolean",group:"Appearance",defaultValue:true},showBrandLine:{type:"boolean",group:"Appearance",defaultValue:true},showAnimation:{type:"boolean",group:"Appearance",defaultValue:true},enableCanvasShapes:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{toolArea:{type:"sap.ushell.ui.shell.ToolArea",multiple:false},rightFloatingContainer:{type:"sap.ushell.ui.shell.RightFloatingContainer",multiple:false},canvasSplitContainer:{type:"sap.ushell.ui.shell.SplitContainer",multiple:false},floatingActionsContainer:{type:"sap.ushell.ui.shell.ShellFloatingActions",multiple:false},footer:{type:"sap.ui.core.Control",multiple:false}},associations:{header:{type:"sap.ushell.ui.shell.ShellHeader",multiple:false},floatingContainer:{type:"sap.ushell.ui.shell.FloatingContainer",multiple:false}}}});
b._SIDEPANE_WIDTH_PHONE=13;b._SIDEPANE_WIDTH_TABLET=13;b._SIDEPANE_WIDTH_DESKTOP=15;
b.prototype.getHeader=function(){return sap.ui.getCore().byId(this.getAssociation("header"));};
b.prototype.init=function(){this._rtl=sap.ui.getCore().getConfiguration().getRTL();this._showHeader=true;this._useStrongBG=false;D.media.attachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);this._oDoable=a.on("/core/shellHeader/headerVisible").do(this.setHeaderVisible.bind(this));this._oStorage=new S(S.Type.local,"com.sap.ushell.adapters.local.FloatingContainer");};
b.prototype.destroy=function(){D.media.detachHandler(this._handleMediaChange,this,D.media.RANGESETS.SAP_STANDARD);if(this._oDoable){this._oDoable.off();this._oDoable=null;}if(this._oRm){this._oRm.destroy();this._oRm=null;}C.prototype.destroy.apply(this,arguments);};
b.prototype.onAfterRendering=function(){this._setSidePaneWidth();if(this.getEnableCanvasShapes()){sap.ui.require(["sap/ushell/CanvasShapesManager"],function(c){if(sap.ui.getCore().isThemeApplied()){c.drawShapes();}});}};
b.prototype.renderFloatingContainerWrapper=function(){this._oFloatingContainerWrapper=document.getElementById("sapUshellFloatingContainerWrapper");if(!this._oFloatingContainerWrapper){this._oFloatingContainerWrapper=document.createElement("DIV");this._oFloatingContainerWrapper.setAttribute("id","sapUshellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellFloatingContainerWrapper");this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden");window.document.body.appendChild(this._oFloatingContainerWrapper);}if(this._oStorage&&this._oStorage.get("floatingContainerStyle")){this._oFloatingContainerWrapper.style.cssText=this._oStorage.get("floatingContainerStyle");}};
b.prototype.renderFloatingContainer=function(f){this.renderFloatingContainerWrapper();if(f&&!f.getDomRef()){if(!this._oFloatingContainerWrapper.classList.contains("sapUshellShellHidden")){this._oFloatingContainerWrapper.classList.add("sapUshellShellHidden");}f.placeAt("sapUshellFloatingContainerWrapper");}};
b.prototype.onThemeChanged=function(){return!!this.getDomRef();};
b.prototype.setToolAreaVisible=function(v){this.setProperty("toolAreaVisible",!!v,true);if(this.getToolArea()){this.getToolArea().toggleStyleClass("sapUshellShellHidden",!v);this.applySplitContainerSecondaryContentSize();return this;}if(v){sap.ui.require(["sap/ushell/EventHub"],function(E){E.emit("CreateToolArea");});return this;}L.debug("Tool area not created but visibility updated",null,"sap.ushell.ShellLayout");return this;};
b.prototype.getToolAreaSize=function(){if(this.getToolAreaVisible()){if(this.getToolArea().hasItemsWithText()){return"15rem";}return"3.0625rem";}return"0";};
b.prototype.setFooter=function(f){this.setAggregation("footer",f,true);this._renderFooter(f);};
b.prototype.applySplitContainerSecondaryContentSize=function(){var t=this.getToolAreaSize();this.getCanvasSplitContainer().applySecondaryContentSize(t);};
b.prototype.setFloatingContainer=function(c){this.setAssociation("floatingContainer",c,true);this.renderFloatingContainer(c);};
b.prototype.setFloatingContainerVisible=function(v){this.setProperty("floatingContainerVisible",!!v,true);if(this.getDomRef()){var f=window.document.getElementById("sapUshellFloatingContainerWrapper");if(v&&this._oStorage&&!this._oStorage.get("floatingContainerStyle")){var e=q(".sapUshellShellHeadItm").position()?q(".sapUshellShellHeadItm").position().left:0;var l=(q(window).width()-q("#shell-floatingContainer").width()-e)*100/q(window).width();var t=q(".sapUshellShellHeader").height()*100/q(window).height();f.style.left=l+"%";f.style.top=t+"%";f.style.position="absolute";this._oStorage.put("floatingContainerStyle",f.style.cssText);}var s=window.document.querySelector(".sapUshellShellFloatingContainerWrapper");if(s&&v===s.classList.contains("sapUshellShellHidden")){s.classList.toggle("sapUshellShellHidden");}}return this;};
b.prototype.setFloatingActionsContainer=function(c){this.setAggregation("floatingActionsContainer",c,true);};
b.prototype._setStrongBackground=function(){};
b.prototype._setSidePaneWidth=function(r){var s=this.getCanvasSplitContainer();if(s){if(!r){r=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;}var w=b["_SIDEPANE_WIDTH_"+r.toUpperCase()]+"rem";s.setSecondaryContentSize(w);}};
b.prototype._hideFooter=function(d,f){d.classList.remove("sapUshellShellFooterVisible");f.classList.add("sapUiHidden");};
b.prototype._showFooter=function(d,f,c){if(c._applyContextClassFor){c._applyContextClassFor("footer");}this._oRm=this._oRm||sap.ui.getCore().createRenderManager();d.classList.add("sapUshellShellFooterVisible");f.classList.remove("sapUiHidden");this._oRm.render(c,f);};
b.prototype._renderFooter=function(f){var d=this.getDomRef();if(!d){return;}var F=d.querySelector("#"+this.getId()+"-footer");F.innerHTML="";if(!f){this._hideFooter(d,F);return;}this._showFooter(d,F,f);};
b.prototype._handleMediaChange=function(p){if(!this.getDomRef()){return;}this._setSidePaneWidth(p.name);};
return b;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellLayoutRenderer',["sap/ushell/resources"],function(r){"use strict";var S={apiVersion:2};
S.render=function(a,s){var i=s.getId();a.openStart("div",s);a.class("sapUshellShell");if(!s.getHeaderVisible()){a.class("sapUshellShellNoHead");}a.class("sapUshellShellHead"+(s._showHeader?"Visible":"Hidden"));a.openEnd();a.openStart("div");a.style("z-index","-2");a.class("sapUiShellBackgroundImage");a.class("sapUiGlobalBackgroundImageForce");a.class("sapUshellShellBG");a.class("sapContrastPlus");a.openEnd();a.close("div");if(s.getEnableCanvasShapes()){a.openStart("canvas",i+"-shapes");a.attr("height",(window.innerHeight>0)?window.innerHeight:screen.height);a.attr("width",(window.innerWidth>0)?window.innerWidth:screen.width);a.attr("role","presentation");a.style("position","absolute");a.style("z-index","-1");a.openEnd();a.close("canvas");}if(s.getToolArea()){a.openStart("aside");a.attr("aria-label",r.i18n.getText("ToolArea_AriaLabel"));a.openEnd();a.renderControl(s.getToolArea());a.close("aside");}if(s.getRightFloatingContainer()){a.openStart("aside");a.attr("aria-label",r.i18n.getText("FloatingContainer_AriaLabel"));a.openEnd();a.renderControl(s.getRightFloatingContainer());a.close("aside");}a.openStart("main",i+"-cntnt");a.attr("role","main");a.attr("aria-label",r.i18n.getText("ShellLayout.AriaLabel"));a.class("sapUshellShellCntnt");a.class("sapUshellShellCanvas");a.openEnd();a.renderControl(s.getCanvasSplitContainer());a.close("main");a.renderControl(s.getFloatingActionsContainer());var f=s.getFooter();a.openStart("footer",i+"-footer");a.class("sapMPageFooter");if(!f){a.class("sapUiHidden");}a.openEnd();if(f){if(f._applyContextClassFor){f._applyContextClassFor("footer");}a.renderControl(f);}a.close("footer");a.close("div");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ShellNavigationMenu',["sap/base/Log","sap/m/FlexBox","sap/m/Label","sap/m/List","sap/m/StandardListItem","sap/m/VBox","sap/ui/core/Control","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/events/KeyCodes","sap/ushell/library","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData"],function(L,F,a,b,S,V,C,D,q,K,u,r,A){"use strict";
var c=C.extend("sap.ushell.ui.shell.ShellNavigationMenu",{
metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},showTitle:{type:"boolean",defaultValue:false},showRelatedApps:{type:"boolean",defaultValue:true}},aggregations:{items:{type:"sap.m.ListItem",group:"Misc",defaultValue:null,singularName:"item"},miniTiles:{type:"sap.ushell.ui.shell.NavigationMiniTile",group:"Misc",defaultValue:null,singularName:"miniTile"}},events:{}},
renderer:{render:function(R,o){var t,m;R.write("<div ");R.writeControlData(o);R.write(">");if(o.getShowTitle()){t=o.oTitle;t.setIcon(o.getIcon());t.setTitle(o.getTitle());R.write("<div id=\"sapUshellNavTitle\" >");R.renderControl(t);R.write("</div>");}if(o.oItemsList){R.renderControl(o.oItemsList);}if(o.getShowRelatedApps()){m=o.getMiniTiles();if(m&&m.length>0){R.renderControl(o.oRelatedAppsVbox);}}R.write("</div>");}}
});
var d=function(m){this.init(m);};
d.prototype.init=function(m){this.keyCodes=K;this.jqElement=m.$();this.jqElement.on("keydown.keyboardNavigation",this.keydownHandler.bind(this));};
d.prototype.destroy=function(){if(this.jqElement){this.jqElement.off(".keyboardNavigation");}delete this.jqElement;};
d.prototype.keydownHandler=function(e){switch(e.keyCode){case this.keyCodes.ARROW_UP:this.upDownHandler(e,true);break;case this.keyCodes.ARROW_DOWN:this.upDownHandler(e,false);break;case this.keyCodes.ARROW_LEFT:this.leftRightHandler(e,false);break;case this.keyCodes.ARROW_RIGHT:this.leftRightHandler(e,true);break;case this.keyCodes.HOME:this.homeEndHandler(e,true);break;case this.keyCodes.END:this.homeEndHandler(e,false);break;case this.keyCodes.PAGE_UP:this.homeEndHandler(e,true);break;case this.keyCodes.PAGE_DOWN:this.homeEndHandler(e,false);break;default:break;}};
d.prototype.upDownHandler=function(e,i){var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}var f=j.parent().parent();var g=j.parent().index();var h=f.children();var n;if(i){n=g-3;if(n<0){n+=9;}}else{n=(g+3)%h.length;}var k=h[n].children[0];this._setItemFocus(e,q(k));};
d.prototype.leftRightHandler=function(e,i){var n=i?"next":"prev",f,g,h,j,k,l,m=q(document.activeElement);if(!m.hasClass("sapUshellNavMiniTile")){return false;}f=m.parent();g=f[n]();h=g.index();j=f.parent();if(h===-1){k=i?0:j.children().length-1;}else{k=h;}l=j.children()[k].children[0];if(!l){return false;}this._setItemFocus(e,q(l));};
d.prototype.homeEndHandler=function(e,i){var n=i?"first":"last";var j=q(document.activeElement);if(!j.hasClass("sapUshellNavMiniTile")){return false;}e.preventDefault();var f=this.jqElement.find(".sapUshellNavMiniTile")[n]();this._setItemFocus(e,f);};
d.prototype._setItemFocus=function(e,j){e.preventDefault();e.stopImmediatePropagation();q(".sapUshellNavMiniTile").attr("tabindex",-1);j.attr("tabindex",0);j.focus();};
d.prototype.setFocusToLastFocusedMiniTile=function(e){var j=q(".sapUshellNavMiniTile[tabindex='0']");if(j&&j[0]){this._setItemFocus(e,q(j));}else{this._setItemFocus(e,q(q(".sapUshellNavMiniTile")[0]));}};
c.prototype.init=function(){};
c.prototype._createItemsList=function(){this.oItemsList=new b("sapUshellNavHierarchyItems");};
c.prototype._createMiniTilesBox=function(){this.oMiniTilesBox=new F("sapUshellNavRelatedAppsFlexBox");};
c.prototype._beforeOpen=function(){if(!this.bInitialized){this.oTitle=new S("navMenuInnerTitle",{wrapping:true}).addStyleClass("sapUshellNavigationMenuTitleItem");this.oRelatedAppsTitle=new a("sapUshellRelatedAppsLabel",{text:r.i18n.getText("shellNavMenu_relatedApps")});if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oRelatedAppsVbox=new V("sapUshellRelatedAppsItems",{items:[this.oRelatedAppsTitle,this.oMiniTilesBox]});this._extendInnerControlsForAccKeyboard();this.bInitialized=true;}};
c.prototype._afterOpen=function(){if(D.system.desktop){if(this.keyboardNavigation){this.keyboardNavigation.destroy();}this.keyboardNavigation=new d(this.oMiniTilesBox);}};
c.prototype._extendInnerControlsForAccKeyboard=function(){this.oTitle.addCustomData(new A({key:"aria-level",value:"1",writeToDom:true}));if(D.system.desktop){this.oTitle.addCustomData(new A({key:"tabindex",value:"0",writeToDom:true}));this.oItemsList.addEventDelegate({onsaptabprevious:function(e){if(this.getShowTitle()){e.preventDefault();e.stopImmediatePropagation();q("#navMenuInnerTitle").focus();}else{this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}}.bind(this),onsaptabnext:function(e){if(q(".sapUshellNavMiniTile").length){this.keyboardNavigation.setFocusToLastFocusedMiniTile(e);}else{var o=sap.ui.getCore().byId("allMyAppsButton");this.keyboardNavigation._setItemFocus(e,q((o.getDomRef())));}}.bind(this)});}};
c.prototype.getMiniTiles=function(){if(this.oMiniTilesBox){return this.oMiniTilesBox.getItems();}return[];};
c.prototype.insertMiniTile=function(m,i){if(!this.oMiniTilesBox){this._createMiniTilesBox();}this.oMiniTilesBox.insertItem(m,i);return this;};
c.prototype.addMiniTile=function(m){if(!this.oMiniTilesBox){this._createMiniTilesBox();}if(this.oMiniTilesBox.getItems().length<9){this.oMiniTilesBox.addItem(m);}else{L.warning("ShellNavigationMenu.addMiniTile - miniTiles aggregation is already at maximum size of 9 elements "+"- current item was not added.");}return this;};
c.prototype.removeMiniTile=function(i){if(this.oMiniTilesBox){this.oMiniTilesBox.removeItem(i);}return this;};
c.prototype.removeAllMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.removeAllItems();}return this;};
c.prototype.destroyMiniTiles=function(){if(this.oMiniTilesBox){this.oMiniTilesBox.destroyItems();}return this;};
c.prototype.indexOfMiniTile=function(m){if(this.oMiniTilesBox){return this.oMiniTilesBox.indexOfItem(m);}return-1;};
c.prototype.getItems=function(){if(this.oItemsList){return this.oItemsList.getItems();}return[];};
c.prototype.insertItem=function(h,i){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.insertItem(h,i);return this;};
c.prototype.addItem=function(h){if(!this.oItemsList){this._createItemsList();}h=this._extendHierarchyItemForAcc(h);this.oItemsList.addItem(h);return this;};
c.prototype.removeItem=function(i){if(this.oItemsList){this.oItemsList.removeItem(i);}return this;};
c.prototype.removeAllItems=function(){if(this.oItemsList){this.oItemsList.removeAllItems();}return this;};
c.prototype.destroyItems=function(){if(this.oItemsList){this.oItemsList.destroyItems();}return this;};
c.prototype.indexOfItem=function(h){if(this.oItemsList){return this.oItemsList.indexOfItem(h);}return-1;};
c.prototype._extendHierarchyItemForAcc=function(i){if(D.system.desktop){i.addEventDelegate({onsapspace:function(e){this.firePress();}.bind(i)});}return i;};
c.prototype.exit=function(){if(this.oItemsList){this.oItemsList.destroy();}if(this.oMiniTilesBox){this.oMiniTilesBox.destroy();}if(this.bInitialized){this.oTitle.destroy();this.oRelatedAppsVbox.destroy();this.oRelatedAppsTitle.destroy();}if(this.keyboardNavigation){this.keyboardNavigation.destroy();}};
c.prototype.onAfterRendering=function(){if(this.getShowTitle()){q("#sapUshellAppTitlePopover-intHeader").css("height",0);}else{q("#sapUshellAppTitlePopover-intHeader").css("height","0.5rem");}if(this.getShowTitle()){var j=q("#navMenuInnerTitle");j.attr("aria-readonly","true");j.attr("readonly","readonly");}var e=q("#sapUshellNavHierarchyItems ul");e.attr("role","group");e.attr("aria-label",r.i18n.getText("ShellNavigationMenu_HierarchyItemsAriaLabel"));var f=q("#sapUshellNavRelatedAppsFlexBox");f.attr("role","list");f.attr("aria-labelledBy","sapUshellRelatedAppsLabel");var g=q(".sapUshellNavMiniTile");for(var i=0;i<g.length;i++){q(g[i]).attr("aria-setsize",g.length);q(g[i]).attr("aria-posinset",i+1);}};
return c;});
sap.ui.predefine('sap/ushell/ui/shell/SplitContainer',["sap/base/Log","sap/ui/core/Control","sap/ui/core/library","sap/ushell/library","sap/ushell/ui/shell/ContentRenderer","sap/ushell/ui/shell/SplitContainerRenderer"],function(L,C,c,u,a){"use strict";var O=c.Orientation;
var S=C.extend("sap.ushell.ui.shell.SplitContainer",{metadata:{library:"sap.ushell",properties:{showSecondaryContent:{type:"boolean",group:"Appearance",defaultValue:false},secondaryContentSize:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px"},secondaryContentWidth:{type:"sap.ui.core.CSSSize",group:"Appearance",defaultValue:"250px",deprecated:true},orientation:{type:"sap.ui.core.Orientation",group:"Appearance",defaultValue:O.Horizontal}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},secondaryContent:{type:"sap.ui.core.Control",multiple:true,singularName:"secondaryContent"},subHeader:{type:"sap.ui.core.Control",multiple:true,singularName:"subHeader"}}}});
(function(){
S.prototype.init=function(){this._paneRenderer=new a(this,this.getId()+"-panecntnt","secondaryContent");this._subHeadersRenderer=new a(this,this.getId()+"-canvassubHeader","subHeader");this._canvasRenderer=new a(this,this.getId()+"-canvasrootContent","content");};
S.prototype.exit=function(){this._paneRenderer.destroy();delete this._paneRenderer;this._canvasRenderer.destroy();delete this._canvasRenderer;this._subHeadersRenderer.destroy();delete this._subHeadersRenderer;};
S.prototype.onAfterRendering=function(){var t=this.getParent()?this.getParent().getToolAreaSize():"0";this.applySecondaryContentSize(t);};
S.prototype.applySecondaryContentSize=function(t){if(this.getDomRef()){var s=this.getSecondaryContentSize(),b=this.getShowSecondaryContent(),r=sap.ui.getCore().getConfiguration().getRTL()?"right":"left",o=this.getDomRef("pane"),d,e;if(this.getOrientation()===O.Vertical){d="top";e=r;o.style.height=s;o.style.width="";}else{d=r;e="top";o.style.height="";o.style.width=s;}o.style[d]=b?t:"-"+s;o.style[e]="";this.$("pane").toggleClass("sapUshellSplitContSecondClosed",!b);s=parseFloat(s)+parseFloat(t)+"rem";this.getDomRef("canvas").style[d]=b?s:t;}};
S.prototype._modifyAggregationOrProperty=function(m,d){var r=!!this.getDomRef();var b=m.apply(this,[r]);if(r&&d){d.render();}return b;};
S.prototype.getSecondaryContentWidth=function(){L.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.getSecondaryContentSize.apply(this,arguments);};
S.prototype.setSecondaryContentWidth=function(){L.warning("SplitContainer: Use of deprecated property \"SecondaryContentWidth\", please use "+"\"SecondaryContentSize\" instead.");return this.setSecondaryContentSize.apply(this,arguments);};
S.prototype.insertContent=function(o,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("content",o,i,r);},this._canvasRenderer);};
S.prototype.addContent=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("content",o,r);},this._canvasRenderer);};
S.prototype.removeContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("content",i,r);},this._canvasRenderer);};
S.prototype.removeAllContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("content",r);},this._canvasRenderer);};
S.prototype.destroyContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("content",r);},this._canvasRenderer);};
S.prototype.insertSecondaryContent=function(o,i){return this._modifyAggregationOrProperty(function(r){return this.insertAggregation("secondaryContent",o,i,r);},this._paneRenderer);};
S.prototype.addSecondaryContent=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("secondaryContent",o,r);},this._paneRenderer);};
S.prototype.removeSecondaryContent=function(i){return this._modifyAggregationOrProperty(function(r){return this.removeAggregation("secondaryContent",i,r);},this._paneRenderer);};
S.prototype.removeAllSecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.destroySecondaryContent=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("secondaryContent",r);},this._paneRenderer);};
S.prototype.addSubHeader=function(o){return this._modifyAggregationOrProperty(function(r){return this.addAggregation("subHeader",o,r);},this._subHeadersRenderer);};
S.prototype.removeSubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.removeAllAggregation("subHeader",r);},this._subHeadersRenderer);};
S.prototype.destroySubHeader=function(){return this._modifyAggregationOrProperty(function(r){return this.destroyAggregation("subHeader",r);},this._subHeadersRenderer);};
S.prototype.setSecondaryContentSize=function(s){this.setProperty("secondaryContentSize",s,true);this.onAfterRendering();};
S.prototype.setShowSecondaryContent=function(s){this.setProperty("showSecondaryContent",!!s,!!this.getDomRef());this.onAfterRendering();return this;};
})();return S;});
sap.ui.predefine('sap/ushell/ui/shell/SplitContainerRenderer',["sap/ui/core/library","sap/ushell/resources"],function(c,r){"use strict";var O=c.Orientation;var S={};
S.render=function(a,C){var i=C.getId();var v=C.getOrientation()===O.Vertical;a.write("<div");a.writeControlData(C);a.addClass("sapUshellSpltCont");a.addClass("sapUshellSpltCont"+(v?"V":"H"));if(!C.getShowSecondaryContent()){a.addClass("sapUshellSpltContPaneHidden");}a.writeClasses();a.write(">");var s=i+"-pane";var w=C.getShowSecondaryContent()?C.getSecondaryContentSize():"0";a.write("<aside");a.writeAttribute("aria-label",r.i18n.getText("SecondaryContent_AriaLabel"));a.writeAttribute("id",s);a.style("width",w);a.writeStyles();a.addClass("sapUshellSpltContPane");if(!C.getShowSecondaryContent()){a.addClass("sapUshellSplitContSecondClosed");}a.writeClasses();a.write(">");this.renderSecondaryContent(a,s,C.getSecondaryContent());a.write("</aside>");var b=i+"-canvas";a.write("<section id='",b,"' class='sapUshellSpltContCanvas'>");var o=C.getAggregation("subHeader");this.renderRootContent(a,b,C.getContent(),o);a.write("</section>");a.write("</div>");};
S.renderRootContent=function(a,i,C,s){a.write("<div id='",i,"cntnt' class='sapUshellSpltContCntnt'");a.writeAttribute("data-sap-ui-root-content","true");a.write(">");a.write("<div id='",i,"subHeader'>");if(s&&s.length){a.renderControl(s[0]);}a.write("</div>");if(C&&C.length){a.write("<div id='",i,"rootContent' class='sapUshellSpltContainerContentWrapper'>");C.forEach(function(o,b){a.renderControl(o);});a.write("</div>");}a.write("</div>");};
S.renderSecondaryContent=function(a,I,C){a.write("<div id='",I,"cntnt' class='sapUshellSpltContCntnt'");a.writeAttribute("data-sap-ui-root-content","true");a.write(">");for(var i=0;i<C.length;i++){a.renderControl(C[i]);}a.write("</div>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/shell/ToolArea',["sap/ui/core/Control","sap/ushell/library"],function(C){"use strict";
var T=C.extend("sap.ushell.ui.shell.ToolArea",{
metadata:{library:"sap.ushell",aggregations:{toolAreaItems:{type:"sap.ushell.ui.shell.ToolAreaItem",multiple:true}}},
renderer:{apiVersion:2,render:function(r,t){r.openStart("div",t);r.class("sapUshellToolArea");if(!t.hasItemsWithText()){r.class("sapUshellToolAreaTextHidden");}r.openEnd();r.openStart("div");r.attr("id",t.getId()+"-cntnt");r.class("sapUshellToolAreaContainer");r.openEnd();var i=t.getToolAreaItems(),a,o;for(a=0;a<i.length;a++){o=i[a];if(o.getVisible()){r.openStart("div");r.class("sapUshellToolAreaContent");if(o.getSelected()){r.class("sapUshellToolAreaItemSelected");}r.openEnd();r.renderControl(o);r.close("div");r.openStart("div");r.class("sapUshellToolAreaContentSeparator");r.openEnd();r.close("div");}}r.close("div");r.close("div");}}
});
T.prototype.hasItemsWithText=function(){var i=this.getToolAreaItems(),a,t;for(a=0;a<i.length;a++){t=i[a];if(t.getVisible()&&t.getText()){return true;}}return false;};
return T;});
sap.ui.predefine('sap/ushell/ui/shell/ToolAreaItem',["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/ui/core/IconPool","sap/ushell/library"],function(q,C,I){"use strict";
var T=C.extend("sap.ushell.ui.shell.ToolAreaItem",{
metadata:{library:"sap.ushell",properties:{icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null},selected:{type:"boolean",group:"Appearance",defaultValue:false},text:{type:"string",group:"Appearance",defaultValue:null},ariaLabel:{type:"string",group:"Appearance",defaultValue:null},visible:{type:"boolean",group:"Appearance",defaultValue:true},expandable:{type:"boolean",group:"Appearance",defaultValue:false}},events:{press:{},expand:{}}},
renderer:{render:function(r,t){var i;r.write("<div");r.writeControlData(t);if(!t.getIcon()){r.addClass("sapUshellToolAreaItmTextOnly");}else{r.addClass("sapUshellToolAreaItm");}if(!t.getVisible()){r.addClass("sapUshellShellHidden");}if(t.getAriaLabel()){r.writeAccessibilityState({label:this.getAriaLabel(),role:"button"});}r.writeClasses();var a=t.getTooltip_AsString();if(a){r.writeAttributeEscaped("title",a);}r.write(">");if(t.getIcon()){i=I.createControlByURI(t.getIcon());i.setUseIconTooltip(false);i.addStyleClass("sapUshellToolAreaItemIcon");r.renderControl(i);}if(t.getText()){r.write("<span");r.addClass("sapUshellToolAreaItemText");r.writeClasses();r.write(">");r.writeEscaped(t.getText());r.write("</span>");}if(t.getExpandable()){this.renderExpandable(r);}r.write("</div>");},renderExpandable:function(r){var i=I.createControlByURI("sap-icon://icon-dropdown");i.addStyleClass("sapUshellToolAreaItemExpandable");r.renderControl(i);}}
});
T.prototype.onclick=function(e){if(this.$().parent().hasClass("sapUshellToolAreaItemSelected")){this.setSelected(false);}else{this.setSelected(true);}if(e.target.className.indexOf("sapUshellToolAreaItemExpandable")>0){this.fireExpand();}else{this.firePress();}};
T.prototype.onsapenter=T.prototype.onclick;
T.prototype.setExpandable=function(e){e=!!e;this.setProperty("expandable",e,true);this.$().toggleClass("sapUshellToolAreaItemExpandable",e);};
T.prototype.setSelected=function(s){s=!!s;if(s){var j=q(".sapUshellToolAreaItemSelected");j.each(function(){q(this).removeClass("sapUshellToolAreaItemSelected");});}this.setProperty("selected",s,true);this.$().parent().toggleClass("sapUshellToolAreaItemSelected",s);};
T.prototype.setVisible=function(v){var r=this.getParent()&&this.getParent().getDomRef();this.setProperty("visible",!!v,r);this.$().toggleClass("sapUshellShellHidden",!v);};
T.prototype.setAriaLabel=function(a){this.setProperty("ariaLabel",a);return this;};
return T;},true);
sap.ui.predefine('sap/ushell/ui/tile/DynamicTile',["sap/ushell/library","./TileBase","./DynamicTileRenderer"],function(u,T){"use strict";var S=u.ui.tile.State;var a=u.ui.tile.StateArrow;
var D=T.extend("sap.ushell.ui.tile.DynamicTile",{metadata:{library:"sap.ushell",properties:{numberValue:{type:"string",group:"Data",defaultValue:"0.0"},numberState:{type:"State",group:"Appearance",defaultValue:S.Neutral},numberUnit:{type:"string",group:"Data",defaultValue:null},numberDigits:{type:"int",group:"Appearance",defaultValue:0},stateArrow:{type:"StateArrow",group:"Appearance",defaultValue:a.None},numberFactor:{type:"string",group:"Data",defaultValue:null}}}});
return D;});
sap.ui.predefine('sap/ushell/ui/tile/DynamicTileRenderer',["sap/ui/core/Renderer","sap/ui/core/format/NumberFormat","../../library","./TileBaseRenderer","sap/ushell/resources"],function(R,N,u,T,r){"use strict";var S=u.ui.tile.State;var a=u.ui.tile.StateArrow;var D=R.extend(T);var t=r.i18n;
D.renderPart=function(o,c){var n=c.getNumberValue(),b=c.getNumberFactor(),d=n.toString(),m=c.getIcon()?4:5,s=this._shouldProcessDigits(d,c);if(d.length>m||s){var e=this._normalizeNumber(n,m,b,c);b=e.numberFactor;d=e.displayNumber;}else if(d!==""){var f=N.getFloatInstance({maxFractionDigits:m});d=f.format(n);}o.write("<div");o.addClass("sapUshellDynamicTile");o.writeClasses();o.write(">");o.write("<div");o.addClass("sapUshellDynamicTileData");o.addClass(S[c.getNumberState()]?"sapUshellDynamicTileData"+c.getNumberState():"sapUshellDynamicTileData"+S.Neutral);o.writeClasses();o.write(">");o.write("<div class='sapUshellDynamicTileIndication'>");if(a[c.getStateArrow()]){o.write("<div");o.addClass("sapUshellDynamicTileStateArrow");o.addClass("sapUshellDynamicTileData"+a[c.getStateArrow()]);o.writeClasses();o.write(">");o.write("</div>");}o.write("<br><div");o.addClass("sapUshellDynamicTileNumberFactor");o.writeClasses();o.writeAccessibilityState(c,{label:t.getText("TileUnits_lable")+b});o.write(">");o.writeEscaped(b);o.write("</div>");o.write("</div>");o.write("<div");o.addClass("sapUshellDynamicTileNumber");o.writeClasses();if(d&&d!==""){o.writeAccessibilityState(c,{label:t.getText("TileValue_lable")+d});o.write(">");o.writeEscaped(d);}else{o.write(">");o.writeEscaped(c.getNumberValue());}o.write("</div>");o.write("</div>");o.write("</div>");};
D._normalizeNumber=function(n,m,b,c){var d;if(isNaN(n)){d=n;}else{var o=N.getFloatInstance({maxFractionDigits:c.getNumberDigits()});if(!b){var e=Math.abs(n);if(e>=1000000000){b="B";n/=1000000000;}else if(e>=1000000){b="M";n/=1000000;}else if(e>=1000){b="K";n/=1000;}}d=o.format(n);}var f=d;var g=f[m-1];m-=(g==="."||g===",")?1:0;f=f.substring(0,m);return{displayNumber:f,numberFactor:b};};
D._shouldProcessDigits=function(d,c){var n=c.getNumberDigits(),b;if(d.indexOf(".")!==-1){b=d.split(".")[1].length;if(b>n){return true;}}return false;};
D.getInfoPrefix=function(c){return c.getNumberUnit();};
return D;},true);
sap.ui.predefine('sap/ushell/ui/tile/ImageTile',['sap/ushell/library','./TileBase','./ImageTileRenderer'],function(l,T){"use strict";
var I=T.extend("sap.ushell.ui.tile.ImageTile",{metadata:{library:"sap.ushell",properties:{imageSource:{type:"string",group:"Appearance",defaultValue:null}}}});
return I;});
sap.ui.predefine('sap/ushell/ui/tile/ImageTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var I=R.extend(T);
I.renderPart=function(r,c){r.write("<img");r.addClass("sapUshellImageTile");r.writeClasses();r.writeAttributeEscaped("src",c.getImageSource());r.writeAttributeEscaped("alt"," ");r.write("/>");};
return I;},true);
sap.ui.predefine('sap/ushell/ui/tile/StaticTile',['sap/ushell/library','./TileBase','./StaticTileRenderer'],function(l,T){"use strict";
var S=T.extend("sap.ushell.ui.tile.StaticTile",{metadata:{library:"sap.ushell"}});
return S;});
sap.ui.predefine('sap/ushell/ui/tile/StaticTileRenderer',['sap/ui/core/Renderer','./TileBaseRenderer'],function(R,T){"use strict";var S=R.extend(T);
S.renderPart=function(r,c){r.write("<span");r.addClass("sapUshellStaticTile");r.writeClasses();r.write(">");r.write("</span>");};
return S;},true);
sap.ui.predefine('sap/ushell/ui/tile/TileBase',['sap/ui/core/Control','sap/ushell/library','./TileBaseRenderer'],function(C,l){"use strict";
var T=C.extend("sap.ushell.ui.tile.TileBase",{metadata:{library:"sap.ushell",properties:{title:{type:"string",group:"Data",defaultValue:null},subtitle:{type:"string",group:"Data",defaultValue:null},icon:{type:"string",group:"Data",defaultValue:null},info:{type:"string",group:"Data",defaultValue:null},infoState:{type:"sap.ushell.ui.tile.State",defaultValue:sap.ushell.ui.tile.State.Neutral},targetURL:{type:"string",group:"Behavior",defaultValue:null},highlightTerms:{type:"any",group:"Appearance",defaultValue:[]}},aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"}},events:{press:{}}}});
T.prototype.ontap=function(e){this.firePress({});};
T.prototype.onsapenter=function(e){this.firePress({});};
T.prototype.onsapspace=function(e){this.firePress({});};
return T;});
sap.ui.predefine('sap/ushell/ui/tile/TileBaseRenderer',["sap/ushell/resources","sap/base/security/encodeXML","sap/ui/core/Icon"],function(r,e,I){"use strict";var T={};var t=r.i18n;
T.highlight=function(h,s){var i,a,E=e(s).replace(/&#xa;/g,"<br>");if(h&&h.length&&h.length>0){for(i=0;i<h.length;i=i+1){a=new RegExp("("+e(h[i]).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")+")","gi");E=E.replace(a,"<b>$1</b>");}}return E;};
T.render=function(R,c){var i,o;R.write("<div");R.writeControlData(c);if(c.getTargetURL()){R.writeAttributeEscaped("data-targeturl",c.getTargetURL());}R.addClass("sapUshellTileBase");R.writeClasses();R.write(">");R.write("<div");R.addClass("sapUshellTileBaseHeader");R.writeClasses();R.write(">");R.write("<h3");R.addClass("sapUshellTileBaseTitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("tileTypeListItem")+t.getText("TileDetails_lable")+t.getText("TileTitle_lable")+c.getTitle(),level:"3"});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getTitle()||""));R.write("</h3>");if(c.getSubtitle()){R.write("<h4");R.addClass("sapUshellTileBaseSubtitle");R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileSubTitle_lable")+c.getSubtitle(),level:"4"});R.write(">");R.write(this.highlight(c.getHighlightTerms(),c.getSubtitle()));R.write("</h4>");}R.write("</div>");if(typeof(this.renderPart)==="function"){this.renderPart(R,c);}if(c.getIcon()){o=new I({src:c.getIcon()});o.addStyleClass("sapUshellTileBaseIcon");R.renderControl(o);}if(c.getInfo()||((typeof(this.getInfoPrefix)==="function"))&&this.getInfoPrefix(c)){R.write("<div");R.addClass("sapUshellTileBaseInfo");R.addClass(c.getInfoState()?"sapUshellTileBase"+c.getInfoState():"sapUshellTileBase"+sap.ushell.ui.tile.State.Neutral);R.writeClasses();R.writeAccessibilityState(c,{label:t.getText("TileInfo_lable")+c.getInfo()});R.write(">");if(typeof(this.getInfoPrefix)==="function"){i=this.getInfoPrefix(c);R.writeEscaped(i);}if(c.getInfo()){if(i){R.write(", ");}R.write(this.highlight(c.getHighlightTerms(),c.getInfo()));}R.write("</div>");}R.write("</div>");};
return T;},true);
sap.ui.predefine('sap/ushell/ui/utils',["sap/ushell/EventHub","sap/ui/thirdparty/jquery"],function(E,q){"use strict";
function s(e){var r=new q.Deferred(),w,c,t=0,f=0,a=0,p=[],b=[],d,A={refresh:false};function o(h){if(h&&h.refresh===true){A.refresh=true;}a++;r.notify();}function g(h){b.push({entry:d,message:h});f++;r.notify();}var u=E.last("UserSettingsOpened")||{};Object.keys(u).forEach(function(i){var I=parseInt(i,10);c=e[I].onSave();c.done(o);d=e[I].title;c.fail(g);p.push(c);t++;});w=q.when.apply(null,p);w.done(function(){E.emit("UserSettingsOpened",null);r.resolve(A);});r.progress(function(){if(f>0&&(f+a===t)){r.reject(b);}});return r.promise();}
return{saveUserPreferenceEntries:s};});
sap.ui.predefine('sap/ushell/ui5service/CardNavigation',["sap/ui/core/service/Service","sap/ushell/Config","sap/ushell/library","sap/base/Log","sap/ushell/utils/WindowUtils"],function(S,C,u,U,W){"use strict";var A=u.AppType;
var a=S.extend("sap.ushell.ui5service.CardNavigation",{constructor:function(){this.oCrossAppNavPromise=sap.ushell.Container.getServiceAsync("CrossApplicationNavigation");}});
a.prototype.navigate=function(c){var p=c.parameters;if(p.openUI){if(p.openUI==="RecentActivities"||p.openUI==="FrequentActivities"){sap.ui.require(["sap/ushell/ui/QuickAccess"],function(Q){var t=p.openUI==="RecentActivities"?"recentActivityFilter":"frequentlyUsedFilter";Q.openQuickAccessDialog(t);});}else{U.error("Request to open unknown User Interface: '"+p.openUI+"'");}return Promise.resolve();}else if(p.url&&p.url!==""){var l=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(l){var r={title:p.title,url:p.url,appType:A.URL,appId:p.url};sap.ushell.Container.getRenderer("fiori2").logRecentActivity(r);}W.openURL(p.url,"_blank");return Promise.resolve();}return this.oCrossAppNavPromise.then(function(o){return o.toExternal({target:{semanticObject:p.intentSemanticObject,action:p.intentAction},params:p.intentParameters,appSpecificRoute:p.intentAppRoute});});};
a.prototype.enabled=function(c){var p=c.parameters;if(p.openUI){if(["RecentActivities","FrequentActivities"].indexOf(p.openUI)>-1){return Promise.resolve(true);}return Promise.resolve(false);}var n={target:{semanticObject:p.intentSemanticObject,action:p.intentAction},params:p.intentParameters};return this.oCrossAppNavPromise.then(function(o){return new Promise(function(r){o.isNavigationSupported([n]).done(function(R){r(R[0].supported);}).fail(function(){r(false);});});});};
return a;});
sap.ui.predefine('sap/ushell/ui5service/CardUserFrequents',["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(C,E,c){"use strict";
var d=C.extend("sap.ushell.ui5service.CardUserFrequents");
d.prototype.getData=function(){if(!c.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([]);}return this.oUserRecentsPromise.then(function(u){return new Promise(function(r,a){u.getFrequentActivity().done(function(f){r(this._getActivitiesAsCardItems(f));}.bind(this)).fail(function(e){a(e);});}.bind(this));}.bind(this));};
d.prototype.attachDataChanged=function(u){E.on("newUserRecentsItem").do(function(r){var U=this._sortAsFrequentActivities(r.recentUsageArray);var a=[];for(var i=0;i<U.length;i++){a.push(U[i].oItem);}var p=this._getActivitiesAsCardItems(a);u({data:p});}.bind(this));E.on("userRecentsCleared").do(function(){u({data:[]});});};
d.prototype._sortAsFrequentActivities=function(r){var A,w=0,f=[],o,p=r[0]?new Date(r[0].iTimestamp):undefined,e;for(A=0;A<r.length&&w<30;A++){o=r[A];if(o.iCount>1){f.push(o);}e=new Date(o.iTimestamp);if(p.toDateString()!==e.toDateString()){w++;p=e;}}f.sort(function(a,b){return b.iCount-a.iCount;});return f.slice(0,30);};
d.prototype.detachDataChanged=function(){E.on("newUserRecentsItem").off();E.on("userRecentsCleared").off();};
d.hasNoAdapter=true;return d;},true);
sap.ui.predefine('sap/ushell/ui5service/CardUserRecents',["sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase","sap/ushell/EventHub","sap/ushell/Config"],function(C,E,a){"use strict";
var b=C.extend("sap.ushell.ui5service.CardUserRecents");
b.prototype.getData=function(){if(!a.last("/core/shell/model/enableTrackingActivity")){return Promise.resolve([]);}return this.oUserRecentsPromise.then(function(u){return new Promise(function(r,c){u.getRecentActivity().done(function(R){r(this._getActivitiesAsCardItems(R));}.bind(this)).fail(function(e){c(e);});}.bind(this));}.bind(this));};
b.prototype.attachDataChanged=function(u){E.on("newUserRecentsItem").do(function(r){var U=r.recentUsageArray;var c=[];for(var i=0;i<U.length;i++){c.push(U[i].oItem);}var p=this._getActivitiesAsCardItems(c);u({data:p});}.bind(this));E.on("userRecentsCleared").do(function(){u({data:[]});});};
b.prototype.detachDataChanged=function(){E.on("newUserRecentsItem").off();E.on("userRecentsCleared").off();};
b.hasNoAdapter=true;return b;});
sap.ui.predefine('sap/ushell/ui5service/ShellUIService',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","./_ShellUIService/shelluiservice.class.factory"],function(S,a,b,d){"use strict";return d({serviceRegistry:S,serviceFactory:a,service:b});},true);
sap.ui.predefine('sap/ushell/ui5service/UserStatus',["sap/ui/core/service/ServiceFactoryRegistry","sap/ui/core/service/ServiceFactory","sap/ui/core/service/Service","sap/ui/base/EventProvider"],function(S,a,b,E){"use strict";var O={statusChanged:"statusChanged",serviceStateChanged:"serviceStateChanged"};
var U=b.extend("sap.ushell.ui5service.UserStatus",{
init:function(){U.prototype.isEnabled=false;S.register("sap.ushell.ui5service.UserStatus",new a(U));this.oEventProvider=new E();U.prototype.AvailableStatus={AVAILABLE:"AVAILABLE",AWAY:"AWAY",BUSY:"BUSY",APPEAR_OFFLINE:"APPEAR_OFFLINE"};},
exit:function(){this.oEventProvider.destroy();}
});
U.prototype.setEnabled=function(e){this.oEventProvider.fireEvent(O.serviceStateChanged,{data:e});U.prototype.isEnabled=e;return;};
U.prototype.setStatus=function(n){if(!U.prototype.isEnabled){throw new Error("Unable to change status because the UserStatus service is disabled.");}if(!U.prototype.AvailableStatus[n]&&n!==null){throw new Error("Enter a valid status.");}this.oEventProvider.fireEvent(O.statusChanged,{data:n});};
U.prototype.attachStatusChanged=function(f){this.oEventProvider.attachEvent(O.statusChanged,f);};
U.prototype.detachStatusChanged=function(f){this.oEventProvider.detachEvent(O.statusChanged,f);};
return U;});
sap.ui.predefine('sap/ushell/ui5service/_CardUserRecents/CardUserRecentsBase',["sap/ui/core/service/Service","sap/ushell/resources","sap/ushell/library","sap/ushell/utils/AppType","sap/ushell/utils/UrlParsing"],function(S,r,u,A,U){"use strict";var a=u.AppType;
function _(t,s){if(s===a.SEARCH){return"\""+t+"\"";}return t;}
function b(s){if(s===a.SEARCH){return r.i18n.getText("recentActivitiesSearchDescription");}return A.getDisplayName(s);}
var C=S.extend("sap.ushell.ui5service._CardUserRecents.CardUserRecentsBase",{constructor:function(){S.apply(this);this.oUserRecentsPromise=sap.ushell.Container.getServiceAsync("UserRecents");}});
C.prototype._getActivitiesAsCardItems=function(c){var d=[],s={},o;for(var i=0;i<c.length;i++){if(c[i].url&&c[i].url!==""){s=U.parseShellHash(c[i].url);o={Name:_(c[i].title,c[i].appType),Description:b(c[i].appType),Icon:c[i].icon||"sap-icon://product"};if(s){o.Intent={SemanticObject:s.semanticObject,Action:s.action,Parameters:s.params,AppSpecificRoute:s.appSpecificRoute};}else{o.Url=c[i].url;}d.push(o);}}return d;};
return C;},true);
sap.ui.predefine('sap/ushell/ui5service/_ShellUIService/shelluiservice.class.factory',["sap/ui/base/EventProvider","sap/ui/thirdparty/hasher","sap/base/util/isPlainObject","sap/base/util/Version","sap/base/Log","sap/ushell/utils/UrlParsing"],function(E,h,i,V,L,U){"use strict";return function(s){var S=s.serviceRegistry,a=s.serviceFactory,b=s.service;var l;var e=new E();var O={hierarchyChanged:"hierarchyChanged",relatedAppsChanged:"relatedAppsChanged",titleChanged:"titleChanged",backNavigationChanged:"backNavigationChanged"};var A;var c=b.extend("sap.ushell.ui5service.ShellUIService",{init:function(){var t=this,p=this.getInterface();p.init=function(){t._amendPublicServiceInstance.call(t,this);};S.register("sap.ushell.ui5service.ShellUIService",new a(p));},_setActiveComponentId:function(I){A=I;},_getActiveComponentId:function(){return A;},_shouldEnableAutoHierarchy:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setHierarchy")==="auto";},_shouldEnableAutoTitle:function(o){return typeof o.getManifestEntry==="function"&&o.getManifestEntry("/sap.ui5/services/ShellUIService/settings/setTitle")==="auto";},_enableAutoHierarchy:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){L.error("Could not enable automatic setHierarchy on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}r.attachTitleChanged(function(d){var H=d.getParameter("history");t.setHierarchy(H.reverse().map(function(u){var f=t._getCurrentShellHashWithoutAppRoute();return{title:u.title,intent:f+"&/"+u.hash};}));});},_enableAutoTitle:function(o){var t=this;var r=o.getRouter&&o.getRouter();if(!r){L.error("Could not enable automatic setTitle on the current app","Router could not be obtained on the app root component via getRouter","sap.ushell.ui5service.ShellUIService");return;}var T=r.getTitleHistory()[0];if(T&&T.title){setTimeout(function(){t.setTitle(T.title);},0);}r.attachTitleChanged(function(d){var f=d.getParameter("title");t.setTitle(f);});},_getCurrentShellHashWithoutAppRoute:function(){var f="#"+h.getHash();var u=U.getShellHash(f);if(!u){L.error("Cannot get the current shell hash","UrlParsing service returned a falsy value for "+f,"sap.ushell.ui5service.ShellUIService");return"";}return"#"+u;},_getEventProvider:function(){return e;},_getLastSetTitle:function(){return l;},_ensureArrayOfObjectOfStrings:function(v,m){var d=Array.isArray(v)&&v.every(function(o){return i(o)&&Object.keys(o).length>0&&Object.keys(o).every(function(k){return typeof o[k]==="string";});});if(!d){L.error("'"+m+"' was called with invalid parameters","An array of non-empty objects with string values is expected","sap.ushell.ui5service.ShellUIService");}return d;},_ensureFunction:function(v,m){var t=typeof v;if(t!=="function"){L.error("'"+m+"' was called with invalid arguments","the parameter should be a function, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_ensureString:function(v,m){var t=typeof v;if(t!=="string"){L.error("'"+m+"' was called with invalid arguments","the parameter should be a string, got '"+t+"' instead","sap.ushell.ui5service.ShellUIService");return false;}return true;},_addCallAllowedCheck:function(p,P){var t=this;p[P]=function(){var C=p.getContext();if(!C||C.scopeObject.getId()!==A){L.warning("Call to "+P+" is not allowed","This may be caused by an app component other than the active '"+A+"' that tries to call the method","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setHierarchy"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoHierarchy(C.scopeObject)){L.warning("Call to "+P+" is not allowed","The app defines that setHierarchy should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}if(P==="setTitle"&&C.scopeType==="component"&&C.scopeObject&&t._shouldEnableAutoTitle(C.scopeObject)){L.warning("Call to "+P+" is not allowed","The app defines that setTitle should be called automatically","sap.ushell.ui5service.ShellUIService");return undefined;}return t[P].apply(p,arguments);};},_amendPublicServiceInstance:function(p){var t=this,C;C=p.getContext();if(typeof C==="undefined"){return;}["setTitle","setHierarchy","setRelatedApps","setBackNavigation"].forEach(function(m){t._addCallAllowedCheck(p,m);});var o=C.scopeObject;if(C.scopeType==="component"&&o){this._setActiveComponentId(o.getId());if(this._shouldEnableAutoHierarchy(o)){this._enableAutoHierarchy(o);}if(this._shouldEnableAutoTitle(o)){this._enableAutoTitle(o);}return;}L.error("Invalid context for ShellUIService interface","The context must be empty or an object like { scopeType: ..., scopeObject: ... }","sap.ushell.ui5service.ShellUIService");},setHierarchy:function(H){if(typeof H!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(H,"setHierarchy")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.hierarchyChanged,{data:H,component:C});},setTitle:function(t){if(typeof t!=="undefined"&&!c.prototype._ensureString(t,"setTitle")){return;}var C=this.getContext().scopeObject;l=t;e.fireEvent(O.titleChanged,{data:t,component:C});},setBackNavigation:function(C){if(typeof C!=="undefined"&&!c.prototype._ensureFunction(C,"setBackNavigation")){return;}var o=this.getContext().scopeObject;e.fireEvent(O.backNavigationChanged,{data:C,component:o});},getTitle:function(){return this._getLastSetTitle();},setRelatedApps:function(r){if(typeof r!=="undefined"&&!c.prototype._ensureArrayOfObjectOfStrings(r,"setRelatedApps")){return;}var C=this.getContext().scopeObject;e.fireEvent(O.relatedAppsChanged,{data:r,component:C});},getUxdVersion:function(){if((new V(sap.ui.version).compareTo("1.37.0"))>=0){return 2;}return 1;},_attachHierarchyChanged:function(f){this._getEventProvider().attachEvent(O.hierarchyChanged,f);},_detachHierarchyChanged:function(f){this._getEventProvider().detachEvent(O.hierarchyChanged,f);},_attachTitleChanged:function(f){this._getEventProvider().attachEvent(O.titleChanged,f);},_attachBackNavigationChanged:function(f){this._getEventProvider().attachEvent(O.backNavigationChanged,f);},_detachBackNavigationChanged:function(f){this._getEventProvider().detachEvent(O.backNavigationChanged,f);},_detachTitleChanged:function(f){this._getEventProvider().detachEvent(O.titleChanged,f);},_attachRelatedAppsChanged:function(f){this._getEventProvider().attachEvent(O.relatedAppsChanged,f);},_detachRelatedAppsChanged:function(f){this._getEventProvider().detachEvent(O.relatedAppsChanged,f);}});return c;};});
sap.ui.predefine('sap/ushell/utils',["sap/base/Log","sap/base/util/ObjectPath","sap/base/util/uid","sap/base/util/UriParameters","sap/ui/Device","sap/ui/thirdparty/jquery","sap/ui/thirdparty/URI","sap/ushell/utils/clone","sap/ushell/utils/UrlParsing","sap/ushell/utils/objectOperations","sap/ushell/utils/type"],function(L,O,U,b,D,q,c,u,d,f,g){"use strict";var h={};h.isArray=g.isArray;h.isPlainObject=g.isPlainObject;h.isDefined=g.isDefined;h.clone=u;h.getMember=f.getMember;h.updateProperties=f.updateProperties;h.getNestedObjectProperty=f.getNestedObjectProperty;
h.removeDuplicatedActions=function(a){if(Array.isArray(a)){var F=a.reduce(function(r,i){if(r.indexOf(i)<0){r.push(i);}return r;},[]);return F;}return a;};
h.storeSapSystemData=function(s,S){var k,l,a,i=[s.id];if(arguments.length>1){i.unshift(S);}try{a=JSON.stringify(s);}catch(e){L.error("Cannot stringify and store expanded system data: "+e);}if(a){l=h.getLocalStorage();k=h.generateLocalStorageKey("sap-system-data",i);l.setItem(k,a);}};
h.getLocalSystemInSidFormat=function(){var s=sap.ushell.Container.getLogonSystem(),S=s.getName(),a=s.getClient();return"sid("+S+"."+a+")";};
h.matchesLocalSid=function(s){return h.getLocalSystemInSidFormat().toLowerCase()===s.toLowerCase();};
h.storeSapSystemToLocalStorage=function(a){var p=(a||{}).params;if(!p||!p.hasOwnProperty("sap-system")){return;}if(h.isPlainObject(p["sap-system"])){var s=p["sap-system"],S=p["sap-system-src"];if(typeof S==="string"){h.storeSapSystemData(s,S);p["sap-system-src"]=S;}else{h.storeSapSystemData(s);}p["sap-system"]=s.id;}else if(h.matchesLocalSid(p["sap-system"])){delete p["sap-system"];}};
h.setPerformanceMark=function(m,C){if(performance&&performance.mark){if(!C){C={};}if(C.bUseUniqueMark){if(C.bUseLastMark){performance.clearMarks(m);}else if(performance.getEntriesByName(m,"mark").length>0){return;}}performance.mark(m);}};
h.setPerformanceMeasure=function(m,s,e){if(performance&&performance.measure&&s&&e){performance.measure(m,s,e);}};
h.Error=function(m,C){this.name="sap.ushell.utils.Error";this.message=m;L.error(m,null,C);};
h.Error.prototype=new Error();
h.localStorageSetItem=function(k,v,l){var E;try{localStorage.setItem(k,v);if(l){E=document.createEvent("StorageEvent");E.initStorageEvent("storage",false,false,k,"",v,"",localStorage);dispatchEvent(E);}}catch(e){L.warning("Error calling localStorage.setItem(): "+e,null,"sap.ushell.utils");}};
h.getLocalStorage=function(){return window.localStorage;};
h.getLocalStorageItem=function(k){return window.localStorage.getItem(k);};
h.generateUniqueId=function(t){var s,e,i;if(Array.isArray(t)){e=t;i=function(G){return e.indexOf(G)===-1;};}else{i=t;}do{s=h._getUid();}while(!i(s));return s;};
h._getUid=function(){return U();};
h.reload=function(){location.reload();};
h.calculateOrigin=function(o){var a;if(o.origin){return o.origin;}if(o.protocol&&o.hostname){return o.protocol+"//"+o.hostname+(o.port?":"+o.port:"");}if(o.href){a=new c(o.href);return a.protocol()+"://"+a.hostname()+(a.port()?":"+a.port():"");}return undefined;};
h.getPrivateEpcm=function(){if(window.external&&window.external&&typeof window.external.getPrivateEpcm!=="undefined"){return window.external.getPrivateEpcm();}return undefined;};
h.hasNativeNavigationCapability=function(){return h.isFeatureBitEnabled(1);};
h.hasNativeLogoutCapability=function(){return h.isFeatureBitEnabled(2);};
h.hasNavigationModeCapability=function(){return h.isFeatureBitEnabled(4);};
h.hasFLPReadyNotificationCapability=function(){return h.isFeatureBitEnabled(8);};
h.hasFLPReady2NotificationCapability=function(){return h.isFeatureBitEnabled(16);};
h.isFeatureBitEnabled=function(F){var s="0",p;p=h.getPrivateEpcm();if(p){try{s=p.getNwbcFeatureBits();L.debug("Detected epcm getNwbcFeatureBits returned feature bits: "+s);}catch(e){L.error("failed to get feature bit vector via call getNwbcFeatureBits on private epcm object",e.stack,"sap.ushell.utils");}}return(parseInt(s,16)&F)>0;};
h.isApplicationTypeEmbeddedInIframe=function(a){return a==="NWBC"||a==="TR"||a==="WCF";};
h.appendSapShellParam=function(s,a){var e=a==="TR"?"":"-NWBC",v=h.getUi5Version();if(v){s+=s.indexOf("?")>=0?"&":"?";s+="sap-shell="+encodeURIComponent("FLP"+v+e);}return s;};
h.getUi5Version=function(){var v,m;try{v=sap.ui.getVersionInfo().version;}catch(e){L.error("sap ui version could not be determined, using sap.ui.version (core version) as fallback "+e);v=window.sap&&sap.ui&&sap.ui.version;}m=/\d+\.\d+\.\d+/.exec(v);if(m&&m[0]){v=m[0];}else{v=undefined;}return v;};
h.isNativeWebGuiNavigation=function(r){var a=O.get("applicationType",r);var n=O.get("appCapabilities.nativeNWBCNavigation",r);if(this.hasNativeNavigationCapability()&&(a==="TR"||n)){return true;}return false;};
h.Map=function(){this.entries={};};
h.Map.prototype.put=function(k,v){var o=this.get(k);this.entries[k]=v;return o;};
h.Map.prototype.containsKey=function(k){if(typeof k!=="string"){throw new h.Error("Not a string key: "+k,"sap.ushell.utils.Map");}return Object.prototype.hasOwnProperty.call(this.entries,k);};
h.Map.prototype.get=function(k){if(this.containsKey(k)){return this.entries[k];}};
h.Map.prototype.keys=function(){return Object.keys(this.entries);};
h.Map.prototype.remove=function(k){delete this.entries[k];};
h.Map.prototype.toString=function(){var r=["sap.ushell.utils.Map("];r.push(JSON.stringify(this.entries));r.push(")");return r.join("");};
h.getParameterValueBoolean=function(p,P){var o=b.fromQuery(P||window.location.search),a=o.getAll(p),t=["true","x"],F=["false",""],v;if(!a||a.length===0){return undefined;}v=a[0].toLowerCase();if(t.indexOf(v)>=0){return true;}if(F.indexOf(v)>=0){return false;}return undefined;};
h.call=function(s,F,a){var m;if(a){setTimeout(function(){h.call(s,F,false);},0);return;}try{s();}catch(e){m=e.message||e.toString();L.error("Call to success handler failed: "+m,e.stack,"sap.ushell.utils");if(F){F(m);}}};
h.handleTilesVisibility=function(){h.getVisibleTiles();};
h.refreshTiles=function(){sap.ui.getCore().getEventBus().publish("launchpad","refreshTiles");};
h.setTilesNoVisibility=function(){sap.ui.getCore().getEventBus().publish("launchpad","setTilesNoVisibility");};
h.getBasicHash=function(a){if(!h.validHash(a)){L.debug("Utils ; getBasicHash ; Got invalid hash");return false;}var s=d.parseShellHash(a);return s?s.semanticObject+"-"+s.action:a;};
h.validHash=function(a){return(a&&a.constructor===String&&q.trim(a)!=="");};
h.getFormFactor=function(){var s=sap.ui.Device.system;if(s.desktop){return s.SYSTEMTYPE.DESKTOP;}if(s.tablet){return s.SYSTEMTYPE.TABLET;}if(s.phone){return s.SYSTEMTYPE.PHONE;}return undefined;};
h.getVisibleTiles=function(){var n=document.body.clientHeight,C=sap.ui.getCore().byId("dashboardGroups"),N=sap.ui.getCore().byId("viewPortContainer"),a,t,e,i,j,k,T,l,m,o,p,s=q("#shell-hdr").height(),r=[],G,I,v=[],E=sap.ui.getCore().getEventBus(),w,x,y,z;if(window.document.hidden){E.publish("launchpad","onHiddenTab");}if(C&&C.getGroups()&&N){G=q(C.getDomRef());I=G?G.is(":visible"):false;w=C.getGroups();for(a=0;a<w.length;a=a+1){i=w[a];j=i.getTiles();k=i.getLinks();x=[j,k];for(e=0;e<x.length;e++){y=x[e];if(y){for(t=0;t<y.length;t++){T=y[t];if(!I||window.document.hidden){r.push(T);}else{l=q(T.getDomRef());m=l.offset();if(m){o=l.offset().top;p=o+l.height();z=i.getVisible()&&(p>s-300)&&(o<n+300);if(z){v.push({oTile:h.getTileModel(T),iGroup:a,bIsExtanded:!(p>s)||!(o<n)});}else if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);return r;}r.push(T);}}}}}}}if(v.length>0){E.publish("launchpad","visibleTilesChanged",v);}return r;};
h.getTileModel=function(a){var e;if(a.isA("sap.ui.integration.widgets.Card")){e=a.getBindingContext("ushellCardModel");}else{e=a.getBindingContext();}return e.getObject()?e.getObject():null;};
h.getTileObject=function(a){var e;if(a.isA("sap.ui.integration.widgets.Card")){e=a.getBindingContext("ushellCardModel");}else{e=a.getBindingContext();}return e.getObject()?e.getObject().object:null;};
h.recalculateBottomSpace=function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer:visible"),l=j.last(),a=q(".sapUshellShellHead > header").height(),e=l.parent().height(),i=parseInt(l.find(".sapUshellContainerTitle").css("margin-top"),10),k=parseInt(q(".sapUshellDashboardGroupsContainer").css("padding-bottom"),10),n;if(j.length===1){n=0;}else{n=q(window).height()-a-e-i-k;n=(n<0)?0:n;}q(".sapUshellDashboardGroupsContainer").css("margin-bottom",n+"px");};
h.calcVisibilityModes=function(G,p){var i=true,I=true,l=G.pendingLinks&&G.pendingLinks.length?G.pendingLinks:G.links,a=h.groupHasVisibleTiles(G.tiles,l);if(!a&&(!p||(G.isGroupLocked)||(G.isDefaultGroup)||D.system.phone||(D.system.tablet&&!D.system.desktop))){i=false;}if(!a&&!p){I=false;}return[i,I];};
h.groupHasVisibleTiles=function(a,e){var v=false,t,i,j=!a?[]:a,l=!e?[]:e;j=j.concat(l);if(!j.length){return false;}for(t=0;t<j.length;t=t+1){i=j[t];if(i.isTileIntentSupported){v=true;break;}}return v;};
h.invokeUnfoldingArrayArguments=function(F,A){var t=this,e,o,p,r,i;if(!Array.isArray(A[0])){return F.apply(this,A);}e=A[0];if(e.length===0){return new q.Deferred().resolve([]).promise();}o=new q.Deferred();p=[];r=[];i=new q.Deferred().resolve();e.forEach(function(n,I){if(!Array.isArray(n)){var E="Expected Array as nTh Argument of multivalue invocation: "+"first Argument must be array of array of arguments: single valued f(p1,p2), f(p1_2,p2_2), f(p1_3,p2_3) : "+"multivalued : f([[p1,p2],[p1_2,p2_2],[p1_3,p2_3]]";L.error(E);throw new Error(E);}var j=F.apply(t,n),k=new q.Deferred();j.done(function(){var a=Array.prototype.slice.call(arguments);r[I]=a;k.resolve();}).fail(k.reject.bind(k));p.push(k.promise());i=q.when(i,k);});q.when.apply(q,p).done(function(){o.resolve(r);}).fail(function(){o.reject("failure");});return o.promise();};
h._getCurrentDate=function(){return new Date();};
h._convertToUTC=function(a){return Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds());};
h.formatDate=function(C){var i,n,t,a,H,m;i=h._convertToUTC(new Date(C));n=h._convertToUTC(h._getCurrentDate());t=n-i;a=parseInt(t/(1000*60*60*24),10);if(a>0){if(a===1){return sap.ushell.resources.i18n.getText("time_day",a);}return sap.ushell.resources.i18n.getText("time_days",a);}H=parseInt(t/(1000*60*60),10);if(H>0){if(H===1){return sap.ushell.resources.i18n.getText("time_hour",H);}return sap.ushell.resources.i18n.getText("time_hours",H);}m=parseInt(t/(1000*60),10);if(m>0){if(m===1){return sap.ushell.resources.i18n.getText("time_minute",m);}return sap.ushell.resources.i18n.getText("time_minutes",m);}return sap.ushell.resources.i18n.getText("just_now");};
h.toExternalWithParameters=function(s,a,p){sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(C){var t={},P={},i,T,e;t.target={semanticObject:s,action:a};if(p&&p.length>0){P={};for(i=0;i<p.length;i++){T=p[i].Key;e=p[i].Value;P[T]=e;}t.params=P;}C.toExternal(t);});};
h.moveElementInsideOfArray=function(a,n,e){if(!h.isArray(a)||n===undefined||e===undefined){throw"Incorrect input parameters passed";}if(n>=a.length||e>=a.length||e<0||n<0){throw"Index out of bounds";}var E=a.splice(n,1)[0];a.splice(e,0,E);return a;};
h.shallowMergeObject=function(t){return Array.prototype.slice.call(arguments,1,arguments.length).map(function(s){return{sourceObject:s,properties:Object.keys(s)};}).reduce(function(r,s){s.properties.forEach(function(p){r[p]=s.sourceObject[p];});return r;},t);};
h.getLocationHref=function(){return window.location.href;};
h.generateLocalStorageKey=function(p,i){var n=i.length;if(n===0){throw new Error("At least one id should be provided when generating the local storage key");}var s="$";if(n===2){s="#";}else if(n>2){s="@"+n+"@";}return p+s+i.join(":");};
h.urlParametersToString=function(p,a,e){return d.privparamsToString(p,a,e);};
h.isRootIntent=function(i){if(typeof i!=="string"){throw new Error("The given intent must be a string");}var r="renderers.fiori2.componentData.config.rootIntent";var C=O.get(r,window["sap-ushell-config"])||"#Shell-home";var R=C.replace("#","");var I=i.replace("#","");return I===""||I===R;};
h.isFlpHomeIntent=function(i){if(!i){i=window.location.hash;if(!i){i=O.get("renderers.fiori2.componentData.config.rootIntent",window["sap-ushell-config"])||"Shell-home";}}else if(typeof i!=="string"){throw new Error("The given intent must be a string");}var I=i.replace("#","");return I.indexOf("Shell-home")===0||I.indexOf("Launchpad-openFLPPage")===0;};
h.generateRandomKey=function(){var C="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var r="";var R=new window.Uint32Array(40);window.crypto.getRandomValues(R);var a=function(i){var e=R[i]%C.length;return C[e];};while(r.length<40){r+=a(r.length);}return r;};
return h;},true);
sap.ui.predefine('sap/ushell/utils/AppType',["sap/ushell/library","sap/ushell/resources"],function(u,r){"use strict";var A=u.AppType;var a={};
a.getDisplayName=function(b){switch(b){case A.OVP:return r.i18n.getText("Apptype.OVP");case A.SEARCH:return r.i18n.getText("Apptype.SEARCH");case A.FACTSHEET:return r.i18n.getText("Apptype.FACTSHEET");case A.COPILOT:return r.i18n.getText("Apptype.COPILOT");case A.URL:return r.i18n.getText("Apptype.URL");default:return r.i18n.getText("Apptype.APP");}};
return a;});
sap.ui.predefine('sap/ushell/utils/DynamicTileRequest',["sap/ushell/utils/HttpClient","sap/ui/thirdparty/URI","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/base/Log"],function(H,U,i,a,L){"use strict";
function D(u,s,e,c){this.fnSuccess=s;this.fnError=e;this.sUrl=u;this.oPromise=this._resolveDefaults(u,c).then(function(r){if(r){var S=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();var o=new U(r).escapeQuerySpace(false);if(S&&!o.hasQuery("sap-language")){o.addQuery("sap-language",S);}if(o.is("relative")){o=o.absoluteTo(location.href);}this.sBasePath=o.origin()+o.directory()+"/";this.sRequestPath=o.relativeTo(this.sBasePath).href();var h=this._getHeaders(r);this.oConfig={headers:h};this.oClient=new H(this.sBasePath,this.oConfig);this.refresh();}}.bind(this)).catch(function(E){L.error("Was not able to create a DynamicTileRequest:",E);});}
D.prototype._getRequestUrl=function(){return this.sBasePath+this.sRequestPath;};
D.prototype.refresh=function(){if(!this.oRequest&&this.oClient){this.oRequest=this.oClient.get(this.sRequestPath).then(this._onSuccess.bind(this)).catch(this._onError.bind(this));}};
D.prototype.abort=function(){if(this.oRequest&&this.oClient){this.oClient.abortAll();this.oRequest=null;return true;}return false;};
D.prototype._onSuccess=function(r){var R;try{R=JSON.parse(r.responseText);}catch(e){throw new Error("Was not able to parse response of dynamic tile request");}this.oRequest=null;var d;if(typeof R==="object"){R=R.d?R.d:R;var u=new a(this.sRequestPath);if(u.get("$inlinecount")==="allpages"){d={number:R.__count};}else if(u.get("$count")==="true"){d={number:R["@odata.count"]};}else{d=this._extractData(R);}}else if(typeof R==="string"||typeof R==="number"){d={number:R};}this.fnSuccess(d);};
D.prototype._onError=function(e){this.oRequest=null;this.fnError(e);};
D.prototype._extractData=function(d){var s=["results","icon","title","number","numberUnit","info","infoState","infoStatus","targetParams","subtitle","stateArrow","numberState","numberDigits","numberFactor"];var r=Object.keys(d).reduce(function(A,k){if(s.indexOf(k)>-1){A[k]=d[k];}return A;},{});if(!i(r)){return r;}var f=Object.keys(d)[0];if(f!==undefined&&Object.keys(d).length===1){return Object.keys(d[f]).reduce(function(A,k){if(s.indexOf(k)>-1){A[k]=d[f][k];}return A;},{});}return{};};
D.prototype._getHeaders=function(u){var h={"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0","Accept-Language":(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"",Accept:"application/json, text/plain"};var s=sap.ui.getCore().getConfiguration().getSAPLogonLanguage();if(s){h["sap-language"]=s;}var S=sap.ushell.Container.getLogonSystem()?sap.ushell.Container.getLogonSystem().getClient():"";var o=new U(u);if(S&&!o.protocol()){h["sap-client"]=S;}return h;};
D.prototype._resolveDefaults=function(u,c){return sap.ushell.Container.getServiceAsync("ClientSideTargetResolution").then(function(C){return Promise.all([C.getSystemContext(c),sap.ushell.Container.getServiceAsync("ReferenceResolver")]);}).then(function(r){var s=r[0];var R=r[1];return new Promise(function(b,d){R.resolveUserDefaultParameters(u,s).done(b).fail(d);});}).then(function(r){if(r.defaultsWithoutValue&&r.defaultsWithoutValue.length>0){L.error("The service URL contains User Default(s) with no set value: "+r.defaultsWithoutValue.join(", "));return;}if(r.ignoredReferences&&r.ignoredReferences.length>0){L.error("The service URL contains invalid Reference(s): "+r.ignoredReferences.join(", "));return;}return r.url;});};
D.prototype.destroy=function(){this.abort();this.fnError=null;this.fnSuccess=null;};
return D;});
sap.ui.predefine('sap/ushell/utils/HttpClient',["sap/ui/thirdparty/URI","sap/ushell/utils"],function(U,u){"use strict";var H=function(b,d){this._oOngoingRequests={};this._oCSRFTokens={};this._oDefaultOptions={headers:d&&d.headers||{}};if(typeof b==="string"){this._oBasePath=new U(b);}else{this._oDefaultOptions={headers:b&&b.headers||{}};}};
H.prototype.get=function(r,o){return this._executeRequest("GET",r,o);};
H.prototype.put=function(r,o){return this._executeRequest("PUT",r,o);};
H.prototype.post=function(r,o){return this._executeRequest("POST",r,o);};
H.prototype.patch=function(r,o){return this._executeRequest("PATCH",r,o);};
H.prototype.delete=function(r,o){return this._executeRequest("DELETE",r,o);};
H.prototype.options=function(r,o){return this._executeRequest("OPTIONS",r,o);};
H.prototype.abortAll=function(){Object.keys(this._oOngoingRequests).forEach(function(k){this._oOngoingRequests[k].abort();}.bind(this));};
H.prototype._executeRequest=function(r,R,d){var i=new Error("The provided resource path is not a valid URL.");try{var c;var o=new U(R);if(!o.is("url")){return Promise.reject(i);}if(this._oBasePath){c=o.absoluteTo(this._oBasePath);}else{c=o;}var x=new XMLHttpRequest();x._sapUshellHttpClientId=u.generateUniqueId(Object.keys(this._oOngoingRequests));this._oOngoingRequests[x._sapUshellHttpClientId]=x;var h=Object.assign({},this._oDefaultOptions.headers,d&&d.headers);return this._getCSRFTokenHeader(r,c).then(function(C){Object.assign(h,C);return new Promise(function(a,b){var s=c.href();x.onload=this._onLoad.bind(this,a,b,{xhr:x,method:r,url:s,data:d});x.onerror=function(){b.call(this,this._getFormattedResponse(x));}.bind(this);x.onabort=function(){x.bAborted=true;b.call(this,this._getFormattedResponse(x));}.bind(this);x.onloadend=function(){delete this._oOngoingRequests[x._sapUshellHttpClientId];}.bind(this);x.open(r,s);Object.keys(h).forEach(function(k){x.setRequestHeader(k,h[k]);});var B=d&&d.data||"";if(typeof B!=="string"){B=JSON.stringify(B);}x.send(B);}.bind(this));}.bind(this));}catch(e){return Promise.reject(i);}};
H.prototype._getCSRFTokenHeader=function(r,a){switch(r){case"HEAD":case"GET":case"OPTIONS":return Promise.resolve({"x-csrf-token":"fetch"});case"POST":case"PATCH":case"PUT":case"DELETE":var k=this._getCSRFTokenKey(a);if(this._oCSRFTokens[k]){return Promise.resolve({"x-csrf-token":this._oCSRFTokens[k]});}var R=a.href();if(this._oBasePath){R=this._oBasePath.origin()+this._oBasePath.directory();}return this._executeRequest("OPTIONS",R).then(function(o){var c=this._getCSRFTokenFromHeader(o.responseHeaders);if(!c){throw new Error("CSRF Token couldn't be fetched.");}return{"x-csrf-token":c};}.bind(this));default:return Promise.resolve({});}};
H.prototype._onLoad=function(r,R,o){var f=this._getFormattedResponse(o.xhr);var c=this._getCSRFTokenFromHeader(f.responseHeaders);if(c){var k=this._getCSRFTokenKey(new U(o.url));if(c.toLowerCase()==="required"&&f.status===403){delete this._oCSRFTokens[k];return this._executeRequest(o.method,o.url,o.data).then(r).catch(R);}this._oCSRFTokens[k]=c;}if(f.status>=200&&f.status<300){return r(f);}return R(f);};
H.prototype._getCSRFTokenKey=function(c){if(this._oBasePath){return this._oBasePath.origin()+this._oBasePath.directory();}return c.origin()+c.directory();};
H.prototype._getCSRFTokenFromHeader=function(r){var c=r.filter(function(h){return h.name==="x-csrf-token";})[0];return c&&c.value;};
H.prototype._getFormattedResponse=function(x){return{aborted:x.bAborted||false,status:x.status,statusText:x.statusText,responseText:x.responseText,responseHeaders:x.getAllResponseHeaders().split(/\r\n/g).filter(function(i){return i.length>0;}).map(function(h){var p=h.split(":");return{name:p[0].trim(),value:p[1].trim()};})};};
return H;},true);
sap.ui.predefine('sap/ushell/utils/RestrictedJSONModel',["sap/ui/model/json/JSONModel"],function(J){"use strict";
function n(){throw new Error("sap.ushell.utils.RestrictedJSONModel : Function not supported");}
return J.extend("sap.ushell.utils.RestrictedJSONModel",{constructor:function(){J.prototype.constructor.apply(this,arguments);this.setDefaultBindingMode("OneWay");this.setDefaultBindingMode=n;this.setData=n;this.setJSON=n;this.setProperty=n;this.loadData=n;},_setData:function(){J.prototype.setData.apply(this,arguments);},_setJSON:function(){this.setData=J.prototype.setData;J.prototype.setJSON.apply(this,arguments);this.setData=n;},_setProperty:function(){this.setData=J.prototype.setData;J.prototype.setProperty.apply(this,arguments);this.setData=n;}});});
sap.ui.predefine('sap/ushell/utils/UrlParsing',["sap/ui/thirdparty/URI","sap/base/util/UriParameters","sap/base/Log"],function(U,b,L){"use strict";
function c(){}
var r=/^(([A-Za-z0-9_/]+)-([A-Za-z0-9_/-]+)(~([A-Z0-9a-z=+/]+))?)?([?]([^&]|(&[^/]))*&?)?$/;
c.getShellHash=function(s){var a=/[^#]*#(([^&]|&[^/])*)(&\/.*)?/,m=a.exec(s);if(m){return m[1];}return undefined;};
c.getHash=function(u){var a=/#(.*)/,m=a.exec(u);if(m){return m[1];}return undefined;};
c.isIntentUrl=function(u){return this._isIntentUrl(u,window.location.href);};
c.isIntentUrlAsync=function(u){return new Promise(function(a,e){sap.ushell.Container.getFLPUrlAsync(true).done(a).fail(e);}).then(function(f){return this._isIntentUrl(u,f);}.bind(this));};
c._isIntentUrl=function(u,f){var a=/^#/,t,l,T,s,h,p;if(typeof u!=="string"){return false;}if(!a.test(u)){t=(new U(u)).normalize();T=t.protocol()+"://"+t.host()+t.pathname();l=(new U(f)).normalize();s=l.protocol()+"://"+l.host()+l.pathname();if(T!==s){return false;}}h=c.getHash(u);if(!h){return false;}p=c.parseShellHash(h);if(p&&p.semanticObject&&p.action){return true;}return false;};
c.parseParameters=function(p){var u=b.fromQuery(p);var k=u.keys();var K=k.next();var P={};while(K.done===false){P[K.value]=u.getAll(K.value);K=k.next();}return P;};
function _(p,e,f){var g,a,k,i,l,s="";e=e||"&";f=f||"=";g="";a=null;l=[];for(a in p){if(p.hasOwnProperty(a)){l.push(a);}}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(Array.isArray(p[a])){for(i=0;i<p[a].length;i=i+1){s+=g+encodeURIComponent(a)+f+encodeURIComponent(p[a][i]);g=e;}}else{s+=g+encodeURIComponent(a)+f+encodeURIComponent(p[a]);g=e;}}return s;}
c.paramsToString=function(p){return _(p);};
c.privparamsToString=function(p,D,a){return _(p,D,a);};
c.parseShellHash=function(h){var a=r,s,S,A,C,p,m,e;if(!h){return undefined;}s=c.splitHash(h);m=a.exec(s.shellPart);if(m){S=m[2];A=m[3];C=m[5];p=m[6];e=c.parseParameters(p);return{semanticObject:S,action:A,contextRaw:C,params:e,appSpecificRoute:s.appSpecificRoute};}if(s.appSpecificRoute){return{semanticObject:undefined,action:undefined,contextRaw:undefined,params:{},appSpecificRoute:s.appSpecificRoute};}return undefined;};
c.privstripLeadingHash=function(h){if(h[0]==="#"){return h.substring(1);}return h;};
c.splitHash=function(h){var a=/^(?:#|)([\S\s]*?)(&\/[\S\s]*)?$/,m,s,A;if(h===undefined||h===null||h===""){return{};}m=a.exec(h);s=m[1];if(s!==""&&!r.test(s)){return{};}A=m[2];if(s||A){return{shellPart:s,appSpecificRoute:A};}return{};};
function d(u,a){if(a){return u+a;}return u;}
c.constructShellHash=function(s){var e,p,f,i=null,k,l=[],g="?",a=null;if(!s){return"";}if(!s.target){s.target={};s.target.semanticObject=s.semanticObject;s.target.action=s.action;s.target.contextRaw=s.contextRaw;}if(s.target.shellHash||s.target.shellHash===""){f=c.privstripLeadingHash(s.target.shellHash);return d(f,s.appSpecificRoute);}if(s.target.semanticObject&&s.target.action){e=s.target.semanticObject+"-"+s.target.action.replace(/[?].*/,"");}else{return d("",s.appSpecificRoute);}if(s.target.contextRaw){e+="~"+s.target.contextRaw;}g="?";a=null;l=[];for(a in s.params){if(s.params.hasOwnProperty(a)){l.push(a);}}p=(s.params&&JSON.parse(JSON.stringify(s.params)))||{};if(s.appStateKey){l.push("sap-xapp-state");p["sap-xapp-state"]=s.appStateKey;}l.sort();for(k=0;k<l.length;k=k+1){a=l[k];if(Array.isArray(p[a])){if(p[a].length>1){L.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<p[a].length;i=i+1){e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a][i]);g="&";}}else{e+=g+encodeURIComponent(a)+"="+encodeURIComponent(p[a]);g="&";}}return d(e,s.appSpecificRoute);};
return c;});
sap.ui.predefine('sap/ushell/utils/UrlShortening',["sap/base/Log","sap/ushell/utils/UrlParsing"],function(L,u){"use strict";
function U(){var t=this;this.ABBREV_PARAM_NAME="sap-intent-param";this.URL_LENGTH_LIMIT=1023;this.URL_PARAMS_LENGTH_LIMIT=512;this._replaceSapXAppStateRawWithKeyIfRequired=function(v,s){var V,k;if(typeof v!=="string"||/^[A-Z0-9]{40,41}$/.test(v)){return v;}try{V=JSON.parse(v);}catch(e){L.error("This cannot happen: sap-xapp-state parameter value is neither key nor JSON parseable");return v;}k=s&&s.getNextKey();this._storeValue(k,V,s);return k;};this.compactHash=function(s,r,S){var o,k,R,p,a,c=[this.ABBREV_PARAM_NAME,"sap-system","sap-xapp-state"];if(r){r.forEach(function(A){c.push(A);});}o=u.parseShellHash(s);if(!o){L.error("the URL "+s+" is not compliant. It may break the product and cause unwanted navigation behavior.");return{hash:s};}p="";if(s.charAt(0)==="#"){p="#";}var v=o&&o.params&&o.params["sap-xapp-state"]&&o.params["sap-xapp-state"][0];if(v){o.params["sap-xapp-state"]=[this._replaceSapXAppStateRawWithKeyIfRequired(v,S)];s=p+u.constructShellHash({target:{semanticObject:o.semanticObject,action:o.action,contextRaw:o.contextRaw},params:o.params,appSpecificRoute:o.appSpecificRoute});}if(typeof s!=="string"||s.length<t.URL_LENGTH_LIMIT){return{hash:s};}if(o&&((o.params&&o.params[t.ABBREV_PARAM_NAME]))){return{hash:s};}k=S&&S.getNextKey();R=this._splitParameters(o.params,c,k);if(!R.key){return{hash:s};}a=u.paramsToString(R.tailParams);this._storeValue(R.key,a,S);return{hash:p+u.constructShellHash({target:{semanticObject:o.semanticObject,action:o.action,contextRaw:o.contextRaw},params:R.headParams,appSpecificRoute:o.appSpecificRoute}),params:R.headParams,skippedParams:R.tailParams};};this.checkHashLength=function(s){var S,r,p;if(typeof s!=="string"||s.length<t.URL_LENGTH_LIMIT){return{hash:s};}S=u.parseShellHash(s);p="";if(s.charAt(0)==="#"){p="#";}r=this._splitParameters(S.params,[],"DummyKey");if(r.key){L.error("Application startup parameter length exceeds "+t.URL_PARAMS_LENGTH_LIMIT+" characters, truncation occured!");delete r.headParams[this.ABBREV_PARAM_NAME];return{hash:p+u.constructShellHash({target:{semanticObject:S.semanticObject,action:S.action,contextRaw:S.contextRaw},params:r.headParams,appSpecificRoute:S.appSpecificRoute}),params:r.headParams,skippedParams:r.tailParams};}L.error("URL exceeds dangerous limits, arbitrary shortening or worse may occur!");return{hash:s};};this._findIndex=function(a,T){var r=a.indexOf(T);if(r>=0){return r;}r=-1;a.every(function(A,i){if(A.length>0&&A[A.length-1]==="*"&&A.substring(0,A.length-1)===T.substring(0,A.length-1)){r=i;return false;}return true;});return r;};this._cmpByList=function(a,A,B){var i,c;a=a||[];if(A===B){return 0;}i=this._findIndex(a,A);c=this._findIndex(a,B);if(i>=0&&c>=0){if((i-c)!==0){return i-c;}if(A<B){return-1;}if(A>B){return+1;}return 0;}if(i>=0){return-1;}if(c>=0){return+1;}if(A<B){return-1;}return+1;};this._sortByPriority=function(l,r){return l.sort(this._cmpByList.bind(this,r));};this._splitParameters=function(p,r,K){var a,i,k,h={},c={},d=false,o,e,f=0,g,l=[];if(!K||typeof K!=="string"){throw new Error("sap.ushell.services.URLShortening._splitParameters: key must be supplied!");}for(a in p){if(Object.prototype.hasOwnProperty.call(p,a)){l.push(a);}}l.sort();l=this._sortByPriority(l,r);for(k=0;k<l.length;k=k+1){a=l[k];o=p[a];if(o.length>1){L.error("Array startup parameters violate the designed intent of the Unified Shell Intent, use only single-valued parameters!");}for(i=0;i<o.length;i=i+1){e=p[a][i];g=a.length+e.length;if(g+f>this.URL_PARAMS_LENGTH_LIMIT){if(c[a]){c[a].push(e);}else{c[a]=[e];}d=true;}else if(h[a]){h[a].push(e);}else{h[a]=[e];}f=f+g+1;}}if(d){h[this.ABBREV_PARAM_NAME]=[K];}return{key:K,tailParams:c,headParams:h};};this.expandHash=function(o){var r=function(k){return t._retrieveValue(k);};return this.expandParamGivenRetrievalFunction(o,this.ABBREV_PARAM_NAME,r);};this.expandParamGivenRetrievalFunction=function(s,p,r){var a,v,k,c,d;if(typeof s!=="string"){return s;}a=u.parseShellHash(s);k=a&&a.params&&a.params[p]&&a.params[p][0];if(!k){return s;}c="";if(s.charAt(0)==="#"){c="#";}v=r(k);if(!v){return s;}d=this._blendParameters(a.params,p,v);return c+u.constructShellHash({target:{semanticObject:a.semanticObject,action:a.action,contextRaw:a.contextRaw},params:d,appSpecificRoute:a.appSpecificRoute});};this._retrieveValue=function(){return undefined;};this._storeValue=function(k,v,s){if(s&&typeof s.store==="function"){s.store(v);}};this._blendParameters=function(p,P,v){var n=u.parseParameters("?"+v),a;delete p[P];for(a in n){if(Object.prototype.hasOwnProperty.call(n,a)){if(p[a]){p[a]=p[a].concat(n[a]);}else{p[a]=n[a];}}}return p;};}
var b=new U();return b;},true);
sap.ui.predefine('sap/ushell/utils/WindowUtils',["sap/base/Log","sap/ui/Device","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/base/util/UriParameters"],function(L,D,i,u,U){"use strict";var W={};
W.hasInvalidProtocol=function(a){var o=document.createElement("a");o.setAttribute("href",a);if(o.protocol==="javascript:"){return true;}return false;};
W.isCrossOriginUrl=function(a){return i(a);};
W.openURL=function(a,w,b,s){var S=(s===undefined)?true:s,I=this.isCrossOriginUrl(a);b=b||"";if(S&&this.hasInvalidProtocol(a)){L.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol");}if(D.browser.msie){if(b!==undefined&&b!==null){L.warning("WindowUtils.js - 'windowFeatures' is ignored for new windows in Internet Explorer.");}var n=window.open("about:blank",w||"_blank");if(I){n.opener=null;}n.location.href=a;return I?true:n;}if(I){if(b.toLowerCase().indexOf("noopener")===-1){if(b!==""){b+=",";}b+="noopener";}if(b.toLowerCase().indexOf("noreferrer")===-1){b+=",noreferrer";}window.open(a,w,b);return true;}return window.open(a,w,b);};
W.getLeanURL=function(t,n){var s=t||n;if(this.hasInvalidProtocol(s)){L.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return"";}if((s||"").charAt(0)!=="#"){return s;}var q=window.location.search;if(!q){q="?appState=lean";}else if(q.indexOf("appState=")>=-1){q+="&appState=lean";}return window.location.origin+window.location.pathname+q+s;};
W._getAdjustedQueryString=function(a){if(a&&a.length>0){var o=U.fromQuery(window.location.search);var n=Array.from(o.keys()).reduce(function(r,p){r[p]=o.getAll(p);return r;},{});a.forEach(function(p){var P=Object.keys(p)[0];if(P){n[P]=p[P];}});return u.urlParametersToString(n);}return null;};
W.refreshBrowser=function(a){var n=u.getLocationHref(),N=W._getAdjustedQueryString(a);if(N){n=n.replace(location.search,"?"+N);}if(u.getLocationHref()===n){window.location.reload(true);}else{window.location=n;}};
return W;});
sap.ui.predefine('sap/ushell/utils/chipsUtils',["sap/base/Log","sap/base/util/ObjectPath"],function(L,O){"use strict";var D="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",S="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER";var c={};
c.getCatalogTilePreviewTitle=function(C){var a=c.getBagText(C,"tileProperties","display_title_text");return a||(!C.isStub()&&C.getContract("preview")&&C.getContract("preview").getPreviewTitle())||undefined;};
c.getCatalogTilePreviewSubtitle=function(C){var a=c.getBagText(C,"tileProperties","display_subtitle_text");return a||(!C.isStub()&&C.getContract("preview")&&C.getContract("preview").getPreviewSubtitle())||undefined;};
c.getCatalogTilePreviewIcon=function(C){var a=c._getConfigurationProperty(C,"tileConfiguration","display_icon_url");return a||(!C.isStub()&&C.getContract("preview")&&C.getContract("preview").getPreviewIcon())||undefined;};
c.getCatalogTileTargetURL=function(C){var a=c._getConfigurationProperty(C,"tileConfiguration","navigation_target_url");return a||(!C.isStub()&&C.getContract("preview")&&C.getContract("preview").getTargetUrl())||undefined;};
c.getCatalogTileNumberUnit=function(C){return c._getConfigurationProperty(C,"tileConfiguration","display_number_unit");};
c.getCatalogTilePreviewInfo=function(C){return c.getBagText(C.getChip(),"tileProperties","display_info_text");};
c.getCatalogTileSize=function(C){return c.getTileSize(C);};
c.getCatalogTilePreviewIndicatorDataSource=function(C){var i;var t=c._getAppLauncherTileConfiguration(C);if(c._isAppLauncher(C)&&t&&t.service_url){i={path:t.service_url,refresh:t.service_refresh_interval};}return i;};
c._getConfigurationProperty=function(C,s,p){var t,T;try{t=C.getConfigurationParameter(s);T=JSON.parse(t);}catch(e){return;}if(T[p]!==undefined){return T[p];}};
c.getBagText=function(C,b,t){if(C.getBagIds().indexOf(b)>-1&&C.getBag(b).getTextNames().indexOf(t)>-1){return C.getBag(b).getText(t);}};
c.getTileSize=function(t){var r=(!t.isStub()&&t.getConfigurationParameter("row"))||"1",a=(!t.isStub()&&t.getConfigurationParameter("col"))||"1";return r+"x"+a;};
c._getAppLauncherTileConfiguration=function(C){var p,s=C.getConfigurationParameter("tileConfiguration");try{p=JSON.parse(s||"{}");}catch(e){L.error("Tile with ID '"+C.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+s+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",e.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{};}return p;};
c._isAppLauncher=function(C){var b=C.getChip().getBaseChipId();return b===D||b===S;};
c.getTileConfigurationFromSimplifiedChip=function(s){var t;try{t=JSON.parse(s.configuration.tileConfiguration);}catch(e){t={};}return t;};
c.getTargetUrlFromSimplifiedChip=function(s,U){var C=this.getCustomTileTargetFromSimplified(s);if(C){return"#"+U.constructShellHash(C);}var t=this.getTileConfigurationFromSimplifiedChip(s);return t.navigation_target_url;};
c.getIndicatorDataSourceFromSimplifiedChip=function(s){var t=this.getTileConfigurationFromSimplifiedChip(s);var a=t.service_url;if(!a){return undefined;}return{path:a,refresh:t.service_refresh_interval};};
c.getTileSizeFromSimplifiedChip=function(s){var C=s.configuration;var r=C.row||1;var a=C.col||1;return r+"x"+a;};
c.getNumberUnitFromSimplifiedChip=function(s){var t=this.getTileConfigurationFromSimplifiedChip(s);return t.display_number_unit;};
c.getInfoFromSimplifiedChip=function(s){var t=s.bags.tileProperties;return t&&t.texts.display_info_text;};
c.getKeywordsFromSimplifiedChip=function(s){var k=[];var t=s.bags.tileProperties;var K=t&&t.texts.display_search_keywords;if(K){k.push(K);}return k;};
c.isCustomTileFromSimplifiedChip=function(s){var C=s.chipId;return C!==D&&C!==S;};
c.loadChipInstanceFromSimplifiedChip=function(s){var b=s.bags;var r={chipId:s.chipId,configuration:s.configuration?JSON.stringify(s.configuration):"{}"};return sap.ushell.Container.getServiceAsync("PageBuilding").then(function(p){var f=p.getFactory();var C=f.createChipInstance(r);this.addBagDataToChipInstance(C,b);return new Promise(function(a,d){C.load(a,d);}).then(function(){return C;});}.bind(this));};
c.addBagDataToChipInstance=function(C,b){if(!b){return;}var p;for(var B in b){var o=b[B];var a=C.getBag(B);try{for(p in o.properties){a.setProperty(p,o.properties[p]);}for(p in o.texts){a.setText(p,o.texts[p]);}}catch(e){L.error("chipsUtils.addBagDataToChipInstance: "+e.toString());}}};
c.getCustomTileTargetFromSimplified=function(s){if(s.chipId==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{target:{semanticObject:"NewsFeed",action:"displayNewsList"}};}var t=JSON.parse(s.configuration.tileConfiguration||"{}");var T=JSON.parse(t.TILE_PROPERTIES||"{}");if(T.semanticObject&&T.semanticAction){return{target:{semanticObject:T.semanticObject,action:T.semanticAction},params:{EvaluationId:[T.evaluationId]}};}return null;};
return c;},true);
sap.ui.predefine('sap/ushell/utils/clone',["sap/ushell/utils/type"],function(t){"use strict";
function c(d){function a(o){return t.isPlainObject(o)?{}:[];}function b(v){if(v instanceof Promise){return false;}return t.isPlainObject(v)||t.isArray(v);}function g(v){if(t.isPlainObject(v)){return Object.keys(v).map(function(k){return{key:k,value:v[k]};});}var j=v.length;var I=[];for(var i=0;i<j;i++){I.push({value:v[i]});}return I;}function e(i,v){var A=t.isPlainObject(v)?function(i,v){v[i.key]=i.value;}:function(i,v){v.push(i.value);};A(i,v);}function s(i,j,q){j.push(i.length);Array.prototype.push.apply(q,i);}if(!b(d)){return d;}var C=a(d);var f=[C];var r=[];var R=[];var V=new WeakMap();V.set(d,C);s(g(d),R,r);while(f.length>0){var T=f.shift();var h=R.shift();r.splice(0,h).forEach(function(i){var p=i.value;if(!b(p)){e(i,T);return;}var o=p;var A=V.get(o);if(A){e({key:i.key,value:A},T);return;}var v=a(o);V.set(o,v);e({key:i.key,value:v},T);f.push(v);s(g(o),R,r);});}return C;}
return c;},false);
sap.ui.predefine('sap/ushell/utils/objectOperations',[],function(){"use strict";var o={};
o.getMember=function(O,a){var p=a.split("."),n=O;if(!O){return undefined;}p.forEach(function(s){if(typeof n!=="object"){return undefined;}n=n[s.replace(/[|]/g,".")];});return n;};
o.updateProperties=function(t,s){Object.keys(t).forEach(function(p){if(s.hasOwnProperty(p)){t[p]=s[p];}});};
o.getNestedObjectProperty=function(O,a,d){var M="Missing or invalid parameter";if(!O||!Array.isArray(O)||O.length==0||!a){throw new Error(M);}if(Array.isArray(a)&&a.length!=O.length){throw new Error(M);}var A=a;if(!Array.isArray(a)){A=Array.apply(null,Array(O.length)).map(function(){return a;});}var n=O.reduce(function(m,b,i){if(m!==undefined){return m;}return this.getMember(b,A[i]);}.bind(this),undefined);return(n!=undefined)?n:d;};
return o;},false);
sap.ui.predefine('sap/ushell/utils/type',[],function(){"use strict";
function i(v){return Object.prototype.toString.apply(v)==="[object Array]";}
function a(v){return Object.prototype.toString.apply(v)==="[object Object]";}
function b(v){return typeof v!=="undefined";}
return{isArray:i,isPlainObject:a,isDefined:b};},false);
sap.ui.predefine('sap/ushell/utils/utilsCdm',["sap/base/Log","sap/base/util/deepExtend","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/utils/objectOperations","sap/ushell/utils/UrlParsing"],function(L,d,O,q,u,U){"use strict";
function g(o,A){return u.getMember(o,A);}
function m(k,s,A){s=d({},s);A=d({},A);var i={};i.semanticObject=s.semanticObject;i.action=s.action;i.title=s.title||g(A,"sap|app.title");i.info=s.info||g(A,"sap|app.info");i.icon=s.icon||g(A,"sap|ui.icons.icon");i.subTitle=s.subTitle||g(A,"sap|app.subTitle");i.shortTitle=s.shortTitle||g(A,"sap|app.shortTitle");var T,c,e,o,D,h,I=false;var S=g(A,"sap|platform|runtime");i.resolutionResult=q.extend(true,{},S);if(S){i.resolutionResult["sap.platform.runtime"]=q.extend(true,{},S);}if(g(A,"sap|ui.technology")==="GUI"){i.resolutionResult["sap.gui"]=g(A,"sap|gui");}if(g(A,"sap|ui.technology")==="WDA"){i.resolutionResult["sap.wda"]=g(A,"sap|wda");}if(g(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){i.resolutionResult["sap.platform.runtime"]=i.resolutionResult["sap.platform.runtime"]||{};i.resolutionResult.url=A["sap.url"].uri;i.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(S&&S.uri){i.resolutionResult["sap.platform.runtime"].url=S.uri;i.resolutionResult.url=S.uri;}}if(!i.resolutionResult["sap.ui"]){i.resolutionResult["sap.ui"]={};}i.resolutionResult["sap.ui"].technology=g(A,"sap|ui.technology");i.resolutionResult.applicationType=this._formatApplicationType(i.resolutionResult,A);i.resolutionResult.systemAlias=i.resolutionResult.systemAlias||s.systemAlias;i.resolutionResult.systemAliasSemantics="apply";i.resolutionResult.text=i.title;i.deviceTypes=g(A,"sap|ui.deviceTypes")||{};i.resolutionResult.appId=g(A,"sap|app.id");["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(s.deviceTypes||{},M)){i.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(i.deviceTypes,M)){i.deviceTypes[M]=true;}i.deviceTypes[M]=!!i.deviceTypes[M];});i.signature=s.signature||{};i.signature.parameters=i.signature.parameters||{};i.signature.additionalParameters=(s.signature||{}).additionalParameters||"allowed";var j=s.indicatorDataSource||g(A,"sap|app.crossNavigation.inbounds."+k+".indicatorDataSource");var l=j?"#Shell-dynamicTile":"#Shell-staticTile";if(g(A,"sap|app.type")==="tile"||g(A,"sap|flp.type")==="tile"){l=i.resolutionResult;l.url=g(A,"sap|platform|runtime.componentProperties.url");l.componentName=g(A,"sap|ui5.componentName");if(g(A,"sap|platform|runtime.includeManifest")){l.componentProperties=l.componentProperties||{};l.componentProperties.manifest=q.extend(true,{},A);delete l.componentProperties.manifest["sap.platform.runtime"];}o=g(A,"sap|app.crossNavigation.outbounds.target");I=true;}if(g(A,"sap|app.type")==="plugin"||g(A,"sap|flp.type")==="plugin"){return undefined;}if(g(A,"sap|flp.tileSize")){T=g(A,"sap|flp.tileSize");}if(g(A,"sap|app.description")){c=g(A,"sap|app.description");}if(g(A,"sap|ui.technology")==="GUI"&&g(A,"sap|gui.transaction")){e=g(A,"sap|gui.transaction");}if(g(A,"sap|ui.technology")==="WDA"&&g(A,"sap|wda.applicationId")){e=g(A,"sap|wda.applicationId");}if(g(A,"sap|app.dataSources")){D=g(A,"sap|app.dataSources");}if(g(A,"sap|app.id")){h=g(A,"sap|app.id");}i.tileResolutionResult={appId:h,title:i.title,subTitle:i.subTitle,icon:i.icon,size:T,info:i.info,tileComponentLoadInfo:l,indicatorDataSource:j,dataSources:D,description:c,runtimeInformation:S,technicalInformation:e,deviceTypes:i.deviceTypes};i.tileResolutionResult.isCustomTile=I;if(o){i.tileResolutionResult.targetOutbound=o;}return i;}
function f(r,A){var s=r.applicationType;if(s){return s;}var c=g(A,"sap|platform|runtime.componentProperties.self.name")||g(A,"sap|ui5.componentName");if(g(A,"sap|flp.appType")==="UI5"||g(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+c;r.url=g(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=g(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(g(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=g(A,"sap|gui");r.systemAlias=g(A,"sap|app.destination.name");return"TR";}if(g(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=g(A,"sap|wda");r.systemAlias=g(A,"sap|app.destination.name");return"WDA";}if(g(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=g(A,"sap|app.destination.name");}return"URL";}
function a(s){var c=this;if(!s){return[];}var i=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var h=g(o,"sap|app.crossNavigation.inbounds");if(h){var l=Object.keys(h).sort();l.forEach(function(I){var j=h[I];var r=c.mapOne(I,j,o);if(r){i.push(r);}});}}catch(E){L.error("Error in application "+A+": "+E,E.stack);}});}catch(e){L.error(e);L.error(e.stack);return[];}return i;}
function t(i){var s,p,c;s={target:{semanticObject:i.semanticObject,action:i.action},params:{}};p=O.get("signature.parameters",i)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});c=U.constructShellHash(s);if(!c){return undefined;}return c;}
function b(o){var s,p,c;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});c=U.constructShellHash(s);if(!c){return undefined;}return c;}
return{formatSite:a,toHashFromInbound:t,toHashFromOutbound:b,mapOne:m,_formatApplicationType:f};},true);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.xhrlogon',[],function(){"use strict";var m={};var b={};
/*!
 * SAP XHR Library v2.1.0
 * (c) Copyright 2013-2019 SAP SE or an SAP affiliate company.
*/
(function(f){if(typeof b==="object"&&typeof m!=="undefined"){m.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.xhrlib=f()}})(function(){var d,m,b;return(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(r,m,b){"use strict";var C;function a(x,c,u,e,f,p){this.filters=[];this.xhr=x;this.method=c;this.url=u;this.async=!!e;if(f!==undefined){this.username=f;}if(p!==undefined){this.password=p;}}m.exports=a;C=a.prototype;C._process=function(c){var f,e,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){e=f[i];if(typeof e[c]==="function"){e[c](this);}}};C.aborting=function(){this._process("aborting");};C.aborted=function(){this._process("aborted");};C.opening=function(){this._process("opening");};C.opened=function(){this._process("opened");};C.sending=function(){this._process("sending");};C.sent=function(){this._process("sent");};C.reopening=function(){this._process("reopening");};C["catch"]=function(e){var f,i,n;f=this.filters;n=f.length;for(i=0;i<n;++i){if(typeof f[i]["catch"]==="function"){try{f[i]["catch"](e,this);e=null;break;}catch(c){e=c;}}}if(e){throw e;}};},{}],2:[function(r,m,b){"use strict";var C;var a=r("./Channel.js");var I=r("./IgnoreList.js");function c(){this._filterFactories=[];this.ignore=new I();}m.exports=c;C=c.prototype;function e(x){var t;t=typeof x;return(t==="function")||((t==="object")&&(x!==null)&&(typeof x.addFilter==="function"));}function f(x,g){if(typeof x==="function"){x(g);}else{x.addFilter(g);}}C.reset=function(){this._filterFactories=[];this.ignore=new I();};C.addFilterFactory=function(g){var h,j,i,n;if(!e(g)){throw new TypeError("addFilterFactory expects a FilterFactory or a function parameter");}j=this._filterFactories;h=true;n=j.length;for(i=0;i<n;++i){if(j[i]===g){h=false;break;}}if(h){this._filterFactories.push(g);}};C.removeFilterFactory=function(g){var h,i,n;h=this._filterFactories;n=h.length;for(i=0;i<n;++i){if(h[i]===g){h.splice(i,1);break;}}};C.getFilterFactories=function(){return this._filterFactories.slice();};C.create=function(x,g,u,h,j,p){var k,l,i,n;k=new a(x,g,u,h,j,p);if(!this.ignore.ignored(u)){l=this._filterFactories;n=l.length;for(i=0;i<n;++i){f(l[i],k);}}return k;};},{"./Channel.js":1,"./IgnoreList.js":7}],3:[function(r,m,b){"use strict";var u=r("./util.js");var C,o;var L={error:10,warn:20,info:30,debug:40};if(window.console&&typeof window.console.log==="function"){o={error:console.error?console.error:console.log,warn:console.warn?console.warn:console.log,info:console.log,debug:console.log};}else{o={};o.error=o.warn=o.info=o.debug=function(){};}function a(n,l){this.name=n;this.setLevel(l);}m.exports=a;C=a.prototype;C.format=function(c,s){return u.time()+" "+this.name+" ["+s.toUpperCase()+"] "+c;};C.setLevel=function(l){if(l){l=(typeof l==="number"?~~l:L[l]);}this.level=l||L.warn;};C.error=function(c){if(this.level>=L.error){o.error(this.format(c,"error"));}};C.warning=function(c){if(this.level>=L.warn){o.warn(this.format(c,"warn"));}};C.info=function(c){if(this.level>=L.info){o.info(this.format(c,"info"));}};C.debug=function(c){if(this.level>=L.debug){o.debug(this.format(c,"debug"));}};},{"./util.js":20}],4:[function(r,m,b){"use strict";var e=r("./events.js");var E=r("./EventHandlers.js");var D;var A="authenticationrequired";function a(){this.prefix="xhrlibFrame"+Date.now().toString(36);this.handlers=new E([A]);}m.exports=a;D=a.prototype;a.frameCounter=0;D.addEventListener=function(t,c){this.handlers.add(t,c);};D.removeEventListener=function(t,c){this.handlers.remove(t,c);};D.dispatchAuthenticationRequired=function(){var s=this,c=e.createEvent(A);setTimeout(function(){s.handlers.dispatch(c);},0);};D.create=function(){var f,o,s=this;this.destroy();if(this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();return null;}a.frameCounter+=1;f=this.prefix+a.frameCounter;this.frame=document.createElement("iframe");this.frame.id=f;this.frame.style.display="none";if(document.readyState==="complete"){document.body.appendChild(this.frame);}else{o=function(){if(document.readyState==="complete"){document.body.appendChild(s.frame);e.removeEventListener(document,"readystatechange",o);}};e.addEventListener(document,"readystatechange",o);}return this.frame;};D.destroy=function(){if(this.frame){document.body.removeChild(this.frame);this.frame=null;}};D.show=function(f){var c=this.frame;if(!f&&this.handlers.hasSubscribers(A)){this.dispatchAuthenticationRequired();}else if(c){c.style.display="block";c.style.position="absolute";c.style.top=0;c.style.left=0;c.style.width="100%";c.style.height="100%";c.style.zIndex=99999;c.style.border=0;c.style.background="white";setTimeout(function(){try{c.contentWindow.focus();}catch(g){void g;}},100);}};},{"./EventHandlers.js":5,"./events.js":16}],5:[function(r,m,b){"use strict";var E;var a=r("./Log.js").logger;function c(e){var i,n;n=e.length;for(i=0;i<n;++i){this["_"+e[i]]=[];}this.subscriptions={};this.bufferedEvents=[];}m.exports=c;function f(x){return x&&(typeof x==="function"||typeof x.handleEvent==="function");}function g(x,e,l){try{if(typeof x==="function"){return x.call(e.currentTarget,e);}else{return x.handleEvent(e);}}catch(h){if(l){l.warning("Exception in "+e.type+" event handler: "+h.message+"\n"+h.stack);}throw h;}}c.isHandler=f;c.fireEvent=g;E=c.prototype;E.add=function(t,e){var j,h,i,n;if(!f(e)){throw new TypeError("Invalid event handler");}h=this["_"+t];if(h){j=true;n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=false;break;}}if(j){h.push(e);}}return j;};E.remove=function(t,e){var h,i,n,j=false;if(f(e)){h=this["_"+t];if(h){n=h.length;for(i=0;i<n;++i){if(h[i]===e){j=true;if(n===1){this["_"+t]=[];}else{h.splice(i,1);}break;}}}}return j;};E.dispatch=function(e){var i,n,t=e.type,h=this["_"+t];if(!h||!h.length){return;}if(this.suspend){this.bufferedEvents.push(e);}else{h=h.slice();n=h.length;for(i=0;i<n;++i){g(h[i],e,a);}}};E.clearEvents=function(){this.bufferedEvents=[];};E.releaseEvents=function(){var k,n,e;e=this.bufferedEvents;n=e.length;if(n>0){this.clearEvents();for(k=0;k<n;++k){this.dispatch(e[k]);}}};E.hasSubscribers=function(t){var h=this["_"+t];return(h&&h.length>0);};E.subscribed=function(t){return(this.subscriptions[t]?true:false);};E.subscribe=function(t){this.subscriptions[t]=true;};E.unsubscribe=function(t){delete this.subscriptions[t];};},{"./Log.js":8}],6:[function(r,m,b){"use strict";var D=r("./DefaultLogonFrameProvider.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var f,F;function c(){x.debug("Creating FrameLogonManager");this._lfp=new D();this._timeout=new a(c.defaultTimeout);}m.exports=c;F=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!f&&!n){f=new c();}return f;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(f){f.shutdown();f=null;}};Object.defineProperties(F,{logonFrameProvider:{get:function(){return this._lfp;},set:function(l){if(l){this._lfp=l;}else{this._lfp=new D();}}}});F.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);};F.getTimeout=function(u){return this._timeout.getTimeout(u);};F.setTimeout=function(u,v){this._timeout.setTimeout(u,v);};F.getFrameLoadHandler=function(p,e,t){var l,g;t=t||this.defaultTimeout;l=function(){if(g){clearTimeout(g);}g=setTimeout(function(){p.show();},t);};return l;};F.onLogon=function(e){var u,p,g,t;this.onLogonEnd();x.debug("Processing iframe logon for realm "+e.realm);t=this.getTimeout(e.channel.url);u=new U(e.channel.url);u.setParameter("xhr-logon","iframe");p=this.logonFrameProvider;g=p.create();if(g){if(!g.onload){g.onload=this.getFrameLoadHandler(p,g.id,t);}g.xhrTimeout=t;g.src=u.href;}this.pending={provider:p,realm:e.realm};};F.onLogonEnd=function(e){if(this.pending&&(!arguments.length||e===this.pending.realm)){this.pending.provider.destroy();this.pending=undefined;}};F.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};F.handleEvent=function(e){var g;switch(e.type){case L.LogonEvent.LOGON:g=e.request;if(g){this.onLogon(g);return true;}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(e.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(e.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15}],7:[function(r,m,b){"use strict";var I;function a(){this.clear();}m.exports=a;I=a.prototype;I.add=function(c){switch(typeof c){case"string":this.p.push(c);break;case"object":if(c instanceof RegExp){this.r.push(c);}else{throw new TypeError("Unsupported ignore rule type");}break;case"function":this.f.push(c);break;default:throw new TypeError("Unsupported ignore rule type");}this.empty=false;};I.ignored=function(i){var c=false;if(!this.empty){c=this._prefix(i)||this._regexp(i)||this._function(i);}return c;};I.clear=function(){this.empty=true;this.p=[];this.r=[];this.f=[];};I._prefix=function(i){var f,k,n,c;if(!i){return false;}c=false;f=this.p;n=f.length;for(k=0;k<n;++k){if(i.startsWith(f[k])){c=true;break;}}return c;};I._regexp=function(i){var f,k,n,c;c=false;f=this.r;n=f.length;for(k=0;k<n;++k){if(f[k].test(i)){c=true;break;}}return c;};I._function=function(i){var f,k,n,c;c=false;f=this.f;n=f.length;for(k=0;k<n;++k){try{if(f[k](i)){c=true;break;}}catch(e){}}return c;};},{}],8:[function(r,m,b){"use strict";var C=r("./ConsoleLogger.js");var a,c,l=["error","warning","info","debug"];c=new C("sap.xhrlib");function L(e){this.logger=e;}m.exports=L;function h(x,e){var i,n=e.length;for(i=0;i<n;++i){if(typeof x[e[i]]!=="function"){return false;}}return true;}function f(x){return(x&&(typeof x==="object")&&h(x,l));}Object.defineProperty(L,"logger",{get:function(){return a;},set:function(x){if(!x){a.logger=c;}else if(f(x)){a.logger=x;}}});l.forEach(function(g){L.prototype[g]=function(i){try{return this.logger[g](i);}catch(e){}};});L.setLevel=function(e){if(typeof a.logger.setLevel==="function"){a.logger.setLevel(e);}};a=new L(c);},{"./ConsoleLogger.js":3}],9:[function(r,m,b){"use strict";r("./xhr.js");var c=r("./events.js").createEvent;var E=r("./EventHandlers.js");var x=r("./Log.js").logger;var L,S,l,a;S={UNAUTHENTICATED:0,PENDING:1,AUTHENTICATED:2};L={LOGON:"logon",LOGON_COMPLETE:"logoncomplete",LOGON_FAILED:"logonfailed",LOGON_ABORTED:"logonaborted"};function e(){x.info("Creating Logon Manager");this.queue=[];this.realms={};this.authHandlers={};this._schemes=[];this.handlers=new E([L.LOGON,L.LOGON_ABORTED,L.LOGON_COMPLETE,L.LOGON_FAILED]);}m.exports=e;e.getInstance=function(n){if(!l&&!n){l=new e();}return l;};e.shutdown=function(){if(l){l.shutdown();l=undefined;}};e.LogonEvent=L;e.Status=S;a=e.prototype;Object.defineProperties(a,{schemes:{get:function(){return this._schemes.slice();}}});a._collectSchemes=function(){var s,f=[],g=this.authHandlers;for(s in g){if(g.hasOwnProperty(s)){f.push(s);}}this._schemes=f.sort();};a.addEventListener=function(t,h){this.handlers.add(t,h);};a.removeEventListener=function(t,h){this.handlers.remove(t,h);};a.registerAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=true;if(!E.isHandler(h)){throw new TypeError("Invalid authentication handler");}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=false;break;}}if(g){f.push(h);}}else{f=[h];this.authHandlers[s]=f;this._collectSchemes();}return g;};a.unregisterAuthHandler=function(s,h){var i,n,f=this.authHandlers[s],g=false;if(!E.isHandler(h)){return false;}if(f){for(i=0,n=f.length;i<n;++i){if(f[i]===h){g=true;if(n===1){delete this.authHandlers[s];this._collectSchemes();}else{f.splice(i,1);}break;}}}return g;};a.unregisterAllHandlers=function(s){if(s){delete this.authHandlers[s];}else{this.authHandlers={};}this._collectSchemes();};a.getAuthHandlers=function(s){var h=this.authHandlers[s];var f=this.authHandlers["*"];if(h){return f?h.concat(f):h.slice();}return f||[];};a.isSchemeHandled=function(s){return this.getAuthHandlers(s).length>0;};a.dispatchEvent=function(f){this.handlers.dispatch(f);};a.createLogonEvent=function(f){var g=c(L.LOGON);g.request=f;return g;};a.dispatchLogonEvent=function(f){var g=this.createLogonEvent(f);this.dispatchEvent(g);};a.dispatchLogonCompletedEvent=function(f){var g=c(L.LOGON_COMPLETE);g.response=f;this.dispatchEvent(g);};a.dispatchLogonFailedEvent=function(f){var g=c(L.LOGON_FAILED);g.response=f;this.dispatchEvent(g);};a.dispatchLogonAbortedEvent=function(f){var g=c(L.LOGON_ABORTED);g.realm=f;this.dispatchEvent(g);};a.dispatchLogonRequest=function(f){var i,n,h=false,g=this.createLogonEvent(f),j=this.getAuthHandlers(f.scheme);if(j){for(i=0,n=j.length;i<n;++i){h=E.fireEvent(j[i],g,x);if(h){break;}}}return h;};a.getAuthenticationStatus=function(n){return this.realms[n]||S.UNAUTHENTICATED;};a.isQueued=function(f){var i,n,g;if(this.pending&&this.pending.channel&&this.pending.channel.xhr===f){return true;}for(i=0,n=this.queue.length;i<n;++i){g=this.queue[i];if(g.channel&&g.channel.xhr===f){return true;}}return false;};a.requestLogon=function(f){var h,g;if(!f||!f.channel||!f.scheme){x.warning("Ignoring invalid Logon request");return;}if(this.isQueued(f.channel.xhr)){x.debug("Ignoring authentication request for already queued request "+f.channel.url);return;}x.info("Authentication requested for "+f.channel.url+" with scheme "+f.scheme);this.dispatchLogonEvent(f);if(this.isSchemeHandled(f.scheme)){g=f.realm;if(typeof g!=="string"){g=""+g;}if(this.pending){x.debug("Pending authentication process, queueing request");if(this.getAuthenticationStatus(g)===S.AUTHENTICATED){this.realms[g]=S.UNAUTHENTICATED;}this.queue.push(f);h=true;}else{x.debug("Dispatching authentication request");this.realms[g]=S.PENDING;this.pending=f;h=this.dispatchLogonRequest(f);}}else{x.info("No authentication handler registered for scheme "+f.scheme);}if(!h){x.warning("Unsupported authentication request for scheme "+f.scheme);if(this.pending===f){this.pending=undefined;}this.abort([f]);if(this.queue.length>0){this.requestLogon(this.queue.shift());}}};a.logonCompleted=function(f){var g,s,q,p,w,i,n,h;g=f.realm;q=this.queue;p=[];w=[];s=f.success;this.realms[g]=(s?S.AUTHENTICATED:S.UNAUTHENTICATED);if(this.pending&&(g===this.pending.realm)){p.push(this.pending);this.pending=undefined;}n=q.length;for(i=0;i<n;++i){h=q[i];if(h.realm===g){p.push(h);}else{w.push(h);}}this.queue=w;if(p.length>0){if(s){x.info("Authentication succeeded for realm "+g+", repeating requests.");this.retry(p);}else{x.warning("Authentication failed for realm "+g);this.abort(p);}}if(s){this.dispatchLogonCompletedEvent(f);}else{this.dispatchLogonFailedEvent(f);}if(!this.pending&&this.queue.length>0){this.requestLogon(this.queue.shift());}};a.abortLogon=function(f){var q,p,w,i,n,g;if(!f&&this.pending){f=this.pending.realm;}if(f){q=this.queue;p=[];w=[];this.realms[f]=S.UNAUTHENTICATED;if(this.pending){if(f===this.pending.realm){p.push(this.pending);}else{q.push(this.pending);}}this.pending=undefined;n=q.length;for(i=0;i<n;++i){g=q[i];if(g.realm===f){p.push(g);}else{w.push(g);}}this.queue=w;if(p.length>0){x.warning("Authentication aborted for realm "+f);this.abort(p);}this.dispatchLogonAbortedEvent(f);}else{x.info("No pending authentication, ignoring abort");}if(this.queue.length>0){this.requestLogon(this.queue.shift());}};a.retry=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.repeat();}}catch(h){x.warning("Error while repeating request: "+h.message);throw h;}}};a.abort=function(q){var i,n,f,g;n=q.length;for(i=0;i<n;++i){try{f=q[i].channel;if(f.async){g=f.xhr;g.resumeEvents(true);}}catch(h){x.warning("Error while aborting request: "+h.message);throw h;}}};a.abortAll=function(){var f;f=this.queue;this.queue=[];if(this.pending){f.push(this.pending);this.pending=undefined;}this.abort(f);};a.shutdown=function(){x.info("Logon Manager shutdown");this.abortAll();};},{"./EventHandlers.js":5,"./Log.js":8,"./events.js":16,"./xhr.js":21}],10:[function(r,m,b){"use strict";var O;function a(){}m.exports=a;O=a.prototype;function c(){var h,t;h=document.createElement("div");h.style.fontSize="1.25rem";h.style.textAlign="center";h.style.marginBottom="16px";h.style.color="#003283";t=document.createTextNode("Authentication required");h.appendChild(t);return h;}function e(o,g){var h,l,i,j,k;h=document.createElement("div");h.style.width="256px";h.style.margin="0 auto";l=document.createElement("button");setTimeout(function(){l.focus();},300);l.onclick=function(){o();};l.style.width="120px";l.style.height="32px";l.style.color="#ffffff";l.style.backgroundColor="#5496cd";l.style.border="1px solid #367db8";l.style.borderRadius="4px";l.style.testShadow="0 1px #000000";l.style.outline="none";l.onblur=function(){l._focus=false;l.style.testShadow="0 1px #000000";l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";};l.onfocus=function(){l._focus=true;l.style.testShadow="none";l.style.backgroundColor="#427cac";l.style.borderColor="#427cac";};l.onmouseover=function(){if(!l._focus){l.style.backgroundColor="#367db8";l.style.borderColor="#367db8";}};l.onmouseout=function(){if(!l._focus){l.style.backgroundColor="#5496cd";l.style.borderColor="#367db8";}};i=document.createTextNode("To sign in");l.appendChild(i);j=document.createElement("button");j.type="button";j.onclick=function(){g();};j.style.marginLeft="16px";j.style.width="120px";j.style.height="32px";j.style.color="#346187";j.style.backgroundColor="#f7f7f7";j.style.border="1px solid #ababab";j.style.borderRadius="4px";j.style.outline="none";j.onblur=function(){j._focus=false;j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";};j.onfocus=function(){j._focus=true;j.style.backgroundColor="#bfbfbf";j.style.borderColor="#ababab";};j.onmouseover=function(){if(!j._focus){j.style.backgroundColor="rgba(191, 191, 191, 0.5)";j.style.borderColor="rgba(191, 191, 191, 0.5)";}};j.onmouseout=function(){if(!j._focus){j.style.backgroundColor="#f7f7f7";j.style.borderColor="#ababab";}};k=document.createTextNode("Cancel");j.appendChild(k);h.appendChild(l);h.appendChild(j);return h;}function f(o,g){var h=document.createElement("div");h.style.width="288px";h.style.margin="0 auto";h.style.padding="8px";h.style.backgroundColor="#daeef8";h.style.border="1px solid #00abfc";h.style.borderRadius="4px";h.style.fontSize="1rem";h.appendChild(c());h.appendChild(e(o,g));return h;}O.createAlertDialog=function(o,g){var h=document.createElement("div");h.style.position="absolute";h.style.top="0";h.style.left="0";h.style.height="100%";h.style.width="100%";h.style.margin="0";h.style.padding="16px 0";h.style.zIndex="99999";h.appendChild(f(o,g));return h;};O.show=function(o,g){if(!o){throw new TypeError("Missing mandatory onOpen option");}this.close();this.alertDialog=this.createAlertDialog(o,g);document.body.appendChild(this.alertDialog);};O.close=function(){if(this.alertDialog){this.alertDialog.parentNode.removeChild(this.alertDialog);this.alertDialog=null;}};},{}],11:[function(r,m,b){"use strict";var U,a,c,e,f,g=window.location;if(typeof window.URL==="function"){c=function(u){return new URL(u,window.location.href);};}else{c=function(u){if(!a){a=document.createElement("a");}a.href=u;return a;};}function h(i){if(i==="/"){return"/";}var p=i.lastIndexOf("/");return p===-1?"/":i.substring(0,p+1);}e=h(g.pathname);function j(l){var s=l.split("/"),o=e,i,n,p;for(i=0,n=s.length;i<n;++i){p=s[i];switch(p){case".":break;case"..":if(o!=="/"){o=o[o.length-1]==="/"?h(o.substring(0,o.length-1)):h(o);}break;default:o=o[o.length-1]==="/"?o+p:o+"/"+p;break;}}return o;}function k(u){this._parse(u);}m.exports=k;k.getHost=function(u){var i=u.hostname,p=u.port;switch(u.protocol){case"http:":if(p&&p!=="80"){i+=":"+p;}break;case"https:":if(p&&p!=="443"){i+=":"+p;}break;default:break;}return i;};U=k.prototype;U._parse=function(u){u=String(u)||g.href;var p=c(u),i;this.protocol=p.protocol||g.protocol;if(p.hostname){this.hostname=p.hostname;this.port=p.port;}else{i=u[0]!=="/";this.hostname=g.hostname;this.port=g.port;}if(this.protocol==="http:"&&this.port==="80"){this.port="";}else if(this.protocol==="https:"&&this.port==="443"){this.port="";}if(i){this.pathname=j(p.pathname);}else{this.pathname=p.pathname[0]==="/"?p.pathname:"/"+p.pathname;}this.hash=p.hash;this.parameters=k.parseSearch(p.search);};k.parseSearch=function(s){var p,i,l;l={};if(s){p=/[?&]([^&=]+)=?([^&]*)/g;i=p.exec(s);while(i){l[i[1]]=i[2];i=p.exec(s);}}return l;};U.getParameter=function(n){var v=this.parameters[n];return(v===undefined||v===null)?v:decodeURIComponent(v);};U.removeParameter=function(n){delete this.parameters[n];};U.setParameter=function(n,v){this.parameters[n]=encodeURIComponent(v);};Object.defineProperties(U,{crossOrigin:{get:function(){return(this.origin!==f);}},host:{get:function(){return k.getHost(this);}},href:{get:function(){return this.protocol+"//"+this.host+this.pathname+this.search+this.hash;},set:function(u){this._parse(u);}},origin:{get:function(){return this.protocol+"//"+this.host;}},search:{get:function(){var s,p,n,v;s="";p=this.parameters;for(n in p){if(p.hasOwnProperty(n)){v=p[n];if(s.length>0){s+="&";}s+=n;if(v){s+="=";s+=v;}}}return(s.length>0)?("?"+s):s;}}});f=window.location.protocol+"//"+k.getHost(window.location);},{}],12:[function(r,m,b){"use strict";var l=r("./util.js").lowerBound;var x=r("./Log.js").logger;var U;function a(c){this.defaultTimeout=c||600;this.timeout={};this.idxTimeout=[];}m.exports=a;U=a.prototype;U.indexTimeouts=function(){var k,i=[],t=this.timeout;for(k in t){if(t.hasOwnProperty(k)){i.push(k);}}this.idxTimeout=i.sort();};U.getTimeout=function(c){var u,i=l(c,this.idxTimeout);if(i>=0){u=this.idxTimeout[i];if(c.substring(0,u.length)===u){return this.timeout[u];}}return this.defaultTimeout;};U.setTimeout=function(u,v){if(!u){return;}if(typeof u!=="string"){u=""+u;}if(v){x.info("Setting timeout "+v+" on "+u);this.timeout[u]=v;}else{x.info("Reset timeout to default on "+u);delete this.timeout[u];}this.indexTimeouts();};},{"./Log.js":8,"./util.js":20}],13:[function(r,m,b){"use strict";var e=r("./events.js");var L=r("./LogonManager.js");var X=r("./XHRLogonManager.js");var D=r("./DefaultLogonFrameProvider.js");var O=r("./OpenWindowAlert.js");var x=r("./Log.js").logger;var U=r("./UrlObject.js");var a=r("./UrlTimeout.js");var w,W;function c(){x.debug("Creating WindowLogonManager");this.alertDialog=new O();this.frameProvider=new D();this.timeout=new a(c.defaultTimeout);this.pollingInterval=5000;}m.exports=c;W=c.prototype;c.defaultTimeout=600;c.getInstance=function(n){if(!w&&!n){w=new c();}return w;};c.start=function(){c.getInstance().start();};c.shutdown=function(){if(w){w.shutdown();w=null;}};W.start=function(){var l=L.getInstance();l.addEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.addEventListener(L.LogonEvent.LOGON_FAILED,this);l.registerAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.registerAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.shutdown=function(){var l=L.getInstance();this.cancelLogon();l.removeEventListener(L.LogonEvent.LOGON_COMPLETE,this);l.removeEventListener(L.LogonEvent.LOGON_FAILED,this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.IFRAME),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.STRICT_WINDOW),this);l.unregisterAuthHandler(X.logonScheme(X.Scheme.WINDOW),this);};W.getTimeout=function(u){return this.timeout.getTimeout(u);};W.setTimeout=function(u,v){this.timeout.setTimeout(u,v);};W.handleLegacyIFrame=function(){var s=X.logonScheme(X.Scheme.IFRAME),l=L.getInstance();l.unregisterAllHandlers(s);l.registerAuthHandler(s,this);};W.onLogon=function(f){var h=true;this.onLogonEnd();x.debug("Processing "+f.scheme+" logon for realm "+f.realm);switch(X.xhrScheme(f.scheme)){case X.Scheme.WINDOW:this.onWindowLogon(f);break;case X.Scheme.STRICT_WINDOW:this.onStrictWindowLogon(f);break;case X.Scheme.IFRAME:this.onWindowLogon(f,true);break;default:h=false;x.warning("WindowLogonManager unsupported request scheme "+f.scheme);break;}return h;};W.onWindowLogon=function(f,l){var u,g,t,h,s=this;if(l){x.debug("Processing iframe logon as window logon for realm "+f.realm);}else{x.debug("Processing window logon for realm "+f.realm);}t=this.getTimeout(f.channel.url);u=new U(f.channel.url);u.setParameter("xhr-logon",l?"iframe":"window");g=this.frameProvider.create();g.onload=function(){if(h){clearTimeout(h);}h=setTimeout(function(){s.createWindow(l);},t);};g.xhrTimeout=t;g.src=u.href;this.pending={realm:f.realm,frame:g.id,url:u.href};};W.onStrictWindowLogon=function(f){var u=new U(f.channel.url);u.setParameter("xhr-logon","strict-window");x.debug("Processing strict-window logon for realm "+f.realm);this.pending={realm:f.realm,url:u.href};this.createWindow();};W.createWindow=function(p){var f,s=this;if(!this.pending){return;}f=window.open(this.pending.url,"_blank");if(!f||f.closed){x.warning("Failed to open logon window, alerting user");this.alertDialog.show(function(){s.createWindow(p);},function(){s.cancelLogon();});return;}this.window=f;try{f.opener=window;}catch(g){void g;}this.windowMonitorId=setInterval(function(){if(!s.window||s.window.closed){s.cancelLogon();}},300);if(p){s.pollIntervalId=setInterval(function(){s.poll();},s.pollingInterval);}e.addEventListener(f,"load",function(){x.info("Logon window opened");if(s.closed){return;}if(p){setTimeout(function(){s.poll();},300);}s.windowIntervalId=setInterval(function(){try{if(p&&typeof s.window.notifyParent==="function"){s.poll();}}catch(g){x.warning("Logon polling failed: "+g.message);}},300);});e.addEventListener(f,"close",function(){s.cancelLogon();});setTimeout(function(){try{if(s.window){s.window.focus();}}catch(g){x.warning("Failed to switch focus to logon window");}},300);};W.poll=function(){var f;if(this.pending){f=this.frameProvider.create();this.pending.frame=f.id;f.src=this.pending.url;}};W.stopPolling=function(){if(this.windowMonitorId){clearInterval(this.windowMonitorId);this.windowMonitorId=undefined;}if(this.windowIntervalId){clearInterval(this.windowIntervalId);this.windowIntervalId=undefined;}if(this.pollIntervalId){clearInterval(this.pollIntervalId);this.pollIntervalId=undefined;}};W.onLogonEnd=function(f){if(this.pending&&(!arguments.length||f===this.pending.realm)){this.stopPolling();this.frameProvider.destroy();this.alertDialog.close();if(this.window){this.window.close();this.window=undefined;}this.pending=undefined;}};W.cancelLogon=function(){if(this.pending){x.debug("Cancelling logon for realm "+this.pending.realm);L.getInstance().abortLogon(this.pending.realm);this.onLogonEnd(this.pending.realm);}};W.handleEvent=function(f){var g;switch(f.type){case L.LogonEvent.LOGON:g=f.request;if(g){return this.onLogon(g);}break;case L.LogonEvent.LOGON_COMPLETE:this.onLogonEnd(f.response.realm);break;case L.LogonEvent.LOGON_FAILED:this.onLogonEnd(f.response.realm);break;}return false;};},{"./DefaultLogonFrameProvider.js":4,"./Log.js":8,"./LogonManager.js":9,"./OpenWindowAlert.js":10,"./UrlObject.js":11,"./UrlTimeout.js":12,"./XHRLogonManager.js":15,"./events.js":16}],14:[function(r,m,b){"use strict";var h=r("./httpUtil.js");var U=r("./UrlObject.js");var X,u,H=2,D=4;function a(c,e){this.manager=c;this.channel=e;this.ignore=(this.manager.ignore&&this.manager.ignore.ignored(e.url));if(!this.ignore){e.xhr._addEventListener("readystatechange",this);}}m.exports=a;X=a.prototype;a.parseHeader=function(c){var i,p=h.parseHeader(c);if(p.accept){p.accept=p.accept.split(",");for(i=0;i<p.accept.length;++i){p.accept[i]=p.accept[i].trim();}}return p;};X.sending=function(c){var x,e,f=new U(c.url);if(f.crossOrigin&&!c.xhr.withCredentials){this.ignore=true;}if(this.ignore){return;}x=c.xhr;e=this.manager.accept().join(",");if(x.getRequestHeader("X-XHR-Logon")===undefined){x.setRequestHeader("X-XHR-Logon","accept="+JSON.stringify(e));}if(x.getRequestHeader("X-Requested-With")===undefined){x.setRequestHeader("X-Requested-With","XMLHttpRequest");}};X.handleEvent=function(e){var c,x,f,g,s,j,k,i;c=this.channel;x=c.xhr;if(x.readyState<H){return;}if(x.readyState===H){if(u===undefined){try{s=x.status;u=!!s;}catch(l){u=false;}if(!s){return;}}else if(!u){return;}}if(x.status===403){f=x.getResponseHeader("x-xhr-logon");if(f){if(c.async){x.suspendEvents();}if(c.async||this.manager.triggerLogonOnSyncRequest){g=a.parseHeader(f);k=g.accept;if(k){for(i=0;i<k.length;++i){if(k[i]==="repeat"){k.splice(i,1);j=true;break;}}}if(x.readyState===D){if(j&&!c.repeated){c.repeated=true;k=this.manager.accept(k);x.setRepeatHeader("X-XHR-Logon","accept=\""+k.join(",")+"\"");x.repeat();}else{this.manager.requestLogon(c,e,g);}}}}}};},{"./UrlObject.js":11,"./httpUtil.js":17}],15:[function(r,m,b){"use strict";var _=r("./xhr.js");var I=r("./IgnoreList.js");var x=r("./Log.js").logger;var X=r("./XHRLogonFilter.js");var L=r("./LogonManager.js");var e=r("./events.js");var a="xhrlogon.";var c=/^\s*\{\s*"xhrLogon"\s*:/;var f,g;function h(){x.info("Creating XHR Logon Manager");}m.exports=h;g=h.prototype;h.getInstance=function(n){if(!f&&!n){f=new h();}return f;};h.start=function(){h.getInstance().start();};h.shutdown=function(){if(f){f.shutdown();f=undefined;}};h.logonScheme=function(i){return a+i;};h.xhrScheme=function(s){return s.startsWith(a)?s.substring(a.length):"none";};g.triggerLogonOnSyncRequest=true;h.Scheme={NONE:"none",REPEAT:"repeat",IFRAME:"iframe",WINDOW:"window",STRICT_WINDOW:"strict-window"};h.defaultAccept=[h.Scheme.REPEAT,h.Scheme.IFRAME,h.Scheme.WINDOW,h.Scheme.STRICT_WINDOW];g.start=function(){if(!this.started){x.info("XHR Logon Manager startup");this.ignore=new I();this._initializeTrustedOrigins();this._registerFilterFactory();this.acceptOrder=h.defaultAccept.slice();e.addEventListener(window,"message",this.getEventHandler());this.started=true;}};g.shutdown=function(){if(this.started){x.info("XHR Logon Manager shutdown");e.removeEventListener(window,"message",this.getEventHandler());this._unregisterFilterFactory();this.started=false;}};function j(s){return(s>=200&&s<300)||(s===304);}function k(){var i,n,s,o=[],p=L.getInstance().schemes;for(i=0,n=p.length;i<n;++i){s=p[i];if(s.startsWith(a)){o.push(s.substring(a.length));}}o.push(h.Scheme.REPEAT);return o;}g.accept=function(s){var i,n,o,p=[],q=L.getInstance();s=s||k();if(s.length){for(i=0,n=s.length;i<n;++i){o=s[i];if(q.isSchemeHandled(h.logonScheme(o))){p.push(o);}}}if(!p.length){p.push(h.Scheme.NONE);}return p;};g.acceptScheme=function(s){if(!s||!s.length){return h.Scheme.NONE;}var i,n,o,p=h.Scheme.NONE,q={},t=L.getInstance();for(i=0,n=s.length;i<n;++i){q[s[i]]=true;}for(i=0,n=this.acceptOrder.length;i<n;++i){o=this.acceptOrder[i];if(t.isSchemeHandled(h.logonScheme(o))&&q[o]){p=o;break;}}return p;};var N="SAP NetWeaver Application Server [";function l(i){if(!i){return"";}if(i.startsWith(N)){return i.substring(0,N.length+3)+"]";}return i;}g.requestLogon=function(i,n,o){var s=this.acceptScheme(o.accept);L.getInstance().requestLogon({channel:i,realm:l(o.realm),scheme:h.logonScheme(s),event:n});};g.registerAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().registerAuthHandler(s,i);};g.unregisterAuthHandler=function(s,i){s=h.logonScheme(s);return L.getInstance().unregisterAuthHandler(s,i);};g.handleEvent=function(i){var n,o;n=i.data;if(c.test(n)){try{if(this.isTrusted(i.origin)){o=JSON.parse(n);if(typeof o.xhrLogon!=="object"){x.warning("Invalid xhrLogon message: "+n);}else{o.xhrLogon.realm=l(o.xhrLogon.realm);o.xhrLogon.success=j(o.xhrLogon.status);L.getInstance().logonCompleted(o.xhrLogon);}}else{x.warning("Received xhrlogon message from untrusted origin "+i.origin);}}catch(p){x.warning("Invalid xhrLogon message: "+n);}}};g._initializeTrustedOrigins=function(){var i,p,o;o={};i=window.location;p=i.protocol;o[p+"//"+i.host]=true;switch(p){case"http:":if(i.port===""){o["http://"+i.hostname+":80"]=true;}else if(i.port==="80"){o["http://"+i.hostname]=true;}break;case"https:":if(i.port===""){o["https://"+i.hostname+":443"]=true;}else if(i.port==="443"){o["https://"+i.hostname]=true;}break;default:break;}this._trustedOrigins=o;};g.isTrusted=function(o){return(!!this._trustedOrigins[o]);};g.addTrustedOrigin=function(o){this._trustedOrigins[o]=true;};g.getEventHandler=function(){var i,s;i=this._eventHandler;if(!i){s=this;i=function(n){s.handleEvent(n);};this._eventHandler=i;}return i;};g._getFilterFactory=function(){var i,s;i=this._filterFactory;if(!i){s=this;i=function(n){n.filters.push(new X(s,n));};this._filterFactory=i;}return i;};g._registerFilterFactory=function(){if(_.channelFactory){_.channelFactory.addFilterFactory(this._getFilterFactory());}};g._unregisterFilterFactory=function(){if(_.channelFactory){_.channelFactory.removeFilterFactory(this._getFilterFactory());delete this._filterFactory;}};},{"./IgnoreList.js":7,"./Log.js":8,"./LogonManager.js":9,"./XHRLogonFilter.js":14,"./events.js":16,"./xhr.js":21}],16:[function(r,m,b){"use strict";var u;function c(t,g,h){var i;i=document.createEvent("Event");i.initEvent(t,g,h);return i;}function a(t,g,h){var i,j;if(u){i=c(t,g,h);}else{try{if(g||h){j={bubbles:g,cancelable:h};}i=new Event(t,j);}catch(k){u=true;i=c(t,g,h);}}return i;}function e(t,g,l,h){if(t.addEventListener){t.addEventListener(g,l,h);}else if(t.attachEvent){t.attachEvent("on"+g,l);}}function f(t,g,l,h){if(t.removeEventListener){t.removeEventListener(g,l,h);}else if(t.detachEvent){t.detachEvent("on"+g,l);}}m.exports={createEvent:a,addEventListener:e,removeEventListener:f};},{}],17:[function(r,m,b){"use strict";var h=/(?:,|^)\s*(?:,\s*)*(\w+)\s*=\s*(?:"((?:[^"\\]|\\.)*)"|(\w*))/g;function p(a){var c={},e,t,v;if(a===undefined){return c;}if(typeof a!=="string"){throw new TypeError("Invalid header value");}e=h.exec(a);while(e!==null){t=e[1];v=e[2]===undefined?e[3]:e[2];c[t]=v?v.replace(/\\(.)/g,"$1"):"";e=h.exec(a);}return c;}m.exports={parseHeader:p};},{}],18:[function(r,m,b){"use strict";r("./polyfill.js");r("./xhr.js");var L=r("./LogonManager.js");var F=r("./FrameLogonManager.js");var W=r("./WindowLogonManager.js");var X=r("./XHRLogonManager.js");function s(o){o=o||{};L.getInstance();X.start();F.start();W.start();if(o.iframeAsWindow){W.getInstance().handleLegacyIFrame();}}function a(){X.shutdown();F.shutdown();W.shutdown();W.shutdown();}m.exports={start:s,shutdown:a,FrameLogonManager:F,LogonManager:L,URL:r("./UrlObject.js"),WindowLogonManager:W,XHRLogonManager:X};},{"./FrameLogonManager.js":6,"./LogonManager.js":9,"./UrlObject.js":11,"./WindowLogonManager.js":13,"./XHRLogonManager.js":15,"./polyfill.js":19,"./xhr.js":21}],19:[function(r,m,b){"use strict";var t;if(!String.prototype.startsWith){String.prototype.startsWith=function(s,p){s=String(s);p=Number(p)||0;p=p<0?0:Math.floor(p);return(this.substr(p,s.length)===s);};}if(!String.prototype.trim){t=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(t,"");};}if(!Date.now){Date.now=function(){return new Date().getTime();};}},{}],20:[function(r,m,b){"use strict";var p=["","0","00","000","0000"];function l(x,a){var i,v,s=0,e=a.length-1;if(e<0||x<a[0]){return-1;}if(x>=a[e]){return e;}--e;while(s<e){i=(s+e+1)>>1;v=a[i];if(x<v){e=i-1;}else{s=i;}}return s;}function c(n,a){var o=""+n;if(o.length<a){o=p[a-o.length]+o;}return o;}function t(){var n=new Date();var o=c(n.getHours(),2)+":"+c(n.getMinutes(),2)+":";o+=c(n.getSeconds(),2)+"."+c(n.getMilliseconds(),3);return o;}m.exports={lowerBound:l,pad:c,time:t};},{}],21:[function(r,m,b){"use strict";function x(){var L=r("./Log.js");var C=r("./ChannelFactory.js");var E=r("./EventHandlers.js");var p,a,_,X,u=0,c=L.logger;p=["loadstart","progress","abort","error","load","timeout","loadend"];a=p.concat("readystatechange");var e=window.navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;_=XMLHttpRequest;XMLHttpRequest._SAP_ENHANCED=true;X=_.prototype;XMLHttpRequest.channelFactory=new C();function f(o,h){var k,n,i,j,l,q;n=h.length;for(k=0;k<n;++k){i=h[k];q=o[i];if(q){l="_"+i;j=o[l];if(!j){o[l]=q;}}}}f(X,["abort","open","setRequestHeader","send","addEventListener","removeEventListener"]);X._getHandlers=function(){var h=this._handlers;if(!h){h=new E(a);this._handlers=h;}return h;};X.handleEvent=function(h){this._getHandlers().dispatch(h);};X.suspendEvents=function(){this._getHandlers().suspend=true;};X.resumeEvents=function(h){var i=this._getHandlers();i.suspend=false;if(h){i.releaseEvents();}else{i.clearEvents();}};X.clearEvents=function(){this._getHandlers().clearEvents();};X.getEventHandler=function(){var s=this,h=this._fnHandler;if(!h){h=function(i){s.handleEvent(i);};this._fnHandler=h;}return h;};X._checkEventSubscription=function(t,h){h=h||this._getHandlers();if(!h.subscribed(t)){this._addEventListener(t,this.getEventHandler());h.subscribe(t);}};X._checkEventSubscriptions=function(){var h,i,n;h=this._getHandlers();n=a.length;for(i=0;i<n;++i){this._checkEventSubscription(a[i],h);}};X.addEventListener=function(t,h){this._getHandlers().add(t,h);};X.removeEventListener=function(t,h){this._getHandlers().remove(t,h);};function g(h){Object.defineProperty(X,"on"+h,{configurable:true,get:function(){return this["_on"+h]||null;},set:function(v){var i="_on"+h;if(this[i]){this.removeEventListener(h,this[i]);}if(typeof v==="function"||typeof v==="object"){this[i]=v;if(E.isHandler(v)){this.addEventListener(h,v);}}else{this[i]=null;}}});}a.forEach(function(h){g(h);});X.abort=function(){var h;try{h=this._channel;if(h){c.debug("Aborting request "+h.method+" "+h.url);h.aborting();this._abort();h.aborted();}else{c.debug("Aborting request");this._abort();}}catch(i){c.warning("Failed to abort request: "+i.message);if(h){h["catch"](i);}else{throw i;}}};X.open=function(h,i,j,k,l){var n,o,q,s;this._id=++u;c.debug("Opening request #"+this._id+" "+h+" "+i);o=arguments.length;if(o<=2){j=true;}q=h;s=i;this._getHandlers().clearEvents();n=_.channelFactory.create(this,h,i,j,k,l);this._channel=n;try{this._clearParams();n.opening();h=n.method;i=n.url;if((s!==i)||(q!==h)){c.debug("Rewriting request #"+this._id+" to "+h+" "+i);}if(o<=2){this._open(h,i);}else{this._open(h,i,j,k,l);}n.opened();this._checkEventSubscriptions();this._removeEventListener("readystatechange",this.getEventHandler());this._addEventListener("readystatechange",this.getEventHandler());}catch(t){c.warning("Failed to open request #"+this._id+" "+h+" "+i+": "+t.message);n["catch"](t);}};X.setRequestHeader=function(h,v){var i,n;if(typeof v!=="string"){v=""+v;}this._setRequestHeader(h,v);n=h.toLowerCase();i=this.headers;if(i[n]===undefined){i[n]=v;}else{i[n]+=", "+v;}};X.setRequestHeaders=function(h){var j,k,i,n;if(typeof h==="object"){k=Object.getOwnPropertyNames(h);n=k.length;for(i=0;i<n;++i){j=k[i];this.setRequestHeader(j,h[j]);}}};X.send=function(h){var i,j,k;try{i=this._channel;if(i){j=i.method;k=i.url;c.debug("Sending request #"+this._id+" "+j+" "+k);i.sending();}this._saveParams(h);this._send(h);if(i){i.sent();}}catch(l){if(j){c.warning("Failed to send request #"+this._id+" "+j+" "+k+": "+l.message);}else{c.warning("Failed to send request #"+this._id+": "+l.message);}if(i){i["catch"](l);}else{throw l;}}};X.getRequestHeader=function(h){return this.headers[h.toLowerCase()];};X.deleteRepeatHeader=function(h){delete this.headers[h.toLowerCase()];};X.setRepeatHeader=function(h,v){this.headers[h.toLowerCase()]=v;};X.reopen=function(){var h=this._channel,i,j;if(h){i=h.method;j=h.url;c.debug("Reopening request #"+this._id+" "+i+" "+j);}else{throw new TypeError("Cannot reopen request");}try{h.reopening();h.opening();this._open(i,j,h.async,h.username,h.password);h.opened();this._restoreParams();this.resumeEvents();}catch(k){c.warning("Failed to reopen request #"+this._id+" "+i+" "+j+": "+k.message);h["catch"](k);}};X.repeat=function(){var h=this._channel,s=this;if(!h){throw new TypeError("Cannot repeat request");}if(e){setTimeout(function(){s.abort();s.reopen();s.send(s._data);},0);}else{this.abort();this.reopen();this.send(this._data);}};X.toString=function(){var h=this._channel,s="[object XMLHttpRequest]";if(h){s+="#"+this._id+" "+h.method+" "+h.url;}return s;};Object.defineProperties(X,{"channel":{get:function(){return this._channel;}},"headers":{get:function(){var h=this._headers;if(!h){h={};this._headers=h;}return h;}},"id":{get:function(){return this._id;}}});X._clearParams=function(){delete this._headers;delete this._withCredentials;delete this._timeout;delete this._data;};X._restoreParams=function(){var t,h;if(this._headers){h=this._headers;this._headers={};this.setRequestHeaders(h);}if(this._withCredentials){this.withCredentials=true;}t=this._timeout;if(t){this.timeout=t;}};X._saveParams=function(h){var t;if((h!==undefined)&&(h!==null)){this._data=h;}if(this.withCredentials){this._withCredentials=true;}t=this.timeout;if(t){this._timeout=t;}};Object.defineProperties(XMLHttpRequest,{"logger":{get:function(){return L.logger;},set:function(l){L.logger=l;}}});}if(!XMLHttpRequest._SAP_ENHANCED){x();}m.exports=XMLHttpRequest;},{"./ChannelFactory.js":2,"./EventHandlers.js":5,"./Log.js":8}]},{},[18])(18)});return m.exports;});
sap.ui.require.preload({
	"sap/ushell/appRuntime/ui5/plugins/rtaAgent/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.rtaAgent","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.73.1","libs":{"sap.ui.core":{"minVersion":"1.73.1"},"sap.ui.fl":{"minVersion":"1.73.1"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/appRuntime/ui5/plugins/rtaShell/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.rtaShell","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.73.1","libs":{"sap.ui.core":{"minVersion":"1.73.1"},"sap.ui.fl":{"minVersion":"1.73.1"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/appRuntime/ui5/plugins/scriptAgent/manifest.json":'{"_version":"1.0.0","sap.app":{"_version":"1.0.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""],"fallbackLocale":""},"id":"sap.ushell.appRuntime.ui5.plugins.waAgent.Component","title":"","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-FLP-FE-AI","embeddedBy":"../../../../","resources":"resources.json"},"sap.ui":{"_version":"1.0.0","technology":"UI5","supportedThemes":[],"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"_version":"1.0.0","contentDensities":{"compact":true,"cozy":true},"dependencies":{"minUI5Version":"1.70.0","libs":{"sap.ui.core":{"minVersion":"1.70.0"}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""],"fallbackLocale":""}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/components/appfinder/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.appfinder","applicationVersion":{"version":"1.96.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.AppFinder.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.appfinder","dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"JS","controlId":"catalogViewMasterDetail","controlAggregation":"detailPages","clearAggregation":false,"async":true},"routes":[{"name":"userMenu","pattern":"userMenu/:filters:"},{"name":"sapMenu","pattern":"sapMenu/:filters:"},{"name":"catalog","pattern":["catalog/:filters:","",":filters:"]}]},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/cards/Card.view.xml":'<core:View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.components.cards.Card"><GenericTile header="{/data/display_title_text}" subheader="{/data/display_subtitle_text}" press="onPress"><TileContent footer="{i18n&gt;cardTileCaption}"/></GenericTile></core:View>',
	"sap/ushell/components/cards/Configuration.view.xml":'<core:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:codeeditor="sap.ui.codeeditor" controllerName="sap.ushell.components.cards.Configuration" height="100%"><VBox fitContainer="true" justifyContent="SpaceBetween"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" type="Warning" visible="{/config/displayOriginalLanguageWarning}" text="{parts:[\'i18n&gt;edit_configuration.original_locale_not_fit_message\',\'/config/originalLanguage\',\'/config/sapLogonLanguage\'],\'formatter\':\'.formatter\'}"/><Title text="{i18n&gt;configuration.category.card_manifest}" class="sapUiTinyMargin"/><codeeditor:CodeEditor id="manifestEditor" value="{/data/editorValue}" editable="{/config/manifestEditorEditable}" type="json"><codeeditor:layoutData><FlexItemData growFactor="1"/></codeeditor:layoutData></codeeditor:CodeEditor></VBox></core:View>',
	"sap/ushell/components/homepage/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.homepage","applicationVersion":{"version":"1.96.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"{{Component.Homepage.Title}}","resources":"resources.json"},"sap.ui":{"fullWidth":true,"hideLightBackground":true,"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.homepage","dependencies":{"minUI5Version":"1.30","libs":{"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/MoveVisualization.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><SelectDialog items="{path:\'\',filters:[{path:\'default\',operator:\'EQ\',value1:false}]}" search="_onMoveTileSearch" title="{i18n&gt;PageRuntime.Dialog.Title.MoveVisualization}" confirm="_confirmSelect" cancel="_onMoveTileDialogClose" contentWidth="400px" contentHeight="auto"><StandardListItem title="{title}"/></SelectDialog></core:FragmentDefinition>',
	"sap/ushell/components/pages/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.pages","applicationVersion":{"version":"1.96.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"componentName":"sap.ushell.components.pages","rootView":{"viewName":"sap.ushell.components.pages.view.PageRuntime","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.ui.core":{},"sap.m":{},"sap.f":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/pages/view/ImportDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog title="{i18n&gt;MyHome.ImportDialog.Title}" class="sapUiContentPadding" contentWidth="30rem"><content><Text text="{i18n&gt;MyHome.ImportDialog.Info}" class="sapUiSmallMarginBottom"/><List items="{/PersonalizedGroups}" mode="MultiSelect" growingThreshold="50" class="sapUiSmallMarginBottom" includeItemInSelection="true" busy="{/busy}"><StandardListItem title="{title}" selected="{selected}"/></List></content><beginButton><Button text="{i18n&gt;MyHome.ImportDialog.Button.AddAppsToPage}" press=".doImport" type="Emphasized" enabled="{= !${/busy}}"/></beginButton><endButton><Button text="{i18n&gt;MyHome.ImportDialog.Button.Cancel}" press=".close"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/components/pages/view/MessageStrip.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessageStrip text="{i18n&gt;MyHome.InitialPage.MessageStrip.Text}" showIcon="true" visible="{view&gt;/personalizationAvailable}" close=".onMessageStripClose" showCloseButton="true"><link><Link text="{i18n&gt;MyHome.InitialPage.MessageStrip.Link}" press=".onImportDialogPress"/></link></MessageStrip></core:FragmentDefinition>',
	"sap/ushell/components/pages/view/MyHomeStart.view.xml":'<View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f" controllerName="sap.ushell.components.pages.controller.MyHome"><Page showHeader="false"><core:Fragment fragmentName="sap.ushell.components.pages.view.MessageStrip" type="XML" class="sapUiSmallMargin"/><VBox class="sapUiSmallMargin" alignItems="Center" justifyContent="Center"><f:IllustratedMessage illustrationSize="Scene" illustrationType="sapIllus-NoData" title="{i18n&gt;MyHome.InitialPage.Title}" description="{i18n&gt;MyHome.InitialPage.Description}"><f:additionalContent><Button text="{i18n&gt;MyHome.InitialPage.Button.EditPage}" press=".onEditPress"/></f:additionalContent></f:IllustratedMessage></VBox></Page></View>',
	"sap/ushell/components/pages/view/PageRuntime.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:dnd="sap.ui.core.dnd" xmlns:data="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" xmlns:launchpad="sap.ushell.ui.launchpad" controllerName="sap.ushell.components.pages.controller.PageRuntime" height="100%"><NavContainer id="pagesRuntimeNavContainer"><NavContainer id="pagesNavContainer" pages="{/pages}"><pages><Page data:pageId="{id}" showHeader="false" backgroundDesign="Transparent" floatingFooter="true"><content><launchpad:Page edit="{viewSettings&gt;/actionModeActive}" dataHelpId="Page-{id}" showTitle="{viewSettings&gt;/showPageTitle}" title="{title}" sections="{path:\'sections\',templateShareable:false,key:\'id\'}" addSectionButtonPressed=".handleEditModeAction(\'addSection\', $event, ${$source&gt;/}, ${$parameters&gt;/})" enableSectionReordering="{viewSettings&gt;/actionModeActive}" sectionDrop=".handleEditModeAction(\'moveSection\', $event, ${$source&gt;/}, ${$parameters&gt;/})"><launchpad:sections><launchpad:Section title="{title}" class="sapContrastPlus" sizeBehavior="{viewSettings&gt;/sizeBehavior}" dataHelpId="Section-{id}" default="{default}" visualizations="{path:\'visualizations\',factory:\'._visualizationFactory\',key:\'id\'}" enableGridBreakpoints="false" enableGridContainerQuery="{viewSettings&gt;/ushellContainerDocked}" editable="{viewSettings&gt;/actionModeActive}" add=".handleEditModeAction(\'addVisualization\', $event, ${$source&gt;/}, ${$parameters&gt;/})" delete=".handleEditModeAction(\'deleteSection\', $event, ${$source&gt;/}, ${$parameters&gt;/})" reset=".handleEditModeAction(\'resetSection\', $event, ${$source&gt;/}, ${$parameters&gt;/})" sectionVisibilityChange=".handleEditModeAction(\'changeSectionVisibility\', $event, ${$source&gt;/}, ${$parameters&gt;/})" titleChange=".handleEditModeAction(\'changeSectionTitle\', $event, ${$source&gt;/}, ${$parameters&gt;/})" enableVisualizationReordering="{viewSettings&gt;/personalizationEnabled}" areaDragEnter=".onAreaDragEnter" visualizationDrop=".moveVisualization($event, ${$source&gt;/}, ${$parameters&gt;/})" showSection="{visible}" visible="{= !!${visualizations}.length || ${viewSettings&gt;/actionModeActive} }" noVisualizationsText="{i18n&gt;PageRuntime.EditMode.EmptySection}" showNoVisualizationsText="{viewSettings&gt;/actionModeActive}" enableAddButton="{viewSettings&gt;/showAddButton}" enableResetButton="{parts:[\'id\',\'preset\'],formatter:\'._sectionEnableReset\'}" enableDeleteButton="{parts:[\'id\',\'preset\'],formatter:\'._sectionEnableDelete\'}" enableShowHideButton="{viewSettings&gt;/showHideButton}"/></launchpad:sections><launchpad:dragDropConfig><dnd:DropInfo groupName="Section" targetAggregation="sections" dragEnter=".onDragEnter" drop=".moveVisualization($event, ${$source&gt;/}, ${$parameters&gt;/})"/></launchpad:dragDropConfig></launchpad:Page></content><footer><Bar class="sapUshellDashboardFooter" visible="{viewSettings&gt;/actionModeActive}"><contentRight><Button text="{i18n&gt;closeEditMode}" type="Emphasized" press=".handleEditModeAction(\'save\', $event, ${$source&gt;/}, ${$parameters&gt;/})"/></contentRight><customData><core:CustomData key="sap-ui-fastnavgroup" value="true" writeToDom="true"/></customData></Bar></footer><landmarkInfo><PageAccessibleLandmarkInfo rootRole="Region" rootLabel="{i18n&gt;PageSectionRegion}" headerRole="None" contentRole="None" footerRole="None"/></landmarkInfo></Page></pages><customData><core:CustomData key="help-id" value="{= ${viewSettings&gt;/personalizationEnabled} ? \'general-page-id-pers-allowed\' : \'general-page-id-no-pers-allowed\'}" writeToDom="true"/></customData></NavContainer><MessagePage id="errorPage" showHeader="false" icon="{errorPage&gt;/icon}" text="{errorPage&gt;/text}" description="{errorPage&gt;/description}"><buttons><Button text="{i18n&gt;PageRuntime.CannotLoadPage.DetailsButton}" visible="{= !!${errorPage&gt;/details} &amp;&amp; !${errorPage&gt;/description}}" press="._pressViewDetailsButton"/><Button text="{i18n&gt;PageRuntime.CannotLoadPage.CopyButton}" visible="{= !!${errorPage&gt;/details}}" press="._copyToClipboard"/></buttons></MessagePage></NavContainer></mvc:View>',
	"sap/ushell/components/shell/MeArea/MeAreaPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover id="sapUshellMeAreaPopover" placement="Bottom" showArrow="true" showHeader="false" class="sapUshellPopupContainer sapContrastPlus"><content><List class="sapUshellPopoverList" showSeparators="None" includeItemInSelection="true" items="{path:\'/actions\',factory:\'.meAreaPopoverItemFactory\'}"><headerToolbar><Toolbar style="Clear"><Title level="H1" text="{/userName}"/></Toolbar></headerToolbar></List></content></Popover></core:FragmentDefinition>',
	"sap/ushell/components/shell/MenuBar/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.components.shell.MenuBar","applicationVersion":{"version":"1.96.0"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"sap.ushell.components.shell.MenuBar.view.MenuBar","type":"XML","async":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/MenuBar/view/MenuBar.view.xml":'<View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.components.shell.MenuBar.controller.MenuBar" displayBlock="true"><IconTabHeader class="sapUshellShellTabBar" ariaTexts="{viewConfiguration&gt;/ariaTexts}" mode="Inline" showOverflowSelectList="true" items="{path:\'menu&gt;/\',factory:\'._menuFactory\'}" selectedKey="{viewConfiguration&gt;/selectedKey}" select=".onMenuItemSelection"><customData><core:CustomData xmlns:core="sap.ui.core" key="sap-ui-fastnavgroup" value="true" writeToDom="true"/></customData></IconTabHeader></View>',
	"sap/ushell/components/shell/Notifications/Notifications.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Notifications.Notifications" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" class="sapUshellNotificationsView"><IconTabBar id="notificationIconTabBar" backgroundDesign="Transparent" headerBackgroundDesign="Transparent" expandable="false" selectedKey="sapUshellNotificationIconTabByDate" select="onTabSelected" class="sapUshellNotificationTabBar"><items><IconTabFilter id="sapUshellNotificationIconTabByDate" key="sapUshellNotificationIconTabByDate" text="{i18n&gt;notificationsSortByDate}"><List id="sapUshellNotificationsListDate" class="sapUshellNotificationsList sapContrastPlus sapUshellPopoverList" showSeparators="Inner" mode="None" noDataText="{i18n&gt;noNotificationsMsg}" growing="true" growingThreshold="10" growingScrollToLoad="true" updateStarted=".onListUpdateStarted" items="{path:\'/notificationsByDateDescending/aNotifications\',templateShareable:true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></List></IconTabFilter><IconTabFilter id="sapUshellNotificationIconTabByType" key="sapUshellNotificationIconTabByType" text="{i18n&gt;notificationsSortByType}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsGroupListItem" type="XML"/></IconTabFilter><IconTabFilter id="sapUshellNotificationIconTabByPrio" key="sapUshellNotificationIconTabByPrio" text="{i18n&gt;notificationsSortByPriority}"><List id="sapUshellNotificationsListPriority" class="sapUshellNotificationsList sapContrastPlus sapUshellPopoverList" mode="None" noDataText="{i18n&gt;noNotificationsMsg}" growing="true" growingThreshold="10" growingScrollToLoad="true" updateStarted=".onListUpdateStarted" items="{path:\'/notificationsByPriorityDescending/aNotifications\',templateShareable:true}"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/></List></IconTabFilter></items></IconTabBar></mvc:View>',
	"sap/ushell/components/shell/Notifications/NotificationsGroupListItem.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" core:require="{utils:\'sap/ushell/utils\'}"><List id="sapUshellNotificationsListType" class="sapUshellNotificationsList sapContrastPlus sapUshellPopoverList" mode="SingleSelect" showSeparators="Inner" noDataText="{i18n&gt;noNotificationsMsg}" items="{/notificationsByTypeDescending}"><NotificationListGroup title="{GroupHeaderText}" collapsed="{Collapsed}" showEmptyGroup="true" showItemsCounter="false" enableCollapseButtonWhenEmpty="true" autoPriority="false" datetime="{path:\'CreatedAt\',formatter:\'utils.formatDate\'}" priority="{path:\'Priority\',formatter:\'.priorityFormatter\'}" busy="{= !!${Busy}}" buttons="{path:\'Actions\',templateShareable:true,sorter:{path:\'Nature\',descending:true}}" items="{path:\'aNotifications\',templateShareable:true}" close="onNotificationGroupItemClose" onCollapse="onNotificationGroupItemCollapse"><core:Fragment fragmentName="sap.ushell.components.shell.Notifications.NotificationsListItem" type="XML"/><buttons><Button text="{GroupActionText}" press=".onNotificationGroupItemButtonPress"/></buttons></NotificationListGroup></List></core:FragmentDefinition>',
	"sap/ushell/components/shell/Notifications/NotificationsListItem.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><NotificationListItem class="sapUshellNotificationsListItem sapContrastPlus" press="onNotificationItemPress" close="onNotificationItemClose" datetime="{path:\'CreatedAt\',formatter:\'sap.ushell.utils.formatDate\'}" description="{SubTitle}" title="{= ${SensitiveText} ? ${SensitiveText} : ${Text}}" buttons="{path:\'Actions\',sorter:{path:\'Nature\',descending:true},templateShareable:true}" unread="{= !${IsRead}}" busy="{= ${Busy} ? ${Busy} : false}" priority="{path:\'Priority\',formatter:\'.priorityFormatter\'}"><buttons><Button text="{ActionText}" press="onNotificationItemButtonPress"/></buttons></NotificationListItem></core:FragmentDefinition>',
	"sap/ushell/components/shell/ProductSwitch/ProductSwitch.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.f"><ResponsivePopover id="sapUshellProductSwitchPopover" placement="Bottom" showArrow="true" showHeader="false" title="{i18n&gt;productSwitch}" class="sapUshellPopupContainer sapContrastPlus"><content><f:ProductSwitch change="onProductItemPress" items="{/}"><f:items><f:ProductSwitchItem title="{title}" src="{visual/icon}" subTitle="{subtitle}" targetSrc="{targetUrl}"/></f:items></f:ProductSwitch></content></ResponsivePopover></core:FragmentDefinition>',
	"sap/ushell/components/shell/Search/manifest.json":'{"_version":"1.34.0","sap.app":{"id":"sap.ushell.components.shell.Search","applicationVersion":{"version":"1.96.0"},"i18n":{"bundleUrl":"../../../renderers/fiori2/resources/resources.properties","fallbackLocale":"en"},"type":"component","title":"","resources":"resources.json"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"dependencies":{"minUI5Version":"1.92","libs":{"sap.m":{},"sap.ui.layout":{}}},"models":{},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/Settings/ContentWrapper.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Page class="sapUsheUserSettingDetaildPage" showHeader="false" busy="true"><content><ObjectHeader title="{entryInfo&gt;/title}" visible="{entryInfo&gt;/showHeader}" backgroundDesign="Solid" class="sapUshellUserSettingDetailHeader"/></content></Page></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/ErrorContent.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><FlexBox height="5rem" alignItems="Center" justifyContent="Center"><items><Text text="{entryInfo&gt;/errorMessage}"/></items></FlexBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/UserSettings.view.xml":'<mvc:View displayBlock="true" controllerName="sap.ushell.components.shell.Settings.UserSettings" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"><Dialog id="userSettingsDialog" class="sapUshellUserSetting sapContrastPlus" showHeader="false" contentHeight="42rem" contentWidth="58rem" afterClose="._afterClose" stretch="{device&gt;/system/phone}"><customHeader><Bar id="settingsBar"><contentLeft><Button id="userSettingsNavBackButton" icon="sap-icon://nav-back" press="._navBackButtonPressHandler" tooltip="{i18n&gt;ToggleButtonShow}" visible="false"/><ToggleButton id="userSettingsMenuButton" icon="sap-icon://menu2" press="._navToggleButtonPressHandler" tooltip="{i18n&gt;ToggleButtonShow}" visible="false"/></contentLeft><contentMiddle><Title text="{i18n&gt;userSettings}"/></contentMiddle></Bar></customHeader><content><Page class="sapUshellSettingsPage" showHeader="false"><content><SplitApp id="settingsApp" defaultTransitionNameDetail="show" mode="{= ${device&gt;/system/desktop} ? \'StretchCompressMode\' : \'ShowHideMode\'}"><masterPages><Page id="userSettingMaster" class="sapUshellUserSettingMaster" showHeader="false"><content><List id="userSettingEntryList" items="{/entries}" mode="SingleSelectMaster" selectionChange="._itemPress"><StandardListItem class="sapUshellUserSettingMasterListItem" title="{title}" description="{valueResult}" icon="{= !!${icon} ? ${icon} : \'sap-icon://action-settings\' }" visible="{visible}" type="{= ${device&gt;/system/phone} ? \'Navigation\' : \'Inactive\'}"><customData><core:CustomData key="help-id" value="{entryHelpID}" writeToDom="{= !!${entryHelpID}}"/></customData></StandardListItem></List></content></Page></masterPages></SplitApp></content><footer><OverflowToolbar><Button id="userSettingsMessagePopoverBtn" visible="false" press="._handleMessagePopoverPress" icon="sap-icon://message-error" ariaHasPopup="Dialog"/><ToolbarSpacer/><Button id="userSettingSaveButton" text="{i18n&gt;saveBtn}" type="Emphasized" press="._handleSaveButtonPress"/><Button id="userSettingCancelButton" text="{i18n&gt;cancelBtn}" press="._handleCancelButtonPress"/></OverflowToolbar></footer></Page></content></Dialog></mvc:View>',
	"sap/ushell/components/shell/Settings/UserSettingsErrorMessagePopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><MessagePopover id="userSettingsMessagePopover" items="{path:\'errorMessages&gt;/\',sorter:{path:\'additionalText\'}}"><MessageItem type="{errorMessages&gt;type}" title="{errorMessages&gt;additionalText}" subtitle="{errorMessages&gt;message}" description="{errorMessages&gt;description}"><Link text="{i18n&gt;contactSupportBtn}" press=".handleContactSupportButtonPress" enabled="{buttonStates&gt;contactSupportBtnEnable}"/></MessageItem></MessagePopover></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/appearance/Appearance.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" controllerName="sap.ushell.components.shell.Settings.appearance.Appearance"><IconTabBar id="idIconTabBar" applyContentPadding="true" expandable="false"><items><IconTabFilter text="{i18n&gt;AppearanceThemeMenu}" key="themeListTab"><List items="{/options}" includeItemInSelection="true" mode="{= ${config&gt;/themeConfigurable} ? \'SingleSelectMaster\' : \'None\'}" selectionChange="onSelectHandler" id="themeList"><items><CustomListItem selected="{isSelected}" visible="{isVisible}" class="sapUshellAppearanceCustomListItem"><customData><core:CustomData key="themeid" value="{id}" writeToDom="true"/></customData><HBox><HBox class="sapUshellAppearanceItemViewLeft"><core:Icon src="{= ${isSapTheme} ? undefined : \'sap-icon://palette\'}" color="{config&gt;/sapUiContentIconColor}" size="1.75rem" class="sapUshellAppearanceIcon"/><Text text="{= ${combineName} ? ${combineName} : ${name}}" class="sapUshellAppearanceItemText"><layoutData><FlexItemData styleClass="sapUshellAppearanceFlexItemText"/></layoutData></Text></HBox><HBox class="sapUshellAppearanceItemViewRight"><core:Icon src="sap-icon://sys-enter-2" visible="{= !!${isSelected}}" color="{config&gt;/sapUiContentIconColor}" size="1.375rem"/></HBox></HBox></CustomListItem></items></List></IconTabFilter><IconTabFilter text="{i18n&gt;AppearanceLayoutAndBehaviorMenu}" id="DisplaySettingsTab" key="displaySettingsTab"><HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label labelFor="contentDensityCheckBox" text="{i18n&gt;AppearanceContentDensityLabel}:" class="sapUshellAppearanceLabel" width="auto" textAlign="{config&gt;/textAlign}"/><VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><CheckBox id="contentDensityCheckBox" tooltip="{i18n&gt;AppearanceContentDensityTooltip}" selected="{config&gt;/isCozyContentMode}" enabled="{config&gt;/contentDensityConfigurable}"/><Text text="{i18n&gt;appearanceCompactCozyDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox visible="{config&gt;/sizeBehaviorConfigurable}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label text="{i18n&gt;AppearanceTileSizeLabel}:" class="sapUshellAppearanceLabel" width="auto" textAlign="{config&gt;/textAlign}" labelFor="tileSizeRadioButtonGroup" id="sapUshellAppearanceTileSizeLabel"/><VBox class="sapUshellAppearanceTileSizeText"><RadioButtonGroup selectedIndex="{config&gt;/tileSize}" id="tileSizeRadioButtonGroup"><buttons><RadioButton text="{i18n&gt;AppearanceTileSizeSmall}" class="sapUshellAppearanceTileSizeSmall" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/><RadioButton text="{i18n&gt;AppearanceTileSizeLarge}" class="sapUshellAppearanceTileSizeLarge" ariaLabelledBy="sapUshellAppearanceTileSizeLabel"/></buttons></RadioButtonGroup><Text text="{i18n&gt;appearanceTileSizeDescriptionText}" class="sapUshellFlpSettingsDescription"/></VBox></HBox><HBox visible="{darkMode&gt;/enabled}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox"><Label labelFor="{= ${darkMode&gt;/detectionSupported} ? \'darkModeDetectionSwitcher\' : \'darkModeSwitcher\'}" text="{i18n&gt;AppearanceDarkModeLabel}:" class="sapUshellAppearanceLabel" width="auto" textAlign="{config&gt;/textAlign}"/><VBox visible="{darkMode&gt;/detectionSupported}" alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="AcceptReject" id="darkModeDetectionSwitcher" tooltip="{i18n&gt;AppearanceDarkModeDetectionTooltip}" change="changeSystemModeDetection" state="{darkMode&gt;/detectionEnabled}"/><Text text="{i18n&gt;appearanceDarkModeDetectionText}" class="sapUshellFlpSettingsDescription"/><MessageStrip text="{i18n&gt;appearanceDarkModeWarning}" type="Warning" showIcon="true" class="sapUshellFlpSettingsWarning"/></VBox><VBox visible="{= !${darkMode&gt;/detectionSupported}}" alignItems="Baseline" class="sapUshellAppearanceContentDensityText"><Switch type="AcceptReject" id="darkModeSwitcher" tooltip="{i18n&gt;AppearanceDarkModeSwitchTooltip}" change="changeThemeMode" state="{darkMode&gt;/isDarkThemeApplied}"/><Text text="{i18n&gt;appearanceDarkModeSwitchText}" class="sapUshellFlpSettingsDescription"/><MessageStrip text="{i18n&gt;appearanceDarkModeWarning}" type="Warning" showIcon="true" class="sapUshellFlpSettingsWarning"/></VBox></HBox></IconTabFilter></items></IconTabBar></mvc:View>',
	"sap/ushell/components/shell/Settings/homepage/HomepageSetting.view.xml":'<mvc:View width="100%" xmlns="sap.m" xmlns:lf="sap.ui.layout.form" xmlns:mvc="sap.ui.core.mvc"><lf:SimpleForm><lf:content><Label id="anchorBarLabel" class="sapUshellFlpSettingsLabel" text="{i18n&gt;AnchorBarLabel}"/><VBox><items><RadioButtonGroup id="anchorBarDisplayMode" selectedIndex="{/displayMode}" ariaLabelledBy="anchorBarLabel" ariaDescribedBy="anchorBarDescription"><buttons><RadioButton id="anchorBarScrollModeRBtn" text="{i18n&gt;anchorBarScrollMode}"/><RadioButton id="anchorBarTabModeRBtn" text="{i18n&gt;anchorBarTabMode}"/></buttons></RadioButtonGroup><VBox class="sapUshellFlpSettingsDescriptionBorder"><items><Text id="anchorBarDescription" class="sapUshellFlpSettingsDescription" text="{i18n&gt;homePageGroupDisplayDescriptionText}"/><Text class="sapUshellFlpSettingsDescription" text="{i18n&gt;homePageGroupDisplayDescriptionText_secondParagraph}" visible="{/personalisationEnabled}"/></items></VBox></items></VBox></lf:content></lf:SimpleForm></mvc:View>',
	"sap/ushell/components/shell/Settings/notifications/NotificationsSetting.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.notifications.NotificationsSetting" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMargin"><CheckBox id="showHighPrioCheckbox" selected="{/flags/highPriorityBannerEnabled}" text="{i18n&gt;Label.ShowAlertsForHighNotifications}"/><Table class="sapUiForceWidthAuto" id="table" sticky="ColumnHeaders" fixedLayout="false" items="{path:\'/rows\',sorter:{path:\'NotificationTypeDesc\'}}"><columns><Column id="columnNotificationType"><ObjectIdentifier text="{i18n&gt;notificationType_column}"/></Column><Column id="columnMobileNotification" visible="{/flags/mobileNotificationsEnabled}" minScreenWidth="Tablet" demandPopin="true"><Text id="columnMobileText" text="{i18n&gt;iOSNotification_column}"/></Column><Column id="columnEmail" visible="{/flags/emailNotificationsEnabled}" minScreenWidth="Tablet" demandPopin="true"><Text id="columnEmailText" text="{i18n&gt;eMailFld}"/></Column><Column id="columnHighPriority" minScreenWidth="Tablet" demandPopin="true"><Text id="columnHighPriorityText" text="{i18n&gt;highNotificationsBanner_column}"/></Column><Column id="columnEnable" minScreenWidth="Tablet"><Text id="columnEnableText" text="{i18n&gt;Notifications_Settings_Show_Type_column}"/></Column></columns><items><ColumnListItem id="columnListItemNotifications" type="Inactive"><cells><ObjectIdentifier id="objectIdentifierTitle" title="{NotificationTypeDesc}"/></cells><cells><CheckBox id="cellCheckboxMobile" selected="{= !${DoNotDeliverMob}}" select=".onSelectMobile"/></cells><cells><CheckBox id="cellCheckboxEmail" visible="{= ${IsEmailEnabled} &amp;&amp; ${IsEmailIdMaintained} &amp;&amp; !${DoNotDeliver} }" selected="{= !${DoNotDeliverEmail}}" select=".onSelectEmail"/></cells><cells><CheckBox id="cellCheckboxHighPrio" selected="{= ${PriorityDefault} === \'HIGH\'}" select=".onSelectHighPriority"/></cells><cells><Switch id="cellSwitchEnable" state="{= !${DoNotDeliver}}" change=".onEnableSwitchChange" customTextOn=" " customTextOff=" "/></cells></ColumnListItem></items></Table></VBox></mvc:View>',
	"sap/ushell/components/shell/Settings/search/Search.view.xml":'<mvc:View width="100%" controllerName="sap.ushell.components.shell.Settings.search.Search" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"><VBox id="searchContent" class="sapUshellUserSettingDetailContent"/></mvc:View>',
	"sap/ushell/components/shell/Settings/spaces/SpacesSetting.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.spaces.SpacesSetting" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMargin"><CheckBox text="{i18n&gt;spacesModeLabel}" selected="{/isSpacesEnabled}"/><VBox class="sapUshellFlpSettingsDescriptionBorder"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n&gt;spacesModeDescriptionText}"/></VBox><CheckBox text="{i18n&gt;showMyHomeLabel}" visible="{= ${/isSpacesEnabled} &amp;&amp; ${/isShowMyHomeVisible}}" selected="{/isShowMyHomeSelected}"/><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{= ${/isSpacesEnabled} &amp;&amp; ${/isShowMyHomeVisible}}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n&gt;showMyHomeDescriptionText}"/></VBox><CheckBox text="{i18n&gt;showMyHomeImportLabel}" visible="{= ${/isSpacesEnabled} &amp;&amp; ${/isShowMyHomeSelected} &amp;&amp; ${/isMyHomeImportVisible}}" selected="{/isMyHomeImportSelected}"/><VBox class="sapUshellFlpSettingsDescriptionBorder" visible="{= ${/isSpacesEnabled} &amp;&amp; ${/isShowMyHomeSelected} &amp;&amp; ${/isMyHomeImportVisible}}"><Text class="sapUshellFlpSettingsDescription sapUshellFlpSettingsWide" text="{i18n&gt;showMyHomeImportDescription}"/></VBox></VBox></mvc:View>',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns="sap.m" xmlns:core="sap.ui.core"><VBox><CheckBox id="imageConsentForUserCheckBox" selected="{config&gt;/isImageConsentForUser}" text="{i18n&gt;imgConsentMsg}"/><Panel expandable="true" headerText="{i18n&gt;userImageConsentDialogShowTermsOfUse}" width="auto"><content><Text text="{i18n&gt;userImageConsentDialogTermsOfUse}"/></content></Panel></VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSelector.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.userAccount.UserAccountSelector" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"><ObjectHeader icon="{config&gt;/icon}" title="{config&gt;/name}" backgroundDesign="Solid" class="sapUshellUserSettingDetailHeader"/><IconTabBar applyContentPadding="true" backgroundDesign="Transparent"><items><IconTabFilter text="{i18n&gt;UserAccountFld}" key="userAccountSetting"><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountSetting" type="XML"/></IconTabFilter><IconTabFilter visible="{config&gt;/imgConsentEnabled}" text="{i18n&gt;ProfileImgId}" key="userAccountImgConsentSelector"><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountImgConsentSelector" type="XML"/></IconTabFilter></items></IconTabBar></mvc:View>',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition height="100%" width="100%" xmlns="sap.m" xmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core"><VBox class="sapUiSmallMargin"><form:SimpleForm editable="false" layout="ResponsiveGridLayout" labelSpanS="5" columnsM="7"><Label text="{i18n&gt;UserAccountNameFld}" labelFor="userAccountuserName"/><Text text="{config&gt;/name}" id="userAccountuserName"/><Label text="{i18n&gt;UserAccountEmailFld}" labelFor="userAccountuserMail"/><Text text="{config&gt;/mail}" id="userAccountuserMail"/><Label text="{i18n&gt;UserAccountServerFld}" labelFor="userAccountuserServer"/><Text text="{config&gt;/server}" id="userAccountuserServer"/></form:SimpleForm></VBox><VBox id="userAccountPersonalizationSection" class="sapUiSmallMargin" visible="{config&gt;/isResetPersonalizationVisible}"><Label text="{i18n&gt;userAccountPersonalizationLabel}" labelFor="resetPersonalizationButton"/><Button id="resetPersonalizationButton" text="{i18n&gt;userAccountResetPersonalizationButton}" press="showMessageBoxWarningDeletePersonalization"/><Text class="sapUshellFlpSettingsWideDescription" text="{i18n&gt;userAccountResetPersonalizationDescriptionText}"/></VBox></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/userAccount/UserAccountSetting.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.userAccount.UserAccountSelector" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><ObjectHeader icon="{config&gt;/icon}" title="{config&gt;/name}" backgroundDesign="Solid" class="sapUshellUserSettingDetailHeader"/><core:Fragment fragmentName="sap.ushell.components.shell.Settings.userAccount.UserAccountSetting" type="XML"/></mvc:View>',
	"sap/ushell/components/shell/Settings/userActivities/UserActivitiesSetting.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.userActivities.UserActivitiesSetting" xmlns="sap.m" xmlns:lf="sap.ui.layout.form" xmlns:mvc="sap.ui.core.mvc"><lf:SimpleForm id="userActivitiesForm" layout="ResponsiveGridLayout"><lf:content><VBox class="sapUiSmallMargin"><CheckBox id="enableTrackingCheckbox" selected="{/checkboxIsChecked}" text="{i18n&gt;trackingLabel}"/><Button text="{i18n&gt;cleanActivityLabel}" press=".onClearHistory" visible="{/checkboxIsChecked}"/></VBox></lf:content></lf:SimpleForm></mvc:View>',
	"sap/ushell/components/shell/Settings/userDefaults/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"sap.ushell.components.shell.Settings.userDefaults","applicationVersion":{"version":"1.0.0"},"i18n":{"bundleUrl":"../../renderers/fiori2/resources/resources.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"ach":"CA-FLP-FE-COR","type":"application"},"sap.ui":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"rootView":{"viewName":"sap.ushell.components.shell.Settings.userDefaults.view.UserDefaultsSetting","type":"XML","async":true,"id":"defaultParametersSelectorView"},"dependencies":{"minUI5Version":"1.82","libs":{"sap.m":{},"sap.ui.comp":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/shell/Settings/userDefaults/view/ExtendedValueDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:valueHelp="sap.ui.comp.valuehelpdialog" xmlns:core="sap.ui.core"><valueHelp:ValueHelpDialog id="extendedValueDialog" basicSearchText="{/label}" title="{/label}" supportRanges="true" supportRangesOnly="true" key="{/key}" displayFormat="UpperCase" descriptionKey="{/label}" filterMode="true" stretch="{device&gt;/system/phone}" cancel=".closeValueHelp" afterClose=".afterCloseValueHelp"/></core:FragmentDefinition>',
	"sap/ushell/components/shell/Settings/userDefaults/view/UserDefaultsSetting.view.xml":'<mvc:View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:smartvariants="sap.ui.comp.smartvariants" xmlns:userDefaults="sap.ushell.components.shell.Settings.userDefaults" controllerName="sap.ushell.components.shell.Settings.userDefaults.controller.UserDefaultsSetting"><VBox visible="{= ${systemContexts&gt;/systemContexts}.length &gt; 1}" class="sapUshellSystemContextsSelection"><HBox alignItems="Center"><Label labelFor="systemContextSelect" text="{i18n&gt;userDefaultsSystemTitle}"/><Select id="systemContextSelect" selectedKey="{systemContexts&gt;/selectedKey}" items="{systemContexts&gt;/systemContexts}" change=".handleSystemContextChanged"><core:ListItem text="{systemContexts&gt;label}" key="{systemContexts&gt;id}"/></Select></HBox><Text class="sapUshellFlpSettingsWideDescription" text="{i18n&gt;userDefaultsSystemContextInfo}"/></VBox><VBox><smartvariants:SmartVariantManagement id="defaultSettingsVariantManagement" class="sapUshellSmartVariantManagement" showSetAsDefault="false" visible="false" standardItemText="{i18n&gt;userDefaultsStandardView}"/></VBox><Text text="{i18n&gt;userDefaultsDiffState}" visible="{path:\'DirtyState&gt;/selectedVariant\',formatter:\'.displayDiffText\'}" class="sapUshellDefaultValuesDirtyState sapUiTinyMarginTop"/><userDefaults:UserDefaultsForm id="userDefaultsForm" persistencyKey="UserDefaultsFormPersKey"/></mvc:View>',
	"sap/ushell/components/shell/Settings/userLanguageRegion/LanguageRegionSelector.view.xml":'<mvc:View controllerName="sap.ushell.components.shell.Settings.userLanguageRegion.LanguageRegionSelector" xmlns="sap.m" xmlns:form="sap.ui.layout.form" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"><VBox class="sapUiSmallMargin" visible="{= !!${/isSettingsLoaded}}"><form:SimpleForm id="languageForm" editable="true" layout="ResponsiveGridLayout" labelSpanS="5" columnsM="7"><Label id="languageSelectionLabel" text="{i18n&gt;languageAndRegionTit}" labelFor="languageSelectionSelect"/><VBox><Text id="languageSelectionInput" text="{/selectedLanguageText}" visible="{= ${/languageList} === null}"/><Select id="languageSelectionSelect" visible="{= ${/languageList} !== null}" items="{/languageList}" selectedKey="{/selectedLanguage}" width="100%" change="._handleSelectChange"><core:Item key="{key}" text="{text}"/></Select></VBox><Label text="{i18n&gt;dateFormatFld}" labelFor="dateFormatCombo"/><VBox><Text id="dateFormatCombo" visible="{= ${/DateFormatList} === null}" text="{/selectedDatePattern}"/><Select id="DateFormatSelectionSelect" visible="{= ${/DateFormatList} !== null}" items="{/DateFormatList}" width="100%" selectedKey="{/selectedDatePattern}"><core:Item key="{value}" text="{description}"/></Select></VBox><Label text="{i18n&gt;timeFormatFld}" labelFor="hoursSegmentedButton"/><VBox><SegmentedButton id="hoursSegmentedButton" visible="{= ${/TimeFormatList} === null}" enabled="false" selectedKey="{/selectedTimeFormat}"><items><SegmentedButtonItem key="12h" text="{i18n&gt;btn12h}"/><SegmentedButtonItem key="24h" text="{i18n&gt;btn24h}"/></items></SegmentedButton><Select id="TimeFormatSelectionSelect" visible="{= ${/TimeFormatList} !== null}" items="{/TimeFormatList}" width="100%" selectedKey="{/selectedTimeFormat}"><core:Item key="{value}" text="{description}"/></Select></VBox><Label text="{i18n&gt;timeZoneFld}" visible="{= ${/isEnableUserProfileSetting}}" labelFor="timeZoneFormat"/><VBox><Select id="TimeZoneSelectionSelect" visible="{= ${/TimeZoneList} !== null}" items="{/TimeZoneList}" width="100%" selectedKey="{/selectedTimeZone}"><core:Item key="{value}" text="{description}"/></Select></VBox><Label text="{i18n&gt;numberFormatFld}" visible="{= ${/isEnableUserProfileSetting}}" labelFor="numberFormat"/><VBox width="100%"><Select id="NumberFormatSelectionSelect" visible="{= ${/NumberFormatList} !== null}" items="{/NumberFormatList}" width="100%" selectedKey="{/selectedNumberFormat}"><core:Item key="{value}" text="{description}"/></Select></VBox></form:SimpleForm><Text text="{i18n&gt;LanguageAndRegionHelpingText}" class="sapUshellFlpSettingsWideDescription" visible="{= ${/languageList} !== null}" width="100%"/></VBox></mvc:View>',
	"sap/ushell/components/shell/Settings/userProfiling/UsageAnalyticsSelector.view.xml":'<mvc:View width="100%" controllerName="sap.ushell.components.shell.Settings.userProfiling.UsageAnalyticsSelector" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"><VBox class="sapUiSmallMarginTop"><CheckBox text="{i18n&gt;allowTracking}" selected="{/isTrackingUsageAnalytics}"/><VBox class="sapUshellFlpSettingsDescriptionBorder"><Text class="sapUshellFlpSettingsDescription" text="{/legalText}"/></VBox></VBox></mvc:View>',
	"sap/ushell/components/shell/Settings/userProfiling/UserProfiling.view.xml":'<mvc:View width="100%" controllerName="sap.ushell.components.shell.Settings.userProfiling.UserProfiling" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc"><VBox id="profilingContent" class="sapUshellUserSettingDetailContent"/></mvc:View>',
	"sap/ushell/components/tiles/action/ActionTile.view.xml":'<View xmlns="sap.ui.core" xmlns:ushell="sap.ushell.ui.tile" controllerName="sap.ushell.components.tiles.action.ActionTile" height="100%" width="100%"><ushell:TileBase id="actionTile" title="{i18n&gt;tile.display.action_chip}" subtitle="{/displayText}" icon="sap-icon://action" press="onPress"/></View>',
	"sap/ushell/components/tiles/action/Configuration.view.xml":'<core:View xmlns="sap.m" xmlns:commons="sap.ui.commons" xmlns:commonsLayout="sap.ui.commons.layout" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" controllerName="sap.ushell.components.tiles.action.Configuration"><MessageStrip type="Warning" enableFormattedText="true" showIcon="true" showCloseButton="false" class="sapUiResponsiveMargin" visible="{= !!${/config/deprecation_text}}" text="{/config/deprecation_text}"/><form:Form id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:layout><form:ResponsiveGridLayout/></form:layout><form:FormContainer id="categoryChipConfiguration" title="{i18n&gt;configuration.category.action_chip_configuration}"><form:FormElement label="{i18n&gt;configuration.semantic_object}"><Input id="semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" value="{/value}" enabled="{/config/editable}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.semantic_action}"><Input id="semantic_actionInput" value="{/config/semantic_action}" maxLength="50" liveChange="onConfigurationInputChange" enabled="{/config/editable}" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" width="100%" tooltip="{i18n&gt;configuration.semantic_action.tooltip}"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryTargetApplication" title="{i18n&gt;configuration.category.target_application}"><form:FormElement id="targetType" label="{i18n&gt;configuration.target_applicationType}"><ComboBox id="targetTypeInput" selectedKey="{/config/navigation_provider}" enabled="{/config/editable}" selectionChange="onApplicationTypeChange"/></form:FormElement><form:FormElement id="application_description" label="{i18n&gt;configuration.target_application.description}"><Input id="target_application_descriptionInput" value="{/config/display_title_text}" liveChange="onConfigurationInputChange" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application.description.tooltip}"/></form:FormElement><form:FormElement id="application_url" label="{i18n&gt;configuration.target_application.url}"><Input id="target_application_urlInput" value="{/config/url}" enabled="{/config/editable}" maxLength="512" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.url.tooltip}"/></form:FormElement><form:FormElement id="application_component" label="{i18n&gt;configuration.target_application.component}"><Input id="target_application_componentInput" value="{/config/ui5_component}" enabled="{/config/editable}" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.component.tooltip}"/></form:FormElement><form:FormElement id="navigation_provider_role" label="{i18n&gt;configuration.navigation_provider_role}"><Input id="navigation_provider_roleInput" valueHelpRequest="onRoleValueHelpRequest" showValueHelp="true" showTableSuggestionValueHelp="true" enabled="{/config/editable}" showSuggestion="true" value="{/value}" width="100%" maxLength="10" class="sapUshellTargetMappingToUpperCase" tooltip="{i18n&gt;configuration.navigation_provider_role.tooltip}" liveChange="onConfigurationInputChange"><suggestionColumns><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_role}"/></Column><Column hAlign="Begin" popinDisplay="Inline" demandPopin="true"><Label text="{i18n&gt;configuration.navigation_provider_instance}"/></Column></suggestionColumns></Input></form:FormElement><form:FormElement id="navigation_provider_instance" label="{i18n&gt;configuration.navigation_provider_instance}"><Input id="navigation_provider_instanceInput" value="{/value}" width="100%" maxLength="32" valueHelpRequest="onInstanceValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="instanceSuggest" tooltip="{i18n&gt;configuration.navigation_provider_instance.tooltip}" liveChange="onConfigurationInputChange" class="sapUshellTargetMappingToUpperCase"/></form:FormElement><form:FormElement id="target_application_alias" label="{i18n&gt;configuration.target_application_alias}"><Input id="target_application_aliasInput" value="{/value}" width="100%" valueHelpRequest="onAliasValueHelpRequest" enabled="{/config/editable}" showValueHelp="true" showSuggestion="true" suggest="aliasSuggest" tooltip="{i18n&gt;configuration.target_application_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_application_id" label="{i18n&gt;configuration.target_application_id}"><Input id="target_application_idInput" value="{/config/target_application_id}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_application_id.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_transaction" label="{i18n&gt;configuration.target_transaction}"><Input id="target_transactionInput" value="{/config/transaction/code}" width="100%" maxLength="20" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_transaction.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_wcf_application_id" label="{i18n&gt;configuration.target_wcf.application_id}"><Input id="target_wcf_application_idInput" value="{/config/wcf/application_id}" width="100%" maxLength="30" enabled="{/config/editable}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_application" label="{i18n&gt;configuration.target_web_dynpro.application}"><Input id="target_web_dynpro_applicationInput" value="{/config/web_dynpro/application}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_web_dynpro_configuration" label="{i18n&gt;configuration.target_web_dynpro.configuration}"><Input id="target_web_dynpro_configurationInput" value="{/config/web_dynpro/configuration}" width="100%" maxLength="32" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_web_dynpro_application.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="target_system_alias" label="{i18n&gt;configuration.target_system_alias}"><Input id="target_system_aliasInput" value="{/config/target_system_alias}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_system_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="urlt_application_component" label="{i18n&gt;configuration.target_application.component}"><Input id="urlt_application_componentInput" value="{/config/url_template/parameters/ui5ComponentName}" enabled="{/config/editable}" liveChange="onConfigurationInputChange" width="100%" tooltip="{i18n&gt;configuration.target_application.component.tooltip}"/></form:FormElement><form:FormElement id="target_urlt_system_alias" label="{i18n&gt;configuration.target_system_alias}"><Input id="target_urlt_system_aliasInput" value="{/config/url_template/parameters/systemAlias}" width="100%" maxLength="30" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.target_system_alias.tooltip}" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement id="application_type_deprecated"><MessageStrip text="{i18n&gt;applicationTypeDeprecated}" type="Warning" showIcon="true"/></form:FormElement></form:FormContainer><form:FormContainer id="categoryGeneral" title="{i18n&gt;configuration.category.general}"><form:layoutData><layout:GridData span="L12 M12 S12"/></form:layoutData><form:FormElement label="{i18n&gt;configuration.display_info_text}"><Input id="additionalInfo" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" liveChange="onConfigurationInputChange"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.form_factor}" tooltip="{i18n&gt;configuration.form_factor.tooltip}"><CheckBox id="desktopCB" text="{i18n&gt;configuration.form_factor_desktop}" select="onFormFactorChange" selected="{/config/desktopChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="tabletCB" text="{i18n&gt;configuration.form_factor_tablet}" select="onFormFactorChange" selected="{/config/tabletChecked}" enabled="{/config/manualFormFactor}"/><CheckBox id="phoneCB" text="{i18n&gt;configuration.form_factor_phone}" select="onFormFactorChange" selected="{/config/phoneChecked}" enabled="{/config/manualFormFactor}"/></form:FormElement><form:FormElement label="{i18n&gt;configuration.signature.table.title}"><VBox><table:Table id="mappingSignatureTable" rows="{/config/rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="5" enableColumnReordering="false" rowHeight="30px"><table:Column id="nameCol" width="82px"><Label text="{i18n&gt;configuration.signature.table.name}"/><table:template><commons:TextField value="{name}" editable="{editable}" placeholder="{i18n&gt;configuration.signature.table.nameFieldLbl}" change="checkDuplicateNames"/></table:template></table:Column><table:Column id="mandatoryCol" width="92px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.mandatory}"/><table:template><commons:CheckBox checked="{mandatory}" editable="{editable}" change="handleMandatoryChange"/></table:template></table:Column><table:Column id="valueCol" width="85px"><Label text="{i18n&gt;configuration.signature.table.value}"/><table:template><commons:TextField value="{value}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="isRegExCol" width="162px" hAlign="Center"><Label text="{i18n&gt;configuration.signature.table.isRegEx}"/><table:template><commons:CheckBox checked="{isRegularExpression}" editable="{editable}" enabled="{valEnabled}"/></table:template></table:Column><table:Column id="defValueCol" width="110px"><Label text="{i18n&gt;configuration.signature.table.defaultValue}"/><table:template><commons:TextField value="{defaultValue}" editable="{editable}" enabled="{defValEnabled}"/></table:template></table:Column><table:Column id="renameToCol" width="82px" visible="{= ${/config/navigation_provider} !== \'LPD\' }"><Label text="{i18n&gt;configuration.signature.table.renameTo}" tooltip="{i18n&gt;configuration.signature.table.renameTo.tooltip}"/><table:template><commons:TextField value="{rename_to}" editable="{editable}"/></table:template></table:Column></table:Table><commonsLayout:MatrixLayout><commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutCell><commons:CheckBox id="isUnknownAllowed" text="{i18n&gt;configuration.signature.table.allowUndefined}" enabled="{/config/editable}" checked="{/config/isUnknownAllowed}" width="400px"/></commonsLayout:MatrixLayoutCell></commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutCell hAlign="Right"><commons:Button id="addRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.add}" press="addRow" width="100px"/><commons:Button id="deleteRow" enabled="{/config/editable}" text="{i18n&gt;configuration.signature.table.delete}" press="deleteRow" width="100px"/></commonsLayout:MatrixLayoutCell></commonsLayout:MatrixLayoutRow></commonsLayout:MatrixLayout></VBox></form:FormElement></form:FormContainer></form:Form></core:View>',
	"sap/ushell/components/tiles/applauncher/Configuration.view.xml":'<core:View xmlns="sap.m" xmlns:commons="sap.ui.commons" xmlns:commonsLayout="sap.ui.commons.layout" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" controllerName="sap.ushell.components.tiles.applauncher.Configuration"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false" class="sapUiResponsiveMargin"/><MessageStrip type="Warning" enableFormattedText="true" showIcon="true" showCloseButton="false" class="sapUiResponsiveMargin" visible="{= !!${/config/deprecation_text}}" text="{/config/deprecation_text}"/><form:SimpleForm id="configuration" maxContainerCols="2" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" select="onCheckBoxChange" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" maxLength="50" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><Label/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><commons:TextField value="{menu_title}" editable="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><commons:ComboBox id="targetTypeCB" value="{target_type}" editable="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" editable="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><commons:TextField value="{action}" enabled="{isTargetTypeIntent}" editable="{editable}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" editable="{editable}" valueStateText="{iconValueStateText}" valueState="{iconValueState}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><commonsLayout:MatrixLayout><commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutCell hAlign="End"><commons:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><commons:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></commonsLayout:MatrixLayoutCell></commonsLayout:MatrixLayoutRow></commonsLayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}" class="sapContrastPlus"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/applauncherdynamic/Configuration.view.xml":'<core:View xmlns="sap.m" xmlns:commons="sap.ui.commons" xmlns:commonsLayout="sap.ui.commons.layout" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:layout="sap.ui.layout" xmlns:table="sap.ui.table" controllerName="sap.ushell.components.tiles.applauncherdynamic.Configuration"><MessageStrip id="messageStrip" showIcon="true" showCloseButton="false" visible="false" class="sapUiResponsiveMargin"/><MessageStrip type="Warning" enableFormattedText="true" showIcon="true" showCloseButton="false" class="sapUiResponsiveMargin" visible="{= !!${/config/deprecation_text}}" text="{/config/deprecation_text}"/><form:SimpleForm id="configuration" maxContainerCols="8" minWidth="1024" editable="true"><form:content><core:Title id="categoryCommon" text="{i18n&gt;configuration.category.general}"/><Label text="{i18n&gt;configuration.display_title_text}"/><Input id="titleInput" value="{/config/display_title_text}" width="100%" tooltip="{i18n&gt;configuration.display_title_text.tooltip}" enabled="{/config/editable}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_subtitle_text}"/><Input id="subtitleInput" value="{/config/display_subtitle_text}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_subtitle_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.keywords}"/><Input id="keywordsInput" value="{/config/display_search_keywords}" enabled="{/config/editable}" width="100%" tooltip="{i18n&gt;configuration.keywords.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_icon_url}"/><Input id="iconInput" value="{/config/display_icon_url}" enabled="{/config/editable}" placeholder="sap-icon://inbox" tooltip="{i18n&gt;configuration.display_icon_url.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onIconValueHelpRequest" showValueHelp="true"/><Label text="{i18n&gt;configuration.display_info_text}"/><Input id="infoInput" value="{/config/display_info_text}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_info_text.tooltip}" editable="{/config/isLocaleSuitable}"/><Label text="{i18n&gt;configuration.display_number_unit}"/><Input id="number_unitInput" value="{/config/display_number_unit}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.display_number_unit.tooltip}"/><core:Title id="categoryDynamicData" text="{i18n&gt;configuration.category.dynamic_data}"/><Label text="{i18n&gt;configuration.service_url}"/><Input id="serviceUrlInput" value="{/config/service_url}" width="100%" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.service_url.tooltip}"/><Label text="{i18n&gt;configuration.service_refresh_interval}"/><Input id="refreshInput" value="{/config/service_refresh_interval}" type="Number" enabled="{/config/editable}" placeholder="{i18n&gt;configuration.seconds}" tooltip="{i18n&gt;configuration.seconds.tooltip}"/><core:Title id="categoryNavigation" text="{i18n&gt;configuration.category.navigation}"/><Label text="{i18n&gt;configuration.navigation_use_semantic_object}"/><CheckBox id="useLpdCheckbox" selected="{/config/navigation_use_semantic_object}" select="onCheckBoxChange" tooltip="{i18n&gt;configuration.navigation_use_semantic_object.tooltip}" enabled="{/config/editable}"/><Label text="{i18n&gt;configuration.semantic_object}"/><Input id="navigation_semantic_objectInput" width="100%" tooltip="{i18n&gt;configuration.semantic_object.tooltip}" maxLength="30" liveChange="onConfigurationInputChange" valueHelpRequest="onValueHelpRequest" showValueHelp="true" showSuggestion="true" enabled="{= ${/enabled} &amp;&amp; ${/config/editable}}" value="{/value}"/><Label text="{i18n&gt;configuration.navigation_semantic_action}"/><Input id="navigation_semantic_actionInput" value="{/config/navigation_semantic_action}" width="100%" maxLength="50" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_action.tooltip}" liveChange="onConfigurationInputChange" valueHelpRequest="onActionValueHelpRequest" showValueHelp="true" showSuggestion="true"/><Label text="{i18n&gt;configuration.navigation_semantic_parameters}"/><Input id="navigation_semantic_parametersInput" value="{/config/navigation_semantic_parameters}" width="100%" enabled="{= ${/config/navigation_use_semantic_object} &amp;&amp; ${/config/editable}}" tooltip="{i18n&gt;configuration.navigation_semantic_parameters.tooltip}"/><Label text="{i18n&gt;configuration.navigation_target_url}"/><Input id="targetUrl" value="{/config/navigation_target_url}" type="Url" width="100%" tooltip="{i18n&gt;configuration.navigation_target_url.tooltip}"/><core:Title id="categoryTileActions" text="{i18n&gt;configuration.category.tile_actions}"/><table:Table id="tileActions" rows="{/config/tile_actions_rows}" selectionBehavior="Row" selectionMode="Multi" visibleRowCount="3" enableColumnReordering="false" rowHeight="30px"><table:Column id="menuItem" width="80px" tooltip="{i18n&gt;configuration.tile_actions.table.menu_item_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.menu_item}"/><table:template><commons:TextField value="{menu_title}" enabled="{editable}" valueState="{valueState}"/></table:template></table:Column><table:Column id="targetType" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.target_type_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.target_type}"/><table:template><commons:ComboBox id="targetTypeCB" value="{target_type}" enabled="{editable}" change="handleTargetTypeChange"/></table:template></table:Column><table:Column id="navigationTarget" width="162px" tooltip="{i18n&gt;configuration.tile_actions.table.navigation_target_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.navigation_target}"/><table:template><Input liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionValueHelp" showValueHelp="{isTargetTypeIntent}" showSuggestion="{isTargetTypeIntent}" value="{navigation_target}" enabled="{editable}"/></table:template></table:Column><table:Column id="action" width="85px" tooltip="{i18n&gt;configuration.tile_actions.table.action_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.action}"/><table:template><commons:TextField value="{action}" enabled="{isTargetTypeIntent}"/></table:template></table:Column><table:Column id="icon" width="110px" tooltip="{i18n&gt;configuration.tile_actions.table.icon_tooltip}"><Label text="{i18n&gt;configuration.tile_actions.table.icon}"/><table:template><Input value="{icon}" placeholder="sap-icon://inbox" enabled="{/config/editable}" valueState="{iconValueState}" valueStateText="{iconValueStateText}" liveChange="onConfigurationInputChange" valueHelpRequest="onTileActionIconValueHelp" showValueHelp="true"/></table:template></table:Column></table:Table><Label/><commonsLayout:MatrixLayout><commonsLayout:MatrixLayoutRow><commonsLayout:MatrixLayoutCell hAlign="End"><commons:Button id="addRow" text="{i18n&gt;configuration.tile_actions.table.add}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.add_tooltip}" press="addRow" width="100px"/><commons:Button id="deleteRow" text="{i18n&gt;configuration.tile_actions.table.remove}" enabled="{/config/editable}" tooltip="{i18n&gt;configuration.tile_actions.table.remove_tooltip}" press="deleteRow" width="100px"/></commonsLayout:MatrixLayoutCell></commonsLayout:MatrixLayoutRow></commonsLayout:MatrixLayout></form:content></form:SimpleForm><HBox visible="false"><Dialog id="selectIconDialog" class="sapContrastPlus" leftButton="ok" rightButton="cancel" title="{i18n&gt;configuration.select_icon}"><content><layout:ResponsiveFlowLayout id="icons"/><HBox visible="true"><Button id="ok" enabled="{/config/ok.enabled}" text="{i18n&gt;configuration.ok}"/><Button id="cancel" text="{i18n&gt;configuration.cancel}" press="onSelectIconClose"/></HBox></content></Dialog></HBox></core:View>',
	"sap/ushell/components/tiles/cdm/applauncher/StaticTile.view.xml":'<core:View xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="sap.ushell.components.tiles.cdm.applauncher.StaticTile" height="100%" width="100%"><GenericTile additionalTooltip="{/properties/contentProviderLabel}" frameType="{/properties/frameType}" header="{/properties/title}" mode="{/properties/mode}" sizeBehavior="{/properties/sizeBehavior}" subheader="{/properties/subtitle}" url="{path:\'/properties/targetURL\',formatter:\'._getLeanUrl\'}" wrappingType="{/properties/wrappingType}" press=".onPress"><dependents><TileContent id="standardTileContent" footer="{/properties/info}"/><TileContent id="imageTileContent" footer="{/properties/info}"><ImageContent src="{/properties/icon}"/></TileContent></dependents></GenericTile></core:View>',
	"sap/ushell/components/tiles/cdm/applauncher/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncher","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","tags":{"keywords":[]},"ach":"CA-FE-FLP-COR"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncher","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncher.StaticTile","type":"XML"},"handleValidation":false,"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json":'{"_version":"1.21.0","sap.flp":{"type":"tile","tileSize":"1x1","vizOptions":{"displayFormats":{"supported":["standard","standardWide","compact","flat","flatWide"],"default":"standard"}}},"sap.app":{"id":"sap.ushell.components.tiles.cdm.applauncherdynamic","_version":"1.0.0","type":"component","applicationVersion":{"version":"1.0.0"},"title":"","description":"","tags":{"keywords":[]},"ach":"CA-FLP-FE-COR"},"sap.ui":{"_version":"1.1.0","icons":{"icon":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize","sap_belize_plus"]},"sap.ui5":{"_version":"1.1.0","componentName":"sap.ushell.components.tiles.cdm.applauncherdynamic","dependencies":{"minUI5Version":"1.42","libs":{"sap.m":{}}},"rootView":{"viewName":"sap.ushell.components.tiles.cdm.applauncherdynamic.DynamicTile","type":"JS"},"handleValidation":false}}',
	"sap/ushell/components/visualizationOrganizer/VisualizationOrganizerPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover id="sapUshellVisualizationOrganizerPopover" class="sapContrastPlus" placement="VerticalPreferredBottom" contentHeight="220px" modal="true" titleAlignment="Start" showHeader="true" title="{i18n&gt;VisualizationOrganizer.Title}"><subHeader><HBox class="sapUiTinyMarginBeginEnd sapUiTinyMarginTop"><SearchField id="sapUshellVisualizationOrganizerSearch" tooltip="{i18n&gt;VisualizationOrganizer.SearchField.Tooltip}" search="._onSearch" width="auto"/><ToggleButton id="sapUshellVisualizationOrganizerSelectedPages" icon="sap-icon://multi-select" press="._onSearch" class="sapUiTinyMarginBeginEnd" tooltip="{i18n&gt;VisualizationOrganizer.ToggleButton.Tooltip}"/></HBox></subHeader><content><List id="sapUshellVisualizationOrganizerSpacesList" mode="MultiSelect" items="{path:\'/pages\',sorter:{path:\'\',group:\'.groupBySpace\'},groupHeaderFactory:\'.getGroupHeader\'}" noDataText="{i18n&gt;VisualizationOrganizer.PagesList.NoDataText}" selectionChange=".onSelectionChange"><items><StandardListItem title="{title}" type="Active" selected="{selected}" press=".pagePressed"/></items></List></content><footer><Bar><contentRight><Button id="sapUshellVisualizationOrganizerOKButton" text="{i18n&gt;addBtn}" type="Emphasized" press=".okay"/><Button id="sapUshellVisualizationOrganizerCloseButton" text="{i18n&gt;cancelBtn}" press=".cancel"/></contentRight></Bar></footer></Popover></core:FragmentDefinition>',
	"sap/ushell/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell","type":"library","embeds":["appRuntime/ui5/plugins/rtaAgent","appRuntime/ui5/plugins/rtaShell","appRuntime/ui5/plugins/scriptAgent","components/appfinder","components/homepage","components/pages","components/shell/MenuBar","components/shell/Search","components/shell/Settings/userDefaults","components/tiles/cdm/applauncher","components/tiles/cdm/applauncherdynamic","plugins/appwarmup","plugins/ghostapp","plugins/rta-personalize","plugins/rta","renderers/fiori2/search/searchComponent"],"applicationVersion":{"version":"1.96.0"},"title":"SAP library: sap.ushell","description":"SAP library: sap.ushell","ach":"CA-FLP-FE-UI","resources":"resources.json","offline":true},"sap.ui":{"technology":"UI5","supportedThemes":["base","sap_belize","sap_belize_hcb","sap_belize_hcw","sap_belize_plus","sap_bluecrystal","sap_fiori_3","sap_fiori_3_dark","sap_fiori_3_hcb","sap_fiori_3_hcw","sap_hcb","sap_horizon"]},"sap.ui5":{"dependencies":{"minUI5Version":"1.96","libs":{"sap.f":{"minVersion":"1.96.0","lazy":true},"sap.m":{"minVersion":"1.96.0"},"sap.ui.core":{"minVersion":"1.96.0"},"sap.ui.layout":{"minVersion":"1.96.0","lazy":true},"sap.suite.ui.commons":{"minVersion":"1.96.0","lazy":true},"sap.suite.ui.microchart":{"minVersion":"1.96.0","lazy":true},"sap.ui.comp":{"minVersion":"1.96.0","lazy":true},"sap.ui.export":{"minVersion":"1.96.0","lazy":true},"sap.collaboration":{"minVersion":"@version@","lazy":true},"sap.ui.table":{"minVersion":"1.96.0","lazy":true},"sap.ui.integration":{"minVersion":"1.96.0","lazy":true},"sap.ui.generic.app":{"minVersion":"1.96.0","lazy":true},"sap.esh.search.ui":{"minVersion":"1.96.0","lazy":true}}},"library":{"i18n":false,"content":{"controls":["sap.ushell.components.container.ApplicationContainer","sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.components.shell.Settings.userDefaults.UserDefaultsForm","sap.ushell.components.tiles.sbtilecontent","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItem","sap.ushell.renderers.fiori2.search.controls.CustomSearchResultListItemContent","sap.ushell.renderers.fiori2.search.controls.DivContainer","sap.ushell.renderers.fiori2.search.controls.SearchAdvancedCondition","sap.ushell.renderers.fiori2.search.controls.SearchButton","sap.ushell.renderers.fiori2.search.controls.SearchFacet","sap.ushell.renderers.fiori2.search.controls.SearchFacetBarChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetDialog","sap.ushell.renderers.fiori2.search.controls.SearchFacetFilter","sap.ushell.renderers.fiori2.search.controls.SearchFacetItem","sap.ushell.renderers.fiori2.search.controls.SearchFacetPieChart","sap.ushell.renderers.fiori2.search.controls.SearchFacetTabBar","sap.ushell.renderers.fiori2.search.controls.SearchFieldGroup","sap.ushell.renderers.fiori2.search.controls.SearchFilterBar","sap.ushell.renderers.fiori2.search.controls.SearchInput","sap.ushell.renderers.fiori2.search.controls.SearchLabel","sap.ushell.renderers.fiori2.search.controls.SearchLayout","sap.ushell.renderers.fiori2.search.controls.SearchLink","sap.ushell.renderers.fiori2.search.controls.SearchMultiSelectionControl","sap.ushell.renderers.fiori2.search.controls.SearchNoResultScreen","sap.ushell.renderers.fiori2.search.controls.SearchObjectSuggestionImage","sap.ushell.renderers.fiori2.search.controls.SearchRelatedObjectsToolbar","sap.ushell.renderers.fiori2.search.controls.SearchResultGrid","sap.ushell.renderers.fiori2.search.controls.SearchResultList","sap.ushell.renderers.fiori2.search.controls.SearchResultListContainer","sap.ushell.renderers.fiori2.search.controls.SearchResultListItem","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemDocument","sap.ushell.renderers.fiori2.search.controls.SearchResultListItemNote","sap.ushell.renderers.fiori2.search.controls.SearchResultMap","sap.ushell.renderers.fiori2.search.controls.SearchResultTable","sap.ushell.renderers.fiori2.search.controls.SearchSelect","sap.ushell.renderers.fiori2.search.controls.SearchText","sap.ushell.renderers.fiori2.search.controls.SearchTilesContainer","sap.ushell.renderers.fiori2.search.controls.twitter.SearchTweet","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelp","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpDialog","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpPage","sap.ushell.renderers.fiori2.search.inputhelp.SearchInputHelpWizard","sap.ushell.ui.launchpad.VizInstance","sap.ushell.ui.launchpad.VizInstanceAbap","sap.ushell.ui.launchpad.VizInstanceCdm","sap.ushell.ui.launchpad.VizInstanceLaunchPage","sap.ushell.ui.launchpad.VizInstanceLink","sap.ushell.ui.AppContainer","sap.ushell.ui.ContentNodeSelector","sap.ushell.ui.bookmark.ContentNodeTreeItem","sap.ushell.ui.CustomGroupHeaderListItem","sap.ushell.ui.ShellHeader","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.appfinder.PinButton","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SendAsEmailButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.CatalogEntryContainer","sap.ushell.ui.launchpad.CatalogsContainer","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.GridContainer","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Page","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Section","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.launchpad.section.CompactArea","sap.ushell.ui.shell.FloatingContainer","sap.ushell.ui.shell.NavigationMiniTile","sap.ushell.ui.shell.OverflowListItem","sap.ushell.ui.shell.RightFloatingContainer","sap.ushell.ui.shell.ShellAppTitle","sap.ushell.ui.shell.ShellFloatingAction","sap.ushell.ui.shell.ShellFloatingActions","sap.ushell.ui.shell.ShellHeadItem","sap.ushell.ui.shell.ShellLayout","sap.ushell.ui.shell.ShellNavigationMenu","sap.ushell.ui.shell.ToolArea","sap.ushell.ui.shell.ToolAreaItem","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],"elements":["sap.ushell.ui.launchpad.AccessibilityCustomData"],"types":["sap.ushell.AllMyAppsState","sap.ushell.AppTitleState","sap.ushell.ContentNodeType","sap.ushell.components.container.ApplicationType","sap.ushell.DisplayFormat","sap.ushell.NavigationState","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow","sap.ushell.UI5ComponentType","sap.ushell.VisualizationLoadState","sap.ushell.AppType"],"interfaces":[]}}}}',
	"sap/ushell/plugins/appwarmup/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","id":"sap.ushell.plugins.appwarmup","type":"component","applicationVersion":{"version":"1.0.0"}},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.54.0","libs":{"sap.ui.core":{"minVersion":"1.54.0"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/ghostapp/manifest.json":'{"_version":"1.2.0","sap.app":{"_version":"1.2.0","id":"sap.ushell.plugins.ghostapp","i18n":"i18n/i18n.properties","type":"application","applicationVersion":{"version":"11.7.0-SNAPSHOT"},"title":"Warmup Application","description":"List report app for code warm-up during idle time","tags":{"keywords":[]},"ach":"MM-FIO-IM-SGM","dataSources":{"mainService":{"uri":"/ghostapp-c9f1f0bd-ff78-4660-9a1f-295814f00fe0/","settings":{"localUri":"localService/metadata.xml"}}},"offline":false,"resources":"resources.json","sourceTemplate":{"id":"ui5template.smarttemplate","version":"1.0.0"}},"sap.fiori":{"_version":"1.1.0","registrationIds":["F0000"],"archeType":"analytical"},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"_version":"1.1.0","services":{"ShellUIService":{"factoryName":"sap.ushell.plugins.appwarmup.ShellUIService"}},"resources":{"js":[],"css":[]},"config":{"sapFiori2Adaptation":true},"dependencies":{"minUI5Version":"1.53.0-SNAPSHOT","libs":{"sap.ui.core":{},"sap.m":{"lazy":false},"sap.ui.comp":{"lazy":false},"sap.ui.generic.app":{"minVersion":"1.34.0"},"sap.uxap":{"lazy":false},"sap.suite.ui.generic.template":{}}},"models":{"":{"dataSource":"mainService","preload":true,"type":"sap.ushell.plugins.ghostapp.FakeModel","settings":{"defaultBindingMode":"TwoWay","defaultCountMode":"Inline","tokenHandling":false,"refreshAfterChange":false}}},"extends":{"extensions":{}},"contentDensities":{"compact":true,"cozy":true},"componentName":"sap.ushell.plugins.ghostapp"},"sap.ui.generic.app":{"_version":"1.1.0","settings":{"ghostapp":true},"pages":[{"entitySet":"MaterialMultiStockByDates","component":{"name":"sap.suite.ui.generic.template.ListReport","list":true,"settings":{"smartVariantManagement":true}}}]},"sap.platform.abap":{"_version":"1.1.0","uri":"/sap/bc/ui5_ui5/sap/stock_multimas1"},"sap.platform.hcp":{"_version":"1.1.0","uri":""},"sap.copilot":{"_version":"1.0.0","contextAnalysis":{"allowAddingObjectsFromAppScreenToCollection":false}}}',
	"sap/ushell/plugins/rta-personalize/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"id":"sap.ushell.plugins.rta-personalize","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/plugins/rta/manifest.json":'{"_version":"1.21.0","sap.app":{"_version":"1.1.0","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"},"id":"sap.ushell.plugins.rta","title":"{{APP_TITLE}}","type":"component","applicationVersion":{"version":"1.0.0"},"ach":"CA-UI5-FL-RTA","resources":"resources.json"},"sap.ui":{"_version":"1.1.0","technology":"UI5","supportedThemes":["sap_hcb","sap_bluecrystal"],"deviceTypes":{"desktop":true,"tablet":false,"phone":false}},"sap.ui5":{"_version":"1.1.0","contentDensities":{"compact":true,"cozy":false},"dependencies":{"minUI5Version":"1.30.1","libs":{"sap.ui.core":{"minVersion":"1.30.1"},"sap.m":{"minVersion":"1.30.1"},"sap.ui.dt":{"minVersion":"1.30.1","lazy":true},"sap.ui.rta":{"minVersion":"1.30.1","lazy":true}}},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":["","ar","bg","ca","cs","da","de","el","en","en_US_sappsd","en_US_saptrc","es","et","fi","fr","hi","hr","hu","it","iw","ja","kk","ko","lt","lv","ms","nl","no","pl","pt","ro","ru","sh","sk","sl","sv","th","tr","uk","vi","zh_CN","zh_TW"],"fallbackLocale":"en"}}}},"sap.flp":{"type":"plugin"}}',
	"sap/ushell/renderers/fiori2/HeadEndItemsOverflowPopover.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Popover id="headEndItemsOverflow" placement="Bottom" showHeader="false" showArrow="true" class="sapUshellPopupContainer sapContrastPlus" afterClose=".destroyHeadEndItemsOverflow"><content><List id="headEndItemsOverflowList" class="sapUshellPopoverList" showSeparators="None" items="{path:\'/headEndItems\',filters:{path:\'\',test:\'.isHeadEndItemInOverflow\'},factory:\'.headEndItemsOverflowItemFactory\'}"/></content></Popover></core:FragmentDefinition>',
	"sap/ushell/renderers/fiori2/allMyApps/AllMyApps.view.xml":'<mvc:View controllerName="sap.ushell.renderers.fiori2.allMyApps.AllMyApps" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" height="100%"><SplitApp id="sapUshellAllMyAppsMasterDetail" mode="{= ${/isPhoneWidth} ? \'ShowHideMode\' : \'StretchCompressMode\'}" class="sapUshellAllMyAppsView"><masterPages><Page id="sapUshellAllMyAppsMasterPage" showHeader="false"><content><List id="sapUshellAllMyAppsDataSourcesList" tooltip="{i18n&gt;catalogSelect_tooltip}" rememberSelections="true" items="{allMyAppsModel&gt;/AppsData}" showNoData="false" growingThreshold="100" mode="SingleSelectMaster" itemPress=".handleMasterListItemPress" selectionChange=".handleMasterListItemPress"><StandardListItem title="{allMyAppsModel&gt;title}" type="{parts:[\'allMyAppsModel&gt;type\',\'/allMyAppsMasterLevel\'],formatter:\'.formatListItemType\'}"/></List></content></Page></masterPages><detailPages><Page id="sapUshellAllMyAppsDetailsPage" showHeader="false" enableScrolling="true"><content><Bar id="sapUshellDetailsPageHeaderBar" design="Header"><contentLeft><Label id="sapUshellAllMyAppsDetailsHeaderLabel"/></contentLeft></Bar><ScrollContainer id="allMyAppsScrollContainer" class="sapUshellAllMyAppsDetailsItemContainer" horizontal="false" vertical="true"><content><List id="oItemsContainerlist" items="{allMyAppsModel&gt;apps}"><CustomListItem class="sapUshellAllMyAppsListItem" type="Active" press=".onAppItemClick"><content><VBox><Label text="{allMyAppsModel&gt;title}" class="sapUshellAllMyAppsItemTitle"/><Label text="{allMyAppsModel&gt;subTitle}" visible="{= !!${allMyAppsModel&gt;subTitle}}" class="sapUshellAllMyAppsItemSubTitle"/></VBox></content></CustomListItem></List></content></ScrollContainer><VBox id="sapUshellAllMyAppsCustomPanel" visible="{= !!${allMyAppsModel&gt;numberCustomTiles}}" class="sapUshellAllMyAppsCustomPanel"><Text id="sapUshellAllMyAppsCustomPanelLabel" text="{allMyAppsModel&gt;sCustomLabel}"/><Link id="sapUshellAllMyAppsCustomPanelLink" visible="{allMyAppsModel&gt;/catalogEnabled}" text="{allMyAppsModel&gt;sCustomLink}" press=".handleCustomPanelLinkPress"/></VBox></content></Page><Page id="sapUshellAllMyAppsEmptyDetailsPage" showHeader="false" enableScrolling="false"><content><Label class="sapUshellAllMyAppsEmptyDetailsPageText" text="{i18n&gt;AllMyAppsEmptyText}" textAlign="Center"/></content></Page></detailPages></SplitApp></mvc:View>',
	"sap/ushell/renderers/fiori2/search/searchComponent/manifest.json":'{"_version":"1.21.0","sap.app":{"id":"sap.ushell.renderers.fiori2.search.searchComponent","applicationVersion":{"version":"1.96.0"},"type":"component"},"sap.ui5":{"technology":"UI5","deviceTypes":{"desktop":true,"tablet":true,"phone":true},"dependencies":{"minUI5Version":"1.72","libs":{"sap.m":{},"sap.esh.search.ui":{}}},"contentDensities":{"compact":true,"cozy":true}}}',
	"sap/ushell/ui/ContentNodeSelector.control.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m"><MultiInput id="multiInput" ariaLabelledBy="ContentNodeLabel" valueHelpRequest="._showValueHelp" suggestionRows="{path:\'_internal&gt;/suggestions\',templateShareable:false}" tokenUpdate="._onTokenUpdate" required="true"><suggestionColumns><Column><Label text="{= ${_internal&gt;/isSpaces} ? ${_i18n&gt;contentNodeSelectorPage} : ${_i18n&gt;contentNodeSelectorHomepageGroup}}"/></Column><Column visible="{_internal&gt;/isSpaces}"><Label text="{_i18n&gt;contentNodeSelectorSpace}"/></Column></suggestionColumns><suggestionRows><ColumnListItem><cells><Label text="{_internal&gt;label}"/><Label text="{= ${_internal&gt;spaceTitles}.join(\', \')}" visible="{_internal&gt;/isSpaces}"/></cells></ColumnListItem></suggestionRows></MultiInput></core:FragmentDefinition>',
	"sap/ushell/ui/ContentNodeSelectorValueHelp.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:ushell="sap.ushell.ui"><Dialog title="{= ${_internal&gt;/isSpaces} ? ${_i18n&gt;valueHelpDialogTitlePages} : ${_i18n&gt;valueHelpDialogTitleGroups}}" contentWidth="25rem" stretch="{_device&gt;/system/phone}" horizontalScrolling="false"><subHeader><Toolbar><SearchField id="ContentNodesSearch" search="._onValueHelpSearch" width="100%"/></Toolbar></subHeader><content><Tree id="ContentNodesTree" items="{path:\'_internal&gt;/items\',templateShareable:false}" mode="MultiSelect" includeItemInSelection="true" rememberSelections="true"><items><ushell:ContentNodeTreeItem selectable="{_internal&gt;isContainer}" title="{_internal&gt;label}" selected="{_internal&gt;selected}"/></items></Tree></content><beginButton><Button text="{_i18n&gt;valueHelpDialogButtonAdd}" type="Emphasized" press="._onValueHelpBeginButtonPressed"/></beginButton><endButton><Button text="{_i18n&gt;valueHelpDialogButtonCancel}" press="._onValueHelpEndButtonPressed"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/ui/QuickAccess.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog id="quickAccess" class="sapContrastPlus" title="{i18n&gt;quickAccessDialog_title}" verticalScrolling="false" contentWidth="25rem" draggable="true" resizable="true" stretch="{device&gt;/system/phone}"><buttons><Button id="quickAccessCloseButton" text="{i18n&gt;closeBtn}" press="._closeDialog"/></buttons><content><IconTabBar id="quickAccessIconTabBar" class="sapUshellMeAreaTabBar" stretchContentHeight="true" backgroundDesign="Transparent" expandable="false"><items><IconTabFilter id="recentActivityFilter" text="{i18n&gt;recentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListrecentActivities" showSeparators="None" items="{/recentActivities}" noDataText="{i18n&gt;recentActivitiesNoDataText}" itemPress="._itemPress"><items><StandardListItem class="sapUshellQuickAccessListIcon" type="Active" title="{parts:[{path:\'title\'},{path:\'appType\'}],formatter:\'._titleFormatter\'}" description="{parts:[{path:\'appType\'}],formatter:\'._descriptionFormatter\'}" icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}" iconInset="false" info="{timestamp}"/></items></List></ScrollContainer></content></IconTabFilter><IconTabFilter id="frequentlyUsedFilter" text="{i18n&gt;frequentActivities}"><content><ScrollContainer horizontal="false" vertical="true" height="100%" width="100%"><List id="sapUshellActivityListfrequentActivities" showSeparators="None" items="{/frequentActivities}" noDataText="{i18n&gt;frequentActivitiesNoDataText}" itemPress="._itemPress"><items><StandardListItem class="sapUshellQuickAccessListIcon" type="Active" title="{parts:[{path:\'title\'},{path:\'appType\'}],formatter:\'._titleFormatter\'}" description="{parts:[{path:\'appType\'}],formatter:\'._descriptionFormatter\'}" icon="{= ${icon} ? ${icon} : \'sap-icon://header\'}" iconInset="false"/></items></List></ScrollContainer></content></IconTabFilter></items></IconTabBar></content></Dialog></core:FragmentDefinition>',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui" xmlns:core="sap.ui.core" xmlns:shell="sap.ushell.ui.shell"><ShellHeader id="shell-header" showLogo="{/showLogo}" visible="{/headerVisible}" homeUri="{/homeUri}" headItems="{path:\'/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}" centralAreaElement="{/centralAreaElement}" title="{/title}"><appTitle><shell:ShellAppTitle id="shellAppTitle" text="{/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core" xmlns:ui="sap.ushell.ui"><ShellLayout id="shell" floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" enableCanvasShapes="{/enableBackGroundShapes}"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><core:ComponentContainer id="menuBarComponentContainer" async="true"/><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
	"sap/ushell/ui/bookmark/SaveOnPage.view.xml":'<View xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:launchpad="sap.ushell.ui.launchpad" controllerName="sap.ushell.ui.bookmark.SaveOnPage"><Label id="previewLbl" text="{i18n&gt;previewFld}" visible="{/showPreview}" labelFor="saveAsTileHBox"/><FlexBox id="saveAsTileHBox" class="sapUshellShellBG sapUshellBookmarkFormPreviewBoxBottomMargin sapUshellSaveAsTileHBox" alignItems="Center" justifyContent="Center" renderType="Bare" visible="{/showPreview}"><items><core:HTML id="previewBackgroundElement" content="&lt;div class=&quot;sapUshellShellBG sapContrastPlus sapUiStrongBackgroundColor&quot;&gt;&lt;/div&gt;"/><launchpad:Tile class="sapUshellBookmarkFormPreviewTileMargin" long="false" afterRendering=".removeFocusFromTile"><launchpad:tileViews><GenericTile header="{/title}" subheader="{/subtitle}" size="Auto"><TileContent size="Auto" footer="{/info}" unit="{= ${/serviceUrl} ? ${/numberUnit} : \'\'}"><NumericContent icon="{/icon}" value="{= ${/serviceUrl} ? ${/numberValue} : \' \' }" width="100%" truncateValueTo="5" withMargin="false"/></TileContent></GenericTile></launchpad:tileViews></launchpad:Tile></items></FlexBox><Label id="titleLbl" text="{i18n&gt;titleFld}" labelFor="bookmarkTitleInput"/><Input id="bookmarkTitleInput" required="true" class="sapUshellInputField" ariaLabelledBy="titleLbl" placeholder="{i18n&gt;bookmarkDialogoTitle_tooltip}" value="{/title}"/><Label id="subtitleLbl" text="{i18n&gt;subtitleFld}" labelFor="bookmarkSubTitleInput"/><Input id="bookmarkSubTitleInput" class="sapUshellInputField" ariaLabelledBy="subtitleLbl" placeholder="{i18n&gt;bookmarkDialogoSubTitle_tooltip}" value="{/subtitle}"/><Label id="infoLbl" text="{i18n&gt;tileSettingsDialog_informationField}" labelFor="bookmarkInfoInput"/><Input id="bookmarkInfoInput" class="sapUshellInputField" ariaLabelledBy="infoLbl" placeholder="{i18n&gt;bookmarkDialogoDescription_tooltip}" value="{/info}" visible="{/showInfo}"/><Label id="pageLbl" text="{i18n&gt;PagesSelection_label}" visible="{/showPageSelection}" labelFor="pageSelect"/><MultiComboBox id="pageSelect" required="true" ariaLabelledBy="pageLbl" busy="{= !${/pages}}" visible="{parts:[\'/showPageSelection\',\'/pages\'],formatter:\'.loadPagesIntoModel\'}" valueState="{= ${/cannotLoadPages}? \'Error\': undefined}" valueStateText="{= ${/cannotLoadPages}? ${i18n&gt;SaveOnPage.CannotLoadPages}: \'\'}" items="{path:\'/pages\',sorter:{path:\'\',group:\'.groupBySpace\',comparator:\'.sortPages\'}}"><core:Item key="{id}" text="{title}"/></MultiComboBox></View>',
	"sap/ushell/ui/footerbar/AboutDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form"><Dialog id="aboutDialog" title="{i18n&gt;about}" contentWidth="40rem" horizontalScrolling="false" beforeOpen=".onBeforeOpen" class="sapContrastPlus" afterClose=".onAfterClose"><content><form:SimpleForm id="aboutDialogApplicationForm" editable="false" layout="ColumnLayout" title="{i18n&gt;aboutCategoryApplication}" visible="{path:\'AppInfo&gt;/\',formatter:\'.isFormVisible\'}" columnsM="{path:\'AppInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsL="{path:\'AppInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsXL="{path:\'AppInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" labelSpanM="12" labelSpanL="12" labelSpanXL="12"><Label id="appInfoAppTitleLabel" visible="{= !!${AppInfo&gt;/appTitle/label}}" text="{AppInfo&gt;/appTitle/label}"/><Text id="appInfoAppTitleText" visible="{= !!${AppInfo&gt;/appTitle/label}}" text="{AppInfo&gt;/appTitle/text}"/><Label id="appInfoAppIdLabel" visible="{= !!${AppInfo&gt;/appId/label}}" text="{AppInfo&gt;/appId/label}"/><Text id="appInfoAppIdText" visible="{= !!${AppInfo&gt;/appId/label}}" text="{AppInfo&gt;/appId/text}"/><Label id="appInfoAppVersionLabel" visible="{= !!${AppInfo&gt;/appVersion/label}}" text="{AppInfo&gt;/appVersion/label}"/><Text id="appInfoAppVersionText" visible="{= !!${AppInfo&gt;/appVersion/label}}" text="{AppInfo&gt;/appVersion/text}"/><Label id="appInfoAppSupportInfoLabel" visible="{= !!${AppInfo&gt;/appSupportInfo/label}}" text="{AppInfo&gt;/appSupportInfo/label}"/><Text id="appInfoAppSupportInfoText" visible="{= !!${AppInfo&gt;/appSupportInfo/label}}" text="{AppInfo&gt;/appSupportInfo/text}"/><Label id="appInfoTechnicalAppComponentIdLabel" visible="{= !!${AppInfo&gt;/technicalAppComponentId/label}}" text="{AppInfo&gt;/technicalAppComponentId/label}"/><Text id="appInfoTechnicalAppComponentIdText" visible="{= !!${AppInfo&gt;/technicalAppComponentId/label}}" text="{AppInfo&gt;/technicalAppComponentId/text}"/><Label id="appInfoAppFrameworkIdLabel" visible="{= !!${AppInfo&gt;/appFrameworkId/label}}" text="{AppInfo&gt;/appFrameworkId/label}"/><Text id="appInfoAppFrameworkIdText" visible="{= !!${AppInfo&gt;/appFrameworkId/label}}" text="{AppInfo&gt;/appFrameworkId/text}"/><Label id="appInfoAppFrameworkVersionLabel" visible="{= !!${AppInfo&gt;/appFrameworkVersion/label}}" text="{AppInfo&gt;/appFrameworkVersion/label}"/><Text id="appInfoAppFrameworkVersionText" visible="{= !!${AppInfo&gt;/appFrameworkVersion/label}}" text="{AppInfo&gt;/appFrameworkVersion/text}"/><Label id="appInfoContentProviderLabel" visible="{= !!${AppInfo&gt;/contentProviderLabel/label}}" text="{AppInfo&gt;/contentProviderLabel/label}"/><Text id="appInfoContentProviderText" visible="{= !!${AppInfo&gt;/contentProviderLabel/label}}" text="{AppInfo&gt;/contentProviderLabel/text}"/></form:SimpleForm><form:SimpleForm id="aboutDialogSystemForm" title="{i18n&gt;aboutCategorySystem}" editable="false" layout="ColumnLayout" visible="{path:\'SysInfo&gt;/\',formatter:\'.isFormVisible\'}" columnsM="{path:\'SysInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsL="{path:\'SysInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsXL="{path:\'SysInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" labelSpanM="12" labelSpanL="12" labelSpanXL="12"><Label id="sysInfoProductNameLabel" visible="{= !!${SysInfo&gt;/productName/label}}" text="{SysInfo&gt;/productName/label}"/><Text id="sysInfoProductNameText" visible="{= !!${SysInfo&gt;/productName/label}}" text="{SysInfo&gt;/productName/text}"/><Label id="sysInfoProductVersionLabel" visible="{= !!${SysInfo&gt;/productVersion/label}}" text="{SysInfo&gt;/productVersion/label}"/><Text id="sysInfoProductVersionText" visible="{= !!${SysInfo&gt;/productVersion/label}}" text="{SysInfo&gt;/productVersion/text}"/><Label id="sysInfoSystemNameLabel" visible="{= !!${SysInfo&gt;/systemName/label}}" text="{SysInfo&gt;/systemName/label}"/><Text id="sysInfoSystemNameText" visible="{= !!${SysInfo&gt;/systemName/label}}" text="{SysInfo&gt;/systemName/text}"/><Label id="sysInfoSystemRoleLabel" visible="{= !!${SysInfo&gt;/systemRole/label}}" text="{SysInfo&gt;/systemRole/label}"/><Text id="sysInfoSystemRoleText" visible="{= !!${SysInfo&gt;/systemRole/label}}" text="{SysInfo&gt;/systemRole/text}"/><Label id="sysInfoTenantRoleLabel" visible="{= !!${SysInfo&gt;/tenantRole/label}}" text="{SysInfo&gt;/tenantRole/label}"/><Text id="sysInfoTenantRoleText" visible="{= !!${SysInfo&gt;/tenantRole/label}}" text="{SysInfo&gt;/tenantRole/text}"/></form:SimpleForm><form:SimpleForm id="aboutDialogUserForm" title="{i18n&gt;aboutCategoryUser}" editable="false" layout="ColumnLayout" visible="{path:\'UserEnvInfo&gt;/\',formatter:\'.isFormVisible\'}" columnsM="{path:\'UserEnvInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsL="{path:\'UserEnvInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" columnsXL="{path:\'UserEnvInfo&gt;/\',formatter:\'.calculateNumberOfColumns\'}" labelSpanM="12" labelSpanL="12" labelSpanXL="12"><Label id="userEnvInfoDeviceTypeLabel" visible="{= !!${UserEnvInfo&gt;/deviceType/label}}" text="{UserEnvInfo&gt;/deviceType/label}"/><Text id="userEnvInfoDeviceTypeText" visible="{= !!${UserEnvInfo&gt;/deviceType/label}}" text="{UserEnvInfo&gt;/deviceType/text}"/><Label id="userEnvInfoActiveThemeLabel" visible="{= !!${UserEnvInfo&gt;/activeTheme/label}}" text="{UserEnvInfo&gt;/activeTheme/label}"/><Text id="userEnvInfoActiveThemeText" visible="{= !!${UserEnvInfo&gt;/activeTheme/label}}" text="{UserEnvInfo&gt;/activeTheme/text}"/><Label id="userEnvInfoOptimizedForTouchLabel" visible="{= !!${UserEnvInfo&gt;/optimizedForTouch/label}}" text="{UserEnvInfo&gt;/optimizedForTouch/label}"/><Text id="userEnvInfoOptimizedForTouchText" visible="{= !!${UserEnvInfo&gt;/optimizedForTouch/label}}" text="{UserEnvInfo&gt;/optimizedForTouch/text}"/><Label id="userEnvInfoTouchSupportedLabel" visible="{= !!${UserEnvInfo&gt;/touchSupported/label}}" text="{UserEnvInfo&gt;/touchSupported/label}"/><Text id="userEnvInfoTouchSupportedText" visible="{= !!${UserEnvInfo&gt;/touchSupported/label}}" text="{UserEnvInfo&gt;/touchSupported/text}"/><Label id="userEnvInfoUserAgentFldLabel" visible="{= !!${UserEnvInfo&gt;/userAgentFld/label}}" text="{UserEnvInfo&gt;/userAgentFld/label}"/><Text id="userEnvInfoUserAgentFldText" visible="{= !!${UserEnvInfo&gt;/userAgentFld/label}}" text="{UserEnvInfo&gt;/userAgentFld/text}"/></form:SimpleForm></content><beginButton><Button id="aboutDialogCloseButton" text="{i18n&gt;okBtn}" type="Emphasized" press=".onClose"/></beginButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/ui/launchpad/FailedTileDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:formLayout="sap.ui.layout.form"><Dialog id="failedTileDialog" title="{i18n&gt;cannotLoadTile}" type="Message" state="Error" contentWidth="480px" class="sapUiNoContentPadding"><content><VBox id="vBox" class="sapUiSmallMargin"><Text id="failedMessageText" text="{i18n&gt;FailedTileDialog.Message.Text}"/><Link id="showDetailsLink" text="{i18n&gt;FailedTileDialog.ShowDetails.Text}" visible="{= !${showDetails}}" press=".onShowDetails" class="sapUiSmallMarginTop"/></VBox><formLayout:SimpleForm id="simpleForm" visible="{showDetails}" layout="ResponsiveGridLayout" editable="false"><formLayout:content><Label id="groupIdLabel" visible="{= !!${groupId}}" text="{i18n&gt;FailedTileDialog.groupId.Label}"/><Text id="groupId" visible="{= !!${groupId}}" text="{groupId}"/><Label id="chipTitleLabel" visible="{= !!${chipTitle}}" text="{i18n&gt;FailedTileDialog.chipTitle.Label}"/><Text id="chipTitle" visible="{= !!${chipTitle}}" text="{chipTitle}"/><Label id="chipDescriptionLabel" visible="{= !!${chipDescription}}" text="{i18n&gt;FailedTileDialog.chipDescription.Label}"/><Text id="chipDescription" visible="{= !!${chipDescription}}" text="{chipDescription}"/><Label id="chipInstanceIdLabel" visible="{= !!${chipInstanceId}}" text="{i18n&gt;FailedTileDialog.chipInstanceId.Label}"/><Text id="chipInstanceId" visible="{= !!${chipInstanceId}}" text="{chipInstanceId}"/><Label id="chipIdLabel" visible="{= !!${chipId}}" text="{i18n&gt;FailedTileDialog.chipId.Label}"/><Text id="chipId" visible="{= !!${chipId}}" text="{chipId}"/><Label id="catalogIdLabel" visible="{= !!${catalogId}}" text="{i18n&gt;FailedTileDialog.catalogId.Label}"/><Text id="catalogId" visible="{= !!${catalogId}}" text="{catalogId}"/><Label id="completelyLoadedLabel" visible="{= typeof ${completelyLoaded} === \'boolean\'}" text="{i18n&gt;FailedTileDialog.completelyLoaded.Label}"/><Text id="completelyLoaded" visible="{= typeof ${completelyLoaded} === \'boolean\'}" text="{completelyLoaded}"/><Label id="debugInfoLabel" visible="{= !!${debugInfo}}" text="{i18n&gt;FailedTileDialog.debugInfo.Label}"/><Text id="debugInfo" visible="{= !!${debugInfo}}" text="{debugInfo}"/></formLayout:content></formLayout:SimpleForm></content><endButton><Button id="closeButton" text="{i18n&gt;closeBtn}" press=".onClose"/></endButton></Dialog></core:FragmentDefinition>',
	"sap/ushell/ui/launchpad/Section.control.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:dnd="sap.ui.core.dnd" xmlns:f="sap.f" xmlns:fdnd="sap.f.dnd" xmlns:section="sap.ushell.ui.launchpad.section" core:require="{ushellLibrary:\'sap/ushell/library\'}"><VBox id="content" class="sapUshellSection"><items><Title id="title" class="sapUshellSectionTitle sapContrastPlus" text="{$this&gt;title}" level="H3" visible="{= !${$this&gt;editable} &amp;&amp; ${$this&gt;showSection}}"/><OverflowToolbar id="header" class="sapUshellSectionHeader" visible="{$this&gt;editable}"><Text id="titleLabel" text="{$this&gt;title}" visible="{= ${$this&gt;editable} &amp;&amp; ${$this&gt;default}}"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Text><Label id="label" text="{$this.i18n&gt;Section.Label.Title}" labelFor="title-edit" visible="{= ${$this&gt;editable} &amp;&amp; !${$this&gt;default}}"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Label><Input id="title-edit" value="{$this&gt;title}" editable="{= !${$this&gt;default}}" visible="{= !${$this&gt;default}}" placeholder="{$this.i18n&gt;Section.TitlePlaceholder}" valueLiveUpdate="true" maxLength="100" change=".fireTitleChange"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow" shrinkable="true" minWidth="10rem" maxWidth="40rem"/></layoutData></Input><ToolbarSpacer/><Button id="addVisualization" text="{$this.i18n&gt;Section.Button.AddVisualization}" type="Transparent" press=".fireAdd" visible="{= ${$this&gt;enableAddButton} &amp;&amp; !${$this&gt;default}}"/><Button id="showHide" text="{= ${$this&gt;showSection} ? ${$this.i18n&gt;Section.Button.Hide} : ${$this.i18n&gt;Section.Button.Show}}" type="Transparent" press="._showHidePressed(!${$this&gt;showSection})" visible="{= ${$this&gt;enableShowHideButton} &amp;&amp; !${$this&gt;default}}"/><Button id="reset" text="{$this.i18n&gt;Section.Button.Reset}" type="Transparent" press=".fireReset" visible="{= ${$this&gt;enableResetButton} &amp;&amp; !${$this&gt;default}}"/><Button id="delete" text="{$this.i18n&gt;Section.Button.Delete}" type="Transparent" press=".fireDelete" visible="{= ${$this&gt;enableDeleteButton} &amp;&amp; !${$this&gt;default}}"/></OverflowToolbar><Text id="noVisualizationsText" class="sapUshellSectionNoVisualizationsText" text="{$this&gt;noVisualizationsText}" textAlign="Center" visible="{= ${$this&gt;editable} &amp;&amp; ${$this&gt;showNoVisualizationsText}}"/><f:GridContainer id="defaultArea" containerQuery="{$this&gt;enableGridContainerQuery}" minHeight="0" visible="{= ${$this&gt;editable} || ${$this&gt;showSection} }"><f:customData><core:CustomData key="default" value="{$this&gt;default}"/><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Standard}"/></f:customData><f:layout><f:GridContainerSettings rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layout><f:layoutXS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="4.375rem" columnSize="4.375rem" gap="0.5rem"/></f:layoutXS><f:layoutS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.475rem"/></f:layoutS><f:layoutM><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 6 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutM><f:layoutL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 12 : 10 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutL><f:layoutXL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 16 : 14 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutXL><f:dragDropConfig><dnd:DragInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="Section" sourceAggregation="items"/><fdnd:GridDropInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="Section" dropLayout="Horizontal" dropPosition="Between" targetAggregation="items" dropIndicatorSize="._getDefaultDropIndicatorSize" dragEnter="._onDragEnter" drop="._reorderVisualizations"/></f:dragDropConfig></f:GridContainer><f:GridContainer id="flatArea" containerQuery="{$this&gt;enableGridContainerQuery}" minHeight="0" visible="{= ${$this&gt;editable} || ${$this&gt;showSection} }"><f:customData><core:CustomData key="default" value="{$this&gt;default}"/><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Flat}"/></f:customData><f:layout><f:GridContainerSettings rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layout><f:layoutXS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="4.375rem" columnSize="4.375rem" gap="0.5rem"/></f:layoutXS><f:layoutS><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 4 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutS><f:layoutM><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? 6 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutM><f:layoutL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 12 : 10 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutL><f:layoutXL><f:GridContainerSettings columns="{= ${$this&gt;enableGridBreakpoints} ? ${$this&gt;sizeBehavior} === \'Small\' ? 16 : 14 : 0 }" rowSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" columnSize="{= ${$this&gt;sizeBehavior} === \'Small\' ? \'4.375rem\' : \'5.25rem\' }" gap="0.5rem"/></f:layoutXL><f:dragDropConfig><dnd:DragInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="{= ${$this&gt;_duringDrag} ? \'Section\' : \'FlatArea\'}" sourceAggregation="items"/><fdnd:GridDropInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="{= ${$this&gt;_duringDrag} ? \'Section\' : \'FlatArea\'}" dropLayout="Horizontal" dropPosition="Between" targetAggregation="items" dropIndicatorSize="._getFlatDropIndicatorSize" dragEnter="._onDragEnter" drop="._reorderVisualizations"/></f:dragDropConfig></f:GridContainer><section:CompactArea id="compactArea" visible="{= ${$this&gt;editable} || ${$this&gt;showSection} }" itemDrop="._reorderVisualizations" enableLinkReordering="{$this&gt;enableVisualizationReordering}"><section:customData><core:CustomData key="default" value="{$this&gt;default}"/><core:CustomData key="area" value="{= ushellLibrary.DisplayFormat.Compact}"/></section:customData><section:dragDropConfig><dnd:DragInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="{= ${$this&gt;_duringDrag} ? \'Section\' : \'CompactArea\'}" sourceAggregation="items"/><dnd:DropInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="{= ${$this&gt;_duringDrag} ? \'Section\' : \'CompactArea\'}" dropLayout="Horizontal" dropPosition="Between" targetAggregation="items" dragEnter="._onDragEnter" drop="._reorderVisualizations"/><dnd:DropInfo enabled="{$this&gt;enableVisualizationReordering}" groupName="{= ${$this&gt;_duringDrag} ? \'Section\' : \'CompactArea\'}" dragEnter="._onDragEnter" drop="._reorderVisualizations"/></section:dragDropConfig></section:CompactArea></items><customData><core:CustomData key="help-id" value="{= ${$this&gt;default} ? \'recently-added-apps\' : ${$this&gt;dataHelpId}}" writeToDom="{= ${$this&gt;default} || !!${$this&gt;dataHelpId}}"/></customData></VBox></core:FragmentDefinition>',
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
	"sap/ushell/EventHub.js":function(){(function(){"use strict";var d=(!window.sap||!sap.ui||!sap.ui.define)?function(v,c){return c();}:sap.ui.define;return d([],function(){var _={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c(),dispatchTimeoutIds:new Set()};function c(){return{nextKey:0,objectToKey:new WeakMap(),keyToObject:{}};}function l(M,D,C){var L=sap.ui.require("sap/base/Log");if(L){L.error(M,D,"sap.ushell.EventHub");return;}}function a(o){var M="An exception was raised while executing a registered callback on event '"+o.eventName+"'",D="Data passed to the event were: '"+o.eventData+"'";if(o.error.stack){D+=" Error details: "+o.error.stack;}l(M,D,o.fnCausedBy);}function s(o,C,D){var R;try{R=C(D);}catch(v){a({eventName:o,eventData:D,fnCausedBy:C,error:v});}return R;}function J(H){if(typeof arguments[2]==="function"){return y(H,arguments[2]);}return arguments[2];}function b(H){if(typeof arguments[2]==="string"&&arguments[2].indexOf("<function")===0){return z(H,arguments[2]);}return arguments[2];}function e(H,D,P){if(typeof D==="object"||typeof D==="function"){try{var S=[D,J.bind(null,H)];if(P){S.push(3);}return JSON.stringify.apply(JSON,S);}catch(o){l(""+o,o.stack,e);}}return D;}function f(H,D){try{return JSON.parse(D,b.bind(null,H));}catch(o){return D;}}function g(H,o,S){if(!H.subscribers[o]){H.subscribers[o]=[];}H.subscribers[o].push(S);}function u(H,o,v){H.subscribers[o]=(H.subscribers[o]||[]).map(function(S){return S.filter(function(L){return L.fn!==v;});}).filter(function(G){return G.length>0;});}function h(){var D,o=new Promise(function(R){D=R;}),v={dispatching:o,cancelled:false,cancel:function(){v.cancelled=true;},complete:function(){D();}};return v;}function i(H,o){if(!H.subscribers.hasOwnProperty(o)){return null;}var D=h(),S=H.subscribers[o],G=S.map(function(v){return j(H,o,v,D,0);});Promise.all(G).then(D.complete,D.complete);return D;}function j(H,o,S,D,v){var O=S.length,C=S.slice(v);return C.reduce(function(P,F){return P.then(function(G){if(D.cancelled){if(G){u(H,o,F.fn);}return G;}return n(H,o,F,S).then(function(I){if(I){D.cancelled=true;}return I;});});},Promise.resolve(false)).then(function(F){if(!F&&O<S.length){return j(H,o,S,D,O);}return F;});}function n(H,o,S,v){return new Promise(function(R){var D=f(H,H.pendingEvents[o]);var C=setTimeout(function(){H.dispatchTimeoutIds.delete(C);if(S.called&&v.offed){R(false);return;}S.called=true;var O=v.offed;s(o,S.fn,D);var F=v.offed;if(F){u(H,o,S.fn);}R(!O&&F);},0);H.dispatchTimeoutIds.add(C);});}function k(H,o,S){return function(){S.forEach(function(L){if(L.called){u(H,o,L.fn);}});S.offed=true;return{off:k(H,o,[])};};}function m(H,o,S){return function(C){var v={fn:C,called:false};S.push(v);if(H.pendingEvents.hasOwnProperty(o)){var D=H.dispatchOperations[o];if(!D){n(H,o,v,S);}else{D.dispatching.then(function(){if(!v.called){n(H,o,v,S);}});}}return{do:m(H,o,S),off:k(H,o,S)};};}function p(H,o){var S=[];g(H,o,S);return{do:m(H,o,S),off:k(H,o,S)};}function q(H,o){var D=p(H,o);D.off();return D;}function r(H,o,D,F){var S=e(H,D);if(!F&&H.pendingEvents.hasOwnProperty(o)&&H.pendingEvents[o]===S){return this;}H.pendingEvents[o]=S;var v=H.dispatchOperations[o];if(v){v.cancel();}var N=i(H,o);H.dispatchOperations[o]=N;return this;}function t(H,o){return f(H,H.pendingEvents[o]);}function w(){var o=Array.prototype.slice.call(arguments);o.shift();var C=0,O=new Array(o.length).join(",").split(",").map(function(){return 1;}),v=[],D={do:function(F){o.forEach(function(G,I){G.do(function(I,V){v[I]=V;C+=O[I];O[I]=0;if(C===o.length){F.apply(null,v);}}.bind(null,I));});return{off:D.off};},off:function(){var F=o.reduce(function(F,G){return G.off();},function(){});return{off:F};}};return D;}function x(H,o){var D=H.dispatchOperations[o];return D?D.dispatching:Promise.resolve();}function y(H,o){if(H.store.objectToKey.has(o)){return H.store.objectToKey.get(o);}H.store.nextKey++;var K="<"+typeof o+">#"+H.store.nextKey;H.store.keyToObject[K]=o;H.store.objectToKey.set(o,K);return K;}function z(H,K){return H.store.keyToObject[K];}function A(H){var o={};o.emit=r.bind(o,H);o.on=p.bind(null,H);o.once=q.bind(null,H);o.last=t.bind(null,H);o.join=w.bind(null,H);o.wait=x.bind(null,H);o._reset=function(H){H.pendingEvents={};H.subscribers={};H.dispatchOperations={};H.store=c();H.dispatchTimeoutIds.forEach(clearTimeout);H.dispatchTimeoutIds=new Set();}.bind(null,H);return o;}function B(C){var D={pendingEvents:{},subscribers:{},dispatchOperations:{},store:c(),dispatchTimeoutIds:new Set()},F=A(D),G=f(D,e(D,C));function H(o){var v=o.charAt(0);if(v.match(/[a-zA-Z0-9]/)){throw new Error("Invalid path separator '"+v+"'. Please ensure path starts with a non alphanumeric character");}var X=o.split(v);X.shift();return X;}function I(v,o){var X=v,Y="";if(arguments.length===2){X=o;Y=v;}return Y+"/"+X.join("/");}function K(v){return Object.prototype.toString.apply(v)==="[object Array]";}function L(v){return Object(v)!==v;}function M(v){return(K(v)?v.length:Object.keys(v).length)===0;}function N(v,X,Y,Z){var $="",a1=v,b1=[];Y.reduce(function(c1,d1,e1){$=I($,[d1]);a1=a1[d1];if(e1===Y.length-1){if(!L(Z)&&!L(a1)&&Object.keys(a1).length>0){var f1,g1=Object.keys(a1).reduce(function(o,d1){o[d1]=true;return o;},{}),h1=Object.keys(Z).some(function(d1){f1=d1;var o=g1.hasOwnProperty(d1);delete g1[d1];var m1=!L(a1[d1])&&Object.keys(a1[d1]).length>0;return!o||m1;}),i1=(Object.keys(g1).length>0),j1=(h1||i1);if(j1){var k1=h1?"One or more values are not defined in the channel contract or are defined as a non-empty object/array, for example, check '"+f1+"'.":"Some keys are missing in the event data: "+Object.keys(g1).join(", ")+".";throw new Error("Cannot write value '"+e(D,Z,true)+"' to path '"+$+"'. "+k1+" All childrens in the value must appear in the channel contract and must have a simple value or should be defined as an empty complex value");}var l1=Object.keys(Z).map(function(d1){return{serializedPath:I($,[d1]),value:Z[d1]};});Array.prototype.push.apply(b1,l1);}c1[d1]=Z;}else if(!c1.hasOwnProperty(d1)){c1[d1]=K(a1)?[]:{};}b1.push({serializedPath:$,value:c1[d1]});return c1[d1];},X);return b1;}function O(o,v){var X="",Y=v.reduce(function(Z,$){X+="/"+$;if(K(Z)&&!$.match(/^[0-9]+$/)){throw new Error("Invalid array index '"+$+"' provided in path '"+X+"'");}if(!Z.hasOwnProperty($)){throw new Error("The item '"+$+"' from path "+X+" cannot be accessed in the object: "+e(D,Z));}return Z[$];},o);return Y;}function P(o,v,X){return v.reduce(function(Y,Z,$){var a1=$===(v.length-1);if(Y.hasOwnProperty(Z)){return Y[Z];}return a1?X:{};},o);}function Q(o,v){v.pop();var X=o,Y=[];return v.reduce(function(Z,$){X=X[$];Y.push($);Z.push({serializedPath:I(Y),value:X});return Z;},[]);}function R(o){return o.map(function(v){var X=v.serializedPath;if(!D.subscribers.hasOwnProperty(X)||D.subscribers[X].length===0){return null;}return{path:X,value:v.value};}).filter(function(v){return!!v;});}function S(o,v){var X=H(o);O(C,X);var Y=N(C,G,X,v);Y.forEach(function(Z){F.emit(Z.serializedPath,Z.value);});}function T(o){var v=H(o),X=O(C,v);return P(G,v,X);}function U(o){var v=H(o),X=I(v),Y=F.last(X),Z=D.pendingEvents.hasOwnProperty(X);if(Z){return F.on(X);}Y=O(C,v);if(typeof Y!=="undefined"&&(L(Y)||!M(f(F,e(F,Y))))){F.emit(X,Y);}return F.on(X);}function V(o){var v=U(o);v.off();return v;}function W(o){var v=H(o),X=Q(G,v),Y=R(X).map(function(Z){return F.wait(Z.path,Z.value);});return Promise.all(Y.concat(F.wait(o)));}return{emit:S,on:U,once:V,last:T,wait:W,join:w.bind(null,F)};}var E=A(_);E.createChannel=B.bind(null);return E;},false);})();
},
	"sap/ushell/appRuntime/ui5/AppRuntime.js":function(){prepareModules();sap.ui.define(["sap/ui/Device","sap/ushell/resources","sap/base/util/LoaderExtensions","sap/ushell/appRuntime/ui5/AppRuntimePostMessageAPI","sap/ushell/appRuntime/ui5/AppCommunicationMgr","sap/ushell/appRuntime/ui5/AppRuntimeService","sap/ui/thirdparty/URI","sap/ushell/appRuntime/ui5/SessionHandlerAgent","sap/ushell/appRuntime/ui5/services/AppLifeCycleAgent","sap/ushell/appRuntime/ui5/services/ShellUIService","sap/ushell/ui5service/UserStatus","sap/ushell/appRuntime/ui5/services/AppConfiguration","sap/ui/core/Popup","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/Log","sap/ui/core/ComponentContainer","sap/ushell/appRuntime/ui5/renderers/fiori2/AccessKeysAgent","sap/ui/core/BusyIndicator","sap/ushell/library","sap/ushell/iconfonts","sap/ushell/utils/WindowUtils","sap/ushell/utils/UrlParsing","sap/ushell/appRuntime/ui5/performance/FesrEnhancer","sap/ui/core/routing/History"],function(D,r,L,A,a,b,U,S,c,d,f,g,P,q,i,h,C,j,B,u,I,W,o,F,H){"use strict";F.init();var _,p=new U().search(true),k,l=false,O,m=false,n=false,s=false,t=u.UI5ComponentType,v=false,G=false,w;
function x(){this.main=function(){a.init();this.getPageConfig();c.getURLParameters(_._getURI()).then(function(e){var K=e["sap-ui-app-id"];_.setModulePaths();_.init();var M=new Promise(function(R){sap.ui.require(["sap/ushell/appRuntime/ui5/services/UserInfo"],R);});Promise.all([_.initServicesContainer(),_.getAppInfo(K),M]).then(function(N){var Q=N[1];S.init();j.init();_._setInitialAppRoute();_.createApplication(K,e,Q).then(function(R){_.renderApplication(R);});});});};this._setInitialAppRoute=function(){var e=o.parseShellHash(window.hasher.getHash());if(e&&e.appSpecificRoute&&e.appSpecificRoute.length>0){b.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.setInnerAppRoute",{appSpecificRoute:decodeURIComponent(e.appSpecificRoute)});}};this._getURI=function(){return new U().query(true);};this.init=function(){I.registerFiori2IconFont();G=this._getURIParams()["sap-manifest-width"];A.registerCommHandlers({"sap.ushell.appRuntime":{oServiceCalls:{"hashChange":{executeServiceCallFn:function(e){var K=e.oMessageData.body.sHash;if(K&&K.length>0){window.hasher.replaceHash(K);}return new q.Deferred().resolve().promise();}},"setDirtyFlag":{executeServiceCallFn:function(e){var K=e.oMessageData.body.bIsDirty;if(K!==sap.ushell.Container.getDirtyFlag()){sap.ushell.Container.setDirtyFlag(K);}return new q.Deferred().resolve().promise();}},"getDirtyFlag":{executeServiceCallFn:function(e){return new q.Deferred().resolve(sap.ushell.Container.getDirtyFlag()).promise();}},"themeChange":{executeServiceCallFn:function(e){var K=e.oMessageData.body.currentThemeId;sap.ushell.Container.getUser().setTheme(K);return new q.Deferred().resolve().promise();}},"buttonClick":{executeServiceCallFn:function(e){sap.ushell.renderers.fiori2.Renderer.handleHeaderButtonClick(e.oMessageData.body.buttonId);return new q.Deferred().resolve().promise();}},"uiDensityChange":{executeServiceCallFn:function(e){var K=e.oMessageData.body.isTouch;q("body").toggleClass("sapUiSizeCompact",(K==="0")).toggleClass("sapUiSizeCozy",(K==="1"));return new q.Deferred().resolve().promise();}}}}});};this.handleLinkElementOpen=function(e,K){if(e.target&&e.target.tagName==="A"&&e.target.target==="_blank"&&e.target.href&&e.target.href.indexOf('#')>0){var N=_.rebuildNewAppUrl(e.target.href,K);if(N!==e.target.href){W.openURL(N);return false;}}};this.rebuildNewAppUrl=function(T,e){var K=T.split('#');if(K[0].length===0||K[0]===document.URL.split('#')[0]){return e+"#"+K[1];}return T;};this.getPageConfig=function(){var e,K={};v=(p["sap-spaces"]==="true");e=q("meta[name='sap.ushellConfig.ui5appruntime']")[0];if(e!==undefined){K=JSON.parse(e.content);if(v===true){K.ushell=K.ushell||{};K.ushell.spaces={"enabled":true};}}window["sap-ushell-config"]=q.extend(true,{},y(),K);};this.setModulePaths=function(){if(window["sap-ushell-config"].modulePaths){var e=Object.keys(window["sap-ushell-config"].modulePaths);for(var K in e){(function(){var M={};M[e[K].replace(/\./g,"/")]=window["sap-ushell-config"].modulePaths[e[K]];sap.ui.loader.config({paths:M});}());}}};this.initServicesContainer=function(){return new Promise(function(R){sap.ui.require(["sap/ushell/appRuntime/ui5/services/Container"],function(K){K.bootstrap("apprt",{apprt:"sap.ushell.appRuntime.ui5.services.adapters"}).then(function(){window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}return undefined;};sap.ushell.Container.getFLPUrlAsync().then(function(M){window.onclick=function(e){return _.handleLinkElementOpen(e,M);};window.onkeydown=function(e){if(e.code==='Enter'){return _.handleLinkElementOpen(event,M);}};});sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(e){w=e;w.init(function(){});R();});});});});};this._getURIParams=function(){return p;};this.getAppInfo=function(e){var K=window["sap-ushell-config"].ui5appruntime.config.appIndex.data,M=window["sap-ushell-config"].ui5appruntime.config.appIndex.module,N=window["sap-ushell-config"].ui5appruntime.config.appIndex.enableCache;return new Promise(function(R){if(K&&!i(K)){c.init(M,_.createApplication.bind(_),_.renderApplication.bind(_),N,e,K);R(K);}else{c.init(M,_.createApplication.bind(_),_.renderApplication.bind(_),N);c.getAppInfo(e,document.URL).then(function(Q){R(Q);});}});};this.setApplicationParameters=function(e,K){var M,N,Q,R=new q.Deferred();function T(V,X){var Y="";if(V&&V.length>0){Y=(V.startsWith("?")?"":"?")+V;}if(X&&X.length>0){Y+=(Y.length>0?"&":"?")+X;}return Y;}if(K.hasOwnProperty("sap-startup-params")){M=(new U("?"+K["sap-startup-params"])).query(true);if(M.hasOwnProperty("sap-intent-param")){N=M["sap-intent-param"];delete M["sap-intent-param"];}Q=(new U("?")).query(M).toString();if(N){b.sendMessageToOuterShell("sap.ushell.services.CrossApplicationNavigation.getAppStateData",{"sAppStateKey":N}).then(function(V){e.url+=T(Q,V);R.resolve();},function(V){e.url+=T(Q);R.resolve();});}else{e.url+=T(Q);R.resolve();}}else{R.resolve();}return R.promise();};this.setHashChangedCallback=function(){if(n===true){return;}function e(K){if(window.hasher.disableCFLPUpdate===true){return;}if(K&&typeof K==="string"&&K.length>0){b.sendMessageToOuterShell("sap.ushell.appRuntime.hashChange",{"newHash":K,"direction":H.getInstance().getDirection()});}}window.hasher.changed.add(e.bind(this),this);n=true;};this.createApplication=function(e,K,M){var N=o.getHash(window.location.href),Q=o.parseShellHash(N);return new Promise(function(R){var T="";if(K.hasOwnProperty("sap-history-dir")){T=K["sap-history-dir"];w.hashChanger.fireEvent("hashReplaced",{hash:w.hashChanger.getHash(),direction:T});h.debug("AppRuntime.createApplication :: Informed by the FLP, to change the History direction "+"property in the Iframe to: "+T);}k=new C({id:e+"-content",width:"100%",height:"100%"});var V="0";if(p.hasOwnProperty("sap-touch")){V=p["sap-touch"];if(V!=="0"&&V!=="1"){V="0";}}q("body").toggleClass("sapUiSizeCompact",(V==="0")).toggleClass("sapUiSizeCozy",(V==="1"));c.setComponent(k);new d({scopeObject:k,scopeType:"component"});new f({scopeObject:k,scopeType:"component"});if(s===false){sap.ushell.renderers.fiori2.utils.init();if(P.attachBlockLayerStateChange){P.attachBlockLayerStateChange(function(X){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.showShellUIBlocker",{"bShow":X.getParameters().visible});});}s=true;}_.setApplicationParameters(M,K).done(function(){_.setHashChangedCallback();sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(X){if(M.asyncHints&&Array.isArray(M.asyncHints.libs)){M.asyncHints.libs=M.asyncHints.libs.filter(function(Y){return Y.name!=="sap.ushell";});}X.createComponent({ui5ComponentName:e,applicationDependencies:M,url:M.url},Q,[],t.Application).then(function(Y){F.setAppShortId(Y.componentHandle);sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(Z){Z.prepareCurrentAppObject("UI5",Y.componentHandle.getInstance(),false,undefined);});_.considerChangingTheDefaultFullWidthVal(Y);_.overrideUrlHelperFuncs();_.loadPlugins();R(Y);});});});});};this.considerChangingTheDefaultFullWidthVal=function(R){if(G===true||G==="true"){q("body").toggleClass("sapUiSizeCompact",false).toggleClass("sapUShellApplicationContainerLimitedWidth",true).toggleClass("sapUShellApplicationContainer",true);var e=R.componentHandle.getInstance();var K=e.getMetadata();if(K){var M=e.getMetadata().getManifestEntry("/sap.ui/fullWidth");if(M===true||M==="true"){q("body").toggleClass("sapUiSizeCompact",true).toggleClass("sapUShellApplicationContainerLimitedWidth",false).toggleClass("sapUShellApplicationContainer",false);}}}};this.overrideUrlHelperFuncs=function(){if(l===true){return;}l=true;if(sap.m&&sap.m.URLHelper){sap.m.URLHelper.triggerEmail=function(T,e,K,M,N){b.sendMessageToOuterShell("sap.ushell.services.ShellUIService.sendEmail",{sTo:T,sSubject:e,sBody:K,sCc:M,sBcc:N,sIFrameURL:document.URL,bSetAppStateToPublic:true});};O=sap.m.URLHelper.redirect;sap.m.URLHelper.redirect=function(e,N){if(e&&N===true&&e.indexOf('#')>=0){sap.ushell.Container.getFLPUrlAsync().then(function(K){var M=_.rebuildNewAppUrl(e,K);O.call(sap.m.URLHelper,M,N);});}else{O.call(sap.m.URLHelper,e,N);}};}};this.loadPlugins=function(){if(m===true){return;}m=true;sap.ushell.Container.getServiceAsync("PluginManager").then(function(e){E(e);J(e);e.loadPlugins("RendererExtensions");});};function E(e){e.registerPlugins({RTAPluginAgent:{component:"sap.ushell.appRuntime.ui5.plugins.rtaAgent",url:sap.ui.require.toUrl("sap/ushell/appRuntime/ui5/plugins/rtaAgent"),config:{"sap-plugin-agent":true}}});}function J(e){var K;if(p.hasOwnProperty("sap-wa-debug")&&p["sap-wa-debug"]=="dev"){K="https://education3.hana.ondemand.com/education3/web_assistant/framework/FioriAgent.js";}else if(p.hasOwnProperty("sap-wa-debug")&&p["sap-wa-debug"]=="prev"){K="https://webassistant-outlook.enable-now.cloud.sap/web_assistant/framework/FioriAgent.js";}else{K="https://webassistant.enable-now.cloud.sap/web_assistant/framework/FioriAgent.js";}e.registerPlugins({WAPluginAgent:{component:"sap.ushell.appRuntime.ui5.plugins.scriptAgent",url:sap.ui.require.toUrl("sap/ushell/appRuntime/ui5/plugins/scriptAgent"),config:{"sap-plugin-agent":true,"url":K}}});}this.renderApplication=function(R){k.setComponent(R.componentHandle.getInstance()).placeAt("content");B.hide();};}
function y(){return{services:{CrossApplicationNavigation:{module:"sap.ushell.appRuntime.ui5.services.CrossApplicationNavigation",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},NavTargetResolution:{module:"sap.ushell.appRuntime.ui5.services.NavTargetResolution",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},ShellNavigation:{module:"sap.ushell.appRuntime.ui5.services.ShellNavigation",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},AppConfiguration:{module:"sap.ushell.appRuntime.ui5.services.AppConfiguration"},Bookmark:{module:"sap.ushell.appRuntime.ui5.services.Bookmark",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},LaunchPage:{module:"sap.ushell.appRuntime.ui5.services.LaunchPage",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},UserInfo:{module:"sap.ushell.appRuntime.ui5.services.UserInfo",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},AppState:{module:"sap.ushell.appRuntime.ui5.services.AppState",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},PluginManager:{config:{isBlueBox:true}},Menu:{module:"sap.ushell.appRuntime.ui5.services.Menu",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},CommonDataModel:{module:"sap.ushell.appRuntime.ui5.services.CommonDataModel",adapter:{module:"sap.ushell.appRuntime.ui5.services.adapters.EmptyAdapter"}},Ui5ComponentLoader:{config:{amendedLoading:false}}}};}
var z=new x();_=z;z.main();return z;});
function prepareModules(){"use strict";sap.ui.require(["sap/ui/core/BusyIndicator"],function(B){try{if(apprtBIdiv){apprtBIdiv.parentNode.removeChild(apprtBIdiv);}B.show(0);}catch(e){B.show(0);}});if(document.URL.indexOf("ui5appruntime")>0){sap.ui.define("sap/ushell/ApplicationType",[],function(){return{URL:{type:"URL"},WDA:{type:"WDA"},TR:{type:"TR"},NWBC:{type:"NWBC"},WCF:{type:"WCF"},SAPUI5:{type:"SAPUI5"}};});sap.ui.define("sap/ushell/components/applicationIntegration/AppLifeCycle",[],function(){return{};});sap.ui.define("sap/ushell/services/_AppState/WindowAdapter",[],function(){return function(){};});sap.ui.define("sap/ushell/services/_AppState/SequentializingAdapter",[],function(){return function(){};});sap.ui.define("sap/ushell/services/_AppState/Sequentializer",[],function(){return function(){};});sap.ui.define("sap/ushell/services/Configuration",[],function(){function C(){this.attachSizeBehaviorUpdate=function(){};this.hasNoAdapter=true;}C.hasNoAdapter=true;return C;});sap.ui.define("sap/ushell/services/_PluginManager/Extensions",[],function(){return function(){};});sap.ui.define("sap/ushell/TechnicalParameters",[],function(){return{getParameterValue:function(){return Promise.resolve([]);},getParameterValueSync:function(){return[];},getParameters:function(){return[];},getParameterNames:function(){return[];},isTechnicalParameter:function(){return false;}};});sap.ui.define("sap/ushell/AppInfoParameters",[],function(){return{getInfo:function(){return Promise.resolve({});}};});}}
this.prepareModules=prepareModules;
},
	"sap/ushell/appRuntime/ui5/BusyIndicator.js":'// Copyright (c) 2009-2020 SAP SE, All Rights Reserved\nvar apprtBIdiv;document.addEventListener("DOMContentLoaded",function(){try{var a=document.createElement("style");a.type="text/css";a.innerHTML=".apprtBIbg {background-color:#636363} "+".apprtBIcenter {position: absolute;top: 50%;left: 50%;margin-top: -50px;margin-left: -100px;width: 200px;height: 100px;} "+".apprtBIcir {height: 30px;width: 30px;border-radius:50%;transform: scale(0);background-color:#0854a0;animation: apprtBIscaling 1.8s ease-in-out infinite;display: inline-block;margin:.1rem;} "+".apprtBIcir:nth-child(0) {animation-delay:0s;} "+".apprtBIcir:nth-child(1) {animation-delay:0.2s;} "+".apprtBIcir:nth-child(2) {animation-delay:0.4s;} "+".apprtBIcir:nth-child(3) {animation-delay:0.6s;} "+"@keyframes apprtBIscaling {0%, 100% {transform: scale(0.2);} 40% {transform: scale(1);} 50% {transform: scale(1);}}";document.getElementsByTagName("head")[0].appendChild(a);document.body.classList.add("apprtBIbg");apprtBIdiv=document.createElement("div");apprtBIdiv.classList.add("apprtBIcenter");document.body.appendChild(apprtBIdiv);var b;b=document.createElement("div");b.classList.add("apprtBIcir");apprtBIdiv.appendChild(b);b=document.createElement("div");b.classList.add("apprtBIcir");apprtBIdiv.appendChild(b);b=document.createElement("div");b.classList.add("apprtBIcir");apprtBIdiv.appendChild(b);}catch(e){}});\n',
	"sap/ushell/appRuntime/ui5/libsPreload.js":function(){try{document.getElementById('sap-ui-bootstrap').setAttribute("data-sap-ui-libs","sap.ui.core,sap.m,sap.ui.fl");}catch(e){}try{document.getElementById('sap-ui-bootstrap').setAttribute("data-sap-ui-bindingSyntax","complex");}catch(e){}try{document.getElementById('sap-ui-bootstrap').setAttribute("data-sap-ui-compatVersion","1.16");}catch(e){}
},
	"sap/ushell/bootstrap/ui5loader-config.js":function(){(function(){"use strict";var u=window.sap&&window.sap.ui&&window.sap.ui.loader;if(!u){throw new Error("FLP bootstrap: ui5loader is needed, but could not be found");}var c={},s=document.getElementById("sap-ui-bootstrap"),S=s&&s.getAttribute("src"),r=/^((?:.*\/)?resources\/~\d{14}~\/)/,b;if(S&&r.test(S)){b=r.exec(S)[1];window["sap-ui-config"]=window["sap-ui-config"]||{};window["sap-ui-config"].resourceRoots=window["sap-ui-config"].resourceRoots||{};window["sap-ui-config"].resourceRoots[""]=b;}u.config(c);}());
},
	"sap/ushell/components/tiles/indicatorHarveyBall/HarveyBallTile.view.js":function(){sap.ui.require(["sap/ca/ui/model/format/NumberFormat","sap/ui/model/analytics/odata4analytics","sap/ushell/components/tiles/indicatorTileUtils/smartBusinessUtil","sap/suite/ui/commons/HarveyBallMicroChart","sap/suite/ui/commons/HarveyBallMicroChartItem","sap/suite/ui/commons/TileContent","sap/suite/ui/commons/GenericTile"],function(N,o,s,H,a,T,G){"use strict";sap.ui.getCore().loadLibrary("sap.suite.ui.commons");sap.ui.jsview("tiles.indicatorHarveyBall.HarveyBallTile",{getControllerName:function(){},createContent:function(){var m=new H({total:"{/value}",size:"{/size}",totalLabel:"{/totalLabel}",items:[new a({fraction:"{/fractionValue}",fractionLabel:"{/fractionLabel}",color:"{/color}"})]});var t=new T({size:"{/size}",content:m});this.oTile=new G({subheader:"{/subheader}",frameType:"{/frameType}",size:"{/size}",header:"{/header}",tileContent:[t]});}});});
},
	"sap/ushell/components/tiles/indicatorTileUtils/indicatorTileHelper.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper");
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setErrorState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Failed);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadingState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loading);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setLoadedState=function(){this.getTile().setState(sap.suite.ui.commons.LoadState.Loaded);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendDown=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Down);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendUp=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.Up);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTrendNeutral=function(){this.getTile().setIndicator(sap.suite.ui.commons.DeviationIndicator.None);};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdGood=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdBad=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdCritical=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setThresholdNeutral=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.calculateThreshold=function(){};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.setTile=function(t){this.tile=t;};
sap.ushell.components.tiles.indicatorTileUtils.indicatorTileHelper.prototype.getTile=function(){return this.tile;};
}());
}
},"sap/ushell/library-preload"
);
//# sourceMappingURL=library-preload.js.map