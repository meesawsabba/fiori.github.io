// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/ManagedObject","sap/ui/core/Control","sap/ui/core/InvisibleText","sap/ushell/Config","sap/ushell/library","sap/ushell/override","sap/ushell/resources","sap/ushell/utils","./DashboardGroupsContainerRenderer"],function(M,C,I,u,a,b,c,d){"use strict";var D=C.extend("sap.ushell.ui.launchpad.DashboardGroupsContainer",{metadata:{library:"sap.ushell",properties:{accessibilityLabel:{type:"string",defaultValue:null},displayMode:{type:"string",defaultValue:null},_gridEnabled:{type:"boolean",defaultValue:false}},aggregations:{groups:{type:"sap.ui.core.Control",multiple:true,singularName:"group"}},events:{afterRendering:{}}}});D.prototype.init=function(){if(u.last("/core/home/gridContainer")){this.setProperty("_gridEnabled",true);}else{this.setProperty("_gridEnabled",false);}this.addInvisibleAccessabilityTexts();};D.prototype.exit=function(){if(this.oTileText){this.oTileText.destroy();}if(this.oTileEditModeText){this.oTileEditModeText.destroy();}C.prototype.exit.apply(this,arguments);};D.prototype.updateGroups=b.updateAggregatesFactory("groups");D.prototype.onAfterRendering=function(){var t=this,o={bUseUniqueMark:true};d.setPerformanceMark("FLP-TimeToInteractive_tilesLoaded",o);t.fireAfterRendering();};D.prototype.getGroupControlByGroupId=function(g){try{var f=this.getGroups();for(var i=0,l=f.length;i<l;++i){if(f[i].getGroupId()===g){return f[i];}}}catch(e){}return null;};D.prototype.addLinksToUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,i){if(!G.getIsGroupSelected()){M.prototype.updateAggregation.call(G,"links");}});};D.prototype.removeLinksFromAllGroups=function(){var g=this.getGroups();g.forEach(function(G,e){var l=G.getLinks();if(l.length){if(l[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<l.length;i++){l[i].destroy();}}}});};D.prototype.removeLinksFromUnselectedGroups=function(){var g=this.getGroups();g.forEach(function(G,e){var l=G.getLinks();if(l.length&&!G.getIsGroupSelected()){if(l[0].getMetadata().getName()==="sap.m.GenericTile"){G.removeAllLinks();}else{for(var i=0;i<l.length;i++){l[i].destroy();}}}});};D.prototype.addInvisibleAccessabilityTexts=function(){this.oTileText=new I("sapUshellDashboardAccessibilityTileText",{text:c.i18n.getText("tile")}).toStatic();var B=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(B){this.oTileEditModeText=new I("sapUshellDashboardAccessibilityTileEditModeText",{text:B.getText("LIST_ITEM_NAVIGATION")}).toStatic();}};return D;});
