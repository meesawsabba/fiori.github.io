// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ushell/services/_ClientSideTargetResolution/Utils"],function(L,_){"use strict";var a={};function b(g){var s;var o;var S=g();if(!S.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #begin method of StagedLogger.");}s=S.logId;if(a[s]){throw new Error("'cannot call #begin twice with same log id: '"+s+"'");}else{a[s]={};}o=a[s];o.title=S.title||null;o.moduleName=S.moduleName||null;var r=function(C,n){if(n===1){return C;}return r(C,n-1)+C;};o.stages=S.stages.map(function(d){return[d,r("-",d.length)];});return s;}function l(g){var s,d,f,h,p,S,n,A;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;S=A.stage;p=A.prefix;h=A.lines;f=A.line;n=A.number;if(!h&&f&&p){f=p+" "+f;}d=a[s].stages[S-1];if(f){d.push(f);}if(h){if(p){p=(f?" ":"")+p;}var i=h.map(function(f,I){return(n?(I+1):"")+(p?p+" ":"")+f;});d.push.apply(d,i);}}function e(g){var A,o,s;A=g();if(!A.hasOwnProperty("logId")){throw new Error("'logId' argument was not provided in #log method of StagedLogger.");}s=A.logId;o=a[s];if(typeof o!=="object"){throw new Error("Logger .end was called on an already ended logger");}var d=o.stages.map(function(S){return S.join("\n");}).join("\n\n");L.debug("[REPORT #"+s+"] "+o.title,"\n"+d+"\n",o.moduleName);delete a[s];}function c(){return a;}return{begin:function(){if(L.getLevel()>=L.Level.DEBUG){b.apply(null,arguments);}},log:function(){if(L.getLevel()>=L.Level.DEBUG){l.apply(null,arguments);}},end:function(){if(L.getLevel()>=L.Level.DEBUG){e.apply(null,arguments);}},_getLogs:c};});
