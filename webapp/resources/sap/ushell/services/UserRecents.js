// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/base/util/ObjectPath","./_UserRecents/RecentsList","./_UserRecents/RecentActivity","./_UserRecents/RecentAppsUsage"],function(B,q,u,O,R,c,d){"use strict";var U=B.extend("sap.ushell.services.UserRecents",{constructor:function(){this.oRecentSearches=new R("RecentSearches",10,U._compareSearchItems);this.oRecentDataSources=new R("RecentDataSources",6,U._compareDataSources);this.oRecentApps=new R("RecentApps",6,U._compareApps);this.oRecentActivity=new c(500);this.oAppsUsage=new d();}});U._compareSearchItems=function(a,b){var r=false;if(a.oDataSource&&b.oDataSource){if(a.oDataSource.objectName&&b.oDataSource.objectName){r=((a.sTerm===b.sTerm)&&(a.oDataSource.objectName.value===b.oDataSource.objectName.value));}if(!a.oDataSource.objectName&&!b.oDataSource.objectName){r=(a.sTerm===b.sTerm);}}if(!a.oDataSource&&!b.oDataSource){r=(a.sTerm===b.sTerm);}return r;};U._compareDataSources=function(a,b){if(a.objectName&&b.objectName){return a.objectName.value===b.objectName.value;}return false;};U._compareApps=function(a,b){return a.semanticObject===b.semanticObject&&a.action===b.action;};U.prototype.addActivity=function(a){var D=new q.Deferred();this.oRecentActivity.newItem(a).done(function(){this.oRecentActivity.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};U.prototype.clearRecentActivities=function(){return this.oRecentActivity.clearAllActivities();};U.prototype.getRecentActivity=function(){return this.oRecentActivity.getRecentItems();};U.prototype.getFrequentActivity=function(){return this.oRecentActivity.getFrequentItems();};U.prototype.noticeDataSource=function(D){var o=O.get("objectName.value",D)||"";var s=O.get("objectName",D)||"";var v=o.toLowerCase()==="$$all$$";var b=s.toLowerCase()==="$$all$$";if(!v&&!b){var a=new q.Deferred();this.oRecentDataSources.newItem(D).done(function(){this.oRecentDataSources.getRecentItems().done(a.resolve).fail(a.reject);}.bind(this)).fail(a.reject);return a.promise();}return this.oRecentDataSources.getRecentItems();};U.prototype.addDataSourceActivity=U.prototype.noticeDataSource;U.prototype.getRecentDataSources=function(){return this.oRecentDataSources.getRecentItems();};U.prototype.noticeSearch=function(s){var D=new q.Deferred();this.oRecentSearches.newItem(s).done(function(){this.oRecentSearches.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};U.prototype.addSearchActivity=U.prototype.noticeSearch;U.prototype.getRecentSearches=function(){return this.oRecentSearches.getRecentItems();};U.prototype.noticeApp=function(a){var D=new q.Deferred();this.oRecentApps.newItem(a).done(function(){this.oRecentApps.getRecentItems().done(D.resolve).fail(D.reject);}.bind(this)).fail(D.reject);return D.promise();};U.prototype.addAppActivity=U.prototype.noticeApp;U.prototype.getRecentApps=function(){return this.oRecentApps.getRecentItems();};U.prototype.addAppUsage=function(h){var r=u.getBasicHash(h);this.oAppsUsage.addAppUsage(r);};U.prototype.getAppsUsage=function(){return this.oAppsUsage.getAppsUsage();};U.hasNoAdapter=true;return U;},true);
