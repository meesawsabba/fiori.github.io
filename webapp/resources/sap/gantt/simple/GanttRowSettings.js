/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/base/util/uid","sap/ui/table/RowSettings","./AggregationUtils","./RenderUtils","sap/gantt/misc/Utility"],function(u,T,A,R,U){"use strict";var G=T.extend("sap.gantt.simple.GanttRowSettings",{metadata:{library:"sap.gantt",properties:{rowId:{type:"string"}},defaultAggregation:"shapes1",aggregations:{calendars:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendars"},calendars1:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar1"},calendars2:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar2"},calendars3:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar3"},calendars4:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar4"},calendars5:{type:"sap.gantt.simple.BaseCalendar",multiple:true,singularName:"calendar5"},relationships:{type:"sap.gantt.simple.Relationship",multiple:true,singularName:"relationship"},shapes1:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape1"},shapes2:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape2"},shapes3:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape3"},shapes4:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape4"},shapes5:{type:"sap.gantt.simple.BaseShape",multiple:true,singularName:"shape5"}}}});G.prototype.getAllExpandableShapes=function(){var a=[];this._mapAllShapes(function(s){if(s.length>0&&s[0].getExpandable()){a.push(s);}});return[].concat.apply([],a);};G.prototype._mapAllShapes=function(t){var a=A.getNonLazyAggregations(this);Object.keys(a).map(function(n){if(a.hasOwnProperty(n)){var o=a[n];t(this[o._sGetter]());}}.bind(this));};G.prototype.getParentGantt=function(){return A.getParentControlOf("sap.gantt.simple.GanttChartWithTable",this);};G.prototype.getParentRow=function(){return A.getParentControlOf("sap.ui.table.Row",this);};G.prototype.getShapeUid=function(s){var S=s.getShapeId();if(!S){S=u();s.setProperty("shapeId",S,true);}var a=s.getScheme(),r=this.getRowUid(a);var b=this.getShapeBindingContextPath(s);var c=r+"|DATA:"+b+"["+S+"]";return c;};G.prototype.getShapeBindingContextPath=function(s){var m=this.getBindingModelName();var b=s.getBindingContext(m);if(b==null){b=this.getBindingContextFromParent(s);}if(b){return b.getPath();}return"";};G.prototype.getBindingModelName=function(){var b=this._getRow().getParent().getBindingInfo("rows");return b.model;};G.prototype.getBindingContextFromParent=function(s,m){var p=s.getParent();var b;while(p){b=p.getBindingContext(m);if(b){return b;}else{p=p.getParent();}}return b;};G.prototype.getRowUid=function(s,i){var r=this.getRowId();if(r==null){return null;}if(!s){s=this.getParentGantt().getPrimaryShapeScheme().getKey();}if(i===undefined){i=this.getParentRow()?this.getParentRow().getIndex():0;}return"PATH:"+r+"|SCHEME:"+s+"["+i+"]";};G.prototype.renderElement=function(r,g){R.renderInlineShapes(r,this,g);};G.prototype.invalidate=function(o){return this._invalidateInnerGanttIfNeeded();};G.prototype._invalidateInnerGanttIfNeeded=function(){var r=this._getRow();U.safeCall(r,["getParent","getParent","getInnerGantt","invalidate"]);return this;};return G;});
